---
number: 1847
title: "Feature Request: Parsing unknown arguments"
type: issue
state: closed
author: elichai
labels: []
assignees: []
created_at: 2020-04-21T09:26:48Z
updated_at: 2020-04-28T10:31:37Z
url: https://github.com/clap-rs/clap/issues/1847
synced_at: 2026-01-07T12:31:17-06:00
---

# Feature Request: Parsing unknown arguments

---

_Issue opened by @elichai on 2020-04-21 09:26_

Hi,
I'm writing a wrapper around another program, I have my own flags and inputs and the rest I want to pass through to the other program without knowing what are they.
I managed to do that using something like this:
```rust
let app: App = ...;
let mut unknwon = Vec::new();
let matches = match app.clone().get_matches_safe() {
    Ok(matches) => matches,
    Err(e) => match e.kind {
        ErrorKind::UnknownArgument => {
            unknwon = e.info.unwrap();
            let commands: Vec<Arg> =
                unknwon.iter().map(|c| clap::Arg::from_usage(&c)).collect();
            app.args(&commands).get_matches()
        }
        _ => e.exit(),
    },
};
```
https://play.rust-lang.org/?gist=21efe2e89012e9b0583d3eb96d872ef8

It would be a lot nicer if I could get both the `ArgMatches` and the unknown arguments.  
Thanks!

---

_Label `T: new feature` added by @elichai on 2020-04-21 09:26_

---

_Comment by @CreepySkeleton on 2020-04-21 09:31_

The standard way to do that in Unix world is `-- external_args`. Take a look at `Arg::raw`

---

_Comment by @elichai on 2020-04-21 09:41_

Right. but I'm wrapping git, so it also has a ` -- `, and I want to have the same interface as `git-diff`

---

_Comment by @CreepySkeleton on 2020-04-21 09:48_

From git-diff man page:
```
git diff [<options>] [<commit>] [--] [<path>…​]
git diff [<options>] --cached [<commit>] [--] [<path>…​]
git diff [<options>] <commit> <commit> [--] [<path>…​]
git diff [<options>] <blob> <blob>
git diff [<options>] --no-index [--] <path> <path>
```

You'd be having the same interface as `git-diff` with `--` if you use `Arg::raw`, right?

---

_Comment by @elichai on 2020-04-21 09:52_

Raw is pretty cool, but I'm not sure if it solves my problem.

> You'd be having the same interface as `git-diff` with `--` if you use `Arg::raw`, right?

yeah, so I want to be able to do `my-git HEAD HEAD^ --my-command -- file` for that I need to be able to parse `--my-command` but forward everything else into git-diff



---

_Comment by @CreepySkeleton on 2020-04-21 10:05_

Then I believe [`AppSettings::AllowMissingPositional`](https://docs.rs/clap/2.33.0/clap/enum.AppSettings.html#variant.AllowMissingPositional) is what you are looking for. 

---

_Comment by @CreepySkeleton on 2020-04-21 10:06_

The only other way is to reimplement git' cli

---

_Comment by @CreepySkeleton on 2020-04-28 10:09_

@elichai Have you found a solution?

---

_Comment by @elichai on 2020-04-28 10:24_

I'm using my original solution for now, but I might reimplement git-diff's CLI arguments and flags.

---

_Comment by @CreepySkeleton on 2020-04-28 10:31_

Then I'm closing this because I don't thin there's any more left for us to do here. Good luck!

---

_Closed by @CreepySkeleton on 2020-04-28 10:31_

---

_Referenced in [drager/wasm-pack#851](../../drager/wasm-pack/pulls/851.md) on 2020-10-02 23:31_

---
