---
number: 838
title: "Cargo environment variables doesn't trigger a rebuild on update"
type: issue
state: closed
author: ishitatsuyuki
labels:
  - C-enhancement
  - A-docs
assignees: []
created_at: 2017-02-02T03:29:40Z
updated_at: 2018-08-02T03:30:00Z
url: https://github.com/clap-rs/clap/issues/838
synced_at: 2026-01-07T12:31:16-06:00
---

# Cargo environment variables doesn't trigger a rebuild on update

---

_Issue opened by @ishitatsuyuki on 2017-02-02 03:29_

### Rust Version

rustc 1.16.0-dev (0f8a29647 2017-01-28)

Disclaimer: homemade build

### Affected Version of clap

2.20.1

### Expected Behavior Summary

Changing version/description in Cargo.toml should trigger a rebuild with `app_from_crate!()` macro and others.

### Actual Behavior Summary

Nothing happens.

---

A quick hack that can trick the compiler:
```rust
include_str!("../Cargo.toml");
```
This is not universal though, since this assumes the main source is `src/main.rs`.

The real solution would require hooking into the compiler (via plugin/proc-macro) and alter the filemap.
It's likely a rustc design fault, so we can also file an issue on them instead.

**For the meanwhile, put a big warning in docs.**


---

_Comment by @kbknapp on 2017-02-03 17:20_

Thanks for mentioning this, I'll add it to the upcoming round of doc changes!

---

_Label `C: docs` added by @kbknapp on 2017-02-03 17:20_

---

_Label `D: easy` added by @kbknapp on 2017-02-03 17:20_

---

_Label `P2: need to have` added by @kbknapp on 2017-02-03 17:20_

---

_Label `T: enhancement` added by @kbknapp on 2017-02-03 17:20_

---

_Label `W: 2.x` added by @kbknapp on 2017-02-03 17:20_

---

_Added to milestone `2.20.3` by @kbknapp on 2017-02-03 17:20_

---

_Closed by @kbknapp on 2017-02-03 22:43_

---
