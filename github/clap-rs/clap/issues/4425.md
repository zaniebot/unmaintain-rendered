---
number: 4425
title: "Create `arg_required_else` method for `clap::builder::Command` API"
type: issue
state: closed
author: badjr13
labels:
  - C-enhancement
  - A-validators
  - S-wont-fix
assignees: []
created_at: 2022-10-26T13:55:51Z
updated_at: 2022-11-08T04:26:51Z
url: https://github.com/clap-rs/clap/issues/4425
synced_at: 2026-01-07T12:31:17-06:00
---

# Create `arg_required_else` method for `clap::builder::Command` API

---

_Issue opened by @badjr13 on 2022-10-26 13:55_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Clap Version

4.0.18

### Describe your use case

Currently, I have a "non-DRY" solution for what happens when my Clap CLI executable is run without anything passed to it. I noticed there is an `arg_required_else_help` method on the `clap::builder::Command` API which is great if you want to display the `help` message when nothing is passed. If the `arg_required_else_help` option is not set to `true`, then nothing happens when you run your Clap CLI app. My problem is that I want something to happen when nothing is passed but I don't want to display the `help` message in this instance. 

### Describe the solution you'd like

I'd like to create an `arg_required_else` method on the `clap::builder::Command` API that takes a function that defines the functionality the user wants to run when nothing is passed to their Clap CLI app.

```rust
fn main() {
    fn testaroo() {
        println!("A custom message would go here.");
    }
    
    fn arg_required_else(f: fn()) {
        f();
    }
    
    arg_required_else(testaroo);
}
```
Output:
```
A custom message would go here.
```

### Alternatives, if applicable

_No response_

### Additional Context

I'm relatively new to Rust and am using Clap for one of my applications. I am looking to DRY up [this part](https://github.com/badjr13/laydown/blob/main/src/lib.rs#L169) of one of my apps, but before I wrote something custom, I thought `arg_required_else` would be an excellent addition to the `clap::builder::Command` API. It would solve my problem and seems like an API that would be useful to users of Clap.

I'm reaching out not only for this request for a feature but also for input on the best way to implement this. I'm happy to write the code, but I want to do so in a way that is idiomatic Rust and fits the Clap codebase too. Should it be a method that takes a function? A method that takes a closure? Should it be done another way?

---

_Label `C-enhancement` added by @badjr13 on 2022-10-26 13:55_

---

_Comment by @epage on 2022-10-26 15:00_

Generally, people use `ArgMatches::args_present()` for this.

At the moment, clap doesn't do callbacks for application logic and we'll need to consider the wider needs for that if we go down that road (for example, what [clap-nested](https://crates.io/crates/clap-nested) provides for subcommands)

---

_Comment by @epage on 2022-10-26 15:01_

btw one improvement that could be made is to have the docs for `arg_required_else_help` suggest using `ArgMatches::args_present` if custom behavior is needed.

---

_Comment by @badjr13 on 2022-10-26 15:11_

I will look into utilizing `ArgMatches::args_present` for my problem as well as updating the docs mentioned above. Thank you.

---

_Label `A-validators` added by @epage on 2022-11-08 04:26_

---

_Label `S-wont-fix` added by @epage on 2022-11-08 04:26_

---

_Comment by @epage on 2022-11-08 04:26_

As we provide the building blocks for this, I lean towards closing this.  If someone wants to make the case for this, they are welcome to and we can consider re-opening.

---

_Closed by @epage on 2022-11-08 04:26_

---
