---
number: 3450
title: "AppSettings::AllowHyphenValues does not document what it does beyond ArgSettings::AllowHyphenValues"
type: issue
state: closed
author: epage
labels:
  - C-bug
  - M-breaking-change
  - A-parsing
  - S-waiting-on-design
assignees: []
created_at: 2022-02-11T18:32:42Z
updated_at: 2022-09-07T12:39:26Z
url: https://github.com/clap-rs/clap/issues/3450
synced_at: 2026-01-07T12:31:17-06:00
---

# AppSettings::AllowHyphenValues does not document what it does beyond ArgSettings::AllowHyphenValues

---

_Issue opened by @epage on 2022-02-11 18:32_

In working on #3449, I was going to make `AppSettings::AllowHyphenValues` be applied to the ArgSettings and remove checking for it at the app-level, but the parser has logic specific to the app level.  This isn't documented and its unclear how intentional this is.  If its to cover some cases, we should be letting users know.  If we can remove it, all the better.

This is split ouf of #2717 

---

_Label `C-bug` added by @epage on 2022-02-11 18:32_

---

_Label `A-parsing` added by @epage on 2022-02-11 18:32_

---

_Label `S-blocked` added by @epage on 2022-02-11 18:32_

---

_Label `S-waiting-on-design` added by @epage on 2022-02-11 18:32_

---

_Label `S-blocked` removed by @epage on 2022-02-11 18:32_

---

_Added to milestone `4.0` by @epage on 2022-02-11 18:34_

---

_Comment by @epage on 2022-02-11 22:06_

So one case where we use `AllowHyphenValues` at the app level is when detecting `-abc` is a series of short flags or a hyphen value.  This has a bug outlined in #3410 

---

_Comment by @epage on 2022-02-11 22:07_

Another case for `AllowHyphenValues` is for falling back to treating it as a value for a positional argument.  In theory, the positional argument should be setting this instead.

---

_Comment by @epage on 2022-02-11 22:09_

The last case I identified is also about positional arguments

---

_Comment by @epage on 2022-02-11 22:10_

I think the short case might also be about positional.  If so, changing our behavior to checking the positional for `is_allow_hyphen_value_set` might be the way to go.

---

_Label `M-breaking-change` added by @epage on 2022-02-11 22:10_

---

_Referenced in [clap-rs/clap#1538](../../clap-rs/clap/issues/1538.md) on 2022-08-09 20:58_

---

_Referenced in [clap-rs/clap#4039](../../clap-rs/clap/pulls/4039.md) on 2022-08-09 21:11_

---

_Comment by @epage on 2022-08-29 17:18_

Ideally our solution makes handling more discoverable so users don't run into problems like in https://github.com/clap-rs/clap/pull/4039#event-7183896945

---

_Comment by @epage on 2022-09-06 19:44_

TrailingVarArg was added in 27018b1821a4bcd5235cfe92abe71b3c99efc24d / #301

---

_Comment by @epage on 2022-09-06 19:46_

Command::AllowLeadingHyphen was added in 26ecadd25 / #399

---

_Comment by @epage on 2022-09-06 19:55_

Arg::AllowLeadingHyphen was added in cf9d6ce5c / #755

---

_Comment by @epage on 2022-09-06 19:59_

Command::AllowNegativeNumbers was added in 9ed4d4d / #698

---

_Referenced in [clap-rs/clap#4187](../../clap-rs/clap/pulls/4187.md) on 2022-09-07 02:28_

---

_Comment by @epage on 2022-09-07 02:30_

I'm feeling fairly confident in the behavior in #4187

---

_Closed by @epage on 2022-09-07 12:39_

---
