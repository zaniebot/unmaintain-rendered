---
number: 329
title: Versionless subcommand setting does not take effect
type: issue
state: closed
author: jimmycuadra
labels:
  - C-enhancement
  - A-builder
assignees: []
created_at: 2015-10-28T22:57:31Z
updated_at: 2015-10-29T11:40:14Z
url: https://github.com/clap-rs/clap/issues/329
synced_at: 2026-01-07T12:31:16-06:00
---

# Versionless subcommand setting does not take effect

---

_Issue opened by @jimmycuadra on 2015-10-28 22:57_

`AppSetting::VersionlessSubCommands` doesn't seem to disable the `-V`/`--version` options on subcommands as the docs describe:

``` rust
extern crate clap;

use clap::{App, AppSettings, SubCommand};

fn main() {
    let matches = App::new("example")
        .setting(AppSettings::VersionlessSubcommands)
        .version(env!("CARGO_PKG_VERSION"))
        .subcommand(
            SubCommand::with_name("sub")
        )
        .get_matches();
}
```

Example executions:

```
$ prog -V
prog 0.1.0
$ prog sub -V
prog-sub
$ prog sub -h
prog-sub

USAGE:
    prog sub [FLAGS]

FLAGS:
    -h, --help       Prints help information
    -V, --version    Prints version information
```

Using clap 1.4.5 and Rust 1.3 on OS X.


---

_Comment by @kbknapp on 2015-10-29 06:53_

Ah, that's actually an oversight in logic on our behalf. It's working as designed, but the design if flawed :smile: 

`AppSettings::VersionlessSubcommands` merely disables inheriting the parent command's version number...but you're correct it should also disable the `-V, --version` flags.

Thanks! :+1: 


---

_Label `T: enhancement` added by @kbknapp on 2015-10-29 06:54_

---

_Label `C: app` added by @kbknapp on 2015-10-29 06:54_

---

_Label `D: easy` added by @kbknapp on 2015-10-29 06:54_

---

_Label `P3: want to have` added by @kbknapp on 2015-10-29 06:54_

---

_Label `W: 1.x` added by @kbknapp on 2015-10-29 06:54_

---

_Assigned to @kbknapp by @kbknapp on 2015-10-29 06:54_

---

_Added to milestone `1.4.6` by @kbknapp on 2015-10-29 06:54_

---

_Comment by @kbknapp on 2015-10-29 09:09_

#330 fixes this. Once this merges, I'll put 1.4.6 out on crates.io :wink: 


---

_Closed by @kbknapp on 2015-10-29 09:28_

---

_Comment by @kbknapp on 2015-10-29 09:41_

[v1.4.6](https://crates.io/crates/clap) is out on crates.io


---

_Comment by @jimmycuadra on 2015-10-29 10:43_

Looks like the changelog needs to be regenerated. Thanks for the fixes this week! I love clap.


---

_Comment by @kbknapp on 2015-10-29 11:40_

That's just because homu hasn't merged #331 yet, once that's done it should be updated. Thanks again for filing the bug reports! :+1:


---
