---
number: 4327
title: "[docs] No mention how to skip enum variants on the `ValueEnum` derive macro"
type: issue
state: closed
author: dnaka91
labels:
  - C-enhancement
assignees: []
created_at: 2022-10-01T14:52:47Z
updated_at: 2022-10-05T13:22:20Z
url: https://github.com/clap-rs/clap/issues/4327
synced_at: 2026-01-07T12:31:17-06:00
---

# [docs] No mention how to skip enum variants on the `ValueEnum` derive macro

---

_Issue opened by @dnaka91 on 2022-10-01 14:52_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Clap Version

4.0.7

### Describe your use case

I was looking for a way to skip a variant from an enum, when using the `ValueEnum` derive macro. Turns out there actually IS a way, but it's not mentioned anywhere in the reference in a direct way.

Simple example:
```rust
#[derive(Debug, ValueEnum)]
struct Format {
    Text,
    Json,
    #[value(skip)]
    None, // handled by another flag manually
}
```

The `hide` attribute is mentioned (somewhat), as one can check the available functions on the `PossibleValue` struct, but it's not the same as it only hides it in the docs. Only with `#[value(skip)]` it's fully omitted and becomes an impossible value to create through the CLI.

The `skip` attribute is only mentioned in a few places in the derive reference:
- In the command attributes, as part of the `Subcommand` specific attributes: https://docs.rs/clap/4.0.7/clap/_derive/index.html#command-attributes
- In the arg group attributes: https://docs.rs/clap/4.0.7/clap/_derive/index.html#arggroup-attributes
- In the arg attributes, but only for typical fields and saying that it uses `Default::default()` or the given expression, so it doesn't look applicable for enums: https://docs.rs/clap/4.0.7/clap/_derive/index.html#arggroup-attributes
- The overview talks about skipping of non-unit enum variants, but doesn't tell how: https://docs.rs/clap/4.0.7/clap/_derive/index.html#overview

### Describe the solution you'd like

There is already a `ValueEnum` section for attributes in the docs: https://docs.rs/clap/4.0.7/clap/_derive/index.html#valueenum-attributes

This one only needs an additional entry for the `skip` attribute, describing that it can be used to omit variants from the generated implementation.

### Alternatives, if applicable

_No response_

### Additional Context

_No response_

---

_Label `C-enhancement` added by @dnaka91 on 2022-10-01 14:52_

---

_Referenced in [clap-rs/clap#4328](../../clap-rs/clap/pulls/4328.md) on 2022-10-01 14:58_

---

_Closed by @epage on 2022-10-05 13:22_

---

_Referenced in [biomejs/gritql#69](../../biomejs/gritql/pulls/69.md) on 2024-03-26 16:39_

---
