---
number: 2735
title: MSRV broken in minor version
type: issue
state: closed
author: TeXitoi
labels:
  - C-bug
assignees: []
created_at: 2021-08-23T10:19:26Z
updated_at: 2021-08-23T13:47:06Z
url: https://github.com/clap-rs/clap/issues/2735
synced_at: 2026-01-07T12:31:17-06:00
---

# MSRV broken in minor version

---

_Issue opened by @TeXitoi on 2021-08-23 10:19_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the existing issues

### Rust Version

rustc 1.36.0 (a53f9df32 2019-07-03)

### Clap Version

v2.33.3

### Minimal reproducible code

```rust
fn main() {}
```


### Steps to reproduce the bug with the above code

cargo build

### Actual Behaviour

```
    Compiling clap v2.33.3

error[E0433]: failed to resolve: could not find `stringify` in `_core`
  --> /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/clap-2.33.3/src/app/settings.rs:7:1
   |
7  | / bitflags! {
8  | |     struct Flags: u64 {
9  | |         const SC_NEGATE_REQS       = 1;
10 | |         const SC_REQUIRED          = 1 << 1;
...  |
51 | |     }
52 | | }
   | |_^ could not find `stringify` in `_core`
   |
   = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)
error[E0433]: failed to resolve: could not find `stringify` in `_core`
  --> /home/travis/.cargo/registry/src/github.com-1ecc6299db9ec823/clap-2.33.3/src/args/settings.rs:6:1
   |
6  | / bitflags! {
7  | |     struct Flags: u32 {
8  | |         const REQUIRED         = 1;
9  | |         const MULTIPLE         = 1 << 1;
...  |
28 | |     }
29 | | }
   | |_^ could not find `stringify` in `_core`
   |
   = note: this error originates in a macro outside of the current crate (in Nightly builds, run with -Z external-macro-backtrace for more info)
error: aborting due to 2 previous errors
For more information about this error, try `rustc --explain E0433`.
```

### Expected Behaviour

compile succeed

### Additional Context

It was working with the 2.33.2, it breaks structopt MSRV

https://app.travis-ci.com/github/TeXitoi/structopt/jobs/532369433

Seems that the MRSV is not tested by the github ci in clap.

I don't really care, but I think that's better to at least document MSRV upgrade somewhere (the README says >=2.21: 1.24.0)

### Debug Output

_No response_

---

_Label `T: bug` added by @TeXitoi on 2021-08-23 10:19_

---

_Comment by @epage on 2021-08-23 13:24_

This is coming from the `bitflags` crate which has its own MSRV.  Having an MSRV does not mean that all dependencies are locked down to only allow the MSRV.  Overly constraining dependencies for the sake of MSRV can actually be harmful, like [what happened with nom](https://www.reddit.com/r/rust/comments/p8clcx/how_to_fix_cargo_dependency_issue/)

The best I can offer at the moment is to use `-Z minimal-versions` or for people to patch the dependency

See #2691 which had a similar issue.

---

_Comment by @TeXitoi on 2021-08-23 13:47_

Sure, thanks for the quick reply, and sorry for not finding the previous issue.

---

_Closed by @TeXitoi on 2021-08-23 13:47_

---

_Referenced in [foresterre/cargo-msrv#312](../../foresterre/cargo-msrv/issues/312.md) on 2022-02-22 15:06_

---

_Referenced in [rust-lang/cargo#9930](../../rust-lang/cargo/issues/9930.md) on 2023-03-30 12:16_

---
