---
number: 2856
title: "Port StructOpt's exhaustive derive documentation"
type: issue
state: closed
author: epage
labels:
  - A-docs
  - A-derive
assignees: []
created_at: 2021-10-12T14:29:45Z
updated_at: 2021-12-29T04:16:41Z
url: https://github.com/clap-rs/clap/issues/2856
synced_at: 2026-01-07T12:31:17-06:00
---

# Port StructOpt's exhaustive derive documentation

---

_Issue opened by @epage on 2021-10-12 14:29_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the existing issues

### Clap Version

v3.0.0-beta.4

### Where?

Unsure

### What's wrong?

This is being split out of #1661.  We do not talk about magic methods, etc.

Related is #1671

### How to fix?

Rewrite structopt's docs for clap_derive

Where is a question.  I'm assuming the bulk would go on `Parser` with the other related traits and README pointing to that.

---

_Label `C: docs` added by @epage on 2021-10-12 14:29_

---

_Label `C: derive macros` added by @epage on 2021-10-12 14:29_

---

_Added to milestone `3.0` by @epage on 2021-10-12 14:31_

---

_Referenced in [clap-rs/clap#1661](../../clap-rs/clap/issues/1661.md) on 2021-10-12 14:31_

---

_Comment by @pksunkara on 2021-10-12 14:44_

Most of the guide would be in the README of `clap_derive` which should be `#[doc(include_str)]` into the `src/lib.rs`.

---

_Comment by @epage on 2021-10-12 14:49_

I'm concerned about people discovering the docs there since most people will get `clap_derive` through `clap` and won't think about the underlying proc macro crate (I've never look at `structopt-derive`, `serde-derive`, etc).

---

_Comment by @pksunkara on 2021-10-12 15:13_

That would be okay to as long as we point clap_derive (readme & lib) to those traits.

Or the reverse, point the traits to derive macro documentation since we also point to clap_derive in clap readme and lib docs. I don't think there is an issue of discoverability.

I don't mind either way in any case.

---

_Referenced in [clap-rs/clap#2815](../../clap-rs/clap/issues/2815.md) on 2021-10-12 16:28_

---

_Referenced in [clap-rs/clap#3052](../../clap-rs/clap/pulls/3052.md) on 2021-11-26 12:10_

---

_Comment by @gibfahn on 2021-11-26 12:11_

This was the biggest issue when moving from StructOpt -> clap 3 beta -> newer clap 3 beta for me. It's really hard to know what the actual options are you can pass to the Parser, and what format they should be in.

Filed a PR for this at https://github.com/clap-rs/clap/pull/3052 , I think this is what the discussion here points to, let me know whether this approach makes sense.

---

_Referenced in [epage/clapng#214](../../epage/clapng/issues/214.md) on 2021-12-06 22:17_

---

_Comment by @epage on 2021-12-07 22:31_

Sorry, I was working in another branch and have merged that in.  Feel free to provide any feedback on it, see https://github.com/clap-rs/clap/blob/master/examples/derive_ref/README.md

---

_Closed by @epage on 2021-12-07 22:31_

---

_Comment by @SpriteOvO on 2021-12-27 06:57_

@epage Maybe it should be moved to a more visible location before releasing 3.0 stable? I didn't find this documentation before, my friend just told me it was there. TBH, I am a bit surprised that it is under the `examples` directory.

---

_Comment by @epage on 2021-12-27 15:18_

We link to the derive reference from both the README and docs.rs.  I'd be interested in better understanding why it was missed to explore how ti can be improved.  I'd recommend continuing this conversation on https://github.com/clap-rs/clap/issues/3189 which is for collecting feedback on the derive reference.

---

_Comment by @SpriteOvO on 2021-12-29 04:15_

@epage NVM, I might be sleepy that day and I can't believe I missed it twice, sorry. It looks visible enough.

---
