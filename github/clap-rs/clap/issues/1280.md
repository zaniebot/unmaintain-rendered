---
number: 1280
title: "Bug in argument parsing in zsh when `setopt EXTENDED_GLOB`"
type: issue
state: closed
author: ghost
labels: []
assignees: []
created_at: 2018-05-29T20:05:46Z
updated_at: 2018-08-02T03:30:24Z
url: https://github.com/clap-rs/clap/issues/1280
synced_at: 2026-01-07T12:31:16-06:00
---

# Bug in argument parsing in zsh when `setopt EXTENDED_GLOB`

---

_Issue opened by @ghost on 2018-05-29 20:05_

<!--
Please use the following template to assist with creating an issue and to ensure a speedy resolution. If an area is not applicable, feel free to delete the area or mark with `N/A`
-->

### Rust Version

rustc 1.26.1 (827013a31 2018-05-25)

### Affected Version of clap

2.31

### Behaviour and Steps

If you run this [gist](https://gist.github.com/yory8/530d9240c2c60c9c6b50840d81e9bd46) in *zsh* like this:

```
setop EXTENDED_GLOB && example --value ^ *
```

it should output:

```
Input: [{files in the directory from which you launch it}]
Value: "^"
```

Instead it outputs:

```
Input: [{files the directory from which you launch it}]
Value: {first file in the directory from which you launch it}
```

The caret is treated as a globbing pattern even though it's in an "option" argument, not "input" argument. Something similar happens if you use `[^\.]+` instead than the caret as value; this happens even if you `unsetopt GLOB_EXTENDED`, though.

It seems to happen because clap doesn't distinguish between values of "input" (that is, files, which might need globbing) and values of "options" (which never need globbing).

---

_Renamed from "Show bug in argument parsing in zsh when `setopt EXTENDED_GLOB`" to "Bug in argument parsing in zsh when `setopt EXTENDED_GLOB`" by @ghost on 2018-05-29 20:11_

---

_Comment by @ghost on 2018-05-29 20:13_

Note that the same happens in python's argparse.  It doesn't happen running in bash.

I'm not sure if it's considered a bug of clap or not.

---

_Comment by @ghost on 2018-05-30 07:45_

On second though, this is not clap's bug.

---

_Closed by @ghost on 2018-05-30 07:45_

---
