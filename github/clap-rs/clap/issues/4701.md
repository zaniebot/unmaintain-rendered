---
number: 4701
title: "Avoid `Arg::id` ambiguity in derive by naming it for `Type::field` instead of `field`"
type: issue
state: open
author: epage
labels:
  - C-enhancement
  - M-breaking-change
  - S-waiting-on-decision
  - A-derive
assignees: []
created_at: 2023-02-10T15:42:43Z
updated_at: 2023-02-10T15:42:43Z
url: https://github.com/clap-rs/clap/issues/4701
synced_at: 2026-01-07T12:31:17-06:00
---

# Avoid `Arg::id` ambiguity in derive by naming it for `Type::field` instead of `field`

---

_Issue opened by @epage on 2023-02-10 15:42_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Clap Version

4.1.0

### Describe your use case

In clap v4, we switched the derive's implicit `Arg::id` to be the literal field name to avoid confusion over `_` -> `-`.  This can cause ambiguities across flattens, even if the longs are made unique.

### Describe the solution you'd like

What if we qualified these fields by their type?

The biggest problem for `Arg::id` is discoverability.  For naive cases (no flattening), which is more obvious, an unqualified name or a qualified name?  For non-naive cases, I think the user could understand the use of qualified names.

### Alternatives, if applicable

Do nothing.

### Additional Context


#4699 has a related problem with variant structs in an `ArgGroup`.  Since this is new design work, we've noted in #2621 to set the `Arg::id` according to `Variant::field` which inspired this issue.

---

_Label `C-enhancement` added by @epage on 2023-02-10 15:42_

---

_Label `M-breaking-change` added by @epage on 2023-02-10 15:42_

---

_Label `S-waiting-on-decision` added by @epage on 2023-02-10 15:42_

---

_Label `A-derive` added by @epage on 2023-02-10 15:42_

---

_Referenced in [clap-rs/clap#4556](../../clap-rs/clap/issues/4556.md) on 2023-09-10 00:10_

---

_Referenced in [clap-rs/clap#5690](../../clap-rs/clap/issues/5690.md) on 2024-08-21 14:22_

---
