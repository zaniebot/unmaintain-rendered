---
number: 2739
title: "Regroup \"similar\" flags/options in the help prompt"
type: issue
state: open
author: PandH4cker
labels:
  - C-enhancement
  - A-help
  - S-waiting-on-design
assignees: []
created_at: 2021-08-26T12:49:50Z
updated_at: 2022-08-25T21:57:36Z
url: https://github.com/clap-rs/clap/issues/2739
synced_at: 2026-01-07T12:31:17-06:00
---

# Regroup "similar" flags/options in the help prompt

---

_Issue opened by @PandH4cker on 2021-08-26 12:49_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the existing issues

### Clap Version

3.0.0-beta.2

### Describe your use case

Hi everyone,

I just suggest to add a simple feature about the display of the help prompt to regroup flags/options that seem to us "similar" and to simplify the help prompt in order to reduce its length and be more compact.

The function should regroup args and be visualized: 

**Like this:**
```
--PS/PA/PU/PY <portlist>: help message
```

**Instead of:**
```
--PS <portlist> : same help message
--PA <portlist> : same help message
--PU <portlist> : same help message
--PY <portlist>  : same help message
```

### Describe the solution you'd like

It could be nice to have a **function like this**:

```rust
impl<'help> App<'help>
pub fn help_regroup<T: Key>(mut self, arg_id: T, args: &[T], help_message: &str) -> Self
```

**And be used like this:**

```rust
app
     .arg(Arg::new("PA"))
     .arg(Arg::new("PU"))
     .arg(Arg::new("PY"))
     ...
     .help_regroup("PA", &["PU", "PY"], "Unique Help Message")
```

**OUTPUT:**
```
PA/PU/PY <value_name>: unique_help_message

### Alternatives, if applicable

_No response_

### Additional Context

_No response_

---

_Label `T: new feature` added by @PandH4cker on 2021-08-26 12:49_

---

_Comment by @epage on 2021-08-26 13:40_

To help understand the use case, how are the flags different if they have the same help message?  Or is the flag name meant to be context enough to clarify, like a command dealing with semver versions have `--major`, `--minor`, --patch` flags?

---

_Comment by @PandH4cker on 2021-08-26 13:42_

I mean by the same/unique help message including "or ..." in it like: 

... : "Major or Minor or Patch.."

I'm building an app with Clap and I'm facing with this kind of "help duplicates" that could be nicer if more compact:

```
HOST DISCOVERY:
        --sL                                 List Scan - simply list targets to scan
        --sn                                 Ping Scan - disable port scan
        --Pn                                 Treat all hosts as online -- skip host discovery
        --PS <portlist>                      TCP SYN discovery to given ports
        --PA <portlist>                      TCP ACK discovery to given ports
        --PU <portlist>                      UDP discovery to given ports
        --PY <portlist>                      SCTP discovery to given ports
```

### What It Should Be:
```
HOST DISCOVERY:
        --sL                                 List Scan - simply list targets to scan
        --sn                                 Ping Scan - disable port scan
        --Pn                                 Treat all hosts as online -- skip host discovery
        --PS/PA/PU/PY <portlist>             TCP SYN/ACK, UDP and SCTP discovery to given ports
```

---

_Label `:money_with_wings: $10` added by @pksunkara on 2021-08-31 11:52_

---

_Label `C: help message` added by @pksunkara on 2021-08-31 11:52_

---

_Label `D: medium` added by @pksunkara on 2021-08-31 11:52_

---

_Label `P4: nice to have` added by @pksunkara on 2021-08-31 11:52_

---

_Referenced in [epage/clapng#203](../../epage/clapng/issues/203.md) on 2021-12-06 21:21_

---

_Label `T: new feature` removed by @epage on 2021-12-08 21:09_

---

_Label `C-enhancement` added by @epage on 2021-12-08 21:09_

---

_Comment by @epage on 2021-12-13 17:41_

Some quick thoughts: I'd probably model this after usages to reduce user confusion.  The downside is that would look like `--PS <portlist> | --PA <portlist>` etc which gets fairly verbose.

---

_Label `P4: nice to have` removed by @epage on 2021-12-13 17:41_

---

_Label `D: medium` removed by @epage on 2021-12-13 17:41_

---

_Label `:money_with_wings: $10` removed by @epage on 2021-12-13 17:41_

---

_Label `S-waiting-on-design` added by @epage on 2021-12-13 17:41_

---

_Comment by @epage on 2022-08-25 21:57_

Might not apply in the reporters case but one way of doing this in CLI11 is by having a string parsed at runtime: https://cliutils.github.io/CLI11/book/chapters/flags.html

I don't think thats the way we should go but I wanted to make note of how others solve similar problems.

---
