---
number: 1406
title: unset default value if some other Arg is present (or has a specific value)
type: issue
state: closed
author: delan
labels: []
assignees: []
created_at: 2019-01-27T06:17:46Z
updated_at: 2021-03-10T12:43:53Z
url: https://github.com/clap-rs/clap/issues/1406
synced_at: 2026-01-07T12:31:16-06:00
---

# unset default value if some other Arg is present (or has a specific value)

---

_Issue opened by @delan on 2019-01-27 06:17_

<!--
Please use the following template to assist with creating an issue and to ensure a speedy resolution. If an area is not applicable, feel free to delete the area or mark with `N/A`
-->

### Rust Version

rustc 1.32.0 (9fda7c223 2019-01-16)

### Affected Version of clap

2.32.0

### Feature Request Summary

Some way to unset the default value for an Arg based on the presence or value of some other Arg. One alternative the current API allows is to pass the empty string (or some other value that means nothing) to `Arg::default_value_if` (at the expense of additional code to treat `Some("")` like `None`):

```rust
.default_value_if("other", None, "").default_value("foo")
```

The signature Iâ€™m imagining looks something like:

```rust
fn no_default_value_if(self, arg: &'a str, val: Option<&'b str>) -> Self
```

---

_Comment by @delan on 2019-01-27 07:39_

@Moongoodboy-K suggests `default_value_unless` over `no_default_value_if`

---

_Label `C: args` added by @CreepySkeleton on 2020-02-01 15:12_

---

_Label `C: options` added by @CreepySkeleton on 2020-02-01 15:12_

---

_Label `D: intermediate` added by @CreepySkeleton on 2020-02-01 15:12_

---

_Label `P4: nice to have` added by @CreepySkeleton on 2020-02-01 15:12_

---

_Label `T: new feature` added by @CreepySkeleton on 2020-02-01 15:12_

---

_Added to milestone `3.1` by @pksunkara on 2020-04-09 07:43_

---

_Comment by @patrickelectric on 2020-05-21 15:12_

That's a really important feature! 

---

_Comment by @stevenengler on 2021-01-02 21:09_

Instead of creating a new method, could the signature of `default_value_if()` be changed in version 3 to support an `Option<&str>` for the default rather than just a `&str`? This way the default can be unset without needing to add more functions to the API.

---

_Removed from milestone `3.1` by @pksunkara on 2021-01-03 08:23_

---

_Added to milestone `3.0` by @pksunkara on 2021-01-03 08:23_

---

_Comment by @delan on 2021-01-04 13:33_

> Instead of creating a new method, could the signature of `default_value_if()` be changed in version 3 to support an `Option<&str>` for the default rather than just a `&str`?

Good idea (fwiw). The parameter type could even change without adding to the version 3 migration burden with `impl Into<Option<&str>>`, which allows you to continue passing `&str` values without wrapping them in `Some`.

---

_Referenced in [clap-rs/clap#2296](../../clap-rs/clap/pulls/2296.md) on 2021-01-17 07:40_

---

_Comment by @pksunkara on 2021-02-28 12:35_

@logansquirel And then you can take this.

---

_Referenced in [clap-rs/clap#2400](../../clap-rs/clap/pulls/2400.md) on 2021-03-09 18:40_

---

_Closed by @pksunkara on 2021-03-10 12:43_

---

_Referenced in [solana-labs/solana-program-library#4511](../../solana-labs/solana-program-library/issues/4511.md) on 2023-06-08 23:33_

---
