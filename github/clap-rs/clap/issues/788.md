---
number: 788
title: Cant use hyphens within arguments
type: issue
state: closed
author: patrickisgreene
labels: []
assignees: []
created_at: 2016-12-28T07:23:21Z
updated_at: 2018-08-02T03:29:58Z
url: https://github.com/clap-rs/clap/issues/788
synced_at: 2026-01-07T12:31:16-06:00
---

# Cant use hyphens within arguments

---

_Issue opened by @patrickisgreene on 2016-12-28 07:23_

First, Thank you so much for saving me many hours of writing boilerplate :)

### Rust Version

rustc 1.15.0-nightly (71c06a56a 2016-12-18)

### Affected Version of clap

* 2.19.2
### Problem
 When parsing an argument that takes a Quoted string, 
clap parse's the "arguments" in the string as flags meant for clap, exiting due to unknown flags.

### Usecase
My program needs to take an argument like this,
`-other_prog_args "--list --of --args --to --pass -on"`
and pass the args to another progam.


---

_Renamed from "Feature" to "Bug: cant use hyphens within arguments" by @patrickisgreene on 2016-12-28 07:25_

---

_Comment by @kbknapp on 2016-12-28 14:32_

I think this may have to do with how your shell treats quotes. Which shell are you using?

Also, for your use case there is [`Arg::allow_hyphen_values`](https://docs.rs/clap/2.19.2/clap/struct.Arg.html#method.allow_hyphen_values)

So you may be able to get away with doing something like:

```rust
let m = App::new("prog")
    .arg(Arg::from_usage("--other_prog_args [ARGS]... 'Args to pass on to other program'")
        .allow_hyphen_values(true))
    .get_matches()
```

Then calling this should work:

```
$ prog --other_prog_args --list --of --args --to --pass -on
```

Where `--other_prog_args` would then just contain the values `["--list", "--of", "--args", "--to", "--pass", "-on"]`

---

_Label `T: RFC / question` added by @kbknapp on 2016-12-28 14:33_

---

_Comment by @patrickisgreene on 2016-12-28 19:52_

I'm just using bash btw.

Well now i just feel silly for not thinking to searching the docs for hyphen thanks
However i would like to be able to call it so the order of the arguments doesn't matter.
so this:
`prog --arg --second-prog-args "--sec --program --args" --more --first --prog --args`
and this:
`prog --first --prog --args --second-prog-args "--sec --program --args"`

I believe your solution would eat the remaining args correct? 

---

_Comment by @kbknapp on 2016-12-28 20:10_

> I believe your solution would eat the remaining args correct?

Not if `--more` is a valid `prog` flag. It stops parsing once it reaches a valid `prog` arg. The only time it *can't* make that determination is if it's a positional argument. In which case it's up to your CLI design, i.e. either not have any positionals arguments, or inform users to provide them after a `--` such as

```
$ prog --first --prog --args --second-prog-args --sec --program --args -- progpos1 progpos2
```

---

_Comment by @patrickisgreene on 2016-12-28 20:32_

Ok that makes since the only problem i see now is the second program [feh](https://linux.die.net/man/1/feh) takes like a million possible arguments (some positional) and I need to be able to pass any possible arg.

There's already a lot of overlap between args my program needs and feh's args.
Looking at the manpage almost all 'short' (one letter) arg names are taken.

 I would have to change my args to have less descriptive names, or no 'short' name for args, in order to not overlap with feh's arguments. I'm not to keen on that idea, but i very well could be missing an obvious solution.

---

_Renamed from "Bug: cant use hyphens within arguments" to "Cant use hyphens within arguments" by @patrickisgreene on 2016-12-28 21:14_

---

_Comment by @kbknapp on 2016-12-28 22:51_

At that point I would recommend [`AppSettings::TrailingVarArg`](https://docs.rs/clap/2.19.3/clap/enum.AppSettings.html#variant.TrailingVarArg) which would require those commands to be stored in the final positional argument of your program

```
$ prog [OPTIONS] <cmd>...
```
Where it would be used like,

```
$ prog --your-arg -s -a cmd --starts here -a -n -d --passes --through-to other --program
```

This would also allow you have positional arguments and such for your own program. Any overlap between your program and `feh` is fine.

If your program is open source, and you already know what arguments you want to support, I'd happy to take a look and see if there are any concerns or tips you could use :wink:

---

_Comment by @patrickisgreene on 2016-12-29 02:51_

Thanks that would definitely work well, I'll go for it.

The project is opensource though unlicensed atm, it is still very early stages. https://github.com/bytebuddha/mookaite

I would really appreaciate you taking a look, I'm relitivily new to programming (2years) so any concerns, tips, or advice would be usefull.

---

_Comment by @kbknapp on 2016-12-29 03:38_

It looks good! You have a few options for your [`feh_args`](https://github.com/bytebuddha/mookaite/blob/470a2edc58cfc6942ddddbe13d648560e30cc2ef/src/main.rs#L66-L72), but what I would do is simply use the `TrailingVarArg` and potentially even change the [usage string](https://docs.rs/clap/2.19.3/clap/struct.App.html#method.usage) to tell users to pass all `feh` args after `--`.

It would look like:

```rust
let matches = // build app like normal
    .usage("mookaite [OPTIONS] -- <FEH_ARGS>")
   .setting(AppSettings::TrailingVarArg)
   .arg(Arg::with_name("feh_args")
        .allow_hyphen_values(true)
        .help("Any optional arguments to pass through to feh")
        .multiple(true))
    .get_matches();
```

Changing the usage string isn't mandatory, but it helps tell your users, "separate the feh args from mookaite args". There are downsides to setting the usage string manually though, so do it with caution. The downside is if your user makes an error, clap no longer builds a context sensitive usage string to tell them how to correct the error, it just uses the manual one regardless. So it's up to you which you'd like to use. Personally, I'd stick with the default usage string and perhaps mention "--" in the `feh_args` help string.

Also, the `TrailingVarArgs` isn't mandatory either, but what it does is give your users flexibilty

```
$ prog --your-arg --other-arg -- --feh arg -h -e -r -e

# is the same as:

$ prog  --your-arg --other-arg --feh arg -h -e -r -e
```
So long as the user doesn't start the `feh` args with one that you and `feh` share.

Finally, the `allow_hyphen_values` lets you accept `--feh-args` style values without having to use the `--` to separate your args, and feh's. Again, it's optional, but I'd throw it in there.

I'm going to close this issue, but please feel free to ask any futher questions or hit me up either here on in the gitter room if you need anything! :smile:

---

_Closed by @kbknapp on 2016-12-29 03:38_

---
