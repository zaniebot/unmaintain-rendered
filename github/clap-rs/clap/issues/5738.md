---
number: 5738
title: The command name should default to CARGO_BIN_NAME
type: issue
state: open
author: ia0
labels:
  - C-enhancement
  - M-breaking-change
  - S-waiting-on-decision
  - A-derive
assignees: []
created_at: 2024-09-20T09:00:21Z
updated_at: 2024-09-20T17:27:03Z
url: https://github.com/clap-rs/clap/issues/5738
synced_at: 2026-01-07T12:31:17-06:00
---

# The command name should default to CARGO_BIN_NAME

---

_Issue opened by @ia0 on 2024-09-20 09:00_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Clap Version

4.5.9

### Describe your use case

I want the default `-V / --version` to use the binary name instead of the package name, because this is the name users are familiar with. This situation happens when a project has both a library and a CLI. The CLI usually provides a binary with a different name than the package.

The documentation says that the magic command attribute `name` defaults to the package name on `Parser`. I wonder if this was decided before `CARGO_BIN_NAME` was a thing, or if it's just an oversight, or if there is a good reason to do so.

### Describe the solution you'd like

I'd like the default name to be `CARGO_BIN_NAME` instead of `CARGO_PKG_NAME`.

### Alternatives, if applicable

The obvious workaround is to specify a command name. This is completely fine, but the default is in my opinion wrong, so I'm creating an issue to understand the rationale.

### Additional Context

_No response_

---

_Label `C-enhancement` added by @ia0 on 2024-09-20 09:00_

---

_Referenced in [google/magika#704](../../google/magika/pulls/704.md) on 2024-09-20 09:02_

---

_Label `M-breaking-change` added by @epage on 2024-09-20 14:26_

---

_Label `A-derive` added by @epage on 2024-09-20 14:26_

---

_Label `S-waiting-on-decision` added by @epage on 2024-09-20 14:26_

---

_Added to milestone `5.0` by @epage on 2024-09-20 14:26_

---

_Comment by @epage on 2024-09-20 14:27_

Note that this would be a breaking change and wouild have to wait until clap v5, at least.

It would be good to sample various clap projects to see how `package.name` and `bin.name` might vary between them to see if there would be any unintended affect.

---

_Comment by @ia0 on 2024-09-20 14:52_

> Note that this would be a breaking change and wouild have to wait until clap v5, at least.

Yes, makes sense.

> It would be good to sample various clap projects to see how `package.name` and `bin.name` might vary between them to see if there would be any unintended affect.

Yes, I'm also curious. I quickly looked at the top 20 reverse dependencies of clap and used the new "Install" feature of crates.io to identify those with a binary and the name of the binary too:

| package | binary | notes |
| --- | --- | --- |
| `addr2line` | `addr2line` | |
| `remove_dir_all` | `remove-dir-all` | for some reason, `--version` shows the binary name |
| `cbindgen` | `cbindgen` | |
| `raw-cpuid` | `cpuid` | affected by this issue, see https://github.com/gz/rust-cpuid/issues/189 |
| `dotenvy` | `dotenvy` | |
| `dotenv` | `dotenv` | |

So it seems to not affect that many crates on such a small sample.

---

_Referenced in [gz/rust-cpuid#189](../../gz/rust-cpuid/issues/189.md) on 2024-09-20 17:26_

---
