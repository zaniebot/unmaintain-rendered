---
number: 3086
title: Deprecate runtime usage parser
type: issue
state: closed
author: epage
labels: []
assignees: []
created_at: 2021-12-08T16:56:07Z
updated_at: 2021-12-08T17:10:00Z
url: https://github.com/clap-rs/clap/issues/3086
synced_at: 2026-01-07T12:31:17-06:00
---

# Deprecate runtime usage parser

---

_Issue opened by @epage on 2021-12-08 16:56_

The runtime usage parser adds extra code (complexity / compile time), defers errors to runtime, and the syntax is driven by the parser implementation, leading to some odd behavior.

We should replace it with a subset of the `clap_app` macro so users still get a usage parser but the cost is opt-in and errors are at compile time.

---

_Added to milestone `3.0` by @epage on 2021-12-08 16:56_

---

_Comment by @epage on 2021-12-08 16:56_

Deprecated in 3c3a0b71d1314c5f10bcca6d5052e9deb8203a5b

---

_Closed by @epage on 2021-12-08 16:56_

---

_Comment by @epage on 2021-12-08 17:08_

If users want to fork this into its own crate to support it, some relevant commits
- 7604b1ed4a93d4292b809d0b850ecb5aa01538b5
- 77b1adc950bcb1cf6b5372c5d2af671e7cc9e27e
- 88fff13e715507391e836e124f66ce78fd9be2f3

---

_Comment by @epage on 2021-12-08 17:10_

For an example of porting from `Arg::from_usage` to `arg!`, see https://github.com/clap-rs/clap/commit/4c4a2b86a08ef9e2d63010aab4909dd5a013dfb0

---

_Referenced in [clap-rs/clap#2951](../../clap-rs/clap/issues/2951.md) on 2021-12-08 18:04_

---

_Referenced in [graphprotocol/graph-node#3520](../../graphprotocol/graph-node/pulls/3520.md) on 2022-05-05 20:03_

---
