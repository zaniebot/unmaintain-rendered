---
number: 896
title: "Arg::last should allow preceding argument to be Arg::multiple(true)"
type: issue
state: closed
author: nagisa
labels:
  - C-bug
assignees: []
created_at: 2017-03-12T10:31:34Z
updated_at: 2018-08-02T03:30:03Z
url: https://github.com/clap-rs/clap/issues/896
synced_at: 2026-01-07T12:31:16-06:00
---

# Arg::last should allow preceding argument to be Arg::multiple(true)

---

_Issue opened by @nagisa on 2017-03-12 10:31_

In current master a `Arg::last(true)` is available which makes a positional argument of the form:

```
[-- <ARG>...]
```

possible. This argument is required to have the leading dash-dash before it can be parsed. This means that essentially any other positional argument should be possible before the dash-dash, including another `Arg::multiple(true)` argument, however currently `clap` panics:

```
thread 'main' panicked at 'When using a positional argument with .multiple(true) that is *not the last* positional argument, the last positional argument (i.e the one with the highest index) *must* have .required(true) or .last(true) set.', /home/nagisa/.cargo/git/checkouts/clap-rs-507f2c09c9b0886e/814b126/src/app/parser.rs:459
```

for code like this:

```
            .arg(Arg::with_name("CORPUS").multiple(true))
            .arg(Arg::with_name("ARGS").multiple(true).last(true))
```

---

_Comment by @kbknapp on 2017-03-12 15:46_

good catch! I'll have it fixed momentarily!

---

_Label `C: args` added by @kbknapp on 2017-03-12 17:03_

---

_Label `D: easy` added by @kbknapp on 2017-03-12 17:03_

---

_Label `P1: urgent` added by @kbknapp on 2017-03-12 17:03_

---

_Label `T: bug` added by @kbknapp on 2017-03-12 17:03_

---

_Label `W: 2.x` added by @kbknapp on 2017-03-12 17:03_

---

_Closed by @homu on 2017-03-12 18:17_

---

_Comment by @kbknapp on 2017-03-12 18:23_

This is fixed in 2.21.1 on crates.io

---
