---
number: 3500
title: Add builder / derive interop examples
type: issue
state: closed
author: epage
labels:
  - C-bug
  - A-docs
  - E-help-wanted
  - E-easy
  - ":money_with_wings: $10"
assignees: []
created_at: 2022-02-23T00:15:24Z
updated_at: 2022-03-07T20:43:52Z
url: https://github.com/clap-rs/clap/issues/3500
synced_at: 2026-01-07T12:31:17-06:00
---

# Add builder / derive interop examples

---

_Issue opened by @epage on 2022-02-23 00:15_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Clap Version

3.1.0

### Describe your use case

Users should be able to mix and match builder and derive.

### Describe the solution you'd like

Examples (in `examples/`) that demonstrate
- A `Command` using arguments from an `Args`
- A `Command` using subcommands from a `Subcommand`
- A `Parser` using subcommands from a manually implemented `Subcommand`
- A `Parser` using args from a manually implemented `Args`

### Alternatives, if applicable

_No response_

### Additional Context

_No response_

---

_Label `C-bug` added by @epage on 2022-02-23 00:15_

---

_Label `A-docs` added by @epage on 2022-02-23 00:15_

---

_Label `E-help-wanted` added by @epage on 2022-02-23 00:15_

---

_Label `E-easy` added by @epage on 2022-02-23 00:15_

---

_Label `:money_with_wings: $10` added by @epage on 2022-02-23 00:15_

---

_Comment by @mattfbacon on 2022-02-26 17:35_

I'd like to work on this.

---

_Comment by @mattfbacon on 2022-02-26 17:52_

To clarify, in the examples you wanted, did you mean:

1. Derived `Command` with built `Arg`s
2. Derived `Command` with built `Subcommand`s
3. ??
4. ??

---

_Comment by @epage on 2022-02-26 17:58_

> I'd like to work on this.

Great!

> To clarify, in the examples you wanted, did you mean:

1. `Command::new` that gets passed into a a derived `Args::augment_args`
2. `Command::new` that gets passed into into a derived `Subcommand::augment::subcommands`
3. A derived `Parser` that uses a `#[clap(subcommand)]` on a hand-implemented `Subcommand`
4. A derived `Parser` that uses a `#[clap(flatten)]` on a hand-implemented `Args`

---

_Comment by @mattfbacon on 2022-02-26 18:00_

Sounds good. I was also thinking of adding a derived CLI (deriving `Parser`) that uses `CommandFactory::command` to convert to the builder API, at which point arguments or subcommands could be added.

---

_Comment by @epage on 2022-02-26 18:03_

Personally, I'd prefer not to have an example like that because it has a weird composition story,  With the examples I gave above, there is symmetry in the definition and in the reading but with a modified `command()`, that symmetry is lost.

---

_Comment by @mattfbacon on 2022-02-26 18:03_

OK

---

_Referenced in [clap-rs/clap#3515](../../clap-rs/clap/pulls/3515.md) on 2022-02-26 18:52_

---

_Comment by @mattfbacon on 2022-02-26 18:53_

#3515 

---

_Closed by @epage on 2022-03-07 20:43_

---
