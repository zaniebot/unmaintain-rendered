---
number: 5770
title: Custom help for subcommands
type: issue
state: open
author: htngr
labels:
  - C-enhancement
assignees: []
created_at: 2024-10-08T12:05:45Z
updated_at: 2024-10-08T12:05:45Z
url: https://github.com/clap-rs/clap/issues/5770
synced_at: 2026-01-07T12:31:17-06:00
---

# Custom help for subcommands

---

_Issue opened by @htngr on 2024-10-08 12:05_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Clap Version

4.5.19

### Describe your use case

I'm currently trying to implement <https://github.com/Canop/clap-help/issues/1> (showing a custom help message for subcommands). Without subcommands I can catch if `--help` was requested (`Parser::try_parse` and `ErrorKind::DisplayHelp`). But with subcommands, I couldn't find a way (without manually reparsing the arguments) to check if help for a subcommand was issued.

Did I miss something?

### Describe the solution you'd like

A solution might be to attach the current `clap::Command` to the `clap_builder::error::Error`.

Manually adding help flags is tedious and doesn't work if there are required arguments:

```rust
#[derive(Parser, Debug)]
#[command(
    name = "subcommand",
    author,
    version,
    about,
    disable_help_subcommand = true,
    disable_help_flag = true
)]
struct Args {
    /// Print help
    #[arg(long)]
    help: bool,

    /// A subcommand
    #[command(subcommand)]
    pub command: Option<Subcmd>,
}

#[derive(Subcommand, Clone, Debug)]
enum Subcmd {
    /// Some info for A
    #[clap(disable_help_flag = true)]
    A {
        /// Print help
        #[arg(long)]
        help: bool,
    },
    
    /// Some info for B
    #[clap(disable_help_flag = true)]
    B {
        /// Print help
        #[arg(long)]
        help: bool,

        /// An arg
        x: u8,
    },
}
```

For example, this does not work:
```bash
> cargo run -- -- b --help
error: the following required arguments were not provided:
  <X>

Usage: subcommands b --help <X>
```

### Alternatives, if applicable

_No response_

### Additional Context

_No response_

---

_Label `C-enhancement` added by @htngr on 2024-10-08 12:05_

---

_Referenced in [clap-rs/clap#5815](../../clap-rs/clap/issues/5815.md) on 2024-11-13 22:23_

---
