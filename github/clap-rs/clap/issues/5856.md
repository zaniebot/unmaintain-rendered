---
number: 5856
title: "zsh dynamic completions report `not enough arguments`"
type: issue
state: open
author: Eh2406
labels:
  - C-bug
  - E-medium
  - A-completion
assignees: []
created_at: 2024-12-23T17:38:20Z
updated_at: 2025-02-18T21:05:18Z
url: https://github.com/clap-rs/clap/issues/5856
synced_at: 2026-01-07T12:31:17-06:00
---

# zsh dynamic completions report `not enough arguments`

---

_Issue opened by @Eh2406 on 2024-12-23 17:38_

### Please complete the following tasks

- [ ] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [ ] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Rust Version

rustc 1.83.0 (90b35a623 2024-11-26)

### Clap Version

4.5.20

### Minimal reproducible code

check out https://github.com/pubgrub-rs/semver-pubgrub. Given the weird set up I have in this repository in error might be the correct response. I do not have an examples in the examples folder, I have a whole separate project.


### Steps to reproduce the bug with the above code

In zsh Try to completing `cargo r --example=`

### Actual Behaviour

I get 
```
_values:compvalues:11: not enough arguments
_values:compvalues:11: not enough arguments
_values:compvalues:11: not enough arguments
_values:compvalues:11: not enough arguments
```
and my terminal moves on to the next line.

### Expected Behaviour

an error, or no suggestion, or ü§∑‚Äç‚ôÇÔ∏è 

### Additional Context

Ed asked me to move this bug here. I did not follow all instructions for bug reports to this repo, sorry.

### Debug Output

_No response_

---

_Label `C-bug` added by @Eh2406 on 2024-12-23 17:38_

---

_Label `E-medium` added by @epage on 2024-12-24 01:29_

---

_Label `A-completion` added by @epage on 2024-12-24 01:29_

---

_Referenced in [clap-rs/clap#5857](../../clap-rs/clap/pulls/5857.md) on 2024-12-24 01:55_

---

_Comment by @epage on 2024-12-24 01:57_

Hmm, tried to create a test case for this but couldn't reproduce it (#5857).  This might require digging into manually.

For completeness, what is your version of zsh?  Are you using any other addons like omg-zsh or whatever its called?

---

_Comment by @Eh2406 on 2024-12-24 22:02_

```
% zsh --version 
zsh 5.8.1 (x86_64-koji-linux-gnu)
```
and I do not have a `plugins` section in my `.zshrc` file.
Happy to hop on a call to figure out what's weird about my system.

---

_Renamed from "odd issue when using completions" to "zsh dynamic completions report `not enough arguments`" by @epage on 2025-02-13 15:37_

---

_Comment by @epage on 2025-02-18 21:01_

I cloned semver-pubgrub and ran `cargo r --example=[TAB]` and got back no responses

```console
$ zsh --version
zsh 5.8.1 (x86_64-ubuntu-linux-gnu)
```

My zsh was generated from a system default
```
# Set up the prompt

autoload -Uz promptinit
promptinit
prompt adam1

setopt histignorealldups sharehistory

# Use emacs keybindings even if our EDITOR is set to vi
bindkey -e

# Keep 1000 lines of history within the shell and save it to ~/.zsh_history:
HISTSIZE=1000
SAVEHIST=1000
HISTFILE=~/.zsh_history

# Use modern completion system
autoload -Uz compinit
compinit

zstyle ':completion:*' auto-description 'specify: %d'
zstyle ':completion:*' completer _expand _complete _correct _approximate
zstyle ':completion:*' format 'Completing %d'
zstyle ':completion:*' group-name ''
zstyle ':completion:*' menu select=2
eval "$(dircolors -b)"
zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}
zstyle ':completion:*' list-colors ''
zstyle ':completion:*' list-prompt %SAt %p: Hit TAB for more, or the character to insert%s
zstyle ':completion:*' matcher-list '' 'm:{a-z}={A-Z}' 'm:{a-zA-Z}={A-Za-z}' 'r:|[._-]=* r:|=* l:|=*'
zstyle ':completion:*' menu select=long
zstyle ':completion:*' select-prompt %SScrolling active: current selection at %p%s
zstyle ':completion:*' use-compctl false
zstyle ':completion:*' verbose true

zstyle ':completion:*:*:kill:*:processes' list-colors '=(#b) #([0-9]#)*=0=01;31'
zstyle ':completion:*:kill:*' command 'ps -u $USER -o pid,%cpu,tty,cputime,cmd'
```

---

_Comment by @epage on 2025-02-18 21:05_

btw `cargo r [TAB]` won't work atm because we've not yet implemented support for built-in aliases to be completed, let along completing arguments passed to them.

Granted, the message still shouldn't show up.

---
