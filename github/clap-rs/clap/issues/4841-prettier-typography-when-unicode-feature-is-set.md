---
number: 4841
title: "Prettier typography when `unicode` feature is set?"
type: issue
state: open
author: virtualritz
labels:
  - C-enhancement
  - S-waiting-on-decision
  - A-help
assignees: []
created_at: 2023-04-17T17:52:40Z
updated_at: 2023-04-17T18:57:37Z
url: https://github.com/clap-rs/clap/issues/4841
synced_at: 2026-01-07T13:12:20-06:00
---

# Prettier typography when `unicode` feature is set?

---

_Issue opened by @virtualritz on 2023-04-17 17:52_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Clap Version

4.2

### Describe your use case

A typical example is the ellipsis for arguments that can be specified multiple times or quotes in help texts.

Consider this:

```
Options:
  -v, --verbose...  Verbosity level ('-v', '-vv', '-vvv', etc.)
  -h, --help        Print help (see more with '--help')
```

vs.:

```
Options:
  -v, --verbose…  Verbosity level (‘-v’, ‘-vv’, ‘-vvv’, etc.)
  -h, --help      Print help (see more with ‘--help’)
```

### Describe the solution you'd like

I'm interested in working on this if it had a chance for a PR to be accepted.

I would probably add another feature flag, `typography` that depends on `unicode` so users are not forced to use this just because they have the latter switched on.


---

_Label `C-enhancement` added by @virtualritz on 2023-04-17 17:52_

---

_Comment by @epage on 2023-04-17 18:11_

Personally, I've never had a good experience with paired quotes or smart quotes...

I see this not just a question of whether this is enabled in a feature flag but whether the terminal supports it.  There are crates like https://crates.io/crates/supports-unicode to help with that.

Probably my biggest concern is that there are so few places that this is relevant that the benefits would not outweigh the costs (code complexity, build times, binary size).  Yes, some of those can be toggled with feature flags but those have their own complexity and I try to keep the number of feature flags down (we already have more than I'd like)

---

_Label `S-waiting-on-decision` added by @epage on 2023-04-17 18:11_

---

_Label `A-help` added by @epage on 2023-04-17 18:11_

---

_Comment by @virtualritz on 2023-04-17 18:46_

I'm not sure what 'good experience' means here. For example, `docs.rs` does smart quotes and dashes (`--` becomes an en-dash etc.) via some [Smartypants](https://daringfireball.net/projects/smartypants/)-like implementation. And this is not opt-in, afaik.

But I wasn't talking about this. I was solelty talking about the parts of help text that are generated by/built-into `clap`.
I was not talking about a custom Smartypants-like implementation that swaps stuff out at runtime (or compile time, via a macro) in user help strings.

I.e. in the above case, the `--help` text and the ellipsis on `--verbose` are from `clap` but the user would be responsible to use matching quotes in their text for the `--verbose` flag. And I think this is acceptable as someone who cares about `unicode` stuff in their help would likely go the extra mile for the same reason they need this feature in the first place: to have stuff look neater/more polished.

So all this would be for now would be some string constants looking different when a feature flag is set. I.e. binary size/code complexity would be the same.

I do see your point with feature flag creep though.




---

_Comment by @virtualritz on 2023-04-17 18:50_

> I see this not just a question of whether this is enabled in a feature flag but whether the terminal supports it. 

Do I understand this correctly that `clap` already filters user strings for unicode codepoints outside ASCII and replaces them when `unicode` is set and it detects a terminal that doesn't support it? With what are they replaced?

---

_Comment by @epage on 2023-04-17 18:57_

`clap` only does filtering for ANSI escape codes.

The `unicode` feature is for things like
- calculating how many columns some help text takes up so we know when to wrap.  
- case insensitive comparisons

---
