---
number: 4053
title: "Syntax error when attempt ZSH completion for `ValueEnum` variants"
type: issue
state: open
author: KSXGitHub
labels:
  - C-bug
  - A-completion
  - E-easy
assignees: []
created_at: 2022-08-10T07:42:34Z
updated_at: 2022-08-10T13:47:58Z
url: https://github.com/clap-rs/clap/issues/4053
synced_at: 2026-01-07T13:12:20-06:00
---

# Syntax error when attempt ZSH completion for `ValueEnum` variants

---

_Issue opened by @KSXGitHub on 2022-08-10 07:42_

### Notes

This bug is very specific to my application that I haven't managed to create a minimal reproducible code yet. So instead, I'll be providing links to my application.

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Rust Version

1.62.1

### Clap Version

3.2.16

### Minimal reproducible code

N/A

### Steps to reproduce

1. Create an executable at `/usr/bin/pdu`. Or alternatively, install [`pdu`](https://github.com/KSXGitHub/parallel-disk-usage).
2. Download and install [the zsh completions for pdu](https://github.com/KSXGitHub/parallel-disk-usage/blob/master/exports/completion.zsh) at `/usr/share/zsh/site-functions/_pdu` (this file was generated by [`./generate-completion.sh`](https://github.com/KSXGitHub/parallel-disk-usage/blob/master/generate-completions.sh)).
3. Open ZSH login shell, type `pdu --bytes-format=` and then press <kbd>Tab</kbd>.

### Actual Behaviour

The following error appears:

```txt
(eval):2: unmatched "
_arguments:465: command not found: (
(eval):2: unmatched "
_arguments:465: command not found: (
(eval):2: unmatched "
_arguments:465: command not found: (
```

### Expected Behaviour

A completion menu of `plain`, `metric`, and `binary` should appear to let user choose.

### Additional Context

* ZSH version: 5.9
* OS: Arch Linux
* The `Args` struct: https://github.com/KSXGitHub/parallel-disk-usage/blob/0.8.2/src/args.rs
* The completion generator: https://github.com/KSXGitHub/parallel-disk-usage/blob/0.8.2/cli/completions.rs

If you have an Arch Linux machine, you can also install [the AUR package](https://aur.archlinux.org/packages/parallel-disk-usage) ([bin version](https://aur.archlinux.org/packages/parallel-disk-usage-bin)).

### Debug Output

_No response_

---

_Label `C-bug` added by @KSXGitHub on 2022-08-10 07:42_

---

_Label `A-completion` added by @epage on 2022-08-10 13:47_

---

_Label `E-easy` added by @epage on 2022-08-10 13:47_

---
