---
number: 4818
title: clap_mangen does not write the arg information in the subcommand
type: issue
state: closed
author: eatradish
labels:
  - C-bug
assignees: []
created_at: 2023-04-01T07:22:32Z
updated_at: 2023-04-05T14:56:09Z
url: https://github.com/clap-rs/clap/issues/4818
synced_at: 2026-01-07T12:31:17-06:00
---

# clap_mangen does not write the arg information in the subcommand

---

_Issue opened by @eatradish on 2023-04-01 07:22_

### Please complete the following tasks

- [X] I have searched the [discussions](https://github.com/clap-rs/clap/discussions)
- [X] I have searched the [open](https://github.com/clap-rs/clap/issues) and [rejected](https://github.com/clap-rs/clap/issues?q=is%3Aissue+label%3AS-wont-fix+is%3Aclosed) issues

### Rust Version

rustc 1.68.2 (9eb3afe9e 2023-03-27)

### Clap Version

clap 4.2.1

### Minimal reproducible code

```rust
fn main() -> std::io::Result<()> {
    let cmd = command_builder();

    let man = clap_mangen::Man::new(cmd);
    let mut buffer: Vec<u8> = Default::default();
    man.render(&mut buffer)?;

    let man_dir = std::path::PathBuf::from(
        std::env::var_os("CARGO_MANIFEST_DIR").ok_or(std::io::ErrorKind::NotFound)?,
    )
    .join("man");

    if !man_dir.is_dir() {
        std::fs::create_dir_all(&man_dir)?;
    }

    std::fs::write(man_dir.join("oma.1"), buffer)?;

    Ok(())
}

fn command_builder() {
command!()
        .subcommand(
            Command::new("install")
                .about("Install Package")
                .arg(&pkgs)
                .arg(
                    Arg::new("install_dbg")
                        .alias("dbg")
                        .long("install-dbg")
                        .help("Install package(s) debug symbol")
                        .requires("packages")
                        .action(ArgAction::SetTrue)
                )
                .arg(
                    Arg::new("reinstall")
                        .long("reinstall")
                        .help("Reinstall package(s)")
                        .requires("packages")
                        .action(ArgAction::SetTrue),
                )
        )
}
```


### Steps to reproduce the bug with the above code

1. `cargo build --release`
2. Check SRCDIR/man/oma.1 file
3. See result, like:

```
...
SUBCOMMANDS
       oma-install(1)
              Install Package

       oma-upgrade(1)
              Update Package

...
```

Does not have argument help information.

### Actual Behaviour

No information is written to the argment in the subcommand

### Expected Behaviour

written to the argment in the subcommand

### Additional Context

_No response_

### Debug Output

_No response_

---

_Label `C-bug` added by @eatradish on 2023-04-01 07:22_

---

_Renamed from "clap_mangen does not write the parameter information in the subcommand" to "clap_mangen does not write the arg information in the subcommand" by @eatradish on 2023-04-01 07:22_

---

_Comment by @epage on 2023-04-03 20:18_

> No information is written to the argment in the subcommand

What do you mean by "argument help information"?

Are you expecting the one manpage to service all subcommands?  Currently, we only support generating man pages for the model where the is one man page per subcommand.

See also
- #3365
- #1334

---

_Comment by @eatradish on 2023-04-05 14:56_

Looks like your advice solved my problem, thanks!

---

_Closed by @eatradish on 2023-04-05 14:56_

---
