---
number: 9666
title: Noticeable lag with uv-created virtual environments during first interpreter session
type: issue
state: closed
author: ketozhang
labels:
  - question
assignees: []
created_at: 2024-12-06T01:48:18Z
updated_at: 2024-12-06T19:21:39Z
url: https://github.com/astral-sh/uv/issues/9666
synced_at: 2026-01-07T12:31:15-06:00
---

# Noticeable lag with uv-created virtual environments during first interpreter session

---

_Issue opened by @ketozhang on 2024-12-06 01:48_

Using uv for quite a while, I've been noticing a significant lag that only happens the first time you run the interpreter after creating the virtual environment with uv. This lag is more apparent with larger environments. I do not find this as noticeable in venv-created virtual environments.

Here I have a small benchmark (sorry it's not very robust) that shows this.

```console
❯ uv venv && uv pip install pandas && time .venv/bin/python -c "import pandas"
...
.venv/bin/python -c "import pandas"  1.65s user 0.39s system 10% cpu 19.765 total
```

```console
❯ python3.13 -m venv .venv && .venv/bin/python3.13 -m pip install pandas && time .venv/bin/python -c "import pandas"
...
.venv/bin/python -c "import pandas"  0.39s user 0.10s system 2% cpu 16.609 total
```

<details><summary>Full log</summary>
<p>

```console
❯ uv venv && uv pip install pandas && time .venv/bin/python -c "import pandas"
Using CPython 3.13.0 interpreter at: /usr/local/opt/python@3.13/bin/python3.13
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
Resolved 6 packages in 11ms
Installed 6 packages in 93ms
 + numpy==2.1.3
 + pandas==2.2.3
 + python-dateutil==2.9.0.post0
 + pytz==2024.2
 + six==1.17.0
 + tzdata==2024.2
.venv/bin/python -c "import pandas"  1.65s user 0.39s system 10% cpu 19.765 total
```

```console
❯ python3.13 -m venv .venv && .venv/bin/python3.13 -m pip install pandas && time .venv/bin/python -c "import pandas"
Collecting pandas
  Using cached pandas-2.2.3-cp313-cp313-macosx_10_13_x86_64.whl.metadata (89 kB)
Collecting numpy>=1.26.0 (from pandas)
  Using cached numpy-2.1.3-cp313-cp313-macosx_14_0_x86_64.whl.metadata (62 kB)
Collecting python-dateutil>=2.8.2 (from pandas)
  Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl.metadata (8.4 kB)
Collecting pytz>=2020.1 (from pandas)
  Using cached pytz-2024.2-py2.py3-none-any.whl.metadata (22 kB)
Collecting tzdata>=2022.7 (from pandas)
  Using cached tzdata-2024.2-py2.py3-none-any.whl.metadata (1.4 kB)
Collecting six>=1.5 (from python-dateutil>=2.8.2->pandas)
  Using cached six-1.17.0-py2.py3-none-any.whl.metadata (1.7 kB)
Using cached pandas-2.2.3-cp313-cp313-macosx_10_13_x86_64.whl (12.5 MB)
Using cached numpy-2.1.3-cp313-cp313-macosx_14_0_x86_64.whl (6.6 MB)
Using cached python_dateutil-2.9.0.post0-py2.py3-none-any.whl (229 kB)
Using cached pytz-2024.2-py2.py3-none-any.whl (508 kB)
Using cached tzdata-2024.2-py2.py3-none-any.whl (346 kB)
Using cached six-1.17.0-py2.py3-none-any.whl (11 kB)
Installing collected packages: pytz, tzdata, six, numpy, python-dateutil, pandas
Successfully installed numpy-2.1.3 pandas-2.2.3 python-dateutil-2.9.0.post0 pytz-2024.2 six-1.17.0 tzdata-2024.2

[notice] A new release of pip is available: 24.2 -> 24.3.1
[notice] To update, run: python3.13 -m pip install --upgrade pip
.venv/bin/python -c "import pandas"  0.39s user 0.10s system 2% cpu 16.609 total
```

</p>
</details> 


- **OS:** macOS Sonoma 14.6.1
- **Python:** 3.13.0 (Homebrew)
- **UV:** uv 0.5.6 (Homebrew 2024-12-03)

---

_Comment by @charliermarsh on 2024-12-06 01:53_

Have you tried running with `--compile-bytecode`?

---

_Label `question` added by @charliermarsh on 2024-12-06 01:53_

---

_Comment by @ketozhang on 2024-12-06 18:33_

That was my guess that uv-created virtualenvs are taking longer to compile bytecode (curious why)

Adding `--compile-bytecode` does go faster

```console
❯ uv venv && uv pip install --compile-bytecode pandas && time .venv/bin/python -c "import pandas"
...  
.venv/bin/python -c "import pandas"  0.51s user 0.15s system 2% cpu 23.172 total
```



---

_Comment by @charliermarsh on 2024-12-06 18:43_

I don't think they're taking longer to compile bytecode. We just don't compile bytecode upfront by default.

---

_Comment by @ketozhang on 2024-12-06 18:49_

Gotcha, I must've misremembered that pip doesn't compile during install. (Can't tell from [install help docs](https://pip.pypa.io/en/stable/cli/pip_install/)). 

If that's it, then this is solved.

---

_Comment by @zanieb on 2024-12-06 19:21_

There's a note in our documentation at https://docs.astral.sh/uv/pip/compatibility/#bytecode-compilation

---

_Closed by @zanieb on 2024-12-06 19:21_

---
