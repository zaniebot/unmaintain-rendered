---
number: 10386
title: "uv publish does not recognize UV_INDEX_{name}_PASSWORD and UV_INDEX_{name}_USERNAME"
type: issue
state: closed
author: SalttownUser
labels:
  - duplicate
assignees: []
created_at: 2025-01-08T09:55:30Z
updated_at: 2025-01-08T15:06:32Z
url: https://github.com/astral-sh/uv/issues/10386
synced_at: 2026-01-07T12:31:15-06:00
---

# uv publish does not recognize UV_INDEX_{name}_PASSWORD and UV_INDEX_{name}_USERNAME

---

_Issue opened by @SalttownUser on 2025-01-08 09:55_

I have an issue using the `uv publish` command. I'm trying to upload a package to a private GitLab package registry and getting check error.

The index url is a GitLab group url combining packages inherited from multiple projects in the group:

```
[[tool.uv.index]]
name = "gitlab-private"
url = "https://example.org/api/v4/groups/1/packages/pypi/simple"
default = true
publish-url = "https://example.org/api/v4/projects/2/packages/pypi"
```

I did use these environment variable with credentials for url:
```
UV_INDEX_GITLAB_PRIVATE_PASSWORD
UV_INDEX_GITLAB_PRIVATE_USERNAME
```

and 

```
UV_PUBLISH_USERNAME
UV_PUBLISH_PASSWORD
```

containing the credentials to push packages to publish-url.


```
uv publish --index gitlab-private -v
DEBUG uv 0.5.11 (c4d0caaee 2024-12-19)
warning: `uv publish` is experimental and may change without warning
DEBUG Publishing with index gitlab-private
DEBUG Not a distribution filename: `.gitignore`
Publishing 6 files https://example.org/api/v4/projects/2/packages/pypi
DEBUG Using request timeout of 900s
DEBUG Checking for my_package-py3-none-any.whl in the registry
DEBUG No cache entry for: https://example.org/api/v4/projects/2/packages/pypi/simple/my_package/
DEBUG No netrc file found
error: Failed to query check URL
  Caused by: Package `my_package` was not found in the registry
```

When I add the credentials for index to the url with `url = "https://user:password@example.org/api/v4/groups/1/packages/pypi/simple"` everything works. 

## Expected behavior

uv publish should use UV_INDEX_{name}_PASSWORD and UV_INDEX_{name}_USERNAME to
authenticate with the index "name" to check the package dependencies.

 _Originally posted by @SalttownUser in [#9775](https://github.com/astral-sh/uv/issues/9775#issuecomment-2557498010)_

---

_Comment by @charliermarsh on 2025-01-08 14:34_

I believe this is the same as #9845?

---

_Label `duplicate` added by @charliermarsh on 2025-01-08 14:34_

---

_Closed by @charliermarsh on 2025-01-08 15:06_

---
