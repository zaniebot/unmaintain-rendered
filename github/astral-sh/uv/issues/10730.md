---
number: 10730
title: "`uv init --lib` should add `uv.lock` to the `.gitignore`"
type: issue
state: closed
author: cjw296
labels:
  - question
assignees: []
created_at: 2025-01-18T10:38:03Z
updated_at: 2025-01-22T06:56:20Z
url: https://github.com/astral-sh/uv/issues/10730
synced_at: 2026-01-07T12:31:15-06:00
---

# `uv init --lib` should add `uv.lock` to the `.gitignore`

---

_Issue opened by @cjw296 on 2025-01-18 10:38_

My understanding is that while application projects should include a lock file, library projects should not.

If that's true, then I think `uv.lock` should be included in the `.gitignore` generate by `uv init --lib`.

It currently does not:

```bash
$ uv --version
uv 0.5.18 (27d1bad55 2025-01-11)
$ uv init --lib testlib
Initialized project `testlib` at `/Users/chris/testlib`
$ cd testlib/
$ cat .gitignore 
# Python-generated files
__pycache__/
*.py[oc]
build/
dist/
wheels/
*.egg-info

# Virtual environments
.venv
```

---

_Comment by @charliermarsh on 2025-01-18 15:23_

I would include locks for both libraries and application (though there are arguments for and against -- see: https://blog.rust-lang.org/2023/08/29/committing-lockfiles.html).

---

_Label `question` added by @charliermarsh on 2025-01-18 15:23_

---

_Comment by @cjw296 on 2025-01-19 10:44_

Am I right in thinking the dependencies listed in `pyproject.toml` give the compatible ranges for a library?

---

_Comment by @charliermarsh on 2025-01-19 16:19_

Yes that's correct.

---

_Comment by @cjw296 on 2025-01-20 07:20_

Okay, so once a library is published to a package index such as pypi, do the versions locked in `uv.lock` have any impact on the dependency versions considered by a tool such as pip during installation?



---

_Comment by @charliermarsh on 2025-01-20 13:30_

No, they do not.

---

_Closed by @charliermarsh on 2025-01-20 14:28_

---

_Comment by @cjw296 on 2025-01-21 09:15_

Sure, so in that case I come down on the "lock file should not be in repo for libraries" side of the discussion: I test my libraries against a range of python and dependency versions, so don't think it makes sense.

What would you suggest for `uv init --lib` to better suit my usecase?

---

_Comment by @konstin on 2025-01-21 09:35_

My usual recommendation is to have the lockfile checked in so that all developers and CI get the same versions, and that commands are reproducible.

Additionally, you can test:
* `uv sync --fork-strategy requires-python`, for a larger coverage of python versions (this option can be used project wide)
* `uv sync --resolution lowest`, only in CI, to check that the lower bounds are correct.
* `uv sync --upgrade`, in CI job with allowed failures, so that a bad dependency update doesn't break merging of unrelated changes.

---

_Comment by @charliermarsh on 2025-01-21 13:18_

If you don’t want to check in the lockfile, then you can just remove it after running uv init. That’s totally up to you!

---

_Comment by @cjw296 on 2025-01-22 06:43_

> If you don’t want to check in the lockfile, then you can just remove it after running uv init. That’s totally up to you!

Well no, I have to manually `git rm uv.lock` and then add `uv.lock` to `.gitignore`.

@konstin - those are really good options to think through! Where can I find out what the defaults are for `--fork-strategy` and `--resolution`?

Where can I find out what the differences are between `lowest` and `lowest-direct`?

Where can I find out what the differences are between `fewest` and `requires-python`?

When using `uv sync --fork-strategy requires-python`, how can I specify the python version to use in a CI matrix?

If either of you have a good example of a pure python library pull request CI based on github actions, I'd love to take a look!

---

_Comment by @zanieb on 2025-01-22 06:47_

See the settings reference for details on the options https://docs.astral.sh/uv/reference/settings/

---

_Comment by @cjw296 on 2025-01-22 06:56_

Thanks! Having read that, I don't understand:

> uv sync --fork-strategy requires-python, for a larger coverage of python versions (this option can be used project wide)

This sounds almost like you're describing `--fork-strategy fewest` and `--fork-strategy requires-python` is the default, so perhaps you could give a bit more context on what you meant?

> uv sync --upgrade, in CI job with allowed failures, so that a bad dependency update doesn't break merging of unrelated changes.

The thing with this, and indeed the approach of keeping a uv.lock file in a library project is when do you update it?
I guess you'll suggest something like dependabot, which from my perspective contains a bunch of noise/churn commits/PRs.
I prefer the run CI periodically, daily if possible, with unpinned deps to highlight when problems occur, as soon a they occur.
`uv sync --lowest` certainly seems like a great addition to that approach!


---

_Referenced in [pypa/pip#8085](../../pypa/pip/issues/8085.md) on 2025-03-27 08:39_

---

_Referenced in [Aleph-Alpha/pharia-skill#196](../../Aleph-Alpha/pharia-skill/pulls/196.md) on 2025-03-27 12:27_

---

_Referenced in [django-guardian/django-guardian#870](../../django-guardian/django-guardian/pulls/870.md) on 2025-05-15 18:08_

---

_Referenced in [sktime/tutorial_haicon_prologue_day#1](../../sktime/tutorial_haicon_prologue_day/pulls/1.md) on 2025-07-18 09:44_

---

_Referenced in [SCM-NV/PLAMS#318](../../SCM-NV/PLAMS/pulls/318.md) on 2025-09-12 13:35_

---
