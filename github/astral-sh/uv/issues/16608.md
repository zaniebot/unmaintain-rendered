---
number: 16608
title: "Prerelease versions shouldn't satisfy release versions"
type: issue
state: closed
author: flofriday
labels:
  - bug
assignees: []
created_at: 2025-11-06T10:19:07Z
updated_at: 2025-11-07T15:23:26Z
url: https://github.com/astral-sh/uv/issues/16608
synced_at: 2026-01-07T12:31:16-06:00
---

# Prerelease versions shouldn't satisfy release versions

---

_Issue opened by @flofriday on 2025-11-06 10:19_

### Summary

This is more a discussion and I do understand that there will be tricky tradeoffs.

## Problem
Yesterday a coworker ran my uv project on their machine but crashed with a Segfault (when invoking the bindings to openssl via the cryptography package) when running it. We both are on the same OS, same openssl version, same uv version. Since we also specified the Python version in the project (to `>=3.14.0`) we didn't think of checking that until very late.

As it turns out they were on `3.14.0a5` which I assume has a bug causing the segfault, which is fine and expected for a alpha version eight months before the official release.

What I think is unexpected is that `uv` allows `3.14.0a5` to satisfy the requirement `3.14.0` as technically I would say that `3.14.0a5` < `3.14.0`. For example in 3.14.0 we have free threading support which that alpha doesn't contain.


## Solution Suggestion 1 - Explicit Opt in
In general I would assume that most developers don't intend to use pre release versions of python without explicit opt-in.

For this we could add explicit flags to pyproject.toml  and the CLI to allow uv to use pre-release versions.

The problem with that is that it would break behavior so it would make sense to only apply this change for the upcoming python 3.16.x and later.

## Solution Suggestion 2 - Automatic upgrade to stable
Once a stable version of 3.xx.yy is released uv automatically upgrades to that if only a pre-release version of 3.xx.yy is currently available. 

Again this would break backbackwards compatibility but I think we could implement this for 3.15 and onward.

## Solution Suggestion 3 - Add a warning
Maybe we should always print a warning if uv uses a pre-release version of python, urging the user to upgrade. 

## Conclusion
Maybe I'm missing something but this has happened to me twice now and I do think we can do better here. However, as a PL nerd I'm really happy that it's that easy to try out new (unstable) python versions with uv :)


### Platform

Darwin 25.1.0 arm64

### Version

uv 0.9.7

### Python version

Python 3.14.0

---

_Label `bug` added by @flofriday on 2025-11-06 10:19_

---

_Comment by @zanieb on 2025-11-06 12:54_

We only allow pre-release versions to satisfy the release version if it's the only version we can find.

I think for `requires-python = ">=3.14.0"`, we must allow pre-release versions to satisfy that request in order for people to be able to test the pre-releases. (i.e., you can't update this value in third-party packages) 

I agree it'd be great to automatically upgrade or hint to upgrade once the stable version is available.

---

_Comment by @konstin on 2025-11-06 16:13_

You can find some more discussion fo this in https://discuss.python.org/t/requires-python-and-pre-release-python-versions/62959. Basically, requires-python shouldn't actually be a PEP version specifier, but a Python API level which is `{major}.{minor}`, and the mismatch between those two causes the confusing interface. (And we already ignore version parts that CPython may add that are not PEP 440)

> I agree it'd be great to automatically upgrade or hint to upgrade once the stable version is available.

+1 for printing a hint if you're on a prerelease but a stable version is available.

---

_Comment by @notatallshaw on 2025-11-06 16:26_

My current thinking is the semantics of requires Python should just act on the Python API level provided and ignore the pre release and patch part.

But that tools have a lot of descretion, such as using the current interpreter version to warn that users they are on an old version of CPython. 

I'll try and get a pre-PEP out this year. 

---

_Comment by @zanieb on 2025-11-06 16:48_

Tracking this in https://github.com/astral-sh/uv/issues/16616

---

_Closed by @zanieb on 2025-11-06 16:48_

---

_Comment by @flofriday on 2025-11-07 11:38_

@notatallshaw I think I do agree but I just don't think pre-release versions (especially the alphas) don't satisfy the API level. For example in October "3.15.0a1" was released but at the moment it's too early in the release cycle and nobody can say what will eventually land in the "3.15.0". 

So I don't see how CPython "3.15.0a1" could satisfy Python API level "3.15.0". Since new features could land in the release that aren't available in the first alpha.

Is that also what you meant?

---

_Comment by @notatallshaw on 2025-11-07 15:02_

@flofriday The intent of `requires-python`, as you can read in the link @konstin is to be about the language version, not the interpreter version. The language versions have no alpha, beta, release candidate, or bug fix versions, they simply go: 3.12, 3.13, 3.14, 3.15, 3.16 etc. On the language side it is either 3.14 or 3.15.

Further I would disagree that if someone wrote `>=3.15` and only CPython `3.15.0a1` is currently available they meant anything else, packages authors do exactly this to test against the new pre-releases of CPython. This also matches pip's current behavior which only takes the major, minor, and patch version components from the CPython version and ignores the pre-release component, so for pip `>=3.15` matches `3.15.0a1` for CPython versions (not for Python packages though).

That said, for tools that have the ability to install Python or select from multiple versions of Python, if a user selects `>=3.14` and only  `3.15.0a1` is available then I think there should be a clear warning message. Or if they select  `>=3.15` and `3.15.0a1` is available locally but newer versions are available remotely I think there should be a clear warning message. But when those warning messages trigger exactly I think should be the prerogative of the tool, like uv, to decide what makes sense for their users.

---

_Referenced in [astral-sh/uv#16984](../../astral-sh/uv/issues/16984.md) on 2025-12-04 18:05_

---
