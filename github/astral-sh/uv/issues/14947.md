---
number: 14947
title: sys_platform and case
type: issue
state: closed
author: amcandio
labels:
  - question
assignees: []
created_at: 2025-07-29T05:43:09Z
updated_at: 2025-07-31T02:28:46Z
url: https://github.com/astral-sh/uv/issues/14947
synced_at: 2026-01-07T12:31:16-06:00
---

# sys_platform and case

---

_Issue opened by @amcandio on 2025-07-29 05:43_

### Question

Context: https://github.com/understanding-search/maze-dataset/issues/73

When checking commit `ce6862a573e00bbb55a4f05b698517c510dbc1a5` of https://github.com/understanding-search/maze-dataset on a macOS I get an error installing the repository due to a dependency not available for macOS. However, when checking `pyproject.toml` I see:

```
"rust_fst>=0.1.2; platform_system != 'darwin'"
```

After capitalizing Darwin it works fine and I don't see the error anymore:
```
"rust_fst>=0.1.2; platform_system != 'Darwin'"
```

Question: is this configuration supposed to be case-sensitive? I took a look at the source code and I see different examples in the docs with both "Darwin" and "darwin".

I'm confused whether this is a bug or not because I do see some normalization logic in https://github.com/astral-sh/uv/blob/00efde06b61756f0f305fcf67b12db71a29063d3/crates/uv-pep508/src/marker/algebra.rs#L293. But that logic is supposed to normalize "Darwin" do "darwin", so "darwin" should have worked just fine.


### Platform

Darwin 24.5.0 arm64

### Version

0.8.3 (7e78f54e7 2025-07-24)

---

_Label `question` added by @amcandio on 2025-07-29 05:43_

---

_Comment by @charliermarsh on 2025-07-31 02:02_

Yes, that marker is case sensitive. We don't control it, so we have to respect the way it works when Python reports it (`import platform; platform.system()`).

You might be misreading the code in the marker algebra. It normalizes `platform_system == "Darwin"` to `sys_platform == "darwin"`. Those are not the same markers; it's not just converting to lower-case, it's converting from `platform_system` to `sys_platform`.

---

_Closed by @charliermarsh on 2025-07-31 02:02_

---

_Assigned to @charliermarsh by @charliermarsh on 2025-07-31 02:02_

---

_Comment by @amcandio on 2025-07-31 02:28_

Thanks for the clarification Charlie! 

---
