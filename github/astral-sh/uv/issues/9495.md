---
number: 9495
title: Using project as script dependency
type: issue
state: closed
author: areleu
labels:
  - question
assignees: []
created_at: 2024-11-28T10:47:04Z
updated_at: 2025-01-07T19:29:55Z
url: https://github.com/astral-sh/uv/issues/9495
synced_at: 2026-01-07T12:31:15-06:00
---

# Using project as script dependency

---

_Issue opened by @areleu on 2024-11-28 10:47_

Hello,

Sorry if this is a dumb question but I already spent like an hour trying to figure this out, I have a project folder with the following structure

```
project
  __init__.py
  module
    __init__.py
    somemodule.py
scripts
  script.py
pyproject.toml
README.md
etc...
```
And the script.py has the following content
```
from project.module.somemodule import some_function

if __name__=="__main__":
    some_function()
```

If I run

```
uv run .\scripts\script.py
```

I get

```
File ".scripts\script.py", line 1, in <module>
    from project.module.somemodule import some_function
ModuleNotFoundError: No module named 'project'
```

At https://docs.astral.sh/uv/guides/scripts/#running-a-script-without-dependencies one can read:

> Note that if you use uv run in a project, i.e. a directory with a pyproject.toml, it will install the current project before running the script. If your script does not depend on the project, use the --no-project flag to skip this:

But it seems that the module is not being installed, so I am at lost. If I place them in the main directory it works.I could place my scripts there, but I would rather not since I think they can just pile up and they can convolute the project folder. Am I missing something or doing something wrong?

Edit: I can always to the good ol' sys.path append, but it is hacky and it is the kind of thing I want to avoid when using a package manager.

Edit 2: Added __init__.py to example.

---

_Comment by @areleu on 2024-11-28 12:25_

Unfortunately I get your comments as emails but I can't seem to read them from here. I probably missunderstand then the usage of this manager. From my experience when someone develops a python library the code lives in a folder with the library name within the project folder which may have the same name. 

For example: https://github.com/pandas-dev/pandas 

The scripts folder I have are some tasks that I need to do that do not need to be delivered with the final package but need the tools defined in such package, I may be wrong but other solutions like hatch and poetry install whatever is delivered in the build files into the working environment.

---

_Comment by @areleu on 2024-11-28 12:34_

>uv run scripts/script.py should work?

I don't know, I would argue that it should work and it works with other tools. But is not up to me to decide. If I have 2 or 3 scripts in a project that is not so crazy but the second I get a big project with 10 scripts the base directory can start to be hard to manage and is when a script folder can be handy.

>Your project folder, script folder, and pyproject.toml are located in the same directory.
But if you want to import from the project folder, shouldn't your script folder be inside the project folder?

Both scripts/ and project/ are inside the "project" folder (lets rename it to library if that is confusing). The latter is the deliverable and the scripts are support tools, I expect that anything that is defined in library which is what goes into the dist/package-x.x.x,tar.gz to be considered when running anything within the project when I don't use the --no-project flag, a work around would be to actually install it with pip install -e . but then I would have to do it with every python version I am working with isn't it?


---

_Comment by @FishAlchemist on 2024-11-28 12:58_

@areleu I just deleted my comment because I realized I might have misunderstood something. Could you provide a compressed file containing the directory structure that can reproduce your issue?
I'm unsure if uv can make modules search from the same directory as pyproject.toml, but if we install the project into the environment, we should be able to import them directly

---

_Comment by @areleu on 2024-11-28 13:28_

There you go: [hello_project.zip](https://github.com/user-attachments/files/17948666/hello_project.zip)


---

_Comment by @zanieb on 2024-11-28 14:08_

Since your module is in a different working directory than the script, I presume you need to install your module into the environment as a package for it to be available. See https://docs.astral.sh/uv/concepts/projects/config/#project-packaging for details.

---

_Label `question` added by @zanieb on 2024-11-28 14:08_

---

_Comment by @areleu on 2024-11-28 14:28_

I figured out a hack, that seems to be working, so I can tell uv to package it for me:

script/script.py:
```python
# /// script
# requires-python = ">=3.13"
# dependencies = [
#     "hello_project @ file:///${PROJECT_ROOT}/"
# ]
# ///


from hello_project.hello import say_hello

print("This does work!")
say_hello()
```

But idk if it is the intended usage, maybe is the best way to go, specially because it seems to be doing some caching, if I change the folder structure a bit it will be try to use the older version, is there a command to force reinstallation?

---

_Comment by @charliermarsh on 2024-11-28 14:28_

You can always add `--reinstall-package hello-project`.

---

_Closed by @zanieb on 2025-01-07 19:29_

---

_Referenced in [astral-sh/uv#12876](../../astral-sh/uv/issues/12876.md) on 2025-04-14 10:01_

---
