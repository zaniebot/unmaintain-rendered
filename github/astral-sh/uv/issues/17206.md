---
number: 17206
title: uv sync --locked failed when I have a prerelease user config?
type: issue
state: closed
author: lxl66566
labels:
  - question
assignees: []
created_at: 2025-12-21T12:30:35Z
updated_at: 2025-12-21T16:43:36Z
url: https://github.com/astral-sh/uv/issues/17206
synced_at: 2026-01-07T12:31:16-06:00
---

# uv sync --locked failed when I have a prerelease user config?

---

_Issue opened by @lxl66566 on 2025-12-21 12:30_

### Question

I have a user config:

```toml
prerelease = "allow"
```

When I runs `uv run` or `uv lock` or sth, the uv.lock in the project will be automatically overwritten with contents like:

```toml
revision = 3
[options]
prerelease-mode = "allow"
...
```

so my user config is recorded in the lockfile. When I runs `uv sync --locked` in CI, this command failed: ``The lockfile at `uv.lock` needs to be updated, but `--locked` was provided. To update the lockfile, run `uv lock`.``

I think this behavior is abnormal. When I use `--locked`, I want to make an env as same as the lock file says, even if inconsistancy between `pyproject.toml` and `uv.lock`, I think the update lockfile message should be a warning, not error (exit 1)?

### Platform

Windows 11 & Linux both

### Version

uv 0.9.x

---

_Label `question` added by @lxl66566 on 2025-12-21 12:30_

---

_Renamed from "uv sync --locked failed when I have a user config?" to "uv sync --locked failed when I have a prerelease user config?" by @lxl66566 on 2025-12-21 12:33_

---

_Comment by @zanieb on 2025-12-21 14:53_

> When I use --locked, I want to make an env as same as the lock file says, even if inconsistancy between pyproject.toml and uv.lock

The flag for that behavior is `--frozen`. `--locked` asserts that the lockfile matches the `pyproject.toml`.

---

_Comment by @lxl66566 on 2025-12-21 16:43_

Thanks!

---

_Closed by @lxl66566 on 2025-12-21 16:43_

---
