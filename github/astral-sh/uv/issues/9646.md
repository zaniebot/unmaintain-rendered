---
number: 9646
title: "Can't install torch_scatter wheel from index on OSX"
type: issue
state: closed
author: dionhaefner
labels:
  - bug
  - question
assignees: []
created_at: 2024-12-04T19:49:38Z
updated_at: 2024-12-20T19:15:06Z
url: https://github.com/astral-sh/uv/issues/9646
synced_at: 2026-01-07T12:31:15-06:00
---

# Can't install torch_scatter wheel from index on OSX

---

_Issue opened by @dionhaefner on 2024-12-04 19:49_

It seems impossible to install `torch_scatter` CPU wheels using `uv` on OSX. I'm following the [official installation instructions](https://pytorch-geometric.readthedocs.io/en/2.5.2/notes/installation.html) which require `--find-links` to be passed.

`pyproject.toml`:

```toml
[project]
name = "foo"
requires-python = ">=3.10"
dependencies = [
    "torch",
    "torch_scatter",
]
version = "0.1.0"

[tool.uv.sources]
torch = [{ index = "pytorch-cpu", marker = "platform_system != 'Darwin'" }]


[tool.uv]
find-links = [
    "https://data.pyg.org/whl/torch-2.5.1+cpu.html",
]

[[tool.uv.index]]
name = "pytorch-cpu"
url = "https://download.pytorch.org/whl/cpu"
explicit = true
```

Results in this error:

```bash
$ uv venv
$ uv sync
⠙ Resolving dependencies...                                                                          
warning: Missing version constraint (e.g., a lower bound) for `torch-scatter`
Resolved 13 packages in 2.52s
error: Distribution `torch-scatter==2.1.2+pt25cpu @ registry+https://data.pyg.org/whl/torch-2.5.1+cpu.html` can't be installed because it doesn't have a source distribution or wheel for the current platform
```

It seems that `uv` is picking up `torch-scatter==2.1.2+pt25cpu` instead of the (compatible) `torch-scatter==2.1.2` wheel. pip-based installation works:

```bash
$ uv pip install torch_scatter -f https://data.pyg.org/whl/torch-2.5.1+cpu.html
# all good
```

I'm really looking for any `pyproject.toml` here that doesn't lead to `uv sync` choking on OSX.

---

_Comment by @charliermarsh on 2024-12-06 00:33_

I think you need to do: `"torch_scatter===2.1.2"` instead of `"torch_scatter"`.

---

_Label `question` added by @charliermarsh on 2024-12-06 00:33_

---

_Comment by @dionhaefner on 2024-12-06 09:04_

Same outcome:

```bash
error: Distribution `torch-scatter==2.1.2+pt25cpu @ registry+https://data.pyg.org/whl/torch-2.5.1+cpu.html` can't be installed because it doesn't have a source distribution or wheel for the current platform
```

It looks like `uv` is treating `2.1.2` and `2.1.2+pt25cpu` as the same version and finds the latter first, which fails.

---

_Comment by @charliermarsh on 2024-12-17 20:30_

There are three equals signs in my version. `2.1.2+pt25cpu` _is_ a valid version if you request `torch_scatter==2.1.2` -- that's how the spec works. If you want `2.1.2` but not `2.1.2+pt25cpu`, you need `torch_scatter===2.1.2`.

---

_Comment by @zanieb on 2024-12-17 20:33_

(This is a consequence of PyTorch using the spec differently than it was intended, for details on the standards, see https://packaging.python.org/en/latest/specifications/version-specifiers/#local-version-identifiers)

---

_Comment by @charliermarsh on 2024-12-17 20:35_

@zanieb - this would also be fixed by my “incomplete wheels” PR…

---

_Referenced in [astral-sh/uv#9928](../../astral-sh/uv/pulls/9928.md) on 2024-12-17 21:11_

---

_Comment by @charliermarsh on 2024-12-17 21:12_

After #9928, this would just be:

```toml
[project]
name = "foo"
requires-python = ">=3.10"
dependencies = [
    "torch",
    "torch_scatter",
]
version = "0.1.0"

[tool.uv.sources]
torch = [{ index = "pytorch-cpu" }]


[tool.uv]
find-links = [
    "https://data.pyg.org/whl/torch-2.5.1+cpu.html",
]

[[tool.uv.index]]
name = "pytorch-cpu"
url = "https://download.pytorch.org/whl/cpu"
explicit = true
```

---

_Referenced in [astral-sh/uv#9711](../../astral-sh/uv/issues/9711.md) on 2024-12-18 13:38_

---

_Assigned to @charliermarsh by @charliermarsh on 2024-12-20 19:14_

---

_Label `bug` added by @charliermarsh on 2024-12-20 19:15_

---

_Comment by @charliermarsh on 2024-12-20 19:15_

Fixed by https://github.com/astral-sh/uv/pull/10046.

---

_Closed by @charliermarsh on 2024-12-20 19:15_

---
