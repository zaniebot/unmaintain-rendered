---
number: 16279
title: "Where is `UV` trying to get credentials from on Windows platform"
type: issue
state: open
author: InsaneLuv
labels:
  - question
assignees: []
created_at: 2025-10-13T09:47:08Z
updated_at: 2025-12-18T19:56:58Z
url: https://github.com/astral-sh/uv/issues/16279
synced_at: 2026-01-07T12:31:16-06:00
---

# Where is `UV` trying to get credentials from on Windows platform

---

_Issue opened by @InsaneLuv on 2025-10-13 09:47_

### Question

It looks like uv having major issues with `uv auth` and `credentials` providing when installing packages from private registries like Gitlab.

No such problem on other platforms like Linux, but on Windows it's hell - you literally don't understand why uv doesn't supply credentials from anywhere.
1. setx (export alternative for windows called)
2. Windows Environment Variables
3. uv auth

Maybe my actions is incorrect? But the -vv argument doesn't give any information about what `credentials` `uv` can/can't find or where it's trying to find them.

Here's what I'm trying to do:

#### pyproject.toml
```
[tool.uv.sources]
package = { index = "GITLAB" }

[[tool.uv.index]]
name = "GITLAB"
url = "https://gitlab.test.ru/api/v4/groups/58/-/packages/pypi/simple"
explicit = true
authenticate = "always"
```

I'm describing where the package need to be installed from. It's a private gitlab registry.
I generate the token `https://gitlab.test.ru/` and proceed further:

#### cli (uv auth)
`uv auth login https://gitlab.test.ru/ `
`username: InsaneLuv`
`password: *TOKEN*`


According to the documentation, this is what I had to do to authenticate.
But i got:

```
  package not found in the package registry
  `-> Because package was not found in the package registry and your project depends on package==0.1.1, we can conclude that your project's requirements are unsatisfiable.

      hint: An index URL (https://gitlab.test.ru/api/v4/groups/58/-/packages/pypi/simple) could not be queried due to a lack of valid authentication credentials (401 Unauthorized).
```


Okay, maybe this method isn't suitable, I'll try another one from the documentation, passing only the token like:
`uv auth login example.com --token`
Same error.


`setx` AND `Windows Environment Variables` with `UV_INDEX_GITLAB_USERNAME` and `UV_INDEX_GITLAB_PASSWORD` don't give any effect either.


Then my most important question is:
```
TRACE Caching credentials for https://gitlab.test.ru/api/v4/groups/58/-/packages/pypi
TRACE Caching credentials for https://gitlab.test.ru/api/v4/groups/58/-/packages/pypi/simple
TRACE Read credentials for index GITLAB
TRACE Caching credentials for https://gitlab.test.ru/api/v4/groups/58/-/packages/pypi
TRACE Caching credentials for https://gitlab.test.ru/api/v4/groups/58/-/packages/pypi/simple
DEBUG Using request timeout of 30s
DEBUG Ignoring existing lockfile due to `--upgrade`
DEBUG Found static `pyproject.toml` for: app @ file:///C:/Users/luv/PycharmProjects/w-docrobot
DEBUG No workspace root found, using project root
TRACE Caching credentials for https://gitlab.test.ru/api/v4/groups/58/-/packages/pypi/simple
TRACE Caching credentials for https://gitlab.test.ru/api/v4/groups/58/-/packages/pypi/simple
```


Where is `UV` trying to get credentials from?
What am I doing wrong?

### Platform

Windows 11 IoT Enterprise LTSC 24H2 26100.6584

### Version

uv 0.9.2 (141369ce7 2025-10-10)

---

_Label `question` added by @InsaneLuv on 2025-10-13 09:47_

---

_Comment by @konstin on 2025-12-18 16:55_

I don't know why windows would be different here CC @zanieb 

---

_Comment by @zanieb on 2025-12-18 17:32_

Windows shouldn't be different. Can you provide verbose logs please?

---

_Comment by @InsaneLuv on 2025-12-18 18:26_

> Windows shouldn't be different. Can you provide verbose logs please?


Another package from private gitlab


```
(venvforwindows) PS C:\Users\luv\PycharmProjects\proj> uv auth login https://gitlab.com/
username: InsaneLuv
password:
Stored credentials for InsaneLuv@https://gitlab.com/
(venvforwindows) PS C:\Users\luv\PycharmProjects\proj> uv auth login https://gitlab.com/
username: InsaneLuv
password:
Stored credentials for InsaneLuv@https://gitlab.com/
(venvforwindows) PS C:\Users\luv\PycharmProjects\proj> uv add alt --verbose
DEBUG uv 0.9.9 (4fac4cb7e 2025-11-12)
DEBUG Acquired shared lock for `C:\Users\luv\AppData\Local\uv\cache`
DEBUG Found project root: `C:\Users\luv\PycharmProjects\proj`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `C:\Users\luv\PycharmProjects\proj`
DEBUG No Python version file found in workspace: C:\Users\luv\PycharmProjects\proj
DEBUG Using Python request `==3.13.*` from `requires-python` metadata
DEBUG Checking for Python environment at: `.venv`
DEBUG The project environment's Python version satisfies the request: `Python ==3.13.*`
DEBUG Released lock at `C:\Users\luv\AppData\Local\Temp\uv-bfa794692a7d9ddf.lock`
DEBUG Acquired lock for `.venv`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: app @ file:///C:/Users/luv/PycharmProjects/proj
DEBUG No workspace root found, using project root
DEBUG Resolving despite existing lockfile due to mismatched requirements for: `app==0.1.0`
  Requested: {Requirement { name: PackageName("alt"), extras: [], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: "0.0.1" }]), index: Some(IndexMetadata { url: Url(VerbatimUrl { url: DisplaySafeUrl { scheme: "https", cannot_be_a_base: false, username: "", password: None, host: Some(Domain("gitlab.com")), port: None, path: "/api/v4/projects/69269714/packages/pypi/simple", query: None, fragment: None }, given: None }), format: Simple }), conflict: None }, origin: None }}
  Existing: {Requirement { name: PackageName("beanie"), extras: [], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: "2.0.1" }]), index: None, conflict: None }, origin: None }, Requirement { name: PackageName("click"), extras:
 [], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: "8.1.0" }]), index: None, conflict: None }, origin: None }, Requirement { name: PackageName("dishka"), extras: [], groups: [], marker: true, source: Registry { specifier: V
ersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: "1.7.2" }]), index: None, conflict: None }, origin: None }, Requirement { name: PackageName("fastapi"), extras: [ExtraName("standard")], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([VersionSpecifier { ope
rator: GreaterThanEqual, version: "0.122.0" }]), index: None, conflict: None }, origin: None }, Requirement { name: PackageName("grpcio"), extras: [], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: "1.76.0" }]), index: None,
 conflict: None }, origin: None }, Requirement { name: PackageName("grpcio-tools"), extras: [], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: "1.76.0" }]), index: None, conflict: None }, origin: None }, Requirement { name: 
PackageName("jinja2"), extras: [], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: "3.1.6" }]), index: None, conflict: None }, origin: None }, Requirement { name: PackageName("protobuf"), extras: [], groups: [], marker: true,
 source: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: "4.25.0" }]), index: None, conflict: None }, origin: None }, Requirement { name: PackageName("protobuf-to-pydantic"), extras: [], groups: [], marker: true, source: Registry { specifier: VersionSpecifier
s([VersionSpecifier { operator: GreaterThanEqual, version: "0.3.3.1" }]), index: None, conflict: None }, origin: None }, Requirement { name: PackageName("rich"), extras: [], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: "13
.0.0" }]), index: None, conflict: None }, origin: None }, Requirement { name: PackageName("s2sphere"), extras: [], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: "0.2.5" }]), index: None, conflict: None }, origin: None }, Requirement { name: PackageName("websockets"), extras: [], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: "12.0" }]), index: None, conflict: None }, origin: None }}
DEBUG Solving with installed Python version: 3.13
DEBUG Solving with target Python version: ==3.13.*
DEBUG Adding direct dependency: app*
DEBUG Searching for a compatible version of app@ file:///C:/Users/luv/PycharmProjects/proj(*)
DEBUG Adding direct dependency: alt>=0.0.1
DEBUG Acquired lock for `C:\Users\luv\AppData\Local\uv\cache\simple-v18\index\ea22b7efa2880702\alt.lock`
DEBUG Found stale response for: https://gitlab.com/api/v4/projects/69269714/packages/pypi/simple/alt/
DEBUG Sending revalidation request for: https://gitlab.com/api/v4/projects/69269714/packages/pypi/simple/alt/
DEBUG Released lock at `C:\Users\luv\AppData\Local\uv\cache\simple-v18\index\ea22b7efa2880702\alt.lock`
DEBUG Indexes search failed because of status code failure: 401 Unauthorized
DEBUG Searching for a compatible version of alt (>=0.0.1)
DEBUG No compatible version found for: alt
DEBUG Recording unit propagation conflict of alt from incompatibility of (app)
DEBUG Searching for a compatible version of app @ file:///C:/Users/luv/PycharmProjects/proj(<0.1.0 | >0.1.0)
DEBUG No compatible version found for: app
DEBUG Reverting changes to `pyproject.toml`
DEBUG Reverting changes to `uv.lock`
  x No solution found when resolving dependencies:
  `-> Because alt was not found in the package registry and your project depends on alt>=0.0.1, we can conclude that your project's requirements are unsatisfiable.

      hint: An index URL (https://gitlab.com/api/v4/projects/69269714/packages/pypi/simple) could not be queried due to a lack of valid authentication credentials (401 Unauthorized).
  help: If you want to add the package regardless of the failed resolution, provide the `--frozen` flag to skip locking and syncing.
DEBUG Released lock at `C:\Users\luv\PycharmProjects\proj\.venv\.lock`
DEBUG Released lock at `C:\Users\luv\AppData\Local\uv\cache\.lock`
```


---

_Comment by @zanieb on 2025-12-18 19:56_

Can you use `-vv` please?

---
