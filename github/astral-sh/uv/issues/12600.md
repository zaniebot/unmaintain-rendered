---
number: 12600
title: "AssertionError: torch is required for pre-compiling ops, please install it first."
type: issue
state: closed
author: mikel-brostrom
labels:
  - question
assignees: []
created_at: 2025-04-01T16:19:25Z
updated_at: 2025-04-01T16:28:01Z
url: https://github.com/astral-sh/uv/issues/12600
synced_at: 2026-01-07T12:31:15-06:00
---

# AssertionError: torch is required for pre-compiling ops, please install it first.

---

_Issue opened by @mikel-brostrom on 2025-04-01 16:19_

### Question

My `project.toml`

```
[[tool.pdm.source]]
name = "torchcpu"
url = "https://download.pytorch.org/whl/cpu"
verify_ssl = true

[[tool.pdm.source]]
name = "torch_cuda121"
url = "https://download.pytorch.org/whl/cu121"
verify_ssl = true

[build-system]
requires = ["pdm-backend", "torch"]
build-backend = "pdm.backend"

[[tool.uv.dependency-metadata]]
name = "yolox"
version = "0.3.0"
requires-dist = ["onnx>=1.17.0"]

[tool.flake8]
max-line-length = 120
exclude = [".tox", "*.egg", "build", "temp"]
select = ["E", "W", "F"]
doctests = true
verbose = 2
format = "pylint"
ignore = ["E731", "F405", "E402", "W504", "W605", "E741"]

[project]
authors = [
    {name = "Mikel Broström"},
]
license = {text = "AGPL-3.0"}
requires-python = "<3.12,>=3.9"
dependencies = [
    "setuptools<71.0.0,>=70.0.0",
    "filterpy<2.0.0,>=1.4.5",
    "gdown<6.0.0,>=5.1.0",
    "lapx<1.0.0,>=0.5.5",
    "loguru<1.0.0,>=0.7.2",
    "numpy==1.26.4",
    "pyyaml<7.0.0,>=6.0.1",
    "regex<2025.0.0,>=2024.0.0",
    "yacs<1.0.0,>=0.1.8",
    "scikit-learn<2.0.0,>=1.3.0",
    "pandas<3.0.0,>=2.0.0",
    "opencv-python<5.0.0,>=4.7.0",
    "ftfy<7.0.0,>=6.1.3",
    "gitpython<4.0.0,>=3.1.42",
    "torch<3.0.0,>=2.2.1; sys_platform == \"darwin\"",
    "torch<3.0.0,>=2.2.1; sys_platform == \"linux\" or sys_platform == \"win32\"",
    "torchvision<1.0.0,>=0.17.1; sys_platform == \"darwin\"",
    "torchvision<1.0.0,>=0.17.1; sys_platform == \"linux\" or sys_platform == \"win32\"",
]
name = "boxmot"
version = "12.0.2"
description = "BoxMOT: pluggable SOTA tracking modules for segmentation, object detection and pose estimation models"
readme = "README.md"
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "Intended Audience :: Education",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.8",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Topic :: Software Development",
    "Topic :: Scientific/Engineering",
    "Topic :: Scientific/Engineering :: Artificial Intelligence",
    "Topic :: Scientific/Engineering :: Image Recognition",
    "Topic :: Scientific/Engineering :: Image Processing",
]
keywords = [
    "tracking",
    "tracking-by-detection",
    "machine-learning",
    "deep-learning",
    "vision",
    "ML",
    "DL",
    "AI",
    "YOLO",
]

[dependency-groups]
test = [
    "pytest<9.0.0,>=8.0.2",
    "isort<6.0.0,>=5.13.2",
    "pytest-cov<7.0.0,>=6.0.0",
]
yolo = [
    "ultralytics @ git+https://github.com/mikel-brostrom/ultralytics.git",
    "rfdetr<2.0.0,>=1.0.8",
    "yolox==0.3.0",
]
export = [
    "onnx<2.0.0,>=1.17.0",
    "onnxsim<1.0.0,>=0.4.36",
    "openvino-dev<2025.0,>=2023.3",
]
evolve = [
    "ray<3.0.0,>=2.35.0",
    "plotly<6.0.0,>=5.19.0",
    "joblib<2.0.0,>=1.3.2",
]
dev = [
    "ipykernel<7.0.0,>=6.29.5",
]

```

The error:

```
(boxmot) ➜  tracking git:(uv-pkg-manager) ✗ uv sync --group yolo
Resolved 172 packages in 0.86ms
  × Failed to download and build `yolox==0.3.0`
  ╰─▶ Build backend failed to determine requirements with `build_wheel()` (exit status: 1)

      [stdout]
      [WARNING] Unable to import torch, pre-compiling ops will be disabled.

      [stderr]
      Traceback (most recent call last):
        File "<string>", line 14, in <module>
        File "/Users/mikel.brostrom/.cache/uv/builds-v0/.tmpJlALhd/lib/python3.11/site-packages/setuptools/build_meta.py", line 334, in get_requires_for_build_wheel
          return self._get_build_requires(config_settings, requirements=[])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "/Users/mikel.brostrom/.cache/uv/builds-v0/.tmpJlALhd/lib/python3.11/site-packages/setuptools/build_meta.py", line 304, in _get_build_requires
          self.run_setup()
        File "/Users/mikel.brostrom/.cache/uv/builds-v0/.tmpJlALhd/lib/python3.11/site-packages/setuptools/build_meta.py", line 522, in run_setup
          super().run_setup(setup_script=setup_script)
        File "/Users/mikel.brostrom/.cache/uv/builds-v0/.tmpJlALhd/lib/python3.11/site-packages/setuptools/build_meta.py", line 320, in run_setup
          exec(code, locals())
        File "<string>", line 77, in <module>
        File "<string>", line 50, in get_ext_modules
      AssertionError: torch is required for pre-compiling ops, please install it first.

  help: `yolox` (v0.3.0) was included because `boxmot:yolo` (v12.0.2) depends on `yolox`
```

I thought:

```
[build-system]
requires = ["pdm-backend", "torch"]
build-backend = "pdm.backend"
```

Would fix this issue as torch is needed for building yolox

### Platform

macSO 15.1

### Version

uv 0.5.8 (80d41671b 2024-12-11)

---

_Label `question` added by @mikel-brostrom on 2025-04-01 16:19_

---

_Comment by @charliermarsh on 2025-04-01 16:23_

Those are the build dependencies for _your_ package (`boxmot`). All of your dependencies will be built in isolation per the standards. You need to install that package with build isolation _disabled_. See the docs here: https://docs.astral.sh/uv/concepts/projects/config/#build-isolation

---

_Comment by @mikel-brostrom on 2025-04-01 16:25_

Thank for your quick response @charliermarsh! 

---

_Comment by @mikel-brostrom on 2025-04-01 16:26_

Amazing,

```
[tool.uv]
no-build-isolation-package = ["yolox"]
```

Fixed it!

---

_Closed by @mikel-brostrom on 2025-04-01 16:26_

---

_Comment by @mikel-brostrom on 2025-04-01 16:27_

Amazing package by the way. It has been a blessing to upgrade from poetry given my relatively complex dependencies

---
