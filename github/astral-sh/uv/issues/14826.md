---
number: 14826
title: "Can't use dependency group as build dependency"
type: issue
state: closed
author: saagarjha
labels:
  - question
assignees: []
created_at: 2025-07-22T17:51:53Z
updated_at: 2025-07-22T18:20:54Z
url: https://github.com/astral-sh/uv/issues/14826
synced_at: 2026-01-07T12:31:16-06:00
---

# Can't use dependency group as build dependency

---

_Issue opened by @saagarjha on 2025-07-22 17:51_

### Summary

If I use a dependency group in the build system's requirements list, uv can't seem to find it. For example, for this sample project:

```toml
[project]
name = "test"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.10"
dependencies = [
	"group",
]

[build-system]
requires = [
	"setuptools",
	"group",
]

[dependency-groups]
group = [
	"sampleproject",
]
```

I get the following:

```console
$ uv sync -v
DEBUG uv 0.8.1
DEBUG Found project root: `/tmp/test`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `/tmp/test`
DEBUG Reading Python requests from version file at `/tmp/test/.python-version`
DEBUG Using Python request `3.10` from version file at `.python-version`
DEBUG Checking for Python environment at: `.venv`
DEBUG The project environment's Python version satisfies the request: `Python 3.10`
DEBUG Released lock at `/tmp/uv-6607c6ec3562e781.lock`
DEBUG Acquired lock for `.venv`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: test @ file:///tmp/test
DEBUG No workspace root found, using project root
DEBUG Ignoring existing lockfile due to mismatched requirements for: `test==0.1.0`
  Requested: {Requirement { name: PackageName("group"), extras: [], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([]), index: None, conflict: None }, origin: None }}
  Existing: {Requirement { name: PackageName("test"), extras: [], groups: [], marker: true, source: Registry { specifier: VersionSpecifiers([]), index: None, conflict: None }, origin: None }}
DEBUG Solving with installed Python version: 3.10
DEBUG Solving with target Python version: >=3.10
DEBUG Adding direct dependency: test*
DEBUG Adding direct dependency: test:group*
DEBUG Searching for a compatible version of test @ file:///tmp/test (*)
DEBUG Adding direct dependency: group*
DEBUG Searching for a compatible version of test @ file:///tmp/test (*)
DEBUG Adding direct dependency: test:group==0.1.0
DEBUG Searching for a compatible version of test @ file:///tmp/test (==0.1.0)
DEBUG Adding direct dependency: sampleproject*
DEBUG Found fresh response for: https://pypi.org/simple/group/
DEBUG Found fresh response for: https://pypi.org/simple/sampleproject/
DEBUG Searching for a compatible version of group (*)
DEBUG No compatible version found for: group
DEBUG Recording unit propagation conflict of group from incompatibility of (test)
DEBUG Searching for a compatible version of test @ file:///tmp/test (<0.1.0 | >0.1.0)
DEBUG No compatible version found for: test
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/d7/73/c16e5f3f0d37c60947e70865c255a58dc408780a6474de0523afd0ec553a/sampleproject-4.0.0-py3-none-any.whl.metadata
  × No solution found when resolving dependencies:
  ╰─▶ Because there are no versions of group and your project depends on group, we can conclude that your project's requirements are unsatisfiable.
DEBUG Released lock at `/tmp/test/.venv/.lock`
```

### Platform

Linux 6.8.0-1013-nvidia-64k aarch64 GNU/Linux

### Version

uv 0.8.1

### Python version

Python 3.10.0

---

_Label `bug` added by @saagarjha on 2025-07-22 17:51_

---

_Comment by @charliermarsh on 2025-07-22 17:53_

I don't think this is allowed by the PEP. You can't self-reference a dependency group like that.

---

_Label `bug` removed by @charliermarsh on 2025-07-22 17:53_

---

_Label `question` added by @charliermarsh on 2025-07-22 17:53_

---

_Comment by @zanieb on 2025-07-22 17:56_

Yeah this is not allowed by the standard. The closest thing that was considered was https://peps.python.org/pep-0735/#why-not-support-dependency-group-includes-in-project-dependencies-or-project-optional-dependencies

---

_Comment by @saagarjha on 2025-07-22 18:16_

Huh, ok. I guess this is works as intended then. Closing with sadness :(

---

_Closed by @saagarjha on 2025-07-22 18:16_

---

_Comment by @saagarjha on 2025-07-22 18:20_

Actually, while you're still around, do you happen to have any suggestions for the pattern of "I use some packages in setup.py and also my project itself, I'd like to not have to define them twice"?

---
