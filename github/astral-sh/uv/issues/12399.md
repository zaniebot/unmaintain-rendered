---
number: 12399
title: Rebuild C Extensions only on change
type: issue
state: closed
author: imanoid
labels:
  - question
assignees: []
created_at: 2025-03-23T01:15:51Z
updated_at: 2025-04-01T20:26:03Z
url: https://github.com/astral-sh/uv/issues/12399
synced_at: 2026-01-07T12:31:15-06:00
---

# Rebuild C Extensions only on change

---

_Issue opened by @imanoid on 2025-03-23 01:15_

I have a workspace with several python projects containing c++ extensions. Setuptools is configured as the build system.

When working with `uv sync`, I need to supply the `--reinstall` or `--refresh` option (together with `--all-packages`) so that the C extensions are built. 

When using `--reinstall`, the C extensions are rebuilt every time, even if the c code did not change between executions.
When using `--refresh`, the C extensions are only built on the first call. Further calls don't trigger a rebuild, even if the c code changed.
When using none of these flags, the C extensions are not built.

The behaviour of `uv sync --reinstall` also seems to be consistent with `uv pip install --editable .`

Now when using `python setup.py build_ext -i`, the build is executed if the extension has not been built or if the source code changed. If the c source code is still the same, it won't trigger a rebuild.

I wanted to ask, if you could add the option to use `uv sync` in a similar way? Only rebuild the c extensions whose source code has changed since the last build call.

---

_Label `enhancement` added by @imanoid on 2025-03-23 01:15_

---

_Comment by @charliermarsh on 2025-03-23 13:09_

You can achieve a similar effect with cache keys: https://docs.astral.sh/uv/reference/settings/#cache-keys

---

_Comment by @imanoid on 2025-03-23 17:34_

This solved the problem. Thanks for the hint!

---

_Comment by @imanoid on 2025-04-01 11:39_

Are there any plans for `uv sync` to automatically watch the input files defined in the `setuptools` build steps?

---

_Comment by @zanieb on 2025-04-01 20:24_

@imanoid no, I don't think we'll special case anything build-backend specific.

---

_Label `enhancement` removed by @zanieb on 2025-04-01 20:24_

---

_Label `question` added by @zanieb on 2025-04-01 20:24_

---

_Comment by @imanoid on 2025-04-01 20:26_

ok. then i'll close the request.

---

_Closed by @imanoid on 2025-04-01 20:26_

---
