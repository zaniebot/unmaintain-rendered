---
number: 6292
title: Use action/cache in GitHub Actions docs
type: issue
state: closed
author: simonw
labels:
  - documentation
assignees: []
created_at: 2024-08-21T00:54:42Z
updated_at: 2024-09-05T00:30:21Z
url: https://github.com/astral-sh/uv/issues/6292
synced_at: 2026-01-07T12:31:14-06:00
---

# Use action/cache in GitHub Actions docs

---

_Issue opened by @simonw on 2024-08-21 00:54_

These docs currently suggest: https://docs.astral.sh/uv/guides/integration/github/
```yaml
    steps:
      - uses: actions/checkout@v4

      - name: Set up uv
        # Install a specific uv version using the installer
        run: curl -LsSf https://astral.sh/uv/0.3.0/install.sh | sh
```
I’m not a fan of that pattern without caching - it feels wasteful to download from outside the GitHub network on every run, plus an `astral.sh` outage would break my builds.

It would be nice if this example used `action/cache` to avoid duplicate downloads where possible.

---

_Comment by @simonw on 2024-08-21 00:56_

Alternatively this recipe could use this URL instead:

https://github.com/astral-sh/uv/releases/download/0.3.0/uv-installer.sh

Which would at least keep all network traffic within GitHub.

---

_Assigned to @zanieb by @charliermarsh on 2024-08-21 02:07_

---

_Label `documentation` added by @charliermarsh on 2024-08-21 02:07_

---

_Label `cache` added by @charliermarsh on 2024-08-21 02:07_

---

_Label `cache` removed by @zanieb on 2024-08-21 03:04_

---

_Comment by @zanieb on 2024-08-21 03:05_

I think we'll probably provide a `setup-uv` action in the future that manages installation, presumably that could handle caching. I'm pretty hesitant to complicate the integration guide here, but am willing to consider using `action/cache` in a subsequent example if you want to share how you would do it.

---

_Comment by @simonw on 2024-08-21 03:24_

`setup-uv` action would be fantastic - or even getting `uv` into the default runner, but that's GitHub's call.

I messed around with caching a bit and [got this to work](https://github.com/simonw/playing-with-actions-single/blob/09040ddd30c0a85d03d4d4c472def0a32a23fef6/.github/workflows/uv.yaml):
```yaml
name: uv example

on:
  workflow_dispatch:

jobs:
  uv-example:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - id: cache-cargo-bin
      uses: actions/cache@v4
      with:
        path: ~/.cargo/bin
        key: ${{ runner.os }}-cargo-bin
    - id: cache-uv-python
      uses: actions/cache@v4
      with:
        path: ~/.local/share/uv
        key: ${{ runner.os }}-uv-python
    - name: Install uv
      if: steps.cache-cargo-bin.outputs.cache-hit != 'true'
      run: |
        curl -LsSf https://astral.sh/uv/0.3.0/install.sh | sh
    - name: Run uv
      run: |
        python -c 'import sys; print("Before:", sys.version)'
        uv python install
        uv run python -c 'import sys; print(sys.version)'
```
The second time I ran that the output looked like this, showing the cache working:

![CleanShot 2024-08-20 at 20 22 53@2x](https://github.com/user-attachments/assets/bc52e100-3e8a-4799-bfa7-1c0f7e66aafc)

There may be ways to make this shorter and tighter.

---

_Comment by @skshetry on 2024-08-21 03:49_

I have been using https://github.com/hynek/setup-cached-uv, and it's been working well for me. :)

---

_Comment by @zanieb on 2024-08-21 12:33_

Note that `setup-cached-uv` is different in that it persists the uv cache to GitHub. 

---

_Comment by @simonw on 2024-08-21 14:52_

An official Astral version of that reusable Action would be really neat. My interest is primarily in avoiding hitting external network resources for repeat runs of my CI builds.

---

_Comment by @danielhollas on 2024-08-21 17:23_

> I’m not a fan of that pattern without caching - it feels wasteful to download from outside the GitHub network on every run, plus an astral.sh outage would break my builds.

Given Github Actions track record I'd honestly be more wary of github cache outage in this case. :-D 

But more seriously, I am curious if measured any speed difference between these approaches?

---

_Comment by @zanieb on 2024-08-21 18:29_

uv seems to download and install in [~1 second](https://github.com/astral-sh/packse/actions/runs/10316016498/job/28557350216)

---

_Comment by @zanieb on 2024-09-05 00:30_

Resolved by #7056 

---

_Closed by @zanieb on 2024-09-05 00:30_

---
