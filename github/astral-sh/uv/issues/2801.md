---
number: 2801
title: Cannot install extras from pyproject.toml and poetry
type: issue
state: closed
author: bschoenmaeckers
labels:
  - bug
assignees: []
created_at: 2024-04-03T10:09:14Z
updated_at: 2024-04-03T15:23:27Z
url: https://github.com/astral-sh/uv/issues/2801
synced_at: 2026-01-07T12:31:14-06:00
---

# Cannot install extras from pyproject.toml and poetry

---

_Issue opened by @bschoenmaeckers on 2024-04-03 10:09_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

Given the following pyproject.toml, `uv pip install -r pyproject.toml` work great but  `uv pip install -r pyproject.toml --extra test` gives an error.
`error: Requested extra not found: test`

It feels like this is a bug.

```toml
[tool.poetry]
name = "poetry-extras"
version = "0.1.0"
description = ""
authors = ["Astral Software Inc. <hey@astral.sh>"]

[tool.poetry.dependencies]
python = "^3.10"
anyio = "^4"
pytest = { version = "*", optional = true }

[tool.poetry.extras]
test = ["pytest"]

[build-system]
requires = ["poetry-core"]
build-backend = "poetry.core.masonry.api"

```


---

_Renamed from "Cannot install extra's from pyproject.toml and poetry" to "Cannot install extras from pyproject.toml and poetry" by @AlexWaygood on 2024-04-03 10:12_

---

_Comment by @bschoenmaeckers on 2024-04-03 12:53_

Removing the check at [pip_install.rs:407-423](https://github.com/astral-sh/uv/blob/0.1.28/crates/uv/src/commands/pip_install.rs#L407-L423) fixes the problem.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-04-03 13:23_

---

_Label `bug` added by @charliermarsh on 2024-04-03 13:23_

---

_Referenced in [astral-sh/uv#2811](../../astral-sh/uv/pulls/2811.md) on 2024-04-03 15:17_

---

_Closed by @charliermarsh on 2024-04-03 15:23_

---
