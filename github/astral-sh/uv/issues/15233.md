---
number: 15233
title: "\"import setuptools\" fails due to missing distutils"
type: issue
state: closed
author: Rick-McCoy
labels:
  - bug
assignees: []
created_at: 2025-08-12T09:03:39Z
updated_at: 2025-08-12T13:58:26Z
url: https://github.com/astral-sh/uv/issues/15233
synced_at: 2026-01-07T12:31:16-06:00
---

# "import setuptools" fails due to missing distutils

---

_Issue opened by @Rick-McCoy on 2025-08-12 09:03_

### Summary

This issue occurs on a Kubernetes pod in which I do not have admin privileges.

```bash
<snip>$ mkdir temp
<snip>$ cd temp
<snip>/temp$ uv init
Initialized project `temp`
<snip>/temp$ uv venv .venv
Using CPython 3.13.5
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
<snip>/temp$ uv add setuptools
Resolved 2 packages in 5ms
░░░░░░░░░░░░░░░░░░░░ [0/1] Installing wheels...
warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.
         If the cache and target directories are on different filesystems, hardlinking may not be supported.
         If this is intentional, set `export UV_LINK_MODE=copy` or use `--link-mode=copy` to suppress this warning.
Installed 1 package in 2.94s
 + setuptools==80.9.0
<snip>/temp$ uv run -q python -c "import setuptools"
<snip>/temp/.venv/lib/python3.13/site-packages/_distutils_hack/__init__.py:53: UserWarning: Reliance on distutils from stdlib is deprecated. Users must rely on setuptools to provide the distutils module. Avoid importing distutils or import setuptools first, and avoid setting SETUPTOOLS_USE_DISTUTILS=stdlib. Register concerns at https://github.com/pypa/setuptools/issues/new?template=distutils-deprecation.yml
  warnings.warn(
Traceback (most recent call last):
  File "<string>", line 1, in <module>
    import setuptools
  File "<snip>/temp/.venv/lib/python3.13/site-packages/setuptools/__init__.py", line 23, in <module>
    from . import logging, monkey
  File "<snip>/temp/.venv/lib/python3.13/site-packages/setuptools/logging.py", line 5, in <module>
    from . import monkey
  File "<snip>/temp/.venv/lib/python3.13/site-packages/setuptools/monkey.py", line 13, in <module>
    import distutils.filelist
ModuleNotFoundError: No module named 'distutils'
```

When I search online on how to mitigate `distutils` deprecation issues, I always get told to install `setuptools`. But simply installing and importing setuptools leads to an error due to missing `distutils`, which seems paradoxical.

I have tried to replicate this on a local Macbook, but despite having the same `uv` version (0.8.9) and Python version (3.13.5), no such errors occur, and `setuptools` imports without a hitch.

### Platform

Linux 4.18.0-372.9.1.el8.x86_64 x86_64 GNU/Linux

### Version

uv 0.8.9

### Python version

Python 3.13.5

---

_Label `bug` added by @Rick-McCoy on 2025-08-12 09:03_

---

_Comment by @Rick-McCoy on 2025-08-12 09:05_

This also fails with Python 3.12.11 with the same error.
As a sanity check, no problems occur with Python 3.11.13.

---

_Comment by @zanieb on 2025-08-12 13:38_

`distutils` was removed from the standard library https://docs.python.org/3/library/distutils.html

Hence the warnings etc.

I don't actually see an obvious reason why this would fail on your Kubernetes cluster and not your local machine. I'd recommend reporting this to setuptools, not sure what we can do here.




---

_Comment by @Rick-McCoy on 2025-08-12 13:58_

It seems you're right. The issue was with my machine, not `uv`.
For future reference, unsetting `SETUPTOOLS_USE_DISTUTILS` worked as a fix.

---

_Closed by @Rick-McCoy on 2025-08-12 13:58_

---
