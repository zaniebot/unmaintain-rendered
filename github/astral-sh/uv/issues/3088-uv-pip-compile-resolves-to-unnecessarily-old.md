---
number: 3088
title: "uv pip compile: resolves to unnecessarily old versions of yamlpath and ruamel.yaml"
type: issue
state: closed
author: AndydeCleyre
labels: []
assignees: []
created_at: 2024-04-17T05:36:38Z
updated_at: 2024-04-17T15:20:42Z
url: https://github.com/astral-sh/uv/issues/3088
synced_at: 2026-01-07T13:12:17-06:00
---

# uv pip compile: resolves to unnecessarily old versions of yamlpath and ruamel.yaml

---

_Issue opened by @AndydeCleyre on 2024-04-17 05:36_

Hello, and thanks!

This is on Ubuntu 22.04.

`requirements.in`:

```
cattrs
nestedtext
plumbum
rich
ruamel.yaml
yamlpath
```

```console
$ uv --version
uv 0.1.31
$ uv pip compile --no-header --annotation-style=line -U requirements.in -o uv.txt
$ pip-compile --version
pip-compile, version 7.4.1
$ pip-compile --no-header --annotation-style=line -U requirements.in -o pip-tools.txt
$ diff -u pip-tools.txt uv.txt
```

```diff
--- pip-tools.txt	2024-04-17 01:24:37.815365304 -0400
+++ uv.txt	2024-04-17 01:24:23.219134399 -0400
@@ -1,15 +1,16 @@
 arrow==1.3.0              # via inform
 attrs==23.2.0             # via cattrs
-cattrs==23.2.3            # via -r requirements.in
+cattrs==23.2.3
 inform==1.28              # via nestedtext
 markdown-it-py==3.0.0     # via rich
 mdurl==0.1.2              # via markdown-it-py
-nestedtext==3.6           # via -r requirements.in
-plumbum==1.8.2            # via -r requirements.in
+nestedtext==3.6
+plumbum==1.8.2
 pygments==2.17.2          # via rich
-python-dateutil==2.9.0.post0  # via arrow, yamlpath
-rich==13.7.1              # via -r requirements.in
-ruamel-yaml==0.17.21      # via -r requirements.in, yamlpath
+python-dateutil==2.9.0.post0  # via arrow
+rich==13.7.1
+ruamel-yaml==0.18.6       # via yamlpath
+ruamel-yaml-clib==0.2.8   # via ruamel-yaml
 six==1.16.0               # via inform, python-dateutil
 types-python-dateutil==2.9.0.20240316  # via arrow
-yamlpath==3.8.2           # via -r requirements.in
+yamlpath==3.4.0
```

I tried to put the verbose output here in a fold, but GitHub complained that the message body was too long.

---

_Comment by @charliermarsh on 2024-04-17 13:43_

The tricky thing here is that this is (presumedly) also a valid resolution, and some of the packages in the uv resolution _are_ at newer versions (e.g., `ruamel-yaml` was bumped). I assume if you set `ruamel-yaml==0.17.21` in your requirements, we yield the same resolution? I do in my testing:

```
# This file was autogenerated by uv via the following command:
#    uv pip compile requirements.in
arrow==1.3.0
    # via inform
attrs==23.2.0
    # via cattrs
cattrs==23.2.3
inform==1.28
    # via nestedtext
markdown-it-py==3.0.0
    # via rich
mdurl==0.1.2
    # via markdown-it-py
nestedtext==3.6
plumbum==1.8.2
pygments==2.17.2
    # via rich
python-dateutil==2.9.0.post0
    # via
    #   arrow
    #   yamlpath
rich==13.7.1
ruamel-yaml==0.17.21
    # via yamlpath
six==1.16.0
    # via
    #   inform
    #   python-dateutil
types-python-dateutil==2.9.0.20240316
    # via arrow
yamlpath==3.8.2
```

---

_Comment by @AndydeCleyre on 2024-04-17 14:32_

Oh whoops, I misread the output and didn't realize ruamel.yaml was newer instead of older. Without looking right now, probably newer yamlpath versions hold back the ruamel.yaml dependency.

So this all makes sense and when I'm back at a computer I'll force a high minimum version for yamlpath and all should be good.

Thanks!

---

_Comment by @AndydeCleyre on 2024-04-17 15:16_

Yup, it's all cleared up now, thanks again.

---

_Closed by @AndydeCleyre on 2024-04-17 15:16_

---

_Comment by @charliermarsh on 2024-04-17 15:20_

No problem! Glad to help :)

---
