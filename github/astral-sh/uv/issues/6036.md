---
number: 6036
title: "Installing managed python with different mounts of `.local` and `.cache` fails."
type: issue
state: closed
author: msw-kialo
labels:
  - bug
  - preview
assignees: []
created_at: 2024-08-12T14:21:41Z
updated_at: 2024-08-12T20:15:31Z
url: https://github.com/astral-sh/uv/issues/6036
synced_at: 2026-01-07T12:31:14-06:00
---

# Installing managed python with different mounts of `.local` and `.cache` fails.

---

_Issue opened by @msw-kialo on 2024-08-12 14:21_

I have dedicated volumes mounted on `~/.cache` and `~/.local`: so `uv` fails to move files between them.
I know it is probably a rare setup, but I like having better control about these important directories.

```
> uv python install 3.12.4 --verbose
DEBUG uv 0.2.35
DEBUG Acquired lock for `~/.local/share/uv/python`
Searching for Python versions matching: Python 3.12.4
DEBUG Using request timeout of 30s
DEBUG Downloading https://github.com/indygreg/python-build-standalone/releases/download/20240726/cpython-3.12.4%2B20240726-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz to temporary location: ~/.cache/uv/.tmpChAkwk
DEBUG Extracting cpython-3.12.4%2B20240726-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz
DEBUG Moving ~/.cache/uv/.tmpChAkwk/python to ~/.local/share/uv/python/cpython-3.12.4-linux-x86_64-gnu
error: Failed to install cpython-3.12.4-linux-x86_64-gnu: Failed to copy to: ~/.local/share/uv/python/cpython-3.12.4-linux-x86_64-gnu
```

The error message of `uv lock` (in a project that requires installing python) is a bit more detailed:

```sh
> uv lock
error: Failed to copy to: ~/.local/share/uv/python/cpython-3.12.4-linux-x86_64-gnu
  Caused by: failed to rename file from ~/.cache/uv/.tmpUQC45r/python to ~/.local/share/uv/python/cpython-3.12.4-linux-x86_64-gnu
  Caused by: Invalid cross-device link (os error 18)
```

---

_Label `bug` added by @charliermarsh on 2024-08-12 14:35_

---

_Label `preview` added by @charliermarsh on 2024-08-12 14:35_

---

_Assigned to @charliermarsh by @charliermarsh on 2024-08-12 14:38_

---

_Comment by @charliermarsh on 2024-08-12 15:43_

Thanks for reporting -- we should definitely be robust to this.

---

_Referenced in [astral-sh/uv#6043](../../astral-sh/uv/pulls/6043.md) on 2024-08-12 19:53_

---

_Closed by @charliermarsh on 2024-08-12 20:15_

---

_Referenced in [astral-sh/uv#9749](../../astral-sh/uv/issues/9749.md) on 2024-12-09 23:06_

---
