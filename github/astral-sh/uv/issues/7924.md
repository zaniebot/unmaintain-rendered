---
number: 7924
title: "Allow `extra-index-url` config value to be overridden"
type: issue
state: open
author: richardcooper
labels: []
assignees: []
created_at: 2024-10-04T11:27:39Z
updated_at: 2025-06-24T20:19:15Z
url: https://github.com/astral-sh/uv/issues/7924
synced_at: 2026-01-07T12:31:15-06:00
---

# Allow `extra-index-url` config value to be overridden

---

_Issue opened by @richardcooper on 2024-10-04 11:27_

I have an `extra-index-url` config setting in the `[tool.uv.pip]` section of `pyproject.toml`. I'd like to be able to completely override it using env-vars or similar. That doesn't seem to be possible currently because:

- `extra-index-url` is a list of strings
- When `uv` gets multiple values for a list config item (in this case both from `pyproject.toml` and env-vars) then it will concatenate them.

Could there be some way to override `extra-index-url` rather than concatenate to it?

To reproduce:

```console
$ uv --version            
uv 0.4.18 (7b55e9790 2024-10-01)

$ cat pyproject.toml
[tool.uv.pip]
extra-index-url = [
    "https://localhost/no_repo",
]

$ UV_EXTRA_INDEX_URL="https://REDACTED_PYPI_SERVER/simple" uv pip install "attrs" --no-cache         
â ¼ Resolving dependencies...                                                                                                                                                                         error: Request failed after 3 retries
  Caused by: error sending request for url (https://localhost/no_repo/attrs/)
  Caused by: client error (Connect)
  Caused by: tcp connect error: Connection refused (os error 61)
  Caused by: Connection refused (os error 61)
```

Here `uv` is checking my private PyPI server (URL redacted), finding that it does not contain `attrs`, then checking `https://localhost/no_repo` and failing with a connection error. That's understandable and expected behaviour. 

The problem is that there doesn't seem to be a way to prevent `uv` from trying to connect to the broken `https://localhost/no_repo` short of editing the `pyproject.toml` file.

I'm currently working around this problem by using `export UV_NO_CONFIG=true`. That works as long as `[tool.uv.pip]` is simple. However it's a fragile workaround. I can't only override `extra-index-url` it has to be either all uv config or none of it and in my real use-case there is more config to consider.

Why do I want to do this:

I'm in a corporate environment where we have our own PyPI repository for private packages. That repo has one URL which works internally (behind our firewall) and a different one which works externally. We have the internal URL in `[tool.uv.pip]` so that it works on developer machines with no configuration. In our CI/CD environment the internal URL fails and we need to override it to use the external one.



---

_Comment by @prebeta on 2025-06-24 20:19_

Interestingly, it looks like they changed the behavior to append to the `pyproject.toml` configuration in https://github.com/astral-sh/uv/issues/3541

---
