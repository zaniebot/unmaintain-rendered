---
number: 13039
title: PEP 571 tests hardcode Python 3.12.10
type: issue
state: closed
author: mgorny
labels:
  - bug
  - testing
assignees: []
created_at: 2025-04-22T03:07:46Z
updated_at: 2025-04-22T09:24:04Z
url: https://github.com/astral-sh/uv/issues/13039
synced_at: 2026-01-07T12:31:15-06:00
---

# PEP 571 tests hardcode Python 3.12.10

---

_Issue opened by @mgorny on 2025-04-22 03:07_

### Summary

I'm seeing the following test failures in 0.6.15 (with `--no-default-features --features git,pypi,python`):

```
failures:
    pip_compile::pep_751_compile_directory
    pip_compile::pep_751_compile_git
    pip_compile::pep_751_compile_no_emit_package
    pip_compile::pep_751_compile_non_universal
    pip_compile::pep_751_compile_path_sdist
    pip_compile::pep_751_compile_path_wheel
    pip_compile::pep_751_compile_preferences
    pip_compile::pep_751_compile_registry_sdist
    pip_compile::pep_751_compile_registry_wheel
    pip_compile::pep_751_compile_url_sdist
    pip_compile::pep_751_compile_url_wheel
    pip_compile::pep_751_compile_warn
```

They all seem to stem from the test assuming exact Python 3.12.9, and not being marked as `python-managed`:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Snapshot Summary ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Snapshot: pep_751_compile_url_sdist
Source: crates/uv/tests/it/pip_compile.rs:16585
────────────────────────────────────────────────────────────────────────────────
Expression: snapshot
────────────────────────────────────────────────────────────────────────────────
-old snapshot
+new results
────────────┬───────────────────────────────────────────────────────────────────
    3     3 │ # This file was autogenerated by uv via the following command:
    4     4 │ #    uv pip compile --cache-dir [CACHE_DIR] requirements.txt --universal -o pylock.toml
    5     5 │ lock-version = "1.0"
    6     6 │ created-by = "uv"
    7       │-requires-python = ">=3.12.9"
          7 │+requires-python = ">=3.12.10"
    8     8 │ 
    9     9 │ [[packages]]
   10    10 │ name = "anyio"
   11    11 │ version = "4.3.0"
────────────┴───────────────────────────────────────────────────────────────────
```

### Platform

Gentoo Linux amd64

### Version

0.6.15

### Python version

3.12.10

---

_Label `bug` added by @mgorny on 2025-04-22 03:07_

---

_Comment by @zanieb on 2025-04-22 03:12_

Thanks for the report! Not sure what the best way to handle this is — we can either mark them all was requiring the `python-patch` feature or filter the patch version (the latter seems more reasonable). We already have patch version filtering, not sure why it didn't apply here.

---

_Label `testing` added by @zanieb on 2025-04-22 03:12_

---

_Referenced in [astral-sh/uv#13047](../../astral-sh/uv/pulls/13047.md) on 2025-04-22 08:34_

---

_Closed by @konstin on 2025-04-22 08:43_

---

_Closed by @konstin on 2025-04-22 08:43_

---

_Renamed from "PEP 571 tests hardcode" to "PEP 571 tests hardcode Python 3.12.10" by @mgorny on 2025-04-22 09:22_

---

_Comment by @mgorny on 2025-04-22 09:24_

Thanks!

Since similar issues are occurring pretty frequently, would there be an option to include a CI workflow that uses most recent Python versions instead of the pinned ones?

---
