---
number: 10440
title: Install failed with uv but works with regular python
type: issue
state: closed
author: thewh1teagle
labels:
  - question
assignees: []
created_at: 2025-01-09T18:32:34Z
updated_at: 2025-01-16T09:25:51Z
url: https://github.com/astral-sh/uv/issues/10440
synced_at: 2026-01-07T12:31:15-06:00
---

# Install failed with uv but works with regular python

---

_Issue opened by @thewh1teagle on 2025-01-09 18:32_

With uv (failed)

```console
uv venv -p 3.12
uv pip install --no-cache --refresh librosa==0.10.2.post1 --force-reinstall
```

Error 

```console
error: Failed to prepare distributions
  Caused by: Failed to download and build `llvmlite==0.36.0`
  Caused by: Build backend failed to determine requirements with `build_wheel()` (exit status: 1)

[stderr]
Traceback (most recent call last):
  File "<string>", line 14, in <module>
  File "/private/var/folders/k6/b4k6mjy92dxbm_l2my6zzlnm0000gn/T/.tmpg2Mr97/builds-v0/.tmp7sA06J/lib/python3.12/site-packages/setuptools/build_meta.py", line 334, in get_requires_for_build_wheel
    return self._get_build_requires(config_settings, requirements=[])
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/private/var/folders/k6/b4k6mjy92dxbm_l2my6zzlnm0000gn/T/.tmpg2Mr97/builds-v0/.tmp7sA06J/lib/python3.12/site-packages/setuptools/build_meta.py", line 304, in _get_build_requires
    self.run_setup()
  File "/private/var/folders/k6/b4k6mjy92dxbm_l2my6zzlnm0000gn/T/.tmpg2Mr97/builds-v0/.tmp7sA06J/lib/python3.12/site-packages/setuptools/build_meta.py", line 522, in run_setup
    super().run_setup(setup_script=setup_script)
  File "/private/var/folders/k6/b4k6mjy92dxbm_l2my6zzlnm0000gn/T/.tmpg2Mr97/builds-v0/.tmp7sA06J/lib/python3.12/site-packages/setuptools/build_meta.py", line 320, in run_setup
    exec(code, locals())
  File "<string>", line 55, in <module>
  File "<string>", line 52, in _guard_py_ver
RuntimeError: Cannot install on Python version 3.12.8; only versions >=3.6,<3.10 are supported.

```

With python (works)

```console
brew install python@3.12   
python3.12 -m venv venv
source venv/bin/activate
pip install --no-cache librosa==0.10.2.post1
```

macOS M1 macOS 14.5

Related:

- https://github.com/librosa/librosa/issues/1896#issuecomment-2581001434

---

_Comment by @davidmarttila on 2025-01-09 18:42_

I've run into this issue before as well, I'm not sure what exactly causes it but it must be something in the dependency resolution of `numba` and `llvmlite`.

As a workaround, try explicitly installing numba first:

```
uv venv -p 3.12
uv pip install numba
uv pip install librosa
```

---

_Comment by @thewh1teagle on 2025-01-09 19:11_

> I've run into this issue before as well, I'm not sure what exactly causes it but it must be something in the dependency resolution of `numba` and `llvmlite`.
> 
> As a workaround, try explicitly installing numba first:

The issue happens in package that I created, currenly I pinned numba version

https://github.com/thewh1teagle/kokoro-onnx

---

_Comment by @notatallshaw on 2025-01-09 19:13_

I can't reproduce on Linux, but it looks like uv is backtracking to a version of llvmlite your platform doesn't support, uv downloads the source distribution, it doesn't compile and it fails.

A workaround that might work would be to use `--only-binary llvmlite`, or maybe even `--only-binary :all:` if no source distributions are required at all, forcing uv to not select source distributions that might fail.


---

_Comment by @thewh1teagle on 2025-01-09 19:18_

It might be off-topic, but does anyone know why these packages pin to specific Python versions, forcing users to compile them every time? As far as I know, Python's ABI doesnâ€™t change that frequently (does he?). So why do they create wheels for each specific Python version? It's so hard to maintain this way.

---

_Comment by @davidmarttila on 2025-01-09 19:43_

@thewh1teagle I tested this a bit more and it seems to only occur on `uv 0.5.9` and older for me. The issue goes away after upgrading `uv` to the latest version.

---

_Label `question` added by @zanieb on 2025-01-09 21:42_

---

_Comment by @charliermarsh on 2025-01-10 03:38_

uv doesn't respect upper-bounds on `requires-python`. Our stance is that `requires-python` is intended to indicate minimum Python version compatibility. There's a lot of discussion around that elsewhere -- here's one reference that links to a few more: https://github.com/astral-sh/uv/issues/4022#issuecomment-2148505055.

---

_Closed by @charliermarsh on 2025-01-10 03:38_

---

_Comment by @notatallshaw on 2025-01-10 04:03_

I hadn't thought of that, because the error is coming from setuptools I just took it for "having backtracked too far". 

If uv did respect upper bounds would it have skipped over this version because it makes the simplifying assumption that metadata is consistent between wheels and sdists?

---

_Comment by @jamesdeluk on 2025-01-16 08:17_

I'm having a similar issue with `llvmlite` when trying to install https://github.com/santinic/audiblez

> As a workaround, try explicitly installing numba first:
> 
> ```
> uv venv -p 3.12
> uv pip install numba
> uv pip install librosa
> ```

This works and enables audiblez to be installed.

However, audiblez is run as a tool (from my understanding of `uv` - i.e., it's run from the command line `>audiblez blah blah`). It's not possible to `uv tool install numba` as it's not a tool, meaning audiblez also cannot be.

Am I doing something wrong, or is it not working / a bug?

EDIT: Solved with `uv tool install --with numba audiblez --prerelease=allow --python 3.12`

---

_Referenced in [astral-sh/uv#10664](../../astral-sh/uv/issues/10664.md) on 2025-01-16 15:07_

---

_Referenced in [astral-sh/uv#4022](../../astral-sh/uv/issues/4022.md) on 2025-09-18 09:11_

---
