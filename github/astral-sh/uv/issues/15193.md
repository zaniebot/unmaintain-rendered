---
number: 15193
title: using --no-sources with --no-install-project causes uv sync to fail when version is set dynamically
type: issue
state: open
author: BartekSzpak
labels:
  - bug
assignees: []
created_at: 2025-08-09T17:09:43Z
updated_at: 2025-08-09T17:09:43Z
url: https://github.com/astral-sh/uv/issues/15193
synced_at: 2026-01-07T12:31:16-06:00
---

# using --no-sources with --no-install-project causes uv sync to fail when version is set dynamically

---

_Issue opened by @BartekSzpak on 2025-08-09 17:09_

### Summary

Hi UV Team and community, 

It looks to me like uv requires a build backend to work properly when using `--no-install-project` together with `--no-sources` while it is not needed when using `--no-install-project` option alone. This affects the scenario where project version is defined based on VCS but .git folder is not available, for example when building docker images.

Suppose you have a basic project with following `pyproject.toml` which uses dynamic versioning:
```toml
[build-system]
requires = ["hatchling>1.16.0"]
build-backend = "hatchling.build"

[project]
name = "checkuv"
dynamic = [
  "version"
]

requires-python = ">=3.11"
dependencies = [
    "dynaconf",
    "numpy"
]

[tool.hatch.version]
path = "src/checkuv/__init__.py"

[tool.uv.sources]
numpy = { path = "../numpy", editable = true }
```
A `numpy` folder is a dummy python project (using common library so something well-known gets downloaded when running with `--no-sources` option)

I run:
`uv lock`,`uv sync`,`uv sync --no-install-project`,
and all works as expected. 
I then copy `uv.lock` and `pyproject.toml` to a new folder to emulate installation of project dependencies only (as in a docker container, similar as in the uv-docker-example repo). In the new folder I run `uv sync --no-install-project` and it works with no issues.

But when I try to run `uv sync --no-install-project --no-sources` it fails with the error: 
```bash
error: Failed to generate package metadata for `checkuv @ editable+.`
  Caused by: The build backend returned an error
  Caused by: Call to `hatchling.build.prepare_metadata_for_build_editable` failed (exit status: 1)
```

This is unexpected to me. Maybe it is related to a recent issue: https://github.com/astral-sh/uv/issues/15190 ?

Would appreciate any support on this.


### Platform

macOS 15.6 arm64

### Version

uv 0.8.8

### Python version

Python 3.12.9

---

_Label `bug` added by @BartekSzpak on 2025-08-09 17:09_

---
