---
number: 14969
title: uv tool private index masked password leads to 401 on uv tool upgrade
type: issue
state: closed
author: fellnerse
labels:
  - bug
assignees: []
created_at: 2025-07-30T12:24:08Z
updated_at: 2025-07-31T02:04:00Z
url: https://github.com/astral-sh/uv/issues/14969
synced_at: 2026-01-07T12:31:16-06:00
---

# uv tool private index masked password leads to 401 on uv tool upgrade

---

_Issue opened by @fellnerse on 2025-07-30 12:24_

### Summary

How to reproduce:
add tool from private index:
```fish
uv tool install aurora-cli --index https://VssSessionToken:$UV_INDEX_PASSWORD@pkgs.dev.azure.com/xxx --prerelease=allow
```
Try to upgrade package:
```fish
uv tool upgrade aurora-cli --reinstall
```
Fails with 401 because of authentication error to index. when I have a look at the `uv-receipg.toml` file I can see that the password is masked:

```toml
[tool]
requirements = [{ name = "aurora-cli" }]
entrypoints = [
    { name = "aurora", install-path = "xxx" },
]

[tool.options]
index = [{ url = "https://VssSessionToken:****@pkgs.dev.azure.com/xxx", explicit = false, default = false, format = "simple", authenticate = "auto" }]
prerelease = "allow"
```

Note that the `***` are actually written like that to the file.
Not sure why this happens, but when I replace the *** with the actual secrets everything works.



### Platform

Darwin 24.5.0 arm64

### Version

uv 0.7.4

### Python version

Python 3.12.4

---

_Label `bug` added by @fellnerse on 2025-07-30 12:24_

---

_Comment by @zanieb on 2025-07-30 12:54_

Upgrade uv, we fixed this already.

---

_Closed by @charliermarsh on 2025-07-31 02:03_

---

_Comment by @charliermarsh on 2025-07-31 02:04_

Fixed in #14855.

---
