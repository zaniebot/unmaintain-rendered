---
number: 11574
title: Workspace common dependencies
type: issue
state: closed
author: Shuricks2015
labels:
  - question
assignees: []
created_at: 2025-02-17T09:13:49Z
updated_at: 2025-03-04T15:07:10Z
url: https://github.com/astral-sh/uv/issues/11574
synced_at: 2026-01-07T12:31:15-06:00
---

# Workspace common dependencies

---

_Issue opened by @Shuricks2015 on 2025-02-17 09:13_

### Question

I would like to use workspaces in a monorepo for easier handling and simultaneous updating of shared dependencies. The projects in my workspace are completely independent from one another and only have a set of common dependencies that I want to track & update in the workspace root pyproject.toml. 

Unfortunately the dependencies of the workspace root are not installed when I run my Dockerfile. 

My project structure looks like this as a minimal example:
root (workspace root)
|  pyproject.toml
|  uv.lock
|  docker-compose.yml
|  project1
|  |  pyproject.toml
|  |  main.py
|  |  Dockerfile
|  project2
...

The example workspace root pyproject.toml:
```
[project]
name = "testuv"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.13"
dependencies = [
    "retry>=0.9.2",
]

[tool.uv.workspace]
members = ["project1", "project2"]
```

The example pyproject.toml of project1:
```
[project]
name = "project1"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.13"
dependencies = [
    "defusedxml>=0.7.1",
]
```

Now when I run the following Dockerfile: 
```dockerfile
FROM python:3.13-slim-bookworm
# Copy over UV from their distroless image
COPY --from=ghcr.io/astral-sh/uv:0.6.0 /uv /uvx /bin/
ENV UV_COMPILE_BYTECODE=1 UV_LINK_MODE=copy

# Disable Python downloads, because we want to use the system interpreter
# across both images. If using a managed Python version, it needs to be
# copied from the build image into the final image;
ENV UV_PYTHON_DOWNLOADS=0

WORKDIR /app

RUN --mount=type=cache,target=/root/.cache/uv \
    --mount=type=bind,source=uv.lock,target=uv.lock,ro,from=root \
    --mount=type=bind,source=pyproject.toml,target=pyproject.toml,ro \
    uv sync --frozen --no-install-workspace --no-dev

# copy over code and only the required files. Do not COPY . .
ADD . /app

RUN --mount=type=cache,target=/root/.cache/uv \
    --mount=type=bind,source=uv.lock,target=uv.lock,ro,from=root \
    uv sync --frozen --no-dev

CMD ["uv", "pip", "list"]
``` 

I only have the dependency of the project1 installed, but not the dependency of the workspace root. 

![Image](https://github.com/user-attachments/assets/ef244800-e8aa-40ab-b4bf-bd0402eea14f)

Is there a command flag that is used to also install the dependencies of the workspace root? This would make managing the common dependencies for the projects in my monorepo significantly easier. 

### Platform

Windows 11 x86_64

### Version

uv 0.6.0

---

_Label `question` added by @Shuricks2015 on 2025-02-17 09:13_

---

_Comment by @charliermarsh on 2025-02-18 14:36_

You need to add `"project1"` and `"project2"` as dependencies of `testuv` -- otherwise, `uv sync` is only going to install the dependencies of the workspace root. (`uv sync` here is equivalent to `uv sync -p testuv`: it syncs the package at the workspace root.)

Alternatively, you could use `uv sync --all-packages`, though I'd recommend making the dependencies explicit here.

---

_Comment by @Shuricks2015 on 2025-02-18 15:07_

Thanks for the reply. Unfortunately that does not what I want to accomplish. 
After adding `"project1"` and `"project2"` to the dependencies of testuv the Dockerfile of project1 still only installs defusedxml.

With `uv sync --all-packages` I install the dependencies of every project/package, which I also don't want. This would lead to a bloated docker image because I don't need numpy for `"project1"`.

Maybe I should have made my goal more clear. I want to have the following packages installed after I build the above mentioned Dockerfile of `"project1"`:
```
defusedxml>=0.7.1
retry>=0.9.2
```



---

_Comment by @charliermarsh on 2025-02-18 15:34_

In that case, I think you would need to add the dependencies to the `pyproject.toml` in `project1`. There's no way to "inherit" dependencies from the workspace root like that. I guess you could do: `uv sync --frozen --no-dev --package testuv` and then `uv sync --frozen --no-dev --package project1 --inexact` (with `--inexact` to avoid removing the `testuv` dependencies). But I wouldn't consider that a recommended workflow.


---

_Comment by @Shuricks2015 on 2025-02-18 15:47_

Okay thanks a lot. Then I will just duplicate the common dependencies over the projects. 

Is this "inheritance" of dependencies something you might add? Maybe in a similar fashion as you did it with ruff with the `extend` option. 

---

_Comment by @konstin on 2025-02-27 13:29_

We're mostly limited by PEP 621 here, which wants dependencies to be tracked per-project. You can run `uv add <...>` in each member project to quickly add dependencies. If the member projects aren't distributed, one option is to have plain requirements without version bounds in the member and only keep the version bounds in the root pyproject.toml.

---

_Closed by @Shuricks2015 on 2025-03-02 13:05_

---

_Comment by @luisdibdin on 2025-03-04 15:07_

Would following something similar to this: [https://docs.astral.sh/uv/guides/integration/aws-lambda/#workspace-support](url) be useful for you? So exporting the requirements.txt for the root pyproject.toml and the member pyproject.toml and then using `uv pip install ...` 

---
