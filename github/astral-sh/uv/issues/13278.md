---
number: 13278
title: "When does `uv pip` create a `REQUESTED` file?"
type: issue
state: open
author: notatallshaw
labels:
  - compatibility
  - needs-decision
assignees: []
created_at: 2025-05-03T18:48:12Z
updated_at: 2025-09-25T13:34:05Z
url: https://github.com/astral-sh/uv/issues/13278
synced_at: 2026-01-07T12:31:16-06:00
---

# When does `uv pip` create a `REQUESTED` file?

---

_Issue opened by @notatallshaw on 2025-05-03 18:48_

I was looking to write a small script that would be used in a one-liner with uv pip compile and uv pip sync to help people with the request in https://github.com/astral-sh/uv/issues/1419

I was going to do this by extracting the packages with a `REQUESTED` which was [introduced in PEP 376](https://peps.python.org/pep-0376/#one-dist-info-directory-per-installed-distribution) but the [latest spec](https://packaging.python.org/en/latest/specifications/recording-installed-packages/#the-dist-info-directory) says:

> The previous versions of this specification also specified a REQUESTED file. This file is now considered a tool-specific extension, but may be standardized again in the future. See [PEP 376](https://www.python.org/dev/peps/pep-0376/#requested) for its original meaning.

Anyway, here is a MRE script:

```python
import importlib.metadata

for dist in importlib.metadata.distributions():
    requested_marker = [path for path in dist.files if path.match('*dist-info/REQUESTED')]
    if requested_marker:
        print(dist.name)
```

And when you create a fresh environment with pip in it:

```
$ pip install requests
...
Successfully installed certifi-2025.4.26 charset-normalizer-3.4.2 idna-3.10 requests-2.32.3 urllib3-2.4.0

$ python requested-packages.py
pip
requests
```

And when you create a fresh environment and use uv pip:

```
$ uv pip install requests
Resolved 5 packages in 56ms
Installed 5 packages in 23ms
...

$ python requested-packages.py
certifi
idna
charset-normalizer
urllib3
requests
```

I'm not sure if this is a bug and must be fixed or a design issue and should be added to the pip compatability docs?

---

_Renamed from "When does `uv pip` created a `REQUESTED` file?" to "When does `uv pip` create a `REQUESTED` file?" by @notatallshaw on 2025-05-03 18:51_

---

_Comment by @charliermarsh on 2025-05-04 12:37_

I think we write it for everything, based on my read of the code? I feel like we should probably _never_ write it given the above -- what do you think?

---

_Label `compatibility` added by @charliermarsh on 2025-05-04 12:37_

---

_Label `needs-decision` added by @charliermarsh on 2025-05-04 12:37_

---

_Comment by @notatallshaw on 2025-05-04 14:28_

Well for pip compatibility you should write it only for packages the user has explicitly requested, not dependencies. Although I've not thought about the edge cases, e.g you install B and then you install A which requires a different version of B.

But never writing it is probably better than always writing it. 

---

_Referenced in [pypa/pip#13430](../../pypa/pip/issues/13430.md) on 2025-06-18 20:27_

---

_Comment by @notatallshaw on 2025-09-25 13:34_

I still think uv should change it's behavior here. Either don't create a `REQUESTED` file or only create it for top level requests, not transitive dependencies.

---
