---
number: 14105
title: "confusing error message for `uv lock --check`"
type: issue
state: closed
author: RmStorm
labels:
  - bug
  - help wanted
  - error messages
assignees: []
created_at: 2025-06-17T12:27:11Z
updated_at: 2025-11-10T17:36:50Z
url: https://github.com/astral-sh/uv/issues/14105
synced_at: 2026-01-07T12:31:16-06:00
---

# confusing error message for `uv lock --check`

---

_Issue opened by @RmStorm on 2025-06-17 12:27_

### Summary

When running `uv lock --check` the error message for an out of date lock file is a bit confusing:
```python
âžœ uv lock --check
Resolved 288 packages in 1.77s
error: The lockfile at `uv.lock` needs to be updated, but `--locked` was provided. To update the lockfile, run `uv lock`.
```
It says `--locked` was provided but it obviously wasn't.. `--check` was!

Given the docs [here](https://docs.astral.sh/uv/concepts/projects/sync/#checking-if-the-lockfile-is-up-to-date) the message is somewhat understandable I guess?
  > You can check if the lockfile is up-to-date by passing the --check flag to uv lock:
  > `uv lock --check`
  > This is equivalent to the --locked flag for other commands.

Even though the error message makes some sense given the context of the docs I feel like a better error message should be provided.

### Platform

Linux 5.15.0-141-generic x86_64 GNU/Linux

### Version

uv 0.7.3

### Python version

Python 3.12.9

---

_Label `bug` added by @RmStorm on 2025-06-17 12:27_

---

_Comment by @zanieb on 2025-06-17 13:29_

Yeah, I'm not sure if this is easy to fix but it'd be nice to.

---

_Label `error messages` added by @zanieb on 2025-06-17 13:29_

---

_Label `help wanted` added by @zanieb on 2025-06-17 13:29_

---

_Referenced in [astral-sh/uv#16322](../../astral-sh/uv/pulls/16322.md) on 2025-10-15 18:27_

---

_Comment by @cmnemoi on 2025-10-15 19:01_

> Yeah, I'm not sure if this is easy to fix but it'd be nice to.

@zanieb

This is indeed not straightforward, as the `lock` command only receive a `locked` boolean if `--locked` or `--check` is passed.

I think an "ok" fix would be to change the error message to : 

```bash
The lockfile at `uv.lock` needs to be updated, but `--locked` or `--check` was provided. To update the lockfile, run `uv lock`.
```

I've done this in https://github.com/astral-sh/uv/pull/16322. 

Error messages for `uv sync --locked` and `uv run --locked` are not modified.


---

_Closed by @zanieb on 2025-10-21 17:46_

---

_Comment by @RmStorm on 2025-11-10 17:36_

woohoo! Great work there @cmnemoi ðŸŽ‰ ! And thanks to @zanieb for the review of course ðŸ˜„ 

---
