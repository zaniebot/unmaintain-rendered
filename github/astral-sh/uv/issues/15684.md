---
number: 15684
title: "`uv pip install` refuses to install `cu118` version of pytorch"
type: issue
state: closed
author: PaulScemama
labels:
  - bug
assignees: []
created_at: 2025-09-04T16:26:25Z
updated_at: 2025-09-05T01:08:38Z
url: https://github.com/astral-sh/uv/issues/15684
synced_at: 2026-01-07T12:31:16-06:00
---

# `uv pip install` refuses to install `cu118` version of pytorch

---

_Issue opened by @PaulScemama on 2025-09-04 16:26_

### Summary

Dockerfile reproducing:

```
FROM ubuntu:22.04

COPY --from=ghcr.io/astral-sh/uv:latest /uv /uvx /bin/

ARG UV_INDEX
ENV UV_INDEX=${UV_INDEX}


RUN uv venv --python 3.11
RUN uv pip install torch==2.4.0 -f https://download.pytorch.org/whl/cu118
```

```bash
 => [stage-0 4/4] RUN uv pip install torch==2.4.0 -f https://download.pytorch.org/whl/cu118                                                                                             20.5s
 => => #  Downloading sympy
 => => #  Downloading nvidia-cusolver-cu12
 => => #  Downloading nvidia-cufft-cu12
 => => #  Downloading nvidia-cusparse-cu12
 => => #  Downloading nvidia-nccl-cu12
 => => #  Downloading triton
```



### Platform

ubuntu:22.04

### Version

0.8.15

### Python version

Python 3.11

---

_Label `bug` added by @PaulScemama on 2025-09-04 16:26_

---

_Comment by @charliermarsh on 2025-09-04 16:30_

Sorry, what's the bug here exactly? Where is the error?

---

_Comment by @charliermarsh on 2025-09-04 16:43_

Do you mean `--extra-index-url https://download.pytorch.org/whl/cu118`? `https://download.pytorch.org/whl/cu118` is not a valid `--find-links`-style URL.

---

_Comment by @PaulScemama on 2025-09-04 18:25_

sorry for the late response! And thank you for such a quick one! Sorry about that, you're absolutely right this was user error. 

---

_Closed by @PaulScemama on 2025-09-04 18:25_

---

_Comment by @PaulScemama on 2025-09-04 18:26_

Could you point in the right direction to understand the distinction of `--find-links` and `--extra-index-url`? 

---

_Comment by @PaulScemama on 2025-09-04 20:12_

@charliermarsh sorry to bother again, but had a follow up question. I think what I was initially seeing had to do with an issue on our side.

The context is that we use a CodeArtifact to effectively have our own PyPI server. 

The headline is that when I set `UV_INDEX` to point to our private PyPI and try and install torch with cu118, uv will instead try and install cu121.

Here is a minimal example: first a Dockerfile which works as intended; this will properly install cuda 11.8 with torch:

```
FROM ubuntu:22.04

COPY --from=ghcr.io/astral-sh/uv:latest /uv /uvx /bin/

# ARG UV_INDEX
# ENV UV_INDEX=${UV_INDEX}

RUN uv venv --python 3.11
RUN uv pip install torch==2.4.0 --extra-index-url https://download.pytorch.org/whl/cu118
```

I ran this with `docker build -f Dockerfile --no-cache .`

Now here's a new Dockerfile:

```
FROM ubuntu:22.04

COPY --from=ghcr.io/astral-sh/uv:latest /uv /uvx /bin/

ARG UV_INDEX
ENV UV_INDEX=${UV_INDEX}

RUN uv venv --python 3.11
RUN uv pip install torch==2.4.0 --extra-index-url https://download.pytorch.org/whl/cu118
```
If I run `docker build -f Dockerfile.test --build-arg UV_INDEX=<our-private-index-url> --no-cache .`, this this will try and install torch with cuda 12.1 (even though I specify the index url that points to a wheel with cu118).

My initial suspicion is that maybe our private CodeArtifact has the wrong underlying wheel whose pointer is `https://download.pytorch.org/whl/cu118`? However, I'm really no expert with this sort of stuff so was wondering if you had any insight.

Absolutely no worries if not! Thanks again.

---

_Comment by @PaulScemama on 2025-09-05 01:08_

@charliermarsh turned out to be an issue on our PyPI server. 

---
