---
number: 1207
title: "A `uv run` subcommand"
type: issue
state: closed
author: konstin
labels:
  - enhancement
assignees: []
created_at: 2024-01-31T15:57:19Z
updated_at: 2024-05-13T18:13:36Z
url: https://github.com/astral-sh/uv/issues/1207
synced_at: 2026-01-07T12:31:14-06:00
---

# A `uv run` subcommand

---

_Issue opened by @konstin on 2024-01-31 15:57_

In the initial implementation, the `puffin run` subcommand looks for a venv in `.venv` in the current or any parent directory, activates it by setting `VIRTUAL_ENV` and `PATH` and then replaces itself with the python interpreter with the trailing args (on unix, it might be faster to not spawn a new process but load libpython and run `Py_Main`).

In further steps we can extend this to read pyproject.toml, create a venv if none exists, install all (missing) dependencies and run. This enables a "git clone and puffin run" workflow where the user does not need to manually handle venvs and dependency installation anymore. `puffin run` could replace `python` as batteries-included entrypoint for running python code.

---

_Label `enhancement` added by @konstin on 2024-01-31 15:57_

---

_Renamed from "A `puffin run` subcommand" to "A `uv run` subcommand" by @zanieb on 2024-02-15 19:51_

---

_Comment by @zanieb on 2024-02-15 19:51_

xref #1173 


---

_Comment by @henryiii on 2024-02-16 04:09_

This would support PEP 721? One issue with `pipx run` is it prioritizes classic PyPI apps, so `pipx run file.py` will look for a `file-py` on PyPI. So `uv run file.py` could run a local file, wile `uv pipx run` could be the PyPI one.

---

_Comment by @konstin on 2024-02-20 10:38_

Good question! I'm wondering how to handle conflicts. If a file contains a PEP 723 comment and exists in a uv workspace (with a pyproject.toml with uv configuration), should `uv run` use the inline metadata or the workspace metadata?

---

_Comment by @henryiii on 2024-02-20 13:28_

I believe the inline metadata should override the more general config. It’s the same way I’d hope Ruff support for PEP 723 would work, it’s a way to put per file config in the files. Like the matching feature in Rust (that partially inspired the PEP).

---

_Referenced in [astral-sh/uv#2027](../../astral-sh/uv/issues/2027.md) on 2024-02-28 02:56_

---

_Referenced in [astral-sh/uv#1173](../../astral-sh/uv/issues/1173.md) on 2024-02-29 15:35_

---

_Comment by @pfmoore on 2024-03-19 11:32_

I agree that PEP 723 metadata should take precedence. An obvious use case I would have for a feature like this would be to write small "workflow support" scripts in my project directory. These would have their own dependencies, and could very easily not share any dependencies with the project itself (imagine, for example, a `make_docs.py` script that depended on Sphinx). Such scripts would be a lightweight alternative to a tool like nox.

---

_Assigned to @zanieb by @zanieb on 2024-04-14 16:21_

---

_Comment by @zanieb on 2024-05-13 18:13_

See https://github.com/astral-sh/uv/pull/3074 for the initial implementation of this.

#3096 tracks PEP 723 support.

---

_Closed by @zanieb on 2024-05-13 18:13_

---

_Referenced in [astral-sh/uv#3096](../../astral-sh/uv/issues/3096.md) on 2024-05-13 18:14_

---
