---
number: 4296
title: "`uv lock` does not respect `Requires-Python` in a virtual workspace"
type: issue
state: closed
author: charliermarsh
labels:
  - bug
  - preview
assignees: []
created_at: 2024-06-13T02:09:59Z
updated_at: 2024-06-13T12:55:58Z
url: https://github.com/astral-sh/uv/issues/4296
synced_at: 2026-01-07T12:31:14-06:00
---

# `uv lock` does not respect `Requires-Python` in a virtual workspace

---

_Issue opened by @charliermarsh on 2024-06-13 02:09_

E.g., `uv lock` is using 3.9.18 on my machine, even tough the workspace members need `>=3.12`:

```
DEBUG uv 0.2.11 (98200f603 2024-06-12)
DEBUG Found workspace root: `/Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace`
DEBUG Adding discovered workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/albatross
DEBUG Adding discovered workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/bird-feeder
DEBUG Adding discovered workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/seeds
DEBUG Searching for Python interpreter in search path or managed toolchains
DEBUG Searching for managed toolchains at `/Users/crmarsh/Library/Application Support/uv/toolchains`
DEBUG Found managed toolchain `cpython-3.9.18-macos-aarch64-none`
DEBUG Found CPython 3.9.18 at `/Users/crmarsh/Library/Application Support/uv/toolchains/cpython-3.9.18-macos-aarch64-none/install/bin/python3` (managed toolchains)
Using Python 3.9.18 interpreter at: /Users/crmarsh/Library/Application Support/uv/toolchains/cpython-3.9.18-macos-aarch64-none/install/bin/python3
DEBUG Using request timeout of 30s
DEBUG Acquired lock for `/Users/crmarsh/Library/Caches/uv/built-wheels-v3/editable/4d7e988190cb115e`
DEBUG Acquired lock for `/Users/crmarsh/Library/Caches/uv/built-wheels-v3/editable/3f2bbb9c9e2bf8dd`
DEBUG Acquired lock for `/Users/crmarsh/Library/Caches/uv/built-wheels-v3/editable/9a7a50e0b657b561`
DEBUG Preparing metadata for: albatross @ file:///Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/albatross
DEBUG Preparing metadata for: bird-feeder @ file:///Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/bird-feeder
DEBUG Preparing metadata for: seeds @ file:///Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/seeds
DEBUG No static `PKG-INFO` available for: albatross @ file:///Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/albatross (MissingPkgInfo)
DEBUG No static `PKG-INFO` available for: bird-feeder @ file:///Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/bird-feeder (MissingPkgInfo)
DEBUG No static `PKG-INFO` available for: seeds @ file:///Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/seeds (MissingPkgInfo)
DEBUG Found static `pyproject.toml` for: albatross @ file:///Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/albatross
DEBUG Found static `pyproject.toml` for: bird-feeder @ file:///Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/bird-feeder
DEBUG Found static `pyproject.toml` for: seeds @ file:///Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/seeds
DEBUG Found workspace root: `/Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace`
DEBUG Adding current workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/albatross
DEBUG Found workspace root: `/Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace`
DEBUG Adding current workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/bird-feeder
DEBUG Found workspace root: `/Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace`
DEBUG Adding current workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/seeds
DEBUG Adding discovered workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/bird-feeder
DEBUG Adding discovered workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/albatross
DEBUG Adding discovered workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/albatross
DEBUG Adding discovered workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/seeds
DEBUG Adding discovered workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/seeds
DEBUG Adding discovered workspace member: /Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/bird-feeder
DEBUG Solving with installed Python version: 3.9.18
DEBUG Solving with target Python version: >=3.12
DEBUG Adding direct dependency: albatross*
DEBUG Adding direct dependency: bird-feeder*
DEBUG Adding direct dependency: seeds*
DEBUG Searching for a compatible version of albatross @ file:///Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/albatross (*)
DEBUG No compatible version found for: Python
DEBUG Searching for a compatible version of albatross @ file:///Users/crmarsh/workspace/uv/scripts/workspaces/albatross-virtual-workspace/packages/albatross (<0.1.0 | >0.1.0)
DEBUG No compatible version found for: albatross
  × No solution found when resolving dependencies:
  ╰─▶ Because the current Python version (3.9.18) does not satisfy Python>=3.12 and albatross==0.1.0 depends on Python>=3.12, we can conclude that albatross==0.1.0 cannot be used.
      And because only albatross==0.1.0 is available and you require albatross, we can conclude that the requirements are unsatisfiable.
```

---

_Label `preview` added by @charliermarsh on 2024-06-13 02:10_

---

_Assigned to @charliermarsh by @charliermarsh on 2024-06-13 02:32_

---

_Referenced in [astral-sh/uv#4298](../../astral-sh/uv/pulls/4298.md) on 2024-06-13 02:38_

---

_Label `bug` added by @charliermarsh on 2024-06-13 02:48_

---

_Closed by @charliermarsh on 2024-06-13 12:55_

---
