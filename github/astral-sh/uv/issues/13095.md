---
number: 13095
title: Can I make a script accessible across all directories within a python monorepo using uv?
type: issue
state: open
author: jbcoe
labels:
  - question
assignees: []
created_at: 2025-04-25T00:45:36Z
updated_at: 2025-05-05T11:49:44Z
url: https://github.com/astral-sh/uv/issues/13095
synced_at: 2026-01-07T12:31:16-06:00
---

# Can I make a script accessible across all directories within a python monorepo using uv?

---

_Issue opened by @jbcoe on 2025-04-25 00:45_

### Question

I have a python monorepo with a top-level `pyproject.toml`. The monorepo contains a projects directory each with its own python package and `pyproject.toml` file. Some of these projects define scripts:

```
[project.script]
aaa = "aaa.something:main"
```

Within the given project directory, I can run the script with `uv run aaa`. Outside of the project directory the script cannot be found.

What can I do to make the project script accessible with `uv run` across the workspace?

### Platform

Mac but reproducible on Linux and presumably Windows too.

### Version

uv 0.7.2 (Homebrew 2025-04-30)


---

_Label `question` added by @jbcoe on 2025-04-25 00:45_

---

_Comment by @konstin on 2025-04-25 07:11_

What is the content of the top level `pyproject.toml`? For a script to be accessible, the package containing it must be installed, which seems to be missing here.

---

_Comment by @jbcoe on 2025-04-25 07:56_

I've tried to follow https://docs.astral.sh/uv/concepts/projects/workspaces/ which suggests a top-level non-installable pyproject.toml. This pyproject.toml file is used to add workspace members and store common config for tools like ruff and mypy.

I can run a script that's defined in a project directory with:

`uv run --project project/aaa_project aaa`

but that's unpleasantly verbose and I'd rather do something like: `uv run aaa`.

Maybe we could set an entry in the top level (workspace) project file to define workspace scripts? 

```
[tool.uv.workspace.scripts]
scripts = [...]
```

That's not currently supported and I am hoping there's an easier way to concisely run a script defined in a workspace project.

---

_Comment by @konstin on 2025-04-28 10:16_

When you run `uv sync`, does the project defining `aaa` get installed, and if not, what is installed?

---

_Comment by @jbcoe on 2025-05-05 09:38_

> When you run `uv sync`, does the project defining `aaa` get installed, and if not, what is installed?

That depends on which project I'm in when I run `uv sync`. Running `uv sync` will install dependencies and scripts for the package I'm in. Running `uv sync --all-packages` will install every script so that's a working solution but I'm conscious that it might be a bit heavyweight if some of the packages need compilation steps. 

Ideally I'd like a workspace-level scripts or tools solution.

---

_Comment by @konstin on 2025-05-05 10:12_

Does placing the package with the script in the [default-groups](https://docs.astral.sh/uv/reference/settings/#default-groups) of the workspace root work for you?

---

_Comment by @jbcoe on 2025-05-05 10:30_

The script is defined in another `pyproject.toml` file rather than as part of a dependency group in the workspace root. I'm not sure how I'd go about adding a project to default-groups.

Workspace root project file: 

```
[project]
name = "xyz-workspace"
version = "0.1.0"
description = "A simple command line chat application to test a monorepo with uv and uv-workspaces"
readme = "README.md"
requires-python = "==3.12.*"

[dependency-groups]
dev = ["mypy>=1.15.0", "pytest>=8.3.5", "ruff>=0.11.2"]

[tool.uv]
package = false
default-groups = ["command-line"]

[tool.uv.workspace]
members = ["core", "command-line", "api"]

[tool.uv.sources]
xyz-core = { workspace = true }
command-line = { workspace = true }
xyz-api = { workspace = true }
```

Sub-project project file

```
[project]
name = "xyz-command-line"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
dependencies = [
    "types-requests>=2.31.0",
    "requests>=2.31.0",
    "xyz-core",
]

[project.scripts]
greet = "xyz.command_line.client:main"

[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"

[tool.setuptools]
package-dir = {"" = "src"}

[tool.pytest.ini_options]
python_files = "*_test.py"

[project.optional-dependencies]
dev = [
    "pytest>=8.0.0",
    "pytest-cov>=4.1.0",
]
```

Error using default-groups

```
error: Default group `command-line` (from `tool.uv.default-groups`) is not defined in the project's `dependency-groups` table
```

---

_Comment by @konstin on 2025-05-05 10:43_

This is an example structure that uses dependency groups to make a workspace member be installed by default:

```
tree
.
├── packages
│   └── script_provider
│       ├── pyproject.toml
│       ├── README.md
│       └── src
│           └── script_provider
│               ├── __init__.py
│               └── py.typed
├── pyproject.toml
└── uv.lock
```

Top-level `pyproject.toml`:

```toml
[project]
name = "xyz-workspace"
version = "0.1.0"
requires-python = ">=3.12"

[tool.uv.workspace]
members = ["packages/*"]

[tool.uv.sources]
script_provider = { workspace = true }

[tool.uv]
default-groups = ["scripts"]

[dependency-groups]
scripts = ["script_provider"]
```

script_provider `pyproject.toml`:

```toml
[project]
name = "script-provider"
version = "0.1.0"
requires-python = ">=3.13"

[project.scripts]
aaa = "script_provider:say_hi"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"
```

Running `uv sync` in the root installs the script provider package and the script:

```
$ uv sync
Resolved 2 packages in 2ms
Installed 1 package in 12ms
 + script-provider==0.1.0 (from file:///.../packages/script_provider)
$ aaa
Hello from script-provider!
```

---

_Comment by @jbcoe on 2025-05-05 11:49_

Nice, that works well in the root but won't apply to other packages. If `uv sync` is run from fresh in a workspace member package then `aaa` won't be found. 

I _could_ repeat the above for all workspace packages where I might want to run the script, but I'd rather define scripts to be run on a workspace level. I appreciate that this might not be possible.

---
