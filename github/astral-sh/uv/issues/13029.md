---
number: 13029
title: "Add `--no-deps` support when installing via `uv run --with <pkg>`?"
type: issue
state: open
author: LewisGaul
labels:
  - enhancement
assignees: []
created_at: 2025-04-21T22:49:10Z
updated_at: 2025-12-31T18:47:38Z
url: https://github.com/astral-sh/uv/issues/13029
synced_at: 2026-01-07T12:31:15-06:00
---

# Add `--no-deps` support when installing via `uv run --with <pkg>`?

---

_Issue opened by @LewisGaul on 2025-04-21 22:49_

### Summary

Currently `uv run` supports installing specified packages under `--with`, but does not support `--no-deps` to prevent installing their dependencies.

### Example

This is probably quite a niche use-case, but here it is:
```bash
PACKAGE=python_on_whales
uv run --with $PACKAGE --reinstall -- python3 -c "import importlib.metadata; print('Package $PACKAGE:', importlib.metadata.version('$PACKAGE'))"
```
That is, I was hoping to use `uv run` as a one-liner to get a package's metadata (and for this there's no need to install the package's dependencies).

I realise this information is available at `<download_url>.metadata` for pypi.org, e.g. `https://files.pythonhosted.org/packages/<XX>/<XX>/<XXX...>/<pkg>-<version>-py3-none-any.whl.metadata`, however other PyPI instances such as Artifactory may not implement this, and packages may be installed from other sources.

My current workaround is to do it in three steps, something like this:
```bash
cd "$MY_TEMP_DIR"
uv venv --quiet
uv pip install $PACKAGE -p .venv/bin/python3 --no-deps
.venv/bin/python3 -c "import importlib.metadata; print('Package $PACKAGE:', importlib.metadata.version('$PACKAGE'))"
rm -r "$MY_TEMP_DIR"
```

Of course this could alternatively be supported via a dedicated new command such as `uv search $PACKAGE --metadata`, `uv package metadata $PACKAGE --json`, ...

---

_Label `enhancement` added by @LewisGaul on 2025-04-21 22:49_

---

_Comment by @zanieb on 2025-04-22 01:37_

Yeah, I think we'll just want to expose other ways to get package metadata â€” I'm not comfortable with the pattern of installing packages without their dependencies.

---

_Comment by @LewisGaul on 2025-04-22 08:48_

I guess the `--no-deps` flag was mainly added for pip compatibility, and I can understand not wanting it on all commands.

Shall I rephrase the issue to be around exposing package metadata, or close and open a new one? 

---
