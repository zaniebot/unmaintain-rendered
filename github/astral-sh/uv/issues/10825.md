---
number: 10825
title: Unable to install pytorch audio with very simple pyproject.toml
type: issue
state: closed
author: zackees
labels:
  - bug
assignees: []
created_at: 2025-01-21T20:47:01Z
updated_at: 2025-01-21T21:21:05Z
url: https://github.com/astral-sh/uv/issues/10825
synced_at: 2026-01-07T12:31:15-06:00
---

# Unable to install pytorch audio with very simple pyproject.toml

---

_Issue opened by @zackees on 2025-01-21 20:47_

### Summary

I can execute `uv pip install torch torchaudio --index-url https://download.pytorch.org/whl/cu121`

But the following fails:

```[build-system]
requires = ["setuptools", "wheel"]     
build-backend = "setuptools.build_meta"

[project]
name = "project"
version = "0.1.0"
requires-python = "==3.10.*"
dependencies = [
  "torchaudio==2.2.0+cu121",
  "torch==2.1.2+cu121",
]

[tool.uv.sources]
torch = [
  { index = 'pytorch-cu121'},
]
torchaudio = [
  { index = "pytorch-cu121" },
]
[[tool.uv.index]]
name = "pytorch-cu121"
url = "https://download.pytorch.org/whl/cu121"
explicit = true
```

Other configurations where dependencies:
```
dependencies = [
  "torchaudio==2.2.0",
  "torch==2.1.2",
]
```

Also don't work.

What would be the right pyproject.toml that would do the command above?

### Platform

Windows 10

### Version

uv 0.5.13 (c456bae5e 2024-12-27

### Python version

Python 3.11.5

## Output:

```
$ uv run pwd
warning: `VIRTUAL_ENV=C:\Users\niteris\dev\iso-env/.venv` does not match the project environment path `.venv` and will be ignored
  × No solution found when resolving dependencies:
  ╰─▶ Because torchaudio==2.2.0+cu121 depends on torch==2.2.0 and your project depends on torch==2.1.2+cu121, we can
      conclude that your project and torchaudio==2.2.0+cu121 are incompatible.
      And because your project depends on torchaudio==2.2.0+cu121, we can conclude that your project's requirements are      
      unsatisfiable.
```

---

_Label `bug` added by @zackees on 2025-01-21 20:47_

---

_Comment by @charliermarsh on 2025-01-21 20:50_

What's wrong with:

```toml
requires = ["setuptools", "wheel"]     
build-backend = "setuptools.build_meta"

[project]
name = "project"
version = "0.1.0"
requires-python = "==3.10.*"
dependencies = [
  "torchaudio",
  "torch",
]

[tool.uv.sources]
torch = [
  { index = 'pytorch-cu121'},
]
torchaudio = [
  { index = "pytorch-cu121" },
]

[[tool.uv.index]]
name = "pytorch-cu121"
url = "https://download.pytorch.org/whl/cu121"
explicit = true
```

---

_Comment by @charliermarsh on 2025-01-21 20:51_

(It looks like torchaudio 2.2.0 is not compatible with torch 2.1.2, but you're pinning to those specific versions.)

---

_Comment by @zackees on 2025-01-21 20:53_

Let me try

---

_Comment by @zackees on 2025-01-21 20:54_

Okay that seems to work and now it's downloading. I'll try pinning the dep to the correct one.

---

_Comment by @charliermarsh on 2025-01-21 21:01_

I think they just need to be in sync? Like:

```toml
dependencies = [
  "torchaudio==2.2.0",
  "torch==2.2.0",
]
```

---

_Comment by @zackees on 2025-01-21 21:21_

Works:

```
[build-system]
requires = ["setuptools", "wheel"]     
build-backend = "setuptools.build_meta"

[project]
name = "project"
version = "0.1.0"
requires-python = "==3.10.*"
dependencies = [
  "torchaudio==2.1.2+cu121",
  "torch==2.1.2+cu121",
]

[tool.uv.sources]
torch = [
  { index = 'pytorch-cu121'},
]
torchaudio = [
  { index = "pytorch-cu121" },
]
[[tool.uv.index]]
name = "pytorch-cu121"
url = "https://download.pytorch.org/whl/cu121"
explicit = true
```

---

_Closed by @zackees on 2025-01-21 21:21_

---
