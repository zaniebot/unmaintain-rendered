---
number: 16260
title: "Consider making `uv cache clean` prompt for directories with non-cache contents"
type: issue
state: open
author: charliermarsh
labels:
  - needs-decision
assignees: []
created_at: 2025-10-13T01:02:45Z
updated_at: 2025-11-08T03:11:17Z
url: https://github.com/astral-sh/uv/issues/16260
synced_at: 2026-01-07T12:31:16-06:00
---

# Consider making `uv cache clean` prompt for directories with non-cache contents

---

_Issue opened by @charliermarsh on 2025-10-13 01:02_

If you accidentally set `UV_CACHE_DIR` to some working directory, `uv cache clean` will blow it away, since it's effectively an `rm -rf`. This matches the behavior of other tools (e.g., cargo), but we may want to consider guarding against these outcomes. It's not totally trivial, because `uv cache clean` is intended to clear out contents from _previous_ uv versions -- in other words, `uv cache clean` doesn't have a clear enumeration of "all contents that are part of the uv cache", since there might be other directories or files that were introduced and removed in prior uv versions. However, we could...

1. Always prompt (with the directory name) prior to removal.
2. Prompt if we see directories of files that don't end in `-v\d+` (i.e., a version suffix).
3. Prompt if we don't see a `CACHEDIR.TAG` (since we've always had this).

---

_Label `needs-decision` added by @charliermarsh on 2025-10-13 01:02_

---

_Renamed from "Consider making `uv cache clean prompt` for directories with non-cache contents" to "Consider making `uv cache clean` prompt for directories with non-cache contents" by @charliermarsh on 2025-11-08 03:11_

---
