---
number: 3417
title: "global pip (`--system` ...) doesn't work in GitHub Codespaces"
type: issue
state: closed
author: Malix-Labs
labels:
  - question
assignees: []
created_at: 2024-05-07T13:10:01Z
updated_at: 2024-06-05T12:16:25Z
url: https://github.com/astral-sh/uv/issues/3417
synced_at: 2026-01-07T12:31:14-06:00
---

# global pip (`--system` ...) doesn't work in GitHub Codespaces

---

_Issue opened by @Malix-Labs on 2024-05-07 13:10_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

## Bug

global pip (`--system` ...) doesn't work in GitHub Codespaces

## System

- VSCode:
	Version: 1.89.0
	Commit: b58957e67ee1e712cebf466b995adf4c5307b2bd
	Date: 2024-05-01T02:15:54.732Z
	Browser: Mozilla/5.0 (X11; CrOS x86_64 14541.0.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36
- uv 0.1.39

## Reproduce

1. Open a GitHub Codespace
	- `.devcontainer/devconainer.json`:
		```json
		{
			"name": "Python 3 on Debian 12",
			"image": "mcr.microsoft.com/devcontainers/python:1-3-bookworm",
			"features": {
				"ghcr.io/va-h/devcontainers-features/uv:1": {}
			}
		}
		```
2. Terminal input: `uv pip install prettytable --system`
	_Note: `prettytable` is just an exemple_

## Logs

```log
@Malix-off ➜ /workspaces/Fork (master) $ uv pip install prettytable --system
Resolved 2 packages in 2ms
error: Failed to install: prettytable-3.10.0-py3-none-any.http.whl (prettytable==3.10.0)
  Caused by: failed to create directory `/usr/local/lib/python3.12/site-packages/prettytable-3.10.0.dist-info`
  Caused by: Permission denied (os error 13)
```
_Note: `prettytable` is just an exemple_

---

_Comment by @zanieb on 2024-05-07 13:13_

Hi! It looks you don't have the necessary permissions to write to the system packages?

---

_Label `question` added by @zanieb on 2024-05-07 13:13_

---

_Comment by @charliermarsh on 2024-05-07 13:15_

Probably works in pip because pip falls back to installing with `--user` if the site-packages directory isn't writeable.

---

_Comment by @Malix-Labs on 2024-05-07 13:19_

> Hi! It looks you don't have the necessary permissions to write to the system packages?

Indeed, probably like that in GitHub Codespaces, you're right.

> --user

Is that an equivalent for sync?
```log
@Malix-off ➜ /workspaces/Fork (master) $ uv pip sync requirements.txt --user
error: pip-sync's `--user` is unsupported.
```

---

_Comment by @charliermarsh on 2024-05-07 13:22_

No, we don't support `--user` right now, since it can generally be replaced by a virtual environment. There are some open issues tracking it but we haven't committed to adding it.

---

_Comment by @Malix-Labs on 2024-05-07 13:24_

So what would be the workaround to `pip sync` without virtual environment (devcontainer is a good example)

---

_Comment by @charliermarsh on 2024-05-07 13:34_

I think you basically _need_ to use a virtualenv in that case with uv right now. I believe you _can_ use virtual environments in devcontainers? Like it is possible, right?

---

_Comment by @blueraft on 2024-05-07 13:41_

Running the `devcontainer` as the root user works for me.

```json
 {
 	"name": "Python 3 on Debian 12",
 	"image": "mcr.microsoft.com/devcontainers/python:1-3-bookworm",
 	"features": {
 		"ghcr.io/va-h/devcontainers-features/uv:1": {}
        },
       	"remoteUser": "root"
 }
```


---

_Comment by @Malix-Labs on 2024-05-07 14:27_

> I think you basically _need_ to use a virtualenv in that case with uv right now. I believe you _can_ use virtual environments in devcontainers? Like it is possible, right?

Yep, currently you need a venv to do that, and yep, it is definitely possible, but adds an unnecessary virtual environment bloat (since we're already in a containerized environment)

---

_Comment by @Malix-Labs on 2024-05-07 14:51_

> No, we don't support `--user` right now, since it can generally be replaced by a virtual environment. There are some open issues tracking it but we haven't committed to adding it.

I didn't find any issue about it containing "user" "-u" "--user", do you know if it has been deleted? 

---

_Comment by @charliermarsh on 2024-05-07 14:52_

https://github.com/astral-sh/uv/issues/2077

---

_Comment by @Malix-Labs on 2024-05-07 15:09_

GitHub Codespaces probably doesn't let you access to the devcontainer system (immutability)

In the case of devcontainers, you probably indeed would want to use the `--user` flag (#2077)

---

_Closed by @Malix-Labs on 2024-05-07 15:09_

---

_Referenced in [astral-sh/uv#2333](../../astral-sh/uv/issues/2333.md) on 2024-06-05 12:15_

---
