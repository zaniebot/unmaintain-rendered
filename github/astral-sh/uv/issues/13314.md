---
number: 13314
title: Are seed packages enough to build package in offline mode?
type: issue
state: closed
author: czechnology
labels:
  - question
assignees: []
created_at: 2025-05-06T11:28:10Z
updated_at: 2025-05-06T16:53:03Z
url: https://github.com/astral-sh/uv/issues/13314
synced_at: 2026-01-07T12:31:16-06:00
---

# Are seed packages enough to build package in offline mode?

---

_Issue opened by @czechnology on 2025-05-06 11:28_

### Question

In our current setup, we run checks, tests, packaging etc. in Docker.

During Docker build, we first create a virtualenv including seed packages using `uv venv --seed`. We have network connectivity in this step, so all gets fetched and installed correctly, _including_ the seed packages. We don't include the complete codebase of our app here, on purpose, so that it gets cached in a Docker layer, no matter changes in our code base (except pyproject.toml or lock files).

> #16 0.498 uv venv --seed
> #16 0.617 Using CPython 3.11.10 interpreter at: /var/lang/bin/python3.11
> #16 0.617 Creating virtual environment with seed packages at: .venv
> #16 17.25  + pip==25.1.1
> #16 17.25  + setuptools==80.3.1
> #16 17.25  + wheel==0.45.1
> #16 17.25 uv sync --frozen
> #16 17.31    Building my-app @ file:///app
> #16 18.13       Built my-app @ file:///app
> #16 18.20 Downloading botocore (10.7MiB)
> ...lots of packages...
> #16 93.86 Prepared 80 packages in 1m 16s
> #16 94.07 Installed 80 packages in 207ms
> #16 94.07  + botocore==1.31.53
> ...lots of packages...
> #16 DONE 94.3s

Only then do we copy the whole codebase to the image.

Then, when running the container (without network access), we try to perform actions on the code, such as linting or testing. However, as `uv` attempts to build our app, it fails on missing setuptools, despite being installed as part of the seed packages earlier.

> uv run --frozen --verbose pylint -j0 --max-line-length=120 myapp
> DEBUG uv 0.7.2
> DEBUG Found project root: `/app`
> DEBUG No workspace root found, using project root
> DEBUG Discovered project `my-app` at: /app
> DEBUG Acquired lock for `/app`
> DEBUG Using Python request `3.11` from explicit request
> DEBUG Checking for Python environment at `.venv`
> DEBUG The virtual environment's Python version satisfies the request: `Python 3.11`
> DEBUG Released lock at `/tmp/uv-1c83b73deef05048.lock`
> DEBUG Using request timeout of 30s
> DEBUG Computed cache info: Some(Timestamp(SystemTime { tv_sec: 1746529986, tv_nsec: 426798308 })), None, None, {}, {"src": None}
> DEBUG Requirement installed, but not fresh: my-app==1.0.0 (from file:///app)
> DEBUG Computed cache info: Some(Timestamp(SystemTime { tv_sec: 1746529986, tv_nsec: 426798308 })), None, None, {}, {"src": None}
> DEBUG Identified uncached distribution: my-app @ file:///app
> DEBUG Requirement already installed: botocore==1.31.53
> ...lots of packages...
> DEBUG Preserving seed package: pip==25.1.1
> DEBUG Preserving seed package: setuptools==80.3.1
> DEBUG Preserving seed package: wheel==0.45.1
> DEBUG Acquired lock for `/tmp/cache/sdists-v9/editable/df64fc0b914aef95`
> DEBUG Computed cache info: Some(Timestamp(SystemTime { tv_sec: 1746529986, tv_nsec: 426798308 })), None, None, {}, {"src": None}
>    Building my-app @ file:///app
> DEBUG Building: my-app @ file:///app
> DEBUG No workspace root found, using project root
> DEBUG Using base executable for virtual environment: /var/lang/bin/python3.11
> DEBUG Ignoring empty directory
> DEBUG Resolving build requirements
> DEBUG Solving with installed Python version: 3.11.10
> DEBUG Solving with target Python version: >=3.11.10
> DEBUG Adding direct dependency: setuptools>=80.3, <81.dev0
> DEBUG No cache entry for: ...our artifactory...
> DEBUG Searching for a compatible version of setuptools (>=80.3, <81.dev0)
> DEBUG No compatible version found for: setuptools
> DEBUG Released lock at `/tmp/cache/sdists-v9/editable/df64fc0b914aef95/.lock`
>   × Failed to build `my-app @ file:///app`
>   ├─▶ Failed to resolve requirements from `build-system.requires`
>   ├─▶ No solution found when resolving: `setuptools~=80.3`
>   ╰─▶ Because setuptools was not found in the cache and you require
>   setuptools>=80.3,<81.dev0, we can conclude that your requirements are
>   unsatisfiable.
>
>   hint: Packages were unavailable because the network was disabled. When
>   the network is disabled, registry packages may only be read from the
>   cache.

I am trying out various solutions to get around this issue but my main question is about the seed packages - are the seed packages not enough, even if installed? Am I misunderstanding what the seed packages are for?

### Platform

WSL2, Docker

### Version

uv 0.7.2

---

_Label `question` added by @czechnology on 2025-05-06 11:28_

---

_Comment by @konstin on 2025-05-06 14:36_

Build packages are installed in separate environments, so uv needs a source where it can install them from, either from the network, from the uv cache or from a `--find-links` directory. The seed packages are disconnected from that, and more recent Python version, setuptools isn't part of those packages anymore (since pip also builds with isolation by default).

---

_Comment by @czechnology on 2025-05-06 15:30_

Okay, so it seems like I've misunderstood how the seeding works. I've adapted my process to `sync` with the app package while network is available, so the operations work fine when later running the container without network.  
Thanks!

---

_Closed by @konstin on 2025-05-06 16:53_

---
