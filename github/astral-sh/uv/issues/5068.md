---
number: 5068
title: "‚Äúwarning: pyproject.toml does not contain `project` table‚Äù, though there is a [project] section"
type: issue
state: closed
author: MacLake
labels:
  - good first issue
  - tracing
assignees: []
created_at: 2024-07-15T10:51:32Z
updated_at: 2024-07-18T18:21:41Z
url: https://github.com/astral-sh/uv/issues/5068
synced_at: 2026-01-07T12:31:14-06:00
---

# ‚Äúwarning: pyproject.toml does not contain `project` table‚Äù, though there is a [project] section

---

_Issue opened by @MacLake on 2024-07-15 10:51_

Since uv 0.2.5 up until the current version 0.2.24 I get the following warning every time I let uv resolve dependencies:

```shell
$ uv pip compile -v -U ../../pyproject.toml --extra=dev -o dev-requirements.txt
warning: pyproject.toml does not contain `project` table: `/home/jens/develop`
DEBUG No workspace root found, using project root
DEBUG Starting interpreter discovery for any Python
DEBUG Looking for exact match for request any Python
DEBUG Searching for Python interpreter in all sources
DEBUG Found CPython 3.11.9 at `/home/jens/.virtualenvs/djangocms3.11/bin/python3` (active virtual environment)
DEBUG Using Python 3.11.9 interpreter at /home/jens/.virtualenvs/djangocms3.11/bin/python3 for builds
DEBUG Using registry request timeout of 30s
DEBUG Solving with target Python version 3.11.9
DEBUG Adding direct dependency: django*
[‚Ä¶]
```


There definitely is a `[project]` section in my `pyproject.toml`. My project root is in `/home/jens/develop/djangocms/`, `pyproject.toml`. is in that directory. The django and requirements files are in `/home/jens/develop/djangocms/src/django_cms`.  The warning also shows when I execute uv in the project root directory. It‚Äôs strange that the warning refers to the directory one level above the project root: `/home/jens/develop`.

My system is a current Manjaro Gnome, in my virtualenv I use Python 3.11.9 (for compatibility with the current Debian stable)..

Apart from the warning everything works fine.

---

_Comment by @konstin on 2024-07-15 10:54_

Can you share the `pyproject.toml`, does it contain `name` and `version` field?

---

_Comment by @MacLake on 2024-07-15 11:01_

Yes, sure, here it is (I just changed the e-mail address):

```toml
[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "django-cms-for-phi"
dynamic = ["version"]
description = 'Websites for the Passive House Institute'
readme = "README.md"
requires-python = ">=3.11"
keywords = []
authors = [
    { name = "Jens-Erik Weber", email = "Jens-Erik.Weber@xxxxxx.xx" },
]
classifiers = [
    "Programming Language :: Python",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Framework :: Django CMS",
    "Framework :: Django CMS :: 3.11",

]
dependencies = [
    # *: package written for PHI and outsourced as an own pip package
    "Django",
    "django-autocomplete-light",
    "django_auth_ldap",  # LDAP login
    "django-ckeditor",  # TODO: Do we still need this?
    "django-cleanup",  # Deletes old files
    "django-cms<4",  # Lean enterprise content management powered by Django.
    "django-countries",  # Provides a country field for Django models.
    "django-email-obfuscator",  # A Django template filter to protect email addresses from crawlers
    "django-extensions",  # Extensions for Django
    "django-filer",  # A file management application for django
    "django-logentry-admin",   # Show all LogEntry objects in the Django admin site.
    "djangocms-link",  # Adds a link plugin to django CMS
    "django-modeltranslation",  # Translates Django models using a registration approach. TODO: replace with django-parler
    "django-nested-admin",  # Django admin classes that allow for nested inlines
    "django-nested-inline", # Recursive nesting of inline forms for Django Admin, Django 4.0 compatibility
    "django-parler",  # Model translations
    "django-select2",  # Select2 option fields for Django (autocomplete)
    "django-softhyphen",  # hyphenating HTML
    "django-templated-email",  # A Django oriented templated / transaction email abstraction
    "aldryn-boilerplates",  # Needed for django CMS extensions, remove if not required anymore
    "aldryn_apphooks_config",  # Needed for django CMS extensions, remove if not required anymore
    "djangocms-blog",  # The blog application for django CMS
    "djangocms-column",  # Remove if not required anymore
    "djangocms-events",  # Events list and calendar for django CMS *
    "djangocms-file",  # Adds file plugin to django CMS
    "djangocms-fomantic-ui>=0.0.2b5",  # Fomantic UI for django CMS *
    "djangocms-photo-gallery",  # *
    "djangocms-googlemap",  # Adds Google Maps plugins to django CMS.
    "djangocms-history",  # Adds undo/redo functionality to django CMS
    "djangocms-icon",  # Adds icon plugin to django CMS
    "djangocms_katex",  # Provides plugin to render formulae in django CMS
    'djangocms-leaflet',  # Leaflet/OSM plugin *
    "djangocms-page-sitemap",  # django CMS page extension to handle sitemap customization
    "djangocms-picture",  # Adds an image plugin to django CMS
    "djangocms-snippet",  # Adds snippet plugin to django CMS
    "djangocms-style",  # Adds style plugin to django CMS
    "djangocms-text-ckeditor",  # Text Plugin for django CMS with CKEditor support
    "djangocms-video",  # Adds video plugin to django CMS, TODO: Do we still need this?
    "easy-thumbnails",  # Easy thumbnails for Django
    "gunicorn",  # WSGI HTTP Server for UNIX
    "nh3",  # Ammonia HTML sanitizer Python binding
    "html2text", # Turn HTML into equivalent Markdown-structured text. https://github.com/Alir3z4/html2text/
    "Markdown",  # Python implementation of John Gruber's Markdown.
    "psycopg[binary]",  # PostgreSQL database adapter for Python
    "PyJWT", # JSON Web Token implementation in Python (for Zoom  API in tickets app)
    "python-ldap",
    "reportlab", #  PDF library http://www.reportlab.com/ (for abstracts)
    "requests",  # Python HTTP for Humans
    "udm-rest-client",  # For Univention UDM REST API, login
    "django-debug-toolbar", #  debug information about the current request/response
    "pip-tools", # pip-tools keeps your pinned dependencies fresh.
    "uv",  # An extremely fast Python package installer and resolver, written in Rust.
]

[project.optional-dependencies]
dev = [
    "yapf", # A formatter for Python code
    "isort", # A Python utility / library to sort Python imports.
    "flake8", # the modular source code checker: pep8 pyflakes and co
    "ruff", # An extremely fast Python linter and code formatter, written in Rust.
    "pre-commit", # A framework for managing and maintaining multi-language pre-commit hooks.
    "MonkeyType", # Generating type annotations from sampled production types
    "mypy", # Optional static typing for Python
    "safety", # Checks installed dependencies for known vulnerabilities and licenses.
    "ipython-genutils", # Vestigial utilities from IPython http://ipython.org
    "ptpython", # Python REPL build on top of prompt_toolkit https://github.com/prompt-toolkit/ptpython
    "pipdeptree", # Command line utility to show dependency tree of packages
    "coverage", # Code coverage measurement for Python
]

[project.urls]
Documentation = "https://gitea.passiv.net/PHI/djangocms/src/branch/master/README.md"
Issues = "https://gitea.passiv.net/PHI/djangocms/issues"
Source = "https://gitea.passiv.net/PHI/djangocms"

[tool.hatch.version]
path = "__about__.py"

[tool.hatch.envs.default]
dependencies = [
    "coverage[toml]>=6.5",
    "pytest",
]
[tool.hatch.envs.default.scripts]
test = "pytest {args:tests}"
test-cov = "coverage run -m pytest {args:tests}"
cov-report = [
    "- coverage combine",
    "coverage report",
]
cov = [
    "test-cov",
    "cov-report",
]

[[tool.hatch.envs.all.matrix]]
python = ["3.11", "3.12"]

[tool.hatch.envs.lint]
detached = true
dependencies = [
    "black>=23.1.0",
    "mypy>=1.0.0",
    "ruff>=0.0.243",
]
[tool.hatch.envs.lint.scripts]
typing = "mypy --install-types --non-interactive {args:django_cms_for_phi tests}"
style = [
    "ruff {args:.}",
    "black --check --diff {args:.}",
]
[tool.hatch.metadata]
allow-direct-references = true

fmt = [
    "black {args:.}",
    "ruff --fix {args:.}",
    "style",
]
all = [
    "style",
    "typing",
]

[tool.yapf]
based_on_style = "facebook"
SPLIT_BEFORE_BITWISE_OPERATOR = true
SPLIT_BEFORE_ARITHMETIC_OPERATOR = true
SPLIT_BEFORE_LOGICAL_OPERATOR = true
SPLIT_BEFORE_DOT = true

[tool.yapfignore]
ignore_patterns = [
]

[tool.black]
line-length = 120
skip-string-normalization = true

[tool.ruff]
line-length = 120
# Enumerate all fixed violations.
show-fixes = true

[tool.ruff.lint]
select = [
    "E",  # pycodestyle error
    "W",  # pycodestyle warning
    "F",  # Pyflakes
    "I",  # isort
    "UP",  # pyupgrade
    "DJ",  # flake8-django
]
ignore = [
]
unfixable = [
    "F841",  # unused variable
]
[tool.ruff.lint.isort]
known-first-party = ["django_cms_for_phi"]

[tool.ruff.lint.per-file-ignores]
"*/migrations/*" = ["E501"]  # Line too long
"*settings*.py" = ["F403", "F405"]  # star imports

[tool.coverage.run]
source_pkgs = ["django_cms_for_phi", "tests"]
branch = true
parallel = true
omit = [
    "django_cms_for_phi/__about__.py",
]

[tool.coverage.paths]
django_cms_for_phi = ["django_cms_for_phi", "*/django-cms-for-phi/django_cms_for_phi"]
tests = ["tests", "*/django-cms-for-phi/tests"]

[tool.coverage.report]
exclude_lines = [
    "no cov",
    "if __name__ == .__main__.:",
    "if TYPE_CHECKING:",
]

[tool.pip-tools]
generate-hashes = false

[tool.rye]
managed = true
virtual = true
# Should be the same as dev in [project.optional-dependencies]
dev-dependencies = [
    "yapf", # A formatter for Python code
    "isort", # A Python utility / library to sort Python imports.
    "flake8", # the modular source code checker: pep8 pyflakes and co
    "ruff", # An extremely fast Python linter and code formatter, written in Rust.
    "pre-commit", # A framework for managing and maintaining multi-language pre-commit hooks.
    "MonkeyType", # Generating type annotations from sampled production types
    "mypy", # Optional static typing for Python
    "safety", # Checks installed dependencies for known vulnerabilities and licenses.
    "ipython-genutils", # Vestigial utilities from IPython http://ipython.org
    "ptpython", # Python REPL build on top of prompt_toolkit https://github.com/prompt-toolkit/ptpython
    "pipdeptree", # Command line utility to show dependency tree of packages
    "coverage", # Code coverage measurement for Python
]
```

---

_Referenced in [astral-sh/uv#5069](../../astral-sh/uv/pulls/5069.md) on 2024-07-15 11:05_

---

_Comment by @charliermarsh on 2024-07-15 13:16_

Thanks, likely due to `dynamic = ["version"]`. Will adjust.

---

_Comment by @charliermarsh on 2024-07-15 13:24_

Umm, do you have a `pyproject.toml` in a directory _above_ your project that's missing a `project` table?

---

_Comment by @charliermarsh on 2024-07-15 13:25_

I can't reproduce by running on the `pyproject.toml` above.

---

_Comment by @skshetry on 2024-07-16 13:02_

@charliermarsh, we get the same warning on a monorepo where we have a `pyproject.toml` for `ruff` config at the root of the repository. I get this warning when I try to `uv pip install` from the project's directory. The root config does not have `[project]` table.



---

_Comment by @charliermarsh on 2024-07-16 13:04_

@skshetry - I think in that case the warning is "working as intended", but perhaps we need to reconsider showing it at all.

---

_Comment by @charliermarsh on 2024-07-16 13:05_

(If you don't have a "project", it might make sense to use a `ruff.toml` instead of a `pyproject.toml`?)

---

_Comment by @skshetry on 2024-07-16 13:22_

Although that would be the right approach, not everyone on my team prefers using `ruff.toml`, as they don't want to have special configuration file for each tool. I understand the implication of having a `pyproject.toml` file, but I did not expect `uv` to raise a warning for the parent configuration.



---

_Comment by @MacLake on 2024-07-17 06:32_

> Umm, do you have a `pyproject.toml` in a directory _above_ your project that's missing a `project` table?

Yes, that was causing the warning. Thanks for pointing me to this. I must have put it temporarily there and forgot about it, and this `pyproject.toml` actually didn‚Äôt have a `[project]`  table. After deleting it, the warning has gone.

Anyway, I wonder if it makes sense that it uv traverses directories above the project root to search for another `pyproject.toml` . Versions before 0.2.5 don‚Äôt show this warning.

---

_Comment by @konstin on 2024-07-17 07:06_

We're traversing upwards to find a workspace root, to support workspace dependencies and a per-workspace lockfile and venv (currently preview features).

---

_Comment by @zanieb on 2024-07-17 17:44_

I guess we should display the full path to the `pyproject.toml` instead of the parent directory to help make this warning clearer?

---

_Comment by @konstin on 2024-07-17 19:46_

#5069 should have fixed that part

---

_Comment by @charliermarsh on 2024-07-17 19:58_

I think we probably need to make this a `warn!` rather than `warn_user!`.

---

_Comment by @zanieb on 2024-07-18 03:33_

Yeah tracing seems reasonable to me üëç 

---

_Label `tracing` added by @zanieb on 2024-07-18 03:34_

---

_Label `good first issue` added by @zanieb on 2024-07-18 03:34_

---

_Assigned to @charliermarsh by @charliermarsh on 2024-07-18 14:50_

---

_Referenced in [astral-sh/uv#5194](../../astral-sh/uv/pulls/5194.md) on 2024-07-18 18:11_

---

_Closed by @charliermarsh on 2024-07-18 18:21_

---
