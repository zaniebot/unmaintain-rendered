---
number: 7973
title: "installing \"torch\" with specific version with \"uv pip install\"  fails"
type: issue
state: closed
author: szobov
labels: []
assignees: []
created_at: 2024-10-07T14:54:30Z
updated_at: 2024-10-16T11:05:52Z
url: https://github.com/astral-sh/uv/issues/7973
synced_at: 2026-01-07T12:31:15-06:00
---

# installing "torch" with specific version with "uv pip install"  fails

---

_Issue opened by @szobov on 2024-10-07 14:54_

Hey there,

First, thanks a lot for the work you're doing here!

When I'm trying to install pytorch using `uv pip install` with a specific version, it fails to do it:
```
$ uv pip install -vvv --index-url=https://download.pytorch.org/whl/cu118 torch==2.2.0
    0.002354s DEBUG uv uv 0.4.18
 uv_requirements::specification::from_source source=torch==2.2.0
    0.002649s DEBUG uv_python::discovery Searching for default Python interpreter in system path
    0.002828s DEBUG uv_python::discovery Found `cpython-3.12.5-linux-x86_64-gnu` at `/home/szobov-workstation/.../.venv/bin/python3` (active virtual environment)
    0.002906s DEBUG uv::commands::pip::operations Using Python 3.12.5 environment at .venv
    0.002978s DEBUG uv_fs Acquired lock for `.venv`
    0.007007s DEBUG uv::commands::pip::install At least one requirement is not satisfied: torch==2.2.0
 uv_client::linehaul::linehaul 
    0.007629s DEBUG uv_client::base_client Using request timeout of 30s
 uv_resolver::flat_index::from_entries 
 uv_resolver::resolver::solve 
    0.008305s   0ms DEBUG uv_resolver::resolver Solving with installed Python version: 3.12.5
    0.008316s   0ms DEBUG uv_resolver::resolver Solving with target Python version: >=3.12.5
   uv_resolver::resolver::choose_version package=root
   uv_resolver::resolver::get_dependencies_forking package=root, version=0a0.dev0
     uv_resolver::resolver::get_dependencies package=root, version=0a0.dev0
    0.008551s   0ms DEBUG uv_resolver::resolver Adding direct dependency: torch==2.2.0
   uv_resolver::resolver::choose_version package=torch
 uv_resolver::resolver::process_request request=Versions torch
   uv_client::registry_client::simple_api package=torch
     uv_client::cached_client::get_cacheable 
       uv_client::cached_client::read_and_parse_cache file=/home/szobov-workstation/.cache/uv/simple-v13/index/0683d010c15737d1/torch.rkyv
 uv_resolver::resolver::process_request request=Prefetch torch ==2.2.0
 uv_client::cached_client::from_path_sync path="/home/szobov-workstation/.cache/uv/simple-v13/index/0683d010c15737d1/torch.rkyv"
        0.008771s   0ms DEBUG uv_client::cached_client No cache entry for: https://download.pytorch.org/whl/cu118/torch/
       uv_client::cached_client::fresh_request url="https://download.pytorch.org/whl/cu118/torch/"
       uv_client::cached_client::new_cache file=/home/szobov-workstation/.cache/uv/simple-v13/index/0683d010c15737d1/torch.rkyv
       uv_client::registry_client::parse_simple_api package=torch
         uv_client::html::parse url=https://download.pytorch.org/whl/cu118/torch/
   uv_resolver::version_map::from_metadata 
      0.984090s 975ms DEBUG uv_resolver::resolver Searching for a compatible version of torch (==2.2.0)
    0.984199s 975ms DEBUG uv_resolver::resolver No compatible version found for: torch
  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of torch==2.2.0 and you require torch==2.2.0, we can conclude that your requirements are unsatisfiable.
    0.985315s DEBUG uv_fs Released lock at `/home/szobov-workstation/.../.venv/.lock`
```

When I execute the same command directly with `pip` it installs the dependency:
```
$ pip install --index-url=https://download.pytorch.org/whl/cu118 --verbose torch==2.2.0
Using pip 24.2 from /home/szobov-workstation/.../.venv/lib/python3.12/site-packages/pip (python 3.12)
Looking in indexes: https://download.pytorch.org/whl/cu118
Collecting torch==2.2.0
  Downloading https://download.pytorch.org/whl/cu118/torch-2.2.0%2Bcu118-cp312-cp312-linux_x86_64.whl (811.6 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 811.6/811.6 MB 15.7 MB/s eta 0:00:0
....
Successfully installed filelock-3.13.1 fsspec-2024.2.0 mpmath-1.3.0 nvidia-cublas-cu11-11.11.3.6 nvidia-cuda-cupti-cu11-11.8.87 nvidia-cuda-nvrtc-cu11-11.8.89 nvidia-cuda-runtime-cu11-11.8.89 nvidia-cudnn-cu11-8.7.0.84 nvidia-cufft-cu11-10.9.0.58 nvidia-curand-cu11-10.3.0.86 nvidia-cusolver-cu11-11.4.1.48 nvidia-cusparse-cu11-11.7.5.86 nvidia-nccl-cu11-2.19.3 nvidia-nvtx-cu11-11.8.86 sympy-1.12 torch-2.2.0+cu118
```
If I don't specify a version, `uv pip` picks up the latest one and installs `torch==2.4.0`.

I also checked the [repository](https://download.pytorch.org/whl/torch/) and it contains:
```
torch-2.2.0+cpu.cxx11.abi-cp312-cp312-linux_x86_64.whl
torch-2.4.0+cpu.cxx11.abi-cp312-cp312-linux_x86_64.whl
```

I think the desired behavior is `uv pip` installs required packaged as `pip` does. 

### uv version
```
$ uv --version
uv 0.4.18
```

### Platform

```
$ uname -a
Linux pop-os 6.9.3-76060903-generic #202405300957~1726766035~22.04~4092a0e SMP PREEMPT_DYNAMIC Thu S x86_64 x86_64 x86_64 GNU/Linux
$ python --version # installed with uv
Python 3.12.5
```

Let me know if you need any extra information.
Thanks :pray: 

---

_Comment by @zanieb on 2024-10-07 15:00_

Hi! Did you read the [local version identifier section](https://docs.astral.sh/uv/pip/compatibility/#local-version-identifiers) of the pip compatibility guide?

---

_Comment by @szobov on 2024-10-07 15:28_

Hey @zanieb 
I'm sorry, I've missed it. :pray:
I specified the version as proposed and it worked!
Thanks a lot!

---

_Closed by @szobov on 2024-10-07 15:28_

---

_Comment by @rsxdalv on 2024-10-16 11:05_

@zanieb Ok I have bumped into this issue twice now. I understand the logic and the rationale, but coming from i.e., React ecosystem I also like debug errors. It's fine if they are only shown with --verbose, but something like 1. no version "1.0.0" exists and then **additionally** write `found incompatible versions 1.0.0+cu123, please read https://docs.astral.sh/uv/pip/compatibility/#local-version-identifiers`

---
