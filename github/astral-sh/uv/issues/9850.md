---
number: 9850
title: CLI Option to save logs to a file
type: issue
state: open
author: edgarrmondragon
labels:
  - help wanted
  - tracing
  - needs-design
assignees: []
created_at: 2024-12-12T20:10:25Z
updated_at: 2025-02-24T15:36:34Z
url: https://github.com/astral-sh/uv/issues/9850
synced_at: 2026-01-07T12:31:15-06:00
---

# CLI Option to save logs to a file

---

_Issue opened by @edgarrmondragon on 2024-12-12 20:10_

In short, similar to the `--log` option of pip:

```
--log <path>                Path to a verbose appending log.
```

Related:

- `UV_LOG_FILE` is mentioned in https://github.com/astral-sh/uv/issues/8351 so maybe Astral folks have considered this


---

_Comment by @zanieb on 2024-12-12 21:09_

I'm interested!

---

_Label `help wanted` added by @zanieb on 2024-12-12 21:09_

---

_Label `tracing` added by @zanieb on 2024-12-12 21:09_

---

_Comment by @zanieb on 2024-12-12 21:10_

I'm also interested in _always_ writing to a log file in a temporary directory unless it's disabled? Like `UV_LOG_DIR`? I'm not sure what this would look like in practice.

---

_Label `needs-design` added by @zanieb on 2024-12-12 21:10_

---

_Comment by @Choudhry18 on 2025-01-05 11:40_

@zanieb I am interested in working on this, here is the initial idea/ requirements I have when thinking about this: 

1. Add a global options --log <path> (can also be set using an environment  variable , and no-log argument if that is set not logged). 
2. If log path not set it should default to logs directory in the root folder  
4. From the research I have done tracing-appender crate sounds like a great choice to write to the files and it offers the feature for rolling logs by frequency to prevent the log file size from being too big.
5. I am thinking everything that the logger would write if it's writing in the the most verbose way should be written to file
6. If it is part of the project the log directory should be in the root of the project otherwise a global log directory

Let me know if you have other requirements or considerations in mind



---

_Comment by @zanieb on 2025-01-06 17:49_

Hi! I think this makes sense, though I have a few comments:

> If log path not set it should default to logs directory in the root folder

Just remember this also needs an equivalent on macOS and Windows. Is there an XDG specification?

> If it is part of the project the log directory should be in the root of the project

I don't love the idea of in-project logs, unless we have a dedicated `.uv` directory or similar. Out of project seems like a safer start.

> I am thinking everything that the logger would write if it's writing in the the most verbose way should be written to file

I think trace-level logs may be too much? I'm not sure though. We may need to adjust this based on the practical experience. We should probably allow configuration of levels, e.g., via `UV_LOG_LEVEL`?

> From the research I have done tracing-appender crate sounds like a great choice to write to the files and it offers the feature for rolling logs by frequency to prevent the log file size from being too big.

Should we write to a single file? Or a file per command invocation? I lean towards the latter.

@konstin and @BurntSushi may have opinions about the best way to do this.

---

_Comment by @BurntSushi on 2025-01-06 18:49_

I think for me, it kinda depends on how folks want to use this.

The initial proposal is really simple: the user provides a path to a file, and `uv` appends logs to it. There's probably some decision making around figuring out the default log level when none is specified _and_ `--log` is given, but it otherwise seems kinda dumb (in a good way?) to me.

But if we get into log file rotation, separating logs by command invocation, separate ways for setting the log level (how would that interact with `RUST_LOG` for example), then the surface area here gets a lot bigger and more complex.

So I guess for me, I start with, in what cases do users want to use something _other_ than `RUST_LOG=debug uv ... &> /tmp/log`?

---

_Comment by @zanieb on 2025-01-07 18:46_

My motivation is to not need to enable logging and re-run a command to see failures. I want to be able to say "See <file> for more logs" on failure — sort of in the vein of https://github.com/astral-sh/uv/issues/8351.

---

_Comment by @edgarrmondragon on 2025-01-14 18:42_

> My motivation is to not need to enable logging and re-run a command to see failures. I want to be able to say "See for more logs" on failure — sort of in the vein of [#8351](https://github.com/astral-sh/uv/issues/8351).

That's also my use case, i.e. directing users to a detailed log file in case installation fails for any reason.

---

_Referenced in [meltano/meltano#9016](../../meltano/meltano/issues/9016.md) on 2025-01-14 18:45_

---

_Comment by @Choudhry18 on 2025-02-22 20:42_

@zanieb I have been working on this issue and on the requirements I am unsure about is when using file logs when running snapshot tests do you think it is so that we break the current snapshot tests that end in failure by adding a "See <path> for more logs" to the snapshot or omit doing that when running snapshots

> I want to be able to say "See for more logs" on failure — sort of in the vein of [#8351](https://github.com/astral-sh/uv/issues/8351).



---

_Comment by @zanieb on 2025-02-24 15:36_

It's fine to add content to the existing snapshots.

cc @Gankra for general awareness about output changes

---

_Referenced in [astral-sh/uv#11762](../../astral-sh/uv/pulls/11762.md) on 2025-02-25 03:35_

---

_Referenced in [meltano/meltano#9400](../../meltano/meltano/pulls/9400.md) on 2025-07-22 03:02_

---
