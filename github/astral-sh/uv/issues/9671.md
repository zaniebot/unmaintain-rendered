---
number: 9671
title: "allow `uv lock` to fail when lock file is \"corrupted\""
type: issue
state: closed
author: Seluj78
labels:
  - question
assignees: []
created_at: 2024-12-06T09:06:51Z
updated_at: 2024-12-06T14:46:00Z
url: https://github.com/astral-sh/uv/issues/9671
synced_at: 2026-01-07T12:31:15-06:00
---

# allow `uv lock` to fail when lock file is "corrupted"

---

_Issue opened by @Seluj78 on 2024-12-06 09:06_

I recently switched to using `0.5.6` and when I do a rebase and run `uv lock` to update it, it now fails with the error

```
error: Failed to parse `uv.lock`
  Caused by: TOML parse error at line 1356, column 1
     |
1356 | <<<<<<< Updated upstream
     | ^
invalid key
```

Which didn't happen before (I don't have the version in mind, sorry)

Could we get that back ?

---

_Comment by @charliermarsh on 2024-12-06 11:52_

I see where you're coming from, but I think this is reasonable behavior (and is also what Cargo does, just as one data point). You should have the opportunity to resolve the conflicts yourself, or you can just `rm uv.lock`.

---

_Label `question` added by @charliermarsh on 2024-12-06 11:52_

---

_Comment by @Seluj78 on 2024-12-06 13:58_

Yes I agree it's not reasonable, and it's also what `poetry` does, it throws an error if it cannot parse the `lock` file. I prefer it having it overwrite but alright :) I'll go back to `rm uv.lock` :)

---

_Closed by @Seluj78 on 2024-12-06 13:58_

---

_Comment by @charliermarsh on 2024-12-06 14:37_

Thanks for understanding :)

---

_Comment by @Seluj78 on 2024-12-06 14:45_

Of course ! `uv` (and `ruff`) are the best tools I've used for a long time, and this minor thing isn't something you guys should spend time working on instead of great features ! Keep it up !

---

_Comment by @charliermarsh on 2024-12-06 14:45_

Thank you so much ðŸ™ 

---
