---
number: 17338
title: "Dependency resolution failure: `numba` on `scikit-gstat` + `numpy>=2`"
type: issue
state: closed
author: phistep
labels:
  - bug
assignees: []
created_at: 2026-01-06T17:14:27Z
updated_at: 2026-01-06T18:29:01Z
url: https://github.com/astral-sh/uv/issues/17338
synced_at: 2026-01-07T12:31:16-06:00
---

# Dependency resolution failure: `numba` on `scikit-gstat` + `numpy>=2`

---

_Issue opened by @phistep on 2026-01-06 17:14_

### Summary

Given the following `pyproject.toml`

```toml
[build-system]
requires = ["setuptools >= 65", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "uv-resolution-bug-demo"
version = "0.1.0"
requires-python = ">=3.13"
description = "Minimal example demonstrating uv dependency resolution issue"
dependencies = [
    "numpy>=2",
    "scikit-gstat",
]

# [tool.uv]
# constraint-dependencies = ["numba>=0.63.1"]
```

`uv` will fail to rsolve the dependencies:

```
⁂  uv sync
Using CPython 3.13.11 interpreter at: /usr/bin/python3
Creating virtual environment at: .venv
Resolved 26 packages in 1.47s
  × Failed to build `llvmlite==0.36.0`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit
      status: 1)

      [stderr]
      Traceback (most recent call last):
        File "<string>", line 14, in <module>
          requires = get_requires_for_build({})
        File
      "/home/philippstephan/.cache/uv/builds-v0/.tmp1XaIjO/lib64/python3.13/site-packages/setuptools/build_meta.py",
      line 331, in get_requires_for_build_wheel
          return self._get_build_requires(config_settings, requirements=[])
                 ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File
      "/home/philippstephan/.cache/uv/builds-v0/.tmp1XaIjO/lib64/python3.13/site-packages/setuptools/build_meta.py",
      line 301, in _get_build_requires
          self.run_setup()
          ~~~~~~~~~~~~~~^^
        File
      "/home/philippstephan/.cache/uv/builds-v0/.tmp1XaIjO/lib64/python3.13/site-packages/setuptools/build_meta.py",
      line 512, in run_setup
          super().run_setup(setup_script=setup_script)
          ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File
      "/home/philippstephan/.cache/uv/builds-v0/.tmp1XaIjO/lib64/python3.13/site-packages/setuptools/build_meta.py",
      line 317, in run_setup
          exec(code, locals())
          ~~~~^^^^^^^^^^^^^^^^
        File "<string>", line 55, in <module>
        File "<string>", line 52, in _guard_py_ver
      RuntimeError: Cannot install on Python version 3.13.11; only versions
      >=3.6,<3.10 are supported.

      hint: This usually indicates a problem with the package or the build
      environment.
  help: `llvmlite` (v0.36.0) was included because `uv-resolution-bug-demo`
        (v0.1.0) depends on `scikit-gstat` (v1.0.22) which depends on `numba`
        (v0.53.1) which depends on `llvmlite`
zsh: exit 1     uv sync
```

But first installing `numba` manually without constraint or uncommenting the constraint will lead to a successful resoution

```
⁂  uv sync
Using CPython 3.13.11 interpreter at: /usr/bin/python3
Creating virtual environment at: .venv
Resolved 26 packages in 19ms
      Built uv-resolution-bug-demo @ file:///tmp/uv-resolution-bug
Prepared 25 packages in 774ms
░░░░░░░░░░░░░░░░░░░░ [0/25] Installing wheels...                                warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.
         If the cache and target directories are on different filesystems, hardlinking may not be supported.
         If this is intentional, set `export UV_LINK_MODE=copy` or use `--link-mode=copy` to suppress this warning.
Installed 25 packages in 125ms
 + contourpy==1.3.3
 + cycler==0.12.1
 + fonttools==4.61.1
 + imageio==2.37.2
 + joblib==1.5.3
 + kiwisolver==1.4.9
 + llvmlite==0.46.0
 + matplotlib==3.10.8
 + numba==0.63.1
 + numpy==2.3.5
 + packaging==25.0
 + pandas==2.3.3
 + pillow==12.1.0
 + pyparsing==3.3.1
 + python-dateutil==2.9.0.post0
 + pytz==2025.2
 + scikit-gstat==1.0.22
 + scikit-learn==1.8.0
 + scipy==1.16.3
 + setuptools==80.9.0
 + six==1.17.0
 + threadpoolctl==3.6.0
 + tqdm==4.67.1
 + tzdata==2025.3
 + uv-resolution-bug-demo==0.1.0 (from file:///tmp/uv-resolution-bug)
```

Since `scikit-gstat` does not impose any version requirements on `numpy` or `numba`, I believe this to be a bug.

```
⁂  uv pip show scikit-gstat
Name: scikit-gstat
Version: 1.0.22
Location: /tmp/uv-resolution-bug/.venv/lib/python3.13/site-packages
Requires: imageio, matplotlib, numba, numpy, pandas, scikit-learn, scipy, setuptools, tqdm
Required-by: uv-resolution-bug-demo
```

https://github.com/mmaelicke/scikit-gstat/blob/v1.0.22/requirements.txt



### Platform

`Linux 6.17.13-200.fc42.x86_64 x86_64 GNU/Linux`

### Version

`uv 0.9.21`

### Python version

`Python 3.13.11`

---

_Label `bug` added by @phistep on 2026-01-06 17:14_

---

_Comment by @konstin on 2026-01-06 18:28_

This is a duplicate of https://github.com/astral-sh/uv/issues/12060#issuecomment-2710047557.

The best solution would be scikit-gstat adding lower bounds to its dependencies, which prevents catastrophic backtracking as we see here.

---

_Closed by @konstin on 2026-01-06 18:29_

---
