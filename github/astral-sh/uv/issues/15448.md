---
number: 15448
title: Editable package installs fail on Windows - missing src directory in sys.path
type: issue
state: closed
author: jswetzen
labels:
  - needs-mre
assignees: []
created_at: 2025-08-22T10:21:19Z
updated_at: 2025-09-10T08:20:40Z
url: https://github.com/astral-sh/uv/issues/15448
synced_at: 2026-01-07T12:31:16-06:00
---

# Editable package installs fail on Windows - missing src directory in sys.path

---

_Issue opened by @jswetzen on 2025-08-22 10:21_

### Summary

## Environment Information
- **uv version**: 0.7.2 (Windows), 0.7.3 (Linux). Tried again after upgrading and it's the same issue.
- **Operating Systems**: 
  - Windows (Git Bash) - **Issue present**
  - Linux - **Working correctly**
- **Python versions**: 3.11.11 (Windows), 3.13.3 (Linux)

## Problem Description

When creating a library project with `uv init --lib`, editable package installs work correctly on Linux but fail on Windows. The issue appears to be that the `src` directory is not being added to `sys.path` on Windows during editable installation, preventing imports of the project's own modules.

The issue is specifically with editable installs. Using `uv pip install .` (non-editable install) works correctly on both platforms, but this defeats the purpose of development workflows where you need changes to be reflected immediately.

## Minimal Reproduction

### Commands to reproduce:
```bash
uv init --lib new-project
cd new-project/
touch src/new_project/dummy_module.py
uv sync
cd ..
# Activate virtual environment
. new-project/.venv/bin/activate      # Linux
# OR
. new-project/.venv/Scripts/activate  # Windows
python -c "import new_project.dummy_module"
```

### Expected Behavior (Linux - Working)
```
$ python -c "import new_project.dummy_module"
# No error - import succeeds

$ python -c 'import sys; print("\n".join(sys.path))'

/home/myuser/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python313.zip
/home/myuser/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13
/home/myuser/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/lib/python3.13/lib-dynload
/home/myuser/source/new-project/.venv/lib/python3.13/site-packages
/home/myuser/source/new-project/src    # ← src directory is present
```

### Actual Behavior (Windows - Broken)
```
$ python -c "import new_project.dummy_module"
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ModuleNotFoundError: No module named 'new_project'

$ python -c 'import sys; print("\n".join(sys.path))'
C:\Users\MyUser\AppData\Roaming\uv\python\cpython-3.11.11-windows-x86_64-none\python311.zip
C:\Users\MyUser\AppData\Roaming\uv\python\cpython-3.11.11-windows-x86_64-none\DLLs
C:\Users\MyUser\AppData\Roaming\uv\python\cpython-3.11.11-windows-x86_64-none\Lib
C:\Users\MyUser\AppData\Roaming\uv\python\cpython-3.11.11-windows-x86_64-none
C:\Users\MyUser\source\new-project\.venv
C:\Users\MyUser\source\new-project\.venv\Lib\site-packages
# ← Missing: src directory is NOT in sys.path
```

## Analysis

The root cause appears to be that `uv sync` correctly installs the package in editable mode on Linux (adding the `src` directory to `sys.path`), but fails to do so on Windows. Both platforms show the same verbose output indicating the package is "already installed" in editable mode, but the Windows installation doesn't properly configure the Python path for editable installations.

Verbose uv sync output (Linux - working)
```
$ uv sync --verbose
DEBUG uv 0.7.3
DEBUG Found project root: `/home/myuser/source/new-project`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `/home/myuser/source/new-project`
DEBUG Reading Python requests from version file at `/home/myuser/source/new-project/.python-version`
DEBUG Using Python request `3.13` from version file at `.python-version`
DEBUG Checking for Python environment at `.venv`
DEBUG The project environment's Python version satisfies the request: `Python 3.13`
DEBUG Released lock at `/tmp/uv-b0d6fe3d6536a174.lock`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: new-project @ file:///home/myuser/source/new-project
DEBUG No workspace root found, using project root
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 1 package in 13ms
DEBUG Using request timeout of 30s
DEBUG Computed cache info: Some(Timestamp(SystemTime { tv_sec: 1755855041, tv_nsec: 634644919 })), None, None, {}, {"src": Some(Timestamp(Timestamp(SystemTime { tv_sec: 1755855041, tv_nsec: 634644919 })))}
DEBUG Requirement already installed: new-project==0.1.0 (from file:///home/myuser/source/new-project)
Audited 1 package in 0.49ms
```

Verbose uv sync output (Windows - broken)
```
$ uv sync --verbose
DEBUG uv 0.7.2 (481d05d8d 2025-04-30)
DEBUG Found project root: `C:\Users\MyUser\source\new-project`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `C:\Users\MyUser\source\new-project`
DEBUG Reading Python requests from version file at `C:\Users\MyUser\source\new-project\.python-version`
DEBUG Using Python request `3.11` from version file at `.python-version`
DEBUG Checking for Python environment at `.venv`
DEBUG The virtual environment's Python version satisfies the request: `Python 3.11`
DEBUG Released lock at `C:\Users\MYUSER~1\AppData\Local\Temp\uv-be9027aa122b0f71.lock`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: new-project @ file:///C:/Users/MyUser/source/new-project
DEBUG No workspace root found, using project root
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 1 package in 2ms
DEBUG Using request timeout of 30s
DEBUG Computed cache info: Some(Timestamp(SystemTime { intervals: 134003288207142413 })), None, None, {}, {"src": Some(Timestamp(Timestamp(SystemTime { intervals: 134003288207142413 })))}
DEBUG Requirement already installed: new-project==0.1.0 (from file:///C:/Users/MyUser/source/new-project)
Audited 1 package in 1ms
```

## Impact

This prevents Windows users from developing library packages using the standard `uv init --lib` workflow, as they cannot import their own modules during development when using editable installs.

## Workaround

**Confirmed workaround**: Manually add the src directory to PYTHONPATH works:
```bash
 python -c 'import sys; sys.path.append("C:\\Users\\MyUser\\source\\new-project\\src"); import new_project.dummy_module'
```

Alternatively, use `uv pip install .` instead of `uv sync` for non-editable installation, but this requires reinstalling after each code change.

## Additional Notes

- The issue occurs specifically when using Git Bash on Windows
- Both platforms show identical verbose output, suggesting the issue may be in how the editable installation is configured rather than detected
- The package appears to be installed correctly according to uv's logs, but the Python path configuration differs between platforms
- Non-editable installs work correctly on both platforms

### Platform

Windows 11 x86_64

### Version

uv 0.8.13 (ede75fe62 2025-08-21)

### Python version

Python 3.11.11

---

_Label `bug` added by @jswetzen on 2025-08-22 10:21_

---

_Comment by @konstin on 2025-09-09 17:49_

I tried your instructions  in a git bash on Windows 11 and it's working on my machine. This is a core feature that's part of our test suite and it's widely used. Is there anything specific about your machine that could be different? Can you try clearing the uv cache and removing the `.venv`?

---

_Label `bug` removed by @konstin on 2025-09-09 17:49_

---

_Label `needs-mre` added by @konstin on 2025-09-09 17:49_

---

_Comment by @jswetzen on 2025-09-10 08:20_

Thanks for the attempted reproduce @konstin. I just tried again, with updated uv 0.8.15 (8473ecba1 2025-09-03) and Python 3.13.3, and it works. This diff shows why it's working now I think, the build system has changed from hatchling to uv_build. Maybe it was always a hatchling issue? I'm fine with switching to uv_build so I'll close this.
```
$ diff new-project/pyproject.toml new-project-2/pyproject.toml
2c2
< name = "new-project"
---
> name = "new-project-2"
9c9
< requires-python = ">=3.11"
---
> requires-python = ">=3.13"
13,14c13,14
< requires = ["hatchling"]
< build-backend = "hatchling.build"
---
> requires = ["uv_build>=0.8.15,<0.9.0"]
> build-backend = "uv_build"
```

---

_Closed by @jswetzen on 2025-09-10 08:20_

---
