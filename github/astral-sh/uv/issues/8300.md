---
number: 8300
title: "installer: confusing UV_INSTALL_DIR behavior"
type: issue
state: open
author: ilyagr
labels:
  - external
  - releases
assignees: []
created_at: 2024-10-17T17:53:44Z
updated_at: 2024-10-17T19:10:51Z
url: https://github.com/astral-sh/uv/issues/8300
synced_at: 2026-01-07T12:31:15-06:00
---

# installer: confusing UV_INSTALL_DIR behavior

---

_Issue opened by @ilyagr on 2024-10-17 17:53_

I ran

```shell
curl -LsSf https://astral.sh/uv/install.sh | \
  env INSTALLER_NO_MODIFY_PATH=1 UV_INSTALL_DIR=~/.local/bin sh
```

The result included the message "installing to ~/.local/bin/bin":

```console
$ curl -LsSf https://astral.sh/uv/install.sh | env INSTALLER_NO_MODIFY_PATH=1 UV_INSTALL_DIR=~/.local/bin sh
downloading uv 0.4.23 aarch64-apple-darwin
installing to ~/.local/bin/bin
  uv
  uvx
everything's installed!
```

~Actually, the install seemed to correctly go to `~/.local/bin`, it's just the message that's wrong.~

Actually, the install ended up going in `/Users/ilyagr/tmp/~/.local/bin/bin/uv` (with a literal `~` in the name), which has several problems with it. I was in `/Users/ilyagr/tmp/` when running the command.

**Workaround:**

The correct command would have been:

```
curl -LsSf https://astral.sh/uv/install.sh | \
   env INSTALLER_NO_MODIFY_PATH=1 UV_INSTALL_DIR=/Users/ilyagr/.local sh
```

without the `/bin` in `/Users/ilyagr/.local`.

**Suggestions**

It would have helped if the "installing..." message printed the absolute path.


Now that the variable is called `UV_INSTALL_DIR` instead of `CARGO_HOME`, it makes less sense that `/bin` is added to it. I'm not sure what to do about it.

Absent a better fix, the docs should perhaps be updated to explain this, somehow, e.g. by including the working command. I am not sure what's going wrong with the `~` expansion for me.

Another minor issue: `curl -LsSf https://astral.sh/uv/install.sh | sh -s -- --help` still talks about CARGO_HOME. This might be OK if it still works.

---

_Renamed from "installer: wrong message when using UV_INSTALL_DIR" to "installer: confusing UV_INSTALL_DIR behavior" by @ilyagr on 2024-10-17 18:01_

---

_Referenced in [fish-shell/fish-shell#10794](../../fish-shell/fish-shell/issues/10794.md) on 2024-10-17 18:22_

---

_Comment by @ilyagr on 2024-10-17 18:22_

On my system (Mac + fish), there is a helpful `printenv` command that shows:

```console
$ a=~ printenv a
/Users/ilyagr
$ env a=~ printenv a
~
```

This makes no sense to me. I filed a question at https://github.com/fish-shell/fish-shell/issues/10794 about that.

---

_Comment by @zanieb on 2024-10-17 18:26_

> Actually, the install ended up going in /Users/ilyagr/tmp/~/.local/bin/bin/uv (with a literal ~ in the name), which has several problems with it. I was in /Users/ilyagr/tmp/ when running the command.

Yeah this seems like a shell issue, that's weird. I'm confused too honestly.

Sounds like you want `UV_UNMANAGED_INSTALL` if you don't want to create the `bin` directory? it's setup this way because we might need to install other things than binaries.

---

_Label `upstream` added by @zanieb on 2024-10-17 18:26_

---

_Label `releases` added by @zanieb on 2024-10-17 18:26_

---

_Comment by @ilyagr on 2024-10-17 18:29_

Bash acts the way I'd expect, so I thought it was a fish issue. However, `zsh` and `dash` both act like `fish`, so I guess the `env` trick I suggested a while ago is just not great. Sorry.

---

_Comment by @zanieb on 2024-10-17 19:10_

The documentation only recommends an absolute path though, right?

---
