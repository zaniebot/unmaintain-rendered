---
number: 13445
title: "Running `uv add package-name --index index_name` with the index already inside the `pyproject.toml`"
type: issue
state: closed
author: Capsar
labels:
  - enhancement
assignees: []
created_at: 2025-05-14T07:56:14Z
updated_at: 2025-05-14T15:57:50Z
url: https://github.com/astral-sh/uv/issues/13445
synced_at: 2026-01-07T12:31:16-06:00
---

# Running `uv add package-name --index index_name` with the index already inside the `pyproject.toml`

---

_Issue opened by @Capsar on 2025-05-14 07:56_

### Summary

Right now, when a new package needs to be added to the `pyproject.toml` file through `uv add` there are 2 options:

1. Specify the index with `--index index_name=index_url`, which also includes the [uv.tool.sources]
2. Not specifying it and adding it with just `uv add package_name`, which does not include the [uv.tool.sources]

A feature, such that the url only has to be defined in the `pyproject.toml` file and a user can run something along the lines of `uv add package_name --index index_name`. Ideally the result would be that it automatically picks the url & also adds the [uv.tool.sources] of the package.



### Example

```pyproject.toml
[project]
name = "project-deliverable"
version = "0.1.0"
requires-python = "==3.12.10"
dependencies = [
]

[[tool.uv.index]]
name = "index_name"
url = "https://..../pypi/simple"
explicit=true
```

Running: `uv add package-name --index index_name` would result in an updated `pyproject.toml`:


```pyproject.toml
[project]
name = "project-deliverable"
version = "0.1.0"
requires-python = "==3.12.10"
dependencies = [
    "package-name>=0.1.0",
]

[tool.uv.sources]
package-name = { index = "index_name"}

[[tool.uv.index]]
name = "index_name"
url = "https://..../pypi/simple"
explicit=true
```



---

_Label `enhancement` added by @Capsar on 2025-05-14 07:56_

---

_Renamed from "Running `uv add package_name --index index_name` with the index already inside the `pyproject.toml`" to "Running `uv add package-name --index index_name` with the index already inside the `pyproject.toml`" by @Capsar on 2025-05-14 07:56_

---

_Comment by @charliermarsh on 2025-05-14 15:57_

I believe this is the same as https://github.com/astral-sh/uv/issues/10140.

---

_Closed by @charliermarsh on 2025-05-14 15:57_

---
