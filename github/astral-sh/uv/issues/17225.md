---
number: 17225
title: Preinstall keyring packages
type: issue
state: open
author: yshiftanlightricks
labels:
  - enhancement
assignees: []
created_at: 2025-12-23T09:56:55Z
updated_at: 2025-12-26T15:43:29Z
url: https://github.com/astral-sh/uv/issues/17225
synced_at: 2026-01-07T12:31:16-06:00
---

# Preinstall keyring packages

---

_Issue opened by @yshiftanlightricks on 2025-12-23 09:56_

### Summary

To install packages from Google Artifact Registry, we need to run
`pip install keyring keyrings.google-artifactregistry-auth` before running `uv lock` or `uv sync`.

Would it be possible to define this in the project so that uv can install these dependencies automatically, instead of requiring this pre-step?

### Example

_No response_

---

_Label `enhancement` added by @yshiftanlightricks on 2025-12-23 09:56_

---

_Comment by @woodruffw on 2025-12-26 15:42_

Triage: #16684 has another version of this, I think ðŸ™‚ 

From that issue: the challenge here is that lockfile resolution is globally consistent, so we can't easily pre-install a specific subset of bootstrapping dependencies within the same "step" as the rest of the `uv lock`/`uv sync` invocation.

I believe the recommendation we make for this is to use `uv tool install`, since that'll isolate your `keyring` + specific plugin into their own environment. That's documented here: https://docs.astral.sh/uv/guides/integration/alternative-indexes/#authenticate-with-keyring-and-keyringsgoogle-artifactregistry-auth

---
