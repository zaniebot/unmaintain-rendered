---
number: 16231
title: "uv sync --inexact removes `.venv` and recreates it. It was not the case before."
type: issue
state: closed
author: 0gust1
labels:
  - bug
assignees: []
created_at: 2025-10-10T15:08:50Z
updated_at: 2025-10-13T13:39:48Z
url: https://github.com/astral-sh/uv/issues/16231
synced_at: 2026-01-07T12:31:16-06:00
---

# uv sync --inexact removes `.venv` and recreates it. It was not the case before.

---

_Issue opened by @0gust1 on 2025-10-10 15:08_

### Summary

On one of our apps, we have a particular process:

- we have a particular python dependency (extraneous) which is installed in the dockerfile using multistage build. We do: `COPY --from=<particular_dep> /opt/venv/ /app/.venv/`
- then we do: `RUN uv sync --frozen --no-dev --inexact`

Until now it worked nicely.

But now, when we comment the `RUN` instruction above and do manually `uv sync --frozen --no-dev --inexact` in the container:
```
root@cff8d896e7b4:/app# uv sync --frozen --no-dev --inexact
Using CPython 3.11.14 interpreter at: /usr/local/bin/python3.11
Removed virtual environment at: .venv
Creating virtual environment at: .venv
...
```
=> the `.venv/` folder is suppressed then recreated, erasing the dependency we copied before. 

**It seems that the `--inexact` flag doesn't work anymore. Extraneous packages are not preserved.**



### Platform

Linux 6.10.14-linuxkit x86_64 GNU/Linux

### Version

uv 0.9.1

### Python version

Python 3.11.14

---

_Label `bug` added by @0gust1 on 2025-10-10 15:08_

---

_Comment by @0gust1 on 2025-10-10 15:31_

**[EDITED]**

I did an (~~incomplete for now~~) dichotomy search by installing older versions of `uv` and by testing the behavior.

**=> Our setup works until uv@0.6.14 (included), the extraneous package is preserved**. It breaks starting from uv@0.6.15

---

_Comment by @zanieb on 2025-10-10 15:51_

Please share verbose log as described in #9452

---

_Comment by @0gust1 on 2025-10-10 16:17_

hello @zanieb (thanks for your dedication!)

Below, you'll find the 2 logs.  
- The one with uv 0.9.1 doesn't work 
- the one with uv 0.6.14 works 

(only the uv version is different between the two executions). 

**NB:** 
- The extraneous package is called `anarci`, you'll see a mention of it in the uv 0.6.14 log.
- starting from uv 0.6.15, I see:
```
Removed virtual environment at: .venv
Creating virtual environment at: .venv
```  
in the logs. It seems that `--inexact` flag should prevent the deletion of pre-existing `.venv`, but it's not the case since uv 0.6.15.

## verbose output of uv 0.9.1
```
root@b8e9b1ea5100:/app# uv sync --frozen --no-dev --inexact --verbose
DEBUG uv 0.9.1
DEBUG Acquired shared lock for `/root/.cache/uv`
DEBUG Found project root: `/app`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `/app`
DEBUG Reading Python requests from version file at `/app/.python-version`
DEBUG Using Python request `3.11` from version file at `.python-version`
DEBUG Checking for Python environment at: `.venv`
DEBUG The interpreter in the project environment has a different version (3.11.14) than it was created with (3.11.13)
DEBUG Searching for Python 3.11 in managed installations or search path
DEBUG Searching for managed installations at `/root/.local/share/uv/python`
DEBUG Found `cpython-3.11.14-linux-x86_64-gnu` at `/app/.venv/bin/python3.11` (first executable in the search path)
DEBUG Ignoring Python interpreter at `/app/.venv/bin/python3.11`: system interpreter required
DEBUG Found `cpython-3.11.14-linux-x86_64-gnu` at `/app/.venv/bin/python3` (search path)
DEBUG Ignoring Python interpreter at `/app/.venv/bin/python3`: system interpreter required
DEBUG Found `cpython-3.11.14-linux-x86_64-gnu` at `/app/.venv/bin/python` (search path)
DEBUG Ignoring Python interpreter at `/app/.venv/bin/python`: system interpreter required
DEBUG Found `cpython-3.11.14-linux-x86_64-gnu` at `/usr/local/bin/python3.11` (search path)
Using CPython 3.11.14 interpreter at: /usr/local/bin/python3.11
Removed virtual environment at: .venv
Creating virtual environment at: .venv
DEBUG Using base executable for virtual environment: /usr/local/bin/python3.11
DEBUG Released lock at `/tmp/uv-1c83b73deef05048.lock`
DEBUG Acquired lock for `.venv`
DEBUG Using request timeout of 30s
DEBUG Identified uncached distribution: biopython==1.85
DEBUG Identified uncached distribution: fastapi==0.118.2
DEBUG Identified uncached distribution: pydantic==2.12.0
DEBUG Identified uncached distribution: toml==0.10.2
DEBUG Identified uncached distribution: uvicorn==0.37.0
DEBUG Identified uncached distribution: numpy==2.3.3
DEBUG Identified uncached distribution: starlette==0.48.0
DEBUG Identified uncached distribution: typing-extensions==4.15.0
DEBUG Identified uncached distribution: email-validator==2.3.0
DEBUG Identified uncached distribution: fastapi-cli==0.0.13
DEBUG Identified uncached distribution: httpx==0.28.1
DEBUG Identified uncached distribution: jinja2==3.1.6
DEBUG Identified uncached distribution: python-multipart==0.0.20
DEBUG Identified uncached distribution: annotated-types==0.7.0
DEBUG Identified uncached distribution: pydantic-core==2.41.1
DEBUG Identified uncached distribution: typing-inspection==0.4.2
DEBUG Identified uncached distribution: click==8.3.0
DEBUG Identified uncached distribution: h11==0.16.0
DEBUG Identified uncached distribution: anyio==4.11.0
DEBUG Identified uncached distribution: dnspython==2.8.0
DEBUG Identified uncached distribution: idna==3.10
DEBUG Identified uncached distribution: rich-toolkit==0.15.1
DEBUG Identified uncached distribution: typer==0.19.2
DEBUG Identified uncached distribution: fastapi-cloud-cli==0.3.1
DEBUG Identified uncached distribution: certifi==2025.10.5
DEBUG Identified uncached distribution: httpcore==1.0.9
DEBUG Identified uncached distribution: markupsafe==3.0.3
DEBUG Identified uncached distribution: httptools==0.6.4
DEBUG Identified uncached distribution: python-dotenv==1.1.1
DEBUG Identified uncached distribution: pyyaml==6.0.3
DEBUG Identified uncached distribution: uvloop==0.21.0
DEBUG Identified uncached distribution: watchfiles==1.1.0
DEBUG Identified uncached distribution: websockets==15.0.1
DEBUG Identified uncached distribution: sniffio==1.3.1
DEBUG Identified uncached distribution: rich==14.1.0
DEBUG Identified uncached distribution: shellingham==1.5.4
DEBUG Identified uncached distribution: rignore==0.7.0
DEBUG Identified uncached distribution: sentry-sdk==2.40.0
DEBUG Identified uncached distribution: markdown-it-py==4.0.0
DEBUG Identified uncached distribution: pygments==2.19.2
DEBUG Identified uncached distribution: urllib3==2.5.0
DEBUG Identified uncached distribution: mdurl==0.1.2
DEBUG No cache entry for: https://files.pythonhosted.org/packages/10/a2/010b0e27ddeacab7839957d7a8f00e91206e0c2c47abbb5f35a2630e5387/numpy-2.3.3-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/8a/ca/0864176a649838b838f36d44bf31c451597ab363b60dc9e09c9630619d41/uvloop-0.21.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/25/9c/612821b946930b6caa5d795cfe4169ed6a522562eced9776914be7efaf21/biopython-1.85-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e5/4f/3aaa3bd1ea420a15acc42d7d3ccb3b0bbc5444ae2f9dbc1959f8173e16b8/pydantic_core-2.41.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/71/60/917329f640924b18ff085ab889a11c763e0b573da888e8404ff486657602/pyyaml-6.0.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/b1/2f/205d1f2a190b72da6ffb5f41a3736c26d6fa7871101212b15e9b5cd8f61d/httptools-0.6.4-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/f4/9d/d5c855424e2e5b6b626fbc6ec514d8e655a600377ce283008b115abb7445/pydantic-2.12.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/2b/a1/ec0a606bde4853d6c4a578f9391eeb3684a9aea736a8eb217e3e00aa89a1/watchfiles-1.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/a4/d1/a54bd3622c6e742e6a01bc3bac45966b7ba886e29827da6b8ca7ae234e21/sentry_sdk-2.40.0-py2.py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/ba/5a/18ad964b0086c6e62e2e7500f7edc89e3faa45033c71c1893d34eed2b2de/dnspython-2.8.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e3/30/3c4d035596d3cf444529e0b2953ad0466f6049528a879d27534700580395/rich-14.1.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/93/1f/5d6dbf551766308f6f50f8baf8e9860be6182911e8106da7a7f73785f4c4/websockets-15.0.1-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/b9/56/c0a03cb643ca41091f0377ffea3a35ae3f3cff39b075ca94eec35fae6ed0/rignore-0.7.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e4/37/af0d2ef3967ac0d6113837b44a4f0bfe1328c2b9763bd5b1744520e5cfed/certifi-2025.10.5-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/62/a1/3d680cbfd5f4b8f15abc1d571870c5fc3e594bb582bc3b64ea099db13e56/jinja2-3.1.6-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/a7/c2/fe1e52489ae3122415c51f387e221dd0773709bad6c6cdaa599e8a2c5185/urllib3-2.5.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/15/b3/9b1a8074496371342ec1e796a96f99c82c945a339cd81a8e73de28b4cf9e/anyio-4.11.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/db/d3/9dcc0f5797f070ec8edf30fbadfb200e71d9db6b84d211e3b2085a7589a0/click-8.3.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/45/7c/97d033faf771c9fe960c7b51eb78ab266bfa64cbc917601978963f0c3c7b/fastapi-0.118.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/94/54/e7d793b573f298e1c9013b8c4dade17d481164aa517d1d7148619c2cedbf/markdown_it_py-4.0.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/7e/f5/f66802a942d491edb555dd61e3a9961140fd64c90bce1eafd741609d334d/httpcore-1.0.9-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/c7/21/705964c7812476f378728bdf590ca4b771ec72385c533964653c68e86bdc/pygments-2.19.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/be/72/2db2f49247d0a18b4f1bb9a5a39a0162869acf235f3a96418363947b3d46/starlette-0.48.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/2a/39/e50c7c3a983047577ee07d2a9e53faf5a69493943ec3f6a384bdc792deb2/httpx-0.28.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/76/c6/c88e154df9c4e1a2a66ccf0005a88dfb2650c1dffb6f5ce603dfbd452ce3/idna-3.10-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/85/cd/584a2ceb5532af99dd09e50919e3615ba99aa127e9850eafe5f31ddfdb9a/uvicorn-0.37.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/00/22/35617eee79080a5d071d0f14ad698d325ee6b3bf824fc0467c03b30e7fa8/typer-0.19.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/18/67/36e9267722cc04a6b9f15c7f3441c2363321a3ea07da7ae0c0707beb2a9c/typing_extensions-4.15.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/04/4b/29cac41a4d98d144bf5f6d33995617b185d14b22401f75ca86f384e87ff1/h11-0.16.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/de/15/545e2b6cf2e3be84bc1ed85613edd75b8aea69807a71c26f4ca6a9258e82/email_validator-2.3.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/c8/49/42821d55ead7b5a87c8d121edf323cb393d8579f63e933002ade900b784f/rich_toolkit-0.15.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/45/58/38b5afbc1a800eeea951b9285d3912613f2603bdf897a4ab0f4bd7f405fc/python_multipart-0.0.20-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/30/ac/0273f6fcb5f42e314c6d8cd99effae6a5354604d461b8d392b5ec9530a54/markupsafe-3.0.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/5f/ed/539768cf28c661b5b068d66d96a2f155c4971a5d55684a514c1a0e0dec2f/python_dotenv-1.1.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/68/79/7f5a5e5513e6a737e5fb089d9c59c74d4d24dc24d581d3aa519b326bedda/fastapi_cloud_cli-0.3.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/44/6f/7120676b6d73228c96e17f1f794d8ab046fc910d781c8d151120c3f1569e/toml-0.10.2-py2.py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/dc/9b/47798a6c91d8bdb567fe2698fe81e0c6b7cb7ef4d13da4114b41d239f65d/typing_inspection-0.4.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/78/b6/6307fbef88d9b5ee7421e68d78a9f162e0da4900bc5f5793f6d3d0e34fb8/annotated_types-0.7.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/08/36/7432750f3638324b055496d2c952000bea824259fca70df5577a6a3c172f/fastapi_cli-0.0.13-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e9/44/75a9c9421471a6c4805dbf2356f7c181a29c1879239abab1ea2cc8f38b40/sniffio-1.3.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/b3/38/89ba8ad64ae25be8de66a6d463314cf1eb366222074cfda9ee839c56a4b4/mdurl-0.1.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e0/f9/0595336914c5619e5f28a1fb793285925a8cd4b432c9da0a987836c7f822/shellingham-1.5.4-py2.py3-none-any.whl
Downloading pygments (1.2MiB)
Downloading numpy (16.2MiB)
Downloading biopython (3.1MiB)
Downloading uvloop (3.8MiB)
Downloading pydantic-core (2.0MiB)
 Downloading pydantic-core
 Downloading uvloop
 Downloading pygments
 Downloading biopython
 Downloading numpy
Prepared 42 packages in 6.21s
Installed 42 packages in 268ms
 + annotated-types==0.7.0
 + anyio==4.11.0
 + biopython==1.85
 + certifi==2025.10.5
 + click==8.3.0
 + dnspython==2.8.0
 + email-validator==2.3.0
 + fastapi==0.118.2
 + fastapi-cli==0.0.13
 + fastapi-cloud-cli==0.3.1
 + h11==0.16.0
 + httpcore==1.0.9
 + httptools==0.6.4
 + httpx==0.28.1
 + idna==3.10
 + jinja2==3.1.6
 + markdown-it-py==4.0.0
 + markupsafe==3.0.3
 + mdurl==0.1.2
 + numpy==2.3.3
 + pydantic==2.12.0
 + pydantic-core==2.41.1
 + pygments==2.19.2
 + python-dotenv==1.1.1
 + python-multipart==0.0.20
 + pyyaml==6.0.3
 + rich==14.1.0
 + rich-toolkit==0.15.1
 + rignore==0.7.0
 + sentry-sdk==2.40.0
 + shellingham==1.5.4
 + sniffio==1.3.1
 + starlette==0.48.0
 + toml==0.10.2
 + typer==0.19.2
 + typing-extensions==4.15.0
 + typing-inspection==0.4.2
 + urllib3==2.5.0
 + uvicorn==0.37.0
 + uvloop==0.21.0
 + watchfiles==1.1.0
 + websockets==15.0.1
DEBUG Released lock at `/app/.venv/.lock`
DEBUG Released lock at `/root/.cache/uv/.lock`
```

## Verbose output of uv 0.6.14

```
root@0a858b8193c9:/app# uv sync --frozen --no-dev --inexact --verbose
DEBUG uv 0.6.14
DEBUG Found project root: `/app`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `/app`
DEBUG Reading Python requests from version file at `/app/.python-version`
DEBUG Using Python request `3.11` from version file at `.python-version`
DEBUG Checking for Python environment at `.venv`
DEBUG The virtual environment's Python version satisfies `3.11`
DEBUG Released lock at `/tmp/uv-1c83b73deef05048.lock`
DEBUG Using request timeout of 30s
DEBUG Requirement already installed: biopython==1.85
DEBUG Identified uncached distribution: fastapi==0.118.2
DEBUG Identified uncached distribution: pydantic==2.12.0
DEBUG Identified uncached distribution: toml==0.10.2
DEBUG Identified uncached distribution: uvicorn==0.37.0
DEBUG Requirement installed, but mismatched:
  Installed: Registry(InstalledRegistryDist { name: PackageName("numpy"), version: "1.26.4", path: "/app/.venv/lib/python3.11/site-packages/numpy-1.26.4.dist-info", cache_info: None })
  Requested: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: "2.3.3" }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: Url { scheme: "https", cannot_be_a_base: false, username: "", password: None, host: Some(Domain("pypi.org")), port: None, path: "/simple", query: None, fragment: None }, given: None }), format: Simple }), conflict: None }
DEBUG Identified uncached distribution: numpy==2.3.3
DEBUG Identified uncached distribution: starlette==0.48.0
DEBUG Identified uncached distribution: typing-extensions==4.15.0
DEBUG Identified uncached distribution: email-validator==2.3.0
DEBUG Identified uncached distribution: fastapi-cli==0.0.13
DEBUG Identified uncached distribution: httpx==0.28.1
DEBUG Identified uncached distribution: jinja2==3.1.6
DEBUG Identified uncached distribution: python-multipart==0.0.20
DEBUG Identified uncached distribution: annotated-types==0.7.0
DEBUG Identified uncached distribution: pydantic-core==2.41.1
DEBUG Identified uncached distribution: typing-inspection==0.4.2
DEBUG Identified uncached distribution: click==8.3.0
DEBUG Identified uncached distribution: h11==0.16.0
DEBUG Identified uncached distribution: anyio==4.11.0
DEBUG Identified uncached distribution: dnspython==2.8.0
DEBUG Identified uncached distribution: idna==3.10
DEBUG Identified uncached distribution: rich-toolkit==0.15.1
DEBUG Identified uncached distribution: typer==0.19.2
DEBUG Identified uncached distribution: fastapi-cloud-cli==0.3.1
DEBUG Identified uncached distribution: certifi==2025.10.5
DEBUG Identified uncached distribution: httpcore==1.0.9
DEBUG Identified uncached distribution: markupsafe==3.0.3
DEBUG Identified uncached distribution: httptools==0.6.4
DEBUG Identified uncached distribution: python-dotenv==1.1.1
DEBUG Identified uncached distribution: pyyaml==6.0.3
DEBUG Identified uncached distribution: uvloop==0.21.0
DEBUG Identified uncached distribution: watchfiles==1.1.0
DEBUG Identified uncached distribution: websockets==15.0.1
DEBUG Identified uncached distribution: sniffio==1.3.1
DEBUG Identified uncached distribution: rich==14.1.0
DEBUG Identified uncached distribution: shellingham==1.5.4
DEBUG Identified uncached distribution: rignore==0.7.0
DEBUG Identified uncached distribution: sentry-sdk==2.40.0
DEBUG Identified uncached distribution: markdown-it-py==4.0.0
DEBUG Identified uncached distribution: pygments==2.19.2
DEBUG Identified uncached distribution: urllib3==2.5.0
DEBUG Identified uncached distribution: mdurl==0.1.2
DEBUG Unnecessary package: anarci==1.3
DEBUG Preserving seed package: pip==25.2
DEBUG Preserving seed package: setuptools==65.5.0
DEBUG Preserving seed package: uv==0.6.14
DEBUG No cache entry for: https://files.pythonhosted.org/packages/78/b6/6307fbef88d9b5ee7421e68d78a9f162e0da4900bc5f5793f6d3d0e34fb8/annotated_types-0.7.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/10/a2/010b0e27ddeacab7839957d7a8f00e91206e0c2c47abbb5f35a2630e5387/numpy-2.3.3-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/8a/ca/0864176a649838b838f36d44bf31c451597ab363b60dc9e09c9630619d41/uvloop-0.21.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e5/4f/3aaa3bd1ea420a15acc42d7d3ccb3b0bbc5444ae2f9dbc1959f8173e16b8/pydantic_core-2.41.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/c7/21/705964c7812476f378728bdf590ca4b771ec72385c533964653c68e86bdc/pygments-2.19.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/b9/56/c0a03cb643ca41091f0377ffea3a35ae3f3cff39b075ca94eec35fae6ed0/rignore-0.7.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/71/60/917329f640924b18ff085ab889a11c763e0b573da888e8404ff486657602/pyyaml-6.0.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/b1/2f/205d1f2a190b72da6ffb5f41a3736c26d6fa7871101212b15e9b5cd8f61d/httptools-0.6.4-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/f4/9d/d5c855424e2e5b6b626fbc6ec514d8e655a600377ce283008b115abb7445/pydantic-2.12.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/2b/a1/ec0a606bde4853d6c4a578f9391eeb3684a9aea736a8eb217e3e00aa89a1/watchfiles-1.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/a4/d1/a54bd3622c6e742e6a01bc3bac45966b7ba886e29827da6b8ca7ae234e21/sentry_sdk-2.40.0-py2.py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/ba/5a/18ad964b0086c6e62e2e7500f7edc89e3faa45033c71c1893d34eed2b2de/dnspython-2.8.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e4/37/af0d2ef3967ac0d6113837b44a4f0bfe1328c2b9763bd5b1744520e5cfed/certifi-2025.10.5-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/62/a1/3d680cbfd5f4b8f15abc1d571870c5fc3e594bb582bc3b64ea099db13e56/jinja2-3.1.6-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e3/30/3c4d035596d3cf444529e0b2953ad0466f6049528a879d27534700580395/rich-14.1.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/a7/c2/fe1e52489ae3122415c51f387e221dd0773709bad6c6cdaa599e8a2c5185/urllib3-2.5.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/15/b3/9b1a8074496371342ec1e796a96f99c82c945a339cd81a8e73de28b4cf9e/anyio-4.11.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/db/d3/9dcc0f5797f070ec8edf30fbadfb200e71d9db6b84d211e3b2085a7589a0/click-8.3.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/45/7c/97d033faf771c9fe960c7b51eb78ab266bfa64cbc917601978963f0c3c7b/fastapi-0.118.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/94/54/e7d793b573f298e1c9013b8c4dade17d481164aa517d1d7148619c2cedbf/markdown_it_py-4.0.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/2a/39/e50c7c3a983047577ee07d2a9e53faf5a69493943ec3f6a384bdc792deb2/httpx-0.28.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/76/c6/c88e154df9c4e1a2a66ccf0005a88dfb2650c1dffb6f5ce603dfbd452ce3/idna-3.10-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/be/72/2db2f49247d0a18b4f1bb9a5a39a0162869acf235f3a96418363947b3d46/starlette-0.48.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/85/cd/584a2ceb5532af99dd09e50919e3615ba99aa127e9850eafe5f31ddfdb9a/uvicorn-0.37.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/7e/f5/f66802a942d491edb555dd61e3a9961140fd64c90bce1eafd741609d334d/httpcore-1.0.9-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/93/1f/5d6dbf551766308f6f50f8baf8e9860be6182911e8106da7a7f73785f4c4/websockets-15.0.1-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/00/22/35617eee79080a5d071d0f14ad698d325ee6b3bf824fc0467c03b30e7fa8/typer-0.19.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/45/58/38b5afbc1a800eeea951b9285d3912613f2603bdf897a4ab0f4bd7f405fc/python_multipart-0.0.20-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/04/4b/29cac41a4d98d144bf5f6d33995617b185d14b22401f75ca86f384e87ff1/h11-0.16.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/c8/49/42821d55ead7b5a87c8d121edf323cb393d8579f63e933002ade900b784f/rich_toolkit-0.15.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/de/15/545e2b6cf2e3be84bc1ed85613edd75b8aea69807a71c26f4ca6a9258e82/email_validator-2.3.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/30/ac/0273f6fcb5f42e314c6d8cd99effae6a5354604d461b8d392b5ec9530a54/markupsafe-3.0.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/5f/ed/539768cf28c661b5b068d66d96a2f155c4971a5d55684a514c1a0e0dec2f/python_dotenv-1.1.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/68/79/7f5a5e5513e6a737e5fb089d9c59c74d4d24dc24d581d3aa519b326bedda/fastapi_cloud_cli-0.3.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/44/6f/7120676b6d73228c96e17f1f794d8ab046fc910d781c8d151120c3f1569e/toml-0.10.2-py2.py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/dc/9b/47798a6c91d8bdb567fe2698fe81e0c6b7cb7ef4d13da4114b41d239f65d/typing_inspection-0.4.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/18/67/36e9267722cc04a6b9f15c7f3441c2363321a3ea07da7ae0c0707beb2a9c/typing_extensions-4.15.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/08/36/7432750f3638324b055496d2c952000bea824259fca70df5577a6a3c172f/fastapi_cli-0.0.13-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e9/44/75a9c9421471a6c4805dbf2356f7c181a29c1879239abab1ea2cc8f38b40/sniffio-1.3.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/b3/38/89ba8ad64ae25be8de66a6d463314cf1eb366222074cfda9ee839c56a4b4/mdurl-0.1.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e0/f9/0595336914c5619e5f28a1fb793285925a8cd4b432c9da0a987836c7f822/shellingham-1.5.4-py2.py3-none-any.whl
Downloading pygments (1.2MiB)
Downloading numpy (16.2MiB)
Downloading pydantic-core (2.0MiB)
Downloading uvloop (3.8MiB)
 Downloaded pydantic-core
 Downloaded uvloop
 Downloaded pygments
 Downloaded numpy
Prepared 41 packages in 4.81s
DEBUG Uninstalled numpy (1406 files, 137 directories)
Uninstalled 1 package in 595ms
Installed 41 packages in 241ms
 + annotated-types==0.7.0
 + anyio==4.11.0
 + certifi==2025.10.5
 + click==8.3.0
 + dnspython==2.8.0
 + email-validator==2.3.0
 + fastapi==0.118.2
 + fastapi-cli==0.0.13
 + fastapi-cloud-cli==0.3.1
 + h11==0.16.0
 + httpcore==1.0.9
 + httptools==0.6.4
 + httpx==0.28.1
 + idna==3.10
 + jinja2==3.1.6
 + markdown-it-py==4.0.0
 + markupsafe==3.0.3
 + mdurl==0.1.2
 - numpy==1.26.4
 + numpy==2.3.3
 + pydantic==2.12.0
 + pydantic-core==2.41.1
 + pygments==2.19.2
 + python-dotenv==1.1.1
 + python-multipart==0.0.20
 + pyyaml==6.0.3
 + rich==14.1.0
 + rich-toolkit==0.15.1
 + rignore==0.7.0
 + sentry-sdk==2.40.0
 + shellingham==1.5.4
 + sniffio==1.3.1
 + starlette==0.48.0
 + toml==0.10.2
 + typer==0.19.2
 + typing-extensions==4.15.0
 + typing-inspection==0.4.2
 + urllib3==2.5.0
 + uvicorn==0.37.0
 + uvloop==0.21.0
 + watchfiles==1.1.0
 + websockets==15.0.1
```

---

_Comment by @zanieb on 2025-10-10 16:25_

The log at

> DEBUG The interpreter in the project environment has a different version (3.11.14) than it was created with (3.11.13)

Indicates why we're recreating the environment.

It sounds like the Python interpreter on the machine has changed versions? i.e., the `pyvenv.cfg` has 3.11.13 recorded but the `python` binary is reporting 3.11.14.

We only added detection for this in a later version of uv.

---

_Comment by @0gust1 on 2025-10-10 17:28_

Ok, thanks !

## First Attempt

=> I changed the content of `.python-version` of the project (from `3.11` to `3.11.3`).

I rebuilt the image/container.

in the container, before any uv command, I displayed `.venv/pyvenv.cfg`
```
root@de0d216a4eaa:/app# cat .venv/pyvenv.cfg 
home = /usr/local/bin
include-system-site-packages = false
version = 3.11.13
executable = /usr/local/bin/python3.11
command = /usr/local/bin/python3 -m venv /opt/venv
```

Then I did `uv sync --frozen --no-dev --inexact --verbose`

```
root@de0d216a4eaa:/app# uv sync --frozen --no-dev --inexact --verbose
DEBUG uv 0.9.1
DEBUG Acquired shared lock for `/root/.cache/uv`
DEBUG Found project root: `/app`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `/app`
DEBUG Reading Python requests from version file at `/app/.python-version`
DEBUG Using Python request `3.11.13` from version file at `.python-version`
DEBUG Checking for Python environment at: `.venv`
DEBUG The interpreter in the project environment has a different version (3.11.14) than it was created with (3.11.13)
DEBUG Searching for Python 3.11.13 in managed installations or search path
DEBUG Searching for managed installations at `/root/.local/share/uv/python`
DEBUG Found `cpython-3.11.14-linux-x86_64-gnu` at `/app/.venv/bin/python3.11` (first executable in the search path)
DEBUG Ignoring Python interpreter at `/app/.venv/bin/python3.11`: system interpreter required
DEBUG Found `cpython-3.11.14-linux-x86_64-gnu` at `/app/.venv/bin/python3` (search path)
DEBUG Ignoring Python interpreter at `/app/.venv/bin/python3`: system interpreter required
DEBUG Found `cpython-3.11.14-linux-x86_64-gnu` at `/app/.venv/bin/python` (search path)
DEBUG Ignoring Python interpreter at `/app/.venv/bin/python`: system interpreter required
DEBUG Found `cpython-3.11.14-linux-x86_64-gnu` at `/usr/local/bin/python3.11` (search path)
DEBUG Skipping interpreter at `/usr/local/bin/python3.11` from search path: does not satisfy request `3.11.13`
DEBUG Found `cpython-3.11.14-linux-x86_64-gnu` at `/usr/local/bin/python3` (search path)
DEBUG Skipping interpreter at `/usr/local/bin/python3` from search path: does not satisfy request `3.11.13`
DEBUG Found `cpython-3.11.14-linux-x86_64-gnu` at `/usr/local/bin/python` (search path)
DEBUG Skipping interpreter at `/usr/local/bin/python` from search path: does not satisfy request `3.11.13`
DEBUG Acquired lock for `/root/.local/share/uv/python`
DEBUG Using request timeout of 30s
INFO Fetching requested Python...
DEBUG Downloading https://github.com/astral-sh/python-build-standalone/releases/download/20251007/cpython-3.11.13%2B20251007-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz
DEBUG Extracting cpython-3.11.13-20251007-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz to temporary location: /root/.local/share/uv/python/.temp/.tmptFNjWL
Downloading cpython-3.11.13-linux-x86_64-gnu (download) (28.8MiB)
 Downloading cpython-3.11.13-linux-x86_64-gnu (download)
DEBUG Moving /root/.local/share/uv/python/.temp/.tmptFNjWL/python to /root/.local/share/uv/python/cpython-3.11.13-linux-x86_64-gnu
DEBUG Released lock at `/root/.local/share/uv/python/.lock`
Using CPython 3.11.13
Removed virtual environment at: .venv
Creating virtual environment at: .venv
DEBUG Assessing Python executable as base candidate: /root/.local/share/uv/python/cpython-3.11.13-linux-x86_64-gnu/bin/python3.11
DEBUG Using base executable for virtual environment: /root/.local/share/uv/python/cpython-3.11.13-linux-x86_64-gnu/bin/python3.11
DEBUG Released lock at `/tmp/uv-1c83b73deef05048.lock`
DEBUG Acquired lock for `.venv`
[....]
```

- **The `.venv` was still deleted and recreated.** 
- **The line `DEBUG The interpreter in the project environment has a different version (3.11.14) than it was created with (3.11.13)` was still present.**

Content of pyvenv.cfg ()
root@de0d216a4eaa:/app# cat .venv/pyvenv.cfg 
home = /root/.local/share/uv/python/cpython-3.11.13-linux-x86_64-gnu/bin
implementation = CPython
uv = 0.9.1
version_info = 3.11.13
include-system-site-packages = false
prompt = api-utils

## Second attempt

- => I changed the content of `.python-version` of the project (from `3.11` to `3.11.13`).
- => I changed the Dockerfile : `FROM python:3.11-slim` to `FROM python:3.11.13-slim`

`uv sync --frozen --no-dev --inexact --verbose` worked. (verbose log below)

- **I don't understand clearly why the first attempt didn't work (as uv's python was 3.11.13). uv seems to have used the system python for its checks (but as the initial `pyvenv.cfg` shows, the extraneous package comes from a 3.11.13 project)**
- **What we are doing is a bit dubious (copying a whole `.venv` from a stage image), but this extraneous package is a bit difficult to work with. Any idea/guidance, if any, is welcome (I'm not so familiar with python's package management intricaties).**

```
root@198f8d839c41:/app# uv sync --frozen --no-dev --inexact --verbose
DEBUG uv 0.8.23
DEBUG Acquired shared lock for `/root/.cache/uv`
DEBUG Found project root: `/app`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `/app`
DEBUG Reading Python requests from version file at `/app/.python-version`
DEBUG Using Python request `3.11.13` from version file at `.python-version`
DEBUG Checking for Python environment at: `.venv`
DEBUG The project environment's Python version satisfies the request: `Python 3.11.13`
DEBUG Released lock at `/tmp/uv-1c83b73deef05048.lock`
DEBUG Acquired lock for `.venv`
DEBUG Using request timeout of 30s
DEBUG Requirement already installed: biopython==1.85
DEBUG Identified uncached distribution: fastapi==0.118.2
DEBUG Identified uncached distribution: pydantic==2.12.0
DEBUG Identified uncached distribution: toml==0.10.2
DEBUG Identified uncached distribution: uvicorn==0.37.0
DEBUG Requirement installed, but mismatched:
  Installed: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName("numpy"), version: "1.26.4", path: "/app/.venv/lib/python3.11/site-packages/numpy-1.26.4.dist-info", cache_info: None, build_info: None }), metadata_cache: OnceLock(<uninit>), tags_cache: OnceLock(<uninit>) }
  Requested: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: "2.3.3" }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: "https", cannot_be_a_base: false, username: "", password: None, host: Some(Domain("pypi.org")), port: None, path: "/simple", query: None, fragment: None }, given: None }), format: Simple }), conflict: None }
DEBUG Identified uncached distribution: numpy==2.3.3
DEBUG Identified uncached distribution: starlette==0.48.0
DEBUG Identified uncached distribution: typing-extensions==4.15.0
DEBUG Identified uncached distribution: email-validator==2.3.0
DEBUG Identified uncached distribution: fastapi-cli==0.0.13
DEBUG Identified uncached distribution: httpx==0.28.1
DEBUG Identified uncached distribution: jinja2==3.1.6
DEBUG Identified uncached distribution: python-multipart==0.0.20
DEBUG Identified uncached distribution: annotated-types==0.7.0
DEBUG Identified uncached distribution: pydantic-core==2.41.1
DEBUG Identified uncached distribution: typing-inspection==0.4.2
DEBUG Identified uncached distribution: click==8.3.0
DEBUG Identified uncached distribution: h11==0.16.0
DEBUG Identified uncached distribution: anyio==4.11.0
DEBUG Identified uncached distribution: dnspython==2.8.0
DEBUG Identified uncached distribution: idna==3.10
DEBUG Identified uncached distribution: rich-toolkit==0.15.1
DEBUG Identified uncached distribution: typer==0.19.2
DEBUG Identified uncached distribution: fastapi-cloud-cli==0.3.1
DEBUG Identified uncached distribution: certifi==2025.10.5
DEBUG Identified uncached distribution: httpcore==1.0.9
DEBUG Identified uncached distribution: markupsafe==3.0.3
DEBUG Identified uncached distribution: httptools==0.6.4
DEBUG Identified uncached distribution: python-dotenv==1.1.1
DEBUG Identified uncached distribution: pyyaml==6.0.3
DEBUG Identified uncached distribution: uvloop==0.21.0
DEBUG Identified uncached distribution: watchfiles==1.1.0
DEBUG Identified uncached distribution: websockets==15.0.1
DEBUG Identified uncached distribution: sniffio==1.3.1
DEBUG Identified uncached distribution: rich==14.1.0
DEBUG Identified uncached distribution: shellingham==1.5.4
DEBUG Identified uncached distribution: rignore==0.7.0
DEBUG Identified uncached distribution: sentry-sdk==2.40.0
DEBUG Identified uncached distribution: markdown-it-py==4.0.0
DEBUG Identified uncached distribution: pygments==2.19.2
DEBUG Identified uncached distribution: urllib3==2.5.0
DEBUG Identified uncached distribution: mdurl==0.1.2
DEBUG Unnecessary package: anarci==1.3
DEBUG Preserving seed package: pip==25.2
DEBUG Preserving seed package: setuptools==65.5.0
DEBUG No cache entry for: https://files.pythonhosted.org/packages/15/b3/9b1a8074496371342ec1e796a96f99c82c945a339cd81a8e73de28b4cf9e/anyio-4.11.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/10/a2/010b0e27ddeacab7839957d7a8f00e91206e0c2c47abbb5f35a2630e5387/numpy-2.3.3-cp311-cp311-manylinux_2_27_x86_64.manylinux_2_28_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/8a/ca/0864176a649838b838f36d44bf31c451597ab363b60dc9e09c9630619d41/uvloop-0.21.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e5/4f/3aaa3bd1ea420a15acc42d7d3ccb3b0bbc5444ae2f9dbc1959f8173e16b8/pydantic_core-2.41.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/b9/56/c0a03cb643ca41091f0377ffea3a35ae3f3cff39b075ca94eec35fae6ed0/rignore-0.7.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/71/60/917329f640924b18ff085ab889a11c763e0b573da888e8404ff486657602/pyyaml-6.0.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/c7/21/705964c7812476f378728bdf590ca4b771ec72385c533964653c68e86bdc/pygments-2.19.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/f4/9d/d5c855424e2e5b6b626fbc6ec514d8e655a600377ce283008b115abb7445/pydantic-2.12.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/2b/a1/ec0a606bde4853d6c4a578f9391eeb3684a9aea736a8eb217e3e00aa89a1/watchfiles-1.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/a4/d1/a54bd3622c6e742e6a01bc3bac45966b7ba886e29827da6b8ca7ae234e21/sentry_sdk-2.40.0-py2.py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/ba/5a/18ad964b0086c6e62e2e7500f7edc89e3faa45033c71c1893d34eed2b2de/dnspython-2.8.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e3/30/3c4d035596d3cf444529e0b2953ad0466f6049528a879d27534700580395/rich-14.1.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/93/1f/5d6dbf551766308f6f50f8baf8e9860be6182911e8106da7a7f73785f4c4/websockets-15.0.1-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e4/37/af0d2ef3967ac0d6113837b44a4f0bfe1328c2b9763bd5b1744520e5cfed/certifi-2025.10.5-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/62/a1/3d680cbfd5f4b8f15abc1d571870c5fc3e594bb582bc3b64ea099db13e56/jinja2-3.1.6-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/a7/c2/fe1e52489ae3122415c51f387e221dd0773709bad6c6cdaa599e8a2c5185/urllib3-2.5.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/b1/2f/205d1f2a190b72da6ffb5f41a3736c26d6fa7871101212b15e9b5cd8f61d/httptools-0.6.4-cp311-cp311-manylinux_2_5_x86_64.manylinux1_x86_64.manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/db/d3/9dcc0f5797f070ec8edf30fbadfb200e71d9db6b84d211e3b2085a7589a0/click-8.3.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/45/7c/97d033faf771c9fe960c7b51eb78ab266bfa64cbc917601978963f0c3c7b/fastapi-0.118.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/94/54/e7d793b573f298e1c9013b8c4dade17d481164aa517d1d7148619c2cedbf/markdown_it_py-4.0.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/7e/f5/f66802a942d491edb555dd61e3a9961140fd64c90bce1eafd741609d334d/httpcore-1.0.9-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/be/72/2db2f49247d0a18b4f1bb9a5a39a0162869acf235f3a96418363947b3d46/starlette-0.48.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/2a/39/e50c7c3a983047577ee07d2a9e53faf5a69493943ec3f6a384bdc792deb2/httpx-0.28.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/76/c6/c88e154df9c4e1a2a66ccf0005a88dfb2650c1dffb6f5ce603dfbd452ce3/idna-3.10-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/85/cd/584a2ceb5532af99dd09e50919e3615ba99aa127e9850eafe5f31ddfdb9a/uvicorn-0.37.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/00/22/35617eee79080a5d071d0f14ad698d325ee6b3bf824fc0467c03b30e7fa8/typer-0.19.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/18/67/36e9267722cc04a6b9f15c7f3441c2363321a3ea07da7ae0c0707beb2a9c/typing_extensions-4.15.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/04/4b/29cac41a4d98d144bf5f6d33995617b185d14b22401f75ca86f384e87ff1/h11-0.16.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/de/15/545e2b6cf2e3be84bc1ed85613edd75b8aea69807a71c26f4ca6a9258e82/email_validator-2.3.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/c8/49/42821d55ead7b5a87c8d121edf323cb393d8579f63e933002ade900b784f/rich_toolkit-0.15.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/30/ac/0273f6fcb5f42e314c6d8cd99effae6a5354604d461b8d392b5ec9530a54/markupsafe-3.0.3-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/45/58/38b5afbc1a800eeea951b9285d3912613f2603bdf897a4ab0f4bd7f405fc/python_multipart-0.0.20-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/dc/9b/47798a6c91d8bdb567fe2698fe81e0c6b7cb7ef4d13da4114b41d239f65d/typing_inspection-0.4.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/44/6f/7120676b6d73228c96e17f1f794d8ab046fc910d781c8d151120c3f1569e/toml-0.10.2-py2.py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/68/79/7f5a5e5513e6a737e5fb089d9c59c74d4d24dc24d581d3aa519b326bedda/fastapi_cloud_cli-0.3.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/5f/ed/539768cf28c661b5b068d66d96a2f155c4971a5d55684a514c1a0e0dec2f/python_dotenv-1.1.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/78/b6/6307fbef88d9b5ee7421e68d78a9f162e0da4900bc5f5793f6d3d0e34fb8/annotated_types-0.7.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/08/36/7432750f3638324b055496d2c952000bea824259fca70df5577a6a3c172f/fastapi_cli-0.0.13-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e9/44/75a9c9421471a6c4805dbf2356f7c181a29c1879239abab1ea2cc8f38b40/sniffio-1.3.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/b3/38/89ba8ad64ae25be8de66a6d463314cf1eb366222074cfda9ee839c56a4b4/mdurl-0.1.2-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e0/f9/0595336914c5619e5f28a1fb793285925a8cd4b432c9da0a987836c7f822/shellingham-1.5.4-py2.py3-none-any.whl
Downloading uvloop (3.8MiB)
Downloading pygments (1.2MiB)
Downloading pydantic-core (2.0MiB)
Downloading numpy (16.2MiB)
 Downloading pydantic-core
 Downloading uvloop
 Downloading pygments
 Downloading numpy
Prepared 41 packages in 6.91s
DEBUG Uninstalled numpy (1406 files, 137 directories)
Uninstalled 1 package in 829ms
Installed 41 packages in 380ms
 + annotated-types==0.7.0
 + anyio==4.11.0
 + certifi==2025.10.5
 + click==8.3.0
 + dnspython==2.8.0
 + email-validator==2.3.0
 + fastapi==0.118.2
 + fastapi-cli==0.0.13
 + fastapi-cloud-cli==0.3.1
 + h11==0.16.0
 + httpcore==1.0.9
 + httptools==0.6.4
 + httpx==0.28.1
 + idna==3.10
 + jinja2==3.1.6
 + markdown-it-py==4.0.0
 + markupsafe==3.0.3
 + mdurl==0.1.2
 - numpy==1.26.4
 + numpy==2.3.3
 + pydantic==2.12.0
 + pydantic-core==2.41.1
 + pygments==2.19.2
 + python-dotenv==1.1.1
 + python-multipart==0.0.20
 + pyyaml==6.0.3
 + rich==14.1.0
 + rich-toolkit==0.15.1
 + rignore==0.7.0
 + sentry-sdk==2.40.0
 + shellingham==1.5.4
 + sniffio==1.3.1
 + starlette==0.48.0
 + toml==0.10.2
 + typer==0.19.2
 + typing-extensions==4.15.0
 + typing-inspection==0.4.2
 + urllib3==2.5.0
 + uvicorn==0.37.0
 + uvloop==0.21.0
 + watchfiles==1.1.0
 + websockets==15.0.1
DEBUG Released lock at `/app/.venv/.lock`
DEBUG Released lock at `/root/.cache/uv/.lock`
```


---

_Comment by @zanieb on 2025-10-10 17:43_

> What we are doing is a bit dubious (copying a whole .venv from a stage image), but this extraneous package is a bit difficult to work with. Any idea/guidance, if any, is welcome (I'm not so familiar with python's package management intricaties).

Can you share a Dockerfile?

If you copy the `.venv` from a stage image, you need to make sure that the Python version in the stage and final image match exactly.

---

_Comment by @zanieb on 2025-10-10 17:44_

We have an example at https://github.com/astral-sh/uv-docker-example/blob/main/multistage.Dockerfile

---

_Comment by @0gust1 on 2025-10-13 10:49_

@zanieb many thanks !

> Can you share a Dockerfile?

With the provided examples (they have changed since last time I read them), it should be ok. You've already spent enough time here :)

I guess you can close the issue, as it's not really a bug, but more a behavior change of `uv` which we didn't noticed.

Many thanks again, you were very helpful !

---

_Comment by @zanieb on 2025-10-13 13:39_

Thanks!

---

_Closed by @zanieb on 2025-10-13 13:39_

---
