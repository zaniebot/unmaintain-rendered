---
number: 9346
title: Feature request - pre-build / pre-read hook for security scanning
type: issue
state: open
author: f3flight
labels:
  - question
  - security
  - rustlib
assignees: []
created_at: 2024-11-22T02:43:14Z
updated_at: 2024-12-17T20:01:28Z
url: https://github.com/astral-sh/uv/issues/9346
synced_at: 2026-01-07T12:31:15-06:00
---

# Feature request - pre-build / pre-read hook for security scanning

---

_Issue opened by @f3flight on 2024-11-22 02:43_

Hi UV devs! Is it possible to make uv call some external tool before it attempts to build a package from source? Essentially, I'm looking for a way to pass all artifacts that UV fetches from certain external indexes through a security scanner before they are passed to unzip and more importantly, to python for execution (in case of sdists). Is that possible? If not, would it be possible to add such a feature? I was not able to find much on hooks available in uv right now.

---

_Comment by @samypr100 on 2024-11-23 02:13_

Curious, does this currently exists in pip? If so, how does it work?

---

_Label `security` added by @samypr100 on 2024-11-23 02:14_

---

_Label `question` added by @samypr100 on 2024-11-23 02:14_

---

_Comment by @f3flight on 2024-11-23 02:52_

@samypr100 no, pip doesn't have such a feature. Nearest would be "pip download --only-binary :all:" + scanning the downloaded files. In our org we have made some patches to pip so I know where it handles download and file saving, also since pip is python it was easy for me to patch; But we seek to improve performance, and I'm looking at uv now. I would, however, like to avoid maintaining a custom uv fork, if possible, right now my rust skills are zero.

---

_Label `rustlib` added by @samypr100 on 2024-11-23 02:58_

---

_Comment by @samypr100 on 2024-11-23 03:07_

Interesting. Closest might be something like discussed in https://github.com/astral-sh/uv/issues/3400, althought albeit trickier due to the streaming nature since in your case you'd want to fully download first, "scan", and then extract, etc. which is afaik not how uv works under the hood even without the scan step.

From uv's perspective it might be better to rely on https://github.com/astral-sh/uv/issues/3163 in the mean time once there's a suitable design / implementation (e.g. like https://github.com/astral-sh/uv/issues/3163#issuecomment-2481505055).

---

_Comment by @f3flight on 2024-12-17 20:01_

Hi @samypr100! #3163 won't be good enough, because some packages publish only sdist; we have to use --no-build to ensure security during resolution workflow, and for such packages this flag would cause failure to resolve. Therefore at least for sdists, we need some callback to pass the artifact through security validation before it is used for build.

---

_Referenced in [astral-sh/uv#11826](../../astral-sh/uv/issues/11826.md) on 2025-02-27 09:34_

---
