---
number: 11635
title: uv build is looking for the wrong sdist file
type: issue
state: closed
author: edgarrmondragon
labels:
  - bug
assignees: []
created_at: 2025-02-19T19:33:17Z
updated_at: 2025-02-20T08:11:17Z
url: https://github.com/astral-sh/uv/issues/11635
synced_at: 2026-01-07T12:31:15-06:00
---

# uv build is looking for the wrong sdist file

---

_Issue opened by @edgarrmondragon on 2025-02-19 19:33_

### Summary

This is a bit of a weird issue.

First, here's how to reproduce it:

```console
$ git clone https://github.com/MeltanoLabs/tap-github tap-github-repro
...

$ cd tap-github-repro

$ uv build
Building source distribution...
  × Failed to build `/projects/tap-github-repro`
  ╰─▶ failed to open file `/projects/tap-github-repro/dist/meltanolabs_tap_github-1.13.0.post1.dev0+570577.tar.gz`: No such file or directory (os error 2)
```

But the file is there, just with a different name corresponding to the HEAD commit:

```console
$ git --no-pager log --pretty=format:"%H" -n1
05705771e2c4fa6b169e3dafa158399ddb970e2d

$ ls dist
meltanolabs_tap_github-1.13.0.post1.dev0+0570577.tar.gz
```

Notice how uv is looking for

```diff
- meltanolabs_tap_github-1.13.0.post1.dev0+0570577.tar.gz
+ meltanolabs_tap_github-1.13.0.post1.dev0+570577.tar.gz
```

Now, `build` seems to do the right thing:

```console
$ uvx --from build pyproject-build .
* Creating isolated environment: venv+pip...
* Installing packages in isolated environment:
  - poetry-core==2.1.1
  - poetry-dynamic-versioning==1.7.1
* Getting build dependencies for sdist...
* Building sdist...
* Building wheel from sdist
* Creating isolated environment: venv+pip...
* Installing packages in isolated environment:
  - poetry-core==2.1.1
  - poetry-dynamic-versioning==1.7.1
* Getting build dependencies for wheel...
* Building wheel...
Successfully built meltanolabs_tap_github-1.13.0.post1.dev0+0570577.tar.gz and meltanolabs_tap_github-1.13.0.post1.dev0+0570577-py3-none-any.whl
```


### Platform

Darwin 24.3.0 arm64

### Version

uv 0.6.1 (c91ee82a8 2025-02-17)

### Python version

_No response_

---

_Label `bug` added by @edgarrmondragon on 2025-02-19 19:33_

---

_Comment by @charliermarsh on 2025-02-19 19:36_

My guess is that the issue here is... when we store the local tag, if it's all numeric, we store it as a number. So we lose the leading zero.

---

_Renamed from "uv build is looking for a the wrong sdist file" to "uv build is looking for the wrong sdist file" by @edgarrmondragon on 2025-02-19 19:37_

---

_Comment by @zanieb on 2025-02-19 19:37_

Thanks for the report. Presumably related to https://github.com/astral-sh/uv/pull/11593#discussion_r1959855802 ?

---

_Comment by @charliermarsh on 2025-02-19 19:48_

Separate from #11593, we should probably change `LocalSegment::Number` to preserve leading zeros.

---

_Comment by @charliermarsh on 2025-02-19 19:50_

Or maybe that's not actually a goal, to have full-fidelity there. We store any string local segments as lowercase, so we lose the casing there already in the non-numeric case.

---

_Comment by @jtfmumm on 2025-02-19 19:59_

Based on reproducing this locally, it looks like #11593 fixes this.

---

_Referenced in [astral-sh/uv#11593](../../astral-sh/uv/pulls/11593.md) on 2025-02-19 22:36_

---

_Assigned to @jtfmumm by @jtfmumm on 2025-02-20 07:59_

---

_Closed by @jtfmumm on 2025-02-20 08:11_

---

_Closed by @jtfmumm on 2025-02-20 08:11_

---
