---
number: 5043
title: Requires-python causality is only half-explained when an extra is involved
type: issue
state: open
author: konstin
labels:
  - error messages
assignees: []
created_at: 2024-07-14T14:05:12Z
updated_at: 2024-07-14T14:58:00Z
url: https://github.com/astral-sh/uv/issues/5043
synced_at: 2026-01-07T12:31:14-06:00
---

# Requires-python causality is only half-explained when an extra is involved

---

_Issue opened by @konstin on 2024-07-14 14:05_

When specifying the dependency on colabfold directly, we get a logical trace that explains to us that colabfold 1.5.5 only support python 3.9 to 3.11, while we are on 3.12:

```
$ echo "colabfold==1.5.5" | uv pip compile -p 3.12 -
  × No solution found when resolving dependencies:
  ╰─▶ Because the requested Python version (3.12.0) does not satisfy Python>=3.9,<3.12 and colabfold==1.5.5 depends on
      Python>=3.9,<3.12, we can conclude that colabfold==1.5.5 cannot be used.
      And because you require colabfold==1.5.5, we can conclude that the requirements are unsatisfiable.
```

The same requirement with an extra skip over half of these steps:

```
$ echo "colabfold[alphafold]==1.5.5" | uv pip compile -p 3.12 -
  × No solution found when resolving dependencies:
  ╰─▶ Because the requested Python version (3.12.0) does not satisfy Python>=3.9,<3.12 and you require colabfold[alphafold]==1.5.5,
      we can conclude that the requirements are unsatisfiable.
```

In the latter example, we can guess the correlation, but there's no reason to not emit the same better error as without the extra.



---

_Label `error messages` added by @konstin on 2024-07-14 14:05_

---

_Referenced in [astral-sh/uv#5045](../../astral-sh/uv/issues/5045.md) on 2024-07-14 14:23_

---

_Comment by @charliermarsh on 2024-07-14 14:57_

Probably because we remove the extra package in the tree in `collapse_proxies`.

---

_Comment by @charliermarsh on 2024-07-14 14:58_

I suggest playing with that method.

---
