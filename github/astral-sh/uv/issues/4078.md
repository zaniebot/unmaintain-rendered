---
number: 4078
title: Support directories passed via --index-url
type: issue
state: closed
author: ericmarkmartin
labels:
  - enhancement
assignees: []
created_at: 2024-06-05T22:33:48Z
updated_at: 2024-12-13T14:59:03Z
url: https://github.com/astral-sh/uv/issues/4078
synced_at: 2026-01-07T12:31:14-06:00
---

# Support directories passed via --index-url

---

_Issue opened by @ericmarkmartin on 2024-06-05 22:33_

The pip install docs say the following `--index-url` (emphasis mine)

> This should point to a repository compliant with PEP 503 ... _or a local directory laid out in the same format_

Empirically, pip install does work with either a path passed in for `--index-url` (though in this case it warns about the lack of scheme) or a file-scheme url.

Currently, when passed a directory for `--index-url`, `uv` complains about it being a `relative URL without a base`. When passed a file scheme url, it encounters a reqwest error in the request builder: `URL scheme is not allowed`.

Given that pip warns when given a naked directory, it seems okay to not support this, but I have a use case that would benefit from support for the file scheme urls.

---

_Comment by @charliermarsh on 2024-06-05 22:35_

What is the advantage of using `--index-url` over `--find-links` for searching from a local directory?

---

_Comment by @ericmarkmartin on 2024-06-05 22:36_

I'll also note that I'm happy to work on a patch if folks think this would be okay to add, but I might need a bit of guidance. I'm aware that uv supports installation of requirements specified with file scheme urls, but I'm new to this codebase and could probably benefit from some pointers on how to leverage that code.

---

_Label `enhancement` added by @charliermarsh on 2024-06-05 23:35_

---

_Comment by @ericmarkmartin on 2024-06-06 00:17_

> What is the advantage of using `--index-url` over `--find-links` for searching from a local directory?

As I understand it, `--find-links` only works for a flat index, so the distributions would have to be immediate descendants of whatever path you pass.

> If a path, the target must be a directory that contains package as wheel files (`.whl`) or source distributions (`.tar.gz` or `.zip`) at the top level.

I want to be able to pass a parent directory of this, e.g. `foo` where `foo/numpy` holds `numpy` wheels.

---

_Comment by @charliermarsh on 2024-06-06 00:25_

Why is it important, though, that you can pass in a parent directory with HTML files, rather than dumping the artifacts into a flat directory? I'm just trying to understand why it's necessary to support before committing to it.

FWIW it seems reasonable to support, but it kinda depends on how much complexity it adds.


---

_Referenced in [astral-sh/uv#4226](../../astral-sh/uv/pulls/4226.md) on 2024-06-11 00:17_

---

_Closed by @charliermarsh on 2024-06-11 02:27_

---

_Comment by @AbaoFromCUG on 2024-12-13 14:56_


I have the same question. I'm also curious about the reason behind this design. My directory doesn't contain an index.html.
Why  should we create an index.html inside the directory.  In my opinion,   a naked directory is enough.

Are there any tools that can help me generate index.html?

# My case
I have some wheels, I want to generate requirements.txt with
```shell
uv pip compile  -o requirements.txt --default-index=/path/to/wheels  requirements.in 
```
```
/path/to/wheels/
               - a
                 - a-1.0.0.whl
                 - a-2.0.0.whl
               - b
                 - b-1.0.0.whl
                 - b-2.0.0.whl

```


---
