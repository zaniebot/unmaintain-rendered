---
number: 9637
title: "Selecting .venv/bin/python as an active interpreter in VSCode doesn't enable IDE features"
type: issue
state: open
author: oulianov
labels:
  - external
assignees: []
created_at: 2024-12-04T13:18:49Z
updated_at: 2025-12-07T19:11:05Z
url: https://github.com/astral-sh/uv/issues/9637
synced_at: 2026-01-07T12:31:15-06:00
---

# Selecting .venv/bin/python as an active interpreter in VSCode doesn't enable IDE features

---

_Issue opened by @oulianov on 2024-12-04 13:18_

**Maintainer edit: Please set `python.usePythonEnvironmentsExtension: true` and check if the problem persists.** See https://github.com/astral-sh/uv/issues/9637#issuecomment-3197523231 for more detail.

---

Hello, 

I develop my Python app with uv to handle dependencies. I want to benefit from intellisense, type hints, mypy and ruff in VSCode while I develop my app. VSCode is the most popular IDE for Python developers.

Usually, I create the a virtual env with `python -m venv`. I then select the virtual env in VSCode as an "Active Interpreter". This adds support from all the VSCode features mentioned. 


With uv, a folder .venv is created. However, when I select this .venv as an active interpreter in VSCode, **nothing changes in my editor.** Intellisense, type hints, and mypy don't work. Installed modules are not found. Custom modules are not found either. 

When I run "Reload Window", this results in a toast on the bottom right "Reactivating terminals" that never completes.

Restarting VSCode with the config doesn't make it work. 


This means for now I need to have multiple virtual environment running. One for uv, another for development. This voids the usefulness of uv for package management. 


**How to make uv virtual environments work with VSCode?** 

---

**[EDIT] HERE IS A WORKAROUND!**  Here's a foolproof technique my buddy @Jeerhz showed me to select a uv `.venv` as an active interpreter in vscode. 


1. First, copy the absolute path to the `.venv`. **Not** to the /bin/python, only the .venv folder.

<img width="355" alt="Image" src="https://github.com/user-attachments/assets/2492bd12-aed1-4cbc-8185-6aa33ad368a0" />

2. Do Cmd+Shift+P, then look for "Python: Select interpreter". Press Enter. Select the option: "Enter interpreter path".

<img width="535" alt="Image" src="https://github.com/user-attachments/assets/d9e57cc3-0b3f-4f52-bd55-1750900e4639" />

3. Now in this field you copy paste the absolute path to the .venv folder. 

<img width="456" alt="Image" src="https://github.com/user-attachments/assets/249a183f-df01-4db9-bd62-1343895d80d0" />

<img width="397" alt="Image" src="https://github.com/user-attachments/assets/8071a06f-d38b-426b-ac9d-1da8c8c36128" />

Press enter and now you have the right Python environment with all the dependencies. 

Selecting .venv as an active interpreter in VSCode works. But selecting .venv/bin/python doesn't.

---

**Recommendation:** use an extension like [teticio.python-envy](https://marketplace.visualstudio.com/items?itemName=teticio.python-envy) to automatically set the interpreter path based on the file you're currently looking at, compare https://github.com/astral-sh/uv/issues/9637#issuecomment-2813097995 . This is what I currently use and it has been working quite well in my monorepo setup.

---

_Renamed from "Selecting .venv/bin/python as an active interpreter in VSCode doesn't enable features" to "Selecting .venv/bin/python as an active interpreter in VSCode doesn't enable IDE features" by @oulianov on 2024-12-04 13:19_

---

_Comment by @zanieb on 2024-12-04 17:02_

I don't know what to say here, this is pretty basic functionality and I cannot reproduce it

```
‚ùØ uv init example
Initialized project `example` at `/Users/zb/workspace/uv/example`
‚ùØ code example
‚ùØ cd example
‚ùØ uv add httpx
Using CPython 3.12.7
Creating virtual environment at: .venv
Resolved 8 packages in 113ms
Installed 7 packages in 13ms
 + anyio==4.6.2.post1
 + certifi==2024.8.30
 + h11==0.14.0
 + httpcore==1.0.7
 + httpx==0.28.0
 + idna==3.10
 + sniffio==1.3.1
```

![Image](https://github.com/user-attachments/assets/747b092b-8bc6-4776-954b-fcbbda0e96ed)

Can you share more details?


---

_Label `needs-mre` added by @zanieb on 2024-12-04 17:03_

---

_Comment by @oulianov on 2024-12-04 23:27_

Hello, Zanieb!

OK, this is a relief to know this is supposed to work. Here are more details:


Following the same steps as you, this is what I get after running `uv add httpx` in VSCode : "Can't resolve httpx import". 
This is ok : I need to activate the python environment.
![Image](https://github.com/user-attachments/assets/23443f44-2c84-4972-8c65-ca7b8462c8ec)

I do Command+Shift+P. This lists the interpreters, but the local .venv doesn't show up. This is alright, I can still enter the path to it manually. 
![Image](https://github.com/user-attachments/assets/5da66123-877a-419e-926a-223cd966bea1)

Then, I manually select the path to the .venv created by uv: `.venv/bin/python` by clicking on "Enter Interpreter path". 
This doesn't enable intellisense.  
I can select any other environment (either conda, either created with python -m venv) normally. 
A message saying "Reactivating terminals" in the bottom left runs infinitely. Reloading the window doesn't stop this. I would need to quit and restart vscode. 
![Image](https://github.com/user-attachments/assets/225d868a-6b2b-4fe4-83be-a3da959fb529)

If I try to do `uv run hello.py` in the VSCode terminal, the process hangs and never completes. If I Ctrl+C to stop the execution and instead do `python hello.py`, the program runs normally. 

Running `uv run hello.py` in a new terminal results in this:
```
error: Querying Python at `/Users/nicolasoulianov/test/example/.venv/bin/python3` failed with exit status signal: 9 (SIGKILL)
--- stdout:

--- stderr:

---
```
This error occurs whether VSCode is open or not.
![Image](https://github.com/user-attachments/assets/7d56ef8e-9304-4f10-909d-571932d8adb7)


When I go again to select an interpreter, VSCode tells me that I'm using `~/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python`.
![Image](https://github.com/user-attachments/assets/8b5422ab-cb1a-4931-a08e-227e8ad0049b)


- I have conda `23.7.4` installed. I'm using MacOS Sonoma 14.6.1 on a MacBook M3 Pro. 
- A colleague has the same problem (he use a similar machine to mine).

What else can I share with you to help you further? 


---

_Comment by @oulianov on 2024-12-04 23:41_

I think I figured this out: the uv .venv can't be selected in VSCode when the .venv is not at the root of the VSCode workspace. 

For example, this doesn't work: .venv is in example/.venv
![Image](https://github.com/user-attachments/assets/17c9adfa-fe8d-4dc9-bae4-23568a9d0292)

However, this works: .venv is at the root of the VSCode workspace.
![Image](https://github.com/user-attachments/assets/a54397a7-2196-4340-be88-1a20473dd9ca)

This is pretty weird. I'm working with a lot of monorepo so I'm used to have multiple Python projects with different configs in the same VSCode window. 

Do you know of a way to circumvent this behavior ? So that I can still have intellisense, even if the uv `.venv` is not at the root of the VSCode workspace ?

---

_Comment by @zanieb on 2024-12-05 01:11_

That's.. very weird. I'm not sure what would cause that. 

Perhaps we should narrow down `uv run python` failing? Can you produce that consistently? 

Can you invoke Python directly? e.g.

```
‚ùØ uv python find --python-preference only-managed --system
/Users/zb/.local/share/uv/python/cpython-3.12.7-macos-aarch64-none/bin/python3.12
‚ùØ /Users/zb/.local/share/uv/python/cpython-3.12.7-macos-aarch64-none/bin/python3.12 --version
Python 3.12.7
```

Can you create a virtual environment with it and use it?

```
‚ùØ /Users/zb/.local/share/uv/python/cpython-3.12.7-macos-aarch64-none/bin/python3.12 -m venv ./venv
‚ùØ ./venv/bin/python --version
Python 3.12.7
```


---

_Comment by @oulianov on 2024-12-05 10:22_

Unfortunately, I can't reproduce the issue with just `uv run python` 

I can invoke Python directly. I can create venv with it and use it.

```
nicolasoulianov@MacBook-Pro-de-Nicolas-2 teleop % uv python find --python-preference only-managed --system
/Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10
nicolasoulianov@MacBook-Pro-de-Nicolas-2 teleop % /Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 --version
Python 3.10.15
nicolasoulianov@MacBook-Pro-de-Nicolas-2 teleop % /Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 -m venv ./venv2
nicolasoulianov@MacBook-Pro-de-Nicolas-2 teleop % ./venv2/bin/python --version
Python 3.10.15
```

Here is another piece of information. When I select the interpreter in .venv/bin/python, I see that I select a shortcut towards the true interpreter (localized at `/Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10`). Maybe this information is not enough for VSCode to make sense of the dependencies? 
![Image](https://github.com/user-attachments/assets/ff2df880-d1a1-4ba8-8e5f-b225c049c9d4)


Do you work with uv-managed .venv in subfolders in VSCode ? Or you know someone that does ?
How does Intellisense work for you and them ?

---

_Comment by @oulianov on 2024-12-05 10:28_

I opened a new VSCode window and tried again activating the .venv environment. Now, when I run

```
/Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 --version
```

The program hangs. I can't even Ctrl+C to stop it. 

![Image](https://github.com/user-attachments/assets/2493728b-5507-4242-b7ce-98bdfb76a00e)

I have the infinite "Reactivating terminals" loading bar
![Image](https://github.com/user-attachments/assets/159bf625-41fa-4dc1-8533-4258661421ca)


I need to restart my computer to be able to use everything normally again. 

---

_Comment by @zanieb on 2024-12-05 15:13_

Does everything work if you do `uv venv --python-preference only-system` to skip using our managed interpreters?

Do you have an antivirus or similar?

Can you look at the VSCode Python debug logs?

---

_Comment by @oulianov on 2024-12-05 16:10_

I enabled VSCode Python debug logs. 

I don't have an antivirus. However, I'm running Vanta Agent and 1Password. 

## Using managed venv

If I select the managed uv .venv/bin/python as an active interpreter, I have a null error code. 
```
2024-12-05 16:37:48.507 [info] > ~/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 -I ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py
2024-12-05 16:37:48.511 [error] Error: Command failed: /Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 -I /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py

    at genericNodeError (node:internal/errors:984:15)
    at wrappedFn (node:internal/errors:538:14)
    at ChildProcess.exithandler (node:child_process:423:12)
    at ChildProcess.emit (node:events:531:35)
    at maybeClose (node:internal/child_process:1105:16)
    at Socket.<anonymous> (node:internal/child_process:457:11)
    at Socket.emit (node:events:519:28)
    at Pipe.<anonymous> (node:net:339:12) {
  code: null,
  killed: false,
  signal: 'SIGKILL',
  cmd: '/Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 -I /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py'
}
2024-12-05 16:37:50.513 [info] > ~/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 -I ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py
```

I have then the "Reactivating terminals error"

Running 
```
/Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10
```
In a terminal hangs the process. It doesn't show the Python console.


## Creating a new venv

I create a .venv with `uv venv --python-preference only-system` to skip the managed interpreters.

I try to select it but nothing happens, not even an error message. I delete the conda environment I had which was named `teleop`, the same name as the folder containing the .venv. 

I try again to select the .venv. Now, I have an error when selecting it. The error code is 126. I see "Permission denied". I also have a visible error toaster in VSCode. This is the first time it has been the case. 

![Image](https://github.com/user-attachments/assets/fdb7c8e1-26c2-471d-8965-535ab0810291)

```
2024-12-05 16:50:38.156 [error] Error: Command failed: /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python -I /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py
/bin/sh: /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python: Permission denied

    at genericNodeError (node:internal/errors:984:15)
    at wrappedFn (node:internal/errors:538:14)
    at ChildProcess.exithandler (node:child_process:423:12)
    at ChildProcess.emit (node:events:531:35)
    at maybeClose (node:internal/child_process:1105:16)
    at Socket.<anonymous> (node:internal/child_process:457:11)
    at Socket.emit (node:events:519:28)
    at Pipe.<anonymous> (node:net:339:12) {
  code: 126,
  killed: false,
  signal: null,
  cmd: '/Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python -I /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py'
``` 

I try to run the Python interpreter in my console, and I get permission denied as well. 
```
(teleop) (base) nicolasoulianov@MacBook-Pro-de-Nicolas-2 teleop % /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python
zsh: permission denied: /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python
```

I then change the authorizations of the .venv folder
```
sudo chmod -R 777 .venv
```

I run this command. It doesn't show anything in the command line.
```
 /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python
```

I have this error in the VSCode Python extension logs : failed to parse json
```
2024-12-05 16:59:22.698 [info] > ./teleop/.venv/bin/python -I ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py
2024-12-05 16:59:22.701 [error] Failed to parse interpreter information for >> /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python -I /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py << with Error: python /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py returned bad JSON () (SyntaxError: Unexpected end of JSON input)
```

Could this be an authorization issue with uv, my home folder, MacOS "security features", or something else ?ü§î 

---

_Comment by @zanieb on 2024-12-05 23:18_

Have you tried updating VSCode to the latest version?

---

_Comment by @oulianov on 2024-12-06 10:59_

I am on the VSCode latest version available

![Image](https://github.com/user-attachments/assets/c9ac2fc8-2e0c-468e-9467-b9c2eb62172f)

```
Version: 1.95.3 (Universal)
Commit: f1a4fb101478ce6ec82fe9627c43efbf9e98c813
Date: 2024-11-13T14:50:04.152Z (3 wks ago)
Electron: 32.2.1
ElectronBuildId: 10427718
Chromium: 128.0.6613.186
Node.js: 20.18.0
V8: 12.8.374.38-electron.0
OS: Darwin arm64 23.6.0
```

---

_Comment by @zanieb on 2024-12-06 14:54_

I'm sorry I'm out of suggestions here if you've updated VS Code and restarted it. We can't reproduce this problem.

For reference, I'm using the exact same build

```
Version: 1.95.3
Commit: f1a4fb101478ce6ec82fe9627c43efbf9e98c813
Date: 2024-11-13T14:50:04.152Z (3 wks ago)
Electron: 32.2.1
ElectronBuildId: 10427718
Chromium: 128.0.6613.186
Node.js: 20.18.0
V8: 12.8.374.38-electron.0
OS: Darwin arm64 23.5.0
```

---

_Comment by @oulianov on 2024-12-10 08:59_

Hmm... This is all very strange.

I assume there must something cursed about my setup :  
- multiple .venv in a single VSCode workspace
- nested python projects

I'll simplify my setup and keep you posted.

In the meanwhile, using an additional .venv for development and uv for deployment works good enough.

Thank you for the support! 

---

_Comment by @NellyWhads on 2024-12-18 18:41_

I'd just like to confirm that I'm using the following setup with success:

- Python monorepo
- Single uv workspace with multiple projects
- using `direnv` to set [`UV_PROJECT_ENVIRONMENT`](https://docs.astral.sh/uv/configuration/environment/?query=preview#uv_project_environment) within each project directory such that `uv` creates a separate `.venv` in the project root instead of the workspace root
- VSCode opened to the workspace directory -> manually selecting the appropriate `.venv` -> `Reload Window`
- Testing integration also works so long as I point VSCode to the specific `pyproject.toml` which houses the `pytest` config for the specific project.

---

_Comment by @cam-at-tactiq on 2025-01-05 22:43_

I have the same issues as @oulianov, I have a large monorepo and each python project is independent, we don't use the workspaces feature yet.

When selecting the interpreter VS Code follows the symlinks back to `~/.local/share/uv/python/...` without access to any of the libraries I have installed.

---

_Comment by @zanieb on 2025-01-05 22:51_

Can someone please share a _minimal_ project this reproduces on and a script to setup the environments?

---

_Comment by @chanderson0 on 2025-01-28 18:00_

I can reproduce this locally in my development monorepo. Here's a minimal repro. If there's any other information I can provide, let me know. 

- uv version: 0.5.24
- VSCode version: 1.96.4
- mspython-python extension version: 2024.22.2
- ms-python.vscode-pylance extension version: 2025.1.101

Instructions:
1. Run `./setup.sh`
2. Open VSCode
3. In VSCode, open `projects/project1/hello.py`
4. Run `Python > Select Interpreter`
5. Enter Interpreter Path...
6. Find...
7. Select `path/to/projects/project1/.venv/bin/python`
8. Note that Pylance reports `Import "urllib3" could not be resolved`
9. Reload Window
10. Note that Pylance still reports `Import "urllib3" could not be resolved`
11. Rinse and repeat with `project2/hello.py`


`setup.sh`:
```sh
root=$(realpath "$(dirname "$0")")

cd $root
mkdir -p projects/project1
cd projects/project1
uv python find --python-preference only-managed --system
uv init --no-workspace --python-preference only-managed
uv add urllib3
uv sync
cat <<EOF > hello.py
import urllib3
print("p1", urllib3.__file__)
EOF
uv run hello.py
echo ""

cd $root
mkdir -p projects/project2
cd projects/project2
uv python find --python-preference only-system --system
uv init --no-workspace --python-preference only-system
uv add python-dateutil
uv sync
cat <<EOF > hello.py
import dateutil
print("p2", dateutil.__file__)
EOF
uv run hello.py
echo ""
```

Terminal output:
```
/Users/chris/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none/bin/python3.10
Initialized project `project1`
Using CPython 3.10.14
Creating virtual environment at: .venv
Resolved 2 packages in 59ms
Installed 1 package in 3ms
 + urllib3==2.3.0
Resolved 2 packages in 0.20ms
Audited 1 package in 0.01ms
p1 /Users/chris/code/uv-monorepo-vscode/projects/project1/.venv/lib/python3.10/site-packages/urllib3/__init__.py

/Users/chris/.local/share/mise/installs/python/3.10.15/bin/python
Initialized project `project2`
Using CPython 3.10.14
Creating virtual environment at: .venv
Resolved 3 packages in 44ms
Installed 2 packages in 2ms
 + python-dateutil==2.9.0.post0
 + six==1.17.0
Resolved 3 packages in 0.22ms
Audited 2 packages in 0.00ms
p2 /Users/chris/code/uv-monorepo-vscode/projects/project2/.venv/lib/python3.10/site-packages/dateutil/__init__.py
```

Also, I intermittently get this error in the `Python` logs in VSCode if I reload the window a few times:

```
2025-01-28 13:02:22.140 [info] Native locator: Refresh started
2025-01-28 13:02:22.140 [info] Native locator: Refresh started
2025-01-28 13:02:22.362 [info] > pyenv which python
2025-01-28 13:02:22.362 [info] cwd: .
2025-01-28 13:02:22.482 [info] > conda info --json
2025-01-28 13:02:22.493 [info] Poetry environment manager found at: /Users/chris/.local/pipx/venvs/poetry/bin/poetry
2025-01-28 13:02:22.501 [info] Conda environment manager found at: /opt/homebrew/Caskroom/miniconda/base/bin/conda
2025-01-28 13:02:22.504 [info] Python interpreter path: ~/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none/bin/python
2025-01-28 13:02:23.364 [info] Starting Pylance language server.
2025-01-28 13:02:23.500 [info] Native locator: Refresh finished in 1578 ms
2025-01-28 13:02:28.119 [error] Active interpreter type is detected as Unknown {"id":"/Users/chris/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none/bin/python","sysPrefix":"/Users/chris/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none","envType":"Unknown","envName":"","envPath":"/Users/chris/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none/bin/python","path":"/Users/chris/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none/bin/python","architecture":3,"sysVersion":"","version":{"raw":"3.10.14","major":3,"minor":10,"patch":14,"build":[],"prerelease":[]},"displayName":"Python 3.10.14","detailedDisplayName":"Python 3.10.14"}
```

---

_Comment by @zanieb on 2025-01-28 19:33_

@chanderson0 thanks for all the details. Unfortunately, I followed your instructions and could not reproduce the problem.

---

_Comment by @chanderson0 on 2025-01-28 20:29_

Thanks for the quick reply!

After playing with a lot more, I think part of the issue is that there's a difference in (a) using the GUI to select a Python interpreter path (which appears to resolve symlinks and therefore breaks any link to the actual local venv) and entering either (b) an absolute path or (c) a path relative to the workspace root (which appears to not resolve symlinks, and does work as intended).

So maybe the resolution is to always enter an actual path and not the filesystem picker as in (b) and (c). It's working for me, anyway! If I get a chance, I'll open an issue with Pylance, since that's a confusing behavior.

---

_Comment by @zanieb on 2025-01-28 20:35_

I was using Ctrl-P to invoke Python > Select Interpreter then entering an absolute interpreter path.

I honestly don't know how to get a filesystem picker to show up :D

---

_Comment by @oulianov on 2025-01-31 03:06_

Coming back to this issue. Here's a foolproof technique my buddy @Jeerhz showed me to select a uv `.venv` as an active interpreter in vscode. 


1. First, copy the absolute path to the `.venv`. **Not** to the /bin/python, only the .venv folder.

<img width="355" alt="Image" src="https://github.com/user-attachments/assets/2492bd12-aed1-4cbc-8185-6aa33ad368a0" />

2. Do Cmd+Shift+P, then look for "Python: Select interpreter". Press Enter. Select the option: "Enter interpreter path".

<img width="535" alt="Image" src="https://github.com/user-attachments/assets/d9e57cc3-0b3f-4f52-bd55-1750900e4639" />

3. Now in this field you copy paste the absolute path to the .venv folder. 

<img width="456" alt="Image" src="https://github.com/user-attachments/assets/249a183f-df01-4db9-bd62-1343895d80d0" />

<img width="397" alt="Image" src="https://github.com/user-attachments/assets/8071a06f-d38b-426b-ac9d-1da8c8c36128" />

Press enter and now you have the right Python environment with all the dependencies. 


Selecting .venv as an active interpreter in VSCode works. But selecting .venv/bin/python doesn't.



**It would be nice if we didn't have to do all these shenanigans.** In a monorepo, I switch from python project and dependencies all the time. The current procedure is pretty painful, not documented, and not trivial. 

It would be great to have all the `.venv` show up in the interpreter list. Even better, the active interpreter could switch automatically depending on the opened file. 

@zanieb are there any plans to improve the uv experience in vscode? 

---

_Comment by @zanieb on 2025-01-31 18:28_

I cannot reproduce this problem (e.g., by entering the full path to the Python interpreter). Hence, I cannot figure out how to improve the experience.

We need more information to understand what's going on.

Does this only occur with `uv venv`? Does this not occur with `python -m venv`?

Does this only occur with uv-managed Python versions? Does this not occur with `uv venv --python-preference only-system` vs `uv venv --python-preference only-managed`?

Frankly, these sounds like VS Code bugs that we won't really be able to fix but I'm happy to try regardless.

---

_Comment by @zanieb on 2025-01-31 18:30_

To be clear, I agree that something must be wrong because we keep hearing reports. I just can't tell what exactly is wrong since each time I try to reproduce, it works fine for me.

---

_Comment by @chanderson0 on 2025-01-31 19:05_

I'm pretty sure that the issue originally highlighted in this thread (and the one I was facing) derives from the VSCode behavior that resolves symlinks when you open the file picker during interpreter selection. That's probably on the VSCode side to fix.

But there may be something additionally happening where uv venvs aren't being picked up automatically, and so someone would need to either (a) add uv support into https://github.com/microsoft/python-environment-tools and https://github.com/microsoft/vscode-python (see e.g. https://github.com/microsoft/vscode-python/pull/24442 and https://github.com/microsoft/python-environment-tools/pull/172 for Pixi doing this recently) or (b) figure out why the existing virtualenv locator isn't working against these environments.

---

_Comment by @zanieb on 2025-01-31 20:10_

> I'm pretty sure that the issue originally highlighted in this thread (and the one I was facing) derives from the VSCode behavior that resolves symlinks when you open the file picker during interpreter selection. That's probably on the VSCode side to fix.

I'm surprised this hasn't come up before as symbolically linked interpreters in virtual environments are very common on Unix.

We use standards-compliant virtual environments and these _should_ be found by their normal locator since it includes our default name of `.venv`? https://github.com/microsoft/python-environment-tools/blob/1abe5cec5ebfbe97ca71746a4cfc7fe89bddf8e0/crates/pet/src/find.rs#L262


---

_Comment by @NellyWhads on 2025-02-04 02:18_

To throw another loop in this - our setup is extremely similar and we are able to use the regular VSCode Interpreter selector. We're running the latest VSCode and I've tried it on the latest Cursor. Works stably on MacOS, and on remote development hosts both inside and outside devcontainers with no issues.

---

_Comment by @cloudycotton on 2025-02-05 15:24_

I encountered this issue just now with my tauri setup. Vscode doesn't recognise the path in .venv created by default. 

---

_Comment by @jdumas on 2025-02-07 01:25_

Hi. I'm also running into this. I have a `.venv` in a `scripts/` subfolder of my vscode project:
```
scripts/.venv/bin/python@ -> /opt/homebrew/Caskroom/miniconda/base/bin/python3
```

Now if I add the interpreter via the vscode UI, it seems to be adding the target path and think I'm in the base conda environment. But if manually specify `<my_repo>/scripts/.venv/bin/python` in in the vscode popup to find the interpreter (i.e. without going through macOS Finder), then it establishes the correct venv.

Seems to be more an issue with vscode than `uv` I would say.

---

_Comment by @cloudycotton on 2025-02-07 02:56_

I‚Äôve noticed another issue: when I install dependencies and package a script with uvx pyinstaller main.py, the dependencies aren‚Äôt bundled as expected. This might be related.

I'm on latest Mac OS build. 

---

_Referenced in [astral-sh/uv#1156](../../astral-sh/uv/issues/1156.md) on 2025-02-12 15:05_

---

_Referenced in [astral-sh/uv#11314](../../astral-sh/uv/issues/11314.md) on 2025-02-12 15:05_

---

_Comment by @jzazo on 2025-02-12 15:18_

Sorry, I haven't read the full thread, but I will add something in case it helps. I don't experience this issue with VSCode, but whenever my VSCode was misconfigured was because it was not using the workspace properly:
https://code.visualstudio.com/docs/editor/workspaces/workspaces

If you have a single-folder workspace you open your workspace with Open Folder, if you have a monorepo, you select open workspace from file, and you need proper settings.

I have a single-folder repo and everything shows nicely for me using uv. If you haven't selected a workspace properly, selecting an interpreter may have issues, because VSCode may have trouble using a .venv to source files.

---

_Comment by @geozeke on 2025-02-19 19:28_

Just adding my issue to this thread. It seemed like virtual environments were working fine in vscode for a long time, now I experience the same issue with them not activating when opening the terminal. I tried the tips about typing-out the `.venv` path as described above, without luck. I'm managing my environments with `uv`, in separate project folders within a monorepo workspace.

Maybe this is a new bit of information:

I'm using macOS, with `zsh`, OhMyZsh, and the `powerlevel10k` theme (all this worked fine, until just recently). Not sure if others with this issue have the same setup.



---

_Comment by @geozeke on 2025-02-19 19:50_

It's a little "hacky", but I added this to my `.zshrc` file, and it seems rock-solid whenever you open a new terminal in a vscode project folder, within a monorepo workspace. It assumes that (1) you're running a terminal in vscode, and (2) your virtual environment is located in `./.venv` (the uv default). Maybe a good bandaid until this gets resolved.

```shell
# Activate the python virtual environment if it's present *and* you're running
# the terminal in vscode.
if [ "$TERM_PROGRAM" = "vscode" ]; then
    if [ -d "./.venv" ]; then
        source ./.venv/bin/activate
    fi
fi
```

---

_Comment by @stur86 on 2025-02-22 16:54_

Adding to the experience. Same for me. Virtualenvs created by UV worked fine for me until not long ago. Today I tried one and I got hit with these problems; Pylance doesn't recognise the installed libraries. I made sure to select the correct binary for the virtual environment, this was at the root of the project, there was only one virtual environment, etc. etc. Fails with both Python 3.12 and 3.11. I also tried doing the same thing with Poetry, and with that one it works.

Closest thing that this reminds me of is when some time ago the change to allow for a different format to link editable installs. That did mess up my language server's detection back then. Is it possible something similar has happened here?

---

_Comment by @zanieb on 2025-02-24 15:39_

@stur86 that'd be if you're using `setuptools` e.g. https://github.com/astral-sh/uv/issues/10946 or https://github.com/astral-sh/uv/issues/1708

---

_Comment by @stur86 on 2025-02-24 19:02_

> [@stur86](https://github.com/stur86) that'd be if you're using `setuptools` e.g. [#10946](https://github.com/astral-sh/uv/issues/10946) or [#1708](https://github.com/astral-sh/uv/issues/1708)

Actually my build backend is hatchling right now. I also tried 

```
[tool.uv]
config-settings = { editable_mode = "compat" }
```

as mentioned in another issue and it does not seem to work, in fact it breaks `uv sync`. Haven't dived deep into why that is yet.

---

_Comment by @SimonBirrell on 2025-02-26 17:55_

Same for me. Multiple folders within the repo, each with their own pyproject.toml and .venv.

The code works when run, but VS Code doesn't find the .venvs and uses the system Python (as displayed on the bottom line). "Select Python interpreter" doesn't list the .venvs.

---

_Comment by @stur86 on 2025-03-01 18:09_

> Same for me. Multiple folders within the repo, each with their own pyproject.toml and .venv.
> 
> The code works when run, but VS Code doesn't find the .venvs and uses the system Python (as displayed on the bottom line). "Select Python interpreter" doesn't list the .venvs.

My case is worse than this; I do manage to select the virtual environment's Python. It just does nothing to fix this. The virtual environment does have the packages installed, it's just that Pylance specifically doesn't seem to notice.

EDIT: just noticed that the same thing happens with Poetry. It's not UV's fault, it's something else that changed either in `setuptools` as mentioned above or in `pip` or in Pylance.

---

_Comment by @jzazo on 2025-03-01 22:08_

As I mentioned before, have you correctly set up a single or multi-root workspace?
https://code.visualstudio.com/docs/editor/workspaces/workspaces

---

_Comment by @stur86 on 2025-03-02 00:21_

> As I mentioned before, have you correctly set up a single or multi-root workspace? https://code.visualstudio.com/docs/editor/workspaces/workspaces

The doc mentions you don't need to do anything other than opening a folder with VSCode, so yes I guess. But in the end it did resolve when I created a `.vscode` folder and a settings file inside it, even if essentially empty.

---

_Referenced in [astral-sh/uv#12039](../../astral-sh/uv/issues/12039.md) on 2025-03-07 11:05_

---

_Comment by @tomaszbk on 2025-03-08 19:45_

I also had my venv in a custom path other than the project's root path, and solved this by running:
`ln -s <custom_venv_location> .venv`
it creates a link to cheat vs code into thinking the venv is there

---

_Comment by @gravityrail on 2025-03-10 15:58_

Assuming .venv in the project root, this worked for me (when switching from poetry to uv)

```bash
rm -rf .venv
uv sync
```

Then in Cursor:

 * CMD-SHIFT-P
 * Clear workspace interpreter setting
 * Click the python env in the bottom right
 * Click "+ Create virtual environment"
 * Click "Venv"
 * Click to reuse the existing .venv

Then all my dependencies resolved.

---

_Referenced in [astral-sh/uv#12321](../../astral-sh/uv/issues/12321.md) on 2025-03-19 19:00_

---

_Comment by @0LEL0 on 2025-03-23 12:42_

I found that when I use this plugin "Python Environment Manager (deprecated)" it works well, but when I use "Microsoft Python Environments Extension" it can't find .venv/bin/python.

---

_Comment by @hoangquochung1110 on 2025-03-24 08:22_

Hi guys, do we have a working solution to this issue ? 
Basic features of the IDE are not enabled for some reason if I initial venv using `uv venv` command

![Image](https://github.com/user-attachments/assets/1db1e139-2f19-47ee-b47f-8e4b587d65da)

Many thanks

---

_Comment by @rcgreen99 on 2025-03-27 02:17_

If your pyproject.toml is not in the root of your workspace, you may have to select the interpreter.

1. First, **find the path of your interpreter** by going to the directory where you pyprojectl.toml is and `cd`-ing into `.venv/bin/`. If you `ls` here you should see a file called python, which is your interpreter. You can get the directory path using the command `pwd` to get the current directory.

2. Press cmd + shift + P and type in **Python: Select Interpreter**

2. Select **Enter interpreter path...**

3. Paste in the directory your got using `pwd` from before and `python` to the end of it



---

_Comment by @PacoBahena on 2025-04-02 20:02_

when you select the interpreter, make sure you pass down the interpreter path manually, because if passing via ui (finder/windows explorer) vscode will set the symlink to uv system python causing the link to fail. 

---

_Comment by @soutot on 2025-04-03 14:27_

> If your pyproject.toml is not in the root of your workspace, you may have to select the interpreter.
> 
> 1. First, **find the path of your interpreter** by going to the directory where you pyprojectl.toml is and `cd`-ing into `.venv/bin/`. If you `ls` here you should see a file called python, which is your interpreter. You can get the directory path using the command `pwd` to get the current directory.
> 2. Press cmd + shift + P and type in **Python: Select Interpreter**
> 3. Select **Enter interpreter path...**
> 4. Paste in the directory your got using `pwd` from before and `python` to the end of it

I tried this and I get `Invalid Python interpreter is selected` error:

![Image](https://github.com/user-attachments/assets/3ab9fc45-0474-45ad-b633-0f628a982f51)

`ls`-ing `/Users/user/Documents/my-repo/py-proj1/.venv/bin` I can see both python and python3.12.

Tried a few different paths: 
/Users/user/Documents/my-repo/py-proj1/.venv/bin
/Users/user/Documents/my-repo/py-proj1/.venv/bin/python
/Users/user/Documents/my-repo/py-proj1/.venv/bin/python3.12

None worked. 

The output shows:

>  [warning] Failed to check if /Users/user/Documents/my-repo/py-proj1/.venv/bin/python3.12 is an executable [Error: ENOENT: no such file or directory, lstat '/usr/local/bin/python3.12'] {
>   errno: -2,
>   code: 'ENOENT',
>   syscall: 'lstat',
>   path: '/usr/local/bin/python3.12'
> }

I have multiple python projects in this repo. In a repo with a single project it works.
Any hints?

---

_Comment by @NellyWhads on 2025-04-07 05:16_

Have you tried:
1. Using the pre-release version of the Python extension? This used to fix things for me (but is no longer required for the last ~4 months)
2. Re-loading the VSCode Window, Re-starting the python language server, and/or re-starting the extensions provider?

---

_Comment by @morrissimo on 2025-04-16 13:25_

Seeing this exact issue as well. But these steps allowed me to work around it:

> If your pyproject.toml is not in the root of your workspace, you may have to select the interpreter.
> 
> 1. First, **find the path of your interpreter** by going to the directory where you pyprojectl.toml is and `cd`-ing into `.venv/bin/`. If you `ls` here you should see a file called python, which is your interpreter. You can get the directory path using the command `pwd` to get the current directory.
> 2. Press cmd + shift + P and type in **Python: Select Interpreter**
> 3. Select **Enter interpreter path...**
> 4. Paste in the directory your got using `pwd` from before and `python` to the end of it

...but NOT when I use the "Find" feature in the VSCode "Enter interpreter path" command's UI. These steps **only** worked for me by pasting the full path to the interpreter into the "Enter interpreter path" command UI.

Versions fwiw:
* Macbook Pro OSX Sequoia 15.4
* VSCode 1.99.2
  > Version: 1.99.2 (Universal)
  > Commit: 4949701c880d4bdb949e3c0e6b400288da7f474b
  > Date: 2025-04-10T01:21:25.295Z
  > Electron: 34.3.2
  > ElectronBuildId: 11161073
  > Chromium: 132.0.6834.210
  > Node.js: 20.18.3
  > V8: 13.2.152.41-electron.0
  > OS: Darwin x64 24.4.0
* uv 0.6.14 (a4cec56dc 2025-04-09)

---

_Comment by @codethief on 2025-04-17 14:16_

To add another data point to the discussion: My workspace is a monorepo, whose subfolders each contain a separat uv project / `pyproject.toml` & `.venv` folder, and like everyone else here I was struggling with setting up the interpreter correctly. Now I just installed the [teticio.python-envy](https://github.com/teticio/python-envy) extension, which automatically recognizes `.venv` folders and sets the interpreter path depending on the file I am looking at. So far, everything (IntelliSense, type hints, etc.) seems to be working fine!

I'm running
- Linux / NixOS 25.05
- VSCode 1.98.2
- uv 0.6.9
- ms-python.python 2025.4.0
- ms-python.vscode-pylance 2025.4.1
- teticio.python-envy 0.1.8



---

_Comment by @zcuric on 2025-04-17 14:32_

I had this issue when using Docker and Django. I notice that `.venv` was messed up with from the Docker so I made it work like this:

Create a separate virtual environment (to differentiate it from the one used in Docker):
```
uv venv .venv-editor
```

Activate the virtual environment:
```
source .venv-editor/bin/activate
```

Install dependencies into the active environment:
```
uv sync --active
```

In VSCode, open the command palette (Cmd+Shift+P), search for ‚ÄúPython: Select Interpreter‚Äù, and select the .venv-editor environment (it should point to .venv-editor/bin/python).

---

_Comment by @ben-xD on 2025-04-21 10:08_

The workarounds mentioned above didn't really help me. `uv run python` or just `./venv/bin/python` was killed with error code 137.

This was happening to me on python 3.11. A quick fix for me was to upgrade the project I was testing to Python 3.12 or 3.13. 

---

_Comment by @rayterrill on 2025-04-21 18:04_

I fixed this by setting the following setting in my user settings.json (non-monorepo setup, opening a project in the root):
```
    "python.defaultInterpreterPath": "./.venv",
```

---

_Comment by @Victsz on 2025-04-24 02:26_

My case is the language server never work for pylance when using uv and select python in  ./.venv
![Image](https://github.com/user-attachments/assets/849e23eb-4e84-451a-83ed-aa2c32a52ae4)
But sometimes jedi can work but not always...

![Image](https://github.com/user-attachments/assets/0f14a5ec-5f78-49e3-b88c-44774221be83)
The only change I made to show above captures is the language server option.

---

_Comment by @jbohnslav on 2025-05-03 14:23_

This is semi-related, but in case it helps people: I kept getting sigkills as well. I had to 

`rm -rf /Users/USERNAME/.local/share/uv`, then `uv sync` and it all worked.

---

_Comment by @Robinsstudio on 2025-05-06 23:32_

I also have this issue and my `.venv` is not at the root of the project as well. The workaround fixes it but it's actually not really necessary on my end as using the absolute path to the Python interpreter will work. I just have to choose "Enter interpreter path" and then paste the absolute path to it. It works with the absolute path to `.venv`, `.venv/bin` and even `.venv/bin/python`.

I also figured that it works with paths relative to the root of the workspace. For example, if I have my workspace at `/Users/robinsstudio/my_amazing_project` and my Python interpreter at `/Users/robinsstudio/my_amazing_project/path/to/python/.venv/bin/python`, then I can simply paste `./path/to/python/.venv/bin/python` at the "Enter interpreter path" step.

I hope this will help someone!

edit: After some further investigation, I think the core issue lies in the fact that `.venv/bin/python` is a symbolic link rather than a real Python executable. So if you do "Select interpreter" ‚Üí "Enter interpreter path" ‚Üí "Find" and then select `python` in `.venv/bin`, VS Code will not get `.venv/bin/python` as interpreter path but rather the path that the symbolic link is pointing to. So that's obviously wrong because it's outside of the UV environment. You can see the path VS Code is using by opening "Select interpreter" again. It will be shown on top.

Bottom line: you should just paste the path to the interpreter manually and not use "Find". At least that's the behavior I have on Mac.

---

_Comment by @egorvavilov on 2025-05-10 10:32_

@oulianov 

I encountered the same issue when setting up a multi-repo workspace using uv on a Mac M1, and none of the suggested solutions worked for me initially‚Äîespecially in getting `VSCode + Pylance + Python + uv` to cooperate.

After some searching, I found a workaround that resolved the issue. Here's what worked:

Project structure:
```md
.
‚îú‚îÄ‚îÄ child_repo_A
‚îÇ   ‚îú‚îÄ‚îÄ .venv
‚îÇ   ‚îú‚îÄ‚îÄ pyproject.toml
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ child_repo_B
‚îÇ   ‚îú‚îÄ‚îÄ .venv
‚îÇ   ‚îú‚îÄ‚îÄ pyproject.toml
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ README.md
```

Steps:
1. Open the Command Palette `(Cmd+Shift+P / Ctrl+Shift+P)` in VSCode and select: `Workspaces: Add Folder to Workspace...`
    Add each child repo as a separate folder.
2. Once added, VSCode will treat each child repository as an independent project in the File Explorer.
3. Inside each child repo, create a .vscode/settings.json file with the following content:
```json
{
  "python.defaultInterpretorPath": ".venv/bin/python"
}
```
4. This enables proper interpreter resolution, and Pylance should now work correctly with your environment.

Let me know if this helps or if you run into any edge cases

---

_Comment by @wnowicki on 2025-05-13 14:39_

I am getting the same issue, I've lost my autocompletion on dependencies. 

I've setup venv `uv venv venv` to differenciate from default `.venv` and it did work for some time. Usually it works after VSC restart.

Maybe this is some VSC issue:

```
2025-05-13 16:30:42.808 [error] Stopping language client failed Error: Stopping the server timed out
    at /Users/xxx/.vscode/extensions/ms-python.python-2025.6.0-darwin-arm64/out/client/extension.js:2:2026466
    at l.stop (/Users/xxx/.vscode/extensions/ms-python.python-2025.6.0-darwin-arm64/out/client/extension.js:2:22718)
```

Some update before posting this, I've checked project where I don't have UV installed yet and there is the same issue. I think I'll check VSC.

---

_Referenced in [microsoft/vscode#248842](../../microsoft/vscode/issues/248842.md) on 2025-05-13 14:54_

---

_Referenced in [microsoft/pylance-release#7209](../../microsoft/pylance-release/issues/7209.md) on 2025-05-13 17:27_

---

_Comment by @BlackDark on 2025-05-14 12:33_

I also did not have completions for my local projects but when I did a uv sync  --no-editable i got the completions back working because the folder gets copied to the .venv directory I think. But of course now also the stuff is fixed and not symlinked so changes get not reflected back to the .venv.

Not sure if this is related.

---

_Referenced in [microsoft/vscode-python#25068](../../microsoft/vscode-python/issues/25068.md) on 2025-05-14 12:57_

---

_Comment by @konstin on 2025-05-14 12:58_

I asked upstream (VS Code Python) for input on the matter: https://github.com/microsoft/vscode-python/issues/25068

---

_Comment by @konstin on 2025-05-14 16:16_

Could you check whether you have the same problem with https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs? From a VS Code maintainer in https://github.com/microsoft/vscode-python/issues/25068:

> Install that extension and reload VS Code. That will cause python extension to replace its features with the new extension. That will soon be replacing all the environment features in python extension.

---

_Comment by @wnowicki on 2025-05-14 17:19_

I've tried, installed and it didn't help.

Please see as well https://github.com/microsoft/pylance-release/issues/7209

---

_Comment by @zhuoqun-chen on 2025-05-15 02:15_

Hi all and @oulianov, would you mind trying to add this line in your project's `.vscode/settings.json`:

```json
"python.defaultInterpreterPath": "${workspaceFolder}/.venv"
```

I'm assuming `uv` is installed globally inside your `$PATH`, eg, I'm using `uv` installed with `brew` on my mac.

If getting no luck, also setting up in the UI interface like this:

<img width="670" alt="Image" src="https://github.com/user-attachments/assets/d2a2aba9-820d-4aba-a002-8363f22e112e" />

Using this always gives me the correct IDE features whether in `cursor` or `vscode`. Anyway, this is just my own config so I'm posting here for reference. Hope this can help you.

---

_Comment by @Florian-crg on 2025-05-15 10:03_

‚ùå The solution mentioned in https://github.com/astral-sh/uv/issues/9637#issuecomment-2654030261 will not work on all setup.

> if you have a monorepo, you select open workspace from file


If you‚Äôre working in a monorepo, you can select ‚ÄúOpen Workspace from File‚Äù to open a specific subfolder as its own workspace.

When you do this, external libraries will still resolve correctly. However, internal imports will only work if they are relative to the subfolder you‚Äôre opening as the workspace.

For example, with the following structure:
```
main_folder/
‚îú‚îÄ‚îÄ sub_folder/  (opened as workspace)
‚îÇ   ‚îú‚îÄ‚îÄ .venv/
‚îÇ   ‚îú‚îÄ‚îÄ pyfile_1.py
‚îÇ   ‚îî‚îÄ‚îÄ pyfile_2.py
‚îú‚îÄ‚îÄ ...
```

Inside `pyfile_2.py`:
```
from pyfile_1 import whatever  # ‚ùå Won't work
from typing import Any         # ‚úÖ Works (standard library)
```

So, imports like from `pyfile_1` import ... won‚Äôt resolve unless `pyfile_1.py` is discoverable from the workspace root ‚Äî in this case, sub_folder.

----

‚úÖ **The solution mentioned in [this comment](https://github.com/astral-sh/uv/issues/9637#issuecomment-2626203937) worked for me** with this setup:

```
main_folder/ (opened as workspace)
‚îú‚îÄ‚îÄ sub_folder/  
‚îÇ   ‚îú‚îÄ‚îÄ .venv/
‚îÇ   ‚îú‚îÄ‚îÄ pyfile_1.py
‚îÇ   ‚îî‚îÄ‚îÄ pyfile_2.py
‚îú‚îÄ‚îÄ ...
```

That said, it didn‚Äôt work immediately ‚Äî possibly due to caching ü§∑ or something similar. Restarting / closing the folder or else might help.


---

_Comment by @bholagabbar on 2025-05-21 22:06_

I spent like 3 days trying to fix this uv/autocomplete issue but in vain. This is a waste of time. Great library, terrible support for existing tooling. just CANNOT get it to work in a monorepo setup with pylance and the existing other tools. I've tried everything under the sun, nope

---

_Referenced in [microsoft/pyright#10498](../../microsoft/pyright/issues/10498.md) on 2025-05-21 22:55_

---

_Comment by @codethief on 2025-05-21 22:57_

@bholagabbar Did you try https://github.com/astral-sh/uv/issues/9637#issuecomment-2813097995 ?

---

_Comment by @zanieb on 2025-05-22 01:16_

@bholagabbar please go open an issue in VS Code or comment on [this existing one](https://github.com/microsoft/vscode-python/issues/25068) instead. We are just using standards-compliant Python virtual environments. There's nothing we can do to fix this behavior ‚Äî and if there somehow is I'd be happy to hear it.

---

_Comment by @bholagabbar on 2025-05-22 02:41_

@codethief I tried installing the package, didn't work for me :(

Hey @zanieb , appreciate your reply. Let me layout the step my step commands to replicate this. I really want to help your team (and myself) get to the bottom of this issue and this really shouldn't be something that stops users from using uv. So here goes

I use [Cursor](https://www.cursor.com/)

* `uv init infra --bare` (This acts sort of as the base of my monorepo`
* `cd infra`
* `uv venv`. Then I set the interpreter to this path and restart my terminal too
* `uv init dataos --lib` (Core library to by shared by services`
* `uv init actor-rep-runner` (Service that uses code from dataos` 
* The pyproject.toml files for `infra` and `actor-rep-runner`  are as follows
    ```
    [project]
    name = "infra"
    version = "0.1.0"
    requires-python = ">=3.13"
    dependencies = []
    
    [tool.uv.workspace]
    members = [
        "dataos",
        "actor-rep-runner",
    ]
    ```

    ```
    [project]
    name = "actor-rep-runner"
    version = "0.1.0"
    description = "Add your description here"
    readme = "README.md"
    requires-python = ">=3.13"
    dependencies = [
        "dataos",
    ]
    
    [tool.uv.sources]
    dataos = { workspace = true }
    ```
* I do a `uv sync` from the root `infra/` 
* Create a file inside `dataos` that you want to reuse in your service
  * `cd dataos/src/dataos`
  * `touch hunter.py`
  ```
  def hunt():
      print ("Hunting...")
  ```
  
* `cd ../../../actor-rep-runner/`
This is how my `main.py` looks, with no imports

![Image](https://github.com/user-attachments/assets/5df5bdb4-e42d-4fee-88d4-e309c161df3f)


As you can see, `from dataos.hunter import hunt` is unable to be detected. Any ideas ? 

I think this issue is relevant as well: https://github.com/astral-sh/uv/issues/7576#issuecomment-2740802359


---

_Comment by @codethief on 2025-05-22 07:37_

@bholagabbar 

> @codethief I tried installing the package, didn't work for me :(

That's unfortunate! What exactly didn't work, though? Setting the .venv as Python environment? Or import resolution as in your screenshot?

Regarding your screenshot: What exactly is the error message when you hover over the import? Are you using Pylance? If so, you might want to look at https://github.com/microsoft/pylance-release/issues/7151 and https://github.com/microsoft/pylance-release/blob/main/TROUBLESHOOTING.md#unresolved-import-warnings . 

Either way, it seems your projects `actor-rep-runner` and `dataos` each have their own `pyproject.toml` but not a separate `.venv` (= their own set of dependencies), and instead are nested under the `infra` project and are supposed to use the latter `.venv`? That seems very weird to me. **EDIT:** Never mind, I missed the fact that you are using [uv workspaces](https://docs.astral.sh/uv/concepts/projects/workspaces/).

---

_Comment by @xflcx1991 on 2025-05-24 14:55_

> ‚ùå The solution mentioned in [#9637 (comment)](https://github.com/astral-sh/uv/issues/9637#issuecomment-2654030261) will not work on all setup.‚ùå ‰∏≠ [#9637 (comment)](https://github.com/astral-sh/uv/issues/9637#issuecomment-2654030261) ÊèêÂà∞ÁöÑËß£ÂÜ≥ÊñπÊ°à‰∏çÈÄÇÁî®‰∫éÊâÄÊúâËÆæÁΩÆ„ÄÇ
> 
> > if you have a monorepo, you select open workspace from fileÂ¶ÇÊûúÊÇ®Êúâ monorepoÔºåËØ∑ÈÄâÊã© Open workspace from file
> 
> If you‚Äôre working in a monorepo, you can select ‚ÄúOpen Workspace from File‚Äù to open a specific subfolder as its own workspace.Â¶ÇÊûú‰Ω†Âú® monorepo ‰∏≠Â∑•‰ΩúÔºå‰Ω†ÂèØ‰ª•ÈÄâÊã© ‚ÄúOpen Workspace from File‚Äù Êù•ÊâìÂºÄ‰∏Ä‰∏™ÁâπÂÆöÁöÑÂ≠êÊñá‰ª∂Â§π‰Ωú‰∏∫ÂÆÉËá™Â∑±ÁöÑÂ∑•‰ΩúÂå∫„ÄÇ
> 
> When you do this, external libraries will still resolve correctly. However, internal imports will only work if they are relative to the subfolder you‚Äôre opening as the workspace.ÊâßË°åÊ≠§‰ΩúÊó∂ÔºåÂ§ñÈÉ®Â∫ì‰ªçÂ∞ÜÊ≠£Á°ÆËß£Êûê„ÄÇ‰ΩÜÊòØÔºå‰ªÖÂΩìÂÜÖÈÉ®ÂØºÂÖ•Áõ∏ÂØπ‰∫éÊÇ®‰Ωú‰∏∫Â∑•‰ΩúÂå∫ÊâìÂºÄÁöÑÂ≠êÊñá‰ª∂Â§πÊó∂ÔºåÂÜÖÈÉ®ÂØºÂÖ•ÊâçÊúâÊïà„ÄÇ
> 
> For example, with the following structure:‰æãÂ¶ÇÔºåÂÖ∑Êúâ‰ª•‰∏ãÁªìÊûÑÔºö
> 
> ```
> main_folder/
> ‚îú‚îÄ‚îÄ sub_folder/  (opened as workspace)
> ‚îÇ   ‚îú‚îÄ‚îÄ .venv/
> ‚îÇ   ‚îú‚îÄ‚îÄ pyfile_1.py
> ‚îÇ   ‚îî‚îÄ‚îÄ pyfile_2.py
> ‚îú‚îÄ‚îÄ ...
> ```
> 
> Inside `pyfile_2.py`:`pyfile_2.py` ÂÜÖÂπïÔºö
> 
> ```
> from pyfile_1 import whatever  # ‚ùå Won't work
> from typing import Any         # ‚úÖ Works (standard library)
> ```
> 
> So, imports like from `pyfile_1` import ... won‚Äôt resolve unless `pyfile_1.py` is discoverable from the workspace root ‚Äî in this case, sub_folder.Âõ†Ê≠§ÔºåÂÉè from `pyfile_1` import ËøôÊ†∑ÁöÑ imports ...Èô§ÈùûÂèØ‰ª•‰ªéÂ∑•‰ΩúÂå∫Ê†πÔºàÂú®Êú¨‰æã‰∏≠‰∏∫ sub_folderÔºâÂèëÁé∞ `pyfile_1.py`ÔºåÂê¶Âàô‰∏ç‰ºöËß£Êûê„ÄÇ
> 
> ‚úÖ **The solution mentioned in [this comment](https://github.com/astral-sh/uv/issues/9637#issuecomment-2626203937) worked for me** with this setup:‚úÖ **[ Ê≠§ËØÑËÆ∫](https://github.com/astral-sh/uv/issues/9637#issuecomment-2626203937)‰∏≠ÊèêÂà∞ÁöÑËß£ÂÜ≥ÊñπÊ°àÈÄÇÁî®‰∫éÊ≠§ËÆæÁΩÆ **Ôºö
> 
> ```
> main_folder/ (opened as workspace)
> ‚îú‚îÄ‚îÄ sub_folder/  
> ‚îÇ   ‚îú‚îÄ‚îÄ .venv/
> ‚îÇ   ‚îú‚îÄ‚îÄ pyfile_1.py
> ‚îÇ   ‚îî‚îÄ‚îÄ pyfile_2.py
> ‚îú‚îÄ‚îÄ ...
> ```
> 
> That said, it didn‚Äôt work immediately ‚Äî possibly due to caching ü§∑ or something similar. Restarting / closing the folder or else might help.‰πüÂ∞±ÊòØËØ¥ÔºåÂÆÉÂπ∂Ê≤°ÊúâÁ´ãÂç≥Â∑•‰Ωú‚Äî‚ÄîÂèØËÉΩÊòØÁî±‰∫éÁºìÂ≠òü§∑ÊàñÁ±ª‰ººÂéüÂõ†„ÄÇÈáçÊñ∞ÂêØÂä®/ÂÖ≥Èó≠Êñá‰ª∂Â§πÊàñÂÖ∂‰ªñÊñπÂºèÂèØËÉΩ‰ºöÊúâÊâÄÂ∏ÆÂä©„ÄÇ

Thank you very much, it turned out to be this "Open Workspace from File". I'm also mono-project, I was inspired, I chose "Add Fold to workspace", I chose the root of the python project folder created by uv, and it worked, now cursor workspace has two entries, one is the mono-project root, and the other is the python project root that I just added, Now the python code has selected the interpreter path to be the one in the .venv directory, and the import statement is normal, and there is no warning that the package cannot be found.


---

_Comment by @bholagabbar on 2025-05-25 00:17_

Thanks! Was finally able to get it to work. One common thread is that the code editor takes time to recognize the imports and needs to be restarted. I'm not really sure what worked, but I documented everything in my README as such:

* `uv venv` - Creates a `.venv/` virtual environment folder
* `source .venv/bin/activate` - Activates the virtual environment
* `uv sync` - Installs dependencies for all projects in the workspace
* Ensure you have a `.env` wherever we have a `.env.sample` file
* [Select interpreter](https://github.com/astral-sh/uv/issues/9637#issuecomment-2626203937)
* Install [python-envy](https://github.com/teticio/python-envy) extension for vscode
* Restart your terminal and window for autocompletion to work

`uv` is annoying to setup, here are some selected github issues that address common annoyances: [1](https://github.com/astral-sh/uv/issues/9637#issue-2717716303), [2](https://github.com/astral-sh/uv/issues/9637#issuecomment-2813097995)


---

_Comment by @bholagabbar on 2025-05-25 00:20_

@zanieb I have a (somewhat) related question. Why does `uv` not treat workspace members like automatic dependencies ? 

Here's an example
```
[project]
name = "infra"
version = "0.1.0"
requires-python = ">=3.13"

[tool.uv.workspace]
members = [
    "dataos",
    "actor-rep-runner",
]
```
This is the root `pyproject.toml` for the workspace. If I do `uv sync` here, it actually *deletes* all the existing dependencies it had installed, when i did `uv sync` from WITHIN the `dataos/` and `actor-rep-runner/` folders

What fixed it was adding these 2 blocks

```
dependencies = [
    "dataos",
    "actor-rep-runner",
]

[tool.uv.sources]
dataos = { workspace = true }
actor-rep-runner = { workspace = true }
```

I really shouldn't have to add the above ? Seems obvious to me personally, or maybe I am opinionated ü§∑‚Äç‚ôÇ 

---

_Comment by @charliermarsh on 2025-05-25 00:29_

@bholagabbar -- Because workspaces consist of multiple members, and each member can depend on any subset (or none, or all) of the other members. For example, you might not want `dataos` to depend on `actos-rep-runner`, right? The workspace root is no different -- it's just another member, and each member needs to declare its own dependencies.

If you have further questions, I suggest joining the Discord? (Since this issue in particular has a lot of subscribers, and it's better not to ping them all for unrelated queries.)

---

_Comment by @lucacerone on 2025-05-29 16:18_

> Selecting .venv as an active interpreter in VSCode works. But selecting .venv/bin/python doesn't.
> 
> **It would be nice if we didn't have to do all these shenanigans.** In a monorepo, I switch from python project and dependencies all the time. The current procedure is pretty painful, not documented, and not trivial.
> 
> It would be great to have all the `.venv` show up in the interpreter list. Even better, the active interpreter could switch automatically depending on the opened file.
> 
> [@zanieb](https://github.com/zanieb) are there any plans to improve the uv experience in vscode?

Thanks a lot! This is the only thing that worked for me!

---

_Comment by @pdpark-wex on 2025-05-30 21:28_

The only thing that worked for me was reverting to the older "js" python locator with this setting: `"python.locator": "js"` - from [here](https://stackoverflow.com/questions/78886125/vscode-python-extension-loading-forever-saying-reactivating-terminals#answer-78886126). Obviously not a great long term solution, but nothing else worked.

I reported this [here](https://github.com/microsoft/vscode-python/issues/25120#issuecomment-2923529911)

---

_Comment by @konstin on 2025-06-02 09:15_

@pdpark-wex Does this mean you also tried https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs and that didn't work?

---

_Referenced in [OHDSI/dbt-synthea#142](../../OHDSI/dbt-synthea/pulls/142.md) on 2025-06-03 09:20_

---

_Comment by @pdpark-wex on 2025-06-03 16:36_

> [@pdpark-wex](https://github.com/pdpark-wex) Does this mean you also tried https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs and that didn't work?

I have not tried it yet.

---

_Comment by @7l-hyuk on 2025-06-14 05:54_

Anyone using WSL should check the following:

* In vscode, press `ctrl + shift + P`
* Select `WSL: Connect to WSL`

VSCode will now connect to your WSL instance and automatically detect your virtual environment.

---

_Comment by @thefabus on 2025-06-14 18:15_

I'm not sure if this has been mentioned yet, but I had the same issue (Select Interpreter appears to do nothing), and what worked for me was to disable managed python.

The smoking gun was the managed interpreter crashing, however, after uninstalling all managed python interpreters I've been unable to reproduce this. The following only occurred in iTerm, in the VSCode terminal it would just hang:

```
‚ùØ uv python install --reinstall
Installed Python 3.11.13 in 1.52s
 + cpython-3.11.13-macos-aarch64-none
‚ùØ deactivate
‚ùØ source .venv/bin/activate
‚ùØ python --version
zsh: killed     python --version
```

I uninstalled all managed python versions:
```
‚ùØ uv python list
cpython-3.14.0b2-macos-aarch64-none                 <download available>
cpython-3.14.0b2+freethreaded-macos-aarch64-none    <download available>
cpython-3.13.5-macos-aarch64-none                   /opt/homebrew/bin/python3.13 -> ../Cellar/python@3.13/3.13.5/bin/python3.13
cpython-3.13.5-macos-aarch64-none                   /opt/homebrew/bin/python3 -> ../Cellar/python@3.13/3.13.5/bin/python3
cpython-3.13.5-macos-aarch64-none                   <download available>
cpython-3.13.5+freethreaded-macos-aarch64-none      <download available>
cpython-3.12.11-macos-aarch64-none                  <download available>
cpython-3.11.13-macos-aarch64-none                  <download available>
cpython-3.10.18-macos-aarch64-none                  <download available>
cpython-3.9.23-macos-aarch64-none                   <download available>
cpython-3.9.6-macos-aarch64-none                    /usr/bin/python3
cpython-3.8.20-macos-aarch64-none                   <download available>
pypy-3.11.11-macos-aarch64-none                     <download available>
pypy-3.10.16-macos-aarch64-none                     <download available>
pypy-3.9.19-macos-aarch64-none                      <download available>
pypy-3.8.16-macos-aarch64-none                      <download available>
graalpy-3.11.0-macos-aarch64-none                   <download available>
graalpy-3.10.0-macos-aarch64-none                   <download available>
graalpy-3.8.5-macos-aarch64-none                    <download available>
```

Then reinitializing with system python fixed it for me:
```
‚ùØ rm -rf .venv
‚ùØ uv venv --no-managed-python
Using CPython 3.13.5 interpreter at: /opt/homebrew/opt/python@3.13/bin/python3.13
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
```

Hope this helps.

---

_Comment by @bholagabbar on 2025-06-14 18:24_

This issue seems to be initiation ritual into uv lol. Happy user now, but the 3 days I spent trying to figure this out were ridiculous

Sent via Superhuman iOS ( ***@***.*** )

On Sat, Jun 14, 2025 at 11:16‚ÄØAM, Fabian Kabus < ***@***.*** > wrote:

> 
> *thefabus* left a comment (astral-sh/uv#9637) (
> https://github.com/astral-sh/uv/issues/9637#issuecomment-2972953664 )
> 
> 
> I'm not sure if this has been mentioned yet, but I had the same issue
> (Select Interpreter appears to do nothing), and what worked for me was to
> disable managed python.
> 
> 
> 
> The smoking gun was the managed interpreter crashing, however, after
> uninstalling all managed python interpreters I've been unable to reproduce
> this. The following only occurred in iTerm, in the VSCode terminal it
> would just hang:
> 
> ‚ùØ uv python install --reinstall
> Installed Python 3.11.13 in 1.52s
>  +
> cpython-3.11.13-macos-aarch64-none
> ‚ùØ deactivate
> ‚ùØ source
> .venv/bin/activate
> ‚ùØ python --version
> zsh: killed     python --version
> 
> 
> I uninstalled all managed python versions:
> 
> ‚ùØ uv python list
> cpython-3.14.0b2-macos-aarch64-none                
> <download available>
> cpython-3.14.0b2+freethreaded-macos-aarch64-none   
> <download available>
> cpython-3.13.5-macos-aarch64-none                  
> /opt/homebrew/bin/python3.13 ->
> ..***@***.***/3.13.5/bin/python3.13
> cpython-3.13.5-macos-aarch64-none                  
> /opt/homebrew/bin/python3 -> ..***@***.***/3.13.5/bin/python3
> cpython-3.13.5-macos-aarch64-none                   <download available>
> cpython-3.13.5+freethreaded-macos-aarch64-none      <download available>
> cpython-3.12.11-macos-aarch64-none                  <download available>
> cpython-3.11.13-macos-aarch64-none                  <download available>
> cpython-3.10.18-macos-aarch64-none                  <download available>
> cpython-3.9.23-macos-aarch64-none                   <download available>
> cpython-3.9.6-macos-aarch64-none                    /usr/bin/python3
> cpython-3.8.20-macos-aarch64-none                   <download available>
> pypy-3.11.11-macos-aarch64-none                     <download available>
> pypy-3.10.16-macos-aarch64-none                     <download available>
> pypy-3.9.19-macos-aarch64-none                      <download available>
> pypy-3.8.16-macos-aarch64-none                      <download available>
> graalpy-3.11.0-macos-aarch64-none                   <download available>
> graalpy-3.10.0-macos-aarch64-none                   <download available>
> graalpy-3.8.5-macos-aarch64-none                    <download available>
> 
> 
> Then reinitializing with system python fixed it for me:
> 
> ‚ùØ rm -rf .venv
> ‚ùØ uv venv --no-managed-python
> Using CPython 3.13.5
> interpreter at: ***@***.***/bin/python3.13
> Creating
> virtual environment at: .venv
> Activate with: source .venv/bin/activate
> 
> 
> Hope this helps.
> 
> 
> 
> ‚Äî
> Reply to this email directly, view it on GitHub (
> https://github.com/astral-sh/uv/issues/9637#issuecomment-2972953664 ) , or
> unsubscribe (
> https://github.com/notifications/unsubscribe-auth/ACZG4GYOJ5EWGVIRYCAE3633DRRGZAVCNFSM6AAAAABTAE3XXWVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDSNZSHE2TGNRWGQ
> ).
> You are receiving this because you were mentioned. Message ID: <astral-sh/uv/issues/9637/2972953664
> @ github. com>
> 
> 
>

---

_Comment by @frodera on 2025-06-17 09:25_

This solution from @thefabus is the only one that has worked for me.

> ‚ùØ rm -rf .venv
‚ùØ uv venv --no-managed-python
Using CPython 3.13.5 interpreter at: /opt/homebrew/opt/python@3.13/bin/python3.13
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate

The workaround of "Selecting .venv as an active interpreter" suggested did not do the trick for me for some reason. ü§∑üèª

---

_Comment by @konstin on 2025-06-17 09:28_

From the other thread, it seems that the preview environment extension also fixes this (https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs, https://github.com/microsoft/vscode-python/issues/25068#issuecomment-2967309800)

---

_Comment by @lmanc on 2025-06-30 18:46_

@konstin, the locator fix suggested by @pdpark-wex worked for me, too.

I tried everything else, the `.venv` absolute path and the new Python Environments extension, but the only thing that fixed it was switching back to the old locator.

---

_Referenced in [pyca/cryptography#13158](../../pyca/cryptography/issues/13158.md) on 2025-07-09 21:16_

---

_Comment by @day0n on 2025-07-10 23:57_

+1

---

_Comment by @Duc-NSH on 2025-07-23 03:11_

> The only thing that worked for me was reverting to the older "js" python locator with this setting: `"python.locator": "js"` - from [here](https://stackoverflow.com/questions/78886125/vscode-python-extension-loading-forever-saying-reactivating-terminals#answer-78886126). Obviously not a great long term solution, but nothing else worked.
> 
> I reported this [here](https://github.com/microsoft/vscode-python/issues/25120#issuecomment-2923529911)

Thank you very much! This solution worked for me. Although I mostly use NeoVim, I still need to use VsCode for certain tasks. The bug where VsCode doesn't detect non-root .venv makes me dislike opening it every time.

---

_Comment by @hsiehbocheng on 2025-07-28 01:41_

Not sure if I‚Äôm misunderstanding your issue, but I ran into something very similar.
VS Code couldn‚Äôt find the Python interpreter in my .venv from uv, and I eventually discovered it was because the virtual-env lived inside a sub-folder (e.g. project/sub-module/.venv).

By default a VS Code workspace only scans the top-level folder for interpreters, so anything in deeper paths is ignored. The fix was to switch to a multi-root workspace (File ‚ñ∏ Add Folder to Workspace‚Ä¶) and add the sub-folder as its own root. As soon as I did that, the .venv interpreter showed up.

Docs for reference: https://code.visualstudio.com/docs/editing/workspaces/multi-root-workspaces

---

_Comment by @codethief on 2025-07-28 09:07_

@Duc-NSH @hsiehbocheng 

> The bug where VsCode doesn't detect non-root .venv

> I eventually discovered it was because the virtual-env lived inside a sub-folder (e.g. project/sub-module/.venv).
> By default a VS Code workspace only scans the top-level folder for interpreters, so anything in deeper paths is ignored.

Correct, and ‚Äì with all due respect ‚Äì we have discussed this various times already (see e.g. the [4th comment here](https://github.com/astral-sh/uv/issues/9637#issuecomment-2518779669)). The bug/deficiency is in Pyright/Pylance[0], and has nothing to do with uv.

Overall, I feel like we're going in circles, so **let me summarize all the solutions & workarounds people here in this thread have identified so far**. I added a suffix `(?)` to solutions I haven't verified myself and where there hasn't been a lot of feedback yet.

**Solution 1:**  Set the interpreter path by hand manually, as discussed [in the very first post](https://github.com/astral-sh/uv/issues/9637#issue-2717716303) here as well as [various](https://github.com/astral-sh/uv/issues/9637#issuecomment-2552026597) [others](https://github.com/astral-sh/uv/issues/9637#issuecomment-2756287897). Note that there seems to be an additional issue regarding symlinks, see [1](https://github.com/astral-sh/uv/issues/9637#issuecomment-2619993750), [2](https://github.com/astral-sh/uv/issues/9637#issuecomment-2773598069), [3](https://github.com/astral-sh/uv/issues/9637#issuecomment-2856524057). Either way, this solution doesn't work great if you're in a monorepo or often switch between multiple projects/workspaces in VSCode.

**Solution 2:** Use a multi-root workspace in VSCode, i.e. one root for every Python project. This isn't exactly great if you're in a monorepo with a lot of projects and collaborators, each of whom will have to set up their VSCode instance by hand, but it seems it is what the [Pyright devs recommend](https://github.com/microsoft/pyright/discussions/7979#discussioncomment-9527473).

**Solution 3**: Like 1 but use an extension like [teticio.python-envy](https://marketplace.visualstudio.com/items?itemName=teticio.python-envy) to automatically set the interpreter path based on the file you're currently looking at, compare https://github.com/astral-sh/uv/issues/9637#issuecomment-2813097995 . This is what I currently use and it has been working quite well in my monorepo setup.

**Solution 4(?)**: Use the new [ms-python.vscode-python-envs](https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs) extension, as per https://github.com/astral-sh/uv/issues/9637#issuecomment-2979632654 .

**Solution 5(?)**: Set `"python.locator": "js"`, compare https://github.com/astral-sh/uv/issues/9637#issuecomment-2923535889 .

**Side note regarding solutions 1 and 3:** You might also want to add a `pyrightconfig.json` to your workspace root and set different [`executionEnvironments`](https://microsoft.github.io/pyright/#/configuration?id=execution-environment-options) for your different projects there. This should ensure that import suggestions work as expected. E.g.:

```javascript
{
    "executionEnvironments": [
        {
            "root": "./python-project1"
        },
        {
            "root": "./python-project2"
        },
        // ‚Ä¶
    ],
    // ‚Ä¶
}
```


[0]: Related tickets: 
- https://github.com/microsoft/pyright/issues/10498
- https://github.com/microsoft/pylance-release/issues/7151
- https://github.com/microsoft/pylance-release/issues/3899
- https://github.com/microsoft/pylance-release/issues/5564
- https://github.com/microsoft/vscode-python/issues/21204


---

_Comment by @jyaros on 2025-08-08 22:41_

Personally i was able to add uvenv as an interpreter only once I reopened the git repo at the top level of the workspace so that the env folder was at root. If you dont **need** to open up a higher parent directory for your work, this is the easiest way to get around the issue ...

---

_Comment by @zanieb on 2025-08-09 03:14_

If there's a canonical way to configure this correctly, e.g., as described by @codethief, I think we should add it to an integration guide in the documentation.

---

_Comment by @konosubakonoakua on 2025-08-18 13:43_

> The only thing that worked for me was reverting to the older "js" python locator with this setting: `"python.locator": "js"` - from [here](https://stackoverflow.com/questions/78886125/vscode-python-extension-loading-forever-saying-reactivating-terminals#answer-78886126). Obviously not a great long term solution, but nothing else worked.
> 
> I reported this [here](https://github.com/microsoft/vscode-python/issues/25120#issuecomment-2923529911)

Thank you, work like a charm.

---

_Comment by @eleanorjboyd on 2025-08-18 16:02_

Hello everyone! Wanted to hop in per @konstin suggestion. I am an engineer on the VS Code team specifically working on Python and environments. We are beginning to roll out a new extension called the Python Environments Extension which is a new extension dedicated to all environment and package management for Python in VS Code. This will serve as the backbone for Python support in VS Code, a required extension which all Python extensions (the core Python, the Python Debugger, and various linter/formatter extensions) will rely on.

With this being said, we encourage everyone encountering issues with their environments in VS Code to install the new extension and add to their user settings:  `python.usePythonEnvironmentsExtension: true`. Once enabled you may find your issue is fixed (as we have made significant improvements to the environment experience) or it may still persist. If you still have it, please file an issue on [this repo](https://github.com/microsoft/vscode-python-environments) and I will get back to you to figure out and solve the bug. This will make sure your bug is fixed moving forward instead of on the soon-to-be deprecated code for environments which lives on the Python extension. 

Feel free to reach out with any outstanding questions in that repository and I hope everyone adopts the new extension as we are excited about the new features which it enables!

---

_Comment by @ggirelli on 2025-08-19 09:36_

> With this being said, we encourage everyone encountering issues with their environments in VS Code to install the new extension and add to their user settings: `python.usePythonEnvironmentsExtension: true`.

This fixed the issue for me. Thank you so much! üôèüèª 

---

_Label `needs-mre` removed by @konstin on 2025-08-19 11:18_

---

_Label `external` added by @konstin on 2025-08-19 11:18_

---

_Comment by @hsuabina on 2025-08-19 18:50_

>Solution 3: Like 1 but use an extension like [teticio.python-envy](https://marketplace.visualstudio.com/items?itemName=teticio.python-envy) to automatically set the interpreter path based on the file you're currently looking at, compare https://github.com/astral-sh/uv/issues/9637#issuecomment-2813097995 . This is what I currently use and it has been working quite well in my monorepo setup.

I'm also working on a monorepo (with packages of all sorts) and for someone that's not so used to work on python projects this solution was simple and effective.


---

_Comment by @codethief on 2025-08-21 02:34_

@eleanorjboyd I've seen your new extension be mentioned a few times already but so far no one ever spelled out what it does differently compared to the old Python extension. Could you elaborate? Does it support monorepos? (I.e. multiple Python projects / venvs per workspace.) Does it automatically recognize Python projects / venvs or do I have to configure things by hand? Etc.

---

_Comment by @matthias-busch on 2025-09-15 13:18_

> Solution 3: Like 1 but use an extension like [teticio.python-envy](https://marketplace.visualstudio.com/items?itemName=teticio.python-envy) to automatically set the interpreter path based on the file you're currently looking at, compare https://github.com/astral-sh/uv/issues/9637#issuecomment-2813097995 . This is what I currently use and it has been working quite well in my monorepo setup.

Gotta say this does work quite well in my monorepos. Thanks for the tip!

---

_Comment by @mironnn on 2025-10-10 17:54_

had the same issue.

Disabling this buggy sh..t solved the issue.
https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs is recommended to be uninstalled.

---

_Comment by @eleanorjboyd on 2025-10-10 20:50_

Hi @mironnn- would appreciate if you file an issue on our repo if you are seeing a problem so I can fix it! Thanks

---

_Comment by @zcuric on 2025-10-14 12:02_

> Hello everyone! Wanted to hop in per [@konstin](https://github.com/konstin) suggestion. I am an engineer on the VS Code team specifically working on Python and environments. We are beginning to roll out a new extension called the Python Environments Extension which is a new extension dedicated to all environment and package management for Python in VS Code. This will serve as the backbone for Python support in VS Code, a required extension which all Python extensions (the core Python, the Python Debugger, and various linter/formatter extensions) will rely on.
> 
> With this being said, we encourage everyone encountering issues with their environments in VS Code to install the new extension and add to their user settings: `python.usePythonEnvironmentsExtension: true`. Once enabled you may find your issue is fixed (as we have made significant improvements to the environment experience) or it may still persist. If you still have it, please file an issue on [this repo](https://github.com/microsoft/vscode-python-environments?rgh-link-date=2025-08-18T16%3A02%3A20.000Z) and I will get back to you to figure out and solve the bug. This will make sure your bug is fixed moving forward instead of on the soon-to-be deprecated code for environments which lives on the Python extension.
> 
> Feel free to reach out with any outstanding questions in that repository and I hope everyone adopts the new extension as we are excited about the new features which it enables!

Does this apply in Cursor as well? üôà 

---

_Comment by @ksaurabh21 on 2025-10-14 13:51_

I am using VS code on Win11 VM on azure. I have created a .venv using uv but none of the solutions suggested above worked for me. I am trying to run a notebook (have jupyter extension and ipykernel installed) but unable to have VS code detect the venv.

---

_Comment by @piehld on 2025-10-20 16:09_

> With this being said, we encourage everyone encountering issues with their environments in VS Code to install the new extension and add to their user settings: `python.usePythonEnvironmentsExtension: true`. 

Is it `python.usePythonEnvironmentsExtension` or `python.useEnvironmentsExtension`? The extension docs suggest the latter, and the former is not showing up as a valid setting.

<img width="870" height="421" alt="Image" src="https://github.com/user-attachments/assets/0cf45e70-0a27-4a40-92d8-1be5cbca5cc8" />

 

---

_Referenced in [astral-sh/uv#16454](../../astral-sh/uv/issues/16454.md) on 2025-10-28 13:45_

---

_Comment by @djsamseng on 2025-11-19 04:55_

In my case, **not** selecting "Select at workspace level" fixed the issue.

My setup was:
- A global uv venv located outside of the VSCode workspace (ex: ~/.venv)
- A VSCode workspace with multiple projects
- Python: Select interpreter -> Select at workspace level -> Enter interpreter path -> intellisense does not work, installed modules (via uv pip install) are not found

What did work was:
Python: Select interpreter -> ***Project Name*** -> Enter interpreter path -> intellisense works

---

_Comment by @akk29 on 2025-11-20 01:35_

Resolved, I just selected path of interpreter in from VS code bottom right corner in .venv/Scripts/python, after that it got resolved, though I have also uninstalled the extension mentioned above , added that config also didn't work that either (reverted it). Not sure if uninstalling extension have any effect on this. Path selection for interpreter have definitely fixed this issue.

---

_Comment by @juhaszp95 on 2025-11-26 13:50_

Just leaving a comment here to say that https://github.com/astral-sh/uv/issues/9637#issuecomment-2813097995 works for me, and is the only solution which is working for me at the moment (i.e. the new Python Environments extension didn't solve the issue for me).

---

_Comment by @tinodj on 2025-12-04 21:46_

I hit this when using uv, and actually the problem is finder resolving symlink on MacOS, described here: https://github.com/astral-sh/uv/issues/8706#issuecomment-2773598984

With python.usePythonEnvironmentsExtension: true this is not fixed, and this extension even it makes impossible to enter path manually, only to select it from finder, which then resolves to original uv python. However, extension is very nice itself and there are lot of useful features. 

---

_Comment by @cs-mshah on 2025-12-07 19:11_

> In my case, **not** selecting "Select at workspace level" fixed the issue.
> 
> My setup was:
> 
> * A global uv venv located outside of the VSCode workspace (ex: ~/.venv)
> * A VSCode workspace with multiple projects
> * Python: Select interpreter -> Select at workspace level -> Enter interpreter path -> intellisense does not work, installed modules (via uv pip install) are not found
> 
> What did work was: Python: Select interpreter -> _**Project Name**_ -> Enter interpreter path -> intellisense works

This is what works for me as well. Thanks!

---
