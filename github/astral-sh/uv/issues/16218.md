---
number: 16218
title: "failed to remove directory `/app/.venv`: Resource busy"
type: issue
state: closed
author: toryvan
labels:
  - bug
assignees: []
created_at: 2025-10-10T01:00:09Z
updated_at: 2025-10-23T20:08:54Z
url: https://github.com/astral-sh/uv/issues/16218
synced_at: 2026-01-07T12:31:16-06:00
---

# failed to remove directory `/app/.venv`: Resource busy

---

_Issue opened by @toryvan on 2025-10-10 01:00_

### Summary

With Docker Compose I use an anonymous mount of .venv to prevent the host .venv from being used within the Docker container.

The container is used as a dev container, we don't even install dependencies or load until runtime.

However, if I do this, and I try and change the Python version, it seems UV tries to delete the .venv and since it is a mount, it errors out.

Minimal Reproduction example:
```
% docker run --rm -it -v /app/.venv  ghcr.io/astral-sh/uv:debian   /bin/bash
root@a0fc72adbd92:/# cd app
root@a0fc72adbd92:/app# uv init
Initialized project `app`
root@a0fc72adbd92:/app# rm .python-version
root@a0fc72adbd92:/app# grep "requires"  pyproject.toml
requires-python = ">=3.13"
root@a0fc72adbd92:/app# uv sync
Using CPython 3.13.5 interpreter at: /usr/bin/python3
Creating virtual environment at: .venv
Resolved 1 package in 3ms
Audited in 0.03ms
root@a0fc72adbd92:/app# sed -i 's/^\(.*requires-python.*\)"[^"]*"/\1"==3.10.*"/' pyproject.toml  #change the python version
root@a0fc72adbd92:/app# uv sync
Using CPython 3.10.18
error: failed to remove directory `/app/.venv`: Resource busy (os error 16)
root@a0fc72adbd92:/app# uv --version
uv 0.9.1
root@a0fc72adbd92:/app# ls .venv
root@a0fc72adbd92:/app#
```

The amusing thing is that in the process .venv actually gets cleared out.

Arguably this isn't a bug, I almost made it a feature request. It does fall a bit into the bug category since it said that removing .venv failed, despite emptying the contents.

When I found https://github.com/astral-sh/uv/issues/14815 I thought I was in luck, but it seems maybe that was a slightly different issue.

Thanks for all the work. I'm in the midst of moving the team to UV and we're pretty excited :) I might use the env var for switching the .venv folder as a workaround.

### Platform

ghcr.io/astral-sh/uv:debian, Darwin 23.4.0 arm64, Ubuntu 24.04

### Version

0.9.1, 0.8.6

### Python version

_No response_

---

_Label `bug` added by @toryvan on 2025-10-10 01:00_

---

_Referenced in [DiamondLightSource/python-copier-template#301](../../DiamondLightSource/python-copier-template/issues/301.md) on 2025-10-17 15:18_

---

_Referenced in [DiamondLightSource/python-copier-template#303](../../DiamondLightSource/python-copier-template/pulls/303.md) on 2025-10-21 15:48_

---

_Comment by @coretl on 2025-10-21 15:55_

I reported https://github.com/astral-sh/uv/issues/14815 that @zanieb kindly fixed in record time, and we are now running into this issue too. We could avoid this issue if https://github.com/astral-sh/uv/pull/14937 was merged (or some other solution to https://github.com/astral-sh/uv/issues/1495)

---

_Referenced in [astral-sh/uv#16394](../../astral-sh/uv/pulls/16394.md) on 2025-10-21 17:40_

---

_Comment by @zanieb on 2025-10-21 17:40_

I think we can just make this non-fatal https://github.com/astral-sh/uv/pull/16394

---

_Comment by @zanieb on 2025-10-21 17:41_

Thanks for the nice minimal reproduction!

---

_Closed by @zanieb on 2025-10-23 20:08_

---
