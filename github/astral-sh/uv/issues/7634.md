---
number: 7634
title: "uv tool shouldn't use Python from homebrew version directories"
type: issue
state: closed
author: frostming
labels:
  - duplicate
assignees: []
created_at: 2024-09-23T03:36:18Z
updated_at: 2024-09-23T04:11:54Z
url: https://github.com/astral-sh/uv/issues/7634
synced_at: 2026-01-07T12:31:15-06:00
---

# uv tool shouldn't use Python from homebrew version directories

---

_Issue opened by @frostming on 2024-09-23 03:36_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

On a macos machine with homebrew python installed, when installing executables using `uv tool install`, the base interpreter of the venv points to a python inside homebrew's version directory, for example:

```
â¯ cat '/Users/fming/Library/Application Support/uv/tools/posting/pyvenv.cfg' -p
home = /opt/homebrew/Cellar/python@3.12/3.12.4/Frameworks/Python.framework/Versions/3.12/bin
implementation = CPython
uv = 0.2.23
version_info = 3.12.4
include-system-site-packages = false
```

And the `bin/python` also symlinks to the same interpreter.

This is subject to breakage when users upgrade the version of `python@3.12` formula, because the new intepreter will be in a different directory. It's a huge pain when user run `brew upgrade` and suddenly all venvs become broken.

To compare, this is what pipx creates:

```
home = /opt/homebrew/opt/python@3.12/bin
include-system-site-packages = false
version = 3.12.6
executable = /opt/homebrew/Cellar/python@3.12/3.12.6/Frameworks/Python.framework/Versions/3.12/bin/python3.12
command = /opt/homebrew/opt/python@3.12/bin/python3.12 -m venv --without-pip /Users/fming/.local/pipx/venvs/posting
```


---

_Comment by @frostming on 2024-09-23 03:57_

ok, the issue actually lies in `uv venv`, where it should not resolve symlinks for the python executable passed in:

```
$ uv venv .venv -p /opt/homebrew/opt/python@3.12/bin/python3
$ ls -l .venv/bin/python
lrwxr-xr-x  1 fming  staff    96B  9 23 11:56 .venv/bin/python -> /opt/homebrew/Cellar/python@3.12/3.12.6/Frameworks/Python.framework/Versions/3.12/bin/python3.12
```

---

_Comment by @zanieb on 2024-09-23 04:00_

I believe this is a duplicate of https://github.com/astral-sh/uv/issues/1640


---

_Label `duplicate` added by @zanieb on 2024-09-23 04:00_

---

_Comment by @zanieb on 2024-09-23 04:01_

And yeah, sorry this sounds painful.

---

_Comment by @frostming on 2024-09-23 04:11_

Yeah, that is duplicate. Closing this now.

---

_Closed by @frostming on 2024-09-23 04:11_

---

_Referenced in [astral-sh/uv#7651](../../astral-sh/uv/issues/7651.md) on 2024-09-24 00:15_

---
