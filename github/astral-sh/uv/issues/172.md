---
number: 172
title: "Support constraints in `requirements.txt` files"
type: issue
state: closed
author: charliermarsh
labels:
  - enhancement
assignees: []
created_at: 2023-10-23T21:27:10Z
updated_at: 2023-10-27T00:41:04Z
url: https://github.com/astral-sh/uv/issues/172
synced_at: 2026-01-07T12:31:14-06:00
---

# Support constraints in `requirements.txt` files

---

_Issue opened by @charliermarsh on 2023-10-23 21:27_

We now support constraints, but we bail when they're provided as part of a `requirements.txt` file.

---

_Added to milestone `Initial release` by @charliermarsh on 2023-10-24 19:18_

---

_Label `enhancement` added by @charliermarsh on 2023-10-24 19:18_

---

_Label `wish` added by @charliermarsh on 2023-10-24 19:36_

---

_Assigned to @charliermarsh by @charliermarsh on 2023-10-26 19:28_

---

_Comment by @charliermarsh on 2023-10-26 22:54_

- If a constraint file includes a requirements file, the requirements in that file count as constraints.
- If a constraint file includes a constraint file, those are basically ignored? It looks like nested constraints are always ignored.

---

_Comment by @charliermarsh on 2023-10-26 22:55_

- If a requirements file includes a requirements file, which includes a constraint file, that constraint file seems to be ignored.

---

_Comment by @charliermarsh on 2023-10-26 22:56_

(These are all `pip` behaviors.)

---

_Label `wish` removed by @charliermarsh on 2023-10-26 22:58_

---

_Comment by @charliermarsh on 2023-10-26 22:58_

(Removing `wish` tag because it turns out this is very common.)

---

_Comment by @charliermarsh on 2023-10-26 23:45_

I don't really know what the right behavior is here. pip's behavior is very strange.

https://github.com/pypa/pip/pull/8821

https://github.com/pypa/pip/issues/8416

We have three options:

- Follow pip.
- Treat everything included from a `-c` as a constraint, regardless of whether it's added via a nested `-r` or `-c`. (This is the current behavior.)
- Reject nested `-r` in a constraint file, or even reject nested `-c` in a constraint file.

The second is the most reasonable so I'll just run with that for now.

\cc @konstin 


---

_Referenced in [astral-sh/uv#212](../../astral-sh/uv/pulls/212.md) on 2023-10-27 00:32_

---

_Closed by @charliermarsh on 2023-10-27 00:41_

---

_Referenced in [astral-sh/uv#1332](../../astral-sh/uv/issues/1332.md) on 2024-02-15 20:31_

---
