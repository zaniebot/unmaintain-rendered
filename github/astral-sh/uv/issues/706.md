---
number: 706
title: Display better error when index does not support requested format
type: issue
state: closed
author: zanieb
labels:
  - error messages
assignees: []
created_at: 2023-12-19T18:45:12Z
updated_at: 2023-12-24T21:57:01Z
url: https://github.com/astral-sh/uv/issues/706
synced_at: 2026-01-07T12:31:14-06:00
---

# Display better error when index does not support requested format

---

_Issue opened by @zanieb on 2023-12-19 18:45_

I haven't found an example index that returns the correct response type yet, but in theory content negotiation will result in a 406 or 415 if the requested response format is not supported e.g. https://github.com/devpi/devpi/issues/1020

We should explain that the package index does not support the required specification or suggest including `simple` in the index URL.

May be irrelevant with the implementation of #412 

---

_Assigned to @charliermarsh by @charliermarsh on 2023-12-21 21:09_

---

_Label `error messages` added by @charliermarsh on 2023-12-21 21:09_

---

_Comment by @charliermarsh on 2023-12-24 21:52_

We do now show a custom message at least for indexes that return a default type: "error: Unsupported `Content-Type` "text/html" for https://download.pytorch.org/whl/jinja2/. Index must support JSON or HTML responses."

---

_Comment by @charliermarsh on 2023-12-24 21:53_

If the server returns 406 or 300 (per [PEP 691](https://peps.python.org/pep-0691/#version-format-selection)), I think we'll just error and show the server response. Maybe sufficient? I also don't know of servers that use those responses unfortunately.

---

_Comment by @charliermarsh on 2023-12-24 21:57_

I'm okay with the current improvements, presumedly the 406 would tell you that the content type is unsupported (I would hope)!

---

_Closed by @charliermarsh on 2023-12-24 21:57_

---

_Referenced in [astral-sh/uv#705](../../astral-sh/uv/issues/705.md) on 2023-12-25 00:26_

---

_Referenced in [astral-sh/uv#4907](../../astral-sh/uv/issues/4907.md) on 2024-07-24 07:58_

---
