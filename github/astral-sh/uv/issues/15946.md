---
number: 15946
title: uv run breaks typer
type: issue
state: closed
author: acmiyaguchi
labels:
  - bug
assignees: []
created_at: 2025-09-19T11:47:55Z
updated_at: 2025-09-19T13:02:04Z
url: https://github.com/astral-sh/uv/issues/15946
synced_at: 2026-01-07T12:31:16-06:00
---

# uv run breaks typer

---

_Issue opened by @acmiyaguchi on 2025-09-19 11:47_

### Summary

```python
# /// script
# requires-python = ">=3.10"
# dependencies = [
#   "typer==0.17.4",
# ]
# ///
import typer
from typing_extensions import Annotated


def main(name: str, lastname: Annotated[str, typer.Option()]):
    print(f"Hello {name} {lastname}")


if __name__ == "__main__":
    print(typer.__version__)
    typer.run(main)
```

This script from the typer documentation is broken (https://typer.tiangolo.com/tutorial/options/name/). It should spit an error that are missing arguments.

```
❯ python test-typer.py
0.17.4
Usage: test-typer.py [OPTIONS] NAME
Try 'test-typer.py --help' for help.
╭─ Error ─────────────────────────────────────────────────────────────────────────────────────────────────────╮
│ Missing argument 'NAME'.                                                                                    │
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
```

Instead it fills in Nones

```
❯ uv --version
uv 0.8.18 (c4c47814a 2025-09-17)

❯ uv run test-typer.py
0.17.4
Hello None None
```

I suspect this is a uv problem, but I'm not 100% certain.

### Platform

Darwin 24.6.0 arm64

### Version

uv 0.8.18 (c4c47814a 2025-09-17)

### Python version

Python 3.10.18

---

_Label `bug` added by @acmiyaguchi on 2025-09-19 11:47_

---

_Comment by @zanieb on 2025-09-19 12:52_

Hm.. I can reproduce

```
❯ uvx --with typer==0.17.4 python example.py
Installed 8 packages in 32ms
0.17.4
Hello None None
❯ uv run example.py
Installed 8 packages in 11ms
0.17.4
Hello None None
```

---

_Comment by @zanieb on 2025-09-19 12:53_

Except I cannot reproduce the "Missing argument" behavior

```
❯ uv venv
Using CPython 3.14.0rc2 interpreter at: /Users/zb/.local/bin/python3.14
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate

❯ uv pip install typer==0.17.4
Resolved 8 packages in 2ms
Installed 8 packages in 12ms
 + click==8.3.0
 + markdown-it-py==4.0.0
 + mdurl==0.1.2
 + pygments==2.19.2
 + rich==14.1.0
 + shellingham==1.5.4
 + typer==0.17.4
 + typing-extensions==4.15.0

❯ source .venv/bin/activate
❯ python example.py
0.17.4
Hello None None
```

---

_Comment by @acmiyaguchi on 2025-09-19 12:58_

Thanks for reproducing this for me. I didn't actually make a fresh virtual environment to test this (and relied on an existing one that worked for some reason). I've confirmed that I do get the same error as you, so I'll go ahead and file an issue with typer instead. Will leave this open until I've confirmed things.

---

_Comment by @acmiyaguchi on 2025-09-19 13:01_

After digging into the discussions (and not issues) in the typer repo, I see the problem here: https://github.com/fastapi/typer/discussions/1334

---

_Closed by @acmiyaguchi on 2025-09-19 13:02_

---
