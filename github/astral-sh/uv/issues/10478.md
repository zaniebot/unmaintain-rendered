---
number: 10478
title: UV_FIND_LINKS does not work as documented
type: issue
state: open
author: foxcroftjn
labels:
  - needs-mre
assignees: []
created_at: 2025-01-10T19:52:30Z
updated_at: 2025-01-11T02:42:08Z
url: https://github.com/astral-sh/uv/issues/10478
synced_at: 2026-01-07T12:31:15-06:00
---

# UV_FIND_LINKS does not work as documented

---

_Issue opened by @foxcroftjn on 2025-01-10 19:52_

The [`UV_FIND_LINKS`](https://docs.astral.sh/uv/configuration/environment/#uv_find_links) environment variable is currently documented as:

> Equivalent to the --find-links command-line argument. If set, uv will use this comma-separated list of additional locations to search for packages.

When I run the following:

```bash
export UV_FIND_LINKS='/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/avx2,/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/avx2,/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/generic,/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/generic,/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/generic'
uv pip install --verbose --no-index tensorflow-gpu==2.11
```

I get the error:

```
DEBUG uv 0.5.16
DEBUG Searching for default Python interpreter in virtual environments
DEBUG Found `cpython-3.8.10-linux-x86_64-gnu` at `/home/jfoxcrof/temp/.venv/bin/python3` (virtual environment)
DEBUG Using Python 3.8.10 environment at: .venv
DEBUG Acquired lock for `.venv`
DEBUG At least one requirement is not satisfied: tensorflow-gpu==2.11
DEBUG Using request timeout of 30s
DEBUG Released lock at `/home/jfoxcrof/temp/.venv/.lock`
error: Failed to read `--find-links` directory: /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/avx2,/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/avx2,/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/generic,/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/generic,/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/generic
  Caused by: No such file or directory (os error 2)
```

After the fix I provide in #10477, the error changes to:

```
DEBUG uv 0.5.16+36 (503f9a97a 2025-01-10)
DEBUG Searching for default Python interpreter in virtual environments
DEBUG Found `cpython-3.8.10-linux-x86_64-gnu` at `/home/jfoxcrof/temp/.venv/bin/python3` (virtual environment)
DEBUG Using Python 3.8.10 environment at: .venv
DEBUG Acquired lock for `.venv`
DEBUG At least one requirement is not satisfied: tensorflow-gpu==2.11
DEBUG Using request timeout of 30s
DEBUG Found 72 packages in `--find-links` entry: file:///cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/avx2
DEBUG Found 836 packages in `--find-links` entry: file:///cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/avx2
DEBUG Found 67 packages in `--find-links` entry: file:///cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/generic
DEBUG Found 1746 packages in `--find-links` entry: file:///cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/generic
DEBUG Found 11159 packages in `--find-links` entry: file:///cvmfs/soft.computecanada.ca/custom/python/wheelhouse/generic
DEBUG Solving with installed Python version: 3.8.10
DEBUG Solving with target Python version: >=3.8.10
DEBUG Adding direct dependency: tensorflow-gpu>=2.11, <2.11+
DEBUG Searching for a compatible version of tensorflow-gpu (>=2.11, <2.11+)
DEBUG No compatible version found for: tensorflow-gpu
  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of tensorflow-gpu==2.11 and you require tensorflow-gpu==2.11, we can conclude that your requirements are unsatisfiable.
DEBUG Released lock at `/home/jfoxcrof/temp/.venv/.lock`
```

The output immediately above is also what I see if I set find-links through pyproject.toml like this:

```toml
[tool.uv.pip]
find-links = [
  "/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/avx2",
  "/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/avx2",
  "/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/generic",
  "/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/generic",
  "/cvmfs/soft.computecanada.ca/custom/python/wheelhouse/generic",
]
```

but when I provide each path to separate instances of --find-links like so:

```bash
uv pip install --verbose --no-index --find-links /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/avx2 --find-links /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/avx2 --find-links /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/generic --find-links /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/generic --find-links /cvmfs/soft.computecanada.ca/custom/python/wheelhouse/generic tensorflow==2.11
```

I see:
```
DEBUG uv 0.5.16
DEBUG Searching for default Python interpreter in virtual environments
DEBUG Found `cpython-3.8.10-linux-x86_64-gnu` at `/home/jfoxcrof/temp/.venv/bin/python3` (virtual environment)
DEBUG Using Python 3.8.10 environment at: .venv
DEBUG Acquired lock for `.venv`
DEBUG At least one requirement is not satisfied: tensorflow==2.11
DEBUG Using request timeout of 30s
DEBUG Found 72 packages in `--find-links` entry: file:///cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/avx2
DEBUG Found 836 packages in `--find-links` entry: file:///cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/avx2
DEBUG Found 67 packages in `--find-links` entry: file:///cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo2020/generic
DEBUG Found 1746 packages in `--find-links` entry: file:///cvmfs/soft.computecanada.ca/custom/python/wheelhouse/gentoo/generic
DEBUG Found 11159 packages in `--find-links` entry: file:///cvmfs/soft.computecanada.ca/custom/python/wheelhouse/generic
DEBUG Solving with installed Python version: 3.8.10
DEBUG Solving with target Python version: >=3.8.10
DEBUG Adding direct dependency: tensorflow>=2.11, <2.11+
DEBUG Searching for a compatible version of tensorflow (>=2.11, <2.11+)
DEBUG Selecting: tensorflow==2.11.0+computecanada [compatible] (tensorflow-2.11.0+computecanada-cp38-cp38-linux_x86_64.whl)
```

and installation proceeds smoothly from there.

---

_Comment by @charliermarsh on 2025-01-10 22:20_

Any way you can provide an MRE that I can use to debug this? We have a lot of tests for `--find-links` so I don't think I'll be able to replicate this trivially.

---

_Label `needs-mre` added by @charliermarsh on 2025-01-10 22:20_

---

_Comment by @foxcroftjn on 2025-01-10 23:53_

I haven't tried to reproduce this locally yet. I'll see what I can do next week. I was (and still am) hoping that it should be easy to reproduce locally, since the [only test case](https://github.com/SethMMorton/uv/blob/9f59c8e239069b3940fa31250e180ace4e5db604/crates/uv/tests/pip_compile.rs#L4596-L4621) for the `UV_FIND_LINKS` environment variable that I see contains a single url, not a comma separated list of directories.

---

_Comment by @charliermarsh on 2025-01-11 02:42_

E.g., this works for me without issue from the root of the repo.

```shell
UV_FIND_LINKS="../scripts/links,../scripts/packages" uv pip install --no-index validation
```

---
