---
number: 3818
title: "`uv pip compile` causes \"direct URL requirements without package names are not supported\" error"
type: issue
state: closed
author: groodt
labels:
  - bug
assignees: []
created_at: 2024-05-24T10:57:13Z
updated_at: 2024-05-24T21:03:20Z
url: https://github.com/astral-sh/uv/issues/3818
synced_at: 2026-01-07T13:12:17-06:00
---

# `uv pip compile` causes "direct URL requirements without package names are not supported" error

---

_Issue opened by @groodt on 2024-05-24 10:57_

It appears that there is something strange happening when `uv pip compile` is creating a lockfile for direct url references when environment variable interpolation is occurring.

## requirements.in
```
requests @ ${GITHUB_URL}/psf/requests
```

## Create lockfile
```
GITHUB_URL=git+https://github.com python -m uv pip compile requirements.in --ou
tput-file requirements.txt
```

## Inspect generated requirements.txt
```
# This file was autogenerated by uv via the following command:
#    uv pip compile requirements.in --output-file requirements.txt
certifi==2024.2.2
    # via requests
charset-normalizer==3.3.2
    # via requests
idna==3.7
    # via requests
${GITHUB_URL}/psf/requests@88dce9d854797c05d0ff296b70e0430535ef8aaf
    # via -r requirements.in
urllib3==2.2.1
    # via requests
```

## Run lockfile generation again and an error occurs
```
GITHUB_URL=git+https://github.com python -m uv pip compile requirements.in --ou
tput-file requirements.txt
error: direct URL requirements without package names are not supported: `git+https://github.com/psf/requests@88dce9d854797c05d0ff296b70e0430535ef8aaf`
```





---

_Label `bug` added by @konstin on 2024-05-24 11:13_

---

_Assigned to @charliermarsh by @charliermarsh on 2024-05-24 12:24_

---

_Comment by @charliermarsh on 2024-05-24 12:44_

Thanks, will fix.

---

_Comment by @charliermarsh on 2024-05-24 13:16_

I’ll try to get this out today, I think it’s a regression from a recent change.

---

_Referenced in [astral-sh/uv#3821](../../astral-sh/uv/pulls/3821.md) on 2024-05-24 13:47_

---

_Closed by @charliermarsh on 2024-05-24 21:01_

---

_Comment by @charliermarsh on 2024-05-24 21:03_

This should be fixed in v0.2.3 (out now).

---
