---
number: 9397
title: Allow UV_NO_SYNC=1 UV_FROZEN=1 on uv run
type: issue
state: closed
author: inoa-jboliveira
labels:
  - question
assignees: []
created_at: 2024-11-24T16:11:14Z
updated_at: 2024-11-25T01:18:28Z
url: https://github.com/astral-sh/uv/issues/9397
synced_at: 2026-01-07T12:31:15-06:00
---

# Allow UV_NO_SYNC=1 UV_FROZEN=1 on uv run

---

_Issue opened by @inoa-jboliveira on 2024-11-24 16:11_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

I have a docker application where I don't want each `uv run` syncing every time (due to how I build the image without dev group on uv sync) and I don't want `uv sync` trying to resolve anything.
Therefore I tried to add both env variables to my docker image

```
UV_NO_SYNC=1
UV_FROZEN=1
```

For syncing, the UV_NO_SYNC  variable is simply ignored, which makes sense and is desirable.

When doing `uv run` I get:

```
$ uv run foo
error: the argument '--no-sync' cannot be used with '--frozen'

Usage: uv run --no-sync
```

Also notice the error messages refer as if I passed conflicting arguments when in fact I used env variables which should be more lenient as in a best effort basis.

In any case, I do not think --no-sync and --frozen are exclusive parameters. They should play along well


---

_Comment by @charliermarsh on 2024-11-24 16:26_

Yeah this seems like a bug.

---

_Comment by @charliermarsh on 2024-11-24 16:26_

Although, wait, I think `--no-sync` implies frozen in `uv run`?

---

_Label `question` added by @charliermarsh on 2024-11-24 16:26_

---

_Comment by @inoa-jboliveira on 2024-11-24 17:51_

> Although, wait, I think `--no-sync` implies frozen in `uv run`?

`--no-sync` will prevent syncing which makes `--frozen` just a no-op.

But for `uv sync` the `--frozen` option is important because `--no-sync` is a no-op. 

IMHO I would just remove the conflicts_with here:
https://github.com/astral-sh/uv/blob/e485dfd7f1984537374676e422691c2327c4e24e/crates/uv-cli/src/lib.rs#L2734-L2735

---

_Comment by @charliermarsh on 2024-11-25 00:56_

I see, so we're agreed that `--frozen` is redundant for `uv run` here, but you're saying that because you set the env vars, it makes it inconvenient. That's reasonable. I'll lift the restriction.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-11-25 00:57_

---

_Referenced in [astral-sh/uv#9400](../../astral-sh/uv/pulls/9400.md) on 2024-11-25 01:09_

---

_Closed by @charliermarsh on 2024-11-25 01:18_

---
