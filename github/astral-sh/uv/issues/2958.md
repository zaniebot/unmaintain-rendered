---
number: 2958
title: installing private packages from a custom pypi repo -  requirements are unsatisfiable.
type: issue
state: closed
author: etele
labels:
  - bug
assignees: []
created_at: 2024-04-10T10:47:15Z
updated_at: 2024-04-10T14:25:30Z
url: https://github.com/astral-sh/uv/issues/2958
synced_at: 2026-01-07T12:31:14-06:00
---

# installing private packages from a custom pypi repo -  requirements are unsatisfiable.

---

_Issue opened by @etele on 2024-04-10 10:47_

While testing fixes from [issue](https://github.com/astral-sh/uv/issues/2899) 
the official mirrored packages seem to be installing, but getting an error with our private packages.
pip itself  (and pipenv also) installing them fine.

if i understand uv log itself it founds the repo and the packages but somehow still shows that requirements are unsatisfied.

```
$ uv --version
uv 0.1.31
```

```
UV_INDEX_URL=https://pypi.private.repo/simple/
SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
```

```
$ uv -v pip install -r requirements.txt
INFO Found a virtualenv through VIRTUAL_ENV at: /home/user/.local/share/virtualenvs/api-v3W8N2Or
DEBUG Cached interpreter info for Python 3.11.8, skipping probing: /home/user/.local/share/virtualenvs/api-v3W8N2Or/bin/python
DEBUG Using Python 3.11.8 environment at /home/user/.local/share/virtualenvs/api-v3W8N2Or/bin/python
DEBUG Trying to lock if free: /home/user/.local/share/virtualenvs/api-v3W8N2Or/.lock
DEBUG Using registry request timeout of 300s
DEBUG Solving with target Python version 3.11.8
DEBUG Adding direct dependency: custom-tools-common==1.0.0
TRACE Fetching metadata for custom-tools-common from https://pypi.private.repo/simple/custom-tools-common/
TRACE cached request https://pypi.private.repo/simple/custom-tools-common/ is storable because its response has a heuristically cacheable status code 200
TRACE cached request https://pypi.private.repo/simple/custom-tools-common/ has a cached response that does not allow staleness
TRACE request https://pypi.private.repo/simple/custom-tools-common/ does not have a fresh cache because its age is 6 seconds, it is greater than the freshness lifetime of 0 seconds and stale cached responses are not allowed
DEBUG Found stale response for: https://pypi.private.repo/simple/custom-tools-common/
DEBUG Sending revalidation request for: https://pypi.private.repo/simple/custom-tools-common/
DEBUG No credentials found for: https://pypi.private.repo/simple/custom-tools-common/
TRACE is modified because status is 200 and not 304
DEBUG Found modified response for: https://pypi.private.repo/simple/custom-tools-common/
TRACE cached request https://pypi.private.repo/simple/custom-tools-common/ is storable because its response has a heuristically cacheable status code 200
TRACE Received package metadata for: custom-tools-common
TRACE selecting candidate for package custom-tools-common with range Range { segments: [(Included("1.0.0"), Included("1.0.0"))] } with 0 remote versions
TRACE exhausted all candidates for package PackageName("custom-tools-common") with range Range { segments: [(Included("1.0.0"), Included("1.0.0"))] } after 0 steps
DEBUG Searching for a compatible version of custom-tools-common (==1.0.0)
TRACE selecting candidate for package custom-tools-common with range Range { segments: [(Included("1.0.0"), Included("1.0.0"))] } with 0 remote versions
TRACE exhausted all candidates for package PackageName("custom-tools-common") with range Range { segments: [(Included("1.0.0"), Included("1.0.0"))] } after 0 steps
DEBUG No compatible version found for: custom-tools-common
  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of custom-tools-common==1.0.0 and you require custom-tools-common==1.0.0, we
      can conclude that the requirements are unsatisfiable.
```

the content of the [https://pypi.private.repo/simple/custom-tools-common ](https://pypi.private.repo/simple/custom-tools-common/)
```
<!DOCTYPE html>
<html>
<head>
    <meta name="pypi:repository-version" content="1.1">
    <title>Links for custom-tools-common</title>
</head>
<body>
    <h1>Links for custom-tools-common</h1>
            <a href="/packages/custom-tools-common/b/i/custom-tools-common-0.1.0.tar.gz?hash=659a53efb5cc5822481309c13516eb0a70085defc089bcc4cc5c1a4f961e10f3&project=legacy#sha256=659a53efb5cc5822481309c13516eb0a70085defc089bcc4cc5c1a4f961e10f3">custom-tools-common-0.1.0.tar.gz</a>
    </br>
            <a href="/packages/custom-tools-common/b/i/custom-tools-common-1.0.0.tar.gz?hash=0d6fd43761bfaff689c316e0b6e2ae67cdc99e6738a817f8737ecd3094a027d8&project=legacy#sha256=0d6fd43761bfaff689c316e0b6e2ae67cdc99e6738a817f8737ecd3094a027d8">custom-tools-common-1.0.0.tar.gz</a>
    </br>
            <a href="/packages/custom-tools-common/b/i/custom-tools-common-1.0.0.tar.gz?hash=c73d38829997cd42dd64f1b0c56707ede39790612b15973c47c3288558e4b54d&project=custom-bi#sha256=c73d38829997cd42dd64f1b0c56707ede39790612b15973c47c3288558e4b54d">custom-tools-common-1.0.0.tar.gz</a>
    </br>
</body>
</html>
<!--SERIAL 1710848397
-->
```

while pip installs it without issues:

```
$ pip install -r requirements.txt
Looking in indexes: https://pypi.private.repo/simple/
Collecting custom-tools-common==1.0.0 (from -r requirements.txt (line 2))
  Using cached https://pypi.private.repo/packages/custom-tools-common/b/i/custom-tools-common-1.0.0.tar.gz?hash=c73d38829997cd42dd64f1b0c56707ede39790612b15973c47c3288558e4b54d&project=fulltext-bi (6.0 kB)
  Preparing metadata (setup.py) ... done
Requirement already satisfied: requests>=2 in /home/user/.local/share/virtualenvs/api-v3W8N2Or/lib/python3.11/site-packages (from custom-tools-common==1.0.0->-r requirements.txt (line 2)) (2.31.0)
Requirement already satisfied: charset-normalizer<4,>=2 in /home/user/.local/share/virtualenvs/api-v3W8N2Or/lib/python3.11/site-packages (from requests>=2->custom-tools-common==1.0.0->-r requirements.txt (line 2)) (3.3.2)
Requirement already satisfied: idna<4,>=2.5 in /home/user/.local/share/virtualenvs/api-v3W8N2Or/lib/python3.11/site-packages (from requests>=2->custom-tools-common==1.0.0->-r requirements.txt (line 2)) (3.6)
Requirement already satisfied: urllib3<3,>=1.21.1 in /home/user/.local/share/virtualenvs/api-v3W8N2Or/lib/python3.11/site-packages (from requests>=2->custom-tools-common==1.0.0->-r requirements.txt (line 2)) (2.2.1)
Requirement already satisfied: certifi>=2017.4.17 in /home/user/.local/share/virtualenvs/api-v3W8N2Or/lib/python3.11/site-packages (from requests>=2->custom-tools-common==1.0.0->-r requirements.txt (line 2)) (2024.2.2)
Building wheels for collected packages: custom-tools-common
  Building wheel for custom-tools-common (setup.py) ... done
  Created wheel for custom-tools-common: filename=custom_tools_common-1.0.0-py3-none-any.whl size=7532 sha256=c7a48bf3d8bdbe1203c0d510e776a71f1cedb22cdd9b529665c3c8a40abec879
  Stored in directory: /home/user/.cache/pip/wheels/fd/41/60/99770daf34091cbbf5c8cf1c5963f16b85cdeef6af4ecabb8a
Successfully built custom-tools-common
Installing collected packages: custom-tools-common
Successfully installed custom-tools-common-1.0.0
```

from setup.py of the package i want to install:
```
    classifiers=[
        'Intended Audience :: Developers',
        'Programming Language :: Python',
        'Programming Language :: Python :: 3.10',
        'Programming Language :: Python :: 3.11',
    ],

```
package name and repo name slightly anonymized



---

_Comment by @charliermarsh on 2024-04-10 13:53_

I think it might be the query string. I'll take a look.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-04-10 13:56_

---

_Label `bug` added by @charliermarsh on 2024-04-10 13:56_

---

_Referenced in [astral-sh/uv#2961](../../astral-sh/uv/pulls/2961.md) on 2024-04-10 14:13_

---

_Closed by @zanieb on 2024-04-10 14:25_

---
