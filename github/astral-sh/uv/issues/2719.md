---
number: 2719
title: Use separate resource pools for downloads and source distribution builds
type: issue
state: closed
author: charliermarsh
labels:
  - performance
assignees: []
created_at: 2024-03-28T20:24:48Z
updated_at: 2024-07-15T14:32:49Z
url: https://github.com/astral-sh/uv/issues/2719
synced_at: 2026-01-07T12:31:14-06:00
---

# Use separate resource pools for downloads and source distribution builds

---

_Issue opened by @charliermarsh on 2024-03-28 20:24_

I believe we have a fixed concurrency limit, and the atomic unit is "get the wheel for this distribution". For built distributions, that's typically a download + unzip. For source distributions, it's a download + unzip + build.

We should use separate pools for downloading vs. building, since we otherwise risk not saturating the network while we build.

---

_Label `performance` added by @charliermarsh on 2024-03-28 20:24_

---

_Comment by @charliermarsh on 2024-03-28 20:25_

@konstin - You may also find this interesting / relevant.

---

_Comment by @charliermarsh on 2024-03-28 21:08_

I think doing this fully-correctly is non-trivial since we need to change the source distribution database to return an unbuilt source.

---

_Comment by @charliermarsh on 2024-03-28 21:13_

I'm trying a simpler thing to start: just use separate pools for wheels and source distributions.

---

_Comment by @konstin on 2024-03-28 21:15_

Our pool size is currently 50, how many of those would be taken by source dist builds, do you have an example?

---

_Comment by @charliermarsh on 2024-03-28 21:30_

Well I think the things we want are...

- We should start building source distributions ASAP, and always be building as many as we have cores.
- We should continue to download wheels at a high rate even while building source distributions.

I'm just testing against the requirements that messense posted in the other issue.


---

_Comment by @konstin on 2024-07-15 14:32_

Solved by #3493

---

_Closed by @konstin on 2024-07-15 14:32_

---
