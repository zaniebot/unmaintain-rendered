---
number: 15695
title: UV Sync is using the wrong platform wheels
type: issue
state: closed
author: mechstei03
labels:
  - bug
assignees: []
created_at: 2025-09-05T07:59:38Z
updated_at: 2025-09-08T06:01:15Z
url: https://github.com/astral-sh/uv/issues/15695
synced_at: 2026-01-07T12:31:16-06:00
---

# UV Sync is using the wrong platform wheels

---

_Issue opened by @mechstei03 on 2025-09-05 07:59_

### Summary

# Information

## Architecture 
```bash python3 -c "import platform; print(platform.system().lower())"```
*linux*

```python3 -c "import platform; print(platform.machine().lower())"```
*x86_64*

command:  *lscpu*
```
Architektur:             x86_64
CPU Operationsmodus:     32-bit, 64-bit
Byte-Reihenfolge:        Little Endian
CPU(s):                  8
Liste der Online-CPU(s): 0-7
Thread(s) pro Kern:      1
Kern(e) pro Socket:      1
Sockel:                  8
NUMA-Knoten:             1
Anbieterkennung:         GenuineIntel
Prozessorfamilie:        6
Modell:                  85
Modellname:              Intel(R) Xeon(R) Gold 6226R CPU @ 2.90GHz
Stepping:                7
CPU MHz:                 2893.202
BogoMIPS:                5786.40
Hypervisor-Anbieter:     VMware
Virtualisierungstyp:     voll
L1d Cache:               32K
L1i Cache:               32K
L2 Cache:                1024K
L3 Cache:                22528K
NUMA-Knoten0 CPU(s):     0-7
```


## Issue
When downloading from a linux x86_64 machine suing command 

``` uv sync ```

the wheels downloaded includes aarch64.

Can we use some parameter or somehow only get the x86_64 platform wheels ?`
We tried --platform , -- python-platform and both did not work or fix the issue

## Recreation of issue / Log

``` 
[build-system]
requires = ["setuptools>=67.0.0", "wheel"]
build-backend = "setuptools.build_meta"

[project]
name = "pyflask-com"
version = "1.0.0"
authors = [
]

dependencies = [
    "torch==2.7.1",
    "torchvision==0.22.1"
]

[tool.uv]
dev-dependencies = [
    "pytest==8.4.1",
    "pytest-env==1.1.5",
    "twine==6.1.0",
    "build==1.3.0",
    "pylint==3.3.8"
]

[project.optional-dependencies]
dev = [
]

[tool.pytest.ini_options]
pythonpath = [
    ".", "src",
]

```

 Example of transitive package that downloads as aarch64.whl
```
nvidia_cuda_cupti_cu12-12.6.80-py3-none-manylinux2014_aarch64.manylinux_2_17_aarch64.whl
```




### Platform

Linux 4.18.0-553.72.1.el8_10.x86_64 x86_64 GNU/Linux

### Version

 uv 0.8.13

### Python version

 Python 3.11.5

---

_Label `bug` added by @mechstei03 on 2025-09-05 07:59_

---

_Comment by @konstin on 2025-09-05 09:35_

Does something fail when running Python code? How are you determining it's downloading aarch64 wheels?

---

_Comment by @mechstei03 on 2025-09-05 11:24_

 Hi @konstin , thanks for the quick reply

> Does something fail when running Python code? How are you determining it's downloading aarch64 wheels?

We have a sonatype server that needs each package to be whitelisted or allowed for it to be downloaded. 
during the download we can see that the package downloaded is a aarch64 package as sonatype is blocking it from being downloaded. the same package x86_64 architecture is already allowed and should be able to download normally without error . we confirmed this by using pip install normally which results in no error and only a x86_64 package. 

Please let me know if you need more info

---

_Comment by @konstin on 2025-09-05 11:49_

In universal resolution, when the index supports neither PEP 658 nor range requests, uv uses one wheel to get the METADATA file which lists all dependencies. This isn't necessarily the same wheel as the current platform, uv picks one deterministically but otherwise without regards to the current platform (to avoid getting different resolution behavior on different platforms). It downloads this wheel to extract the METADATA file from it, but doesn't use it otherwise. The best solution would be PEP 658 support in the index, which also solves the performance problems with downloading a wheel just for the METADATA. Another option would be not advertising wheels in the index that are not actually available to download: uv needs to trust the index information the index sends it, and if it contains aarch64 wheels, uv assumes those exist and are available.

---

_Comment by @mechstei03 on 2025-09-05 12:22_

@konstin  can you please refer me to documentation as for PEP658 implementationn in the index ?

---

_Comment by @konstin on 2025-09-05 12:23_

The reference for PEP 658 is at https://peps.python.org/pep-0658/

---

_Comment by @mechstei03 on 2025-09-08 06:01_

Thank you . will close the ticket


---

_Closed by @mechstei03 on 2025-09-08 06:01_

---
