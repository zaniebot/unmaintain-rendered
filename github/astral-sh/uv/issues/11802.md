---
number: 11802
title: "Why does `uv run` cause a system package to be imported?"
type: issue
state: open
author: edgarogh
labels:
  - question
assignees: []
created_at: 2025-02-26T16:51:44Z
updated_at: 2025-04-14T02:26:56Z
url: https://github.com/astral-sh/uv/issues/11802
synced_at: 2026-01-07T12:31:15-06:00
---

# Why does `uv run` cause a system package to be imported?

---

_Issue opened by @edgarogh on 2025-02-26 16:51_

### Question

When running my application with `uv run src/main.py`, the `regex` package that gets imported is one from my system, not the one specified in the `pyproject.toml`. I think I've seen the same issue with numpy.

```
Traceback (most recent call last):
  File "[REDACTED]", line 12, in <module>
    import regex
  File "/nix/store/6w5rhpfryjj45fxr98xn84r9rr4xai60-python3.11-regex-2024.9.11/lib/python3.11/site-packages/regex/__init__.py", line 1, in <module>
    from .regex import *
  File "/nix/store/6w5rhpfryjj45fxr98xn84r9rr4xai60-python3.11-regex-2024.9.11/lib/python3.11/site-packages/regex/regex.py", line 417, in <module>
    import regex._regex_core as _regex_core
  File "/nix/store/6w5rhpfryjj45fxr98xn84r9rr4xai60-python3.11-regex-2024.9.11/lib/python3.11/site-packages/regex/_regex_core.py", line 21, in <module>
    import regex._regex as _regex
ModuleNotFoundError: No module named 'regex._regex'
```

The python version requested in `pyproject.toml` is 3.12, not 3.11, so there's an ABI incompatibility, hence the crash. And the `regex` version in pyproject.toml isn't even the same as the one imported here.

This makes me think I don't understand how uv works at all. I come from a Rust/cargo background and it's possible that I'm expecting too much from uv.

### Platform

Linux 6.8.0-53-generic x86_64 GNU/Linux (Linux Mint)

### Version

uv 0.6.2

---

_Label `question` added by @edgarogh on 2025-02-26 16:51_

---

_Renamed from "Why does `uv run` causes a system package to be imported?" to "Why does `uv run` cause a system package to be imported?" by @edgarogh on 2025-02-26 16:51_

---

_Comment by @zanieb on 2025-02-26 17:06_

Can you share verbose logs? (`uv run -v ...`) 

Do you have a simple reproduction since this is nix?

```
❯ uv init example
Initialized project `example` at `/Users/zb/workspace/uv/example`
❯ cd example
❯ uv add regex
Using CPython 3.13.0
Creating virtual environment at: .venv
Resolved 2 packages in 190ms
Prepared 1 package in 110ms
Installed 1 package in 5ms
 + regex==2024.11.6
❯ uv run python -c "import regex; print(regex.__file__)"
/Users/zb/workspace/uv/example/.venv/lib/python3.13/site-packages/regex/__init__.py
```

---

_Comment by @sudowoodo200 on 2025-04-14 02:26_

I repro-ed this while using tiktoken v0.9.0

---
