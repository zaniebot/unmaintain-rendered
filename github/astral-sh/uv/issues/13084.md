---
number: 13084
title: "`uv pip install ...` should install all local packages"
type: issue
state: closed
author: ErwandKe
labels:
  - great writeup
assignees: []
created_at: 2025-04-24T08:25:42Z
updated_at: 2025-04-25T09:28:24Z
url: https://github.com/astral-sh/uv/issues/13084
synced_at: 2026-01-07T12:31:16-06:00
---

# `uv pip install ...` should install all local packages

---

_Issue opened by @ErwandKe on 2025-04-24 08:25_

### Summary

**Context**

I am working with `uv` in the context of AWS Lambda docker integration (following https://docs.astral.sh/uv/guides/integration/aws-lambda/).

I am working in a mono repo / multi package setup, let's say:
```
â”œâ”€â”€ ğŸ“ A
â”‚   â”œâ”€â”€ src
â”‚   â””â”€â”€ pyproject.toml
â”œâ”€â”€ ğŸ“ B
â”‚   â”œâ”€â”€ src
â”‚   â””â”€â”€ pyproject.toml
â”œâ”€â”€ pyproject.toml
â””â”€â”€ uv.lock
```

With a very simple package `A` having no dependencies, and `B` depending on `A`:
```
# A/pyproject.toml

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.wheel]
packages = ["src"]

[project]
name = "A"
version = "0.0.1"
requires-python = ">=3.11.9"
```

```
# B/pyproject.toml

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.wheel]
packages = ["src"]

[project]
name = "B"
version = "0.0.1"
requires-python = ">=3.11.9"
dependencies = [
  "A>=0.0.1",
]

[tool.uv.sources]
A = {workspace = true}
```

```
# pyproject.toml

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.uv.workspace]
members = [
    "A",
    "B",
]
```


I want to build the environment for package `B`.

**Steps to reproduce**

1. `uv sync` to install the environment.

2. `uv export --frozen --no-dev --no-editable --package B -o requirements.txt` produces the expected file:
```
# This file was autogenerated by uv via the following command:
#    uv export --frozen --no-dev --no-editable --package B -o requirements.txt
./A
    # via b
./B
```

2. Running `uv pip install -r requirements.txt --target new-env/` doesn't install package `A` as expected.

I would expect:
```
new-env/
â”œâ”€â”€ A
â”œâ”€â”€ a-0.0.1.dist-info
â”œâ”€â”€ B
â”œâ”€â”€ b-0.01.dist-info
â””â”€â”€ .lock
```

I am getting:
```
new-env/
â”œâ”€â”€ a-0.0.1.dist-info
â”œâ”€â”€ B
â”œâ”€â”€ b-0.01.dist-info
â”œâ”€â”€ _a.pth
â””â”€â”€ .lock
```

### Platform

Darwin 24.3.0 arm64

### Version

uv 0.6.16

### Python version

Python 3.11.10

---

_Label `bug` added by @ErwandKe on 2025-04-24 08:25_

---

_Label `great writeup` added by @konstin on 2025-04-24 12:26_

---

_Comment by @konstin on 2025-04-24 12:35_

You're getting an unintuitive interaction between the project/workspaces configuration and `uv pip`. When you have a path or Git dependency, uv uses the `tool.uv.sources` table of that dependency, so that e.g. if you're using a Git dependency, it uses the matching packages from that repo too. In your case, it discovers your local workspace and takes `A` to be a workspace dependency. You can disable this behavior with `--no-sources`.

---

_Label `bug` removed by @konstin on 2025-04-24 12:35_

---

_Comment by @ErwandKe on 2025-04-24 13:02_

Amazing thank you very much ğŸ™ 
I missed this option indeed !

---

_Comment by @ErwandKe on 2025-04-25 09:28_

Let me close it as it is resolved !

---

_Closed by @ErwandKe on 2025-04-25 09:28_

---
