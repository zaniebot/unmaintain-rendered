---
number: 6981
title: Allow conflicting optional dependencies and dependency groups
type: issue
state: closed
author: zanieb
labels: []
assignees: []
created_at: 2024-09-03T21:41:02Z
updated_at: 2025-08-07T11:15:14Z
url: https://github.com/astral-sh/uv/issues/6981
synced_at: 2026-01-07T12:31:15-06:00
---

# Allow conflicting optional dependencies and dependency groups

---

_Issue opened by @zanieb on 2024-09-03 21:41_

A project should be able to declare mutually exclusive optional dependencies, which have conflicting requirements and are solved separately.

This problem is challenging because if any optional dependency group can be incompatible with any other group, we need to perform a resolution for every possible dependency group combination.

Note, following the recent standardization of local dependency groups, this issue includes allowing conflicts in those as well. The underlying changes that need to happen in the resolver are the same.

See also https://github.com/astral-sh/uv/issues/6729

---

_Label `needs-design` added by @zanieb on 2024-09-03 21:41_

---

_Referenced in [astral-sh/uv#6729](../../astral-sh/uv/issues/6729.md) on 2024-09-03 21:42_

---

_Referenced in [astral-sh/uv#6830](../../astral-sh/uv/issues/6830.md) on 2024-09-11 19:50_

---

_Referenced in [dagster-io/dagster#23814](../../dagster-io/dagster/pulls/23814.md) on 2024-09-23 21:58_

---

_Referenced in [astral-sh/uv#6935](../../astral-sh/uv/issues/6935.md) on 2024-09-25 21:01_

---

_Comment by @WelanderJacob on 2024-09-30 14:33_

We're currently adopting uv in our company and recently encountered this issue. I was wondering if there are any updates or timeline on when this feature might be addressed? It would be really valuable for us.

Anyway, thanks for all the fantastic work on uv! 

---

_Comment by @zanieb on 2024-09-30 16:33_

We're working on this now, but we consider it a difficult / high risk problem so I'm not sure when we'll have a solution.

---

_Referenced in [astral-sh/uv#8024](../../astral-sh/uv/issues/8024.md) on 2024-10-08 23:34_

---

_Referenced in [astral-sh/uv#8110](../../astral-sh/uv/pulls/8110.md) on 2024-10-10 21:12_

---

_Referenced in [DetachHead/basedpyright#813](../../DetachHead/basedpyright/pulls/813.md) on 2024-10-26 12:06_

---

_Referenced in [astral-sh/uv#8814](../../astral-sh/uv/issues/8814.md) on 2024-11-04 19:32_

---

_Renamed from "Allow conflicting optional dependencies" to "Allow conflicting optional dependencies and dependency groups" by @zanieb on 2024-11-04 19:45_

---

_Assigned to @BurntSushi by @zanieb on 2024-11-04 19:45_

---

_Referenced in [kkrt-labs/kakarot#1588](../../kkrt-labs/kakarot/issues/1588.md) on 2024-11-07 17:07_

---

_Referenced in [astral-sh/uv#8976](../../astral-sh/uv/pulls/8976.md) on 2024-11-09 18:11_

---

_Closed by @BurntSushi on 2024-11-13 14:52_

---

_Reopened by @zanieb on 2024-11-13 15:08_

---

_Comment by @zanieb on 2024-11-13 15:08_

@BurntSushi since this tracks dependency groups as well, I've reopened it.

---

_Referenced in [astral-sh/uv#9086](../../astral-sh/uv/issues/9086.md) on 2024-11-13 15:47_

---

_Referenced in [astral-sh/uv#9096](../../astral-sh/uv/pulls/9096.md) on 2024-11-13 19:43_

---

_Closed by @BurntSushi on 2024-11-14 13:02_

---

_Label `needs-design` removed by @zanieb on 2024-11-15 14:37_

---

_Comment by @Ben-grmbl on 2025-08-07 11:15_

To anyone arriving here from google, this was implemented, [here is the documentation ](https://docs.astral.sh/uv/concepts/projects/config/#conflicting-dependencies) on how to use it

---
