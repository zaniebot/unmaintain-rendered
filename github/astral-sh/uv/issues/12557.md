---
number: 12557
title: "AttributeError: module 'setuptools.build_meta' has no attribute 'build_editable'"
type: issue
state: closed
author: jiunbae
labels: []
assignees: []
created_at: 2025-03-30T10:50:47Z
updated_at: 2025-05-03T10:39:24Z
url: https://github.com/astral-sh/uv/issues/12557
synced_at: 2026-01-07T12:31:15-06:00
---

# AttributeError: module 'setuptools.build_meta' has no attribute 'build_editable'

---

_Issue opened by @jiunbae on 2025-03-30 10:50_

### Question

I’m building a simple package using uv. I noticed that uv sync fails with the error shown below in my environment. The problem is that this error only occurs in my environment; when I test it via Docker or some pure new instance, it works fine. What should I look into to determine the cause of this issue? Even after setting the environment variables identically for testing, the following still fails only in a specific environment.

### Error message 
```shell
  × Failed to build `test-package @ file:///home/root/test-package`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `setuptools.build_meta.build_editable` failed (exit status: 1)

      [stderr]
      Traceback (most recent call last):
        File "<string>", line 11, in <module>
      AttributeError: module 'setuptools.build_meta' has no attribute 'build_editable'

      hint: This usually indicates a problem with the package or the build environment.
```

I tested as below code
```shell
mkdir ~/test
cd ~/test
uv init
cat <<EOF >> pyproject.toml
[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"
EOF
uv venv
source .venv/bin/activate
uv sync --verbose
```

I disabled conda since I was using it before and confirmed that no other Python paths are being used. I also verified that the `venv/bin/python` link is not pointing to the default Python. What else should I check?

```shell
❯ ll .venv/bin/python
Permissions Size User Date Modified Name
lrwxrwxrwx     - june 30 Mar 19:48  .venv/bin/python -> /home/june/.local/share/uv/python/cpython-3.12.9-linux-x86_64-gnu/bin/python3.12
❯ where python
/home/june/test/.venv/bin/python
```


<details>
<summary>Raw log (success)</summary>

<!-- summary -->
```shell
DEBUG uv 0.6.10
DEBUG Found project root: `/home/root/test-package`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `/home/root/test-package`
DEBUG Reading Python requests from version file at `/home/root/test-package/.python-version`
DEBUG Using Python request `3.12` from version file at `.python-version`
DEBUG Checking for Python environment at `.venv`
DEBUG The virtual environment's Python version satisfies `3.12`
DEBUG Released lock at `/tmp/uv-2807190af92aef2f.lock`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: test-package @ file:///home/root/test-package
DEBUG No workspace root found, using project root
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 18 packages in 1ms
DEBUG Using request timeout of 30s
DEBUG Identified uncached distribution: test-package @ file:///home/root/test-package
DEBUG Identified uncached distribution: fastapi==0.115.12
DEBUG Identified uncached distribution: orjson==3.10.16
DEBUG Identified uncached distribution: pydantic==2.11.0
DEBUG Identified uncached distribution: pydantic-settings==2.8.1
DEBUG Identified uncached distribution: requests==2.32.3
DEBUG Identified uncached distribution: starlette==0.46.1
DEBUG Identified uncached distribution: typing-extensions==4.13.0
DEBUG Identified uncached distribution: annotated-types==0.7.0
DEBUG Identified uncached distribution: pydantic-core==2.33.0
DEBUG Identified uncached distribution: typing-inspection==0.4.0
DEBUG Identified uncached distribution: python-dotenv==1.1.0
DEBUG Identified uncached distribution: certifi==2025.1.31
DEBUG Identified uncached distribution: charset-normalizer==3.4.1
DEBUG Identified uncached distribution: idna==3.10
DEBUG Identified uncached distribution: urllib3==2.3.0
DEBUG Identified uncached distribution: anyio==4.9.0
DEBUG Identified uncached distribution: sniffio==1.3.1
DEBUG Acquired lock for `/home/june/.cache/uv/sdists-v9/editable/4b201d76928cd421`
DEBUG Computed cache info: Some(Timestamp(SystemTime { tv_sec: 1743324183, tv_nsec: 862897785 })), None, None, {}, {"src": Some(Inode(1316159489))}
DEBUG No cache entry for: https://files.pythonhosted.org/packages/01/42/c0d10d1451d161a9a0da9bbef023b8005aa26e9993a8cc24dc9e3aa96c93/pydantic_core-2.33.0-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/09/2c/3a0a1b022bb028e4cd455c69a17ceaad809bf6763c110d093efc0d8f67aa/pydantic-2.11.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/38/fc/bce832fd4fd99766c04d1ee0eead6b0ec6486fb100ae5e74c1d91292b982/certifi-2025.1.31-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/3e/a2/513f6cbe752421f16d969e32f3583762bfd583848b763913ddab8d9bfd4f/charset_normalizer-3.4.1-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/c8/19/4ec628951a74043532ca2cf5d97b7b14863931476d117c471e8e2b1eb39f/urllib3-2.3.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/a1/ee/48ca1a7c89ffec8b6a0c5d02b89c305671d5ffd8d3c94acf8b8c408575bb/anyio-4.9.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/50/b3/b51f09c2ba432a576fe63758bddc81f78f0c6309d9e5c10d194313bf021e/fastapi-0.115.12-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/a0/4b/528ccf7a982216885a1ff4908e886b8fb5f19862d1962f56a3fce2435a70/starlette-0.46.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/76/c6/c88e154df9c4e1a2a66ccf0005a88dfb2650c1dffb6f5ce603dfbd452ce3/idna-3.10-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/f9/9b/335f9764261e915ed497fcdeb11df5dfd6f7bf257d4a6a2a686d80da4d54/requests-2.32.3-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e0/86/39b65d676ec5732de17b7e3c476e45bb80ec64eb50737a8dce1a4178aba1/typing_extensions-4.13.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/8c/88/7e41e9883c00f84f92fe357a8371edae816d9d7ef39c67b5106960c20389/orjson-3.10.16-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/0b/53/a64f03044927dc47aafe029c42a5b7aabc38dfb813475e0e1bf71c4a59d0/pydantic_settings-2.8.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/1e/18/98a99ad95133c6a6e2005fe89faedf294a748bd5dc803008059409ac9b1e/python_dotenv-1.1.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/78/b6/6307fbef88d9b5ee7421e68d78a9f162e0da4900bc5f5793f6d3d0e34fb8/annotated_types-0.7.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e9/44/75a9c9421471a6c4805dbf2356f7c181a29c1879239abab1ea2cc8f38b40/sniffio-1.3.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/31/08/aa4fdfb71f7de5176385bd9e90852eaf6b5d622735020ad600f2bab54385/typing_inspection-0.4.0-py3-none-any.whl
   Building test-package @ file:///home/root/test-package
DEBUG Building: test-package @ file:///home/root/test-package
DEBUG No workspace root found, using project root
DEBUG Assessing Python executable as base candidate: /home/june/.local/share/uv/python/cpython-3.12.9-linux-x86_64-gnu/bin/python3.12
DEBUG Using base executable for virtual environment: /home/june/.local/share/uv/python/cpython-3.12.9-linux-x86_64-gnu/bin/python3.12
DEBUG Ignoring empty directory
DEBUG Resolving build requirements
DEBUG Solving with installed Python version: 3.12.9
DEBUG Solving with target Python version: >=3.12.9
DEBUG Adding direct dependency: setuptools>=78.1
DEBUG Adding direct dependency: wheel*
DEBUG No cache entry for: https://pypi.org/simple/setuptools/
DEBUG No cache entry for: https://pypi.org/simple/wheel/
DEBUG No cache entry for: https://files.pythonhosted.org/packages/0b/2c/87f3254fd8ffd29e4c02732eee68a83a1d3c346ae39bc6822dcbcb697f2b/wheel-0.45.1-py3-none-any.whl.metadata
Downloading pydantic-core (1.9MiB)
WARN Skipping file for setuptools: setuptools-0.6b1-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b1-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6b2-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b2-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6b3-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b3-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6b4-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b4-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c1-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c1-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c10-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c10-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c10-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c10-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c10-py2.6.egg
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.6.exe
WARN Skipping file for setuptools: setuptools-0.6c11-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c11-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.6.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.7.egg
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.6.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.7.exe
WARN Skipping file for setuptools: setuptools-0.6c2-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c2-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c3-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c3-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c3-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c4-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c4-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c4-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c4-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c4.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c4.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c4.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c5-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c5-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c5-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c5-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c5.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c5.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c5.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c6-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c6-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c6-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c6-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c6.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c6.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c6.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c7-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c7-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c7-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c7-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c7.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c7.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c7.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c8-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c8-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c8-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c8-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c8.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c8.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c8.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c9-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c9-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c9-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c9-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c9-py2.6.egg
WARN Skipping file for setuptools: setuptools-0.6c9.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c9.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c9.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-18.3.1-py3.4.egg
DEBUG Searching for a compatible version of setuptools (>=78.1)
DEBUG Selecting: setuptools==78.1.0 [compatible] (setuptools-78.1.0-py3-none-any.whl)
DEBUG No cache entry for: https://files.pythonhosted.org/packages/54/21/f43f0a1fa8b06b32812e0975981f4677d28e0f3271601dc88ac5a5b83220/setuptools-78.1.0-py3-none-any.whl.metadata
DEBUG Searching for a compatible version of wheel (*)
DEBUG Selecting: wheel==0.45.1 [compatible] (wheel-0.45.1-py3-none-any.whl)
DEBUG Tried 2 versions: setuptools 1, wheel 1
DEBUG marker environment resolution took 0.049s
DEBUG Installing in wheel==0.45.1, setuptools==78.1.0 in /home/june/.cache/uv/builds-v0/.tmpoLiSX6
DEBUG Identified uncached distribution: wheel==0.45.1
DEBUG Identified uncached distribution: setuptools==78.1.0
DEBUG Downloading and building requirements for build: wheel==0.45.1, setuptools==78.1.0
DEBUG No cache entry for: https://files.pythonhosted.org/packages/54/21/f43f0a1fa8b06b32812e0975981f4677d28e0f3271601dc88ac5a5b83220/setuptools-78.1.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/0b/2c/87f3254fd8ffd29e4c02732eee68a83a1d3c346ae39bc6822dcbcb697f2b/wheel-0.45.1-py3-none-any.whl
 Downloaded pydantic-core
DEBUG Installing build requirements: wheel==0.45.1, setuptools==78.1.0
DEBUG Creating PEP 517 build environment
DEBUG Calling `setuptools.build_meta.get_requires_for_build_editable()`
DEBUG running egg_info
DEBUG writing src/test_package.egg-info/PKG-INFO
DEBUG writing dependency_links to src/test_package.egg-info/dependency_links.txt
DEBUG writing requirements to src/test_package.egg-info/requires.txt
DEBUG writing top-level names to src/test_package.egg-info/top_level.txt
DEBUG reading manifest file 'src/test_package.egg-info/SOURCES.txt'
DEBUG writing manifest file 'src/test_package.egg-info/SOURCES.txt'
DEBUG No workspace root found, using project root
DEBUG Calling `setuptools.build_meta.build_editable("/home/june/.cache/uv/builds-v0/.tmpNiMapO", {}, None)`
DEBUG running editable_wheel
DEBUG creating /home/june/.cache/uv/builds-v0/.tmpNiMapO/.tmp-7mdl57xl/test_package.egg-info
DEBUG writing /home/june/.cache/uv/builds-v0/.tmpNiMapO/.tmp-7mdl57xl/test_package.egg-info/PKG-INFO
DEBUG writing dependency_links to /home/june/.cache/uv/builds-v0/.tmpNiMapO/.tmp-7mdl57xl/test_package.egg-info/dependency_links.txt
DEBUG writing requirements to /home/june/.cache/uv/builds-v0/.tmpNiMapO/.tmp-7mdl57xl/test_package.egg-info/requires.txt
DEBUG writing top-level names to /home/june/.cache/uv/builds-v0/.tmpNiMapO/.tmp-7mdl57xl/test_package.egg-info/top_level.txt
DEBUG writing manifest file '/home/june/.cache/uv/builds-v0/.tmpNiMapO/.tmp-7mdl57xl/test_package.egg-info/SOURCES.txt'
DEBUG reading manifest file '/home/june/.cache/uv/builds-v0/.tmpNiMapO/.tmp-7mdl57xl/test_package.egg-info/SOURCES.txt'
DEBUG writing manifest file '/home/june/.cache/uv/builds-v0/.tmpNiMapO/.tmp-7mdl57xl/test_package.egg-info/SOURCES.txt'
DEBUG creating '/home/june/.cache/uv/builds-v0/.tmpNiMapO/.tmp-7mdl57xl/test_package-0.1.0.dist-info'
DEBUG creating /home/june/.cache/uv/builds-v0/.tmpNiMapO/.tmp-7mdl57xl/test_package-0.1.0.dist-info/WHEEL
DEBUG running build_py
DEBUG running egg_info
DEBUG creating /tmp/tmpfq5pfyh4.build-temp/test_package.egg-info
DEBUG writing /tmp/tmpfq5pfyh4.build-temp/test_package.egg-info/PKG-INFO
DEBUG writing dependency_links to /tmp/tmpfq5pfyh4.build-temp/test_package.egg-info/dependency_links.txt
DEBUG writing requirements to /tmp/tmpfq5pfyh4.build-temp/test_package.egg-info/requires.txt
DEBUG writing top-level names to /tmp/tmpfq5pfyh4.build-temp/test_package.egg-info/top_level.txt
DEBUG writing manifest file '/tmp/tmpfq5pfyh4.build-temp/test_package.egg-info/SOURCES.txt'
DEBUG reading manifest file '/tmp/tmpfq5pfyh4.build-temp/test_package.egg-info/SOURCES.txt'
DEBUG writing manifest file '/tmp/tmpfq5pfyh4.build-temp/test_package.egg-info/SOURCES.txt'
DEBUG
DEBUG         Editable install will be performed using .pth file to extend `sys.path` with:
DEBUG         ['src']
DEBUG
DEBUG Options like `package-data`, `include/exclude-package-data` or
DEBUG `packages.find.exclude/include` may have no effect.
DEBUG
DEBUG adding '__editable__.test_package-0.1.0.pth'
DEBUG creating '/home/june/.cache/uv/builds-v0/.tmpNiMapO/.tmp-7mdl57xl/test_package-0.1.0-0.editable-py3-none-any.whl' and adding '/tmp/tmpujr5zit1test_package-0.1.0-0.editable-py3-none-any.whl' to it
DEBUG adding 'test_package-0.1.0.dist-info/METADATA'
DEBUG adding 'test_package-0.1.0.dist-info/WHEEL'
DEBUG adding 'test_package-0.1.0.dist-info/top_level.txt'
DEBUG adding 'test_package-0.1.0.dist-info/RECORD'
DEBUG Finished building: test-package @ file:///home/root/test-package
      Built test-package @ file:///home/root/test-package
DEBUG Released lock at `/home/june/.cache/uv/sdists-v9/editable/4b201d76928cd421/.lock`
Prepared 18 packages in 1.12s
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/typing_inspection/__init__.py` to `/home/june/.cache/uv/archive-v0/FVtm0KcLMcLL_x8ioWEZ-/typing_inspection/__init__.py`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/typing_extensions.py` to `/home/june/.cache/uv/archive-v0/AYBonZv3m0X2LOgcQ9MMq/typing_extensions.py`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/starlette/__init__.py` to `/home/june/.cache/uv/archive-v0/pSqlxan3ra4yDidy1QRqc/starlette/__init__.py`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/requests/__init__.py` to `/home/june/.cache/uv/archive-v0/rwNCIqkKdGf6brmYVYIhI/requests/__init__.py`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/idna/__init__.py` to `/home/june/.cache/uv/archive-v0/rVT5w3f79qpK_a0Lz2a_b/idna/__init__.py`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/anyio/__init__.py` to `/home/june/.cache/uv/archive-v0/K7J7SsDnimhlc0mdiDgGO/anyio/__init__.py`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/annotated_types/__init__.py` to `/home/june/.cache/uv/archive-v0/OvePbBba6CWPFkf5Lc-Pv/annotated_types/__init__.py`, attempting to copy files as a fallback
warning: Failed to hardlink files; falling back to full copy. This may lead to degraded performance.
         If the cache and target directories are on different filesystems, hardlinking may not be supported.
         If this is intentional, set `export UV_LINK_MODE=copy` or use `--link-mode=copy` to suppress this warning.
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/sniffio/__init__.py` to `/home/june/.cache/uv/archive-v0/wthCw9seoqPGm1KK1Zfh7/sniffio/__init__.py`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/pydantic_settings/__init__.py` to `/home/june/.cache/uv/archive-v0/hWkLgGmqDMylgMcZJ4ZdU/pydantic_settings/__init__.py`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/certifi/__init__.py` to `/home/june/.cache/uv/archive-v0/3kvjy7TyxsDZDLB_XmXGz/certifi/__init__.py`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/orjson-3.10.16.dist-info/METADATA` to `/home/june/.cache/uv/archive-v0/8--jYEvoYJCBGN0WBuQ84/orjson-3.10.16.dist-info/METADATA`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/__editable__.test_package-0.1.0.pth` to `/home/june/.cache/uv/archive-v0/b0WYCZuCDbr_bodOSsNh7/__editable__.test_package-0.1.0.pth`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/fastapi-0.115.12.dist-info/METADATA` to `/home/june/.cache/uv/archive-v0/bhXCNj94wSYUDmi453S4h/fastapi-0.115.12.dist-info/METADATA`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/charset_normalizer-3.4.1.dist-info/top_level.txt` to `/home/june/.cache/uv/archive-v0/TBcCY7cRrbUwA12Jop2HI/charset_normalizer-3.4.1.dist-info/top_level.txt`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/urllib3/__init__.py` to `/home/june/.cache/uv/archive-v0/Buc7HQGGQhubt3DYP1Jer/urllib3/__init__.py`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/pydantic/__init__.py` to `/home/june/.cache/uv/archive-v0/KxV7FP8U4pBzsD_Qo3YqI/pydantic/__init__.py`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/pydantic_core-2.33.0.dist-info/METADATA` to `/home/june/.cache/uv/archive-v0/-Tsu-_4le_h8QSA9jYPdA/pydantic_core-2.33.0.dist-info/METADATA`, attempting to copy files as a fallback
DEBUG Failed to hardlink `/home/root/test-package/.venv/lib/python3.12/site-packages/dotenv/__init__.py` to `/home/june/.cache/uv/archive-v0/AQfgx8PKOIu80tzcoDRNw/dotenv/__init__.py`, attempting to copy files as a fallback
Installed 18 packages in 533ms
 + annotated-types==0.7.0
 + anyio==4.9.0
 + certifi==2025.1.31
 + charset-normalizer==3.4.1
 + fastapi==0.115.12
 + idna==3.10
 + orjson==3.10.16
 + pydantic==2.11.0
 + pydantic-core==2.33.0
 + pydantic-settings==2.8.1
 + python-dotenv==1.1.0
 + requests==2.32.3
 + test-package==0.1.0 (from file:///home/root/test-package)
 + sniffio==1.3.1
 + starlette==0.46.1
 + typing-extensions==4.13.0
 + typing-inspection==0.4.0
 + urllib3==2.3.0
```
</details>
<details>
<summary>Raw log (error)</summary>

<!-- summary -->
```shell
DEBUG uv 0.6.10
DEBUG Found project root: `/home/root/test-package`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `/home/root/test-package`
DEBUG Reading Python requests from version file at `/home/root/test-package/.python-version`
DEBUG Using Python request `3.12` from version file at `.python-version`
DEBUG Checking for Python environment at `.venv`
DEBUG The virtual environment's Python version satisfies `3.12`
DEBUG Released lock at `/tmp/uv-2807190af92aef2f.lock`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: test-package @ file:///home/root/test-package
DEBUG No workspace root found, using project root
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 18 packages in 1ms
DEBUG Using request timeout of 30s
DEBUG Identified uncached distribution: test-package @ file:///home/root/test-package
DEBUG Identified uncached distribution: fastapi==0.115.12
DEBUG Identified uncached distribution: orjson==3.10.16
DEBUG Identified uncached distribution: pydantic==2.11.0
DEBUG Identified uncached distribution: pydantic-settings==2.8.1
DEBUG Identified uncached distribution: requests==2.32.3
DEBUG Identified uncached distribution: starlette==0.46.1
DEBUG Identified uncached distribution: typing-extensions==4.13.0
DEBUG Identified uncached distribution: annotated-types==0.7.0
DEBUG Identified uncached distribution: pydantic-core==2.33.0
DEBUG Identified uncached distribution: typing-inspection==0.4.0
DEBUG Identified uncached distribution: python-dotenv==1.1.0
DEBUG Identified uncached distribution: certifi==2025.1.31
DEBUG Identified uncached distribution: charset-normalizer==3.4.1
DEBUG Identified uncached distribution: idna==3.10
DEBUG Identified uncached distribution: urllib3==2.3.0
DEBUG Identified uncached distribution: anyio==4.9.0
DEBUG Identified uncached distribution: sniffio==1.3.1
DEBUG Acquired lock for `/home/june/.cache/uv/sdists-v9/editable/4b201d76928cd421`
DEBUG Computed cache info: Some(Timestamp(SystemTime { tv_sec: 1743324183, tv_nsec: 862897785 })), None, None, {}, {"src": Some(Inode(1316159489))}
DEBUG No cache entry for: https://files.pythonhosted.org/packages/01/42/c0d10d1451d161a9a0da9bbef023b8005aa26e9993a8cc24dc9e3aa96c93/pydantic_core-2.33.0-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/09/2c/3a0a1b022bb028e4cd455c69a17ceaad809bf6763c110d093efc0d8f67aa/pydantic-2.11.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/38/fc/bce832fd4fd99766c04d1ee0eead6b0ec6486fb100ae5e74c1d91292b982/certifi-2025.1.31-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/3e/a2/513f6cbe752421f16d969e32f3583762bfd583848b763913ddab8d9bfd4f/charset_normalizer-3.4.1-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/c8/19/4ec628951a74043532ca2cf5d97b7b14863931476d117c471e8e2b1eb39f/urllib3-2.3.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/a1/ee/48ca1a7c89ffec8b6a0c5d02b89c305671d5ffd8d3c94acf8b8c408575bb/anyio-4.9.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/50/b3/b51f09c2ba432a576fe63758bddc81f78f0c6309d9e5c10d194313bf021e/fastapi-0.115.12-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/a0/4b/528ccf7a982216885a1ff4908e886b8fb5f19862d1962f56a3fce2435a70/starlette-0.46.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/76/c6/c88e154df9c4e1a2a66ccf0005a88dfb2650c1dffb6f5ce603dfbd452ce3/idna-3.10-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/f9/9b/335f9764261e915ed497fcdeb11df5dfd6f7bf257d4a6a2a686d80da4d54/requests-2.32.3-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e0/86/39b65d676ec5732de17b7e3c476e45bb80ec64eb50737a8dce1a4178aba1/typing_extensions-4.13.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/8c/88/7e41e9883c00f84f92fe357a8371edae816d9d7ef39c67b5106960c20389/orjson-3.10.16-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/0b/53/a64f03044927dc47aafe029c42a5b7aabc38dfb813475e0e1bf71c4a59d0/pydantic_settings-2.8.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/1e/18/98a99ad95133c6a6e2005fe89faedf294a748bd5dc803008059409ac9b1e/python_dotenv-1.1.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/78/b6/6307fbef88d9b5ee7421e68d78a9f162e0da4900bc5f5793f6d3d0e34fb8/annotated_types-0.7.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/e9/44/75a9c9421471a6c4805dbf2356f7c181a29c1879239abab1ea2cc8f38b40/sniffio-1.3.1-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/31/08/aa4fdfb71f7de5176385bd9e90852eaf6b5d622735020ad600f2bab54385/typing_inspection-0.4.0-py3-none-any.whl
   Building test-package @ file:///home/root/test-package
DEBUG Building: test-package @ file:///home/root/test-package
DEBUG No workspace root found, using project root
DEBUG Assessing Python executable as base candidate: /home/june/.local/share/uv/python/cpython-3.12.9-linux-x86_64-gnu/bin/python3.12
DEBUG Using base executable for virtual environment: /home/june/.local/share/uv/python/cpython-3.12.9-linux-x86_64-gnu/bin/python3.12
DEBUG Ignoring empty directory
DEBUG Resolving build requirements
DEBUG Solving with installed Python version: 3.12.9
DEBUG Solving with target Python version: >=3.12.9
DEBUG Adding direct dependency: setuptools>=78.1
DEBUG Adding direct dependency: wheel*
DEBUG No cache entry for: https://pypi.org/simple/setuptools/
DEBUG No cache entry for: https://pypi.org/simple/wheel/
DEBUG No cache entry for: https://files.pythonhosted.org/packages/0b/2c/87f3254fd8ffd29e4c02732eee68a83a1d3c346ae39bc6822dcbcb697f2b/wheel-0.45.1-py3-none-any.whl.metadata
Downloading pydantic-core (1.9MiB)
WARN Skipping file for setuptools: setuptools-0.6b1-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b1-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6b2-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b2-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6b3-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b3-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6b4-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b4-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c1-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c1-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c10-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c10-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c10-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c10-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c10-py2.6.egg
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.6.exe
WARN Skipping file for setuptools: setuptools-0.6c11-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c11-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.6.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.7.egg
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.6.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.7.exe
WARN Skipping file for setuptools: setuptools-0.6c2-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c2-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c3-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c3-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c3-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c4-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c4-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c4-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c4-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c4.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c4.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c4.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c5-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c5-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c5-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c5-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c5.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c5.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c5.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c6-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c6-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c6-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c6-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c6.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c6.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c6.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c7-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c7-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c7-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c7-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c7.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c7.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c7.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c8-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c8-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c8-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c8-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c8.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c8.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c8.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c9-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c9-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c9-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c9-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c9-py2.6.egg
WARN Skipping file for setuptools: setuptools-0.6c9.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c9.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c9.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-18.3.1-py3.4.egg
DEBUG Searching for a compatible version of setuptools (>=78.1)
DEBUG Selecting: setuptools==78.1.0 [compatible] (setuptools-78.1.0-py3-none-any.whl)
DEBUG No cache entry for: https://files.pythonhosted.org/packages/54/21/f43f0a1fa8b06b32812e0975981f4677d28e0f3271601dc88ac5a5b83220/setuptools-78.1.0-py3-none-any.whl.metadata
DEBUG Searching for a compatible version of wheel (*)
DEBUG Selecting: wheel==0.45.1 [compatible] (wheel-0.45.1-py3-none-any.whl)
DEBUG Tried 2 versions: setuptools 1, wheel 1
DEBUG marker environment resolution took 0.038s
DEBUG Installing in wheel==0.45.1, setuptools==78.1.0 in /home/june/.cache/uv/builds-v0/.tmpxJNZTA
DEBUG Identified uncached distribution: wheel==0.45.1
DEBUG Identified uncached distribution: setuptools==78.1.0
DEBUG Downloading and building requirements for build: wheel==0.45.1, setuptools==78.1.0
DEBUG No cache entry for: https://files.pythonhosted.org/packages/54/21/f43f0a1fa8b06b32812e0975981f4677d28e0f3271601dc88ac5a5b83220/setuptools-78.1.0-py3-none-any.whl
DEBUG No cache entry for: https://files.pythonhosted.org/packages/0b/2c/87f3254fd8ffd29e4c02732eee68a83a1d3c346ae39bc6822dcbcb697f2b/wheel-0.45.1-py3-none-any.whl
 Downloaded pydantic-core
DEBUG Installing build requirements: wheel==0.45.1, setuptools==78.1.0
DEBUG Creating PEP 517 build environment
DEBUG Calling `setuptools.build_meta.get_requires_for_build_editable()`
DEBUG No workspace root found, using project root
DEBUG Calling `setuptools.build_meta.build_editable("/home/june/.cache/uv/builds-v0/.tmpxqAZ04", {}, None)`
DEBUG Traceback (most recent call last):
DEBUG   File "<string>", line 11, in <module>
DEBUG AttributeError: module 'setuptools.build_meta' has no attribute 'build_editable'
DEBUG Released lock at `/home/june/.cache/uv/sdists-v9/editable/4b201d76928cd421/.lock`
  × Failed to build `test-package @ file:///home/root/test-package`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `setuptools.build_meta.build_editable` failed (exit status: 1)

      [stderr]
      Traceback (most recent call last):
        File "<string>", line 11, in <module>
      AttributeError: module 'setuptools.build_meta' has no attribute 'build_editable'

      hint: This usually indicates a problem with the package or the build environment.
      
```
</details>

### Platform

Ubuntu 22.04.5 LTS

### Version

uv 0.6.10

---

_Label `question` added by @jiunbae on 2025-03-30 10:50_

---

_Comment by @charliermarsh on 2025-03-30 15:12_

This is quite strange. From the logs, I'm not sure what's going on -- you're getting some sort of busted `setuptools`? Have you tried running `uv cache clean` on your machine?

---

_Assigned to @charliermarsh by @charliermarsh on 2025-03-30 15:12_

---

_Comment by @jiunbae on 2025-03-30 15:49_

Yes, of course. I also removed uv (as follow) and reinstalled it as specified in the uv installation guide.

```shell
# uninstall
uv cache clean
rm -r "$(uv python dir)"
rm -r "$(uv tool dir)"

# install
curl -LsSf https://astral.sh/uv/install.sh | sh
```

---

_Comment by @BillCleveland-USRA on 2025-04-16 15:45_

I also ran into this issue on MacOS and it prevents me from using dynamic values in my pyproject.toml.
It is as if, uv is running the setuptools build outside of the virtual environment.

EDIT: Strangely, I don't get this error on my package projects destined for PyPI even without cython in the venv. I only get this error on projects that are applications with no intent to package.

---

_Comment by @konstin on 2025-04-17 13:21_

I tried this locally and could not reproduce it. Is the error log from the reproducible example you shared? It should e.g. not install wheel at all.

---

_Label `question` removed by @konstin on 2025-04-17 13:21_

---

_Label `needs-mre` added by @konstin on 2025-04-17 13:21_

---

_Comment by @BillCleveland-USRA on 2025-04-17 15:29_

@konstin I'll try to have a reproducible example later this week. Sorry, I'm not able to provide it sooner.  I'm thinking this is probably a setuptools issue and it is giving us poor error messages.  I haven't actually sat down and analyzed the issue, I just wanted to confirm I had the same error.  

The error may be related to setuptools handling of flat layout projects with pyproject.toml. That is pure speculation. I'll try to make a reproducible example that I can share, and afterwards see if I can diagnose the issue.

I just realized you were asking jiundea, but will try to help anyway.

---

_Comment by @TundeAtSN on 2025-04-17 16:50_

+1

---

_Comment by @jiunbae on 2025-04-18 07:18_

I just found out why my issue occurred. It was caused by setting the following variable due to a problem I had earlier with pip editable installation.

```bash
export SETUPTOOLS_ENABLE_FEATURES="legacy-editable"
```

The reason I set that env for https://github.com/microsoft/pylance-release/issues/3473#issuecomment-1619179711

This issue can be reproduced with the steps below, but it’s not a problem with uv. Thank you.

```bash
apt update && apt install curl -y
curl -LsSf https://astral.sh/uv/install.sh | sh
source $HOME/.local/bin/env
export SETUPTOOLS_ENABLE_FEATURES="legacy-editable"
rm -rf ~/test
mkdir ~/test
cd ~/test
uv init
cat <<EOF >> pyproject.toml
[build-system]
requires = ["setuptools"]
build-backend = "setuptools.build_meta"
EOF
uv venv
source .venv/bin/activate
uv sync --verbose
```

---

_Comment by @BillCleveland-USRA on 2025-04-18 13:52_

I had time to sit down and look at my particular issue and (as I suspected) this has nothing to do with uv.

The setuptools build system was designed with PyPI packaging in mind, and it shows. A package I included caused it to insist on using Cython to build a wheel which caused its cryptic error message. I got around the error by adding cython to the requires for the build-system.

You can get setuptools to work with your legacy Python application by using "custom discovery" to handle "flat layout" projects. The important bits are as follows:

```
[build-system]
requires = ["setuptools", "cython"]
build-backend = "setuptools.build_meta"

[project]
...
dynamic = ["version"]

[tool.setuptools.dynamic]
version = {attr = "app.__version__"}

[tool.setuptools.packages]
find = {}
```

I would recommend manually setting the project version for simple Python application projects, since it is really not needed.

For new large Python projects, I recommend using the "src" layout and use "script-files" to designate which scripts should be placed in the PATH.


---

_Comment by @konstin on 2025-04-22 09:29_

@jiunbae I tried `docker run --rm -it -v .:/io ubuntu bash /io/gh12557.sh` where `gh12557.sh` is the script you shared, and it passes without error.

---

_Unassigned @charliermarsh by @konstin on 2025-04-22 09:29_

---

_Comment by @jiunbae on 2025-04-22 13:05_

No worries at all, and sorry for bothering you repeatedly with this issue. I’ve checked and confirmed that everything works fine when using `setuptools==79.0.0`, even with the environment settings applied. When I initially tested it, I was using version 78.1.0. It doesn’t seem to be an issue anymore (and it wasn’t actually a problem with uv to begin with). Thank you again!

```bash
apt update && apt install curl -y
curl -LsSf https://astral.sh/uv/install.sh | sh
source $HOME/.local/bin/env

rm -rf ~/test
mkdir ~/test
cd ~/test
uv init
cat <<EOF >> pyproject.toml
[build-system]
requires = ["setuptools==78.1.0"]
build-backend = "setuptools.build_meta"
EOF
uv venv
source .venv/bin/activate
export SETUPTOOLS_ENABLE_FEATURES="legacy-editable" 
uv sync --verbose
```
```shell
docker run --rm -it -v .:/io ubuntu:22.04 bash /io/test.sh
```

---

_Label `needs-mre` removed by @konstin on 2025-04-22 13:05_

---

_Comment by @konstin on 2025-04-22 13:05_

Good to know this has been fixed on the setuptools side!

---

_Closed by @konstin on 2025-04-22 13:05_

---

_Comment by @hauntsaninja on 2025-05-03 10:39_

setuptools dropped support for legacy editables, so it simply no longer looks at that env var. If you're pinning new setuptools, you should probably remove it.

---
