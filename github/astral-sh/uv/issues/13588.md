---
number: 13588
title: Custom Index timeout error
type: issue
state: closed
author: shiftysheep
labels:
  - question
assignees: []
created_at: 2025-05-21T23:46:28Z
updated_at: 2025-07-16T13:54:32Z
url: https://github.com/astral-sh/uv/issues/13588
synced_at: 2026-01-07T12:31:16-06:00
---

# Custom Index timeout error

---

_Issue opened by @shiftysheep on 2025-05-21 23:46_

### Question

Is there a way to suppress timeout errors for a custom index and default back to pypi? I have specified a custom index in `/etc/uv/uv.toml` without the default setting. This works great when I'm connected to the VPN and have access to the index. Unfortunately, when I'm not on the VPN UV continues to try the index and errors out without trying to check against pypi. I have even manually added a second index configuration for pypi with the default flag, but it errors out on the timeout. 

### Platform

Linux 5.15.167.4-microsoft-standard-WSL2 x86_64 GNU/Linux

### Version

uv 0.7.6

---

_Label `question` added by @shiftysheep on 2025-05-21 23:46_

---

_Comment by @hutchisr on 2025-05-23 00:03_

Ran into the same issue today on 0.7.7. It exclusively tries to use the custom index, even when the lockfile specifies the default pypi index for a package.

---

_Comment by @konstin on 2025-05-23 08:18_

There is `UV_HTTP_TIMEOUT` to configure this.

@hutchisr That sounds different, can you double check that this doesn't match the documented behavior (uv is different here than pip), and open a new issue if not?

---

_Comment by @shiftysheep on 2025-05-23 16:37_

@konstin I tried playing with the environment variable but it just errors out quickly and stops processing. Even if it could successfully get to pypi it just errors out. See the screenshot. 

Error:
![Image](https://github.com/user-attachments/assets/1d4cdf7d-6cc9-4957-b2bf-0d3920e0ca4a)

Config:
![Image](https://github.com/user-attachments/assets/f70bf7fc-34fa-450f-9190-3d2816a1ed51)

---

_Comment by @konstin on 2025-05-23 16:38_

Connection refused means there's not a timeout, it means that you can't connect all, either the URL is wrong or there is some firewall blocking this out.

---

_Comment by @shiftysheep on 2025-05-23 16:46_

The timeout timer is definitely being hit as if I run `UV_HTTP_TIMEOUT=2 uv sync` it will reduce the time from 30s to 2s for each retry. 

---

_Comment by @konstin on 2025-05-26 13:15_

To clarify, does uv fail after hitting the timeout no matter what timeout you set?

---

_Comment by @shiftysheep on 2025-05-26 16:41_

Yeah. The timeout value just affects how quickly the process will error out completely if an index is unavailable. 

---

_Comment by @konstin on 2025-05-26 22:13_

Does `--offline` work you? Generally, uv expects all declared indexes to be available, that flags makes uv the cache which should still exist from the time you were in the VPN.

---

_Closed by @charliermarsh on 2025-07-16 13:54_

---
