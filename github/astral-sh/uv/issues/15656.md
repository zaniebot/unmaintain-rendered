---
number: 15656
title: Install dev dependencies of transitive workspace packages when targeting a single package
type: issue
state: open
author: Spenhouet
labels:
  - enhancement
  - needs-decision
assignees: []
created_at: 2025-09-03T12:05:54Z
updated_at: 2025-09-03T17:54:37Z
url: https://github.com/astral-sh/uv/issues/15656
synced_at: 2026-01-07T12:31:16-06:00
---

# Install dev dependencies of transitive workspace packages when targeting a single package

---

_Issue opened by @Spenhouet on 2025-09-03 12:05_

### Summary

Currently, uv sync does not install the dev dependencies of transitive workspace packages when targeting a single package.

Even with flags like `--all-extras` and `--all-groups`, only the dev dependencies of the specified package are installed. This behavior is acknowledged in existing issues such as [#7541](https://github.com/astral-sh/uv/issues/7541) and [#7487](https://github.com/astral-sh/uv/issues/7487), but the discussed requirements are different, hence this should not be a duplicate. I could not find an existing issue specifying this use-case.
Some existing issues mention to use `--all-packages`, which we do during local development, but which we don't during CI pipeline execution. Here we only build the respective package in our monorepo (and for tests, it's dev dependencies).

### Example

#### Current Behavior

Given the following package structure:

```
A → B
```

Where:
- `A` is the main application.
- `B` is a workspace package that `A` depends on.

Running the command:

```bash
uv sync --inexact --package A --all-extras --all-groups
```

Installs all runtime dependencies of `A` and `B` but only the dev dependencies of `A`, excluding those of `B`.

This seems inconsistent.

#### Desired Behavior

Running the same command should install:

- All runtime and dev dependencies of A.
- All runtime and dev dependencies of B (since A depends on B).

This would ensure that all necessary dependencies are available for development and testing without manual declarations in each package's `pyproject.toml`. Each workspace package should be self-enclosed in that it's own specific dependencies (also dev dependencies) should only be defined within the scope of that workspace package.

#### Additional Context
We do have general dev dependencies like `pytest`, `ruff`, ... within the root `pyproject.toml`.
But e.g. within a database related workspace package, we have an extra dev dependencies for `testing.postgresql`, which only this workspace package needs during test execution and no other.

---

_Label `enhancement` added by @Spenhouet on 2025-09-03 12:05_

---

_Referenced in [astral-sh/uv#15657](../../astral-sh/uv/pulls/15657.md) on 2025-09-03 12:09_

---

_Comment by @zanieb on 2025-09-03 12:25_

I think this is intentional and consistent — I don't think a command run in the scope of a single package should include transitive development dependencies of other workspace members. Similar to how we don't include transitive development dependencies for other source tree dependencies.

I'm not sure I follow why A's tests depend on B's development dependencies. Can you explain that more?

---

_Label `needs-decision` added by @zanieb on 2025-09-03 12:25_

---

_Comment by @Spenhouet on 2025-09-03 13:38_

In our Monorepo we define "apps" (interfaces build as docker images) and "components" (workspace packages used by the apps or other components).

An app therefore only includes the single app code and all its (transitive) components. 
When building an app, we package the app and only it's components into a docker image and run tests against all.
Hence, the dev dependencies of the "package" and the dev dependencies of all its workspace packages need to be installed.

That was the idea.
Your concern made me question some assumptions I have. I will test them later and give feedback when I have a better understanding. 

---

_Comment by @zanieb on 2025-09-03 13:53_

It's definitely plausible we should add support for that use-case somehow, but I'm not sure what approach would be best yet.

---

_Comment by @Spenhouet on 2025-09-03 17:54_

I shortly thought that `--all-packages` might also work for us, assuming uv automatically only installs the reduced set of available packages.
But actually when I do 

```bash
uv sync --inexact --all-packages --all-extras --all-groups
```

within the container only containing a subset of packages of the Monorepo, I get uv errors like this:

```
error: Failed to determine installation plan
  Caused by: Distribution not found at: file:///src/components/component-not-included-in-build
```

Afaik. the only option to make it work is to not manage dev dependencies via `[dependency-groups]` but instead via `[project.optional-dependencies]`. This add an extra install `dev` to all packages. Then for every package I include as dependency, I also need to add its version with dev extras again to the dev extras, creating a chain of dev extras. Then when I install with `--package` and `--all-extras` it should install the full chain of dev dependencies. Doesn't feel right.



---
