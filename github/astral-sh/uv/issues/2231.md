---
number: 2231
title: "Best practices for using uv's cache in CI / Github Actions?"
type: issue
state: closed
author: strickvl
labels:
  - question
assignees: []
created_at: 2024-03-06T06:53:50Z
updated_at: 2024-09-05T12:26:25Z
url: https://github.com/astral-sh/uv/issues/2231
synced_at: 2026-01-07T12:31:14-06:00
---

# Best practices for using uv's cache in CI / Github Actions?

---

_Issue opened by @strickvl on 2024-03-06 06:53_

Wondering if there's any advice or best practices starting to develop around how to (re)use and share the `uv` cache across multiple Github Actions runners?

We repeat the same Python installations across multiple runners / OSes and Python versions. Previously we were taking advantage of Github Actions' caching to save us from redownloading packages, but not any more with `uv` as it it isn't clear how best to reuse the cache or to what extent that helps.

---

_Comment by @jardarbo on 2024-03-06 14:45_

There is an issue on GitHub Action setup-python discussing this: https://github.com/actions/setup-python/issues/822. They argue that the benefit of caching uv .cache folder depends.

---

_Label `question` added by @zanieb on 2024-03-06 15:52_

---

_Comment by @zanieb on 2024-03-24 20:15_

See also previous discussion at https://github.com/astral-sh/uv/issues/1386

---

_Comment by @jayqi on 2024-03-27 22:01_

I made a composite action that sets up uv with optional caching, after piecing together all of the information in the various places about how to get things to work. 

https://github.com/drivendataorg/setup-python-uv-action

It supports: 

- no caching
- caching the uv packages cache
- caching the virtual environment directory itself

I'm reasonably confident all options should work across the different OS runners. 

Your mileage may vary on what actually saves time, depending on what your dependencies are. uv resolution and installation is so fast, that I've found the network speed to be the limiting factor in a lot of cases. Downloading from PyPI is often just as fast as loading a cache. Windows runners seem to have particularly bad cache performance so sometimes the cache is actually slower on Windows than downloading from PyPI.

---

_Referenced in [meltano/sdk#2377](../../meltano/sdk/pulls/2377.md) on 2024-04-17 23:11_

---

_Referenced in [aiidateam/aiida-core#6363](../../aiidateam/aiida-core/pulls/6363.md) on 2024-04-22 12:39_

---

_Comment by @alechouse97 on 2024-04-24 14:34_

I've been playing with replacing pip with uv in our Gitlab CI pipeline, and it massively speeds up installing packages when you've got the cache. However, I've noticed that the uv cache is notably larger than the pip one (along with significantly more files), and the increase in Gitlab's cache time almost outweighs the shift to uv. Anyone else run into this?

---

_Comment by @strickvl on 2024-04-24 14:53_

I recently just noticed that there's a 40GB `uv` cache sitting on my HD, too.

---

_Comment by @charliermarsh on 2024-04-24 15:08_

(Can always `uv cache clean` or `uv cache prune`.)

---

_Referenced in [WeblateOrg/weblate#11679](../../WeblateOrg/weblate/pulls/11679.md) on 2024-05-21 06:51_

---

_Referenced in [pybamm-team/pybamm-cookie#9](../../pybamm-team/pybamm-cookie/pulls/9.md) on 2024-06-13 14:14_

---

_Comment by @153957 on 2024-09-05 11:13_

Perhaps the best practice is now to use https://github.com/astral-sh/setup-uv
and use its caching? https://github.com/astral-sh/setup-uv?tab=readme-ov-file#enable-caching

---

_Comment by @zanieb on 2024-09-05 12:26_

üëç yeah we also documented best practices a while ago https://docs.astral.sh/uv/guides/integration/github/#caching

---

_Closed by @zanieb on 2024-09-05 12:26_

---

_Referenced in [KyleKing/textract-py3#16](../../KyleKing/textract-py3/pulls/16.md) on 2025-11-20 04:43_

---
