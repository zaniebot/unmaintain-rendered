---
number: 14479
title: "How to reinstall a broken package? (`--reinstall` and similar have no effect)"
type: issue
state: closed
author: turbotimon
labels:
  - question
assignees: []
created_at: 2025-07-07T07:50:26Z
updated_at: 2025-07-16T16:02:30Z
url: https://github.com/astral-sh/uv/issues/14479
synced_at: 2026-01-07T12:31:16-06:00
---

# How to reinstall a broken package? (`--reinstall` and similar have no effect)

---

_Issue opened by @turbotimon on 2025-07-07 07:50_

### Question

I'm stuck refreshing a broken package. What do I not understand?

How to reproduce:

1. Create a working project  (with `pip` as an example package)
```sh
$ uv init
$ uv add pip
# confirm is not broken
$ uv run -m pip --version
pip 25.1.1 from /home/uv_reinstall/.venv/lib/python3.12/site-packages/pip (python 3.12)
```

2. Break the package
```sh
$ echo "i'm broken" >> /home/uv_reinstall/.venv/lib/python3.12/site-packages/pip/__main__.py
$ uv run -m pip --version
...
File "/home/uv_reinstall/.venv/lib/python3.12/site-packages/pip/__main__.py", line 25
    i'm broken
     ^
SyntaxError: unterminated string literal (detected at line 25)
```

3. How do completely reinstall it? None of my attempts work, e.g.

```sh
$ uv run --reinstall-package pip --refresh-package pip -m pip --version
...
File "/home/uv_reinstall/.venv/lib/python3.12/site-packages/pip/__main__.py", line 25
    i'm broken
     ^
SyntaxError: unterminated string literal (detected at line 25)
```

```sh
$ uv pip uninstall pip
$ uv sync --reinstall
$ uv run -m pip --version
...
File "/home/uv_reinstall/.venv/lib/python3.12/site-packages/pip/__main__.py", line 25
    i'm broken
     ^
SyntaxError: unterminated string literal (detected at line 25)
```

It seems even the cache is broken ..

```sh
$ rm -r .venv/
$ uv sync
Creating virtual environment at: .venv
Resolved 2 packages in 0.68ms
Installed 1 package in 7ms
 + pip==25.1.1
$ uv run -m pip --version
...
File "/home/uv_reinstall/.venv/lib/python3.12/site-packages/pip/__main__.py", line 25
    i'm broken
     ^
SyntaxError: unterminated string literal (detected at line 25)
```

### Platform

Linux 6.12.35 x86_64 GNU/Linux
(NixOS 25.05)

### Version

uv 0.7.16 / uv 0.7.19


---

_Label `question` added by @turbotimon on 2025-07-07 07:50_

---

_Renamed from "How to refresh a package? (`--refresh` and similar have no effect)" to "How to refresh a package? (`--reinstall` and similar have no effect)" by @turbotimon on 2025-07-07 07:50_

---

_Renamed from "How to refresh a package? (`--reinstall` and similar have no effect)" to "How to reinstall a broken package? (`--reinstall` and similar have no effect)" by @turbotimon on 2025-07-07 07:54_

---

_Comment by @turbotimon on 2025-07-07 08:03_

A `uv clean` helps, but then I do not understand the purpose of `--reinstall` `--refresh` and similar options

---

_Comment by @konstin on 2025-07-07 09:27_

For your cache, you need `uv cache clean -p <package>`, `--reinstall` and `--refresh` have two different jobs:

uv by default hard-links packages from the cache to the venv. The `--reinstall` option reinstalls the package into the venv, but if the package got changed in the cache (due to the hard-linking), it reinstalls the changed file again.

By default, uv caches responses from an index (respecting the index' cache headers). With the `--refresh` option, uv will re-check the index, e.g. if there's a new version on the index.

---

_Comment by @turbotimon on 2025-07-07 10:19_

So a what

> [--reinstall](https://docs.astral.sh/uv/reference/cli/#uv-run--reinstall), --force-reinstall
Reinstall all packages, regardless of whether they're already installed. Implies --refresh

does is "just" recreating the hard link? I which situation would that be helpful (honest question)?

And is there no option for the project (run, add, sync) or pip commands to truly reinstall (including redownload) a package? Maybe `--no-cache`?

---

_Comment by @turbotimon on 2025-07-07 10:27_

Also, this sentence from the [cache documentation](https://docs.astral.sh/uv/concepts/cache/#dependency-caching) would therefore be wrong in my opinion. Because it does not *ignore existing installed versions* or isn't it?

> If you're running into caching issues, uv includes a few escape hatches:
> - To force uv to ignore existing installed versions, pass --reinstall to any installation command (e.g., uv sync --reinstall or uv pip install --reinstall ...).

---

_Comment by @turbotimon on 2025-07-09 16:21_

`uv add --reinstall --link-mode copy --no-cache pip` would at least repair the current venv, but the cache is still broken. So any other project using the same package (and version etc.) would be broken from the beginning..


---

_Comment by @turbotimon on 2025-07-10 07:30_

 @konstin by the way,`-p <package>` is not a valid option, instead use just the package name `uv cache clean [package]`

---

_Comment by @charliermarsh on 2025-07-16 13:56_

Yeah, I think you need `uv cache clean`. I can amend the docs a bit.

> I which situation would that be helpful (honest question)?

An example would be if you're working in a virtual environment in which pip installed a given package, and you want to reinstall it with uv.

---

_Assigned to @charliermarsh by @charliermarsh on 2025-07-16 13:56_

---

_Referenced in [astral-sh/uv#14659](../../astral-sh/uv/pulls/14659.md) on 2025-07-16 14:40_

---

_Closed by @charliermarsh on 2025-07-16 16:02_

---
