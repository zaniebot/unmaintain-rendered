---
number: 5618
title: "error messages expose a dependency relationship between `a` and `a{marker}`"
type: issue
state: closed
author: BurntSushi
labels:
  - bug
  - error messages
  - resolver
assignees: []
created_at: 2024-07-30T17:43:33Z
updated_at: 2024-08-02T21:27:09Z
url: https://github.com/astral-sh/uv/issues/5618
synced_at: 2026-01-07T12:31:14-06:00
---

# error messages expose a dependency relationship between `a` and `a{marker}`

---

_Issue opened by @BurntSushi on 2024-07-30 17:43_

For example:

```
  x No solution found when resolving dependencies:
  `-> Because fork-overlapping-markers-a{python_version == '3.12'}==1.0.0 depends on fork-overlapping-markers-a==1.0.0 and fork-overlapping-markers==0.0.0 depends on fork-overlapping-markers-a{python_version == '3.12'}==1.0.0, we
      can conclude that fork-overlapping-markers==0.0.0 and fork-overlapping-markers-a{python_version > '3.12'}==2.0.0 are incompatible.
      And because fork-overlapping-markers==0.0.0 depends on fork-overlapping-markers-a{python_version > '3.12'}==2.0.0, we can conclude that fork-overlapping-markers==0.0.0 cannot be used.
      And because only fork-overlapping-markers==0.0.0 is available and project==0.1.0 depends on fork-overlapping-markers, we can conclude that project==0.1.0 cannot be used.
      And because only project==0.1.0 is available and you require project, we can conclude that the requirements are unsatisfiable.
```

Specifically:

```
Because fork-overlapping-markers-a{python_version == '3.12'}==1.0.0 depends on fork-overlapping-markers-a==1.0.0
```

If one is familiar with internals, this makes sense, because we have specific "marker" dependencies and "normal" dependencies, and they have a dependency relationship with one another. But from an end user perspective, they probably should be treated as just one package.

---

_Label `bug` added by @BurntSushi on 2024-07-30 17:43_

---

_Label `error messages` added by @BurntSushi on 2024-07-30 17:43_

---

_Label `resolver` added by @BurntSushi on 2024-07-30 17:43_

---

_Referenced in [astral-sh/uv#4922](../../astral-sh/uv/issues/4922.md) on 2024-07-30 17:43_

---

_Referenced in [astral-sh/uv#5612](../../astral-sh/uv/issues/5612.md) on 2024-07-30 17:45_

---

_Comment by @zanieb on 2024-07-30 17:45_

Seems clearer than https://github.com/astral-sh/uv/issues/5612

---

_Comment by @BurntSushi on 2024-07-30 17:50_

Haha whoops! Totally missed that one.

---

_Comment by @charliermarsh on 2024-08-01 20:20_

Does anyone have an example that produces this?

---

_Comment by @BurntSushi on 2024-08-02 11:28_

I think pretty much anything that doesn't produce a resolution and involves markers will do:

```
$ cat /tmp/requirements.in
iniconfig
iniconfig==2.0.0 ; python_version > '3.12'
iniconfig==1.0.0 ; python_version == '3.12'

$ uv pip compile /tmp/requirements.in --universal
  x No solution found when resolving dependencies:
  `-> Because iniconfig{python_version > '3.12'}==2.0.0 depends on iniconfig==2.0.0 and you require iniconfig{python_version > '3.12'}==2.0.0, we can conclude that your requirements and iniconfig{python_version == '3.12'}==1.0.0
      are incompatible.
      And because you require iniconfig{python_version == '3.12'}==1.0.0, we can conclude that the requirements are unsatisfiable.
```

Although I suppose this will stop producing an error once overlapping marker support lands. :P

---

_Comment by @charliermarsh on 2024-08-02 16:03_

Awesome thank you :) I was having trouble getting this exact form to appear.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-08-02 21:13_

---

_Referenced in [astral-sh/uv#5738](../../astral-sh/uv/pulls/5738.md) on 2024-08-02 21:13_

---

_Closed by @charliermarsh on 2024-08-02 21:27_

---
