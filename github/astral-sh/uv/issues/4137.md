---
number: 4137
title: Setuptools is installed conditionally when it should be installed unconditionally
type: issue
state: closed
author: konstin
labels:
  - bug
  - preview
assignees: []
created_at: 2024-06-07T16:21:33Z
updated_at: 2024-06-10T12:40:52Z
url: https://github.com/astral-sh/uv/issues/4137
synced_at: 2026-01-07T12:31:14-06:00
---

# Setuptools is installed conditionally when it should be installed unconditionally

---

_Issue opened by @konstin on 2024-06-07 16:21_

Resolving this [pyproject.toml](https://gist.github.com/konstin/365b137c572a718e342b6635e49840fa) (needs minification) with `uv lock` on ubuntu, i get this [uv.lock](https://gist.github.com/konstin/90a99e5911e30b0cc90a681de71ca91a). If i `uv sync` it, it installs `pyramid`, but not setuptools, even though pyramid depends on setuptools. This does not happen if `pyramid` is the sole dependency.

---

_Label `bug` added by @konstin on 2024-06-07 16:21_

---

_Label `preview` added by @konstin on 2024-06-07 16:21_

---

_Comment by @charliermarsh on 2024-06-07 16:26_

I can take this one later, unless someone beats me to it. Very weird, good bug!

---

_Assigned to @charliermarsh by @charliermarsh on 2024-06-07 17:56_

---

_Comment by @charliermarsh on 2024-06-07 17:59_

I can't reproduce -- it does install setuptools for me.

---

_Comment by @charliermarsh on 2024-06-07 18:03_

Ah ok. You need to use Python < 3.12.

---

_Comment by @charliermarsh on 2024-06-07 18:04_

It's the same as https://github.com/astral-sh/uv/issues/4125.

---

_Referenced in [astral-sh/uv#4166](../../astral-sh/uv/pulls/4166.md) on 2024-06-08 18:08_

---

_Closed by @konstin on 2024-06-10 06:10_

---

_Closed by @charliermarsh on 2024-06-10 12:40_

---
