---
number: 10190
title: "`error decoding response body` when resolving dependencies from aws codeartifact repo since 0.5.12"
type: issue
state: closed
author: okan-agca-entrix
labels:
  - bug
assignees: []
created_at: 2024-12-27T09:34:39Z
updated_at: 2024-12-29T22:52:07Z
url: https://github.com/astral-sh/uv/issues/10190
synced_at: 2026-01-07T12:31:15-06:00
---

# `error decoding response body` when resolving dependencies from aws codeartifact repo since 0.5.12

---

_Issue opened by @okan-agca-entrix on 2024-12-27 09:34_

Hello,
I'm encountering a new error since upgrading to `0.5.12` while running `uv sync`. The setup is described below. The error is not present with version `0.5.11` of uv. If there are migration steps I missed, would be happy if you can direct me there. Had a brief look at the release notes but didn't see anything relevant.


Error Message from Github Actions:
```
Using CPython 3.12.8 interpreter at: /opt/hostedtoolcache/Python/3.12.8/x64/bin/python3
Creating virtual environment at: .venv
error: Failed to generate package metadata for `*****`
  Caused by: Failed to resolve requirements from `build-system.requires`
  Caused by: No solution found when resolving: `hatchling`, `hatch-vcs`
  Caused by: Failed to fetch: `https://***-***.d.codeartifact.eu-west-1.amazonaws.com/pypi/***/simple/hatchling/`
  Caused by: error decoding response body
  Caused by: there are extra bytes after body has been decompressed
Error: Process completed with exit code 2.
```

Setup:
The code artifact url is setup in the pyproject toml
```[[tool.uv.index]]
name = "aws-code"
url = "https://***-***.d.codeartifact.eu-west-1.amazonaws.com/pypi/***/simple/"
```
The credentials are setup as environment variables as documented here: https://docs.astral.sh/uv/guides/integration/alternative-indexes/#aws-codeartifact

---

_Comment by @olafdeleeuw on 2024-12-27 10:15_

I can confirm same error occurs with Azure Artifacts. With v0.5.11 dependencies from our private Azure Artifacts library were installed by `uv`. Now, with v0.5.12 I get the same error as @okan-agca-entrix . 

```
Creating virtual environment at: .venv
Resolved 128 packages in 1ms
  × Failed to build `emd-client @ file:///home/vsts/work/1/s`
  ├─▶ Failed to resolve requirements from `build-system.requires`
  ├─▶ No solution found when resolving: `hatchling`
  ├─▶ Failed to fetch:
  │   `[https://***.pkgs.visualstudio.com/***/_packaging/***/pypi/simple/hatchling/`](https://***.pkgs.visualstudio.com/***/_packaging/***/pypi/simple/hatchling/%60)
  ├─▶ error decoding response body
```

---

_Comment by @kyriakost on 2024-12-27 12:02_

Can verify the error

---

_Comment by @thiago-pythonic on 2024-12-27 12:50_

Error happens with Gitlab package registry:

```
Using Python 3.8.10 environment at: virtualenvs/***
error: Failed to fetch: `https://gitlab.com/api/v4/groups/***/-/packages/pypi/simple/***/`
  Caused by: error decoding response body
  Caused by: there are extra bytes after body has been decompressed
```



---

_Comment by @charliermarsh on 2024-12-27 13:36_

Sorry -- this is a bug in `reqwests` that I fixed last night (#10187), but didn't realize that the subsequent release failed. I'll get it out now.

---

_Referenced in [astral-sh/uv#10191](../../astral-sh/uv/issues/10191.md) on 2024-12-27 13:40_

---

_Assigned to @charliermarsh by @charliermarsh on 2024-12-27 13:48_

---

_Label `bug` added by @charliermarsh on 2024-12-27 13:48_

---

_Comment by @olafdeleeuw on 2024-12-27 13:52_

No problem. Thanks!


---

_Comment by @charliermarsh on 2024-12-27 14:02_

This should be fixed in v0.5.13.

If you're on v0.5.12, you may need to reinstall with cURL rather than via `uv self update`:

```shell
curl -LsSf https://astral.sh/uv/install.sh | sh
```

Sorry for the inconvenience! It's my mistake for going to bed without double-checking the release pipeline.

---

_Closed by @charliermarsh on 2024-12-27 14:02_

---

_Comment by @thiago-pythonic on 2024-12-27 14:06_

Thanks for the quick turnaround! 0.5.13 works just fine!

---

_Comment by @olafdeleeuw on 2024-12-27 14:07_

Thanks! Also with Azure Artifacts. Everything works fine again with 0.5.13.

---

_Comment by @flipdazed on 2024-12-29 21:43_

out of interest is there any way you can maintain previous versions in `homebrew` just in case there is a problem like this again? This caused us a bit of havoc because `brew` doesn't maintain any old versions

---

_Comment by @charliermarsh on 2024-12-29 22:52_

Hmm, I think that's ultimately up to Homebrew, since I didn't do anything specific to have it _not_ publish to Homebrew. It's possible that the releases were just too close together, and so Homebrew never built and uploaded 0.5.12?


---
