---
number: 9649
title: "Optimize '#' usage in git dependencies"
type: issue
state: closed
author: minmax
labels:
  - question
assignees: []
created_at: 2024-12-04T22:05:58Z
updated_at: 2024-12-06T00:13:29Z
url: https://github.com/astral-sh/uv/issues/9649
synced_at: 2026-01-07T12:31:15-06:00
---

# Optimize '#' usage in git dependencies

---

_Issue opened by @minmax on 2024-12-04 22:05_

If i have this:

```toml
[project]
name = "test"
requires-python = ">=3.11"
version = "0.0.1"
dependencies = [
    "django-types@git+https://github.com/sbdchd/django-types.git@main#d7c95ba",
]
```

and run `uv sync` 5 times, the last shows:

```bash
uv sync
# Resolved 3 packages in 131ms
# Audited 2 packages in 0.01ms
```
`0,18s` total

but when i have this:

```toml
dependencies = [
    "django-types@git+https://github.com/sbdchd/django-types.git@main",
]
```

(drop `#d7c95ba`)
`uv sync` works as fast as expected

```bash
 uv sync
# Resolved 3 packages in 1ms
# Audited 2 packages in 0.01ms
```
`0,06s` total

```
uv --version  
uv 0.5.6 (Homebrew 2024-12-03)
```

---

_Comment by @charliermarsh on 2024-12-04 22:09_

What is `@main#d7c95ba`?

---

_Comment by @minmax on 2024-12-05 01:01_

> What is `@main#d7c95ba`?

`main` - branch
`#d7c95ba` - commit hash

hm, [docs](https://packaging.python.org/en/latest/specifications/version-specifiers/#direct-references) don't say anything about branches, only about tags `@<tag>#<commit-hash>`



## Some more tests
<hr>

### only hash variant
```toml
dependencies = [
    "django-types@git+https://github.com/sbdchd/django-types.git@d7c95ba",
]
```

fast as hell

```bash
uv sync
# Resolved 3 packages in 1ms
# Audited 2 packages in 0.02ms                                                                                                                                           
```
`0,06s` total

<hr>

### tag + hash variant

```toml
dependencies = [
    "gunicorn@git+https://github.com/benoitc/gunicorn.git@23.0.0#411986d6191114dd1d1bbb9c72c948dbf0ef0425",
]
```

have a 3x downgrade

```bash
uv sync
# Resolved 3 packages in 114ms
# Audited 2 packages in 0.01ms
```
`0,16s` total


---

_Comment by @charliermarsh on 2024-12-05 01:02_

I believe you just want `@commit`, yeah. 

---

_Comment by @zanieb on 2024-12-05 01:17_

I don't know what it means to provide both a branch/tag and a hash, you should just provide one or the other.

---

_Closed by @charliermarsh on 2024-12-06 00:13_

---

_Label `question` added by @charliermarsh on 2024-12-06 00:13_

---
