---
number: 4522
title: "Cryptic error for `python -m uv pip compile --python-version x.y.z` when using the Windows app store Python app"
type: issue
state: closed
author: ncoghlan
labels:
  - bug
  - error messages
assignees: []
created_at: 2024-06-25T16:36:14Z
updated_at: 2024-06-29T04:39:27Z
url: https://github.com/astral-sh/uv/issues/4522
synced_at: 2026-01-07T12:31:14-06:00
---

# Cryptic error for `python -m uv pip compile --python-version x.y.z` when using the Windows app store Python app

---

_Issue opened by @ncoghlan on 2024-06-25 16:36_

I am running the PSF's CPython build from the Windows app store in order to benefit from the automatic updates.

This build omits the Python launcher for Windows, so the `py --list-paths` command isn't available.

This results in a cryptic error when requesting transitive dependency resolution for a Python version other than the one used to invoke `uv`:

```
> python -m uv pip compile --python-version 3.11 requirements.in
error: The `py` launcher could not be found.
```

This arises even if source builds are disabled (so there shouldn't be any need to extract dynamic runtime dependency information from a source build):

```
> python -m uv pip compile --no-build --python-version 3.11 requirements.in
error: The `py` launcher could not be found.
```

The actual error in these commands was that the `--python` command line option to specify the target Python runtime was missing (I had been mislead by testing on Linux, which had used Fedora's `python3.11` alternative Python install to satisfy the `3.11` version check - it would actually be handy if there was a `--toolchain-preference only-specified` option to keep `uv` from trying to autodiscover Python runtimes).

---

_Comment by @charliermarsh on 2024-06-25 16:41_

> This arises even if source builds are disabled (so there shouldn't be any need to extract dynamic runtime dependency information from a source build)

FWIW I don't think this part is that relevant -- we need to query the Python interpreter to extract the platform markers regardless.


---

_Comment by @charliermarsh on 2024-06-25 16:43_

I'm guessing that should be non-fatal or something but defer to @zanieb who owns Python discovery.

---

_Comment by @ncoghlan on 2024-06-25 16:49_

> FWIW I don't think this part is that relevant -- we need to query the Python interpreter to extract the platform markers regardless.

That's a fair point, so I think that just becomes a small comment on the `README.md` text about Python discovery (it gives slightly misleading info on why `uv` needs a target Python with the right version available)

---

_Assigned to @zanieb by @zanieb on 2024-06-25 18:46_

---

_Label `bug` added by @zanieb on 2024-06-25 18:46_

---

_Label `error messages` added by @zanieb on 2024-06-25 18:46_

---

_Comment by @zanieb on 2024-06-25 18:47_

We're in the process of rewriting all that documentation. I'll improve that and add more context to that error message, thanks!

---

_Referenced in [astral-sh/uv#4620](../../astral-sh/uv/pulls/4620.md) on 2024-06-28 15:07_

---

_Comment by @zanieb on 2024-06-28 15:08_

I put up a fix at #4620, let me know if you get a chance to test it.

@ncoghlan Regarding

> --toolchain-preference only-specified option to keep uv from trying to autodiscover Python runtimes).

In this case, you'd expect us to error whenever `--python` wasn't included?

---

_Closed by @zanieb on 2024-06-29 04:39_

---

_Closed by @zanieb on 2024-06-29 04:39_

---

_Referenced in [astral-sh/uv#4918](../../astral-sh/uv/issues/4918.md) on 2024-07-09 16:22_

---
