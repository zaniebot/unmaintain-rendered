---
number: 3669
title: Add installation option for portable entry points
type: issue
state: open
author: ofek
labels:
  - enhancement
  - configuration
assignees: []
created_at: 2024-05-20T05:08:08Z
updated_at: 2025-06-26T12:37:27Z
url: https://github.com/astral-sh/uv/issues/3669
synced_at: 2026-01-07T12:31:14-06:00
---

# Add installation option for portable entry points

---

_Issue opened by @ofek on 2024-05-20 05:08_

I have a use case where I need to pre-build an entire installation which will be distributed to any number of machines. When installing packages that have entry points, the location becomes hardcoded to an absolute path.

Instead, this should be relative to the Python executable used for installation. For non-Windows systems the python-build-standalone project does this for pip for example:

```sh
#!/bin/sh
"exec" "$(dirname $0)/python3.12" "$0" "$@"
# -*- coding: utf-8 -*-
import re
import sys
from pip._internal.cli.main import main
if __name__ == '__main__':
    sys.argv[0] = re.sub(r'(-script\.pyw|\.exe)?$', '', sys.argv[0])
    sys.exit(main())
```

The trampoline logic should be equivalently simple for Windows.

Maybe this should become the default in future?

---

_Comment by @pfmoore on 2024-05-20 14:23_

This definitely should *not* be the default. Entry point wrappers are built with absolute paths to the interpreter so that the *wrapper* can be copied or symlinked to other locations, without needing to copy the Python environment as well. This is something that's used by a lot of applications - most notably `pipx`, which symlinks `~/.local/bin/appname.exe` to `~/.local/pipx/venvs/appenv/Scripts/appname.exe`.

---

_Comment by @charliermarsh on 2024-05-20 14:24_

Makes sense, thanks for that context @pfmoore.

---

_Label `enhancement` added by @charliermarsh on 2024-05-20 20:35_

---

_Label `configuration` added by @charliermarsh on 2024-05-20 20:35_

---

_Comment by @skoslowski on 2024-05-21 14:14_

I have a similar use-case. It would be great to be able to skip patching wrappers post-install.

(On Windows-systems I am using `<launcher_dir>` for [distlib-based launchers](https://github.com/pypa/distlib/blob/888c48b56886b03398646be1217508830427bd75/PC/launcher.c#L58C27-L58C43))

---

_Referenced in [astral-sh/uv#3717](../../astral-sh/uv/pulls/3717.md) on 2024-05-21 19:11_

---

_Comment by @ofek on 2024-05-23 21:50_

FYI since https://github.com/astral-sh/uv/pull/3717 this is now completely possible to implement and I do so here:

- https://github.com/pypa/hatch/blob/hatch-v1.11.1/release/windows/make_scripts_portable.py
- https://github.com/pypa/hatch/blob/hatch-v1.11.1/release/unix/make_scripts_portable.py

---

_Comment by @pfmoore on 2024-05-23 21:57_

I'm confused as to what's happening here. I could test, but I have limited time right now so if someone can explain, I'd be grateful. If I `uv pip install` a project that has a script entry point, does that entry point by default still use an absolute path to the Python executable binary?

---

_Comment by @charliermarsh on 2024-05-23 22:20_

Yeah. We didnâ€™t change any behavior in uv itself, except we changed our Windows trampoline to accept a relative path (though we never write one to it in uv). Ofek is then post-processing the scripts in Hatch, I think, to rewrite the absolute paths as relative.

---

_Comment by @ofek on 2024-05-24 01:18_

Yes that is exactly correct and I can remove that entire logic once such a flag exists in UV! I posted those links mostly to assist in someone doing the implementation.

---

_Referenced in [astral-sh/uv#3863](../../astral-sh/uv/issues/3863.md) on 2024-05-27 16:36_

---

_Referenced in [winpython/winpython#1369](../../winpython/winpython/issues/1369.md) on 2024-07-27 14:23_

---

_Referenced in [astral-sh/uv#5509](../../astral-sh/uv/pulls/5509.md) on 2024-07-27 17:05_

---

_Comment by @firai on 2025-06-26 12:35_

I understand that #5515 added the machinery for the wheel installer to install portable entrypoints in `venv`s, to configure the option at `venv` creation and to persist the option in the `venv` environment. Is the only thing missing now a way to configure `uv` to do the same outside `venv`s (either as an environment flag or as a flag for `uv pip install`)?

---
