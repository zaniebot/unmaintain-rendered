---
number: 14149
title: uv behavior does not match pip
type: issue
state: closed
author: DataSailor
labels:
  - question
assignees: []
created_at: 2025-06-20T10:50:41Z
updated_at: 2025-07-04T02:09:05Z
url: https://github.com/astral-sh/uv/issues/14149
synced_at: 2026-01-07T12:31:16-06:00
---

# uv behavior does not match pip

---

_Issue opened by @DataSailor on 2025-06-20 10:50_

### Summary

I tried using uv to install [CarveKit](https://github.com/OPHoperHPO/image-background-remove-tool), following their instructions to
`pip install carvekit --extra-index-url https://download.pytorch.org/whl/cu121`
Therefore, I tried to rewrite it as
`uv add carvekit --index https://download.pytorch.org/whl/cu121`
But uv thinks there is a conflict in the package version. The error message is
```
× No solution found when resolving dependencies for split (python_full_version >= '3.12' and sys_platform == 'darwin'):
  ╰─▶ Because only the following versions of numpy are available:
          numpy<1.22.4
          numpy>1.23.dev0
      and carvekit<=4.1.0 depends on numpy>=1.22.4,<1.23.dev0, we can conclude that carvekit<=4.1.0 cannot be used.
      And because only the following versions of carvekit are available:
          carvekit==4.0.1
          carvekit==4.0.2
          carvekit==4.0.3
          carvekit==4.0.4
          carvekit==4.0.5
          carvekit==4.0.6
          carvekit==4.0.7
          carvekit==4.0.8
          carvekit==4.1.0
          carvekit==4.1.1
          carvekit==4.1.2
      we can conclude that carvekit<4.1.1 cannot be used. (1)

      Because only requests==2.28.1 is available and carvekit==4.1.1 depends on requests>=2.31.0,<2.32.dev0, we can conclude that carvekit==4.1.1 cannot be used.
      And because we know from (1) that carvekit<4.1.1 cannot be used, we can conclude that carvekit<4.1.2 cannot be used. (2)

      Because only requests==2.28.1 is available and carvekit==4.1.2 depends on requests>=2.31.0, we can conclude that carvekit==4.1.2 cannot be used.
      And because we know from (2) that carvekit<4.1.2 cannot be used, we can conclude that all versions of carvekit cannot be used.
      And because your project depends on carvekit, we can conclude that your project's requirements are unsatisfiable.

      hint: `numpy` was requested with a pre-release marker (e.g., numpy>=1.22.4,<1.23.dev0), but pre-releases weren't enabled (try: `--prerelease=allow`)

      hint: `numpy` was found on https://download.pytorch.org/whl/cu121, but not at the requested version (numpy>=1.22.4,<1.23.dev0). A compatible version may be
      available on a subsequent index (e.g., https://mirrors.bfsu.edu.cn/pypi/web/simple). By default, uv will only consider versions that are published on the first
      index that contains a given package, to avoid dependency confusion attacks. If all indexes are equally trusted, use `--index-strategy unsafe-best-match` to
      consider all versions from all indexes, regardless of the order in which they were defined.

      hint: `requests` was found on https://download.pytorch.org/whl/cu121, but not at the requested version (requests>=2.31.0). A compatible version may be available
      on a subsequent index (e.g., https://mirrors.bfsu.edu.cn/pypi/web/simple). By default, uv will only consider versions that are published on the first index that
      contains a given package, to avoid dependency confusion attacks. If all indexes are equally trusted, use `--index-strategy unsafe-best-match` to consider all
      versions from all indexes, regardless of the order in which they were defined.

      hint: While the active Python version is 3.11, the resolution failed for other Python versions supported by your project. Consider limiting your project's
      supported Python versions using `requires-python`.
  help: If you want to add the package regardless of the failed resolution, provide the `--frozen` flag to skip locking and syncing.
```

I switched to installing via pip and finally found a suitable version.
`pip install torch==2.2.2 torchvision==0.17.2 torchaudio==2.2.2 carvekit --extra-index-url https://download.pytorch.org/whl/cu121`
I run the same command through uv.
`uv add torch==2.2.2 torchvision==0.17.2 torchaudio==2.2.2 carvekit --index https://download.pytorch.org/whl/cu121`
But still getting an error:
```
× No solution found when resolving dependencies for split (python_full_version >= '3.12' and sys_platform == 'darwin'):
  ╰─▶ Because only the following versions of carvekit are available:
          carvekit==4.0.1
          carvekit==4.0.2
          carvekit==4.0.3
          carvekit==4.0.4
          carvekit==4.0.5
          carvekit==4.0.6
          carvekit==4.0.7
          carvekit==4.0.8
          carvekit==4.1.0
          carvekit==4.1.1
          carvekit==4.1.2
      and carvekit<=4.1.0 depends on torchvision>=0.12.0,<0.13.dev0, we can conclude that carvekit<4.1.1 depends on torchvision>=0.12.0,<0.13.dev0.
      And because carvekit==4.1.1 depends on torchvision>=0.16.2,<0.17.dev0, we can conclude that carvekit<4.1.2 depends on one of:
          torchvision>=0.12.0,<0.13.dev0
          torchvision>=0.16.2,<0.17.dev0
       (1)

      Because only requests==2.28.1 is available and carvekit==4.1.2 depends on requests>=2.31.0, we can conclude that carvekit==4.1.2 cannot be used.
      And because we know from (1) that carvekit<4.1.2 depends on one of:
          torchvision>=0.12.0,<0.13.dev0
          torchvision>=0.16.2,<0.17.dev0
      we can conclude that all versions of carvekit depend on one of:
          torchvision>=0.12.0,<0.13.dev0
          torchvision>=0.16.2,<0.17.dev0

      And because your project depends on carvekit and torchvision==0.17.2, we can conclude that your project's requirements are unsatisfiable.

      hint: `requests` was found on https://download.pytorch.org/whl/cu121, but not at the requested version (requests>=2.31.0). A compatible version may be available
      on a subsequent index (e.g., https://mirrors.bfsu.edu.cn/pypi/web/simple). By default, uv will only consider versions that are published on the first index that
      contains a given package, to avoid dependency confusion attacks. If all indexes are equally trusted, use `--index-strategy unsafe-best-match` to consider all
      versions from all indexes, regardless of the order in which they were defined.

      hint: While the active Python version is 3.11, the resolution failed for other Python versions supported by your project. Consider limiting your project's
      supported Python versions using `requires-python`.
  help: If you want to add the package regardless of the failed resolution, provide the `--frozen` flag to skip locking and syncing.
```
I'm not sure if this is due to my incorrect usage or an issue with the version parsing of uv or pip.

### Platform

Ubuntu 24.04

### Version

uv 0.7.13

### Python version

Python 3.11.12

---

_Label `bug` added by @DataSailor on 2025-06-20 10:50_

---

_Comment by @charliermarsh on 2025-06-20 13:21_

Can you try running with `--index-strategy unsafe-best-match`? There's extensive documentation on this general behavior, e.g., https://docs.astral.sh/uv/pip/compatibility/#packages-that-exist-on-multiple-indexes.

---

_Label `bug` removed by @zanieb on 2025-06-20 13:23_

---

_Label `question` added by @zanieb on 2025-06-20 13:23_

---

_Renamed from "[Bud] uv behavior does not match pip" to "uv behavior does not match pip" by @konstin on 2025-06-20 13:25_

---

_Closed by @charliermarsh on 2025-07-04 02:09_

---
