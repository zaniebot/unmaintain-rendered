---
number: 2568
title: "Add `uv` parser to linehaul "
type: issue
state: closed
author: MichaReiser
labels:
  - enhancement
assignees: []
created_at: 2024-03-20T17:06:53Z
updated_at: 2024-04-24T01:06:28Z
url: https://github.com/astral-sh/uv/issues/2568
synced_at: 2026-01-07T12:31:14-06:00
---

# Add `uv` parser to linehaul 

---

_Issue opened by @MichaReiser on 2024-03-20 17:06_

https://github.com/astral-sh/uv/pull/2493 updated `uv` to include additional metadata in the requests sent to PyPI (or any package index). I tried to query the PyPI big data table but no `uv` records are showing up yet. I believe this is due to the fact that linehaul doesn't recognize `uv` because it doesn't have a `uv` parser configuration in

https://github.com/pypi/linehaul-cloud-function/blob/main/linehaul/ua/parser.py

We should contribute a `uv` parser upstream (copy PIPs configuration?)



---

_Comment by @samypr100 on 2024-03-20 17:44_

I was planning on adding one over the next few weeks as time permits unless someone wants to give it a shot.

---

_Assigned to @samypr100 by @konstin on 2024-03-20 19:53_

---

_Label `enhancement` added by @konstin on 2024-03-20 19:54_

---

_Referenced in [pypi/linehaul-cloud-function#162](../../pypi/linehaul-cloud-function/pulls/162.md) on 2024-03-25 12:55_

---

_Comment by @charliermarsh on 2024-04-04 03:52_

Nice, thanks for putting that PR up @samypr100.

---

_Comment by @samypr100 on 2024-04-23 15:43_

Seems like stats are coming in @MichaReiser @charliermarsh 

<img width="552" alt="uv_stats" src="https://github.com/astral-sh/uv/assets/3933065/de29cf81-5b7b-4efe-9208-a2c910c7e714">



---

_Comment by @MichaReiser on 2024-04-23 15:45_

Yes. Thanks for implementing it. It works like a charm.

Oh that's an interesting query! I so far only tracked downloads by uv version (our users are really up to date), and downloads overall. 

---

_Closed by @MichaReiser on 2024-04-23 15:45_

---

_Comment by @samypr100 on 2024-04-24 01:06_

Yea, I already ate my free tier ðŸ˜† 

Here's one for the top 10 downloaded packages using uv in the last day. Nice to see that pandas came out at the top when using `uv`.

```sql
#standardSQL
SELECT
  file.project AS project_name,
  COUNT(*) AS num_downloads
FROM
  `bigquery-public-data.pypi.file_downloads`
WHERE
  DATE(timestamp) BETWEEN DATE_SUB(CURRENT_DATE(), INTERVAL 1 DAY) AND CURRENT_DATE()
  AND details.installer.name = 'uv'
GROUP BY
  project_name
ORDER BY
  num_downloads DESC
LIMIT 10
```

uv

|project_name     |num_downloads|
|-----------------|-------------|
|boto3            |1130187      |
|botocore         |516449       |
|packaging        |320548       |
|setuptools       |303500       |
|typing-extensions|295516       |
|pandas           |289491       |
|urllib3          |274027       |
|requests         |268572       |
|pytest           |267713       |
|click            |255924       |

pip

|project_name     |num_downloads|
|-----------------|-------------|
|boto3            |51247219     |
|botocore         |22762858     |
|urllib3          |19826296     |
|requests         |17587337     |
|wheel            |16842258     |
|idna             |15655970     |
|certifi          |15591192     |
|setuptools       |15371830     |
|charset-normalizer|15286527     |
|typing-extensions|14930478     |


---
