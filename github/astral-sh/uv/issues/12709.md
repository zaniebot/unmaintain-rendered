---
number: 12709
title: "\"flat index\" option not work for pytorch install"
type: issue
state: closed
author: Cloud0310
labels:
  - needs-mre
assignees: []
created_at: 2025-04-07T06:56:20Z
updated_at: 2025-04-08T04:24:03Z
url: https://github.com/astral-sh/uv/issues/12709
synced_at: 2026-01-07T12:31:15-06:00
---

# "flat index" option not work for pytorch install

---

_Issue opened by @Cloud0310 on 2025-04-07 06:56_

### Summary

## bug details
Using uv version 0.6.12, the issue still exists with the following config 
```toml
[tool.uv.souces]
torch = { index = "torch" }
torchvision = { index = "torch" }
[[tool.uv.index]]
name = "torch"
url = "https://download.pytorch.org/whl/torch_stable.html"
format = "flat"
explicit = true
```
with error throwing from `uv add --verbose torch==1.8.0+cu111`
```
DEBUG Searching for a compatible version of torch (==1.8.0+cu111)
DEBUG No compatible version found for: torch
DEBUG Recording unit propagation conflict of torch from incompatibility of (project name)
```
but after following the document about (find-links)[https://docs.astral.sh/uv/reference/settings/#find-links]
with config
```toml
[tool.uv]
find-links = ["https://download.pytorch.org/whl/torch_stable.html"]
```
You can resolve the dependency resolve problem.

### Platform

Ubuntu 20.04

### Version

uv 0.6.12

### Python version

Python 3.8.20

---

_Label `bug` added by @Cloud0310 on 2025-04-07 06:56_

---

_Assigned to @charliermarsh by @charliermarsh on 2025-04-07 18:51_

---

_Comment by @charliermarsh on 2025-04-07 18:54_

Hmm, this locks fine for me:

```toml
[project]
name = "foo"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.13.2"
dependencies = ["torch"]

[tool.uv.sources]
torch = { index = "torch" }
torchvision = { index = "torch" }

[[tool.uv.index]]
name = "torch"
url = "https://download.pytorch.org/whl/torch_stable.html"
format = "flat"
explicit = true
```

Please include a complete example.

---

_Comment by @charliermarsh on 2025-04-07 18:56_

(`[tool.uv.souces]` has a typo, in your example.)

---

_Label `bug` removed by @charliermarsh on 2025-04-07 19:08_

---

_Label `needs-mre` added by @charliermarsh on 2025-04-07 19:08_

---

_Comment by @Cloud0310 on 2025-04-08 04:24_

> Hmm, this locks fine for me:
> 
> [project]
> name = "foo"
> version = "0.1.0"
> description = "Add your description here"
> readme = "README.md"
> requires-python = ">=3.13.2"
> dependencies = ["torch"]
> 
> [tool.uv.sources]
> torch = { index = "torch" }
> torchvision = { index = "torch" }
> 
> [[tool.uv.index]]
> name = "torch"
> url = "https://download.pytorch.org/whl/torch_stable.html"
> format = "flat"
> explicit = true
> 
> Please include a complete example.

Thanks, ğŸ™

---

_Closed by @Cloud0310 on 2025-04-08 04:24_

---
