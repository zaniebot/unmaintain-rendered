---
number: 16820
title: "\"Permission denied\" error inside Codex sandbox on Linux"
type: issue
state: open
author: joliss
labels:
  - bug
assignees: []
created_at: 2025-11-23T00:05:24Z
updated_at: 2025-11-23T23:29:04Z
url: https://github.com/astral-sh/uv/issues/16820
synced_at: 2026-01-07T12:31:16-06:00
---

# "Permission denied" error inside Codex sandbox on Linux

---

_Issue opened by @joliss on 2025-11-23 00:05_

### Summary

Running uv from inside a Codex sandbox, both as a VS Code extension and as the CLI tool, causes a "Permission denied" error on my Ubuntu system:

```
$ npx @openai/codex
› run `uv run --verbose python3 -c 'print("hello world")'`


• Ran uv run --verbose python3 -c 'print("hello world")'
  └ DEBUG uv 0.9.11
    error: failed to open file `/home/ubuntu/.cache/uv/sdists-v9/.git`: Permission denied (os error 13)
```

It now tries to re-run with `with_escalated_permissions=true` on its tool call, which succeeds:

```
• Running uv run --verbose python3 -c 'print("hello world")'


  Would you like to run the following command?

  Reason: Requires access to uv cache directory outside sandbox; rerunning without sandbox to complete user command

  $ uv run --verbose python3 -c 'print("hello world")'

› 1. Yes, proceed (y)
  2. Yes, and don't ask again for this command (a)
  3. No, and tell Codex what to do differently (esc)

• Ran uv run --verbose python3 -c 'print("hello world")'
  └ DEBUG uv 0.9.11
    DEBUG Acquired shared lock for `/home/ubuntu/.cache/uv`
    … +53 lines
    DEBUG Command exited with code: 0
    DEBUG Released lock at `/home/ubuntu/.cache/uv/.lock`
```

If I ask it to run `uv run --verbose python3 -c 'print("hello world")' &> log`, I can see that the debug output inside the sandbox is only the following:

```
DEBUG uv 0.9.11
error: failed to open file `/home/ubuntu/.cache/uv/sdists-v9/.git`: Permission denied (os error 13)
```

If I try to read the offending file directly, there's no error:

```
› run `cat /home/ubuntu/.cache/uv/sdists-v9/.git`


• Explored
  └ Read .git

─ Worked for 4s ───────────────

• cat /home/ubuntu/.cache/uv/sdists-v9/.git produced no output (file is empty).
```

If there's anything I can do to help debug the problem, please let me know!

This is happening with the latest uv and codex, but it's been happening for a while, so I don't think it's a newly-introduced problem.

codex-cli version: 0.63.0

### Platform

Ubuntu 25.04

### Version

uv 0.9.11

### Python version

Python 3.14.0

---

_Label `bug` added by @joliss on 2025-11-23 00:05_

---

_Comment by @zanieb on 2025-11-23 15:16_

Can you share verbose logs for the failing uv invocation?

Did you open an issue with Codex too?

---

_Comment by @joliss on 2025-11-23 21:41_

> Can you share verbose logs for the failing uv invocation?

Running `uv run --verbose python3 -c 'print("hello world")' &> log` inside Codex only produces

```
DEBUG uv 0.9.11
error: failed to open file `/home/ubuntu/.cache/uv/sdists-v9/.git`: Permission denied (os error 13)
```

Or was there anything else you want me to run from inside Codex?

> Did you open an issue with Codex too?

Didn't yet! I'll go ahead and open one there as well, if you think that might be useful?

---

_Comment by @zanieb on 2025-11-23 23:29_

Yeah could you? I'm not sure about the specifics of the Codex sandbox. I'm happy to help but it seems unlikely to me that the the fix will be on our end. The specific call that's failing is probably

https://github.com/astral-sh/uv/blob/107d4e0ac71540059699b6136b000ba8a616ade2/crates/uv-cache/src/lib.rs#L412-L422

---

_Referenced in [openai/codex#7242](../../openai/codex/issues/7242.md) on 2025-11-24 13:39_

---
