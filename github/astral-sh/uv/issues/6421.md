---
number: 6421
title: Private repository as a source
type: issue
state: closed
author: NevoleMarek
labels:
  - question
  - configuration
assignees: []
created_at: 2024-08-22T10:59:45Z
updated_at: 2025-09-04T16:43:39Z
url: https://github.com/astral-sh/uv/issues/6421
synced_at: 2026-01-07T12:31:14-06:00
---

# Private repository as a source

---

_Issue opened by @NevoleMarek on 2024-08-22 10:59_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

Hi, I d'like to transition from `poetry` to `uv`. What I am missing is a way of using private repositories as source for packages.

[Poetry](https://python-poetry.org/docs/repositories/#private-repository-example) allows to add private repositories like so:

`poetry source add --priority=supplemental foo https://pypi.example.org/simple/` 

and then to install package from the repository like so:

`poetry add --source foo private-package`

Can this be sensibly done using `uv`?

I guess it could somehow be done via HTTP URLs but that seems a bit cumbersome.

---

_Comment by @charliermarsh on 2024-08-22 12:43_

So, today, you would do something like this in your `pyproject.toml`:

```toml
[tool.uv]
extra-index-url = ["https://pypi.example.org/simple/"]
```

uv will then look in `https://pypi.example.org/simple/` before looking in PyPI, and if a package exists on that index, it won't check PyPI at all.

We'll likely add a more granular index API in the future that looks more like what you get in Poetry, PDM, or Rye.

---

_Comment by @charliermarsh on 2024-08-22 12:43_

If you want to replace PyPI entirely, you can do:

```toml
[tool.uv]
index-url = "https://pypi.example.org/simple/"
```

---

_Comment by @charliermarsh on 2024-08-22 12:44_

Alternatively, you can define these globally in `~/.config/uv/uv.toml`:

```toml
extra-index-url = ["https://pypi.example.org/simple/"]
```

---

_Label `configuration` added by @charliermarsh on 2024-08-22 12:44_

---

_Comment by @NevoleMarek on 2024-08-22 13:07_

Thanks for the response

I guess the setting `extra-index-url` with `index-strategy = "first-index"` will do for now.

Looking forward to more granular API in the future.

One thing I would like to prevent via the future API is dependency confusion attacks.

---

_Comment by @charliermarsh on 2024-08-22 13:15_

Makes sense. Our default strategy is more resilient to such attacks than pip (since, if a package exists on your index, we won't even look at PyPI, even if a more recent version is available there), but we do want to add an API that allows for explicit package-to-index assignments.

---

_Comment by @rafalkrupinski on 2024-08-26 07:03_

Regarding private source repository, is there a way to provide credentials?

---

_Comment by @NevoleMarek on 2024-08-26 10:43_

The simplest way would be to add the private source repo as `extra-index-url` already with the credentials as follows:

```
[tool.uv]
extra-index-url = ["https://<username>:<password>@<index_url>"]
```

But as you can imagine this not the safest option. A bit more cumbersome but viable option is to specify the index and credentials with the `uv add` command and environment variables.

`uv add package --extra-index-url https://${USERNAME}:${PASSWORD}@<index_url>`

What I would like to see in the future is something similar to Poetry's way of doing this.

In addition to simple addition of sources they also provide the following way to add credentials to the sources.

`poetry config http-basic.your_index <username> <password>` [find more here](https://python-poetry.org/docs/repositories/)

There are other options that `uv` [recommends](https://docs.astral.sh/uv/configuration/authentication/#http-authentication) for http authentication but they are not the simplest either or maybe I am missing something

---

_Comment by @rafalkrupinski on 2024-08-26 14:16_

@NevoleMarek thanks, I'll check it out!

---

_Comment by @zanieb on 2024-08-26 17:42_

See also:

- https://github.com/astral-sh/uv/pull/6389
- #171 

---

_Label `question` added by @zanieb on 2024-08-26 17:43_

---

_Comment by @rafalkrupinski on 2024-08-27 10:42_

Actually I like the idea of using keyring and KWallet integration. Way better than storing passwords in open text.

---

_Comment by @yohann84L on 2024-10-04 08:36_

Still no alternative to the `poetry config http-basic.your_index <username> <password>` ?

---

_Comment by @zanieb on 2024-10-21 21:18_

We support `UV_INDEX_<NAME>_USERNAME` and `UV_INDEX_<NAME>_PASSWORD` now in addition to indexes in source definitions.

---

_Closed by @zanieb on 2024-10-21 21:18_

---

_Comment by @hamedhsn on 2025-01-28 18:24_

@zanieb is there any env variable to set the specific private index URL? like username and password you mentioned above?i did not see in the doc

I want to use `uv pip install private_pkg` 
the `uv pip` seems not picking up `UV_INDEX_<NAME>_USERNAME and UV_INDEX_<NAME>_PASSWORD`

basically, the question is if I want to use `uv pip install private_pkg` without having pyproject.toml to set the index + credentials how can I set the credentials

---

_Comment by @tuomastik on 2025-02-24 09:59_

For token-based authentication, like Azure Artifacts feed, you can use:

```yml
[[tool.uv.index]]
name = "azureartifacts"
url = "https://pkgs.dev.azure.com/XXX/YYY/_packaging/ZZZ/pypi/simple/"
```

Together with:

```bash
export UV_INDEX_AZUREARTIFACTS_USERNAME=<YOUR_PERSONAL_ACCESS_TOKEN>
```

---

_Comment by @mattiamatrix on 2025-03-17 17:51_

AWS CodeArtifact worked by setting `UV_INDEX_<NAME>_PASSWORD`

---

_Referenced in [astral-sh/uv#12666](../../astral-sh/uv/issues/12666.md) on 2025-04-04 09:43_

---

_Comment by @TiansuYu on 2025-08-22 14:24_

This does not solve the issue where some package wants to be specifically declared as from a private pypi. I am missing something like this from the UX: 
```toml
[project]
dependencies = [
    ...
    my-private-package = {version = ">= 0.1.0", index = "my-private-pypi" }
]

[[tool.uv.index]]
name = "my-private-pypi"
url = "https://<some-url>/simple/"
explicit = true
authenticate = "always"
```

similar process is well established within poetry. UV seems to be a bit clunky on that. 

---

_Comment by @charliermarsh on 2025-08-22 14:29_

What you're looking for exists -- it's a core feature:

```toml
[project]
dependencies = ["my-private-package>=0.1.0"]

[tool.uv.sources]
my-private-package = { index = "my-private-pypi" }

[[tool.uv.index]]
name = "my-private-pypi"
url = "https://<some-url>/simple/"
explicit = true
authenticate = "always"
```

---
