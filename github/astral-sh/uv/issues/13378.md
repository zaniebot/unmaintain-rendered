---
number: 13378
title: "What's the recommended way to install & run with 2 arch under MacOS?"
type: issue
state: open
author: freelancerhc
labels:
  - question
assignees: []
created_at: 2025-05-10T12:37:21Z
updated_at: 2025-08-13T05:06:46Z
url: https://github.com/astral-sh/uv/issues/13378
synced_at: 2026-01-07T12:31:16-06:00
---

# What's the recommended way to install & run with 2 arch under MacOS?

---

_Issue opened by @freelancerhc on 2025-05-10 12:37_

### Question

We have a set of scripts which need to run under both arm64 and x86_64 on MacOS for different tasks, before moving to uv, we use pip & venv to manage it in separate venv like below:
```
arch=arm64 (or x86_64)
python3 -m venv "$arch"
source "$arch/bin/activate"
arch -"$arch" pip3 install -r requirements-freeze.txt
arch -"$arch" python3 start.py
```
When I tried to migrate to uv, I found uv seems to not respect the process arch to determine which arch of the pypi packages to be installed, and I do find this https://github.com/astral-sh/uv/issues/2326, so I guess uv only use the python interpreter arch to determine, then I tried to use `uv python list` on some of machines, and I do get different results like below, but both machine are setup with same ansible playbook, so I would like to ask for what's the recommended way for my case to install the packages with given arch?

<img width="1244" alt="Image" src="https://github.com/user-attachments/assets/4b03a28d-6acf-4fa4-991f-8811ccf33b78" />

<img width="1521" alt="Image" src="https://github.com/user-attachments/assets/adc5a543-1266-4446-b4f8-b7f78c19d0d9" />

<img width="1534" alt="Image" src="https://github.com/user-attachments/assets/c30e2b36-2fa3-41bb-aa29-0d52b5fac95e" />

 And, another tricky thing I found is that, if I run with `arch -x86_64 python3 -m uv python list`, both machines can detect the python 3.9.6 as x86_64 instead of arm64, but 3.9.13 is always detected as the same. The 3.9.13 is an universal build downloaded from https://www.python.org/ftp/python/3.9.13/python-3.9.13-macos11.pkg, and the 3.9.6 is MacOS builtin.

<img width="1236" alt="Image" src="https://github.com/user-attachments/assets/cf0515c0-7e24-4cbb-99a0-ed70022c7393" />

### Platform

MacOS Sonoma

### Version

uv 0.7.3

---

_Label `question` added by @freelancerhc on 2025-05-10 12:37_

---

_Comment by @cudmore on 2025-08-02 15:51_

I am curious how to do this as well.

I need to create two different venv, one for x86 and the other for arm64.

I am then running pyinstaller to build 2 apps, one for mac intel and a second for apple silicon.

---

_Comment by @axman6 on 2025-08-13 05:06_

We also need to be able to do this, we create self contained binaries using pyinstaller, and currently need a frankensteinian process of installing dependencies with C code using `pip` to ensure that the universal binary made by pyinstaller can be executed. We're currently using a build that looks like this:

```yaml
    - uv venv venv # Use macOS' python so we can have univeral installer
    - source venv/bin/activate
    # install pip because uv pip doesn't know about --platform
    - python -m ensurepip --upgrade
    - pip3 install zstandard zeroconf --target venv  --upgrade --platform=arm64 --platform=x86_64 --no-deps --no-cache-dir
    - uv pip install pyinstaller .
    - pyinstaller --name=foo foo/main.py --add-binary="./executables/mac/somebinary:backend" --target-arch=universal2
```

---
