---
number: 15824
title: "uv tool run @latest doesn't reuse cache from specific version run"
type: issue
state: closed
author: domdomegg
labels: []
assignees: []
created_at: 2025-09-13T01:58:31Z
updated_at: 2025-09-14T13:10:47Z
url: https://github.com/astral-sh/uv/issues/15824
synced_at: 2026-01-07T12:31:16-06:00
---

# uv tool run @latest doesn't reuse cache from specific version run

---

_Issue opened by @domdomegg on 2025-09-13 01:58_

## Description

When using `uv tool run`, specifying `@latest` doesn't reuse the cached environment from a previous run with a specific version, even when `@latest` resolves to the same version.

## Steps to reproduce

```bash
# First run with specific version - uses cache correctly on subsequent runs
uv tool run --python 3.12 wcgw@5.4.3

# Run with @latest - reinstalls all packages even though latest = 5.4.3
uv tool run --python 3.12 wcgw@latest
```

## Actual behavior

When running with `@latest`, uv reports:
```
wcgw version: 5.4.3
Installed 64 packages in 67ms
```

It reinstalls all packages despite them being cached from the `@5.4.3` run.

## Expected behavior

Since `@latest` resolves to `5.4.3`, uv should reuse the cached environment from the previous `@5.4.3` run instead of reinstalling all packages.

## Environment

- uv version: uv 0.8.6 (329a6b446 2025-08-07)
- Platform: macOS (Darwin 24.6.0)
- Python: 3.12

## Additional context

The issue appears to be that uv uses the version specifier (`@latest` vs `@5.4.3`) as part of the cache key, rather than the resolved version. This leads to unnecessary reinstallations when using version specifiers that resolve to already-cached versions.

---

_Comment by @charliermarsh on 2025-09-14 00:53_

That's not quite what's happening -- it's more that `@latest` is internally treated as equivalent to `--refresh`, and when `--refresh` is provided to `tool run`, we always recreate the environment. I'd need to look into why that happens.

---

_Assigned to @charliermarsh by @charliermarsh on 2025-09-14 00:55_

---

_Referenced in [astral-sh/uv#15827](../../astral-sh/uv/pulls/15827.md) on 2025-09-14 01:03_

---

_Comment by @charliermarsh on 2025-09-14 01:04_

Put up a PR here to change the behavior: https://github.com/astral-sh/uv/pull/15827

---

_Closed by @charliermarsh on 2025-09-14 13:10_

---
