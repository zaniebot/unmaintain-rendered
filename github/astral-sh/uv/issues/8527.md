---
number: 8527
title: "`uv pip sync pyproject.toml` does not install all dependencies"
type: issue
state: closed
author: MtkN1
labels:
  - question
assignees: []
created_at: 2024-10-24T14:14:28Z
updated_at: 2025-09-24T09:51:04Z
url: https://github.com/astral-sh/uv/issues/8527
synced_at: 2026-01-07T12:31:15-06:00
---

# `uv pip sync pyproject.toml` does not install all dependencies

---

_Issue opened by @MtkN1 on 2024-10-24 14:14_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

`pyproject.toml` (just added `requests`):

```toml
[project]
name = "uv-demo"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.13"
dependencies = [
    "requests>=2.32.3",
]
```

reproduce command:

```sh-session
$ uv venv
$ uv pip sync pyproject.toml
Resolved 1 package in 2ms
Installed 1 package in 1ms
 + requests==2.32.3
$ uv pip freeze
requests==2.32.3
```

The dependencies required by the `requests` are not installed. In fact, there are dependencies such as `urllib3`.

```sh-session
$ echo requests | uv pip compile -
Resolved 5 packages in 79ms
# This file was autogenerated by uv via the following command:
#    uv pip compile -
certifi==2024.8.30
    # via requests
charset-normalizer==3.4.0
    # via requests
idna==3.10
    # via requests
requests==2.32.3
urllib3==2.2.3
    # via requests
```

Don't you think this is a bug?

---

_Comment by @zanieb on 2024-10-24 14:25_

`uv pip sync` installs _exactly_ the requirements defined in a file â€” in this case just `requests`.

It sounds like you're looking for `uv pip compile pyproject.toml | uv pip sync -`, `uv pip install .`, or `uv sync`.

---

_Label `question` added by @zanieb on 2024-10-24 14:25_

---

_Comment by @MtkN1 on 2024-10-24 15:14_

> uv pip sync installs _exactly_ the requirements defined in a file

Ah I see, `uv pip sync` does not resolve dependencies. I understood that it is a function to synchronise each requirements.

> `uv pip compile pyproject.toml | uv pip sync -`

This is the solution! I thought I read the documentation carefully, but I missed that you can enter it from stdin. (I'm a library developer and I just wanted to upgrade my virtual environment without lock file)

Thank you very much for teaching me. This is as designed, so I'm closing the issue.

---

_Closed by @MtkN1 on 2024-10-24 15:14_

---

_Comment by @MtkN1 on 2024-10-24 15:24_

However, `uv pip sync pyproject.toml` as described [in the documentation](https://docs.astral.sh/uv/pip/compile/#syncing-an-environment) caused some confusion (enough to open this issue). I'm not sure if there's any value in syncing an uncompiled pyproject.toml.

---

_Comment by @orishamir on 2025-03-06 09:39_

Why should `uv sync` include dependencies but not `uv pip sync`? What is the value of syncing without dependencies?

---

_Referenced in [KCL-BMEIS/UltraFlwr#49](../../KCL-BMEIS/UltraFlwr/issues/49.md) on 2025-04-28 19:00_

---

_Comment by @pelson on 2025-09-24 09:51_

@zanieb sorry for the ping, but I found this issue and think it has been mis-classified.

`pip-tools` _does_ resolve dependencies in sync by default:

```
$ uv venv ./venv --seed
Using CPython 3.13.5
Creating virtual environment with seed packages at: ./venv
 + pip==25.2
Activate with: source venv/bin/activate

$ echo "requests==2.32.5" > requirements.txt

$ uv run --with pip-tools pip-sync ./requirements.txt --python-executable=${VIRTUAL_ENV}/bin/python
Collecting requests==2.32.5 (from -r /tmp/tmpt06qmqtf (line 1))
  Using cached requests-2.32.5-py3-none-any.whl.metadata (4.9 kB)
Collecting charset_normalizer<4,>=2 (from requests==2.32.5->-r /tmp/tmpt06qmqtf (line 1))
  Using cached charset_normalizer-3.4.3-cp313-cp313-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (36 kB)
Collecting idna<4,>=2.5 (from requests==2.32.5->-r /tmp/tmpt06qmqtf (line 1))
  Using cached idna-3.10-py3-none-any.whl.metadata (10 kB)
Collecting urllib3<3,>=1.21.1 (from requests==2.32.5->-r /tmp/tmpt06qmqtf (line 1))
  Using cached urllib3-2.5.0-py3-none-any.whl.metadata (6.5 kB)
Collecting certifi>=2017.4.17 (from requests==2.32.5->-r /tmp/tmpt06qmqtf (line 1))
  Using cached certifi-2025.8.3-py3-none-any.whl.metadata (2.4 kB)
Using cached requests-2.32.5-py3-none-any.whl (64 kB)
Using cached charset_normalizer-3.4.3-cp313-cp313-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (151 kB)
Using cached idna-3.10-py3-none-any.whl (70 kB)
Using cached urllib3-2.5.0-py3-none-any.whl (129 kB)
Using cached certifi-2025.8.3-py3-none-any.whl (161 kB)
Installing collected packages: urllib3, idna, charset_normalizer, certifi, requests
Successfully installed certifi-2025.8.3 charset_normalizer-3.4.3 idna-3.10 requests-2.32.5 urllib3-2.5.0
```

Whereas `uv pip sync` doesn't:

```
$ uv venv ./venv --seed
$ VIRTUAL_ENV=./venv/ uv pip sync ./requirements.txt
Using Python 3.13.5 environment at: venv
Resolved 1 package in 41ms
Installed 1 package in 1ms
 + requests==2.32.5
```


To get `pip-tools` to not resolve, you have to go out of your way a bit...

```
$ uv venv ./venv --seed
$ uv run --with pip-tools pip-sync ./requirements.txt --python-executable=./venv/bin/python --pip-args="--no-deps"
Collecting requests==2.32.5 (from -r /tmp/tmpgqoczsaz (line 1))
  Using cached requests-2.32.5-py3-none-any.whl.metadata (4.9 kB)
Using cached requests-2.32.5-py3-none-any.whl (64 kB)
Installing collected packages: requests
Successfully installed requests-2.32.5
```


FWIW, I found this because I actually wanted `uv pip sync` to not spend so much time resolving (as I have a complete `requirements.txt` in my case), and can't find a satisfying solution. Something like ``--no-deps`` is essentially what I'm looking for (happy to open a feature request for that separately if you think it is worth it).

My case above is best demonstrated with:

```
$ echo "scipy==1.16.2" >> ./requirements.txt
$ uv pip sync ./requirements.txt --no-cache
Using Python 3.13.5 environment at: venv
Resolved 2 packages in 237ms
Prepared 1 package in 515ms
Installed 1 package in 14ms
 + scipy==1.16.2
$ uv pip sync ./requirements.txt --no-cache
Using Python 3.13.5 environment at: venv
Resolved 2 packages in 242ms
Audited 2 packages in 0.04ms
```

It should not be necessary for a resolution step in the second instance, and even the first instance the "resolution" is to figure out which wheels to install given the version. Is there an optimisation that can be made in `uv pip sync`?

In the second instance, I can add `--no-index` and I get the desired performance, but this obviously fails if there is some actual sync to be done.

---
