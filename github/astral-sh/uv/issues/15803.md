---
number: 15803
title: Add config to allow connection errors when searching across indexes
type: issue
state: open
author: chrisirhc
labels:
  - enhancement
assignees: []
created_at: 2025-09-12T07:10:14Z
updated_at: 2025-09-20T05:14:02Z
url: https://github.com/astral-sh/uv/issues/15803
synced_at: 2026-01-07T12:31:16-06:00
---

# Add config to allow connection errors when searching across indexes

---

_Issue opened by @chrisirhc on 2025-09-12 07:10_

### Summary

Use case:
There's a private index url which can only be accessed via certain network configurations such as within company VPN. And another public index url that is authenticated.

I want to be able to configure uv once and to try and use the private index url first, then still conclude successfully even if the private url can't be connected to, but the subsequent index url(s) were successful.
However, when I try to do this today, it errors out with:

```
…
TRACE Considering retry of error: Error { kind: WrappedReqwestError(DisplaySafeUrl { scheme: "http", cannot_be_a_base: false, username: "", password: None, host: Some(Domain("some.internal")), port: Some(4587), path: "/…/simple/pyomo/", query: None, fragment: None }, WrappedReqwestError(Middleware(Request failed after 3 retries

Caused by:
    0: error sending request for url (http://some.internal:4587/…/pyomo/)
    1: client error (Connect)
    2: dns error
    3: failed to lookup address information: nodename nor servname provided, or not known))), retries: 0 }
TRACE Cannot retry IO error `uncategorized error`, not a retryable IO error kind
TRACE Streams::recv_eof
TRACE Error trace: Failed to fetch: `http://some.internal:4587/…/pyomo/`
```

### Example

A configuration like the following would allow the connect error to be ignored:

```toml
[[index]]
url = "http://some.internal:4587/…/simple"
ignore-connect-error = true

[[index]]
url = "https://publicurl.com/…/simple"
```

This is similar to `ignore-error-codes`, and could also be `ignore-error-codes = [400]`. Since [400](https://developer.mozilla.org/en-US/docs/Web/HTTP/Reference/Status/400) is synonymous with a Client error.

---

_Label `enhancement` added by @chrisirhc on 2025-09-12 07:10_

---

_Comment by @zanieb on 2025-09-12 13:36_

It seems like the concept you want here is more like a mirror than multiple indexes? The problem with this approach is that the lockfile will change depending on whether you can connect to the private index.

---

_Comment by @chrisirhc on 2025-09-20 05:14_

Yes, this is more like a mirror or an alternative url for the same index. If uv is able to retrieve from either of the urls, it should not result in an error.

---
