---
number: 1461
title: "`uv pip compile|install` can't handle `--no-binary lxml` option in requirements file"
type: issue
state: closed
author: sergei-maertens
labels:
  - enhancement
  - compatibility
assignees: []
created_at: 2024-02-16T09:29:49Z
updated_at: 2024-03-27T01:12:31Z
url: https://github.com/astral-sh/uv/issues/1461
synced_at: 2026-01-07T12:31:14-06:00
---

# `uv pip compile|install` can't handle `--no-binary lxml` option in requirements file

---

_Issue opened by @sergei-maertens on 2024-02-16 09:29_

This obviously works on pip + pip-tools which we use.

Our relevant `base.in`:

```
# other dependencies

# see https://github.com/onelogin/python3-saml/issues/292 and
# https://bugs.launchpad.net/lxml/+bug/1960668 -> we can avoid this by compiling lxml
# against the system libxml2
--no-binary lxml
lxml

# other dependencies
```

which results in the `base.txt`:

```
#
# This file is autogenerated by pip-compile with Python 3.10
# by the following command:
#
#    ./bin/compile_dependencies.sh
#
--no-binary lxml

# ... actual dependencies
```

pip-tools can produce this file, but `uv pip compile` doesn't understand this option:

```
(open-forms) âžœ  open-forms git:(chore/1052-remove-defusedxml) uv pip compile requirements/base.in                 
error: Unexpected '-', expected '-c', '-e', '-r' or the start of a requirement in `requirements/base.in` at position 306
```

**Details**

Repository is https://github.com/open-formulieren/open-forms so you can take a look at the requirements files yourself (and the `./bin/compile_dependencies.sh` script).

```
$ python --version
Python 3.10.13
$ uv --version
uv 0.1.2
```

Running in a pre-existing virtualenv.

---

_Comment by @sergei-maertens on 2024-02-16 09:32_

I should've searched better, this is related to #1332 and #977

---

_Comment by @charliermarsh on 2024-02-16 14:50_

Ah yeah, I think this is a separate issue. We don't support _all_ flags in `requirements.txt`, only a subset. We could consider adding this one.

---

_Label `enhancement` added by @charliermarsh on 2024-02-16 14:51_

---

_Label `compatibility` added by @charliermarsh on 2024-02-16 14:51_

---

_Comment by @felipewove on 2024-02-16 15:01_

+1

All my projects with postgres I use a smaller lib from psycopg2 and uv doesn't support `--no-binary` yet

```
psycopg2==2.9.9 --no-binary psycopg2
```

---

_Comment by @charliermarsh on 2024-02-16 15:22_

@felipewove -- Just to clarify, we do support `--no-binary` on the command-line, like `uv pip install psycopg2==2.9.9 --no-binary psycopg2`. We just don't support it _within_ a requirements file yet.

---

_Comment by @felipewove on 2024-02-16 16:31_

@charliermarsh got it, thanks!

I have it automated on my containers, so I'll make some workaround just for some env to test UV ;)

---

_Referenced in [astral-sh/uv#1687](../../astral-sh/uv/issues/1687.md) on 2024-02-19 14:30_

---

_Referenced in [astral-sh/uv#2594](../../astral-sh/uv/issues/2594.md) on 2024-03-21 17:39_

---

_Comment by @feelmyears on 2024-03-26 22:16_

Hi is there any update on supporting `--no-binary` in a requirements file?

---

_Comment by @charliermarsh on 2024-03-26 22:36_

I can probably add support for this, it's come up multiple times now.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-03-26 22:36_

---

_Referenced in [astral-sh/uv#2680](../../astral-sh/uv/pulls/2680.md) on 2024-03-27 00:01_

---

_Closed by @charliermarsh on 2024-03-27 01:12_

---

_Referenced in [astral-sh/uv#4420](../../astral-sh/uv/issues/4420.md) on 2024-06-19 21:51_

---
