---
number: 3766
title: Yank warning not shown for cached / existing packages
type: issue
state: closed
author: notatallshaw-gts
labels:
  - question
assignees: []
created_at: 2024-05-22T20:02:19Z
updated_at: 2024-05-22T21:21:38Z
url: https://github.com/astral-sh/uv/issues/3766
synced_at: 2026-01-07T13:12:17-06:00
---

# Yank warning not shown for cached / existing packages

---

_Issue opened by @notatallshaw-gts on 2024-05-22 20:02_

This is presumably related to https://github.com/astral-sh/uv/issues/3703, not only do I not see the yank message in `uv pip compile` or `uv pip install --dry-run`. I no longer see it in `uv pip install`
```
$ uv -V
uv 0.2.0

$ echo "python-daemon==2.3.1" | uv pip compile -
Resolved 4 packages in 5ms
# This file was autogenerated by uv via the following command:
#    uv pip compile -
docutils==0.21.2
    # via python-daemon
lockfile==0.12.2
    # via python-daemon
python-daemon==2.3.1
setuptools==70.0.0
    # via python-daemon

$ uv pip install --dry-run  "python-daemon==2.3.1"
Resolved 4 packages in 3ms
Would install 3 packages
 + docutils==0.21.2
 + lockfile==0.12.2
 + python-daemon==2.3.1

$ uv pip install  "python-daemon==2.3.1"
Resolved 4 packages in 3ms
Installed 3 packages in 139ms
 + docutils==0.21.2
 + lockfile==0.12.2
 + python-daemon==2.3.1
```

pip displays this message:

```
$ pip install --dry-run  "python-daemon==2.3.1"
Collecting python-daemon==2.3.1
  Using cached python_daemon-2.3.1-py2.py3-none-any.whl.metadata (1.7 kB)
Collecting docutils (from python-daemon==2.3.1)
  Using cached docutils-0.21.2-py3-none-any.whl.metadata (2.8 kB)
Collecting lockfile>=0.10 (from python-daemon==2.3.1)
  Using cached lockfile-0.12.2-py2.py3-none-any.whl.metadata (2.4 kB)
Requirement already satisfied: setuptools in ./.venv/lib/python3.11/site-packages (from python-daemon==2.3.1) (65.5.0)
WARNING: The candidate selected for download or install is a yanked version: 'python-daemon' candidate (version 2.3.1 at https://files.pythonhosted.org/packages/aa/b0/bc79d8ff019c2583d839e0143b1f91eafd4cfe92f86fb9d378a515dfb612/python_daemon-2.3.1-py2.py3-none-any.whl (from https://pypi.org/simple/python-daemon/))
Reason for being yanked: Incorrectly declares Python 2 support
Using cached python_daemon-2.3.1-py2.py3-none-any.whl (34 kB)
Using cached lockfile-0.12.2-py2.py3-none-any.whl (13 kB)
Using cached docutils-0.21.2-py3-none-any.whl (587 kB)
Would install docutils-0.21.2 lockfile-0.12.2 python-daemon-2.3.1
```

---

_Comment by @charliermarsh on 2024-05-22 20:05_

I don't think there's any regression here -- we don't show it if the package is cached. That's a separate issue and has always been true. I see it just fine:

```
‚ùØ cargo run pip install "python-daemon==2.3.1" --no-cache
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.15s
     Running `target/debug/uv pip install python-daemon==2.3.1 --no-cache`
Resolved 4 packages in 237ms
Downloaded 4 packages in 134ms
Installed 4 packages in 12ms
 + docutils==0.21.2
 + lockfile==0.12.2
 + python-daemon==2.3.1
 + setuptools==70.0.0
warning: python-daemon==2.3.1 is yanked (reason: "Incorrectly declares Python 2 support").
```

---

_Label `question` added by @zanieb on 2024-05-22 20:05_

---

_Comment by @zanieb on 2024-05-22 20:05_

We have a TODO for this in the code, is there an issue tracking it somewhere?

---

_Comment by @charliermarsh on 2024-05-22 20:06_

Let's just use this issue?

---

_Renamed from "uv 0.2.0 no longer displaying yank message" to "Show yank warnings for cached packages" by @charliermarsh on 2024-05-22 20:07_

---

_Comment by @charliermarsh on 2024-05-22 20:07_

I don't know if we ever showed yanks for `pip compile`.

---

_Renamed from "Show yank warnings for cached packages" to "Yank warning not shown for cached / existing packages" by @zanieb on 2024-05-22 20:07_

---

_Comment by @notatallshaw-gts on 2024-05-22 20:09_

You are right, there are two issues here, yank message is not displayed when cached, https://github.com/astral-sh/uv/issues/3703 was closed but request to add to yank message to `uv pip compile` seemed to missed (or decided against but not communicated?).

I can open a second issue for the latter.

---

_Comment by @charliermarsh on 2024-05-22 20:09_

I think I just missed it in #3703. Mind opening a separate issue for pip compile? It can just link here. I'll add the behavior now. Thanks.

---

_Referenced in [astral-sh/uv#3772](../../astral-sh/uv/pulls/3772.md) on 2024-05-22 20:34_

---

_Closed by @charliermarsh on 2024-05-22 21:21_

---
