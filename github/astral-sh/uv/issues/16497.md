---
number: 16497
title: "Allow `uv version` to use a non-PEP440-compliant version"
type: issue
state: open
author: AgentK9
labels:
  - enhancement
assignees: []
created_at: 2025-10-29T14:55:00Z
updated_at: 2025-12-02T15:35:53Z
url: https://github.com/astral-sh/uv/issues/16497
synced_at: 2026-01-07T12:31:16-06:00
---

# Allow `uv version` to use a non-PEP440-compliant version

---

_Issue opened by @AgentK9 on 2025-10-29 14:55_

### Summary

While it makes sense for `uv version` to be PEP440-compliant by default, allowing for non-compliant versions would help for cases where the version comes from another source (in my case, a `version.txt` generated by `git describe --tags`, which can result in a version like `1.2.3-1-gabcdefgh`).

This should be a config option and not the default, but would also be a potential step towards #14037.

Currently, using a version like this results in an error like: `error: after parsing 1.2.3-1, found -gabcdefgh, which is not part of a valid version`


### Example

Add a `--ignore-pep440` option to `uv version`, usable like so: `uv version --ignore-pep440 1.2.3-1-gabcdefgh`.
Ideally, also allow it to be configured as an env var: `UV_VERSION_IGNORE_PEP440`.

---

_Label `enhancement` added by @AgentK9 on 2025-10-29 14:55_

---

_Comment by @zanieb on 2025-10-29 15:00_

The argument here is that we should be able to write a non-PEP 440 compliant version to the `project.version` field?

Why not process your git-derived version to be PEP 440 compliant? e.g., I've written a utility for this before https://github.com/zanieb/poetry-relax/blob/main/scripts/version

---

_Comment by @zanieb on 2025-10-30 14:23_

This is related to 

- https://github.com/astral-sh/uv/issues/14353

---

_Comment by @AgentK9 on 2025-12-02 15:27_

for anyone else looking for a solution, this is how I fixed:

`uv version $(git describe --tags | sed -E 's/-([0-9]+)-g([0-9a-f]+)$/+\1.\2/')`

---

_Comment by @AgentK9 on 2025-12-02 15:35_

I think that my actual ask for this ticket is for uv to do this sort of thing out of the box - like `uv version --from-git` or something.

---
