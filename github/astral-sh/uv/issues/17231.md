---
number: 17231
title: Conditional dependency based on platform
type: issue
state: closed
author: setoelkahfi
labels:
  - question
assignees: []
created_at: 2025-12-23T18:22:30Z
updated_at: 2025-12-23T21:36:52Z
url: https://github.com/astral-sh/uv/issues/17231
synced_at: 2026-01-07T12:31:16-06:00
---

# Conditional dependency based on platform

---

_Issue opened by @setoelkahfi on 2025-12-23 18:22_

### Question

I have this deps array:

```toml
dependencies = [
    "demucs>=4.0.1",
    "ffmpeg-python>=0.2.0",
    "librosa>=0.11.0",
    "parakeet-mlx>=0.4.1",
    "torchcodec>=0.9.1",
    # more deps
]
```
and obviously it doesn't work on my Debian/Linux server because of `parakeet-mlx`:

```bash
error: Distribution `mlx==0.30.1 @ registry+https://pypi.org/simple` can't be installed because it doesn't have a source distribution or wheel for the current platform

hint: You're on Linux (`manylinux_2_31_x86_64`), but `mlx` (v0.30.1) only has wheels for the following platforms: `manylinux_2_35_aarch64`, `manylinux_2_35_x86_64`, `macosx_14_0_arm64`, `macosx_15_0_arm64`, `macosx_26_0_arm64`; consider adding "sys_platform == 'linux' and platform_machine == 'x86_64'" to `tool.uv.required-environments` to ensure uv resolves to a version with compatible wheels
```


I'm wondering if it's possible to specify per platform dependency like in `Cargo` file?

### Platform

_No response_

### Version

_No response_

---

_Label `question` added by @setoelkahfi on 2025-12-23 18:22_

---

_Comment by @dijor0310 on 2025-12-23 19:53_

Are you looking for this? https://docs.astral.sh/uv/concepts/projects/dependencies/#platform-specific-dependencies

---

_Comment by @charliermarsh on 2025-12-23 21:36_

Yeah, something like:
```toml
dependencies = [
    "demucs>=4.0.1",
    "ffmpeg-python>=0.2.0",
    "librosa>=0.11.0",
    "parakeet-mlx>=0.4.1 ; sys_platform == 'darwin'",
    "torchcodec>=0.9.1",
    # more deps
]
```

More on the marker grammar [here](https://peps.python.org/pep-0508/#environment-markers).

---

_Closed by @charliermarsh on 2025-12-23 21:36_

---
