---
number: 1393
title: uv pip install fails for private index based on Artifactory
type: issue
state: closed
author: gaborbernat
labels:
  - bug
  - registry
assignees: []
created_at: 2024-02-15T23:58:42Z
updated_at: 2024-02-19T02:00:08Z
url: https://github.com/astral-sh/uv/issues/1393
synced_at: 2026-01-07T12:31:14-06:00
---

# uv pip install fails for private index based on Artifactory

---

_Issue opened by @gaborbernat on 2024-02-15 23:58_

Fails with uv:
```bash
‚ùØ uv pip install --index-url https://magic.com/artifactory/api/pypi/internal-pypi/simple tomli==2.0.1
error: Failed to download: tomli==2.0.1
  Caused by: HTTP status client error (404 Not Found) for url (https://magic.com/artifactory/api/pypi/packages/packages/97/75/10a9ebee3fd790d20926a90a2547f0bf78f371b2f13aa822c759680ca7b9/tomli-2.0.1-py3-none-any.whl#sha256=939de3e7a6161af0c887ef91b7d41a53e7c5a1ca976325f429cb46ea9bc30ecc)
```

Works with pip:

```bash
‚ùØ venv/bin/pip install --index-url https://magic.com/artifactory/api/pypi/internal-pypi/simple tomli==2.0.1
Looking in indexes: https://magic.com/artifactory/api/pypi/internal-pypi/simple
Collecting tomli==2.0.1
  Using cached https://magic.com/artifactory/api/pypi/internal-pypi/packages/packages/97/75/10a9ebee3fd790d20926a90a2547f0bf78f371b2f13aa822c759680ca7b9/tomli-2.0.1-py3-none-any.whl (12 kB)
Installing collected packages: tomli
```

Seems the formed URL is malformed...

---

_Renamed from "Fails for private index based of Artifactory" to "uv pip install fails for private index based on Artifactory" by @gaborbernat on 2024-02-15 23:59_

---

_Label `bug` added by @zanieb on 2024-02-16 00:24_

---

_Label `index` added by @zanieb on 2024-02-16 00:24_

---

_Comment by @tafia on 2024-02-16 01:37_

Same here.
Also would it be possible to get /etc/pip.conf configuration automatically? (for a drop-in replacement?)

---

_Comment by @zanieb on 2024-02-16 01:59_

Sorry to hear you're encountering it too! See #1404 for `pip.conf`.

---

_Comment by @tafia on 2024-02-16 02:47_

No worries at all!! Thanks for the great work!

---

_Comment by @zanieb on 2024-02-16 04:41_

I believe this is an authentication problem (hence the 404) the URL doesn't look malformed to me.

---

_Comment by @gaborbernat on 2024-02-16 05:11_

I'm not as sure. If it would an authentication issue, it would be 403, not 404. Note the two different URLs uv and pip tries to download:


```diff
+ https://magic.com/artifactory/api/pypi/packages/packages/97/75/10a9ebee3fd790d20926a90a2547f0bf78f371b2f13aa822c759680ca7b9/tomli-2.0.1-py3-none-any.whl
- https://magic.com/artifactory/api/pypi/internal-pypi/packages/packages/97/75/10a9ebee3fd790d20926a90a2547f0bf78f371b2f13aa822c759680ca7b9/tomli-2.0.1-py3-none-any.whl
```

Or if I align it up for you:

```diff
+ https://magic.com/artifactory/api/pypi              /packages/packages/97/75/10a9ebee3fd790d20926a90a2547f0bf78f371b2f13aa822c759680ca7b9/tomli-2.0.1-py3-none-any.whl
- https://magic.com/artifactory/api/pypi/internal-pypi/packages/packages/97/75/10a9ebee3fd790d20926a90a2547f0bf78f371b2f13aa822c759680ca7b9/tomli-2.0.1-py3-none-any.whl
```

---

_Comment by @charliermarsh on 2024-02-16 05:16_

My guess is that this is the same as https://github.com/astral-sh/uv/pull/1413 since we're missing a segment.

---

_Comment by @zanieb on 2024-02-16 05:19_

Oh thanks for lining those up for me! I stared at these pretty hard and somehow missed that... I'm unsure if #1413 will resolve this as well, if not it's probably the same kind of bug and we can track down the invalid join.

---

_Comment by @gaborbernat on 2024-02-16 16:45_

Let me build a release of uv and check ü§î 

---

_Comment by @gaborbernat on 2024-02-16 16:52_

Can confirm it fixes it üëç 

```
‚ùØ target/release/uv pip install tomli
Resolved 1 package in 2.12s
Downloaded 1 package in 562ms
Installed 1 package in 2ms
 + tomli==2.0.1
```

---

_Closed by @gaborbernat on 2024-02-16 16:52_

---

_Referenced in [astral-sh/uv#1528](../../astral-sh/uv/issues/1528.md) on 2024-02-16 19:42_

---

_Comment by @tafia on 2024-02-19 02:00_

Working for me too!
Thanks!

---

_Referenced in [astral-sh/uv#11102](../../astral-sh/uv/issues/11102.md) on 2025-01-30 17:06_

---
