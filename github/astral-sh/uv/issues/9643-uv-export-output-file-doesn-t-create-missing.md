---
number: 9643
title: "`uv export --output-file` doesn't create missing directories"
type: issue
state: closed
author: quantike
labels:
  - bug
  - help wanted
assignees: []
created_at: 2024-12-04T17:36:43Z
updated_at: 2024-12-04T21:20:32Z
url: https://github.com/astral-sh/uv/issues/9643
synced_at: 2026-01-07T13:12:18-06:00
---

# `uv export --output-file` doesn't create missing directories

---

_Issue opened by @quantike on 2024-12-04 17:36_

## The Issue

I am refactoring a repo to migrate it from `poetry` to `uv`, as part of that, I needed to update some `requirements.txt` scripts we have that expect an output-file that sits within a `requirements/` directory (where we store the various requirement groups (test, lint, dev, etc). I noticed that when running `uv export ... --output-file=/requirements/requirements.txt` I always get an error that `No such file or directory (os error 2) at path "/requirements/.tmpYUAKgT"`.  Interestingly, when I remove the `requirements/` (`--output-file=requirements.txt`), the command works perfectly fine.

For reference here is the same command in `poetry` parlance:

```sh
poetry export --without-hashes -f requirements.txt -o requirements/requirements.txt --without dev --without test
```

The current workaround is an additional step in the script to `mv` the outputs to the `requirements/` directory, but I feel like being able to specify an output directory would be within scope of `uv export`. 

Please let me know if 
1. I am not using `uv export` as intended
2. not using `--output-file` as intend
3. if a better option would be to support `--output-path` or `--output-dir` in the `uv-export` command

## System and Error Information

* The version of `uv`

```sh
$ uv --version
uv 0.5.6 (b70c4f30e 2024-12-03)
```

* The operating system: MacOS Sequoia 15.1.1
* The command that I ran

```sh
uv export --no-dev --no-hashes --frozen --output-file=/requirements/requirements.txt
```

* The output of the command with the `--verbose` flag

```sh
DEBUG uv 0.5.6 (b70c4f30e 2024-12-03)
DEBUG Found project root: `/Users/...<anonymized>.../event_horizon`
DEBUG No workspace root found, using project root
# This file was autogenerated by uv via the following command:
#    uv export --no-dev --no-hashes --frozen --output-file=/requirements/requirements.txt
aiohappyeyeballs==2.4.4
aiohttp==3.11.9
aiosignal==1.3.1
annotated-types==0.7.0
anyio==4.6.2.post1
asyncpg==0.30.0
attrs==24.2.0
boto3==1.35.74
botocore==1.35.74
certifi==2024.8.30
charset-normalizer==3.4.0
colorama==0.4.6 ; platform_system == 'Windows'
debugpy==1.8.9
filelock==3.16.1
frozenlist==1.5.0
fsspec==2024.10.0
h11==0.14.0
httpcore==1.0.7
httpx==0.28.0
huggingface-hub==0.26.3
idna==3.10
jmespath==1.0.1
jsonpatch==1.33
jsonpointer==3.0.0
langchain-core==0.3.21
langchain-text-splitters==0.3.2
langsmith==0.1.147
multidict==6.1.0
numpy==2.1.3
orjson==3.10.12
packaging==24.2
pgvector==0.3.6
propcache==0.2.1
pydantic==2.10.3
pydantic-core==2.27.1
python-dateutil==2.9.0.post0
python-dotenv==1.0.1
pyyaml==6.0.2
regex==2024.11.6
requests==2.32.3
requests-toolbelt==1.0.0
s3transfer==0.10.4
safetensors==0.4.5
six==1.16.0
sniffio==1.3.1
tenacity==9.0.0
tokenizers==0.20.3
tqdm==4.67.1
transformers==4.46.3
typing-extensions==4.12.2
urllib3==2.2.3
uvloop==0.21.0
yarl==1.18.3
error: No such file or directory (os error 2) at path "/requirements/.tmpYUAKgT"
```

## Simple Steps to Reproduce
You can replicate this issue quite easily like so:

```sh
uv init output-file-issue && cd output-file-issue
uv add pydantic 
uv sync
source .venv/bin/activate

# Won't work
uv export --no-dev --no-hashes --frozen --output-file=/requirements/requirements.txt

# Will work
uv export --no-dev --no-hashes --frozen --output-file=requirements.txt
```


---

_Comment by @charliermarsh on 2024-12-04 17:40_

I think we're just not creating the directory before writing, is my guess?

---

_Label `bug` added by @charliermarsh on 2024-12-04 17:40_

---

_Label `help wanted` added by @charliermarsh on 2024-12-04 17:40_

---

_Comment by @quantike on 2024-12-04 17:42_

Actually, the directory already exists: 
```sh
➜  event_horizon git:(refactor-uv) ✗ tree requirements 
requirements
├── requirements.dev.txt
├── requirements.test.txt
└── requirements.txt

1 directory, 3 files
```
Based on my understanding, this should work? 

In the "Steps to Reproduce" you can add `mkdir requirements` and still get the same issue as I get in my repo. 

---

_Comment by @quantike on 2024-12-04 17:46_

But, if your suggestion is that `uv` should make that directory if it doesn't exist, I agree. I might be able to open a PR to solve, but I am unfamiliar with the codebase. Happy to contribute though. 

---

_Comment by @zanieb on 2024-12-04 18:24_

I presume it's because you're using `/`?

```
❯ uv export --no-dev --no-hashes --frozen --output-file=./requirements/requirements.txt
# This file was autogenerated by uv via the following command:
#    uv export --no-dev --no-hashes --frozen --output-file=./requirements/requirements.txt
anyio==4.6.2.post1
certifi==2024.8.30
h11==0.14.0
httpcore==1.0.7
httpx==0.28.0
idna==3.10
sniffio==1.3.1
error: No such file or directory (os error 2) at path "/Users/zb/workspace/uv/example/./requirements/.tmproppgD"
❯ mkdir requirements
❯ uv export --no-dev --no-hashes --frozen --output-file=./requirements/requirements.txt
# This file was autogenerated by uv via the following command:
#    uv export --no-dev --no-hashes --frozen --output-file=./requirements/requirements.txt
anyio==4.6.2.post1
certifi==2024.8.30
h11==0.14.0
httpcore==1.0.7
httpx==0.28.0
idna==3.10
sniffio==1.3.1
❯ uv export --no-dev --no-hashes --frozen --output-file=/requirements/requirements.txt
# This file was autogenerated by uv via the following command:
#    uv export --no-dev --no-hashes --frozen --output-file=/requirements/requirements.txt
anyio==4.6.2.post1
certifi==2024.8.30
h11==0.14.0
httpcore==1.0.7
httpx==0.28.0
idna==3.10
sniffio==1.3.1
error: No such file or directory (os error 2) at path "/requirements/.tmpbhiktA"
```

---

_Comment by @charliermarsh on 2024-12-04 18:29_

Oh, yeah, that part seems like a user error?

---

_Comment by @quantike on 2024-12-04 19:30_

Yup that fixes it--user error. 

Thank you for the help.

## Solve
```sh
# Add `./` to output-file
uv export --no-dev --no-hashes --frozen --output-file=./requirements/requirements.txt
```


---

_Renamed from "`uv export --output-file` doesn't support file paths with a local directory to the project" to "`uv export --output-file` doesn't create missing directories" by @zanieb on 2024-12-04 19:32_

---

_Referenced in [astral-sh/uv#9648](../../astral-sh/uv/pulls/9648.md) on 2024-12-04 20:40_

---

_Closed by @zanieb on 2024-12-04 21:20_

---

_Closed by @zanieb on 2024-12-04 21:20_

---
