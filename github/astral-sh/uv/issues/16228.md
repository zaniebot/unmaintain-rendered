---
number: 16228
title: hatching build suddenly not working anymore in docker
type: issue
state: closed
author: ion-elgreco
labels:
  - bug
assignees: []
created_at: 2025-10-10T14:21:36Z
updated_at: 2025-11-06T12:54:13Z
url: https://github.com/astral-sh/uv/issues/16228
synced_at: 2026-01-07T12:31:16-06:00
---

# hatching build suddenly not working anymore in docker

---

_Issue opened by @ion-elgreco on 2025-10-10 14:21_

### Summary

For some reason, hatchling is not working properly. I can see in the verbose logs it's installed but then fails to called `hatchling.build`. It worked before fine.

My toml has this:
```toml
[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

```
Trace when building:

```
DEBUG Installing in pluggy==1.6.0, hatchling==1.27.0, trove-classifiers==2025.9.11.17, packaging==25.0, pathspec==0.12.1 in /root/.cache/uv/builds-v0/.tmpmOkUJN
DEBUG Registry requirement already cached: pluggy==1.6.0
DEBUG Registry requirement already cached: hatchling==1.27.0
DEBUG Registry requirement already cached: trove-classifiers==2025.9.11.17
DEBUG Registry requirement already cached: packaging==25.0
DEBUG Registry requirement already cached: pathspec==0.12.1
DEBUG Installing build requirements: pluggy==1.6.0, hatchling==1.27.0, trove-classifiers==2025.9.11.17, packaging==25.0, pathspec==0.12.1
DEBUG Creating PEP 517 build environment
DEBUG Calling `hatchling.build.get_requires_for_build_editable()`
DEBUG Traceback (most recent call last):
DEBUG   File "<string>", line 8, in <module>
DEBUG ModuleNotFoundError: No module named 'hatchling.build'
DEBUG Released lock at `/root/.cache/uv/sdists-v9/editable/2d824ef2eb635cc1/.lock`
  × Failed to build `doc @ file:///APP/libraries/doc`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `hatchling.build.build_editable` failed (exit status: 1)

      [stderr]
      Traceback (most recent call last):
        File "<string>", line 8, in <module>
      ModuleNotFoundError: No module named 'hatchling.build'

      hint: This error likely indicates that `doc@0.1.0` depends on
      `hatchling.build`, but doesn't declare it as a build dependency. If
      `doc` is a first-party package, consider adding `hatchling.build`
      to its `build-system.requires`. Otherwise, either add it to your
      `pyproject.toml` under:

      [tool.uv.extra-build-dependencies]
      doc = ["hatchling.build"]

      or `uv pip install hatchling.build` into the environment and re-run with
      `--no-build-isolation`.
```

### Platform

macOS14 arm64

### Version

0.9.1

### Python version

3.12

---

_Label `bug` added by @ion-elgreco on 2025-10-10 14:21_

---

_Comment by @ion-elgreco on 2025-10-10 14:31_

Some extra info, when I do `uv sync --package <>` it works fine, but when I do it while building the container it fails.

---

_Renamed from "hatching build suddenly not working anymore" to "hatching build suddenly not working anymore in docker" by @ion-elgreco on 2025-10-10 14:33_

---

_Comment by @ion-elgreco on 2025-10-10 14:52_

Figured it out, something is wrong with my cache mount...  (`--mount=type=cache,target=/root/.cache/uv`)

---

_Comment by @zanieb on 2025-10-10 15:40_

Perhaps your cache is corrupted? If you `uv cache clean` does it work?

---

_Comment by @ion-elgreco on 2025-10-10 21:49_

> Perhaps your cache is corrupted? If you `uv cache clean` does it work?

Yes it was corrupted. Uv cache clean didn't work because the podman dirs were corrupted for some reason. Resetting podman machine and purging everything did the trick. But oh my, this was annoying to track down 

---

_Closed by @ion-elgreco on 2025-10-10 21:49_

---

_Comment by @jakthra on 2025-11-06 07:48_

Happened to me as well. Pruning the volumes was not enough - had to reset the podman machine. Pruning the builder is also enough it seems:

```
podman builder prune -a --external 
```

---
