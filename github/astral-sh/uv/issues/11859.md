---
number: 11859
title: Inverting a requirements.txt
type: issue
state: closed
author: EricDepagne
labels:
  - enhancement
  - wish
assignees: []
created_at: 2025-02-28T15:43:40Z
updated_at: 2025-03-01T15:23:20Z
url: https://github.com/astral-sh/uv/issues/11859
synced_at: 2026-01-07T12:31:15-06:00
---

# Inverting a requirements.txt

---

_Issue opened by @EricDepagne on 2025-02-28 15:43_

### Summary

I have inherited a project that was built without a requirements.in file, and the only thing I have is the list of installed packages.
To create the requirements.txt, my current strategy (and probably the only one currently), is to add packages in a requirements.in file, compile it and compare it to the list of installed packages, until I have them all.

I was wondering if it would be possible to have uv do that task for me.

### Example

`uv pip compile requirements.in ` produces a requirements.txt.
`uv pip list --format freeze > Reqs.txt` generates a list of all the modules installed in the virtual environment.
`uv pip compile --invert Reqs.txt -o requirements.in` could generate the requirements.in file that would produce requirements.txt when used with `uv pip compile`

---

_Label `enhancement` added by @EricDepagne on 2025-02-28 15:43_

---

_Label `wish` added by @zanieb on 2025-02-28 17:46_

---

_Comment by @zanieb on 2025-02-28 17:48_

I don't think this is possible, e.g., given

```
❯ echo "anyio>0.1.0" | uv pip compile -
Resolved 3 packages in 77ms
# This file was autogenerated by uv via the following command:
#    uv pip compile -
anyio==4.8.0
idna==3.10
    # via anyio
sniffio==1.3.1
    # via anyio
```

We don't retain the version constraints.

We also lose track of first-order dependencies, e.g., this does not show that `idna` was explicitly requested

```
❯ echo "anyio>0.1.0\nidna" | uv pip compile -
Resolved 3 packages in 1ms
# This file was autogenerated by uv via the following command:
#    uv pip compile -
anyio==4.8.0
idna==3.10
    # via anyio
sniffio==1.3.1
    # via anyio
```

Your best bet is probably to take all the packages with comments after them, and drop them. Then take the remaining packages and change `==` to `>=`. e.g., the above would become

```
anyio>=4.8.0
```

---

_Comment by @EricDepagne on 2025-02-28 18:06_

Thanks @zanieb for the explanation.
The list I have just lists the package and the version, coming from `uv pip list --format freeze` : 
```
[snip]
pillow               10.4.0
pip                  24.3.1
[snip]
```
Then,` using `uv pip show <package>` I know if a package is required by another or not, so in the file becomes after manually editing each line:
```
[snip]
pillow               10.4.0
    bokeh, matplotlib
pip                  24.3.1

[snip]

```
My plan is then to find what are the packages that install all other (those who do not require any package to be installed), and then put those in my `requirements.in`.
I thought that as `uv` could do that :) 

---

_Comment by @EricDepagne on 2025-02-28 18:09_

That said, I see with another package that my strategy will probably not work, as there are some circular dependencies:
```
poetry               1.8.3
    poetry-plugin-export
poetry-core          1.9.0
    poetry, poetry-plugin-export
poetry-plugin-export 1.8.0
    poetry
```


---

_Closed by @EricDepagne on 2025-03-01 15:23_

---
