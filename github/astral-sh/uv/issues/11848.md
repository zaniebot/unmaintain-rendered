---
number: 11848
title: "pip compile: explicit index + requirements.in"
type: issue
state: closed
author: juftin
labels:
  - question
assignees: []
created_at: 2025-02-28T04:15:36Z
updated_at: 2025-03-03T03:16:38Z
url: https://github.com/astral-sh/uv/issues/11848
synced_at: 2026-01-07T12:31:15-06:00
---

# pip compile: explicit index + requirements.in

---

_Issue opened by @juftin on 2025-02-28 04:15_

### Summary

I've found that explicit indexes aren't compatible with dependencies defined in a `requirements.in` file. I would expect `uv pip compile requirements.in` to work - I've used [pyproject from test.pypi.org](https://test.pypi.org/project/pyproject/0.0.1/) and [uv from pypi.org](https://pypi.org/project/uv/0.6.3/) as an example:

```txt
uv==0.6.3
pyproject==0.0.1
```

```toml
[tool.uv.sources]
uv = { index = "pypi" }
pyproject = { index = "test" }

[[tool.uv.index]]
name = "test"
url = "https://test.pypi.org/simple/"
explicit = true

[[tool.uv.index]]
name = "pypi"
url = "https://pypi.org/simple/"
explicit = true
```

```console
❯ uv pip compile requirements.in
  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of pyproject==0.0.1 and you require pyproject==0.0.1, we can conclude that your requirements are unsatisfiable.
```

----- 

On the other hand, this works just fine when running from a `pyproject.toml`:

```toml
[project]
name = "test"
version = "0.1.0"
dependencies = [
    "uv==0.6.3",
    "pyproject==0.0.1",
]

[tool.uv.sources]
uv = { index = "pypi" }
pyproject = { index = "test" }

[[tool.uv.index]]
name = "test"
url = "https://test.pypi.org/simple/"
explicit = true

[[tool.uv.index]]
name = "pypi"
url = "https://pypi.org/simple/"
explicit = true
```

```console
❯ uv pip compile pyproject.toml
Resolved 2 packages in 16ms
# This file was autogenerated by uv via the following command:
#    uv pip compile pyproject.toml
pyproject==0.0.1
    # via test (pyproject.toml)
uv==0.6.3
    # via test (pyproject.toml)
```

### Platform

macOS 14

### Version

uv 0.6.3 (a0b9f22a2 2025-02-24)

### Python version

3.12.0

---

_Label `bug` added by @juftin on 2025-02-28 04:15_

---

_Referenced in [juftin/hatch-pip-compile#90](../../juftin/hatch-pip-compile/issues/90.md) on 2025-02-28 04:16_

---

_Comment by @charliermarsh on 2025-02-28 14:07_

We don't apply `tool.uv.sources` like this -- they're only applied to requirements defined within the same `pyproject.toml`. This is an intentional behavior.

---

_Label `bug` removed by @charliermarsh on 2025-02-28 14:07_

---

_Label `question` added by @charliermarsh on 2025-02-28 14:07_

---

_Assigned to @charliermarsh by @charliermarsh on 2025-02-28 14:09_

---

_Comment by @juftin on 2025-02-28 17:50_

>  This is an intentional behavior.

Gotcha, I thought that might be the case. Thanks for the clarification here. Much appreciated!



---

_Comment by @charliermarsh on 2025-03-03 03:16_

No prob!

---

_Closed by @charliermarsh on 2025-03-03 03:16_

---
