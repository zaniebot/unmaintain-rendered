---
number: 17335
title: UV_INIT_BUILD_BACKEND invalidates --app flag
type: issue
state: open
author: jpkolsen
labels:
  - bug
assignees: []
created_at: 2026-01-06T14:00:13Z
updated_at: 2026-01-07T07:33:10Z
url: https://github.com/astral-sh/uv/issues/17335
synced_at: 2026-01-07T12:31:16-06:00
---

# UV_INIT_BUILD_BACKEND invalidates --app flag

---

_Issue opened by @jpkolsen on 2026-01-06 14:00_

### Summary

According to [the docs](https://docs.astral.sh/uv/concepts/projects/init/#applications) "Applications are the default target for `uv init`, but can also be specified with the `--app` flag". There is at least one case where applying this flag does not result in the project being initialized with the flat app-like structure, and that is if a build system is specified either with a cli flag or with an environment variable. Indeed it is unclear to me in which case that flag does make a difference to the behaviour of `uv init`.

Relevance:
For reasons beyond the scope here, I want to use setuptools as my default build backend when creating packages, so I added `export UV_INIT_BUILD_BACKEND=setuptools` to `~/.bashrc`. However, this makes it so `uv init` always creates a project structure matching a package, even if I use the `--app` flag.

Repro:
```
$ unset UV_INIT_BUILD_BACKEND
$ uv init my_app; ls my_app
Initialized project `my-app` at `/Users/jpko/uvtest/my_app`
main.py		pyproject.toml	README.md
$ UV_INIT_BUILD_BACKEND=setuptools uv init my_package; ls my_package
Initialized project `my-package` at `/Users/jpko/uvtest/my_package`
pyproject.toml	README.md	src
$ UV_INIT_BUILD_BACKEND=setuptools uv init not_an_app --app; ls not_an_app
Initialized project `not-an-app` at `/Users/jpko/uvtest/not_an_app`
pyproject.toml	README.md	src
```

### Platform

MacOS (Darwin 25.2.0 arm64)

### Version

uv 0.9.22 (Homebrew 2026-01-06)

### Python version

Python 3.12.11

---

_Label `bug` added by @jpkolsen on 2026-01-06 14:00_

---

_Comment by @konstin on 2026-01-06 16:46_

This is intentional, as a build backend implies a package structure:

>       --build-backend <BUILD_BACKEND>
>          Initialize a build-backend of choice for the project.
>          
>          Implicitly sets `--package`.

What I think is missing here is that `--app` should conflict with `--build-backend` and `--package`.

---

_Comment by @jpkolsen on 2026-01-07 07:33_

Gotcha, thanks! I thought something like that might be the case - it certainly makes sense that you would never apply both `--build-backend` and `--app` cli flags, however I was unsure if the effects of `--build-backend` and `$UV_INIT_BUILD_BACKEND` were exactly the same. In my opinion there's a valid use case for configuring a default setup for packages in your environment, while still being able to specify an application on `uv init`, but I guess that's technically not a bug.

As mentioned above, it makes it unclear if `--app` is ever applicable? It appears `uv init` either defaults to application mode (in which case the `--app` flag is superfluous) or another flag or environment variable specifies package (in which case the `--app` flag should conflict). What am I missing here?

---
