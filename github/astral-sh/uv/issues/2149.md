---
number: 2149
title: "Invalid wheel: pip OK but uv KO"
type: issue
state: closed
author: AntoineD
labels:
  - bug
  - compatibility
assignees: []
created_at: 2024-03-04T09:50:37Z
updated_at: 2024-03-04T19:39:02Z
url: https://github.com/astral-sh/uv/issues/2149
synced_at: 2026-01-07T12:31:14-06:00
---

# Invalid wheel: pip OK but uv KO

---

_Issue opened by @AntoineD on 2024-03-04 09:50_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->
Hello,

when trying to install the package `openturns`, which is installable with `pip`, I get the following error
```shell
‚ùØ uv pip install openturns   
Resolved 3 packages in 351ms
error: Failed to install: openturns-1.22-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.whl (openturns==1.22)
  Caused by: The wheel is invalid: Line 3 of the WHEEL file is invalid
```
This is the contents of `WHEEL`:
```shell
‚ùØ cat openturns-1.22.dist-info/WHEEL
Wheel-Version: 1.0
Generator: custom
Root-Is-Purelib: false
Tag: 
Tag: -manylinux_2_17_x86_64
Tag: -manylinux2014_x86_64
```

Is this issue on `uv`'s side? 

---

_Comment by @pfmoore on 2024-03-04 11:10_

Pip doesn't check the `WHEEL` file as far as I'm aware, so it looks like `uv` is being more strict here. But line *three* (which is what the error points to) is `Root-Is-Purelib: false`, which is fine. The `Tag` lines, though, *are* invalid - an empty `Tag` isn't valid, and the other two tags seem incomplete (should be `cp312-cp312-manylinux2014_x86_64` and `cp312-cp312-manylinux_2_17_x86_64`).

---

_Referenced in [astral-sh/uv#2151](../../astral-sh/uv/pulls/2151.md) on 2024-03-04 11:50_

---

_Comment by @konstin on 2024-03-04 11:51_

Sorry that's just an off-by-one error separate from this issue, fixed in #2151.

---

_Label `compatibility` added by @charliermarsh on 2024-03-04 14:31_

---

_Label `needs-decision` added by @charliermarsh on 2024-03-04 14:31_

---

_Referenced in [openturns/build-wheels#2](../../openturns/build-wheels/issues/2.md) on 2024-03-04 16:31_

---

_Comment by @zanieb on 2024-03-04 17:07_

Is the alternative here that we ignore all invalid tag entries?

---

_Comment by @pfmoore on 2024-03-04 18:37_

Pip just uses the tags from the wheel filename. The `WHEEL` file is[^1] simply duplicating that information, so we just don't bother reading it. If you're using what's in the `WHEEL` file rather than what's in the filename, then you're going to have to deal with the fact that there might be garbage in there that's never been noticed before, precisely because pip never cared and nobody else bothered validating the data.

[^1]: Or at least *should* be üôÅ

---

_Comment by @konstin on 2024-03-04 18:38_

Thanks for the context! I think we should only warn about invalid `WHEEL` files then.

---

_Comment by @charliermarsh on 2024-03-04 18:49_

Yeah I don't think we _use_ the information, but we do seem to validate it. I actually don't think we even validate the tags, we just choke if the value is empty AFAICT.

---

_Label `needs-decision` removed by @charliermarsh on 2024-03-04 19:21_

---

_Label `bug` added by @charliermarsh on 2024-03-04 19:21_

---

_Assigned to @charliermarsh by @charliermarsh on 2024-03-04 19:21_

---

_Comment by @charliermarsh on 2024-03-04 19:21_

I'll fix this real quick.

---

_Referenced in [astral-sh/uv#2170](../../astral-sh/uv/pulls/2170.md) on 2024-03-04 19:25_

---

_Closed by @charliermarsh on 2024-03-04 19:39_

---

_Referenced in [justin-yan/pybin#13](../../justin-yan/pybin/issues/13.md) on 2024-03-27 22:15_

---
