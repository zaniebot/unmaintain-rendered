---
number: 8302
title: Create best practice example of uv workspace for vscode supporting tests and more
type: issue
state: open
author: NixBiks
labels: []
assignees: []
created_at: 2024-10-17T19:05:54Z
updated_at: 2025-01-30T13:55:32Z
url: https://github.com/astral-sh/uv/issues/8302
synced_at: 2026-01-07T12:31:15-06:00
---

# Create best practice example of uv workspace for vscode supporting tests and more

---

_Issue opened by @NixBiks on 2024-10-17 19:05_

I'm working on a monorepo and trying to make a good developer setup in vscode. I think my use case is pretty common so I'm wondering if it would make sense to create a "best practice" example.

I hope the example supports the following

- [ ]  tests for each app/lib
- [ ]  ability to run tests in a "synced" environment for each particular app/lib - current workaround would be something like `uv sync --package a && uv run --package a --directory packages/a pytest` 
- [ ] add coverage for each app/lib
- [ ] support testing interface in vscode
- [ ] support devcontainer in vscode
- [ ] support docker containerization for the apps
- [ ] maybe exploit vscode workspaces

I imagine the root is not really a package itself but simply configuring the workspace



---

_Comment by @AndreuCodina on 2024-10-17 23:11_

I can help, but TBH I'm tired of DevContainer. It crashes after each Docker update.

---

_Comment by @NixBiks on 2024-10-18 04:39_

> I can help, but TBH I'm tired of DevContainer. It crashes after each Docker update.

Great. Devcontainer can be left out too

---

_Comment by @thorbenk on 2024-10-18 12:58_

Also see https://github.com/astral-sh/uv/issues/6786

---

_Comment by @NixBiks on 2024-10-18 13:59_

I've created this repo for a start: https://github.com/NixBiks/uv-monorepo-template

---

_Comment by @AndreuCodina on 2024-10-21 20:23_

https://github.com/AndreuCodina/python-monorepo

- I've created a monorepo with 2 deployable projects (`api` and `transcriber`).

- WIP, but I have doubts about how I should organize the workspace members and at the same time support Jupyter notebooks.

- `transcriber` is not a library, so it doesn't have `py.typed`, but then when I import code from the notebook, I receive the message `Stub file not found for "transcriber.transcriber_printer"`, and I only can fix it adding the `py.typed` or adding `extraPaths`:

  ```toml
  [tool.pyright]
  typeCheckingMode = "strict"
  extraPaths = ["transcriber/src/"]
  ```

  I dislike both options:

- Each package has its own `src` and `tests`, so I need the package `test_utils` to share builders, etc.

- I could save all packages in a `src` folder, but there're so many `src` folders, so I don't know, and it's strange for me to split libraries and applications, so for the moment I'm putting the projects in the root, as in .NET.

---

_Comment by @TheRealBecks on 2024-12-10 15:23_

Also see #8737

---

_Comment by @mgrinshpon on 2024-12-22 13:44_

@AndreuCodina @NixBiks how are your monorepo designs able to install all packages for all modules without dev containers?

The only workaround I'd been able to find is to add all modules as sources and add them as dev dependencies in the top level project while disabling package building for the top level dir at the top level monorepo:
```toml
[tool.uv]
package = false
```

This repo is doing the same thing https://github.com/JasperHG90/uv-monorepo but by making every project a source, `uv sync --all-extras` now installs all dependencies for the entire repo which is nice for moving between projects rapidly. It also massively reduces the boilerplate per-project. Unfortunately, dependency hierarchies are no longer strictly enforced which feels wrong.

FWIW this all works flawlessly in PyCharm and sort-of in zed.dev but enabling teammates on VSCode, Cursor, and Windsurf without import errors is the remaining struggle.

---

_Comment by @matthewadams on 2025-01-30 13:55_

You might be interested in https://github.com/astral-sh/uv/issues/10960

---

_Referenced in [Vibrant-Planet/geografir#16](../../Vibrant-Planet/geografir/pulls/16.md) on 2025-09-03 22:47_

---
