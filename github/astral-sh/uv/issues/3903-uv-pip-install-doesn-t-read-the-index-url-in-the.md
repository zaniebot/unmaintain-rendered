---
number: 3903
title: "uv pip install doesn't read the index url in the requirements.txt file"
type: issue
state: closed
author: aybidi
labels:
  - question
assignees: []
created_at: 2024-05-29T13:28:44Z
updated_at: 2024-05-29T13:51:04Z
url: https://github.com/astral-sh/uv/issues/3903
synced_at: 2026-01-07T13:12:17-06:00
---

# uv pip install doesn't read the index url in the requirements.txt file

---

_Issue opened by @aybidi on 2024-05-29 13:28_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

We have a private index that we use to find packages. We add it to our requirements.txt file like so:
```txt
# This file was autogenerated by uv via the following command:
#    uv pip compile --python 3.9 --python-platform linux -o requirements.txt requirements.in
--index-url <private-index-url> # via nox edit of uv pip compile output
--extra-index-url <private-index-url-2>  # via nox edit of uv pip compile output
--extra-index-url https://download.pytorch.org/whl/cpu  # via nox edit of uv pip compile output

# packages
```

When we run `uv pip install -r requirements.txt`, `uv` doesn't use the index urls in the file and some packages fail to install. When I explicitly add the index url and the extra index url to the command, then it works:

```bash
$ uv pip install -r requirements.txt --index-url <private-index-url> --extra-index-url https://download.pytorch.org/whl/cpu
```

How do I make `uv` pick up the index URLs in the requirements file?

I'm using `uv==0.1.44` on linux

---

_Comment by @charliermarsh on 2024-05-29 13:30_

We do read index URLs in requirements files. Can you include the output logs for whatever failure you're seeing? This on its own isn't quite enough to help unfortunately.

---

_Comment by @aybidi on 2024-05-29 13:38_

The output logs just show the error when I don't pass in the index url through the command:
```
Built 11 editables in 4.89s
  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of torch==2.1.2+cpu and you require torch==2.1.2+cpu, we can conclude that the requirements are
      unsatisfiable.
```

I do have the following extra index url in my generated `requirements.txt` file:
```
--extra-index-url https://download.pytorch.org/whl/cpu  # via nox edit of uv pip compile output
```

when I add extra index URL directly to the command, it works:
``` bash
$ uv pip install -r requirements.txt --index-url <private-index-url> --extra-index-url https://download.pytorch.org/whl/cpu
```

---

_Comment by @aybidi on 2024-05-29 13:39_

```
$ uv --version
uv 0.1.44
```

---

_Comment by @charliermarsh on 2024-05-29 13:40_

Why is `--extra-index-url <private-index-url-2>` included in the requirements file but not on the command-line?

---

_Comment by @aybidi on 2024-05-29 13:43_

It is. I shortened it for brevity. Here's the full command that works:
```bash
$ uv pip install -r requirements.txt \
--index-url <private-index-url> \
--extra-index-url https://download.pytorch.org/whl/cpu  \
--extra-index-url <private-index-url-2> \
--index-strategy unsafe-best-match
```

---

_Comment by @charliermarsh on 2024-05-29 13:46_

Ok, and you're passing `--index-strategy unsafe-best-match` even when omitting the index URLs on the command-line?

What you have on the command-line is meaningfully different than what you have in the requirements file -- the order of the extra index URLs is not the same.

---

_Comment by @aybidi on 2024-05-29 13:49_

ah I see! I wasn't passing `--index-strategy unsafe-best-match` when omitting the index URLs on the command line

adding it worked! 

---

_Comment by @aybidi on 2024-05-29 13:49_

happy to close the issue. thanks!

---

_Comment by @charliermarsh on 2024-05-29 13:51_

Awesome, thanks! Sorry for the confusion.

---

_Closed by @charliermarsh on 2024-05-29 13:51_

---

_Label `question` added by @charliermarsh on 2024-05-29 13:51_

---
