---
number: 16806
title: Recursive --no-install-package
type: issue
state: closed
author: tlippold-meta
labels:
  - enhancement
assignees: []
created_at: 2025-11-21T15:04:54Z
updated_at: 2025-11-21T16:56:31Z
url: https://github.com/astral-sh/uv/issues/16806
synced_at: 2026-01-07T12:31:16-06:00
---

# Recursive --no-install-package

---

_Issue opened by @tlippold-meta on 2025-11-21 15:04_

### Summary

Currently, `uv sync --no-install-package=XXX` just does not install XXX and keeps it transitive dependencies.

It would be nice to add two options:

1. Do not install the transitive dependencies, if they are not used by any other installed package.
2. Do not install the transitive dependencies, regardless if they are used or not.

This should also work when multiple packages are listed as a no-install. 

---

_Label `enhancement` added by @tlippold-meta on 2025-11-21 15:04_

---

_Comment by @zanieb on 2025-11-21 16:40_

Why do you want this?

`--no-install-package` is intentionally designed not to do this, as it's intended for partial syncs for layer caching.

---

_Comment by @tlippold-meta on 2025-11-21 16:50_

We have GPU dependencies, which should be excludable for installs (e.g. for systems without the needed GPU).
However, when they are declared as optional dependencies, BlackDuck does not catch them.

But if that is intentional, then we will manually exclude all the corresponding packages.

---

_Comment by @zanieb on 2025-11-21 16:54_

Thanks for sharing the use-case!

I'd report that as a problem to BlackDuck. It seems dubious for us to implement features that are well covered by standards like dependency groups and extras, it just increases the complexity of uv (which already has to deal with a lot of options).

---

_Closed by @tlippold-meta on 2025-11-21 16:56_

---

_Closed by @tlippold-meta on 2025-11-21 16:56_

---
