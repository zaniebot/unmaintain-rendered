---
number: 13487
title: "Updating `uv lock` with win32 dependency in uv.sources under linux fails with \"Distribution not found at\""
type: issue
state: closed
author: Timoses
labels:
  - question
assignees: []
created_at: 2025-05-16T11:12:25Z
updated_at: 2025-05-19T08:23:57Z
url: https://github.com/astral-sh/uv/issues/13487
synced_at: 2026-01-07T12:31:16-06:00
---

# Updating `uv lock` with win32 dependency in uv.sources under linux fails with "Distribution not found at"

---

_Issue opened by @Timoses on 2025-05-16 11:12_

### Summary

Using the following `pyproject.toml`:

```toml
[project]
name = "uv-tests"
version = "0.1.0"
requires-python = ">=3.11"
dependencies = [
    "test ; sys_platform == 'win32'"
]


[tool.uv.sources]
test = { path = "C:/local/test" , marker = "sys_platform == 'win32'" }
```

Running `uv lock` results in
```
error: Distribution not found at: file:///opt/code/uv-tests/C:/local/test
```


The reason why I would like to lock:
On a build server I would probably want to use `uv sync --locked`, so that there are no unexpected changes in the environment, correct?

If so, wouldn't it be important to be able to keep the `uv.lock` file up-to-date even on another OS system? At least as far as that system can gather information.

Also: Shouldn't it be possible to have different local dependencies specified for various system platforms (linux, windows)? Then `uv lock` would never work as it would never find the files for other platforms.

### Platform

Debian 6.1.135-1 (2025-04-25) , Linux 6.1.0-34-amd64 x86_64 GNU/Linux

### Version

uv 0.7.4

### Python version

Python 3.11.2

---

_Label `bug` added by @Timoses on 2025-05-16 11:12_

---

_Comment by @charliermarsh on 2025-05-16 11:28_

This is intentional. See https://github.com/astral-sh/uv/issues/13448 for a similar, recent issue. We always resolve for all platforms, so if you run `uv lock`, we need to ensure that the lockfile is up-to-date, which requires inspecting the dependencies. You can run, e.g., `uv sync --frozen` to avoid resolving, if you have an existing lockfile on another platform.

---

_Closed by @charliermarsh on 2025-05-16 11:28_

---

_Label `bug` removed by @charliermarsh on 2025-05-16 11:28_

---

_Label `question` added by @charliermarsh on 2025-05-16 11:28_

---

_Comment by @Timoses on 2025-05-19 08:23_

Hm, well this basically disallows using absolute paths since `C:/...` will never be found on systems other than windows. Unfortunate. But thanks for the answer.

---
