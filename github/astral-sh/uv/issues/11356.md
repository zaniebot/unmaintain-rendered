---
number: 11356
title: "`uv run jupyter contrib nbextension install --user` fails on a fresh install"
type: issue
state: closed
author: laowantong
labels:
  - question
assignees: []
created_at: 2025-02-09T15:11:24Z
updated_at: 2025-09-18T10:33:06Z
url: https://github.com/astral-sh/uv/issues/11356
synced_at: 2026-01-07T12:31:15-06:00
---

# `uv run jupyter contrib nbextension install --user` fails on a fresh install

---

_Issue opened by @laowantong on 2025-02-09 15:11_

### Summary

I have a new machine on which I try to make a clean install of all my Python stuff. I am new to the `uv` revolution ;)

Installing Jupyter with `uv` and launching a notebook works fine, but I cannot complete the installation of its nbextensions.

### To reproduce the issue

```shell
% mkdir test
% cd test
% uv init
% uv add jupyter jupyter_contrib_nbextensions
% uv run jupyter contrib nbextension install --user
```

The last command fails with `ModuleNotFoundError: No module named 'notebook.nbextensions'`

Full output [here](https://gist.github.com/laowantong/329d63d19da700272e7e15fdbeb3530a).

**Note.** Someone has succeeded with the same steps [here](https://jupyter-tutorial.readthedocs.io/de/latest/nbextensions/install.html).

### Platform

macOS Sequoia 15.3 Mac mini M4

### Version

uv 0.5.26 (5ef3d5139 2025-01-30)

### Python version

Python 3.13.1

---

_Label `bug` added by @laowantong on 2025-02-09 15:11_

---

_Comment by @charliermarsh on 2025-02-09 18:15_

It seems like there's an incompatibility between `notebook` and `jupyter` that isn't captured by the versioned requirements? I ran `uv add notebook==6.4.12` before your `uv run` command and it seemed to work as expected.

---

_Label `bug` removed by @charliermarsh on 2025-02-09 18:15_

---

_Label `question` added by @charliermarsh on 2025-02-09 18:15_

---

_Comment by @laowantong on 2025-02-09 18:29_

Thank you very much, that made it work. But after that, when I try to launch:

```
uv run jupyter notebook
```

I get `ModuleNotFoundError: No module named 'jupyter_server.contents'`

<details><summary>Full output</summary>

<pre>
Traceback (most recent call last):
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/notebook/traittypes.py", line 235, in _resolve_classes
    klass = self._resolve_string(klass)
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/traitlets.py", line 2015, in _resolve_string
    return import_item(string)
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/utils/importstring.py", line 33, in import_item
    module = __import__(package, fromlist=[obj])
ModuleNotFoundError: No module named 'jupyter_server.contents'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/aristide/Downloads/test/.venv/bin/jupyter-notebook", line 10, in <module>
    sys.exit(main())
             ~~~~^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/jupyter_core/application.py", line 283, in launch_instance
    super().launch_instance(argv=argv, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/config/application.py", line 1073, in launch_instance
    app = cls.instance(**kwargs)
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/config/configurable.py", line 583, in instance
    inst = cls(*args, **kwargs)
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/traitlets.py", line 1292, in __new__
    inst.setup_instance(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/traitlets.py", line 1335, in setup_instance
    super(HasTraits, self).setup_instance(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/traitlets.py", line 1311, in setup_instance
    init(self)
    ~~~~^^^^^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/notebook/traittypes.py", line 226, in instance_init
    self._resolve_classes()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/notebook/traittypes.py", line 238, in _resolve_classes
    warn(f"{klass} is not importable. Is it installed?", ImportWarning)
    ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: warn() missing 1 required keyword-only argument: 'stacklevel'
</pre>
</details>

`uv add jupyter_server` doesn't solve the problem. I am lost...


---

_Comment by @charliermarsh on 2025-02-10 00:58_

I don't really know why these things are incompatible -- it seems like a problem with the packages themselves -- but this works:

```
uv add jupyter jupyter_contrib_nbextensions notebook==6.4.12 traitlets==5.9.0
```


---

_Comment by @laowantong on 2025-02-10 07:19_

Yes, it works, sort of...

```
mkdir test
cd test
uv init
uv add jupyter jupyter_contrib_nbextensions notebook==6.4.12 traitlets==5.9.0
uv run jupyter contrib nbextension install --user
uv run jupyter notebook
```

There are some new errors (`[jupyter_nbextensions_configurator] wrote error: 'Forbidden'`) during the launch and the Extensions panel is stuck:

![Image](https://github.com/user-attachments/assets/3d3783fa-d992-4974-90df-9fcfb245adae)

I am not sure I will continue in this direction, perhaps I should going back to `nbclassic`, or conda :(

Anyway, the advantage of `uv` is that it allows quick and secure explorations. I guess the errors are on the Jupyter side.

Thank you again for your replies and all the voodoo ;)

---

_Closed by @laowantong on 2025-02-10 07:19_

---

_Comment by @simonprovost on 2025-02-16 00:43_

Oh sadness this is closed and will not be explored further!

---

_Comment by @chunkily on 2025-09-18 10:33_

Just encountered the same issue today.
It appears to be an issue on the jupyter_contrib_nbextensions side and not uv. https://github.com/ipython-contrib/jupyter_contrib_nbextensions/issues/1667


---
