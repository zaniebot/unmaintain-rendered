---
number: 12737
title: "uv appears to be picking the wrong version of python for project's documentation build"
type: issue
state: closed
author: cjw296
labels:
  - question
assignees: []
created_at: 2025-04-08T08:05:28Z
updated_at: 2025-04-08T19:46:46Z
url: https://github.com/astral-sh/uv/issues/12737
synced_at: 2026-01-07T12:31:15-06:00
---

# uv appears to be picking the wrong version of python for project's documentation build

---

_Issue opened by @cjw296 on 2025-04-08 08:05_

### Summary

I'm trying to get[ Read the Docs going for a uv-based project](https://github.com/cjw296/pytest-sqlalchemy/pull/1).

- The [`.python-version`](https://github.com/cjw296/pytest-sqlalchemy/blob/4c8a36d517dd3e78e8c2920389faa8ccdab63046/.python-version) is 3.13.
- The Python version [RTD is configured to use](https://github.com/cjw296/pytest-sqlalchemy/blob/4c8a36d517dd3e78e8c2920389faa8ccdab63046/.readthedocs.yaml#L6) is 3.13.
- The project [supports Python 3.9 and above](https://github.com/cjw296/pytest-sqlalchemy/blob/4c8a36d517dd3e78e8c2920389faa8ccdab63046/pyproject.toml#L10), but I only want to build the docs with 3.13, this is so I can use the latest Sphinx release rather than the latest Sphinx release that supported python 3.9

Unfortunately, `uv sync --group docs` [blows up](https://app.readthedocs.org/projects/pytest-sqlalchemy/builds/27781703/) complaining that Sphinx 8.1 can't be use with Python 3.9:

```
uv sync --group docs 0s Exit: 1
--
1 | Using CPython 3.13.0 interpreter at: /home/docs/.asdf/installs/python/3.13.0/bin/python3.13
2 | Creating virtual environment at: .venv
3 | × No solution found when resolving dependencies for split
4 | │ (python_full_version == '3.9.*'):
5 | ╰─▶ Because the requested Python version (>=3.9) does not satisfy
6 | Python>=3.10 and sphinx==8.1.3 depends on Python>=3.10, we can conclude
7 | that sphinx==8.1.3 cannot be used.
8 | And because only the following versions of sphinx are available:
9 | sphinx<=8.1.3
10 | sphinx==8.2.0
11 | sphinx==8.2.1
12 | sphinx==8.2.2
13 | sphinx==8.2.3
14 | sphinx==8.3.0
15 | we can conclude that sphinx>=8.1.3,<8.2.0 cannot be used. (1)
16 |  
17 | Because the requested Python version (>=3.9) does not satisfy
18 | Python>=3.11 and sphinx>=8.2.0,<=8.2.3 depends on Python>=3.11, we can
19 | conclude that sphinx>=8.2.0,<=8.2.3 cannot be used.
20 | And because we know from (1) that sphinx>=8.1.3,<8.2.0 cannot be used,
21 | we can conclude that sphinx>=8.1.3,<8.3.0 cannot be used.
22 | And because sphinx==8.3.0 was yanked (reason: Bad release), we can
23 | conclude that sphinx>=8.1.3 cannot be used.
24 | And because pytest-sqlalchemy:docs depends on sphinx>=8.1.3 and your
25 | project requires pytest-sqlalchemy:docs, we can conclude that your
26 | project's requirements are unsatisfiable.

uv sync --group docs  
Using CPython 3.[1](https://app.readthedocs.org/projects/pytest-sqlalchemy/builds/27781703/#266808655--1)3.0 interpreter at: /home/docs/.asdf/installs/python/3.13.0/bin/python3.13
Creating virtual environment at: .venv
  × No solution found when resolving dependencies for split
  │ (python_full_version == '3.9.*'):
  ╰─▶ Because the requested Python version (>=3.9) does not satisfy
      Python>=3.10 and sphinx==8.1.3 depends on Python>=3.10, we can conclude
      that sphinx==8.1.3 cannot be used.
      And because only the following versions of sphinx are available:
          sphinx<=8.1.3
          sphinx==8.[2](https://app.readthedocs.org/projects/pytest-sqlalchemy/builds/27781703/#266808655--2).0
          sphinx==8.2.1
          sphinx==8.2.2
          sphinx==8.2.[3](https://app.readthedocs.org/projects/pytest-sqlalchemy/builds/27781703/#266808655--3)
          sphinx==8.3.0
      we can conclude that sphinx>=8.1.3,<8.2.0 cannot be used. (1)
      Because the requested Python version (>=3.9) does not satisfy
      Python>=3.11 and sphinx>=8.2.0,<=8.2.3 depends on Python>=3.11, we can
      conclude that sphinx>=[8](https://app.readthedocs.org/projects/pytest-sqlalchemy/builds/27781703/#266808655--8).2.0,<=8.2.3 cannot be used.
      And because we know from (1) that sphinx>=8.1.3,<8.2.0 cannot be used,
      we can conclude that sphinx>=8.1.3,<8.3.0 cannot be used.
      And because sphinx==8.3.0 was yanked (reason: Bad release), we can
      conclude that sphinx>=8.1.3 cannot be used.
      And because pytest-sqlalchemy:docs depends on sphinx>=8.1.3 and your
      project requires pytest-sqlalchemy:docs, we can conclude that your
      project's requirements are unsatisfiable.
```

Why is that? Is this a uv bug or am I doing something wrong? What can I do to get this to work?


### Platform

ubuntu-24.04

### Version

0.6.13

### Python version

should be 3.13 ;-) 

---

_Label `bug` added by @cjw296 on 2025-04-08 08:05_

---

_Comment by @cjw296 on 2025-04-08 08:09_

Al curious about why [`uv sync --dev --resolution highest`](https://github.com/cjw296/pytest-sqlalchemy/actions/runs/14328141331/job/40157712811?pr=1) also appears to be attempting to install sphinx even though sphinx [only appears in the "docs" group](https://github.com/cjw296/pytest-sqlalchemy/blob/4c8a36d517dd3e78e8c2920389faa8ccdab63046/pyproject.toml#L35-L38).

I'm guessing the docs on [conflicting dependency groups](https://docs.astral.sh/uv/concepts/projects/config/#conflicting-dependencies) are relevant here, but there doesn't appear to be anything there for catering for groups that have different Python version requirements?

---

_Comment by @zanieb on 2025-04-08 17:58_

> Al curious about why [uv sync --dev --resolution highest](https://github.com/cjw296/pytest-sqlalchemy/actions/runs/14328141331/job/40157712811?pr=1) also appears to be attempting to install sphinx even though sphinx [only appears in the "docs" group](https://github.com/cjw296/pytest-sqlalchemy/blob/4c8a36d517dd3e78e8c2920389faa8ccdab63046/pyproject.toml#L35-L38).

We aren't installing it, we're performing a resolution that includes all groups before installing. We always resolve the entire project at once, regardless of the subset that will be installed.

The fix for your use-case is https://github.com/astral-sh/uv/issues/11606 — you can see some similar issues linked there

---

_Label `bug` removed by @zanieb on 2025-04-08 17:58_

---

_Label `question` added by @zanieb on 2025-04-08 17:58_

---

_Comment by @cjw296 on 2025-04-08 19:46_

Yep, this looks like a dupe of #11606 

---

_Closed by @cjw296 on 2025-04-08 19:46_

---
