---
number: 10366
title: "UV pip install requirements file breaks when it contains `--trusted-host`"
type: issue
state: closed
author: MattTheCuber
labels:
  - good first issue
  - compatibility
assignees: []
created_at: 2025-01-07T14:46:14Z
updated_at: 2025-01-09T18:19:53Z
url: https://github.com/astral-sh/uv/issues/10366
synced_at: 2026-01-07T12:31:15-06:00
---

# UV pip install requirements file breaks when it contains `--trusted-host`

---

_Issue opened by @MattTheCuber on 2025-01-07 14:46_

I apologize if this is a duplicate issue. I searched #1339 pretty thoroughly as well as #6591.

If you run a command like `uv pip install -r requirements.txt` with a requirements file looking like this, it throws the error: `error: Unexpected '-', expected '-c', '-e', '-r' or the start of a requirement at requirements.txt:1:1`.

```
--trusted-host org.domain.com

custom_package
...
```

---

_Comment by @MattTheCuber on 2025-01-07 14:59_

Just found #7702, looks like it was denied.

However, the reasoning might not work for all cases. We automatically generated our requirements.txt file using `pip-compile`. This places the `--trusted-host` line at the top of the file for us. I would prefer that we wouldn't have to make exceptions to the pip-tools development pipeline to support this tool.

---

_Comment by @MattTheCuber on 2025-01-07 15:00_

If you still wouldn't like to support the feature, would it be possible to just ignore the line, possibly throwing a warning, that way we can manually pass the argument to uv and not make changes to our pip-tools pipeline?

---

_Comment by @charliermarsh on 2025-01-07 16:29_

I'm comfortable ignoring-and-warning here... \cc @zanieb @konstin 

---

_Comment by @charliermarsh on 2025-01-07 16:30_

Although, if you're changing your pipeline to pass the argument to uv, why is it "worse" to change it to also pass it for pip-tools?

---

_Comment by @MattTheCuber on 2025-01-07 17:43_

Developers install via `pip-sync`, `pip install -r`, or `uv pip ...`. I would like to keep their options open.

---

_Comment by @zanieb on 2025-01-07 18:49_

I'm fine with ignore and warn.

---

_Comment by @konstin on 2025-01-08 14:00_

Warn and ignore seems fine.

---

_Label `compatibility` added by @konstin on 2025-01-08 14:00_

---

_Label `good first issue` added by @zanieb on 2025-01-08 21:11_

---

_Assigned to @charliermarsh by @charliermarsh on 2025-01-09 00:30_

---

_Referenced in [astral-sh/uv#10420](../../astral-sh/uv/pulls/10420.md) on 2025-01-09 01:18_

---

_Closed by @charliermarsh on 2025-01-09 18:19_

---

_Closed by @charliermarsh on 2025-01-09 18:19_

---

_Referenced in [astral-sh/uv#14870](../../astral-sh/uv/issues/14870.md) on 2025-07-24 12:42_

---
