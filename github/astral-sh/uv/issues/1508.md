---
number: 1508
title: "pip install error: failed to rename file from ../.tmp to real package"
type: issue
state: closed
author: kafonek
labels:
  - bug
assignees: []
created_at: 2024-02-16T16:12:46Z
updated_at: 2024-02-17T02:11:27Z
url: https://github.com/astral-sh/uv/issues/1508
synced_at: 2026-01-07T12:31:14-06:00
---

# pip install error: failed to rename file from ../.tmp to real package

---

_Issue opened by @kafonek on 2024-02-16 16:12_

Maybe related to https://github.com/astral-sh/uv/issues/1454? I see the following issue when running inside a relatively beefy Ubuntu 22.04 docker container. The same lines run fine on my local Ubuntu 22.04 WSL box.

```
‚ùØ uv venv
Using Python 3.10.12 interpreter at /usr/bin/python3.10
Creating virtualenv at: .venv

‚ùØ uv pip install torch
Resolved 22 packages in 9ms
error: Failed to install: nvidia_cublas_cu12-12.1.3.1-py3-none-manylinux1_x86_64.whl (nvidia-cublas-cu12==12.1.3.1)
  Caused by: failed to rename file from /root/si/.venv/lib/python3.10/site-packages/.tmp06hBnQ/__init__.py to /root/si/.venv/lib/python3.10/site-packages/nvidia/__init__.py
  Caused by: No such file or directory (os error 2)
```


I've also seen the same error happen with `pysoundfile` when installing a long list of deps from `requirements.txt` but then installing `pysoundfile` on its own in a fresh venv works. Hope this helps give you an idea of where a potential race condition or other issue might be.

```
Downloaded 399 packages in 2m 05s
error: Failed to install: pysoundfile-0.9.0.post1-py2.py3-none-any.whl (pysoundfile==0.9.0.post1)
  Caused by: failed to rename file from /root/si/.venv/lib/python3.10/site-packages/.tmp3vcGXK/soundfile.py to /root/si/.venv/lib/python3.10/site-packages/soundfile.py
  Caused by: No such file or directory (os error 2)
```

```
‚ùØ uv venv
Using Python 3.10.12 interpreter at /usr/bin/python3.10
Creating virtualenv at: .venv

‚ùØ uv pip install pysoundfile
Resolved 3 packages in 6ms
Installed 3 packages in 28ms
 + cffi==1.16.0
 + pycparser==2.21
 + pysoundfile==0.9.0.post1
 ```

---

_Comment by @charliermarsh on 2024-02-16 16:13_

Thanks!

---

_Label `bug` added by @charliermarsh on 2024-02-16 16:13_

---

_Referenced in [dagster-io/dagster#19871](../../dagster-io/dagster/pulls/19871.md) on 2024-02-16 20:38_

---

_Comment by @charliermarsh on 2024-02-17 01:30_

Do you mind trying again with v0.1.3?

---

_Comment by @kafonek on 2024-02-17 01:37_

hard to prove a negative, but all of the situations that were consistently leading to this error before are working with 0.1.3 üöÄ 

---

_Comment by @kafonek on 2024-02-17 01:44_

Probably fixed, anyone else still seeing this should feel free to reopen this though.

Thanks @charliermarsh ‚ù§Ô∏è 

---

_Closed by @kafonek on 2024-02-17 01:44_

---

_Comment by @charliermarsh on 2024-02-17 01:44_

Sweet, let me know if it pops up again!

---

_Comment by @kafonek on 2024-02-17 02:00_

For posterity, was this fixed in https://github.com/astral-sh/uv/pull/1546?

---

_Comment by @charliermarsh on 2024-02-17 02:11_

Yes (that was the intent, at least).

---
