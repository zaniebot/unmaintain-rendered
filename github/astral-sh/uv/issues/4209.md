---
number: 4209
title: "` uv venv --preview --python` with a new version of Python gives a garbled repl prompt"
type: issue
state: closed
author: notatallshaw-gts
labels: []
assignees: []
created_at: 2024-06-10T18:42:56Z
updated_at: 2024-06-17T15:52:59Z
url: https://github.com/astral-sh/uv/issues/4209
synced_at: 2026-01-07T12:31:14-06:00
---

# ` uv venv --preview --python` with a new version of Python gives a garbled repl prompt

---

_Issue opened by @notatallshaw-gts on 2024-06-10 18:42_

Perhaps I'm trying out this feature too quickly, and it's a known issue, but I was interested to see if I was likely able to drop using conda for local development.

But on my machine when I get ` uv venv --preview --python` to install a version of Python the repl prompt is garbled:

```
$ uv venv --preview --python 3.8
$ source .venv/bin/activate
$ python
Python 3.8.19 (default, Apr 15 2024, 18:26:04) 
[Clang 17.0.6 ] on linux
Type "help", "copyright", "credits" or "license" for more information.
]633;E;exit()]633;D;0]633;A>>> ]633;B]633;C
```

I can type into the repl as normal:
```
]633;E;exit()]633;D;0]633;A>>> ]633;B]633;C1+1
2
]633;E;1+1]633;D;0]633;A>>> ]633;B]633;C
```

Here's the verbose output of the initial install (after I cleared out everything in the toolchain directory):

```
uv venv --preview --python 3.8 -v
DEBUG Searching for Python 3.8 in search path or managed toolchains
DEBUG Searching for managed toolchains at `/home/STRIKETECH/dshaw/.local/share/uv/toolchains`
DEBUG Found CPython 3.11.2 at `/home/STRIKETECH/dshaw/miniforge3/envs/backoffice/bin/python3` (search path)
DEBUG Found CPython 3.11.2 at `/home/STRIKETECH/dshaw/miniforge3/envs/backoffice/bin/python` (search path)
DEBUG Found CPython 3.11.2 at `/usr/local/bin/python3` (search path)
DEBUG Found CPython 3.7.2 at `/usr/bin/python3` (search path)
DEBUG Can't use Python at `/usr/bin/python`
DEBUG Requested Python not found, checking for available download...
DEBUG Using request timeout of 30s
INFO Fetching requested toolchain...
DEBUG Downloading https://github.com/indygreg/python-build-standalone/releases/download/20240415/cpython-3.8.19%2B20240415-x86_64-unknown-linux-gnu-debug-full.tar.zst to temporary location /home/STRIKETECH/dshaw/.local/share/uv/toolchains/.tmpz2lFVI
DEBUG Extracting cpython-3.8.19%2B20240415-x86_64-unknown-linux-gnu-debug-full.tar.zst
DEBUG Moving /home/STRIKETECH/dshaw/.local/share/uv/toolchains/.tmpz2lFVI/python to /home/STRIKETECH/dshaw/.local/share/uv/toolchains/cpython-3.8.19-linux-x86_64-gnu
Using Python 3.8.19 interpreter at: /home/STRIKETECH/dshaw/.local/share/uv/toolchains/cpython-3.8.19-linux-x86_64-gnu/install/bin/python3
Creating virtualenv at: .venv
INFO Removing existing directory
Activate with: source .venv/bin/activate
```

I assume this is related to my old Linux distro vs. whatever was expected when it was compiled, but conda Python installs work fine.

---

_Renamed from "` uv venv --preview --python` a new version of Python with uv gives a garbled repl line" to "` uv venv --preview --python` with a new version of Python gives a garbled repl line" by @notatallshaw-gts on 2024-06-10 18:43_

---

_Renamed from "` uv venv --preview --python` with a new version of Python gives a garbled repl line" to "` uv venv --preview --python` with a new version of Python gives a garbled repl prompt" by @notatallshaw-gts on 2024-06-10 18:44_

---

_Comment by @zanieb on 2024-06-10 18:46_

Hm interesting. What's your system?

---

_Comment by @notatallshaw-gts on 2024-06-10 18:47_

Oh, I see this is probably a bug with https://github.com/indygreg/python-build-standalone, I'll check over there and see if I can resolve the issue with my own config or if it's a bug with their config.


> Hm interesting. What's your system?

Fedora release 29


---

_Closed by @notatallshaw-gts on 2024-06-10 18:47_

---

_Comment by @zanieb on 2024-06-10 18:50_

We're maintainers over there too :)

---

_Comment by @notatallshaw-gts on 2024-06-10 18:58_

Ah, well, I quickly tried manually downloading both the `musl` and `gnu` versions, and I got the same issue with both.

When I have some time to read through their documentation, and test if it's a recent regression or has always been the case, I will open an issue there.

---

_Comment by @notatallshaw-gts on 2024-06-17 15:52_

And going back to this today to file an issue against https://github.com/indygreg/python-build-standalone I can't reproduce it... ðŸ˜• 

---
