---
number: 15765
title: Difference in file inclusion behavior between source distribution and wheel
type: issue
state: closed
author: BartSchuurmans
labels:
  - question
assignees: []
created_at: 2025-09-10T08:45:58Z
updated_at: 2025-09-12T11:21:10Z
url: https://github.com/astral-sh/uv/issues/15765
synced_at: 2026-01-07T12:31:16-06:00
---

# Difference in file inclusion behavior between source distribution and wheel

---

_Issue opened by @BartSchuurmans on 2025-09-10 08:45_

### Question

(Follow-up of https://github.com/astral-sh/uv/issues/15655)

I have the following MRE:

```toml
[project]
name = "debug"
version = "0.1.0"
requires-python = ">=3.12.0"

[build-system]
requires = ["uv_build>=0.8.15,<0.9.0"]
build-backend = "uv_build"

[tool.uv.build-backend.data]
data = "subdirectory"
```

```console
$ tree
.
├── pyproject.toml
├── src
│   └── debug
│       └── __init__.py
└── subdirectory
    └── file.txt

4 directories, 3 files
```

After building, the source distribution and wheel look like this:

```console
$ tar -tf dist/debug-0.1.0.tar.gz
debug-0.1.0/PKG-INFO
debug-0.1.0/
debug-0.1.0/pyproject.toml
debug-0.1.0/src
debug-0.1.0/src/debug
debug-0.1.0/src/debug/__init__.py
debug-0.1.0/subdirectory
debug-0.1.0/subdirectory/file.txt
```

```console
$ tar -tf dist/debug-0.1.0-py3-none-any.whl
debug/
debug/__init__.py
debug-0.1.0.data/data/
debug-0.1.0.data/data/file.txt
debug-0.1.0.dist-info/
debug-0.1.0.dist-info/WHEEL
debug-0.1.0.dist-info/METADATA
debug-0.1.0.dist-info/RECORD
```

`file.txt` is included in both archives, but the `subdirectory` is included in the source distribution while it is stripped from the wheel. Is this intentional?

If I create a second subdirectory within the first, the layout looks like this:

```console
$ mkdir subdirectory/another && touch subdirectory/another/file2.txt
$ uv build
$ tar -tf dist/debug-0.1.0.tar.gz
debug-0.1.0/PKG-INFO
debug-0.1.0/
debug-0.1.0/pyproject.toml
debug-0.1.0/src
debug-0.1.0/src/debug
debug-0.1.0/src/debug/__init__.py
debug-0.1.0/subdirectory
debug-0.1.0/subdirectory/another
debug-0.1.0/subdirectory/another/file2.txt
debug-0.1.0/subdirectory/file.txt
$ tar -tf dist/debug-0.1.0-py3-none-any.whl
debug/
debug/__init__.py
debug-0.1.0.data/data/
debug-0.1.0.data/data/another/
debug-0.1.0.data/data/another/file2.txt
debug-0.1.0.data/data/file.txt
debug-0.1.0.dist-info/
debug-0.1.0.dist-info/WHEEL
debug-0.1.0.dist-info/METADATA
debug-0.1.0.dist-info/RECORD
```

So only the first directory is stripped from the wheel.

### Platform

Darwin 24.6.0 arm64

### Version

uv 0.8.15 (Homebrew 2025-09-03)

---

_Label `question` added by @BartSchuurmans on 2025-09-10 08:45_

---

_Renamed from "Difference between file inclusion between source distribution and wheel" to "Difference in file inclusion behavior between source distribution and wheel" by @BartSchuurmans on 2025-09-10 08:46_

---

_Comment by @konstin on 2025-09-10 09:06_

This is intentional, it allows adding multiple entries at the top level of the data directory without exposing a complex combination of globbing and strip-prefix. We're including the contents of the specified directory in the wheel, not the directory itself (internally we're translating `subdirectory` to `subdirectory/**` and stripping the data/data directory prefix from each entry).

---

_Closed by @BartSchuurmans on 2025-09-12 11:21_

---
