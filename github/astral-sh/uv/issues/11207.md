---
number: 11207
title: "`uv remove` sometimes installs packages when run after `uv add`"
type: issue
state: open
author: edmorley
labels:
  - bug
assignees: []
created_at: 2025-02-04T00:29:24Z
updated_at: 2025-02-04T00:40:22Z
url: https://github.com/astral-sh/uv/issues/11207
synced_at: 2026-01-07T12:31:15-06:00
---

# `uv remove` sometimes installs packages when run after `uv add`

---

_Issue opened by @edmorley on 2025-02-04 00:29_

### Summary

In the following, the `uv remove` command also installs a package (`urllib3`):

```console
$ uv init --python 3.13 testcase-uv-add-remove && cd $_
$ uv add --dev urllib3
Using CPython 3.13.1 interpreter at: /opt/homebrew/opt/python@3.13/bin/python3.13
Creating virtual environment at: .venv
Resolved 2 packages in 52ms
Installed 1 package in 2ms
 + urllib3==2.3.0
$ rm -rf .venv/
$ uv add typing-extensions
Using CPython 3.13.1 interpreter at: /opt/homebrew/opt/python@3.13/bin/python3.13
Creating virtual environment at: .venv
Resolved 3 packages in 54ms
Installed 1 package in 1ms
 + typing-extensions==4.12.2
$ uv remove typing-extensions
Resolved 2 packages in 1ms
Uninstalled 1 package in 0.41ms
Installed 1 package in 1ms
 - typing-extensions==4.12.2
 + urllib3==2.3.0
```

It appears that the `uv add` step creates the venv, installs `typing-extensions` but doesn't perform a full sync, so the dev dependency isn't installed. Then the `uv remove` does perform a full sync, which installs it.

I would have expected that both `uv add` and `uv remove` behaved the same, in that they either:
- both performed the equivalent of a `uv sync` after updating the lockfile
- or else, both only added/removed the specified package (and its transitive dependencies) and didn't sync the rest of the project's dependency list with the environment

Notably, if `urllib3` was installed as a normal dependency and not as as dev-dependency, then this inconsistency doesn't occur (the initial `uv add` step causes both `urllib3` and the new package to be installed, so there is no stray install of urllib3 during the `uv remove`).

### Platform

macOS

### Version

0.5.26

### Python version

Python 3.13.1

---

_Label `bug` added by @edmorley on 2025-02-04 00:29_

---

_Comment by @charliermarsh on 2025-02-04 00:36_

I kind of wish `uv remove` didn't do a sync at all. It leads to a lot of confusing interactions. In this case, it looks like `uv add` does a non-strict sync (so, just adds dependencies, doesn't remove things if not needed) while `uv remove` does a strict sync with the default groups enabled.

---

_Comment by @edmorley on 2025-02-04 00:40_

(Feel free to wontfix if it's a pain to fix or by design; I just happened to spot this in passing whilst playing around)

---

_Comment by @charliermarsh on 2025-02-04 00:40_

Na it's a great observation!

---
