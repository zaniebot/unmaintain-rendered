---
number: 9440
title: "Feature request: Support pinning named indexes specified in user-level configuration (uv.toml)"
type: issue
state: open
author: freinold
labels:
  - needs-decision
assignees: []
created_at: 2024-11-26T12:20:58Z
updated_at: 2025-12-02T17:43:57Z
url: https://github.com/astral-sh/uv/issues/9440
synced_at: 2026-01-07T12:31:15-06:00
---

# Feature request: Support pinning named indexes specified in user-level configuration (uv.toml)

---

_Issue opened by @freinold on 2024-11-26 12:20_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

## Current state

Current documentation states the following:

> Named indexes referenced via tool.uv.sources must be defined within the project's pyproject.toml file; indexes provided via the command-line, environment variables, or user-level configuration will not be recognized.

See Docs: https://docs.astral.sh/uv/configuration/indexes/#pinning-a-package-to-an-index
Source: https://github.com/astral-sh/uv/blob/f886d080948ec72e97404a159a1a384d58918c50/docs/configuration/indexes.md?plain=1#L104

## Our problem with this

We are running a company wide package proxy (JFrog Artifactory) for all Python Packages.
This proxy provides 2 mirrors: PyPI and Pytorch CPU Wheels.
Each user has their own auth token for Artifactory which is baked into the index-url.
We tried to specify the following uv.toml to be able to always download `torch` from the Pytorch Mirror:

```ini
native-tls = true
index-strategy = "unsafe-best-match"

[[index]]
name = "pytorch"
url = "https://USER:TOKEN@artifactory.example.com/artifactory/api/pypi/pypi-pytorch-remote/simple"
explicit = true

[[index]]
url = "https://https://USER:TOKEN@artifactory.example.com/artifactory/api/pypi/pypi-repos/simple"
default = true

[sources]
torch = { index = "pytorch" }
```

This currently does not work like mentioned above.

## Proposal

In our case, it is not possible for us to specify the indexes inside the pyproject.toml, which would be shared between colleagues and for some projects is even open-source.

Due to this, uv should support specifying named indexes in the user-level configuration file `uv.toml` as well.

---

_Renamed from "Feature request: Support pinning named indexes specified in user configuration (uv.toml)" to "Feature request: Support pinning named indexes specified in user-level configuration (uv.toml)" by @freinold on 2024-11-26 12:21_

---

_Label `needs-decision` added by @charliermarsh on 2024-11-27 13:40_

---

_Referenced in [astral-sh/uv#10436](../../astral-sh/uv/issues/10436.md) on 2025-01-09 19:23_

---

_Comment by @uglybug on 2025-05-19 15:49_

This would be useful for us too. Like the OP, we use Artifactory and it would make our CI much cleaner if we could set this in `uv.toml` for the CI user and in our CDE base image - taking some of the mental load off manual documentation around setting this up per-project.
The feature as it exists is extremely useful for reducing the risk of name clash or supply chain injection, and this change would just make it a little easier to standardise across all our projects.

---

_Comment by @my1e5 on 2025-11-03 15:42_

Another benefit of this would be the ability to set caching headers for a named index at the user-level. As I understand it, there is no way to set custom cache control headers using the command line, only through a config like

```
[[tool.uv.index]]
name = "private-index"
url = "https://pkgs.dev.azure.com/<ORG>/<PROJECT>/_packaging/<FEED>/pypi/simple/"
cache-control = { api = "max-age=600", files = "max-age=365000000, immutable" }
```

See https://docs.astral.sh/uv/concepts/indexes/#customizing-cache-control-headers

And as you cannot specify an `[[index]]` like this in `~/.config/uv/uv.toml`, It's currently not possible to get caching to work with, for example, a private Azure Artifacts index using `uv tool run`:

```
uv tool run --index "https://VssSessionToken@pkgs.dev.azure.com/<ORG>/<PROJECT>/_packaging/<FEED>/pypi/simple/" foo
```

See related issue:

* https://github.com/astral-sh/uv/issues/10359 

---

_Comment by @freinold on 2025-11-03 16:11_

@charliermarsh 
Is this still up for decision?

As uv is adopted by more corporations and enterprises, the usage of private indexes will increase.
Even if you provide [pyx](https://astral.sh/pyx) as a first-class citizen and want to promote it, the support for other widely distributed solutions like Artifactory should still be there IMO.

---

_Comment by @Phirefly9 on 2025-12-02 17:43_

@charliermarsh 
This would also be useful for my team where we need to change the index a package is pulled from once we enter an air gapped environment.  

changing the uv.toml does not require any changes to the pyproject.toml, while currently we would have to change the pyproject and relock

---
