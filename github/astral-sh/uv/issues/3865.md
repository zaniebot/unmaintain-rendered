---
number: 3865
title: uv attempting to uninstall itself on Windows CI
type: issue
state: closed
author: charliermarsh
labels:
  - windows
assignees: []
created_at: 2024-05-27T14:55:42Z
updated_at: 2024-05-28T20:07:08Z
url: https://github.com/astral-sh/uv/issues/3865
synced_at: 2026-01-07T12:31:14-06:00
---

# uv attempting to uninstall itself on Windows CI

---

_Issue opened by @charliermarsh on 2024-05-27 14:55_

Well, I was too hasty, it did not work in Windows (although this looks like different issue), I run `uv pip install wheel --python 3.9  --system --verbose`. 
```cmd
DEBUG Searching for Python 3.9 in search path or `py` launcher output
DEBUG Found CPython 3.9.13 at `C:\hostedtoolcache\windows\Python\3.9.13\x64\python3.exe` (search path)
DEBUG Using Python 3.9.13 environment at C:\hostedtoolcache\windows\Python\3.9.13\x64\python3.exe
DEBUG Acquired lock for `C:\hostedtoolcache\windows\Python\3.9.13\x64`
DEBUG At least one requirement is not satisfied: wheel
DEBUG Using registry request timeout of 30s
DEBUG Solving with target Python version 3.9.13
DEBUG Adding direct dependency: wheel*
DEBUG No cache entry for: https://pypi.org/simple/wheel/
DEBUG Searching for a compatible version of wheel (*)
DEBUG Selecting: wheel==0.43.0 (wheel-0.43.0-py3-none-any.whl)
DEBUG No cache entry for: https://files.pythonhosted.org/packages/7d/cd/d7460c9a869b16c3dd4e1e403cce337df165368c71d6af229a74699622ce/wheel-0.43.0-py3-none-any.whl.metadata
DEBUG Tried 2 versions: root 1, wheel 1
Resolved 1 package in 24ms
DEBUG Identified uncached requirement: wheel==0.43.0
DEBUG Unnecessary package: argcomplete==3.3.0
DEBUG Unnecessary package: click==8.1.7
DEBUG Unnecessary package: colorama==0.4.6
DEBUG Unnecessary package: packaging==24.0
DEBUG Preserving seed package: pip==24.0
DEBUG Unnecessary package: pipx==1.5.0
DEBUG Unnecessary package: platformdirs==4.2.1
DEBUG Preserving seed package: setuptools==58.1.0
DEBUG Unnecessary package: tomli==2.0.1
DEBUG Unnecessary package: userpath==1.9.2
DEBUG Preserving seed package: uv==0.2.4
DEBUG No cache entry for: https://files.pythonhosted.org/packages/7d/cd/d7460c9a869b16c3dd4e1e403cce337df165368c71d6af229a74699622ce/wheel-0.43.0-py3-none-any.whl
Downloaded 1 package in 161ms
Installed 1 package in 122ms
 + wheel==0.43.0
Resolved 94 packages in 11.27s
Downloaded 87 packages in 14.49s
error: failed to remove file `C:\hostedtoolcache\windows\Python\3.9.13\x64\Lib\site-packages\../../Scripts/uv.exe`
  Caused by: Access is denied. (os error 5)
Error: Process completed with exit code 1.
```

But 0.2.4 works in Linux and Mac.

_Originally posted by @aaltat in https://github.com/astral-sh/uv/issues/3837#issuecomment-2132376841_
            

---

_Assigned to @charliermarsh by @charliermarsh on 2024-05-27 14:55_

---

_Label `windows` added by @charliermarsh on 2024-05-27 14:55_

---

_Comment by @charliermarsh on 2024-05-27 16:40_

@aaltat -- The problem is that you pin `uv == 1.45.0` in https://github.com/MarketSquare/robotframework-browser/blob/d89838af6c6cb3fc3ae313b6fa177d98bce56a32/Browser/dev-requirements.txt#L23. As a result, when you run `uv pip install -r Browser/dev-requirements.txt  --python 3.9`, uv attempts to downgrade itself, which leads to an error on Windows (you can't replace a running executable without some clever workarounds -- we have a tracking issue for that separately).

Can you try changing the version in `dev-requirements.txt`?


---

_Referenced in [astral-sh/uv#3837](../../astral-sh/uv/issues/3837.md) on 2024-05-27 16:40_

---

_Comment by @aaltat on 2024-05-28 04:50_

Ah, after removing that it works, I did not know that uv finds my requirements*.txt files automatically.

But in any case thank you for assistance and speedy fixing.

---

_Comment by @charliermarsh on 2024-05-28 13:48_

@aaltat -- uv doesn't find requirements files automatically -- the failing line was actually `uv pip install -r Browser/dev-requirements.txt  --python 3.9` I think, not the wheel install?

---

_Closed by @charliermarsh on 2024-05-28 15:42_

---

_Comment by @aaltat on 2024-05-28 20:07_

Ah, I did not see it. Thank you for your support and help. 

---
