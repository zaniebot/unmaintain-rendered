---
number: 14236
title: "Add `--torch-backend` flag support to `uv add` command for automatic PyTorch backend configuration"
type: issue
state: open
author: FishAlchemist
labels:
  - enhancement
assignees: []
created_at: 2025-06-24T11:08:08Z
updated_at: 2025-09-02T09:54:46Z
url: https://github.com/astral-sh/uv/issues/14236
synced_at: 2026-01-07T12:31:16-06:00
---

# Add `--torch-backend` flag support to `uv add` command for automatic PyTorch backend configuration

---

_Issue opened by @FishAlchemist on 2025-06-24 11:08_

### Summary

Request to add a `--torch-backend` flag to the `uv add` command that automatically configures PyTorch backend sources in `pyproject.toml`. When using `uv add --torch-backend `, the command should:

- Automatically add the appropriate source configuration to `pyproject.toml` based on uv's documentation recommendations
- Bind the specified torch package to the corresponding source
- If a source with a different name but same URL already exists in `pyproject.toml`, automatically bind to that existing source instead of creating a duplicate

Expected behavior: The command should automatically configure the appropriate PyTorch index URL in `pyproject.toml` and bind the torch packages to that source, eliminating the need for manual source configuration.

Referencing the content from the uv documentation.
https://docs.astral.sh/uv/guides/integration/pytorch/

-------
Additional note: I'm bringing this up purely as an idea; whether it's ultimately implemented or deemed unnecessary is fine.

### Example

Write the document suggested content into pyproject.toml based on the given backend.

---

_Label `enhancement` added by @FishAlchemist on 2025-06-24 11:08_

---

_Comment by @charliermarsh on 2025-06-24 13:34_

Yeah I need to sit down and figure out how we want to handle this here.

---

_Assigned to @charliermarsh by @charliermarsh on 2025-06-24 13:35_

---

_Comment by @remleduff on 2025-08-22 01:24_

What is the plan for proxy package indexes for this? 

(We actually build torch from source to local package-indexes that match the torch naming scheme, so if you enabled an extra with the same logic as what --pytorch-backend does, it could actually help us too). 

---

_Comment by @mohaidoss on 2025-09-02 09:54_

Hello @charliermarsh beside the `uv add` functionality, can we specify `pytorch-backend=auto` in the `pyproject.toml` file ?

---

_Referenced in [kyutai-labs/delayed-streams-modeling#131](../../kyutai-labs/delayed-streams-modeling/issues/131.md) on 2025-09-02 09:57_

---
