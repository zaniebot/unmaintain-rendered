---
number: 21907
title: Ratcheting system for ruff rules
type: issue
state: open
author: siscia
labels:
  - question
assignees: []
created_at: 2025-12-10T22:21:56Z
updated_at: 2025-12-12T00:00:23Z
url: https://github.com/astral-sh/ruff/issues/21907
synced_at: 2026-01-07T12:31:14-06:00
---

# Ratcheting system for ruff rules

---

_Issue opened by @siscia on 2025-12-10 22:21_

Hello,

we have a rather large codebase and we extensively use `ruff` to manage rules and lint across the developers in the organizations.

Sometimes, it is a good idea to introduce a new ruff lint rule. 
But invariably there is a portion of the codebase that does not respect the new rule. Absolutely understandably.

It would be great to have some sort of ratcheting system.

* We introduce a new rule, so new code must follow it.
* Old code that already follow the rules cannot break the rule.
* Old code that does not respect the rule, can still break the rule.
* As soon as old code respect the rule, it cannot go back to breaking it.

I understand that this will require keeping state, and that we may not be in the position to implement it.

The closer thing I can come up with is introducing the new rule and push all the files that don't follow it in the `per-file-ignore`, however we do need a way to get files out of there as soon as they start following the rule.

Ideally, a file in the `per-file-ignores` that pass the lint, should raise a warning or even an error. A bit like https://docs.astral.sh/ruff/rules/unused-noqa/#unused-noqa-ruf100

I would not mind running a separate command, or the lint with a different command line argument.

---

_Comment by @ntBre on 2025-12-10 22:47_

One of the ways we've considered handling this is through "baselines," which are tracked in https://github.com/astral-sh/ruff/issues/1149. Another option mentioned in that thread is using the `--add-noqa` flag to suppress all of the known instances of an error, which is at least a bit more precise than ignoring the files outright. I think that's still probably the best option today, especially now that `--add-noqa` supports an optional reason argument (like `--add-noqa="ruff baseline"`) and will work with RUF100.

Applying `RUF100` to unused `per-file-ignores` is interesting too, I hadn't thought about that before!

---

_Label `question` added by @MichaReiser on 2025-12-11 07:17_

---

_Comment by @siscia on 2025-12-12 00:00_

"baseline" is what I called "state" in my original message, I reckon.

That would work as well for us.

I am glad that this was already asked and already some brain power was used on it. If you need any use case example, I will be more than happy to help.

---

_Referenced in [astral-sh/ruff#1149](../../astral-sh/ruff/issues/1149.md) on 2025-12-12 00:07_

---
