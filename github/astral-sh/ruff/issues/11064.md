---
number: 11064
title: "[UP006/7] The `target-version` configuration is not applied to `*.pyi`"
type: issue
state: closed
author: lumina37
labels: []
assignees: []
created_at: 2024-04-21T04:07:45Z
updated_at: 2024-04-21T10:04:51Z
url: https://github.com/astral-sh/ruff/issues/11064
synced_at: 2026-01-07T12:31:13-06:00
---

# [UP006/7] The `target-version` configuration is not applied to `*.pyi`

---

_Issue opened by @lumina37 on 2024-04-21 04:07_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

## Introduction

For `UP006/7`, The `target-version` configuration is not applied to `*.pyi`. I create a [repo](https://github.com/Starry-OvO/ruff-UP4pyi-demo) to reproduce this issue.

## Version

Run `ruff -V`

Get 

```log
ruff 0.4.1
```

## Configuration

```toml
[tool.ruff]
target-version = "py38"

[tool.ruff.lint]
select = ["UP"]
```

## To Reproduce

Follow the [demo](https://github.com/Starry-OvO/ruff-UP4pyi-demo) or the steps below.

Add `foo.pyi` to the cwd.

```python
from typing import List, Union

def UP006() -> List[int]: ...
def UP007(a: bool) -> Union[str, int]: ...
```

Add `foo.py` to the cwd.

```python
from typing import List, Union


def UP006() -> List[int]:
    return [1, 2, 3]


def UP007(a: bool) -> Union[str, int]:
    if a:
        return "hello ruff"
    else:
        return 42
```

Add `pyproject.toml` to the cwd.

```toml
[project]
name = "ruff-UP4pyi-demo"
version = "0.1.0"
description = "Demo for the bug within ruff UP006/7 rules"
authors = [{ name = "Starry-OvO", email = "starry.qvq@gmail.com" }]
dependencies = []
readme = "README.md"
requires-python = ">=3.8,<3.13"

[tool.rye]
managed = true
virtual = true

[tool.ruff]
target-version = "py38"

[tool.ruff.lint]
select = ["UP"]
```

## Behaviour

Run `ruff check .`

Get

```log
foo.pyi:3:16: UP006 Use `list` instead of `List` for type annotation
foo.pyi:4:23: UP007 Use `X | Y` for type annotations
Found 2 errors.
No fixes available (2 hidden fixes can be enabled with the `--unsafe-fixes` option).
```

## Expect Behaviour

Run `ruff check .`

Get

```log
All checks passed!
```

---

_Comment by @trim21 on 2024-04-21 09:54_

It's expected 

https://github.com/astral-sh/ruff/issues/5641

---

_Closed by @lumina37 on 2024-04-21 10:02_

---

_Comment by @lumina37 on 2024-04-21 10:04_

> It's expected
> 
> #5641

thx a lot!
this issue is closed as duplication.

---
