---
number: 1869
title: "Autofix breaks functionality ('==' is changed to 'is')"
type: issue
state: closed
author: akanz1
labels: []
assignees: []
created_at: 2023-01-14T09:01:26Z
updated_at: 2023-01-14T09:05:12Z
url: https://github.com/astral-sh/ruff/issues/1869
synced_at: 2026-01-07T12:31:12-06:00
---

# Autofix breaks functionality ('==' is changed to 'is')

---

_Issue opened by @akanz1 on 2023-01-14 09:01_

For certain cases with e.g. pandas the autofix functionality causes undesirable changes as something along the lines of

`ser.loc[ser == False]` gets changed to `ser.loc[ser is False]`.

I haven't observed it yet, but i'm also aware of cases using SQLAlchemy where `==` is required and `is` does not work.

```python
import pandas as pd
ser = pd.Series({"a":True, 'b':False, 'c':True}, dtype='bool')
ser.loc[ser == False]
```

![image](https://user-images.githubusercontent.com/51492342/212464419-78785756-309a-46fa-9ab8-4a0d59ef39bc.png)

After autofix the functionality is broken
```bash
>>> ser.loc[ser is False]
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/Users/akanz/mambaforge/envs/.../lib/python3.8/site-packages/pandas/core/indexing.py", line 967, in __getitem__
    return self._getitem_axis(maybe_callable, axis=axis)
  File "/Users/akanz/mambaforge/envs/.../lib/python3.8/site-packages/pandas/core/indexing.py", line 1201, in _getitem_axis
    self._validate_key(key, axis)
  File "/Users/akanz/mambaforge/envs/.../lib/python3.8/site-packages/pandas/core/indexing.py", line 1011, in _validate_key
    raise KeyError(
KeyError: 'False: boolean label can not be used without a boolean index'
```

See also #1852 


---

_Comment by @akanz1 on 2023-01-14 09:05_

closing in favor of #1852 

---

_Closed by @akanz1 on 2023-01-14 09:05_

---
