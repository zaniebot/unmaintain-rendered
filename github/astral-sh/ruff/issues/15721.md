---
number: 15721
title: N806 - function scoped constans in upper case
type: issue
state: open
author: Pijukatel
labels:
  - question
  - rule
  - needs-decision
assignees: []
created_at: 2025-01-24T15:19:50Z
updated_at: 2025-01-24T18:45:54Z
url: https://github.com/astral-sh/ruff/issues/15721
synced_at: 2026-01-07T12:31:13-06:00
---

# N806 - function scoped constans in upper case

---

_Issue opened by @Pijukatel on 2025-01-24 15:19_

### Description

Hello, I have a question about rule [N806.](https://docs.astral.sh/ruff/rules/non-lowercase-variable-in-function/)

This is the simplified use that triggers the rule:
```
def foo(x):
    VERY_DESCRIPTIVE_NAME = 1.23456 # Used only in this function
    # Some complex calculations
    return x * VERY_DESCRIPTIVE_NAME 
```

I have checked [PEP8 - constants](https://peps.python.org/pep-0008/#constants), but I didn't find a hard restriction on defining constant in a function. 
To my interpretation very relaxed formulation "Constants are **usually** defined..." doesn't prohibit defining function scoped constants. 

I am not sure in which way is the ruff trying to steer me, but none of the alternatives seems good to me.
Alternatives:
1 - Have the function scoped constant lower case.
2 - Define this constant outside of the function despite the fact that it is relevant and used only in this single function.
3 - Using unnamed inline constant with a comment explaining it.





---

_Label `question` added by @dylwil3 on 2025-01-24 18:38_

---

_Label `rule` added by @dylwil3 on 2025-01-24 18:38_

---

_Label `needs-decision` added by @dylwil3 on 2025-01-24 18:39_

---

_Comment by @MichaReiser on 2025-01-24 18:43_

This sounds related to https://github.com/astral-sh/ruff/issues/13550 with the exception that it's a "constant" literal to the right. 

I could see an argument for assignments annotated with `typing.Final`, although @AlexWaygood seemed to be against this in the linked issue

---

_Comment by @dylwil3 on 2025-01-24 18:43_

You raise an interesting point. It has come up in the `pep8-naming` linter (e.g. https://github.com/PyCQA/pep8-naming/issues/87) and it looks like they settled on keeping the rule as is. 

I could see an argument for any of the following:

1. Keeping the rule as is, and relying on suppression comments or ignoring the rule if the lint is undesired. (This outcome probably wouldn't feel very nice on your end.)
2. Skipping the lint if the constant is annotated with `Final` (Seems pretty safe to me)
3. Skipping the lint if the assignment is to a literal.
4. Skipping the lint if the assignment is to a literal and no further bindings are present in the function scope.

Edit: I didn't see that related issue before. Alex makes good points, I'm sort of inclined to agree.

---

_Referenced in [apify/crawlee-python#930](../../apify/crawlee-python/pulls/930.md) on 2025-01-27 07:23_

---
