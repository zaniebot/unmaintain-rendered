---
number: 9584
title: "false positive on PLC2801 \"unnecessary dunder... for __setattr__\""
type: issue
state: closed
author: dimbleby
labels:
  - bug
assignees: []
created_at: 2024-01-19T19:01:16Z
updated_at: 2024-01-20T00:59:48Z
url: https://github.com/astral-sh/ruff/issues/9584
synced_at: 2026-01-07T12:31:13-06:00
---

# false positive on PLC2801 "unnecessary dunder... for __setattr__"

---

_Issue opened by @dimbleby on 2024-01-19 19:01_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->
ruff 0.1.13
```python
from dataclasses import dataclass, field


@dataclass(frozen=True)
class Foo:
    a: int
    b: int
    c: int = field(init=False)

    def __post_init__(self) -> None:
        object.__setattr__(self, "c", self.a + self.b)
```

the `__setattr__` trick is necessary because the dataclass is frozen, but: 
```
PLC2801 Unnecessary dunder call to `__setattr__`. Mutate attribute directly or use setattr built-in function.
```

via https://github.com/astral-sh/ruff/pull/9166 presumably

looks like y'all went round this once already at https://github.com/astral-sh/ruff/pull/4752...

---

_Comment by @trag1c on 2024-01-19 19:10_

IMO all instances of `object` dunder calls should be allowed considering they're so common (would likely prevent a third round of this issue :)).

---

_Comment by @charliermarsh on 2024-01-20 00:59_

I believe this is fixed on main, and in v0.1.14 https://play.ruff.rs/73935842-d2c6-4b42-b5de-545c9a5be633.

---

_Closed by @charliermarsh on 2024-01-20 00:59_

---

_Label `bug` added by @charliermarsh on 2024-01-20 00:59_

---

_Referenced in [astral-sh/ruff#11636](../../astral-sh/ruff/issues/11636.md) on 2024-05-31 12:48_

---
