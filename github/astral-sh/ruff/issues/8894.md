---
number: 8894
title: "Formatter: `parenthesize_long_type_hints` preview style"
type: issue
state: closed
author: MichaReiser
labels:
  - formatter
  - preview
assignees: []
created_at: 2023-11-29T02:36:25Z
updated_at: 2024-01-10T16:28:57Z
url: https://github.com/astral-sh/ruff/issues/8894
synced_at: 2026-01-07T12:31:12-06:00
---

# Formatter: `parenthesize_long_type_hints` preview style

---

_Issue opened by @MichaReiser on 2023-11-29 02:36_

Implement Black's [`parenthesize_long_type_hints`](https://github.com/psf/black/pull/3899) as a preview style in Ruff. 


```python
def foo(
    i: int,
    x: Loooooooooooooooooooooooong
    | Looooooooooooooooong
    | Looooooooooooooooooooong
    | Looooooong,
    *,
    s: str,
) -> None:
    pass

# Formats now to 

def foo(
    i: int,
    x: (
        Loooooooooooooooooooooooong
        | Looooooooooooooooong
        | Looooooooooooooooooooong
        | Looooooong
    ),
    *,
    s: str,
) -> None:
    pass

```

This seems to be similar to what Ruff used to have but we reverted in https://github.com/astral-sh/ruff/pull/8233. We should investigate why Black isn't breaking the list on the left for 

```python
tags: List[str] = [],  # noqa: B006 - ignored by automatic migration, but should be fixed
``` 

Which people found ugly. Maybe it's because of https://github.com/astral-sh/ruff/issues/6975?



---

_Label `formatter` added by @MichaReiser on 2023-11-29 02:36_

---

_Label `preview` added by @MichaReiser on 2023-11-29 02:36_

---

_Added to milestone `Formatter: Stable` by @MichaReiser on 2023-11-29 02:36_

---

_Referenced in [astral-sh/ruff#8678](../../astral-sh/ruff/issues/8678.md) on 2023-11-29 02:37_

---

_Comment by @jakkdl on 2023-12-06 14:56_

heya, author of the PRs that added the feature in black. Lemme know if you encounter anything weird or wonder something about my implementation choices.

---

_Comment by @charliermarsh on 2023-12-06 17:03_

Thanks @jakkdl that's very kind of you :)

---

_Assigned to @MichaReiser by @MichaReiser on 2023-12-08 14:03_

---

_Referenced in [astral-sh/ruff#9102](../../astral-sh/ruff/pulls/9102.md) on 2023-12-12 03:24_

---

_Referenced in [astral-sh/ruff#9210](../../astral-sh/ruff/pulls/9210.md) on 2023-12-20 10:29_

---

_Referenced in [psf/black#4123](../../psf/black/issues/4123.md) on 2023-12-22 10:19_

---

_Comment by @MichaReiser on 2023-12-22 10:32_

We've implemented the changes for parenthesizing type hints in annotated assignments but are holding off on implementing the proposed layout for type hints in parameters. See https://github.com/psf/black/issues/4123 for the rational.

---

_Closed by @MichaReiser on 2024-01-10 16:28_

---
