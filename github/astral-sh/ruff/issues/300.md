---
number: 300
title: Flag unused imports even with redefinition
type: issue
state: closed
author: charliermarsh
labels: []
assignees: []
created_at: 2022-10-02T17:24:23Z
updated_at: 2022-12-16T05:28:23Z
url: https://github.com/astral-sh/ruff/issues/300
synced_at: 2026-01-07T12:31:12-06:00
---

# Flag unused imports even with redefinition

---

_Issue opened by @charliermarsh on 2022-10-02 17:24_

Given this code:

```py
import os
import os
```

We return:

```
Found 1 error(s).
foo.py:2:1: F401 `os` imported but unused
```

Flake8 does this:

```
foo.py:2:1: F811 redefinition of unused 'os' from line 1
foo.py:2:1: F401 'os' imported but unused
```

My preference would be:

```
Found 2 error(s).
foo.py:1:1: F401 `os` imported but unused
foo.py:2:1: F401 `os` imported but unused
```

---

_Label `enhancement` added by @charliermarsh on 2022-10-02 17:24_

---

_Label `good first issue` added by @charliermarsh on 2022-10-02 17:24_

---

_Comment by @Cxxshyy on 2022-10-18 20:21_

hi im fairly new to rust but can have a go at this so can you first tell me what file handle this and ill take a look

---

_Label `good first issue` removed by @charliermarsh on 2022-10-18 21:06_

---

_Comment by @charliermarsh on 2022-10-18 21:09_

@Cxxshyy - Awesome! I marked this as `good first issue` a few weeks back but I think it may be deceptively tricky. (It requires some extra book-keeping to understand when an import "redefines" another import, since you can have imports split across `if`-`else` blocks and so on.)

If you're looking for a place to contribute, a good starting point might be to take a rule you like from [`flake8-bugbear`](https://github.com/PyCQA/flake8-bugbear) and add it to Ruff (#389). I wrote some instructions on a similar issue in [here](https://github.com/charliermarsh/ruff/issues/312#issuecomment-1280008634) that would be helpful for understanding how to add a new check. Does that look interesting to you?


---

_Comment by @Cxxshyy on 2022-10-18 21:19_

yes that looks interesting ill have a look at this tomorrow 

---

_Comment by @charliermarsh on 2022-10-18 21:20_

Cool, don't hesitate to ask questions, I'd love to be helpful.

---

_Comment by @Cxxshyy on 2022-10-18 21:21_

will do thanks


---

_Comment by @charliermarsh on 2022-12-16 05:28_

This got resolved when we added the redefined-while-unused checks.

---

_Closed by @charliermarsh on 2022-12-16 05:28_

---
