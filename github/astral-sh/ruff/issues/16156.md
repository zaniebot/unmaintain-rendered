---
number: 16156
title: "Question: Best way to handle S608 triggers on GAQL"
type: issue
state: closed
author: lociii
labels:
  - question
assignees: []
created_at: 2025-02-14T08:58:31Z
updated_at: 2025-02-17T12:52:46Z
url: https://github.com/astral-sh/ruff/issues/16156
synced_at: 2026-01-07T12:31:13-06:00
---

# Question: Best way to handle S608 triggers on GAQL

---

_Issue opened by @lociii on 2025-02-14 08:58_

### Description

Hey there,

we're using the fantastic ruff tool to keep our Python projects in shape. Thanks for all the hard work that went into it. \

ruff version in use: `0.9.6`

As we're communicating with Google Ads APIs, we run into the problem that [GAQL](https://developers.google.com/google-ads/api/docs/query/overview) queries are detected as SQL queries and therefore raise `S608` violations.

Example:
```python
query = f"""
    SELECT
    customer.status
    FROM customer
    WHERE customer.id = {customer_id}
"""
```

What would be the best way to handle this without turning off S608 for this specific piece of code?

Further information about GAQL and escaping: https://github.com/googleads/google-ads-python/issues/732

---

_Renamed from "S608 triggers on GAQL" to "Question: Best way to handle S608 triggers on GAQL" by @lociii on 2025-02-14 08:59_

---

_Comment by @InSyncWithFoo on 2025-02-14 09:51_

I don't know GAQL, so here are some stupid questions.

What happens if the query is changed so that it contains a syntax error? What if it is changed to use more resources than necessary? What if it is changed so that extra data is returned?

The comment in the linked issue just says "[GAQL is] not susceptible to the same types of injection attacks as SQL". I don't think that is the same as "GAQL is completely fool-proof".

---

_Comment by @MichaReiser on 2025-02-14 15:24_

You can use `per-file-ignores` to disable `S608` on a selected set of files if you know those fails don't contain any "real" SQL statements. 

The only other remedy is to use inline `noqa: S608` suppression comments.

However, I do agree with @InSyncWithFoo that there's still the risk that some can alter the query. E.G. you get all customer status if `customer_id` is `1 OR true`

---

_Label `question` added by @dylwil3 on 2025-02-16 13:56_

---

_Comment by @lociii on 2025-02-17 12:52_

> What happens if the query is changed so that it contains a syntax error? What if it is changed to use more resources than necessary? What if it is changed so that extra data is returned?
> The comment in the linked issue just says "[GAQL is] not susceptible to the same types of injection attacks as SQL". I don't think that is the same as "GAQL is completely fool-proof".

I guess Google doesn't care as it's limited on their side by the scope of the API token. When managing multiple customers, it's the responsibility of the managing account to make sure no data is leaked. \
So yes, some kind of protection is needed.

> You can use `per-file-ignores` to disable `S608` on a selected set of files if you know those fails don't contain any "real" SQL statements.

That's what we're currently doing.

Alright. Thanks!
Just wanted to make sure that we're not missing anything.

---

_Closed by @lociii on 2025-02-17 12:52_

---
