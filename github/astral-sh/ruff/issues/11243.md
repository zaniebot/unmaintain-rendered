---
number: 11243
title: PT006 breaks test by removing tuple from parametrize
type: issue
state: closed
author: Pebin
labels:
  - bug
  - fixes
assignees: []
created_at: 2024-05-02T08:46:24Z
updated_at: 2024-12-09T08:58:53Z
url: https://github.com/astral-sh/ruff/issues/11243
synced_at: 2026-01-07T12:31:13-06:00
---

# PT006 breaks test by removing tuple from parametrize

---

_Issue opened by @Pebin on 2024-05-02 08:46_

PT006 breaks test, removes tuple just from argnames but not from argvalues

```
@pytest.mark.parametrize(("thresholds",), [([0.6, 0.3],), ([],)])
```

is replaced as 
```
@pytest.mark.parametrize("thresholds", [([0.6, 0.3],), ([],)])
```

so now thresholds contains tuple of list. Shouldn't the fix remove also the brackets inside so the result would be:
```
@pytest.mark.parametrize("thresholds", [[0.6, 0.3], []])
```

command:
`ruff tests/test.py --fix`


ruff 0.4.2, no special settings needed, python 3.9


---

_Label `bug` added by @charliermarsh on 2024-05-02 14:28_

---

_Label `fixes` added by @charliermarsh on 2024-05-02 14:28_

---

_Comment by @jhbuhrman on 2024-09-18 13:45_

This is a serious breakage; `ruff --fix` introduces an error.

The `--fix` option should also "fix" (i.e. de-tuple) the parameter value if it de-tuples the `argnames` parameter in case of a single parameter.

Apart from that, I find the obligatory (non-configurable) special case of tuple/list-less `argnames` in case of a single parameter quite questionable (if you later on would like to extend your test case with an additional parameter, you suddenly have to tuplify everything). I would prefer yet another configuration item that controls this quite opiniated preference for single parameter cases.

---

_Label `needs-mre` added by @dylwil3 on 2024-11-10 03:45_

---

_Label `needs-mre` removed by @dylwil3 on 2024-11-10 03:57_

---

_Referenced in [astral-sh/ruff#14699](../../astral-sh/ruff/pulls/14699.md) on 2024-12-02 12:00_

---

_Closed by @MichaReiser on 2024-12-09 08:58_

---

_Referenced in [astral-sh/ruff#15324](../../astral-sh/ruff/issues/15324.md) on 2025-01-07 19:24_

---
