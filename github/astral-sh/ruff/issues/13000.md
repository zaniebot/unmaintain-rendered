---
number: 13000
title: Importing and Referencing a Sub Module will eliminate necessary import code
type: issue
state: open
author: csotto
labels:
  - bug
assignees: []
created_at: 2024-08-20T01:50:54Z
updated_at: 2024-08-20T16:06:46Z
url: https://github.com/astral-sh/ruff/issues/13000
synced_at: 2026-01-07T12:31:13-06:00
---

# Importing and Referencing a Sub Module will eliminate necessary import code

---

_Issue opened by @csotto on 2024-08-20 01:50_

### ruff 0.6.1  
ruff check ruff_PR.py --isolated

## PROBLEM
If requested to fix F401 ruff will eliminate line 2  (from pyannotate_runtime import collect_types) causing the error below:

Traceback (most recent call last):
  File "D:\_GIT_sources\cryptoinvestccxt\lixo\ruff_PR.py", line 6, in <module>
    par.collect_types.init_types_collection()
    ^^^^^^^^^^^^^^^^^
AttributeError: module 'pyannotate_runtime' has no attribute 'collect_types'

## SAMPLE CODE TO REPRODUCE:
```
import pyannotate_runtime as par
from pyannotate_runtime import collect_types
# from par import collect_types

if __name__ == "__main__":
    par.collect_types.init_types_collection()
    par.collect_types.collect()
    a = 1
    print("Dumping pyannotate...")
    par.collect_types.dump_stats('ruff_PR_type_info.json')
```
### Run Result
```
$  ruff check ruff_PR.py --isolated
ruff_PR.py:2:32: F401 [*] `pyannotate_runtime.collect_types` imported but unused
  |
1 | import pyannotate_runtime as par
2 | from pyannotate_runtime import collect_types
  |                                ^^^^^^^^^^^^^ F401
3 | # from par import collect_types
  |
  = help: Remove unused import: `pyannotate_runtime.collect_types`

Found 1 error.
[*] 1 fixable with the `--fix` option.
```



---

_Label `bug` added by @dhruvmanila on 2024-08-20 03:11_

---

_Comment by @dhruvmanila on 2024-08-20 03:11_

This seems tricky without multi-file analysis. It seems that the `collect_types` module isn't re-exported in the `__init__.py` file, so using these two imports one can access the `collect_types` module either directly or via the `par` import but not without importing the `collect_types` module.

@csotto For the time being, I think you can safely remove the `import pyannotate_runtime as par` import and use `collect_types` directly.

Related issues: #11448, #4656, #60

---

_Renamed from "Importing and Referencing a Sub Module will eliminate necessary code" to "Importing and Referencing a Sub Module will eliminate necessary import code" by @csotto on 2024-08-20 15:54_

---

_Comment by @csotto on 2024-08-20 16:06_

@dhruvmanila Thanks for your comment. I agree.

---
