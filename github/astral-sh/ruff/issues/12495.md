---
number: 12495
title: SyntaxError on py2 code
type: issue
state: closed
author: serjflint
labels: []
assignees: []
created_at: 2024-07-24T17:02:11Z
updated_at: 2024-07-25T07:29:44Z
url: https://github.com/astral-sh/ruff/issues/12495
synced_at: 2026-01-07T12:31:13-06:00
---

# SyntaxError on py2 code

---

_Issue opened by @serjflint on 2024-07-24 17:02_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->
Hi! After updating from 0.3.4 to 0.5.3 ruff started to print unskippable (can't noqa them) SyntaxError.
Previously comments like `# noqa: E999 py2 incompatibility` worked fine.
An easiest reproducer would be `{}.get('a', 0L)`.


---

_Comment by @MichaReiser on 2024-07-24 19:03_

Ruff doesn't support parsing or analyzing Python 2. I recommend you to `exclude` python 2 files.

---

_Comment by @serjflint on 2024-07-24 20:21_

> Ruff doesn't support parsing or analyzing Python 2. I recommend you to `exclude` python 2 files.

It's certainly a reasonable approach. And I don't really want to check them. But it's too much work to separate. The extension is the same for both py2 and py3 files and there is no easy way to build a regex. Tens of thousands of files in different directories. 

The thing is, in previous versions of ruff I could just noqa them in place. Putting a noqa at the beginning of the file doesn't help (as in pylint). On the other hand, only about 10 files raised a SyntaxError when checked by ruff.

---

_Comment by @MichaReiser on 2024-07-25 05:54_

> The thing is, in previous versions of ruff I could just noqa them in place. Putting a noqa at the beginning of the file doesn't help (as in pylint). On the other hand, only about 10 files raised a SyntaxError when checked by ruff.

You can still do the same, but instead of adding a noqa for those few files, add them to your "exclude" configuration.

---

_Closed by @MichaReiser on 2024-07-25 05:54_

---

_Comment by @dhruvmanila on 2024-07-25 06:23_

https://astral.sh/blog/ruff-v0.5.0#changes-to-e999-and-reporting-of-syntax-errors provides some context on why this was done.

---

_Comment by @serjflint on 2024-07-25 07:29_

> https://astral.sh/blog/ruff-v0.5.0#changes-to-e999-and-reporting-of-syntax-errors provides some context on why this was done.

Thank you. Now I see the reasoning. 

---
