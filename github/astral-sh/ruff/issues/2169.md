---
number: 2169
title: T201 autofix can break code that actually should print things
type: issue
state: closed
author: akx
labels:
  - fixes
assignees: []
created_at: 2023-01-25T20:04:34Z
updated_at: 2023-02-08T02:44:06Z
url: https://github.com/astral-sh/ruff/issues/2169
synced_at: 2026-01-07T12:31:12-06:00
---

# T201 autofix can break code that actually should print things

---

_Issue opened by @akx on 2023-01-25 20:04_

I'm applying (more!) Ruff to https://github.com/python-babel/babel/ and figured I'd try `--select=ALL --fix` and look through the diff, and found a surprising combination of breaking autofixes â€“ maybe the autofix for T201 ("`print` found") should also be made a suggestion (as there's been discussion for some other rules in other issues here), not a default?

```python
def _help(self):
    longest = max(len(command) for command in self.commands)
    format = "  %%-%ds %%s" % max(8, longest + 1)
    commands = sorted(self.commands.items())
    for name, description in commands:
        print(format % (name, description))
```
`cargo run -- --diff --select=ALL --no-cache`:
```diff
--- tests/bab.py
+++ tests/bab.py
@@ -1,6 +1,6 @@
 def _help(self):
     longest = max(len(command) for command in self.commands)
-    format = "  %%-%ds %%s" % max(8, longest + 1)
+    "  %%-%ds %%s" % max(8, longest + 1)
     commands = sorted(self.commands.items())
-    for name, description in commands:
-        print(format % (name, description))
+    for _name, _description in commands:
+        pass
```
(and then the interpolation operation becomes a no-op and when `longest` is no longer used, that gets removed too...)

---

_Comment by @charliermarsh on 2023-01-25 20:08_

Is the generated code actually _invalid_? Or it just doesn't do what was intended? Like does it run? (Just confirming.)

---

_Comment by @akx on 2023-01-25 20:16_

Oh, yeah, sorry, should've been more clear there!

It does run but it no longer does anything of value since all it was meant to do was print things and the autofix got rid of that. This is really of course only an issue if `T201` is enabled and not marked `unfixable` :)

---

_Comment by @charliermarsh on 2023-01-25 20:18_

No totally! Just making sure we weren't producing invalid syntax.

I'm more and more feeling like we should disable a bunch of autofixes by default and require users to opt-in to them. This is a useful rule but it's probably surprising that it autofixes itself.

---

_Label `autofix` added by @charliermarsh on 2023-01-26 14:54_

---

_Comment by @spaceone on 2023-01-26 18:31_

I also wondered what `T201` is about. I don't understand its purpose. This maybe makes sense for a library.
I aksed that upstream in https://github.com/JBKahn/flake8-print/issues/59.

---

_Comment by @akx on 2023-01-26 18:32_

@spaceone It makes a lot of sense for libraries or e.g. webapps where you don't want your views or models or whatnot to randomly print things out (e.g. where the policy would be to use `logging`).

---

_Comment by @charliermarsh on 2023-02-08 02:44_

This was removed.

---

_Closed by @charliermarsh on 2023-02-08 02:44_

---
