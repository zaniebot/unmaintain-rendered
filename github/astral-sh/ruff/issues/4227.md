---
number: 4227
title: PYI015 covers parts of PYI052
type: issue
state: closed
author: twoertwein
labels:
  - bug
  - good first issue
assignees: []
created_at: 2023-05-04T18:27:30Z
updated_at: 2023-05-16T01:59:10Z
url: https://github.com/astral-sh/ruff/issues/4227
synced_at: 2026-01-07T12:31:12-06:00
---

# PYI015 covers parts of PYI052

---

_Issue opened by @twoertwein on 2023-05-04 18:27_

flake8-pyi
> Y015 | Only simple default values are allowed for assignments. Similar to Y011, but for assignments rather than parameter annotations.
> -- | --
> Y052 | Y052 disallows assignments to constant values where the assignment does not have a type annotation. For example, x = 0 in the global namespace is ambiguous in a stub, as there are four different types that could be inferred for the variable x: int, Final[int], Literal[0], or Final[Literal[0]]. Enum members are excluded from this check, as are various special assignments such as __all__ and __match_args__.

ruff seems to include Y52 in Y15 but does not exclude enums.

in pyi file:
```py
from enum import Enum

class _NoDefault(Enum):
    no_default = ...

no_default: Final = _NoDefault.no_default  # noqa: PYI015
NoDefault = Literal[_NoDefault.no_default]
```

xref https://github.com/pandas-dev/pandas/pull/53062#discussion_r1185161948

---

_Label `bug` added by @charliermarsh on 2023-05-04 18:35_

---

_Comment by @charliermarsh on 2023-05-05 18:12_

üëç I think the best solution here is to implement `Y052`, and fix `Y015` such that they're non-overlapping (as in `flake8-pyi`).

---

_Label `good first issue` added by @charliermarsh on 2023-05-06 03:26_

---

_Comment by @sladyn98 on 2023-05-06 20:36_

@charliermarsh I would like to work on this issue, can you point me to some code pointers and I can work on it.

---

_Comment by @mccullocht on 2023-05-06 20:52_

@sladyn98 I briefly looked into this. The [pylint](https://github.com/PyCQA/flake8-pyi/blob/7425435c81d852a3c5a4be45a5b714785cec4ce1/pyi.py#L996) implementation of `Y052` and `Y015` appear together, it probably makes sense structure things similarly and place it near the [ruff](https://github.com/charliermarsh/ruff/blob/539af34f585eee4d762f6bd01ca508429c35d85e/crates/ruff/src/rules/flake8_pyi/rules/simple_defaults.rs#L396) implementation of `Y015`.

---

_Referenced in [astral-sh/ruff#4271](../../astral-sh/ruff/pulls/4271.md) on 2023-05-08 00:10_

---

_Comment by @charliermarsh on 2023-05-16 01:59_

Closed by https://github.com/charliermarsh/ruff/pull/4293.

---

_Closed by @charliermarsh on 2023-05-16 01:59_

---
