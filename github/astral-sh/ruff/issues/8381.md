---
number: 8381
title: "formatter: Implicit tuple from trailing comma behaviour differs from black"
type: issue
state: closed
author: peterjc
labels:
  - formatter
assignees: []
created_at: 2023-10-31T17:06:19Z
updated_at: 2023-10-31T19:25:51Z
url: https://github.com/astral-sh/ruff/issues/8381
synced_at: 2026-01-07T12:31:12-06:00
---

# formatter: Implicit tuple from trailing comma behaviour differs from black

---

_Issue opened by @peterjc on 2023-10-31 17:06_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

Test case, note the trailing comma (based on https://github.com/peterjc/thapbi-pict/commit/580f74c89d7b988a64a596f72eeef7aa1559d550 - a real example where this was unintended):

```shell
$ cat tests.py 
import sys

sys.stderr.write("Hello world\n"),
```

Black makes no changes:

```
$ black --version
black, 23.10.1 (compiled: yes)
Python (CPython) 3.10.12

$ black --diff tests.py
All done! ‚ú® üç∞ ‚ú®
1 file would be left unchanged.
```

Ruff does make an unwelcome change:

```
$ ruff --version
ruff 0.1.3

$ ruff format --diff tests.py 
--- tests.py
+++ tests.py
@@ -1,3 +1,3 @@
 import sys
 
-sys.stderr.write("Hello world\n"),
+(sys.stderr.write("Hello world\n"),)

1 file would be reformatted
```

i.e. Ruff makes the (unintended) tuple explicit.

In this instance the ruff output alerted me to a harmless stylistic error in my code, but the appears to me an unexpected difference from black.

---

_Comment by @zanieb on 2023-10-31 17:09_

Hi! Thanks for the issue.

This is an intentional deviation documented at https://docs.astral.sh/ruff/formatter/black/#single-element-tuples-are-always-parenthesized ‚Äî we believe this makes accidental tuples easier to notice.

---

_Label `formatter` added by @zanieb on 2023-10-31 17:09_

---

_Closed by @zanieb on 2023-10-31 17:09_

---

_Comment by @peterjc on 2023-10-31 19:23_

Got it. I missed that in the docs, sorry.

Yes, it certainly makes accidental tuples easier to notice. Thanks.

---

_Comment by @charliermarsh on 2023-10-31 19:25_

Thanks for filing, and for writing such a clear issue.

---
