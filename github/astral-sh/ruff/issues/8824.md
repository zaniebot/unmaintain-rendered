---
number: 8824
title: new rules for pandas 2.0 deprecations
type: issue
state: open
author: morotti
labels:
  - rule
assignees: []
created_at: 2023-11-23T12:03:22Z
updated_at: 2024-03-07T05:15:55Z
url: https://github.com/astral-sh/ruff/issues/8824
synced_at: 2026-01-07T12:31:12-06:00
---

# new rules for pandas 2.0 deprecations

---

_Issue opened by @morotti on 2023-11-23 12:03_

Hello,

First, thank you for making ruff, it's great!

There are rules around pandas to block deprecated pandas functions, mostly inspired from pandas-vet https://docs.astral.sh/ruff/rules/#pandas-vet-pd

pandas released a new major version 2.0 few months ago, with a bazillion of breaking changes.
is it possible to add new rules to flag and automatically adjust deprecated imports?

import pandas.datetime is removed. to be replaced by import datetime.datetime.

import pandas.util.testing is removed. 
pandas.util.testing.assert_frame_equal -> pandas.testing.assert_frame_equal
pandas.util.testing.assert_series_equal -> pandas.testing.assert_series_equal
pandas.util.testing.assert_almost_equal -> numpy.assert_almost_equal
there are other functions that were available but not all of them are available in a new location.

Thank you.


---

_Comment by @charliermarsh on 2023-11-24 15:20_

Would definitely accept a contribution to this effect -- we've done the same for NumPy.

---

_Label `rule` added by @charliermarsh on 2023-11-24 15:20_

---

_Renamed from "new rules for pandas 2.0 depreciations" to "new rules for pandas 2.0 deprecations" by @charliermarsh on 2023-11-24 17:37_

---

_Comment by @olsgaard on 2024-03-07 05:15_

To what degree does ruff want to implement exceptions for different libraries? 

For example, I find [E712 Comparison to True should be `cond is True`](https://docs.astral.sh/ruff/rules/true-false-comparison) problematic when sub-setting pandas data frames, e.g.

```python
df[df['bool_column_with_nans']] #ValueError: Cannot mask with non-boolean array containing NA / NaN values

df[df['bool_column_with_nans'] == True] #Clear, readable, works, but a problem according to linter
```

As this issue is related to library specific rules, I am wondering to what degree these kind of things can be attached to the topic.

---
