---
number: 2096
title: "Implement `flake8-typing-imports`"
type: issue
state: closed
author: Secrus
labels:
  - plugin
assignees: []
created_at: 2023-01-22T22:53:40Z
updated_at: 2023-01-28T16:41:01Z
url: https://github.com/astral-sh/ruff/issues/2096
synced_at: 2026-01-07T12:31:12-06:00
---

# Implement `flake8-typing-imports`

---

_Issue opened by @Secrus on 2023-01-22 22:53_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

- A minimal code snippet that reproduces the bug.
- The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
- The current Ruff settings (any relevant sections from your `pyproject.toml`).
- The current Ruff version (`ruff --version`).
-->
https://github.com/asottile/flake8-typing-imports

* [ ] [`TYP001`](https://github.com/asottile/flake8-typing-imports) | guard import by `TYPE_CHECKING`
* [ ] [`TYP002`](https://github.com/asottile/flake8-typing-imports) | `@overload` is broken in <3.5.2
* [ ] [`TYP003`](https://github.com/asottile/flake8-typing-imports) | `Union[Match, ...]` or `Union[Pattern, ...]` must be quoted in <3.5.2
* [ ] [`TYP004`](https://github.com/asottile/flake8-typing-imports) | `NamedTuple` does not support methods in 3.6.0
* [ ] [`TYP005`](https://github.com/asottile/flake8-typing-imports) | `NamedTuple` does not support defaults in 3.6.0
* [ ] [`TYP006`](https://github.com/asottile/flake8-typing-imports) | guard `typing` attribute by quoting

---

_Label `plugin` added by @charliermarsh on 2023-01-23 00:17_

---

_Comment by @charliermarsh on 2023-01-23 00:17_

We're planning to implement `flake8-type-checking` (#1785) which, IIUC, covers `TYP001`. I'm _not_ a huge fan of supporting `TYP002` through `TYP005` since we only support Python 3.7+. So I'm tempted _not_ to implement this plugin. Any reactions to what you'd get from #1785?


---

_Comment by @Secrus on 2023-01-25 20:34_

Didn't notice that this is gonna be covered by #1785. Sorry for a waste of time on that

---

_Closed by @Secrus on 2023-01-25 20:34_

---

_Comment by @charliermarsh on 2023-01-25 20:37_

No prob at all.

---

_Comment by @JonathanPlasse on 2023-01-26 09:15_

The [configuration](https://github.com/snok/flake8-type-checking#configuration) of `flake8-typing-imports` is not implemented.
- [ ] `exempt-modules`
- [ ] `strict`
- [ ] `pydantic-enabled`
- [ ] `pydantic-enabled-baseclass-passlist`
- [ ] `fastapi-enabled`
- [ ] `fastapi-dependency-support-enabled`
- [ ] `cattrs-enabled`

We should reopen this issue.

---

_Comment by @charliermarsh on 2023-01-26 14:50_

@JonathanPlasse - I think you're referring to `flake8-type-checking`? I've opened a new issue for configuration at #2195. (I think a new issue is appropriate.)

---

_Comment by @JonathanPlasse on 2023-01-26 19:15_

Oops, my bad. :sweat_smile: 

---

_Comment by @skshetry on 2023-01-28 06:04_

`TYP001` is a bit different than the checks in `flake8-type-checking`. It checks if the `typing` module has a given attribute or not for the specific python version.

So, if I have the following import with `min_python_version=3.8.0` set:
```python
from typing import TypeGuard
```

it'll complain as:
```console
script.py:1:1: TYP001 guard import by `if TYPE_CHECKING:`: TypeGuard
(not in 3.8.0, 3.8.1, 3.8.2, 3.8.3, 3.8.4, 3.8.5, 3.8.6, 3.8.7, 3.8.8, 3.8.9, 3.8.10, 3.8.11, 3.8.12, 3.8.13, 3.8.14, 3.8.15, 3.9.0, 3.9.1, 3.9.2, 3.9.3, 3.9.4, 3.9.5, 3.9.6, 3.9.7, 3.9.8, 3.9.9, 3.9.10, 3.9.11, 3.9.12, 3.9.13, 3.9.14, 3.9.15)
from typing import TypeGuard
^
```

which asks you to guard the import inside `if TYPE_CHECKING`, as `TypeGuard` was only introduced in 3.10 and will fail on runtime.

---

_Comment by @charliermarsh on 2023-01-28 16:40_

@skshetry - Totally and that does seem useful. (I thought `flake8-typing-imports` was only relevant for linting pre-3.7 code, which we don't really support, but I misunderstood that check.)

---

_Referenced in [astral-sh/ruff#2302](../../astral-sh/ruff/issues/2302.md) on 2023-01-28 16:40_

---

_Comment by @charliermarsh on 2023-01-28 16:41_

I'm tracking in #2302.

---

_Referenced in [astral-sh/ruff#2257](../../astral-sh/ruff/issues/2257.md) on 2023-01-30 01:21_

---

_Referenced in [materialsproject/pymatgen#3827](../../materialsproject/pymatgen/pulls/3827.md) on 2024-05-13 14:57_

---
