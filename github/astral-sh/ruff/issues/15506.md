---
number: 15506
title: Support Python 3.14
type: issue
state: closed
author: InSyncWithFoo
labels:
  - tracking
  - python314
assignees: []
created_at: 2025-01-15T15:44:22Z
updated_at: 2025-08-08T12:35:07Z
url: https://github.com/astral-sh/ruff/issues/15506
synced_at: 2026-01-07T12:31:13-06:00
---

# Support Python 3.14

---

_Issue opened by @InSyncWithFoo on 2025-01-15 15:44_

This is the tracking issue for updates required to support Python 3.14.

The major changes are (so far) as follows:

- [PEP 750 â€“ Template Strings](https://peps.python.org/pep-0750/) #17851 
- [PEP 758 â€“ Allow except and except* expressions without parentheses](https://peps.python.org/pep-0758/)
    - https://github.com/astral-sh/ruff/pull/17660
- [PEP 649 â€“ Deferred Evaluation Of Annotations Using Descriptors](https://peps.python.org/pep-0649/) (and [PEP 749](https://peps.python.org/pep-0749/))
    - https://github.com/astral-sh/ruff/pull/17658
- [PEP 765 â€“ Disallow return/break/continue that exit a finally block](https://peps.python.org/pep-0765/)

# Parser Updates

- Support for [template strings](https://peps.python.org/pep-0750/)
    - Let's delay opening an issue for this until the implementation is actually merged in to CPython
- [PEP 758 â€“ Allow except and except* expressions without parentheses](https://peps.python.org/pep-0758/)
    - Might be a quick fix to [these lines](https://github.com/astral-sh/ruff/blob/58807b2980f3f79e6d16d4f1b05231bd66807ee5/crates/ruff_python_parser/src/parser/statement.rs#L1575-L1600) 

# Formatter Updates
- Support for [template strings](https://peps.python.org/pep-0750/)
    - Let's delay opening an issue for this until the implementation is actually merged in to CPython
- Decide how to handle formatting for unparenthesized except tuples
# Syntax Errors
- [PEP 765 â€“ Disallow return/break/continue that exit a finally block](https://peps.python.org/pep-0765/)
    - At the moment, similar errors are only detected by lint rules and may or may not be folded into the more general checks for compiler-emitted syntax errors (see the excellent #17412 for a discussion). It might make sense to implement this as a lint rule until and unless things like "`break` outside of loop" are detected as syntax errors. 
   
# Semantic Model

- Visit template strings in a similar manner to f-strings; in particular we will need to read the "interpolated values" as references
- #15100 

# Affected Rules
It is probably best to wait until the first round of changes to the semantic model have been made before tackling these.

* [missing-f-string-syntax (RUF027)](https://docs.astral.sh/ruff/rules/missing-f-string-syntax/#missing-f-string-syntax-ruf027)
* [invalid-pathlib-with-suffix (`PTH210`)](https://github.com/astral-sh/ruff/blob/55a7f72035390cf1093e4da0cf2462e793bfbce1/crates/ruff_linter/src/rules/flake8_use_pathlib/rules/invalid_pathlib_with_suffix.rs#L52-L55) https://github.com/astral-sh/ruff/pull/19331
* [starmap-zip (`RUF058`)](https://github.com/astral-sh/ruff/pull/15483) https://github.com/astral-sh/ruff/pull/19333
* Many of the rules in [`flake8-type-checking](https://docs.astral.sh/ruff/rules/#flake8-type-checking-tc)
* [`flake8-future-annotations-fa`](https://docs.astral.sh/ruff/rules/#flake8-future-annotations-fa)
* [unnecessary-future-import (UP010)](https://docs.astral.sh/ruff/rules/unnecessary-future-import/#unnecessary-future-import-up010) 

More generally - we should grep for documentation or rules that suggest or mention `from __future__ import annotations` and see if these need to be updated to exclude Python 3.14+.

Below the fold is a list of rules that may need to be adjusted to handle t-strings correctly.

<details markdown="1">
<summary> Rules possibly affected by t-strings </summary>
<ul>
<li><a href="https://docs.astral.sh/ruff/rules/unused-method-argument">unused-method-argument (ARG002)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/useless-expression">useless-expression (B018)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/f-string-docstring">f-string-docstring (B021)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/unnecessary-generator-set">unnecessary-generator-set (C401)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/unnecessary-collection-call">unnecessary-collection-call (C408)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/unnecessary-map">unnecessary-map (C417)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/call-datetime-strptime-without-zone">call-datetime-strptime-without-zone (DTZ007)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/whitespace-before-close-bracket">whitespace-before-close-bracket (E202)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/whitespace-before-punctuation">whitespace-before-punctuation (E203)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/missing-whitespace">missing-whitespace (E231)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/unexpected-spaces-around-keyword-parameter-equals">unexpected-spaces-around-keyword-parameter-equals (E251)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/raw-string-in-exception">raw-string-in-exception (EM101)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/f-string-in-exception">f-string-in-exception (EM102)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/f-string-missing-placeholders">f-string-missing-placeholders (F541)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/f-string-number-format">f-string-number-format (FURB116)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/logging-f-string">logging-f-string (G004)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/f-string-in-get-text-func-call">f-string-in-get-text-func-call (INT001)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/single-line-implicit-string-concatenation">single-line-implicit-string-concatenation (ISC001)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/multi-line-implicit-string-concatenation">multi-line-implicit-string-concatenation (ISC002)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/explicit-string-concatenation">explicit-string-concatenation (ISC003)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/single-string-slots">single-string-slots (PLC0205)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/invalid-character-backspace">invalid-character-backspace (PLE2510)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/invalid-character-sub">invalid-character-sub (PLE2512)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/invalid-character-esc">invalid-character-esc (PLE2513)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/invalid-character-nul">invalid-character-nul (PLE2514)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/invalid-character-zero-width-space">invalid-character-zero-width-space (PLE2515)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/no-self-use">no-self-use (PLR6301)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/assert-on-string-literal">assert-on-string-literal (PLW0129)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/pytest-raises-too-broad">pytest-raises-too-broad (PT011)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/pytest-assert-always-false">pytest-assert-always-false (PT015)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/pytest-fail-without-message">pytest-fail-without-message (PT016)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/pytest-warns-too-broad">pytest-warns-too-broad (PT030)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/explicit-f-string-type-conversion">explicit-f-string-type-conversion (RUF010)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/invalid-index-type">invalid-index-type (RUF016)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/in-empty-collection">in-empty-collection (RUF060)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/unused-noqa">unused-noqa (RUF100)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/hardcoded-bind-all-interfaces">hardcoded-bind-all-interfaces (S104)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/hardcoded-temp-file">hardcoded-temp-file (S108)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/suspicious-mark-safe-usage">suspicious-mark-safe-usage (S308)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/suspicious-url-open-usage">suspicious-url-open-usage (S310)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/hardcoded-sql-expression">hardcoded-sql-expression (S608)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/unsafe-markup-use">unsafe-markup-use (S704)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/multiple-with-statements">multiple-with-statements (SIM117)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/expr-or-true">expr-or-true (SIM222)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/expr-and-false">expr-and-false (SIM223)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/raise-vanilla-args">raise-vanilla-args (TRY003)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/unnecessary-encode-utf8">unnecessary-encode-utf8 (UP012)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/native-literals">native-literals (UP018)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/unicode-kind-prefix">unicode-kind-prefix (UP025)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/printf-string-formatting">printf-string-formatting (UP031)</a></li>
</ul>
</details>


# Miscellaneous To-Dos
- [x] Run [generate_known_standard_library.py](https://github.com/astral-sh/ruff/blob/main/scripts/generate_known_standard_library.py) and make sure `annotationlib` is added


---

_Referenced in [astral-sh/ruff#15483](../../astral-sh/ruff/pulls/15483.md) on 2025-01-15 15:44_

---

_Label `python314` added by @MichaReiser on 2025-01-15 15:46_

---

_Comment by @AlexWaygood on 2025-01-15 16:22_

Thanks. The PEP outlining the release schedule says that the first beta is scheduled for May 6th. I think adding support before then would be premature, as interfaces will be constantly changing until then, but we can add support as soon as we enter the beta period. https://peps.python.org/pep-0745/

---

_Comment by @dylwil3 on 2025-04-17 20:12_

(@InSyncWithFoo I hope you don't mind me hijacking this issue as the official tracking issue ðŸ˜„ )

---

_Label `tracking` added by @dylwil3 on 2025-04-17 20:13_

---

_Comment by @InSyncWithFoo on 2025-04-17 20:49_

@dylwil3 You can't exactly "hijack" it when it was created for this very purpose in the first place, can you?

---

_Comment by @MichaReiser on 2025-04-22 07:50_

We may also need to go through all string related rules to determine if they should apply to the new template strings

---

_Referenced in [astral-sh/ruff#17906](../../astral-sh/ruff/pulls/17906.md) on 2025-05-07 03:50_

---

_Referenced in [astral-sh/ruff#18014](../../astral-sh/ruff/pulls/18014.md) on 2025-05-11 08:12_

---

_Comment by @Rogdham on 2025-05-11 08:15_

> Run [generate_known_standard_library.py](https://github.com/astral-sh/ruff/blob/main/scripts/generate_known_standard_library.py) and make sure annotationlib is added

I have created the PR #18014 after upgrading upstream Python library _stdlibs_.

I can confirm that `annotationlib` and `compression` are both added.

---

_Referenced in [astral-sh/ruff#19331](../../astral-sh/ruff/pulls/19331.md) on 2025-07-14 15:37_

---

_Referenced in [astral-sh/ruff#19333](../../astral-sh/ruff/pulls/19333.md) on 2025-07-14 16:15_

---

_Referenced in [astral-sh/ruff#19355](../../astral-sh/ruff/pulls/19355.md) on 2025-07-15 12:13_

---

_Referenced in [astral-sh/ruff#19358](../../astral-sh/ruff/pulls/19358.md) on 2025-07-15 14:40_

---

_Comment by @MichaReiser on 2025-08-07 13:15_

@dylwil3 should we close this given that we completed all the work on our end or is there some remaining work that needs doing?

---

_Closed by @dylwil3 on 2025-08-08 12:35_

---
