---
number: 11539
title: Ruff formatter removes numpydoc style trailing blank line
type: issue
state: closed
author: manoelpqueiroz
labels:
  - needs-info
assignees: []
created_at: 2024-05-24T23:24:25Z
updated_at: 2024-05-28T14:53:17Z
url: https://github.com/astral-sh/ruff/issues/11539
synced_at: 2026-01-07T12:31:13-06:00
---

# Ruff formatter removes numpydoc style trailing blank line

---

_Issue opened by @manoelpqueiroz on 2024-05-24 23:24_

Hi guys, I've searched for the following terms before opening this issue:

- numpydoc
- D200

## What is happening

Numpydoc style [implements](https://numpydoc.readthedocs.io/en/latest/format.html#short-summary) a blank line for docstrings without parameters, but when I run `ruff format`, it will always reduce the docstring to a single line.

Is there a way to suppress this behaviour for the formatter without having to set `# format: off` and `# format: on` for every single docstring?

---

_Renamed from "Ruff formatter " to "Ruff formatter removes numpydoc style trailing blank line" by @zanieb on 2024-05-24 23:26_

---

_Comment by @charliermarsh on 2024-05-26 17:19_

Can you provide a minimal reproduction? I can't reproduce here:

https://play.ruff.rs/c80020bb-3d36-4ec2-ad30-b7e26540f1ce

---

_Label `needs-info` added by @charliermarsh on 2024-05-26 17:20_

---

_Comment by @MichaReiser on 2024-05-27 11:16_

Is https://play.ruff.rs/8087f802-9528-4a2b-bf34-c39f60d2372f an example of what you're seeing? 

The formatter collapses your docstring (removes empty lines) if the only non-whitespace text comes right after the opening `"""`. The formatter preserves the empty line if you add a line break between the opening `"""` and the documentation.

---

_Comment by @manoelpqueiroz on 2024-05-27 22:14_

Hi @MichaReiser, I can confirm the issue is with the second example you have in the playground.

However, as [linked to](https://numpydoc.readthedocs.io/en/latest/format.html#short-summary) in my earlier comment, Numpydoc style allows for the second kind of docstring, with only a single line and no function signature. Of course, I could just move the single-line docstring one line below as in this [example](https://play.ruff.rs/265a0634-b127-49a7-bc3c-bbdbac5fa3c8), but in this case it would not be in accordance to Numpydoc as seen [here](https://numpydoc.readthedocs.io/en/latest/example.html#id4).

Does the Ruff formatter take into account the `ruff.tool.lint.pydocstyle.convention` variable somehow? Or are they two completely separate things?

Does the project intend to adequate the formatter's behaviour to this Numpydoc peculiarity? If not so, what would you recommend to be done so the "blank line" is preserved when I run the formatter (i.e., ignore this "rule", but keep formatting others)?

---

_Comment by @MichaReiser on 2024-05-28 07:36_

> However, as [linked to](https://numpydoc.readthedocs.io/en/latest/format.html#short-summary) in my earlier comment, Numpydoc style allows for the second kind of docstring, with only a single line and no function signature.

I think it's okay for a formatter to be more strict than what tools allow. Ultimately, the goal of a formatter is to apply consistent formatting and that means to only use a subset of all valid formatting. 

> Every module should have a docstring at the very top of the file. The moduleâ€™s docstring may extend over multiple lines. If your docstring does extend over multiple lines, the closing three quotation marks must be on a line by itself, preferably preceded by a blank line.

The way I read this is that the blank line isn't mandatory, and the blank line is only preferred if it extends over multiple lines. But I'm not sure if this is the section you're referring to. 

> Does the Ruff formatter take into account the ruff.tool.lint.pydocstyle.convention variable somehow? Or are they two completely separate things?

It doesn't. The formatter only applies basic docstring formatting today. We want to add docstring formatting support in the future but don't know when we get around to work on it.

> Does the project intend to adequate the formatter's behaviour to this Numpydoc peculiarity? If not so, what would you recommend to be done so the "blank line" is preserved when I run the formatter (i.e., ignore this "rule", but keep formatting others)?

Ignoring individual "formatter rules" isn't possible because it works as a unit. So it's an all or nothing. 

---

_Comment by @manoelpqueiroz on 2024-05-28 14:53_

Thank you for your clarification on both the context of styling and how the formatter works! Sometimes I get lost on the myriad of options Ruff enables, so I wanted to get this topic clear.

Thanks once again and congratulations on the project, it's awesome to have a single tool to manage a plethora of linting rules already well-established. Keep up the good work!

---

_Closed by @manoelpqueiroz on 2024-05-28 14:53_

---
