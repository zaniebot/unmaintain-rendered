---
number: 11657
title: "[red-knot] symbol table should not own the flow graph"
type: issue
state: closed
author: carljm
labels:
  - ty
assignees: []
created_at: 2024-05-31T21:55:55Z
updated_at: 2024-06-05T12:23:45Z
url: https://github.com/astral-sh/ruff/issues/11657
synced_at: 2026-01-07T12:31:13-06:00
---

# [red-knot] symbol table should not own the flow graph

---

_Issue opened by @carljm on 2024-05-31 21:55_

See https://github.com/astral-sh/ruff/pull/11624#discussion_r1622717731

We probably do want to build symbol tables and flow graph (and find definitions) all in the same AST traversal, and we don't need to separate them since we either need all of them (if we're doing type inference within the module) or none of them (if we aren't). But it's weird for the symbol table to own the flow graph, as it currently does; probably both should be owned by some other structure instead, though I'm not sure what to name it. Index?

---

_Label `red-knot` added by @carljm on 2024-05-31 21:55_

---

_Assigned to @carljm by @carljm on 2024-05-31 21:55_

---

_Referenced in [astral-sh/ruff#11673](../../astral-sh/ruff/pulls/11673.md) on 2024-06-04 19:36_

---

_Referenced in [astral-sh/ruff#11746](../../astral-sh/ruff/pulls/11746.md) on 2024-06-05 00:43_

---

_Closed by @carljm on 2024-06-05 12:23_

---
