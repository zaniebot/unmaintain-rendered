---
number: 12450
title: B013 false positive when using iterable unpacking in except clause
type: issue
state: closed
author: raqbit
labels:
  - bug
  - good first issue
  - rule
  - help wanted
assignees: []
created_at: 2024-07-22T09:47:17Z
updated_at: 2024-07-24T13:19:31Z
url: https://github.com/astral-sh/ruff/issues/12450
synced_at: 2026-01-07T12:31:13-06:00
---

# B013 false positive when using iterable unpacking in except clause

---

_Issue opened by @raqbit on 2024-07-22 09:47_

When unpacking an iterable into a tuple as part of an except clause, `B013` is triggered even though the unpacking can cause the tuple to contain multiple exceptions.

Example:
```python
exceptions = [ConnectionError, PermissionError]

try:
    _foo()
except (*exceptions,):  # B013: A length-one tuple literal is redundant in exception handlers
    pass
```

Repro on ruff playground: https://play.ruff.rs/6b9daf6a-96fb-48ab-9be6-db236f86ec21
Ruff version: 0.5.4

---

As a workaround for my specific use case, the `tuple` constructor accepts an iterable, making the following possible:

```python
try:
    _foo()
except tuple(exceptions):
    pass
```

---

_Comment by @charliermarsh on 2024-07-22 13:09_

Thanks!

---

_Label `bug` added by @charliermarsh on 2024-07-22 13:09_

---

_Label `rule` added by @charliermarsh on 2024-07-22 13:09_

---

_Comment by @raqbit on 2024-07-22 13:43_

Side note: likely as a side-effect of the incorrect detection, the auto-fix for this is also incorrect, as Ruff will turn the except clause into `except <iterable>`, whereas Python only supports tuples in except clauses (which is why the unpacking/tuple constructor is required)[^1].

```python
try:
    _foo()
except exceptions:
    pass
```

[^1]: https://docs.python.org/3/reference/compound_stmts.html#except-clause:~:text=the%20expression%20must%20evaluate

---

_Label `good first issue` added by @charliermarsh on 2024-07-22 14:14_

---

_Label `help wanted` added by @charliermarsh on 2024-07-22 14:14_

---

_Comment by @charliermarsh on 2024-07-22 16:26_

Ah ok, so this _is_ fine with `exceptions = (ConnectionError, PermissionError)`, but not for non-tuple iterables. Got it.

---

_Comment by @charliermarsh on 2024-07-22 16:34_

I think we should just always allow `(*exceptions,)` though. Even if we can detect a tuple, it's a footgun to change to `except exceptions:` since that code will silently break if you change the tuple to a list or other collection later.

---

_Referenced in [astral-sh/ruff#12484](../../astral-sh/ruff/pulls/12484.md) on 2024-07-24 04:29_

---

_Closed by @MichaReiser on 2024-07-24 13:19_

---
