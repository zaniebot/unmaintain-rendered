---
number: 3317
title: "RET503: autofix puts return statements before comments of preceeding line"
type: issue
state: closed
author: onerandomusername
labels:
  - bug
assignees: []
created_at: 2023-03-03T01:28:37Z
updated_at: 2023-03-03T19:15:57Z
url: https://github.com/astral-sh/ruff/issues/3317
synced_at: 2026-01-07T12:31:12-06:00
---

# RET503: autofix puts return statements before comments of preceeding line

---

_Issue opened by @onerandomusername on 2023-03-03 01:28_

### Summary


Ruff's autofix for RET503 will insert the return statement before any comments that go to the line before.



ruff version: 0.0.253

### Repro steps

minimal example code:
```py
def example():
    if True:
        return ""  # type: ignore
```

**command: `ruff repro.py --select RET503 --fix`**

ruff's fixed code:
```py
def example():
    if True:
        return ""
    return None  # type: ignore
```

desired code:
```py
def example():
    if True:
        return ""  # type: ignore
    return None
```

This recreation was executed in an ephemeral environment. There is no pyproject.toml, and all settings are the default except for the command line as mentioned above.

This example has been paired down quite a bit, but I can provide the real-world file where this occurred if that's helpful. 



---

_Label `bug` added by @charliermarsh on 2023-03-03 01:47_

---

_Comment by @charliermarsh on 2023-03-03 05:04_

This has come up once before, will fix tomorrow.

---

_Assigned to @charliermarsh by @charliermarsh on 2023-03-03 19:07_

---

_Referenced in [astral-sh/ruff#3324](../../astral-sh/ruff/pulls/3324.md) on 2023-03-03 19:11_

---

_Closed by @charliermarsh on 2023-03-03 19:15_

---
