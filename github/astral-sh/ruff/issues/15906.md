---
number: 15906
title: "Add `ruff check --fix-only --check`"
type: issue
state: closed
author: jakajancar
labels:
  - question
  - cli
assignees: []
created_at: 2025-02-03T07:57:32Z
updated_at: 2025-02-03T09:43:57Z
url: https://github.com/astral-sh/ruff/issues/15906
synced_at: 2026-01-07T12:31:13-06:00
---

# Add `ruff check --fix-only --check`

---

_Issue opened by @jakajancar on 2025-02-03 07:57_

### Description

Title intentionally ridiculous ... The options are getting pretty convoluted.

With `ruff format` you can (1) request auto-fix (default) or (2) check that said auto-fixes were applied (`--check`).
WIth `ruff check` you can (1) request auto-fix (`--fix-only`) but NOT (2) check that said auto-fixes were applied.

Rationale: run (1) in pre-commit and (2) in CI.



---

_Comment by @AlexWaygood on 2025-02-03 08:18_

Thanks for the suggestion! Does the `--diff` flag we already have for `ruff check` solve this use case?

      --diff
          Avoid writing any fixed files back; instead, output a diff for each
          changed file to stdout, and exit 0 if there are no diffs. Implies
          `--fix-only`

---

_Label `cli` added by @AlexWaygood on 2025-02-03 08:18_

---

_Label `question` added by @MichaReiser on 2025-02-03 08:43_

---

_Comment by @jakajancar on 2025-02-03 09:24_

It does, and I guess that works, the only downside is the output format is not as nice as just `ruff check --output-format concise`.

Maybe before 1.0 it would be nice to clean up the various settings for the various (I think) orthogonal aspects:
  - evaluate fixable rules vs. all
  - fix fixable rules vs. not
  - write files vs. not
  - exit code 1 never vs. if violations vs. if non-fixed violations
  - ...

(similar complications [on the formatter side](https://github.com/astral-sh/ruff/issues/8191))

---

_Comment by @MichaReiser on 2025-02-03 09:43_

yes, streamlining the CLI and reducing the number of -- oftentimes conflicting -- flags is something we want to work on. We may also want to consider respecting `--output-format` for `--diff`.

---

_Closed by @MichaReiser on 2025-02-03 09:43_

---
