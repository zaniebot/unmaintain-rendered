---
number: 13678
title: ARG003 does not seem to respect Protocols
type: issue
state: open
author: harahu
labels:
  - type-inference
assignees: []
created_at: 2024-10-08T10:07:00Z
updated_at: 2024-10-29T11:02:31Z
url: https://github.com/astral-sh/ruff/issues/13678
synced_at: 2026-01-07T12:31:13-06:00
---

# ARG003 does not seem to respect Protocols

---

_Issue opened by @harahu on 2024-10-08 10:07_

The ruff rule`ARG003: unused-class-method-argument` does not seem to understand that unused arguments sometimes are necessary in order to implement a protocol. See example below:

```py
from abc import abstractmethod
from typing import Protocol


class A(Protocol):
    @classmethod
    @abstractmethod
    def foo(cls, bar: str) -> str:
        raise NotImplementedError


class B(A):
    @classmethod
    def foo(cls, bar: object) -> str:
        return "foo"

```

https://play.ruff.rs/204c57b4-a35e-48d5-8f92-ca2e109dd2cd

This problem appears in ruff 0.6.9

---

_Comment by @MichaReiser on 2024-10-08 10:47_

All Ruff rules don't understand Protocols, or class inheritance (with few hardcoded exceptions) because Ruff doesn't support multifile analysis (it doesn't understand the `Protocol` type nor can it resolve the class `A` if it is defined in another file). 

For now, I suggest that you add a `@typing.override` decorator to `B.foo`. It let's Ruff know that this is an overridden method and that extra arguments are intentional. 

---

_Label `type-inference` added by @MichaReiser on 2024-10-08 10:47_

---

_Label `multifile-analysis` added by @MichaReiser on 2024-10-08 10:47_

---

_Comment by @harahu on 2024-10-08 11:55_

I appreciate your clear explanation of the current limitations of ruff. Also appreciate the advice on `@typing.override`. Thanks!

I understand that there is a significant backlog of features hinging on type inference and multi-file analysis, so I wish you guys all the best in working towards those. Ruff is already really great, but would undoubtedly be even better with those capabilities implemented.

---

_Label `multifile-analysis` removed by @MichaReiser on 2024-10-24 14:33_

---

_Comment by @PeturEgilsson-Zoetis on 2024-10-29 11:02_

Same issue with inherited methods, such as:

```
class Foobar(IntEnum):
    A = 1
    B = 2
    UNKNOWN = 255

    @classmethod
    def _missing_(cls, value: object) -> Foobar:  # ruff reports ARG003 error on value
        return cls.UNKNOWN
```

---
