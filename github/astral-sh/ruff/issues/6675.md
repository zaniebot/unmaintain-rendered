---
number: 6675
title: "Formatter: Optional empty line after class docstring"
type: issue
state: closed
author: MichaReiser
labels:
  - formatter
  - needs-decision
assignees: []
created_at: 2023-08-18T13:25:40Z
updated_at: 2023-09-08T07:15:56Z
url: https://github.com/astral-sh/ruff/issues/6675
synced_at: 2026-01-07T12:31:12-06:00
---

# Formatter: Optional empty line after class docstring

---

_Issue opened by @MichaReiser on 2023-08-18 13:25_

This comes up frequently in the django project. 

**Input**

```python
class UnaryPredicate(GEOSFuncFactory):
    "For GEOS unary predicate functions."
    argtypes = [GEOM_PTR]

class UnaryPredicate2(GEOSFuncFactory):
    "For GEOS unary predicate functions."

    argtypes = [GEOM_PTR]
```

**Black**
Black preserves up to 1 empty line after the class docstring but doesn't insert one if it is missing. 

```python
class UnaryPredicate(GEOSFuncFactory):
    "For GEOS unary predicate functions."
    argtypes = [GEOM_PTR]

class UnaryPredicate2(GEOSFuncFactory):
    "For GEOS unary predicate functions."

    argtypes = [GEOM_PTR]
```

Same as input

**Ruff**

```python
class UnaryPredicate(GEOSFuncFactory):
    "For GEOS unary predicate functions."

    argtypes = [GEOM_PTR]

class UnaryPredicate2(GEOSFuncFactory):
    "For GEOS unary predicate functions."

    argtypes = [GEOM_PTR]
```


---

_Label `formatter` added by @MichaReiser on 2023-08-18 13:25_

---

_Added to milestone `Formatter: Alpha` by @MichaReiser on 2023-08-18 13:25_

---

_Comment by @MichaReiser on 2023-08-18 13:25_

@charliermarsh or is this an intentional deviation?

---

_Renamed from "Formattter: Optional empty line after class docstring" to "Formatter: Optional empty line after class docstring" by @zanieb on 2023-08-18 16:04_

---

_Comment by @charliermarsh on 2023-08-18 20:18_

It's because they're not triple-quoted: https://black.vercel.app/?version=main&state=_Td6WFoAAATm1rRGAgAhARYAAAB0L-Wj4AJBALFdAD2IimZxl1N_WlXnON2nzOca5LMGDo9GYE1ODkqIAyq73A8oR_lVu7cIGYXERZR58hzQfd7zy8FfGyoz8UlHKY2aYfSKHZcFM6oCxcH3eZk2nzD2XJl_rlpCTBUKUPpJml2T4JHYkPhQZdj-bhtRNiZ211pQEWr0CCug01xQmKwlKDZvj9vN_Y6_09SHsus6upsaeCTSSfpujzZ3hI8H02mwmyCQktofPmEjG6uUQe3PAAAAAABpT3p1RnP9TgABzQHCBAAAVn4OiLHEZ_sCAAAAAARZWg==. In general, the newline after the class docstring is not optional, but Black doesn't consider these to be docstrings for that purpose. It is intentional right now.

---

_Comment by @MichaReiser on 2023-08-18 21:04_

Hmm I see. It's one of the most common differences that we have todo, besides parenthesizing strings/identifiers, and something else that I forgot. 

---

_Comment by @charliermarsh on 2023-08-18 21:10_

We can easily change it to improve compatibility, though it does feel like a bug in Black. (I don't see why that wouldn't be formatted as a docstring when it is in fact a docstring.)

---

_Label `needs-decision` added by @MichaReiser on 2023-08-22 06:04_

---

_Removed from milestone `Formatter: Alpha` by @MichaReiser on 2023-08-22 14:12_

---

_Added to milestone `Formatter: Beta` by @MichaReiser on 2023-08-22 14:12_

---

_Comment by @MichaReiser on 2023-09-08 07:02_

I'm closing this for now, as it is a documented deviation. We can reconsider based on user feedback.

---

_Closed by @MichaReiser on 2023-09-08 07:02_

---
