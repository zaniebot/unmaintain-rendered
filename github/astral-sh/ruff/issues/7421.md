---
number: 7421
title: "Formatter incompatibility: breaking multiple `if` clauses in comprehensions"
type: issue
state: closed
author: charliermarsh
labels:
  - formatter
assignees: []
created_at: 2023-09-15T20:57:14Z
updated_at: 2023-09-16T17:19:36Z
url: https://github.com/astral-sh/ruff/issues/7421
synced_at: 2026-01-07T12:31:12-06:00
---

# Formatter incompatibility: breaking multiple `if` clauses in comprehensions

---

_Issue opened by @charliermarsh on 2023-09-15 20:57_

Given:

```python
[
    task
    for head_name in head_nodes
    if (task := self.get_task_by_name(head_name))
    if not None
]
```

Ruff formats as:

```python
[
    task
    for head_name in head_nodes
    if (task := self.get_task_by_name(head_name)) if not None
]
```

Black formats as:

```python
[
    task
    for head_name in head_nodes
    if (task := self.get_task_by_name(head_name))
    if not None
]
```

Sourced from: https://github.com/astral-sh/ruff/issues/7394.

---

_Label `formatter` added by @charliermarsh on 2023-09-15 20:57_

---

_Added to milestone `Formatter: Beta` by @MichaReiser on 2023-09-15 21:04_

---

_Assigned to @charliermarsh by @charliermarsh on 2023-09-16 02:21_

---

_Referenced in [astral-sh/ruff#7429](../../astral-sh/ruff/pulls/7429.md) on 2023-09-16 02:46_

---

_Closed by @charliermarsh on 2023-09-16 17:19_

---
