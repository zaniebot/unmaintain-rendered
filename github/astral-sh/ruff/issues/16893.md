---
number: 16893
title: "[red-knot] Disambiguate display for union types"
type: issue
state: closed
author: dhruvmanila
labels:
  - help wanted
  - ty
assignees: []
created_at: 2025-03-21T11:04:54Z
updated_at: 2025-03-22T12:08:52Z
url: https://github.com/astral-sh/ruff/issues/16893
synced_at: 2026-01-07T12:31:13-06:00
---

# [red-knot] Disambiguate display for union types

---

_Issue opened by @dhruvmanila on 2025-03-21 11:04_

For example, when using callable types in a union:

```py
from typing import Callable


def foo(x: Callable[[], int] | None):
    # red-knot: Revealed type is `() -> int | None` [revealed-type]
    reveal_type(x)
```

This can be confused with the return type could be read as `int | None`.

To disambiguate, we should add parentheses like:
```
red-knot: Revealed type is `(() -> int) | None` [revealed-type]
```

This is what Pyright does as well while mypy uses the `Union[...]` syntax.

---

_Label `red-knot` added by @dhruvmanila on 2025-03-21 11:04_

---

_Comment by @dhruvmanila on 2025-03-21 11:10_

This is especially an issue when the return type of a callable itself is a union:
```py
def bar(x: Callable[[], int | str] | None):
    reveal_type(x)  # revealed: () -> int | str | None
```

---

_Label `help wanted` added by @dhruvmanila on 2025-03-21 11:21_

---

_Comment by @MatthewMckee4 on 2025-03-22 00:26_

Should it only add parenthesis if callable is first element?

---

_Comment by @MatthewMckee4 on 2025-03-22 00:28_

Or maybe just add if its not the last element?

*Pyright always adds "()" to callable in union

---

_Referenced in [astral-sh/ruff#16907](../../astral-sh/ruff/pulls/16907.md) on 2025-03-22 00:34_

---

_Referenced in [astral-sh/ruff#16912](../../astral-sh/ruff/issues/16912.md) on 2025-03-22 12:08_

---

_Closed by @MichaReiser on 2025-03-22 12:08_

---

_Closed by @MichaReiser on 2025-03-22 12:08_

---
