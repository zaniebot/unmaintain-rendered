---
number: 1511
title: Move away from blackd in favor of single black invocations
type: issue
state: closed
author: squiddy
labels:
  - good first issue
  - internal
assignees: []
created_at: 2022-12-31T13:10:38Z
updated_at: 2023-01-07T04:08:26Z
url: https://github.com/astral-sh/ruff/issues/1511
synced_at: 2026-01-07T12:31:12-06:00
---

# Move away from blackd in favor of single black invocations

---

_Issue opened by @squiddy on 2022-12-31 13:10_

See black_compatibility_test.

> Ok cool. My only hesitation is around robustness. If we see flakiness on CI (e.g., from waiting for `blackd` to startup, or other daemon-related issues), I may ask that we convert back to `black`, since I'd rather CI be reliable than fast (at least, on that order of magnitude).

_Originally posted by @charliermarsh in https://github.com/charliermarsh/ruff/pull/1206#discussion_r1050098161_
      

---

_Comment by @charliermarsh on 2022-12-31 13:22_

That's the first time I've seen it fail!

---

_Label `internal` added by @charliermarsh on 2022-12-31 13:28_

---

_Comment by @squiddy on 2023-01-01 09:54_

Ah okay, I've seen it a couple times, but mainly on pull request. If it didn't bother you yet, we can also close this one.

---

_Comment by @charliermarsh on 2023-01-01 18:15_

Ok it sounds like it's worth rolling back then. Not urgent though if it's easy for you, go for it :)

---

_Label `good first issue` added by @charliermarsh on 2023-01-04 16:04_

---

_Comment by @andersk on 2023-01-05 05:47_

I didn’t see the context here, but was it a `blackd` startup failure? I note that we’re only waiting a total of 1 second for `blackd` to start (10 × 100 ms), which seems low for a Python project.

---

_Comment by @squiddy on 2023-01-06 19:25_

From what I remember it's been startup failures. And you're right, it's only 1 second (I thought it was longer). So increasing the wait time would also be an option.

---

_Comment by @charliermarsh on 2023-01-06 21:09_

Yeah that's probably my fault -- I think I reduced them a bit before merging. Let's bump them and close for now. Can always revisit.

---

_Referenced in [astral-sh/ruff#1709](../../astral-sh/ruff/pulls/1709.md) on 2023-01-07 03:56_

---

_Closed by @charliermarsh on 2023-01-07 04:08_

---
