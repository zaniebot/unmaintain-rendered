---
number: 19684
title: ruff check --fix yields different output (same version)
type: issue
state: closed
author: N-Pahlke
labels:
  - question
assignees: []
created_at: 2025-08-01T11:56:03Z
updated_at: 2025-08-04T05:47:06Z
url: https://github.com/astral-sh/ruff/issues/19684
synced_at: 2026-01-07T12:31:13-06:00
---

# ruff check --fix yields different output (same version)

---

_Issue opened by @N-Pahlke on 2025-08-01 11:56_

### Summary

On Windows 11 git bash etc. the pre-commit using ruff yields different output than running the same pre-commit in ubuntu pipeline.
image github actions: ubuntu-latest, 01/08/2025

Locally it says nothing is to be formatted, all fine.

In the pipeline exactly ONE thing seems to be off:

```
Run poetry run pre-commit run --all-files || true
  
ruff check-fix...........................................................Failed
- hook id: ruff-check-fix
- files were modified by this hook
Found 1 error (1 fixed, 0 remaining).
ruff format..............................................................Passed
pytest...................................................................Passed
ruff 0.12.7
diff --git a/src/visualiser_pub_sub/libs/graph_helper.py b/src/visualiser_pub_sub/libs/graph_helper.py
index 536556f..9d1972e 100644
--- a/src/visualiser_pub_sub/libs/graph_helper.py
+++ b/src/visualiser_pub_sub/libs/graph_helper.py
@@ -4,6 +4,7 @@ import re
 from pathlib import Path
 
 from graphviz import Digraph
+
 from src.config import SUB_FOLDER_BOARD_OWNER, SUB_FOLDER_PUB, SVG_DPI
 from src.visualiser_pub_sub.libs.pub_sub_config_helper import remove_emojis
```

the version is locked, both use 0.12.7

It seems to be placing another newline, which is explicilty DOES NOT want to locally.

pre-commit-config.yaml
```yaml
repos:
  - repo: local
    hooks:
      - id: ruff-check-fix
        name: ruff check-fix
        entry: poetry run ruff check --fix
        language: system
        types: [python]
        pass_filenames: false
        always_run: true

      - id: ruff-format
        name: ruff format
        entry: poetry run ruff format
        language: system
        types: [python]
        pass_filenames: false
        always_run: true

      - id: pytest
        name: pytest
        entry: poetry run pytest tests
        language: system
        types: [python]
        pass_filenames: false
        always_run: true
```

This setup works for every other repo.
This makes my pr validation pipeline fail and causes me to be deactivate validation checks. Becomes unusable right now for this repository.
Thanks.

### Version

_No response_

---

_Renamed from "ruff check --fix yields different output" to "ruff check --fix yields different output (same version)" by @N-Pahlke on 2025-08-01 11:56_

---

_Comment by @ntBre on 2025-08-01 13:17_

This sounds a lot like https://github.com/astral-sh/ruff/issues/18647. Do you potentially have a `graphviz` directory locally or in CI? It looks like the import is being detected as a different group in one or the other.

---

_Label `question` added by @ntBre on 2025-08-01 13:18_

---

_Comment by @N-Pahlke on 2025-08-04 05:47_

You are right.
Thanks a lot, much appreciated.

---

_Closed by @N-Pahlke on 2025-08-04 05:47_

---
