---
number: 9625
title: "RET505/RET506 doesn't work for an else after a return/raise in a try/except block"
type: issue
state: open
author: Greesb
labels:
  - rule
assignees: []
created_at: 2024-01-23T16:45:59Z
updated_at: 2024-01-27T08:22:50Z
url: https://github.com/astral-sh/ruff/issues/9625
synced_at: 2026-01-07T12:31:13-06:00
---

# RET505/RET506 doesn't work for an else after a return/raise in a try/except block

---

_Issue opened by @Greesb on 2024-01-23 16:45_

Hi,

I found that the `RET505` and `RET506` do not raise an error when there is a `return` or `raise` inside a `try/except` block.

```python
def test_ret505():
    try:
        print("test")
    except Exception:
        return
    else:  # Shouldn't this raise a RET505 error ?
        return "test"

def test_ret506():
    try:
        print("test")
    except Exception:
        raise
    else:  # Shouldn't this raise a RET506 error ?
        return "test"
```

Thanks and keep up the great work on this wonderful tool !

---

_Renamed from "RET506 doesn't work for raise in try/except block" to "RET505/RET506 doesn't work for after a return/raise in a try/except block" by @Greesb on 2024-01-23 17:01_

---

_Comment by @dhruvmanila on 2024-01-24 15:06_

Good point. Yes, I think it should be raised here atleast for your first example of `RET505`. I guess you meant `raise` on the last line in `test_ret506` function? If so, then yes for that as well.

We need to make sure that there isn't a `finally` block here because then the execution order will be different. It's `try`, `else`, `finally` and removing `else` would alter the order.

---

_Label `rule` added by @dhruvmanila on 2024-01-24 15:06_

---

_Comment by @Greesb on 2024-01-24 15:10_

> I guess you meant `raise` on the last line in `test_ret506` function? If so, then yes for that as well.

Whether it be a `return` or a `raise` in the `else` for both case it shouldn't matter, right ? In both case it won't be reached because of the `raise` / `return` in the `except` clause.

---

_Comment by @trag1c on 2024-01-24 15:12_

Yep, it's all about the `except` body. I think you should've commented the `else:` line since that's the violating one üëç (which could be why Dhruv thought the `raise`/`return` in the `else` body matters)

---

_Comment by @Greesb on 2024-01-24 15:24_

> Yep, it's all about the `except` body. I think you should've commented the `else:` line since that's the violating one üëç (which could be why Dhruv thought the `raise`/`return` in the `else` body matters)

Indeed, edited it as you said for better clarity.

---

_Renamed from "RET505/RET506 doesn't work for after a return/raise in a try/except block" to "RET505/RET506 doesn't work for an else after a return/raise in a try/except block" by @Greesb on 2024-01-27 08:22_

---

_Referenced in [astral-sh/ruff#8018](../../astral-sh/ruff/issues/8018.md) on 2024-06-09 14:37_

---
