---
number: 20266
title: RUF009 - Frozen Dataclass  with nested class should be valid
type: issue
state: closed
author: FEsteven
labels:
  - rule
assignees: []
created_at: 2025-09-05T13:13:34Z
updated_at: 2025-09-12T20:46:51Z
url: https://github.com/astral-sh/ruff/issues/20266
synced_at: 2026-01-07T12:31:13-06:00
---

# RUF009 - Frozen Dataclass  with nested class should be valid

---

_Issue opened by @FEsteven on 2025-09-05 13:13_

### Summary

Frozen dataclasses objects should be considered immutable even with nested class.

I have an issue like [this issue](https://github.com/astral-sh/ruff/issues/17424) fixed in ruff 0.12.1 but with nested class:

[Playground](https://play.ruff.rs/d08b1cca-b46c-48f4-b1df-19e86821c15a)

```Python
@dataclasses.dataclass(frozen=True)
class A:
    foo: int = 1

@dataclasses.dataclass(frozen=True)
class B:
    b: A = A()  # it's valid , since ruff 0.12.1


@dataclasses.dataclass(frozen=True)
class C:
    @dataclasses.dataclass(frozen=True)
    class D:
        foo: int = 1
        
    d: D = D()  # should be valid , but gives RUF009
```

### Version

ruff 0.12.12

---

_Comment by @ntBre on 2025-09-05 13:44_

Interesting, it does seem like we should be allowing that.

---

_Label `rule` added by @ntBre on 2025-09-05 13:44_

---

_Comment by @IDrokin117 on 2025-09-09 18:15_

I will take this one

---

_Assigned to @IDrokin117 by @ntBre on 2025-09-09 18:18_

---

_Referenced in [astral-sh/ruff#20352](../../astral-sh/ruff/pulls/20352.md) on 2025-09-11 17:31_

---

_Referenced in [astral-sh/ruff#20353](../../astral-sh/ruff/issues/20353.md) on 2025-09-11 17:50_

---

_Closed by @ntBre on 2025-09-12 20:46_

---
