---
number: 21324
title: "Using `pathlib.Path`'s `__truediv__` method on `os.environ[\"HOMEDRIVE\"]` and `os.environ[\"SystemDrive\"]` leads to undesired behavior"
type: issue
state: open
author: swaldhoer
labels:
  - rule
  - needs-decision
assignees: []
created_at: 2025-11-07T18:33:04Z
updated_at: 2025-11-07T20:27:47Z
url: https://github.com/astral-sh/ruff/issues/21324
synced_at: 2026-01-07T12:31:13-06:00
---

# Using `pathlib.Path`'s `__truediv__` method on `os.environ["HOMEDRIVE"]` and `os.environ["SystemDrive"]` leads to undesired behavior

---

_Issue opened by @swaldhoer on 2025-11-07 18:33_

### Summary

`ruff` should warn, when a user joins the content of the environment variables `HOMEDRIVE` and `SystemDrive` through the dunder method `__truediv__`  as the result is not what the users expects.
**This only applies to `HOMEDRIVE` and `SystemDrive`**.

```pwsh
PS C:\Users\stefa> py
Python 3.13.0 (tags/v3.13.0:60403a5, Oct  7 2024, 09:38:07) [MSC v.1941 64 bit (AMD64)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> import os; from pathlib import Path
>>> Path(os.environ["HOMEDRIVE"]) / "foo"
WindowsPath('C:foo')
>>> Path(os.environ["SystemDrive"]) / "foo"
WindowsPath('C:foo')
>>> Path(os.environ["ProgramFiles"]) / "foo"
WindowsPath('C:/Program Files/foo')
>>>
```

`C:foo'` is not a valid path.

Note: the names of the environment variable are **not** case sensitive.

---

_Label `rule` added by @ntBre on 2025-11-07 20:27_

---

_Label `needs-decision` added by @ntBre on 2025-11-07 20:27_

---
