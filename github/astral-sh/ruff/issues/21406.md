---
number: 21406
title: SIM108 is blocked by annotations
type: issue
state: closed
author: dscorbett
labels:
  - rule
assignees: []
created_at: 2025-11-12T14:33:59Z
updated_at: 2025-12-30T16:47:41Z
url: https://github.com/astral-sh/ruff/issues/21406
synced_at: 2026-01-07T12:31:13-06:00
---

# SIM108 is blocked by annotations

---

_Issue opened by @dscorbett on 2025-11-12 14:33_

### Summary

[`if-else-block-instead-of-if-exp` (SIM108)](https://docs.astral.sh/ruff/rules/if-else-block-instead-of-if-exp/) should apply when the assignment in the `if` block (though not the one in the `else` block) is annotated. [Example](https://play.ruff.rs/851d6427-dcb3-4325-b173-3028c0a500a1):
```console
$ cat >sim108.py <<'# EOF'
def f(x: object) -> int:
    if x:
        y: int = 1
    else:
        y = 2
    return y
# EOF

$ ruff --isolated check sim108.py --select SIM108 --unsafe-fixes --fix
All checks passed!
```

The ideal fixed version is:
```python
def f(x: object) -> int:
    y: int = 1 if x else 2
    return y
```

### Version

ruff 0.14.4 (c7ff9826d 2025-11-06)

---

_Label `rule` added by @ntBre on 2025-11-12 14:48_

---

_Referenced in [astral-sh/ruff#21418](../../astral-sh/ruff/pulls/21418.md) on 2025-11-13 04:23_

---

_Comment by @ntBre on 2025-12-30 16:47_

I didn't realize this at the time, but this is actually a duplicate of an older issue: #15554. But thanks for the report, as always!

---

_Closed by @ntBre on 2025-12-30 16:47_

---
