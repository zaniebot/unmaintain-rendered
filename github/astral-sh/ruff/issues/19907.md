---
number: 19907
title: Formatter makes code less readable with dict get and function call in conditional
type: issue
state: open
author: pythonweb2
labels:
  - formatter
  - style
assignees: []
created_at: 2025-08-13T23:26:10Z
updated_at: 2025-08-14T14:15:51Z
url: https://github.com/astral-sh/ruff/issues/19907
synced_at: 2026-01-07T12:31:13-06:00
---

# Formatter makes code less readable with dict get and function call in conditional

---

_Issue opened by @pythonweb2 on 2025-08-13 23:26_

### Summary

Here is some working code that in my opinion is readable:

```python
def this_is_a_long_name_function(s):
    pass


def test(d, long_long_long_long_variable_name):
    if (
        d["this_is_a_long_dict_key_name"].lower() == "some_sort_of_string"
        and not this_is_a_long_name_function(long_long_long_long_variable_name)
    ):
        pass
```

When I run the ruff formatter on it, I get this:

```python
def this_is_a_long_name_function(s):
    pass


def test(d, long_long_long_long_variable_name):
    if d[
        "this_is_a_long_dict_key_name"
    ].lower() == "some_sort_of_string" and not this_is_a_long_name_function(
        long_long_long_long_variable_name
    ):
        pass
```

Which in my opinion doesn't look good. I'm wondering if the formatter could be adjusted to not do this?

---

_Comment by @MichaReiser on 2025-08-14 06:09_

Thank you. Yeah, I think there's an argument to never break the subscribt when using a single string literal or number key.

In the meantime, you can help the formatter by parenthesizing the right side expression of `and`:

```py
def this_is_a_long_name_function(s):
    pass


def test(d, long_long_long_long_variable_name):
    if d["this_is_a_long_dict_key_name"].lower() == "some_sort_of_string" and (
        not this_is_a_long_name_function(long_long_long_long_variable_name)
    ):
        pass

```

---

_Label `formatter` added by @MichaReiser on 2025-08-14 06:10_

---

_Label `style` added by @MichaReiser on 2025-08-14 06:10_

---

_Comment by @pythonweb2 on 2025-08-14 12:40_

Thanks for the clarification!

> I think there's an argument to never break the subscribt when using a single string literal or number key.

I might be missing something, but I’m not quite sure what you mean here. I went through the configuration settings listed in [the formatter settings](https://docs.astral.sh/ruff/settings/#format) and didn’t see that particular option mentioned.

---

_Comment by @MichaReiser on 2025-08-14 12:58_

There's no such option today. I was only commenting on how Ruff's style could be changed in a future edition

---

_Comment by @pythonweb2 on 2025-08-14 13:42_

Oh, got it—thanks for explaining! I’d be in favor of adding that. Although with the workaround you provided my example does become much more readable.

I'm not sure about the technical challenges involved with this, but I was wondering—could another option be to introduce a config setting that enforces the use of parentheses and places each conditional on its own line, even when there are only two?

```python
# two conditionals, formatter changes it
def test(d, long_long_long_long_variable_name):
    if (
        d["this_is_a_long_dict_key_name"].lower() == "some_sort_of_string"
        and not this_is_a_long_name_function(long_long_long_long_variable_name)
    ):
        pass
```

```python
# three conditionals, formatter leaves it
def test(d, long_long_long_long_variable_name):
    if (
        d["this_is_a_long_dict_key_name"].lower() == "some_sort_of_string"
        and not this_is_a_long_name_function(long_long_long_long_variable_name)
        and True
    ):
        pass
```

---

_Comment by @MichaReiser on 2025-08-14 14:15_

Our current philosophy is not to introduce such fine-grained options. I personally also prefer to always add parentheses if a clause header breaks over multiple lines but this style is very inherent to black's style guide and changing it is probably too big a change now. 



---
