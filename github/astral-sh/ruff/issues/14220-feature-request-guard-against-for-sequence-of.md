---
number: 14220
title: "[Feature Request] Guard against `==` for (sequence of) float comparison"
type: issue
state: open
author: DanielYang59
labels:
  - rule
  - type-inference
assignees: []
created_at: 2024-11-09T05:23:16Z
updated_at: 2025-07-04T18:52:28Z
url: https://github.com/astral-sh/ruff/issues/14220
synced_at: 2026-01-07T13:12:16-06:00
---

# [Feature Request] Guard against `==` for (sequence of) float comparison

---

_Issue opened by @DanielYang59 on 2024-11-09 05:23_

## Feature request: Guard against `==` for float comparison

I'm not sure if this is doable from `ruff`'s side as this might need optional static typing (`mypy` for example). 

I could think of the following cases where `==` should be discouraged (or avoided altogether as it's pretty unreliable, I cannot think of much use cases we need such comparison):

```python
# directly compare floats
1.0 == 1.0 + 1E-8

# floats generated by evaluation
x = 1 / 3
if x == 0.333:
    do something

# sequence of floats
[1.0, ] == [1.0 + 1E-8, ]

# use `in` to check membership
0.0 in [0, 1, 2]

```



---

_Label `rule` added by @dylwil3 on 2024-11-09 15:00_

---

_Label `needs-decision` added by @dylwil3 on 2024-11-09 15:00_

---

_Label `needs-decision` removed by @dylwil3 on 2024-11-09 15:01_

---

_Label `type-inference` added by @dylwil3 on 2024-11-09 15:01_

---

_Comment by @dylwil3 on 2024-11-09 15:04_

I think that's a great idea! I think without type inference we wouldn't be able to stray far from float literals (and perhaps basic expressions built from them), so it may make sense to wait until type inference is available to implement this.

---

_Comment by @DanielYang59 on 2024-11-10 08:40_

Thanks for the input, that would be hugely helpful.

Some similar scenarios came to my mind (i might merge them to the original ), perhaps might consider them if possible?



### Use `==` to check `None`
```python
if a == None:

```

---

_Comment by @dylwil3 on 2024-11-10 15:29_

 Nice! The latter does not require type checking and exists already as E711: https://docs.astral.sh/ruff/rules/none-comparison/

---

_Comment by @DanielYang59 on 2024-11-10 15:36_

Okay thanks I forgot about this. Appreciate that!

---

_Comment by @Anselmoo on 2025-05-18 19:08_

> 
> I could think of the following cases where `==` should be discouraged (or avoided altogether as it's pretty unreliable, I cannot think of much use cases we need such comparison):
> 

As well as inequality `!=`? 

---

_Comment by @DanielYang59 on 2025-05-20 08:18_

> As well as inequality !=?

Yes, I assume `a != b` is equivalent to `not (a == b)`?

---

_Comment by @Anselmoo on 2025-05-20 14:54_

> > As well as inequality !=?
> 
> Yes, I assume`a != b` is equivalent to `not (a == b)`

**Further Reading & Reference:**
	â€¢	SonarSource RSPEC-1244: [Floating point numbers should not be tested for equality](https://rules.sonarsource.com/python/RSPEC-1244/)

---

_Renamed from "[Feature Request] Guard against `==` for float comparison" to "[Feature Request] Guard against `==` for (sequence of) float comparison" by @DanielYang59 on 2025-07-04 18:52_

---

_Referenced in [nomad-coe/electronic-parsers#303](../../nomad-coe/electronic-parsers/issues/303.md) on 2025-09-17 09:50_

---

_Referenced in [astral-sh/ruff#20579](../../astral-sh/ruff/issues/20579.md) on 2025-09-25 18:46_

---

_Referenced in [astral-sh/ruff#20585](../../astral-sh/ruff/pulls/20585.md) on 2025-09-25 21:12_

---
