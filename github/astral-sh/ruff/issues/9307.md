---
number: 9307
title: "F821 false positive: `dict.__dict__['fromkeys']`"
type: issue
state: closed
author: AA-Turner
labels:
  - bug
assignees: []
created_at: 2023-12-29T09:48:33Z
updated_at: 2023-12-29T16:03:45Z
url: https://github.com/astral-sh/ruff/issues/9307
synced_at: 2026-01-07T12:31:13-06:00
---

# F821 false positive: `dict.__dict__['fromkeys']`

---

_Issue opened by @AA-Turner on 2023-12-29 09:48_

Ruff doesn't like classmethod descriptors, or seems to think that they're undefined, which is rather odd.

```python
a = type({}).__dict__['fromkeys']
b = dict.__dict__['fromkeys']
assert a is b
```

Saving the above to `bug.py`, and running only with `F821`:

```pscon
PS I:\Development> ruff -V
ruff 0.1.9
PS I:\Development> ruff --isolated --show-source --select F821 bug.py
bug.py:2:20: F821 Undefined name `fromkeys`
  |
1 | a = type({}).__dict__['fromkeys']
2 | b = dict.__dict__['fromkeys']
  |                    ^^^^^^^^ F821
3 | assert a is b
  |

Found 1 error.
```

Note only the second line yields an error -- using ``type({})`` as an indirection for ``dict`` solves the issue.

A

---

_Comment by @charliermarsh on 2023-12-29 11:37_

Thanks — I’m guessing it thinks it’s a type annotation, as when subscripting dict directly.

---

_Label `bug` added by @charliermarsh on 2023-12-29 11:37_

---

_Assigned to @charliermarsh by @charliermarsh on 2023-12-29 14:58_

---

_Comment by @charliermarsh on 2023-12-29 15:15_

Closed by https://github.com/astral-sh/ruff/pull/9309.

---

_Closed by @charliermarsh on 2023-12-29 15:15_

---

_Comment by @AA-Turner on 2023-12-29 16:03_

Thanks Charlie!

A

---
