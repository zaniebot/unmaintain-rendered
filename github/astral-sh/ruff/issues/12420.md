---
number: 12420
title: "`C419` introduce invalid python since `v0.5.3`"
type: issue
state: closed
author: UnknownPlatypus
labels:
  - bug
  - fixes
assignees: []
created_at: 2024-07-20T15:55:39Z
updated_at: 2024-07-20T16:45:05Z
url: https://github.com/astral-sh/ruff/issues/12420
synced_at: 2026-01-07T12:31:13-06:00
---

# `C419` introduce invalid python since `v0.5.3`

---

_Issue opened by @UnknownPlatypus on 2024-07-20 15:55_

HI,

Since v0.5.3 and the changes made in https://github.com/astral-sh/ruff/pull/12364, ruff autofix introduced breakage in my code.
The following was autofixed from this:
```python
timedelta_list = [dt.timedelta(days=2),dt.timedelta(days=1)]
res = sum(
    [
        delta
        for delta in timedelta_list
        if delta
    ],
    dt.timedelta(),
).total_seconds()
```
to this 
```python
timedelta_list = [dt.timedelta(days=2),dt.timedelta(days=1)]
res = sum(
    delta
        for delta in timedelta_list
        if delta,
    dt.timedelta(),
).total_seconds()
```

---

_Comment by @charliermarsh on 2024-07-20 15:56_

Thanks, we need to parenthesize in those cases.

---

_Label `bug` added by @charliermarsh on 2024-07-20 15:56_

---

_Label `fixes` added by @charliermarsh on 2024-07-20 15:56_

---

_Comment by @UnknownPlatypus on 2024-07-20 15:59_

> Thanks, we need to parenthesize in those cases.

Yes exactly! Thanks for the quick response!

---

_Comment by @charliermarsh on 2024-07-20 16:22_

Sorry about that -- will try to fix soon.

---

_Renamed from "C419 introduce invalid python since v0.5.3" to "`C419` introduce invalid python since `v0.5.3`" by @UnknownPlatypus on 2024-07-20 16:36_

---

_Comment by @UnknownPlatypus on 2024-07-20 16:36_

No worries, thanks for the great work on this tool all-together. 
I don't know if it's enough to yank the v0.5.3 given that every user with this rule already selected might be affected automatically when upgrading ? 

---

_Referenced in [astral-sh/ruff#12422](../../astral-sh/ruff/pulls/12422.md) on 2024-07-20 16:38_

---

_Comment by @charliermarsh on 2024-07-20 16:38_

I think I'll just cut a new release today with the fix (#12422).

---

_Closed by @charliermarsh on 2024-07-20 16:41_

---

_Comment by @charliermarsh on 2024-07-20 16:45_

It's also a preview-only behavior I think, so it's less urgent.

---

_Referenced in [astral-sh/ruff#12445](../../astral-sh/ruff/pulls/12445.md) on 2024-07-22 03:38_

---
