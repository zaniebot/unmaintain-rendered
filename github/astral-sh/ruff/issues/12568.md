---
number: 12568
title: "`PLR6301` not aware of `attrs` validation decorator "
type: issue
state: closed
author: my1e5
labels:
  - rule
assignees: []
created_at: 2024-07-29T15:42:35Z
updated_at: 2024-08-30T16:39:07Z
url: https://github.com/astral-sh/ruff/issues/12568
synced_at: 2026-01-07T12:31:13-06:00
---

# `PLR6301` not aware of `attrs` validation decorator 

---

_Issue opened by @my1e5 on 2024-07-29 15:42_

Related to https://github.com/astral-sh/ruff/issues/12172.

The [`attrs`](https://github.com/python-attrs/attrs) library, which is similar to `dataclasses`, uses decorators to allow you to define validators for the attributes of your class. Here is a simple example:

```py
from attrs import define, field


@define
class Foo:
    x: int = field()

    @x.validator
    def validate_x(self, attribute, value):
        if value <= 0:
            raise ValueError("x must be a positive integer")


foo = Foo(x=-1) # ValueError: x must be a positive integer
```
However, this triggers `PLR6301` - https://play.ruff.rs/2aa3e667-d733-4dc9-b1c7-307256edcabe

> Method `validate_x` could be a function, class method, or static method

But in this situation, this is not correct. `validate_x` needs `self` in order to be valid. 

Perhaps this is beyond the scope of `PLR6301`, but it would nice if Ruff was context-aware of `attrs` here.

---

_Label `rule` added by @charliermarsh on 2024-07-29 15:47_

---

_Comment by @my1e5 on 2024-07-30 09:37_

I've tested this example code with the original `pylint` rule and it also raises an issue - `R6301: Method could be a function (no-self-use)`. 

---

_Assigned to @charliermarsh by @charliermarsh on 2024-08-30 16:25_

---

_Referenced in [astral-sh/ruff#13166](../../astral-sh/ruff/pulls/13166.md) on 2024-08-30 16:31_

---

_Closed by @charliermarsh on 2024-08-30 16:39_

---

_Closed by @charliermarsh on 2024-08-30 16:39_

---

_Referenced in [astral-sh/ruff#19396](../../astral-sh/ruff/issues/19396.md) on 2025-07-17 10:56_

---
