---
number: 19641
title: test_multi_file_function_references fails on 32-bit platforms
type: issue
state: closed
author: hannesbraun
labels: []
assignees: []
created_at: 2025-07-30T16:31:05Z
updated_at: 2025-07-30T16:31:59Z
url: https://github.com/astral-sh/ruff/issues/19641
synced_at: 2026-01-07T12:31:13-06:00
---

# test_multi_file_function_references fails on 32-bit platforms

---

_Issue opened by @hannesbraun on 2025-07-30 16:31_

### Summary

The test `goto_references::tests::test_multi_file_function_references` fails on 32-bit platforms (armhf, armv7, x86):

```
failures:
---- goto_references::tests::test_multi_file_function_references stdout ----
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Snapshot Summary ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Snapshot: multi_file_function_references
Source: crates/ty_ide/src/goto_references.rs:721
────────────────────────────────────────────────────────────────────────────────
Expression: test.references()
────────────────────────────────────────────────────────────────────────────────
-old snapshot
+new results
────────────┬───────────────────────────────────────────────────────────────────
    5     5 │ 3 |     return x * 2
    6     6 │   |
    7     7 │ 
    8     8 │ info[references]: Reference 2
    9       │- --> module.py:5:12
   10       │-  |
   11       │-4 | def process_data(data):
   12       │-5 |     return helper_function(data)
   13       │-  |            ^^^^^^^^^^^^^^^
   14       │-6 |
   15       │-7 | def double_process(data):
   16       │-  |
   17       │-
   18       │-info[references]: Reference 3
   19       │- --> module.py:8:14
   20       │-  |
   21       │-7 | def double_process(data):
   22       │-8 |     result = helper_function(data)
   23       │-  |              ^^^^^^^^^^^^^^^
   24       │-9 |     return helper_function(result)
   25       │-  |
   26       │-
   27       │-info[references]: Reference 4
   28       │- --> module.py:9:12
   29       │-  |
   30       │-7 | def double_process(data):
   31       │-8 |     result = helper_function(data)
   32       │-9 |     return helper_function(result)
   33       │-  |            ^^^^^^^^^^^^^^^
   34       │-  |
   35       │-
   36       │-info[references]: Reference 5
   37     9 │  --> app.py:6:27
   38    10 │   |
   39    11 │ 4 | class DataProcessor:
   40    12 │ 5 |     def __init__(self):
┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈
   43    15 │ 7 |     
   44    16 │ 8 |     def process(self, value):
   45    17 │   |
   46    18 │ 
   47       │-info[references]: Reference 6
         19 │+info[references]: Reference 3
   48    20 │  --> app.py:9:16
   49    21 │   |
   50    22 │ 8 |     def process(self, value):
   51    23 │ 9 |         return helper_function(value)
   52    24 │   |                ^^^^^^^^^^^^^^^
         25 │+  |
         26 │+
         27 │+info[references]: Reference 4
         28 │+ --> module.py:5:12
         29 │+  |
         30 │+4 | def process_data(data):
         31 │+5 |     return helper_function(data)
         32 │+  |            ^^^^^^^^^^^^^^^
         33 │+6 |
         34 │+7 | def double_process(data):
         35 │+  |
         36 │+
         37 │+info[references]: Reference 5
         38 │+ --> module.py:8:14
         39 │+  |
         40 │+7 | def double_process(data):
         41 │+8 |     result = helper_function(data)
         42 │+  |              ^^^^^^^^^^^^^^^
         43 │+9 |     return helper_function(result)
         44 │+  |
         45 │+
         46 │+info[references]: Reference 6
         47 │+ --> module.py:9:12
         48 │+  |
         49 │+7 | def double_process(data):
         50 │+8 |     result = helper_function(data)
         51 │+9 |     return helper_function(result)
         52 │+  |            ^^^^^^^^^^^^^^^
   53    53 │   |
────────────┴───────────────────────────────────────────────────────────────────
Stopped on the first failure. Run `cargo insta test` to run all snapshots.
thread 'goto_references::tests::test_multi_file_function_references' panicked at /home/buildozer/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/insta-1.43.1/src/runtime.rs:679:13:
snapshot assertion for 'multi_file_function_references' failed in line 721
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
```

### Version

ruff 0.12.7

---

_Comment by @hannesbraun on 2025-07-30 16:31_

Duplicate of #19640 

---

_Closed by @hannesbraun on 2025-07-30 16:31_

---
