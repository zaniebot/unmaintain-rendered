---
number: 16078
title: Skip ecosystem check for red-knot only changes
type: issue
state: closed
author: MichaReiser
labels:
  - help wanted
  - ci
assignees: []
created_at: 2025-02-10T14:50:18Z
updated_at: 2025-02-10T17:35:02Z
url: https://github.com/astral-sh/ruff/issues/16078
synced_at: 2026-01-07T12:31:13-06:00
---

# Skip ecosystem check for red-knot only changes

---

_Issue opened by @MichaReiser on 2025-02-10 14:50_

### Description

The Ruff ecosystem check should be skipped if all code changes are in `red_knot_*` crates.


https://github.com/astral-sh/ruff/blob/3f958a9d4cfaaaad98e5bb7fbf66b2033d9a8601/.github/workflows/ci.yaml#L416

---

_Label `help wanted` added by @MichaReiser on 2025-02-10 14:50_

---

_Label `ci` added by @MichaReiser on 2025-02-10 14:50_

---

_Comment by @AlexWaygood on 2025-02-10 17:13_

I thought I already did this in #15687?

---

_Comment by @AlexWaygood on 2025-02-10 17:21_

There's no ecosystem check in e.g. https://github.com/astral-sh/ruff/pull/16076, I think as a result of the changes I made in #15687 :-)

---

_Comment by @MichaReiser on 2025-02-10 17:30_

I don't think it did. It doesn't use the `linter` but the `code` group

```
needs.determine_changes.outputs.code == 'true'
```

We could change the selector to match either `linter` or `formatter`

---

_Comment by @MichaReiser on 2025-02-10 17:34_

Oh, the step is gated by `needs.determine_changes.outputs.code == 'true'` but the individual ecosystem runs is then gated by the `formatter` and `linter` change sets. So maybe it was just me being unlucky because I happen to touch `ruff_db` frequently.

---

_Comment by @MichaReiser on 2025-02-10 17:35_

Let's close this for now. I'll observe and report back ;)

---

_Closed by @MichaReiser on 2025-02-10 17:35_

---

_Referenced in [astral-sh/ruff#16522](../../astral-sh/ruff/issues/16522.md) on 2025-03-05 18:05_

---
