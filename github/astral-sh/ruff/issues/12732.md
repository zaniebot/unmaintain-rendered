---
number: 12732
title: SIM114 fix ignores operator precedence
type: issue
state: closed
author: dscorbett
labels:
  - bug
  - fixes
assignees: []
created_at: 2024-08-07T14:36:52Z
updated_at: 2024-08-08T03:03:25Z
url: https://github.com/astral-sh/ruff/issues/12732
synced_at: 2026-01-07T12:31:13-06:00
---

# SIM114 fix ignores operator precedence

---

_Issue opened by @dscorbett on 2024-08-07 14:36_

The fix for [SIM114](https://docs.astral.sh/ruff/rules/if-with-same-arms/) has a bug: it does not take operator precedence into account when combining two expressions with `or`. It should sometimes add parentheses around one expression or the other.

```console
$ ruff --version
ruff 0.5.6
$ cat sim114.py
if False if True else False:
    print(1)
elif True:
    print(1)
else:
    print(2)
$ python sim114.py
1
$ ruff check --isolated --select SIM114 sim114.py --fix
Found 1 error (1 fixed, 0 remaining).
$ cat sim114.py
if False if True else False or True:
    print(1)
else:
    print(2)
$ python sim114.py
2
```

---

_Label `bug` added by @charliermarsh on 2024-08-07 14:43_

---

_Label `fixes` added by @charliermarsh on 2024-08-07 14:43_

---

_Comment by @charliermarsh on 2024-08-07 15:06_

Thanks!

---

_Assigned to @charliermarsh by @charliermarsh on 2024-08-08 01:30_

---

_Referenced in [astral-sh/ruff#12737](../../astral-sh/ruff/pulls/12737.md) on 2024-08-08 02:49_

---

_Closed by @charliermarsh on 2024-08-08 03:03_

---

_Referenced in [astral-sh/ruff#21174](../../astral-sh/ruff/issues/21174.md) on 2025-10-31 19:30_

---
