---
number: 11660
title: "[red-knot] make Definition Copy"
type: issue
state: closed
author: carljm
labels:
  - ty
assignees: []
created_at: 2024-05-31T22:06:57Z
updated_at: 2024-07-17T06:55:32Z
url: https://github.com/astral-sh/ruff/issues/11660
synced_at: 2026-01-07T12:31:13-06:00
---

# [red-knot] make Definition Copy

---

_Issue opened by @carljm on 2024-05-31 22:06_

Definition is lightweight: basically it's just a wrapper around an AST node reference (except for import definitions, which we currently abstract a bit more from the AST.) And we already clone them pretty freely. But they aren't Copy, because the import variants include names, which might be heap-allocated strings if they are long.

Definition should either be Copy, or it should be interned. Preferably it should be Copy. The simplest approach might be to just change how we represent import definitions so we point to the AST instead of storing names.


---

_Label `red-knot` added by @carljm on 2024-05-31 22:06_

---

_Comment by @MichaReiser on 2024-07-17 06:55_

I did this as part of the salsa refactor

---

_Closed by @MichaReiser on 2024-07-17 06:55_

---
