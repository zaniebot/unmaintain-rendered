---
number: 20112
title: PTH119 and PTH120 should be marked unsafe
type: issue
state: closed
author: dscorbett
labels:
  - fixes
  - preview
assignees: []
created_at: 2025-08-27T13:06:09Z
updated_at: 2025-09-02T15:55:25Z
url: https://github.com/astral-sh/ruff/issues/20112
synced_at: 2026-01-07T12:31:13-06:00
---

# PTH119 and PTH120 should be marked unsafe

---

_Issue opened by @dscorbett on 2025-08-27 13:06_

### Summary

The fixes for [`os-path-basename` (PTH119)](https://docs.astral.sh/ruff/rules/os-path-basename/) and [`os-path-dirname` (PTH120)](https://docs.astral.sh/ruff/rules/os-path-dirname/) should be marked unsafe because the replacements are [not always equivalent](https://docs.python.org/3/library/pathlib.html#comparison-to-the-os-and-os-path-modules). In particular, `pathlib` normalizes paths by collapsing adjacent slashes and removing trailing slashes, but `os.path.basename` and `os.path.dirname` donâ€™t. [Example](https://play.ruff.rs/f67d4912-aa4a-4266-a449-a3ecfb10ef0c):
```console
$ cat >pth119_pth120.py <<'# EOF'
import os
path = "a//b/c/"
print(os.path.basename(path))
print(os.path.dirname(path))
# EOF

$ python pth119_pth120.py

a//b/c

$ ruff --isolated check pth119_pth120.py --select PTH119,PTH120 --preview --fix
Found 2 errors (2 fixed, 0 remaining).

$ cat pth119_pth120.py
import os
import pathlib
path = "a//b/c/"
print(pathlib.Path(path).name)
print(pathlib.Path(path).parent)

$ python pth119_pth120.py
c
a/b
```

### Version

ruff 0.12.10 (c68ff8d90 2025-08-21)

---

_Label `fixes` added by @ntBre on 2025-08-27 13:41_

---

_Label `preview` added by @ntBre on 2025-08-27 13:41_

---

_Referenced in [astral-sh/ruff#20118](../../astral-sh/ruff/pulls/20118.md) on 2025-08-27 17:49_

---

_Closed by @dylwil3 on 2025-09-02 15:55_

---
