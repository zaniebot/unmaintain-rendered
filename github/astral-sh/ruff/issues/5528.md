---
number: 5528
title: SIM108 turns readable code into unreadable code
type: issue
state: open
author: karolinepauls
labels:
  - rule
  - needs-decision
assignees: []
created_at: 2023-07-05T09:14:03Z
updated_at: 2025-05-22T07:27:53Z
url: https://github.com/astral-sh/ruff/issues/5528
synced_at: 2026-01-07T12:31:12-06:00
---

# SIM108 turns readable code into unreadable code

---

_Issue opened by @karolinepauls on 2023-07-05 09:14_

The rule should only apply to trivial conditions with the simplest expressions (e.g. even having 2 sub-expressions joined with `and` or `or` is too much).

a.py:
```
from typing import Optional

# an ugly but realistic type
something: Optional[list] = None

if something is not None and len(something) > 1:
    runner_image = something[0].url
else:
    runner_image = None
```

cmd: `ruff --isolated --select SIM --line-length=120  a.py`

Output:
```
a.py:5:1: SIM108 [*] Use ternary operator `runner_image = something[0].url if something is not None and len(something) > 1 else None` instead of `if`-`else`-block
```

My eyes refuse to read `runner_image = something[0].url if something is not None and len(something) > 1 else None`.

---

_Comment by @tjkuson on 2023-07-05 10:27_

Perhaps I am in the minority on this, but I prefer the ternary syntax in the example here, so I would prefer any change to this to be optional.

---

_Comment by @charliermarsh on 2023-07-05 13:36_

I'm open to an argument that we should only apply this rule when the test is a single condition (since the `and` in the ternary makes it harder to parse), but I don't want to make it configurable -- we should either change it or not. I'll leave this open to give folks a chance to chime in.


---

_Label `question` added by @charliermarsh on 2023-07-05 13:36_

---

_Comment by @ssweber on 2023-07-08 01:37_

Can’t you just use noqa as needed?

The simplify rules are opinionated. Usually those long expressions are ‘variable = value condition or None’ anyway - my mental model has adjusted.

---

_Label `question` removed by @charliermarsh on 2023-07-10 01:07_

---

_Label `rule` added by @charliermarsh on 2023-07-10 01:07_

---

_Label `needs-decision` added by @charliermarsh on 2023-07-10 01:07_

---

_Comment by @dorschw on 2023-08-02 10:00_

Devs in our organization also complained about it. While great for simple conditions and expressions, the longer they become, the messier and harder to read it makes the code.

I see @charliermarsh is not a fan of configurability for this one, but imo any way to control a maximal complexity level (of either the condition or the return values) would make it a great addition.

---

_Comment by @jankatins on 2023-10-12 17:02_

In a former company we had the (code style) rule that ternary expression could only be a single line and only "simple" conditions or assignments (e.g. something like `x.x if single_comparison else y.y`). I like the idea of measuring the complexity and only apply if it less than a (low) default.

---

_Comment by @karolinepauls on 2024-01-06 13:28_

@ssweber 
> Can’t you just use noqa as needed?

This style of response isn't helpful. It fits the pattern: "Can't you just use \<an inferior solution the requester certainly knows about and has rejected it> instead? \<here goes an explanation why the troublesome feature should stay as it is and we shouldn't try to improve it>" 


It should be clear that the person reporting the issue knows about noqa, and finds the use of noqa to be deficient, hence they're reporting the issue.

Why is noqa a non-solution:
1. You have to place it in advance, before autofix rewrites your code. What about disabling autofix to this rule? Someone may still want this rule to autofix trivial conditions and leave non-trival conditions intact.
2.  There will always be some devs in a team who adhere to lint rules uncritically. You cannot control that. Tools to help devs write better code interact with all devs in the project, not only the observant ones.

---

_Comment by @ssweber on 2024-01-06 19:18_

> @ssweber
> 
> > Can’t you just use noqa as needed?
> 
> This style of response isn't helpful.

You’re right, that wasn’t a very considerate suggestion. I’ve enjoyed SIM108, but I’d understand if someone else wanted a more robust solution than “use noqa”.

---

_Referenced in [astral-sh/ruff#14017](../../astral-sh/ruff/issues/14017.md) on 2024-10-31 13:44_

---

_Referenced in [astral-sh/ruff#14019](../../astral-sh/ruff/pulls/14019.md) on 2024-10-31 14:26_

---

_Comment by @Avasam on 2024-12-28 19:58_

I find the issue to be formatting related with long ternary conditionals. For example in JS/TS with ESLint I force-wrap all ternaries, but with Python having to add extra parenthesis (which are formatted on their own lines), or `\` (which Ruff and Black disallow), even such an option wouldn't work that great.
Here's some more thoughts: https://github.com/astral-sh/ruff/issues/11753

---

_Comment by @NeilGirdhar on 2025-01-01 04:03_

> My eyes refuse to read `runner_image = something[0].url if something is not None and len(something) > 1 else None`.

I agree, but I suggest writing the ternary expression as:

```python
runner_image = (something[0].url 
                if something is not None and len(something) > 1 
                else None)
```
I propose that this is more legible and briefer than the original code.

(I hope we keep SIM108 in all cases.)

---

_Referenced in [astral-sh/ruff#16104](../../astral-sh/ruff/issues/16104.md) on 2025-02-11 20:54_

---

_Comment by @ashrub-holvi on 2025-02-21 13:21_

> we should only apply this rule when the test is a single condition

yes, IMO, it's only case when ternary operator is readable

---

_Comment by @paylogic-blaise on 2025-05-22 07:27_

Even single conditions become less readable if they have function calls with multiple arguments, or contain expressions like `message[search_term][0]["errors"][0]["message"]`. Of course it's up to people's personal preference, but in my team we disliked SIM108 being applied to non-trivial if-statements, so we globally ignored SIM108.

---
