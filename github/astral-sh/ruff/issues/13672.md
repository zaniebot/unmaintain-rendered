---
number: 13672
title: "[red-knot] understand the `Literal[]` special form in annotations"
type: issue
state: closed
author: carljm
labels:
  - ty
assignees: []
created_at: 2024-10-07T19:38:31Z
updated_at: 2024-11-05T01:45:47Z
url: https://github.com/astral-sh/ruff/issues/13672
synced_at: 2026-01-07T12:31:13-06:00
---

# [red-knot] understand the `Literal[]` special form in annotations

---

_Issue opened by @carljm on 2024-10-07 19:38_

_No description provided._

---

_Label `red-knot` added by @carljm on 2024-10-07 19:38_

---

_Assigned to @MichaReiser by @carljm on 2024-10-07 19:38_

---

_Comment by @MichaReiser on 2024-10-09 09:02_

This is to teach red knot that `mode` is a union over `w` or `r` for `def open(mode: Literal["w", "r"])`

---

_Comment by @carljm on 2024-10-09 17:22_

> This is to teach red knot that `mode` is a union over `w` or `r` for `def open(mode: Literal["w", "r"])`

In order to fully handle this particular case, we will also have to implement https://github.com/astral-sh/ruff/issues/13693. But that issue isn't a blocker for this one. If we implement inference of Literal in type annotations (this issue) such that we understand this case which doesn't have the annotation on a function parameter:

```
from typing import Literal

x: Literal[10] = 10

def f():
    # currently we reveal `@Todo` here
    reveal_type(x)  # revealed: Literal[10]
```

then the parameter-annotation case @MichaReiser described will fall out naturally from https://github.com/astral-sh/ruff/issues/13693

---

_Comment by @Glyphack on 2024-10-20 18:58_

I'd be happy to work on this. I also need this to be able to complete https://github.com/astral-sh/ruff/pull/13827.

---

_Comment by @MichaReiser on 2024-10-20 21:24_

I'll check in with @sharkdp because he considered working on this. I'll keep you posted.

---

_Comment by @sharkdp on 2024-10-21 10:32_

@Glyphack your contribution would be very welcome!

---

_Assigned to @Glyphack by @MichaReiser on 2024-10-21 10:34_

---

_Unassigned @MichaReiser by @MichaReiser on 2024-10-21 10:34_

---

_Referenced in [astral-sh/ruff#13874](../../astral-sh/ruff/pulls/13874.md) on 2024-10-22 22:02_

---

_Closed by @carljm on 2024-11-05 01:45_

---

_Closed by @carljm on 2024-11-05 01:45_

---
