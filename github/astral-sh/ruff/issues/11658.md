---
number: 11658
title: "[red-knot] representation of public symbols and types, independent of full symbol tables / definitions / CFG"
type: issue
state: closed
author: carljm
labels:
  - ty
assignees: []
created_at: 2024-05-31T22:00:47Z
updated_at: 2024-07-17T07:05:20Z
url: https://github.com/astral-sh/ruff/issues/11658
synced_at: 2026-01-07T12:31:13-06:00
---

# [red-knot] representation of public symbols and types, independent of full symbol tables / definitions / CFG

---

_Issue opened by @carljm on 2024-05-31 22:00_

When doing type inference within a module, we need full symbol tables, definitions, and CFG. (We could also possibly build these more lazily/granularly, e.g. not descend into functions unless/until we are actually type checking them.)

But we want to be able to persistent-cache types for public symbols in a module (that is, symbols accessible to other modules), and (if the module and it's dependencies haven't changed) load this info from cache and use it as a dependency for checking other modules, without needing an AST for this module, or full symbol tables, or definitions (which reference AST), or CFG (which also references AST.)

This means somehow splitting our symbol table representation to make this possible.

---

_Label `red-knot` added by @carljm on 2024-05-31 22:00_

---

_Assigned to @carljm by @carljm on 2024-05-31 22:00_

---

_Comment by @MichaReiser on 2024-07-17 06:56_

I think most of what's mentioned in here is complete. Wdyt?

---

_Comment by @carljm on 2024-07-17 07:05_

Yep, I agree. 

---

_Closed by @carljm on 2024-07-17 07:05_

---
