---
number: 18959
title: "DOC502: False positive if following text contains a colon"
type: issue
state: closed
author: dargueta
labels:
  - bug
  - docstring
assignees: []
created_at: 2025-06-26T14:24:16Z
updated_at: 2025-11-12T21:37:56Z
url: https://github.com/astral-sh/ruff/issues/18959
synced_at: 2026-01-07T12:31:13-06:00
---

# DOC502: False positive if following text contains a colon

---

_Issue opened by @dargueta on 2025-06-26 14:24_

### Summary

Possibly related to https://github.com/astral-sh/ruff/issues/16578 but somewhat different: Text after the `Raises` block triggers a false positive for DOC502 if that text contains a colon.

In my case, the relevant part of the docstring contains Sphinx directives, properly unindented:

```
Raises:
    ExtraneousDataError:
        ``exact`` is True and there's data left over at the end of the byte
        string.

.. versionadded:: 0.7.0
    The ``init_kwargs`` argument.
```

This results in a false positive:

```
Raised exception is not explicitly raised: `. versionadded` (DOC502) [Ln 7, Col 5]
```

Note the line number is also wrong; it's line 27 of the docstring, line 6 of the `Raises` section if you include the line with "Raises" on it.

It seems like Ruff thinks `versionadded:` is part of the `Raises` block, even though it's unindented. Interestingly, removing both colons from `versionadded` makes the issue go away. Adding just one back triggers the bug again.

Playground link: https://play.ruff.rs/2f264f7b-d661-4af3-83e0-2db04e30ced8

### Version

0.12.0

---

_Renamed from "Ruff treats text after `Raises` section as part of it if it contains a colon" to "DOC-502: False positive if following text contains a colon" by @dargueta on 2025-06-26 14:24_

---

_Renamed from "DOC-502: False positive if following text contains a colon" to "DOC502: False positive if following text contains a colon" by @dargueta on 2025-06-26 14:27_

---

_Label `bug` added by @ntBre on 2025-06-26 14:49_

---

_Label `docstring` added by @ntBre on 2025-06-26 14:49_

---

_Comment by @ntBre on 2025-06-26 14:57_

Thanks for the report! It does look similar to #16578, but it's hard to tell if it's exactly the same. Here's a slightly shorter reproduction based on your very helpful example:

```python
def foo():
    """First line.

   Raises:
        ValueError:
            some text

    .. versionadded:: 0.7.0
        The ``init_kwargs`` argument.
    """
    raise ValueError
```

[playground](https://play.ruff.rs/2ae561af-f337-41aa-8b0a-c228b404df54)

---

_Comment by @dargueta on 2025-09-23 13:38_

This is still happening on 0.13.1 with the same settings.

---

_Referenced in [astral-sh/ruff#20535](../../astral-sh/ruff/pulls/20535.md) on 2025-09-23 14:33_

---

_Closed by @ntBre on 2025-11-12 21:37_

---
