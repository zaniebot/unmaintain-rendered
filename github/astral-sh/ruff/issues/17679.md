---
number: 17679
title: Allow formatting only changed blocks (git)
type: issue
state: open
author: ahmedyasserays
labels:
  - cli
  - wish
assignees: []
created_at: 2025-04-28T13:03:25Z
updated_at: 2025-04-29T13:30:48Z
url: https://github.com/astral-sh/ruff/issues/17679
synced_at: 2026-01-07T12:31:13-06:00
---

# Allow formatting only changed blocks (git)

---

_Issue opened by @ahmedyasserays on 2025-04-28 13:03_

It would be very helpful to add a flag to format only the changed blocks detected by git, something like what darker does
https://github.com/akaihola/darker

I know that darker are planning to support ruff as a formatter but I think it might be a good idea to be moved inside ruff itself if possible

---

_Comment by @MichaReiser on 2025-04-28 13:29_

Makes sense, although it would ideally support both linting and formatting only changed ranges

---

_Label `cli` added by @MichaReiser on 2025-04-28 13:34_

---

_Label `wish` added by @MichaReiser on 2025-04-28 13:34_

---

_Comment by @Avasam on 2025-04-29 00:25_

There's many reasons _**not**_ to like https://pypi.org/project/pre-commit/, but I'll still mention that https://github.com/astral-sh/ruff-pre-commit supports this as well.

---

_Comment by @ahmedyasserays on 2025-04-29 10:16_

There is another open issue about allowing multiple ranges
https://github.com/astral-sh/ruff/issues/12800

Now I'm not sure if the git implementation should be done in this repo, or it could be implemented https://github.com/astral-sh/ruff-vscode instead 

---

_Comment by @MichaReiser on 2025-04-29 11:58_

@ahmedyasserays Ruff's native server (the default now) supports formatting modified files only by using the *Format modified files* command or configuring `"editor.formatOnSaveMode": "modifications",`

---

_Comment by @ahmedyasserays on 2025-04-29 12:45_

@MichaReiser This works on save only.
I thought it was implemented from VS Code side, and I didn't know that it's in the language server 

Is there a way to make it work with the format shortcut (ctrl + shift + I) ?

---

_Comment by @MichaReiser on 2025-04-29 12:48_

The LSP only supports range formatting but that's sufficient for VS code because it can pass the range of the changed lines. 

You could try setting up a custom keyboard shortcut for *Format modified files*

---

_Comment by @ahmedyasserays on 2025-04-29 13:30_

I managed to create a task and bind it to a shortcut üëçüèª 


---
