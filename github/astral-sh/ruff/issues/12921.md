---
number: 12921
title: Invalid python code in the documentation for ASYNC100 rule
type: issue
state: closed
author: olutra
labels:
  - documentation
assignees: []
created_at: 2024-08-16T08:41:42Z
updated_at: 2024-08-16T10:25:00Z
url: https://github.com/astral-sh/ruff/issues/12921
synced_at: 2026-01-07T12:31:13-06:00
---

# Invalid python code in the documentation for ASYNC100 rule

---

_Issue opened by @olutra on 2024-08-16 08:41_

Examples for the rule **cancel-scope-no-checkpoint (ASYNC100)** are not valid python code
https://github.com/astral-sh/ruff/blob/d8debb7a36bad602b543a299f5cdca5b4c29524f/crates/ruff_linter/src/rules/flake8_async/rules/cancel_scope_no_checkpoint.rs#L29-L35

The code 
```python
import asyncio

async def func():
    with asyncio.timeout(2):
        do_something()
        await awaitable()

asyncio.run(func())
```
will throw a TypeError
`TypeError: 'Timeout' object does not support the context manager protocol`
because `asyncio.timeout` is an _asynchronous_ context manager.


---

_Referenced in [astral-sh/ruff#12924](../../astral-sh/ruff/pulls/12924.md) on 2024-08-16 10:12_

---

_Comment by @MichaReiser on 2024-08-16 10:12_

Thanks

---

_Label `documentation` added by @MichaReiser on 2024-08-16 10:12_

---

_Closed by @MichaReiser on 2024-08-16 10:25_

---
