---
number: 16824
title: "`signature-in-docstring` (`D402`) - false positive on usage example"
type: issue
state: open
author: DetachHead
labels:
  - docstring
assignees: []
created_at: 2025-03-18T07:52:09Z
updated_at: 2025-03-18T14:15:12Z
url: https://github.com/astral-sh/ruff/issues/16824
synced_at: 2026-01-07T12:31:13-06:00
---

# `signature-in-docstring` (`D402`) - false positive on usage example

---

_Issue opened by @DetachHead on 2025-03-18 07:52_

### Summary

```py
def do_while(condition: Callable[[], bool]) -> Generator[bool]:
    """usage: `for _ in do_while(...)`.""" # error: First line should not be the function's signature
```

[playground](https://play.ruff.rs/8c8144fb-c8c3-4501-8d26-9afe3dffd08d)

you could argue that the docstring shouldn't have an example as the first line, but that's a separate issue. i think `signature-in-docstring` should not be reported in this case because it's not a signature. perhaps it should only be reported if the function name is at the start of the docstring [like the example in the docs](https://docs.astral.sh/ruff/rules/signature-in-docstring/#example)

### Version

_No response_

---

_Comment by @ntBre on 2025-03-18 14:14_

Hmm, this seems to be consistent with the [implementation](https://github.com/PyCQA/pydocstyle/blob/8d0cdfc93e86e096bb5753f07dc5c7c373e63837/src/pydocstyle/checker.py#L562) of the upstream rule, and we also have a similar test case:

https://github.com/astral-sh/ruff/blob/682ba383cb9e5f1369ce3ccb6ff71f7b65ce72a4/crates/ruff_linter/resources/test/fixtures/pydocstyle/D402.py#L7-L8

But I also kind of agree that it's a pretty imprecise check.

---

_Label `docstring` added by @ntBre on 2025-03-18 14:15_

---
