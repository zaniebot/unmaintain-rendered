---
number: 14320
title: Bad identification of unused noqa statements (RUF100)
type: issue
state: closed
author: jankatins
labels: []
assignees: []
created_at: 2024-11-13T14:14:41Z
updated_at: 2024-11-13T14:16:35Z
url: https://github.com/astral-sh/ruff/issues/14320
synced_at: 2026-01-07T12:31:13-06:00
---

# Bad identification of unused noqa statements (RUF100)

---

_Issue opened by @jankatins on 2024-11-13 14:14_

The following file has two errors, one wrong:

```python
"""Test."""

class Whatever:
    """A class."
    def __init__(self, password: str) -> None:
        """A class init."""
        self.password = password

Whatever(password="test_password")
Whatever(password="test_password")  # noqa: S106
Whatever(password="test_password")  # noqa: S106 Possible hardcoded password
```

```shell
λ  ruff check --select=ALL utils/__init__.py
utils/__init__.py:9:10: S106 Possible hardcoded password assigned to argument: "password"
   |
 7 |         self.password = password
 8 | 
 9 | Whatever(password="test_password")
   |          ^^^^^^^^^^^^^^^^^^^^^^^^ S106
10 | Whatever(password="test_password")  # noqa: S106
11 | Whatever(password="test_password")  # noqa: S106 Possible hardcoded password
   |

utils/__init__.py:11:37: RUF100 [*] Unused `noqa` directive (unknown: `Possible`)
   |
 9 | Whatever(password="test_password")
10 | Whatever(password="test_password")  # noqa: S106
11 | Whatever(password="test_password")  # noqa: S106 Possible hardcoded password
   |                                     ^^^^^^^^^^^^^^^^^^^^^ RUF100
   |
   = help: Remove unused `noqa` directive

Found 2 errors.
[*] 1 fixable with the `--fix` option.
```

The S106 is correct, but the RUF100 tells me that the noqa statement is wrong. And If I fix it via adding `--fix` to the ruff call, the last line in the file is shortened to

```python
Whatever(password="test_password")  # noqa: S106 hardcoded password
```

and now it's not anymore complained about:

```shell
 λ  ruff check --select=ALL utils/__init__.py --fix
utils/__init__.py:9:10: S106 Possible hardcoded password assigned to argument: "password"
   |
 7 |         self.password = password
 8 | 
 9 | Whatever(password="test_password")
   |          ^^^^^^^^^^^^^^^^^^^^^^^^ S106
10 | Whatever(password="test_password")  # noqa: S106
11 | Whatever(password="test_password")  # noqa: S106 hardcoded password
   |

Found 1 error.
```

(Note: this also happens with other noqa statements, not only with S106)

```shell
 λ  ruff --version
ruff 0.7.3
```

(It didn't happen with older ruff versions, we just got a few renovate PRs which errors because of this upgrade)

---

_Comment by @jankatins on 2024-11-13 14:16_

Damn, didn't look int he closed section: this is https://github.com/astral-sh/ruff/issues/14228 and already fixed.

---

_Closed by @jankatins on 2024-11-13 14:16_

---
