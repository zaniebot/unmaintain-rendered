---
number: 19016
title: "Cleanup Ruff's CLI tests"
type: issue
state: open
author: MichaReiser
labels:
  - help wanted
  - testing
assignees: []
created_at: 2025-06-28T18:52:57Z
updated_at: 2025-10-03T01:22:14Z
url: https://github.com/astral-sh/ruff/issues/19016
synced_at: 2026-01-07T12:31:13-06:00
---

# Cleanup Ruff's CLI tests

---

_Issue opened by @MichaReiser on 2025-06-28 18:52_

Ruff's CLI integration tests (`crates/ruff/tests`) contain a lot of shared boilerplate code (shared between test functions but also test files). We should try to extract those into a more reusable testing infra. I think ty's CLI test infra works pretty well and we should try if we can use the same structure for ruff. 

https://github.com/astral-sh/ruff/blob/1f27d53fd576e92a7d2cd4abc1761d6ad836d85b/crates/ty/tests/cli/main.rs#L600

---

_Label `help wanted` added by @MichaReiser on 2025-06-28 18:52_

---

_Label `testing` added by @MichaReiser on 2025-06-28 18:52_

---

_Referenced in [astral-sh/ruff#20689](../../astral-sh/ruff/pulls/20689.md) on 2025-10-03 00:58_

---

_Comment by @Renkai on 2025-10-03 01:01_

Hi, I tried to help on this with PR:https://github.com/astral-sh/ruff/pull/20689
Not sure if it's the right direction. If I get yes I will keep working until the file lint.rs are all rewritten in the new style.

---

_Referenced in [astral-sh/ruff#20953](../../astral-sh/ruff/pulls/20953.md) on 2025-10-18 03:46_

---
