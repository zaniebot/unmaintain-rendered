---
number: 946
title: F401 column number is imprecise
type: issue
state: closed
author: relsunkaev
labels: []
assignees: []
created_at: 2022-11-28T20:29:24Z
updated_at: 2022-11-30T00:01:41Z
url: https://github.com/astral-sh/ruff/issues/946
synced_at: 2026-01-07T12:31:12-06:00
---

# F401 column number is imprecise

---

_Issue opened by @relsunkaev on 2022-11-28 20:29_

When some of the `from` statement's imports are unused, ruff highlights the entire statement. For large, multi-line imports this creates a lot of noise when using an extension to highlight errors in the editor and it may be better for the error to point to the exact imports that are unused instead.

Example:
```python
from typing import (
    Any,
    Awaitable,
    Hashable,
    Iterable,
    Mapping,
    Sequence,
    TypeAlias,
    TypedDict,
)

SomeAlias = Mapping[str, str] | Sequence[str] | Iterable[str] | Awaitable[str]
```

Will generate

```
example.py:1:1: F401 `typing.Any`, `typing.TypedDict` imported but unused
```

This would probably require reporting each unused import separately though. I'm willing to take a stab at a PR but was wondering if this change is unwelcome/unwanted by the maintainers.

---

_Comment by @charliermarsh on 2022-11-28 20:34_

Yeah this could definitely be improved. IIRC, I implemented it this way to make autofixing easier and more reliable. But now that we support iterative autofix, it might be fine to revert back to "one error per unused import".

It may not be trivial, though, since we'll have to do some bookkeeping as we autofix, since we want to avoid leaving around empty statements like:

```py
from typing import (
)
```


---

_Label `enhancement` added by @charliermarsh on 2022-11-28 20:35_

---

_Comment by @charliermarsh on 2022-11-28 20:40_

The downside is that if we mark each member as its own error, then if you were to trigger an "autofix" for that error (e.g., in the VS Code UI), you'd have to repeat that action for each member.

---

_Comment by @relsunkaev on 2022-11-28 21:17_

It seems `autofix::fixer::apply_fixes` keeps track of applied `Patch` objects (using `BTreeSet`) and skips them. I'm thinking I can just use the same patch for every error and only the first one will get applied.

---

_Comment by @charliermarsh on 2022-11-28 21:19_

Oh yeah, that seems reasonable!

---

_Comment by @charliermarsh on 2022-11-28 23:34_

PR welcome for that change if you’re up for it — otherwise I’ll get to it at some point :)

---

_Referenced in [astral-sh/ruff#958](../../astral-sh/ruff/pulls/958.md) on 2022-11-29 04:02_

---

_Closed by @charliermarsh on 2022-11-30 00:01_

---
