---
number: 12434
title: "Implement `pydoclint`"
type: issue
state: open
author: augustelalande
labels:
  - docstring
  - plugin
assignees: []
created_at: 2024-07-21T16:30:51Z
updated_at: 2025-10-16T22:19:15Z
url: https://github.com/astral-sh/ruff/issues/12434
synced_at: 2026-01-07T12:31:13-06:00
---

# Implement `pydoclint`

---

_Issue opened by @augustelalande on 2024-07-21 16:30_

This issue tracks the implementation of [pydoclint](https://jsh9.github.io/pydoclint/violation_codes.html). Following discussion in #11471 it was decided to prefer `pydoclint` over `darglint` for implementation in ruff, since they cover mostly the same ruleset, and `pydoclint` is still actively developed (unlike `darglint`). This issue should then supersede #458.

## Rules
* [ ] `DOC101` Docstring contains fewer arguments than in function signature
* [x] `DOC102` Docstring contains more arguments than in function signature
* [ ] ~`DOC103` Docstring arguments are different from function arguments~
* [ ] `DOC104` Arguments are the same in the docstring and the function signature, but are in a different order
* [ ] `DOC105` Argument names match, but type hints do not match
* [ ] ~`DOC106` The option `--arg-type-hints-in-signature` is `True` but there are no argument type hints in the signature~ (covered by `ANN`)
* [ ] ~`DOC107` The option `--arg-type-hints-in-signature` is `True` but not all args in the signature have type hints~ (covered by `ANN`)
* [ ] ~`DOC108` The option `--arg-type-hints-in-signature` is `False` but there are argument type hints in the signature~ (covered by `ANN`)
* [ ] `DOC109` The option `--arg-type-hints-in-docstring` is `True` but there are no type hints in the docstring arg list
* [ ] `DOC110` The option `--arg-type-hints-in-docstring` is `True` but not all args in the docstring arg list have type hints
* [ ] `DOC111` The option `--arg-type-hints-in-docstring` is `False` but there are type hints in the docstring arg list
* [x] `DOC201` Function/method does not have a return section in docstring
* [x] `DOC202` Function/method has a return section in docstring, but there are no return statements or annotations
* [ ] `DOC203` Return type(s) in the docstring not consistent with the return annotation
* [ ] `DOC301` `__init__()` should not have a docstring; please combine it with the docstring of the class
* [ ] `DOC302` The class docstring does not need a "Returns" section, because `__init__()` cannot return anything
* [ ] ~`DOC303` The `__init__()` docstring does not need a "Returns" section, because it cannot return anything~
* [ ] `DOC304` Class docstring has an argument/parameter section; please put it in the `__init__()` docstring
* [ ] `DOC305` Class docstring has a "Raises" section; please put it in the `__init__()` docstring
* [ ] `DOC306` The class docstring does not need a "Yields" section, because `__init__()` cannot yield anything
* [ ] ~`DOC307` The `__init__()` docstring does not need a "Yields" section, because `__init__()` cannot yield anything~
* [ ] ~`DOC401` (Deprecated; this violation code no longer appears)~
* [x] `DOC402` Function/method has "yield" statements, but the docstring does not have a "Yields" section
* [x] `DOC403` Function/method has a "Yields" section in the docstring, but there are no "yield" statements, or the return annotation is not a Generator/Iterator/Iterable
* [ ] `DOC404` The types in the docstring's Yields section and the return annotation in the signature are not consistent
* [x] `DOC501` Function/method has "raise" statements, but the docstring does not have a "Raises" section
* [x] `DOC502` Function/method has a "Raises" section in the docstring, but there are not "raise" statements in the body
* [ ] ~`DOC503` Exceptions in the “Raises” section in the docstring do not match those in the function body~
* [ ] `DOC504` Function/method has assert statements, but the docstring does  not have a “Raises” section. (Assert statements could raise  “AssertError”.)
* [ ] `DOC601` Class docstring contains fewer class attributes than actual class attributes
* [ ] `DOC602` Class docstring contains more class attributes than in actual class attributes
* [ ] `DOC603` Class docstring attributes are different from actual class attributes
* [ ] `DOC604` Attributes are the same in docstring and class def, but are in a different order
* [ ] `DOC605` Attribute names match, but type hints in these attributes do not match

## Style support
* [x] Support [google](https://www.sphinx-doc.org/en/master/usage/extensions/example_google.html) style docstrings.
* [x] Support [numpy](https://numpydoc.readthedocs.io/en/latest/format.html) style docstrings.
* [ ] Support [sphinx](https://www.sphinx-doc.org/en/master/usage/extensions/example_google.html) style docstrings.

---

_Label `plugin` added by @dhruvmanila on 2024-07-22 05:34_

---

_Label `docstring` added by @dhruvmanila on 2024-07-22 05:34_

---

_Referenced in [astral-sh/ruff#458](../../astral-sh/ruff/issues/458.md) on 2024-07-23 15:57_

---

_Referenced in [astral-sh/ruff#12520](../../astral-sh/ruff/issues/12520.md) on 2024-07-26 02:11_

---

_Referenced in [astral-sh/ruff#12485](../../astral-sh/ruff/pulls/12485.md) on 2024-07-26 04:08_

---

_Referenced in [astral-sh/ruff#12538](../../astral-sh/ruff/pulls/12538.md) on 2024-07-27 04:54_

---

_Comment by @sbrugman on 2024-07-31 12:38_

I would like to enforce a certain style docstrings. I do not think it is contained in the existing rules here or in `darglint`. Suggesting it to be `DOC901`. 

In theory this case could be covered by the full set of rules if you enable all:
it requires docstrings to be present, and then if we use another style these parameters will not be picked up.
However, I would like to make docstrings optional, and only enforce correctness and completeness then.

---

_Referenced in [meltano/sdk#2590](../../meltano/sdk/pulls/2590.md) on 2024-08-05 23:39_

---

_Referenced in [astral-sh/ruff#12767](../../astral-sh/ruff/issues/12767.md) on 2024-08-08 22:12_

---

_Comment by @RubenVanEldik on 2024-08-14 14:36_

I really like these new rules, they provide a lot of extra guardrails for docstrings!

When trying to start using rule `DOC202` I ran into a bug. When defining an abstract method, the rule raises an error, because nothing is returned (which makes sense, since it's an empty method, the real code is in the subclasses).

As a small example, an error is raised for this method:

```py
    @property
    @abc.abstractmethod
    def realised_prices(self) -> pd.DataFrame:
        """
        The realised prices of the market.

        Returns:
            The realised prices as a DataFrame
        """
```

**UPDATE: This issue has already been solved (see: https://github.com/astral-sh/ruff/issues/12893)**

---

_Referenced in [astral-sh/ruff#12893](../../astral-sh/ruff/issues/12893.md) on 2024-08-14 14:48_

---

_Comment by @tjkuson on 2024-08-17 11:20_

Does the Astral team have an opinion on the implementation of DOC109, DOC110, and DOC111? Separating DOC109 and DOC110 seems inconsistent with how D417 works. Seeing as DOC111 is just the inverse behaviour, my intuition is that it would make the most sense for these to be consolidated into one configurable rule.

---

_Comment by @ddelange on 2024-08-17 17:00_

That config also overlaps with the strikethrough rules covered by ANN. We currently ignore ANN because we run mypy. When the function is fully typehinted, the docstring doesn't need any types, sphinx will still render the docstring including arg and return types [for example](https://mapply.readthedocs.io/en/stable/_code_reference/mapply.html#mapply.mapply.mapply).

---

_Comment by @Ben-Epstein on 2024-08-20 14:05_

Does anyone know if other linting tools already implemented by ruff support the `DOC6xx` set of rules? I'm a bit surprised but I couldn't find them in pydocstyle, pylint, or flake8.

---

_Comment by @KyleKing on 2024-08-22 10:32_

I really like these rules as well!

However, it would be great if the rules only applied to public functions and methods as indicated by a `_` prefix for private.

For example, I wouldn't want to waste time adding a complete and correct docstring when the function is private and ignored by most documentation generators.

```py
def _escape(text: str) -> str:
    """Hypothetical function that does some internal business logic."""
    if "&&" in text:
        raise CustomError()
    return text.replace(";", "\;")
```

I believe a workaround today would be to move any private functions into a file prefixed by `_` and use a file pattern ignore (e.g. `_*`), but it would be nice to avoid extra refactoring and file-splitting. (For completeness, other workarounds are to remove the docstring and convert to a comment for private functions or to add a bunch of `noqa` ignores)

---

_Comment by @augustelalande on 2024-08-22 14:25_

@KyleKing 
> However, it would be great if the rules only applied to public functions and methods as indicated by a _ prefix for private.

This makes sense to me. We should add a configuration option, to optionally allow/disallow the DOC rules on private functions.

Unfortunatelly, I won't be able to get to this any time soon. If you're up to it, feel free to open a PR.

---

_Comment by @tjkuson on 2024-08-22 17:07_

> @KyleKing
> 
> > However, it would be great if the rules only applied to public functions and methods as indicated by a _ prefix for private.
> 
> This makes sense to me. We should add a configuration option, to optionally allow/disallow the DOC rules on private functions.
> 
> Unfortunatelly, I won't be able to get to this any time soon. If you're up to it, feel free to open a PR.

I can work on that (and ignore nested functions as well).

---

_Comment by @ddelange on 2024-08-22 18:52_

regarding nested functions, private functions etc, here's a nice source of configs (from interrogate, a docstring coverage tool):

```ini
ignore-init-method = false
ignore-init-module = false
ignore-magic = false
ignore-semiprivate = false
ignore-private = false
ignore-property-decorators = false
ignore-module = false
ignore-nested-functions = false
ignore-nested-classes = false
ignore-setters = false
ignore-overloaded-functions = false
```

[source](https://github.com/econchick/interrogate?tab=readme-ov-file#configuration)

---

_Comment by @ddelange on 2024-08-23 08:09_

And personally I'd love an `ignore-oneline-docstrings` option (darglint's `strictness=short`).

---

_Comment by @tjkuson on 2024-08-23 17:52_

> And personally I'd love an `ignore-oneline-docstrings` option (darglint's `strictness=short`).

That particular configuration is likely blocked by #5860 – we'd need a member of the Astral team to decide what level of docstring configuration they'd like and how (e.g., if the configuration would apply to a subset of docstring diagnostics, or all of them).

EDIT: I should probably elaborate. The proposal to restrict docstring diagnostics based on docstring complexity (what you describe) is distinct to what I linked (which is a proposal to limited based on function complexity). However, they face overlapping design challenges, so it might make sense to link them.

---

_Comment by @tjkuson on 2024-09-01 09:37_

`DOC303` is covered by `DOC202`

---

_Referenced in [astral-sh/ruff#13280](../../astral-sh/ruff/pulls/13280.md) on 2024-09-07 23:57_

---

_Referenced in [astral-sh/ruff#13286](../../astral-sh/ruff/pulls/13286.md) on 2024-09-08 21:01_

---

_Referenced in [astral-sh/ruff#13302](../../astral-sh/ruff/pulls/13302.md) on 2024-09-10 05:19_

---

_Comment by @Apakottur on 2024-09-24 10:43_

Pydoclint introduced [DOC503](https://github.com/jsh9/pydoclint/pull/161) for checking exceptions a few weeks ago. It's covered by DOC501/DOC502 in Ruff (which are still in preview), but perhaps worth adding to the list in this issue as completed?

---

_Comment by @ssbarnea on 2024-09-27 10:28_

@Apakottur Yeah, and I already raised https://github.com/jsh9/pydoclint/issues/171 about it. Apparently ruff is not affected by it.

---

_Referenced in [AndydeCleyre/nestedtextto#9](../../AndydeCleyre/nestedtextto/issues/9.md) on 2024-10-25 15:49_

---

_Referenced in [astral-sh/ruff#14050](../../astral-sh/ruff/issues/14050.md) on 2024-11-01 18:32_

---

_Referenced in [zenml-io/zenml#3012](../../zenml-io/zenml/pulls/3012.md) on 2024-11-28 08:42_

---

_Referenced in [reflex-dev/reflex#4454](../../reflex-dev/reflex/issues/4454.md) on 2024-11-29 12:58_

---

_Comment by @jsh9 on 2025-01-13 01:44_

> > [@KyleKing](https://github.com/KyleKing)
> > > However, it would be great if the rules only applied to public functions and methods as indicated by a _ prefix for private.
> > 
> > 
> > This makes sense to me. We should add a configuration option, to optionally allow/disallow the DOC rules on private functions.
> > Unfortunatelly, I won't be able to get to this any time soon. If you're up to it, feel free to open a PR.
> 
> I can work on that (and ignore nested functions as well).

Hi @KyleKing @augustelalande @tjkuson and @ddelange :

I'm the author of _pydoclint_.  Maybe I can share some thoughts behind why pydoclint does not support omitting private functions/methods.

Suppose a linter only checks certain functions in a repo and omits other functions, we may end up with a repo with mixed docstring styles as well as some other implications.  For example:

* Public functions have nicely written docstrings, and private functions have incorrect docstrings
* Public functions have Google style docstrings (as enforced by a linter), while private functions' docstrings are in all sorts of styles
* If we change some functions from public to private, their docstrings suddenly become unchecked
* If we change some functions from private to public, we could have a surge of violations due to months of being omitted

That's why I didn't design such an exception in _pydoclint_.  That said, there are indeed ways to "be lazy" in _pydoclint_:
* Don't write any docstring, then _pydoclint_ has nothing to check.  (_pydoclint_ defers to other linters such as _pydocstyle_ to enforce the existence of docstrings.)
* Write "one line" docstrings (without Args, Returns, Yields, etc. sections)
  * This is controlled by _pydoclint_'s `--skip-checking-short-docstrings` option (which is `True` by default)


---

_Comment by @jsh9 on 2025-01-13 08:42_

> I would like to enforce a certain style docstrings. I do not think it is contained in the existing rules here or in `darglint`. Suggesting it to be `DOC901`.
> 
> In theory this case could be covered by the full set of rules if you enable all: it requires docstrings to be present, and then if we use another style these parameters will not be picked up. However, I would like to make docstrings optional, and only enforce correctness and completeness then.

Hi @sbrugman , 

I'm the author of _pydoclint_.  In the latest version of _pydoclint_ (0.6.0), I added a new violation code (`DOC003`) to perform a docstring style mismatch check: for example, if you specify `--style=google`, but your functions' docstring are written in another style, you'll see `DOC003`.

More details (including caveats) are here: https://jsh9.github.io/pydoclint/style_mismatch.html

The authors of Ruff are welcome to add this new code in Ruff's roadmap.

---

_Referenced in [flyteorg/flytekit#3077](../../flyteorg/flytekit/pulls/3077.md) on 2025-01-22 18:10_

---

_Referenced in [statisticsnorway/ssb-pypitemplate#71](../../statisticsnorway/ssb-pypitemplate/issues/71.md) on 2025-02-19 12:53_

---

_Comment by @tjkuson on 2025-02-27 23:30_

I'll have a PR up for DOC104 this weekend

---

_Referenced in [astral-sh/ruff#16875](../../astral-sh/ruff/issues/16875.md) on 2025-03-20 18:45_

---

_Referenced in [PrairieLearn/PrairieLearn#11761](../../PrairieLearn/PrairieLearn/pulls/11761.md) on 2025-04-15 04:09_

---

_Referenced in [Parcels-code/Parcels#1971](../../Parcels-code/Parcels/issues/1971.md) on 2025-04-16 13:29_

---

_Referenced in [narwhals-dev/narwhals#2424](../../narwhals-dev/narwhals/issues/2424.md) on 2025-04-23 14:19_

---

_Comment by @HenriBlacksmith on 2025-04-24 06:35_

Is there any plan to stabilize the pydoclint rules which have already been implemented?

---

_Comment by @ntBre on 2025-04-24 13:07_

We've looked into stabilizing them in the previous two minor releases (0.9 and 0.10/11),  but many, or possibly all, of them had recent PRs adjusting their behavior, or open, unresolved issues. There's also an open [PR](https://github.com/astral-sh/ruff/pull/13286) adding support for Sphinx-style docstrings, which are not supported currently.

In short, I think we're a bit hesitant to stabilize them while there's still a lot of development and discussion ongoing.

---

_Referenced in [ansible/galaxy-importer#343](../../ansible/galaxy-importer/pulls/343.md) on 2025-05-19 14:35_

---

_Referenced in [alliander-opensource/rcdt_robotics#186](../../alliander-opensource/rcdt_robotics/pulls/186.md) on 2025-05-28 07:27_

---

_Referenced in [astral-sh/ruff#18918](../../astral-sh/ruff/issues/18918.md) on 2025-06-24 16:29_

---

_Referenced in [astral-sh/ruff#9070](../../astral-sh/ruff/issues/9070.md) on 2025-09-06 09:37_

---

_Referenced in [astral-sh/ruff#20346](../../astral-sh/ruff/issues/20346.md) on 2025-09-11 13:01_

---

_Referenced in [astral-sh/ruff#20376](../../astral-sh/ruff/pulls/20376.md) on 2025-09-13 21:26_

---

_Referenced in [astral-sh/ruff#20772](../../astral-sh/ruff/pulls/20772.md) on 2025-10-08 19:52_

---

_Referenced in [astral-sh/ruff#21076](../../astral-sh/ruff/pulls/21076.md) on 2025-10-25 21:22_

---

_Referenced in [RascalSoftware/RasCAL-2#164](../../RascalSoftware/RasCAL-2/pulls/164.md) on 2025-11-26 14:14_

---
