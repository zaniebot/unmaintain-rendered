---
number: 15162
title: "[flake8-type-checking] TC010 false positive"
type: issue
state: closed
author: dacevedo12
labels:
  - question
assignees: []
created_at: 2024-12-27T16:12:33Z
updated_at: 2024-12-27T17:39:14Z
url: https://github.com/astral-sh/ruff/issues/15162
synced_at: 2026-01-07T12:31:13-06:00
---

# [flake8-type-checking] TC010 false positive

---

_Issue opened by @dacevedo12 on 2024-12-27 16:12_

Given a recursive type hint like the following:

```python
TMetadata = dict[str, int | "TMetadata"]
```

Ruff says `Invalid string member in `X | Y`-style union type Ruff(TC010)`

As a workaround, one can declare the union using the old way

```python
TMetadata = dict[str, Union[int, "TMetadata"]]
```

---

_Comment by @InSyncWithFoo on 2024-12-27 16:18_

I don't think the error is a false positive. It is reporting exactly what Python would tell you if you were to run the code.

```pycon
>>> TMetadata = dict[str, int | "TMetadata"]
Traceback (most recent call last):
  File "<python-input-0>", line 1, in <module>
    TMetadata = dict[str, int | "TMetadata"]
                          ~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for |: 'type' and 'str'
```

---

_Label `needs-info` added by @MichaReiser on 2024-12-27 16:59_

---

_Label `needs-info` removed by @MichaReiser on 2024-12-27 16:59_

---

_Label `question` added by @MichaReiser on 2024-12-27 16:59_

---

_Comment by @dacevedo12 on 2024-12-27 17:39_

Seems to be a limitation in python then. It looks like 3.12's `type` statement will solve this by removing the need for reference strings

---

_Closed by @dacevedo12 on 2024-12-27 17:39_

---
