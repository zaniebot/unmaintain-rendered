---
number: 14226
title: "Feature Request: Allow re-including directories that were excluded in parent config"
type: issue
state: closed
author: nuncaeslupus
labels:
  - question
  - configuration
assignees: []
created_at: 2024-11-09T15:21:28Z
updated_at: 2024-11-10T15:30:28Z
url: https://github.com/astral-sh/ruff/issues/14226
synced_at: 2026-01-07T12:31:13-06:00
---

# Feature Request: Allow re-including directories that were excluded in parent config

---

_Issue opened by @nuncaeslupus on 2024-11-09 15:21_

Searched keywords: "include", "exclude", "extend-include", "extend-exclude"
Ruff version: 0.3.0

## Use Case
When using `extend` to inherit from a parent `pyproject.toml`, there's currently no way to selectively re-include directories that were excluded using `extend-exclude` in the parent config. This is particularly problematic when:

1. Working with team configurations where the root `pyproject.toml` is tracked in version control and excludes certain directories
2. Developers want to apply Ruff to those excluded directories in their local development environment without modifying the team's config

## Current Workarounds
Currently, the only workarounds are:
- Create a completely separate config without extending the parent (requires manual syncing of settings)
- Write a script to sync configurations while removing exclusions
- Modify team's config to use more specific exclusion patterns

Neither solution is ideal as they either require extra maintenance or modify team-wide settings.

## Proposed Solution
Add the ability to re-include previously excluded directories, either through:

1. A new `include-dirs` option that would take precedence over `extend-exclude`:
```toml
[tool.ruff]
extend = "../pyproject.toml"  # Parent has extend-exclude = ["tmp"]
include-dirs = ["tmp"]  # Override the exclusion for this directory
```

2. Or allow `extend-exclude = []` to clear inherited exclusions, then redefine them as needed:

```toml
[tool.ruff]
extend = "../pyproject.toml"
extend-exclude = []  # Clear inherited exclusions
```
This would provide more flexibility for local development workflows while maintaining team-wide configurations.


<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->


---

_Comment by @dylwil3 on 2024-11-09 23:07_

What happens if you put your local settings in a `ruff.toml` file that is gitignored? That should take precedence over the pyproject config: https://docs.astral.sh/ruff/configuration/#config-file-discovery

(Sorry - I can't quite tell if this coincides with one of your workaround bullets).

---

_Label `configuration` added by @dylwil3 on 2024-11-10 00:13_

---

_Comment by @nuncaeslupus on 2024-11-10 09:04_

> What happens if you put your local settings in a `ruff.toml` file that is gitignored? That should take precedence over the pyproject config: https://docs.astral.sh/ruff/configuration/#config-file-discovery

But do you mean a `ruff.toml` full settings file or one that includes `extend = "pyproject.toml"`?

What I need is to use the general settings but overwrite some of them. Concretely, I want the folder "tmp" inside the main folder to be taken into account by ruff, even if the main `pyproject.toml` file states it shouldn't. If I create a modified copy of the main `pyproject.toml`, I must be aware of any changes made to it to update my local settings file, which I would prefer not to do.

BTW, I'm using it with VSCode extension, so I tell the extension explicitly where to find the config file via the `--config` command-line arg.

Thanks!



---

_Comment by @MichaReiser on 2024-11-10 09:22_

Have you tried using exclude instead of extend-exclude in the inherited configuration? Exclude should clear out the inherited rules 

---

_Label `question` added by @MichaReiser on 2024-11-10 09:22_

---

_Comment by @nuncaeslupus on 2024-11-10 11:11_

> Have you tried using exclude instead of extend-exclude in the inherited configuration? Exclude should clear out the inherited rules

I used `exclude = ["tmp"]` in the main settings file and `exclude = []` in my local file and it worked!

Actually, the main file had no `exclude` setting. What is the difference between both?

---

_Comment by @MichaReiser on 2024-11-10 15:28_

I'm glad to hear that. extend-exclude adds additional entries and exclude replaces them

---

_Closed by @MichaReiser on 2024-11-10 15:28_

---

_Comment by @nuncaeslupus on 2024-11-10 15:30_

Thank you both, @dylwil3 and @MichaReiser!

---
