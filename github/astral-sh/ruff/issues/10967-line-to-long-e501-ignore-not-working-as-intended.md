---
number: 10967
title: "`line-to-long` (`E501`) ignore not working as intended"
type: issue
state: closed
author: bedilbek
labels:
  - question
assignees: []
created_at: 2024-04-16T06:17:42Z
updated_at: 2024-04-16T08:04:17Z
url: https://github.com/astral-sh/ruff/issues/10967
synced_at: 2026-01-07T13:12:15-06:00
---

# `line-to-long` (`E501`) ignore not working as intended

---

_Issue opened by @bedilbek on 2024-04-16 06:17_

before
```python
def check():
    assert lists == [  # noqa
        np.array([[996, 631], [992, 632], [983, 637], [978, 638], [974, 640], [968, 643], [963, 647],[958, 649], [955, 651], [949, 657], [946, 659], [944, 660]]),  # noqa
        np.array([[1520, 373], [1512, 379], [1510, 380], [1508, 381], [1496, 385], [1494, 386],[1492, 387], [1489, 389], [1486, 391], [1477, 400], [1474, 402]]),  # noqa
        np.array([[1527, 1045], [1500, 1046], [1492, 1047], [1476, 1051], [1469, 1051], [1460, 1054],[1454, 1055], [1445, 1055], [1439, 1057], [1430, 1060]]),  # noqa
        np.array([[1814, 570], [1812, 571], [1808, 575], [1807, 577], [1807, 589], [1806, 598],[1805, 605], [1804, 611], [1803, 615], [1801, 619], [1800, 623]]),  # noqa
        np.array([[1039, 419], [1034, 420], [1031, 421], [1029, 422], [1027, 423], [1024, 425],[1022, 427], [1020, 431], [1017, 434], [1015, 435], [1007, 435]])  # noqa
    ]  # noqa

```

after
```python
def check():
    assert lists == [  # noqa
        np.array([
            [996, 631],
            [992, 632],
            [983, 637],
            [978, 638],
            [974, 640],
            [968, 643],
            [963, 647],
            [958, 649],
            [955, 651],
            [949, 657],
            [946, 659],
            [944, 660],
        ]),  # noqa
        np.array([
            [1520, 373],
            [1512, 379],
            [1510, 380],
            [1508, 381],
            [1496, 385],
            [1494, 386],
            [1492, 387],
            [1489, 389],
            [1486, 391],
            [1477, 400],
            [1474, 402],
        ]),  # noqa
        np.array([
            [1527, 1045],
            [1500, 1046],
            [1492, 1047],
            [1476, 1051],
            [1469, 1051],
            [1460, 1054],
            [1454, 1055],
            [1445, 1055],
            [1439, 1057],
            [1430, 1060],
        ]),  # noqa
        np.array([
            [1814, 570],
            [1812, 571],
            [1808, 575],
            [1807, 577],
            [1807, 589],
            [1806, 598],
            [1805, 605],
            [1804, 611],
            [1803, 615],
            [1801, 619],
            [1800, 623],
        ]),  # noqa
        np.array([
            [1039, 419],
            [1034, 420],
            [1031, 421],
            [1029, 422],
            [1027, 423],
            [1024, 425],
            [1022, 427],
            [1020, 431],
            [1017, 434],
            [1015, 435],
            [1007, 435],
        ]),  # noqa
    ]  # noqa

```

[Playground](https://play.ruff.rs/6d2bf2d2-0606-407c-a84c-8d671ea20427)

---

_Comment by @MichaReiser on 2024-04-16 06:28_

The formatter uses `fmt: off` and `fmt: skip` suppression comments to disable formatting of a line. 

```python
def check():
    assert lists == [ 
        np.array([[996, 631], [992, 632], [983, 637], [978, 638], [974, 640], [968, 643], [963, 647],[958, 649], [955, 651], [949, 657], [946, 659], [944, 660]]),  # noqa: E501
        np.array([[1520, 373], [1512, 379], [1510, 380], [1508, 381], [1496, 385], [1494, 386],[1492, 387], [1489, 389], [1486, 391], [1477, 400], [1474, 402]]),  # noqa: E501
        np.array([[1527, 1045], [1500, 1046], [1492, 1047], [1476, 1051], [1469, 1051], [1460, 1054],[1454, 1055], [1445, 1055], [1439, 1057], [1430, 1060]]),  # noqa: E501
        np.array([[1814, 570], [1812, 571], [1808, 575], [1807, 577], [1807, 589], [1806, 598],[1805, 605], [1804, 611], [1803, 615], [1801, 619], [1800, 623]]),  # noqa: E501
        np.array([[1039, 419], [1034, 420], [1031, 421], [1029, 422], [1027, 423], [1024, 425],[1022, 427], [1020, 431], [1017, 434], [1015, 435], [1007, 435]])  # noqa: E501
    ]  # fmt: skip 
```

https://play.ruff.rs/64b8c543-5fa7-4aa2-a80c-8e18fb0a2aad

This should work. It's a bit annoying that you have to repeat noqa: 501 on every line. But unfortunately, 

```python
def check():
    assert lists == [ 
        np.array([[996, 631], [992, 632], [983, 637], [978, 638], [974, 640], [968, 643], [963, 647],[958, 649], [955, 651], [949, 657], [946, 659], [944, 660]]),
        np.array([[1520, 373], [1512, 379], [1510, 380], [1508, 381], [1496, 385], [1494, 386],[1492, 387], [1489, 389], [1486, 391], [1477, 400], [1474, 402]]),
        np.array([[1527, 1045], [1500, 1046], [1492, 1047], [1476, 1051], [1469, 1051], [1460, 1054],[1454, 1055], [1445, 1055], [1439, 1057], [1430, 1060]]),
        np.array([[1814, 570], [1812, 571], [1808, 575], [1807, 577], [1807, 589], [1806, 598],[1805, 605], [1804, 611], [1803, 615], [1801, 619], [1800, 623]]),
        np.array([[1039, 419], [1034, 420], [1031, 421], [1029, 422], [1027, 423], [1024, 425],[1022, 427], [1020, 431], [1017, 434], [1015, 435], [1007, 435]])
    ]  # fmt: skip # noqa: 501
``` 
doesn't work



---

_Label `question` added by @MichaReiser on 2024-04-16 06:28_

---

_Comment by @bedilbek on 2024-04-16 08:04_

@MichaReiser,

```python
# fmt: off
...
# fmt: on
```
It actually works, there was a problem of integrating ruff formatter notation into Pycharm IDE formatter. I found a workaround. Thanks anyway

---

_Closed by @bedilbek on 2024-04-16 08:04_

---
