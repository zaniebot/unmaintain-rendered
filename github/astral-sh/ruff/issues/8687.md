---
number: 8687
title: A config option to ignore rules for specific lines by pattern matching or something similar
type: issue
state: open
author: Lassii-
labels:
  - suppression
  - needs-decision
assignees: []
created_at: 2023-11-15T07:10:01Z
updated_at: 2025-02-02T16:18:48Z
url: https://github.com/astral-sh/ruff/issues/8687
synced_at: 2026-01-07T12:31:12-06:00
---

# A config option to ignore rules for specific lines by pattern matching or something similar

---

_Issue opened by @Lassii- on 2023-11-15 07:10_

Hello,

I'm working in a project where we're currently introducing Ruff as the solution for linting and it's overall working great but we have one situation where I haven't been able to find a good solution. We use Python and Robot Framework and we define the RF test keywords to be used in RF in Python, for example `@keyword("User presses the info button"` and some of these lines are longer than 120 characters which is our line length limit set in Ruff. 

However for these lines we would like to ignore the rule because the readability gets worse if they're split. I'm aware that you can add `# noqa: E501` to a line to ignore the rule but this is quite cumbersome and needs manual maintenance plus these files also have other lines that we want the rule to be enabled for so full file E501 ignore is not good. 

There doesn't currently seem to be a way to match lines inside files by a pattern to ignore specific rules, for example lines that start with the already mentioned `@keyword` so could something like this be implemented?

Thank you,
Lassi

---

_Label `noqa` added by @zanieb on 2023-11-15 17:49_

---

_Label `needs-decision` added by @zanieb on 2023-11-15 17:49_

---

_Comment by @zanieb on 2023-11-15 17:51_

Interesting. I could see a regex -> rule codes mapping to ignore violations where the diagnostic range matches that in the regex. In practice though, I think this would be hard to implement in a performant way that matches user expectations. 

A simpler approach would be a dedicated setting for `E501` e.g. `ignores_lines: [regex, ...]` but I'm not excited about that either.

---

_Comment by @MusicalNinjaDad on 2025-01-11 09:49_

+1 for this idea with a different use case:

I find I start all my tests with:
```py
import pytest  # noqa: F401, RUF100
```

so that I can temporarily add and remove various marks etc. (e.g. `pytest.mark.xfail` or `pytest.mark.skip`) as tests and code changes, without constantly reimporting pytest and removing the import if I remove the mark.

I'd rather not add `F401` to my
```toml
[tool.ruff.lint.per-file-ignores]
    # Additional ignores for tests 
    "**/test_*.py" = [
     ...
    ]
```
as I want other imports to be checked.

---

_Comment by @coredumperror on 2025-01-29 19:01_

I'd also like a feature like this, to make Ruff ignore my `nosemgrep` comments.

For instance, it'll complain about the following as "commented out code" (rule ERA001):

     # nosemgrep:direct-use-of-jinja2

That's a false positive in this particular case, though I would rather not ignore the rule globally. But it's also rather cumbersome to add `# noqa: ERA001` to every single one of my nosemgrep comments.

Some way to say "Ignore ERA001 on all lines that begin with `# nosemgrep`" would be great.

---

_Comment by @MichaReiser on 2025-02-02 16:18_

@coredumperror You can add `nosemgrep` to the [`task-tags`](https://docs.astral.sh/ruff/settings/#lint_task-tags) setting. While not intended for this use case, it should work.

---
