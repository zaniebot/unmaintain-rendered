---
number: 3056
title: "[Autofix error] [PT009] return self.assertEqual (ruff 0.0.247)"
type: issue
state: closed
author: jonathansp
labels:
  - bug
assignees: []
created_at: 2023-02-20T12:22:34Z
updated_at: 2023-02-22T13:56:59Z
url: https://github.com/astral-sh/ruff/issues/3056
synced_at: 2026-01-07T12:31:12-06:00
---

# [Autofix error] [PT009] return self.assertEqual (ruff 0.0.247)

---

_Issue opened by @jonathansp on 2023-02-20 12:22_

Although `return self.assertEqual(True, False)` is not common usage, ruff shouldn't fail. The resulting file seems to be `return assert True == False`, which I don't understand what is wrong with `assertEqual`.

E.g.:

```python
import unittest
class MyTestCase(unittest.TestCase):
    def test_dummy(self: "MyTestCase") -> None:
        return self.assertEqual(True,  False)
```


```toml
[tool.ruff]
extend-ignore = [
  "D203",
  "D212",
  "EM101",
  "EM102",
  "INP001",
  "N812",
  "TCH002",
  "TRY003",
]
extend-select = ["ALL"]
target-version = "py39"
```

will return 

```shell
poetry run ruff . --fix

error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in `ruff`. If you could open an issue at:

    https://github.com/charliermarsh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `tests/test_consumer.py`, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!
```

---

_Renamed from "[Autofix error] return self.assertEqual (ruff 0.0.247)" to "[Autofix error] [PT009] return self.assertEqual (ruff 0.0.247)" by @jonathansp on 2023-02-20 12:31_

---

_Comment by @ngnpope on 2023-02-20 14:05_

You're not using `pytest` and the `PT*` rules only really apply in that case, so you should probably be ignoring those.

It also isn't really conventional to explicitly return the result of `self.assert*()` from your test methods. These assertion helpers always return `None` anyway, and so should your test method (implicitly).

That said, ruff should try hard to avoid creating invalid code - it should either refuse to fix this case or strip the `return`.

---

_Label `bug` added by @charliermarsh on 2023-02-20 14:34_

---

_Referenced in [astral-sh/ruff#3062](../../astral-sh/ruff/pulls/3062.md) on 2023-02-20 17:46_

---

_Closed by @charliermarsh on 2023-02-20 17:49_

---

_Comment by @jonathansp on 2023-02-22 13:56_

Thanks @charliermarsh for this fantastic tool.

---
