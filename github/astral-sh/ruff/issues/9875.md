---
number: 9875
title: "fmt: off doesn't work in `parametrized` decorator"
type: issue
state: open
author: mdczaplicki
labels:
  - formatter
  - style
assignees: []
created_at: 2024-02-07T15:32:48Z
updated_at: 2024-03-02T13:44:07Z
url: https://github.com/astral-sh/ruff/issues/9875
synced_at: 2026-01-07T12:31:13-06:00
---

# fmt: off doesn't work in `parametrized` decorator

---

_Issue opened by @mdczaplicki on 2024-02-07 15:32_

I have a test that is heavily parametrized. Like this:

```
@pytest.mark.parametrize(
    (
        "business_x_y_fully_doing_something",
        "business_x_y_not_doing_something",
        "business_v_y_who_knows_doing_something",
        "business_v_y_fully_doing_something",
        "business_z_y_fully_doing_something",
        "business_z_y_not_doing_something",
        "expected_business_x_starting_something",
        "expected_business_x_stopping_something",
        "expected_business_v_starting_something",
        "expected_business_v_stopping_something",
        "expected_business_z_fully_doing_something",
        "expected_business_z_not_doing_something",
        "business_z_doing_threshold",
        "business_z_doing_limit",
    ),
    [
        # fmt: off
        (0 , 29, 0 , 0 , 0 , 0 , 27, 0 , 0 , 0 , 0 , 0 , None, 100),
        (5 , 24, 0 , 0 , 0 , 0 , 22, 0 , 0 , 0 , 0 , 0 , None, 100),
        (30, 0 , 0 , 0 , 0 , 0 , 0 , 3 , 0 , 0 , 0 , 0 , None, 100),
        (28, 1 , 0 , 0 , 0 , 0 , 0 , 1 , 0 , 0 , 0 , 0 , None, 100),
        (0 , 29, 10, 0 , 0 , 0 , 25, 0 , 10, 0 , 0 , 0 , None, 100),
        (30, 0 , 0 , 10, 0 , 0 , 0 , 3 , 0 , 10, 0 , 0 , None, 100),
        (27, 0 , 0 , 4 , 0 , 0 , 0 , 0 , 0 , 4 , 0 , 0 , None, 100),
        (10, 0 , 0 , 0 , 0 , 10, 0 , 0 , 0 , 0 , 10, 0 , None, 100),
        (15, 5 , 0 , 0 , 4 , 5 , 5 , 0 , 0 , 0 , 7 , 2 , None, 100),
        (25, 0 , 0 , 0 , 0 , 10, 0 , 0 , 0 , 0 , 0 , 10, 50  , 100),
        (15, 5 , 0 , 0 , 4 , 5 , 5 , 0 , 0 , 0 , 5 , 4 , None, 1  ),
        # fmt: on
    ],
)
```

I want to maintain the readability of this by having exactly the same amount of distance between each value. I doesn't work with `# fmt: off` inside the decorator. In order for this to work - I'd have to surround whole test in a `fmt: off`, which I don't want to do.

---

_Referenced in [astral-sh/ruff#9588](../../astral-sh/ruff/issues/9588.md) on 2024-02-07 15:33_

---

_Label `formatter` added by @MichaReiser on 2024-02-07 16:24_

---

_Label `style` added by @MichaReiser on 2024-02-07 16:24_

---

_Comment by @MichaReiser on 2024-02-07 18:33_

Thank's @mdczaplicki for opening the issue. I understand that you don't like Ruff splitting the array after each element. I, unfortunately, haven't had a lot of time working on it but we've started a discussion around formatting arrays in  https://github.com/astral-sh/ruff/discussions/8452 I want to keep this issue open because it is slightly different in that the list elements aren't sub-lists but tuples. 

One escape hatch for now is that you can add a `fmt: skip` comment at the end of the decorator. It's not semantically identical to using a `fmt:off` - `fmt:on` region because it also disables formatting of the rest of the decorator. But it might help unblock you for now. See [this playground](https://play.ruff.rs/5f84b2da-8483-49fb-9af5-72c9b2164c6c)

---

_Comment by @mdczaplicki on 2024-02-09 10:35_

Thanks @MichaReiser, `fmt: skip` works just fine. Now I can switch from `black` üòÅ 

---

_Closed by @MichaReiser on 2024-03-02 13:43_

---

_Reopened by @MichaReiser on 2024-03-02 13:44_

---

_Referenced in [great-expectations/great_expectations#9536](../../great-expectations/great_expectations/pulls/9536.md) on 2024-03-04 14:36_

---

_Referenced in [astral-sh/ruff#20425](../../astral-sh/ruff/issues/20425.md) on 2025-09-15 21:17_

---
