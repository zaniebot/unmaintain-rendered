---
number: 21495
title: No error for nonlocal with a missing variable
type: issue
state: closed
author: eltoder
labels:
  - question
assignees: []
created_at: 2025-11-17T02:29:02Z
updated_at: 2025-11-20T16:18:02Z
url: https://github.com/astral-sh/ruff/issues/21495
synced_at: 2026-01-07T12:31:13-06:00
---

# No error for nonlocal with a missing variable

---

_Issue opened by @eltoder on 2025-11-17 02:29_

### Summary

The `nonlocal` statement requires that the variable is a local variable in one of the parent scopes. ruff does not check this. For example:
```python
def no_local_var():
    def setter(xx):
        nonlocal x
        x = xx
        print(x)

    return setter
```
(playground link: https://play.ruff.rs/f6ca3be7-208f-4ade-b68e-148d3546af6b)

This passes all checks:
```
$ ruff check --isolated t2.py
All checks passed!
```
However this fails with a SyntaxError when run:
```
$ python t2.py
  File "/home/eltoder/dev/scratch/t2.py", line 3
    nonlocal x
    ^^^^^^^^^^
SyntaxError: no binding for nonlocal 'x' found
```

### Version

0.14.5

---

_Comment by @MichaReiser on 2025-11-17 07:13_

Hi

We plan on [making this a normal syntax error](https://github.com/astral-sh/ruff/issues/17412), but, for now, you have to enable [PLE0117](https://docs.astral.sh/ruff/rules/nonlocal-without-binding/) to catch this ([playground](https://play.ruff.rs/49728d2e-065c-41fc-b254-f4788017f77f))

---

_Label `question` added by @MichaReiser on 2025-11-17 07:13_

---

_Comment by @eltoder on 2025-11-20 16:18_

I see. I think it would be better if you enabled these errors as soon as they are implemented, but I'm sure you have your reasons.

---

_Closed by @eltoder on 2025-11-20 16:18_

---

_Referenced in [astral-sh/ruff#21494](../../astral-sh/ruff/issues/21494.md) on 2025-11-20 16:31_

---
