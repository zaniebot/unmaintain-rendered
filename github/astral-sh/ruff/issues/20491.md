---
number: 20491
title: "UP008 should not apply when `__class__` is a local variable"
type: issue
state: closed
author: dscorbett
labels:
  - bug
assignees: []
created_at: 2025-09-20T21:53:05Z
updated_at: 2025-09-23T14:56:40Z
url: https://github.com/astral-sh/ruff/issues/20491
synced_at: 2026-01-07T12:31:13-06:00
---

# UP008 should not apply when `__class__` is a local variable

---

_Issue opened by @dscorbett on 2025-09-20 21:53_

### Summary

When the first argument to `super` in a method is a local variable named `__class__`, [`super-call-with-parameters` (UP008)](https://docs.astral.sh/ruff/rules/super-call-with-parameters/) should not apply. [Example](https://play.ruff.rs/9f505e06-2c92-4c72-a50d-5f92b2931a69):
```console
$ cat >up008.py <<'# EOF'
class A:
    def f(self):
        return 1
class B(A):
    def f(self):
        return 2
class C(B):
    def f(self):
        __class__ = B
        return super(__class__, self).f()
print(C().f())
# EOF

$ python up008.py
1

$ ruff --isolated check up008.py --select UP008 --unsafe-fixes --fix
Found 1 error (1 fixed, 0 remaining).

$ python up008.py 2>&1 | tail -n 1
RuntimeError: super(): __class__ cell not found
```

This isnâ€™t a problem in the usual case where `__class__` is nonlocal, whether explicitly via `nonlocal __class__` or implicitly by not being assigned to.

### Version

ruff 0.13.1 (706be0a6e 2025-09-18)

---

_Referenced in [astral-sh/ruff#20497](../../astral-sh/ruff/pulls/20497.md) on 2025-09-21 23:17_

---

_Label `bug` added by @ntBre on 2025-09-22 16:34_

---

_Closed by @ntBre on 2025-09-23 14:56_

---
