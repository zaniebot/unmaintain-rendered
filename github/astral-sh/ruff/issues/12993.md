---
number: 12993
title: "UP036 should identify sys.version_info[0] or other parts"
type: issue
state: closed
author: inoa-jboliveira
labels:
  - rule
assignees: []
created_at: 2024-08-19T17:02:42Z
updated_at: 2024-09-01T01:49:12Z
url: https://github.com/astral-sh/ruff/issues/12993
synced_at: 2026-01-07T12:31:13-06:00
---

# UP036 should identify sys.version_info[0] or other parts

---

_Issue opened by @inoa-jboliveira on 2024-08-19 17:02_

I found there was some leftover py2k code in a project that UP rules would not catch because it just matches sys.version_info as a tuple. If you just check for the 1st element, which is kinda common in the old days, it will not show an error.

```$ cat foo.py
import sys

if sys.version_info[0] < 3:
    print('old')

if sys.version_info < (3, 0):
    print('also old')

```

UP036
```
$ ruff check --isolated --select UP036 foo.py
foo.py:6:4: UP036 Version block is outdated for minimum Python version
  |
4 |     print('old')
5 |
6 | if sys.version_info < (3, 0):
  |    ^^^^^^^^^^^^^^^^^^^^^^^^^ UP036
7 |     print('also old')
  |
  = help: Remove outdated version block

Found 1 error.
No fixes available (1 hidden fix can be enabled with the `--unsafe-fixes` option).
```

It would be helpful if both options were found. I believe this is only relevant for python 2 since python 4 is no longer going to exist, but python 3 will be the forever version with the 2nd number being the de facto python version.

If so, this rule could also catch these cases. 

```
if sys.version_info[1] < 12: ...
```

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

In time: Ruff 0.6.1

---

_Comment by @dhruvmanila on 2024-08-20 03:48_

I think checking against `sys.version_info[0]` seems reasonable, not sure about `sys.version_info[1]`. What do you think @AlexWaygood ?

---

_Label `rule` added by @dhruvmanila on 2024-08-20 03:48_

---

_Comment by @inoa-jboliveira on 2024-08-20 14:01_

I think `sys.version_info[1]` would only be relevant when [PEP 2026](https://peps.python.org/pep-2026/) gets accepted, which makes the number "3" useless.

Also ruff only runs in Python 3 code. 

I imagine in a few years people saying: "this thing runs only on python 28 or 29" instead of 3.28 and 3.29

For a litmus test, you can check how often this is used on github repos. There several usages together with [0] and also by itself.

https://github.com/search?q=sys.version_info%5B1%5D+language%3Apython&type=code

---

_Comment by @MichaReiser on 2024-08-20 14:08_

I would prefer waiting with `sys.version_info[1]` until a PEP makes python 3 officially the final major version.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-08-30 23:06_

---

_Referenced in [astral-sh/ruff#13175](../../astral-sh/ruff/pulls/13175.md) on 2024-08-30 23:19_

---

_Closed by @charliermarsh on 2024-08-30 23:38_

---

_Comment by @inoa-jboliveira on 2024-09-01 01:49_

Cool, thank you!

---
