---
number: 599
title: Correctly detect noqa when used in method calls
type: issue
state: closed
author: yabirgb
labels:
  - bug
assignees: []
created_at: 2022-11-05T13:53:59Z
updated_at: 2022-11-05T14:51:41Z
url: https://github.com/astral-sh/ruff/issues/599
synced_at: 2026-01-07T12:31:12-06:00
---

# Correctly detect noqa when used in method calls

---

_Issue opened by @yabirgb on 2022-11-05 13:53_

### Problem

At rotki we have places where the `noqa: E501` rule comes in after or in function declarations like https://github.com/rotki/rotki/blob/535b7995dbf65f2824fac6fb8b73c1e1f2350613/rotkehlchen/db/upgrades/v33_v34.py#L113

### Example

In those places flake correctly detects the rule to skip the error but ruff doesn't. For a reproducible scenario I have 

```python
def caller(string: str) -> None:
    assert string is not None


caller(
    """
    This is test for a very long string where flake would prevent raising the error sicne we use noqa but ruff doesn't
    """,  # noqa: E501
)
```

That has this two different outputs

```
(rotki-main) ➜  rotki git:(trueblocks) ✗ flake8 ruff_test.py
(rotki-main) ➜  rotki git:(trueblocks) ✗ ruff ruff_test.py 
Found 1 error(s).
ruff_test.py:7:1: E501 Line too long (118 > 100 characters)
(rotki-main) ➜  rotki git:(trueblocks) ✗ 
```

### Expected behaviour

ruff should detect that the noqa rule is being used to skip the long line

---

_Comment by @charliermarsh on 2022-11-05 14:07_

Thanks for this! Great issue. Will take a look soon.

---

_Label `bug` added by @charliermarsh on 2022-11-05 14:40_

---

_Assigned to @charliermarsh by @charliermarsh on 2022-11-05 14:40_

---

_Comment by @charliermarsh on 2022-11-05 14:42_

(Reproduced.)

---

_Referenced in [astral-sh/ruff#603](../../astral-sh/ruff/pulls/603.md) on 2022-11-05 14:51_

---

_Closed by @charliermarsh on 2022-11-05 14:51_

---

_Comment by @charliermarsh on 2022-11-05 14:51_

Fixed! This will go out later today.

---
