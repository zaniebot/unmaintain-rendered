---
number: 11031
title: "Rule G004 doesn't work with inline instantiated logger"
type: issue
state: closed
author: Spenhouet
labels:
  - rule
assignees: []
created_at: 2024-04-19T09:25:06Z
updated_at: 2024-04-26T01:00:13Z
url: https://github.com/astral-sh/ruff/issues/11031
synced_at: 2026-01-07T12:31:13-06:00
---

# Rule G004 doesn't work with inline instantiated logger

---

_Issue opened by @Spenhouet on 2024-04-19 09:25_

Given the following code:
```python
logger = Logger()
logger.warning(f"{database_name} database not available.")
```

the ruff linter will complain about G004 ("Logging statement uses f-string").

But given an inline instantiation of the logger, there is no such warning.
```python
Logger().warning(f"{database_name} database not available.")
```

The "G" rule (flake8-logging-format) needs to be enabled.
My ruff version is 0.3.1.
I searched for G004 but none of the existing issues cover this. The answer might be similar to https://github.com/astral-sh/ruff/issues/6353#issuecomment-1666263576 but I do think that this is something which could be covered.

---

_Label `rule` added by @dhruvmanila on 2024-04-19 10:18_

---

_Comment by @dhruvmanila on 2024-04-19 10:21_

Yeah, our heuristics doesn't check for a direct instantiation https://github.com/astral-sh/ruff/blob/6979dadf3dcede7e120780645b14a8d2d8d92c24/crates/ruff_python_semantic/src/analyze/logging.rs#L7-L65

We could support this by updating the heuristic to include `logging.Logger()` calls

---

_Referenced in [astral-sh/ruff#11154](../../astral-sh/ruff/pulls/11154.md) on 2024-04-26 00:41_

---

_Assigned to @charliermarsh by @charliermarsh on 2024-04-26 00:42_

---

_Closed by @charliermarsh on 2024-04-26 01:00_

---
