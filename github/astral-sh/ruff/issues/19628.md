---
number: 19628
title: "RUF033 fix introduces an error for a type variable scoped to `__post_init__`"
type: issue
state: open
author: dscorbett
labels:
  - bug
  - fixes
assignees: []
created_at: 2025-07-30T01:16:46Z
updated_at: 2025-07-30T12:46:30Z
url: https://github.com/astral-sh/ruff/issues/19628
synced_at: 2026-01-07T12:31:13-06:00
---

# RUF033 fix introduces an error for a type variable scoped to `__post_init__`

---

_Issue opened by @dscorbett on 2025-07-30 01:16_

### Summary

The fix for [`post-init-default` (RUF033)](https://docs.astral.sh/ruff/rules/post-init-default/) introduces an error when the parameterâ€™s type uses a type variable scoped to `__post_init__`. It might not be possible to fix this automatically. [Example](https://play.ruff.rs/a929b4a1-f338-4169-a937-cb7ecb20727a):
```console
$ cat >ruf033.py <<'# EOF'
from annotationlib import get_annotations
from dataclasses import dataclass
@dataclass
class C:
    def __post_init__[T: (str, bytes)](self, a: T | None = None, b: T | None = None) -> None:
        self.a = str(a)
        self.b = str(b)
print(get_annotations(C))
# EOF

$ python3.14 ruf033.py
{}

$ ruff --isolated check ruf033.py --select RUF033 --unsafe-fixes --fix
Found 2 errors (2 fixed, 0 remaining).

$ cat ruf033.py
from annotationlib import get_annotations
from dataclasses import dataclass, InitVar
@dataclass
class C:
    a: InitVar[T | None] = None
    b: InitVar[T | None] = None
    def __post_init__[T: (str, bytes)](self, a: T | None, b: T | None) -> None:
        self.a = a
        self.b = b
print(get_annotations(C))

$ python3.14 ruf033.py 2>&1 | tail -n 1
NameError: name 'T' is not defined
```

### Version

ruff 0.12.7 (c5ac99889 2025-07-29)

---

_Label `bug` added by @ntBre on 2025-07-30 12:46_

---

_Label `fixes` added by @ntBre on 2025-07-30 12:46_

---
