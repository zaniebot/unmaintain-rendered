---
number: 18785
title: Add version-aware autofix for RUF063 (access-annotations-from-class-dict)
type: issue
state: open
author: dericcrago
labels:
  - fixes
  - needs-decision
assignees: []
created_at: 2025-06-19T07:10:04Z
updated_at: 2025-06-19T09:11:39Z
url: https://github.com/astral-sh/ruff/issues/18785
synced_at: 2026-01-07T12:31:13-06:00
---

# Add version-aware autofix for RUF063 (access-annotations-from-class-dict)

---

_Issue opened by @dericcrago on 2025-06-19 07:10_

### Summary

This rule request proposes adding an automatic fix for rule RUF063 to replace direct `__dict__` access to `__annotations__` with the correct, version-specific `get_annotations` function.

The implementation should be conditional, targeting the following Python versions as specified in the rule's documentation:

Current Code: `foo.__dict__.get("__annotations__")` or `foo.__dict__["__annotations__"]`

- Python >= 3.14:
  - Proposed Fix: Replace with `annotationlib.get_annotations(foo)` and add the `import annotationlib` statement.
- Python >= 3.10 and < 3.14:
  - Proposed Fix: Replace with `inspect.get_annotations(foo)` and add the `import inspect` statement.
- Python < 3.10 (with typing-extensions available):
  - Proposed Fix: Replace with `typing_extensions.get_annotations(foo)` and add the `import typing_extensions` statement.

This multi-version approach will ensure the autofix applies the most appropriate and future-proof solution depending on the project's configured target-version.

---

_Referenced in [astral-sh/ruff#18233](../../astral-sh/ruff/pulls/18233.md) on 2025-06-19 07:10_

---

_Comment by @MichaReiser on 2025-06-19 09:11_

For anyone else trying to lookup the rule. It isn't merged yet :) 


This fix would have to be at least unsafe. I'm not sure if there are even cases where we can't tell what the user wants, in which case we shouldn't provide a fix. 

Given that this rule didn't find a single hit in our ecosystem check, I suspect that providing a fix here (while nice) would only provide little value over all. 

docs: https://docs.python.org/3.14/howto/annotations.html

---

_Label `fixes` added by @MichaReiser on 2025-06-19 09:11_

---

_Label `needs-decision` added by @MichaReiser on 2025-06-19 09:11_

---
