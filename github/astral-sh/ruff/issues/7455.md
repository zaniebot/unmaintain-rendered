---
number: 7455
title: Pack of fuzzer Autofix/Infinite loop errors
type: issue
state: closed
author: qarmin
labels:
  - bug
  - fuzzer
assignees: []
created_at: 2023-09-17T11:46:07Z
updated_at: 2024-01-30T07:15:59Z
url: https://github.com/astral-sh/ruff/issues/7455
synced_at: 2026-01-07T12:31:12-06:00
---

# Pack of fuzzer Autofix/Infinite loop errors

---

_Issue opened by @qarmin on 2023-09-17 11:46_

- [x] - B006 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722458825
- [x] - B009 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722458885
- [x] - C402 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722458940
- [ ] - C413 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722458964
- [ ] - C417 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722458991
- [ ] - C418 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459065
- [ ] - D201 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459093
- [ ] - D211 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459144
- [x] - E713 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459200
- [ ] - E714 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459284
- [ ] - RUF100 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459414
- [x] - PLR0133 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459493
- [x] - PT009 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459517
- [ ] - RUF005 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459567
- [x] - SIM101 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459620
- [x] - SIM105 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459640
- [ ] - SIM208 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459666
- [x] - TCH001 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459698
- [x] - TCH002 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459794
- [x] - UP003 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459841
- [x] - UP012 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459882
- [x] - UP025 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459924
- [ ] - UP028 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722459970
- [x] - E703, F407 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722460416
- [ ] - EM103 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722460455
- [x] - PLR1701 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1722460483
- [x] - FURB140 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1729816257
- [x] - RUF013 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1729816758
- [x] - SIM300 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1729817006
- [x] - B009 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1732387247
- [x] - SIM105 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1732387485
- [ ] - SIM201 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1732387588
- [x] - B009 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1739800901
- [x] - B014 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1739801758
- [x] - PT009 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1739802958
- [x] - PIE790 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1741107573
- [x] - PT006 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1741108394
- [x] - RUF010 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1741109551
- [x] - PLE2512 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1741998106
- [x] - PLE2513 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1741998256
- [x] - B002,ERA001 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1743524750
- [x] - C406 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1743528272
- [ ] - EM101 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1743555262
- [x] - FURB140 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1743557408
- [ ] - PT006 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1744335460
- [ ] - PT014 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1744335830
- [ ] - RUF010 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1744336765
- [ ] - RUF013 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1744337171
- [x] - RET503,SIM108 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1744337758
- [x] - E274 - https://github.com/astral-sh/ruff/issues/7455#issuecomment-1785042861







---

_Comment by @qarmin on 2023-09-17 11:46_

Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select B006 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class SearchableCollection:
   def __init__(self,list_initial=[], master=None):
        s
```

error
```
/home/rafal/test/tmp_folder/FILE_R1057.py:2:36: B006 Do not use mutable data structures for argument defaults
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R1057.py`, the rule codes B006, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642721/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:46_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select B009 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
def test_rpc_callable():
    assert getattr(func, '_rpc')is True
```

error
```
/home/rafal/test/tmp_folder/FILE_R2917.py:2:12: B009 Do not call `getattr` with a constant attribute value. It is not any safer than normal property access.
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R2917.py`, the rule codes B009, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```


[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642722/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:46_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select C402 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
def middle_east_parsed_date(text_date, kwargs):
    dict_month_abbr_numeric = dict((*v, k) for k, v in enumerate(calendar.month_abbr))
```

error
```
/home/rafal/test/tmp_folder/FILE_R2713.py:2:31: C402 Unnecessary generator (rewrite as a `dict` comprehension)
Found 1 error.

error: Failed to create fix for UnnecessaryGeneratorDict: Expected tuple to contain two elements
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642723/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:47_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select C413 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class BNode (object) :
            self.by_gain = list \
                (sorted
                  ( self.candidates.keys ()
                  )
                )
```

error
```
/home/rafal/test/tmp_folder/FILE_R162.py:2:28: C413 Unnecessary `list` call around `sorted()`
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R162.py`, the rule codes C413, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642724/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:47_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select C417 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class Item():
        if ((item := item.capitalize()) in
            (item_list := list(map(lambda item_tuple: item_tuple[0],
                                   search_results := _search_item_data(item))))):
            self.__id = self.__item_data[1]
```

error
```
/home/rafal/test/tmp_folder/FILE_R872.py:3:27: C417 Unnecessary `map` usage (rewrite using a `list` comprehension)
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R872.py`, the rule codes C417, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642725/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:47_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select C418 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class PID(Controller, Base):
            raise ValueError(f"The number of set points is greater than 1, but the supplied matrix for "
                             f"{dict({'k_p': 'K_P', 't_i': 'T_I', 't_d': 'T_D'})[which]} is not a diagonal matrix. "
                             f"Coupled multi-variable control is not supported at the moment.")
```

error
```
/home/rafal/test/tmp_folder/FILE_R516.py:3:33: C418 Unnecessary `dict` literal passed to `dict()` (remove the outer call to `dict()`)
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R516.py`, the rule codes C418, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642726/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:48_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select D201 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
def maybe_async(callable_, *args, **kwargs):\

    """
    Turn a callable into a coroutine if it isn't
    """
    return asyncio.coroutine(callable_)(*args, **kwargs)
```

error
```
/home/rafal/test/tmp_folder/FILE_R132.py:3:5: D201 No blank lines allowed before function docstring (found 1)
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R132.py`, the rule codes D201, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642727/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:48_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select D211 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class Protocol4Enum(object):\

    """Implementation of the 'Protocol4' enum.
    """
    TCP = 'TCP'
```

error
```
/home/rafal/test/tmp_folder/FILE_R1422.py:3:5: D211 No blank lines allowed before class docstring
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R1422.py`, the rule codes D211, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642728/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:48_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select E713 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class Bitcoin(Base):
		if not('name' in request)or not request['name']:
			request['name'] = None
```

error
```
/home/rafal/test/tmp_folder/FILE_R3518.py:2:10: E713 Test for membership should be `not in`
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R3518.py`, the rule codes E713, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```
[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642729/python_compressed.zip)



---

_Comment by @qarmin on 2023-09-17 11:49_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select E714 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
from django.conf import settings
from django.core.exceptions import ImproperlyConfigured


# defaults

MOJEID_LOGIN_METHOD = "ANY"
MOJEID_INSTANCE_PRODUCTION = False
MOJEID_MAX_AUTH_AGE = None
MOJEID_SESSION_NEXT_PAGE_ATTR = 'mojeid_next_page'

class Settings(object):
    def __getattr__(self, name):
        try:
            attr = getattr(settings, name)
        except AttributeError:
            try:
                attr = globals()[name]
            except KeyError:
                raise AttributeError(
                    "'Settings' object has no attribute '%s'" % name)

        # validate
        if name == 'MOJEID_LOGIN_METHOD' and attr not in ("ANY", "CERT", "OTP"):
            raise ImproperlyConfigured(
                "Invalid MOJEID_LOGIN_METHOD '%s'" % attr)

        if name == 'MOJEID_MAX_AUTH_AGE' and not (
                attr is Noneor
                (isinstance(attr, int) and attr >= 0)):
            raise ImproperlyConfigured(
                "MOJEID_MAX_AUTH_AGE must be a positive integer (>= 0) or None")
        return attr

mojeid_settings = Settings()
```

error
```
/home/rafal/test/tmp_folder/FILE_R3249.py:29:17: E714 Test for object identity should be `is not`
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R3249.py`, the rule codes E714, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642731/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:50_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select PIE804,RUF100 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
from d3r.molfilevalidator import D3RMoleculeFromMolFileViaOpeneyeFactory \
    # noqa: E402
class TestMolFileValidator(unittest.TestCase):
            factory = D3RMoleculeFromMolFileViaOpeneyeFactory()
```

error
```
/home/rafal/test/tmp_folder/FILE_R3421.py:2:5: RUF100 Unused `noqa` directive (non-enabled: `E402`)
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R3421.py`, the rule codes RUF100, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642734/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:50_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select PLR0133 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
def test_ffpuppet_22(mocker, tmp_path):
            log_fp.write(
            )  # must be 2nd line
            for _ in range(4):  # pad out to 6 lines
                log_fp.write("filler line\n")
            log_fp.write(
                "==70811==ERROR: AddressSanitizer:"
    is not False         )  # must be 2nd line
```

error
```
/home/rafal/test/tmp_folder/FILE_R895.py:7:17: PLR0133 Two constants compared in a comparison, consider replacing `"==70811==ERROR: AddressSanitizer:" is not False`
Found 1 error.

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642736/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:50_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select PT009 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class test_compare_ExpCM_emp_phi_with_without_divpress(unittest.TestCase):
                        (self.assertTrue(
                            "piAx_piAy_beta[r][x][y] = {17}".format(
                                    self.model.piAx_piAy_beta[r][x][y])))
```

error
```
/home/rafal/test/tmp_folder/FILE_R1333.py:2:26: PT009 Use a regular `assert` instead of unittest-style `assertTrue`
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R1333.py`, the rule codes PT009, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642738/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:51_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select RUF005 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
def bash_completion():
    '''
    '''
    return '\n'.join(
        (
            f'''        then cat << EOF\n{borgmatic.commands.completion.actions.upgrade_message(
                    'sudo sh -c "borgmatic --bash-completion > $BASH_SOURCE"',
                )}\nEOF''',
        )
        + tuple(
            ),
        )
```

error
```
/home/rafal/test/tmp_folder/FILE_R793.py:5:9: RUF005 Consider iterable unpacking instead of concatenation
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R793.py`, the rule codes RUF005, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642740/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:51_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select SIM101 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class SDOF_Model():
        if(isinstance(self.k, int)) or (isinstance(self.k, float)):
            print(f"Constant Mutual Stiffness = {self.k} lb/ft ")
```

error
```
/home/rafal/test/tmp_folder/FILE_R1009.py:2:11: SIM101 Multiple `isinstance` calls for expression, merge into a single call
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R1009.py`, the rule codes SIM101, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642741/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:51_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select SIM105 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
from serial.tools.list_ports import comports \

def listEBBports():
    try:
        com_ports_list = list(comports())
    except TypeError:
        try:
            port_name.close()
        except serial.SerialException:
            pass
```

error
```
/home/rafal/test/tmp_folder/FILE_R3096.py:7:9: SIM105 Use `contextlib.suppress(serial.SerialException)` instead of `try`-`except`-`pass`
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R3096.py`, the rule codes SIM105, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642742/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:52_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select SIM208 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
def match_type( param_name, all_param_values, configs, validate_uris=True, search_paths=True, search_subdirs=True, allow_remote_uri=True, allow_local_path=True, input_dir=""):
    type_matching_functions = { 
    }
    assert not ((value[0] == "null" or value[0] == "") and 
        not configs[param_name]["null_allowed"]
    ), "parameter is \"null\" but this is not allowed."
    assert not (
        not configs[param_name]["is_array"]# fmt: on and 
        (value[0] == "itemNull")
    ), "Parameter is set to \"itemNull\" but it is not an array/list."
```

error
```
/home/rafal/test/tmp_folder/FILE_R1071.py:7:12: SIM208 Use `configs[param_name]["is_array"](value[0] == "itemNull")` instead of `not (not configs[param_name]["is_array"](value[0] == "itemNull"))`
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R1071.py`, the rule codes SIM208, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642743/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:52_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select TCH001 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
from __future__ import annotations
if sys.implementation.name == "circuitpython" and sys.implementation.version[0] <= 4:
    raise ImportError(
    )
from .advertising import Advertisement
try:
    from typing import Iterator, NoReturn, Optional, Tuple, Type, TYPE_CHECKING, Union
    if TYPE_CHECKING:
        from adafruit_ble.uuid import UUID
except ImportError:
    def start_scan(
    ) -> Iterator[Advertisement]:
        """
        """
```

error
```
/home/rafal/test/tmp_folder/FILE_R1117.py:4:30: TCH001 Move application import `.advertising.Advertisement` into a type-checking block
Found 101 errors (100 fixed, 1 remaining).


error: Failed to converge after 100 iterations.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BInfinite%20loop%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R1117.py`, the rule codes TCH001, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```
[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642744/python_compressed.zip)



---

_Comment by @qarmin on 2023-09-17 11:52_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select TCH002 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
import debus
try:
    import typing
except:
    def send(self, message: 'debus.Message'):
        buf = OutputBuffer()
```

error
```
/home/rafal/test/tmp_folder/FILE_R35.py:3:12: TCH002 Move third-party import `debus` into a type-checking block
Found 101 errors (100 fixed, 1 remaining).


error: Failed to converge after 100 iterations.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BInfinite%20loop%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R35.py`, the rule codes TCH002, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642745/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:53_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select UP003 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class RDirNode(object):
        assert isinstance(fullname, type("")is not True)
```

error
```
/home/rafal/test/tmp_folder/FILE_R1822.py:2:37: UP003 Use `str` instead of `type(...)`
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R1822.py`, the rule codes UP003, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642746/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:53_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select UP012 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
def _match_ignore(line):
	input=stdin and'\n'.encode()or None
```

error
```
/home/rafal/test/tmp_folder/7386394.py:2:17: UP012 Unnecessary call to `encode` as UTF-8
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/7386394.py`, the rule codes UP012, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642747/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:53_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select UP025 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class PerDurationDatabase:
                raise ValueError(
                    u"Transmit rate conflict:"
                    f" {measurement!r} {previous_tr!r}"
                )
```

error
```
/home/rafal/test/tmp_folder/166_IDX_0_RAND_17972367865119120768684.py:3:23: UP025 Remove unicode literals from strings
/home/rafal/test/tmp_folder/166_IDX_0_RAND_17972367865119120768684.py:4:39: UP025 Remove unicode literals from strings
Found 2 errors.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/166_IDX_0_RAND_17972367865119120768684.py`, the rule codes UP025, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642749/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:53_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select UP028 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
def scraper(keyword, csv=True):
    for course in go_t,o_course(driver, keyword, csv):
        yield course
```

error
```
/home/rafal/test/tmp_folder/FILE_R165.py:2:5: UP028 Replace `yield` over `for` loop with `yield from`
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R165.py`, the rule codes UP028, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642750/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:56_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select E703,F407 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class AFT_FSDK_Version(Structure):
    _fields_ = [('lCodebase',c_int32),('lMajor',c_int32),('lMinor',c_int32),('lBuild',c_int32),
               ('Version',c_har_p),('BuildDate',c_char_p),('CopyRight',c_char_p)]
AFT_FSDK_OPF_90_ONLY = 0x2;       90; 90; ...
```

error
```
/home/rafal/test/tmp_folder/FILE_R71.py:4:41: E703 Statement ends with an unnecessary semicolon
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R71.py`, the rule codes E703, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642765/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-17 11:57_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select EM103 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class FieldXmlMapper(Mapper):
            raise exc.SerializationError(
            )
            if self.required:\
                raise exc.SerializationError("required element '{}' is not set".format(name))
```

error
```
/home/rafal/test/tmp_folder/FILE_R4553.py:5:46: EM103 Exception must not use a `.format()` string directly, assign to variable first
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R4553.py`, the rule codes EM103, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```
[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642766/python_compressed.zip)




---

_Comment by @qarmin on 2023-09-17 11:57_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select PLR1701 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class SDOF_Model():
        if(isinstance(self.k, int)) or (isinstance(self.k, float)):
            print(f"Constant Mutual Stiffness = {self.k} lb/ft ")
```

error
```
/home/rafal/test/tmp_folder/FILE_R1009.py:2:11: PLR1701 Merge `isinstance` calls: `isinstance(self.k, (float, int))`
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R1009.py`, the rule codes PLR1701, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12642767/python_compressed.zip)


---

_Referenced in [astral-sh/ruff#7461](../../astral-sh/ruff/pulls/7461.md) on 2023-09-17 15:05_

---

_Referenced in [astral-sh/ruff#7466](../../astral-sh/ruff/pulls/7466.md) on 2023-09-17 15:16_

---

_Referenced in [astral-sh/ruff#7465](../../astral-sh/ruff/issues/7465.md) on 2023-09-17 15:18_

---

_Referenced in [astral-sh/ruff#7489](../../astral-sh/ruff/pulls/7489.md) on 2023-09-18 10:03_

---

_Label `bug` added by @charliermarsh on 2023-09-18 16:32_

---

_Label `fuzzer` added by @charliermarsh on 2023-09-18 16:32_

---

_Comment by @qarmin on 2023-09-21 15:29_

Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select FURB140 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
from future.builtins import list, range, str, zip
def _parseparam(s):
        return [self.policy.header_fetch_parse(k, v)
                for k, v in self._headers]
```

error
```
/home/rafal/test/tmp_folder/9446089.py:3:16: FURB140 Use `itertools.starmap` instead of the generator
Found 1 error.

error: Failed to create fix for ReimplementedStarmap: Can't use built-in `list` constructor
```



---

_Comment by @qarmin on 2023-09-21 15:29_


Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select RUF013 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
if TYPE_CHECKING:
    from typing_extensions import Literal

    def __init__(
        self,
        *,
        name: str,
        log: str,
        outcome: "Literal['passed', 'failed', 'skipped']" = None,
        status: "Literal['PASS', 'FAIL', 'TODO']" = None,
    ):
        self.log = log
```

error
```
/home/rafal/test/tmp_folder/FILE_R1839.py:9:19: RUF013 PEP 484 prohibits implicit `Optional`
/home/rafal/test/tmp_folder/FILE_R1839.py:10:18: RUF013 PEP 484 prohibits implicit `Optional`
Found 2 errors.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/FILE_R1839.py`, the rule codes RUF013, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```



---

_Comment by @qarmin on 2023-09-21 15:29_

Ruff 0.0.290 (latest changes from main branch)
```
ruff  *.py --select SIM300 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
def load_refresh_menu(stdscr):
    status = f'{"Please wait.."<{cols}}'
```

error
```
/home/rafal/test/tmp_folder/26_IDX_0_RAND_40846251158665996368475.py:2:17: SIM300 Yoda conditions are discouraged, use `{cols} > "Please wait.."` instead
Found 1 error.


error: Autofix introduced a syntax error. Reverting all changes.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BAutofix%20error%5D

...quoting the contents of `/home/rafal/test/tmp_folder/26_IDX_0_RAND_40846251158665996368475.py`, the rule codes SIM300, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

```



---

_Comment by @addisoncrump on 2023-09-21 15:58_

Hey @qarmin, this is really impressive stuff. From what we saw of the fuzzer being used, it seems to be primarily crossover + token injection. Would you be willing to share the token list you used? We'd like to add it as a dictionary so that we can enhance the fuzzer in the repository as well.

---

_Comment by @qarmin on 2023-09-21 17:57_

My fuzzer takes as input valid python files from pypi and then delete or replace random charachers/bytes, remove part of file or adds some python keywords(which probably refers to tokens) - https://github.com/qarmin/Automated-Fuzzer/blob/e597141b722a9a65f334f811dd8941cce54a022e/src/broken_files.rs#L15-L25

---

_Comment by @addisoncrump on 2023-09-21 17:58_

Awesome, thanks -- I'm gonna try to extend the fuzzer accordingly, and fix the issues you were having a while back.

---

_Comment by @qarmin on 2023-09-23 18:54_


Ruff 0.0.291 (latest changes from main branch)
```
ruff  *.py --select B009 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class LossReasonsServiceTests(BaseTestCase):
        self.assertTrue(hasattr(self.client.loss_reasons, 'create') and callable(getattr(* self.client.loss_reasons, 'create')))
```

error
```
/home/rafal/test/tmp_folder/F_NAME_132842343117658050088170.py:2:82: B009 Do not call `getattr` with a constant attribute value. It is not any safer than normal property access.
Found 1 error.

error: Autofix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_132842343117658050088170.py` with rule codes B009: cannot use starred expression here at byte offset 127
---
class LossReasonsServiceTests(BaseTestCase):
        self.assertTrue(hasattr(self.client.loss_reasons, 'create') and callable((* self.client.loss_reasons).create))
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12707105/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-23 18:56_

Ruff 0.0.291 (latest changes from main branch)
```
ruff  *.py --select SIM105 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
ï»¿#!/usr/bin/env python
try:
   from __builtin__ import bytes, str, open, super, range, zip, round, int, pow, object, input
except ImportError:    pass
```

error
```
/home/rafal/test/tmp_folder/F_NAME_38230381679717619313488.py:2:1: SIM105 Use `contextlib.suppress(ImportError)` instead of `try`-`except`-`pass`
Found 1 error.

error: Autofix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_38230381679717619313488.py` with rule codes SIM105: Got unexpected token ï»¿ at byte offset 18
---
import contextlib
ï»¿#!/usr/bin/env python
with contextlib.suppress(ImportError):
   from __builtin__ import bytes, str, open, super, range, zip, round, int, pow, object, input

---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12707126/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-23 18:56_

Ruff 0.0.291 (latest changes from main branch)
```
ruff  *.py --select SIM201 --no-cache --fix --preview
```

file content(at least simple cpython script shows that this is valid python file):
```
class Flight(DBC):
    @ensure(
    )
    def __init__(
    ) -> None:
        self.miles = miles if miles is not None else 125
    for line in lines[1:]:
            Flight(
        )
@ensure(lambda lines, result: not (len(lines) == 0)or len(result) == 0)
def compute_totals(blocks: List[Block]) -> MutableMapping[str, int]:
    """
    """
```

error
```
/home/rafal/test/tmp_folder/F_NAME_137270796279532355955000.py:10:31: SIM201 Use `len(lines) != 0` instead of `not len(lines) == 0`
Found 1 error.

error: Autofix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_137270796279532355955000.py` with rule codes SIM201: ParseBigIntError { kind: Empty } at byte offset 229
---
class Flight(DBC):
    @ensure(
    )
    def __init__(
    ) -> None:
        self.miles = miles if miles is not None else 125
    for line in lines[1:]:
            Flight(
        )
@ensure(lambda lines, result: len(lines) != 0or len(result) == 0)
def compute_totals(blocks: List[Block]) -> MutableMapping[str, int]:
    """
    """
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12707130/python_compressed.zip)


---

_Referenced in [astral-sh/ruff#7621](../../astral-sh/ruff/pulls/7621.md) on 2023-09-23 19:00_

---

_Comment by @charliermarsh on 2023-09-23 19:02_

I can't reproduce the SIM105 error. Are you able to include the exact file for that one?

---

_Comment by @qarmin on 2023-09-23 19:13_

Both in copied content and original file I can reproduce autofix error(file included)

---

_Comment by @charliermarsh on 2023-09-23 19:20_

Thanks, I reproduced with the original file (it has to do with BOM, I think).

---

_Referenced in [astral-sh/ruff#7622](../../astral-sh/ruff/pulls/7622.md) on 2023-09-23 19:26_

---

_Comment by @qarmin on 2023-09-28 18:16_


Ruff 0.0.291 (latest changes from main branch)
```
ruff  *.py --select B009 --no-cache --fix --preview
```

file content:
```
class HandlerSearch(grok.Adapter):
        if registry is not getattr(self.
registration.registry, '__name__'):
            r
```

error
```
/home/rafal/test/tmp_folder/F_NAME_397049888682981927011.py:2:28: B009 Do not call `getattr` with a constant attribute value. It is not any safer than normal property access.
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_397049888682981927011.py` with rule codes B009: invalid syntax. Got unexpected token Newline at byte offset 67
---
class HandlerSearch(grok.Adapter):
        if registry is not self.
registration.registry.__name__:
            r
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12752693/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-28 18:17_


Ruff 0.0.291 (latest changes from main branch)
```
ruff  *.py --select B014 --no-cache --fix --preview
```

file content:
```
try:
    pas
except(re.error, re.error):
    p
```

error
```
/home/rafal/test/tmp_folder/F_NAME_10084362444425542044222.py:3:7: B014 Exception handler with duplicate exception: `re.error`
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_10084362444425542044222.py` with rule codes B014: invalid syntax. Got unexpected token 'exceptre' at byte offset 13
---
try:
    pas
exceptre.error:
    p
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12752698/python_compressed.zip)


---

_Comment by @qarmin on 2023-09-28 18:18_


Ruff 0.0.291 (latest changes from main branch)
```
ruff  *.py --select PT009 --no-cache --fix --preview
```

file content:
```
class TestR64( unittest.TstCae ):
        self.assertEqual( crc, 0x995DC9BBDF1939FA )
```

error
```
/home/rafal/test/tmp_folder/F_NAME_122287474984177188476320.py:2:9: PT009 Use a regular `assert` instead of unittest-style `assertEqual`
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_122287474984177188476320.py` with rule codes PT009: invalid syntax. Got unexpected token 'DC9BBDF1939FA' at byte offset 59
---
class TestR64( unittest.TstCae ):
        assert crc == 995DC9BBDF1939FA
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12752705/python_compressed.zip)


---

_Referenced in [astral-sh/ruff#7699](../../astral-sh/ruff/pulls/7699.md) on 2023-09-28 19:39_

---

_Referenced in [astral-sh/ruff#7700](../../astral-sh/ruff/pulls/7700.md) on 2023-09-28 20:23_

---

_Referenced in [astral-sh/ruff#7701](../../astral-sh/ruff/pulls/7701.md) on 2023-09-28 20:42_

---

_Closed by @charliermarsh on 2023-09-28 20:59_

---

_Reopened by @charliermarsh on 2023-09-28 21:04_

---

_Comment by @qarmin on 2023-09-29 15:50_

Ruff 0.0.291 (latest changes from main branch)
```
ruff  *.py --select PIE790 --no-cache --fix --preview
```

file content:
```
for i in range(2):
    pass

    pass
```

error
```
/home/rafal/test/tmp_folder/F_NAME_173190734823555694175982.py:2:5: PIE790 Unnecessary `pass` statement
/home/rafal/test/tmp_folder/F_NAME_173190734823555694175982.py:4:5: PIE790 Unnecessary `pass` statement
Found 2 errors.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_173190734823555694175982.py` with rule codes PIE790: unindent does not match any outer indentation level at byte offset 19
---
for i in range(2):


---
```



---

_Comment by @qarmin on 2023-09-29 15:51_


Ruff 0.0.291 (latest changes from main branch)
```
ruff  *.py --select PT006 --no-cache --fix --preview
```

file content:
```
import pytest
@pytest.mark.parametrize(
    [
        (  # ts1 - load 2 dgs, extract 2 tables with interpolation
        (  # ts3 - load & extract, multiple transforms
        ),
        ),
    ],
)
def test_run_with_plot(inpath, tname, outpath, outfig, datadir):
    dg, tab = dgpost.run(inpath)
```

error
```
/home/rafal/test/tmp_folder/F_NAME_19859640196357090399250.py:3:5: PT006 Wrong name(s) type in `@pytest.mark.parametrize`, expected `csv`
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_19859640196357090399250.py` with rule codes PT006: invalid syntax. Got unexpected token ',' at byte offset 47
---
import pytest
@pytest.mark.parametrize(
    (),,
)
def test_run_with_plot(inpath, tname, outpath, outfig, datadir):
    dg, tab = dgpost.run(inpath)
---
```



---

_Comment by @qarmin on 2023-09-29 15:52_

Ruff 0.0.291 (latest changes from main branch)
```
ruff  *.py --select RUF010 --no-cache --fix --preview
```

file content:
```
def qikprop_as_a_service(filepaths: Union[str, Path, List[Union[str, Path]]],
                         ):
        raise ValueError(f"Length of output_tar_names does not equal length of globed input files:\n"
                         f"Output Files: {str(output_tar_name for output_tar_name in output_tar_names)}")
```

error
```
/home/rafal/test/tmp_folder/F_NAME_169535865006683847245904.py:4:43: RUF010 Use explicit conversion flag
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_169535865006683847245904.py` with rule codes RUF010: invalid syntax. Got unexpected token 'for' at byte offset 266
---
def qikprop_as_a_service(filepaths: Union[str, Path, List[Union[str, Path]]],
                         ):
        raise ValueError(f"Length of output_tar_names does not equal length of globed input files:\n"
                         f"Output Files: {output_tar_name for output_tar_name in output_tar_names!s}")
---
```


---

_Referenced in [astral-sh/ruff#7715](../../astral-sh/ruff/pulls/7715.md) on 2023-09-29 17:05_

---

_Comment by @qarmin on 2023-10-01 08:05_

Ruff 0.0.291 (latest changes from main branch)
```
ruff  *.py --select ANN001,PLE2512 --no-cache --fix --preview
```

file content:
```
f"""#!/usr/bin/env python3
BASE_CMD = {cmd}
}}
    cmdwra.main(ROUTING, OASE_CMD)
"""
```

error
```
/home/rafal/test/tmp_folder/F_NAME_2715173009665357364.py:4:10: PLE2512 Invalid unescaped character SUB, use "\x1A" instead
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_2715173009665357364.py` with rule codes PLE2512: Got unexpected unicode at byte offset 58
---
f"""#!/usr/bin/env python3
BASE_CMD = {cmd}
}}
    cmdwr\x1\x1A.main(ROUTING, OASE_CMD)
"""
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12776660/python_compressed.zip)


---

_Comment by @qarmin on 2023-10-01 08:06_

Ruff 0.0.291 (latest changes from main branch)
```
ruff  *.py --select ARG001,PLE2513 --no-cache --fix --preview
```

file content:
```
def _set_block_container_style(
):
        st.mardown(
            f"""
        }}
     .element-container div:nth-child(1 {{
            color: {COLR};
    """,
        )
```

error
```
/home/rafal/test/tmp_folder/F_NAME_9585623491027526231.py:6:39: PLE2513 Invalid unescaped character ESC, use "\x1B" instead
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_9585623491027526231.py` with rule codes PLE2513: Got unexpected unicode at byte offset 123
---
def _set_block_container_style(
):
        st.mardown(
            f"""
        }}
     .element-container div:nth-child(\x1\x1B {{
            color: {COLR};
    """,
        )
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12776663/python_compressed.zip)

---

_Referenced in [astral-sh/ruff#7741](../../astral-sh/ruff/pulls/7741.md) on 2023-10-01 15:35_

---

_Comment by @qarmin on 2023-10-02 18:24_

Ruff 0.0.292 (latest changes from main branch)
```
ruff  *.py --select B002,ERA001 --no-cache --fix --preview
```

file content:
```
def get_supported_sites(scraper_classes: list) -> list:
        site_info = f"{description}\n" \
                    # f"--example url: {url}"
        all_sites.append(site_info)
```

error
```
/home/rafal/test/tmp_folder/F_NAME_17511717847310148370.py:3:21: ERA001 Found commented-out code
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_17511717847310148370.py` with rule codes ERA001: invalid syntax. Got unexpected token 'all_sites' at byte offset 105
---
def get_supported_sites(scraper_classes: list) -> list:
        site_info = f"{description}\n" \
        all_sites.append(site_info)
---
```
[python_compressed.zip](https://github.com/astral-sh/ruff/files/12785315/python_compressed.zip)


---

_Comment by @qarmin on 2023-10-02 18:27_

Ruff 0.0.292 (latest changes from main branch)
```
ruff  *.py --select C406 --no-cache --fix --preview
```

file content:
```
picture_hashes = dict \
    (( (( ( '3d', dict
            ,  ('5.15.0', [ '0d77bf5fab130b50b52f6e08b294fb44319b002c'
                          ]
            ))
            ,  ('5.15.0', [ '06f2207b0eed942368bc5f2f5f88cb418da0b151'
                          ]
       ,  ( 'basic_output_plotly', dict
            (( ('5.4.0',  'f28fff3f214477c51c136afaf04b027cc0082bdc')
            ,  ('5.15.0', [ 'f28fff3f214477c51c136afaf04b027cc0082bdc'
                          ]
            ))
            ))
            ))
            ,  ('5.15.0', [ '92118fc5f98e118ff29cab3ed947c701eed92a6d'
                          ]
            ))
       ))
```

error
```
/home/rafal/test/tmp_folder/F_NAME_8746074058484126729.py:6:36: C406 Unnecessary `tuple` literal (rewrite as a `dict` literal)
Found 2 errors (1 fixed, 1 remaining).

error: Failed to create fix for UnnecessaryLiteralDict: Failed to extract expression from source
error: Failed to create fix for UnnecessaryLiteralDict: Failed to extract expression from source
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12785325/python_compressed.zip)


---

_Comment by @qarmin on 2023-10-02 18:36_

Ruff 0.0.292 (latest changes from main branch)
```
ruff  *.py --select EM101 --no-cache --fix --preview
```

file content:
```
def unvectorize_ld_matrix(vec):
    if mat_size * (mat_size + 1) / 2 != vec.size: \
        raise ValueError('Vector is an impossible size')
```

error
```
/home/rafal/test/tmp_folder/F_NAME_6002756774573705671.py:3:26: EM101 Exception must not use a string literal, assign to variable first
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_6002756774573705671.py` with rule codes EM101: unexpected indent at byte offset 129
---
def unvectorize_ld_matrix(vec):
    if mat_size * (mat_size + 1) / 2 != vec.size: \
        msg = 'Vector is an impossible size'
        raise ValueError(msg)
---
```
[python_compressed.zip](https://github.com/astral-sh/ruff/files/12785387/python_compressed.zip)



---

_Comment by @qarmin on 2023-10-02 18:36_

Ruff 0.0.292 (latest changes from main branch)
```
ruff  *.py --select FURB140 --no-cache --fix --preview
```

file content:
```
from future.builtins import list, range, str, zip
def _parseparam(s):
        return [self.policy.header_fetch_parse(k, v)
                for k, v in self._headers]
```

error
```
/home/rafal/test/tmp_folder/F_NAME_12108810957222076977.py:3:16: FURB140 Use `itertools.starmap` instead of the generator
Found 1 error.

error: Failed to create fix for ReimplementedStarmap: Can't use built-in `list` constructor
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12785390/python_compressed.zip)


---

_Comment by @charliermarsh on 2023-10-02 20:27_

That last one is "working as intended", but it's not a useful user-facing message.

---

_Comment by @qarmin on 2023-10-03 07:09_

Ruff 0.0.292 (latest changes from main branch)
```
ruff  *.py --select PT006 --no-cache --fix --preview
```

file content:
```
import pytest
@pytest.mark.parametrize(
    [
        (  # ts1 - load 2 dgs, extract 2 tables with interpolation
        (  # ts3 - load & extract, multiple transforms
        ),
        ),
    ],
)
def test_run_with_plot(inpath, tname, outpath, outfig, datadir):
    dg, tab = dgpost.run(inpath)
```

error
```
/home/rafal/test/tmp_folder/F_NAME_15771089586878863891.py:3:5: PT006 Wrong name(s) type in `@pytest.mark.parametrize`, expected `csv`
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_15771089586878863891.py` with rule codes PT006: invalid syntax. Got unexpected token ',' at byte offset 47
---
import pytest
@pytest.mark.parametrize(
    (),,
)
def test_run_with_plot(inpath, tname, outpath, outfig, datadir):
    dg, tab = dgpost.run(inpath)
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12789539/python_compressed.zip)


---

_Comment by @qarmin on 2023-10-03 07:10_


Ruff 0.0.292 (latest changes from main branch)
```
ruff  *.py --select PT014 --no-cache --fix --preview
```

file content:
```
import pytest
def test_platforms(platform):
        raise Exception("bad testing type value: {}".format(platform.platform["api"]))
@pytest.mark.parametrize('data', [from_zero_to_hero, from_zero_to_hero], ids=unique_id.id)  # get test data layer x2
def test_all_threads_are_done():
    import threading
```

error
```
/home/rafal/test/tmp_folder/F_NAME_358795462047586145.py:4:54: PT014 Duplicate of test case at index 0 in `@pytest_mark.parametrize`
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_358795462047586145.py` with rule codes PT014: invalid syntax. Got unexpected token '=' at byte offset 187
---
import pytest
def test_platforms(platform):
        raise Exception("bad testing type value: {}".format(platform.platform["api"]))
@pytest.mark.parametrize('data', [from_zero_to_hero, ids=unique_id.id)  # get test data layer x2
def test_all_threads_are_done():
    import threading
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12789543/python_compressed.zip)



---

_Comment by @qarmin on 2023-10-03 07:10_

Ruff 0.0.292 (latest changes from main branch)
```
ruff  *.py --select RUF010 --no-cache --fix --preview
```

file content:
```
def qikprop_as_a_service(filepaths: Union[str, Path, List[Union[str, Path]]],
                         ):
        raise ValueError(f"Length of output_tar_names does not equal length of globed input files:\n"
                         f"Output Files: {str(output_tar_name for output_tar_name in output_tar_names)}")
```

error
```
/home/rafal/test/tmp_folder/F_NAME_5035183614041402624.py:4:43: RUF010 Use explicit conversion flag
Found 1 error.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_5035183614041402624.py` with rule codes RUF010: invalid syntax. Got unexpected token 'for' at byte offset 266
---
def qikprop_as_a_service(filepaths: Union[str, Path, List[Union[str, Path]]],
                         ):
        raise ValueError(f"Length of output_tar_names does not equal length of globed input files:\n"
                         f"Output Files: {output_tar_name for output_tar_name in output_tar_names!s}")
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12789547/python_compressed.zip)


---

_Comment by @qarmin on 2023-10-03 07:11_

Ruff 0.0.292 (latest changes from main branch)
```
ruff  *.py --select RUF013 --no-cache --fix --preview
```

file content:
```
if TYPE_CHECKING:
    from typing_extensions import Literal

    def __init__(
        self,
        *,
        name: str,
        log: str,
        outcome: "Literal['passed', 'failed', 'skipped']" = None,
        status: "Literal['PASS', 'FAIL', 'TODO']" = None,
    ):
        self.log = log
```

error
```
/home/rafal/test/tmp_folder/F_NAME_4663957540923056968.py:9:19: RUF013 PEP 484 prohibits implicit `Optional`
/home/rafal/test/tmp_folder/F_NAME_4663957540923056968.py:10:18: RUF013 PEP 484 prohibits implicit `Optional`
Found 2 errors.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_4663957540923056968.py` with rule codes RUF013: invalid syntax. Got unexpected token 'passed' at byte offset 205
---
from typing import Optional
if TYPE_CHECKING:
    from typing_extensions import Literal

    def __init__(
        self,
        *,
        name: str,
        log: str,
        outcome: "Optional[Literal["passed", "failed", "skipped"]]" = None,
        status: "Optional[Literal["PASS", "FAIL", "TODO"]]" = None,
    ):
        self.log = log

---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12789548/python_compressed.zip)


---

_Comment by @qarmin on 2023-10-03 07:11_

Ruff 0.0.292 (latest changes from main branch)
```
ruff  *.py --select RET503,SIM108 --no-cache --fix --preview
```

file content:
```
def extract(o, index):
        return o
        if isinstance(index, int):
             index=index+1
        else:
             index = [x+1 for x in index]  
```

error
```
/home/rafal/test/tmp_folder/F_NAME_15788764829505208504.py:3:9: SIM108 Use ternary operator `index = index + 1 if isinstance(index, int) else [x + 1 for x in index]` instead of `if`-`else`-block
/home/rafal/test/tmp_folder/F_NAME_15788764829505208504.py:4:14: RET503 Missing explicit `return` at the end of function able to return non-`None` value
/home/rafal/test/tmp_folder/F_NAME_15788764829505208504.py:6:14: RET503 Missing explicit `return` at the end of function able to return non-`None` value
Found 3 errors.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_15788764829505208504.py` with rule codes RET503, SIM108: unexpected indent at byte offset 122
---
def extract(o, index):
        return o
        index = index + 1 if isinstance(index, int) else [x + 1 for x in index]  
             return None
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/12789550/python_compressed.zip)


---

_Comment by @qarmin on 2023-10-30 12:04_

(latest changes from main branch)
```
ruff  *.py --select ANN002,E274 --no-cache --fix --preview
```

file content:
```
class PIPoint(object):
	swagger_types = {
	}
	def id(self):
		return self._id
```

error
```
/home/rafal/test/tmp_folder/F_NAME_9896153931138493637.py:5:1: E274 Tab before keyword
Found 1 error.
[*] 1 fixable with the `--fix` option.

error: Fix introduced a syntax error in `/home/rafal/test/tmp_folder/F_NAME_9896153931138493637.py` with rule codes E274: unindent does not match any outer indentation level at byte offset 61
---
class PIPoint(object):
	swagger_types = {
	}
	def id(self):
 return self._id
---
```

[python_compressed.zip](https://github.com/astral-sh/ruff/files/13204887/python_compressed.zip)


---

_Referenced in [astral-sh/ruff#8402](../../astral-sh/ruff/issues/8402.md) on 2023-11-01 11:10_

---

_Comment by @qarmin on 2024-01-30 07:15_

Most of the problems that occur in the regular code have been fixed, and the rest, are usually variations of not very correct code.

So now I'll try to add to https://github.com/astral-sh/ruff/issues/8402 the errors that occur in the regular code


---

_Closed by @qarmin on 2024-01-30 07:15_

---
