---
number: 1028
title: "UP015 can't autofix if coming from pathlib.Path"
type: issue
state: closed
author: LefterisJP
labels:
  - wontfix
  - fixes
assignees: []
created_at: 2022-12-04T09:57:16Z
updated_at: 2023-01-11T04:27:51Z
url: https://github.com/astral-sh/ruff/issues/1028
synced_at: 2026-01-07T12:31:12-06:00
---

# UP015 can't autofix if coming from pathlib.Path

---

_Issue opened by @LefterisJP on 2022-12-04 09:57_

This is with `ruff==0.0.155`


Consider this test file and ruff with `UP015` activated.

```python
import json
from pathlib import Path

filepath = Path('.' / 'afile.txt')
with filepath.open(mode='r') as f:
    data = json.loads(f.read())

```

Running ruff on this outputs:

```
[2022-12-04][10:55:22][ruff::pyupgrade::plugins::redundant_open_modes][ERROR] Failed to remove parameter: Failed to locate start and end parentheses
Found 1 error(s).
test4.py:5:6: UP015 Unnecessary open mode parameters
1 potentially fixable with the --fix option.
```

---

_Renamed from "UP015 can't autofix if keyword argument exists" to "UP015 can't autofix if coming from pathlib.Path" by @LefterisJP on 2022-12-04 10:02_

---

_Label `enhancement` added by @charliermarsh on 2022-12-04 14:47_

---

_Comment by @andersk on 2022-12-07 11:01_

pyupgrade refuses to change this, since it gives false positives on things like `gzip.open` (#1026). With #1027, ruff â‰¥ 0.0.156 also refuses to change this.

---

_Label `enhancement` removed by @charliermarsh on 2022-12-31 18:16_

---

_Label `wontfix` added by @charliermarsh on 2022-12-31 18:16_

---

_Label `autofix` added by @charliermarsh on 2022-12-31 18:16_

---

_Closed by @charliermarsh on 2023-01-11 04:27_

---
