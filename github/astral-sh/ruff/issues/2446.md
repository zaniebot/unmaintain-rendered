---
number: 2446
title: "Feature request: Ignore specific rule on per file basis via in-file comment"
type: issue
state: closed
author: mmarras
labels:
  - question
assignees: []
created_at: 2023-02-01T17:08:52Z
updated_at: 2025-05-09T10:34:26Z
url: https://github.com/astral-sh/ruff/issues/2446
synced_at: 2026-01-07T12:31:12-06:00
---

# Feature request: Ignore specific rule on per file basis via in-file comment

---

_Issue opened by @mmarras on 2023-02-01 17:08_

I know we can ignore specific files per toml (`per-file-ignores`) and we can also ignore the whole file by putting `# ruff: noqa`  at the top of the file. Also I can do `--extend-ignore=<rule>`.

But how about if I want to ignore only one specifc rule in this file?

The first solution per toml file is not possible for my workflow, the last one does not help with a --pre-commit huck. Would it be possible to allow for it via the in-line comment alla `# ruff: noqa: N803`. 

Background, I am programming a physics based model and N803 is giving me hell, as we use capital variables because they do have commonly understood physical meaning (t for time and T for temperature). 

---

_Comment by @Alphasite on 2023-02-02 01:11_

I suspect `extends-per-file-ignore` would solve many of the common use cases for this as well. That is biting me a little as well for our monorepo.

---

_Comment by @charliermarsh on 2023-02-02 01:14_

You can always turn off the `N803` violation entry (`ignore = ["N803"]` in your `pyproject.toml`), but I assume you want to keep it enabled, and just disable it in select files -- is that right?

---

_Label `question` added by @charliermarsh on 2023-02-02 01:14_

---

_Comment by @mmarras on 2023-02-02 07:36_

> 

That is correct. I‘m working on a django app, which, as explained earlier, encapsulates a physics based model. So here N803 and friends should be off as upper-case conveys meaning, but in general we like the idea of keeping things lower-case in all other apps in general. 

Also for this specific project, the .toml is managed by the repo owner, many people contributing apps. And we have pre-commit hooks in place which prevent you from pushing changes to config files. Of course I could ask for a change or force-commit, I was just thinking why not make #ruff: noqa more fine-grained, would be the perfect match for my use-case. 



---

_Comment by @charliermarsh on 2023-02-03 19:48_

Flake8 intentionally doesn't support this IIUC. Clippy (Rust's linter) does support something like it although their system is very powerful and effectively allows you to turn rules on and off in any scope.

---

_Referenced in [astral-sh/ruff#2978](../../astral-sh/ruff/pulls/2978.md) on 2023-02-17 01:10_

---

_Closed by @charliermarsh on 2023-02-17 01:59_

---

_Closed by @charliermarsh on 2023-02-17 01:59_

---

_Comment by @mmarras on 2023-02-17 07:08_

Awesome! Thanks for picking this one up in no time. On Feb 17, 2023, at 02:59, Charlie Marsh ***@***.***> wrote:﻿
Closed #2446 as completed via e081455.

—Reply to this email directly, view it on GitHub, or unsubscribe.You are receiving this because you authored the thread.Message ID: ***@***.***>

---

_Comment by @yasirroni on 2023-03-07 13:02_

For those that come here but did not understand how to use that, see the docs on per-file-ignores [here](https://beta.ruff.rs/docs/settings/#per-file-ignores). An example is how FastAPI use that [here](https://github.com/tiangolo/fastapi/blob/66e03c816b8185d6ee8fc6d10fbb410bcb385105/pyproject.toml#L177-L186).

---

_Comment by @egeres on 2023-07-09 12:21_

It seems that the `# flake8: noqa` syntax disables ruff for a singular file without having to edit the `pyproject.toml`!

---

_Comment by @charliermarsh on 2023-07-09 19:36_

Yes, you can use `# ruff: noqa` or (for example) `# ruff: noqa: F401` to turn off violations all violations or a specific rule, respectively, within a given file. (`# flake8: noqa` is also supported for compatibility.)

---

_Referenced in [astral-sh/ruff-vscode#332](../../astral-sh/ruff-vscode/issues/332.md) on 2023-11-07 22:45_

---

_Referenced in [backend-developers-ltd/compute-horde-sdk#1](../../backend-developers-ltd/compute-horde-sdk/pulls/1.md) on 2025-02-06 08:40_

---

_Comment by @1vecera on 2025-05-09 09:42_

I'd still like to be able to define it on a per-file basis so that different sets of rules apply to different portions of the project. 

Use case:
- My tests have a very lax set of rules when it comes to code quality
- My pipeline code has bit more relax set of rules
- My tests have nearly no rules apply to them

Writing #noqa 100x times wastes effort and generates hard-to-maintain code. @charliermarsh - I'd be happy for your view.

---

_Comment by @MichaReiser on 2025-05-09 09:55_

@1vecera have you tried [`per-file-ignore`](https://docs.astral.sh/ruff/settings/#lint_per-file-ignores)?



---

_Comment by @daniel-vecera-nova on 2025-05-09 10:34_

Ahh, wasn't aware this existed, Thanks @MichaReiser 

For anyone stumbling here:
- use #noqa: RULESECTIONRULENUMBER to ignore inline
- Use [per-file-ignore](https://docs.astral.sh/ruff/settings/#lint_per-file-ignores) to set specific rules for a set of files!


---
