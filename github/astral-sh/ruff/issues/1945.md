---
number: 1945
title: "SIM115 should exempt `exit_stack.enter_context(open(…))`"
type: issue
state: closed
author: andersk
labels:
  - bug
assignees: []
created_at: 2023-01-18T03:02:02Z
updated_at: 2023-01-18T03:39:56Z
url: https://github.com/astral-sh/ruff/issues/1945
synced_at: 2026-01-07T12:31:12-06:00
---

# SIM115 should exempt `exit_stack.enter_context(open(…))`

---

_Issue opened by @andersk on 2023-01-18 03:02_

[`contextlib.ExitStack.enter_context`](https://docs.python.org/3/library/contextlib.html#contextlib.ExitStack.enter_context) uses the context manager, so it should not trip `SIM115 Use context handler for opening files`:

```python
with contextlib.ExitStack() as exit_stack:
    f = exit_stack.enter_context(open("filename"))
```

This is necessary when you need to conditionally open a file, or open many files in a loop.

Similarly for [`contextlib.AsyncExitStack.enter_async_context`](https://docs.python.org/3/library/contextlib.html#contextlib.AsyncExitStack.enter_async_context), although I guess that’s not used for `open()` specifically.

---

_Assigned to @charliermarsh by @charliermarsh on 2023-01-18 03:02_

---

_Label `bug` added by @charliermarsh on 2023-01-18 03:02_

---

_Referenced in [astral-sh/ruff#1946](../../astral-sh/ruff/pulls/1946.md) on 2023-01-18 03:38_

---

_Closed by @charliermarsh on 2023-01-18 03:39_

---

_Referenced in [astral-sh/ruff#14110](../../astral-sh/ruff/issues/14110.md) on 2024-11-05 15:32_

---

_Referenced in [astral-sh/ruff#16438](../../astral-sh/ruff/issues/16438.md) on 2025-02-28 11:31_

---
