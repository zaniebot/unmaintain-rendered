---
number: 15202
title: Regression of false positive with e251 and type statement type variable defaults
type: issue
state: closed
author: mikeshardmind
labels:
  - bug
  - help wanted
  - python313
assignees: []
created_at: 2024-12-30T15:17:27Z
updated_at: 2025-01-01T17:00:33Z
url: https://github.com/astral-sh/ruff/issues/15202
synced_at: 2026-01-07T12:31:13-06:00
---

# Regression of false positive with e251 and type statement type variable defaults

---

_Issue opened by @mikeshardmind on 2024-12-30 15:17_

ruff version 0.8.4
python version 3.13

prior issue: https://github.com/astral-sh/ruff/issues/13699 prior PR: https://github.com/astral-sh/ruff/pull/13704

```
src\salamander\_type_stuff.py:37:20: E251 [*] Unexpected spaces around keyword / parameter equals
   |
37 | type Coro[T: object = Any] = Coroutine[None, None, T]
   |                    ^ E251
   |
   = help: Remove whitespace

src\salamander\_type_stuff.py:37:22: E251 [*] Unexpected spaces around keyword / parameter equals
   |
37 | type Coro[T: object = Any] = Coroutine[None, None, T]
   |                      ^ E251
   |
   = help: Remove whitespace
```

These are false positives.

Applying the fix leads to (correctly) identifying:

```
src\salamander\_type_stuff.py:37:20: E225 [*] Missing whitespace around operator
   |
37 | type Coro[T: object=Any] = Coroutine[None, None, T]
   |                    ^ E225
   |
   = help: Add missing whitespace
```

config is [here](https://raw.githubusercontent.com/mikeshardmind/salamander-reloaded/refs/heads/main/pyproject.toml) if useful


---

_Label `bug` added by @dhruvmanila on 2024-12-30 16:12_

---

_Label `python313` added by @dhruvmanila on 2024-12-30 16:12_

---

_Label `python313` removed by @MichaReiser on 2024-12-30 16:13_

---

_Label `help wanted` added by @MichaReiser on 2024-12-30 16:13_

---

_Label `python313` added by @AlexWaygood on 2024-12-30 18:22_

---

_Comment by @InSyncWithFoo on 2024-12-31 21:08_

I think the [`E225`](https://docs.astral.sh/ruff/rules/missing-whitespace-around-operator/) error is also a false positive. The equal sign in this case is not an operator, same as the one for value parameter defaults ([playground](https://play.ruff.rs/44a10da7-129c-4739-9d9e-81f7d4385e14)):

```python
def _[T: int=bool](): ...
#           ^ E252 (correct), E225 (incorrect)
def _(t: int=True): ...
#           ^ E252 (correct)
```

---

_Comment by @Garrett-R on 2025-01-01 03:40_

Here's a minimal working example of the original bug: [playground](https://play.ruff.rs/0b484664-582a-411b-a9fe-db8457d601ea).

I'll try to submit a PR for this one.

---

_Referenced in [astral-sh/ruff#15214](../../astral-sh/ruff/pulls/15214.md) on 2025-01-01 08:19_

---

_Comment by @InSyncWithFoo on 2025-01-01 08:21_

@Garrett-R I was already working on a fix, and I just submitted it since I didn't know you was working on one too (I read your comment via the mails, and GitHub doesn't notify users about edits...). I'm sorry; hope you don't mind.

---

_Closed by @MichaReiser on 2025-01-01 10:28_

---

_Comment by @Garrett-R on 2025-01-01 17:00_

No prob!  Actually hadn't started, still getting acquainted with Rust / Ruff and getting IDE nicely set up.  ðŸ˜Ž 

---
