---
number: 769
title: N805 classmethod-decorators x Pydantic
type: issue
state: closed
author: g-as
labels:
  - bug
assignees: []
created_at: 2022-11-16T15:52:30Z
updated_at: 2022-11-16T19:15:04Z
url: https://github.com/astral-sh/ruff/issues/769
synced_at: 2026-01-07T12:31:12-06:00
---

# N805 classmethod-decorators x Pydantic

---

_Issue opened by @g-as on 2022-11-16 15:52_

Hi,

I have some **pydantic**'s models lying around with some validation like so:
```python
import pydantic


class MyModel(pydantic.BaseModel):

    my_field: str

    @pydantic.validator("my_field")
    def _lower(cls, my_field: str) -> str:
        ...
```

**pep8-naming** doesn't trigger with:
```
classmethod-decorators =
    classmethod
    validator
```
but **ruff** does.

The trick is `validator` is not a decorator but a function that returns a classmethod.

I also checked that, as expected, 
```python
from pydantic import validator


class MyModel(pydantic.BaseModel):

    my_field: str

    @validator
    def _lower(cls, my_field: str) -> str:
        ...
```
doesn't raise any **N805** error (even though it's not functional).

Other "issue", I could not get it to work when keeping the pydantic namespace:
```python
import pydantic


class MyModel(pydantic.BaseModel):

    my_field: str

    @pydantic.validator
    def _lower(cls, my_field: str) -> str:
        ...
```
even with
```toml
[tool.ruff.pep8-naming]
classmethod-decorators = [
    "classmethod",
    "validator",
    "pydantic.validator",
]
```

Is parity with pep8-naming on this attainable/desirable?

---

_Comment by @charliermarsh on 2022-11-16 15:55_

Yeah that should work! Will take a look (but possibly tomorrow).

---

_Label `bug` added by @charliermarsh on 2022-11-16 15:55_

---

_Comment by @g-as on 2022-11-16 15:58_

Man, you're on a mission.

Keep up the good work!

---

_Assigned to @charliermarsh by @charliermarsh on 2022-11-16 17:01_

---

_Comment by @charliermarsh on 2022-11-16 17:04_

Thank you :)

---

_Comment by @charliermarsh on 2022-11-16 17:05_

Ok yeah the logic here just wasn't general enough! Will fix.

---

_Referenced in [astral-sh/ruff#772](../../astral-sh/ruff/pulls/772.md) on 2022-11-16 17:23_

---

_Closed by @charliermarsh on 2022-11-16 17:24_

---

_Comment by @charliermarsh on 2022-11-16 17:25_

Fixed and added that `pydantic` use-case as a dedicated test case. Will go out in the next release!

---

_Comment by @charliermarsh on 2022-11-16 17:25_

Building now: https://github.com/charliermarsh/ruff/releases/tag/v0.0.124

---

_Comment by @g-as on 2022-11-16 19:15_

cheers!

---

_Referenced in [astral-sh/ruff#2151](../../astral-sh/ruff/issues/2151.md) on 2023-01-25 09:20_

---
