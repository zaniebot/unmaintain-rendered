---
number: 150
title: "F821: Support annotations with yet-to-exist names with `from __future__ import annotations`"
type: issue
state: closed
author: Jackenmen
labels: []
assignees: []
created_at: 2022-09-11T03:24:42Z
updated_at: 2022-09-14T22:22:20Z
url: https://github.com/astral-sh/ruff/issues/150
synced_at: 2026-01-07T12:31:12-06:00
---

# F821: Support annotations with yet-to-exist names with `from __future__ import annotations`

---

_Issue opened by @Jackenmen on 2022-09-11 03:24_

Example code:
```py
from __future__ import annotations


class X:
    @classmethod
    def factory(cls) -> X:
        return cls()
```

Output:
```
❯ ruff repro.py
repro.py:6:25: F821 Undefined name `X`

Found 1 error(s).
```

Note that this should only be considered valid when the `annotations` future import is present.

---

_Renamed from "F821: Support referencing yet-to-exist variables with `from __future__ import annotations`" to "F821: Support referencing yet-to-exist names with `from __future__ import annotations`" by @Jackenmen on 2022-09-11 03:24_

---

_Renamed from "F821: Support referencing yet-to-exist names with `from __future__ import annotations`" to "F821: Support annotations with yet-to-exist names with `from __future__ import annotations`" by @Jackenmen on 2022-09-11 03:28_

---

_Comment by @Jackenmen on 2022-09-11 03:29_

Note that this applies to any annotations, not just return values, e.g:
```py
from __future__ import annotations


ROOT: Node | None = None


class Node:
    parent: Node
```
```
❯ ruff repro.py
repro.py:4:7: F821 Undefined name `Node`
repro.py:8:13: F821 Undefined name `Node`

Found 2 error(s).
```

---

_Label `enhancement` added by @charliermarsh on 2022-09-11 13:49_

---

_Referenced in [astral-sh/ruff#161](../../astral-sh/ruff/issues/161.md) on 2022-09-12 02:56_

---

_Assigned to @charliermarsh by @charliermarsh on 2022-09-14 21:35_

---

_Referenced in [astral-sh/ruff#189](../../astral-sh/ruff/pulls/189.md) on 2022-09-14 22:09_

---

_Closed by @charliermarsh on 2022-09-14 22:22_

---
