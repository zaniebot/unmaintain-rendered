---
number: 18654
title: "unwanted ARG001 for @singledispatch"
type: issue
state: open
author: belm0
labels:
  - bug
  - needs-design
assignees: []
created_at: 2025-06-12T21:55:16Z
updated_at: 2025-10-27T02:04:49Z
url: https://github.com/astral-sh/ruff/issues/18654
synced_at: 2026-01-07T12:31:13-06:00
---

# unwanted ARG001 for @singledispatch

---

_Issue opened by @belm0 on 2025-06-12 21:55_

### Summary

When using `@singledispatch`, the base function args are often unused, which triggers `ARG001 Unused function argument`.

While technically the args are unused, it's important to have the real arg names for readability, especially since popular tooling (e.g. vscode/pylance) will only follow single-dispatch calls to the base function.

When combined with something like Black formatting, which might force one arg per line, we're having to write an explicit `# noqa: ARG001` per arg as a workaround.

### Version

ruff 0.7.0

---

_Comment by @ntBre on 2025-06-12 22:27_

Related: https://github.com/astral-sh/ruff/issues/17372

It's a different decorator, but if there are enough cases like this it could potentially justify one of the config options @MichaReiser mentioned [here](https://github.com/astral-sh/ruff/issues/17372#issuecomment-2820790538).

---

_Label `bug` added by @ntBre on 2025-06-12 22:30_

---

_Label `needs-design` added by @ntBre on 2025-06-12 22:30_

---

_Comment by @belm0 on 2025-06-13 02:27_

`unused-function-argument` intends to catch some code problems such as 1) defined an arg but forgot to use it, 2) have an existing arg that is no longer needed.   But there are language constructs where the heuristic doesn't fit, such as abstract base classes, method overrides, and single dispatch.  In these cases there is a strict set of args defined by an API, and it's much less likely that an unused arg is a mistake or indicating that the arg should be removed.   Workarounds like underbar prefix are not satisfying because, for example, we want someone reading a method override to know the _actual_ arg names of the API.  Similarly for implementations registered for singledispatch, we're finding it normal that args go unused, and an annoyance to mark them with `noqa` or mangle the name with a prefix.  Unless the decorator exclusion would apply transitively to registered functions, it doesn't seem to satisfy the issue.

At least on my project, there isn't consensus on the value of enabling `unused-function-argument`.  The heuristic is too rough and forces a choice between a _potential_ to catch bugs or refactor opportunities and a very tangible impact on readability.

---

_Comment by @MichaReiser on 2025-06-13 06:54_

Could you share an example? That would make it easier for me to understand the issue.

---

_Comment by @nathanjmcdougall on 2025-10-27 02:03_

Here's an example:

```Python

@singledispatch
def _extract_step_from_item(
    item: StepItem | StageItem,
    step_name: str,
    items: list[StepItem | StageItem],
    idx: int,
) -> Step | None:
    raise NotImplementedError

@_extract_step_from_item.register
def _(
    item: StepItem,
    step_name: str,
    items: list[StepItem | StageItem],
    idx: int,
) -> Step | None:
    if get_step(item.step) == step_name:
        # Remove this item from the list
        items.pop(idx)
        return item.step
    return None

@_extract_step_from_item.register
def _(
    item: StageItem,  # noqa: ARG001
    step_name: str,  # noqa: ARG001
    items: list[StepItem | StageItem],  # noqa: ARG001
    idx: int,  # noqa: ARG001
) -> Step | None:
    return None
```

Here's the context:
https://github.com/usethis-python/usethis-python/blob/228fd3dd20dd830b7ef1a35c9fb8088df41aeef5/src/usethis/_integrations/ci/bitbucket/pipeweld.py#L201-L273

---
