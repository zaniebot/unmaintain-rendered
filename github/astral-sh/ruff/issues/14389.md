---
number: 14389
title: "[Infinite loop] ICN001 conflicts with I002 and F401 if an unused unconventionally aliased import is required"
type: issue
state: closed
author: dscorbett
labels:
  - bug
  - configuration
assignees: []
created_at: 2024-11-16T21:25:16Z
updated_at: 2025-01-16T16:07:27Z
url: https://github.com/astral-sh/ruff/issues/14389
synced_at: 2026-01-07T12:31:13-06:00
---

# [Infinite loop] ICN001 conflicts with I002 and F401 if an unused unconventionally aliased import is required

---

_Issue opened by @dscorbett on 2024-11-16 21:25_

[`unconventional-import-alias` (ICN001)](https://docs.astral.sh/ruff/rules/unconventional-import-alias/) conflicts with [`missing-required-import` (I002)](https://docs.astral.sh/ruff/rules/missing-required-import/) in Ruff 0.7.4 when [`unused-import` (F401)](https://docs.astral.sh/ruff/rules/unused-import/) is also enabled, if an import is required without a conventional alias but is unused. ICN001â€™s fix should be skipped for required imports, even if the required imports lack conventional aliases. It would still be helpful for ICN001 to report a violation without a fix.

```console
$ echo 1 | ruff check --isolated --select I002,ICN001,F401 --config 'lint.isort.required-imports = ["import pandas"]' - --unsafe-fixes --fix

error: Failed to converge after 100 iterations.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BInfinite%20loop%5D

...quoting the contents of `-`, the rule codes ICN001, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

import pandas
1
-:1:8: ICN001 `pandas` should be imported as `pd`
  |
1 | import pandas
  |        ^^^^^^ ICN001
2 | 1
  |
  = help: Alias `pandas` to `pd`

Found 101 errors (100 fixed, 1 remaining).
[*] 1 fixable with the --fix option.
```

In that example, I002 inserts `import pandas`, ICN001 changes it to `import pandas as pd`, I002 inserts `import pandas` again, F401 removes the unused `import pandas as pd`, and then back to ICN001 and so on.

---

_Label `bug` added by @AlexWaygood on 2024-11-16 22:41_

---

_Comment by @dylwil3 on 2024-11-17 02:38_

I'm wondering if, unlike the previous infinite-loop fix, this should be fixed by giving an error directly on the user's configuration? Especially in the case where the user has entered in both the required import and the required alias.

---

_Comment by @AlexWaygood on 2024-11-17 17:35_

> I'm wondering if, unlike the previous infinite-loop fix, this should be fixed by giving an error directly on the user's configuration? Especially in the case where the user has entered in both the required import and the required alias.

Yes, that makes sense to me! These two configuration options just flatly contradict each other in this case, I think.

---

_Label `configuration` added by @AlexWaygood on 2024-11-21 17:24_

---

_Assigned to @AlexWaygood by @AlexWaygood on 2025-01-10 13:44_

---

_Assigned to @ntBre by @ntBre on 2025-01-14 20:32_

---

_Referenced in [astral-sh/ruff#15480](../../astral-sh/ruff/pulls/15480.md) on 2025-01-14 20:54_

---

_Closed by @ntBre on 2025-01-16 15:45_

---

_Closed by @ntBre on 2025-01-16 15:45_

---

_Unassigned @AlexWaygood by @AlexWaygood on 2025-01-16 16:07_

---

_Referenced in [astral-sh/ruff#18729](../../astral-sh/ruff/issues/18729.md) on 2025-06-17 17:48_

---
