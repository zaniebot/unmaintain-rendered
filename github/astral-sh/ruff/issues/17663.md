---
number: 17663
title: Per-file customisation of builtins
type: issue
state: open
author: jakeanq
labels:
  - configuration
  - wish
assignees: []
created_at: 2025-04-28T02:13:59Z
updated_at: 2025-04-28T06:33:54Z
url: https://github.com/astral-sh/ruff/issues/17663
synced_at: 2026-01-07T12:31:13-06:00
---

# Per-file customisation of builtins

---

_Issue opened by @jakeanq on 2025-04-28 02:13_

### Summary

It would be useful to be able to customise the `builtins` setting on a per-file basis.

We have a specific file that's loaded in a different context to the other Python code in the same project, and as a part of that load process several additional builtins are defined.

Currently the only options that I'm aware of to fix the issue would be:
 * Disable the `F821` rule with a per-file ignore.  This means we lose the ability to catch any other things that might be undefined in the file.
 * Add the extra builtins to the global list, which is not ideal as the list of added builtins includes some commonly-used names like `env`.

While it's not necessary for my use-case, I could also see it being useful to have per-file customisation of some other config options such as `line-length` and the options in the various `lint.*` sections.

---

_Comment by @Daverball on 2025-04-28 06:27_

You could also move the module into a package with a single `__init__.py` and put a `ruff.toml` in that folder that extends your base config with your desired `builtins` section. See [Config File Discovery](https://docs.astral.sh/ruff/configuration/#config-file-discovery) in the docs.

---

_Comment by @jakeanq on 2025-04-28 06:31_

Unfortunately in this case I'm restricted by where the file can live (it has to be in the root of the repository).  For now I'm going to go with a per-file ignore of the rule.

Thanks for the suggestion though, much appreciated ðŸ™‚ 

---

_Label `configuration` added by @MichaReiser on 2025-04-28 06:32_

---

_Label `wish` added by @MichaReiser on 2025-04-28 06:32_

---

_Comment by @MichaReiser on 2025-04-28 06:33_

That makes sense. I think we have to wait with adding such a configuration option until we have a more general approach for *per-file* options than adding *per-file-** settings for each of them. We plan on trying a new approach with our new type checker red-knot and might decide to port it to Ruff if it proves to work well.

---
