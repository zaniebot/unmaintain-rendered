---
number: 8228
title: Invalid autofix for RSE102
type: issue
state: closed
author: Geo5
labels:
  - bug
assignees: []
created_at: 2023-10-25T21:12:23Z
updated_at: 2023-10-26T15:33:56Z
url: https://github.com/astral-sh/ruff/issues/8228
synced_at: 2026-01-07T12:31:12-06:00
---

# Invalid autofix for RSE102

---

_Issue opened by @Geo5 on 2023-10-25 21:12_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->
In the following simple example `test_ruff.py`:
```python
from typing import NoReturn


class SomeObject:
    def get_error(self) -> ValueError:
        return ValueError("some error")


def testfun() -> NoReturn:
    obj = SomeObject()

    raise obj.get_error()


testfun()
```
When run:
```sh
$ python test_ruff.py 
Traceback (most recent call last):
  File ..., line 15, in <module>
    testfun()
  File ..., line 12, in testfun
    raise obj.get_error()
ValueError: some error
```
ruff reports the error [RSE102](https://docs.astral.sh/ruff/rules/unnecessary-paren-on-raise-exception/) and suggests fixing it, producing:
```diff
$ ruff check --isolated --select RSE102 --fix --diff test_ruff.py
--- test_ruff.py
+++ test_ruff.py
@@ -9,7 +9,7 @@
 def testfun() -> NoReturn:
     obj = SomeObject()
 
-    raise obj.get_error()
+    raise obj.get_error
 
 
 testfun()

Would fix 1 error.
```
Which changes the behaviour when run from the original code:
```sh
$ python test_ruff.py 
Traceback (most recent call last):
  File ..., line 15, in <module>
    testfun()
  File ..., line 12, in testfun
    raise obj.get_error
TypeError: exceptions must derive from BaseException
```

---

_Comment by @charliermarsh on 2023-10-25 21:55_

Ahh yeah, I believe this is similar to https://github.com/astral-sh/ruff/issues/5416 -- we just can't detect this reliably in all cases.

---

_Comment by @charliermarsh on 2023-10-25 21:56_

We should mark this as an unsafe edit, so that users have to opt in to apply it.

---

_Assigned to @charliermarsh by @charliermarsh on 2023-10-25 21:56_

---

_Label `bug` added by @charliermarsh on 2023-10-25 21:56_

---

_Referenced in [astral-sh/ruff#8231](../../astral-sh/ruff/pulls/8231.md) on 2023-10-25 22:04_

---

_Comment by @Geo5 on 2023-10-25 22:23_

> Ahh yeah, I believe this is similar to #5416 -- we just can't detect this reliably in all cases.

I agree.
For some reason i must have misused the Github search, so i did not find this issue before - sorry!


---

_Comment by @charliermarsh on 2023-10-25 23:16_

No worries! Thanks for reporting, since we did have at least one change to make here.

---

_Closed by @charliermarsh on 2023-10-26 15:33_

---
