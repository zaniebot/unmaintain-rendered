---
number: 15324
title: PT006 issue not raised when keyword arguments are used instead of positional arguments.
type: issue
state: closed
author: caarmen
labels:
  - rule
  - preview
assignees: []
created_at: 2025-01-07T18:20:13Z
updated_at: 2025-01-08T08:41:31Z
url: https://github.com/astral-sh/ruff/issues/15324
synced_at: 2026-01-07T12:31:13-06:00
---

# PT006 issue not raised when keyword arguments are used instead of positional arguments.

---

_Issue opened by @caarmen on 2025-01-07 18:20_

# Summary
For pytest checks:

When `argnames` and `argvalues` are passed as keyword arguments to `pytest.mark.parametrize`, ruff doesn't raise `PT006` where it would otherwise (for passing a list instead of a single value).

# Details

Steps to reproduce the issue:

* Create a test file`test_something.py`, containing two test functions.
  Note that the test functions only expect a single parametrized argument.
  
  In both cases, the `parametrize()` decorator is called with a list for `argnames` and a list of list for `argvalues`. The difference is that the first one uses positional arguments, and the second one uses keyword arguments.
    ```python
    import pytest
     
     
    @pytest.mark.parametrize(
        ["contact_type"],
        [["email"], ["phone"]],
    )   
    def test_function_issue_caught_PT006(contact_type: str):...
     
    @pytest.mark.parametrize(
        argnames=["contact_type"],
        argvalues=[["email"], ["phone"]],
    )   
    def test_function_issue_uncaught_PT006(contact_type: str):...
    ``` 
* Run ruff explicitly looking for the `PT006` issue:
    ```bash
    $ ruff check test_something.py  --select PT006
    ```
* Expected behavior (I think, you'll confirm ðŸ˜… ):
  - Ruff raises an issue `PT006` with the same message for both test functions: "_Use a string for the first argument_".
* Actual behavior: 
  - Ruff raises an issue only for the first test function (the one with positional arguments):
    ```bash
    $ ruff check test_something.py  --select PT006
    test_something.py:5:5: PT006 [*] Wrong type passed to first argument of `pytest.mark.parametrize`; expected `str`
      | 
    4 | @pytest.mark.parametrize(
    5 |     ["contact_type"],
      |     ^^^^^^^^^^^^^^^^ PT006
    6 |     [["email"], ["phone"]],
    7 | )
      | 
      = help: Use a string for the first argument
    ```



---

_Renamed from "PT006 doesn't raise issues when keyword arguments are used." to "PT006 issue not raised when keyword arguments are used instead of positional arguments." by @caarmen on 2025-01-07 18:23_

---

_Comment by @InSyncWithFoo on 2025-01-07 19:24_

Currently keyword arguments are only detected in preview mode:

(from [`flake8_pytest_style/rules/parametrize.rs`](https://github.com/astral-sh/ruff/blob/a876090715/crates/ruff_linter/src/rules/flake8_pytest_style/rules/parametrize.rs#L881-L890))

```rs
let names = if checker.settings.preview.is_enabled() {
    call.arguments.find_argument_value("argnames", 0)
} else {
    call.arguments.find_positional(0)
};
let values = if checker.settings.preview.is_enabled() {
    call.arguments.find_argument_value("argvalues", 1)
} else {
    call.arguments.find_positional(1)
};
```

These were added in #14699. The corresponding issue #11243 doesn't have any relevant information, so the reason was probably backward compatibility.

Perhaps it's safe to remove these preview checks; I think this is by no mean a breaking change, even when `PT006` is stable.

---

_Referenced in [astral-sh/ruff#15327](../../astral-sh/ruff/pulls/15327.md) on 2025-01-07 19:39_

---

_Label `rule` added by @dhruvmanila on 2025-01-08 05:19_

---

_Label `preview` added by @dhruvmanila on 2025-01-08 05:19_

---

_Closed by @MichaReiser on 2025-01-08 08:41_

---
