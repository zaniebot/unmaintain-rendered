---
number: 18820
title: "Use `typings/__builtins__.pyi` stub files for builtins"
type: issue
state: closed
author: Julian-J-S
labels:
  - question
  - type-inference
assignees: []
created_at: 2025-06-20T09:57:49Z
updated_at: 2025-07-24T12:00:43Z
url: https://github.com/astral-sh/ruff/issues/18820
synced_at: 2026-01-07T12:31:13-06:00
---

# Use `typings/__builtins__.pyi` stub files for builtins

---

_Issue opened by @Julian-J-S on 2025-06-20 09:57_

### Summary

I would love it, if ruff could get builtins automatically from `typings.__builtins__.pyi` stub files (configurable).

Some big frameworks/platforms have globally available variables defined and injected in user code.
A big example is Databricks where the major pyspark variables and functions are injected in the notebooks.

Using the vscode Databricks extension you can automatically create sub files looking roughly like for following:
```python
# typings.__builtins__.pyi
from databricks.sdk.runtime import *
from pyspark.sql.session import SparkSession
from pyspark.sql.functions import udf as U
from pyspark.sql.context import SQLContext

udf = U
spark: SparkSession
sc = spark.sparkContext
sqlContext: SQLContext
sql = sqlContext.sql
table = sqlContext.table
getArgument = dbutils.widgets.getArgument

def displayHTML(html): ...
def display(input=None, *args, **kwargs): ...
```

## Easy Example

```python
# typings/__builtins__.pyi
my_int = 10
my_float = 1.1
my_str: str
```

```python
# main.py
double_int = my_int * 2
double_float = my_float * 2.0
cap = my_str.capitalize()
```

Pylance automatically understands this and everything works.
I know I can add it to the config:

```toml
[tool.ruff]
builtins = ["my_int"]
```

However, I would prefer not having multiple "sources of truth" for my builtins.

<img width="426" alt="Image" src="https://github.com/user-attachments/assets/16cf998d-2673-4509-be1c-f86950912bf5" />

---

_Comment by @MichaReiser on 2025-06-20 10:04_

This is something we can support in our upcoming type checker ty but is a bit beyond Ruff's capabilities because it requires multifile analysis and understanding stub files isn't trivial. 

But I understand that maintaining those definitions twice is frustrating.

---

_Label `question` added by @MichaReiser on 2025-06-20 10:04_

---

_Label `type-inference` added by @MichaReiser on 2025-06-20 10:04_

---

_Comment by @MichaReiser on 2025-07-24 12:00_

I'll close this because there's nothing immediate that we can do about this and I want to keep the issue tracker actionable. 

---

_Closed by @MichaReiser on 2025-07-24 12:00_

---
