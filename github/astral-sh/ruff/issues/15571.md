---
number: 15571
title: Ruff is not fixing F401
type: issue
state: closed
author: s0undt3ch
labels:
  - question
  - fixes
assignees: []
created_at: 2025-01-18T15:49:48Z
updated_at: 2025-01-19T09:23:07Z
url: https://github.com/astral-sh/ruff/issues/15571
synced_at: 2026-01-07T12:31:13-06:00
---

# Ruff is not fixing F401

---

_Issue opened by @s0undt3ch on 2025-01-18 15:49_

I remember that ruff used to fix `F401`, however, it's not in the latest version:

```
ruff -v check --fix --target-version py311 --select F401 web/pw/aws/__init__.py
[2025-01-18][15:45:53][ruff::resolve][DEBUG] Using configuration file (via parent) at: ~/projects/my-project/.ruff.toml
[2025-01-18][15:45:53][ruff::commands::check][DEBUG] Identified files to lint in: 1.916916ms
[2025-01-18][15:45:53][ruff::diagnostics][DEBUG] Checking: ~/projects/my-project/web/pw/aws/__init__.py
[2025-01-18][15:45:53][ruff_linter::rules::isort::categorize][DEBUG] Categorized 'typing.Set' as Known(StandardLibrary) (KnownStandardLibrary)
[2025-01-18][15:45:53][ruff::commands::check][DEBUG] Checked 1 files in: 374.625µs
web/pw/aws/__init__.py:8:35: F401 `typing.Set` imported but unused
  |
6 | from datetime import datetime, timedelta
7 | from io import BytesIO, StringIO
8 | from typing import TYPE_CHECKING, Set
  |                                   ^^^ F401
9 | from collections.abc import Iterable
  |
  = help: Remove unused import: `typing.Set`

Found 1 error.
```

Even if I pass `--unsafe-fixes`, it still does not fix it.

```
ruff --version
ruff 0.9.2
```

---

_Label `fixes` added by @dylwil3 on 2025-01-18 16:02_

---

_Comment by @dylwil3 on 2025-01-18 16:07_

Could you try once more with `--preview` enabled and let me know what happens? This rule treats `__init__.py` files a little differently. See [the documentation for the rule](https://docs.astral.sh/ruff/rules/unused-import/#fix-safety).

---

_Label `question` added by @dylwil3 on 2025-01-18 16:07_

---

_Comment by @s0undt3ch on 2025-01-19 09:23_

```
ruff -v check --fix --target-version py311 --select F401 web/pw/aws/__init__.py --preview
[2025-01-19][09:20:13][ruff::resolve][DEBUG] Using configuration file (via parent) at: ~/projects/my-project/.ruff.toml
[2025-01-19][09:20:13][ruff::commands::check][DEBUG] Identified files to lint in: 6.537958ms
[2025-01-19][09:20:13][ruff::diagnostics][DEBUG] Checking: ~/projects/my-project/web/pw/aws/__init__.py
[2025-01-19][09:20:13][ruff_linter::rules::isort::categorize][DEBUG] Categorized 'typing.Set' as Known(StandardLibrary) (KnownStandardLibrary)
[2025-01-19][09:20:13][ruff::commands::check][DEBUG] Checked 1 files in: 2.462209ms

Fixed 1 error:
- web/pw/aws/__init__.py:
    1 × F401 (unused-import)

Found 1 error (1 fixed, 0 remaining).
```

`--preview` did address the problem. Thank You!

---

_Closed by @s0undt3ch on 2025-01-19 09:23_

---
