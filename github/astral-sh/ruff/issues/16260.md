---
number: 16260
title: "Add  rule to enforce `reason` and `raises` parameters in pytest.mark.xfail"
type: issue
state: open
author: kosdmit
labels:
  - rule
assignees: []
created_at: 2025-02-19T16:57:12Z
updated_at: 2025-02-19T18:21:06Z
url: https://github.com/astral-sh/ruff/issues/16260
synced_at: 2026-01-07T12:31:13-06:00
---

# Add  rule to enforce `reason` and `raises` parameters in pytest.mark.xfail

---

_Issue opened by @kosdmit on 2025-02-19 16:57_

The `pytest.mark.xfail` marker is used to mark tests as temporarily failing. It has  `reason` and `raises` optional parameters, which can be used to provide more context for the failure.

 If we don't specify `reason` and  `raise` arguments, we get:
- Lack of clarity: It becomes unclear why a test is marked as xfail (similar to empty TODO).
- Silent regressions: Missing raises allows the test to xfail for any exception, potentially masking unintended errors.

Proposed solution: check if `reason` and `raises` arguments are not `None`.

Examples

Violation:
```python
@pytest.mark.xfail()  # Missing both arguments
def test_flaky_feature():
    ...
```

Correct Usage:
```python
@pytest.mark.xfail(
    reason="APIv2 spec not finalized",  # Required
    raises=AssertionError  # Required
)
def test_api_v2():
    ...
```

---

_Renamed from "Add  rule to enforce reason and raises in pytest.mark.xfail" to "Add  rule to enforce `reason` and `raises` parameters in pytest.mark.xfail" by @kosdmit on 2025-02-19 17:28_

---

_Label `rule` added by @dylwil3 on 2025-02-19 18:21_

---
