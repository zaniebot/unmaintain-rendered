---
number: 21098
title: FURB142 fix should parenthesize generator expressions
type: issue
state: open
author: dscorbett
labels:
  - bug
  - fixes
assignees: []
created_at: 2025-10-27T14:59:31Z
updated_at: 2025-10-27T21:07:11Z
url: https://github.com/astral-sh/ruff/issues/21098
synced_at: 2026-01-07T12:31:13-06:00
---

# FURB142 fix should parenthesize generator expressions

---

_Issue opened by @dscorbett on 2025-10-27 14:59_

### Summary

The fix for [`for-loop-set-mutations` (FURB142)](https://docs.astral.sh/ruff/rules/for-loop-set-mutations/) should parenthesize unparenthesized generator expressions to avoid changing the programâ€™s behavior. [Example](https://play.ruff.rs/b619adff-1744-42bc-a4d3-1cc9bef1032e):
```console
$ cat >furb142.py <<'# EOF'
s = set()
for x in ("abc", "def"):
    s.add(c for c in x)
# EOF

$ python furb142.py; echo $?
0

$ ruff check --isolated furb142.py --select FURB142 --preview --fix
Found 1 error (1 fixed, 0 remaining).

$ python furb142.py 2>&1 | tail -n 3
    s.update(c for c in x for x in ("abc", "def"))
                        ^
NameError: name 'x' is not defined
```

### Version

ruff 0.14.2 (83a3bc4ee 2025-10-23)

---

_Label `bug` added by @ntBre on 2025-10-27 16:03_

---

_Label `fixes` added by @ntBre on 2025-10-27 16:03_

---

_Comment by @sohamukute on 2025-10-27 20:07_

I'm going to fix #21098. The fix involves modifying the Edit::range_replacement in refurb.rs to wrap the generator expression in parentheses, and I'll add a regression test.



---

_Assigned to @sohamukute by @ntBre on 2025-10-27 21:07_

---

_Referenced in [astral-sh/ruff#21191](../../astral-sh/ruff/pulls/21191.md) on 2025-11-01 20:12_

---
