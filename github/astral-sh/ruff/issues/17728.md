---
number: 17728
title: ASYNC115 False Positive
type: issue
state: closed
author: rmorshea-atom-computing
labels:
  - needs-info
assignees: []
created_at: 2025-04-30T03:58:42Z
updated_at: 2025-05-01T21:37:10Z
url: https://github.com/astral-sh/ruff/issues/17728
synced_at: 2026-01-07T12:31:13-06:00
---

# ASYNC115 False Positive

---

_Issue opened by @rmorshea-atom-computing on 2025-04-30 03:58_

### Summary

The [ASYNC115](https://docs.astral.sh/ruff/rules/async-zero-sleep/#async-zero-sleep-async115) rule states that it checks for usages of `trio.sleep(0)` or `anyio.sleep(0)` and replaces them with `trio.lowlevel.checkpoint()`.

This produces false positives in the case where you are using `anyio` with the `asyncio` backend.

I use `anyio` because it adheres to the rules of structured concurrency while remaining compatible with whatever async backend my users choose.

### Version

0.8.6

---

_Comment by @MichaReiser on 2025-04-30 06:36_

Could you share a code example? I'm not that familiar with async libraries and it's not clear to me what issue you're facing here.

---

_Label `needs-info` added by @MichaReiser on 2025-04-30 06:36_

---

_Comment by @rmorshea-atom-computing on 2025-05-01 17:24_

Here's the sample:

```python
import anyio

async def main():
    await anyio.sleep(0)  # error: ASYNC115
```

Ruff wants me to replace that `anyio.sleep(0)` with `trio.lowlevel.checkpoint()` but I don't have `trio` installed - `anyio` supports both `trio` and `asyncio` as a backend.

---

_Referenced in [astral-sh/ruff#17774](../../astral-sh/ruff/pulls/17774.md) on 2025-05-01 17:47_

---

_Closed by @MichaReiser on 2025-05-01 21:37_

---
