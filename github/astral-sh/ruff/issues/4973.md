---
number: 4973
title: "F632: assertion failure triggered by newline between \"is\" and \"not\""
type: issue
state: closed
author: addisoncrump
labels:
  - bug
assignees: []
created_at: 2023-06-09T00:17:33Z
updated_at: 2023-06-10T03:21:34Z
url: https://github.com/astral-sh/ruff/issues/4973
synced_at: 2026-01-07T12:31:12-06:00
---

# F632: assertion failure triggered by newline between "is" and "not"

---

_Issue opened by @addisoncrump on 2023-06-09 00:17_

In rare situations, it is possible to have an "is not" statement separated by a newline. Below is a contrived example:

```py
{2 is
not ''}
```

And a [real example of this happening](https://github.com/ministryofjustice/cla_public/blob/b3dd6019b694a8e2e254e4e1e6d94d3f9f3dab00/cla_public/libs/views.py#L51-L52) (above is a minimised reproducer of this, which was an item in my corpus).

This causes a panic:

```
$ ruff minimized-from-da9a9c1cab576dae90a1c646bef75039a4c9a80e
warning: Detected debug build without --no-cache.
warning: Linting panicked minimized-from-da9a9c1cab576dae90a1c646bef75039a4c9a80e: This indicates a bug in `ruff`. If you could open an issue at:

https://github.com/astral-sh/ruff/issues/new?title=%5BLinter%20panic%5D

with the relevant file contents, the `pyproject.toml` settings, and the following stack trace, we'd be very appreciative!

panicked at 'assertion failed: `(left == right)`
  left: `Is`,
 right: `IsNot`', crates/ruff/src/rules/pyflakes/rules/invalid_literal_comparisons.rs:107:21
```

---

_Referenced in [astral-sh/ruff#4972](../../astral-sh/ruff/issues/4972.md) on 2023-06-09 00:18_

---

_Assigned to @charliermarsh by @charliermarsh on 2023-06-09 04:44_

---

_Label `bug` added by @charliermarsh on 2023-06-09 04:44_

---

_Referenced in [astral-sh/ruff#4977](../../astral-sh/ruff/pulls/4977.md) on 2023-06-09 04:57_

---

_Closed by @charliermarsh on 2023-06-09 05:07_

---

_Comment by @addisoncrump on 2023-06-10 03:19_

Fix is incomplete for:
```py
{2 is
 not ''}
```

(Standalone newline is fine, but add a space and it panics again)

---

_Comment by @charliermarsh on 2023-06-10 03:21_

This makes sense, thx.

---

_Referenced in [astral-sh/ruff#5000](../../astral-sh/ruff/issues/5000.md) on 2023-06-10 03:30_

---
