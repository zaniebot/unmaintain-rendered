---
number: 14294
title: "Imports split using a backlash are reverted by `ruff format`"
type: issue
state: closed
author: PatrickJordanNutanix
labels: []
assignees: []
created_at: 2024-11-12T10:27:58Z
updated_at: 2024-11-18T02:06:49Z
url: https://github.com/astral-sh/ruff/issues/14294
synced_at: 2026-01-07T12:31:13-06:00
---

# Imports split using a backlash are reverted by `ruff format`

---

_Issue opened by @PatrickJordanNutanix on 2024-11-12 10:27_

We have an import statement that exceeds our line length limit of 79 characters. The path to the class being imported fits within the line length limit but the `import` exceeds it. For example:

```python
from our_internal_sdk_package.namespace_1.overly_verbose_long_module_name import ClassName
                                                                                ^ # line length limit here
```

We unfortunately do not have the ability to shorten the path as it's from an internal SDK that is autogenerated from an OpenAPI specification and have already released it, so cannot make breaking changes without upsetting a lot of people.

Naturally, we would format this like:

```python
from our_internal_sdk_package.namespace_1.overly verbose_long_module_name \
  import ClassName
```

However, when we run the following, `ruff` isn't happy:

```
> ruff format --diff --quiet

-from our_internal_sdk_package.namespace_1.overly_verbose_long_module_name \
-  import ClassName
+from our_internal_sdk_package.namespace_1.overly_verbose_long_module_name import (
+  ClassName,
+)
```

Running the formatter causes it to reformat this import statement, then throw an `E501` linting error.

Is there a setting we need to change to have it respect the backslash splitting (without using `# fmt: off|on` or `# noqa: E501` pragma comments)?

### Supporting Information

Version:

```shell
> ruff --version                                                                        
ruff 0.6.8
```

Contents of `ruff.toml`:

```toml
indent-width = 2
line-length = 79
exclude = [{internal_packages}]

[format]
quote-style = "double"
indent-style = "space"

[lint]
select = ["I"]

[lint.isort]
known-first-party = [{internal_packages}]
```


---

_Comment by @MichaReiser on 2024-11-12 10:50_

> Is there a setting we need to change to have it respect the backslash splitting (without using # fmt: off|on or # noqa: E501 pragma comments)?

No, there's no such option. Ruff follows Black's style guide in that regard

> Backslashes and multiline strings are one of the two places in the Python grammar that break significant indentation. You never need backslashes, they are used to force the grammar to accept breaks that would otherwise be parse errors. That makes them confusing to look at and brittle to modify. This is why Black always gets rid of them.
> If you’re reaching for backslashes, that’s a clear signal that you can do better if you slightly refactor your code. I hope some of the examples above show you that there are many ways in which you can do it. ([source](https://black.readthedocs.io/en/stable/the_black_code_style/current_style.html))

I don't think there's an alternative way of writing this import without backslashes that doesn't exceed the configured line length. My personal suggestion is to disable `E501` when using a formatter because it already takes care of breaking long lines. I don't think I have any other good suggestion for this specific example and improving the formatting isn't really possible because Python disalows parenthesizing the module name

---

_Closed by @charliermarsh on 2024-11-18 02:06_

---
