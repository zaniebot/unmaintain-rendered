---
number: 890
title: F841 is triggered by unused variables in tuple unpacking from with statements
type: issue
state: closed
author: fnep
labels:
  - bug
assignees: []
created_at: 2022-11-23T08:44:51Z
updated_at: 2024-09-13T12:39:00Z
url: https://github.com/astral-sh/ruff/issues/890
synced_at: 2026-01-07T12:31:12-06:00
---

# F841 is triggered by unused variables in tuple unpacking from with statements

---

_Issue opened by @fnep on 2022-11-23 08:44_

When tuple unpacking is used within `as` of a with statement, F841 is raised for unused variables. This is fine if really all variables are unused, but if I need only one, I have not other choice then getting all. This happens only within functions.

```python3
def connect():
    return (None, None)


def test():
    with connect() as (connection, cursor):
        cursor.execute("SELECT * FROM users")

```

using ruff 0.0.135 gives me
 
```
test.py:7:24: F841 Local variable `connection` is assigned to but never used
```

In flake8, this is case works.

---

_Comment by @JonathanPlasse on 2022-11-23 11:37_

You can use an underscore to ignore unused values.

```python
def connect():
    return (None, None)


def test():
    with connect() as (_, cursor):
        cursor.execute("SELECT * FROM users")
```
Flakes should have detected it.

---

_Comment by @fnep on 2022-11-23 13:21_

As a workaround for a few places `_` would work, I'm testing a huge codebase. Thank you anyway for the idea.

Neither pyflakes nor flake8 find this an issue in my tests.

---

_Comment by @JonathanPlasse on 2022-11-23 14:36_

> Flakes should have detected it.

I meant that it might be a bug from `flake8`.

---

_Label `bug` added by @charliermarsh on 2022-11-23 14:45_

---

_Comment by @charliermarsh on 2022-11-23 14:46_

Hmm, yeah, I think we may want to allow this.

Some related stuff here: https://github.com/charliermarsh/ruff/issues/161.



---

_Assigned to @charliermarsh by @charliermarsh on 2022-11-23 16:40_

---

_Comment by @charliermarsh on 2022-11-23 16:40_

(Will be fixed today.)

---

_Referenced in [astral-sh/ruff#897](../../astral-sh/ruff/pulls/897.md) on 2022-11-24 01:14_

---

_Closed by @charliermarsh on 2022-11-24 01:28_

---

_Comment by @fnep on 2022-11-25 08:30_

Works perfect in ruff==0.0.137, thank you :)

---

_Comment by @charliermarsh on 2022-11-25 14:49_

Awesome :)

---

_Referenced in [astral-sh/ruff#11797](../../astral-sh/ruff/issues/11797.md) on 2024-06-07 15:30_

---

_Comment by @merlynmarc on 2024-09-13 12:38_

I would prefer that ruff flags the unused variable (or at least gives me the option to).  I would write the original code as the underscore version (actually as _connection).  The fact that ruff doesn't flag this is a blocker for me adopting ruff over pylint.

---
