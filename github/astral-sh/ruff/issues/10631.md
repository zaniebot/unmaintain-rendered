---
number: 10631
title: "`fmt: line-length-off` (or equivalent)"
type: issue
state: closed
author: thejcannon
labels: []
assignees: []
created_at: 2024-03-27T17:02:28Z
updated_at: 2024-04-05T06:21:49Z
url: https://github.com/astral-sh/ruff/issues/10631
synced_at: 2026-01-07T12:31:13-06:00
---

# `fmt: line-length-off` (or equivalent)

---

_Issue opened by @thejcannon on 2024-03-27 17:02_

ðŸ‘‹ Howdy folks!

(I combed through the issues and didn't find one that looked like this)

This is a feature request for a `# fmt: line-length-off` (or equivalent) pair of pragmas that just disables line-length formatting, but continues to enable other formatting.

As an example:
```python
# fmt: line-length-off
NONREAD_MODES = [
    # update text modes
    "r+", "+r", "rt+", "r+t", "+rt", "tr+", "t+r", "+tr", "w+", "+w", "wt+", "w+t",
    "+wt", "tw+", "t+w", "+tw", "a+", "+a", "at+", "a+t", "+at", "ta+", "t+a", "+ta",
    "x+", "+x", "xt+", "x+t", "+xt", "tx+", "t+x", "+tx",
    # write text modes
    "w", "wt", "tw", "a", "at", "ta", "x", "xt", "tx"
    # update binary modes
    "rb+", "r+b", "+rb", "br+", "b+r", "+br", "wb+", "w+b", "+wb", "bw+", "b+w", "+bw",
    "ab+", "a+b", "+ab", "ba+", "b+a", "+ba", "xb+", "x+b", "+xb", "bx+", "b+x", "+bx",
    # write binary modes
    "wb", "bw", "ab", "ba", "xb", "bx"
]
# fmt: line-length-on
```

I want ruff to continue to format/lint/etc... the string quotes, the general "spacing", even the trailing comma... but keep my elements as they are.

That's it. Cheers y'all!

---

_Comment by @MichaReiser on 2024-03-28 10:26_

This is an interesting idea but I don't think this can be easily implemented in the formatter, because I assume what you want is that the formatter preserves the lines as is, but otherwise formats the code. 

One challenge with this is that the formatter might decide to break a line for reasons other than the line length, e.g., because it's an array with a trailing comma. It's then impossible to preserve the lines as is. 

There's also the technical challenge that the formatting is interdependent. The statement formatting makes assumptions about how expressions get formatted to ensure the emitted source code remains syntactically correct (e.g., correctly indented).  Preserving the lines as they are means that the enclosing formatting can make fewer assumptions, e.g., it can no longer make assumptions about where comments are placed (or it makes wrong assumption and the formatter produces invalid syntax).

I think this feature request is mainly a symptom from the fact that Ruff and Black aren't good at formatting large arrays (just flattening them is a possibility but doesn't necessarily improve readability). I think we should focus our time on improving array formatting over improving suppression comment handling to fix up weaknesses in the formatter.

 

---

_Closed by @MichaReiser on 2024-03-28 10:26_

---

_Comment by @ryan-williams on 2024-04-04 18:49_

`black` supports `# fmt: off` / `# fmt: on` to ignore blocks of code ([SO](https://stackoverflow.com/questions/58584413/black-formatter-ignore-specific-multi-line-code), [docs](https://black.readthedocs.io/en/stable/usage_and_configuration/the_basics.html#ignoring-sections)).

Is there no way to disable `ruff` for specific lines or blocks of code?

(Update: I specifically want to skip sorting imports; I need some imports to be in a certain order.)

(Update^2: found [relevant `isort` configs used by `ruff`](https://docs.astral.sh/ruff/settings/#lintisort); example use: https://github.com/single-cell-data/TileDB-SOMA/pull/2381)

---

_Comment by @MichaReiser on 2024-04-05 06:21_

@ryan-williams Ruff supports `fmt: off` and `fmt: on`, see [docs](https://docs.astral.sh/ruff/formatter/#format-suppression). 

Yes, isort is not part of the formatter and uses different suppression comments but you already found the relevant documentation :)

---
