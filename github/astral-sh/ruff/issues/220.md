---
number: 220
title: F841 reported when locals() is called in current scope
type: issue
state: closed
author: Jackenmen
labels:
  - bug
assignees: []
created_at: 2022-09-18T02:15:22Z
updated_at: 2023-02-03T18:28:29Z
url: https://github.com/astral-sh/ruff/issues/220
synced_at: 2026-01-07T12:31:12-06:00
---

# F841 reported when locals() is called in current scope

---

_Issue opened by @Jackenmen on 2022-09-18 02:15_

I found this while comparing some of pylint's errors to flake8/ruff's - pyflakes ignores unused variables if `locals()` is used in the current scope:
```py
def locals_example_defined_before():
    value = 42  # no message on flake8 but ruff reports it
    return locals()
```

Looking at pyflakes's unit tests, they also have a test case checking that the message still gets reported if locals() was called in a different scope:
```py
def a():
    locals()
    def a():
        b = 1
        return
```

---

_Comment by @charliermarsh on 2022-09-18 15:14_

Thanks, this is a known limitation, needs to be fixed!

---

_Label `bug` added by @charliermarsh on 2022-09-18 15:14_

---

_Added to milestone `Release 0.1.0` by @charliermarsh on 2022-09-18 15:14_

---

_Assigned to @charliermarsh by @charliermarsh on 2022-09-19 19:18_

---

_Referenced in [astral-sh/ruff#226](../../astral-sh/ruff/pulls/226.md) on 2022-09-20 01:41_

---

_Closed by @charliermarsh on 2022-09-20 02:13_

---
