---
number: 6969
title: Got F811 and F821 when indirectly importing Literal and overload
type: issue
state: closed
author: leavers
labels:
  - needs-info
assignees: []
created_at: 2023-08-29T07:52:59Z
updated_at: 2025-07-30T08:26:20Z
url: https://github.com/astral-sh/ruff/issues/6969
synced_at: 2026-01-07T12:31:12-06:00
---

# Got F811 and F821 when indirectly importing Literal and overload

---

_Issue opened by @leavers on 2023-08-29 07:52_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

A minimal code snippet that reproduces the bug:

File `test.py`

``` python
from mytyping import Literal, overload
# from typing import Literal, overload
# from typing_extensions import Literal, overload

tag: Literal["a"] = "a"


@overload
def func(a: int):
    ...


@overload
def func(a: int, b: int):
    ...


def func(a: int, b: int = 0):
    return a, b
```

File `mytyping.py`:

``` python
from typing import Literal, overload

__all__ = ["Literal", "overload"]
```

When using `ruff check` with `from mytyping import Literal, overload` enabled, I got:

``` shell
$ ruff check test.py
test.py:5:15: F821 Undefined name `a`
test.py:14:5: F811 Redefinition of unused `func` from line 9
test.py:18:5: F811 Redefinition of unused `func` from line 14
Found 3 errors.
```

However, when uncomment either `typing` or `typing_extensions`, `ruff check` does not report above errors.

Ruff version:

``` shell
$ ruff --version
ruff 0.0.286
```

---

_Comment by @charliermarsh on 2023-08-29 13:41_

Can you take a look at [`typing-modules`](https://beta.ruff.rs/docs/settings/#typing-modules)? Ruff doesn't support resolving symbols across files, so if you re-export typing symbols from one module, you need to mark it as such in your configuration. In this case, something like:

```toml
[tool.ruff]
typing-modules = ["mytyping"]
```


---

_Label `waiting-on-author` added by @charliermarsh on 2023-08-29 13:41_

---

_Comment by @leavers on 2023-08-30 05:39_

@charliermarsh Thanks for your reply, this setting resolved my issue!

---

_Closed by @MichaReiser on 2023-08-30 06:20_

---

_Comment by @rj-xu on 2025-07-30 08:22_

```python
# from typing import overload
from my_typing import overload

@overload
def func(a: str, b: int) -> int: ...
@overload
def func(a: int, b: str) -> int: ...
def func(a: int | str, b: int | str) -> int:
    return 0
```
In version 0.12.5, `F811 Redefinition` still occurs, even though `typing-modules` have already been set up.
This error will appear after v0.3.0.

---

_Comment by @MichaReiser on 2025-07-30 08:26_

@rj-xu I do appreciate that you took the time to find this issue but please open a new issue if you need help. It will make it easier for us to keep track where users still need help with (which is hard if people comment on issues that have been closed for a long time). 

In the new issue, can you link to this issue for context, include a code snippet and your configuration? This should allow us to help you. Thank you

---

_Referenced in [astral-sh/ruff#19632](../../astral-sh/ruff/issues/19632.md) on 2025-07-30 09:22_

---
