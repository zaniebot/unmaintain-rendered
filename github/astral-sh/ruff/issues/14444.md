---
number: 14444
title: FBT001 preview behavior may lead to false positives
type: issue
state: closed
author: dylwil3
labels:
  - rule
  - preview
assignees: []
created_at: 2024-11-18T22:55:13Z
updated_at: 2025-01-06T12:41:24Z
url: https://github.com/astral-sh/ruff/issues/14444
synced_at: 2026-01-07T12:31:13-06:00
---

# FBT001 preview behavior may lead to false positives

---

_Issue opened by @dylwil3 on 2024-11-18 22:55_

The rule [boolean-type-hint-positional-argument (FBT001)](https://docs.astral.sh/ruff/rules/boolean-type-hint-positional-argument/#boolean-type-hint-positional-argument-fbt001) was extended in #7501 , under preview, to also flag positional arguments that have a type hint with any union of types that includes `bool`.

The intent of the rules is specifically to find places where a boolean is used as a (binary) flag, in a positional argument. If an argument has a type hint of `bool` or even `bool | None`, it makes sense to predict that the argument is being used as a flag. But the preview behavior allows any union, even, say `bool | str | MyClass`. This seems like a situation where it's a bit of a stretch to assume that the user is using the boolean as a flag.

Maybe the concern is unfounded and this doesn't actually happen in the real world, but I figured the community could weigh in a bit on the point before stabilizing this preview behavior.

---

_Label `preview` added by @dylwil3 on 2024-11-18 22:55_

---

_Added to milestone `v0.9` by @dylwil3 on 2024-11-18 22:55_

---

_Label `rule` added by @dhruvmanila on 2024-11-19 03:14_

---

_Comment by @MichaReiser on 2024-11-19 07:09_

I'm just curious. Do you have any examples from the ecosystem checks or from real world projects that raised this concern? 

---

_Comment by @dylwil3 on 2024-11-23 08:29_

It's rare but it does happen - but maybe rare enough that noqa is the answer. Here is an example from pandas:

https://github.com/pandas-dev/pandas/blob/ee0902a832b7fa3e5821ada176566301791e09ec/pandas/io/formats/info.py#L350-L356

and a strange one from Pytorch:

https://github.com/pytorch/pytorch/blob/3473dfa69859f4049abe46075a91014922af198c/torch/onnx/_internal/exporter/_torchlib/ops/hop.py#L13-L19

It's relatively common for there to be a type alias for scalars that includes `bool` along with `float` etc., but the rule wouldn't flag that...

All that to say, it's probably rare enough that I'm being overly cautious here.

---

_Comment by @dylwil3 on 2025-01-06 12:41_

I'm gonna close this since my hesitation does not seem to be justified here - I think it's okay to stabilize this rule.

---

_Closed by @dylwil3 on 2025-01-06 12:41_

---
