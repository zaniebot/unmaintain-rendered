---
number: 7107
title: "Question: Is it possible to detect potential usage of contextlib.nullcontext?"
type: issue
state: open
author: nth10sd
labels:
  - question
assignees: []
created_at: 2023-09-03T19:59:26Z
updated_at: 2023-09-04T06:39:33Z
url: https://github.com/astral-sh/ruff/issues/7107
synced_at: 2026-01-07T12:31:12-06:00
---

# Question: Is it possible to detect potential usage of contextlib.nullcontext?

---

_Issue opened by @nth10sd on 2023-09-03 19:59_

```
if needs_with():
    with get_stuff() as gs:

# do nearly the same large block of stuff,
# involving gs or not, depending on needs_with()
```

could become:

```
from contextlib import nullcontext

with get_stuff() if needs_with() else nullcontext() as gs:
    # do nearly the same large block of stuff,
    # involving gs or not, depending on needs_with()
```

This came from the following [SO thread](https://stackoverflow.com/questions/27803059/conditional-with-statement-in-python).

---

_Label `question` added by @MichaReiser on 2023-09-04 06:39_

---
