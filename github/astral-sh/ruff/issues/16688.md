---
number: 16688
title: "False positives for `quoted-type-alias` (`TC008`)"
type: issue
state: open
author: ntBre
labels:
  - bug
assignees: []
created_at: 2025-03-12T18:33:15Z
updated_at: 2025-03-12T18:37:05Z
url: https://github.com/astral-sh/ruff/issues/16688
synced_at: 2026-01-07T12:31:13-06:00
---

# False positives for `quoted-type-alias` (`TC008`)

---

_Issue opened by @ntBre on 2025-03-12 18:33_

Recursive type definition from ibis:
```python
if sys.version_info >= (3, 10):
    from types import UnionType
    from typing import TypeAlias

    # Keep this alias in sync with unittest.case._ClassInfo
    _ClassInfo: TypeAlias = type | UnionType | tuple["_ClassInfo", ...]
else:
    from typing_extensions import TypeAlias

    UnionType = object()
    _ClassInfo: TypeAlias = Union[type, tuple["_ClassInfo", ...]]  # TC008
```

Conditional import from zulip:
```python
if settings.ZILENCER_ENABLED:
    from zilencer.models import RemoteInstallationCount, RemoteRealmCount, RemoteZulipServer

...

TableType: TypeAlias = (
        type["RemoteInstallationCount"]  # TC008
        | type[InstallationCount]
        | type["RemoteRealmCount"]
        | type[RealmCount]
```

These all look like false positives except the latchbio cases. 

The Zulip cases require an import that is conditional on some `settings` type other than `TYPE_CHECKING`, so I think unconditionally unquoting those could be a problem.

And the ibis case is a recursive type alias, which I think must be quoted? Possibly the rule doesn't descend into the `Union` because it handles the `... | ...` version fine.

_Originally posted by @ntBre in https://github.com/astral-sh/ruff/issues/16639#issuecomment-2715217849_

See this [ecosystem check](https://github.com/astral-sh/ruff/pull/16639#issuecomment-2715178621) for what "these" refers to and [this comment](https://github.com/astral-sh/ruff/pull/16639#issuecomment-2716941870) for additional context and possible solutions.
            

---

_Label `bug` added by @ntBre on 2025-03-12 18:37_

---
