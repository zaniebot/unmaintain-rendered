---
number: 4115
title: C1901 leads to false positives with numpy (as well)
type: issue
state: closed
author: mmarras
labels:
  - bug
  - type-inference
assignees: []
created_at: 2023-04-26T09:46:54Z
updated_at: 2023-06-22T21:22:06Z
url: https://github.com/astral-sh/ruff/issues/4115
synced_at: 2026-01-07T12:31:12-06:00
---

# C1901 leads to false positives with numpy (as well)

---

_Issue opened by @mmarras on 2023-04-26 09:46_

Related to #3517: C1901 leads to false positives with numpy as well. 
```pyhton
desc = np.array(("","",""))
np.all(desc == "")  # is valid
np.all(not desc) # is not valid
```

`ruff 0.0263`

> PLC1901 `desc == ""` can be simplified to `not desc` as an empty string is falsey

The statment "can be simplified to `not desc`" is wrong.

---

_Label `bug` added by @charliermarsh on 2023-04-26 15:06_

---

_Label `type-inference` added by @charliermarsh on 2023-04-26 15:06_

---

_Comment by @charliermarsh on 2023-06-22 21:22_

We made this rule require explicit opt-in, so closing for now.

---

_Closed by @charliermarsh on 2023-06-22 21:22_

---
