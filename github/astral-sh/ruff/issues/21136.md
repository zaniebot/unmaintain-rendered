---
number: 21136
title: SIM222 overstepping
type: issue
state: closed
author: martinlehoux
labels:
  - bug
  - rule
assignees: []
created_at: 2025-10-30T11:46:03Z
updated_at: 2025-11-10T13:27:33Z
url: https://github.com/astral-sh/ruff/issues/21136
synced_at: 2026-01-07T12:31:13-06:00
---

# SIM222 overstepping

---

_Issue opened by @martinlehoux on 2025-10-30 11:46_

### Summary

Hello!
I was updating to v0.14.2, I had only one unsafe fix with SIM222. I think the rule is overstepping with this example:

```py
def get_items() -> tuple[Item, ...] | None:
    return tuple(item for item in Item.objects.all()) or None
```

suggested fix:
```py
def get_items() -> tuple[Item, ...] | None:
    return tuple(item for item in Item.objects.all())
```

I'm not saying the code has the best design, but the suggestion changes the function behavior (of course not critical, this is an unsafe fix)

By the way, the fix not suggested in this case (no comprehension)
```py
def get_items() -> tuple[Item, ...] | None:
    return tuple(Item.objects.all()) or None
```

---

_Comment by @ntBre on 2025-10-30 13:34_

Thanks for the report! This does seem incorrect since `tuple(empty_generator())` is falsy, even if the generator itself is truthy.

```pycon
>>> if tuple(x for x in range(0)): print("True")
...
>>> if (x for x in range(0)): print("True")
...
True
```

---

_Label `bug` added by @ntBre on 2025-10-30 13:34_

---

_Label `rule` added by @ntBre on 2025-10-30 13:34_

---

_Referenced in [astral-sh/ruff#21187](../../astral-sh/ruff/pulls/21187.md) on 2025-11-01 18:51_

---

_Comment by @gsakkis on 2025-11-03 11:07_

I stumbled on this too. One quick note, it doesn't affects just tuples:
```diff
-        print(list(x for x in range(10) if x % 2 == 2) or [42])
+        print([x for x in range(10) if x % 2 == 2])
```

```diff
-        print(set(x for x in range(10) if x % 2 == 2) or {42})
+        print({x for x in range(10) if x % 2 == 2})
```

```diff
-        print(frozenset(x for x in range(10) if x % 2 == 2) or frozenset([42]))
+        print(frozenset(x for x in range(10) if x % 2 == 2))
```

---

_Closed by @MichaReiser on 2025-11-10 13:27_

---
