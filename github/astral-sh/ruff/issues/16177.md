---
number: 16177
title: "PYI061 fixes `Literal[None,] | Literal[None,]` to `None | None`"
type: issue
state: closed
author: dscorbett
labels:
  - bug
  - fixes
  - help wanted
assignees: []
created_at: 2025-02-15T15:59:39Z
updated_at: 2025-04-28T11:23:30Z
url: https://github.com/astral-sh/ruff/issues/16177
synced_at: 2026-01-07T12:31:13-06:00
---

# PYI061 fixes `Literal[None,] | Literal[None,]` to `None | None`

---

_Issue opened by @dscorbett on 2025-02-15 15:59_

### Description

The fix for [`redundant-none-literal` (PYI061)](https://docs.astral.sh/ruff/rules/redundant-none-literal/) converts `Literal[None,] | Literal[None,]` to `None | None`, which can raise an exception.
```console
$ cat >pyi061.py <<'# EOF'
from typing import Literal
x: Literal[None,] | Literal[None,]
# EOF

$ python pyi061.py

$ ruff --isolated check --preview --select PYI061 pyi061.py --fix
Found 2 errors (2 fixed, 0 remaining).

$ python pyi061.py                               
Traceback (most recent call last):
  File "pyi061.py", line 2, in <module>
    x: None | None
       ~~~~~^~~~~~
TypeError: unsupported operand type(s) for |: 'NoneType' and 'NoneType'
```

---

_Label `bug` added by @AlexWaygood on 2025-02-15 18:03_

---

_Label `fixes` added by @AlexWaygood on 2025-02-15 18:03_

---

_Label `help wanted` added by @AlexWaygood on 2025-02-15 18:03_

---

_Comment by @VascoSch92 on 2025-02-16 06:35_

I think I can fix that. Should be not so difficult.

Another question: I tried to fix the example giving in the doc, and I had another result that the one presented, i.e.,

```python
from typing import Literal
y: Literal[1, 2, 3, "foo", 5, None]
```
was fixed as

```python
from typing import Literal, Optional
y: Optional[Literal[1, 2, 3, "foo", 5]]
```
after command `ruff --isolated check --preview --select PYI061 scratch.py --fix`, but in the docs the fix is given by
`Literal[1, 2, 3, "foo", 5] | None`.

Which one is the correct/expected fix? Is the fix wrong or the doc :-) ?

FYI: I'm using `Python 3.10.14` and `Ruff 0.9.6`

---

_Comment by @InSyncWithFoo on 2025-02-16 06:41_

@VascoSch92 The fix changes depending on what `target-version` is. For 3.9 (default) and lower, it uses `Optional[...]`; for [3.10 and higher](https://peps.python.org/pep-0604/), it uses `... | None`.

---

_Comment by @kiran-4444 on 2025-02-19 10:28_

I'll fix this, if no one has started on this yet.

---

_Referenced in [astral-sh/ruff#17659](../../astral-sh/ruff/pulls/17659.md) on 2025-04-27 21:38_

---

_Closed by @AlexWaygood on 2025-04-28 11:23_

---
