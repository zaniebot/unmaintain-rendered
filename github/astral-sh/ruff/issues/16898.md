---
number: 16898
title: "[red-knot] Add line number to mdtest panic message about language tag mismatch"
type: issue
state: closed
author: AlexWaygood
labels:
  - help wanted
  - testing
  - ty
assignees: []
created_at: 2025-03-21T14:12:11Z
updated_at: 2025-03-22T12:05:32Z
url: https://github.com/astral-sh/ruff/issues/16898
synced_at: 2026-01-07T12:31:13-06:00
---

# [red-knot] Add line number to mdtest panic message about language tag mismatch

---

_Issue opened by @AlexWaygood on 2025-03-21 14:12_

I just hit this panic message while writing an mdtest:

```
failures:

---- mdtest__import_star stdout ----

thread 'mdtest__import_star' panicked at crates/red_knot_test/src/lib.rs:42:13:
Error parsing `/Users/alexw/dev/ruff/crates/red_knot_python_semantic/resources/mdtest/import/star.md`: File extension of test file path `a.pyi` in test `Only explicit re-exports are considered re-exported from `.pyi` files` does not match language specified `py` of code block
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
```

It's a very useful message, but it would be great if it told me which line number the bad language tag has so that I could jump straight there and fix it

---

_Label `help wanted` added by @AlexWaygood on 2025-03-21 14:12_

---

_Label `red-knot` added by @AlexWaygood on 2025-03-21 14:12_

---

_Label `testing` added by @AlexWaygood on 2025-03-21 14:12_

---

_Referenced in [astral-sh/ruff#16906](../../astral-sh/ruff/pulls/16906.md) on 2025-03-21 22:04_

---

_Closed by @MichaReiser on 2025-03-22 12:05_

---

_Closed by @MichaReiser on 2025-03-22 12:05_

---
