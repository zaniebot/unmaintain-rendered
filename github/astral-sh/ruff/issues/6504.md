---
number: 6504
title: "`I002` doesn't handle comments with newlines properly"
type: issue
state: closed
author: durumu
labels: []
assignees: []
created_at: 2023-08-11T14:36:43Z
updated_at: 2023-08-13T00:08:31Z
url: https://github.com/astral-sh/ruff/issues/6504
synced_at: 2026-01-07T12:31:12-06:00
---

# `I002` doesn't handle comments with newlines properly

---

_Issue opened by @durumu on 2023-08-11 14:36_

Hello! I noticed a case where ruff has different behavior than isort, which I think is a bug.

Here is an example Python file with comments that have newlines, and no docstring:

```
# This is a comment

# This is another comment

from sys import stdout

stdout.write("Hello world\n")
```

When I run `ruff --select I002 --fix test.py`, with the following `.ruff.toml`:

```
[isort]
required-imports = ["from __future__ import annotations"]
```

I get this result:

```
# This is a comment
from __future__ import annotations

# This is another comment

from sys import stdout

stdout.write("Hello world\n")
```

However, when I run `isort -a "from __future__ import annotations"` on this file, I get this result (which I think is more correct):

```
# This is a comment

# This is another comment

from __future__ import annotations

from sys import stdout

stdout.write("Hello world\n")
```

Edit: I was able to reproduce this using the latest version of ruff, 0.0.284.

---

_Referenced in [astral-sh/ruff#6523](../../astral-sh/ruff/pulls/6523.md) on 2023-08-12 14:39_

---

_Closed by @durumu on 2023-08-13 00:08_

---
