---
number: 6879
title: "Don't emit `PLW1510` if `returncode` or `stderr` is checked explicitly"
type: issue
state: open
author: dosisod
labels:
  - rule
  - needs-decision
assignees: []
created_at: 2023-08-25T18:56:08Z
updated_at: 2023-08-25T21:42:35Z
url: https://github.com/astral-sh/ruff/issues/6879
synced_at: 2026-01-07T12:31:12-06:00
---

# Don't emit `PLW1510` if `returncode` or `stderr` is checked explicitly

---

_Issue opened by @dosisod on 2023-08-25 18:56_

`PLW1510` is meant to detect users not handling the return code of a subprocess, but there are other ways of checking the return code besides the `check` argument:

```python
import subprocess

process = subprocess.run(["ls", "nonexistent"])

if process.returncode != 0:
    print("Error, file doesn't exist")
```

In this case, raising an exception upon failure with `check=True` is not desired since we're explicitly checking the return code, and `check=False` would be redundant since we know we're handling the return code ourself.

Ruff output:

```
$ ruff --version
ruff 0.0.285

$ ruff --select PLW1510 x.py
x.py:3:11: PLW1510 `subprocess.run` without explicit `check` argument
Found 1 error.
```

Expected output: no error.

While it is easy enough to just silence the errors on a case-by-case basis, it would be nice if Ruff could detect this cases.

Also, certain programs handle errors in different ways. It might be perfectly valid to check if a program had any errors by checking if anything was printed to `stderr`:

```python
process = subprocess.run(["some_command"], stderr=PIPE)

if process.stderr:
    print("Error occurred")
```

---

_Label `rule` added by @charliermarsh on 2023-08-25 21:42_

---

_Label `needs-decision` added by @charliermarsh on 2023-08-25 21:42_

---

_Comment by @charliermarsh on 2023-08-25 21:42_

My only hesitation is that it may be difficult for us to detect these reliably.

---
