---
number: 13110
title: Cannot find ruff on Windows in venv using --system-site-packages
type: issue
state: open
author: markuspi
labels:
  - windows
assignees: []
created_at: 2024-08-26T14:05:41Z
updated_at: 2024-08-26T16:06:12Z
url: https://github.com/astral-sh/ruff/issues/13110
synced_at: 2026-01-07T12:31:13-06:00
---

# Cannot find ruff on Windows in venv using --system-site-packages

---

_Issue opened by @markuspi on 2024-08-26 14:05_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

`python -m ruff` can't find ruff.exe on Windows when using a virtual environment generated using `--system-site-packages`:

1) Prerequisite: have ruff installed system-wide on Windows. The bug does not trigger if it is installed in the per-user packages in AppData.
  _Example_: I have a Python311 installed in `C:\Python311`, with ruff at `C:\Python311\Lib\site-packages\ruff\__main__.py` and `C:\Python311\Scripts\ruff.exe`.

2) Create virtual environment using `--system-site-packages` flag
    ```powershell
    C:\Python311\python -m venv --system-site-packages myvenv
    ```

3) Using virtual environment to run `python -m ruff` results in FileNotFoundError.
    ```powershell
    .\myvenv\Scripts\python -m ruff
    ```
    ```text
    Traceback (most recent call last):
      File "<frozen runpy>", line 198, in _run_module_as_main
      File "<frozen runpy>", line 88, in _run_code
      File "C:\Python311\Lib\site-packages\ruff\__main__.py", line 40, in <module>
        ruff = os.fsdecode(find_ruff_bin())
                           ^^^^^^^^^^^^^^^
      File "C:\Python311\Lib\site-packages\ruff\__main__.py", line 36, in find_ruff_bin
        raise FileNotFoundError(scripts_path)
    FileNotFoundError: C:\[...]\myvenv\Scripts\ruff.exe
    ```

Ruff version: 0.6.2



---

_Label `windows` added by @dhruvmanila on 2024-08-26 16:06_

---

_Referenced in [astral-sh/ruff#15630](../../astral-sh/ruff/issues/15630.md) on 2025-01-29 09:11_

---
