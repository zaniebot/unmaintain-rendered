---
number: 11061
title: "New Rule: Use `Sequence` instead of `list` to annotate arguments"
type: issue
state: open
author: jd-solanki
labels:
  - rule
  - type-inference
  - needs-decision
assignees: []
created_at: 2024-04-21T00:10:22Z
updated_at: 2024-05-04T15:15:54Z
url: https://github.com/astral-sh/ruff/issues/11061
synced_at: 2026-01-07T12:31:13-06:00
---

# New Rule: Use `Sequence` instead of `list` to annotate arguments

---

_Issue opened by @jd-solanki on 2024-04-21 00:10_

Hi ðŸ‘‹ðŸ» 

Thanks for the amazing & blazing fast ecosystem ðŸ«¡

With the following code:
```py
from pydantic import BaseModel

class Itembase(BaseModel):
    title: str

class ItemRead(Itembase): ...

def my_util(Itembase): ...

items = [ItemRead(title"my title")]

my_utils(items) # ðŸš¨ Type Error: `Type parameter "_T@list" is invariant, Consider switching from "list" to "Sequence" which is covariant`
```

I checked the typing module and found [this](https://docs.python.org/3/library/typing.html#typing.List) quote:
> Note that to annotate arguments, it is preferred to use an abstract collection type such as [Sequence](https://docs.python.org/3/library/typing.html#typing.Sequence) or [Iterable](https://docs.python.org/3/library/typing.html#typing.Iterable) rather than to use [list](https://docs.python.org/3/library/stdtypes.html#list) or typing.List.


Hence, I'm raising an issue that'll enforce using `Sequence` instead of `list`

---

_Label `rule` added by @AlexWaygood on 2024-04-21 00:17_

---

_Label `needs-decision` added by @AlexWaygood on 2024-04-21 00:17_

---

_Comment by @twoertwein on 2024-04-21 16:04_

If ruff can analyze the minimally needed types/methods for arguments and, based on that, suggests widening the type (for example, from list to Sequence), that would be amazing!

A blanket recommendation without some guard rails to replace list with Sequence would probably produce too many false positives.

---

_Comment by @mikeshardmind on 2024-05-04 05:56_

Changing `list` to `Sequence` is often incorrect. `MutableSequence` is less likely to be a problem, but even that can cause issue if you are relying on the sequence being an actual list somewhere else. This would be extremely disruptive in many code bases due to interactions with other code outside of someone's control (you can't call a function expecting a list when you only know it's a sequence, for example)

---

_Label `type-inference` added by @zanieb on 2024-05-04 15:15_

---
