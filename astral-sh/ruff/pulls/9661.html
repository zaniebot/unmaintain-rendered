<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8-pie`] Omit bound tuples passed to `.startswith` or `.endswith` - astral-sh/ruff #9661</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8-pie</code>] Omit bound tuples passed to <code>.startswith</code> or <code>.endswith</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/9661">#9661</a>
        opened by <a href="https://github.com/mikeleppane">@mikeleppane</a>
        on 2024-01-28 12:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mikeleppane">@mikeleppane</a></div>
            <div class="timeline-body">Summary
<p>This review contains a fix for <a href="https://docs.astral.sh/ruff/rules/multiple-starts-ends-with/">PIE810</a> (multiple-starts-ends-with)</p>
<p>The problem is that ruff suggests combining multiple startswith/endswith calls into a single call even though there might be a call with tuple of strs. This leads to calling startswith/endswith with tuple of tuple of strs which is incorrect and violates startswith/endswith conctract and results in runtime failure.</p>
<p>However the following will be valid and fixed correctly =&gt;</p>
<pre><code>x = (&quot;hello&quot;, &quot;world&quot;)
y = &quot;h&quot;
z = &quot;w&quot;
msg = &quot;hello world&quot;

if msg.startswith(x) or msg.startswith(y) or msg.startswith(z) :
      sys.exit(1)
</code></pre>
<pre><code>ruff --fix --select PIE810 --unsafe-fixes
</code></pre>
<p>=&gt;</p>
<pre><code>if msg.startswith(x) or msg.startswith((y,z)):
      sys.exit(1)
</code></pre>
<p>See: <a href="https://github.com/astral-sh/ruff/issues/8906">astral-sh/ruff#8906</a></p>
Test Plan
<pre><code>cargo test
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[pie-fix]: Incorrect suggestion when calling startswith or endswith with tuple of strs&quot; to &quot;[flake8pie-fix]: Incorrect suggestion when calling startswith or endswith with tuple of strs&quot; by <a href="https://github.com/mikeleppane">@mikeleppane</a> on 2024-01-28 12:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-01-28 12:25</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+17 -20 violations, +0 -0 fixes in 4 projects; 39 projects unchanged)</p>
<a href="https://github.com/apache/airflow">apache/airflow</a> (+1 -1 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/apache/airflow/blob/4fa8e45c9222f05cabef543c8fd33f737826ebe3/airflow/providers/google/suite/hooks/drive.py#L197">airflow/providers/google/suite/hooks/drive.py:197:13:</a> SIM108 Use ternary operator `path = f&quot;{file_info[&#x27;name&#x27;]}&quot; if current_file_id == file_id else f&quot;{file_info[&#x27;name&#x27;]}/{path}&quot;` instead of `if`-`else`-block
- <a href="https://github.com/apache/airflow/blob/4fa8e45c9222f05cabef543c8fd33f737826ebe3/airflow/providers/google/suite/hooks/drive.py#L197">airflow/providers/google/suite/hooks/drive.py:197:13:</a> SIM108 Use ternary operator `path = f&#x27;{file_info[&quot;name&quot;]}&#x27; if current_file_id == file_id else f&#x27;{file_info[&quot;name&quot;]}/{path}&#x27;` instead of `if`-`else`-block
</pre>

</p>

<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+14 -14 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/reference/models/select_server.py#L28">examples/reference/models/select_server.py:28:5:</a> SIM108 Use ternary operator `selected_df = df[df[&#x27;label&#x27;] == active_select] if active_select != &#x27;All&#x27; else df.copy()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/reference/models/select_server.py#L28">examples/reference/models/select_server.py:28:5:</a> SIM108 Use ternary operator `selected_df = df[df[&#x27;label&#x27;]==active_select] if active_select!=&#x27;All&#x27; else df.copy()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/flask_embed.py#L26">examples/server/api/flask_embed.py:26:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&quot;{new}D&quot;).mean()` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/flask_embed.py#L26">examples/server/api/flask_embed.py:26:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&#x27;{new}D&#x27;).mean()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/flask_gunicorn_embed.py#L41">examples/server/api/flask_gunicorn_embed.py:41:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&quot;{new}D&quot;).mean()` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/flask_gunicorn_embed.py#L41">examples/server/api/flask_gunicorn_embed.py:41:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&#x27;{new}D&#x27;).mean()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/standalone_embed.py#L18">examples/server/api/standalone_embed.py:18:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&quot;{new}D&quot;).mean()` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/standalone_embed.py#L18">examples/server/api/standalone_embed.py:18:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&#x27;{new}D&#x27;).mean()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/tornado_embed.py#L29">examples/server/api/tornado_embed.py:29:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&quot;{new}D&quot;).mean()` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/tornado_embed.py#L29">examples/server/api/tornado_embed.py:29:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&#x27;{new}D&#x27;).mean()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/file_output.py#L134">src/bokeh/command/subcommands/file_output.py:134:9:</a> SIM108 Use ternary operator `base = &quot;index&quot; if route == &quot;/&quot; else route[1:]` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/file_output.py#L134">src/bokeh/command/subcommands/file_output.py:134:9:</a> SIM108 Use ternary operator `base = &#x27;index&#x27; if route == &#x27;/&#x27; else route[1:]` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/core/json_encoder.py#L153">src/bokeh/core/json_encoder.py:153:5:</a> SIM108 Use ternary operator `separators = (&quot;,&quot;, &quot;: &quot;) if pretty else (&quot;,&quot;, &quot;:&quot;)` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/core/json_encoder.py#L153">src/bokeh/core/json_encoder.py:153:5:</a> SIM108 Use ternary operator `separators = (&#x27;,&#x27;, &#x27;: &#x27;) if pretty else (&#x27;,&#x27;, &#x27;:&#x27;)` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L105">src/bokeh/plotting/_graph.py:105:5:</a> SIM108 Use ternary operator `sedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&quot;edge_selection_&quot;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_selection_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L105">src/bokeh/plotting/_graph.py:105:5:</a> SIM108 Use ternary operator `sedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&#x27;edge_selection_&#x27;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_selection_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L110">src/bokeh/plotting/_graph.py:110:5:</a> SIM108 Use ternary operator `hedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&quot;edge_hover_&quot;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L110">src/bokeh/plotting/_graph.py:110:5:</a> SIM108 Use ternary operator `hedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&#x27;edge_hover_&#x27;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L93">src/bokeh/plotting/_graph.py:93:5:</a> SIM108 Use ternary operator `hnode_visuals = pop_visuals(marker_type, kwargs, prefix=&quot;node_hover_&quot;, defaults=node_visuals) if any(x.startswith(&#x27;node_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L93">src/bokeh/plotting/_graph.py:93:5:</a> SIM108 Use ternary operator `hnode_visuals = pop_visuals(marker_type, kwargs, prefix=&#x27;node_hover_&#x27;, defaults=node_visuals) if any(x.startswith(&#x27;node_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/tornado.py#L290">src/bokeh/server/tornado.py:290:9:</a> SIM108 Use ternary operator `applications = {&#x27;/&#x27; : applications} if isinstance(applications, Application) else dict(applications)` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/tornado.py#L290">src/bokeh/server/tornado.py:290:9:</a> SIM108 Use ternary operator `applications = {&#x27;/&#x27;: applications} if isinstance(applications, Application) else dict(applications)` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/tornado.py#L414">src/bokeh/server/tornado.py:414:17:</a> SIM108 Use ternary operator `route = p[0] if key == &quot;/&quot; else key + p[0]` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/tornado.py#L414">src/bokeh/server/tornado.py:414:17:</a> SIM108 Use ternary operator `route = p[0] if key == &#x27;/&#x27; else key + p[0]` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/util/compiler.py#L253">src/bokeh/util/compiler.py:253:13:</a> SIM108 Use ternary operator `impl = FromFile(impl if isabs(impl) else join(self.path, impl)) if &quot;\n&quot; not in impl and impl.endswith(exts) else TypeScript(impl)` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/util/compiler.py#L253">src/bokeh/util/compiler.py:253:13:</a> SIM108 Use ternary operator `impl = FromFile(impl if isabs(impl) else join(self.path, impl)) if &#x27;\n&#x27; not in impl and impl.endswith(exts) else TypeScript(impl)` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/support/util/examples.py#L217">tests/support/util/examples.py:217:9:</a> SIM108 Use ternary operator `example_type = getattr(Flags, example[&quot;type&quot;]) if example.get(&quot;type&quot;) is not None else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/support/util/examples.py#L217">tests/support/util/examples.py:217:9:</a> SIM108 Use ternary operator `example_type = getattr(Flags, example[&#x27;type&#x27;]) if example.get(&#x27;type&#x27;) is not None else None` instead of `if`-`else`-block
</pre>

</p>

<a href="https://github.com/mlflow/mlflow">mlflow/mlflow</a> (+0 -1 violations, +0 -0 fixes)
<p>

<pre>
- <a href="https://github.com/mlflow/mlflow/blob/5d13d6ec620a02de9a5e31201bf1becdb9722ea5/tests/pyfunc/test_pyfunc_schema_enforcement.py#L2138">tests/pyfunc/test_pyfunc_schema_enforcement.py:2138:5:</a> SIM108 Use ternary operator `df = pd.DataFrame([data]) if isinstance(data, dict) and all(
</pre>

</p>

<a href="https://github.com/zulip/zulip">zulip/zulip</a> (+2 -4 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --no-preview --select ALL</pre>
</p>
<p>

<pre>
- <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/analytics/tests/test_activity_views.py#L236">analytics/tests/test_activity_views.py:236:17:</a> SIM108 Use ternary operator `price_per_license = 0 if tier in (
- <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/scripts/lib/sharding.py#L65">scripts/lib/sharding.py:65:21:</a> SIM108 Use ternary operator `host = shard if &quot;.&quot; in shard else f&quot;{shard}.{external_host}&quot;` instead of `if`-`else`-block
+ <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/scripts/lib/sharding.py#L65">scripts/lib/sharding.py:65:21:</a> SIM108 Use ternary operator `host = shard if &#x27;.&#x27; in shard else f&#x27;{shard}.{external_host}&#x27;` instead of `if`-`else`-block
- <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/zerver/migrations/0182_set_initial_value_is_private_flag.py#L37">zerver/migrations/0182_set_initial_value_is_private_flag.py:37:9:</a> SIM108 Use ternary operator `percent = round((processed / total) * 100, 2) if total != 0 else 100.00` instead of `if`-`else`-block
+ <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/zerver/migrations/0182_set_initial_value_is_private_flag.py#L37">zerver/migrations/0182_set_initial_value_is_private_flag.py:37:9:</a> SIM108 Use ternary operator `percent = round(processed / total * 100, 2) if total != 0 else 100.0` instead of `if`-`else`-block
- <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/zerver/tests/test_settings.py#L371">zerver/tests/test_settings.py:371:9:</a> SIM108 Use ternary operator `data = {setting_name: test_value} if setting_name not in [
</pre>

</p>

Changes by rule (1 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| SIM108 | 37 | 17 | 20 | 0 | 0 |</p>
</p>


Linter (preview)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+17 -20 violations, +0 -0 fixes in 4 projects; 39 projects unchanged)</p>
<a href="https://github.com/apache/airflow">apache/airflow</a> (+1 -1 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/apache/airflow/blob/4fa8e45c9222f05cabef543c8fd33f737826ebe3/airflow/providers/google/suite/hooks/drive.py#L197">airflow/providers/google/suite/hooks/drive.py:197:13:</a> SIM108 Use ternary operator `path = f&quot;{file_info[&#x27;name&#x27;]}&quot; if current_file_id == file_id else f&quot;{file_info[&#x27;name&#x27;]}/{path}&quot;` instead of `if`-`else`-block
- <a href="https://github.com/apache/airflow/blob/4fa8e45c9222f05cabef543c8fd33f737826ebe3/airflow/providers/google/suite/hooks/drive.py#L197">airflow/providers/google/suite/hooks/drive.py:197:13:</a> SIM108 Use ternary operator `path = f&#x27;{file_info[&quot;name&quot;]}&#x27; if current_file_id == file_id else f&#x27;{file_info[&quot;name&quot;]}/{path}&#x27;` instead of `if`-`else`-block
</pre>

</p>

<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+14 -14 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/reference/models/select_server.py#L28">examples/reference/models/select_server.py:28:5:</a> SIM108 Use ternary operator `selected_df = df[df[&#x27;label&#x27;] == active_select] if active_select != &#x27;All&#x27; else df.copy()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/reference/models/select_server.py#L28">examples/reference/models/select_server.py:28:5:</a> SIM108 Use ternary operator `selected_df = df[df[&#x27;label&#x27;]==active_select] if active_select!=&#x27;All&#x27; else df.copy()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/flask_embed.py#L26">examples/server/api/flask_embed.py:26:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&quot;{new}D&quot;).mean()` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/flask_embed.py#L26">examples/server/api/flask_embed.py:26:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&#x27;{new}D&#x27;).mean()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/flask_gunicorn_embed.py#L41">examples/server/api/flask_gunicorn_embed.py:41:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&quot;{new}D&quot;).mean()` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/flask_gunicorn_embed.py#L41">examples/server/api/flask_gunicorn_embed.py:41:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&#x27;{new}D&#x27;).mean()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/standalone_embed.py#L18">examples/server/api/standalone_embed.py:18:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&quot;{new}D&quot;).mean()` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/standalone_embed.py#L18">examples/server/api/standalone_embed.py:18:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&#x27;{new}D&#x27;).mean()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/tornado_embed.py#L29">examples/server/api/tornado_embed.py:29:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&quot;{new}D&quot;).mean()` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/tornado_embed.py#L29">examples/server/api/tornado_embed.py:29:9:</a> SIM108 Use ternary operator `data = df if new == 0 else df.rolling(f&#x27;{new}D&#x27;).mean()` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/file_output.py#L134">src/bokeh/command/subcommands/file_output.py:134:9:</a> SIM108 Use ternary operator `base = &quot;index&quot; if route == &quot;/&quot; else route[1:]` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/file_output.py#L134">src/bokeh/command/subcommands/file_output.py:134:9:</a> SIM108 Use ternary operator `base = &#x27;index&#x27; if route == &#x27;/&#x27; else route[1:]` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/core/json_encoder.py#L153">src/bokeh/core/json_encoder.py:153:5:</a> SIM108 Use ternary operator `separators = (&quot;,&quot;, &quot;: &quot;) if pretty else (&quot;,&quot;, &quot;:&quot;)` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/core/json_encoder.py#L153">src/bokeh/core/json_encoder.py:153:5:</a> SIM108 Use ternary operator `separators = (&#x27;,&#x27;, &#x27;: &#x27;) if pretty else (&#x27;,&#x27;, &#x27;:&#x27;)` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L105">src/bokeh/plotting/_graph.py:105:5:</a> SIM108 Use ternary operator `sedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&quot;edge_selection_&quot;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_selection_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L105">src/bokeh/plotting/_graph.py:105:5:</a> SIM108 Use ternary operator `sedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&#x27;edge_selection_&#x27;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_selection_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L110">src/bokeh/plotting/_graph.py:110:5:</a> SIM108 Use ternary operator `hedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&quot;edge_hover_&quot;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L110">src/bokeh/plotting/_graph.py:110:5:</a> SIM108 Use ternary operator `hedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&#x27;edge_hover_&#x27;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L93">src/bokeh/plotting/_graph.py:93:5:</a> SIM108 Use ternary operator `hnode_visuals = pop_visuals(marker_type, kwargs, prefix=&quot;node_hover_&quot;, defaults=node_visuals) if any(x.startswith(&#x27;node_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L93">src/bokeh/plotting/_graph.py:93:5:</a> SIM108 Use ternary operator `hnode_visuals = pop_visuals(marker_type, kwargs, prefix=&#x27;node_hover_&#x27;, defaults=node_visuals) if any(x.startswith(&#x27;node_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/tornado.py#L290">src/bokeh/server/tornado.py:290:9:</a> SIM108 Use ternary operator `applications = {&#x27;/&#x27; : applications} if isinstance(applications, Application) else dict(applications)` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/tornado.py#L290">src/bokeh/server/tornado.py:290:9:</a> SIM108 Use ternary operator `applications = {&#x27;/&#x27;: applications} if isinstance(applications, Application) else dict(applications)` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/tornado.py#L414">src/bokeh/server/tornado.py:414:17:</a> SIM108 Use ternary operator `route = p[0] if key == &quot;/&quot; else key + p[0]` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/tornado.py#L414">src/bokeh/server/tornado.py:414:17:</a> SIM108 Use ternary operator `route = p[0] if key == &#x27;/&#x27; else key + p[0]` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/util/compiler.py#L253">src/bokeh/util/compiler.py:253:13:</a> SIM108 Use ternary operator `impl = FromFile(impl if isabs(impl) else join(self.path, impl)) if &quot;\n&quot; not in impl and impl.endswith(exts) else TypeScript(impl)` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/util/compiler.py#L253">src/bokeh/util/compiler.py:253:13:</a> SIM108 Use ternary operator `impl = FromFile(impl if isabs(impl) else join(self.path, impl)) if &#x27;\n&#x27; not in impl and impl.endswith(exts) else TypeScript(impl)` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/support/util/examples.py#L217">tests/support/util/examples.py:217:9:</a> SIM108 Use ternary operator `example_type = getattr(Flags, example[&quot;type&quot;]) if example.get(&quot;type&quot;) is not None else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/support/util/examples.py#L217">tests/support/util/examples.py:217:9:</a> SIM108 Use ternary operator `example_type = getattr(Flags, example[&#x27;type&#x27;]) if example.get(&#x27;type&#x27;) is not None else None` instead of `if`-`else`-block
</pre>

</p>

<a href="https://github.com/mlflow/mlflow">mlflow/mlflow</a> (+0 -1 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --preview</pre>
</p>
<p>

<pre>
- <a href="https://github.com/mlflow/mlflow/blob/5d13d6ec620a02de9a5e31201bf1becdb9722ea5/tests/pyfunc/test_pyfunc_schema_enforcement.py#L2138">tests/pyfunc/test_pyfunc_schema_enforcement.py:2138:5:</a> SIM108 Use ternary operator `df = pd.DataFrame([data]) if isinstance(data, dict) and all(
</pre>

</p>

<a href="https://github.com/zulip/zulip">zulip/zulip</a> (+2 -4 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/analytics/tests/test_activity_views.py#L236">analytics/tests/test_activity_views.py:236:17:</a> SIM108 Use ternary operator `price_per_license = 0 if tier in (
- <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/scripts/lib/sharding.py#L65">scripts/lib/sharding.py:65:21:</a> SIM108 Use ternary operator `host = shard if &quot;.&quot; in shard else f&quot;{shard}.{external_host}&quot;` instead of `if`-`else`-block
+ <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/scripts/lib/sharding.py#L65">scripts/lib/sharding.py:65:21:</a> SIM108 Use ternary operator `host = shard if &#x27;.&#x27; in shard else f&#x27;{shard}.{external_host}&#x27;` instead of `if`-`else`-block
- <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/zerver/migrations/0182_set_initial_value_is_private_flag.py#L37">zerver/migrations/0182_set_initial_value_is_private_flag.py:37:9:</a> SIM108 Use ternary operator `percent = round((processed / total) * 100, 2) if total != 0 else 100.00` instead of `if`-`else`-block
+ <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/zerver/migrations/0182_set_initial_value_is_private_flag.py#L37">zerver/migrations/0182_set_initial_value_is_private_flag.py:37:9:</a> SIM108 Use ternary operator `percent = round(processed / total * 100, 2) if total != 0 else 100.0` instead of `if`-`else`-block
- <a href="https://github.com/zulip/zulip/blob/af6a30db7e5d566a2ba817738b7febc70393d4a3/zerver/tests/test_settings.py#L371">zerver/tests/test_settings.py:371:9:</a> SIM108 Use ternary operator `data = {setting_name: test_value} if setting_name not in [
</pre>

</p>

Changes by rule (1 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| SIM108 | 37 | 17 | 20 | 0 | 0 |</p>
</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[flake8pie-fix]: Incorrect suggestion when calling startswith or endswith with tuple of strs&quot; to &quot;[`flake8-pie`] Destructure tuples when passed to `.startswith` or `.endswith`&quot; by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-28 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-28 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">autofix</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-28 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-01-28 19:23</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[`flake8-pie`] Destructure tuples when passed to `.startswith` or `.endswith`&quot; to &quot;[`flake8-pie`] Omit bound tuples passed to `.startswith` or `.endswith`&quot; by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-28 19:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-28 19:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-28 19:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/deliro">@deliro</a> on 2024-01-28 21:27</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:01:04 UTC
    </footer>
</body>
</html>
