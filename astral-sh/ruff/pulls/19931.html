<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Implement partial stubs - astral-sh/ruff #19931</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Implement partial stubs</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19931">#19931</a>
        opened by <a href="https://github.com/Gankra">@Gankra</a>
        on 2025-08-15 17:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a></div>
            <div class="timeline-body"><p>Fixes <a href="https://github.com/astral-sh/ty/issues/184">astral-sh/ty#184</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-15 17:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-15 17:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-15 17:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/sharkdp">@sharkdp</a> by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-15 17:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-15 17:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-15 17:41</div>
            <div class="timeline-body"><p>(I need to write some proper tests but this fixes <code>from authlib.integrations.requests_client import OAuth2Session</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-08-15 17:42</div>
            <div class="timeline-body">

Diagnostic diff on <a href="https://github.com/python/typing/tree/d4f39b27a4a47aac8b6d4019e1b0b5b3156fabdc/conformance">typing conformance tests</a>
<p>No changes detected when running ty on typing conformance tests ✅</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-08-15 17:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/ty_python_semantic/src/module_resolver/resolver.rs</code>:812 on 2025-08-15 17:42</div>
            <div class="timeline-body"><p>This is really gross and I considered factoring a proper type <em>but</em> literally only one function deals with this and immediately unpacks these so... eh?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2025-08-15 17:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/ty_python_semantic/src/module_resolver/resolver.rs</code>:1054 on 2025-08-15 17:43</div>
            <div class="timeline-body"><p>No idea if this is correct but i like it conceptually</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-08-15 17:44</div>
            <div class="timeline-body">

<code>mypy_primer</code> results
<p>No ecosystem changes detected ✅
No memory usage changes detected ✅</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ty_python_semantic/src/module_resolver/resolver.rs</code>:1054 on 2025-08-15 19:53</div>
            <div class="timeline-body"><p>The spec isn&#x27;t totally clear here, it just says &quot;This marker applies recursively: if a top-level package includes it, all its sub-packages MUST support type checking as well.&quot; It doesn&#x27;t say anything about a sub-package going to <code>partial</code> where its parent was &quot;full&quot;, or whatever. But I think this behavior is sensible.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2025-08-15 19:53</div>
            <div class="timeline-body"><p>Looks reasonable to me! But yeah, should add some tests before we land it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-18 01:50</div>
            <div class="timeline-body"><p>Added tests</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/src/module_resolver/resolver.rs</code>:1482 on 2025-08-18 07:30</div>
            <div class="timeline-body"><p>Could this be an mdtest similar to https://github.com/astral-sh/ruff/blob/1ba56b4bc65442c40d7d6f2873367380d37241a8/crates/ty_python_semantic/resources/mdtest/import/stub_packages.md#L35-L58</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-08-18 10:25</div>
            <div class="timeline-body"><p>Nice. This looks good to me.</p>
<p>Can you coordinate with @BurntSushi to make sure partial is also considered for completions (<a href="https://github.com/astral-sh/ruff/pull/19883">astral-sh/ruff#19883</a>)?</p>
<p>It would be nice if some of those module resolver tests could be mdtests. I ported some module resolver tests but haven&#x27;t had the time to migrate all, but it would be nice if we can avoid adding new once (unless it uses a mdtest feature that we aren&#x27;t supporting yet)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-08-18 12:45</div>
            <div class="timeline-body"><blockquote>
<p>Can you coordinate with @BurntSushi to make sure partial is also considered for completions (#19883)?</p>
</blockquote>
<p>I added <a href="https://github.com/astral-sh/ty/issues/1042">astral-sh/ty#1042</a> to track this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-18 13:23</div>
            <div class="timeline-body"><p>Oh sure I can make these mdtests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-18 17:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-18 17:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-08-18 17:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:17:44 UTC
    </footer>
</body>
</html>
