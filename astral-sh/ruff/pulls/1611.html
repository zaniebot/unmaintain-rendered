<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Treat convention as setting ignore, rather than select - astral-sh/ruff #1611</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Treat convention as setting ignore, rather than select</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1611">#1611</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-01-04 01:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><p>This PR treats the <code>convention</code> setting as an &quot;ignore&quot; directive, rather than a &quot;select&quot; directive, which leads to confusing settings and behavior.</p>
<p>The new semantics are such that setting a convention force-disables any rules that are incompatible with that convention. (It&#x27;s effectively as-if those rules don&#x27;t exist.) You can then disable further rules via <code>ignore</code> directive.</p>
<p>For example, this would now be a correct and reasonable configuration:</p>
<pre><code>[tool.ruff]
select = [
    &quot;D&quot;,
]
ignore = [
    &quot;D1&quot;,
]

[tool.ruff.pydocstyle]
convention = &quot;google&quot;
</code></pre>
<p>The biggest limitation here is that you <em>can&#x27;t</em> enable rules that aren&#x27;t compatible with the convention, as long as the convention is set. It&#x27;s impossible. So for example, if you used <code>pep257</code> but wanted to enable a few of the checks that <code>pep257</code> excludes by default, you&#x27;d be out of luck. This <em>is</em> a limitation, and I considered a few other models (like letting <code>extend-select</code> override this behavior)... but honestly, it felt like an edge case, and all the other models had their own confusing behaviors. If you find yourself in that position, you can always avoid setting <code>convention</code> and select codes manually.</p>
<p>See the discussion here: #1569. This approach also would&#x27;ve prevented this issue: #1603.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-04 01:35</div>
            <div class="timeline-body"><p>\cc @stinodego - how does this look?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-04 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-04 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-01-04 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stinodego">@stinodego</a> on 2023-01-04 04:33</div>
            <div class="timeline-body"><p>Thanks @charliermarsh ! Exactly what I had in mind.</p>
<p>Regarding the limitation of this approach: I believe this now matches how <code>flake8-docstrings</code> is normally configured. So even though it is a limitation, it will at least be familiar to people coming from <code>flake8</code>. And it&#x27;s easy to work around, by creating your &#x27;own&#x27; convention as a set of ignores. This is what we previous did (and still do now with Ruff) in Polars.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ManonMarchand">@ManonMarchand</a> on 2023-01-04 08:38</div>
            <div class="timeline-body"><p>Perfect, thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:51:43 UTC
    </footer>
</body>
</html>
