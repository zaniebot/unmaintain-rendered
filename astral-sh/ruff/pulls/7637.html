<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Don't suggest replacing `builtin.open()` with `Path.open()` if the latter doesn't support all options - astral-sh/ruff #7637</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Don't suggest replacing <code>builtin.open()</code> with <code>Path.open()</code> if the latter doesn't support all options</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/7637">#7637</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-09-25 08:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2023-09-25 08:28</div>
            <div class="timeline-body"><p><strong>Summary</strong> Check that <code>closefd</code> and <code>opener</code> aren't being used with <code>builtin.open()</code> before suggesting <code>Path.open()</code> because pathlib doesn't support these arguments.</p>
<p>Closes #7620</p>
<p><strong>Test Plan</strong> New cases in the fixture.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @konstin on 2023-09-25 08:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">linter</span> added by @konstin on 2023-09-25 08:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-09-25 08:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff_linter/src/rules/flake8_use_pathlib/rules/replaceable_by_pathlib.rs</code>:108 on 2023-09-25 08:30</div>
            <div class="timeline-body"><p>Do we have a <code>.is_default_value(&quot;closefd&quot;, 6, Constant::Bool(true))</code> helper? If no, should i create one?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2023-09-25 08:37</div>
            <div class="timeline-body"><h2><a href="https://codspeed.io/astral-sh/ruff/branches/fix-gh7620">CodSpeed Performance Report</a></h2>
<h3>Merging #7637 will <strong>improve performances by 8.46%</strong></h3>
<p><sub>Comparing <code>fix-gh7620</code> (b64b4a1) with <code>main</code> (39ddad7)</sub></p>
<h3>Summary</h3>
<p><code>⚡ 5</code> improvements
<code>✅ 20</code> untouched benchmarks</p>
<h3>Benchmarks breakdown</h3>
<p>|     | Benchmark | <code>main</code> | <code>fix-gh7620</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| ⚡ | <code>linter/default-rules[large/dataset.py]</code> | 94.1 ms | 90.7 ms | +3.77% |
| ⚡ | <code>lexer[numpy/ctypeslib.py]</code> | 2 ms | 1.9 ms | +2.55% |
| ⚡ | <code>lexer[unicode/pypinyin.py]</code> | 620.1 µs | 592 µs | +4.74% |
| ⚡ | <code>lexer[large/dataset.py]</code> | 9.8 ms | 9 ms | +8.46% |
| ⚡ | <code>lexer[pydantic/types.py]</code> | 4.1 ms | 4 ms | +3.69% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-09-25 08:55</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>✅ ecosystem check detected no changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rules/flake8_use_pathlib/rules/replaceable_by_pathlib.rs</code>:107 on 2023-09-25 14:11</div>
            <div class="timeline-body"><p>Can these be done with a single match? Like:</p>
<pre><code>matches!(expr, Expr::Constant(ast::ExprConstant { value: Constant::Bool(true), .. }))
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-09-25 14:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-09-25 14:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rules/flake8_use_pathlib/rules/replaceable_by_pathlib.rs</code>:108 on 2023-09-25 14:11</div>
            <div class="timeline-body"><p>I think what you have here is fine personally.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-09-25 14:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-25 14:12</div>
            <div class="timeline-body"><p>Nice, thanks. Does <code>Path.open</code> support all the other kwargs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-09-26 09:00</div>
            <div class="timeline-body"><p>yep, but good reminder to add it to the comment</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2023-09-26 09:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2023-09-26 09:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-09-26 09:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 02:39:47 UTC
    </footer>
</body>
</html>
