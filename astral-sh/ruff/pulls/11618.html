<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upgrade annotation snippet - astral-sh/ruff #11618</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Upgrade annotation snippet</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11618">#11618</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2024-05-30 10:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-05-30 10:38</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>I tried in this PR to upgrade annotation snippet but I hit a blocker because annotation snippet has now become more opinionated. It now prefixes every message with a level and requires a title.
That means, it is no longer possible to have our custom message headers of the form <code>path:row:column [CODE] message</code> and instead it must be <code>error[code]: &lt;title&gt;</code> and it is unclear what message format we want.</p>
<p>TODO:</p>
<ul>
<li>Updated <code>grouped</code> emitter</li>
<li>Decide on new message format</li>
</ul>
<h2>Test Plan</h2>
<p>See updated snapshots</p>
<p>Fixes #10832</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-05-30 10:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/tests/lint.rs</code>:48 on 2024-05-30 10:39</div>
            <div class="timeline-body"><p>It's not clear to me where and how we want to show the file name, location, and fixability</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @MichaReiser on 2024-05-30 10:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-11-26 09:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 20:51:26 UTC
    </footer>
</body>
</html>
