<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[flake8-import-conventions] Add import `numpy.typing as npt` to default `flake8-import-conventions.aliases` - astral-sh/ruff #17133</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[flake8-import-conventions] Add import <code>numpy.typing as npt</code> to default <code>flake8-import-conventions.aliases</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/17133">#17133</a>
        opened by <a href="https://github.com/amin-not-found">@amin-not-found</a>
        on 2025-04-01 20:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/amin-not-found">@amin-not-found</a></div>
            <div class="timeline-body">Summary
<p>Adds import <code>numpy.typing as npt</code> to <code>default in flake8-import-conventions.aliases</code>
Resolves #17028</p>
Test Plan
<p>Manually ran local ruff on the altered fixture and also ran <code>cargo test</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/resources/test/fixtures/flake8_import_conventions/custom.py</code>:40 on 2025-04-01 20:45</div>
            <div class="timeline-body"><p>Is this one supposed to be <code>import numpy.typing as npt</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-04-01 20:52</div>
            <div class="timeline-body"><p>Thanks! This looks good except for one question about the <code>conventional</code> test case.</p>
<p>If you end up changing that, it might be nice to move the new tests to the bottom of the test file too. That will make it much easier to review the changes since it won&#x27;t move any of the other snapshots!</p>
<p>@MichaReiser does this need to be in preview? I think it&#x27;s a new default restriction on the allowed name for the <code>numpy.typing</code> import, but I guess we&#x27;ll see if there are any ecosystem hits.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-01 20:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-04-01 20:59</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amin-not-found">@amin-not-found</a> on 2025-04-01 21:33</div>
            <div class="timeline-body"><blockquote>
<p>Is this one supposed to be <code>import numpy.typing as npt</code>?</p>
</blockquote>
<p>Yes, that&#x27;s right. I forgot to type <code>typing</code> there. It should be fixed now.</p>
<blockquote>
<p>it might be nice to move the new tests to the bottom of the test file too</p>
</blockquote>
<p>I have changed it, but I was trying to keep the structure. Maybe I can reorder the imports by library instead, so that it has some kind of structure that is easy to keep whit new additions? Something like this:</p>
<pre><code>import altair  # unconventional
import altair as altr  # unconventional
import altair as alt  # conventional

import dask.array  # unconventional
import dask.array as darray  # unconventional
...
</code></pre>
<p>Or maybe not if that&#x27;s too much change.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-01 21:39</div>
            <div class="timeline-body"><p>Nice! Yeah it&#x27;s always a tradeoff on keeping the structure or not. I think it&#x27;s okay like you have it now though, without worrying about rearranging the other cases.</p>
<p>Let&#x27;s wait for confirmation on whether this needs to be preview-gated or not, but otherwise this looks good to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> approved on 2025-04-01 21:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amin-not-found">@amin-not-found</a> on 2025-04-01 22:10</div>
            <div class="timeline-body"><p>Yeah I get it and also appreciate your feedback</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-02 07:25</div>
            <div class="timeline-body"><p>I think it&#x27;s fine to ship this as is. I suspect that most numpy users added <code>npt</code> to their convention configuration already and, if not, it only removes the need for some suppression comments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-02 07:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-02 07:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:12:50 UTC
    </footer>
</body>
</html>
