<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rename `checks` and `plugins` to `rules` - astral-sh/ruff #1739</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rename <code>checks</code> and <code>plugins</code> to <code>rules</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1739">#1739</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-01-08 23:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><p>Side note: I think it's useful to maintain the mutating vs. pure distinction in the names, especially given that we've already done the work of separating them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-08 23:20</div>
            <div class="timeline-body"><p>\cc @not-my-profile</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-08 23:20</div>
            <div class="timeline-body"><p>The last major piece is to update the documentation (README and contributing guide), which I'll do last.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-09 03:20</div>
            <div class="timeline-body"><p>As per #1547 I'd rather have <code>ruff::rules::&lt;origin&gt;::&lt;rule&gt;</code> than <code>ruff::&lt;origin&gt;::rules(_mut)</code>. So for example I'd prefer <code>fn line_too_long</code> to be defined in <code>src/rules/pycodestyle/line_too_long.rs</code>.</p>
<p>I don't really see the point of maintaining that distinction in the names.</p>
<blockquote>
<p>especially given that we've already done the work of separating them</p>
</blockquote>
<p>The previous terminology &quot;checks&quot; and &quot;plugins&quot; was so confusing that at least I didn't understand that convention and mistakenly placed <code>banned_attribute_access</code> in <code>flake8_tidy_imports/checks.rs</code>. To be honest I don't think it makes sense to split up the various functions implementing TID251 across different files just because they have different signatures. I believe grouping functions by topic to be more useful and intuitive.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-09 03:37</div>
            <div class="timeline-body"><blockquote>
<p>As per https://github.com/charliermarsh/ruff/issues/1547 I'd rather have ruff::rules::<origin>::<rule> than ruff::<origin>::rules(_mut). So for example I'd prefer fn line_too_long to be defined in src/rules/pycodestyle/line_too_long.rs</p>
</blockquote>
<p>Honestly, I'm unlikely to do this right now. It's useful to have all the functionality for one plugin defined in a single module. If we split the code in that way, then we probably need to make the same change for <code>settings.rs</code>, etc. The current system would even allows us to put each plugin in its own crate.</p>
<p>Separately, I'm unlikely to enforce the requirement that every rule go in its own file. It's just convenient in practice to put multiple small checks in the same file sometimes. And there are a few instances where it's necessary for multiple checks to share an implementation (i.e., if there's shared work, like in detecting duplicate dictionary keys). Maybe we do this eventually, but I don't think it's worth prioritizing right now.</p>
<blockquote>
<p>The previous terminology &quot;checks&quot; and &quot;plugins&quot; was so confusing that at least I didn't understand that convention and mistakenly placed banned_attribute_access in flake8_tidy_imports/checks.rs</p>
</blockquote>
<p>Right, but we're changing the terminology!</p>
<blockquote>
<p>To be honest I don't think it makes sense to split up the various functions implementing TID251 across different files just because they have different signatures. I believe grouping functions by topic to be more useful and intuitive.</p>
</blockquote>
<p>I get this, but it's not just that they have different signatures. It's a fundamentally different API. I think it's useful to know which API a rule is adhering to when you call it. I'm willing to be convinced that this is incorrect, and that we should just drop the distinction.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-09 05:55</div>
            <div class="timeline-body"><blockquote>
<p>To be honest I don't think it makes sense to split up the various functions implementing TID251 across different files just because they have different signatures. I believe grouping functions by topic to be more useful and intuitive.</p>
</blockquote>
<p>I've reflected on this a bit more, and I'm leaning towards dropping the <code>rules</code> vs. <code>rules_mut</code> distinction. The <code>_mut</code> naming convention typically kicks in when you have mutable and non-mutable variants of the same function, which isn't the case here. I think part of my inertia comes from the fact that we already have this distinction, and it's easier to undo it than to reintroduce it. But it's probably not worth the confusion that you're referencing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Rename `checks` and `plugins` to `rules` and `rules_mut`" to "Rename `checks` and `plugins` to `rules`" by @charliermarsh on 2023-01-09 06:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-01-09 06:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-09 06:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-01-09 06:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:55:27 UTC
    </footer>
</body>
</html>
