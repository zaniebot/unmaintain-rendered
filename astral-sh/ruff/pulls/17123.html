<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`airflow`] Update oudated `AIR301`, `AIR302` rules - astral-sh/ruff #17123</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>airflow</code>] Update oudated <code>AIR301</code>, <code>AIR302</code> rules</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/17123">#17123</a>
        opened by <a href="https://github.com/Lee-W">@Lee-W</a>
        on 2025-04-01 15:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-04-01 15:05</div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<!-- What's the purpose of the change? What does it do, and why? -->

<p>Some of the migration rules has been changed during Airflow 3 development. The following are new AIR302 rules. Corresponding AIR301 has also been removed.</p>
<ul>
<li>airflow.sensors.external_task_sensor.ExternalTaskMarker ‚Üí airflow.providers.standard.sensors.external_task.ExternalTaskMarker</li>
<li>airflow.sensors.external_task_sensor.ExternalTaskSensor ‚Üí airflow.providers.standard.sensors.external_task.ExternalTaskSensor</li>
<li>airflow.sensors.external_task_sensor.ExternalTaskSensorLink ‚Üí airflow.providers.standard.sensors.external_task.ExternalTaskSensorLink</li>
<li>airflow.sensors.time_delta_sensor.TimeDeltaSensor ‚Üí airflow.providers.standard.sensors.time_delta.TimeDeltaSensor</li>
<li>airflow.operators.dagrun_operator.TriggerDagRunLink ‚Üí airflow.providers.standard.operators.trigger_dagrun.TriggerDagRunLink</li>
<li>airflow.operators.dagrun_operator.TriggerDagRunOperator ‚Üí airflow.providers.standard.operators.trigger_dagrun.TriggerDagRunOperator</li>
<li>airflow.operators.python_operator.BranchPythonOperator ‚Üí airflow.providers.standard.operators.python.BranchPythonOperator</li>
<li>airflow.operators.python_operator.PythonOperator ‚Üí airflow.providers.standard.operators.python.PythonOperator</li>
<li>airflow.operators.python_operator.PythonVirtualenvOperator ‚Üí airflow.providers.standard.operators.python.PythonVirtualenvOperator</li>
<li>airflow.operators.python_operator.ShortCircuitOperator ‚Üí airflow.providers.standard.operators.python.ShortCircuitOperator</li>
<li>airflow.operators.latest_only_operator.LatestOnlyOperator ‚Üí airflow.providers.standard.operators.latest_only.LatestOnlyOperator</li>
<li>airflow.sensors.date_time_sensor.DateTimeSensor ‚Üí airflow.providers.standard.sensors.DateTimeSensor</li>
<li>airflow.operators.email_operator.EmailOperator ‚Üí airflow.providers.smtp.operators.smtp.EmailOperator</li>
<li>airflow.operators.email.EmailOperator ‚Üí airflow.providers.smtp.operators.smtp.EmailOperator</li>
<li>airflow.operators.bash.BashOperator ‚Üí airflow.providers.standard.operators.bash.BashOperator</li>
<li>airflow.operators.EmptyOperator ‚Üí airflow.providers.standard.operators.empty.EmptyOperator</li>
</ul>
<p>closes: https://github.com/astral-sh/ruff/issues/17103</p>
<h2>Test Plan</h2>
<!-- How was it tested? -->

<p>The test fixture has been updated and checked after each change and later reorganized in the latest commit</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @Lee-W on 2025-04-01 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-04-01 15:11</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>detected linter changes</strong>. (+6 -2 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+6 -2 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/8cba39a954265977e37eff76d2e774632c65066d/airflow-core/tests/unit/utils/test_dot_renderer.py#L103'>airflow-core/tests/unit/utils/test_dot_renderer.py:103:22:</a> AIR302 `airflow.operators.python.PythonOperator` is moved into `standard` provider in Airflow 3.0;
+ <a href='https://github.com/apache/airflow/blob/8cba39a954265977e37eff76d2e774632c65066d/airflow-core/tests/unit/utils/test_dot_renderer.py#L83'>airflow-core/tests/unit/utils/test_dot_renderer.py:83:22:</a> AIR302 `airflow.operators.python.PythonOperator` is moved into `standard` provider in Airflow 3.0;
- <a href='https://github.com/apache/airflow/blob/8cba39a954265977e37eff76d2e774632c65066d/dev/airflow_perf/dags/perf_dag_1.py#L41'>dev/airflow_perf/dags/perf_dag_1.py:41:10:</a> AIR302 Import path `airflow.operators.bash_operator` is moved into `standard` provider in Airflow 3.0;
+ <a href='https://github.com/apache/airflow/blob/8cba39a954265977e37eff76d2e774632c65066d/dev/airflow_perf/dags/perf_dag_1.py#L41'>dev/airflow_perf/dags/perf_dag_1.py:41:10:</a> AIR302 `airflow.operators.bash_operator.BashOperator` is moved into `standard` provider in Airflow 3.0;
- <a href='https://github.com/apache/airflow/blob/8cba39a954265977e37eff76d2e774632c65066d/dev/airflow_perf/dags/perf_dag_1.py#L48'>dev/airflow_perf/dags/perf_dag_1.py:48:12:</a> AIR302 Import path `airflow.operators.bash_operator` is moved into `standard` provider in Airflow 3.0;
+ <a href='https://github.com/apache/airflow/blob/8cba39a954265977e37eff76d2e774632c65066d/dev/airflow_perf/dags/perf_dag_1.py#L48'>dev/airflow_perf/dags/perf_dag_1.py:48:12:</a> AIR302 `airflow.operators.bash_operator.BashOperator` is moved into `standard` provider in Airflow 3.0;
+ <a href='https://github.com/apache/airflow/blob/8cba39a954265977e37eff76d2e774632c65066d/performance/src/performance_dags/performance_dag/performance_dag.py#L111'>performance/src/performance_dags/performance_dag/performance_dag.py:111:13:</a> AIR302 `airflow.operators.python.PythonOperator` is moved into `standard` provider in Airflow 3.0;
+ <a href='https://github.com/apache/airflow/blob/8cba39a954265977e37eff76d2e774632c65066d/providers/ydb/tests/system/ydb/example_ydb.py#L111'>providers/ydb/tests/system/ydb/example_ydb.py:111:23:</a> AIR302 `airflow.operators.python.PythonOperator` is moved into `standard` provider in Airflow 3.0;
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| AIR302 | 8 | 6 | 2 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Update air302 303 rules" to "[airflow] update oudated AIR302, AIR303 rules" by @Lee-W on 2025-04-01 15:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[airflow] update oudated AIR302, AIR303 rules" to "[airflow] update oudated AIR301, AIR302 rules" by @Lee-W on 2025-04-03 02:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @Lee-W on 2025-04-03 02:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-04-03 02:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/moved_to_provider_in_3.rs</code>:174 on 2025-04-03 02:59</div>
            <div class="timeline-body"><p>This is a fixed found during this change</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @ntBre by @ntBre on 2025-04-03 22:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-04-04 12:21</div>
            <div class="timeline-body"><p>@ntBre Would be nice if we can get a quick review on this one üôÇ  Thanks üôè</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-04 12:53</div>
            <div class="timeline-body"><p>Will do! Feel free to ping me or request my review on any of these. There's a chance I could have missed them before taking over from Dhruv. I assigned myself to a few last night :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/airflow/rules/moved_to_provider_in_3.rs</code>:913 on 2025-04-04 16:28</div>
            <div class="timeline-body"><p>Does this need to be <code>rest @ ..</code>? It looks like each of the patterns are just one additional part, so I think it could just be <code>rest</code> and remove the <code>[]</code> braces from the nested <code>match</code> patterns.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/airflow/rules/moved_to_provider_in_3.rs</code>:936 on 2025-04-04 16:28</div>
            <div class="timeline-body"><p>Same as above.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:239 on 2025-04-04 16:29</div>
            <div class="timeline-body"><p>Is this a TODO for later, or should it be handled here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> approved on 2025-04-04 19:27</div>
            <div class="timeline-body"><p>Thanks! Just a few nits/questions</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-04-07 01:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/moved_to_provider_in_3.rs</code>:913 on 2025-04-07 01:44</div>
            <div class="timeline-body"><p>Good catch! Just updated it. Thank!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-04-07 01:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/moved_to_provider_in_3.rs</code>:936 on 2025-04-07 01:44</div>
            <div class="timeline-body"><p>Good catch! Just updated it. Thank!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-04-07 01:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:239 on 2025-04-07 01:45</div>
            <div class="timeline-body"><p>It's actually going to be moved to 312. It was somewhat like a reminder for myself to handle it. but we already have to full list wait for implementing here https://github.com/apache/airflow/issues/48560#issuecomment-2772608006</p>
<p>let me remove this todo</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @ntBre by @Lee-W on 2025-04-07 01:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-04-07 01:47</div>
            <div class="timeline-body"><p>I think this one is ready again. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2025-04-07 06:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @MichaReiser on 2025-04-07 06:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[airflow] update oudated AIR301, AIR302 rules" to "[`airflow`] Update oudated `AIR301`, `AIR302` rules" by @ntBre on 2025-04-07 13:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> approved on 2025-04-07 13:45</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @ntBre on 2025-04-07 13:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-04-07 13:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 19:41:05 UTC
    </footer>
</body>
</html>
