<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>red-knot: Implement the `not` operator for all `Type` variants - astral-sh/ruff #13432</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>red-knot: Implement the <code>not</code> operator for all <code>Type</code> variants</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/13432">#13432</a>
        opened by <a href="https://github.com/haarisr">@haarisr</a>
        on 2024-09-21 00:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/haarisr">@haarisr</a></div>
            <div class="timeline-body">

Summary


<p>Adds unary not operator (not) for integer literals.</p>
<p>Not sure if this is the best way to do it. Feedback would be helpful</p>
<p>Contributes to astral-sh/ty#244</p>
Test Plan


<p>Added new test basing of the test values in the <code>unary sub operator</code>. Small and large value for both positive and negative integers as well as for zero (which is the only True) test case</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/haarisr">@haarisr</a> on 2024-09-21 00:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/haarisr">@haarisr</a> on 2024-09-21 00:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/haarisr">@haarisr</a> on 2024-09-21 00:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-09-21 00:51</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+49 -0 violations, +4 -0 fixes in 7 projects; 47 projects unchanged)</p>
<a href="https://github.com/apache/airflow">apache/airflow</a> (+4 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/apache/airflow/blob/79a8882d2f60eea5d189e07dcbe778b403cc968d/airflow/providers/amazon/aws/secrets/secrets_manager.py#L173">airflow/providers/amazon/aws/secrets/secrets_manager.py:173:29:</a> SIM910 [*] Use `kwargs.get(&quot;profile_name&quot;)` instead of `kwargs.get(&quot;profile_name&quot;, None)`
+ <a href="https://github.com/apache/airflow/blob/79a8882d2f60eea5d189e07dcbe778b403cc968d/airflow/providers/amazon/aws/secrets/systems_manager.py#L107">airflow/providers/amazon/aws/secrets/systems_manager.py:107:29:</a> SIM910 [*] Use `kwargs.get(&quot;profile_name&quot;)` instead of `kwargs.get(&quot;profile_name&quot;, None)`
+ <a href="https://github.com/apache/airflow/blob/79a8882d2f60eea5d189e07dcbe778b403cc968d/tests/conftest.py#L954">tests/conftest.py:954:28:</a> SIM910 [*] Use `kwargs.get(&quot;default_args&quot;)` instead of `kwargs.get(&quot;default_args&quot;, None)`
+ <a href="https://github.com/apache/airflow/blob/79a8882d2f60eea5d189e07dcbe778b403cc968d/tests/providers/elasticsearch/log/elasticmock/utilities/__init__.py#L88">tests/providers/elasticsearch/log/elasticmock/utilities/__init__.py:88:32:</a> SIM910 [*] Use `kwargs.get(&quot;body&quot;)` instead of `kwargs.get(&quot;body&quot;, None)`
</pre>

</p>

<a href="https://github.com/apache/superset">apache/superset</a> (+0 -0 violations, +2 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
- <a href="https://github.com/apache/superset/blob/ad2998598f0802f81815214cc3cc0b9ee9196938/superset/db_engine_specs/presto.py#L650">superset/db_engine_specs/presto.py:650:13:</a> SIM118 Use `key in dict` instead of `key in dict.keys()`
+ <a href="https://github.com/apache/superset/blob/ad2998598f0802f81815214cc3cc0b9ee9196938/superset/db_engine_specs/presto.py#L650">superset/db_engine_specs/presto.py:650:13:</a> SIM118 [*] Use `key in dict` instead of `key in dict.keys()`
</pre>

</p>

<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+2 -0 violations, +2 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_figure.py#L193">src/bokeh/plotting/_figure.py:193:13:</a> SIM118 Use `key in dict` instead of `key in dict.keys()`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_figure.py#L193">src/bokeh/plotting/_figure.py:193:13:</a> SIM118 [*] Use `key in dict` instead of `key in dict.keys()`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/contour.py#L205">src/bokeh/plotting/contour.py:205:17:</a> SIM910 [*] Use `visuals.get(&quot;line_color&quot;)` instead of `visuals.get(&quot;line_color&quot;, None)`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/contour.py#L222">src/bokeh/plotting/contour.py:222:17:</a> SIM910 [*] Use `visuals.get(&quot;fill_color&quot;)` instead of `visuals.get(&quot;fill_color&quot;, None)`
</pre>

</p>

<a href="https://github.com/milvus-io/pymilvus">milvus-io/pymilvus</a> (+37 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/bulk_writer/local_bulk_writer.py#L113">pymilvus/bulk_writer/local_bulk_writer.py:113:21:</a> SIM910 [*] Use `kwargs.get(&quot;call_back&quot;)` instead of `kwargs.get(&quot;call_back&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/asynch.py#L108">pymilvus/client/asynch.py:108:18:</a> SIM910 [*] Use `kwargs.get(&quot;timeout&quot;)` instead of `kwargs.get(&quot;timeout&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L1255">pymilvus/client/grpc_handler.py:1255:23:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L128">pymilvus/client/grpc_handler.py:128:13:</a> SIM910 [*] Use `kwargs.get(&quot;user&quot;)` instead of `kwargs.get(&quot;user&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L129">pymilvus/client/grpc_handler.py:129:13:</a> SIM910 [*] Use `kwargs.get(&quot;password&quot;)` instead of `kwargs.get(&quot;password&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L130">pymilvus/client/grpc_handler.py:130:13:</a> SIM910 [*] Use `kwargs.get(&quot;token&quot;)` instead of `kwargs.get(&quot;token&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L1464">pymilvus/client/grpc_handler.py:1464:23:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L1991">pymilvus/client/grpc_handler.py:1991:23:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L473">pymilvus/client/grpc_handler.py:473:18:</a> SIM910 [*] Use `kwargs.get(&quot;schema&quot;)` instead of `kwargs.get(&quot;schema&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L570">pymilvus/client/grpc_handler.py:570:22:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L602">pymilvus/client/grpc_handler.py:602:28:</a> SIM910 [*] Use `kwargs.get(&quot;param_name&quot;)` instead of `kwargs.get(&quot;param_name&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L607">pymilvus/client/grpc_handler.py:607:22:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L667">pymilvus/client/grpc_handler.py:667:22:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L730">pymilvus/client/grpc_handler.py:730:24:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L749">pymilvus/client/grpc_handler.py:749:24:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L784">pymilvus/client/grpc_handler.py:784:33:</a> SIM910 [*] Use `kwargs.get(&quot;guarantee_timestamp&quot;)` instead of `kwargs.get(&quot;guarantee_timestamp&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L820">pymilvus/client/grpc_handler.py:820:33:</a> SIM910 [*] Use `kwargs.get(&quot;guarantee_timestamp&quot;)` instead of `kwargs.get(&quot;guarantee_timestamp&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L90">pymilvus/client/grpc_handler.py:90:22:</a> SIM910 [*] Use `kwargs.get(&quot;user&quot;)` instead of `kwargs.get(&quot;user&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L92">pymilvus/client/grpc_handler.py:92:36:</a> SIM910 [*] Use `kwargs.get(&quot;db_name&quot;)` instead of `kwargs.get(&quot;db_name&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L980">pymilvus/client/grpc_handler.py:980:23:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L1052">pymilvus/client/prepare.py:1052:17:</a> SIM910 [*] Use `kwargs.get(&quot;limit&quot;)` instead of `kwargs.get(&quot;limit&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L1056">pymilvus/client/prepare.py:1056:18:</a> SIM910 [*] Use `kwargs.get(&quot;offset&quot;)` instead of `kwargs.get(&quot;offset&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L1135">pymilvus/client/prepare.py:1135:25:</a> SIM910 [*] Use `kwargs.get(&quot;channel_names&quot;)` instead of `kwargs.get(&quot;channel_names&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L813">pymilvus/client/prepare.py:813:12:</a> SIM910 [*] Use `kwargs.get(RANK_GROUP_SCORER)` instead of `kwargs.get(RANK_GROUP_SCORER, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L822">pymilvus/client/prepare.py:822:12:</a> SIM910 [*] Use `kwargs.get(GROUP_BY_FIELD)` instead of `kwargs.get(GROUP_BY_FIELD, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L831">pymilvus/client/prepare.py:831:12:</a> SIM910 [*] Use `kwargs.get(GROUP_SIZE)` instead of `kwargs.get(GROUP_SIZE, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L840">pymilvus/client/prepare.py:840:12:</a> SIM910 [*] Use `kwargs.get(GROUP_STRICT_SIZE)` instead of `kwargs.get(GROUP_STRICT_SIZE, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L92">pymilvus/client/prepare.py:92:26:</a> SIM910 [*] Use `kwargs.get(&quot;num_partitions&quot;)` instead of `kwargs.get(&quot;num_partitions&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/decorators.py#L170">pymilvus/decorators.py:170:21:</a> SIM910 [*] Use `kwargs.get(&quot;log_level&quot;)` instead of `kwargs.get(&quot;log_level&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/decorators.py#L171">pymilvus/decorators.py:171:22:</a> SIM910 [*] Use `kwargs.get(&quot;client_request_id&quot;)` instead of `kwargs.get(&quot;client_request_id&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/decorators.py#L56">pymilvus/decorators.py:56:24:</a> SIM910 [*] Use `kwargs.get(&quot;timeout&quot;)` instead of `kwargs.get(&quot;timeout&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/decorators.py#L57">pymilvus/decorators.py:57:28:</a> SIM910 [*] Use `kwargs.get(&quot;retry_times&quot;)` instead of `kwargs.get(&quot;retry_times&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/orm/collection.py#L188">pymilvus/orm/collection.py:188:51:</a> SIM910 [*] Use `kwargs.get(&quot;auto_id&quot;)` instead of `kwargs.get(&quot;auto_id&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/orm/schema.py#L324">pymilvus/orm/schema.py:324:30:</a> SIM910 [*] Use `kwargs.get(&quot;default_value&quot;)` instead of `kwargs.get(&quot;default_value&quot;, None)`
... 3 additional changes omitted for project
</pre>

</p>

<a href="https://github.com/mlflow/mlflow">mlflow/mlflow</a> (+2 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/mlflow/mlflow/blob/7eaffb05e7cc3b6a0a256e08d9118c71a3b31ffa/mlflow/openai/_openai_autolog.py#L203">mlflow/openai/_openai_autolog.py:203:25:</a> SIM910 [*] Use `kwargs.get(&quot;model&quot;)` instead of `kwargs.get(&quot;model&quot;, None)`
+ <a href="https://github.com/mlflow/mlflow/blob/7eaffb05e7cc3b6a0a256e08d9118c71a3b31ffa/mlflow/pytorch/_pytorch_autolog.py#L52">mlflow/pytorch/_pytorch_autolog.py:52:53:</a> SIM910 [*] Use `kwargs.get(&quot;global_step&quot;)` instead of `kwargs.get(&quot;global_step&quot;, None)`
</pre>

</p>

<a href="https://github.com/reflex-dev/reflex">reflex-dev/reflex</a> (+2 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/reflex-dev/reflex/blob/e1538b75f8ab5639fe609176e9c26ae218e35485/reflex/components/datadisplay/dataeditor.py#L332">reflex/components/datadisplay/dataeditor.py:332:16:</a> SIM910 [*] Use `props.get(&quot;rows&quot;)` instead of `props.get(&quot;rows&quot;, None)`
+ <a href="https://github.com/reflex-dev/reflex/blob/e1538b75f8ab5639fe609176e9c26ae218e35485/reflex/vars/base.py#L242">reflex/vars/base.py:242:24:</a> SIM910 [*] Use `kwargs.get(&quot;_js_expr&quot;)` instead of `kwargs.get(&quot;_js_expr&quot;, None)`
</pre>

</p>

<a href="https://github.com/zulip/zulip">zulip/zulip</a> (+2 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/zulip/zulip/blob/b0ca32c95525f8056985a9ccf9c901be28e8256e/corporate/tests/test_stripe.py#L652">corporate/tests/test_stripe.py:652:41:</a> SIM910 [*] Use `kwargs.get(&quot;remote_server_plan_start_date&quot;)` instead of `kwargs.get(&quot;remote_server_plan_start_date&quot;, None)`
+ <a href="https://github.com/zulip/zulip/blob/b0ca32c95525f8056985a9ccf9c901be28e8256e/zerver/lib/test_classes.py#L1897">zerver/lib/test_classes.py:1897:37:</a> SIM910 [*] Use `kwargs.get(&quot;mentioned_user_group_id&quot;)` instead of `kwargs.get(&quot;mentioned_user_group_id&quot;, None)`
</pre>

</p>

Changes by rule (2 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| SIM910 | 49 | 49 | 0 | 0 | 0 |
| SIM118 | 4 | 0 | 0 | 4 | 0 |</p>
</p>


Linter (preview)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+49 -0 violations, +4 -0 fixes in 7 projects; 47 projects unchanged)</p>
<a href="https://github.com/apache/airflow">apache/airflow</a> (+4 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/apache/airflow/blob/79a8882d2f60eea5d189e07dcbe778b403cc968d/airflow/providers/amazon/aws/secrets/secrets_manager.py#L173">airflow/providers/amazon/aws/secrets/secrets_manager.py:173:29:</a> SIM910 [*] Use `kwargs.get(&quot;profile_name&quot;)` instead of `kwargs.get(&quot;profile_name&quot;, None)`
+ <a href="https://github.com/apache/airflow/blob/79a8882d2f60eea5d189e07dcbe778b403cc968d/airflow/providers/amazon/aws/secrets/systems_manager.py#L107">airflow/providers/amazon/aws/secrets/systems_manager.py:107:29:</a> SIM910 [*] Use `kwargs.get(&quot;profile_name&quot;)` instead of `kwargs.get(&quot;profile_name&quot;, None)`
+ <a href="https://github.com/apache/airflow/blob/79a8882d2f60eea5d189e07dcbe778b403cc968d/tests/conftest.py#L954">tests/conftest.py:954:28:</a> SIM910 [*] Use `kwargs.get(&quot;default_args&quot;)` instead of `kwargs.get(&quot;default_args&quot;, None)`
+ <a href="https://github.com/apache/airflow/blob/79a8882d2f60eea5d189e07dcbe778b403cc968d/tests/providers/elasticsearch/log/elasticmock/utilities/__init__.py#L88">tests/providers/elasticsearch/log/elasticmock/utilities/__init__.py:88:32:</a> SIM910 [*] Use `kwargs.get(&quot;body&quot;)` instead of `kwargs.get(&quot;body&quot;, None)`
</pre>

</p>

<a href="https://github.com/apache/superset">apache/superset</a> (+0 -0 violations, +2 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href="https://github.com/apache/superset/blob/ad2998598f0802f81815214cc3cc0b9ee9196938/superset/db_engine_specs/presto.py#L650">superset/db_engine_specs/presto.py:650:13:</a> SIM118 Use `key in dict` instead of `key in dict.keys()`
+ <a href="https://github.com/apache/superset/blob/ad2998598f0802f81815214cc3cc0b9ee9196938/superset/db_engine_specs/presto.py#L650">superset/db_engine_specs/presto.py:650:13:</a> SIM118 [*] Use `key in dict` instead of `key in dict.keys()`
</pre>

</p>

<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+2 -0 violations, +2 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_figure.py#L193">src/bokeh/plotting/_figure.py:193:13:</a> SIM118 Use `key in dict` instead of `key in dict.keys()`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_figure.py#L193">src/bokeh/plotting/_figure.py:193:13:</a> SIM118 [*] Use `key in dict` instead of `key in dict.keys()`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/contour.py#L205">src/bokeh/plotting/contour.py:205:17:</a> SIM910 [*] Use `visuals.get(&quot;line_color&quot;)` instead of `visuals.get(&quot;line_color&quot;, None)`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/contour.py#L222">src/bokeh/plotting/contour.py:222:17:</a> SIM910 [*] Use `visuals.get(&quot;fill_color&quot;)` instead of `visuals.get(&quot;fill_color&quot;, None)`
</pre>

</p>

<a href="https://github.com/milvus-io/pymilvus">milvus-io/pymilvus</a> (+37 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/bulk_writer/local_bulk_writer.py#L113">pymilvus/bulk_writer/local_bulk_writer.py:113:21:</a> SIM910 [*] Use `kwargs.get(&quot;call_back&quot;)` instead of `kwargs.get(&quot;call_back&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/asynch.py#L108">pymilvus/client/asynch.py:108:18:</a> SIM910 [*] Use `kwargs.get(&quot;timeout&quot;)` instead of `kwargs.get(&quot;timeout&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L1255">pymilvus/client/grpc_handler.py:1255:23:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L128">pymilvus/client/grpc_handler.py:128:13:</a> SIM910 [*] Use `kwargs.get(&quot;user&quot;)` instead of `kwargs.get(&quot;user&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L129">pymilvus/client/grpc_handler.py:129:13:</a> SIM910 [*] Use `kwargs.get(&quot;password&quot;)` instead of `kwargs.get(&quot;password&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L130">pymilvus/client/grpc_handler.py:130:13:</a> SIM910 [*] Use `kwargs.get(&quot;token&quot;)` instead of `kwargs.get(&quot;token&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L1464">pymilvus/client/grpc_handler.py:1464:23:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L1991">pymilvus/client/grpc_handler.py:1991:23:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L473">pymilvus/client/grpc_handler.py:473:18:</a> SIM910 [*] Use `kwargs.get(&quot;schema&quot;)` instead of `kwargs.get(&quot;schema&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L570">pymilvus/client/grpc_handler.py:570:22:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L602">pymilvus/client/grpc_handler.py:602:28:</a> SIM910 [*] Use `kwargs.get(&quot;param_name&quot;)` instead of `kwargs.get(&quot;param_name&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L607">pymilvus/client/grpc_handler.py:607:22:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L667">pymilvus/client/grpc_handler.py:667:22:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L730">pymilvus/client/grpc_handler.py:730:24:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L749">pymilvus/client/grpc_handler.py:749:24:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L784">pymilvus/client/grpc_handler.py:784:33:</a> SIM910 [*] Use `kwargs.get(&quot;guarantee_timestamp&quot;)` instead of `kwargs.get(&quot;guarantee_timestamp&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L820">pymilvus/client/grpc_handler.py:820:33:</a> SIM910 [*] Use `kwargs.get(&quot;guarantee_timestamp&quot;)` instead of `kwargs.get(&quot;guarantee_timestamp&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L90">pymilvus/client/grpc_handler.py:90:22:</a> SIM910 [*] Use `kwargs.get(&quot;user&quot;)` instead of `kwargs.get(&quot;user&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L92">pymilvus/client/grpc_handler.py:92:36:</a> SIM910 [*] Use `kwargs.get(&quot;db_name&quot;)` instead of `kwargs.get(&quot;db_name&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/grpc_handler.py#L980">pymilvus/client/grpc_handler.py:980:23:</a> SIM910 [*] Use `kwargs.get(&quot;_callback&quot;)` instead of `kwargs.get(&quot;_callback&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L1052">pymilvus/client/prepare.py:1052:17:</a> SIM910 [*] Use `kwargs.get(&quot;limit&quot;)` instead of `kwargs.get(&quot;limit&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L1056">pymilvus/client/prepare.py:1056:18:</a> SIM910 [*] Use `kwargs.get(&quot;offset&quot;)` instead of `kwargs.get(&quot;offset&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L1135">pymilvus/client/prepare.py:1135:25:</a> SIM910 [*] Use `kwargs.get(&quot;channel_names&quot;)` instead of `kwargs.get(&quot;channel_names&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L813">pymilvus/client/prepare.py:813:12:</a> SIM910 [*] Use `kwargs.get(RANK_GROUP_SCORER)` instead of `kwargs.get(RANK_GROUP_SCORER, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L822">pymilvus/client/prepare.py:822:12:</a> SIM910 [*] Use `kwargs.get(GROUP_BY_FIELD)` instead of `kwargs.get(GROUP_BY_FIELD, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L831">pymilvus/client/prepare.py:831:12:</a> SIM910 [*] Use `kwargs.get(GROUP_SIZE)` instead of `kwargs.get(GROUP_SIZE, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L840">pymilvus/client/prepare.py:840:12:</a> SIM910 [*] Use `kwargs.get(GROUP_STRICT_SIZE)` instead of `kwargs.get(GROUP_STRICT_SIZE, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/client/prepare.py#L92">pymilvus/client/prepare.py:92:26:</a> SIM910 [*] Use `kwargs.get(&quot;num_partitions&quot;)` instead of `kwargs.get(&quot;num_partitions&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/decorators.py#L170">pymilvus/decorators.py:170:21:</a> SIM910 [*] Use `kwargs.get(&quot;log_level&quot;)` instead of `kwargs.get(&quot;log_level&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/decorators.py#L171">pymilvus/decorators.py:171:22:</a> SIM910 [*] Use `kwargs.get(&quot;client_request_id&quot;)` instead of `kwargs.get(&quot;client_request_id&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/decorators.py#L56">pymilvus/decorators.py:56:24:</a> SIM910 [*] Use `kwargs.get(&quot;timeout&quot;)` instead of `kwargs.get(&quot;timeout&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/decorators.py#L57">pymilvus/decorators.py:57:28:</a> SIM910 [*] Use `kwargs.get(&quot;retry_times&quot;)` instead of `kwargs.get(&quot;retry_times&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/orm/collection.py#L188">pymilvus/orm/collection.py:188:51:</a> SIM910 [*] Use `kwargs.get(&quot;auto_id&quot;)` instead of `kwargs.get(&quot;auto_id&quot;, None)`
+ <a href="https://github.com/milvus-io/pymilvus/blob/da51ba14edde3c67b682f2d0ae1b85a095815692/pymilvus/orm/schema.py#L324">pymilvus/orm/schema.py:324:30:</a> SIM910 [*] Use `kwargs.get(&quot;default_value&quot;)` instead of `kwargs.get(&quot;default_value&quot;, None)`
... 3 additional changes omitted for project
</pre>

</p>

<a href="https://github.com/mlflow/mlflow">mlflow/mlflow</a> (+2 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/mlflow/mlflow/blob/7eaffb05e7cc3b6a0a256e08d9118c71a3b31ffa/mlflow/openai/_openai_autolog.py#L203">mlflow/openai/_openai_autolog.py:203:25:</a> SIM910 [*] Use `kwargs.get(&quot;model&quot;)` instead of `kwargs.get(&quot;model&quot;, None)`
+ <a href="https://github.com/mlflow/mlflow/blob/7eaffb05e7cc3b6a0a256e08d9118c71a3b31ffa/mlflow/pytorch/_pytorch_autolog.py#L52">mlflow/pytorch/_pytorch_autolog.py:52:53:</a> SIM910 [*] Use `kwargs.get(&quot;global_step&quot;)` instead of `kwargs.get(&quot;global_step&quot;, None)`
</pre>

</p>

<a href="https://github.com/reflex-dev/reflex">reflex-dev/reflex</a> (+2 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/reflex-dev/reflex/blob/e1538b75f8ab5639fe609176e9c26ae218e35485/reflex/components/datadisplay/dataeditor.py#L332">reflex/components/datadisplay/dataeditor.py:332:16:</a> SIM910 [*] Use `props.get(&quot;rows&quot;)` instead of `props.get(&quot;rows&quot;, None)`
+ <a href="https://github.com/reflex-dev/reflex/blob/e1538b75f8ab5639fe609176e9c26ae218e35485/reflex/vars/base.py#L242">reflex/vars/base.py:242:24:</a> SIM910 [*] Use `kwargs.get(&quot;_js_expr&quot;)` instead of `kwargs.get(&quot;_js_expr&quot;, None)`
</pre>

</p>

<a href="https://github.com/zulip/zulip">zulip/zulip</a> (+2 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/zulip/zulip/blob/b0ca32c95525f8056985a9ccf9c901be28e8256e/corporate/tests/test_stripe.py#L652">corporate/tests/test_stripe.py:652:41:</a> SIM910 [*] Use `kwargs.get(&quot;remote_server_plan_start_date&quot;)` instead of `kwargs.get(&quot;remote_server_plan_start_date&quot;, None)`
+ <a href="https://github.com/zulip/zulip/blob/b0ca32c95525f8056985a9ccf9c901be28e8256e/zerver/lib/test_classes.py#L1897">zerver/lib/test_classes.py:1897:37:</a> SIM910 [*] Use `kwargs.get(&quot;mentioned_user_group_id&quot;)` instead of `kwargs.get(&quot;mentioned_user_group_id&quot;, None)`
</pre>

</p>

Changes by rule (2 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| SIM910 | 49 | 49 | 0 | 0 | 0 |
| SIM118 | 4 | 0 | 0 | 4 | 0 |</p>
</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/red_knot_python_semantic/src/types/infer.rs</code>:2218 on 2024-09-21 04:07</div>
            <div class="timeline-body"><p>you can simplify this slightly:</p>
<pre><code>            (UnaryOp::Not, Type::IntLiteral(value)) =&gt; Type::BooleanLiteral(value == 0),
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2024-09-21 04:11</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2024-09-21 04:26</div>
            <div class="timeline-body"><p>Thank you!</p>
<p>I think for these other types what we should do is create a <code>Type::bool</code> method (corresponding to the <code>__bool__</code> magic method at runtime) that returns either BooleanLiteral (for those types whose Boolean value is statically known) or the <code>bool</code> builtin type. And then unary Not operator on most types will just call <code>bool</code> on the type and reverse it (if it&#x27;s a BooleanLiteral.) Because we&#x27;ll have other needs for the bool method outside unary Not.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-09-25 00:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> requested changes on 2024-09-25 00:33</div>
            <div class="timeline-body"><p>Following <a href="https://github.com/astral-sh/ruff/pull/13449">astral-sh/ruff#13449</a> being merged, if you rebase this PR on <code>main</code> I think you can simplify this PR like so:</p>
<pre><code>diff --git a/crates/red_knot_python_semantic/src/types.rs b/crates/red_knot_python_semantic/src/types.rs
index d388fa8b2..33a22a378 100644
--- a/crates/red_knot_python_semantic/src/types.rs
+++ b/crates/red_knot_python_semantic/src/types.rs
@@ -936,7 +936,6 @@ impl Truthiness {
         matches!(self, Truthiness::Ambiguous)
     }
 
-    #[allow(unused)]
     const fn negate(self) -&gt; Self {
         match self {
             Self::AlwaysTrue =&gt; Self::AlwaysFalse,
@@ -945,7 +944,6 @@ impl Truthiness {
         }
     }
 
-    #[allow(unused)]
     fn into_type(self, db: &amp;dyn Db) -&gt; Type {
         match self {
             Self::AlwaysTrue =&gt; Type::BooleanLiteral(true),
diff --git a/crates/red_knot_python_semantic/src/types/infer.rs b/crates/red_knot_python_semantic/src/types/infer.rs
index 23ad71f3c..9b8362000 100644
--- a/crates/red_knot_python_semantic/src/types/infer.rs
+++ b/crates/red_knot_python_semantic/src/types/infer.rs
@@ -2210,11 +2210,7 @@ impl&lt;&#x27;db&gt; TypeInferenceBuilder&lt;&#x27;db&gt; {
 
         match (op, self.infer_expression(operand)) {
             (UnaryOp::USub, Type::IntLiteral(value)) =&gt; Type::IntLiteral(-value),
-            (UnaryOp::Not, Type::BooleanLiteral(value)) =&gt; Type::BooleanLiteral(!value),
-            (UnaryOp::Not, Type::IntLiteral(value)) =&gt; match value {
-                0 =&gt; Type::BooleanLiteral(true),
-                _ =&gt; Type::BooleanLiteral(false),
-            },
+            (UnaryOp::Not, ty) =&gt; ty.bool(self.db).negate().into_type(self.db),
             _ =&gt; Type::Unknown, // TODO other unary op types
         }
     }
</code></pre>
<p>but we&#x27;ll also want to add a fair few tests, because we&#x27;ll now be implementing <code>not</code> for <em>all</em> variants of <code>Type</code> rather than just one ;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/haarisr">@haarisr</a> on <code>crates/red_knot_python_semantic/src/types/infer.rs</code>:3198 on 2024-09-25 04:38</div>
            <div class="timeline-body"><p>The test for <code>b</code> fails. Not sure why the returned type is <code>bool</code>. Any help here would be appreciated</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/haarisr">@haarisr</a> reviewed on 2024-09-25 04:40</div>
            <div class="timeline-body"><p>Did most of the types that I could.</p>
<p>Would like help on tests for <code>Type::Any | Type::Never | Type::Unknown | Type::Unbound</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/haarisr">@haarisr</a> on 2024-09-25 04:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/haarisr">@haarisr</a> on 2024-09-25 04:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;red-knot: Add not unary operator for integer literals&quot; to &quot;red-knot: Implement the `not` operator for all `Type` variants&quot; by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-09-25 04:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/src/types/infer.rs</code>:3198 on 2024-09-25 18:45</div>
            <div class="timeline-body"><p>The problem here is that <code>reveal_type</code> is only conditionally defined in <code>typing.pyi</code> (by version, and we don&#x27;t yet support special handling of <code>sys.version_info</code> checks), so the type of <code>typing.reveal_type</code> is thus <code>Unknown | Literal[reveal_type]</code>, and the <code>Unknown</code> constituent has <code>Truthiness::Ambiguous</code>.</p>
<p>Tbh I&#x27;m not sure this behavior of adding <code>Unknown</code> to the type is correct; if we can see that in one path a name simply doesn&#x27;t exist, we might want to issue a diagnostic, but it doesn&#x27;t make sense to add <code>Unknown</code> to the union; it&#x27;s not like there might be some other random definition of the name we don&#x27;t know about (ok, yes, technically there could be something dynamic happening with the global namespace that we don&#x27;t know about, but that&#x27;s always true and not especially relevant here). Either you&#x27;ll get the name imported, or you&#x27;ll get an error, you won&#x27;t get some random other type.</p>
<p>Anyway, that&#x27;s all for resolution in a different PR. I think the right answer here for now is just a TODO comment:</p>
<pre><code>            b = not reveal_type
            &quot;#,
        )?;

        assert_public_ty(&amp;db, &quot;src/a.py&quot;, &quot;a&quot;, &quot;Literal[False]&quot;);
        // TODO Unknown should not be part of the type of typing.reveal_type
        // assert_public_ty(&amp;db, &quot;src/a.py&quot;, &quot;b&quot;, &quot;Literal[False]&quot;);
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2024-09-25 19:01</div>
            <div class="timeline-body"><p>Looks good to me! Just needs the failing test assertion commented out for now, with TODO comment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> approved on 2024-09-25 20:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/carljm">@carljm</a> on 2024-09-25 20:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/carljm">@carljm</a> on 2024-09-25 20:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:06:53 UTC
    </footer>
</body>
</html>
