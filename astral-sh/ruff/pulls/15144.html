<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`airflow`] Update `AIR302` to check for deprecated context keys - astral-sh/ruff #15144</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>airflow</code>] Update <code>AIR302</code> to check for deprecated context keys</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/15144">#15144</a>
        opened by <a href="https://github.com/sunank200">@sunank200</a>
        on 2024-12-26 08:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/sunank200">@sunank200</a> on 2024-12-26 08:14</div>
            <div class="timeline-body"><p><strong>Summary</strong></p>
<p>Airflow 3.0 removes a set of deprecated context variables that were phased out in 2.x. This PR introduces lint rules to detect usage of these removed variables in various patterns, helping identify incompatibilities. The removed context variables include:</p>
<pre><code>conf
execution_date
next_ds
next_ds_nodash
next_execution_date
prev_ds
prev_ds_nodash
prev_execution_date
prev_execution_date_success
tomorrow_ds
yesterday_ds
yesterday_ds_nodash
</code></pre>
<p><strong>Detected Patterns and Examples</strong></p>
<p>The linter now flags the use of removed context variables in the following scenarios:</p>
<ol>
<li><p><strong>Direct Subscript Access</strong></p>
<pre><code class="language-python">execution_date = context[&quot;execution_date&quot;]  # Flagged
</code></pre>
</li>
<li><p><strong><code>.get(&quot;key&quot;)</code> Method Calls</strong></p>
<pre><code class="language-python">print(context.get(&quot;execution_date&quot;))  # Flagged
</code></pre>
</li>
<li><p><strong>Variables Assigned from <code>get_current_context()</code></strong><br />
If a variable is assigned from <code>get_current_context()</code> and then used to access a removed key:</p>
<pre><code class="language-python">c = get_current_context()
print(c.get(&quot;execution_date&quot;))  # Flagged
</code></pre>
</li>
<li><p><strong>Function Parameters in <code>@task</code>-Decorated Functions</strong><br />
Parameters named after removed context variables in functions decorated with <code>@task</code> are flagged:</p>
<pre><code class="language-python">from airflow.decorators import task

@task
def my_task(execution_date, **kwargs):  # Parameter 'execution_date' flagged
    pass
</code></pre>
</li>
<li><p><strong>Removed Keys in Task Decorator <code>kwargs</code> and Other Scenarios</strong><br />
Other similar patterns where removed context variables appear (e.g., as part of <code>kwargs</code> in a <code>@task</code> function) are also detected.</p>
</li>
</ol>
<pre><code>from airflow.decorators import task

@task
def process_with_execution_date(**context):
    execution_date = lambda: context[&quot;execution_date&quot;]  # flagged
    print(execution_date)

@task(kwargs={&quot;execution_date&quot;: &quot;2021-01-01&quot;})   # flagged
def task_with_kwargs(**context):  
    pass
</code></pre>
<p><strong>Test Plan</strong></p>
<p>Test fixtures covering various patterns of deprecated context usage are included in this PR. For example:</p>
<pre><code class="language-python">from airflow.decorators import task, dag, get_current_context
from airflow.models import DAG
from airflow.operators.dummy import DummyOperator
import pendulum
from datetime import datetime

@task
def access_invalid_key_task(**context):
    print(context.get(&quot;conf&quot;))  # 'conf' flagged

@task
def print_config(**context):
    execution_date = context[&quot;execution_date&quot;]  # Flagged
    prev_ds = context[&quot;prev_ds&quot;]                # Flagged

@task
def from_current_context():
    context = get_current_context()
    print(context[&quot;execution_date&quot;])            # Flagged

# Usage outside of a task decorated function
c = get_current_context()
print(c.get(&quot;execution_date&quot;))                 # Flagged

@task
def some_task(execution_date, **kwargs):
    print(&quot;execution date&quot;, execution_date)     # Parameter flagged

@dag(
    start_date=pendulum.datetime(2021, 1, 1, tz=&quot;UTC&quot;)
)
def my_dag():
    task1 = DummyOperator(
        task_id=&quot;task1&quot;,
        params={
            &quot;execution_date&quot;: &quot;{{ execution_date }}&quot;,  # Flagged in template context
        },
    )

    access_invalid_key_task()
    print_config()
    from_current_context()
    
dag = my_dag()

class CustomOperator(BaseOperator):
    def execute(self, context):
        execution_date = context.get(&quot;execution_date&quot;)                      # Flagged
        next_ds = context.get(&quot;next_ds&quot;)                                               # Flagged
        next_execution_date = context[&quot;next_execution_date&quot;]          # Flagged
</code></pre>
<p>Ruff will emit <code>AIR302</code> diagnostics for each deprecated usage, with suggestions when applicable, aiding in code migration to Airflow 3.0.</p>
<p>related: https://github.com/apache/airflow/issues/44409, https://github.com/apache/airflow/issues/41641</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-12-26 08:20</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>detected linter changes</strong>. (+2 -2 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/superset">apache/superset</a> (+2 -2 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/superset/blob/6d117ffbb564f611df21fcb9a19c15b9567f35d9/tests/integration_tests/charts/schema_tests.py#L59'>tests/integration_tests/charts/schema_tests.py:59:9:</a> ANN201 Missing return type annotation for public function `test_query_context_series_limit`
- <a href='https://github.com/apache/superset/blob/6d117ffbb564f611df21fcb9a19c15b9567f35d9/tests/integration_tests/charts/schema_tests.py#L59'>tests/integration_tests/charts/schema_tests.py:59:9:</a> ANN201 Missing return type annotation for public function `test_query_context_series_limit`
+ <a href='https://github.com/apache/superset/blob/6d117ffbb564f611df21fcb9a19c15b9567f35d9/tests/integration_tests/viz_tests.py#L739'>tests/integration_tests/viz_tests.py:739:9:</a> ANN201 Missing return type annotation for public function `test_filter_nulls`
- <a href='https://github.com/apache/superset/blob/6d117ffbb564f611df21fcb9a19c15b9567f35d9/tests/integration_tests/viz_tests.py#L739'>tests/integration_tests/viz_tests.py:739:9:</a> ANN201 Missing return type annotation for public function `test_filter_nulls`
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| ANN201 | 4 | 2 | 2 | 0 | 0 |</p>
</p>
</details>

<h3>Linter (preview)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>detected linter changes</strong>. (+4 -3 violations, +0 -0 fixes in 2 projects; 53 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/7a28f29842e4fa103466e8b49b2986389862f486/providers/tests/system/papermill/example_papermill_remote_verify.py#L44'>providers/tests/system/papermill/example_papermill_remote_verify.py:44:37:</a> AIR302 `execution_date` is removed in Airflow 3.0
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/superset">apache/superset</a> (+3 -3 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/apache/superset/blob/6d117ffbb564f611df21fcb9a19c15b9567f35d9/tests/integration_tests/charts/schema_tests.py#L59'>tests/integration_tests/charts/schema_tests.py:59:9:</a> PLR6301 Method `test_query_context_series_limit` could be a function, class method, or static method
+ <a href='https://github.com/apache/superset/blob/6d117ffbb564f611df21fcb9a19c15b9567f35d9/tests/integration_tests/charts/schema_tests.py#L59'>tests/integration_tests/charts/schema_tests.py:59:9:</a> PLR6301 Method `test_query_context_series_limit` could be a function, class method, or static method
- <a href='https://github.com/apache/superset/blob/6d117ffbb564f611df21fcb9a19c15b9567f35d9/tests/integration_tests/model_tests.py#L202'>tests/integration_tests/model_tests.py:202:9:</a> PLR6301 Method `test_adjust_engine_params_mysql` could be a function, class method, or static method
+ <a href='https://github.com/apache/superset/blob/6d117ffbb564f611df21fcb9a19c15b9567f35d9/tests/integration_tests/model_tests.py#L202'>tests/integration_tests/model_tests.py:202:9:</a> PLR6301 Method `test_adjust_engine_params_mysql` could be a function, class method, or static method
+ <a href='https://github.com/apache/superset/blob/6d117ffbb564f611df21fcb9a19c15b9567f35d9/tests/integration_tests/viz_tests.py#L899'>tests/integration_tests/viz_tests.py:899:9:</a> ANN201 Missing return type annotation for public function `test_apply_rolling_without_data`
- <a href='https://github.com/apache/superset/blob/6d117ffbb564f611df21fcb9a19c15b9567f35d9/tests/integration_tests/viz_tests.py#L899'>tests/integration_tests/viz_tests.py:899:9:</a> ANN201 Missing return type annotation for public function `test_apply_rolling_without_data`
</pre>

</p>
</details>
<details><summary>Changes by rule (3 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PLR6301 | 4 | 2 | 2 | 0 | 0 |
| ANN201 | 2 | 1 | 1 | 0 | 0 |
| AIR302 | 1 | 1 | 0 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:5 on 2024-12-26 08:48</div>
            <div class="timeline-body"><p>I'm not sure whether we really need to change the code to just add <code>Airflow context</code> here ü§î we probably could just use message</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/uranusjr">@uranusjr</a> reviewed on 2024-12-26 08:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/uranusjr">@uranusjr</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:58 on 2024-12-26 08:48</div>
            <div class="timeline-body"><p>Instead of an additional flag, it may make more sense to make this a separate case in the Replacement enum.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/uranusjr">@uranusjr</a> reviewed on 2024-12-26 08:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/uranusjr">@uranusjr</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:42 on 2024-12-26 08:51</div>
            <div class="timeline-body"><p>There are some more things we should check</p>
<ol>
<li>Named keyword arguments (e.g. <code>def print_config(execution_date)</code>)</li>
<li>Getting the context with <code>get_current_context</code> instead of function arguments.</li>
<li><code>context</code> in an operator‚Äôs <code>execute</code>.</li>
</ol>
<p>These can be added in separate PRs instead after this is merged.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:44 on 2024-12-26 08:52</div>
            <div class="timeline-body"><p>@sunank200 and I discussed this earlier. What we're trying to check is whether there's a variable named as <code>context</code> in a function (most commonly seen in taskflow and python operator) and whether it's can be accessed like a dict with the keys we want to check. I think it's unlikely users are using something like this out of the airflow context. But would like to know whether there's any concern</p>
<p>@MichaReiser @uranusjr</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/kaxil">@kaxil</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:675 on 2024-12-26 08:52</div>
            <div class="timeline-body"><p>&quot;conf&quot; had also been removed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kaxil">@kaxil</a> reviewed on 2024-12-26 08:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:45 on 2024-12-26 08:54</div>
            <div class="timeline-body"><p>@sunank200 I just think of there're other ways to access the context value like https://airflow.apache.org/docs/apache-airflow/stable/templates-ref.html#accessing-airflow-context-variables-from-taskflow-tasks. Do you think we should check it as well?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2024-12-26 08:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2024-12-26 08:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:675 on 2024-12-26 08:57</div>
            <div class="timeline-body"><p>It's tracked in https://github.com/apache/airflow/issues/45212, but yep, we could do it here as well</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2024-12-26 08:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:675 on 2024-12-26 08:59</div>
            <div class="timeline-body"><p>If we want to add <code>conf</code> here, it would be awesome if we could include <code>triggering_dataset_events</code> ‚Üí <code>triggering_asset_events</code>. If not, I can make a separate PR</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2024-12-27 04:13</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:58 on 2024-12-27 04:13</div>
            <div class="timeline-body"><p>I have changed it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2024-12-27 04:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:45 on 2024-12-27 04:44</div>
            <div class="timeline-body"><p>I have added logic for other ways to access context value as well. It is part of tests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2024-12-27 04:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:44 on 2024-12-27 04:45</div>
            <div class="timeline-body"><p>I have added logic for other ways to access context value as well. It is part of tests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2024-12-27 04:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:5 on 2024-12-27 04:45</div>
            <div class="timeline-body"><p>Changed it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2024-12-27 04:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:42 on 2024-12-27 04:45</div>
            <div class="timeline-body"><p>I have added logic for other ways to access context value as well. It is part of tests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2024-12-27 04:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:675 on 2024-12-27 04:46</div>
            <div class="timeline-body"><p>I have added <code>conf</code> removal check. i<code>nclude triggering_dataset_events</code> ‚Üí <code>triggering_asset_events</code> can be part of another PR</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @Lee-W by @sunank200 on 2024-12-27 04:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @uranusjr by @sunank200 on 2024-12-27 04:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/uranusjr">@uranusjr</a> reviewed on 2024-12-27 05:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/uranusjr">@uranusjr</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:44 on 2024-12-27 05:35</div>
            <div class="timeline-body"><p>It‚Äôs probably better to detect</p>
<ol>
<li>Arguments of a function decorated with <code>@task</code> (either <code>**</code> or simple named arguments). (As a follow-up, any functions called by such a function)</li>
<li>The <code>execute</code> function of a BaseOperator subclass (As a follow-up, any functions called by <code>execute</code>)</li>
<li>The dict returned by <code>get_current_context</code>.</li>
</ol>
<p>This should be better than detecting with variable name.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/uranusjr">@uranusjr</a> reviewed on 2024-12-27 05:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/uranusjr">@uranusjr</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:18 on 2024-12-27 05:37</div>
            <div class="timeline-body"><p>Simply <code>Context</code> or <code>ContextItem</code> is proabaly enough. I see the mesage provided here is always <code>is removed in Airflow 3.0.</code>. Do we plan to add other messages? If not, we can probably just hard-code it in Violation instead.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/uranusjr">@uranusjr</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:965 on 2024-12-27 05:38</div>
            <div class="timeline-body"><p>I think we can do better with <code>?</code> and some kind of <code>map</code> thingy but I‚Äôm not fluent in Rust enough to make a concrete suggestion‚Ä¶</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/uranusjr">@uranusjr</a> reviewed on 2024-12-27 05:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:44 on 2024-12-27 05:47</div>
            <div class="timeline-body"><p>What about <code>python_callable</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:123 on 2024-12-27 05:47</div>
            <div class="timeline-body"><pre><code class="language-suggestion"></code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2024-12-27 05:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2024-12-30 05:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:123 on 2024-12-30 05:12</div>
            <div class="timeline-body"><p>Changed it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2024-12-30 06:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:965 on 2024-12-30 06:14</div>
            <div class="timeline-body"><p>Changed it: https://github.com/astral-sh/ruff/pull/15144/commits/72dcad72e3f0ea0e6c008341bf5f6ec615d7fdb4</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2024-12-30 06:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:18 on 2024-12-30 06:14</div>
            <div class="timeline-body"><p>I have hard-coded it in Violation now: https://github.com/astral-sh/ruff/pull/15144/commits/72dcad72e3f0ea0e6c008341bf5f6ec615d7fdb4</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/uranusjr">@uranusjr</a> reviewed on 2024-12-30 07:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/uranusjr">@uranusjr</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:44 on 2024-12-30 07:18</div>
            <div class="timeline-body"><p>I don‚Äôt think <code>python_callable</code> takes the context though? It only accepts things you provide in <code>self.op_args</code> and <code>self.op_kwargs</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:44 on 2024-12-30 08:12</div>
            <div class="timeline-body"><p>I agree that it'll be useful to guard this check by first verifying that the parameter is coming from a function which is decorated with a <code>@task</code>.</p>
<p>I think this can be done as a pre-check for context variables by using the <code>checker.semantic().current_statements()</code> method to traverse up the AST to find the function definition node and checking whether the function has a <code>@task</code> decorator that originates from the <code>airflow</code> module.</p>
<p>https://github.com/astral-sh/ruff/blob/9fd4eb8c4cd3ffe4de0540f368a8350a0f920e07/crates/ruff_python_semantic/src/model.rs#L1232-L1239</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-12-30 08:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:677 on 2024-12-30 08:13</div>
            <div class="timeline-body"><p>I think we'd also need to check where the <code>context</code> variable is originating from otherwise, I think, this will raise a violation on all variables that's named &quot;context&quot; and is using a similar access pattern.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-12-30 08:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-12-30 08:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:677 on 2024-12-30 08:17</div>
            <div class="timeline-body"><p>i.e., we need to make sure that the definition of <code>context</code> variable is the function parameter that's decorated with <code>@task</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @dhruvmanila on 2024-12-30 08:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @dhruvmanila on 2024-12-30 08:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2024-12-30 14:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:44 on 2024-12-30 14:10</div>
            <div class="timeline-body"><blockquote>
<p>I don‚Äôt think <code>python_callable</code> takes the context though? It only accepts things you provide in <code>self.op_args</code> and <code>self.op_kwargs</code>.</p>
</blockquote>
<p>I though we can still get it in the python_callable? https://airflow.apache.org/docs/apache-airflow/stable/howto/operator/python.html#pythonoperator</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-01-02 03:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:675 on 2025-01-02 03:06</div>
            <div class="timeline-body"><p>If <code>conf</code> has been added, could you please update the description as well? Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/uranusjr">@uranusjr</a> reviewed on 2025-01-02 07:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/uranusjr">@uranusjr</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:44 on 2025-01-02 07:42</div>
            <div class="timeline-body"><p>Hmm OK I didn‚Äôt even realise you can do that‚Ä¶ yeah in that case it‚Äôs probably a good idea to also detect <code>python_callable</code> arguments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jscheffl">@jscheffl</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:84 on 2025-01-02 08:54</div>
            <div class="timeline-body"><p>For <code>execution_date</code> there is actually a replacement - in the docs: https://airflow.apache.org/docs/apache-airflow/stable/templates-ref.html#deprecated-variables - can you add this?</p>
<p>(Same for next_execution_date, prev_execution_date)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jscheffl">@jscheffl</a> reviewed on 2025-01-02 08:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-06 06:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:675 on 2025-01-06 06:30</div>
            <div class="timeline-body"><p>I have updated the description</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-06 06:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:44 on 2025-01-06 06:30</div>
            <div class="timeline-body"><p>I have updated the logic for named argument and function decorated with @task</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-06 06:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:677 on 2025-01-06 06:33</div>
            <div class="timeline-body"><p>I have changed have added a check for task decorator</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-06 12:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:84 on 2025-01-06 12:28</div>
            <div class="timeline-body"><p>We have renamed execution_date to logical_date at places but we have removed them as well:https://github.com/apache/airflow/pull/42404</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @jscheffl by @sunank200 on 2025-01-06 15:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @sunank200 on 2025-01-06 15:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @uranusjr by @sunank200 on 2025-01-06 15:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @Lee-W by @sunank200 on 2025-01-06 15:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/uranusjr">@uranusjr</a> reviewed on 2025-01-07 08:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/uranusjr">@uranusjr</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:1 on 2025-01-07 08:11</div>
            <div class="timeline-body"><p>Do we have a case where a function should <em>not</em> raise a warning?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/uranusjr">@uranusjr</a> reviewed on 2025-01-07 08:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/uranusjr">@uranusjr</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:99 on 2025-01-07 08:17</div>
            <div class="timeline-body"><p>Is it possible to support code like this?</p>
<pre><code class="language-python">c = get_current_context()
c[&quot;execution_date&quot;]
</code></pre>
<p>We should probably not hard code the variable name.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/uranusjr">@uranusjr</a> reviewed on 2025-01-07 08:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/uranusjr">@uranusjr</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:332 on 2025-01-07 08:18</div>
            <div class="timeline-body"><p>Same, I think we should just check for all names (as long as it‚Äôs <code>**</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-07 11:55</div>
            <div class="timeline-body"><p>Going to focus on reviewing this PR instead of #15240 for now as I think this one supersedes the other one but please correct me if I'm wrong.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:961 on 2025-01-07 12:00</div>
            <div class="timeline-body"><p>We should avoid allocating a vector here as we can directly iterate over the statement tree like so:</p>
<pre><code class="language-rs">for stmt in checker.semantic().current_statements() {
	// ...
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:979 on 2025-01-07 12:02</div>
            <div class="timeline-body"><p>We can avoid multiple indentation levels by using <code>let ... else ...</code> which improves readability like so:</p>
<pre><code class="language-rs">        let Stmt::FunctionDef(function_def) = stmt else {
            continue;
        };

        if !is_decorated_with(checker, function_def) {
            continue;
        }

        let arguments = extract_task_function_arguments(function_def);

        for deprecated_arg in REMOVED_CONTEXT_KEYS {
            if arguments.contains(&amp;deprecated_arg.to_string()) {
                checker.diagnostics.push(Diagnostic::new(
                    Airflow3Removal {
                        deprecated: deprecated_arg.to_string(),
                        replacement: Replacement::None,
                    },
                    expr.range(),
                ));
                return true;
            }
        }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:958 on 2025-01-07 12:10</div>
            <div class="timeline-body"><p>Can you clarify what this function is suppose to do? I'm confused as to why this function is also looping over the <code>REMOVED_CONTEXT_ARGS</code> and adding the diagnostics when the callee also does something similar. Additionally, the name and the return type of this function suggests that it checks for a condition but it's adding diagnostics as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:1104 on 2025-01-07 12:12</div>
            <div class="timeline-body"><p>Based on the name of the function, did you mean to make this a generic function over any decorator originating from <code>airflow.decorators.*</code> ? If not, can you rename this to <code>has_task_decorator</code> ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:986 on 2025-01-07 12:13</div>
            <div class="timeline-body"><p>I <em>think</em> we could avoid this allocation but I would like to first understand what does <code>is_task_context_referenced</code> function is suppose to do.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-07 12:21</div>
            <div class="timeline-body"><p>Thank you for working on this. I've a couple of doubts which I've highlighted in the review comments and https://github.com/astral-sh/ruff/pull/15240#issuecomment-2575072655.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-08 06:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:1 on 2025-01-08 06:12</div>
            <div class="timeline-body"><p>I have added two of them but i can add more.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-15 06:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:979 on 2025-01-15 06:03</div>
            <div class="timeline-body"><p>Changed it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-15 06:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:1104 on 2025-01-15 06:07</div>
            <div class="timeline-body"><p>Yes, the intent was to check only for the @task decorator. I have renamed this function.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-15 06:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:958 on 2025-01-15 06:22</div>
            <div class="timeline-body"><p><code>is_task_context_referenced</code> had multiple responsibilities: check task context usage, extract the task argument and check if they are removed from context variables, add diagnostics and return a boolean. The name of the function was misleading.</p>
<p>I have now renamed to <code>detect_removed_context_keys_in_task_decorators</code> and added doc-string as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-15 06:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:332 on 2025-01-15 06:35</div>
            <div class="timeline-body"><p>added the logic</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:96 on 2025-01-15 07:35</div>
            <div class="timeline-body"><p>do we need to make it <code>pub(crate)</code> here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:99 on 2025-01-15 07:51</div>
            <div class="timeline-body"><p>I think we'll need to check 2 cases here.</p>
<ol>
<li>the <code>context</code> is from a function argument (e.g., <code>def func(**context):</code>)</li>
<li>the variable is assigned from <code>get_current_context</code>. we probably could do something like https://github.com/astral-sh/ruff/blob/bec8441cf5c0e3870f7e21cc042937d4279268bd/crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs#L265-L267</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:169 on 2025-01-15 07:52</div>
            <div class="timeline-body"><p>We probably need to make it configurable. (could be next PR)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:125 on 2025-01-15 07:52</div>
            <div class="timeline-body"><p>same here</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:405 on 2025-01-15 07:53</div>
            <div class="timeline-body"><p>we probably will need to check</p>
<pre><code class="language-python">c = get_current_context()
c.get(&quot;execution_date&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:955 on 2025-01-15 07:56</div>
            <div class="timeline-body"><p>Is this function only check function with <code>@task</code>? we probably need some docstring and make the function name more readable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-01-15 07:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-15 13:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:955 on 2025-01-15 13:24</div>
            <div class="timeline-body"><p>I have renamed and added the docstring</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-15 13:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:96 on 2025-01-15 13:27</div>
            <div class="timeline-body"><p>Right, it is not needed as it is used internally. Removed it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-15 13:29</div>
            <div class="timeline-body"><p>Thank you for updating the PR, I plan on looking at it later today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-15 17:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:169 on 2025-01-15 17:17</div>
            <div class="timeline-body"><p>I can create a separate PR for this</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-15 17:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:125 on 2025-01-15 17:17</div>
            <div class="timeline-body"><p>I can create a separate PR for this</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:1092 on 2025-01-16 09:56</div>
            <div class="timeline-body"><p>The arguments are being collected here is being checked against the <code>REMOVED_CONTEXT_ARGS</code> array but that array doesn't contain any <code>**</code>-prefixed entries.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:1062 on 2025-01-16 10:01</div>
            <div class="timeline-body"><p>I think we should just inline this function as it's only used once and avoid allocating a vector here but chaining the arguments that needs to be checked:</p>
<pre><code class="language-rs">  for param in stmt
      .parameters
      .args
      .iter()
      .map(|param| param.parameter.name.as_str())
      .chain(
          stmt.parameters
              .kwarg
              .as_ref()
              .map(|vararg| vararg.name.as_str()),
      )
  {
	// ...
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-16 10:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-16 10:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:171 on 2025-01-16 10:22</div>
            <div class="timeline-body"><p>Looking at the function usage, the <code>expr</code> will always be a <code>ExprSubscript</code>, is this leftover from previous iteration?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:139 on 2025-01-16 10:23</div>
            <div class="timeline-body"><p>We can directly accept the <code>ExprSubscript</code> as the function argument if that's the only expression which is being checked here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-16 10:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-16 10:24</div>
            <div class="timeline-body"><p>This is looking good, can you update the PR description to include all the checks that are being done? I'm mainly looking for all the structural matching that's being done here, not specific symbols or variables that's being checked. I'm having a hard time keeping track of them :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-17 11:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:1092 on 2025-01-17 11:48</div>
            <div class="timeline-body"><p>Thats right. Removed it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-17 12:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:171 on 2025-01-17 12:16</div>
            <div class="timeline-body"><p>Removed this part completely now as I am taking <code>ExprSubscript</code> as argument.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-17 12:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:139 on 2025-01-17 12:16</div>
            <div class="timeline-body"><p>changed it as per suggestion</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-18 05:19</div>
            <div class="timeline-body"><p>Please re-request for review when it's ready :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:961 on 2025-01-21 21:15</div>
            <div class="timeline-body"><p>removed it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-21 21:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-21 21:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:1062 on 2025-01-21 21:24</div>
            <div class="timeline-body"><p>Changed it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-21 21:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:986 on 2025-01-21 21:24</div>
            <div class="timeline-body"><p>removed it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-21 21:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:961 on 2025-01-21 21:25</div>
            <div class="timeline-body"><p>removed it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:405 on 2025-01-21 22:01</div>
            <div class="timeline-body"><p>Added the check</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-21 22:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-21 22:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:99 on 2025-01-21 22:01</div>
            <div class="timeline-body"><p>Added the check for both.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @sunank200 on 2025-01-21 22:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @Lee-W by @sunank200 on 2025-01-21 22:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-01-22 02:40</div>
            <div class="timeline-body"><blockquote>
<p>Please re-request for review when it's ready :)</p>
</blockquote>
<p>I fix the CI failure. I think it's ready for review now. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:427 on 2025-01-22 02:51</div>
            <div class="timeline-body"><p>This seems to be highlighting the wrong range. I think you meant to highlight the parameter <code>execution_date</code>?</p>
<p>Can we add more test cases to check functions with multiple parameters which has both deprecated and non-deprecated parameters?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:172 on 2025-01-22 02:52</div>
            <div class="timeline-body"><p>Are these related to the changes made in this PR? This is fine, I just want to confirm.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:398 on 2025-01-22 02:55</div>
            <div class="timeline-body"><p>I don't think we can use 0 as the default value here. What would happen if it's a positional parameter which is expected to be at position 1 or 2? This will return incorrect argument.</p>
<p>I think we should also add test cases where there are multiple arguments that are deprecated in the same function intermixed with non-deprecated arguments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:400 on 2025-01-22 03:14</div>
            <div class="timeline-body"><p>What's the <code>**</code> check is for? I only see <code>**</code> being used in parameter in the tests and PR description but this is checking the <em>call</em> function and not the function parameter. Did you meant to look at the definition of <code>value</code> and check that instead? If so, I think that will require adding functionality to get the parameter definition for the binding which would be something like:</p>
<pre><code class="language-rs">fn find_parameter(semantic: &amp;SemanticModel, name: &amp;ast::ExprName) -&gt; Option&lt;ast::AnyParameterRef&gt; {
	let binding_id = semantic.only_binding(name_expr)?;
	let binding = semantic.binding(binding_id);
	let ast::StmtFunctionDef { parameters, .. } = binding.statement(semantic)?.as_function_def_stmt()?;
    parameters
        .iter()
        .find(|parameter| parameter.name().range() == binding.range())
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:9 on 2025-01-22 03:32</div>
            <div class="timeline-body"><p>This function doesn't have the <code>@task</code> decorator but the diagnostics is being raised here, is this correct?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:101 on 2025-01-22 03:33</div>
            <div class="timeline-body"><p>Do we need to update the documentation for this function as it's only checking subscript expressions?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-22 03:40</div>
            <div class="timeline-body"><p>Thank you for updating the PR description with the patterns that are being checked here, it's helpful as a reference when reviewing.</p>
<p>Regarding 1, 2, 3 pattern, do they need to be in function / method which has the <code>@task</code> decorator or can they be in any function / method?</p>
<p>I think we're pretty close to finishing this up, thank you for your patience!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @dhruvmanila by @dhruvmanila on 2025-01-22 03:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sunank200">@sunank200</a> on 2025-01-22 05:56</div>
            <div class="timeline-body"><blockquote>
<p>Thank you for updating the PR description with the patterns that are being checked here, it's helpful as a reference when reviewing.</p>
<p>Regarding 1, 2, 3 pattern, do they need to be in function / method which has the <code>@task</code> decorator or can they be in any function / method?</p>
<p>I think we're pretty close to finishing this up, thank you for your patience!</p>
</blockquote>
<p>For pattern 1, 2 and 3 they can be in any function/method.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-22 06:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:101 on 2025-01-22 06:01</div>
            <div class="timeline-body"><p>I felt it is easier for someone to read the code logic in this function this way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-22 06:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:9 on 2025-01-22 06:03</div>
            <div class="timeline-body"><p>This is still correct as if the removed variables are part of <code>**context</code> in any airflow function, it should raise error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-22 06:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:9 on 2025-01-22 06:08</div>
            <div class="timeline-body"><p>Can you briefly describe what is an &quot;airflow function&quot; or provide a reference to it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-22 06:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:101 on 2025-01-22 06:09</div>
            <div class="timeline-body"><p>I think we should keep the documentation limited to what the function is doing, we can add this as comments wherever it's relevant.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-22 06:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:172 on 2025-01-22 06:11</div>
            <div class="timeline-body"><p>Not related to this PR</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-22 06:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:101 on 2025-01-22 06:24</div>
            <div class="timeline-body"><p>Changed it now</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:9 on 2025-01-22 06:39</div>
            <div class="timeline-body"><p>When I say function in airflow implementation. Let's say there is implementation of operator:</p>
<pre><code>from airflow.models.baseoperator import BaseOperator

def log_execution_date(**context):
    # should throw an lint error
    execution_date = context.get(&quot;execution_date&quot;)
    if execution_date:
        print(f&quot;Warning: 'execution_date' is deprecated. Found value: {execution_date}&quot;)
    else:
        print(&quot;No 'execution_date' found in context.&quot;)

class MyOperator(BaseOperator):
    def __init__(self, my_parameter, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.my_parameter = my_parameter

    def execute(self, context):
        log_execution_date(**context)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-22 06:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:427 on 2025-01-22 07:17</div>
            <div class="timeline-body"><p>That is right. I have changed the logic to highlight the parameter itself.</p>
<p>I have added more test cases to check functions with multiple parameters that has both deprecated and non-deprecated parameters.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-22 07:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-22 07:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:427 on 2025-01-22 07:20</div>
            <div class="timeline-body"><p>https://github.com/astral-sh/ruff/pull/15144/commits/65db31f0e181f8cc469ee9caf7a775dd060b75ff</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:398 on 2025-01-22 14:04</div>
            <div class="timeline-body"><p>I think I am also doing a check <code>if let Expr::StringLiteral(ExprStringLiteral { value, .. }) = argument</code> here as well.</p>
<p>I have added the test cases for multiple arguments that are deprecated in the same function intermixed with non-deprecated arguments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-22 14:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-23 06:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:400 on 2025-01-23 06:34</div>
            <div class="timeline-body"><p>Added it https://github.com/astral-sh/ruff/pull/15144/commits/d0aff2bbff5c9deb8b9a0bd022d5013d07807bbd</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @sunank200 on 2025-01-23 06:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:12 on 2025-01-23 06:49</div>
            <div class="timeline-body"><p>nit: we can reorder the import to at least fit Python convention</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:100 on 2025-01-23 06:56</div>
            <div class="timeline-body"><pre><code class="language-suggestion">fn check_context_variable(checker: &amp;mut Checker, subscript: &amp;ExprSubscript) {
</code></pre>
<p>the naming convention (at least in this module) has been changed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:99 on 2025-01-23 06:57</div>
            <div class="timeline-body"><p>It would be nice to have an example like other functions</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:104 on 2025-01-23 06:59</div>
            <div class="timeline-body"><p>What happens when we encounter <code>**kwargs</code>? e.g.,</p>
<pre><code class="language-python">def func(**kwargs):
    kwargs[&quot;conf&quot;]
</code></pre>
<p>will it still be true?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:384 on 2025-01-23 07:10</div>
            <div class="timeline-body"><p>what is gcc?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:384 on 2025-01-23 07:42</div>
            <div class="timeline-body"><p>this could be a function and could be reused in <code>check_context_variable</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:364 on 2025-01-23 07:50</div>
            <div class="timeline-body"><p>The function name might not be accurate ü§î</p>
<pre><code>/// ```python
/// from airflow.decorators import task
///
/// @task
/// def another_task(execution_date, **kwargs):
///     # 'execution_date' is removed in Airflow 3.0
///     pass
/// ```
</code></pre>
<p>This is not context_get</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-01-23 07:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-23 08:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:9 on 2025-01-23 08:07</div>
            <div class="timeline-body"><p>Thanks for providing an example. So, in this case, the <code>log_execution_date</code> is an Airflow function, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-01-23 08:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/snapshots/ruff_linter__rules__airflow__tests__AIR302_AIR302_context.py.snap</code>:9 on 2025-01-23 08:09</div>
            <div class="timeline-body"><p>It's a user-defined function, but when <code>context</code> is passed through <code>BaseOperator.execute</code> and then to <code>log_execution_date</code>, it should not access removed keys</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-23 08:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:12 on 2025-01-23 08:35</div>
            <div class="timeline-body"><p>changed it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-23 08:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:99 on 2025-01-23 08:37</div>
            <div class="timeline-body"><p>It was suggest to remove it here: https://github.com/astral-sh/ruff/pull/15144#discussion_r1924747014</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-23 08:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:364 on 2025-01-23 08:43</div>
            <div class="timeline-body"><p>changed it to <code>check_removed_context_keys_usage</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-23 08:45</div>
            <div class="timeline-body"><p>For pattern 4, we should use a separate entrypoint which directly checks the function definition instead of trying to find the function definition from the expression otherwise we'll end up with duplicate diagnostics like in the following example:</p>
<pre><code class="language-py">from airflow.decorators import task


@task
def some_task(execution_date, conf, **kwargs):
    kwargs.get(&quot;execution_date&quot;)
    kwargs.get(&quot;conf&quot;)
</code></pre>
<details><summary>Output of running Ruff on this PR:</summary>
<p>

<pre><code>/Users/dhruv/playground/ruff/src/AIR302.py:5:15: AIR302 `execution_date` is removed in Airflow 3.0
  |
4 | @task
5 | def some_task(execution_date, conf, **kwargs):
  |               ^^^^^^^^^^^^^^ AIR302
6 |     kwargs.get(&quot;execution_date&quot;)
7 |     kwargs.get(&quot;conf&quot;)
  |

/Users/dhruv/playground/ruff/src/AIR302.py:5:15: AIR302 `execution_date` is removed in Airflow 3.0
  |
4 | @task
5 | def some_task(execution_date, conf, **kwargs):
  |               ^^^^^^^^^^^^^^ AIR302
6 |     kwargs.get(&quot;execution_date&quot;)
7 |     kwargs.get(&quot;conf&quot;)
  |

/Users/dhruv/playground/ruff/src/AIR302.py:5:31: AIR302 `conf` is removed in Airflow 3.0
  |
4 | @task
5 | def some_task(execution_date, conf, **kwargs):
  |                               ^^^^ AIR302
6 |     kwargs.get(&quot;execution_date&quot;)
7 |     kwargs.get(&quot;conf&quot;)
  |

/Users/dhruv/playground/ruff/src/AIR302.py:5:31: AIR302 `conf` is removed in Airflow 3.0
  |
4 | @task
5 | def some_task(execution_date, conf, **kwargs):
  |                               ^^^^ AIR302
6 |     kwargs.get(&quot;execution_date&quot;)
7 |     kwargs.get(&quot;conf&quot;)
  |

/Users/dhruv/playground/ruff/src/AIR302.py:6:16: AIR302 `execution_date` is removed in Airflow 3.0
  |
4 | @task
5 | def some_task(execution_date, conf, **kwargs):
6 |     kwargs.get(&quot;execution_date&quot;)
  |                ^^^^^^^^^^^^^^^^ AIR302
7 |     kwargs.get(&quot;conf&quot;)
  |

/Users/dhruv/playground/ruff/src/AIR302.py:7:16: AIR302 `conf` is removed in Airflow 3.0
  |
5 | def some_task(execution_date, conf, **kwargs):
6 |     kwargs.get(&quot;execution_date&quot;)
7 |     kwargs.get(&quot;conf&quot;)
  |                ^^^^^^ AIR302
  |

Found 6 errors.
</code></pre>
</p>
</details>

<p>Can you make this change? I tried pushing it but I'm unable to do so, do you have &quot;allow edits to maintainers off&quot; (https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/allowing-changes-to-a-pull-request-branch-created-from-a-fork) ? Here's a patch for that:</p>
<pre><code class="language-diff">commit c76e15a45d61a42d95a4fbaf23aceae9134652db
Author: Dhruv Manilawala &lt;dhruvmanila@gmail.com&gt;
Date:   Thu Jan 23 14:13:29 2025 +0530

    Check context parameters directly from function definition

diff --git a/crates/ruff_linter/src/checkers/ast/analyze/statement.rs b/crates/ruff_linter/src/checkers/ast/analyze/statement.rs
index d5f92b9f2..7f64be4bd 100644
--- a/crates/ruff_linter/src/checkers/ast/analyze/statement.rs
+++ b/crates/ruff_linter/src/checkers/ast/analyze/statement.rs
@@ -376,6 +376,9 @@ pub(crate) fn statement(stmt: &amp;Stmt, checker: &amp;mut Checker) {
             if checker.enabled(Rule::PytestParameterWithDefaultArgument) {
                 flake8_pytest_style::rules::parameter_with_default_argument(checker, function_def);
             }
+            if checker.enabled(Rule::Airflow3Removal) {
+                airflow::rules::removed_in_3_function_def(checker, function_def);
+            }
         }
         Stmt::Return(_) =&gt; {
             if checker.enabled(Rule::ReturnOutsideFunction) {
diff --git a/crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs b/crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs
index b08f8986b..f36dd29db 100644
--- a/crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs
+++ b/crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs
@@ -168,6 +168,36 @@ pub(crate) fn removed_in_3(checker: &amp;mut Checker, expr: &amp;Expr) {
     }
 }
 
+/// AIR302
+pub(crate) fn removed_in_3_function_def(checker: &amp;mut Checker, function_def: &amp;StmtFunctionDef) {
+    if !checker.semantic().seen_module(Modules::AIRFLOW) {
+        return;
+    }
+
+    if !is_airflow_task(function_def, checker.semantic()) {
+        return;
+    }
+
+    for param in function_def
+        .parameters
+        .posonlyargs
+        .iter()
+        .chain(function_def.parameters.args.iter())
+        .chain(function_def.parameters.kwonlyargs.iter())
+    {
+        let param_name = param.parameter.name.as_str();
+        if REMOVED_CONTEXT_KEYS.contains(&amp;param_name) {
+            checker.diagnostics.push(Diagnostic::new(
+                Airflow3Removal {
+                    deprecated: param_name.to_string(),
+                    replacement: Replacement::None,
+                },
+                param.parameter.name.range(),
+            ));
+        }
+    }
+}
+
 #[derive(Debug, Eq, PartialEq)]
 enum Replacement {
     None,
@@ -398,37 +428,6 @@ fn check_context_get(checker: &amp;mut Checker, call_expr: &amp;ExprCall) {
     if attr.as_str() != &quot;get&quot; {
         return;
     }
-    let function_def = {
-        let mut parents = checker.semantic().current_statements();
-        parents.find_map(|stmt| {
-            if let Stmt::FunctionDef(func_def) = stmt {
-                Some(func_def.clone())
-            } else {
-                None
-            }
-        })
-    };
-
-    if let Some(func_def) = function_def {
-        for param in func_def
-            .parameters
-            .posonlyargs
-            .iter()
-            .chain(func_def.parameters.args.iter())
-            .chain(func_def.parameters.kwonlyargs.iter())
-        {
-            let param_name = param.parameter.name.as_str();
-            if REMOVED_CONTEXT_KEYS.contains(&amp;param_name) {
-                checker.diagnostics.push(Diagnostic::new(
-                    Airflow3Removal {
-                        deprecated: param_name.to_string(),
-                        replacement: Replacement::None,
-                    },
-                    param.parameter.name.range(),
-                ));
-            }
-        }
-    }
 
     for removed_key in REMOVED_CONTEXT_KEYS {
         if let Some(argument) = call_expr.arguments.find_argument_value(removed_key, 0) {
@@ -1087,3 +1086,14 @@ fn is_airflow_builtin_or_provider(segments: &amp;[&amp;str], module: &amp;str, symbol_suffix
         _ =&gt; false,
     }
 }
+
+/// Returns `true` if the given function is decorated with `@airflow.decorators.task`.
+fn is_airflow_task(function_def: &amp;StmtFunctionDef, semantic: &amp;SemanticModel) -&gt; bool {
+    function_def.decorator_list.iter().any(|decorator| {
+        semantic
+            .resolve_qualified_name(map_callable(&amp;decorator.expression))
+            .is_some_and(|qualified_name| {
+                matches!(qualified_name.segments(), [&quot;airflow&quot;, &quot;decorators&quot;, &quot;task&quot;])
+            })
+    })
+}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-23 08:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:384 on 2025-01-23 08:46</div>
            <div class="timeline-body"><p>It is <code>get_current_context</code>. I have changed it to <code>is_assigned_from_get_current_context</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-23 08:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:384 on 2025-01-23 08:46</div>
            <div class="timeline-body"><p>I think it is just used in check_removed_context_keys_usage function</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-23 08:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:100 on 2025-01-23 08:47</div>
            <div class="timeline-body"><p>changed it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-23 08:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:398 on 2025-01-23 08:52</div>
            <div class="timeline-body"><p>Oh, sorry, this is for the call expression. I think I confused this with the function parameter check.</p>
<p>Does <code>context.get</code> allow keyword argument? The <code>find_arguments_value</code> will first check if there's a keyword with the given name (as indicated by <code>removed_key</code> variable in this case) and then check for positional argument. I'm assuming that <code>context.get(conf=&quot;conf&quot;)</code> is not allowed and only <code>context.get(&quot;conf&quot;)</code> is allowed which is why I think we should directly use <code>find_positional</code> instead.</p>
<p>(I've marked this as unresolved to make sure I don't forget to check this)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sunank200">@sunank200</a> on 2025-01-23 09:01</div>
            <div class="timeline-body"><blockquote>
<p>use a separate entrypoint which directly checks the function definition</p>
</blockquote>
<p>@dhruvmanila changed it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-23 09:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:104 on 2025-01-23 09:11</div>
            <div class="timeline-body"><p>It doesn't throw a lint error for this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:100 on 2025-01-23 09:42</div>
            <div class="timeline-body"><p>Do we need to check for <code>context.get</code> pattern in here as well? I think that's not being checked as per my local testing. For example, the following will not raise any diagnostics:</p>
<pre><code class="language-python">from airflow.models.baseoperator import BaseOperator


class CustomOperator(BaseOperator):
    def execute(self, context):
        execution_date = context.get(&quot;execution_date&quot;)
        next_ds = context.get(&quot;next_ds&quot;)
</code></pre>
<p>Now, as per:</p>
<blockquote>
<p>2. The <code>execute</code> function of a BaseOperator subclass (...)</p>
</blockquote>
<p>It seems that it's not <em>any</em> method but rather a specific method and only when it's inherited by <code>BaseOperator</code>. I don't think we're checking this. Is that ok?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-23 09:48</div>
            <div class="timeline-body"><p>I have one last doubt but otherwise this looks good.</p>
<p>For a <code>@task</code> decorated functions, we check for both <code>var.get(...)</code> and <code>var[...]</code> pattern but there are other places where we only check subscript expressions. Is that expected? Should those places also check for <code>var.get(...)</code> pattern? If yes, are there additional requirements in those places similar to how there's a requirement for a <code>@task</code> decorator?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-01-23 10:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:398 on 2025-01-23 10:03</div>
            <div class="timeline-body"><p>I think we can only do <code>context.get(&quot;conf&quot;)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-01-23 10:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:100 on 2025-01-23 10:17</div>
            <div class="timeline-body"><ol>
<li>I think we'll need to check this</li>
<li>any function that is called in <code>BaseOperator.execute</code>. It's possible to have false positive now but the chance are low I think</li>
</ol>
<pre><code class="language-e.g.,">
def any_func(context):
    context.get(&quot;execution_date&quot;)

class CustomOperator(BaseOperator):
    def execute(self, context):
        any_func(context)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-23 16:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:100 on 2025-01-23 16:40</div>
            <div class="timeline-body"><ol>
<li>Added the change</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sunank200">@sunank200</a> on 2025-01-23 16:43</div>
            <div class="timeline-body"><blockquote>
<p>I have one last doubt but otherwise this looks good.</p>
<p>For a <code>@task</code> decorated functions, we check for both <code>var.get(...)</code> and <code>var[...]</code> pattern but there are other places where we only check subscript expressions. Is that expected? Should those places also check for <code>var.get(...)</code> pattern? If yes, are there additional requirements in those places similar to how there's a requirement for a <code>@task</code> decorator?</p>
</blockquote>
<p>@dhruvmanila I have added a check for both <code>var.get(...)</code> and <code>var[...]</code> pattern at all places.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sunank200">@sunank200</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:398 on 2025-01-23 16:53</div>
            <div class="timeline-body"><p>Using <code>find_positional</code> directly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sunank200">@sunank200</a> reviewed on 2025-01-23 16:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-24 05:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:100 on 2025-01-24 05:51</div>
            <div class="timeline-body"><blockquote>
<p>2. any function that is called in <code>BaseOperator.execute</code>. It's possible to have false positive now but the chance are low I think</p>
</blockquote>
<p>Yeah, I don't think we're checking this. I'm fine merging this as is for now but one solution might be to collect all the functions that occur in this context and then defer checking of them. But, this will make it a bit complex and might not be worth it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-24 05:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_context.py</code>:73 on 2025-01-24 05:53</div>
            <div class="timeline-body"><p>I don't see this in the snapshot. Should we remove this test case?</p>
<p>(I'll do it in a follow-up PR.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> approved on 2025-01-24 05:54</div>
            <div class="timeline-body"><p>Thank you! Welcome to Ruff! ü•≥</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[airflow] Add lint rule to show error for removed context variables in airflow" to "[`airflow`] Update `AIR302` to check for deprecated context keys" by @dhruvmanila on 2025-01-24 05:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dhruvmanila on 2025-01-24 05:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2025-01-24 05:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-24 06:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:146 on 2025-01-24 06:10</div>
            <div class="timeline-body"><p>Can this variable name be anything other than <code>context</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-24 06:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:417 on 2025-01-24 06:11</div>
            <div class="timeline-body"><p>Similarly, can this parameter be anything other than <code>context</code> or <code>kwargs</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-24 06:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:197 on 2025-01-24 06:40</div>
            <div class="timeline-body"><p>This doesn't really make sense as both function is going to perform the same check except that the first one is behind an additional check of <code>@task</code> function. I'm not sure why this is present.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-01-24 06:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:418 on 2025-01-24 06:42</div>
            <div class="timeline-body"><p>The parameter name won't really contain <code>**</code> at the start. You can see that in the playground: https://play.ruff.rs/f7051131-c6c0-49a4-8b91-e74c37ae8088</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-24 06:49</div>
            <div class="timeline-body"><p>Sorry for prematurely merging this PR. I see a lot of inconsistencies from which I've pointed out some of them above. I'm going to revert some of the changes and only keep the ones to only perform the check in <code>@task</code>-decorated functions. Please create a follow-up PR to perform this check in other contexts like the <code>Operator.execute</code> method.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-02-01 00:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 19:57:51 UTC
    </footer>
</body>
</html>
