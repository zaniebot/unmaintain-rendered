<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Rename `extra-paths` to `non-environment-paths`, and `--extra-search-path` to `--non-environment-search-path` - astral-sh/ruff #20721</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Rename <code>extra-paths</code> to <code>non-environment-paths</code>, and <code>--extra-search-path</code> to <code>--non-environment-search-path</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/20721">#20721</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-10-06 14:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a></div>
            <div class="timeline-body">Summary
<p>This PR renames ty&#x27;s <code>--extra-search-path</code> CLI flag to <code>--non-environment-search-path</code>, and renames its <code>extra-paths</code> configuration option to <code>non-environment-paths</code>.</p>
<p>The motivation is to make the <code>extra-paths</code> option less &quot;inviting&quot; for users. It&#x27;s really an advanced option that should only be used in situations where you have a directory of Python code that wouldn&#x27;t normally be installed into a virtual environment at runtime in a conventional way, but which you do want ty to consider as a search path for module resolution. There are valid use cases for this option, but users shouldn&#x27;t be reaching for it before making sure ty knows where their virtual environment is. At this point, I feel like I&#x27;ve seen several user issues that are caused by users thinking that they should be using this option when there are really better ways of achieving what they&#x27;re trying to achieve.</p>
<p>Of the two, I think renaming the configuration option is more important here; I mainly renamed the CLI flag to keep it somewhat consistent with the configuration name.</p>
<p>Credit goes to @zsol for suggesting the name <code>non-environment-paths</code>!</p>
<p>Closes <a href="https://github.com/astral-sh/ty/issues/1197">astral-sh/ty#1197</a>
Closes <a href="https://github.com/astral-sh/ty/issues/1289">astral-sh/ty#1289</a></p>
Test Plan
<p>I grepped for the following phrases to try to make sure my renaming was comprehensive:</p>
<ul>
<li><code>extra_paths</code></li>
<li><code>extra_search</code></li>
<li><code>extra-paths</code></li>
<li><code>extra-search</code></li>
<li><code>extra search</code></li>
<li><code>Extra</code></li>
<li><code>extra path</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zsol">@zsol</a> by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-06 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-06 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/sharkdp">@sharkdp</a> by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-06 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-06 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-06 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-06 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-06 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-10-06 14:14</div>
            <div class="timeline-body">

Diagnostic diff on <a href="https://github.com/python/typing/tree/d4f39b27a4a47aac8b6d4019e1b0b5b3156fabdc/conformance">typing conformance tests</a>
<p>No changes detected when running ty on typing conformance tests ‚úÖ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-10-06 14:14</div>
            <div class="timeline-body">

<code>mypy_primer</code> results

Changes were detected when running on open source projects

<pre><code>scikit-build-core (https://github.com/scikit-build/scikit-build-core)
- src/scikit_build_core/build/_wheelfile.py:51:22: error[no-matching-overload] No overload of function `field` matches arguments
- Found 53 diagnostics
+ Found 52 diagnostics

</code></pre>

No memory usage changes detected ‚úÖ

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">breaking</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-10-06 14:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/docs/configuration.md</code>:52 on 2025-10-06 14:41</div>
            <div class="timeline-body"><p>I do like the name in general, but I find it confusing in the configuration due to the <code>environment</code> configuration table. It&#x27;s confusing because we use the same word but mean different <code>environments</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-10-06 14:43</div>
            <div class="timeline-body"><p>I would personally be inclined to not do this. The new name is significantly longer (and I think a less clear and concise description of the option), and I don&#x27;t think we have clear evidence that the <em>name</em> of the option is what attracts people to this option (vs, say, simply the fact of its existence and that it seems to work). I would rather keep the existing name and see what the impact is of updating documentation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-10-06 14:45</div>
            <div class="timeline-body"><p>Thank you.</p>
<p>It&#x27;s probably fine to make this breaking change, given that ty&#x27;s still an alpha and it is hopefully not used often.</p>
<p>I do like the name but it seems problematic in the <code>environment</code> table.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-06 14:55</div>
            <div class="timeline-body"><blockquote>
<p>The new name is significantly longer</p>
</blockquote>
<p>That was somewhat intentional! The idea is to make the option seem less attractive, after all. A loss of clarity is more problematic, though, for sure.</p>
<blockquote>
<p>I would rather keep the existing name and see what the impact is of updating documentation.</p>
</blockquote>
<p>I definitely don&#x27;t want to rush into something we don&#x27;t have consensus on. But I do think we keep seeing these issues, and part of the reason for that is that it&#x27;s very easy to understand what an <code>extra-paths</code> configuration option does whereas it doesn&#x27;t seem nearly as intuitive to our users that specifying <code>python</code> may add multiple search paths for module resolution. And the disadvantage of waiting too long, as Micha says, is that it will become harder to become breaking changes once ty moves from alpha to beta, and from beta to general-release</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-10-06 14:56</div>
            <div class="timeline-body"><p>Pyright uses the name &quot;extraPaths&quot;, and mypy uses simply &quot;mypy-path&quot; (which if anything is even more attractive, as it sounds like the primary way to configure search paths, it doesn&#x27;t even include &quot;extra&quot;), so it doesn&#x27;t seem likely to me that the name is the key factor here.</p>
<p>I don&#x27;t think people are discovering this option from blind trial and error, they are finding it in <code>--help</code> or the docs, so changes there should be quite effective.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-10-06 14:59</div>
            <div class="timeline-body"><blockquote>
<p>I don&#x27;t think people are discovering this option from blind trial and error, they are finding it in --help or the docs, so changes there should be quite effective.</p>
</blockquote>
<p>That&#x27;s a good point and @AlexWaygood made some great improvements. We could wait and see how it plays out?</p>
<blockquote>
<p>as Micha says, is that it will become harder to become breaking changes once ty moves from alpha to beta, and from beta to general-release</p>
</blockquote>
<p>I think this option shouldn&#x27;t be too hard. We can just add aliases on the CLI and the implementation at the configuration should look similar to what i&#x27;ve done for <code>src.root</code> (including a deprecation diagnostic)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-06 15:00</div>
            <div class="timeline-body"><blockquote>
<p>Pyright uses the name &quot;extraPaths&quot;, and mypy uses simply &quot;mypy-path&quot; (which if anything is even more attractive, as it sounds like the primary way to configure search paths, it doesn&#x27;t even include &quot;extra&quot;)</p>
</blockquote>
<p>Right, though as we&#x27;ve discussed in the past, it&#x27;s generally much less important to specify the Python environment for either of those, since mypy is usually invoked from inside your project&#x27;s Python environment, and pyright is usually invoked from inside VSCode (which prompts you to select your project&#x27;s Python interpreter when you open a project for the first time). So I would expect that users of those type checkers just don&#x27;t need to look for an option to set extra search paths in the same way that ty users might.</p>
<p>Anyway, we can wait on this for now and see if we get any more issues about this in the coming months üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-06 15:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-24 15:49</div>
            <div class="timeline-body"><p>Another example of a user immediately reaching for <code>environment.extra-paths</code> when (from what I can see) <code>environment.roots</code> would be more appropriate: <a href="https://github.com/astral-sh/ty/issues/1413">astral-sh/ty#1413</a>#issuecomment-3443606009</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rgasper">@rgasper</a> on 2025-10-24 17:08</div>
            <div class="timeline-body"><blockquote>
<p>Another example of a user immediately reaching for <code>environment.extra-paths</code> when (from what I can see) <code>environment.roots</code> would be more appropriate: <a href="https://github.com/astral-sh/ty/issues/1413#issuecomment-3443606009">astral-sh/ty#1413 (comment)</a></p>
</blockquote>
<p>I did actually try <code>environment.roots</code> first, but it didn&#x27;t seem to work - turns out that was because I was editing that in the wrong <code>pyproject.toml</code>, which was my IDE&#x27;s (helix) fault, not <code>ty</code></p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:19:15 UTC
    </footer>
</body>
</html>
