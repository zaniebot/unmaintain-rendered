<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support `type[a.X]` with qualified class names - astral-sh/ruff #14825</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support <code>type[a.X]</code> with qualified class names</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/14825">#14825</a>
        opened by <a href="https://github.com/dcreager">@dcreager</a>
        on 2024-12-06 19:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dcreager">@dcreager</a></div>
            <div class="timeline-body"><p>This adds support for <code>type[a.X]</code>, where the <code>type</code> special form is applied to a qualified name that resolves to a class literal.  This works for both nested classes and classes imported from another module.</p>
<p>Closes #14545</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @dcreager on 2024-12-06 19:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @dcreager on 2024-12-06 19:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @dcreager on 2024-12-06 19:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @dcreager on 2024-12-06 19:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dcreager">@dcreager</a> reviewed on 2024-12-06 19:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/type_of/basic.md</code>:79 on 2024-12-06 19:06</div>
            <div class="timeline-body"><p>I left this as a TODO because I think this is not specific to <code>type[]</code>.  The <code>unresolved-attribute</code> error I get is:</p>
<blockquote>
<p>Type <code>&lt;module 'System(&quot;/src/a/b.py&quot;)'&gt;</code> has no attribute <code>b</code></p>
</blockquote>
<p>which suggests that our import logic is binding <code>a</code> as <code>a.b</code> instead of <code>a</code>.  Am I interpreting that right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @dylwil3 on 2024-12-06 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-12-06 19:19</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>âœ… ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>âœ… ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/type_of/basic.md</code>:79 on 2024-12-06 20:01</div>
            <div class="timeline-body"><p>Yes, it looks like you are! I think this is a previously-not-known bug, unless @AlexWaygood was already aware of it. Want to file an issue (labeled <code>red-knot</code>)? Could also be an interesting one for you to look into, would get you some exposure to the module resolver, which I don't think any of the other tasks do.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/src/types/infer.rs</code>:4563 on 2024-12-06 20:03</div>
            <div class="timeline-body"><p>we can remove &quot;attributes&quot; from this TODO</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> approved on 2024-12-06 20:05</div>
            <div class="timeline-body"><p>Nice! Looks like this one would have been a better pick for first task ðŸ˜†</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2024-12-06 20:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/red_knot_python_semantic/resources/mdtest/type_of/basic.md</code>:79 on 2024-12-06 20:07</div>
            <div class="timeline-body"><p>I think I already knew about it, and I <em>think</em> we already have a TODO about it... whether we have an issue is another question... it's late here, so I won't  look into whether we do or don't this evening :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dcreager">@dcreager</a> reviewed on 2024-12-06 22:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/type_of/basic.md</code>:79 on 2024-12-06 22:07</div>
            <div class="timeline-body"><p>Opened https://github.com/astral-sh/ruff/issues/14826, can close it as a dup if it turns out we have another one already open</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dcreager">@dcreager</a> reviewed on 2024-12-06 22:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/src/types/infer.rs</code>:4563 on 2024-12-06 22:07</div>
            <div class="timeline-body"><p>Done</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dcreager on 2024-12-06 22:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dcreager on 2024-12-06 22:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-12-06 22:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:08:18 UTC
    </footer>
</body>
</html>
