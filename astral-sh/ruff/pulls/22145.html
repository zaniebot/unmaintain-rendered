<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Fix implementation of `Top[Callable[..., object]]` - astral-sh/ruff #22145</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Fix implementation of <code>Top[Callable[..., object]]</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/22145">#22145</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2025-12-22 18:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-22 18:05</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Add a proper representation for the <code>Callable</code> top type, and use it to get <code>callable()</code> narrowing right.</p>
<p>Closes https://github.com/astral-sh/ty/issues/1426.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2025-12-22 18:07</div>
            <div class="timeline-body"><!-- generated-comment typing_conformance_diagnostics_diff -->

<h2>Diagnostic diff on <a href="https://github.com/python/typing/tree/9f6d8ced7cd1c8d92687a4e9c96d7716452e471e/conformance">typing conformance tests</a></h2>
<p>No changes detected when running ty on typing conformance tests âœ…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2025-12-22 18:08</div>
            <div class="timeline-body"><!-- generated-comment mypy_primer -->

<h2><code>mypy_primer</code> results</h2>
<details>
<summary>Changes were detected when running on open source projects</summary>

<pre><code class="language-diff">mypy_primer (https://github.com/hauntsaninja/mypy_primer)
- mypy_primer/git_utils.py:66:56: error[invalid-argument-type] Argument to function `get_revision_for_revision_or_date` is incorrect: Expected `str`, found `@Todo | (str &amp; ~(() -&gt; object)) | (((Path, /) -&gt; Awaitable[str]) &amp; ~(() -&gt; object))`
- Found 4 diagnostics
+ Found 3 diagnostics

spack (https://github.com/spack/spack)
- lib/spack/spack/llnl/util/filesystem.py:330:21: warning[possibly-missing-attribute] Attribute `replace` may be missing on object of type `(str &amp; ~(() -&gt; object)) | (((Match[Unknown], /) -&gt; str) &amp; ~(() -&gt; object))`
- lib/spack/spack/vendor/jinja2/runtime.py:734:38: error[invalid-assignment] Object of type `(Unknown &amp; ~(() -&gt; object)) | bool | (((str | None, /) -&gt; bool) &amp; ~(() -&gt; object))` is not assignable to `bool | None`
- lib/spack/spack/vendor/jinja2/runtime.py:814:40: error[invalid-argument-type] Argument to bound method `_invoke` is incorrect: Expected `bool`, found `@Todo | bool | None`
- Found 4295 diagnostics
+ Found 4292 diagnostics

pip (https://github.com/pypa/pip)
- src/pip/_vendor/resolvelib/structs.py:203:37: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `() -&gt; Iterable[Unknown]`, found `(Iterable[CT@build_iter_view] &amp; (() -&gt; object)) | (() -&gt; Iterable[CT@build_iter_view])`
+ src/pip/_vendor/resolvelib/structs.py:203:37: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `() -&gt; Iterable[Unknown]`, found `(Iterable[CT@build_iter_view] &amp; Top[(...) -&gt; object]) | (() -&gt; Iterable[CT@build_iter_view])`
- src/pip/_vendor/rich/_log_render.py:62:59: error[invalid-argument-type] Argument to bound method `strftime` is incorrect: Expected `str`, found `(str &amp; ~(() -&gt; object)) | (((datetime, /) -&gt; Text) &amp; ~(() -&gt; object)) | (Unknown &amp; ~(() -&gt; object))`
- src/pip/_vendor/rich/text.py:624:51: error[invalid-argument-type] Argument is incorrect: Expected `str | Style`, found `(@Todo &amp; ~None) | (((str, /) -&gt; str | Style | None) &amp; ~AlwaysFalsy &amp; ~(() -&gt; object)) | (str &amp; ~AlwaysFalsy &amp; ~(() -&gt; object)) | (Style &amp; ~AlwaysFalsy &amp; ~(() -&gt; object))`
- Found 612 diagnostics
+ Found 610 diagnostics

websockets (https://github.com/aaugustin/websockets)
- src/websockets/legacy/server.py:634:37: error[invalid-argument-type] Argument to bound method `update` is incorrect: Expected `Mapping[str, str] | Iterable[tuple[str, str]] | SupportsKeysAndGetItem`, found `(Mapping[str, str] &amp; ~(() -&gt; object)) | (Iterable[tuple[str, str]] &amp; ~(() -&gt; object)) | (SupportsKeysAndGetItem &amp; ~(() -&gt; object)) | (((str, Headers, /) -&gt; Mapping[str, str] | Iterable[tuple[str, str]] | SupportsKeysAndGetItem) &amp; ~(() -&gt; object)) | (@Todo &amp; ~None)`
- Found 44 diagnostics
+ Found 43 diagnostics

werkzeug (https://github.com/pallets/werkzeug)
+ src/werkzeug/utils.py:506:45: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- src/werkzeug/utils.py:501:12: error[unsupported-operator] Operator `&gt;` is not supported between objects of type `(int &amp; ~(() -&gt; object)) | (((str | None, /) -&gt; int | None) &amp; ~(() -&gt; object)) | (@Todo &amp; ~None)` and `Literal[0]`
- src/werkzeug/utils.py:505:9: error[invalid-assignment] Object of type `(int &amp; ~(() -&gt; object)) | (((str | None, /) -&gt; int | None) &amp; ~(() -&gt; object)) | (@Todo &amp; ~None)` is not assignable to attribute `max_age` of type `int | None`
- src/werkzeug/wsgi.py:244:25: error[invalid-assignment] Object of type `list[Unknown | (() -&gt; None) | (Iterable[() -&gt; None] &amp; (() -&gt; object))]` is not assignable to `None | (() -&gt; None) | Iterable[() -&gt; None]`
+ src/werkzeug/wsgi.py:244:25: error[invalid-assignment] Object of type `list[Unknown | (() -&gt; None) | (Iterable[() -&gt; None] &amp; Top[(...) -&gt; object])]` is not assignable to `None | (() -&gt; None) | Iterable[() -&gt; None]`
- Found 387 diagnostics
+ Found 386 diagnostics

beartype (https://github.com/beartype/beartype)
- beartype/_check/metadata/metadecor.py:555:34: error[unresolved-attribute] Object of type `((...) -&gt; Unknown) &amp; (() -&gt; object)` has no attribute `__name__`
+ beartype/_check/metadata/metadecor.py:555:34: error[unresolved-attribute] Object of type `(...) -&gt; Unknown` has no attribute `__name__`
- beartype/_util/func/utilfuncscope.py:261:29: error[unresolved-attribute] Object of type `((...) -&gt; Unknown) &amp; (() -&gt; object)` has no attribute `__name__`
+ beartype/_util/func/utilfuncscope.py:261:29: error[unresolved-attribute] Object of type `(...) -&gt; Unknown` has no attribute `__name__`
- beartype/_util/func/utilfuncscope.py:320:16: error[unresolved-attribute] Object of type `((...) -&gt; Unknown) &amp; (() -&gt; object)` has no attribute `__qualname__`
+ beartype/_util/func/utilfuncscope.py:320:16: error[unresolved-attribute] Object of type `(...) -&gt; Unknown` has no attribute `__qualname__`
- beartype/_util/func/utilfuncscope.py:334:16: error[unresolved-attribute] Object of type `((...) -&gt; Unknown) &amp; (() -&gt; object)` has no attribute `__qualname__`
+ beartype/_util/func/utilfuncscope.py:334:16: error[unresolved-attribute] Object of type `(...) -&gt; Unknown` has no attribute `__qualname__`
- beartype/_util/func/utilfunctest.py:914:16: error[unresolved-attribute] Object of type `((...) -&gt; Unknown) &amp; ~(() -&gt; object)` has no attribute `__qualname__`
- beartype/typing/_typingcache.py:87:34: error[unresolved-attribute] Object of type `((...) -&gt; Unknown) &amp; (() -&gt; object)` has no attribute `__name__`
+ beartype/typing/_typingcache.py:87:34: error[unresolved-attribute] Object of type `(...) -&gt; Unknown` has no attribute `__name__`
- Found 495 diagnostics
+ Found 494 diagnostics

jinja (https://github.com/pallets/jinja)
- src/jinja2/runtime.py:690:38: error[invalid-assignment] Object of type `(Unknown &amp; ~(() -&gt; object)) | bool | (((str | None, /) -&gt; bool) &amp; ~(() -&gt; object))` is not assignable to `bool | None`
- src/jinja2/runtime.py:770:40: error[invalid-argument-type] Argument to bound method `_invoke` is incorrect: Expected `bool`, found `@Todo | bool | None`
- Found 182 diagnostics
+ Found 180 diagnostics

scrapy (https://github.com/scrapy/scrapy)
- scrapy/core/spidermw.py:138:50: error[invalid-argument-type] Argument to bound method `_check_mw_method_spider_arg` is incorrect: Expected `(...) -&gt; Unknown`, found `object`
- tests/test_utils_console.py:27:12: error[unresolved-attribute] Object of type `((...) -&gt; None) &amp; (() -&gt; object)` has no attribute `__name__`
+ tests/test_utils_console.py:27:12: error[unresolved-attribute] Object of type `(...) -&gt; None` has no attribute `__name__`
- tests/test_utils_console.py:34:12: error[unresolved-attribute] Object of type `((...) -&gt; None) &amp; (() -&gt; object)` has no attribute `__name__`
+ tests/test_utils_console.py:34:12: error[unresolved-attribute] Object of type `(...) -&gt; None` has no attribute `__name__`
- Found 1792 diagnostics
+ Found 1791 diagnostics

kopf (https://github.com/nolar/kopf)
+ kopf/_core/intents/registries.py:471:16: error[missing-argument] No arguments provided for required parameters 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17
+ kopf/_core/intents/registries.py:509:42: error[missing-argument] No arguments provided for required parameters 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17
+ kopf/_core/intents/registries.py:539:36: error[missing-argument] No arguments provided for required parameters 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17
+ kopf/_core/intents/registries.py:545:36: error[missing-argument] No arguments provided for required parameters 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17
- Found 263 diagnostics
+ Found 267 diagnostics

pytest (https://github.com/pytest-dev/pytest)
- src/_pytest/fixtures.py:557:43: error[invalid-argument-type] Argument to bound method `_check_scope` is incorrect: Expected `Scope`, found `Scope | (((str, Config, /) -&gt; Literal[&quot;session&quot;, &quot;package&quot;, &quot;module&quot;, &quot;class&quot;, &quot;function&quot;]) &amp; ~(() -&gt; object) &amp; ~str)`
- src/_pytest/fixtures.py:1003:17: error[invalid-argument-type] Argument to bound method `from_user` is incorrect: Expected `Literal[&quot;session&quot;, &quot;package&quot;, &quot;module&quot;, &quot;class&quot;, &quot;function&quot;]`, found `Literal[&quot;session&quot;, &quot;package&quot;, &quot;module&quot;, &quot;class&quot;, &quot;function&quot;] | (((str, Config, /) -&gt; Literal[&quot;session&quot;, &quot;package&quot;, &quot;module&quot;, &quot;class&quot;, &quot;function&quot;]) &amp; str &amp; ~(() -&gt; object))`
- src/_pytest/fixtures.py:1025:16: warning[possibly-missing-attribute] Attribute `value` may be missing on object of type `Scope | (((str, Config, /) -&gt; Literal[&quot;session&quot;, &quot;package&quot;, &quot;module&quot;, &quot;class&quot;, &quot;function&quot;]) &amp; ~(() -&gt; object) &amp; ~str)`
- src/_pytest/fixtures.py:1381:9: error[invalid-argument-type] Argument is incorrect: Expected `tuple[object, ...] | ((Any, /) -&gt; object) | None`, found `None | (Sequence[object] &amp; (() -&gt; object)) | (((Any, /) -&gt; object) &amp; (() -&gt; object)) | Unknown`
- src/_pytest/fixtures.py:1381:70: error[invalid-argument-type] Argument to class `tuple` is incorrect: Expected `Iterable[object]`, found `(Sequence[object] &amp; ~(() -&gt; object)) | (((Any, /) -&gt; object) &amp; ~(() -&gt; object))`
- src/_pytest/fixtures.py:1724:24: error[invalid-return-type] Return type does not match returned value: expected `Scope`, found `Scope | (((str, Config, /) -&gt; Literal[&quot;session&quot;, &quot;package&quot;, &quot;module&quot;, &quot;class&quot;, &quot;function&quot;]) &amp; ~(() -&gt; object) &amp; ~str)`
- src/_pytest/python.py:1435:39: error[invalid-argument-type] Argument to bound method `_validate_ids` is incorrect: Expected `Iterable[object]`, found `(Iterable[object] &amp; ~(() -&gt; object)) | (((Any, /) -&gt; object) &amp; ~(() -&gt; object))`
- src/_pytest/python.py:1439:13: error[invalid-argument-type] Argument is incorrect: Expected `((Any, /) -&gt; object) | None`, found `None | (Iterable[object] &amp; (() -&gt; object)) | (((Any, /) -&gt; object) &amp; (() -&gt; object))`
- src/_pytest/python.py:1534:20: error[invalid-argument-type] Argument to function `min` is incorrect: Argument type `Scope | (((str, Config, /) -&gt; str) &amp; ~(() -&gt; object) &amp; ~str) | Unknown` does not satisfy upper bound `SupportsDunderLT[Any] | SupportsDunderGT[Any]` of type variable `SupportsRichComparisonT`
- Found 436 diagnostics
+ Found 427 diagnostics

starlette (https://github.com/encode/starlette)
+ starlette/_exception_handler.py:59:42: error[invalid-argument-type] Argument is incorrect: Expected `WebSocket`, found `Request | WebSocket`
+ starlette/middleware/errors.py:176:51: error[invalid-argument-type] Argument is incorrect: Expected `WebSocket`, found `Request`
+ starlette/middleware/errors.py:181:23: error[call-non-callable] Object of type `None` is not callable
- starlette/routing.py:67:51: error[invalid-assignment] Object of type `(((Request, /) -&gt; Awaitable[Response] | Response) &amp; (() -&gt; Awaitable[object])) | partial[Unknown]` is not assignable to `(Request, /) -&gt; Awaitable[Response]`
- Found 215 diagnostics
+ Found 217 diagnostics

ignite (https://github.com/pytorch/ignite)
- ignite/handlers/base_logger.py:52:29: error[not-iterable] Object of type `(list[str] &amp; ~(() -&gt; object)) | (((str, Unknown, /) -&gt; bool) &amp; ~(() -&gt; object))` may not be iterable
- ignite/handlers/clearml_logger.py:502:46: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | (((Unknown, /) -&gt; int | float | Unknown) &amp; (() -&gt; object))`
+ ignite/handlers/clearml_logger.py:502:46: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | ((Unknown, /) -&gt; int | float | Unknown)`
- ignite/handlers/clearml_logger.py:691:44: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | (((Unknown, /) -&gt; int | float | Unknown) &amp; (() -&gt; object))`
+ ignite/handlers/clearml_logger.py:691:44: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | ((Unknown, /) -&gt; int | float | Unknown)`
- ignite/handlers/neptune_logger.py:505:42: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | (((Unknown, /) -&gt; int | float | Unknown) &amp; (() -&gt; object))`
+ ignite/handlers/neptune_logger.py:505:42: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | ((Unknown, /) -&gt; int | float | Unknown)`
- ignite/handlers/neptune_logger.py:609:40: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | (((Unknown, /) -&gt; int | float | Unknown) &amp; (() -&gt; object))`
+ ignite/handlers/neptune_logger.py:609:40: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | ((Unknown, /) -&gt; int | float | Unknown)`
- ignite/handlers/tensorboard_logger.py:477:40: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | (((Unknown, /) -&gt; int | float | Unknown) &amp; (() -&gt; object))`
+ ignite/handlers/tensorboard_logger.py:477:40: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | ((Unknown, /) -&gt; int | float | Unknown)`
- ignite/handlers/tensorboard_logger.py:641:38: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | (((Unknown, /) -&gt; int | float | Unknown) &amp; (() -&gt; object))`
+ ignite/handlers/tensorboard_logger.py:641:38: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | ((Unknown, /) -&gt; int | float | Unknown)`
- ignite/handlers/visdom_logger.py:491:40: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | (((Unknown, /) -&gt; int | float | Unknown) &amp; (() -&gt; object))`
+ ignite/handlers/visdom_logger.py:491:40: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | ((Unknown, /) -&gt; int | float | Unknown)`
- ignite/handlers/visdom_logger.py:542:38: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | (((Unknown, /) -&gt; int | float | Unknown) &amp; (() -&gt; object))`
+ ignite/handlers/visdom_logger.py:542:38: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | ((Unknown, /) -&gt; int | float | Unknown)`
- Found 2054 diagnostics
+ Found 2053 diagnostics

rich (https://github.com/Textualize/rich)
- rich/_log_render.py:62:59: error[invalid-argument-type] Argument to bound method `strftime` is incorrect: Expected `str`, found `(str &amp; ~(() -&gt; object)) | (((datetime, /) -&gt; Text) &amp; ~(() -&gt; object)) | (Unknown &amp; ~(() -&gt; object))`
- rich/text.py:624:51: error[invalid-argument-type] Argument is incorrect: Expected `str | Style`, found `(@Todo &amp; ~None) | (((str, /) -&gt; str | Style | None) &amp; ~AlwaysFalsy &amp; ~(() -&gt; object)) | (str &amp; ~AlwaysFalsy &amp; ~(() -&gt; object)) | (Style &amp; ~AlwaysFalsy &amp; ~(() -&gt; object))`
- Found 348 diagnostics
+ Found 346 diagnostics

dulwich (https://github.com/dulwich/dulwich)
- dulwich/pack.py:3512:13: warning[possibly-missing-attribute] Attribute `write` may be missing on object of type `(((bytes, /) -&gt; None) &amp; ~(() -&gt; object)) | (((bytes | bytearray | memoryview[int], /) -&gt; int) &amp; ~(() -&gt; object)) | (IO[bytes] &amp; ~(() -&gt; object))`
- dulwich/worktree.py:598:33: warning[possibly-missing-attribute] Attribute `encode` may be missing on object of type `(@Todo &amp; ~None &amp; ~bytes) | (str &amp; ~(() -&gt; object)) | (((Any, Commit, /) -&gt; bytes) &amp; ~(() -&gt; object) &amp; ~bytes)`
- dulwich/worktree.py:643:29: error[unsupported-operator] Operator `+` is not supported between objects of type `Literal[b&quot;commit: &quot;]` and `bytes | (@Todo &amp; ~None &amp; ~str) | (((Any, Commit, /) -&gt; bytes) &amp; ~(() -&gt; object) &amp; ~str)`
- dulwich/worktree.py:661:29: error[unsupported-operator] Operator `+` is not supported between objects of type `Literal[b&quot;commit: &quot;]` and `bytes | (@Todo &amp; ~None &amp; ~str) | (((Any, Commit, /) -&gt; bytes) &amp; ~(() -&gt; object) &amp; ~str)`
- Found 231 diagnostics
+ Found 227 diagnostics

schemathesis (https://github.com/schemathesis/schemathesis)
- src/schemathesis/hooks.py:302:16: error[unresolved-attribute] Object of type `(str &amp; (() -&gt; object)) | (((...) -&gt; Unknown) &amp; (() -&gt; object))` has no attribute `__name__`
+ src/schemathesis/hooks.py:302:16: error[unresolved-attribute] Object of type `(str &amp; Top[(...) -&gt; object]) | ((...) -&gt; Unknown)` has no attribute `__name__`

tornado (https://github.com/tornadoweb/tornado)
- tornado/escape.py:336:30: warning[possibly-missing-attribute] Attribute `strip` may be missing on object of type `(str &amp; ~AlwaysFalsy &amp; ~(() -&gt; object)) | (((str, /) -&gt; str) &amp; ~AlwaysFalsy &amp; ~(() -&gt; object))`
- tornado/gen.py:255:62: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `None | Awaitable[Unknown] | list[Awaitable[Unknown]] | dict[Any, Awaitable[Unknown]] | Future[Unknown]`, found `_T@next | _VT@next | _T@next`
+ tornado/gen.py:255:62: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `None | Awaitable[Unknown] | list[Awaitable[Unknown]] | dict[Any, Awaitable[Unknown]] | Future[Unknown]`, found `_T@next | _T@next | _VT@next`
- Found 328 diagnostics
+ Found 327 diagnostics

optuna (https://github.com/optuna/optuna)
+ tests/test_deprecated.py:56:12: error[unresolved-attribute] Object of type `(...) -&gt; Unknown` has no attribute `__name__`
+ tests/test_deprecated.py:72:12: error[unresolved-attribute] Object of type `(...) -&gt; Unknown` has no attribute `__name__`
+ tests/test_deprecated.py:192:12: error[unresolved-attribute] Object of type `(...) -&gt; Unknown` has no attribute `__name__`
+ tests/test_experimental.py:55:12: error[unresolved-attribute] Object of type `(...) -&gt; Unknown` has no attribute `__name__`
+ tests/test_experimental.py:68:12: error[unresolved-attribute] Object of type `(...) -&gt; Unknown` has no attribute `__name__`
+ tests/test_experimental.py:81:12: error[unresolved-attribute] Object of type `(...) -&gt; Unknown` has no attribute `__name__`
- Found 554 diagnostics
+ Found 560 diagnostics

vision (https://github.com/pytorch/vision)
- test/datasets_utils.py:835:52: error[invalid-argument-type] Argument to function `create_image_file` is incorrect: Expected `Sequence[int] | int`, found `@Todo | (Sequence[int] &amp; ~(() -&gt; object)) | (int &amp; ~(() -&gt; object)) | (((int, /) -&gt; Sequence[int] | int) &amp; ~(() -&gt; object))`
- torchvision/transforms/v2/_utils.py:149:16: error[invalid-return-type] Return type does not match returned value: expected `(Any, /) -&gt; Any`, found `(str &amp; (() -&gt; object)) | (((Any, /) -&gt; Any) &amp; (() -&gt; object))`
- Found 1414 diagnostics
+ Found 1412 diagnostics

antidote (https://github.com/Finistere/antidote)
- src/antidote/core/_injection.py:298:9: error[unresolved-attribute] Object of type `((...) -&gt; object) &amp; ~staticmethod[(), object] &amp; ~Top[classmethod[Unknown, (), object]]` has no attribute `__qualname__`
+ src/antidote/core/_injection.py:298:9: error[unresolved-attribute] Object of type `((...) -&gt; object) &amp; ~staticmethod[Top[(...)], object] &amp; ~Top[classmethod[Unknown, Top[(...)], object]]` has no attribute `__qualname__`
- src/antidote/core/_injection.py:298:30: error[unresolved-attribute] Object of type `((...) -&gt; object) &amp; ~staticmethod[(), object] &amp; ~Top[classmethod[Unknown, (), object]]` has no attribute `__name__`
+ src/antidote/core/_injection.py:298:30: error[unresolved-attribute] Object of type `((...) -&gt; object) &amp; ~staticmethod[Top[(...)], object] &amp; ~Top[classmethod[Unknown, Top[(...)], object]]` has no attribute `__name__`
- src/antidote/core/_injection.py:302:17: error[unresolved-attribute] Object of type `((...) -&gt; object) &amp; ~staticmethod[(), object] &amp; ~Top[classmethod[Unknown, (), object]] &amp; ~MethodType` has no attribute `__qualname__`
+ src/antidote/core/_injection.py:302:17: error[unresolved-attribute] Object of type `((...) -&gt; object) &amp; ~staticmethod[Top[(...)], object] &amp; ~Top[classmethod[Unknown, Top[(...)], object]] &amp; ~MethodType` has no attribute `__qualname__`
- src/antidote/core/_injection.py:302:42: error[unresolved-attribute] Object of type `((...) -&gt; object) &amp; ~staticmethod[(), object] &amp; ~Top[classmethod[Unknown, (), object]] &amp; ~MethodType` has no attribute `__name__`
+ src/antidote/core/_injection.py:302:42: error[unresolved-attribute] Object of type `((...) -&gt; object) &amp; ~staticmethod[Top[(...)], object] &amp; ~Top[classmethod[Unknown, Top[(...)], object]] &amp; ~MethodType` has no attribute `__name__`

Tanjun (https://github.com/FasterSpeeding/Tanjun)
- tanjun/dependencies/data.py:347:12: error[invalid-return-type] Return type does not match returned value: expected `_T@cached_inject`, found `Coroutine[Any, Any, _T@cached_inject | Coroutine[Any, Any, _T@cached_inject]] | _T@cached_inject`
+ tanjun/dependencies/data.py:347:12: error[invalid-return-type] Return type does not match returned value: expected `_T@cached_inject`, found `_T@cached_inject | Coroutine[Any, Any, _T@cached_inject | Coroutine[Any, Any, _T@cached_inject]]`

freqtrade (https://github.com/freqtrade/freqtrade)
- freqtrade/strategy/informative_decorator.py:150:21: warning[possibly-missing-attribute] Attribute `format` may be missing on object of type `(str &amp; ~AlwaysFalsy &amp; ~(() -&gt; object)) | (((Any, /) -&gt; str) &amp; ~AlwaysFalsy &amp; ~(() -&gt; object))`
- Found 688 diagnostics
+ Found 687 diagnostics

discord.py (https://github.com/Rapptz/discord.py)
- discord/app_commands/commands.py:2477:17: error[invalid-assignment] Object of type `list[Unknown]` is not assignable to attribute `__discord_app_commands_checks__` on type `(((...) -&gt; Coroutine[Any, Any, Unknown]) &amp; ~Top[Command[Unknown, (), Unknown]] &amp; ~ContextMenu &amp; ~&lt;Protocol with members '__discord_app_commands_checks__'&gt;) | (((Interaction[Any], Member, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]] &amp; ~ContextMenu &amp; ~&lt;Protocol with members '__discord_app_commands_checks__'&gt;) | (((Interaction[Any], User, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]] &amp; ~ContextMenu &amp; ~&lt;Protocol with members '__discord_app_commands_checks__'&gt;) | (((Interaction[Any], Message, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]] &amp; ~ContextMenu &amp; ~&lt;Protocol with members '__discord_app_commands_checks__'&gt;)`
+ discord/app_commands/commands.py:2477:17: error[invalid-assignment] Object of type `list[Unknown]` is not assignable to attribute `__discord_app_commands_checks__` on type `(((...) -&gt; Coroutine[Any, Any, Unknown]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]] &amp; ~ContextMenu &amp; ~&lt;Protocol with members '__discord_app_commands_checks__'&gt;) | (((Interaction[Any], Member, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]] &amp; ~ContextMenu &amp; ~&lt;Protocol with members '__discord_app_commands_checks__'&gt;) | (((Interaction[Any], User, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]] &amp; ~ContextMenu &amp; ~&lt;Protocol with members '__discord_app_commands_checks__'&gt;) | (((Interaction[Any], Message, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]] &amp; ~ContextMenu &amp; ~&lt;Protocol with members '__discord_app_commands_checks__'&gt;)`
- discord/app_commands/commands.py:2479:13: error[unresolved-attribute] Object of type `(((...) -&gt; Coroutine[Any, Any, Unknown]) &amp; ~Top[Command[Unknown, (), Unknown]] &amp; ~ContextMenu) | (((Interaction[Any], Member, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]] &amp; ~ContextMenu) | (((Interaction[Any], User, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]] &amp; ~ContextMenu) | (((Interaction[Any], Message, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]] &amp; ~ContextMenu)` has no attribute `__discord_app_commands_checks__`
+ discord/app_commands/commands.py:2479:13: error[unresolved-attribute] Object of type `(((...) -&gt; Coroutine[Any, Any, Unknown]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]] &amp; ~ContextMenu) | (((Interaction[Any], Member, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]] &amp; ~ContextMenu) | (((Interaction[Any], User, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]] &amp; ~ContextMenu) | (((Interaction[Any], Message, /) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]] &amp; ~ContextMenu)` has no attribute `__discord_app_commands_checks__`
- discord/app_commands/errors.py:453:95: error[unresolved-attribute] Object of type `(() -&gt; Coroutine[object, Never, object]) | ((...) -&gt; Coroutine[Any, Any, Unknown])` has no attribute `__qualname__`
+ discord/app_commands/errors.py:453:95: error[unresolved-attribute] Object of type `Top[(...) -&gt; Coroutine[object, Never, object]]` has no attribute `__qualname__`
- discord/ext/commands/core.py:1942:17: error[invalid-assignment] Object of type `list[Unknown]` is not assignable to attribute `__commands_checks__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]] &amp; ~&lt;Protocol with members '__commands_checks__'&gt;`
+ discord/ext/commands/core.py:1942:17: error[invalid-assignment] Object of type `list[Unknown]` is not assignable to attribute `__commands_checks__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]] &amp; ~&lt;Protocol with members '__commands_checks__'&gt;`
- discord/ext/commands/core.py:1944:13: error[unresolved-attribute] Object of type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]]` has no attribute `__commands_checks__`
+ discord/ext/commands/core.py:1944:13: error[unresolved-attribute] Object of type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]]` has no attribute `__commands_checks__`
- discord/ext/commands/core.py:2365:17: error[invalid-assignment] Object of type `list[Unknown]` is not assignable to attribute `__commands_checks__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]] &amp; ~&lt;Protocol with members '__commands_checks__'&gt;`
+ discord/ext/commands/core.py:2365:17: error[invalid-assignment] Object of type `list[Unknown]` is not assignable to attribute `__commands_checks__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]] &amp; ~&lt;Protocol with members '__commands_checks__'&gt;`
- discord/ext/commands/core.py:2367:13: error[unresolved-attribute] Object of type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]]` has no attribute `__commands_checks__`
+ discord/ext/commands/core.py:2367:13: error[unresolved-attribute] Object of type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]]` has no attribute `__commands_checks__`
- discord/ext/commands/core.py:2368:13: error[invalid-assignment] Object of type `Literal[True]` is not assignable to attribute `__discord_app_commands_guild_only__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]]`
+ discord/ext/commands/core.py:2368:13: error[invalid-assignment] Object of type `Literal[True]` is not assignable to attribute `__discord_app_commands_guild_only__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]]`
- discord/ext/commands/core.py:2440:17: error[invalid-assignment] Object of type `list[Unknown]` is not assignable to attribute `__commands_checks__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]] &amp; ~&lt;Protocol with members '__commands_checks__'&gt;`
+ discord/ext/commands/core.py:2440:17: error[invalid-assignment] Object of type `list[Unknown]` is not assignable to attribute `__commands_checks__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]] &amp; ~&lt;Protocol with members '__commands_checks__'&gt;`
- discord/ext/commands/core.py:2442:13: error[unresolved-attribute] Object of type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]]` has no attribute `__commands_checks__`
+ discord/ext/commands/core.py:2442:13: error[unresolved-attribute] Object of type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]]` has no attribute `__commands_checks__`
- discord/ext/commands/core.py:2443:13: error[invalid-assignment] Object of type `Literal[True]` is not assignable to attribute `__discord_app_commands_is_nsfw__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]]`
+ discord/ext/commands/core.py:2443:13: error[invalid-assignment] Object of type `Literal[True]` is not assignable to attribute `__discord_app_commands_is_nsfw__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]]`
- discord/ext/commands/core.py:2499:13: error[invalid-assignment] Object of type `CooldownMapping[Context[Any]]` is not assignable to attribute `__commands_cooldown__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]]`
+ discord/ext/commands/core.py:2499:13: error[invalid-assignment] Object of type `CooldownMapping[Context[Any]]` is not assignable to attribute `__commands_cooldown__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]]`
- discord/ext/commands/core.py:2547:13: error[invalid-assignment] Object of type `DynamicCooldownMapping[Context[Any]]` is not assignable to attribute `__commands_cooldown__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]]`
+ discord/ext/commands/core.py:2547:13: error[invalid-assignment] Object of type `DynamicCooldownMapping[Context[Any]]` is not assignable to attribute `__commands_cooldown__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]]`
- discord/ext/commands/core.py:2582:13: error[invalid-assignment] Object of type `MaxConcurrency` is not assignable to attribute `__commands_max_concurrency__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]]`
+ discord/ext/commands/core.py:2582:13: error[invalid-assignment] Object of type `MaxConcurrency` is not assignable to attribute `__commands_max_concurrency__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]]`
- discord/ext/commands/core.py:2634:13: error[invalid-assignment] Object of type `((CogT@before_invoke, ContextT@before_invoke, /) -&gt; Coroutine[Any, Any, Any]) | ((ContextT@before_invoke, /) -&gt; Coroutine[Any, Any, Any])` is not assignable to attribute `__before_invoke__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]]`
+ discord/ext/commands/core.py:2634:13: error[invalid-assignment] Object of type `((CogT@before_invoke, ContextT@before_invoke, /) -&gt; Coroutine[Any, Any, Any]) | ((ContextT@before_invoke, /) -&gt; Coroutine[Any, Any, Any])` is not assignable to attribute `__before_invoke__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]]`
- discord/ext/commands/core.py:2657:13: error[invalid-assignment] Object of type `((CogT@after_invoke, ContextT@after_invoke, /) -&gt; Coroutine[Any, Any, Any]) | ((ContextT@after_invoke, /) -&gt; Coroutine[Any, Any, Any])` is not assignable to attribute `__after_invoke__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, (), Unknown]]`
+ discord/ext/commands/core.py:2657:13: error[invalid-assignment] Object of type `((CogT@after_invoke, ContextT@after_invoke, /) -&gt; Coroutine[Any, Any, Any]) | ((ContextT@after_invoke, /) -&gt; Coroutine[Any, Any, Any])` is not assignable to attribute `__after_invoke__` on type `((...) -&gt; Coroutine[Any, Any, Any]) &amp; ~Top[Command[Unknown, Top[(...)], Unknown]]`

manticore (https://github.com/trailofbits/manticore)
- manticore/platforms/wasm.py:262:68: error[invalid-argument-type] Argument is incorrect: Expected `FunctionType`, found `(ProtoFuncInst &amp; (() -&gt; object) &amp; ~FuncAddr &amp; ~TableAddr &amp; ~MemAddr &amp; ~GlobalAddr &amp; ~AlwaysFalsy) | (TableInst &amp; (() -&gt; object) &amp; ~FuncAddr &amp; ~TableAddr &amp; ~MemAddr &amp; ~GlobalAddr &amp; ~AlwaysFalsy) | (MemInst &amp; (() -&gt; object) &amp; ~FuncAddr &amp; ~TableAddr &amp; ~MemAddr &amp; ~GlobalAddr &amp; ~AlwaysFalsy) | (GlobalInst &amp; (() -&gt; object) &amp; ~FuncAddr &amp; ~TableAddr &amp; ~MemAddr &amp; ~GlobalAddr &amp; ~AlwaysFalsy) | (((...) -&gt; Unknown) &amp; (() -&gt; object) &amp; ~FuncAddr &amp; ~TableAddr &amp; ~MemAddr &amp; ~GlobalAddr &amp; ~AlwaysFalsy)`
+ manticore/platforms/wasm.py:262:68: error[invalid-argument-type] Argument is incorrect: Expected `FunctionType`, found `(ProtoFuncInst &amp; Top[(...) -&gt; object] &amp; ~FuncAddr &amp; ~TableAddr &amp; ~MemAddr &amp; ~GlobalAddr &amp; ~AlwaysFalsy) | (TableInst &amp; Top[(...) -&gt; object] &amp; ~FuncAddr &amp; ~TableAddr &amp; ~MemAddr &amp; ~GlobalAddr &amp; ~AlwaysFalsy) | (MemInst &amp; Top[(...) -&gt; object] &amp; ~FuncAddr &amp; ~TableAddr &amp; ~MemAddr &amp; ~GlobalAddr &amp; ~AlwaysFalsy) | (GlobalInst &amp; Top[(...) -&gt; object] &amp; ~FuncAddr &amp; ~TableAddr &amp; ~MemAddr &amp; ~GlobalAddr &amp; ~AlwaysFalsy) | (((...) -&gt; Unknown) &amp; ~FuncAddr &amp; ~TableAddr &amp; ~MemAddr &amp; ~GlobalAddr &amp; ~AlwaysFalsy)`

meson (https://github.com/mesonbuild/meson)
- mesonbuild/compilers/compilers.py:1336:9: error[unsupported-operator] Operator `+=` is not supported between objects of type `CompilerArgs` and `(CompilerArgs &amp; ~(() -&gt; object)) | (list[str] &amp; ~(() -&gt; object)) | (((CompileCheckMode, /) -&gt; list[str]) &amp; ~(() -&gt; object)) | (@Todo &amp; ~None) | list[Unknown]`
- mesonbuild/compilers/d.py:565:29: error[invalid-argument-type] Argument to bound method `extend` is incorrect: Expected `Iterable[str]`, found `(list[str] &amp; ~AlwaysFalsy &amp; ~(() -&gt; object)) | (((CompileCheckMode, /) -&gt; list[str]) &amp; Top[list[Unknown]] &amp; ~AlwaysFalsy &amp; ~(() -&gt; object)) | (@Todo &amp; Top[list[Unknown]])`
- mesonbuild/compilers/vala.py:195:9: error[unsupported-operator] Operator `+=` is not supported between objects of type `CompilerArgs` and `(CompilerArgs &amp; ~(() -&gt; object)) | (list[str] &amp; ~(() -&gt; object)) | (((CompileCheckMode, /) -&gt; list[str]) &amp; ~(() -&gt; object)) | (@Todo &amp; ~None) | list[Unknown]`
- Found 1949 diagnostics
+ Found 1946 diagnostics

setuptools (https://github.com/pypa/setuptools)
+ setuptools/_vendor/jaraco/collections/__init__.py:42:29: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- setuptools/_vendor/typing_extensions.py:2855:17: error[invalid-assignment] Object of type `Unknown | str` is not assignable to attribute `__deprecated__` on type `_T@__call__ &amp; (() -&gt; object) &amp; ~type`
+ setuptools/_vendor/typing_extensions.py:2855:17: error[invalid-assignment] Object of type `Unknown | str` is not assignable to attribute `__deprecated__` on type `_T@__call__ &amp; Top[(...) -&gt; object] &amp; ~type`
- setuptools/config/_apply_pyprojecttoml.py:84:31: error[invalid-argument-type] Argument to function `_set_config` is incorrect: Expected `str`, found `(((Distribution, Any, str | PathLike[str] | None, /) -&gt; None) &amp; ~(() -&gt; object)) | (str &amp; ~(() -&gt; object))`
- setuptools/config/_apply_pyprojecttoml.py:124:31: error[invalid-argument-type] Argument to function `_set_config` is incorrect: Expected `str`, found `(Unknown &amp; ~(() -&gt; object)) | (partial[None] &amp; ~(() -&gt; object))`
- setuptools/config/expand.py:334:34: error[invalid-argument-type] Argument to function `__new__` is incorrect: Expected `Iterable[Buffer]`, found `(@Todo &amp; &lt;Protocol with members '__iter__'&gt; &amp; ~str) | (((...) -&gt; Unknown) &amp; &lt;Protocol with members '__iter__'&gt; &amp; ~(() -&gt; object) &amp; ~str) | (Iterable[str | int] &amp; ~(() -&gt; object) &amp; ~str)`
+ setuptools/config/expand.py:334:34: error[invalid-argument-type] Argument to function `__new__` is incorrect: Expected `Iterable[Buffer]`, found `(Unknown &amp; &lt;Protocol with members '__iter__'&gt; &amp; ~str) | (Iterable[str | int] &amp; ~Top[(...) -&gt; object] &amp; ~str)`
- Found 1272 diagnostics
+ Found 1271 diagnostics

archinstall (https://github.com/archlinux/archinstall)
- archinstall/lib/output.py:36:20: error[invalid-argument-type] Argument to function `hasattr` is incorrect: Expected `str`, found `(str &amp; ~AlwaysFalsy &amp; ~(() -&gt; object)) | (((...) -&gt; Unknown) &amp; ~AlwaysFalsy &amp; ~(() -&gt; object))`
- archinstall/lib/output.py:36:61: error[invalid-argument-type] Argument to function `getattr` is incorrect: Expected `str`, found `(str &amp; ~AlwaysFalsy &amp; ~(() -&gt; object)) | (((...) -&gt; Unknown) &amp; ~AlwaysFalsy &amp; ~(() -&gt; object))`
- archinstall/lib/output.py:37:23: error[invalid-argument-type] Argument to function `getattr` is incorrect: Expected `str`, found `(str &amp; ~AlwaysFalsy &amp; ~(() -&gt; object)) | (((...) -&gt; Unknown) &amp; ~AlwaysFalsy &amp; ~(() -&gt; object))`
- Found 46 diagnostics
+ Found 43 diagnostics

hydra-zen (https://github.com/mit-ll-responsible-ai/hydra-zen)
- src/hydra_zen/funcs.py:55:20: error[invalid-assignment] Object of type `() -&gt; object` is not assignable to `(...) -&gt; T@partial_with_wrapper`
+ src/hydra_zen/funcs.py:55:20: error[invalid-assignment] Object of type `Top[(...) -&gt; object]` is not assignable to `(...) -&gt; T@partial_with_wrapper`
- src/hydra_zen/structured_configs/_implementations.py:2253:47: error[invalid-argument-type] Argument to function `get_target_path` is incorrect: Expected `HasTarget`, found `(() -&gt; object) &amp; type`
+ src/hydra_zen/structured_configs/_implementations.py:2253:47: error[invalid-argument-type] Argument to function `get_target_path` is incorrect: Expected `HasTarget`, found `type`

strawberry (https://github.com/strawberry-graphql/strawberry)
+ strawberry/cli/utils/__init__.py:23:29: error[call-top-callable] Object of type `Top[(...) -&gt; object]` is not safe to call; its signature is not known
+ strawberry/types/field.py:143:38: error[call-top-callable] Object of type `Top[(...) -&gt; object]` is not safe to call; its signature is not known
- strawberry/types/fields/resolver.py:392:20: error[invalid-return-type] Return type does not match returned value: expected `(...) -&gt; T@StrawberryResolver`, found `(() -&gt; object) | ((...) -&gt; Unknown) | ((...) -&gt; Unknown)`
+ strawberry/types/fields/resolver.py:392:20: error[invalid-return-type] Return type does not match returned value: expected `(...) -&gt; T@StrawberryResolver`, found `Top[(...) -&gt; object]`
- Found 384 diagnostics
+ Found 386 diagnostics

xarray (https://github.com/pydata/xarray)
- xarray/core/common.py:518:16: error[invalid-return-type] Return type does not match returned value: expected `dict[Hashable, T@_calc_assign_results]`, found `dict[Any, @Todo | (T@_calc_assign_results &amp; ~(() -&gt; object)) | (((C@_calc_assign_results, /) -&gt; T@_calc_assign_results) &amp; ~(() -&gt; object))]`
- xarray/core/dataarray.py:3251:48: error[invalid-argument-type] Argument to bound method `drop_vars` is incorrect: Expected `Iterable[Hashable] | ((Dataset, /) -&gt; Iterable[Hashable])`, found `@Todo | (Iterable[Hashable] &amp; ~(() -&gt; object)) | (((Self@drop_vars, /) -&gt; Unknown | Iterable[Hashable]) &amp; ~(() -&gt; object))`
- xarray/core/dataarray.py:5277:35: error[too-many-positional-arguments] Too many positional arguments: expected 0, got 1
+ xarray/core/dataarray.py:5277:25: error[call-top-callable] Object of type `Top[(...) -&gt; object]` is not safe to call; its signature is not known
- xarray/core/dataset.py:1527:35: error[invalid-argument-type] Argument to function `getattr` is incorrect: Expected `str`, found `(str &amp; ~(() -&gt; object)) | (((Variable, Variable, /) -&gt; bool) &amp; ~(() -&gt; object))`
- xarray/core/dataset.py:1530:48: error[invalid-argument-type] Argument to function `dict_equiv` is incorrect: Expected `(Variable, Variable, /) -&gt; bool`, found `(str &amp; (() -&gt; object)) | (((Variable, Variable, /) -&gt; bool) &amp; (() -&gt; object)) | (def compat(x: Variable, y: Variable) -&gt; bool)`
+ xarray/core/dataset.py:1530:48: error[invalid-argument-type] Argument to function `dict_equiv` is incorrect: Expected `(Variable, Variable, /) -&gt; bool`, found `(str &amp; Top[(...) -&gt; object]) | ((Variable, Variable, /) -&gt; bool)`
- xarray/core/dataset.py:8110:35: error[too-many-positional-arguments] Too many positional arguments: expected 0, got 1
+ xarray/core/dataset.py:8110:25: error[call-top-callable] Object of type `Top[(...) -&gt; object]` is not safe to call; its signature is not known
- Found 1786 diagnostics
+ Found 1783 diagnostics

altair (https://github.com/vega/altair)
- altair/utils/plugin_registry.py:110:44: error[invalid-parameter-default] Default value of type `def callable(obj: object, /) -&gt; TypeIs[() -&gt; object]` is not assignable to annotated parameter type `(object, /) -&gt; TypeIs[object]`
+ altair/utils/plugin_registry.py:110:44: error[invalid-parameter-default] Default value of type `def callable(obj: object, /) -&gt; TypeIs[Top[(...) -&gt; object]]` is not assignable to annotated parameter type `(object, /) -&gt; TypeIs[object]`

bokeh (https://github.com/bokeh/bokeh)
- src/bokeh/core/property/bases.py:187:24: error[invalid-return-type] Return type does not match returned value: expected `T@Property`, found `(() -&gt; T@Property) | (T@Property &amp; (() -&gt; object))`
+ src/bokeh/core/property/bases.py:187:24: error[invalid-return-type] Return type does not match returned value: expected `T@Property`, found `(() -&gt; T@Property) | (T@Property &amp; Top[(...) -&gt; object])`
- src/bokeh/io/notebook.py:568:30: error[invalid-argument-type] Argument to function `_origin_url` is incorrect: Expected `str`, found `(str &amp; ~(() -&gt; object)) | (((int | None, /) -&gt; str) &amp; ~(() -&gt; object))`
- src/bokeh/io/notebook.py:580:27: error[invalid-argument-type] Argument to function `_server_url` is incorrect: Expected `str`, found `(str &amp; ~(() -&gt; object)) | (((int | None, /) -&gt; str) &amp; ~(() -&gt; object))`
- src/bokeh/server/tornado.py:286:56: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `(Document, /) -&gt; None`, found `(Mapping[str, Application | ((Document, /) -&gt; None)] &amp; (() -&gt; object)) | (Application &amp; (() -&gt; object)) | (((Document, /) -&gt; None) &amp; (() -&gt; object))`
+ src/bokeh/server/tornado.py:286:56: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `(Document, /) -&gt; None`, found `(Mapping[str, Application | ((Document, /) -&gt; None)] &amp; Top[(...) -&gt; object]) | (Application &amp; Top[(...) -&gt; object]) | ((Document, /) -&gt; None)`
- src/bokeh/server/tornado.py:291:28: error[no-matching-overload] No overload of bound method `__init__` matches arguments
- src/bokeh/server/tornado.py:295:71: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `(Document, /) -&gt; None`, found `(Unknown &amp; (() -&gt; object)) | (Application &amp; (() -&gt; object))`
+ src/bokeh/server/tornado.py:295:71: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `(Document, /) -&gt; None`, found `(Unknown &amp; Top[(...) -&gt; object]) | (Application &amp; Top[(...) -&gt; object])`
- src/bokeh/server/tornado.py:295:71: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `(Document, /) -&gt; None`, found `(Unknown &amp; (() -&gt; object)) | (Application &amp; (() -&gt; object))`
+ src/bokeh/server/tornado.py:295:71: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `(Document, /) -&gt; None`, found `(Unknown &amp; Top[(...) -&gt; object]) | (Application &amp; Top[(...) -&gt; object])`
- Found 896 diagnostics
+ Found 893 diagnostics

prefect (https://github.com/PrefectHQ/prefect)
- src/integrations/prefect-dbt/prefect_dbt/core/settings.py:94:28: error[invalid-assignment] Object of type `T@resolve_block_document_references | dict[str, Any]` is not assignable to `dict[str, Any]`
+ src/integrations/prefect-dbt/prefect_dbt/core/settings.py:94:28: error[invalid-assignment] Object of type `T@resolve_block_document_references | int | dict[str, Any] | ... omitted 4 union elements` is not assignable to `dict[str, Any]`
- src/integrations/prefect-dbt/prefect_dbt/core/settings.py:99:28: error[invalid-assignment] Object of type `T@resolve_variables | dict[str, Any]` is not assignable to `dict[str, Any]`
+ src/integrations/prefect-dbt/prefect_dbt/core/settings.py:99:28: error[invalid-assignment] Object of type `int | T@resolve_variables | float | ... omitted 4 union elements` is not assignable to `dict[str, Any]`
- src/prefect/cli/deploy/_core.py:86:21: error[invalid-assignment] Object of type `T@resolve_block_document_references | dict[str, Any]` is not assignable to `dict[str, Any]`
+ src/prefect/cli/deploy/_core.py:86:21: error[invalid-assignment] Object of type `T@resolve_block_document_references | int | dict[str, Any] | ... omitted 4 union elements` is not assignable to `dict[str, Any]`
- src/prefect/cli/deploy/_core.py:87:21: error[invalid-assignment] Object of type `T@resolve_variables` is not assignable to `dict[str, Any]`
+ src/prefect/cli/deploy/_core.py:87:21: error[invalid-assignment] Object of type `int | T@resolve_variables | float | ... omitted 4 union elements` is not assignable to `dict[str, Any]`
- src/prefect/deployments/steps/core.py:137:38: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `T@resolve_block_document_references | dict[str, Any]`
+ src/prefect/deployments/steps/core.py:137:38: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `T@resolve_block_document_references | int | dict[str, Any] | ... omitted 4 union elements`
- src/prefect/task_engine.py:438:13: error[invalid-assignment] Object of type `Unknown | None | (((Task[(...), Any], TaskRun, State[Any], /) -&gt; Awaitable[bool] | bool) &amp; (() -&gt; object))` is not assignable to `((Task[P@SyncTaskRunEngine, Coroutine[Any, Any, R@SyncTaskRunEngine]], TaskRun, State[R@SyncTaskRunEngine], /) -&gt; bool) | None`
+ src/prefect/task_engine.py:438:13: error[invalid-assignment] Object of type `Unknown | None | ((Task[(...), Any], TaskRun, State[Any], /) -&gt; Awaitable[bool] | bool)` is not assignable to `((Task[P@SyncTaskRunEngine, Coroutine[Any, Any, R@SyncTaskRunEngine]], TaskRun, State[R@SyncTaskRunEngine], /) -&gt; bool) | None`
- src/prefect/task_engine.py:1026:13: error[invalid-assignment] Object of type `Unknown | None | (((Task[(...), Any], TaskRun, State[Any], /) -&gt; Awaitable[bool] | bool) &amp; (() -&gt; object))` is not assignable to `((Task[P@AsyncTaskRunEngine, Coroutine[Any, Any, R@AsyncTaskRunEngine]], TaskRun, State[R@AsyncTaskRunEngine], /) -&gt; bool) | None`
+ src/prefect/task_engine.py:1026:13: error[invalid-assignment] Object of type `Unknown | None | ((Task[(...), Any], TaskRun, State[Any], /) -&gt; Awaitable[bool] | bool)` is not assignable to `((Task[P@AsyncTaskRunEngine, Coroutine[Any, Any, R@AsyncTaskRunEngine]], TaskRun, State[R@AsyncTaskRunEngine], /) -&gt; bool) | None`
- src/prefect/utilities/_engine.py:64:13: error[invalid-argument-type] Argument to bound method `is_callback_with_parameters` is incorrect: Expected `(...) -&gt; str`, found `(Unknown &amp; (() -&gt; object)) | (() -&gt; str) | (TaskRunNameCallbackWithParameters &amp; (() -&gt; object)) | (str &amp; (() -&gt; object))`
+ src/prefect/utilities/_engine.py:64:13: error[invalid-argument-type] Argument to bound method `is_callback_with_parameters` is incorrect: Expected `(...) -&gt; str`, found `(Unknown &amp; Top[(...) -&gt; object]) | (() -&gt; str) | TaskRunNameCallbackWithParameters | (str &amp; Top[(...) -&gt; object])`
+ src/prefect/utilities/_engine.py:69:29: error[missing-argument] No argument provided for required parameter `parameters` of bound method `__call__`
- src/prefect/utilities/_engine.py:93:13: error[unresolved-attribute] Object of type `() -&gt; object` has no attribute `__name__`
+ src/prefect/utilities/_engine.py:93:13: error[unresolved-attribute] Object of type `Top[(...) -&gt; object]` has no attribute `__name__`
- src/prefect/utilities/templating.py:320:13: error[invalid-assignment] Invalid subscript assignment with key of type `object` and value of type `T@resolve_block_document_references | dict[str, Any]` on object of type `dict[str, Any]`
+ src/prefect/utilities/templating.py:320:13: error[invalid-assignment] Invalid subscript assignment with key of type `object` and value of type `T@resolve_block_document_references | int | dict[str, Any] | ... omitted 4 union elements` on object of type `dict[str, Any]`
- src/prefect/utilities/templating.py:323:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_block_document_references | dict[str, Any]`, found `list[T@resolve_block_document_references | dict[str, Any] | Unknown]`
+ src/prefect/utilities/templating.py:323:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_block_document_references | dict[str, Any]`, found `list[T@resolve_block_document_references | int | dict[str, Any] | ... omitted 5 union elements]`
- src/prefect/utilities/templating.py:437:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `dict[object, T@resolve_variables | Unknown]`
+ src/prefect/utilities/templating.py:437:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `dict[object, int | T@resolve_variables | float | ... omitted 5 union elements]`
- src/prefect/utilities/templating.py:442:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `list[T@resolve_variables | Unknown]`
+ src/prefect/utilities/templating.py:442:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `list[int | T@resolve_variables | float | ... omitted 5 union elements]`
- src/prefect/workers/base.py:228:13: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `T@resolve_block_document_references | dict[str, Any]`
+ src/prefect/workers/base.py:228:13: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `T@resolve_block_document_references | int | dict[str, Any] | ... omitted 4 union elements`
- src/prefect/workers/base.py:230:20: error[invalid-argument-type] Argument expression after ** must be a mapping type: Found `T@resolve_variables`
+ src/prefect/workers/base.py:230:20: error[invalid-argument-type] Argument expression after ** must be a mapping type: Found `int | T@resolve_variables | float | ... omitted 4 union elements`
- Found 5542 diagnostics
+ Found 5543 diagnostics

ibis (https://github.com/ibis-project/ibis)
- ibis/backends/tests/conftest.py:21:35: error[invalid-type-form] Variable of type `def callable(obj: object, /) -&gt; TypeIs[() -&gt; object]

... (truncated 78 lines) ...
</code></pre>
</details>

<p>No memory usage changes detected âœ…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-22 18:25</div>
            <div class="timeline-body"><p><code>Top[Callable[..., object]]</code> is a different type to <code>Callable[..., object]</code>, unfortunately! The former is an (unsimplifiable) fully static type, the latter is a gradual type</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-22 18:34</div>
            <div class="timeline-body"><p>It's the same as the difference between <code>Top[list[Any]]</code> (also unsimplifiable) and <code>list[Any]</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-22 19:05</div>
            <div class="timeline-body"><p>We implement <code>Top[list[Any]]</code> using this field on the <code>Specialization</code> struct: https://github.com/astral-sh/ruff/blob/4a937543b932a18e419c87b1f2717107b4dd2164/crates/ty_python_semantic/src/types/generics.rs#L734-L741. I think fixing the linked issue requires adding a similar field to <code>CallableType</code> and/or <code>Parameters</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-22 19:48</div>
            <div class="timeline-body"><p>ðŸ«¡</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Use gradual form (`...`) for parameters in Callable bottom type" to "[ty] Use gradual form (`...`) for parameters in Callable bottom type" by @AlexWaygood on 2025-12-23 09:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by @AlexWaygood on 2025-12-23 09:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-12-23 09:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @AlexWaygood on 2025-12-23 09:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[ty] Use gradual form (`...`) for parameters in Callable bottom type" to "[ty] Use gradual form (`...`) for parameters in `Callable` top materialization" by @AlexWaygood on 2025-12-23 10:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-23 10:29</div>
            <div class="timeline-body"><p>Nice, this looks like it's on the right track now!</p>
<blockquote>
<pre><code class="language-diff">+ beartype/_check/metadata/metadecor.py:555:34: error[unresolved-attribute] Object of type `((...) -&gt; Unknown) &amp; (Top[(...) -&gt; object])` has no attribute `__name__`
</code></pre>
</blockquote>
<p>Diagnostics like this indicate that some of the subtyping rules aren't quite right yet. All <code>Callable</code> types should be considered subtypes of <code>Top[(...) -&gt; object]</code>; it is a fully static supertype of all <code>Callable</code> types. If we understood this subtype relationship correctly, then the intersection <code>((...) -&gt; Unknown) &amp; (Top[(...) -&gt; object])</code> would naturally simplify down to <code>(...) -&gt; Unknown</code>.</p>
<p>Similarly, <code>(...) -&gt; int</code>, <code>(str, /) -&gt; int</code> and <code>(bytes, bytes) -&gt; bool</code> should all be understood as subtypes of <code>Top[(...) -&gt; int]</code>, but <code>(...) -&gt; object</code> should not, etc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-23 17:54</div>
            <div class="timeline-body"><p>The primer report is starting to look a lot better!</p>
<p>There's another change that we need to make... which might make the ecosystem blow up, but I do think it's the &quot;correct&quot; thing to do:</p>
<pre><code class="language-py">def f(x: object):
    if callable(x):
        x()  # this should be an error...
             # we know that `x` is callable, but we do not know
             # *how* it is callable (is it okay to call it with *zero arguments*?).
             # `Top[Callable[..., object]]` is much stricter than `Callable[..., object]`
             # for things like this
</code></pre>
<p><code>Top[Callable[..., object]]</code> is really a very strange type. Objects that have this type <em>are</em> callable... but any attempt to actually call one of these objects should lead to a type-checker error. <code>Top[Callable[..., object]]</code> represents the &quot;infinite union&quot; of all possible <code>Callable</code> types, so for any attempt to call an object with this type should cause the type checker to go &quot;no, it could be a <code>Callable</code> object with a different signature to the one you're assuming&quot;.</p>
<p>This is similar to the way we apply <a href="https://play.ty.dev/c7499b31-ed4f-499e-ac87-852ad5348981">much stricter rules</a> to <code>Top[list[Any]]</code> than we do to <code>list[Any]</code>: <code>Top[list[Any]]</code> represents the fully static &quot;infinite union&quot; of all possible <code>list</code> types, whereas <code>list[Any]</code> is a very permissive gradual type.</p>
<pre><code class="language-py">from ty_extensions import Top
from typing import Any

def f(x: list[Any], y: Top[list[Any]]):
    x.append(&quot;foo&quot;)  # fine
    y.append(&quot;foo&quot;)  # error: expected `Never`, found `Literal[&quot;foo&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @charliermarsh on 2025-12-23 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @charliermarsh on 2025-12-23 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @charliermarsh on 2025-12-23 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @charliermarsh on 2025-12-23 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dcreager by @charliermarsh on 2025-12-23 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by @AlexWaygood on 2025-12-23 18:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2025-12-23 18:57</div>
            <div class="timeline-body"><!-- generated-comment ty ecosystem-analyzer -->

<h2><code>ecosystem-analyzer</code> results</h2>
<p>| Lint rule | Added | Removed | Changed |
|-----------|------:|--------:|--------:|
| <code>invalid-argument-type</code> | 2 | 36 | 14 |
| <code>unresolved-attribute</code> | 6 | 3 | 19 |
| <code>invalid-assignment</code> | 0 | 6 | 21 |
| <code>invalid-return-type</code> | 0 | 4 | 13 |
| <code>possibly-missing-attribute</code> | 0 | 7 | 8 |
| <code>unsupported-operator</code> | 0 | 7 | 0 |
| <code>call-top-callable</code> | 5 | 0 | 0 |
| <code>missing-argument</code> | 5 | 0 | 0 |
| <code>not-iterable</code> | 0 | 3 | 1 |
| <code>unused-ignore-comment</code> | 3 | 1 | 0 |
| <code>call-non-callable</code> | 1 | 1 | 0 |
| <code>too-many-positional-arguments</code> | 0 | 2 | 0 |
| <code>type-assertion-failure</code> | 2 | 0 | 0 |
| <code>invalid-parameter-default</code> | 0 | 0 | 1 |
| <code>invalid-type-form</code> | 0 | 0 | 1 |
| <code>no-matching-overload</code> | 0 | 1 | 0 |
| <strong>Total</strong> | <strong>24</strong> | <strong>71</strong> | <strong>78</strong> |</p>
<p><strong><a href="https://b3281093.ty-ecosystem-ext.pages.dev/diff">Full report with detailed diff</a></strong> (<a href="https://b3281093.ty-ecosystem-ext.pages.dev/timing">timing results</a>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-23 19:04</div>
            <div class="timeline-body"><p>I wouldn't worry about the spack panic in ecosystem-analyzer â€” we've seen it on some other PRs; it's one of our nondeterminism issues right now</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-12-24 00:41</div>
            <div class="timeline-body"><p>Lots of false positives going away in the ecosystem report! ðŸŽ‰</p>
<p>I see a few new diagnostics with message &quot;Object of type <code>Top[(...) -&gt; object]</code> is not callable&quot;. These are cases where someone tries to call the top callable type. If we are being strict, this call can never succeed (since you are trying to call the union of all possible callables -- no arguments could possibly satisfy them all). But we should probably emit a custom diagnostic for this, because it's odd to do <code>if callable(x): x()</code> and have ty tell you that x &quot;is not callable&quot;.</p>
<p>Other type checkers unsoundly use <code>(...) -&gt; object</code> instead of the top callable, so they allow any call. We could easily use a different rule code for &quot;trying to call the top callable&quot;, so people who want that forgiving behavior can opt into it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ty_python_semantic/resources/mdtest/narrow/callable.md</code>:69 on 2025-12-24 00:46</div>
            <div class="timeline-body"><p>Error is correct, but as mentioned I think we should use a separate rule code and message here, since it's confusing to say &quot;is not callable&quot; when the code just checked that it's callable! Something like</p>
<pre><code class="language-suggestion">        # error: [call-top-callable] &quot;Object of type `Top[(...) -&gt; object]` is not safe to call; its signature is not known&quot;
</code></pre>
<p>Maybe <code>call-top-callable</code> is too jargony, but it's also just the rule code? Not thinking of anything obviously better.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ty_python_semantic/src/types/call/bind.rs</code>:4139 on 2025-12-24 00:47</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    /// represents the infinite union of all callables. While such types *are* callable (they pass
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ty_python_semantic/src/types/call/bind.rs</code>:4141 on 2025-12-24 00:48</div>
            <div class="timeline-body"><p>Although the term &quot;unknown&quot; is correct here, it's confusing given our frequent usage of <code>Unknown</code> as a dynamic type. This isn't user-facing, it's in code: maybe <code>CalledTopCallable</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ty_python_semantic/src/types/call/bind.rs</code>:4575 on 2025-12-24 00:49</div>
            <div class="timeline-body"><pre><code class="language-suggestion">                        &quot;Object of type `{callable_ty_display}` is not safe to call; its signature is not known&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ty_python_semantic/src/types/call/bind.rs</code>:4579 on 2025-12-24 00:50</div>
            <div class="timeline-body"><p>Oh, didn't realize until now that we have this -- that's great, but I think the wording here could also be improved to avoid saying its &quot;not callable&quot;</p>
<pre><code class="language-suggestion">                        &quot;This type includes all possible callables, so it cannot safely be called, \
                        because there is no valid set of arguments for it&quot;,
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-24 00:50</div>
            <div class="timeline-body"><p>(I <em>think</em> that diagnostic is what Alex asked for here: https://github.com/astral-sh/ruff/pull/22145#issuecomment-3687487019. No issue from me with using a custom diagnostic for it!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ty_python_semantic/src/types.rs</code>:12653 on 2025-12-24 00:54</div>
            <div class="timeline-body"><p>I think this can be simpler?</p>
<p>The top callable parameters are always a super-type of any other parameters, so we don't need to compare parameters at all. But we do allow various &quot;top callable&quot; types with various return types, so we do still need to compare return types. But I think that's all we should check. (And I think we should pass through the relation we are checking, not use assignability.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ty_python_semantic/src/types.rs</code>:12667 on 2025-12-24 00:54</div>
            <div class="timeline-body"><p>Same here, bottom paramers are a subtype of all possible parameters, so the only thing we need to check here is return types. (I think this could even be collapsed into a single match arm with the above.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ty_python_semantic/src/types.rs</code>:12684 on 2025-12-24 00:56</div>
            <div class="timeline-body"><p>And then I'm not sure we need any of these cases at all?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2025-12-24 01:04</div>
            <div class="timeline-body"><p>Awesome!</p>
<p>I think it'd be good to have some tests showing the behavior of the bottom callable, too? It's always callable with any arguments.</p>
<p>The ways it could be created in real code are a bit complex. You'd need a gradual-form callable type in contravariant position of some type -- e.g. as an argument to another Callable -- and then you'd need to do something that would top-materialize the outer type, like return it wrapped in <code>TypeIs</code>. I'm not sure we need to represent this in a test; I'd just use <code>ty_extensions.Bottom</code> to create the type &quot;manually&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-12-24 03:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types.rs</code>:12653 on 2025-12-24 03:56</div>
            <div class="timeline-body"><p>Hopefully resolved.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @charliermarsh on 2025-12-24 03:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-12-24 05:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ty_python_semantic/src/types/diagnostic.rs</code>:175 on 2025-12-24 05:36</div>
            <div class="timeline-body"><p>Any specific reason this is in preview? Otherwise this should be <code>LintStatus::stable(&quot;0.0.7&quot;)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[ty] Use gradual form (`...`) for parameters in `Callable` top materialization" to "[ty] Fix implementation of `Top[Callable[..., object]]`" by @AlexWaygood on 2025-12-24 11:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-24 11:09</div>
            <div class="timeline-body"><blockquote>
<pre><code class="language-diff">+ src/werkzeug/wsgi.py:244:25: error[invalid-assignment] Object of type `list[Unknown | (() -&gt; None) | (Iterable[() -&gt; None] &amp; (Top[(...) -&gt; object]))]` is not assignable to `None | (() -&gt; None) | Iterable[() -&gt; None]`
</code></pre>
</blockquote>
<p>I think we can improve a few details of the display here. Namely, we always parenthesize callable types when they appear in unions or intersections, because something like <code>(...) -&gt; Unknown &amp; None</code> is otherwise ambiguous. (Is that <code>(...) -&gt; (Unknown &amp; None)</code> or <code>((...) -&gt; Unknown) &amp; None</code>?) But there's no ambiguity for <code>Top[(...) -&gt; object]</code>, so I don't think parenthesizing it is necessary when it appears in unions or intersections. <code>Iterable[() -&gt; None] &amp; Top[(...) -&gt; object]</code> feels just as clear to me as <code>Iterable[() -&gt; None] &amp; (Top[(...) -&gt; object])</code>, and the latter has a lot more visual noise because of the additional parentheses.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-24 11:17</div>
            <div class="timeline-body"><p>I think it would be good to add this test:</p>
<pre><code class="language-py">from ty_extensions import Bottom, static_assert, is_subtype_of
from typing import Callable, Protocol, NoReturn

class EquivalentToBottom(Protocol):
    def __call__(self, *args: object, **kwargs: object) -&gt; Never: ...

static_assert(is_subtype_of(EquivalentToBottom, Bottom[Callable[..., NoReturn]]))
static_assert(is_subtype_of(Bottom[Callable[..., NoReturn]], EquivalentToBottom))
static_assert(is_equivalent_to(Bottom[Callable[..., NoReturn]], EquivalentToBottom))
</code></pre>
<p><code>Bottom[Callable[..., Any]]</code> is the same type as <code>Bottom[Callable[..., NoReturn]]</code>, and the same type as the <code>EquivalentToBottom</code> protocol, which is why those assertions should pass. In fact, we could consider just having an <code>is_top_materialization</code> boolean flag on <code>CallableType</code>, rather than having the <code>materialization_kind</code> field: I think the bottom materialization of <code>(..., T)</code> can always just be immediately simplified to <code>(*args: object, **kwargs: object) -&gt; &lt;bottom materialization of T&gt;</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-24 11:18</div>
            <div class="timeline-body"><p>(Neither of my comments immediately above are necessarily blocking; it would be fine to tackle them as followups IMO.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/call/bind.rs</code>:1638 on 2025-12-24 11:20</div>
            <div class="timeline-body"><p>nit</p>
<pre><code class="language-suggestion">        if let Type::Callable(callable) = self.signature_type
            &amp;&amp; callable.materialization_kind(db) == Some(MaterializationKind::Top)
        {
            for overload in &amp;mut self.overloads {
                overload
                    .errors
                    .push(BindingError::CalledTopCallable(self.signature_type));
            }
            return None;
        }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-24 11:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/signatures.rs</code>:614 on 2025-12-24 11:23</div>
            <div class="timeline-body"><p>This looks incorrect. If the function doesn't have an annotated return type, it returns <code>Unknown</code>, not <code>Never</code>. <code>Unknown</code> is:</p>
<ul>
<li>Only a subtype of <code>object</code></li>
<li>Redundant with other dynamic types, unions including dynamic types, and/or <code>object</code></li>
<li>Assignable to everything</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/signatures.rs</code>:619 on 2025-12-24 11:23</div>
            <div class="timeline-body"><p>same here, this doesn't look correct</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-24 11:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> removed by @AlexWaygood on 2025-12-24 13:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by @AlexWaygood on 2025-12-24 13:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @charliermarsh on 2025-12-24 13:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> removed by @AlexWaygood on 2025-12-24 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by @AlexWaygood on 2025-12-24 13:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-24 14:10</div>
            <div class="timeline-body"><p>This new diagnostic on <code>antidote</code>:</p>
<pre><code>[error] invalid-argument-type - :286:17 - Argument to function `wrap` is incorrect: Argument type `Top[(...) -&gt; object]` does not satisfy upper bound `(...) -&gt; Any` of type variable `F`
</code></pre>
<p>Implies that we don't see <code>Top[(...) -&gt; object]</code> as assignable to <code>(...) -&gt; Any</code>. I'm not sure that's correct? I think any subtype of <code>Top[(...) -&gt; object]</code> should be assignable to <code>(...) -&gt; Any</code>, and that includes <code>Top[(...) -&gt; object]</code> itself. That's what we do for <code>Top[list[Unknown]]</code>, anyway: https://play.ty.dev/0baef771-d6a1-474c-b906-2e56ac9c05f7.</p>
<p>It would be good to add a test for this. Quite a few of the new diagnostics in the latest ecosystem report look related to this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Wizzerinus">@Wizzerinus</a> on 2025-12-24 14:13</div>
            <div class="timeline-body"><p>How can <code>Top[(...) -&gt; object]</code> be assignable to <code>(...) -&gt; Any</code> when the latter is callable with arbitrary set of arguments and and the former is not callable with any set of arguments? Is it only because the latter is a gradual type and nothing else? Isn't the whole point of this top materialization to prevent this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-24 14:23</div>
            <div class="timeline-body"><blockquote>
<p>static_assert(is_equivalent_to(Bottom[Callable[..., NoReturn]], EquivalentToBottom))</p>
</blockquote>
<p>(Hmm, I can't get this one to pass because I think we don't support <code>is_equivalent_to</code> for protocols and callables at all right now.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-24 14:24</div>
            <div class="timeline-body"><p>@Wizzerinus, quoting from the <a href="https://typing.python.org/en/latest/spec/concepts.html#the-assignable-to-or-consistent-subtyping-relation">typing spec</a>:</p>
<blockquote>
<p>Given the materialization relation and the subtyping relation, we can define the consistent subtype relation over all types. A type <code>B</code> is a consistent subtype of a type <code>A</code> if there exists a materialization <code>A'</code> of <code>A</code> and a materialization <code>B'</code> of <code>B</code>, where <code>A'</code> and <code>B'</code> are both fully static types, and <code>B'</code> is a subtype of <code>A'</code>.</p>
</blockquote>
<p>(&quot;Consistent subtyping&quot; is a synonym for &quot;assignability&quot;.)</p>
<p>In this case:</p>
<ol>
<li><code>B</code> is <code>Top[(...) -&gt; object]</code></li>
<li><code>A</code> is <code>(...) -&gt; object</code></li>
<li>The only possible materialization of <code>B</code> is itself, because it is already a fully static type: <code>Top[(...) -&gt; object]</code>.</li>
<li><code>A</code> is a gradual type that can materialize to any fully static type that is a subtype of <code>Top[A]</code> (which is <code>Top[(...) -&gt; object]</code>) and a supertype of <code>Bottom[A]</code> (<code>(*args: object, **kwargs: object) -&gt; Never</code>).</li>
<li><code>Top[(...) -&gt; object]</code> is a subtype of <code>Top[A]</code> (it is a subtype of itself) and a supertype of <code>Bottom[A]</code>.</li>
<li>Ergo, there is a pair of materializations of <code>A</code> (<code>A'</code>) and <code>B</code> (<code>B'</code>) where <code>B'</code> is a subtype of <code>A'</code>.</li>
<li>Ergo, <code>B</code> (<code>Top[(...) -&gt; object]</code>) is assignable to <code>A</code> (<code>(...) -&gt; object</code>)</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-24 14:25</div>
            <div class="timeline-body"><blockquote>
<p>(Hmm, I can't get this one to pass because I think we don't support <code>is_equivalent_to</code> for protocols and callables at all right now.)</p>
</blockquote>
<p>it's fine to add a failing assertion with a <code># error [static-assert-error]</code> next to it and a TODO above it, in that case ðŸ‘</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-24 14:37</div>
            <div class="timeline-body"><p>Less confident about this most recent commit but gave it a try.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> removed by @AlexWaygood on 2025-12-24 14:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by @AlexWaygood on 2025-12-24 14:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-12-24 16:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @AlexWaygood on 2025-12-24 16:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-24 16:46</div>
            <div class="timeline-body"><p>The ecosystem report's looking good again!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/signatures.rs</code>:584 on 2025-12-24 16:57</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    /// This is used when wrapping gradual callables in `Top[...]` - we want
    /// to preserve the gradual parameters but materialize the return types (which are in
    /// covariant position).
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/diagnostic.rs</code>:171 on 2025-12-24 16:58</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    ///         x()  # error: We know x is callable, but not what arguments it accepts
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types.rs</code>:12707 on 2025-12-24 16:59</div>
            <div class="timeline-body"><p>do we have a test for this branch? Could we add one, if not?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types.rs</code>:12663 on 2025-12-24 17:00</div>
            <div class="timeline-body"><p>I think you've overcomplicated this a <em>little</em> bit. All tests pass if I apply this diff to your branch (which I think is correct):</p>
<pre><code class="language-diff">diff --git a/crates/ty_python_semantic/src/types.rs b/crates/ty_python_semantic/src/types.rs
index d2a9d25dea..65c860414e 100644
--- a/crates/ty_python_semantic/src/types.rs
+++ b/crates/ty_python_semantic/src/types.rs
@@ -12661,57 +12661,32 @@ impl&lt;'db&gt; CallableType&lt;'db&gt; {
         }
 
         // Handle top materialization:
-        // - `Top[Callable[..., R]]` is a supertype of all callables with return type subtype of R.
-        //
-        // For Top, we only need to compare return types because Top parameters are a supertype
-        // of all possible parameters. Bottom materializations are simplified to the bottom
-        // callable directly, so they use normal signature comparison.
-        match (
-            self.is_top_materialization(db),
-            other.is_top_materialization(db),
-        ) {
-            // Neither is a top materialization: use normal signature comparison.
-            (false, false) =&gt; {}
-
-            // Anything &lt;: Top[...]: just compare return types.
-            (_, true) =&gt; {
-                return self.signatures(db).return_types_have_relation_to(
-                    db,
-                    other.signatures(db),
-                    inferable,
-                    relation,
-                    relation_visitor,
-                    disjointness_visitor,
-                );
-            }
-
-            // Top[...] &lt;: non-Top: depends on whether target has gradual parameters.
-            // For assignability, Top[(...) -&gt; R] can be assigned to (...) -&gt; S if R &lt;: S
-            // (where (...) represents gradual parameters).
-            // For subtyping, Top is never a subtype of any specific callable.
-            (true, false) =&gt; {
-                if !relation.is_subtyping() &amp;&amp; other.signatures(db).has_gradual_parameters() {
-                    return self.signatures(db).return_types_have_relation_to(
-                        db,
-                        other.signatures(db),
-                        inferable,
-                        relation,
-                        relation_visitor,
-                        disjointness_visitor,
-                    );
-                }
-                return ConstraintSet::from(false);
-            }
+        // `Top[Callable[..., R]]` is a fully static supertype of all callables
+        // with return type subtype of `R`.
+        if other.is_top_materialization(db) {
+            debug_assert!(
+                other.signatures(db).has_gradual_parameters(),
+                &quot;A `Callable` type without gradual parameters \
+                should never be marked as a top materialization&quot;
+            );
+            self.signatures(db).return_types_have_relation_to(
+                db,
+                other.signatures(db),
+                inferable,
+                relation,
+                relation_visitor,
+                disjointness_visitor,
+            )
+        } else {
+            self.signatures(db).has_relation_to_impl(
+                db,
+                other.signatures(db),
+                inferable,
+                relation,
+                relation_visitor,
+                disjointness_visitor,
+            )
         }
-
-        self.signatures(db).has_relation_to_impl(
-            db,
-            other.signatures(db),
-            inferable,
-            relation,
-            relation_visitor,
-            disjointness_visitor,
-        )
     }
 
     /// Check whether this callable type is equivalent to another callable type.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/type_properties/materialization.md</code>:216 on 2025-12-24 17:01</div>
            <div class="timeline-body"><p>nit: this is usually how we do x-failing mdtests -- it's good, because CI starts to fail if the test starts unexpectedly passing!</p>
<pre><code class="language-suggestion">#
# error: [static-assert-error]
static_assert(is_equivalent_to(Bottom[Callable[..., Never]], EquivalentToBottom))
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2025-12-24 17:01</div>
            <div class="timeline-body"><p>This looks great -- thank you!! ðŸ˜ƒ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2025-12-24 17:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types.rs</code>:12663 on 2025-12-24 17:08</div>
            <div class="timeline-body"><p>Oh wow</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> removed by @AlexWaygood on 2025-12-24 17:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by @AlexWaygood on 2025-12-24 17:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/narrow/callable.md</code>:81 on 2025-12-24 17:36</div>
            <div class="timeline-body"><p>I'd be inclined to add a more direct assertion here as well, since I think there might be some open questions about how gradual upper bounds of TypeVars should work:</p>
<pre><code class="language-suggestion">from typing import Any, Callable, TypeVar
from ty_extensions import static_assert, Top, is_assignable_to

static_assert(is_assignable_to(Top[Callable[..., bool]], Callable[..., int]))
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/diagnostic.rs</code>:171 on 2025-12-24 17:37</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    ///         x()  # error: We know `x` is callable, but not what arguments it accepts
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2025-12-24 17:38</div>
            <div class="timeline-body"><p>Let's go!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-24 17:43</div>
            <div class="timeline-body"><p>Thank <em>you</em> @AlexWaygood!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2025-12-24 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-12-24 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-12-24 17:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 16:36:42 UTC
    </footer>
</body>
</html>
