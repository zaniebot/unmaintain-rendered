<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Improve diagnostics for unsupported comparison operations - astral-sh/ruff #21737</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Improve diagnostics for unsupported comparison operations</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/21737">#21737</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-12-01 18:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>On <code>main</code>:</p>
<p><img width="3106" height="684" alt="image" src="https://github.com/user-attachments/assets/25e28810-282d-469b-a1b1-b823075c8936" /></p>
<p>Concise diagnostics on <code>main</code>:</p>
<pre><code>foo.py:1:1: error[unsupported-operator] Operator `&lt;` is not supported for types `str` and `int`, in comparing `tuple[Literal[1], Literal[&quot;foo&quot;]]` with `tuple[Literal[1], Literal[2]]`
foo.py:2:1: error[unsupported-operator] Operator `&lt;` is not supported for types `object` and `object`, in comparing `tuple[object]` with `tuple[object]`
</code></pre>
<p>With PR:</p>
<p><img width="2158" height="1446" alt="image" src="https://github.com/user-attachments/assets/f30adbc2-a123-40b6-8f5f-f04ae9287a04" /></p>
<p>Concise diagnostics with PR:</p>
<pre><code>foo.py:1:1: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `tuple[Literal[1], Literal[&quot;foo&quot;]]` and `tuple[Literal[1], Literal[2]]`
foo.py:2:1: error[unsupported-operator] Operator `&lt;` is not supported between two objects of type `tuple[object]`
</code></pre>
<h2>Test Plan</h2>
<p>Mdtests and snapshots</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @AlexWaygood on 2025-12-01 18:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @AlexWaygood on 2025-12-01 18:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dcreager by @AlexWaygood on 2025-12-01 18:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @AlexWaygood on 2025-12-01 18:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by @AlexWaygood on 2025-12-01 18:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by @AlexWaygood on 2025-12-01 18:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2025-12-01 18:40</div>
            <div class="timeline-body"><!-- generated-comment typing_conformance_diagnostics_diff -->

<h2>Diagnostic diff on <a href="https://github.com/python/typing/tree/9f6d8ced7cd1c8d92687a4e9c96d7716452e471e/conformance">typing conformance tests</a></h2>
<details>
<summary>Changes were detected when running ty on typing conformance tests</summary>

<pre><code class="language-diff">--- old-output.txt	2025-12-02 19:54:53.533433718 +0000
+++ new-output.txt	2025-12-02 19:54:57.115460740 +0000
@@ -293,7 +293,7 @@
 dataclasses_kwonly.py:61:14: error[parameter-already-assigned] Multiple values provided for parameter `b`
 dataclasses_match_args.py:42:1: error[unresolved-attribute] Class `DC4` has no attribute `__match_args__`
 dataclasses_match_args.py:49:1: error[type-assertion-failure] Type `tuple[()]` does not match asserted type `Unknown | tuple[()]`
-dataclasses_order.py:50:4: error[unsupported-operator] Operator `&lt;` is not supported for types `DC1` and `DC2`
+dataclasses_order.py:50:4: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `DC1` and `DC2`
 dataclasses_postinit.py:28:7: error[unresolved-attribute] Object of type `DC1` has no attribute `x`
 dataclasses_postinit.py:29:7: error[unresolved-attribute] Object of type `DC1` has no attribute `y`
 dataclasses_slots.py:66:1: error[unresolved-attribute] Class `DC6` has no attribute `__slots__`
@@ -301,7 +301,7 @@
 dataclasses_transform_class.py:63:1: error[invalid-assignment] Property `id` defined in `Customer1` is read-only
 dataclasses_transform_class.py:66:8: error[missing-argument] No arguments provided for required parameters `id`, `name`
 dataclasses_transform_class.py:66:18: error[too-many-positional-arguments] Too many positional arguments: expected 0, got 2
-dataclasses_transform_class.py:72:6: error[unsupported-operator] Operator `&lt;` is not supported for types `Customer1` and `Customer1`
+dataclasses_transform_class.py:72:6: error[unsupported-operator] Operator `&lt;` is not supported between two objects of type `Customer1`
 dataclasses_transform_class.py:82:8: error[missing-argument] No argument provided for required parameter `id`
 dataclasses_transform_class.py:82:18: error[too-many-positional-arguments] Too many positional arguments: expected 0, got 2
 dataclasses_transform_class.py:122:1: error[invalid-assignment] Property `id` defined in `Customer3` is read-only
@@ -343,7 +343,7 @@
 dataclasses_transform_field.py:75:1: error[missing-argument] No argument provided for required parameter `name`
 dataclasses_transform_field.py:75:16: error[too-many-positional-arguments] Too many positional arguments: expected 0, got 1
 dataclasses_transform_func.py:56:1: error[invalid-assignment] Object of type `Literal[3]` is not assignable to attribute `name` of type `str`
-dataclasses_transform_func.py:60:6: error[unsupported-operator] Operator `&lt;` is not supported for types `Customer1` and `Customer1`
+dataclasses_transform_func.py:60:6: error[unsupported-operator] Operator `&lt;` is not supported between two objects of type `Customer1`
 dataclasses_transform_func.py:64:36: error[unknown-argument] Argument `salary` does not match any known parameter
 dataclasses_transform_func.py:70:8: error[missing-argument] No arguments provided for required parameters `id`, `name`
 dataclasses_transform_func.py:70:18: error[too-many-positional-arguments] Too many positional arguments: expected 0, got 2
@@ -352,7 +352,7 @@
 dataclasses_transform_meta.py:63:1: error[invalid-assignment] Property `id` defined in `Customer1` is read-only
 dataclasses_transform_meta.py:66:8: error[missing-argument] No arguments provided for required parameters `id`, `name`
 dataclasses_transform_meta.py:66:18: error[too-many-positional-arguments] Too many positional arguments: expected 0, got 2
-dataclasses_transform_meta.py:73:6: error[unsupported-operator] Operator `&lt;` is not supported for types `Customer1` and `Customer1`
+dataclasses_transform_meta.py:73:6: error[unsupported-operator] Operator `&lt;` is not supported between two objects of type `Customer1`
 dataclasses_transform_meta.py:83:8: error[missing-argument] No argument provided for required parameter `id`
 dataclasses_transform_meta.py:83:18: error[too-many-positional-arguments] Too many positional arguments: expected 0, got 2
 dataclasses_transform_meta.py:103:1: error[invalid-assignment] Property `id` defined in `Customer3` is read-only

</code></pre>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2025-12-01 18:42</div>
            <div class="timeline-body"><!-- generated-comment mypy_primer -->

<h2><code>mypy_primer</code> results</h2>
<details>
<summary>Changes were detected when running on open source projects</summary>

<pre><code class="language-diff">attrs (https://github.com/python-attrs/attrs)
- tests/test_functional.py:632:13: error[unsupported-operator] Operator `&lt;` is not supported for types `C` and `C`
+ tests/test_functional.py:632:13: error[unsupported-operator] Operator `&lt;` is not supported between two objects of type `C`
- tests/test_next_gen.py:79:13: error[unsupported-operator] Operator `&lt;` is not supported for types `C` and `C`
+ tests/test_next_gen.py:79:13: error[unsupported-operator] Operator `&lt;` is not supported between two objects of type `C`

more-itertools (https://github.com/more-itertools/more-itertools)
- more_itertools/more.py:3466:31: error[unsupported-operator] Operator `&lt;=` is not supported for types `None` and `int`, in comparing `Unknown | None | Literal[0]` with `int`
+ more_itertools/more.py:3466:31: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `Unknown | None | Literal[0]` and `int`
- more_itertools/more.py:3466:43: error[unsupported-operator] Operator `&lt;=` is not supported for types `int` and `None`, in comparing `int` with `Unknown | None | int`
+ more_itertools/more.py:3466:43: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `int` and `Unknown | None | int`
- more_itertools/more.py:3471:27: error[unsupported-operator] Operator `&lt;=` is not supported for types `None` and `int`, in comparing `Unknown | None | Literal[0]` with `int`
+ more_itertools/more.py:3471:27: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `Unknown | None | Literal[0]` and `int`
- more_itertools/more.py:3471:39: error[unsupported-operator] Operator `&lt;=` is not supported for types `int` and `None`, in comparing `int` with `Unknown | None | int`
+ more_itertools/more.py:3471:39: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `int` and `Unknown | None | int`

aioredis (https://github.com/aio-libs/aioredis)
- aioredis/connection.py:933:14: error[unsupported-operator] Operator `in` is not supported for types `bytes` and `int`, in comparing `Literal[b&quot; &quot;]` with `bytes | memoryview[int] | int`
+ aioredis/connection.py:933:14: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[b&quot; &quot;]` and `bytes | memoryview[int] | int`

python-chess (https://github.com/niklasf/python-chess)
- chess/engine.py:506:20: error[unsupported-operator] Operator `&lt;` is not supported for types `int` and `None`, in comparing `tuple[bool, bool, bool, int, int | None]` with `tuple[bool, bool, bool, int, int | None]`
- chess/engine.py:512:20: error[unsupported-operator] Operator `&lt;=` is not supported for types `int` and `None`, in comparing `tuple[bool, bool, bool, int, int | None]` with `tuple[bool, bool, bool, int, int | None]`
- chess/engine.py:518:20: error[unsupported-operator] Operator `&gt;` is not supported for types `int` and `None`, in comparing `tuple[bool, bool, bool, int, int | None]` with `tuple[bool, bool, bool, int, int | None]`
- chess/engine.py:524:20: error[unsupported-operator] Operator `&gt;=` is not supported for types `int` and `None`, in comparing `tuple[bool, bool, bool, int, int | None]` with `tuple[bool, bool, bool, int, int | None]`
+ chess/engine.py:506:20: error[unsupported-operator] Operator `&lt;` is not supported between two objects of type `tuple[bool, bool, bool, int, int | None]`
+ chess/engine.py:512:20: error[unsupported-operator] Operator `&lt;=` is not supported between two objects of type `tuple[bool, bool, bool, int, int | None]`
+ chess/engine.py:518:20: error[unsupported-operator] Operator `&gt;` is not supported between two objects of type `tuple[bool, bool, bool, int, int | None]`
+ chess/engine.py:524:20: error[unsupported-operator] Operator `&gt;=` is not supported between two objects of type `tuple[bool, bool, bool, int, int | None]`

pip (https://github.com/pypa/pip)
- src/pip/_internal/network/auth.py:557:22: error[unsupported-operator] Operator `&lt;` is not supported for types `None` and `int`, in comparing `Unknown | None` with `Literal[400]`
+ src/pip/_internal/network/auth.py:557:22: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `Unknown | None` and `Literal[400]`
- src/pip/_internal/network/utils.py:45:8: error[unsupported-operator] Operator `&lt;=` is not supported for types `int` and `None`, in comparing `Literal[400]` with `Unknown | None`
+ src/pip/_internal/network/utils.py:45:8: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `Literal[400]` and `Unknown | None`
- src/pip/_internal/network/utils.py:45:15: error[unsupported-operator] Operator `&lt;` is not supported for types `None` and `int`, in comparing `Unknown | None` with `Literal[500]`
+ src/pip/_internal/network/utils.py:45:15: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `Unknown | None` and `Literal[500]`
- src/pip/_internal/network/utils.py:50:10: error[unsupported-operator] Operator `&lt;=` is not supported for types `int` and `None`, in comparing `Literal[500]` with `Unknown | None`
+ src/pip/_internal/network/utils.py:50:10: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `Literal[500]` and `Unknown | None`
- src/pip/_internal/network/utils.py:50:17: error[unsupported-operator] Operator `&lt;` is not supported for types `None` and `int`, in comparing `Unknown | None` with `Literal[600]`
+ src/pip/_internal/network/utils.py:50:17: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `Unknown | None` and `Literal[600]`
- src/pip/_vendor/cachecontrol/controller.py:149:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;Range&quot;]` with `Unknown | None | CaseInsensitiveDict`
+ src/pip/_vendor/cachecontrol/controller.py:149:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;Range&quot;]` and `Unknown | None | CaseInsensitiveDict`
- src/pip/_vendor/requests/models.py:567:34: error[unsupported-operator] Operator `not in` is not supported for types `str` and `None`, in comparing `Literal[&quot;content-type&quot;]` with `Unknown | None | CaseInsensitiveDict`
+ src/pip/_vendor/requests/models.py:567:34: error[unsupported-operator] Operator `not in` is not supported between objects of type `Literal[&quot;content-type&quot;]` and `Unknown | None | CaseInsensitiveDict`
- src/pip/_vendor/requests/models.py:1015:12: error[unsupported-operator] Operator `&lt;=` is not supported for types `int` and `None`, in comparing `Literal[400]` with `Unknown | None`
+ src/pip/_vendor/requests/models.py:1015:12: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `Literal[400]` and `Unknown | None`
- src/pip/_vendor/requests/models.py:1015:19: error[unsupported-operator] Operator `&lt;` is not supported for types `None` and `int`, in comparing `Unknown | None` with `Literal[500]`
+ src/pip/_vendor/requests/models.py:1015:19: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `Unknown | None` and `Literal[500]`
- src/pip/_vendor/requests/models.py:1020:14: error[unsupported-operator] Operator `&lt;=` is not supported for types `int` and `None`, in comparing `Literal[500]` with `Unknown | None`
+ src/pip/_vendor/requests/models.py:1020:14: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `Literal[500]` and `Unknown | None`
- src/pip/_vendor/requests/models.py:1020:21: error[unsupported-operator] Operator `&lt;` is not supported for types `None` and `int`, in comparing `Unknown | None` with `Literal[600]`
+ src/pip/_vendor/requests/models.py:1020:21: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `Unknown | None` and `Literal[600]`
- src/pip/_vendor/rich/prompt.py:361:12: error[unsupported-operator] Operator `not in` is not supported for types `str` and `None`, in comparing `str` with `list[str] | None`
+ src/pip/_vendor/rich/prompt.py:361:12: error[unsupported-operator] Operator `not in` is not supported between objects of type `str` and `list[str] | None`
- src/pip/_vendor/urllib3/util/retry.py:466:32: error[unsupported-operator] Operator `not in` is not supported for types `Unknown` and `object`, in comparing `Unknown` with `~AlwaysFalsy`
+ src/pip/_vendor/urllib3/util/retry.py:466:32: error[unsupported-operator] Operator `not in` is not supported between objects of type `Unknown` and `~AlwaysFalsy`

spack (https://github.com/spack/spack)
- lib/spack/spack/ci/__init__.py:959:8: error[unsupported-operator] Operator `in` is not supported for types `Any` and `None`, in comparing `Any` with `None | Unknown`
+ lib/spack/spack/ci/__init__.py:959:8: error[unsupported-operator] Operator `in` is not supported between objects of type `Any` and `None | Unknown`
- lib/spack/spack/ci/__init__.py:968:8: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;image&quot;]` with `None | Unknown`
+ lib/spack/spack/ci/__init__.py:968:8: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;image&quot;]` and `None | Unknown`
- lib/spack/spack/ci/__init__.py:1050:8: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;tags&quot;]` with `None | Unknown`
+ lib/spack/spack/ci/__init__.py:1050:8: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;tags&quot;]` and `None | Unknown`
- lib/spack/spack/graph.py:131:31: error[unsupported-operator] Operator `in` is not supported for types `Unknown` and `None`, in comparing `Unknown` with `Unknown | None | list[Unknown | list[Unknown]]`
+ lib/spack/spack/graph.py:131:31: error[unsupported-operator] Operator `in` is not supported between objects of type `Unknown` and `Unknown | None | list[Unknown | list[Unknown]]`
- lib/spack/spack/test/llnl/util/lang.py:208:12: error[unsupported-operator] Operator `&lt;` is not supported for types `KeyComparable` and `KeyComparable`
+ lib/spack/spack/test/llnl/util/lang.py:208:12: error[unsupported-operator] Operator `&lt;` is not supported between two objects of type `KeyComparable`
- lib/spack/spack/test/llnl/util/lang.py:209:12: error[unsupported-operator] Operator `&gt;` is not supported for types `KeyComparable` and `KeyComparable`
+ lib/spack/spack/test/llnl/util/lang.py:209:12: error[unsupported-operator] Operator `&gt;` is not supported between two objects of type `KeyComparable`
- lib/spack/spack/test/llnl/util/lang.py:211:12: error[unsupported-operator] Operator `&lt;=` is not supported for types `KeyComparable` and `KeyComparable`
+ lib/spack/spack/test/llnl/util/lang.py:211:12: error[unsupported-operator] Operator `&lt;=` is not supported between two objects of type `KeyComparable`
- lib/spack/spack/test/llnl/util/lang.py:212:12: error[unsupported-operator] Operator `&gt;=` is not supported for types `KeyComparable` and `KeyComparable`
+ lib/spack/spack/test/llnl/util/lang.py:212:12: error[unsupported-operator] Operator `&gt;=` is not supported between two objects of type `KeyComparable`
- lib/spack/spack/test/llnl/util/lang.py:214:12: error[unsupported-operator] Operator `&lt;=` is not supported for types `KeyComparable` and `KeyComparable`
+ lib/spack/spack/test/llnl/util/lang.py:214:12: error[unsupported-operator] Operator `&lt;=` is not supported between two objects of type `KeyComparable`
- lib/spack/spack/test/llnl/util/lang.py:215:12: error[unsupported-operator] Operator `&lt;=` is not supported for types `KeyComparable` and `KeyComparable`
+ lib/spack/spack/test/llnl/util/lang.py:215:12: error[unsupported-operator] Operator `&lt;=` is not supported between two objects of type `KeyComparable`
- lib/spack/spack/test/llnl/util/lang.py:216:12: error[unsupported-operator] Operator `&gt;=` is not supported for types `KeyComparable` and `KeyComparable`
+ lib/spack/spack/test/llnl/util/lang.py:216:12: error[unsupported-operator] Operator `&gt;=` is not supported between two objects of type `KeyComparable`
- lib/spack/spack/test/llnl/util/lang.py:217:12: error[unsupported-operator] Operator `&gt;=` is not supported for types `KeyComparable` and `KeyComparable`
+ lib/spack/spack/test/llnl/util/lang.py:217:12: error[unsupported-operator] Operator `&gt;=` is not supported between two objects of type `KeyComparable`
- lib/spack/spack/vendor/typing_extensions.py:113:42: error[unsupported-operator] Operator `&gt;` is not supported for types `int` and `object`, in comparing `int` with `~AlwaysFalsy | int`
+ lib/spack/spack/vendor/typing_extensions.py:113:42: error[unsupported-operator] Operator `&gt;` is not supported between objects of type `int` and `~AlwaysFalsy | int`

beartype (https://github.com/beartype/beartype)
- beartype/claw/_package/clawpkgtrie.py:66:29: warning[unsupported-base] Unsupported class base with type `&lt;class 'dict[str, PackagesTrieBlacklist]'&gt; | &lt;class 'dict[str, Divergent]'&gt;`
- beartype/claw/_package/clawpkgtrie.py:247:29: warning[unsupported-base] Unsupported class base with type `&lt;class 'dict[str, PackagesTrieWhitelist]'&gt; | &lt;class 'dict[str, Divergent]'&gt;`
- Found 498 diagnostics
+ Found 496 diagnostics

stone (https://github.com/dropbox/stone)
- stone/frontend/lexer.py:69:34: error[unsupported-operator] Operator `&gt;` is not supported for types `None` and `int`, in comparing `Unknown | None | Literal[0]` with `Literal[0]`
+ stone/frontend/lexer.py:69:34: error[unsupported-operator] Operator `&gt;` is not supported between objects of type `Unknown | None | Literal[0]` and `Literal[0]`
- stone/ir/data_types.py:1095:16: error[unsupported-operator] Operator `in` is not supported for types `Unknown` and `None`, in comparing `Unknown` with `Unknown | None | dict[Unknown, Unknown]`
+ stone/ir/data_types.py:1095:16: error[unsupported-operator] Operator `in` is not supported between objects of type `Unknown` and `Unknown | None | dict[Unknown, Unknown]`
- stone/ir/data_types.py:1263:16: error[unsupported-operator] Operator `in` is not supported for types `Unknown` and `None`, in comparing `Unknown` with `Unknown | None | OrderedDict[Unknown, Unknown]`
+ stone/ir/data_types.py:1263:16: error[unsupported-operator] Operator `in` is not supported between objects of type `Unknown` and `Unknown | None | OrderedDict[Unknown, Unknown]`
- stone/ir/data_types.py:1291:16: error[unsupported-operator] Operator `in` is not supported for types `Unknown` and `None`, in comparing `Unknown` with `Unknown | None | OrderedDict[Unknown, Unknown]`
+ stone/ir/data_types.py:1291:16: error[unsupported-operator] Operator `in` is not supported between objects of type `Unknown` and `Unknown | None | OrderedDict[Unknown, Unknown]`
- stone/ir/data_types.py:1344:16: error[unsupported-operator] Operator `in` is not supported for types `Unknown` and `None`, in comparing `Unknown` with `Unknown | None | OrderedDict[Unknown, Unknown]`
+ stone/ir/data_types.py:1344:16: error[unsupported-operator] Operator `in` is not supported between objects of type `Unknown` and `Unknown | None | OrderedDict[Unknown, Unknown]`
- stone/ir/data_types.py:1487:12: error[unsupported-operator] Operator `in` is not supported for types `Unknown` and `None`, in comparing `Unknown` with `Unknown | None | OrderedDict[Unknown, Unknown]`
+ stone/ir/data_types.py:1487:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Unknown` and `Unknown | None | OrderedDict[Unknown, Unknown]`
- stone/ir/data_types.py:1527:12: error[unsupported-operator] Operator `in` is not supported for types `Unknown` and `None`, in comparing `Unknown` with `Unknown | None | OrderedDict[Unknown, Unknown]`
+ stone/ir/data_types.py:1527:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Unknown` and `Unknown | None | OrderedDict[Unknown, Unknown]`

werkzeug (https://github.com/pallets/werkzeug)
- src/werkzeug/utils.py:501:12: error[unsupported-operator] Operator `&gt;` is not supported for types `(str | None, /) -&gt; int | None` and `Literal[0]`, in comparing `(int &amp; ~(() -&gt; object)) | (((str | None, /) -&gt; int | None) &amp; ~(() -&gt; object)) | (@Todo &amp; ~None)` with `Literal[0]`
+ src/werkzeug/utils.py:501:12: error[unsupported-operator] Operator `&gt;` is not supported between objects of type `(int &amp; ~(() -&gt; object)) | (((str | None, /) -&gt; int | None) &amp; ~(() -&gt; object)) | (@Todo &amp; ~None)` and `Literal[0]`
- tests/middleware/test_http_proxy.py:45:12: error[unsupported-operator] Operator `not in` is not supported for types `str` and `None`, in comparing `Literal[&quot;HTTP_X_SPECIAL&quot;]` with `Any | None`
+ tests/middleware/test_http_proxy.py:45:12: error[unsupported-operator] Operator `not in` is not supported between objects of type `Literal[&quot;HTTP_X_SPECIAL&quot;]` and `Any | None`
- tests/test_datastructures.py:863:16: error[unsupported-operator] Operator `not in` is not supported for types `int` and `EnvironHeaders`, in comparing `Literal[42]` with `(Unknown &amp; ~AlwaysFalsy) | (EnvironHeaders &amp; ~AlwaysFalsy)`
+ tests/test_datastructures.py:863:16: error[unsupported-operator] Operator `not in` is not supported between objects of type `Literal[42]` and `(Unknown &amp; ~AlwaysFalsy) | (EnvironHeaders &amp; ~AlwaysFalsy)`

jinja (https://github.com/pallets/jinja)
- tests/test_loader.py:94:16: error[unsupported-operator] Operator `in` is not supported for types `tuple[ReferenceType[DictLoader], Literal[&quot;one&quot;]]` and `None`, in comparing `tuple[ReferenceType[DictLoader], Literal[&quot;one&quot;]]` with `Unknown | MutableMapping[tuple[ReferenceType[BaseLoader], str], Template] | None`
- tests/test_loader.py:95:16: error[unsupported-operator] Operator `not in` is not supported for types `tuple[ReferenceType[DictLoader], Literal[&quot;two&quot;]]` and `None`, in comparing `tuple[ReferenceType[DictLoader], Literal[&quot;two&quot;]]` with `Unknown | MutableMapping[tuple[ReferenceType[BaseLoader], str], Template] | None`
- tests/test_loader.py:96:16: error[unsupported-operator] Operator `in` is not supported for types `tuple[ReferenceType[DictLoader], Literal[&quot;three&quot;]]` and `None`, in comparing `tuple[ReferenceType[DictLoader], Literal[&quot;three&quot;]]` with `Unknown | MutableMapping[tuple[ReferenceType[BaseLoader], str], Template] | None`
+ tests/test_loader.py:94:16: error[unsupported-operator] Operator `in` is not supported between objects of type `tuple[ReferenceType[DictLoader], Literal[&quot;one&quot;]]` and `Unknown | MutableMapping[tuple[ReferenceType[BaseLoader], str], Template] | None`
+ tests/test_loader.py:95:16: error[unsupported-operator] Operator `not in` is not supported between objects of type `tuple[ReferenceType[DictLoader], Literal[&quot;two&quot;]]` and `Unknown | MutableMapping[tuple[ReferenceType[BaseLoader], str], Template] | None`
+ tests/test_loader.py:96:16: error[unsupported-operator] Operator `in` is not supported between objects of type `tuple[ReferenceType[DictLoader], Literal[&quot;three&quot;]]` and `Unknown | MutableMapping[tuple[ReferenceType[BaseLoader], str], Template] | None`

aiortc (https://github.com/aiortc/aiortc)
- src/aiortc/rate.py:498:15: error[unsupported-operator] Operator `&lt;` is not supported for types `None` and `int`, in comparing `int | None` with `Unknown | int`
+ src/aiortc/rate.py:498:15: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `int | None` and `Unknown | int`
- src/aiortc/rtcrtpreceiver.py:222:14: error[unsupported-operator] Operator `&lt;` is not supported for types `int` and `None`, in comparing `int` with `int | None`
+ src/aiortc/rtcrtpreceiver.py:222:14: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `int` and `int | None`

scrapy (https://github.com/scrapy/scrapy)
- tests/test_loader.py:64:8: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;key&quot;]` with `Unknown | None`
+ tests/test_loader.py:64:8: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;key&quot;]` and `Unknown | None`

paasta (https://github.com/yelp/paasta)
- paasta_tools/cli/cmds/autoscale.py:245:12: error[unsupported-operator] Operator `&lt;=` is not supported for types `int` and `None`, in comparing `Literal[200]` with `Unknown | None`
+ paasta_tools/cli/cmds/autoscale.py:245:12: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `Literal[200]` and `Unknown | None`
- paasta_tools/cli/cmds/autoscale.py:245:19: error[unsupported-operator] Operator `&lt;=` is not supported for types `None` and `int`, in comparing `Unknown | None` with `Literal[299]`
+ paasta_tools/cli/cmds/autoscale.py:245:19: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `Unknown | None` and `Literal[299]`
- paasta_tools/paastaapi/model_utils.py:275:29: error[unsupported-operator] Operator `in` is not supported for types `Unknown` and `None`, in comparing `Unknown &amp; ~None` with `None | Unknown`
+ paasta_tools/paastaapi/model_utils.py:275:29: error[unsupported-operator] Operator `in` is not supported between objects of type `Unknown &amp; ~None` and `None | Unknown`
- paasta_tools/setup_prometheus_adapter_config.py:816:8: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;seriesQuery&quot;]` with `dict[Unknown, Unknown] | None`
+ paasta_tools/setup_prometheus_adapter_config.py:816:8: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;seriesQuery&quot;]` and `dict[Unknown, Unknown] | None`

pytest (https://github.com/pytest-dev/pytest)
- testing/test_assertrewrite.py:140:28: error[unsupported-operator] Operator `&lt;=` is not supported for types `int` and `None`, in comparing `tuple[Literal[3], Literal[0]]` with `Unknown | tuple[int | None, int | None]`
- testing/test_assertrewrite.py:140:38: error[unsupported-operator] Operator `&lt;=` is not supported for types `None` and `int`, in comparing `Unknown | tuple[int | None, int | None]` with `tuple[Literal[6], Literal[3]]`
+ testing/test_assertrewrite.py:140:28: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `tuple[Literal[3], Literal[0]]` and `Unknown | tuple[int | None, int | None]`
+ testing/test_assertrewrite.py:140:38: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `Unknown | tuple[int | None, int | None]` and `tuple[Literal[6], Literal[3]]`

kopf (https://github.com/nolar/kopf)
- kopf/_cogs/structs/credentials.py:161:16: error[unsupported-operator] Operator `not in` is not supported for types `str` and `None`, in comparing `str` with `dict[str, object] | None`
+ kopf/_cogs/structs/credentials.py:161:16: error[unsupported-operator] Operator `not in` is not supported between objects of type `str` and `dict[str, object] | None`
- kopf/_cogs/structs/credentials.py:163:24: error[unsupported-operator] Operator `not in` is not supported for types `str` and `None`, in comparing `str` with `dict[str, object] | None`
+ kopf/_cogs/structs/credentials.py:163:24: error[unsupported-operator] Operator `not in` is not supported between objects of type `str` and `dict[str, object] | None`
- kopf/_cogs/structs/references.py:304:45: error[unsupported-operator] Operator `in` is not supported for types `str` and `Marker`, in comparing `Literal[&quot;.&quot;]` with `str | Marker | None`
+ kopf/_cogs/structs/references.py:304:45: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;.&quot;]` and `str | Marker | None`
- kopf/_cogs/structs/references.py:309:42: error[unsupported-operator] Operator `in` is not supported for types `str` and `Marker`, in comparing `Literal[&quot;/&quot;]` with `str | Marker | None`
+ kopf/_cogs/structs/references.py:309:42: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;/&quot;]` and `str | Marker | None`

rich (https://github.com/Textualize/rich)
- rich/prompt.py:361:12: error[unsupported-operator] Operator `not in` is not supported for types `str` and `None`, in comparing `str` with `list[str] | None`
+ rich/prompt.py:361:12: error[unsupported-operator] Operator `not in` is not supported between objects of type `str` and `list[str] | None`

pylint (https://github.com/pycqa/pylint)
- pylint/checkers/unicode.py:171:12: error[unsupported-operator] Operator `not in` is not supported for types `_StrLike@_map_positions_to_result` and `_StrLike@_map_positions_to_result`
+ pylint/checkers/unicode.py:171:12: error[unsupported-operator] Operator `not in` is not supported between two objects of type `_StrLike@_map_positions_to_result`

dulwich (https://github.com/dulwich/dulwich)
- dulwich/object_store.py:2813:12: error[unsupported-operator] Operator `in` is not supported for types `ObjectID` and `() -&gt; dict[ObjectID, ObjectID]`, in comparing `ObjectID` with `Unknown | ((() -&gt; dict[ObjectID, ObjectID]) &amp; ~AlwaysTruthy &amp; ~AlwaysFalsy) | dict[Unknown, Unknown]`
+ dulwich/object_store.py:2813:12: error[unsupported-operator] Operator `in` is not supported between objects of type `ObjectID` and `Unknown | ((() -&gt; dict[ObjectID, ObjectID]) &amp; ~AlwaysTruthy &amp; ~AlwaysFalsy) | dict[Unknown, Unknown]`
- dulwich/objectspec.py:330:12: error[unsupported-operator] Operator `in` is not supported for types `bytes` and `RefsContainer`, in comparing `Unknown | bytes` with `Repo | RefsContainer`
+ dulwich/objectspec.py:330:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Unknown | bytes` and `Repo | RefsContainer`

ignite (https://github.com/pytorch/ignite)
- ignite/engine/events.py:94:57: error[unsupported-operator] Operator `&gt;` is not supported for types `list[Unknown]` and `int`, in comparing `(int &amp; Integral) | (list[Unknown] &amp; Integral)` with `Literal[0]`
+ ignite/engine/events.py:94:57: error[unsupported-operator] Operator `&gt;` is not supported between objects of type `(int &amp; Integral) | (list[Unknown] &amp; Integral)` and `Literal[0]`
- ignite/handlers/lr_finder.py:186:16: error[unsupported-operator] Operator `&lt;` is not supported for types `int` and `None`, in comparing `Unknown | int | float` with `Unknown | None | int | float`
+ ignite/handlers/lr_finder.py:186:16: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `Unknown | int | float` and `Unknown | None | int | float`
- tests/ignite/distributed/test_launcher.py:281:16: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;nproc_per_node&quot;]` with `Unknown | None | dict[Unknown, Unknown]`
+ tests/ignite/distributed/test_launcher.py:281:16: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;nproc_per_node&quot;]` and `Unknown | None | dict[Unknown, Unknown]`
- tests/ignite/distributed/test_launcher.py:282:16: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;start_method&quot;]` with `Unknown | None | dict[Unknown, Unknown]`
+ tests/ignite/distributed/test_launcher.py:282:16: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;start_method&quot;]` and `Unknown | None | dict[Unknown, Unknown]`
- tests/ignite/distributed/utils/__init__.py:131:8: error[unsupported-operator] Operator `in` is not supported for types `None` and `str`, in comparing `str | None` with `Literal[&quot;horovod&quot;]`
+ tests/ignite/distributed/utils/__init__.py:131:8: error[unsupported-operator] Operator `in` is not supported between objects of type `str | None` and `Literal[&quot;horovod&quot;]`
- tests/ignite/distributed/utils/__init__.py:143:8: error[unsupported-operator] Operator `in` is not supported for types `None` and `str`, in comparing `str | None` with `Literal[&quot;horovod&quot;]`
+ tests/ignite/distributed/utils/__init__.py:143:8: error[unsupported-operator] Operator `in` is not supported between objects of type `str | None` and `Literal[&quot;horovod&quot;]`
- tests/ignite/distributed/utils/__init__.py:154:10: error[unsupported-operator] Operator `in` is not supported for types `None` and `str`, in comparing `None | str` with `Literal[&quot;xla-tpu&quot;]`
+ tests/ignite/distributed/utils/__init__.py:154:10: error[unsupported-operator] Operator `in` is not supported between objects of type `None | str` and `Literal[&quot;xla-tpu&quot;]`
- tests/ignite/distributed/utils/__init__.py:157:10: error[unsupported-operator] Operator `in` is not supported for types `None` and `str`, in comparing `None | str` with `Literal[&quot;horovod&quot;]`
+ tests/ignite/distributed/utils/__init__.py:157:10: error[unsupported-operator] Operator `in` is not supported between objects of type `None | str` and `Literal[&quot;horovod&quot;]`
- tests/ignite/distributed/utils/__init__.py:255:8: error[unsupported-operator] Operator `in` is not supported for types `None` and `str`, in comparing `str | None` with `Literal[&quot;xla-tpu&quot;]`
+ tests/ignite/distributed/utils/__init__.py:255:8: error[unsupported-operator] Operator `in` is not supported between objects of type `str | None` and `Literal[&quot;xla-tpu&quot;]`
- tests/ignite/distributed/utils/__init__.py:258:10: error[unsupported-operator] Operator `in` is not supported for types `None` and `str`, in comparing `None | str` with `Literal[&quot;horovod&quot;]`
+ tests/ignite/distributed/utils/__init__.py:258:10: error[unsupported-operator] Operator `in` is not supported between objects of type `None | str` and `Literal[&quot;horovod&quot;]`
- tests/ignite/distributed/utils/__init__.py:286:10: error[unsupported-operator] Operator `in` is not supported for types `None` and `str`, in comparing `None | str` with `Literal[&quot;xla-tpu&quot;]`
+ tests/ignite/distributed/utils/__init__.py:286:10: error[unsupported-operator] Operator `in` is not supported between objects of type `None | str` and `Literal[&quot;xla-tpu&quot;]`
- tests/ignite/distributed/utils/__init__.py:417:40: error[unsupported-operator] Operator `in` is not supported for types `None` and `str`, in comparing `str | None` with `Literal[&quot;xla-tpu&quot;]`
+ tests/ignite/distributed/utils/__init__.py:417:40: error[unsupported-operator] Operator `in` is not supported between objects of type `str | None` and `Literal[&quot;xla-tpu&quot;]`
- tests/ignite/distributed/utils/__init__.py:419:40: error[unsupported-operator] Operator `in` is not supported for types `None` and `str`, in comparing `str | None` with `Literal[&quot;horovod&quot;]`
+ tests/ignite/distributed/utils/__init__.py:419:40: error[unsupported-operator] Operator `in` is not supported between objects of type `str | None` and `Literal[&quot;horovod&quot;]`
- tests/ignite/handlers/test_time_profilers.py:289:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `int`, in comparing `Literal[&quot;delay_start&quot;]` with `str | int | float | tuple[str | int | float, str | int | float]`
+ tests/ignite/handlers/test_time_profilers.py:289:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;delay_start&quot;]` and `str | int | float | tuple[str | int | float, str | int | float]`
- tests/ignite/handlers/test_time_profilers.py:331:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `int`, in comparing `Literal[&quot;delay_complete&quot;]` with `str | int | float | tuple[str | int | float, str | int | float]`
+ tests/ignite/handlers/test_time_profilers.py:331:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;delay_complete&quot;]` and `str | int | float | tuple[str | int | float, str | int | float]`
- tests/ignite/handlers/test_time_profilers.py:377:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `int`, in comparing `Literal[&quot;delay_epoch_start&quot;]` with `str | int | float | tuple[str | int | float, str | int | float]`
+ tests/ignite/handlers/test_time_profilers.py:377:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;delay_epoch_start&quot;]` and `str | int | float | tuple[str | int | float, str | int | float]`
- tests/ignite/handlers/test_time_profilers.py:427:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `int`, in comparing `Literal[&quot;delay_epoch_complete&quot;]` with `str | int | float | tuple[str | int | float, str | int | float]`
+ tests/ignite/handlers/test_time_profilers.py:427:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;delay_epoch_complete&quot;]` and `str | int | float | tuple[str | int | float, str | int | float]`
- tests/ignite/handlers/test_time_profilers.py:477:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `int`, in comparing `Literal[&quot;delay_iter_start&quot;]` with `str | int | float | tuple[str | int | float, str | int | float]`
+ tests/ignite/handlers/test_time_profilers.py:477:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;delay_iter_start&quot;]` and `str | int | float | tuple[str | int | float, str | int | float]`
- tests/ignite/handlers/test_time_profilers.py:527:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `int`, in comparing `Literal[&quot;delay_iter_complete&quot;]` with `str | int | float | tuple[str | int | float, str | int | float]`
+ tests/ignite/handlers/test_time_profilers.py:527:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;delay_iter_complete&quot;]` and `str | int | float | tuple[str | int | float, str | int | float]`
- tests/ignite/handlers/test_time_profilers.py:577:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `int`, in comparing `Literal[&quot;delay_get_batch_started&quot;]` with `str | int | float | tuple[str | int | float, str | int | float]`
+ tests/ignite/handlers/test_time_profilers.py:577:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;delay_get_batch_started&quot;]` and `str | int | float | tuple[str | int | float, str | int | float]`
- tests/ignite/handlers/test_time_profilers.py:627:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `int`, in comparing `Literal[&quot;delay_get_batch_completed&quot;]` with `str | int | float | tuple[str | int | float, str | int | float]`
+ tests/ignite/handlers/test_time_profilers.py:627:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;delay_get_batch_completed&quot;]` and `str | int | float | tuple[str | int | float, str | int | float]`
- tests/ignite/handlers/test_time_profilers.py:653:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `int`, in comparing `Literal[&quot;do_something_once_on_2_epoch&quot;]` with `str | int | float | tuple[str | int | float, str | int | float]`
+ tests/ignite/handlers/test_time_profilers.py:653:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;do_something_once_on_2_epoch&quot;]` and `str | int | float | tuple[str | int | float, str | int | float]`
- tests/ignite/handlers/test_time_profilers.py:674:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `int`, in comparing `Literal[&quot;do_something_once_on_2_epoch&quot;]` with `str | int | float | tuple[str | int | float, str | int | float]`
+ tests/ignite/handlers/test_time_profilers.py:674:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;do_something_once_on_2_epoch&quot;]` and `str | int | float | tuple[str | int | float, str | int | float]`
- tests/ignite/handlers/test_time_profilers.py:709:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `int`, in comparing `Literal[&quot;on_custom_event&quot;]` with `str | int | float | tuple[str | int | float, str | int | float]`
+ tests/ignite/handlers/test_time_profilers.py:709:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;on_custom_event&quot;]` and `str | int | float | tuple[str | int | float, str | int | float]`

mkosi (https://github.com/systemd/mkosi)
- mkosi/__init__.py:1740:13: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `str`, in comparing `GenericVersion` with `Literal[&quot;258&quot;]`
+ mkosi/__init__.py:1740:13: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion` and `Literal[&quot;258&quot;]`
- mkosi/__init__.py:1800:13: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `str`, in comparing `GenericVersion` with `Literal[&quot;256&quot;]`
+ mkosi/__init__.py:1800:13: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion` and `Literal[&quot;256&quot;]`
- mkosi/__init__.py:1807:17: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `str`, in comparing `GenericVersion &amp; ~AlwaysFalsy` with `Literal[&quot;256&quot;]`
+ mkosi/__init__.py:1807:17: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion &amp; ~AlwaysFalsy` and `Literal[&quot;256&quot;]`
- mkosi/__init__.py:3386:17: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `int`, in comparing `GenericVersion` with `Literal[256]`
+ mkosi/__init__.py:3386:17: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion` and `Literal[256]`
- mkosi/__init__.py:3391:17: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `int`, in comparing `GenericVersion` with `Literal[258]`
+ mkosi/__init__.py:3391:17: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion` and `Literal[258]`
- mkosi/bootloader.py:739:83: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `str`, in comparing `GenericVersion` with `Literal[&quot;257&quot;]`
+ mkosi/bootloader.py:739:83: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion` and `Literal[&quot;257&quot;]`
- mkosi/config.py:1559:8: error[unsupported-operator] Operator `&gt;` is not supported for types `GenericVersion` and `str`, in comparing `GenericVersion` with `Literal[&quot;26~devel&quot;]`
+ mkosi/config.py:1559:8: error[unsupported-operator] Operator `&gt;` is not supported between objects of type `GenericVersion` and `Literal[&quot;26~devel&quot;]`
- mkosi/config.py:1565:21: error[unsupported-operator] Operator `&gt;` is not supported for types `GenericVersion` and `str`, in comparing `GenericVersion` with `str &amp; ~AlwaysFalsy`
+ mkosi/config.py:1565:21: error[unsupported-operator] Operator `&gt;` is not supported between objects of type `GenericVersion` and `str &amp; ~AlwaysFalsy`
- mkosi/distribution/centos.py:61:13: error[unsupported-operator] Operator `&gt;` is not supported for types `GenericVersion` and `int`, in comparing `GenericVersion` with `Literal[9]`
+ mkosi/distribution/centos.py:61:13: error[unsupported-operator] Operator `&gt;` is not supported between objects of type `GenericVersion` and `Literal[9]`
- mkosi/distribution/centos.py:70:12: error[unsupported-operator] Operator `&lt;=` is not supported for types `GenericVersion` and `int`, in comparing `GenericVersion` with `Literal[8]`
+ mkosi/distribution/centos.py:70:12: error[unsupported-operator] Operator `&lt;=` is not supported between objects of type `GenericVersion` and `Literal[8]`
- mkosi/distribution/centos.py:255:12: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `int`, in comparing `GenericVersion` with `Literal[10]`
+ mkosi/distribution/centos.py:255:12: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion` and `Literal[10]`
- mkosi/distribution/opensuse.py:60:60: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `int`, in comparing `GenericVersion` with `Literal[16]`
+ mkosi/distribution/opensuse.py:60:60: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion` and `Literal[16]`
- mkosi/distribution/opensuse.py:224:20: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `int`, in comparing `GenericVersion` with `Literal[16]`
+ mkosi/distribution/opensuse.py:224:20: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion` and `Literal[16]`
- mkosi/qemu.py:277:24: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `str`, in comparing `GenericVersion` with `Literal[&quot;0.10.0&quot;]`
+ mkosi/qemu.py:277:24: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion` and `Literal[&quot;0.10.0&quot;]`
- mkosi/qemu.py:962:42: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `int`, in comparing `GenericVersion` with `Literal[254]`
+ mkosi/qemu.py:962:42: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion` and `Literal[254]`
- mkosi/qemu.py:1122:9: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `GenericVersion`
+ mkosi/qemu.py:1122:9: error[unsupported-operator] Operator `&gt;=` is not supported between two objects of type `GenericVersion`
- mkosi/qemu.py:1231:12: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `GenericVersion`
+ mkosi/qemu.py:1231:12: error[unsupported-operator] Operator `&gt;=` is not supported between two objects of type `GenericVersion`
- mkosi/tree.py:144:69: error[unsupported-operator] Operator `&gt;=` is not supported for types `GenericVersion` and `str`, in comparing `GenericVersion` with `Literal[&quot;9.5&quot;]`
+ mkosi/tree.py:144:69: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `GenericVersion` and `Literal[&quot;9.5&quot;]`

PyGithub (https://github.com/PyGithub/PyGithub)
- tests/GithubRetry.py:102:53: error[unsupported-operator] Operator `&gt;` is not supported for types `None` and `int`, in comparing `Unknown | None` with `Literal[0]`
+ tests/GithubRetry.py:102:53: error[unsupported-operator] Operator `&gt;` is not supported between objects of type `Unknown | None` and `Literal[0]`

urllib3 (https://github.com/urllib3/urllib3)
- test/test_exceptions.py:58:20: error[unsupported-operator] Operator `in` is not supported for types `object` and `str`
+ test/test_exceptions.py:58:20: error[unsupported-operator] Operator `in` is not supported between objects of type `object` and `str`

mitmproxy (https://github.com/mitmproxy/mitmproxy)
- test/mitmproxy/addons/test_clientplayback.py:175:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;live flow&quot;]` with `str | None`
+ test/mitmproxy/addons/test_clientplayback.py:175:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;live flow&quot;]` and `str | None`
- test/mitmproxy/addons/test_clientplayback.py:179:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;intercepted flow&quot;]` with `str | None`
+ test/mitmproxy/addons/test_clientplayback.py:179:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;intercepted flow&quot;]` and `str | None`
- test/mitmproxy/addons/test_clientplayback.py:183:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;missing request&quot;]` with `str | None`
+ test/mitmproxy/addons/test_clientplayback.py:183:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;missing request&quot;]` and `str | None`
- test/mitmproxy/addons/test_clientplayback.py:187:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;missing content&quot;]` with `str | None`
+ test/mitmproxy/addons/test_clientplayback.py:187:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;missing content&quot;]` and `str | None`
- test/mitmproxy/addons/test_clientplayback.py:191:16: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;Can only replay HTTP&quot;]` with `str | None`
+ test/mitmproxy/addons/test_clientplayback.py:191:16: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;Can only replay HTTP&quot;]` and `str | None`
- test/mitmproxy/addons/test_cut.py:58:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `bytes`, in comparing `Literal[&quot;CERTIFICATE&quot;]` with `str | bytes`
+ test/mitmproxy/addons/test_cut.py:58:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;CERTIFICATE&quot;]` and `str | bytes`
- test/mitmproxy/addons/test_cut.py:65:12: error[unsupported-operator] Operator `in` is not supported for types `bytes` and `str`, in comparing `Literal[b&quot;hello binary&quot;]` with `str | bytes`
+ test/mitmproxy/addons/test_cut.py:65:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[b&quot;hello binary&quot;]` and `str | bytes`
- test/mitmproxy/addons/test_cut.py:66:12: error[unsupported-operator] Operator `in` is not supported for types `bytes` and `str`, in comparing `Literal[b&quot;hello text&quot;]` with `str | bytes`
+ test/mitmproxy/addons/test_cut.py:66:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[b&quot;hello text&quot;]` and `str | bytes`
- test/mitmproxy/addons/test_cut.py:67:12: error[unsupported-operator] Operator `in` is not supported for types `bytes` and `str`, in comparing `Literal[b&quot;it's me&quot;]` with `str | bytes`
+ test/mitmproxy/addons/test_cut.py:67:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[b&quot;it's me&quot;]` and `str | bytes`
- test/mitmproxy/addons/test_cut.py:68:12: error[unsupported-operator] Operator `in` is not supported for types `bytes` and `str`, in comparing `Literal[b&quot;hello binary&quot;]` with `str | bytes`
+ test/mitmproxy/addons/test_cut.py:68:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[b&quot;hello binary&quot;]` and `str | bytes`
- test/mitmproxy/addons/test_cut.py:69:12: error[unsupported-operator] Operator `in` is not supported for types `bytes` and `str`, in comparing `Literal[b&quot;hello text&quot;]` with `str | bytes`
+ test/mitmproxy/addons/test_cut.py:69:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[b&quot;hello text&quot;]` and `str | bytes`
- test/mitmproxy/addons/test_cut.py:70:12: error[unsupported-operator] Operator `in` is not supported for types `bytes` and `str`, in comparing `Literal[b&quot;it's me&quot;]` with `str | bytes`
+ test/mitmproxy/addons/test_cut.py:70:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[b&quot;it's me&quot;]` and `str | bytes`
- test/mitmproxy/addons/test_proxyserver.py:209:16: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;Request destination unknown&quot;]` with `str | None`
+ test/mitmproxy/addons/test_proxyserver.py:209:16: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;Request destination unknown&quot;]` and `str | None`
- test/mitmproxy/test_http.py:1119:16: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;&quot;]` with `str | None`
+ test/mitmproxy/test_http.py:1119:16: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;&quot;]` and `str | None`
- test/mitmproxy/test_http.py:1128:16: error[unsupported-operator] Operator `not in` is not supported for types `str` and `None`, in comparing `Literal[&quot;&quot;]` with `str | None`
+ test/mitmproxy/test_http.py:1128:16: error[unsupported-operator] Operator `not in` is not supported between objects of type `Literal[&quot;&quot;]` and `str | None`
- test/mitmproxy/test_http.py:1137:16: error[unsupported-operator] Operator `not in` is not supported for types `str` and `None`, in comparing `Literal[&quot;&quot;]` with `str | None`
+ test/mitmproxy/test_http.py:1137:16: error[unsupported-operator] Operator `not in` is not supported between objects of type `Literal[&quot;&quot;]` and `str | None`
- test/mitmproxy/test_http.py:1146:16: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;&quot;]` with `str | None`
+ test/mitmproxy/test_http.py:1146:16: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;&quot;]` and `str | None`

vision (https://github.com/pytorch/vision)
- test/datasets_utils.py:370:12: error[unsupported-operator] Operator `in` is not supported for types `str` and `None`, in comparing `Literal[&quot;download&quot;]` with `Unknown | None`
+ test/datasets_utils.py:370:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;download&quot;]` and `Unknown | None`
- test/datasets_utils.py:564:16: error[unsupported-operator] Operator `not in` is not supported for types `Unknown` and `None`, in comparing `Unknown | str` with `Unknown | None`
+ test/datasets_utils.py:564:16: error[unsupported-operator] Operator `not in` is not supported between objects of type `Unknown | str` and `Unknown | None`
- test/test_image.py:221:8: error[unsupported-operator] Operator `&gt;=` is not supported for types `str` and `tuple[Literal[8], Literal[3]]`, in comparing `Literal[&quot;12.0.0&quot;]` with `tuple[Literal[8], Literal[3]]`
+ test/test_image.py:221:8: error[unsupported-operator] Operator `&gt;=` is not supported between objects of type `Literal[&quot;12.0.0&quot;]` and `tuple[Literal[8], Literal[3]]`
- test/test_utils.py:127:8: error[unsupported-operator] Operator `&gt;=` is not supported for types `str` and `tuple[Literal[10], Literal[1]]`, in comparing `Literal[&quot;12.0.0&quot;]` with 

... (truncated 1443 lines) ...
</code></pre>
</details>

<p>No memory usage changes detected </p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by @AlexWaygood on 2025-12-01 18:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2025-12-01 19:00</div>
            <div class="timeline-body"><!-- generated-comment ty ecosystem-analyzer -->

<h2><code>ecosystem-analyzer</code> results</h2>
<p>| Lint rule | Added | Removed | Changed |
|-----------|------:|--------:|--------:|
| <code>unsupported-operator</code> | 0 | 0 | 814 |
| <code>unsupported-base</code> | 0 | 1 | 0 |
| <strong>Total</strong> | <strong>0</strong> | <strong>1</strong> | <strong>814</strong> |</p>
<p><strong><a href="https://alex-operator-disambiguate.ecosystem-663.pages.dev/diff">Full report with detailed diff</a></strong> (<a href="https://alex-operator-disambiguate.ecosystem-663.pages.dev/timing">timing results</a>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/resources/mdtest/bidirectional.md</code>:343 on 2025-12-02 08:56</div>
            <div class="timeline-body"><p></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:53 on 2025-12-02 08:57</div>
            <div class="timeline-body"><p>I'd remove this message. This is true for almost all ty diagnostics and it doesn't provide any additional information</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:64 on 2025-12-02 08:58</div>
            <div class="timeline-body"><p>I would remove the <code>Right-hand</code> side and <code>Left-hand side</code>. This is viusally appearant and we also don't refer to the left-hand or right-hand side in the rest of the diagnostic message.</p>
<pre><code class="language-suggestion">   |                         -    - has type `NonContainer1 &amp; NonContainer2`
   |                         |
   |                         has type `Literal[2]`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 09:00</div>
            <div class="timeline-body"><p>Do we need to add the <code>info</code> message here? Can't we add a secondary annotation to the main diagnostic? I'm asking because I don't find <code>Operand types</code> a very helpful info message</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/src/types/diagnostic.rs</code>:4117 on 2025-12-02 09:02</div>
            <div class="timeline-body"><p>How's this comparison different from the one on line 4078?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-12-02 09:02</div>
            <div class="timeline-body"><p>Nice, I mainly reviewed the diagnostics and I think we should make them more concise</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-02 09:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 09:06</div>
            <div class="timeline-body"><p>I tried it with the secondary-annotation approach initially but found the overlapping ranges very confusing to look at (the primary range covers the whole expression  correctly, in my view)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-02 09:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:53 on 2025-12-02 09:08</div>
            <div class="timeline-body"><p>Fair</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-02 09:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/diagnostic.rs</code>:4117 on 2025-12-02 09:08</div>
            <div class="timeline-body"><p>I'll add a comment</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-12-02 09:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 09:10</div>
            <div class="timeline-body"><p>Hmm. Repeating the same code frame adds a lot of redundancy (beyond the message itself, like each diagnostic repeating the code twice).</p>
<p>But I can see how overlapping ranges can look weird. The only other solution I see is to put the operand types into the primary message. Unless @BurntSushi has an idea</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 09:13</div>
            <div class="timeline-body"><blockquote>
<p>The only other solution I see is to put the operand types into the primary message.</p>
</blockquote>
<p>Right, but it can make for an extremely long primary message. Which was exactly what this PR was trying to fix :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-02 09:13</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-02 09:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 09:18</div>
            <div class="timeline-body"><p>If we had the ability to optionally specify a separate primary-highlight range that is different from the primary suppression range (which we've discussed before in various places, e.g. https://github.com/astral-sh/ruff/pull/18050#discussion_r2085275592, though I don't think we have an issue for it yet), then I would have the primary-highlight range cover only the operator in between the operands. But as it is, I'm pretty sure that would do chaotic things to people's suppression comments for this error code</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-12-02 09:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 09:27</div>
            <div class="timeline-body"><blockquote>
<p>Right, but it can make for an extremely long primary message. Which was exactly what this PR was trying to fix :-)</p>
</blockquote>
<p>Not the diagnostic message, move it into the annotation. It might still be long, though.</p>
<p>The alternative is to have to <code>info</code> messages, but I worry that this buries important information.</p>
<blockquote>
<p>If we had the ability to optionally specify a separate primary-highlight range that is different from the primary suppression range (which we've discussed before in various places,</p>
</blockquote>
<p>The case here seems different enough to me where I'd say a separate suppression range isn't the solution. In most instances where we wanted that feature is to allow a wider suppression range but without necessarily changing the line number on which the diagnostic gets reported. Here, we don't want to change the suppression range OR the line number of the diagnostic, we just want more sane rendering of overlapping ranges </p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-02 09:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 09:31</div>
            <div class="timeline-body"><blockquote>
<p>Not the diagnostic message, move it into the annotation. It might still be long, though.</p>
</blockquote>
<p>Yeah, this actually makes the &quot;long sentence&quot; problem even worse because if it's the primary annotation message then now the whole sentence is indented significantly before it even starts</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-12-02 09:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 09:33</div>
            <div class="timeline-body"><p>I think I prefer the old rendering then, given that it also matches the concise rendering. It simply presents the same information with less repetition</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-02 09:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 09:36</div>
            <div class="timeline-body"><blockquote>
<p>The case here seems different enough to me where I'd say a separate suppression range isn't the solution. In most instances where we wanted that feature is to allow a wider suppression range but without necessarily changing the line number on which the diagnostic gets reported. Here, we don't want to change the suppression range OR the line number of the diagnostic, we just want more sane rendering of overlapping ranges </p>
</blockquote>
<p>If I changed the primary range of the diagnostic to be just the operator (so that it doesn't overlap with the ranges of the secondary annotations) then we <em>would</em> want to change the suppression range. That feels exactly the same as the situation discussed in https://github.com/astral-sh/ruff/pull/18050#discussion_r2085275592, where we wanted to make the primary range of the diagnostic smaller for rendering purposes but we held off because we didn't have a way to separately specify a larger suppression range</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-12-02 09:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 09:42</div>
            <div class="timeline-body"><p>Oh I see. I'm not sure if I would do that. It can be very hard to spot the operator and, similar to the attribute expression, the error isn't the operator, it's the combination of left hand side, right hand side, and operator (you all sort of convinced me that the attribute expression ranges are correct, don't start arguing the other way ;))</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2025-12-02 13:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 13:29</div>
            <div class="timeline-body"><p>I like the rendering in this PR over the old rendering, even with the duplication.</p>
<p>But how bad does the overlapping ranges in one code frame look? That would be my instinct here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-02 15:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 15:14</div>
            <div class="timeline-body"><p>I pushed some updates so that the diagnostic is now much more concise in the (common?) case where both operands have the same type, e.g.:</p>
<p><img width="1808" height="450" alt="image" src="https://github.com/user-attachments/assets/829ec9f3-c142-42ab-b4d9-966508bacbe2" /></p>
<p>But if the two operands have different types, I've kept the separate code frame -- it looks much more readable to me. Here's what it looks like on this PR branch currently:</p>
<p><img width="2162" height="718" alt="image" src="https://github.com/user-attachments/assets/b53c752a-08dc-4de2-8fc6-91939b3d4f6f" /></p>
<p>and here's what it looks like if I push it all into one codeframe:</p>
<p><img width="2154" height="504" alt="image" src="https://github.com/user-attachments/assets/f50449aa-17e1-4b5e-8942-9ede502e8f75" /></p>
<p>This is the patch I applied to my PR branch to push it all into one codeframe:</p>
<details>
<summary>Patch</summary>

<pre><code class="language-diff">diff --git a/crates/ty_python_semantic/src/types/diagnostic.rs b/crates/ty_python_semantic/src/types/diagnostic.rs
index 3493f62d17..cc98f709bb 100644
--- a/crates/ty_python_semantic/src/types/diagnostic.rs
+++ b/crates/ty_python_semantic/src/types/diagnostic.rs
@@ -4075,44 +4075,35 @@ pub(super) fn report_unsupported_comparison&lt;'db&gt;(
         [error.left_ty, error.right_ty, left_ty, right_ty],
     );
 
-    let mut diagnostic = if left_ty == right_ty {
-        let mut diag = diagnostic_builder
-            .into_diagnostic(format_args!(&quot;Unsupported `{}` operation&quot;, error.op));
-        diag.set_primary_message(format_args!(
+    let mut diagnostic =
+        diagnostic_builder.into_diagnostic(format_args!(&quot;Unsupported `{}` operation&quot;, error.op));
+
+    if left_ty == right_ty {
+        diagnostic.set_primary_message(format_args!(
             &quot;Both operands have type `{}`&quot;,
             left_ty.display_with(db, display_settings.clone())
         ));
-        diag.annotate(context.secondary(left));
-        diag.annotate(context.secondary(right));
-        diag.set_concise_message(format_args!(
+        diagnostic.annotate(context.secondary(left));
+        diagnostic.annotate(context.secondary(right));
+        diagnostic.set_concise_message(format_args!(
             &quot;Operator `{}` is not supported between two objects of type `{}`&quot;,
             error.op,
             left_ty.display_with(db, display_settings.clone())
         ));
-        diag
     } else {
-        let mut diag = diagnostic_builder.into_diagnostic(&quot;Unsupported comparison operation&quot;);
-
-        diag.set_primary_message(format_args!(&quot;`{}` is not supported here&quot;, error.op));
-
-        let mut sub = SubDiagnostic::new(SubDiagnosticSeverity::Info, &quot;Operand types&quot;);
         for (ty, expr) in [(left_ty, left), (right_ty, right)] {
-            sub.annotate(context.secondary(expr).message(format_args!(
+            diagnostic.annotate(context.secondary(expr).message(format_args!(
                 &quot;Has type `{}`&quot;,
                 ty.display_with(db, display_settings.clone())
             )));
         }
-        diag.sub(sub);
-
-        diag.set_concise_message(format_args!(
+        diagnostic.set_concise_message(format_args!(
             &quot;Operator `{}` is not supported between objects of type `{}` and `{}`&quot;,
             error.op,
             left_ty.display_with(db, display_settings.clone()),
             right_ty.display_with(db, display_settings.clone())
         ));
-
-        diag
-    };
+    }
 
     // For non-atomic types like unions and tuples, we now provide context
     // on the underlying elements that caused the error.
</code></pre>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2025-12-02 15:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 15:24</div>
            <div class="timeline-body"><p>I'm fine to go with what you have here personally. I think it's better than the status quo.</p>
<p>I am not offended by the overlapping ranges in one code frame though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-12-02 15:29</div>
            <div class="timeline-body"><!-- __CODSPEED_PERFORMANCE_REPORT_COMMENT__ -->

<h2><a href="https://codspeed.io/astral-sh/ruff/branches/alex%2Foperator-disambiguate?utm_source=github&amp;utm_medium=comment&amp;utm_content=header">CodSpeed Performance Report</a></h2>
<h3>Merging #21737 will <strong>not alter performance</strong></h3>
<p><sub>Comparing <code>alex/operator-disambiguate</code> (a68fafc) with <code>main</code> (515de2d)</sub></p>
<h3>Summary</h3>
<p><code> 22</code> untouched<br />
<code> 30</code> skipped[^skipped]</p>
<p>[^skipped]: 30 benchmarks were skipped, so the baseline results were used instead. If they were deleted from the codebase, <a href="https://codspeed.io/astral-sh/ruff/branches/alex%2Foperator-disambiguate?sectionId=benchmark-comparison-section-baseline-result-skipped&amp;utm_source=github&amp;utm_medium=comment&amp;utm_content=archive">click here and archive them to remove them from the performance reports</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-02 16:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 16:42</div>
            <div class="timeline-body"><p>Eh, I guess it's okay. It still feels a bit like a wall of text to me, but I do agree that concision is important on the CLI. I also find the tiny red <code>^^^</code> primary diagnostic in between the two yellow secondary diagnostics to look very strange, but hey.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 16:42</div>
            <div class="timeline-body"><p>(I'll switch to a single codeframe)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-02 16:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-12-02 18:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:58 on 2025-12-02 18:10</div>
            <div class="timeline-body"><p>I'm still not convinced by this change but I also don't think it should be blocking. I still think it makes the diagnostics unnecessarily verbose, especially in cases where the types are short, which is not uncommon. We then expand double the vertical size of the diagnostic without any real added benefit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-12-02 18:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-12-02 19:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:53 on 2025-12-02 19:20</div>
            <div class="timeline-body"><p>I think I actually got this wrong and think we should keep it. Sorry. Did it show the elements that were incompatible if the type were a union or intersection? If so, I think that was useful. I misread it as that it always repeats the left and right operand types</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-12-02 19:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/snapshots/intersections.md_-_Comparison___Intersec_-_Diagnostics_-_Unsupported_operator_(27f95f68d1c826ec).snap</code>:53 on 2025-12-02 19:22</div>
            <div class="timeline-body"><p>no, you were right, it didn't show anything useful. It just said &quot;comparison may raise an exception&quot;. I do still have an <code>info</code> subdiagnostic that tells you the incompatible elements if it's a union or tuple. (Intersections don't have the same issue, because they're much more forgiving than unions or tuples.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-02 19:46</div>
            <div class="timeline-body"><p>Some final screenshots now that I've addressed review comments. Much more concise than the initial version in this PR:</p>
<p><img width="2604" height="1952" alt="image" src="https://github.com/user-attachments/assets/a9bed9ec-4bb2-419e-aaa3-062e358bd2e2" /></p>
<p>and the concise diagnostics for the same errors:</p>
<pre><code>foo.py:1:1: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `Literal[1]` and `Literal[&quot;foo&quot;]`
foo.py:2:1: error[unsupported-operator] Operator `&lt;` is not supported between two objects of type `tuple[Literal[1], Literal[2], Literal[3], Literal[4], object]`
foo.py:3:1: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `tuple[Literal[1], Literal[2], Literal[3], Literal[4], Literal[&quot;foo&quot;]]` and `tuple[Literal[1], Literal[2], Literal[3], Literal[4], Literal[5]]`
foo.py:7:5: error[unsupported-operator] Operator `&lt;` is not supported between objects of type `int | str` and `int | list[str]`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @AlexWaygood on 2025-12-02 19:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-12-02 19:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-12-02 19:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:17:43 UTC
    </footer>
</body>
</html>
