<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for configuring knot in `pyproject.toml` files - astral-sh/ruff #15493</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for configuring knot in <code>pyproject.toml</code> files</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/15493">#15493</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2025-01-15 10:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR adds support for configuring Red Knot in the <code>tool.knot</code> section of the project's
<code>pyproject.toml</code> section. Options specified on the CLI precede the
options in the configuration file.</p>
<p>This PR only supports the <code>environment</code> and the <code>src.root</code> options for now.
Other options will be added as separate PRs.</p>
<p>There are also a few concerns that I intentionally ignored as part of this PR:</p>
<ul>
<li>Handling of relative paths: We need to anchor paths relative to the current working directory (CLI), or the project (<code>pyproject.toml</code> or <code>knot.toml</code>)</li>
<li>Tracking the source of a value. Diagnostics would benefit from knowing from which configuration a value comes so that we can point the user to the right configuration file (or CLI) if the configuration is invalid.</li>
<li>Schema generation and there's a lot more; see https://github.com/astral-sh/ty/issues/219</li>
</ul>
<p>This PR changes the default for first party codes: Our existing default was to only add the project root. Now, Red Knot adds the project root and <code>src</code> (if such a directory exists).</p>
<p>Theoretically, we'd have to add a file watcher event that changes the first-party search paths if a user later creates a <code>src</code> directory. I think this is pretty uncommon, which is why I ignored the complexity for now but I can be persuaded to handle it if it's considered important.</p>
<p>Part of https://github.com/astral-sh/ty/issues/219</p>
<h2>Test Plan</h2>
<p>Existing tests, new file watching test demonstrating that changing the python version and platform is correctly reflected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @MichaReiser on 2025-01-15 10:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/src/main.rs</code>:82 on 2025-01-15 10:57</div>
            <div class="timeline-body"><p>Rename CLI option?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_python_semantic/src/module_resolver/testing.rs</code>:242 on 2025-01-15 11:02</div>
            <div class="timeline-body"><p>I renamed <code>site_packages</code> to <code>python</code> according to the CLI document (at least that's how I understood the change). @AlexWaygood let me know if that's what you intended.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-01-15 11:04</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>ℹ️ ecosystem check <strong>encountered format errors</strong>. (no format changes; 1 project error)</p>
<details><summary><a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)</summary>
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to read examples/Assistants_API_overview_python.ipynb: Expected a Jupyter Notebook, which must be internally stored as JSON, but this file isn't valid JSON: expected `,` or `]` at line 197 column 8
</code></pre>
</p>
</details>

<h3>Formatter (preview)</h3>
<p>ℹ️ ecosystem check <strong>encountered format errors</strong>. (no format changes; 1 project error)</p>
<details><summary><a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to read examples/Assistants_API_overview_python.ipynb: Expected a Jupyter Notebook, which must be internally stored as JSON, but this file isn't valid JSON: expected `,` or `]` at line 197 column 8
</code></pre>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_workspace/src/project/options.rs</code>:11 on 2025-01-15 11:11</div>
            <div class="timeline-body"><p>I renamed <code>Configuration</code> to <code>Options</code> to match uv's and ruff's terminology.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-01-15 11:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @MichaReiser on 2025-01-15 13:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @MichaReiser on 2025-01-15 13:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @MichaReiser on 2025-01-15 13:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @MichaReiser on 2025-01-15 13:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 15:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot/src/main.rs</code>:46 on 2025-01-15 15:53</div>
            <div class="timeline-body"><p>Minor: do we want to be consistent on capitalizing &quot;Python&quot;? (see &quot;about&quot; above, for example)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 15:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot/tests/cli.rs</code>:27 on 2025-01-15 15:57</div>
            <div class="timeline-body"><p>I suppose this is used because it was introduced in 3.12. Maybe add a comment here to make that more clear?</p>
<pre><code class="language-suggestion"># `sys.last_exc` was introduced in 3.12
print(sys.last_exc)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 15:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot/tests/cli.rs</code>:49 on 2025-01-15 15:58</div>
            <div class="timeline-body"><p>Can we also assert that the same command fails without the <code>--python-version 3.12</code> option? Otherwise, this could just spuriously succeed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 16:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:22 on 2025-01-15 16:09</div>
            <div class="timeline-body"><p>This particular example is a bit confusing to me, as <code>--ignore</code> and <code>--warn</code> seem like two (related but) different options?</p>
<p>The inclusion/exclusion patterns might be a better example a merging of something like <code>exclude = [&quot;*.png&quot;]</code> and <code>exclude = [&quot;!important.png&quot;]</code> to <code>[&quot;*.png&quot;, &quot;!important.png&quot;]</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot/tests/file_watching.rs</code>:912 on 2025-01-15 16:15</div>
            <div class="timeline-body"><p>Minor</p>
<pre><code class="language-suggestion">    let diagnostics = case.db.check().context(&quot;Failed to check project.&quot;)?;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 16:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot/tests/file_watching.rs</code>:935 on 2025-01-15 16:15</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    let diagnostics = case.db.check().context(&quot;Failed to check project.&quot;)?;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 16:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 16:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:50 on 2025-01-15 16:22</div>
            <div class="timeline-body"><p>Minor naming comment: &quot;combine&quot; has no clear direction/order/precedence for me. Something like <code>OverrideWith</code>, <code>OverlayWith</code>, <code>ExtendWith</code> or similar might be a bit clearer in terms of which side is taking precedence? (after potentially swapping sides in the implementation)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/ruff_macros/src/combine.rs</code>:41 on 2025-01-15 16:27</div>
            <div class="timeline-body"><p>Mostly just curious: Would it make sense (and is it possible?) to auto-derive <code>Combine</code> for enums by simply taking the value from the side which takes precendence and forgetting the other one?</p>
<p>Not sure if that's what we want in all cases though. In the <code>Option</code> case for example, we probably ignore overriding with <code>None</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 16:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 16:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:147 on 2025-01-15 16:27</div>
            <div class="timeline-body"><p>Minor readability:</p>
<pre><code class="language-suggestion">                // The value from 'a' takes precedence
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 16:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:50 on 2025-01-15 16:32</div>
            <div class="timeline-body"><p>Also: I want that trait in a separate crate so I can use it in my projects! :star_struck:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 16:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:77 on 2025-01-15 16:37</div>
            <div class="timeline-body"><p>I could probably understand this from the code above... but what's the reason that we can't implement <code>Combine</code> for <code>Vec</code> and <code>HashMap</code> directly and then have one unified implementation for <code>Option&lt;T&gt;</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-01-15 16:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:50 on 2025-01-15 16:41</div>
            <div class="timeline-body"><p>I used this name because it's what Ruff and uv are using... I considered naming it <code>Merge</code> but it didn't seem an improvement enough to justify diverging.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-01-15 16:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_macros/src/combine.rs</code>:41 on 2025-01-15 16:44</div>
            <div class="timeline-body"><p>Neither ruff nor uv required deriving <code>Combine</code> for enums and I'm not 100% sure what the semantics should be for enum with fields (we may want to merge them?).</p>
<p>I suggest that we defer this until we have a use case where we can discuss the desired semantics.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-01-15 16:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/red_knot_python_semantic/src/module_resolver/testing.rs</code>:242 on 2025-01-15 16:49</div>
            <div class="timeline-body"><p>Although we'll be using <code>--python</code> for the CLI argument, it <em>might</em> be better to use variables such as <code>sys_prefix</code> and call the enum <code>SysPrefixPath</code>. That would be more precise and help me remember that the path needs to point to the grandparent directory of the Python binary rather than the path to the binary itself. See this doc-comment for a definition of <code>sys.prefix</code>:</p>
<p>https://github.com/astral-sh/ruff/blob/48e65418938da311b591bcd6e0f691f888bcb5e8/crates/red_knot_python_semantic/src/site_packages.rs#L360-L374</p>
<p>You might also want to rename this struct to something like <code>PythonInstallation</code>, update the <code>venv_path</code> field to <code>sys_prefix_path</code>, and update the doc-comments to note that it could point to a system installation or a virtual-environment &quot;installation&quot; https://github.com/astral-sh/ruff/blob/48e65418938da311b591bcd6e0f691f888bcb5e8/crates/red_knot_python_semantic/src/site_packages.rs#L22-L42</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-01-15 17:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:77 on 2025-01-15 17:35</div>
            <div class="timeline-body"><p>I can change it to have one <code>impl_combine_option</code> and another <code>impl_combine_rec</code> macro to make it more clear.</p>
<p>What we'd need is:</p>
<pre><code class="language-rust">impl&lt;T&gt; Combine for Option&lt;T&gt; {
	fn combine_with(&amp;mut self, other: Self) {
		if self.is_none() {
			*self = other;
		}
	}
}

// Specialize for `T` where `T` implements Combine
// Recursively merges the value instead of just picking `self` over `other`
impl&lt;T&gt; Combine for Option&lt;T&gt; where T: Combine {
	fn combine_with(&amp;mut self, other: Self) {
		if let (Some(a), Some(mut b)) = (self, other) {
			// recurse!
			a.combine_with(b);
		} else if self.is_none() {
			*self = other;
		}
	}
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 17:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:50 on 2025-01-15 17:53</div>
            <div class="timeline-body"><p>Ah, I didn't realize it was an existing concept.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-15 18:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:77 on 2025-01-15 18:23</div>
            <div class="timeline-body"><p>I was thinking something like this, which seems to pass all tests, but I haven't thought it through completely. Feel free to disregard this comment.</p>
<pre><code class="language-rs">impl&lt;T&gt; Combine for Vec&lt;T&gt; {
    fn combine_with(&amp;mut self, mut other: Self) {
        // `self` takes precedence over `other` but values with higher precedence must be placed after.
        // Swap the vectors so that `other` is the one that gets extended, so that the values of `self` come after.
        std::mem::swap(self, &amp;mut other);
        self.extend(other);
    }
}

impl&lt;K, V, S&gt; Combine for HashMap&lt;K, V, S&gt;
where
    K: Eq + std::hash::Hash,
    S: BuildHasher,
{
    fn combine_with(&amp;mut self, mut other: Self) {
        // `self` takes precedence over `other` but `extend` overrides existing values.
        // Swap the hash maps so that `other` is the one that gets extended.
        std::mem::swap(self, &amp;mut other);
        self.extend(other);
    }
}

impl&lt;T: Combine&gt; Combine for Option&lt;T&gt; {
    fn combine_with(&amp;mut self, other: Self) {
        match self {
            None =&gt; *self = other,
            Some(a) =&gt; {
                if let Some(b) = other {
                    a.combine_with(b);
                }
            }
        }
    }
}

macro_rules! impl_trivial_combine {
    ($name:ident) =&gt; {
        impl Combine for $name {
            fn combine_with(&amp;mut self, _other: Self) {}
        }
    };
}

impl_trivial_combine!(SystemPathBuf);
impl_trivial_combine!(PythonPlatform);
impl_trivial_combine!(PythonPath);
impl_trivial_combine!(PythonVersion);

impl_trivial_combine!(bool);
impl_trivial_combine!(usize);
impl_trivial_combine!(u8);
impl_trivial_combine!(u16);
impl_trivial_combine!(u32);
impl_trivial_combine!(u64);
impl_trivial_combine!(u128);
impl_trivial_combine!(isize);
impl_trivial_combine!(i8);
impl_trivial_combine!(i16);
impl_trivial_combine!(i32);
impl_trivial_combine!(i64);
impl_trivial_combine!(i128);
impl_trivial_combine!(String);
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/src/main.rs</code>:167 on 2025-01-15 18:54</div>
            <div class="timeline-body"><p><code>program_settings</code> looks maybe like an out-of-date variable name here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-01-15 19:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:77 on 2025-01-15 19:03</div>
            <div class="timeline-body"><p>Oh that's clever</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/src/program.rs</code>:141 on 2025-01-15 19:24</div>
            <div class="timeline-body"><p>I'm not sure if this is new behavior or just moving around existing behavior, but this doesn't look right. The semantics of <code>PythonPath::Derived</code> are that we store just the root of the python installation (<code>sys.prefix</code> -- which as @AlexWaygood mentioned above, would probably be a better name than <code>venv_path</code>, since it could also be a system Python installation), and then we can derive the actual site-packages path from that. But the implementation here suggests that &quot;derivation&quot; is just &quot;use the prefix path&quot;, which is wrong. If the prefix/venv path is e.g. <code>/usr</code>, then the actual site-packages path would be <code>/usr/lib/python3.XX/site-packages</code>, where <code>XX</code> is the Python minor version. That is the &quot;derivation&quot; that we need to do to correctly go from a <code>PythonPath::Derived</code> to an actual path to put on the import search path, and which seems to be skipped here.</p>
<p>Maybe this should be fixed in a separate PR that is actually focused on making sure we can import from things installed in a real venv (or Python installation), but in that case I would still put a TODO here, because the current code looks definitely wrong.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/src/module_resolver/testing.rs</code>:242 on 2025-01-15 19:28</div>
            <div class="timeline-body"><p>I think either <code>site_packages / SitePackages</code> or <code>python_path / PythonPath</code> are reasonable names for this field and the enum that occupies it. I think just <code>python</code> is a bit less clear / more confusing. (I'm not clear whether there's any reason the name of this field needs to correspond to the CLI option name.)</p>
<p>I think renaming the <code>venv_path</code> field in the <code>Derived</code> variant of the enum to <code>sys_prefix</code> makes sense; that clarifies what path it holds, and that it can be either for a venv or a system Python installation.</p>
<p>I think renaming the entire enum to <code>SysPrefixPath</code> would not make sense, because the <code>Known</code> variant of the enum does not hold a <code>sys.prefix</code> path at all, it holds actual site-packages path(s). Only the <code>Derived</code> variant holds a <code>sys.prefix</code> path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2025-01-15 19:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-01-15 21:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_python_semantic/src/program.rs</code>:141 on 2025-01-15 21:40</div>
            <div class="timeline-body"><p>I'll rever the <code>PythoPath</code> changes and keep the <code>venv</code> option for now. I'll takle this in a separate PR (seems more involved than just renaming)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-15 21:40</div>
            <div class="timeline-body"><p>Reading through the comments. It looks like this is good to land for as long as I undo the rename from <code>venv-path</code> to <code>python</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-01-16 12:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/tests/file_watching.rs</code>:935 on 2025-01-16 12:19</div>
            <div class="timeline-body"><p>Thanks copilot strikes again.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-01-16 13:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:22 on 2025-01-16 13:20</div>
            <div class="timeline-body"><p>I updated the comment and also pointed out a potential &quot;shortcoming&quot; of this approach. I'm interested to hear if there are any concerns or if we feel comfortable moving forward with how it is</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-01-16 13:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/src/main.rs</code>:167 on 2025-01-16 13:21</div>
            <div class="timeline-body"><p>I moved it into <code>ProjectDatabase::new</code> where this now fits better</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-01-16 13:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_python_semantic/src/module_resolver/testing.rs</code>:242 on 2025-01-16 13:41</div>
            <div class="timeline-body"><p>I created a follow up issue https://github.com/astral-sh/ruff/issues/15530 Thanks for all the feedback</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-16 19:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_workspace/src/project/options.rs</code>:93 on 2025-01-16 19:18</div>
            <div class="timeline-body"><p>see …? :smile:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> approved on 2025-01-16 19:22</div>
            <div class="timeline-body"><p>Thank you, looks great!</p>
<p>I'm not yet familiar with the <code>file_watching</code> part, so I only skimmed that. Let me know if I should do a more detailed review.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-01-16 19:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_workspace/src/project/combine.rs</code>:22 on 2025-01-16 19:24</div>
            <div class="timeline-body"><p>I can certainly imagine cases where we would want a &quot;replace&quot; logic for lists, instead of a &quot;extend&quot; logic. But I think it's completely fine to try and see how far this approach takes us. Thank you for the updated description!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2025-01-17 08:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-01-17 08:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-17 08:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:09:10 UTC
    </footer>
</body>
</html>
