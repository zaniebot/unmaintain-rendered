<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add internal hidden rules for testing - astral-sh/ruff #9747</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add internal hidden rules for testing</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/9747">#9747</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-01-31 19:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>Updated implementation of <a href="https://github.com/astral-sh/ruff/pull/7369">astral-sh/ruff#7369</a> which was left out in the cold.</p>
<p>This was motivated again following changes in #9691 and #9689 where we could not test the changes without actually deprecating or removing rules.</p>
<hr>
<p>Follow-up to discussion in <a href="https://github.com/astral-sh/ruff/pull/7210">astral-sh/ruff#7210</a></p>
<p>Moves integration tests from using rules that are transitively in nursery / preview groups to dedicated test rules that only exist during development. These rules always raise violations (they do not require specific file behavior). The rules are not available in production or in the documentation.</p>
<p>Uses features instead of <code>cfg(test)</code> for cross-crate support per <a href="https://github.com/rust-lang/cargo/issues/8379">rust-lang/cargo#8379</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-31 19:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 19:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/linter.rs</code>:232 on 2024-01-31 19:25</div>
            <div class="timeline-body"><p>Awkward, but this was really hard to do in the parent calling <code>check_path</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 19:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff/tests/integration_test.rs</code>:1183 on 2024-01-31 19:38</div>
            <div class="timeline-body"><p>Flagging, this is testing the wrong output / selecting the wrong test rule.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_linter/src/linter.rs</code>:232 on 2024-01-31 19:39</div>
            <div class="timeline-body"><p>Maybe a comment explaining what <code>fix_iteration</code> is? What is the significance of its value? And what is the significance of <code>0</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 19:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff/tests/integration_test.rs</code>:1259 on 2024-01-31 19:39</div>
            <div class="timeline-body"><p>Flagging, this is a regression in test coverage.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2024-01-31 19:40</div>
            <div class="timeline-body"><p>Yeah I think I buy it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 19:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/linter.rs</code>:232 on 2024-01-31 19:42</div>
            <div class="timeline-body"><p>I don&#x27;t think this is right because we will exclude diagnostics that are not fixed... need to investigate</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-01-31 19:50</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>ℹ️ ecosystem check <strong>encountered linter errors</strong>. (no lint changes; 43 project errors)</p>
<a href="https://github.com/DisnakeDev/disnake">DisnakeDev/disnake</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/PostHog/HouseWatch">PostHog/HouseWatch</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/RasaHQ/rasa">RasaHQ/rasa</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/Snowflake-Labs/snowcli">Snowflake-Labs/snowcli</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/aiven/aiven-client">aiven/aiven-client</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/alteryx/featuretools">alteryx/featuretools</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/apache/airflow">apache/airflow</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-preview --select ALL</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/aws/aws-sam-cli">aws/aws-sam-cli</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/bloomberg/pytest-memray">bloomberg/pytest-memray</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-preview --select ALL</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/commaai/openpilot">commaai/openpilot</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/demisto/content">demisto/content</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/docker/docker-py">docker/docker-py</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/freedomofpress/securedrop">freedomofpress/securedrop</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/fronzbot/blinkpy">fronzbot/blinkpy</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/ibis-project/ibis">ibis-project/ibis</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/ing-bank/probatus">ing-bank/probatus</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/jrnl-org/jrnl">jrnl-org/jrnl</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/latchbio/latch">latchbio/latch</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/lnbits/lnbits">lnbits/lnbits</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/milvus-io/pymilvus">milvus-io/pymilvus</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/mlflow/mlflow">mlflow/mlflow</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/model-bakers/model_bakery">model-bakers/model_bakery</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/pandas-dev/pandas">pandas-dev/pandas</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/prefecthq/prefect">prefecthq/prefect</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/pypa/build">pypa/build</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/pypa/cibuildwheel">pypa/cibuildwheel</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/pypa/pip">pypa/pip</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/pypa/setuptools">pypa/setuptools</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/python/mypy">python/mypy</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/python/typeshed">python/typeshed</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-preview --select PYI</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/python-poetry/poetry">python-poetry/poetry</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/reflex-dev/reflex">reflex-dev/reflex</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/rotki/rotki">rotki/rotki</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/scikit-build/scikit-build">scikit-build/scikit-build</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/scikit-build/scikit-build-core">scikit-build/scikit-build-core</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/sphinx-doc/sphinx">sphinx-doc/sphinx</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/spruceid/siwe-py">spruceid/siwe-py</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/tiangolo/fastapi">tiangolo/fastapi</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/yandex/ch-backup">yandex/ch-backup</a> (error)
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/zulip/zulip">zulip/zulip</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-preview --select ALL</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/zanieb/huggingface-notebooks">zanieb/huggingface-notebooks</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-preview --select A,E703,F704,B015,B018,D100</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-preview --select A,E703,F704,B015,B018,D100</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>


Linter (preview)
<p>ℹ️ ecosystem check <strong>encountered linter errors</strong>. (no lint changes; 43 project errors)</p>
<a href="https://github.com/DisnakeDev/disnake">DisnakeDev/disnake</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/PostHog/HouseWatch">PostHog/HouseWatch</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/RasaHQ/rasa">RasaHQ/rasa</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/Snowflake-Labs/snowcli">Snowflake-Labs/snowcli</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/aiven/aiven-client">aiven/aiven-client</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/alteryx/featuretools">alteryx/featuretools</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/apache/airflow">apache/airflow</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview --select ALL</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/aws/aws-sam-cli">aws/aws-sam-cli</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/bloomberg/pytest-memray">bloomberg/pytest-memray</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview --select ALL</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/commaai/openpilot">commaai/openpilot</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/demisto/content">demisto/content</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/docker/docker-py">docker/docker-py</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/freedomofpress/securedrop">freedomofpress/securedrop</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/fronzbot/blinkpy">fronzbot/blinkpy</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/ibis-project/ibis">ibis-project/ibis</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/ing-bank/probatus">ing-bank/probatus</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/jrnl-org/jrnl">jrnl-org/jrnl</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/latchbio/latch">latchbio/latch</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/lnbits/lnbits">lnbits/lnbits</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/milvus-io/pymilvus">milvus-io/pymilvus</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/mlflow/mlflow">mlflow/mlflow</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/model-bakers/model_bakery">model-bakers/model_bakery</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/pandas-dev/pandas">pandas-dev/pandas</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/prefecthq/prefect">prefecthq/prefect</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/pypa/build">pypa/build</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/pypa/cibuildwheel">pypa/cibuildwheel</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/pypa/pip">pypa/pip</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/pypa/setuptools">pypa/setuptools</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/python/mypy">python/mypy</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/python/typeshed">python/typeshed</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview --select PYI</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/python-poetry/poetry">python-poetry/poetry</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/reflex-dev/reflex">reflex-dev/reflex</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/rotki/rotki">rotki/rotki</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/scikit-build/scikit-build">scikit-build/scikit-build</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/scikit-build/scikit-build-core">scikit-build/scikit-build-core</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/sphinx-doc/sphinx">sphinx-doc/sphinx</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/spruceid/siwe-py">spruceid/siwe-py</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/tiangolo/fastapi">tiangolo/fastapi</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/yandex/ch-backup">yandex/ch-backup</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/zulip/zulip">zulip/zulip</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview --select ALL</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/zanieb/huggingface-notebooks">zanieb/huggingface-notebooks</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview --select A,E703,F704,B015,B018,D100</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>

<a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --preview --select A,E703,F704,B015,B018,D100</pre>
</p>
<p>

<pre><code>error: invalid value &#x27;RUF9&#x27; for &#x27;--ignore &lt;RULE_CODE&gt;&#x27;

For more information, try &#x27;--help&#x27;.
</code></pre>
</p>


Formatter (stable)
<p>ℹ️ ecosystem check <strong>detected format changes</strong>. (+479 -480 lines in 147 files in 4 projects; 1 project error; 38 projects unchanged)</p>
<a href="https://github.com/pandas-dev/pandas">pandas-dev/pandas</a> (+455 -461 lines across 138 files)
<p>

<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/asv_bench/benchmarks/frame_methods.py#L523">asv_bench/benchmarks/frame_methods.py~L523</a></p>
<pre><code>         self.df = DataFrame(np.random.randn(1000, 100))
 
         self.s = Series(np.arange(1028.0))
-        self.df2 = DataFrame(dict.fromkeys(range(1028), self.s))
+        self.df2 = DataFrame({i: self.s for i in range(1028)})
         self.df3 = DataFrame(np.random.randn(1000, 3), columns=list(&quot;ABC&quot;))
 
     def time_apply_user_func(self):
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/asv_bench/benchmarks/groupby.py#L511">asv_bench/benchmarks/groupby.py~L511</a></p>
<pre><code>         # grouping on multiple columns
         # and we lack kernels for a bunch of methods
         if (
-            (engine == &quot;numba&quot; and method in _numba_unsupported_methods)
+            engine == &quot;numba&quot;
+            and method in _numba_unsupported_methods
             or ncols &gt; 1
             or application == &quot;transformation&quot;
             or dtype == &quot;datetime&quot;
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/asv_bench/benchmarks/groupby.py#L950">asv_bench/benchmarks/groupby.py~L950</a></p>
<pre><code>         self.df4[&quot;jim&quot;] = self.df4[&quot;joe&quot;]
 
     def time_transform_lambda_max(self):
-        self.df.groupby(level=&quot;lev1&quot;).transform(max)
+        self.df.groupby(level=&quot;lev1&quot;).transform(lambda x: max(x))
 
     def time_transform_str_max(self):
         self.df.groupby(level=&quot;lev1&quot;).transform(&quot;max&quot;)
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/__init__.py#L268">pandas/<strong>init</strong>.py~L268</a></p>
<pre><code> # Pandas is not (yet) a py.typed library: the public API is determined
 # based on the documentation.
 __all__ = [
-    &quot;NA&quot;,
     &quot;ArrowDtype&quot;,
     &quot;BooleanDtype&quot;,
     &quot;Categorical&quot;,
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/__init__.py#L287">pandas/<strong>init</strong>.py~L287</a></p>
<pre><code>     &quot;HDFStore&quot;,
     &quot;Index&quot;,
     &quot;IndexSlice&quot;,
-    &quot;Int8Dtype&quot;,
     &quot;Int16Dtype&quot;,
     &quot;Int32Dtype&quot;,
     &quot;Int64Dtype&quot;,
+    &quot;Int8Dtype&quot;,
     &quot;Interval&quot;,
     &quot;IntervalDtype&quot;,
     &quot;IntervalIndex&quot;,
     &quot;MultiIndex&quot;,
+    &quot;NA&quot;,
     &quot;NaT&quot;,
     &quot;NamedAgg&quot;,
     &quot;Period&quot;,
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/__init__.py#L307">pandas/<strong>init</strong>.py~L307</a></p>
<pre><code>     &quot;Timedelta&quot;,
     &quot;TimedeltaIndex&quot;,
     &quot;Timestamp&quot;,
-    &quot;UInt8Dtype&quot;,
     &quot;UInt16Dtype&quot;,
     &quot;UInt32Dtype&quot;,
     &quot;UInt64Dtype&quot;,
+    &quot;UInt8Dtype&quot;,
     &quot;api&quot;,
     &quot;array&quot;,
     &quot;arrays&quot;,
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/__init__.py#L323">pandas/<strong>init</strong>.py~L323</a></p>
<pre><code>     &quot;errors&quot;,
     &quot;eval&quot;,
     &quot;factorize&quot;,
-    &quot;from_dummies&quot;,
     &quot;get_dummies&quot;,
+    &quot;from_dummies&quot;,
     &quot;get_option&quot;,
     &quot;infer_freq&quot;,
     &quot;interval_range&quot;,
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/_config/__init__.py#L7">pandas/_config/<strong>init</strong>.py~L7</a></p>
<pre><code> &quot;&quot;&quot;
 __all__ = [
     &quot;config&quot;,
+    &quot;describe_option&quot;,
     &quot;detect_console_encoding&quot;,
     &quot;get_option&quot;,
-    &quot;set_option&quot;,
-    &quot;reset_option&quot;,
-    &quot;describe_option&quot;,
     &quot;option_context&quot;,
     &quot;options&quot;,
+    &quot;reset_option&quot;,
+    &quot;set_option&quot;,
     &quot;using_copy_on_write&quot;,
     &quot;warn_copy_on_write&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/_libs/__init__.py#L1">pandas/_libs/<strong>init</strong>.py~L1</a></p>
<pre><code> __all__ = [
+    &quot;Interval&quot;,
     &quot;NaT&quot;,
     &quot;NaTType&quot;,
     &quot;OutOfBoundsDatetime&quot;,
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/_libs/__init__.py#L6">pandas/_libs/<strong>init</strong>.py~L6</a></p>
<pre><code>     &quot;Timedelta&quot;,
     &quot;Timestamp&quot;,
     &quot;iNaT&quot;,
-    &quot;Interval&quot;,
 ]
 
 
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/_libs/tslibs/__init__.py#L1">pandas/_libs/tslibs/<strong>init</strong>.py~L1</a></p>
<pre><code> __all__ = [
-    &quot;dtypes&quot;,
-    &quot;localize_pydatetime&quot;,
+    &quot;BaseOffset&quot;,
+    &quot;IncompatibleFrequency&quot;,
     &quot;NaT&quot;,
     &quot;NaTType&quot;,
-    &quot;iNaT&quot;,
-    &quot;nat_strings&quot;,
     &quot;OutOfBoundsDatetime&quot;,
     &quot;OutOfBoundsTimedelta&quot;,
-    &quot;IncompatibleFrequency&quot;,
     &quot;Period&quot;,
     &quot;Resolution&quot;,
+    &quot;Tick&quot;,
     &quot;Timedelta&quot;,
-    &quot;normalize_i8_timestamps&quot;,
-    &quot;is_date_array_normalized&quot;,
-    &quot;dt64arr_to_periodarr&quot;,
+    &quot;Timestamp&quot;,
+    &quot;add_overflowsafe&quot;,
+    &quot;astype_overflowsafe&quot;,
     &quot;delta_to_nanoseconds&quot;,
+    &quot;dt64arr_to_periodarr&quot;,
+    &quot;dtypes&quot;,
+    &quot;get_resolution&quot;,
+    &quot;get_supported_dtype&quot;,
+    &quot;get_unit_from_dtype&quot;,
+    &quot;guess_datetime_format&quot;,
+    &quot;iNaT&quot;,
     &quot;ints_to_pydatetime&quot;,
     &quot;ints_to_pytimedelta&quot;,
-    &quot;get_resolution&quot;,
-    &quot;Timestamp&quot;,
-    &quot;tz_convert_from_utc_single&quot;,
-    &quot;tz_convert_from_utc&quot;,
-    &quot;to_offset&quot;,
-    &quot;Tick&quot;,
-    &quot;BaseOffset&quot;,
-    &quot;tz_compare&quot;,
+    &quot;is_date_array_normalized&quot;,
+    &quot;is_supported_dtype&quot;,
     &quot;is_unitless&quot;,
-    &quot;astype_overflowsafe&quot;,
-    &quot;get_unit_from_dtype&quot;,
+    &quot;localize_pydatetime&quot;,
+    &quot;nat_strings&quot;,
+    &quot;normalize_i8_timestamps&quot;,
     &quot;periods_per_day&quot;,
     &quot;periods_per_second&quot;,
-    &quot;guess_datetime_format&quot;,
-    &quot;add_overflowsafe&quot;,
-    &quot;get_supported_dtype&quot;,
-    &quot;is_supported_dtype&quot;,
+    &quot;to_offset&quot;,
+    &quot;tz_compare&quot;,
+    &quot;tz_convert_from_utc&quot;,
+    &quot;tz_convert_from_utc_single&quot;,
 ]
 
 from pandas._libs.tslibs import dtypes  # pylint: disable=import-self
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/_testing/__init__.py#L342">pandas/_testing/<strong>init</strong>.py~L342</a></p>
<pre><code>         # ensure we don&#x27;t rely on the property returning a class
         # See <a href="https://github.com/pandas-dev/pandas/pull/46018">pandas-dev/pandas#46018</a> and
         # <a href="https://github.com/pandas-dev/pandas/issues/32638">pandas-dev/pandas#32638</a> and linked issues
-        return lambda *args, **kwargs: SubclassedSeries(*args, **kwargs)
+        return SubclassedSeries
 
     @property
     def _constructor_expanddim(self):
-        return lambda *args, **kwargs: SubclassedDataFrame(*args, **kwargs)
+        return SubclassedDataFrame
 
 
 class SubclassedDataFrame(DataFrame):
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/_testing/__init__.py#L354">pandas/_testing/<strong>init</strong>.py~L354</a></p>
<pre><code> 
     @property
     def _constructor(self):
-        return lambda *args, **kwargs: SubclassedDataFrame(*args, **kwargs)
+        return SubclassedDataFrame
 
     @property
     def _constructor_sliced(self):
-        return lambda *args, **kwargs: SubclassedSeries(*args, **kwargs)
+        return SubclassedSeries
 
 
 def convert_rows_list_to_csv_str(rows_list: list[str]) -&gt; str:
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/_testing/__init__.py#L560">pandas/_testing/<strong>init</strong>.py~L560</a></p>
<pre><code>     &quot;ALL_INT_NUMPY_DTYPES&quot;,
     &quot;ALL_NUMPY_DTYPES&quot;,
     &quot;ALL_REAL_NUMPY_DTYPES&quot;,
+    &quot;BOOL_DTYPES&quot;,
+    &quot;BYTES_DTYPES&quot;,
+    &quot;COMPLEX_DTYPES&quot;,
+    &quot;DATETIME64_DTYPES&quot;,
+    &quot;ENDIAN&quot;,
+    &quot;FLOAT_EA_DTYPES&quot;,
+    &quot;FLOAT_NUMPY_DTYPES&quot;,
+    &quot;NARROW_NP_DTYPES&quot;,
+    &quot;NP_NAT_OBJECTS&quot;,
+    &quot;NULL_OBJECTS&quot;,
+    &quot;OBJECT_DTYPES&quot;,
+    &quot;SIGNED_INT_EA_DTYPES&quot;,
+    &quot;SIGNED_INT_NUMPY_DTYPES&quot;,
+    &quot;STRING_DTYPES&quot;,
+    &quot;TIMEDELTA64_DTYPES&quot;,
+    &quot;UNSIGNED_INT_EA_DTYPES&quot;,
+    &quot;UNSIGNED_INT_NUMPY_DTYPES&quot;,
+    &quot;SubclassedDataFrame&quot;,
+    &quot;SubclassedSeries&quot;,
     &quot;assert_almost_equal&quot;,
     &quot;assert_attr_equal&quot;,
     &quot;assert_categorical_equal&quot;,
     &quot;assert_class_equal&quot;,
     &quot;assert_contains_all&quot;,
     &quot;assert_copy&quot;,
+    &quot;assert_cow_warning&quot;,
     &quot;assert_datetime_array_equal&quot;,
     &quot;assert_dict_equal&quot;,
     &quot;assert_equal&quot;,
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/_testing/__init__.py#L583">pandas/_testing/<strong>init</strong>.py~L583</a></p>
<pre><code>     &quot;assert_series_equal&quot;,
     &quot;assert_sp_array_equal&quot;,
     &quot;assert_timedelta_array_equal&quot;,
-    &quot;assert_cow_warning&quot;,
     &quot;at&quot;,
-    &quot;BOOL_DTYPES&quot;,
     &quot;box_expected&quot;,
-    &quot;BYTES_DTYPES&quot;,
     &quot;can_set_locale&quot;,
-    &quot;COMPLEX_DTYPES&quot;,
     &quot;convert_rows_list_to_csv_str&quot;,
-    &quot;DATETIME64_DTYPES&quot;,
     &quot;decompress_file&quot;,
-    &quot;ENDIAN&quot;,
     &quot;ensure_clean&quot;,
     &quot;external_error_raised&quot;,
-    &quot;FLOAT_EA_DTYPES&quot;,
-    &quot;FLOAT_NUMPY_DTYPES&quot;,
     &quot;get_cython_table_params&quot;,
     &quot;get_dtype&quot;,
-    &quot;getitem&quot;,
-    &quot;get_locales&quot;,
     &quot;get_finest_unit&quot;,
+    &quot;get_locales&quot;,
     &quot;get_obj&quot;,
     &quot;get_op_from_name&quot;,
+    &quot;getitem&quot;,
     &quot;iat&quot;,
     &quot;iloc&quot;,
     &quot;loc&quot;,
     &quot;maybe_produces_warning&quot;,
-    &quot;NARROW_NP_DTYPES&quot;,
-    &quot;NP_NAT_OBJECTS&quot;,
-    &quot;NULL_OBJECTS&quot;,
-    &quot;OBJECT_DTYPES&quot;,
     &quot;raise_assert_detail&quot;,
     &quot;raises_chained_assignment_error&quot;,
     &quot;round_trip_pathlib&quot;,
     &quot;round_trip_pickle&quot;,
-    &quot;setitem&quot;,
     &quot;set_locale&quot;,
     &quot;set_timezone&quot;,
+    &quot;setitem&quot;,
     &quot;shares_memory&quot;,
-    &quot;SIGNED_INT_EA_DTYPES&quot;,
-    &quot;SIGNED_INT_NUMPY_DTYPES&quot;,
-    &quot;STRING_DTYPES&quot;,
-    &quot;SubclassedDataFrame&quot;,
-    &quot;SubclassedSeries&quot;,
-    &quot;TIMEDELTA64_DTYPES&quot;,
     &quot;to_array&quot;,
-    &quot;UNSIGNED_INT_EA_DTYPES&quot;,
-    &quot;UNSIGNED_INT_NUMPY_DTYPES&quot;,
     &quot;use_numexpr&quot;,
     &quot;with_csv_dialect&quot;,
     &quot;write_to_compressed&quot;,
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/_testing/asserters.py#L751">pandas/_testing/asserters.py~L751</a></p>
<pre><code>         and atol is lib.no_default
     ):
         check_exact = (
-            is_numeric_dtype(left.dtype)
-            and not is_float_dtype(left.dtype)
-            or is_numeric_dtype(right.dtype)
-            and not is_float_dtype(right.dtype)
-        )
+            is_numeric_dtype(left.dtype) and not is_float_dtype(left.dtype)
+        ) or (is_numeric_dtype(right.dtype) and not is_float_dtype(right.dtype))
     elif check_exact is lib.no_default:
         check_exact = False
 
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/_testing/asserters.py#L908">pandas/_testing/asserters.py~L908</a></p>
<pre><code>         and atol is lib.no_default
     ):
         check_exact = (
-            is_numeric_dtype(left.dtype)
-            and not is_float_dtype(left.dtype)
-            or is_numeric_dtype(right.dtype)
-            and not is_float_dtype(right.dtype)
-        )
+            is_numeric_dtype(left.dtype) and not is_float_dtype(left.dtype)
+        ) or (is_numeric_dtype(right.dtype) and not is_float_dtype(right.dtype))
     elif check_exact is lib.no_default:
         check_exact = False
 
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/api/__init__.py#L8">pandas/api/<strong>init</strong>.py~L8</a></p>
<pre><code> )
 
 __all__ = [
-    &quot;interchange&quot;,
     &quot;extensions&quot;,
     &quot;indexers&quot;,
+    &quot;interchange&quot;,
     &quot;types&quot;,
     &quot;typing&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/api/extensions/__init__.py#L21">pandas/api/extensions/<strong>init</strong>.py~L21</a></p>
<pre><code> )
 
 __all__ = [
-    &quot;no_default&quot;,
+    &quot;ExtensionArray&quot;,
     &quot;ExtensionDtype&quot;,
-    &quot;register_extension_dtype&quot;,
+    &quot;ExtensionScalarOpsMixin&quot;,
+    &quot;no_default&quot;,
     &quot;register_dataframe_accessor&quot;,
+    &quot;register_extension_dtype&quot;,
     &quot;register_index_accessor&quot;,
     &quot;register_series_accessor&quot;,
     &quot;take&quot;,
-    &quot;ExtensionArray&quot;,
-    &quot;ExtensionScalarOpsMixin&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/api/indexers/__init__.py#L10">pandas/api/indexers/<strong>init</strong>.py~L10</a></p>
<pre><code> )
 
 __all__ = [
-    &quot;check_array_indexer&quot;,
     &quot;BaseIndexer&quot;,
     &quot;FixedForwardWindowIndexer&quot;,
     &quot;VariableOffsetWindowIndexer&quot;,
+    &quot;check_array_indexer&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/api/interchange/__init__.py#L5">pandas/api/interchange/<strong>init</strong>.py~L5</a></p>
<pre><code> from pandas.core.interchange.dataframe_protocol import DataFrame
 from pandas.core.interchange.from_dataframe import from_dataframe
 
-__all__ = [&quot;from_dataframe&quot;, &quot;DataFrame&quot;]
+__all__ = [&quot;DataFrame&quot;, &quot;from_dataframe&quot;]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/api/types/__init__.py#L14">pandas/api/types/<strong>init</strong>.py~L14</a></p>
<pre><code> )
 
 __all__ = [
-    &quot;infer_dtype&quot;,
-    &quot;union_categoricals&quot;,
     &quot;CategoricalDtype&quot;,
     &quot;DatetimeTZDtype&quot;,
     &quot;IntervalDtype&quot;,
     &quot;PeriodDtype&quot;,
+    &quot;infer_dtype&quot;,
+    &quot;union_categoricals&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/api/typing/__init__.py#L39">pandas/api/typing/<strong>init</strong>.py~L39</a></p>
<pre><code>     &quot;ExponentialMovingWindow&quot;,
     &quot;ExponentialMovingWindowGroupby&quot;,
     &quot;JsonReader&quot;,
-    &quot;NaTType&quot;,
     &quot;NAType&quot;,
+    &quot;NaTType&quot;,
     &quot;PeriodIndexResamplerGroupby&quot;,
     &quot;Resampler&quot;,
     &quot;Rolling&quot;,
     &quot;RollingGroupby&quot;,
     &quot;SeriesGroupBy&quot;,
     &quot;StataReader&quot;,
+    &quot;TimeGrouper&quot;,
     # See TODO above
     # &quot;Styler&quot;,
     &quot;TimedeltaIndexResamplerGroupby&quot;,
-    &quot;TimeGrouper&quot;,
     &quot;Window&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/compat/__init__.py#L180">pandas/compat/<strong>init</strong>.py~L180</a></p>
<pre><code> 
 
 __all__ = [
-    &quot;is_numpy_dev&quot;,
-    &quot;pa_version_under10p1&quot;,
-    &quot;pa_version_under11p0&quot;,
-    &quot;pa_version_under13p0&quot;,
-    &quot;pa_version_under14p0&quot;,
-    &quot;pa_version_under14p1&quot;,
     &quot;IS64&quot;,
     &quot;ISMUSL&quot;,
     &quot;PY310&quot;,
     &quot;PY311&quot;,
     &quot;PY312&quot;,
     &quot;PYPY&quot;,
+    &quot;is_numpy_dev&quot;,
+    &quot;pa_version_under10p1&quot;,
+    &quot;pa_version_under11p0&quot;,
+    &quot;pa_version_under13p0&quot;,
+    &quot;pa_version_under14p0&quot;,
+    &quot;pa_version_under14p1&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/compat/numpy/__init__.py#L46">pandas/compat/numpy/<strong>init</strong>.py~L46</a></p>
<pre><code> 
 
 __all__ = [
-    &quot;np&quot;,
     &quot;_np_version&quot;,
     &quot;is_numpy_dev&quot;,
+    &quot;np&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/_numba/extensions.py#L277">pandas/core/_numba/extensions.py~L277</a></p>
<pre><code>     &quot;&quot;&quot;Converts numba UnicodeCharSeq (numpy string scalar) -&gt; unicode type (string).
     Is a no-op for other types.&quot;&quot;&quot;
     if isinstance(x, types.UnicodeCharSeq):
-        return lambda x: str(x)
+        return str
     else:
         return lambda x: x
 
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/_numba/kernels/__init__.py#L16">pandas/core/_numba/kernels/<strong>init</strong>.py~L16</a></p>
<pre><code> )
 
 __all__ = [
-    &quot;sliding_mean&quot;,
     &quot;grouped_mean&quot;,
-    &quot;sliding_sum&quot;,
+    &quot;grouped_min_max&quot;,
     &quot;grouped_sum&quot;,
-    &quot;sliding_var&quot;,
     &quot;grouped_var&quot;,
+    &quot;sliding_mean&quot;,
     &quot;sliding_min_max&quot;,
-    &quot;grouped_min_max&quot;,
+    &quot;sliding_sum&quot;,
+    &quot;sliding_var&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/api.py#L81">pandas/core/api.py~L81</a></p>
<pre><code> from pandas.core.frame import DataFrame  # isort:skip
 
 __all__ = [
-    &quot;array&quot;,
+    &quot;NA&quot;,
     &quot;ArrowDtype&quot;,
-    &quot;bdate_range&quot;,
     &quot;BooleanDtype&quot;,
     &quot;Categorical&quot;,
     &quot;CategoricalDtype&quot;,
     &quot;CategoricalIndex&quot;,
     &quot;DataFrame&quot;,
     &quot;DateOffset&quot;,
-    &quot;date_range&quot;,
     &quot;DatetimeIndex&quot;,
     &quot;DatetimeTZDtype&quot;,
-    &quot;factorize&quot;,
     &quot;Flags&quot;,
     &quot;Float32Dtype&quot;,
     &quot;Float64Dtype&quot;,
     &quot;Grouper&quot;,
     &quot;Index&quot;,
     &quot;IndexSlice&quot;,
+    &quot;Int8Dtype&quot;,
     &quot;Int16Dtype&quot;,
     &quot;Int32Dtype&quot;,
     &quot;Int64Dtype&quot;,
-    &quot;Int8Dtype&quot;,
     &quot;Interval&quot;,
     &quot;IntervalDtype&quot;,
     &quot;IntervalIndex&quot;,
-    &quot;interval_range&quot;,
-    &quot;isna&quot;,
-    &quot;isnull&quot;,
     &quot;MultiIndex&quot;,
-    &quot;NA&quot;,
-    &quot;NamedAgg&quot;,
     &quot;NaT&quot;,
-    &quot;notna&quot;,
-    &quot;notnull&quot;,
+    &quot;NamedAgg&quot;,
     &quot;Period&quot;,
     &quot;PeriodDtype&quot;,
     &quot;PeriodIndex&quot;,
-    &quot;period_range&quot;,
     &quot;RangeIndex&quot;,
     &quot;Series&quot;,
-    &quot;set_eng_float_format&quot;,
     &quot;StringDtype&quot;,
     &quot;Timedelta&quot;,
     &quot;TimedeltaIndex&quot;,
-    &quot;timedelta_range&quot;,
     &quot;Timestamp&quot;,
-    &quot;to_datetime&quot;,
-    &quot;to_numeric&quot;,
-    &quot;to_timedelta&quot;,
+    &quot;UInt8Dtype&quot;,
     &quot;UInt16Dtype&quot;,
     &quot;UInt32Dtype&quot;,
     &quot;UInt64Dtype&quot;,
-    &quot;UInt8Dtype&quot;,
+    &quot;array&quot;,
+    &quot;bdate_range&quot;,
+    &quot;date_range&quot;,
+    &quot;factorize&quot;,
+    &quot;interval_range&quot;,
+    &quot;isna&quot;,
+    &quot;isnull&quot;,
+    &quot;notna&quot;,
+    &quot;notnull&quot;,
+    &quot;period_range&quot;,
+    &quot;set_eng_float_format&quot;,
+    &quot;timedelta_range&quot;,
+    &quot;to_datetime&quot;,
+    &quot;to_numeric&quot;,
+    &quot;to_timedelta&quot;,
     &quot;unique&quot;,
     &quot;value_counts&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/arrays/arrow/__init__.py#L4">pandas/core/arrays/arrow/<strong>init</strong>.py~L4</a></p>
<pre><code> )
 from pandas.core.arrays.arrow.array import ArrowExtensionArray
 
-__all__ = [&quot;ArrowExtensionArray&quot;, &quot;StructAccessor&quot;, &quot;ListAccessor&quot;]
+__all__ = [&quot;ArrowExtensionArray&quot;, &quot;ListAccessor&quot;, &quot;StructAccessor&quot;]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/arrays/arrow/array.py#L165">pandas/core/arrays/arrow/array.py~L165</a></p>
<pre><code>         &quot;rmul&quot;: lambda x, y: pc.multiply_checked(y, x),
         &quot;truediv&quot;: lambda x, y: pc.divide(*cast_for_truediv(x, y)),
         &quot;rtruediv&quot;: lambda x, y: pc.divide(*cast_for_truediv(y, x)),
-        &quot;floordiv&quot;: lambda x, y: floordiv_compat(x, y),
+        &quot;floordiv&quot;: floordiv_compat,
         &quot;rfloordiv&quot;: lambda x, y: floordiv_compat(y, x),
         &quot;mod&quot;: NotImplemented,
         &quot;rmod&quot;: NotImplemented,
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/arrays/arrow/array.py#L1401">pandas/core/arrays/arrow/array.py~L1401</a></p>
<pre><code>             pa.types.is_floating(pa_type)
             and (
                 na_value is np.nan
-                or original_na_value is lib.no_default
-                and is_float_dtype(dtype)
+                or (original_na_value is lib.no_default
+                and is_float_dtype(dtype))
             )
         ):
             result = data._pa_array.to_numpy()
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/arrays/arrow/array.py#L2505">pandas/core/arrays/arrow/array.py~L2505</a></p>
<pre><code> 
     def _str_findall(self, pat: str, flags: int = 0) -&gt; Self:
         regex = re.compile(pat, flags=flags)
-        predicate = lambda val: regex.findall(val)
+        predicate = regex.findall
         result = self._apply_elementwise(predicate)
         return type(self)(pa.chunked_array(result))
 
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/common.py#L144">pandas/core/common.py~L144</a></p>
<pre><code>     elif isinstance(key, list):
         # check if np.array(key).dtype would be bool
         if len(key) &gt; 0:
-            if type(key) is not list:  # noqa: E721
+            if type(key) is not list:
                 # GH#42461 cython will raise TypeError if we pass a subclass
                 key = list(key)
             return lib.is_bool_list(key)
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/computation/eval.py#L340">pandas/core/computation/eval.py~L340</a></p>
<pre><code> 
         if engine == &quot;numexpr&quot; and (
             is_extension_array_dtype(parsed_expr.terms.return_type)
-            or getattr(parsed_expr.terms, &quot;operand_types&quot;, None) is not None
-            and any(
-                is_extension_array_dtype(elem)
-                for elem in parsed_expr.terms.operand_types
+            or (
+                getattr(parsed_expr.terms, &quot;operand_types&quot;, None) is not None
+                and any(
+                    is_extension_array_dtype(elem)
+                    for elem in parsed_expr.terms.operand_types
+                )
             )
         ):
             warnings.warn(
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/computation/expr.py#L507">pandas/core/computation/expr.py~L507</a></p>
<pre><code>             )
 
         if self.engine != &quot;pytables&quot; and (
-            res.op in CMP_OPS_SYMS
-            and getattr(lhs, &quot;is_datetime&quot;, False)
+            (res.op in CMP_OPS_SYMS and getattr(lhs, &quot;is_datetime&quot;, False))
             or getattr(rhs, &quot;is_datetime&quot;, False)
         ):
             # all date ops must be done in python bc numexpr doesn&#x27;t work
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/computation/expr.py#L534">pandas/core/computation/expr.py~L534</a></p>
<pre><code>         return self._maybe_evaluate_binop(op, op_class, left, right)
 
     def visit_Div(self, node, **kwargs):
-        return lambda lhs, rhs: Div(lhs, rhs)
+        return Div
 
     def visit_UnaryOp(self, node, **kwargs):
         op = self.visit(node.op)
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/computation/pytables.py#L407">pandas/core/computation/pytables.py~L407</a></p>
<pre><code>         operand = operand.prune(klass)
 
         if operand is not None and (
-            issubclass(klass, ConditionBinOp)
-            and operand.condition is not None
-            or not issubclass(klass, ConditionBinOp)
-            and issubclass(klass, FilterBinOp)
-            and operand.filter is not None
+            (issubclass(klass, ConditionBinOp) and operand.condition is not None)
+            or (
+                not issubclass(klass, ConditionBinOp)
+                and issubclass(klass, FilterBinOp)
+                and operand.filter is not None
+            )
         ):
             return operand.invert()
         return None
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/computation/scope.py#L139">pandas/core/computation/scope.py~L139</a></p>
<pre><code>     temps : dict
     &quot;&quot;&quot;
 
-    __slots__ = [&quot;level&quot;, &quot;scope&quot;, &quot;target&quot;, &quot;resolvers&quot;, &quot;temps&quot;]
+    __slots__ = [&quot;level&quot;, &quot;resolvers&quot;, &quot;scope&quot;, &quot;target&quot;, &quot;temps&quot;]
     level: int
     scope: DeepChainMap
     resolvers: DeepChainMap
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/dtypes/common.py#L1676">pandas/core/dtypes/common.py~L1676</a></p>
<pre><code> 
 
 __all__ = [
-    &quot;classes&quot;,
     &quot;DT64NS_DTYPE&quot;,
+    &quot;INT64_DTYPE&quot;,
+    &quot;TD64NS_DTYPE&quot;,
+    &quot;classes&quot;,
     &quot;ensure_float64&quot;,
     &quot;ensure_python_int&quot;,
     &quot;ensure_str&quot;,
     &quot;infer_dtype_from_object&quot;,
-    &quot;INT64_DTYPE&quot;,
     &quot;is_1d_only_ea_dtype&quot;,
     &quot;is_all_strings&quot;,
     &quot;is_any_real_numeric_dtype&quot;,
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/dtypes/common.py#L1728">pandas/core/dtypes/common.py~L1728</a></p>
<pre><code>     &quot;is_unsigned_integer_dtype&quot;,
     &quot;needs_i8_conversion&quot;,
     &quot;pandas_dtype&quot;,
-    &quot;TD64NS_DTYPE&quot;,
     &quot;validate_all_hashable&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/dtypes/dtypes.py#L1058">pandas/core/dtypes/dtypes.py~L1058</a></p>
<pre><code>         possible
         &quot;&quot;&quot;
         if (
-            isinstance(string, str)
-            and (string.startswith((&quot;period[&quot;, &quot;Period[&quot;)))
-            or isinstance(string, BaseOffset)
-        ):
+            isinstance(string, str) and (string.startswith((&quot;period[&quot;, &quot;Period[&quot;)))
+        ) or isinstance(string, BaseOffset):
             # do not parse string like U as period[U]
             # avoid tuple to be regarded as freq
             try:
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/dtypes/dtypes.py#L1713">pandas/core/dtypes/dtypes.py~L1713</a></p>
<pre><code>                 fill_value = (
                     other._is_na_fill_value
                     and isinstance(self.fill_value, type(other.fill_value))
-                    or isinstance(other.fill_value, type(self.fill_value))
-                )
+                ) or isinstance(other.fill_value, type(self.fill_value))
             else:
                 with warnings.catch_warnings():
                     # Ignore spurious numpy warning
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/frame.py#L3996">pandas/core/frame.py~L3996</a></p>
<pre><code>             # GH#45316 Return view if key is not duplicated
             # Only use drop_duplicates with duplicates for performance
             if not is_mi and (
-                self.columns.is_unique
-                and key in self.columns
+                (self.columns.is_unique and key in self.columns)
                 or key in self.columns.drop_duplicates(keep=False)
             ):
                 return self._get_item_cache(key)
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/frame.py#L5193">pandas/core/frame.py~L5193</a></p>
<pre><code>             isinstance(value, Index)
             and value.dtype == &quot;object&quot;
             and arr.dtype != value.dtype
-        ):  #
+        ):
             # TODO: Remove kludge in sanitize_array for string mode when enforcing
             # this deprecation
             warnings.warn(
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/frame.py#L6855">pandas/core/frame.py~L6855</a></p>
<pre><code>         elif (
             not np.iterable(subset)
             or isinstance(subset, str)
-            or isinstance(subset, tuple)
-            and subset in self.columns
+            or (isinstance(subset, tuple) and subset in self.columns)
         ):
             subset = (subset,)
 
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/generic.py#L6375">pandas/core/generic.py~L6375</a></p>
<pre><code>         -------
         consolidated : same type as caller
         &quot;&quot;&quot;
-        f = lambda: self._mgr.consolidate()
+        f = self._mgr.consolidate
         cons_data = self._protect_consolidate(f)
         return self._constructor_from_mgr(cons_data, axes=cons_data.axes).__finalize__(
             self
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/generic.py#L10373">pandas/core/generic.py~L10373</a></p>
<pre><code>                 # self
                 cons = self._constructor_expanddim
                 df = cons(
-                    {c: self for c in other.columns}, **other._construct_axes_dict()
+                    dict.fromkeys(other.columns, self), **other._construct_axes_dict()
                 )
                 # error: Incompatible return value type (got &quot;Tuple[DataFrame,
                 # DataFrame]&quot;, expected &quot;Tuple[Self, NDFrameT]&quot;)
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/generic.py#L10393">pandas/core/generic.py~L10393</a></p>
<pre><code>                 # other
                 cons = other._constructor_expanddim
                 df = cons(
-                    {c: other for c in self.columns}, **self._construct_axes_dict()
+                    dict.fromkeys(self.columns, other), **self._construct_axes_dict()
                 )
                 # error: Incompatible return value type (got &quot;Tuple[NDFrameT,
                 # DataFrame]&quot;, expected &quot;Tuple[Self, NDFrameT]&quot;)
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/generic.py#L10619">pandas/core/generic.py~L10619</a></p>
<pre><code>             # CoW: Make sure reference is not kept alive
             if cond.ndim == 1 and self.ndim == 2:
                 cond = cond._constructor_expanddim(
-                    {i: cond for i in range(len(self.columns))},
+                    dict.fromkeys(range(len(self.columns)), cond),
                     copy=False,
                 )
                 cond.columns = self.columns
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/groupby/__init__.py#L8">pandas/core/groupby/<strong>init</strong>.py~L8</a></p>
<pre><code> 
 __all__ = [
     &quot;DataFrameGroupBy&quot;,
-    &quot;NamedAgg&quot;,
-    &quot;SeriesGroupBy&quot;,
     &quot;GroupBy&quot;,
     &quot;Grouper&quot;,
+    &quot;NamedAgg&quot;,
+    &quot;SeriesGroupBy&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/groupby/groupby.py#L927">pandas/core/groupby/groupby.py~L927</a></p>
<pre><code>             # possibly convert to the actual key types
             # in the indices, could be a Timestamp or a np.datetime64
             if isinstance(s, datetime.datetime):
-                return lambda key: Timestamp(key)
+                return Timestamp
             elif isinstance(s, np.datetime64):
                 return lambda key: Timestamp(key).asm8
             else:
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/groupby/groupby.py#L5228">pandas/core/groupby/groupby.py~L5228</a></p>
<pre><code>         else:
             to_coerce = [c for c, dtype in obj.dtypes.items() if dtype in dtypes_to_f32]
             if len(to_coerce):
-                shifted = shifted.astype({c: &quot;float32&quot; for c in to_coerce})
+                shifted = shifted.astype(dict.fromkeys(to_coerce, &quot;float32&quot;))
 
         return obj - shifted
 
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/indexers/__init__.py#L15">pandas/core/indexers/<strong>init</strong>.py~L15</a></p>
<pre><code> )
 
 __all__ = [
-    &quot;is_valid_positional_slice&quot;,
+    &quot;check_array_indexer&quot;,
+    &quot;check_key_length&quot;,
+    &quot;check_setitem_lengths&quot;,
+    &quot;disallow_ndim_indexing&quot;,
+    &quot;is_empty_indexer&quot;,
     &quot;is_list_like_indexer&quot;,
     &quot;is_scalar_indexer&quot;,
-    &quot;is_empty_indexer&quot;,
-    &quot;check_setitem_lengths&quot;,
-    &quot;validate_indices&quot;,
-    &quot;maybe_convert_indices&quot;,
+    &quot;is_valid_positional_slice&quot;,
     &quot;length_of_indexer&quot;,
-    &quot;disallow_ndim_indexing&quot;,
+    &quot;maybe_convert_indices&quot;,
     &quot;unpack_1tuple&quot;,
-    &quot;check_key_length&quot;,
-    &quot;check_array_indexer&quot;,
     &quot;unpack_tuple_and_ellipses&quot;,
+    &quot;validate_indices&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/indexes/api.py#L47">pandas/core/indexes/api.py~L47</a></p>
<pre><code> 
 
 __all__ = [
-    &quot;CategoricalIndex&quot;,
-    &quot;DatetimeIndex&quot;,
     &quot;Index&quot;,
-    &quot;IntervalIndex&quot;,
-    &quot;InvalidIndexError&quot;,
     &quot;MultiIndex&quot;,
-    &quot;NaT&quot;,
-    &quot;PeriodIndex&quot;,
+    &quot;CategoricalIndex&quot;,
+    &quot;IntervalIndex&quot;,
     &quot;RangeIndex&quot;,
+    &quot;InvalidIndexError&quot;,
     &quot;TimedeltaIndex&quot;,
+    &quot;PeriodIndex&quot;,
+    &quot;DatetimeIndex&quot;,
     &quot;_new_Index&quot;,
-    &quot;all_indexes_same&quot;,
-    &quot;default_index&quot;,
+    &quot;NaT&quot;,
     &quot;ensure_index&quot;,
     &quot;ensure_index_from_sequences&quot;,
     &quot;get_objs_combined_axis&quot;,
+    &quot;union_indexes&quot;,
     &quot;get_unanimous_names&quot;,
+    &quot;all_indexes_same&quot;,
+    &quot;default_index&quot;,
     &quot;safe_sort_index&quot;,
-    &quot;union_indexes&quot;,
 ]
 
 
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/indexes/base.py#L7667">pandas/core/indexes/base.py~L7667</a></p>
<pre><code>         index_like = list(index_like)
 
     if isinstance(index_like, list):
-        if type(index_like) is not list:
+        if type(index_like) is not list:  # noqa: E721
             # must check for exactly list here because of strict type
             # check in clean_index_list
             index_like = list(index_like)
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/indexes/range.py#L1039">pandas/core/indexes/range.py~L1039</a></p>
<pre><code>     @unpack_zerodim_and_defer(&quot;__floordiv__&quot;)
     def __floordiv__(self, other):
         if is_integer(other) and other != 0:
-            if len(self) == 0 or (self.start % other == 0 and self.step % other == 0):
+            if len(self) == 0 or self.start % other == 0 and self.step % other == 0:
                 start = self.start // other
                 step = self.step // other
                 stop = start + len(self) * step
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/indexing.py#L1236">pandas/core/indexing.py~L1236</a></p>
<pre><code>         if isinstance(key, bool) and not (
             is_bool_dtype(ax.dtype)
             or ax.dtype.name == &quot;boolean&quot;
-            or isinstance(ax, MultiIndex)
-            and is_bool_dtype(ax.get_level_values(0).dtype)
+            or (
+                isinstance(ax, MultiIndex)
+                and is_bool_dtype(ax.get_level_values(0).dtype)
+            )
         ):
             raise KeyError(
                 f&quot;{key}: boolean label can not be used without a boolean index&quot;
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/indexing.py#L2130">pandas/core/indexing.py~L2130</a></p>
<pre><code> 
         is_full_setter = com.is_null_slice(pi) or com.is_full_slice(pi, len(self.obj))
 
-        is_null_setter = com.is_empty_slice(pi) or is_array_like(pi) and len(pi) == 0
+        is_null_setter = com.is_empty_slice(pi) or (is_array_like(pi) and len(pi) == 0)
 
         if is_null_setter:
             # no-op, don&#x27;t cast dtype later
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/indexing.py#L2763">pandas/core/indexing.py~L2763</a></p>
<pre><code>     &quot;&quot;&quot;
     Check if the indexer is or contains a dict or set, which is no longer allowed.
     &quot;&quot;&quot;
-    if (
-        isinstance(key, set)
-        or isinstance(key, tuple)
-        and any(isinstance(x, set) for x in key)
+    if isinstance(key, set) or (
+        isinstance(key, tuple) and any(isinstance(x, set) for x in key)
     ):
         raise TypeError(
             &quot;Passing a set as an indexer is not supported. Use a list instead.&quot;
         )
 
-    if (
-        isinstance(key, dict)
-        or isinstance(key, tuple)
-        and any(isinstance(x, dict) for x in key)
+    if isinstance(key, dict) or (
+        isinstance(key, tuple) and any(isinstance(x, dict) for x in key)
     ):
         raise TypeError(
             &quot;Passing a dict as an indexer is not supported. Use a list instead.&quot;
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/internals/__init__.py#L11">pandas/core/internals/<strong>init</strong>.py~L11</a></p>
<pre><code> 
 __all__ = [
     &quot;Block&quot;,  # pylint: disable=undefined-all-variable
+    &quot;BlockManager&quot;,
+    &quot;DataManager&quot;,
     &quot;DatetimeTZBlock&quot;,  # pylint: disable=undefined-all-variable
     &quot;ExtensionBlock&quot;,  # pylint: disable=undefined-all-variable
-    &quot;make_block&quot;,
-    &quot;DataManager&quot;,
-    &quot;BlockManager&quot;,
-    &quot;SingleDataManager&quot;,
     &quot;SingleBlockManager&quot;,
+    &quot;SingleDataManager&quot;,
     &quot;concatenate_managers&quot;,
+    &quot;make_block&quot;,
 ]
 
 
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/internals/concat.py#L183">pandas/core/internals/concat.py~L183</a></p>
<pre><code>         for i, indexer in indexers.items():
             mgr = mgr.reindex_indexer(
                 axes[i],
-                indexers[i],
+                indexer,
                 axis=i,
                 copy=False,
                 only_slice=True,  # only relevant for i==0
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/internals/construction.py#L408">pandas/core/internals/construction.py~L408</a></p>
<pre><code>             else x.copy(deep=True)
             if (
                 isinstance(x, Index)
-                or isinstance(x, ABCSeries)
-                and is_1d_only_ea_dtype(x.dtype)
+                or (isinstance(x, ABCSeries) and is_1d_only_ea_dtype(x.dtype))
             )
             else x
             for x in arrays
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/internals/construction.py#L834">pandas/core/internals/construction.py~L834</a></p>
<pre><code> 
     # assure that they are of the base dict class and not of derived
     # classes
-    data = [d if type(d) is dict else dict(d) for d in data]  # noqa: E721
+    data = [d if type(d) is dict else dict(d) for d in data]
 
     content = lib.dicts_to_array(data, list(columns))
     return content, columns
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/ops/__init__.py#L65">pandas/core/ops/<strong>init</strong>.py~L65</a></p>
<pre><code> __all__ = [
     &quot;ARITHMETIC_BINOPS&quot;,
     &quot;arithmetic_op&quot;,
-    &quot;comparison_op&quot;,
     &quot;comp_method_OBJECT_ARRAY&quot;,
-    &quot;invalid_comparison&quot;,
+    &quot;comparison_op&quot;,
     &quot;fill_binop&quot;,
+    &quot;get_array_op&quot;,
+    &quot;get_op_result_name&quot;,
+    &quot;invalid_comparison&quot;,
     &quot;kleene_and&quot;,
     &quot;kleene_or&quot;,
     &quot;kleene_xor&quot;,
     &quot;logical_op&quot;,
     &quot;make_flex_doc&quot;,
+    &quot;maybe_prepare_scalar_for_op&quot;,
     &quot;radd&quot;,
     &quot;rand_&quot;,
     &quot;rdiv&quot;,
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/ops/__init__.py#L87">pandas/core/ops/<strong>init</strong>.py~L87</a></p>
<pre><code>     &quot;rtruediv&quot;,
     &quot;rxor&quot;,
     &quot;unpack_zerodim_and_defer&quot;,
-    &quot;get_op_result_name&quot;,
-    &quot;maybe_prepare_scalar_for_op&quot;,
-    &quot;get_array_op&quot;,
 ]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/resample.py#L2152">pandas/core/resample.py~L2152</a></p>
<pre><code>             raise ValueError(f&quot;Unsupported value {convention} for `convention`&quot;)
 
         if (
-            key is None
+            (key is None
             and obj is not None
-            and isinstance(obj.index, PeriodIndex)  # type: ignore[attr-defined]
+            and isinstance(obj.index, PeriodIndex))  # type: ignore[attr-defined]
             or (
                 key is not None
                 and obj is not None
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/reshape/merge.py#L422">pandas/core/reshape/merge.py~L422</a></p>
<pre><code>         check = set(left_by).difference(left.columns)
         if len(check) != 0:
             raise KeyError(f&quot;{check} not found in left columns&quot;)
-        result, _ = _groupby_and_merge(left_by, left, right, lambda x, y: _merger(x, y))
+        result, _ = _groupby_and_merge(left_by, left, right, _merger)
     elif right_by is not None:
         if isinstance(right_by, str):
             right_by = [right_by]
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/reshape/merge.py#L2519">pandas/core/reshape/merge.py~L2519</a></p>
<pre><code>             isinstance(lk.dtype, ArrowDtype)
             and (
                 is_numeric_dtype(lk.dtype.numpy_dtype)
-                or is_string_dtype(lk.dtype)
-                and not sort
+                or (is_string_dtype(lk.dtype) and not sort)
             )
         ):
             lk, _ = lk._values_for_factorize()
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/tools/datetimes.py#L126">pandas/core/tools/datetimes.py~L126</a></p>
<pre><code> def _guess_datetime_format_for_array(arr, dayfirst: bool | None = False) -&gt; str | None:
     # Try to guess the format based on the first non-NaN element, return None if can&#x27;t
     if (first_non_null := tslib.first_non_null(arr)) != -1:
-        if type(first_non_nan_element := arr[first_non_null]) is str:  # noqa: E721
+        if type(first_non_nan_element := arr[first_non_null]) is str:
             # GH#32264 np.str_ object
             guessed_format = guess_datetime_format(
                 first_non_nan_element, dayfirst=dayfirst
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/tools/numeric.py#L234">pandas/core/tools/numeric.py~L234</a></p>
<pre><code>                 set(),
                 coerce_numeric=coerce_numeric,
                 convert_to_masked_nullable=dtype_backend is not lib.no_default
-                or isinstance(values_dtype, StringDtype)
-                and not values_dtype.storage == &quot;pyarrow_numpy&quot;,
+                or (isinstance(values_dtype, StringDtype)
+                and not values_dtype.storage == &quot;pyarrow_numpy&quot;),
             )
         except (ValueError, TypeError):
             if errors == &quot;raise&quot;:
</code></pre>
<p><a href="https://github.com/pandas-dev/pandas/blob/c3014abb3bf2e15fa66d194ebd2867161527c497/pandas/core/tools/numeric.py#L247">pandas/core/tools/numeric.py~L247</a></p>
<pre><code>         # downcasting
         values = values[~new_mask]
     elif (
-        dtype_backend is not lib.no_default
-        and new_mask is None
-        or isinstance(values_dtype, StringDtype)
-        and not values_dtype.storage == &quot;pyarrow_numpy&quot;
+        (dtype_backend is not lib.no_default
+        and new_mask is None)
+        or (isinstance(values_dtype, StringDtype)
+        and not values_dtype.storage == &quot;...*[Comment body truncated]*
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 21:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/linter.rs</code>:604 on 2024-01-31 21:14</div>
            <div class="timeline-body"><p>This is ugly and I do not think it is working correctly — the snapshots are limited to a single fix now but they include diagnostics for the &quot;fixed&quot; test rules</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 21:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/linter.rs</code>:604 on 2024-01-31 21:15</div>
            <div class="timeline-body"><p>(Because we do not filter these downstream in <code>result.map</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 22:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/linter.rs</code>:248 on 2024-01-31 22:24</div>
            <div class="timeline-body"><p>Why is this so awkward Rust... ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-01-31 22:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_linter/src/linter.rs</code>:248 on 2024-01-31 22:26</div>
            <div class="timeline-body"><p>I&#x27;d probably do</p>
<pre><code>if !settings.rules.enabled(*test_rule) {
    continue;
}
</code></pre>
<p>but it otherwise doesn&#x27;t look too bad?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 22:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/linter.rs</code>:248 on 2024-01-31 22:29</div>
            <div class="timeline-body"><p>I don&#x27;t get why I can&#x27;t call <code>::diagnostic</code> once since I know all of the objects implement <code>TestRule</code>.</p>
<p>I have to do some weird dynamic boxing to get to that point?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_linter/src/linter.rs</code>:248 on 2024-01-31 22:39</div>
            <div class="timeline-body"><p>I don&#x27;t follow. Can you show me the code you <em>want</em> to write? It looks like you&#x27;re calling a bunch of different impls of <code>diagnostic</code> based on which <code>Rule</code> you have? Each line is doing the same function call, but it&#x27;s on a different type.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-01-31 22:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 22:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/linter.rs</code>:248 on 2024-01-31 22:43</div>
            <div class="timeline-body"><p><code>diagnostic</code> is provided by the <code>TestRule</code> trait which all of these rules implement. For a while I had...</p>
<pre><code>        for test_rule in TEST_RULES {
            if settings.rules.enabled(*test_rule) {
                if let Some(diagnostic) =
                    implementation_for_test_rule(*test_rule).diagnostic(&amp;locator, &amp;indexer)
                {
                    diagnostics.push(diagnostic);
                }
            }
        }
</code></pre>
<p>but that required the slightly awkward</p>
<pre><code>pub(crate) fn implementation_for_test_rule(rule: Rule) -&gt; Box&lt;dyn TestRule&gt;{
    match rule {
        Rule::StableTestRule =&gt; Box::new(StableTestRule),
        Rule::StableTestRuleSafeFix =&gt; Box::new(StableTestRuleSafeFix),
        Rule::StableTestRuleUnsafeFix =&gt; Box::new(StableTestRuleUnsafeFix),
        Rule::StableTestRuleDisplayOnlyFix =&gt; Box::new(StableTestRuleDisplayOnlyFix),
        Rule::NurseryTestRule =&gt; Box::new(NurseryTestRule),
        Rule::PreviewTestRule =&gt; Box::new(PreviewTestRule),
        _ =&gt; unreachable!(&quot;All test rules must have an implementation&quot;),
    }
}

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/linter.rs</code>:248 on 2024-01-31 22:44</div>
            <div class="timeline-body"><p>I was like.. why am I importing <code>TEST_RULES</code> and <code>implementation_for_test_rule</code> from <code>test_rules</code> I should just do something like <code>iter_test_rules() -&gt; &amp;[Rule, Box&lt;dyn TestRule&gt;]</code> (I actually tried implementing this as an <code>Iterator</code> too) and that&#x27;s when I ran into horrible cyclical compiler errors and gave up in favor of this manual approach.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 22:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-31 22:48</div>
            <div class="timeline-body"><p>The ecosystem checks won&#x27;t succeed until this is main because <code>RUF9XX</code> does not exist on the baseline binary.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-01-31 23:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_linter/src/linter.rs</code>:248 on 2024-01-31 23:09</div>
            <div class="timeline-body"><p>I think any way you slice things here, you need a match statement over a <code>Rule</code>. I don&#x27;t see a way around that because something has to tell the compiler which impl of <code>TestRule</code> to use, and <em>that</em> is determined by the <code>Rule</code>. Even if you wrote <code>iter_test_rules() -&gt; &amp;[Rule, Box&lt;dyn TestRule&gt;]</code>, you&#x27;d still need a match statement in there.</p>
<p>I think where you ended up is fine IMO.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/Cargo.toml</code>:58 on 2024-01-31 23:13</div>
            <div class="timeline-body"><p>@BurntSushi - Can you double-confirm for me that these won&#x27;t enable in non-<code>cargo test</code> builds?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:293 on 2024-01-31 23:14</div>
            <div class="timeline-body"><p>Wish there were something better here (e.g., what if we could use the rule source, and have a special <code>lint_source()</code> called <code>test</code>), but might be difficult.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>python/ruff-ecosystem/ruff_ecosystem/projects.py</code>:211 on 2024-01-31 23:14</div>
            <div class="timeline-body"><p>Why / how do these get enabled here? Why is this necessary?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-01-31 23:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-01-31 23:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>python/ruff-ecosystem/ruff_ecosystem/projects.py</code>:211 on 2024-01-31 23:16</div>
            <div class="timeline-body"><p>Like how does the feature end up being enabled?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:293 on 2024-01-31 23:39</div>
            <div class="timeline-body"><p>We could add something to the macro but it seems like more trouble than it&#x27;s worth at this point</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 23:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 23:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>python/ruff-ecosystem/ruff_ecosystem/projects.py</code>:211 on 2024-01-31 23:41</div>
            <div class="timeline-body"><p>I believe we get our ecosystem binaries from the test builds, which have the development features enabled? I think they have to be turned on in the <code>ruff</code> binary because we use that for integration tests.</p>
<p>It&#x27;d be nice if they were not present here, but do we want to have a separate build for the ecosystem checks?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 23:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/linter.rs</code>:248 on 2024-01-31 23:41</div>
            <div class="timeline-body"><p>Okay thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 23:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff/Cargo.toml</code>:58 on 2024-01-31 23:56</div>
            <div class="timeline-body"><p>If I do <code>cargo build --release --all-features</code> they are present</p>
<pre><code>❯ ./target/release/ruff check example.py --select RUF
example.py:1:1: RUF900 Hey this is a stable test rule.
example.py:1:1: RUF901 [*] Hey this is a stable test rule with a safe fix.
example.py:1:1: RUF902 Hey this is a stable test rule with an unsafe fix.
example.py:1:1: RUF903 Hey this is a stable test rule with a display only fix.
Found 4 errors.
[*] 1 fixable with the `--fix` option (1 hidden fix can be enabled with the `--unsafe-fixes` option).
</code></pre>
<p>but they are not present without <code>--all-features</code> in the <code>release</code> or <code>debug</code> targets.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-01-31 23:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff/Cargo.toml</code>:58 on 2024-01-31 23:58</div>
            <div class="timeline-body"><p>Idk what features we include in releases, it&#x27;s buried in maturin?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-02-01 00:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:293 on 2024-02-01 00:00</div>
            <div class="timeline-body"><p>Should we just put them all in a separate lint group e.g. <code>RFT</code> for &quot;Ruff test&quot;? Seems safer and easier to filter in general?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-02-01 00:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:293 on 2024-02-01 00:00</div>
            <div class="timeline-body"><p>Might end up being more work to implement overall though?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:293 on 2024-02-01 00:13</div>
            <div class="timeline-body"><p>I&#x27;m actually wondering how these even up getting included in the schema, do we run with <code>--all-features</code> or something?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-02-01 00:13</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-02-01 00:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:293 on 2024-02-01 00:14</div>
            <div class="timeline-body"><p>We should verify that <code>--select RUF9</code> doesn&#x27;t work with the production build (i.e., selecting by a prefix that only applies to test rules).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-02-01 00:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:293 on 2024-02-01 00:14</div>
            <div class="timeline-body"><p>Anyway, I&#x27;m cool with whatever here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-02-01 00:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/Cargo.toml</code>:58 on 2024-02-01 00:15</div>
            <div class="timeline-body"><p>We don&#x27;t specify anything, so we get the default features.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-02-01 00:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/Cargo.toml</code>:58 on 2024-02-01 00:15</div>
            <div class="timeline-body"><p>(Which should omit these.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-02-01 03:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff/Cargo.toml</code>:58 on 2024-02-01 03:16</div>
            <div class="timeline-body"><p>Oh great so I think we&#x27;re good then</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-02-01 03:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:293 on 2024-02-01 03:18</div>
            <div class="timeline-body"><p>Huh this raises a preview warning</p>
<pre><code>❯ ./target/debug/ruff check example.py --select RUF9
warning: Selection `RUF9` has no effect because the `--preview` flag was not included.
</code></pre>
<p>but doesn&#x27;t do anything else.. <code>RUF8</code> errors</p>
<pre><code>❯ ./target/debug/ruff check example.py --select RUF8
error: invalid value &#x27;RUF8&#x27; for &#x27;--select &lt;RULE_CODE&gt;&#x27;
</code></pre>
<p>I guess I&#x27;ll fix that next..</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:293 on 2024-02-01 03:23</div>
            <div class="timeline-body"><p>Yeah this is actually confusing... why are they included in the schema in the first place?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-02-01 03:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-02-01 03:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:293 on 2024-02-01 03:36</div>
            <div class="timeline-body"><p>They shouldn&#x27;t even <em>exist</em> when we run <code>cargo dev generate-all</code>, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-02-01 04:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:293 on 2024-02-01 04:20</div>
            <div class="timeline-body"><p>Okay this was a bug in the proc macro 🎉
<a href="https://github.com/astral-sh/ruff/pull/9747">astral-sh/ruff#9747</a>/commits/8247b8582b4b80900a0ef7e984a035283b4558b6 fixes it (but has a mediocre implementation I&#x27;m fixing up)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-01 04:34</div>
            <div class="timeline-body"><p>The schema generation tests use <code>--all-features</code> even though the real schema generation does not 😮‍💨</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-01 04:36</div>
            <div class="timeline-body"><p>Noooooo</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-02-01 12:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff/Cargo.toml</code>:58 on 2024-02-01 12:24</div>
            <div class="timeline-body"><p>Yeah features enabled in <code>dev-dependencies</code> should definitely not cross over into standard builds. But yeah as Zanie mentioned, if you have anything that&#x27;s using <code>--all-features</code>, then they will get enabled in that case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-01 14:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-01 14:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-02-01 14:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-02-02 08:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>.github/workflows/ci.yaml</code>:152 on 2024-02-02 08:53</div>
            <div class="timeline-body"><p>Can we add another run command that runs the test of <code>ruff_dev</code> but with the default features only? We otherwise lose the schema test.</p>
<p>Although I&#x27;m seeing test failures locally even when not using <code>--all-features</code>, making that test rather annoying.</p>
<p>A workaround could be to export a <code>are_testing_rules_enabled</code> and conditionally implement it depending on the presence of the feature flag and not run the schema test when it&#x27;s enabled. But that still means that the test won&#x27;t fail anymore locally and still requires an explicit cargo test <code>ruff_dev</code> run :(</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:01:19 UTC
    </footer>
</body>
</html>
