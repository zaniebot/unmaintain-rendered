```yaml
number: 12068
title: Release v0.5.0
type: pull_request
state: merged
author: MichaReiser
labels:
  - release
assignees: []
merged: true
base: main
head: ruff-0.5-release
created_at: 2024-06-27T11:47:12Z
updated_at: 2024-06-27T15:02:53Z
url: https://github.com/astral-sh/ruff/pull/12068
synced_at: 2026-01-12T15:55:40Z
```

# Release v0.5.0

---

_@MichaReiser_

## Summary

Release of Ruff v0.5.0




---

_Label `release` added by @MichaReiser on 2024-06-27 11:47_

---

_@MichaReiser reviewed on 2024-06-27 11:48_

---

_Review comment by @MichaReiser on `CHANGELOG.md`:97 on 2024-06-27 11:48_

Hmm, looks like it didn't add the features from the rebase-merge

---

_Comment by @github-actions[bot] on 2024-06-27 12:08_

<!-- generated-comment ecosystem -->
## `ruff-ecosystem` results
### Linter (stable)
‚úÖ ecosystem check detected no linter changes.

### Linter (preview)
‚ÑπÔ∏è ecosystem check **encountered linter errors**. (no lint changes; 1 project error)

<details><summary><a href="https://github.com/demisto/content">demisto/content</a> (error)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

```
warning: The top-level linter settings are deprecated in favour of their counterparts in the `lint` section. Please update the following options in `pyproject.toml`:
  - 'ignore' -> 'lint.ignore'
  - 'select' -> 'lint.select'
  - 'unfixable' -> 'lint.unfixable'
  - 'per-file-ignores' -> 'lint.per-file-ignores'
warning: `PGH001` has been remapped to `S307`.
warning: `PGH002` has been remapped to `G010`.
warning: `PLR1701` has been remapped to `SIM101`.
ruff failed
  Cause: Selection of deprecated rule `E999` is not allowed when preview is enabled.
```

</p>
</details>

### Formatter (stable)
‚úÖ ecosystem check detected no format changes.

### Formatter (preview)
‚ÑπÔ∏è ecosystem check **encountered format errors**. (no format changes; 1 project error)

<details><summary><a href="https://github.com/demisto/content">demisto/content</a> (error)</summary>
<p>
<pre>ruff format --preview --exclude Packs/ThreatQ/Integrations/ThreatQ/ThreatQ.py</pre>
</p>
<p>

```
warning: The top-level linter settings are deprecated in favour of their counterparts in the `lint` section. Please update the following options in `pyproject.toml`:
  - 'ignore' -> 'lint.ignore'
  - 'select' -> 'lint.select'
  - 'unfixable' -> 'lint.unfixable'
  - 'per-file-ignores' -> 'lint.per-file-ignores'
warning: `PGH001` has been remapped to `S307`.
warning: `PGH002` has been remapped to `G010`.
warning: `PLR1701` has been remapped to `SIM101`.
ruff failed
  Cause: Selection of deprecated rule `E999` is not allowed when preview is enabled.
```

</p>
</details>




---

_Review comment by @AlexWaygood on `CHANGELOG.md`:67 on 2024-06-27 13:06_

I just went through and tediously added the error codes for the blog post, so we can just copy and past these over now üòÅ

```suggestion
- [`mutable-fromkeys-value`](https://docs.astral.sh/ruff/rules/mutable-fromkeys-value/) (`RUF024`)
- [`default-factory-kwarg`](https://docs.astral.sh/ruff/rules/default-factory-kwarg/) (`RUF026`)
- [`django-extra`](https://docs.astral.sh/ruff/rules/django-extra/) (`S610`)
- [`manual-dict-comprehension`](https://docs.astral.sh/ruff/rules/manual-dict-comprehension/) (`PERF403`)
- [`print-empty-string`](https://docs.astral.sh/ruff/rules/print-empty-string/) (`FURB105`)
- [`readlines-in-for`](https://docs.astral.sh/ruff/rules/readlines-in-for/) (`FURB129`)
- [`if-expr-min-max`](https://docs.astral.sh/ruff/rules/if-expr-min-max/) (`FURB136`)
- [`bit-count`](https://docs.astral.sh/ruff/rules/bit-count/) (`FURB161`)
- [`redundant-log-base`](https://docs.astral.sh/ruff/rules/redundant-log-base/) (`FURB163`)
- [`regex-flag-alias`](https://docs.astral.sh/ruff/rules/regex-flag-alias/) (`FURB167`)
- [`isinstance-type-none`](https://docs.astral.sh/ruff/rules/isinstance-type-none/) (`FURB168`)
- [`type-none-comparison`](https://docs.astral.sh/ruff/rules/type-none-comparison/) (`FURB169`)
- [`implicit-cwd`](https://docs.astral.sh/ruff/rules/implicit-cwd/) (`FURB177`)
- [`hashlib-digest-hex`](https://docs.astral.sh/ruff/rules/hashlib-digest-hex/) (`FURB181`)
- [`list-reverse-copy`](https://docs.astral.sh/ruff/rules/list-reverse-copy/) (`FURB187`)
- [`bad-open-mode`](https://docs.astral.sh/ruff/rules/bad-open-mode/) (`PLW1501`)
- [`empty-comment`](https://docs.astral.sh/ruff/rules/empty-comment/) (`PLR2044`)
- [`global-at-module-level`](https://docs.astral.sh/ruff/rules/global-at-module-level/) (`PLW0604`)
- [`misplaced-bare-raise`](https://docs.astral.sh/ruff/rules/misplaced-bare-raise`/) (`PLE0744`)
- [`non-ascii-import-name`](https://docs.astral.sh/ruff/rules/non-ascii-import-name/) (`PLC2403`)
- [`non-ascii-name`](https://docs.astral.sh/ruff/rules/non-ascii-name/) (`PLC2401`)
- [`nonlocal-and-global`](https://docs.astral.sh/ruff/rules/nonlocal-and-global/) (`PLE0115`)
- [`potential-index-error`](https://docs.astral.sh/ruff/rules/potential-index-error/) (`PLE0643`)
- [`redeclared-assigned-name`](https://docs.astral.sh/ruff/rules/redeclared-assigned-name/) (`PLW0128`)
- [`redefined-argument-from-local`](https://docs.astral.sh/ruff/rules/redefined-argument-from-local/) (`PLR1704`)
- [`repeated-keyword-argument`](https://docs.astral.sh/ruff/rules/repeated-keyword-argument/) (`PLE1132`)
- [`super-without-brackets`](https://docs.astral.sh/ruff/rules/super-without-brackets/) (`PLW0245`)
- [`unnecessary-list-index-lookup`](https://docs.astral.sh/ruff/rules/unnecessary-list-index-lookup/) (`PLR1736`)
- [`useless-exception-statement`](https://docs.astral.sh/ruff/rules/useless-exception-statement/) (`PLW0133`)
- [`useless-with-lock`](https://docs.astral.sh/ruff/rules/useless-with-lock/) (`PLW2101`)
```



---

_Review comment by @AlexWaygood on `CHANGELOG.md`:71 on 2024-06-27 13:07_

````suggestion
- [`is-literal`](https://docs.astral.sh/ruff/rules/is-literal/) (`F632`) now
  [also warns for identity checks against list, set or dictionary literals](https://github.com/astral-sh/ruff/pull/8607).
  For example, antipatterns such as `if x is {}` or `if y is ["foo"]` will now be identified by the check.

- [`needless-bool`](https://docs.astral.sh/ruff/rules/needless-bool/) (`SIM103`)
  [now detects `if` expressions with implicit `else` branches](https://github.com/astral-sh/ruff/pull/10414).
  For example, the following snippet would not have been previously flagged by the rule, but will be in Ruff v0.5.0+:

  ```python
  def is_greater_than_ten(number: int) -> bool:
      if number > 10:
          return True
      return False
  ```

- [`module-import-not-at-top-of-file`](https://docs.astral.sh/ruff/rules/module-import-not-at-top-of-file/) (`E402`)
  [now allows `os.environ` modifications between import statements](https://github.com/astral-sh/ruff/pull/10066).

- [`type-comparison`](https://docs.astral.sh/ruff/rules/type-comparison/) (`E721`)
  [now allows idioms such as `type(x) is int`](https://github.com/astral-sh/ruff/pull/7905).

- [`yoda-conditions`](https://docs.astral.sh/ruff/rules/yoda-conditions/) (`SIM300`)
  [now flags a wider range of expressions](`https://github.com/astral-sh/ruff/pull/9164).
  For example, expressions such as `[] == make_me_a_list()` would previously not have triggered `yoda-conditions`,
  but will in Ruff v0.5.0+.
````

---

_Review comment by @AlexWaygood on `CHANGELOG.md`:140 on 2024-06-27 13:08_

```suggestion
```

---

_@AlexWaygood reviewed on 2024-06-27 13:08_

Nice!

---

_@MichaReiser reviewed on 2024-06-27 13:26_

---

_Review comment by @MichaReiser on `CHANGELOG.md`:71 on 2024-06-27 13:26_

I prefer the more brief version

---

_@MichaReiser reviewed on 2024-06-27 13:26_

---

_Review comment by @MichaReiser on `CHANGELOG.md`:140 on 2024-06-27 13:26_

Why?

---

_@AlexWaygood reviewed on 2024-06-27 13:27_

---

_Review comment by @AlexWaygood on `CHANGELOG.md`:71 on 2024-06-27 13:27_

Agreed, for a changelog what you have is better!

---

_@AlexWaygood reviewed on 2024-06-27 13:27_

---

_Review comment by @AlexWaygood on `CHANGELOG.md`:140 on 2024-06-27 13:27_

I understood that we didn't usually include documentation sections in our changelogs, since end users don't really need to know about every change to our docs

---

_Marked ready for review by @MichaReiser on 2024-06-27 13:35_

---

_Review requested from @charliermarsh by @MichaReiser on 2024-06-27 13:40_

---

_@dhruvmanila reviewed on 2024-06-27 13:47_

---

_Review comment by @dhruvmanila on `CHANGELOG.md`:20 on 2024-06-27 13:47_

Do you think it's useful to expand here to say that "Ruff will always report syntax errors"?

---

_Review comment by @AlexWaygood on `BREAKING_CHANGES.md`:8 on 2024-06-27 14:03_

```suggestion
- The release artifact's file name no longer includes the version tag. This enables users to install via `/latest` URLs on GitHub.
```

---

_Review comment by @AlexWaygood on `BREAKING_CHANGES.md`:6 on 2024-06-27 14:03_

```suggestion
- Selecting `ALL` now excludes deprecated rules
```

---

_Review comment by @AlexWaygood on `CHANGELOG.md`:12 on 2024-06-27 14:03_

```suggestion
- Selecting `ALL` now excludes deprecated rules
```

---

_Review comment by @AlexWaygood on `CHANGELOG.md`:14 on 2024-06-27 14:04_

```suggestion
- The release artifact's file name no longer includes the version tag. This enables users to install via `/latest` URLs on GitHub.
```

---

_Review comment by @AlexWaygood on `CHANGELOG.md`:28 on 2024-06-27 14:04_

```suggestion
- [`blocking-os-call-in-async-function`](https://docs.astral.sh/ruff/rules/blocking-os-call-in-async-function/): `ASYNC102` has been merged into `ASYNC220` and `ASYNC221`
```

---

_Review comment by @AlexWaygood on `CHANGELOG.md`:122 on 2024-06-27 14:06_

```suggestion
- [`pycodestyle`] Avoid `E203` for f-string debug expression ([#12024](https://github.com/astral-sh/ruff/pull/12024))
- [`pep8-naming`] Match import-name ignores against both name and alias (`N812`, `N817`) ([#12033](https://github.com/astral-sh/ruff/pull/12033))
```

---

_Review comment by @AlexWaygood on `CHANGELOG.md`:132 on 2024-06-27 14:06_

Maybe these could all go in a separate "Parser" section

---

_@AlexWaygood reviewed on 2024-06-27 14:06_

---

_@AlexWaygood reviewed on 2024-06-27 14:27_

---

_Review comment by @AlexWaygood on `CHANGELOG.md`:122 on 2024-06-27 14:27_

```suggestion
- \[`pycodestyle`\] Avoid `E203` for f-string debug expression ([#12024](https://github.com/astral-sh/ruff/pull/12024))
- \[`pep8-naming`\] Match import-name ignores against both name and alias (`N812`, `N817`) ([#12033](https://github.com/astral-sh/ruff/pull/12033))
```

---

_Review comment by @AlexWaygood on `CHANGELOG.md`:137 on 2024-06-27 14:37_

What's going on with this line?

---

_@AlexWaygood approved on 2024-06-27 14:37_

---

_Review comment by @AlexWaygood on `CHANGELOG.md`:137 on 2024-06-27 14:41_

```suggestion
- Remove the deprecation error message for the nursery selector ([#10172](https://github.com/astral-sh/ruff/pull/10172))
```

---

_@AlexWaygood reviewed on 2024-06-27 14:41_

---

_Merged by @AlexWaygood on 2024-06-27 14:46_

---

_Closed by @AlexWaygood on 2024-06-27 14:46_

---

_Branch deleted on 2024-06-27 14:46_

---
