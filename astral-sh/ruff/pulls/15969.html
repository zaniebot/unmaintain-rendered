<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rename `TypeAndQualifiers` to `DeclaredType` - astral-sh/ruff #15969</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rename <code>TypeAndQualifiers</code> to <code>DeclaredType</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/15969">#15969</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2025-02-05 13:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a></div>
            <div class="timeline-body">Summary
<p>This PR renames <code>TypeAndQualifiers</code> to <code>DeclaredType</code>.</p>
<p>The main motivation for this rename is that in #15848 I need to pass the <code>ReExport</code> information around and <code>TypeAndQualifiers</code> as a name is limited to only include the <code>TypeQualifiers</code>. The re-export information is relevant only for a declared type.</p>
<p>Another potential name that I thought of was <code>TypeWithMetadata</code> which doesn&#x27;t tie this with using it only in the declaration sites.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-05 13:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-05 13:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-05 13:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-05 13:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/sharkdp">@sharkdp</a> by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-05 13:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-02-05 14:00</div>
            <div class="timeline-body"><p>Hmm -- I&#x27;m not sure that type qualifiers will always <em>only</em> be relevant for declared types. We hope to at some point support &quot;implicit class variables&quot; -- there&#x27;s some TODOs in our tests, such as here:</p>
<p>https://github.com/astral-sh/ruff/blob/c69b19fe1ddcd3cc57a5fa7f0541037465c277b7/crates/red_knot_python_semantic/resources/mdtest/attributes.md?plain=1#L499-L514</p>
<p>@sharkdp might have some more context on whether the plan is to support these in a similar way to our current support for explicit <code>ClassVar</code>s or not</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-02-05 16:03</div>
            <div class="timeline-body"><blockquote>
<p>@sharkdp might have some more context on whether the plan is to support these in a similar way to our current support for explicit <code>ClassVar</code>s or not</p>
</blockquote>
<p>Hm, yes. I&#x27;m also not sure if we&#x27;ll use (a potentially renamed) <code>TypeAndQualifiers</code> for this.</p>
<p>I don&#x27;t have strong feelings about the name of this struct, but <code>DeclaredType</code> seems a bit too narrow for me. The declared <em>type</em> is pretty much what is stored in the <code>inner: Type&lt;…&gt;</code> field. Maybe <code>AnnotatedType</code>? Following the distinction between type expressions and annotations expressions in the <a href="https://typing.readthedocs.io/en/latest/spec/annotations.html#type-and-annotation-expressions">syntax</a>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-06 04:46</div>
            <div class="timeline-body"><blockquote>
<p>I don&#x27;t have strong feelings about the name of this struct, but <code>DeclaredType</code> seems a bit too narrow for me. The declared <em>type</em> is pretty much what is stored in the <code>inner: Type&lt;…&gt;</code> field. Maybe <code>AnnotatedType</code>? Following the distinction between type expressions and annotations expressions in the <a href="https://typing.readthedocs.io/en/latest/spec/annotations.html#type-and-annotation-expressions">syntax</a>?</p>
</blockquote>
<p>Yeah, I think that makes sense. Although, I&#x27;ve realized that I might need to pass the <code>ReExport</code> information via the bindings as well i.e., augment the binding <code>Type</code> with additional information. I&#x27;m going to put this on hold until that is finalized.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-06 04:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-14 09:58</div>
            <div class="timeline-body"><p>I&#x27;m going to close this for now although I do like <code>AnnotatedType</code> but I think we should wait until we have some more clarity on what would be a good name there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-14 09:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:11:09 UTC
    </footer>
</body>
</html>
