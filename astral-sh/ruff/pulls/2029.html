<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>refactor: RuleOrigin, RuleCodePrefix and Rule::origin - astral-sh/ruff #2029</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>refactor: RuleOrigin, RuleCodePrefix and Rule::origin</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/2029">#2029</a>
        opened by <a href="https://github.com/not-my-profile">@not-my-profile</a>
        on 2023-01-20 13:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-20 13:41</div>
            <div class="timeline-body"><p>I am about to implement the many to many mapping between codes and rules and would like to rename these two enums in advance because the names don't really make much sense anymore.</p>
<p>As a followup I will drop the all the partial prefixes from <code>RuleCodePrefix</code>, see https://github.com/charliermarsh/ruff/issues/1773#issuecomment-1378203413, i.e. you will only be able to select/ignore: one specific rule (e.g. <code>F401</code>, all rules from a linter (e.g. <code>F</code>) or all rules (<code>ALL</code>). While this is not strictly necessary to implement the many to many mapping (or human friendly linter names) it does enable the many to many mapping implementation to be prefix agnostic which I think is a really nice feature since ruff prefixes currently often diverge from the upstream prefixes and by having a prefix-agnostic mapping we can support both the existing ruff rule codes as well as the large legacy code bases that want to switch to ruff without having to rewrite all of their <code>noqa</code> directives.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "refactor: Rename RuleOrigin to Linter" to "refactor: Rename RuleOrigin and RuleCodePrefix" by @not-my-profile on 2023-01-20 13:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-20 14:24</div>
            <div class="timeline-body"><p>On the follow-up: I can write a longer comment when I’m back at my computer, but we have to be careful with how we handle that, as people do rely on that behavior today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-20 14:34</div>
            <div class="timeline-body"><p>I think I can come up with a clever workaround to still support such partial prefix matches while still avoiding the disadvantageous hardcoding of prefixes ... this way we can stay backwards compatible for how long we want regarding such prefixes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-20 14:40</div>
            <div class="timeline-body"><p>Yeah I just don’t want to break compatibility without a clear and thoughtful strategy. Sounds like we’re on the same page. (An edition or versioned configuration would help with this, in theory? Though it’ll also come automatically if users move to the kebab-case rule names.)</p>
<p>I’ll do a brief compilation of some of the common cases here via GitHub Code Search. For what it’s worth, I think the partial prefix match is mostly used for disabling subsets of docstring rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-20 14:47</div>
            <div class="timeline-body"><p>I think selectable kebab-case names are still some ways away since as soon as we have them every rule name change will become a breaking change, so I think before we can surface our rule names to the users we have to 1) establish some very thought out naming conventions and 2) rigorously rename all our rules to match that convention ... that will take some time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @not-my-profile on 2023-01-20 18:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @not-my-profile on 2023-01-20 18:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "refactor: Rename RuleOrigin and RuleCodePrefix" to "refactor: RuleOrigin, RuleCodePrefix and Rule::origin" by @not-my-profile on 2023-01-20 19:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-20 23:31</div>
            <div class="timeline-body"><p>Just read through this -- looks reasonable to me. (But now needs a rebase. Will merge whenever it's updated.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-21 01:22</div>
            <div class="timeline-body"><p>Rebased :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-01-21 01:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-21 01:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 04:54:11 UTC
    </footer>
</body>
</html>
