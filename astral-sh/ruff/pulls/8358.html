<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Run ecosystem checks with preview mode enabled - astral-sh/ruff #8358</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Run ecosystem checks with preview mode enabled</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/8358">#8358</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2023-10-30 15:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/zanieb">@zanieb</a> on 2023-10-30 15:14</div>
            <div class="timeline-body"><p>Until https://github.com/astral-sh/ruff/issues/8076 is ready, it seems beneficial to get feedback on preview mode changes.</p>
<p>Tested locally, updated logs to output the flags passed to <code>ruff</code> and verified <code>--preview</code> is used.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>.github/workflows/ci.yaml</code>:221 on 2023-10-30 15:15</div>
            <div class="timeline-body"><p>Alternatively, we could get fancy and set this flag if a pull request has the <code>preview</code> label. I'm not sure that's worth it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-10-30 15:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @zanieb on 2023-10-30 15:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-10-30 15:45</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @zanieb on 2023-10-30 15:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-10-30 22:06</div>
            <div class="timeline-body"><p>I support this, probably worth getting @MichaReiser's take too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @zanieb on 2023-10-30 22:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-31 01:11</div>
            <div class="timeline-body"><p>I'm sure if I understand this change. Does it mean that we'll run the ecosystem checks in preview only? Or will we run the ecosystem checks in preview and normal mode?</p>
<p>I believe running the ecosystem checks in non-preview mode helps identify unintentional breaking changes.</p>
<p>For the formatter, I think we need to run both to assess if (even a preview only change) unintentionally breaks non-preview formatting AND in preview to assess how preview style changes formatting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-10-31 01:33</div>
            <div class="timeline-body"><p>While I would like to run both preview and not preview as described in #8076, until we implement that we gain more (in the linter, at least) from the ecosystem checks with preview enabled than not.</p>
<p>Basically, this is a temporary solution that also moves us a step closer to supporting both outputs.</p>
<p>My primary concern with naively enabling both preview and non-preview checks  is that it doubles the amount of output we can display — and it already feels very constrained.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2023-10-31 07:27</div>
            <div class="timeline-body"><p>Sounds reasonable for the inter, but I fear we need to invest a little more into the ecosystem check for us to implement changes with confidence.</p>
<p>For the formatter, the most important in my view, is to ensure we don't introduce unintentional changes to the stable style. Or we risk shipping breaking changes which are annoying for users. This is why I would prefer to run the ecosystem checks with stable style formatting.</p>
<p>I see it essential for implementing preview style successfully to have a way (at least locally) to run the ecosystem checks with preview style enabled. Could you document how this can be done in the CONTRIBUTION.md if it's not already the case? If you can find the time to make this work in CI during next month would be awesome, but I know that you've already planned a lot.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2023-11-01 17:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2023-11-01 17:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-11-01 17:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 02:13:15 UTC
    </footer>
</body>
</html>
