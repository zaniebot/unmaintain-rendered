<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Include decorators in `Function` and `Class` definition ranges - astral-sh/ruff #4467</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Include decorators in <code>Function</code> and <code>Class</code> definition ranges</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/4467">#4467</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2023-05-17 08:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><p>See <a href="https://github.com/RustPython/Parser/pull/49">RustPython/Parser#49</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-17 08:30</div>
            <div class="timeline-body"><p>Current dependencies on/for this PR:</p>
<ul>
<li>main<ul>
<li><strong>PR #4467</strong> <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4467"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite"></a>  üëà</li>
</ul>
</li>
</ul>
<p>This comment was auto-generated by <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4467?utm_source=stack-comment">Graphite</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-05-17 08:42</div>
            <div class="timeline-body">PR Check Results
Ecosystem
<p>‚ÑπÔ∏è ecosystem check <strong>detected changes</strong>. (+55, -53, 0 error(s))</p>
airflow (+31, -29)
<p>

<pre><code>- airflow/cli/commands/celery_command.py:116:13: A003 Class attribute `filter` is shadowing a Python builtin
+ airflow/cli/commands/celery_command.py:116:17: A003 Class attribute `filter` is shadowing a Python builtin
- airflow/configuration.py:1681:1: A001 Variable `set` is shadowing a Python builtin
+ airflow/configuration.py:1681:5: A001 Variable `set` is shadowing a Python builtin
+ airflow/example_dags/example_sensor_decorator.py:21:1: I001 [*] Import block is un-sorted or un-formatted
+ airflow/example_dags/tutorial_taskflow_api.py:18:1: I001 [*] Import block is un-sorted or un-formatted
- airflow/models/errors.py:26:1: A001 Variable `ImportError` is shadowing a Python builtin
+ airflow/models/errors.py:26:7: A001 Variable `ImportError` is shadowing a Python builtin
- airflow/models/variable.py:154:5: A003 Class attribute `set` is shadowing a Python builtin
+ airflow/models/variable.py:154:9: A003 Class attribute `set` is shadowing a Python builtin
- airflow/models/xcom.py:137:5: A003 Class attribute `set` is shadowing a Python builtin
+ airflow/models/xcom.py:137:9: A003 Class attribute `set` is shadowing a Python builtin
- airflow/models/xcom.py:166:5: A003 Class attribute `set` is shadowing a Python builtin
+ airflow/models/xcom.py:166:9: A003 Class attribute `set` is shadowing a Python builtin
- airflow/models/xcom.py:182:5: A003 Class attribute `set` is shadowing a Python builtin
+ airflow/models/xcom.py:182:9: A003 Class attribute `set` is shadowing a Python builtin
- airflow/models/xcom_arg.py:178:5: A003 Class attribute `map` is shadowing a Python builtin
+ airflow/models/xcom_arg.py:178:9: A003 Class attribute `map` is shadowing a Python builtin
- airflow/models/xcom_arg.py:181:5: A003 Class attribute `zip` is shadowing a Python builtin
+ airflow/models/xcom_arg.py:181:9: A003 Class attribute `zip` is shadowing a Python builtin
- airflow/models/xcom_arg.py:302:5: A003 Class attribute `map` is shadowing a Python builtin
+ airflow/models/xcom_arg.py:302:9: A003 Class attribute `map` is shadowing a Python builtin
- airflow/models/xcom_arg.py:307:5: A003 Class attribute `zip` is shadowing a Python builtin
+ airflow/models/xcom_arg.py:307:9: A003 Class attribute `zip` is shadowing a Python builtin
- airflow/models/xcom_arg.py:450:5: A003 Class attribute `map` is shadowing a Python builtin
+ airflow/models/xcom_arg.py:450:9: A003 Class attribute `map` is shadowing a Python builtin
- airflow/providers/google/cloud/hooks/bigquery.py:2793:5: A003 Class attribute `next` is shadowing a Python builtin
+ airflow/providers/google/cloud/hooks/bigquery.py:2793:9: A003 Class attribute `next` is shadowing a Python builtin
- airflow/providers/google/cloud/hooks/gcs.py:699:5: A003 Class attribute `list` is shadowing a Python builtin
+ airflow/providers/google/cloud/hooks/gcs.py:699:9: A003 Class attribute `list` is shadowing a Python builtin
- airflow/providers/microsoft/azure/hooks/data_lake.py:216:5: A003 Class attribute `list` is shadowing a Python builtin
+ airflow/providers/microsoft/azure/hooks/data_lake.py:216:9: A003 Class attribute `list` is shadowing a Python builtin
- airflow/utils/file.py:46:5: A003 Class attribute `compile` is shadowing a Python builtin
+ airflow/utils/file.py:46:9: A003 Class attribute `compile` is shadowing a Python builtin
- airflow/utils/file.py:64:5: A003 Class attribute `compile` is shadowing a Python builtin
+ airflow/utils/file.py:64:9: A003 Class attribute `compile` is shadowing a Python builtin
- airflow/utils/file.py:92:5: A003 Class attribute `compile` is shadowing a Python builtin
+ airflow/utils/file.py:92:9: A003 Class attribute `compile` is shadowing a Python builtin
- airflow/utils/log/colored_log.py:95:5: A003 Class attribute `format` is shadowing a Python builtin
+ airflow/utils/log/colored_log.py:95:9: A003 Class attribute `format` is shadowing a Python builtin
- airflow/utils/log/json_formatter.py:42:5: A003 Class attribute `format` is shadowing a Python builtin
+ airflow/utils/log/json_formatter.py:42:9: A003 Class attribute `format` is shadowing a Python builtin
- airflow/utils/log/secrets_masker.py:189:5: A003 Class attribute `filter` is shadowing a Python builtin
+ airflow/utils/log/secrets_masker.py:189:9: A003 Class attribute `filter` is shadowing a Python builtin
- airflow/utils/log/trigger_handler.py:41:5: A003 Class attribute `filter` is shadowing a Python builtin
+ airflow/utils/log/trigger_handler.py:41:9: A003 Class attribute `filter` is shadowing a Python builtin
- airflow/utils/log/trigger_handler.py:64:5: A003 Class attribute `filter` is shadowing a Python builtin
+ airflow/utils/log/trigger_handler.py:64:9: A003 Class attribute `filter` is shadowing a Python builtin
- airflow/www/views.py:4721:5: A003 Class attribute `list` is shadowing a Python builtin
+ airflow/www/views.py:4721:9: A003 Class attribute `list` is shadowing a Python builtin
- airflow/www/views.py:4773:5: A003 Class attribute `list` is shadowing a Python builtin
+ airflow/www/views.py:4773:9: A003 Class attribute `list` is shadowing a Python builtin
- airflow/www/views.py:5776:5: A003 Class attribute `list` is shadowing a Python builtin
+ airflow/www/views.py:5776:9: A003 Class attribute `list` is shadowing a Python builtin
- dev/breeze/src/airflow_breeze/commands/developer_commands.py:581:1: A001 Variable `exec` is shadowing a Python builtin
+ dev/breeze/src/airflow_breeze/commands/developer_commands.py:581:5: A001 Variable `exec` is shadowing a Python builtin
- tests/providers/openlineage/extractors/test_python_extractor.py:52:1: A001 Variable `callable` is shadowing a Python builtin
+ tests/providers/openlineage/extractors/test_python_extractor.py:52:5: A001 Variable `callable` is shadowing a Python builtin
+ tests/providers/openlineage/plugins/test_utils.py:121:11: A001 Variable `NotImplemented` is shadowing a Python builtin
- tests/providers/openlineage/plugins/test_utils.py:121:5: A001 Variable `NotImplemented` is shadowing a Python builtin
</code></pre>
</p>

bokeh (+17, -17)
<p>

<pre><code>- src/bokeh/__init__.py:62:1: A001 Variable `license` is shadowing a Python builtin
+ src/bokeh/__init__.py:62:5: A001 Variable `license` is shadowing a Python builtin
- src/bokeh/application/application.py:318:5: A003 Class attribute `id` is shadowing a Python builtin
+ src/bokeh/application/application.py:318:9: A003 Class attribute `id` is shadowing a Python builtin
- src/bokeh/client/session.py:365:5: A003 Class attribute `id` is shadowing a Python builtin
+ src/bokeh/client/session.py:365:9: A003 Class attribute `id` is shadowing a Python builtin
- src/bokeh/core/property/bases.py:130:5: A003 Class attribute `help` is shadowing a Python builtin
+ src/bokeh/core/property/bases.py:130:9: A003 Class attribute `help` is shadowing a Python builtin
- src/bokeh/core/validation/issue.py:49:1: A001 Variable `Warning` is shadowing a Python builtin
+ src/bokeh/core/validation/issue.py:49:7: A001 Variable `Warning` is shadowing a Python builtin
- src/bokeh/core/validation/issue.py:66:5: A003 Class attribute `all` is shadowing a Python builtin
+ src/bokeh/core/validation/issue.py:66:9: A003 Class attribute `all` is shadowing a Python builtin
- src/bokeh/core/validation/issue.py:87:5: A003 Class attribute `all` is shadowing a Python builtin
+ src/bokeh/core/validation/issue.py:87:9: A003 Class attribute `all` is shadowing a Python builtin
- src/bokeh/model/model.py:128:5: A003 Class attribute `id` is shadowing a Python builtin
+ src/bokeh/model/model.py:128:9: A003 Class attribute `id` is shadowing a Python builtin
- src/bokeh/plotting/glyph_api.py:413:5: A003 Class attribute `hex` is shadowing a Python builtin
+ src/bokeh/plotting/glyph_api.py:413:9: A003 Class attribute `hex` is shadowing a Python builtin
- src/bokeh/server/callbacks.py:74:5: A003 Class attribute `id` is shadowing a Python builtin
+ src/bokeh/server/callbacks.py:74:9: A003 Class attribute `id` is shadowing a Python builtin
- src/bokeh/server/session.py:159:5: A003 Class attribute `id` is shadowing a Python builtin
+ src/bokeh/server/session.py:159:9: A003 Class attribute `id` is shadowing a Python builtin
- src/bokeh/server/views/ws.py:125:5: A003 Class attribute `open` is shadowing a Python builtin
+ src/bokeh/server/views/ws.py:125:9: A003 Class attribute `open` is shadowing a Python builtin
- src/bokeh/settings.py:484:5: A003 Class attribute `help` is shadowing a Python builtin
+ src/bokeh/settings.py:484:9: A003 Class attribute `help` is shadowing a Python builtin
- src/bokeh/util/browser.py:54:5: A003 Class attribute `open` is shadowing a Python builtin
+ src/bokeh/util/browser.py:54:9: A003 Class attribute `open` is shadowing a Python builtin
- src/bokeh/util/browser.py:61:5: A003 Class attribute `open` is shadowing a Python builtin
+ src/bokeh/util/browser.py:61:9: A003 Class attribute `open` is shadowing a Python builtin
- src/typings/selenium/webdriver/remote/webdriver.pyi:29:5: A003 Class attribute `quit` is shadowing a Python builtin
+ src/typings/selenium/webdriver/remote/webdriver.pyi:29:9: A003 Class attribute `quit` is shadowing a Python builtin
- tests/unit/bokeh/util/test_browser.py:38:5: A003 Class attribute `open` is shadowing a Python builtin
+ tests/unit/bokeh/util/test_browser.py:38:9: A003 Class attribute `open` is shadowing a Python builtin
</code></pre>
</p>

zulip (+7, -7)
<p>

<pre><code>- zerver/lib/bot_lib.py:152:5: A003 Class attribute `quit` is shadowing a Python builtin
+ zerver/lib/bot_lib.py:152:9: A003 Class attribute `quit` is shadowing a Python builtin
- zerver/lib/logging_util.py:110:5: A003 Class attribute `filter` is shadowing a Python builtin
+ zerver/lib/logging_util.py:110:9: A003 Class attribute `filter` is shadowing a Python builtin
- zerver/lib/logging_util.py:115:5: A003 Class attribute `filter` is shadowing a Python builtin
+ zerver/lib/logging_util.py:115:9: A003 Class attribute `filter` is shadowing a Python builtin
- zerver/lib/logging_util.py:120:5: A003 Class attribute `filter` is shadowing a Python builtin
+ zerver/lib/logging_util.py:120:9: A003 Class attribute `filter` is shadowing a Python builtin
- zerver/lib/logging_util.py:200:5: A003 Class attribute `format` is shadowing a Python builtin
+ zerver/lib/logging_util.py:200:9: A003 Class attribute `format` is shadowing a Python builtin
- zerver/lib/logging_util.py:224:5: A003 Class attribute `format` is shadowing a Python builtin
+ zerver/lib/logging_util.py:224:9: A003 Class attribute `format` is shadowing a Python builtin
- zerver/lib/logging_util.py:65:5: A003 Class attribute `filter` is shadowing a Python builtin
+ zerver/lib/logging_util.py:65:9: A003 Class attribute `filter` is shadowing a Python builtin
</code></pre>
</p>

Rules changed: 3

<p>| Rule | Changes | Additions | Removals |
| ---- | ------- | --------- | -------- |
| A003 | 92 | 46 | 46 |
| A001 | 14 | 7 | 7 |
| I001 | 2 | 2 | 0 |</p>
Benchmark
Linux
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.05     15.7¬±0.03ms     2.6 MB/sec    1.00     15.0¬±0.15ms     2.7 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.03      3.8¬±0.00ms     4.4 MB/sec    1.00      3.7¬±0.01ms     4.6 MB/sec
linter/all-rules/numpy/globals.py          1.02    377.0¬±1.48¬µs     7.8 MB/sec    1.00    369.7¬±1.34¬µs     8.0 MB/sec
linter/all-rules/pydantic/types.py         1.05      6.5¬±0.01ms     3.9 MB/sec    1.00      6.2¬±0.01ms     4.1 MB/sec
linter/default-rules/large/dataset.py      1.12      8.2¬±0.01ms     5.0 MB/sec    1.00      7.3¬±0.01ms     5.5 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.08   1665.4¬±2.45¬µs    10.0 MB/sec    1.00   1540.4¬±5.81¬µs    10.8 MB/sec
linter/default-rules/numpy/globals.py      1.06    174.9¬±0.42¬µs    16.9 MB/sec    1.00    164.3¬±0.48¬µs    18.0 MB/sec
linter/default-rules/pydantic/types.py     1.09      3.6¬±0.01ms     7.1 MB/sec    1.00      3.3¬±0.01ms     7.7 MB/sec
parser/large/dataset.py                    1.00      5.7¬±0.00ms     7.1 MB/sec    1.03      5.9¬±0.01ms     6.9 MB/sec
parser/numpy/ctypeslib.py                  1.00   1117.7¬±0.96¬µs    14.9 MB/sec    1.02   1143.5¬±0.81¬µs    14.6 MB/sec
parser/numpy/globals.py                    1.00    113.4¬±0.86¬µs    26.0 MB/sec    1.04    118.1¬±0.42¬µs    25.0 MB/sec
parser/pydantic/types.py                   1.00      2.4¬±0.00ms    10.5 MB/sec    1.03      2.5¬±0.00ms    10.2 MB/sec
</code></pre>
Windows
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.02     15.2¬±0.05ms     2.7 MB/sec    1.00     14.9¬±0.08ms     2.7 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.01      3.6¬±0.01ms     4.7 MB/sec    1.00      3.5¬±0.02ms     4.7 MB/sec
linter/all-rules/numpy/globals.py          1.00    385.4¬±1.26¬µs     7.7 MB/sec    1.01   388.4¬±10.74¬µs     7.6 MB/sec
linter/all-rules/pydantic/types.py         1.01      6.2¬±0.02ms     4.1 MB/sec    1.00      6.1¬±0.03ms     4.2 MB/sec
linter/default-rules/large/dataset.py      1.06      7.9¬±0.07ms     5.2 MB/sec    1.00      7.4¬±0.03ms     5.5 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.04   1552.4¬±9.66¬µs    10.7 MB/sec    1.00   1486.8¬±6.52¬µs    11.2 MB/sec
linter/default-rules/numpy/globals.py      1.03    168.5¬±1.20¬µs    17.5 MB/sec    1.00    164.0¬±1.21¬µs    18.0 MB/sec
linter/default-rules/pydantic/types.py     1.05      3.4¬±0.02ms     7.5 MB/sec    1.00      3.2¬±0.03ms     7.9 MB/sec
parser/large/dataset.py                    1.00      6.1¬±0.01ms     6.6 MB/sec    1.00      6.1¬±0.03ms     6.6 MB/sec
parser/numpy/ctypeslib.py                  1.00   1138.0¬±2.80¬µs    14.6 MB/sec    1.00   1135.5¬±4.32¬µs    14.7 MB/sec
parser/numpy/globals.py                    1.00    116.4¬±0.36¬µs    25.4 MB/sec    1.01    117.6¬±0.69¬µs    25.1 MB/sec
parser/pydantic/types.py                   1.00      2.6¬±0.01ms    10.0 MB/sec    1.00      2.6¬±0.03ms     9.9 MB/sec
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-05-19 12:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_python_ast/src/helpers.rs</code>:1092 on 2023-05-19 12:53</div>
            <div class="timeline-body"><p>Thanks, this is what I was going to point out :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-05-19 12:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-05-19 12:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-22 11:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-22 11:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-22 13:14</div>
            <div class="timeline-body"><p>I need to look into the ecosystem changes. They look suspicious</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-22 15:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-22 15:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-05-22 15:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:53:45 UTC
    </footer>
</body>
</html>
