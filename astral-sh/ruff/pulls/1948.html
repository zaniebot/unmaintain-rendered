<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Restrict SIM105 to try blocks with a body of one simple statement - astral-sh/ruff #1948</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Restrict SIM105 to try blocks with a body of one simple statement</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1948">#1948</a>
        opened by <a href="https://github.com/andersk">@andersk</a>
        on 2023-01-18 05:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/andersk">@andersk</a></div>
            <div class="timeline-body"><p>If a <code>try</code> block has multiple statements, a compound statement, or control flow, rewriting it with <code>contextlib.suppress</code> would obfuscate the fact that the exception still short-circuits further statements in the block.</p>
<p>Fixes #1947.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-01-18 05:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-18 05:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-01-18 05:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-02-14 06:10</div>
            <div class="timeline-body"><p>Could you give an example of how <code>contextlib.suppress</code> would obfuscate this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andersk">@andersk</a> on 2023-02-14 06:15</div>
            <div class="timeline-body"><p>I gave an example in #1947.</p>
<pre><code class="language-python">for i in range(1, 100):
    try:
        realm.string_id = prefix + str(i)
        realm.save(update_fields=[&quot;string_id&quot;])
        break
    except IntegrityError:
        pass
else:
    raise RuntimeError(f&quot;Unable to find a good string_id for realm {realm}&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-02-14 06:18</div>
            <div class="timeline-body"><p>Ah, my bad I didn't see the issue. Thanks.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:55:36 UTC
    </footer>
</body>
</html>
