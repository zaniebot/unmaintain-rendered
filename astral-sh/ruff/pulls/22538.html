<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[flake8_bugbear] fix: improve docs for `no_explicit_stacklevel` - astral-sh/ruff #22538</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[flake8_bugbear] fix: improve docs for <code>no_explicit_stacklevel</code></h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/pull/22538">#22538</a>
        opened by <a href="https://github.com/caiquejjx">@caiquejjx</a>
        on 2026-01-12 18:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/caiquejjx">@caiquejjx</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Closes #22395</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dylwil3">@dylwil3</a> on <code>crates/ruff_linter/src/rules/flake8_bugbear/rules/no_explicit_stacklevel.rs</code>:20 on 2026-01-12 19:15</div>
            <div class="timeline-body"><p>The option to use <code>skip_file_prefixes</code> is only available for Python versions 3.12 and higher. So maybe more like:</p>
<pre><code>/// more context about the warning. 
/// 
/// In Python 3.12 and higher, one may also use `skip_file_prefixes` to specify
/// which file prefixes are ignored when counting the stack level. This implicitly overrides the `stacklevel` to be
/// at least 2, according to the [Python documentation].
</code></pre>
<p>and then add a link to https://docs.python.org/3/library/warnings.html#warnings.warn at the bottom.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dylwil3">@dylwil3</a> on <code>crates/ruff_linter/src/rules/flake8_bugbear/rules/no_explicit_stacklevel.rs</code>:55 on 2026-01-12 19:16</div>
            <div class="timeline-body"><p>I think we can just leave this fix title. It's still the case that we want the stacklevel to be at least 2, and it just happens to be the case that there's another way to achieve that. This also means we don't have to give a different message depending on the Python version.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dylwil3">@dylwil3</a> on <code>crates/ruff_linter/src/rules/flake8_bugbear/rules/no_explicit_stacklevel.rs</code>:51 on 2026-01-12 19:18</div>
            <div class="timeline-body"><p>I don't think we need to mention <code>skip_file_prefixes</code> here, especially because it is version-dependent. (I think it is also sort of an &quot;accidental&quot; solution to the problem being linted for here.)</p>
<pre><code class="language-suggestion">        &quot;No explicit `stacklevel` provided&quot;.to_string()
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dylwil3">@dylwil3</a> requested changes on 2026-01-12 19:18</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 20:16:47 UTC
    </footer>
</body>
</html>
