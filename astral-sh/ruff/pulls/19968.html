<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `full` output format changes to the changelog - astral-sh/ruff #19968</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>full</code> output format changes to the changelog</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19968">#19968</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-08-18 13:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-18 13:06</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>I thought this might warrant a small blog-style writeup, especially since we already got a question about it (#19966), but I'm happy to switch back to a one-liner under <code>### Other changes</code> if preferred.</p>
<p>I'll copy whatever we add here to the release notes too.</p>
<p>Do we need a note at the top about the late addition?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">release</span> added by @ntBre on 2025-08-18 13:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @ntBre on 2025-08-18 13:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @ntBre on 2025-08-18 13:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-08-18 13:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>CHANGELOG.md</code>:5 on 2025-08-18 13:48</div>
            <div class="timeline-body"><p>I think this headline is a bit confusing because it suggests that we now use an entirely different output format, and that users have the option to switch back to the old format. However, this is not the case.</p>
<p>I think I'd phrase it something like: *Improvements to rendering of <code>full</code> output format.</p>
<p>I'm also a bit torn on the blog-like write-up. The prominence of the change now suggests that this should have been part of a minor release. On the other hand, I do think it's useful for users to understand the change.</p>
<p>It's a bit unfortunate that https://github.com/astral-sh/ruff/pull/19900 landed right after the release. It would have allowed us to use it as an example and explain the entire change as part of an improved rendering for F811.</p>
<p>What we could try to make it less sound like a breaking change (which it isn't, because we don't consider the exact output of full to be under semver), is to set the focus on what this will enable in the future (multifile diagnostics too). As far as the format changes go, the only change I would mention is that the file name is now rendered on a separate line.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-08-18 14:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>CHANGELOG.md</code>:5 on 2025-08-18 14:26</div>
            <div class="timeline-body"><p>Updated the headline! (locally)</p>
<p>I know what you mean about the write-up. I think uv includes more text in some of their release notes, but for Ruff this is exclusive to the minor releases, so this might give the wrong idea. I could shorten the section substantially and/or move it to a sub-bullet in <code>### Other changes</code> if that would help. It would certainly be less prominent:</p>
<h3>Other changes</h3>
<ul>
<li><p>...</p>
</li>
<li><p>Improve rendering of the <code>full</code> output format (<a href="https://github.com/astral-sh/ruff/pull/19415">#19415</a>)
Ruff now uses the same default diagnostic format as ty. Below is an example diff for <a href="https://docs.astral.sh/ruff/rules/unused-import/"><code>F401</code></a>:</p>
<pre><code class="language-diff">-unused.py:8:19: F401 [*] `pathlib` imported but unused
+F401 [*] `pathlib` imported but unused
+  --&gt; unused.py:8:19
    |
  7 | # Unused, _not_ marked as required (due to the alias).
  8 | import pathlib as non_alias
-   |                   ^^^^^^^^^ F401
+   |                   ^^^^^^^^^
  9 |
 10 | # Unused, marked as required.
    |
-   = help: Remove unused import: `pathlib`
+help: Remove unused import: `pathlib`
</code></pre>
<p>For now, the primary change is in the header, but this new representation will allow us to make further additions to Ruff's diagnostics, such as adding sub-diagnostics and multiple annotations to the same snippet.</p>
</li>
</ul>
<hr>

<p>Or would it be more helpful to omit the diff and only show the new F811 diagnostic? And agreed that it would have been nice to include both, I somehow didn't quite realize that this was going out in the last release and without the F811 PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-08-18 14:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>CHANGELOG.md</code>:5 on 2025-08-18 14:33</div>
            <div class="timeline-body"><p>Moving it under Other makes sense to me. It makes it less prominent (while still prominent enough). I would omit the mention of ty, most users won't be familiar with it and it's unclear why it even matters for them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-08-18 15:21</div>
            <div class="timeline-body"><p>Nice, I like this a lot</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add a section on the new diagnostic format" to "Add `full` output format changes to the changelog" by @ntBre on 2025-08-18 15:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @ntBre on 2025-08-18 15:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-08-18 15:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-08-18 15:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 17:52:44 UTC
    </footer>
</body>
</html>
