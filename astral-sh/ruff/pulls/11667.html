<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] infer_symbol_public_type infers union of all definitions - astral-sh/ruff #11667</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] infer_symbol_public_type infers union of all definitions</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11667">#11667</a>
        opened by <a href="https://github.com/carljm">@carljm</a>
        on 2024-06-01 00:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/carljm">@carljm</a> on 2024-06-01 00:06</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Rename <code>infer_symbol_type</code> to <code>infer_symbol_public_type</code>, and allow it to work on symbols with more than one definition. For now, use the most cautious/sound inference, which is the union of all definitions. We can prune this union more in future by eliminating definitions if we can show that they can't be visible (this requires both that the symbol is definitely later reassigned, and that there is no intervening call/import that might be able to see the over-written definition).</p>
<h2>Test Plan</h2>
<p>Added a test showing inference of union from multiple definitions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @carljm on 2024-06-01 00:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @carljm on 2024-06-01 00:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2024-06-01 00:11</div>
            <div class="timeline-body"><h2><a href="https://codspeed.io/astral-sh/ruff/branches/carljm:cfg">CodSpeed Performance Report</a></h2>
<h3>Merging #11667 will <strong>improve performances by 11.01%</strong></h3>
<p><sub>Comparing <code>carljm:cfg</code> (18a64d8) with <code>main</code> (b80bf22)</sub></p>
<h3>Summary</h3>
<p><code>⚡ 1</code> improvements
<code>✅ 29</code> untouched benchmarks</p>
<h3>Benchmarks breakdown</h3>
<p>|     | Benchmark | <code>main</code> | <code>carljm:cfg</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| ⚡ | <code>parser[numpy/ctypeslib.py]</code> | 1.2 ms | 1 ms | +11.01% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-06-01 00:20</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @carljm on 2024-06-01 01:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2024-06-01 01:57</div>
            <div class="timeline-body"><p>Closing in favor of https://github.com/astral-sh/ruff/pull/11669, which uses a source branch in the Astral repo instead of my own repo; this lets me stack PRs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @carljm on 2024-06-01 01:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-06-01 01:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 21:56:32 UTC
    </footer>
</body>
</html>
