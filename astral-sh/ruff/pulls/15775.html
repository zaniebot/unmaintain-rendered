<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[minor] Simplify some `ExprStringLiteral` creation logic - astral-sh/ruff #15775</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[minor] Simplify some <code>ExprStringLiteral</code> creation logic</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/15775">#15775</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-01-27 18:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a></div>
            <div class="timeline-body">Summary
<p>A couple of minor opportunities for simplification that I spotted as a result of reviewing <a href="https://github.com/astral-sh/ruff/pull/15726">astral-sh/ruff#15726</a></p>
Test Plan
<p><code>cargo test</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-01-27 18:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-01-27 18:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-01-27 18:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-01-27 18:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-27 18:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-01-27 18:53</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+15 -15 violations, +0 -0 fixes in 4 projects; 51 projects unchanged)</p>
<a href="https://github.com/apache/airflow">apache/airflow</a> (+2 -2 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/apache/airflow/blob/f6b05fe243c17ffb80a4d2497fa7849f27ea507e/dev/breeze/src/airflow_breeze/global_constants.py#L591">dev/breeze/src/airflow_breeze/global_constants.py:591:25:</a> FLY002 Consider `&quot;common.compat cncf.kubernetes&quot;` instead of string join
- <a href="https://github.com/apache/airflow/blob/f6b05fe243c17ffb80a4d2497fa7849f27ea507e/dev/breeze/src/airflow_breeze/global_constants.py#L591">dev/breeze/src/airflow_breeze/global_constants.py:591:25:</a> FLY002 Consider `&#x27;common.compat cncf.kubernetes&#x27;` instead of string join
- <a href="https://github.com/apache/airflow/blob/f6b05fe243c17ffb80a4d2497fa7849f27ea507e/providers/src/airflow/providers/google/suite/hooks/drive.py#L194">providers/src/airflow/providers/google/suite/hooks/drive.py:194:13:</a> SIM108 Use ternary operator `path = f&quot;{file_info[&#x27;name&#x27;]}&quot; if current_file_id == file_id else f&quot;{file_info[&#x27;name&#x27;]}/{path}&quot;` instead of `if`-`else`-block
+ <a href="https://github.com/apache/airflow/blob/f6b05fe243c17ffb80a4d2497fa7849f27ea507e/providers/src/airflow/providers/google/suite/hooks/drive.py#L194">providers/src/airflow/providers/google/suite/hooks/drive.py:194:13:</a> SIM108 Use ternary operator `path = f&#x27;{file_info[&quot;name&quot;]}&#x27; if current_file_id == file_id else f&#x27;{file_info[&quot;name&quot;]}/{path}&#x27;` instead of `if`-`else`-block
</pre>

</p>

<a href="https://github.com/binary-husky/gpt_academic">binary-husky/gpt_academic</a> (+3 -3 violations, +0 -0 fixes)
<p>

<pre>
- <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/crazy_functions/diagram_fns/file_tree.py#L22">crazy_functions/diagram_fns/file_tree.py:22:9:</a> SIM108 Use ternary operator `suf = &quot;...&quot; if len(comment) &gt; self.comment_maxlen_show else &quot;&quot;` instead of `if`-`else`-block
+ <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/crazy_functions/diagram_fns/file_tree.py#L22">crazy_functions/diagram_fns/file_tree.py:22:9:</a> SIM108 Use ternary operator `suf = &#x27;...&#x27; if len(comment) &gt; self.comment_maxlen_show else &#x27;&#x27;` instead of `if`-`else`-block
+ <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/main.py#L139">main.py:139:39:</a> SIM401 Use `functional[k].get(&quot;Color&quot;, &quot;secondary&quot;)` instead of an `if` block
- <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/main.py#L139">main.py:139:39:</a> SIM401 Use `functional[k].get(&#x27;Color&#x27;, &#x27;secondary&#x27;)` instead of an `if` block
- <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/request_llms/bridge_taichu.py#L12">request_llms/bridge_taichu.py:12:5:</a> SIM103 Return the condition `not TAICHU_API_KEY == &quot;&quot;` directly
+ <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/request_llms/bridge_taichu.py#L12">request_llms/bridge_taichu.py:12:5:</a> SIM103 Return the condition `not TAICHU_API_KEY == &#x27;&#x27;` directly
</pre>

</p>

<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+9 -9 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ examples/output/jupyter/push_notebook/Numba Image Example.ipynb:cell 20:1:10: RUF005 Consider `[&quot;none&quot;, *sorted(kernels.keys())]` instead of concatenation
- examples/output/jupyter/push_notebook/Numba Image Example.ipynb:cell 20:1:10: RUF005 Consider `[&#x27;none&#x27;, *sorted(kernels.keys())]` instead of concatenation
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/file_output.py#L134">src/bokeh/command/subcommands/file_output.py:134:9:</a> SIM108 Use ternary operator `base = &quot;index&quot; if route == &quot;/&quot; else route[1:]` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/file_output.py#L134">src/bokeh/command/subcommands/file_output.py:134:9:</a> SIM108 Use ternary operator `base = &#x27;index&#x27; if route == &#x27;/&#x27; else route[1:]` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/core/json_encoder.py#L153">src/bokeh/core/json_encoder.py:153:5:</a> SIM108 Use ternary operator `separators = (&quot;,&quot;, &quot;: &quot;) if pretty else (&quot;,&quot;, &quot;:&quot;)` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/core/json_encoder.py#L153">src/bokeh/core/json_encoder.py:153:5:</a> SIM108 Use ternary operator `separators = (&#x27;,&#x27;, &#x27;: &#x27;) if pretty else (&#x27;,&#x27;, &#x27;:&#x27;)` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L105">src/bokeh/plotting/_graph.py:105:5:</a> SIM108 Use ternary operator `sedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&quot;edge_selection_&quot;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_selection_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L105">src/bokeh/plotting/_graph.py:105:5:</a> SIM108 Use ternary operator `sedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&#x27;edge_selection_&#x27;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_selection_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L110">src/bokeh/plotting/_graph.py:110:5:</a> SIM108 Use ternary operator `hedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&quot;edge_hover_&quot;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L110">src/bokeh/plotting/_graph.py:110:5:</a> SIM108 Use ternary operator `hedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&#x27;edge_hover_&#x27;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L93">src/bokeh/plotting/_graph.py:93:5:</a> SIM108 Use ternary operator `hnode_visuals = pop_visuals(marker_type, kwargs, prefix=&quot;node_hover_&quot;, defaults=node_visuals) if any(x.startswith(&#x27;node_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L93">src/bokeh/plotting/_graph.py:93:5:</a> SIM108 Use ternary operator `hnode_visuals = pop_visuals(marker_type, kwargs, prefix=&#x27;node_hover_&#x27;, defaults=node_visuals) if any(x.startswith(&#x27;node_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/tornado.py#L414">src/bokeh/server/tornado.py:414:17:</a> SIM108 Use ternary operator `route = p[0] if key == &quot;/&quot; else key + p[0]` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/tornado.py#L414">src/bokeh/server/tornado.py:414:17:</a> SIM108 Use ternary operator `route = p[0] if key == &#x27;/&#x27; else key + p[0]` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/util/compiler.py#L253">src/bokeh/util/compiler.py:253:13:</a> SIM108 Use ternary operator `impl = FromFile(impl if isabs(impl) else join(self.path, impl)) if &quot;\n&quot; not in impl and impl.endswith(exts) else TypeScript(impl)` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/util/compiler.py#L253">src/bokeh/util/compiler.py:253:13:</a> SIM108 Use ternary operator `impl = FromFile(impl if isabs(impl) else join(self.path, impl)) if &#x27;\n&#x27; not in impl and impl.endswith(exts) else TypeScript(impl)` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/support/util/examples.py#L217">tests/support/util/examples.py:217:9:</a> SIM108 Use ternary operator `example_type = getattr(Flags, example[&quot;type&quot;]) if example.get(&quot;type&quot;) is not None else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/support/util/examples.py#L217">tests/support/util/examples.py:217:9:</a> SIM108 Use ternary operator `example_type = getattr(Flags, example[&#x27;type&#x27;]) if example.get(&#x27;type&#x27;) is not None else None` instead of `if`-`else`-block
... 1 additional changes omitted for rule SIM108
</pre>

</p>

<a href="https://github.com/zulip/zulip">zulip/zulip</a> (+1 -1 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/zulip/zulip/blob/32f9ee7a62cdeb9cca5b694dc0fdb805dbcbff87/scripts/lib/sharding.py#L65">scripts/lib/sharding.py:65:21:</a> SIM108 Use ternary operator `host = shard if &quot;.&quot; in shard else f&#x27;{shard}.{external_host}&#x27;` instead of `if`-`else`-block
- <a href="https://github.com/zulip/zulip/blob/32f9ee7a62cdeb9cca5b694dc0fdb805dbcbff87/scripts/lib/sharding.py#L65">scripts/lib/sharding.py:65:21:</a> SIM108 Use ternary operator `host = shard if &#x27;.&#x27; in shard else f&#x27;{shard}.{external_host}&#x27;` instead of `if`-`else`-block
</pre>

</p>

Changes by rule (5 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| SIM108 | 22 | 11 | 11 | 0 | 0 |
| FLY002 | 2 | 1 | 1 | 0 | 0 |
| SIM401 | 2 | 1 | 1 | 0 | 0 |
| SIM103 | 2 | 1 | 1 | 0 | 0 |
| RUF005 | 2 | 1 | 1 | 0 | 0 |</p>
</p>


Linter (preview)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+71 -71 violations, +0 -0 fixes in 4 projects; 51 projects unchanged)</p>
<a href="https://github.com/apache/airflow">apache/airflow</a> (+2 -2 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/apache/airflow/blob/f6b05fe243c17ffb80a4d2497fa7849f27ea507e/dev/breeze/src/airflow_breeze/global_constants.py#L591">dev/breeze/src/airflow_breeze/global_constants.py:591:25:</a> FLY002 Consider `&quot;common.compat cncf.kubernetes&quot;` instead of string join
- <a href="https://github.com/apache/airflow/blob/f6b05fe243c17ffb80a4d2497fa7849f27ea507e/dev/breeze/src/airflow_breeze/global_constants.py#L591">dev/breeze/src/airflow_breeze/global_constants.py:591:25:</a> FLY002 Consider `&#x27;common.compat cncf.kubernetes&#x27;` instead of string join
- <a href="https://github.com/apache/airflow/blob/f6b05fe243c17ffb80a4d2497fa7849f27ea507e/providers/src/airflow/providers/google/suite/hooks/drive.py#L194">providers/src/airflow/providers/google/suite/hooks/drive.py:194:13:</a> SIM108 Use ternary operator `path = f&quot;{file_info[&#x27;name&#x27;]}&quot; if current_file_id == file_id else f&quot;{file_info[&#x27;name&#x27;]}/{path}&quot;` instead of `if`-`else`-block
+ <a href="https://github.com/apache/airflow/blob/f6b05fe243c17ffb80a4d2497fa7849f27ea507e/providers/src/airflow/providers/google/suite/hooks/drive.py#L194">providers/src/airflow/providers/google/suite/hooks/drive.py:194:13:</a> SIM108 Use ternary operator `path = f&#x27;{file_info[&quot;name&quot;]}&#x27; if current_file_id == file_id else f&#x27;{file_info[&quot;name&quot;]}/{path}&#x27;` instead of `if`-`else`-block
</pre>

</p>

<a href="https://github.com/binary-husky/gpt_academic">binary-husky/gpt_academic</a> (+3 -3 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
- <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/crazy_functions/diagram_fns/file_tree.py#L22">crazy_functions/diagram_fns/file_tree.py:22:9:</a> SIM108 Use ternary operator `suf = &quot;...&quot; if len(comment) &gt; self.comment_maxlen_show else &quot;&quot;` instead of `if`-`else`-block
+ <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/crazy_functions/diagram_fns/file_tree.py#L22">crazy_functions/diagram_fns/file_tree.py:22:9:</a> SIM108 Use ternary operator `suf = &#x27;...&#x27; if len(comment) &gt; self.comment_maxlen_show else &#x27;&#x27;` instead of `if`-`else`-block
+ <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/main.py#L139">main.py:139:39:</a> SIM401 Use `functional[k].get(&quot;Color&quot;, &quot;secondary&quot;)` instead of an `if` block
- <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/main.py#L139">main.py:139:39:</a> SIM401 Use `functional[k].get(&#x27;Color&#x27;, &#x27;secondary&#x27;)` instead of an `if` block
- <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/request_llms/bridge_taichu.py#L12">request_llms/bridge_taichu.py:12:5:</a> SIM103 Return the condition `TAICHU_API_KEY != &quot;&quot;` directly
+ <a href="https://github.com/binary-husky/gpt_academic/blob/1213ef19e5e3d016e5a6cb73e007bc70bef98bb8/request_llms/bridge_taichu.py#L12">request_llms/bridge_taichu.py:12:5:</a> SIM103 Return the condition `TAICHU_API_KEY != &#x27;&#x27;` directly
</pre>

</p>

<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+65 -65 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/output/apis/components_themed.py#L89">examples/output/apis/components_themed.py:89:6:</a> FURB103 `open` and `write` should be replaced by `Path(filename).write_text(html, encoding=&quot;utf-8&quot;)`
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/output/apis/components_themed.py#L89">examples/output/apis/components_themed.py:89:6:</a> FURB103 `open` and `write` should be replaced by `Path(filename).write_text(html, encoding=&#x27;utf-8&#x27;)`
+ examples/output/jupyter/push_notebook/Numba Image Example.ipynb:cell 20:1:10: RUF005 Consider `[&quot;none&quot;, *sorted(kernels.keys())]` instead of concatenation
- examples/output/jupyter/push_notebook/Numba Image Example.ipynb:cell 20:1:10: RUF005 Consider `[&#x27;none&#x27;, *sorted(kernels.keys())]` instead of concatenation
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/movies/main.py#L28">examples/server/app/movies/main.py:28:6:</a> FURB101 `open` and `read` should be replaced by `Path(join(dirname(__file__), &quot;razzies-clean.csv&quot;)).read_text()`
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/movies/main.py#L28">examples/server/app/movies/main.py:28:6:</a> FURB101 `open` and `read` should be replaced by `Path(join(dirname(__file__), &#x27;razzies-clean.csv&#x27;)).read_text()`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/movies/main.py#L83">examples/server/app/movies/main.py:83:25:</a> PLC1901 `director_val != &quot;&quot;` can be simplified to `director_val` as an empty string is falsey
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/movies/main.py#L83">examples/server/app/movies/main.py:83:25:</a> PLC1901 `director_val != &#x27;&#x27;` can be simplified to `director_val` as an empty string is falsey
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/movies/main.py#L85">examples/server/app/movies/main.py:85:21:</a> PLC1901 `cast_val != &quot;&quot;` can be simplified to `cast_val` as an empty string is falsey
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/movies/main.py#L85">examples/server/app/movies/main.py:85:21:</a> PLC1901 `cast_val != &#x27;&#x27;` can be simplified to `cast_val` as an empty string is falsey
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/application/handlers/directory.py#L123">src/bokeh/application/handlers/directory.py:123:18:</a> FURB101 `open` and `read` should be replaced by `Path(init_py).read_text(encoding=&quot;utf8&quot;)`
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/application/handlers/directory.py#L123">src/bokeh/application/handlers/directory.py:123:18:</a> FURB101 `open` and `read` should be replaced by `Path(init_py).read_text(encoding=&#x27;utf8&#x27;)`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/file_output.py#L134">src/bokeh/command/subcommands/file_output.py:134:9:</a> SIM108 Use ternary operator `base = &quot;index&quot; if route == &quot;/&quot; else route[1:]` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/file_output.py#L134">src/bokeh/command/subcommands/file_output.py:134:9:</a> SIM108 Use ternary operator `base = &#x27;index&#x27; if route == &#x27;/&#x27; else route[1:]` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/file_output.py#L175">src/bokeh/command/subcommands/file_output.py:175:22:</a> FURB103 `open` and `write` should be replaced by `Path(filename).write_text(content, encoding=&quot;utf-8&quot;)`
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/file_output.py#L175">src/bokeh/command/subcommands/file_output.py:175:22:</a> FURB103 `open` and `write` should be replaced by `Path(filename).write_text(content, encoding=&#x27;utf-8&#x27;)`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/core/json_encoder.py#L153">src/bokeh/core/json_encoder.py:153:5:</a> SIM108 Use ternary operator `separators = (&quot;,&quot;, &quot;: &quot;) if pretty else (&quot;,&quot;, &quot;:&quot;)` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/core/json_encoder.py#L153">src/bokeh/core/json_encoder.py:153:5:</a> SIM108 Use ternary operator `separators = (&#x27;,&#x27;, &#x27;: &#x27;) if pretty else (&#x27;,&#x27;, &#x27;:&#x27;)` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/io/export.py#L264">src/bokeh/io/export.py:264:14:</a> FURB103 `open` and `write` should be replaced by `Path(tmp.path).write_text(html, encoding=&quot;utf-8&quot;)`
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/io/export.py#L264">src/bokeh/io/export.py:264:14:</a> FURB103 `open` and `write` should be replaced by `Path(tmp.path).write_text(html, encoding=&#x27;utf-8&#x27;)`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/io/export.py#L294">src/bokeh/io/export.py:294:14:</a> FURB103 `open` and `write` should be replaced by `Path(tmp.path).write_text(html, encoding=&quot;utf-8&quot;)`
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/io/export.py#L294">src/bokeh/io/export.py:294:14:</a> FURB103 `open` and `write` should be replaced by `Path(tmp.path).write_text(html, encoding=&#x27;utf-8&#x27;)`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/io/export.py#L311">src/bokeh/io/export.py:311:14:</a> FURB103 `open` and `write` should be replaced by `Path(tmp.path).write_text(html, encoding=&quot;utf-8&quot;)`
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/io/export.py#L311">src/bokeh/io/export.py:311:14:</a> FURB103 `open` and `write` should be replaced by `Path(tmp.path).write_text(html, encoding=&#x27;utf-8&#x27;)`
... 7 additional changes omitted for rule FURB103
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/models/callbacks.py#L200">src/bokeh/models/callbacks.py:200:14:</a> FURB101 `open` and `read` should be replaced by `Path(path).read_text(encoding=&quot;utf-8&quot;)`
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/models/callbacks.py#L200">src/bokeh/models/callbacks.py:200:14:</a> FURB101 `open` and `read` should be replaced by `Path(path).read_text(encoding=&#x27;utf-8&#x27;)`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L105">src/bokeh/plotting/_graph.py:105:5:</a> SIM108 Use ternary operator `sedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&quot;edge_selection_&quot;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_selection_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L105">src/bokeh/plotting/_graph.py:105:5:</a> SIM108 Use ternary operator `sedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&#x27;edge_selection_&#x27;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_selection_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L110">src/bokeh/plotting/_graph.py:110:5:</a> SIM108 Use ternary operator `hedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&quot;edge_hover_&quot;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L110">src/bokeh/plotting/_graph.py:110:5:</a> SIM108 Use ternary operator `hedge_visuals = pop_visuals(MultiLine, kwargs, prefix=&#x27;edge_hover_&#x27;, defaults=edge_visuals) if any(x.startswith(&#x27;edge_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L93">src/bokeh/plotting/_graph.py:93:5:</a> SIM108 Use ternary operator `hnode_visuals = pop_visuals(marker_type, kwargs, prefix=&quot;node_hover_&quot;, defaults=node_visuals) if any(x.startswith(&#x27;node_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_graph.py#L93">src/bokeh/plotting/_graph.py:93:5:</a> SIM108 Use ternary operator `hnode_visuals = pop_visuals(marker_type, kwargs, prefix=&#x27;node_hover_&#x27;, defaults=node_visuals) if any(x.startswith(&#x27;node_hover_&#x27;) for x in kwargs) else None` instead of `if`-`else`-block
... 7 additional changes omitted for rule SIM108
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_tools.py#L188">src/bokeh/plotting/_tools.py:188:20:</a> PLC1901 `tool == &quot;&quot;` can be simplified to `not tool` as an empty string is falsey
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/plotting/_tools.py#L188">src/bokeh/plotting/_tools.py:188:20:</a> PLC1901 `tool == &#x27;&#x27;` can be simplified to `not tool` as an empty string is falsey
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/sampledata/us_holidays.py#L79">src/bokeh/sampledata/us_holidays.py:79:10:</a> FURB101 `open` and `read` should be replaced by `Path(package_path(&quot;USHolidays.ics&quot;)).read_text()`
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/sampledata/us_holidays.py#L79">src/bokeh/sampledata/us_holidays.py:79:10:</a> FURB101 `open` and `read` should be replaced by `Path(package_path(&#x27;USHolidays.ics&#x27;)).read_text()`
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/util.py#L151">src/bokeh/server/util.py:151:28:</a> PLC1901 `parts[0] == &quot;&quot;` can be simplified to `not parts[0]` as an empty string is falsey
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/util.py#L151">src/bokeh/server/util.py:151:28:</a> PLC1901 `parts[0] == &#x27;&#x27;` can be simplified to `not parts[0]` as an empty string is falsey
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/util.py#L159">src/bokeh/server/util.py:159:28:</a> PLC1901 `parts[0] == &quot;&quot;` can be simplified to `not parts[0]` as an empty string is falsey
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/util.py#L159">src/bokeh/server/util.py:159:28:</a> PLC1901 `parts[0] == &#x27;&#x27;` can be simplified to `not parts[0]` as an empty string is falsey
... 77 additional changes omitted for rule PLC1901
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/util/compiler.py#L194">src/bokeh/util/compiler.py:194:14:</a> FURB101 `open` and `read` should be replaced by `Path(path).read_text(encoding=&quot;utf-8&quot;)`
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/util/compiler.py#L194">src/bokeh/util/compiler.py:194:14:</a> FURB101 `open` and `read` should be replaced by `Path(path).read_text(encoding=&#x27;utf-8&#x27;)`
... 1 additional changes omitted for rule FURB101
... 88 additional changes omitted for project
</pre>

</p>

<a href="https://github.com/zulip/zulip">zulip/zulip</a> (+1 -1 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/zulip/zulip/blob/32f9ee7a62cdeb9cca5b694dc0fdb805dbcbff87/scripts/lib/sharding.py#L65">scripts/lib/sharding.py:65:21:</a> SIM108 Use ternary operator `host = shard if &quot;.&quot; in shard else f&#x27;{shard}.{external_host}&#x27;` instead of `if`-`else`-block
- <a href="https://github.com/zulip/zulip/blob/32f9ee7a62cdeb9cca5b694dc0fdb805dbcbff87/scripts/lib/sharding.py#L65">scripts/lib/sharding.py:65:21:</a> SIM108 Use ternary operator `host = shard if &#x27;.&#x27; in shard else f&#x27;{shard}.{external_host}&#x27;` instead of `if`-`else`-block
</pre>

</p>

Changes by rule (8 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PLC1901 | 86 | 43 | 43 | 0 | 0 |
| SIM108 | 22 | 11 | 11 | 0 | 0 |
| FURB103 | 16 | 8 | 8 | 0 | 0 |
| FURB101 | 10 | 5 | 5 | 0 | 0 |
| FLY002 | 2 | 1 | 1 | 0 | 0 |
| SIM401 | 2 | 1 | 1 | 0 | 0 |
| SIM103 | 2 | 1 | 1 | 0 | 0 |
| RUF005 | 2 | 1 | 1 | 0 | 0 |</p>
</p>


Formatter (stable)
<p>✅ ecosystem check detected no format changes.</p>
Formatter (preview)
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:10:53 UTC
    </footer>
</body>
</html>
