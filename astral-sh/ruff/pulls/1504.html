<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix detection of changed imports in isort plugin - astral-sh/ruff #1504</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fix detection of changed imports in isort plugin</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1504">#1504</a>
        opened by <a href="https://github.com/squiddy">@squiddy</a>
        on 2022-12-31 08:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/squiddy">@squiddy</a></div>
            <div class="timeline-body"><p>With the correct handling of line endings recently introduced, the isort plugin got into an endless loop because the check whether something was changed made incorrect assumptions.</p>
<p>Specifically, <code>dedent</code> will rejoin the lines using LF. When compared to the source which may have CRLF or just CR, this condition will never be true, even if nothing visually actually changed.</p>
<p>An alternative solution would be to reimplement dedent and indent to be aware of the line endings. Something we eventually might have to do, as there are still some places that (incorrectly) assume line endings are always just LF.</p>
<p>Closes #1490</p>
<hr />
<p>When applied to #1501 this fixes the test failures.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-31 12:35</div>
            <div class="timeline-body"><p>Iiiinteresting, thank you, great find.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2022-12-31 12:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-12-31 12:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2022-12-31 12:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:55:19 UTC
    </footer>
</body>
</html>
