<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a specialized `StatementVisitor` - astral-sh/ruff #4349</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a specialized <code>StatementVisitor</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/4349">#4349</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-05-10 15:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-10 15:26</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR adds a specialized <code>StatementVisitor</code> trait that structs can implement in lieu of the generic <code>Visitor</code> when they only care about visiting statements (recursively). In many cases, we only care about visiting statements, and visiting the entire AST is thus quite wasteful, as expressions can't contain statements.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @charliermarsh on 2023-05-10 15:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/pyupgrade/rules/yield_in_for_loop.rs</code>:113 on 2023-05-10 15:30</div>
            <div class="timeline-body"><p>Just to confirm: It's intentional that the visitor now no longer recurses for expressions that are not explicitly listed in the deleted match statement?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/tryceratops/rules/type_check_without_type_error.rs</code>:72 on 2023-05-10 15:30</div>
            <div class="timeline-body"><p>Is it an intentional change that the visitor now no-longer recurses for any not-<code>ListComp</code>, <code>DictComp</code>, <code>SetComp</code>, or <code>Generator</code> expression?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2023-05-10 15:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/pyupgrade/rules/yield_in_for_loop.rs</code>:113 on 2023-05-10 15:33</div>
            <div class="timeline-body"><p>Yeah. I think this must've just been an oversight on my part, that those expressions couldn't contain statements anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-05-10 15:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-05-10 16:37</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>âœ… ecosystem check detected no changes.</p>
<!-- thollander/actions-comment-pull-request "PR Check Results" -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-05-10 16:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-05-10 16:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-05-10 16:42</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 03:50:41 UTC
    </footer>
</body>
</html>
