<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remove functor from autofix title - astral-sh/ruff #4245</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Remove functor from autofix title</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/4245">#4245</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2023-05-05 12:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><p>This PR renames the <code>autofix_title_functor</code> method to <code>autofix_title</code> and returns an <code>Option&lt;String&gt;</code> instead of a function.</p>
<p>The current implementation returned a functor because returning <code>Some</code> signaled whether the rule is autofixable, and the functor could then be used to generate the title. This is no longer necessary because we now use the presence of a <code>Fix</code> to determine whether a diagnostic is fixable or not.</p>
<p>This has the advantage that we can now also show this message as a suggestion for <code>Diagnostics</code> that are not autofixable.</p>
<p>My long-term goal is to have two different messages:</p>
<ul>
<li><code>Fix::message</code>: Title of the fix, what <code>autofix_title</code> is used for today. Moving it to the fix has the advantage that:<ul>
<li>The compiler enforces the presence of a message when creating a fix</li>
<li>Different fixes can have different titles</li>
</ul>
</li>
<li><code>Violation::advice</code>: Text shown to provide additional context/information specific to this violation. Ideally, it would be flexible enough to render rich context like code rames so that we, e.g. print the source of the first import for duplicated imports.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-05 12:46</div>
            <div class="timeline-body"><p>Current dependencies on/for this PR:</p>
<ul>
<li>main<ul>
<li><strong>PR #4239</strong> <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4239"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite"></a><ul>
<li><strong>PR #4245</strong> <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4245"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite"></a>  ðŸ‘ˆ</li>
<li><strong>PR #4191</strong> <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4191"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite"></a><ul>
<li><strong>PR #4192</strong> <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4192"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite"></a><ul>
<li><strong>PR #4193</strong> <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4193"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite"></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>This comment was auto-generated by <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4245?utm_source=stack-comment">Graphite</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-05 12:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-05-05 13:11</div>
            <div class="timeline-body">PR Check Results
Ecosystem
<p>âœ… ecosystem check detected no changes.</p>
Benchmark
Linux
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.00     14.7Â±0.03ms     2.8 MB/sec    1.00     14.7Â±0.03ms     2.8 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      3.6Â±0.00ms     4.7 MB/sec    1.00      3.6Â±0.01ms     4.7 MB/sec
linter/all-rules/numpy/globals.py          1.00    366.3Â±0.75Âµs     8.1 MB/sec    1.00    367.4Â±1.63Âµs     8.0 MB/sec
linter/all-rules/pydantic/types.py         1.00      6.2Â±0.03ms     4.1 MB/sec    1.00      6.2Â±0.03ms     4.1 MB/sec
linter/default-rules/large/dataset.py      1.00      7.4Â±0.01ms     5.5 MB/sec    1.00      7.4Â±0.01ms     5.5 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00   1540.2Â±1.58Âµs    10.8 MB/sec    1.00   1543.1Â±4.87Âµs    10.8 MB/sec
linter/default-rules/numpy/globals.py      1.00    166.1Â±0.26Âµs    17.8 MB/sec    1.00    166.7Â±0.82Âµs    17.7 MB/sec
linter/default-rules/pydantic/types.py     1.00      3.3Â±0.00ms     7.7 MB/sec    1.00      3.3Â±0.01ms     7.7 MB/sec
parser/large/dataset.py                    1.00      5.9Â±0.00ms     6.9 MB/sec    1.01      5.9Â±0.01ms     6.9 MB/sec
parser/numpy/ctypeslib.py                  1.00   1149.1Â±2.84Âµs    14.5 MB/sec    1.00   1149.5Â±0.79Âµs    14.5 MB/sec
parser/numpy/globals.py                    1.01    117.2Â±0.42Âµs    25.2 MB/sec    1.00    116.4Â±0.44Âµs    25.3 MB/sec
parser/pydantic/types.py                   1.00      2.5Â±0.00ms    10.2 MB/sec    1.00      2.5Â±0.00ms    10.2 MB/sec
</code></pre>
Windows
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.01     21.6Â±0.83ms  1930.7 KB/sec    1.00     21.4Â±0.70ms  1949.9 KB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      5.4Â±0.23ms     3.1 MB/sec    1.01      5.5Â±0.26ms     3.1 MB/sec
linter/all-rules/numpy/globals.py          1.00   640.6Â±32.92Âµs     4.6 MB/sec    1.01   645.1Â±31.96Âµs     4.6 MB/sec
linter/all-rules/pydantic/types.py         1.00      9.2Â±0.50ms     2.8 MB/sec    1.01      9.3Â±0.37ms     2.8 MB/sec
linter/default-rules/large/dataset.py      1.00     10.9Â±0.35ms     3.7 MB/sec    1.02     11.0Â±0.38ms     3.7 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00      2.3Â±0.11ms     7.2 MB/sec    1.01      2.3Â±0.10ms     7.2 MB/sec
linter/default-rules/numpy/globals.py      1.02   281.7Â±17.92Âµs    10.5 MB/sec    1.00   275.6Â±16.23Âµs    10.7 MB/sec
linter/default-rules/pydantic/types.py     1.00      4.9Â±0.21ms     5.2 MB/sec    1.01      5.0Â±0.26ms     5.1 MB/sec
parser/large/dataset.py                    1.04      9.4Â±0.42ms     4.4 MB/sec    1.00      9.0Â±0.28ms     4.5 MB/sec
parser/numpy/ctypeslib.py                  1.06  1831.1Â±76.14Âµs     9.1 MB/sec    1.00  1733.3Â±81.00Âµs     9.6 MB/sec
parser/numpy/globals.py                    1.00    176.1Â±9.46Âµs    16.8 MB/sec    1.00   176.3Â±11.04Âµs    16.7 MB/sec
parser/pydantic/types.py                   1.04      3.9Â±0.16ms     6.5 MB/sec    1.00      3.8Â±0.14ms     6.7 MB/sec
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-09 06:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-05-09 15:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-10 07:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-10 07:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-05-10 07:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:53:31 UTC
    </footer>
</body>
</html>
