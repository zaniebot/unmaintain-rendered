```yaml
number: 14383
title: Ruff 0.8
type: pull_request
state: merged
author: AlexWaygood
labels:
  - breaking
  - release
assignees: []
merged: true
base: main
head: ruff-0.8
created_at: 2024-11-16T18:05:34Z
updated_at: 2024-11-21T15:28:54Z
url: https://github.com/astral-sh/ruff/pull/14383
synced_at: 2026-01-12T15:55:47Z
```

# Ruff 0.8

---

_@AlexWaygood_

## Summary

- https://github.com/astral-sh/ruff/pull/14382
- https://github.com/astral-sh/ruff/pull/14401
- https://github.com/astral-sh/ruff/pull/14406
- https://github.com/astral-sh/ruff/pull/13896
- https://github.com/astral-sh/ruff/pull/14405
- https://github.com/astral-sh/ruff/pull/13902
- https://github.com/astral-sh/ruff/pull/13473
- https://github.com/astral-sh/ruff/pull/14438
- https://github.com/astral-sh/ruff/pull/14435
- https://github.com/astral-sh/ruff/pull/14384
- https://github.com/astral-sh/ruff/pull/14385
- #14428
- https://github.com/astral-sh/ruff/pull/14450
- https://github.com/astral-sh/ruff/pull/14462
- #14457
- https://github.com/astral-sh/ruff/pull/14468
- https://github.com/astral-sh/ruff/pull/14480

## Test Plan

- `cargo test`
- Ecosystem report


---

_Label `breaking` added by @AlexWaygood on 2024-11-16 18:05_

---

_Label `release` added by @AlexWaygood on 2024-11-16 18:05_

---

_Renamed from "[ruff 0.8] Remove deprecated rule UP027 (#14382)" to "Ruff 0.8 (#14382)" by @AlexWaygood on 2024-11-16 18:06_

---

_Renamed from "Ruff 0.8 (#14382)" to "Ruff 0.8" by @AlexWaygood on 2024-11-16 18:06_

---

_Label `do-not-merge` added by @AlexWaygood on 2024-11-16 18:10_

---

_Comment by @github-actions[bot] on 2024-11-16 18:19_

<!-- generated-comment ecosystem -->
## `ruff-ecosystem` results
### Linter (stable)
ℹ️ ecosystem check **detected linter changes**. (+1526 -711 violations, +0 -0 fixes in 30 projects; 24 projects unchanged)

<details><summary><a href="https://github.com/DisnakeDev/disnake">DisnakeDev/disnake</a> (+173 -0 violations, +0 -0 fixes)</summary>
<p>

<pre>
+ <a href='https://github.com/DisnakeDev/disnake/blob/ac5a936d187ff89d6756e5f33bf0b2965e7b7685/disnake/abc.py#L205'>disnake/abc.py:205:17:</a> RUF023 [*] `_Overwrites.__slots__` is not sorted
+ <a href='https://github.com/DisnakeDev/disnake/blob/ac5a936d187ff89d6756e5f33bf0b2965e7b7685/disnake/abc.py#L49'>disnake/abc.py:49:11:</a> RUF022 [*] `__all__` is not sorted
+ <a href='https://github.com/DisnakeDev/disnake/blob/ac5a936d187ff89d6756e5f33bf0b2965e7b7685/disnake/activity.py#L13'>disnake/activity.py:13:11:</a> RUF022 [*] `__all__` is not sorted
+ <a href='https://github.com/DisnakeDev/disnake/blob/ac5a936d187ff89d6756e5f33bf0b2965e7b7685/disnake/activity.py#L289'>disnake/activity.py:289:17:</a> RUF023 [*] `Activity.__slots__` is not sorted
+ <a href='https://github.com/DisnakeDev/disnake/blob/ac5a936d187ff89d6756e5f33bf0b2965e7b7685/disnake/activity.py#L530'>disnake/activity.py:530:17:</a> RUF023 [*] `Streaming.__slots__` is not sorted
+ <a href='https://github.com/DisnakeDev/disnake/blob/ac5a936d187ff89d6756e5f33bf0b2965e7b7685/disnake/activity.py#L619'>disnake/activity.py:619:17:</a> RUF023 [*] `Spotify.__slots__` is not sorted
+ <a href='https://github.com/DisnakeDev/disnake/blob/ac5a936d187ff89d6756e5f33bf0b2965e7b7685/disnake/activity.py#L803'>disnake/activity.py:803:17:</a> RUF023 [*] `CustomActivity.__slots__` is not sorted
+ <a href='https://github.com/DisnakeDev/disnake/blob/ac5a936d187ff89d6756e5f33bf0b2965e7b7685/disnake/app_commands.py#L1017'>disnake/app_commands.py:1017:17:</a> RUF023 [*] `ApplicationCommandPermissions.__slots__` is not sorted
... 113 additional changes omitted for rule RUF023
+ <a href='https://github.com/DisnakeDev/disnake/blob/ac5a936d187ff89d6756e5f33bf0b2965e7b7685/disnake/app_commands.py#L49'>disnake/app_commands.py:49:11:</a> RUF022 [*] `__all__` is not sorted
+ <a href='https://github.com/DisnakeDev/disnake/blob/ac5a936d187ff89d6756e5f33bf0b2965e7b7685/disnake/appinfo.py#L23'>disnake/appinfo.py:23:11:</a> RUF022 [*] `__all__` is not sorted
... 163 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/RasaHQ/rasa">RasaHQ/rasa</a> (+8 -0 violations, +0 -0 fixes)</summary>
<p>

<pre>
+ <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/rasa/cli/utils.py#L74'>rasa/cli/utils.py:74:27:</a> RUF021 [*] Parenthesize `a and b` expressions when chaining `and` and `or` together, to make the precedence clear
+ <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/rasa/core/processor.py#L587'>rasa/core/processor.py:587:17:</a> RUF021 [*] Parenthesize `a and b` expressions when chaining `and` and `or` together, to make the precedence clear
+ <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/rasa/shared/core/training_data/structures.py#L619'>rasa/shared/core/training_data/structures.py:619:17:</a> RUF021 [*] Parenthesize `a and b` expressions when chaining `and` and `or` together, to make the precedence clear
+ <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/rasa/shared/core/training_data/structures.py#L621'>rasa/shared/core/training_data/structures.py:621:20:</a> RUF021 [*] Parenthesize `a and b` expressions when chaining `and` and `or` together, to make the precedence clear
+ <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/rasa/utils/train_utils.py#L534'>rasa/utils/train_utils.py:534:9:</a> RUF021 [*] Parenthesize `a and b` expressions when chaining `and` and `or` together, to make the precedence clear
+ <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/rasa/utils/train_utils.py#L536'>rasa/utils/train_utils.py:536:12:</a> RUF021 [*] Parenthesize `a and b` expressions when chaining `and` and `or` together, to make the precedence clear
... 1 additional changes omitted for rule RUF021
+ <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/stubs/aio_pika/__init__.pyi#L23'>stubs/aio_pika/__init__.pyi:23:11:</a> RUF022 [*] `__all__` is not sorted
+ <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/stubs/sanic.pyi#L11'>stubs/sanic.pyi:11:11:</a> RUF022 [*] `__all__` is not sorted
</pre>

</p>
</details>
<details><summary><a href="https://github.com/Snowflake-Labs/snowcli">Snowflake-Labs/snowcli</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>

<pre>
+ <a href='https://github.com/Snowflake-Labs/snowcli/blob/fec22bb2845b438913c013681e5b3e4f85f7af02/performance_history_analysis.py#L24'>performance_history_analysis.py:24:18:</a> A004 Import `print` is shadowing a Python builtin
</pre>

</p>
</details>
<details><summary><a href="https://github.com/PlasmaPy/PlasmaPy">PlasmaPy/PlasmaPy</a> (+4 -0 violations, +0 -0 fixes)</summary>
<p>

<pre>
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b8f11cb46078eacb8cf33a5758fbe8f74b178ff/src/plasmapy/particles/_special_particles.py#L260'>src/plasmapy/particles/_special_particles.py:260:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b8f11cb46078eacb8cf33a5758fbe8f74b178ff/src/plasmapy/particles/decorators.py#L677'>src/plasmapy/particles/decorators.py:677:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b8f11cb46078eacb8cf33a5758fbe8f74b178ff/src/plasmapy/particles/ionization_state_collection.py#L479'>src/plasmapy/particles/ionization_state_collection.py:479:13:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b8f11cb46078eacb8cf33a5758fbe8f74b178ff/src/plasmapy/plasma/grids.py#L769'>src/plasmapy/plasma/grids.py:769:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+176 -115 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/__init__.py#L63'>airflow/__init__.py:63:11:</a> RUF022 [*] `__all__` is not sorted
+ <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/__main__.py#L25'>airflow/__main__.py:25:22:</a> TC003 Move standard library import `argparse.Namespace` into a type-checking block
- <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/__main__.py#L25'>airflow/__main__.py:25:22:</a> TCH003 Move standard library import `argparse.Namespace` into a type-checking block
+ <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_connexion/schemas/asset_schema.py#L19'>airflow/api_connexion/schemas/asset_schema.py:19:22:</a> TC003 Move standard library import `datetime.datetime` into a type-checking block
- <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_connexion/schemas/asset_schema.py#L19'>airflow/api_connexion/schemas/asset_schema.py:19:22:</a> TCH003 Move standard library import `datetime.datetime` into a type-checking block
+ <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_fastapi/common/parameters.py#L21'>airflow/api_fastapi/common/parameters.py:21:22:</a> TC003 Move standard library import `datetime.datetime` into a type-checking block
- <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_fastapi/common/parameters.py#L21'>airflow/api_fastapi/common/parameters.py:21:22:</a> TCH003 Move standard library import `datetime.datetime` into a type-checking block
+ <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_fastapi/common/router.py#L20'>airflow/api_fastapi/common/router.py:20:18:</a> TC003 Move standard library import `enum.Enum` into a type-checking block
- <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_fastapi/common/router.py#L20'>airflow/api_fastapi/common/router.py:20:18:</a> TCH003 Move standard library import `enum.Enum` into a type-checking block
+ <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_fastapi/common/types.py#L19'>airflow/api_fastapi/common/types.py:19:22:</a> TC003 Move standard library import `datetime.timedelta` into a type-checking block
... 281 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/superset">apache/superset</a> (+330 -321 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/RELEASING/changelog.py#L227'>RELEASING/changelog.py:227:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/advanced_data_type/api.py#L28'>superset/advanced_data_type/api.py:28:47:</a> TC001 Move application import `superset.advanced_data_type.types.AdvancedDataTypeResponse` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/advanced_data_type/api.py#L28'>superset/advanced_data_type/api.py:28:47:</a> TCH001 Move application import `superset.advanced_data_type.types.AdvancedDataTypeResponse` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/async_events/async_query_manager.py#L26'>superset/async_events/async_query_manager.py:26:41:</a> TC002 Move third-party import `flask_caching.backends.base.BaseCache` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/async_events/async_query_manager.py#L26'>superset/async_events/async_query_manager.py:26:41:</a> TCH002 Move third-party import `flask_caching.backends.base.BaseCache` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/charts/data/api.py#L43'>superset/charts/data/api.py:43:45:</a> TC001 Move application import `superset.connectors.sqla.models.BaseDatasource` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/charts/data/api.py#L43'>superset/charts/data/api.py:43:45:</a> TCH001 Move application import `superset.connectors.sqla.models.BaseDatasource` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/charts/data/api.py#L47'>superset/charts/data/api.py:47:37:</a> TC001 Move application import `superset.models.sql_lab.Query` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/charts/data/api.py#L47'>superset/charts/data/api.py:47:37:</a> TCH001 Move application import `superset.models.sql_lab.Query` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/cli/test_db.py#L45'>superset/cli/test_db.py:45:43:</a> TC001 Move application import `superset.db_engine_specs.base.BaseEngineSpec` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/cli/test_db.py#L45'>superset/cli/test_db.py:45:43:</a> TCH001 Move application import `superset.db_engine_specs.base.BaseEngineSpec` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/commands/annotation_layer/annotation/create.py#L18'>superset/commands/annotation_layer/annotation/create.py:18:22:</a> TC003 Move standard library import `datetime.datetime` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/commands/annotation_layer/annotation/create.py#L18'>superset/commands/annotation_layer/annotation/create.py:18:22:</a> TCH003 Move standard library import `datetime.datetime` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/commands/annotation_layer/annotation/create.py#L23'>superset/commands/annotation_layer/annotation/create.py:23:25:</a> TC002 Move third-party import `marshmallow.ValidationError` into a type-checking block
... 637 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/aws/aws-sam-cli">aws/aws-sam-cli</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>

<pre>
+ <a href='https://github.com/aws/aws-sam-cli/blob/219c6afeeff5384ae59e9fc2d3748748022a1f48/tests/integration/pipeline/test_bootstrap_command.py#L229'>tests/integration/pipeline/test_bootstrap_command.py:229:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
</pre>

</p>
</details>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+305 -233 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/models/widgets.py#L84'>examples/models/widgets.py:84:37:</a> UP031 Use format specifiers instead of percent format
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/models/widgets.py#L86'>examples/models/widgets.py:86:37:</a> UP031 Use format specifiers instead of percent format
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/build.py#L18'>release/build.py:18:21:</a> TC001 Move application import `.config.Config` into a type-checking block
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/build.py#L18'>release/build.py:18:21:</a> TCH001 Move application import `.config.Config` into a type-checking block
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/build.py#L19'>release/build.py:19:21:</a> TC001 Move application import `.system.System` into a type-checking block
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/build.py#L19'>release/build.py:19:21:</a> TCH001 Move application import `.system.System` into a type-checking block
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L19'>release/checks.py:19:21:</a> TC001 Move application import `.config.Config` into a type-checking block
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L19'>release/checks.py:19:21:</a> TCH001 Move application import `.config.Config` into a type-checking block
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L20'>release/checks.py:20:23:</a> TC001 Move application import `.pipeline.StepType` into a type-checking block
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L20'>release/checks.py:20:23:</a> TCH001 Move application import `.pipeline.StepType` into a type-checking block
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L21'>release/checks.py:21:21:</a> TC001 Move application import `.system.System` into a type-checking block
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L21'>release/checks.py:21:21:</a> TCH001 Move application import `.system.System` into a type-checking block
... 526 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/freedomofpress/securedrop">freedomofpress/securedrop</a> (+2 -0 violations, +0 -0 fixes)</summary>
<p>

<pre>
+ <a href='https://github.com/freedomofpress/securedrop/blob/815480f5ce263476b90e5aed5a517f28d283d40c/molecule/testinfra/ossec/test_journalist_mail.py#L14'>molecule/testinfra/ossec/test_journalist_mail.py:14:45:</a> RUF100 [*] Unused `noqa` directive (non-enabled: `PT004`)
+ <a href='https://github.com/freedomofpress/securedrop/blob/815480f5ce263476b90e5aed5a517f28d283d40c/securedrop/source_app/utils.py#L86'>securedrop/source_app/utils.py:86:17:</a> UP031 Use format specifiers instead of percent format
</pre>

</p>
</details>
<details><summary><a href="https://github.com/ibis-project/ibis">ibis-project/ibis</a> (+86 -0 violations, +0 -0 fixes)</summary>
<p>

<pre>
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/impala/tests/test_exprs.py#L135'>ibis/backends/impala/tests/test_exprs.py:135:29:</a> UP031 Use format specifiers instead of percent format
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/impala/tests/test_exprs.py#L421'>ibis/backends/impala/tests/test_exprs.py:421:29:</a> UP031 Use format specifiers instead of percent format
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/impala/tests/test_exprs.py#L477'>ibis/backends/impala/tests/test_exprs.py:477:26:</a> UP031 Use format specifiers instead of percent format
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/impala/tests/test_exprs.py#L514'>ibis/backends/impala/tests/test_exprs.py:514:29:</a> UP031 Use format specifiers instead of percent format
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/impala/udf.py#L24'>ibis/backends/impala/udf.py:24:11:</a> RUF022 [*] `__all__` is not sorted
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/oracle/tests/test_client.py#L3'>ibis/backends/oracle/tests/test_client.py:3:36:</a> RUF101 [*] `TCH003` is a redirect to `TC003`
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/polars/rewrites.py#L10'>ibis/backends/polars/rewrites.py:10:50:</a> RUF101 [*] `TCH001` is a redirect to `TC001`
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/sql/compilers/__init__.py#L3'>ibis/backends/sql/compilers/__init__.py:3:11:</a> RUF022 [*] `__all__` is not sorted
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/sql/compilers/base.py#L178'>ibis/backends/sql/compilers/base.py:178:17:</a> RUF023 [*] `FuncGen.__slots__` is not sorted
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/sql/compilers/base.py#L83'>ibis/backends/sql/compilers/base.py:83:21:</a> RUF023 [*] `_Accessor.__slots__` is not sorted
... 76 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/langchain-ai/langchain">langchain-ai/langchain</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>

<pre>
+ <a href='https://github.com/langchain-ai/langchain/blob/16918842bf86de1b493229310b0f6fc593d7a686/libs/core/langchain_core/runnables/config.py#L114'>libs/core/langchain_core/runnables/config.py:114:38:</a> B039 Do not use mutable data structures for `ContextVar` defaults
</pre>

</p>
</details>
<details><summary><a href="https://github.com/latchbio/latch">latchbio/latch</a> (+13 -6 violations, +0 -0 fixes)</summary>
<p>

<pre>
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/functions/operators.py#L183'>src/latch/functions/operators.py:183:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/functions/operators.py#L37'>src/latch/functions/operators.py:37:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/functions/operators.py#L48'>src/latch/functions/operators.py:48:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/functions/operators.py#L59'>src/latch/functions/operators.py:59:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/functions/operators.py#L68'>src/latch/functions/operators.py:68:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/functions/operators.py#L73'>src/latch/functions/operators.py:73:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
... 1 additional changes omitted for rule PLC0206
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/ldata/_transfer/upload.py#L10'>src/latch/ldata/_transfer/upload.py:10:38:</a> TC003 Move standard library import `multiprocessing.managers.DictProxy` into a type-checking block
- <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/ldata/_transfer/upload.py#L10'>src/latch/ldata/_transfer/upload.py:10:38:</a> TCH003 Move standard library import `multiprocessing.managers.DictProxy` into a type-checking block
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/ldata/_transfer/upload.py#L10'>src/latch/ldata/_transfer/upload.py:10:49:</a> TC003 Move standard library import `multiprocessing.managers.ListProxy` into a type-checking block
- <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/ldata/_transfer/upload.py#L10'>src/latch/ldata/_transfer/upload.py:10:49:</a> TCH003 Move standard library import `multiprocessing.managers.ListProxy` into a type-checking block
... 9 additional changes omitted for project
</pre>

</p>
</details>

_... Truncated remaining completed project reports due to GitHub comment length restrictions_

<details><summary>Changes by rule (25 rules affected)</summary>
<p>

| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| TCH001 | 354 | 0 | 354 | 0 | 0 |
| TC001 | 352 | 352 | 0 | 0 | 0 |
| TC003 | 202 | 202 | 0 | 0 | 0 |
| TCH003 | 202 | 0 | 202 | 0 | 0 |
| RUF023 | 167 | 167 | 0 | 0 | 0 |
| TC002 | 147 | 147 | 0 | 0 | 0 |
| TCH002 | 147 | 0 | 147 | 0 | 0 |
| RUF022 | 146 | 146 | 0 | 0 | 0 |
| UP006 | 145 | 145 | 0 | 0 | 0 |
| UP035 | 71 | 71 | 0 | 0 | 0 |
| A004 | 66 | 66 | 0 | 0 | 0 |
| RUF021 | 64 | 64 | 0 | 0 | 0 |
| UP031 | 62 | 62 | 0 | 0 | 0 |
| RUF101 | 46 | 46 | 0 | 0 | 0 |
| PLC0206 | 43 | 43 | 0 | 0 | 0 |
| PYI063 | 5 | 5 | 0 | 0 | 0 |
| B039 | 4 | 4 | 0 | 0 | 0 |
| PT004 | 3 | 0 | 3 | 0 | 0 |
| RUF200 | 2 | 2 | 0 | 0 | 0 |
| D212 | 2 | 1 | 1 | 0 | 0 |
| TC005 | 2 | 2 | 0 | 0 | 0 |
| TCH005 | 2 | 0 | 2 | 0 | 0 |
| RUF100 | 1 | 1 | 0 | 0 | 0 |
| A001 | 1 | 0 | 1 | 0 | 0 |
| TCH004 | 1 | 0 | 1 | 0 | 0 |

</p>
</details>

### Linter (preview)
ℹ️ ecosystem check **detected linter changes**. (+1003 -740 violations, +0 -0 fixes in 12 projects; 42 projects unchanged)

<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+125 -119 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/__main__.py#L25'>airflow/__main__.py:25:22:</a> TC003 Move standard library import `argparse.Namespace` into a type-checking block
- <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/__main__.py#L25'>airflow/__main__.py:25:22:</a> TCH003 Move standard library import `argparse.Namespace` into a type-checking block
+ <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_connexion/schemas/asset_schema.py#L19'>airflow/api_connexion/schemas/asset_schema.py:19:22:</a> TC003 Move standard library import `datetime.datetime` into a type-checking block
- <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_connexion/schemas/asset_schema.py#L19'>airflow/api_connexion/schemas/asset_schema.py:19:22:</a> TCH003 Move standard library import `datetime.datetime` into a type-checking block
+ <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_fastapi/common/parameters.py#L21'>airflow/api_fastapi/common/parameters.py:21:22:</a> TC003 Move standard library import `datetime.datetime` into a type-checking block
- <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_fastapi/common/parameters.py#L21'>airflow/api_fastapi/common/parameters.py:21:22:</a> TCH003 Move standard library import `datetime.datetime` into a type-checking block
+ <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_fastapi/common/router.py#L20'>airflow/api_fastapi/common/router.py:20:18:</a> TC003 Move standard library import `enum.Enum` into a type-checking block
- <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_fastapi/common/router.py#L20'>airflow/api_fastapi/common/router.py:20:18:</a> TCH003 Move standard library import `enum.Enum` into a type-checking block
+ <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_fastapi/common/types.py#L19'>airflow/api_fastapi/common/types.py:19:22:</a> TC003 Move standard library import `datetime.timedelta` into a type-checking block
- <a href='https://github.com/apache/airflow/blob/8440016d3e8c50056cad5da346ac24289a52670d/airflow/api_fastapi/common/types.py#L19'>airflow/api_fastapi/common/types.py:19:22:</a> TCH003 Move standard library import `datetime.timedelta` into a type-checking block
... 234 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/superset">apache/superset</a> (+321 -321 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/advanced_data_type/api.py#L28'>superset/advanced_data_type/api.py:28:47:</a> TC001 Move application import `superset.advanced_data_type.types.AdvancedDataTypeResponse` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/advanced_data_type/api.py#L28'>superset/advanced_data_type/api.py:28:47:</a> TCH001 Move application import `superset.advanced_data_type.types.AdvancedDataTypeResponse` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/async_events/async_query_manager.py#L26'>superset/async_events/async_query_manager.py:26:41:</a> TC002 Move third-party import `flask_caching.backends.base.BaseCache` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/async_events/async_query_manager.py#L26'>superset/async_events/async_query_manager.py:26:41:</a> TCH002 Move third-party import `flask_caching.backends.base.BaseCache` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/charts/data/api.py#L43'>superset/charts/data/api.py:43:45:</a> TC001 Move application import `superset.connectors.sqla.models.BaseDatasource` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/charts/data/api.py#L43'>superset/charts/data/api.py:43:45:</a> TCH001 Move application import `superset.connectors.sqla.models.BaseDatasource` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/charts/data/api.py#L47'>superset/charts/data/api.py:47:37:</a> TC001 Move application import `superset.models.sql_lab.Query` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/charts/data/api.py#L47'>superset/charts/data/api.py:47:37:</a> TCH001 Move application import `superset.models.sql_lab.Query` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/cli/test_db.py#L45'>superset/cli/test_db.py:45:43:</a> TC001 Move application import `superset.db_engine_specs.base.BaseEngineSpec` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/cli/test_db.py#L45'>superset/cli/test_db.py:45:43:</a> TCH001 Move application import `superset.db_engine_specs.base.BaseEngineSpec` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/commands/annotation_layer/annotation/create.py#L18'>superset/commands/annotation_layer/annotation/create.py:18:22:</a> TC003 Move standard library import `datetime.datetime` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/commands/annotation_layer/annotation/create.py#L18'>superset/commands/annotation_layer/annotation/create.py:18:22:</a> TCH003 Move standard library import `datetime.datetime` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/commands/annotation_layer/annotation/create.py#L23'>superset/commands/annotation_layer/annotation/create.py:23:25:</a> TC002 Move third-party import `marshmallow.ValidationError` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/commands/annotation_layer/annotation/create.py#L23'>superset/commands/annotation_layer/annotation/create.py:23:25:</a> TCH002 Move third-party import `marshmallow.ValidationError` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/commands/annotation_layer/annotation/delete.py#L27'>superset/commands/annotation_layer/annotation/delete.py:27:41:</a> TC001 Move application import `superset.models.annotations.Annotation` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/commands/annotation_layer/annotation/delete.py#L27'>superset/commands/annotation_layer/annotation/delete.py:27:41:</a> TCH001 Move application import `superset.models.annotations.Annotation` into a type-checking block
+ <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/commands/annotation_layer/annotation/update.py#L18'>superset/commands/annotation_layer/annotation/update.py:18:22:</a> TC003 Move standard library import `datetime.datetime` into a type-checking block
- <a href='https://github.com/apache/superset/blob/1102d41842fa7136c464ce550980ea6c21db2bb4/superset/commands/annotation_layer/annotation/update.py#L18'>superset/commands/annotation_layer/annotation/update.py:18:22:</a> TCH003 Move standard library import `datetime.datetime` into a type-checking block
... 624 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+232 -232 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/build.py#L18'>release/build.py:18:21:</a> TC001 Move application import `.config.Config` into a type-checking block
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/build.py#L18'>release/build.py:18:21:</a> TCH001 Move application import `.config.Config` into a type-checking block
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/build.py#L19'>release/build.py:19:21:</a> TC001 Move application import `.system.System` into a type-checking block
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/build.py#L19'>release/build.py:19:21:</a> TCH001 Move application import `.system.System` into a type-checking block
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L19'>release/checks.py:19:21:</a> TC001 Move application import `.config.Config` into a type-checking block
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L19'>release/checks.py:19:21:</a> TCH001 Move application import `.config.Config` into a type-checking block
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L20'>release/checks.py:20:23:</a> TC001 Move application import `.pipeline.StepType` into a type-checking block
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L20'>release/checks.py:20:23:</a> TCH001 Move application import `.pipeline.StepType` into a type-checking block
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L21'>release/checks.py:21:21:</a> TC001 Move application import `.system.System` into a type-checking block
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/checks.py#L21'>release/checks.py:21:21:</a> TCH001 Move application import `.system.System` into a type-checking block
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/credentials.py#L24'>release/credentials.py:24:21:</a> TC001 Move application import `.config.Config` into a type-checking block
... 189 additional changes omitted for rule TC001
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/release/credentials.py#L24'>release/credentials.py:24:21:</a> TCH001 Move application import `.config.Config` into a type-checking block
... 189 additional changes omitted for rule TCH001
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/application/handlers/code.py#L41'>src/bokeh/application/handlers/code.py:41:19:</a> TC003 Move standard library import `types.ModuleType` into a type-checking block
... 451 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/ibis-project/ibis">ibis-project/ibis</a> (+42 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/oracle/tests/test_client.py#L3'>ibis/backends/oracle/tests/test_client.py:3:36:</a> RUF101 [*] `TCH003` is a redirect to `TC003`
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/polars/rewrites.py#L10'>ibis/backends/polars/rewrites.py:10:50:</a> RUF101 [*] `TCH001` is a redirect to `TC001`
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/sql/rewrites.py#L17'>ibis/backends/sql/rewrites.py:17:57:</a> RUF101 [*] `TCH001` is a redirect to `TC001`
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/backends/sql/rewrites.py#L21'>ibis/backends/sql/rewrites.py:21:50:</a> RUF101 [*] `TCH001` is a redirect to `TC001`
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/common/grounds.py#L29'>ibis/common/grounds.py:29:57:</a> RUF101 [*] `TCH001` is a redirect to `TC001`
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/common/selectors.py#L8'>ibis/common/selectors.py:8:50:</a> RUF101 [*] `TCH001` is a redirect to `TC001`
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/config.py#L3'>ibis/config.py:3:47:</a> RUF101 [*] `TCH003` is a redirect to `TC003`
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/expr/builders.py#L16'>ibis/expr/builders.py:16:53:</a> RUF101 [*] `TCH001` is a redirect to `TC001`
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/expr/builders.py#L17'>ibis/expr/builders.py:17:50:</a> RUF101 [*] `TCH001` is a redirect to `TC001`
+ <a href='https://github.com/ibis-project/ibis/blob/e43d986230ab5cb769bc0c3bd5272743844a332c/ibis/expr/datatypes/tests/test_core.py#L3'>ibis/expr/datatypes/tests/test_core.py:3:26:</a> RUF101 [*] `TCH003` is a redirect to `TC003`
... 32 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/latchbio/latch">latchbio/latch</a> (+6 -6 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/ldata/_transfer/upload.py#L10'>src/latch/ldata/_transfer/upload.py:10:38:</a> TC003 Move standard library import `multiprocessing.managers.DictProxy` into a type-checking block
- <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/ldata/_transfer/upload.py#L10'>src/latch/ldata/_transfer/upload.py:10:38:</a> TCH003 Move standard library import `multiprocessing.managers.DictProxy` into a type-checking block
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/ldata/_transfer/upload.py#L10'>src/latch/ldata/_transfer/upload.py:10:49:</a> TC003 Move standard library import `multiprocessing.managers.ListProxy` into a type-checking block
- <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/ldata/_transfer/upload.py#L10'>src/latch/ldata/_transfer/upload.py:10:49:</a> TCH003 Move standard library import `multiprocessing.managers.ListProxy` into a type-checking block
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/ldata/_transfer/upload.py#L12'>src/latch/ldata/_transfer/upload.py:12:19:</a> TC003 Move standard library import `queue.Queue` into a type-checking block
- <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/ldata/_transfer/upload.py#L12'>src/latch/ldata/_transfer/upload.py:12:19:</a> TCH003 Move standard library import `queue.Queue` into a type-checking block
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/registry/record.py#L18'>src/latch/registry/record.py:18:49:</a> TC001 Move application import `latch.registry.upstream_types.types.DBType` into a type-checking block
- <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch/registry/record.py#L18'>src/latch/registry/record.py:18:49:</a> TCH001 Move application import `latch.registry.upstream_types.types.DBType` into a type-checking block
+ <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch_cli/services/register/utils.py#L5'>src/latch_cli/services/register/utils.py:5:8:</a> TC003 Move standard library import `io` into a type-checking block
- <a href='https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/src/latch_cli/services/register/utils.py#L5'>src/latch_cli/services/register/utils.py:5:8:</a> TCH003 Move standard library import `io` into a type-checking block
... 2 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/lnbits/lnbits">lnbits/lnbits</a> (+216 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/lnbits/lnbits/blob/51c9d294cdb40c777b1048bbee267b49cdaf7a34/lnbits/app.py#L257'>lnbits/app.py:257:6:</a> UP006 Use `list` instead of `List` for type annotation
+ <a href='https://github.com/lnbits/lnbits/blob/51c9d294cdb40c777b1048bbee267b49cdaf7a34/lnbits/app.py#L9'>lnbits/app.py:9:1:</a> UP035 `typing.List` is deprecated, use `list` instead
+ <a href='https://github.com/lnbits/lnbits/blob/51c9d294cdb40c777b1048bbee267b49cdaf7a34/lnbits/commands.py#L235'>lnbits/commands.py:235:23:</a> UP006 Use `list` instead of `List` for type annotation
+ <a href='https://github.com/lnbits/lnbits/blob/51c9d294cdb40c777b1048bbee267b49cdaf7a34/lnbits/commands.py#L465'>lnbits/commands.py:465:6:</a> UP006 Use `tuple` instead of `Tuple` for type annotation
+ <a href='https://github.com/lnbits/lnbits/blob/51c9d294cdb40c777b1048bbee267b49cdaf7a34/lnbits/commands.py#L494'>lnbits/commands.py:494:6:</a> UP006 Use `tuple` instead of `Tuple` for type annotation
+ <a href='https://github.com/lnbits/lnbits/blob/51c9d294cdb40c777b1048bbee267b49cdaf7a34/lnbits/commands.py#L6'>lnbits/commands.py:6:1:</a> UP035 `typing.List` is deprecated, use `list` instead
+ <a href='https://github.com/lnbits/lnbits/blob/51c9d294cdb40c777b1048bbee267b49cdaf7a34/lnbits/commands.py#L6'>lnbits/commands.py:6:1:</a> UP035 `typing.Tuple` is deprecated, use `tuple` instead
+ <a href='https://github.com/lnbits/lnbits/blob/51c9d294cdb40c777b1048bbee267b49cdaf7a34/lnbits/core/crud.py#L1018'>lnbits/core/crud.py:1018:6:</a> UP006 Use `list` instead of `List` for type annotation
+ <a href='https://github.com/lnbits/lnbits/blob/51c9d294cdb40c777b1048bbee267b49cdaf7a34/lnbits/core/crud.py#L1235'>lnbits/core/crud.py:1235:43:</a> UP006 Use `list` instead of `List` for type annotation
... 140 additional changes omitted for rule UP006
+ <a href='https://github.com/lnbits/lnbits/blob/51c9d294cdb40c777b1048bbee267b49cdaf7a34/lnbits/core/crud.py#L4'>lnbits/core/crud.py:4:1:</a> UP035 `typing.Dict` is deprecated, use `dict` instead
... 206 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/pandas-dev/pandas">pandas-dev/pandas</a> (+3 -4 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
- <a href='https://github.com/pandas-dev/pandas/blob/6a7685faf104f8582e0e75f1fae58e09ae97e2fe/pandas/_typing.py#L276'>pandas/_typing.py:276:20:</a> PYI063 Use PEP 570 syntax for positional-only arguments
+ <a href='https://github.com/pandas-dev/pandas/blob/6a7685faf104f8582e0e75f1fae58e09ae97e2fe/pandas/_typing.py#L276'>pandas/_typing.py:276:20:</a> PYI063 Use PEP 570 syntax for positional-only parameters
- <a href='https://github.com/pandas-dev/pandas/blob/6a7685faf104f8582e0e75f1fae58e09ae97e2fe/pandas/_typing.py#L291'>pandas/_typing.py:291:20:</a> PYI063 Use PEP 570 syntax for positional-only arguments
+ <a href='https://github.com/pandas-dev/pandas/blob/6a7685faf104f8582e0e75f1fae58e09ae97e2fe/pandas/_typing.py#L291'>pandas/_typing.py:291:20:</a> PYI063 Use PEP 570 syntax for positional-only parameters
- <a href='https://github.com/pandas-dev/pandas/blob/6a7685faf104f8582e0e75f1fae58e09ae97e2fe/pandas/_typing.py#L297'>pandas/_typing.py:297:21:</a> PYI063 Use PEP 570 syntax for positional-only arguments
+ <a href='https://github.com/pandas-dev/pandas/blob/6a7685faf104f8582e0e75f1fae58e09ae97e2fe/pandas/_typing.py#L297'>pandas/_typing.py:297:21:</a> PYI063 Use PEP 570 syntax for positional-only parameters
... 1 additional changes omitted for rule PYI063
- <a href='https://github.com/pandas-dev/pandas/blob/6a7685faf104f8582e0e75f1fae58e09ae97e2fe/pandas/core/dtypes/dtypes.py#L76'>pandas/core/dtypes/dtypes.py:76:23:</a> TCH004 Move import `pyarrow` out of type-checking block. Import is used for more than type hinting.
</pre>

</p>
</details>
<details><summary><a href="https://github.com/pypa/cibuildwheel">pypa/cibuildwheel</a> (+2 -2 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/pypa/cibuildwheel/blob/fd990007be2cc7eb1beb5501970039bf4e1dde57/bin/bump_version.py#L20'>bin/bump_version.py:20:4:</a> PYI066 Put branches for newer Python versions first when branching on `sys.version_info` comparisons
- <a href='https://github.com/pypa/cibuildwheel/blob/fd990007be2cc7eb1beb5501970039bf4e1dde57/bin/bump_version.py#L20'>bin/bump_version.py:20:4:</a> PYI066 Use `>=` when using `if`-`else` with `sys.version_info` comparisons
+ <a href='https://github.com/pypa/cibuildwheel/blob/fd990007be2cc7eb1beb5501970039bf4e1dde57/cibuildwheel/_compat/typing.py#L5'>cibuildwheel/_compat/typing.py:5:4:</a> PYI066 Put branches for newer Python versions first when branching on `sys.version_info` comparisons
- <a href='https://github.com/pypa/cibuildwheel/blob/fd990007be2cc7eb1beb5501970039bf4e1dde57/cibuildwheel/_compat/typing.py#L5'>cibuildwheel/_compat/typing.py:5:4:</a> PYI066 Use `>=` when using `if`-`else` with `sys.version_info` comparisons
</pre>

</p>
</details>

_... Truncated remaining completed project reports due to GitHub comment length restrictions_

<details><summary>Changes by rule (15 rules affected)</summary>
<p>

| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| TC001 | 352 | 352 | 0 | 0 | 0 |
| TCH001 | 352 | 0 | 352 | 0 | 0 |
| TC003 | 202 | 202 | 0 | 0 | 0 |
| TCH003 | 202 | 0 | 202 | 0 | 0 |
| TC002 | 147 | 147 | 0 | 0 | 0 |
| TCH002 | 147 | 0 | 147 | 0 | 0 |
| UP006 | 145 | 145 | 0 | 0 | 0 |
| UP035 | 71 | 71 | 0 | 0 | 0 |
| PYI066 | 62 | 31 | 31 | 0 | 0 |
| RUF101 | 46 | 46 | 0 | 0 | 0 |
| PYI063 | 10 | 5 | 5 | 0 | 0 |
| RUF200 | 2 | 2 | 0 | 0 | 0 |
| TC005 | 2 | 2 | 0 | 0 | 0 |
| TCH005 | 2 | 0 | 2 | 0 | 0 |
| TCH004 | 1 | 0 | 1 | 0 | 0 |

</p>
</details>

### Formatter (stable)
ℹ️ ecosystem check **detected format changes**. (+111 -85 lines in 16 files in 4 projects; 50 projects unchanged)

<details><summary><a href="https://github.com/aws/aws-sam-cli">aws/aws-sam-cli</a> (+34 -30 lines across 4 files)</summary>
<p>

<a href='https://github.com/aws/aws-sam-cli/blob/219c6afeeff5384ae59e9fc2d3748748022a1f48/tests/integration/pipeline/test_init_command.py#L98'>tests/integration/pipeline/test_init_command.py~L98</a>
```diff
 
         self.assertEqual(init_process_execute.process.returncode, 0)
 
-        with open(EXPECTED_JENKINS_FILE_PATH, "r") as expected, open(
-            os.path.join(".aws-sam", "pipeline", "generated-files", "Jenkinsfile"), "r"
-        ) as output:
+        with (
+            open(EXPECTED_JENKINS_FILE_PATH, "r") as expected,
+            open(os.path.join(".aws-sam", "pipeline", "generated-files", "Jenkinsfile"), "r") as output,
+        ):
             self.assertEqual(expected.read(), output.read())
 
         # also check the Jenkinsfile is not overridden
```
<a href='https://github.com/aws/aws-sam-cli/blob/219c6afeeff5384ae59e9fc2d3748748022a1f48/tests/unit/commands/samconfig/test_samconfig.py#L1066'>tests/unit/commands/samconfig/test_samconfig.py~L1066</a>
```diff
         }
 
         # NOTE: Because we don't load the full Click BaseCommand here, this is mounted as top-level command
-        with samconfig_parameters(
-            ["start-lambda"], self.scratch_dir, **config_values
-        ) as config_path, tempfile.NamedTemporaryFile() as key_file, tempfile.NamedTemporaryFile() as cert_file:
+        with (
+            samconfig_parameters(["start-lambda"], self.scratch_dir, **config_values) as config_path,
+            tempfile.NamedTemporaryFile() as key_file,
+            tempfile.NamedTemporaryFile() as cert_file,
+        ):
             from samcli.commands.local.start_lambda.cli import cli
 
             LOG.debug(Path(config_path).read_text())
```
<a href='https://github.com/aws/aws-sam-cli/blob/219c6afeeff5384ae59e9fc2d3748748022a1f48/tests/unit/commands/samconfig/test_samconfig.py#L1171'>tests/unit/commands/samconfig/test_samconfig.py~L1171</a>
```diff
         }
 
         # NOTE: Because we don't load the full Click BaseCommand here, this is mounted as top-level command
-        with samconfig_parameters(
-            ["start-lambda"], self.scratch_dir, **config_values
-        ) as config_path, tempfile.NamedTemporaryFile() as key_file, tempfile.NamedTemporaryFile() as cert_file:
+        with (
+            samconfig_parameters(["start-lambda"], self.scratch_dir, **config_values) as config_path,
+            tempfile.NamedTemporaryFile() as key_file,
+            tempfile.NamedTemporaryFile() as cert_file,
+        ):
             from samcli.commands.local.start_lambda.cli import cli
 
             LOG.debug(Path(config_path).read_text())
```
<a href='https://github.com/aws/aws-sam-cli/blob/219c6afeeff5384ae59e9fc2d3748748022a1f48/tests/unit/lib/build_module/test_build_strategy.py#L747'>tests/unit/lib/build_module/test_build_strategy.py~L747</a>
```diff
     def test_will_call_incremental_build_strategy(self, mocked_read, mocked_write, runtime):
         build_definition = FunctionBuildDefinition(runtime, "codeuri", None, "package_type", X86_64, {}, "handler")
         self.build_graph.put_function_build_definition(build_definition, Mock(full_path="function_full_path"))
-        with patch.object(
-            self.build_strategy, "_incremental_build_strategy"
-        ) as patched_incremental_build_strategy, patch.object(
-            self.build_strategy, "_cached_build_strategy"
-        ) as patched_cached_build_strategy:
+        with (
+            patch.object(self.build_strategy, "_incremental_build_strategy") as patched_incremental_build_strategy,
+            patch.object(self.build_strategy, "_cached_build_strategy") as patched_cached_build_strategy,
+        ):
             self.build_strategy.build()
 
             patched_incremental_build_strategy.build_single_function_definition.assert_called_with(build_definition)
```
<a href='https://github.com/aws/aws-sam-cli/blob/219c6afeeff5384ae59e9fc2d3748748022a1f48/tests/unit/lib/build_module/test_build_strategy.py#L767'>tests/unit/lib/build_module/test_build_strategy.py~L767</a>
```diff
     def test_will_call_cached_build_strategy(self, mocked_read, mocked_write, runtime):
         build_definition = FunctionBuildDefinition(runtime, "codeuri", None, "package_type", X86_64, {}, "handler")
         self.build_graph.put_function_build_definition(build_definition, Mock(full_path="function_full_path"))
-        with patch.object(
-            self.build_strategy, "_incremental_build_strategy"
-        ) as patched_incremental_build_strategy, patch.object(
-            self.build_strategy, "_cached_build_strategy"
-        ) as patched_cached_build_strategy:
+        with (
+            patch.object(self.build_strategy, "_incremental_build_strategy") as patched_incremental_build_strategy,
+            patch.object(self.build_strategy, "_cached_build_strategy") as patched_cached_build_strategy,
+        ):
             self.build_strategy.build()
 
             patched_cached_build_strategy.build_single_function_definition.assert_called_with(build_definition)
```
<a href='https://github.com/aws/aws-sam-cli/blob/219c6afeeff5384ae59e9fc2d3748748022a1f48/tests/unit/lib/build_module/test_build_strategy.py#L841'>tests/unit/lib/build_module/test_build_strategy.py~L841</a>
```diff
 
         build_definition = FunctionBuildDefinition(runtime, "codeuri", None, "package_type", X86_64, {}, "handler")
         self.build_graph.put_function_build_definition(build_definition, Mock(full_path="function_full_path"))
-        with patch.object(
-            build_strategy, "_incremental_build_strategy"
-        ) as patched_incremental_build_strategy, patch.object(
-            build_strategy, "_cached_build_strategy"
-        ) as patched_cached_build_strategy:
+        with (
+            patch.object(build_strategy, "_incremental_build_strategy") as patched_incremental_build_strategy,
+            patch.object(build_strategy, "_cached_build_strategy") as patched_cached_build_strategy,
+        ):
             build_strategy.build()
 
             if not use_container:
```
<a href='https://github.com/aws/aws-sam-cli/blob/219c6afeeff5384ae59e9fc2d3748748022a1f48/tests/unit/lib/remote_invoke/test_remote_invoke_executors.py#L79'>tests/unit/lib/remote_invoke/test_remote_invoke_executors.py~L79</a>
```diff
         given_output_format = "text"
         test_execution_info = RemoteInvokeExecutionInfo(given_payload, None, given_parameters, given_output_format)
 
-        with patch.object(self.boto_action_executor, "_execute_action") as patched_execute_action, patch.object(
-            self.boto_action_executor, "_execute_action_file"
-        ) as patched_execute_action_file:
+        with (
+            patch.object(self.boto_action_executor, "_execute_action") as patched_execute_action,
+            patch.object(self.boto_action_executor, "_execute_action_file") as patched_execute_action_file,
+        ):
             given_result = Mock()
             patched_execute_action.return_value = given_result
 
```
<a href='https://github.com/aws/aws-sam-cli/blob/219c6afeeff5384ae59e9fc2d3748748022a1f48/tests/unit/lib/remote_invoke/test_remote_invoke_executors.py#L96'>tests/unit/lib/remote_invoke/test_remote_invoke_executors.py~L96</a>
```diff
         given_output_format = "json"
         test_execution_info = RemoteInvokeExecutionInfo(None, given_payload_file, given_parameters, given_output_format)
 
-        with patch.object(self.boto_action_executor, "_execute_action") as patched_execute_action, patch.object(
-            self.boto_action_executor, "_execute_action_file"
-        ) as patched_execute_action_file:
+        with (
+            patch.object(self.boto_action_executor, "_execute_action") as patched_execute_action,
+            patch.object(self.boto_action_executor, "_execute_action_file") as patched_execute_action_file,
+        ):
             given_result = Mock()
             patched_execute_action_file.return_value = given_result
 
```

</p>
</details>
<details><summary><a href="https://github.com/langchain-ai/langchain">langchain-ai/langchain</a> (+32 -23 lines across 5 files)</summary>
<p>

<a href='https://github.com/langchain-ai/langchain/blob/16918842bf86de1b493229310b0f6fc593d7a686/libs/community/tests/unit_tests/document_loaders/test_mongodb.py#L50'>libs/community/tests/unit_tests/document_loaders/test_mongodb.py~L50</a>
```diff
     mock_collection.find = mock_find
     mock_collection.count_documents = mock_count_documents
 
-    with patch(
-        "motor.motor_asyncio.AsyncIOMotorClient", return_value=MagicMock()
-    ), patch(
-        "langchain_community.document_loaders.mongodb.MongodbLoader.aload",
-        new=mock_async_load,
+    with (
+        patch("motor.motor_asyncio.AsyncIOMotorClient", return_value=MagicMock()),
+        patch(
+            "langchain_community.document_loaders.mongodb.MongodbLoader.aload",
+            new=mock_async_load,
+        ),
     ):
         loader = MongodbLoader(
             "mongodb://localhost:27017",
```
<a href='https://github.com/langchain-ai/langchain/blob/16918842bf86de1b493229310b0f6fc593d7a686/libs/community/tests/unit_tests/tools/audio/test_tools.py#L44'>libs/community/tests/unit_tests/tools/audio/test_tools.py~L44</a>
```diff
 def test_huggingface_tts_run_with_requests_mock() -> None:
     os.environ["HUGGINGFACE_API_KEY"] = "foo"
 
-    with tempfile.TemporaryDirectory() as tmp_dir, patch(
-        "uuid.uuid4"
-    ) as mock_uuid, patch("requests.post") as mock_inference, patch(
-        "builtins.open", mock_open()
-    ) as mock_file:
+    with (
+        tempfile.TemporaryDirectory() as tmp_dir,
+        patch("uuid.uuid4") as mock_uuid,
+        patch("requests.post") as mock_inference,
+        patch("builtins.open", mock_open()) as mock_file,
+    ):
         input_query = "Dummy input"
 
         mock_uuid_value = uuid.UUID("00000000-0000-0000-0000-000000000000")
```
<a href='https://github.com/langchain-ai/langchain/blob/16918842bf86de1b493229310b0f6fc593d7a686/libs/community/tests/unit_tests/vectorstores/test_azure_search.py#L220'>libs/community/tests/unit_tests/vectorstores/test_azure_search.py~L220</a>
```diff
     ]
     ids_provided = [i.metadata.get("id") for i in documents]
 
-    with patch.object(
-        SearchClient, "upload_documents", mock_upload_documents
-    ), patch.object(SearchIndexClient, "get_index", mock_default_index):
+    with (
+        patch.object(SearchClient, "upload_documents", mock_upload_documents),
+        patch.object(SearchIndexClient, "get_index", mock_default_index),
+    ):
         vector_store = create_vector_store()
         ids_used_at_upload = vector_store.add_documents(documents, ids=ids_provided)
         assert len(ids_provided) == len(ids_used_at_upload)
```
<a href='https://github.com/langchain-ai/langchain/blob/16918842bf86de1b493229310b0f6fc593d7a686/libs/langchain/tests/unit_tests/smith/evaluation/test_runner_utils.py#L316'>libs/langchain/tests/unit_tests/smith/evaluation/test_runner_utils.py~L316</a>
```diff
         proj.id = "123"
         return proj
 
-    with mock.patch.object(
-        Client, "read_dataset", new=mock_read_dataset
-    ), mock.patch.object(Client, "list_examples", new=mock_list_examples), mock.patch(
-        "langchain.smith.evaluation.runner_utils._arun_llm_or_chain",
-        new=mock_arun_chain,
-    ), mock.patch.object(Client, "create_project", new=mock_create_project):
+    with (
+        mock.patch.object(Client, "read_dataset", new=mock_read_dataset),
+        mock.patch.object(Client, "list_examples", new=mock_list_examples),
+        mock.patch(
+            "langchain.smith.evaluation.runner_utils._arun_llm_or_chain",
+            new=mock_arun_chain,
+        ),
+        mock.patch.object(Client, "create_project", new=mock_create_project),
+    ):
         client = Client(api_url="http://localhost:1984", api_key="123")
         chain = mock.MagicMock()
         chain.input_keys = ["foothing"]
```
<a href='https://github.com/langchain-ai/langchain/blob/16918842bf86de1b493229310b0f6fc593d7a686/libs/partners/huggingface/tests/unit_tests/test_chat_models.py#L231'>libs/partners/huggingface/tests/unit_tests/test_chat_models.py~L231</a>
```diff
 
 def test_bind_tools(chat_hugging_face: Any) -> None:
     tools = [MagicMock(spec=BaseTool)]
-    with patch(
-        "langchain_huggingface.chat_models.huggingface.convert_to_openai_tool",
-        side_effect=lambda x: x,
-    ), patch("langchain_core.runnables.base.Runnable.bind") as mock_super_bind:
+    with (
+        patch(
+            "langchain_huggingface.chat_models.huggingface.convert_to_openai_tool",
+            side_effect=lambda x: x,
+        ),
+        patch("langchain_core.runnables.base.Runnable.bind") as mock_super_bind,
+    ):
         chat_hugging_face.bind_tools(tools, tool_choice="auto")
         mock_super_bind.assert_called_once()
         _, kwargs = mock_super_bind.call_args
```

</p>
</details>
<details><summary><a href="https://github.com/prefecthq/prefect">prefecthq/prefect</a> (+38 -27 lines across 5 files)</summary>
<p>

<a href='https://github.com/prefecthq/prefect/blob/41a40cdb50e3a96a052f90d2a8e236dd0c4a14fc/src/integrations/prefect-dbt/prefect_dbt/cloud/jobs.py#L752'>src/integrations/prefect-dbt/prefect_dbt/cloud/jobs.py~L752</a>
```diff
         run_status = DbtCloudJobRunStatus(run_data.get("status"))
         if run_status == DbtCloudJobRunStatus.SUCCESS:
             try:
-                async with self._dbt_cloud_credentials.get_administrative_client() as client:  # noqa
+                async with (
+                    self._dbt_cloud_credentials.get_administrative_client() as client
+                ):  # noqa
                     response = await client.list_run_artifacts(
                         run_id=self.run_id, step=step
                     )
```
<a href='https://github.com/prefecthq/prefect/blob/41a40cdb50e3a96a052f90d2a8e236dd0c4a14fc/tests/runner/test_webserver.py#L151'>tests/runner/test_webserver.py~L151</a>
```diff
             webserver = await build_server(runner)
             client = TestClient(webserver)
 
-            with mock.patch(
-                "prefect.runner.server.get_client", new=mock_get_client
-            ), mock.patch.object(runner, "execute_in_background"):
+            with (
+                mock.patch("prefect.runner.server.get_client", new=mock_get_client),
+                mock.patch.object(runner, "execute_in_background"),
+            ):
                 with client:
                     response = client.post(f"/deployment/{deployment_id}/run")
                 assert response.status_code == 201, response.json()
```
<a href='https://github.com/prefecthq/prefect/blob/41a40cdb50e3a96a052f90d2a8e236dd0c4a14fc/tests/server/orchestration/api/test_task_run_subscriptions.py#L326'>tests/server/orchestration/api/test_task_run_subscriptions.py~L326</a>
```diff
             )
             await queue.put(task_run)
 
-        with patch("asyncio.sleep", return_value=None), pytest.raises(
-            asyncio.TimeoutError
+        with (
+            patch("asyncio.sleep", return_value=None),
+            pytest.raises(asyncio.TimeoutError),
         ):
             extra_task_run = ServerTaskRun(
                 id=uuid4(),
```
<a href='https://github.com/prefecthq/prefect/blob/41a40cdb50e3a96a052f90d2a8e236dd0c4a14fc/tests/server/orchestration/api/test_task_run_subscriptions.py#L356'>tests/server/orchestration/api/test_task_run_subscriptions.py~L356</a>
```diff
         )
         await queue.retry(task_run)
 
-        with patch("asyncio.sleep", return_value=None), pytest.raises(
-            asyncio.TimeoutError
+        with (
+            patch("asyncio.sleep", return_value=None),
+            pytest.raises(asyncio.TimeoutError),
         ):
             extra_task_run = ServerTaskRun(
                 id=uuid4(),
```
<a href='https://github.com/prefecthq/prefect/blob/41a40cdb50e3a96a052f90d2a8e236dd0c4a14fc/tests/test_task_worker.py#L106'>tests/test_task_worker.py~L106</a>
```diff
 async def test_handle_sigterm(mock_create_subscription):
     task_worker = TaskWorker(...)
 
-    with patch("sys.exit") as mock_exit, patch.object(
-        task_worker, "stop", new_callable=AsyncMock
-    ) as mock_stop:
+    with (
+        patch("sys.exit") as mock_exit,
+        patch.object(task_worker, "stop", new_callable=AsyncMock) as mock_stop,
+    ):
         await task_worker.start()
 
         mock_create_subscription.assert_called_once()
```
<a href='https://github.com/prefecthq/prefect/blob/41a40cdb50e3a96a052f90d2a8e236dd0c4a14fc/tests/test_task_worker.py#L120'>tests/test_task_worker.py~L120</a>
```diff
 
 
 async def test_task_worker_client_id_is_set():
-    with patch("socket.gethostname", return_value="foo"), patch(
-        "os.getpid", return_value=42
+    with (
+        patch("socket.gethostname", return_value="foo"),
+        patch("os.getpid", return_value=42),
     ):
         task_worker = TaskWorker(...)
         task_worker._client = MagicMock(api_url="http://localhost:4200")
```
<a href='https://github.com/prefecthq/prefect/blob/41a40cdb50e3a96a052f90d2a8e236dd0c4a14fc/tests/workers/test_base_worker.py#L1985'>tests/workers/test_base_worker.py~L1985</a>
```diff
     ):
         async with WorkerTestImpl(work_pool_name=work_pool.name) as worker:
             await worker.start(run_once=True)
-            with mock.patch(
-                "prefect....*[Comment body truncated]*

---

_Comment by @AlexWaygood on 2024-11-16 18:21_

The UP027 removal means that we now error on `setuptools`'s config, but only because they already explicitly `ignore` UP027, because it was deprecated: https://github.com/pypa/setuptools/blob/540001561bc2c6766940ba5fd6247735c1a3a290/ruff.toml#L40. I think that's fine.

---

_Comment by @Skylion007 on 2024-11-17 19:38_

Since we are stabilizing things, there seem to be many lower risk FURB rules we could stabilize: https://docs.astral.sh/ruff/rules/#refurb-furb like FURB148, FURB131, FURB145

---

_Comment by @AlexWaygood on 2024-11-17 19:44_

Thanks @Skylion007. I'll be spending a bunch of time this week looking through which rules are suitable for stabilisation in this release. I'll make sure to look at those, among many others :-)

---

_Comment by @Avasam on 2024-11-17 23:58_

> The UP027 removal means that we now error on `setuptools`'s config, but only because they already explicitly `ignore` UP027, because it was deprecated: [pypa/setuptools@`5400015`/ruff.toml#L40](https://github.com/pypa/setuptools/blob/540001561bc2c6766940ba5fd6247735c1a3a290/ruff.toml#L40). I think that's fine.

Btw I got a relevant feature request to make those warnings by default: https://github.com/astral-sh/ruff/issues/13505 (so that configs can work across more versions without failing)

---

_Added to milestone `v0.8` by @AlexWaygood on 2024-11-18 11:40_

---

_Comment by @codspeed-hq[bot] on 2024-11-18 14:21_

## [CodSpeed Performance Report](https://codspeed.io/astral-sh/ruff/branches/ruff-0.8)

### Merging #14383 will **improve performances by 4.44%**

<sub>Comparing <code>ruff-0.8</code> (c702110) with <code>main</code> (a6deca4)</sub>



### Summary

`⚡ 1` improvements
`✅ 31` untouched benchmarks




### Benchmarks breakdown

|     | Benchmark | `main` | `ruff-0.8` | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| ⚡ | `red_knot_check_file[incremental]` | 4.2 ms | 4 ms | +4.44% |


---

_Comment by @MichaReiser on 2024-11-20 09:05_

Hmm, the branch is now failing

---

_Comment by @AlexWaygood on 2024-11-20 09:08_

I saw (but don't yet understand why). Would you be able to take a look?

---

_Comment by @MichaReiser on 2024-11-20 09:21_

Looking, but I can't repro locally :confused: 

---

_Marked ready for review by @MichaReiser on 2024-11-20 12:07_

---

_Review requested from @MichaReiser by @MichaReiser on 2024-11-20 12:07_

---

_Label `do-not-merge` removed by @AlexWaygood on 2024-11-20 12:08_

---

_@MichaReiser approved on 2024-11-20 12:09_

---

_Merged by @MichaReiser on 2024-11-20 12:11_

---

_Closed by @MichaReiser on 2024-11-20 12:11_

---

_Branch deleted on 2024-11-20 12:11_

---

_Comment by @Skylion007 on 2024-11-20 15:02_

Ah, the FURB rules didn't make it? ;-;

---

_Comment by @AlexWaygood on 2024-11-20 15:09_

> Ah, the FURB rules didn't make it? ;-;

Not this release, unfortunately. I did look at them, but I'm a little concerned that these rules are quite highly opinionated. I'm not sure all users would agree that the changes they recommend would result in more idiomatic Python; I think they're very subjective.

The long-term answer to this problem is to improve our rule categorisation so that we can clearly signal to users that these are highly opinionated rules and have them disabled by default. Unfortunately I can't tell you when rule recategorisation is likely to happen, however :-(

---

_Comment by @Skylion007 on 2024-11-21 14:35_

@AlexWaygood I agree with most of the FURB rules being opinionated, but my understanding is that FURB131, FURB132, and FURB145 have performance implications in code which is why I wanted to enable those specifically. FURB148 also just removes an unused variable/functional call, but I can see why that might want to be left in preview because the fixit is more complicated.

---

_Comment by @AlexWaygood on 2024-11-21 15:28_

It's possible that some of these might make a tiny difference to performance, but I think it's very unlikely to make a significant difference unless you're in a very hot loop. The recommendations to avoid slicing are also the kind of thing where relative performance of different idioms is likely to change quite a lot between Python releases (especially right now, when there's a lot of work going into Python performance, and when [very significant optimisations for slices](https://github.com/python/cpython/pull/125064) have just been landed on the CPython `main` branch).

---
