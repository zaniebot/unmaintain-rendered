<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encode prefixes in README headings not just in TOC - astral-sh/ruff #1109</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Encode prefixes in README headings not just in TOC</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1109">#1109</a>
        opened by <a href="https://github.com/phillipuniverse">@phillipuniverse</a>
        on 2022-12-06 16:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/phillipuniverse">@phillipuniverse</a></div>
            <div class="timeline-body"><p>I know this is not quite complete as I just realized the categories are auto-generated from <code>generate_rules_tables.rs</code>. Before I went and changed the generator to encode the prefix in the title, I wanted to see if this is something we wanted to do.</p>
<p>Here's why I want it - I want to be able to link to a particular ruleset and that link match up to the prefix. I keep losing track of the prefix categories themselves and always forget to look up in the TOC. It's sliiightly more obtuse to divine the categories from the individual rules themselves.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @phillipuniverse on 2022-12-06 16:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-06 16:26</div>
            <div class="timeline-body"><p>Yeah this looks useful to me -- happy to accept a change to the generator, if you're up for it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phillipuniverse">@phillipuniverse</a> on 2022-12-06 16:27</div>
            <div class="timeline-body"><p>Yup no problem!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>README.md</code>:96 on 2022-12-07 03:52</div>
            <div class="timeline-body"><p>We definitely need to auto-generate this too, it keeps getting stale :)</p>
<p>(Not asking you to do that, or for it to be part of this PR, just an observation!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-07 03:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phillipuniverse">@phillipuniverse</a> on 2022-12-07 03:59</div>
            <div class="timeline-body"><p>@charliermarsh you're fast!!</p>
<p>I like where things landed here personally, but this is my first usage of Rust! Would love additional feedback on my ruStAceAN-ese if you have it!</p>
<p><img src="https://user-images.githubusercontent.com/684275/206084911-074a0def-fc75-47b3-9895-f1d42cc6b790.png" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @phillipuniverse on 2022-12-07 03:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/phillipuniverse">@phillipuniverse</a> reviewed on 2022-12-07 04:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/phillipuniverse">@phillipuniverse</a> on <code>README.md</code>:96 on 2022-12-07 04:00</div>
            <div class="timeline-body"><p>No doubt!!</p>
<p>I can do that in this PR or split, your call. Rust is kind of fun!!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @phillipuniverse on 2022-12-07 04:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-07 04:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/checks_gen.rs</code>:10 on 2022-12-07 04:14</div>
            <div class="timeline-body"><p>This file is actually auto-generated. Can you add <code>Display</code> to the list of derives in <code>generate_check_code_prefix.rs</code>? You're looking for this code block:</p>
<pre><code class="language-rs">// Create the `CheckCodePrefix` definition.
let mut gen = scope
    .new_enum(&quot;CheckCodePrefix&quot;)
    ...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-07 04:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/checks_gen.rs</code>:10 on 2022-12-07 04:19</div>
            <div class="timeline-body"><p>Actually, instead of <code>Display</code>, can we use <code>AsRefStr</code> from <code>strum_macros</code>? You'll see that <code>CheckCode</code> derives that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>ruff_dev/src/generate_rules_table.rs</code>:31 on 2022-12-07 04:19</div>
            <div class="timeline-body"><p>And then, if you use <code>AsRefStr</code>, this line will become:</p>
<pre><code>check_category.codes().iter().map(std::convert::AsRef::as_ref).join(&quot;, &quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-07 04:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> reviewed on 2022-12-07 04:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on <code>README.md</code>:75 on 2022-12-07 04:20</div>
            <div class="timeline-body"><p>There is <code>I25</code>, so <code>I</code> should be <code>I00</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-07 04:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>README.md</code>:96 on 2022-12-07 04:20</div>
            <div class="timeline-body"><p>Awesome! Separate PR would be best if you're up for it. (It can probably be part of <code>generate-rules-table</code> -- you can follow the logic there for how we find-and-replace sections within the README using these <code>BEGIN_PRAGMA</code> and <code>END_PRAGMA</code> constructs.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-07 04:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>README.md</code>:75 on 2022-12-07 04:21</div>
            <div class="timeline-body"><p>(I want to rename <code>I25</code> to, like, <code>TID250</code> or something.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/phillipuniverse">@phillipuniverse</a> on <code>README.md</code>:75 on 2022-12-07 12:40</div>
            <div class="timeline-body"><p>Done</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/phillipuniverse">@phillipuniverse</a> reviewed on 2022-12-07 12:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/phillipuniverse">@phillipuniverse</a> reviewed on 2022-12-07 12:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/phillipuniverse">@phillipuniverse</a> on <code>src/checks_gen.rs</code>:10 on 2022-12-07 12:41</div>
            <div class="timeline-body"><p>Done. Just for my own edification, why is <code>AsRefStr</code> better? Or just consistency with <code>CheckCode</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/phillipuniverse">@phillipuniverse</a> reviewed on 2022-12-07 12:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/phillipuniverse">@phillipuniverse</a> on <code>ruff_dev/src/generate_check_code_prefix.rs</code>:174 on 2022-12-07 12:42</div>
            <div class="timeline-body"><p>Re-ordered to be formatter-compatible by default.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @phillipuniverse on 2022-12-07 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @charliermarsh removed by @phillipuniverse on 2022-12-07 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @JonathanPlasse by @phillipuniverse on 2022-12-07 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @JonathanPlasse removed by @phillipuniverse on 2022-12-07 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @JonathanPlasse by @phillipuniverse on 2022-12-07 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @JonathanPlasse removed by @phillipuniverse on 2022-12-07 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @phillipuniverse on 2022-12-07 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @charliermarsh removed by @phillipuniverse on 2022-12-07 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @JonathanPlasse by @phillipuniverse on 2022-12-07 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @JonathanPlasse removed by @phillipuniverse on 2022-12-07 12:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @phillipuniverse on 2022-12-07 12:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> reviewed on 2022-12-07 12:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on <code>README.md</code>:75 on 2022-12-07 12:46</div>
            <div class="timeline-body"><p>So <code>I00</code>, can be <code>I</code> as it would have no conflict with other rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/phillipuniverse">@phillipuniverse</a> reviewed on 2022-12-07 12:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/phillipuniverse">@phillipuniverse</a> on <code>README.md</code>:75 on 2022-12-07 12:54</div>
            <div class="timeline-body"><p>@JonathanPlasse ok, so change it back to <code>I</code>? It currently does have a conflict with <code>I25</code> (tidy imports), the <code>TID250</code> change hasn't happened yet</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-07 14:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>README.md</code>:75 on 2022-12-07 14:21</div>
            <div class="timeline-body"><p>Yeah I believe what you have here is right.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/checks_gen.rs</code>:10 on 2022-12-07 14:22</div>
            <div class="timeline-body"><p>It's really just for consistency. I believe <code>AsRefStr</code> also avoids an allocation: https://github.com/Peternator7/strum/blob/e772e203dabd58630730c1520a2e2110eaf13fc2/strum_macros/src/lib.rs#L125.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-07 14:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2022-12-07 14:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-12-07 14:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-07 14:24</div>
            <div class="timeline-body"><p>Thanks for your contribution! Glad to have you involved!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2022-12-07 14:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/phillipuniverse">@phillipuniverse</a> reviewed on 2022-12-07 14:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/phillipuniverse">@phillipuniverse</a> on <code>README.md</code>:96 on 2022-12-07 14:35</div>
            <div class="timeline-body"><p>TOC handled in #1121</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:55:05 UTC
    </footer>
</body>
</html>
