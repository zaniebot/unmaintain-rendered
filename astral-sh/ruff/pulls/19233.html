<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Add a `--quiet` mode - astral-sh/ruff #19233</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Add a <code>--quiet</code> mode</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19233">#19233</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-07-09 12:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>Adds a <code>--quiet</code> flag which silences diagnostic, warning logs, and messages like &quot;all checks passed&quot; while retaining summary messages that indicate problems, e.g., the number of diagnostics.</p>
<p>I&#x27;m a bit on the fence regarding filtering out warning logs, because it can omit important details, e.g., the message that a fatal diagnostic was encountered. Let&#x27;s discuss that in <a href="https://github.com/astral-sh/ruff/pull/19233">astral-sh/ruff#19233</a>#discussion_r2195408693</p>
<p>The implementation recycles the <code>Printer</code> abstraction used in uv, which is intended to replace all direct usage of <code>std::io::stdout</code>. See <a href="https://github.com/astral-sh/ruff/pull/19233">astral-sh/ruff#19233</a>#discussion_r2195140197</p>
<p>I ended up futzing with the progress bar more than I probably should have to ensure it was also using the printer, but it doesn&#x27;t seem like a big deal. See <a href="https://github.com/astral-sh/ruff/pull/19233">astral-sh/ruff#19233</a>#discussion_r2195330467</p>
<p>Closes <a href="https://github.com/astral-sh/ty/issues/772">astral-sh/ty#772</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 12:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Add a `--quiet` mode&quot; to &quot;[ty] Add a `--quiet` mode&quot; by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 12:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 12:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/lib.rs</code>:391 on 2025-07-09 12:33</div>
            <div class="timeline-body"><p>I need to figure out why <a href="https://github.com/astral-sh/ruff/pull/18049">astral-sh/ruff#18049</a> was a problem here but not in uv, otherwise this could be a regression.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 14:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/printer.rs</code>:8 on 2025-07-09 14:09</div>
            <div class="timeline-body"><p>The <code>Printer</code> abstraction is lifted from uv, but is a little different here because we reuse the existing <code>VerbosityLevel</code> enum, support locking the stream, and don&#x27;t need stderr support yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 14:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/printer.rs</code>:59 on 2025-07-09 14:10</div>
            <div class="timeline-body"><p>Initially I wrote a <code>stderr</code> handler too, but we don&#x27;t actually need it here yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/printer.rs</code>:88 on 2025-07-09 14:13</div>
            <div class="timeline-body"><p>We don&#x27;t support locking in uv&#x27;s printer, but in ty we lock stdout for the hot loop of printing diagnostics which seems reasonable and worth retaining.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 14:13</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 14:13</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty_project/src/lib.rs</code>:116 on 2025-07-09 14:13</div>
            <div class="timeline-body"><p>I just renamed this for clarity, as I initially thought this was used to report more than progress.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 15:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/printer.rs</code>:48 on 2025-07-09 15:27</div>
            <div class="timeline-body"><p>I don&#x27;t love this name, but it&#x27;s a simple way to handle things for now. I could see us doing things like <code>stream_for_summary</code>, <code>stream_for_diagnostics</code>, etc. in the future?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 15:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/lib.rs</code>:403 on 2025-07-09 15:30</div>
            <div class="timeline-body"><p>Annoyingly, we want to defer creation of the <code>ProgressBar</code> but need to be able to take ownership of the <code>ProgressDrawTarget</code> so we wrap these in <code>Option</code> types. We could probably do something else, but this was the easiest solution for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 15:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/lib.rs</code>:393 on 2025-07-09 15:32</div>
            <div class="timeline-body"><p>I got a bit in the weeds here handling the progress bar. We have handling for it in uv, and I thought it&#x27;d be reasonable to copy over. Arguably, we could just cut scope here and continue to use the <code>DummyReporter</code>, but I think it&#x27;s nice to consolidate the logic for showing and hiding output in the main binary.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-07-09 15:32</div>
            <div class="timeline-body">

<code>mypy_primer</code> results
<p>No ecosystem changes detected ✅
No memory usage changes detected ✅</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/logging.rs</code>:87 on 2025-07-09 16:04</div>
            <div class="timeline-body"><p>This may actually be too much? Or we might want to use error level logs for things like the &quot;a fatal diagnostic was encountered&quot;? I don&#x27;t have strong feelings here, it just seemed like the most obvious level to use.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 16:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 16:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/logging.rs</code>:87 on 2025-07-09 16:06</div>
            <div class="timeline-body"><p>It&#x27;s also plausible this problem is obviated by using a <code>warn_user</code> system for pretty-printing important user-facing warnings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-07-09 16:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/logging.rs</code>:87 on 2025-07-09 16:15</div>
            <div class="timeline-body"><blockquote>
<p>It&#x27;s also plausible this problem is obviated by using a warn_user system for pretty-printing important user-facing warnings.</p>
</blockquote>
<p>We can&#x27;t use a <code>warn_user</code> like system because those wouldn&#x27;t show up in the LSP. That&#x27;s why we use Diagnostics for almost everything and <code>warn</code> only for cases where something unexpected went wrong but we can recover from.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 16:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/logging.rs</code>:87 on 2025-07-09 16:19</div>
            <div class="timeline-body"><p>The warning I&#x27;m talking about though is in the CLI though. (I think that&#x27;s further evidence that this level is fine and we should just consider tweaking that one warning if needed)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-07-09 16:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/logging.rs</code>:87 on 2025-07-09 16:24</div>
            <div class="timeline-body"><p>Oh sorry. I only commented on <code>warn_user</code> specifically.</p>
<blockquote>
<p>Or we might want to use error level logs for things like the &quot;a fatal diagnostic was encountered&quot;? I don&#x27;t have strong feelings here, it just seemed like the most obvious level to use.</p>
</blockquote>
<p>I think suppressing said message when using <code>--quiet</code> is fine or we should make it an error. The reason I picked warning is because it was mainly meant as a hint that you have to scroll all the way to the top to see that there are panic diagnostics.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 16:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/logging.rs</code>:87 on 2025-07-09 16:45</div>
            <div class="timeline-body"><p>Alright, I won&#x27;t worry about it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/sharkdp">@sharkdp</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-09 16:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/lib.rs</code>:403 on 2025-07-09 16:50</div>
            <div class="timeline-body"><p>Just for the record, I tried to use <code>Either</code> to avoid two <code>Options</code>, but couldn&#x27;t find a way to take ownership of the wrapped value and didn&#x27;t want to deal with changing the signature in the trait.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for <a href="https://github.com/AlexWaygood">@AlexWaygood</a> removed by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-07-09 16:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-09 20:16</div>
            <div class="timeline-body"><p>I plan on reviewing this tomorrow morning</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-10 05:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/lib.rs</code>:324 on 2025-07-10 06:03</div>
            <div class="timeline-body"><p>Rendering diagnostics is fairly expensive (especially when using the <code>full</code> format). We should avoid iterating and rendering all diagnostics if we end up discarding the output anyway</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/lib.rs</code>:403 on 2025-07-10 06:14</div>
            <div class="timeline-body"><p>Yeah, it&#x27;s a bit awkward with <code>set_files</code> taking a <code>&amp;mut</code>.</p>
<p>The following works. You could also change <code>Pending</code> to <code>Pending(Option&lt;IndicatifDrawTarget&gt;)</code></p>
<pre><code>/// A progress reporter for `ty check`.
enum IndicatifReporter {
    Pending(indicatif::ProgressDrawTarget),

    Initialized(indicatif::ProgressBar),
}

impl From&lt;Printer&gt; for IndicatifReporter {
    fn from(printer: Printer) -&gt; Self {
        Self::Pending(printer.progress_target())
    }
}

impl ty_project::ProgressReporter for IndicatifReporter {
    fn set_files(&amp;mut self, files: usize) {
        let target = match std::mem::replace(
            self,
            IndicatifReporter::Pending(indicatif::ProgressDrawTarget::hidden()),
        ) {
            Self::Pending(target) =&gt; target,
            Self::Initialized(_) =&gt; panic!(&quot;The progress reporter should only be initialized once&quot;),
        };

        let bar = indicatif::ProgressBar::with_draw_target(Some(files as u64), target);
        bar.set_style(
            indicatif::ProgressStyle::with_template(
                &quot;{msg:8.dim} {bar:60.green/dim} {pos}/{len} files&quot;,
            )
            .unwrap()
            .progress_chars(&quot;--&quot;),
        );
        bar.set_message(&quot;Checking&quot;);
        *self = Self::Initialized(bar)
    }

    fn report_file(&amp;self, _file: &amp;ruff_db::files::File) {
        match self {
            IndicatifReporter::Initialized(progress_bar) =&gt; {
                progress_bar.inc(1);
            }
            IndicatifReporter::Pending(_) =&gt; {
                panic!(&quot;`report_file` called before `set_files`&quot;)
            }
        }
    }
}
</code></pre>
<p>Both solutions aren&#x27;t really different to what you have. The only difference is that they encode the contract a bit more explicitly. I&#x27;m fine with any implementation</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/logging.rs</code>:38 on 2025-07-10 06:15</div>
            <div class="timeline-body"><p>I&#x27;d prefer to keep this as a <code>bool</code> flag. It seems more confusing to users if they can use <code>-qq</code> but it doesn&#x27;t change the behavior in anyway</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/lib.rs</code>:310 on 2025-07-10 06:16</div>
            <div class="timeline-body"><p>Shouldn&#x27;t this be printed according to the documentation of quiet:</p>
<blockquote>
<p>Silences output except for summary information.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/printer.rs</code>:48 on 2025-07-10 06:19</div>
            <div class="timeline-body"><p>I&#x27;m inclined to go with <code>stream_for_summary</code> as those are the main messages that should still be written when <code>-q</code> is used</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/printer.rs</code>:162 on 2025-07-10 06:22</div>
            <div class="timeline-body"><p>I think this should implement <code>std::io::Write</code> which is what rust&#x27;s Stdout implements</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/printer.rs</code>:85 on 2025-07-10 06:24</div>
            <div class="timeline-body"><p>Should this be a no-op if the <code>Stdout</code> already holds the lock? An alternative is to do what Rust&#x27;s stdout type does and have a separate <code>StdoutLock</code> type that <code>lock</code> returns. This avoids this question altogether because <code>StdoutLock</code> doesn&#x27;t provide a lock method.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-07-10 06:25</div>
            <div class="timeline-body"><p>Thanks. There are three changes we should make before landing but this otherwise looks good to me.</p>
<ul>
<li>We should avoid rendering the diagnostics when running in <code>--quiet</code> because that&#x27;s a lot of unnecessary work otherwise</li>
<li>Disallow <code>-qq</code> (and variance) until we actually do support other quiet modes</li>
<li>I think there&#x27;s one summary message that now gets omitted that should be rendered as part of <code>--quiet</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 11:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/printer.rs</code>:48 on 2025-07-10 11:25</div>
            <div class="timeline-body"><p>Works for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 11:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/lib.rs</code>:403 on 2025-07-10 11:26</div>
            <div class="timeline-body"><p>I like the encoded contract better, thanks for the suggestion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 11:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/lib.rs</code>:310 on 2025-07-10 11:27</div>
            <div class="timeline-body"><p>Fair, but I think the documentation should be changed there. I think a &quot;success&quot; message is not important enough to display under <code>--quiet</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/printer.rs</code>:162 on 2025-07-10 11:29</div>
            <div class="timeline-body"><p>I copied this from uv (ref <a href="https://github.com/astral-sh/uv/pull/2227">astral-sh/uv#2227</a>) maybe it&#x27;s because we&#x27;re using anstream over there? I&#x27;m fine with changing it if there aren&#x27;t other problems, I wrote both initially.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 11:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 11:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/printer.rs</code>:85 on 2025-07-10 11:30</div>
            <div class="timeline-body"><p>I&#x27;m not sure. We&#x27;d just drop the old lock (which would release it) and take a new one, which seems fine?</p>
<p>I didn&#x27;t want to introduce more types unless it mattered.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/lib.rs</code>:310 on 2025-07-10 11:35</div>
            <div class="timeline-body"><p>How is it different from <em>Found x diagnostics</em>. It captures the same information when x is 0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-07-10 11:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 11:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/logging.rs</code>:38 on 2025-07-10 11:35</div>
            <div class="timeline-body"><p>I&#x27;d like to push back on that, I think we&#x27;ll want a <code>--qq</code> silent mode to match uv and this is forwards compatible. You can also provide <code>-vvvvvvv</code> and it doesn&#x27;t do anything more.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-07-10 11:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/printer.rs</code>:85 on 2025-07-10 11:36</div>
            <div class="timeline-body"><p>I suspect this will dead lock because it constructs the new lock before dropping the old lock</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 11:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/lib.rs</code>:310 on 2025-07-10 11:41</div>
            <div class="timeline-body"><p>I think it&#x27;s important to omit this message given our previous thread on the message in Ruff <a href="https://github.com/astral-sh/ruff/pull/8631">astral-sh/ruff#8631</a>#issuecomment-2013230885</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 11:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/printer.rs</code>:48 on 2025-07-10 11:43</div>
            <div class="timeline-body"><p>The reason I didn&#x27;t do this initially is because <code>stream_for_summary</code> doesn&#x27;t really fit the use case for something like the version command</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 11:55</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/printer.rs</code>:48 on 2025-07-10 11:55</div>
            <div class="timeline-body"><p>(I&#x27;ll come up with some names though)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/printer.rs</code>:85 on 2025-07-10 11:55</div>
            <div class="timeline-body"><p>That seems fairly easy to fix, but is a good point.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 11:55</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-07-10 11:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/lib.rs</code>:310 on 2025-07-10 11:57</div>
            <div class="timeline-body"><p>Fair enough. Maybe <code>stream_for_summary</code> isn&#x27;t such a good name ;)</p>
<p>It might be good to add some documentation to <code>stdout_important</code> for when it should be used</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 11:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/lib.rs</code>:310 on 2025-07-10 11:58</div>
            <div class="timeline-body"><p>Because a message on success contains no information that isn&#x27;t represented by the exit code, but on failure the message captures the number of errors?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-07-10 12:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/logging.rs</code>:38 on 2025-07-10 12:41</div>
            <div class="timeline-body"><blockquote>
<p>I think we&#x27;ll want a --qq silent mode</p>
</blockquote>
<p>What does this do? Does it silence everything?</p>
<p>I don&#x27;t feel too strongly. I just think both approaches are forward compatible and I&#x27;m not entirely sure yet if we indeed want <code>-qq</code> in the future (because the use case isn&#x27;t clear to me not because I&#x27;m oposed to it)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-07-10 14:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/lib.rs</code>:327 on 2025-07-10 14:15</div>
            <div class="timeline-body"><p>We should move this check outside the <code>for</code> loop as the result is always the same for all diagnostics.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-07-10 14:16</div>
            <div class="timeline-body"><p>Thank you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-07-10 14:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/lib.rs</code>:327 on 2025-07-10 14:17</div>
            <div class="timeline-body"><p>Oh, never mind. It&#x27;s in here because of the <code>max_severity</code> check below</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 14:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/lib.rs</code>:327 on 2025-07-10 14:38</div>
            <div class="timeline-body"><p>Yep haha, that broke the tests and I was like.. oh mhm</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 14:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/printer.rs</code>:162 on 2025-07-10 14:38</div>
            <div class="timeline-body"><p>This is non-trivial so we dropped it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2025-07-10 14:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ty/src/logging.rs</code>:38 on 2025-07-10 14:40</div>
            <div class="timeline-body"><p>Yeah, &quot;silent&quot; mode.</p>
<p>It saves you from piping the command&#x27;s output to <code>/dev/null</code> which is error prone in various shells (as we&#x27;ve discovered in our install scripts).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-10 14:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-10 14:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-07-10 14:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:16:26 UTC
    </footer>
</body>
</html>
