<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement doc line length enforcement - astral-sh/ruff #1804</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Implement doc line length enforcement</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1804">#1804</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-01-12 03:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><p>This PR implements <code>W505</code> (<code>DocLineTooLong</code>), which is similar to <code>E501</code> (<code>LineTooLong</code>) but confined to doc lines.</p>
<p>I based the &quot;doc line&quot; definition on pycodestyle, which defines a doc line as a standalone comment or string statement. Our definition is a bit more liberal, since we consider any string statement a doc line (even if it's part of a multi-line statement) -- but that seems fine to me.</p>
<p>Note that, unusually, this rule requires custom extraction from both the token stream (to find standalone comments) and the AST (to find string statements).</p>
<p>Closes #1784.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-01-12 03:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-12 03:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-01-12 03:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stinodego">@stinodego</a> on 2023-01-12 19:48</div>
            <div class="timeline-body"><p>Thank you! Much appreciated ❤️</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-12 19:52</div>
            <div class="timeline-body"><p>@stinodego - Of course! Let me know if you notice any discrepancies. I'm detecting &quot;doc lines&quot; using a different strategy, but it <em>should</em> have identical behavior apart from a few weird edge cases (like multi-line statements that contain string expressions, e.g., <code>x = 1; &quot;standalone string&quot;; y = 2</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stinodego">@stinodego</a> on 2023-01-12 19:53</div>
            <div class="timeline-body"><p>I just tried to break it a few different ways, and it seems to work just fine for all the use cases I could come up with! Will let you know if I run into anything odd.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:55:30 UTC
    </footer>
</body>
</html>
