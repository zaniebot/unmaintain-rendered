<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add server config to filter out syntax error diagnostics - astral-sh/ruff #12059</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add server config to filter out syntax error diagnostics</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/12059">#12059</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2024-06-27 03:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a></div>
            <div class="timeline-body">Summary
<p>Follow-up from #11901</p>
<p>This PR adds a new server setting to show / hide syntax errors.</p>
Test Plan
VS Code
<p>Using <a href="https://github.com/astral-sh/ruff-vscode/pull/504">astral-sh/ruff-vscode#504</a> with the following config:</p>
<pre><code>{
  &quot;ruff.nativeServer&quot;: true,
  &quot;ruff.path&quot;: [&quot;/Users/dhruv/work/astral/ruff/target/debug/ruff&quot;],
  &quot;ruff.showSyntaxErrors&quot;: true
}
</code></pre>
<p>First, set <code>ruff.showSyntaxErrors</code> to <code>true</code>:
<img alt="Screenshot 2024-06-27 at 08 34 58" src="https://github.com/astral-sh/ruff/assets/67177269/5d77547a-a908-4a00-8714-7c00784e8679"></p>
<p>And then set it to <code>false</code>:
<img alt="Screenshot 2024-06-27 at 08 35 19" src="https://github.com/astral-sh/ruff/assets/67177269/9720f089-f10c-420b-a2c1-2bbb2245be35"></p>
Neovim
<p>Using the following Ruff server config:</p>
<pre><code>require(&#x27;lspconfig&#x27;).ruff.setup {
  init_options = {
    settings = {
      showSyntaxErrors = false,
    },
  },
}
</code></pre>
<p>First, set <code>showSyntaxErrors</code> to <code>true</code>:
<img alt="Screenshot 2024-06-27 at 08 28 03" src="https://github.com/astral-sh/ruff/assets/67177269/e694e231-91ba-47f8-8e8a-ad2e82b85a45"></p>
<p>And then set it to <code>false</code>:
<img alt="Screenshot 2024-06-27 at 08 28 20" src="https://github.com/astral-sh/ruff/assets/67177269/25b86a57-02b1-44f7-9f65-cf5fdde93b0c"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/snowsignal">@snowsignal</a> by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-06-27 03:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-06-27 03:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/snowsignal">@snowsignal</a> approved on 2024-06-27 04:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-06-27 06:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-06-27 06:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-06-27 06:29</div>
            <div class="timeline-body"><p>It&#x27;s so much easier to think about backward compatibility with the new LSP where it isn&#x27;t a combination of VS code extension version, LSP and ruff versions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-06-27 06:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_server/src/lint.rs</code>:191 on 2024-06-27 06:47</div>
            <div class="timeline-body"><p>This seemed like a quick win to avoid cloning <code>Url</code> via <code>make_key</code> for every diagnostics.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-06-27 06:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-06-27 06:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-06-27 06:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-06-27 07:04</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>ℹ️ ecosystem check <strong>encountered linter errors</strong>. (no lint changes; 1 project error)</p>
<a href="https://github.com/demisto/content">demisto/content</a> (error)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre><code>warning: The top-level linter settings are deprecated in favour of their counterparts in the `lint` section. Please update the following options in `pyproject.toml`:
  - &#x27;ignore&#x27; -&gt; &#x27;lint.ignore&#x27;
  - &#x27;select&#x27; -&gt; &#x27;lint.select&#x27;
  - &#x27;unfixable&#x27; -&gt; &#x27;lint.unfixable&#x27;
  - &#x27;per-file-ignores&#x27; -&gt; &#x27;lint.per-file-ignores&#x27;
warning: `PGH001` has been remapped to `S307`.
warning: `PGH002` has been remapped to `G010`.
warning: `PLR1701` has been remapped to `SIM101`.
ruff failed
  Cause: Selection of deprecated rule `E999` is not allowed when preview is enabled.
</code></pre>
</p>


</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:04:55 UTC
    </footer>
</body>
</html>
