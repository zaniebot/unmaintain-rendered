<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[pylint] Implement `too-many-public-methods` rule (PLR0904) - astral-sh/ruff #6179</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[pylint] Implement <code>too-many-public-methods</code> rule (PLR0904)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/6179">#6179</a>
        opened by <a href="https://github.com/jelly">@jelly</a>
        on 2023-07-30 13:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/jelly">@jelly</a> on 2023-07-30 13:57</div>
            <div class="timeline-body"><p>Implement https://pylint.pycqa.org/en/latest/user_guide/messages/refactor/too-many-public-methods.html</p>
<p>Confusingly the rule page mentions a max of 7 while in practice it is 20. https://github.com/search?q=repo%3Apylint-dev%2Fpylint+max-public-methods&amp;type=code</p>
<h2>Summary</h2>
<p>Implement pylint's R0904</p>
<h2>Test Plan</h2>
<p>Unit tests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-07-30 14:06</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>✅ ecosystem check detected no changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jelly">@jelly</a> on 2023-07-31 09:14</div>
            <div class="timeline-body"><p><code>python scripts/generate_mkdocs.py</code> succeeds locally for me, so I am not sure what's going on in CI.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff/src/rules/pylint/rules/too_many_public_methods.rs</code>:110 on 2023-08-01 10:10</div>
            <div class="timeline-body"><p>nit: destructuring in the function header is hard to read</p>
<pre><code class="language-suggestion">    class_Def: &amp;ast::StmtClassDef,
    max_methods: usize,
) {
    ast::StmtClassDef { name, body, .. } = class_def;
    let methods = body
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff/src/rules/pylint/rules/too_many_public_methods.rs</code>:112 on 2023-08-01 10:11</div>
            <div class="timeline-body"><p>wouldn't this count all fields? Relatedly, could you add some fields to the test case to make sure they aren't counted?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-08-01 10:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jelly">@jelly</a> reviewed on 2023-08-01 16:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jelly">@jelly</a> on <code>crates/ruff/src/rules/pylint/rules/too_many_public_methods.rs</code>:112 on 2023-08-01 16:18</div>
            <div class="timeline-body"><pre><code>    0       │-too_many_public_methods.py:1:7: PLR0904 Too many public methods (10 &gt; 7)
          0 │+too_many_public_methods.py:1:7: PLR0904 Too many public methods (11 &gt; 7)
    1     1 │   |
    2     2 │ 1 | class Everything:
    3     3 │   |       ^^^^^^^^^^ PLR0904
    4       │-2 |     def __init__(self):
    5       │-3 |         pass
          4 │+2 |     foo = 1
</code></pre>
<p>Woops, this is indeed not functional.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jelly">@jelly</a> reviewed on 2023-08-01 16:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jelly">@jelly</a> on <code>crates/ruff/src/rules/pylint/rules/too_many_public_methods.rs</code>:112 on 2023-08-01 16:21</div>
            <div class="timeline-body"><p>Yeah, woops that was indeed wrong.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @konstin on 2023-08-03 09:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @jelly on 2023-08-08 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2023-08-11 11:17</div>
            <div class="timeline-body"><p>lgtm, needs a review from @charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jelly">@jelly</a> on 2023-08-25 15:27</div>
            <div class="timeline-body"><p>@charliermarsh gentle ping.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-08-27 15:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/pylint/rules/too_many_public_methods.rs</code>:112 on 2023-08-27 15:17</div>
            <div class="timeline-body"><p>Can we use <code>method_visibility</code> here from <code>analyze::visibility</code>? It takes into account dunders and a few other cases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-08-27 15:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/pylint/rules/too_many_public_methods.rs</code>:108 on 2023-08-27 15:17</div>
            <div class="timeline-body"><p>Do you know if this rule should be applied to private classes? What about to classes in private modules? Do you mind checking how Pylint treats those?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jelly">@jelly</a> reviewed on 2023-08-28 08:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jelly">@jelly</a> on <code>crates/ruff/src/rules/pylint/rules/too_many_public_methods.rs</code>:108 on 2023-08-28 08:56</div>
            <div class="timeline-body"><p>What would a &quot;private module&quot; be in Python? <code>_module.py</code> ? As far as I can see <a href="https://github.com/pylint-dev/pylint/blob/main/pylint/checkers/design_analysis.py#L473">the rule</a> counts the methods except dunders. Well I assume it also ignores <code>def _foo()</code> as that would be <code>private</code> by convention in Python.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jelly">@jelly</a> reviewed on 2023-08-28 09:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jelly">@jelly</a> on <code>crates/ruff/src/rules/pylint/rules/too_many_public_methods.rs</code>:112 on 2023-08-28 09:11</div>
            <div class="timeline-body"><p><code>method_visibility</code> is not public enough (pub crate) it seems to be used here, should it be? Or should it mimmick what the module has an add a <code>to_visibility</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-08-28 17:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/pylint/rules/too_many_public_methods.rs</code>:112 on 2023-08-28 17:57</div>
            <div class="timeline-body"><p>I think it's okay to make it <code>pub</code> and use it here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-08-28 17:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/pylint/rules/too_many_public_methods.rs</code>:108 on 2023-08-28 17:58</div>
            <div class="timeline-body"><p>Yeah, something like <code>_module.py</code>, which would be considered private based on pydocstyle's definitions of public vs. private visibility for functions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @charliermarsh on 2023-08-29 23:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jelly">@jelly</a> reviewed on 2023-09-13 08:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jelly">@jelly</a> on <code>crates/ruff/src/rules/pylint/rules/too_many_public_methods.rs</code>:112 on 2023-09-13 08:06</div>
            <div class="timeline-body"><p>Applied, the changes. Please have a look.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-09-14 00:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-09-14 00:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-09-14 00:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-10-24 12:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 21:00:06 UTC
    </footer>
</body>
</html>
