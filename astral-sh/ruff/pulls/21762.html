<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] implement goto-type and display types in hovers for the remaining non-expression identifiers - astral-sh/ruff #21762</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] implement goto-type and display types in hovers for the remaining non-expression identifiers</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/21762">#21762</a>
        opened by <a href="https://github.com/Gankra">@Gankra</a>
        on 2025-12-02 19:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-02 19:45</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>The basic idea here is we already allow passing <code>Identifier</code> to several APIs that can query &quot;Expressions&quot;, so really all that's missing is trying to do it... and then teaching the inference engine to actually compute and record those types. Unfortunately, the inference changes are beyond me. They're conceptually trivial for <code>nonlocal x</code> and <code>global x</code> but the actual mechanics of refactoring the code is something I'm not gonna attempt.</p>
<p>For patterns I think we're much further away, as we infer <code>@TODO</code> for pattern captures. So even if we wired it up, it wouldnt actually be <em>useful</em>.</p>
<p>For TypeParams I think there might be no reason at all to implement this functionality, because, what will be show? The literal identifier you're hovering? I guess? (Edit: Alex begs to differ below)</p>
<ul>
<li>Fixes https://github.com/astral-sh/ty/issues/144</li>
</ul>
<h2>Test Plan</h2>
<p>Existing tests cover this, as you can see me churn them all to Unknown with the half implementation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @Gankra on 2025-12-02 19:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by @Gankra on 2025-12-02 19:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-02 19:45</div>
            <div class="timeline-body"><p>I figured I'd put this up in case anyone ever gets inspired and wants to do this, but I have no intention of finishing this feature.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2025-12-02 19:47</div>
            <div class="timeline-body"><!-- generated-comment typing_conformance_diagnostics_diff -->

<h2>Diagnostic diff on <a href="https://github.com/python/typing/tree/9f6d8ced7cd1c8d92687a4e9c96d7716452e471e/conformance">typing conformance tests</a></h2>
<p>No changes detected when running ty on typing conformance tests ✅</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2025-12-02 19:48</div>
            <div class="timeline-body"><!-- generated-comment mypy_primer -->

<h2><code>mypy_primer</code> results</h2>
<details>
<summary>Changes were detected when running on open source projects</summary>

<pre><code class="language-diff">scikit-build-core (https://github.com/scikit-build/scikit-build-core)
+ src/scikit_build_core/build/_pathutil.py:25:38: error[invalid-argument-type] Argument to function `__new__` is incorrect: Expected `str | PathLike[str]`, found `DirEntry[Path]`
+ src/scikit_build_core/build/_pathutil.py:27:24: error[invalid-argument-type] Argument to function `__new__` is incorrect: Expected `str | PathLike[str]`, found `DirEntry[Path]`
+ src/scikit_build_core/build/wheel.py:98:20: error[no-matching-overload] No overload of bound method `__init__` matches arguments
- Found 41 diagnostics
+ Found 44 diagnostics

pandas-stubs (https://github.com/pandas-dev/pandas-stubs)
- pandas-stubs/_typing.pyi:1207:16: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- Found 5815 diagnostics
+ Found 5814 diagnostics


</code></pre>
</details>

<p>No memory usage changes detected ✅</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-02 19:50</div>
            <div class="timeline-body"><blockquote>
<p>For TypeParams I think there might be no reason at all to implement this functionality, because, what will be show? The literal identifier you're hovering? I guess?</p>
</blockquote>
<p>We could show the inferred variance of the type parameter, the scope to which it is bound (might be a function/method or a class), and the type parameter's upper bound/constraints, if it has any</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Gankra on 2025-12-03 22:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 16:48:28 UTC
    </footer>
</body>
</html>
