<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8-boolean-trap`] Add setting for user defined allowed boolean trap - astral-sh/ruff #10531</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8-boolean-trap</code>] Add setting for user defined allowed boolean trap</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/10531">#10531</a>
        opened by <a href="https://github.com/augustelalande">@augustelalande</a>
        on 2024-03-23 00:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/augustelalande">@augustelalande</a> on 2024-03-23 00:27</div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>Add a setting <code>extend-allowed-calls</code> to allow users to define their own list of calls which allow boolean traps.</p>
<p>Resolves #10485.
Resolves #10356.</p>
<h2>Test Plan</h2>
<p>Extended text fixture and added setting test.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-03-23 01:01</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>✅ ecosystem check detected no format changes.</p>
<h3>Formatter (preview)</h3>
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/9128305">@9128305</a> on 2024-03-23 03:48</div>
            <div class="timeline-body"><p>Is it possible to also check the import path like it should check &quot;django.db.models.Value&quot; and not just &quot;Value&quot; usage?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-03-25 02:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rules/flake8_boolean_trap/mod.rs</code>:61 on 2024-03-25 02:29</div>
            <div class="timeline-body"><p>It's not clear to me if these should be function names, or symbol paths (like <code>[&quot;pydantic&quot;, &quot;BaseModel&quot;]</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/augustelalande">@augustelalande</a> on <code>crates/ruff_linter/src/rules/flake8_boolean_trap/mod.rs</code>:61 on 2024-03-25 02:54</div>
            <div class="timeline-body"><p>Do you mean it's not clear in the documentation/implementation? Or are you saying you're not sure how we should implement it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/augustelalande">@augustelalande</a> reviewed on 2024-03-25 02:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-03-25 03:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rules/flake8_boolean_trap/mod.rs</code>:61 on 2024-03-25 03:05</div>
            <div class="timeline-body"><p>The latter!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/augustelalande">@augustelalande</a> reviewed on 2024-03-25 04:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/augustelalande">@augustelalande</a> on <code>crates/ruff_linter/src/rules/flake8_boolean_trap/mod.rs</code>:61 on 2024-03-25 04:05</div>
            <div class="timeline-body"><p>I think symbol path gives finer control, and is less prone to false negatives. The only downside is that it is less intuitive to users, and may lead to confusion. But I think this should be ok with good documentation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/augustelalande">@augustelalande</a> reviewed on 2024-03-25 04:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/augustelalande">@augustelalande</a> on <code>crates/ruff_linter/src/rules/flake8_boolean_trap/mod.rs</code>:61 on 2024-03-25 04:06</div>
            <div class="timeline-body"><p>I will change it to symbol paths if everyone agrees.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/93578237">@93578237</a> reviewed on 2024-03-25 06:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/93578237">@93578237</a> on <code>crates/ruff_linter/src/rules/flake8_boolean_trap/mod.rs</code>:61 on 2024-03-25 06:45</div>
            <div class="timeline-body"><p>is it hard to support both?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rules/flake8_boolean_trap/mod.rs</code>:61 on 2024-03-25 14:38</div>
            <div class="timeline-body"><p>Symbol path is a little problematic because it doesn't support <em>methods</em> (e.g., there's no way to identify <code>y</code> in <code>x = pydantic.BaseModel(); x.y()</code>), and methods are a common use-case here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-03-25 14:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/augustelalande">@augustelalande</a> on 2024-03-25 16:18</div>
            <div class="timeline-body"><p>@charliermarsh I'm moving the discussion to the main thread.</p>
<p>Given your comment I think you do not want to drop support for simple function calls.</p>
<p>Then there are three options:</p>
<ol>
<li>Keep things as is with users only defining functions to ignore.</li>
<li>Implement both function names and symbol paths using a single setting. It is then up to us to determine whether the given pattern should be interpreted as a function or symbol path (I think it's not that hard?).</li>
<li>Implement both with two settings, one for symbol path, one for functions.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/augustelalande">@augustelalande</a> on 2024-03-25 16:18</div>
            <div class="timeline-body"><p>I lean more towards 2, but not strongly</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-28 01:07</div>
            <div class="timeline-body"><p>Let me quickly cross-reference with some other settings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-28 01:21</div>
            <div class="timeline-body"><p>The two linked examples, at least, seem like they would work with symbol paths. So let's start with that. (<code>extend_immutable_calls</code> works with symbol paths, so symbol paths are more consistent with existing settings.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/augustelalande">@augustelalande</a> on 2024-03-28 03:33</div>
            <div class="timeline-body"><p>Done</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-03-29 19:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-03-30 00:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-03-30 00:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-03-30 00:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-03-31 15:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 22:48:03 UTC
    </footer>
</body>
</html>
