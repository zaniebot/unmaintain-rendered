<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Only re-associate inline comments during normalization when necessary - astral-sh/ruff #1380</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Only re-associate inline comments during normalization when necessary</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1380">#1380</a>
        opened by <a href="https://github.com/squiddy">@squiddy</a>
        on 2022-12-26 07:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/squiddy">@squiddy</a> on 2022-12-26 07:59</div>
            <div class="timeline-body"><p>This is in preparation for the force-single-line isort setting. We need
to keep inline comments associated to the import itself, if possible.</p>
<p>This is the case when an <code>import from</code> statement only imports a single
name, there is no ambiguity as to where that comment belongs.</p>
<p>Input:</p>
<pre><code class="language-python">from D import a_long_name_to_force_multiple_lines # Comment 12
from D import another_long_name_to_force_multiple_lines # Comment 13
</code></pre>
<p>Before:</p>
<pre><code class="language-python">from D import (  # Comment 12  # Comment 13
    a_long_name_to_force_multiple_lines,
    another_long_name_to_force_multiple_lines,
)
</code></pre>
<p>After:</p>
<pre><code class="language-python">from D import (
    a_long_name_to_force_multiple_lines,  # Comment 12
    another_long_name_to_force_multiple_lines,  # Comment 13
)
</code></pre>
<hr />
<p>Note to reviewers:</p>
<p>I'm currently cloning the comment values not because I want to, but because I couldn't find a way to convince the compiler that it's fine (at least right now). Would appreciate any help here on how to express that better.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-26 12:51</div>
            <div class="timeline-body"><p>I was able to remove the clone, though not sure if the code became more or less clear...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2022-12-26 12:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-12-26 12:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2022-12-27 05:42</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 05:38:28 UTC
    </footer>
</body>
</html>
