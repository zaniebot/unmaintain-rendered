<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`ruff]` Ignore stub functions in `unused-async` (`RUF029`) - astral-sh/ruff #11026</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>ruff]</code> Ignore stub functions in <code>unused-async</code> (<code>RUF029</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11026">#11026</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-04-19 03:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>We should ignore methods that appear to be stubs, e.g.:</p>
<pre><code class="language-python">async def foo() -&gt; int: ...
</code></pre>
<p>Closes https://github.com/astral-sh/ruff/issues/11018.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-04-19 03:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @plredmond by @charliermarsh on 2024-04-19 03:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-04-19 04:01</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+0 -103 violations, +0 -0 fixes in 5 projects; 39 projects unchanged)</p>
<details><summary><a href="https://github.com/DisnakeDev/disnake">DisnakeDev/disnake</a> (+0 -29 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/disnake/utils.py#L522'>disnake/utils.py:522:11:</a> RUF029 Function `_assetbytes_to_base64_data` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/disnake/utils.py#L527'>disnake/utils.py:527:11:</a> RUF029 Function `_assetbytes_to_base64_data` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/autocomplete.py#L31'>examples/interactions/autocomplete.py:31:11:</a> RUF029 Function `languages_1` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/autocomplete.py#L46'>examples/interactions/autocomplete.py:46:11:</a> RUF029 Function `languages_2` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/converters.py#L16'>examples/interactions/converters.py:16:11:</a> RUF029 Function `clean_command` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/converters.py#L31'>examples/interactions/converters.py:31:11:</a> RUF029 Function `command_with_avatar` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/converters.py#L50'>examples/interactions/converters.py:50:11:</a> RUF029 Function `command_with_clsmethod` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/converters.py#L72'>examples/interactions/converters.py:72:11:</a> RUF029 Function `command_with_convmethod` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/injections.py#L125'>examples/interactions/injections.py:125:11:</a> RUF029 Function `implicit_injection` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/injections.py#L58'>examples/interactions/injections.py:58:11:</a> RUF029 Function `injected1` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/injections.py#L72'>examples/interactions/injections.py:72:11:</a> RUF029 Function `injected2` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/param.py#L23'>examples/interactions/param.py:23:11:</a> RUF029 Function `simple` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/param.py#L35'>examples/interactions/param.py:35:11:</a> RUF029 Function `other_types` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/DisnakeDev/disnake/blob/5e2ced2aa08a85ff555eb79bf70119bfa077e846/examples/interactions/param.py#L47'>examples/interactions/param.py:47:11:</a> RUF029 Function `description` is declared `async`, but doesn't `await` or use `async` features.
... 15 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/RasaHQ/rasa">RasaHQ/rasa</a> (+0 -7 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
- <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/rasa/core/channels/console.py#L106'>rasa/core/channels/console.py:106:11:</a> RUF029 Function `_get_user_input` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/rasa/core/channels/console.py#L111'>rasa/core/channels/console.py:111:11:</a> RUF029 Function `_get_user_input` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/tests/cli/test_rasa_export.py#L243'>tests/cli/test_rasa_export.py:243:15:</a> RUF029 Function `close` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/tests/core/channels/test_slack.py#L932'>tests/core/channels/test_slack.py:932:11:</a> RUF029 Function `fake_on_new_message` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/tests/core/channels/test_telegram.py#L16'>tests/core/channels/test_telegram.py:16:11:</a> RUF029 Function `noop` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/tests/core/test_broker.py#L39'>tests/core/test_broker.py:39:15:</a> RUF029 Function `connect` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/RasaHQ/rasa/blob/7807b19ad5fffab73ca1a04dc710f812115a9288/tests/core/test_channels.py#L38'>tests/core/test_channels.py:38:11:</a> RUF029 Function `noop` is declared `async`, but doesn't `await` or use `async` features.
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+0 -1 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/apache/airflow/blob/00b90fa776154b76aec7f3c8075f53ac6d30d2e8/tests/providers/google/cloud/hooks/test_dataproc.py#L68'>tests/providers/google/cloud/hooks/test_dataproc.py:68:11:</a> RUF029 Function `mock_awaitable` is declared `async`, but doesn't `await` or use `async` features.
</pre>

</p>
</details>
<details><summary><a href="https://github.com/python/typeshed">python/typeshed</a> (+0 -65 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select E,F,FA,I,PYI,RUF,UP,W</pre>
</p>
<p>

<pre>
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/staggered.pyi#L8'>stdlib/asyncio/staggered.pyi:8:11:</a> RUF029 Function `staggered_race` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/streams.pyi#L29'>stdlib/asyncio/streams.pyi:29:15:</a> RUF029 Function `open_connection` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/streams.pyi#L37'>stdlib/asyncio/streams.pyi:37:15:</a> RUF029 Function `start_server` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/streams.pyi#L48'>stdlib/asyncio/streams.pyi:48:15:</a> RUF029 Function `open_connection` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/streams.pyi#L57'>stdlib/asyncio/streams.pyi:57:15:</a> RUF029 Function `start_server` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/streams.pyi#L70'>stdlib/asyncio/streams.pyi:70:19:</a> RUF029 Function `open_unix_connection` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/streams.pyi#L73'>stdlib/asyncio/streams.pyi:73:19:</a> RUF029 Function `start_unix_server` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/streams.pyi#L77'>stdlib/asyncio/streams.pyi:77:19:</a> RUF029 Function `open_unix_connection` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/streams.pyi#L80'>stdlib/asyncio/streams.pyi:80:19:</a> RUF029 Function `start_unix_server` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/subprocess.pyi#L104'>stdlib/asyncio/subprocess.pyi:104:15:</a> RUF029 Function `create_subprocess_shell` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/subprocess.pyi#L135'>stdlib/asyncio/subprocess.pyi:135:15:</a> RUF029 Function `create_subprocess_exec` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/subprocess.pyi#L168'>stdlib/asyncio/subprocess.pyi:168:15:</a> RUF029 Function `create_subprocess_shell` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/subprocess.pyi#L199'>stdlib/asyncio/subprocess.pyi:199:15:</a> RUF029 Function `create_subprocess_exec` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/subprocess.pyi#L38'>stdlib/asyncio/subprocess.pyi:38:15:</a> RUF029 Function `create_subprocess_shell` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/subprocess.pyi#L70'>stdlib/asyncio/subprocess.pyi:70:15:</a> RUF029 Function `create_subprocess_exec` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L342'>stdlib/asyncio/tasks.pyi:342:15:</a> RUF029 Function `sleep` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L344'>stdlib/asyncio/tasks.pyi:344:15:</a> RUF029 Function `sleep` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L345'>stdlib/asyncio/tasks.pyi:345:15:</a> RUF029 Function `wait_for` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L350'>stdlib/asyncio/tasks.pyi:350:15:</a> RUF029 Function `sleep` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L352'>stdlib/asyncio/tasks.pyi:352:15:</a> RUF029 Function `sleep` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L353'>stdlib/asyncio/tasks.pyi:353:15:</a> RUF029 Function `wait_for` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L357'>stdlib/asyncio/tasks.pyi:357:15:</a> RUF029 Function `wait` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L361'>stdlib/asyncio/tasks.pyi:361:15:</a> RUF029 Function `wait` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L367'>stdlib/asyncio/tasks.pyi:367:15:</a> RUF029 Function `wait` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L371'>stdlib/asyncio/tasks.pyi:371:15:</a> RUF029 Function `wait` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L377'>stdlib/asyncio/tasks.pyi:377:15:</a> RUF029 Function `wait` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/tasks.pyi#L385'>stdlib/asyncio/tasks.pyi:385:15:</a> RUF029 Function `wait` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/asyncio/threads.pyi#L9'>stdlib/asyncio/threads.pyi:9:11:</a> RUF029 Function `to_thread` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stdlib/builtins.pyi#L1252'>stdlib/builtins.pyi:1252:15:</a> RUF029 Function `anext` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stubs/aiofiles/aiofiles/os.pyi#L100'>stubs/aiofiles/aiofiles/os.pyi:100:11:</a> RUF029 Function `rmdir` is declared `async`, but doesn't `await` or use `async` features.
- <a href='https://github.com/python/typeshed/blob/d26f1251600d3eea24fcc035742a665249958fb1/stubs/aiofiles/aiofiles/os.pyi#L103'>stubs/aiofiles/aiofiles/os.pyi:103:11:</a> RUF029 Function `removedirs` is declared `async`, but doesn't `await` or use `async` features.
... 34 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/zulip/zulip">zulip/zulip</a> (+0 -1 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/zulip/zulip/blob/342a9bd5cd923bd423e2add867b60f2ccf7be62d/zerver/lib/push_notifications.py#L183'>zerver/lib/push_notifications.py:183:15:</a> RUF029 Function `err_func` is declared `async`, but doesn't `await` or use `async` features.
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| RUF029 | 103 | 0 | 103 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-04-19 04:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-19 04:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-04-19 04:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:03:53 UTC
    </footer>
</body>
</html>
