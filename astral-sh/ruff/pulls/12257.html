<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] Rename some methods on `VendoredFileSystem` for consistency - astral-sh/ruff #12257</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] Rename some methods on <code>VendoredFileSystem</code> for consistency</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/12257">#12257</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2024-07-09 09:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Following https://github.com/astral-sh/ruff/commit/ac04380f360b1fca84435fbbf3154f61e551a871, we have a situation where the <code>ruff_db::system::System</code> trait has methods such as <code>path_exists()</code> and <code>path_metadata</code>, but the <code>VendoredFileSystem</code> struct simply calls its equivalent methods <code>exists()</code> and <code>metadata</code>. This leads to some funny-looking code here, where the two branches are doing equivalent operations with different types, but the methods being called have two different names:</p>
<p>https://github.com/astral-sh/ruff/blob/6fa4e32ad318afbec4c6997c69731bb4c256ef82/crates/red_knot_module_resolver/src/path.rs#L330-L333</p>
<p>This PR renames the methods on <code>VendoredFileSystem</code> to be consistent with the new names for the methods on the <code>System</code> trait.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @AlexWaygood on 2024-07-09 09:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @AlexWaygood on 2024-07-09 09:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @AlexWaygood on 2024-07-09 09:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-07-09 09:39</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-07-09 10:25</div>
            <div class="timeline-body"><p>I prefer the old names because <code>vendored</code> is a file system only and using the longer names aren't needed to disambiguate. It only is strange here because the two interfaces are used alongside each other. If they're used separately, the old names are more brief.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-07-09 10:48</div>
            <div class="timeline-body"><p>Yeah. I don't feel strongly. Let's see what @carljm thinks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2024-07-09 17:11</div>
            <div class="timeline-body"><p>I also don't feel strongly here and would be fine either way, but if I have to choose a preference I agree with @MichaReiser: <code>VendoredFileSystem</code> is a filesystem, so the name <code>exists()</code> is clear as-is; <code>System</code> covers more than just the filesystem, so the name needs disambiguation. <code>System</code> and <code>VendoredFileSystem</code> are not parallel, so it's ok if their method names aren't parallel.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-07-09 17:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-07-09 17:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:05:14 UTC
    </footer>
</body>
</html>
