<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Rust crate libc to v0.2.167 - astral-sh/ruff #14705</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update Rust crate libc to v0.2.167</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/14705">#14705</a>
        opened by <a href="https://github.com/renovate">@renovate</a>
        on 2024-12-02 00:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/renovate">@renovate</a></div>
            <div class="timeline-body"><p>This PR contains the following updates:</p>
<p>| Package | Type | Update | Change |
|---|---|---|---|
| <a href="https://redirect.github.com/rust-lang/libc">libc</a> | workspace.dependencies | patch | <code>0.2.164</code> -&gt; <code>0.2.167</code> |</p>
<hr>
Release Notes

rust-lang/libc (libc)

<a href="https://redirect.github.com/rust-lang/libc/releases/tag/0.2.167"><code>v0.2.167</code></a>
<p><a href="https://redirect.github.com/rust-lang/libc/compare/0.2.166...0.2.167">Compare Source</a></p>
Added
<ul>
<li>Solarish: add <code>st_fstype</code> to <code>stat</code> <a href="https://redirect.github.com/rust-lang/libc/pull/4145">#â€‹4145</a></li>
<li>Trusty: Add <code>intptr_t</code> and <code>uintptr_t</code> (<a href="https://redirect.github.com/rust-lang/libc/pull/4161">#â€‹4161</a>)</li>
</ul>
Fixed
<ul>
<li>Fix the build with <code>rustc-dep-of-std</code> <a href="https://redirect.github.com/rust-lang/libc/pull/4158">#â€‹4158</a></li>
<li>Wasi: Add back unsafe block for <code>clockid_t</code> static variables (<a href="https://redirect.github.com/rust-lang/libc/pull/4157">#â€‹4157</a>)</li>
</ul>
Cleanup
<ul>
<li>Create an internal prelude <a href="https://redirect.github.com/rust-lang/libc/pull/4161">#â€‹4161</a></li>
<li>Fix <code>unused_qualifications</code><a href="https://redirect.github.com/rust-lang/libc/pull/4132">#â€‹4132</a></li>
</ul>
Other
<ul>
<li>CI: Check various FreeBSD versions (<a href="https://redirect.github.com/rust-lang/libc/pull/4159">#â€‹4159</a>)</li>
<li>CI: add a timeout for all jobs <a href="https://redirect.github.com/rust-lang/libc/pull/4164">#â€‹4164</a></li>
<li>CI: verify MSRV for <code>wasm32-wasi</code> <a href="https://redirect.github.com/rust-lang/libc/pull/4157">#â€‹4157</a></li>
<li>Migrate to the 2021 edition <a href="https://redirect.github.com/rust-lang/libc/pull/4132">#â€‹4132</a></li>
</ul>
Removed
<ul>
<li>Remove one unused import after the edition 2021 bump</li>
</ul>
<a href="https://redirect.github.com/rust-lang/libc/releases/tag/0.2.166"><code>v0.2.166</code></a>
<p><a href="https://redirect.github.com/rust-lang/libc/compare/0.2.165...0.2.166">Compare Source</a></p>
Fixed
<p>This release resolves two cases of unintentional breakage from the previous release:</p>
<ul>
<li>Revert removal of array size hacks <a href="https://redirect.github.com/rust-lang/libc/pull/4150">#â€‹4150</a></li>
<li>Ensure <code>const extern</code> functions are always enabled <a href="https://redirect.github.com/rust-lang/libc/pull/4151">#â€‹4151</a></li>
</ul>
<a href="https://redirect.github.com/rust-lang/libc/releases/tag/0.2.165"><code>v0.2.165</code></a>
<p><a href="https://redirect.github.com/rust-lang/libc/compare/0.2.164...0.2.165">Compare Source</a></p>
Added
<ul>
<li>Android: add <code>mkostemp</code>, <code>mkostemps</code> <a href="https://redirect.github.com/rust-lang/libc/pull/3601">#â€‹3601</a></li>
<li>Android: add a few API 30 calls <a href="https://redirect.github.com/rust-lang/libc/pull/3604">#â€‹3604</a></li>
<li>Android: add missing syscall constants <a href="https://redirect.github.com/rust-lang/libc/pull/3558">#â€‹3558</a></li>
<li>Apple: add <code>in6_ifreq</code> <a href="https://redirect.github.com/rust-lang/libc/pull/3617">#â€‹3617</a></li>
<li>Apple: add missing <code>sysctl</code> net types <a href="https://redirect.github.com/rust-lang/libc/pull/4022">#â€‹4022</a> (before release: remove <code>if_family_id</code> (<a href="https://redirect.github.com/rust-lang/libc/pull/4137">#â€‹4137</a>))</li>
<li>Freebsd: add <code>kcmp</code> call support <a href="https://redirect.github.com/rust-lang/libc/pull/3746">#â€‹3746</a></li>
<li>Hurd: add <code>MAP_32BIT</code> and <code>MAP_EXCL</code> <a href="https://redirect.github.com/rust-lang/libc/pull/4127">#â€‹4127</a></li>
<li>Hurd: add <code>domainname</code> field to <code>utsname</code> (<a href="https://redirect.github.com/rust-lang/libc/pull/4089">#â€‹4089</a>)</li>
<li>Linux GNU: add <code>f_flags</code> to struct <code>statfs</code> for arm, mips, powerpc and x86 <a href="https://redirect.github.com/rust-lang/libc/pull/3663">#â€‹3663</a></li>
<li>Linux GNU: add <code>malloc_stats</code> <a href="https://redirect.github.com/rust-lang/libc/pull/3596">#â€‹3596</a></li>
<li>Linux: add ELF relocation-related structs <a href="https://redirect.github.com/rust-lang/libc/pull/3583">#â€‹3583</a></li>
<li>Linux: add <code>ptp_*</code> structs <a href="https://redirect.github.com/rust-lang/libc/pull/4113">#â€‹4113</a></li>
<li>Linux: add <code>ptp_clock_caps</code> <a href="https://redirect.github.com/rust-lang/libc/pull/4128">#â€‹4128</a></li>
<li>Linux: add <code>ptp_pin_function</code> and most <code>PTP_</code> constants <a href="https://redirect.github.com/rust-lang/libc/pull/4114">#â€‹4114</a></li>
<li>Linux: add missing AF_XDP structs &amp; constants <a href="https://redirect.github.com/rust-lang/libc/pull/3956">#â€‹3956</a></li>
<li>Linux: add missing netfilter consts (<a href="https://redirect.github.com/rust-lang/libc/pull/3734">#â€‹3734</a>)</li>
<li>Linux: add struct and constants for the <code>mount_setattr</code> syscall <a href="https://redirect.github.com/rust-lang/libc/pull/4046">#â€‹4046</a></li>
<li>Linux: add wireless API <a href="https://redirect.github.com/rust-lang/libc/pull/3441">#â€‹3441</a></li>
<li>Linux: expose the <code>len8_dlc</code> field of <code>can_frame</code> <a href="https://redirect.github.com/rust-lang/libc/pull/3357">#â€‹3357</a></li>
<li>Musl: add <code>utmpx</code> API <a href="https://redirect.github.com/rust-lang/libc/pull/3213">#â€‹3213</a></li>
<li>Musl: add missing syscall constants <a href="https://redirect.github.com/rust-lang/libc/pull/4028">#â€‹4028</a></li>
<li>NetBSD: add <code>mcontext</code>-related data for RISCV64 <a href="https://redirect.github.com/rust-lang/libc/pull/3468">#â€‹3468</a></li>
<li>Redox: add new <code>netinet</code> constants <a href="https://redirect.github.com/rust-lang/libc/pull/3586">#â€‹3586</a>)</li>
<li>Solarish: add <code>_POSIX_VDISABLE</code> (<a href="https://redirect.github.com/rust-lang/libc/pull/4103">#â€‹4103</a>)</li>
<li>Tests: Add a test that the <code>const extern fn</code> macro works <a href="https://redirect.github.com/rust-lang/libc/pull/4134">#â€‹4134</a></li>
<li>Tests: Add test of primitive types against <code>std</code> <a href="https://redirect.github.com/rust-lang/libc/pull/3616">#â€‹3616</a></li>
<li>Unix: Add <code>htonl</code>, <code>htons</code>, <code>ntohl</code>, <code>ntohs</code> <a href="https://redirect.github.com/rust-lang/libc/pull/3669">#â€‹3669</a></li>
<li>Unix: add <code>aligned_alloc</code> <a href="https://redirect.github.com/rust-lang/libc/pull/3843">#â€‹3843</a></li>
<li>Windows: add <code>aligned_realloc</code> <a href="https://redirect.github.com/rust-lang/libc/pull/3592">#â€‹3592</a></li>
</ul>
Fixed
<ul>
<li><strong>breaking</strong> Hurd: fix <code>MAP_HASSEMAPHORE</code> name (<a href="https://redirect.github.com/rust-lang/libc/pull/4127">#â€‹4127</a>)</li>
<li><strong>breaking</strong> ulibc Mips: fix <code>SA_*</code> mismatched types (<a href="https://redirect.github.com/rust-lang/libc/pull/3211">#â€‹3211</a>)</li>
<li>Aix: fix an enum FFI safety warning <a href="https://redirect.github.com/rust-lang/libc/pull/3644">#â€‹3644</a></li>
<li>Haiku: fix some typos (<a href="https://redirect.github.com/rust-lang/libc/pull/3664">#â€‹3664</a>)</li>
<li>Tests: fix <code>Elf{32,64}_Relr</code>-related tests <a href="https://redirect.github.com/rust-lang/libc/pull/3647">#â€‹3647</a></li>
<li>Tests: fix libc-tests for <code>loongarch64-linux-musl</code></li>
<li>Tests: fix some clippy warnings <a href="https://redirect.github.com/rust-lang/libc/pull/3855">#â€‹3855</a></li>
<li>Tests: fix tests on <code>riscv64gc-unknown-freebsd</code> <a href="https://redirect.github.com/rust-lang/libc/pull/4129">#â€‹4129</a></li>
</ul>
Deprecated
<ul>
<li>Apple: deprecate <code>iconv_open</code> <a href="https://redirect.github.com/rust-lang/libc/commit/25e022a22eca3634166ef472b748c297e60fcf7f"><code>25e022a</code></a></li>
<li>Apple: deprecate <code>mach_task_self</code> <a href="https://redirect.github.com/rust-lang/libc/pull/4095">#â€‹4095</a></li>
<li>Apple: update <code>mach</code> deprecation notices for things that were removed in <code>main</code> <a href="https://redirect.github.com/rust-lang/libc/pull/4097">#â€‹4097</a></li>
</ul>
Cleanup
<ul>
<li>Adjust the <code>f!</code> macro to be more flexible <a href="https://redirect.github.com/rust-lang/libc/pull/4107">#â€‹4107</a></li>
<li>Aix: remove duplicate constants <a href="https://redirect.github.com/rust-lang/libc/pull/3643">#â€‹3643</a></li>
<li>CI: make scripts more uniform <a href="https://redirect.github.com/rust-lang/libc/pull/4042">#â€‹4042</a></li>
<li>Drop the <code>libc_align</code> conditional <a href="https://redirect.github.com/rust-lang/libc/commit/b5b553d0ee7de0d4781432a9a9a0a6445dd7f34f"><code>b5b553d</code></a></li>
<li>Drop the <code>libc_cfg_target_vendor</code> conditional <a href="https://redirect.github.com/rust-lang/libc/pull/4060">#â€‹4060</a></li>
<li>Drop the <code>libc_const_size_of</code> conditional <a href="https://redirect.github.com/rust-lang/libc/commit/5a43dd2754366f99b3a83881b30246ce0e51833c"><code>5a43dd2</code></a></li>
<li>Drop the <code>libc_core_cvoid</code> conditional <a href="https://redirect.github.com/rust-lang/libc/pull/4060">#â€‹4060</a></li>
<li>Drop the <code>libc_int128</code> conditional <a href="https://redirect.github.com/rust-lang/libc/pull/4060">#â€‹4060</a></li>
<li>Drop the <code>libc_non_exhaustive</code> conditional <a href="https://redirect.github.com/rust-lang/libc/pull/4060">#â€‹4060</a></li>
<li>Drop the <code>libc_packedN</code> conditional <a href="https://redirect.github.com/rust-lang/libc/pull/4060">#â€‹4060</a></li>
<li>Drop the <code>libc_priv_mod_use</code> conditional <a href="https://redirect.github.com/rust-lang/libc/commit/19c59376d11b015009fb9b04f233a30a1bf50a91"><code>19c5937</code></a></li>
<li>Drop the <code>libc_union</code> conditional <a href="https://redirect.github.com/rust-lang/libc/commit/b9e4d8012f612dfe24147da3e69522763f92b6e3"><code>b9e4d80</code></a></li>
<li>Drop the <code>long_array</code> conditional <a href="https://redirect.github.com/rust-lang/libc/pull/4096">#â€‹4096</a></li>
<li>Drop the <code>ptr_addr_of</code> conditional <a href="https://redirect.github.com/rust-lang/libc/pull/4065">#â€‹4065</a></li>
<li>Drop warnings about deprecated cargo features <a href="https://redirect.github.com/rust-lang/libc/pull/4060">#â€‹4060</a></li>
<li>Eliminate uses of <code>struct_formatter</code> <a href="https://redirect.github.com/rust-lang/libc/pull/4074">#â€‹4074</a></li>
<li>Fix a few other array size hacks <a href="https://redirect.github.com/rust-lang/libc/commit/d63be8b69b0736753213f5d933767866a5801ee7"><code>d63be8b</code></a></li>
<li>Glibc: remove redundant definitions (<a href="https://redirect.github.com/rust-lang/libc/pull/3261">#â€‹3261</a>)</li>
<li>Musl: remove redundant definitions (<a href="https://redirect.github.com/rust-lang/libc/pull/3261">#â€‹3261</a>)</li>
<li>Musl: unify definitions of <code>siginfo_t</code> (<a href="https://redirect.github.com/rust-lang/libc/pull/3261">#â€‹3261</a>)</li>
<li>Musl: unify definitions of statfs and statfs64 (<a href="https://redirect.github.com/rust-lang/libc/pull/3261">#â€‹3261</a>)</li>
<li>Musl: unify definitions of statvfs and statvfs64 (<a href="https://redirect.github.com/rust-lang/libc/pull/3261">#â€‹3261</a>)</li>
<li>Musl: unify statx definitions (<a href="https://redirect.github.com/rust-lang/libc/pull/3978">#â€‹3978</a>)</li>
<li>Remove array size hacks for Rust &lt; 1.47 <a href="https://redirect.github.com/rust-lang/libc/commit/27ee6fe02ca0848b2af3cd747536264e4c7b697d"><code>27ee6fe</code></a></li>
<li>Remove repetitive words <a href="https://redirect.github.com/rust-lang/libc/commit/77de375891285e18a81616f7dceda6d52732eed6"><code>77de375</code></a></li>
<li>Use #[derive] for Copy/Clone in s! and friends <a href="https://redirect.github.com/rust-lang/libc/pull/4038">#â€‹4038</a></li>
<li>Use some tricks to format macro bodies <a href="https://redirect.github.com/rust-lang/libc/pull/4107">#â€‹4107</a></li>
</ul>
Other
<ul>
<li>Apply formatting to macro bodies <a href="https://redirect.github.com/rust-lang/libc/pull/4107">#â€‹4107</a></li>
<li>Bump libc-test to Rust 2021 Edition <a href="https://redirect.github.com/rust-lang/libc/pull/3905">#â€‹3905</a></li>
<li>CI: Add a check that semver files don&#x27;t contain duplicate entries <a href="https://redirect.github.com/rust-lang/libc/pull/4087">#â€‹4087</a></li>
<li>CI: Add <code>fanotify_event_info_fid</code> to FAM-exempt types <a href="https://redirect.github.com/rust-lang/libc/pull/4038">#â€‹4038</a></li>
<li>CI: Allow rustfmt to organize imports (<a href="https://redirect.github.com/rust-lang/libc/pull/4136">#â€‹4136</a>)</li>
<li>CI: Always run rustfmt <a href="https://redirect.github.com/rust-lang/libc/pull/4120">#â€‹4120</a></li>
<li>CI: Change 32-bit Docker images to use EOL repos <a href="https://redirect.github.com/rust-lang/libc/pull/4120">#â€‹4120</a></li>
<li>CI: Change 64-bit Docker images to ubuntu:24.10 <a href="https://redirect.github.com/rust-lang/libc/pull/4120">#â€‹4120</a></li>
<li>CI: Disable the check for &gt;1 s! invocation <a href="https://redirect.github.com/rust-lang/libc/pull/4107">#â€‹4107</a></li>
<li>CI: Ensure build channels get run even if FILTER is unset <a href="https://redirect.github.com/rust-lang/libc/pull/4125">#â€‹4125</a></li>
<li>CI: Ensure there is a fallback for no_std <a href="https://redirect.github.com/rust-lang/libc/pull/4125">#â€‹4125</a></li>
<li>CI: Fix cases where unset variables cause errors <a href="https://redirect.github.com/rust-lang/libc/pull/4108">#â€‹4108</a></li>
<li>CI: Naming adjustments and cleanup <a href="https://redirect.github.com/rust-lang/libc/pull/4124">#â€‹4124</a></li>
<li>CI: Only invoke rustup if running in CI <a href="https://redirect.github.com/rust-lang/libc/pull/4107">#â€‹4107</a></li>
<li>CI: Remove the logic to handle old rust versions <a href="https://redirect.github.com/rust-lang/libc/pull/4068">#â€‹4068</a></li>
<li>CI: Set -u (error on unset) in all script files <a href="https://redirect.github.com/rust-lang/libc/pull/4108">#â€‹4108</a></li>
<li>CI: add support for <code>loongarch64-unknown-linux-musl</code> <a href="https://redirect.github.com/rust-lang/libc/pull/4092">#â€‹4092</a></li>
<li>CI: make <code>aarch64-apple-darwin</code> not a nightly-only target <a href="https://redirect.github.com/rust-lang/libc/pull/4068">#â€‹4068</a></li>
<li>CI: run shellcheck on all scripts <a href="https://redirect.github.com/rust-lang/libc/pull/4042">#â€‹4042</a></li>
<li>CI: update musl headers to Linux 6.6 <a href="https://redirect.github.com/rust-lang/libc/pull/3921">#â€‹3921</a></li>
<li>CI: use qemu-sparc64 to run sparc64 tests <a href="https://redirect.github.com/rust-lang/libc/pull/4133">#â€‹4133</a></li>
<li>Drop the <code>libc_const_extern_fn</code> conditional <a href="https://redirect.github.com/rust-lang/libc/commit/674cc1f47f605038ef1aa2cce8e8bc9dac128276"><code>674cc1f</code></a></li>
<li>Drop the <code>libc_underscore_const_names</code> conditional <a href="https://redirect.github.com/rust-lang/libc/commit/f0febd5e2e50b38e05259d3afad3c9783711bcf0"><code>f0febd5</code></a></li>
<li>Explicitly set the edition to 2015 <a href="https://redirect.github.com/rust-lang/libc/pull/4058">#â€‹4058</a></li>
<li>Introduce a <code>git-blame-ignore-revs</code> file <a href="https://redirect.github.com/rust-lang/libc/pull/4107">#â€‹4107</a></li>
<li>Tests: Ignore fields as required on Ubuntu 24.10 <a href="https://redirect.github.com/rust-lang/libc/pull/4120">#â€‹4120</a></li>
<li>Tests: skip <code>ATF_*</code> constants for OpenBSD <a href="https://redirect.github.com/rust-lang/libc/pull/4088">#â€‹4088</a></li>
<li>Triagebot: Add an autolabel for CI <a href="https://redirect.github.com/rust-lang/libc/pull/4052">#â€‹4052</a></li>
</ul>


<hr>
Configuration
<p>ðŸ“… <strong>Schedule</strong>: Branch creation - &quot;before 4am on Monday&quot; (UTC), Automerge - At any time (no schedule defined).</p>
<p>ðŸš¦ <strong>Automerge</strong>: Disabled by config. Please merge this manually once you are satisfied.</p>
<p>â™» <strong>Rebasing</strong>: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.</p>
<p>ðŸ”• <strong>Ignore</strong>: Close this PR and you won&#x27;t be reminded about this update again.</p>
<hr>
<ul>
<li>[ ] If you want to rebase/retry this PR, check this box</li>
</ul>
<hr>
<p>This PR was generated by <a href="https://mend.io/renovate/">Mend Renovate</a>. View the <a href="https://developer.mend.io/github/astral-sh/ruff">repository job log</a>.</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/renovate[bot]">@renovate[bot]</a> on 2024-12-02 00:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-02 01:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-02 01:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-12-02 01:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-12-02 01:03</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>âœ… ecosystem check detected no linter changes.</p>
Linter (preview)
<p>âœ… ecosystem check detected no linter changes.</p>
Formatter (stable)
<p>âœ… ecosystem check detected no format changes.</p>
Formatter (preview)
<p>âœ… ecosystem check detected no format changes.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:09:01 UTC
    </footer>
</body>
</html>
