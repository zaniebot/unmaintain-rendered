<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8-simplify`] Detect implicit `else` cases in `needless-bool` (`SIM103`) - astral-sh/ruff #10414</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8-simplify</code>] Detect implicit <code>else</code> cases in <code>needless-bool</code> (<code>SIM103</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/10414">#10414</a>
        opened by <a href="https://github.com/ottaviohartman">@ottaviohartman</a>
        on 2024-03-15 00:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ottaviohartman">@ottaviohartman</a></div>
            <div class="timeline-body"><p>Fixes #10402</p>
Summary
<p>For SIM103, detect and simplify the following case:</p>
<p><a href="https://play.ruff.rs/d98570aa-b180-495b-8600-5c4c3fd02526">playground link</a></p>
<pre><code>def main():
    if foo &gt; 5:
        return True
    return False
</code></pre>
Test Plan
<p>Unit tested only.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ottaviohartman">@ottaviohartman</a> reviewed on 2024-03-15 00:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ottaviohartman">@ottaviohartman</a> on <code>crates/ruff_linter/src/rules/flake8_simplify/snapshots/ruff_linter__rules__flake8_simplify__tests__SIM103_SIM103.py.snap</code>:199 on 2024-03-15 00:12</div>
            <div class="timeline-body"><p>This is what I&#x27;m referencing: when <code>bool()</code> is <em>not</em> a builtin, this should have no fix available.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-03-15 00:30</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+156 -0 violations, +0 -0 fixes in 10 projects; 33 projects unchanged)</p>
<a href="https://github.com/apache/airflow">apache/airflow</a> (+32 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/apache/airflow/blob/c32d41d94d428b8f70274a298158b97fac285045/airflow/configuration.py#L1313">airflow/configuration.py:1313:13:</a> SIM103 Return the condition `value is None` directly
+ <a href="https://github.com/apache/airflow/blob/c32d41d94d428b8f70274a298158b97fac285045/airflow/dag_processing/manager.py#L1247">airflow/dag_processing/manager.py:1247:9:</a> SIM103 Return the condition `self._num_run &lt; self._max_runs` directly
+ <a href="https://github.com/apache/airflow/blob/c32d41d94d428b8f70274a298158b97fac285045/airflow/models/operator.py#L45">airflow/models/operator.py:45:5:</a> SIM103 Return the condition `task.get_closest_mapped_task_group() is not None` directly
+ <a href="https://github.com/apache/airflow/blob/c32d41d94d428b8f70274a298158b97fac285045/airflow/models/taskinstance.py#L372">airflow/models/taskinstance.py:372:5:</a> SIM103 Return the condition `isinstance(value, (bytearray, bytes, str))` directly
+ <a href="https://github.com/apache/airflow/blob/c32d41d94d428b8f70274a298158b97fac285045/airflow/operators/python.py#L72">airflow/operators/python.py:72:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/apache/airflow/blob/c32d41d94d428b8f70274a298158b97fac285045/airflow/providers/airbyte/triggers/airbyte.py#L119">airflow/providers/airbyte/triggers/airbyte.py:119:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/apache/airflow/blob/c32d41d94d428b8f70274a298158b97fac285045/airflow/providers/amazon/aws/hooks/s3.py#L648">airflow/providers/amazon/aws/hooks/s3.py:648:13:</a> SIM103 Return the condition directly
+ <a href="https://github.com/apache/airflow/blob/c32d41d94d428b8f70274a298158b97fac285045/airflow/providers/amazon/aws/sensors/athena.py#L97">airflow/providers/amazon/aws/sensors/athena.py:97:9:</a> SIM103 Return the condition `state in self.INTERMEDIATE_STATES` directly
+ <a href="https://github.com/apache/airflow/blob/c32d41d94d428b8f70274a298158b97fac285045/airflow/providers/amazon/aws/sensors/emr.py#L331">airflow/providers/amazon/aws/sensors/emr.py:331:9:</a> SIM103 Return the condition `state in self.INTERMEDIATE_STATES` directly
+ <a href="https://github.com/apache/airflow/blob/c32d41d94d428b8f70274a298158b97fac285045/airflow/providers/dbt/cloud/triggers/dbt.py#L113">airflow/providers/dbt/cloud/triggers/dbt.py:113:9:</a> SIM103 Return the condition directly
... 22 additional changes omitted for project
</pre>

</p>

<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+1 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/server_auth/auth.py#L40">examples/server/app/server_auth/auth.py:40:9:</a> SIM103 Return the condition `username == &quot;bokeh&quot; and password == &quot;bokeh&quot;` directly
</pre>

</p>

<a href="https://github.com/demisto/content">demisto/content</a> (+46 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/ARIAPacketIntelligence/Integrations/ARIAPacketIntelligence/ARIAPacketIntelligence.py#L763">Packs/ARIAPacketIntelligence/Integrations/ARIAPacketIntelligence/ARIAPacketIntelligence.py:763:9:</a> SIM103 Return the condition `RDL is None` directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/ARIAPacketIntelligence/Integrations/ARIAPacketIntelligence/ARIAPacketIntelligence.py#L778">Packs/ARIAPacketIntelligence/Integrations/ARIAPacketIntelligence/ARIAPacketIntelligence.py:778:9:</a> SIM103 Return the condition `not self._valid(self.rcs)` directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/Active_Directory_Query/Integrations/Active_Directory_Query/Active_Directory_Query.py#L347">Packs/Active_Directory_Query/Integrations/Active_Directory_Query/Active_Directory_Query.py:347:5:</a> SIM103 Return the condition `entries.get(&#x27;flat&#x27;)` directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/Base/Scripts/DBotTrainClustering/DBotTrainClustering.py#L540">Packs/Base/Scripts/DBotTrainClustering/DBotTrainClustering.py:540:5:</a> SIM103 Return the condition `not 1 &lt; n_labels &lt; n_samples` directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py#L28">Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py:28:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py#L34">Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py:34:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py#L40">Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py:40:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py#L46">Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py:46:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py#L52">Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py:52:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py#L58">Packs/BreachRx/Integrations/BreachRx/BreachRx_test.py:58:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/CheckPhish/Integrations/CheckPhish/CheckPhish.py#L144">Packs/CheckPhish/Integrations/CheckPhish/CheckPhish.py:144:5:</a> SIM103 Return the condition `res and res[&#x27;status&#x27;] == DONE_STATUS` directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/CommonScripts/Scripts/DisableUserWrapper/DisableUserWrapper_test.py#L10">Packs/CommonScripts/Scripts/DisableUserWrapper/DisableUserWrapper_test.py:10:5:</a> SIM103 Return the condition `not command1.args_lst == command2.args_lst` directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/CommonScripts/Scripts/DomainReputation/DomainReputation.py#L22">Packs/CommonScripts/Scripts/DomainReputation/DomainReputation.py:22:5:</a> SIM103 Return the condition `item[&#x27;Contents&#x27;] and &#x27;Offset&#x27; in item[&#x27;Contents&#x27;]` directly
+ <a href="https://github.com/demisto/content/blob/b6786ddf70d9422cce1c907abb6dfb06ac71c75c/Packs/CommonScripts/Scripts/FileReputation/FileReputation.py#L22">Packs/CommonScripts/Scripts/FileReputation/FileReputation.py:22:5:</a> SIM103 Return the condition `item[&#x27;Contents&#x27;] and &#x27;Offset&#x27; in item[&#x27;Contents&#x27;]` directly
... 32 additional changes omitted for project
</pre>

</p>

<a href="https://github.com/freedomofpress/securedrop">freedomofpress/securedrop</a> (+8 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/freedomofpress/securedrop/blob/4586923a5621dd55b6d4ba21beccb39f31f1a6f5/admin/bootstrap.py#L120">admin/bootstrap.py:120:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/freedomofpress/securedrop/blob/4586923a5621dd55b6d4ba21beccb39f31f1a6f5/journalist_gui/journalist_gui/SecureDropUpdater.py#L23">journalist_gui/journalist_gui/SecureDropUpdater.py:23:5:</a> SIM103 Return the condition `pwd_flag == &quot;NP&quot;` directly
+ <a href="https://github.com/freedomofpress/securedrop/blob/4586923a5621dd55b6d4ba21beccb39f31f1a6f5/securedrop/models.py#L257">securedrop/models.py:257:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/freedomofpress/securedrop/blob/4586923a5621dd55b6d4ba21beccb39f31f1a6f5/securedrop/pretty_bad_protocol/_parsers.py#L1008">securedrop/pretty_bad_protocol/_parsers.py:1008:9:</a> SIM103 Return the condition `self.fingerprint` directly
+ <a href="https://github.com/freedomofpress/securedrop/blob/4586923a5621dd55b6d4ba21beccb39f31f1a6f5/securedrop/pretty_bad_protocol/_parsers.py#L1321">securedrop/pretty_bad_protocol/_parsers.py:1321:9:</a> SIM103 Return the condition `len(self.fingerprints) == 0` directly
+ <a href="https://github.com/freedomofpress/securedrop/blob/4586923a5621dd55b6d4ba21beccb39f31f1a6f5/securedrop/pretty_bad_protocol/_parsers.py#L1425">securedrop/pretty_bad_protocol/_parsers.py:1425:9:</a> SIM103 Return the condition `len(self.fingerprints) == 0` directly
+ <a href="https://github.com/freedomofpress/securedrop/blob/4586923a5621dd55b6d4ba21beccb39f31f1a6f5/securedrop/pretty_bad_protocol/_parsers.py#L1788">securedrop/pretty_bad_protocol/_parsers.py:1788:9:</a> SIM103 Return the condition `self.ok` directly
+ <a href="https://github.com/freedomofpress/securedrop/blob/4586923a5621dd55b6d4ba21beccb39f31f1a6f5/securedrop/pretty_bad_protocol/_parsers.py#L234">securedrop/pretty_bad_protocol/_parsers.py:234:5:</a> SIM103 Return the condition `HEXADECIMAL.match(string)` directly
</pre>

</p>

<a href="https://github.com/milvus-io/pymilvus">milvus-io/pymilvus</a> (+5 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/milvus-io/pymilvus/blob/0fd83fbf44c25fc247f97afd2703740664d62bce/pymilvus/client/check.py#L166">pymilvus/client/check.py:166:5:</a> SIM103 Return the condition `(end_date - start_date).days &lt; 0` directly
+ <a href="https://github.com/milvus-io/pymilvus/blob/0fd83fbf44c25fc247f97afd2703740664d62bce/pymilvus/client/check.py#L20">pymilvus/client/check.py:20:5:</a> SIM103 Return the condition `not is_legal_host(a[0]) or not is_legal_port(a[1])` directly
+ <a href="https://github.com/milvus-io/pymilvus/blob/0fd83fbf44c25fc247f97afd2703740664d62bce/pymilvus/client/check.py#L27">pymilvus/client/check.py:27:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/milvus-io/pymilvus/blob/0fd83fbf44c25fc247f97afd2703740664d62bce/pymilvus/orm/collection.py#L1438">pymilvus/orm/collection.py:1438:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/milvus-io/pymilvus/blob/0fd83fbf44c25fc247f97afd2703740664d62bce/pymilvus/orm/iterator.py#L458">pymilvus/orm/iterator.py:458:9:</a> SIM103 Return the condition `cached_page is None or len(cached_page) &lt; count` directly
</pre>

</p>

<a href="https://github.com/mlflow/mlflow">mlflow/mlflow</a> (+11 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/mlflow/mlflow/blob/076f00b00f996d1177d3990e400e00790182f3c9/mlflow/sklearn/utils.py#L928">mlflow/sklearn/utils.py:928:9:</a> SIM103 Return the condition `not len(c.__abstractmethods__)` directly
+ <a href="https://github.com/mlflow/mlflow/blob/076f00b00f996d1177d3990e400e00790182f3c9/mlflow/tracking/_tracking_service/utils.py#L25">mlflow/tracking/_tracking_service/utils.py:25:5:</a> SIM103 Return the condition `_tracking_uri or MLFLOW_TRACKING_URI.get()` directly
+ <a href="https://github.com/mlflow/mlflow/blob/076f00b00f996d1177d3990e400e00790182f3c9/mlflow/transformers/__init__.py#L1418">mlflow/transformers/__init__.py:1418:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/mlflow/mlflow/blob/076f00b00f996d1177d3990e400e00790182f3c9/mlflow/utils/autologging_utils/__init__.py#L254">mlflow/utils/autologging_utils/__init__.py:254:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/mlflow/mlflow/blob/076f00b00f996d1177d3990e400e00790182f3c9/mlflow/utils/logging_utils.py#L101">mlflow/utils/logging_utils.py:101:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/mlflow/mlflow/blob/076f00b00f996d1177d3990e400e00790182f3c9/mlflow/utils/search_utils.py#L1199">mlflow/utils/search_utils.py:1199:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/mlflow/mlflow/blob/076f00b00f996d1177d3990e400e00790182f3c9/mlflow/utils/search_utils.py#L1396">mlflow/utils/search_utils.py:1396:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/mlflow/mlflow/blob/076f00b00f996d1177d3990e400e00790182f3c9/mlflow/utils/search_utils.py#L439">mlflow/utils/search_utils.py:439:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/mlflow/mlflow/blob/076f00b00f996d1177d3990e400e00790182f3c9/mlflow/utils/search_utils.py#L872">mlflow/utils/search_utils.py:872:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/mlflow/mlflow/blob/076f00b00f996d1177d3990e400e00790182f3c9/mlflow/utils/uri.py#L65">mlflow/utils/uri.py:65:5:</a> SIM103 Return the condition directly
... 1 additional changes omitted for project
</pre>

</p>

<a href="https://github.com/pypa/cibuildwheel">pypa/cibuildwheel</a> (+1 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/pypa/cibuildwheel/blob/510382886de7114c5f109007d314d74f04b180a4/cibuildwheel/projectfiles.py#L42">cibuildwheel/projectfiles.py:42:5:</a> SIM103 Return the condition `len(consts) != 1` directly
</pre>

</p>

<a href="https://github.com/rotki/rotki">rotki/rotki</a> (+5 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/rotki/rotki/blob/8f3efbb3146b45bbf2e0f917c30196178f96def2/rotkehlchen/chain/bitcoin/bch/utils.py#L63">rotkehlchen/chain/bitcoin/bch/utils.py:63:5:</a> SIM103 Return the condition `_polymod(_prefix_expand(prefix) + decoded) != 0` directly
+ <a href="https://github.com/rotki/rotki/blob/8f3efbb3146b45bbf2e0f917c30196178f96def2/rotkehlchen/chain/ethereum/defi/zerionsdk.py#L166">rotkehlchen/chain/ethereum/defi/zerionsdk.py:166:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/rotki/rotki/blob/8f3efbb3146b45bbf2e0f917c30196178f96def2/rotkehlchen/premium/sync.py#L161">rotkehlchen/premium/sync.py:161:9:</a> SIM103 Return the condition `diff &lt; 3600 and not force_upload` directly
+ <a href="https://github.com/rotki/rotki/blob/8f3efbb3146b45bbf2e0f917c30196178f96def2/rotkehlchen/tests/fixtures/blockchain.py#L260">rotkehlchen/tests/fixtures/blockchain.py:260:5:</a> SIM103 Return the condition `should_mock_web3` directly
+ <a href="https://github.com/rotki/rotki/blob/8f3efbb3146b45bbf2e0f917c30196178f96def2/rotkehlchen/utils/misc.py#L404">rotkehlchen/utils/misc.py:404:5:</a> SIM103 Return the condition `version.dev is None` directly
</pre>

</p>

<a href="https://github.com/scikit-build/scikit-build">scikit-build/scikit-build</a> (+2 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/scikit-build/scikit-build/blob/c97af94e3a5d4ba2228cd5425e1290e5bb4ee30a/skbuild/setuptools_wrap.py#L323">skbuild/setuptools_wrap.py:323:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/scikit-build/scikit-build/blob/c97af94e3a5d4ba2228cd5425e1290e5bb4ee30a/skbuild/setuptools_wrap.py#L348">skbuild/setuptools_wrap.py:348:5:</a> SIM103 Return the condition `&quot;sdist&quot; in given_commands and cmake_with_sdist` directly
</pre>

</p>

<a href="https://github.com/zulip/zulip">zulip/zulip</a> (+45 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/corporate/lib/stripe.py#L1027">corporate/lib/stripe.py:1027:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/corporate/lib/stripe.py#L3719">corporate/lib/stripe.py:3719:9:</a> SIM103 Return the condition `plan_tier in implemented_plan_tiers` directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/corporate/lib/stripe.py#L4125">corporate/lib/stripe.py:4125:9:</a> SIM103 Return the condition `plan_tier in implemented_plan_tiers` directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/corporate/lib/stripe.py#L4569">corporate/lib/stripe.py:4569:9:</a> SIM103 Return the condition `plan_tier in implemented_plan_tiers` directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/scripts/lib/zulip_tools.py#L150">scripts/lib/zulip_tools.py:150:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/scripts/lib/zulip_tools.py#L549">scripts/lib/zulip_tools.py:549:5:</a> SIM103 Return the condition `&quot;posix&quot; in os.name and os.geteuid() == 0` directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/zerver/actions/user_groups.py#L132">zerver/actions/user_groups.py:132:9:</a> SIM103 Return the condition `diff &lt; realm.waiting_period_threshold` directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/zerver/decorator.py#L1025">zerver/decorator.py:1025:9:</a> SIM103 Return the condition `not user_has_device(user)` directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/zerver/lib/avatar.py#L144">zerver/lib/avatar.py:144:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/zerver/lib/compatibility.py#L157">zerver/lib/compatibility.py:157:5:</a> SIM103 Return the condition directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/zerver/lib/compatibility.py#L40">zerver/lib/compatibility.py:40:5:</a> SIM103 Return the condition `timezone_now() &gt; deadline` directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/zerver/lib/markdown/__init__.py#L2057">zerver/lib/markdown/__init__.py:2057:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/zerver/lib/markdown/__init__.py#L2062">zerver/lib/markdown/__init__.py:2062:9:</a> SIM103 Return the condition directly
+ <a href="https://github.com/zulip/zulip/blob/454f2f2d95dc8b8550af3b388b4b7441fc1e32d7/zerver/lib/message.py#L1381">zerver/lib/message.py:1381:5:</a> SIM103 Return the condition directly
... 31 additional changes omitted for project
</pre>

</p>

Changes by rule (1 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| SIM103 | 156 | 156 | 0 | 0 | 0 |</p>
</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-15 00:33</div>
            <div class="timeline-body"><p>Thanks! Do you mind moving this to preview-only?</p>
<blockquote>
<p>Is there a preferred way to get the next statement or expression...</p>
</blockquote>
<p>Yes, the best prior art here would be... <code>convert_for_loop_to_any_all</code>. It will look like:</p>
<pre><code>let parent = checker.semantic().current_statement_parent()?;
let suite = traversal::suite(stmt, parent)?;
let sibling = traversal::next_sibling(stmt, suite)?;
</code></pre>
<p>So, ideally, we check if the statement is an <code>if</code> that returns a boolean constant, and <em>then</em> grab the next statement if so.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ottaviohartman">@ottaviohartman</a> on 2024-03-15 00:49</div>
            <div class="timeline-body"><blockquote>
<p>Thanks! Do you mind moving this to preview-only?</p>
</blockquote>
<p>Yep! Is there a way to partially move <code>SIM103</code> to preview? Or shall I create a new rule? (if so, <code>SIM???</code>)</p>
<pre><code>        (Flake8Simplify, &quot;103&quot;) =&gt; (RuleGroup::Stable, rules::flake8_simplify::rules::NeedlessBool),
</code></pre>
<blockquote>
<blockquote>
<p>Is there a preferred way to get the next statement or expression...</p>
</blockquote>
<p>Yes, the best prior art here would be... <code>convert_for_loop_to_any_all</code>. It will look like:</p>
<pre><code>let parent = checker.semantic().current_statement_parent()?;
let suite = traversal::suite(stmt, parent)?;
let sibling = traversal::next_sibling(stmt, suite)?;
</code></pre>
<p>So, ideally, we check if the statement is an <code>if</code> that returns a boolean constant, and <em>then</em> grab the next statement if so.</p>
</blockquote>
<p>Ah, I&#x27;ll refactor to use that instead!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-15 00:50</div>
            <div class="timeline-body"><blockquote>
<p>Yep! Is there a way to partially move SIM103 to preview?</p>
</blockquote>
<p>So typically we&#x27;d just add a check for the new codepath on <code>checker.settings.preview.is_enabled()</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2024-03-15 01:52</div>
            <div class="timeline-body"><a href="https://codspeed.io/astral-sh/ruff/branches/ottaviohartman:thartman/sim103-detect-implicit-else">CodSpeed Performance Report</a>
Merging #10414 will <strong>not alter performance</strong>
<p>Comparing <code>ottaviohartman:thartman/sim103-detect-implicit-else</code> (7ecc53d) with <code>main</code> (8619986)</p>
Summary
<p><code>✅ 30</code> untouched benchmarks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ottaviohartman">@ottaviohartman</a> on 2024-03-15 01:55</div>
            <div class="timeline-body"><p>Ready for another review @charliermarsh . Thanks for the help!</p>
<ol>
<li>Used (much simpler) sibling logic.</li>
<li>Added <code>if preview</code> to guard this new change.</li>
<li>Created preview insta snap.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ottaviohartman">@ottaviohartman</a> on 2024-03-15 02:07</div>
            <div class="timeline-body"><p>Looks like my clone() is slowing down perf tests. I&#x27;ll look into that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rules/flake8_simplify/rules/needless_bool.rs</code>:80 on 2024-03-15 02:10</div>
            <div class="timeline-body"><p>If possible... we should try to only do this if we know the <code>if_test</code> matches the condition we care about.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-03-15 02:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ottaviohartman">@ottaviohartman</a> reviewed on 2024-03-15 12:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ottaviohartman">@ottaviohartman</a> on <code>crates/ruff_linter/src/rules/flake8_simplify/rules/needless_bool.rs</code>:80 on 2024-03-15 12:40</div>
            <div class="timeline-body"><p>Good point - refactored to move this block into the match arm.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/ottaviohartman">@ottaviohartman</a> on 2024-03-15 12:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-03-18 00:09</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rules/flake8_simplify/rules/needless_bool.rs</code>:154 on 2024-03-18 00:10</div>
            <div class="timeline-body"><p>@ottaviohartman -- I was able to remove the vector allocation here by making every branch return <code>&amp;[Stmt]</code> instead of <code>&amp;Vec&lt;Stmt&gt;</code>. Then, you can do a nice trick whereby if you have an <code>&amp;T</code>, you can create <code>&amp;[T]</code> via <code>std::slice::from_ref</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-03-18 00:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-18 00:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-18 00:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;`SIM103` detect implicit `else`&quot; to &quot;[`flake8-simplify`] Detect implicit `else` cases in `needless-bool` (`SIM103`)&quot; by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-18 00:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-18 00:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-18 00:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ottaviohartman">@ottaviohartman</a> reviewed on 2024-03-18 02:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ottaviohartman">@ottaviohartman</a> on <code>crates/ruff_linter/src/rules/flake8_simplify/rules/needless_bool.rs</code>:154 on 2024-03-18 02:05</div>
            <div class="timeline-body"><p>Awesome - I&#x27;ll use that in the future.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:02:17 UTC
    </footer>
</body>
</html>
