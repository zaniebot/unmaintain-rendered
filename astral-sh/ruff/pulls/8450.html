<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`PIE804`: Prevent keyword arguments duplication - astral-sh/ruff #8450</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>PIE804</code>: Prevent keyword arguments duplication</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/8450">#8450</a>
        opened by <a href="https://github.com/T-256">@T-256</a>
        on 2023-11-03 00:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/T-256">@T-256</a> on 2023-11-03 00:48</div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>According to the https://github.com/astral-sh/ruff/issues/8402#issuecomment-1788785766</p>
<h2>Test Plan</h2>
<!-- How was it tested? -->

<p>Added new unsafe test</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-11-03 00:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/resources/test/fixtures/flake8_pie/PIE804.py</code>:24 on 2023-11-03 00:56</div>
            <div class="timeline-body"><p>Did you mean</p>
<pre><code class="language-suggestion">unsafe(**{'a': b}, **{'a': c})  # PIE804
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> requested changes on 2023-11-03 00:58</div>
            <div class="timeline-body"><p>Hm... I'm not sure just changing this fix to unsafe is the best approach. The unsafe fix will will still always result in a syntax error when applied.</p>
<p>This fix just turns a runtime error into a syntax error though:</p>
<pre><code class="language-python">def foo(*args, **kwargs):
    pass

foo(**{'a': 1}, **{'a': 2})
</code></pre>
<pre><code>‚ùØ python example.py
Traceback (most recent call last):
  File &quot;/Users/mz/eng/src/astral-sh/puffin/example.py&quot;, line 4, in &lt;module&gt;
    foo(**{'a': 1}, **{'a': 2})
TypeError: __main__.foo() got multiple values for keyword argument 'a'
</code></pre>
<p>Since the keys are static, can't we just add a guard here to determine if a key already exists?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-11-03 01:10</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>detected linter changes</strong>. (+24 -24 violations, +0 -0 fixes in 41 projects)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+24 -24 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --no-preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/operators/test_eks.py#L728'>tests/providers/amazon/aws/operators/test_eks.py:728:30:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/operators/test_eks.py#L728'>tests/providers/amazon/aws/operators/test_eks.py:728:45:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L102'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:102:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L103'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:103:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L132'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:132:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L133'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:133:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L181'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:181:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L182'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:182:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L219'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:219:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L220'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:220:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L268'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:268:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L269'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:269:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L61'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:61:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L62'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:62:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/cncf/kubernetes/utils/test_pod_manager.py#L826'>tests/providers/cncf/kubernetes/utils/test_pod_manager.py:826:30:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/cncf/kubernetes/utils/test_pod_manager.py#L826'>tests/providers/cncf/kubernetes/utils/test_pod_manager.py:826:46:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L125'>tests/providers/google/cloud/hooks/test_life_sciences.py:125:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L126'>tests/providers/google/cloud/hooks/test_life_sciences.py:126:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L154'>tests/providers/google/cloud/hooks/test_life_sciences.py:154:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L154'>tests/providers/google/cloud/hooks/test_life_sciences.py:154:34:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L231'>tests/providers/google/cloud/hooks/test_life_sciences.py:231:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L231'>tests/providers/google/cloud/hooks/test_life_sciences.py:231:34:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L259'>tests/providers/google/cloud/hooks/test_life_sciences.py:259:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L259'>tests/providers/google/cloud/hooks/test_life_sciences.py:259:34:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/operators/test_kubernetes_engine.py#L406'>tests/providers/google/cloud/operators/test_kubernetes_engine.py:406:30:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/operators/test_kubernetes_engine.py#L406'>tests/providers/google/cloud/operators/test_kubernetes_engine.py:406:45:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L100'>tests/providers/google/firebase/hooks/test_firestore.py:100:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L101'>tests/providers/google/firebase/hooks/test_firestore.py:101:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L122'>tests/providers/google/firebase/hooks/test_firestore.py:122:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L122'>tests/providers/google/firebase/hooks/test_firestore.py:122:34:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L189'>tests/providers/google/firebase/hooks/test_firestore.py:189:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L190'>tests/providers/google/firebase/hooks/test_firestore.py:190:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L216'>tests/providers/google/firebase/hooks/test_firestore.py:216:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L216'>tests/providers/google/firebase/hooks/test_firestore.py:216:34:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L109'>tests/providers/telegram/hooks/test_telegram.py:109:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L110'>tests/providers/telegram/hooks/test_telegram.py:110:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L128'>tests/providers/telegram/hooks/test_telegram.py:128:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L129'>tests/providers/telegram/hooks/test_telegram.py:129:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L147'>tests/providers/telegram/hooks/test_telegram.py:147:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L148'>tests/providers/telegram/hooks/test_telegram.py:148:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L174'>tests/providers/telegram/hooks/test_telegram.py:174:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L175'>tests/providers/telegram/hooks/test_telegram.py:175:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L194'>tests/providers/telegram/hooks/test_telegram.py:194:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L195'>tests/providers/telegram/hooks/test_telegram.py:195:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/weaviate/operators/test_weaviate.py#L49'>tests/providers/weaviate/operators/test_weaviate.py:49:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/weaviate/operators/test_weaviate.py#L50'>tests/providers/weaviate/operators/test_weaviate.py:50:71:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/utils/test_compression.py#L76'>tests/utils/test_compression.py:76:13:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/utils/test_compression.py#L77'>tests/utils/test_compression.py:77:17:</a> PIE804 [*] Unnecessary `dict` kwargs
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PIE804 | 48 | 24 | 24 | 0 | 0 |</p>
</p>
</details>

<h3>Linter (preview)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>detected linter changes</strong>. (+24 -24 violations, +0 -0 fixes in 41 projects)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+24 -24 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/operators/test_eks.py#L728'>tests/providers/amazon/aws/operators/test_eks.py:728:30:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/operators/test_eks.py#L728'>tests/providers/amazon/aws/operators/test_eks.py:728:45:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L102'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:102:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L103'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:103:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L132'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:132:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L133'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:133:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L181'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:181:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L182'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:182:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L219'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:219:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L220'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:220:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L268'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:268:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L269'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:269:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L61'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:61:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L62'>tests/providers/amazon/aws/utils/test_waiter_with_logging.py:62:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/cncf/kubernetes/utils/test_pod_manager.py#L826'>tests/providers/cncf/kubernetes/utils/test_pod_manager.py:826:30:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/cncf/kubernetes/utils/test_pod_manager.py#L826'>tests/providers/cncf/kubernetes/utils/test_pod_manager.py:826:46:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L125'>tests/providers/google/cloud/hooks/test_life_sciences.py:125:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L126'>tests/providers/google/cloud/hooks/test_life_sciences.py:126:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L154'>tests/providers/google/cloud/hooks/test_life_sciences.py:154:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L154'>tests/providers/google/cloud/hooks/test_life_sciences.py:154:34:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L231'>tests/providers/google/cloud/hooks/test_life_sciences.py:231:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L231'>tests/providers/google/cloud/hooks/test_life_sciences.py:231:34:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L259'>tests/providers/google/cloud/hooks/test_life_sciences.py:259:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/hooks/test_life_sciences.py#L259'>tests/providers/google/cloud/hooks/test_life_sciences.py:259:34:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/operators/test_kubernetes_engine.py#L406'>tests/providers/google/cloud/operators/test_kubernetes_engine.py:406:30:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/cloud/operators/test_kubernetes_engine.py#L406'>tests/providers/google/cloud/operators/test_kubernetes_engine.py:406:45:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L100'>tests/providers/google/firebase/hooks/test_firestore.py:100:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L101'>tests/providers/google/firebase/hooks/test_firestore.py:101:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L122'>tests/providers/google/firebase/hooks/test_firestore.py:122:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L122'>tests/providers/google/firebase/hooks/test_firestore.py:122:34:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L189'>tests/providers/google/firebase/hooks/test_firestore.py:189:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L190'>tests/providers/google/firebase/hooks/test_firestore.py:190:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L216'>tests/providers/google/firebase/hooks/test_firestore.py:216:24:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/google/firebase/hooks/test_firestore.py#L216'>tests/providers/google/firebase/hooks/test_firestore.py:216:34:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L109'>tests/providers/telegram/hooks/test_telegram.py:109:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L110'>tests/providers/telegram/hooks/test_telegram.py:110:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L128'>tests/providers/telegram/hooks/test_telegram.py:128:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L129'>tests/providers/telegram/hooks/test_telegram.py:129:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L147'>tests/providers/telegram/hooks/test_telegram.py:147:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L148'>tests/providers/telegram/hooks/test_telegram.py:148:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L174'>tests/providers/telegram/hooks/test_telegram.py:174:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L175'>tests/providers/telegram/hooks/test_telegram.py:175:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L194'>tests/providers/telegram/hooks/test_telegram.py:194:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/telegram/hooks/test_telegram.py#L195'>tests/providers/telegram/hooks/test_telegram.py:195:13:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/weaviate/operators/test_weaviate.py#L49'>tests/providers/weaviate/operators/test_weaviate.py:49:9:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/providers/weaviate/operators/test_weaviate.py#L50'>tests/providers/weaviate/operators/test_weaviate.py:50:71:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/utils/test_compression.py#L76'>tests/utils/test_compression.py:76:13:</a> PIE804 [*] Unnecessary `dict` kwargs
+ <a href='https://github.com/apache/airflow/blob/6f57ee12564759892af1152606af5373d2b709c0/tests/utils/test_compression.py#L77'>tests/utils/test_compression.py:77:17:</a> PIE804 [*] Unnecessary `dict` kwargs
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PIE804 | 48 | 24 | 24 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @T-256 on 2023-11-03 02:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`PIE804`: Convert to unsafe autofixes" to "`PIE804`: Prevent keyword arguments duplication" by @T-256 on 2023-11-03 04:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @T-256 on 2023-11-03 04:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rules/flake8_pie/rules/unnecessary_dict_kwargs.rs</code>:56 on 2023-11-03 14:59</div>
            <div class="timeline-body"><p>Should this be a <code>Vec</code>? Why not a <code>HashSet</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-11-03 15:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-03 15:06</div>
            <div class="timeline-body"><p>While this doesn't introduce a syntax error, there's still an error that I don't think any lint rule addresses yet. Maybe we should also consider a rule that catches duplicate keyword arguments?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/resources/test/fixtures/flake8_pie/PIE804.py</code>:24 on 2023-11-03 15:08</div>
            <div class="timeline-body"><p>We should add a comment explaining this test case (and its not unsafe anymore)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-11-03 15:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rules/flake8_pie/rules/unnecessary_dict_kwargs.rs</code>:93 on 2023-11-03 15:09</div>
            <div class="timeline-body"><p><code>HashSet.insert</code> will return a bool https://doc.rust-lang.org/std/collections/struct.HashSet.html#method.insert</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-11-03 15:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2023-11-03 15:18</div>
            <div class="timeline-body"><p>Sorry for all violations, I'm not expert in Rust, they are fixing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2023-11-03 16:08</div>
            <div class="timeline-body"><blockquote>
<p>Maybe we should also consider a rule that catches duplicate keyword arguments?</p>
</blockquote>
<p>Perhaps I could work on it, which namespace should put this rule?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2023-11-06 03:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/resources/test/fixtures/flake8_pie/PIE804.py</code>:25 on 2023-11-06 03:19</div>
            <div class="timeline-body"><p>How would this work with positional arguments? For example,</p>
<pre><code class="language-python">def abc(a):
	pass

abc(1, **{'a': 2})
</code></pre>
<p>Correct me if I'm wrong but I guess it would fix it to <code>abc(1, a=2)</code> which isn't a syntax error although it's a runtime error.</p>
<p>I don't think this is in scope for this rule so maybe we could just highlight it in the docs. I'll leave this up to @zanieb as the main reviewer :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/T-256">@T-256</a> reviewed on 2023-11-06 11:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/T-256">@T-256</a> on <code>crates/ruff_linter/resources/test/fixtures/flake8_pie/PIE804.py</code>:25 on 2023-11-06 11:39</div>
            <div class="timeline-body"><p>Yes, needs info in docs, with considering bellow code as correct:</p>
<pre><code class="language-py">def abc(a, /, **kw): ...

abc(1, **{'a': 2})
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-11-06 16:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/resources/test/fixtures/flake8_pie/PIE804.py</code>:25 on 2023-11-06 16:12</div>
            <div class="timeline-body"><p>Yeah since we're just transforming invalid code at runtime to more invalid code that seems fine. We could probably include this in a new rule too üò¨</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-06 16:13</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>Maybe we should also consider a rule that catches duplicate keyword arguments?</p>
</blockquote>
<p>Perhaps I could work on it, which namespace should put this rule?</p>
</blockquote>
<p>The first step is probably a new issue for discussion. We could probably encompass the positional case in the same issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2023-11-06 16:55</div>
            <div class="timeline-body"><p>Fix safety added to docs.</p>
<p>@zanieb Can you open issue for the new rule? Since I don't know what's correct behavior for new rule on:</p>
<pre><code>abc(a=1, **{'a': 2})
</code></pre>
<p>If function definition uses <code>/</code> for kwargs then above function calling is correct. It's not easy get access to definition for checking <code>/</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2023-11-06 22:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @T-256 on 2023-11-10 12:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-16 01:00</div>
            <div class="timeline-body"><p>@zanieb - Relatedly, there's now a PR for duplicate keyword arguments: https://github.com/astral-sh/ruff/pull/8706</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-11-22 18:13</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rules/flake8_pie/snapshots/ruff_linter__rules__flake8_pie__tests__PIE804_PIE804.py.snap</code>:136 on 2023-11-22 18:13</div>
            <div class="timeline-body"><p>Sorry about the delay in the review here!</p>
<p>Should we even offer to fix the first one if the whole thing is invalid?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/T-256">@T-256</a> reviewed on 2023-11-23 07:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/T-256">@T-256</a> on <code>crates/ruff_linter/src/rules/flake8_pie/snapshots/ruff_linter__rules__flake8_pie__tests__PIE804_PIE804.py.snap</code>:136 on 2023-11-23 07:50</div>
            <div class="timeline-body"><p>Fix does have exactly the same behavior and doesn't change the code.
Also, only syntax errors could be unsafe fix, so it doesn't even have need to be unsafe (discussed above)</p>
<p>If we want to change it to unsafe Or sometimes fixable violation, we should also consider this:</p>
<pre><code class="language-py">abc(**a, **{'b': 0})
</code></pre>
<p>where <code>a</code> may have <code>b</code> key inside.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/T-256">@T-256</a> reviewed on 2023-11-23 07:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/T-256">@T-256</a> on <code>crates/ruff_linter/src/rules/flake8_pie/snapshots/ruff_linter__rules__flake8_pie__tests__PIE804_PIE804.py.snap</code>:136 on 2023-11-23 07:54</div>
            <div class="timeline-body"><p>I think it need another rule when there is multiple unknown keyword unpacking on calling callables.
examples:</p>
<pre><code>abc(**a, **b)
abc(**a, **{'b': 0})
abc(a=2, **b)
</code></pre>
<p>all of these potentially can be runtime error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-11-28 20:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rules/flake8_pie/snapshots/ruff_linter__rules__flake8_pie__tests__PIE804_PIE804.py.snap</code>:136 on 2023-11-28 20:10</div>
            <div class="timeline-body"><blockquote>
<p>Fix does have exactly the same behavior and doesn't change the code.</p>
</blockquote>
<p>Yes but the &quot;same behavior&quot; here is a runtime error. I'm worried it will be confusing to users to fix one violation of this then not the second. We cannot fix the second violation because we don't want to introduce a syntax error. It might be clearer to the user not suggesting <em>any</em> fixes when we can tell the code has a runtime error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-12-12 23:12</div>
            <div class="timeline-body"><p>I modified to match Zanie's feedback, but otherwise LGTM.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-12-12 23:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-12-12 23:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-12-12 23:19</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 23:31:43 UTC
    </footer>
</body>
</html>
