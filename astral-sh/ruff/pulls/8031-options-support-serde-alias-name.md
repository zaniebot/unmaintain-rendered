```yaml
number: 8031
title: "Options: Support `#[serde(alias = name)]`"
type: pull_request
state: closed
author: MichaReiser
labels:
  - internal
assignees: []
base: main
head: options-aliases
created_at: 2023-10-17T23:52:44Z
updated_at: 2023-10-20T04:54:40Z
url: https://github.com/astral-sh/ruff/pull/8031
synced_at: 2026-01-12T15:55:25Z
```

# Options: Support `#[serde(alias = name)]`

---

_@MichaReiser_

## Summary

This PR adds support for serde's `#[serde(alias="name")]` field-attribute to our options code generator. Simplifying supporting aliases for the same setting. 

I'm unsure if we should land this change. I may not end up using it for `line-length` because I think it's better to actually deprecate these options rather than supporting both (by adding support for Rust's `deprecated` attribute). However, it is a neat feature and it already works. 

## Test Plan

I changed `line-length` to 


```rust
    /// The line length to use when enforcing long-lines violations (like
    /// `E501`). Must be greater than `0` and less than or equal to `320`.
    #[option(
        default = "88",
        value_type = "int",
        example = r#"
        # Allow lines to be as long as 120 characters.
        line-length = 120
        "#
    )]
    #[serde(alias = "line-width", alias = "max-line-length")]
    pub line_length: Option<LineLength>,
```

And generated the options markdown

<img width="607" alt="Screenshot 2023-10-18 at 08 51 25" src="https://github.com/astral-sh/ruff/assets/1203881/cec6774c-9c89-4a13-a98b-fa0722c42cb6">


---

_Comment by @MichaReiser on 2023-10-17 23:52_

Current dependencies on/for this PR:
* main
  * **PR #8000** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8000" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
    * **PR #8002** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8002" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
      * **PR #8032** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8032" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
      * **PR #8006** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8006" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
        * **PR #8035** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8035" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
          * **PR #8010** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8010" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
            * **PR #8082** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8082" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
              * **PR #8088** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8088" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
            * **PR #8039** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8039" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
        * **PR #8031** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8031" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a>  ðŸ‘ˆ

This comment was auto-generated by [Graphite](https://app.graphite.dev/github/pr/astral-sh/ruff/8031?utm_source=stack-comment).

---

_Label `internal` added by @MichaReiser on 2023-10-17 23:53_

---

_@charliermarsh reviewed on 2023-10-17 23:56_

---

_Review comment by @charliermarsh on `crates/ruff_workspace/src/options.rs`:364 on 2023-10-17 23:56_

Is `max-line-length` for convenience, or something we once supported?

---

_@MichaReiser reviewed on 2023-10-17 23:58_

---

_Review comment by @MichaReiser on `crates/ruff_workspace/src/options.rs`:364 on 2023-10-17 23:58_

That was a test-only change that I accidentally committed... I reverted the change

---

_Comment by @github-actions[bot] on 2023-10-18 06:59_

## PR Check Results
### Ecosystem
âœ… ecosystem check detected no changes.



---

_Comment by @MichaReiser on 2023-10-19 00:05_

schemars doesn't support aliases. Closing for now

---

_Closed by @MichaReiser on 2023-10-19 00:05_

---
