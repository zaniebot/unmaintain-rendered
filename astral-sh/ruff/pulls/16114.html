<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check for backtick-quoted shortcut links in CI - astral-sh/ruff #16114</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Check for backtick-quoted shortcut links in CI</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16114">#16114</a>
        opened by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a>
        on 2025-02-12 11:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-02-12 11:05</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Follow-up to #16035.</p>
<p><code>check_docs_formatted.py</code> will now report backtick-quoted shortcut links in rule documentation. It uses a regular expression to find them. Such a link:</p>
<ul>
<li>Starts with <code>[</code>, followed by <code>`</code>, then a &quot;name&quot; sequence of at least one non-backtick non-newline character, followed by another <code>`</code>, then ends with <code>]</code>.</li>
<li>Is not followed by either a <code>[</code> or a <code>(</code>.</li>
<li>Is not placed within a code block.</li>
</ul>
<p>If the name is a known Ruff option name, that link is not considered a violation.</p>
<h2>Test Plan</h2>
<p>Manual.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-02-12 11:17</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>✅ ecosystem check detected no format changes.</p>
<h3>Formatter (preview)</h3>
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by @AlexWaygood on 2025-02-12 12:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>scripts/check_docs_formatted.py</code>:20 on 2025-02-13 08:37</div>
            <div class="timeline-body"><p>Can you explain what this change is about?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>scripts/check_docs_formatted.py</code>:26 on 2025-02-13 08:38</div>
            <div class="timeline-body"><p>I'm not sure what this comment is telling me and it's also a rather long article. It would be good to write a short summary here of what trick you apply here. You can still link to the website for the curious once.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>scripts/check_docs_formatted.py</code>:254 on 2025-02-13 08:42</div>
            <div class="timeline-body"><p>I find the triple ` somewhat confusing because it wasn't clear to me if it actually matches three backticks or not. I'd probably use regualr quotes here or a colon</p>
<pre><code class="language-suggestion">    &quot;&quot;&quot;Check for links of the form: [`foobar`].
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>scripts/check_docs_formatted.py</code>:361 on 2025-02-13 08:42</div>
            <div class="timeline-body"><pre><code class="language-suggestion">        print(&quot;Do not use backticked shortcut links of the form: [`foobar`].&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>scripts/check_docs_formatted.py</code>:34 on 2025-02-13 08:43</div>
            <div class="timeline-body"><p>Maybe that's the trick. It might be worth explaining why we include the snipped regex here (I see we skip it below)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-02-13 08:44</div>
            <div class="timeline-body"><p>Thanks, this is great. I only have a few suggestions around commenting the code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-13 14:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>scripts/check_docs_formatted.py</code>:20 on 2025-02-13 14:09</div>
            <div class="timeline-body"><p>This change was necessary because <code>SNIPPED_RE</code> is now part of <code>BACKTICKED_SHORTCUT_LINK_RE</code>, which is compiled using <code>(?x)</code>: <code>*</code> would be target-less otherwise, as whitespace are ignored.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-13 14:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>scripts/check_docs_formatted.py</code>:254 on 2025-02-13 14:12</div>
            <div class="timeline-body"><p>Changed, but this is supposed to be what docstring conventions are for.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-13 14:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>scripts/check_docs_formatted.py</code>:254 on 2025-02-13 14:30</div>
            <div class="timeline-body"><p>Can you say more about what docstring conventions you mean? It might be that this is a convention that I'm not familiar with</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-13 15:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>scripts/check_docs_formatted.py</code>:254 on 2025-02-13 15:00</div>
            <div class="timeline-body"><p>For example, here's how I would rewrite the docstring in pseudo-ReST:</p>
<pre><code class="language-rest">&quot;&quot;&quot;Check for links of the form ``[`foobar`]``.

See explanation at :ref:`#16010`.
&quot;&quot;&quot;
</code></pre>
<p>Note the two pairs of backticks. That's how ReST recognizes text meant to represent code. If the convention is clear, then the meaning will also be clear.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-02-13 15:04</div>
            <div class="timeline-body"><p>With this merged, I will be able to rest easy and monkeypatch the rest of the broken links client-side (not that I think I should, though) as they will be guaranteed to be option links.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2025-02-14 07:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-02-14 07:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-02-14 08:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 19:57:53 UTC
    </footer>
</body>
</html>
