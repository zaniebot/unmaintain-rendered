<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] add an `I_KNOW_TY_IS_PRE_RELEASE` env var to turn off the pre-release warning - astral-sh/ruff #19380</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] add an <code>I_KNOW_TY_IS_PRE_RELEASE</code> env var to turn off the pre-release warning</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19380">#19380</a>
        opened by <a href="https://github.com/oconnor663">@oconnor663</a>
        on 2025-07-16 01:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a></div>
            <div class="timeline-body"><p><em>No description provided.</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-07-16 01:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-07-16 01:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-07-16 01:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/sharkdp">@sharkdp</a> by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-07-16 01:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-07-16 01:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;add an `I_KNOW_TY_IS_PRE_RELEASE` env var to turn off the pre-release warning&quot; to &quot;[ty] add an `I_KNOW_TY_IS_PRE_RELEASE` env var to turn off the pre-release warning&quot; by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-07-16 01:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-07-16 01:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-07-16 01:19</div>
            <div class="timeline-body"><p>For what it&#x27;s worth, in uv we tend to use the <code>--preview</code> flag for this. We warn if you use features that are in preview without providing the <code>--preview</code> flag, and providing the <code>--preview</code> flag explicitly turns off those warnings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-07-16 01:20</div>
            <div class="timeline-body">

<code>mypy_primer</code> results
<p>No ecosystem changes detected ✅
No memory usage changes detected ✅</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-07-16 01:51</div>
            <div class="timeline-body"><p>I&#x27;d be equally happy either way. I mostly run <code>ty</code> via a shell alias that builds my local checkout, and I could toss <code>--preview</code> in there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> approved on 2025-07-16 06:13</div>
            <div class="timeline-body"><p>I&#x27;d be fine with adding this temporarily, seems like the easiest solution. And there&#x27;s no risk of breaking anyone once we remove it. Should maybe start with <code>TY_</code> though for consistency (https://docs.astral.sh/ty/reference/env/)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty/src/lib.rs</code>:71 on 2025-07-16 07:07</div>
            <div class="timeline-body"><p>The environment variable needs. to be added to https://github.com/astral-sh/ruff/blob/35a33f045eecb6652b5c73f82dce26e6c610c3b8/crates/ty_static/src/env_vars.rs#L7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-07-16 07:09</div>
            <div class="timeline-body"><p>I feel a bit conflicted about this. It&#x27;s obviously the easiest solution but it&#x27;s not what we want to do long term and we haven&#x27;t received any user reports yet that they find it annoying.</p>
<p>It&#x27;s also somewhat intentional that the warning is annoying because it was intended as a way to discourage using ty in production because we know it isn&#x27;t ready yet.</p>
<p>What are the cases where the message get sinto your way? Could you use <code>--quiet</code> instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-07-16 13:01</div>
            <div class="timeline-body"><blockquote>
<p>I&#x27;d be equally happy either way. I mostly run ty via a shell alias that builds my local checkout, and I could toss --preview in there.</p>
</blockquote>
<p>(Just for completeness, if you used <code>--preview</code> to solve this problem, I&#x27;d also expect <code>TY_PREVIEW</code> to exist.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-07-18 16:51</div>
            <div class="timeline-body"><blockquote>
<p>What are the cases where the message gets into your way?</p>
</blockquote>
<p>Mostly I find myself running <code>ty check</code> on lots of small examples (do other folks have different workflows?), and it&#x27;s slightly annoying to see that warning every time. But I wouldn&#x27;t go so far as to say it gets in my way :)</p>
<blockquote>
<p>Could you use --quiet instead?</p>
</blockquote>
<p>IIUC that hides the diagnostic messages too, but I want to see those.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for <a href="https://github.com/carljm">@carljm</a> removed by <a href="https://github.com/carljm">@carljm</a> on 2025-07-18 23:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-07-18 23:32</div>
            <div class="timeline-body"><p>I have no opinion here and will leave this up to @MichaReiser :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-19 13:47</div>
            <div class="timeline-body"><p>I&#x27;d prefer to either have a solution that works for users too (and that we recommend) or leave it as is (but I also don&#x27;t feel strongly to object, it&#x27;s just not high on my priority list).</p>
<p>We probably want to have something like a preview mode and we could add that instead.</p>
<p>A hacky solution for now would be to move the log message out of <code>lib.rs</code> and into another module so that it can be suppressed with <code>TY_LOG</code>: <code>TY_LOG=ty=info,ty::warn=error</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for <a href="https://github.com/AlexWaygood">@AlexWaygood</a> removed by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-07-21 13:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-07-22 15:10</div>
            <div class="timeline-body"><p>Ok I&#x27;ll close this for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-07-22 15:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:16:40 UTC
    </footer>
</body>
</html>
