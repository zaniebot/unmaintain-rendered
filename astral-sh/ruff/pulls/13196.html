<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[pylint] Implement `consider-using-assignment-expr` (`R6103`) - astral-sh/ruff #13196</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[pylint] Implement <code>consider-using-assignment-expr</code> (<code>R6103</code>)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/13196">#13196</a>
        opened by <a href="https://github.com/vincevannoort">@vincevannoort</a>
        on 2024-09-01 17:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/vincevannoort">@vincevannoort</a> on 2024-09-01 17:31</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This pull request implements the <code>R6103</code> pylint rule: <a href="https://pylint.readthedocs.io/en/latest/user_guide/messages/refactor/consider-using-assignment-expr.html">pylint documentation</a>.</p>
<p>It checks assignments which are directly followed by if statements using that expression:</p>
<pre><code class="language-python">test1 = &quot;example&quot;
if test1:
    print(test1)
</code></pre>
<p>And suggest to use the <code>:=</code> operator to</p>
<pre><code class="language-python">if test1 := &quot;example&quot;:
    print(test1)
</code></pre>
<h2>Test Plan</h2>
<p>I have added test cases, and checked some of the <code>ruff ecosystem</code> results.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2024-09-01 17:36</div>
            <div class="timeline-body"><!-- __CODSPEED_PERFORMANCE_REPORT_COMMENT__ -->

<!-- __CODSPEED_INSTRUMENTATION_PERFORMANCE_REPORT_COMMENT__ -->

<h2><a href="https://codspeed.io/astral-sh/ruff/branches/vincevannoort%3Aconsider-using-assignment-expr">CodSpeed Performance Report</a></h2>
<h3>Merging #13196 will <strong>not alter performance</strong></h3>
<p><sub>Comparing <code>vincevannoort:consider-using-assignment-expr</code> (59a04d8) with <code>main</code> (f8093b6)</sub></p>
<h3>Summary</h3>
<p><code>‚úÖ 32</code> untouched benchmarks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[WIP] Pylint `R6103`" to "[pylint][WIP] Implement `R6103`" by @vincevannoort on 2024-09-01 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[pylint][WIP] Implement `R6103`" to "[WIP] [pylint] Implement `R6103`" by @vincevannoort on 2024-09-01 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-09-01 20:31</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>detected linter changes</strong>. (+4612 -0 violations, +0 -0 fixes in 19 projects; 36 projects unchanged)</p>
<details><summary><a href="https://github.com/aiven/aiven-client">aiven/aiven-client</a> (+21 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/aiven/aiven-client/blob/a1c1eebed1a26079076e9593709118e9d9931f33/aiven/client/argx.py#L158'>aiven/client/argx.py:158:16:</a> PLR6103 Use walrus operator `(arg_list := getattr(func, ARG_LIST_PROP, None))`.
+ <a href='https://github.com/aiven/aiven-client/blob/a1c1eebed1a26079076e9593709118e9d9931f33/aiven/client/argx.py#L251'>aiven/client/argx.py:251:16:</a> PLR6103 Use walrus operator `(cat := tuple(cats[:level + 1]))`.
+ <a href='https://github.com/aiven/aiven-client/blob/a1c1eebed1a26079076e9593709118e9d9931f33/aiven/client/cli.py#L1453'>aiven/client/cli.py:1453:12:</a> PLR6103 Use walrus operator `(route := self.args.route)`.
+ <a href='https://github.com/aiven/aiven-client/blob/a1c1eebed1a26079076e9593709118e9d9931f33/aiven/client/cli.py#L1470'>aiven/client/cli.py:1470:12:</a> PLR6103 Use walrus operator `(privatelink_connection_id := self.args.privatelink_connection_id)`.
+ <a href='https://github.com/aiven/aiven-client/blob/a1c1eebed1a26079076e9593709118e9d9931f33/aiven/client/cli.py#L1828'>aiven/client/cli.py:1828:16:</a> PLR6103 Use walrus operator `(value := arg_vars[key])`.
+ <a href='https://github.com/aiven/aiven-client/blob/a1c1eebed1a26079076e9593709118e9d9931f33/aiven/client/cli.py#L1849'>aiven/client/cli.py:1849:12:</a> PLR6103 Use walrus operator `(access_control := self._parse_access_control())`.
+ <a href='https://github.com/aiven/aiven-client/blob/a1c1eebed1a26079076e9593709118e9d9931f33/aiven/client/cli.py#L280'>aiven/client/cli.py:280:12:</a> PLR6103 Use walrus operator `(password := os.environ.get(var))`.
+ <a href='https://github.com/aiven/aiven-client/blob/a1c1eebed1a26079076e9593709118e9d9931f33/aiven/client/cli.py#L329'>aiven/client/cli.py:329:20:</a> PLR6103 Use walrus operator `(arg_list := getattr(prop, argx.ARG_LIST_PROP, None))`.
+ <a href='https://github.com/aiven/aiven-client/blob/a1c1eebed1a26079076e9593709118e9d9931f33/aiven/client/cli.py#L3581'>aiven/client/cli.py:3581:20:</a> PLR6103 Use walrus operator `(user_input := input("Re-enter service name {!r} for immediate termination: ".format(name)))`.
+ <a href='https://github.com/aiven/aiven-client/blob/a1c1eebed1a26079076e9593709118e9d9931f33/aiven/client/cli.py#L3733'>aiven/client/cli.py:3733:20:</a> PLR6103 Use walrus operator `(user_peer_network_cidrs := peering_connection.get("user_peer_network_cidrs", []))`.
... 11 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/PlasmaPy/PlasmaPy">PlasmaPy/PlasmaPy</a> (+38 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ docs/notebooks/langmuir_samples/_generate_noisy.ipynb:cell 6:2:4: PLR6103 Use walrus operator `(save := False)`.
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b92054ef266973c3c791999c69d4365de2cd4b2/noxfile.py#L482'>noxfile.py:482:18:</a> PLR6103 Use walrus operator `(extraneous_files := source_directory.glob("changelog/*[0-9]*.*.rst?*"))`.
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b92054ef266973c3c791999c69d4365de2cd4b2/src/plasmapy/analysis/nullpoint.py#L1453'>src/plasmapy/analysis/nullpoint.py:1453:24:</a> PLR6103 Use walrus operator `(loc := _locate_null_point(vspace, [i, j, k], maxiter, err))`.
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b92054ef266973c3c791999c69d4365de2cd4b2/src/plasmapy/analysis/nullpoint.py#L1456'>src/plasmapy/analysis/nullpoint.py:1456:28:</a> PLR6103 Use walrus operator `(p := NullPoint(loc, null_type))`.
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b92054ef266973c3c791999c69d4365de2cd4b2/src/plasmapy/analysis/nullpoint.py#L706'>src/plasmapy/analysis/nullpoint.py:706:40:</a> PLR6103 Use walrus operator `(z_close := np.isclose(root[2], r[2], atol=_EQUALITY_ATOL))`.
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b92054ef266973c3c791999c69d4365de2cd4b2/src/plasmapy/analysis/swept_langmuir/floating_potential.py#L280'>src/plasmapy/analysis/swept_langmuir/floating_potential.py:280:12:</a> PLR6103 Use walrus operator `(isl_window := np.abs(np.r_[rtn_extras["islands"][-1]][-1] - np.r_[rtn_extras["islands"][0]][0]) + 1)`.
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b92054ef266973c3c791999c69d4365de2cd4b2/src/plasmapy/analysis/swept_langmuir/floating_potential.py#L299'>src/plasmapy/analysis/swept_langmuir/floating_potential.py:299:12:</a> PLR6103 Use walrus operator `(iadd := istop - istart + 1 - min_points)`.
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b92054ef266973c3c791999c69d4365de2cd4b2/src/plasmapy/diagnostics/charged_particle_radiography/synthetic_radiography.py#L1240'>src/plasmapy/diagnostics/charged_particle_radiography/synthetic_radiography.py:1240:8:</a> PLR6103 Use walrus operator `(percentage := np.sum(intensity) / results_dict["num_particles"])`.
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b92054ef266973c3c791999c69d4365de2cd4b2/src/plasmapy/diagnostics/charged_particle_radiography/synthetic_radiography.py#L754'>src/plasmapy/diagnostics/charged_particle_radiography/synthetic_radiography.py:754:12:</a> PLR6103 Use walrus operator `(n_wrong_way := np.sum(np.where(self.theta > np.pi / 2, 1, 0)))`.
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/0b92054ef266973c3c791999c69d4365de2cd4b2/src/plasmapy/diagnostics/thomson.py#L889'>src/plasmapy/diagnostics/thomson.py:889:16:</a> PLR6103 Use walrus operator `(key := f"{p}_{num!s}")`.
... 28 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+1123 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api/client/__init__.py#L32'>airflow/api/client/__init__.py:32:12:</a> PLR6103 Use walrus operator `(session_factory := getattr(backend, "create_client_session", None))`.
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api/client/local_client.py#L49'>airflow/api/client/local_client.py:49:12:</a> PLR6103 Use walrus operator `(dag_run := trigger_dag.trigger_dag(dag_id=dag_id, triggered_by=DagRunTriggeredByType.CLI, run_id=run_id, conf=conf, logical_date=logical_date, replace_microseconds=replace_microseconds))`.
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api/common/airflow_health.py#L43'>airflow/api/common/airflow_health.py:43:12:</a> PLR6103 Use walrus operator `(latest_scheduler_job := SchedulerJobRunner.most_recent_job())`.
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api/common/delete_dag.py#L60'>airflow/api/common/delete_dag.py:60:8:</a> PLR6103 Use walrus operator `(running_tis := session.scalar(select(models.TaskInstance.state).where(models.TaskInstance.dag_id == dag_id).where(models.TaskInstance.state == TaskInstanceState.RUNNING).limit(1)))`.
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api/common/delete_dag.py#L63'>airflow/api/common/delete_dag.py:63:8:</a> PLR6103 Use walrus operator `(dag := session.scalar(select(DagModel).where(DagModel.dag_id == dag_id).limit(1)))`.
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api/common/mark_tasks.py#L81'>airflow/api/common/mark_tasks.py:81:8:</a> PLR6103 Use walrus operator `(dag := next(iter(task_dags)))`.
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api/common/trigger_dag.py#L150'>airflow/api/common/trigger_dag.py:150:8:</a> PLR6103 Use walrus operator `(dag_model := DagModel.get_current(dag_id, session=session))`.
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api/common/trigger_dag.py#L79'>airflow/api/common/trigger_dag.py:79:16:</a> PLR6103 Use walrus operator `(min_dag_start_date := dag.default_args["start_date"])`.
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api_connexion/endpoints/asset_endpoint.py#L197'>airflow/api_connexion/endpoints/asset_endpoint.py:197:8:</a> PLR6103 Use walrus operator `(adrq := session.scalar(select(AssetDagRunQueue).join(AssetModel, AssetDagRunQueue.asset_id == AssetModel.id).where(*where_clause)))`.
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api_connexion/endpoints/connection_endpoint.py#L139'>airflow/api_connexion/endpoints/connection_endpoint.py:139:8:</a> PLR6103 Use walrus operator `(connection := session.scalar(select(Connection).filter_by(conn_id=connection_id).limit(1)))`.
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api_connexion/endpoints/connection_endpoint.py#L69'>airflow/api_connexion/endpoints/connection_endpoint.py:69:8:</a> PLR6103 Use walrus operator `(connection := session.scalar(select(Connection).filter_by(conn_id=connection_id)))`.
+ <a href='https://github.com/apache/airflow/blob/971973725bd368297fda8dbe096ed6b199440ad0/airflow/api_connexion/endpoints/connection_endpoint.py#L84'>airflow/api_connexion/endpoints/connection_endpoint.py:84:8:</a> PLR6103 Use walrus operator `(connection := session.scalar(select(Connection).where(Connection.conn_id == connection_id)))`.
... 1111 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/superset">apache/superset</a> (+309 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/superset/blob/2c583d1584623c65d9f3972beb9e5513224e0cc2/RELEASING/changelog.py#L112'>RELEASING/changelog.py:112:12:</a> PLR6103 Use walrus operator `(github_login := self._github_login_cache.get(author_name))`.
+ <a href='https://github.com/apache/superset/blob/2c583d1584623c65d9f3972beb9e5513224e0cc2/RELEASING/changelog.py#L132'>RELEASING/changelog.py:132:12:</a> PLR6103 Use walrus operator `(pr_number := git_log.pr_number)`.
+ <a href='https://github.com/apache/superset/blob/2c583d1584623c65d9f3972beb9e5513224e0cc2/RELEASING/changelog.py#L134'>RELEASING/changelog.py:134:16:</a> PLR6103 Use walrus operator `(detail := self._pr_logs_with_details.get(pr_number))`.
+ <a href='https://github.com/apache/superset/blob/2c583d1584623c65d9f3972beb9e5513224e0cc2/RELEASING/changelog.py#L141'>RELEASING/changelog.py:141:12:</a> PLR6103 Use walrus operator `(pr_type := re.match(SUPERSET_PULL_REQUEST_TYPES, title))`.
+ <a href='https://github.com/apache/superset/blob/2c583d1584623c65d9f3972beb9e5513224e0cc2/RELEASING/changelog.py#L163'>RELEASING/changelog.py:163:16:</a> PLR6103 Use walrus operator `(risk_label := re.match(SUPERSET_RISKY_LABELS, label.name))`.
+ <a href='https://github.com/apache/superset/blob/2c583d1584623c65d9f3972beb9e5513224e0cc2/RELEASING/changelog.py#L284'>RELEASING/changelog.py:284:12:</a> PLR6103 Use walrus operator `(current_head := self._git_get_current_head())`.
+ <a href='https://github.com/apache/superset/blob/2c583d1584623c65d9f3972beb9e5513224e0cc2/RELEASING/changelog.py#L307'>RELEASING/changelog.py:307:12:</a> PLR6103 Use walrus operator `(match := re.match(r".*\(\#(\d*)\)", split_log_item[4]))`.
+ <a href='https://github.com/apache/superset/blob/2c583d1584623c65d9f3972beb9e5513224e0cc2/scripts/benchmark_migration.py#L115'>scripts/benchmark_migration.py:115:20:</a> PLR6103 Use walrus operator `(table := foreign_key.column.table.name)`.
+ <a href='https://github.com/apache/superset/blob/2c583d1584623c65d9f3972beb9e5513224e0cc2/scripts/benchmark_migration.py#L194'>scripts/benchmark_migration.py:194:16:</a> PLR6103 Use walrus operator `(missing := min_entities - model_rows[model])`.
+ <a href='https://github.com/apache/superset/blob/2c583d1584623c65d9f3972beb9e5513224e0cc2/scripts/benchmark_migration.py#L47'>scripts/benchmark_migration.py:47:8:</a> PLR6103 Use walrus operator `(spec := importlib.util.spec_from_file_location(filepath.stem, filepath))`.
... 299 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/aws/aws-sam-cli">aws/aws-sam-cli</a> (+203 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/aws/aws-sam-cli/blob/bb6190948c515e986e039db58beb0d188e526f49/samcli/cli/cli_config_file.py#L148'>samcli/cli/cli_config_file.py:148:20:</a> PLR6103 Use walrus operator `(allow_multiple := options_map[config_name].multiple)`.
+ <a href='https://github.com/aws/aws-sam-cli/blob/bb6190948c515e986e039db58beb0d188e526f49/samcli/cli/cli_config_file.py#L319'>samcli/cli/cli_config_file.py:319:12:</a> PLR6103 Use walrus operator `(param_value := ctx.params.get(param_name, None))`.
+ <a href='https://github.com/aws/aws-sam-cli/blob/bb6190948c515e986e039db58beb0d188e526f49/samcli/cli/command.py#L111'>samcli/cli/command.py:111:16:</a> PLR6103 Use walrus operator `(row := param.get_help_record(ctx))`.
+ <a href='https://github.com/aws/aws-sam-cli/blob/bb6190948c515e986e039db58beb0d188e526f49/samcli/cli/context.py#L145'>samcli/cli/context.py:145:12:</a> PLR6103 Use walrus operator `(click_core_ctx := click.get_current_context())`.
+ <a href='https://github.com/aws/aws-sam-cli/blob/bb6190948c515e986e039db58beb0d188e526f49/samcli/cli/context.py#L197'>samcli/cli/context.py:197:12:</a> PLR6103 Use walrus operator `(click_core_ctx := click.get_current_context())`.
+ <a href='https://github.com/aws/aws-sam-cli/blob/bb6190948c515e986e039db58beb0d188e526f49/samcli/cli/types.py#L322'>samcli/cli/types.py:322:12:</a> PLR6103 Use walrus operator `(equals_count := tag_value.count("="))`.
+ <a href='https://github.com/aws/aws-sam-cli/blob/bb6190948c515e986e039db58beb0d188e526f49/samcli/cli/types.py#L431'>samcli/cli/types.py:431:12:</a> PLR6103 Use walrus operator `(equals_count := signing_profile.count(":"))`.
+ <a href='https://github.com/aws/aws-sam-cli/blob/bb6190948c515e986e039db58beb0d188e526f49/samcli/commands/_utils/click_mutex.py#L76'>samcli/commands/_utils/click_mutex.py:76:20:</a> PLR6103 Use walrus operator `(has_all_required_params := False not in [required_param in opts for required_param in required_params])`.
+ <a href='https://github.com/aws/aws-sam-cli/blob/bb6190948c515e986e039db58beb0d188e526f49/samcli/commands/_utils/command_exception_handler.py#L75'>samcli/commands/_utils/command_exception_handler.py:75:20:</a> PLR6103 Use walrus operator `(exception_handler := (additional_mapping or {}).get(exception_type))`.
+ <a href='https://github.com/aws/aws-sam-cli/blob/bb6190948c515e986e039db58beb0d188e526f49/samcli/commands/_utils/command_exception_handler.py#L85'>samcli/commands/_utils/command_exception_handler.py:85:24:</a> PLR6103 Use walrus operator `(handler := exception_handler.get_handler(exception_type))`.
... 193 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+135 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/basic/data/ajax_source.py#L41'>examples/basic/data/ajax_source.py:41:12:</a> PLR6103 Use walrus operator `(requested_headers := request.headers.get('Access-Control-Request-Headers'))`.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/basic/data/server_sent_events_source.py#L43'>examples/basic/data/server_sent_events_source.py:43:12:</a> PLR6103 Use walrus operator `(requested_headers := request.headers.get('Access-Control-Request-Headers'))`.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/basic/scatters/markertypes.py#L35'>examples/basic/scatters/markertypes.py:35:12:</a> PLR6103 Use walrus operator `(name := f"{base}_{kind}" if kind else base)`.
+ examples/output/jupyter/push_notebook/Numba Image Example.ipynb:cell 13:12:8: PLR6103 Use walrus operator `(ksum := np.sum(kernel))`.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/gapminder/main.py#L60'>examples/server/app/gapminder/main.py:60:8:</a> PLR6103 Use walrus operator `(year := slider.value + 1)`.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/scripts/milestone.py#L142'>scripts/milestone.py:142:8:</a> PLR6103 Use walrus operator `(num_types := sum(1 for label in labels if label.startswith("type:")))`.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/setup.py#L84'>setup.py:84:8:</a> PLR6103 Use walrus operator `(missing := [fn for fn in JS_FILES if not (BUILD_JS / fn).exists()])`.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/application/handlers/code.py#L148'>src/bokeh/application/handlers/code.py:148:12:</a> PLR6103 Use walrus operator `(module := self._runner.new_module())`.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/client/connection.py#L354'>src/bokeh/client/connection.py:354:20:</a> PLR6103 Use walrus operator `(message := await self._receiver.consume(fragment))`.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/client/connection.py#L388'>src/bokeh/client/connection.py:388:12:</a> PLR6103 Use walrus operator `(reply := self._send_message_wait_for_reply(msg))`.
... 125 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/freedomofpress/securedrop">freedomofpress/securedrop</a> (+53 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/freedomofpress/securedrop/blob/9916c90820044d392323587c116a4f1522d3499d/admin/bootstrap.py#L63'>admin/bootstrap.py:63:8:</a> PLR6103 Use walrus operator `(return_code := popen.wait())`.
+ <a href='https://github.com/freedomofpress/securedrop/blob/9916c90820044d392323587c116a4f1522d3499d/admin/securedrop_admin/__init__.py#L1231'>admin/securedrop_admin/__init__.py:1231:12:</a> PLR6103 Use walrus operator `(return_code := args.func(args))`.
+ <a href='https://github.com/freedomofpress/securedrop/blob/9916c90820044d392323587c116a4f1522d3499d/admin/securedrop_admin/__init__.py#L139'>admin/securedrop_admin/__init__.py:139:16:</a> PLR6103 Use walrus operator `(text := document.text)`.
+ <a href='https://github.com/freedomofpress/securedrop/blob/9916c90820044d392323587c116a4f1522d3499d/admin/securedrop_admin/__init__.py#L196'>admin/securedrop_admin/__init__.py:196:16:</a> PLR6103 Use walrus operator `(text := document.text.lower())`.
+ <a href='https://github.com/freedomofpress/securedrop/blob/9916c90820044d392323587c116a4f1522d3499d/admin/securedrop_admin/__init__.py#L203'>admin/securedrop_admin/__init__.py:203:16:</a> PLR6103 Use walrus operator `(text := document.text.replace(" ", ""))`.
+ <a href='https://github.com/freedomofpress/securedrop/blob/9916c90820044d392323587c116a4f1522d3499d/admin/securedrop_admin/__init__.py#L253'>admin/securedrop_admin/__init__.py:253:16:</a> PLR6103 Use walrus operator `(text := document.text)`.
+ <a href='https://github.com/freedomofpress/securedrop/blob/9916c90820044d392323587c116a4f1522d3499d/admin/securedrop_admin/__init__.py#L267'>admin/securedrop_admin/__init__.py:267:16:</a> PLR6103 Use walrus operator `(text := document.text)`.
+ <a href='https://github.com/freedomofpress/securedrop/blob/9916c90820044d392323587c116a4f1522d3499d/admin/securedrop_admin/__init__.py#L277'>admin/securedrop_admin/__init__.py:277:16:</a> PLR6103 Use walrus operator `(text := document.text)`.
+ <a href='https://github.com/freedomofpress/securedrop/blob/9916c90820044d392323587c116a4f1522d3499d/install_files/ansible-base/roles/restore/files/compare_torrc.py#L24'>install_files/ansible-base/roles/restore/files/compare_torrc.py:24:16:</a> PLR6103 Use walrus operator `(m := service_re.match(line))`.
+ <a href='https://github.com/freedomofpress/securedrop/blob/9916c90820044d392323587c116a4f1522d3499d/molecule/testinfra/common/test_automatic_updates.py#L70'>molecule/testinfra/common/test_automatic_updates.py:70:8:</a> PLR6103 Use walrus operator `(distro := host.system_info.codename)`.
... 43 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/fronzbot/blinkpy">fronzbot/blinkpy</a> (+20 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/fronzbot/blinkpy/blob/e2c747b5ad295424b08ff4fb03204129155666fc/blinkpy/blinkpy.py#L188'>blinkpy/blinkpy.py:188:20:</a> PLR6103 Use walrus operator `(network_id := str(owl["network_id"]))`.
+ <a href='https://github.com/fronzbot/blinkpy/blob/e2c747b5ad295424b08ff4fb03204129155666fc/blinkpy/blinkpy.py#L212'>blinkpy/blinkpy.py:212:20:</a> PLR6103 Use walrus operator `(network_id := str(lotus["network_id"]))`.
+ <a href='https://github.com/fronzbot/blinkpy/blob/e2c747b5ad295424b08ff4fb03204129155666fc/blinkpy/blinkpy.py#L242'>blinkpy/blinkpy.py:242:20:</a> PLR6103 Use walrus operator `(camera_network := str(network["network_id"]))`.
+ <a href='https://github.com/fronzbot/blinkpy/blob/e2c747b5ad295424b08ff4fb03204129155666fc/blinkpy/blinkpy.py#L306'>blinkpy/blinkpy.py:306:12:</a> PLR6103 Use walrus operator `(last_refresh := self.last_refresh)`.
+ <a href='https://github.com/fronzbot/blinkpy/blob/e2c747b5ad295424b08ff4fb03204129155666fc/blinkpy/camera.py#L140'>blinkpy/camera.py:140:12:</a> PLR6103 Use walrus operator `(res := await api.request_get_config(self.sync.blink, self.network_id, self.camera_id, product_type=self.product_type))`.
+ <a href='https://github.com/fronzbot/blinkpy/blob/e2c747b5ad295424b08ff4fb03204129155666fc/blinkpy/camera.py#L169'>blinkpy/camera.py:169:12:</a> PLR6103 Use walrus operator `(res := await api.request_update_config(self.sync.blink, self.network_id, self.camera_id, product_type=self.product_type, data=data))`.
+ <a href='https://github.com/fronzbot/blinkpy/blob/e2c747b5ad295424b08ff4fb03204129155666fc/blinkpy/camera.py#L221'>blinkpy/camera.py:221:12:</a> PLR6103 Use walrus operator `(response := await self.get_media())`.
+ <a href='https://github.com/fronzbot/blinkpy/blob/e2c747b5ad295424b08ff4fb03204129155666fc/blinkpy/camera.py#L342'>blinkpy/camera.py:342:28:</a> PLR6103 Use walrus operator `(recent := {"time": self.last_record, "clip": self.clip})`.
+ <a href='https://github.com/fronzbot/blinkpy/blob/e2c747b5ad295424b08ff4fb03204129155666fc/blinkpy/camera.py#L374'>blinkpy/camera.py:374:16:</a> PLR6103 Use walrus operator `(response := await self.get_media())`.
+ <a href='https://github.com/fronzbot/blinkpy/blob/e2c747b5ad295424b08ff4fb03204129155666fc/blinkpy/camera.py#L379'>blinkpy/camera.py:379:16:</a> PLR6103 Use walrus operator `(response := await self.get_media(media_type="video"))`.
... 10 additional changes omitted for project
</pre>

</p>
</details>

<p><em>... Truncated remaining completed project reports due to GitHub comment length restrictions</em></p>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PLR6103 | 4612 | 4612 | 0 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2024-09-06 07:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_linter/src/checkers/ast/analyze/statement.rs</code>:1086 on 2024-09-06 07:20</div>
            <div class="timeline-body"><p>I applied this rule by checking whether the previous statement from a <code>IfStmt</code> is an <code>AssignStmt</code>, however I am wondering if it is more desirable to do check if the next statement of a <code>AssignStmt</code> is an <code>IfStmt</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[WIP] [pylint] Implement `R6103`" to "[WIP] [pylint] Implement `consider-using-assignment-expr` (`R6103`)" by @vincevannoort on 2024-09-07 12:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[WIP] [pylint] Implement `consider-using-assignment-expr` (`R6103`)" to "[pylint] Implement `consider-using-assignment-expr` (`R6103`)" by @vincevannoort on 2024-09-07 12:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_python_semantic/src/model.rs</code>:1439 on 2024-09-07 12:11</div>
            <div class="timeline-body"><p>I needed something like this function, not sure if there is an existing better way?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2024-09-07 12:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @vincevannoort on 2024-09-07 12:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sbrugman">@sbrugman</a> reviewed on 2024-09-08 16:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sbrugman">@sbrugman</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:28 on 2024-09-08 16:00</div>
            <div class="timeline-body"><p>Consider adding a reference to https://peps.python.org/pep-0572/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sbrugman">@sbrugman</a> reviewed on 2024-09-08 16:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sbrugman">@sbrugman</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:28 on 2024-09-08 16:01</div>
            <div class="timeline-body"><p>The Python 3.8 release notes would also make a great resource:</p>
<p>https://docs.python.org/3/whatsnew/3.8.html#assignment-expressions</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sbrugman">@sbrugman</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:28 on 2024-09-08 16:05</div>
            <div class="timeline-body"><pre><code class="language-suggestion">/// ```

## References

- [Python Documentation: What‚Äôs New In Python 3.8](https://docs.python.org/3/whatsnew/3.8.html#assignment-expressions)
- [PEP 572 ‚Äì Assignment Expressions](https://peps.python.org/pep-0572/)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sbrugman">@sbrugman</a> reviewed on 2024-09-08 16:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2024-09-08 17:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:28 on 2024-09-08 17:12</div>
            <div class="timeline-body"><p>Good suggestion, added them! üòÑ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-09-08 19:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @MichaReiser on 2024-09-08 19:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/resources/test/fixtures/pylint/unnecessary_assignment.py</code>:29 on 2024-09-08 19:54</div>
            <div class="timeline-body"><p>I like the example because it shows a potentially controversial use case. I would probably prefer the assignment to keep the if smaller.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/resources/test/fixtures/pylint/unnecessary_assignment.py</code>:65 on 2024-09-08 19:55</div>
            <div class="timeline-body"><p>Do we have any example where the assigned-to variable is used after the <code>if</code> condition?</p>
<pre><code class="language-python">good = 1

if good:
	pass

print(good)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/checkers/ast/analyze/statement.rs</code>:1086 on 2024-09-08 19:57</div>
            <div class="timeline-body"><p>What benefits do you see in testing the next statement after an <code>AssignStmt</code>.</p>
<p>My intuition here is that there are probably more assignment than if statements. Therefore, running the rules on if nodes might overall be faster?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:82 on 2024-09-08 19:59</div>
            <div class="timeline-body"><p>What's the motivation for cloning the <code>test</code> here? Cloning the condition does a deep-clone. This can be quiet expensive for large expressions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:105 on 2024-09-08 19:59</div>
            <div class="timeline-body"><p>Same here. We should avoid cloning the test.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> requested changes on 2024-09-08 20:01</div>
            <div class="timeline-body"><p>Thanks for this contribution. My plane is about to land. I've to finish the review at a later time.</p>
<p>I only had enough time to quickly glance over the Rust code. We should look into removing the many <code>node.clone()</code> calls because it is fairly expensive to clone nodes and probably unnecessary. Let me know if you need some guidance on how to remove the clone calls (It probably requires adding some lifetimes)</p>
<p>Regarding the rule's naming.</p>
<ul>
<li>I did a quick search to see how we referred to <code>:=</code> in other rules. There are not many usages but <code>named expression (walrus operator)</code> is the most common form.</li>
<li>The rule name seems too generic to me and its name is very similar to <a href="https://docs.astral.sh/ruff/rules/unnecessary-assign/"><code>unnecessary-assign</code></a> (which we should rename to `unnecessary-assignment). Reading through the examples the rule mainly is about assigning a value that is then only used in an if condition. I need to think a bit more about what a good rule name could be. Maybe you have an idea?</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on 2024-09-10 20:15</div>
            <div class="timeline-body"><blockquote>
<p>Thanks for this contribution. My plane is about to land. I've to finish the review at a later time.</p>
</blockquote>
<p>Thanks for the review, much appreciated! üëç</p>
<blockquote>
<p>I only had enough time to quickly glance over the Rust code. We should look into removing the many <code>node.clone()</code> calls because it is fairly expensive to clone nodes and probably unnecessary. Let me know if you need some guidance on how to remove the clone calls (It probably requires adding some lifetimes)</p>
</blockquote>
<p>I have tried and was able to remove almost all clone calls, except a few which I think are needed for returning the diagnostic. Could you take a look at the remaining ones and see if any of the 3 can still be removed?</p>
<blockquote>
<p>Regarding the rule's naming.</p>
<ul>
<li>I did a quick search to see how we referred to <code>:=</code> in other rules. There are not many usages but <code>named expression (walrus operator)</code> is the most common form.</li>
<li>The rule name seems too generic to me and its name is very similar to <a href="https://docs.astral.sh/ruff/rules/unnecessary-assign/"><code>unnecessary-assign</code></a> (which we should rename to `unnecessary-assignment). Reading through the examples the rule mainly is about assigning a value that is then only used in an if condition. I need to think a bit more about what a good rule name could be. Maybe you have an idea?</li>
</ul>
</blockquote>
<p>I agree, here are some possible options:</p>
<ol>
<li>unnecessary_assignment_before_if_stmt</li>
<li>redundant_assignment_before_if _stmt</li>
<li>standalone_assignment_before_if_stmt</li>
</ol>
<p>These seem close to what the lint is trying to prevent, do you have other ideas in mind?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2024-09-10 20:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_linter/src/checkers/ast/analyze/statement.rs</code>:1086 on 2024-09-10 20:23</div>
            <div class="timeline-body"><p>I agree that assignments are far more common than if statements.</p>
<p>I think the answer depends on the costs for checking <code>previous_statement</code> and <code>next_statement</code>.</p>
<p>My thought here is that retrieving the previous statement using the newly added <code>previous_statement</code> might be more expensive because it has to iterate over all previous statements using <code>previous_statements</code> to find the previous statement (if there is a better way, please let me know).</p>
<p>While checking an assignment, then checking the <code>next_statement</code> might be a cheap operation.</p>
<p>Do you have any idea? If they have equal cost I think the current implementation is fine. üòÑ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:82 on 2024-09-10 20:30</div>
            <div class="timeline-body"><p>I have no motivation other than that I had trouble with not cloning these before, but I have been able to make it work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2024-09-10 20:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2024-09-10 20:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_linter/resources/test/fixtures/pylint/unnecessary_assignment.py</code>:65 on 2024-09-10 20:36</div>
            <div class="timeline-body"><p>I have added some examples for this now!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @vincevannoort on 2024-09-11 09:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on 2024-09-19 07:24</div>
            <div class="timeline-body"><p>Hey @MichaReiser, once you have the time, would you mind giving this pull request another look? :smile:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @MichaReiser by @MichaReiser on 2024-09-20 08:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on 2024-10-19 05:28</div>
            <div class="timeline-body"><p>Hey @MichaReiser, could you or someone else from the team have a look? :smile:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:110 on 2024-10-24 07:17</div>
            <div class="timeline-body"><p>Is there a reason why compare expressions aren't handled inside <code>elif_else</code> clauses?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:119 on 2024-10-24 07:17</div>
            <div class="timeline-body"><p>Changing assignments to walrus operators in <code>elif else</code> branches is semantically incorrect if the variable is used afterwards</p>
<pre><code class="language-python">&gt;&gt;&gt; if True: ...
... elif x :=10: ...
... 
Ellipsis
&gt;&gt;&gt; x
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
NameError: name 'x' is not defined
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:177 on 2024-10-24 07:20</div>
            <div class="timeline-body"><p>What's the motivation for calling into the generator here? We try to avoid using the generator because it removes comments. Could we instead take the assignment value as it is in the source (using locator)? Note: We have to be careful about parenthesized expressions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_python_semantic/src/model.rs</code>:1439 on 2024-10-24 07:28</div>
            <div class="timeline-body"><p>That makes sense. I think we can make it more efficient with https://github.com/astral-sh/ruff/pull/13895
which reduces an extra find and collect</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/resources/test/fixtures/pylint/unnecessary_assignment.py</code>:42 on 2024-10-24 07:31</div>
            <div class="timeline-body"><p>This is an interesting example and possibly controversial. I would prefer the existing solution because the assignment in the <code>if</code> is very subtle and I can see how it can be confusing when trying to figure out what the value of <code>bad7</code> is in the <code>elif</code> branch</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> requested changes on 2024-10-24 07:32</div>
            <div class="timeline-body"><p>Thanks for the ping and sorry for the late review. I pushed a few smaller refactors to avoid unnecessary collects.</p>
<p>I created a PR that should allow us to implement a more efficient <code>previous_statement</code>  here.</p>
<p>I think the rule has to become cleverer, at least when we want to support handling <code>elif</code> cases because today's implementation can result in changes that fail at runtime.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on 2024-10-24 07:41</div>
            <div class="timeline-body"><p>Thanks for the review @MichaReiser :+1: , just a heads up: I will be travelling without my laptop for the coming 5 weeks, so will only get back to pull request this after.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nickdrozd">@nickdrozd</a> on 2025-01-29 18:03</div>
            <div class="timeline-body"><p>Hello, is this still being worked on? It is nice check, would be great to have. Especially if possible autofix would amazing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_linter/resources/test/fixtures/pylint/unnecessary_assignment.py</code>:29 on 2025-02-13 06:44</div>
            <div class="timeline-body"><p>I agree, should we check the complexity of the assignment to determine whether to apply the rule? If so, how do we determine where to draw the line?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2025-02-13 06:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2025-02-13 07:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_python_semantic/src/model.rs</code>:1439 on 2025-02-13 07:07</div>
            <div class="timeline-body"><p>Nice, I did that just now in https://github.com/astral-sh/ruff/pull/13196/commits/9e176d1c1878e35ff0888ceeb18ebdb0994ab4df</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2025-02-13 07:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_linter/src/checkers/ast/analyze/statement.rs</code>:1086 on 2025-02-13 07:08</div>
            <div class="timeline-body"><p>I can change it, to the suggested approach if you want üòÑ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2025-02-13 07:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_linter/resources/test/fixtures/pylint/unnecessary_assignment.py</code>:42 on 2025-02-13 07:09</div>
            <div class="timeline-body"><p>Yeah, I think you are right. Due to that I decided to only apply the rule to simple <code>if</code> statements, where simple means without <code>elif</code> or <code>else</code> attached to the <code>if</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2025-02-13 07:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:177 on 2025-02-13 07:12</div>
            <div class="timeline-body"><p>Could you help me out here? I am not that familiar in how to do this properly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2025-02-13 07:13</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:119 on 2025-02-13 07:13</div>
            <div class="timeline-body"><p>Yeah, I think you are right. Due to that I decided to only apply the rule to simple <code>if</code> statements, where simple means without <code>elif</code> or <code>else</code> attached to the <code>if</code>. That should prevent cases like this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on 2025-02-13 07:15</div>
            <div class="timeline-body"><p>@MichaReiser sorry for getting back so late to this PR, and thanks for all the previous input.</p>
<p>I have rebased to the latest changes on main, and fixed some issues mentioned in earlier comments. Additionally, I changed the rule to only apply to simple <code>if</code> statements, that do not have an <code>elif</code> or <code>else</code> attached. This should hopefully resolve most of the more controversial cases.</p>
<p>Coul you take another look?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @vincevannoort on 2025-02-13 07:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_assignment.rs</code>:116 on 2025-02-13 07:32</div>
            <div class="timeline-body"><p>I am curious if we should actually do this part. If I look at the ecosystem checks, these also produce some possible controversial results. ü§î</p>
<p>Without it, I think most of the more controversial results would disappear.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vincevannoort">@vincevannoort</a> reviewed on 2025-02-13 07:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-02-13 08:52</div>
            <div class="timeline-body"><p>Hmm, I just noticed that this is a pylint extensions rule which we don't want to add right now because it would require a new rule group.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on 2025-02-13 09:25</div>
            <div class="timeline-body"><blockquote>
<p>Hmm, I just noticed that this is a pylint extensions rule which we don't want to add right now because it would require a new rule group.</p>
</blockquote>
<p>What would you recommend in this case? Just close the pull request or make it a new ruff rule instead of pylint rule?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-02-20 08:46</div>
            <div class="timeline-body"><p>Yeah, I think we have to close this for now because there's no clear path to landing this PR before #1774 is complete. I'm very sorry for wasting your time here. I should have noticed this way sooner. But thank you anyway and we can come back to this PR once we're at a point where we accept pylint extension rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-02-20 08:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vincevannoort">@vincevannoort</a> on 2025-02-20 08:53</div>
            <div class="timeline-body"><blockquote>
<p>Yeah, I think we have to close this for now because there's no clear path to landing this PR before #1774 is complete. I'm very sorry for wasting your time here. I should have noticed this way sooner. But thank you anyway and we can come back to this PR once we're at a point where we accept pylint extension rules.</p>
</blockquote>
<p>No worries :smile: , I still learned quite a lot from the implementation so it was still worth it for me personally. Thanks for the effort in the feedback rounds. :+1:</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 19:49:30 UTC
    </footer>
</body>
</html>
