<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Initialize Rust cache before installing binaries and additional components - astral-sh/ruff #14459</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Initialize Rust cache before installing binaries and additional components</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/14459">#14459</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-11-19 14:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>I was hoping to reduce the time spent on binary installs, but unfortunately additional binaries are always reinstalled <a href="https://github.com/taiki-e/install-action/issues/577">taiki-e/install-action#577</a> — unfortunately that increases the cache size.</p>
<p>However, this does cache setup of the Rust toolchain which may save time. Since most of the Rust toolchain installation is just downloading components, and we still need to download the cache, there might not be much time saved here. The benefit is that the cache is generally closer to the runner on the network. Toolchain installation takes ~10s on Linux and &gt;1m on Windows. It looks like there are some nice savings on Windows but it&#x27;s less clear on Linux. The pre-commit job is 10s faster, but (perhaps due to the bug above) the test job is 8s slower.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-19 14:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> removed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-19 14:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-19 14:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-11-19 14:53</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
Formatter (stable)
<p>✅ ecosystem check detected no format changes.</p>
Formatter (preview)
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-19 17:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-19 17:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-30 09:28</div>
            <div class="timeline-body"><p>@zanieb are you planning to work on this? I&#x27;d otherwise suggest that we close it or convert it into an issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-22 16:01</div>
            <div class="timeline-body"><p>Funny, I did this again in #15660</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-22 16:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-22 16:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:08:39 UTC
    </footer>
</body>
</html>
