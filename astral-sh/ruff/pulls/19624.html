<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revert `license` and `license-files` changes in `pyproject.toml` - astral-sh/ruff #19624</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Revert <code>license</code> and <code>license-files</code> changes in <code>pyproject.toml</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19624">#19624</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-07-29 21:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a></div>
            <div class="timeline-body">Summary
<p>This partially reverts commit 13634ff433310fa4b718c57cb8ea43ab334e2637 after issues in the release today.</p>
Test Plan
<pre><code>uv build --sdist
tar -tzf dist/ruff-0.12.6.tar.gz | grep ruff-0.12.6/LICENSE
</code></pre>
<p>which finds the license now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2025-07-29 21:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-29 21:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-29 21:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-07-29 21:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DimitriPapadopoulos">@DimitriPapadopoulos</a> on 2025-07-31 09:14</div>
            <div class="timeline-body"><p>I have read #19599 and this PR, and don&#x27;t understand the te~~x~~st plan. Is the issue that <code>uv build</code> does not support PEP 639 yet and pushes license-less packages to PiPY?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-31 12:32</div>
            <div class="timeline-body"><p>I saw you got an answer on #19599, but you&#x27;re right. I forgot all of the conversation around this was on Discord and could have included more context here. It might be helpful in the future.</p>
<p>During the 0.12.6 release, the sdist upload was rejected from PyPI for not containing the <code>LICENSE</code> file. I was able to verify that locally with the commands in the test plan. After the changes in this PR, the same commands confirmed that the <code>LICENSE</code> was back in the sdist before we tried another release.</p>
<p>As mentioned on #19599, the root cause seems to be a maturin bug, so we should be able to revert this revert at some point in the future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DimitriPapadopoulos">@DimitriPapadopoulos</a> on 2025-07-31 12:38</div>
            <div class="timeline-body"><p>Thank you so much. I have created draft PR #19661 that attempts to explain all known issues.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DimitriPapadopoulos">@DimitriPapadopoulos</a> on 2025-08-01 14:29</div>
            <div class="timeline-body"><p>Putting aside the main issue (the maturin bug):</p>
<p>It turns out <a href="https://github.com/raimon49/pip-licenses">pip-licences</a> is not much maintained and has been forked into <a href="https://github.com/stefan6419846/pip-licenses-cli">pip-licenses-cli</a> which does support PEP 639. Also <code>pip show</code> has been updated and does support PEP 639 according to <a href="https://ichard26.github.io/blog/2025/01/whats-new-in-pip-25.0/#pep-639-spdx-license-expressions">What&#x27;s new in pip 25.0</a>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:17:09 UTC
    </footer>
</body>
</html>
