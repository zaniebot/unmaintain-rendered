<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use `function_type::classify` for `yield-in-init` - astral-sh/ruff #2742</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use <code>function_type::classify</code> for <code>yield-in-init</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/2742">#2742</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-02-10 21:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-10 21:18</div>
            <div class="timeline-body"><p><em>No description provided.</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-02-10 21:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-10 21:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-02-10 21:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on <code>crates/ruff/src/rules/pylint/rules/yield_in_init.rs</code>:16 on 2023-02-10 21:29</div>
            <div class="timeline-body"><p>It's <code>__init__</code>  methods ... not <code>__init__.py</code> methods (you made the mistake twice).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a> reviewed on 2023-02-10 21:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a> reviewed on 2023-02-10 21:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on <code>crates/ruff/src/rules/pylint/rules/yield_in_init.rs</code>:20 on 2023-02-10 21:30</div>
            <div class="timeline-body"><p>Even without that mistake I find that description to be very bad.</p>
<p>Firstly it is misleading because generators can be used in <code>__init__</code> methods ... it's just that the <code>__init__</code> method cannot be a generator.</p>
<p>Secondly &quot;is not allowed&quot; is just completely nondescript ... what does that mean? Not allowed by whom?</p>
<p>I think <a href="https://codeql.github.com/codeql-query-help/python/py-init-method-is-generator/">GitHub's CodeQL documentation</a> does a better job:</p>
<blockquote>
<p>The <code>__init__</code> method of a class is used to initialize new objects, not create them. As such, it should not return any value. By including a yield expression in the method turns it into a generator method. On calling it will return a generator resulting in a runtime error.</p>
</blockquote>
<p>The last sentence here is the important part.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-10 21:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/pylint/rules/yield_in_init.rs</code>:20 on 2023-02-10 21:35</div>
            <div class="timeline-body"><p>Alright, I'll fix it up! Though, in my opinion, calling something &quot;very bad&quot; is not a productive way to deliver feedback and is a good way to turn a discussion into an argument.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a> reviewed on 2023-02-10 22:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on <code>crates/ruff/src/rules/pylint/rules/yield_in_init.rs</code>:20 on 2023-02-10 22:05</div>
            <div class="timeline-body"><p>The documentation is written in a voice of authority ... when we use such a voice I think we should take great care that what we are writing is correct, clear and informative because otherwise we are very much bound to cause confusion or waste time of users who take our documentation at face value.</p>
<p>I think accurately and clearly answering <code>Why is this bad?</code> can be quite work-intensive for many of our lints. I'd still like us to put in that work rather than adding vague descriptions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/pylint/rules/yield_in_init.rs</code>:20 on 2023-02-10 22:08</div>
            <div class="timeline-body"><p>I agree! Nowhere did I disagree that the documentation here could be improved.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-10 22:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on <code>crates/ruff/src/rules/pylint/rules/yield_in_init.rs</code>:20 on 2023-02-10 22:08</div>
            <div class="timeline-body"><p>I am not sure if it's ok for us to copy the documentationfrom GitHub CodeQL in verbatim ... while you did add a reference in e5f5142e3ed6857108a610f6c732d80491dd2492 it's not clear that the section is from there. I guess this could be clarified with a Markdown footnote ... but I guess it also raises some licensing questions ... is the licensing of our documentation more lax than of our code?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a> reviewed on 2023-02-10 22:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-10 22:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/pylint/rules/yield_in_init.rs</code>:20 on 2023-02-10 22:11</div>
            <div class="timeline-body"><p>I thought a reference was sufficient but I don't want there to be any ambiguity so I'll just rewrite it entirely.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 04:54:22 UTC
    </footer>
</body>
</html>
