<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`refurb`] Reimplemented `chain.from_iterable()` (`FURB179`) - astral-sh/ruff #16131</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>refurb</code>] Reimplemented <code>chain.from_iterable()</code> (<code>FURB179</code>)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16131">#16131</a>
        opened by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a>
        on 2025-02-13 06:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Part of #1348.</p>
<p><a href="https://github.com/dosisod/refurb/blob/7649900948c8a65296ae6efc9d8ced0bc1a54a7f/refurb/checks/itertools/use_chain_from_iterable.py"><code>FURB179</code></a> reports the following patterns and offers to replace them with <code>chain.from_iterable()</code>:</p>
<ul>
<li><code>functools.chain(*a)</code></li>
<li><code>functools.reduce(op, a, start)</code> where <code>op</code> is either <code>operator.add</code> or <code>operator.concat</code> and <code>start</code> is <code>[]</code>, <code>()</code>, <code>list()</code>, <code>tuple[str, int]()</code> and the like.</li>
<li><code>[a for b in c for a in b]</code> and other comprehensions</li>
</ul>
<p>Unlike the upstream rule, it does not report <code>sum(a, [])</code>, as this is already reported by <a href="https://docs.astral.sh/ruff/rules/quadratic-list-summation/"><code>RUF017</code></a>. <code>RUF017</code> (a stable rule) should eventually be merged into this rule.</p>
<p>Rule logic and tests were adopted from that of the upstream rule.</p>
<h2>Test Plan</h2>
<p><code>cargo nextest run</code> and <code>cargo insta test</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-02-13 06:50</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+23 -0 violations, +0 -0 fixes in 9 projects; 46 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+5 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/d01a1431616d29bcc26ee29e03d476ba06557a8e/airflow/dag_processing/collection.py#L787'>airflow/dag_processing/collection.py:787:44:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/apache/airflow/blob/d01a1431616d29bcc26ee29e03d476ba06557a8e/airflow/lineage/__init__.py#L141'>airflow/lineage/__init__.py:141:36:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/apache/airflow/blob/d01a1431616d29bcc26ee29e03d476ba06557a8e/airflow/utils/helpers.py#L171'>airflow/utils/helpers.py:171:12:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/apache/airflow/blob/d01a1431616d29bcc26ee29e03d476ba06557a8e/providers/fab/tests/unit/fab/auth_manager/test_fab_auth_manager.py#L180'>providers/fab/tests/unit/fab/auth_manager/test_fab_auth_manager.py:180:13:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/apache/airflow/blob/d01a1431616d29bcc26ee29e03d476ba06557a8e/providers/google/src/airflow/providers/google/ads/hooks/ads.py#L318'>providers/google/src/airflow/providers/google/ads/hooks/ads.py:318:20:</a> FURB179 Use `chain.from_iterable()` instead
</pre>

</p>
</details>
<details><summary><a href="https://github.com/langchain-ai/langchain">langchain-ai/langchain</a> (+2 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/langchain-ai/langchain/blob/6177b9f9ab81e8750292ef5951115e5135909c9e/libs/core/langchain_core/output_parsers/list.py#L173'>libs/core/langchain_core/output_parsers/list.py:173:20:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/langchain-ai/langchain/blob/6177b9f9ab81e8750292ef5951115e5135909c9e/libs/core/tests/unit_tests/fake/callbacks.py#L275'>libs/core/tests/unit_tests/fake/callbacks.py:275:62:</a> FURB179 Use `chain.from_iterable()` instead
</pre>

</p>
</details>
<details><summary><a href="https://github.com/latchbio/latch">latchbio/latch</a> (+2 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/latchbio/latch/blob/1b0fe23974d7d2f3a1df75b23d9bf06b83f5132f/src/latch/utils.py#L113'>src/latch/utils.py:113:44:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/latchbio/latch/blob/1b0fe23974d7d2f3a1df75b23d9bf06b83f5132f/src/latch/utils.py#L118'>src/latch/utils.py:118:45:</a> FURB179 Use `chain.from_iterable()` instead
</pre>

</p>
</details>
<details><summary><a href="https://github.com/reflex-dev/reflex">reflex-dev/reflex</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/reflex-dev/reflex/blob/e0e3397747ba8a83d7499344612cd3c3a9fa23c3/tests/units/components/test_component.py#L1482'>tests/units/components/test_component.py:1482:27:</a> FURB179 Use `chain.from_iterable()` instead
</pre>

</p>
</details>
<details><summary><a href="https://github.com/rotki/rotki">rotki/rotki</a> (+2 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/rotki/rotki/blob/b712887b144eab972e54393c918303296fb0d5ae/rotkehlchen/exchanges/coinbaseprime.py#L582'>rotkehlchen/exchanges/coinbaseprime.py:582:21:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/rotki/rotki/blob/b712887b144eab972e54393c918303296fb0d5ae/tools/profiling/graph.py#L208'>tools/profiling/graph.py:208:23:</a> FURB179 Use `chain.from_iterable()` instead
</pre>

</p>
</details>
<details><summary><a href="https://github.com/scikit-build/scikit-build-core">scikit-build/scikit-build-core</a> (+3 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/scikit-build/scikit-build-core/blob/e9ab153a3769d71ceaef108ba6259ece2de70676/src/scikit_build_core/builder/builder.py#L155'>src/scikit_build_core/builder/builder.py:155:13:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/scikit-build/scikit-build-core/blob/e9ab153a3769d71ceaef108ba6259ece2de70676/src/scikit_build_core/builder/builder.py#L163'>src/scikit_build_core/builder/builder.py:163:13:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/scikit-build/scikit-build-core/blob/e9ab153a3769d71ceaef108ba6259ece2de70676/tests/conftest.py#L392'>tests/conftest.py:392:13:</a> FURB179 Use `chain.from_iterable()` instead
</pre>

</p>
</details>
<details><summary><a href="https://github.com/zulip/zulip">zulip/zulip</a> (+2 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/zulip/zulip/blob/2c8d74735a598c2b36a53ef20f50d2eef0babfc0/zerver/actions/streams.py#L1044'>zerver/actions/streams.py:1044:26:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/zulip/zulip/blob/2c8d74735a598c2b36a53ef20f50d2eef0babfc0/zerver/tests/test_push_notifications.py#L5136'>zerver/tests/test_push_notifications.py:5136:26:</a> FURB179 Use `chain.from_iterable()` instead
</pre>

</p>
</details>
<details><summary><a href="https://github.com/indico/indico">indico/indico</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/indico/indico/blob/d5ca605c03cbbb94502dfe1d7e807f7aa32aa02a/indico/modules/categories/controllers/display.py#L521'>indico/modules/categories/controllers/display.py:521:42:</a> FURB179 Use `chain.from_iterable()` instead
</pre>

</p>
</details>
<details><summary><a href="https://github.com/astropy/astropy">astropy/astropy</a> (+5 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/astropy/astropy/blob/7368ab84abfeddf960b7315a12a565de948615de/astropy/io/ascii/daophot.py#L92'>astropy/io/ascii/daophot.py:92:35:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/astropy/astropy/blob/7368ab84abfeddf960b7315a12a565de948615de/astropy/modeling/projections.py#L81'>astropy/modeling/projections.py:81:69:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/astropy/astropy/blob/7368ab84abfeddf960b7315a12a565de948615de/astropy/nddata/blocks.py#L92'>astropy/nddata/blocks.py:92:23:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/astropy/astropy/blob/7368ab84abfeddf960b7315a12a565de948615de/astropy/table/operations.py#L1455'>astropy/table/operations.py:1455:33:</a> FURB179 Use `chain.from_iterable()` instead
+ <a href='https://github.com/astropy/astropy/blob/7368ab84abfeddf960b7315a12a565de948615de/astropy/timeseries/periodograms/lombscargle/implementations/fastchi2_impl.py#L117'>astropy/timeseries/periodograms/lombscargle/implementations/fastchi2_impl.py:117:24:</a> FURB179 Use `chain.from_iterable()` instead
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| FURB179 | 23 | 23 | 0 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-13 08:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/refurb/rules/reimplemented_chain_from_iterable.rs</code>:76 on 2025-02-13 08:47</div>
            <div class="timeline-body"><p>What's the motivation for using the § sign here? And can't we just use the actual character §</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-02-13 08:50</div>
            <div class="timeline-body"><p>Thanks. I'm not sure if the long-term goal should be to merge RUF017 into this rule. They seem to have different motivations (performance vs idiomatic code)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2025-02-13 08:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2025-02-13 08:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-13 14:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>crates/ruff_linter/src/rules/refurb/rules/reimplemented_chain_from_iterable.rs</code>:76 on 2025-02-13 14:09</div>
            <div class="timeline-body"><p>It's just a habit of mine. The actual character might not be well-displayed by some fonts, hence the HTML entity.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-13 14:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/refurb/rules/reimplemented_chain_from_iterable.rs</code>:76 on 2025-02-13 14:11</div>
            <div class="timeline-body"><p>Okay, but what's the purpose of the sign in the first place?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-13 14:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>crates/ruff_linter/src/rules/refurb/rules/reimplemented_chain_from_iterable.rs</code>:76 on 2025-02-13 14:18</div>
            <div class="timeline-body"><p><a href="https://en.wikipedia.org/wiki/Section_sign"><code>§</code> (section sign)</a> represents a reference to a section of a document. It's perhaps rather uncommon in everyday online conversation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-13 14:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/refurb/rules/reimplemented_chain_from_iterable.rs</code>:76 on 2025-02-13 14:29</div>
            <div class="timeline-body"><p>I think just <code>chain.from_iterable</code> is good enough here</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2025-02-13 18:22</div>
            <div class="timeline-body"><p>Tested this on the PyTorch codebase, it doesn't handle list or set comprehensions correctly.</p>
<pre><code class="language-diff">     def get_log_qnames(self) -&gt; set[str]:
-        return {
-            qname
-            for qnames in self.log_alias_to_log_qnames.values()
-            for qname in qnames
-        }
+        return itertools.chain.from_iterable(qnames)
</code></pre>
<p>is obviously not a set (and the transformation is incorrect to boot!)</p>
<p>and</p>
<pre><code class="language-diff">index d5f4daf39d4..5ba751242ab 100644
--- a/torch/_inductor/codegen/cpp.py
+++ b/torch/_inductor/codegen/cpp.py
@@ -4895,7 +4895,7 @@ class CppScheduling(BaseScheduling):
                 )
                 kernel_group.finalize_kernel(
                     outer_fusion_cpp_kernel_proxy,
-                    [_node for _nodes in nodes_list for _node in _nodes],
+                    itertools.chain.from_iterable(_nodes),
                 )

             return True
</code></pre>
<p>is obviously not a list.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-13 18:27</div>
            <div class="timeline-body"><p>I'm not sure that the second one is necessarily <em>wrong</em>; it's just unsafe.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-02-13 18:33</div>
            <div class="timeline-body"><p>@Skylion007 That was quite a bug I didn't notice. Should be easy to fix though. I'll get to that if this PR doesn't get rejected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2025-02-14 14:48</div>
            <div class="timeline-body"><blockquote>
<p>I'm not sure that the second one is necessarily <em>wrong</em>; it's just unsafe.</p>
</blockquote>
<p>Main issue is that it can break type checking as people often annotate methods take a List explicitly instead of an arbitrary Iterable or Sequence.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2025-02-14 14:50</div>
            <div class="timeline-body"><p>This is a pretty useful PR, I've been waiting for this rule for a while given how useful it is for ensuring efficient, readable code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2025-02-21 14:33</div>
            <div class="timeline-body"><blockquote>
<p>I'm not sure that the second one is necessarily <em>wrong</em>; it's just unsafe.</p>
</blockquote>
<p>To clarify further, it's a semantic change to the code because something that was a list is now just an iterable and that can cause issues since you can't call get or len on it. It would be proper if the itertools.chain iterable was wrapped in a list ctor.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-02-21 15:14</div>
            <div class="timeline-body"><p>@Skylion007 The bug should be fixed now. Could you try again?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2025-02-23 15:44</div>
            <div class="timeline-body"><p>@InSyncWithFoo Still had issues with some comprehensions:</p>
<pre><code class="language-python">     def get_log_qnames(self) -&gt; set[str]:
-        return {
-            qname
-            for qnames in self.log_alias_to_log_qnames.values()
-            for qname in qnames
-        }
+        return set(itertools.chain.from_iterable(qnames))
</code></pre>
<p>^ Still did a wrong comprehension here.</p>
<p>~Also, would probably good to include an option asking if you want to actually unnest nested list comprehensions since I can imagine those might be faster / more readable in certain circmstances.~ Ah, interesting. Counter to my assumption, chain from iterable is faster even in the nested list comprehension setting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2025-02-23 17:24</div>
            <div class="timeline-body"><p>Okay, so that does seem significantly better with the latest fix. Also, we should probably consider updating C4 rules at some point to have chain.fromiterable be a useless iterable to list/tuple conversion. <code>itertools.chain.from_iterable(tuple(iter))</code> isn't particularly useful as far as I can tell.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2025-02-23 17:27</div>
            <div class="timeline-body"><p>The operator.add transform is still unsafe though because it can change the return type of functions. After all, itertools.chain returns an iterator, where operator.add usually concatenates it to a list or tuple depending on the base case. Having a config flag to enable this behavior of the rule would be helpful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2025-02-23 17:33</div>
            <div class="timeline-body"><p>it also seems to be assuming every operator.add reduction is a list/tuple reduction, when some could have been an integer, float or other reduction. For instance, it suggested this is sympy:</p>
<pre><code>-                return reduce(add, list(map(_rebuild, expr.args)))
+                return chain.from_iterable(list(map(_rebuild, expr.args)))
</code></pre>
<p>When I don't think it statically inferred that expr.args is not a list of lists, but sometime a list of symbolic numbers. So it has a lot of false negatives. Sometimes an operataor.add reduction is just a reduction of numbers inside of a list; and therefore valid.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Skylion007">@Skylion007</a> on <code>crates/ruff_linter/resources/test/fixtures/refurb/FURB179_0.py</code>:31 on 2025-02-23 17:35</div>
            <div class="timeline-body"><p>This is only valid if you know e is a list of list/tuple, add a test where it's not (like it's just a list of numbers). This should be no error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Skylion007">@Skylion007</a> reviewed on 2025-02-23 17:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-02-23 18:17</div>
            <div class="timeline-body"><p><code>chain.from_iterable(tuple(iter))</code> makes a copy of/consumes <code>iter</code>. Consider:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; a = [[1], [2], [3]]
&gt;&gt;&gt; c = chain.from_iterable(a)
&gt;&gt;&gt; a.append([4])
&gt;&gt;&gt; [*c]
[1, 2, 3, 4]
</code></pre>
<pre><code class="language-pycon">&gt;&gt;&gt; a = [[1], [2], [3]]
&gt;&gt;&gt; c = chain.from_iterable(tuple(a))
&gt;&gt;&gt; a.append([4])
&gt;&gt;&gt; [*c]
[1, 2, 3]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-23 18:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>crates/ruff_linter/resources/test/fixtures/refurb/FURB179_0.py</code>:31 on 2025-02-23 18:19</div>
            <div class="timeline-body"><p>That's true, but I would rather save this for a follow-up PR. This PR is already so big, it risks not being reviewed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Skylion007">@Skylion007</a> reviewed on 2025-02-24 14:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Skylion007">@Skylion007</a> on <code>crates/ruff_linter/resources/test/fixtures/refurb/FURB179_0.py</code>:31 on 2025-02-24 14:19</div>
            <div class="timeline-body"><p>That the last change needed to make
it useful and there should be builtin utilities to determine is something is a list/tuple in ruff</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-24 14:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>crates/ruff_linter/resources/test/fixtures/refurb/FURB179_0.py</code>:31 on 2025-02-24 14:27</div>
            <div class="timeline-body"><p>There are indeed <a href="https://github.com/astral-sh/ruff/blob/68991d09a8f64d1c155cfc5d96f9220daee07511/crates/ruff_python_semantic/src/analyze/typing.rs#L964-L966">a few functions</a> to check that a variable is a list or tuple, but not a <em>nested</em> list or tuple. <a href="https://docs.astral.sh/ruff/rules/quadratic-list-summation/"><code>RUF017</code></a> only reports when the third argument is an emty list; perhaps <code>FURB179</code> could copy that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Skylion007">@Skylion007</a> reviewed on 2025-02-24 14:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Skylion007">@Skylion007</a> on <code>crates/ruff_linter/resources/test/fixtures/refurb/FURB179_0.py</code>:31 on 2025-02-24 14:58</div>
            <div class="timeline-body"><p>Empty list, empty tuple, and empty set would all be valid, right? It's better to be too conservative vs too aggressive. Surprised there isn't a nested utility for this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Skylion007">@Skylion007</a> reviewed on 2025-02-24 15:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Skylion007">@Skylion007</a> on <code>crates/ruff_linter/resources/test/fixtures/refurb/FURB179_0.py</code>:31 on 2025-02-24 15:00</div>
            <div class="timeline-body"><p>We can add a todo comment for the more complicated uses cases later.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2025-02-26 14:33</div>
            <div class="timeline-body"><p>PR description should be updated. Also surprised there isn't more logic that can be extracted and shared with the relevant reduce RUF rule or any C4 utilities for rewriting comprehensions.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:10:00 UTC
    </footer>
</body>
</html>
