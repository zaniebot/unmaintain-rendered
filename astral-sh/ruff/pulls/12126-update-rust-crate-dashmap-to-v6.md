```yaml
number: 12126
title: Update Rust crate dashmap to v6
type: pull_request
state: merged
author: renovate
labels:
  - internal
assignees: []
merged: true
base: main
head: renovate/dashmap-6.x
created_at: 2024-07-01T00:59:11Z
updated_at: 2024-07-01T09:02:42Z
url: https://github.com/astral-sh/ruff/pull/12126
synced_at: 2026-01-12T15:55:40Z
```

# Update Rust crate dashmap to v6

---

_@renovate_

[![Mend Renovate](https://app.renovatebot.com/images/banner.svg)](https://renovatebot.com)

This PR contains the following updates:

| Package | Type | Update | Change |
|---|---|---|---|
| [dashmap](https://togithub.com/xacrimon/dashmap) | workspace.dependencies | major | `5.5.3` -> `6.0.0` |

---

### Release Notes

<details>
<summary>xacrimon/dashmap (dashmap)</summary>

### [`v6.0.1`](https://togithub.com/xacrimon/dashmap/releases/tag/v6.0.1)

[Compare Source](https://togithub.com/xacrimon/dashmap/compare/v6.0.0...v6.0.1)

This is a patch release, now the main release for v6 as v6.0.0 was yanked shortly after release.

Thanks to [@&#8203;JesusGuzmanJr](https://togithub.com/JesusGuzmanJr) for notifying me about a critical bug that was introduced so that I could resolve it: [#&#8203;304](https://togithub.com/xacrimon/dashmap/issues/304).

PRs for this release: [#&#8203;305](https://togithub.com/xacrimon/dashmap/issues/305) + https://github.com/xacrimon/dashmap/commit/d5c8be6213ca85d7e3ccbcc1eb5b95651ce7e253

### [`v6.0.0`](https://togithub.com/xacrimon/dashmap/releases/tag/v6.0.0)

[Compare Source](https://togithub.com/xacrimon/dashmap/compare/v5.5.3+small-opts...v6.0.0)

This release contains performance optimizations, most notably 10-40% gains on Apple Silicon but also 5-10% gains when measured in Intel Sapphire Rapids. This work was accomplished in:

-   [#&#8203;303](https://togithub.com/xacrimon/dashmap/issues/303)
-   [#&#8203;287](https://togithub.com/xacrimon/dashmap/issues/287)

Minor QoL improvements were made in:

-   [#&#8203;302](https://togithub.com/xacrimon/dashmap/issues/302)
-   [#&#8203;300](https://togithub.com/xacrimon/dashmap/issues/300)

Special to the following contributors for making this release possible:

-   [@&#8203;conradludgate](https://togithub.com/conradludgate)
-   [@&#8203;arthurprs](https://togithub.com/arthurprs)
-   [@&#8203;joshtriplett](https://togithub.com/joshtriplett)
-   [@&#8203;dtzxporter](https://togithub.com/dtzxporter)

</details>

---

### Configuration

üìÖ **Schedule**: Branch creation - "before 4am on Monday" (UTC), Automerge - At any time (no schedule defined).

üö¶ **Automerge**: Disabled by config. Please merge this manually once you are satisfied.

‚ôª **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.

üîï **Ignore**: Close this PR and you won't be reminded about this update again.

---

 - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box

---

This PR has been generated by [Mend Renovate](https://www.mend.io/free-developer-tools/renovate/). View repository job log [here](https://developer.mend.io/github/astral-sh/ruff).
<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy40MjEuMCIsInVwZGF0ZWRJblZlciI6IjM3LjQyMS4wIiwidGFyZ2V0QnJhbmNoIjoibWFpbiIsImxhYmVscyI6WyJpbnRlcm5hbCJdfQ==-->


---

_Comment by @renovate[bot] on 2024-07-01 00:59_

### ‚ö†Ô∏è Artifact update problem

Renovate failed to update an artifact related to this branch. You probably do not want to merge this PR as-is.

‚ôª Renovate will retry this branch, including artifacts, only when one of the following happens:

 - any of the package files in this branch needs updating, or 
 - the branch becomes conflicted, or
 - you click the rebase/retry checkbox if found above, or
 - you rename this PR's title to start with "rebase!" to trigger it manually

The artifact failure details are included below:

##### File name: Cargo.lock

```
Command failed: cargo update --config net.git-fetch-with-cli=true --manifest-path Cargo.toml --package dashmap@5.5.3 --precise 6.0.1
    Updating crates.io index
error: failed to select a version for the requirement `dashmap = "^5.3.4"`
candidate versions found which didn't match: 6.0.1
location searched: crates.io index
required by package `salsa v0.18.0 (https://github.com/salsa-rs/salsa.git?rev=f706aa2d32d473ee633a77c1af01d180c85da308#f706aa2d)`
    ... which satisfies git dependency `salsa` (locked to 0.18.0) of package `red_knot_module_resolver v0.0.0 (/tmp/renovate/repos/github/astral-sh/ruff/crates/red_knot_module_resolver)`
    ... which satisfies path dependency `red_knot_module_resolver` (locked to 0.0.0) of package `red_knot v0.1.0 (/tmp/renovate/repos/github/astral-sh/ruff/crates/red_knot)`
perhaps a crate was updated and forgotten to be re-vendored?

```



---

_Label `internal` added by @renovate[bot] on 2024-07-01 00:59_

---

_Review requested from @carljm by @MichaReiser on 2024-07-01 08:27_

---

_Review requested from @MichaReiser by @MichaReiser on 2024-07-01 08:27_

---

_Merged by @MichaReiser on 2024-07-01 08:48_

---

_Closed by @MichaReiser on 2024-07-01 08:48_

---

_Branch deleted on 2024-07-01 08:48_

---

_Comment by @github-actions[bot] on 2024-07-01 09:02_

<!-- generated-comment ecosystem -->
## `ruff-ecosystem` results
### Linter (stable)
‚úÖ ecosystem check detected no linter changes.

### Linter (preview)
‚ÑπÔ∏è ecosystem check **encountered linter errors**. (no lint changes; 1 project error)

<details><summary><a href="https://github.com/demisto/content">demisto/content</a> (error)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

```
warning: The top-level linter settings are deprecated in favour of their counterparts in the `lint` section. Please update the following options in `pyproject.toml`:
  - 'ignore' -> 'lint.ignore'
  - 'select' -> 'lint.select'
  - 'unfixable' -> 'lint.unfixable'
  - 'per-file-ignores' -> 'lint.per-file-ignores'
warning: `PGH001` has been remapped to `S307`.
warning: `PGH002` has been remapped to `G010`.
warning: `PLR1701` has been remapped to `SIM101`.
ruff failed
  Cause: Selection of deprecated rule `E999` is not allowed when preview is enabled.
```

</p>
</details>

### Formatter (stable)
‚ÑπÔ∏è ecosystem check **encountered format errors**. (no format changes; 1 project error)

<details><summary><a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)</summary>
<p>

```
warning: Detected debug build without --no-cache.
error: Failed to parse examples/gpt_actions_library/.gpt_action_getting_started.ipynb:11:1:1: Expected an expression
error: Failed to parse examples/gpt_actions_library/gpt_action_bigquery.ipynb:13:1:1: Expected an expression
```

</p>
</details>

### Formatter (preview)
‚ÑπÔ∏è ecosystem check **encountered format errors**. (no format changes; 2 project errors)

<details><summary><a href="https://github.com/demisto/content">demisto/content</a> (error)</summary>
<p>
<pre>ruff format --preview --exclude Packs/ThreatQ/Integrations/ThreatQ/ThreatQ.py</pre>
</p>
<p>

```
warning: The top-level linter settings are deprecated in favour of their counterparts in the `lint` section. Please update the following options in `pyproject.toml`:
  - 'ignore' -> 'lint.ignore'
  - 'select' -> 'lint.select'
  - 'unfixable' -> 'lint.unfixable'
  - 'per-file-ignores' -> 'lint.per-file-ignores'
warning: `PGH001` has been remapped to `S307`.
warning: `PGH002` has been remapped to `G010`.
warning: `PLR1701` has been remapped to `SIM101`.
ruff failed
  Cause: Selection of deprecated rule `E999` is not allowed when preview is enabled.
```

</p>
</details>
<details><summary><a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

```
warning: Detected debug build without --no-cache.
error: Failed to parse examples/gpt_actions_library/.gpt_action_getting_started.ipynb:11:1:1: Expected an expression
error: Failed to parse examples/gpt_actions_library/gpt_action_bigquery.ipynb:13:1:1: Expected an expression
```

</p>
</details>




---
