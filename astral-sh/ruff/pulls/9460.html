<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8-simplify`] Implement `SIM911` - astral-sh/ruff #9460</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8-simplify</code>] Implement <code>SIM911</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/9460">#9460</a>
        opened by <a href="https://github.com/trag1c">@trag1c</a>
        on 2024-01-10 23:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/trag1c">@trag1c</a> on 2024-01-10 23:14</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Closes #9319, implements the <a href="https://github.com/MartinThoma/flake8-simplify/pull/183"><code>SIM911</code> rule from <code>flake8-simplify</code></a>.</p>
<h4>Note</h4>
<p>I wasn't sure whether or not to include</p>
<pre><code class="language-rs">if checker.settings.preview.is_disabled() {
    return;
}
</code></pre>
<p>at the beginning of the function with violation logic if the rule's already declared as part of <code>RuleGroup::Preview</code>.
I've seen both variants, so I'd appreciate some feedback on that :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-01-10 23:27</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-01-11 03:12</div>
            <div class="timeline-body"><p>Awesome, excited to review!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @charliermarsh on 2024-01-11 03:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2024-01-11 03:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @charliermarsh on 2024-01-11 03:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-11 03:13</div>
            <div class="timeline-body"><pre><code class="language-rust">if checker.settings.preview.is_disabled() {
    return;
}
</code></pre>
<p>Ah yeah -- this shouldn't be required for rules that are in <code>RuleGroup::Preview</code>, only for logic <em>within</em> rules that varies based on whether preview is enabled. So omitting it here is correct in my view.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trag1c">@trag1c</a> on 2024-01-11 10:04</div>
            <div class="timeline-body"><p>Thanks, corrected it. Double-checked my findings and it turns out that what I saw was actually a stable rule that had the preview check. I'm assuming that's still redundant?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-01-11 18:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rules/flake8_simplify/rules/zip_dict_keys_and_values.rs</code>:87 on 2024-01-11 18:45</div>
            <div class="timeline-body"><p>Nit: should this be <code>var2</code>, or is it intentionally <code>val2</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-01-11 18:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rules/flake8_simplify/rules/zip_dict_keys_and_values.rs</code>:93 on 2024-01-11 18:45</div>
            <div class="timeline-body"><p>We know these are the same at this point, right? So could we just check one of them?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-01-11 18:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/checkers/ast/analyze/expression.rs</code>:873 on 2024-01-11 18:46</div>
            <div class="timeline-body"><p>Nit: for new rules, we're preferring to pass in <code>call</code>, rather than <code>expr</code>, since it ensures that we don't pass in expressions of the wrong type.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-01-11 18:46</div>
            <div class="timeline-body"><p>Looks great! Only minor feedback.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-11 18:47</div>
            <div class="timeline-body"><blockquote>
<p>Thanks, corrected it. Double-checked my findings and it turns out that what I saw was actually a stable rule that had the preview check. I'm assuming that's still redundant?</p>
</blockquote>
<p>Yeah, which rule is this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trag1c">@trag1c</a> on 2024-01-11 18:55</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>Thanks, corrected it. Double-checked my findings and it turns out that what I saw was actually a stable rule that had the preview check. I'm assuming that's still redundant?</p>
</blockquote>
<p>Yeah, which rule is this?</p>
</blockquote>
<p>I checked to find the rule code only to realize it's just ONE OF the functions that has the preview check in which case it's probably fine ü§¶‚Äç‚ôÇÔ∏è forgive my silliness</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/trag1c">@trag1c</a> reviewed on 2024-01-11 18:55</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/trag1c">@trag1c</a> on <code>crates/ruff_linter/src/rules/flake8_simplify/rules/zip_dict_keys_and_values.rs</code>:87 on 2024-01-11 18:55</div>
            <div class="timeline-body"><p>It should be <code>var2</code>, thanks :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/trag1c">@trag1c</a> reviewed on 2024-01-11 18:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/trag1c">@trag1c</a> on <code>crates/ruff_linter/src/rules/flake8_simplify/rules/zip_dict_keys_and_values.rs</code>:93 on 2024-01-11 18:56</div>
            <div class="timeline-body"><p>Yep, good catch. Looks like a remnant from my prior code üòÑ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-11 19:00</div>
            <div class="timeline-body"><p>@trag1c - I'm happy to include this in today's release. Do you wanna do the follow-up feedback otherwise I can do it quickly (no bother either way)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trag1c">@trag1c</a> on 2024-01-11 19:05</div>
            <div class="timeline-body"><p>Sure, let's get that released today! üòÑ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2024-01-11 19:10</div>
            <div class="timeline-body"><h2><a href="https://codspeed.io/astral-sh/ruff/branches/trag1c:simplify-SIM911">CodSpeed Performance Report</a></h2>
<h3>Merging #9460 will <strong>degrade performances by 4.35%</strong></h3>
<p><sub>Comparing <code>trag1c:simplify-SIM911</code> (ea5a54a) with <code>main</code> (f192c72)</sub></p>
<h3>Summary</h3>
<p><code>‚ùå 1</code> regressions
<code>‚úÖ 29</code> untouched benchmarks</p>
<blockquote>
<p>:warning: <em>Please fix the performance issues or <a href="https://codspeed.io/astral-sh/ruff/branches/trag1c:simplify-SIM911">acknowledge them on CodSpeed</a>.</em></p>
</blockquote>
<h3>Benchmarks breakdown</h3>
<p>|     | Benchmark | <code>main</code> | <code>trag1c:simplify-SIM911</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| ‚ùå | <code>parser[numpy/ctypeslib.py]</code> | 12.2 ms | 12.8 ms | -4.35% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-11 19:32</div>
            <div class="timeline-body"><p>@trag1c - think it just needs to be updated against <code>main</code>, just pushed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trag1c">@trag1c</a> on 2024-01-11 19:36</div>
            <div class="timeline-body"><p>My brain ignored &quot;just pushed&quot; and decided to update it myself either way ü§¶‚Äç‚ôÇÔ∏è
Sorry for messing up again</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-01-11 19:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-01-11 19:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-11 19:42</div>
            <div class="timeline-body"><p>(This doesn't touch the parser at all so it must be noise.)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 22:58:00 UTC
    </footer>
</body>
</html>
