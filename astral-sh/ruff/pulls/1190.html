<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support hierarchical settings for nested directories - astral-sh/ruff #1190</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support hierarchical settings for nested directories</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1190">#1190</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2022-12-11 03:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-11 03:41</div>
            <div class="timeline-body"><p>The goal of this PR is to introduce hierarchical settings detection for Ruff, similar to the ESLint model, such that when we go to lint a given file, we always use the <code>pyproject.toml</code> file &quot;closest&quot; to that file in the filesystem hierarchy.</p>
<p>This has a number of nice side effects -- namely, linting a file becomes independent of the path from which the linter was invoked, and independent of the list of files passed to the <code>ruff</code> invocation (neither of which are true today).</p>
<p>(There's one caveat here which is that the <code>fix</code> and <code>format</code> <code>pyproject.toml</code> options, which are semantically part of the <em>invocation</em>, aren't going to be inherited -- so we'll use the current working directory to find the <code>pyproject.toml</code> to power those two, specific options.)</p>
<p>Resolves #1069.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @charliermarsh on 2022-12-11 03:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @charliermarsh on 2022-12-11 03:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-11 03:56</div>
            <div class="timeline-body"><p>There's a small performance hit here from doing two filesystem traversals. It might be possible to avoid it, since we could in theory track the &quot;current&quot; <code>pyproject.toml</code> as we iterate over the Python files (we need to know the current settings in order to power the <code>excludes</code> behavior).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2022-12-12 15:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-12-12 15:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2022-12-12 15:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 05:38:24 UTC
    </footer>
</body>
</html>
