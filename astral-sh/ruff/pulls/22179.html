<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Automatically re-run ecosystem-analyzer workflow on subsequent pushes to a PR, if the PR has the `ecosystem-analyzer` label - astral-sh/ruff #22179</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Automatically re-run ecosystem-analyzer workflow on subsequent pushes to a PR, if the PR has the <code>ecosystem-analyzer</code> label</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/22179">#22179</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-12-24 17:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR reworks our ecosystem-analyzer workflow so that it automatically reruns if a PR with the <code>ecosystem-analyzer</code> label has new commits pushed to it, or is reopened after previously being closed. It's currently easy to forget that you need to remove and re-add the label to trigger a fresh workflow run, which can then mean that there are stale (misleading) results in the PR comment posted by the bot. It also means that it takes longer for CI to finish than it would otherwise, because it might be a few minutes after pushing new commits to the PR before you remember that you also need to remove and re-add the label.</p>
<p>To write this PR, I consulted:</p>
<ul>
<li>The GitHub workflow trigger documentation: https://docs.github.com/en/actions/reference/workflows-and-actions/events-that-trigger-workflows#pull_request</li>
<li>This Stack Overflow answer: https://stackoverflow.com/a/59588725/13990016</li>
</ul>
<h2>Test Plan</h2>
<p>I experimented with pushing commits to this PR and closing/reopening it, and both of these actions triggered fresh runs of the ecosystem-analyzer worfklow when the label was present on the PR. However, removing the label again meant that the workflow was no longer triggered by these actions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by @AlexWaygood on 2025-12-24 17:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by @AlexWaygood on 2025-12-24 17:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by @AlexWaygood on 2025-12-24 17:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-12-24 17:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @AlexWaygood on 2025-12-24 17:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> removed by @AlexWaygood on 2025-12-24 17:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-12-24 17:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @AlexWaygood on 2025-12-24 17:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by @AlexWaygood on 2025-12-24 17:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2025-12-24 17:51</div>
            <div class="timeline-body"><!-- generated-comment ty ecosystem-analyzer -->

<h2><code>ecosystem-analyzer</code> results</h2>
<p>| Lint rule | Added | Removed | Changed |
|-----------|------:|--------:|--------:|
| <code>invalid-return-type</code> | 0 | 1 | 11 |
| <code>invalid-assignment</code> | 0 | 0 | 5 |
| <code>invalid-argument-type</code> | 0 | 0 | 4 |
| <code>unused-ignore-comment</code> | 1 | 0 | 0 |
| <strong>Total</strong> | <strong>1</strong> | <strong>1</strong> | <strong>20</strong> |</p>
<p><strong><a href="https://3de597d7.ty-ecosystem-ext.pages.dev/diff">Full report with detailed diff</a></strong> (<a href="https://3de597d7.ty-ecosystem-ext.pages.dev/timing">timing results</a>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @AlexWaygood on 2025-12-24 17:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @AlexWaygood on 2025-12-24 17:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @AlexWaygood on 2025-12-24 17:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-12-25 17:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @AlexWaygood on 2025-12-25 17:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-12-25 17:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-12-25 17:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-12-29 09:08</div>
            <div class="timeline-body"><p>Cool, thank you!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:18:23 UTC
    </footer>
</body>
</html>
