<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make `CallBinding::callable_ty` required - astral-sh/ruff #16135</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make <code>CallBinding::callable_ty</code> required</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16135">#16135</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2025-02-13 09:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>The <code>callable_ty</code> is always known except in some TODO code where we can use a <code>TODO</code> type instead.</p>
<h2>Test Plan</h2>
<p><code>cargo test</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @MichaReiser on 2025-02-13 09:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @MichaReiser on 2025-02-13 09:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @MichaReiser on 2025-02-13 09:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @MichaReiser on 2025-02-13 09:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @MichaReiser on 2025-02-13 09:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-13 09:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_python_semantic/src/types/call/bind.rs</code>:140 on 2025-02-13 09:32</div>
            <div class="timeline-body"><p>I wonder if this will be true. E.g. it's already a function in the <code>Class.__call__</code> case. So maybe it's always the function type?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-02-13 12:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/red_knot_python_semantic/src/types/call/bind.rs</code>:140 on 2025-02-13 12:59</div>
            <div class="timeline-body"><p>Not sure I fully understand the question, but it's possible for the <code>__call__</code> method to be an instance of another callable object. It doesn't have to be a function (https://bsky.app/profile/alexwaygood.bsky.social/post/3lejkfqwhkk2o)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/src/types/call/bind.rs</code>:140 on 2025-02-14 00:10</div>
            <div class="timeline-body"><p>By the time we are actually binding a call, though, we'll have burrowed through all the layers of <code>__call__</code> to an actual function.</p>
<p>I think &quot;class&quot; here was meant for the case of instantiating a class, but even in that case the callable type could be considered the <code>__init__</code> or <code>__new__</code> function we bind to.</p>
<p>This is only used for constructing better error messages, so really how we fill it in depends on what we want our diagnostics to say. If we always put the final function in here, then it might imply that we want functions to carry more of their context, e.g. so we can name it as <code>C.__call__</code> instead of just <code>__call__</code> in the diagnostic.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> approved on 2025-02-14 00:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2025-02-14 07:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-02-14 07:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-02-14 07:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:10:01 UTC
    </footer>
</body>
</html>
