<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `--output-format` to `ruff config` CLI - astral-sh/ruff #11438</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>--output-format</code> to <code>ruff config</code> CLI</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11438">#11438</a>
        opened by <a href="https://github.com/thatch">@thatch</a>
        on 2024-05-15 23:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/thatch">@thatch</a></div>
            <div class="timeline-body"><p>This is useful for extracting the defaults in order to construct equivalent configs by external scripts.  This is my first non-hello-world rust code, comments and suggested tests appreciated.</p>
Summary
<p>We already have <code>ruff linter --output-format json</code>, this provides <code>ruff config x --output-format json</code> as well.  I plan to use this to construct an equivalent config snippet to include in some managed repos, so when we update their version of ruff and it adds new lints, they get a PR that includes the commented-out new lints.</p>
<p>Note that the no-args form of <code>ruff config</code> ignores output-format currently, but probably should obey it (although array-of-strings doesn&#x27;t seem that useful, looking for input on format).</p>
Test Plan
<p>I could use a hand coming up with a typical way to write automated tests for this.</p>
<pre><code>(.venv) [timhatch:ruff ]$ ./target/debug/ruff config lint.select
A list of rule codes or prefixes to enable. Prefixes can specify exact
rules (like `F841`), entire categories (like `F`), or anything in
between.

When breaking ties between enabled and disabled rules (via `select` and
`ignore`, respectively), more specific prefixes override less
specific prefixes.

Default value: [&quot;E4&quot;, &quot;E7&quot;, &quot;E9&quot;, &quot;F&quot;]
Type: list[RuleSelector]
Example usage:
``toml
# On top of the defaults (`E4`, E7`, `E9`, and `F`), enable flake8-bugbear (`B`) and flake8-quotes (`Q`).
select = [&quot;E4&quot;, &quot;E7&quot;, &quot;E9&quot;, &quot;F&quot;, &quot;B&quot;, &quot;Q&quot;]
``
(.venv) [timhatch:ruff ]$ ./target/debug/ruff config lint.select --output-format json
{
  &quot;Field&quot;: {
    &quot;doc&quot;: &quot;A list of rule codes or prefixes to enable. Prefixes can specify exact\nrules (like `F841`), entire categories (like `F`), or anything in\nbetween.\n\nWhen breaking ties between enabled and disabled rules (via `select` and\n`ignore`, respectively), more specific prefixes override less\nspecific prefixes.&quot;,
    &quot;default&quot;: &quot;[\&quot;E4\&quot;, \&quot;E7\&quot;, \&quot;E9\&quot;, \&quot;F\&quot;]&quot;,
    &quot;value_type&quot;: &quot;list[RuleSelector]&quot;,
    &quot;scope&quot;: null,
    &quot;example&quot;: &quot;# On top of the defaults (`E4`, E7`, `E9`, and `F`), enable flake8-bugbear (`B`) and flake8-quotes (`Q`).\nselect = [\&quot;E4\&quot;, \&quot;E7\&quot;, \&quot;E9\&quot;, \&quot;F\&quot;, \&quot;B\&quot;, \&quot;Q\&quot;]&quot;,
    &quot;deprecated&quot;: null
  }
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-05-15 23:25</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-16 01:43</div>
            <div class="timeline-body"><p>This looks reasonable to me. Let me see if I can get the no-args form working, then can merge.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-05-16 01:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-16 02:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Add output-format to config in cli&quot; to &quot;Add `--output-format` to `ruff config` CLI&quot; by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-16 02:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-16 02:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-16 02:17</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:04:06 UTC
    </footer>
</body>
</html>
