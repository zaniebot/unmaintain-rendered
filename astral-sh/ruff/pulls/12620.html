<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`tryceratops`] Add `BaseException` to raise-vanilla-class rule (`TRY002`) - astral-sh/ruff #12620</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>tryceratops</code>] Add <code>BaseException</code> to raise-vanilla-class rule (<code>TRY002</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/12620">#12620</a>
        opened by <a href="https://github.com/epenet">@epenet</a>
        on 2024-08-02 07:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/epenet">@epenet</a></div>
            <div class="timeline-body"><p>Fixes #12612</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-08-02 08:27</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @epenet on 2024-08-02 08:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @MichaReiser on 2024-08-05 07:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2024-08-05 07:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-05 07:48</div>
            <div class="timeline-body"><p>Code looks good to me. We only have to decide on https://github.com/astral-sh/ruff/issues/12612#issuecomment-2263942167</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-08-05 07:53</div>
            <div class="timeline-body"><p>This makes sense to me. It's unfortunate to deviate from <code>tryceratops</code> here, but I think it definitely makes sense to include <code>BaseException</code> as well as <code>Exception</code>.</p>
<p>Should we also include <code>ExceptionGroup</code> and <code>BaseExceptionGroup</code>, though? (That's a genuine question that I'm not sure the answer to -- I haven't had much opportunity to use these fancy new features yet! It might be that they belong in this rule, or it might be that they deserve their own rule... not sure.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2024-08-05 07:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/tryceratops/rules/raise_vanilla_class.rs</code>:75 on 2024-08-05 07:56</div>
            <div class="timeline-body"><p>This is resolving the qualified name twice when it only needs to resolve it once -- we can micro-optimize this a little bit:</p>
<pre><code class="language-suggestion">    if checker
        .semantic()
        .resolve_qualified_name(node)
        .is_some_and(|qualified_name| {
            matches!(qualified_name.segments(), [&quot;&quot; | &quot;builtins&quot;, &quot;Exception&quot; | &quot;BaseException&quot;])
        })
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-08-05 08:44</div>
            <div class="timeline-body"><p>Let's land this for now, we can tackle the <code>ExceptionGroup</code> and <code>BaseExceptionGroup</code> issues as a followup. I think this is a strict improvement.</p>
<p>Thanks @epenet!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @AlexWaygood on 2024-08-05 08:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @AlexWaygood on 2024-08-05 08:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-08-05 08:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-08-05 08:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:05:37 UTC
    </footer>
</body>
</html>
