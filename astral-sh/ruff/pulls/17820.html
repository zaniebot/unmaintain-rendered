<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rename Red Knot - astral-sh/ruff #17820</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rename Red Knot</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/17820">#17820</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2025-05-03 16:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body">Summary
<ul>
<li>Rename all crates from <code>red_knot_*</code> to <code>ty_</code></li>
<li>Rename <code>knot: ignore</code> to <code>ty: ignore</code></li>
<li>Rename <code>knot_extensions</code> to <code>ty_extensions</code></li>
<li>Rename <code>knot.toml</code> to <code>ty.toml</code> and <code>tool.knot</code> to <code>tool.ty</code></li>
<li>Rename <code>knot_benchmark to </code>ty_benchmark`</li>
<li>Rename the benchmarks. This has the downside that we lose historic data. However, we&#x27;ll have many more profiles in the future and the most important is the baseline compared to the previous commit</li>
<li>Update mypy primer to build <code>ty</code>, <a href="https://github.com/hauntsaninja/mypy_primer/pull/166">hauntsaninja/mypy_primer#166</a></li>
</ul>
<p>I&#x27;m pretty sure I missed something or messed up some casing somewhere but we can fix those  cases in follow up PRs. I did check that there are no more files names <code>knot</code> and verified that all text matches for <code>knot</code> are unrelated to the type checker (or things I plan on changing later)</p>
<p>What I didn&#x27;t rename as part of this PR:</p>
<ul>
<li>~~<code>knot</code> argument in mypy primer: @sharkdp will take care of this~~ I need to do this to not break the mypy primer workflow <a href="https://github.com/hauntsaninja/mypy_primer/pull/166">hauntsaninja/mypy_primer#166</a>/commits</li>
<li>Playground URL: I&#x27;ll combine this with some other playground changes (new logo etc).</li>
</ul>
CI Failures
<ul>
<li>The fuzzer job fails because it tries to pull the <code>red_knot</code> binary but its now named <code>ty</code>. This should work again once we run from main</li>
<li>The mypy primer job fails because it tries to build <code>ty</code> on main, but the binary is called <code>red_knot</code> on main. This should work once both main and PRs are past this commit.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-03 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-05-03 16:52</div>
            <div class="timeline-body">



<a href="https://codspeed.io/astral-sh/ruff/branches/micha%2Frename">CodSpeed Performance Report</a>
Merging #17820 will <strong>not alter performance</strong>
<p>Comparing <code>micha/rename</code> (f9e6b7f) with <code>main</code> (e6a798b)</p>
Summary
<p><code>‚úÖ 30</code> untouched benchmarks<br>
<code>üÜï 3</code> new benchmarks<br>
<code>‚ÅâÔ∏è 3 (üëÅ 3)</code> dropped benchmarks</p>
Benchmarks breakdown
<p>|     | Benchmark | <code>BASE</code> | <code>HEAD</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| üëÅ | <code>red_knot_check_file[cold]</code> | 101.8 ms | N/A | N/A |
| üëÅ | <code>red_knot_check_file[incremental]</code> | 5.6 ms | N/A | N/A |
| üëÅ | <code>red_knot_micro[many_string_assignments]</code> | 58.7 ms | N/A | N/A |
| üÜï | <code>ty_check_file[cold]</code> | N/A | 102 ms | N/A |
| üÜï | <code>ty_check_file[incremental]</code> | N/A | 5.6 ms | N/A |
| üÜï | <code>ty_micro[many_string_assignments]</code> | N/A | 58.9 ms | N/A |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-05-03 17:13</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>‚úÖ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>‚úÖ ecosystem check detected no linter changes.</p>
Formatter (stable)
<p>‚ÑπÔ∏è ecosystem check <strong>encountered format errors</strong>. (no format changes; 1 project error)</p>
<a href="https://github.com/mesonbuild/meson-python">mesonbuild/meson-python</a> (error)
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to read tests/packages/symlinks/baz.py: No such file or directory (os error 2)
error: Failed to read tests/packages/symlinks/qux.py: No such file or directory (os error 2)
</code></pre>
</p>


Formatter (preview)
<p>‚ÑπÔ∏è ecosystem check <strong>encountered format errors</strong>. (no format changes; 1 project error)</p>
<a href="https://github.com/mesonbuild/meson-python">mesonbuild/meson-python</a> (error)
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to read tests/packages/symlinks/baz.py: No such file or directory (os error 2)
error: Failed to read tests/packages/symlinks/qux.py: No such file or directory (os error 2)
</code></pre>
</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-03 17:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-03 17:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-03 17:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/sharkdp">@sharkdp</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-03 17:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-03 17:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-05-03 17:38</div>
            <div class="timeline-body"><p>We need to rename the label we put on PRs -- there&#x27;s this reference to the old name still on your branch because the label still has the old name:</p>
<p>https://github.com/astral-sh/ruff/blob/1bd849239e477594cc143644fcba9351d6172f58/pyproject.toml#L109-L113</p>
<p>but maybe that needs to be done as a followup? not sure</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-03 17:39</div>
            <div class="timeline-body"><p>Yeah, I thought about that (and should have mentioned it in the PR summary).</p>
<p>I decided to wait for when we rename the label. We can do this separately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-05-03 17:40</div>
            <div class="timeline-body"><p>we need to update this reference in the docs for running mypy_primer: https://github.com/astral-sh/ruff/blob/1bd849239e477594cc143644fcba9351d6172f58/crates/ty/docs/mypy_primer.md?plain=1#L21-L31</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-03 17:40</div>
            <div class="timeline-body"><blockquote>
<p>we need to update this reference in the docs for running mypy_primer:</p>
</blockquote>
<p>Yes, I need to do this now that I changed the mypy primer job.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2025-05-03 17:46</div>
            <div class="timeline-body"><p>üöÄ Obviously I haven&#x27;t checked every line, but overall this LGTM!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-03 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-03 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-05-03 17:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:13:58 UTC
    </footer>
</body>
</html>
