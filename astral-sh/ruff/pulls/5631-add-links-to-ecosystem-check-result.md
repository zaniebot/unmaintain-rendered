```yaml
number: 5631
title: Add links to ecosystem check result
type: pull_request
state: merged
author: dhruvmanila
labels: []
assignees: []
merged: true
base: main
head: dhruv/ecosystem-links
created_at: 2023-07-09T16:39:40Z
updated_at: 2023-07-10T03:55:27Z
url: https://github.com/astral-sh/ruff/pull/5631
synced_at: 2026-01-12T15:55:19Z
```

# Add links to ecosystem check result

---

_@dhruvmanila_

## Summary

Add links for ecosystem check result. This is useful for developers to quickly
check the added/removed violations with a single click.

There are a few downsides of this approach:
* Syntax highlighting is not available for the output
* Content length is increased because of the additional anchor tags

## Test Plan

`python scripts/check_ecosystem.py ./target/debug/ruff ../ruff-test/target/debug/ruff`

<details><summary>Example Output:</summary>

â„¹ï¸ ecosystem check **detected changes**. (+6, -0, 0 error(s))

<details><summary>airflow (+1, -0)</summary>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/main/dev/breeze/src/airflow_breeze/commands/release_management_commands.py#L654'>dev/breeze/src/airflow_breeze/commands/release_management_commands.py:654:25:</a> PERF401 Use a list comprehension to create a transformed list
</pre>

</p>
</details>
<details><summary>bokeh (+3, -0)</summary>
<p>

<pre>
+ <a href='https://github.com/bokeh/bokeh/blob/branch-3.2/src/bokeh/model/model.py#L315'>src/bokeh/model/model.py:315:17:</a> PERF401 Use a list comprehension to create a transformed list
+ <a href='https://github.com/bokeh/bokeh/blob/branch-3.2/src/bokeh/resources.py#L470'>src/bokeh/resources.py:470:25:</a> PERF401 Use a list comprehension to create a transformed list
+ <a href='https://github.com/bokeh/bokeh/blob/branch-3.2/src/bokeh/sphinxext/bokeh_sampledata_xref.py#L134'>src/bokeh/sphinxext/bokeh_sampledata_xref.py:134:17:</a> PERF401 Use a list comprehension to create a transformed list
</pre>

</p>
</details>
<details><summary>zulip (+2, -0)</summary>
<p>

<pre>
+ <a href='https://github.com/zulip/zulip/blob/main/zerver/actions/create_user.py#L197'>zerver/actions/create_user.py:197:17:</a> PERF401 Use a list comprehension to create a transformed list
+ <a href='https://github.com/zulip/zulip/blob/main/zerver/lib/markdown/__init__.py#L2412'>zerver/lib/markdown/__init__.py:2412:13:</a> PERF401 Use a list comprehension to create a transformed list
</pre>

</p>
</details>

</details>


---

_Comment by @dhruvmanila on 2023-07-09 16:39_

Current dependencies on/for this PR:
* main
  * **PR #5631** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/5631" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite" width="10px" height="10px"/></a>  ğŸ‘ˆ

This comment was auto-generated by [Graphite](https://app.graphite.dev/github/pr/astral-sh/ruff/5631?utm_source=stack-comment).

---

_Renamed from "Add links for ecosystem check result" to "Add links to ecosystem check result" by @dhruvmanila on 2023-07-09 16:40_

---

_Review requested from @konstin by @dhruvmanila on 2023-07-09 16:40_

---

_Comment by @github-actions[bot] on 2023-07-09 16:51_

## PR Check Results
### Benchmark
#### Linux
```
group                                      main                                   pr
-----                                      ----                                   --
formatter/large/dataset.py                 1.02      8.0Â±0.01ms     5.1 MB/sec    1.00      7.8Â±0.01ms     5.2 MB/sec
formatter/numpy/ctypeslib.py               1.02   1763.4Â±4.43Âµs     9.4 MB/sec    1.00   1735.4Â±3.33Âµs     9.6 MB/sec
formatter/numpy/globals.py                 1.00    196.2Â±0.32Âµs    15.0 MB/sec    1.00    195.9Â±0.23Âµs    15.1 MB/sec
formatter/pydantic/types.py                1.03      3.9Â±0.01ms     6.6 MB/sec    1.00      3.8Â±0.01ms     6.7 MB/sec
linter/all-rules/large/dataset.py          1.00     13.4Â±0.03ms     3.0 MB/sec    1.00     13.4Â±0.03ms     3.0 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      3.4Â±0.00ms     4.9 MB/sec    1.00      3.4Â±0.01ms     4.9 MB/sec
linter/all-rules/numpy/globals.py          1.00    433.6Â±0.80Âµs     6.8 MB/sec    1.00    435.5Â±2.08Âµs     6.8 MB/sec
linter/all-rules/pydantic/types.py         1.00      5.9Â±0.01ms     4.3 MB/sec    1.00      5.9Â±0.01ms     4.3 MB/sec
linter/default-rules/large/dataset.py      1.00      6.7Â±0.01ms     6.0 MB/sec    1.00      6.7Â±0.01ms     6.1 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00   1476.9Â±4.39Âµs    11.3 MB/sec    1.00   1483.3Â±4.47Âµs    11.2 MB/sec
linter/default-rules/numpy/globals.py      1.00    168.0Â±0.21Âµs    17.6 MB/sec    1.02    170.7Â±0.97Âµs    17.3 MB/sec
linter/default-rules/pydantic/types.py     1.01      3.1Â±0.01ms     8.3 MB/sec    1.00      3.0Â±0.01ms     8.4 MB/sec
```

#### Windows
```
group                                      main                                   pr
-----                                      ----                                   --
formatter/large/dataset.py                 1.03     11.6Â±0.41ms     3.5 MB/sec    1.00     11.4Â±0.24ms     3.6 MB/sec
formatter/numpy/ctypeslib.py               1.00      2.5Â±0.08ms     6.7 MB/sec    1.00      2.5Â±0.07ms     6.7 MB/sec
formatter/numpy/globals.py                 1.00   282.1Â±13.69Âµs    10.5 MB/sec    1.00   283.2Â±14.58Âµs    10.4 MB/sec
formatter/pydantic/types.py                1.00      5.5Â±0.15ms     4.7 MB/sec    1.01      5.5Â±0.17ms     4.6 MB/sec
linter/all-rules/large/dataset.py          1.00     19.2Â±0.28ms     2.1 MB/sec    1.01     19.3Â±0.25ms     2.1 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      5.0Â±0.09ms     3.3 MB/sec    1.01      5.1Â±0.18ms     3.3 MB/sec
linter/all-rules/numpy/globals.py          1.00   618.1Â±21.67Âµs     4.8 MB/sec    1.02   630.5Â±43.31Âµs     4.7 MB/sec
linter/all-rules/pydantic/types.py         1.00      8.6Â±0.20ms     3.0 MB/sec    1.00      8.6Â±0.25ms     3.0 MB/sec
linter/default-rules/large/dataset.py      1.00      9.9Â±0.20ms     4.1 MB/sec    1.00      9.8Â±0.18ms     4.1 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00      2.1Â±0.07ms     7.9 MB/sec    1.00      2.1Â±0.09ms     7.8 MB/sec
linter/default-rules/numpy/globals.py      1.03   257.8Â±13.04Âµs    11.4 MB/sec    1.00    249.2Â±9.22Âµs    11.8 MB/sec
linter/default-rules/pydantic/types.py     1.00      4.4Â±0.12ms     5.7 MB/sec    1.01      4.5Â±0.18ms     5.7 MB/sec
```
<!-- thollander/actions-comment-pull-request "PR Check Results" -->

---

_Review comment by @konstin on `scripts/check_ecosystem.py`:92 on 2023-07-09 18:30_

nit:
```suggestion
        # Default to main branch
        url += f"/blob/{self.ref or 'main'}"
```

---

_@konstin approved on 2023-07-09 18:31_

thanks, this is great!

---

_Comment by @charliermarsh on 2023-07-10 02:52_

This will save us a lot of time, nice.

---

_Comment by @dhruvmanila on 2023-07-10 03:54_

(CI errors are unrelated to this PR so merging)

---

_Merged by @dhruvmanila on 2023-07-10 03:55_

---

_Closed by @dhruvmanila on 2023-07-10 03:55_

---

_Branch deleted on 2023-07-10 03:55_

---
