<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[airflow]: extend removed method calls (AIR302) - astral-sh/ruff #15054</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[airflow]: extend removed method calls (AIR302)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/15054">#15054</a>
        opened by <a href="https://github.com/Lee-W">@Lee-W</a>
        on 2024-12-19 09:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a></div>
            <div class="timeline-body">

Summary


<p>Airflow 3.0 removes various deprecated functions, members, modules, and other values. They have been deprecated in 2.x, but the removal causes incompatibilities that we want to detect. This PR deprecates the following names and add a function for removed methods</p>
<ul>
<li><code>airflow.datasets.manager.DatasetManager.register_dataset_change</code> â†’ <code>airflow.assets.manager.AssetManager.register_asset_change</code></li>
<li><code>airflow.datasets.manager.DatasetManager.create_datasets</code> â†’ <code>airflow.assets.manager.AssetManager.create_assets</code></li>
<li><code>airflow.datasets.manager.DatasetManager.notify_dataset_created</code> â†’ <code>airflow.assets.manager.AssetManager.notify_asset_created</code></li>
<li><code>airflow.datasets.manager.DatasetManager.notify_dataset_changed</code> â†’ <code>airflow.assets.manager.AssetManager.notify_asset_changed</code></li>
<li><code>airflow.datasets.manager.DatasetManager.notify_dataset_alias_created</code> â†’ <code>airflow.assets.manager.AssetManager.notify_asset_alias_created</code></li>
<li><code>airflow.providers.amazon.auth_manager.aws_auth_manager.AwsAuthManager.is_authorized_dataset</code> â†’ <code>airflow.providers.amazon.auth_manager.aws_auth_manager.AwsAuthManager.is_authorized_asset</code></li>
<li><code>airflow.lineage.hook.HookLineageCollector.create_dataset</code> â†’ <code>airflow.lineage.hook.HookLineageCollector.create_asset</code></li>
<li><code>airflow.lineage.hook.HookLineageCollector.add_input_dataset</code> â†’ <code>airflow.lineage.hook.HookLineageCollector.add_input_asset</code></li>
<li><code>airflow.lineage.hook.HookLineageCollector.add_output_dataset</code> â†’ <code>airflow.lineage.hook.HookLineageCollector.dd_output_asset</code></li>
<li><code>airflow.lineage.hook.HookLineageCollector.collected_datasets</code> â†’ <code>airflow.lineage.hook.HookLineageCollector.collected_assets</code></li>
<li><code>airflow.providers_manager.ProvidersManager.initialize_providers_dataset_uri_resources</code> â†’ <code>airflow.providers_manager.ProvidersManager.initialize_providers_asset_uri_resources</code></li>
</ul>
Test Plan


<p>A test fixture is included in the PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;feat(AIR302): add the following rules for method name changes&quot; to &quot;[airflow]: extend removed method calls (AIR302)&quot; by <a href="https://github.com/Lee-W">@Lee-W</a> on 2024-12-19 09:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-12-19 09:26</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>âœ… ecosystem check detected no linter changes.</p>
Linter (preview)
<p>âœ… ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-19 12:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-19 12:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-12-19 12:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:718 on 2024-12-19 12:12</div>
            <div class="timeline-body"><p>Can we skip calling <code>removed_method</code> if the <code>resolved_qualified_name</code> call was successful or does it need both?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2024-12-19 13:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:718 on 2024-12-19 13:24</div>
            <div class="timeline-body"><p>I think both are needed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:718 on 2024-12-19 13:56</div>
            <div class="timeline-body"><p>e.g.,</p>
<pre><code>from airflow.datasets.manager import DatasetManager

d = DatasetManager()
d.register_dataset_change()
</code></pre>
<p>needs 2 warnings</p>
<ol>
<li>import error</li>
<li>method call error</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2024-12-19 13:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2024-12-19 13:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:170 on 2024-12-19 13:58</div>
            <div class="timeline-body"><p>Clippy suggest me to change it to <code>&amp;Expr</code>, but it failed after I changed it. Would like to see whether there&#x27;s suggestion on this one. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2024-12-19 13:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:158 on 2024-12-19 13:58</div>
            <div class="timeline-body"><p>I also tried to remove <code>Option</code> as clippy suggested, but failed as well ðŸ˜¢</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-20 07:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-20 07:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-23 08:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:09:37 UTC
    </footer>
</body>
</html>
