<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Show changed files when running under `--check` - astral-sh/ruff #7788</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Show changed files when running under <code>--check</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/7788">#7788</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-10-03 18:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-03 18:19</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>We now list each changed file when running with <code>--check</code>.</p>
<p>Closes https://github.com/astral-sh/ruff/issues/7782.</p>
<h2>Test Plan</h2>
<pre><code>❯ cargo run -p ruff_cli -- format foo.py --check
   Compiling ruff_cli v0.0.292 (/Users/crmarsh/workspace/ruff/crates/ruff_cli)
rgo +    Finished dev [unoptimized + debuginfo] target(s) in 1.41s
     Running `target/debug/ruff format foo.py --check`
warning: `ruff format` is a work-in-progress, subject to change at any time, and intended only for experimentation.
Would reformat: foo.py
1 file would be reformatted
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @charliermarsh on 2023-10-03 18:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @charliermarsh on 2023-10-03 18:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-10-03 18:25</div>
            <div class="timeline-body"><p>What's this look like for multiple files?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-03 18:26</div>
            <div class="timeline-body"><p>It shows one line (like the above) per file:</p>
<pre><code>File is unformatted: bar.py
File is unformatted: foo.py
2 files would be reformatted
</code></pre>
<p>(The filenames are bolded.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-10-03 18:35</div>
            <div class="timeline-body"><p>And we don't mention the files that are correctly formatted? Seems reasonable to me. Should we say &quot;Would reformat: foo.py&quot; instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-10-03 18:39</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>✅ ecosystem check detected no changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-03 18:40</div>
            <div class="timeline-body"><p>Changed!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2023-10-03 18:42</div>
            <div class="timeline-body"><p>LGTM; why the refactor?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-03 18:45</div>
            <div class="timeline-body"><p>Which part? Overall, I needed to store the results with paths so that we could report on individual paths.</p>
<p>The <code>impl&lt;P: AsRef&lt;Path&gt;&gt; From&lt;P&gt;</code> change was necessary to allow passing <code>&amp;path</code> to the <code>SourceKind::from</code> calls rather than <code>path.as_path()</code> -- the <code>.as_path()</code> shouldn't be necessary.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-10-03 18:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-10-03 18:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-10-03 18:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 02:33:16 UTC
    </footer>
</body>
</html>
