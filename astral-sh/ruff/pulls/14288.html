<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8-datetimez`] Usages of `datetime.max`/`datetime.min` (`DTZ901`) - astral-sh/ruff #14288</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8-datetimez</code>] Usages of <code>datetime.max</code>/<code>datetime.min</code> (<code>DTZ901</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/14288">#14288</a>
        opened by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a>
        on 2024-11-12 00:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Resolves #13217.</p>
<h2>Test Plan</h2>
<p><code>cargo nextest run</code> and <code>cargo insta test</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-11-12 00:53</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+13 -0 violations, +0 -0 fixes in 2 projects; 52 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+12 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/airflow/example_dags/example_inlet_event_extra.py#L38'>airflow/example_dags/example_inlet_event_extra.py:38:16:</a> DTZ901 Use of `datetime.datetime.min` without timezone information
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/airflow/example_dags/example_inlet_event_extra.py#L53'>airflow/example_dags/example_inlet_event_extra.py:53:16:</a> DTZ901 Use of `datetime.datetime.min` without timezone information
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/airflow/example_dags/example_outlet_event_extra.py#L39'>airflow/example_dags/example_outlet_event_extra.py:39:16:</a> DTZ901 Use of `datetime.datetime.min` without timezone information
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/airflow/example_dags/example_outlet_event_extra.py#L53'>airflow/example_dags/example_outlet_event_extra.py:53:16:</a> DTZ901 Use of `datetime.datetime.min` without timezone information
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/airflow/example_dags/example_outlet_event_extra.py#L67'>airflow/example_dags/example_outlet_event_extra.py:67:16:</a> DTZ901 Use of `datetime.datetime.min` without timezone information
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/providers/src/airflow/providers/google/cloud/operators/gcs.py#L807'>providers/src/airflow/providers/google/cloud/operators/gcs.py:807:46:</a> DTZ901 Use of `datetime.datetime.max` without timezone information
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/providers/src/airflow/providers/google/cloud/operators/gcs.py#L810'>providers/src/airflow/providers/google/cloud/operators/gcs.py:810:46:</a> DTZ901 Use of `datetime.datetime.max` without timezone information
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/providers/src/airflow/providers/google/cloud/transfers/mysql_to_gcs.py#L129'>providers/src/airflow/providers/google/cloud/transfers/mysql_to_gcs.py:129:26:</a> DTZ901 Use of `datetime.datetime.min` without timezone information
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/tests/cli/commands/test_dag_command.py#L383'>tests/cli/commands/test_dag_command.py:383:37:</a> DTZ901 Use of `datetime.datetime.max` without timezone information
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/tests/dag_processing/test_job_runner.py#L773'>tests/dag_processing/test_job_runner.py:773:53:</a> DTZ901 Use of `datetime.datetime.min` without timezone information
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/tests/dag_processing/test_job_runner.py#L804'>tests/dag_processing/test_job_runner.py:804:53:</a> DTZ901 Use of `datetime.datetime.max` without timezone information
+ <a href='https://github.com/apache/airflow/blob/f924ecb6e3d6e85a83b261cc7adc3a3c05c2b1ee/tests/models/test_dag.py#L2451'>tests/models/test_dag.py:2451:24:</a> DTZ901 Use of `datetime.datetime.min` without timezone information
</pre>

</p>
</details>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/models/daylight.py#L83'>examples/models/daylight.py:83:12:</a> DTZ901 Use of `datetime.datetime.min` without timezone information
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| DTZ901 | 13 | 13 | 0 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/flake8_datetimez/rules/datetime_max_min.rs</code>:92 on 2024-11-12 11:13</div>
            <div class="timeline-body"><p>Instead of panicking in <code>MaxMin::from</code> if <code>attr</code> isn't <code>max</code> or <code>min</code>, change <code>MaxMin::from</code> to return an <code>Option</code> and use it like this</p>
<pre><code class="language-suggestion">    let Some(maxmin) = match qualified_name.segments() {
        [&quot;datetime&quot;, &quot;datetime&quot;, attr] =&gt; MaxMin::from(attr),
        _ =&gt; None,
    } else {
    	return
  	};
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/flake8_datetimez/rules/datetime_max_min.rs</code>:104 on 2024-11-12 11:14</div>
            <div class="timeline-body"><pre><code class="language-suggestion">pub(super) fn followed_by_replace_tzinfo(semantic: &amp;SemanticModel -&gt; bool {
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-11-12 11:17</div>
            <div class="timeline-body"><p>Neat</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-11-12 11:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @MichaReiser on 2024-11-12 11:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-11-12 11:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/codes.rs</code>:709 on 2024-11-12 11:18</div>
            <div class="timeline-body"><p>I assume the reason for using <code>9XX</code> is to make it clear that this isn't an upstream rule?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2024-11-12 12:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>crates/ruff_linter/src/codes.rs</code>:709 on 2024-11-12 12:05</div>
            <div class="timeline-body"><p>Yes, that's correct.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-11-12 20:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-12 20:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-11-12 21:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:07:40 UTC
    </footer>
</body>
</html>
