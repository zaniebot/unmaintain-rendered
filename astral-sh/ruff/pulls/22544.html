<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Pass the generic context through the decorator - astral-sh/ruff #22544</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Pass the generic context through the decorator</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/pull/22544">#22544</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2026-01-13 10:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a></div>
            <div class="timeline-body">Summary
<p>fixes: <a href="https://github.com/astral-sh/ty/issues/2336">astral-sh/ty#2336</a>
fixes: <a href="https://github.com/astral-sh/ty/issues/2382">astral-sh/ty#2382</a></p>
Test Plan


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2026-01-13 10:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2026-01-13 10:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2026-01-13 10:40</div>
            <div class="timeline-body">

<a href="https://github.com/python/typing/blob/9f6d8ced7cd1c8d92687a4e9c96d7716452e471e/conformance/">Typing conformance results</a>
<p>The percentage of diagnostics emitted that were expected errors increased from 69.52% to 69.52%. The percentage of expected errors that received a diagnostic decreased from 58.44% to 58.27%.</p>
Summary
<p>| Metric | Old | New | Diff | Outcome |
|--------|-----|-----|------|---------|
| True Positives  | 675 | 673 | -2 | ⏬ (❌) |
| False Positives | 296 | 295 | -1 | ⏬ (✅) |
| False Negatives | 480 | 482 | +2 | ⏫ (❌) |
| Total Diagnostics | 971 | 968 | -3 | ⏬ |
| Precision | 69.52% | 69.52% | +0.01% | ⏫ (✅) |
| Recall | 58.44% | 58.27% | -0.17% | ⏬ (❌) |</p>
False positives removed


<p>| Location | Name | Message |
|----------|------|---------|
| <a href="https://github.com/python/typing/blob/9f6d8ced7cd1c8d92687a4e9c96d7716452e471e/conformance//tests/constructors_callable.py#L194">constructors_callable.py:194:16</a> | invalid-argument-type | invalid-argument-type: Argument is incorrect: Expected <code>list[T@__init__]</code>, found <code>list[Unknown | str]</code> |</p>


True positives removed


<p>| Location | Name | Message |
|----------|------|---------|
| <a href="https://github.com/python/typing/blob/9f6d8ced7cd1c8d92687a4e9c96d7716452e471e/conformance//tests/constructors_callable.py#L184">constructors_callable.py:184:4</a> | invalid-argument-type | invalid-argument-type: Argument is incorrect: Expected <code>list[T@Class8]</code>, found <code>list[Unknown | int]</code> |
| <a href="https://github.com/python/typing/blob/9f6d8ced7cd1c8d92687a4e9c96d7716452e471e/conformance//tests/constructors_callable.py#L195">constructors_callable.py:195:4</a> | invalid-argument-type | invalid-argument-type: Argument is incorrect: Expected <code>list[T@__init__]</code>, found <code>list[Unknown | int]</code> |</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2026-01-13 10:41</div>
            <div class="timeline-body">

<code>mypy_primer</code> results

Changes were detected when running on open source projects

<pre><code>anyio (https://github.com/agronholm/anyio)
- src/anyio/_backends/_asyncio.py:2542:13: error[invalid-argument-type] Argument to bound method `run` is incorrect: Expected `Coroutine[Any, Any, _T@run_coroutine_threadsafe]`, found `CoroutineType[Any, Any, T_Retval@run_async_from_thread]`
- Found 92 diagnostics
+ Found 91 diagnostics

async-utils (https://github.com/mikeshardmind/async-utils)
- src/async_utils/gen_transform.py:109:36: error[invalid-argument-type] Argument to function `to_thread` is incorrect: Expected `Queue[Y@_consumer]`, found `Queue[Y@_sync_to_async_gen]`
- src/async_utils/gen_transform.py:109:54: error[invalid-argument-type] Argument to function `to_thread` is incorrect: Expected `(**P@_consumer) -&gt; Generator[Y@_consumer, None, None]`, found `(**P@_sync_to_async_gen) -&gt; Generator[Y@_sync_to_async_gen, None, None]`
- src/async_utils/gen_transform.py:109:66: error[invalid-argument-type] Argument to function `to_thread` is incorrect: Expected `P@_consumer.args`, found `P@_sync_to_async_gen.args`
- src/async_utils/gen_transform.py:109:69: error[invalid-argument-type] Argument to function `to_thread` is incorrect: Expected `P@_consumer.kwargs`, found `P@_sync_to_async_gen.kwargs`
- Found 12 diagnostics
+ Found 8 diagnostics

asynq (https://github.com/quora/asynq)
- asynq/tests/test_tools.py:72:39: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@afilter]`, found `list[Unknown | None | int]`
- asynq/tests/test_tools.py:74:34: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@afilter]`, found `list[Unknown | None | int]`
- asynq/tests/test_tools.py:82:53: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@afilterfalse]`, found `list[Unknown | None | int]`
- asynq/tests/test_tools.py:90:53: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@asift]`, found `list[Unknown | None | int]`
- asynq/tests/test_tools.py:95:45: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amap]`, found `list[Unknown | None]`
- asynq/tests/test_tools.py:96:44: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amap]`, found `list[Unknown | int]`
- asynq/tests/test_tools.py:98:58: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amap]`, found `list[Unknown | None | str]`
- asynq/tests/test_tools.py:103:31: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@asorted]`, found `list[Unknown | None]`
- asynq/tests/test_tools.py:104:37: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@asorted]`, found `list[Unknown | bool | None]`
- asynq/tests/test_tools.py:105:31: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@asorted]`, found `list[Unknown | int]`
- asynq/tests/test_tools.py:109:23: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amax]`, found `Literal[1]`
+ asynq/tests/test_tools.py:109:23: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[Unknown]`, found `Literal[1]`
- asynq/tests/test_tools.py:110:23: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amax]`, found `list[Unknown | int | None]`
- asynq/tests/test_tools.py:111:23: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amax]`, found `GeneratorType[Literal[1] | None, None, None]`
- asynq/tests/test_tools.py:112:31: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amax]`, found `list[Unknown | int]`
- asynq/tests/test_tools.py:113:31: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amax]`, found `list[Unknown | list[Unknown | int]]`
- asynq/tests/test_tools.py:115:23: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amax]`, found `Literal[1]`
+ asynq/tests/test_tools.py:115:23: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[Unknown]`, found `Literal[1]`
- asynq/tests/test_tools.py:126:26: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amin]`, found `Literal[1]`
+ asynq/tests/test_tools.py:126:26: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[Unknown]`, found `Literal[1]`
- asynq/tests/test_tools.py:127:26: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amin]`, found `list[Unknown | int | None]`
- asynq/tests/test_tools.py:128:26: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amin]`, found `GeneratorType[Literal[1] | None, None, None]`
- asynq/tests/test_tools.py:129:25: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amin]`, found `list[Unknown | int]`
- asynq/tests/test_tools.py:129:30: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `((_T@amin, /) -&gt; Any) | None`, found `list[Unknown | int]`
+ asynq/tests/test_tools.py:129:30: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `((int, /) -&gt; Any) | None`, found `list[Unknown | int]`
- asynq/tests/test_tools.py:130:25: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amin]`, found `list[Unknown | list[Unknown | int]]`
- asynq/tests/test_tools.py:132:23: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amin]`, found `Literal[1]`
+ asynq/tests/test_tools.py:132:23: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[Unknown]`, found `Literal[1]`
- asynq/tests/test_tools.py:132:26: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `((_T@amin, /) -&gt; Any) | None`, found `Literal[2]`
+ asynq/tests/test_tools.py:132:26: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `((Unknown, /) -&gt; Any) | None`, found `Literal[2]`
- asynq/tests/test_typing.py:41:43: error[invalid-argument-type] Argument to bound method `asyncio` is incorrect: Expected `_T@generic`, found `str`
- asynq/tests/test_typing.py:54:16: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `((...) -&gt; _T@async_call) | ((...) -&gt; FutureBase[_T@async_call])`, found `def f(x: int) -&gt; str`
- asynq/tests/test_typing.py:56:20: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `((...) -&gt; _T@async_call) | ((...) -&gt; FutureBase[_T@async_call])`, found `def f(x: int) -&gt; str`
- asynq/tests/test_typing.py:61:26: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amax]`, found `Literal[1]`
+ asynq/tests/test_typing.py:61:26: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[Sized]`, found `Literal[1]`
- asynq/tests/test_typing.py:61:32: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `((_T@amax, /) -&gt; Any) | None`, found `def len(obj: Sized, /) -&gt; int`
- asynq/tests/test_typing.py:62:26: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `Iterable[_T@amax]`, found `list[Unknown | int]`
- asynq/tests/test_typing.py:62:34: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `((_T@amax, /) -&gt; Any) | None`, found `def len(obj: Sized, /) -&gt; int`
+ asynq/tests/test_typing.py:62:34: error[invalid-argument-type] Argument to bound method `__call__` is incorrect: Expected `((Unknown | int | Sized, /) -&gt; Any) | None`, found `def len(obj: Sized, /) -&gt; int`
- Found 217 diagnostics
+ Found 194 diagnostics

dulwich (https://github.com/dulwich/dulwich)
- dulwich/porcelain/__init__.py:643:16: error[invalid-return-type] Return type does not match returned value: expected `AbstractContextManager[T@open_repo | Repo, bool | None]`, found `_GeneratorContextManager[T@_noop_context_manager, None, None]`
+ dulwich/porcelain/__init__.py:643:16: error[invalid-return-type] Return type does not match returned value: expected `AbstractContextManager[T@open_repo | Repo, bool | None]`, found `_GeneratorContextManager[(str &amp; BaseRepo) | (PathLike[str] &amp; BaseRepo) | T@open_repo, None, None]`
- dulwich/porcelain/__init__.py:643:38: error[invalid-argument-type] Argument is incorrect: Expected `T@_noop_context_manager`, found `(str &amp; BaseRepo) | (PathLike[str] &amp; BaseRepo) | T@open_repo`
- dulwich/porcelain/__init__.py:697:16: error[invalid-return-type] Return type does not match returned value: expected `AbstractContextManager[T@open_repo_closing | Repo, bool | None]`, found `_GeneratorContextManager[T@_noop_context_manager, None, None]`
+ dulwich/porcelain/__init__.py:697:16: error[invalid-return-type] Return type does not match returned value: expected `AbstractContextManager[T@open_repo_closing | Repo, bool | None]`, found `_GeneratorContextManager[(str &amp; BaseRepo) | (bytes &amp; BaseRepo) | (PathLike[str] &amp; BaseRepo) | T@open_repo_closing, None, None]`
- dulwich/porcelain/__init__.py:697:38: error[invalid-argument-type] Argument is incorrect: Expected `T@_noop_context_manager`, found `(str &amp; BaseRepo) | (bytes &amp; BaseRepo) | (PathLike[str] &amp; BaseRepo) | T@open_repo_closing`
- Found 231 diagnostics
+ Found 229 diagnostics

tornado (https://github.com/tornadoweb/tornado)
- tornado/gen.py:239:45: error[invalid-argument-type] Argument to bound method `run` is incorrect: Expected `Overload[(i: SupportsNext[_T@next], /) -&gt; Unknown, (i: SupportsNext[_T@next], default: _VT@next, /) -&gt; Unknown]`, found `(Generator[Any, Any, _T@coroutine] &amp; Generator[object, None, None]) | (_T@coroutine &amp; Generator[object, None, None])`
+ tornado/gen.py:239:45: error[invalid-argument-type] Argument to bound method `run` is incorrect: Expected `Overload[[_T](i: SupportsNext[_T], /) -&gt; Unknown, [_T, _VT](i: SupportsNext[_T], default: _VT, /) -&gt; Unknown]`, found `(Generator[Any, Any, _T@coroutine] &amp; Generator[object, None, None]) | (_T@coroutine &amp; Generator[object, None, None])`

pydantic (https://github.com/pydantic/pydantic)
- pydantic/fields.py:943:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, Divergent] | ((dict[str, Divergent], /) -&gt; None) | None`
+ pydantic/fields.py:943:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, int | float | str | ... omitted 3 union elements] | ((dict[str, int | float | str | ... omitted 3 union elements], /) -&gt; None) | None`
- pydantic/fields.py:983:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, Divergent] | ((dict[str, Divergent], /) -&gt; None) | None`
+ pydantic/fields.py:983:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, int | float | str | ... omitted 3 union elements] | ((dict[str, int | float | str | ... omitted 3 union elements], /) -&gt; None) | None`
- pydantic/fields.py:1026:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, Divergent] | ((dict[str, Divergent], /) -&gt; None) | None`
+ pydantic/fields.py:1026:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, int | float | str | ... omitted 3 union elements] | ((dict[str, int | float | str | ... omitted 3 union elements], /) -&gt; None) | None`
- pydantic/fields.py:1066:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, Divergent] | ((dict[str, Divergent], /) -&gt; None) | None`
+ pydantic/fields.py:1066:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, int | float | str | ... omitted 3 union elements] | ((dict[str, int | float | str | ... omitted 3 union elements], /) -&gt; None) | None`
- pydantic/fields.py:1109:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, Divergent] | ((dict[str, Divergent], /) -&gt; None) | None`
+ pydantic/fields.py:1109:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, int | float | str | ... omitted 3 union elements] | ((dict[str, int | float | str | ... omitted 3 union elements], /) -&gt; None) | None`
- pydantic/fields.py:1148:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, Divergent] | ((dict[str, Divergent], /) -&gt; None) | None`
+ pydantic/fields.py:1148:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, int | float | str | ... omitted 3 union elements] | ((dict[str, int | float | str | ... omitted 3 union elements], /) -&gt; None) | None`
- pydantic/fields.py:1188:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, Divergent] | ((dict[str, Divergent], /) -&gt; None) | None`
+ pydantic/fields.py:1188:5: error[invalid-parameter-default] Default value of type `PydanticUndefinedType` is not assignable to annotated parameter type `dict[str, int | float | str | ... omitted 3 union elements] | ((dict[str, int | float | str | ... omitted 3 union elements], /) -&gt; None) | None`
- pydantic/fields.py:1567:13: error[invalid-argument-type] Argument is incorrect: Expected `dict[str, Divergent] | ((dict[str, Divergent], /) -&gt; None) | None`, found `Top[dict[Unknown, Unknown]] | (((dict[str, Divergent], /) -&gt; None) &amp; ~Top[dict[Unknown, Unknown]]) | None`
+ pydantic/fields.py:1567:13: error[invalid-argument-type] Argument is incorrect: Expected `dict[str, int | float | str | ... omitted 3 union elements] | ((dict[str, int | float | str | ... omitted 3 union elements], /) -&gt; None) | None`, found `Top[dict[Unknown, Unknown]] | (((dict[str, int | float | str | ... omitted 3 union elements], /) -&gt; None) &amp; ~Top[dict[Unknown, Unknown]]) | None`

mypy (https://github.com/python/mypy)
- mypy/subtypes.py:187:26: error[invalid-argument-type] Argument is incorrect: Expected `list[tuple[T@pop_on_exit, T@pop_on_exit]]`, found `list[tuple[Type, Type]]`
- mypy/subtypes.py:187:71: error[invalid-argument-type] Argument is incorrect: Expected `T@pop_on_exit`, found `Type`
- mypy/subtypes.py:187:77: error[invalid-argument-type] Argument is incorrect: Expected `T@pop_on_exit`, found `Type`
- mypy/subtypes.py:226:26: error[invalid-argument-type] Argument is incorrect: Expected `list[tuple[T@pop_on_exit, T@pop_on_exit]]`, found `list[tuple[Type, Type]]`
- mypy/subtypes.py:226:70: error[invalid-argument-type] Argument is incorrect: Expected `T@pop_on_exit`, found `Type`
- mypy/subtypes.py:226:76: error[invalid-argument-type] Argument is incorrect: Expected `T@pop_on_exit`, found `Type`
- mypy/subtypes.py:1212:22: error[invalid-argument-type] Argument is incorrect: Expected `list[tuple[T@pop_on_exit, T@pop_on_exit]]`, found `Unknown | list[tuple[Instance, Instance]]`
- mypy/subtypes.py:1212:32: error[invalid-argument-type] Argument is incorrect: Expected `T@pop_on_exit`, found `Instance`
- mypy/subtypes.py:1212:38: error[invalid-argument-type] Argument is incorrect: Expected `T@pop_on_exit`, found `Instance`
- Found 1740 diagnostics
+ Found 1731 diagnostics

discord.py (https://github.com/Rapptz/discord.py)
- discord/ext/commands/core.py:683:35: error[invalid-argument-type] Argument is incorrect: Expected `Context[BotT@cog_command_error]`, found `Context[BotT@dispatch_error]`
- discord/ext/commands/core.py:1314:63: error[invalid-argument-type] Argument to function `maybe_coroutine` is incorrect: Expected `Context[BotT@cog_check]`, found `Context[BotT@can_run]`
- discord/ext/commands/hybrid.py:430:45: error[invalid-argument-type] Argument to function `maybe_coroutine` is incorrect: Expected `Interaction[ClientT@interaction_check]`, found `Interaction[Client]`
- Found 551 diagnostics
+ Found 548 diagnostics

trio (https://github.com/python-trio/trio)
- src/trio/_core/_tests/test_run.py:2444:27: error[invalid-argument-type] Argument is incorrect: Expected `T@async_yield`, found `object`
- src/trio/_core/_tests/test_run.py:2502:27: error[invalid-argument-type] Argument is incorrect: Expected `T@async_yield`, found `Literal[1]`
- src/trio/_core/_tests/test_run.py:2503:27: error[invalid-argument-type] Argument is incorrect: Expected `T@async_yield`, found `Literal[2]`
- src/trio/_tests/test_highlevel_open_unix_stream.py:28:25: error[invalid-argument-type] Argument is incorrect: Expected `CloseT@close_on_error`, found `CloseMe`
- src/trio/_tests/test_highlevel_open_unix_stream.py:33:29: error[invalid-argument-type] Argument is incorrect: Expected `CloseT@close_on_error`, found `CloseMe`
- Found 489 diagnostics
+ Found 484 diagnostics

prefect (https://github.com/PrefectHQ/prefect)
- src/integrations/prefect-dbt/prefect_dbt/core/settings.py:94:28: error[invalid-assignment] Object of type `T@resolve_block_document_references | dict[str, Any]` is not assignable to `dict[str, Any]`
- src/integrations/prefect-dbt/prefect_dbt/core/settings.py:96:21: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_block_document_references`, found `dict[str, Any] | @Todo`
- src/integrations/prefect-dbt/prefect_dbt/core/settings.py:99:28: error[invalid-assignment] Object of type `T@resolve_variables | dict[str, Any]` is not assignable to `dict[str, Any]`
- src/integrations/prefect-dbt/prefect_dbt/core/settings.py:99:63: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `dict[str, Any]`
- src/prefect/_internal/concurrency/calls.py:341:41: error[invalid-argument-type] Argument to bound method `run` is incorrect: Expected `Generator[Any, None, _T@create_task] | Coroutine[Any, Any, _T@create_task]`, found `CoroutineType[Any, Any, None]`
- src/prefect/_internal/concurrency/calls.py:355:41: error[invalid-argument-type] Argument to bound method `run` is incorrect: Expected `Coroutine[Any, Any, _T@run]`, found `CoroutineType[Any, Any, None]`
- src/prefect/automations.py:235:5: error[invalid-argument-type] Argument is incorrect: Expected `Overload[(cls, id: UUID, name: str | None = ...) -&gt; Self@aread | Self@aread, (cls, id: None = None, name: str = ...) -&gt; Self@aread | Self@aread]`, found `Overload[[Self](cls, id: UUID, name: str | None = ...) -&gt; CoroutineType[Any, Any, Self], [Self](cls, id: None = None, name: str = ...) -&gt; CoroutineType[Any, Any, Self]]`
+ src/prefect/automations.py:235:5: error[invalid-argument-type] Argument is incorrect: Expected `Overload[[Self](cls, id: UUID, name: str | None = ...) -&gt; Self | Self@aread, [Self](cls, id: None = None, name: str = ...) -&gt; Self@aread | Self]`, found `Overload[[Self](cls, id: UUID, name: str | None = ...) -&gt; CoroutineType[Any, Any, Self], [Self](cls, id: None = None, name: str = ...) -&gt; CoroutineType[Any, Any, Self]]`
- src/prefect/cli/deploy/_core.py:86:21: error[invalid-assignment] Object of type `T@resolve_block_document_references | dict[str, Any]` is not assignable to `dict[str, Any]`
- src/prefect/cli/deploy/_core.py:86:61: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_block_document_references`, found `dict[str, Any]`
- src/prefect/cli/deploy/_core.py:87:21: error[invalid-assignment] Object of type `T@resolve_variables` is not assignable to `dict[str, Any]`
- src/prefect/cli/deploy/_core.py:87:45: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `dict[str, Any]`
- src/prefect/deployments/steps/core.py:136:54: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_block_document_references`, found `dict[Any, Any]`
- src/prefect/deployments/steps/core.py:137:38: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `T@resolve_block_document_references | dict[str, Any]`
- src/prefect/task_engine.py:777:25: error[invalid-argument-type] Argument is incorrect: Expected `Task[P@update_for_task, R@update_for_task]`, found `Task[P@SyncTaskRunEngine, R@SyncTaskRunEngine] | Task[P@SyncTaskRunEngine, Coroutine[Any, Any, R@SyncTaskRunEngine]]`
- src/prefect/task_engine.py:1383:25: error[invalid-argument-type] Argument is incorrect: Expected `Task[P@update_for_task, R@update_for_task]`, found `Task[P@AsyncTaskRunEngine, R@AsyncTaskRunEngine] | Task[P@AsyncTaskRunEngine, Coroutine[Any, Any, R@AsyncTaskRunEngine]]`
- src/prefect/task_runners.py:398:17: error[invalid-argument-type] Argument to bound method `submit` is incorrect: Expected `(**_P@run) -&gt; _T@run`, found `def run[_T](main: Coroutine[Any, Any, _T], *, debug: bool | None = None) -&gt; _T`
- src/prefect/task_runners.py:399:17: error[invalid-argument-type] Argument to bound method `submit` is incorrect: Expected `_P@run.args`, found `CoroutineType[Any, Any, Unknown | State[Any] | None]`
- src/prefect/task_runners.py:404:17: error[invalid-argument-type] Argument to bound method `submit` is incorrect: Expected `(**_P@run) -&gt; _T@run`, found `def run_task_sync[**P, R](task: Task[P, R], task_run_id: UUID | None = None, task_run: TaskRun | None = None, parameters: dict[str, Any] | None = None, wait_for: PrefectFuture[Any] | Any | Iterable[PrefectFuture[Any] | Any] | None = None, return_type: Literal[&quot;state&quot;, &quot;result&quot;] = &quot;result&quot;, dependencies: dict[str, set[RunInput]] | None = None, context: dict[str, Any] | None = None) -&gt; R | State[Any] | None`
- src/prefect/task_runners.py:803:13: error[invalid-argument-type] Argument to bound method `submit` is incorrect: Expected `Task[P@_resolve_futures_and_submit, R@_resolve_futures_and_submit | CoroutineType[Any, Any, R@_resolve_futures_and_submit]]`, found `Task[P@submit, R@submit | CoroutineType[Any, Any, R@submit]]`
- src/prefect/task_worker.py:370:17: error[invalid-argument-type] Argument to bound method `submit` is incorrect: Expected `(**_P@run) -&gt; _T@run`, found `def run_task_sync[**P, R](task: Task[P, R], task_run_id: UUID | None = None, task_run: TaskRun | None = None, parameters: dict[str, Any] | None = None, wait_for: PrefectFuture[Any] | Any | Iterable[PrefectFuture[Any] | Any] | None = None, return_type: Literal[&quot;state&quot;, &quot;result&quot;] = &quot;result&quot;, dependencies: dict[str, set[RunInput]] | None = None, context: dict[str, Any] | None = None) -&gt; R | State[Any] | None`
- src/prefect/task_worker.py:372:17: error[invalid-argument-type] Argument to bound method `submit` is incorrect: Expected `_P@run.kwargs`, found `UUID`
- src/prefect/task_worker.py:373:17: error[invalid-argument-type] Argument to bound method `submit` is incorrect: Expected `_P@run.kwargs`, found `TaskRun`
- src/prefect/task_worker.py:374:17: error[invalid-argument-type] Argument to bound method `submit` is incorrect: Expected `_P@run.kwargs`, found `dict[Unknown, Unknown] | Any`
- src/prefect/task_worker.py:375:17: error[invalid-argument-type] Argument to bound method `submit` is incorrect: Expected `_P@run.kwargs`, found `list[Unknown] | Any`
- src/prefect/task_worker.py:376:17: error[invalid-argument-type] Argument to bound method `submit` is incorrect: Expected `_P@run.kwargs`, found `Literal[&quot;state&quot;]`
- src/prefect/task_worker.py:377:17: error[invalid-argument-type] Argument to bound method `submit` is incorrect: Expected `_P@run.kwargs`, found `None | Any`
- src/prefect/tasks.py:922:35: error[invalid-argument-type] Argument is incorrect: Expected `Task[P@update_for_task, R@update_for_task]`, found `Self@create_run`
- src/prefect/tasks.py:1027:35: error[invalid-argument-type] Argument is incorrect: Expected `Task[P@update_for_task, R@update_for_task]`, found `Self@create_local_run`
- src/prefect/tasks.py:1822:21: error[invalid-argument-type] Argument is incorrect: Expected `Task[P@serve, R@serve]`, found `Self@serve`
- src/prefect/tasks.py:1822:21: error[invalid-argument-type] Argument is incorrect: Expected `Task[P@serve, R@serve]`, found `Self@serve`
- src/prefect/utilities/templating.py:318:17: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_block_document_references`, found `object`
+ src/prefect/utilities/templating.py:318:17: error[invalid-argument-type] Argument is incorrect: Argument type `object` does not satisfy constraints (`str`, `int`, `int | float`, `bool`, `dict[Any, Any]`, `list[Any]`, `None`) of type variable `T`
- src/prefect/utilities/templating.py:320:13: error[invalid-assignment] Invalid subscript assignment with key of type `object` and value of type `T@resolve_block_document_references | dict[str, Any]` on object of type `dict[str, Any]`
+ src/prefect/utilities/templating.py:320:13: error[invalid-assignment] Invalid subscript assignment with key of type `object` and value of type `Unknown | dict[str, Any]` on object of type `dict[str, Any]`
- src/prefect/utilities/templating.py:323:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_block_document_references | dict[str, Any]`, found `list[T@resolve_block_document_references | dict[str, Any] | Unknown]`
+ src/prefect/utilities/templating.py:323:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_block_document_references | dict[str, Any]`, found `list[Unknown | dict[str, Any]]`
- src/prefect/utilities/templating.py:325:17: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_block_document_references`, found `object`
+ src/prefect/utilities/templating.py:325:17: error[invalid-argument-type] Argument is incorrect: Argument type `object` does not satisfy constraints (`str`, `int`, `int | float`, `bool`, `dict[Any, Any]`, `list[Any]`, `None`) of type variable `T`
- src/prefect/utilities/templating.py:437:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `dict[object, T@resolve_variables | Unknown]`
+ src/prefect/utilities/templating.py:437:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `dict[object, Unknown]`
- src/prefect/utilities/templating.py:438:42: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `object`
+ src/prefect/utilities/templating.py:438:42: error[invalid-argument-type] Argument is incorrect: Argument type `object` does not satisfy constraints (`str`, `int`, `int | float`, `bool`, `dict[Any, Any]`, `list[Any]`, `None`) of type variable `T`
- src/prefect/utilities/templating.py:442:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `list[T@resolve_variables | Unknown]`
+ src/prefect/utilities/templating.py:442:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `list[Unknown]`
- src/prefect/utilities/templating.py:442:41: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `object`
+ src/prefect/utilities/templating.py:442:41: error[invalid-argument-type] Argument is incorrect: Argument type `object` does not satisfy constraints (`str`, `int`, `int | float`, `bool`, `dict[Any, Any]`, `list[Any]`, `None`) of type variable `T`
+ src/prefect/workers/base.py:232:13: error[invalid-argument-type] Argument is incorrect: Argument type `str | dict[str, Any]` does not satisfy constraints (`str`, `int`, `int | float`, `bool`, `dict[Any, Any]`, `list[Any]`, `None`) of type variable `T`
- src/prefect/workers/base.py:232:13: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `T@resolve_block_document_references | dict[str, Any]`
- src/prefect/workers/base.py:234:20: error[invalid-argument-type] Argument expression after ** must be a mapping type: Found `T@resolve_variables`
- Found 5411 diagnostics
+ Found 5381 diagnostics

pwndbg (https://github.com/pwndbg/pwndbg)
- pwndbg/dbg_mod/gdb/__init__.py:181:28: error[invalid-argument-type] Argument is incorrect: Expected `T@selection`, found `Unknown | Frame`
- pwndbg/dbg_mod/gdb/__init__.py:200:24: error[invalid-argument-type] Argument is incorrect: Expected `T@selection`, found `Unknown | Frame`
- pwndbg/dbg_mod/gdb/__init__.py:232:24: error[invalid-argument-type] Argument is incorrect: Expected `T@selection`, found `Unknown | Frame`
- pwndbg/dbg_mod/gdb/__init__.py:398:24: error[invalid-argument-type] Argument is incorrect: Expected `T@selection`, found `Unknown | InferiorThread`
- Found 2040 diagnostics
+ Found 2036 diagnostics

static-frame (https://github.com/static-frame/static-frame)
- static_frame/core/bus.py:675:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemILocReduces[Bus[Any], object_]`, found `InterGetItemILocReduces[Self@iloc | Bus[Any], object_ | Self@iloc]`
+ static_frame/core/bus.py:671:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemLocReduces[Bus[Any], object_]`, found `InterGetItemLocReduces[Bus[Any] | Bottom[Series[Any, Any]] | ndarray[Never, Never] | ... omitted 6 union elements, object_]`
+ static_frame/core/bus.py:675:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemILocReduces[Bus[Any], object_]`, found `InterGetItemILocReduces[Bus[Any] | ndarray[Never, Never] | TypeBlocks | ... omitted 6 union elements, object_ | Self@iloc]`
- static_frame/core/index.py:580:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemLocReduces[TVContainer_co@loc, TVDtype@Index]`, found `InterGetItemLocReduces[Any | Bottom[Series[Any, Any]], TVDtype@Index]`
+ static_frame/core/index.py:580:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemLocReduces[TVContainer_co@loc, TVDtype@Index]`, found `InterGetItemLocReduces[Bottom[Series[Any, Any]] | Any, TVDtype@Index]`
+ static_frame/core/series.py:772:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemILocReduces[Series[Any, Any], TVDtype@Series]`, found `InterGetItemILocReduces[Series[Any, Any] | Bottom[Index[Any]] | TypeBlocks | ... omitted 6 union elements, TVDtype@Series]`
+ static_frame/core/series.py:4072:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemILocReduces[SeriesHE[Any, Any], TVDtype@SeriesHE]`, found `InterGetItemILocReduces[Bottom[Series[Any, Any]] | ndarray[Never, Never] | TypeBlocks | ... omitted 7 union elements, TVDtype@SeriesHE]`
+ static_frame/core/yarn.py:418:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemILocReduces[Yarn[Any], object_]`, found `InterGetItemILocReduces[Yarn[Any] | ndarray[Never, Never] | TypeBlocks | ... omitted 6 union elements, object_]`
- Found 1821 diagnostics
+ Found 1825 diagnostics

zulip (https://github.com/zulip/zulip)
- zerver/data_import/slack.py:1794:13: error[invalid-argument-type] Argument to function `convert_slack_workspace_messages` is incorrect: Expected `(UploadFileRequest, /) -&gt; None`, found `(ParallelRecordType@run_parallel_queue, /) -&gt; None`
- zerver/lib/export.py:2288:9: error[invalid-argument-type] Argument is incorrect: Expected `(ParallelRecordType@run_parallel_queue, /) -&gt; None`, found `def _save_s3_key_to_file(key_name: str) -&gt; None`
- zerver/lib/export.py:2299:65: error[invalid-argument-type] Argument to function `iterate_attachments` is incorrect: Expected `(str, /) -&gt; Any`, found `(ParallelRecordType@run_parallel_queue, /) -&gt; None`
- zerver/lib/parallel.py:54:9: error[invalid-argument-type] Argument is incorrect: Expected `(ParallelRecordType@run_parallel_queue, /) -&gt; None`, found `(ParallelRecordType@run_parallel, /) -&gt; None`
- zerver/lib/parallel.py:63:20: error[invalid-argument-type] Argument is incorrect: Expected `ParallelRecordType@run_parallel_queue`, found `ParallelRecordType@run_parallel`
- zerver/tests/test_parallel.py:135:21: error[invalid-argument-type] Argument is incorrect: Expected `ParallelRecordType@run_parallel_queue`, found `Literal[100]`
- zerver/tests/test_parallel.py:143:21: error[invalid-argument-type] Argument is incorrect: Expected `ParallelRecordType@run_parallel_queue`, found `Literal[101]`
- zerver/tests/test_parallel.py:144:21: error[invalid-argument-type] Argument is incorrect: Expected `ParallelRecordType@run_parallel_queue`, found `Literal[102]`
- Found 3675 diagnostics
+ Found 3667 diagnostics

rotki (https://github.com/rotki/rotki)
+ rotkehlchen/chain/decoding/tools.py:96:44: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- rotkehlchen/chain/decoding/tools.py:97:13: error[invalid-argument-type] Argument to function `decode_transfer_direction` is incorrect: Expected `BTCAddress | ChecksumAddress | SubstrateAddress | SolanaAddress`, found `A@BaseDecoderTools`
+ rotkehlchen/chain/decoding/tools.py:99:13: error[invalid-argument-type] Argument to function `decode_transfer_direction` is incorrect: Expected `Sequence[A@BaseDecoderTools]`, found `Unknown | tuple[BTCAddress, ...] | tuple[ChecksumAddress, ...] | tuple[SubstrateAddress, ...] | tuple[SolanaAddress, ...]`
- rotkehlchen/chain/decoding/tools.py:98:13: error[invalid-argument-type] Argument to function `decode_transfer_direction` is incorrect: Expected `BTCAddress | ChecksumAddress | SubstrateAddress | SolanaAddress | None`, found `A@BaseDecoderTools | None`
+ rotkehlchen/chain/decoding/tools.py:100:62: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- Found 2054 diagnostics
+ Found 2055 diagnostics

core (https://github.com/home-assistant/core)
- homeassistant/util/variance.py:47:12: error[invalid-return-type] Return type does not match returned value: expected `(**_P@ignore_variance) -&gt; _R@ignore_variance`, found `_Wrapped[_P@ignore_variance, _R@ignore_variance | int | float | datetime, _P@ignore_variance, _R@ignore_variance | int | float | datetime]`
- Found 14509 diagnostics
+ Found 14508 diagnostics


</code></pre>


<p>No memory usage changes detected ✅</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:22:58 UTC
    </footer>
</body>
</html>
