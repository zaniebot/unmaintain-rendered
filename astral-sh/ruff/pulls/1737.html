<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remove redundant __name__ == &quot;__main__&quot; - astral-sh/ruff #1737</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Remove redundant <strong>name</strong> == &quot;<strong>main</strong>&quot;</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1737">#1737</a>
        opened by <a href="https://github.com/mgeier">@mgeier</a>
        on 2023-01-08 11:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/mgeier">@mgeier</a> on 2023-01-08 11:08</div>
            <div class="timeline-body"><p>The name of the module is <code>__main__</code> anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andersk">@andersk</a> on 2023-01-08 11:14</div>
            <div class="timeline-body"><p>No, itâ€™s <code>ruff.__main__</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mgeier">@mgeier</a> on 2023-01-08 12:16</div>
            <div class="timeline-body"><p>OK, fair enough.</p>
<p>I'd argue that it should still be removed because it is confusing, and nobody in their right mind will <code>import ruff.__main__</code> anyway.</p>
<p>I consider using <code>if __name__ == &quot;__main__&quot;</code> in <code>__main__.py</code> an antipattern, I'm wondering if there's a lint against that ...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Jackenmen">@Jackenmen</a> on 2023-01-08 12:34</div>
            <div class="timeline-body"><blockquote>
<p>I consider using if <strong>name</strong> == &quot;<strong>main</strong>&quot; in <strong>main</strong>.py an antipattern</p>
</blockquote>
<p>I think it can be helpful if you ever want to play with anything you defined in it in REPL and don't want to start the whole application in the process. It doesn't apply to the case here (<code>ruff.__main__</code> doesn't define anything) but in general, I don't think it's an antipattern.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mgeier">@mgeier</a> on 2023-01-08 12:54</div>
            <div class="timeline-body"><p>I'm only talking about <code>__main__.py</code>, I'm not talking about any old <code>*.py</code> file.</p>
<p>I consider it an antipattern in <code>__main__.py</code>, as I said. I'm not making any statement about files with different names and this PR doesn't suggest changes to any other files.</p>
<blockquote>
<p><code>ruff.__main__</code> doesn't define anything</p>
</blockquote>
<p>Exactly, and it shouldn't. No <code>__main__.py</code> ever should.</p>
<p>If it would define something, this would IMHO also be an antipattern.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-08 21:07</div>
            <div class="timeline-body"><p>I appreciate the argument, but I'm gonna leave this as-is. I don't think it's causing any harm, and it's a fairly <a href="https://cs.github.com/?scopeName=All+repos&amp;scope=&amp;q=path%3A__main__.py+if+__name__+%3D%3D+%22__main__%22">common pattern</a>. Here it is in <a href="https://github.com/python/cpython/blob/9a68ff12c3e647a4f8dd935919ae296593770a6b/Tools/peg_generator/pegen/__main__.py#L184">CPython</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-08 21:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 05:38:34 UTC
    </footer>
</body>
</html>
