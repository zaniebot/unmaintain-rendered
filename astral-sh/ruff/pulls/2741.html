<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pandas-vet`] autofixes for PD003, PD004, PD008, PD009 and PD011 - astral-sh/ruff #2741</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pandas-vet</code>] autofixes for PD003, PD004, PD008, PD009 and PD011</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/2741">#2741</a>
        opened by <a href="https://github.com/sbrugman">@sbrugman</a>
        on 2023-02-10 21:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sbrugman">@sbrugman</a></div>
            <div class="timeline-body"><p>Autofixes for PD003, PD004, PD008, PD009 and PD011</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/spaceone">@spaceone</a> on <code>src/rules/pandas_vet/rules/check_attr.rs</code>:117 on 2023-02-10 21:07</div>
            <div class="timeline-body"><p>I consider this fix dangerous as there is no check if <code>.values</code> is actually a pandas object.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/spaceone">@spaceone</a> reviewed on 2023-02-10 21:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sbrugman">@sbrugman</a> on <code>src/rules/pandas_vet/rules/check_attr.rs</code>:117 on 2023-02-10 21:12</div>
            <div class="timeline-body"><p>The fix is only applied when the use-of-dot-values is detected. (If it&#x27;s not, then the rule logic should be updated, not that of the fix)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sbrugman">@sbrugman</a> reviewed on 2023-02-10 21:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-02-10 21:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/spaceone">@spaceone</a> reviewed on 2023-02-10 22:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/spaceone">@spaceone</a> on <code>src/rules/pandas_vet/rules/check_attr.rs</code>:117 on 2023-02-10 22:07</div>
            <div class="timeline-body"><p>yes, and <code>use-of-dot-values</code> detects every <code>.values</code> access instead of only pandas related ones: #2229</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sbrugman">@sbrugman</a> reviewed on 2023-02-10 22:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sbrugman">@sbrugman</a> on <code>src/rules/pandas_vet/rules/check_attr.rs</code>:117 on 2023-02-10 22:09</div>
            <div class="timeline-body"><p>Yeah, thats partially limitation of not having type information. We could try to make the detection more conservative, but if the user enables it consciously, and the detection is correct, then the fix is in principle correct.. I think.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/spaceone">@spaceone</a> on <code>src/rules/pandas_vet/rules/check_attr.rs</code>:117 on 2023-02-10 22:12</div>
            <div class="timeline-body"><p>yes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/spaceone">@spaceone</a> reviewed on 2023-02-10 22:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;autofixes for pandas-vet&quot; to &quot;[`pandas-vet`] autofixes for PD003, PD004, PD008, PD009 and PD011&quot; by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-02-11 15:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-11 17:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/rules/pandas_vet/rules/check_attr.rs</code>:117 on 2023-02-11 17:51</div>
            <div class="timeline-body"><p>My concern here is just that we still have known false-positives for this rule, and so we&#x27;ll be knowingly breaking code in certain places by applying these autofixes. I&#x27;m tempted to say that these should be off-by-default, but enableable by users, which we haven&#x27;t done before but I&#x27;d like to start doing in some cases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sbrugman">@sbrugman</a> reviewed on 2023-02-12 11:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sbrugman">@sbrugman</a> on <code>src/rules/pandas_vet/rules/check_attr.rs</code>:117 on 2023-02-12 11:37</div>
            <div class="timeline-body"><p>This one should benefit from the autofix safety levels (<a href="https://github.com/charliermarsh/ruff/issues/1992">charliermarsh/ruff#1992</a>). Is there anything we could do in the meantime to merge this, like make the tests more conservative? Implemented this one for autofixing https://github.com/ing-bank/popmon</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-02-16 08:21</div>
            <div class="timeline-body"><p>This PR probably needs autofix aggressiveness levels (<a href="https://github.com/charliermarsh/ruff/issues/1997">charliermarsh/ruff#1997</a>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-07-11 11:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-07-12 00:58</div>
            <div class="timeline-body"><p>@sbrugman fwiw those levels are implemented now <a href="https://github.com/astral-sh/ruff/issues/4181">astral-sh/ruff#4181</a> although they are not yet respected when running Ruff :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-07-12 08:49</div>
            <div class="timeline-body"><p>Ok, sounds good! Anyone is free to pick up this where it was left off</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:52:10 UTC
    </footer>
</body>
</html>
