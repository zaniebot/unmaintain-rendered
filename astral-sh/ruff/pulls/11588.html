<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`ruff server`: Add support for documents not exist on disk - astral-sh/ruff #11588</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>ruff server</code>: Add support for documents not exist on disk</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11588">#11588</a>
        opened by <a href="https://github.com/T-256">@T-256</a>
        on 2024-05-28 21:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/T-256">@T-256</a> on 2024-05-28 21:43</div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>before this PR <code>ruff server</code> at first layer checked that url received from lsp-client most matched <code>file://</code> and existed on disk, there are some scenarios that urls are not always <code>file://</code>-scheme. After this PR ruff server would also support urls other than <code>file://</code>
For example:</p>
<blockquote>
<p>url: <code>untitled:Untitled-1.ipynb?jupyter-notebook</code></p>
<p>url.scheme: <code>untitled</code>
url.path: <code>Untitled-1.ipynb</code>
url.quey: <code>jupyter-notebook</code></p>
</blockquote>
<p>Closes https://github.com/astral-sh/ruff/issues/11510</p>
<h2>Test Plan</h2>
<!-- How was it tested? -->

<p>Open VSCode
Enable ruff extension's native server option
<code>Ctrl+Win+Alt+N</code> -&gt; select <code>Python File</code>
Try write some codes and verify ruff works</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-05-28 22:27</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>âœ… ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>âœ… ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/server/api/notifications/did_change_workspace.rs</code>:22 on 2024-05-29 07:22</div>
            <div class="timeline-body"><p>Nit: You can remove the <code>clone</code> here by removing the <code>ref</code> from <code>uri</code></p>
<pre><code class="language-suggestion">        for types::WorkspaceFolder { uri, .. } in params.event.added {
            session.open_workspace_folder(uri);
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-05-29 07:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:53 on 2024-05-29 07:23</div>
            <div class="timeline-body"><p>Nit: Can we rename the field to <code>file_url</code> (same for notebook) now that it is no longer a path?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:92 on 2024-05-29 07:24</div>
            <div class="timeline-body"><pre><code class="language-suggestion">            .map(|(url, _)| url.clone())
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:88 on 2024-05-29 07:25</div>
            <div class="timeline-body"><p>I think we can now change the signature to return a reference to the URL to avoid the cloning</p>
<pre><code class="language-suggestion">    pub(super) fn text_document_urls(&amp;self) -&gt; impl Iterator&lt;Item = &amp;Url&gt; + '_ {
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:100 on 2024-05-29 07:25</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    pub(super) fn notebook_document_urls(&amp;self) -&gt; impl Iterator&lt;Item = &amp;Url&gt; + '_ {
        self.documents
            .iter()
            .filter(|(_, doc)| doc.as_notebook().is_some())
            .map(|(url, _)| url)
    }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:134 on 2024-05-29 07:27</div>
            <div class="timeline-body"><p>Clippy is right here. The function never returns <code>None</code> and, therefore, the return type can simply be <code>DocumentKey</code>. We should change the signature instead of suppressing the lint.</p>
<pre><code class="language-suggestion">    pub(super) fn key_from_url(&amp;self, url: &amp;Url) -&gt; DocumentKey {
        if self.notebook_cells.contains_key(url) {
            DocumentKey::NotebookCell(url.clone())
        } else if url.path().ends_with(&quot;ipynb&quot;) {
            DocumentKey::Notebook(url.clone())
        } else {
            DocumentKey::Text(url.clone())
        }
    }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:134 on 2024-05-29 07:33</div>
            <div class="timeline-body"><p>I think we should also change the signature to take an owned <code>url</code> because we always clone the URL unconditionally (same for <code>Session::take_snapshot</code>). This will allow us to avoid some unnecessary clones over all.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:177 on 2024-05-29 07:34</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    pub(super) fn open_workspace_folder(&amp;mut self, url: Url, global_settings: &amp;ClientSettings) {
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:184 on 2024-05-29 07:34</div>
            <div class="timeline-body"><pre><code class="language-suggestion">        workspace_url: Url,
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:129 on 2024-05-29 07:37</div>
            <div class="timeline-body"><p>This should probably be <code>.ipynb</code></p>
<pre><code class="language-suggestion">        if url.path().ends_with(&quot;.ipynb&quot;) {
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:207 on 2024-05-29 07:39</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    pub(super) fn close_workspace_folder(&amp;mut self, workspace_url: &amp;Url) -&gt; crate::Result&lt;()&gt; {
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:220 on 2024-05-29 07:40</div>
            <div class="timeline-body"><p>Nit: To avoid calling <code>workspace_url.path()</code> for every single document and cell.</p>
<pre><code class="language-suggestion">        let workspace_path = workspace_url.path();
        self.settings.remove(workspace_path).ok_or_else(|| {
            anyhow!(
                &quot;Tried to remove non-existent folder {}&quot;,
                workspace_path
            )
        })?;
        // O(n) complexity, which isn't ideal... but this is an uncommon operation.
        self.documents
            .retain(|path, _| !path.path().starts_with(workspace_path));
        self.notebook_cells
            .retain(|_, path| !path.path().starts_with(workspace_path));
        Ok(())
    }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:333 on 2024-05-29 07:40</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    fn url_for_key&lt;'a&gt;(&amp;'a self, key: &amp;'a DocumentKey) -&gt; Option&lt;&amp;'a Url&gt; {
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:360 on 2024-05-29 07:41</div>
            <div class="timeline-body"><pre><code class="language-suggestion">        file_url: Url,
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:470 on 2024-05-29 07:45</div>
            <div class="timeline-body"><p>I think this should return the <code>url</code> unchanged and not just the <code>path</code> segment of it.</p>
<pre><code class="language-suggestion">    pub(crate) fn url(&amp;self) -&gt; &amp;Url {
        match self {
            Self::Text { file_path, .. } | Self::Notebook { file_path, .. } =&gt; url,
        }
    }

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:328 on 2024-05-29 07:46</div>
            <div class="timeline-body"><p>I think we should show the entire <code>url</code> instead of just the path</p>
<pre><code class="language-suggestion">            anyhow::bail!(&quot;Document controller not available at `{}`&quot;, url);
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:290 on 2024-05-29 07:46</div>
            <div class="timeline-body"><p>I think we should show the entire document <code>url</code> instead of just the path segment</p>
<pre><code class="language-suggestion">                url
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:259 on 2024-05-29 07:49</div>
            <div class="timeline-body"><p>The old implementation used to use <code>url.to_file_path</code> instead of <code>path</code>. Whats the reason for using <code>path</code> here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:228 on 2024-05-29 07:50</div>
            <div class="timeline-body"><p>I think we should call <code>url.to_file_path</code> here instead of just taking the <code>path</code> part.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/fix.rs</code>:26 on 2024-05-29 08:03</div>
            <div class="timeline-body"><p>I think we shoudl use <code>to_file_path</code> here and we can fall back to <code>Untitled</code> if <code>to_file_path</code> fails because it is an untitled file (assuming that <code>to_file_path</code> fails in that case)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/lint.rs</code>:68 on 2024-05-29 08:03</div>
            <div class="timeline-body"><p>Same as for <code>fix</code>. I think we should use <code>to_file_path</code> here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/server.rs</code>:85 on 2024-05-29 08:04</div>
            <div class="timeline-body"><pre><code class="language-suggestion">        let mut workspace_for_path = |url: lsp_types::Url| {
            let Some(workspace_settings) = workspace_settings.as_mut() else {
                return (path, ClientSettings::default());
            };
            let settings = workspace_settings.remove(&amp;url).unwrap_or_else(|| {
                tracing::warn!(&quot;No workspace settings found for {url}&quot;);
                ClientSettings::default()
            });
            (path, settings)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/server.rs</code>:92 on 2024-05-29 08:04</div>
            <div class="timeline-body"><pre><code class="language-suggestion">                workspace_for_url(folder.uri)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session.rs</code>:118 on 2024-05-29 08:04</div>
            <div class="timeline-body"><p>In the entire file. Rename <code>path</code> to <code>url</code> or <code>uri</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-05-29 08:11</div>
            <div class="timeline-body"><p>Thanks for working on this. Overall this looks good to me and is exactly what I wanted to do as well.</p>
<p>I think the only part that I planned to add and isn't part of this PR is that we can't use <code>SourceType::from_path</code> for a new file and instead should respect the language setting coming from VS Code. In theory, this also applies for existing files because a user could have mapped all <code>.py</code> files to <code>notebooks</code> in their configuration.</p>
<p>That's why I think we should infer the <code>SourceType</code> in the <code>didOpen</code> request from the <a href="https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#textDocumentItem"><code>item.languageId</code></a>. Unfortunately, the language id doesn't distinguish between python and python stub files. That's why <code>query.source_type()</code> still needs to look at the path if the source type communicated by VS code is Python.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-29 19:42</div>
            <div class="timeline-body"><p>@T-256 - Do you want to address Micha's feedback, or want me to do so?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-05-29 21:12</div>
            <div class="timeline-body"><blockquote>
<p>Do you want to address Micha's feedback, or want me to do so?</p>
</blockquote>
<p>I opened this PR as POC that what could be happened. I wanted to get time to test it yesterday, but unfortunately it didn't happen.
Good news! I tested now and worked as expected with new <code>nativeServer</code> enablement on VSCode and opening untitled file.
I'll update PR description accordingly.</p>
<p>@MichaReiser Thanks for review, few comments still unsolved, I'd be happy to Charlie help me solve them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @T-256 on 2024-05-29 21:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-05-30 09:24</div>
            <div class="timeline-body"><p>Thank you, @T-256 for all the work. I'll take a look at addressing the remaining review comments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @MichaReiser on 2024-05-30 14:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-05-30 14:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:399 on 2024-05-30 14:39</div>
            <div class="timeline-body"><p>I'm not entirely sure about this. It's nice because the file is most likely to be part of the workspace and it would be unfortunate if we show lint errors for rules that are disabled in this workspace.</p>
<p>However, it has the downside that the shown lint errors change when the user has an unsaved document and then opens a new workspace. A next pull diagnostic now uses the default configuration which is different from the last run. I think that's fine, considering that adding a workspace AND having an unsaved file is rare.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-05-30 14:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:550 on 2024-05-30 14:39</div>
            <div class="timeline-body"><p>I think it's worth to distinguish between the two. E.g., I think we shouldn't test for exclusion for unsaved files because we don't have a real path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/T-256">@T-256</a> reviewed on 2024-05-30 14:57</div>
            <div class="timeline-body"><p>LGTM, Thanks for done this.
Just for last question, shouldn't we explicitly specify what URL schemes we support? AFAIK and according to docs of <a href="https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#documentFilter">LSP specification</a> it should be <code>file</code> or <code>untitled</code>. but URL itself could contain other schemes, IMO we should disallow other schemes. what do you think?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-05-30 15:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:262 on 2024-05-30 15:09</div>
            <div class="timeline-body"><p>I think users generally want this (take the settings from the root configuration in the only active workspace). But it does have the downside that adding a second workspace later on means that we suddenly take the fallback which changes the output. But I think that's fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/T-256">@T-256</a> reviewed on 2024-05-30 15:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/T-256">@T-256</a> on <code>crates/ruff_server/src/session/index.rs</code>:262 on 2024-05-30 15:16</div>
            <div class="timeline-body"><p>I think there are such cases in vscode internals too. IIRC they solved by choosing first workspace was added. can we consider same at here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-05-30 15:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:262 on 2024-05-30 15:59</div>
            <div class="timeline-body"><p>Possibly. We would need to keep a second vector that stores the workspace URLs in insertion order. I would prefer to leave this out of this PR for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-05-30 16:06</div>
            <div class="timeline-body"><p>I tested:</p>
<ul>
<li>Creating an untitled file<ul>
<li>In a single folder workspace: It used the configuration at the root of the folder if present, and otherwise used the fallback configuration</li>
<li>In a multi-folder workspace: It used the fallback configuration</li>
<li>The file doesn't get excluded</li>
</ul>
</li>
<li>I tested that, for an existing file<ul>
<li>It uses the closest configuration</li>
<li>It doesn't get formatted when it is excluded</li>
</ul>
</li>
<li>It formats and lints an untitled notebook document</li>
</ul>
<p>I didn't change the code to use the language from the <code>didOpen</code> notification. I think we can wait with using that until we support more languages than Python</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-05-30 16:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/fix.rs</code>:35 on 2024-05-30 16:07</div>
            <div class="timeline-body"><p>The way I implemented it here is that an untitled file can never be excluded. However, that means that an <code>exclude = [&quot;*&quot;]</code> won't apply where users might expect that it should.</p>
<p>But other than that, I think not handling it in exclusion makes sense because we don't know in which folder the document will be stored.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @MichaReiser on 2024-05-30 16:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @MichaReiser on 2024-05-30 16:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @dhruvmanila removed by @MichaReiser on 2024-05-30 16:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-05-30 17:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_server/src/session/index.rs</code>:550 on 2024-05-30 17:32</div>
            <div class="timeline-body"><p>I am wondering if we should make <code>Path</code> optional for the Ruff APIs like <code>lint_fix</code>...?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-05-30 17:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-05-30 17:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_server/src/fix.rs</code>:35 on 2024-05-30 17:32</div>
            <div class="timeline-body"><p>Makes sense.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2024-05-30 17:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_server/src/session/index.rs</code>:550 on 2024-05-30 17:33</div>
            <div class="timeline-body"><p>Like, could we remove this entirely? Why is the path needed in such cases? (If it's just for the extension, we could implement something special in <code>source_type</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-05-30 18:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_server/src/session/index.rs</code>:550 on 2024-05-30 18:48</div>
            <div class="timeline-body"><p>It's for diagnostics and maybe file based lint rules?</p>
<p>We might get away with it but I'm not very eager to change it. Like it would probably be an improvement but I rather finish res knot where this will be gone anyway ðŸ˜…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2024-05-31 06:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-05-31 06:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 21:56:31 UTC
    </footer>
</body>
</html>
