<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pycodestyle`] Fix `E301` to only trigger for functions immediately within a class - astral-sh/ruff #19768</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pycodestyle</code>] Fix <code>E301</code> to only trigger for functions immediately within a class</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19768">#19768</a>
        opened by <a href="https://github.com/danparizher">@danparizher</a>
        on 2025-08-05 18:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/danparizher">@danparizher</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Fixes #19752</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-08-05 18:37</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>detected linter changes</strong>. (+0 -151 violations, +0 -0 fixes in 2 projects; 53 projects unchanged)</p>
<details><summary><a href="https://github.com/binary-husky/gpt_academic">binary-husky/gpt_academic</a> (+0 -11 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
- <a href='https://github.com/binary-husky/gpt_academic/blob/3546f8c1c44994bcc2ef3b2b187619821f2c33e9/crazy_functions/Document_Optimize.py#L331'>crazy_functions/Document_Optimize.py:331:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/binary-husky/gpt_academic/blob/3546f8c1c44994bcc2ef3b2b187619821f2c33e9/crazy_functions/Latex_Project_Polish.py#L16'>crazy_functions/Latex_Project_Polish.py:16:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/binary-husky/gpt_academic/blob/3546f8c1c44994bcc2ef3b2b187619821f2c33e9/crazy_functions/Latex_Project_Translate_Legacy.py#L16'>crazy_functions/Latex_Project_Translate_Legacy.py:16:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/binary-husky/gpt_academic/blob/3546f8c1c44994bcc2ef3b2b187619821f2c33e9/crazy_functions/Markdown_Translate.py#L19'>crazy_functions/Markdown_Translate.py:19:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/binary-husky/gpt_academic/blob/3546f8c1c44994bcc2ef3b2b187619821f2c33e9/crazy_functions/SourceCode_Analyse_JupyterNotebook.py#L18'>crazy_functions/SourceCode_Analyse_JupyterNotebook.py:18:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/binary-husky/gpt_academic/blob/3546f8c1c44994bcc2ef3b2b187619821f2c33e9/crazy_functions/latex_fns/latex_actions.py#L184'>crazy_functions/latex_fns/latex_actions.py:184:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/binary-husky/gpt_academic/blob/3546f8c1c44994bcc2ef3b2b187619821f2c33e9/crazy_functions/paper_fns/reduce_aigc.py#L390'>crazy_functions/paper_fns/reduce_aigc.py:390:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/binary-husky/gpt_academic/blob/3546f8c1c44994bcc2ef3b2b187619821f2c33e9/crazy_functions/pdf_fns/report_gen_html.py#L25'>crazy_functions/pdf_fns/report_gen_html.py:25:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/binary-husky/gpt_academic/blob/3546f8c1c44994bcc2ef3b2b187619821f2c33e9/request_llms/bridge_chatglmonnx.py#L33'>request_llms/bridge_chatglmonnx.py:33:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/binary-husky/gpt_academic/blob/3546f8c1c44994bcc2ef3b2b187619821f2c33e9/request_llms/com_sparkapi.py#L118'>request_llms/com_sparkapi.py:118:9:</a> E301 [*] Expected 1 blank line, found 0
... 1 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+0 -140 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/client/connection.py#L366'>src/bokeh/client/connection.py:366:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/model/model.py#L559'>src/bokeh/model/model.py:559:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/session.py#L231'>src/bokeh/server/session.py:231:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/models/test_plot.py#L76'>tests/integration/models/test_plot.py:76:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/models/test_plot.py#L80'>tests/integration/models/test_plot.py:80:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_button.py#L65'>tests/integration/widgets/test_button.py:65:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_button.py#L70'>tests/integration/widgets/test_button.py:70:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_checkbox_button_group.py#L48'>tests/integration/widgets/test_checkbox_button_group.py:48:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_checkbox_button_group.py#L53'>tests/integration/widgets/test_checkbox_button_group.py:53:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_checkbox_group.py#L66'>tests/integration/widgets/test_checkbox_group.py:66:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_checkbox_group.py#L71'>tests/integration/widgets/test_checkbox_group.py:71:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_datepicker.py#L183'>tests/integration/widgets/test_datepicker.py:183:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_datepicker.py#L211'>tests/integration/widgets/test_datepicker.py:211:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_dropdown.py#L70'>tests/integration/widgets/test_dropdown.py:70:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_dropdown.py#L75'>tests/integration/widgets/test_dropdown.py:75:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_radio_button_group.py#L48'>tests/integration/widgets/test_radio_button_group.py:48:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_radio_button_group.py#L53'>tests/integration/widgets/test_radio_button_group.py:53:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_radio_group.py#L65'>tests/integration/widgets/test_radio_group.py:65:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_radio_group.py#L70'>tests/integration/widgets/test_radio_group.py:70:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_select.py#L223'>tests/integration/widgets/test_select.py:223:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_select.py#L228'>tests/integration/widgets/test_select.py:228:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_toggle.py#L64'>tests/integration/widgets/test_toggle.py:64:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/integration/widgets/test_toggle.py#L69'>tests/integration/widgets/test_toggle.py:69:13:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_code_runner.py#L132'>tests/unit/bokeh/application/handlers/test_code_runner.py:132:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L106'>tests/unit/bokeh/application/handlers/test_directory.py:106:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L128'>tests/unit/bokeh/application/handlers/test_directory.py:128:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L147'>tests/unit/bokeh/application/handlers/test_directory.py:147:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L170'>tests/unit/bokeh/application/handlers/test_directory.py:170:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L186'>tests/unit/bokeh/application/handlers/test_directory.py:186:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L205'>tests/unit/bokeh/application/handlers/test_directory.py:205:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L215'>tests/unit/bokeh/application/handlers/test_directory.py:215:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L256'>tests/unit/bokeh/application/handlers/test_directory.py:256:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L281'>tests/unit/bokeh/application/handlers/test_directory.py:281:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L319'>tests/unit/bokeh/application/handlers/test_directory.py:319:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L341'>tests/unit/bokeh/application/handlers/test_directory.py:341:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L362'>tests/unit/bokeh/application/handlers/test_directory.py:362:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L381'>tests/unit/bokeh/application/handlers/test_directory.py:381:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L400'>tests/unit/bokeh/application/handlers/test_directory.py:400:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L418'>tests/unit/bokeh/application/handlers/test_directory.py:418:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L434'>tests/unit/bokeh/application/handlers/test_directory.py:434:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_directory.py#L91'>tests/unit/bokeh/application/handlers/test_directory.py:91:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_notebook__handlers.py#L59'>tests/unit/bokeh/application/handlers/test_notebook__handlers.py:59:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_notebook__handlers.py#L71'>tests/unit/bokeh/application/handlers/test_notebook__handlers.py:71:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_notebook__handlers.py#L82'>tests/unit/bokeh/application/handlers/test_notebook__handlers.py:82:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_script.py#L46'>tests/unit/bokeh/application/handlers/test_script.py:46:9:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/application/handlers/test_script.py#L61'>tests/unit/bokeh/application/handlers/test_script.py:61:9:</a> E301 [*] Expected 1 blank line, found 0
... 94 additional changes omitted for project
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| E301 | 151 | 0 | 151 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/whitequark">@whitequark</a> on 2025-08-05 18:40</div>
            <div class="timeline-body"><p>Nice, -148 violations!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @ntBre on 2025-08-05 18:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-08-05 18:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-08-05 18:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-08-06 06:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pycodestyle/rules/blank_lines.rs</code>:839 on 2025-08-06 06:22</div>
            <div class="timeline-body"><p>Can we add the reasoning why we only trigger for functions directly within a class?</p>
<p>What about</p>
<pre><code class="language-py">
class Foo:
	if True:
		def test(): pass

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/danparizher">@danparizher</a> reviewed on 2025-08-06 16:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/danparizher">@danparizher</a> on <code>crates/ruff_linter/src/rules/pycodestyle/rules/blank_lines.rs</code>:839 on 2025-08-06 16:14</div>
            <div class="timeline-body"><p>I added in some additional details; let me know if it's too verbose‚Äîthere may be a simpler way to put it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-08-06 17:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/pycodestyle/rules/blank_lines.rs</code>:839 on 2025-08-06 17:05</div>
            <div class="timeline-body"><p>I think we need something more like this example or one of the other checks on <code>main</code> will short-circuit:</p>
<pre><code class="language-py">class Foo:
    if True:
        print(&quot;conditional&quot;)
        def test():
            pass
</code></pre>
<p>but this version is also flagged by <code>pycodestyle</code> (and <code>flake8</code>), so I think we'll want to test that it still is:</p>
<pre><code class="language-shell">$ pycodestyle try.py --select E301 --show-source
try.py:4:9: E301 expected 1 blank line, found 0
        def test():
        ^
</code></pre>
<p>I was hopeful that we could detect this a bit more robustly than checking indentation anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @ntBre by @danparizher on 2025-08-07 21:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @danparizher on 2025-08-07 21:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/pycodestyle/snapshots/ruff_linter__rules__pycodestyle__tests__E306_E30.py.snap</code>:252 on 2025-08-14 14:36</div>
            <div class="timeline-body"><p>Based on my comment with the pycodestyle results, this is supposed to be getting an E301, but it's still only getting an E306.</p>
<p>I would really prefer if we could handle these checks by updating the <code>state</code> tracking in this function rather than trying to compare the indentation. Have you explored that at all?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> requested changes on 2025-08-14 14:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/danparizher">@danparizher</a> reviewed on 2025-08-15 18:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/danparizher">@danparizher</a> on <code>crates/ruff_linter/src/rules/pycodestyle/snapshots/ruff_linter__rules__pycodestyle__tests__E306_E30.py.snap</code>:252 on 2025-08-15 18:46</div>
            <div class="timeline-body"><p>I haven't thought of that, thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @ntBre by @danparizher on 2025-08-15 19:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-08 21:30</div>
            <div class="timeline-body"><p>Thanks. Could you resolve the merge conflicts? They should just be from the new diff output format. It also still looks like the <code>callback</code> case is getting an E301 diagnostic in the snapshot. Is that correct? I thought it should only be an E306.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danparizher">@danparizher</a> on 2025-09-09 17:58</div>
            <div class="timeline-body"><p>Should be all set, let me know!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/whitequark">@whitequark</a> on 2025-09-14 12:38</div>
            <div class="timeline-body"><p>Can this PR get a review please? It's the last thing blocking the adoption of ruff for me: https://github.com/GlasgowEmbedded/glasgow/pull/993</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/pycodestyle/rules/blank_lines.rs</code>:1046 on 2025-09-15 20:54</div>
            <div class="timeline-body"><p>Do we need to move this code now? I tested locally after putting it back, and it seems fine down here still.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/resources/test/fixtures/pycodestyle/E30.py</code>:995 on 2025-09-15 20:56</div>
            <div class="timeline-body"><p>I tried a couple more test cases like this:</p>
<pre><code class="language-py">class Bar:
    def f():
        x = 1
        def g():
            return 1
        return 2

    def f():
        class Baz:
            x = 1
            def g():
                return 1
            return 2
</code></pre>
<p>with the second <code>f</code> being more interesting. We get an <code>E306</code> for <code>Baz.g</code> even though it's a method, but that's actually consistent with the upstream pycodestyle, so I think it's okay.</p>
<p>It might be worth adding that test case, but the code is handling it correctly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-09-15 20:58</div>
            <div class="timeline-body"><p>I had one question about the E306 code and a suggestion for one more test case, but this looks like a nice fix. Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @ntBre by @danparizher on 2025-09-15 22:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-15 23:04</div>
            <div class="timeline-body"><p>I think you may have reverted the wrong piece of code. The ecosystem check is now showing -160 E306 violations instead of -151 E301 violations.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danparizher">@danparizher</a> on 2025-09-15 23:16</div>
            <div class="timeline-body"><p>Hm, maybe I am confused‚ÄîCould you point me to what part we were looking to revert? Feel free to commit from your side if it's easier, I know this has been a long PR üôÇ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-15 23:20</div>
            <div class="timeline-body"><p>I'll push a commit! I may not have phrased it well, but I just wanted to move the E306 code back to where it was originally (a standalone <code>if</code> instead of an <code>else if</code> on the E301 check).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-15 23:33</div>
            <div class="timeline-body"><p>This is what I had in mind. I'll double-check the ecosystem report to make sure it's actually equivalent. The <code>else if</code> might be necessary, but it's a really clean diff if not. I'm expecting -151 <code>E301</code> in the ecosystem check (I think the ecosystem projects have added 3 new instances of E301 since the initial PR when it was -148).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> approved on 2025-09-16 14:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @ntBre on 2025-09-16 15:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-09-16 15:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/whitequark">@whitequark</a> on 2025-09-16 15:05</div>
            <div class="timeline-body"><p>Thank you! When can I expect the fix to be available in a release (really, I just want it to use with pre-commit.ci)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-09-16 15:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-16 15:18</div>
            <div class="timeline-body"><p>Our weekly releases are usually on Thursday, so it should be out in ~2 days!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/whitequark">@whitequark</a> on 2025-09-16 15:21</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:14:50 UTC
    </footer>
</body>
</html>
