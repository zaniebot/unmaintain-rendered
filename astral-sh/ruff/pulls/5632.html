<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add rule WPS111 from wemake-python-styleguide - astral-sh/ruff #5632</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add rule WPS111 from wemake-python-styleguide</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/5632">#5632</a>
        opened by <a href="https://github.com/bo5o">@bo5o</a>
        on 2023-07-09 18:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a></div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>Implements WPS111 from <a href="https://wemake-python-styleguide.readthedocs.io/en/latest/">wemake-python-styleguide</a>, as part of #3845.</p>
<p>I started by merging latest upstream changes into an <a href="https://github.com/astral-sh/ruff/pull/4021">existing PR</a> to revive this implementation. However, after looking at it more closely, I realized that the existing implementation only covers the most basic case of WPS111.
After studying the <a href="https://github.com/wemake-services/wemake-python-styleguide/tree/master/wemake_python_styleguide">original code</a> a bit more I updated my implementation to match the original more closely and emit the same behavior. The result is a quite substantial difference compared to the existing PR for this rule, so I decided to make it a separate one, supposed to supersede the previous.</p>
<h2>Test Plan</h2>
<p>I added a <a href="https://github.com/astral-sh/ruff/blob/fc9d9aafe7b7b2c5379f97216c8c95e035bbf8e3/crates/ruff/resources/test/fixtures/wemake_python_styleguide/WPS111.py">fixture</a> for snapshot testing and copied <a href="https://github.com/astral-sh/ruff/blob/fc9d9aafe7b7b2c5379f97216c8c95e035bbf8e3/crates/ruff/src/rules/wemake_python_styleguide/helpers.rs#L34-L61">unit tests</a> from the <a href="https://github.com/wemake-services/wemake-python-styleguide/blob/51152125d840cb802cb3a84b764553ac9ad53341/wemake_python_styleguide/logic/naming/logical.py#L73-L128">original logic</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-07-16 19:11</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:6 on 2023-07-17 10:18</div>
            <div class="timeline-body"><pre><code class="language-suggestion">const ALIAS_NAMES_ALLOWLIST: [&amp;str; 7] = [&quot;np&quot;, &quot;pd&quot;, &quot;df&quot;, &quot;plt&quot;, &quot;sns&quot;, &quot;tf&quot;, &quot;cv&quot;];
</code></pre>
<p>Or what I like to do (if you don't need to enumerate the values) is to write a <code>match</code> statement instead:</p>
<pre><code>if matches!(x, &quot;np&quot; | &quot;pd&quot; | &quot;df&quot; | ...)
</code></pre>
<p>The compiler will generate efficient code for this</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:9 on 2023-07-17 10:20</div>
            <div class="timeline-body"><p>We try to avoid regex whenever possible because it is significantly slower than manual string operations. What are we testing here, whether the variable name starts with a <code>?</code>. We can get the same result with <code>name.starts_with('_')</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:26 on 2023-07-17 10:22</div>
            <div class="timeline-body"><p>We can use <code>trim_start_matches</code> here to avoid iterating over the whole name since we know that the <code>_</code> can only appear at the beginning of a name.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:41 on 2023-07-17 10:22</div>
            <div class="timeline-body"><p>Nit</p>
<pre><code class="language-suggestion">        matches!(file_name, &quot;__init__.py&quot; | &quot;__init__.pyi&quot; | &quot;__main__.py&quot; | &quot;__main__.pyi&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/rules/too_short_name.rs</code>:129 on 2023-07-17 10:24</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    if !matches!(path.extension(), Some(&quot;py&quot; | &quot;pyi&quot;))
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2023-07-17 10:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-07-17 21:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:26 on 2023-07-17 21:46</div>
            <div class="timeline-body"><p>I think in the original implementation the <code>trim=True</code> flag is meant to trim underscores from start and end (see <a href="https://github.com/wemake-services/wemake-python-styleguide/blob/a710b5f18ea35a7a09b713cc86cabc5a4fc6b25d/wemake_python_styleguide/logic/naming/logical.py#L103">wemake_python_styleguide/logic/naming/logical.py#L103</a>). For example <code>z_</code> and <code>__z</code> should both be detected as too short variables names.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-07-17 22:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:6 on 2023-07-17 22:20</div>
            <div class="timeline-body"><p>I wasn't sure what to do here, because it is a potential conflict with another linter. flake8-import-conventions defines convential import aliases <a href="https://github.com/astral-sh/ruff/blob/e574a6a7698a83d68bd42b27b1ba7a304e09f808/crates/ruff/src/rules/flake8_import_conventions/settings.rs#L8">here</a>. Actually I would like to use these as the single source of truth for allowed aliases. This list is also configurable via settings (see <a href="https://github.com/astral-sh/ruff/blob/e574a6a7698a83d68bd42b27b1ba7a304e09f808/crates/ruff/src/rules/flake8_import_conventions/settings.rs#L50-L59">here</a>) in which case I would also like to add these to the allowlist.</p>
<p>How should this be done?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-07-17 22:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:41 on 2023-07-17 22:25</div>
            <div class="timeline-body"><p>Pattern matching does not seem to work here, because <code>file_name</code> is an <a href="https://doc.rust-lang.org/std/ffi/struct.OsStr.html">OsStr</a>. Compiler says:</p>
<pre><code>rustc: mismatched types
   expected reference `&amp;std::ffi::OsStr`
      found reference `&amp;'static str` [E0308]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-07-17 22:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/rules/too_short_name.rs</code>:129 on 2023-07-17 22:25</div>
            <div class="timeline-body"><p>Pattern matching does not seem to work here, because <code>path.extension()</code> is an <a href="https://doc.rust-lang.org/std/ffi/struct.OsStr.html">OsStr</a>. Compiler says:</p>
<pre><code>rustc: mismatched types
   expected reference `&amp;std::ffi::OsStr`
      found reference `&amp;'static str` [E0308]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-07-18 17:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:9 on 2023-07-18 17:31</div>
            <div class="timeline-body"><p>Updated the code to avoid regex.</p>
<p>The purpose of the function was to check if a variable is matching the commonly used convention of using one or more underscores for throw-away variables, like <code>_</code> in <code>_, other = returns_tuple()</code>. It now uses <code>.chars().all()</code>.</p>
<pre><code class="language-rust">fn is_unused(name: &amp;str) -&gt; bool {
    name.chars().all(|c| c == UNUSED_PLACEHOLDER)
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:41 on 2023-07-24 07:31</div>
            <div class="timeline-body"><p>Ah right. You could do <code>matches!(file_name.to_str(), Some(&quot;__init__.py&quot; | &quot;__init__.pyi&quot; | &quot;__main.py&quot; ...))</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2023-07-24 07:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/checkers/ast/analyze/pattern.rs</code>:7 on 2023-07-25 06:44</div>
            <div class="timeline-body"><pre><code class="language-suggestion">/// Run lint rules over a [`Pattern`] syntax node.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:28 on 2023-07-25 06:46</div>
            <div class="timeline-body"><p>Len gives you the byte length of a string and not the character length. You have to do <code>name.chars().count()</code> to get the character count instead.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/rules/too_short_name.rs</code>:21 on 2023-07-25 06:47</div>
            <div class="timeline-body"><p>I think it's worth explaining how we measure the length of a name. Is it the number of characters or the visual width (character width)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2023-07-25 06:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-07-25 18:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff/src/checkers/ast/analyze/pattern.rs</code>:7 on 2023-07-25 18:01</div>
            <div class="timeline-body"><p>Fixed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:28 on 2023-07-25 18:04</div>
            <div class="timeline-body"><p>A common gotcha. I always forget that unicode strings are so special.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-07-25 18:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-07-25 18:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/rules/too_short_name.rs</code>:21 on 2023-07-25 18:08</div>
            <div class="timeline-body"><p>Good point.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2023-07-26 07:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:6 on 2023-07-26 07:02</div>
            <div class="timeline-body"><p>@charliermarsh ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2023-07-28 06:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @MichaReiser on 2023-07-28 06:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2023-08-26 16:38</div>
            <div class="timeline-body"><!-- __CODSPEED_PERFORMANCE_REPORT_COMMENT__ -->

<h2><a href="https://codspeed.io/astral-sh/ruff/branches/cbows%3Awps111-too_short_name-new?utm_source=github&amp;utm_medium=comment&amp;utm_content=header">CodSpeed Performance Report</a></h2>
<h3>Merging #5632 will <strong>not alter performance</strong></h3>
<p><sub>Comparing <code>cbows:wps111-too_short_name-new</code> (e3fbb1c) with <code>main</code> (eae59cf)</sub></p>
<h3>Summary</h3>
<p><code>✅ 16</code> untouched</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:17 on 2023-09-11 06:49</div>
            <div class="timeline-body"><p>Nit</p>
<pre><code class="language-suggestion">    if matches!(name, &quot;np&quot; | &quot;pd&quot; | &quot;df&quot; | &quot;plt&quot; | &quot;sns&quot; | &quot;tf&quot; | &quot;cv&quot;) {
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-11-08 20:11</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+9643 -0 violations, +0 -0 fixes in 3 projects; 41 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+3827 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api/auth/backend/default.py#L32'>airflow/api/auth/backend/default.py:32:1:</a> WPS111 Found too short name: `T`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api/auth/backend/deny_all.py#L34'>airflow/api/auth/backend/deny_all.py:34:1:</a> WPS111 Found too short name: `T`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api/auth/backend/kerberos_auth.py#L138'>airflow/api/auth/backend/kerberos_auth.py:138:1:</a> WPS111 Found too short name: `T`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api/auth/backend/session.py#L35'>airflow/api/auth/backend/session.py:35:1:</a> WPS111 Found too short name: `T`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api/client/json_client.py#L110'>airflow/api/client/json_client.py:110:63:</a> WPS111 Found too short name: `p`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api/client/local_client.py#L70'>airflow/api/client/local_client.py:70:74:</a> WPS111 Found too short name: `p`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api/common/mark_tasks.py#L317'>airflow/api/common/mark_tasks.py:317:46:</a> WPS111 Found too short name: `d`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api/common/mark_tasks.py#L346'>airflow/api/common/mark_tasks.py:346:40:</a> WPS111 Found too short name: `d`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api_connexion/endpoints/config_endpoint.py#L60'>airflow/api_connexion/endpoints/config_endpoint.py:60:50:</a> WPS111 Found too short name: `s`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api_connexion/endpoints/connection_endpoint.py#L168'>airflow/api_connexion/endpoints/connection_endpoint.py:168:25:</a> WPS111 Found too short name: `e`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api_connexion/endpoints/dag_endpoint.py#L138'>airflow/api_connexion/endpoints/dag_endpoint.py:138:26:</a> WPS111 Found too short name: `e`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api_connexion/endpoints/dag_endpoint.py#L65'>airflow/api_connexion/endpoints/dag_endpoint.py:65:26:</a> WPS111 Found too short name: `e`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api_connexion/endpoints/dag_endpoint.py#L87'>airflow/api_connexion/endpoints/dag_endpoint.py:87:26:</a> WPS111 Found too short name: `e`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api_connexion/endpoints/dag_run_endpoint.py#L108'>airflow/api_connexion/endpoints/dag_run_endpoint.py:108:26:</a> WPS111 Found too short name: `e`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api_connexion/endpoints/dag_run_endpoint.py#L258'>airflow/api_connexion/endpoints/dag_run_endpoint.py:258:26:</a> WPS111 Found too short name: `e`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api_connexion/endpoints/pool_endpoint.py#L114'>airflow/api_connexion/endpoints/pool_endpoint.py:114:38:</a> WPS111 Found too short name: `i`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api_connexion/endpoints/provider_endpoint.py#L52'>airflow/api_connexion/endpoints/provider_endpoint.py:52:42:</a> WPS111 Found too short name: `d`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api_connexion/endpoints/task_instance_endpoint.py#L264'>airflow/api_connexion/endpoints/task_instance_endpoint.py:264:71:</a> WPS111 Found too short name: `s`
+ <a href='https://github.com/apache/airflow/blob/3e92409d824af9b48f5613447e727a2937fc42ae/airflow/api_connexion/endpoints/task_instance_endpoint.py#L269'>airflow/api_connexion/endpoints/task_instance_endpoint.py:269:32:</a> WPS111 Found too short name: `v`
... 3808 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+4254 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_1_multiple_lines.py#L10'>docs/bokeh/source/docs/first_steps/examples/first_steps_1_multiple_lines.py:10:1:</a> WPS111 Found too short name: `p`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_1_multiple_lines.py#L4'>docs/bokeh/source/docs/first_steps/examples/first_steps_1_multiple_lines.py:4:1:</a> WPS111 Found too short name: `x`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_1_simple_line.py#L4'>docs/bokeh/source/docs/first_steps/examples/first_steps_1_simple_line.py:4:1:</a> WPS111 Found too short name: `x`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_1_simple_line.py#L5'>docs/bokeh/source/docs/first_steps/examples/first_steps_1_simple_line.py:5:1:</a> WPS111 Found too short name: `y`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_1_simple_line.py#L8'>docs/bokeh/source/docs/first_steps/examples/first_steps_1_simple_line.py:8:1:</a> WPS111 Found too short name: `p`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_2_add_bars.py#L10'>docs/bokeh/source/docs/first_steps/examples/first_steps_2_add_bars.py:10:1:</a> WPS111 Found too short name: `p`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_2_add_bars.py#L4'>docs/bokeh/source/docs/first_steps/examples/first_steps_2_add_bars.py:4:1:</a> WPS111 Found too short name: `x`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_2_add_circles.py#L10'>docs/bokeh/source/docs/first_steps/examples/first_steps_2_add_circles.py:10:1:</a> WPS111 Found too short name: `p`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_2_add_circles.py#L4'>docs/bokeh/source/docs/first_steps/examples/first_steps_2_add_circles.py:4:1:</a> WPS111 Found too short name: `x`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_circle.py#L4'>docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_circle.py:4:1:</a> WPS111 Found too short name: `x`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_circle.py#L5'>docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_circle.py:5:1:</a> WPS111 Found too short name: `y`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_circle.py#L8'>docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_circle.py:8:1:</a> WPS111 Found too short name: `p`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_existing_circle.py#L4'>docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_existing_circle.py:4:1:</a> WPS111 Found too short name: `x`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_existing_circle.py#L5'>docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_existing_circle.py:5:1:</a> WPS111 Found too short name: `y`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_existing_circle.py#L8'>docs/bokeh/source/docs/first_steps/examples/first_steps_2_style_existing_circle.py:8:1:</a> WPS111 Found too short name: `p`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_3_box_annotation.py#L11'>docs/bokeh/source/docs/first_steps/examples/first_steps_3_box_annotation.py:11:1:</a> WPS111 Found too short name: `p`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_3_box_annotation.py#L7'>docs/bokeh/source/docs/first_steps/examples/first_steps_3_box_annotation.py:7:1:</a> WPS111 Found too short name: `x`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_3_box_annotation.py#L8'>docs/bokeh/source/docs/first_steps/examples/first_steps_3_box_annotation.py:8:1:</a> WPS111 Found too short name: `y`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_3_legend.py#L4'>docs/bokeh/source/docs/first_steps/examples/first_steps_3_legend.py:4:1:</a> WPS111 Found too short name: `x`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_3_legend.py#L9'>docs/bokeh/source/docs/first_steps/examples/first_steps_3_legend.py:9:1:</a> WPS111 Found too short name: `p`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_3_title.py#L4'>docs/bokeh/source/docs/first_steps/examples/first_steps_3_title.py:4:1:</a> WPS111 Found too short name: `x`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/docs/bokeh/source/docs/first_steps/examples/first_steps_3_title.py#L5'>docs/bokeh/source/docs/first_steps/examples/first_steps_3_title.py:5:1:</a> WPS111 Found too short name: `y`
... 4232 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/zulip/zulip">zulip/zulip</a> (+1562 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/zulip/zulip/blob/e5d50d9787f735a1fe5e9c8ff080ccd8b54d35f3/analytics/lib/fixtures.py#L48'>analytics/lib/fixtures.py:48:13:</a> WPS111 Found too short name: `i`
+ <a href='https://github.com/zulip/zulip/blob/e5d50d9787f735a1fe5e9c8ff080ccd8b54d35f3/analytics/lib/fixtures.py#L55'>analytics/lib/fixtures.py:55:53:</a> WPS111 Found too short name: `i`
+ <a href='https://github.com/zulip/zulip/blob/e5d50d9787f735a1fe5e9c8ff080ccd8b54d35f3/analytics/lib/fixtures.py#L63'>analytics/lib/fixtures.py:63:81:</a> WPS111 Found too short name: `i`
+ <a href='https://github.com/zulip/zulip/blob/e5d50d9787f735a1fe5e9c8ff080ccd8b54d35f3/analytics/lib/fixtures.py#L66'>analytics/lib/fixtures.py:66:9:</a> WPS111 Found too short name: `i`
+ <a href='https://github.com/zulip/zulip/blob/e5d50d9787f735a1fe5e9c8ff080ccd8b54d35f3/analytics/lib/fixtures.py#L73'>analytics/lib/fixtures.py:73:13:</a> WPS111 Found too short name: `v`
+ <a href='https://github.com/zulip/zulip/blob/e5d50d9787f735a1fe5e9c8ff080ccd8b54d35f3/analytics/lib/fixtures.py#L76'>analytics/lib/fixtures.py:76:13:</a> WPS111 Found too short name: `i`
+ <a href='https://github.com/zulip/zulip/blob/e5d50d9787f735a1fe5e9c8ff080ccd8b54d35f3/analytics/lib/fixtures.py#L78'>analytics/lib/fixtures.py:78:27:</a> WPS111 Found too short name: `v`
+ <a href='https://github.com/zulip/zulip/blob/e5d50d9787f735a1fe5e9c8ff080ccd8b54d35f3/analytics/management/commands/check_analytics_state.py#L37'>analytics/management/commands/check_analytics_state.py:37:43:</a> WPS111 Found too short name: `f`
+ <a href='https://github.com/zulip/zulip/blob/e5d50d9787f735a1fe5e9c8ff080ccd8b54d35f3/analytics/migrations/0016_unique_constraint_when_subgroup_null.py#L31'>analytics/migrations/0016_unique_constraint_when_subgroup_null.py:31:34:</a> WPS111 Found too short name: `Q`
+ <a href='https://github.com/zulip/zulip/blob/e5d50d9787f735a1fe5e9c8ff080ccd8b54d35f3/analytics/migrations/0016_unique_constraint_when_subgroup_null.py#L39'>analytics/migrations/0016_unique_constraint_when_subgroup_null.py:39:34:</a> WPS111 Found too short name: `Q`
... 1552 additional changes omitted for project
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| WPS111 | 9643 | 9643 | 0 | 0 | 0 |</p>
</p>
</details>

<h3>Formatter (stable)</h3>
<p>✅ ecosystem check detected no format changes.</p>
<h3>Formatter (preview)</h3>
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/rules/too_short_name.rs</code>:60 on 2023-12-01 02:56</div>
            <div class="timeline-body"><p>Cloning here for every parameter seems expensive (requires an allocation for each parameter). Could we instead define <code>Checkable</code> as an enum with a variant for <code>Identifier</code>, <code>Parameter</code>, and <code>Alias</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/settings.rs</code>:8 on 2023-12-01 03:05</div>
            <div class="timeline-body"><p>Could we add a short documentation that this is the min length in characters.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/rules/too_short_name.rs</code>:42 on 2023-12-01 03:06</div>
            <div class="timeline-body"><p>Is it possible to make the fields private (or <code>pub(crate)</code>)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/rules/too_short_name.rs</code>:136 on 2023-12-01 03:07</div>
            <div class="timeline-body"><p>What guarantees that <code>file_name</code> and <code>file_stem</code> are never <code>None</code>? It might be helpful to document why it is the case or re-use the value if it was checked above.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:12 on 2023-12-01 03:09</div>
            <div class="timeline-body"><p>Nit: I recommend inlining the functionality into <code>too_short_name.rs</code>, considering that it isn't used elsewhere.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:36 on 2023-12-01 03:10</div>
            <div class="timeline-body"><p>Could we reuse https://github.com/astral-sh/ruff/blob/5849a752235f5384bfef733e64dbfc6a01e30be9/crates/ruff_linter/src/rules/pep8_naming/rules/invalid_module_name.rs#L98-L105 ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:29 on 2023-12-01 03:12</div>
            <div class="timeline-body"><p>I think it would be helpful to extend the module documentation with how the length of a name is determined in more detail because it seems to be more complicated than just counting characters. There also seem to be exception when the rule does not apply (names starting with <code>_</code>?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:8 on 2023-12-01 03:13</div>
            <div class="timeline-body"><p>I believe our convention is to treat all names stating with a <code>_</code> as unused, e.g. <code>_a</code> is considered unused. Should we align this rule with this behavior? @charliemarsh do we have existing functionality that allows testing if a name is &quot;unused&quot;?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2023-12-01 03:20</div>
            <div class="timeline-body"><p>The implementation looks good to me, considering we can remove the need to clone  <code>Identifiers</code> for <code>Checkable</code>.</p>
<p>One open question is if we want to support WPS, considering that it is incompatible with our autoformatter. Although we could decide to support all rules that are compatible with the formatter.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @MichaReiser by @MichaReiser on 2023-12-07 02:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @MichaReiser on 2023-12-07 02:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @MichaReiser by @MichaReiser on 2023-12-07 02:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-12-09 11:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/rules/too_short_name.rs</code>:60 on 2023-12-09 11:07</div>
            <div class="timeline-body"><p>Yes it seems expensive. I reworked the code a little bit so that <code>Checkable</code> is now an <code>enum</code> that works with references to <code>Identifier</code>, <code>Parameter</code>, <code>Alias</code> and <code>Expr</code> respectively.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-12-09 11:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/settings.rs</code>:8 on 2023-12-09 11:10</div>
            <div class="timeline-body"><p>Done.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/helpers/naming.rs</code>:12 on 2023-12-09 11:15</div>
            <div class="timeline-body"><p>There are many naming rules in wemake-python-styleguide which will eventually share logic. To prepare for this, I thought I already create this module.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-12-09 11:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-12-09 11:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/rules/too_short_name.rs</code>:42 on 2023-12-09 11:17</div>
            <div class="timeline-body"><p>Yes that works. Done</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bo5o">@bo5o</a> reviewed on 2023-12-09 11:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/bo5o">@bo5o</a> on <code>crates/ruff_linter/src/rules/wemake_python_styleguide/rules/too_short_name.rs</code>:136 on 2023-12-09 11:21</div>
            <div class="timeline-body"><p>I copied the boilerplate from https://github.com/astral-sh/ruff/blob/20e33bf5147a027e1d0d4ef28f88cfb5b3916efe/crates/ruff_linter/src/rules/pep8_naming/rules/invalid_module_name.rs#L50-L67 and didn't think much about it, since it seems like it hasn't caused much trouble in the <code>pep8-naming</code> implementation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">incompatibility</span> added by @zanieb on 2024-03-12 17:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-25 08:18</div>
            <div class="timeline-body"><p>Thank you, @bo5o, for working on this rule and keeping the PR up to date.</p>
<p>We think this is a valuable rule for many but don't feel comfortable merging it today because it is very opinionated, and everyone using <code>--select ALL</code> would opt into the new rule. That's why we only want to add this rule once #1774 is complete: It gives users a better way to opt into the rules they want.</p>
<p>I'm closing this PR for now because I don't want you to spend more time updating the PR, but I hope we can resurrect this PR once #1774 is completed. I'm sorry for the late reply. We should have made this decision sooner.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-03-25 08:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:58:37 UTC
    </footer>
</body>
</html>
