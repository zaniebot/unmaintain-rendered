<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8-use-pathlib`] Stabilize `os-listdir` (`PTH208`) - astral-sh/ruff #16642</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8-use-pathlib</code>] Stabilize <code>os-listdir</code> (<code>PTH208</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16642">#16642</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-03-11 18:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-11 18:46</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Stabilizes PTH208. The test was already in the right place, and the docs look good.</p>
<h2>Test Plan</h2>
<p>0 issues and PRs, open or closed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-03-11 18:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.10" by @ntBre on 2025-03-11 18:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-03-11 18:52</div>
            <div class="timeline-body"><!-- __CODSPEED_PERFORMANCE_REPORT_COMMENT__ -->

<!-- __CODSPEED_INSTRUMENTATION_PERFORMANCE_REPORT_COMMENT__ -->

<h2><a href="https://codspeed.io/astral-sh/ruff/branches/brent%2Fpth208-0.10">CodSpeed Performance Report</a></h2>
<h3>Merging #16642 will <strong>degrade performances by 12.73%</strong></h3>
<p><sub>Comparing <code>brent/pth208-0.10</code> (90740b2) with <code>micha/ruff-0.10</code> (85f7871)</sub></p>
<h3>Summary</h3>
<p><code>❌ 1</code> regressions<br />
<code>✅ 31</code> untouched benchmarks</p>
<blockquote>
<p>:warning: <em>Please fix the performance issues or <a href="https://codspeed.io/astral-sh/ruff/branches/brent%2Fpth208-0.10">acknowledge them on CodSpeed</a>.</em></p>
</blockquote>
<h3>Benchmarks breakdown</h3>
<p>|     | Benchmark | <code>BASE</code> | <code>HEAD</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| ❌ | <code>red_knot_check_file[incremental]</code> | 4.8 ms | 5.5 ms | -12.73% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-03-11 18:52</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+59 -0 violations, +0 -0 fixes in 5 projects; 50 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+15 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/dev/breeze/src/airflow_breeze/commands/release_management_commands.py#L1243'>dev/breeze/src/airflow_breeze/commands/release_management_commands.py:1243:17:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/dev/breeze/src/airflow_breeze/commands/release_management_commands.py#L2284'>dev/breeze/src/airflow_breeze/commands/release_management_commands.py:2284:29:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/dev/breeze/src/airflow_breeze/commands/sbom_commands.py#L299'>dev/breeze/src/airflow_breeze/commands/sbom_commands.py:299:33:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/dev/breeze/src/airflow_breeze/utils/cdxgen.py#L142'>dev/breeze/src/airflow_breeze/utils/cdxgen.py:142:22:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/dev/check_files.py#L204'>dev/check_files.py:204:13:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/dev/check_files.py#L217'>dev/check_files.py:217:13:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/dev/check_files.py#L230'>dev/check_files.py:230:13:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/devel-common/src/tests_common/test_utils/system_tests_class.py#L102'>devel-common/src/tests_common/test_utils/system_tests_class.py:102:17:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/devel-common/src/tests_common/test_utils/system_tests_class.py#L86'>devel-common/src/tests_common/test_utils/system_tests_class.py:86:17:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/docs/build_docs.py#L485'>docs/build_docs.py:485:20:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/providers/amazon/src/airflow/providers/amazon/aws/hooks/sagemaker.py#L177'>providers/amazon/src/airflow/providers/amazon/aws/hooks/sagemaker.py:177:63:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/apache/airflow/blob/bdfea8005bbc064c1b6f5e991e18e1a5d9b83b67/providers/openlineage/tests/unit/openlineage/plugins/test_execution.py#L58'>providers/openlineage/tests/unit/openlineage/plugins/test_execution.py:58:81:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
... 3 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+11 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/simple_hdf5/main.py#L19'>examples/server/app/simple_hdf5/main.py:19:28:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/__init__.py#L54'>src/bokeh/command/subcommands/__init__.py:54:17:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/sphinxext/bokeh_gallery.py#L134'>src/bokeh/sphinxext/bokeh_gallery.py:134:18:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/sphinxext/bokeh_gallery.py#L160'>src/bokeh/sphinxext/bokeh_gallery.py:160:21:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/sphinxext/bokeh_releases.py#L76'>src/bokeh/sphinxext/bokeh_releases.py:76:47:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/support/util/examples.py#L186'>tests/support/util/examples.py:186:33:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/command/subcommands/test___init___subcommands.py#L48'>tests/unit/bokeh/command/subcommands/test___init___subcommands.py:48:13:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/command/subcommands/test_json__subcommands.py#L111'>tests/unit/bokeh/command/subcommands/test_json__subcommands.py:111:54:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/command/subcommands/test_json__subcommands.py#L123'>tests/unit/bokeh/command/subcommands/test_json__subcommands.py:123:50:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/unit/bokeh/command/subcommands/test_json__subcommands.py#L135'>tests/unit/bokeh/command/subcommands/test_json__subcommands.py:135:50:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
... 1 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/pypa/cibuildwheel">pypa/cibuildwheel</a> (+4 -0 violations, +0 -0 fixes)</summary>
<p>

<pre>
+ <a href='https://github.com/pypa/cibuildwheel/blob/25f2d3f313f10d0dd03787ca655e40cf78da4bec/test/test_environment.py#L92'>test/test_environment.py:92:16:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/pypa/cibuildwheel/blob/25f2d3f313f10d0dd03787ca655e40cf78da4bec/test/test_from_sdist.py#L56'>test/test_from_sdist.py:56:16:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/pypa/cibuildwheel/blob/25f2d3f313f10d0dd03787ca655e40cf78da4bec/test/test_testing.py#L183'>test/test_testing.py:183:16:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/pypa/cibuildwheel/blob/25f2d3f313f10d0dd03787ca655e40cf78da4bec/test/utils.py#L143'>test/utils.py:143:18:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
</pre>

</p>
</details>
<details><summary><a href="https://github.com/reflex-dev/reflex">reflex-dev/reflex</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>

<pre>
+ <a href='https://github.com/reflex-dev/reflex/blob/5c8104ff5bdc6c39f5f2ef499365331f1a2af541/reflex/utils/prerequisites.py#L1613'>reflex/utils/prerequisites.py:1613:23:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
</pre>

</p>
</details>
<details><summary><a href="https://github.com/zulip/zulip">zulip/zulip</a> (+28 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/corporate/tests/test_stripe.py#L137'>corporate/tests/test_stripe.py:137:18:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/scripts/lib/run_hooks.py#L68'>scripts/lib/run_hooks.py:68:38:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/scripts/lib/zulip_tools.py#L142'>scripts/lib/zulip_tools.py:142:17:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/scripts/lib/zulip_tools.py#L311'>scripts/lib/zulip_tools.py:311:25:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/scripts/lib/zulip_tools.py#L354'>scripts/lib/zulip_tools.py:354:27:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/scripts/lib/zulip_tools.py#L373'>scripts/lib/zulip_tools.py:373:64:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/scripts/lib/zulip_tools.py#L660'>scripts/lib/zulip_tools.py:660:26:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/tools/documentation_crawler/documentation_crawler/spiders/check_help_documentation.py#L34'>tools/documentation_crawler/documentation_crawler/spiders/check_help_documentation.py:34:29:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/tools/lib/test_script.py#L102'>tools/lib/test_script.py:102:34:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/tools/setup/generate_landing_page_images.py#L29'>tools/setup/generate_landing_page_images.py:29:21:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/tools/setup/generate_zulip_bots_static_files.py#L48'>tools/setup/generate_zulip_bots_static_files.py:48:20:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/data_import/mattermost.py#L877'>zerver/data_import/mattermost.py:877:8:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/data_import/slack.py#L1498'>zerver/data_import/slack.py:1498:8:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/data_import/slack.py#L840'>zerver/data_import/slack.py:840:22:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/lib/sounds.py#L10'>zerver/lib/sounds.py:10:22:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/management/commands/compilemessages.py#L98'>zerver/management/commands/compilemessages.py:98:23:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/management/commands/convert_mattermost_data.py#L61'>zerver/management/commands/convert_mattermost_data.py:61:12:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/management/commands/convert_rocketchat_data.py#L39'>zerver/management/commands/convert_rocketchat_data.py:39:12:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/management/commands/export.py#L138'>zerver/management/commands/export.py:138:20:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/management/commands/export_single_user.py#L41'>zerver/management/commands/export_single_user.py:41:47:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/tests/test_delete_unclaimed_attachments.py#L75'>zerver/tests/test_delete_unclaimed_attachments.py:75:17:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/tests/test_delete_unclaimed_attachments.py#L94'>zerver/tests/test_delete_unclaimed_attachments.py:94:17:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
+ <a href='https://github.com/zulip/zulip/blob/b4bb708c1453d0edfe2c4e82902480371c47134e/zerver/tests/test_import_export.py#L263'>zerver/tests/test_import_export.py:263:30:</a> PTH208 Use `pathlib.Path.iterdir()` instead.
... 5 additional changes omitted for project
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PTH208 | 59 | 59 | 0 | 0 | 0 |</p>
</p>
</details>

<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-11 19:39</div>
            <div class="timeline-body"><p>The ecosystem checks look like true positives. In one case there's even a call to <code>str</code> on a <code>Path</code> inside the call to <code>os.listdir</code>.</p>
<p>It might be nice to auto-fix some of these cases, but I don't think there are too many hits to accept it without a fix. A naive fix could lead to some awkward code anyway, like in the <code>str</code> example above (e.g. <code>Path(str(...)).iterdir()</code>).</p>
<p>I don't <em>personally</em> find the <code>if</code> cases to be a readability improvement (I like <code>if os.listdir(p)</code> better than <code>if any(p.iterdir())</code>), but I guess that's what opinionated rules are for.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-03-12 07:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @ntBre on 2025-03-12 12:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-03-12 12:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-03-12 12:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 19:49:32 UTC
    </footer>
</body>
</html>
