<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update dependency ruff to v0.8.1 - astral-sh/ruff #14717</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update dependency ruff to v0.8.1</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/14717">#14717</a>
        opened by <a href="https://github.com/renovate">@renovate</a>
        on 2024-12-02 01:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/renovate">@renovate</a></div>
            <div class="timeline-body"><p>This PR contains the following updates:</p>
<p>| Package | Change | Age | Adoption | Passing | Confidence |
|---|---|---|---|---|---|
| <a href="https://docs.astral.sh/ruff">ruff</a> (<a href="https://redirect.github.com/astral-sh/ruff">source</a>, <a href="https://redirect.github.com/astral-sh/ruff/blob/main/CHANGELOG.md">changelog</a>) | <code>==0.7.4</code> -&gt; <code>==0.8.1</code> | <a href="https://docs.renovatebot.com/merge-confidence/"><img src="https://developer.mend.io/api/mc/badges/age/pypi/ruff/0.8.1?slim=true" alt="age"></a> | <a href="https://docs.renovatebot.com/merge-confidence/"><img src="https://developer.mend.io/api/mc/badges/adoption/pypi/ruff/0.8.1?slim=true" alt="adoption"></a> | <a href="https://docs.renovatebot.com/merge-confidence/"><img src="https://developer.mend.io/api/mc/badges/compatibility/pypi/ruff/0.7.4/0.8.1?slim=true" alt="passing"></a> | <a href="https://docs.renovatebot.com/merge-confidence/"><img src="https://developer.mend.io/api/mc/badges/confidence/pypi/ruff/0.7.4/0.8.1?slim=true" alt="confidence"></a> |</p>
<hr>
Release Notes

astral-sh/ruff (ruff)

<a href="https://redirect.github.com/astral-sh/ruff/blob/HEAD/CHANGELOG.md#081"><code>v0.8.1</code></a>
<p><a href="https://redirect.github.com/astral-sh/ruff/compare/0.8.0...0.8.1">Compare Source</a></p>
Preview features
<ul>
<li>Formatter: Avoid invalid syntax for format-spec with quotes for all Python versions (<a href="https://redirect.github.com/astral-sh/ruff/pull/14625">#â€‹14625</a>)</li>
<li>Formatter: Consider quotes inside format-specs when choosing the quotes for an f-string (<a href="https://redirect.github.com/astral-sh/ruff/pull/14493">#â€‹14493</a>)</li>
<li>Formatter: Do not consider f-strings with escaped newlines as multiline (<a href="https://redirect.github.com/astral-sh/ruff/pull/14624">#â€‹14624</a>)</li>
<li>Formatter: Fix f-string formatting in assignment statement (<a href="https://redirect.github.com/astral-sh/ruff/pull/14454">#â€‹14454</a>)</li>
<li>Formatter: Fix unnecessary space around power operator (<code>**</code>) in overlong f-string expressions (<a href="https://redirect.github.com/astral-sh/ruff/pull/14489">#â€‹14489</a>)</li>
<li>[<code>airflow</code>] Avoid implicit <code>schedule</code> argument to <code>DAG</code> and <code>@dag</code> (<code>AIR301</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14581">#â€‹14581</a>)</li>
<li>[<code>flake8-builtins</code>] Exempt private built-in modules (<code>A005</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14505">#â€‹14505</a>)</li>
<li>[<code>flake8-pytest-style</code>] Fix <code>pytest.mark.parametrize</code> rules to check calls instead of decorators (<a href="https://redirect.github.com/astral-sh/ruff/pull/14515">#â€‹14515</a>)</li>
<li>[<code>flake8-type-checking</code>] Implement <code>runtime-cast-value</code> (<code>TC006</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14511">#â€‹14511</a>)</li>
<li>[<code>flake8-type-checking</code>] Implement <code>unquoted-type-alias</code> (<code>TC007</code>) and <code>quoted-type-alias</code> (<code>TC008</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/12927">#â€‹12927</a>)</li>
<li>[<code>flake8-use-pathlib</code>] Recommend <code>Path.iterdir()</code> over <code>os.listdir()</code> (<code>PTH208</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14509">#â€‹14509</a>)</li>
<li>[<code>pylint</code>] Extend <code>invalid-envvar-default</code> to detect <code>os.environ.get</code> (<code>PLW1508</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14512">#â€‹14512</a>)</li>
<li>[<code>pylint</code>] Implement <code>len-test</code> (<code>PLC1802</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14309">#â€‹14309</a>)</li>
<li>[<code>refurb</code>] Fix bug where methods defined using lambdas were flagged by <code>FURB118</code> (<a href="https://redirect.github.com/astral-sh/ruff/pull/14639">#â€‹14639</a>)</li>
<li>[<code>ruff</code>] Auto-add <code>r</code> prefix when string has no backslashes for <code>unraw-re-pattern</code> (<code>RUF039</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14536">#â€‹14536</a>)</li>
<li>[<code>ruff</code>] Implement <code>invalid-assert-message-literal-argument</code> (<code>RUF040</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14488">#â€‹14488</a>)</li>
<li>[<code>ruff</code>] Implement <code>unnecessary-nested-literal</code> (<code>RUF041</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14323">#â€‹14323</a>)</li>
<li>[<code>ruff</code>] Implement <code>unnecessary-regular-expression</code> (<code>RUF055</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14659">#â€‹14659</a>)</li>
</ul>
Rule changes
<ul>
<li>Ignore more rules for stub files (<a href="https://redirect.github.com/astral-sh/ruff/pull/14541">#â€‹14541</a>)</li>
<li>[<code>pep8-naming</code>] Eliminate false positives for single-letter names (<code>N811</code>, <code>N814</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14584">#â€‹14584</a>)</li>
<li>[<code>pyflakes</code>] Avoid false positives in <code>@no_type_check</code> contexts (<code>F821</code>, <code>F722</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14615">#â€‹14615</a>)</li>
<li>[<code>ruff</code>] Detect redirected-noqa in file-level comments (<code>RUF101</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14635">#â€‹14635</a>)</li>
<li>[<code>ruff</code>] Mark fixes for <code>unsorted-dunder-all</code> and <code>unsorted-dunder-slots</code> as unsafe when there are complex comments in the sequence (<code>RUF022</code>, <code>RUF023</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14560">#â€‹14560</a>)</li>
</ul>
Bug fixes
<ul>
<li>Avoid fixing code to <code>None | None</code> for <code>redundant-none-literal</code> (<code>PYI061</code>) and <code>never-union</code> (<code>RUF020</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14583">#â€‹14583</a>, <a href="https://redirect.github.com/astral-sh/ruff/pull/14589">#â€‹14589</a>)</li>
<li>[<code>flake8-bugbear</code>] Fix <code>mutable-contextvar-default</code> to resolve annotated function calls properly (<code>B039</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14532">#â€‹14532</a>)</li>
<li>[<code>flake8-pyi</code>, <code>ruff</code>] Fix traversal of nested literals and unions (<code>PYI016</code>, <code>PYI051</code>, <code>PYI055</code>, <code>PYI062</code>, <code>RUF041</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14641">#â€‹14641</a>)</li>
<li>[<code>flake8-pyi</code>] Avoid rewriting invalid type expressions in <code>unnecessary-type-union</code> (<code>PYI055</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14660">#â€‹14660</a>)</li>
<li>[<code>flake8-type-checking</code>] Avoid syntax errors and type checking problem for quoted annotations autofix (<code>TC003</code>, <code>TC006</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14634">#â€‹14634</a>)</li>
<li>[<code>pylint</code>] Do not wrap function calls in parentheses in the fix for unnecessary-dunder-call (<code>PLC2801</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14601">#â€‹14601</a>)</li>
<li>[<code>ruff</code>] Handle <code>attrs</code>&#x27;s <code>auto_attribs</code> correctly (<code>RUF009</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14520">#â€‹14520</a>)</li>
</ul>
<a href="https://redirect.github.com/astral-sh/ruff/blob/HEAD/CHANGELOG.md#080"><code>v0.8.0</code></a>
<p><a href="https://redirect.github.com/astral-sh/ruff/compare/0.7.4...0.8.0">Compare Source</a></p>
<p>Check out the <a href="https://astral.sh/blog/ruff-v0.8.0">blog post</a> for a migration guide and overview of the changes!</p>
Breaking changes
<p>See also, the &quot;Remapped rules&quot; section which may result in disabled rules.</p>
<ul>
<li><p><strong>Default to Python 3.9</strong></p>
<p>Ruff now defaults to Python 3.9 instead of 3.8 if no explicit Python version is configured using <a href="https://docs.astral.sh/ruff/settings/#target-version"><code>ruff.target-version</code></a> or <a href="https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#python-requires"><code>project.requires-python</code></a> (<a href="https://redirect.github.com/astral-sh/ruff/pull/13896">#â€‹13896</a>)</p>
</li>
<li><p><strong>Changed location of <code>pydoclint</code> diagnostics</strong></p>
<p><a href="https://docs.astral.sh/ruff/rules/#pydoclint-doc"><code>pydoclint</code></a> diagnostics now point to the first-line of the problematic docstring. Previously, this was not the case.</p>
<p>If you&#x27;ve opted into these preview rules but have them suppressed using
<a href="https://docs.astral.sh/ruff/linter/#error-suppression"><code>noqa</code></a> comments in
some places, this change may mean that you need to move the <code>noqa</code> suppression
comments. Most users should be unaffected by this change.</p>
</li>
<li><p><strong>Use XDG (i.e. <code>~/.local/bin</code>) instead of the Cargo home directory in the standalone installer</strong></p>
<p>Previously, Ruff&#x27;s installer used <code>$CARGO_HOME</code> or <code>~/.cargo/bin</code> for its target install directory. Now, Ruff will be installed into <code>$XDG_BIN_HOME</code>, <code>$XDG_DATA_HOME/../bin</code>, or <code>~/.local/bin</code> (in that order).</p>
<p>This change is only relevant to users of the standalone Ruff installer (using the shell or PowerShell script). If you installed Ruff using uv or pip, you should be unaffected.</p>
</li>
<li><p><strong>Changes to the line width calculation</strong></p>
<p>Ruff now uses a new version of the <a href="https://redirect.github.com/unicode-rs/unicode-width">unicode-width</a> Rust crate to calculate the line width. In very rare cases, this may lead to lines containing Unicode characters being reformatted, or being considered too long when they were not before (<a href="https://docs.astral.sh/ruff/rules/line-too-long/"><code>E501</code></a>).</p>
</li>
</ul>
Removed Rules
<p>The following deprecated rules have been removed:</p>
<ul>
<li><a href="https://docs.astral.sh/ruff/rules/missing-type-self/"><code>missing-type-self</code></a> (<code>ANN101</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/missing-type-cls/"><code>missing-type-cls</code></a> (<code>ANN102</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/syntax-error/"><code>syntax-error</code></a> (<code>E999</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/pytest-missing-fixture-name-underscore/"><code>pytest-missing-fixture-name-underscore</code></a> (<code>PT004</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/pytest-incorrect-fixture-name-underscore/"><code>pytest-incorrect-fixture-name-underscore</code></a> (<code>PT005</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/unpacked-list-comprehension/"><code>unpacked-list-comprehension</code></a> (<code>UP027</code>)</li>
</ul>
Remapped rules
<p>The following rules have been remapped to new rule codes:</p>
<ul>
<li><a href="https://docs.astral.sh/ruff/rules/#flake8-type-checking-tc"><code>flake8-type-checking</code></a>: <code>TCH</code> to <code>TC</code></li>
</ul>
Stabilization
<p>The following rules have been stabilized and are no longer in preview:</p>
<ul>
<li><a href="https://docs.astral.sh/ruff/rules/builtin-import-shadowing/"><code>builtin-import-shadowing</code></a> (<code>A004</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/mutable-contextvar-default/"><code>mutable-contextvar-default</code></a> (<code>B039</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/fast-api-redundant-response-model/"><code>fast-api-redundant-response-model</code></a> (<code>FAST001</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/fast-api-non-annotated-dependency/"><code>fast-api-non-annotated-dependency</code></a> (<code>FAST002</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/dict-index-missing-items/"><code>dict-index-missing-items</code></a> (<code>PLC0206</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/pep484-style-positional-only-argument/"><code>pep484-style-positional-only-argument</code></a> (<code>PYI063</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/redundant-final-literal/"><code>redundant-final-literal</code></a> (<code>PYI064</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/bad-version-info-order/"><code>bad-version-info-order</code></a> (<code>PYI066</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/parenthesize-chained-operators/"><code>parenthesize-chained-operators</code></a> (<code>RUF021</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/unsorted-dunder-all/"><code>unsorted-dunder-all</code></a> (<code>RUF022</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/unsorted-dunder-slots/"><code>unsorted-dunder-slots</code></a> (<code>RUF023</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/assert-with-print-message/"><code>assert-with-print-message</code></a> (<code>RUF030</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/unnecessary-default-type-args/"><code>unnecessary-default-type-args</code></a> (<code>UP043</code>)</li>
</ul>
<p>The following behaviors have been stabilized:</p>
<ul>
<li><a href="https://docs.astral.sh/ruff/rules/ambiguous-variable-name/"><code>ambiguous-variable-name</code></a> (<code>E741</code>): Violations in stub files are now ignored. Stub authors typically don&#x27;t control variable names.</li>
<li><a href="https://docs.astral.sh/ruff/rules/printf-string-formatting/"><code>printf-string-formatting</code></a> (<code>UP031</code>): Report all <code>printf</code>-like usages even if no autofix is available</li>
</ul>
<p>The following fixes have been stabilized:</p>
<ul>
<li><a href="https://docs.astral.sh/ruff/rules/zip-instead-of-pairwise/"><code>zip-instead-of-pairwise</code></a> (<code>RUF007</code>)</li>
</ul>
Preview features
<ul>
<li>[<code>flake8-datetimez</code>] Exempt <code>min.time()</code> and <code>max.time()</code> (<code>DTZ901</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14394">#â€‹14394</a>)</li>
<li>[<code>flake8-pie</code>] Mark fix as unsafe if the following statement is a string literal (<code>PIE790</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14393">#â€‹14393</a>)</li>
<li>[<code>flake8-pyi</code>] New rule <code>redundant-none-literal</code> (<code>PYI061</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14316">#â€‹14316</a>)</li>
<li>[<code>flake8-pyi</code>] Add autofix for <code>redundant-numeric-union</code> (<code>PYI041</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14273">#â€‹14273</a>)</li>
<li>[<code>ruff</code>] New rule <code>map-int-version-parsing</code> (<code>RUF048</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14373">#â€‹14373</a>)</li>
<li>[<code>ruff</code>] New rule <code>redundant-bool-literal</code> (<code>RUF038</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14319">#â€‹14319</a>)</li>
<li>[<code>ruff</code>] New rule <code>unraw-re-pattern</code> (<code>RUF039</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14446">#â€‹14446</a>)</li>
<li>[<code>pycodestyle</code>] Exempt <code>pytest.importorskip()</code> calls (<code>E402</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14474">#â€‹14474</a>)</li>
<li>[<code>pylint</code>] Autofix suggests using sets when possible (<code>PLR1714</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14372">#â€‹14372</a>)</li>
</ul>
Rule changes
<ul>
<li><a href="https://docs.astral.sh/ruff/rules/invalid-pyproject-toml/"><code>invalid-pyproject-toml</code></a> (<code>RUF200</code>): Updated to reflect the provisionally accepted <a href="https://peps.python.org/pep-0639/">PEP 639</a>.</li>
<li>[<code>flake8-pyi</code>] Avoid panic in unfixable case (<code>PYI041</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14402">#â€‹14402</a>)</li>
<li>[<code>flake8-type-checking</code>] Correctly handle quotes in subscript expression when generating an autofix (<a href="https://redirect.github.com/astral-sh/ruff/pull/14371">#â€‹14371</a>)</li>
<li>[<code>pylint</code>] Suggest correct autofix for <code>__contains__</code> (<code>PLC2801</code>) (<a href="https://redirect.github.com/astral-sh/ruff/pull/14424">#â€‹14424</a>)</li>
</ul>
Configuration
<ul>
<li>Ruff now emits a warning instead of an error when a configuration <a href="https://docs.astral.sh/ruff/settings/#lint_ignore"><code>ignore</code></a>s a rule that has been removed (<a href="https://redirect.github.com/astral-sh/ruff/pull/14435">#â€‹14435</a>)</li>
<li>Ruff now validates that <code>lint.flake8-import-conventions.aliases</code> only uses valid module names and aliases (<a href="https://redirect.github.com/astral-sh/ruff/pull/14477">#â€‹14477</a>)</li>
</ul>


<hr>
Configuration
<p>ðŸ“… <strong>Schedule</strong>: Branch creation - &quot;before 4am on Monday&quot; (UTC), Automerge - At any time (no schedule defined).</p>
<p>ðŸš¦ <strong>Automerge</strong>: Disabled by config. Please merge this manually once you are satisfied.</p>
<p>â™» <strong>Rebasing</strong>: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.</p>
<p>ðŸ”• <strong>Ignore</strong>: Close this PR and you won&#x27;t be reminded about this update again.</p>
<hr>
<ul>
<li>[ ] If you want to rebase/retry this PR, check this box</li>
</ul>
<hr>
<p>This PR was generated by <a href="https://mend.io/renovate/">Mend Renovate</a>. View the <a href="https://developer.mend.io/github/astral-sh/ruff">repository job log</a>.</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/renovate[bot]">@renovate[bot]</a> on 2024-12-02 01:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-02 01:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-02 01:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-12-02 01:13</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:09:04 UTC
    </footer>
</body>
</html>
