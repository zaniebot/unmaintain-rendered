<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cache build artifacts using Swatinem/rust-cache@v1 - astral-sh/ruff #1750</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Cache build artifacts using Swatinem/rust-cache@v1</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1750">#1750</a>
        opened by <a href="https://github.com/ducaale">@ducaale</a>
        on 2023-01-09 19:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ducaale">@ducaale</a></div>
            <div class="timeline-body"><p>This GitHub Action caches build artifacts in addition to dependencies which halves the CI duration time.</p>
<p>| job | <a href="https://github.com/charliermarsh/ruff/actions/runs/3875785133">Before</a> | <a href="https://github.com/charliermarsh/ruff/actions/runs/3877340917">After</a> |
|-----|---------|------|
cargo build | 7m | 4m
cargo fmt |  41s | 30s
cargo clippy | 4m 38s | 1m 30s
cargo test | 10m 54s | 3m 27s
maturin build | 4m 36s | 1m 15s
Spell Check with typos | 29s | 25s</p>
<p>Resolves #1743</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-01-09 19:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>.github/workflows/ci.yaml</code>:85 on 2023-01-09 19:51</div>
            <div class="timeline-body"><p>Does this need <code>- uses: Swatinem/rust-cache@v1</code> too?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @ducaale on 2023-01-09 19:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-09 20:18</div>
            <div class="timeline-body"><p>@ducaale - Do you mind quickly summarizing the before/after performance? Thank you for this!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-01-09 20:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-09 20:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-09 20:36</div>
            <div class="timeline-body"><p>Awesome, thank you! (I created and closed out a separate issue, and marked the item as complete in #1743, since I didn't want to close that quite yet given that it had a few more sub-items.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-01-09 20:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ducaale">@ducaale</a> on 2023-01-09 20:51</div>
            <div class="timeline-body"><p>I have added a comparison table to the PR description (It might not be a fair comparison since I used a random action run in the past)</p>
<blockquote>
<p>(I created and closed out a separate issue, and marked the item as complete in https://github.com/charliermarsh/ruff/issues/1743, since I didn't want to close that quite yet given that it had a few more sub-items.)</p>
</blockquote>
<p>Sounds good. Note that <code>insta</code> is now being cached by <code>Swatinem/rust-cache@v1</code>, so the only things left to do are using <code>cargo-nextest</code> and removing the <code>--release</code> flag.</p>
<p>Lastly, it might be worth taking a look at https://www.reillywood.com/blog/rust-faster-ci/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-09 22:27</div>
            <div class="timeline-body"><p>Thank you, that's a huge difference! So cool.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-09 22:28</div>
            <div class="timeline-body"><p>I'm just curious -- did you see my tweet about https://github.com/charliermarsh/ruff/issues/1743? Or stumble upon this organically?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-09 22:29</div>
            <div class="timeline-body"><p>(If you have a Twitter and want to be tagged, I'll tweet about this and tag you :))</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ducaale">@ducaale</a> on 2023-01-10 19:33</div>
            <div class="timeline-body"><blockquote>
<p>I'm just curious -- did you see my tweet about https://github.com/charliermarsh/ruff/issues/1743? Or stumble upon this organically?</p>
</blockquote>
<p>Yes, this was prompted by the tweet about ruff's CI performance. We did a similar thing for xh's CI in https://github.com/ducaale/xh/pull/251</p>
<blockquote>
<p>(If you have a Twitter and want to be tagged, I'll tweet about this and tag you :))</p>
</blockquote>
<p>Thanks, my twitter handle is @ducaale555 but I don't think this PR is worth tweeting about. All the credit goes to https://www.reillywood.com/blog/rust-faster-ci/</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:55:28 UTC
    </footer>
</body>
</html>
