<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GH-Action - astral-sh/ruff #3820</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>GH-Action</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/3820">#3820</a>
        opened by <a href="https://github.com/brucearctor">@brucearctor</a>
        on 2023-03-30 17:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/brucearctor">@brucearctor</a></div>
            <div class="timeline-body"><p>Accidentally closed:  <a href="https://github.com/charliermarsh/ruff/pull/3756">charliermarsh/ruff#3756</a> ( and didn&#x27;t seem like I was able to re-open it )</p>
<p>Addresses:  <a href="https://github.com/charliermarsh/ruff/issues/3289">charliermarsh/ruff#3289</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-03-30 17:58</div>
            <div class="timeline-body">PR Check Results
Benchmark
Linux
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.00     16.7±0.25ms     2.4 MB/sec    1.00     16.7±0.19ms     2.4 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      4.2±0.03ms     4.0 MB/sec    1.01      4.2±0.04ms     3.9 MB/sec
linter/all-rules/numpy/globals.py          1.00    530.8±5.55µs     5.6 MB/sec    1.01    538.0±4.93µs     5.5 MB/sec
linter/all-rules/pydantic/types.py         1.00      7.0±0.10ms     3.6 MB/sec    1.02      7.2±0.08ms     3.5 MB/sec
linter/default-rules/large/dataset.py      1.00      8.5±0.08ms     4.8 MB/sec    1.01      8.6±0.10ms     4.7 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00  1910.5±17.03µs     8.7 MB/sec    1.01  1936.6±14.85µs     8.6 MB/sec
linter/default-rules/numpy/globals.py      1.00    213.3±2.95µs    13.8 MB/sec    1.01    214.7±3.37µs    13.7 MB/sec
linter/default-rules/pydantic/types.py     1.00      3.9±0.04ms     6.5 MB/sec    1.01      3.9±0.05ms     6.5 MB/sec
</code></pre>
Windows
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.01     14.8±0.38ms     2.8 MB/sec    1.00     14.7±0.29ms     2.8 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      3.8±0.08ms     4.4 MB/sec    1.00      3.8±0.08ms     4.4 MB/sec
linter/all-rules/numpy/globals.py          1.00   451.3±12.56µs     6.5 MB/sec    1.00   449.2±17.41µs     6.6 MB/sec
linter/all-rules/pydantic/types.py         1.01      6.3±0.19ms     4.1 MB/sec    1.00      6.2±0.31ms     4.1 MB/sec
linter/default-rules/large/dataset.py      1.01      7.5±0.11ms     5.4 MB/sec    1.00      7.4±0.09ms     5.5 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.01  1637.7±34.09µs    10.2 MB/sec    1.00  1628.3±37.28µs    10.2 MB/sec
linter/default-rules/numpy/globals.py      1.00    177.1±6.89µs    16.7 MB/sec    1.01    179.4±9.02µs    16.4 MB/sec
linter/default-rules/pydantic/types.py     1.01      3.4±0.09ms     7.4 MB/sec    1.00      3.4±0.11ms     7.5 MB/sec
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssweber">@ssweber</a> on 2023-03-31 10:41</div>
            <div class="timeline-body"><p>(this open pull is missing the docs. didn’t know if that was intentional or an oversight)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-31 14:35</div>
            <div class="timeline-body"><p>Ok, sorry for the back-and-forth on this, but I&#x27;ve discussed it with @MichaReiser and @konstin and we&#x27;ve decided that we&#x27;d prefer to use a Pyright-like setup. That is, we&#x27;d prefer to put the action in https://github.com/charliermarsh/ruff-action, and point to it from the docs. The benefit is that we can version the action separately. As-is, we wouldn&#x27;t really have any way to signal changes in the action&#x27;s API or configuration, since it&#x27;d be coupled to Ruff versions.</p>
<p>Are you open to PR&#x27;ing the action YAML in that repo, and then docs here? Then I can publish it to the Marketplace?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brucearctor">@brucearctor</a> on 2023-03-31 15:33</div>
            <div class="timeline-body"><blockquote>
<p>(this open pull is missing the docs. didn’t know if that was intentional or an oversight)</p>
</blockquote>
<p>Oversight ...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brucearctor">@brucearctor</a> on 2023-03-31 15:36</div>
            <div class="timeline-body"><blockquote>
<p>Ok, sorry for the back-and-forth on this, but I&#x27;ve discussed it with @MichaReiser and @konstin and we&#x27;ve decided that we&#x27;d prefer to use a Pyright-like setup. That is, we&#x27;d prefer to put the action in https://github.com/charliermarsh/ruff-action, and point to it from the docs. The benefit is that we can version the action separately. As-is, we wouldn&#x27;t really have any way to signal changes in the action&#x27;s API or configuration, since it&#x27;d be coupled to Ruff versions.</p>
<p>Are you open to PR&#x27;ing the action YAML in that repo, and then docs here? Then I can publish it to the Marketplace?</p>
</blockquote>
<p>OK - can mimick pyright setup.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brucearctor">@brucearctor</a> on 2023-03-31 16:28</div>
            <div class="timeline-body"><p>Array vs String.  Where are people at on preference, @MichaReiser , @charliermarsh , @konstin ?  Ex: <a href="https://github.com/charliermarsh/ruff/pull/3756">charliermarsh/ruff#3756</a>#discussion_r1151500881 ...</p>
<p>I imagine better to just put in place what is most desired than needing to refactor/version-bump to accommodate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-31 16:50</div>
            <div class="timeline-body"><p>It looks like Pyright uses a string and calls it <code>extra-args</code>. Black uses a string and calls it <code>options</code> (that&#x27;s where we got the current setup AFAICT). Personally I&#x27;m fine to use a string. I think for me <code>args</code> or <code>extra-args</code> is more clearly &quot;command-line arguments&quot; vs. options which I would expect to be an object. <code>extra-args</code> seems reasonable if we&#x27;re passing in <em>some</em> arguments via <code>src</code>.</p>
<p>So that to me suggests <code>extra-args</code>, a string. What do you think?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brucearctor">@brucearctor</a> on 2023-03-31 17:02</div>
            <div class="timeline-body"><p>That works: I&#x27;ll get things cleaned up and PR together - if not today should be able to address over the weekend.  Naturally, if others have strong opinions for another course of action, please share.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-31 17:05</div>
            <div class="timeline-body"><p>Thank you, and no rush. I know it might be a little frustrating to have back-and-forth but API decisions like this tend to be an iterative process as we build agreement. Really appreciate your work here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brucearctor">@brucearctor</a> on 2023-03-31 17:18</div>
            <div class="timeline-body"><p>This is nothing new, API discussions generally need to occur and consensus built - esp. for a public facing interface that shouldn&#x27;t have breaking changes too often.</p>
<p>Plenty familiar as I&#x27;m a committer and <a href="https://www.apache.org/dev/pmc.html">PMC</a> member ( or equivalent ) on a number of OSS projects [ esp <a href="https://www.apache.org/">ASF</a> ], and often guide OSS journeys, or lead intro to OSS trainings.  It just takes a little bit to figure out how people want to work/collaborate ( the specifics of any given &quot;community&quot; )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brucearctor">@brucearctor</a> on 2023-03-31 19:22</div>
            <div class="timeline-body"><p>Upon further reflection, I think we should go with <code>args</code> ...  <code>extra-args</code> seems slightly/potentially confusing.  &quot;Extra&quot; has the connotation of more/additional, yet the args would become the args not append to something existing.  Sound good @charliermarsh ?</p>
<p>Anything else you can think of?  Otherwise, should be able to mimic pyright setup easily.  THEN can follow up with more improvements, additional docs [ ex: to cover the not basic use-cases, etc ]</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssweber">@ssweber</a> on 2023-03-31 21:21</div>
            <div class="timeline-body"><p>Is there a good reason to split up the command line args?</p>
<p>hope I’m not being a bother.</p>
<pre><code>with:
    command-line-args: “check .”

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brucearctor">@brucearctor</a> on 2023-03-31 21:36</div>
            <div class="timeline-body"><p>@ssweber -- Comments welcome, at least for consideration.</p>
<pre><code>name: Ruff

on: [push, pull_request]

jobs:
  ruff:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: charliermarsh/ruff@v0
</code></pre>
<p>^^ as written that runs <code>ruff check .</code></p>
<pre><code>name: Ruff

on: [push, pull_request]

jobs:
  ruff:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: charliermarsh/ruff@v0
        with:
            src: /path/to/code/
</code></pre>
<p>^^ would run <code>ruff check /path/to/code/</code></p>
<pre><code>name: Ruff

on: [push, pull_request]

jobs:
  ruff:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: charliermarsh/ruff@v0
        with:
            args: --select ANN
</code></pre>
<p>would run <code>ruff --select ANN .</code> ( I&#x27;ll eventually add docs, and extra information for how this action can actually accommodate the <code>--fix use case</code>, but that requires utilizing some permissions and other actions, so a phase 2 thing :-) )</p>
<p>etc.</p>
<p>Then you can update either the path, or the args ( or version ) independent of eachother.  Why would I want to have to specify a &#x27;.&#x27; if that&#x27;s the most likely setting for users, it is a nice default and better to not have to mention unless wanting to override.  Naturally, I&#x27;ll cleanup docs to include these things.</p>
<p>Did that answer your question?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssweber">@ssweber</a> on 2023-03-31 22:14</div>
            <div class="timeline-body"><p>Yes, thank you for the detailed response!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/brucearctor">@brucearctor</a> on 2023-04-03 03:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:53:06 UTC
    </footer>
</body>
</html>
