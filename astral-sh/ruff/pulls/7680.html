<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Always prefer double quotes for docstrings and triple-quoted srings - astral-sh/ruff #7680</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Always prefer double quotes for docstrings and triple-quoted srings</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/7680">#7680</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-09-27 20:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-27 20:51</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>At present, <code>quote-style</code> is used universally. However, <a href="https://peps.python.org/pep-0008/">PEP 8</a> and <a href="https://peps.python.org/pep-0257/">PEP 257</a> suggest that while either single or double quotes are acceptable in general (as long as they're consistent), docstrings and triple-quoted strings should always use double quotes. In our research, the vast majority of Ruff users that enable the <code>flake8-quotes</code> rules only enable them for inline strings (i.e., non-triple-quoted strings).</p>
<p>Additionally, many Black forks (like Blue and Pyink) use double quotes for docstrings and triple-quoted strings.</p>
<p>Our decision for now is to always prefer double quotes for triple-quoted strings (which should include docstrings). Based on feedback, we may consider adding additional options (e.g., a <code>&quot;preserve&quot;</code> mode, to avoid changing quotes; or a <code>&quot;multiline-quote-style&quot;</code> to override this).</p>
<p>Closes https://github.com/astral-sh/ruff/issues/7615.</p>
<h2>Test Plan</h2>
<p><code>cargo test</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @charliermarsh on 2023-09-27 20:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @charliermarsh on 2023-09-27 20:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @charliermarsh on 2023-09-27 20:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-09-27 20:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_python_formatter/src/expression/string.rs</code>:334 on 2023-09-27 20:51</div>
            <div class="timeline-body"><p>I think this logic could go at multiple different levels in this call stack, but this felt simplest.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2023-09-27 21:02</div>
            <div class="timeline-body"><h2><a href="https://codspeed.io/astral-sh/ruff/branches/charlie/quote-style">CodSpeed Performance Report</a></h2>
<h3>Merging #7680 will <strong>not alter performance</strong></h3>
<p><sub>Comparing <code>charlie/quote-style</code> (f546496) with <code>main</code> (46b85ab)</sub></p>
<h3>Summary</h3>
<p><code>✅ 25</code> untouched benchmarks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2023-09-27 21:08</div>
            <div class="timeline-body"><p>i thought i'd just quickly implement this tomorrow and now you've already done it :D</p>
<p>not opinionated where the if-triple-quotes part goes, maybe micha has opinions though</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-09-27 21:12</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>✅ ecosystem check detected no changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-27 22:09</div>
            <div class="timeline-body"><p>@konstin - Lol don't worry, there are plenty of accepted formatter issues now :D</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_python_formatter/src/expression/string.rs</code>:330 on 2023-09-28 06:56</div>
            <div class="timeline-body"><p>Nit: The variable here is called <code>preferred_style</code> but it is called <code>configured_style</code> in <code>peferred_quotes_raw</code> and <code>preferred_quotes</code>.</p>
<p>I would be okay calling it <code>configured_style</code> or maybe <code>default_style</code> to make it clear it's what we would default to.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2023-09-28 06:57</div>
            <div class="timeline-body"><p>Should we rename the <code>quote-style</code> setting to <code>inline-string-quote-style</code> (or similar) to align with flake8-quotes? The one issue I see with it is that it ties our hands with adding a <code>preserve</code> option, because that would then only apply to inline strings and not strings.</p>
<p>Should we mark this as breaking? It's not breaking as far as our versioning policy is concerned but it's worth giving it an explicit call out in the changelog.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-09-28 14:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_python_formatter/src/expression/string.rs</code>:330 on 2023-09-28 14:53</div>
            <div class="timeline-body"><p>Yeah I went back and forth on these a few times :joy:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">breaking</span> added by @charliermarsh on 2023-09-28 18:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-28 19:11</div>
            <div class="timeline-body"><p>I'm on the fence but let's leave it as <code>quote-style</code> for now... We may have to change it either way depending on what we learn (i.e., if we had <code>multiline-quote-style</code>, then we need to rename this; if we add <code>preserve</code>, then we'd probably need to rename away from <code>inline-quote-style</code>), but if we can get away with it, <code>quote-style</code> is simpler and more obvious.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-09-28 19:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-09-28 19:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-09-28 19:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 02:39:47 UTC
    </footer>
</body>
</html>
