<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>deps: Update cc - astral-sh/ruff #14794</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>deps: Update cc</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/14794">#14794</a>
        opened by <a href="https://github.com/ognevny">@ognevny</a>
        on 2024-12-05 17:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ognevny">@ognevny</a></div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>in unknown moment older versions became broken for windows-gnullvm targets. this update shouldn't break anything</p>
<!-- What's the purpose of the change? What does it do, and why? -->

<h2>Test Plan</h2>
<p>successfully built for windows-gnullvm with <code>cargo build</code></p>
<!-- How was it tested? -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-05 17:06</div>
            <div class="timeline-body"><p>Can you share more information about the breakage and how it's fixed upstream?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-12-05 17:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ognevny">@ognevny</a> on 2024-12-05 17:09</div>
            <div class="timeline-body"><blockquote>
<p>Can you share more information about the breakage</p>
</blockquote>
<details><summary>from build log</summary>

<pre><code>  The following warnings were emitted during compilation:
  
  warning: libmimalloc-sys@0.1.39: clang: error: version 'llvm' in target triple 'x86_64-pc-windows-gnullvm' is invalid
  
  error: failed to run custom build command for `libmimalloc-sys v0.1.39`
  
  Caused by:
    process didn't exit successfully: `C:\_\B\src\ruff\target\release\build\libmimalloc-sys-d236219c533e2542\build-script-build` (exit code: 1)
    --- stdout
    OPT_LEVEL = Some(&quot;3&quot;)
    TARGET = Some(&quot;x86_64-pc-windows-gnullvm&quot;)
    HOST = Some(&quot;x86_64-pc-windows-gnullvm&quot;)
    cargo:rerun-if-env-changed=CC_x86_64-pc-windows-gnullvm
    CC_x86_64-pc-windows-gnullvm = None
    cargo:rerun-if-env-changed=CC_x86_64_pc_windows_gnullvm
    CC_x86_64_pc_windows_gnullvm = None
    cargo:rerun-if-env-changed=HOST_CC
    HOST_CC = None
    cargo:rerun-if-env-changed=CC
    CC = Some(&quot;clang&quot;)
    cargo:rerun-if-env-changed=CC_ENABLE_DEBUG_OUTPUT
    cargo:rerun-if-env-changed=CRATE_CC_NO_DEFAULTS
    CRATE_CC_NO_DEFAULTS = None
    DEBUG = Some(&quot;false&quot;)
    cargo:rerun-if-env-changed=CFLAGS_x86_64-pc-windows-gnullvm
    CFLAGS_x86_64-pc-windows-gnullvm = None
    cargo:rerun-if-env-changed=CFLAGS_x86_64_pc_windows_gnullvm
    CFLAGS_x86_64_pc_windows_gnullvm = None
    cargo:rerun-if-env-changed=HOST_CFLAGS
    HOST_CFLAGS = None
    cargo:rerun-if-env-changed=CFLAGS
    CFLAGS = Some(&quot;-march=nocona -msahf -mtune=generic -O2 -pipe -Wp,-D_FORTIFY_SOURCE=2 -fstack-protector-strong -Wp,-D__USE_MINGW_ANSI_STDIO=1&quot;)
    cargo:warning=clang: error: version 'llvm' in target triple 'x86_64-pc-windows-gnullvm' is invalid
  
    --- stderr
  
  
    error occurred: Command &quot;clang&quot; &quot;-O3&quot; &quot;--target=x86_64-pc-windows-gnullvm&quot; &quot;-ffunction-sections&quot; &quot;-fdata-sections&quot; &quot;-m64&quot; &quot;--target=x86_64-pc-windows-gnullvm&quot; &quot;-march=nocona&quot; &quot;-msahf&quot; &quot;-mtune=generic&quot; &quot;-O2&quot; &quot;-pipe&quot; &quot;-Wp,-D_FORTIFY_SOURCE=2&quot; &quot;-fstack-protector-strong&quot; &quot;-Wp,-D__USE_MINGW_ANSI_STDIO=1&quot; &quot;-I&quot; &quot;c_src/mimalloc/include&quot; &quot;-I&quot; &quot;c_src/mimalloc/src&quot; &quot;-DMI_DEBUG=0&quot; &quot;-o&quot; &quot;C:\\_\\B\\src\\ruff\\target\\release\\build\\libmimalloc-sys-75e0ec94b36494b9\\out\\98cfcaec7182b1d8-static.o&quot; &quot;-c&quot; &quot;c_src/mimalloc/src/static.c&quot; with args clang did not execute successfully (status code exit code: 1).
</code></pre>
</details>

<blockquote>
<p>how it's fixed upstream?</p>
</blockquote>
<p>I have absolutely no idea! maybe something that happened with newer rustc, I honestly don't understand what happened, it worked with windows-gnullvm in the past</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-12-05 17:12</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>✅ ecosystem check detected no format changes.</p>
<h3>Formatter (preview)</h3>
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-12-06 02:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-12-06 02:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @charliermarsh on 2024-12-06 02:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-12-06 04:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:08:16 UTC
    </footer>
</body>
</html>
