<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Format docs with ruff formatter - astral-sh/ruff #13087</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Format docs with ruff formatter</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/13087">#13087</a>
        opened by <a href="https://github.com/calumy">@calumy</a>
        on 2024-08-24 16:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/calumy">@calumy</a> on 2024-08-24 16:24</div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>Now that Ruff provides a formatter, there is no need to rely on Black to check that the docs are formatted correctly in <code>check_docs_formatted.py</code>. This PR swaps out Black for the Ruff formatter and updates inconsistencies between the two.</p>
<p>This PR will be a precursor to another PR (<a href="https://github.com/calumy/ruff/tree/format-pyi-in-docs">branch</a>), updating the <code>check_docs_formatted.py</code> script to check for pyi files, fixing #11568.</p>
<h2>Test Plan</h2>
<ul>
<li>CI to check that the docs are formatted correctly using the updated script.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-08-24 16:43</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>✅ ecosystem check detected no format changes.</p>
<h3>Formatter (preview)</h3>
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>scripts/check_docs_formatted.py</code>:141 on 2024-08-26 04:50</div>
            <div class="timeline-body"><p>I think we should use stdin instead of a temp file. You can find an example here:</p>
<p>https://github.com/astral-sh/ruff/blob/5af48337a566b493a8263ff4c641462035a3c558/scripts/fuzz-parser/fuzz.py#L41-L46</p>
<p>This removes the need for handling temp files :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>scripts/check_docs_formatted.py</code>:299 on 2024-08-26 04:52</div>
            <div class="timeline-body"><p>Should we instead use the latest released version? That way we don't need to wait for the build to complete. This would be added to the requirements file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-08-26 04:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by @dhruvmanila on 2024-08-26 04:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/calumy">@calumy</a> reviewed on 2024-08-26 14:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/calumy">@calumy</a> on <code>scripts/check_docs_formatted.py</code>:141 on 2024-08-26 14:27</div>
            <div class="timeline-body"><p>Updated in 11ef36c8d</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/calumy">@calumy</a> reviewed on 2024-08-26 14:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/calumy">@calumy</a> on <code>scripts/check_docs_formatted.py</code>:299 on 2024-08-26 14:33</div>
            <div class="timeline-body"><p>My reason for not using the latest released version of Ruff was to avoid the situation where an update to the formatter results in an update to the docs. This could potentially result in the docs being formatted differently from the current release version of ruff and would only be fixed in a subsequent PR and release; however, using the current branch's version of the formatter allows the docs to be updated at the same time as the formatter by someone who has the context of the change.</p>
<p>If this is not a concern, let me know and I can update to use the latest release.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @calumy on 2024-08-26 14:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>scripts/check_docs_formatted.py</code>:299 on 2024-08-26 14:55</div>
            <div class="timeline-body"><p>I think any major style updates would only go out in a breaking release and will be stabilized once per year (similar to how Black does it). So, it shouldn't be too much work to update the docs then ;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-08-26 14:55</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/calumy">@calumy</a> reviewed on 2024-08-26 15:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/calumy">@calumy</a> on <code>scripts/check_docs_formatted.py</code>:299 on 2024-08-26 15:09</div>
            <div class="timeline-body"><p>Updated in: b3ac44d92ca62e3f6cc7096c565eeaca994aab1b</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> approved on 2024-08-26 15:48</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-26 15:49</div>
            <div class="timeline-body"><p>Re-running the failed jobs, not sure what happened there</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dhruvmanila on 2024-08-26 15:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2024-08-26 15:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 21:39:02 UTC
    </footer>
</body>
</html>
