<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`ruff`] implement `IfKeyNotInDictAssign` rule (RUF060) - astral-sh/ruff #16775</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>ruff</code>] implement <code>IfKeyNotInDictAssign</code> rule (RUF060)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16775">#16775</a>
        opened by <a href="https://github.com/alex-700">@alex-700</a>
        on 2025-03-16 12:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/alex-700">@alex-700</a> on 2025-03-16 12:39</div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>Implement <code>IfKeyNotInDictAssign</code> rule (RUF060)</p>
<p>which suggest to use <code>setdefault</code>.</p>
<p>closes #7897
see also https://github.com/dosisod/refurb/issues/349</p>
<h2>Notes</h2>
<p>In the implementation:</p>
<ul>
<li>the functions <code>is_same_arg</code>/<code>is_same_key</code> are implemented in a strange (syntactic) way. I think it's worth catching complex expressions here (espessially in <code>arg</code> case), but can't find the right machinery to structured comparison of it.</li>
<li>the functions <code>is_idempotent</code>/<code>is_cheap_to_evaluate</code> are implemented in really simple and conservative way, and so have a lot of false negative. We can implement them by using <code>walk_expr</code> machinery instead (e.g. to find function call-s), but I do not have strong opinion here. What do you think, is additional code complexity worth it?</li>
</ul>
<p>UPD: <a href="https://github.com/astral-sh/ruff/pull/16775/commits/d249da43fae39a0d66731dbddd2959ff0f108620">commit</a></p>
<ul>
<li>replace the syntactic comparison with structured one via <code>ComparableExpr</code>.</li>
<li>make <code>is_idempotent</code> to be synonym to <a href="https://github.com/astral-sh/ruff/blob/c814745643dbae3d5b6a7782886f173ca738996b/crates/ruff_python_ast/src/helpers.rs#L46-L45"><code>!contains_effect(...)</code></a></li>
<li>make <code>is_cheap_to_evaluate</code> more robust (support <code>()</code>, <code>[]</code>, <code>{}</code>, <code>set()</code>, etc)</li>
</ul>
<!-- What's the purpose of the change? What does it do, and why? -->

<h2>Test Plan</h2>
<p>cargo test</p>
<!-- How was it tested? -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2025-03-16 14:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2025-03-16 14:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-03-17 09:32</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+120 -0 violations, +0 -0 fixes in 19 projects; 36 projects unchanged)</p>
<details><summary><a href="https://github.com/DisnakeDev/disnake">DisnakeDev/disnake</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/DisnakeDev/disnake/blob/2ab0c535b021dd120b5a6aff67dc1c195b9913ae/disnake/ext/commands/interaction_bot_base.py#L838'>disnake/ext/commands/interaction_bot_base.py:838:17:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/RasaHQ/rasa">RasaHQ/rasa</a> (+3 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/training/story_conflict.py#L263'>rasa/core/training/story_conflict.py:263:13:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/nlu/extractors/extractor.py#L79'>rasa/nlu/extractors/extractor.py:79:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/shared/core/training_data/visualization.py#L206'>rasa/shared/core/training_data/visualization.py:206:5:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+27 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/53ec90c150a231b46f57c9d0d8054044e589c72d/airflow/api_fastapi/core_api/routes/ui/dependencies.py#L55'>airflow/api_fastapi/core_api/routes/ui/dependencies.py:55:17:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/airflow/blob/53ec90c150a231b46f57c9d0d8054044e589c72d/airflow/api_fastapi/core_api/services/public/common.py#L49'>airflow/api_fastapi/core_api/services/public/common.py:49:13:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/airflow/blob/53ec90c150a231b46f57c9d0d8054044e589c72d/airflow/cli/simple_table.py#L141'>airflow/cli/simple_table.py:141:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/airflow/blob/53ec90c150a231b46f57c9d0d8054044e589c72d/airflow/models/dag.py#L472'>airflow/models/dag.py:472:17:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/airflow/blob/53ec90c150a231b46f57c9d0d8054044e589c72d/dev/breeze/src/airflow_breeze/commands/release_management_commands.py#L2341'>dev/breeze/src/airflow_breeze/commands/release_management_commands.py:2341:29:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/airflow/blob/53ec90c150a231b46f57c9d0d8054044e589c72d/docs/conf.py#L593'>docs/conf.py:593:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/airflow/blob/53ec90c150a231b46f57c9d0d8054044e589c72d/providers/airbyte/src/airflow/providers/airbyte/sensors/airbyte.py#L62'>providers/airbyte/src/airflow/providers/airbyte/sensors/airbyte.py:62:13:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/airflow/blob/53ec90c150a231b46f57c9d0d8054044e589c72d/providers/airbyte/src/airflow/providers/airbyte/sensors/airbyte.py#L65'>providers/airbyte/src/airflow/providers/airbyte/sensors/airbyte.py:65:13:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/airflow/blob/53ec90c150a231b46f57c9d0d8054044e589c72d/providers/amazon/src/airflow/providers/amazon/aws/hooks/cloud_formation.py#L78'>providers/amazon/src/airflow/providers/amazon/aws/hooks/cloud_formation.py:78:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/airflow/blob/53ec90c150a231b46f57c9d0d8054044e589c72d/providers/cncf/kubernetes/src/airflow/providers/cncf/kubernetes/executors/kubernetes_executor_utils.py#L150'>providers/cncf/kubernetes/src/airflow/providers/cncf/kubernetes/executors/kubernetes_executor_utils.py:150:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/airflow/blob/53ec90c150a231b46f57c9d0d8054044e589c72d/providers/cncf/kubernetes/src/airflow/providers/cncf/kubernetes/executors/kubernetes_executor_utils.py#L152'>providers/cncf/kubernetes/src/airflow/providers/cncf/kubernetes/executors/kubernetes_executor_utils.py:152:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
... 16 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/superset">apache/superset</a> (+6 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/superset/blob/f0c8c12c1acb9a281422014b667d877a78bfa03e/superset/annotation_layers/annotations/api.py#L122'>superset/annotation_layers/annotations/api.py:122:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/superset/blob/f0c8c12c1acb9a281422014b667d877a78bfa03e/superset/connectors/sqla/models.py#L364'>superset/connectors/sqla/models.py:364:13:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/superset/blob/f0c8c12c1acb9a281422014b667d877a78bfa03e/superset/connectors/sqla/models.py#L368'>superset/connectors/sqla/models.py:368:13:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/superset/blob/f0c8c12c1acb9a281422014b667d877a78bfa03e/superset/migrations/shared/security_converge.py#L230'>superset/migrations/shared/security_converge.py:230:17:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/superset/blob/f0c8c12c1acb9a281422014b667d877a78bfa03e/superset/reports/logs/api.py#L88'>superset/reports/logs/api.py:88:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/apache/superset/blob/f0c8c12c1acb9a281422014b667d877a78bfa03e/superset/viz.py#L2138'>superset/viz.py:2138:13:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/binary-husky/gpt_academic">binary-husky/gpt_academic</a> (+5 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/binary-husky/gpt_academic/blob/045cdb15d86c262a55ede6dd9c84a5ab63dcc797/crazy_functions/crazy_utils.py#L394'>crazy_functions/crazy_utils.py:394:13:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/binary-husky/gpt_academic/blob/045cdb15d86c262a55ede6dd9c84a5ab63dcc797/crazy_functions/crazy_utils.py#L438'>crazy_functions/crazy_utils.py:438:17:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/binary-husky/gpt_academic/blob/045cdb15d86c262a55ede6dd9c84a5ab63dcc797/crazy_functions/live_audio/audio_io.py#L8'>crazy_functions/live_audio/audio_io.py:8:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/binary-husky/gpt_academic/blob/045cdb15d86c262a55ede6dd9c84a5ab63dcc797/request_llms/key_manager.py#L7'>request_llms/key_manager.py:7:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/binary-husky/gpt_academic/blob/045cdb15d86c262a55ede6dd9c84a5ab63dcc797/toolbox.py#L920'>toolbox.py:920:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/embed/util.py#L320'>src/bokeh/embed/util.py:320:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/latchbio/latch">latchbio/latch</a> (+3 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/latchbio/latch/blob/66920c3cd06ceb02109db8525c62b5569f5c459b/src/latch/functions/operators.py#L171'>src/latch/functions/operators.py:171:13:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/latchbio/latch/blob/66920c3cd06ceb02109db8525c62b5569f5c459b/src/latch/functions/operators.py#L179'>src/latch/functions/operators.py:179:13:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/latchbio/latch/blob/66920c3cd06ceb02109db8525c62b5569f5c459b/src/latch/functions/operators.py#L74'>src/latch/functions/operators.py:74:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/milvus-io/pymilvus">milvus-io/pymilvus</a> (+6 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/milvus-io/pymilvus/blob/823da25f3e295ecb5e98d7a8e26fcd6dc7777430/pymilvus/milvus_client/async_milvus_client.py#L117'>pymilvus/milvus_client/async_milvus_client.py:117:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/milvus-io/pymilvus/blob/823da25f3e295ecb5e98d7a8e26fcd6dc7777430/pymilvus/milvus_client/async_milvus_client.py#L142'>pymilvus/milvus_client/async_milvus_client.py:142:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/milvus-io/pymilvus/blob/823da25f3e295ecb5e98d7a8e26fcd6dc7777430/pymilvus/milvus_client/async_milvus_client.py#L95'>pymilvus/milvus_client/async_milvus_client.py:95:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/milvus-io/pymilvus/blob/823da25f3e295ecb5e98d7a8e26fcd6dc7777430/pymilvus/milvus_client/milvus_client.py#L118'>pymilvus/milvus_client/milvus_client.py:118:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/milvus-io/pymilvus/blob/823da25f3e295ecb5e98d7a8e26fcd6dc7777430/pymilvus/milvus_client/milvus_client.py#L140'>pymilvus/milvus_client/milvus_client.py:140:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/milvus-io/pymilvus/blob/823da25f3e295ecb5e98d7a8e26fcd6dc7777430/pymilvus/milvus_client/milvus_client.py#L889'>pymilvus/milvus_client/milvus_client.py:889:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/pandas-dev/pandas">pandas-dev/pandas</a> (+6 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/pandas-dev/pandas/blob/882fa9cd7005ccf2249f04f38a2f2fd661d4e62a/pandas/_version.py#L66'>pandas/_version.py:66:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/pandas-dev/pandas/blob/882fa9cd7005ccf2249f04f38a2f2fd661d4e62a/pandas/core/arraylike.py#L519'>pandas/core/arraylike.py:519:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/pandas-dev/pandas/blob/882fa9cd7005ccf2249f04f38a2f2fd661d4e62a/pandas/core/frame.py#L4795'>pandas/core/frame.py:4795:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/pandas-dev/pandas/blob/882fa9cd7005ccf2249f04f38a2f2fd661d4e62a/pandas/core/nanops.py#L123'>pandas/core/nanops.py:123:21:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/pandas-dev/pandas/blob/882fa9cd7005ccf2249f04f38a2f2fd661d4e62a/pandas/io/formats/css.py#L283'>pandas/io/formats/css.py:283:13:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/pandas-dev/pandas/blob/882fa9cd7005ccf2249f04f38a2f2fd661d4e62a/pandas/plotting/_matplotlib/core.py#L1807'>pandas/plotting/_matplotlib/core.py:1807:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/python-poetry/poetry">python-poetry/poetry</a> (+2 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/python-poetry/poetry/blob/500a313d68637cbd317171c567280a10eaabae3c/src/poetry/factory.py#L329'>src/poetry/factory.py:329:21:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/python-poetry/poetry/blob/500a313d68637cbd317171c567280a10eaabae3c/src/poetry/inspection/info.py#L221'>src/poetry/inspection/info.py:221:21:</a> RUF060 Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/reflex-dev/reflex">reflex-dev/reflex</a> (+8 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/reflex-dev/reflex/blob/87ed1590c07831354a3c805a9d4aa5e453b4b90b/reflex/components/base/error_boundary.py#L56'>reflex/components/base/error_boundary.py:56:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/reflex-dev/reflex/blob/87ed1590c07831354a3c805a9d4aa5e453b4b90b/reflex/components/component.py#L480'>reflex/components/component.py:480:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/reflex-dev/reflex/blob/87ed1590c07831354a3c805a9d4aa5e453b4b90b/reflex/components/datadisplay/code.py#L444'>reflex/components/datadisplay/code.py:444:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/reflex-dev/reflex/blob/87ed1590c07831354a3c805a9d4aa5e453b4b90b/reflex/components/el/elements/forms.py#L177'>reflex/components/el/elements/forms.py:177:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/reflex-dev/reflex/blob/87ed1590c07831354a3c805a9d4aa5e453b4b90b/reflex/components/radix/themes/layout/list.py#L120'>reflex/components/radix/themes/layout/list.py:120:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/reflex-dev/reflex/blob/87ed1590c07831354a3c805a9d4aa5e453b4b90b/reflex/components/radix/themes/layout/list.py#L149'>reflex/components/radix/themes/layout/list.py:149:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/reflex-dev/reflex/blob/87ed1590c07831354a3c805a9d4aa5e453b4b90b/reflex/model.py#L535'>reflex/model.py:535:5:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/reflex-dev/reflex/blob/87ed1590c07831354a3c805a9d4aa5e453b4b90b/reflex/vars/base.py#L1831'>reflex/vars/base.py:1831:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/rotki/rotki">rotki/rotki</a> (+8 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/rotki/rotki/blob/d4cf2817395a8f1c71dd920db76a2db56f8b3301/rotkehlchen/api/v1/fields.py#L104'>rotkehlchen/api/v1/fields.py:104:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/rotki/rotki/blob/d4cf2817395a8f1c71dd920db76a2db56f8b3301/rotkehlchen/chain/balances.py#L178'>rotkehlchen/chain/balances.py:178:17:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/rotki/rotki/blob/d4cf2817395a8f1c71dd920db76a2db56f8b3301/rotkehlchen/chain/balances.py#L183'>rotkehlchen/chain/balances.py:183:17:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/rotki/rotki/blob/d4cf2817395a8f1c71dd920db76a2db56f8b3301/rotkehlchen/chain/evm/decoding/morpho/utils.py#L120'>rotkehlchen/chain/evm/decoding/morpho/utils.py:120:13:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/rotki/rotki/blob/d4cf2817395a8f1c71dd920db76a2db56f8b3301/rotkehlchen/data_import/importers/cryptocom.py#L354'>rotkehlchen/data_import/importers/cryptocom.py:354:17:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/rotki/rotki/blob/d4cf2817395a8f1c71dd920db76a2db56f8b3301/rotkehlchen/data_import/importers/cryptocom.py#L367'>rotkehlchen/data_import/importers/cryptocom.py:367:17:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/rotki/rotki/blob/d4cf2817395a8f1c71dd920db76a2db56f8b3301/rotkehlchen/rotkehlchen.py#L660'>rotkehlchen/rotkehlchen.py:660:13:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/rotki/rotki/blob/d4cf2817395a8f1c71dd920db76a2db56f8b3301/rotkehlchen/tests/unit/test_data_updates.py#L260'>rotkehlchen/tests/unit/test_data_updates.py:260:25:</a> RUF060 Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/scikit-build/scikit-build">scikit-build/scikit-build</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/scikit-build/scikit-build/blob/a2afff25f98e0d1fe573f520b659e1ee1f427c38/skbuild/setuptools_wrap.py#L767'>skbuild/setuptools_wrap.py:767:5:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>
<details><summary><a href="https://github.com/zulip/zulip">zulip/zulip</a> (+18 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/zulip/zulip/blob/33ffd8c0405b0072de307e6d77e2b05e94046072/analytics/tests/test_counts.py#L126'>analytics/tests/test_counts.py:126:13:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/zulip/zulip/blob/33ffd8c0405b0072de307e6d77e2b05e94046072/analytics/tests/test_counts.py#L164'>analytics/tests/test_counts.py:164:13:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/zulip/zulip/blob/33ffd8c0405b0072de307e6d77e2b05e94046072/analytics/tests/test_counts.py#L177'>analytics/tests/test_counts.py:177:13:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/zulip/zulip/blob/33ffd8c0405b0072de307e6d77e2b05e94046072/analytics/tests/test_counts.py#L201'>analytics/tests/test_counts.py:201:13:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/zulip/zulip/blob/33ffd8c0405b0072de307e6d77e2b05e94046072/analytics/tests/test_counts.py#L257'>analytics/tests/test_counts.py:257:17:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/zulip/zulip/blob/33ffd8c0405b0072de307e6d77e2b05e94046072/zerver/data_import/import_util.py#L162'>zerver/data_import/import_util.py:162:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/zulip/zulip/blob/33ffd8c0405b0072de307e6d77e2b05e94046072/zerver/data_import/rocketchat.py#L224'>zerver/data_import/rocketchat.py:224:13:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/zulip/zulip/blob/33ffd8c0405b0072de307e6d77e2b05e94046072/zerver/data_import/sequencer.py#L39'>zerver/data_import/sequencer.py:39:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/zulip/zulip/blob/33ffd8c0405b0072de307e6d77e2b05e94046072/zerver/lib/digest.py#L215'>zerver/lib/digest.py:215:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/zulip/zulip/blob/33ffd8c0405b0072de307e6d77e2b05e94046072/zerver/lib/export.py#L1718'>zerver/lib/export.py:1718:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
... 8 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/indico/indico">indico/indico</a> (+4 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/indico/indico/blob/e3ce1f00c76b40fefda375eb1222a1ee32fa3dfc/indico/modules/events/registration/util.py#L587'>indico/modules/events/registration/util.py:587:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/indico/indico/blob/e3ce1f00c76b40fefda375eb1222a1ee32fa3dfc/indico/modules/events/timetable/forms.py#L106'>indico/modules/events/timetable/forms.py:106:9:</a> RUF060 [*] Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/indico/indico/blob/e3ce1f00c76b40fefda375eb1222a1ee32fa3dfc/indico/testing/fixtures/category.py#L20'>indico/testing/fixtures/category.py:20:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
+ <a href='https://github.com/indico/indico/blob/e3ce1f00c76b40fefda375eb1222a1ee32fa3dfc/indico/util/caching.py#L33'>indico/util/caching.py:33:9:</a> RUF060 Use `.setdefault(...)` instead of check and assign
</pre>

</p>
</details>

<p><em>... Truncated remaining completed project reports due to GitHub comment length restrictions</em></p>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| RUF060 | 120 | 120 | 0 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 19:41:04 UTC
    </footer>
</body>
</html>
