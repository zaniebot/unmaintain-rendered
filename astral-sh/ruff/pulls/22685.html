<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[refurb] Mark FURB180 fix as unsafe when comments would be deleted - astral-sh/ruff #22685</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[refurb] Mark FURB180 fix as unsafe when comments would be deleted</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/22685">#22685</a>
        opened by <a href="https://github.com/AndyBodnar">@AndyBodnar</a>
        on 2026-01-18 17:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AndyBodnar">@AndyBodnar</a></div>
            <div class="timeline-body"><p>Fixes #22631</p>
<p>The safe fix for FURB180 could delete comments that appear between keyword arguments. For example:</p>
<pre><code>class C(
    other_kwarg=1,
    # comment
    metaclass=abc.ABCMeta,
):
    pass
</code></pre>
<p>The fix deletes from the previous argument to the end of the metaclass keyword, which would remove the comment. This change checks if any comments exist in that deletion range and marks the fix as unsafe if so.</p>
<p>Added a test case covering this scenario.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2026-01-18 17:12</div>
            <div class="timeline-body"><p>Thanks for working on this! But this is already resolved in #22234, so I&#x27;ll close this for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ntBre">@ntBre</a> on 2026-01-18 17:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:23:12 UTC
    </footer>
</body>
</html>
