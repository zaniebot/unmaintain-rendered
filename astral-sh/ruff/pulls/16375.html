<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] Add support for `knot check &lt;paths&gt;` - astral-sh/ruff #16375</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] Add support for <code>knot check &lt;paths&gt;</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16375">#16375</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2025-02-25 16:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-02-25 16:43</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR adds support for an optional list of paths that should be checked to <code>knot check</code>.</p>
<p>E.g. to only check the <code>src</code> directory</p>
<pre><code class="language-sh">knot check src
</code></pre>
<p>The default is to check all files in the project but users can reduce the included files by specifying one or multiple optional paths.</p>
<p>The main two challenges with adding this feature were:</p>
<ul>
<li>We now need to show an error when one of the provided paths doesn't exist. That's why this PR now collects errors from the project file indexing phase and adds them to the output diagnostics. The diagnostic looks similar to ruffs (see CLI test)</li>
<li>The CLI should pick up new files added to included folders. For example, <code>knot check src --watch</code> should pick up new files that are added to the <code>src</code> folder. This requires that we now filter the files before adding them to the project. This is a good first step to supporting <code>include</code> and <code>exclude</code>.</li>
</ul>
<p>The PR makes two simplifications:</p>
<ol>
<li>I didn't test the changes with case-insensitive file systems. We may need to do some extra path normalization to support those well. See https://github.com/astral-sh/ty/issues/189</li>
<li>Ideally, we'd accumulate the IO errors from the initial indexing phase and subsequent incremental indexing operations. For example, we should preserve the IO diagnostic for a non existing <code>test.py</code> if it was specified as an explicit CLI argument until the file gets created and we should show it again when the file gets deleted. However, this is somewhat complicated because we'd need to track which files we revisited (or were removed because the entire directory is gone). I considered this too low a priority as it's worth dealing with right now.</li>
</ol>
<p>The implementation doesn't support symlinks within the project but that is the same as Ruff and is unchanged from before this PR.</p>
<p>Closes https://github.com/astral-sh/ruff/issues/14193</p>
<h2>Test Plan</h2>
<p>Added CLI and file watching integration tests. Manually testing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @MichaReiser on 2025-02-25 16:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[red-knot] Early version of `check <paths>`" to "[red-knot] Add support for `knot check <paths>`" by @MichaReiser on 2025-02-27 13:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @MichaReiser on 2025-02-27 14:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @MichaReiser on 2025-02-27 14:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @MichaReiser on 2025-02-27 14:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @MichaReiser on 2025-02-27 14:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/lib.rs</code>:80 on 2025-02-27 23:15</div>
            <div class="timeline-body"><p>How is this different from the already-present <code>open_fileset</code> above? How does the meaning of &quot;included&quot; differ from the meaning of &quot;open&quot;? (The current doc comment on <code>open_fileset</code> sounds like it is basically the same thing: these are the files to check.) Do we need both of these concepts?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/lib.rs</code>:124 on 2025-02-27 23:20</div>
            <div class="timeline-body"><p>I'm not sure I understand the implication of the <code>.gitignore</code> handling from a user perspective. Do we not check git-ignored files? Do we treat them as non-existent if you try to import them? It would be cool if we somewhere documented specifically how we use <code>.gitignore</code>. (Maybe this question is really not very related to this PR.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/db/changes.rs</code>:79 on 2025-02-27 23:26</div>
            <div class="timeline-body"><p>My assumption is that if you run <code>knot check some/path.py --watch</code> and then add <code>some/foo.py</code>, we still only want to check and output diagnostics for <code>some/path.py</code>, and the implementation and tests seem to confirm that.</p>
<p>But then I am confused by the comment here &quot;That is because we want to include those files in the next check run.&quot; I assume that in this comment you are just using a different meaning of the word &quot;include&quot;, or not considering the possibility that we have an explicitly-specified included file list? Because if we do, new files observed by the watcher should not be included.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/src/main.rs</code>:276 on 2025-02-27 23:34</div>
            <div class="timeline-body"><p>I suspect we should have a <code>-q</code> option to silence this type of output, but that's a separate feature.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/tests/cli.rs</code>:946 on 2025-02-27 23:39</div>
            <div class="timeline-body"><p>Is this making the test pass cross-platform?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/tests/file_watching.rs</code>:579 on 2025-02-27 23:52</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    // and write a second file in the root directory -- this should not be included
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/tests/file_watching.rs</code>:589 on 2025-02-27 23:54</div>
            <div class="timeline-body"><p>Just checking my understanding here: if one of the &quot;included&quot; files imported one of the &quot;not included&quot; files, that &quot;not included&quot; file would still end up in the indexed files, right? But it not be in the &quot;included&quot; set and we wouldn't check it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/lib.rs</code>:75 on 2025-02-27 23:58</div>
            <div class="timeline-body"><p>On first read I found the use of the term &quot;included&quot; here in this method and throughout this PR to be confusing, because &quot;included&quot; can mean lots of different things, and it seemed like e.g. &quot;checked&quot; would more clearly communicate the actual effect.</p>
<p>But after reading the whole PR I think I understand the reason for this term: it's connected to the future <code>include</code> and <code>exclude</code> configuration options we will add.</p>
<p>But I think this doc comment would be a good place to have a clearer description of what &quot;included&quot; actually means: that these are the files we will check and emit diagnostics for.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/lib.rs</code>:121 on 2025-02-28 00:02</div>
            <div class="timeline-body"><p>If &quot;included&quot; means &quot;one of the paths that should be checked&quot;, then I find this sentence confusing, both because &quot;included in the project&quot; sounds like it has a different meaning (under the project root?), and the &quot;AND one of the paths that should be checked&quot; also suggests that isn't already part of the meaning of &quot;included&quot;. If we are going to use &quot;included&quot; to mean &quot;paths requested for checking&quot;, let's define what that means in one place (I would do it above on the struct field) and then be consistent and clear about that.</p>
<pre><code class="language-suggestion">    /// Returns `true` if `path` is both part of the project, and included (see `included_paths_list`).
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/walk.rs</code>:38 on 2025-02-28 00:05</div>
            <div class="timeline-body"><p>This suggests that &quot;considered being part of the project&quot; means the same thing as &quot;included&quot;, but I find that confusing, because I would say if we have <code>project/a.py</code> and <code>project/b.py</code>, and we run <code>knot check project/a.py</code>, then only <code>a.py</code> is &quot;included&quot;, but both of the files are still &quot;part of the project&quot;, we just aren't checking all of them.</p>
<pre><code class="language-suggestion">    /// A file is included if it is a sub path of the project's root
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/walk.rs</code>:100 on 2025-02-28 00:09</div>
            <div class="timeline-body"><pre><code class="language-suggestion">        // It's unnecessary to filter on included paths because it only iterates over those to start with.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/walk.rs</code>:104 on 2025-02-28 00:09</div>
            <div class="timeline-body"><pre><code class="language-suggestion">            .expect(&quot;included_paths_or_root to never return an empty iterator&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/walk.rs</code>:107 on 2025-02-28 00:09</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    /// Creates a walker for indexing the project files incrementally.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/walk.rs</code>:110 on 2025-02-28 00:10</div>
            <div class="timeline-body"><p>Seems like maybe you also used &quot;checked&quot; instead of &quot;included&quot; in an earlier draft of this PR. But whichever we use, let's be consistent.</p>
<pre><code class="language-suggestion">    /// that aren't part of the included files.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/watch/project_watcher.rs</code>:78 on 2025-02-28 00:14</div>
            <div class="timeline-body"><p>I don't think <code>deduplicate_nested_paths</code> really find the common ancestor? If you give it two unrelated paths it will return both of them, not their common ancestor. It just removes paths that are entirely nested within another one.</p>
<pre><code class="language-suggestion">        // Watch both the project root and any paths provided by the user on the CLI (removing any redundant nested paths).
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> approved on 2025-02-28 00:14</div>
            <div class="timeline-body"><p>Looks great!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-02-28 06:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/red_knot_project/src/files.rs</code>:220 on 2025-02-28 06:39</div>
            <div class="timeline-body"><pre><code class="language-suggestion">        Arc::get_mut(&amp;mut self.indexed).expect(&quot;All references to `FilesSet` should have been dropped&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-02-28 06:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/red_knot_project/src/lib.rs</code>:97 on 2025-02-28 06:43</div>
            <div class="timeline-body"><p>nit: we could possibly remove the <code>_list</code> suffix to make it <code>included_paths</code> ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-28 08:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/tests/cli.rs</code>:946 on 2025-02-28 08:30</div>
            <div class="timeline-body"><p>Yes, this is for my friend Windows</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-28 08:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_project/src/lib.rs</code>:75 on 2025-02-28 08:31</div>
            <div class="timeline-body"><p>Funny, I used <code>checked_paths</code> first and then renamed it to <code>included_paths</code> because the concept is similar to the <code>include</code> setting (which are globs and not paths but it's otherwise the same idea).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-28 08:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_project/src/lib.rs</code>:97 on 2025-02-28 08:32</div>
            <div class="timeline-body"><p>I've added manual setters and getters that are named <code>included_paths</code> that would conflict with the salsa generated once.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-02-28 08:35</div>
            <div class="timeline-body"><p>I get the impression that writing fewer code comments results in fewer review comments ðŸ˜†</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-28 08:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/tests/file_watching.rs</code>:589 on 2025-02-28 08:45</div>
            <div class="timeline-body"><p>No, we don't index <code>not_included</code> files. We don't want to walk the entire project tree if you run <code>knot check a.py</code>. That's why we only index files that are relevant for the current session.</p>
<p>You can also see this from this test. The <code>indexed_project_files</code> doesn't contain <code>src/test2.py</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-28 08:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_project/src/lib.rs</code>:75 on 2025-02-28 08:48</div>
            <div class="timeline-body"><p>I think part of the confusion is that we sort of abuse the <code>Project</code> struct for anything session-related (I don't have a good name for it). <code>open_files</code>, <code>included_paths</code> and <code>files</code> aren't project-specific. They store state relevant for the current (check) session, and some of the information is derived from the project, but it's a more narrow view than just the project.</p>
<p>The reason why I put those fields on <code>Project</code> for now is that it's somewhat annoying to have global - alive forever structs because they require a new <code>Db</code> trait method, but I think it might be worth making the split if it helps clarify things. I don't plan on doing this split in this PR, but I'm interested to hear if you think that would help clarify concepts</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-28 08:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_project/src/lib.rs</code>:80 on 2025-02-28 08:54</div>
            <div class="timeline-body"><p>I can add a comment. In short, we may be able to remove <code>open_fileset</code> but I'm not sure yet. The <code>open_fileset</code> is currently used for wasm and I plan on using it in VS code when users only want to check the open files but not the entire workspace.</p>
<p>The main difference between the two is that <code>open_fileset</code> is a set of files, unlike <code>included_paths</code> that is a list of paths that require indexing to resolve them to a hash set. That makes <code>open_fileset</code> much cheaper if we know the files we want to check -- which is the case for IDEs and WASM.</p>
<p>I want to keep the field for now and revisit it when we work on the LSP.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-28 08:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_project/src/lib.rs</code>:124 on 2025-02-28 08:57</div>
            <div class="timeline-body"><p>We do respect <code>.gitignore</code> but only when indexing files (because discovering and parsing <code>.ignore</code> files is expensive. Users can opt out from <code>.gitignore</code> support. The main motivation for this comment is that calling <code>is_included</code> for every path and collecting them into a hash set will give you <strong>more files</strong> than calling <code>files</code> which does respect <code>.gitignore</code> files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_project/src/db/changes.rs</code>:79 on 2025-02-28 09:34</div>
            <div class="timeline-body"><p>Let me revisit the comment. This is not even specific about the changes in this PR. I added it for myself because I had to think about why <code>Files::sync_recursively</code> isn't enough.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-28 09:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-28 09:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/src/main.rs</code>:276 on 2025-02-28 09:49</div>
            <div class="timeline-body"><p>Yeah. I'm also not sure if we should use <code>writeln</code> here but that's a different story :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/lib.rs</code>:92 on 2025-02-28 16:31</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    /// In short, `open_files` is cheaper in contexts where the set of files is known, like
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/tests/file_watching.rs</code>:589 on 2025-02-28 16:34</div>
            <div class="timeline-body"><blockquote>
<p>The <code>indexed_project_files</code> doesn't contain <code>src/test2.py</code></p>
</blockquote>
<p>Yes, I thought perhaps the reason for this was that none of the included files import <code>test2</code>, thus my question. But I think maybe I just need to refresh my memory of how our files support works in general. I guess indexed files are just files that we &quot;discover&quot; for checking via tree-walking, but are not the full set of files we know about as Salsa inputs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_project/src/lib.rs</code>:75 on 2025-02-28 16:35</div>
            <div class="timeline-body"><p>Yes, it's not urgent but I do think splitting out &quot;our understanding of the user's project&quot; from &quot;our understanding of what the user has requested in the current checking session&quot; would be helpful in making this clearer!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-02-28 16:37</div>
            <div class="timeline-body"><blockquote>
<p>I get the impression that writing fewer code comments results in fewer review comments ðŸ˜†</p>
</blockquote>
<p>Maybe! Or maybe then you get review comments saying &quot;I don't understand this, please add a comment to explain&quot; ðŸ˜†</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> approved on 2025-02-28 16:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-03-03 12:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/tests/file_watching.rs</code>:589 on 2025-03-03 12:52</div>
            <div class="timeline-body"><p>Yes, this is correct. <code>File</code>s can be created by many different parts in Red Knot:</p>
<ul>
<li>Module resolver</li>
<li>Project file discovery (indexed)</li>
<li>Extension (e.g. when opening a file from outside the project but we still want to provide intelli sense and semantic syntax highlighting)</li>
</ul>
<p>There are probably more, but these should be the most important one.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2025-03-03 12:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-03-03 12:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-03-03 12:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-03-03 13:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot_project/src/lib.rs</code>:75 on 2025-03-03 13:10</div>
            <div class="timeline-body"><p>Hmm, looking into this it's hard to draw a hard line here. The files to check seem <em>clearly</em> to be session-specific. But so does setting, because changing the settings on the CLI changes the understanding of the projects (you can include or exclude files, enable and disable rules). This makes the split less clear and, to some degree, already exists today with the distinction of <code>Project</code> (stateful) and <code>ProjectMetadata</code> (the <em>what</em>).</p>
<p>That makes me inclined to leave it as is. We could consider renaming <code>Project</code> to <code>Session</code>, but I like an <em>active</em> project object.</p>
<p>This doesn't mean we can't improve the terminology but it hasn't clicked to me yet what the terminology would be.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 19:49:31 UTC
    </footer>
</body>
</html>
