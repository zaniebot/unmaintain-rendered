<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Introduce `StringContinuation` data structure - astral-sh/ruff #7242</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Introduce <code>StringContinuation</code> data structure</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/7242">#7242</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2023-09-08 10:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Similar to the preceding PR. It extracts a <code>StringContinuation</code> data structure that allows inspection.
Being able to access the continuation parts quickly is important to implement Black's string preview style where we need create three different variations for each implicit concatenated string.</p>
<h2>Test Plan</h2>
<p><code>cargo test</code></p>
<!-- How was it tested? -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-09-08 10:44</div>
            <div class="timeline-body"><p>Current dependencies on/for this PR:</p>
<ul>
<li>main<ul>
<li><strong>PR #7145</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7145" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a><ul>
<li><strong>PR #7193</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7193" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a><ul>
<li><strong>PR #7215</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7215" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a><ul>
<li><strong>PR #7217</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7217" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a><ul>
<li><strong>PR #7219</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7219" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a>
* <strong>PR #7242</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7242" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a>  üëà
* <strong>PR #7567</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7567" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>This comment was auto-generated by <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7242?utm_source=stack-comment">Graphite</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @MichaReiser on 2023-09-08 10:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2023-09-21 10:48</div>
            <div class="timeline-body"><h2><a href="https://codspeed.io/astral-sh/ruff/branches/create-string-continuation">CodSpeed Performance Report</a></h2>
<h3>Merging #7242 will <strong>degrade performances by 5.44%</strong></h3>
<p><sub>Comparing <code>create-string-continuation</code> (272306b) with <code>main</code> (0a07a2c)</sub></p>
<h3>Summary</h3>
<p><code>‚ö° 6</code> improvements
<code>‚ùå 5</code> regressions
<code>‚úÖ 14</code> untouched benchmarks</p>
<blockquote>
<p>:warning: <em>Please fix the performance issues or <a href="https://codspeed.io/astral-sh/ruff/branches/create-string-continuation">acknowledge them on CodSpeed</a>.</em></p>
</blockquote>
<h3>Benchmarks breakdown</h3>
<p>|     | Benchmark | <code>main</code> | <code>create-string-continuation</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| ‚ö° | <code>formatter[pydantic/types.py]</code> | 19.9 ms | 19.1 ms | +4.27% |
| ‚ùå | <code>linter/all-rules[numpy/globals.py]</code> | 4 ms | 4.1 ms | -2.77% |
| ‚ö° | <code>formatter[large/dataset.py]</code> | 57.7 ms | 52.3 ms | +10.29% |
| ‚ùå | <code>linter/all-rules[unicode/pypinyin.py]</code> | 15.4 ms | 15.7 ms | -2.22% |
| ‚ö° | <code>formatter[unicode/pypinyin.py]</code> | 3.6 ms | 3.4 ms | +7.85% |
| ‚ö° | <code>formatter[numpy/ctypeslib.py]</code> | 10.9 ms | 9.9 ms | +9.29% |
| ‚ùå | <code>linter/all-rules[pydantic/types.py]</code> | 70 ms | 72.9 ms | -4.04% |
| ‚ö° | <code>lexer[large/dataset.py]</code> | 10.1 ms | 9.8 ms | +3.25% |
| ‚ùå | <code>linter/all-rules[numpy/ctypeslib.py]</code> | 33.2 ms | 34.2 ms | -3.01% |
| ‚ö° | <code>formatter[numpy/globals.py]</code> | 1.1 ms | 1.1 ms | +2.35% |
| ‚ùå | <code>linter/all-rules[large/dataset.py]</code> | 155.1 ms | 164 ms | -5.44% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2023-10-27 15:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-01-16 10:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:00:07 UTC
    </footer>
</body>
</html>
