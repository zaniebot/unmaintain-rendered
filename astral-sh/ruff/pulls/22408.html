<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] improve indented codefence rendering in docstrings - astral-sh/ruff #22408</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] improve indented codefence rendering in docstrings</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/22408">#22408</a>
        opened by <a href="https://github.com/Gankra">@Gankra</a>
        on 2026-01-05 19:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/Gankra">@Gankra</a> on 2026-01-05 19:07</div>
            <div class="timeline-body"><p>By stripping leading indents from codefence lines to ensure they're properly understood by markdown (but otherwise preserving the indent in the codeblock so all the code renders roughly at the right indent).</p>
<p>As described in <a href="https://github.com/astral-sh/ty/issues/2352#issuecomment-3711686053">this comment</a> this solution is very &quot;do what I mean&quot; for when a user has an explicit markdown codeblock in e.g. a <code>Returns:</code> section which &quot;has&quot; to be indented but that indent makes the verbatim codefence invalid markdown.</p>
<ul>
<li>Fixes https://github.com/astral-sh/ty/issues/2352</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @Gankra on 2026-01-05 19:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @Gankra on 2026-01-05 19:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @Gankra on 2026-01-05 19:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @Gankra on 2026-01-05 19:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dcreager by @Gankra on 2026-01-05 19:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @Gankra on 2026-01-05 19:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by @Gankra on 2026-01-05 19:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2026-01-05 19:08</div>
            <div class="timeline-body"><p>We are now entering the &quot;Aria creates a non-standard dialect of markdown&quot; era of Astral.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2026-01-05 19:10</div>
            <div class="timeline-body"><p>I would be perfectly fine with the conclusion being &quot;the user isn't allowed to do that&quot; but idk it seems sensible..?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2026-01-06 09:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_ide/src/docstring.rs</code>:1294 on 2026-01-06 09:08</div>
            <div class="timeline-body"><p>Can you share a screenshot for how e.g. VS Code renders this markdown?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a> reviewed on 2026-01-06 15:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Gankra">@Gankra</a> on <code>crates/ty_ide/src/docstring.rs</code>:1294 on 2026-01-06 15:42</div>
            <div class="timeline-body"><p><img width="642" height="426" alt="Screenshot 2026-01-06 at 10 42 11â€¯AM" src="https://github.com/user-attachments/assets/26c58adf-19f9-440d-a42d-abd085e920aa" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2026-01-06 15:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @AlexWaygood removed by @AlexWaygood on 2026-01-06 15:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @Gankra on 2026-01-06 15:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Gankra on 2026-01-06 15:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2026-01-06 15:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 16:30:53 UTC
    </footer>
</body>
</html>
