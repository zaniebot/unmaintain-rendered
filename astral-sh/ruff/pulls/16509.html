<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] Several failing tests for generics - astral-sh/ruff #16509</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] Several failing tests for generics</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16509">#16509</a>
        opened by <a href="https://github.com/dcreager">@dcreager</a>
        on 2025-03-04 20:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/dcreager">@dcreager</a> on 2025-03-04 20:31</div>
            <div class="timeline-body"><p>To kick off the work of supporting generics, this adds many new (currently failing) tests, showing the behavior we plan to support.</p>
<p>This is still missing a lot!  Not included:</p>
<ul>
<li>typevar tuples</li>
<li>param specs</li>
<li>variance</li>
<li><code>Self</code></li>
</ul>
<p>But it's a good start!  We can add more failing tests for those once we tackle these.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @dcreager on 2025-03-04 20:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @dcreager on 2025-03-04 20:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @dcreager on 2025-03-04 20:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @dcreager on 2025-03-04 20:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @dcreager on 2025-03-04 20:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/classes.md</code>:89 on 2025-03-04 20:54</div>
            <div class="timeline-body"><p>I did not understand this part. Did you intend to write <code>c.x</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-03-04 20:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:12 on 2025-03-04 20:56</div>
            <div class="timeline-body"><p>What is the principle by which this is <code>int</code> and not <code>Literal[1]</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:22 on 2025-03-04 20:56</div>
            <div class="timeline-body"><p>Similarly, what makes this not <code>Literal[True]</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:27 on 2025-03-04 20:56</div>
            <div class="timeline-body"><p>Or <code>Literal[&quot;string&quot;]</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-03-04 20:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/classes.md</code>:116 on 2025-03-04 20:58</div>
            <div class="timeline-body"><p>Maybe use something other than <code>float</code> here, due to the special case for <code>float</code> and <code>complex</code>? I don't think anything is wrong with the assertion ‚Äî we would probably show <code>E[float]</code> ‚Äî but it could be confusing because specifying <code>E[float]</code> in a type expression would be equivalent to <code>E[float | int]</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dcreager">@dcreager</a> reviewed on 2025-03-04 20:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/classes.md</code>:89 on 2025-03-04 20:58</div>
            <div class="timeline-body"><p>I sure did!  Fixed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:108 on 2025-03-04 21:01</div>
            <div class="timeline-body"><p>We should probably implement checking of returned types against the return type annotation soon :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/classes.md</code>:116 on 2025-03-04 21:03</div>
            <div class="timeline-body"><p>Agreed -- though it may also be that <code>float</code> was chosen intentionally as a builtin type without literals, to dodge the question of whether <code>E(1)</code> is <code>E[int]</code> or <code>E[Literal[1]]</code>...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/scoping.md</code>:63 on 2025-03-04 21:06</div>
            <div class="timeline-body"><p><code>reveal_type</code> on these two return types, showing that there's no cross-contamination (e.g. we don't infer <code>int | str</code> or something)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-03-04 21:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/classes.md</code>:158 on 2025-03-04 21:18</div>
            <div class="timeline-body"><p>Ha! I recently tried if CRTP was possible in Python. :smile:</p>
<p>I don't think it would work like this, as the base of <code>Sub</code> is eagerly evaluated as a non-type expression. So even <code>from __future__ import annotations</code> wouldn't help the fact that <code>Sub</code> is not yet defined when you try to specify it as it's own base.</p>
<p>I'm not sure if you need CRTP in Python, given that it has <code>Self</code>?</p>
<pre><code class="language-py">from typing import Self

class Base:
    def f(self) -&gt; Self: ...

class Sub(Base): ...

reveal_type(Sub().f())  # revealed: Sub
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-03-04 21:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/pep695.md</code>:1 on 2025-03-04 21:22</div>
            <div class="timeline-body"><p>I'll probably not be able to finish my review of this PR today, but I did create a <code>pep695_type_aliases.md</code> test suite a while back, so it probably makes sense to check if there is any overlap (unless you already did).</p>
<p>Also, you might want to add</p>
<pre><code class="language-markdown">```toml
[environment]
python-version = &quot;3.12&quot;
```
</code></pre>
<p>here, or @ntBre will soon make your tests fail :smile:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-03-04 21:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:47 on 2025-03-04 21:37</div>
            <div class="timeline-body"><p>By &quot;the return type&quot;, do you mean &quot;types of <code>return</code> expressions&quot; or similar?</p>
<p>I think &quot;must be an instance of the actual typevar&quot; is too narrow? Shouldn't it be something like &quot;if a function is annotated as returning a typevar <code>T</code>, types of <code>return</code> expressions must be assignable to <code>T</code>, and not ‚Ä¶&quot;?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-03-04 21:41</div>
            <div class="timeline-body"><p>Haven't finished the review, but this looks like a great start ‚Äî thank you.</p>
<p>The old <code>mdtest/generics.md</code> test is something that I had to update quite a few times when making seemingly unrelated changes, so I'm kind of glad that it's gone. I hope that the &quot;TODO&quot; assertions in the tests here won't introduce similar problems. I guess we'll find out, but it looks like you already made the assertions rather non-specific (e.g. without precise error messages), which is good.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-03-04 21:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/pep695.md</code>:1 on 2025-03-04 21:51</div>
            <div class="timeline-body"><p>Don't worry too much! I backed out the red-knot integration for now. I probably won't get back to #16379 this week even. If this merges first, I'm happy to clean up the test failures.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/classes.md</code>:158 on 2025-03-04 21:58</div>
            <div class="timeline-body"><p><code>Self</code> may work for some CRTP use cases, but this recursive pattern is used in Python, and we need to support it. (Most notably, <code>str</code> inherits <code>Sequence[str]</code> in typeshed.) That's why we had a test for this in the old <code>generics.md</code>, which I assume this test was inspired by / replaces.</p>
<p>The two ways to make this code work are to a) put it in a stub file (where all annotations, and base class expressions, are lazy), or b) stringify the inner <code>Sub</code> (e.g. <code>class Sub(Base[&quot;Sub&quot;]): ...</code>), which type checkers do understand (although it does lead to some extra indirection for anyone trying to introspect the type arguments at runtime).</p>
<p>I think we should expand this test to show that it works in a stub, it works with the stringified reference, and it does not work (emits an undefined-name diagnostic) if used as shown.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/scoping.md</code>:66 on 2025-03-04 21:58</div>
            <div class="timeline-body"><p>&quot;Class methods&quot; is within confusion range of &quot;Classmethods&quot;, which are a different thing :)</p>
<pre><code class="language-suggestion">## Methods can mention class typevars
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/scoping.md</code>:88 on 2025-03-04 21:59</div>
            <div class="timeline-body"><pre><code class="language-suggestion">## Methods can mention other typevars
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/scoping.md</code>:128 on 2025-03-04 22:00</div>
            <div class="timeline-body"><pre><code class="language-suggestion">This is true with the legacy syntax:
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> approved on 2025-03-04 22:02</div>
            <div class="timeline-body"><p>Looks great!!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2025-03-04 22:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:47 on 2025-03-04 22:08</div>
            <div class="timeline-body"><p>I think this whole sentence is an attempt to clarify what &quot;assignable to T&quot; means. That is, if <code>T</code> has an upper bound of <code>int</code>, that does not make <code>int</code> assignable to <code>T</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @MichaReiser removed by @MichaReiser on 2025-03-05 07:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-03-05 08:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:1 on 2025-03-05 08:09</div>
            <div class="timeline-body"><p>I understand that these test suites are not meant to be exhaustive yet, but it might make sense to add a few tests that may inform the design of the constraint solver? (similar to what you did with the <em>Inferring ‚Äúdeep‚Äù generic parameter types</em> test)</p>
<p>For example, a case which can not be solved by simply solving constraints eagerly for the first parameter, then for the second, ‚Ä¶</p>
<p>For example:</p>
<pre><code class="language-py">def f[T](x: T, y: T) -&gt; T:
    return x

reveal_type(f(&quot;a&quot;, &quot;b&quot;))  # str
reveal_type(f(&quot;a&quot;, 1))  # str | int
</code></pre>
<p>Or this</p>
<pre><code class="language-py">def f[T](x: T | int, y: T) -&gt; T:
    return y

reveal_type(f(1, &quot;a&quot;))  # str
reveal_type(f(&quot;a&quot;, &quot;a&quot;))  # str
reveal_type(f(1, 1))  # int
reveal_type(f(&quot;a&quot;, 1))  # str | int
</code></pre>
<p>or this</p>
<pre><code class="language-py">def f[T, S](x: T | S, y: tuple[T, S]) -&gt; tuple[T, S]:
    return y

reveal_type(f(&quot;a&quot;, (&quot;a&quot;, 1)))  # tuple[str, int]
reveal_type(f(1, (&quot;a&quot;, 1)))  # tuple[str, int]
</code></pre>
<p>(interesting: Pyright infers <code>tuple[str | int, int]</code> in the very last row here, which is also correct, but seems to imply some asymmetry in constraint solving?)</p>
<p>And maybe also add some generic function definitions that are not allowed:</p>
<pre><code class="language-py">def absurd[T]() -&gt; T: ...
</code></pre>
<p>Another thing that seems worth including is a test that makes sure that we can solve nested calls of generic functions (and don't conflate two occurrences of <code>T</code> in different functions), e.g.:</p>
<pre><code class="language-py">def f[T](x: T) -&gt; tuple[T, int]:
    return (x, 1)

def g[T](x: T) -&gt; T | None:
    return x

reveal_type(f(g(&quot;a&quot;)))  # tuple[str | None, int]
reveal_type(g(f(&quot;a&quot;)))  # tuple[str, int] | None
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:12 on 2025-03-05 18:38</div>
            <div class="timeline-body"><p>In <a href="https://www.notion.so/RFC-generic-functions-and-classes-13b48797e1ca803aad1ccc79268088c3?d=13c48797e1ca80d59f37001c67ea5bcf&amp;pvs=4#13c48797e1ca80108f94d9626bb13986">the RFC</a> it seemed like we hadn't landed on which one we would want it to be, but that mypy and pyright both infer this as <code>int</code>.  I put <code>int</code> not as a strong opinion about which result we want, but rather because I needed to put something and consistency with mypy/pyright seemed like a good mild tiebreaker.  I can instead put both in the TODO along with a comment that we haven't actually decided yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:22 on 2025-03-05 18:39</div>
            <div class="timeline-body"><p>Ditto above, updated the TODO to list both possibilities</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:27 on 2025-03-05 18:39</div>
            <div class="timeline-body"><p>Ditto above, updated the TODO to list both possibilities</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/classes.md</code>:116 on 2025-03-05 18:42</div>
            <div class="timeline-body"><p>Is it fair to say that even if we infer <code>E[Literal[1]]</code> up above in the generic function example, for classes it's more likely that we'd want to infer the weaker <code>E[int]</code>?  (For now I've listed both possibilities like above)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/scoping.md</code>:63 on 2025-03-05 18:43</div>
            <div class="timeline-body"><p>Done</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/classes.md</code>:158 on 2025-03-05 18:43</div>
            <div class="timeline-body"><blockquote>
<p>The two ways to make this code work are to a) put it in a stub file</p>
</blockquote>
<p>That would explain why it was in a stub file in the RFC :joy:</p>
<blockquote>
<p>I think we should expand this test to show that it works in a stub, it works with the stringified reference, and it does not work (emits an undefined-name diagnostic) if used as shown.</p>
</blockquote>
<p>Done</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:47 on 2025-03-05 18:58</div>
            <div class="timeline-body"><blockquote>
<p>By &quot;the return type&quot;, do you mean &quot;types of <code>return</code> expressions&quot; or similar?</p>
</blockquote>
<p>It should have been &quot;the returned type&quot;.</p>
<p>I copied this example from the RFC. I think what it's trying to check also applies to the parameters, which might be clearer with some <code>reveal_type</code>s in the body.  i.e. something like</p>
<pre><code class="language-py">reveal_type(x)  # revealed: T &amp; int
</code></pre>
<p>instead of</p>
<pre><code class="language-py">reveal_type(x)  # revealed: int
</code></pre>
<p>I took a stab at rewording this, lmkwyt</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:1 on 2025-03-05 19:33</div>
            <div class="timeline-body"><blockquote>
<p>but it might make sense to add a few tests that may inform the design of the constraint solver?</p>
</blockquote>
<p>These are great examples, thank you!  Added them all</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:1 on 2025-03-05 19:34</div>
            <div class="timeline-body"><blockquote>
<p>And maybe also add some generic function definitions that are not allowed:</p>
<pre><code class="language-python">def absurd[T]() -&gt; T: ...
</code></pre>
</blockquote>
<p>pyright doesn't consider this a separate class of error, it reports &quot;typevar only appears once, just use <code>object</code>&quot;, just like for</p>
<pre><code class="language-py">def f[T](x: T) -&gt; None: ...
</code></pre>
<p>What about something like</p>
<pre><code class="language-py">def f[T]() -&gt; list[T]:
    return []
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:1 on 2025-03-05 19:37</div>
            <div class="timeline-body"><blockquote>
<p>Another thing that seems worth including is a test that makes sure that we can solve nested calls of generic functions (and don't conflate two occurrences of <code>T</code> in different functions), e.g.:</p>
</blockquote>
<p>Done</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dcreager">@dcreager</a> reviewed on 2025-03-05 19:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2025-03-05 20:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:12 on 2025-03-05 20:17</div>
            <div class="timeline-body"><p>Shoot, I was hoping you'd have a carefully reasoned strong opinion here üòÜ Mentioning both options in the TODO seems good for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> approved on 2025-03-05 20:32</div>
            <div class="timeline-body"><p>LGTM!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dcreager on 2025-03-05 22:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dcreager on 2025-03-05 22:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-03-05 22:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/classes.md</code>:132 on 2025-03-06 07:51</div>
            <div class="timeline-body"><p>I'm going to have to change this test in my attribute-access PR, because <code>x: T</code> is only a declaration, which means that we can access <code>x</code> on instances of <code>Base[T]</code>, but not on class objects.</p>
<p>I'll probably change it to something like</p>
<pre><code class="language-suggestion">class Base[T]:
    x: T | None = None
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-03-06 07:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-03-06 07:55</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/red_knot_python_semantic/resources/mdtest/generics/functions.md</code>:47 on 2025-03-06 07:55</div>
            <div class="timeline-body"><blockquote>
<p>I took a stab at rewording this, lmkwyt</p>
</blockquote>
<p>I think it's clear now, thank you.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 19:49:32 UTC
    </footer>
</body>
</html>
