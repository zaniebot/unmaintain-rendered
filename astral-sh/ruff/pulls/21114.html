<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Add error counter to the ty benchmark package - astral-sh/ruff #21114</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Add error counter to the ty benchmark package</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/21114">#21114</a>
        opened by <a href="https://github.com/alex-gregory-ds">@alex-gregory-ds</a>
        on 2025-10-28 21:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/alex-gregory-ds">@alex-gregory-ds</a></div>
            <div class="timeline-body">

Summary


<p>Related to <a href="https://github.com/astral-sh/ty/issues/241">astral-sh/ty#241</a>.</p>
<p>This adds a counter to count the number of errors that are produced by ty on each of the benchmark repositories in <code>ty_benchmark</code>. For simplicity, we count the numer of lines produce by ty (when using <code>--output-format=concise</code>) as a proxy for the number of errors instead of counting the actual number of errors.</p>
Test Plan


<p>This is a draft so it&#x27;s still a work in progress.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-29 19:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-29 19:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-10-29 20:06</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+0 -227 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<a href="https://github.com/apache/airflow">apache/airflow</a> (+0 -227 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L240">airflow-core/src/airflow/cli/commands/dag_command.py:240:34:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L388">airflow-core/src/airflow/cli/commands/dag_command.py:388:32:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L403">airflow-core/src/airflow/cli/commands/dag_command.py:403:29:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L413">airflow-core/src/airflow/cli/commands/dag_command.py:413:46:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L413">airflow-core/src/airflow/cli/commands/dag_command.py:413:96:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L547">airflow-core/src/airflow/cli/commands/dag_command.py:547:30:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L578">airflow-core/src/airflow/cli/commands/dag_command.py:578:34:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L616">airflow-core/src/airflow/cli/commands/dag_command.py:616:25:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/dag_processing/dagbag.py#L155">airflow-core/src/airflow/dag_processing/dagbag.py:155:36:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/dag_processing/dagbag.py#L245">airflow-core/src/airflow/dag_processing/dagbag.py:245:30:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/dag_processing/dagbag.py#L561">airflow-core/src/airflow/dag_processing/dagbag.py:561:28:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/tests/integration/otel/dags/otel_test_dag.py#L87">airflow-core/tests/integration/otel/dags/otel_test_dag.py:87:6:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/tests/integration/otel/dags/otel_test_dag_with_pause_between_tasks.py#L152">airflow-core/tests/integration/otel/dags/otel_test_dag_with_pause_between_tasks.py:152:6:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/tests/integration/otel/dags/otel_test_dag_with_pause_in_task.py#L145">airflow-core/tests/integration/otel/dags/otel_test_dag_with_pause_in_task.py:145:6:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/tests/unit/dag_processing/test_processor.py#L541">airflow-core/tests/unit/dag_processing/test_processor.py:541:11:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/tests/unit/utils/test_db_cleanup.py#L684">airflow-core/tests/unit/utils/test_db_cleanup.py:684:15:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/devel-common/src/tests_common/pytest_plugin.py#L1251">devel-common/src/tests_common/pytest_plugin.py:1251:24:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/devel-common/src/tests_common/pytest_plugin.py#L2805">devel-common/src/tests_common/pytest_plugin.py:2805:16:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/performance/src/performance_dags/performance_dag/performance_dag.py#L235">performance/src/performance_dags/performance_dag/performance_dag.py:235:11:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/airbyte/tests/system/airbyte/example_airbyte_trigger_job.py#L33">providers/airbyte/tests/system/airbyte/example_airbyte_trigger_job.py:33:6:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/amazon/tests/unit/amazon/aws/operators/test_s3.py#L651">providers/amazon/tests/unit/amazon/aws/operators/test_s3.py:651:15:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/amazon/tests/unit/amazon/aws/transfers/test_base.py#L42">providers/amazon/tests/unit/amazon/aws/transfers/test_base.py:42:20:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/amazon/tests/unit/amazon/aws/transfers/test_dynamodb_to_s3.py#L268">providers/amazon/tests/unit/amazon/aws/transfers/test_dynamodb_to_s3.py:268:15:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/apache/druid/tests/system/apache/druid/example_druid.py#L31">providers/apache/druid/tests/system/apache/druid/example_druid.py:31:6:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/apache/flink/tests/unit/apache/flink/operators/test_flink_kubernetes.py#L201">providers/apache/flink/tests/unit/apache/flink/operators/test_flink_kubernetes.py:201:20:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/apache/flink/tests/unit/apache/flink/sensors/test_flink_kubernetes.py#L887">providers/apache/flink/tests/unit/apache/flink/sensors/test_flink_kubernetes.py:887:20:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
... 199 additional changes omitted for rule AIR311
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/openlineage/tests/unit/openlineage/plugins/test_listener.py#L123">providers/openlineage/tests/unit/openlineage/plugins/test_listener.py:123:13:</a> AIR301 `create_dagrun` is removed in Airflow 3.0
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/openlineage/tests/unit/openlineage/plugins/test_listener.py#L966">providers/openlineage/tests/unit/openlineage/plugins/test_listener.py:966:13:</a> AIR301 `create_dagrun` is removed in Airflow 3.0
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/openlineage/tests/unit/openlineage/utils/test_utils.py#L1715">providers/openlineage/tests/unit/openlineage/utils/test_utils.py:1715:18:</a> AIR301 `create_dagrun` is removed in Airflow 3.0
... 198 additional changes omitted for project
</pre>

</p>

Changes by rule (2 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| AIR311 | 224 | 0 | 224 | 0 | 0 |
| AIR301 | 3 | 0 | 3 | 0 | 0 |</p>
</p>


Linter (preview)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+0 -227 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<a href="https://github.com/apache/airflow">apache/airflow</a> (+0 -227 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L240">airflow-core/src/airflow/cli/commands/dag_command.py:240:34:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L388">airflow-core/src/airflow/cli/commands/dag_command.py:388:32:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L403">airflow-core/src/airflow/cli/commands/dag_command.py:403:29:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L413">airflow-core/src/airflow/cli/commands/dag_command.py:413:46:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L413">airflow-core/src/airflow/cli/commands/dag_command.py:413:96:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L547">airflow-core/src/airflow/cli/commands/dag_command.py:547:30:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L578">airflow-core/src/airflow/cli/commands/dag_command.py:578:34:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/cli/commands/dag_command.py#L616">airflow-core/src/airflow/cli/commands/dag_command.py:616:25:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/dag_processing/dagbag.py#L155">airflow-core/src/airflow/dag_processing/dagbag.py:155:36:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/dag_processing/dagbag.py#L245">airflow-core/src/airflow/dag_processing/dagbag.py:245:30:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/src/airflow/dag_processing/dagbag.py#L561">airflow-core/src/airflow/dag_processing/dagbag.py:561:28:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/tests/integration/otel/dags/otel_test_dag.py#L87">airflow-core/tests/integration/otel/dags/otel_test_dag.py:87:6:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/tests/integration/otel/dags/otel_test_dag_with_pause_between_tasks.py#L152">airflow-core/tests/integration/otel/dags/otel_test_dag_with_pause_between_tasks.py:152:6:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/tests/integration/otel/dags/otel_test_dag_with_pause_in_task.py#L145">airflow-core/tests/integration/otel/dags/otel_test_dag_with_pause_in_task.py:145:6:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/tests/unit/dag_processing/test_processor.py#L541">airflow-core/tests/unit/dag_processing/test_processor.py:541:11:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/airflow-core/tests/unit/utils/test_db_cleanup.py#L684">airflow-core/tests/unit/utils/test_db_cleanup.py:684:15:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/devel-common/src/tests_common/pytest_plugin.py#L1251">devel-common/src/tests_common/pytest_plugin.py:1251:24:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/devel-common/src/tests_common/pytest_plugin.py#L2805">devel-common/src/tests_common/pytest_plugin.py:2805:16:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/performance/src/performance_dags/performance_dag/performance_dag.py#L235">performance/src/performance_dags/performance_dag/performance_dag.py:235:11:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/airbyte/tests/system/airbyte/example_airbyte_trigger_job.py#L33">providers/airbyte/tests/system/airbyte/example_airbyte_trigger_job.py:33:6:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/amazon/tests/unit/amazon/aws/operators/test_s3.py#L651">providers/amazon/tests/unit/amazon/aws/operators/test_s3.py:651:15:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/amazon/tests/unit/amazon/aws/transfers/test_base.py#L42">providers/amazon/tests/unit/amazon/aws/transfers/test_base.py:42:20:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/amazon/tests/unit/amazon/aws/transfers/test_dynamodb_to_s3.py#L268">providers/amazon/tests/unit/amazon/aws/transfers/test_dynamodb_to_s3.py:268:15:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/apache/druid/tests/system/apache/druid/example_druid.py#L31">providers/apache/druid/tests/system/apache/druid/example_druid.py:31:6:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/apache/flink/tests/unit/apache/flink/operators/test_flink_kubernetes.py#L201">providers/apache/flink/tests/unit/apache/flink/operators/test_flink_kubernetes.py:201:20:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/apache/flink/tests/unit/apache/flink/sensors/test_flink_kubernetes.py#L887">providers/apache/flink/tests/unit/apache/flink/sensors/test_flink_kubernetes.py:887:20:</a> AIR311 `airflow.DAG` is removed in Airflow 3.0; It still works in Airflow 3.0 but is expected to be removed in a future version.
... 199 additional changes omitted for rule AIR311
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/openlineage/tests/unit/openlineage/plugins/test_listener.py#L123">providers/openlineage/tests/unit/openlineage/plugins/test_listener.py:123:13:</a> AIR301 `create_dagrun` is removed in Airflow 3.0
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/openlineage/tests/unit/openlineage/plugins/test_listener.py#L966">providers/openlineage/tests/unit/openlineage/plugins/test_listener.py:966:13:</a> AIR301 `create_dagrun` is removed in Airflow 3.0
- <a href="https://github.com/apache/airflow/blob/599659aa05ee766c8421c53516861c19649c73dc/providers/openlineage/tests/unit/openlineage/utils/test_utils.py#L1715">providers/openlineage/tests/unit/openlineage/utils/test_utils.py:1715:18:</a> AIR301 `create_dagrun` is removed in Airflow 3.0
... 198 additional changes omitted for project
</pre>

</p>

Changes by rule (2 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| AIR311 | 224 | 0 | 224 | 0 | 0 |
| AIR301 | 3 | 0 | 3 | 0 | 0 |</p>
</p>


Formatter (stable)
<p>✅ ecosystem check detected no format changes.</p>
Formatter (preview)
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[ty] Add error counter to the ty bencmark package&quot; to &quot;[ty] Add error counter to the ty benchmark package&quot; by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-10-29 20:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alex-gregory-ds">@alex-gregory-ds</a> on 2025-10-31 20:22</div>
            <div class="timeline-body"><p>Can anyone give me some guidance on where to go from here please? I have a function that counts the number of errors (number of lines) produced by ty. I assume I need to log the number of errors somewhere but:</p>
<ul>
<li>I cannot find where <code>ty_benchmark</code> is run in the CI/CD pipeline.</li>
<li>I cannot see how the current Hyperfine benchmark results are logged.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-07 23:44</div>
            <div class="timeline-body"><p>The <code>ty_benchmark</code> doesn&#x27;t run on CI. It&#x27;s a script that we run manually when comparing different type checkers.</p>
<blockquote>
<p>I assume I need to log the number of errors somewhere but:</p>
</blockquote>
<p>I think what we want is to hard code a rough number of expected diagnostics and compare them with the diagnostics count when running ty. Logging the diagnostic count when there&#x27;s a mismatch would certainly be useful.</p>
<p>However, I&#x27;m not entirely convinced that this is indeed necessary. We could also run ty with <code>--exit-zero</code> and have <code>hyperfine</code> assert that the exit code is 0.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alex-gregory-ds">@alex-gregory-ds</a> on 2025-11-08 12:03</div>
            <div class="timeline-body"><p>Thanks for the suggestions. This PR includes an <code>error_count.json</code> file and every time the benchmark is run, a new file is created called <code>error_count_new.json</code>. At the end of the benchmark run, the difference between the two JSON files is printed to the terminal. Here is an example:</p>
<pre><code>+--------------------------------------------------------------------------------------+
|                                 Error Count Summary                                  |
+-----------------+----------------------+----------------------+----------------------+
|                 | Old (6a92f1d9)       | New (3ffe3eea)       | Difference           |
|                 | 2025-11-08 11:55:29  | 2025-11-08 12:09:53  |                      |
+-----------------+----------------------+----------------------+----------------------+
| black (cold)    | 44                   | 44                   | 0                    |
| isort (cold)    | 21                   | 21                   | 0                    |
| jinja (cold)    | 81                   | 81                   | 0                    |
+-----------------+----------------------+----------------------+----------------------+
</code></pre>
<p>Let me know if this is right direction or if it&#x27;s too much for what you need. If this isn&#x27;t the right direction, I am happy to close this and try again :).</p>
<p>Currently, I am not running <code>ty</code> with <code>--exit-zero</code>, and I am not doing this with <code>hyperfine</code> but I am happy to make those changes if you&#x27;d prefer.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-17 07:29</div>
            <div class="timeline-body"><p>CC: @AlexWaygood</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-20 13:09</div>
            <div class="timeline-body"><p>Thank you @alex-gregory-ds for working on this.</p>
<p>I realized while working on adding and updating our benchmarks that a much easier approach is just to snapshot the output, and I implemented this as part of <a href="https://github.com/astral-sh/ruff/pull/21536">astral-sh/ruff#21536</a>. It&#x27;s certainly a bit verbose, but it has the added benefit that it allows comparison between versions.</p>
<p>I&#x27;m sorry that I misled you towards comparing the error counts instead. I might use your approach if the team decides that my solution is too verbose. But for now, I&#x27;ll close this PR</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-20 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alex-gregory-ds">@alex-gregory-ds</a> on 2025-11-23 12:17</div>
            <div class="timeline-body"><blockquote>
<p>I&#x27;m sorry that I misled you towards comparing the error counts instead. I might use your approach if the team decides that my solution is too verbose. But for now, I&#x27;ll close this PR.</p>
</blockquote>
<p>No problem at all. Thank you for getting back to me.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:19:57 UTC
    </footer>
</body>
</html>
