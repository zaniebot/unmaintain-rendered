<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] fix unary operators on `NewType`s of `float` and `complex` - astral-sh/ruff #22605</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] fix unary operators on <code>NewType</code>s of <code>float</code> and <code>complex</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/22605">#22605</a>
        opened by <a href="https://github.com/oconnor663">@oconnor663</a>
        on 2026-01-15 17:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a></div>
            <div class="timeline-body"><p>Closes <a href="https://github.com/astral-sh/ty/issues/2499">astral-sh/ty#2499</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-15 17:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-15 17:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/sharkdp">@sharkdp</a> by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-15 17:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-15 17:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2026-01-15 17:44</div>
            <div class="timeline-body">

<a href="https://github.com/python/typing/blob/dece44f2922ca390fe314145d09939514a21e76e/conformance/">Typing conformance results</a>
<p>No changes detected ‚úÖ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2026-01-15 17:46</div>
            <div class="timeline-body">

<code>mypy_primer</code> results

Changes were detected when running on open source projects

<pre><code>tornado (https://github.com/tornadoweb/tornado)
- tornado/gen.py:255:62: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `None | Awaitable[Unknown] | list[Awaitable[Unknown]] | dict[Any, Awaitable[Unknown]] | Future[Unknown]`, found `_T@next | _VT@next | _T@next`
+ tornado/gen.py:255:62: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `None | Awaitable[Unknown] | list[Awaitable[Unknown]] | dict[Any, Awaitable[Unknown]] | Future[Unknown]`, found `_T@next | _T@next | _VT@next`

prefect (https://github.com/PrefectHQ/prefect)
- src/integrations/prefect-dbt/prefect_dbt/core/settings.py:94:28: error[invalid-assignment] Object of type `T@resolve_block_document_references | dict[str, Any]` is not assignable to `dict[str, Any]`
+ src/integrations/prefect-dbt/prefect_dbt/core/settings.py:94:28: error[invalid-assignment] Object of type `T@resolve_block_document_references | int | dict[str, Any] | ... omitted 4 union elements` is not assignable to `dict[str, Any]`
- src/integrations/prefect-dbt/prefect_dbt/core/settings.py:99:28: error[invalid-assignment] Object of type `T@resolve_variables | dict[str, Any]` is not assignable to `dict[str, Any]`
+ src/integrations/prefect-dbt/prefect_dbt/core/settings.py:99:28: error[invalid-assignment] Object of type `int | T@resolve_variables | float | ... omitted 4 union elements` is not assignable to `dict[str, Any]`
- src/prefect/cli/deploy/_core.py:86:21: error[invalid-assignment] Object of type `T@resolve_block_document_references | dict[str, Any]` is not assignable to `dict[str, Any]`
+ src/prefect/cli/deploy/_core.py:86:21: error[invalid-assignment] Object of type `T@resolve_block_document_references | int | dict[str, Any] | ... omitted 4 union elements` is not assignable to `dict[str, Any]`
- src/prefect/cli/deploy/_core.py:87:21: error[invalid-assignment] Object of type `T@resolve_variables` is not assignable to `dict[str, Any]`
+ src/prefect/cli/deploy/_core.py:87:21: error[invalid-assignment] Object of type `int | T@resolve_variables | float | ... omitted 4 union elements` is not assignable to `dict[str, Any]`
- src/prefect/deployments/runner.py:795:70: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | ((...) -&gt; Any)`
+ src/prefect/deployments/runner.py:795:70: warning[possibly-missing-attribute] Attribute `__name__` may be missing on object of type `Unknown | (((...) -&gt; Any) &amp; ((*args: object, **kwargs: object) -&gt; object))`
- src/prefect/deployments/steps/core.py:137:38: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `T@resolve_block_document_references | dict[str, Any]`
+ src/prefect/deployments/steps/core.py:137:38: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `T@resolve_block_document_references | int | dict[str, Any] | ... omitted 4 union elements`
- src/prefect/flow_engine.py:812:32: error[invalid-await] `Unknown | R@FlowRunEngine | Coroutine[Any, Any, R@FlowRunEngine]` is not awaitable
- src/prefect/flow_engine.py:1401:24: error[invalid-await] `Unknown | R@AsyncFlowRunEngine | Coroutine[Any, Any, R@AsyncFlowRunEngine]` is not awaitable
- src/prefect/flow_engine.py:1482:43: error[invalid-argument-type] Argument to function `next` is incorrect: Expected `SupportsNext[Unknown]`, found `Unknown | R@run_generator_flow_sync`
- src/prefect/flow_engine.py:1490:21: warning[possibly-missing-attribute] Attribute `throw` may be missing on object of type `Unknown | R@run_generator_flow_sync`
- src/prefect/flow_engine.py:1524:44: warning[possibly-missing-attribute] Attribute `__anext__` may be missing on object of type `Unknown | R@run_generator_flow_async`
- src/prefect/flow_engine.py:1531:25: warning[possibly-missing-attribute] Attribute `throw` may be missing on object of type `Unknown | R@run_generator_flow_async`
- src/prefect/flows.py:286:34: error[unresolved-attribute] Object of type `(**P@Flow) -&gt; R@Flow` has no attribute `__name__`
+ src/prefect/flows.py:286:34: error[unresolved-attribute] Object of type `((**P@Flow) -&gt; R@Flow) &amp; ((*args: object, **kwargs: object) -&gt; object)` has no attribute `__name__`
- src/prefect/flows.py:404:68: error[unresolved-attribute] Object of type `(**P@Flow) -&gt; R@Flow` has no attribute `__name__`
+ src/prefect/flows.py:404:68: error[unresolved-attribute] Object of type `((**P@Flow) -&gt; R@Flow) &amp; ((*args: object, **kwargs: object) -&gt; object)` has no attribute `__name__`
+ src/prefect/flows.py:1750:53: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- src/prefect/utilities/templating.py:320:13: error[invalid-assignment] Invalid subscript assignment with key of type `object` and value of type `T@resolve_block_document_references | dict[str, Any]` on object of type `dict[str, Any]`
+ src/prefect/utilities/templating.py:320:13: error[invalid-assignment] Invalid subscript assignment with key of type `object` and value of type `T@resolve_block_document_references | int | dict[str, Any] | ... omitted 4 union elements` on object of type `dict[str, Any]`
- src/prefect/utilities/templating.py:323:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_block_document_references | dict[str, Any]`, found `list[T@resolve_block_document_references | dict[str, Any] | Unknown]`
+ src/prefect/utilities/templating.py:323:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_block_document_references | dict[str, Any]`, found `list[T@resolve_block_document_references | int | dict[str, Any] | ... omitted 5 union elements]`
- src/prefect/utilities/templating.py:437:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `dict[object, T@resolve_variables | Unknown]`
+ src/prefect/utilities/templating.py:437:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `dict[object, int | T@resolve_variables | float | ... omitted 5 union elements]`
- src/prefect/utilities/templating.py:442:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `list[T@resolve_variables | Unknown]`
+ src/prefect/utilities/templating.py:442:16: error[invalid-return-type] Return type does not match returned value: expected `T@resolve_variables`, found `list[int | T@resolve_variables | float | ... omitted 5 union elements]`
- src/prefect/workers/base.py:232:13: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `T@resolve_block_document_references | dict[str, Any]`
+ src/prefect/workers/base.py:232:13: error[invalid-argument-type] Argument is incorrect: Expected `T@resolve_variables`, found `T@resolve_block_document_references | int | dict[str, Any] | ... omitted 4 union elements`
- src/prefect/workers/base.py:234:20: error[invalid-argument-type] Argument expression after ** must be a mapping type: Found `T@resolve_variables`
+ src/prefect/workers/base.py:234:20: error[invalid-argument-type] Argument expression after ** must be a mapping type: Found `int | T@resolve_variables | float | ... omitted 4 union elements`
- Found 5411 diagnostics
+ Found 5406 diagnostics

static-frame (https://github.com/static-frame/static-frame)
- static_frame/core/index.py:580:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemLocReduces[TVContainer_co@loc, TVDtype@Index]`, found `InterGetItemLocReduces[Any | Bottom[Series[Any, Any]], TVDtype@Index]`
+ static_frame/core/index.py:580:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemLocReduces[TVContainer_co@loc, TVDtype@Index]`, found `InterGetItemLocReduces[Bottom[Series[Any, Any]] | Any, TVDtype@Index]`
- static_frame/core/node_selector.py:526:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemLocReduces[TVContainer_co@InterfaceSelectQuartet, Any]`, found `InterGetItemLocReduces[Unknown | Bottom[Series[Any, Any]], Any]`
+ static_frame/core/node_selector.py:526:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemLocReduces[TVContainer_co@InterfaceSelectQuartet, Any]`, found `InterGetItemLocReduces[Bottom[Series[Any, Any]] | Unknown, Any]`


</code></pre>


<p>No memory usage changes detected ‚úÖ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-15 17:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-15 17:47</div>
            <div class="timeline-body"><p>Actually this still needs some more work. ~~The following example isn&#x27;t supported yet~~ (edit: now supported):</p>
<pre><code>from typing import reveal_type, NewType

Foo = NewType(&#x27;Foo&#x27;, float)

def f(x: float | Foo):
    print(-x)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/chatgpt-codex-connector[bot]">@chatgpt-codex-connector[bot]</a> reviewed on 2026-01-15 17:50</div>
            <div class="timeline-body">üí° Codex Review
<p>Here are some automated review suggestions for this pull request.</p>
<p><strong>Reviewed commit:</strong> <code>8537aec04d</code></p>
 ‚ÑπÔ∏è About Codex in GitHub
<br>

<p><a href="http://chatgpt.com/codex/settings/general">Your team has set up Codex to review pull requests in this repo</a>. Reviews are triggered when you</p>
<ul>
<li>Open a pull request for review</li>
<li>Mark a draft as ready</li>
<li>Comment &quot;@codex review&quot;.</li>
</ul>
<p>If Codex has suggestions, it will comment; otherwise it will react with üëç.</p>
<p>Codex can also answer questions or update the PR. Try commenting &quot;@codex address that feedback&quot;.</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/chatgpt-codex-connector[bot]">@chatgpt-codex-connector[bot]</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:11749 on 2026-01-15 17:50</div>
            <div class="timeline-body"><p><strong><img src="https://img.shields.io/badge/P2-yellow?style=flat" alt="P2 Badge">  Preserve NewType self-binding for unary dunders</strong></p>
<p>This new arm always delegates unary ops on <code>NewType</code> instances to <code>concrete_base_type</code>, which changes how <code>Self</code> is bound for dunder methods: <code>-x</code> now binds <code>Self</code> to the base class, while a direct call <code>x.__neg__()</code> still binds <code>Self</code> to the <code>NewType</code> instance via normal member lookup. For a <code>NewType</code> wrapping a class that annotates <code>__neg__</code>/<code>__pos__</code>/<code>__invert__</code> with <code>typing.Self</code>, this makes <code>-x</code> return the base type instead of the <code>NewType</code>, diverging from <code>x.__neg__()</code> and from the pre-change behavior. Example: <code>class C: def __neg__(self) -&gt; Self: ...; NT = NewType(&#x27;NT&#x27;, C)</code>; <code>NT(C()).__neg__()</code> remains <code>NT</code> but <code>-NT(C())</code> would now infer <code>C</code>.</p>
<p>Useful? React with üëç¬†/ üëé.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2026-01-15 18:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:11749 on 2026-01-15 18:23</div>
            <div class="timeline-body"><p>Hmm, I&#x27;m not sure Codex is correct above (need to double check), but it is pointing me to a different issue. This works, because we explicitly added binary operation support:</p>
<pre><code>Foo = NewType(&quot;Foo&quot;, float)
x = Foo(3.14)
x + x
</code></pre>
<p>But <em>this</em> doesn&#x27;t currently work:</p>
<pre><code>x.__add__(x)  # error[invalid-argument-type]: Argument to bound method `__add__` is incorrect
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2026-01-17 05:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:11749 on 2026-01-17 05:25</div>
            <div class="timeline-body"><p>Actually, this isn&#x27;t a <code>NewType</code> issue. It doesn&#x27;t work with <code>float</code> either on <code>main</code> today (<a href="https://play.ty.dev/bf8006cc-6b5b-4c0d-ae96-21ea80b34dd1">playground</a>):</p>
<pre><code>def _(x: float, y: float):
    # This is fine.
    x + y

    # error[invalid-argument-type]: Argument to bound method `__add__` is incorrect
    x.__add__(y)
    #         ^ Expected `int`, found `int | float`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2026-01-17 05:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/ty_python_semantic/src/types.rs</code>:3231 on 2026-01-17 05:28</div>
            <div class="timeline-body"><p>The previous version of this fix was in <code>infer_unary_expression_type</code>, but that failed to handle more complex cases like:</p>
<pre><code>Foo = NewType(&quot;Foo&quot;, float)

def _(x: Foo | float):
    -x
</code></pre>
<p>This version of the fix here in <code>member_lookup_with_policy</code> handles all cases I&#x27;m aware of.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-17 05:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-17 05:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-17 05:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/chatgpt-codex-connector[bot]">@chatgpt-codex-connector[bot]</a> reviewed on 2026-01-17 05:33</div>
            <div class="timeline-body">üí° Codex Review
<p>Here are some automated review suggestions for this pull request.</p>
<p><strong>Reviewed commit:</strong> <code>5a6b34d80a</code></p>
 ‚ÑπÔ∏è About Codex in GitHub
<br>

<p><a href="http://chatgpt.com/codex/settings/general">Your team has set up Codex to review pull requests in this repo</a>. Reviews are triggered when you</p>
<ul>
<li>Open a pull request for review</li>
<li>Mark a draft as ready</li>
<li>Comment &quot;@codex review&quot;.</li>
</ul>
<p>If Codex has suggestions, it will comment; otherwise it will react with üëç.</p>
<p>Codex can also answer questions or update the PR. Try commenting &quot;@codex address that feedback&quot;.</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/chatgpt-codex-connector[bot]">@chatgpt-codex-connector[bot]</a> on <code>crates/ty_python_semantic/src/types.rs</code>:3231 on 2026-01-17 05:33</div>
            <div class="timeline-body"><p><strong><img src="https://img.shields.io/badge/P2-yellow?style=flat" alt="P2 Badge">  Preserve NewType self-binding during member lookup</strong></p>
<p>Delegating <code>Type::NewTypeInstance</code> member lookup to <code>concrete_base_type</code> means the descriptor protocol now binds the instance as the base type instead of the <code>NewType</code>, so methods/properties annotated with <code>typing.Self</code> (or <code>TypeVar</code> bound to <code>Self</code>) will now resolve to the base class. This is a regression for nominal <code>NewType</code> behavior: e.g., with <code>class C: def copy(self) -&gt; Self: ...; NT = NewType(&quot;NT&quot;, C)</code>, <code>NT(C()).copy()</code> will now infer <code>C</code> instead of <code>NT</code>. This only shows up when the base type uses <code>Self</code>-style return typing, but it changes type inference for regular attribute access beyond the float/complex unary operator fix.</p>
<p>Useful? React with üëç¬†/ üëé.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2026-01-17 05:34</div>
            <div class="timeline-body">

<code>ecosystem-analyzer</code> results
<p>| Lint rule | Added | Removed | Changed |
|-----------|------:|--------:|--------:|
| <code>invalid-return-type</code> | 1 | 4 | 5 |
| <code>invalid-argument-type</code> | 1 | 3 | 4 |
| <code>invalid-parameter-default</code> | 0 | 0 | 7 |
| <code>invalid-assignment</code> | 0 | 0 | 5 |
| <code>possibly-missing-attribute</code> | 0 | 3 | 1 |
| <code>unused-ignore-comment</code> | 3 | 0 | 0 |
| <code>invalid-await</code> | 0 | 2 | 0 |
| <code>unresolved-attribute</code> | 0 | 0 | 2 |
| <strong>Total</strong> | <strong>5</strong> | <strong>12</strong> | <strong>24</strong> |</p>
<p><strong><a href="https://46a4c18a.ty-ecosystem-ext.pages.dev/diff">Full report with detailed diff</a></strong> (<a href="https://46a4c18a.ty-ecosystem-ext.pages.dev/timing">timing results</a>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2026-01-20 18:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/ty_python_semantic/src/types.rs</code>:3231 on 2026-01-20 18:35</div>
            <div class="timeline-body"><p>This was a good catch. I added a failing test case in a1c1863bd397cb54e6c732c30b9e3550f50123e0 and fixed it in 82cdbfc32e722bcf75a48b50cfb4d41f3110d0f1. In short, I think this special case should <em>only</em> apply to the <code>float</code> and <code>complex</code> unions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-20 18:38</div>
            <div class="timeline-body"><p>This should be ready for proper review now :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-20 18:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types.rs</code>:3239 on 2026-01-20 18:49</div>
            <div class="timeline-body"><p>what would happen if a <code>foo</code> method were added to both <code>int</code> and <code>float</code> in the future[^1], and it had a <code>Self</code> return type?</p>
<pre><code>NT = NewType(float)

nt = NT(3.14)
reveal_type(nt.foo())  # `int | float` or `NT`?
</code></pre>
<p>[^1]: I&#x27;ll get writing the &quot;add a <code>foo</code> method to <code>float</code> and <code>int</code>&quot; PEP ASAP</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-20 18:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types.rs</code>:3239 on 2026-01-20 18:50</div>
            <div class="timeline-body"><p>(currently the only method that exists on both classes and returns <code>Self</code> is <code>__new__</code> -- <code>float.fromhex()</code> returns <code>Self</code>, but it only exists on the <code>float</code> class, not the <code>int</code> class)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-20 18:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types.rs</code>:3239 on 2026-01-20 18:53</div>
            <div class="timeline-body"><p>Uff, this does seem like a very silly and unlikely edge case I&#x27;m pointing out, though. And I&#x27;m not even sure what the correct answer there even is. I think you can just ignore me here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2026-01-20 18:55</div>
            <div class="timeline-body"><p>it makes me a bit sad how many edge cases NewTypes of <code>float</code> are causing (and how many carve-outs we have to add as a result), but I don&#x27;t see a way around it :( this LGTM!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oconnor663">@oconnor663</a> reviewed on 2026-01-20 19:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/oconnor663">@oconnor663</a> on <code>crates/ty_python_semantic/src/types.rs</code>:3239 on 2026-01-20 19:00</div>
            <div class="timeline-body"><p>Yeah I went looking for <code>Self</code> return types in typeshed, and it looked like they were all classmethods today, so I figured maybe I didn&#x27;t need a clear answer to this :sweat_smile: (Similarly, probably obvious to you, but for completeness / my notes: if I <em>subclass</em> <code>int</code> or <code>float</code>, and then <code>NewType</code> <em>that</em>, the base will be <code>NewTypeBase::ClassLiteral</code>, and this special case won&#x27;t apply.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-20 19:02</div>
            <div class="timeline-body"><p>Yeah it also makes me nervous. Like how many other things (now or in the future) will &quot;actually be unions on the inside&quot; in some sense, and will need to go through a similarly painful process of accumulating all these special cases?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-20 19:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/oconnor663">@oconnor663</a> on 2026-01-20 19:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2026-01-20 19:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 20:46:08 UTC
    </footer>
</body>
</html>
