<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update dependency smol-toml to v1.3.1 - astral-sh/ruff #14542</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update dependency smol-toml to v1.3.1</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/14542">#14542</a>
        opened by <a href="https://github.com/renovate">@renovate</a>
        on 2024-11-22 21:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/renovate">@renovate</a></div>
            <div class="timeline-body"><p>This PR contains the following updates:</p>
<p>| Package | Change | Age | Adoption | Passing | Confidence |
|---|---|---|---|---|---|
| <a href="https://redirect.github.com/squirrelchat/smol-toml">smol-toml</a> | <a href="https://renovatebot.com/diffs/npm/smol-toml/1.3.0/1.3.1"><code>1.3.0</code> -&gt; <code>1.3.1</code></a> | <a href="https://docs.renovatebot.com/merge-confidence/"><img src="https://developer.mend.io/api/mc/badges/age/npm/smol-toml/1.3.1?slim=true" alt="age" /></a> | <a href="https://docs.renovatebot.com/merge-confidence/"><img src="https://developer.mend.io/api/mc/badges/adoption/npm/smol-toml/1.3.1?slim=true" alt="adoption" /></a> | <a href="https://docs.renovatebot.com/merge-confidence/"><img src="https://developer.mend.io/api/mc/badges/compatibility/npm/smol-toml/1.3.0/1.3.1?slim=true" alt="passing" /></a> | <a href="https://docs.renovatebot.com/merge-confidence/"><img src="https://developer.mend.io/api/mc/badges/confidence/npm/smol-toml/1.3.0/1.3.1?slim=true" alt="confidence" /></a> |</p>
<h3>GitHub Vulnerability Alerts</h3>
<h4><a href="https://redirect.github.com/squirrelchat/smol-toml/security/advisories/GHSA-pqhp-25j4-6hq9">GHSA-pqhp-25j4-6hq9</a></h4>
<h3>Summary</h3>
<p>An attacker can send a maliciously crafted TOML to cause the parser to crash because of a stack overflow caused by a deeply nested inline structure. A similar problem occurs when attempting to stringify deeply nested objects.</p>
<p>The library does not limit the maximum exploration depth while parsing or producing TOML documents, nor does it offer a way to do so.</p>
<h3>Proof of concept</h3>
<pre><code class="language-js">require(&quot;smol-toml&quot;).parse(&quot;e=&quot; + &quot;{e=&quot;.repeat(9999) + &quot;{}&quot; + &quot;}&quot;.repeat(9999))
</code></pre>
<h3>Impact</h3>
<p>Applications which parse arbitrary TOML documents may suffer availability issues if they receive malicious input. If uncaught, the crash may cause the application itself to crash. The impact is deemed minor, as the function is already likely to throw errors on invalid input and therefore to properly handle errors.</p>
<p>Due to the design of most JavaScript runtimes, the uncontrolled recursion does not lead to excessive memory usage and the execution is quickly aborted.</p>
<p>As a reminder, it is <strong>strongly</strong> advised when working with untrusted user input to expect errors to occur and to appropriately catch them.</p>
<h3>Patches</h3>
<p>Version 1.3.1 offers a mechanism to limit the exploration depth before halting with a <code>TomlError</code> when parsing, with a default cap of 1000. A same mechanism has been implemented for stringifying objects.</p>
<p><strong>Please note that the parser will <em>still</em> throw an error upon such cases.</strong> It is, however, a now-controlled and documented behavior of the library.</p>
<h3>Workarounds</h3>
<p>Wrap all invocations of <code>parse</code> and <code>stringify</code> in a try/catch block.</p>
<hr />
<h3>Release Notes</h3>
<details>
<summary>squirrelchat/smol-toml (smol-toml)</summary>

<h3><a href="https://redirect.github.com/squirrelchat/smol-toml/compare/v1.3.0...5ed3ead57e7cff51ecd1543c4dc6a8e0825458bd"><code>v1.3.1</code></a></h3>
<p><a href="https://redirect.github.com/squirrelchat/smol-toml/compare/v1.3.0...5ed3ead57e7cff51ecd1543c4dc6a8e0825458bd">Compare Source</a></p>
</details>

<hr />
<h3>Configuration</h3>
<p>ðŸ“… <strong>Schedule</strong>: Branch creation - &quot;&quot; (UTC), Automerge - At any time (no schedule defined).</p>
<p>ðŸš¦ <strong>Automerge</strong>: Disabled by config. Please merge this manually once you are satisfied.</p>
<p>â™» <strong>Rebasing</strong>: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.</p>
<p>ðŸ”• <strong>Ignore</strong>: Close this PR and you won't be reminded about this update again.</p>
<hr />
<ul>
<li>[ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box</li>
</ul>
<hr />
<p>This PR was generated by <a href="https://mend.io/renovate/">Mend Renovate</a>. View the <a href="https://developer.mend.io/github/astral-sh/ruff">repository job log</a>.</p>
<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzOS4xOS4wIiwidXBkYXRlZEluVmVyIjoiMzkuMTkuMCIsInRhcmdldEJyYW5jaCI6Im1haW4iLCJsYWJlbHMiOlsiaW50ZXJuYWwiLCJzZWN1cml0eSJdfQ==-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @renovate[bot] on 2024-11-22 21:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">security</span> added by @renovate[bot] on 2024-11-22 21:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-11-22 21:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">security</span> removed by @MichaReiser on 2024-11-22 21:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2024-11-22 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-11-22 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-11-22 21:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:07:56 UTC
    </footer>
</body>
</html>
