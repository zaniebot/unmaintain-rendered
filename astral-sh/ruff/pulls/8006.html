<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Respect `tab-size` setting in formatter - astral-sh/ruff #8006</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Respect <code>tab-size</code> setting in formatter</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/8006">#8006</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2023-10-17 10:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body">Summary
<p>This PR changes the formatter to use the global <code>tab-size</code> to configure the number of spaces used for soft-tabs or width of a hard-tab character.</p>
<p>Closes <a href="https://github.com/astral-sh/ruff/issues/7648">astral-sh/ruff#7648</a></p>
Open Questions
<p>I&#x27;m still somewhat undecided whether we should support changing the number of spaces for soft tabs. I only found few projects that set <code>tab-size = 2</code> or <code>pyink-indentation = 2</code>.
But we may as well support it for as long as we default to 4 spaces.</p>
Test Plan
<p>Changed integration test</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-17 10:17</div>
            <div class="timeline-body"><p>Current dependencies on/for this PR:</p>
<ul>
<li>main<ul>
<li><strong>PR #8000</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8000"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a><ul>
<li><strong>PR #8002</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8002"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a><ul>
<li><strong>PR #8032</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8032"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a></li>
<li><strong>PR #8006</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8006"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a>  ðŸ‘ˆ<ul>
<li><strong>PR #8035</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8035"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a><ul>
<li><strong>PR #8010</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8010"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a>
* <strong>PR #8082</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8082"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a>
* <strong>PR #8088</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8088"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a>
* <strong>PR #8039</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8039"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a></li>
</ul>
</li>
<li><strong>PR #8031</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8031"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>This comment was auto-generated by <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8006?utm_source=stack-comment">Graphite</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-17 10:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/konstin">@konstin</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-17 10:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for <a href="https://github.com/konstin">@konstin</a> removed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-17 10:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-17 10:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-17 10:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-17 10:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-10-18 06:45</div>
            <div class="timeline-body">PR Check Results
Ecosystem
<p>âœ… ecosystem check detected no changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-10-18 13:49</div>
            <div class="timeline-body"><p>Cool, so this both respects the tab width for tab-based indentation and allows changing the number of spaces?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eli-schwartz">@eli-schwartz</a> on 2023-10-18 22:30</div>
            <div class="timeline-body"><p>Maybe this should look at <code>.editorconfig</code> as well?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-18 23:47</div>
            <div class="timeline-body"><blockquote>
<p>Cool, so this both respects the tab width for tab-based indentation and allows changing the number of spaces?</p>
</blockquote>
<p>That&#x27;s correct. It&#x27;s the one setting that configures the indentation.</p>
<blockquote>
<p>Maybe this should look at <code>.editorconfig</code> as well?</p>
</blockquote>
<p>We may want to support a <code>ruff init</code> command eventually that copies the relevant settings from the <code>editorconfig</code>. We want to avoid reading the editorconfig ourselves because it then becomes unclear how it would interact with configuration inheritance and it slows down the file traversal (because it increases the number of configuration files that ruff needs to probe for every directory)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-18 23:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-18 23:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-10-18 23:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a> on 2023-10-20 07:10</div>
            <div class="timeline-body"><blockquote>
<p>I&#x27;m still somewhat undecided whether we should support changing the number of spaces for soft tabs. I only found few projects that set <code>tab-size = 2</code></p>
</blockquote>
<p>Do you mean editor-config&#x27;s indent size?  If so, Google&#x27;s Python style guide has it set to two.  So that&#x27;s practically every Google project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-20 07:12</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>I&#x27;m still somewhat undecided whether we should support changing the number of spaces for soft tabs. I only found few projects that set <code>tab-size = 2</code></p>
</blockquote>
<p>Do you mean editor-config&#x27;s indent size? If so, Google&#x27;s Python style guide has it set to two. So that&#x27;s practically every Google project.</p>
</blockquote>
<p>Yes, that&#x27;s what I was considering. We decided to support configuring the number of spaces.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:58:23 UTC
    </footer>
</body>
</html>
