<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use ubuntu-24 to run benchmarks - astral-sh/ruff #16145</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use ubuntu-24 to run benchmarks</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16145">#16145</a>
        opened by <a href="https://github.com/Glyphack">@Glyphack</a>
        on 2025-02-13 20:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/Glyphack">@Glyphack</a> on 2025-02-13 20:32</div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>The CI benchmark step is broken with:</p>
<pre><code>/home/runner/.cargo/bin/cargo-codspeed: /lib/x86_64-linux-gnu/libc.so.6: version `GLIBC_2.39' not found (required by /home/runner/.cargo/bin/cargo-codspeed)
</code></pre>
<p><a href="https://github.com/astral-sh/ruff/actions/runs/13314818925/job/37186139311">main CI</a></p>
<p>It was also failing in my PR. I updated the ubuntu version in my PR and it succeeded:
https://github.com/astral-sh/ruff/pull/16144/commits/d335cef9ab334032f391120b280a832bd8447085</p>
<p>Since it fixed the issue I am changing this to benchmark to use <code>ubuntu-latest</code> (since their <a href="https://github.com/CodSpeedHQ/action">actions repo</a> is using this version in the examples) I am sure between 22.04 and latest.</p>
<h2>Test Plan</h2>
<!-- How was it tested? -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-02-13 20:41</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+0 -1 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<details><summary><a href="https://github.com/rotki/rotki">rotki/rotki</a> (+0 -1 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
- <a href='https://github.com/rotki/rotki/blob/c6a192bb461d0bc317b61659254ef76582b4ce9c/rotkehlchen/utils/mixins/enums.py#L12'>rotkehlchen/utils/mixins/enums.py:12:16:</a> PYI019 [*] Use `Self` instead of custom TypeVar `T`
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PYI019 | 1 | 0 | 1 | 0 | 0 |</p>
</p>
</details>

<h3>Formatter (stable)</h3>
<p>✅ ecosystem check detected no format changes.</p>
<h3>Formatter (preview)</h3>
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by @ntBre on 2025-02-13 20:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-02-13 20:55</div>
            <div class="timeline-body"><p>I guess codspeed must support ubuntu 24 now. We pinned to 22 in #13743.</p>
<p>Thanks for catching this! I guess my only question is if we should just bump to <code>ubuntu-24.04</code> or go back to <code>latest</code>.</p>
<p>cc @MichaReiser</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Glyphack">@Glyphack</a> on 2025-02-13 21:05</div>
            <div class="timeline-body"><p>I’m not sure either. Both versions seem to be working in this PR I used latest and in my original PR that is linked I used 24.04. I decided to use latest since I saw that's the version used in https://docs.codspeed.io/integrations/ci/github-actions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-13 21:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>.github/workflows/ci.yaml</code>:715 on 2025-02-13 21:53</div>
            <div class="timeline-body"><p>We had some issues in the past where GitHub upgrade and downgraded us between versions which broke CI (because of caching). Could you fix the runner to whatever latest resolves today (24?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Glyphack">@Glyphack</a> on <code>.github/workflows/ci.yaml</code>:715 on 2025-02-13 21:54</div>
            <div class="timeline-body"><p>Yes I am switching to 24.04 which worked for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Glyphack">@Glyphack</a> reviewed on 2025-02-13 21:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Use ubuntu-latest to run benchmarks" to "Use ubuntu-24 to run benchmarks" by @MichaReiser on 2025-02-13 22:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2025-02-13 22:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-02-13 22:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-05-21 20:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 18:51:28 UTC
    </footer>
</body>
</html>
