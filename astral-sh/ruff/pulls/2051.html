<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refactor, decouple and support &quot;PL&quot; - astral-sh/ruff #2051</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Refactor, decouple and support &quot;PL&quot;</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/2051">#2051</a>
        opened by <a href="https://github.com/not-my-profile">@not-my-profile</a>
        on 2023-01-21 07:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-21 07:18</div>
            <div class="timeline-body"><p>Except for the <code>Support prefix &quot;PL&quot; to select all of Pylint</code> commit and the minor README change this is purely a refactor.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-22 04:12</div>
            <div class="timeline-body"><p>Rebased since #2078 in the meantime has implemented the <code>--prefix</code> argument I had also implemented here.</p>
<p>Also reworded the message of the now 2nd last commit to be more accurate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @not-my-profile on 2023-01-22 04:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @not-my-profile on 2023-01-22 04:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-22 05:05</div>
            <div class="timeline-body"><p>Updated the 2nd last commit to simplify the logic/be more declarative.</p>
<p>After this PR my next plan is to rework the <code>RuleSelector</code> implementation to enable the introduction of the flexible many to many mapping between codes and rules, I have in mind.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/settings/configuration.rs</code>:37 on 2023-01-22 05:15</div>
            <div class="timeline-body"><p>Why pull these up, rather than retain the sort? Semantically, what's the grouping here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>README.md</code>:1111 on 2023-01-22 05:16</div>
            <div class="timeline-body"><p>I feel like this was changed intentionally at some point, to spell out all of the rules, but maybe that was actually for Pycodestyle, and Pylint ended up this way as a result of that convention?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>ruff.schema.json</code>:1558 on 2023-01-22 05:16</div>
            <div class="timeline-body"><p>To be clear, does <code>PLC</code> still work to select the <code>PLC</code> codes? Or just <code>PL</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/settings/mod.rs</code>:324 on 2023-01-22 05:17</div>
            <div class="timeline-body"><p>How does the specificity work between <code>PL</code> and (e.g.) <code>PLC</code>? What would <code>--select PLC --ignore PL</code> do?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-01-22 05:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a> reviewed on 2023-01-22 05:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on <code>src/settings/configuration.rs</code>:37 on 2023-01-22 05:21</div>
            <div class="timeline-body"><p>These fields control which rules are enabled ... the others don't. Except <code>per_file_ignores</code> all of these fields become a <code>RuleTable</code> in the <code>Settings</code> struct.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a> reviewed on 2023-01-22 05:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on <code>README.md</code>:1111 on 2023-01-22 05:23</div>
            <div class="timeline-body"><p>I don't know the history behind this  line. But since 9dc66b5a6546926aff0d04a0280401f939f3a3d8 we have subheadings for these codes anyway, so I think listing all of them here is a bit redundant ... besides this change servers to document the new &quot;PL&quot; selector.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on <code>ruff.schema.json</code>:1558 on 2023-01-22 05:25</div>
            <div class="timeline-body"><p>Yes PLC, PLE, PLR, PLW all still work as previously ... it's just that PL now also works ... i.e. the change is backwards compatible.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a> reviewed on 2023-01-22 05:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a> reviewed on 2023-01-22 05:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on <code>src/settings/mod.rs</code>:324 on 2023-01-22 05:48</div>
            <div class="timeline-body"><p>Very good question! ... thanks that was indeed broken ... I just force pushed a fix that makes this work as expected (the more specific selector takes precedence).</p>
<p>Please note that all the special logic that was necessary to implement the <code>PL</code> code will be removed in my followup PR that changes how <code>RuleSelector</code> works (which is also why I didn't implement special test cases for PL since these will very shortly be redundant since PL will be just a prefix like any other prefix that's configured via the <code>#[prefix]</code> macro attribute).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on <code>src/settings/mod.rs</code>:324 on 2023-01-22 05:57</div>
            <div class="timeline-body"><p>Is that alright?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a> reviewed on 2023-01-22 05:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-01-22 06:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/settings/configuration.rs</code>:37 on 2023-01-22 06:00</div>
            <div class="timeline-body"><p>Sounds good. It might be nice to have a comment like <code>// Rule enablement</code> or similar, and something else for the next section, even just to show that the distinction is intentional and not overlooked formatting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-01-22 06:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/settings/mod.rs</code>:324 on 2023-01-22 06:01</div>
            <div class="timeline-body"><p>Ah, ok, that's reasonable. I see the special-casing now. It effectively treats the <code>R</code> in <code>PLR0</code> as a numerical piece, IIUC.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a> reviewed on 2023-01-22 06:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on <code>src/settings/mod.rs</code>:324 on 2023-01-22 06:09</div>
            <div class="timeline-body"><p>Yes exactly that's the fix I just implemented.</p>
<p>And my follow up PR will change the rule selector parsing to firstly parse the configured <code>#[prefix]</code>es so <code>PLR0</code> will be split to <code>PL</code> (= <code>Pylint</code>), <code>R0</code>  ... which will let us remove that special casing :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-01-22 16:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-22 16:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-22 16:51</div>
            <div class="timeline-body"><p>Thanks, sorry for not merging last night, I had to sleep :joy:</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 04:54:11 UTC
    </footer>
</body>
</html>
