<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix singular and plural for &quot;error(s)&quot; - astral-sh/ruff #2157</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fix singular and plural for &quot;error(s)&quot;</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/2157">#2157</a>
        opened by <a href="https://github.com/hugovk">@hugovk</a>
        on 2023-01-25 14:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hugovk">@hugovk</a></div>
            <div class="timeline-body"><p>Computers are really bad at some things, but one thing they're really good at is counting :)</p>
<p>So let's replace:</p>
<pre><code class="language-console">$ ruff 1.py
1.py:1:89: E501 Line too long (115 &gt; 88 characters)
Found 1 error(s).
$ ruff 2.py
2.py:1:89: E501 Line too long (115 &gt; 88 characters)
2.py:2:89: E501 Line too long (115 &gt; 88 characters)
Found 2 error(s).
</code></pre>
<p>With:</p>
<pre><code class="language-console">$ target/debug/ruff 1.py
warning: debug build without --no-cache.
1.py:1:89: E501 Line too long (115 &gt; 88 characters)
Found 1 error.
$ target/debug/ruff 2.py
warning: debug build without --no-cache.
2.py:1:89: E501 Line too long (115 &gt; 88 characters)
2.py:2:89: E501 Line too long (115 &gt; 88 characters)
Found 2 errors.
</code></pre>
<hr />
<p>Also some CI updates:</p>
<ul>
<li>Let contributors test feature branches, so we can properly test our code on the CI <em>before</em> opening PRs</li>
<li>Bump GitHub Actions</li>
<li>Enable colour on the CI logs for readability, because GitHub Actions isn't a tty: https://github.com/actions/runner/issues/241. Compare:<ul>
<li>https://github.com/charliermarsh/ruff/actions/runs/4003221441/jobs/6871125904</li>
<li>https://github.com/hugovk/ruff/actions/runs/4007012752/jobs/6879284777</li>
</ul>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-25 15:20</div>
            <div class="timeline-body"><p>This is awesome. Will merge soon. I want to get the Windows compatibility PR in first. Then, I'm happy to help rebase this if there are any conflicts.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @charliermarsh on 2023-01-25 15:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-25 15:21</div>
            <div class="timeline-body"><p>Yeah I agree, nice changes! Since these are separate changes, I think merging by rebase would be in order.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-01-25 20:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-25 20:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-01-25 20:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/andersk">@andersk</a> reviewed on 2023-01-25 21:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/andersk">@andersk</a> on <code>.github/workflows/ci.yaml</code>:3 on 2023-01-25 21:14</div>
            <div class="timeline-body"><p>The issue with this configuration is that it always results in duplicate CI runs for pull requests: once <a href="https://github.com/hugovk/ruff/actions/runs/4007012752">for the <code>push</code> event</a> in the head repository and once <a href="https://github.com/charliermarsh/ruff/actions/runs/4007137037">for the <code>pull_request</code> event</a> in the base repository.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hugovk">@hugovk</a> reviewed on 2023-01-25 21:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/hugovk">@hugovk</a> on <code>.github/workflows/ci.yaml</code>:3 on 2023-01-25 21:21</div>
            <div class="timeline-body"><p>Yes, I think that's fine.</p>
<p>First, so contributors can see test results it on their forks first, to make sure it passes before proceeding; and then again for the base repo, so the test results can be seen by maintainers in the PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-01-25 21:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>.github/workflows/ci.yaml</code>:3 on 2023-01-25 21:52</div>
            <div class="timeline-body"><p>Hmm, yeah, this actually does seem non-ideal, since PRs in the main repo are now showing all the duplicate tasks. It'd be nice to at least get rid of those somehow.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/andersk">@andersk</a> reviewed on 2023-01-25 22:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/andersk">@andersk</a> on <code>.github/workflows/ci.yaml</code>:3 on 2023-01-25 22:03</div>
            <div class="timeline-body"><p>Iâ€™d recommend</p>
<pre><code class="language-yaml">on:
  push:
    branches: [main]
  pull_request:
  workflow_dispatch:
</code></pre>
<p>and in the unusual case where a contributor wants to run CI on their fork before creating a pull request, <code>workflow_dispatch</code> allows them to <a href="https://docs.github.com/en/actions/managing-workflow-runs/manually-running-a-workflow#running-a-workflow">trigger it manually</a>.</p>
<ul>
<li>#2178</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-01-25 22:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>.github/workflows/ci.yaml</code>:3 on 2023-01-25 22:04</div>
            <div class="timeline-body"><p>Thank you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/andersk">@andersk</a> reviewed on 2023-01-25 23:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/andersk">@andersk</a> on <code>ruff_cli/src/printer.rs</code>:102 on 2023-01-25 23:11</div>
            <div class="timeline-body"><ul>
<li>#2181</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/hugovk">@hugovk</a> on <code>.github/workflows/ci.yaml</code>:3 on 2023-01-26 16:40</div>
            <div class="timeline-body"><p>Hi!</p>
<p><code>workflow_dispatch</code> is good for manual triggers, but as a contributor who wants to test my code on CI before opening PRs, the amount of clicks it requires to start each build is pretty tedious. And CI should be automatic not manual.</p>
<p>CIs are amazing things - you can automatically test and lint your code on all these different versions! We should encourage contributors to use them. But if they don't want to, that's fine, and GitHub Actions is normally disabled for forks.</p>
<p>As another approach, how does this config look?</p>
<pre><code class="language-yml">    # We want to run on external PRs, but not on our own internal PRs as they'll be run
    # by the push to the branch.
    if: github.event_name == 'push' || github.event.pull_request.head.repo.full_name != github.repository
</code></pre>
<p>re: https://github.com/has2k1/plotnine/blob/f696c01f1602e422a29778c112005463992ed707/.github/workflows/testing.yml#L10-L12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hugovk">@hugovk</a> reviewed on 2023-01-26 16:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on <code>.github/workflows/ci.yaml</code>:3 on 2023-01-26 16:53</div>
            <div class="timeline-body"><p>I don't really see the problem with having to open a PR to run the CI ... you can open the PR as a draft and mark it as ready once the CI has passed if you care about that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a> reviewed on 2023-01-26 16:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/hugovk">@hugovk</a> on <code>.github/workflows/ci.yaml</code>:3 on 2023-01-26 22:00</div>
            <div class="timeline-body"><p>One reason is to avoid noise on the tracker, for example, there may be lots of commits/rebases etc as things progress.</p>
<p>Another option is to follow the lead of things like pytest and pre-commit, and run the CI for branches prefixed with <code>test-me-</code>:</p>
<pre><code class="language-yml">on:
  push:
    branches: [main, test-me-*]
</code></pre>
<p>https://github.com/pytest-dev/pytest/blob/ca40380e99c2cdaab1d0c041f9f28cff37ef8ff9/.github/workflows/test.yml#L3-L16</p>
<p>https://github.com/pre-commit/pre-commit/blob/dd8e717ed6022209a2b0cecf5c75460eb60e548e/.github/workflows/main.yml#L3-L5</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hugovk">@hugovk</a> reviewed on 2023-01-26 22:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/andersk">@andersk</a> reviewed on 2023-01-26 23:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/andersk">@andersk</a> on <code>.github/workflows/ci.yaml</code>:3 on 2023-01-26 23:07</div>
            <div class="timeline-body"><p>You could open a PR in your own fork.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:55:46 UTC
    </footer>
</body>
</html>
