<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ability to perform integration test on Jupyter notebooks - astral-sh/ruff #5076</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ability to perform integration test on Jupyter notebooks</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/5076">#5076</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2023-06-14 05:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a></div>
            <div class="timeline-body">Summary
<p>Ability to perform integration test on Jupyter notebooks</p>
<p>Part of #1218</p>
Test Plan
<p><code>cargo test</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-14 05:11</div>
            <div class="timeline-body"><p>Current dependencies on/for this PR:</p>
<ul>
<li>main<ul>
<li><strong>PR #5076</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/5076"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite"></a>  ðŸ‘ˆ</li>
</ul>
</li>
</ul>
<p>This comment was auto-generated by <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/5076?utm_source=stack-comment">Graphite</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2023-06-14 05:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff/src/jupyter/snapshots/ruff__jupyter__notebook__test__import_sorting.snap</code>:14 on 2023-06-14 05:16</div>
            <div class="timeline-body"><p>Oh right. I&#x27;ll need to update the printer to include cell number and use Jupyter index.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2023-06-14 05:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff/src/test.rs</code>:71 on 2023-06-14 05:17</div>
            <div class="timeline-body"><p>Should we use snapshots as we&#x27;ll be asserting the content here itself?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-06-14 05:26</div>
            <div class="timeline-body">PR Check Results
Ecosystem
<p>âœ… ecosystem check detected no changes.</p>
Benchmark
Linux
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
formatter/large/dataset.py                 1.00      7.2Â±0.43ms     5.6 MB/sec    1.02      7.4Â±0.37ms     5.5 MB/sec
formatter/numpy/ctypeslib.py               1.00  1550.4Â±94.02Âµs    10.7 MB/sec    1.02  1578.8Â±68.36Âµs    10.5 MB/sec
formatter/numpy/globals.py                 1.00   152.1Â±10.60Âµs    19.4 MB/sec    1.02    155.5Â±9.85Âµs    19.0 MB/sec
formatter/pydantic/types.py                1.04      3.2Â±0.17ms     8.1 MB/sec    1.00      3.0Â±0.19ms     8.4 MB/sec
linter/all-rules/large/dataset.py          1.00     16.3Â±1.00ms     2.5 MB/sec    1.00     16.2Â±0.72ms     2.5 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      3.7Â±0.20ms     4.4 MB/sec    1.03      3.8Â±0.17ms     4.3 MB/sec
linter/all-rules/numpy/globals.py          1.00   476.0Â±26.55Âµs     6.2 MB/sec    1.04   495.1Â±29.01Âµs     6.0 MB/sec
linter/all-rules/pydantic/types.py         1.02      6.8Â±0.36ms     3.8 MB/sec    1.00      6.7Â±0.26ms     3.8 MB/sec
linter/default-rules/large/dataset.py      1.02      7.9Â±0.40ms     5.1 MB/sec    1.00      7.8Â±0.37ms     5.2 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00  1683.5Â±86.41Âµs     9.9 MB/sec    1.00  1689.4Â±87.34Âµs     9.9 MB/sec
linter/default-rules/numpy/globals.py      1.02    199.3Â±8.77Âµs    14.8 MB/sec    1.00    196.1Â±9.63Âµs    15.1 MB/sec
linter/default-rules/pydantic/types.py     1.08      3.9Â±0.25ms     6.5 MB/sec    1.00      3.6Â±0.17ms     7.1 MB/sec
</code></pre>
Windows
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
formatter/large/dataset.py                 1.00      9.6Â±0.36ms     4.2 MB/sec    1.03      9.9Â±0.43ms     4.1 MB/sec
formatter/numpy/ctypeslib.py               1.00      2.0Â±0.14ms     8.3 MB/sec    1.01      2.0Â±0.11ms     8.2 MB/sec
formatter/numpy/globals.py                 1.00   191.0Â±13.93Âµs    15.4 MB/sec    1.02   194.2Â±13.04Âµs    15.2 MB/sec
formatter/pydantic/types.py                1.00      4.0Â±0.19ms     6.5 MB/sec    1.04      4.1Â±0.31ms     6.2 MB/sec
linter/all-rules/large/dataset.py          1.00     21.1Â±0.84ms  1975.3 KB/sec    1.00     21.1Â±0.73ms  1972.0 KB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      5.3Â±0.21ms     3.2 MB/sec    1.00      5.2Â±0.23ms     3.2 MB/sec
linter/all-rules/numpy/globals.py          1.00   627.3Â±36.10Âµs     4.7 MB/sec    1.00   629.4Â±39.82Âµs     4.7 MB/sec
linter/all-rules/pydantic/types.py         1.00      9.0Â±0.41ms     2.8 MB/sec    1.02      9.2Â±0.68ms     2.8 MB/sec
linter/default-rules/large/dataset.py      1.00     10.4Â±0.35ms     3.9 MB/sec    1.02     10.6Â±0.40ms     3.8 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.01      2.2Â±0.11ms     7.5 MB/sec    1.00      2.2Â±0.12ms     7.5 MB/sec
linter/default-rules/numpy/globals.py      1.01   253.7Â±14.61Âµs    11.6 MB/sec    1.00   251.5Â±15.96Âµs    11.7 MB/sec
linter/default-rules/pydantic/types.py     1.00      4.7Â±0.21ms     5.4 MB/sec    1.03      4.9Â±0.33ms     5.2 MB/sec
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff/src/test.rs</code>:71 on 2023-06-14 06:33</div>
            <div class="timeline-body"><p>You could move the <code> assert_messages!(diagnostics);</code> here but it&#x27;s fine either way</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2023-06-14 06:33</div>
            <div class="timeline-body"><p>Looks good!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-14 17:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2023-06-14 17:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff/src/test.rs</code>:277 on 2023-06-14 17:46</div>
            <div class="timeline-body"><p>This seems a bit hacky to print cell information in the snapshot but just thought to put it out there to gain some feedback. The diff lines are also incorrect which should be fixed once the support is added.</p>
<p>We could just avoid creating snapshots and test out using <code>assert_eq!</code> which is already being done for <code>cell_offsets</code>, <code>index</code> and <code>content</code>.</p>
<p>For reference, this is the commit which is isolated to this change (<a href="https://github.com/astral-sh/ruff/pull/5076">astral-sh/ruff#5076</a>/commits/f63103b20cd2fd6a0ad9ebbc2fa75fc0eb79f6f2)</p>
<p>\cc @charliermarsh @konstin</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-06-14 19:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff/src/test.rs</code>:277 on 2023-06-14 19:07</div>
            <div class="timeline-body"><p>i like it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-06-14 19:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/test.rs</code>:277 on 2023-06-14 19:35</div>
            <div class="timeline-body"><p>I trust @konstin on this one, not gonna review closely ;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-15 02:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-15 02:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-06-15 02:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-15 02:40</div>
            <div class="timeline-body"><p>I&#x27;ll add some more tests now that we&#x27;ve the ability to do so!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:54:29 UTC
    </footer>
</body>
</html>
