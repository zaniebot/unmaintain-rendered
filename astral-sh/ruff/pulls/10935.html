<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Rust crate annotate-snippets to 0.11.0 - astral-sh/ruff #10935</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update Rust crate annotate-snippets to 0.11.0</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/10935">#10935</a>
        opened by <a href="https://github.com/renovate">@renovate</a>
        on 2024-04-15 01:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/renovate">@renovate</a></div>
            <div class="timeline-body"><p><a href="https://renovatebot.com"><img src="https://app.renovatebot.com/images/banner.svg" alt="Mend Renovate" /></a></p>
<p>This PR contains the following updates:</p>
<p>| Package | Type | Update | Change |
|---|---|---|---|
| <a href="https://togithub.com/rust-lang/annotate-snippets-rs">annotate-snippets</a> | workspace.dependencies | minor | <code>0.9.2</code> -&gt; <code>0.11.0</code> |</p>
<hr />
<h3>Release Notes</h3>
<details>
<summary>rust-lang/annotate-snippets-rs (annotate-snippets)</summary>

<h3><a href="https://togithub.com/rust-lang/annotate-snippets-rs/blob/HEAD/CHANGELOG.md#0111---2024-03-21"><code>v0.11.1</code></a></h3>
<p><a href="https://togithub.com/rust-lang/annotate-snippets-rs/compare/0.11.0...0.11.1">Compare Source</a></p>
<h5>Fixes</h5>
<ul>
<li>Switch <code>fold</code> to use rustc's logic: always show first and last line of folded section and detect if its worth folding</li>
<li>When <code>fold</code>ing the start of a <code>source</code>, don't show anything, like we do for the end of the <code>source</code></li>
<li>Render an underline for an empty span on <code>Annotation</code>s</li>
</ul>
<h3><a href="https://togithub.com/rust-lang/annotate-snippets-rs/blob/HEAD/CHANGELOG.md#0110---2024-03-15"><code>v0.11.0</code></a></h3>
<p><a href="https://togithub.com/rust-lang/annotate-snippets-rs/compare/0.10.2...0.11.0">Compare Source</a></p>
<h5>Breaking Changes</h5>
<ul>
<li>Switched from char spans to byte spans <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/90/commits/b65b8cabcd34da9fed88490a7a1cd8085777706a">#â€‹90</a></li>
<li>Renamed <code>AnnotationType</code> to <code>Level</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/94/commits/b49f9471d920c7f561fa61970039b0ba44e448ac">#â€‹94</a></li>
<li>Renamed <code>SourceAnnotation</code> to <code>Annotation</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/94/commits/bbf9c5fe27e83652433151cbfc7d6cafc02a8c47">#â€‹94</a></li>
<li>Renamed <code>Snippet</code> to <code>Message</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/94/commits/105da760b6e1bd4cfce4c642ac679ecf6011f511">#â€‹94</a></li>
<li>Renamed <code>Slice</code> to <code>Snippet</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/94/commits/1c18950300cf8b93d92d89e9797ed0bae02c0a37">#â€‹94</a></li>
<li><code>Message</code>, <code>Snippet</code>, <code>Annotation</code> and <code>Level</code> can only be built with a builder pattern <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/91">#â€‹91</a> and <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/94">#â€‹94</a></li>
<li><code>Annotation</code> labels are now optional <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/94/commits/c821084068a1acd2688b6c8d0b3423e143d359e2">#â€‹94</a></li>
<li><code>Annotation</code> now takes in <code>Range&lt;usize&gt;</code> instead of <code>(usize, usize)</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/90/commits/c3bd0c3a63f983f5f2b4793a099972b1f6e97a9f">#â€‹90</a></li>
<li><code>Margin</code> is now an internal detail, only <code>term_width</code> is exposed <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/105">#â€‹105</a></li>
<li><code>footer</code> was generalized to be a <code>Message</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/98">#â€‹98</a></li>
</ul>
<h5>Added</h5>
<ul>
<li><code>term_width</code> was added to <code>Renderer</code> to control the rendering width <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/105">#â€‹105</a><ul>
<li>defaults to 140 when not set</li>
</ul>
</li>
</ul>
<h5>Fixed</h5>
<ul>
<li><code>Margin</code>s are now calculated per <code>Snippet</code>, rather than for the entire <code>Message</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/105">#â€‹105</a></li>
<li><code>Annotation</code>s can be created without labels</li>
</ul>
<h5>Features</h5>
<ul>
<li><code>footer</code> was expanded to allow annotating sources by accepting <code>Message</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/98">#â€‹98</a></li>
</ul>
<h3><a href="https://togithub.com/rust-lang/annotate-snippets-rs/blob/HEAD/CHANGELOG.md#0102---2024-02-29"><code>v0.10.2</code></a></h3>
<p><a href="https://togithub.com/rust-lang/annotate-snippets-rs/compare/0.10.1...0.10.2">Compare Source</a></p>
<h5>Added</h5>
<ul>
<li>Added <code>testing-colors</code> feature to remove platform-specific colors when testing
<a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/82">#â€‹82</a></li>
</ul>
<h3><a href="https://togithub.com/rust-lang/annotate-snippets-rs/blob/HEAD/CHANGELOG.md#0101---2024-01-04"><code>v0.10.1</code></a></h3>
<p><a href="https://togithub.com/rust-lang/annotate-snippets-rs/compare/0.10.0...0.10.1">Compare Source</a></p>
<h5>Fixed</h5>
<ul>
<li>Match <code>rustc</code>'s colors <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/73">#â€‹73</a></li>
<li>Allow highlighting one past the end of <code>source</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/74">#â€‹74</a></li>
</ul>
<h5>Compatibility</h5>
<ul>
<li>Set the minimum supported Rust version to <code>1.73.0</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/71">#â€‹71</a></li>
</ul>
<h3><a href="https://togithub.com/rust-lang/annotate-snippets-rs/blob/HEAD/CHANGELOG.md#0100---December-12-2023"><code>v0.10.0</code></a></h3>
<p><a href="https://togithub.com/rust-lang/annotate-snippets-rs/compare/0.9.2...0.10.0">Compare Source</a></p>
<h5>Added</h5>
<ul>
<li><code>Renderer</code> is now used for displaying a <code>Snippet</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/67/commits/9076cbf66336e5137b47dc7a52df2999b6c82598">#â€‹67</a><ul>
<li><code>Renderer</code> also controls the color scheme and formatting of the snippet</li>
</ul>
</li>
</ul>
<h5>Changed</h5>
<ul>
<li>Moved everything in the <code>snippet</code> to be in the crate root <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/67/commits/a1007ddf2fc6f76e960a4fc01207228e64e9fae7">#â€‹67</a></li>
</ul>
<h5>Breaking Changes</h5>
<ul>
<li><code>Renderer</code> now controls the color scheme and formatting of <code>Snippet</code>s <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/67/commits/d0c65b26493d60f86a82c5919ef736b35808c23a">#â€‹67</a></li>
<li>Removed the <code>Style</code> and <code>Stylesheet</code> traits, as color is controlled by <code>Renderer</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/67/commits/4affdfb50ea0670d85e52737c082c03f89ae8ada">#â€‹67</a></li>
<li>Replaced <a href="https://crates.io/crates/yansi-term"><code>yansi-term</code></a> with <a href="https://crates.io/crates/anstyle"><code>anstyle</code></a> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/67/commits/dfd4e87d6f31ec50d29af26d7310cff5e66ca978">#â€‹67</a><ul>
<li><code>anstyle</code> is designed primarily to exist in public APIs for interoperability</li>
<li><code>anstyle</code> is re-exported under <code>annotate_snippets::renderer</code></li>
</ul>
</li>
<li>Removed the <code>color</code> feature in favor of <code>Renderer::plain()</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/67/commits/dfd4e87d6f31ec50d29af26d7310cff5e66ca978">#â€‹67</a></li>
<li>Moved <code>Margin</code> to <code>renderer</code> module <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/67/commits/79f657ea252c3c0ce55fa69894ee520f8820b4bf">#â€‹67</a></li>
<li>Made the <code>display_list</code> module private <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/67/commits/da45f4858af3ec4c0d792ecc40225e27fdd2bac8">#â€‹67</a></li>
</ul>
<h5>Compatibility</h5>
<ul>
<li>Changed the edition to <code>2021</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/61">#â€‹61</a></li>
<li>Set the minimum supported Rust version to <code>1.70.0</code> <a href="https://togithub.com/rust-lang/annotate-snippets-rs/pull/61">#â€‹61</a></li>
</ul>
</details>

<hr />
<h3>Configuration</h3>
<p>ðŸ“… <strong>Schedule</strong>: Branch creation - &quot;on Monday&quot; (UTC), Automerge - At any time (no schedule defined).</p>
<p>ðŸš¦ <strong>Automerge</strong>: Disabled by config. Please merge this manually once you are satisfied.</p>
<p>â™» <strong>Rebasing</strong>: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.</p>
<p>ðŸ”• <strong>Ignore</strong>: Close this PR and you won't be reminded about this update again.</p>
<hr />
<ul>
<li>[ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box</li>
</ul>
<hr />
<p>This PR has been generated by <a href="https://www.mend.io/free-developer-tools/renovate/">Mend Renovate</a>. View repository job log <a href="https://developer.mend.io/github/astral-sh/ruff">here</a>.</p>
<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy4yOTMuMCIsInVwZGF0ZWRJblZlciI6IjM3LjI5My4wIiwidGFyZ2V0QnJhbmNoIjoibWFpbiIsImxhYmVscyI6WyJpbnRlcm5hbCJdfQ==-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @renovate[bot] on 2024-04-15 01:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/renovate[bot]">@renovate[bot]</a> on 2024-04-15 01:06</div>
            <div class="timeline-body"><h3>âš  Artifact update problem</h3>
<p>Renovate failed to update an artifact related to this branch. You probably do not want to merge this PR as-is.</p>
<p>â™» Renovate will retry this branch, including artifacts, only when one of the following happens:</p>
<ul>
<li>any of the package files in this branch needs updating, or</li>
<li>the branch becomes conflicted, or</li>
<li>you click the rebase/retry checkbox if found above, or</li>
<li>you rename this PR's title to start with &quot;rebase!&quot; to trigger it manually</li>
</ul>
<p>The artifact failure details are included below:</p>
<h5>File name: Cargo.lock</h5>
<pre><code>Command failed: cargo update --config net.git-fetch-with-cli=true --manifest-path Cargo.toml --workspace
    Updating crates.io index
error: failed to select a version for `annotate-snippets`.
    ... required by package `ruff_linter v0.3.7 (/tmp/renovate/repos/github/astral-sh/ruff/crates/ruff_linter)`
    ... which satisfies path dependency `ruff_linter` (locked to 0.3.7) of package `ruff_benchmark v0.0.0 (/tmp/renovate/repos/github/astral-sh/ruff/crates/ruff_benchmark)`
versions that meet the requirements `^0.11.0` are: 0.11.1, 0.11.0

the package `ruff_linter` depends on `annotate-snippets`, with features: `color` but `annotate-snippets` does not have these features.


failed to select a version for `annotate-snippets` which could resolve this conflict

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-15 01:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/renovate[bot]">@renovate[bot]</a> on 2024-04-15 01:50</div>
            <div class="timeline-body"><h3>Renovate Ignore Notification</h3>
<p>Because you closed this PR without merging, Renovate will ignore this update (<code>0.11.0</code>). You will get a PR once a newer version is released. To ignore this dependency forever, add it to the <code>ignoreDeps</code> array of your Renovate config.</p>
<p>If you accidentally closed this PR, or if you changed your mind: rename this PR to get a fresh replacement PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-04-15 01:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:03:45 UTC
    </footer>
</body>
</html>
