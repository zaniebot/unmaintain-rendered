<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Refine the warnings about incompatible linter options - astral-sh/ruff #8196</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Refine the warnings about incompatible linter options</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/8196">#8196</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2023-10-25 03:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body">Summary
<p>Avoid warning about incompatible rules except if their configuration directly conflicts with the formatter. This should reduce the noise and potentially the need for <a href="https://github.com/astral-sh/ruff/issues/8175">astral-sh/ruff#8175</a> and <a href="https://github.com/astral-sh/ruff/issues/8185">astral-sh/ruff#8185</a></p>
<p>I also extended the rule and option documentation to mention any potential formatter incompatibilities or whether they&#x27;re redundant when using the formatter.</p>
<ul>
<li><code>LineTooLong</code>: This is a use case we explicitly want to support. Don&#x27;t warn about it</li>
<li><code>TabIndentation</code>, <code>IndentWithSpaces</code>: Only warn if <code>indent-style=&quot;tab&quot;</code></li>
<li><code>IndentationWithInvalidMultiple</code>, <code>IndentationWithInvalidMultipleComment</code>: Only warn if <code>indent-width != 4</code></li>
<li><code>OverIndented</code>: Don&#x27;t warn, but mention that the rule is redundant</li>
<li><code>BadQuotesInlineString</code>: Warn if quote setting is different from <code>format.quote-style</code></li>
<li><code>BadQuotesMultilineString</code>, <code>BadQuotesDocstring</code>: Warn if <code>quote != &quot;double&quot;</code></li>
</ul>
Test Plan
<p>I added a new integration test for the default configuration with <code>ALL</code>. <code>ruff format</code> now only shows two incompatible rules, which feels more reasonable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-25 03:17</div>
            <div class="timeline-body"><p>Current dependencies on/for this PR:</p>
<ul>
<li>main<ul>
<li><strong>PR #8192</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8192"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a><ul>
<li><strong>PR #8196</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8196"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a>  ðŸ‘ˆ<ul>
<li><strong>PR #8244</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8244"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite"></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>This comment was auto-generated by <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8196?utm_source=stack-comment">Graphite</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2023-10-25 03:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_cli/src/commands/format.rs</code>:705 on 2023-10-25 03:21</div>
            <div class="timeline-body"><p>I&#x27;m undecided if we should warn about this rule. The formatter might collapse implicit string concatenated lines which then triggers this rule. However, it might be something users want to fix manually.</p>
<p>Same for <code>MissingTrailingComma</code>. The rule might require manual intervention (and <code>magic-trailing-comma</code> set to <code>respect</code>), but once fixed it remains fixed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-25 08:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-25 08:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-25 08:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> removed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-25 08:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-25 08:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-10-25 08:20</div>
            <div class="timeline-body">PR Check Results
Ecosystem
<p>âœ… ecosystem check detected no changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yakMM">@yakMM</a> on 2023-10-25 09:14</div>
            <div class="timeline-body"><p>Looks great, most of my warnings are gone!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/yakMM">@yakMM</a> reviewed on 2023-10-25 09:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/yakMM">@yakMM</a> on <code>crates/ruff_cli/src/commands/format.rs</code>:705 on 2023-10-25 09:15</div>
            <div class="timeline-body"><p>If the formatter collapses the strings, I would love to know about it to fix it afterward.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-25 09:48</div>
            <div class="timeline-body"><p><a href="https://github.com/yakMM">yakMM</a> <a href="https://github.com/astral-sh/ruff/issues/8185#issuecomment-1778845285">wrote</a></p>
<blockquote>
<p>Tested on my project, only have a warning about ISC001 and isort.split-on-trailing-comma left. I will reply to your comment about this one directly in the PR.</p>
</blockquote>
<blockquote>
<p>Don&#x27;t know if I should open a new issue, but I feel like the warning about isort.split-on-trailing-comma=false is underserved since I already have isort.force-single-line=true, so that isort.split-on-trailing-comma=false will never be applied. I don&#x27;t know how complicated it is to keep making exceptions to the warning on the implementation side.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-10-26 15:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_cli/src/commands/format.rs</code>:707 on 2023-10-26 15:43</div>
            <div class="timeline-body"><p>I these think these are redundant when using tabs in the formatter.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-10-26 16:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-10-26 16:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_cli/src/commands/format.rs</code>:712 on 2023-10-26 16:07</div>
            <div class="timeline-body"><p>This was removed because the formatter will never output code that triggers it? Is that right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-10-26 16:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_cli/src/commands/format.rs</code>:712 on 2023-10-26 16:08</div>
            <div class="timeline-body"><p>Yes, I believe this is the case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 16:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 16:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-10-26 16:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:58:42 UTC
    </footer>
</body>
</html>
