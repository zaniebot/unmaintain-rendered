<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add CI job to auto-update pre-commit dependencies weekly - astral-sh/ruff #8411</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add CI job to auto-update pre-commit dependencies weekly</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/8411">#8411</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2023-11-01 17:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>pre-commit provides an <code>autoupdate</code> command to bump dependency versions in the pre-commit configuration. Not only are our current versions all stale, with #8410 we'll want a reasonable way to update the Ruff version we are using.</p>
<p>Until Dependabot support is released https://github.com/dependabot/dependabot-core/issues/1524, using pre-commits command is the best option.</p>
<p>Note pre-commit provides a service that does this, but I'm not interested in depending on it.</p>
<p>This job opens a new pull request with updates if there are any.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-01 17:08</div>
            <div class="timeline-body"><p>I'm not sure I can test this via dispatch until it is merged</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mkniewallner">@mkniewallner</a> on 2023-11-01 18:55</div>
            <div class="timeline-body"><p>You might be interested in https://github.com/renovatebot/renovate, which is another free and open-source dependency update manager that handles <a href="https://docs.renovatebot.com/modules/manager/">way more ecosystems</a> than Dependabot (including <code>pre-commit</code>), and is also way more customisable (allowing for instances to group all patch dependencies into a single PR).</p>
<p>We use it on <a href="https://github.com/fpgmaas/deptry">deptry</a>, if you are curious (<a href="https://github.com/fpgmaas/deptry/blob/main/renovate.json5">here</a>'s our configuration file, and https://github.com/fpgmaas/deptry/pull/503 if you want to see a PR that updates a <code>pre-commit</code> dependency), and I've personally been using it quite extensively on multiple projects, so if you think this could be interesting to use on Ruff, I'd be happy to give a hand.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-11-01 21:31</div>
            <div class="timeline-body"><p>Looks reasonable to me, defer to @zanieb on whether we want to use renovate :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-01 21:35</div>
            <div class="timeline-body"><p>Hm... tempting. I've never used it seems like most people seem to find the ux relatively similar.</p>
<p>@mkniewallner if you're interested in opening a pull request adding it I'll certainly review. It'd be nice to group patch version bumps in our cargo dependencies and bumps of development dependencies.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mkniewallner">@mkniewallner</a> on 2023-11-01 22:33</div>
            <div class="timeline-body"><blockquote>
<p>Hm... tempting. I've never used it seems like most people seem to find the ux relatively similar.</p>
<p>@mkniewallner if you're interested in opening a pull request adding it I'll certainly review. It'd be nice to group patch version bumps in our cargo dependencies and bumps of development dependencies.</p>
</blockquote>
<p>Happy to! I'll play a bit with the configuration on a fork to have a better representation of PRs that Renovate would create, and eventually open a PR over here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2023-11-07 14:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @zanieb on 2024-03-23 02:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-23 02:56</div>
            <div class="timeline-body"><p>Noticing our pre-commit dependencies are way out of date and opening this to investigate them again....</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-03-23 08:23</div>
            <div class="timeline-body"><p>FWIW I've used renovate in a few projects, and just switched typeshed over to using it. It's slightly more complex to setup than dependabot, but it's extremely configurable, and it's really useful that it can do pre-commit dependencies as well as other dependencies. I don't have any major complaints with it.</p>
<p>Happy to open a PR setting up the config for it on Monday so you can compare it with this!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-03-25 12:35</div>
            <div class="timeline-body"><blockquote>
<p>Happy to open a PR setting up the config for it on Monday so you can compare it with this!</p>
</blockquote>
<p>Here's what the renovate config would look like:</p>
<ul>
<li>https://github.com/astral-sh/ruff/pull/10567</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-03-25 18:44</div>
            <div class="timeline-body"><p>Closing as superseded by #10567 üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-03-25 18:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:01:12 UTC
    </footer>
</body>
</html>
