<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pylint`] Implement `consider-dict-items` (`C0206`) - astral-sh/ruff #11688</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pylint</code>] Implement <code>consider-dict-items</code> (<code>C0206</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11688">#11688</a>
        opened by <a href="https://github.com/max-muoto">@max-muoto</a>
        on 2024-06-02 04:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/max-muoto">@max-muoto</a></div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<!-- What's the purpose of the change? What does it do, and why? -->

<p>This PR implements the <a href="https://pylint.pycqa.org/en/latest/user_guide/messages/convention/consider-using-dict-items.html">consider dict items</a> rule from Pylint. Enabling this rule flags:</p>
<pre><code class="language-python">ORCHESTRA = {
    &quot;violin&quot;: &quot;strings&quot;,
    &quot;oboe&quot;: &quot;woodwind&quot;,
    &quot;tuba&quot;: &quot;brass&quot;,
    &quot;gong&quot;: &quot;percussion&quot;,
}


for instrument in ORCHESTRA: 
    print(f&quot;{instrument}: {ORCHESTRA[instrument]}&quot;)

for instrument in ORCHESTRA.keys(): 
    print(f&quot;{instrument}: {ORCHESTRA[instrument]}&quot;)

for instrument in (inline_dict := {&quot;foo&quot;: &quot;bar&quot;}): 
    print(f&quot;{instrument}: {inline_dict[instrument]}&quot;)
</code></pre>
<p>For not using <code>items()</code> to extract the value out of the dict. We ignore the case of an assignment, as you can't modify the underlying representation with the value in the list of tuples returned.</p>
<h2>Test Plan</h2>
<!-- How was it tested? -->

<p><code>cargo test</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "implement-consider-dict-items" to "[pylint] Implement Consider Dict Items (C0206)" by @max-muoto on 2024-06-02 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @max-muoto on 2024-06-02 16:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-06-02 16:42</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+35 -0 violations, +0 -0 fixes in 8 projects; 42 projects unchanged)</p>
<details><summary><a href="https://github.com/PlasmaPy/PlasmaPy">PlasmaPy/PlasmaPy</a> (+4 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/c39cceefdbb32294362089e5b741b309e3e73771/src/plasmapy/particles/_special_particles.py#L260'>src/plasmapy/particles/_special_particles.py:260:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/c39cceefdbb32294362089e5b741b309e3e73771/src/plasmapy/particles/decorators.py#L677'>src/plasmapy/particles/decorators.py:677:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/c39cceefdbb32294362089e5b741b309e3e73771/src/plasmapy/particles/ionization_state_collection.py#L477'>src/plasmapy/particles/ionization_state_collection.py:477:13:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/PlasmaPy/PlasmaPy/blob/c39cceefdbb32294362089e5b741b309e3e73771/src/plasmapy/plasma/grids.py#L766'>src/plasmapy/plasma/grids.py:766:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+6 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/45bf7b972121828483f930acac60aa0751e2716f/airflow/models/taskinstance.py#L3917'>airflow/models/taskinstance.py:3917:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/apache/airflow/blob/45bf7b972121828483f930acac60aa0751e2716f/airflow/www/views.py#L2287'>airflow/www/views.py:2287:13:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/apache/airflow/blob/45bf7b972121828483f930acac60aa0751e2716f/docs/conf.py#L471'>docs/conf.py:471:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/apache/airflow/blob/45bf7b972121828483f930acac60aa0751e2716f/tests/providers/amazon/aws/executors/batch/test_batch_executor.py#L677'>tests/providers/amazon/aws/executors/batch/test_batch_executor.py:677:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/apache/airflow/blob/45bf7b972121828483f930acac60aa0751e2716f/tests/providers/amazon/aws/executors/ecs/test_ecs_executor.py#L1234'>tests/providers/amazon/aws/executors/ecs/test_ecs_executor.py:1234:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/apache/airflow/blob/45bf7b972121828483f930acac60aa0751e2716f/tests/serialization/test_dag_serialization.py#L550'>tests/serialization/test_dag_serialization.py:550:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
</pre>

</p>
</details>
<details><summary><a href="https://github.com/aws/aws-sam-cli">aws/aws-sam-cli</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/aws/aws-sam-cli/blob/b0ec71b1398432475fccef0bf11b11de1fc43e5b/tests/integration/pipeline/test_bootstrap_command.py#L229'>tests/integration/pipeline/test_bootstrap_command.py:229:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
</pre>

</p>
</details>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+2 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/application/handlers/code.py#L201'>src/bokeh/application/handlers/code.py:201:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/core/property/wrappers.py#L470'>src/bokeh/core/property/wrappers.py:470:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
</pre>

</p>
</details>
<details><summary><a href="https://github.com/milvus-io/pymilvus">milvus-io/pymilvus</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/milvus-io/pymilvus/blob/e95f5a5294ff28588c14a2f3f5aae19d9210a47e/pymilvus/bulk_writer/buffer.py#L91'>pymilvus/bulk_writer/buffer.py:91:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
</pre>

</p>
</details>
<details><summary><a href="https://github.com/pandas-dev/pandas">pandas-dev/pandas</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/pandas-dev/pandas/blob/0e90f66a88e0d4b16b143f1e563ec5fa3565469b/pandas/io/stata.py#L2131'>pandas/io/stata.py:2131:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
</pre>

</p>
</details>
<details><summary><a href="https://github.com/rotki/rotki">rotki/rotki</a> (+3 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/rotki/rotki/blob/f174dfc9e4751f2bfd7c0e7fec73a97c8e67bdb6/rotkehlchen/chain/evm/decoding/hop/balances.py#L66'>rotkehlchen/chain/evm/decoding/hop/balances.py:66:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/rotki/rotki/blob/f174dfc9e4751f2bfd7c0e7fec73a97c8e67bdb6/rotkehlchen/data_import/importers/cryptocom.py#L446'>rotkehlchen/data_import/importers/cryptocom.py:446:13:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/rotki/rotki/blob/f174dfc9e4751f2bfd7c0e7fec73a97c8e67bdb6/rotkehlchen/tests/data_migrations/test_migrations.py#L150'>rotkehlchen/tests/data_migrations/test_migrations.py:150:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
</pre>

</p>
</details>
<details><summary><a href="https://github.com/zulip/zulip">zulip/zulip</a> (+17 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/corporate/views/installation_activity.py#L81'>corporate/views/installation_activity.py:81:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/tools/setup/emoji/emoji_setup_utils.py#L90'>tools/setup/emoji/emoji_setup_utils.py:90:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/actions/realm_settings.py#L237'>zerver/actions/realm_settings.py:237:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/data_import/mattermost.py#L135'>zerver/data_import/mattermost.py:135:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/data_import/mattermost.py#L165'>zerver/data_import/mattermost.py:165:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/data_import/mattermost.py#L849'>zerver/data_import/mattermost.py:849:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/data_import/rocketchat.py#L166'>zerver/data_import/rocketchat.py:166:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/data_import/rocketchat.py#L214'>zerver/data_import/rocketchat.py:214:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/data_import/rocketchat.py#L249'>zerver/data_import/rocketchat.py:249:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/data_import/rocketchat.py#L65'>zerver/data_import/rocketchat.py:65:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/lib/cache.py#L254'>zerver/lib/cache.py:254:5:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/lib/markdown/api_return_values_table_generator.py#L114'>zerver/lib/markdown/api_return_values_table_generator.py:114:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/migrations/0382_create_role_based_system_groups.py#L59'>zerver/migrations/0382_create_role_based_system_groups.py:59:13:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/migrations/0403_create_role_based_groups_for_internal_realms.py#L68'>zerver/migrations/0403_create_role_based_groups_for_internal_realms.py:68:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/tests/test_events.py#L451'>zerver/tests/test_events.py:451:13:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/tests/test_users.py#L723'>zerver/tests/test_users.py:723:9:</a> PLC0206 Extracting value from dictionary without calling `.items()`
+ <a href='https://github.com/zulip/zulip/blob/53c1c4d98f16887d8a624cb5fbb07f990fb0dcfd/zerver/worker/missedmessage_emails.py#L231'>zerver/worker/missedmessage_emails.py:231:13:</a> PLC0206 Extracting value from dictionary without calling `.items()`
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PLC0206 | 35 | 35 | 0 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/max-muoto">@max-muoto</a> on 2024-06-04 17:23</div>
            <div class="timeline-body"><p>@charliermarsh Any chance you might be able to take a look?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-06 03:58</div>
            <div class="timeline-body"><p>Interesting, I swear we have a rule for this... But maybe we don't?  I see:</p>
<ul>
<li>https://docs.astral.sh/ruff/rules/dict-iter-missing-items/ -- detects <code>for city, population in data</code> (missing <code>.items()</code>).</li>
<li>https://docs.astral.sh/ruff/rules/unnecessary-dict-index-lookup/ -- detects <code>FRUITS[fruit_name]</code> in a <code>for fruit_name, fruit_count in FRUITS.items()</code> loop.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2024-06-06 03:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @charliermarsh on 2024-06-06 03:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-06-06 03:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/max-muoto">@max-muoto</a> on 2024-06-06 04:00</div>
            <div class="timeline-body"><blockquote>
<p>Interesting, I swear we have a rule for this... But maybe we don't?  I see:</p>
<ul>
<li><p>https://docs.astral.sh/ruff/rules/dict-iter-missing-items/ -- detects <code>for city, population in data</code> (missing <code>.items()</code>).</p>
</li>
<li><p>https://docs.astral.sh/ruff/rules/unnecessary-dict-index-lookup/ -- detects <code>FRUITS[fruit_name]</code> in a <code>for fruit_name, fruit_count in FRUITS.items()</code> loop.</p>
</li>
</ul>
</blockquote>
<p>Yeah, a little different since this one doesn't rely on you using items before.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[pylint] Implement Consider Dict Items (C0206)" to "[`pylint`] Implement `dict-iter-missing-items` (`C0206`)" by @charliermarsh on 2024-06-06 04:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-06-06 04:25</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-06-06 04:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-06-06 04:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-06 04:28</div>
            <div class="timeline-body"><p>I reviewed the ecosystem checks and they look right to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/max-muoto">@max-muoto</a> on 2024-06-06 04:29</div>
            <div class="timeline-body"><blockquote>
<p>Thanks!</p>
</blockquote>
<p>Thanks for the clean up! Still getting used to writing more Rust code haha</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-06 04:30</div>
            <div class="timeline-body"><p>No prob! One thing I did in a few places was change <code>x.is_none()</code> followed by <code>x.unwrap()</code> to <code>if let Some(x) = x</code>, which couples &quot;checking if the condition is met&quot; with &quot;getting access to the value&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-06-06 04:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/pylint/snapshots/ruff_linter__rules__pylint__tests__PLC0206_dict_index_missing_items.py.snap</code>:11 on 2024-06-06 04:52</div>
            <div class="timeline-body"><p>It would be quite useful to have a infrastructure to provide additional details here similar to Biome. That would avoid highlighting the entire <code>for</code> statement and instead we could highlight individual pieces of code with details.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[`pylint`] Implement `dict-iter-missing-items` (`C0206`)" to "[`pylint`] Implement `consider-dict-items` (`C0206`)" by @max-muoto on 2024-06-09 00:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:04:35 UTC
    </footer>
</body>
</html>
