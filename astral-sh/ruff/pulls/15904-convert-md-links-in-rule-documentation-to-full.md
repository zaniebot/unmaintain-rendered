```yaml
number: 15904
title: "Convert `.md` links in rule documentation to full URLs"
type: pull_request
state: merged
author: InSyncWithFoo
labels:
  - internal
assignees: []
merged: true
base: main
head: rule-docs-links
created_at: 2025-02-03T06:08:12Z
updated_at: 2025-02-03T14:54:36Z
url: https://github.com/astral-sh/ruff/pull/15904
synced_at: 2026-01-10T19:57:22Z
```

# Convert `.md` links in rule documentation to full URLs

---

_Pull request opened by @InSyncWithFoo on 2025-02-03 06:08_

## Summary

Related to [these](https://github.com/astral-sh/ruff/pull/15862#discussion_r1938044515) [comments](https://github.com/astral-sh/ruff/pull/15889#discussion_r1938765623) at #15862 and #15889.

Markdown links of the following format are an anti-pattern:

```markdown
[`rule-name`](rule-name.md)
```

Only Mkdocs can resolve such links. When rendered by a client, typically an editor, they lead to nowhere. This might cause some frustration. Additionally, documentation for other rules (e.g., [`D211`](https://github.com/astral-sh/ruff/blob/b58f2c399e87c11def59bd55f75f7ef8148c84f0/crates/ruff_linter/src/rules/pydocstyle/rules/blank_before_after_class.rs#L123) and [`S606`](https://github.com/astral-sh/ruff/blob/b58f2c399e87c11def59bd55f75f7ef8148c84f0/crates/ruff_linter/src/rules/flake8_bandit/rules/shell_injection.rs#L197)) uses the full URL form.

All such instances have thus been converted to full URLs:

```markdown
[`rule-name`][A123]

[A123]: https://docs.astral.sh/ruff/rules/rule-name/
```

## Test Plan

None.


---

_Comment by @github-actions[bot] on 2025-02-03 06:14_

<!-- generated-comment ecosystem -->
## `ruff-ecosystem` results
### Linter (stable)
✅ ecosystem check detected no linter changes.

### Linter (preview)
✅ ecosystem check detected no linter changes.




---

_Label `internal` added by @AlexWaygood on 2025-02-03 09:36_

---

_@AlexWaygood approved on 2025-02-03 11:33_

> Only Mkdocs can resolve such links. When rendered by a client, typically an editor, they lead to nowhere. This might cause some frustration.

I generally view the doc-comments for the diagnostic structs themselves as external, user-facing documentation rather than internal, developer-facing documentation. So for these doc-comments, it's much more important to me how they're rendered on our website than it is how they're rendered in a tooltip by an editor. (This is the opposite from most other doc-comments we have in the codebase, which are generally just for internal documentation.) We also have lots of other special links in these doc-comments that are understood by mkdocs but that I doubt will be rendered well in an editor tooltip -- e.g. ``[`preview`]`` will link to https://docs.astral.sh/ruff/preview/ even if `[preview]: https://docs.astral.sh/ruff/preview/` is not at the bottom of the diagnostic struct's doc-comment.

However, I don't think these changes do any harm (other than maybe hardcoding our website domain in a few more places). I'm okay with them if others are.

---

_Review requested from @MichaReiser by @AlexWaygood on 2025-02-03 11:37_

---

_Comment by @InSyncWithFoo on 2025-02-03 14:18_

> I generally view the doc-comments for the diagnostic structs themselves as external, user-facing documentation rather than internal, developer-facing documentation.

It is precisely due to them being user-facing that the links must be made accessible. `ruff rule` exists, and, as someone who uses the docs very often (IDE popups, command line, even rendered documentation view in RustRover), I want a better experience.

---

_Comment by @MichaReiser on 2025-02-03 14:32_

I sort of agree with @AlexWaygood but I also see @InSyncWithFoo's point. 

My preferred solution would be to move the link generation to the `mkdocs` script. E.g., could the script automatically detect rule codes in `[]` and replace them with the full URL, similar to what we already do with options? 

I'm okay landing this as a separate PR

---

_Merged by @MichaReiser on 2025-02-03 14:33_

---

_Closed by @MichaReiser on 2025-02-03 14:33_

---

_Branch deleted on 2025-02-03 14:33_

---

_Comment by @AlexWaygood on 2025-02-03 14:54_

Yeah, I admit I hadn't considered what the output of `ruff rule` would look like. Ideally I feel like we'd have "clean" doc-comments with links generated by mkdocs, but that we'd also "fixup" the doc-comment before printing it to the terminal in the `ruff rule` output. Then links like the ones that mkdocs generates for ``[`preview`]`` would also be clickable from the terminal if you ran `ruff rule`. This might be an unreasonable amount of complexity to add to `ruff rule`, though

---
