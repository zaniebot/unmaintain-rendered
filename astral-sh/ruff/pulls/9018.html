<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix documentation snafu that recommended invalid settings - astral-sh/ruff #9018</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fix documentation snafu that recommended invalid settings</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/9018">#9018</a>
        opened by <a href="https://github.com/eli-schwartz">@eli-schwartz</a>
        on 2023-12-06 02:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eli-schwartz">@eli-schwartz</a></div>
            <div class="timeline-body"><p>The include/exclude settings return a configuration parsing error when placed under the &quot;lint&quot; section. They have always been expected at the top level (no <code>.ruff.toml</code> section).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/configuration.md</code>:397 on 2023-12-06 02:18</div>
            <div class="timeline-body"><p>Using <code>exclude</code> under <code>lint</code> is correct here. We only exclude <code>.ipynb</code> files from linting, but keep them as part of formatting (same as the example aboth).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/configuration.md</code>:406 on 2023-12-06 02:19</div>
            <div class="timeline-body"><p>Same here. Using <code>lint</code> here is correct.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2023-12-06 02:20</div>
            <div class="timeline-body"><p>Thanks. Looks correct to me, except the example configuration for formatting notebooks but not linting them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @charliermarsh on 2023-12-06 02:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eli-schwartz">@eli-schwartz</a> reviewed on 2023-12-06 02:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eli-schwartz">@eli-schwartz</a> on <code>docs/configuration.md</code>:397 on 2023-12-06 02:35</div>
            <div class="timeline-body"><p><code>include</code> fails even with the latest version, so the documentation is wrong and needs fixing.</p>
<p><code>exclude</code> fails only if you happen to have ruff 0.1.0 (or earlier) installed, but I do not know what the backwards compatibility story is here. If it is okay to assume users have a very recent ruff installed, then using it here is fine.</p>
<p>My stake in this is as someone who doesn't use the formatter at all, but found this page as the first and most obvious place discussing how to configure the linter.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2023-12-06 02:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/configuration.md</code>:397 on 2023-12-06 02:49</div>
            <div class="timeline-body"><p>We don't support versioned documentation yet.</p>
<blockquote>
<p>include fails even with the latest version, so the documentation is wrong and needs fixing.</p>
</blockquote>
<p>But this line isn't using <code>include</code>? The changes above are okay. It's just this example that should be left unchanged.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eli-schwartz">@eli-schwartz</a> reviewed on 2023-12-06 02:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eli-schwartz">@eli-schwartz</a> on <code>docs/configuration.md</code>:397 on 2023-12-06 02:52</div>
            <div class="timeline-body"><p>Sorry, I should rephrase that.</p>
<blockquote>
<p><code>include</code> fails even with the latest version, so the documentation <em><strong>in general</strong></em> is wrong and needs fixing.</p>
<p><code>exclude</code> fails only if you happen to have ruff 0.1.0 (or earlier) installed, but I do not know what the backwards compatibility story is here. If it is okay to assume users have a very recent ruff installed, then using it here <em><strong>on this specific line</strong></em> is fine.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eli-schwartz">@eli-schwartz</a> on 2023-12-06 13:04</div>
            <div class="timeline-body"><p>If you can confirm that you'd prefer the (unversioned) documentation to use syntax that requires a recent version of ruff, then I'll update the PR to do so.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2023-12-06 16:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>docs/configuration.md</code>:397 on 2023-12-06 16:21</div>
            <div class="timeline-body"><p>I'm sorry but I'm unable to follow your reasoning in changing this specific example.</p>
<p>The example is correct here, I just tested it out on <code>v0.1.7</code>. To give some context on this specific example, it's to allow users to include notebook files for formatting but exclude them from linting. We don't support versioned documentation so the examples should always reflect as per the latest version.</p>
<p>The reason it fails on <code>v0.1.0</code> or earlier is because the <code>exclude</code> key didn't exist in those versions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-12-07 02:19</div>
            <div class="timeline-body"><blockquote>
<p>If you can confirm that you'd prefer the (unversioned) documentation to use syntax that requires a recent version of ruff, then I'll update the PR to do so.</p>
</blockquote>
<p>Yes, our documentation assumes a recent version. We would otherwise not be able to document new functionality. We should start versioning our documentation but haven't gotten around to do it yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eli-schwartz">@eli-schwartz</a> reviewed on 2023-12-07 02:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eli-schwartz">@eli-schwartz</a> on <code>docs/configuration.md</code>:397 on 2023-12-07 02:59</div>
            <div class="timeline-body"><p>Pretty sure I already explained it, so I'm not sure why you're circling back around to the beginning.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2023-12-07 04:59</div>
            <div class="timeline-body"><p>Thank you for flagging and fixing the incorrect documentation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2023-12-07 05:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2023-12-07 05:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:01:44 UTC
    </footer>
</body>
</html>
