<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pylint`] Recurse into subscript subexpressions when searching for list/dict lookups (`PLR1733`, `PLR1736`) - astral-sh/ruff #13186</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pylint</code>] Recurse into subscript subexpressions when searching for list/dict lookups (<code>PLR1733</code>, <code>PLR1736</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/13186">#13186</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2024-08-31 18:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-08-31 18:22</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>The <code>SequenceIndexVisitor</code> currently does not recurse into subexpressions of subscripts when searching for subscript accesses that would trigger this rule. That means that we don't currently detect violations of the rule on snippets like this:</p>
<pre><code class="language-py">data = {&quot;a&quot;: 1, &quot;b&quot;: 2}
column_names = [&quot;a&quot;, &quot;b&quot;]
for index, column_name in enumerate(column_names):
    _ = data[column_names[index]]
</code></pre>
<p>Fixes #13183</p>
<h2>Test Plan</h2>
<p><code>cargo test -p ruff_linter</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @AlexWaygood on 2024-08-31 18:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @AlexWaygood on 2024-08-31 18:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[`pylint`] Recurse into subexpressions of subscripts when searching for `unnecessary-list-index-lookup` violations (`PLR1736`)" to "[`pylint`] Recurse into subscript subexpressions when searching for `unnecessary-list-index-lookup` violations (`PLR1736`)" by @AlexWaygood on 2024-08-31 18:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-08-31 18:36</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+2 -0 violations, +0 -0 fixes in 1 projects; 53 projects unchanged)</p>
<details><summary><a href="https://github.com/zulip/zulip">zulip/zulip</a> (+2 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/zulip/zulip/blob/3da91e951cd03cfa0b9c67378224e348353f36a6/analytics/views/stats.py#L623'>analytics/views/stats.py:623:51:</a> PLR1733 [*] Unnecessary lookup of dictionary value by key
+ <a href='https://github.com/zulip/zulip/blob/3da91e951cd03cfa0b9c67378224e348353f36a6/analytics/views/stats.py#L625'>analytics/views/stats.py:625:44:</a> PLR1733 [*] Unnecessary lookup of dictionary value by key
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PLR1733 | 2 | 2 | 0 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-08-31 18:48</div>
            <div class="timeline-body"><blockquote>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+2 -0 violations, +0 -0 fixes in 1 projects; 53 projects unchanged)
<a href="https://github.com/zulip/zulip">zulip/zulip</a> (+2 -0 violations, +0 -0 fixes)</p>
</blockquote>
<p>Nice, it looks like this also fixes false negatives in other rules that use this visitor</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[`pylint`] Recurse into subscript subexpressions when searching for `unnecessary-list-index-lookup` violations (`PLR1736`)" to "[`pylint`] Recurse into subscript subexpressions when searching for listd/dict lookups (`PLR1733`, `PLR1736`)" by @AlexWaygood on 2024-08-31 18:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[`pylint`] Recurse into subscript subexpressions when searching for listd/dict lookups (`PLR1733`, `PLR1736`)" to "[`pylint`] Recurse into subscript subexpressions when searching for list/dict lookups (`PLR1733`, `PLR1736`)" by @AlexWaygood on 2024-08-31 18:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrugman">@sbrugman</a> on 2024-08-31 19:32</div>
            <div class="timeline-body"><p>LGTM. Thanks for the quick PR :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-09-01 16:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @AlexWaygood on 2024-09-01 16:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-09-01 16:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-09-01 16:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 21:39:02 UTC
    </footer>
</body>
</html>
