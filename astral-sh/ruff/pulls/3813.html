<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use the pyproject-toml crate - astral-sh/ruff #3813</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use the pyproject-toml crate</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/3813">#3813</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-03-30 12:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/konstin">@konstin</a> on 2023-03-30 12:39</div>
            <div class="timeline-body"><p>Finally puts pep508_rs and pep440_rs to good use :D</p>
<p>This also means that we now implicitly check for invalid pyproject.toml files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-03-30 12:40</div>
            <div class="timeline-body"><p>Current dependencies on/for this PR:</p>
<ul>
<li>main<ul>
<li><strong>PR #3812</strong> <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/3812" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite" width="10px" height="10px"/></a><ul>
<li><strong>PR #3813</strong> <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/3813" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite" width="10px" height="10px"/></a>  üëà</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>This comment was auto-generated by <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/3813?utm_source=stack-comment">Graphite</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff/Cargo.toml</code>:70 on 2023-03-30 12:41</div>
            <div class="timeline-body"><p>This pulls in only two new crates, <code>pep508_rs</code> and <code>pyproject-toml</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-03-30 12:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @konstin on 2023-03-30 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @konstin on 2023-03-30 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-03-30 12:46</div>
            <div class="timeline-body"><blockquote>
<p>This also means that we now implicitly check for invalid pyproject.toml files.</p>
</blockquote>
<p>Does this mean that ruff now fails to run if a non-ruff related field is invalid?</p>
<p>I assume we'll have to pay for deserializing all the fields that we don't use. Is this assumption correct?</p>
<p>I'm not sure if this is overkill to replace the one struct in our code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-03-30 12:51</div>
            <div class="timeline-body"><p>yes, both are correct. A non-PEP 621 compliant pyproject.toml will fail. I would be surprised if the additional parsing time is noticeable (<code>[project]</code> is small), there's some benchmark numbers in https://epage.github.io/blog/2023/01/toml-vs-toml-edit/. Another advantage is that we can in the future use more packaging metadata (e.g. direct dependencies for rule selection and entrypoints to verify them)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-03-30 13:13</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>detected changes</strong>. (+0, -0, 1 error(s))</p>
<details><summary>scikit-build (error)</summary>
<p>

<pre><code>error: TOML parse error at line 9, column 11
  |
9 | license = &quot;MIT&quot;
  |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>

<h3>Benchmark</h3>
<h4>Linux</h4>
<pre><code>group                                      main                                    pr
-----                                      ----                                    --
linter/all-rules/large/dataset.py          1.00     14.4¬±0.10ms     2.8 MB/sec     1.03     14.9¬±0.77ms     2.7 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      3.6¬±0.05ms     4.6 MB/sec     1.01      3.7¬±0.04ms     4.6 MB/sec
linter/all-rules/numpy/globals.py          1.00    470.4¬±1.48¬µs     6.3 MB/sec     1.00    468.3¬±0.84¬µs     6.3 MB/sec
linter/all-rules/pydantic/types.py         1.00      6.1¬±0.06ms     4.2 MB/sec     1.02      6.2¬±0.05ms     4.1 MB/sec
linter/default-rules/large/dataset.py      1.03      7.5¬±0.27ms     5.4 MB/sec     1.00      7.3¬±0.04ms     5.6 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.15  1865.5¬±182.99¬µs     8.9 MB/sec    1.00   1627.0¬±4.85¬µs    10.2 MB/sec
linter/default-rules/numpy/globals.py      1.00    181.4¬±3.13¬µs    16.3 MB/sec     1.01    182.8¬±2.67¬µs    16.1 MB/sec
linter/default-rules/pydantic/types.py     1.09      3.7¬±0.31ms     7.0 MB/sec     1.00      3.3¬±0.01ms     7.6 MB/sec
</code></pre>
<h4>Windows</h4>
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.00     11.8¬±0.13ms     3.5 MB/sec    1.00     11.8¬±0.11ms     3.5 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      3.1¬±0.06ms     5.3 MB/sec    1.00      3.1¬±0.04ms     5.4 MB/sec
linter/all-rules/numpy/globals.py          1.00    325.4¬±4.71¬µs     9.1 MB/sec    1.00    323.9¬±5.27¬µs     9.1 MB/sec
linter/all-rules/pydantic/types.py         1.00      5.1¬±0.13ms     5.0 MB/sec    1.00      5.1¬±0.10ms     5.0 MB/sec
linter/default-rules/large/dataset.py      1.00      6.0¬±0.08ms     6.7 MB/sec    1.01      6.1¬±0.08ms     6.6 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00  1321.3¬±27.90¬µs    12.6 MB/sec    1.02  1352.5¬±20.34¬µs    12.3 MB/sec
linter/default-rules/numpy/globals.py      1.00    136.4¬±3.12¬µs    21.6 MB/sec    1.02    138.6¬±2.67¬µs    21.3 MB/sec
linter/default-rules/pydantic/types.py     1.00      2.8¬±0.03ms     9.2 MB/sec    1.02      2.8¬±0.03ms     9.0 MB/sec
</code></pre>
<!-- thollander/actions-comment-pull-request "PR Check Results" -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Use the pyprojec-toml crate" to "Use the pyproject-toml crate" by @konstin on 2023-03-30 13:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2023-03-31 07:31</div>
            <div class="timeline-body"><p>The code looks good to me. I'm a bit worried that the crate is on the heavy side for the functionality that we use today, and using an external crate may make it more difficult to add additional fields in the future. You've contributed to the crate and I trust your judgment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-31 18:54</div>
            <div class="timeline-body"><p>Is the <code>scikit-build</code> error valid?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-04-03 08:44</div>
            <div class="timeline-body"><p>I ran a more extended ecosystem CI. It looks like 7/95 missed that that PEP 621 metadata for <a href="https://packaging.python.org/en/latest/specifications/declaring-project-metadata/#license">license is a table, not a string</a>, and we're the first ones to check. I'll change the strategy to emit diagnostics instead.</p>
<p>Finished 95 repositories
‚ÑπÔ∏è ecosystem check <strong>detected changes</strong>. (+2, -0, 9 error(s))</p>
<details><summary>typeguard (error)</summary>
<p>https://github.com/agronholm/typeguard ref None select  ignore  exclude </p>
<p>

<pre><code>error: TOML parse error at line 40, column 8
   |
40 | test = [
   |        ^^^^^^^^
Expected a valid marker name, found 'python_implementation'
mypy &gt;= 0.991; python_implementation != &quot;PyPy&quot;
               ^^^^^^^^^^^^^^^^^^^^^


</code></pre>
</p>
</details>
<details><summary>pro-orch (error)</summary>
<p>https://github.com/shanku007/pro-orch ref None select  ignore  exclude </p>
<p>

<pre><code>error: Required version `0.0.255` does not match the running version `0.0.260`

</code></pre>
</p>
</details>
<details><summary>crawlers (error)</summary>
<p>https://github.com/Academia-de-Dados/crawlers ref None select  ignore  exclude </p>
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;GPL-3.0-only&quot;
   |           ^^^^^^^^^^^^^^
invalid type: string &quot;GPL-3.0-only&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>authx (error)</summary>
<p>https://github.com/yezz123/authx ref None select  ignore  exclude </p>
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>flippers (error)</summary>
<p>https://github.com/liamtoran/flippers ref None select  ignore  exclude </p>
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;Apache-2.0&quot;
   |           ^^^^^^^^^^^^
invalid type: string &quot;Apache-2.0&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>httpdate (error)</summary>
<p>https://github.com/jamielinux/httpdate ref None select  ignore  exclude </p>
<p>

<pre><code>error: TOML parse error at line 13, column 11
   |
13 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>EPP_RFR (+1, -0)</summary>
<p>

<pre><code class="language-diff">+ Fixed 85 errors.
</code></pre>
</p>
</details>
<details><summary>kafka-http-monitor (error)</summary>
<p>https://github.com/jdahlin/kafka-http-monitor ref None select  ignore  exclude </p>
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>griffe (error)</summary>
<p>https://github.com/mkdocstrings/griffe ref None select  ignore  exclude </p>
<p>

<pre><code>error: TOML parse error at line 11, column 11
   |
11 | license = &quot;ISC&quot;
   |           ^^^^^
invalid type: string &quot;ISC&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>clean_notebook (error)</summary>
<p>https://github.com/Hoxbro/clean_notebook ref None select  ignore  exclude </p>
<p>

<pre><code>error: TOML parse error at line 8, column 11
  |
8 | license = &quot;MIT&quot;
  |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>replication-child-benefit (+1, -0)</summary>
<p>

<pre><code class="language-diff">+ Fixed 5 errors.
</code></pre>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-04-03 09:24</div>
            <div class="timeline-body"><p>Checked some more projects:</p>
<p>‚ÑπÔ∏è ecosystem check <strong>detected changes</strong>. (+0, -0, 67 error(s))</p>
<details><summary>django-continuous-delivery (error)</summary>
https://github.com/20tab/django-continuous-delivery ref main select  ignore  exclude
<p>

<pre><code>error: error parsing glob '/tmp/tmpi5lnvxmb/{{cookiecutter.project_dirname}}/__pycache__': nested alternate groups are not allowed

</code></pre>
</p>
</details>
<details><summary>jupyter_server (error)</summary>
https://github.com/jupyter-server/jupyter_server ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 9, column 11
  |
9 | license = &quot;&quot;
  |           ^^
invalid type: string &quot;&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>my_language_modeling (error)</summary>
https://github.com/Bing-su/my_language_modeling ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 4, column 11
  |
4 | license = &quot;MIT&quot;
  |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>python-start-project (error)</summary>
https://github.com/EndlessTrax/python-start-project ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 14, column 16
   |
14 | dependencies = [
   |                ^^^^^^^^^^^^^^^
Expected package name starting with an alphanumeric character, found '#'
#TODO
^


</code></pre>
</p>
</details>
<details><summary>ruff-vscode (error)</summary>
https://github.com/yaegassy/ruff-vscode ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 16, column 11
   |
16 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>Machine_Learning_Mask_Cassifier (error)</summary>
https://github.com/GiuliaGualtieri/Machine_Learning_Mask_Cassifier ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 52, column 3
   |
52 |   &quot;threadpoolctl&quot;,
   |   ^
invalid array
expected `]`


</code></pre>
</p>
</details>
<details><summary>cookiecutter-poetry (error)</summary>
https://github.com/fpgmaas/cookiecutter-poetry ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 18, column 1
   |
18 | {% if cookiecutter.codecov == 'y' -%}
   | ^
invalid key


</code></pre>
</p>
</details>
<details><summary>matter-library-template (error)</summary>
https://github.com/Matter-Tech/matter-library-template ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 6, column 11
  |
6 | license = &quot;MIT&quot;
  |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>astronomer-cosmos (error)</summary>
https://github.com/astronomer/astronomer-cosmos ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;Apache-2.0&quot;
   |           ^^^^^^^^^^^^
invalid type: string &quot;Apache-2.0&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>wetterdienst_update (error)</summary>
https://github.com/MrMalte211/wetterdienst_update ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 295, column 20
    |
295 | per-file-ignores = [
    |                    ^^^^^^^^^^^^^^^^^^^^
invalid type: sequence, expected a map


</code></pre>
</p>
</details>
<details><summary>Bear (error)</summary>
https://github.com/godzail/Bear ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 258, column 1
    |
258 | [tool.ruff.per-file-ignores]
    | ^
invalid table header
duplicate key `per-file-ignores` in table `tool.ruff`


</code></pre>
</p>
</details>
<details><summary>python-whiteprint (error)</summary>
https://github.com/RomainBrault/python-whiteprint ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 1, column 1
  |
1 | {% include &quot;jinja_template/license_header.toml.j2&quot; %}
  | ^
invalid key


</code></pre>
</p>
</details>
<details><summary>symmeplot (error)</summary>
https://github.com/TJStienstra/symmeplot ref master select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 1, column 1
  |
1 | [tool.poetry]
  | ^
missing field `name`


</code></pre>
</p>
</details>
<details><summary>py-listmonk (error)</summary>
https://github.com/Tobi-De/py-listmonk ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>use-case-registry (error)</summary>
https://github.com/Tomperez98/use-case-registry ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>whats-this-payload (error)</summary>
https://github.com/Tomperez98/whats-this-payload ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>mvp-projects_easy-cloud-cli (error)</summary>
https://github.com/actions-marketplace-validations/mvp-projects_easy-cloud-cli ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>samuelcolvin_list-python-dependencies (error)</summary>
https://github.com/actions-marketplace-validations/samuelcolvin_list-python-dependencies ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 14, column 11
   |
14 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>TinyNeuralNetwork (error)</summary>
https://github.com/alibaba/TinyNeuralNetwork ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 78, column 18
   |
78 | target-version = &quot;py36&quot;
   |                  ^^^^^^
unknown variant `py36`, expected one of `py37`, `py38`, `py39`, `py310`, `py311`


</code></pre>
</p>
</details>
<details><summary>concrete-numpy (error)</summary>
https://github.com/zama-ai/concrete-numpy ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 118, column 15
    |
118 | &quot;tests/**&quot; = [&quot;PLC2201&quot;]
    |               ^^^^^^^^^
Unknown rule selector: `PLC2201`


</code></pre>
</p>
</details>
<details><summary>safejax (error)</summary>
https://github.com/alvarobartt/safejax ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 32, column 11
   |
32 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>astro-providers-databricks (error)</summary>
https://github.com/astronomer/astro-providers-databricks ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;Apache-2.0&quot;
   |           ^^^^^^^^^^^^
invalid type: string &quot;Apache-2.0&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>hatch (error)</summary>
https://github.com/pypa/hatch ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 9, column 11
  |
9 | license = &quot;MIT&quot;
  |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>schematalog (error)</summary>
https://github.com/berislavlopac/schematalog ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 5, column 11
  |
5 | license = &quot;MIT&quot;
  |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>casbench (error)</summary>
https://github.com/brocksam/casbench ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 1, column 1
  |
1 | [tool.poetry]
  | ^
missing field `name`


</code></pre>
</p>
</details>
<details><summary>experiment-template (error)</summary>
DEBUG:__main__:Finished 1656 repositories
https://github.com/climatepolicyradar/experiment-template ref main select  ignore  exclude
<p>

<pre><code>error: error parsing glob '/tmp/tmphaydgkld/{{ cookiecutter.repo_name }}/__init__.py': nested alternate groups are not allowed

</code></pre>
</p>
</details>
<details><summary>robotcode (error)</summary>
https://github.com/d-biehl/robotcode ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;Apache-2.0&quot;
   |           ^^^^^^^^^^^^
invalid type: string &quot;Apache-2.0&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>dagster (error)</summary>
https://github.com/dagster-io/dagster ref None select  ignore  exclude
<p>

<pre><code>error: Required version `0.0.255` does not match the running version `0.0.260`

</code></pre>
</p>
</details>
<details><summary>edgartools (error)</summary>
https://github.com/dgunning/edgartools ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>explicitor (error)</summary>
https://github.com/din14970/explicitor ref master select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 32, column 1
   |
32 | max-line-length = 88
   | ^^^^^^^^^^^^^^^
unknown field `max-line-length`, expected one of `allowed-confusables`, `builtins`, `cache-dir`, `dummy-variable-rgx`, `exclude`, `extend`, `extend-exclude`, `extend-ignore`, `extend-select`, `external`, `fix`, `fix-only`, `fixable`, `format`, `force-exclude`, `ignore`, `ignore-init-module-imports`, `line-length`, `required-version`, `respect-gitignore`, `select`, `show-source`, `show-fixes`, `src`, `namespace-packages`, `target-version`, `task-tags`, `typing-modules`, `unfixable`, `update-check`, `flake8-annotations`, `flake8-bandit`, `flake8-bugbear`, `flake8-builtins`, `flake8-comprehensions`, `flake8-errmsg`, `flake8-quotes`, `flake8-self`, `flake8-tidy-imports`, `flake8-type-checking`, `flake8-gettext`, `flake8-implicit-str-concat`, `flake8-import-conventions`, `flake8-pytest-style`, `flake8-unused-arguments`, `isort`, `mccabe`, `pep8-naming`, `pycodestyle`, `pydocstyle`, `pylint`, `pyupgrade`, `per-file-ignores`


</code></pre>
</p>
</details>
<details><summary>icli-python (error)</summary>
https://github.com/druagoon/icli-python ref master select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>mlops-project-template (error)</summary>
https://github.com/elacosse/mlops-project-template ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 1, column 1
  |
1 | {%- set license_classifiers = {
  | ^
invalid key


</code></pre>
</p>
</details>
<details><summary>poetry-project-template (error)</summary>
https://github.com/elacosse/poetry-project-template ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 1, column 1
  |
1 | {%- set license_classifiers = {
  | ^
invalid key


</code></pre>
</p>
</details>
<details><summary>pydantic (error)</summary>
https://github.com/theonlykingpin/pydantic ref master select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 28, column 11
   |
28 | license = 'MIT'
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>poetry-cookiecutter (error)</summary>
https://github.com/jevandezande/poetry-cookiecutter ref master select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 13, column 1
   |
13 | {poetry_dependencies}
   | ^
invalid key


</code></pre>
</p>
</details>
<details><summary>fulmo-cookiecutter-poetry (error)</summary>
https://github.com/jexio/fulmo-cookiecutter-poetry ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 1, column 1
  |
1 | {% set license_classifiers = {
  | ^
invalid key


</code></pre>
</p>
</details>
<details><summary>gitlint (error)</summary>
https://github.com/jorisroovers/gitlint ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 11, column 11
   |
11 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>imdm (error)</summary>
https://github.com/josegcpa/imdm ref master select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 1, column 1
  |
1 | [tool.poetry]
  | ^
missing field `name`


</code></pre>
</p>
</details>
<details><summary>sqlalchemy-file (error)</summary>
https://github.com/jowilf/sqlalchemy-file ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 9, column 11
  |
9 | license = &quot;MIT&quot;
  |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>github-wikidata-bot (error)</summary>
https://github.com/konstin/github-wikidata-bot ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 1, column 1
  |
1 | [project]
  | ^^^^^^^^^
missing field `name`


</code></pre>
</p>
</details>
<details><summary>cookiecutter-backend-service-aws (error)</summary>
https://github.com/mikelane/cookiecutter-backend-service-aws ref main select  ignore  exclude
<p>

<pre><code>warning: `one-blank-line-before-class` (D203) and `no-blank-line-before-class` (D211) are incompatible. Ignoring `one-blank-line-before-class`.
warning: `multi-line-summary-first-line` (D212) and `multi-line-summary-second-line` (D213) are incompatible. Ignoring `multi-line-summary-second-line`.
error: error parsing glob '/tmp/tmpugkewe_b/{{ cookiecutter.__project_name }}/.bzr': nested alternate groups are not allowed

</code></pre>
</p>
</details>
<details><summary>cookiecutter-python-library (error)</summary>
https://github.com/mikelane/cookiecutter-python-library ref main select  ignore  exclude
<p>

<pre><code>warning: `one-blank-line-before-class` (D203) and `no-blank-line-before-class` (D211) are incompatible. Ignoring `one-blank-line-before-class`.
warning: `multi-line-summary-first-line` (D212) and `multi-line-summary-second-line` (D213) are incompatible. Ignoring `multi-line-summary-second-line`.
error: error parsing glob '/tmp/tmpb1zgf2hj/{{ cookiecutter.__project_name }}/.bzr': nested alternate groups are not allowed

</code></pre>
</p>
</details>
<details><summary>easy-cloud-cli (error)</summary>
https://github.com/mvp-projects/easy-cloud-cli ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>easy-cloud-publish (error)</summary>
https://github.com/mvp-projects/easy-cloud-publish ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>cookiecutter-fastapi-backend (error)</summary>
https://github.com/nickatnight/cookiecutter-fastapi-backend ref master select  ignore  exclude
<p>

<pre><code>error: error parsing glob '/tmp/tmpakk3da4z/{{ cookiecutter.project_slug }}/{{ cookiecutter.backend_container_name }}/.git': nested alternate groups are not allowed

</code></pre>
</p>
</details>
<details><summary>extensionlib (error)</summary>
https://github.com/ofek/extensionlib ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 11, column 11
   |
11 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>manga-dlp (error)</summary>
https://github.com/olofvndrhr/manga-dlp ref master select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>PyPulley (error)</summary>
https://github.com/pmason314/PyPulley ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 1, column 1
  |
1 | {%- set license_classifiers = {
  | ^
invalid key


</code></pre>
</p>
</details>
<details><summary>matplotlib-scalebar (error)</summary>
https://github.com/ppinard/matplotlib-scalebar ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;BSD-2-clause&quot;
   |           ^^^^^^^^^^^^^^
invalid type: string &quot;BSD-2-clause&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>pydantic-extra-types (error)</summary>
https://github.com/pydantic/pydantic-extra-types ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 15, column 11
   |
15 | license = 'MIT'
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>pipx (error)</summary>
https://github.com/pypa/pipx ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 9, column 11
  |
9 | license = &quot;MIT&quot;
  |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>genvi (error)</summary>
https://github.com/ruksi/genvi ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 5, column 11
  |
5 | license = &quot;MIT&quot;
  |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>list-python-dependencies (error)</summary>
https://github.com/samuelcolvin/list-python-dependencies ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 14, column 11
   |
14 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>cookiecutter-python (error)</summary>
https://github.com/sanders41/cookiecutter-python ref main select  ignore  exclude
<p>

<pre><code>error: error parsing glob '/tmp/tmpf11g4mye/{{{{cookiecutter.project_slug}}}}': nested alternate groups are not allowed

</code></pre>
</p>
</details>
<details><summary>sympy (error)</summary>
https://github.com/sympy/sympy ref None select  ignore  exclude
<p>

<pre><code>
thread '&lt;unknown&gt;' has overflowed its stack
fatal runtime error: stack overflow

</code></pre>
</p>
</details>
<details><summary>jma-scraper (error)</summary>
https://github.com/t-edzuka/jma-scraper ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>ondotori-client (error)</summary>
https://github.com/t-edzuka/ondotori-client ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>ternaus-cleantext (error)</summary>
https://github.com/ternaus/ternaus-cleantext ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 34, column 1778
   |
34 | select = ['A', 'A0', 'A00', 'A001', 'A002', 'A003', 'ANN', 'ANN0', 'ANN00', 'ANN001', 'ANN002', 'ANN003', 'ANN1', 'ANN10', 'ANN101', 'ANN102', 'ANN2', 'ANN20', 'ANN201', 'ANN202', 'ANN204', 'ANN205', 'ANN206', 'ANN4', 'ANN40', 'ANN401', 'B', 'B0', 'B00', 'B002', 'B003', 'B004', 'B005', 'B006', 'B007', 'B008', 'B009', 'B01', 'B010', 'B011', 'B012', 'B013', 'B014', 'B015', 'B016', 'B017', 'B018', 'B019', 'B02', 'B020', 'B021', 'B022', 'B023', 'B024', 'B025', 'B026', 'B027', 'B9', 'B90', 'B904', 'BLE', 'BLE0', 'BLE00', 'BLE001', 'C', 'C4', 'C40', 'C400', 'C401', 'C402', 'C403', 'C404', 'C405', 'C406', 'C408', 'C409', 'C41', 'C410', 'C411', 'C413', 'C414', 'C415', 'C416', 'C417', 'C9', 'C90', 'C901', 'D', 'D1', 'D10', 'D100', 'D101', 'D102', 'D103', 'D104', 'D105', 'D106', 'D107', 'D2', 'D20', 'D200', 'D201', 'D202', 'D203', 'D204', 'D205', 'D206', 'D207', 'D208', 'D209', 'D21', 'D210', 'D211', 'D212', 'D213', 'D214', 'D215', 'D3', 'D30', 'D300', 'D4', 'D40', 'D400', 'D402', 'D403', 'D404', 'D405', 'D406', 'D407', 'D408', 'D409', 'D41', 'D410', 'D411', 'D412', 'D413', 'D414', 'D415', 'D416', 'D417', 'D418', 'D419', 'E', 'E4', 'E40', 'E402', 'E5', 'E50', 'E501', 'E7', 'E71', 'E711', 'E712', 'E713', 'E714', 'E72', 'E721', 'E722', 'E73', 'E731', 'E74', 'E741', 'E742', 'E743', 'E9', 'E90', 'E902', 'E99', 'E999', 'ERA', 'ERA0', 'ERA00', 'ERA001', 'F', 'F4', 'F40', 'F401', 'F402', 'F403', 'F404', 'F405', 'F406', 'F407', 'F5', 'F50', 'F501', 'F502', 'F503', 'F504', 'F505', 'F506', 'F507', 'F508', 'F509', 'F52', 'F521', 'F522', 'F523', 'F524', 'F525', 'F54', 'F541', 'F6', 'F60', 'F601', 'F602', 'F62', 'F621', 'F622', 'F63', 'F631', 'F632', 'F633', 'F634', 'F7', 'F70', 'F701', 'F702', 'F704', 'F706', 'F707', 'F72', 'F722', 'F8', 'F82', 'F821', 'F822', 'F823', 'F83', 'F831', 'F84', 'F841', 'F9', 'F90', 'F901', 'FBT', 'FBT0', 'FBT00', 'FBT001', 'FBT002', 'FBT003', 'I', 'I0', 'I00', 'I001', 'I2', 'I25', 'I252', 'N', 'N8', 'N80', 'N801', 'N802', 'N803', 'N804', 'N805', 'N806', 'N807', 'N81', 'N811', 'N812', 'N813', 'N814', 'N815', 'N816', 'N817', 'N818', 'PGH', 'PGH0', 'PGH00', 'PGH001', 'PLC', 'PLC0', 'PLC04', 'PLC041', 'PLC0414', 'PLC2', 'PLC22', 'PLC220', 'PLC2201', 'PLC3', 'PLC30', 'PLC300', 'PLC3002', 'PLE', 'PLE1', 'PLE11', 'PLE114', 'PLE1142', 'PLR', 'PLR0', 'PLR02', 'PLR020', 'PLR0206', 'PLR04', 'PLR040', 'PLR0402', 'PLR1', 'PLR17', 'PLR170', 'PLR1701', 'PLR172', 'PLR1722', 'PLW', 'PLW0', 'PLW01', 'PLW012', 'PLW0120', 'Q', 'Q0', 'Q00', 'Q000', 'Q001', 'Q002', 'Q003', 'RET', 'RET5', 'RET50', 'RET501', 'RET502', 'RET503', 'RET504', 'RET505', 'RET506', 'RET507', 'RET508', 'RUF', 'RUF0', 'RUF00', 'RUF001', 'RUF002', 'RUF003', 'RUF1', 'RUF10', 'RUF100', 'S', 'S1', 'S10', 'S101', 'S102', 'S104', 'S105', 'S106', 'S107', 'T', 'T1', 'T10', 'T100', 'T2', 'T20', 'T201', 'T203', 'U', 'U0', 'U00', 'U001', 'U003', 'U004', 'U005', 'U006', 'U007', 'U008', 'U009', 'U01', 'U010', 'U011', 'U012', 'U013', 'U014', 'U015', 'UP', 'UP0', 'UP00', 'UP001', 'UP003', 'UP004', 'UP005', 'UP006', 'UP007', 'UP008', 'UP009', 'UP01', 'UP010', 'UP011', 'UP012', 'UP013', 'UP014', 'UP015', 'W', 'W2', 'W29', 'W292', 'W6', 'W60', 'W605', 'YTT', 'YTT1', 'YTT10', 'YTT101', 'YTT102', 'YTT103', 'YTT2', 'YTT20', 'YTT201', 'YTT202', 'YTT203', 'YTT204', 'YTT3', 'YTT30', 'YTT301', 'YTT302', 'YTT303']
   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  ^^^^^
Unknown rule selector: `F83`


</code></pre>
</p>
</details>
<details><summary>emoji-papertrail (error)</summary>
https://github.com/thomasdesr/emoji-papertrail ref main select  ignore  exclude
<p>

<pre><code>error: Required version `0.0.220` does not match the running version `0.0.260`

</code></pre>
</p>
</details>
<details><summary>fastapi (error)</summary>
https://github.com/tiangolo/fastapi ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>proxiflow (error)</summary>
https://github.com/tomesm/proxiflow ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 1, column 1
  |
1 | [build-system]
  | ^
missing field `name`


</code></pre>
</p>
</details>
<details><summary>tools (error)</summary>
https://github.com/uoft-networking/tools ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>cloudflare-stats (error)</summary>
https://github.com/yaleman/cloudflare-stats ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 50, column 11
   |
50 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>homepage (error)</summary>
https://github.com/yaleman/homepage ref main select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 55, column 11
   |
55 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>td4-py (error)</summary>
https://github.com/yashikota/td4-py ref master select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 1, column 1
  |
1 | [tool.poetry]
  | ^
missing field `name`


</code></pre>
</p>
</details>
<details><summary>authx (error)</summary>
https://github.com/yezz123/authx ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>
<details><summary>fastapi-class (error)</summary>
https://github.com/yezz123/fastapi-class ref None select  ignore  exclude
<p>

<pre><code>error: TOML parse error at line 10, column 11
   |
10 | license = &quot;MIT&quot;
   |           ^^^^^
invalid type: string &quot;MIT&quot;, expected a table with 'file' or 'text' key


</code></pre>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-04-04 14:39</div>
            <div class="timeline-body"><p>FYI, at least some build backends (flit-core) ignore the <code>license</code> table because there's no clear mapping from that to the license metadata (though it does validate it, it just literally throws it away afterwords). The correct way to specify a license is via Trove Classifers unless you have a custom license (in which case, it's a bit fuzzy until something like <a href="https://peps.python.org/pep-0639/">PEP 639</a> goes in). That's actually historically the case too, ever since <a href="https://peps.python.org/pep-0314">PEP 314</a> in 2003 made the License metadata field &quot;Text indicating the license covering the package where the license is not a selection from the ‚ÄúLicense‚Äù Trove classifiers.&quot;.</p>
<p>But what you are seeing is pre-acceptance support for <a href="https://peps.python.org/pep-0639/#spec-source-metadata">PEP 639's license as a sting</a> in build backends like setuptools and hatchling.</p>
<p>FYI, I'd be careful about non-backends doing too much validation on pyproject.toml, especially if it's not opt-in by the package for that explicit reason. I'm working on several PEP's to improve pyproject.toml, and there's PEP 639, etc. - it's not set in stone, and non-backends validating it can cause issues making changes to the format. (One proposal I have would change <code>project.dynamic</code> into a table, where the keys are the old string values, for example.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2023-04-16 16:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-06-12 12:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 03:44:07 UTC
    </footer>
</body>
</html>
