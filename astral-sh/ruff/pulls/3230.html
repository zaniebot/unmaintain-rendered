<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[flake8-pyi]: PYI009, PYI010, PYI021 - astral-sh/ruff #3230</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[flake8-pyi]: PYI009, PYI010, PYI021</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/3230">#3230</a>
        opened by <a href="https://github.com/sbdchd">@sbdchd</a>
        on 2023-02-26 00:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sbdchd">@sbdchd</a></div>
            <div class="timeline-body"><p>PYI009 and PYI010 are very similar, always use <code>...</code> in function and class bodies in stubs.</p>
<p>PYI021 bans doc strings in stubs.</p>
<p>I think all of these rules should be relatively straightforward to implement auto fixes for but can do that later once we get all the other rules added.</p>
<p>rel: https://github.com/charliermarsh/ruff/issues/848</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "flake8-pyi: PYI009, PYI010, PYI021" to "[flake8-pyi]: PYI009, PYI010, PYI021" by @sbdchd on 2023-02-26 00:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/checkers/ast.rs</code>:3354 on 2023-02-26 00:32</div>
            <div class="timeline-body"><p>Maybe this should instead be colocated with the other <code>let definition = docstrings::extraction::extract(...)</code> calls, on <code>FunctionDef</code> and <code>ClassDef</code>, to ensure they're &quot;real&quot; docstrings? (Does <code>flake8-pyi</code> flag this for <em>any</em> standalone string? Or only actual docstrings?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-26 00:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sbdchd">@sbdchd</a> reviewed on 2023-02-26 00:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sbdchd">@sbdchd</a> on <code>crates/ruff/src/checkers/ast.rs</code>:3354 on 2023-02-26 00:34</div>
            <div class="timeline-body"><p>oh good point</p>
<p>flake8-pyi flags any standalone string: https://github.com/PyCQA/flake8-pyi/blob/4212bec43dbc4020a59b90e2957c9488575e57ba/pyi.py#L1128-L1132</p>
<p>which probably isn't what we really want</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-26 00:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/checkers/ast.rs</code>:3354 on 2023-02-26 00:36</div>
            <div class="timeline-body"><p>The other thing you could do, if you want, is put this logic in <code>check_definitions</code>, which iterates over all module, function, and class definitions, and you can check <code>definition.docstring.is_none()</code>. So you wouldn't need to put this in three places.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sbdchd">@sbdchd</a> reviewed on 2023-02-26 00:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sbdchd">@sbdchd</a> on <code>crates/ruff/src/checkers/ast.rs</code>:3354 on 2023-02-26 00:46</div>
            <div class="timeline-body"><p>even better!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-02-26 00:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/ban_doc_strings_in_stubs.rs</code>:10 on 2023-02-26 00:55</div>
            <div class="timeline-body"><p>I may rename these to adhere to our new rule naming convention (or feel free to do so if you're up for it): https://github.com/charliermarsh/ruff/blob/main/CONTRIBUTING.md#rule-naming-convention</p>
<p>Basically this would be: <code>DocstringInStub</code> (as in, &quot;Allow docstring in stub&quot;).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-26 00:55</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sbdchd">@sbdchd</a> reviewed on 2023-02-26 01:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sbdchd">@sbdchd</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/ban_doc_strings_in_stubs.rs</code>:10 on 2023-02-26 01:39</div>
            <div class="timeline-body"><p>done!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-02-26 03:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-26 03:29</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:56:26 UTC
    </footer>
</body>
</html>
