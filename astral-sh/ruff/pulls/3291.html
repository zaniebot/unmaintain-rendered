<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>flake8-pyi PYI006 bad version info comparison - astral-sh/ruff #3291</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>flake8-pyi PYI006 bad version info comparison</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/3291">#3291</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-03-01 11:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>This implements <a href="https://github.com/PyCQA/flake8-pyi">flake8-pyi</a> Y006 as PYI006 to catch bad comparisons with <code>sys.version_info</code>. I've also snuck in a change to <code>generate_mkdocs.py</code>.</p>
<p>I'm pretty sure this kind of comparison is always a bad, independent of <code>.py</code> vs. <code>.pyi</code>, but it's active only in <code>.pyi</code> matching the other <code>PYI</code> checks</p>
<p>Ticks off one box in #848.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @konstin on 2023-03-01 11:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sasanjac">@sasanjac</a> on 2023-03-01 13:02</div>
            <div class="timeline-body"><p>Why not activate it for <code>.py</code> files also if we get the check for free?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-03-01 16:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/bad_version_info_comparison.rs</code>:22 on 2023-03-01 16:14</div>
            <div class="timeline-body"><p>Nit: can we include here a prose explanation of why this is a problem? And then something like:</p>
<pre><code>/// ## Example
/// ```python
/// import sys
///
/// if sys.version_info &gt; (3, 8):
//     ...
/// ```
///
/// Use instead:
/// ```python
/// import sys
///
/// if sys.version_info &gt;= (3, 9):
//     ...
/// ```
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-03-01 16:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/checkers/ast.rs</code>:243 on 2023-03-01 16:14</div>
            <div class="timeline-body"><p>Thank you :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/bad_version_info_comparison.rs</code>:51 on 2023-03-01 16:16</div>
            <div class="timeline-body"><p>Nit: move this into the <code>if</code> body on line 59? Since it's only used in the event that we actually trigger the diagnostic.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-03-01 16:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/bad_version_info_comparison.rs</code>:51 on 2023-03-01 16:33</div>
            <div class="timeline-body"><p>done</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-03-01 16:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-03-01 16:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/bad_version_info_comparison.rs</code>:22 on 2023-03-01 16:33</div>
            <div class="timeline-body"><p>good idea, thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-01 16:54</div>
            <div class="timeline-body"><p>@sasanjac - We may turn on the <code>flake8-pyi</code> rules for <code>.py</code> files, but I'd rather do it all-at-once. For now, this is consistent with <code>flake8-pyi</code> and with how the other rules work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-03-01 16:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-03-01 17:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/bad_version_info_comparison.rs</code>:12 on 2023-03-01 17:00</div>
            <div class="timeline-body"><p>I just removed the empty lines here for consistency with the other docs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/bad_version_info_comparison.rs</code>:1 on 2023-03-01 17:45</div>
            <div class="timeline-body"><p>is there something other than <code>cargo fmt</code> i have to do here? i have &quot;run rustfmt on save&quot; on in pycharm but the precommit also didn't seem to have caught that</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-03-01 17:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/bad_version_info_comparison.rs</code>:42 on 2023-03-01 17:46</div>
            <div class="timeline-body"><p>oops thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-03-01 17:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-03-01 17:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/bad_version_info_comparison.rs</code>:12 on 2023-03-01 17:46</div>
            <div class="timeline-body"><p>ok i'll switch to that style</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-03-01 17:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/bad_version_info_comparison.rs</code>:1 on 2023-03-01 17:54</div>
            <div class="timeline-body"><p>This is PyCharm's &quot;Optimize Imports&quot; action. It's kind of a bad habit for me to run + commit it since it's not actually enforced in any automated way, but I often do run it when editing a new file ðŸ™ˆ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/flake8_pyi/rules/bad_version_info_comparison.rs</code>:1 on 2023-03-01 17:54</div>
            <div class="timeline-body"><p>We used to enforce these via <code>rustfmt</code> but it depended on nightly Rust so we removed it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-03-01 17:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @konstin on 2023-03-01 17:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2023-03-01 17:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-03-01 17:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:56:29 UTC
    </footer>
</body>
</html>
