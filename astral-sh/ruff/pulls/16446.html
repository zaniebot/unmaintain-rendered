<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[syntax-errors] `except*` before Python 3.11 - astral-sh/ruff #16446</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[syntax-errors] <code>except*</code> before Python 3.11</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16446">#16446</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-02-28 22:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a></div>
            <div class="timeline-body">Summary
<p>One of the simpler ones, just detect the use of <code>except*</code> before 3.11.</p>
Test Plan
<p>New inline tests.</p>
<p>I&#x27;m thinking it may be okay to leave out linter CLI tests for these since we have a few tests for the plumbing already, but I&#x27;m happy to add those again if that&#x27;s preferable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-02-28 22:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/ntBre">@ntBre</a> on 2025-02-28 22:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dhruvmanila">@dhruvmanila</a> by <a href="https://github.com/ntBre">@ntBre</a> on 2025-02-28 22:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-02-28 22:13</div>
            <div class="timeline-body">



<a href="https://codspeed.io/astral-sh/ruff/branches/brent%2Fsyn-except-star">CodSpeed Performance Report</a>
Merging #16446 will <strong>not alter performance</strong>
<p>Comparing <code>brent/syn-except-star</code> (cc2f852) with <code>main</code> (0d615b8)</p>
Summary
<p><code>✅ 32</code> untouched benchmarks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-02-28 22:56</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
Formatter (stable)
<p>✅ ecosystem check detected no format changes.</p>
Formatter (preview)
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_python_parser/src/parser/statement.rs</code>:1474 on 2025-03-02 15:20</div>
            <div class="timeline-body"><p>It&#x27;s not very useful here but I wonder if we should move the <code>options.target_version &lt; X</code> into <code>add_unsupported_syntax_error</code> because the minimal version is already encoded in <code>UnsupportedSyntaxErrorKind</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-03-02 15:20</div>
            <div class="timeline-body"><p>I agree, we don&#x27;t need more CLI test here. The inline tests are sufficient and easier to maintain.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-03-02 16:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_python_parser/src/parser/statement.rs</code>:1474 on 2025-03-02 16:27</div>
            <div class="timeline-body"><p>Ooh, I think that would be nice. I considered that briefly but thought I&#x27;d still have to pass a version. I forgot about <code>UnsupportedSyntaxErrorKind::minimum_version</code>.</p>
<p>Do you think I would need to rename <code>add_unsupported_syntax_error</code>? It might look like we&#x27;re unconditionally adding an error if the condition is internal. Maybe something like <code>check_unsupported_syntax</code> for a new name.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-03-02 17:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_python_parser/src/parser/statement.rs</code>:1474 on 2025-03-02 17:14</div>
            <div class="timeline-body"><p>I&#x27;m fine keeping it&#x27;s existing name</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-02 18:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-02 18:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-03-02 18:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2025-03-03 05:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_python_parser/tests/snapshots/invalid_syntax@except_star_py310.py.snap</code>:72 on 2025-03-03 05:34</div>
            <div class="timeline-body"><p>I think I&#x27;d prefer to just highlight the <code>except*</code> part instead of the entire <code>try</code> statement. <a href="https://pyright-play.net/?pythonVersion=3.8&amp;strict=true&amp;code=C4JwngXAUABHMDolQKYA8DGKAOwBUMAagIYA2ArigKIggD2I08iSQA">Pyright only highlights the <code>*</code> token.</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">parser</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-03-03 05:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-03-03 13:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_python_parser/tests/snapshots/invalid_syntax@except_star_py310.py.snap</code>:72 on 2025-03-03 13:35</div>
            <div class="timeline-body"><p>Ah okay. I did try that at one point, but I wasn&#x27;t sure how to handle multiple <code>except*</code> lines after the first. It looks like <code>pyright</code> emits a separate error for each one, which makes sense.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:11:54 UTC
    </footer>
</body>
</html>
