<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>add autofix for `PIE804` - astral-sh/ruff #7884</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>add autofix for <code>PIE804</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/7884">#7884</a>
        opened by <a href="https://github.com/diceroll123">@diceroll123</a>
        on 2023-10-10 03:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/diceroll123">@diceroll123</a></div>
            <div class="timeline-body">

Summary


<p>Adds autofix for <code>PIE804</code>, closes #6783.</p>
<p>I&#x27;ve split the <code>if</code>s apart to make the diagnostics easier to read. Open to suggestions if that&#x27;s not desired!</p>
Test Plan


<p><code>cargo test</code>, and manually.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;add autofix for PIE804&quot; to &quot;add autofix for `PIE804`&quot; by <a href="https://github.com/diceroll123">@diceroll123</a> on 2023-10-10 03:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/diceroll123">@diceroll123</a> reviewed on 2023-10-10 03:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/diceroll123">@diceroll123</a> on <code>crates/ruff_linter/src/rules/flake8_pie/rules/unnecessary_dict_kwargs.rs</code>:92 on 2023-10-10 03:27</div>
            <div class="timeline-body"><p>not <em>particularly</em> proud of this, is there a less scary-looking way to do this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-10-10 03:38</div>
            <div class="timeline-body">PR Check Results
Ecosystem
<p>ℹ️ ecosystem check <strong>detected changes</strong>. (+24, -24, 0 error(s))</p>
airflow (+24, -24)
<p>

<pre>
- [*] 16008 fixable with the `--fix` option (6314 hidden fixes can be enabled with the `--unsafe-fixes` option).
+ [*] 16031 fixable with the `--fix` option (6314 hidden fixes can be enabled with the `--unsafe-fixes` option).
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/operators/test_eks.py#L728">tests/providers/amazon/aws/operators/test_eks.py:728:30:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/operators/test_eks.py#L728">tests/providers/amazon/aws/operators/test_eks.py:728:30:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L102">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:102:9:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L102">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:102:9:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L132">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:132:9:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L132">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:132:9:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L181">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:181:9:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L181">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:181:9:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L219">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:219:9:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L219">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:219:9:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L268">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:268:9:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L268">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:268:9:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L61">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:61:9:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/amazon/aws/utils/test_waiter_with_logging.py#L61">tests/providers/amazon/aws/utils/test_waiter_with_logging.py:61:9:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/cncf/kubernetes/utils/test_pod_manager.py#L803">tests/providers/cncf/kubernetes/utils/test_pod_manager.py:803:30:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/cncf/kubernetes/utils/test_pod_manager.py#L803">tests/providers/cncf/kubernetes/utils/test_pod_manager.py:803:30:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/cloud/hooks/test_life_sciences.py#L125">tests/providers/google/cloud/hooks/test_life_sciences.py:125:24:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/cloud/hooks/test_life_sciences.py#L125">tests/providers/google/cloud/hooks/test_life_sciences.py:125:24:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/cloud/hooks/test_life_sciences.py#L154">tests/providers/google/cloud/hooks/test_life_sciences.py:154:24:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/cloud/hooks/test_life_sciences.py#L154">tests/providers/google/cloud/hooks/test_life_sciences.py:154:24:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/cloud/hooks/test_life_sciences.py#L231">tests/providers/google/cloud/hooks/test_life_sciences.py:231:24:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/cloud/hooks/test_life_sciences.py#L231">tests/providers/google/cloud/hooks/test_life_sciences.py:231:24:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/cloud/hooks/test_life_sciences.py#L259">tests/providers/google/cloud/hooks/test_life_sciences.py:259:24:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/cloud/hooks/test_life_sciences.py#L259">tests/providers/google/cloud/hooks/test_life_sciences.py:259:24:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/cloud/operators/test_kubernetes_engine.py#L404">tests/providers/google/cloud/operators/test_kubernetes_engine.py:404:30:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/cloud/operators/test_kubernetes_engine.py#L404">tests/providers/google/cloud/operators/test_kubernetes_engine.py:404:30:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/firebase/hooks/test_firestore.py#L100">tests/providers/google/firebase/hooks/test_firestore.py:100:24:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/firebase/hooks/test_firestore.py#L100">tests/providers/google/firebase/hooks/test_firestore.py:100:24:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/firebase/hooks/test_firestore.py#L122">tests/providers/google/firebase/hooks/test_firestore.py:122:24:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/firebase/hooks/test_firestore.py#L122">tests/providers/google/firebase/hooks/test_firestore.py:122:24:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/firebase/hooks/test_firestore.py#L189">tests/providers/google/firebase/hooks/test_firestore.py:189:24:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/firebase/hooks/test_firestore.py#L189">tests/providers/google/firebase/hooks/test_firestore.py:189:24:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/firebase/hooks/test_firestore.py#L216">tests/providers/google/firebase/hooks/test_firestore.py:216:24:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/google/firebase/hooks/test_firestore.py#L216">tests/providers/google/firebase/hooks/test_firestore.py:216:24:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/telegram/hooks/test_telegram.py#L106">tests/providers/telegram/hooks/test_telegram.py:106:9:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/telegram/hooks/test_telegram.py#L106">tests/providers/telegram/hooks/test_telegram.py:106:9:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/telegram/hooks/test_telegram.py#L125">tests/providers/telegram/hooks/test_telegram.py:125:9:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/telegram/hooks/test_telegram.py#L125">tests/providers/telegram/hooks/test_telegram.py:125:9:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/telegram/hooks/test_telegram.py#L144">tests/providers/telegram/hooks/test_telegram.py:144:9:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/telegram/hooks/test_telegram.py#L144">tests/providers/telegram/hooks/test_telegram.py:144:9:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/telegram/hooks/test_telegram.py#L171">tests/providers/telegram/hooks/test_telegram.py:171:9:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/telegram/hooks/test_telegram.py#L171">tests/providers/telegram/hooks/test_telegram.py:171:9:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/telegram/hooks/test_telegram.py#L191">tests/providers/telegram/hooks/test_telegram.py:191:9:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/providers/telegram/hooks/test_telegram.py#L191">tests/providers/telegram/hooks/test_telegram.py:191:9:</a> PIE804 [*] Unnecessary `dict` kwargs
- <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/utils/test_compression.py#L76">tests/utils/test_compression.py:76:13:</a> PIE804 Unnecessary `dict` kwargs
+ <a href="https://github.com/apache/airflow/blob/8fdf3582c2967161dd794f7efb53691d092f0ce6/tests/utils/test_compression.py#L76">tests/utils/test_compression.py:76:13:</a> PIE804 [*] Unnecessary `dict` kwargs
</pre>

</p>

Rules changed: 1

<p>| Rule | Changes | Additions | Removals |
| ---- | ------- | --------- | -------- |
| PIE804 | 46 | 23 | 23 |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-10-11 00:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rules/flake8_pie/rules/unnecessary_dict_kwargs.rs</code>:87 on 2023-10-11 00:59</div>
            <div class="timeline-body"><p>I restructured it such that, when we validate the keyword arguments, we also return the valid keyword argument <em>name</em>. That lets us avoid a bunch of unwraps below. In other words: when we validate, we return the validated data.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">autofix</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-11 00:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/diceroll123">@diceroll123</a> on <code>crates/ruff_linter/src/rules/flake8_pie/rules/unnecessary_dict_kwargs.rs</code>:87 on 2023-10-11 01:00</div>
            <div class="timeline-body"><p>ooo. Love it! Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/diceroll123">@diceroll123</a> reviewed on 2023-10-11 01:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-11 01:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-11 01:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:58:10 UTC
    </footer>
</body>
</html>
