<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix handling of `Applicability::Display` fixes when generating summary messages - astral-sh/ruff #7932</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fix handling of <code>Applicability::Display</code> fixes when generating summary messages</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/7932">#7932</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2023-10-12 22:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>We were including <code>Display</code> fixes in the summary counts for unapplicable fixes resulting in incorrect prompts to the user that a fix could be enabled.</p>
<h2>Example</h2>
<pre><code class="language-python">def add_to_list(item, some_list=[]):
    ...
</code></pre>
<p>Before</p>
<pre><code>❯ ruff check example.py --no-cache --select B
example.py:1:33: B006 Do not use mutable data structures for argument defaults
Found 1 error.
1 hidden fix can be enabled with the `--unsafe-fixes` option.
❯ ruff check example.py --no-cache --select B --unsafe-fixes
example.py:1:33: B006 Do not use mutable data structures for argument defaults
Found 1 error.
[*] 0 fixable with the --fix option.
❯ ruff check example.py --no-cache --select B --unsafe-fixes --diff
No errors would be fixed (1 fix available with `--unsafe-fixes`).
❯ ruff check example.py --no-cache --select B --unsafe-fixes --fix
example.py:1:33: B006 Do not use mutable data structures for argument defaults
Found 1 error.
[*] 0 fixable with the --fix option.
</code></pre>
<p>After</p>
<pre><code>❯ ruff check example.py --no-cache --select B --unsafe-fixes
example.py:1:33: B006 Do not use mutable data structures for argument defaults
Found 1 error.
❯ ruff check example.py --no-cache --select B
example.py:1:33: B006 Do not use mutable data structures for argument defaults
Found 1 error.
❯ ruff check example.py --no-cache --select B --unsafe-fixes --diff
❯ ruff check example.py --no-cache --select B --unsafe-fixes --fix
example.py:1:33: B006 Do not use mutable data structures for argument defaults
Found 1 error.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-10-12 22:46</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>ℹ️ ecosystem check <strong>detected changes</strong>. (+6, -6, 0 error(s))</p>
<details><summary>airflow (+1, -1)</summary>
<p>

<pre>
+ [*] 16066 fixable with the `--fix` option (6165 hidden fixes can be enabled with the `--unsafe-fixes` option).
- [*] 16066 fixable with the `--fix` option (6343 hidden fixes can be enabled with the `--unsafe-fixes` option).
</pre>

</p>
</details>
<details><summary>bokeh (+1, -1)</summary>
<p>

<pre>
+ [*] 17800 fixable with the `--fix` option (4369 hidden fixes can be enabled with the `--unsafe-fixes` option).
- [*] 17800 fixable with the `--fix` option (4727 hidden fixes can be enabled with the `--unsafe-fixes` option).
</pre>

</p>
</details>
<details><summary>latch (+1, -1)</summary>
<p>

<pre>
+ [*] 205 fixable with the `--fix` option (33 hidden fixes can be enabled with the `--unsafe-fixes` option).
- [*] 205 fixable with the `--fix` option (38 hidden fixes can be enabled with the `--unsafe-fixes` option).
</pre>

</p>
</details>
<details><summary>pymilvus (+1, -1)</summary>
<p>

<pre>
- [*] 233 fixable with the `--fix` option (132 hidden fixes can be enabled with the `--unsafe-fixes` option).
+ [*] 233 fixable with the `--fix` option (98 hidden fixes can be enabled with the `--unsafe-fixes` option).
</pre>

</p>
</details>
<details><summary>rotki (+1, -1)</summary>
<p>

<pre>
- [*] 11 fixable with the `--fix` option (20 hidden fixes can be enabled with the `--unsafe-fixes` option).
+ [*] 11 fixable with the `--fix` option (8 hidden fixes can be enabled with the `--unsafe-fixes` option).
</pre>

</p>
</details>
<details><summary>zulip (+1, -1)</summary>
<p>

<pre>
+ [*] 7882 fixable with the `--fix` option (12139 hidden fixes can be enabled with the `--unsafe-fixes` option).
- [*] 7882 fixable with the `--fix` option (12629 hidden fixes can be enabled with the `--unsafe-fixes` option).
</pre>

</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-10-13 00:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @zanieb on 2023-10-13 01:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2023-10-13 01:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-10-13 01:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:00:48 UTC
    </footer>
</body>
</html>
