<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ruff 0.8] [`flake8-annotations`] Remove deprecated rules ANN101 and ANN102 - astral-sh/ruff #14384</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ruff 0.8] [<code>flake8-annotations</code>] Remove deprecated rules ANN101 and ANN102</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/14384">#14384</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2024-11-16 19:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-11-16 19:06</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Remove deprecated rules ANN101 and ANN102. These have been deprecated since <a href="https://github.com/astral-sh/ruff/pull/9680">Ruff 0.2</a>, released in February. There are no open issues on the tracker asking us to undeprecate them.</p>
<h2>Test Plan</h2>
<ul>
<li><code>cargo test</code></li>
<li><code>git grep ANN101</code>, <code>git grep ANN102</code>, <code>git grep MissingTypeCls</code> and <code>git grep MissingTypeSelf</code> all show no results</li>
<li>Wait to see how impactful the ecosystem report shows this to be</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">breaking</span> added by @AlexWaygood on 2024-11-16 19:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-11-16 19:19</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-11-16 19:27</div>
            <div class="timeline-body"><p>All the errors in the ecosystem check are due to people having already explicitly ignored the rule in their <code>pyproject.toml</code> files. I think that validates removing the rule.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[ruff 0.8] Remove deprecated rules ANN101 and ANN102" to "[ruff 0.8] [`flake8-annotations`] Remove deprecated rules ANN101 and ANN102" by @AlexWaygood on 2024-11-16 19:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-11-16 19:53</div>
            <div class="timeline-body"><p>I feel like my main concern with merging this <em>now</em> is it will make the ecosystem report less useful for other PRs targeting the <code>ruff-0.8</code> branch, since, once this is merged, Ruff just can't parse the configuration file at all for repos that explicitly list these rules in <code>tool.ruff.lint.ignore</code>. If we want to land this, I think I'd prefer to merge it after all other changes have made it into the <code>ruff-0.8</code> branch.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-11-16 21:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">do-not-merge</span> added by @AlexWaygood on 2024-11-16 21:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-17 15:03</div>
            <div class="timeline-body"><p>Landing that PR late in the 0.8 release process might not be enough because it means that we go blind on ecosystem checks after the 0.8 release until all ecosystem projects have updated their configurations (which may take a while).</p>
<p>I think we have to change the ecosystem script to remove individual rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-11-17 15:10</div>
            <div class="timeline-body"><blockquote>
<p>Landing that PR late in the 0.8 release process might not be enough because it means that we go blind on ecosystem checks after the 0.8 release until all ecosystem projects have updated their configurations (which may take a while).</p>
</blockquote>
<p>Right. I added a step to the 0.8 plan which is &quot;file PRs with other projects helping them to update to 0.8&quot; after we've actually cut the release. But maybe even that won't be sufficient.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-17 15:18</div>
            <div class="timeline-body"><blockquote>
<p>Right. I added a step to the 0.8 plan which is &quot;file PRs with other projects helping them to update to 0.8&quot; after we've actually cut the release. But maybe even that won't be sufficient.</p>
</blockquote>
<p>I haven't checked but I worry that many projects aren't even using Ruff 0.7 at this point. That means they might have to upgrade from an arbitrary old Ruff version to 0.8, and upgrading might just not be a priority for them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-11-17 17:34</div>
            <div class="timeline-body"><p>Okay, so for the various affected projects:</p>
<ul>
<li><code>setuptools</code>:<ul>
<li>Broken by https://github.com/astral-sh/ruff/pull/14382</li>
<li>Currently pins ruff to <code>&gt;=0.7.1</code>:<ul>
<li>https://github.com/pypa/setuptools/blob/540001561bc2c6766940ba5fd6247735c1a3a290/pyproject.toml#L118</li>
<li>https://github.com/pypa/setuptools/blob/540001561bc2c6766940ba5fd6247735c1a3a290/.pre-commit-config.yaml#L3</li>
</ul>
</li>
</ul>
</li>
<li><code>latch</code>:<ul>
<li>Broken by this PR</li>
<li>Currently pins ruff to <code>&gt;=0.7.0</code>: https://github.com/latchbio/latch/blob/2c739ac73730d9e6de8b075e8c2c9bae26eca5c2/pyproject.toml#L90</li>
</ul>
</li>
<li><code>scikit-build-core</code>:<ul>
<li>Broken by this PR <em>and</em> #14385</li>
<li>Currently pins ruff to <code>0.7.2</code>: https://github.com/scikit-build/scikit-build-core/blob/acc69a86cd1995b8baff4e631e453906226801dd/.pre-commit-config.yaml#L28</li>
</ul>
</li>
<li><code>zulip</code>:<ul>
<li>Broken by this PR</li>
<li>Currently pins ruff to <code>0.7.1</code>: https://github.com/zulip/zulip/blob/5d1de4c037fabda6622353b422af6b145d3d40de/requirements/dev.txt#L2910</li>
</ul>
</li>
<li><code>trio</code>:<ul>
<li>Broken by this PR</li>
<li>Currently pins ruff to <code>0.7.3</code>: https://github.com/python-trio/trio/blob/785dc59309ca4f491562b817836092f54b7da4b1/test-requirements.txt#L116</li>
</ul>
</li>
<li><code>airflow</code><ul>
<li>Broken by https://github.com/astral-sh/ruff/pull/14385</li>
<li>Currently pins ruff to <code>0.7.3</code>: https://github.com/apache/airflow/blob/c807762ec65db6bd699c1eb638dd79d173717df2/.pre-commit-config.yaml#L363</li>
</ul>
</li>
<li><code>pandas</code>:<ul>
<li>Broken by #14385</li>
<li>Currently pins ruff to <code>0.7.3</code>: https://github.com/pandas-dev/pandas/blob/7fe270c8e7656c0c187260677b3b16a17a1281dc/.pre-commit-config.yaml#L22</li>
</ul>
</li>
<li><code>cibuildwheel</code>:<ul>
<li>Broken by #14385</li>
<li>Currently pins ruff to <code>0.7.3</code>: https://github.com/pypa/cibuildwheel/blob/df6f8863900b4519a8dfee992548b11b4329d12b/.pre-commit-config.yaml#L17</li>
</ul>
</li>
<li><code>pip</code><ul>
<li>Broken by #14385</li>
<li>Currently pins ruff to <code>0.5.6</code>: https://github.com/pypa/pip/blob/fe0925b3c00bf8956a0d33408df692ac364217d4/.pre-commit-config.yaml#L25</li>
</ul>
</li>
<li><code>indico</code><ul>
<li>Broken by #14385</li>
<li>Currently pins ruff to <code>0.7.2</code>: https://github.com/indico/indico/blob/e63bce8b88b4a3bcfc8397d83fceadd32b81712c/requirements.dev.txt#L166</li>
</ul>
</li>
</ul>
<p>So nearly all of those look like they should be <em>fairly</em> easy upgrades, and it looks like they try hard to keep their ruff pin up to date. The only exception is perhaps the <code>pip</code> one. But the sheer quantity of affected projects means that we should probably adopt some interim solution anyway to avoid the ecosystem check breaking for all PRs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2024-11-18 00:04</div>
            <div class="timeline-body"><p>I commented the same thing in https://github.com/astral-sh/ruff/pull/14383#issuecomment-2481685777, but I think it's even more relevant here.</p>
<p>Making &quot;unknown rule ignored&quot; a warning instead of a parsing error may help keep the ecosystem checks relevant when removing a rule. This is already a feature request there: https://github.com/astral-sh/ruff/issues/13505</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-18 07:31</div>
            <div class="timeline-body"><blockquote>
<p>Making &quot;unknown rule ignored&quot; a warning instead of a parsing error may help keep the ecosystem checks relevant when removing a rule. This is already a feature request there: https://github.com/astral-sh/ruff/issues/13505</p>
</blockquote>
<p>That's a good point. I worry that the change is a bit more work. It would require an error resilient <code>RuleSelector</code> for deserialization.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.8" by @AlexWaygood on 2024-11-18 11:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">do-not-merge</span> removed by @MichaReiser on 2024-11-19 08:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2024-11-19 09:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-11-19 09:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-11-19 09:00</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 20:51:28 UTC
    </footer>
</body>
</html>
