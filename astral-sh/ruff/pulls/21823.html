<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8-bugbear`] Accept immutable slice default arguments (`B008`) - astral-sh/ruff #21823</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8-bugbear</code>] Accept immutable slice default arguments (<code>B008</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/21823">#21823</a>
        opened by <a href="https://github.com/LoicRiegel">@LoicRiegel</a>
        on 2025-12-06 13:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/LoicRiegel">@LoicRiegel</a></div>
            <div class="timeline-body"><p>Closes issue #21565</p>
Summary
<p>As pointed out in the issue, slices are currently flagged by B008 but this behavior is incorrect because slices are immutable.</p>
Test Plan
<p>Added a test case in the &quot;B006_B008.py&quot; fixture. Sorry for the diff in the snapshots, the only thing that changes in those flies is the line numbers, though.</p>
<p>You can also test this manually with this file:</p>
<pre><code># test_slice.py
def c(d=slice(0, 3)): ...
</code></pre>
<pre><code>&gt; target/debug/ruff check tmp/test_slice.py --no-cache --select B008
All checks passed!
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2025-12-06 13:16</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;flake8_bugbear (BOO8): accept immutable slice&quot; to &quot;[`flake8-bugbear`] Accept immutable slice default arguments (`B008`)&quot; by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-08 14:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-08 14:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> approved on 2025-12-08 19:00</div>
            <div class="timeline-body"><p>Thank you!</p>
<p>Just a note in case of future reference, I checked the other callers of <code>is_immutable_return_type</code> (via <code>is_immutable_func</code>), and this change will also affect <a href="https://docs.astral.sh/ruff/rules/function-call-in-dataclass-default-argument/#function-call-in-dataclass-default-argument-ruf009">function-call-in-dataclass-default-argument (RUF009)</a> and <a href="https://docs.astral.sh/ruff/rules/mutable-contextvar-default/#mutable-contextvar-default-b039">mutable-contextvar-default (B039)</a>.</p>
<p>But I think it&#x27;s straightforward enough that we don&#x27;t need to test every rule.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-08 19:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-08 19:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-12-08 22:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:21:28 UTC
    </footer>
</body>
</html>
