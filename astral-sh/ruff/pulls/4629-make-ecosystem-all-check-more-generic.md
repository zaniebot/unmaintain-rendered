```yaml
number: 4629
title: Make ecosystem all check more generic
type: pull_request
state: merged
author: konstin
labels: []
assignees: []
merged: true
base: main
head: make-ecosystem-all-more-generic
created_at: 2023-05-24T14:13:37Z
updated_at: 2023-05-24T14:26:24Z
url: https://github.com/astral-sh/ruff/pull/4629
synced_at: 2026-01-12T15:55:16Z
```

# Make ecosystem all check more generic

---

_@konstin_

<!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

## Summary

This allows passing arguments to the ecosystem all check script, e.g. you can now do `scripts/ecosystem_all_check.sh check --select RUF008`.

<!-- What's the purpose of the change? What does it do, and why? -->

## Test Plan

```
$ docker run -v ./target/checkouts:/app/checkouts -v ./github_search.jsonl:/app/github_search.jsonl  -v ./scripts/check_ecosystem.py:/app/check_ecosystem.py --rm ruff-ecosystem-checker python check_ecosystem.py --verbose true true --projects github_search.jsonl --checkouts checkouts > target/ecosystem-ci.txt
[lots of verbose output - we only use this to clone the repos]
$ scripts/ecosystem_all_check.sh check --select RUF008
[no errors]
$ cat target/ecosystem_all_results/*.stdout.txt | head
src/fi_parliament_tools/parsing/data_structures.py:33:17: RUF008 Do not use mutable default values for dataclass attributes
src/fi_parliament_tools/parsing/data_structures.py:76:17: RUF008 Do not use mutable default values for dataclass attributes
src/fi_parliament_tools/parsing/data_structures.py:178:17: RUF008 Do not use mutable default values for dataclass attributes
Found 3 errors.
braid_triggers/tasks.py:46:17: RUF008 Do not use mutable default values for dataclass attributes
Found 1 error.
src/boards/RaspberryPi3.py:15:22: RUF008 Do not use mutable default values for dataclass attributes
src/boards/board.py:21:26: RUF008 Do not use mutable default values for dataclass attributes
src/boards/board.py:22:32: RUF008 Do not use mutable default values for dataclass attributes
src/boards/board.py:23:37: RUF008 Do not use mutable default values for dataclass attributes
$ cat target/ecosystem_all_results/*.stdout.txt | wc -l
115
```


<!-- How was it tested? -->


---

_Comment by @konstin on 2023-05-24 14:13_

Current dependencies on/for this PR:
* main
  * **PR #4628** <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4628" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite" width="10px" height="10px"/></a> 
    * **PR #4629** <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4629" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite" width="10px" height="10px"/></a>  ðŸ‘ˆ

This comment was auto-generated by [Graphite](https://app.graphite.dev/github/pr/charliermarsh/ruff/4629?utm_source=stack-comment).

---

_@charliermarsh approved on 2023-05-24 14:21_

---

_Comment by @charliermarsh on 2023-05-24 14:22_

The copy-paste-able test plan is great.

---

_Merged by @konstin on 2023-05-24 14:26_

---

_Closed by @konstin on 2023-05-24 14:26_

---

_Branch deleted on 2023-05-24 14:26_

---
