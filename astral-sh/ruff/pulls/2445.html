<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement pylint's `too-many-statements` rule (`PLR0915`) - astral-sh/ruff #2445</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Implement pylint's <code>too-many-statements</code> rule (<code>PLR0915</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/2445">#2445</a>
        opened by <a href="https://github.com/chanman3388">@chanman3388</a>
        on 2023-02-01 17:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/chanman3388">@chanman3388</a> on 2023-02-01 17:07</div>
            <div class="timeline-body"><p>https://pylint.pycqa.org/en/latest/user_guide/messages/refactor/too-many-statements.html</p>
<p>A bit of a quirky one, I made a bunch of test cases in python to see how pylint would work (tested on 2.9.3) to derive the expected behaviour.</p>
<p>Issue #970</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chanman3388">@chanman3388</a> on 2023-02-01 17:21</div>
            <div class="timeline-body"><p>I'm unsure how to fix the unittest as it passes for me locally:</p>
<pre><code>âžœ  ruff git:(PLR0915) cargo test rules::pylint::tests::max_statements                    
    Finished test [unoptimized + debuginfo] target(s) in 0.84s
     Running unittests src/lib.rs (target/debug/deps/ruff-6394b47557a9e4c6)

running 1 test
test rules::pylint::tests::max_statements ... ok
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @chanman3388 on 2023-02-01 17:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-01 17:35</div>
            <div class="timeline-body"><p>Looks like it's failing due to <code> No such file or directory</code>. Let me see...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-01 17:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/rules/pylint/settings.rs</code>:59 on 2023-02-01 17:58</div>
            <div class="timeline-body"><p>Nit: in the example, use <code>max-statements</code>, since we use that casing in the TOML.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/chanman3388">@chanman3388</a> on <code>src/rules/pylint/settings.rs</code>:59 on 2023-02-01 17:58</div>
            <div class="timeline-body"><p>Thank you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/chanman3388">@chanman3388</a> reviewed on 2023-02-01 17:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-01 18:00</div>
            <div class="timeline-body"><p>Can't for the life of me figure out that failure. Going to try downgrading <code>insta</code> I guess?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chanman3388">@chanman3388</a> on 2023-02-01 18:07</div>
            <div class="timeline-body"><blockquote>
<p>Can't for the life of me figure out that failure. Going to try downgrading <code>insta</code> I guess?</p>
</blockquote>
<p>I think I figured it out, I put the wrong path inside of <code>src/rules/pylint/mod.rs</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @chanman3388 on 2023-02-01 18:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/rules/pylint/rules/too_many_statements.rs</code>:79 on 2023-02-02 02:32</div>
            <div class="timeline-body"><p>Nit: extra print here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-02 02:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-02 02:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/rules/pylint/rules/too_many_statements.rs</code>:133 on 2023-02-02 02:32</div>
            <div class="timeline-body"><p>Thank you for all the tests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-02 02:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/rules/pylint/rules/too_many_statements.rs</code>:76 on 2023-02-02 02:33</div>
            <div class="timeline-body"><p>Did you review the Pylint source when writing this? Or was it all inferred from the tests?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/chanman3388">@chanman3388</a> reviewed on 2023-02-02 04:55</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/chanman3388">@chanman3388</a> on <code>src/rules/pylint/rules/too_many_statements.rs</code>:76 on 2023-02-02 04:55</div>
            <div class="timeline-body"><p>I made a load of examples by hand and ran pylint on them to see what was going on. In each of the unittests, I added a comment on the function def line which indicates the number of statements as reported by pylint 2.9.3. Some of the behaviour seems odd and I was considering raising some issues against pylint.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/chanman3388">@chanman3388</a> reviewed on 2023-02-02 05:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/chanman3388">@chanman3388</a> on <code>src/rules/pylint/rules/too_many_statements.rs</code>:76 on 2023-02-02 05:22</div>
            <div class="timeline-body"><p>Hm, the architecture for pylint is slightly different, however I did find this:</p>
<pre><code>def visit_tryfinally(self, node: nodes.TryFinally) -&gt; None:
    &quot;&quot;&quot;Increments the branches counter.&quot;&quot;&quot;
    self._inc_branch(node, 2)
    self._inc_all_stmts(2)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-02-02 13:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-02 13:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-02-02 13:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 04:54:18 UTC
    </footer>
</body>
</html>
