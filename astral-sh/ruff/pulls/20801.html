<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`ruff`] Use DiagnosticTag for more pyflakes and panda rules - astral-sh/ruff #20801</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>ruff</code>] Use DiagnosticTag for more pyflakes and panda rules</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/20801">#20801</a>
        opened by <a href="https://github.com/TaKO8Ki">@TaKO8Ki</a>
        on 2025-10-10 10:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/TaKO8Ki">@TaKO8Ki</a></div>
            <div class="timeline-body">

Summary


<p>Fixes a part of #20590 and follow up to #20734</p>
<p>Rolling out DiagnosticTag to every existing rule in one go would complicate the review, so in this pull request I’ve limited the changes to flake8 and numpy. (RUF100, PD011, F811, F842, RUF029)</p>
Test Plan


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-10-10 10:49</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-10-12 06:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pandas_vet/rules/subscript.rs</code>:168 on 2025-10-12 06:17</div>
            <div class="timeline-body"><p>Hmm. I&#x27;m not sure about using deprecated here. The method isn&#x27;t deprecated according to <a href="https://docs.astral.sh/ruff/rules/pandas-use-of-dot-values/">pandas documentation</a>; they only advise against it. To me, that makes this rule similar to other rules that recommend one pattern over another because it&#x27;s less error prone</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-10-12 06:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/ruff/rules/unused_async.rs</code>:198 on 2025-10-12 06:22</div>
            <div class="timeline-body"><p>I think using the unnecessary tag for this rule is problematic because it makes the function appear as unused when this is inaccurate (it&#x27;s not the async keyword that&#x27;s rendered as unused).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pyflakes/rules/unused_annotation.rs</code>:49 on 2025-10-12 06:23</div>
            <div class="timeline-body"><p>Is my understanding correct that <code>range</code> is the range for the entire binding? If so, I think we shoulnd&#x27;t use the unnecessary tag because it makes the whole binding appear as unnecessary, when it&#x27;s just the annotation that&#x27;s unnecessary.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-10-12 06:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-10-12 06:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/TaKO8Ki">@TaKO8Ki</a> reviewed on 2025-10-17 18:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/TaKO8Ki">@TaKO8Ki</a> on <code>crates/ruff_linter/src/rules/pyflakes/rules/unused_annotation.rs</code>:49 on 2025-10-17 18:56</div>
            <div class="timeline-body"><p>You&#x27;re right. I will remove the tag here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/TaKO8Ki">@TaKO8Ki</a> on <code>crates/ruff_linter/src/rules/pandas_vet/rules/subscript.rs</code>:168 on 2025-10-17 19:05</div>
            <div class="timeline-body"><p>This PandasUseOfDotIx rule is other one PD007 https://docs.astral.sh/ruff/rules/pandas-use-of-dot-ix. It says:</p>
<blockquote>
<p>The .ix method is deprecated as its behavior is ambiguous.</p>
</blockquote>
<p>So it seems that the method is deprecated?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/TaKO8Ki">@TaKO8Ki</a> reviewed on 2025-10-17 19:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/TaKO8Ki">@TaKO8Ki</a> on 2025-10-17 19:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TaKO8Ki">@TaKO8Ki</a> on 2025-10-17 19:05</div>
            <div class="timeline-body"><p>@MichaReiser Thank you for the review. I have addressed your comments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-10-19 09:07</div>
            <div class="timeline-body"><p>Thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-10-19 09:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-10-19 09:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:19:24 UTC
    </footer>
</body>
</html>
