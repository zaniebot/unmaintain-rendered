<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Add a Todo-type branch for `type[P]` where `P` is a protocol class - astral-sh/ruff #19947</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Add a Todo-type branch for <code>type[P]</code> where <code>P</code> is a protocol class</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19947">#19947</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-08-17 14:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-08-17 14:04</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>&quot;Meta-protocols&quot; (the type implied by <code>type[P]</code> where <code>P</code> is a protocol class) are an interesting and under-specified concept. We'll have to support them in some form eventually, because they're used in real-world code, including in typeshed -- but we don't yet, and this causes false positives. They're also far from the highest priority thing we need to fix in our protocol implementation currently, and the missing support for them is complicating matters (adding lots of new false positives) in other protocol work I'm doing. For now, therefore, this PR just adds some Todo-type branches to get rid of the false positives in user code.</p>
<p>Fixes https://github.com/astral-sh/ty/issues/582. It obviously fixes it in a pretty hacky way, but we have https://github.com/astral-sh/ty/issues/903 also open, and that issue tracks proper support for meta-protocols.</p>
<h2>Test Plan</h2>
<p>Mdtests</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @AlexWaygood on 2025-08-17 14:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @AlexWaygood on 2025-08-17 14:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dcreager by @AlexWaygood on 2025-08-17 14:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-08-17 14:06</div>
            <div class="timeline-body"><!-- generated-comment typing_conformance_diagnostics_diff -->

<h2>Diagnostic diff on <a href="https://github.com/python/typing/tree/d4f39b27a4a47aac8b6d4019e1b0b5b3156fabdc/conformance">typing conformance tests</a></h2>
<details>
<summary>Changes were detected when running ty on typing conformance tests</summary>

<pre><code class="language-diff">--- old-output.txt	2025-08-18 20:36:32.675991738 +0000
+++ new-output.txt	2025-08-18 20:36:35.144024283 +0000
@@ -734,8 +734,6 @@
 overloads_evaluation.py:234:5: error[type-assertion-failure] Argument does not have asserted type `int`
 overloads_evaluation.py:291:33: error[invalid-return-type] Function always implicitly returns `None`, which is not assignable to return type `T@example6`
 overloads_evaluation.py:322:5: error[type-assertion-failure] Argument does not have asserted type `list[int]`
-protocols_class_objects.py:30:5: error[invalid-argument-type] Argument to function `fun` is incorrect: Expected `type[Proto]`, found `&lt;class 'Concrete'&gt;`
-protocols_class_objects.py:35:1: error[invalid-assignment] Object of type `&lt;class 'Concrete'&gt;` is not assignable to `type[Proto]`
 protocols_class_objects.py:58:1: error[invalid-assignment] Object of type `&lt;class 'ConcreteA'&gt;` is not assignable to `ProtoA1`
 protocols_class_objects.py:59:1: error[invalid-assignment] Object of type `&lt;class 'ConcreteA'&gt;` is not assignable to `ProtoA2`
 protocols_definition.py:79:1: error[invalid-assignment] Object of type `Concrete` is not assignable to `Template`
@@ -861,5 +859,5 @@
 typeddicts_operations.py:60:1: error[type-assertion-failure] Argument does not have asserted type `str | None`
 typeddicts_type_consistency.py:101:1: error[invalid-assignment] Object of type `Unknown | None` is not assignable to `str`
 typeddicts_usage.py:40:24: error[invalid-type-form] The special form `typing.TypedDict` is not allowed in type expressions. Did you mean to use a concrete TypedDict or `collections.abc.Mapping[str, object]` instead?
-Found 862 diagnostics
+Found 860 diagnostics
 WARN A fatal error occurred while checking some files. Not all project files were analyzed. See the diagnostics list above for details.
</code></pre>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by @AlexWaygood on 2025-08-17 14:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-08-17 14:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/protocols.md</code>:2123 on 2025-08-17 14:07</div>
            <div class="timeline-body"><p>these two assertions don't pass on <code>main</code>, leading to false positives on user code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-08-17 14:09</div>
            <div class="timeline-body"><p>The typing conformance diff shows two false positives going away: lines 30 and 35 <a href="https://github.com/python/typing/blob/d4f39b27a4a47aac8b6d4019e1b0b5b3156fabdc/conformance/tests/protocols_class_objects.py#L30-L35">here</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-08-17 14:11</div>
            <div class="timeline-body"><!-- generated-comment mypy_primer -->

<h2><code>mypy_primer</code> results</h2>
<details>
<summary>Changes were detected when running on open source projects</summary>

<pre><code class="language-diff">attrs (https://github.com/python-attrs/attrs)
- tests/test_annotations.py:48:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:49:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:50:36: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:78:48: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:79:52: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:93:37: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:122:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'C'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:124:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:126:50: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:127:48: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:129:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:130:33: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:132:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:134:42: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:415:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'C'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:517:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'C'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:519:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:520:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:521:36: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:539:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'C'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:541:56: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_annotations.py:547:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'D'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:549:37: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'D'&gt;`
- tests/test_annotations.py:564:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'A'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:566:48: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:567:48: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:568:48: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:582:48: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:583:48: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:584:48: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:596:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'A'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:598:33: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:599:50: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:614:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'A'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:615:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'B'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:617:46: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:618:33: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'B'&gt;`
- tests/test_annotations.py:620:46: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:621:33: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'B'&gt;`
- tests/test_annotations.py:662:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'A'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:663:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'B'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:665:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:666:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'B'&gt;`
- tests/test_annotations.py:678:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'A'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:680:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_annotations.py:682:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'A'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_annotations.py:684:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_converters.py:297:29: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:33:31: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:34:46: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:47:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:48:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:52:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:60:25: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:67:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:68:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:72:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:80:25: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:93:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:94:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:98:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:106:25: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:113:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:114:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:118:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_filters.py:126:25: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_forward_references.py:20:19: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `&lt;class 'A'&gt;` does not satisfy upper bound of type variable `_A`
- tests/test_forward_references.py:22:19: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_functional.py:167:25: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C1'&gt;`
- tests/test_functional.py:218:26: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `type`
- tests/test_functional.py:545:42: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_functional.py:546:44: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_functional.py:547:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_functional.py:646:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_functional.py:647:35: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_hooks.py:216:40: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_hooks.py:234:54: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'Base'&gt;`
- tests/test_make.py:482:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'A'&gt;`
- tests/test_make.py:484:26: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'B'&gt;`
- tests/test_make.py:485:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'B'&gt;`
- tests/test_make.py:487:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_make.py:488:26: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_make.py:489:27: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_make.py:856:45: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_make.py:893:26: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'BaseClass'&gt;`
- tests/test_make.py:894:26: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'SubClass'&gt;`
- tests/test_make.py:1454:32: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `type` does not satisfy upper bound of type variable `_A`
- tests/test_make.py:1465:32: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `type` does not satisfy upper bound of type variable `_A`
- tests/test_make.py:2227:34: error[invalid-argument-type] Argument to function `fields_dict` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'Cases'&gt;`
- tests/test_next_gen.py:41:36: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `type`
- tests/test_next_gen.py:149:39: error[invalid-argument-type] Argument to function `fields_dict` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'NewSchool'&gt;`
- tests/test_next_gen.py:164:39: error[invalid-argument-type] Argument to function `fields_dict` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'NewSchool'&gt;`
- tests/test_slots.py:103:24: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C1Slots'&gt;`
- tests/test_slots.py:103:48: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C1'&gt;`
- tests/test_slots.py:545:41: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'C'&gt;`
- tests/test_validators.py:884:23: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'Tester'&gt;`
- tests/test_validators.py:956:23: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'Tester'&gt;`
- tests/test_validators.py:1029:23: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'Tester'&gt;`
- tests/typing_example.py:133:13: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'AliasExample'&gt;`
- tests/typing_example.py:134:13: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'AliasExample'&gt;`
- tests/typing_example.py:421:13: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'NGFrozen'&gt;`
- tests/typing_example.py:422:17: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'NGFrozen'&gt;`
- tests/typing_example.py:426:14: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'NGFrozen'&gt;`
- tests/typing_example.py:427:18: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `type[AttrsInstance]`, found `&lt;class 'NGFrozen'&gt;`
- tests/typing_example.py:515:28: error[invalid-argument-type] Argument to function `resolve_types` is incorrect: Argument type `type` does not satisfy upper bound of type variable `_A`
- Found 660 diagnostics
+ Found 555 diagnostics

operator (https://github.com/canonical/operator)
- ops/framework.py:1164:40: error[invalid-argument-type] Argument to bound method `register_type` is incorrect: Expected `type[Serializable]`, found `&lt;class 'StoredStateData'&gt;`
- Found 98 diagnostics
+ Found 97 diagnostics

hydra-zen (https://github.com/mit-ll-responsible-ai/hydra-zen)
- src/hydra_zen/structured_configs/_implementations.py:2252:47: error[invalid-argument-type] Argument to function `get_target_path` is incorrect: Expected `HasTarget`, found `(Importable@builds &amp; ((...) -&gt; object) &amp; type[DataclassInstance] &amp; ~partial[Unknown]) | (((...) -&gt; R@builds) &amp; ((...) -&gt; object) &amp; type[DataclassInstance] &amp; ~partial[Unknown]) | (@Todo(unsupported nested subscript in type[X]) &amp; ((...) -&gt; object) &amp; type[DataclassInstance] &amp; ~partial[Unknown]) | (((...) -&gt; Unknown) &amp; ((...) -&gt; object) &amp; type[DataclassInstance]) | (@Todo(unsupported nested subscript in type[X]) &amp; ((...) -&gt; Unknown) &amp; ((...) -&gt; object) &amp; type[DataclassInstance])`
- src/hydra_zen/structured_configs/_implementations.py:2523:54: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `Iterable[Unknown]`, found `Unknown | list[str | DataClass_ | Mapping[str, None | Sequence[str]]] | None`
+ src/hydra_zen/structured_configs/_implementations.py:2523:54: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `Iterable[Unknown]`, found `Unknown | list[str | DataClass_ | type[@Todo(type[T] for protocols)] | Mapping[str, None | Sequence[str]]] | None`
- src/hydra_zen/structured_configs/_implementations.py:3303:54: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `Iterable[Unknown]`, found `Unknown | list[str | DataClass_ | Mapping[str, None | Sequence[str]]] | None`
+ src/hydra_zen/structured_configs/_implementations.py:3303:54: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `Iterable[Unknown]`, found `Unknown | list[str | DataClass_ | type[@Todo(type[T] for protocols)] | Mapping[str, None | Sequence[str]]] | None`
- src/hydra_zen/wrapper/_implementations.py:932:24: error[invalid-return-type] Return type does not match returned value: expected `DataClass_ | ListConfig | DictConfig`, found `(((...) -&gt; Any) &amp; type &amp; ~type[HydraConf]) | (DataClass_ &amp; type &amp; ~type[HydraConf]) | (ListConfig &amp; type &amp; ~type[HydraConf]) | (DictConfig &amp; type &amp; ~type[HydraConf])`
- src/hydra_zen/wrapper/_implementations.py:941:16: error[invalid-return-type] Return type does not match returned value: expected `DataClass_ | ListConfig | DictConfig`, found `(((...) -&gt; Any) &amp; ~type) | (DataClass_ &amp; ~type) | list[Any] | dict[Any, Any] | (ListConfig &amp; ~type) | (DictConfig &amp; ~type)`
+ src/hydra_zen/wrapper/_implementations.py:941:16: error[invalid-return-type] Return type does not match returned value: expected `DataClass_ | type[@Todo(type[T] for protocols)] | ListConfig | DictConfig`, found `(((...) -&gt; Any) &amp; ~type) | (DataClass_ &amp; ~type) | list[Any] | dict[Any, Any] | (ListConfig &amp; ~type) | (DictConfig &amp; ~type)`
- src/hydra_zen/wrapper/_implementations.py:1479:9: error[invalid-parameter-default] Default value of type `def default_to_config(target: ((...) -&gt; Any) | DataClass_ | list[Any] | dict[Any, Any] | ListConfig | DictConfig, CustomBuildsFn: @Todo(unsupported type[X] special form) = &lt;class 'DefaultBuilds'&gt;, **kw: Any) -&gt; DataClass_ | ListConfig | DictConfig` is not assignable to annotated parameter type `(F@__call__, /) -&gt; @Todo(Support for `typing.TypeAlias`)`
+ src/hydra_zen/wrapper/_implementations.py:1479:9: error[invalid-parameter-default] Default value of type `def default_to_config(target: ((...) -&gt; Any) | DataClass_ | list[Any] | dict[Any, Any] | ListConfig | DictConfig, CustomBuildsFn: @Todo(unsupported type[X] special form) = &lt;class 'DefaultBuilds'&gt;, **kw: Any) -&gt; DataClass_ | type[@Todo(type[T] for protocols)] | ListConfig | DictConfig` is not assignable to annotated parameter type `(F@__call__, /) -&gt; @Todo(Support for `typing.TypeAlias`)`
- tests/annotations/declarations.py:434:26: error[invalid-argument-type] Argument to function `make_config` is incorrect: Expected `tuple[type[DataClass_], ...]`, found `tuple[type[DataClass], @Todo(unsupported nested subscript in type[X]), &lt;class 'P3'&gt;, @Todo(unsupported nested subscript in type[X])]`
+ tests/annotations/declarations.py:443:35: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- Found 563 diagnostics
+ Found 561 diagnostics

strawberry (https://github.com/strawberry-graphql/strawberry)
- strawberry/cli/commands/export_schema.py:32:32: error[invalid-argument-type] Argument to function `print_schema` is incorrect: Expected `BaseSchema`, found `Schema`
- strawberry/cli/debug_server.py:25:33: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `BaseSchema`, found `Schema`
- strawberry/experimental/pydantic/utils.py:54:51: error[invalid-argument-type] Argument to function `fields` is incorrect: Expected `DataclassInstance`, found `type`
- strawberry/types/base.py:333:16: error[invalid-return-type] Return type does not match returned value: expected `type[WithStrawberryObjectDefinition]`, found `type`
- Found 377 diagnostics
+ Found 373 diagnostics

check-jsonschema (https://github.com/python-jsonschema/check-jsonschema)
- src/check_jsonschema/formats/__init__.py:55:5: error[invalid-assignment] Object of type `&lt;class 'Draft202012Validator'&gt;` is not assignable to `type[Validator]`
- Found 59 diagnostics
+ Found 58 diagnostics

pydantic (https://github.com/pydantic/pydantic)
+ pydantic/_internal/_dataclasses.py:88:39: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- pydantic/_internal/_generate_schema.py:1828:24: error[unresolved-attribute] Type `type[DataclassInstance]` has no attribute `__pydantic_fields_complete__`
- pydantic/_internal/_generate_schema.py:1834:80: error[unresolved-attribute] Type `type[DataclassInstance]` has no attribute `__pydantic_fields__`
- pydantic/_internal/_generate_schema.py:1842:33: error[invalid-argument-type] Argument to function `rebuild_dataclass_fields` is incorrect: Expected `type[PydanticDataclass]`, found `type[DataclassInstance]`
- pydantic/_internal/_mock_val_ser.py:217:5: error[invalid-assignment] Object of type `MockValSer[Unknown]` is not assignable to attribute `__pydantic_validator__` of type `SchemaValidator | PluggableSchemaValidator`
- pydantic/_internal/_mock_val_ser.py:223:5: error[invalid-assignment] Object of type `MockValSer[Unknown]` is not assignable to attribute `__pydantic_serializer__` of type `SchemaSerializer`
- Found 770 diagnostics
+ Found 766 diagnostics

urllib3 (https://github.com/urllib3/urllib3)
- src/urllib3/connectionpool.py:173:5: error[invalid-assignment] Object of type `&lt;class 'HTTPConnection'&gt;` is not assignable to `type[BaseHTTPConnection]`
- src/urllib3/connectionpool.py:978:5: error[invalid-assignment] Object of type `&lt;class 'HTTPSConnection'&gt;` is not assignable to `type[BaseHTTPSConnection]`
- src/urllib3/contrib/emscripten/__init__.py:13:5: error[invalid-assignment] Object of type `&lt;class 'EmscriptenHTTPConnection'&gt;` is not assignable to attribute `ConnectionCls` of type `type[BaseHTTPConnection]`
- src/urllib3/contrib/emscripten/__init__.py:14:5: error[invalid-assignment] Object of type `&lt;class 'EmscriptenHTTPSConnection'&gt;` is not assignable to attribute `ConnectionCls` of type `type[BaseHTTPSConnection]`
- src/urllib3/http2/__init__.py:35:5: error[invalid-assignment] Object of type `&lt;class 'HTTP2Connection'&gt;` is not assignable to attribute `ConnectionCls` of type `type[BaseHTTPSConnection]`
+ test/conftest.py:381:68: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- test/conftest.py:387:13: error[invalid-assignment] Object of type `None | &lt;class 'HTTPConnection'&gt;` is not assignable to attribute `ConnectionCls` of type `type[BaseHTTPConnection]`
+ test/conftest.py:387:13: error[invalid-assignment] Object of type `None | &lt;class 'HTTPConnection'&gt;` is not assignable to attribute `ConnectionCls` of type `type[@Todo(type[T] for protocols)]`
- Found 393 diagnostics
+ Found 389 diagnostics

pywin32 (https://github.com/mhammond/pywin32)
- com/win32com/demos/excelAddin.py:165:45: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'ExcelAddin'&gt;`
- com/win32com/demos/excelRTDServer.py:434:45: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'TimeServer'&gt;`
- com/win32com/demos/iebutton.py:211:9: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'PyWin32InternetExplorerButton'&gt;`
- com/win32com/demos/ietoolbar.py:359:45: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'IEToolbar'&gt;`
- com/win32com/demos/outlookAddin.py:131:45: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'OutlookAddin'&gt;`
- com/win32com/servers/dictionary.py:129:27: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'DictionaryPolicy'&gt;`
- com/win32com/servers/interp.py:54:52: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'Interpreter'&gt;`
- com/win32com/servers/perfmon.py:36:29: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'PerfMonQuery'&gt;`
- com/win32com/servers/test_pycomtest.py:180:45: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'PyCOMTest'&gt;`
- com/win32com/servers/test_pycomtest.py:181:45: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'PyCOMTestMI'&gt;`
- com/win32com/test/pippo_server.py:92:45: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'CPippo'&gt;`
- com/win32comext/axscript/client/pyscript.py:432:9: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `Unknown | &lt;class 'PyScript'&gt;`
- com/win32comext/shell/demos/servers/column_provider.py:122:9: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'ColumnProvider'&gt;`
- com/win32comext/shell/demos/servers/context_menu.py:119:9: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'ShellExtension'&gt;`
- com/win32comext/shell/demos/servers/copy_hook.py:80:9: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'ShellExtension'&gt;`
- com/win32comext/shell/demos/servers/empty_volume_cache.py:185:9: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'EmptyVolumeCache'&gt;`
- com/win32comext/shell/demos/servers/folder_view.py:861:9: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'ShellFolder'&gt;`
- com/win32comext/shell/demos/servers/folder_view.py:862:9: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'ContextMenu'&gt;`
- com/win32comext/shell/demos/servers/icon_handler.py:78:9: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'ShellExtension'&gt;`
- com/win32comext/shell/demos/servers/shell_view.py:967:9: error[invalid-argument-type] Argument to function `UseCommandLine` is incorrect: Expected `type[_RegisterClass]`, found `&lt;class 'ShellFolderRoot'&gt;`
- Found 2006 diagnostics
+ Found 1986 diagnostics

colour (https://github.com/colour-science/colour)
- colour/colorimetry/spectrum.py:1190:17: error[invalid-assignment] Object of type `&lt;class 'SpragueInterpolator'&gt;` is not assignable to `type[ProtocolInterpolator] | None`
- colour/colorimetry/spectrum.py:1192:17: error[invalid-assignment] Object of type `&lt;class 'CubicSplineInterpolator'&gt;` is not assignable to `type[ProtocolInterpolator] | None`
- colour/colorimetry/spectrum.py:1297:9: error[invalid-assignment] Object of type `type[ProtocolExtrapolator] | None | &lt;class 'Extrapolator'&gt;` is not assignable to `type[ProtocolExtrapolator] | None`
- colour/examples/algebra/examples_interpolation.py:107:5: error[invalid-argument-type] Argument to bound method `interpolate` is incorrect: Expected `type[ProtocolInterpolator] | None`, found `&lt;class 'PchipInterpolator'&gt;`
- Found 484 diagnostics
+ Found 480 diagnostics

mitmproxy (https://github.com/mitmproxy/mitmproxy)
+ examples/addons/contentview-interactive.py:20:18: error[invalid-argument-type] Argument to function `add` is incorrect: Expected `Contentview`, found `&lt;class 'InteractiveSwapCase'&gt;`
+ examples/addons/contentview.py:15:18: error[invalid-argument-type] Argument to function `add` is incorrect: Expected `Contentview`, found `&lt;class 'SwapCase'&gt;`
+ test/mitmproxy/contentviews/test__registry.py:67:23: error[invalid-argument-type] Argument to bound method `register` is incorrect: Expected `Contentview`, found `&lt;class 'ExampleContentview'&gt;`
- Found 1822 diagnostics
+ Found 1825 diagnostics

psycopg (https://github.com/psycopg/psycopg)
- psycopg/psycopg/_transformer.py:21:5: error[invalid-assignment] Object of type `&lt;class 'Transformer'&gt;` is not assignable to `type[Transformer]`
- psycopg/psycopg/pq/__init__.py:97:9: error[invalid-assignment] Object of type `Unknown | &lt;class 'PGconn'&gt;` is not assignable to `type[PGconn]`
- psycopg/psycopg/pq/__init__.py:98:9: error[invalid-assignment] Object of type `Unknown | &lt;class 'PGresult'&gt;` is not assignable to `type[PGresult]`
- psycopg/psycopg/pq/__init__.py:99:9: error[invalid-assignment] Object of type `Unknown | &lt;class 'Conninfo'&gt;` is not assignable to `type[Conninfo]`
- psycopg/psycopg/pq/__init__.py:100:9: error[invalid-assignment] Object of type `Unknown | &lt;class 'Escaping'&gt;` is not assignable to `type[Escaping]`
- psycopg/psycopg/pq/__init__.py:101:9: error[invalid-assignment] Object of type `Unknown | &lt;class 'PGcancel'&gt;` is not assignable to `type[PGcancel]`
- psycopg/psycopg/pq/__init__.py:102:9: error[invalid-assignment] Object of type `Unknown | &lt;class 'PGcancelConn'&gt;` is not assignable to `type[PGcancelConn]`
- psycopg/psycopg/types/array.py:342:12: error[invalid-return-type] Return type does not match returned value: expected `type[Loader]`, found `type`
- psycopg/psycopg/types/json.py:124:13: error[invalid-assignment] Method `__setitem__` of type `bound method dict[tuple[type, CodeType], type[Dumper]].__setitem__(key: tuple[type, CodeType], value: type[Dumper], /) -&gt; None` cannot be called with a key of type `tuple[type, CodeType]` and a value of type `type` on object of type `dict[tuple[type, CodeType], type[Dumper]]`
- psycopg/psycopg/types/json.py:126:16: error[invalid-return-type] Return type does not match returned value: expected `type[Dumper]`, found `type`
- psycopg/psycopg/types/json.py:144:13: error[invalid-assignment] Method `__setitem__` of type `bound method dict[tuple[type, CodeType], type[Loader]].__setitem__(key: tuple[type, CodeType], value: type[Loader], /) -&gt; None` cannot be called with a key of type `tuple[type, CodeType]` and a value of type `type` on object of type `dict[tuple[type, CodeType], type[Loader]]`
- psycopg/psycopg/types/json.py:146:16: error[invalid-return-type] Return type does not match returned value: expected `type[Loader]`, found `type`
- tests/fix_db.py:182:5: error[invalid-assignment] Object of type `&lt;class 'PGconnDebug'&gt;` is not assignable to attribute `PGconn` of type `type[PGconn]`
- Found 654 diagnostics
+ Found 641 diagnostics

scrapy (https://github.com/scrapy/scrapy)
- tests/test_downloader_handler_twisted_http10.py:26:16: error[invalid-return-type] Return type does not match returned value: expected `type[DownloadHandlerProtocol]`, found `&lt;class 'HTTP10DownloadHandler'&gt;`
- tests/test_downloader_handler_twisted_http11.py:27:16: error[invalid-return-type] Return type does not match returned value: expected `type[DownloadHandlerProtocol]`, found `&lt;class 'HTTP11DownloadHandler'&gt;`
- tests/test_downloader_handler_twisted_http2.py:48:16: error[invalid-return-type] Return type does not match returned value: expected `type[DownloadHandlerProtocol]`, found `&lt;class 'H2DownloadHandler'&gt;`
- Found 1061 diagnostics
+ Found 1058 diagnostics

discord.py (https://github.com/Rapptz/discord.py)
+ discord/abc.py:689:62: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- discord/app_commands/models.py:1225:42: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `Any | &lt;class 'Member'&gt; | &lt;class 'Role'&gt;`
- discord/audit_logs.py:140:67: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'Role'&gt;`
- discord/audit_logs.py:146:68: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'ForumTag'&gt;`
- discord/audit_logs.py:147:31: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'ForumTag'&gt;`
- discord/audit_logs.py:206:39: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'Role'&gt; | &lt;class 'Member'&gt;`
- discord/audit_logs.py:487:43: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'Role'&gt;`
- discord/audit_logs.py:803:55: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'Role'&gt;`
- discord/audit_logs.py:809:89: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'StageChannel'&gt;`
- discord/audit_logs.py:813:88: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'PartialIntegration'&gt;`
- discord/audit_logs.py:907:68: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'Member'&gt;`
- discord/audit_logs.py:910:71: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'Role'&gt;`
- discord/audit_logs.py:934:73: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'Emoji'&gt;`
- discord/audit_logs.py:943:68: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'Member'&gt;`
- discord/audit_logs.py:946:81: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'StageInstance'&gt;`
- discord/audit_logs.py:949:75: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'GuildSticker'&gt;`
- discord/audit_logs.py:952:73: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'Thread'&gt;`
- discord/audit_logs.py:955:82: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'ScheduledEvent'&gt;`
- discord/audit_logs.py:958:70: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'PartialIntegration'&gt;`
- discord/audit_logs.py:966:40: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'AppCommand'&gt;`
- discord/audit_logs.py:986:42: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'PartialIntegration'&gt; | &lt;class 'AppCommand'&gt;`
- discord/audit_logs.py:991:72: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'AutoModRule'&gt;`
- discord/audit_logs.py:997:67: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'Webhook'&gt;`
- discord/audit_logs.py:1000:34: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'OnboardingPrompt'&gt;`
- discord/guild.py:4117:45: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'User'&gt;`
- discord/guild.py:4118:45: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `type[Snowflake]`, found `&lt;class 'User'&gt;`
- discord/utils.py:1458:5: error[invalid-assignment] Object of type `&lt;class '_ZstdDecompressionContext'&gt;` is not assignable to `type[_DecompressionContext]`
- discord/utils.py:1482:5: error[invalid-assignment] Object of type `&lt;class '_ZlibDecompressionContext'&gt;` is not assignable to `type[_DecompressionContext]`
- Found 567 diagnostics
+ Found 541 diagnostics

prefect (https://github.com/PrefectHQ/prefect)
- src/prefect/cli/work_pool.py:207:43: error[missing-argument] No argument provided for required parameter `self` of function `provision`
- src/prefect/cli/work_pool.py:208:42: error[invalid-argument-type] Argument to function `provision` is incorrect: Expected `dict[str, Any]`, found `dict[str, Any] | None | Any`
- src/prefect/cli/work_pool.py:499:43: error[missing-argument] No argument provided for required parameter `self` of function `provision`
- Found 2971 diagnostics
+ Found 2968 diagnostics

</code></pre>
</details>
No memory usage changes detected âœ…

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-08-17 14:17</div>
            <div class="timeline-body"><p>That looks like roughly the mypy_primer report I'd expect here! Not totally sure what's up with the new hits on <code>mitmproxy</code>, but it looks very positive overall. Many diagnostics related to <code>dataclasses.fields()</code> are going away.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ty_python_semantic/resources/mdtest/protocols.md</code>:2122 on 2025-08-18 18:37</div>
            <div class="timeline-body"><p>The theory here is that this should disregard <code>x: int</code> on the protocol <code>Foo</code> because it describes an instance attribute? Should we mention that explicitly? It's not obvious that this should be the case, given that today we consider <code>x: int</code> to describe a class-or-instance attribute, in general.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ty_python_semantic/src/types/subclass_of.rs</code>:94 on 2025-08-18 18:41</div>
            <div class="timeline-body"><p>I think this deserves a TODO comment, because I don't think either the previous code nor this new code is really correct here. I think the inferrability should probably depend on some outer context?</p>
<p>What real-world cases triggered the need for this change?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> approved on 2025-08-18 18:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-08-18 19:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/subclass_of.rs</code>:94 on 2025-08-18 19:20</div>
            <div class="timeline-body"><p>What on earth... I didn't mean to make any change here to do with <code>TypeVar</code> materialization! I think this was a mistake introduced when resolving merge conflicts. It's a bit scary that no tests failed as a result of this -- cc. @dcreager; looks like we might be missing some coverage here?</p>
<p>Sorry for the error!! Thanks v much for the catch -- I'll change it back</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-08-18 19:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/subclass_of.rs</code>:94 on 2025-08-18 19:20</div>
            <div class="timeline-body"><pre><code class="language-suggestion">                    Type::NonInferableTypeVar(BoundTypeVarInstance::new(
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-08-18 19:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/protocols.md</code>:2122 on 2025-08-18 19:24</div>
            <div class="timeline-body"><blockquote>
<p>The theory here is that this should disregard <code>x: int</code> on the protocol <code>Foo</code> because it describes an instance attribute?</p>
</blockquote>
<p>Right. If we have a class <code>Spam</code> that looks like this:</p>
<pre><code class="language-py">class Spam:
    def __init__(self):
        self.x: int = 42
</code></pre>
<p>then we would consider instances of class <code>Spam</code> to inhabit the type <code>Foo</code> as well as the type <code>Spam</code>, and <code>x</code> would obviously not be available on the class object <code>Spam</code> here (nor would we consider it available on the class object <code>Spam</code> here). It follows that therefore we cannot assume or enforce that <code>x</code> is available on the meta-type of any type <code>T</code> just because <code>T</code> is a subtype of <code>Foo</code>.</p>
<p>I'll add some more prose explaining this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/protocols.md</code>:2122 on 2025-08-18 20:31</div>
            <div class="timeline-body"><p>Ah, but on second look, there is a bug in the test here. <code>type[Baz]</code> should not be assignable to <code>type[Foo]</code> because it fails the third test I gave in my prose intro to this snippet: instantiating <code>Baz</code> would not create an object that would inhabit <code>Foo</code>.</p>
<p>Thanks for the catch!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-08-18 20:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @AlexWaygood on 2025-08-18 20:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-08-18 20:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-08-18 20:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 17:52:44 UTC
    </footer>
</body>
</html>
