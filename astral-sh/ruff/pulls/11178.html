<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] resolve base class types - astral-sh/ruff #11178</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] resolve base class types</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11178">#11178</a>
        opened by <a href="https://github.com/carljm">@carljm</a>
        on 2024-04-27 15:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a></div>
            <div class="timeline-body">Summary
<p>Resolve base class types, as long as they are simple names.</p>
Test Plan
<p>cargo test</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/carljm">@carljm</a> on 2024-04-27 15:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-04-27 16:00</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-04-27 16:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/src/types.rs</code>:320 on 2024-04-27 16:38</div>
            <div class="timeline-body"><p>We should take a <code>Vec&lt;Type&gt;</code> here, same for the other <code>add_class</code> function.</p>
<p>I use a slice when I only need to read the data, need to transform the data, or only sometimes need to copy the data but I use a owned type if the function always needs to convert type to an owned type. That gives the control to the caller, maybe the caller already has an owned type (which is the case here), and converting it to a slice, and then copying to a vec is a lot of unnecessary work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/src/types/infer.rs</code>:80 on 2024-04-27 16:41</div>
            <div class="timeline-body"><p>I think I would prefer a named type instead of a two-tuple that records file and symbol id. <code>GlobalSymbolId</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/src/types/infer.rs</code>:79 on 2024-04-27 16:42</div>
            <div class="timeline-body"><p>It would be nice if <code>root_symbol_id_by_name</code> to have an automated way to record the dependencies between symbols, especially if <code>symbols.root_symbol_id_by_name</code> is a public method (that can also be used by e.g. semantic lint rules!).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-04-27 16:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2024-04-27 16:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/src/types/infer.rs</code>:79 on 2024-04-27 16:45</div>
            <div class="timeline-body"><p>Yes, totally agree! I thought I already added a TODO for that somewhere in here? I might not do it in this PR because I&#x27;d like to consider the API a bit carefully, but I definitely want to do it soon.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2024-04-27 16:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/src/types/infer.rs</code>:79 on 2024-04-27 16:46</div>
            <div class="timeline-body"><p>Oh I added the TODO in <a href="https://github.com/astral-sh/ruff/pull/11176">astral-sh/ruff#11176</a> which this PR is based on.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2024-04-27 16:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/src/types/infer.rs</code>:80 on 2024-04-27 16:46</div>
            <div class="timeline-body"><p>Yes, I planned to add this type, I should just do it in the previous PR already.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2024-04-27 16:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/src/types.rs</code>:320 on 2024-04-27 16:47</div>
            <div class="timeline-body"><p>Makes sense! I&#x27;ll change this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2024-04-29 21:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/src/types/infer.rs</code>:80 on 2024-04-29 21:29</div>
            <div class="timeline-body"><p>I think dependency recording format needs more work, so I rebased these PRs without the dependency stuff yet, so this is gone now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2024-04-29 21:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/src/types/infer.rs</code>:79 on 2024-04-29 21:29</div>
            <div class="timeline-body"><p>This will be part of the dependency-recording PR, it&#x27;s gone from this PR now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/carljm">@carljm</a> on 2024-04-29 21:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dhruvmanila">@dhruvmanila</a> by <a href="https://github.com/carljm">@carljm</a> on 2024-04-29 21:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/carljm">@carljm</a> on 2024-04-29 22:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/carljm">@carljm</a> on 2024-04-29 22:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-04-29 22:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:03:46 UTC
    </footer>
</body>
</html>
