<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add tab width option - astral-sh/ruff #6848</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add tab width option</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/6848">#6848</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2023-08-24 10:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-08-24 10:14</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This adds a new <code>tab_width</code> option that gets passed to the Printer. The <code>tab_width</code> option specifies the visual width of a tab character.</p>
<h2>Test Plan</h2>
<p>I added a new test. The fact that I had to add options not to regress tests that assumed a tab width of 8 proves that it works :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-08-24 10:14</div>
            <div class="timeline-body"><p>Current dependencies on/for this PR:</p>
<ul>
<li>main<ul>
<li><strong>PR #6814</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/6814" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.svg" alt="Graphite" width="10px" height="10px"/></a><ul>
<li><strong>PR #6815</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/6815" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.svg" alt="Graphite" width="10px" height="10px"/></a><ul>
<li><strong>PR #6816</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/6816" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.svg" alt="Graphite" width="10px" height="10px"/></a><ul>
<li><strong>PR #6817</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/6817" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.svg" alt="Graphite" width="10px" height="10px"/></a><ul>
<li><strong>PR #6848</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/6848" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.svg" alt="Graphite" width="10px" height="10px"/></a>  ðŸ‘ˆ</li>
<li><strong>PR #6819</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/6819" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.svg" alt="Graphite" width="10px" height="10px"/></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>This comment was auto-generated by <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/6848?utm_source=stack-comment">Graphite</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff_formatter/src/lib.rs</code>:128 on 2023-08-24 10:29</div>
            <div class="timeline-body"><p>it's a const method, it will unwrap at compile time</p>
<pre><code class="language-suggestion">        Self(NonZeroU8::new(2).unwrap())
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-08-24 10:30</div>
            <div class="timeline-body"><p>How does this interact with docstring formatting where we have &quot;pad to the next multiple of 8&quot;  hardcoded?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2023-08-24 10:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_formatter/src/lib.rs</code>:128 on 2023-08-24 10:37</div>
            <div class="timeline-body"><p>The constness is unstable but yeah, this is probably not worth it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-08-24 10:45</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Benchmark</h3>
<h4>Linux</h4>
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
formatter/large/dataset.py                 1.00      4.1Â±0.03ms    10.0 MB/sec    1.01      4.1Â±0.04ms     9.9 MB/sec
formatter/numpy/ctypeslib.py               1.00    852.0Â±2.84Âµs    19.5 MB/sec    1.01    861.2Â±2.70Âµs    19.3 MB/sec
formatter/numpy/globals.py                 1.00     82.0Â±0.65Âµs    36.0 MB/sec    1.01     83.1Â±0.38Âµs    35.5 MB/sec
formatter/pydantic/types.py                1.00   1673.9Â±9.84Âµs    15.2 MB/sec    1.01   1689.5Â±9.87Âµs    15.1 MB/sec
linter/all-rules/large/dataset.py          1.01     10.3Â±0.11ms     3.9 MB/sec    1.00     10.2Â±0.07ms     4.0 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      2.7Â±0.01ms     6.1 MB/sec    1.00      2.7Â±0.01ms     6.1 MB/sec
linter/all-rules/numpy/globals.py          1.00    387.0Â±1.15Âµs     7.6 MB/sec    1.01    390.0Â±2.88Âµs     7.6 MB/sec
linter/all-rules/pydantic/types.py         1.00      5.3Â±0.04ms     4.8 MB/sec    1.00      5.3Â±0.03ms     4.8 MB/sec
linter/default-rules/large/dataset.py      1.00      5.4Â±0.02ms     7.5 MB/sec    1.00      5.4Â±0.03ms     7.5 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00   1205.6Â±5.41Âµs    13.8 MB/sec    1.00  1210.3Â±15.90Âµs    13.8 MB/sec
linter/default-rules/numpy/globals.py      1.00    141.1Â±0.33Âµs    20.9 MB/sec    1.00    141.2Â±0.72Âµs    20.9 MB/sec
linter/default-rules/pydantic/types.py     1.00      2.5Â±0.00ms    10.3 MB/sec    1.00      2.5Â±0.02ms    10.3 MB/sec
</code></pre>
<h4>Windows</h4>
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
formatter/large/dataset.py                 1.00      4.6Â±0.07ms     8.9 MB/sec    1.00      4.6Â±0.03ms     8.9 MB/sec
formatter/numpy/ctypeslib.py               1.00    912.4Â±8.05Âµs    18.3 MB/sec    1.02   926.5Â±21.45Âµs    18.0 MB/sec
formatter/numpy/globals.py                 1.00     85.8Â±1.04Âµs    34.4 MB/sec    1.02     87.4Â±1.22Âµs    33.7 MB/sec
formatter/pydantic/types.py                1.00  1864.7Â±22.29Âµs    13.7 MB/sec    1.00  1868.2Â±14.92Âµs    13.7 MB/sec
linter/all-rules/large/dataset.py          1.00     12.5Â±0.09ms     3.3 MB/sec    1.01     12.6Â±0.13ms     3.2 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      3.5Â±0.02ms     4.7 MB/sec    1.00      3.5Â±0.02ms     4.7 MB/sec
linter/all-rules/numpy/globals.py          1.00    361.1Â±4.94Âµs     8.2 MB/sec    1.02    367.0Â±7.12Âµs     8.0 MB/sec
linter/all-rules/pydantic/types.py         1.00      6.5Â±0.06ms     3.9 MB/sec    1.01      6.6Â±0.05ms     3.9 MB/sec
linter/default-rules/large/dataset.py      1.00      7.0Â±0.04ms     5.8 MB/sec    1.01      7.0Â±0.09ms     5.8 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00  1457.6Â±14.37Âµs    11.4 MB/sec    1.01  1478.2Â±15.93Âµs    11.3 MB/sec
linter/default-rules/numpy/globals.py      1.00    151.9Â±1.55Âµs    19.4 MB/sec    1.00    152.1Â±1.64Âµs    19.4 MB/sec
linter/default-rules/pydantic/types.py     1.00      3.1Â±0.02ms     8.1 MB/sec    1.00      3.1Â±0.03ms     8.1 MB/sec
</code></pre>
<!-- thollander/actions-comment-pull-request "PR Check Results" -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @MichaReiser on 2023-08-24 11:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-08-24 11:19</div>
            <div class="timeline-body"><blockquote>
<p>How does this interact with docstring formatting where we have &quot;pad to the next multiple of 8&quot; hardcoded?</p>
</blockquote>
<p>Thanks for pointing this out. I changed the docstring padding to use the value from the options. Deviating here isn't an issue because a) people chan change the option b) this is only relevant for not blacked projects (adoption)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @MichaReiser on 2023-08-24 11:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add tabwidth option" to "Add tab width option" by @MichaReiser on 2023-08-24 12:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @MichaReiser on 2023-08-25 16:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-08-26 10:29</div>
            <div class="timeline-body"><p>Merging because it is a simple enough change and there's other work that depends on it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2023-08-26 10:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2023-08-26 10:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-08-26 10:29</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 02:46:15 UTC
    </footer>
</body>
</html>
