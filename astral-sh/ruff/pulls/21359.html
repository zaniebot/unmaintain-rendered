<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Save rust cache for CI jobs on main only - astral-sh/ruff #21359</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Save rust cache for CI jobs on main only</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/21359">#21359</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2025-11-10 08:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><p>GitHub action imposes a cache limit per repository of 10GB. We consistently exceed this limit by a lot (currently ±80GB). GitHub starts deleting caches when the limit is exceeded. Because of that, it's important that we're deliberate about which artifacts we cache.</p>
<p>This PR disables caching Rust builds from PRs. Instead, we rely on main to publish warm caches that are then used by all PRs. This should reduce our cache pressure and can also help speeding up the CI jobs because writing the caches often takes multiple seconds (~10-30s but sometimes more).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by @MichaReiser on 2025-11-10 08:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2025-11-10 08:56</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>✅ ecosystem check detected no format changes.</p>
<h3>Formatter (preview)</h3>
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @MichaReiser on 2025-11-10 08:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Save rust cache for CI jobs on main onlyu" to "Save rust cache for CI jobs on main only" by @AlexWaygood on 2025-11-10 08:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> approved on 2025-11-10 09:02</div>
            <div class="timeline-body"><p>Thank you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2025-11-10 09:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-11-10 09:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-11-10 09:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:17:04 UTC
    </footer>
</body>
</html>
