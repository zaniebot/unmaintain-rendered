```yaml
number: 18519
title: "[`pyupgrade`] Stabilize `non-pep695-generic-class` (`UP046`)"
type: pull_request
state: merged
author: ntBre
labels:
  - rule
assignees: []
merged: true
base: brent/release-0.12.0
head: brent/stabilize-up046
created_at: 2025-06-06T23:06:21Z
updated_at: 2025-06-12T14:27:47Z
url: https://github.com/astral-sh/ruff/pull/18519
synced_at: 2026-01-10T18:45:04Z
```

# [`pyupgrade`] Stabilize `non-pep695-generic-class` (`UP046`)

---

_Pull request opened by @ntBre on 2025-06-06 23:06_

## Summary
- Stabilizes UP046 (non-pep695-generic-class) rule by changing it from Preview to Stable

## Test plan
- ✅ Rule is already tested in main test function, no migration needed
- ✅ `make check` passes
- ✅ `make test` passes

## Rule Documentation
- [Test file](https://github.com/astral-sh/ruff/blob/main/crates/ruff_linter/src/rules/pyupgrade/mod.rs#L109-L110)
- [Rule documentation](https://docs.astral.sh/ruff/rules/non-pep695-generic-class/)

---

_Label `rule` added by @ntBre on 2025-06-06 23:07_

---

_Comment by @github-actions[bot] on 2025-06-06 23:13_

<!-- generated-comment ecosystem -->
## `ruff-ecosystem` results
### Linter (stable)
✅ ecosystem check detected no linter changes.

### Linter (preview)
✅ ecosystem check detected no linter changes.




---

_Comment by @ntBre on 2025-06-06 23:17_

Docs and tests look good. 

I did notice that the docs refer to [generic-not-last-base-class (PYI059)](https://docs.astral.sh/ruff/rules/generic-not-last-base-class/#generic-not-last-base-class-pyi059), which I suggested not to stabilize in the Notion page based on a comment from the 0.6 table about it being a mix between a correctness lint for .py files and a stylistic lint for .pyi files. It would be kind of nice if we stabilized this whole group together (UP046, UP047, UP049, and PYI059), but I think PYI059 is probably the best to leave out anyway, if I had to pick one.

cc @AlexWaygood or maybe @MichaReiser who it looks like added the rationale.

---

_Comment by @ntBre on 2025-06-09 16:48_

From Discord, requiring PYI059 also makes sense in stub files because of  how type checkers might handle `Generic` out of the final base class position in surprising ways. That resolves the correctness vs style issue (it now relates to correctness in both cases), and we just need to rephrase the docs to point that out to stabilize PYI059 too.

---

_Review requested from @dylwil3 by @ntBre on 2025-06-10 16:28_

---

_Renamed from "Stabilize UP046 (non-pep695-generic-class)" to "Stabilize `non-pep695-generic-class` (`UP046`)" by @ntBre on 2025-06-10 16:29_

---

_Review requested from @AlexWaygood by @ntBre on 2025-06-10 20:44_

---

_Review request for @AlexWaygood removed by @AlexWaygood on 2025-06-10 20:50_

---

_Added to milestone `v0.12` by @ntBre on 2025-06-11 14:34_

---

_@MichaReiser approved on 2025-06-12 07:42_

Looks good to me. @AlexWaygood do you know if mypy and pyright support this by now or how limited the support still is? 

That's my only hesitation for stabilizing this rule.

---

_Comment by @AlexWaygood on 2025-06-12 07:43_

I'm sure they both still have a couple of bugs in edge cases, but my understanding is that they both support PEP 695 pretty well at this point!

---

_Comment by @ntBre on 2025-06-12 12:54_

Nice, thank you both! Is the support good enough that I should remove these statements from the docs:

> Not all type checkers fully support PEP 695 yet, so even valid fixes suggested by this rule may cause type checking to fail.

Or is that still fair to say?

---

_Comment by @AlexWaygood on 2025-06-12 13:03_

Hmm, https://github.com/python/mypy/issues/18507 is still unfixed (which we [uncovered](https://github.com/astral-sh/ruff/pull/15565#issuecomment-2606951912) as a result of the PR initially adding this rule!) Maybe we should link to that directly from the docs?

I guess that does feel like something that users could plausibly run into: even if it's not code you'd usually write manually, it's code that could plausibly be generated by this autofix. I don't know if we should hold back from stabilisation just because of the mypy bug, though: that decision doesn't make much sense from the perspective of pyright users.

Whatever the case: maybe we should link to that issue directly from the docs

---

_Comment by @ntBre on 2025-06-12 13:20_

Wow I forgot about that! I confirmed that it's still a problem on mypy 1.16. I'll update the docs here and in https://github.com/astral-sh/ruff/pull/18524.

---

_@dylwil3 approved on 2025-06-12 14:21_

---

_Comment by @ntBre on 2025-06-12 14:27_

I'll go ahead and merge these, happy to drop the commits if we decide they should stay in preview.

---

_Renamed from "Stabilize `non-pep695-generic-class` (`UP046`)" to "[`pyupgrade`] Stabilize `non-pep695-generic-class` (`UP046`)" by @ntBre on 2025-06-12 14:27_

---

_Merged by @ntBre on 2025-06-12 14:27_

---

_Closed by @ntBre on 2025-06-12 14:27_

---

_Branch deleted on 2025-06-12 14:27_

---
