<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`airflow`] Extend `AIR302` with additional symbols - astral-sh/ruff #17085</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>airflow</code>] Extend <code>AIR302</code> with additional symbols</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/17085">#17085</a>
        opened by <a href="https://github.com/Lee-W">@Lee-W</a>
        on 2025-03-31 09:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-03-31 09:14</div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<!-- What's the purpose of the change? What does it do, and why? -->

<ul>
<li><code>airflow.auth.managers.base_auth_manager.is_authorized_dataset</code> has been moved to <code>airflow.api_fastapi.auth.managers.base_auth_manager.is_authorized_asset</code> in Airflow 3.0</li>
<li><code>airflow.auth.managers.models.resource_details.DatasetDetails</code> has been moved to <code>airflow.api_fastapi.auth.managers.models.resource_details.AssetDetails</code> in Airflow 3.0</li>
<li>Dag arguments <code>default_view</code> and <code>orientation</code> has been removed in Airflow 3.0</li>
<li><code>airflow.models.baseoperatorlink.BaseOperatorLink</code> has been moved to <code>airflow.sdk.definitions.baseoperatorlink.BaseOperatorLink</code> in Airflow 3.0</li>
<li><code>airflow.notifications.basenotifier.BaseNotifier</code> has been moved to <code>airflow.sdk.BaseNotifier</code>  in Airflow 3.0</li>
<li><code>airflow.utils.log.secrets_masker</code> has been moved to <code>airflow.sdk.execution_time.secrets_masker</code> in Airflow 3.0</li>
<li><code>airflow...DAG.allow_future_exec_dates</code> has been removed in Airflow 3.0</li>
<li><code>airflow.utils.db.create_session</code> has een removed in Airflow 3.0</li>
<li><code>airflow.sensors.base_sensor_operator.BaseSensorOperator</code> has been moved to <code>airflow.sdk.bases.sensor.BaseSensorOperator</code> removed Airflow 3.0</li>
<li><code>airflow.utils.file.TemporaryDirectory</code> has been removed in Airflow 3.0 and can be replaced by <code>tempfile.TemporaryDirectory</code></li>
<li><code>airflow.utils.file.mkdirs</code> has been removed in Airflow 3.0 and can be replaced by <code>pathlib.Path({path}).mkdir</code></li>
</ul>
<h2>Test Plan</h2>
<!-- How was it tested? -->

<p>Test fixture has been added for these changes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-03-31 09:21</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+21 -0 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+21 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/dev/airflow_perf/scheduler_dag_execution_timing.py#L256'>dev/airflow_perf/scheduler_dag_execution_timing.py:256:13:</a> AIR302 `airflow.utils.db.create_session` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/dev/airflow_perf/scheduler_dag_execution_timing.py#L303'>dev/airflow_perf/scheduler_dag_execution_timing.py:303:21:</a> AIR302 `airflow.utils.db.create_session` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/amazon/src/airflow/providers/amazon/aws/links/base_aws.py#L41'>providers/amazon/src/airflow/providers/amazon/aws/links/base_aws.py:41:19:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/databricks/src/airflow/providers/databricks/operators/databricks.py#L242'>providers/databricks/src/airflow/providers/databricks/operators/databricks.py:242:28:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/databricks/src/airflow/providers/databricks/plugins/databricks_workflow.py#L234'>providers/databricks/src/airflow/providers/databricks/plugins/databricks_workflow.py:234:26:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/databricks/src/airflow/providers/databricks/plugins/databricks_workflow.py#L268'>providers/databricks/src/airflow/providers/databricks/plugins/databricks_workflow.py:268:38:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/databricks/src/airflow/providers/databricks/plugins/databricks_workflow.py#L362'>providers/databricks/src/airflow/providers/databricks/plugins/databricks_workflow.py:362:39:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/dbt/cloud/src/airflow/providers/dbt/cloud/operators/dbt.py#L50'>providers/dbt/cloud/src/airflow/providers/dbt/cloud/operators/dbt.py:50:34:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/google/src/airflow/providers/google/cloud/links/base.py#L38'>providers/google/src/airflow/providers/google/cloud/links/base.py:38:22:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/google/src/airflow/providers/google/cloud/links/datafusion.py#L44'>providers/google/src/airflow/providers/google/cloud/links/datafusion.py:44:22:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/google/src/airflow/providers/google/cloud/links/dataproc.py#L136'>providers/google/src/airflow/providers/google/cloud/links/dataproc.py:136:24:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/google/src/airflow/providers/google/cloud/links/dataproc.py#L83'>providers/google/src/airflow/providers/google/cloud/links/dataproc.py:83:20:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/google/src/airflow/providers/google/cloud/operators/dataproc_metastore.py#L112'>providers/google/src/airflow/providers/google/cloud/operators/dataproc_metastore.py:112:37:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/google/src/airflow/providers/google/cloud/operators/dataproc_metastore.py#L64'>providers/google/src/airflow/providers/google/cloud/operators/dataproc_metastore.py:64:29:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/google/src/airflow/providers/google/marketing_platform/links/analytics_admin.py#L39'>providers/google/src/airflow/providers/google/marketing_platform/links/analytics_admin.py:39:31:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/microsoft/azure/src/airflow/providers/microsoft/azure/operators/data_factory.py#L52'>providers/microsoft/azure/src/airflow/providers/microsoft/azure/operators/data_factory.py:52:53:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/microsoft/azure/src/airflow/providers/microsoft/azure/operators/powerbi.py#L42'>providers/microsoft/azure/src/airflow/providers/microsoft/azure/operators/powerbi.py:42:19:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/microsoft/azure/src/airflow/providers/microsoft/azure/operators/synapse.py#L133'>providers/microsoft/azure/src/airflow/providers/microsoft/azure/operators/synapse.py:133:35:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/standard/src/airflow/providers/standard/operators/trigger_dagrun.py#L71'>providers/standard/src/airflow/providers/standard/operators/trigger_dagrun.py:71:25:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/standard/src/airflow/providers/standard/sensors/external_task.py#L58'>providers/standard/src/airflow/providers/standard/sensors/external_task.py:58:23:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
+ <a href='https://github.com/apache/airflow/blob/d4473555c0e7022e073489b7163d49102881a1a6/providers/yandex/src/airflow/providers/yandex/links/yq.py#L43'>providers/yandex/src/airflow/providers/yandex/links/yq.py:43:14:</a> AIR302 `airflow.models.baseoperatorlink.BaseOperatorLink` is removed in Airflow 3.0
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| AIR302 | 21 | 21 | 0 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "feat(AIR302): add rule "airflow.models.baseoperatorlink.BaseOperatorL…" to "[airflow] extend AIR302 rules" by @Lee-W on 2025-03-31 10:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @Lee-W on 2025-03-31 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @dhruvmanila on 2025-03-31 21:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @dhruvmanila on 2025-03-31 21:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:745 on 2025-03-31 21:10</div>
            <div class="timeline-body"><p>Do we need to add the <code>db</code> module in here? i.e., <code>[&quot;db&quot;, &quot;create_session&quot;]</code> based on the comment because we only match against <code>airflow.utils</code>, the remaining is matched here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_names.py</code>:297 on 2025-03-31 21:15</div>
            <div class="timeline-body"><p>This is not being considered (refer to my other comment) as seen in the snapshot.</p>
<p>Can you make sure to verify the snapshot changes? I know they're a bit hard to read when the changes are in the middle of the file. It might be easier to add new test cases at the end of the file to make snapshot changes easier to read and then moving it back to the relevant place and update the &quot;Test plan&quot; in the PR description to mention if you've done this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> requested changes on 2025-03-31 21:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-04-01 01:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/removal_in_3.rs</code>:745 on 2025-04-01 01:09</div>
            <div class="timeline-body"><p>Yes, just fixed. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-04-01 01:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/resources/test/fixtures/airflow/AIR302_names.py</code>:297 on 2025-04-01 01:57</div>
            <div class="timeline-body"><blockquote>
<p>This is not being considered (refer to my other comment) as seen in the snapshot.
Hi, I apologize for missing this one.</p>
</blockquote>
<blockquote>
<p>It might be easier to add new test cases at the end of the file to make snapshot changes easier to read and then moving it back
This is an Great idea. I used to perform text searches on the git diff, but it's easy to overlook. I'll take care of it afterward. Thank you so much!</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @Lee-W on 2025-04-01 02:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> approved on 2025-04-02 15:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[airflow] extend AIR302 rules" to "[`airflow`] Extend `AIR302` with additional symbols" by @dhruvmanila on 2025-04-02 15:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dhruvmanila on 2025-04-02 15:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2025-04-02 15:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 19:41:05 UTC
    </footer>
</body>
</html>
