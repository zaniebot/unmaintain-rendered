<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for file-scoped `noqa` directives - astral-sh/ruff #2978</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for file-scoped <code>noqa</code> directives</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/2978">#2978</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-02-17 01:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-17 01:09</div>
            <div class="timeline-body"><h1>Summary</h1>
<p>This allows users to do things like:</p>
<pre><code class="language-py"># ruff: noqa: F401
</code></pre>
<p>...to ignore all <code>F401</code> directives in a file. It's equivalent to <code>per-file-ignores</code>, but allows users to specify the behavior inline.</p>
<p>Note that Flake8 does <em>not</em> support this, so we <em>don't</em> respect <code># flake8: noqa: F401</code>. (Flake8 treats that as equivalent to <code># flake8: noqa</code>, so ignores <em>all</em> errors in the file. I think all of <a href="https://cs.github.com/?scopeName=All+repos&amp;scope=&amp;q=%22%23+flake8%3A+noqa%3A+%22">these usages</a> are probably mistakes!)</p>
<p>A couple notes on the details:</p>
<ul>
<li>If a user has <code># ruff: noqa: F401</code> in the file, but also <code># noqa: F401</code> on a line that would legitimately trigger an <code>F401</code> violation, we <em>do</em> mark that as &quot;unused&quot; for <code>RUF100</code> purposes. This may be the wrong choice. The <code>noqa</code> is legitimately unused, but it's also not &quot;wrong&quot;. It's just redundant.</li>
<li>If a user has <code># ruff: noqa: F401</code>, and runs <code>--add-noqa</code>, we <em>won't</em> add <code># noqa: F401</code> to any lines (which seems like the obvious right choice to me).</li>
</ul>
<p>Closes #1054 (which has some extra pieces that I'll carve out into a separate issue).</p>
<p>Closes #2446.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-02-17 01:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-17 01:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-02-17 01:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 04:41:35 UTC
    </footer>
</body>
</html>
