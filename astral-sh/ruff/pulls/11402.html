<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Move `W605` to the AST checker - astral-sh/ruff #11402</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Move <code>W605</code> to the AST checker</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11402">#11402</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2024-05-13 09:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a></div>
            <div class="timeline-body">Summary
<p>This PR moves the <code>W605</code> rule to the AST checker.</p>
<p>This is part of #11401</p>
Test Plan
<p><code>cargo test</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-05-13 09:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-05-13 10:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-05-13 12:57</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
Formatter (stable)
<p>✅ ecosystem check detected no format changes.</p>
Formatter (preview)
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2024-05-13 13:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_python_ast/src/expression.rs</code>:457 on 2024-05-13 13:08</div>
            <div class="timeline-body"><p>Hmm... Wouldn&#x27;t it be more extensible if we had a kind() (or <code>flags()</code>, if we do the rename you proposed in your other PR) method that returned <code>AnyStringKind</code>? Then linter rules could use that method to query whether the string part is raw, but they could also use it for querying other information about the string as well. Something like</p>
<pre><code>impl StringLikePart&lt;&#x27;_&gt; {
    pub fn kind(self) -&gt; AnyStringKind {
        match self {
            StringLikePart::String(string) =&gt; AnyStringKind::from(string.flags),
            StringLikePart::Bytes(bytes) =&gt; AnyStringKind::from(bytes.flags),
            StringLikePart::FString(f_string) =&gt; AnyStringKind::from(f_string.flags),
        }
    }
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-05-13 13:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_python_ast/src/expression.rs</code>:457 on 2024-05-13 13:15</div>
            <div class="timeline-body"><p>Yeah, good point. It makes sense to expose the <code>AnyStringKind</code> instead. I&#x27;ll update it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2024-05-13 13:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-05-13 16:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-05-13 16:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-05-13 16:13</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:04:04 UTC
    </footer>
</body>
</html>
