<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruff 2025 style guide - astral-sh/ruff #13906</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ruff 2025 style guide</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/13906">#13906</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2024-10-24 11:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body">Summary
<ul>
<li>Stabilize <code>comprehension_leading_expression_comments_same_line</code></li>
<li>Stabilize <code>empty_parameters_no_unnecessary_parentheses_around_return_value</code></li>
<li>Stabilize <code>docstring_code_block_in_docstring_indent</code></li>
<li>Stabilize <code>match_case_parenthese</code></li>
<li>Stabilize <code>with_single_item_pre_39</code></li>
<li>Stabilize <code>f_string_implicit_concatenated_string_literal_quotes</code></li>
<li>Stabilize <code>implicit_concatenated_string_formatting</code> (includes new assert formatting)</li>
<li>[x] Stabilize <a href="https://github.com/astral-sh/ruff/pull/14005">astral-sh/ruff#14005</a></li>
<li>[x] Stabilize <a href="https://github.com/astral-sh/ruff/pull/13928">astral-sh/ruff#13928</a> and remove the &quot;conflicts with ISC001&quot; warning</li>
</ul>
<p>Closes #13371</p>
Tasks
<ul>
<li>[ ] Update deviation black document. It should mention f-string formatting, implicit concatenated string formatting, and assert formatting.</li>
<li>[x] Decide if we have to revisit <a href="https://github.com/astral-sh/ruff/issues/14118">astral-sh/ruff#14118</a></li>
<li>[x] ~~<a href="https://github.com/astral-sh/ruff/issues/14143">astral-sh/ruff#14143</a>~~ not a new deviation: Postpone to next year</li>
</ul>
Test plan
<p><strong>Main (<code>8a860b8</code>)</strong></p>
<p>| project        | similarity index  | total files       | changed files     |
|----------------|------------------:|------------------:|------------------:|
| cpython        |           0.76424 |              1959 |              1781 |
| django         |           0.99942 |              2791 |                76 |
| home-assistant |           1.00000 |             12993 |                 0 |
| poetry         |           0.99978 |               444 |                 2 |
| transformers   |           0.99907 |              3151 |                24 |
| twine          |           1.00000 |                32 |                 0 |
| typeshed       |           0.99139 |              4766 |               133 |
| warehouse      |           0.99962 |               767 |                33 |
| zulip          |           1.00000 |              1699 |                 0 |</p>
<p><strong>2025</strong></p>
<p>| project        | similarity index  | total files       | changed files     |<br>
|----------------|------------------:|------------------:|------------------:|
| cpython        |           0.76395 |              1959 |              1786 |
| django         |           0.99921 |              2791 |               108 |
| home-assistant |           0.99980 |             12993 |               146 |
| poetry         |           0.99935 |               444 |                 9 |
| transformers   |           0.99858 |              3151 |               221 |
| twine          |           0.99871 |                32 |                 3 |
| typeshed       |           0.99135 |              4766 |               138 |
| warehouse      |           0.99916 |               767 |                51 |
| zulip          |           0.99969 |              1699 |                29 |</p>
<ul>
<li>[ ] Review ecosystem changes</li>
<li>[x] Review snapshot changes</li>
<li>[x] Test on larger projects</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">breaking</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-24 11:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-24 11:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-10-24 13:17</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Formatter (stable)
<p>ℹ️ ecosystem check <strong>detected format changes</strong>. (+1707 -1827 lines in 538 files in 27 projects; 28 projects unchanged)</p>
<a href="https://github.com/DisnakeDev/disnake">DisnakeDev/disnake</a> (+2 -2 lines across 1 file)
<p>

<p><a href="https://github.com/DisnakeDev/disnake/blob/a95ddafdb5c8edd58f3907ad6c839c5bc07687b0/disnake/opus.py#L371">disnake/opus.py~L371</a></p>
<pre><code>     def set_bandwidth(self, req: BAND_CTL) -&gt; None:
         if req not in band_ctl:
             raise KeyError(
-                f&#x27;{req!r} is not a valid bandwidth setting. Try one of: {&quot;,&quot;.join(band_ctl)}&#x27;
+                f&quot;{req!r} is not a valid bandwidth setting. Try one of: {&#x27;,&#x27;.join(band_ctl)}&quot;
             )
 
         k = band_ctl[req]
</code></pre>
<p><a href="https://github.com/DisnakeDev/disnake/blob/a95ddafdb5c8edd58f3907ad6c839c5bc07687b0/disnake/opus.py#L380">disnake/opus.py~L380</a></p>
<pre><code>     def set_signal_type(self, req: SIGNAL_CTL) -&gt; None:
         if req not in signal_ctl:
             raise KeyError(
-                f&#x27;{req!r} is not a valid bandwidth setting. Try one of: {&quot;,&quot;.join(signal_ctl)}&#x27;
+                f&quot;{req!r} is not a valid bandwidth setting. Try one of: {&#x27;,&#x27;.join(signal_ctl)}&quot;
             )
 
         k = signal_ctl[req]
</code></pre>
</p>

<a href="https://github.com/RasaHQ/rasa">RasaHQ/rasa</a> (+56 -70 lines across 29 files)
<p>

<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/cli/utils.py#L278">rasa/cli/utils.py~L278</a></p>
<pre><code>     # Check if a valid setting for `max_history` was given
     if isinstance(max_history, int) and max_history &lt; 1:
         raise argparse.ArgumentTypeError(
-            f&quot;The value of `--max-history {max_history}` &quot; f&quot;is not a positive integer.&quot;
+            f&quot;The value of `--max-history {max_history}` is not a positive integer.&quot;
         )
 
     return validator.verify_story_structure(
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/cli/x.py#L165">rasa/cli/x.py~L165</a></p>
<pre><code>         attempts -= 1
 
     rasa.shared.utils.cli.print_error_and_exit(
-        &quot;Could not fetch runtime config from server at &#x27;{}&#x27;. &quot; &quot;Exiting.&quot;.format(
+        &quot;Could not fetch runtime config from server at &#x27;{}&#x27;. Exiting.&quot;.format(
             config_endpoint
         )
     )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/actions/action.py#L322">rasa/core/actions/action.py~L322</a></p>
<pre><code>         if message is None:
             if not self.silent_fail:
                 logger.error(
-                    &quot;Couldn&#x27;t create message for response &#x27;{}&#x27;.&quot; &quot;&quot;.format(
+                    &quot;Couldn&#x27;t create message for response &#x27;{}&#x27;.&quot;.format(
                         self.utter_action
                     )
                 )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/actions/action.py#L470">rasa/core/actions/action.py~L470</a></p>
<pre><code>         else:
             if not self.silent_fail:
                 logger.error(
-                    &quot;Couldn&#x27;t create message for response action &#x27;{}&#x27;.&quot; &quot;&quot;.format(
+                    &quot;Couldn&#x27;t create message for response action &#x27;{}&#x27;.&quot;.format(
                         self.action_name
                     )
                 )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/channels/console.py#L194">rasa/core/channels/console.py~L194</a></p>
<pre><code>     exit_text = INTENT_MESSAGE_PREFIX + &quot;stop&quot;
 
     rasa.shared.utils.cli.print_success(
-        &quot;Bot loaded. Type a message and press enter &quot; &quot;(use &#x27;{}&#x27; to exit): &quot;.format(
+        &quot;Bot loaded. Type a message and press enter (use &#x27;{}&#x27; to exit): &quot;.format(
             exit_text
         )
     )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/channels/telegram.py#L97">rasa/core/channels/telegram.py~L97</a></p>
<pre><code>                     reply_markup.add(KeyboardButton(button[&quot;title&quot;]))
         else:
             logger.error(
-                &quot;Trying to send text with buttons for unknown &quot; &quot;button type {}&quot;.format(
+                &quot;Trying to send text with buttons for unknown button type {}&quot;.format(
                     button_type
                 )
             )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/nlg/callback.py#L81">rasa/core/nlg/callback.py~L81</a></p>
<pre><code>         body = nlg_request_format(utter_action, tracker, output_channel, **kwargs)
 
         logger.debug(
-            &quot;Requesting NLG for {} from {}.&quot; &quot;The request body is {}.&quot; &quot;&quot;.format(
+            &quot;Requesting NLG for {} from {}.The request body is {}.&quot;.format(
                 utter_action, self.nlg_endpoint.url, json.dumps(body)
             )
         )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/policies/policy.py#L250">rasa/core/policies/policy.py~L250</a></p>
<pre><code>         max_training_samples = kwargs.get(&quot;max_training_samples&quot;)
         if max_training_samples is not None:
             logger.debug(
-                &quot;Limit training data to {} training samples.&quot; &quot;&quot;.format(
+                &quot;Limit training data to {} training samples.&quot;.format(
                     max_training_samples
                 )
             )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/policies/ted_policy.py#L837">rasa/core/policies/ted_policy.py~L837</a></p>
<pre><code>             # take the last prediction in the sequence
             similarities = outputs[&quot;similarities&quot;][:, -1, :]
         else:
-            raise TypeError(
-                &quot;model output for `similarities` &quot; &quot;should be a numpy array&quot;
-            )
+            raise TypeError(&quot;model output for `similarities` should be a numpy array&quot;)
         if isinstance(outputs[&quot;scores&quot;], np.ndarray):
             confidences = outputs[&quot;scores&quot;][:, -1, :]
         else:
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/policies/unexpected_intent_policy.py#L612">rasa/core/policies/unexpected_intent_policy.py~L612</a></p>
<pre><code>         if isinstance(output[&quot;similarities&quot;], np.ndarray):
             sequence_similarities = output[&quot;similarities&quot;][:, -1, :]
         else:
-            raise TypeError(
-                &quot;model output for `similarities` &quot; &quot;should be a numpy array&quot;
-            )
+            raise TypeError(&quot;model output for `similarities` should be a numpy array&quot;)
 
         # Check for unlikely intent
         last_user_uttered_event = tracker.get_last_event_for(UserUttered)
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/test.py#L772">rasa/core/test.py~L772</a></p>
<pre><code>         ):
             story_dump = YAMLStoryWriter().dumps(partial_tracker.as_story().story_steps)
             error_msg = (
-                f&quot;Model predicted a wrong action. Failed Story: &quot; f&quot;\n\n{story_dump}&quot;
+                f&quot;Model predicted a wrong action. Failed Story: \n\n{story_dump}&quot;
             )
             raise WrongPredictionException(error_msg)
     elif prev_action_unlikely_intent:
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/train.py#L34">rasa/core/train.py~L34</a></p>
<pre><code>             for policy_config in policy_configs:
                 config_name = os.path.splitext(os.path.basename(policy_config))[0]
                 logging.info(
-                    &quot;Starting to train {} round {}/{}&quot; &quot; with {}% exclusion&quot; &quot;&quot;.format(
+                    &quot;Starting to train {} round {}/{} with {}% exclusion&quot;.format(
                         config_name, current_run, len(exclusion_percentages), percentage
                     )
                 )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/train.py#L43">rasa/core/train.py~L43</a></p>
<pre><code>                     domain,
                     policy_config,
                     stories=story_file,
-                    output=str(Path(output_path, f&quot;run_{r +1}&quot;)),
+                    output=str(Path(output_path, f&quot;run_{r + 1}&quot;)),
                     fixed_model_name=config_name + PERCENTAGE_KEY + str(percentage),
                     additional_arguments={
                         **additional_arguments,
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/training/interactive.py#L346">rasa/core/training/interactive.py~L346</a></p>
<pre><code>     choices = []
     for p in sorted_intents:
         name_with_confidence = (
-            f&#x27;{p.get(&quot;confidence&quot;):03.2f} {p.get(INTENT_NAME_KEY):40}&#x27;
+            f&quot;{p.get(&#x27;confidence&#x27;):03.2f} {p.get(INTENT_NAME_KEY):40}&quot;
         )
         choice = {
             INTENT_NAME_KEY: name_with_confidence,
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/training/interactive.py#L674">rasa/core/training/interactive.py~L674</a></p>
<pre><code>     await _print_history(conversation_id, endpoint)
 
     choices = [
-        {&quot;name&quot;: f&#x27;{a[&quot;score&quot;]:03.2f} {a[&quot;action&quot;]:40}&#x27;, &quot;value&quot;: a[&quot;action&quot;]}
+        {&quot;name&quot;: f&quot;{a[&#x27;score&#x27;]:03.2f} {a[&#x27;action&#x27;]:40}&quot;, &quot;value&quot;: a[&quot;action&quot;]}
         for a in predictions
     ]
 
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/training/interactive.py#L723">rasa/core/training/interactive.py~L723</a></p>
<pre><code>     # export training data and quit
     questions = questionary.form(
         export_stories=questionary.text(
-            message=&quot;Export stories to (if file exists, this &quot;
-            &quot;will append the stories)&quot;,
+            message=&quot;Export stories to (if file exists, this will append the stories)&quot;,
             default=PATHS[&quot;stories&quot;],
             validate=io_utils.file_type_validator(
                 rasa.shared.data.YAML_FILE_EXTENSIONS,
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/training/interactive.py#L738">rasa/core/training/interactive.py~L738</a></p>
<pre><code>             default=PATHS[&quot;nlu&quot;],
             validate=io_utils.file_type_validator(
                 list(rasa.shared.data.TRAINING_DATA_EXTENSIONS),
-                &quot;Please provide a valid export path for the NLU data, &quot;
-                &quot;e.g. &#x27;nlu.yml&#x27;.&quot;,
+                &quot;Please provide a valid export path for the NLU data, e.g. &#x27;nlu.yml&#x27;.&quot;,
             ),
         ),
         export_domain=questionary.text(
-            message=&quot;Export domain file to (if file exists, this &quot;
-            &quot;will be overwritten)&quot;,
+            message=&quot;Export domain file to (if file exists, this will be overwritten)&quot;,
             default=PATHS[&quot;domain&quot;],
             validate=io_utils.file_type_validator(
                 rasa.shared.data.YAML_FILE_EXTENSIONS,
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/utils.py#L41">rasa/core/utils.py~L41</a></p>
<pre><code>     &quot;&quot;&quot;
     if use_syslog:
         formatter = logging.Formatter(
-            &quot;%(asctime)s [%(levelname)-5.5s] [%(process)d]&quot; &quot; %(message)s&quot;
+            &quot;%(asctime)s [%(levelname)-5.5s] [%(process)d] %(message)s&quot;
         )
         socktype = SOCK_STREAM if syslog_protocol == TCP_PROTOCOL else SOCK_DGRAM
         syslog_handler = logging.handlers.SysLogHandler(
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/core/utils.py#L73">rasa/core/utils.py~L73</a></p>
<pre><code>     &quot;&quot;&quot;
     if hot_idx &gt;= length:
         raise ValueError(
-            &quot;Can&#x27;t create one hot. Index &#x27;{}&#x27; is out &quot; &quot;of range (length &#x27;{}&#x27;)&quot;.format(
+            &quot;Can&#x27;t create one hot. Index &#x27;{}&#x27; is out of range (length &#x27;{}&#x27;)&quot;.format(
                 hot_idx, length
             )
         )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/nlu/featurizers/sparse_featurizer/count_vectors_featurizer.py#L166">rasa/nlu/featurizers/sparse_featurizer/count_vectors_featurizer.py~L166</a></p>
<pre><code>                 )
             if self.stop_words is not None:
                 logger.warning(
-                    &quot;Analyzer is set to character, &quot;
-                    &quot;provided stop words will be ignored.&quot;
+                    &quot;Analyzer is set to character, provided stop words will be ignored.&quot;
                 )
             if self.max_ngram == 1:
                 logger.warning(
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/server.py#L289">rasa/server.py~L289</a></p>
<pre><code>         raise ErrorResponse(
             HTTPStatus.BAD_REQUEST,
             &quot;BadRequest&quot;,
-            &quot;Invalid parameter value for &#x27;include_events&#x27;. &quot;
-            &quot;Should be one of {}&quot;.format(enum_values),
+            &quot;Invalid parameter value for &#x27;include_events&#x27;. Should be one of {}&quot;.format(
+                enum_values
+            ),
             {&quot;parameter&quot;: &quot;include_events&quot;, &quot;in&quot;: &quot;query&quot;},
         )
 
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/shared/core/domain.py#L198">rasa/shared/core/domain.py~L198</a></p>
<pre><code>             domain = cls.from_directory(path)
         else:
             raise InvalidDomain(
-                &quot;Failed to load domain specification from &#x27;{}&#x27;. &quot;
-                &quot;File not found!&quot;.format(os.path.abspath(path))
+                &quot;Failed to load domain specification from &#x27;{}&#x27;. File not found!&quot;.format(
+                    os.path.abspath(path)
+                )
             )
 
         return domain
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/shared/core/events.py#L1964">rasa/shared/core/events.py~L1964</a></p>
<pre><code> 
     def __str__(self) -&gt; Text:
         &quot;&quot;&quot;Returns text representation of event.&quot;&quot;&quot;
-        return (
-            &quot;ActionExecutionRejected(&quot;
-            &quot;action: {}, policy: {}, confidence: {})&quot;
-            &quot;&quot;.format(self.action_name, self.policy, self.confidence)
+        return &quot;ActionExecutionRejected(action: {}, policy: {}, confidence: {})&quot;.format(
+            self.action_name, self.policy, self.confidence
         )
 
     def __hash__(self) -&gt; int:
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/shared/core/generator.py#L401">rasa/shared/core/generator.py~L401</a></p>
<pre><code> 
             if num_active_trackers:
                 logger.debug(
-                    &quot;Starting {} ... (with {} trackers)&quot; &quot;&quot;.format(
+                    &quot;Starting {} ... (with {} trackers)&quot;.format(
                         phase_name, num_active_trackers
                     )
                 )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/shared/core/generator.py#L517">rasa/shared/core/generator.py~L517</a></p>
<pre><code>                     phase = 0
                 else:
                     logger.debug(
-                        &quot;Found {} unused checkpoints &quot; &quot;in current phase.&quot; &quot;&quot;.format(
+                        &quot;Found {} unused checkpoints in current phase.&quot;.format(
                             len(unused_checkpoints)
                         )
                     )
                     logger.debug(
-                        &quot;Found {} active trackers &quot; &quot;for these checkpoints.&quot; &quot;&quot;.format(
+                        &quot;Found {} active trackers for these checkpoints.&quot;.format(
                             num_active_trackers
                         )
                     )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/shared/core/generator.py#L553">rasa/shared/core/generator.py~L553</a></p>
<pre><code>                 augmented_trackers, self.config.max_number_of_augmented_trackers
             )
             logger.debug(
-                &quot;Subsampled to {} augmented training trackers.&quot; &quot;&quot;.format(
+                &quot;Subsampled to {} augmented training trackers.&quot;.format(
                     len(augmented_trackers)
                 )
             )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/shared/core/trackers.py#L634">rasa/shared/core/trackers.py~L634</a></p>
<pre><code>         &quot;&quot;&quot;
         if not isinstance(dialogue, Dialogue):
             raise ValueError(
-                f&quot;story {dialogue} is not of type Dialogue. &quot;
-                f&quot;Have you deserialized it?&quot;
+                f&quot;story {dialogue} is not of type Dialogue. Have you deserialized it?&quot;
             )
 
         self._reset()
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/shared/core/training_data/story_reader/story_reader.py#L83">rasa/shared/core/training_data/story_reader/story_reader.py~L83</a></p>
<pre><code>         )
         if parsed_events is None:
             raise StoryParseError(
-                &quot;Unknown event &#x27;{}&#x27;. It is Neither an event &quot; &quot;nor an action).&quot;.format(
+                &quot;Unknown event &#x27;{}&#x27;. It is Neither an event nor an action).&quot;.format(
                     event_name
                 )
             )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/shared/core/training_data/story_reader/yaml_story_reader.py#L334">rasa/shared/core/training_data/story_reader/yaml_story_reader.py~L334</a></p>
<pre><code> 
         if not self.domain:
             logger.debug(
-                &quot;Skipped validating if intent is in domain as domain &quot; &quot;is `None`.&quot;
+                &quot;Skipped validating if intent is in domain as domain is `None`.&quot;
             )
             return
 
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/shared/nlu/training_data/formats/dialogflow.py#L34">rasa/shared/nlu/training_data/formats/dialogflow.py~L34</a></p>
<pre><code> 
         if fformat not in {DIALOGFLOW_INTENT, DIALOGFLOW_ENTITIES}:
             raise ValueError(
-                &quot;fformat must be either {}, or {}&quot; &quot;&quot;.format(
+                &quot;fformat must be either {}, or {}&quot;.format(
                     DIALOGFLOW_INTENT, DIALOGFLOW_ENTITIES
                 )
             )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/utils/common.py#L308">rasa/utils/common.py~L308</a></p>
<pre><code>         access_logger.addHandler(file_handler)
     if use_syslog:
         formatter = logging.Formatter(
-            &quot;%(asctime)s [%(levelname)-5.5s] [%(process)d]&quot; &quot; %(message)s&quot;
+            &quot;%(asctime)s [%(levelname)-5.5s] [%(process)d] %(message)s&quot;
         )
         socktype = SOCK_STREAM if syslog_protocol == TCP_PROTOCOL else SOCK_DGRAM
         syslog_handler = logging.handlers.SysLogHandler(
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/rasa/utils/endpoints.py#L33">rasa/utils/endpoints.py~L33</a></p>
<pre><code>         return EndpointConfig.from_dict(content[endpoint_type])
     except FileNotFoundError:
         logger.error(
-            &quot;Failed to read endpoint configuration &quot; &quot;from {}. No such file.&quot;.format(
+            &quot;Failed to read endpoint configuration from {}. No such file.&quot;.format(
                 os.path.abspath(filename)
             )
         )
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/tests/core/test_tracker_stores.py#L311">tests/core/test_tracker_stores.py~L311</a></p>
<pre><code>     assert isinstance(tracker_store, InMemoryTrackerStore)
 
 
-async def _tracker_store_and_tracker_with_slot_set() -&gt; (
-    Tuple[InMemoryTrackerStore, DialogueStateTracker]
-):
+async def _tracker_store_and_tracker_with_slot_set() -&gt; Tuple[
+    InMemoryTrackerStore, DialogueStateTracker
+]:
     # returns an InMemoryTrackerStore containing a tracker with a slot set
 
     slot_key = &quot;cuisine&quot;
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/tests/engine/recipes/test_default_recipe.py#L98">tests/engine/recipes/test_default_recipe.py~L98</a></p>
<pre><code>         (
             &quot;data/test_config/config_pretrained_embeddings_mitie.yml&quot;,
             &quot;data/graph_schemas/config_pretrained_embeddings_mitie_train_schema.yml&quot;,
-            &quot;data/graph_schemas/&quot;
-            &quot;config_pretrained_embeddings_mitie_predict_schema.yml&quot;,
+            &quot;data/graph_schemas/config_pretrained_embeddings_mitie_predict_schema.yml&quot;,
             TrainingType.BOTH,
             False,
         ),
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/tests/graph_components/validators/test_default_recipe_validator.py#L780">tests/graph_components/validators/test_default_recipe_validator.py~L780</a></p>
<pre><code>     if should_warn:
         with pytest.warns(
             UserWarning,
-            match=(f&quot;&#x27;{RulePolicy.__name__}&#x27; is not &quot; &quot;included in the model&#x27;s &quot;),
+            match=(f&quot;&#x27;{RulePolicy.__name__}&#x27; is not included in the model&#x27;s &quot;),
         ) as records:
             validator.validate(importer)
     else:
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/tests/graph_components/validators/test_default_recipe_validator.py#L883">tests/graph_components/validators/test_default_recipe_validator.py~L883</a></p>
<pre><code>     num_duplicates: bool,
     priority: int,
 ):
-    assert (
-        len(policy_types) &gt;= priority + num_duplicates
-    ), f&quot;This tests needs at least {priority+num_duplicates} many types.&quot;
+    assert len(policy_types) &gt;= priority + num_duplicates, (
+        f&quot;This tests needs at least {priority + num_duplicates} many types.&quot;
+    )
 
     # start with a schema where node i has priority i
     nodes = {
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/tests/graph_components/validators/test_default_recipe_validator.py#L895">tests/graph_components/validators/test_default_recipe_validator.py~L895</a></p>
<pre><code> 
     # give nodes p+1, .., p+num_duplicates-1 priority &quot;priority&quot;
     for idx in range(num_duplicates):
-        nodes[f&quot;{priority+idx+1}&quot;].config[&quot;priority&quot;] = priority
+        nodes[f&quot;{priority + idx + 1}&quot;].config[&quot;priority&quot;] = priority
 
     validator = DefaultV1RecipeValidator(graph_schema=GraphSchema(nodes))
     monkeypatch.setattr(
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/tests/graph_components/validators/test_default_recipe_validator.py#L992">tests/graph_components/validators/test_default_recipe_validator.py~L992</a></p>
<pre><code>     with pytest.warns(
         UserWarning,
         match=(
-            &quot;Found rule-based training data but no policy &quot;
-            &quot;supporting rule-based data.&quot;
+            &quot;Found rule-based training data but no policy supporting rule-based data.&quot;
         ),
     ):
         validator.validate(importer)
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/tests/nlu/featurizers/test_regex_featurizer.py#L44">tests/nlu/featurizers/test_regex_featurizer.py~L44</a></p>
<pre><code> 
 
 @pytest.mark.parametrize(
-    &quot;sentence, expected_sequence_features, expected_sentence_features,&quot;
-    &quot;labeled_tokens&quot;,
+    &quot;sentence, expected_sequence_features, expected_sentence_features,labeled_tokens&quot;,
     [
         (
             &quot;hey how are you today&quot;,
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/tests/nlu/featurizers/test_regex_featurizer.py#L219">tests/nlu/featurizers/test_regex_featurizer.py~L219</a></p>
<pre><code> 
 
 @pytest.mark.parametrize(
-    &quot;sentence, expected_sequence_features, expected_sentence_features, &quot;
-    &quot;labeled_tokens&quot;,
+    &quot;sentence, expected_sequence_features, expected_sentence_features, labeled_tokens&quot;,
     [
         (
             &quot;lemonade and mapo tofu&quot;,
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/tests/nlu/featurizers/test_regex_featurizer.py#L383">tests/nlu/featurizers/test_regex_featurizer.py~L383</a></p>
<pre><code> 
 
 @pytest.mark.parametrize(
-    &quot;sentence, expected_sequence_features, expected_sentence_features,&quot;
-    &quot;case_sensitive&quot;,
+    &quot;sentence, expected_sequence_features, expected_sentence_features,case_sensitive&quot;,
     [
         (&quot;Hey How are you today&quot;, [0.0, 0.0, 0.0], [0.0, 0.0, 0.0], True),
         (&quot;Hey How are you today&quot;, [0.0, 1.0, 0.0], [0.0, 1.0, 0.0], False),
</code></pre>
<p><a href="https://github.com/RasaHQ/rasa/blob/b8de3b231126747ff74b2782cb25cb22d2d898d7/tests/nlu/featurizers/test_spacy_featurizer.py#L133">tests/nlu/featurizers/test_spacy_featurizer.py~L133</a></p>
<pre><code>         vecs = ftr._features_for_doc(doc)
         vecs_capitalized = ftr._features_for_doc(doc_capitalized)
 
-        assert np.allclose(
-            vecs, vecs_capitalized, atol=1e-5
-        ), &quot;Vectors are unequal for texts &#x27;{}&#x27; and &#x27;{}&#x27;&quot;.format(
-            e.get(TEXT), e.get(TEXT).capitalize()
+        assert np.allclose(vecs, vecs_capitalized, atol=1e-5), (
+            &quot;Vectors are unequal for texts &#x27;{}&#x27; and &#x27;{}&#x27;&quot;.format(
+                e.get(TEXT), e.get(TEXT).capitalize()
+            )
         )
 
 
</code></pre>
</p>

<a href="https://github.com/Snowflake-Labs/snowcli">Snowflake-Labs/snowcli</a> (+12 -10 lines across 5 files)
<p>

<p><a href="https://github.com/Snowflake-Labs/snowcli/blob/1c2ef97810b3494119d3cae9d3d1106d227e15b8/src/snowflake/cli/_plugins/nativeapp/artifacts.py#L250">src/snowflake/cli/_plugins/nativeapp/artifacts.py~L250</a></p>
<pre><code>     def __init__(self, *, project_root: Path, deploy_root: Path):
         # If a relative path ends up here, it&#x27;s a bug in the app and can lead to other
         # subtle bugs as paths would be resolved relative to the current working directory.
-        assert (
-            project_root.is_absolute()
-        ), f&quot;Project root {project_root} must be an absolute path.&quot;
-        assert (
-            deploy_root.is_absolute()
-        ), f&quot;Deploy root {deploy_root} must be an absolute path.&quot;
+        assert project_root.is_absolute(), (
+            f&quot;Project root {project_root} must be an absolute path.&quot;
+        )
+        assert deploy_root.is_absolute(), (
+            f&quot;Deploy root {deploy_root} must be an absolute path.&quot;
+        )
 
         self._project_root: Path = resolve_without_follow(project_root)
         self._deploy_root: Path = resolve_without_follow(deploy_root)
</code></pre>
<p><a href="https://github.com/Snowflake-Labs/snowcli/blob/1c2ef97810b3494119d3cae9d3d1106d227e15b8/src/snowflake/cli/_plugins/nativeapp/codegen/snowpark/python_processor.py#L433">src/snowflake/cli/_plugins/nativeapp/codegen/snowpark/python_processor.py~L433</a></p>
<pre><code>         create_query += f&quot;\nEXTERNAL_ACCESS_INTEGRATIONS=({&#x27;, &#x27;.join(ensure_all_string_literals(extension_fn.external_access_integrations))})&quot;
 
     if extension_fn.secrets:
-        create_query += f&quot;&quot;&quot;\nSECRETS=({&#x27;, &#x27;.join([f&quot;{ensure_string_literal(k)}={v}&quot; for k, v in extension_fn.secrets.items()])})&quot;&quot;&quot;
+        create_query += f&quot;&quot;&quot;\nSECRETS=({&quot;, &quot;.join([f&quot;{ensure_string_literal(k)}={v}&quot; for k, v in extension_fn.secrets.items()])})&quot;&quot;&quot;
 
     create_query += f&quot;\nHANDLER={ensure_string_literal(extension_fn.handler)}&quot;
 
</code></pre>
<p><a href="https://github.com/Snowflake-Labs/snowcli/blob/1c2ef97810b3494119d3cae9d3d1106d227e15b8/src/snowflake/cli/_plugins/stage/manager.py#L106">src/snowflake/cli/_plugins/stage/manager.py~L106</a></p>
<pre><code> 
     def get_standard_stage_path(self) -&gt; str:
         path = self.get_full_stage_path(self.path)
-        return f&quot;@{path}{&#x27;/&#x27;if self.is_directory and not path.endswith(&#x27;/&#x27;) else &#x27;&#x27;}&quot;
+        return f&quot;@{path}{&#x27;/&#x27; if self.is_directory and not path.endswith(&#x27;/&#x27;) else &#x27;&#x27;}&quot;
 
     def get_standard_stage_directory_path(self) -&gt; str:
         path = self.get_standard_stage_path()
</code></pre>
<p><a href="https://github.com/Snowflake-Labs/snowcli/blob/1c2ef97810b3494119d3cae9d3d1106d227e15b8/tests/test_connection.py#L1312">tests/test_connection.py~L1312</a></p>
<pre><code>             [&quot;connection&quot;, &quot;generate-jwt&quot;, &quot;-c&quot;, &quot;jwt&quot;],
         )
         assert (
-            f&#x27;{attribute.capitalize().replace(&quot;_&quot;, &quot; &quot;)} is not set in the connection context&#x27;
+            f&quot;{attribute.capitalize().replace(&#x27;_&#x27;, &#x27; &#x27;)} is not set in the connection context&quot;
             in result.output
         )
 
</code></pre>
<p><a href="https://github.com/Snowflake-Labs/snowcli/blob/1c2ef97810b3494119d3cae9d3d1106d227e15b8/tests_e2e/test_installation.py#L68">tests_e2e/test_installation.py~L68</a></p>
<pre><code>     assert &quot;Initialized the new project in&quot; in output
     for file in files_to_check:
         expected_generated_file = project_path / file
-        assert expected_generated_file.exists(), f&quot;[{expected_generated_file}] does not exist. It should be generated from templates directory.&quot;
+        assert expected_generated_file.exists(), (
+            f&quot;[{expected_generated_file}] does not exist. It should be generated from templates directory.&quot;
+        )
 
 
 @pytest.mark.e2e
</code></pre>
</p>

<a href="https://github.com/aiven/aiven-client">aiven/aiven-client</a> (+2 -2 lines across 1 file)
<p>

<p><a href="https://github.com/aiven/aiven-client/blob/e73ee16e9c9934a04cc19d476434b7db96f7e09a/aiven/client/cli.py#L870">aiven/client/cli.py~L870</a></p>
<pre><code>                         types = spec[&quot;type&quot;]
                         if isinstance(types, str) and types == &quot;null&quot;:
                             print(
-                                &quot;  {title}{description}\n&quot; &quot;     =&gt; --remove-option {name}&quot;.format(
+                                &quot;  {title}{description}\n     =&gt; --remove-option {name}&quot;.format(
                                     name=name,
                                     title=spec[&quot;title&quot;],
                                     description=description,
</code></pre>
<p><a href="https://github.com/aiven/aiven-client/blob/e73ee16e9c9934a04cc19d476434b7db96f7e09a/aiven/client/cli.py#L881">aiven/client/cli.py~L881</a></p>
<pre><code>                                 types = [types]
                             type_str = &quot; or &quot;.join(t for t in types if t != &quot;null&quot;)
                             print(
-                                &quot;  {title}{description}\n&quot; &quot;     =&gt; -c {name}=&lt;{type}&gt;  {default}&quot;.format(
+                                &quot;  {title}{description}\n     =&gt; -c {name}=&lt;{type}&gt;  {default}&quot;.format(
                                     name=name,
                                     type=type_str,
                                     default=default_desc,
</code></pre>
</p>

<a href="https://github.com/aws/aws-sam-cli">aws/aws-sam-cli</a> (+22 -24 lines across 19 files)
<p>

<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/samcli/commands/init/interactive_init_flow.py#L544">samcli/commands/init/interactive_init_flow.py~L544</a></p>
<pre><code>     click.echo(f&quot;\n{question}&quot;)
 
     for index, option in enumerate(options_list):
-        click.echo(f&quot;\t{index+1} - {option}&quot;)
+        click.echo(f&quot;\t{index + 1} - {option}&quot;)
         click_choices.append(str(index + 1))
     choice = click.prompt(msg, type=click.Choice(click_choices), show_choices=False)
     return options_list[int(choice) - 1]
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/samcli/commands/init/interactive_init_flow.py#L557">samcli/commands/init/interactive_init_flow.py~L557</a></p>
<pre><code>         click.echo(&quot;\nSelect your starter template&quot;)
         click_template_choices = []
         for index, template in enumerate(templates):
-            click.echo(f&quot;\t{index+1} - {template[&#x27;displayName&#x27;]}&quot;)
+            click.echo(f&quot;\t{index + 1} - {template[&#x27;displayName&#x27;]}&quot;)
             click_template_choices.append(str(index + 1))
         template_choice = click.prompt(&quot;Template&quot;, type=click.Choice(click_template_choices), show_choices=False)
         chosen_template = templates[int(template_choice) - 1]
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/samcli/lib/deploy/deployer.py#L513">samcli/lib/deploy/deployer.py~L513</a></p>
<pre><code>             The maximum duration in minutes to wait for the deployment to complete.
         &quot;&quot;&quot;
         sys.stdout.write(
-            &quot;\n{} - Waiting for stack create/update &quot; &quot;to complete\n&quot;.format(
-                datetime.now().strftime(&quot;%Y-%m-%d %H:%M:%S&quot;)
-            )
+            &quot;\n{} - Waiting for stack create/update to complete\n&quot;.format(datetime.now().strftime(&quot;%Y-%m-%d %H:%M:%S&quot;))
         )
         sys.stdout.flush()
 
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/samcli/lib/intrinsic_resolver/intrinsic_property_resolver.py#L319">samcli/lib/intrinsic_resolver/intrinsic_property_resolver.py~L319</a></p>
<pre><code>         verify_intrinsic_type_list(
             value_list,
             IntrinsicResolver.FN_JOIN,
-            message=&quot;The list of values in {} after the &quot; &quot;delimiter must be a list&quot;.format(IntrinsicResolver.FN_JOIN),
+            message=&quot;The list of values in {} after the delimiter must be a list&quot;.format(IntrinsicResolver.FN_JOIN),
         )
 
         sanitized_value_list = [
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/samcli/lib/intrinsic_resolver/intrinsic_property_resolver.py#L487">samcli/lib/intrinsic_resolver/intrinsic_property_resolver.py~L487</a></p>
<pre><code>         verify_intrinsic_type_dict(
             top_level_value,
             IntrinsicResolver.FN_FIND_IN_MAP,
-            message=&quot;The TopLevelKey is missing in the Mappings dictionary in Fn::FindInMap &quot; &quot;for {}&quot;.format(
+            message=&quot;The TopLevelKey is missing in the Mappings dictionary in Fn::FindInMap for {}&quot;.format(
                 top_level_key
             ),
         )
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/samcli/lib/intrinsic_resolver/intrinsic_property_resolver.py#L496">samcli/lib/intrinsic_resolver/intrinsic_property_resolver.py~L496</a></p>
<pre><code>         verify_non_null(
             second_level_value,
             IntrinsicResolver.FN_FIND_IN_MAP,
-            message=&quot;The SecondLevelKey is missing in the Mappings dictionary in Fn::FindInMap  &quot; &quot;for {}&quot;.format(
+            message=&quot;The SecondLevelKey is missing in the Mappings dictionary in Fn::FindInMap  for {}&quot;.format(
                 second_level_key
             ),
         )
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/samcli/lib/schemas/schemas_directory_hierarchy_builder.py#L11">samcli/lib/schemas/schemas_directory_hierarchy_builder.py~L11</a></p>
<pre><code> def get_package_hierarchy(schema_name):
     path = &quot;schema&quot;
     if schema_name.startswith(&quot;aws.partner-&quot;):
-        path = path + &quot;.&quot; &quot;aws.partner&quot;
+        path = path + &quot;.aws.partner&quot;
         tail = schema_name[len(&quot;aws.partner-&quot;) :]
         path = path + &quot;.&quot; + sanitize_name(tail)
         return path.lower()
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/local/invoke/test_integrations_cli.py#L183">tests/integration/local/invoke/test_integrations_cli.py~L183</a></p>
<pre><code>         self.assertEqual(
             process_stdout.decode(&quot;utf-8&quot;),
             &quot;&quot;,
-            msg=&quot;The return statement in the LambdaFunction &quot; &quot;should never return leading to an empty string&quot;,
+            msg=&quot;The return statement in the LambdaFunction should never return leading to an empty string&quot;,
         )
 
     @pytest.mark.flaky(reruns=3)
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/remote_invoke/lambda-fns/main.py#L9">tests/integration/testdata/remote_invoke/lambda-fns/main.py~L9</a></p>
<pre><code>     print(&quot;value2 = &quot; + event[&quot;key2&quot;])
     print(&quot;value3 = &quot; + event[&quot;key3&quot;])
 
-    return {&quot;message&quot;: f&#x27;{event[&quot;key1&quot;]} {event[&quot;key3&quot;]}&#x27;}
+    return {&quot;message&quot;: f&quot;{event[&#x27;key1&#x27;]} {event[&#x27;key3&#x27;]}&quot;}
 
 
 def custom_env_var_echo_handler(event, context):
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/code/after/function/app.py#L11">tests/integration/testdata/sync/code/after/function/app.py~L11</a></p>
<pre><code>         &quot;statusCode&quot;: 200,
         &quot;body&quot;: json.dumps(
             {
-                &quot;message&quot;: f&quot;{layer_method()+2}&quot;,
+                &quot;message&quot;: f&quot;{layer_method() + 2}&quot;,
                 &quot;message_from_layer&quot;: f&quot;{layer_method()}&quot;,
                 &quot;extra_message&quot;: np.array([1, 2, 3, 4, 5, 6]).tolist(),  # checking external library call will succeed
             }
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/code/before/function/app.py#L11">tests/integration/testdata/sync/code/before/function/app.py~L11</a></p>
<pre><code>         &quot;statusCode&quot;: 200,
         &quot;body&quot;: json.dumps(
             {
-                &quot;message&quot;: f&quot;{layer_method()+1}&quot;,
+                &quot;message&quot;: f&quot;{layer_method() + 1}&quot;,
                 &quot;message_from_layer&quot;: f&quot;{layer_method()}&quot;,
                 &quot;extra_message&quot;: np.array([1, 2, 3, 4, 5, 6]).tolist(),  # checking external library call will succeed
             }
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/infra/after/Python/function/app.py#L11">tests/integration/testdata/sync/infra/after/Python/function/app.py~L11</a></p>
<pre><code>         &quot;statusCode&quot;: 200,
         &quot;body&quot;: json.dumps(
             {
-                &quot;message&quot;: f&quot;{layer_method()+2}&quot;,
+                &quot;message&quot;: f&quot;{layer_method() + 2}&quot;,
                 &quot;extra_message&quot;: np.array([1, 2, 3, 4, 5, 6]).tolist(),  # checking external library call will succeed
             }
         ),
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/infra/before/Python/function/app.py#L11">tests/integration/testdata/sync/infra/before/Python/function/app.py~L11</a></p>
<pre><code>         &quot;statusCode&quot;: 200,
         &quot;body&quot;: json.dumps(
             {
-                &quot;message&quot;: f&quot;{layer_method()+1}&quot;,
+                &quot;message&quot;: f&quot;{layer_method() + 1}&quot;,
                 &quot;extra_message&quot;: np.array([1, 2, 3, 4, 5, 6]).tolist(),  # checking external library call will succeed
             }
         ),
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/infra/cdk/after/asset.6598609927b272b36fdf01072092f9851ddcd1b41ba294f736ce77091f5cc456/main.py#L11">tests/integration/testdata/sync/infra/cdk/after/asset.6598609927b272b36fdf01072092f9851ddcd1b41ba294f736ce77091f5cc456/main.py~L11</a></p>
<pre><code>         &quot;statusCode&quot;: 200,
         &quot;body&quot;: json.dumps(
             {
-                &quot;message&quot;: f&quot;{layer_method()+2}&quot;,
+                &quot;message&quot;: f&quot;{layer_method() + 2}&quot;,
                 &quot;extra_message&quot;: np.array([1, 2, 3, 4, 5, 6]).tolist(),  # checking external library call will succeed
             }
         ),
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/infra/cdk/after/asset.b998895901bf33127f2c9dce715854f8b35aa73fb7eb5245ba9721580bbe5837/main.py#L11">tests/integration/testdata/sync/infra/cdk/after/asset.b998895901bf33127f2c9dce715854f8b35aa73fb7eb5245ba9721580bbe5837/main.py~L11</a></p>
<pre><code>         &quot;statusCode&quot;: 200,
         &quot;body&quot;: json.dumps(
             {
-                &quot;message&quot;: f&quot;{layer_method()+2}&quot;,
+                &quot;message&quot;: f&quot;{layer_method() + 2}&quot;,
                 &quot;extra_message&quot;: np.array([1, 2, 3, 4, 5, 6]).tolist(),  # checking external library call will succeed
             }
         ),
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/infra/cdk/before/asset.6598609927b272b36fdf01072092f9851ddcd1b41ba294f736ce77091f5cc456/main.py#L11">tests/integration/testdata/sync/infra/cdk/before/asset.6598609927b272b36fdf01072092f9851ddcd1b41ba294f736ce77091f5cc456/main.py~L11</a></p>
<pre><code>         &quot;statusCode&quot;: 200,
         &quot;body&quot;: json.dumps(
             {
-                &quot;message&quot;: f&quot;{layer_method()+1}&quot;,
+                &quot;message&quot;: f&quot;{layer_method() + 1}&quot;,
                 &quot;extra_message&quot;: np.array([1, 2, 3, 4, 5, 6]).tolist(),  # checking external library call will succeed
             }
         ),
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/infra/cdk/before/asset.b998895901bf33127f2c9dce715854f8b35aa73fb7eb5245ba9721580bbe5837/main.py#L11">tests/integration/testdata/sync/infra/cdk/before/asset.b998895901bf33127f2c9dce715854f8b35aa73fb7eb5245ba9721580bbe5837/main.py~L11</a></p>
<pre><code>         &quot;statusCode&quot;: 200,
         &quot;body&quot;: json.dumps(
             {
-                &quot;message&quot;: f&quot;{layer_method()+1}&quot;,
+                &quot;message&quot;: f&quot;{layer_method() + 1}&quot;,
                 &quot;extra_message&quot;: np.array([1, 2, 3, 4, 5, 6]).tolist(),  # checking external library call will succeed
             }
         ),
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/nested/after/child_stack/child_functions/child_function.py#L7">tests/integration/testdata/sync/nested/after/child_stack/child_functions/child_function.py~L7</a></p>
<pre><code> 
     return {
         &quot;statusCode&quot;: 200,
-        &quot;body&quot;: json.dumps({&quot;message&quot;: f&quot;{layer_method()+6}&quot;}),
+        &quot;body&quot;: json.dumps({&quot;message&quot;: f&quot;{layer_method() + 6}&quot;}),
     }
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/nested/after/root_function/root_function.py#L17">tests/integration/testdata/sync/nested/after/root_function/root_function.py~L17</a></p>
<pre><code> 
     return {
         &quot;statusCode&quot;: 200,
-        &quot;body&quot;: json.dumps({&quot;message&quot;: f&quot;{layer_method()+6}&quot;, &quot;location&quot;: ip.text.replace(&quot;\n&quot;, &quot;&quot;)}),
+        &quot;body&quot;: json.dumps({&quot;message&quot;: f&quot;{layer_method() + 6}&quot;, &quot;location&quot;: ip.text.replace(&quot;\n&quot;, &quot;&quot;)}),
     }
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/nested/before/child_stack/child_functions/child_function.py#L7">tests/integration/testdata/sync/nested/before/child_stack/child_functions/child_function.py~L7</a></p>
<pre><code> 
     return {
         &quot;statusCode&quot;: 200,
-        &quot;body&quot;: json.dumps({&quot;message&quot;: f&quot;{layer_method()+5}&quot;}),
+        &quot;body&quot;: json.dumps({&quot;message&quot;: f&quot;{layer_method() + 5}&quot;}),
     }
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/nested/before/root_function/root_function.py#L17">tests/integration/testdata/sync/nested/before/root_function/root_function.py~L17</a></p>
<pre><code> 
     return {
         &quot;statusCode&quot;: 200,
-        &quot;body&quot;: json.dumps({&quot;message&quot;: f&quot;{layer_method()+6}&quot;, &quot;location&quot;: ip.text.replace(&quot;\n&quot;, &quot;&quot;)}),
+        &quot;body&quot;: json.dumps({&quot;message&quot;: f&quot;{layer_method() + 6}&quot;, &quot;location&quot;: ip.text.replace(&quot;\n&quot;, &quot;&quot;)}),
     }
</code></pre>
<p><a href="https://github.com/aws/aws-sam-cli/blob/59abce37aec1450683d5310771d7799a27336ca5/tests/integration/testdata/sync/nested_intrinsics/before/child_stack/child_function/function/function.py#L20">tests/integration/testdata/sync/nested_intrinsics/before/child_stack/child_function/function/function.py~L20</a></p>
<pre><code>         &quot;statusCode&quot;: 200,
         &quot;body&quot;: json.dumps(
             {
-                &quot;message&quot;: f&quot;{layer_method()+1}&quot;,
+                &quot;message&quot;: f&quot;{layer_method() + 1}&quot;,
                 &quot;location&quot;: ip.text.replace(&quot;\n&quot;, &quot;&quot;),
                 # &quot;extra_message&quot;: np.array([1, 2, 3, 4, 5, 6]).tolist() # checking external library call will succeed
             }
</code></pre>
</p>

<a href="https://github.com/binary-husky/gpt_academic">binary-husky/gpt_academic</a> (+62 -60 lines across 33 files)
<p>

<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/Conversation_To_File.py#L251">crazy_functions/Conversation_To_File.py~L251</a></p>
<pre><code>             [
                 &quot;`&quot; + hide_cwd(f) + f&quot; ({gen_file_preview(f)})&quot; + &quot;`&quot;
                 for f in glob.glob(
-                    f&#x27;{get_log_folder(get_user(chatbot), plugin_name=&quot;chat_history&quot;)}/**/{f_prefix}*.html&#x27;,
+                    f&quot;{get_log_folder(get_user(chatbot), plugin_name=&#x27;chat_history&#x27;)}/**/{f_prefix}*.html&quot;,
                     recursive=True,
                 )
             ]
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/Conversation_To_File.py#L294">crazy_functions/Conversation_To_File.py~L294</a></p>
<pre><code>         [
             &quot;`&quot; + hide_cwd(f) + &quot;`&quot;
             for f in glob.glob(
-                f&#x27;{get_log_folder(get_user(chatbot), plugin_name=&quot;chat_history&quot;)}/**/{f_prefix}*.html&#x27;,
+                f&quot;{get_log_folder(get_user(chatbot), plugin_name=&#x27;chat_history&#x27;)}/**/{f_prefix}*.html&quot;,
                 recursive=True,
             )
         ]
     )
     for f in glob.glob(
-        f&#x27;{get_log_folder(get_user(chatbot), plugin_name=&quot;chat_history&quot;)}/**/{f_prefix}*.html&#x27;,
+        f&quot;{get_log_folder(get_user(chatbot), plugin_name=&#x27;chat_history&#x27;)}/**/{f_prefix}*.html&quot;,
         recursive=True,
     ):
         os.remove(f)
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/Markdown_Translate.py#L193">crazy_functions/Markdown_Translate.py~L193</a></p>
<pre><code>                 txt = txt.replace(&quot;/blob/&quot;, &quot;/&quot;)
 
         r = requests.get(txt, proxies=proxies)
-        download_local = f&#x27;{get_log_folder(plugin_name=&quot;批量Markdown翻译&quot;)}/raw-readme-{gen_time_str()}.md&#x27;
-        project_folder = f&#x27;{get_log_folder(plugin_name=&quot;批量Markdown翻译&quot;)}&#x27;
+        download_local = f&quot;{get_log_folder(plugin_name=&#x27;批量Markdown翻译&#x27;)}/raw-readme-{gen_time_str()}.md&quot;
+        project_folder = f&quot;{get_log_folder(plugin_name=&#x27;批量Markdown翻译&#x27;)}&quot;
         with open(download_local, &quot;wb+&quot;) as f:
             f.write(r.content)
         file_manifest = [download_local]
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/Rag_Interface.py#L168">crazy_functions/Rag_Interface.py~L168</a></p>
<pre><code>             HALF = REMEMBER_PREVIEW // 2
             i_say_to_remember = (
                 txt[:HALF]
-                + f&quot; ...\n...(省略{len(txt_origin)-REMEMBER_PREVIEW}字)...\n... &quot;
+                + f&quot; ...\n...(省略{len(txt_origin) - REMEMBER_PREVIEW}字)...\n... &quot;
                 + txt[-HALF:]
             )
             if (flags[&quot;original_input_len&quot;] - flags[&quot;clipped_input_len&quot;]) &gt; HALF:
                 txt_clip = (
                     txt_clip
-                    + f&quot; ...\n...(省略{len(txt_origin)-len(txt_clip)-HALF}字)...\n... &quot;
+                    + f&quot; ...\n...(省略{len(txt_origin) - len(txt_clip) - HALF}字)...\n... &quot;
                     + txt[-HALF:]
                 )
         else:
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/Social_Helper.py#L182">crazy_functions/Social_Helper.py~L182</a></p>
<pre><code> 
         try:
             Explaination = &quot;\n&quot;.join(
-                [f&#x27;{k}: {v[&quot;explain_to_llm&quot;]}&#x27; for k, v in self.tools_to_select.items()]
+                [f&quot;{k}: {v[&#x27;explain_to_llm&#x27;]}&quot; for k, v in self.tools_to_select.items()]
             )
 
             class UserSociaIntention(BaseModel):
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/SourceCode_Analyse.py#L28">crazy_functions/SourceCode_Analyse.py~L28</a></p>
<pre><code>     sys_prompt_array = []
     report_part_1 = []
 
-    assert (
-        len(file_manifest) &lt;= 512
-    ), &quot;源文件太多（超过512个）, 请缩减输入文件的数量。或者，您也可以选择删除此行警告，并修改代码拆分file_manifest列表，从而实现分批次处理。&quot;
+    assert len(file_manifest) &lt;= 512, (
+        &quot;源文件太多（超过512个）, 请缩减输入文件的数量。或者，您也可以选择删除此行警告，并修改代码拆分file_manifest列表，从而实现分批次处理。&quot;
+    )
     ############################## &lt;第一步，逐个文件分析，多线程&gt; ##################################
     for index, fp in enumerate(file_manifest):
         # 读取文件
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/SourceCode_Analyse.py#L43">crazy_functions/SourceCode_Analyse.py~L43</a></p>
<pre><code>         )
         i_say_show_user = (
             prefix
-            + f&quot;[{index+1}/{len(file_manifest)}] 请对下面的程序文件做一个概述: {fp}&quot;
+            + f&quot;[{index + 1}/{len(file_manifest)}] 请对下面的程序文件做一个概述: {fp}&quot;
         )
         # 装载请求内容
         inputs_array.append(i_say)
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/SourceCode_Analyse.py#L92">crazy_functions/SourceCode_Analyse.py~L92</a></p>
<pre><code>         for index, content in enumerate(this_iteration_gpt_response_collection):
             if index % 2 == 0:
                 this_iteration_gpt_response_collection[index] = (
-                    f&quot;{file_rel_path[index//2]}&quot;  # 只保留文件名节省token
+                    f&quot;{file_rel_path[index // 2]}&quot;  # 只保留文件名节省token
                 )
         this_iteration_files = [
             os.path.relpath(fp, project_folder)
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/SourceCode_Comment.py#L37">crazy_functions/SourceCode_Comment.py~L37</a></p>
<pre><code>     history_array = []
     sys_prompt_array = []
 
-    assert (
-        len(file_manifest) &lt;= 512
-    ), &quot;源文件太多（超过512个）, 请缩减输入文件的数量。或者，您也可以选择删除此行警告，并修改代码拆分file_manifest列表，从而实现分批次处理。&quot;
+    assert len(file_manifest) &lt;= 512, (
+        &quot;源文件太多（超过512个）, 请缩减输入文件的数量。或者，您也可以选择删除此行警告，并修改代码拆分file_manifest列表，从而实现分批次处理。&quot;
+    )
 
     # 建立文件树
     file_tree_struct = FileNode(&quot;root&quot;, build_manifest=True)
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/SourceCode_Comment.py#L59">crazy_functions/SourceCode_Comment.py~L59</a></p>
<pre><code>         )
         i_say_show_user = (
             prefix
-            + f&quot;[{index+1}/{len(file_manifest)}] 请用一句话对下面的程序文件做一个整体概述: {fp}&quot;
+            + f&quot;[{index + 1}/{len(file_manifest)}] 请用一句话对下面的程序文件做一个整体概述: {fp}&quot;
         )
         # 装载请求内容
         MAX_TOKEN_SINGLE_FILE = 2560
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/VideoResource_GPT.py#L65">crazy_functions/VideoResource_GPT.py~L65</a></p>
<pre><code>     tic_time = 8
     for i in range(tic_time):
         yield from update_ui_lastest_msg(
-            lastmsg=f&quot;即将下载音频。等待{tic_time-i}秒后自动继续, 点击“停止”键取消此操作。&quot;,
+            lastmsg=f&quot;即将下载音频。等待{tic_time - i}秒后自动继续, 点击“停止”键取消此操作。&quot;,
             chatbot=chatbot,
             history=[],
             delay=1,
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/VideoResource_GPT.py#L94">crazy_functions/VideoResource_GPT.py~L94</a></p>
<pre><code>     tic_time = 16
     for i in range(tic_time):
         yield from update_ui_lastest_msg(
-            lastmsg=f&quot;即将下载视频。等待{tic_time-i}秒后自动继续, 点击“停止”键取消此操作。&quot;,
+            lastmsg=f&quot;即将下载视频。等待{tic_time - i}秒后自动继续, 点击“停止”键取消此操作。&quot;,
             chatbot=chatbot,
             history=[],
             delay=1,
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/VideoResource_GPT.py#L216">crazy_functions/VideoResource_GPT.py~L216</a></p>
<pre><code> 
     # 展示候选资源
     candadate_display = &quot;\n&quot;.join(
-        [f&quot;{i+1}. {it[&#x27;title&#x27;]}&quot; for i, it in enumerate(candadate_dictionary)]
+        [f&quot;{i + 1}. {it[&#x27;title&#x27;]}&quot; for i, it in enumerate(candadate_dictionary)]
     )
     chatbot.append((None, f&quot;候选:\n\n{candadate_display}&quot;))
     yield from update_ui(chatbot=chatbot, history=history)  # 刷新界面
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/crazy_utils.py#L166">crazy_functions/crazy_utils.py~L166</a></p>
<pre><code>                 if retry_op &gt; 0:
                     retry_op -= 1
                     mutable[0] += (
-                        f&quot;[Local Message] 重试中，请稍等 {retry_times_at_unknown_error-retry_op}/{retry_times_at_unknown_error}：\n\n&quot;
+                        f&quot;[Local Message] 重试中，请稍等 {retry_times_at_unknown_error - retry_op}/{retry_times_at_unknown_error}：\n\n&quot;
                     )
                     if (&quot;Rate limit reached&quot; in tb_str) or (
                         &quot;Too Many Requests&quot; in tb_str
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/crazy_utils.py#L366">crazy_functions/crazy_utils.py~L366</a></p>
<pre><code>                         fail_info = &quot;&quot;
                     # 也许等待十几秒后，情况会好转
                     for i in range(wait):
-                        mutable[index][2] = f&quot;{fail_info}等待重试 {wait-i}&quot;
+                        mutable[index][2] = f&quot;{fail_info}等待重试 {wait - i}&quot;
                         time.sleep(1)
                     # 开始重试
                     if detect_timeout():
                         raise RuntimeError(&quot;检测到程序终止。&quot;)
                     mutable[index][2] = (
-                        f&quot;重试中 {retry_times_at_unknown_error-retry_op}/{retry_times_at_unknown_error}&quot;
+                        f&quot;重试中 {retry_times_at_unknown_error - retry_op}/{retry_times_at_unknown_error}&quot;
                     )
                     continue  # 返回重试
                 else:
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/diagram_fns/file_tree.py#L85">crazy_functions/diagram_fns/file_tree.py~L85</a></p>
<pre><code>             )
             p2 = &quot;&quot;&quot; --&gt; &quot;&quot;&quot;
             p3 = (
-                f&quot;&quot;&quot;{code+str(j)}[\&quot;🗎{child.name}\&quot;]&quot;&quot;&quot;
+                f&quot;&quot;&quot;{code + str(j)}[\&quot;🗎{child.name}\&quot;]&quot;&quot;&quot;
                 if child.is_leaf
-                else f&quot;&quot;&quot;{code+str(j)}[[\&quot;📁{child.name}\&quot;]]&quot;&quot;&quot;
+                else f&quot;&quot;&quot;{code + str(j)}[[\&quot;📁{child.name}\&quot;]]&quot;&quot;&quot;
             )
             edge_code = p1 + p2 + p3
             if edge_code in self.parenting_ship:
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/gen_fns/gen_fns_shared.py#L22">crazy_functions/gen_fns/gen_fns_shared.py~L22</a></p>
<pre><code> 
 def try_make_module(code, chatbot):
     module_file = &quot;gpt_fn_&quot; + gen_time_str().replace(&quot;-&quot;, &quot;_&quot;)
-    fn_path = f&#x27;{get_log_folder(plugin_name=&quot;gen_plugin_verify&quot;)}/{module_file}.py&#x27;
+    fn_path = f&quot;{get_log_folder(plugin_name=&#x27;gen_plugin_verify&#x27;)}/{module_file}.py&quot;
     with open(fn_path, &quot;w&quot;, encoding=&quot;utf8&quot;) as f:
         f.write(code)
     promote_file_to_downloadzone(fn_path, chatbot=chatbot)
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/gen_fns/gen_fns_shared.py#L70">crazy_functions/gen_fns/gen_fns_shared.py~L70</a></p>
<pre><code>     return_dict[&quot;traceback&quot;] = &quot;&quot;
     try:
         module_file = &quot;gpt_fn_&quot; + gen_time_str().replace(&quot;-&quot;, &quot;_&quot;)
-        fn_path = f&#x27;{get_log_folder(plugin_name=&quot;gen_plugin_run&quot;)}/{module_file}.py&#x27;
+        fn_path = f&quot;{get_log_folder(plugin_name=&#x27;gen_plugin_run&#x27;)}/{module_file}.py&quot;
         with open(fn_path, &quot;w&quot;, encoding=&quot;utf8&quot;) as f:
             f.write(code)
         class_name = get_class_name(code)
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/latex_fns/latex_toolbox.py#L473">crazy_functions/latex_fns/latex_toolbox.py~L473</a></p>
<pre><code>             main_file = insert_abstract(main_file)
         match_opt1 = pattern_opt1.search(main_file)
         match_opt2 = pattern_opt2.search(main_file)
-        assert (match_opt1 is not None) or (
-            match_opt2 is not None
-        ), &quot;Cannot find paper abstract section!&quot;
+        assert (match_opt1 is not None) or (match_opt2 is not None), (
+            &quot;Cannot find paper abstract section!&quot;
+        )
     return main_file
 
 
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/pdf_fns/breakdown_txt.py#L82">crazy_functions/pdf_fns/breakdown_txt.py~L82</a></p>
<pre><code>                 remain_txt_to_cut, remain_txt_to_cut_storage
             )
             process = fin_len / total_len
-            logger.info(f&quot;正在文本切分 {int(process*100)}%&quot;)
+            logger.info(f&quot;正在文本切分 {int(process * 100)}%&quot;)
             if len(remain_txt_to_cut.strip()) == 0:
                 break
     return res
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/pdf_fns/parse_pdf.py#L181">crazy_functions/pdf_fns/parse_pdf.py~L181</a></p>
<pre><code>         for i, fragment in enumerate(section_frags):
             heading = section[&quot;heading&quot;]
             if len(section_frags) &gt; 1:
-                heading += f&quot; Part-{i+1}&quot;
+                heading += f&quot; Part-{i + 1}&quot;
             inputs_array.append(f&quot;你需要翻译{heading}章节，内容如下: \n\n{fragment}&quot;)
             inputs_show_user_array.append(f&quot;# {heading}\n\n{fragment}&quot;)
 
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/pdf_fns/parse_pdf_legacy.py#L96">crazy_functions/pdf_fns/parse_pdf_legacy.py~L96</a></p>
<pre><code>         for i, k in enumerate(gpt_response_collection_md):
             if i % 2 == 0:
                 gpt_response_collection_md[i] = (
-                    f&quot;\n\n---\n\n ## 原文[{i//2}/{len(gpt_response_collection_md)//2}]： \n\n {paper_fragments[i//2].replace(&#x27;#&#x27;, &#x27;&#x27;)}  \n\n---\n\n ## 翻译[{i//2}/{len(gpt_response_collection_md)//2}]：\n &quot;
+                    f&quot;\n\n---\n\n ## 原文[{i // 2}/{len(gpt_response_collection_md) // 2}]： \n\n {paper_fragments[i // 2].replace(&#x27;#&#x27;, &#x27;&#x27;)}  \n\n---\n\n ## 翻译[{i // 2}/{len(gpt_response_collection_md) // 2}]：\n &quot;
                 )
             else:
                 gpt_response_collection_md[i] = gpt_response_collection_md[i]
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/rag_fns/llama_index_worker.py#L143">crazy_functions/rag_fns/llama_index_worker.py~L143</a></p>
<pre><code>         buf = &quot;\n&quot;.join(
             (
                 [
-                    f&quot;(No.{i+1} | score {n.score:.3f}): {n.text}&quot;
+                    f&quot;(No.{i + 1} | score {n.score:.3f}): {n.text}&quot;
                     for i, n in enumerate(nodes)
                 ]
             )
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/crazy_functions/vt_fns/vt_call_plugin.py#L187">crazy_functions/vt_fns/vt_call_plugin.py~L187</a></p>
<pre><code>     # ⭐ ⭐ ⭐ 执行插件
     fn = plugin[&quot;Function&quot;]
     fn_name = fn.__name__
-    msg = f&#x27;{llm_kwargs[&quot;llm_model&quot;]}为您选择了插件: `{fn_name}`\n\n插件说明：{plugin[&quot;Info&quot;]}\n\n插件参数：{plugin_sel.plugin_arg}\n\n假如偏离了您的要求，按停止键终止。&#x27;
+    msg = f&quot;{llm_kwargs[&#x27;llm_model&#x27;]}为您选择了插件: `{fn_name}`\n\n插件说明：{plugin[&#x27;Info&#x27;]}\n\n插件参数：{plugin_sel.plugin_arg}\n\n假如偏离了您的要求，按停止键终止。&quot;
     yield from update_ui_lastest_msg(
         lastmsg=msg, chatbot=chatbot, history=history, delay=2
     )
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/&quot;a/crazy_functions/\345\207\275\346\225\260\345\212\250\346\200\201\347\224\237\346\210\220.py&quot;#L269">&quot;a/crazy_functions/\345\207\275\346\225\260\345\212\250\346\200\201\347\224\237\346\210\220.py&quot;~L269</a></p>
<pre><code>         if not traceback:
             traceback = trimmed_format_exc()
         yield from update_ui_lastest_msg(
-            f&quot;第 {j+1}/{MAX_TRY} 次代码生成尝试, 失败了~ 别担心, 我们5秒后再试一次... \n\n此次我们的错误追踪是\n```\n{traceback}\n```\n&quot;,
+            f&quot;第 {j + 1}/{MAX_TRY} 次代码生成尝试, 失败了~ 别担心, 我们5秒后再试一次... \n\n此次我们的错误追踪是\n```\n{traceback}\n```\n&quot;,
             chatbot,
             history,
             5,
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/&quot;a/crazy_functions/\346\200\273\347\273\223word\346\226\207\346\241\243.py&quot;#L57">&quot;a/crazy_functions/\346\200\273\347\273\223word\346\226\207\346\241\243.py&quot;~L57</a></p>
<pre><code>         this_paper_history = []
         for i, paper_frag in enumerate(paper_fragments):
             i_say = f&quot;请对下面的文章片段用中文做概述，文件名是{os.path.relpath(fp, project_folder)}，文章内容是 ```{paper_frag}```&quot;
-            i_say_show_user = f&quot;请对下面的文章片段做概述: {os.path.abspath(fp)}的第{i+1}/{len(paper_fragments)}个片段。&quot;
+            i_say_show_user = f&quot;请对下面的文章片段做概述: {os.path.abspath(fp)}的第{i + 1}/{len(paper_fragments)}个片段。&quot;
             gpt_say = yield from request_gpt_model_in_new_thread_with_ui_alive(
                 inputs=i_say,
                 inputs_show_user=i_say_show_user,
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/&quot;a/crazy_functions/\346\211\271\351\207\217\346\200\273\347\273\223PDF\346\226\207\346\241\243.py&quot;#L76">&quot;a/crazy_functions/\346\211\271\351\207\217\346\200\273\347\273\223PDF\346\226\207\346\241\243.py&quot;~L76</a></p>
<pre><code>         for i in range(n_fragment):
             NUM_OF_WORD = MAX_WORD_TOTAL // n_fragment
             i_say = f&quot;Read this section, recapitulate the content of this section with less than {NUM_OF_WORD} Chinese characters: {paper_fragments[i]}&quot;
-            i_say_show_user = f&quot;[{i+1}/{n_fragment}] Read this section, recapitulate the content of this section with less than {NUM_OF_WORD} Chinese characters: {paper_fragments[i][:200]}&quot;
+            i_say_show_user = f&quot;[{i + 1}/{n_fragment}] Read this section, recapitulate the content of this section with less than {NUM_OF_WORD} Chinese characters: {paper_fragments[i][:200]}&quot;
             gpt_say = yield from request_gpt_model_in_new_thread_with_ui_alive(
                 i_say,
                 i_say_show_user,  # i_say=真正给chatgpt的提问， i_say_show_user=给用户看的提问
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/&quot;a/crazy_functions/\346\211\271\351\207\217\346\200\273\347\273\223PDF\346\226\207\346\241\243pdfminer.py&quot;#L96">&quot;a/crazy_functions/\346\211\271\351\207\217\346\200\273\347\273\223PDF\346\226\207\346\241\243pdfminer.py&quot;~L96</a></p>
<pre><code>         )
         i_say_show_user = (
             prefix
-            + f&quot;[{index+1}/{len(file_manifest)}] 请对下面的文章片段做一个概述: {os.path.abspath(fp)}&quot;
+            + f&quot;[{index + 1}/{len(file_manifest)}] 请对下面的文章片段做一个概述: {os.path.abspath(fp)}&quot;
         )
         chatbot.append((i_say_show_user, &quot;[Local Message] waiting gpt response.&quot;))
         yield from update_ui(chatbot=chatbot, history=history)  # 刷新界面
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/&quot;a/crazy_functions/\347\220\206\350\247\243PDF\346\226\207\346\241\243\345\206\205\345\256\271.py&quot;#L64">&quot;a/crazy_functions/\347\220\206\350\247\243PDF\346\226\207\346\241\243\345\206\205\345\256\271.py&quot;~L64</a></p>
<pre><code>     for i in range(n_fragment):
         NUM_OF_WORD = MAX_WORD_TOTAL // n_fragment
         i_say = f&quot;Read this section, recapitulate the content of this section with less than {NUM_OF_WORD} words: {paper_fragments[i]}&quot;
-        i_say_show_user = f&quot;[{i+1}/{n_fragment}] Read this section, recapitulate the content of this section with less than {NUM_OF_WORD} words: {paper_fragments[i][:200]} ....&quot;
+        i_say_show_user = f&quot;[{i + 1}/{n_fragment}] Read this section, recapitulate the content of this section with less than {NUM_OF_WORD} words: {paper_fragments[i][:200]} ....&quot;
         gpt_say = yield from request_gpt_model_in_new_thread_with_ui_alive(
             i_say,
             i_say_show_user,  # i_say=真正给chatgpt的提问， i_say_show_user=给用户看的提问
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/&quot;a/crazy_functions/\347\224\237\346\210\220\345\207\275\346\225\260\346\263\250\351\207\212.py&quot;#L22">&quot;a/crazy_functions/\347\224\237\346\210\220\345\207\275\346\225\260\346\263\250\351\207\212.py&quot;~L22</a></p>
<pre><code>             file_content = f.read()
 
         i_say = f&quot;请对下面的程序文件做一个概述，并对文件中的所有函数生成注释，使用markdown表格输出结果，文件名是{os.path.relpath(fp, project_folder)}，文件内容是 ```{file_content}```&quot;
-        i_say_show_user = f&quot;[{index+1}/{len(file_manifest)}] 请对下面的程序文件做一个概述，并对文件中的所有函数生成注释: {os.path.abspath(fp)}&quot;
+        i_say_show_user = f&quot;[{index + 1}/{len(file_manifest)}] 请对下面的程序文件做一个概述，并对文件中的所有函数生成注释: {os.path.abspath(fp)}&quot;
         chatbot.append((i_say_show_user, &quot;[Local Message] waiting gpt response.&quot;))
         yield from update_ui(chatbot=chatbot, history=history)  # 刷新界面
 
</code></pre>
<p><a href="https://github.com/binary-husky/gpt_academic/blob/060af0d2e6db22e36d6b53b59c8eae56f91d3928/&quot;a/crazy_functions/\347\224\237\346\210\220\345\244\232\347\247\215Mermaid\345\233\276\350\241\250.py&quot;#L205">&quot;a/crazy_functions/\347\224\237\346\210\220\345\244\232\347\247\215Mermaid\345\233\276\350\241\250.py&quot;~L205</a></p>
<pre><code>     for i in ra...*[Comment body truncated]*
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">do-not-merge</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-24 13:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-23 12:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">do-not-merge</span> removed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-03 13:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;v0.9&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-03 13:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-03 13:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-03 13:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-01-03 13:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:07:45 UTC
    </footer>
</body>
</html>
