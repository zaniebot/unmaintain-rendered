<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improve documentation of the preview mode - astral-sh/ruff #10168</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Improve documentation of the preview mode</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/10168">#10168</a>
        opened by <a href="https://github.com/hoel-bagard">@hoel-bagard</a>
        on 2024-02-29 10:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/hoel-bagard">@hoel-bagard</a> on 2024-02-29 10:41</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR was prompted by the discussion in #10153.
It adds CLI tab examples next to the <code>pyproject.toml</code> and <code>ruff.toml</code>  examples. It should be helpful for users wanting to try out the preview mode without modifying or creating a  <code>.toml</code> file.
It also adds a paragraph to try to make the effect of the preview mode less confusing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoel-bagard">@hoel-bagard</a> on 2024-02-29 10:43</div>
            <div class="timeline-body"><p>@buhtz does this added paragraph makes it less misleading in your opinion ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/buhtz">@buhtz</a> on 2024-02-29 11:52</div>
            <div class="timeline-body"><p>It is an improvement.</p>
<p>Please see https://docs.astral.sh/ruff/rules/too-many-blank-lines/</p>
<blockquote>
<p>This rule is unstable and in <a href="https://docs.astral.sh/ruff/preview/">preview</a>. The --preview flag is required for use.</p>
</blockquote>
<p>This is also misleading. I would suggest something like this (in all preview rules):</p>
<blockquote>
<p>The two switches <code>--select</code> and <code>--preview</code> are required for use.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoel-bagard">@hoel-bagard</a> on 2024-02-29 12:25</div>
            <div class="timeline-body"><p>The <code>--select</code> part is required for nearly all rules (by default only <code>[&quot;E4&quot;, &quot;E7&quot;, &quot;E9&quot;, &quot;F&quot;]</code> are selected), so I don't think it makes sense to specify it only on preview rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/buhtz">@buhtz</a> on 2024-02-29 12:52</div>
            <div class="timeline-body"><blockquote>
<p>The <code>--select</code> part is required for nearly all rules (by default only <code>[&quot;E4&quot;, &quot;E7&quot;, &quot;E9&quot;, &quot;F&quot;]</code> are selected), so I don't think it makes sense to specify it only on preview rules.</p>
</blockquote>
<p>But the docs state different. The docs say that you can use the <code>--preview</code> switch and all unstable rules are active. That is how some readers might understand it. And it would make sense by the way. My intention was to activate all unstable-rules to support your development via testing that rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @MichaReiser on 2024-02-29 12:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @MichaReiser on 2024-02-29 12:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/preview.md</code>:8 on 2024-02-29 12:58</div>
            <div class="timeline-body"><p>Nit: I would avoid explicitly naming <code>output-format</code> here. We otherwise have to come up with a new preview feature everytime we remove the feature mentioned in the documentation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-02-29 12:59</div>
            <div class="timeline-body"><p>Nice! I like it. I let @zanieb have a look at it too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-29 13:01</div>
            <div class="timeline-body"><blockquote>
<p>The two switches --select and --preview are required for use.</p>
</blockquote>
<p>Whether you need to enable the rule using <code>select</code>, <code>extend-select</code> or similar depends on your current configuration. Using <code>--select</code> (or similar) is also not specific to <code>--preview</code> but applies to all rules. That's why what we have now makes more sense to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hoel-bagard">@hoel-bagard</a> reviewed on 2024-02-29 13:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/hoel-bagard">@hoel-bagard</a> on <code>docs/preview.md</code>:8 on 2024-02-29 13:10</div>
            <div class="timeline-body"><p>I hesitated when writing it, better keep it general indeed.
Removed in b0a9db688.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-03-02 14:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/preview.md</code>:83 on 2024-03-02 14:21</div>
            <div class="timeline-body"><p>The <code>.</code> is superfluous in all of these examples, that's the default behavior these days.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-03-02 14:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/preview.md</code>:83 on 2024-03-02 14:22</div>
            <div class="timeline-body"><p>We're using <code>extend-select</code> in all of the other examples, why use <code>--select</code> here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-03-02 14:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/preview.md</code>:64 on 2024-03-02 14:23</div>
            <div class="timeline-body"><p>If you want to add more here, I'd rephrase entirely to make it more general</p>
<blockquote>
<p>If <code>HYP001</code> were in preview, it would <em>not</em> be enabled by adding it to the selected rule set.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-03-02 14:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/preview.md</code>:132 on 2024-03-02 14:24</div>
            <div class="timeline-body"><p>Similarly, I'd just generalize these e.g.</p>
<pre><code class="language-suggestion">However, it would be enabled in any of the above cases if you enabled preview mode:
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/preview.md</code>:8 on 2024-03-02 14:26</div>
            <div class="timeline-body"><p>I find this a little confusing. We have a flag that determines if preview rules require &quot;explicit&quot; selection but by default they do not i.e. &quot;implicit&quot; selection of the rule via a prefix is sufficient. I'd be much more direct here:</p>
<pre><code class="language-suggestion">Enabling preview mode does not select all preview rules by default. See the [rules section](#using-rules-that-are-in-preview) for details on selecting preview rules.
</code></pre>
<p>I'd also consider putting it in a note admonition.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-03-02 14:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-03-02 14:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/preview.md</code>:6 on 2024-03-02 14:31</div>
            <div class="timeline-body"><pre><code class="language-suggestion">Preview mode enables a collection of unstable features such as new lint rules and fixes, formatter style changes, interface updates, and more. Warnings about deprecated features may turn into errors when using preview mode.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hoel-bagard">@hoel-bagard</a> reviewed on 2024-03-03 09:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/hoel-bagard">@hoel-bagard</a> on <code>docs/preview.md</code>:83 on 2024-03-03 09:45</div>
            <div class="timeline-body"><blockquote>
<p>The . is superfluous in all of these examples, that's the default behavior these days.</p>
</blockquote>
<p>I chose to use the <code>.</code> to be consistent with the rest of the documentation (for example, see <a href="https://docs.astral.sh/ruff/tutorial/">the tutorial page</a>). If it's better to remove the <code>.</code>, then I can open another PR to remove it from the rest of the documentation, what do you think ?</p>
<blockquote>
<p>We're using extend-select in all of the other examples, why use --select here?</p>
</blockquote>
<p>It was a mistake, I fixed it in 9f5d9bcdf.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/hoel-bagard">@hoel-bagard</a> on <code>docs/preview.md</code>:64 on 2024-03-03 09:48</div>
            <div class="timeline-body"><p>Done in 9b6b7bd19.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hoel-bagard">@hoel-bagard</a> reviewed on 2024-03-03 09:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-03-03 10:07</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/buhtz">@buhtz</a> reviewed on 2024-03-03 11:18</div>
            <div class="timeline-body"><p>I like that solution.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-03-03 15:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>docs/preview.md</code>:83 on 2024-03-03 15:17</div>
            <div class="timeline-body"><p>Sure we can address that separately, thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hoel-bagard">@hoel-bagard</a> reviewed on 2024-03-03 23:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/hoel-bagard">@hoel-bagard</a> on <code>docs/preview.md</code>:83 on 2024-03-03 23:27</div>
            <div class="timeline-body"><p>Ok, I'll do that then. I've removed the <code>.</code> in this commit <a href="https://github.com/astral-sh/ruff/pull/10168/commits/356c4b0580f63a918936a04b061b6503a28470d0">356c4b0</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2024-03-05 03:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-03-05 03:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 22:47:53 UTC
    </footer>
</body>
</html>
