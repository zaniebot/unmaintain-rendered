<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`isort`] Omit trailing whitespace in `unsorted-imports` (`I001`) - astral-sh/ruff #15518</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>isort</code>] Omit trailing whitespace in <code>unsorted-imports</code> (<code>I001</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/15518">#15518</a>
        opened by <a href="https://github.com/dylwil3">@dylwil3</a>
        on 2025-01-15 22:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-01-15 22:28</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>The fix range for sorting imports accounts for trailing whitespace, but we should only show the trimmed range to the user when displaying the diagnostic. So this PR changes the diagnostic range.</p>
<p>Closes #15504</p>
<h2>Test Plan</h2>
<p>Reviewed snapshot changes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by @dylwil3 on 2025-01-15 22:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-01-15 22:30</div>
            <div class="timeline-body"><p>Questions:</p>
<ol>
<li>Is it kosher to have the fix range larger than the diagnostic range? Is there some logic that assumes containment goes the other way?</li>
<li>Is this a breaking change because of suppression comments?</li>
<li>Would you like me to include end of line comments?</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @dylwil3 on 2025-01-15 22:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-01-15 22:34</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+5 -5 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+5 -5 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/gapminder/data.py#L5'>examples/server/app/gapminder/data.py:5:1:</a> I001 [*] Import block is un-sorted or un-formatted
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/gapminder/data.py#L5'>examples/server/app/gapminder/data.py:5:5:</a> I001 [*] Import block is un-sorted or un-formatted
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/model/model.py#L46'>src/bokeh/model/model.py:46:1:</a> I001 [*] Import block is un-sorted or un-formatted
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/model/model.py#L46'>src/bokeh/model/model.py:46:5:</a> I001 [*] Import block is un-sorted or un-formatted
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/model/util.py#L167'>src/bokeh/model/util.py:167:1:</a> I001 [*] Import block is un-sorted or un-formatted
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/model/util.py#L167'>src/bokeh/model/util.py:167:5:</a> I001 [*] Import block is un-sorted or un-formatted
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/connection.py#L28'>src/bokeh/server/connection.py:28:1:</a> I001 [*] Import block is un-sorted or un-formatted
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/connection.py#L28'>src/bokeh/server/connection.py:28:5:</a> I001 [*] Import block is un-sorted or un-formatted
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/test_cross.py#L34'>tests/test_cross.py:34:1:</a> I001 [*] Import block is un-sorted or un-formatted
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/test_cross.py#L34'>tests/test_cross.py:34:5:</a> I001 [*] Import block is un-sorted or un-formatted
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| I001 | 10 | 5 | 5 | 0 | 0 |</p>
</p>
</details>

<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+5 -5 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+5 -5 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/gapminder/data.py#L5'>examples/server/app/gapminder/data.py:5:1:</a> I001 [*] Import block is un-sorted or un-formatted
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/gapminder/data.py#L5'>examples/server/app/gapminder/data.py:5:5:</a> I001 [*] Import block is un-sorted or un-formatted
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/model/model.py#L46'>src/bokeh/model/model.py:46:1:</a> I001 [*] Import block is un-sorted or un-formatted
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/model/model.py#L46'>src/bokeh/model/model.py:46:5:</a> I001 [*] Import block is un-sorted or un-formatted
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/model/util.py#L167'>src/bokeh/model/util.py:167:1:</a> I001 [*] Import block is un-sorted or un-formatted
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/model/util.py#L167'>src/bokeh/model/util.py:167:5:</a> I001 [*] Import block is un-sorted or un-formatted
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/connection.py#L28'>src/bokeh/server/connection.py:28:1:</a> I001 [*] Import block is un-sorted or un-formatted
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/server/connection.py#L28'>src/bokeh/server/connection.py:28:5:</a> I001 [*] Import block is un-sorted or un-formatted
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/test_cross.py#L34'>tests/test_cross.py:34:1:</a> I001 [*] Import block is un-sorted or un-formatted
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/tests/test_cross.py#L34'>tests/test_cross.py:34:5:</a> I001 [*] Import block is un-sorted or un-formatted
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| I001 | 10 | 5 | 5 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @dylwil3 on 2025-01-15 22:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/isort/snapshots/ruff_linter__rules__isort__tests__force_single_line_force_single_line.py.snap</code>:32 on 2025-01-16 06:19</div>
            <div class="timeline-body"><p>Not strictly incorrect but I think I liked the old one better</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-01-16 06:21</div>
            <div class="timeline-body"><p>Thanks.</p>
<p>I kind of liked that the old range included the entire line instead of just the expression range. It would be nice if we can preserve that behavior</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_linter/src/rules/isort/snapshots/ruff_linter__rules__isort__tests__force_single_line_force_single_line.py.snap</code>:32 on 2025-01-16 15:56</div>
            <div class="timeline-body"><p>I think I like the new one since it's a little more specific. But I do feel like the old one is more aesthetically pleasing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_linter/src/rules/isort/snapshots/ruff_linter__rules__isort__tests__lines_after_imports.pyi.snap</code>:15 on 2025-01-16 15:56</div>
            <div class="timeline-body"><p>Nice!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_linter/src/rules/isort/snapshots/ruff_linter__rules__isort__tests__skip.py.snap</code>:51 on 2025-01-16 15:57</div>
            <div class="timeline-body"><p>Another nice improvement I think.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2025-01-16 15:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dylwil3">@dylwil3</a> reviewed on 2025-01-18 17:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dylwil3">@dylwil3</a> on <code>crates/ruff_linter/src/rules/isort/snapshots/ruff_linter__rules__isort__tests__force_single_line_force_single_line.py.snap</code>:32 on 2025-01-18 17:08</div>
            <div class="timeline-body"><p>I think I agree that the new behavior feels more &quot;correct&quot; about where the actual violation is, so I think I'll break the tie in favor of the smaller range. Happy to do a follow up if the community doesn't like it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dylwil3 on 2025-01-18 17:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dylwil3 on 2025-01-18 17:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 20:06:10 UTC
    </footer>
</body>
</html>
