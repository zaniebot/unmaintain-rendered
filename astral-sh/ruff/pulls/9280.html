<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Normalise Hex and unicode escape sequences in string - astral-sh/ruff #9280</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Normalise Hex and unicode escape sequences in string</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/9280">#9280</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2023-12-26 03:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-12-26 03:56</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR implements Black's <code>hex_codes_in_unicode_sequences</code> preview style that normalises escape sequences:</p>
<ul>
<li><code>\u</code>, <code>\U</code> in non-byte literals: To use lower-case characters (<code>A-F</code> -&gt; <code>a-f</code>)</li>
<li><code>\x</code>: To use lower-case characters (<code>A-F</code> -&gt; <code>a-f</code>)</li>
<li><code>\N</code> in non-byte literals: To use uppercase characters</li>
</ul>
<p>Using lowercase characters for hex escape sequences is consistent to Python's <code>repr</code>.
But it has the downside that it is inconsistent with how we (and Black) format numbers in hexadecimal notations: <code>0xAF</code>.
Using lowercase characters is the right choise in my view and I'm leaning towards changing number literals to use lower case too.
But we need to be careful with this because it seems black changed <a href="https://github.com/psf/black/pull/2916#discussion_r827593743">their preference a few times in the past</a>.</p>
<p>Part of #8678</p>
<h2>Test Plan</h2>
<ul>
<li><code>cargo test</code></li>
<li>The similarity index numbers are unchanged.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @MichaReiser on 2023-12-26 03:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @MichaReiser on 2023-12-26 03:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2023-12-26 03:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_python_formatter/src/string/mod.rs</code>:867 on 2023-12-26 03:59</div>
            <div class="timeline-body"><p>I tried to avoid the allocation here when the string needs to be normalized, but making it work with the outer <code>normalize_string</code> was somewhat complicated (relative string indices, different iterators etc). That's why I decided to accept the allocation here, considering that we only allocate for non-normalised (unformatted) escape sequences (rare).</p>
<p>There's also the case that we need to be able to recover in case the escape sequence is invalid, which means we can't perform the normalisation in place (and directly push to the outer <code>output</code> <code>String</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2023-12-26 03:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_python_formatter/src/string/mod.rs</code>:869 on 2023-12-26 03:59</div>
            <div class="timeline-body"><p>This turned out more complicated than I hoped it would. Maybe a candidate to use a Regex? But I also think it's not worth bothering much. It's relatively straightforward code and I don't expect many changes to it,</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-12-26 04:05</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Formatter (stable)</h3>
<p>ℹ️ ecosystem check <strong>encountered format errors</strong>. (no format changes; 2 project errors)</p>
<details><summary><a href="https://github.com/pypa/setuptools">pypa/setuptools</a> (error)</summary>
<p>

<pre><code>ruff failed
  Cause: 'quote-style = preserve' is a preview only feature. Run with '--preview' to enable it.
</code></pre>
</p>
</details>
<details><summary><a href="https://github.com/sphinx-doc/sphinx">sphinx-doc/sphinx</a> (error)</summary>
<p>

<pre><code>warning: Selection of nursery rule `E211` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E273` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E228` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E117` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E262` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E223` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E112` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E203` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E116` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E221` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E227` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E242` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E271` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E275` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E261` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E222` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E111` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E202` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E115` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E226` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E231` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E241` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E224` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E113` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E252` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E265` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E272` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E274` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E266` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E225` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E201` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E114` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E211` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E273` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E228` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E117` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E262` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E223` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E112` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E203` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E116` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E221` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E227` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E242` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E271` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E275` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E261` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E222` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E111` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E202` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E115` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E226` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E231` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E241` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E224` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E113` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E252` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E265` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E272` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E274` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E266` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E225` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E201` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E114` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E211` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E273` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E228` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E117` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E262` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E223` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E112` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E203` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E116` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E221` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E227` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E242` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E271` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E275` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E261` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E222` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E111` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E202` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E115` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E226` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E231` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E241` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E224` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E113` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E252` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E265` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E272` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E274` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E266` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E225` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E201` without the `--preview` flag is deprecated.
warning: Selection of nursery rule `E114` without the `--preview` flag is deprecated.
warning: The following rules may cause conflicts when used with the formatter: `COM812`. To avoid unexpected behavior, we recommend disabling these rules, either by removing them from the `select` or `extend-select` configuration, or adding them to the `ignore` configuration.
warning: The `flake8-quotes.inline-quotes=&quot;single&quot;` option is incompatible with the formatter's `format.quote-style=&quot;double&quot;`. We recommend disabling `Q000` and `Q003` when using the formatter, which enforces a consistent quote style. Alternatively, set both options to either `&quot;single&quot;` or `&quot;double&quot;`.
warning: Detected debug build without --no-cache.
error: Failed to read tests/roots/test-pycode/cp_1251_coded.py: stream did not contain valid UTF-8
</code></pre>
</p>
</details>

<h3>Formatter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected format changes</strong>. (+101 -101 lines in 26 files in 9 projects; 1 project error; 31 projects unchanged)</p>
<details><summary><a href="https://github.com/DisnakeDev/disnake">DisnakeDev/disnake</a> (+8 -8 lines across 2 files)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<p><a href='https://github.com/DisnakeDev/disnake/blob/f780cf5d7320210f022eba0d0e4e8b2820db2baa/disnake/utils.py#L484'>disnake/utils.py~L484</a></p>
<pre><code class="language-diff"> 
 
 def _get_mime_type_for_image(data: _BytesLike) -&gt; str:
-    if data[0:8] == b&quot;\x89\x50\x4E\x47\x0D\x0A\x1A\x0A&quot;:
+    if data[0:8] == b&quot;\x89\x50\x4e\x47\x0d\x0a\x1a\x0a&quot;:
         return &quot;image/png&quot;
     elif data[0:3] == b&quot;\xff\xd8\xff&quot; or data[6:10] in (b&quot;JFIF&quot;, b&quot;Exif&quot;):
         return &quot;image/jpeg&quot;
</code></pre>
<p><a href='https://github.com/DisnakeDev/disnake/blob/f780cf5d7320210f022eba0d0e4e8b2820db2baa/tests/test_utils.py#L241'>tests/test_utils.py~L241</a></p>
<pre><code class="language-diff"> @pytest.mark.parametrize(
     (&quot;data&quot;, &quot;expected_mime&quot;, &quot;expected_ext&quot;),
     [
-        (b&quot;\x89\x50\x4E\x47\x0D\x0A\x1A\x0A&quot;, &quot;image/png&quot;, &quot;.png&quot;),
-        (b&quot;\xFF\xD8\xFFxxxJFIF&quot;, &quot;image/jpeg&quot;, &quot;.jpg&quot;),
-        (b&quot;\xFF\xD8\xFFxxxExif&quot;, &quot;image/jpeg&quot;, &quot;.jpg&quot;),
-        (b&quot;\xFF\xD8\xFFxxxxxxxxxxxx&quot;, &quot;image/jpeg&quot;, &quot;.jpg&quot;),
+        (b&quot;\x89\x50\x4e\x47\x0d\x0a\x1a\x0a&quot;, &quot;image/png&quot;, &quot;.png&quot;),
+        (b&quot;\xff\xd8\xffxxxJFIF&quot;, &quot;image/jpeg&quot;, &quot;.jpg&quot;),
+        (b&quot;\xff\xd8\xffxxxExif&quot;, &quot;image/jpeg&quot;, &quot;.jpg&quot;),
+        (b&quot;\xff\xd8\xffxxxxxxxxxxxx&quot;, &quot;image/jpeg&quot;, &quot;.jpg&quot;),
         (b&quot;xxxxxxJFIF&quot;, &quot;image/jpeg&quot;, &quot;.jpg&quot;),
         (b&quot;\x47\x49\x46\x38\x37\x61&quot;, &quot;image/gif&quot;, &quot;.gif&quot;),
         (b&quot;\x47\x49\x46\x38\x39\x61&quot;, &quot;image/gif&quot;, &quot;.gif&quot;),
</code></pre>
<p><a href='https://github.com/DisnakeDev/disnake/blob/f780cf5d7320210f022eba0d0e4e8b2820db2baa/tests/test_utils.py#L252'>tests/test_utils.py~L252</a></p>
<pre><code class="language-diff">     ],
 )
 def test_mime_type_valid(data, expected_mime, expected_ext) -&gt; None:
-    for d in (data, data + b&quot;\xFF&quot;):
+    for d in (data, data + b&quot;\xff&quot;):
         assert utils._get_mime_type_for_image(d) == expected_mime
         assert utils._get_extension_for_image(d) == expected_ext
 
-    prefixed = b&quot;\xFF&quot; + data
+    prefixed = b&quot;\xff&quot; + data
     with pytest.raises(ValueError, match=r&quot;Unsupported image type given&quot;):
         utils._get_mime_type_for_image(prefixed)
     assert utils._get_extension_for_image(prefixed) is None
</code></pre>
<p><a href='https://github.com/DisnakeDev/disnake/blob/f780cf5d7320210f022eba0d0e4e8b2820db2baa/tests/test_utils.py#L265'>tests/test_utils.py~L265</a></p>
<pre><code class="language-diff"> @pytest.mark.parametrize(
     &quot;data&quot;,
     [
-        b&quot;\x89\x50\x4E\x47\x0D\x0A\x1A\xFF&quot;,  # invalid png end
+        b&quot;\x89\x50\x4e\x47\x0d\x0a\x1a\xff&quot;,  # invalid png end
         b&quot;\x47\x49\x46\x38\x38\x61&quot;,  # invalid gif version
         b&quot;RIFFxxxxAAAA&quot;,
         b&quot;AAAAxxxxWEBP&quot;,
</code></pre>
</p>
</details>
<details><summary><a href="https://github.com/RasaHQ/rasa">RasaHQ/rasa</a> (+6 -6 lines across 1 file)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<p><a href='https://github.com/RasaHQ/rasa/blob/cca30d4e06af5aba177e916d64c60313fc537005/rasa/utils/io.py#L220'>rasa/utils/io.py~L220</a></p>
<pre><code class="language-diff">     &quot;&quot;&quot;Returns regex to identify emojis.&quot;&quot;&quot;
     return re.compile(
         &quot;[&quot;
-        &quot;\U0001F600-\U0001F64F&quot;  # emoticons
-        &quot;\U0001F300-\U0001F5FF&quot;  # symbols &amp; pictographs
-        &quot;\U0001F680-\U0001F6FF&quot;  # transport &amp; map symbols
-        &quot;\U0001F1E0-\U0001F1FF&quot;  # flags (iOS)
-        &quot;\U00002702-\U000027B0&quot;
-        &quot;\U000024C2-\U0001F251&quot;
+        &quot;\U0001f600-\U0001f64f&quot;  # emoticons
+        &quot;\U0001f300-\U0001f5ff&quot;  # symbols &amp; pictographs
+        &quot;\U0001f680-\U0001f6ff&quot;  # transport &amp; map symbols
+        &quot;\U0001f1e0-\U0001f1ff&quot;  # flags (iOS)
+        &quot;\U00002702-\U000027b0&quot;
+        &quot;\U000024c2-\U0001f251&quot;
         &quot;\u200d&quot;  # zero width joiner
         &quot;\u200c&quot;  # zero width non-joiner
         &quot;]+&quot;,
</code></pre>
</p>
</details>
<details><summary><a href="https://github.com/aws/aws-sam-cli">aws/aws-sam-cli</a> (+1 -1 lines across 1 file)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<p><a href='https://github.com/aws/aws-sam-cli/blob/034e027b4010a709d101a035fa41813c63bc790e/samcli/lib/package/stream_cursor_utils.py#L7'>samcli/lib/package/stream_cursor_utils.py~L7</a></p>
<pre><code class="language-diff"> 
 # NOTE: ANSI escape codes.
 # NOTE: Still needs investigation on non terminal environments.
-ESC = &quot;\u001B[&quot;
+ESC = &quot;\u001b[&quot;
 
 # Enables ANSI escape codes on Windows
 if platform.system().lower() == &quot;windows&quot;:
</code></pre>
</p>
</details>
<details><summary><a href="https://github.com/commaai/openpilot">commaai/openpilot</a> (+33 -33 lines across 5 files)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<p><a href='https://github.com/commaai/openpilot/blob/6810c5b644fe898d87b5bddce67f8ab7dfc100c1/selfdrive/car/honda/carcontroller.py#L160'>selfdrive/car/honda/carcontroller.py~L160</a></p>
<pre><code class="language-diff">         # tester present - w/ no response (keeps radar disabled)
         if self.CP.carFingerprint in (HONDA_BOSCH - HONDA_BOSCH_RADARLESS) and self.CP.openpilotLongitudinalControl:
             if self.frame % 10 == 0:
-                can_sends.append((0x18DAB0F1, 0, b&quot;\x02\x3E\x80\x00\x00\x00\x00\x00&quot;, 1))
+                can_sends.append((0x18DAB0F1, 0, b&quot;\x02\x3e\x80\x00\x00\x00\x00\x00&quot;, 1))
 
         # Send steering command.
         can_sends.append(hondacan.create_steering_control(self.packer, apply_steer, CC.latActive, self.CP.carFingerprint, CS.CP.openpilotLongitudinalControl))
</code></pre>
<p><a href='https://github.com/commaai/openpilot/blob/6810c5b644fe898d87b5bddce67f8ab7dfc100c1/selfdrive/car/hyundai/carcontroller.py#L95'>selfdrive/car/hyundai/carcontroller.py~L95</a></p>
<pre><code class="language-diff">             addr, bus = 0x7D0, 0
             if self.CP.flags &amp; HyundaiFlags.CANFD_HDA2.value:
                 addr, bus = 0x730, self.CAN.ECAN
-            can_sends.append([addr, 0, b&quot;\x02\x3E\x80\x00\x00\x00\x00\x00&quot;, bus])
+            can_sends.append([addr, 0, b&quot;\x02\x3e\x80\x00\x00\x00\x00\x00&quot;, bus])
 
             # for blinkers
             if self.CP.flags &amp; HyundaiFlags.ENABLE_BLINKERS:
-                can_sends.append([0x7B1, 0, b&quot;\x02\x3E\x80\x00\x00\x00\x00\x00&quot;, self.CAN.ECAN])
+                can_sends.append([0x7B1, 0, b&quot;\x02\x3e\x80\x00\x00\x00\x00\x00&quot;, self.CAN.ECAN])
 
         # CAN-FD platforms
         if self.CP.carFingerprint in CANFD_CAR:
</code></pre>
<p><a href='https://github.com/commaai/openpilot/blob/6810c5b644fe898d87b5bddce67f8ab7dfc100c1/selfdrive/car/subaru/carcontroller.py#L168'>selfdrive/car/subaru/carcontroller.py~L168</a></p>
<pre><code class="language-diff">             if self.CP.flags &amp; SubaruFlags.DISABLE_EYESIGHT:
                 # Tester present (keeps eyesight disabled)
                 if self.frame % 100 == 0:
-                    can_sends.append([GLOBAL_ES_ADDR, 0, b&quot;\x02\x3E\x80\x00\x00\x00\x00\x00&quot;, CanBus.camera])
+                    can_sends.append([GLOBAL_ES_ADDR, 0, b&quot;\x02\x3e\x80\x00\x00\x00\x00\x00&quot;, CanBus.camera])
 
                 # Create all of the other eyesight messages to keep the rest of the car happy when eyesight is disabled
                 if self.frame % 5 == 0:
</code></pre>
<p><a href='https://github.com/commaai/openpilot/blob/6810c5b644fe898d87b5bddce67f8ab7dfc100c1/selfdrive/car/toyota/carcontroller.py#L205'>selfdrive/car/toyota/carcontroller.py~L205</a></p>
<pre><code class="language-diff"> 
         # keep radar disabled
         if self.frame % 20 == 0 and self.CP.flags &amp; ToyotaFlags.DISABLE_RADAR.value:
-            can_sends.append([0x750, 0, b&quot;\x0F\x02\x3E\x00\x00\x00\x00\x00&quot;, 0])
+            can_sends.append([0x750, 0, b&quot;\x0f\x02\x3e\x00\x00\x00\x00\x00&quot;, 0])
 
         new_actuators = actuators.copy()
         new_actuators.steer = apply_steer / self.params.STEER_MAX
</code></pre>
<p><a href='https://github.com/commaai/openpilot/blob/6810c5b644fe898d87b5bddce67f8ab7dfc100c1/system/sensord/pigeond.py#L65'>system/sensord/pigeond.py~L65</a></p>
<pre><code class="language-diff">     # split up messages
     msgs = []
     while len(dat) &gt; 0:
-        assert dat[:2] == b&quot;\xB5\x62&quot;
+        assert dat[:2] == b&quot;\xb5\x62&quot;
         msg_len = 6 + (dat[5] &lt;&lt; 8 | dat[4]) + 2
         msgs.append(dat[:msg_len])
         dat = dat[msg_len:]
</code></pre>
<p><a href='https://github.com/commaai/openpilot/blob/6810c5b644fe898d87b5bddce67f8ab7dfc100c1/system/sensord/pigeond.py#L136'>system/sensord/pigeond.py~L136</a></p>
<pre><code class="language-diff">             self.send_with_ack(b&quot;\xb5\x62\x06\x09\x0d\x00\x1f\x1f\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x17\x71\xd7&quot;)
 
             # clear flash memory (almanac backup)
-            self.send_with_ack(b&quot;\xB5\x62\x09\x14\x04\x00\x01\x00\x00\x00\x22\xf0&quot;)
+            self.send_with_ack(b&quot;\xb5\x62\x09\x14\x04\x00\x01\x00\x00\x00\x22\xf0&quot;)
 
             # try restoring backup to verify it got deleted
-            self.send(b&quot;\xB5\x62\x09\x14\x00\x00\x1D\x60&quot;)
+            self.send(b&quot;\xb5\x62\x09\x14\x00\x00\x1d\x60&quot;)
             # 1: failed to restore, 2: could restore, 3: no backup
             status = self.wait_for_backup_restore_status()
             if status == 1 or status == 3:
</code></pre>
<p><a href='https://github.com/commaai/openpilot/blob/6810c5b644fe898d87b5bddce67f8ab7dfc100c1/system/sensord/pigeond.py#L152'>system/sensord/pigeond.py~L152</a></p>
<pre><code class="language-diff">     pigeon.set_baud(9600)
 
     # $PUBX,41,1,0007,0003,460800,0*15\r\n
-    pigeon.send(b&quot;\x24\x50\x55\x42\x58\x2C\x34\x31\x2C\x31\x2C\x30\x30\x30\x37\x2C\x30\x30\x30\x33\x2C\x34\x36\x30\x38\x30\x30\x2C\x30\x2A\x31\x35\x0D\x0A&quot;)
+    pigeon.send(b&quot;\x24\x50\x55\x42\x58\x2c\x34\x31\x2c\x31\x2c\x30\x30\x30\x37\x2c\x30\x30\x30\x33\x2c\x34\x36\x30\x38\x30\x30\x2c\x30\x2a\x31\x35\x0d\x0a&quot;)
     time.sleep(0.1)
     pigeon.set_baud(460800)
 
</code></pre>
<p><a href='https://github.com/commaai/openpilot/blob/6810c5b644fe898d87b5bddce67f8ab7dfc100c1/system/sensord/pigeond.py#L162'>system/sensord/pigeond.py~L162</a></p>
<pre><code class="language-diff">     for _ in range(10):
         try:
             # setup port config
-            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x14\x00\x03\xFF\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x01\x00\x00\x00\x00\x00\x1E\x7F&quot;)
-            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x14\x00\x00\xFF\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x19\x35&quot;)
-            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x14\x00\x01\x00\x00\x00\xC0\x08\x00\x00\x00\x08\x07\x00\x01\x00\x01\x00\x00\x00\x00\x00\xF4\x80&quot;)
-            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x14\x00\x04\xFF\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1D\x85&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x14\x00\x03\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x01\x00\x00\x00\x00\x00\x1e\x7f&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x14\x00\x00\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x19\x35&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x14\x00\x01\x00\x00\x00\xc0\x08\x00\x00\x00\x08\x07\x00\x01\x00\x01\x00\x00\x00\x00\x00\xf4\x80&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x14\x00\x04\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x1d\x85&quot;)
             pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x00\x00\x06\x18&quot;)
             pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x01\x00\x01\x08\x22&quot;)
-            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x01\x00\x03\x0A\x24&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x00\x01\x00\x03\x0a\x24&quot;)
 
             # UBX-CFG-RATE (0x06 0x08)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x08\x06\x00\x64\x00\x01\x00\x00\x00\x79\x10&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x08\x06\x00\x64\x00\x01\x00\x00\x00\x79\x10&quot;)
 
             # UBX-CFG-NAV5 (0x06 0x24)
             pigeon.send_with_ack(
-                b&quot;\xB5\x62\x06\x24\x24\x00\x05\x00\x04\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x5A\x63&quot;
+                b&quot;\xb5\x62\x06\x24\x24\x00\x05\x00\x04\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x5a\x63&quot;
             )
 
             # UBX-CFG-ODO (0x06 0x1E)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x1E\x14\x00\x00\x00\x00\x00\x01\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x3C\x37&quot;)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x39\x08\x00\xFF\xAD\x62\xAD\x1E\x63\x00\x00\x83\x0C&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x1e\x14\x00\x00\x00\x00\x00\x01\x03\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x3c\x37&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x39\x08\x00\xff\xad\x62\xad\x1e\x63\x00\x00\x83\x0c&quot;)
             pigeon.send_with_ack(
-                b&quot;\xB5\x62\x06\x23\x28\x00\x00\x00\x00\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x56\x24&quot;
+                b&quot;\xb5\x62\x06\x23\x28\x00\x00\x00\x00\x04\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x56\x24&quot;
             )
 
             # UBX-CFG-NAV5 (0x06 0x24)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x24\x00\x00\x2A\x84&quot;)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x23\x00\x00\x29\x81&quot;)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x1E\x00\x00\x24\x72&quot;)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x39\x00\x00\x3F\xC3&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x24\x00\x00\x2a\x84&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x23\x00\x00\x29\x81&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x1e\x00\x00\x24\x72&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x39\x00\x00\x3f\xc3&quot;)
 
             # UBX-CFG-MSG (set message rate)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x01\x03\x00\x01\x07\x01\x13\x51&quot;)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x01\x03\x00\x02\x15\x01\x22\x70&quot;)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x01\x03\x00\x02\x13\x01\x20\x6C&quot;)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x01\x03\x00\x0A\x09\x01\x1E\x70&quot;)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x01\x03\x00\x0A\x0B\x01\x20\x74&quot;)
-            pigeon.send_with_ack(b&quot;\xB5\x62\x06\x01\x03\x00\x01\x35\x01\x41\xAD&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x01\x03\x00\x01\x07\x01\x13\x51&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x01\x03\x00\x02\x15\x01\x22\x70&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x01\x03\x00\x02\x13\x01\x20\x6c&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x01\x03\x00\x0a\x09\x01\x1e\x70&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x01\x03\x00\x0a\x0b\x01\x20\x74&quot;)
+            pigeon.send_with_ack(b&quot;\xb5\x62\x06\x01\x03\x00\x01\x35\x01\x41\xad&quot;)
             cloudlog.debug(&quot;pigeon configured&quot;)
 
             # try restoring almanac backup
-            pigeon.send(b&quot;\xB5\x62\x09\x14\x00\x00\x1D\x60&quot;)
+            pigeon.send(b&quot;\xb5\x62\x09\x14\x00\x00\x1d\x60&quot;)
             restore_status = pigeon.wait_for_backup_restore_status()
             if restore_status == 2:
                 cloudlog.warning(&quot;almanac backup restored&quot;)
</code></pre>
<p><a href='https://github.com/commaai/openpilot/blob/6810c5b644fe898d87b5bddce67f8ab7dfc100c1/system/sensord/pigeond.py#L217'>system/sensord/pigeond.py~L217</a></p>
<pre><code class="language-diff"> 
                 # UBX-MGA-INI-TIME_UTC
                 msg = add_ubx_checksum(
-                    b&quot;\xB5\x62\x13\x40\x18\x00&quot;
+                    b&quot;\xb5\x62\x13\x40\x18\x00&quot;
                     + struct.pack(
                         &quot;&lt;BBBBHBBBBBxIHxxI&quot;, 0x10, 0x00, 0x00, 0x80, t_now.year, t_now.month, t_now.day, t_now.hour, t_now.minute, t_now.second, 0, 30, 0
                     )
</code></pre>
<p><a href='https://github.com/commaai/openpilot/blob/6810c5b644fe898d87b5bddce67f8ab7dfc100c1/system/sensord/pigeond.py#L249'>system/sensord/pigeond.py~L249</a></p>
<pre><code class="language-diff"> 
     if pigeon is not None:
         # controlled GNSS stop
-        pigeon.send(b&quot;\xB5\x62\x06\x04\x04\x00\x00\x00\x08\x00\x16\x74&quot;)
+        pigeon.send(b&quot;\xb5\x62\x06\x04\x04\x00\x00\x00\x08\x00\x16\x74&quot;)
 
         # store almanac in flash
-        pigeon.send(b&quot;\xB5\x62\x09\x14\x04\x00\x00\x00\x00\x00\x21\xEC&quot;)
+        pigeon.send(b&quot;\xb5\x62\x09\x14\x04\x00\x00\x00\x00\x00\x21\xec&quot;)
         try:
             if pigeon.wait_for_ack(ack=UBLOX_SOS_ACK, nack=UBLOX_SOS_NACK):
                 cloudlog.warning(&quot;Done storing almanac&quot;)
</code></pre>
</p>
</details>
<details><summary><a href="https://github.com/demisto/content">demisto/content</a> (+37 -37 lines across 6 files)</summary>
<p>
<pre>ruff format --preview --exclude Packs/ThreatQ/Integrations/ThreatQ/ThreatQ.py</pre>
</p>
<p>

<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool.py#L1042'>Packs/CommonScripts/Scripts/BMCTool/BMCTool.py~L1042</a></p>
<pre><code class="language-diff">         ))
     )
     COLOR_BLACK = b&quot;\x00&quot;
-    COLOR_WHITE = b&quot;\xFF&quot;
+    COLOR_WHITE = b&quot;\xff&quot;
 
     def __init__(self, verbose=False, count=0, old=False, big=False, width=64):
         self.bdat = b&quot;&quot;
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool.py#L1200'>Packs/CommonScripts/Scripts/BMCTool/BMCTool.py~L1200</a></p>
<pre><code class="language-diff">         d_buf = b&quot;&quot;
         while len(data) &gt; 0:
             if self.btype == self.BIN_CONTAINER:
-                d_buf += data[:3] + b&quot;\xFF&quot;
+                d_buf += data[:3] + b&quot;\xff&quot;
                 if len(d_buf) == 256:
                     d_out = d_buf + d_out
                     d_buf = b&quot;&quot;
             else:
-                d_out += data[:3] + b&quot;\xFF&quot;
+                d_out += data[:3] + b&quot;\xff&quot;
             data = data[4:]
         return d_out
 
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool.py#L1214'>Packs/CommonScripts/Scripts/BMCTool/BMCTool.py~L1214</a></p>
<pre><code class="language-diff">         d_buf = b&quot;&quot;
         while len(data) &gt; 0:
             if self.btype == self.BIN_CONTAINER:
-                d_buf += data[:3] + b&quot;\xFF&quot;
+                d_buf += data[:3] + b&quot;\xff&quot;
                 if len(d_buf) == 256:
                     d_out = d_buf + d_out
                     d_buf = b&quot;&quot;
             else:
-                d_out += data[:3] + b&quot;\xFF&quot;
+                d_out += data[:3] + b&quot;\xff&quot;
             data = data[3:]
         return d_out
 
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool.py#L1385'>Packs/CommonScripts/Scripts/BMCTool/BMCTool.py~L1385</a></p>
<pre><code class="language-diff"> 
         self.b_log(&quot;info&quot;, False, f&quot;Successfully exported {len(self.bmps)} files.&quot;)
         if self.big:
-            pad: bytes = b&quot;\xFF&quot;
+            pad: bytes = b&quot;\xff&quot;
             if not self.pal:
                 pad *= 4
             for i in range(len(self.bmps)):
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool.py#L1427'>Packs/CommonScripts/Scripts/BMCTool/BMCTool.py~L1427</a></p>
<pre><code class="language-diff">             return (
                 b&quot;BM&quot;
                 + pack(&quot;&lt;L&quot;, len(data) + 122)
-                + b&quot;\x00\x00\x00\x00\x7A\x00\x00\x00\x6C\x00\x00\x00&quot;
+                + b&quot;\x00\x00\x00\x00\x7a\x00\x00\x00\x6c\x00\x00\x00&quot;
                 + pack(&quot;&lt;L&quot;, width)
                 + pack(&quot;&lt;L&quot;, height)
                 + b&quot;\x01\x00\x20\x00\x03\x00\x00\x00&quot;
                 + pack(&quot;&lt;L&quot;, len(data))
-                + b&quot;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xFF\x00\x00\xFF\x00\x00\xFF\x00\x00\x00\x00\x00\x00\xFF niW&quot;
+                + b&quot;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00\x00\x00\x00\x00\xff niW&quot;
                 + (  # noqa: E501
                     b&quot;\x00&quot; * 36
                 )
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py#L1108'>Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py~L1108</a></p>
<pre><code class="language-diff"> @pytest.mark.parametrize(
     &quot;data, expected_output&quot;,
     [
-        (b&quot;\xFF\xE0\x07\x1F\xF8\x00&quot;, b&quot;\xff\x1c\xe7\xff9\xe3\x18\xff\xc6\x1c\x00\xff&quot;),
+        (b&quot;\xff\xe0\x07\x1f\xf8\x00&quot;, b&quot;\xff\x1c\xe7\xff9\xe3\x18\xff\xc6\x1c\x00\xff&quot;),
         (b&quot;\x00\x00\x00\x00&quot;, b&quot;\x00\x00\x00\xff\x00\x00\x00\xff&quot;),
     ],
 )
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py#L1131'>Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py~L1131</a></p>
<pre><code class="language-diff"> @pytest.mark.parametrize(
     &quot;data, expected_output, btype&quot;,
     [
-        (b&quot;\xFF\x00\x00\xFF\x00\x00\xFF\x00\x00\xFF\x00\x00&quot;, b&quot;&quot;, BMCContainer.BIN_CONTAINER),
+        (b&quot;\xff\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00&quot;, b&quot;&quot;, BMCContainer.BIN_CONTAINER),
         (
-            b&quot;\xFF\x00\x00\xFF\x00\x00\xFF\x00\x00\xFF\x00\x00&quot;,
+            b&quot;\xff\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00&quot;,
             b&quot;\xff\x00\x00\xff\x00\x00\xff\xff\x00\xff\x00\xff&quot;,
             BMCContainer.BMC_CONTAINER,
         ),
-        (b&quot;\xFF\x00\x00&quot;, b&quot;&quot;, BMCContainer.BIN_CONTAINER),
-        (b&quot;\xFF\x00\x00&quot;, b&quot;\xFF\x00\x00\xFF&quot;, BMCContainer.BMC_CONTAINER),
+        (b&quot;\xff\x00\x00&quot;, b&quot;&quot;, BMCContainer.BIN_CONTAINER),
+        (b&quot;\xff\x00\x00&quot;, b&quot;\xff\x00\x00\xff&quot;, BMCContainer.BMC_CONTAINER),
     ],
 )
 def test_b_parse_rgb32b(data, expected_output, btype):
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py#L1155'>Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py~L1155</a></p>
<pre><code class="language-diff"> @pytest.mark.parametrize(
     &quot;data, expected_output, btype&quot;,
     [
-        (b&quot;\xFF\x00\x00\xFF\x00\x00\xFF\x00\x00\xFF\x00\x00&quot;, b&quot;&quot;, BMCContainer.BIN_CONTAINER),
+        (b&quot;\xff\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00&quot;, b&quot;&quot;, BMCContainer.BIN_CONTAINER),
         (
-            b&quot;\xFF\x00\x00\xFF\x00\x00\xFF\x00\x00\xFF\x00\x00&quot;,
+            b&quot;\xff\x00\x00\xff\x00\x00\xff\x00\x00\xff\x00\x00&quot;,
             b&quot;\xff\x00\x00\xff\xff\x00\x00\xff\xff\x00\x00\xff\xff\x00\x00\xff&quot;,
             BMCContainer.BMC_CONTAINER,
         ),
-        (b&quot;\xFF\x00\x00\xFF\x00\x00\xFF\x00\x00&quot;, b&quot;&quot;, BMCContainer.BIN_CONTAINER),
+        (b&quot;\xff\x00\x00\xff\x00\x00\xff\x00\x00&quot;, b&quot;&quot;, BMCContainer.BIN_CONTAINER),
         (
-            b&quot;\xFF\x00\x00\xFF\x00\x00\xFF\x00\x00&quot;,
+            b&quot;\xff\x00\x00\xff\x00\x00\xff\x00\x00&quot;,
             b&quot;\xff\x00\x00\xff\xff\x00\x00\xff\xff\x00\x00\xff&quot;,
             BMCContainer.BMC_CONTAINER,
         ),
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py#L1184'>Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py~L1184</a></p>
<pre><code class="language-diff">     &quot;data, expected_output&quot;,
     [
         (b&quot;&quot;, (-1, 1, 0)),
-        (b&quot;\xF5&quot;, (-1, 2, 0xF5)),
-        (b&quot;\xFD&quot;, (0xFD, 0, 1)),
-        (b&quot;\xF9&quot;, (0xF9, 8, 1)),
-        (b&quot;\xF0\x00\x01&quot;, (0xF0, 256, 3)),
-        (b&quot;\xA0&quot;, (-1, 2, 0xA0)),
+        (b&quot;\xf5&quot;, (-1, 2, 0xF5)),
+        (b&quot;\xfd&quot;, (0xFD, 0, 1)),
+        (b&quot;\xf9&quot;, (0xF9, 8, 1)),
+        (b&quot;\xf0\x00\x01&quot;, (0xF0, 256, 3)),
+        (b&quot;\xa0&quot;, (-1, 2, 0xA0)),
         (b&quot;\x80&quot;, (-1, 1, 0x00)),
         (b&quot;\x00&quot;, (-1, 1, 0x00)),
         (b&quot;\x10&quot;, (0x00, 16, 1)),
         (b&quot;\x40&quot;, (-1, 1, 0x00)),
-        (b&quot;\xD0&quot;, (-1, 1, 0x00)),
+        (b&quot;\xd0&quot;, (-1, 1, 0x00)),
     ],
 )
 def test_b_unrle(data, expected_output):
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py#L1208'>Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py~L1208</a></p>
<pre><code class="language-diff">     &quot;data, bbp, expected_output&quot;,
     [
         (b&quot;&quot;, 3, b&quot;&quot;),
-        (b&quot;\xF5&quot;, 3, b&quot;&quot;),
-        (b&quot;\xFD&quot;, 3, b&quot;\xFF\xFF\xFF&quot;),
-        (b&quot;\xA0&quot;, 3, b&quot;&quot;),
+        (b&quot;\xf5&quot;, 3, b&quot;&quot;),
+        (b&quot;\xfd&quot;, 3, b&quot;\xff\xff\xff&quot;),
+        (b&quot;\xa0&quot;, 3, b&quot;&quot;),
         (b&quot;\x80&quot;, 3, b&quot;&quot;),
         (b&quot;\x00&quot;, 3, b&quot;&quot;),
         (b&quot;\x40&quot;, 3, b&quot;&quot;),
-        (b&quot;\xD0&quot;, 3, b&quot;&quot;),
+        (b&quot;\xd0&quot;, 3, b&quot;&quot;),
     ],
 )
 def test_b_uncompress(data, bbp, expected_output):
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py#L1401'>Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py~L1401</a></p>
<pre><code class="language-diff"> 
 def test_edge_case_cmd_0xC0():
     bmc = BMCContainer()
-    data = b&quot;\xC0&quot; + b&quot;\xFF&quot; * (3 * 64)  # cmd = 0xC0, rl = 64
+    data = b&quot;\xc0&quot; + b&quot;\xff&quot; * (3 * 64)  # cmd = 0xC0, rl = 64
     bbp = 2
     assert bmc.b_uncompress(data, bbp) == b&quot;&quot;
 
 
 def test_edge_case_cmd_0xF6():
     bmc = BMCContainer()
-    data = b&quot;\xF6&quot; + b&quot;\x01&quot; * (1 * 64)  # cmd = 0xF6, rl = 64
+    data = b&quot;\xf6&quot; + b&quot;\x01&quot; * (1 * 64)  # cmd = 0xF6, rl = 64
     bbp = 128
     assert bmc.b_uncompress(data, bbp) == b&quot;&quot;
 
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py#L1433'>Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py~L1433</a></p>
<pre><code class="language-diff"> 
 def test_b_process_btype_is_bin_buf_256():
     bmcc = BMCContainer()
-    data = b&quot;\x01&quot; * 85 + b&quot;\xFF&quot; * 18 + b&quot;\x01&quot; * 90
+    data = b&quot;\x01&quot; * 85 + b&quot;\xff&quot; * 18 + b&quot;\x01&quot; * 90
     bmcc.btype = b&quot;.BIN&quot;
 
     assert bmcc.b_parse_rgb24b(data)
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py#L1479'>Packs/CommonScripts/Scripts/BMCTool/BMCTool_test.py~L1479</a></p>
<pre><code class="language-diff">     bmcc = BMCContainer()
     bmcc.btype = b&quot;.BMC&quot;
     bmcc.fname = &quot;1.bmc&quot;
-    bmcc.bdat = b&quot;\x03&quot; * 0xC + b&quot;\xff&quot; * (64 * 64) + b&quot;\x0B&quot; + b&quot;\xff&quot; * (64 * 64)
+    bmcc.bdat = b&quot;\x03&quot; * 0xC + b&quot;\xff&quot; * (64 * 64) + b&quot;\x0b&quot; + b&quot;\xff&quot; * (64 * 64)
     assert bmcc.b_process() is False
 
 
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/CommonScripts/Scripts/FormatURL/FormatURL.py#L469'>Packs/CommonScripts/Scripts/FormatURL/FormatURL.py~L469</a></p>
<pre><code class="language-diff">             bool: Is the character a valid code point.
         &quot;&quot;&quot;
         url_code_points = (&quot;!&quot;, &quot;$&quot;, &quot;&amp;&quot;, '&quot;', &quot;(&quot;, &quot;)&quot;, &quot;*&quot;, &quot;+&quot;, &quot;,&quot;, &quot;-&quot;, &quot;.&quot;, &quot;/&quot;, &quot;:&quot;, &quot;;&quot;, &quot;=&quot;, &quot;?&quot;, &quot;@&quot;, &quot;_&quot;, &quot;~&quot;)
-        unicode_code_points = {&quot;start&quot;: &quot;\u00A0&quot;, &quot;end&quot;: &quot;\U0010FFFD&quot;}
-        surrogate_characters = {&quot;start&quot;: &quot;\uD800&quot;, &quot;end&quot;: &quot;\uDFFF&quot;}
-        non_characters = {&quot;start&quot;: &quot;\uFDD0&quot;, &quot;end&quot;: &quot;\uFDEF&quot;}
+        unicode_code_points = {&quot;start&quot;: &quot;\u00a0&quot;, &quot;end&quot;: &quot;\U0010fffd&quot;}
+        surrogate_characters = {&quot;start&quot;: &quot;\ud800&quot;, &quot;end&quot;: &quot;\udfff&quot;}
+        non_characters = {&quot;start&quot;: &quot;\ufdd0&quot;, &quot;end&quot;: &quot;\ufdef&quot;}
 
         if surrogate_characters[&quot;start&quot;] &lt;= char &lt;= surrogate_characters[&quot;end&quot;]:
             return False
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/MailListener_-_POP3/Integrations/MailListener_POP3/MailListener_POP3_test.py#L58'>Packs/MailListener_-_POP3/Integrations/MailListener_POP3/MailListener_POP3_test.py~L58</a></p>
<pre><code class="language-diff">     parts = [part]
 
     body, html, attachments = parse_mail_parts(parts)
-    assert body.replace(&quot;\uFFFD&quot;, &quot;?&quot;) == &quot;Foo?Bar==&quot;
+    assert body.replace(&quot;\ufffd&quot;, &quot;?&quot;) == &quot;Foo?Bar==&quot;
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/PAN-OS/Integrations/Panorama/Panorama.py#L54'>Packs/PAN-OS/Integrations/Panorama/Panorama.py~L54</a></p>
<pre><code class="language-diff"> PRE_POST = &quot;&quot;
 OUTPUT_PREFIX = &quot;PANOS.&quot;
 UNICODE_FAIL = &quot;\U0000274c&quot;
-UNICODE_PASS = &quot;\U00002714\U0000FE0F&quot;
+UNICODE_PASS = &quot;\U00002714\U0000fe0f&quot;
 
 DATE_FORMAT = &quot;%Y-%m-%dT%H:%M:%SZ&quot;  # ISO8601 format with UTC, default in XSOAR
 QUERY_DATE_FORMAT = &quot;%Y/%m/%d %H:%M:%S&quot;
</code></pre>
<p><a href='https://github.com/demisto/content/blob/dde7cd21c989c44322b4e34a1c42203424bfe80c/Packs/SecurityIntelligenceServicesFeed/Integrations/SecurityIntelligenceServicesFeed/SecurityIntelligenceServicesFeed_test.py#L158'>Packs/SecurityIntelligenceServicesFeed/Integrations/SecurityIntelligenceServicesFeed/SecurityIntelligenceServicesFeed_test.py~L158</a></p>
<pre><code class="language-diff">     # With limit parameter.
     with open(&quot;./TestData/response_get_object.json&quot;) as f:
         expected_response = json.load(f)
-    event_stream = [{&quot;Records&quot;: {&quot;Payload&quot;: b&quot;\x68\x65\x6C\x6C\x6F\x5C\x74\x31\x32\x33\x31\x32\x5C\x6E&quot;}, &quot;end&quot;: {}}]
+    event_stream = [{&quot;Records&quot;: {&quot;Payload&quot;: b&quot;\x68\x65\x6c\x6c\x6f\x5c\x74\x31\x32\x33\x31\x32\x5c\x6e&quot;}, &quot;end&quot;: {}}]
     expected_response[&quot;Payload&quot;] = event_stream
     mocker.patch(&quot;botocore.client.BaseClient._make_api_call&quot;, return_value=expected_response)
     assert isinstance(
</code></pre>
</p>
</details>
<details><summary><a href="https://github.com/ibis-project/ibis">ibis-project/ibis</a> (+1 -1 lines across 1 file)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<p><a href='https://github.com/ibis-project/ibis/blob/c7da9d1521efd5b577ef48bc46c80b291b1dc2fd/ibis/util.py#L44'>ibis/util.py~L44</a></p>
<pre><code class="language-diff"> 
 
 # https://www.compart.com/en/unicode/U+22EE
-VERTICAL_ELLIPSIS = &quot;\u22EE&quot;
+VERTICAL_ELLIPSIS = &quot;\u22ee&quot;
 # https://www.compart.com/en/unicode/U+2026
 HORIZONTAL_ELLIPSIS = &quot;\u2026&quot;
 
</code></pre>
</p>
</details>
<details><summary><a href="https://github.com/mlflow/mlflow">mlflow/mlflow</a> (+2 -2 lines across 1 file)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<p><a href='https://github.com/mlflow/mlflow/blob/e66aaea7830d91ba770ba3756f93e686ac626ef2/tests/transformers/test_transformers_model_export.py#L3607'>tests/transformers/test_transformers_model_export.py~L3607</a></p>
<pre><code class="language-diff"> def test_save_model_card_with_non_utf_characters(tmp_path, model_name):
     # non-ascii unicode characters
     test_text = (
-        &quot;Emoji testing! \u2728 \U0001F600 \U0001F609 \U0001F606 &quot;
-        &quot;\U0001F970 \U0001F60E \U0001F917 \U0001F9D0&quot;
+        &quot;Emoji testing! \u2728 \U0001f600 \U0001f609 \U0001f606 &quot;
+        &quot;\U0001f970 \U0001f60e \U0001f917 \U0001f9d0&quot;
     )
 
     card_data: ModelCard = huggingface_hub.ModelCard.load(model_name)
</code></pre>
</p>
</details>
<details><summary><a href="https://github.com/pandas-dev/pandas">pandas-dev/pandas</a> (+9 -9 lines across 6 files)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<p><a href='https://github.com/pandas-dev/pandas/blob/12d69c8b5739e7070b8ca2ff86587f828c9a96c0/pandas/io/excel/_base.py#L1372'>pandas/io/excel/_base.py~L1372</a></p>
<pre><code class="language-diff">     b&quot;\x09\x00\x04\x00\x07\x00\x10\x00&quot;,  # BIFF2
     b&quot;\x09\x02\x06\x00\x00\x00\x10\x00&quot;,  # BIFF3
     b&quot;\x09\x04\x06\x00\x00\x00\x10\x00&quot;,  # BIFF4
-    b&quot;\xD0\xCF\x11\xE0\xA1\xB1\x1A\xE1&quot;,  # Compound File Binary
+    b&quot;\xd0\xcf\x11\xe0\xa1\xb1\x1a\xe1&quot;,  # Compound File Binary
 )
 ZIP_SIGNATURE = b&quot;PK\x03\x04&quot;
 PEEK_SIZE = max(map(len, XLS_SIGNATURES + (ZIP_SIGNATURE,)))
</code></pre>
<p><a href='https://github.com/pandas-dev/pandas/blob/12d69c8b5739e7070b8ca2ff86587f828c9a96c0/pandas/tests/io/parser/test_c_parser_only.py#L510'>pandas/tests/io/parser/test_c_parser_only.py~L510</a></p>
<pre><code class="language-diff"> 
 def test_buffer_rd_bytes_bad_unicode(c_parser_only):
     # see gh-22748
-    t = BytesIO(b&quot;\xB0&quot;)
+    t = BytesIO(b&quot;\xb0&quot;)
     t = TextIOWrapper(t, encoding=&quot;ascii&quot;, errors=&quot;surrogateescape&quot;)
     msg = &quot;'utf-8' codec can't encode character&quot;
     with pytest.raises(UnicodeError, match=msg):
</code></pre>
<p><a href='https://github.com/pandas-dev/pandas/blob/12d69c8b5739e7070b8ca2ff86587f828c9a96c0/pandas/tests/io/test_stata.py#L400'>pandas/tests/io/test_stata.py~L400</a></p>
<pre><code class="language-diff">             [(1, 2, 3, 4)],
             columns=[
                 &quot;good&quot;,
-                &quot;b\u00E4d&quot;,
+                &quot;b\u00e4d&quot;,
                 &quot;8number&quot;,
                 &quot;astringwithmorethan32characters______&quot;,
             ],
</code></pre>
<p><a href='https://github.com/pandas-dev/pandas/blob/12d69c8b5739e7070b8ca2ff86587f828c9a96c0/pandas/tests/io/test_stata.py#L1361'>pandas/tests/io/test_stata.py~L1361</a></p>
<pre><code class="language-diff">                 )
 
     def test_write_variable_label_errors(self, mixed_frame):
-        values = [&quot;\u03A1&quot;, &quot;\u0391&quot;, &quot;\u039D&quot;, &quot;\u0394&quot;, &quot;\u0391&quot;, &quot;\u03A3&quot;]
+        values = [&quot;\u03a1&quot;, &quot;\u0391&quot;, &quot;\u039d&quot;, &quot;\u0394&quot;, &quot;\u0391&quot;, &quot;\u03a3&quot;]
 
         variable_labels_utf8 = {
             &quot;a&quot;: &quot;City Rank&quot;,
</code></pre>
<p><a href='https://github.com/pandas-dev/pandas/blob/12d69c8b5739e7070b8ca2ff86587f828c9a96c0/pandas/tests/plotting/frame/test_frame.py#L205'>pandas/tests/plotting/frame/test_frame.py~L205</a></p>
<pre><code class="language-diff">             columns=columns,
             index=index,
         )
-        _check_plot_works(df.plot, title=&quot;\u03A3&quot;)
+        _check_plot_works(df.plot, title=&quot;\u03a3&quot;)
 
     @pytest.mark.slow
     @pytest.mark.parametrize(&quot;layout&quot;, [None, (-1, 1)])
</code></pre>
<p><a href='https://github.com/pandas-dev/pandas/blob/12d69c8b5739e7070b8ca2ff86587f828c9a96c0/pandas/tests/series/test_constructors.py#L1591'>pandas/tests/series/test_constructors.py~L1591</a></p>
<pre><code class="language-diff">         tm.assert_series_equal(result, expected)
 
     def test_constructor_name_hashable(self):
-        for n in [777, 777.0, &quot;name&quot;, datetime(2001, 11, 11), (1,), &quot;\u05D0&quot;]:
+        for n in [777, 777.0, &quot;name&quot;, datetime(2001, 11, 11), (1,), &quot;\u05d0&quot;]:
             for data in [[1, 2, 3], np.ones(3), {&quot;a&quot;: 0, &quot;b&quot;: 1}]:
                 s = Series(data, name=n)
                 assert s.name == n
</code></pre>
<p><a href='https://github.com/pandas-dev/pandas/blob/12d69c8b5739e7070b8ca2ff86587f828c9a96c0/pandas/tests/series/test_formats.py#L115'>pandas/tests/series/test_formats.py~L115</a></p>
<pre><code class="language-diff">             1,
             1.2,
             &quot;foo&quot;,
-            &quot;\u03B1\u03B2\u03B3&quot;,
+            &quot;\u03b1\u03b2\u03b3&quot;,
             &quot;loooooooooooooooooooooooooooooooooooooooooooooooooooong&quot;,
             (&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;),
             (1, 2),
             (&quot;foo&quot;, 1, 2.3),
-            (&quot;\u03B1&quot;, &quot;\u03B2&quot;, &quot;\u03B3&quot;),
-            (&quot;\u03B1&quot;, &quot;bar&quot;),
+            (&quot;\u03b1&quot;, &quot;\u03b2&quot;, &quot;\u03b3&quot;),
+            (&quot;\u03b1&quot;, &quot;bar&quot;),
         ],
     )
     def test_various_names(self, name, string_series):
</code></pre>
</p>
</details>
<details><summary><a href="https://github.com/zulip/zulip">zulip/zulip</a> (+4 -4 lines across 3 files)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<p><a href='https://github.com/zulip/zulip/blob/6e220f4dc1e05b2a2f174e6cbe156e13008be83d/scripts/lib/zulip_tools.py#L31'>scripts/lib/zulip_tools.py~L31</a></p>
<pre><code class="language-diff"> ENDC = &quot;\033[0m&quot;
 BLACKONYELLOW = &quot;\x1b[0;30;43m&quot;
 WHITEONRED = &quot;\x1b[0;37;41m&quot;
-BOLDRED = &quot;\x1B[1;31m&quot;
+BOLDRED = &quot;\x1b[1;31m&quot;
 BOLD = &quot;\x1b[1m&quot;
 GRAY = &quot;\x1b[90m&quot;
 
</code></pre>
<p><a href='https://github.com/zulip/zulip/blob/6e220f4dc1e05b2a2f174e6cbe156e13008be83d/zerver/tests/test_message_send.py#L922'>zerver/tests/test_message_send.py~L922</a></p>
<pre><code class="language-diff">             {
                 &quot;type&quot;: &quot;stream&quot;,
                 &quot;to&quot;: &quot;Verona&quot;,
-                &quot;topic&quot;: &quot;Test\uFFFETopic&quot;,
+                &quot;topic&quot;: &quot;Test\ufffeTopic&quot;,
                 &quot;content&quot;: &quot;Test message&quot;,
             },
         )
</code></pre>
<p><a href='https://github.com/zulip/zulip/blob/6e220f4dc1e05b2a2f174e6cbe156e13008be83d/zerver/tests/test_subs.py#L3982'>zerver/tests/test_subs.py~L3982</a></p>
<pre><code class="language-diff">         # For Cn category
         post_data_cn = {
             &quot;subscriptions&quot;: orjson.dumps([
-                {&quot;name&quot;: &quot;new\uFFFEstream&quot;, &quot;description&quot;: &quot;this is description&quot;}
+                {&quot;name&quot;: &quot;new\ufffestream&quot;, &quot;description&quot;: &quot;this is description&quot;}
             ]).decode(),
             &quot;invite_only&quot;: orjson.dumps(False).decode(),
         }
</code></pre>
<p><a href='https://github.com/zulip/zulip/blob/6e220f4dc1e05b2a2f174e6cbe156e13008be83d/zerver/tests/test_subs.py#L4009'>zerver/tests/test_subs.py~L4009</a></p>
<pre><code class="language-diff">         result = self.client_patch(f&quot;/json/streams/{stream.id}&quot;, {&quot;new_name&quot;: &quot;test\n\rname&quot;})
         self.assert_json_error(result, &quot;Invalid character in stream name, at position 5!&quot;)
         # Check for Cn characters
-        result = self.client_patch(f&quot;/json/streams/{stream.id}&quot;, {&quot;new_name&quot;: &quot;test\uFFFEame&quot;})
+        result = self.client_patch(f&quot;/json/streams/{stream.id}&quot;, {&quot;new_name&quot;: &quot;test\ufffeame&quot;})
         self.assert_json_error(result, &quot;Invalid character in stream name, at position 5!&quot;)
 
     def test_successful_subscriptions_list(self) -&gt; None:
</code></pre>
</p>
</details>
<details><summary><a href="https://github.com/sphinx-doc/sphinx">sphinx-doc/sphinx</a> (error)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<pre><code>warning: The following rules may cause conflicts when used with the formatter: `COM812`. To avoid unexpected behavior, we recommend disabling these rules, either by removing them from the `select` or `extend-select` configuration, or adding them to the `ignore` configuration.
warning: The `flake8-quotes.inline-quotes=&quot;single&quot;` option is incompatible with the formatter's `format.quote-style=&quot;double&quot;`. We recommend disabling `Q000` and `Q003` when using the formatter, which enforces a consistent quote style. Alternatively, set both options to either `&quot;single&quot;` or `&quot;double&quot;`.
warning: Detected debug build without --no-cache.
error: Failed to read tests/roots/test-pycode/cp_1251_coded.py: stream did not contain valid UTF-8
</code></pre>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @MichaReiser on 2023-12-26 04:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @MichaReiser on 2023-12-27 09:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff_python_formatter/src/string/mod.rs</code>:896 on 2023-12-27 13:40</div>
            <div class="timeline-body"><p>Can this happen? I'm getting syntax errors with invalid input (both ruff and cpython)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2023-12-27 13:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2023-12-28 01:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2023-12-28 01:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-12-28 01:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 23:07:49 UTC
    </footer>
</body>
</html>
