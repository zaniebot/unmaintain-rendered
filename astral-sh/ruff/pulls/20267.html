<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Reimplement equivalence via mutual subtyping - astral-sh/ruff #20267</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Reimplement equivalence via mutual subtyping</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/20267">#20267</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-09-05 14:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a></div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff/ty! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title? (Please prefix with `[ty]` for ty pull
  requests.)
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<!-- What's the purpose of the change? What does it do, and why? -->

<h2>Test Plan</h2>
<!-- How was it tested? -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by @AlexWaygood on 2025-09-05 14:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-09-05 14:59</div>
            <div class="timeline-body"><!-- generated-comment typing_conformance_diagnostics_diff -->

<h2>Diagnostic diff on <a href="https://github.com/python/typing/tree/d4f39b27a4a47aac8b6d4019e1b0b5b3156fabdc/conformance">typing conformance tests</a></h2>
<p>No changes detected when running ty on typing conformance tests âœ…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-09-05 15:04</div>
            <div class="timeline-body"><!-- generated-comment mypy_primer -->

<h2><code>mypy_primer</code> results</h2>
<details>
<summary>Changes were detected when running on open source projects</summary>

<pre><code class="language-diff">beartype (https://github.com/beartype/beartype)
- beartype/_check/metadata/metadecor.py:523:34: error[unresolved-attribute] Type `((...) -&gt; Unknown) &amp; ((...) -&gt; object)` has no attribute `__name__`
+ beartype/_check/metadata/metadecor.py:523:34: error[unresolved-attribute] Type `(...) -&gt; Unknown` has no attribute `__name__`
- beartype/_util/cache/utilcachecall.py:180:34: error[unresolved-attribute] Type `CallableT@callable_cached &amp; ((...) -&gt; object)` has no attribute `__name__`
+ beartype/_util/cache/utilcachecall.py:180:34: error[unresolved-attribute] Type `CallableT@callable_cached` has no attribute `__name__`
- beartype/_util/cache/utilcachecall.py:417:34: error[unresolved-attribute] Type `CallableT@method_cached_arg_by_id &amp; ((...) -&gt; object)` has no attribute `__name__`
+ beartype/_util/cache/utilcachecall.py:417:34: error[unresolved-attribute] Type `CallableT@method_cached_arg_by_id` has no attribute `__name__`
- beartype/_util/cache/utilcachecall.py:568:44: error[unresolved-attribute] Type `CallableT@property_cached &amp; ((...) -&gt; object)` has no attribute `__name__`
+ beartype/_util/cache/utilcachecall.py:568:44: error[unresolved-attribute] Type `CallableT@property_cached` has no attribute `__name__`
- beartype/_util/func/utilfuncscope.py:261:29: error[unresolved-attribute] Type `((...) -&gt; Unknown) &amp; ((...) -&gt; object)` has no attribute `__name__`
+ beartype/_util/func/utilfuncscope.py:261:29: error[unresolved-attribute] Type `(...) -&gt; Unknown` has no attribute `__name__`
- beartype/_util/func/utilfuncscope.py:320:16: error[unresolved-attribute] Type `((...) -&gt; Unknown) &amp; ((...) -&gt; object)` has no attribute `__qualname__`
+ beartype/_util/func/utilfuncscope.py:320:16: error[unresolved-attribute] Type `(...) -&gt; Unknown` has no attribute `__qualname__`
- beartype/_util/func/utilfuncscope.py:334:16: error[unresolved-attribute] Type `((...) -&gt; Unknown) &amp; ((...) -&gt; object)` has no attribute `__qualname__`
+ beartype/_util/func/utilfuncscope.py:334:16: error[unresolved-attribute] Type `(...) -&gt; Unknown` has no attribute `__qualname__`
- beartype/_util/func/utilfunctest.py:907:16: error[unresolved-attribute] Type `((...) -&gt; Unknown) &amp; ~((...) -&gt; Unknown)` has no attribute `__qualname__`
- beartype/typing/_typingcache.py:87:34: error[unresolved-attribute] Type `((...) -&gt; Unknown) &amp; ((...) -&gt; object)` has no attribute `__name__`
+ beartype/typing/_typingcache.py:87:34: error[unresolved-attribute] Type `(...) -&gt; Unknown` has no attribute `__name__`
- Found 589 diagnostics
+ Found 588 diagnostics

trio (https://github.com/python-trio/trio)
+ src/trio/_deprecate.py:49:19: error[unresolved-attribute] Type `&lt;Protocol with members '__qualname__'&gt;` has no attribute `__module__`
- Found 676 diagnostics
+ Found 677 diagnostics

apprise (https://github.com/caronc/apprise)
- apprise/plugins/ses.py:472:17: error[invalid-argument-type] Argument to function `formataddr` is incorrect: Expected `tuple[str | None, str]`, found `tuple[(Unknown &amp; ~AlwaysFalsy) | Literal[False], Unknown]`
+ apprise/plugins/ses.py:472:17: error[invalid-argument-type] Argument to function `formataddr` is incorrect: Expected `tuple[str | None, str]`, found `tuple[(Unknown &amp; ~AlwaysFalsy) | (@Todo(Subscript expressions on intersections) &amp; ~AlwaysFalsy) | Literal[False], Unknown]`

schemathesis (https://github.com/schemathesis/schemathesis)
+ src/schemathesis/core/output/sanitization.py:54:12: error[invalid-return-type] Return type does not match returned value: expected `str`, found `Literal[b&quot;&quot;]`
- src/schemathesis/hooks.py:297:16: error[unresolved-attribute] Type `(str &amp; ((...) -&gt; object)) | (((...) -&gt; Unknown) &amp; ((...) -&gt; object))` has no attribute `__name__`
+ src/schemathesis/hooks.py:297:16: error[unresolved-attribute] Type `(str &amp; ((...) -&gt; object)) | ((...) -&gt; Unknown)` has no attribute `__name__`
+ src/schemathesis/schemas.py:281:16: error[invalid-return-type] Return type does not match returned value: expected `str`, found `Literal[b&quot;&quot;]`
- Found 271 diagnostics
+ Found 273 diagnostics

flake8 (https://github.com/pycqa/flake8)
+ src/flake8/processor.py:284:16: error[invalid-return-type] Return type does not match returned value: expected `dict[int, str]`, found `dict[int, LiteralString]`
- Found 39 diagnostics
+ Found 40 diagnostics

discord.py (https://github.com/Rapptz/discord.py)
- discord/ext/commands/cog.py:538:13: error[invalid-assignment] Object of type `Literal[True]` is not assignable to attribute `__cog_listener__` on type `(FuncT@listener &amp; ~staticmethod) | ((...) -&gt; Unknown)`
+ discord/ext/commands/cog.py:538:13: error[unresolved-attribute] Unresolved attribute `__cog_listener__` on type `(...) -&gt; Unknown`.
- discord/ext/commands/cog.py:539:33: error[unresolved-attribute] Type `(FuncT@listener &amp; ~staticmethod) | ((...) -&gt; Unknown)` has no attribute `__name__`
+ discord/ext/commands/cog.py:539:33: error[unresolved-attribute] Type `(...) -&gt; Unknown` has no attribute `__name__`
- discord/ext/commands/cog.py:541:17: error[unresolved-attribute] Type `(FuncT@listener &amp; ~staticmethod) | ((...) -&gt; Unknown)` has no attribute `__cog_listener_names__`
+ discord/ext/commands/cog.py:541:17: error[unresolved-attribute] Type `(...) -&gt; Unknown` has no attribute `__cog_listener_names__`
- discord/ext/commands/cog.py:543:17: error[invalid-assignment] Object of type `list[@Todo(list literal element type)]` is not assignable to attribute `__cog_listener_names__` on type `(FuncT@listener &amp; ~staticmethod) | ((...) -&gt; Unknown)`
+ discord/ext/commands/cog.py:543:17: error[unresolved-attribute] Unresolved attribute `__cog_listener_names__` on type `(...) -&gt; Unknown`.

poetry (https://github.com/python-poetry/poetry)
+ src/poetry/vcs/git/backend.py:548:12: error[invalid-return-type] Return type does not match returned value: expected `str`, found `Literal[b&quot;&quot;]`
+ tests/integration/test_utils_vcs_git.py:432:43: error[unresolved-attribute] Type `Literal[b&quot;&quot;]` has no attribute `encode`
- Found 928 diagnostics
+ Found 930 diagnostics

cloud-init (https://github.com/canonical/cloud-init)
- cloudinit/config/cc_growpart.py:214:12: error[invalid-return-type] Return type does not match returned value: expected `Resizer`, found `None | (Unknown &amp; ~AlwaysFalsy) | (ResizeGrowPart &amp; ~AlwaysFalsy) | (ResizeGrowFS &amp; ~AlwaysFalsy) | (ResizeGpart &amp; ~AlwaysFalsy)`
+ cloudinit/config/cc_growpart.py:214:12: error[invalid-return-type] Return type does not match returned value: expected `Resizer`, found `None | (Unknown &amp; ~AlwaysFalsy) | (ResizeGrowPart &amp; ~AlwaysFalsy) | (ResizeGrowFS &amp; ~AlwaysFalsy) | (ResizeGpart &amp; ~AlwaysFalsy) | (@Todo(dict literal value type) &amp; ~AlwaysFalsy)`

tornado (https://github.com/tornadoweb/tornado)
- tornado/routing.py:357:33: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `Matcher`, found `object`
+ tornado/routing.py:357:33: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `Matcher`, found `str | Matcher | Any`
- tornado/routing.py:357:33: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `dict[str, Any] | None`, found `object`
+ tornado/routing.py:357:33: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `dict[str, Any] | None`, found `str | Matcher | Any`
- tornado/routing.py:357:33: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `str | None`, found `object`
+ tornado/routing.py:357:33: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `str | None`, found `str | Matcher | Any`

freqtrade (https://github.com/freqtrade/freqtrade)
+ freqtrade/data/converter/orderflow.py:76:9: error[no-matching-overload] No overload of bound method `drop` matches arguments
+ freqtrade/data/converter/orderflow.py:135:21: error[invalid-argument-type] Argument to bound method `drop` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ freqtrade/data/converter/trade_converter.py:33:35: error[invalid-argument-type] Argument to bound method `drop_duplicates` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ freqtrade/freqai/data_kitchen.py:717:36: error[invalid-argument-type] Argument to bound method `drop` is incorrect: Expected `Hashable`, found `list[@Todo(list comprehension element type)]`
+ freqtrade/freqai/freqai_interface.py:944:56: error[invalid-argument-type] Argument to bound method `drop` is incorrect: Expected `Hashable`, found `list[Unknown]`
+ freqtrade/optimize/hyperopt_tools.py:445:30: error[invalid-argument-type] Argument to bound method `drop` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
- Found 387 diagnostics
+ Found 393 diagnostics

pywin32 (https://github.com/mhammond/pywin32)
- Pythonwin/pywin/debugger/__init__.py:120:11: warning[possibly-unbound-attribute] Attribute `tb_next` on type `(Unknown &amp; ~None) | TracebackType | None` is possibly unbound
+ Pythonwin/pywin/debugger/__init__.py:120:11: warning[possibly-unbound-attribute] Attribute `tb_next` on type `(Unknown &amp; ~None) | (@Todo(Support for `typing.TypeAlias`) &amp; ~None) | TracebackType | None` is possibly unbound
- Pythonwin/pywin/debugger/__init__.py:121:13: warning[possibly-unbound-attribute] Attribute `tb_next` on type `(Unknown &amp; ~None) | TracebackType | None` is possibly unbound
+ Pythonwin/pywin/debugger/__init__.py:121:13: warning[possibly-unbound-attribute] Attribute `tb_next` on type `(Unknown &amp; ~None) | (@Todo(Support for `typing.TypeAlias`) &amp; ~None) | TracebackType | None` is possibly unbound
- Pythonwin/pywin/debugger/__init__.py:125:23: warning[possibly-unbound-attribute] Attribute `tb_frame` on type `(Unknown &amp; ~None) | TracebackType | None` is possibly unbound
+ Pythonwin/pywin/debugger/__init__.py:125:23: warning[possibly-unbound-attribute] Attribute `tb_frame` on type `(Unknown &amp; ~None) | (@Todo(Support for `typing.TypeAlias`) &amp; ~None) | TracebackType | None` is possibly unbound

mkdocs (https://github.com/mkdocs/mkdocs)
+ mkdocs/config/config_options.py:524:20: error[invalid-return-type] Return type does not match returned value: expected `str`, found `Literal[b&quot;&quot;]`
- Found 198 diagnostics
+ Found 199 diagnostics

mitmproxy (https://github.com/mitmproxy/mitmproxy)
- test/mitmproxy/proxy/test_server.py:62:13: error[invalid-assignment] Object of type `def _kill(d: ServerConnectionHookData) -&gt; None` is not assignable to attribute `side_effect` on type `Mock | ((...) -&gt; Unknown)`
- test/mitmproxy/proxy/test_server.py:68:12: warning[possibly-unbound-attribute] Attribute `call_args` on type `Mock | ((...) -&gt; Unknown)` is possibly unbound
- test/mitmproxy/proxy/test_server.py:70:12: warning[possibly-unbound-attribute] Attribute `called` on type `Mock | ((...) -&gt; Unknown)` is possibly unbound
+ test/mitmproxy/proxy/test_server.py:62:13: error[unresolved-attribute] Unresolved attribute `side_effect` on type `(...) -&gt; Unknown`.
- test/mitmproxy/proxy/test_server.py:71:12: warning[possibly-unbound-attribute] Attribute `called` on type `Mock | ((...) -&gt; Unknown)` is possibly unbound
- test/mitmproxy/proxy/test_server.py:73:12: warning[possibly-unbound-attribute] Attribute `called` on type `Mock | ((...) -&gt; Unknown)` is possibly unbound
+ test/mitmproxy/proxy/test_server.py:68:12: error[unresolved-attribute] Type `(...) -&gt; Unknown` has no attribute `call_args`
+ test/mitmproxy/proxy/test_server.py:70:12: error[unresolved-attribute] Type `(...) -&gt; Unknown` has no attribute `called`
+ test/mitmproxy/proxy/test_server.py:71:12: error[unresolved-attribute] Type `(...) -&gt; Unknown` has no attribute `called`
+ test/mitmproxy/proxy/test_server.py:73:12: error[unresolved-attribute] Type `(...) -&gt; Unknown` has no attribute `called`

cwltool (https://github.com/common-workflow-language/cwltool)
- cwltool/load_tool.py:259:54: error[invalid-argument-type] Argument to function `_fast_parser_convert_stdstreams_to_files` is incorrect: Expected `Process | MutableSequence[Process]`, found `object`
- cwltool/load_tool.py:286:39: error[invalid-argument-type] Argument to function `_fast_parser_handle_hints` is incorrect: Expected `Process | MutableSequence[Process]`, found `object`
- Found 146 diagnostics
+ Found 144 diagnostics

django-stubs (https://github.com/typeddjango/django-stubs)
- mypy_django_plugin/django/context.py:331:64: warning[possibly-unbound-attribute] Attribute `base_field` on type `(Field[Any, Any] &amp; Top[ArrayField[Unknown, Unknown]]) | (ForeignObjectRel &amp; Top[ArrayField[Unknown, Unknown]]) | (Field[Any, Any] &amp; ArrayField) | (ForeignObjectRel &amp; ArrayField) | (AutoField[Unknown, Unknown] &amp; Field[Unknown, Unknown] &amp; Top[ArrayField[Unknown, Unknown]]) | (AutoField[Unknown, Unknown] &amp; Field[Unknown, Unknown] &amp; ArrayField)` is possibly unbound
+ mypy_django_plugin/django/context.py:331:64: warning[possibly-unbound-attribute] Attribute `base_field` on type `(Field[Any, Any] &amp; Top[ArrayField[Unknown, Unknown]]) | (ForeignObjectRel &amp; Top[ArrayField[Unknown, Unknown]]) | (Field[Any, Any] &amp; ArrayField) | (ForeignObjectRel &amp; ArrayField)` is possibly unbound

pytest (https://github.com/pytest-dev/pytest)
+ testing/test_mark_expression.py:14:47: warning[redundant-cast] Value is already of type `MatcherCall`
- Found 471 diagnostics
+ Found 472 diagnostics

bokeh (https://github.com/bokeh/bokeh)
- src/bokeh/embed/util.py:315:19: error[unresolved-attribute] Type `~Document` has no attribute `document`
- Found 848 diagnostics
+ Found 847 diagnostics

openlibrary (https://github.com/internetarchive/openlibrary)
+ openlibrary/coverstore/utils.py:92:12: error[invalid-return-type] Return type does not match returned value: expected `tuple[str, dict[str, str]]`, found `tuple[Literal[b&quot;&quot;], dict[@Todo(dict comprehension key type), @Todo(dict comprehension value type)]]`
+ openlibrary/plugins/upstream/utils.py:1517:20: error[invalid-return-type] Return type does not match returned value: expected `str`, found `Literal[b&quot;&quot;]`
- Found 710 diagnostics
+ Found 712 diagnostics

sphinx (https://github.com/sphinx-doc/sphinx)
+ sphinx/builders/linkcheck.py:758:20: error[invalid-return-type] Return type does not match returned value: expected `str | None`, found `Literal[b&quot;&quot;]`
+ sphinx/directives/code.py:146:34: error[invalid-argument-type] Argument to function `dedent_lines` is incorrect: Expected `list[str]`, found `list[LiteralString]`
- Found 515 diagnostics
+ Found 517 diagnostics

static-frame (https://github.com/static-frame/static-frame)
+ static_frame/core/www.py:115:16: error[invalid-return-type] Return type does not match returned value: expected `str`, found `Literal[b&quot;&quot;]`
- static_frame/test/property/strategies.py:927:17: error[invalid-argument-type] Argument to function `get_index_hierarchy` is incorrect: Expected `(...) -&gt; IndexHierarchy`, found `(bound method type[Index[Any]].from_labels(labels: Iterable[Unknown], *, /, name: Unknown = None) -&gt; Index[Any]) | (bound method &lt;class 'Index'&gt;.from_labels(labels: Iterable[Unknown], *, /, name: Unknown = None) -&gt; Index[Any])`
+ static_frame/test/property/strategies.py:927:17: error[invalid-argument-type] Argument to function `get_index_hierarchy` is incorrect: Expected `(...) -&gt; IndexHierarchy`, found `bound method type[Index[Any]].from_labels(labels: Iterable[Unknown], *, /, name: Unknown = None) -&gt; Index[Any]`
- Found 1798 diagnostics
+ Found 1799 diagnostics

xarray (https://github.com/pydata/xarray)
- xarray/computation/rolling.py:1094:16: error[unsupported-operator] Operator `not in` is not supported for types `Unknown` and `(...) -&gt; Unknown`, in comparing `Unknown` with `str | ((...) -&gt; Unknown) | Mapping[Any, str | ((...) -&gt; Unknown)] | dict[Unknown, str | ((...) -&gt; Unknown) | Mapping[Any, str | ((...) -&gt; Unknown)]]`
+ xarray/computation/rolling.py:1094:16: error[unsupported-operator] Operator `not in` is not supported for types `Unknown` and `(...) -&gt; Unknown`, in comparing `Unknown` with `str | ((...) -&gt; Unknown) | Mapping[Any, str | ((...) -&gt; Unknown)]`
+ xarray/computation/rolling.py:1214:38: error[invalid-argument-type] Argument to bound method `set_coords` is incorrect: Expected `Hashable`, found `set[Unknown]`
+ xarray/conventions.py:598:24: error[invalid-argument-type] Argument to bound method `set_coords` is incorrect: Expected `Hashable`, found `set[Hashable | Unknown]`
+ xarray/core/common.py:401:9: error[invalid-assignment] Object of type `list[Unknown]` is not assignable to `Hashable`
+ xarray/core/common.py:403:9: error[invalid-assignment] Object of type `list[@Todo(list literal element type)]` is not assignable to `Hashable`
+ xarray/core/common.py:412:9: error[invalid-assignment] Object of type `list[@Todo(list comprehension element type)]` is not assignable to `Hashable`
+ xarray/core/common.py:414:45: error[not-iterable] Object of type `Hashable` is not iterable
+ xarray/core/common.py:418:12: error[invalid-return-type] Return type does not match returned value: expected `list[Hashable]`, found `Hashable`
- xarray/core/dataset.py:1340:49: error[invalid-argument-type] Argument to function `did_you_mean` is incorrect: Expected `Hashable`, found `Hashable | Iterable[Hashable]`
- xarray/core/dataset.py:1406:28: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `Iterable[Unknown]`, found `Hashable | Iterable[Hashable]`
+ xarray/core/dataset.py:1406:28: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `Iterable[Unknown]`, found `Hashable`
+ xarray/core/dataset.py:1829:13: error[invalid-assignment] Object of type `list[@Todo(list literal element type)]` is not assignable to `Hashable`
+ xarray/core/dataset.py:1831:13: error[invalid-assignment] Object of type `list[Unknown]` is not assignable to `Hashable`
- xarray/core/dataset.py:4623:28: error[unsupported-operator] Operator `&lt;` is not supported for types `object` and `int`
- xarray/core/dataset.py:4623:48: error[unsupported-operator] Operator `&lt;` is not supported for types `int` and `object`
- xarray/core/dataset.py:4629:38: error[unsupported-operator] Operator `&gt;=` is not supported for types `object` and `int`, in comparing `object` with `Literal[0]`
- xarray/core/dataset.py:4629:50: error[unsupported-operator] Operator `+` is unsupported between objects of type `int` and `object`
+ xarray/core/dataset.py:5929:13: error[invalid-assignment] Object of type `set[@Todo(set literal element type)]` is not assignable to `Hashable`
+ xarray/core/dataset.py:5931:13: error[invalid-assignment] Object of type `set[Unknown]` is not assignable to `Hashable`
+ xarray/core/dataset.py:5941:36: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `Iterable[Unknown]`, found `Hashable`
+ xarray/core/dataset.py:5947:50: error[invalid-argument-type] Argument to function `assert_no_index_corrupted` is incorrect: Expected `set[Hashable]`, found `Hashable`
+ xarray/core/dataset.py:5951:16: error[unsupported-operator] Operator `in` is not supported for types `Unknown` and `Hashable`
+ xarray/core/dataset.py:5956:62: error[unsupported-operator] Operator `not in` is not supported for types `Unknown` and `Hashable`
+ xarray/core/parallel.py:664:32: error[invalid-argument-type] Argument to bound method `set_coords` is incorrect: Expected `Hashable`, found `set[Hashable]`
+ xarray/structure/merge.py:1049:9: error[invalid-assignment] Object of type `set[Unknown]` is not assignable to `Hashable`
+ xarray/structure/merge.py:1051:9: error[invalid-assignment] Object of type `set[@Todo(set literal element type)]` is not assignable to `Hashable`
+ xarray/structure/merge.py:1063:16: error[unsupported-operator] Operator `in` is not supported for types `@Todo(Inference of subscript on special form)` and `Hashable`, in comparing `@Todo(Inference of subscript on special form)` with `Hashable &amp; ~AlwaysFalsy`
+ xarray/tests/test_concat.py:1550:23: error[invalid-argument-type] Argument to bound method `drop_indexes` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_concat.py:1558:23: error[invalid-argument-type] Argument to bound method `drop_indexes` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_concat.py:1572:23: error[invalid-argument-type] Argument to bound method `drop_indexes` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_dataarray.py:7195:37: error[invalid-argument-type] Argument to bound method `drop_duplicates` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_dataset.py:963:39: error[invalid-argument-type] Argument to bound method `set_coords` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_dataset.py:969:39: error[invalid-argument-type] Argument to bound method `set_coords` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_dataset.py:2751:27: error[invalid-argument-type] Argument to bound method `drop_indexes` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_dataset.py:2756:27: error[invalid-argument-type] Argument to bound method `drop_indexes` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_dataset.py:3106:34: error[invalid-argument-type] Argument to bound method `drop_indexes` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_dataset.py:3121:34: error[invalid-argument-type] Argument to bound method `drop_indexes` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_dataset.py:4556:13: error[invalid-assignment] Method `__setitem__` of type `bound method Dataset.__setitem__(key: Hashable, value: Any) -&gt; None` cannot be called with a key of type `dict[@Todo(dict literal key type), @Todo(dict literal value type)]` and a value of type `float` on object of type `Dataset`
+ xarray/tests/test_dataset.py:4708:9: error[invalid-assignment] Method `__setitem__` of type `bound method Dataset.__setitem__(key: Hashable, value: Any) -&gt; None` cannot be called with a key of type `dict[str, DataArray]` and a value of type `Dataset` on object of type `Dataset`
+ xarray/tests/test_dataset.py:4738:9: error[invalid-assignment] Method `__setitem__` of type `bound method Dataset.__setitem__(key: Hashable, value: Any) -&gt; None` cannot be called with a key of type `list[@Todo(list literal element type)]` and a value of type `list[@Todo(list literal element type)]` on object of type `Dataset`
+ xarray/tests/test_dataset.py:4742:9: error[invalid-assignment] Method `__setitem__` of type `bound method Dataset.__setitem__(key: Hashable, value: Any) -&gt; None` cannot be called with a key of type `list[@Todo(list literal element type)]` and a value of type `list[@Todo(list comprehension element type)]` on object of type `Dataset`
+ xarray/tests/test_groupby.py:2044:28: error[invalid-argument-type] Argument to bound method `set_coords` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_groupby.py:2513:28: error[invalid-argument-type] Argument to bound method `set_coords` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ xarray/tests/test_indexing.py:139:17: error[invalid-argument-type] Argument is incorrect: Expected `dict[Any, Index]`, found `dict[Unknown, Any | None]`
+ xarray/tests/test_plot.py:1297:28: error[invalid-argument-type] Argument to bound method `set_coords` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
- Found 1679 diagnostics
+ Found 1711 diagnostics

pandas-stubs (https://github.com/pandas-dev/pandas-stubs)
- tests/series/test_series.py:921:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[tuple[Unknown, ...], Series[int]]]`
- tests/series/test_series.py:933:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[@Todo(Support for `typing.TypeAlias`), Series[int]]]`
- tests/series/test_series.py:943:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[tuple[Unknown, ...], Series[int]]]`
- tests/series/test_series.py:952:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[@Todo(Support for `typing.TypeAlias`), Series[int]]]`
- tests/series/test_series.py:984:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[Period, Series[int]]]`
- tests/series/test_series.py:993:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[Timestamp, Series[int]]]`
- tests/series/test_series.py:1002:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[Timedelta, Series[int]]]`
- tests/series/test_series.py:1015:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[Interval[Timestamp], Series[int]]]`
- tests/series/test_series.py:1042:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[Any, Series[int]]]`
- tests/series/test_series.py:1058:9: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[Any, Series[int]]]`
- tests/series/test_series.py:1828:5: error[type-assertion-failure] Argument does not have asserted type `dict[Any, str]`
- tests/series/test_series.py:3892:11: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[Hashable, int]]`
+ tests/test_frame.py:458:31: error[invalid-argument-type] Argument to bound method `drop` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ tests/test_frame.py:459:31: error[invalid-argument-type] Argument to bound method `drop` is incorrect: Expected `Hashable`, found `Index[Any]`
+ tests/test_frame.py:460:31: error[invalid-argument-type] Argument to bound method `drop` is incorrect: Expected `Hashable`, found `set[@Todo(set literal element type)]`
+ tests/test_frame.py:468:31: error[invalid-argument-type] Argument to bound method `drop` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ tests/test_frame.py:472:31: error[invalid-argument-type] Argument to bound method `drop` is incorrect: Expected `Hashable`, found `Index[Any]`
+ tests/test_frame.py:477:32: error[invalid-argument-type] Argument to bound method `drop` is incorrect: Expected `Hashable`, found `Index[str]`
+ tests/test_frame.py:525:42: error[invalid-argument-type] Argument to bound method `drop_duplicates` is incorrect: Expected `Hashable`, found `list[@Todo(list literal element type)]`
+ tests/test_frame.py:537:46: error[invalid-argument-type] Argument to bound method `drop_duplicates` is incorrect: Expected `Hashable`, found `set[@Todo(set literal element type)]`
+ tests/test_frame.py:539:44: error[invalid-argument-type] Argument to bound method `drop_duplicates` is incorrect: Expected `Hashable`, found `dict[@Todo(dict literal key type), @Todo(dict literal value type)]`
- tests/test_frame.py:3400:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[tuple[Unknown, ...], DataFrame]]`
- tests/test_frame.py:3423:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[tuple[Unknown, ...], DataFrame]]`
- tests/test_frame.py:3447:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[Period, DataFrame]]`
- tests/test_frame.py:3456:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[Timestamp, DataFrame]]`
- tests/test_frame.py:3465:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[Timedelta, DataFrame]]`
- tests/test_frame.py:3478:5: error[type-assertion-failure] Argument does not have asserted type `Iterator[tuple[Interval[Timestamp], DataFrame]]`
- tests/test_frame.py:3777:9: error[type-assertion-failure] Argument does not have asserted type `defaultdict[Any, list[Unknown]]`
- tests/test_frame.py:3794:9: error[type-assertion-failure] Argument does not have asserted type `list[defaultdict[Any, list[Unknown]]]`
- Found 4969 diagnostics
+ Found 4958 diagnostics

prefect (https://github.com/PrefectHQ/prefect)
+ src/integrations/prefect-bitbucket/prefect_bitbucket/repository.py:136:16: error[invalid-return-type] Return type does not match returned value: expected `str`, found `Literal[b&quot;&quot;] | Unknown`
+ src/integrations/prefect-github/prefect_github/repository.py:77:16: error[invalid-return-type] Return type does not match returned value: expected `str`, found `Literal[b&quot;&quot;] | Unknown`
+ src/integrations/prefect-gitlab/prefect_gitlab/repositories.py:116:16: error[invalid-return-type] Return type does not match returned value: expected `str`, found `Literal[b&quot;&quot;] | Unknown`
- src/prefect/concurrency/v1/sync.py:63:58: error[invalid-argument-type] Argument to function `emit_concurrency_acquisition_events` is incorrect: Expected `list[MinimalConcurrencyLimitResponse]`, found `(Unknown &amp; ~Coroutine[Any, Any, Any]) | (Coroutine[Any, Any, Unknown] &amp; ~Coroutine[Any, Any, Any])`
- src/prefect/concurrency/v1/sync.py:72:41: error[invalid-argument-type] Argument to function `emit_concurrency_release_events` is incorrect: Expected `list[MinimalConcurrencyLimitResponse]`, found `(Unknown &amp; ~Coroutine[Any, Any, Any]) | (Coroutine[Any, Any, Unknown] &amp; ~Coroutine[Any, Any, Any])`
- src/prefect/flows.py:288:34: warning[possibly-unbound-attribute] Attribute `__name__` on type `(((...) -&gt; R@__init__) &amp; ((...) -&gt; object) &amp; ~classmethod &amp; ~staticmethod) | (@Todo(specialized non-generic class) &amp; ((...) -&gt; object) &amp; ~classmethod &amp; ~staticmethod) | (((...) -&gt; R@__init__) &amp; ((...) -&gt; object) &amp; ~staticmethod) | (((...) -&gt; R@__init__) &amp; ((...) -&gt; object))` is possibly unbound
- src/prefect/flows.py:405:68: warning[possibly-unbound-attribute] Attribute `__name__` on type `(((...) -&gt; R@__init__) &amp; ((...) -&gt; object) &amp; ~classmethod &amp; ~staticmethod) | (@Todo(specialized non-generic class) &amp; ((...) -&gt; object) &amp; ~classmethod &amp; ~staticmethod) | (((...) -&gt; R@__init__) &amp; ((...) -&gt; object) &amp; ~staticmethod) | (((...) -&gt; R@__init__) &amp; ((...) -&gt; object))` is possibly unbound
+ src/prefect/flows.py:288:34: warning[possibly-unbound-attribute] Attribute `__name__` on type `((...) -&gt; R@__init__) | (@Todo(specialized non-generic class) &amp; ((...) -&gt; object) &amp; ~classmethod &amp; ~staticmethod)` is possibly unbound
+ src/prefect/flows.py:405:68: warning[possibly-unbound-attribute] Attribute `__name__` on type `((...) -&gt; R@__init__) | (@Todo(specialized non-generic class) &amp; ((...) -&gt; object) &amp; ~classmethod &amp; ~staticmethod)` is possibly unbound
+ src/prefect/runner/storage.py:197:16: error[invalid-return-type] Return type does not match returned value: expected `str`, found `Literal[b&quot;&quot;]`
- src/prefect/server/events/models/automations.py:223:33: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
+ src/prefect/server/events/models/automations.py:270:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/events/models/automations.py:290:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/events/services/event_persister.py:72:25: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/artifacts.py:449:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/artifacts.py:449:39: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/artifacts.py:534:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/block_documents.py:473:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/block_documents.py:664:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
- src/prefect/server/models/block_schemas.py:369:56: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
+ src/prefect/server/models/block_schemas.py:303:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
- src/prefect/server/models/block_schemas.py:782:56: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
+ src/prefect/server/models/block_types.py:200:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/block_types.py:221:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/concurrency_limits.py:149:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/concurrency_limits.py:161:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/concurrency_limits_v2.py:144:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/concurrency_limits_v2.py:165:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/concurrency_limits_v2.py:209:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/concurrency_limits_v2.py:257:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/concurrency_limits_v2.py:279:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/csrf_token.py:105:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/deployments.py:318:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/deployments.py:587:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/deployments.py:1035:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/deployments.py:1060:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/deployments.py:1087:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/flow_run_input.py:91:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/flow_run_states.py:79:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/flow_runs.py:174:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/flow_runs.py:504:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/flow_runs.py:685:19: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/flows.py:83:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/flows.py:290:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/logs.py:113:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/saved_searches.py:146:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/task_run_states.py:74:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/task_runs.py:176:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/task_runs.py:462:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/variables.py:123:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/variables.py:140:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/variables.py:154:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/variables.py:168:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/work_queues.py:276:15: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/work_queues.py:305:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/workers.py:253:15: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/workers.py:289:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/workers.py:626:15: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/workers.py:770:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
+ src/prefect/server/models/workers.py:799:12: error[unresolved-attribute] Type `Result[Unknown]` has no attribute `rowcount`
- Found 2987 diagnostics
+ Found 3033 diagnostics

meson (https://github.com/mesonbuild/meson)
- mesonbuild/interpreter/interpreter.py:3408:9: error[invalid-assignment] Method `__setitem__` of type `(Overload[(key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | CustomTarget | CustomTargetIndex | BuildTarget], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo(Support for `typing.TypeAlias`)], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt; None, (key: Literal[&quot;d_module_versions&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_unittest&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;rust_dependency_map&quot;], value: dict[str, str], /) -&gt; None, (key: Literal[&quot;swift_interoperability_mode&quot;], value: Literal[&quot;c&quot;, &quot;cpp&quot;], /) -&gt; None, (key: Literal[&quot;swift_module_name&quot;], value: str, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: Unknown, /) -&gt; None, (key: Literal[&quot;c_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cuda_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;fortran_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objc_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objcpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;rust_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_args&quot;], value: list[str | File], /) -&gt; None, (key: Literal[&quot;cs_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;swift_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cython_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;nasm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;masm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;export_dynamic&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;gui_app&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;implib&quot;], value: str | bool | None, /) -&gt; None, (key: Literal[&quot;pie&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;vs_module_defs&quot;], value: str | File | CustomTarget | CustomTargetIndex | None, /) -&gt; None, (key: Literal[&quot;win_subsystem&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;android_exe_type&quot;], value: Literal[&quot;application&quot;, &quot;executable&quot;] | None, /) -&gt; None]) | (Overload[(key: Literal[&quot;rust_abi&quot;], value: Literal[&quot;c&quot;, &quot;rust&quot;] | None, /) -&gt; None, (key: Literal[&quot;prelink&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;pic&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | CustomTarget | CustomTargetIndex | BuildTarget], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo(Support for `typing.TypeAlias`)], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt; None, (key: Literal[&quot;d_module_versions&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_unittest&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;rust_dependency_map&quot;], value: dict[str, str], /) -&gt; None, (key: Literal[&quot;swift_interoperability_mode&quot;], value: Literal[&quot;c&quot;, &quot;cpp&quot;], /) -&gt; None, (key: Literal[&quot;swift_module_name&quot;], value: str, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: Unknown, /) -&gt; None, (key: Literal[&quot;c_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cuda_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;fortran_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objc_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objcpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;rust_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_args&quot;], value: list[str | File], /) -&gt; None, (key: Literal[&quot;cs_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;swift_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cython_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;nasm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;masm_args&quot;], value: list[str], /) -&gt; None]) | (Overload[(key: Literal[&quot;rust_abi&quot;], value: Literal[&quot;c&quot;, &quot;rust&quot;] | None, /) -&gt; None, (key: Literal[&quot;darwin_versions&quot;], value: tuple[str, str] | None, /) -&gt; None, (key: Literal[&quot;soversion&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;version&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;vs_module_defs&quot;], value: str | File | CustomTarget | CustomTargetIndex | None, /) -&gt; None, (key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | CustomTarget | CustomTargetIndex | BuildTarget], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo(Support for `typing.TypeAlias`)], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt; None, (key: Literal[&quot;d_module_versions&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_unittest&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;rust_dependency_map&quot;], value: dict[str, str], /) -&gt; None, (key: Literal[&quot;swift_interoperability_mode&quot;], value: Literal[&quot;c&quot;, &quot;cpp&quot;], /) -&gt; None, (key: Literal[&quot;swift_module_name&quot;], value: str, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: Unknown, /) -&gt; None, (key: Literal[&quot;c_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cuda_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;fortran_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objc_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objcpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;rust_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_args&quot;], value: list[str | File], /) -&gt; None, (key: Literal[&quot;cs_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;swift_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cython_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;nasm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;masm_args&quot;], value: list[str], /) -&gt; None]) | (Overload[(key: Literal[&quot;rust_abi&quot;], value: Literal[&quot;c&quot;, &quot;rust&quot;] | None, /) -&gt; None, (key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | CustomTarget | CustomTargetIndex | BuildTarget], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo(Support for `typing.TypeAlias`)], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt; None, (key: Literal[&quot;d_module_versions&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_unittest&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;rust_dependency_map&quot;], value: dict[str, str], /) -&gt; None, (key: Literal[&quot;swift_interoperability_mode&quot;], value: Literal[&quot;c&quot;, &quot;cpp&quot;], /) -&gt; None, (key: Literal[&quot;swift_module_name&quot;], value: str, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: Unknown, /) -&gt; None, (key: Literal[&quot;c_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cuda_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;fortran_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objc_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objcpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;rust_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_args&quot;], value: list[str | File], /) -&gt; None, (key: Literal[&quot;cs_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;swift_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cython_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;nasm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;masm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vs_module_defs&quot;], value: str | File | CustomTarget | CustomTargetIndex | None, /) -&gt; None]) | (Overload[(key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | CustomTarget | CustomTargetIndex | BuildTarget], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo(Support for `typing.TypeAlias`)], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;main_class&quot;], value: str, /) -&gt; None, (key: Literal[&quot;java_resources&quot;], value: StructuredSources | None, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: str | File | CustomTarget | CustomTargetIndex | GeneratedList | ExtractedObjects | BuildTarget, /) -&gt; None, (key: Literal[&quot;java_args&quot;], value: list[str], /) -&gt; None])` cannot be called with a key of type `Literal[&quot;dependencies&quot;]` and a value of type `list[Unknown]` on object of type `Executable | StaticLibrary | SharedLibrary | SharedModule | Jar`
+ mesonbuild/interpreter/interpreter.py:3408:9: error[invalid-assignment] Method `__setitem__` of type `(Overload[(key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | CustomTarget | CustomTargetIndex | BuildTarget], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo(Support for `typing.TypeAlias`)], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt; None, (key: Literal[&quot;d_module_versions&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_unittest&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;rust_dependency_map&quot;], value: dict[str, str], /) -&gt; None, (key: Literal[&quot;swift_interoperability_mode&quot;], value: Literal[&quot;c&quot;, &quot;cpp&quot;], /) -&gt; None, (key: Literal[&quot;swift_module_name&quot;], value: str, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: Unknown, /) -&gt; None, (key: Literal[&quot;c_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cuda_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;fortran_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objc_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objcpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;rust_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_args&quot;], value: list[str | File], /) -&gt; None, (key: Literal[&quot;cs_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;swift_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cython_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;nasm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;masm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;export_dynamic&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;gui_app&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;implib&quot;], value: str | bool | None, /) -&gt; None, (key: Literal[&quot;pie&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;vs_module_defs&quot;], value: str | File | CustomTarget | CustomTargetIndex | None, /) -&gt; None, (key: Literal[&quot;win_subsystem&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;android_exe_type&quot;], value: Literal[&quot;application&quot;, &quot;executable&quot;] | None, /) -&gt; None]) | (Overload[(key: Literal[&quot;rust_abi&quot;], value: Literal[&quot;c&quot;, &quot;rust&quot;] | None, /) -&gt; None, (key: Literal[&quot;prelink&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;pic&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | CustomTarget | CustomTargetIndex | BuildTarget], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo(Support for `typing.TypeAlias`)], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt; None, (key: Literal[&quot;d_module_versions&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_unittest&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;rust_dependency_map&quot;], value: dict[str, str], /) -&gt; None, (key: Literal[&quot;swift_interoperability_mode&quot;], value: Literal[&quot;c&quot;, &quot;cpp&quot;], /) -&gt; None, (key: Literal[&quot;swift_module_name&quot;], value: str, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: Unknown, /) -&gt; None, (key: Literal[&quot;c_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cuda_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;fortran_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objc_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objcpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;rust_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_args&quot;], value: list[str | File], /) -&gt; None, (key: Literal[&quot;cs_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;swift_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cython_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;nasm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;masm_args&quot;], value: list[str], /) -&gt; None]) | (Overload[(key: Literal[&quot;rust_abi&quot;], value: Literal[&quot;c&quot;, &quot;rust&quot;] | None, /) -&gt; None, (key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | CustomTarget | CustomTargetIndex | BuildTarget], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo(Support for `typing.TypeAlias`)], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt; None, (key: Literal[&quot;d_module_versions&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_unittest&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;rust_dependency_map&quot;], value: dict[str, str], /) -&gt; None, (key: Literal[&quot;swift_interoperability_mode&quot;], value: Literal[&quot;c&quot;, &quot;cpp&quot;], /) -&gt; None, (key: Literal[&quot;swift_module_name&quot;], value: str, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: Unknown, /) -&gt; None, (key: Literal[&quot;c_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cuda_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;fortran_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objc_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objcpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;rust_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_args&quot;], value: list[str | File], /) -&gt; None, (key: Literal[&quot;cs_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;swift_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cython_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;nasm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;masm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vs_module_defs&quot;], value: str | File | CustomTarget | CustomTargetIndex | None, /) -&gt; None]) | (Overload[(key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | CustomTarget | CustomTargetIndex | BuildTarget], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo(Support for `typing.TypeAlias`)], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;main_class&quot;], value: str, /) -&gt; None, (key: Literal[&quot;java_resources&quot;], value: StructuredSources | None, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: str | File | CustomTarget | CustomTargetIndex | GeneratedList | ExtractedObjects | BuildTarget, /) -&gt; None, (key: Literal[&quot;java_args&quot;], value: list[str], /) -&gt; None])` cannot be called with a key of type `Literal[&quot;dependencies&quot;]` and a value of type `list[Unknown]` on object of type `Executable | StaticLibrary | SharedLibrary | SharedModule | Jar`
- mesonbuild/interpreter/interpreter.py:3427:13: error[invalid-assignment] Method `__setitem__` of type `(Overload[(key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | CustomTarget | CustomTargetIndex | BuildTarget], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo(Support for `typing.TypeAlias`)], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt; None, (key: Literal[&quot;d_module_versions&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_unittest&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;rust_dependency_map&quot;], value: dict[str, str], /) -&gt; None, (key: Literal[&quot;swift_interoperability_mode&quot;], value: Literal[&quot;c&quot;, &quot;cpp&quot;], /) -&gt; None, (key: Literal[&quot;swift_module_name&quot;], value: str, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: Unknown, /) -&gt; None, (key: Literal[&quot;c_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cuda_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;fortran_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objc_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objcpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;rust_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_args&quot;], value: list[str | File], /) -&gt; None, (key: Literal[&quot;cs_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;swift_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cython_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;nasm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;masm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;export_dynamic&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;gui_app&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;implib&quot;], value: str | bool | None, /) -&gt; None, (key: Literal[&quot;pie&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;vs_module_defs&quot;], value: str | File | CustomTarget | CustomTargetIndex | None, /) -&gt; None, (key: Literal[&quot;win_subsystem&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;android_exe_type&quot;], value: Literal[&quot;application&quot;, &quot;executable&quot;] | None, /) -&gt; None]) | (Overload[(key: Literal[&quot;rust_abi&quot;], value: Literal[&quot;c&quot;, &quot;rust&quot;] | None, /) -&gt; None, (key: Literal[&quot;prelink&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;pic&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | CustomTarget | CustomTargetIndex | BuildTarget], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[Unknown], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo(Support for `typing.TypeAlias`)], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt;...*[Comment body truncated]*
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-09-05 15:14</div>
            <div class="timeline-body"><h3><code>beartype</code></h3>
<p>The <a href="https://github.com/beartype/beartype/blob/2c625cac1be01e0caa03bbba4bc2c9bb86a89136/beartype/_util/func/utilfunctest.py#L829-L908">beartype change</a> seems to be desirable -- we now consider <code>((...) -&gt; Unknown) &amp; ~((...) -&gt; Unknown)</code> to simplify to <code>Never</code>, which means things like this now have more intuitive behaviour:</p>
<pre><code class="language-py">def f(x: object):
    if callable(x):
        reveal_type(x)
        if not callable(x):
            reveal_type(x)  # now `Never`, was previously `((...) -&gt; Unknown) &amp; ~((...) -&gt; Unknown)`
</code></pre>
<h3><code>cwltool</code></h3>
<p>I'm not totally sure why on <code>main</code> we infer the type of of <code>processobj</code> as <code>object</code> <a href="https://github.com/common-workflow-language/cwltool/blob/256306a5da1eb0a8391d5f6734e7baae96922079/cwltool/load_tool.py#L249-L259">here</a> on <code>main</code>, but it seems like an improvement that we no longer do on this branch.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-09-05 15:28</div>
            <div class="timeline-body"><p>We should narrow <code>if callable(x)</code> using the top materialization of <code>(...) -&gt; Unknown</code> instead of using a gradual type (just like we recently started doing for invariant generics); that would give us the beartype improvement too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-09-05 15:28</div>
            <div class="timeline-body"><p>How do the property tests feel about this change?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-09-05 15:30</div>
            <div class="timeline-body"><p>See https://github.com/astral-sh/ruff/pull/18799 for where I previously experimented with this; the PR description there explains why this breaks transitivity of subtyping.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JelleZijlstra">@JelleZijlstra</a> on 2025-09-06 01:30</div>
            <div class="timeline-body"><blockquote>
<p>we now consider <code>((...) -&gt; Unknown) &amp; ~((...) -&gt; Unknown)</code> to simplify to <code>Never</code>, which means things like this now have more intuitive behaviour:</p>
</blockquote>
<p>That seems incorrect in principle. That type is equivalent to <code>((...) -&gt; Unknown)</code>, for the same reason that <code>~Any</code> is the same as <code>Any</code>.</p>
<p><code>callable()</code> is currently defined as returning <code>TypeIs[Callable[..., object]]</code>. It should really be <code>TypeIs[Top[Callable[..., object]]]</code>, though of course we can't do that in typeshed. Might be worth special-casing in ty though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[ty] Make `Any` a subtype of `Any`" to "[ty] Reimplement equivalence via mutual subtyping" by @AlexWaygood on 2025-09-07 12:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-09-07 12:47</div>
            <div class="timeline-body"><p>I think you're right that making <code>Any</code> a subtype of <code>Any</code> probably isn't theoretically sound. The motivation here was to see if we could implement equivalence via mutual subtyping rather than having an entirely different logical approach to equivalence. That would mean that we could delete a lot of code and probably be more internally consistent about things (see the updated PR diff!). It would also make it easier to explore doing less eager union simplification.</p>
<p>Anyway, it's not possible to implement <code>a.is_equivalent_to(b)</code> as <code>a.is_subtype_of(b) &amp;&amp; b.is_subtype_of(a)</code> unless <code>Any.is_subtype_of(Any)</code> holds, since our current logic (correctly, I think) views <code>Any</code> as equivalent to itself. @JelleZijlstra's idea in https://github.com/astral-sh/ty/issues/994 of implementing equivalence using <code>Top[]</code> and <code>Bottom[]</code> types might work better here. One more option is that we might consider introducing a third type relation -- sitting between <code>TypeRelation::Assignability</code> and <code>TypeRelation::Subtyping</code> -- <code>TypeRelation::UnionSimplification</code>. This could be used to reflect the fact that <code>Any</code> is not a subtype of <code>Any</code>, but <code>Any</code> is equivalent to <code>Any</code> and the union <code>Any | Any</code> can be simplified to <code>Any</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-09-07 12:49</div>
            <div class="timeline-body"><!-- __CODSPEED_PERFORMANCE_REPORT_COMMENT__ -->

<!-- __CODSPEED_WALLTIME_PERFORMANCE_REPORT_COMMENT__ -->

<h2><a href="https://codspeed.io/astral-sh/ruff/branches/alex%2Frework-equivalence-relation?runnerMode=WallTime">CodSpeed WallTime Performance Report</a></h2>
<h3>Merging #20267 will <strong>degrade performances by 10.69%</strong></h3>
<p><sub>Comparing <code>alex/rework-equivalence-relation</code> (1a73410) with <code>main</code> (2467c43)</sub></p>
<h3>Summary</h3>
<p><code>âŒ 5</code> regressions<br />
<code>âœ… 3</code> untouched benchmarks</p>
<blockquote>
<p>:warning: <em>Please fix the performance issues or <a href="https://codspeed.io/astral-sh/ruff/branches/alex%2Frework-equivalence-relation?runnerMode=WallTime">acknowledge them on CodSpeed</a>.</em></p>
</blockquote>
<h3>Benchmarks breakdown</h3>
<p>|     | Benchmark | <code>BASE</code> | <code>HEAD</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| âŒ | <code>medium[colour-science]</code> | 6.9 s | 7.4 s | -6.05% |
| âŒ | <code>medium[pandas]</code> | 26.3 s | 29.5 s | -10.69% |
| âŒ | <code>small[altair]</code> | 2.5 s | 2.7 s | -8.58% |
| âŒ | <code>small[freqtrade]</code> | 4 s | 4.4 s | -7.99% |
| âŒ | <code>small[pydantic]</code> | 2.3 s | 2.5 s | -4.95% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-09-07 12:50</div>
            <div class="timeline-body"><!-- __CODSPEED_PERFORMANCE_REPORT_COMMENT__ -->

<!-- __CODSPEED_INSTRUMENTATION_PERFORMANCE_REPORT_COMMENT__ -->

<h2><a href="https://codspeed.io/astral-sh/ruff/branches/alex%2Frework-equivalence-relation?runnerMode=Instrumentation">CodSpeed Instrumentation Performance Report</a></h2>
<h3>Merging #20267 will <strong>degrade performances by 14.29%</strong></h3>
<p><sub>Comparing <code>alex/rework-equivalence-relation</code> (1a73410) with <code>main</code> (2467c43)</sub></p>
<h3>Summary</h3>
<p><code>âš¡ 1</code> improvements<br />
<code>âŒ 1</code> regressions<br />
<code>âœ… 41</code> untouched benchmarks</p>
<blockquote>
<p>:warning: <em>Please fix the performance issues or <a href="https://codspeed.io/astral-sh/ruff/branches/alex%2Frework-equivalence-relation?runnerMode=Instrumentation">acknowledge them on CodSpeed</a>.</em></p>
</blockquote>
<h3>Benchmarks breakdown</h3>
<p>|     | Benchmark | <code>BASE</code> | <code>HEAD</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| âš¡ | <code>DateType</code> | 268 ms | 254.4 ms | +5.37% |
| âŒ | <code>hydra-zen</code> | 716.4 ms | 835.8 ms | -14.29% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-09-07 12:57</div>
            <div class="timeline-body"><p>Anyway, I don't plan to spend much more time on this right now; it was just an experiment prompted by https://github.com/astral-sh/ty/issues/1132 (for which one solution would be to do less eager union simplification -- but doing less eager union simplification breaks our current implementation of equivalence).</p>
<blockquote>
<p><code>callable()</code> is currently defined as returning <code>TypeIs[Callable[..., object]]</code>. It should really be <code>TypeIs[Top[Callable[..., object]]]</code>, though of course we can't do that in typeshed. Might be worth special-casing in ty though.</p>
</blockquote>
<p>the actual code in beartype used a custom function with a <code>TypeIs[Callable]</code> return type FWIW, which would be harder to special-case; I just used <code>callable()</code> in my comment above for a smaller repro.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-09-07 12:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:15:34 UTC
    </footer>
</body>
</html>
