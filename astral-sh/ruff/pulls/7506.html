<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deprecate `PGH001` in favor of `S307` - astral-sh/ruff #7506</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Deprecate <code>PGH001</code> in favor of <code>S307</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/7506">#7506</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-09-19 03:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>These rules are identical. Bandit is the more popular and more well-defined category, so we remove <code>PGH001</code> and add a redirect to <code>S307</code>. (By adding the redirect, we ensure that users see a warning but not an error when they reference <code>PGH001</code> in their configuration or in a <code># noqa</code>, and that those codes seamlessly redirect to <code>S307</code>.)</p>
<p>Closes https://github.com/astral-sh/ruff/issues/7283.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-09-19 03:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @charliermarsh on 2023-09-19 03:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> approved on 2023-09-19 03:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-09-19 03:49</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>ℹ️ ecosystem check <strong>detected changes</strong>. (+1, -3, 0 error(s))</p>
<details><summary>disnake (+0, -1)</summary>
<p>

<pre>
- <a href='https://github.com/DisnakeDev/disnake/blob/1f871ff51f9583881b2ad51a6a9aa0d70dafe9dd/disnake/utils.py#L1137'>disnake/utils.py:1137:21:</a> S307 Use of possibly insecure function; consider using `ast.literal_eval`
</pre>

</p>
</details>
<details><summary>airflow (+0, -1)</summary>
<p>

<pre>
- <a href='https://github.com/apache/airflow/blob/c55fd77f76aafc76463e3dd2a6ecaa29e56bd967/dev/stats/get_important_pr_candidates.py#L131'>dev/stats/get_important_pr_candidates.py:131:32:</a> PGH001 No builtin `eval()` allowed
</pre>

</p>
</details>
<details><summary>content (+0, -1)</summary>
<p>

<pre>
- <a href='https://github.com/demisto/content/blob/d3c24571dfedc1a124a5b49c470932b340ff19ef/Packs/Malwr/Integrations/Malwr/Malwr.py#L96'>Packs/Malwr/Integrations/Malwr/Malwr.py:96:18:</a> PGH001 No builtin `eval()` allowed
</pre>

</p>
</details>
<details><summary>ibis (+1, -0)</summary>
<p>

<pre>
+ <a href='https://github.com/ibis-project/ibis/blob/36270a994a5009732e7dc13d1737942551384ec1/ibis/common/typing.py#L197'>ibis/common/typing.py:197:69:</a> RUF100 Unused `noqa` directive (non-enabled: `S307`)
</pre>

</p>
</details>
Rules changed: 3

<p>| Rule | Changes | Additions | Removals |
| ---- | ------- | --------- | -------- |
| PGH001 | 2 | 0 | 2 |
| S307 | 1 | 0 | 1 |
| RUF100 | 1 | 1 | 0 |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">breaking</span> added by @MichaReiser on 2023-09-19 06:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-09-19 06:12</div>
            <div class="timeline-body"><p>Is this a breaking change? What do we need to document in the changelog?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2023-09-19 06:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-19 19:29</div>
            <div class="timeline-body"><p>Yes and no...</p>
<p>If users have <code>PGH001</code> explicitly selected or ignored in their configuration file, we'll show a warning but automatically redirect it to <code>S307</code>.</p>
<p>If users have <code># noqa: PGH001</code>, we'll similarly warn-and-redirect to <code>S307</code>.</p>
<p>The main <em>problem</em> here is that if users have <code>PGH</code> in their <code>select</code>, but <em>not</em> <code>S</code>, this rule will no longer run on their code. That's kind of an issue, because the rule is basically being silently turned off (and is the source of the ecosystem changes).</p>
<p>I'm not sure how best to resolve -- any ideas?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-27 04:37</div>
            <div class="timeline-body"><p>@zanieb - This one actually might be interesting to you too (especially my comment about regarding redirects).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-09-30 15:58</div>
            <div class="timeline-body"><p>We really should implement proper rule aliasing, this getting more and more unwieldy as we add new rules. It's really surprising when a new user migrates a flake8-plugin to ruff only to find they also have to enable a bunch of rules in different other categories to make functionality of the original plugin.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-09-30 16:03</div>
            <div class="timeline-body"><blockquote>
<p>The main problem here is that if users have PGH in their select, but not S, this rule will no longer run on their code. That's kind of an issue, because the rule is basically being silently turned off</p>
</blockquote>
<p>This sounds like a breaking change to me. Proper aliasing does sound like the better solution and probably something we need for recategorization anyway?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-09-30 16:08</div>
            <div class="timeline-body"><p>@zanieb Agree, public rule aliasing is probably one of the largest painpoints right now and it will only become a bigger maintenance burden on us later the more rules get added without this feature.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-30 16:59</div>
            <div class="timeline-body"><p>Separate from the larger conversation around rule aliasing (see my comment in the related issue), we should consider removing this whole category and marking it as a breaking change. There are so few rules, multiple of them are duplicates of other existing rules, and there's no semantic relationship <em>between</em> the various rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-30 17:01</div>
            <div class="timeline-body"><blockquote>
<p>Proper aliasing does sound like the better solution and probably something we need for recategorization anyway?</p>
</blockquote>
<p>I think there are ways for us to do a recategorization without aliasing, because it doesn't require that we support <em>multiple</em> codes at once for a given rule, only that we provide tooling to remap from existing to updated codes and categories.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-10 22:17</div>
            <div class="timeline-body"><p>Should we remove the whole category instead of this pull request? Either way I think we should probably gate removal or this alias with preview.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-10 22:31</div>
            <div class="timeline-body"><p>I’m in favor of that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-30 22:20</div>
            <div class="timeline-body"><p>Closing in favor of https://github.com/astral-sh/ruff/issues/8931</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2023-11-30 22:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:00:22 UTC
    </footer>
</body>
</html>
