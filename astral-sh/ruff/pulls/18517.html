<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8-logging`] Stabilize `exc-info-outside-except-handler` (`LOG014`) - astral-sh/ruff #18517</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8-logging</code>] Stabilize <code>exc-info-outside-except-handler</code> (<code>LOG014</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/18517">#18517</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-06-06 22:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<ul>
<li>Stabilizes LOG014 (exc-info-outside-except-handler) rule by changing it from Preview to Stable</li>
</ul>
<h2>Test plan</h2>
<ul>
<li>✅ Rule is already tested in main test function, no migration needed</li>
<li>✅ <code>make check</code> passes</li>
<li>✅ <code>make test</code> passes</li>
</ul>
<h2>Rule Documentation</h2>
<ul>
<li><a href="https://github.com/astral-sh/ruff/blob/main/crates/ruff_linter/src/rules/flake8_logging/mod.rs#L22-L23">Test file</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/exc-info-outside-except-handler/">Rule documentation</a></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-06-06 22:32</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+16 -1 violations, +0 -0 fixes in 4 projects; 51 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+2 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/bd2fbb1fe7b240258ba26f0253feabff6452ec9f/airflow-core/src/airflow/api_fastapi/execution_api/app.py#L187'>airflow-core/src/airflow/api_fastapi/execution_api/app.py:187:55:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/airflow/blob/bd2fbb1fe7b240258ba26f0253feabff6452ec9f/task-sdk/src/airflow/sdk/execution_time/supervisor.py#L1027'>task-sdk/src/airflow/sdk/execution_time/supervisor.py:1027:13:</a> LOG014 `exc_info=` outside exception handlers
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/superset">apache/superset</a> (+13 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/commands/report/base.py#L106'>superset/commands/report/base.py:106:75:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/db_engine_specs/clickhouse.py#L181'>superset/db_engine_specs/clickhouse.py:181:17:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/db_engine_specs/hive.py#L563'>superset/db_engine_specs/hive.py:563:13:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/sql_lab.py#L138'>superset/sql_lab.py:138:69:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/sql_lab.py#L142'>superset/sql_lab.py:142:75:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/tasks/cache.py#L298'>superset/tasks/cache.py:298:31:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/utils/core.py#L574'>superset/utils/core.py:574:43:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/views/error_handling.py#L140'>superset/views/error_handling.py:140:50:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/views/error_handling.py#L145'>superset/views/error_handling.py:145:51:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/views/error_handling.py#L151'>superset/views/error_handling.py:151:52:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/views/error_handling.py#L160'>superset/views/error_handling.py:160:41:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/views/error_handling.py#L187'>superset/views/error_handling.py:187:44:</a> LOG014 `exc_info=` outside exception handlers
+ <a href='https://github.com/apache/superset/blob/08655a7559718e10049fa16f83f40146402405fa/superset/views/error_handling.py#L209'>superset/views/error_handling.py:209:37:</a> LOG014 `exc_info=` outside exception handlers
</pre>

</p>
</details>
<details><summary><a href="https://github.com/rotki/rotki">rotki/rotki</a> (+0 -1 violations, +0 -0 fixes)</summary>
<p>

<pre>
- <a href='https://github.com/rotki/rotki/blob/6fc06cfcc5434e984aa676b51896ab2c0fe433c4/rotkehlchen/api/server.py#L439'>rotkehlchen/api/server.py:439:29:</a> RUF100 [*] Unused `noqa` directive (non-enabled: `LOG014`)
</pre>

</p>
</details>
<details><summary><a href="https://github.com/zulip/zulip">zulip/zulip</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/zulip/zulip/blob/c41a96a9540a2c9b7f6dadf6eef02ed3080dff81/zerver/lib/push_notifications.py#L1334'>zerver/lib/push_notifications.py:1334:21:</a> LOG014 `exc_info=` outside exception handlers
</pre>

</p>
</details>
<details><summary>Changes by rule (2 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| LOG014 | 16 | 16 | 0 | 0 | 0 |
| RUF100 | 1 | 0 | 1 | 0 | 0 |</p>
</p>
</details>

<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-06-06 22:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-06 22:42</div>
            <div class="timeline-body"><p>I'm kind of on the fence about the ecosystem results. Some of them seem like true positives, like the zulip case, but many of the others are in functions annotated with some kind of <code>@app.exception_handler</code> decorator. I'm not sure there's much we can do about this, though, as the type of <code>app</code> and the name of the decorator varies across packages. It might be rare enough that <code>noqa</code> is the answer, but I'm open to other thoughts here. In general it seems difficult to detect whether or not we're in an &quot;exception handler,&quot; as the RUF100 case in rotki also demonstrates.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-09 22:14</div>
            <div class="timeline-body"><p>I think stabilizing this is in line with other rules we've stabilized, and 16 ecosystem hits is not much overall. LOG004 and LOG014 are the only 2/7 LOG rules in preview still. I gave LOG004 a <code>Stabilize*</code> on Notion because of https://github.com/astral-sh/ruff/issues/18044, which I think we could help with a documentation fix and finish stabilizing the set.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dylwil3 by @ntBre on 2025-06-09 22:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dylwil3">@dylwil3</a> approved on 2025-06-09 22:32</div>
            <div class="timeline-body"><p>I think it's okay to stabilize this for the reasons you give. Codebases with lots of custom exception handlers may choose not to enable the rule at all if it's noisy - it seems relatively niche to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Stabilize LOG014 (exc-info-outside-except-handler)" to "[`flake8-loggin`] Stabilize `exc-info-outside-except-handler` (`LOG014`)" by @ntBre on 2025-06-10 01:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[`flake8-loggin`] Stabilize `exc-info-outside-except-handler` (`LOG014`)" to "[`flake8-logging`] Stabilize `exc-info-outside-except-handler` (`LOG014`)" by @ntBre on 2025-06-10 01:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @ntBre on 2025-06-10 01:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-06-10 01:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-06-10 01:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.12" by @ntBre on 2025-06-10 20:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:13:12 UTC
    </footer>
</body>
</html>
