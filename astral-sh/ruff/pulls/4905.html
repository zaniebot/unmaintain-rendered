<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Run shadowed-variable analyses in deferred handlers - astral-sh/ruff #4905</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Run shadowed-variable analyses in deferred handlers</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/4905">#4905</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-06-06 18:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-06 18:34</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>More to come.</p>
<p>This doesn't properly handle deletions, but I want to create the draft PR so that I don't lose the benchmarks.</p>
<p>On main:</p>
<pre><code>Benchmark 1: ./target/release/ruff crates/ruff/resources/test/cpython --silent -e --no-cache --select F402,F811
  Time (mean ± σ):     208.5 ms ±   7.3 ms    [User: 1724.4 ms, System: 64.6 ms]
  Range (min … max):   199.2 ms … 241.5 ms    100 runs

Benchmark 1: ./target/release/ruff crates/ruff/resources/test/cpython --silent -e --no-cache --select F402,F811
  Time (mean ± σ):     213.2 ms ±   8.2 ms    [User: 1764.5 ms, System: 63.8 ms]
  Range (min … max):   202.5 ms … 243.4 ms    100 runs
</code></pre>
<p>On <code>charlie/move-bindings</code>:</p>
<pre><code>Benchmark 1: ./target/release/ruff crates/ruff/resources/test/cpython --silent -e --no-cache --select F402,F811
  Time (mean ± σ):     208.3 ms ±   6.0 ms    [User: 1734.5 ms, System: 63.2 ms]
  Range (min … max):   200.6 ms … 240.2 ms    100 runs

Benchmark 1: ./target/release/ruff crates/ruff/resources/test/cpython --silent -e --no-cache --select F402,F811
  Time (mean ± σ):     212.8 ms ±   7.5 ms    [User: 1770.8 ms, System: 63.3 ms]
  Range (min … max):   203.9 ms … 248.9 ms    100 runs
</code></pre>
<p><code>cargo benchmark</code> showed no significant changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-12 20:11</div>
            <div class="timeline-body"><p>Closing for now, but I'm going to reopen this once we handle deletions properly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-06-12 20:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 03:44:08 UTC
    </footer>
</body>
</html>
