<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pylint`] - add fix for unary expressions in `PLC2801` - astral-sh/ruff #9587</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pylint</code>] - add fix for unary expressions in <code>PLC2801</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/9587">#9587</a>
        opened by <a href="https://github.com/diceroll123">@diceroll123</a>
        on 2024-01-20 01:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/diceroll123">@diceroll123</a></div>
            <div class="timeline-body">Summary
<p>Closes #9572</p>
<p>Don&#x27;t go easy on this review!</p>
Test Plan
<p><code>cargo test</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-01-20 02:15</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>‚úÖ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>‚ÑπÔ∏è ecosystem check <strong>detected linter changes</strong>. (+48 -0 violations, +0 -48 fixes in 5 projects; 38 projects unchanged)</p>
<a href="https://github.com/apache/airflow">apache/airflow</a> (+0 -0 violations, +0 -6 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/apache/airflow/blob/f7f005f180221a1ba5dc17ef4ff49ee21a46b540/tests/providers/amazon/aws/hooks/test_base_aws.py#L556">tests/providers/amazon/aws/hooks/test_base_aws.py:556:17:</a> PLC2801 Unnecessary dunder call to `__bool__`. Use `bool()` builtin.
- <a href="https://github.com/apache/airflow/blob/f7f005f180221a1ba5dc17ef4ff49ee21a46b540/tests/providers/amazon/aws/hooks/test_base_aws.py#L556">tests/providers/amazon/aws/hooks/test_base_aws.py:556:17:</a> PLC2801 [*] Unnecessary dunder call to `__bool__`. Use `bool()` builtin.
+ <a href="https://github.com/apache/airflow/blob/f7f005f180221a1ba5dc17ef4ff49ee21a46b540/tests/providers/google/common/hooks/test_discovery_api.py#L134">tests/providers/google/common/hooks/test_discovery_api.py:134:17:</a> PLC2801 Unnecessary dunder call to `__bool__`. Use `bool()` builtin.
- <a href="https://github.com/apache/airflow/blob/f7f005f180221a1ba5dc17ef4ff49ee21a46b540/tests/providers/google/common/hooks/test_discovery_api.py#L134">tests/providers/google/common/hooks/test_discovery_api.py:134:17:</a> PLC2801 [*] Unnecessary dunder call to `__bool__`. Use `bool()` builtin.
+ <a href="https://github.com/apache/airflow/blob/f7f005f180221a1ba5dc17ef4ff49ee21a46b540/tests/providers/google/common/hooks/test_discovery_api.py#L140">tests/providers/google/common/hooks/test_discovery_api.py:140:17:</a> PLC2801 Unnecessary dunder call to `__bool__`. Use `bool()` builtin.
- <a href="https://github.com/apache/airflow/blob/f7f005f180221a1ba5dc17ef4ff49ee21a46b540/tests/providers/google/common/hooks/test_discovery_api.py#L140">tests/providers/google/common/hooks/test_discovery_api.py:140:17:</a> PLC2801 [*] Unnecessary dunder call to `__bool__`. Use `bool()` builtin.
</pre>

</p>

<a href="https://github.com/aws/aws-sam-cli">aws/aws-sam-cli</a> (+0 -0 violations, +0 -24 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/commands/local/lib/test_debug_context.py#L32">tests/unit/commands/local/lib/test_debug_context.py:32:25:</a> PLC2801 Unnecessary dunder call to `__bool__`. Use `bool()` builtin.
- <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/commands/local/lib/test_debug_context.py#L32">tests/unit/commands/local/lib/test_debug_context.py:32:25:</a> PLC2801 [*] Unnecessary dunder call to `__bool__`. Use `bool()` builtin.
+ <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/commands/local/lib/test_debug_context.py#L45">tests/unit/commands/local/lib/test_debug_context.py:45:26:</a> PLC2801 Unnecessary dunder call to `__bool__`. Use `bool()` builtin.
- <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/commands/local/lib/test_debug_context.py#L45">tests/unit/commands/local/lib/test_debug_context.py:45:26:</a> PLC2801 [*] Unnecessary dunder call to `__bool__`. Use `bool()` builtin.
+ <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/local/apigw/test_local_apigw_service.py#L1995">tests/unit/local/apigw/test_local_apigw_service.py:1995:29:</a> PLC2801 Unnecessary dunder call to `__hash__`. Use `hash()` builtin.
- <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/local/apigw/test_local_apigw_service.py#L1995">tests/unit/local/apigw/test_local_apigw_service.py:1995:29:</a> PLC2801 [*] Unnecessary dunder call to `__hash__`. Use `hash()` builtin.
+ <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/local/apigw/test_local_apigw_service.py#L1995">tests/unit/local/apigw/test_local_apigw_service.py:1995:48:</a> PLC2801 Unnecessary dunder call to `__hash__`. Use `hash()` builtin.
- <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/local/apigw/test_local_apigw_service.py#L1995">tests/unit/local/apigw/test_local_apigw_service.py:1995:48:</a> PLC2801 [*] Unnecessary dunder call to `__hash__`. Use `hash()` builtin.
+ <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/local/apigw/test_local_apigw_service.py#L2000">tests/unit/local/apigw/test_local_apigw_service.py:2000:29:</a> PLC2801 Unnecessary dunder call to `__hash__`. Use `hash()` builtin.
- <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/local/apigw/test_local_apigw_service.py#L2000">tests/unit/local/apigw/test_local_apigw_service.py:2000:29:</a> PLC2801 [*] Unnecessary dunder call to `__hash__`. Use `hash()` builtin.
+ <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/local/apigw/test_local_apigw_service.py#L2000">tests/unit/local/apigw/test_local_apigw_service.py:2000:48:</a> PLC2801 Unnecessary dunder call to `__hash__`. Use `hash()` builtin.
- <a href="https://github.com/aws/aws-sam-cli/blob/613b12df945d0dde53975e92d2976394a21c48b9/tests/unit/local/apigw/test_local_apigw_service.py#L2000">tests/unit/local/apigw/test_local_apigw_service.py:2000:48:</a> PLC2801 [*] Unnecessary dunder call to `__hash__`. Use `hash()` builtin.
... 12 additional changes omitted for project
</pre>

</p>

<a href="https://github.com/freedomofpress/securedrop">freedomofpress/securedrop</a> (+0 -0 violations, +0 -14 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/freedomofpress/securedrop/blob/1486da6ffbbe80ee8ea0d7eb69ce7f085a5cbb8f/securedrop/pretty_bad_protocol/_meta.py#L677">securedrop/pretty_bad_protocol/_meta.py:677:54:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
- <a href="https://github.com/freedomofpress/securedrop/blob/1486da6ffbbe80ee8ea0d7eb69ce7f085a5cbb8f/securedrop/pretty_bad_protocol/_meta.py#L677">securedrop/pretty_bad_protocol/_meta.py:677:54:</a> PLC2801 [*] Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/freedomofpress/securedrop/blob/1486da6ffbbe80ee8ea0d7eb69ce7f085a5cbb8f/securedrop/pretty_bad_protocol/_meta.py#L688">securedrop/pretty_bad_protocol/_meta.py:688:59:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
- <a href="https://github.com/freedomofpress/securedrop/blob/1486da6ffbbe80ee8ea0d7eb69ce7f085a5cbb8f/securedrop/pretty_bad_protocol/_meta.py#L688">securedrop/pretty_bad_protocol/_meta.py:688:59:</a> PLC2801 [*] Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/freedomofpress/securedrop/blob/1486da6ffbbe80ee8ea0d7eb69ce7f085a5cbb8f/securedrop/pretty_bad_protocol/_util.py#L364">securedrop/pretty_bad_protocol/_util.py:364:11:</a> PLC2801 Unnecessary dunder call to `__str__`. Use `str()` builtin.
- <a href="https://github.com/freedomofpress/securedrop/blob/1486da6ffbbe80ee8ea0d7eb69ce7f085a5cbb8f/securedrop/pretty_bad_protocol/_util.py#L364">securedrop/pretty_bad_protocol/_util.py:364:11:</a> PLC2801 [*] Unnecessary dunder call to `__str__`. Use `str()` builtin.
+ <a href="https://github.com/freedomofpress/securedrop/blob/1486da6ffbbe80ee8ea0d7eb69ce7f085a5cbb8f/securedrop/tests/test_db.py#L76">securedrop/tests/test_db.py:76:9:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
- <a href="https://github.com/freedomofpress/securedrop/blob/1486da6ffbbe80ee8ea0d7eb69ce7f085a5cbb8f/securedrop/tests/test_db.py#L76">securedrop/tests/test_db.py:76:9:</a> PLC2801 [*] Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/freedomofpress/securedrop/blob/1486da6ffbbe80ee8ea0d7eb69ce7f085a5cbb8f/securedrop/tests/test_db.py#L83">securedrop/tests/test_db.py:83:9:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
- <a href="https://github.com/freedomofpress/securedrop/blob/1486da6ffbbe80ee8ea0d7eb69ce7f085a5cbb8f/securedrop/tests/test_db.py#L83">securedrop/tests/test_db.py:83:9:</a> PLC2801 [*] Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
... 4 additional changes omitted for project
</pre>

</p>

<a href="https://github.com/milvus-io/pymilvus">milvus-io/pymilvus</a> (+0 -0 violations, +0 -4 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/milvus-io/pymilvus/blob/dd6ad25509825cf7fa70b29d36c737c89797e50d/pymilvus/client/prepare.py#L1196">pymilvus/client/prepare.py:1196:24:</a> PLC2801 Unnecessary dunder call to `__str__`. Use `str()` builtin.
- <a href="https://github.com/milvus-io/pymilvus/blob/dd6ad25509825cf7fa70b29d36c737c89797e50d/pymilvus/client/prepare.py#L1196">pymilvus/client/prepare.py:1196:24:</a> PLC2801 [*] Unnecessary dunder call to `__str__`. Use `str()` builtin.
+ <a href="https://github.com/milvus-io/pymilvus/blob/dd6ad25509825cf7fa70b29d36c737c89797e50d/pymilvus/orm/iterator.py#L247">pymilvus/orm/iterator.py:247:19:</a> PLC2801 Unnecessary dunder call to `__len__`. Use `len()` builtin.
- <a href="https://github.com/milvus-io/pymilvus/blob/dd6ad25509825cf7fa70b29d36c737c89797e50d/pymilvus/orm/iterator.py#L247">pymilvus/orm/iterator.py:247:19:</a> PLC2801 [*] Unnecessary dunder call to `__len__`. Use `len()` builtin.
</pre>

</p>

<a href="https://github.com/pandas-dev/pandas">pandas-dev/pandas</a> (+48 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/arrays/sparse/test_arithmetics.py#L407">pandas/tests/arrays/sparse/test_arithmetics.py:407:14:</a> PLC2801 Unnecessary dunder call to `__add__`. Use `+` operator.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/arrays/string_/test_string.py#L195">pandas/tests/arrays/string_/test_string.py:195:12:</a> PLC2801 Unnecessary dunder call to `__add__`. Use `+` operator.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/arrays/string_/test_string.py#L211">pandas/tests/arrays/string_/test_string.py:211:12:</a> PLC2801 Unnecessary dunder call to `__add__`. Use `+` operator.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/base/test_conversion.py#L135">pandas/tests/base/test_conversion.py:135:28:</a> PLC2801 Unnecessary dunder call to `__iter__`. Use `iter()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/base/test_conversion.py#L53">pandas/tests/base/test_conversion.py:53:28:</a> PLC2801 Unnecessary dunder call to `__iter__`. Use `iter()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/base/test_conversion.py#L85">pandas/tests/base/test_conversion.py:85:28:</a> PLC2801 Unnecessary dunder call to `__iter__`. Use `iter()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/dtypes/test_dtypes.py#L230">pandas/tests/dtypes/test_dtypes.py:230:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/groupby/test_groupby.py#L2156">pandas/tests/groupby/test_groupby.py:2156:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/groupby/test_groupby.py#L2159">pandas/tests/groupby/test_groupby.py:2159:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/groupby/test_grouping.py#L1116">pandas/tests/groupby/test_grouping.py:1116:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/multi/test_formats.py#L105">pandas/tests/indexes/multi/test_formats.py:105:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/multi/test_formats.py#L111">pandas/tests/indexes/multi/test_formats.py:111:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/multi/test_formats.py#L120">pandas/tests/indexes/multi/test_formats.py:120:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/multi/test_formats.py#L153">pandas/tests/indexes/multi/test_formats.py:153:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/multi/test_formats.py#L158">pandas/tests/indexes/multi/test_formats.py:158:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/multi/test_formats.py#L173">pandas/tests/indexes/multi/test_formats.py:173:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/multi/test_formats.py#L51">pandas/tests/indexes/multi/test_formats.py:51:22:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/multi/test_formats.py#L63">pandas/tests/indexes/multi/test_formats.py:63:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/multi/test_formats.py#L69">pandas/tests/indexes/multi/test_formats.py:69:18:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/multi/test_formats.py#L81">pandas/tests/indexes/multi/test_formats.py:81:22:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/multi/test_formats.py#L93">pandas/tests/indexes/multi/test_formats.py:93:22:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/test_base.py#L778">pandas/tests/indexes/test_base.py:778:33:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/indexes/test_common.py#L202">pandas/tests/indexes/test_common.py:202:29:</a> PLC2801 Unnecessary dunder call to `__repr__`. Use `repr()` builtin.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/scalar/timedelta/test_arithmetic.py#L1156">pandas/tests/scalar/timedelta/test_arithmetic.py:1156:12:</a> PLC2801 Unnecessary dunder call to `__add__`. Use `+` operator.
+ <a href="https://github.com/pandas-dev/pandas/blob/d2bc8460f64701ea7824021da5af98238de8168b/pandas/tests/scalar/timedelta/test_arithmetic.py#L1157">pandas/tests/scalar/timedelta/test_arithmetic.py:1157:12:</a> PLC2801 Unnecessary dunder call to `__sub__`. Use `-` operator.
... 23 additional changes omitted for project
</pre>

</p>

Changes by rule (1 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PLC2801 | 96 | 48 | 0 | 0 | 48 |</p>
</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-26 04:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/diceroll123">@diceroll123</a> on 2024-01-26 04:09</div>
            <div class="timeline-body"><p>I see now that the <code>set_fix</code> in both sides of the unary if statement can be moved out, but I won&#x27;t touch it until after you&#x27;ve reviewed @charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-26 04:12</div>
            <div class="timeline-body"><p>@diceroll123 - Feel free to change, I won&#x27;t get to this until tomorrow.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2024-01-26 04:43</div>
            <div class="timeline-body"><a href="https://codspeed.io/astral-sh/ruff/branches/diceroll123:tweak-PLC2801">CodSpeed Performance Report</a>
Merging #9587 will <strong>not alter performance</strong>
<p>Comparing <code>diceroll123:tweak-PLC2801</code> (1a14221) with <code>main</code> (c007b17)</p>
Summary
<p><code>‚úÖ 30</code> untouched benchmarks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">autofix</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-01-26 07:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_dunder_call.rs</code>:161 on 2024-01-26 09:06</div>
            <div class="timeline-body"><p>The section here could use a comment explaining on why we&#x27;re doing what we&#x27;re doing below because it&#x27;s not immediately obvious what it is about.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_dunder_call.rs</code>:173 on 2024-01-26 09:07</div>
            <div class="timeline-body"><p>What happens if we have <code>a.__sub__(((((b)))))</code>?</p>
<p>You can use <code>call.arguments.start</code> (or <code>end</code>) to get the parentheses offsets of the call expression and retain those.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_dunder_call.rs</code>:168 on 2024-01-26 09:09</div>
            <div class="timeline-body"><p>I wonder if the fix produces invalid code if you have</p>
<pre><code>4.__sub__(
    3 
    + 
    4
)
</code></pre>
<p>What i understand is that we fix this to</p>
<pre><code>a -
    3
    +
    4
</code></pre>
<p>which Python doesn&#x27;t like very much</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_dunder_call.rs</code>:169 on 2024-01-26 09:11</div>
            <div class="timeline-body"><p>Can we start after the <code>attribute</code> to reduce the text that need to be searched?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-01-26 09:14</div>
            <div class="timeline-body"><p>Would it be possible to generalize the fix to correctly handle operator precedence in general. There are some more cases mentioned on the linked Issue that this PR doesn&#x27;t address.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/diceroll123">@diceroll123</a> reviewed on 2024-01-27 00:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/diceroll123">@diceroll123</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_dunder_call.rs</code>:169 on 2024-01-27 00:40</div>
            <div class="timeline-body"><p>Can&#x27;t start after the value in this case.</p>
<p>We&#x27;re looking for this,</p>
<pre><code>(-a).__sub__(1)
###^
</code></pre>
<p>and the difference between</p>
<p><code>(-a).__sub__(1)</code> and <code>-a.__sub__(1)</code></p>
<p>It could possibly be optimized another way though, perhaps by checking the tokens between <code>value</code> and the first <code>Dot</code> ü§î</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/diceroll123">@diceroll123</a> on 2024-01-27 05:06</div>
            <div class="timeline-body"><p>Made some tweaks!</p>
<p>First and foremost: the fix is marked as unsafe. This could be conditional with more type logic in a future iteration, for sure.</p>
<p>The arguments within the dunder method call will now stay in parentheses if it&#x27;s anything more complex than a literal/name/attribute. I&#x27;m sure that logic may be fine to expand into other expression types.</p>
<p>So, this example:</p>
<pre><code>print(a.__sub__(
    3
    +
    4
))
</code></pre>
<p>now turns into</p>
<pre><code>print(a - (3
    +
    4
))
</code></pre>
<hr>
<p>And since you explicitly asked,</p>
<pre><code>print(a.__sub__(((((2 - 1))))))
</code></pre>
<p>is now reduced to</p>
<pre><code>print(a - (2 - 1))  # PLC2801
</code></pre>
<p>Semantically it&#x27;s the same, regardless of extra parens. <em><code>UP034</code> and/or the formatter could take care of those extra parens if we did want to keep them though...</em></p>
<hr>
<p>Looking forward to opinions on improving it further! üòÑ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_dunder_call.rs</code>:130 on 2024-02-22 17:05</div>
            <div class="timeline-body"><p>I think we can exclude some more expressions here</p>
<ul>
<li>Calls</li>
<li>Unary expressions</li>
<li>Lambda</li>
<li>If expressions (I think)?</li>
<li>Dict / Set / List / Tuple and all comprehension variants (everything with parentheses)</li>
<li>Generators</li>
<li>Subscripts</li>
<li>Starred (I think)</li>
<li>Slices?</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-02-22 17:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-02-22 17:06</div>
            <div class="timeline-body"><p>Sorry for the late review.  The <code>uv</code> release took a lot of attention recently.</p>
<p>This is an excellent improvement. I think there are a few more situations where adding the parentheses isn&#x27;t strictly necessary. You might want to move the logic into its own function to avoid coding it twice.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/diceroll123">@diceroll123</a> reviewed on 2024-03-02 05:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/diceroll123">@diceroll123</a> on <code>crates/ruff_linter/src/rules/pylint/rules/unnecessary_dunder_call.rs</code>:130 on 2024-03-02 05:09</div>
            <div class="timeline-body"><p>Reworked it, added all of the above except Unary (because that&#x27;s what got us this PR in the first place hah)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/diceroll123">@diceroll123</a> on 2024-03-02 05:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-03-04 10:25</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-04 10:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-04 10:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:00:50 UTC
    </footer>
</body>
</html>
