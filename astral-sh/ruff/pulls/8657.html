<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>isort: Support disabling sections with ``no-sections = true`` - astral-sh/ruff #8657</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>isort: Support disabling sections with <code>no-sections = true</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/8657">#8657</a>
        opened by <a href="https://github.com/jelmer">@jelmer</a>
        on 2023-11-13 17:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jelmer">@jelmer</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This adds a <code>no-sections</code> option for isort in the linter, similar to the <code>no_sections</code> option that exists in upstream isort (https://pycqa.github.io/isort/docs/configuration/options.html#no-sections)</p>
<p>This option puts all imports except for <code>__future__</code> into the same section, and is mostly used by monorepos.</p>
<p>I've taken a bit of a leap in assuming that ruff wants to support the exact same option; more than happy to refactor if you'd prefer a different way of setting this up.</p>
<p>Fixes #8653</p>
<h2>Test Plan</h2>
<p>I've added a test and have run it on a large Python codebase that uses isort with --no-sections. The option is disabled by default.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-11-13 17:51</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @jelmer on 2023-11-13 18:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_linter/src/rules/isort/categorize.rs</code>:81 on 2023-11-13 20:41</div>
            <div class="timeline-body"><p>Does isort put the <code>__future__</code> imports in their own section, even if you pass <code>--no-sections</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-11-13 20:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-11-13 20:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_workspace/src/options.rs</code>:2121 on 2023-11-13 20:41</div>
            <div class="timeline-body"><p>I think it'd be great to have some of these warnings here prior to merging.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-11-13 20:42</div>
            <div class="timeline-body"><p>Thanks for getting involved! No objection to adding this, and no objection to using the same nomenclature and API as isort. Left a few small questions and comments, but should be able to get this merged relatively quickly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jelmer">@jelmer</a> reviewed on 2023-11-13 20:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jelmer">@jelmer</a> on <code>crates/ruff_linter/src/rules/isort/categorize.rs</code>:81 on 2023-11-13 20:45</div>
            <div class="timeline-body"><p>Yes, I can reproduce that with isort itself - it explicitly special-cases <code>__future__</code>, as can be seen here: https://github.com/PyCQA/isort/blob/c574c4c190ceddb66b10330ae811a95306f07b74/isort/output.py#L36</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by @charliermarsh on 2023-11-14 00:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jelmer">@jelmer</a> reviewed on 2023-11-14 11:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jelmer">@jelmer</a> on <code>crates/ruff_workspace/src/options.rs</code>:2121 on 2023-11-14 11:37</div>
            <div class="timeline-body"><p>I've added a warning for these two situations.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @jelmer on 2023-11-14 11:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "isort: Support disabling sections with ``no_sections = false``" to "isort: Support disabling sections with ``no-sections = true``" by @jelmer on 2023-11-14 11:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-11-14 18:10</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-11-14 21:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-11-14 21:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:01:25 UTC
    </footer>
</body>
</html>
