<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pyupgrade`] Remove `non-pep604-isinstance` (`UP038`) - astral-sh/ruff #19156</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pyupgrade</code>] Remove <code>non-pep604-isinstance</code> (<code>UP038</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19156">#19156</a>
        opened by <a href="https://github.com/CodeMan62">@CodeMan62</a>
        on 2025-07-05 17:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/CodeMan62">@CodeMan62</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR Removes deprecated UP038 as per instructed in #18727
closes #18727</p>
<h2>Test Plan</h2>
<p>I have run tests non of them failing</p>
<p>One Question i have is do we have to document that UP038 is removed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @CodeMan62 on 2025-07-05 17:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">breaking</span> added by @AlexWaygood on 2025-07-05 17:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">do-not-merge</span> added by @AlexWaygood on 2025-07-05 17:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-07-05 17:47</div>
            <div class="timeline-body"><p>Thanks. Unfortunately we won't be able to merge this until the next minor release (v0.13), as it's a breaking change.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.13" by @AlexWaygood on 2025-07-05 17:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>changelogs/0.1.x.md</code>:93 on 2025-07-05 17:49</div>
            <div class="timeline-body"><p>we shouldn't be removing mentions of the rule from old changelogs. That's a useful record of the changes that were made in previous versions; just because the rule is being removed doesn't mean we should try to erase history :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-07-05 17:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CodeMan62">@CodeMan62</a> on 2025-07-05 17:52</div>
            <div class="timeline-body"><p>no worries Thanks for letting me know I will fix these failing CI</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/CodeMan62">@CodeMan62</a> reviewed on 2025-07-05 17:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/CodeMan62">@CodeMan62</a> on <code>changelogs/0.1.x.md</code>:93 on 2025-07-05 17:53</div>
            <div class="timeline-body"><p>Ok I will revert this. thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-07-05 18:16</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>detected linter changes</strong>. (+0 -1 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<details><summary><a href="https://github.com/rotki/rotki">rotki/rotki</a> (+0 -1 violations, +0 -0 fixes)</summary>
<p>

<pre>
- <a href='https://github.com/rotki/rotki/blob/2fdda4d3a7507b13f4c6d994d789a2da173349cd/rotkehlchen/externalapis/blockscout.py#L205'>rotkehlchen/externalapis/blockscout.py:205:40:</a> UP038 Use `X | Y` in `isinstance` call instead of `(X, Y)`
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| UP038 | 1 | 0 | 1 | 0 | 0 |</p>
</p>
</details>

<h3>Linter (preview)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>‚úÖ ecosystem check detected no format changes.</p>
<h3>Formatter (preview)</h3>
<p>‚úÖ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> requested changes on 2025-07-07 11:56</div>
            <div class="timeline-body"><p>Rather than removing the rule implementation at all, I think we just want to change the category of the rule to <code>Removed</code>, similar to the changes we made to <code>S320</code> in https://github.com/astral-sh/ruff/pull/18617. That way it doesn't break the configuration setup of lots of projects. (We can see the effect it currently has from the ecosystem report)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CodeMan62">@CodeMan62</a> on 2025-07-07 15:56</div>
            <div class="timeline-body"><p>sounds good me :+1:  doing it
EDIT:- DONE</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>changelogs/0.1.x.md</code>:1 on 2025-07-07 16:45</div>
            <div class="timeline-body"><p>please revert all changes to this file</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>changelogs/0.10.x.md</code>:1 on 2025-07-07 16:45</div>
            <div class="timeline-body"><p>please revert all changes to this file</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/resources/test/fixtures/pyupgrade/UP038.py</code>:1 on 2025-07-07 16:46</div>
            <div class="timeline-body"><p>please revert all changes to this file</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/pyupgrade/snapshots/ruff_linter__rules__pyupgrade__tests__UP038.py.snap</code>:1 on 2025-07-07 16:46</div>
            <div class="timeline-body"><p>please revert all changes to this file</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> had review dismissed on 2025-07-07 16:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-07-07 16:52</div>
            <div class="timeline-body"><p>Wait, the changes you previously had applied to <code>python/py-fuzzer/pyproject.toml</code> looked correct to me üòÜ I don't think https://github.com/astral-sh/ruff/pull/19156/commits/2daaf98678463df141a115d577f98364b8e7bcbb was something you needed to do</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CodeMan62">@CodeMan62</a> on 2025-07-07 16:56</div>
            <div class="timeline-body"><p>give me 2 mins i am reverting snapshots too i need to do that locally</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-07-07 17:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>python/py-fuzzer/pyproject.toml</code>:66 on 2025-07-07 17:16</div>
            <div class="timeline-body"><pre><code class="language-suggestion"></code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/CodeMan62">@CodeMan62</a> reviewed on 2025-07-07 17:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/CodeMan62">@CodeMan62</a> on <code>python/py-fuzzer/pyproject.toml</code>:66 on 2025-07-07 17:18</div>
            <div class="timeline-body"><p>thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CodeMan62">@CodeMan62</a> on 2025-07-07 17:20</div>
            <div class="timeline-body"><p>Thanks! I made alot of mistakes here but i am unable to discard snapshot changes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-07-08 18:33</div>
            <div class="timeline-body"><p>This looks good to me now, but we'll still need to wait for the v0.13 release before merging it :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by @dhruvmanila on 2025-07-10 06:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/pyupgrade/rules/use_pep604_isinstance.rs</code>:37 on 2025-09-05 13:46</div>
            <div class="timeline-body"><pre><code class="language-suggestion">/// This rule was removed as using [PEP 604] syntax in `isinstance` and `issubclass` calls
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> approved on 2025-09-05 13:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @ntBre on 2025-09-05 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Remove deprecated UP038" to "[`pyupgrade`] Remove `non-pep604-isinstance` (`UP038`)" by @ntBre on 2025-09-05 13:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @ntBre on 2025-09-05 14:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-09-05 14:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">do-not-merge</span> removed by @ntBre on 2025-09-08 17:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-09-08 17:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:13:58 UTC
    </footer>
</body>
</html>
