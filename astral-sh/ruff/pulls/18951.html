<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8-simplify`] Split `ast_bool_op.rs` into multiple files - astral-sh/ruff #18951</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8-simplify</code>] Split <code>ast_bool_op.rs</code> into multiple files</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/18951">#18951</a>
        opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a>
        on 2025-06-26 05:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a></div>
            <div class="timeline-body">

Summary


<p>While trying to work on #15584, and the other issues I&#x27;ve found with some of these lints, I&#x27;ve become frustrated with how hard it is to navigate/reason about the lints inside <code>ast_bool_op.rs</code> due to there being 6 lints in one file that are not all related. This PR splits them out into their own individual files.</p>
<p>I split a bit more than might have been necessary, as there are 4 &quot;groups&quot; to the lints in <code>ast_bool_op.rs</code>:</p>
<ul>
<li>SIM101 DuplicateIsinstanceCall</li>
<li>SIM109 CompareWithTuple</li>
<li>SIM220 ExprAndNotExpr + SIM221 ExprOrNotExpr</li>
<li>SIM222 ExprOrTrue + SIM223 ExprAndFalse</li>
</ul>
<p>I still decided to split them all out for consistency, but that did necessitate the creation of a <code>helper.rs</code> file since <code>SIM220</code> + <code>SIM221</code> share <code>is_same_expr</code>, and <code>SIM222</code> + <code>SIM223</code> share <code>ContentAround, is_short_circuit</code>, so I would be open to re-combining those two groups into their own files if desired.</p>
<p>If this PR goes over well, I may make several more follow up PRs splitting other frustrating combined-yet-unrelated lints into their own files.</p>
Test Plan


<p>N/A, no tests/functionality affected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-06-26 05:55</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-26 08:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-26 08:52</div>
            <div class="timeline-body"><blockquote>
<p>If this PR goes over well, I may make several more follow up PRs splitting other frustrating combined-yet-unrelated lints into their own files.</p>
</blockquote>
<p>I&#x27;m not sure it&#x27;s worth pre-emptively extracting all those rules. It does come at the cost of making it harder to follow changes (git blame/history). That&#x27;s why I wouldn&#x27;t split rules to which we don&#x27;t plan to make any changes in the foreseeable future. Splitting rules that you plan to work on seems fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-27 17:37</div>
            <div class="timeline-body"><p>Thanks, I&#x27;ll give this a review soon. I agree with Micha about not doing this pre-emptively, but it&#x27;s fine if you&#x27;re already working on the rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2025-06-29 06:29</div>
            <div class="timeline-body"><p>I’ve been thinking about it more, and I don’t think what I’m planning warrants splitting this out yet over the loss of history, so I’m going to close this PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2025-06-29 06:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-07-11 22:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:15:56 UTC
    </footer>
</body>
</html>
