<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] refactor CFG outside of symbol table - astral-sh/ruff #11746</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] refactor CFG outside of symbol table</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11746">#11746</a>
        opened by <a href="https://github.com/carljm">@carljm</a>
        on 2024-06-05 00:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Separate SymbolTable and FlowGraph into their own modules, and make both submodules of <code>red_knot::semantic</code> module. Also move <code>types</code> module into <code>semantic</code>.</p>
<p><code>red_knot::semantic::SemanticIndexer</code> builds a <code>SemanticIndex</code> (consisting of the symbol table and flow graph). The <code>symbol_table</code> query is now <code>semantic_index</code>, and <code>SymbolTablesStorage</code> is <code>SemanticIndexStorage</code>.</p>
<p>Both <code>SymbolTable</code> and <code>FlowGraph</code> are immutable, and constructed using a separate builder.</p>
<p>Fixes #11657.</p>
<h2>Test Plan</h2>
<p>Refactor; existing tests pass.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @carljm on 2024-06-05 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @carljm on 2024-06-05 00:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-06-05 00:57</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-06-05 07:10</div>
            <div class="timeline-body"><p>Thanks for doing this. I like this a lot. It makes the symbol module much more approachable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @carljm on 2024-06-05 12:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @carljm on 2024-06-05 12:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-06-05 12:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:04:40 UTC
    </footer>
</body>
</html>
