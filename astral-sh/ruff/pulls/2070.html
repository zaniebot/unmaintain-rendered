<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICN001 import-alias-is-not-conventional should check &quot;from&quot; imports - astral-sh/ruff #2070</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ICN001 import-alias-is-not-conventional should check &quot;from&quot; imports</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/2070">#2070</a>
        opened by <a href="https://github.com/Zeddicus414">@Zeddicus414</a>
        on 2023-01-21 19:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/Zeddicus414">@Zeddicus414</a> on 2023-01-21 19:43</div>
            <div class="timeline-body"><p>See https://github.com/charliermarsh/ruff/issues/2047</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-21 19:44</div>
            <div class="timeline-body"><p>Thanks! I'll review this in a bit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Zeddicus414">@Zeddicus414</a> on 2023-01-21 19:48</div>
            <div class="timeline-body"><p>Couple of things. I know my commit history is pretty messy. I'm assuming that's something you can just discard during the PR process?</p>
<p>Also, I modified <code>resources/test/fixtures/pyproject.toml</code> and the associated <code>src/settings/pyproject.rs</code> tests before realizing that the insta tests set their own config, so those changes were not needed. I can undo these changes if that's preferred.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-21 19:49</div>
            <div class="timeline-body"><ol>
<li>Yup, commit history is no problem at all. By default, I squash the history, so this ends up as one commit (linked to the PR).</li>
<li>Yeah, if you don't mind, I'd prefer to roll back those changes to <code>pyproject.toml</code>.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-01-21 20:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/checkers/ast.rs</code>:1238 on 2023-01-21 20:07</div>
            <div class="timeline-body"><p>Nit: let's move this into the <code>if</code> below, so that we're not creating this string unless it's needed by the <code>check_conventional_import</code> call.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-01-21 20:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>resources/test/fixtures/flake8_import_conventions/from_imports.py</code>:11 on 2023-01-21 20:09</div>
            <div class="timeline-body"><p>Per your comment in the issue -- yeah, not sure what should happen if a user has <code>&quot;..xml.dom.minidom&quot;</code> in their <code>pyproject.toml</code>. It's obviously a bit weird to support relative imports there (&quot;Relative to what?&quot;), but I think it's fine as-is. There's not a clear right answer. The alternative would be to avoid calling <code>check_conventional_import</code> for relative imports at all.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-01-21 20:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>resources/test/fixtures/flake8_import_conventions/from_imports.py</code>:8 on 2023-01-21 20:09</div>
            <div class="timeline-body"><p>Maybe add a test for an <code>import from</code> with multiple members, only one of which needs to be flagged?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Zeddicus414">@Zeddicus414</a> on <code>resources/test/fixtures/flake8_import_conventions/from_imports.py</code>:11 on 2023-01-21 20:21</div>
            <div class="timeline-body"><p>Leaving as is.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Zeddicus414">@Zeddicus414</a> reviewed on 2023-01-21 20:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Zeddicus414">@Zeddicus414</a> reviewed on 2023-01-21 20:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Zeddicus414">@Zeddicus414</a> on <code>src/checkers/ast.rs</code>:1238 on 2023-01-21 20:25</div>
            <div class="timeline-body"><p>Done.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-01-21 20:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-21 20:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Zeddicus414">@Zeddicus414</a> reviewed on 2023-01-21 20:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Zeddicus414">@Zeddicus414</a> on <code>resources/test/fixtures/flake8_import_conventions/from_imports.py</code>:8 on 2023-01-21 20:47</div>
            <div class="timeline-body"><p>Adding test cases was a good call.</p>
<p>Currently, it considers this a violation:</p>
<pre><code class="language-python">import xml.dom.minidom
</code></pre>
<p>But it doesn't catch these:</p>
<pre><code class="language-python">from xml.dom import minidom
from xml.dom.minidom import parseString
</code></pre>
<p>I'll try to track down what's up. I think these examples should all be violations.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Zeddicus414">@Zeddicus414</a> on 2023-01-21 20:50</div>
            <div class="timeline-body"><p>Oops, looked like you  merged the PR while I was still trying to add some more test conditions. Would you like me to just create a separate PR for that? Or work on it here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-21 20:51</div>
            <div class="timeline-body"><p>Gah sorry, yeah, I jumped the gun. Letâ€™s do it in a separate PR please.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Zeddicus414">@Zeddicus414</a> on 2023-01-21 20:53</div>
            <div class="timeline-body"><p>No big deal. I think everything still works fine in main, there is just the slight inconsistency between the <code>import</code> and <code>from...import</code> cases where no alias is defined.</p>
<p>https://github.com/charliermarsh/ruff/pull/2070#discussion_r1083333898</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-01-21 21:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/checkers/ast.rs</code>:1233 on 2023-01-21 21:32</div>
            <div class="timeline-body"><p>In case you haven't caught it: this block only runs when the <code>as</code> is set (e.g. <code>from foo import bar as baz</code>, but not <code>from foo import bar</code>). I think you can lift all these changes out of this <code>if</code>, maybe?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Zeddicus414">@Zeddicus414</a> reviewed on 2023-01-21 21:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Zeddicus414">@Zeddicus414</a> on <code>src/checkers/ast.rs</code>:1233 on 2023-01-21 21:46</div>
            <div class="timeline-body"><p>ohhhhhhh, yeah, I see it now. I put it under that condition because I thought the original call was under the same clause on line 896, but I miss-read it. It's not under the <code>if let Some(asname) = &amp;alias.node.asname</code> so mine shouldn't be either. Makes sense.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-01-21 22:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/checkers/ast.rs</code>:1233 on 2023-01-21 22:00</div>
            <div class="timeline-body"><p>(Just for clarity in communication: do you plan to fix this, or want me to?)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 04:54:12 UTC
    </footer>
</body>
</html>
