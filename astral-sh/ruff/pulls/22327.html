<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Add support for functional `namedtuple` creation - astral-sh/ruff #22327</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Add support for functional <code>namedtuple</code> creation</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/22327">#22327</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2026-01-01 13:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body">Summary
<p>This PR is intended to demonstrate how the pattern established in <a href="https://github.com/astral-sh/ruff/pull/22291">astral-sh/ruff#22291</a> generalizes to other class &quot;kinds&quot;.</p>
<p>Closes <a href="https://github.com/astral-sh/ty/issues/1049">astral-sh/ty#1049</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-01 13:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2026-01-01 13:25</div>
            <div class="timeline-body">

Diagnostic diff on <a href="https://github.com/python/typing/tree/9f6d8ced7cd1c8d92687a4e9c96d7716452e471e/conformance">typing conformance tests</a>

Changes were detected when running ty on typing conformance tests

<pre><code>--- old-output.txt	2026-01-14 17:03:27.870310683 +0000
+++ new-output.txt	2026-01-14 17:03:28.412310658 +0000
@@ -753,6 +753,16 @@
 namedtuples_define_class.py:86:5: error[invalid-named-tuple] NamedTuple field without default value cannot follow field(s) with default value(s): Field `latitude` defined here without a default value
 namedtuples_define_class.py:125:19: error[invalid-argument-type] Argument is incorrect: Expected `str`, found `float`
 namedtuples_define_class.py:132:24: error[invalid-named-tuple] NamedTuple class `Unit` cannot use multiple inheritance except with `Generic[]`
+namedtuples_define_functional.py:16:8: error[missing-argument] No argument provided for required parameter `y`
+namedtuples_define_functional.py:21:8: error[missing-argument] No arguments provided for required parameters `x`, `y`
+namedtuples_define_functional.py:26:21: error[too-many-positional-arguments] Too many positional arguments: expected 3, got 4
+namedtuples_define_functional.py:31:8: error[missing-argument] No argument provided for required parameter `y`
+namedtuples_define_functional.py:31:18: error[unknown-argument] Argument `z` does not match any known parameter
+namedtuples_define_functional.py:36:18: error[invalid-argument-type] Argument is incorrect: Expected `int`, found `Literal[&quot;1&quot;]`
+namedtuples_define_functional.py:37:21: error[too-many-positional-arguments] Too many positional arguments: expected 3, got 4
+namedtuples_define_functional.py:42:18: error[invalid-argument-type] Argument is incorrect: Expected `int`, found `Literal[&quot;1&quot;]`
+namedtuples_define_functional.py:43:15: error[invalid-argument-type] Argument is incorrect: Expected `int`, found `float`
+namedtuples_define_functional.py:69:1: error[missing-argument] No argument provided for required parameter `a`
 namedtuples_type_compat.py:22:23: error[invalid-assignment] Object of type `Point` is not assignable to `tuple[int, int]`
 namedtuples_type_compat.py:23:28: error[invalid-assignment] Object of type `Point` is not assignable to `tuple[int, str, str]`
 namedtuples_usage.py:34:7: error[index-out-of-bounds] Index 3 is out of bounds for tuple `Point` with length 3
@@ -885,6 +895,10 @@
 qualifiers_final_annotation.py:81:1: error[invalid-assignment] Cannot assign to final attribute `DEFAULT_ID` on type `&lt;class &#x27;ClassB&#x27;&gt;`
 qualifiers_final_annotation.py:118:9: error[invalid-type-form] Type qualifier `typing.Final` is not allowed in type expressions (only in annotation expressions)
 qualifiers_final_annotation.py:121:11: error[invalid-type-form] `Final` is not allowed in function parameter annotations
+qualifiers_final_annotation.py:134:1: error[missing-argument] No arguments provided for required parameters `x`, `y`
+qualifiers_final_annotation.py:134:3: error[unknown-argument] Argument `a` does not match any known parameter
+qualifiers_final_annotation.py:135:3: error[invalid-argument-type] Argument is incorrect: Expected `int`, found `Literal[&quot;&quot;]`
+qualifiers_final_annotation.py:135:9: error[invalid-argument-type] Argument is incorrect: Expected `int`, found `Literal[&quot;&quot;]`
 qualifiers_final_annotation.py:141:5: error[invalid-assignment] Reassignment of `Final` symbol `ID1` is not allowed: Reassignment of `Final` symbol
 qualifiers_final_annotation.py:145:5: error[invalid-assignment] Reassignment of `Final` symbol `x` is not allowed: Symbol later reassigned here
 qualifiers_final_annotation.py:147:10: error[invalid-assignment] Reassignment of `Final` symbol `x` is not allowed: Symbol later reassigned here
@@ -1035,4 +1049,4 @@
 typeddicts_usage.py:28:17: error[missing-typed-dict-key] Missing required key &#x27;name&#x27; in TypedDict `Movie` constructor
 typeddicts_usage.py:28:18: error[invalid-key] Unknown key &quot;title&quot; for TypedDict `Movie`: Unknown key &quot;title&quot;
 typeddicts_usage.py:40:24: error[invalid-type-form] The special form `typing.TypedDict` is not allowed in type expressions
-Found 1037 diagnostics
+Found 1051 diagnostics

</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2026-01-01 13:26</div>
            <div class="timeline-body">

<code>mypy_primer</code> results

Changes were detected when running on open source projects

<pre><code>spack (https://github.com/spack/spack)
+ lib/spack/spack/test/directives.py:118:5: error[invalid-assignment] Object of type `dict[Unknown | Spec, Unknown | str]` is not assignable to attribute `licenses` of type `property`
+ lib/spack/spack/test/directives.py:119:5: error[invalid-assignment] Object of type `Literal[&quot;test_package&quot;]` is not assignable to attribute `name` of type `property`
+ lib/spack/spack/test/directives.py:127:43: error[invalid-argument-type] Argument to function `_execute_license` is incorrect: Expected `type[PackageBase]`, found `&lt;class &#x27;package&#x27;&gt;`
+ lib/spack/spack/test/directives.py:132:5: error[invalid-assignment] Object of type `dict[Unknown | Spec, Unknown | str]` is not assignable to attribute `licenses` of type `property`
+ lib/spack/spack/test/directives.py:133:5: error[invalid-assignment] Object of type `Literal[&quot;test_package&quot;]` is not assignable to attribute `name` of type `property`
+ lib/spack/spack/test/directives.py:141:43: error[invalid-argument-type] Argument to function `_execute_license` is incorrect: Expected `type[PackageBase]`, found `&lt;class &#x27;package&#x27;&gt;`
+ lib/spack/spack/test/directives.py:154:43: error[invalid-argument-type] Argument to function `_execute_version` is incorrect: Expected `type[PackageBase]`, found `package`
+ lib/spack/spack/test/directives.py:158:43: error[invalid-argument-type] Argument to function `_execute_version` is incorrect: Expected `type[PackageBase]`, found `package`
+ lib/spack/spack/test/test_suite.py:264:44: error[invalid-argument-type] Argument to function `copy_test_files` is incorrect: Expected `PackageBase`, found `MyPackage`
+ lib/spack/spack/test/test_suite.py:275:40: error[invalid-argument-type] Argument to function `copy_test_files` is incorrect: Expected `PackageBase`, found `MyPackage`
+ lib/spack/spack/test/test_suite.py:293:47: error[invalid-argument-type] Argument to function `process_test_parts` is incorrect: Expected `PackageBase`, found `MyPackage`
+ lib/spack/spack/test/test_suite.py:532:40: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `PackageBase`, found `MyPackage`
- Found 4322 diagnostics
+ Found 4334 diagnostics

paasta (https://github.com/yelp/paasta)
+ paasta_tools/iptables.py:38:9: error[unresolved-attribute] Object of type `_RuleBase` has no attribute `validate`
- Found 1101 diagnostics
+ Found 1102 diagnostics

alerta (https://github.com/alerta/alerta)
+ alerta/database/backends/mongodb/base.py:455:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:461:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:467:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:481:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:507:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:604:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:664:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:668:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:684:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:688:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:692:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:727:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:764:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:801:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:838:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:882:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:905:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:967:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:971:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1103:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1108:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1136:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1172:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1179:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1233:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1237:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1320:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1324:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1393:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1397:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1444:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1448:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/mongodb/base.py:1503:26: error[missing-argument] No arguments provided for required parameters `where`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:360:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:370:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:389:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:409:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:476:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:518:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:526:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:537:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:546:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:555:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:581:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:607:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:636:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:669:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:703:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:719:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:751:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:761:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:919:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:932:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:966:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:1000:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:1016:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:1079:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:1088:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:1189:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:1198:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:1280:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:1289:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:1354:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:1363:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
+ alerta/database/backends/postgres/base.py:1433:26: error[missing-argument] No arguments provided for required parameters `where`, `vars`, `sort`, `group`
- Found 555 diagnostics
+ Found 620 diagnostics

tornado (https://github.com/tornadoweb/tornado)
- tornado/gen.py:255:62: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `None | Awaitable[Unknown] | list[Awaitable[Unknown]] | dict[Any, Awaitable[Unknown]] | Future[Unknown]`, found `_T@next | _VT@next | _T@next`
+ tornado/gen.py:255:62: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `None | Awaitable[Unknown] | list[Awaitable[Unknown]] | dict[Any, Awaitable[Unknown]] | Future[Unknown]`, found `_T@next | _T@next | _VT@next`

cki-lib (https://gitlab.com/cki-project/cki-lib)
+ tests/test_messagequeue.py:792:32: error[invalid-argument-type] Argument to bound method `_consume_one` is incorrect: Expected `Item`, found `tuple[Literal[&quot;&quot;], None, Literal[&quot;&quot;], Literal[&quot;{}&quot;], Literal[&quot;&quot;], Literal[&quot;&quot;]]`
+ tests/test_messagequeue.py:811:32: error[invalid-argument-type] Argument to bound method `_consume_one` is incorrect: Expected `Item`, found `tuple[Literal[&quot;&quot;], None, Literal[&quot;&quot;], Literal[&quot;{}&quot;], Literal[&quot;&quot;], Literal[&quot;&quot;]]`
- Found 240 diagnostics
+ Found 242 diagnostics

urllib3 (https://github.com/urllib3/urllib3)
- src/urllib3/connectionpool.py:1132:60: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- src/urllib3/connectionpool.py:1134:59: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- Found 305 diagnostics
+ Found 303 diagnostics

mongo-python-driver (https://github.com/mongodb/mongo-python-driver)
- pymongo/asynchronous/auth.py:131:43: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `bytes | bytearray`, found `@Todo | None | bytes`
+ pymongo/asynchronous/auth.py:131:43: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `bytes | bytearray`, found `Any | None | bytes`
- pymongo/asynchronous/auth.py:365:69: error[invalid-assignment] Object of type `dict[str, ((credentials: @Todo, conn: AsyncConnection) -&gt; CoroutineType[Any, Any, None]) | ((credentials: @Todo, conn: AsyncConnection, reauthenticate: bool) -&gt; CoroutineType[Any, Any, Mapping[str, Any] | None]) | partial[CoroutineType[Any, Any, None]]]` is not assignable to `Mapping[str, (...) -&gt; Coroutine[Any, Any, None]]`
+ pymongo/asynchronous/auth.py:365:69: error[invalid-assignment] Object of type `dict[str, ((credentials: MongoCredential, conn: AsyncConnection) -&gt; CoroutineType[Any, Any, None]) | ((credentials: MongoCredential, conn: AsyncConnection, reauthenticate: bool) -&gt; CoroutineType[Any, Any, Mapping[str, Any] | None]) | partial[CoroutineType[Any, Any, None]]]` is not assignable to `Mapping[str, (...) -&gt; Coroutine[Any, Any, None]]`
- pymongo/synchronous/auth.py:128:43: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `bytes | bytearray`, found `@Todo | None | bytes`
+ pymongo/synchronous/auth.py:128:43: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `bytes | bytearray`, found `Any | None | bytes`
- pymongo/synchronous/auth.py:360:48: error[invalid-assignment] Object of type `dict[str, ((credentials: @Todo, conn: Connection) -&gt; None) | ((credentials: @Todo, conn: Connection, reauthenticate: bool) -&gt; Mapping[str, Any] | None) | partial[None]]` is not assignable to `Mapping[str, (...) -&gt; None]`
+ pymongo/synchronous/auth.py:360:48: error[invalid-assignment] Object of type `dict[str, ((credentials: MongoCredential, conn: Connection) -&gt; None) | ((credentials: MongoCredential, conn: Connection, reauthenticate: bool) -&gt; Mapping[str, Any] | None) | partial[None]]` is not assignable to `Mapping[str, (...) -&gt; None]`

discord.py (https://github.com/Rapptz/discord.py)
+ discord/enums.py:97:5: error[invalid-assignment] Object of type `(self) -&gt; Unknown` is not assignable to attribute `__repr__` of type `def __repr__(self) -&gt; str`
+ discord/enums.py:98:5: error[invalid-assignment] Object of type `(self) -&gt; Unknown` is not assignable to attribute `__str__` of type `def __str__(self) -&gt; str`
+ discord/enums.py:100:9: error[invalid-assignment] Object of type `(self, other) -&gt; Unknown` is not assignable to attribute `__le__` of type `def __le__(self, value: tuple[Unknown, ...], /) -&gt; bool`
+ discord/enums.py:101:9: error[invalid-assignment] Object of type `(self, other) -&gt; Unknown` is not assignable to attribute `__ge__` of type `def __ge__(self, value: tuple[Unknown, ...], /) -&gt; bool`
+ discord/enums.py:102:9: error[invalid-assignment] Object of type `(self, other) -&gt; Unknown` is not assignable to attribute `__lt__` of type `def __lt__(self, value: tuple[Unknown, ...], /) -&gt; bool`
+ discord/enums.py:103:9: error[invalid-assignment] Object of type `(self, other) -&gt; Unknown` is not assignable to attribute `__gt__` of type `def __gt__(self, value: tuple[Unknown, ...], /) -&gt; bool`
- Found 546 diagnostics
+ Found 552 diagnostics

cloud-init (https://github.com/canonical/cloud-init)
+ tests/unittests/sources/test_smartos.py:806:5: error[invalid-assignment] Object of type `Literal[2882400018]` is not assignable to attribute `request_id` of type `property`
+ tests/unittests/sources/test_smartos.py:807:5: error[invalid-assignment] Object of type `Literal[&quot;value&quot;]` is not assignable to attribute `metadata_value` of type `property`
+ tests/unittests/sources/test_smartos.py:808:5: error[invalid-assignment] Object of type `dict[Unknown | str, Unknown | str | int]` is not assignable to attribute `response_parts` of type `property`
+ tests/unittests/sources/test_smartos.py:818:12: error[unsupported-operator] Operator `in` is not supported between objects of type `Literal[&quot;payload&quot;]` and `property`
+ tests/unittests/sources/test_smartos.py:820:17: error[not-subscriptable] Cannot subscript object of type `property` with no `__getitem__` method
+ tests/unittests/sources/test_smartos.py:823:13: error[no-matching-overload] No overload of bound method `format` matches arguments
+ tests/unittests/sources/test_smartos.py:830:5: error[invalid-assignment] Object of type `None` is not assignable to attribute `metasource_data` of type `property`
+ tests/unittests/sources/test_smartos.py:836:16: error[not-subscriptable] Cannot subscript object of type `property` with no `__getitem__` method
+ tests/unittests/sources/test_smartos.py:837:31: error[not-subscriptable] Cannot subscript object of type `property` with no `__getitem__` method
- Found 1166 diagnostics
+ Found 1175 diagnostics

manticore (https://github.com/trailofbits/manticore)
- manticore/platforms/evm.py:3016:16: warning[possibly-missing-attribute] Attribute `coinbase` may be missing on object of type `Unknown | None`
+ manticore/platforms/evm.py:3016:16: warning[possibly-missing-attribute] Attribute `coinbase` may be missing on object of type `Unknown | None | BlockHeader`
- manticore/platforms/evm.py:3019:16: warning[possibly-missing-attribute] Attribute `timestamp` may be missing on object of type `Unknown | None`
+ manticore/platforms/evm.py:3019:16: warning[possibly-missing-attribute] Attribute `timestamp` may be missing on object of type `Unknown | None | BlockHeader`
- manticore/platforms/evm.py:3022:16: warning[possibly-missing-attribute] Attribute `blocknumber` may be missing on object of type `Unknown | None`
+ manticore/platforms/evm.py:3022:16: warning[possibly-missing-attribute] Attribute `blocknumber` may be missing on object of type `Unknown | None | BlockHeader`
- manticore/platforms/evm.py:3025:16: warning[possibly-missing-attribute] Attribute `difficulty` may be missing on object of type `Unknown | None`
+ manticore/platforms/evm.py:3025:16: warning[possibly-missing-attribute] Attribute `difficulty` may be missing on object of type `Unknown | None | BlockHeader`
- manticore/platforms/evm.py:3028:16: warning[possibly-missing-attribute] Attribute `gaslimit` may be missing on object of type `Unknown | None`
+ manticore/platforms/evm.py:3028:16: warning[possibly-missing-attribute] Attribute `gaslimit` may be missing on object of type `Unknown | None | BlockHeader`

jax (https://github.com/google/jax)
+ jax/_src/interpreters/ad.py:430:7: error[call-non-callable] Object of type `aval_method` is not callable
- jax/_src/pallas/mosaic/sc_primitives.py:108:24: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- jax/_src/pallas/mosaic/sc_primitives.py:173:24: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- jax/_src/pallas/mosaic/sc_primitives.py:198:24: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- jax/_src/pallas/mosaic/sc_primitives.py:215:24: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
+ jax/_src/pallas/mosaic_gpu/pipeline.py:123:9: error[invalid-argument-type] Method `__getitem__` of type `Overload[(index: SupportsIndex, /) -&gt; Unknown, (index: slice[Any, Any, Any], /) -&gt; tuple[Unknown, ...]]` cannot be called with key of type `tuple[Slice | Array, ...]` on object of type `aval_property`
+ jax/_src/pallas/mosaic_gpu/pipeline.py:136:9: error[invalid-argument-type] Method `__getitem__` of type `Overload[(index: SupportsIndex, /) -&gt; Unknown, (index: slice[Any, Any, Any], /) -&gt; tuple[Unknown, ...]]` cannot be called with key of type `tuple[Slice | Array, ...]` on object of type `aval_property`
- Found 2830 diagnostics
+ Found 2829 diagnostics

pycryptodome (https://github.com/Legrandin/pycryptodome)
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:917:54: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:984:54: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1053:69: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1124:54: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1195:54: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1243:44: error[invalid-argument-type] Argument to function `construct` is incorrect: Expected `str | int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1244:29: error[invalid-argument-type] Argument to function `construct` is incorrect: Expected `str | int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1282:44: error[invalid-argument-type] Argument to function `construct` is incorrect: Expected `str | int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1283:29: error[invalid-argument-type] Argument to function `construct` is incorrect: Expected `str | int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1320:44: error[invalid-argument-type] Argument to function `construct` is incorrect: Expected `str | int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1321:29: error[invalid-argument-type] Argument to function `construct` is incorrect: Expected `str | int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1358:44: error[invalid-argument-type] Argument to function `construct` is incorrect: Expected `str | int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1358:62: error[invalid-argument-type] Argument to function `construct` is incorrect: Expected `str | int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1395:44: error[invalid-argument-type] Argument to function `construct` is incorrect: Expected `str | int`, found `IntegerBase`
+ lib/Crypto/SelfTest/PublicKey/test_ECC_NIST.py:1395:62: error[invalid-argument-type] Argument to function `construct` is incorrect: Expected `str | int`, found `IntegerBase`
- Found 1321 diagnostics
+ Found 1336 diagnostics

scikit-build-core (https://github.com/scikit-build/scikit-build-core)
+ src/scikit_build_core/build/wheel.py:99:20: error[no-matching-overload] No overload of bound method `__init__` matches arguments
- Found 47 diagnostics
+ Found 48 diagnostics

dd-trace-py (https://github.com/DataDog/dd-trace-py)
+ ddtrace/vendor/psutil/__init__.py:1769:12: error[call-non-callable] Object of type `scputimes` is not callable
+ ddtrace/vendor/psutil/__init__.py:1888:16: error[call-non-callable] Object of type `scputimes` is not callable
+ ddtrace/vendor/psutil/_pslinux.py:547:12: error[call-non-callable] Object of type `scputimes` is not callable
+ ddtrace/vendor/psutil/_pslinux.py:565:25: error[call-non-callable] Object of type `scputimes` is not callable
- Found 8396 diagnostics
+ Found 8400 diagnostics

static-frame (https://github.com/static-frame/static-frame)
- static_frame/core/bus.py:671:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemLocReduces[Bus[Any], object_]`, found `InterGetItemLocReduces[Bus[Any] | Bottom[Series[Any, Any]] | ndarray[Never, Never] | ... omitted 6 union elements, object_]`
- static_frame/core/bus.py:675:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemILocReduces[Bus[Any], object_]`, found `InterGetItemILocReduces[Bus[Any] | ndarray[Never, Never] | TypeBlocks | ... omitted 6 union elements, object_ | Self@iloc]`
+ static_frame/core/bus.py:675:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemILocReduces[Bus[Any], object_]`, found `InterGetItemILocReduces[Self@iloc | Bus[Any], object_ | Self@iloc]`
- static_frame/core/series.py:772:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemILocReduces[Series[Any, Any], TVDtype@Series]`, found `InterGetItemILocReduces[Series[Any, Any] | ndarray[Never, Never] | TypeBlocks | ... omitted 6 union elements, TVDtype@Series]`
+ static_frame/core/series.py:772:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemILocReduces[Series[Any, Any], TVDtype@Series]`, found `InterGetItemILocReduces[Series[Any, Any] | Bottom[Index[Any]] | TypeBlocks | ... omitted 6 union elements, TVDtype@Series]`
- static_frame/core/yarn.py:418:16: error[invalid-return-type] Return type does not match returned value: expected `InterGetItemILocReduces[Yarn[Any], object_]`, found `InterGetItemILocReduces[Yarn[Any] | Bottom[Index[Any]] | TypeBlocks | ... omitted 6 union elements, object_]`
- static_frame/profile/__main__.py:2135:9: error[invalid-assignment] Object of type `dict[str, FunctionMetaData | None]` is not assignable to attribute `meta` of type `dict[str, FunctionMetaData] | None`
- Found 1827 diagnostics
+ Found 1824 diagnostics

rotki (https://github.com/rotki/rotki)
- rotkehlchen/chain/decoding/tools.py:96:44: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- rotkehlchen/chain/decoding/tools.py:99:13: error[invalid-argument-type] Argument to function `decode_transfer_direction` is incorrect: Expected `Sequence[A@BaseDecoderTools]`, found `Unknown | tuple[BTCAddress, ...] | tuple[ChecksumAddress, ...] | tuple[SubstrateAddress, ...] | tuple[SolanaAddress, ...]`
- rotkehlchen/chain/decoding/tools.py:100:62: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
+ rotkehlchen/chain/decoding/tools.py:97:13: error[invalid-argument-type] Argument to function `decode_transfer_direction` is incorrect: Expected `BTCAddress | ChecksumAddress | SubstrateAddress | SolanaAddress`, found `A@BaseDecoderTools`
+ rotkehlchen/chain/decoding/tools.py:98:13: error[invalid-argument-type] Argument to function `decode_transfer_direction` is incorrect: Expected `BTCAddress | ChecksumAddress | SubstrateAddress | SolanaAddress | None`, found `A@BaseDecoderTools | None`
- Found 2057 diagnostics
+ Found 2056 diagnostics

core (https://github.com/home-assistant/core)
- homeassistant/util/variance.py:47:12: error[invalid-return-type] Return type does not match returned value: expected `(**_P@ignore_variance) -&gt; _R@ignore_variance`, found `_Wrapped[_P@ignore_variance, _R@ignore_variance | int | float | datetime, _P@ignore_variance, _R@ignore_variance | int | float | datetime]`
- Found 14506 diagnostics
+ Found 14505 diagnostics

scipy (https://github.com/scipy/scipy)
+ scipy/optimize/_differentiable_functions.py:382:26: error[call-non-callable] Object of type `_FakeCounter` is not callable
+ scipy/optimize/_differentiable_functions.py:387:26: error[call-non-callable] Object of type `_FakeCounter` is not callable
+ scipy/optimize/_linprog_util.py:643:17: error[missing-argument] No argument provided for required parameter `integrality`
+ scipy/optimize/_linprog_util.py:659:21: error[missing-argument] No argument provided for required parameter `integrality`
+ scipy/optimize/_linprog_util.py:676:21: error[missing-argument] No argument provided for required parameter `integrality`
+ scipy/optimize/_linprog_util.py:700:21: error[missing-argument] No argument provided for required parameter `integrality`
+ scipy/optimize/_linprog_util.py:723:25: error[missing-argument] No argument provided for required parameter `integrality`
+ scipy/optimize/_linprog_util.py:759:25: error[missing-argument] No argument provided for required parameter `integrality`
+ scipy/optimize/_linprog_util.py:779:21: error[missing-argument] No argument provided for required parameter `integrality`
+ scipy/optimize/_linprog_util.py:869:17: error[missing-argument] No argument provided for required parameter `integrality`
+ scipy/optimize/_linprog_util.py:915:13: error[missing-argument] No argument provided for required parameter `integrality`
+ scipy/optimize/_shgo.py:1521:13: warning[possibly-missing-attribute] Attribute `add_points` may be missing on object of type `Unknown | Tri | Delaunay`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:23:10: error[missing-argument] No arguments provided for required parameters `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:47:10: error[missing-argument] No arguments provided for required parameters `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:75:45: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:76:46: error[missing-argument] No arguments provided for required parameters `b_ub`, `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:77:46: error[missing-argument] No arguments provided for required parameters `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:78:46: error[missing-argument] No arguments provided for required parameters `A_ub`, `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:79:46: error[missing-argument] No arguments provided for required parameters `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:80:46: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:81:46: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:82:46: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `A_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:83:46: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:92:46: error[missing-argument] No arguments provided for required parameters `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:93:46: error[missing-argument] No arguments provided for required parameters `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:94:46: error[missing-argument] No arguments provided for required parameters `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:95:46: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:96:46: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:103:46: error[missing-argument] No arguments provided for required parameters `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:104:46: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:118:46: error[missing-argument] No arguments provided for required parameters `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:119:46: error[missing-argument] No arguments provided for required parameters `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:120:46: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:121:46: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:122:46: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `A_eq`, `b_eq`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:127:23: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `A_eq`, `b_eq`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:131:10: error[missing-argument] No arguments provided for required parameters `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:159:10: error[missing-argument] No arguments provided for required parameters `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:179:10: error[missing-argument] No arguments provided for required parameters `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:205:10: error[missing-argument] No arguments provided for required parameters `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:232:10: error[missing-argument] No arguments provided for required parameters `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:254:10: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:266:10: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:273:10: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
+ scipy/optimize/tests/test__linprog_clean_inputs.py:299:10: error[missing-argument] No arguments provided for required parameters `A_ub`, `b_ub`, `A_eq`, `b_eq`, `bounds`, `x0`, `integrality`
- scipy/stats/_hypotests.py:1859:26: warning[possibly-missing-attribute] Attribute `low` may be missing on object of type `Unknown | None`
+ scipy/stats/_hypotests.py:1859:26: warning[possibly-missing-attribute] Attribute `low` may be missing on object of type `Unknown | None | ConfidenceInterval`
- scipy/stats/_hypotests.py:1860:26: warning[possibly-missing-attribute] Attribute `high` may be missing on object of type `Unknown | None`
+ scipy/stats/_hypotests.py:1860:26: warning[possibly-missing-attribute] Attribute `high` may be missing on object of type `Unknown | None | ConfidenceInterval`
- scipy/stats/_multicomp.py:69:22: warning[possibly-missing-attribute] Attribute `low` may be missing on object of type `@Todo | None`
+ scipy/stats/_multicomp.py:69:22: warning[possibly-missing-attribute] Attribute `low` may be missing on object of type `ConfidenceInterval | None`
- scipy/stats/_multicomp.py:70:22: warning[possibly-missing-attribute] Attribute `high` may be missing on object of type `@Todo | None`
+ scipy/stats/_multicomp.py:70:22: warning[possibly-missing-attribute] Attribute `high` may be missing on object of type `ConfidenceInterval | None`
+ scipy/stats/tests/test_generation/studentized_range_mpmath_ref.py:67:13: error[too-many-positional-arguments] Too many positional arguments: expected 6, got 8
- Found 8075 diagnostics
+ Found 8121 diagnostics


</code></pre>


<p>No memory usage changes detected âœ…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-02 16:46</div>
            <div class="timeline-body"><p>(The conformance changes are good, but I&#x27;m still working through the ecosystem changes.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-02 16:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astral-sh-bot[bot]">@astral-sh-bot[bot]</a> on 2026-01-02 16:55</div>
            <div class="timeline-body">

<code>ecosystem-analyzer</code> results
<p>| Lint rule | Added | Removed | Changed |
|-----------|------:|--------:|--------:|
| <code>missing-argument</code> | 107 | 0 | 0 |
| <code>invalid-argument-type</code> | 28 | 2 | 2 |
| <code>invalid-assignment</code> | 14 | 1 | 2 |
| <code>possibly-missing-attribute</code> | 1 | 0 | 9 |
| <code>unused-ignore-comment</code> | 2 | 6 | 0 |
| <code>call-non-callable</code> | 7 | 0 | 0 |
| <code>invalid-return-type</code> | 1 | 1 | 1 |
| <code>not-subscriptable</code> | 3 | 0 | 0 |
| <code>no-matching-overload</code> | 1 | 0 | 0 |
| <code>too-many-positional-arguments</code> | 1 | 0 | 0 |
| <code>unresolved-attribute</code> | 1 | 0 | 0 |
| <code>unsupported-operator</code> | 1 | 0 | 0 |
| <strong>Total</strong> | <strong>167</strong> | <strong>10</strong> | <strong>14</strong> |</p>
<p><strong><a href="https://f335565e.ty-ecosystem-ext.pages.dev/diff">Full report with detailed diff</a></strong> (<a href="https://f335565e.ty-ecosystem-ext.pages.dev/timing">timing results</a>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-02 18:05</div>
            <div class="timeline-body"><p>I believe the <code>ddtrace</code> issues are real. They have a fallback assignment:</p>
<p>https://github.com/DataDog/dd-trace-py/blob/6602420478b59b2d3df24ed27218ce12365b0cb7/ddtrace/vendor/psutil/_pslinux.py#L269-L274</p>
<p>So they create <code>scputimes = namedtuple(&#x27;scputimes&#x27;, &#x27;user system idle&#x27;)(0.0, 0.0, 0.0)</code>, then later treat that as if it&#x27;s a class rather than instance:</p>
<p>https://github.com/DataDog/dd-trace-py/blob/6602420478b59b2d3df24ed27218ce12365b0cb7/ddtrace/vendor/psutil/_pslinux.py#L547</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-02 18:08</div>
            <div class="timeline-body"><p>The <code>alerta</code> issues are false positives, but I believe mypy at least also suffers from them.</p>
<p>Specifically, they set deferred defaults <a href="https://github.com/alerta/alerta/blob/b7111d23ae9aefb5064ef107976f62e3836217b6/alerta/database/backends/mongodb/utils.py#L18-L19">here</a>:</p>
<pre><code>Query = namedtuple(&#x27;Query&#x27;, [&#x27;where&#x27;, &#x27;sort&#x27;, &#x27;group&#x27;])
Query.__new__.__defaults__ = ({}, [(&#x27;_id&#x27;, 1)], &#x27;status&#x27;)  # type: ignore
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-02 18:19</div>
            <div class="timeline-body"><p>SciPy is similar -- deferred <code>__defaults__</code>: https://github.com/scipy/scipy/blob/b9ae1430d33a36c2e95b51932963278c255c100d/scipy/optimize/_linprog_util.py#L15-L17.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-02 18:20</div>
            <div class="timeline-body"><p>I think the Spack errors are true positives though? They&#x27;re essentially creating a mock: https://github.com/spack/spack/blob/59b4e440391d5f58a665041ca365d9feb5caf472/lib/spack/spack/test/directives.py#L117-L119</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-04 18:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-04 18:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-04 18:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/sharkdp">@sharkdp</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-04 18:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-04 18:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/MichaReiser">@MichaReiser</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-04 18:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/Gankra">@Gankra</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-08 00:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-10 18:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-12 02:22</div>
            <div class="timeline-body"><p>(I think this change got ruined in the rebase -- we lost most of the import pieces. I&#x27;m reviving from old commits.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-12 04:32</div>
            <div class="timeline-body"><p>I <em>think</em> the <code>pycryptodome</code> errors are correct: we now understand that the arguments need to be <code>Int</code>, but it&#x27;s passing <code>IntegerBase</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-13 02:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-13 02:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-13 02:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:256 on 2026-01-13 12:47</div>
            <div class="timeline-body"><p>Calling <code>reveal_mro</code> on this class indicates that it&#x27;s inferred from inheriting from the wrong kind of tuple on your branch currently:</p>
<pre><code># Revealed MRO: (&lt;class &#x27;Url&#x27;&gt;, &lt;class &#x27;Url&#x27;&gt;, &lt;class &#x27;tuple[Unknown, ...]&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;)
reveal_mro(Url)
</code></pre>
<p>It should be inferred as having <code>tuple[str, str]</code> in its MRO, not <code>tuple[Unknown, ...]</code>. This means that unpacking <code>Url</code> instances doesn&#x27;t work correctly:</p>
<pre><code>a, b = Url(&quot;foo&quot;, &quot;bar&quot;)
reveal_type(a)  # Unknown, should be str
reveal_type(b)  # Unknown, should be str
</code></pre>
<p>neither does indexing:</p>
<pre><code>reveal_type(Url(&quot;a&quot;, &quot;b&quot;)[0])  # revealed: Unknown, should be str
</code></pre>
<p>and we have false negatives on these two lines, both of which should cause us to emit diagnostics:</p>
<pre><code>a, b, c = Url(&quot;a&quot;, &quot;b&quot;)
Url(&quot;a&quot;, &quot;b&quot;)[52]
</code></pre>
<p>all of this would be fixed if we had <code>tuple[str, str]</code> in the MRO instead of <code>tuple[Unknown, ...]</code>.</p>
<hr>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:220 on 2026-01-13 12:50</div>
            <div class="timeline-body"><p>interesting, did this come up in the ecosystem?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:211 on 2026-01-13 13:02</div>
            <div class="timeline-body"><p>And this is because for <code>class Url(namedtuple(&quot;Url&quot;, &quot;host port&quot;)): ...</code>, the inner &quot;inline&quot; <code>Url</code> class is a namedtuple class but the outer one is not. So it&#x27;s really equivalent to doing</p>
<pre><code>class Url(NamedTuple):
    host: str
    port: int

class Url(Url): ...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:379 on 2026-01-13 13:02</div>
            <div class="timeline-body"><p>And again, this is because they aren&#x27;t actually namedtuple classes, they just inherit from namedtuple classes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:230 on 2026-01-13 13:04</div>
            <div class="timeline-body"><p>I&#x27;m confused, I don&#x27;t see a <code>__getattr__</code> method here?</p>
<p>https://github.com/astral-sh/ruff/blob/990d0a899972a59cccdf69d57c56358773d2da5c/crates/ty_vendored/vendor/typeshed/stdlib/_typeshed/_type_checker_internals.pyi#L54-L75</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:602 on 2026-01-13 13:04</div>
            <div class="timeline-body"><p>same comment as above</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types.rs</code>:4033 on 2026-01-13 13:15</div>
            <div class="timeline-body"><p><code>.to_class_literal(db)</code> returns a type representing the class object <code>NamedTupleFallback</code> itself. But that&#x27;s not what calling <code>namedtuple()</code> returns. It returns a subclass of <code>NamedTupleFallback</code>.</p>
<p>Also, why are some of the annotated types so imprecise here? ðŸ˜„ Typeshed gives much more precise types for most of these</p>
<pre><code>                // collections.namedtuple(typename, field_names, ...)
                Some(KnownFunction::NamedTuple) =&gt; {
                    let str_type = KnownClass::Str.to_instance(db);
                    let none_type = Type::none(db);

                    let parameters = [
                        Parameter::positional_or_keyword(Name::new_static(&quot;typename&quot;))
                            .with_annotated_type(str_type),
                        Parameter::positional_or_keyword(Name::new_static(&quot;field_names&quot;))
                            .with_annotated_type(
                                KnownClass::Iterable.to_specialized_instance(db, &amp;[str_type]),
                            ),
                        // Additional optional parameters have defaults.
                        Parameter::keyword_only(Name::new_static(&quot;rename&quot;))
                            .with_annotated_type(KnownClass::Bool.to_instance(db))
                            .with_default_type(Type::BooleanLiteral(false)),
                        Parameter::keyword_only(Name::new_static(&quot;defaults&quot;))
                            .with_annotated_type(UnionType::from_elements(
                                db,
                                [
                                    KnownClass::Iterable
                                        .to_specialized_instance(db, &amp;[Type::any()]),
                                    none_type,
                                ],
                            ))
                            .with_default_type(none_type),
                        Parameter::keyword_only(Name::new_static(&quot;module&quot;))
                            .with_annotated_type(UnionType::from_elements(
                                db,
                                [str_type, none_type],
                            ))
                            .with_default_type(none_type),
                    ];

                    let signature = Signature::new(
                        Parameters::new(db, parameters),
                        KnownClass::NamedTupleFallback.to_class_literal(db),
                    );

                    Binding::single(self, signature).into()
                }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types.rs</code>:4475 on 2026-01-13 13:17</div>
            <div class="timeline-body"><p>should have an annotated type of <code>Iterable[tuple[str, Any]]</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types.rs</code>:4478 on 2026-01-13 13:17</div>
            <div class="timeline-body"><pre><code>                        KnownClass::NamedTupleFallback.to_subclass_of(db),
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:241 on 2026-01-13 13:39</div>
            <div class="timeline-body"><p>I think you&#x27;ve got a bit confused here, and it&#x27;s caused a lot of complexity for you elsewhere.</p>
<p>For <code>class Url(namedtuple(&quot;Url&quot;, &quot;host port&quot;)): ...</code>, the inner &quot;inline&quot; class is a namedtuple but the outer one is not -- the outer class is just a class that <em>inherits</em> from a namedtuple class. It&#x27;s equivalent to doing this:</p>
<pre><code>class Url(NamedTuple):
    host: str
    port: int

class Url(Url): ...
</code></pre>
<p><code>CodeGeneratorKind::NamedTuple.matches(db, cls, None)</code> should return <code>true</code> for the inner class and <code>false</code> for the outer class.</p>
<p>You should get rid of this; doing so also allows you to get rid of the <code>directly_inherits_from_named_tuple_special_form</code> method you added elsewhere, too, because it&#x27;s no longer necessary to distinguish between &quot;different kinds of namedtuple classes&quot;. This diff causes some tests to fail regarding <code>__init__</code>, but I don&#x27;t think they&#x27;ll be too hard for you to fix:</p>
<pre><code>diff --git a/crates/ty_python_semantic/src/types/class.rs b/crates/ty_python_semantic/src/types/class.rs
index e547b0220b..e286141a76 100644
--- a/crates/ty_python_semantic/src/types/class.rs
+++ b/crates/ty_python_semantic/src/types/class.rs
@@ -231,14 +231,6 @@ impl&lt;&#x27;db&gt; CodeGeneratorKind&lt;&#x27;db&gt; {
                 .contains(&amp;Type::SpecialForm(SpecialFormType::NamedTuple))
             {
                 Some(CodeGeneratorKind::NamedTuple)
-            } else if class
-                .explicit_bases(db)
-                .iter()
-                .any(|base| matches!(base, Type::ClassLiteral(ClassLiteral::DynamicNamedTuple(_))))
-            {
-                // Class inherits from a functional namedtuple like:
-                // class Url(NamedTuple(&quot;Url&quot;, [(&quot;host&quot;, str)])): ...
-                Some(CodeGeneratorKind::NamedTuple)
             } else if class.is_typed_dict(db) {
                 Some(CodeGeneratorKind::TypedDict)
             } else {
@@ -2109,20 +2101,6 @@ impl&lt;&#x27;db&gt; StaticClassLiteral&lt;&#x27;db&gt; {
         self.is_known(db, KnownClass::Tuple)
     }
 
-    /// Returns `true` if this class directly inherits from the `NamedTuple` special form
-    /// using class syntax (e.g., `class Foo(NamedTuple): ...`).
-    ///
-    /// This is distinct from inheriting from a functional namedtuple like
-    /// `class Foo(namedtuple(&quot;Foo&quot;, ...)): ...`, which creates a regular class.
-    ///
-    /// The distinction matters because:
-    /// - Classes using class syntax cannot use `super()` or override `__new__`
-    /// - Classes inheriting from functional namedtuples can do both
-    pub(crate) fn directly_inherits_from_named_tuple_special_form(self, db: &amp;&#x27;db dyn Db) -&gt; bool {
-        self.explicit_bases(db)
-            .contains(&amp;Type::SpecialForm(SpecialFormType::NamedTuple))
-    }
-
     /// Returns `true` if this class inherits from a functional namedtuple
     /// (`DynamicNamedTupleLiteral`) that has unknown fields.
     ///
@@ -7386,7 +7364,7 @@ impl KnownClass {
                         // Check if the enclosing class directly inherits from NamedTuple special form,
                         // which forbids the use of `super()`. Classes inheriting from functional
                         // namedtuples (e.g., `class Foo(namedtuple(...)):`) can use `super()` normally.
-                        if enclosing_class.directly_inherits_from_named_tuple_special_form(db) {
+                        if CodeGeneratorKind::NamedTuple.matches(db, enclosing_class.into(), None) {
                             if let Some(builder) = context
                                 .report_lint(&amp;SUPER_CALL_IN_NAMED_TUPLE_METHOD, call_expression)
                             {
@@ -7442,7 +7420,11 @@ impl KnownClass {
                         // which forbids the use of `super()`. Classes inheriting from functional
                         // namedtuples (e.g., `class Foo(namedtuple(...)):`) can use `super()` normally.
                         if let Some(enclosing_class) = nearest_enclosing_class(db, index, scope) {
-                            if enclosing_class.directly_inherits_from_named_tuple_special_form(db) {
+                            if CodeGeneratorKind::NamedTuple.matches(
+                                db,
+                                enclosing_class.into(),
+                                None,
+                            ) {
                                 if let Some(builder) = context
                                     .report_lint(&amp;SUPER_CALL_IN_NAMED_TUPLE_METHOD, call_expression)
                                 {
diff --git a/crates/ty_python_semantic/src/types/infer/builder.rs b/crates/ty_python_semantic/src/types/infer/builder.rs
index cf1d72aee8..2c5e0c23c0 100644
--- a/crates/ty_python_semantic/src/types/infer/builder.rs
+++ b/crates/ty_python_semantic/src/types/infer/builder.rs
@@ -688,7 +688,7 @@ impl&lt;&#x27;db, &#x27;ast&gt; TypeInferenceBuilder&lt;&#x27;db, &#x27;ast&gt; {
             //     - If the class is a protocol class: check for inheritance from a non-protocol class
             //     - If the class is a NamedTuple class: check for multiple inheritance that isn&#x27;t `Generic[]`
             for (i, base_class) in class.explicit_bases(self.db()).iter().enumerate() {
-                if class.directly_inherits_from_named_tuple_special_form(self.db())
+                if is_named_tuple
                     &amp;&amp; !matches!(
                         base_class,
                         Type::SpecialForm(SpecialFormType::NamedTuple)
diff --git a/crates/ty_python_semantic/src/types/overrides.rs b/crates/ty_python_semantic/src/types/overrides.rs
index 0e6086b924..15094518e8 100644
--- a/crates/ty_python_semantic/src/types/overrides.rs
+++ b/crates/ty_python_semantic/src/types/overrides.rs
@@ -131,10 +131,7 @@ fn check_class_declaration&lt;&#x27;db&gt;(
     // `NamedTuple` classes have certain synthesized attributes (like `_asdict`, `_make`, etc.)
     // that cannot be overwritten. Attempting to assign to these attributes (without type
     // annotations) or define methods with these names will raise an `AttributeError` at runtime.
-    //
-    // This only applies to classes that directly inherit from the `NamedTuple` special form,
-    // not to classes that inherit from functional namedtuples (which create regular classes).
-    if literal.directly_inherits_from_named_tuple_special_form(db)
+    if class_kind == Some(CodeGeneratorKind::NamedTuple)
         &amp;&amp; configuration.check_prohibited_named_tuple_attrs()
         &amp;&amp; PROHIBITED_NAMEDTUPLE_ATTRS.contains(&amp;member.name.as_str())
         &amp;&amp; let Some(symbol_id) = place_table(db, class_scope).symbol_id(&amp;member.name)
~/dev/ruff (charlie/functional-namedtuple)âš¡ % gd
diff --git a/crates/ty_python_semantic/src/types/class.rs b/crates/ty_python_semantic/src/types/class.rs
index e547b0220b..e286141a76 100644
--- a/crates/ty_python_semantic/src/types/class.rs
+++ b/crates/ty_python_semantic/src/types/class.rs
@@ -231,14 +231,6 @@ impl&lt;&#x27;db&gt; CodeGeneratorKind&lt;&#x27;db&gt; {
                 .contains(&amp;Type::SpecialForm(SpecialFormType::NamedTuple))
             {
                 Some(CodeGeneratorKind::NamedTuple)
-            } else if class
-                .explicit_bases(db)
-                .iter()
-                .any(|base| matches!(base, Type::ClassLiteral(ClassLiteral::DynamicNamedTuple(_))))
-            {
-                // Class inherits from a functional namedtuple like:
-                // class Url(NamedTuple(&quot;Url&quot;, [(&quot;host&quot;, str)])): ...
-                Some(CodeGeneratorKind::NamedTuple)
             } else if class.is_typed_dict(db) {
                 Some(CodeGeneratorKind::TypedDict)
             } else {
@@ -2109,20 +2101,6 @@ impl&lt;&#x27;db&gt; StaticClassLiteral&lt;&#x27;db&gt; {
         self.is_known(db, KnownClass::Tuple)
     }
 
-    /// Returns `true` if this class directly inherits from the `NamedTuple` special form
-    /// using class syntax (e.g., `class Foo(NamedTuple): ...`).
-    ///
-    /// This is distinct from inheriting from a functional namedtuple like
-    /// `class Foo(namedtuple(&quot;Foo&quot;, ...)): ...`, which creates a regular class.
-    ///
-    /// The distinction matters because:
-    /// - Classes using class syntax cannot use `super()` or override `__new__`
-    /// - Classes inheriting from functional namedtuples can do both
-    pub(crate) fn directly_inherits_from_named_tuple_special_form(self, db: &amp;&#x27;db dyn Db) -&gt; bool {
-        self.explicit_bases(db)
-            .contains(&amp;Type::SpecialForm(SpecialFormType::NamedTuple))
-    }
-
     /// Returns `true` if this class inherits from a functional namedtuple
     /// (`DynamicNamedTupleLiteral`) that has unknown fields.
     ///
@@ -7386,7 +7364,7 @@ impl KnownClass {
                         // Check if the enclosing class directly inherits from NamedTuple special form,
                         // which forbids the use of `super()`. Classes inheriting from functional
                         // namedtuples (e.g., `class Foo(namedtuple(...)):`) can use `super()` normally.
-                        if enclosing_class.directly_inherits_from_named_tuple_special_form(db) {
+                        if CodeGeneratorKind::NamedTuple.matches(db, enclosing_class.into(), None) {
                             if let Some(builder) = context
                                 .report_lint(&amp;SUPER_CALL_IN_NAMED_TUPLE_METHOD, call_expression)
                             {
@@ -7442,7 +7420,11 @@ impl KnownClass {
                         // which forbids the use of `super()`. Classes inheriting from functional
                         // namedtuples (e.g., `class Foo(namedtuple(...)):`) can use `super()` normally.
                         if let Some(enclosing_class) = nearest_enclosing_class(db, index, scope) {
-                            if enclosing_class.directly_inherits_from_named_tuple_special_form(db) {
+                            if CodeGeneratorKind::NamedTuple.matches(
+                                db,
+                                enclosing_class.into(),
+                                None,
+                            ) {
                                 if let Some(builder) = context
                                     .report_lint(&amp;SUPER_CALL_IN_NAMED_TUPLE_METHOD, call_expression)
                                 {
diff --git a/crates/ty_python_semantic/src/types/infer/builder.rs b/crates/ty_python_semantic/src/types/infer/builder.rs
index cf1d72aee8..2c5e0c23c0 100644
--- a/crates/ty_python_semantic/src/types/infer/builder.rs
+++ b/crates/ty_python_semantic/src/types/infer/builder.rs
@@ -688,7 +688,7 @@ impl&lt;&#x27;db, &#x27;ast&gt; TypeInferenceBuilder&lt;&#x27;db, &#x27;ast&gt; {
             //     - If the class is a protocol class: check for inheritance from a non-protocol class
             //     - If the class is a NamedTuple class: check for multiple inheritance that isn&#x27;t `Generic[]`
             for (i, base_class) in class.explicit_bases(self.db()).iter().enumerate() {
-                if class.directly_inherits_from_named_tuple_special_form(self.db())
+                if is_named_tuple
                     &amp;&amp; !matches!(
                         base_class,
                         Type::SpecialForm(SpecialFormType::NamedTuple)
diff --git a/crates/ty_python_semantic/src/types/overrides.rs b/crates/ty_python_semantic/src/types/overrides.rs
index 0e6086b924..15094518e8 100644
--- a/crates/ty_python_semantic/src/types/overrides.rs
+++ b/crates/ty_python_semantic/src/types/overrides.rs
@@ -131,10 +131,7 @@ fn check_class_declaration&lt;&#x27;db&gt;(
     // `NamedTuple` classes have certain synthesized attributes (like `_asdict`, `_make`, etc.)
     // that cannot be overwritten. Attempting to assign to these attributes (without type
     // annotations) or define methods with these names will raise an `AttributeError` at runtime.
-    //
-    // This only applies to classes that directly inherit from the `NamedTuple` special form,
-    // not to classes that inherit from functional namedtuples (which create regular classes).
-    if literal.directly_inherits_from_named_tuple_special_form(db)
+    if class_kind == Some(CodeGeneratorKind::NamedTuple)
         &amp;&amp; configuration.check_prohibited_named_tuple_attrs()
         &amp;&amp; PROHIBITED_NAMEDTUPLE_ATTRS.contains(&amp;member.name.as_str())
         &amp;&amp; let Some(symbol_id) = place_table(db, class_scope).symbol_id(&amp;member.name)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> requested changes on 2026-01-13 13:40</div>
            <div class="timeline-body"><p>Not a full review yet, but this seems like enough comments to get you started ;)</p>
<p>A lot of this looks good, but I think there&#x27;s a few places where you&#x27;ve introduced unnecessary complexity</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-13 14:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-13 17:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:241 on 2026-01-13 17:24</div>
            <div class="timeline-body"><p>Thank you, this is very helpful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-13 17:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:230 on 2026-01-13 17:40</div>
            <div class="timeline-body"><p>(Sorry, this is a vestige of a previous solution where I had to change the typeshed stub.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-13 18:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-13 18:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:746 on 2026-01-13 18:05</div>
            <div class="timeline-body"><p>actually, all dynamic namedtuples have an empty tuple generated for their <code>__slots__</code>:</p>
<pre><code>&gt;&gt;&gt; from collections import namedtuple
&gt;&gt;&gt; n = namedtuple(&quot;n&quot;, &quot;a b&quot;)
&gt;&gt;&gt; n.__slots__
()
</code></pre>
<p>But <code>__slots__</code> must be non-empty for a class to be a disjoint base, so your code is correct here -- it&#x27;s just the comment that&#x27;s slightly incorrect</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/overrides.rs</code>:137 on 2026-01-13 18:12</div>
            <div class="timeline-body"><p>this change is unnecessary: no tests fail if I revert this change. <code>CodeGeneratorKind::NamedTuple</code> is only understood as the code-generator kind for a class if the class has been created directly via <code>namedtuple()</code>. <code>class_kind</code> will be <code>None</code> for a class that inherits from a namedtuple class.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:7571 on 2026-01-13 18:14</div>
            <div class="timeline-body"><p>this change doesn&#x27;t look necessary; no tests fail if I revert it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:7627 on 2026-01-13 18:15</div>
            <div class="timeline-body"><p>This change doesn&#x27;t look necessary to me, and no tests fail if I revert it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:690 on 2026-01-13 18:16</div>
            <div class="timeline-body"><p>this change doesn&#x27;t look necessary to me, and no tests fail if I revert it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:602 on 2026-01-13 18:16</div>
            <div class="timeline-body"><p>this conversation was marked as resolved but the confusing comment about <code>NamedTupleFallback.__getattr__</code> (which doesn&#x27;t exist) is still here</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-13 18:18</div>
            <div class="timeline-body"><p>I still don&#x27;t think we need the new <code>directly_inherits_from_named_tuple_special_form()</code> method you&#x27;ve added; I can revert all the new uses of it and no tests pass. I think you only needed it in an earlier version because you had <code>CodeGeneratorKind::NamedTuple.matches(db, class)</code> returning <code>true</code> for all <em>subclasses</em> of namedtuple classes as well as all namedtuple classes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:256 on 2026-01-13 18:22</div>
            <div class="timeline-body"><pre><code>from typing import NamedTuple
from ty_extensions import reveal_mro

class Url(NamedTuple(&quot;Url&quot;, [(&quot;host&quot;, str), (&quot;path&quot;, str)])):
    pass

reveal_type(Url)  # revealed: &lt;class &#x27;Url&#x27;&gt;
reveal_mro(Url)  # revealed: (&lt;class &#x27;main.Url @ main.py:5:7&#x27;&gt;, &lt;class &#x27;main.Url @ main.py:5:11&#x27;&gt;, &lt;class &#x27;tuple[str, str]&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:602 on 2026-01-13 18:26</div>
            <div class="timeline-body"><p>Ugh sorry, I fixed the above use but not this one.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-13 18:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:310 on 2026-01-13 18:27</div>
            <div class="timeline-body"><pre><code>import collections
from ty_extensions import reveal_mro

# String field names (space-separated)
Point1 = collections.namedtuple(&quot;Point&quot;, &quot;x y&quot;)
reveal_type(Point1)  # revealed: &lt;class &#x27;Point&#x27;&gt;
reveal_mro(Point1)  # revealed: (&lt;class &#x27;Point&#x27;&gt;, tuple[Any, Any], &lt;class &#x27;object&#x27;&gt;)

# String field names (comma-separated also works at runtime)
Point2 = collections.namedtuple(&quot;Point&quot;, &quot;x, y&quot;)
reveal_type(Point2)  # revealed: &lt;class &#x27;Point&#x27;&gt;
reveal_mro(Point2)  # revealed: (&lt;class &#x27;Point&#x27;&gt;, tuple[Any, Any], &lt;class &#x27;object&#x27;&gt;)

# List of strings
Point3 = collections.namedtuple(&quot;Point&quot;, [&quot;x&quot;, &quot;y&quot;])
reveal_type(Point3)  # revealed: &lt;class &#x27;Point&#x27;&gt;
reveal_mro(Point3)  # revealed: (&lt;class &#x27;Point&#x27;&gt;, tuple[Any, Any], &lt;class &#x27;object&#x27;&gt;)

# Tuple of strings
Point4 = collections.namedtuple(&quot;Point&quot;, (&quot;x&quot;, &quot;y&quot;))
reveal_type(Point4)  # revealed: &lt;class &#x27;Point&#x27;&gt;
reveal_mro(Point4)  # revealed: (&lt;class &#x27;Point&#x27;&gt;, tuple[Any, Any], &lt;class &#x27;object&#x27;&gt;)

# Invalid: integer is not a valid typename
# error: [invalid-argument-type]
reveal_type(collections.namedtuple(123, [&quot;x&quot;, &quot;y&quot;]))  # revealed: type[NamedTupleFallback]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-13 18:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Converted to draft by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-13 18:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6282 on 2026-01-13 18:30</div>
            <div class="timeline-body"><pre><code>    #[expect(clippy::type_complexity)]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6502 on 2026-01-13 18:30</div>
            <div class="timeline-body"><pre><code>    #[expect(clippy::type_complexity)]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6542 on 2026-01-13 18:30</div>
            <div class="timeline-body"><pre><code>    #[expect(clippy::type_complexity)]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-13 18:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-13 18:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-13 19:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:3868 on 2026-01-13 19:01</div>
            <div class="timeline-body"><p>(I think this needs to be removed.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2026-01-13 19:26</div>
            <div class="timeline-body"><p>Going to let @AlexWaygood handle review here -- lmk if there&#x27;s anything you particularly want me to look at.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for <a href="https://github.com/carljm">@carljm</a> removed by <a href="https://github.com/carljm">@carljm</a> on 2026-01-13 19:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-13 19:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:1362 on 2026-01-13 20:23</div>
            <div class="timeline-body"><p>what&#x27;s the reason that <code>DynamicNamedTupleLiteral::own_class_member`` returns </code>Option&lt;PlaceAndQualifiers<code>whereas</code>DynamicClassLiteral::own_class_member<code>returns</code>Member<code>? It seems like they could both return </code>Member`?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:2120 on 2026-01-13 20:26</div>
            <div class="timeline-body"><p>but it seems like we still have false positives in other respects for tuples with unknown fields on this branch:</p>
<pre><code>from ty_extensions import reveal_mro
from collections import namedtuple

def f(x: str):
    Point = namedtuple(&quot;Point&quot;, x)
    p = Point(1, 2, 3)  # fine
    reveal_type(p.whatever)  # revealed: Unknown, fine

    p[0]  # error: [index-out-of-bounds], not fine
    reveal_mro(Point)  # revealed: (&lt;class &#x27;Point&#x27;&gt;, &lt;class &#x27;tuple[()]&#x27;&gt;, &lt;class &#x27;object&#x27;&gt;)
</code></pre>
<p>I think namedtuple classes with unknown fields need to be inferred as inheriting from <code>tuple[Unknown, ...]</code> in order for these false positives to be removed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:2204 on 2026-01-13 20:27</div>
            <div class="timeline-body"><p>Can you add a test that demonstrates that we correctly infer them as inheriting the ordering methods from their tuple base classes? We get the behaviour correct on this branch, but it&#x27;s untested -- we correctly do not emit a diagnostic on this:</p>
<pre><code>from collections import namedtuple
from functools import total_ordering

@total_ordering
class Point(namedtuple(&quot;Point&quot;, &quot;x y&quot;)): ...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:3257 on 2026-01-13 20:28</div>
            <div class="timeline-body"><p>nice catch!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:5174 on 2026-01-13 20:29</div>
            <div class="timeline-body"><p>Avoiding duplicating the synthesis logic seems like a good idea, but I only see this function called from the dynamic namedtuple code path -- I don&#x27;t think this comment is accurate right now</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:5411 on 2026-01-13 20:30</div>
            <div class="timeline-body"><p><code>tuple_base_type</code> implies to me that this is going to return a <code>Type</code>; maybe this could be renamed to</p>
<pre><code>    pub(crate) fn tuple_base_class(self, db: &amp;&#x27;db dyn Db) -&gt; ClassType&lt;&#x27;db&gt; {
</code></pre>
<p>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6663 on 2026-01-13 20:35</div>
            <div class="timeline-body"><p>shall we just import <code>ast::name::Name</code> at the top of the file, so that the type annotation doesn&#x27;t have to be split over four lines? ðŸ˜›</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6527 on 2026-01-13 20:37</div>
            <div class="timeline-body"><p>should we also abort here if any of the positional arguments are starred expressions, or any of the keyword arguments are <code>**</code> arguments?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6360 on 2026-01-13 20:38</div>
            <div class="timeline-body"><p>I&#x27;m not sure you&#x27;ve added any tests for namedtuples that use <code>rename=True</code> or provide a value for the <code>defaults=</code> keyword parameter; can you add some?</p>
<p>Also, I&#x27;m not sure we emit any errors here if the user provides a nonexistent keyword argument like <code>foobarbaz=42</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6666 on 2026-01-13 20:41</div>
            <div class="timeline-body"><p>We can&#x27;t return <code>None</code> here because we&#x27;ve already inferred (and stored) some types, but returning <code>None</code> will cause us to infer all types for the expression again, which could cause us to panic. As soon as we&#x27;ve stored at least one type for the call expression, we have to do the signature checking for the whole call expression &quot;manually&quot;.</p>
<p>I also don&#x27;t think it&#x27;s <em>desirable</em> to return <code>None</code> here, though. Can&#x27;t we just use <code>&lt;unknown&gt;</code> for the name of the <code>collections.namedtuple</code> class, like we do for <code>type()</code> classes where a non-literal string is provided?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6703 on 2026-01-13 20:42</div>
            <div class="timeline-body"><p>can you add a test with a <code>Point = collections.namedtuple(&quot;Point&quot;, &quot;x       y&quot;)</code>, and also one that uses a string with tabs in it? (Making sure that we infer the correct MRO in both cases)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6417 on 2026-01-13 20:44</div>
            <div class="timeline-body"><p>why are you using <code>exact_tuple_instance_spec()</code> here? I think <code>tuple_instance_spec()</code> should be fine?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6510 on 2026-01-13 20:45</div>
            <div class="timeline-body"><p>same here, I think <code>tuple_instance_spec</code> should be fine here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6532 on 2026-01-13 20:46</div>
            <div class="timeline-body"><p>nah, we should use <code>Type::in_type_expression()</code> here rather than reimplementing that method :P</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-13 20:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-13 21:01</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6666 on 2026-01-13 21:01</div>
            <div class="timeline-body"><p>Yes good call.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-13 21:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6703 on 2026-01-13 21:14</div>
            <div class="timeline-body"><p>(Tab is causing me major problems because <code>mdformat</code> keeps removing it.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-13 21:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6703 on 2026-01-13 21:16</div>
            <div class="timeline-body"><p>hahaha is there no suppression comment to tell it to away??</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-13 21:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6437 on 2026-01-13 21:24</div>
            <div class="timeline-body"><p>can we move these imports to the top of the file?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:339 on 2026-01-13 21:46</div>
            <div class="timeline-body"><p>and add a <code>reveal_mro</code> call too?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:452 on 2026-01-13 21:47</div>
            <div class="timeline-body"><p>maybe also add <code>reveal_type(Point.__new__)</code> and <code>reveal_mro(Point)</code> calls?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:479 on 2026-01-13 21:48</div>
            <div class="timeline-body"><p>maybe also add a <code>reveal_type(Person.__new__)</code> call?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:534 on 2026-01-13 21:49</div>
            <div class="timeline-body"><p>worth adding <code>reveal_type</code> and <code>reveal_mro</code> calls for these?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/named_tuple.md</code>:1 on 2026-01-13 21:58</div>
            <div class="timeline-body"><p>Could you add a test for generic namedtuples defined using the functional syntax? I don&#x27;t think it&#x27;s a priority (at all) for us to support them, but it would be nice to at some point since <a href="https://mypy-play.net/?mypy=latest&amp;python=3.12&amp;gist=4bacc23ed34bd4552e65cc54eaf7a90d">mypy does</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6510 on 2026-01-13 22:00</div>
            <div class="timeline-body"><p>we also need to emit a diagnostic in this method if too many arguments are provided, e.g.</p>
<pre><code>from ty_extensions import reveal_mro
from collections import namedtuple

NT = namedtuple(&quot;NT&quot;, &quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;aa&quot;, &quot;bb&quot;)
</code></pre>
<p>and we need to make sure we call <code>self.infer_expression()</code> for every argument passed in, not just the first two</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6463 on 2026-01-13 22:04</div>
            <div class="timeline-body"><p>Uhh I think we had a conversation in <a href="https://github.com/astral-sh/ruff/pull/22291">astral-sh/ruff#22291</a> about how calling <code>.fixed_elements()</code> is the wrong thing to do here -- you want to check whether it&#x27;s <em>actually</em> a <em>fixed-length</em> tuple (by calling <code>Tuple::as_fixed_length</code>) before you iterate over it. If it&#x27;s a tuple like <code>tuple[int, str, *tuple[bool, ...]]</code>, iterating over <code>.fixed_elements()</code> is going to give you the first two elements (the fixed ones) and then stop.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6548 on 2026-01-13 22:04</div>
            <div class="timeline-body"><p>same here, iterating over <code>.fixed_elements()</code> seems wrong -- you want to call <code>.as_fixed_length()</code> to check that it&#x27;s <em>actually</em> a fixed-length tuple</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-13 22:06</div>
            <div class="timeline-body"><p>Looks close! ðŸš€</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-13 22:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6562 on 2026-01-13 22:19</div>
            <div class="timeline-body"><p>rather than calling <code>.unwrap_or()</code>, we should report a diagnostic here if the user tried to pass an invalid type expression into the call</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6562 on 2026-01-13 22:20</div>
            <div class="timeline-body"><p>you can grep for other uses of <code>in_type_expression</code> to see how we convert errors into diagnostics -- it&#x27;s fairly straightforward</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-13 22:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:690 on 2026-01-14 12:57</div>
            <div class="timeline-body"><p>Can you add a goto-definition test for dynamic namedtuples?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:734 on 2026-01-14 13:07</div>
            <div class="timeline-body"><p>I filed <a href="https://github.com/astral-sh/ty/issues/2490">astral-sh/ty#2490</a> so that we don&#x27;t forget to followup on this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:821 on 2026-01-14 13:11</div>
            <div class="timeline-body"><p>This doesn&#x27;t actually fail at runtime:</p>
<pre><code>import dataclasses, typing

@dataclasses.dataclass
class Foo(typing.NamedTuple):
    x: int
</code></pre>
<p>and neither does <code>dataclasses.dataclass(collections.namedtuple(&quot;A&quot;, ()))</code>. Ideally we&#x27;d either infer these accurately or emit a diagnostic on them. We can defer this to a followup, though, since I think it&#x27;s already an issue with <code>typing.NamedTuple</code> on <code>main</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:1686 on 2026-01-14 13:13</div>
            <div class="timeline-body"><p>the docstring for this method says that this is a &quot;helper function for <code>instance_member</code> that looks up the <code>name</code> attribute only on this class, not on its superclasses.&quot; But it looks like <code>DynamicNamedTupleLiteral::instance_member</code> falls back to the tuple superclass of the namedtuple -- it <em>does</em> look up the member on superclasses, unlike the other branches in this method</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:5293 on 2026-01-14 13:15</div>
            <div class="timeline-body"><p>Same question to <a href="https://github.com/astral-sh/ruff/pull/22537">astral-sh/ruff#22537</a>#discussion_r2690301674 about whether we need to store <code>scope</code> as a separate field here, or if that could be part of the <code>DynamicClassAnchor</code> enum</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:5389 on 2026-01-14 13:15</div>
            <div class="timeline-body"><pre><code>    /// Compute the specialized tuple class that this namedtuple inherits from.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6756 on 2026-01-14 13:22</div>
            <div class="timeline-body"><p>this panics with &quot;attempt to subtract with overflow&quot; on this test case, where there are more defaults than fields (which causes a runtime error, but we still shouldn&#x27;t panic!!):</p>
<pre><code>import collections

collections.namedtuple(&quot;Baz&quot;, &quot;x y&quot;, defaults=(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))
</code></pre>
<pre><code>error[panic]: Panicked at crates/ty_python_semantic/src/types/infer/builder.rs:6520:69 when checking `/Users/alexw/dev/ruff/foo.py`: `attempt to subtract with overflow`
info: This indicates a bug in ty.
info: If you could open an issue at https://github.com/astral-sh/ty/issues/new?title=%5Bpanic%5D, we&#x27;d be very appreciative!
info: Platform: macos aarch64
info: Version: ruff/0.14.10+336 (fe0f7289d 2026-01-13)
info: Args: [&quot;target/debug/ty&quot;, &quot;check&quot;, &quot;foo.py&quot;, &quot;--python-version=3.14&quot;]
info: run with `RUST_BACKTRACE=1` environment variable to show the full backtrace information
info: query stacktrace:
   0: infer_scope_types(Id(1000))
             at crates/ty_python_semantic/src/types/infer.rs:70
   1: check_file_impl(Id(c00))
             at crates/ty_project/src/lib.rs:554


Found 1 diagnostic
WARN A fatal error occurred while checking some files. Not all project files were analyzed. See the diagnostics list above for details.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6510 on 2026-01-14 13:24</div>
            <div class="timeline-body"><p>As a followup PR, you could add diagnostics for the following errors that can occur at runtime:</p>
<pre><code>&gt;&gt;&gt; import collections
&gt;&gt;&gt; Foo = collections.namedtuple(&quot;Foo&quot;, &quot;x x&quot;)
Traceback (most recent call last):
  File &quot;&lt;python-input-11&gt;&quot;, line 1, in &lt;module&gt;
    Foo = collections.namedtuple(&quot;Foo&quot;, &quot;x x&quot;)
  File &quot;/Users/alexw/.pyenv/versions/3.13.1/lib/python3.13/collections/__init__.py&quot;, line 415, in namedtuple
    raise ValueError(f&#x27;Encountered duplicate field name: {name!r}&#x27;)
ValueError: Encountered duplicate field name: &#x27;x&#x27;
&gt;&gt;&gt; collections.namedtuple(&quot;Bar&quot;, &quot;_y _z&quot;)
... 
Traceback (most recent call last):
  File &quot;&lt;python-input-12&gt;&quot;, line 1, in &lt;module&gt;
    collections.namedtuple(&quot;Bar&quot;, &quot;_y _z&quot;)
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File &quot;/Users/alexw/.pyenv/versions/3.13.1/lib/python3.13/collections/__init__.py&quot;, line 412, in namedtuple
    raise ValueError(&#x27;Field names cannot start with an underscore: &#x27;
                     f&#x27;{name!r}&#x27;)
ValueError: Field names cannot start with an underscore: &#x27;_y&#x27;
&gt;&gt;&gt; collections.namedtuple(&quot;Baz&quot;, &quot;x y&quot;, defaults=(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))
Traceback (most recent call last):
  File &quot;&lt;python-input-13&gt;&quot;, line 1, in &lt;module&gt;
    collections.namedtuple(&quot;Baz&quot;, &quot;x y&quot;, defaults=(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))
    ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/Users/alexw/.pyenv/versions/3.13.1/lib/python3.13/collections/__init__.py&quot;, line 422, in namedtuple
    raise TypeError(&#x27;Got more default values than field names&#x27;)
TypeError: Got more default values than field names
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6460 on 2026-01-14 13:27</div>
            <div class="timeline-body"><p>at runtime it seems to only care if a truthy argument is passed in. We should emit an <code>invalid-argument-type</code> diagnostic if a non-bool is passed in, but for the purposes of checking whether we should apply <code>rename=True</code> semantics for parsing the call, I think this could just be</p>
<pre><code>            let rename = rename_type.is_some_and(|ty| ty.bool(db).is_always_true())
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> requested changes on 2026-01-14 13:28</div>
            <div class="timeline-body"><p>Looks good, but I found a panic ðŸ˜„</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-14 13:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6756 on 2026-01-14 13:53</div>
            <div class="timeline-body"><p>Nice, thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6573 on 2026-01-14 14:38</div>
            <div class="timeline-body"><p>we need to emit a diagnostic for an invalid type passed (any type not assignable to <code>Iterable[Any] | None</code>), e.g. <code>NT = namedtuple(&quot;NT&quot;, &quot;x&quot;, defaults=123)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6617 on 2026-01-14 14:39</div>
            <div class="timeline-body"><p>we need to emit a diagnostic for an invalid type passed (anything not assignable to <code>str | None</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-14 14:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6678 on 2026-01-14 14:43</div>
            <div class="timeline-body"><p>we need to emit a diagnostic if the type of <code>field_names</code> is outright invalid, e.g. <code>NT = namedtuple(&quot;NT&quot;, 21335)</code> or <code>NT = NamedTuple(&quot;NT&quot;, 12345)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-14 14:47</div>
            <div class="timeline-body"><p>I feel like for this:</p>
<pre><code>from collections import namedtuple

NT = namedtuple(&quot;NT&quot;, &quot;x y&quot;, defaults=(0,))

# revealed: `(cls: type, x: Any, y: Any = ...) -&gt; NT`
reveal_type(NT.__new__)
</code></pre>
<p>We should have enough information to reveal <code>y: Any = 0</code> rather than <code>y: Any = ...</code> there? But that&#x27;s minor enough that I&#x27;m happy for it to be tackled as a followup ðŸ˜„</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6748 on 2026-01-14 15:05</div>
            <div class="timeline-body"><p>It looks like you skip inferring a type for <code>fields_arg</code> altogether if you&#x27;re able to extract the fields from the raw AST. But we can&#x27;t do that -- it&#x27;s an important invariant for us that we <em>always</em> infer and store a type for each sub-expression in any given scope that we&#x27;re inferring types for. You need to move the <code>let fields_type = self.infer_expression(fields_arg, TypeContext::default());</code> statement above line 6742 -- then in the <code>extract_collections_namedtuple_fields_from_ast()</code> method, you need to use <code>self.expression_type()</code> to get the cached types of sub-nodes rather than calling <code>self.infer_expression()</code> inside that method</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6710 on 2026-01-14 15:06</div>
            <div class="timeline-body"><p>Same here: we cannot skip the <code>self.infer_expression(fields_arg, TypeContext::default())</code> call if <code>self.extract_typing_namedtuple_fields_from_ast(fields_arg)</code> returns <code>Some()</code>. This needs to be moved above line 6706</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6950 on 2026-01-14 15:09</div>
            <div class="timeline-body"><p>A list of lists and a tuple of lists also works at runtime; since we&#x27;re looking at the raw AST here, we could allow this:</p>
<pre><code>typing.NamedTuple(&quot;NT&quot;, [[&quot;x&quot;, int], [&quot;y&quot;, int]])
</code></pre>
<p>or this:</p>
<pre><code>typing.NamedTuple(&quot;NT&quot;, ([&quot;x&quot;, int], [&quot;y&quot;, int]))
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-14 15:10</div>
            <div class="timeline-body"><p>Very close...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-14 15:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6748 on 2026-01-14 15:17</div>
            <div class="timeline-body"><p>Ugh, of course. Thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-14 15:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6748 on 2026-01-14 15:32</div>
            <div class="timeline-body"><p>I think we have the same problem for <code>extract_typing_namedtuple_fields_from_ast</code>, hmm...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-14 15:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6748 on 2026-01-14 15:34</div>
            <div class="timeline-body"><p>Which is a little trickier because it contains a mix of regular and type expressions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-14 15:38</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6712 on 2026-01-14 15:38</div>
            <div class="timeline-body"><p>Because I could figure out @AlexWaygood though I know it&#x27;s not what we want.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-14 15:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6712 on 2026-01-14 15:39</div>
            <div class="timeline-body"><p>yeah, that&#x27;s not how to do it ðŸ˜† I&#x27;ll fix this up for you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6712 on 2026-01-14 15:43</div>
            <div class="timeline-body"><p>For posterity the other thing I considered was doing the inference upfront then using <code>self.expression_type(field_type_expr)</code>, but I couldn&#x27;t figure out how to convert from <code>type[T]</code> to <code>T</code> in the general case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-14 15:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6656 on 2026-01-14 16:48</div>
            <div class="timeline-body"><p>Nit: match here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-14 16:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6856 on 2026-01-14 16:49</div>
            <div class="timeline-body"><p>Ahh... I think (broadly) this is what I was maybe missing?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-14 16:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2026-01-14 16:49</div>
            <div class="timeline-body"><p>(LGTM.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6510 on 2026-01-14 16:50</div>
            <div class="timeline-body"><p>@charliermarsh -- it looks like we currently only call this method from one location, and always pass in <code>None</code> for the <code>definition</code> parameter. It looks like no tests fail because of this, but I think it would be better for Salsa incrementality if we could use <code>DynamicClassAnchor::Definition</code> where possible for dynamic namedtuples -- we&#x27;re currently just using <code>DynamicClassAnchor::ScopOffset</code> every time, I think</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-14 16:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-14 16:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6856 on 2026-01-14 16:50</div>
            <div class="timeline-body"><p>yup</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-14 16:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6656 on 2026-01-14 16:50</div>
            <div class="timeline-body"><p>yeah, can do! do you wanna take over again and also fix <a href="https://github.com/astral-sh/ruff/pull/22327">astral-sh/ruff#22327</a>#discussion_r2691246458?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-14 16:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6510 on 2026-01-14 16:51</div>
            <div class="timeline-body"><p>(I can fix that, let me know when you&#x27;re done editing.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-14 16:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6656 on 2026-01-14 16:51</div>
            <div class="timeline-body"><p>Yes on it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-14 16:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6856 on 2026-01-14 16:52</div>
            <div class="timeline-body"><p>(It&#x27;s a bit sloppy of me to just call <code>.ok()</code> here TBH, it&#x27;s possible we should be emitting diagnostics here... but I&#x27;m increasingly in a &quot;let&#x27;s just merge this already&quot; mood on this one; the manual parsing for all this is nightmarishly complicated and we can always iterate on it in followups ðŸ˜„)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-14 16:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6510 on 2026-01-14 16:52</div>
            <div class="timeline-body"><p>yup, over to you again!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2026-01-14 17:04</div>
            <div class="timeline-body"><p>let&#x27;s go</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2026-01-14 17:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6856 on 2026-01-14 17:04</div>
            <div class="timeline-body"><p>Agreed I&#x27;m happy to follow-up on all of these with smaller PRs!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2026-01-14 17:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6856 on 2026-01-14 17:05</div>
            <div class="timeline-body"><p>tyty</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:22:31 UTC
    </footer>
</body>
</html>
