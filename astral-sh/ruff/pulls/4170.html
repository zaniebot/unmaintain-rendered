<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warn on PEP 604 syntax not in an annotation, but don't autofix - astral-sh/ruff #4170</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Warn on PEP 604 syntax not in an annotation, but don't autofix</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/4170">#4170</a>
        opened by <a href="https://github.com/wookie184">@wookie184</a>
        on 2023-05-01 17:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/wookie184">@wookie184</a> on 2023-05-01 17:07</div>
            <div class="timeline-body"><p>Closes #3937. (also related, #4108)</p>
<p>This was removed after #3215 and #2981, although in both those cases, the issue isn't specific to the syntax not being in an annotation. AFAICT it's pretty much an equally safe change in both places, although in this PR i've made it so it will only warn and not autofix anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-05-01 17:18</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>✅ ecosystem check detected no changes.</p>
<h3>Benchmark</h3>
<h4>Linux</h4>
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.00     15.0±0.05ms     2.7 MB/sec    1.00     15.0±0.09ms     2.7 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.01      3.6±0.01ms     4.6 MB/sec    1.00      3.6±0.03ms     4.6 MB/sec
linter/all-rules/numpy/globals.py          1.01    374.1±1.50µs     7.9 MB/sec    1.00    371.0±0.78µs     8.0 MB/sec
linter/all-rules/pydantic/types.py         1.01      6.3±0.03ms     4.1 MB/sec    1.00      6.2±0.02ms     4.1 MB/sec
linter/default-rules/large/dataset.py      1.01      7.6±0.03ms     5.4 MB/sec    1.00      7.6±0.03ms     5.4 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00   1581.0±4.35µs    10.5 MB/sec    1.00  1588.5±11.92µs    10.5 MB/sec
linter/default-rules/numpy/globals.py      1.00    171.8±0.65µs    17.2 MB/sec    1.00    171.3±0.18µs    17.2 MB/sec
linter/default-rules/pydantic/types.py     1.01      3.4±0.00ms     7.6 MB/sec    1.00      3.4±0.00ms     7.6 MB/sec
parser/large/dataset.py                    1.00      5.9±0.03ms     6.9 MB/sec    1.02      6.0±0.01ms     6.8 MB/sec
parser/numpy/ctypeslib.py                  1.00   1139.5±1.08µs    14.6 MB/sec    1.02   1161.9±1.40µs    14.3 MB/sec
parser/numpy/globals.py                    1.00    116.0±0.28µs    25.4 MB/sec    1.01    117.3±0.22µs    25.2 MB/sec
parser/pydantic/types.py                   1.00      2.5±0.00ms    10.2 MB/sec    1.02      2.5±0.05ms    10.1 MB/sec
</code></pre>
<h4>Windows</h4>
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.00     21.5±0.55ms  1938.0 KB/sec    1.04     22.3±0.60ms  1864.1 KB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      5.3±0.18ms     3.1 MB/sec    1.03      5.5±0.19ms     3.0 MB/sec
linter/all-rules/numpy/globals.py          1.00   626.5±22.79µs     4.7 MB/sec    1.03   643.3±32.95µs     4.6 MB/sec
linter/all-rules/pydantic/types.py         1.00      8.9±0.29ms     2.9 MB/sec    1.04      9.3±0.33ms     2.7 MB/sec
linter/default-rules/large/dataset.py      1.00     10.9±0.26ms     3.7 MB/sec    1.03     11.3±0.34ms     3.6 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00      2.3±0.08ms     7.3 MB/sec    1.06      2.4±0.12ms     7.0 MB/sec
linter/default-rules/numpy/globals.py      1.00   268.4±22.56µs    11.0 MB/sec    1.07   287.6±17.61µs    10.3 MB/sec
linter/default-rules/pydantic/types.py     1.00      4.8±0.20ms     5.3 MB/sec    1.05      5.1±0.19ms     5.0 MB/sec
parser/large/dataset.py                    1.04      9.3±0.46ms     4.4 MB/sec    1.00      8.9±0.39ms     4.5 MB/sec
parser/numpy/ctypeslib.py                  1.00  1727.6±65.50µs     9.6 MB/sec    1.01  1749.0±66.00µs     9.5 MB/sec
parser/numpy/globals.py                    1.00    171.1±7.31µs    17.2 MB/sec    1.04    177.8±7.40µs    16.6 MB/sec
parser/pydantic/types.py                   1.00      3.8±0.09ms     6.7 MB/sec    1.01      3.9±0.14ms     6.6 MB/sec
</code></pre>
<!-- thollander/actions-comment-pull-request "PR Check Results" -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2023-05-02 06:45</div>
            <div class="timeline-body"><p>Thank you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-05-02 06:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-05-02 06:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 04:29:51 UTC
    </footer>
</body>
</html>
