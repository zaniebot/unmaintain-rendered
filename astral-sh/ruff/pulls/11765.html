<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] support if-expressions in type inference and CFG - astral-sh/ruff #11765</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] support if-expressions in type inference and CFG</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11765">#11765</a>
        opened by <a href="https://github.com/carljm">@carljm</a>
        on 2024-06-05 22:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/carljm">@carljm</a> on 2024-06-05 22:07</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Add support for if-expressions. Fixes #11743.</p>
<h2>Test Plan</h2>
<p>Added tests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @carljm on 2024-06-05 22:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @carljm on 2024-06-05 22:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @MichaReiser removed by @carljm on 2024-06-05 22:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @carljm on 2024-06-05 22:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @carljm on 2024-06-05 22:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-06-05 22:21</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2024-06-05 22:33</div>
            <div class="timeline-body"><p>Could also consider adding a test with a more complex expression, such as</p>
<pre><code class="language-py">x = 1 if 0 else 2 if 0 else 3 if 0 else 42
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2024-06-05 22:41</div>
            <div class="timeline-body"><p>I will add a test like that, but I'm going to add it in the next PR, because the only thing it reveals is that we don't yet normalize union types like we should (flattening nested unions), and I want to fix that in the same PR I add the test.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-06-06 06:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @carljm on 2024-06-06 10:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @carljm on 2024-06-06 10:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-06-06 10:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 21:56:32 UTC
    </footer>
</body>
</html>
