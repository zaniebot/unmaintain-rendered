<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow aliased `logging` module as a logger candidate - astral-sh/ruff #3718</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow aliased <code>logging</code> module as a logger candidate</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/3718">#3718</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2023-03-24 18:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a></div>
            <div class="timeline-body"><p>Currently, <code>is_logger_candidate</code> will only detect if the last part of the call path but before the level function is <code>log</code>, <code>logger</code> or <code>logging</code>. This expands so that the direct calls from the <code>logging</code> module are considered even if they're aliased to names other than the ones listed above.</p>
<p>This affects the following rules:</p>
<ul>
<li><code>BLE001</code></li>
<li>All of <code>flake8-logging-format</code> rules as there's a single entry point for every rule</li>
<li><code>PLE1205</code></li>
<li><code>PLE1206</code></li>
</ul>
<h2>Test plan</h2>
<p>A test case has been added for <code>G001</code> where the <code>logging</code> module is aliased.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-03-24 18:58</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>âœ… ecosystem check detected no changes.</p>
<h3>Benchmark</h3>
<h4>Linux</h4>
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.00     14.5Â±0.09ms     2.8 MB/sec    1.00     14.5Â±0.05ms     2.8 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      3.8Â±0.02ms     4.4 MB/sec    1.00      3.8Â±0.01ms     4.4 MB/sec
linter/all-rules/numpy/globals.py          1.00    435.9Â±1.34Âµs     6.8 MB/sec    1.01    438.4Â±1.98Âµs     6.7 MB/sec
linter/all-rules/pydantic/types.py         1.00      6.4Â±0.04ms     4.0 MB/sec    1.00      6.4Â±0.05ms     4.0 MB/sec
linter/default-rules/large/dataset.py      1.00      7.8Â±0.03ms     5.2 MB/sec    1.01      7.9Â±0.04ms     5.2 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00   1713.0Â±5.98Âµs     9.7 MB/sec    1.00   1705.9Â±2.64Âµs     9.8 MB/sec
linter/default-rules/numpy/globals.py      1.01    176.4Â±1.05Âµs    16.7 MB/sec    1.00    174.4Â±1.72Âµs    16.9 MB/sec
linter/default-rules/pydantic/types.py     1.00      3.7Â±0.02ms     7.0 MB/sec    1.00      3.7Â±0.03ms     6.9 MB/sec
</code></pre>
<h4>Windows</h4>
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.00     14.9Â±0.05ms     2.7 MB/sec    1.03     15.4Â±0.06ms     2.6 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      4.1Â±0.04ms     4.1 MB/sec    1.01      4.2Â±0.02ms     4.0 MB/sec
linter/all-rules/numpy/globals.py          1.00    455.5Â±7.64Âµs     6.5 MB/sec    1.00    456.6Â±5.25Âµs     6.5 MB/sec
linter/all-rules/pydantic/types.py         1.00      6.6Â±0.02ms     3.8 MB/sec    1.03      6.8Â±0.04ms     3.7 MB/sec
linter/default-rules/large/dataset.py      1.00      8.1Â±0.06ms     5.0 MB/sec    1.03      8.3Â±0.12ms     4.9 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00  1745.0Â±10.71Âµs     9.5 MB/sec    1.02  1785.2Â±46.78Âµs     9.3 MB/sec
linter/default-rules/numpy/globals.py      1.00    180.9Â±0.89Âµs    16.3 MB/sec    1.01    182.6Â±4.59Âµs    16.2 MB/sec
linter/default-rules/pydantic/types.py     1.00      3.8Â±0.03ms     6.8 MB/sec    1.03      3.9Â±0.03ms     6.6 MB/sec
</code></pre>
<!-- thollander/actions-comment-pull-request "PR Check Results" -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-03-24 21:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-03-24 21:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-03-24 21:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-24 21:19</div>
            <div class="timeline-body"><p>ğŸ‘ Makes sense to me!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-03-25 01:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-04-04 14:47</div>
            <div class="timeline-body"><p>I wonder if this is why Ruff is now incorrectly changing (via <code>G010</code>) this:</p>
<pre><code class="language-python">from distutils import log as distutils_log
distutils_log.warn(msg, *args)  # pylint: disable=deprecated-method
</code></pre>
<p>into <code>.warning</code>, which is not defined on <code>distutils.log</code> (it's not a logger from logging).</p>
<p>This was in scikit-build, so surprised it wasn't shown in the ecosystem check. https://github.com/scikit-build/scikit-build/pull/909</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-04 14:49</div>
            <div class="timeline-body"><p>We should omit <code>distuils.log.warn</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-04 14:55</div>
            <div class="timeline-body"><p>(Also unsure why it didn't appear in the ecosystem check.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-04-04 15:15</div>
            <div class="timeline-body"><p>Not exactly critical (people shouldn't be using <code>distutils.log</code> except for very special cases, don't mind working around it), but not showing up in the ecosystem check is a bit more worrisome.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-04-04 16:22</div>
            <div class="timeline-body"><p>Oh interesting! Yes, we should check if the resolved path is from the <code>logging</code> module only.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:56:48 UTC
    </footer>
</body>
</html>
