<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pyupgrade`] Add fix safety section to `UP004` - astral-sh/ruff #18853</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pyupgrade</code>] Add fix safety section to <code>UP004</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/18853">#18853</a>
        opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a>
        on 2025-06-21 19:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a></div>
            <div class="timeline-body">

Summary


<p>Part of #15584</p>
<p>This adds a <code>Fix safety</code> section to <a href="https://docs.astral.sh/ruff/rules/useless-object-inheritance/#useless-object-inheritance-up004">useless-object-inheritance (UP004)</a></p>
<p>I could not track down the original PR as this rule is so old it has gone through several large ruff refactors.
No reasoning is given on the unsafety in the PR/code.
The unsafety is determined here:
https://github.com/astral-sh/ruff/blob/f24e650dfd9d20c3d01c2615da3f4778da3cf036/crates/ruff_linter/src/rules/pyupgrade/rules/useless_class_metaclass_type.rs#L76-L80</p>
<p>Unsafe fix demonstration:
<a href="https://play.ruff.rs/12b24eb4-d7a5-4ae0-93bb-492d64967ae3">playground</a></p>
<pre><code>class A(  # will be deleted
    object
):
    ...
</code></pre>
Test Plan


<p>N/A, no tests/functionality affected</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-06-21 20:06</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dylwil3">@dylwil3</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-22 07:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-06-23 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dylwil3">@dylwil3</a> approved on 2025-06-23 13:22</div>
            <div class="timeline-body"><p>Perfect, thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-06-23 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-06-23 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-06-23 16:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:15:46 UTC
    </footer>
</body>
</html>
