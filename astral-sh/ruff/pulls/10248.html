<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make rule PT012 example clearer - astral-sh/ruff #10248</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make rule PT012 example clearer</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/10248">#10248</a>
        opened by <a href="https://github.com/eerovaher">@eerovaher</a>
        on 2024-03-06 15:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eerovaher">@eerovaher</a></div>
            <div class="timeline-body"><p><em>No description provided.</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @MichaReiser on 2024-03-06 15:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @MichaReiser on 2024-03-06 15:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/flake8_pytest_style/rules/raises.rs</code>:31 on 2024-03-06 15:33</div>
            <div class="timeline-body"><p>I think this proposed change defeats the point of the example.</p>
<p>In this example, the person writing the test wants to assert that <code>func_to_test</code> raises <code>MyError</code>. But the test they're writing has a bug in it -- the <code>setup()</code> function raises <code>MyError</code>, which means that the test passes even though the <code>pytest.raises()</code> block is exited before we even get to the function they wanted to test. The comment here is trying to point to the line that that should be moved out of the <code>pytest.raises()</code> block in order to avoid this antipattern</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> requested changes on 2024-03-06 15:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-03-06 15:39</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2024-03-06 15:42</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eerovaher">@eerovaher</a> reviewed on 2024-03-06 15:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eerovaher">@eerovaher</a> on <code>crates/ruff_linter/src/rules/flake8_pytest_style/rules/raises.rs</code>:31 on 2024-03-06 15:43</div>
            <div class="timeline-body"><p>From the example solution I got the impression that <code>setup()</code> cannot raise <code>MyError</code> because if it does then simply moving it out from the <code>with</code>-block is not the correct thing to do. But it was simple enough to address your feedback by making the comment more explicit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2024-03-06 15:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/flake8_pytest_style/rules/raises.rs</code>:31 on 2024-03-06 15:45</div>
            <div class="timeline-body"><p>Yeah, I agree that it wasn't particularly clear as it was. I like the revised PR, thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @AlexWaygood on 2024-03-06 15:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-03-06 15:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-03-06 15:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:02:59 UTC
    </footer>
</body>
</html>
