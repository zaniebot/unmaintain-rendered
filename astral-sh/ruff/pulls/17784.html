<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convert `Message::SyntaxError` to use `Diagnostic` internally - astral-sh/ruff #17784</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Convert <code>Message::SyntaxError</code> to use <code>Diagnostic</code> internally</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/17784">#17784</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-05-01 23:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/ntBre">@ntBre</a> on 2025-05-01 23:51</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR is a first step toward integration of the new <code>Diagnostic</code> type into ruff. There are two main changes:</p>
<ul>
<li>A new <code>UnifiedFile</code> enum wrapping <code>File</code> for red-knot and a <code>SourceFile</code> for ruff</li>
<li>ruff's <code>Message::SyntaxError</code> variant is now a <code>Diagnostic</code> instead of a <code>SyntaxErrorMessage</code></li>
</ul>
<p>The second of these changes was mostly just a proof of concept for the first, and it went pretty smoothly. Converting <code>DiagnosticMessage</code>s will be most of the work in replacing <code>Message</code> entirely.</p>
<h2>Test Plan</h2>
<p>Existing tests, which show no changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-05-01 23:53</div>
            <div class="timeline-body"><!-- generated-comment mypy_primer -->

<h2><code>mypy_primer</code> results</h2>
<p>No ecosystem changes detected ‚úÖ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-05-02 00:06</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>encountered format errors</strong>. (no format changes; 1 project error)</p>
<details><summary><a href="https://github.com/mesonbuild/meson-python">mesonbuild/meson-python</a> (error)</summary>
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to read tests/packages/symlinks/baz.py: No such file or directory (os error 2)
error: Failed to read tests/packages/symlinks/qux.py: No such file or directory (os error 2)
</code></pre>
</p>
</details>

<h3>Formatter (preview)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>encountered format errors</strong>. (no format changes; 1 project error)</p>
<details><summary><a href="https://github.com/mesonbuild/meson-python">mesonbuild/meson-python</a> (error)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to read tests/packages/symlinks/baz.py: No such file or directory (os error 2)
error: Failed to read tests/packages/symlinks/qux.py: No such file or directory (os error 2)
</code></pre>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_benchmark/benches/red_knot.rs</code>:222 on 2025-05-02 06:49</div>
            <div class="timeline-body"><p>Can we use more telling variable names here üòÖ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:633 on 2025-05-02 06:54</div>
            <div class="timeline-body"><p>Reparsing notebooks here seems somewhat fragile and returning an empty notebook will return in a panic when trying to lookup locations (that now all point into nowhere)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/message/mod.rs</code>:51 on 2025-05-02 06:55</div>
            <div class="timeline-body"><p>Can't these just be regular functions?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:701 on 2025-05-02 13:27</div>
            <div class="timeline-body"><p>FWIW, I think the main intent with <code>FileResolver</code> is that it would become a trait, and this would be how we'd handle Ruff using its own interning for files. i.e., Red Knot would pass its own Salsa-backed resolver, but Ruff would use its non-Salsa thing.</p>
<p>I think if you aren't doing the interning, then yeah, this API is probably fine and perhaps even slightly over-engineered. If you do still plan to do interning---and I think that will let you definitively make <code>UnifiedFile</code> and therefore <code>Span</code> implement <code>Copy</code>---then I think this is a good stepping stone toward that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_linter/src/message/mod.rs</code>:66 on 2025-05-02 13:29</div>
            <div class="timeline-body"><p>Should these macros be helper functions?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2025-05-02 13:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-05-02 18:34</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/message/mod.rs</code>:66 on 2025-05-02 18:34</div>
            <div class="timeline-body"><p>Yeah that's a good idea. I need to sort out some lifetime issues I introduced, but functions would be preferable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by @AlexWaygood on 2025-05-03 21:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-05-06 17:57</div>
            <div class="timeline-body"><p>Okay, I think this is ready for review. The two main changes since y'all last had a look are:</p>
<ul>
<li>Removing the macros
I added a somewhat overly-specific <code>Diagnostic::expect_ruff_span</code> method that just unwraps a <code>primary_span</code> call but with a ruff-centric message. I think this should eventually go away when we  actually use <code>Diagnostic</code> for output, so hopefully it's okay temporarily. Otherwise I just inlined the macros. They were mostly just to consolidate <code>expect</code> messages.</li>
<li>Removing the repeated <code>Notebook</code> parsing
I added a comment to this effect in the code, but Ruff already does its own notebook handling when <code>Message</code>s are emitted. Thanks @MichaReiser for the suggestion there!</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @ntBre on 2025-05-06 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @ntBre on 2025-05-06 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @ntBre on 2025-05-06 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @ntBre on 2025-05-06 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dcreager by @ntBre on 2025-05-06 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @ntBre on 2025-05-06 17:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Prototype `Diagnostic` refactor" to "Convert `Message::SyntaxError` to use new `Diagnostic`s internally" by @ntBre on 2025-05-06 17:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Convert `Message::SyntaxError` to use new `Diagnostic`s internally" to "Convert `Message::SyntaxError` to use `Diagnostic` internally" by @ntBre on 2025-05-06 17:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2025-05-06 21:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:655 on 2025-05-06 21:32</div>
            <div class="timeline-body"><pre><code class="language-suggestion">            UnifiedFile::Ty(_) =&gt; panic!(&quot;Expected a ruff file, found a ty file&quot;),
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_benchmark/benches/ty.rs</code>:209 on 2025-05-07 07:15</div>
            <div class="timeline-body"><p>This took me way too long to understand. I think we should simplify this to <code>.map(|span| span.file().expect_ty().path(db).as_str())</code> knowing that we are in ty code</p>
<p>We could simplify this further by moving <code>expect_ty</code> to <code>span</code> so that one can write</p>
<pre><code class="language-rust">.map(|span| span.expect_ty_file().path(db).as_str())
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:243 on 2025-05-07 07:16</div>
            <div class="timeline-body"><p>I think this could just be <code>expect_span</code>. The name ruff span is confusing because there isn't a type that represents ar fuf span.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:701 on 2025-05-07 07:22</div>
            <div class="timeline-body"><p>I find having both <code>path</code> and <code>file_path</code> on <code>UnifiedFile</code> confusing because the only difference is whether they take a <code>db</code> or <code>FileResolver</code>, but that's not apparent from the method signature.</p>
<p>One option is to make <code>FileResolver</code> a trait as @BurntSushi suggests and implement it for <code>Db</code> (and <code>Upcast</code>). We would then need to implement a similar struct for Ruff.</p>
<p>Or we remove <code>file_path</code> (and all other methods that take <code>db</code>) and callers should instead call <code>expect_ty</code> and the <code>path</code> on the returned file. The renderer could <code>call resolver.path(file)</code> directly and we move this match into <code>resolver.path</code>. I think I sort of prefer this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:631 on 2025-05-07 07:28</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    fn path&lt;'a&gt;(&amp;'a self, resolver: &amp;FileResolver&lt;'a&gt;) -&gt; &amp;'a str {
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_db/src/diagnostic/render.rs</code>:219 on 2025-05-07 07:29</div>
            <div class="timeline-body"><pre><code class="language-suggestion">        resolver: &amp;FileResolver&lt;'a&gt;,
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_db/src/diagnostic/render.rs</code>:185 on 2025-05-07 07:29</div>
            <div class="timeline-body"><pre><code class="language-suggestion">        resolver: &amp;FileResolver&lt;'a&gt;,
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_db/src/source.rs</code>:70 on 2025-05-07 07:33</div>
            <div class="timeline-body"><p>I'm a bit concerned about using <code>SourceText</code> here. The type is supposed to be the return type of the <code>source_text</code> query and most of the fields aren't relevant for you. I'd prefer a diagnostic specific type instead OR avoid constructing an intermediate representation. Can you point me to why we need to convert into <code>SourceText</code>?</p>
<p>I've a strong preference to not reuse <code>SourceText</code> for the diagnostic parts. I also don't think it's really needed because the renderer mainly uses <code>Input::as_source_code</code>. Could we store a <code>SourceCode</code> instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-05-07 07:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @dcreager removed by @MichaReiser on 2025-05-07 07:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @sharkdp removed by @MichaReiser on 2025-05-07 07:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @AlexWaygood removed by @MichaReiser on 2025-05-07 07:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-05-07 13:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:655 on 2025-05-07 13:21</div>
            <div class="timeline-body"><p>Thank you! That should be the last one, I did a quick <code>rg -i 'red.knot'</code> to confirm.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-05-07 13:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:633 on 2025-05-07 13:22</div>
            <div class="timeline-body"><p>I think these should be resolved. (possibly left over from your first review of the draft?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-05-07 13:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_benchmark/benches/ty.rs</code>:209 on 2025-05-07 13:29</div>
            <div class="timeline-body"><p>Ah that's much better, thank you! <code>expect_ty_file</code> was more useful everywhere else <code>expect_ty</code> was currently used too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-05-07 13:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:243 on 2025-05-07 13:30</div>
            <div class="timeline-body"><p>I wanted to put &quot;ruff&quot; in the <code>expect</code> message, but I agree. I'll rename it and update the message.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-05-07 13:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:631 on 2025-05-07 13:45</div>
            <div class="timeline-body"><p>I swear I tried this yesterday, and it wouldn't compile. Maybe that was one of the other cases because it worked now, thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-05-07 13:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_benchmark/benches/red_knot.rs</code>:222 on 2025-05-07 13:49</div>
            <div class="timeline-body"><p>Resolved by your other suggestion, fortunately!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-05-07 13:57</div>
            <div class="timeline-body"><p>I went ahead and pushed the minor changes, working on the <code>SourceText</code> and <code>FileResolver</code> stuff next.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_linter/src/message/mod.rs</code>:80 on 2025-05-07 14:04</div>
            <div class="timeline-body"><p>It might be a little nicer to accept a <code>impl std::fmt::Display</code> here (which is what most of the <code>Diagnostic</code> APIs accept, at least, in spirit). Then you could avoid the various <code>err.to_string()</code> calls and just pass <code>err</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:240 on 2025-05-07 14:06</div>
            <div class="timeline-body"><p>Can you add a comment documenting this? In particular, it would be good to state the panic conditions and the higher level motivation for why you might want to use this. (e.g., &quot;When working with diagnostics in Ruff, the context requires that every diagnostic have a primary span.&quot;)</p>
<p>I think I'd also rename this to <code>expect_primary_span()</code> so that it's consistent with <code>primary_span()</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:693 on 2025-05-07 14:07</div>
            <div class="timeline-body"><p>Can you add docs to this type? This might be a nice place to put some prose about why this exists and the high level strategy for how we're trying to share the diagnostics system between both ty and ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:701 on 2025-05-07 14:15</div>
            <div class="timeline-body"><p>I don't feel too strongly here primarily because <code>path()</code> is an internal API, so I think the blast radius of confusion is somewhat more limited.</p>
<p>I'm happy with either of @MichaReiser's suggestions though. I kinda like just jumping straight to the trait approach, which was the original intent.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_db/src/source.rs</code>:70 on 2025-05-07 14:34</div>
            <div class="timeline-body"><p>I think using just <code>SourceCode</code> might be a little tricky here, because you need somewhere to anchor its lifetimes to.</p>
<p>I do agree that reusing <code>SourceText</code> here is a little wonky.</p>
<p>Maybe the way to go here is another enum:</p>
<pre><code class="language-rust">enum DiagnosticSource {
    Ty(SourceText),
    Ruff(SourceFile),
)
</code></pre>
<p>And then you should be able to define a method to return a <code>SourceCode</code> I think.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2025-05-07 14:35</div>
            <div class="timeline-body"><p>Looking pretty good!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-05-07 15:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_db/src/source.rs</code>:70 on 2025-05-07 15:52</div>
            <div class="timeline-body"><p>I went with</p>
<pre><code class="language-rust">enum DiagnosticSource {
    Ty(Input),
    Ruff(SourceFile),
}
</code></pre>
<p>since we need both the <code>SourceText</code> and the <code>LineIndex</code> from <code>Input</code> to implement <code>as_source_code</code>. I also tried using <code>SourceCode</code> directly and immediately ran into the tricky lifetimes Andrew mentioned!</p>
<p>I guess another option would be to use <code>Span::expect_ty_file</code> for now and revisit this when we actually start rendering diagnostics from ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-05-07 18:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:701 on 2025-05-07 18:05</div>
            <div class="timeline-body"><p>Is this close to what y'all had in mind? <a href="https://github.com/astral-sh/ruff/pull/17784/commits/1faa5e0aec829af1bca4f176315b692b9a34676e">1faa5e0</a></p>
<p>I feel like I may have gone astray here in the details, but <code>FileResolver</code> is now a trait, the code compiles, and I got rid of <code>file_path</code>, at least.</p>
<p>The docs on <code>FileResolver</code> are probably slightly outdated now, but they still sounded relevant enough to me to leave alone since we're not really fully decoupled from salsa yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:701 on 2025-05-07 18:39</div>
            <div class="timeline-body"><p>Yeah that looks about right to me! Thanks!</p>
<p>I'd probably go for <code>dyn Trait</code> here though since I don't think the virtual call is going to matter perf-wise, and it will hopefully save from duplicating the rendering code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2025-05-07 18:39</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-08 07:53</div>
            <div class="timeline-body"><p>@ntBre can you ping me when this is ready for re-review (it is already)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-05-08 12:43</div>
            <div class="timeline-body"><p>It should be ready for another review!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @ntBre on 2025-05-08 12:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @BurntSushi by @ntBre on 2025-05-08 12:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:693 on 2025-05-08 13:19</div>
            <div class="timeline-body"><p>Nice, much better!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff_db/src/diagnostic/mod.rs</code>:724 on 2025-05-08 13:19</div>
            <div class="timeline-body"><p>Nice docs. And I like this type. Much clearer.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> approved on 2025-05-08 13:20</div>
            <div class="timeline-body"><p>LGTM!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-05-08 16:43</div>
            <div class="timeline-body"><p>This is excellent. Thank you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-05-08 16:45</div>
            <div class="timeline-body"><p>Thank you both!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @ntBre on 2025-05-08 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-05-08 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-05-08 16:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 18:57:30 UTC
    </footer>
</body>
</html>
