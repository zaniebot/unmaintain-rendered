<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web playground with WASM - astral-sh/ruff #1279</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Web playground with WASM</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1279">#1279</a>
        opened by <a href="https://github.com/squiddy">@squiddy</a>
        on 2022-12-18 16:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/squiddy">@squiddy</a> on 2022-12-18 16:13</div>
            <div class="timeline-body"><p>This MR provides a web playground for ruff. https://611ef32d.ruff-axw.pages.dev/</p>
<ul>
<li>on-the-fly linting of code</li>
<li>configuration can be adjusted</li>
<li>persists config &amp; source code in the URL for sharing (<a href="https://611ef32d.ruff-axw.pages.dev/#N4Ig5gNg9gRghhAziAXKRBTCGDGAXVEAbQB0QBRMgGgAIyAxaukAVTIF0QqQIBLAOwwBabPzB4AFoQBsABhABfBQBJVAYhoBhKAAcAngCdeYCXhoAKHAEoaAWV44DURFABmZ7QZ1QDcPLyh+ADoaAEEICBojEzxEKIxMAwA3DAATIIAoDQAZBwx+TFSaAFd+VIwDGkkMOwBJABUaXJx8zEyQDpZ-Pjw9GldS-ACCmjgymhwIOERMONcfEswaAHdeSSjS-gEwKqgoJBooFMrsgGUABSCOkAyM1ycAWxoAfWeBvGKDDFeaXgfvAxmMb8KB4PzDRC3P4AszODLQnywxBBHR+CTw-6ImiINYYDEw7HFGA6JwtGb4rGIPSQhGAqoSL5wVLbO6PKp6HTbX6Yumhfh6WinDAAR2K+RatBYW0Ctw0pzgKXpNWWPgA1lzmV98D4+sVCisJPkaNAmVzJLw4g8oKlitgMqdyAAlABqTuemgA6gARGgAXkOyLAGDwOGWqXMVgynq9z2yAHlNABpP30xnMsRBbJQHCqiO3DLlVyjRDPPiIPCWQJ4fJ4FBhfk0AA+xoteCIfL07CbVWKOmw7f5tCCw-YNiEAD4W+WB52UBkaAuaNdyAVPgkVjUEMs4NSaEGgVOCB154veEWLQJy2MWpX+NW77RzGW8LQPn2MFYrHPFz-4h8DPwh63veeCRj+Xz-oBRA4FWNbsPmzw4tWzyopIcT+m+2DmCeC5EDhv7OCiaJBCCBgPDg0wYOYhGoRIJE+P8aLmDon74T+8yVDovyAeY0ylq25hIRgQT7kJqI5nAQaIBGNgANTFvx5aCbiInBnqFRiXAElSTJYGLvBka3IWvwlogcAPN8tHmK4vDYChaIAIx1uWBi0DZdm0QATM5eAGGOk4wHsEDfou1yOmpAFxL5Yq-EWeAqjQtFxHAXxKti5nCdc+EQZ8gE0cRpHkZR1HIrR9FkVZ7mWY5n5+v6+WSOVRWYNhv6Lg1dGFZVtnVZInl6QuhkFhg54ljgnxfHezwCNWXgQRU5gYAAHrgxRgjA2A+X5NATjQgX7CFC5hRFIzRTUZ5pctq3rdgiVoiZ6UWcWaXjQYk1mDNFQksGFRXMe4EnSZiEZfZkiLSt403RgtBUsiV2Q3AG0fvmxkWoheCpHwMBvD11k9aDEhbf5e1BYdS4dOFkE0PUBgxRd1T9D1e1YIEYBRVA2JgmUKVFFjvgGHof03ADVMdU1FEtWLXVMVVBOfkEV6Aogqxg4huIE4gQ3GYgji8DosTmJ9c0-QYRM7ZOLlk8dkFRYaowwC4EBrTUtG7KMgFG99s0AORxDrRj63Emq4HgOpC9lgOtW1hLEqSCTIjgho5s8UBrToa1R9Hi54VnWee-NrlsbnR1CDgXBF8XIC0mYsMwfwNlgAA3IlRh3oJ1J1w3ql4AT5i+7rgfe5+5fFwu8FZwNv5BOUMHlHmWcK75evz4uQ2TNMcSOqU4WILatb4dccYwAAViHbsSPsRRfLvEBmPcUBPLT-BbGIuz7OH+HGa8AhrK8glYK4GGGNU61k5q5Tm5Q3pEzJj+TAEBXCL1SCAraKZyxILWhXbEADEEVFNmA1BGNcEoxGhsfgvd8IpTAEkOsQpRTigwEQFy7AqD4XUujdMLCfyhlSJwxcLhPgtDrFKYYjDfK0AAHKBAwF2f0kjBAsOJlvfgO895WwpqUZKyVALwzWojbA4cfwXTYWggQMDFwqwkDHEk2Z45BHOLofImdc6UKSLw4u4prTbF9CANarghAAA4R6jzQSA30u9Y42JmHY2o5xyBuNzmg3BYSiTWLJMic4MS4mYNgRjAQySIlpOibE+JWduG+m4SU1ez1UnxzMW1HKAEaBKJUbfcwAAqGpUSYIPAeKUBwfgqICHTngMJqcDAtFYj+LAmA6nxBvmYf04TOnIifk4rOLjKltQ8emMA3jfEBKCcXEJa18nLKKVk0eECklLLjlEjJxTsmLkTrgVUvp6AIEwJs38ZSKmYMniLXKTTt4JD3uYa+e9EEgNoOC2+OC3qRiAA">Example with code &amp; config</a>)</li>
</ul>
<hr />
<p>Technical details:</p>
<ul>
<li>Split lib/main into wasm and native</li>
</ul>
<p>Not all dependencies compile under the wasm target (or make sense to even include). I thought it best to make that explicit by splitting up the lib.rs between native and wasm.
For main.rs I didn't find any other solution, apparantely one can not tell cargo to <em>not</em> build a binary under certain targets. The current main makes use of rayon and the current iterator wrapper breaks code check / clippy. I couldn't think of a good use case for WASM to have a direct entrypoint, so currently under wasm I provide a noop implementation.</p>
<ul>
<li>Add web playground</li>
</ul>
<p>Similar to @charliermarsh's original implementation this is based on vite &amp; monaco-editor. The checks currently fail because I included a step to deploy the final result to cloudflare pages. Which obviously doesn't work due to the lack of secrets, and it also needs to be moved to some other main-only workflow.</p>
<ul>
<li>Auto-generated options.ts</li>
</ul>
<p>This powers the configuration in the playground. I'm keeping an eye on the current work on the JSON schema. Potentially that schema can replace the dev command I'm introducing here.</p>
<hr />
<p>More can be done on the playground itself, but I'd appreciate some reviews, especially on the wasm side of things. Perhaps some of this can be merged and we iterate on the playground in future MRs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-19 01:12</div>
            <div class="timeline-body"><p>Nice, this would be cool to have. I published https://ruff.pages.dev/ at some point based on that code, it'd be nice to have that continuously deployed, more prominent, officially part of the codebase with WASM support, etc. Very supportive of this!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/squiddy">@squiddy</a> on 2022-12-19 20:17</div>
            <div class="timeline-body"><p>Put together some configuration panel. Auto-generated from our options annotations. Not very user friendly, but wanted to see how easy passing in options from JS to rust is: very easy thanks to serde+wasm.</p>
<p><img src="https://user-images.githubusercontent.com/50333/208511837-54ed181d-7f04-43bc-9c4c-122a95708929.png" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/didiercolens">@didiercolens</a> on 2022-12-20 08:22</div>
            <div class="timeline-body"><p>this is awesome, testing it in a web app with codemirror and works great! thanks a lot @squiddy and @charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @squiddy on 2022-12-22 14:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/squiddy">@squiddy</a> on 2022-12-22 14:02</div>
            <div class="timeline-body"><p>Marking as ready. I updated the MR description with some more details.</p>
<p>Sharing config &amp; code via URL works now: <a href="https://611ef32d.ruff-axw.pages.dev/#N4Ig5gNg9gRghhAziAXKRBTCGDGAXVEAbQB0QBRMgGgAIyAxaukAVTIF0QqQIBLAOwwBabPzB4AFoQBsABhABfBQBJVAYhoBhKAAcAngCdeYCXhoAKHAEoaAWV44DURFABmZ7QZ1QDcPLyh+ADoaAEEICBojEzxEKIxMAwA3DAATIIAoDQAZBwx+TFSaAFd+VIwDGkkMOwBJABUaXJx8zEyQDpZ-Pjw9GldS-ACCmjgymhwIOERMONcfEswaAHdeSSjS-gEwKqgoJBooFMrsgGUABSCOkAyM1ycAWxoAfWeBvGKDDFeaXgfvAxmMb8KB4PzDRC3P4AszODLQnywxBBHR+CTw-6ImiINYYDEw7HFGA6JwtGb4rGIPSQhGAqoSL5wVLbO6PKp6HTbX6Yumhfh6WinDAAR2K+RatBYW0Ctw0pzgKXpNWWPgA1lzmV98D4+sVCisJPkaNAmVzJLw4g8oKlitgMqdyAAlABqTuemgA6gARGgAXkOyLAGDwOGWqXMVgynq9z2yAHlNABpP30xnMsRBbJQHCqiO3DLlVyjRDPPiIPCWQJ4fJ4FBhfk0AA+xoteCIfL07CbVWKOmw7f5tCCw-YNiEAD4W+WB52UBkaAuaNdyAVPgkVjUEMs4NSaEGgVOCB154veEWLQJy2MWpX+NW77RzGW8LQPn2MFYrHPFz-4h8DPwh63veeCRj+Xz-oBRA4FWNbsPmzw4tWzyopIcT+m+2DmCeC5EDhv7OCiaJBCCBgPDg0wYOYhGoRIJE+P8aLmDon74T+8yVDovyAeY0ylq25hIRgQT7kJqI5nAQaIBGNgANTFvx5aCbiInBnqFRiXAElSTJYGLvBka3IWvwlogcAPN8tHmK4vDYChaIAIx1uWBi0DZdm0QATM5eAGGOk4wHsEDfou1yOmpAFxL5Yq-EWeAqjQtFxHAXxKti5nCdc+EQZ8gE0cRpHkZR1HIrR9FkVZ7mWY5n5+v6+WSOVRWYNhv6Lg1dGFZVtnVZInl6QuhkFhg54ljgnxfHezwCNWXgQRU5gYAAHrgxRgjA2A+X5NATjQgX7CFC5hRFIzRTUZ5pctq3rdgiVoiZ6UWcWaXjQYk1mDNFQksGFRXMe4EnSZiEZfZkiLSt403RgtBUsiV2Q3AG0fvmxkWoheCpHwMBvD11k9aDEhbf5e1BYdS4dOFkE0PUBgxRd1T9D1e1YIEYBRVA2JgmUKVFFjvgGHof03ADVMdU1FEtWLXVMVVBOfkEV6Aogqxg4huIE4gQ3GYgji8DosTmJ9c0-QYRM7ZOLlk8dkFRYaowwC4EBrTUtG7KMgFG99s0AORxDrRj63Emq4HgOpC9lgOtW1hLEqSCTIjgho5s8UBrToa1R9Hi54VnWee-NrlsbnR1CDgXBF8XIC0mYsMwfwNlgAA3IlRh3oJ1J1w3ql4AT5i+7rgfe5+5fFwu8FZwNv5BOUMHlHmWcK75evz4uQ2TNMcSOqU4WILatb4dccYwAAViHbsSPsRRfLvEBmPcUBPLT-BbGIuz7OH+HGa8AhrK8glYK4GGGNU61k5q5Tm5Q3pEzJj+TAEBXCL1SCAraKZyxILWhXbEADEEVFNmA1BGNcEoxGhsfgvd8IpTAEkOsQpRTigwEQFy7AqD4XUujdMLCfyhlSJwxcLhPgtDrFKYYjDfK0AAHKBAwF2f0kjBAsOJlvfgO895WwpqUZKyVALwzWojbA4cfwXTYWggQMDFwqwkDHEk2Z45BHOLofImdc6UKSLw4u4prTbF9CANarghAAA4R6jzQSA30u9Y42JmHY2o5xyBuNzmg3BYSiTWLJMic4MS4mYNgRjAQySIlpOibE+JWduG+m4SU1ez1UnxzMW1HKAEaBKJUbfcwAAqGpUSYIPAeKUBwfgqICHTngMJqcDAtFYj+LAmA6nxBvmYf04TOnIifk4rOLjKltQ8emMA3jfEBKCcXEJa18nLKKVk0eECklLLjlEjJxTsmLkTrgVUvp6AIEwJs38ZSKmYMniLXKTTt4JD3uYa+e9EEgNoOC2+OC3qRiAA">Example</a></p>
<p>I thought that's nice to have, as it can make sharing bug reports nicer? E.g. <a href="https://611ef32d.ruff-axw.pages.dev/#N4Ig5gNg9gRghhAziAXKRBTCGDGAXVEAbQB0QAlAUQBUyBdEAX0YBI2ANFAAgEsA7PFwA+XAHJQ+GLgF4xEjACgFAEwwAzLmAx4A+gA8AFAEouAWgB8vASgVc7m6PAhd2t+zw3teiOZJv2AlxkuAEY3OwAnbQBXCL4XIA">for the false-positive RET504</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-22 14:09</div>
            <div class="timeline-body"><p>Awesome, pumped to review! Will try to get to it today but might be tomorrow.</p>
<p>(Permalinks is genius especially for bug reports.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>.github/workflows/ci.yaml</code>:157 on 2022-12-24 04:17</div>
            <div class="timeline-body"><p>Perhaps this should be moved to its own workflow, that runs on <code>main</code> update, and continuously releases the playground?</p>
<p>The <em>ideal</em> would probably be that we build and deploy a preview URL to Pages on every PR, and that URL gets linked back to the PR via a comment or as the hyperlink on the check completion. But, that doesn't have to happen here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>playground/src/App.tsx</code>:15 on 2022-12-24 04:18</div>
            <div class="timeline-body"><p>Is this the default editor text? (If so, extract to a top-level constant?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>playground/src/App.tsx</code>:67 on 2022-12-24 04:18</div>
            <div class="timeline-body"><p>Nit: can we move to its own component (<code>Options.tsx</code>)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>playground/src/App.tsx</code>:116 on 2022-12-24 04:20</div>
            <div class="timeline-body"><p>I believe this needs to depend on <code>config</code> and <code>source</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>ruff_dev/src/generate_playground_options.rs</code>:1 on 2022-12-24 04:22</div>
            <div class="timeline-body"><p>(Don't forget to clean this up please.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>ruff_dev/src/main.rs</code>:37 on 2022-12-24 04:22</div>
            <div class="timeline-body"><p>Ditto.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>playground/src/App.tsx</code>:91 on 2022-12-24 04:24</div>
            <div class="timeline-body"><p>Any idea why these aren't spanning the entire range?</p>
<img width="119" alt="Screen Shot 2022-12-23 at 11 23 55 PM" src="https://user-images.githubusercontent.com/1309177/209421068-cd2b5e92-6e74-4bf8-9a48-0902a0720b1f.png">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>playground/src/options.ts</code>:12 on 2022-12-24 04:26</div>
            <div class="timeline-body"><p>Can we omit the settings that don't make sense in a non-filesystem context? Like <code>src</code>, <code>exclude</code>, etc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>playground/src/style.css</code>:24 on 2022-12-24 04:28</div>
            <div class="timeline-body"><p>I might spend some time re-styling this, to make the UI more cohesive between the settings pane and the editor. I think the settings should have some kind of show/hide UX too -- perhaps they should even be hidden by default.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>playground/src/style.css</code>:24 on 2022-12-24 04:29</div>
            <div class="timeline-body"><p>E.g., something like this would make sense.</p>
<img width="1624" alt="Screen Shot 2022-12-23 at 11 29 04 PM" src="https://user-images.githubusercontent.com/1309177/209421206-05dcdf01-2436-4bf2-ab49-fc28493e292c.png">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>src/lib.rs</code>:85 on 2022-12-24 04:29</div>
            <div class="timeline-body"><p>I think what you have here makes sense.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-24 04:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>Cargo.toml</code>:62 on 2022-12-24 04:29</div>
            <div class="timeline-body"><p>Can this not be under <code>target_family = &quot;wasm&quot;</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/squiddy">@squiddy</a> on <code>playground/src/style.css</code>:24 on 2022-12-24 04:30</div>
            <div class="timeline-body"><p>Thank you, that sounds reasonable. Styling isn't my strong skill.</p>
<p>Just let me know when you want to tackle that, I'll address your other comments for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/squiddy">@squiddy</a> reviewed on 2022-12-24 04:30</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-24 04:32</div>
            <div class="timeline-body"><p>It would also be cool to have permanent, versioned URLs somehow. I don't know exactly what that would look like, but for bug reports, it'd be nice if the URL that was shared was tied to a specific version of Ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/squiddy">@squiddy</a> reviewed on 2022-12-24 06:10</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/squiddy">@squiddy</a> on <code>playground/src/options.ts</code>:12 on 2022-12-24 06:10</div>
            <div class="timeline-body"><p>Yes, good idea. Done.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/squiddy">@squiddy</a> reviewed on 2022-12-24 06:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/squiddy">@squiddy</a> on <code>playground/src/App.tsx</code>:91 on 2022-12-24 06:32</div>
            <div class="timeline-body"><p>Classic off-by-one error. Column indices needed to be adjusted for the 1-based index of the editor.</p>
<p><a href="https://611ef32d.ruff-axw.pages.dev/#N4XwJBCWC2AOD2AnALgAngZwHQHcAWAhsgKYBuxiQA">Works now</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/squiddy">@squiddy</a> on 2022-12-24 06:39</div>
            <div class="timeline-body"><blockquote>
<p>It would also be cool to have permanent, versioned URLs somehow. I don't know exactly what that would look like, but for bug reports, it'd be nice if the URL that was shared was tied to a specific version of Ruff.</p>
</blockquote>
<p>I was wondering whether it makes sense to decouple the playground from ruff itself. Have it provide the UI and all of that, but load the WASM files from <em>somewhere</em> depending on the version requested. If we were to include the available options inside the WASM, they would be pretty self-contained.</p>
<p>A link such as https://611ef32d.ruff-axw.pages.dev/?version=0.0.119#N4XwJBCWC2AOD2AnALgAngZwHQHcAWAhsgKYBuxiQA would then load the proper WASM file for <code>0.0.119</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/squiddy">@squiddy</a> reviewed on 2022-12-24 06:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/squiddy">@squiddy</a> on <code>Cargo.toml</code>:62 on 2022-12-24 06:40</div>
            <div class="timeline-body"><p>It can, I moved it there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/squiddy">@squiddy</a> reviewed on 2022-12-24 06:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/squiddy">@squiddy</a> on <code>playground/src/App.tsx</code>:15 on 2022-12-24 06:51</div>
            <div class="timeline-body"><p>It's the default, yes. I extracted it out. We probably want to pick something more exciting though. :D</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/squiddy">@squiddy</a> reviewed on 2022-12-24 06:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/squiddy">@squiddy</a> on <code>playground/src/style.css</code>:24 on 2022-12-24 06:52</div>
            <div class="timeline-body"><p>There's also lots of potential in making the user input nicer, based on the type of the option. E.g. presenting checkboxes for booleans. I didn't go into that to keep the PR smallish.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/squiddy">@squiddy</a> reviewed on 2022-12-26 10:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/squiddy">@squiddy</a> on <code>.github/workflows/ci.yaml</code>:157 on 2022-12-26 10:25</div>
            <div class="timeline-body"><p>Moved it to separate workflow.</p>
<p>I agree on the ideal, but I would prefer to get this into a merge-able state first.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-26 12:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>.github/workflows/ci.yaml</code>:157 on 2022-12-26 12:35</div>
            <div class="timeline-body"><p>(Sounds good, I know I'm a bit behind on this!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/squiddy">@squiddy</a> reviewed on 2022-12-26 12:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/squiddy">@squiddy</a> on <code>.github/workflows/ci.yaml</code>:157 on 2022-12-26 12:41</div>
            <div class="timeline-body"><p>Nah, it's all good. :) I will, from time to time, rebase this to resolve conflicts, but probably not daily</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2022-12-26 15:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>.github/workflows/ci.yaml</code>:157 on 2022-12-26 15:06</div>
            <div class="timeline-body"><p>I'm gonna go ahead and resolve conflicts, then merge. There are some things I want to tweak, but better to get this merged and run from there! I'll also setup the deployment keys.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2022-12-26 17:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-12-26 17:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2022-12-27 05:42</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 05:38:26 UTC
    </footer>
</body>
</html>
