<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add title attribute to icons - astral-sh/ruff #8060</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add title attribute to icons</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/8060">#8060</a>
        opened by <a href="https://github.com/jaap3">@jaap3</a>
        on 2023-10-19 08:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jaap3">@jaap3</a></div>
            <div class="timeline-body">Summary
<p>Explain the meaning of the icon for screen readers (and mouse over). Hide &quot;inactive&quot; (low opacity) icons from screen readers.</p>
<p>Remove opacity: 1 styling, it&#x27;s the default opacity.</p>
<p>Without this change a screen reader will just read &quot;Hammer and spanner test tube&quot; for the last column in each row.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jaap3">@jaap3</a> on 2023-10-19 09:20</div>
            <div class="timeline-body"><p>Sorry for the multiple force pushes / CI runs. Tried to get away with just using the GitHub interface to make a PR, but I just couldn&#x27;t get the formatting right ðŸ˜…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-10-19 13:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_dev/src/generate_rules_table.rs</code>:25 on 2023-10-19 13:44</div>
            <div class="timeline-body"><p>I&#x27;d prefer to use &quot;Fix available&quot; to match our other language</p>
<pre><code>                format!(&quot;&lt;span title=&#x27;Fix available&#x27;&gt;{FIX_SYMBOL}&lt;/span&gt;&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_dev/src/generate_rules_table.rs</code>:32 on 2023-10-19 13:46</div>
            <div class="timeline-body"><p>I&#x27;d prefer to use &quot;In preview&quot; to match our other language. The preview docs explain <em>when</em> a rule might be in preview i.e. unstable</p>
<pre><code>            format!(&quot;&lt;span title=&#x27;Rule is in preview&#x27;&gt;{PREVIEW_SYMBOL}&lt;/span&gt;&quot;)
</code></pre>
<p>Maybe this and the fix token should link to the relevant documentation (as a follow-up)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-10-19 13:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-10-19 13:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_dev/src/generate_rules_table.rs</code>:25 on 2023-10-19 13:47</div>
            <div class="timeline-body"><p>Should we do &quot;Rule has fix available&quot; to be even clearer?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-10-19 13:47</div>
            <div class="timeline-body"><p>Thank you! This is a great idea.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-10-19 13:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_dev/src/generate_rules_table.rs</code>:28 on 2023-10-19 13:48</div>
            <div class="timeline-body"><p>Instead of hiding should be say that a fix is <em>not</em> available?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-10-19 13:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_dev/src/generate_rules_table.rs</code>:34 on 2023-10-19 13:49</div>
            <div class="timeline-body"><p>Similar to above, if instead of hiding we state the negative case then we could do &quot;Rule is stable&quot; and for positive case (preview) we could say &quot;Rule is unstable&quot; for symmetry</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-19 14:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jaap3">@jaap3</a> on 2023-10-20 10:50</div>
            <div class="timeline-body"><p>Thanks for the review @zanieb, will probably find some time to update the PR on monday.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jaap3">@jaap3</a> on 2023-10-23 08:32</div>
            <div class="timeline-body"><p>Changing the wording to &quot;Fix available&quot; / &quot;Fix not available&quot; might be confusing. The meaning of the latter can be ambiguous (as in, can be interpreted as &quot;unfixable&quot; instead of manually fixable). I do think announcing/clarifying that a rule can be fixed automatically is warranted as it&#x27;s an exception to the default status quo of a linter.</p>
<p>Similarly with the stable/unstable wording. I believe stating that a rule is stable is excessive information, only the special state of &quot;preview&quot; needs to be announced/clarified.</p>
<p>I experimented with fully hiding (both visually and audibly) the &quot;inactive&quot; icons (while still maintaining the layout) and feel that makes the rules table appear less cluttered:</p>
<p><img src="https://github.com/astral-sh/ruff/assets/48517/83d00f2b-6694-4977-8253-fb7b692a0fdf" alt="Screenshot 2023-10-23 at 10 32 16"></p>
<p>So that&#x27;s what I&#x27;m now proposing with the update I just pushed.</p>
<p>Note: Using <code>visibility: hidden</code> also removes the node from the accessibility tree, so it&#x27;s not announced https://developer.mozilla.org/en-US/docs/Web/CSS/visibility#accessibility_concerns</p>
<p>I also tried adding a heading of &quot;Notes&quot; to the icon column, but felt like it wasn&#x27;t adding that much, so I ended up removing it again.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/jaap3">@jaap3</a> on 2023-10-23 08:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2023-10-23 08:47</div>
            <div class="timeline-body"><a href="https://codspeed.io/astral-sh/ruff/branches/jaap3:patch-1">CodSpeed Performance Report</a>
Merging #8060 will <strong>improve performances by 4.98%</strong>
<p>Comparing <code>jaap3:patch-1</code> (5b98249) with <code>main</code> (67b0434)</p>
Summary
<p><code>âš¡ 4</code> improvements
<code>âœ… 21</code> untouched benchmarks</p>
Benchmarks breakdown
<p>|     | Benchmark | <code>main</code> | <code>jaap3:patch-1</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| âš¡ | <code>linter/all-rules[large/dataset.py]</code> | 172.5 ms | 164.4 ms | +4.9% |
| âš¡ | <code>lexer[unicode/pypinyin.py]</code> | 583.1 Âµs | 559.1 Âµs | +4.29% |
| âš¡ | <code>lexer[pydantic/types.py]</code> | 4 ms | 3.8 ms | +4.62% |
| âš¡ | <code>lexer[large/dataset.py]</code> | 8.9 ms | 8.5 ms | +4.98% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-10-23 14:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_dev/src/generate_rules_table.rs</code>:34 on 2023-10-23 14:37</div>
            <div class="timeline-body"><p>Why include the symbol span at all if it&#x27;s hidden? While I agree that hiding them is a cleaner experience, I don&#x27;t think it&#x27;s very clear what&#x27;s going on when looking at a section of rules with no fixes / preview.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jaap3">@jaap3</a> reviewed on 2023-10-23 14:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jaap3">@jaap3</a> on <code>crates/ruff_dev/src/generate_rules_table.rs</code>:34 on 2023-10-23 14:49</div>
            <div class="timeline-body"><p>It makes sure the icons always appear in the same spot (visibility hidden makes the element still take up space). I based this on the reasoning from @charliermarsh for the commit that added the faint opacity (c9d7c0d7d5d371c8658b65916ca99d704afefc4e)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-10-23 18:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff_dev/src/generate_rules_table.rs</code>:34 on 2023-10-23 18:52</div>
            <div class="timeline-body"><p>Interesting, I actually <em>like</em> the variant in which we show the opaque icons -- I find it clearer, because it gives framing to the column themselves. It was inspired by ESLint&#x27;s documentation: https://eslint.org/docs/latest/rules/.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2023-10-23 19:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_dev/src/generate_rules_table.rs</code>:34 on 2023-10-23 19:04</div>
            <div class="timeline-body"><p>I agree with Charlie, it&#x27;d be preferable to keep the dimmed icons for now. I&#x27;d rather not bundle removing them with this accessibility related change.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/jaap3">@jaap3</a> on <code>crates/ruff_dev/src/generate_rules_table.rs</code>:34 on 2023-10-24 07:03</div>
            <div class="timeline-body"><p>Thanks for the link to the eslint docs. I see they also use aria-hidden for the dimmed icons. I restored the opacity, set aria-hidden. Hope this is acceptable now :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jaap3">@jaap3</a> reviewed on 2023-10-24 07:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2023-10-25 19:09</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 17:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 17:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-10-26 19:24</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:58:30 UTC
    </footer>
</body>
</html>
