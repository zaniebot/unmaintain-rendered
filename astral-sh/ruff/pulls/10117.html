<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix E301 not triggering on decorated methods. - astral-sh/ruff #10117</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fix E301 not triggering on decorated methods.</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/10117">#10117</a>
        opened by <a href="https://github.com/hoel-bagard">@hoel-bagard</a>
        on 2024-02-25 10:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hoel-bagard">@hoel-bagard</a></div>
            <div class="timeline-body"><p>Stacked on top of  #10098.</p>
<h2>Summary</h2>
<p>This PR fixes  #10114.</p>
<h2>Test Plan</h2>
<p>The example given in the issue has been added to the fixtures, and the results compared with pycodestyle.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @hoel-bagard on 2024-02-25 11:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-02-25 11:04</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+14 -83 violations, +0 -0 fixes in 4 projects; 39 projects unchanged)</p>
<details><summary><a href="https://github.com/RasaHQ/rasa">RasaHQ/rasa</a> (+0 -2 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
- <a href='https://github.com/RasaHQ/rasa/blob/68ce281aeec352876afb2baf74844e95b0c69ff4/stubs/sanic.pyi#L25'>stubs/sanic.pyi:25:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/RasaHQ/rasa/blob/68ce281aeec352876afb2baf74844e95b0c69ff4/stubs/sanic.pyi#L30'>stubs/sanic.pyi:30:5:</a> E301 [*] Expected 1 blank line, found 0
</pre>

</p>
</details>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+0 -1 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/apache/airflow/blob/9dac90a42e0ceadd09f6d21fa9810d40a5dbc395/airflow/utils/context.pyi#L53'>airflow/utils/context.pyi:53:5:</a> E301 [*] Expected 1 blank line, found 0
</pre>

</p>
</details>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+2 -68 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/util/compiler.py#L127'>src/bokeh/util/compiler.py:127:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L10'>src/typings/selenium/webdriver/common/action_chains.pyi:10:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L11'>src/typings/selenium/webdriver/common/action_chains.pyi:11:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L12'>src/typings/selenium/webdriver/common/action_chains.pyi:12:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L13'>src/typings/selenium/webdriver/common/action_chains.pyi:13:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L14'>src/typings/selenium/webdriver/common/action_chains.pyi:14:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L15'>src/typings/selenium/webdriver/common/action_chains.pyi:15:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L16'>src/typings/selenium/webdriver/common/action_chains.pyi:16:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L17'>src/typings/selenium/webdriver/common/action_chains.pyi:17:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L18'>src/typings/selenium/webdriver/common/action_chains.pyi:18:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L19'>src/typings/selenium/webdriver/common/action_chains.pyi:19:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L20'>src/typings/selenium/webdriver/common/action_chains.pyi:20:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L21'>src/typings/selenium/webdriver/common/action_chains.pyi:21:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L22'>src/typings/selenium/webdriver/common/action_chains.pyi:22:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L23'>src/typings/selenium/webdriver/common/action_chains.pyi:23:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L24'>src/typings/selenium/webdriver/common/action_chains.pyi:24:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L25'>src/typings/selenium/webdriver/common/action_chains.pyi:25:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/common/action_chains.pyi#L26'>src/typings/selenium/webdriver/common/action_chains.pyi:26:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/firefox/options.pyi#L3'>src/typings/selenium/webdriver/firefox/options.pyi:3:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webdriver.pyi#L35'>src/typings/selenium/webdriver/remote/webdriver.pyi:35:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L27'>src/typings/selenium/webdriver/remote/webelement.pyi:27:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L28'>src/typings/selenium/webdriver/remote/webelement.pyi:28:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L29'>src/typings/selenium/webdriver/remote/webelement.pyi:29:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L30'>src/typings/selenium/webdriver/remote/webelement.pyi:30:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L31'>src/typings/selenium/webdriver/remote/webelement.pyi:31:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L32'>src/typings/selenium/webdriver/remote/webelement.pyi:32:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L33'>src/typings/selenium/webdriver/remote/webelement.pyi:33:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L34'>src/typings/selenium/webdriver/remote/webelement.pyi:34:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L35'>src/typings/selenium/webdriver/remote/webelement.pyi:35:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L36'>src/typings/selenium/webdriver/remote/webelement.pyi:36:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L37'>src/typings/selenium/webdriver/remote/webelement.pyi:37:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L42'>src/typings/selenium/webdriver/remote/webelement.pyi:42:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/remote/webelement.pyi#L51'>src/typings/selenium/webdriver/remote/webelement.pyi:51:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/support/expected_conditions.pyi#L100'>src/typings/selenium/webdriver/support/expected_conditions.pyi:100:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/support/expected_conditions.pyi#L104'>src/typings/selenium/webdriver/support/expected_conditions.pyi:104:5:</a> E301 [*] Expected 1 blank line, found 0
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/typings/selenium/webdriver/support/expected_conditions.pyi#L108'>src/typings/selenium/webdriver/support/expected_conditions.pyi:108:5:</a> E301 [*] Expected 1 blank line, found 0
... 34 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/pandas-dev/pandas">pandas-dev/pandas</a> (+12 -12 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/algos.pyi#L100'>pandas/_libs/algos.pyi:100:5:</a> PLR0917 Too many positional arguments (8/5)
+ <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/algos.pyi#L110'>pandas/_libs/algos.pyi:110:5:</a> PLR0917 Too many positional arguments (7/5)
- <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/algos.pyi#L110'>pandas/_libs/algos.pyi:110:5:</a> PLR0917 Too many positional arguments (8/5)
- <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/algos.pyi#L120'>pandas/_libs/algos.pyi:120:5:</a> PLR0917 Too many positional arguments (7/5)
+ <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/algos.pyi#L17'>pandas/_libs/algos.pyi:17:7:</a> PLW1641 Object does not implement `__hash__` method
- <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/algos.pyi#L22'>pandas/_libs/algos.pyi:22:7:</a> PLW1641 Object does not implement `__hash__` method
+ <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/hashtable.pyi#L206'>pandas/_libs/hashtable.pyi:206:9:</a> PLR0917 Too many positional arguments (6/5)
- <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/hashtable.pyi#L247'>pandas/_libs/hashtable.pyi:247:9:</a> PLR0917 Too many positional arguments (6/5)
... 13 additional changes omitted for rule PLR0917
+ <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/interval.pyi#L58'>pandas/_libs/interval.pyi:58:1:</a> PLR0904 Too many public methods (29 > 20)
- <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/interval.pyi#L59'>pandas/_libs/interval.pyi:59:1:</a> PLR0904 Too many public methods (29 > 20)
+ <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/tslibs/period.pyi#L72'>pandas/_libs/tslibs/period.pyi:72:1:</a> PLR0904 Too many public methods (24 > 20)
- <a href='https://github.com/pandas-dev/pandas/blob/301c5c719bc13c20d44b488d987a05fa5fd605a0/pandas/_libs/tslibs/period.pyi#L73'>pandas/_libs/tslibs/period.pyi:73:1:</a> PLR0904 Too many public methods (24 > 20)
... 12 additional changes omitted for project
</pre>

</p>
</details>
<details><summary>Changes by rule (4 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| E301 | 73 | 2 | 71 | 0 | 0 |
| PLR0917 | 18 | 9 | 9 | 0 | 0 |
| PLR0904 | 4 | 2 | 2 | 0 | 0 |
| PLW1641 | 2 | 1 | 1 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MichaReiser on 2024-02-26 08:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-02-26 08:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @MichaReiser on 2024-02-26 08:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-02-26 09:15</div>
            <div class="timeline-body"><p>That was quick! Thank you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoel-bagard">@hoel-bagard</a> on 2024-02-27 02:04</div>
            <div class="timeline-body"><p>@MichaReiser Since it was a really small fix, should I rebase it on main so that the fix can be merged quicker ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-27 08:19</div>
            <div class="timeline-body"><p>@hoel-bagard yeah that might be worth it. I thought the other PR's are quick wins but that's not the case :(</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoel-bagard">@hoel-bagard</a> on 2024-02-27 08:23</div>
            <div class="timeline-body"><p>@MichaReiser Ok, I'll do that.</p>
<p>Is there a way I can help with the other PR ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-27 08:36</div>
            <div class="timeline-body"><p>That's very kind of you! The main struggle is finding a good way to make <code>E301</code> and <code>I001</code> compatible. See https://github.com/astral-sh/ruff/pull/10096 and @charliermarsh's comment</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @hoel-bagard on 2024-02-27 09:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-02-27 12:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @MichaReiser on 2024-02-27 12:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-03-01 09:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2024-03-01 09:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-03-01 09:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:02:51 UTC
    </footer>
</body>
</html>
