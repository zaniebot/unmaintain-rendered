```yaml
number: 16882
title: "[pep8-naming] Flag variables bound in match patterns (N806/N815/N816)"
type: pull_request
state: closed
author: codex-maintainers
labels:
  - bug
assignees: []
draft: true
base: main
head: gopoto/16502
created_at: 2025-03-21T05:29:25Z
updated_at: 2025-06-20T06:44:20Z
url: https://github.com/astral-sh/ruff/pull/16882
synced_at: 2026-01-12T15:55:59Z
```

# [pep8-naming] Flag variables bound in match patterns (N806/N815/N816)

---

_@codex-maintainers_

## Summary

Extend `pep8-naming` to catch mixed‑case identifiers introduced via structural
pattern matching:

* `N806`: variables bound by a `match` pattern inside functions
* `N815`: variables bound by a `match` pattern inside classes
* `N816`: variables bound by a `match` pattern at module scope

Previously these names were ignored since they weren’t visited during
expression store analysis. Add a pattern walker that binds pattern names and
runs the same naming checks based on the current scope. Test fixtures and
snapshots for `N806`, `N815` and `N816` have been updated with match cases.

## Test Plan

Run Ruff against the `pep8_naming` fixtures:

```console
cargo run -p ruff -- check crates/ruff_linter/resources/test/fixtures/pep8_naming/N806.py --select N806 --no-cache
```

The added pattern variables are now flagged. All unit and integration tests pass
after updating the affected snapshots:

```console
cargo clippy --workspace --all-targets --all-features -- -D warnings
RUFF_UPDATE_SCHEMA=1 cargo test
uvx pre-commit run --all-files --show-diff-on-failure
```

---

This PR was generated by an AI system in collaboration with maintainers: @carljm, @ntBre 

---

_Label `bug` added by @ntBre on 2025-03-21 16:02_

---

_Comment by @github-actions[bot] on 2025-03-21 16:04_

<!-- generated-comment ecosystem -->
## `ruff-ecosystem` results
### Linter (stable)
✅ ecosystem check detected no linter changes.

### Linter (preview)
✅ ecosystem check detected no linter changes.




---

_Comment by @MichaReiser on 2025-06-20 06:44_

Closing because we never got to reviewing this PR.

---

_Closed by @MichaReiser on 2025-06-20 06:44_

---
