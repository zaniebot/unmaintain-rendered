```yaml
number: 766
title: Fix E731
type: pull_request
state: merged
author: harupy
labels: []
assignees: []
merged: true
base: main
head: fix-E731
created_at: 2022-11-16T08:58:00Z
updated_at: 2022-11-16T15:01:20Z
url: https://github.com/astral-sh/ruff/pull/766
synced_at: 2026-01-12T15:55:05Z
```

# Fix E731

---

_@harupy_

E731 should be only emitted when the assignment target is a `Name`.

```python
a = lambda: None  # bad, should be converted to `def a(): return None`.
a.b = lambda: None  # ok
a["b"] = lambda  # ok
```

```bash
# Flake8

> flake8 --select E731 resources/test/fixtures/E731.py
resources/test/fixtures/E731.py:2:1: E731 do not assign a lambda expression, use a def
resources/test/fixtures/E731.py:4:1: E731 do not assign a lambda expression, use a def
resources/test/fixtures/E731.py:7:5: E731 do not assign a lambda expression, use a def

# Current

> cargo run -- --select E731 resources/test/fixtures/E731.py
resources/test/fixtures/E731.py:2:1: E731 Do not assign a lambda expression, use a def
resources/test/fixtures/E731.py:4:1: E731 Do not assign a lambda expression, use a def
resources/test/fixtures/E731.py:7:5: E731 Do not assign a lambda expression, use a def
resources/test/fixtures/E731.py:12:1: E731 Do not assign a lambda expression, use a def  ðŸ‘ˆ
resources/test/fixtures/E731.py:16:1: E731 Do not assign a lambda expression, use a def  ðŸ‘ˆ

# With fix

> cargo run -- --select E731 resources/test/fixtures/E731.py
resources/test/fixtures/E731.py:2:1: E731 Do not assign a lambda expression, use a def
resources/test/fixtures/E731.py:4:1: E731 Do not assign a lambda expression, use a def
resources/test/fixtures/E731.py:7:5: E731 Do not assign a lambda expression, use a def


```

---

_Merged by @charliermarsh on 2022-11-16 14:17_

---

_Closed by @charliermarsh on 2022-11-16 14:17_

---

_Branch deleted on 2022-11-16 15:01_

---
