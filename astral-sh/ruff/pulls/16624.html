<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8-comprehensions`] Stabilize `unnecessary-dict-comprehension-for-iterable` (`C420`) - astral-sh/ruff #16624</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8-comprehensions</code>] Stabilize <code>unnecessary-dict-comprehension-for-iterable</code> (<code>C420</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16624">#16624</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-03-11 13:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a></div>
            <div class="timeline-body">Summary
<p>Stabilizes C420 for the 0.10 release.</p>
Test Plan
<p>No open issues or PRs (except a general issue about <a href="https://github.com/astral-sh/ruff/issues/16579">string normalization</a>). The last (and only) false-negative bug fix was over a month ago.</p>
<p>The tests for this rule were already not on the <code>preview_rules</code> test, so I just changed the <code>RuleGroup</code>. The documentation looked okay to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-11 13:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;v0.10&quot; by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-11 13:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-03-11 13:42</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+57 -0 violations, +0 -0 fixes in 19 projects; 36 projects unchanged)</p>
<a href="https://github.com/DisnakeDev/disnake">DisnakeDev/disnake</a> (+1 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/DisnakeDev/disnake/blob/2ab0c535b021dd120b5a6aff67dc1c195b9913ae/disnake/ext/commands/flag_converter.py#L314">disnake/ext/commands/flag_converter.py:314:28:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/PlasmaPy/PlasmaPy">PlasmaPy/PlasmaPy</a> (+1 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/PlasmaPy/PlasmaPy/blob/1499c30605bf0787dd8832ed6a16e8123df6c328/src/plasmapy/particles/ionization_state_collection.py#L692">src/plasmapy/particles/ionization_state_collection.py:692:40:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/apache/airflow">apache/airflow</a> (+3 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/apache/airflow/blob/3a9cce97fdb68deaab8f83453c9a03da5f3aa54d/airflow/api_fastapi/core_api/services/ui/dependencies.py#L39">airflow/api_fastapi/core_api/services/ui/dependencies.py:39:32:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/apache/airflow/blob/3a9cce97fdb68deaab8f83453c9a03da5f3aa54d/helm_tests/airflow_aux/test_annotations.py#L409">helm_tests/airflow_aux/test_annotations.py:409:63:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/apache/airflow/blob/3a9cce97fdb68deaab8f83453c9a03da5f3aa54d/tests/ti_deps/deps/test_mapped_task_upstream_dep.py#L442">tests/ti_deps/deps/test_mapped_task_upstream_dep.py:442:36:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/apache/superset">apache/superset</a> (+3 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/apache/superset/blob/979f890cd5c8ef793825ecd7b9998197f2b7d140/superset/reports/notifications/email.py#L60">superset/reports/notifications/email.py:60:28:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/apache/superset/blob/979f890cd5c8ef793825ecd7b9998197f2b7d140/superset/reports/notifications/slack_mixin.py#L107">superset/reports/notifications/slack_mixin.py:107:43:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/apache/superset/blob/979f890cd5c8ef793825ecd7b9998197f2b7d140/superset/reports/notifications/slack_mixin.py#L97">superset/reports/notifications/slack_mixin.py:97:39:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/binary-husky/gpt_academic">binary-husky/gpt_academic</a> (+1 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/binary-husky/gpt_academic/blob/045cdb15d86c262a55ede6dd9c84a5ab63dcc797/multi_language.py#L262">multi_language.py:262:21:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+2 -0 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/file_output.py#L145">src/bokeh/command/subcommands/file_output.py:145:17:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/command/subcommands/serve.py#L831">src/bokeh/command/subcommands/serve.py:831:17:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/docker/docker-py">docker/docker-py</a> (+1 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/docker/docker-py/blob/db7f8b8bb67e485a7192846906f600a52e0aa623/docker/types/containers.py#L725">docker/types/containers.py:725:22:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/ibis-project/ibis">ibis-project/ibis</a> (+1 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/ibis-project/ibis/blob/49673e5ba4a72dc9bb98c637983df16101b5e186/ibis/common/egraph.py#L776">ibis/common/egraph.py:776:17:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/mlflow/mlflow">mlflow/mlflow</a> (+3 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/mlflow/mlflow/blob/ce47492f1c702fde5b6129e6e6d0e20415602fa5/mlflow/models/evaluation/base.py#L880">mlflow/models/evaluation/base.py:880:32:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/mlflow/mlflow/blob/ce47492f1c702fde5b6129e6e6d0e20415602fa5/tests/evaluate/test_default_evaluator.py#L134">tests/evaluate/test_default_evaluator.py:134:28:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/mlflow/mlflow/blob/ce47492f1c702fde5b6129e6e6d0e20415602fa5/tests/metrics/genai/test_genai_metrics.py#L559">tests/metrics/genai/test_genai_metrics.py:559:37:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/pandas-dev/pandas">pandas-dev/pandas</a> (+14 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/asv_bench/benchmarks/frame_methods.py#L520">asv_bench/benchmarks/frame_methods.py:520:30:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/pandas/core/apply.py#L226">pandas/core/apply.py:226:24:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/pandas/core/generic.py#L9707">pandas/core/generic.py:9707:21:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/pandas/core/groupby/groupby.py#L5178">pandas/core/groupby/groupby.py:5178:42:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/pandas/io/formats/format.py#L569">pandas/io/formats/format.py:569:27:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/pandas/io/formats/style_render.py#L1228">pandas/io/formats/style_render.py:1228:25:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/pandas/io/formats/style_render.py#L1414">pandas/io/formats/style_render.py:1414:25:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/pandas/io/formats/style_render.py#L1711">pandas/io/formats/style_render.py:1711:25:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/pandas/io/sql.py#L1904">pandas/io/sql.py:1904:25:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/pandas/io/sql.py#L2862">pandas/io/sql.py:2862:25:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/pandas/tests/apply/test_frame_apply.py#L278">pandas/tests/apply/test_frame_apply.py:278:26:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pandas-dev/pandas/blob/89bc204e94cda860085865081cd18cd1d130cec1/pandas/tests/apply/test_frame_apply.py#L305">pandas/tests/apply/test_frame_apply.py:305:9:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
... 2 additional changes omitted for project
</pre>

</p>

<a href="https://github.com/pypa/build">pypa/build</a> (+1 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/pypa/build/blob/41f359f92614d20bcb0174e24a7d548a3b5aac0b/src/build/__main__.py#L40">src/build/__main__.py:40:14:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/pypa/pip">pypa/pip</a> (+2 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/pypa/pip/blob/f82e8929090c2f77ce4f6115a6f2e1b13103208a/src/pip/_internal/locations/_sysconfig.py#L164">src/pip/_internal/locations/_sysconfig.py:164:21:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/pypa/pip/blob/f82e8929090c2f77ce4f6115a6f2e1b13103208a/src/pip/_internal/locations/_sysconfig.py#L166">src/pip/_internal/locations/_sysconfig.py:166:21:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/python-poetry/poetry">python-poetry/poetry</a> (+1 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/python-poetry/poetry/blob/500a313d68637cbd317171c567280a10eaabae3c/src/poetry/console/commands/update.py#L46">src/poetry/console/commands/update.py:46:38:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/reflex-dev/reflex">reflex-dev/reflex</a> (+5 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/reflex-dev/reflex/blob/5c8104ff5bdc6c39f5f2ef499365331f1a2af541/reflex/compiler/compiler.py#L308">reflex/compiler/compiler.py:308:21:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/reflex-dev/reflex/blob/5c8104ff5bdc6c39f5f2ef499365331f1a2af541/reflex/compiler/compiler.py#L313">reflex/compiler/compiler.py:313:17:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/reflex-dev/reflex/blob/5c8104ff5bdc6c39f5f2ef499365331f1a2af541/reflex/components/dynamic.py#L76">reflex/components/dynamic.py:76:17:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/reflex-dev/reflex/blob/5c8104ff5bdc6c39f5f2ef499365331f1a2af541/reflex/components/dynamic.py#L81">reflex/components/dynamic.py:81:13:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/reflex-dev/reflex/blob/5c8104ff5bdc6c39f5f2ef499365331f1a2af541/reflex/vars/base.py#L163">reflex/vars/base.py:163:21:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/scikit-build/scikit-build">scikit-build/scikit-build</a> (+2 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/scikit-build/scikit-build/blob/a2afff25f98e0d1fe573f520b659e1ee1f427c38/skbuild/setuptools_wrap.py#L517">skbuild/setuptools_wrap.py:517:22:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/scikit-build/scikit-build/blob/a2afff25f98e0d1fe573f520b659e1ee1f427c38/skbuild/setuptools_wrap.py#L520">skbuild/setuptools_wrap.py:520:19:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/scikit-build/scikit-build-core">scikit-build/scikit-build-core</a> (+1 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/scikit-build/scikit-build-core/blob/d1aaf2dbd3ad07cbe2f07b91f7653b2446546ea3/src/scikit_build_core/format.py#L74">src/scikit_build_core/format.py:74:16:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/wntrblm/nox">wntrblm/nox</a> (+1 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/wntrblm/nox/blob/21ee4bfbae4d9ea2e59f53c4dfedcc6690e9ff0d/nox/virtualenv.py#L165">nox/virtualenv.py:165:23:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/mesonbuild/meson-python">mesonbuild/meson-python</a> (+1 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/mesonbuild/meson-python/blob/726aafc7235ea45da94605e9d4c606da2c9d376e/mesonpy/__init__.py#L579">mesonpy/__init__.py:579:24:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
</pre>

</p>

<a href="https://github.com/astropy/astropy">astropy/astropy</a> (+13 -0 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/astropy/astropy/blob/7547cfca16582a47497016b873fa8a14b46b9cf6/astropy/coordinates/representation/base.py#L966">astropy/coordinates/representation/base.py:966:20:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/astropy/astropy/blob/7547cfca16582a47497016b873fa8a14b46b9cf6/astropy/coordinates/transformations/graph.py#L292">astropy/coordinates/transformations/graph.py:292:22:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/astropy/astropy/blob/7547cfca16582a47497016b873fa8a14b46b9cf6/astropy/coordinates/transformations/graph.py#L478">astropy/coordinates/transformations/graph.py:478:22:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/astropy/astropy/blob/7547cfca16582a47497016b873fa8a14b46b9cf6/astropy/coordinates/transformations/graph.py#L479">astropy/coordinates/transformations/graph.py:479:18:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/astropy/astropy/blob/7547cfca16582a47497016b873fa8a14b46b9cf6/astropy/modeling/core.py#L830">astropy/modeling/core.py:830:40:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/astropy/astropy/blob/7547cfca16582a47497016b873fa8a14b46b9cf6/astropy/modeling/core.py#L835">astropy/modeling/core.py:835:53:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/astropy/astropy/blob/7547cfca16582a47497016b873fa8a14b46b9cf6/astropy/modeling/core.py#L850">astropy/modeling/core.py:850:20:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/astropy/astropy/blob/7547cfca16582a47497016b873fa8a14b46b9cf6/astropy/modeling/core.py#L864">astropy/modeling/core.py:864:20:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/astropy/astropy/blob/7547cfca16582a47497016b873fa8a14b46b9cf6/astropy/modeling/mappings.py#L66">astropy/modeling/mappings.py:66:36:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/astropy/astropy/blob/7547cfca16582a47497016b873fa8a14b46b9cf6/astropy/modeling/mappings.py#L67">astropy/modeling/mappings.py:67:49:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
+ <a href="https://github.com/astropy/astropy/blob/7547cfca16582a47497016b873fa8a14b46b9cf6/astropy/modeling/tabular.py#L175">astropy/modeling/tabular.py:175:16:</a> C420 [*] Unnecessary dict comprehension for iterable; use `dict.fromkeys` instead
... 2 additional changes omitted for project
</pre>

</p>

Changes by rule (1 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| C420 | 57 | 57 | 0 | 0 | 0 |</p>
</p>


Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-11 13:54</div>
            <div class="timeline-body"><p>All of the ecosystem results look like true positives to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-03-11 14:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-11 14:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-11 14:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-03-11 14:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:12:11 UTC
    </footer>
</body>
</html>
