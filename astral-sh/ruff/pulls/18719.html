<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] ecosystem-analyzer workflow - astral-sh/ruff #18719</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] ecosystem-analyzer workflow</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/18719">#18719</a>
        opened by <a href="https://github.com/sharkdp">@sharkdp</a>
        on 2025-06-17 10:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a></div>
            <div class="timeline-body">Summary
<p>Adds a new ecosystem-analyzer workflow with a similar purpose to the mypy-primer workflow. It creates a richer ecosystem diff report using <a href="https://github.com/astral-sh/ecosystem-analyzer/">ecosystem-analyzer</a> (<a href="https://shark.fish/diff-attr-subscript-narrowing.html">example report</a>). This is still experimental and also quite a bit slower than mypy_primer, so I chose to make this opt-in for now via a <code>ecosystem-analyzer</code> label. This would give us a way to play with this while still evaluating if we should further invest in this or not.</p>
<p>Advantages over the mypy_primer diff output:</p>
<ul>
<li>Interactive filtering of diagnostics</li>
<li>Statistics overview which breaks down added/removed/changed diagnostics across lint rules</li>
<li>Has the concept of &quot;changed&quot; diagnostics, which makes it easier to review changes where diagnostic messages have changed (along with other changes).</li>
<li>Compute diff based on old and new project-lists (<code>good.txt</code>). This allows us to diff changes to the project list itself. This has caused confusion in the past where we tried to add new projects to <code>good.txt</code>, but then ran the <code>main</code>-branch version of ty on that new list (where the bug was not yet fixed)</li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>The report currently needs to be downloaded from the workflow run, as I don&#x27;t know if we have a way of deploying HTML files like this temporarily to some hosted infrastructure.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-06-17 10:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-06-17 10:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-06-20 09:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-06-20 09:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-06-20 13:02</div>
            <div class="timeline-body"><blockquote>
<p>This would give us a way to play with this while still evaluating if we should further invest in this or not.</p>
</blockquote>
<p>I honestly think it&#x27;s &quot;useful enough&quot; just for the top-level summary it gives us, which is a fantastic improvement for tackling huge primer reports that sprawl for many, many lines!</p>
<blockquote>
<p>Disadvantages:</p>
<pre><code>* The report currently needs to be downloaded from the workflow run, as I don&#x27;t know if we have a way of deploying HTML files like this temporarily to some hosted infrastructure.</code></pre>
</blockquote>
<p>Could we have a bot post a comment with a link that you could click on to download the <code>diff.html</code> file...? It&#x27;s currently quite a few clicks to get to the link to download the HTML file, and you don&#x27;t get a notification when the workflow has successfully completed either</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-06-20 13:23</div>
            <div class="timeline-body"><blockquote>
<p>Could we have a bot post a comment with a link that you could click on to download the <code>diff.html</code> file...? It&#x27;s currently quite a few clicks to get to the link to download the HTML file, and you don&#x27;t get a notification when the workflow has successfully completed either</p>
</blockquote>
<p>I thought about it, but it&#x27;s still a horrible experience because it&#x27;s a zip file. So if we want to move forward with this, I&#x27;d really love to have a way to host these reports for a limited period of time (e.g. two months).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-06-20 13:23</div>
            <div class="timeline-body"><p>Merging this for now, so we can play with it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-06-20 13:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-06-20 13:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-06-20 13:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:15:37 UTC
    </footer>
</body>
</html>
