<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update pre-commit dependencies - astral-sh/ruff #19038</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update pre-commit dependencies</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19038">#19038</a>
        opened by <a href="https://github.com/renovate">@renovate</a>
        on 2025-06-30 01:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/renovate">@renovate</a></div>
            <div class="timeline-body"><p>This PR contains the following updates:</p>
<p>| Package | Type | Update | Change |
|---|---|---|---|
| <a href="https://redirect.github.com/astral-sh/ruff-pre-commit">astral-sh/ruff-pre-commit</a> | repository | minor | <code>v0.11.13</code> -&gt; <code>v0.12.1</code> |
| <a href="https://redirect.github.com/python-jsonschema/check-jsonschema">python-jsonschema/check-jsonschema</a> | repository | patch | <code>0.33.0</code> -&gt; <code>0.33.1</code> |
| <a href="https://redirect.github.com/rbubley/mirrors-prettier">rbubley/mirrors-prettier</a> | repository | minor | <code>v3.5.3</code> -&gt; <code>v3.6.2</code> |
| <a href="https://redirect.github.com/woodruffw/zizmor-pre-commit">woodruffw/zizmor-pre-commit</a> | repository | minor | <code>v1.9.0</code> -&gt; <code>v1.10.0</code> |</p>
<hr />
<blockquote>
<p>[!WARNING]
Some dependencies could not be looked up. Check the Dependency Dashboard for more information.</p>
</blockquote>
<p>Note: The <code>pre-commit</code> manager in Renovate is not supported by the <code>pre-commit</code> maintainers or community. Please do not report any problems there, instead <a href="https://redirect.github.com/renovatebot/renovate/discussions/new">create a Discussion in the Renovate repository</a> if you have any questions.</p>
<hr />
<h3>Release Notes</h3>
<details>
<summary>astral-sh/ruff-pre-commit (astral-sh/ruff-pre-commit)</summary>

<h3><a href="https://redirect.github.com/astral-sh/ruff-pre-commit/releases/tag/v0.12.1"><code>v0.12.1</code></a></h3>
<p><a href="https://redirect.github.com/astral-sh/ruff-pre-commit/compare/v0.12.0...v0.12.1">Compare Source</a></p>
<p>See: https://github.com/astral-sh/ruff/releases/tag/0.12.1</p>
<h3><a href="https://redirect.github.com/astral-sh/ruff-pre-commit/releases/tag/v0.12.0"><code>v0.12.0</code></a></h3>
<p><a href="https://redirect.github.com/astral-sh/ruff-pre-commit/compare/v0.11.13...v0.12.0">Compare Source</a></p>
<p>See: https://github.com/astral-sh/ruff/releases/tag/0.12.0</p>
</details>

<details>
<summary>python-jsonschema/check-jsonschema (python-jsonschema/check-jsonschema)</summary>

<h3><a href="https://redirect.github.com/python-jsonschema/check-jsonschema/blob/HEAD/CHANGELOG.rst#0331"><code>v0.33.1</code></a></h3>
<p><a href="https://redirect.github.com/python-jsonschema/check-jsonschema/compare/0.33.0...0.33.1">Compare Source</a></p>
<ul>
<li>Update vendored schemas: bamboo-spec, bitbucket-pipelines, circle-ci, cloudbuild,
compose-spec, dependabot, drone-ci, github-actions, github-workflows, gitlab-ci,
mergify, readthedocs, renovate, taskfile, travis, woodpecker-ci (2025-06-22)</li>
<li>Fix: support <code>click==8.2.0</code></li>
<li>Fix a bug in <code>Last-Modified</code> header parsing which used local time and could
result in improper caching. Thanks :user:<code>fenuks</code>! (:pr:<code>565</code>)</li>
</ul>
</details>

<details>
<summary>rbubley/mirrors-prettier (rbubley/mirrors-prettier)</summary>

<h3><a href="https://redirect.github.com/rbubley/mirrors-prettier/compare/v3.6.1...v3.6.2"><code>v3.6.2</code></a></h3>
<p><a href="https://redirect.github.com/rbubley/mirrors-prettier/compare/v3.6.1...v3.6.2">Compare Source</a></p>
<h3><a href="https://redirect.github.com/rbubley/mirrors-prettier/compare/v3.6.0...v3.6.1"><code>v3.6.1</code></a></h3>
<p><a href="https://redirect.github.com/rbubley/mirrors-prettier/compare/v3.6.0...v3.6.1">Compare Source</a></p>
<h3><a href="https://redirect.github.com/rbubley/mirrors-prettier/compare/v3.5.3...v3.6.0"><code>v3.6.0</code></a></h3>
<p><a href="https://redirect.github.com/rbubley/mirrors-prettier/compare/v3.5.3...v3.6.0">Compare Source</a></p>
</details>

<details>
<summary>woodruffw/zizmor-pre-commit (woodruffw/zizmor-pre-commit)</summary>

<h3><a href="https://redirect.github.com/zizmorcore/zizmor-pre-commit/releases/tag/v1.10.0"><code>v1.10.0</code></a></h3>
<p><a href="https://redirect.github.com/woodruffw/zizmor-pre-commit/compare/v1.9.0...v1.10.0">Compare Source</a></p>
<p>See: https://github.com/zizmorcore/zizmor/releases/tag/v1.10.0</p>
</details>

<hr />
<h3>Configuration</h3>
<p>ðŸ“… <strong>Schedule</strong>: Branch creation - &quot;before 4am on Monday&quot; (UTC), Automerge - At any time (no schedule defined).</p>
<p>ðŸš¦ <strong>Automerge</strong>: Disabled by config. Please merge this manually once you are satisfied.</p>
<p>â™» <strong>Rebasing</strong>: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.</p>
<p>ðŸ‘» <strong>Immortal</strong>: This PR will be recreated if closed unmerged. Get <a href="https://redirect.github.com/renovatebot/renovate/discussions">config help</a> if that's undesired.</p>
<hr />
<ul>
<li>[ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box</li>
</ul>
<hr />
<p>This PR was generated by <a href="https://mend.io/renovate/">Mend Renovate</a>. View the <a href="https://developer.mend.io/github/astral-sh/ruff">repository job log</a>.</p>
<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiI0MC42Mi4xIiwidXBkYXRlZEluVmVyIjoiNDAuNjIuMSIsInRhcmdldEJyYW5jaCI6Im1haW4iLCJsYWJlbHMiOlsiaW50ZXJuYWwiXX0=-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @renovate[bot] on 2025-06-30 01:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-06-30 08:01</div>
            <div class="timeline-body"><p>cc @AlexWaygood @ntBre</p>
<p>There are 3 files where the new semantic syntax errors are being raised. I've made the following changes for 2 files:</p>
<ul>
<li><code>scripts/generate_builtin_modules.py</code>: update the <code>requires-python</code> in <code>scripts/pyproject.toml</code> to <code>3.12</code></li>
<li><code>crates/ty_python_semantic/mdtest.py</code>: use <code>per-file-target-version</code></li>
</ul>
<p>I'm not sure whether <code>crates/ty_vendored/ty_extensions/ty_extensions.pyi</code> should be special cased using <code>per-file-target-version</code> as it's a stub file, so it's not going to be run. We've documented the use of <code>target-version</code> in stub file as:</p>
<blockquote>
<p>Note that a stub file can <a href="https://typing.python.org/en/latest/spec/distributing.html#syntax">sometimes make use of a typing feature</a> before it is available at runtime, as long as the stub does not make use of new syntax. For example, a type checker will understand int | str in a stub as being a Union type annotation, even if the type checker is run using Python 3.9, despite the fact that the | operator can only be used to create union types at runtime on Python 3.10+. As such, Ruff will often recommend newer features in a stub file than it would for an equivalent runtime file with the same target version.</p>
</blockquote>
<p>But, the linked spec also mentions this:</p>
<blockquote>
<p>Stub files are syntactically valid Python files with a .pyi suffix. They should be parseable (e.g., with <a href="https://docs.python.org/3/library/ast.html#ast.parse">ast.parse()</a>) in all Python versions that are supported by the implementation and that are still supported by the CPython project. For example, defining a type alias using the type keyword is only accepted by the Python parser in Python 3.12 and later, so stubs supporting Python 3.11 or earlier versions should not use this syntax.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-06-30 08:14</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>âœ… ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>âœ… ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>âœ… ecosystem check detected no format changes.</p>
<h3>Formatter (preview)</h3>
<p>âœ… ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-06-30 08:24</div>
            <div class="timeline-body"><blockquote>
<p>Stub files are syntactically valid Python files with a .pyi suffix. They should be parseable (e.g., with <a href="https://docs.python.org/3/library/ast.html#ast.parse">ast.parse()</a>) in all Python versions that are supported by the implementation and that are still supported by the CPython project. For example, defining a type alias using the type keyword is only accepted by the Python parser in Python 3.12 and later, so stubs supporting Python 3.11 or earlier versions should not use this syntax.</p>
</blockquote>
<p>The main reason why the spec mandates this is because some type checkers, such as mypy, are written in Python and (reasonably!) use Python's stdlib <code>ast</code> module for parsing Python files. So for interoperability you need stub files to be parseable on all Python versions if you want mypy to be able to understand them regardless of what Python version you're invoking mypy with. But for <code>ty_extensions</code>, no other type checker has any reason to read these stubs (they're not distributed anywhere outside this repo!), so I think it's fine to use the newer syntactic features in <code>ty_extensions.pyi</code>. I'd just add it to <code>per-file-target-version</code> for now; we can reconsider if and when we decide we want to publish the stub as a standalone PyPI package</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-06-30 08:41</div>
            <div class="timeline-body"><blockquote>
<p>so I think it's fine to use the newer syntactic features in <code>ty_extensions.pyi</code>. I'd just add it to <code>per-file-target-version</code> for now; we can reconsider if and when we decide we want to publish the stub as a standalone PyPI package</p>
</blockquote>
<p>That sounds reasonable to me, thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dhruvmanila on 2025-06-30 08:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2025-06-30 08:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-06-30 08:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:13:48 UTC
    </footer>
</body>
</html>
