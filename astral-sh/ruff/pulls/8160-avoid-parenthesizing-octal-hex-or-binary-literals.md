```yaml
number: 8160
title: Avoid parenthesizing octal/hex or binary literals in object positions
type: pull_request
state: merged
author: MichaReiser
labels:
  - formatter
assignees: []
merged: true
base: main
head: dont-parenthesize-octal-hex-and-binary-literals
created_at: 2023-10-24T09:22:36Z
updated_at: 2023-10-24T14:12:53Z
url: https://github.com/astral-sh/ruff/pull/8160
synced_at: 2026-01-12T02:32:41Z
```

# Avoid parenthesizing octal/hex or binary literals in object positions

---

_Pull request opened by @MichaReiser on 2023-10-24 09:22_

## Summary

This fixes a Black deviation that is only relevant for unformatted code. 

Python (and many other languages) require parenthesizing number literals in the object position of a member expression to disambiguate the `.` of the member expression from a decimal separator:

```python
5.test # invalid 
(5).test # valid
5 .test # valid, but not as nice
```

However, the parentheses are not required for binary, octal, or hex literals because they can't have a decimal separator

```python
0b00.test
0x00.test
0o00.test
```

This PR changes our formatter to not insert parentheses for binary, octal, and hex literals.

## Test Plan

Fixed black compatibility test. 

Verified that the similarity index remains unchanged.


---

_Review requested from @charliermarsh by @MichaReiser on 2023-10-24 09:22_

---

_Comment by @MichaReiser on 2023-10-24 09:22_

Current dependencies on/for this PR:
* main
  * **PR #8160** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8160" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a>  ðŸ‘ˆ

This comment was auto-generated by [Graphite](https://app.graphite.dev/github/pr/astral-sh/ruff/8160?utm_source=stack-comment).

---

_Label `formatter` added by @MichaReiser on 2023-10-24 09:22_

---

_Review requested from @konstin by @MichaReiser on 2023-10-24 09:22_

---

_@charliermarsh reviewed on 2023-10-24 14:02_

---

_Review comment by @charliermarsh on `crates/ruff_python_formatter/src/expression/expr_attribute.rs`:177 on 2023-10-24 14:02_

There can't be any spaces here, right?

---

_@charliermarsh approved on 2023-10-24 14:02_

---

_@MichaReiser reviewed on 2023-10-24 14:12_

---

_Review comment by @MichaReiser on `crates/ruff_python_formatter/src/expression/expr_attribute.rs`:177 on 2023-10-24 14:12_

No. Underscores are also not allowed

---

_Merged by @MichaReiser on 2023-10-24 14:12_

---

_Closed by @MichaReiser on 2023-10-24 14:12_

---

_Branch deleted on 2023-10-24 14:12_

---
