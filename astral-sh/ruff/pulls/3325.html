<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use presence of convention-specific sections during docstring inference - astral-sh/ruff #3325</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use presence of convention-specific sections during docstring inference</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/3325">#3325</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-03-03 21:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-03 21:35</div>
            <div class="timeline-body"><p>Previously, if you had a docstring like:</p>
<pre><code class="language-py">def get_gas_price(data: EasyEnergyData, hours: int) -&gt; float | None:
    &quot;&quot;&quot;Get the gas price for a given hour.

    Args:
        data: The data object.
        hours: The number of hours to add to the current time.

    Returns:
        The gas market price value.
    &quot;&quot;&quot;
</code></pre>
<p>We'd first check for any NumPy-style sections. <code>Returns</code> is a valid section header for both NumPy- and Google-style docstrings, so we'd infer that this is a NumPy-style docstring, and validate it as such. <em>However</em>, <code>Args</code> is a Google-style header, and isn't part of the NumPy convention.</p>
<p>This PR thus improves the inference logic by treating docstrings that contain <code>Args</code> or <code>Arguments</code> as Google-style, and docstrings that contain <code>Parameters</code> or <code>Other Parameters</code> as NumPy-style. If none of those sections exist, we then user the convention with the most matches (there could be weird and subtle cases here in which users are unintentionally mixing header conventions by accident, but this seems like a strict improvement).</p>
<p>Closes #3321.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-03-03 22:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-03-03 22:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-03-03 22:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epenet">@epenet</a> on 2023-03-07 08:29</div>
            <div class="timeline-body"><p>Thanks @charliermarsh üëç ü•≥</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 04:41:41 UTC
    </footer>
</body>
</html>
