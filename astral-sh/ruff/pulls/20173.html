<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`airflow`] Improve the `AIR002` error message - astral-sh/ruff #20173</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>airflow</code>] Improve the <code>AIR002</code> error message</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/20173">#20173</a>
        opened by <a href="https://github.com/Lee-W">@Lee-W</a>
        on 2025-08-31 01:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a></div>
            <div class="timeline-body">

Summary


What
<p>Change the message from &quot;DAG should have an explicit <code>schedule</code> argument&quot; to &quot;<code>DAG</code> or <code>@dag</code> should have an explicit <code>schedule</code> argument&quot;</p>
Why
<p>We&#x27;re trying to get rid of the idea that DAG in airflow was Directed acyclic graph. Thus, change it to refer to the class <code>DAG</code> or the decorator <code>@dag</code> might help a bit.</p>
Test Plan


<p>update the test fixtures accordly</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;docs(AIR002): improve AIR002 error message&quot; to &quot;[`airflow`] improve AIR002 error message (`AIR002`)&quot; by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-08-31 01:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-08-31 01:44</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+203 -203 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<a href="https://github.com/apache/airflow">apache/airflow</a> (+203 -203 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/src/airflow/models/dag.py#L288">airflow-core/src/airflow/models/dag.py:288:16:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/src/airflow/models/dag.py#L288">airflow-core/src/airflow/models/dag.py:288:16:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/api_fastapi/core_api/routes/public/test_xcom.py#L406">airflow-core/tests/unit/api_fastapi/core_api/routes/public/test_xcom.py:406:15:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/api_fastapi/core_api/routes/public/test_xcom.py#L406">airflow-core/tests/unit/api_fastapi/core_api/routes/public/test_xcom.py:406:15:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L362">airflow-core/tests/unit/dag_processing/test_collection.py:362:15:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L362">airflow-core/tests/unit/dag_processing/test_collection.py:362:15:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L446">airflow-core/tests/unit/dag_processing/test_collection.py:446:15:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L446">airflow-core/tests/unit/dag_processing/test_collection.py:446:15:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L465">airflow-core/tests/unit/dag_processing/test_collection.py:465:15:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L465">airflow-core/tests/unit/dag_processing/test_collection.py:465:15:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L516">airflow-core/tests/unit/dag_processing/test_collection.py:516:15:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L516">airflow-core/tests/unit/dag_processing/test_collection.py:516:15:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L677">airflow-core/tests/unit/dag_processing/test_collection.py:677:15:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L677">airflow-core/tests/unit/dag_processing/test_collection.py:677:15:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L712">airflow-core/tests/unit/dag_processing/test_collection.py:712:15:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_collection.py#L712">airflow-core/tests/unit/dag_processing/test_collection.py:712:15:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L1004">airflow-core/tests/unit/dag_processing/test_processor.py:1004:14:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L1004">airflow-core/tests/unit/dag_processing/test_processor.py:1004:14:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L1052">airflow-core/tests/unit/dag_processing/test_processor.py:1052:14:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L1052">airflow-core/tests/unit/dag_processing/test_processor.py:1052:14:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L134">airflow-core/tests/unit/dag_processing/test_processor.py:134:18:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L134">airflow-core/tests/unit/dag_processing/test_processor.py:134:18:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L171">airflow-core/tests/unit/dag_processing/test_processor.py:171:18:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L171">airflow-core/tests/unit/dag_processing/test_processor.py:171:18:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L204">airflow-core/tests/unit/dag_processing/test_processor.py:204:18:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L204">airflow-core/tests/unit/dag_processing/test_processor.py:204:18:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L247">airflow-core/tests/unit/dag_processing/test_processor.py:247:18:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L247">airflow-core/tests/unit/dag_processing/test_processor.py:247:18:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L282">airflow-core/tests/unit/dag_processing/test_processor.py:282:18:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L282">airflow-core/tests/unit/dag_processing/test_processor.py:282:18:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L313">airflow-core/tests/unit/dag_processing/test_processor.py:313:18:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L313">airflow-core/tests/unit/dag_processing/test_processor.py:313:18:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L508">airflow-core/tests/unit/dag_processing/test_processor.py:508:11:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L508">airflow-core/tests/unit/dag_processing/test_processor.py:508:11:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L540">airflow-core/tests/unit/dag_processing/test_processor.py:540:10:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L540">airflow-core/tests/unit/dag_processing/test_processor.py:540:10:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L589">airflow-core/tests/unit/dag_processing/test_processor.py:589:14:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L589">airflow-core/tests/unit/dag_processing/test_processor.py:589:14:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L662">airflow-core/tests/unit/dag_processing/test_processor.py:662:14:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L662">airflow-core/tests/unit/dag_processing/test_processor.py:662:14:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L707">airflow-core/tests/unit/dag_processing/test_processor.py:707:14:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L707">airflow-core/tests/unit/dag_processing/test_processor.py:707:14:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L777">airflow-core/tests/unit/dag_processing/test_processor.py:777:14:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L777">airflow-core/tests/unit/dag_processing/test_processor.py:777:14:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L805">airflow-core/tests/unit/dag_processing/test_processor.py:805:14:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L805">airflow-core/tests/unit/dag_processing/test_processor.py:805:14:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L846">airflow-core/tests/unit/dag_processing/test_processor.py:846:14:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L846">airflow-core/tests/unit/dag_processing/test_processor.py:846:14:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
- <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L893">airflow-core/tests/unit/dag_processing/test_processor.py:893:14:</a> AIR002 DAG should have an explicit `schedule` argument
+ <a href="https://github.com/apache/airflow/blob/a811a586a3ffa546af16fd2b75de410d9b132fc7/airflow-core/tests/unit/dag_processing/test_processor.py#L893">airflow-core/tests/unit/dag_processing/test_processor.py:893:14:</a> AIR002 `DAG` or `@dag` should have an explicit `schedule` argument
... 356 additional changes omitted for project
</pre>

</p>

Changes by rule (1 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| AIR002 | 406 | 203 | 203 | 0 | 0 |</p>
</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> approved on 2025-09-03 13:17</div>
            <div class="timeline-body"><p>Thank you!</p>
<p>A bit unrelated to this PR, but we&#x27;re getting ready for the 0.13 release early next week. We&#x27;re planning to stabilize AIR002, AIR301, AIR302, AIR311, and AIR312. Does that sound good to you?</p>
<p>The only reason to hold off is if you plan to make substantial changes to any of these rules, in which case you might prefer to keep the whole rule in preview.</p>
<p>I was going to ping you on the stabilization PR itself but wanted to give you a heads-up!</p>
<p>I&#x27;ll review <a href="https://github.com/astral-sh/ruff/pull/20202">astral-sh/ruff#20202</a> and <a href="https://github.com/astral-sh/ruff/pull/20172">astral-sh/ruff#20172</a>, so they can be part of the stable release too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-03 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-03 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[`airflow`] improve AIR002 error message (`AIR002`)&quot; to &quot;[`airflow`] Improve the `AIR002` error message&quot; by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-03 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-03 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-03 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-09-03 13:23</div>
            <div class="timeline-body"><blockquote>
<p>Thank you!</p>
<p>A bit unrelated to this PR, but we&#x27;re getting ready for the 0.13 release early next week. We&#x27;re planning to stabilize AIR002, AIR301, AIR302, AIR311, and AIR312. Does that sound good to you?</p>
<p>The only reason to hold off is if you plan to make substantial changes to any of these rules, in which case you might prefer to keep the whole rule in preview.</p>
<p>I was going to ping you on the stabilization PR itself but wanted to give you a heads-up!</p>
<p>I&#x27;ll review #20202 and #20172, so they can be part of the stable release too.</p>
</blockquote>
<p>We might extend some more rules, but I don&#x27;t expect there will be a removal for the time being. would it be ok in this case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-03 13:34</div>
            <div class="timeline-body"><p>By &quot;extend&quot; do you mean changes like the two PRs I linked? If so, I think that would be okay. Larger changes <em>can</em> be okay, but we&#x27;ll likely have to preview-gate them in line with our <a href="https://docs.astral.sh/ruff/versioning/#version-changes">versioning guidelines</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-09-03 13:39</div>
            <div class="timeline-body"><p>Yes, something like these 2 PRs.</p>
<p>The following 2 issues are the ones we might extend AIR301 but not yet have the bandwidth to actually do it (the second one is easier, I might be able to create a PR tomorrow)</p>
<p>https://github.com/apache/airflow/issues/41641
<a href="https://github.com/apache/airflow/issues/55208">apache/airflow#55208</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-03 13:54</div>
            <div class="timeline-body"><p>I think that should be okay then, thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-09-04 09:59</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:18:12 UTC
    </footer>
</body>
</html>
