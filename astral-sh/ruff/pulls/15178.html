<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[PROPOSAL+WIP] implement a `ruff analyze live` - astral-sh/ruff #15178</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[PROPOSAL+WIP] implement a <code>ruff analyze live</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/15178">#15178</a>
        opened by <a href="https://github.com/purajit">@purajit</a>
        on 2024-12-29 02:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/purajit">@purajit</a></div>
            <div class="timeline-body"><p>MVP implementation of https://github.com/astral-sh/ruff/issues/15198.</p>
<p>This is definitely not close to the final state of the PR (docs, tests, potential optimizations, Rust idiomaticity,
code refactoring at the very least);  I just wanted to see I could get a reasonable implementation of this working.
I've been using this on our largest repo to test, and it's working really well. Feature-wise, I'd probably want to
add more configuration  options (what to monitor, what to ignore), and also allow for xargs's replstr format to
specify where in the command the file names should be injected (currently just doing it at the end, which should
work in most cases, even with named args).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-12-29 03:05</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2024-12-30 08:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-30 08:37</div>
            <div class="timeline-body"><p>Thanks for opening this PR and suggesting this idea. It's an interesting use case, but it's not fully clear to me how it fits into <code>ruff analyze</code> and ruff overall and if there are ways we can avoid unnecessary code duplication (Ruff now has multiple entry points that support watch).</p>
<p>Unfortunately, I don't have the time right now to think this through but maybe someone else on the team is excited about it and has time to help design a feature that solves the same needs and fits nicely into Ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/purajit">@purajit</a> on 2024-12-30 09:00</div>
            <div class="timeline-body"><p>Thanks for the response!</p>
<p>I guess the difference is whether a tool like this should be built on <em>top</em> of ruff or directly powered
by ruff. I leaned towards the latter because it is directly based on generating the dependency graph
repeatedly and keeping the view updated incrementally in-memory; keeping it in <code>analyze</code> would
also allow this feature to be powered by anything else that gets added to analyze, and other ruff
internals. Of course, the same could be accomplished by a tool that uses ruff and reads the graph
output, but this is far more powerful, and I think it's a powerful canonical feature to have - honestly
one of the biggest benefits of having a dependency graph.</p>
<p>Another argument is that Pants currently has a <a href="https://www.pantsbuild.org/dev/docs/using-pants/key-concepts/goals#running-goals"><code>--loop</code></a> which this would be able to replace for
people coming from that world.</p>
<p>I do understand that this pushes the scope of ruff, I definitely expected some hesitation and discussion!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/purajit">@purajit</a> on 2025-01-05 21:21</div>
            <div class="timeline-body"><p>As an FYI I have a stand-alone implementation in https://github.com/purajit/ruff-tools.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-03-11 08:50</div>
            <div class="timeline-body"><p>I'll close this for now. I like the idea and I think a feature like this could fit into Ruff but we may want to tackle watch support more holisticly in Ruff before adding more command specific implementations.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-03-11 08:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:08:45 UTC
    </footer>
</body>
</html>
