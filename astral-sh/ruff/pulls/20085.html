<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Add support for PEP 750 t-strings  - astral-sh/ruff #20085</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Add support for PEP 750 t-strings</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/20085">#20085</a>
        opened by <a href="https://github.com/dylwil3">@dylwil3</a>
        on 2025-08-25 17:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dylwil3">@dylwil3</a></div>
            <div class="timeline-body"><p>This PR attempts to add support for inferring <code>string.templatelib.Template</code> for t-string literals.</p>
<p>First PR of this kind so apologies in advance if I&#x27;ve made a mess of things! Also this is low priority so feel free to ignore.</p>
<p>Diff is relatively small but feel free to review commit-by-commit if it&#x27;s more convenient.</p>
<p>Also tested LSP:
<img src="https://github.com/user-attachments/assets/25223d08-cd63-4dee-8d17-2c8f1e817e12" alt="demo"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-08-25 17:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-08-25 17:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/sharkdp">@sharkdp</a> by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-08-25 17:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-08-25 17:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-08-25 17:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dylwil3">@dylwil3</a> reviewed on 2025-08-25 17:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dylwil3">@dylwil3</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:4061 on 2025-08-25 17:46</div>
            <div class="timeline-body"><p>Not sure if you&#x27;d like this to be the name or if I should use the full <code>string.templatelib.Template</code> here. A point of confusion is that (very unfortunately) <code>string.Template</code> exists.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-08-25 17:46</div>
            <div class="timeline-body">

Diagnostic diff on <a href="https://github.com/python/typing/tree/d4f39b27a4a47aac8b6d4019e1b0b5b3156fabdc/conformance">typing conformance tests</a>
<p>No changes detected when running ty on typing conformance tests âœ…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dylwil3">@dylwil3</a> reviewed on 2025-08-25 17:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dylwil3">@dylwil3</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:5117 on 2025-08-25 17:46</div>
            <div class="timeline-body"><p>Let me know if you&#x27;d like me to handle this differently, and/or add an assertion to remind us to modify this once the latest supported version is Python 3.14</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-08-25 17:48</div>
            <div class="timeline-body">

<code>mypy_primer</code> results
<p>No ecosystem changes detected âœ…
No memory usage changes detected âœ…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/t_strings.md</code>:5 on 2025-08-25 17:53</div>
            <div class="timeline-body"><p>what&#x27;s the reason for switching off the formatter here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[`ty`] Add support for PEP 750 t-strings &quot; to &quot;[ty] Add support for PEP 750 t-strings &quot; by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-08-25 17:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:3660 on 2025-08-25 18:02</div>
            <div class="timeline-body"><p><code>Template</code> is <a href="https://github.com/python/typeshed/blob/91e2ed0953592795fd8c29e3005a1315bf652ffc/stdlib/string/templatelib.pyi#L7-L8">marked as <code>@final</code> in typeshed</a>, so I don&#x27;t think we also need to consider it a disjoint base (see the comment a couple of lines below this one) -- it&#x27;ll just result in us emitting two diagnostics if you tried to inherit from it, rather than one diagnostic. One seems enough :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:4061 on 2025-08-25 18:03</div>
            <div class="timeline-body"><p>this is correct -- it&#x27;s just meant to be the <code>__name__</code> here, not the fullname!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2025-08-25 18:06</div>
            <div class="timeline-body"><p>Looks great!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dylwil3">@dylwil3</a> reviewed on 2025-08-25 18:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dylwil3">@dylwil3</a> on <code>crates/ty_python_semantic/resources/mdtest/t_strings.md</code>:5 on 2025-08-25 18:11</div>
            <div class="timeline-body"><p><code>black</code> does not yet support Python 3.14 so it errors here</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-08-25 18:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/resources/mdtest/t_strings.md</code>:5 on 2025-08-25 18:16</div>
            <div class="timeline-body"><p>ahhh, makes sense. Can you add a comment?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-08-25 18:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:3660 on 2025-08-25 18:40</div>
            <div class="timeline-body"><p>...and I just deleted this method entirely in <a href="https://github.com/astral-sh/ruff/pull/20084">astral-sh/ruff#20084</a>, so the question is now moot ðŸ˜† sorry for giving you merge conflicts!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dylwil3">@dylwil3</a> reviewed on 2025-08-25 18:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dylwil3">@dylwil3</a> on <code>crates/ty_python_semantic/src/types/class.rs</code>:3660 on 2025-08-25 18:41</div>
            <div class="timeline-body"><p>no worries!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-08-25 18:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-08-25 18:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-08-25 18:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:18:03 UTC
    </footer>
</body>
</html>
