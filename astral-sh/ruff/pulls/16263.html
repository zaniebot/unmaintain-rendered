<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pylint`] Fix false positives, add missing methods, and support positional-only parameters (`PLE0302`) - astral-sh/ruff #16263</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pylint</code>] Fix false positives, add missing methods, and support positional-only parameters (<code>PLE0302</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16263">#16263</a>
        opened by <a href="https://github.com/dcarrier">@dcarrier</a>
        on 2025-02-19 19:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/dcarrier">@dcarrier</a> on 2025-02-19 19:35</div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<p>Resolves 3/4 requests in #16217:</p>
<ul>
<li>✅ Remove not special methods: <code>__cmp__</code>, <code>__div__</code>, <code>__nonzero__</code>, and <code>__unicode__</code>.</li>
<li>✅ Add special methods: <code>__next__</code>, <code>__buffer__</code>, <code>__class_getitem__</code>, <code>__mro_entries__</code>, <code>__release_buffer__</code>, and <code>__subclasshook__</code>.</li>
<li>✅ Support positional-only arguments.</li>
<li>❌ Add support for module functions <code>__dir__</code> and <code>__getattr__</code>. As mentioned in the issue the check is scoped for methods rather than module functions. I am hesitant to expand the scope of this check without a discussion.</li>
</ul>
<!-- What's the purpose of the change? What does it do, and why? -->

<h2>Test Plan</h2>
<!-- How was it tested? -->

<ul>
<li>Manually confirmed each example file from the issue functioned as expected.</li>
<li>Ran cargo nextest to ensure <code>unexpected_special_method_signature</code> test still passed.</li>
</ul>
<p>Fixes #16217.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-02-19 19:44</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-02-20 03:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-02-20 08:50</div>
            <div class="timeline-body"><p>@ntBre do you want to take this one?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-02-20 12:16</div>
            <div class="timeline-body"><p>Sure!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @ntBre by @ntBre on 2025-02-20 12:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> requested changes on 2025-02-20 15:17</div>
            <div class="timeline-body"><p>Thanks for working on this! The code changes look right to me, but I think it would be great to paste in all of the examples from the issue and add their snapshot results just to make sure.</p>
<p>I definitely agree that the module functions are good to leave for a separate rule, so this will be perfect with a few more tests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dcarrier">@dcarrier</a> on 2025-02-20 19:29</div>
            <div class="timeline-body"><p>Thank you for the review! I have added the test cases along with the snapshots as requested.</p>
<p>Side note, we are asserting <code>__cmp__</code>, <code>__div__</code>, <code>__nonzero__</code>, and <code>__unicode__</code> are skipped by including failure cases which do not generate a snapshot.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @ntBre by @dcarrier on 2025-02-20 19:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> approved on 2025-02-20 20:10</div>
            <div class="timeline-body"><p>Nice, this looks great. Thanks again!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[pylint] fix false positives, add missing methods and support posonlyargs (PLE0302)" to "[`pylint`] Fix false positives, add missing methods, and support positional-only parameters (`PLE0302`)" by @ntBre on 2025-02-20 20:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/resources/test/fixtures/pylint/unexpected_special_method_signature.py</code>:74 on 2025-02-20 20:18</div>
            <div class="timeline-body"><p>Oh I missed this on the first review, but we actually still ignore these right? I'm not seeing any snapshots for these lines. I would just revert these two changes, if you don't mind.</p>
<p>Also, this isn't from your changes, but the second comment is actually wrong, the ones with the <code>*</code> are keyword-only not positional-only like the first one.</p>
<p>~~I guess you could also update the first one to say <code>ignore positional-only args with defaults</code> because that looks like the reason we're still skipping it.~~</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-02-20 20:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-02-20 20:29</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/resources/test/fixtures/pylint/unexpected_special_method_signature.py</code>:74 on 2025-02-20 20:29</div>
            <div class="timeline-body"><p>Oh I think I'm wrong about that last part, I forgot that the positional-only arguments come <em>before</em> the <code>/</code> :sweat_smile:</p>
<p>So I think you're right that we do support the positional arguments! I was also wrong that we'd skip it for having defaults. I misread the <code>filter</code> code below.</p>
<p>I believe we <em>do</em> still ignore keyword-only parameters (line 150 below), so that part of my comment is still reasonable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dcarrier">@dcarrier</a> reviewed on 2025-02-21 03:00</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcarrier">@dcarrier</a> on <code>crates/ruff_linter/resources/test/fixtures/pylint/unexpected_special_method_signature.py</code>:74 on 2025-02-21 03:00</div>
            <div class="timeline-body"><p>You are correct, good catch. I have updated the comment to note that we are properly skipping keyword-only args for the <code>*</code> <code>__eq__</code> test.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @ntBre on 2025-02-21 13:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-02-21 13:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-02-25 17:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 19:49:30 UTC
    </footer>
</body>
</html>
