```yaml
number: 7330
title: "playground: Respect line-length and preview configuration"
type: pull_request
state: merged
author: MichaReiser
labels:
  - playground
  - formatter
assignees: []
merged: true
base: main
head: playground-respect-line-width
created_at: 2023-09-13T09:45:23Z
updated_at: 2023-09-13T12:20:49Z
url: https://github.com/astral-sh/ruff/pull/7330
synced_at: 2026-01-12T02:45:39Z
```

# playground: Respect line-length and preview configuration

---

_Pull request opened by @MichaReiser on 2023-09-13 09:45_

## Summary

Respect the line-length and preview settings when formatting code in the playground.

## Test Plan

I set the line length to 100 and 10 and verified that the code breaks differently


---

_Comment by @MichaReiser on 2023-09-13 09:45_

Current dependencies on/for this PR:
* main
  * **PR #7330** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7330" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a>  ðŸ‘ˆ

This comment was auto-generated by [Graphite](https://app.graphite.dev/github/pr/astral-sh/ruff/7330?utm_source=stack-comment).

---

_Label `playground` added by @MichaReiser on 2023-09-13 09:45_

---

_Label `formatter` added by @MichaReiser on 2023-09-13 09:45_

---

_Review comment by @konstin on `crates/ruff_wasm/src/lib.rs`:309 on 2023-09-13 10:16_

we should add an `PyFormatOptions::from_settings(source_type: PySourceType, settings: &Settings)` or similar

---

_@konstin approved on 2023-09-13 10:16_

---

_@MichaReiser reviewed on 2023-09-13 11:37_

---

_Review comment by @MichaReiser on `crates/ruff_wasm/src/lib.rs`:309 on 2023-09-13 11:37_

Agree. The challenge is where to put this because `Setting`s is defined in `ruff`. The only real option is `ruff_workspace` but we should probably split settings into smaller sub-setting objects (formatter, linter, etc). 

---

_@konstin reviewed on 2023-09-13 11:48_

---

_Review comment by @konstin on `crates/ruff_wasm/src/lib.rs`:309 on 2023-09-13 11:48_

it would be nice to have resolved setting outside of `ruff`. I'm not sure how to handle the rules best, maybe move the registry out or have rule-resolved settings that "subclass" the general settings (but either way totally a different PR)

---

_@MichaReiser reviewed on 2023-09-13 11:58_

---

_Review comment by @MichaReiser on `crates/ruff_wasm/src/lib.rs`:309 on 2023-09-13 11:58_

My idea is to have a `LinterSettings` object that we can resolve from `Settings`. Similarly, we have `PyFormatOptions` that we can resolve from `Settings`. Or we have smaller sub-settings but yeah, not entirely sure how to structure this without having to clone a whole lot of data.

---

_Merged by @MichaReiser on 2023-09-13 12:14_

---

_Closed by @MichaReiser on 2023-09-13 12:14_

---

_Branch deleted on 2023-09-13 12:14_

---

_Comment by @github-actions[bot] on 2023-09-13 12:20_

## PR Check Results
### Ecosystem
âœ… ecosystem check detected no changes.



---
