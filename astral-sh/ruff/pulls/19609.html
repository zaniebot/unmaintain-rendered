<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `Checker::context` method, deduplicate Unicode checks - astral-sh/ruff #19609</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>Checker::context</code> method, deduplicate Unicode checks</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19609">#19609</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-07-29 01:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a></div>
            <div class="timeline-body">Summary
<p>This PR adds a <code>Checker::context</code> method that returns the underlying <code>LintContext</code> to unify <code>Candidate::into_diagnostic</code> and <code>Candidate::report_diagnostic</code> in our ambiguous Unicode character checks. This avoids some duplication and also avoids collecting a <code>Vec</code> of <code>Candidate</code>s only to iterate over it later.</p>
Test Plan
<p>Existing tests</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-29 01:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-07-29 01:17</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-07-29 06:29</div>
            <div class="timeline-body"><p>It seems to me that the only problem is that you can&#x27;t go from <code>Checker</code> to <code>LintContext</code> but I don&#x27;t see a reason why that should be, given that <code>Checker</code> stores a <code>LintContext</code>. Is there something that prevents us from adding a <code>context()</code> method to <code>Checker</code> that returns the <code>LintContext</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-29 12:07</div>
            <div class="timeline-body"><p>I think we previously wanted to avoid providing two paths to <code>report_diagnostic</code> (and now <code>settings</code>), at least that&#x27;s what I remember somewhat vaguely. That&#x27;s definitely simpler if we don&#x27;t mind adding the method, though!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Add `DiagnosticReporter` trait, deduplicate Unicode checks&quot; to &quot;Add `Checker::context` method, deduplicate Unicode checks&quot; by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-29 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-29 19:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-07-29 19:37</div>
            <div class="timeline-body"><p>Nice</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-29 20:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-29 20:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-07-29 20:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:17:07 UTC
    </footer>
</body>
</html>
