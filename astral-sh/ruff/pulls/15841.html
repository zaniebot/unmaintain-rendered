<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`ruff`] Classes with mixed type variable style (`RUF053`) - astral-sh/ruff #15841</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>ruff</code>] Classes with mixed type variable style (<code>RUF053</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/15841">#15841</a>
        opened by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a>
        on 2025-01-31 00:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a></div>
            <div class="timeline-body">Summary
<p>Resolves #15620.</p>
<p><code>RUF053</code> reports the first <code>Generic[...]</code> base of any class with a PEP 695 type parameter list. It reuses much of the logic added in #15565, #15659 and other PRs.</p>
<p>Since the original code is fundamentally flawed, the fix takes some liberty in its rewrite. As such, it is always marked as unsafe.</p>
Test Plan
<p><code>cargo nextest run</code> and <code>cargo insta test</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-01-31 00:52</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>âœ… ecosystem check detected no linter changes.</p>
Linter (preview)
<p>âœ… ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-01-31 01:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-01-31 01:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/ntBre">@ntBre</a> by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-31 05:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/pyupgrade/rules/pep695/class_with_mixed_type_vars.rs</code>:40 on 2025-01-31 10:45</div>
            <div class="timeline-body"><pre><code>/// class C[T](Generic[U, P, *Ts]): ...
</code></pre>
<p>(https://peps.python.org/pep-0646/#type-variable-tuples-must-always-be-unpacked)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/pyupgrade/rules/pep695/class_with_mixed_type_vars.rs</code>:16 on 2025-01-31 10:47</div>
            <div class="timeline-body"><pre><code>/// Checks for classes that have [PEP 695] [type parameter lists]
/// while also inheriting from `typing.Generic` or `typing_extensions.Generic`.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/pyupgrade/rules/pep695/class_with_mixed_type_vars.rs</code>:50 on 2025-01-31 10:51</div>
            <div class="timeline-body"><pre><code>/// As the fix changes runtime behaviour, it is always marked as unsafe.
///
/// ## References
/// - [Python documentation: User-defined generic types](https://docs.python.org/3/library/typing.html#user-defined-generic-types)
/// - [Python documentation: type parameter lists](https://docs.python.org/3/reference/compound_stmts.html#type-params)
/// - [PEP 695 - Type Parameter Syntax](https://peps.python.org/pep-0695/)
///
/// [PEP 695]: https://peps.python.org/pep-0695/
/// [type parameter lists]: https://docs.python.org/3/reference/compound_stmts.html#type-params
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/pyupgrade/snapshots/ruff_linter__rules__pyupgrade__tests__UP050.py.snap</code>:40 on 2025-01-31 11:00</div>
            <div class="timeline-body"><p>there&#x27;s actually two reasons why the original code would have raised an exception:</p>
<ul>
<li>It mixes a type parameter list with explicit inheritance from <code>Generic</code></li>
<li>Even if it didn&#x27;t have a type parameter list, it would have raised an exception because <code>Generic</code> must be the last base class in the bases tuple</li>
</ul>
<p>I think this is okay, however, since the rule is concerned with correctness and the fix is clearly documented to always change runtime behaviour.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/pyupgrade/snapshots/ruff_linter__rules__pyupgrade__tests__UP050.py.snap</code>:82 on 2025-01-31 11:04</div>
            <div class="timeline-body"><p>this is an incorrect fix because the <code>_D</code> <code>TypeVar</code> has a <code>default</code> argument. The proper fix here would be</p>
<pre><code>26    |-class C[T](bytes, Generic[_D], bool): ...
   26 |+class C[T, _D = int](bytes, bool): ...
</code></pre>
<p>We don&#x27;t currently handle <code>default</code> keywords at all in our PEP-695 autofixes; it&#x27;s one of the outstanding items in <a href="https://github.com/astral-sh/ruff/issues/15642">astral-sh/ruff#15642</a>. For now, for this rule, I think we should just make sure that we don&#x27;t try to autofix any classes that are generic over any <code>TypeVar</code>s with the <code>default</code> argument.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/pyupgrade/rules/pep695/class_with_mixed_type_vars.rs</code>:63 on 2025-01-31 11:05</div>
            <div class="timeline-body"><p>This doesn&#x27;t feel very descriptive about what the autofix actually does... maybe this?</p>
<pre><code>        Some(&quot;Remove `Generic` base class&quot;.to_string())
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/pyupgrade/snapshots/ruff_linter__rules__pyupgrade__tests__UP050.py.snap</code>:144 on 2025-01-31 11:09</div>
            <div class="timeline-body"><p>The correct way to make a class generic over a <code>TypeVarTuple</code> using the old-style syntax is to do either this:</p>
<pre><code>class C(Generic[*_As]): ...
</code></pre>
<p>or this:</p>
<pre><code>class C(Generic[Unpack[_As]]): ...
</code></pre>
<p>(We don&#x27;t handle <code>Unpack</code> yet in our PEP-695 rules -- that&#x27;s also an oustanding task in <a href="https://github.com/astral-sh/ruff/issues/15642">astral-sh/ruff#15642</a>)</p>
<p>I&#x27;m not sure we should try to autofix classes that are invalidly generic over <code>TypeVarTuple</code>s like this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/pyupgrade/snapshots/ruff_linter__rules__pyupgrade__tests__UP050.py.snap</code>:298 on 2025-01-31 11:11</div>
            <div class="timeline-body"><p>...fair enough ðŸ˜†</p>
<p>I guess if you were actually running Ruff from the command line with <code>--unsafe-fixes --fix</code>, it would get rid of both the <code>Generic</code> base classes, because it runs all selected rules in a loop until there are no more autofixes left to apply? If so, could you maybe add a comment to that effect in the fixture file?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/pyupgrade/rules/pep695/class_with_mixed_type_vars.rs</code>:50 on 2025-01-31 11:12</div>
            <div class="timeline-body"><p>We should also mention in the <code>Fix safety</code> section that the autofix can delete comments</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> had review dismissed on 2025-01-31 11:16</div>
            <div class="timeline-body"><p>Thanks! Some comments below. I haven&#x27;t looked in detail at the implementation yet, just at docs and the behaviour of the rule as indicated by the snapshots.</p>
<p>I don&#x27;t think this should be a <code>pyupgrade</code> rule, since all our existing <code>pyupgrade</code> rules are modernisation/stylistic rules. This rule is different, since it detects (and fixes) behaviour that would cause the code to raise an exception at runtime. I understand that you want to share the code being used in the existing <code>pyugprade</code> PEP-695 rules, but we could always move those utilities to somewhere else in the <code>ruff_linter</code> crate, where it could be accessed by both the pyupgrade rules and this rule</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-01-31 13:35</div>
            <div class="timeline-body"><p>I haven&#x27;t reviewed the code in detail yet either, but it looks a little longer than I expected. I might be oversimplifying things, but can we pretty much reuse the logic from the UP046 class rule and just perform an <code>Edit::insertion</code> at the end of type parameter list instead of writing a full list? That would save you the effort of duplicating all the checks from UP046 (like the <code>default</code> kwarg that Alex pointed out) and converting existing <code>TypeParam</code>s to <code>TypeVar</code>s only to write them back into <code>TypeParam</code>s. This would also lose you any deduplication it looks like you&#x27;re doing with <code>is_existing_param_of_same_class</code>, but the incoming code was a real mess if it had mixed type variables <em>with</em> duplicates :laughing:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-01-31 16:51</div>
            <div class="timeline-body"><blockquote>
<p>[...] can we [...] just perform an <code>Edit::insertion</code> at the end of type parameter list instead of writing a full list?</p>
</blockquote>
<p>I added a testcase for this:</p>
<pre><code># Original
class C[
	T  # Comment about `T`
](Generic[_A]): ...

# Wrong fix
class C[
	T  # Comment about `T`, _A
]: ...

# Also wrong fix (slightly)
class C[
	T, _A  # Comment about `T`
]: ...

# Correct fix, but looks irritating
class C[
	T  # Comment about `T`
, _A]: ...
</code></pre>
<p>I wasn&#x27;t sure if relying on the formatter is the way to go.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-01-31 16:59</div>
            <div class="timeline-body"><p>Ah interesting, I did not catch that about comments, thanks! I&#x27;ll try to give this a fuller review today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-01-31 23:31</div>
            <div class="timeline-body"><p>Could you possibly retitle the PR and edit the description to make clear that this is no longer proposed as a pyupgrade rule?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[`pyupgrade`] Classes with mixed type variable style (`UP050`)&quot; to &quot;[`ruff`] Classes with mixed type variable style (`RUF060`)&quot; by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-01-31 23:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-01-31 23:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:85 on 2025-02-02 18:02</div>
            <div class="timeline-body"><p>nit: this is only used once on line 101, so I&#x27;d probably inline it, or at least move the binding closer to where it&#x27;s used.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:92 on 2025-02-02 18:04</div>
            <div class="timeline-body"><pre><code>    let Some(type_params) = type_params else {
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/resources/test/fixtures/ruff/RUF060.py</code>:13 on 2025-02-02 18:21</div>
            <div class="timeline-body"><p>@AlexWaygood would know better than me, but is this a valid <code>TypeVarTuple</code> call? From the <a href="https://docs.python.org/3/library/typing.html#typing.TypeVarTuple">docs</a>, it looks like it can only take a <code>default</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:130 on 2025-02-02 18:29</div>
            <div class="timeline-body"><p>Did you consider writing this function more like UP046 and UP047 by using the existing <code>TypeVarReferenceVisitor</code>?</p>
<pre><code>
fn convert_type_vars(
    generic_base: &amp;ExprSubscript,
    old_style_type_vars: &amp;Expr,
    type_params: &amp;TypeParams,
    class_arguments: &amp;Arguments,
    checker: &amp;Checker,
) -&gt; Option&lt;Fix&gt; {
    let mut type_vars = type_params
        .type_params
        .iter()
        .map(TypeVar::from)
        .collect::&lt;Vec&lt;_&gt;&gt;();

    let mut visitor = TypeVarReferenceVisitor {
        vars: vec![],
        semantic: checker.semantic(),
        any_skipped: false,
    };
    visitor.visit_expr(old_style_type_vars);

    let Some(mut converted_type_vars) = check_type_vars(visitor.vars) else {
        return None;
    };

    let remove_generic_base = remove_argument(
        generic_base,
        class_arguments,
        Parentheses::Remove,
        checker.source(),
    )
    .ok()?;

    type_vars.append(&amp;mut converted_type_vars);

    let source = checker.source();
    let new_type_params = DisplayTypeVars {
        type_vars: &amp;type_vars,
        source,
    };

    let replace_type_params =
        Edit::range_replacement(new_type_params.to_string(), type_params.range);

    Some(Fix::unsafe_edits(
        remove_generic_base,
        [replace_type_params],
    ))
}
</code></pre>
<p>When I made this change locally, it revealed that I did not properly handle the <code>bound</code> kwarg to <code>ParamSpec</code> (or <code>TypeVarTuple</code> but at least that one isn&#x27;t in the docs as noted above), which I think might be why you wrote it differently. I think it would be preferable to fix the bug in the shared infrastructure if possible, though.</p>
<p>For the specifics of the bug fix, @AlexWaygood  again would know better, but the syntax error I get from Python for code like</p>
<pre><code>def f[**P: [int, float]](p: **P): ...
</code></pre>
<p>is <code>SyntaxError: cannot use bound with ParamSpec</code>, so I&#x27;d probably go for either ignoring <code>bound</code>s for non-<code>TypeVar</code>s or at least bailing out before offering a fix if they are detected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> requested changes on 2025-02-02 18:36</div>
            <div class="timeline-body"><p>Thanks for this! It looks good to me overall besides a couple of nits and a bigger question about reusing the <code>TypeVarReferenceVisitor</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-02-02 18:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/resources/test/fixtures/ruff/RUF060.py</code>:13 on 2025-02-02 18:41</div>
            <div class="timeline-body"><p>Good catch! That&#x27;s correct, yes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-02-02 18:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:130 on 2025-02-02 18:43</div>
            <div class="timeline-body"><p>Yes, providing a <code>bound</code> is not valid for a <code>ParamSpec</code>. The <a href="https://peps.python.org/pep-0612/#declaration">PEP that introduced <code>ParamSpec</code></a> stated:</p>
<blockquote>
<p>The runtime should accept <code>bound</code>s and <code>covariant</code> and <code>contravariant</code> arguments in the declaration just as <code>typing.TypeVar</code> does, but for now we will defer the standardization of the semantics of those options to a later PEP.</p>
</blockquote>
<p>(The later PEP has yet to come!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-02 20:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:130 on 2025-02-02 20:33</div>
            <div class="timeline-body"><p><code>TypeVarReferenceVisitor</code> has several problems.</p>
<ol>
<li><p>It does not differentiate valid and invalid arguments to <code>Generic</code>:</p>
<pre><code>class C(Generic[Unpack[_A]):  ...
#                      ^^ Not `TypeVarTuple`
class C(Generic[Unpack[*_As]):  ...
#                      ^^^^ Double unpacked
</code></pre>
<p>Originally I intended to fix these as well, but @AlexWaygood <a href="https://github.com/astral-sh/ruff/pull/15841#discussion_r1937061965">said</a> such cases should not be autofixed. As stated, the fix can be as free as necessary, so I&#x27;m fine with this change as long as Alex confirms it.</p>
</li>
<li><p>It ignores &quot;unknown&quot; type variables:</p>
<pre><code>from somewhere import APublicTypeVar

# Before
class C[T](Generic[APublicTypeVar, _A]): ...

# After
class C[T, _A: str]: ...
</code></pre>
<p>This too is a case where it would do more harm to provide a fix. A patch will cause a rather big change that also affects other rules relying on <code>TypeVarReferenceVisitor</code>, in which case I will have to change those as well. To be honest, that&#x27;s not something I want to do in this PR.</p>
</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:130 on 2025-02-02 22:57</div>
            <div class="timeline-body"><p>For point (2), this is what I added the<a href="https://github.com/astral-sh/ruff/blob/b08ce5fb18c89792a4744c8642d1a82726e58f5b/crates/ruff_linter/src/rules/pyupgrade/rules/pep695/mod.rs#L196-L198"> <code>TypeVarReferenceVisitor::any_skipped</code></a> field for. If <code>any_skipped</code> you can bail out without a fix. I left that out of my suggestion above, but that&#x27;s what <a href="https://github.com/astral-sh/ruff/blob/b08ce5fb18c89792a4744c8642d1a82726e58f5b/crates/ruff_linter/src/rules/pyupgrade/rules/pep695/non_pep695_generic_class.rs#L179"><code>non_pep695_generic_class</code></a> does.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-02-02 22:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-03 02:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:130 on 2025-02-03 02:50</div>
            <div class="timeline-body"><p>Admittedly, I didn&#x27;t see <code>any_skipped</code> (I must have been <a href="https://en.wikipedia.org/wiki/Inattentional_blindness">blind</a>), but that doesn&#x27;t solve the problem either. It doesn&#x27;t account for existing PEP 695 type parameters, which is, I think, understandable and fixable:</p>
<pre><code>class C[T](Generic[T, _A]): ...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-03 03:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:130 on 2025-02-03 03:15</div>
            <div class="timeline-body"><p>@ntBre I <a href="https://github.com/astral-sh/ruff/pull/15841/commits/2ed42ae9f5add677033b976480e8b66210822c03">added</a> a few more edge cases that you might be interested in.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-02-03 14:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:130 on 2025-02-03 14:22</div>
            <div class="timeline-body"><blockquote>
<ol>
<li>Originally I intended to fix these as well, but @AlexWaygood <a href="https://github.com/astral-sh/ruff/pull/15841#discussion_r1937061965">said</a> such cases should not be autofixed. As stated, the fix can be as free as necessary, so I&#x27;m fine with this change as long as Alex confirms it.</li>
</ol>
</blockquote>
<p>It&#x27;s all a little subjective -- as you say, the code we&#x27;re starting off with is broken, and the fix attempts to fix at least one way in which it is broken, so the whole point of the fix is to change the behaviour of the code in some way. I still do lean towards saying that we should try to keep the fix narrowly focussed on one specific kind of brokenness, though, if that makes sense? ðŸ˜„ If the code is broken in two different -- and actually quite distinct -- ways, it feels wrong for us to fix one reason for brokenness as a side effect of fixing the other reason for brokenness. There&#x27;s a few reasons for this:</p>
<ul>
<li>The user only explicitly opted into the rule about classes that have type parameters and also explicitly inherit from <code>Generic</code>. It might be confusing or outright unwelcome if the fix for that rule also ends up fixing other issues.</li>
<li>Fixing other issues as a side effect of this fix might conceal issues that the user wasn&#x27;t even aware about, and might have preferred to fix manually</li>
<li>Are we <em>confident</em> that what the user intended here is that they meant to have <code>Generic[*_As]</code> or <code>Generic[Unpack[_As]]</code>? Maybe they actually meant <code>_As</code> to be a TypeVar rather than a TypeVarTuple? I don&#x27;t think we should be guessing for something like that</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-05 18:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:130 on 2025-02-05 18:17</div>
            <div class="timeline-body"><p>I take it that the current state of affairs should be kept intact, then?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-02-05 19:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:54 on 2025-02-05 19:48</div>
            <div class="timeline-body"><p>Do we want to be slightly more specific here? I guess it will definitely remove comments inside the <code>Generic[...]</code>. Is there anywhere else?</p>
<p>I guess I read this as &quot;it might or might not remove comments&quot; rather than &quot;it will remove comments depending on where they are.&quot; UP046 and UP047</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-02-05 19:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:130 on 2025-02-05 19:50</div>
            <div class="timeline-body"><p>Oops, I clicked &quot;single comment&quot; instead of starting a review, but I&#x27;m reviewing this again now, expecting to approve. Alex may want to have another look too, though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-05 19:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:54 on 2025-02-05 19:56</div>
            <div class="timeline-body"><p>How about this?</p>
<blockquote>
<p>Additionally, comments within the fix range will not be preserved.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-02-05 19:58</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:54 on 2025-02-05 19:58</div>
            <div class="timeline-body"><p>Sounds good to me!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:186 on 2025-02-05 20:01</div>
            <div class="timeline-body"><p>nit: I think <code>checker</code> is only used for this call, so you could just pass a <code>&amp;SemanticModel</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:184 on 2025-02-05 20:06</div>
            <div class="timeline-body"><p>I think you can get rid of this check completely by initializing <code>encountered</code> with the names of the <code>existing_type_params</code>:</p>
<pre><code>diff --git a/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs b/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs
index b2ac21005..f9c7f718e 100644
--- a/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs
+++ b/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs
@@ -5,7 +5,7 @@ use ruff_macros::{derive_message_formats, ViolationMetadata};
 use ruff_python_ast::{
     Arguments, Expr, ExprStarred, ExprSubscript, ExprTuple, StmtClassDef, TypeParams,
 };
-use ruff_python_semantic::{Binding, BindingKind, SemanticModel};
+use ruff_python_semantic::SemanticModel;
 
 use crate::checkers::ast::Checker;
 use crate::fix::edits::{remove_argument, Parentheses};
@@ -139,7 +139,7 @@ fn convert_type_vars(
         .map(TypeVar::from)
         .collect::&lt;Vec&lt;_&gt;&gt;();
 
-    let mut converted_type_vars = match old_style_type_vars {
+    let mut converted_type_vars = match dbg!(old_style_type_vars) {
         Expr::Tuple(ExprTuple { elts, .. }) =&gt; {
             generic_arguments_to_type_vars(elts.iter(), type_params, checker)?
         }
@@ -173,20 +173,13 @@ fn generic_arguments_to_type_vars&lt;&#x27;a&gt;(
     existing_type_params: &amp;TypeParams,
     checker: &amp;&#x27;a Checker,
 ) -&gt; Option&lt;Vec&lt;TypeVar&lt;&#x27;a&gt;&gt;&gt; {
-    let is_existing_param_of_same_class = |binding: &amp;Binding| {
-        // This first check should have been unnecessary,
-        // as a type parameter list can only contain type-parameter bindings.
-        // Named expressions, for example, are syntax errors.
-        // However, Ruff doesn&#x27;t know that yet (#11118),
-        // so here it shall remain.
-        matches!(binding.kind, BindingKind::TypeParam)
-            &amp;&amp; existing_type_params.range.contains_range(binding.range)
-    };
-
     let semantic = checker.semantic();
 
     let mut type_vars = vec![];
-    let mut encountered: Vec&lt;&amp;str&gt; = vec![];
+    let mut encountered: Vec&lt;&amp;str&gt; = existing_type_params
+        .iter()
+        .map(|tp| tp.name().as_str())
+        .collect();
 
     for expr in exprs {
         let (name, unpacked) = match expr {
@@ -204,10 +197,9 @@ fn generic_arguments_to_type_vars&lt;&#x27;a&gt;(
             _ =&gt; return None,
         };
 
-        let binding = semantic.only_binding(name).map(|id| semantic.binding(id))?;
         let name_as_str = name.id.as_str();
 
-        if is_existing_param_of_same_class(binding) || encountered.contains(&amp;name_as_str) {
+        if encountered.contains(&amp;name_as_str) {
             continue;
         }
 
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:214 on 2025-02-05 20:23</div>
            <div class="timeline-body"><p>nit: This suggestion is stacked on the last one, but if you use a <code>HashSet</code> for <code>encountered</code>, you can do this in one line:</p>
<pre><code>
diff --git a/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs b/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs
index f9c7f718e..348365543 100644
--- a/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs
+++ b/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs
@@ -6,6 +6,7 @@ use ruff_python_ast::{
     Arguments, Expr, ExprStarred, ExprSubscript, ExprTuple, StmtClassDef, TypeParams,
 };
 use ruff_python_semantic::SemanticModel;
+use rustc_hash::FxHashSet;
 
 use crate::checkers::ast::Checker;
 use crate::fix::edits::{remove_argument, Parentheses};
@@ -176,7 +177,7 @@ fn generic_arguments_to_type_vars&lt;&#x27;a&gt;(
     let semantic = checker.semantic();
 
     let mut type_vars = vec![];
-    let mut encountered: Vec&lt;&amp;str&gt; = existing_type_params
+    let mut encountered: FxHashSet&lt;&amp;str&gt; = existing_type_params
         .iter()
         .map(|tp| tp.name().as_str())
         .collect();
@@ -197,14 +198,10 @@ fn generic_arguments_to_type_vars&lt;&#x27;a&gt;(
             _ =&gt; return None,
         };
 
-        let name_as_str = name.id.as_str();
-
-        if encountered.contains(&amp;name_as_str) {
+        if !encountered.insert(name.id.as_str()) {
             continue;
         }
 
-        encountered.push(name_as_str);
-
         let type_var = expr_name_to_type_var(semantic, name)?;
 
         match (&amp;type_var.kind, unpacked, &amp;type_var.restriction) {
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:224 on 2025-02-05 20:45</div>
            <div class="timeline-body"><p>I found this part pretty confusing because it&#x27;s not really related to the rule at hand. If I understand it now, you&#x27;re checking for invalid combinations of <code>TypeVar::kind</code>, unpacking, and <code>TypeVar::restriction</code>? I guess that&#x27;s somewhat obvious from the arguments to <code>match</code>, but it wasn&#x27;t clear to me what it was doing here. Just a short comment like</p>
<pre><code>// check for invalid combinations of type variable kinds, unpacking, and bounds/constraints
</code></pre>
<p>would probably be plenty, optionally with some examples of invalid cases.</p>
<p>Ideally I think this logic would be in <code>expr_name_to_type_var</code>, but that probably needs more work than belongs in this PR because <code>expr_name_to_type_var</code> will also need the <code>unpacked</code> value. That might have the additional benefit of handling <code>Unpack</code> in the other rules, though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> approved on 2025-02-05 21:06</div>
            <div class="timeline-body"><p>Thanks for your work on this. I especially appreciate the thorough test fixtures. I think I&#x27;ll need to steal some of those for UP046 and UP047, if you don&#x27;t get to them first :slightly_smiling_face:</p>
<p>I&#x27;d like to see my latest comments addressed, but they&#x27;re mostly nits so I&#x27;m still happy to approve.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-02-05 23:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:235 on 2025-02-05 23:37</div>
            <div class="timeline-body"><p>Nice, this is even more clear than the comment I proposed!</p>
<p>We might want some <code>is_*</code> methods for <code>TypeParamKind</code> at some point, but you don&#x27;t need to do that here, in my opinion.</p>
<p>Similarly, I guess <code>restriction</code> should just be a field on <code>TypeParamKind::TypeVar</code> instead of on <code>TypeVar</code> itself too if the other kinds can&#x27;t have restrictions. Again, we can leave that for a future PR, though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-06 08:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/codes.rs</code>:1012 on 2025-02-06 08:05</div>
            <div class="timeline-body"><p>Any reason this rule isn&#x27;t 059 or fills any of the other &quot;holes&quot; in our numbering?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/pyupgrade/rules/pep695/mod.rs</code>:1 on 2025-02-06 14:07</div>
            <div class="timeline-body"><p>Ideally I feel like we would now move these utilities to somewhere like <code>crates/ruff_linter/src/pep695_utils.rs</code> (or somewhere in <code>crates/ruff_python_semantic</code>), if they&#x27;re now being used by non-<code>pyupgrade</code> rules. But that doesn&#x27;t need to be done in this PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:163 on 2025-02-06 14:14</div>
            <div class="timeline-body"><p><code>remove_argument</code> returns a <code>Result</code>, and if it&#x27;s an <code>Err</code> variant, that <code>Err</code> variant contains some valuable information about why the function wasn&#x27;t able to remove the argument. By using <code>.ok()?</code> here, you&#x27;re throwing away that information. It would be better to have this function return <code>Result&lt;Option&lt;Fix&gt;&gt;</code>, and then use <code>try_set_optional_fix</code> to add the fix to the diagnostic. The advantage of this is that if you run Ruff with enough <code>-v</code> flag, it prints the error message to the terminal to explain why it wasn&#x27;t able to create an autofix.</p>
<p>TL;DR: I&#x27;d do this:</p>

Patch

<pre><code>diff --git a/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs b/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs
index 6750d774d..764681ef3 100644
--- a/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs
+++ b/crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs
@@ -104,16 +104,15 @@ pub(crate) fn class_with_mixed_type_vars(checker: &amp;mut Checker, class_def: &amp;Stmt
     };
 
     let mut diagnostic = Diagnostic::new(ClassWithMixedTypeVars, generic_base.range);
-
-    if let Some(fix) = convert_type_vars(
-        generic_base,
-        old_style_type_vars,
-        type_params,
-        arguments,
-        checker,
-    ) {
-        diagnostic.set_fix(fix);
-    }
+    diagnostic.try_set_optional_fix(|| {
+        convert_type_vars(
+            generic_base,
+            old_style_type_vars,
+            type_params,
+            arguments,
+            checker,
+        )
+    });
 
     checker.diagnostics.push(diagnostic);
 }
@@ -133,7 +132,7 @@ fn convert_type_vars(
     type_params: &amp;TypeParams,
     class_arguments: &amp;Arguments,
     checker: &amp;Checker,
-) -&gt; Option&lt;Fix&gt; {
+) -&gt; anyhow::Result&lt;Option&lt;Fix&gt;&gt; {
     let mut type_vars = type_params
         .type_params
         .iter()
@@ -141,17 +140,21 @@ fn convert_type_vars(
         .collect::&lt;Vec&lt;_&gt;&gt;();
 
     let semantic = checker.semantic();
-    let mut converted_type_vars = match old_style_type_vars {
+    let converted_type_vars = match old_style_type_vars {
         Expr::Tuple(ExprTuple { elts, .. }) =&gt; {
-            generic_arguments_to_type_vars(elts.iter(), type_params, semantic)?
+            generic_arguments_to_type_vars(elts.iter(), type_params, semantic)
         }
         expr @ (Expr::Subscript(_) | Expr::Name(_)) =&gt; {
-            generic_arguments_to_type_vars(iter::once(expr), type_params, semantic)?
+            generic_arguments_to_type_vars(iter::once(expr), type_params, semantic)
         }
-        _ =&gt; return None,
+        _ =&gt; None,
+    };
+
+    let Some(converted_type_vars) = converted_type_vars else {
+        return Ok(None);
     };
 
-    type_vars.append(&amp;mut converted_type_vars);
+    type_vars.extend(converted_type_vars);
 
     let source = checker.source();
     let new_type_params = DisplayTypeVars {
@@ -160,14 +163,14 @@ fn convert_type_vars(
     };
 
     let remove_generic_base =
-        remove_argument(generic_base, class_arguments, Parentheses::Remove, source).ok()?;
+        remove_argument(generic_base, class_arguments, Parentheses::Remove, source)?;
     let replace_type_params =
         Edit::range_replacement(new_type_params.to_string(), type_params.range);
 
-    Some(Fix::unsafe_edits(
+    Ok(Some(Fix::unsafe_edits(
         remove_generic_base,
         [replace_type_params],
-    ))
+    )))
 }
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:154 on 2025-02-06 14:14</div>
            <div class="timeline-body"><p>There&#x27;s no need to declare the variable as <code>mut</code> if you use <code>extend()</code> rather than <code>append</code>:</p>
<pre><code>    let converted_type_vars = match old_style_type_vars {
        Expr::Tuple(ExprTuple { elts, .. }) =&gt; {
            generic_arguments_to_type_vars(elts.iter(), type_params, semantic)?
        }
        expr @ (Expr::Subscript(_) | Expr::Name(_)) =&gt; {
            generic_arguments_to_type_vars(iter::once(expr), type_params, semantic)?
        }
        _ =&gt; return None,
    };

    type_vars.extend(converted_type_vars);
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:181 on 2025-02-06 14:16</div>
            <div class="timeline-body"><p>Could you add some documentation to this function to explain why it sometimes returns <code>None</code>? I always do a double take when I see a function that returns <code>Option&lt;Vec&lt;_&gt;&gt;</code>, because I always wonder why it doesn&#x27;t just return an empty <code>Vec</code> instead of returning <code>None</code>. What does returning <code>None</code> signify here that wouldn&#x27;t be expressed by returning an empty <code>Vec</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:141 on 2025-02-06 14:17</div>
            <div class="timeline-body"><p>nit: It&#x27;s nice to avoid the &quot;turbofish operator&quot; where possible</p>
<pre><code>    let mut type_vars: Vec&lt;_&gt; = type_params
        .type_params
        .iter()
        .map(TypeVar::from)
        .collect();
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/ruff/snapshots/ruff_linter__rules__ruff__tests__preview__RUF060_RUF060.py.snap</code>:134 on 2025-02-06 14:19</div>
            <div class="timeline-body"><p>very nice!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-02-06 14:22</div>
            <div class="timeline-body"><p>Thank you -- this overall looks great now! And I&#x27;ll second @ntBre that your tests are excellent. I just have a few coding nits:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/codes.rs</code>:1012 on 2025-02-06 16:20</div>
            <div class="timeline-body"><p>There&#x27;s a <a href="https://github.com/astral-sh/ruff/pull/15903">draft PR</a> for 059 last time I checked but not sure about other holes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> reviewed on 2025-02-06 16:20</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> reviewed on 2025-02-06 18:15</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:141 on 2025-02-06 18:15</div>
            <div class="timeline-body"><p>Actually, I prefer turbofishes. As chaining is all about visual flow, I think it makes more sense to place it next to <code>.collect()</code> and not at the top of the chain.</p>
<p>Then again, methods like <code>.into()</code> doesn&#x27;t even allow that, as they are not generic themselves but the wrapping <code>impl</code>s are. Consistency first, I guess?</p>
<pre><code>let a: Type = b.into();    // Works
let a = b.into::&lt;Type&gt;();  // Doesn&#x27;t work, even though it looks nicer
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2025-02-06 18:22</div>
            <div class="timeline-body"><p>Nice!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2025-02-06 18:23</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/ruff/rules/class_with_mixed_type_vars.rs</code>:141 on 2025-02-06 18:23</div>
            <div class="timeline-body"><p>Well, like all stylistic things, it&#x27;s subjective, and I certainly wouldn&#x27;t have blocked the PR being merged over this :-)</p>
<p>Personally I prefer annotating the variable as it&#x27;s just slightly more concise, and to me it makes sense to put the type of the variable alongside its declaration. Again, though, it&#x27;s just my subjective opinion!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[`ruff`] Classes with mixed type variable style (`RUF060`)&quot; to &quot;[`ruff`] Classes with mixed type variable style (`RUF053`)&quot; by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-02-06 18:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-02-06 18:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-02-06 18:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-02-06 18:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:10:58 UTC
    </footer>
</body>
</html>
