<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Added ignoring deprecated rules for --select=ALL - astral-sh/ruff #10497</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Added ignoring deprecated rules for --select=ALL</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/10497">#10497</a>
        opened by <a href="https://github.com/WindowGenerator">@WindowGenerator</a>
        on 2024-03-20 21:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/WindowGenerator">@WindowGenerator</a> on 2024-03-20 21:06</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>#10342: Added ignoring deprecated rules for --select=ALL</p>
<h2>Test Plan</h2>
<p>Changed integration tests with --select=ALL option</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-03-20 21:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "#10342: Added ignoring deprecated rules for --select=ALL" to "Added ignoring deprecated rules for --select=ALL" by @WindowGenerator on 2024-03-20 21:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-03-20 21:07</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:194 on 2024-03-20 21:07</div>
            <div class="timeline-body"><p>Per the comment prefacing this function, we should not do this filtering here. Perhaps in <code>rules()</code> instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-03-20 21:25</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+1 -35120 violations, +0 -0 fixes in 3 projects; 41 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+1 -24265 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/auth/backend/kerberos_auth.py#L69'>airflow/api/auth/backend/kerberos_auth.py:69:18:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/client/api_client.py#L28'>airflow/api/client/api_client.py:28:18:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/client/api_client.py#L34'>airflow/api/client/api_client.py:34:21:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/client/api_client.py#L46'>airflow/api/client/api_client.py:46:20:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/client/api_client.py#L53'>airflow/api/client/api_client.py:53:18:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/client/api_client.py#L60'>airflow/api/client/api_client.py:60:19:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/client/api_client.py#L64'>airflow/api/client/api_client.py:64:21:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/client/api_client.py#L74'>airflow/api/client/api_client.py:74:21:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/client/api_client.py#L81'>airflow/api/client/api_client.py:81:21:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/client/json_client.py#L101'>airflow/api/client/json_client.py:101:19:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/client/json_client.py#L112'>airflow/api/client/json_client.py:112:21:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/api/client/json_client.py#L133'>airflow/api/client/json_client.py:133:21:</a> ANN101 Missing type annotation for `self` in method
... 23731 additional changes omitted for rule ANN101
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/callbacks/callback_requests.py#L57'>airflow/callbacks/callback_requests.py:57:19:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/callbacks/callback_requests.py#L95'>airflow/callbacks/callback_requests.py:95:19:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/cli/commands/standalone_command.py#L51'>airflow/cli/commands/standalone_command.py:51:20:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/dag_processing/manager.py#L497'>airflow/dag_processing/manager.py:497:9:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/dag_processing/processor.py#L421'>airflow/dag_processing/processor.py:421:21:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/dag_processing/processor.py#L796'>airflow/dag_processing/processor.py:796:21:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/exceptions.py#L245'>airflow/exceptions.py:245:15:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/executors/base_executor.py#L512'>airflow/executors/base_executor.py:512:21:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/executors/executor_loader.py#L158'>airflow/executors/executor_loader.py:158:28:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/executors/executor_loader.py#L166'>airflow/executors/executor_loader.py:166:35:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/executors/executor_loader.py#L175'>airflow/executors/executor_loader.py:175:30:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/executors/executor_loader.py#L182'>airflow/executors/executor_loader.py:182:24:</a> ANN102 Missing type annotation for `cls` in classmethod
... 511 additional changes omitted for rule ANN102
+ <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/utils/pydantic.py#L60'>airflow/utils/pydantic.py:60:13:</a> D107 Missing docstring in `__init__`
- <a href='https://github.com/apache/airflow/blob/413698ed1d4388e87e1bbded05956799edd3fc39/airflow/utils/pydantic.py#L60'>airflow/utils/pydantic.py:60:13:</a> D107 Missing docstring in `__init__`
... 24240 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+0 -4088 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/output/apis/autoload_static.py#L32'>examples/output/apis/autoload_static.py:32:20:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/output/apis/autoload_static.py#L34'>examples/output/apis/autoload_static.py:34:13:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/output/apis/autoload_static.py#L41'>examples/output/apis/autoload_static.py:41:20:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/output/apis/autoload_static.py#L43'>examples/output/apis/autoload_static.py:43:13:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/api/tornado_embed.py#L15'>examples/server/api/tornado_embed.py:15:13:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/examples/server/app/server_auth/auth.py#L27'>examples/server/app/server_auth/auth.py:27:13:</a> ANN101 Missing type annotation for `self` in method
... 4003 additional changes omitted for rule ANN101
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/client/session.py#L524'>src/bokeh/client/session.py:524:28:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/colors/color.py#L115'>src/bokeh/colors/color.py:115:18:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/colors/color.py#L132'>src/bokeh/colors/color.py:132:18:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/colors/color.py#L245'>src/bokeh/colors/color.py:245:18:</a> ANN102 Missing type annotation for `cls` in classmethod
... 4078 additional changes omitted for project
</pre>

</p>
</details>
<details><summary><a href="https://github.com/zulip/zulip">zulip/zulip</a> (+0 -6767 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
- <a href='https://github.com/zulip/zulip/blob/d1921aed2615776688728d8d7e9154f05808c65f/analytics/lib/counts.py#L105'>analytics/lib/counts.py:105:9:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/zulip/zulip/blob/d1921aed2615776688728d8d7e9154f05808c65f/analytics/lib/counts.py#L112'>analytics/lib/counts.py:112:26:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/zulip/zulip/blob/d1921aed2615776688728d8d7e9154f05808c65f/analytics/lib/counts.py#L49'>analytics/lib/counts.py:49:24:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/zulip/zulip/blob/d1921aed2615776688728d8d7e9154f05808c65f/analytics/lib/counts.py#L55'>analytics/lib/counts.py:55:9:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/zulip/zulip/blob/d1921aed2615776688728d8d7e9154f05808c65f/analytics/lib/counts.py#L73'>analytics/lib/counts.py:73:18:</a> ANN101 Missing type annotation for `self` in method
- <a href='https://github.com/zulip/zulip/blob/d1921aed2615776688728d8d7e9154f05808c65f/analytics/lib/counts.py#L76'>analytics/lib/counts.py:76:30:</a> ANN101 Missing type annotation for `self` in method
... 6712 additional changes omitted for rule ANN101
- <a href='https://github.com/zulip/zulip/blob/d1921aed2615776688728d8d7e9154f05808c65f/corporate/models.py#L187'>corporate/models.py:187:45:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/zulip/zulip/blob/d1921aed2615776688728d8d7e9154f05808c65f/zerver/lib/narrow.py#L90'>zerver/lib/narrow.py:90:22:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/zulip/zulip/blob/d1921aed2615776688728d8d7e9154f05808c65f/zerver/lib/notes.py#L40'>zerver/lib/notes.py:40:19:</a> ANN102 Missing type annotation for `cls` in classmethod
- <a href='https://github.com/zulip/zulip/blob/d1921aed2615776688728d8d7e9154f05808c65f/zerver/lib/notes.py#L48'>zerver/lib/notes.py:48:19:</a> ANN102 Missing type annotation for `cls` in classmethod
... 6757 additional changes omitted for project
</pre>

</p>
</details>
<details><summary>Changes by rule (3 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| ANN101 | 34467 | 0 | 34467 | 0 | 0 |
| ANN102 | 652 | 0 | 652 | 0 | 0 |
| D107 | 2 | 1 | 1 | 0 | 0 |</p>
</p>
</details>

<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-20 21:29</div>
            <div class="timeline-body"><p>Is this a breaking change because we remove rules from a selector?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-20 21:45</div>
            <div class="timeline-body"><p>@MichaReiser that's a good call... maybe. It'd be easy to hold off merging until v0.4.0 which seems reasonable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-20 21:53</div>
            <div class="timeline-body"><p>It might be fine, at least from our versioning policy.</p>
<p>The change is reasonable to me but it might be worth documenting that all selects all not deprecated rules to make it clear to users that they might &quot;loose&quot; rules even when upgrading to a new patch version</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.4.0" by @zanieb on 2024-04-12 20:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:194 on 2024-04-12 20:26</div>
            <div class="timeline-body"><p>Hey @WindowGenerator just want to check in again as we get closer to 0.4.0, did you want to work on this still?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-04-12 20:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/WindowGenerator">@WindowGenerator</a> reviewed on 2024-04-12 21:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/WindowGenerator">@WindowGenerator</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:194 on 2024-04-12 21:12</div>
            <div class="timeline-body"><p>Hi @zanieb!
Yes, I will do it before the end of the weekend.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-04-12 21:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:194 on 2024-04-12 21:48</div>
            <div class="timeline-body"><p>Not a rush! Thanks for the reply.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/WindowGenerator">@WindowGenerator</a> reviewed on 2024-04-14 15:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/WindowGenerator">@WindowGenerator</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:194 on 2024-04-14 15:32</div>
            <div class="timeline-body"><p>@zanieb Hi!
Code was changed, you can check it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "v0.4.0" by @dhruvmanila on 2024-04-18 19:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.5.0" by @dhruvmanila on 2024-04-18 19:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Alexdelia">@Alexdelia</a> on 2024-04-24 09:22</div>
            <div class="timeline-body"><p>hi, this changed was planned for version <code>v0.4.0</code>, but moved to <code>v0.5.0</code></p>
<p>what is the reason behind this choice?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-24 12:46</div>
            <div class="timeline-body"><p>Hey @Alexdelia, we ended up releasing the parser in 0.4.0 and focused on delivery of that. We routinely move things to later milestones when they aren't high priority for the given release.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/zanieb">@zanieb</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:214 on 2024-04-24 12:49</div>
            <div class="timeline-body"><p>Can you combine this comment with the one above? e.g.</p>
<blockquote>
<p>Deprecated rules are excluded from ALL in stable require exact selection in preview</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> reviewed on 2024-04-24 12:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">breaking</span> added by @zanieb on 2024-05-01 15:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/WindowGenerator">@WindowGenerator</a> reviewed on 2024-05-03 06:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/WindowGenerator">@WindowGenerator</a> on <code>crates/ruff_linter/src/rule_selector.rs</code>:214 on 2024-05-03 06:26</div>
            <div class="timeline-body"><p>Did it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-06-25 09:08</div>
            <div class="timeline-body"><p>I tested that running ruff without preview no longer raises <code>MissingTypeSelf</code> when using <code>--select ALL</code>.  <code>ANN</code> keeps being raised when using <code>--select ANN</code>.</p>
<p>To me this raises the question if deprecated rules should be removed from all non-exact selectors. It now feels kind of inconsistent that using <code>ALL</code> deselect deprecated rules but <code>ANN</code> doesn't</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @MichaReiser by @MichaReiser on 2024-06-25 09:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @zanieb by @MichaReiser on 2024-06-25 09:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-06-25 10:38</div>
            <div class="timeline-body"><p>I'll go ahead with merging this. It's heading in the right direction but we might need to figure out how we want to handle deprecation in combination with other group selectors.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @MichaReiser on 2024-06-25 10:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2024-06-25 10:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-06-25 10:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 21:56:31 UTC
    </footer>
</body>
</html>
