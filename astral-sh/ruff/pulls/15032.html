<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pylint`] Detect nested methods correctly (`PLW1641`) - astral-sh/ruff #15032</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pylint</code>] Detect nested methods correctly (<code>PLW1641</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/15032">#15032</a>
        opened by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a>
        on 2024-12-17 09:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2024-12-17 09:13</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Resolves #14882.</p>
<h2>Test Plan</h2>
<p><code>cargo nextest run</code> and <code>cargo insta test</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-12-17 09:21</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+3 -0 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<details><summary><a href="https://github.com/astropy/astropy">astropy/astropy</a> (+3 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/astropy/astropy/blob/d6c92e0d76c393e38d9b5863a628dbaaf931ed5a/astropy/modeling/parameters.py#L113'>astropy/modeling/parameters.py:113:7:</a> PLW1641 Object does not implement `__hash__` method
+ <a href='https://github.com/astropy/astropy/blob/d6c92e0d76c393e38d9b5863a628dbaaf931ed5a/astropy/table/bst.py#L90'>astropy/table/bst.py:90:7:</a> PLW1641 Object does not implement `__hash__` method
+ <a href='https://github.com/astropy/astropy/blob/d6c92e0d76c393e38d9b5863a628dbaaf931ed5a/astropy/table/column.py#L1164'>astropy/table/column.py:1164:7:</a> PLW1641 Object does not implement `__hash__` method
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PLW1641 | 3 | 3 | 0 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-18 07:57</div>
            <div class="timeline-body"><p>I'm a bit concerned about special casing this behavior only for <code>PLW1641</code>. Other rules that need to inspect a class's methods, like https://github.com/astral-sh/ruff/pull/14688, will now have inconsistent behavior.</p>
<p>I wonder if we could make this more reusable so that all class method rules could profit from it. Although I'm not quiet sure how to do that.</p>
<p>For example, we could create a <code>any_method</code> function in <code>semantic/analyze/class</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-12-30 15:51</div>
            <div class="timeline-body"><p>I refactored your code and introduced a reusable <code>any_member_declaration</code> as discussed in the PR before. The reason why I prefer having this helper is that it now can be used for other rules as well. For example, too many public methods could make use of it, resulting in more consistent behavior across our rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-12-30 15:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @MichaReiser on 2024-12-30 15:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2024-12-30 15:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-12-30 15:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-30 15:55</div>
            <div class="timeline-body"><p>Thank you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-12-31 14:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 20:42:57 UTC
    </footer>
</body>
</html>
