```yaml
number: 4245
title: Remove functor from autofix title
type: pull_request
state: merged
author: MichaReiser
labels: []
assignees: []
merged: true
base: main
head: remove-functor-from-autofix-title
created_at: 2023-05-05T12:46:09Z
updated_at: 2023-05-10T07:45:07Z
url: https://github.com/astral-sh/ruff/pull/4245
synced_at: 2026-01-12T03:56:39Z
```

# Remove functor from autofix title

---

_Pull request opened by @MichaReiser on 2023-05-05 12:46_

This PR renames the `autofix_title_functor` method to `autofix_title` and returns an `Option<String>` instead of a function. 

The current implementation returned a functor because returning `Some` signaled whether the rule is autofixable, and the functor could then be used to generate the title. This is no longer necessary because we now use the presence of a `Fix` to determine whether a diagnostic is fixable or not. 

This has the advantage that we can now also show this message as a suggestion for `Diagnostics` that are not autofixable. 

My long-term goal is to have two different messages:

* `Fix::message`: Title of the fix, what `autofix_title` is used for today. Moving it to the fix has the advantage that:
  * The compiler enforces the presence of a message when creating a fix
  * Different fixes can have different titles
* `Violation::advice`: Text shown to provide additional context/information specific to this violation. Ideally, it would be flexible enough to render rich context like code rames so that we, e.g. print the source of the first import for duplicated imports. 


---

_Comment by @MichaReiser on 2023-05-05 12:46_

Current dependencies on/for this PR:
* main
  * **PR #4239** <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4239" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite" width="10px" height="10px"/></a> 
    * **PR #4245** <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4245" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite" width="10px" height="10px"/></a>  ðŸ‘ˆ
    * **PR #4191** <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4191" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite" width="10px" height="10px"/></a> 
      * **PR #4192** <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4192" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite" width="10px" height="10px"/></a> 
        * **PR #4193** <a href="https://app.graphite.dev/github/pr/charliermarsh/ruff/4193" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite" width="10px" height="10px"/></a> 

This comment was auto-generated by [Graphite](https://app.graphite.dev/github/pr/charliermarsh/ruff/4245?utm_source=stack-comment).

---

_Marked ready for review by @MichaReiser on 2023-05-05 12:57_

---

_Comment by @github-actions[bot] on 2023-05-05 13:11_

## PR Check Results
### Ecosystem
âœ… ecosystem check detected no changes.

### Benchmark
#### Linux
```
group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.00     14.7Â±0.03ms     2.8 MB/sec    1.00     14.7Â±0.03ms     2.8 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      3.6Â±0.00ms     4.7 MB/sec    1.00      3.6Â±0.01ms     4.7 MB/sec
linter/all-rules/numpy/globals.py          1.00    366.3Â±0.75Âµs     8.1 MB/sec    1.00    367.4Â±1.63Âµs     8.0 MB/sec
linter/all-rules/pydantic/types.py         1.00      6.2Â±0.03ms     4.1 MB/sec    1.00      6.2Â±0.03ms     4.1 MB/sec
linter/default-rules/large/dataset.py      1.00      7.4Â±0.01ms     5.5 MB/sec    1.00      7.4Â±0.01ms     5.5 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00   1540.2Â±1.58Âµs    10.8 MB/sec    1.00   1543.1Â±4.87Âµs    10.8 MB/sec
linter/default-rules/numpy/globals.py      1.00    166.1Â±0.26Âµs    17.8 MB/sec    1.00    166.7Â±0.82Âµs    17.7 MB/sec
linter/default-rules/pydantic/types.py     1.00      3.3Â±0.00ms     7.7 MB/sec    1.00      3.3Â±0.01ms     7.7 MB/sec
parser/large/dataset.py                    1.00      5.9Â±0.00ms     6.9 MB/sec    1.01      5.9Â±0.01ms     6.9 MB/sec
parser/numpy/ctypeslib.py                  1.00   1149.1Â±2.84Âµs    14.5 MB/sec    1.00   1149.5Â±0.79Âµs    14.5 MB/sec
parser/numpy/globals.py                    1.01    117.2Â±0.42Âµs    25.2 MB/sec    1.00    116.4Â±0.44Âµs    25.3 MB/sec
parser/pydantic/types.py                   1.00      2.5Â±0.00ms    10.2 MB/sec    1.00      2.5Â±0.00ms    10.2 MB/sec
```

#### Windows
```
group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.01     21.6Â±0.83ms  1930.7 KB/sec    1.00     21.4Â±0.70ms  1949.9 KB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      5.4Â±0.23ms     3.1 MB/sec    1.01      5.5Â±0.26ms     3.1 MB/sec
linter/all-rules/numpy/globals.py          1.00   640.6Â±32.92Âµs     4.6 MB/sec    1.01   645.1Â±31.96Âµs     4.6 MB/sec
linter/all-rules/pydantic/types.py         1.00      9.2Â±0.50ms     2.8 MB/sec    1.01      9.3Â±0.37ms     2.8 MB/sec
linter/default-rules/large/dataset.py      1.00     10.9Â±0.35ms     3.7 MB/sec    1.02     11.0Â±0.38ms     3.7 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00      2.3Â±0.11ms     7.2 MB/sec    1.01      2.3Â±0.10ms     7.2 MB/sec
linter/default-rules/numpy/globals.py      1.02   281.7Â±17.92Âµs    10.5 MB/sec    1.00   275.6Â±16.23Âµs    10.7 MB/sec
linter/default-rules/pydantic/types.py     1.00      4.9Â±0.21ms     5.2 MB/sec    1.01      5.0Â±0.26ms     5.1 MB/sec
parser/large/dataset.py                    1.04      9.4Â±0.42ms     4.4 MB/sec    1.00      9.0Â±0.28ms     4.5 MB/sec
parser/numpy/ctypeslib.py                  1.06  1831.1Â±76.14Âµs     9.1 MB/sec    1.00  1733.3Â±81.00Âµs     9.6 MB/sec
parser/numpy/globals.py                    1.00    176.1Â±9.46Âµs    16.8 MB/sec    1.00   176.3Â±11.04Âµs    16.7 MB/sec
parser/pydantic/types.py                   1.04      3.9Â±0.16ms     6.5 MB/sec    1.00      3.8Â±0.14ms     6.7 MB/sec
```
<!-- thollander/actions-comment-pull-request "PR Check Results" -->

---

_Review requested from @charliermarsh by @MichaReiser on 2023-05-09 06:08_

---

_@charliermarsh approved on 2023-05-09 15:46_

---

_Merged by @MichaReiser on 2023-05-10 07:21_

---

_Closed by @MichaReiser on 2023-05-10 07:21_

---

_Branch deleted on 2023-05-10 07:21_

---
