<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement `flake8-pytest-style` - astral-sh/ruff #1506</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Implement <code>flake8-pytest-style</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1506">#1506</a>
        opened by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a>
        on 2022-12-31 09:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/edgarrmondragon">@edgarrmondragon</a></div>
            <div class="timeline-body">Notes for reviewers
<ul>
<li>Won&#x27;t implement <code>PT014</code> for now. It requires checking for <em>equivalent</em> nodes, which is a bit more complicated. See https://github.com/afonasev/flake8-plugin-utils/blob/e333e10a72f1c8225357e0d475db20ccbb12a09a/flake8_plugin_utils/utils/equiv_nodes.py for the implementation used in the flake8 plugin.</li>
<li>Tests are copied and adapted from https://github.com/m-burst/flake8-pytest-style/tree/v1.6.0/tests</li>
<li>Setting names were shortened by removing the <code>pytest-</code> prefix, since they&#x27;ll be nested under the corresponding plugin in Ruff&#x27;s configuration.</li>
<li><code>pytest-fixture-no-parentheses</code> and <code>pytest-mark-no-parentheses</code> were changed to <code>fixture-parentheses</code> and <code>mark-parentheses</code>, respectively. This is consistent with how those settings are managed internally in the flake8 plugin, are a bit easier to reason about and they&#x27;re not meant to be used as CLI flags, so it&#x27;s OK to default to true values.</li>
</ul>
Rules
<ul>
<li>[x] PT001</li>
<li>[x] PT002</li>
<li>[x] PT003</li>
<li>[x] PT004</li>
<li>[x] PT005</li>
<li>[x] PT006</li>
<li>[x] PT007</li>
<li>[x] PT008</li>
<li>[x] PT009</li>
<li>[x] PT010</li>
<li>[x] PT011</li>
<li>[x] PT012</li>
<li>[x] PT013</li>
<li>[ ] PT014</li>
<li>[x] PT015</li>
<li>[x] PT016</li>
<li>[x] PT017</li>
<li>[x] PT018</li>
<li>[x] PT019</li>
<li>[x] PT020</li>
<li>[x] PT021</li>
<li>[x] PT022</li>
<li>[x] PT023</li>
<li>[x] PT024</li>
<li>[x] PT025</li>
<li>[x] PT026</li>
</ul>
<p>Closes #921</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-01 02:21</div>
            <div class="timeline-body"><p>@edgarrmondragon - Probably won&#x27;t get to it tonight but mark as ready for review whenever and I&#x27;ll take a look :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2023-01-02 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2023-01-02 02:35</div>
            <div class="timeline-body"><p>@charliermarsh this is ready for review :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-02 19:12</div>
            <div class="timeline-body"><p>Dang, this is seriously impressive and thorough work. I need to skim the actual check implementations but the general structure etc. looks great. I&#x27;ll merge this today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-02 21:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-02 21:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-01-03 01:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-01-20 01:22</div>
            <div class="timeline-body"><p>Not sure if this is inherited from the flake8 plugin, but this is a false positive for PT007:</p>
<pre><code>@pytest.mark.parametrize(&quot;archs&quot;, [[&quot;x86_64&quot;], [&quot;arm64&quot;, &quot;universal2&quot;]])
</code></pre>
<p>If the item on the left is a string with no commas, then the thing on the right doesn&#x27;t have to be a list of tuples, it can be a list of anything, including lists.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-20 01:52</div>
            <div class="timeline-body"><p>Lemme take a look...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-20 02:01</div>
            <div class="timeline-body"><p>Admittedly I&#x27;ve almost never used Pytest but based on comparing the Flake8 plugin to our results, I think you&#x27;re right :) Will fix tonight.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:51:41 UTC
    </footer>
</body>
</html>
