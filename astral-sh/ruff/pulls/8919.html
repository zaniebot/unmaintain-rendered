<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use Python version to determine typing rewrite safety - astral-sh/ruff #8919</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use Python version to determine typing rewrite safety</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/8919">#8919</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-11-30 01:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body">Summary
<p>These rewrites are only (potentially) unsafe on Python versions that predate their introduction into the standard library and grammar, so it seems correct to mark them as safe on those later versions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-30 01:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-30 01:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-11-30 02:04</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+0 -0 violations, +2694 -0 fixes in 41 projects)</p>
<a href="https://github.com/demisto/content">demisto/content</a> (+0 -0 violations, +2692 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --preview</pre>
</p>
<p>

<pre>
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AMP/Integrations/AMPv2/AMPv2.py#L3240">Packs/AMP/Integrations/AMPv2/AMPv2.py:3240:11:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AMP/Integrations/AMPv2/AMPv2.py#L3240">Packs/AMP/Integrations/AMPv2/AMPv2.py:3240:11:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AMP/Integrations/AMPv2/AMPv2.py#L3241">Packs/AMP/Integrations/AMPv2/AMPv2.py:3241:16:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AMP/Integrations/AMPv2/AMPv2.py#L3241">Packs/AMP/Integrations/AMPv2/AMPv2.py:3241:16:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AMP/Integrations/AMPv2/AMPv2.py#L3242">Packs/AMP/Integrations/AMPv2/AMPv2.py:3242:12:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AMP/Integrations/AMPv2/AMPv2.py#L3242">Packs/AMP/Integrations/AMPv2/AMPv2.py:3242:12:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/ANYRUN/Integrations/ANYRUN/ANYRUN.py#L756">Packs/ANYRUN/Integrations/ANYRUN/ANYRUN.py:756:24:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/ANYRUN/Integrations/ANYRUN/ANYRUN.py#L756">Packs/ANYRUN/Integrations/ANYRUN/ANYRUN.py:756:24:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AWS-GuardDuty/Integrations/AWSGuardDutyEventCollector/AWSGuardDutyEventCollector_test.py#L34">Packs/AWS-GuardDuty/Integrations/AWSGuardDutyEventCollector/AWSGuardDutyEventCollector_test.py:34:105:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AWS-GuardDuty/Integrations/AWSGuardDutyEventCollector/AWSGuardDutyEventCollector_test.py#L34">Packs/AWS-GuardDuty/Integrations/AWSGuardDutyEventCollector/AWSGuardDutyEventCollector_test.py:34:105:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AWS-GuardDuty/Integrations/AWSGuardDutyEventCollector/AWSGuardDutyEventCollector_test.py#L35">Packs/AWS-GuardDuty/Integrations/AWSGuardDutyEventCollector/AWSGuardDutyEventCollector_test.py:35:48:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AWS-GuardDuty/Integrations/AWSGuardDutyEventCollector/AWSGuardDutyEventCollector_test.py#L35">Packs/AWS-GuardDuty/Integrations/AWSGuardDutyEventCollector/AWSGuardDutyEventCollector_test.py:35:48:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AccentureCTI_Feed/Integrations/ACTIIndicatorFeed/ACTIIndicatorFeed.py#L122">Packs/AccentureCTI_Feed/Integrations/ACTIIndicatorFeed/ACTIIndicatorFeed.py:122:60:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AccentureCTI_Feed/Integrations/ACTIIndicatorFeed/ACTIIndicatorFeed.py#L122">Packs/AccentureCTI_Feed/Integrations/ACTIIndicatorFeed/ACTIIndicatorFeed.py:122:60:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AccentureCTI_Feed/Integrations/ACTIIndicatorFeed/ACTIIndicatorFeed.py#L134">Packs/AccentureCTI_Feed/Integrations/ACTIIndicatorFeed/ACTIIndicatorFeed.py:134:33:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AccentureCTI_Feed/Integrations/ACTIIndicatorFeed/ACTIIndicatorFeed.py#L134">Packs/AccentureCTI_Feed/Integrations/ACTIIndicatorFeed/ACTIIndicatorFeed.py:134:33:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AgariPhishingDefense/Integrations/AgariPhishingDefense/AgariPhishingDefense.py#L586">Packs/AgariPhishingDefense/Integrations/AgariPhishingDefense/AgariPhishingDefense.py:586:6:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AgariPhishingDefense/Integrations/AgariPhishingDefense/AgariPhishingDefense.py#L586">Packs/AgariPhishingDefense/Integrations/AgariPhishingDefense/AgariPhishingDefense.py:586:6:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AgariPhishingDefense/Integrations/AgariPhishingDefense/AgariPhishingDefense.py#L622">Packs/AgariPhishingDefense/Integrations/AgariPhishingDefense/AgariPhishingDefense.py:622:6:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/AgariPhishingDefense/Integrations/AgariPhishingDefense/AgariPhishingDefense.py#L622">Packs/AgariPhishingDefense/Integrations/AgariPhishingDefense/AgariPhishingDefense.py:622:6:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/Akamai_SIEM/Integrations/Akamai_SIEM/Akamai_SIEM.py#L111">Packs/Akamai_SIEM/Integrations/Akamai_SIEM/Akamai_SIEM.py:111:21:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/Akamai_SIEM/Integrations/Akamai_SIEM/Akamai_SIEM.py#L111">Packs/Akamai_SIEM/Integrations/Akamai_SIEM/Akamai_SIEM.py:111:21:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/Akamai_SIEM/Integrations/Akamai_SIEM/Akamai_SIEM.py#L121">Packs/Akamai_SIEM/Integrations/Akamai_SIEM/Akamai_SIEM.py:121:42:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/Akamai_SIEM/Integrations/Akamai_SIEM/Akamai_SIEM.py#L121">Packs/Akamai_SIEM/Integrations/Akamai_SIEM/Akamai_SIEM.py:121:42:</a> UP007 [*] Use `X | Y` for type annotations
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/Akamai_SIEM/Integrations/Akamai_SIEM/Akamai_SIEM.py#L256">Packs/Akamai_SIEM/Integrations/Akamai_SIEM/Akamai_SIEM.py:256:22:</a> UP007 Use `X | Y` for type annotations
... 2666 additional changes omitted for rule UP007
- <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/GoogleDocs/Integrations/GoogleDocs/GoogleDocs.py#L315">Packs/GoogleDocs/Integrations/GoogleDocs/GoogleDocs.py:315:20:</a> UP006 Use `collections.defaultdict` instead of `typing.DefaultDict` for type annotation
+ <a href="https://github.com/demisto/content/blob/a523dba37ff5d2db3ad444c8bdbd5be06e6fbffc/Packs/GoogleDocs/Integrations/GoogleDocs/GoogleDocs.py#L315">Packs/GoogleDocs/Integrations/GoogleDocs/GoogleDocs.py:315:20:</a> UP006 [*] Use `collections.defaultdict` instead of `typing.DefaultDict` for type annotation
... 2665 additional changes omitted for project
</pre>

</p>

<a href="https://github.com/rotki/rotki">rotki/rotki</a> (+0 -0 violations, +2 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --preview</pre>
</p>
<p>

<pre>
- <a href="https://github.com/rotki/rotki/blob/119397e52cc4ea5210fd50093c7e5098fdff16f9/packaging/docker/entrypoint.py#L54">packaging/docker/entrypoint.py:54:32:</a> UP007 Use `X | Y` for type annotations
+ <a href="https://github.com/rotki/rotki/blob/119397e52cc4ea5210fd50093c7e5098fdff16f9/packaging/docker/entrypoint.py#L54">packaging/docker/entrypoint.py:54:32:</a> UP007 [*] Use `X | Y` for type annotations
</pre>

</p>

Changes by rule (2 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| UP007 | 2692 | 0 | 0 | 2692 | 0 |
| UP006 | 2 | 0 | 0 | 2 | 0 |</p>
</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a> approved on 2023-11-30 02:35</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-30 03:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-30 03:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-11-30 03:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:59:41 UTC
    </footer>
</body>
</html>
