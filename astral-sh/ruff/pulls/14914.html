<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support `lint:&lt;rule&gt;` in mdtests - astral-sh/ruff #14914</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support <code>lint:&lt;rule&gt;</code> in mdtests</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/14914">#14914</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2024-12-11 13:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-11 13:16</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Fixes a small scoping issue in <code>DiagnosticId::matches</code></p>
<p>Note: I don't think we should use <code>lint:id</code> in mdtests just yet. I worry that it could lead to many unnecessary churns if we decide <strong>not</strong> to use <code>lint:&lt;id&gt;</code> as the format (e.g., <code>lint/id</code>).</p>
<p>The reason why users even see <code>lint:&lt;rule&gt;</code> is because the mdtest framework uses the diagnostic infrastructure</p>
<p>Closes #14910</p>
<h2>Test Plan</h2>
<p>Added tests</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @MichaReiser on 2024-12-11 13:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @MichaReiser on 2024-12-11 13:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @MichaReiser on 2024-12-11 13:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @MichaReiser on 2024-12-11 13:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-12-11 13:24</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-12-11 13:25</div>
            <div class="timeline-body"><blockquote>
<p>Note: I don't think we should use <code>lint:id</code> in doctests just yet.</p>
</blockquote>
<p>Do you mean mdtests? If so, I think I'd prefer to fix this at the other end, and make it so that when the test fails, mdtest just prints the message that we want to be added to the Markdown file. That way I can just copy and paste the message straight from my terminal into the Markdown file, rather than having to fiddle about and remove the <code>lint:</code> prefix from the error code. It's much more ergonomic</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-11 13:37</div>
            <div class="timeline-body"><p>I planned to push it to this PR but didn't realize I was on main.. and branch protection was off, oops. I re-enabled branch protection.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2024-12-11 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-12-11 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-12-11 13:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 20:42:56 UTC
    </footer>
</body>
</html>
