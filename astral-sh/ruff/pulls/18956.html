<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Format conflicting types as an enumeration - astral-sh/ruff #18956</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Format conflicting types as an enumeration</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/18956">#18956</a>
        opened by <a href="https://github.com/sharkdp">@sharkdp</a>
        on 2025-06-26 12:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Format conflicting declared types as</p>
<pre><code>`str`, `int` and `bytes`
</code></pre>
<p>Thanks to @AlexWaygood for the initial draft.</p>
<p>@dcreager, looking forward to your one-character follow-up PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @sharkdp on 2025-06-26 12:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @sharkdp on 2025-06-26 12:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dcreager by @sharkdp on 2025-06-26 12:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @sharkdp on 2025-06-26 12:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by @sharkdp on 2025-06-26 12:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by @sharkdp on 2025-06-26 12:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ty_python_semantic/src/types/diagnostic.rs</code>:2019 on 2025-06-26 12:09</div>
            <div class="timeline-body"><p>Possibly https://github.com/astral-sh/ruff/blob/main/crates/ty_python_semantic/src/util/diagnostics.rs might be a better home for this helper, since it doesn't have much to do with <em>types</em> specifically?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2025-06-26 12:10</div>
            <div class="timeline-body"><p>Nice! There might be some pre-existing diagnostics that could also make use of this</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-06-26 12:10</div>
            <div class="timeline-body"><!-- generated-comment mypy_primer -->

<h2><code>mypy_primer</code> results</h2>
<details>
<summary>Changes were detected when running on open source projects</summary>

<pre><code class="language-diff">pydantic (https://github.com/pydantic/pydantic)
- error[conflicting-declarations] pydantic/v1/schema.py:1143:17: Conflicting declared types for `constraint_func`: ((...) -&gt; type) | None, def constraint_func(**kw: Any) -&gt; type[Any], def constraint_func(**kw: Any) -&gt; type[Any], def constraint_func(**kw: Any) -&gt; type[Any]
+ error[conflicting-declarations] pydantic/v1/schema.py:1143:17: Conflicting declared types for `constraint_func`: `((...) -&gt; type) | None`, `def constraint_func(**kw: Any) -&gt; type[Any]`, `def constraint_func(**kw: Any) -&gt; type[Any]` and `def constraint_func(**kw: Any) -&gt; type[Any]`

cloud-init (https://github.com/canonical/cloud-init)
- error[conflicting-declarations] cloudinit/handlers/jinja_template.py:28:5: Conflicting declared types for `JUndefinedError`: type[Exception], &lt;class 'UndefinedError'&gt;
+ error[conflicting-declarations] cloudinit/handlers/jinja_template.py:28:5: Conflicting declared types for `JUndefinedError`: `type[Exception]` and `&lt;class 'UndefinedError'&gt;`

typeshed-stats (https://github.com/AlexWaygood/typeshed-stats)
- error[conflicting-declarations] src/typeshed_stats/_cli.py:83:17: Conflicting declared types for `pprint`: (object, /) -&gt; None, Unknown
+ error[conflicting-declarations] src/typeshed_stats/_cli.py:83:17: Conflicting declared types for `pprint`: `(object, /) -&gt; None` and `Unknown`

vision (https://github.com/pytorch/vision)
- error[conflicting-declarations] torchvision/datasets/folder.py:80:5: Conflicting declared types for `is_valid_file`: ((str, /) -&gt; bool) | None, def is_valid_file(x: str) -&gt; bool
+ error[conflicting-declarations] torchvision/datasets/folder.py:80:5: Conflicting declared types for `is_valid_file`: `((str, /) -&gt; bool) | None` and `def is_valid_file(x: str) -&gt; bool`

dd-trace-py (https://github.com/DataDog/dd-trace-py)
- error[conflicting-declarations] benchmarks/appsec_iast_aspects/scenario.py:25:13: Conflicting declared types for `set_iast_request_enabled`: def set_iast_request_enabled(request_enabled) -&gt; None, Unknown
+ error[conflicting-declarations] benchmarks/appsec_iast_aspects/scenario.py:25:13: Conflicting declared types for `set_iast_request_enabled`: `def set_iast_request_enabled(request_enabled) -&gt; None` and `Unknown`
- error[conflicting-declarations] benchmarks/appsec_iast_aspects_ospath/scenario.py:23:13: Conflicting declared types for `set_iast_request_enabled`: def set_iast_request_enabled(request_enabled) -&gt; None, Unknown
+ error[conflicting-declarations] benchmarks/appsec_iast_aspects_ospath/scenario.py:23:13: Conflicting declared types for `set_iast_request_enabled`: `def set_iast_request_enabled(request_enabled) -&gt; None` and `Unknown`
- error[conflicting-declarations] benchmarks/appsec_iast_aspects_re_module/scenario.py:23:13: Conflicting declared types for `set_iast_request_enabled`: def set_iast_request_enabled(request_enabled) -&gt; None, Unknown
+ error[conflicting-declarations] benchmarks/appsec_iast_aspects_re_module/scenario.py:23:13: Conflicting declared types for `set_iast_request_enabled`: `def set_iast_request_enabled(request_enabled) -&gt; None` and `Unknown`
- error[conflicting-declarations] benchmarks/appsec_iast_aspects_split/scenario.py:23:13: Conflicting declared types for `set_iast_request_enabled`: def set_iast_request_enabled(request_enabled) -&gt; None, Unknown
+ error[conflicting-declarations] benchmarks/appsec_iast_aspects_split/scenario.py:23:13: Conflicting declared types for `set_iast_request_enabled`: `def set_iast_request_enabled(request_enabled) -&gt; None` and `Unknown`
- error[conflicting-declarations] benchmarks/appsec_iast_propagation/scenario.py:20:9: Conflicting declared types for `set_iast_request_enabled`: def set_iast_request_enabled(request_enabled) -&gt; None, Unknown
+ error[conflicting-declarations] benchmarks/appsec_iast_propagation/scenario.py:20:9: Conflicting declared types for `set_iast_request_enabled`: `def set_iast_request_enabled(request_enabled) -&gt; None` and `Unknown`

</code></pre>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @sharkdp on 2025-06-26 12:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-06-26 12:24</div>
            <div class="timeline-body"><blockquote>
<p>Nice! There might be some pre-existing diagnostics that could also make use of this</p>
</blockquote>
<p>Nothing immediately came up while doing a superficial scan.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @sharkdp on 2025-06-26 12:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sharkdp on 2025-06-26 12:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-06-26 12:29</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:13:43 UTC
    </footer>
</body>
</html>
