<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pyupgrade`] Add fix safety section to docs (`UP029`) - astral-sh/ruff #17490</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pyupgrade</code>] Add fix safety section to docs (<code>UP029</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/17490">#17490</a>
        opened by <a href="https://github.com/Kalmaegi">@Kalmaegi</a>
        on 2025-04-20 08:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Kalmaegi">@Kalmaegi</a></div>
            <div class="timeline-body">Summary
<p>add <code>fix safety</code> section to <code>UP029: unnecessary_builtin_import.rs</code>, for  #15584</p>
<p>I conducted some tests and found that the only side effect should be the removal of inline comments along with the code. However, during the deletion process, comments placed above the code are preserved. I&#x27;m not sure if this behavior needs to be explicitly described.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-04-20 08:07</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>✅ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/VascoSch92">@VascoSch92</a> on 2025-04-20 12:01</div>
            <div class="timeline-body"><p>I have two example one should look into :-)</p>
<p>The first one is the case where we import a builtin with an alias, e.g., <code>from builtins import str as builtin_str</code>, is the rule removing this import or not?</p>
<p>For the second, let&#x27;s suppose that we do something like:</p>
<pre><code># Original code
def str(x):
    return f&quot;Custom: {x}&quot;

# somewhere in the code
from builtins import str
result = str(1)  # Uses Python&#x27;s builtin str
</code></pre>
<p>then the rules will correct that as</p>
<pre><code>def str(x):
    return f&quot;Custom: {x}&quot;

result = str(1)
</code></pre>
<p>which is a change of behaviour.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Kalmaegi">@Kalmaegi</a> on 2025-04-20 13:41</div>
            <div class="timeline-body"><blockquote>
<p>I have two example one should look into :-)</p>
<p>The first one is the case where we import a builtin with an alias, e.g., <code>from builtins import str as builtin_str</code>, is the rule removing this import or not?</p>
<p>For the second, let&#x27;s suppose that we do something like:</p>
<pre><code># Original code
def str(x):
    return f&quot;Custom: {x}&quot;

# somewhere in the code
from builtins import str
result = str(1)  # Uses Python&#x27;s builtin str
</code></pre>
<p>then the rules will correct that as</p>
<pre><code>def str(x):
    return f&quot;Custom: {x}&quot;

result = str(1)
</code></pre>
<p>which is a change of behaviour.</p>
</blockquote>
<p>The first point should be skipped, but the second one does affect the original behavior. Thank you very much!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[pyupgrade] Add fix safety section to docs (UP029)&quot; to &quot;[`pyupgrade`] Add fix safety section to docs (`UP029`)&quot; by <a href="https://github.com/Kalmaegi">@Kalmaegi</a> on 2025-04-20 14:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-04-21 15:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/dylwil3">@dylwil3</a> by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-04-22 19:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dylwil3">@dylwil3</a> approved on 2025-08-17 23:33</div>
            <div class="timeline-body"><p>Thanks @Kalmaegi  and @VascoSch92 !</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-08-29 13:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-08-29 13:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:13:28 UTC
    </footer>
</body>
</html>
