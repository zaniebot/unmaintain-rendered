<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Switch from mkdocs to mdbook - astral-sh/ruff #2847</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Switch from mkdocs to mdbook</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/2847">#2847</a>
        opened by <a href="https://github.com/not-my-profile">@not-my-profile</a>
        on 2023-02-13 08:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a></div>
            <div class="timeline-body"><p>In 28c9263722b77b0bd78eeebccfab98c33e92f2d2 I introduced automatic
linkification of option references in rule documentation,
which automatically converted the following:</p>
<pre><code>## Options

* `namespace-packages`</code></pre>
<p>to:</p>
<pre><code>## Options

* [`namespace-packages`]

[`namespace-packages`]: ../../settings#namespace-packages</code></pre>
<p>While the above is a correct CommonMark<a href="https://commonmark.org/">1</a> link definition,
what I was missing was that we used mkdocs for our documentation
generation, which as it turns out uses a non-CommonMark-compliant
Markdown parser, namely Python-Markdown<a href="https://github.com/Python-Markdown/markdown/">2</a>, which contrary to CommonMark
doesn&#x27;t support link definitions containing code tags.<a href="https://github.com/Python-Markdown/markdown/issues/280">3</a>
Mkdocs doesn&#x27;t support CommonMark<a href="https://github.com/mkdocs/mkdocs/issues/1835">4</a>.</p>
<p>This commit therefore switches our documentation to use mdbook<a href="https://github.com/rust-lang/mdBook">6</a>
instead, which uses the pulldown-cmark<a href="https://github.com/raphlinus/pulldown-cmark">7</a> CommonMark implementation,
sparing us from having to deal with such parser idiosyncracies.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-13 15:25</div>
            <div class="timeline-body"><p>Hmm... mdBook is a good tool, and I appreciate the work you put in here, but MkDocs is far more popular in the Python ecosystem and will be more familiar to our users. I&#x27;m partial to keeping MkDocs around, even if it requires workarounds for some of its idiosyncrasies.</p>
<blockquote>
<p>As the original implementation (markdown.pl) works this way, I see no reason to change. After all, if you need to have code inside a link, you can use a reference name in the <a href="http://johnmacfarlane.net/babelmark2/?normalize=1&amp;text=%5B%60hello%60%5D%5Bid%5D%0A%0A%5Bid%5D%3A+world%27">second set of brackets</a>. That works in all implementations.</p>
</blockquote>
<p>From the linked issue: do you understand what this is describing? The link is broken for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-02-13 16:00</div>
            <div class="timeline-body"><p>Yes I understand what&#x27;s being described. Instead of <code>[`namespace-packages`]</code> we would have to do e.g. <code>[`namespace-packages`][namespace-packages]</code> ... since that however is unnecessarily verbose (we wouldn&#x27;t want it to show up in the <code>ruff rule</code> output), we&#x27;d have to employ a regex hack to automatically perform that substitution.</p>
<p>I am personally not interested in implementing regex hacks for deviations from well-established standards. From a website user standpoint I don&#x27;t think the tool that generated the website should matter. Also note that if we want to strictly lint our Markdown that is much easier when it is CommonMark-compliant, since that is actually well defined.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-13 17:44</div>
            <div class="timeline-body"><blockquote>
<p>From a website user standpoint I don&#x27;t think the tool that generated the website should matter.</p>
</blockquote>
<p>I agree with this sentence (seems hard to disagree with!), but it&#x27;s an inaccurate description of the change. Unless I&#x27;m mistaken, we&#x27;re not just using a different tool to _generate _the website -- the entire UI of website itself is changing dramatically, since we&#x27;re moving from Material to mdBook.</p>
<p>I&#x27;d prefer not to change this right now. Maybe we&#x27;ll change our minds in the future. In the meantime, I&#x27;d rather find another solution for doc links. If you don&#x27;t want to work on that, no worries, I&#x27;ll figure something out.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-02-13 19:27</div>
            <div class="timeline-body"><p>I think from an UX perspective there is very little difference between mkdocs and mdBooks ... both have a sidebar on the left and a search on top ... they even have the same keyboard shortcut <code>s</code> to search ... though mdBook also lets you navigate to the previous/next page with the arrow keys. I&#x27;d say the most notable difference is the color theme ... which could be tweaked if deemed important.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-13 19:49</div>
            <div class="timeline-body"><p>#2867 is somewhat related, as we need a solution for that too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-02-14 05:23</div>
            <div class="timeline-body"><p>Closing this since you&#x27;re not interested.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-02-14 05:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:52:15 UTC
    </footer>
</body>
</html>
