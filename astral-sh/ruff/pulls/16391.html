<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[FURB156] Do not consider docstring(s) - astral-sh/ruff #16391</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[FURB156] Do not consider docstring(s)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16391">#16391</a>
        opened by <a href="https://github.com/VascoSch92">@VascoSch92</a>
        on 2025-02-26 12:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/VascoSch92">@VascoSch92</a></div>
            <div class="timeline-body"><p>The PR solves issue #16351</p>
<p>I wanted to take the definition of docstring from PEP <a href="https://peps.python.org/pep-0257/#what-is-a-docstring">PEP257</a>, but it is quite strict, i.e., docstring are always with triple double quotes.</p>
<p>I relaxed the definition to accomodate also docstring just with double quotes. In this way, the bugs presented in the issue are resolved.</p>
<p>Let me know what you think.</p>
<p>PS: I also mentioned in the description of the rule that the rule doesn't consider docstrings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-02-26 12:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/refurb/rules/hardcoded_string_charset.rs</code>:56 on 2025-02-26 12:59</div>
            <div class="timeline-body"><p>I think you can use <code>checker.semantic().in_pep_257_docstring()</code> here instead. This should give us consistent behavior to other rules ignoring docstrings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-02-26 13:04</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/VascoSch92">@VascoSch92</a> reviewed on 2025-02-26 13:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/VascoSch92">@VascoSch92</a> on <code>crates/ruff_linter/src/rules/refurb/rules/hardcoded_string_charset.rs</code>:56 on 2025-02-26 13:31</div>
            <div class="timeline-body"><p>Yes, I was that method. The problems with this method are that</p>
<pre><code class="language-python">&quot;&quot;&quot;01234567&quot;&quot;&quot;

&quot;01234567&quot;
</code></pre>
<p>are not considered as docstrings and marked as violations.</p>
<p>To fix all the issues reported in the issue, I had to use the current condition present in the PR.</p>
<p>But I can change it to <code>if checker.semantic().in_pep_257_docstring() {...}</code> if you want to be consistent between docstrings ;-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @VascoSch92 on 2025-02-26 13:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/VascoSch92">@VascoSch92</a> reviewed on 2025-02-26 13:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/VascoSch92">@VascoSch92</a> on <code>crates/ruff_linter/src/rules/refurb/rules/hardcoded_string_charset.rs</code>:56 on 2025-02-26 13:41</div>
            <div class="timeline-body"><p>Actually I double checked and just the second string in my above example will be marked as an error as it is not at the top of the module. So it makes sense to use: <code>in_pep_257_docstring()</code>.</p>
<p>I will change</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-02-26 13:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-02-26 16:26</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2025-02-26 16:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-02-26 16:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-02-26 16:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:10:21 UTC
    </footer>
</body>
</html>
