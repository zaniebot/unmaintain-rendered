<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Rust crate rand to 0.9.0 - astral-sh/ruff #15899</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update Rust crate rand to 0.9.0</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/15899">#15899</a>
        opened by <a href="https://github.com/renovate">@renovate</a>
        on 2025-02-03 00:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/renovate">@renovate</a> on 2025-02-03 00:25</div>
            <div class="timeline-body"><p>This PR contains the following updates:</p>
<p>| Package | Type | Update | Change |
|---|---|---|---|
| <a href="https://rust-random.github.io/book">rand</a> (<a href="https://redirect.github.com/rust-random/rand">source</a>) | workspace.dependencies | minor | <code>0.8.5</code> -&gt; <code>0.9.0</code> |</p>
<hr />
<blockquote>
<p>[!WARNING]
Some dependencies could not be looked up. Check the Dependency Dashboard for more information.</p>
</blockquote>
<hr />
<h3>Release Notes</h3>
<details>
<summary>rust-random/rand (rand)</summary>

<h3><a href="https://redirect.github.com/rust-random/rand/blob/HEAD/CHANGELOG.md#090---2025-01-27"><code>v0.9.0</code></a></h3>
<p><a href="https://redirect.github.com/rust-random/rand/compare/0.8.5...0.9.0">Compare Source</a></p>
<h5>Security and unsafe</h5>
<ul>
<li>Policy: &quot;rand is not a crypto library&quot; (<a href="https://redirect.github.com/rust-random/rand/issues/1514">#‚Äã1514</a>)</li>
<li>Remove fork-protection from <code>ReseedingRng</code> and <code>ThreadRng</code>. Instead, it is recommended to call <code>ThreadRng::reseed</code> on fork. (<a href="https://redirect.github.com/rust-random/rand/issues/1379">#‚Äã1379</a>)</li>
<li>Use <code>zerocopy</code> to replace some <code>unsafe</code> code (<a href="https://redirect.github.com/rust-random/rand/issues/1349">#‚Äã1349</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1393">#‚Äã1393</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1446">#‚Äã1446</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1502">#‚Äã1502</a>)</li>
</ul>
<h5>Dependencies</h5>
<ul>
<li>Bump the MSRV to 1.63.0 (<a href="https://redirect.github.com/rust-random/rand/issues/1207">#‚Äã1207</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1246">#‚Äã1246</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1269">#‚Äã1269</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1341">#‚Äã1341</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1416">#‚Äã1416</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1536">#‚Äã1536</a>); note that 1.60.0 may work for dependents when using <code>--ignore-rust-version</code></li>
<li>Update to <code>rand_core</code> v0.9.0 (<a href="https://redirect.github.com/rust-random/rand/issues/1558">#‚Äã1558</a>)</li>
</ul>
<h5>Features</h5>
<ul>
<li>Support <code>std</code> feature without <code>getrandom</code> or <code>rand_chacha</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1354">#‚Äã1354</a>)</li>
<li>Enable feature <code>small_rng</code> by default (<a href="https://redirect.github.com/rust-random/rand/issues/1455">#‚Äã1455</a>)</li>
<li>Remove implicit feature <code>rand_chacha</code>; use <code>std_rng</code> instead. (<a href="https://redirect.github.com/rust-random/rand/issues/1473">#‚Äã1473</a>)</li>
<li>Rename feature <code>serde1</code> to <code>serde</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1477">#‚Äã1477</a>)</li>
<li>Rename feature <code>getrandom</code> to <code>os_rng</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1537">#‚Äã1537</a>)</li>
<li>Add feature <code>thread_rng</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1547">#‚Äã1547</a>)</li>
</ul>
<h5>API changes: rand_core traits</h5>
<ul>
<li>Add fn <code>RngCore::read_adapter</code> implementing <code>std::io::Read</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1267">#‚Äã1267</a>)</li>
<li>Add trait <code>CryptoBlockRng: BlockRngCore</code>; make <code>trait CryptoRng: RngCore</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1273">#‚Äã1273</a>)</li>
<li>Add traits <code>TryRngCore</code>, <code>TryCryptoRng</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1424">#‚Äã1424</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1499">#‚Äã1499</a>)</li>
<li>Rename <code>fn SeedableRng::from_rng</code> -&gt; <code>try_from_rng</code> and add infallible variant <code>fn from_rng</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1424">#‚Äã1424</a>)</li>
<li>Rename <code>fn SeedableRng::from_entropy</code> -&gt; <code>from_os_rng</code> and add fallible variant <code>fn try_from_os_rng</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1424">#‚Äã1424</a>)</li>
<li>Add bounds <code>Clone</code> and <code>AsRef</code> to associated type <code>SeedableRng::Seed</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1491">#‚Äã1491</a>)</li>
</ul>
<h5>API changes: Rng trait and top-level fns</h5>
<ul>
<li>Rename fn <code>rand::thread_rng()</code> to <code>rand::rng()</code> and remove from the prelude (<a href="https://redirect.github.com/rust-random/rand/issues/1506">#‚Äã1506</a>)</li>
<li>Remove fn <code>rand::random()</code> from the prelude (<a href="https://redirect.github.com/rust-random/rand/issues/1506">#‚Äã1506</a>)</li>
<li>Add top-level fns <code>random_iter</code>, <code>random_range</code>, <code>random_bool</code>, <code>random_ratio</code>, <code>fill</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1488">#‚Äã1488</a>)</li>
<li>Re-introduce fn <code>Rng::gen_iter</code> as <code>random_iter</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1305">#‚Äã1305</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1500">#‚Äã1500</a>)</li>
<li>Rename fn <code>Rng::gen</code> to <code>random</code> to avoid conflict with the new <code>gen</code> keyword in Rust 2024 (<a href="https://redirect.github.com/rust-random/rand/issues/1438">#‚Äã1438</a>)</li>
<li>Rename fns <code>Rng::gen_range</code> to <code>random_range</code>, <code>gen_bool</code> to <code>random_bool</code>, <code>gen_ratio</code> to <code>random_ratio</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1505">#‚Äã1505</a>)</li>
<li>Annotate panicking methods with <code>#[track_caller]</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1442">#‚Äã1442</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1447">#‚Äã1447</a>)</li>
</ul>
<h5>API changes: RNGs</h5>
<ul>
<li>Fix <code>&lt;SmallRng as SeedableRng&gt;::Seed</code> size to 256 bits (<a href="https://redirect.github.com/rust-random/rand/issues/1455">#‚Äã1455</a>)</li>
<li>Remove first parameter (<code>rng</code>) of <code>ReseedingRng::new</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1533">#‚Äã1533</a>)</li>
</ul>
<h5>API changes: Sequences</h5>
<ul>
<li>Split trait <code>SliceRandom</code> into <code>IndexedRandom</code>, <code>IndexedMutRandom</code>, <code>SliceRandom</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1382">#‚Äã1382</a>)</li>
<li>Add <code>IndexedRandom::choose_multiple_array</code>, <code>index::sample_array</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1453">#‚Äã1453</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1469">#‚Äã1469</a>)</li>
</ul>
<h5>API changes: Distributions: renames</h5>
<ul>
<li>Rename module <code>rand::distributions</code> to <code>rand::distr</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1470">#‚Äã1470</a>)</li>
<li>Rename distribution <code>Standard</code> to <code>StandardUniform</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1526">#‚Äã1526</a>)</li>
<li>Move <code>distr::Slice</code> -&gt; <code>distr::slice::Choose</code>, <code>distr::EmptySlice</code> -&gt; <code>distr::slice::Empty</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1548">#‚Äã1548</a>)</li>
<li>Rename trait <code>distr::DistString</code> -&gt; <code>distr::SampleString</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1548">#‚Äã1548</a>)</li>
<li>Rename <code>distr::DistIter</code> -&gt; <code>distr::Iter</code>, <code>distr::DistMap</code> -&gt; <code>distr::Map</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1548">#‚Äã1548</a>)</li>
</ul>
<h5>API changes: Distributions</h5>
<ul>
<li>Relax <code>Sized</code> bound on <code>Distribution&lt;T&gt; for &amp;D</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1278">#‚Äã1278</a>)</li>
<li>Remove impl of <code>Distribution&lt;Option&lt;T&gt;&gt;</code> for <code>StandardUniform</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1526">#‚Äã1526</a>)</li>
<li>Let distribution <code>StandardUniform</code> support all <code>NonZero*</code> types (<a href="https://redirect.github.com/rust-random/rand/issues/1332">#‚Äã1332</a>)</li>
<li>Fns <code>{Uniform, UniformSampler}::{new, new_inclusive}</code> return a <code>Result</code> (instead of potentially panicking) (<a href="https://redirect.github.com/rust-random/rand/issues/1229">#‚Äã1229</a>)</li>
<li>Distribution <code>Uniform</code> implements <code>TryFrom</code> instead of <code>From</code> for ranges (<a href="https://redirect.github.com/rust-random/rand/issues/1229">#‚Äã1229</a>)</li>
<li>Add <code>UniformUsize</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1487">#‚Äã1487</a>)</li>
<li>Remove support for generating <code>isize</code> and <code>usize</code> values with <code>StandardUniform</code>, <code>Uniform</code> (except via <code>UniformUsize</code>) and <code>Fill</code> and usage as a <code>WeightedAliasIndex</code> weight (<a href="https://redirect.github.com/rust-random/rand/issues/1487">#‚Äã1487</a>)</li>
<li>Add impl <code>DistString</code> for distributions <code>Slice&lt;char&gt;</code> and <code>Uniform&lt;char&gt;</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1315">#‚Äã1315</a>)</li>
<li>Add fn <code>Slice::num_choices</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1402">#‚Äã1402</a>)</li>
<li>Add fn <code>p()</code> for distribution <code>Bernoulli</code> to access probability (<a href="https://redirect.github.com/rust-random/rand/issues/1481">#‚Äã1481</a>)</li>
</ul>
<h5>API changes: Weighted distributions</h5>
<ul>
<li>Add <code>pub</code> module <code>rand::distr::weighted</code>, moving <code>WeightedIndex</code> there (<a href="https://redirect.github.com/rust-random/rand/issues/1548">#‚Äã1548</a>)</li>
<li>Add trait <code>weighted::Weight</code>, allowing <code>WeightedIndex</code> to trap overflow (<a href="https://redirect.github.com/rust-random/rand/issues/1353">#‚Äã1353</a>)</li>
<li>Add fns <code>weight, weights, total_weight</code> to distribution <code>WeightedIndex</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1420">#‚Äã1420</a>)</li>
<li>Rename enum <code>WeightedError</code> to <code>weighted::Error</code>, revising variants (<a href="https://redirect.github.com/rust-random/rand/issues/1382">#‚Äã1382</a>) and mark as <code>#[non_exhaustive]</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1480">#‚Äã1480</a>)</li>
</ul>
<h5>API changes: SIMD</h5>
<ul>
<li>Switch to <code>std::simd</code>, expand SIMD &amp; docs (<a href="https://redirect.github.com/rust-random/rand/issues/1239">#‚Äã1239</a>)</li>
</ul>
<h5>Reproducibility-breaking changes</h5>
<ul>
<li>Make <code>ReseedingRng::reseed</code> discard remaining data from the last block generated (<a href="https://redirect.github.com/rust-random/rand/issues/1379">#‚Äã1379</a>)</li>
<li>Change fn <code>SmallRng::seed_from_u64</code> implementation (<a href="https://redirect.github.com/rust-random/rand/issues/1203">#‚Äã1203</a>)</li>
<li>Allow <code>UniformFloat::new</code> samples and <code>UniformFloat::sample_single</code> to yield <code>high</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1462">#‚Äã1462</a>)</li>
<li>Fix portability of distribution <code>Slice</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1469">#‚Äã1469</a>)</li>
<li>Make <code>Uniform</code> for <code>usize</code> portable via <code>UniformUsize</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1487">#‚Äã1487</a>)</li>
<li>Fix <code>IndexdRandom::choose_multiple_weighted</code> for very small seeds and optimize for large input length / low memory (<a href="https://redirect.github.com/rust-random/rand/issues/1530">#‚Äã1530</a>)</li>
</ul>
<h5>Reproducibility-breaking optimisations</h5>
<ul>
<li>Optimize fn <code>sample_floyd</code>, affecting output of <code>rand::seq::index::sample</code> and <code>rand::seq::SliceRandom::choose_multiple</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1277">#‚Äã1277</a>)</li>
<li>New, faster algorithms for <code>IteratorRandom::choose</code> and <code>choose_stable</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1268">#‚Äã1268</a>)</li>
<li>New, faster algorithms for <code>SliceRandom::shuffle</code> and <code>partial_shuffle</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1272">#‚Äã1272</a>)</li>
<li>Optimize distribution <code>Uniform</code>: use Canon's method (single sampling) / Lemire's method (distribution sampling) for faster sampling (breaks value stability; <a href="https://redirect.github.com/rust-random/rand/issues/1287">#‚Äã1287</a>)</li>
<li>Optimize fn <code>sample_single_inclusive</code> for floats (+~20% perf) (<a href="https://redirect.github.com/rust-random/rand/issues/1289">#‚Äã1289</a>)</li>
</ul>
<h5>Other optimisations</h5>
<ul>
<li>Improve <code>SmallRng</code> initialization performance (<a href="https://redirect.github.com/rust-random/rand/issues/1482">#‚Äã1482</a>)</li>
<li>Optimise SIMD widening multiply (<a href="https://redirect.github.com/rust-random/rand/issues/1247">#‚Äã1247</a>)</li>
</ul>
<h5>Other</h5>
<ul>
<li>Add <code>Cargo.lock.msrv</code> file (<a href="https://redirect.github.com/rust-random/rand/issues/1275">#‚Äã1275</a>)</li>
<li>Reformat with <code>rustfmt</code> and enforce (<a href="https://redirect.github.com/rust-random/rand/issues/1448">#‚Äã1448</a>)</li>
<li>Apply Clippy suggestions and enforce (<a href="https://redirect.github.com/rust-random/rand/issues/1448">#‚Äã1448</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1474">#‚Äã1474</a>)</li>
<li>Move all benchmarks to new <code>benches</code> crate (<a href="https://redirect.github.com/rust-random/rand/issues/1329">#‚Äã1329</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1439">#‚Äã1439</a>) and migrate to Criterion (<a href="https://redirect.github.com/rust-random/rand/issues/1490">#‚Äã1490</a>)</li>
</ul>
<h5>Documentation</h5>
<ul>
<li>Improve <code>ThreadRng</code> related docs (<a href="https://redirect.github.com/rust-random/rand/issues/1257">#‚Äã1257</a>)</li>
<li>Docs: enable experimental <code>--generate-link-to-definition</code> feature (<a href="https://redirect.github.com/rust-random/rand/issues/1327">#‚Äã1327</a>)</li>
<li>Better doc of crate features, use <code>doc_auto_cfg</code> (<a href="https://redirect.github.com/rust-random/rand/issues/1411">#‚Äã1411</a>, <a href="https://redirect.github.com/rust-random/rand/issues/1450">#‚Äã1450</a>)</li>
</ul>
</details>

<hr />
<h3>Configuration</h3>
<p>üìÖ <strong>Schedule</strong>: Branch creation - &quot;before 4am on Monday&quot; (UTC), Automerge - At any time (no schedule defined).</p>
<p>üö¶ <strong>Automerge</strong>: Disabled by config. Please merge this manually once you are satisfied.</p>
<p>‚ôª <strong>Rebasing</strong>: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.</p>
<p>üîï <strong>Ignore</strong>: Close this PR and you won't be reminded about this update again.</p>
<hr />
<ul>
<li>[ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box</li>
</ul>
<hr />
<p>This PR was generated by <a href="https://mend.io/renovate/">Mend Renovate</a>. View the <a href="https://developer.mend.io/github/astral-sh/ruff">repository job log</a>.</p>
<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzOS4xNDUuMCIsInVwZGF0ZWRJblZlciI6IjM5LjE0NS4wIiwidGFyZ2V0QnJhbmNoIjoibWFpbiIsImxhYmVscyI6WyJpbnRlcm5hbCJdfQ==-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @renovate[bot] on 2025-02-03 00:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/renovate[bot]">@renovate[bot]</a> on 2025-02-03 00:25</div>
            <div class="timeline-body"><h3>‚ö†Ô∏è Artifact update problem</h3>
<p>Renovate failed to update an artifact related to this branch. You probably do not want to merge this PR as-is.</p>
<p>‚ôª Renovate will retry this branch, including artifacts, only when one of the following happens:</p>
<ul>
<li>any of the package files in this branch needs updating, or</li>
<li>the branch becomes conflicted, or</li>
<li>you click the rebase/retry checkbox if found above, or</li>
<li>you rename this PR's title to start with &quot;rebase!&quot; to trigger it manually</li>
</ul>
<p>The artifact failure details are included below:</p>
<h5>File name: Cargo.lock</h5>
<pre><code>Command failed: cargo update --config net.git-fetch-with-cli=true --manifest-path Cargo.toml --package rand@0.8.5 --precise 0.9.0
    Updating crates.io index
error: failed to select a version for the requirement `rand = &quot;^0.8&quot;`
candidate versions found which didn't match: 0.9.0
location searched: crates.io index
required by package `quickcheck v1.0.3`
    ... which satisfies dependency `quickcheck = &quot;^1.0.3&quot;` (locked to 1.0.3) of package `red_knot_python_semantic v0.0.0 (/tmp/renovate/repos/github/astral-sh/ruff/crates/red_knot_python_semantic)`
    ... which satisfies path dependency `red_knot_python_semantic` (locked to 0.0.0) of package `red_knot v0.0.0 (/tmp/renovate/repos/github/astral-sh/ruff/crates/red_knot)`

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-02-03 00:35</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>‚úÖ ecosystem check detected no format changes.</p>
<h3>Formatter (preview)</h3>
<p>‚úÖ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @MichaReiser by @MichaReiser on 2025-02-03 10:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @MichaReiser on 2025-02-03 10:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @MichaReiser on 2025-02-03 11:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @MichaReiser on 2025-02-03 11:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @MichaReiser on 2025-02-03 11:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @sharkdp by @MichaReiser on 2025-02-03 11:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @AlexWaygood removed by @AlexWaygood on 2025-02-03 11:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2025-02-03 11:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-02-03 11:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-02-03 11:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 19:57:52 UTC
    </footer>
</body>
</html>
