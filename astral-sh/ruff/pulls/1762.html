<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enable isort-style `required-imports` enforcement - astral-sh/ruff #1762</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Enable isort-style <code>required-imports</code> enforcement</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/1762">#1762</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-01-10 04:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><p>In isort, this is called <code>add-imports</code>, but I prefer the declarative name.</p>
<p>The idea is that by adding the following to your <code>pyproject.toml</code>, you can ensure that the import is included in all files:</p>
<pre><code class="language-toml">[tool.ruff.isort]
required-imports = [&quot;from __future__ import annotations&quot;]
</code></pre>
<p>I mostly reverse-engineered isort's logic for making decisions, though I made some slight tweaks that I think are preferable. A few comments:</p>
<ul>
<li>Like isort, we don't enforce this on empty files (like empty <code>__init__.py</code>).</li>
<li>Like isort, we require that the import is at the top-level.</li>
<li>isort will skip any docstrings, and any comments on the first three lines (I think, based on testing). Ruff places the import after the last docstring or comment in the file preamble (that is: after the last docstring or comment that comes before the <em>first</em> non-docstring and non-comment).</li>
</ul>
<p>Resolves #1700.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-10 04:28</div>
            <div class="timeline-body"><p>Two more things here: (1) support straight imports (<code>import os</code>, as opposed to <code>from os import ...</code>), and (2) add tests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-01-10 23:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-10 23:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-01-10 23:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ashb">@ashb</a> on 2023-01-12 12:50</div>
            <div class="timeline-body"><p>Amazing timing @charliermarsh - I just went looking for this for Airflow</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:55:28 UTC
    </footer>
</body>
</html>
