<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pygrep_hooks`] Move `blanket-noqa` to noqa checker (`PGH004`) - astral-sh/ruff #11053</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pygrep_hooks</code>] Move <code>blanket-noqa</code> to noqa checker (<code>PGH004</code>)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11053">#11053</a>
        opened by <a href="https://github.com/augustelalande">@augustelalande</a>
        on 2024-04-20 03:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/augustelalande">@augustelalande</a></div>
            <div class="timeline-body">

Summary
<p>Move <code>blanket-noqa</code> rule from the token checker to the noqa checker. This allows us to make use of the line directives already computed in the noqa checker.</p>
Test Plan
<p>Verified test results are unchanged.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-04-20 03:21</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+3 -3 violations, +0 -0 fixes in 2 projects; 42 projects unchanged)</p>
<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+1 -1 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --no-preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/embed/util.py#L146">src/bokeh/embed/util.py:146:32:</a> RUF100 [*] Unused blanket `noqa` directive
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/embed/util.py#L146">src/bokeh/embed/util.py:146:32:</a> RUF100 [*] Unused blanket `noqa` directive
</pre>

</p>

<a href="https://github.com/rotki/rotki">rotki/rotki</a> (+2 -2 violations, +0 -0 fixes)
<p>

<pre>
+ <a href="https://github.com/rotki/rotki/blob/a82f29b86874ee2dc36a6e134d117b80347d40eb/pytestgeventwrapper.py#L1">pytestgeventwrapper.py:1:48:</a> RUF100 [*] Unused blanket `noqa` directive
- <a href="https://github.com/rotki/rotki/blob/a82f29b86874ee2dc36a6e134d117b80347d40eb/pytestgeventwrapper.py#L1">pytestgeventwrapper.py:1:48:</a> RUF100 [*] Unused blanket `noqa` directive
+ <a href="https://github.com/rotki/rotki/blob/a82f29b86874ee2dc36a6e134d117b80347d40eb/pytestgeventwrapper.py#L2">pytestgeventwrapper.py:2:34:</a> RUF100 [*] Unused blanket `noqa` directive
- <a href="https://github.com/rotki/rotki/blob/a82f29b86874ee2dc36a6e134d117b80347d40eb/pytestgeventwrapper.py#L2">pytestgeventwrapper.py:2:34:</a> RUF100 [*] Unused blanket `noqa` directive
</pre>

</p>

Changes by rule (1 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| RUF100 | 6 | 3 | 3 | 0 | 0 |</p>
</p>


Linter (preview)
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+3 -3 violations, +0 -0 fixes in 2 projects; 42 projects unchanged)</p>
<a href="https://github.com/bokeh/bokeh">bokeh/bokeh</a> (+1 -1 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/embed/util.py#L146">src/bokeh/embed/util.py:146:32:</a> RUF100 [*] Unused blanket `noqa` directive
- <a href="https://github.com/bokeh/bokeh/blob/829b2a75c402d0d0abd7e37ff201fbdfd949d857/src/bokeh/embed/util.py#L146">src/bokeh/embed/util.py:146:32:</a> RUF100 [*] Unused blanket `noqa` directive
</pre>

</p>

<a href="https://github.com/rotki/rotki">rotki/rotki</a> (+2 -2 violations, +0 -0 fixes)
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href="https://github.com/rotki/rotki/blob/a82f29b86874ee2dc36a6e134d117b80347d40eb/pytestgeventwrapper.py#L1">pytestgeventwrapper.py:1:48:</a> RUF100 [*] Unused blanket `noqa` directive
- <a href="https://github.com/rotki/rotki/blob/a82f29b86874ee2dc36a6e134d117b80347d40eb/pytestgeventwrapper.py#L1">pytestgeventwrapper.py:1:48:</a> RUF100 [*] Unused blanket `noqa` directive
+ <a href="https://github.com/rotki/rotki/blob/a82f29b86874ee2dc36a6e134d117b80347d40eb/pytestgeventwrapper.py#L2">pytestgeventwrapper.py:2:34:</a> RUF100 [*] Unused blanket `noqa` directive
- <a href="https://github.com/rotki/rotki/blob/a82f29b86874ee2dc36a6e134d117b80347d40eb/pytestgeventwrapper.py#L2">pytestgeventwrapper.py:2:34:</a> RUF100 [*] Unused blanket `noqa` directive
</pre>

</p>

Changes by rule (1 rules affected)
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| RUF100 | 6 | 3 | 3 | 0 | 0 |</p>
</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2024-04-22 07:16</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-04-22 07:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-04-22 07:17</div>
            <div class="timeline-body"><p>Uhh, what are the differences in the ecosystem check. Are the ranges different?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/augustelalande">@augustelalande</a> on 2024-04-22 17:34</div>
            <div class="timeline-body"><p>It&#x27;s because the reporting order gets switched.
Before</p>
<pre><code>➜  ruff check ..\test\ruff_test\main.py --no-cache --exit-zero --output-format concise --preview --select RUF100,PGH004
C:\Users\Auguste\workspace\test\ruff_test\main.py:158:32: PGH004 Use specific rule codes when using `noqa`
C:\Users\Auguste\workspace\test\ruff_test\main.py:158:32: RUF100 [*] Unused blanket `noqa` directive
Found 2 errors.
[*] 1 fixable with the `--fix` option.
</code></pre>
<p>After</p>
<pre><code>➜  cargo run -p ruff -- check ..\test\ruff_test\main.py --no-cache --preview --exit-zero --output-format concise --select RUF100,PGH004
    Finished dev [unoptimized + debuginfo] target(s) in 0.44s
     Running `target\debug\ruff.exe check ..\test\ruff_test\main.py --no-cache --preview --exit-zero --output-format concise --select RUF100,PGH004`
C:\Users\Auguste\workspace\test\ruff_test\main.py:158:32: RUF100 [*] Unused blanket `noqa` directive
C:\Users\Auguste\workspace\test\ruff_test\main.py:158:32: PGH004 Use specific rule codes when using `noqa`
Found 2 errors.
[*] 1 fixable with the `--fix` option.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-22 17:36</div>
            <div class="timeline-body"><p>Oh hah that&#x27;s funny. Thanks for looking into it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-22 17:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-22 17:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-04-22 17:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:03:33 UTC
    </footer>
</body>
</html>
