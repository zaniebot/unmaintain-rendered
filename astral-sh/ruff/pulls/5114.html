<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maintain consistency when deserializing to JSON - astral-sh/ruff #5114</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Maintain consistency when deserializing to JSON</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/5114">#5114</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2023-06-15 07:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Maintain consistency while deserializing Jupyter notebook to JSON. The following
changes were made:</p>
<ol>
<li>Use string array to store the source value as that's the default (https://github.com/jupyter/nbformat/blob/57817204230a8f7173b8bec380e571b5d410de0d/nbformat/v4/nbjson.py#L56-L57)</li>
<li>Remove unused structs and enums</li>
<li>Reorder the keys in alphabetical order as that's the default. (https://github.com/jupyter/nbformat/blob/57817204230a8f7173b8bec380e571b5d410de0d/nbformat/v4/nbjson.py#L51)</li>
</ol>
<h3>Side effect</h3>
<p>Removing the <code>preserve_order</code> feature means that the order of keys in JSON output (<code>--format json</code>) will be in alphabetical order. This is because the value is represented using <code>serde_json::Value</code> which internally is a <code>BTreeMap</code>, thus sorting it as per the string key. For posterity if this turns out to be not ideal, then we could define a struct representing the JSON object and the order of struct fields will determine the order in the JSON string.</p>
<h2>Test Plan</h2>
<p>Add a test case to assert the raw JSON string.</p>
<hr />
<p><em><strong>Edit: Both have been fixed, keeping here for posterity</strong></em></p>
<h3>Still a few inconsistencies...</h3>
<h4>1</h4>
<p><code>execution_count</code> is a required field <em>only</em> in code cell while for others
it's not required. We use a single <code>Cell</code> struct and a <code>cell_type</code> field
instead of having structs for each cell type (<code>CodeCell</code>, <code>MarkdownCell</code>).
This means that the field <code>execution_count</code> will always be added to the JSON
string.</p>
<p><strong>What to do then?</strong></p>
<ul>
<li>We could either use a custom deserializer and check for the <code>cell_type</code>.</li>
<li>Split the <code>Code</code> struct into 3 distinct types using enum:</li>
</ul>
<pre><code class="language-rust">enum CellType {
    RawCell(RawCell),
    MarkdownCell(MarkdownCell),
    CodeCell(CodeCell)
}

struct RawCell {
    ...
}

struct MarkdownCell {
    ...
}

struct CodeCell {
    ...
}
</code></pre>
<h4>2</h4>
<p>For some fields, the <code>additionalProperties</code> is <code>true</code> which means there could be
unknown properties added which we've to keep while deserializing. We do this
using:</p>
<pre><code class="language-rust">pub struct RawNotebookMetadata {
    // ... other fields

    #[serde(flatten)]
    pub other: BTreeMap&lt;String, Value&gt;
}
</code></pre>
<p>But, now the order won't be alphabetical. Wherever the <code>other</code> field is present,
all of the keys in it will be flattened at that position.</p>
<p>In the following example, the <code>nbconvert_exporter</code> and <code>version</code> keys are extra.
Now, as the <code>other</code> field in our struct is at the end, both the extra keys have
been moved to the end.</p>
<pre><code class="language-diff">    &quot;language_info&quot;: {
     &quot;codemirror_mode&quot;: {
      &quot;name&quot;: &quot;ipython&quot;,
      &quot;version&quot;: 3
     },
    &quot;file_extension&quot;: &quot;.py&quot;,
    &quot;mimetype&quot;: &quot;text/x-python&quot;,
    &quot;name&quot;: &quot;python&quot;,
-   &quot;nbconvert_exporter&quot;: &quot;python&quot;,
    &quot;pygments_lexer&quot;: &quot;ipython3&quot;,
+   &quot;nbconvert_exporter&quot;: &quot;python&quot;,
    &quot;version&quot;: &quot;3.11.3&quot;
   }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-15 07:14</div>
            <div class="timeline-body"><p>Current dependencies on/for this PR:</p>
<ul>
<li>main<ul>
<li><strong>PR #5114</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/5114" target="_blank"><img src="https://static.graphite.dev/graphite-32x32.png" alt="Graphite" width="10px" height="10px"/></a>  ðŸ‘ˆ</li>
</ul>
</li>
</ul>
<p>This comment was auto-generated by <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/5114?utm_source=stack-comment">Graphite</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-15 07:36</div>
            <div class="timeline-body"><p>Actually, we should resolve (1) as otherwise the validation fails:</p>
<pre><code>NotebookValidationError: Additional properties are not allowed ('execution_count' was unexpected)

Failed validating 'additionalProperties' in markdown_cell:

On instance['cells'][0]:
{'cell_type': 'markdown',
 'execution_count': None,
 'id': 'f3c286e9-fa52-4440-816f-4449232f199a',
 'metadata': {},
 'source': '# Ruff Test'}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-06-15 07:42</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>âœ… ecosystem check detected no changes.</p>
<h3>Benchmark</h3>
<h4>Linux</h4>
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
formatter/large/dataset.py                 1.00      7.5Â±0.02ms     5.4 MB/sec    1.01      7.6Â±0.02ms     5.4 MB/sec
formatter/numpy/ctypeslib.py               1.00   1572.2Â±5.75Âµs    10.6 MB/sec    1.01   1583.7Â±9.09Âµs    10.5 MB/sec
formatter/numpy/globals.py                 1.00    152.3Â±0.53Âµs    19.4 MB/sec    1.00    152.5Â±1.02Âµs    19.4 MB/sec
formatter/pydantic/types.py                1.00      3.1Â±0.01ms     8.3 MB/sec    1.01      3.1Â±0.01ms     8.2 MB/sec
linter/all-rules/large/dataset.py          1.01     16.2Â±0.10ms     2.5 MB/sec    1.00     16.0Â±0.08ms     2.5 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      3.9Â±0.01ms     4.3 MB/sec    1.00      3.9Â±0.01ms     4.2 MB/sec
linter/all-rules/numpy/globals.py          1.00    493.3Â±0.97Âµs     6.0 MB/sec    1.02    502.7Â±7.38Âµs     5.9 MB/sec
linter/all-rules/pydantic/types.py         1.01      6.9Â±0.11ms     3.7 MB/sec    1.00      6.9Â±0.02ms     3.7 MB/sec
linter/default-rules/large/dataset.py      1.00      8.0Â±0.02ms     5.1 MB/sec    1.00      8.0Â±0.02ms     5.1 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00   1719.8Â±7.63Âµs     9.7 MB/sec    1.00   1726.1Â±7.83Âµs     9.6 MB/sec
linter/default-rules/numpy/globals.py      1.00    189.8Â±0.37Âµs    15.5 MB/sec    1.01    191.3Â±0.95Âµs    15.4 MB/sec
linter/default-rules/pydantic/types.py     1.00      3.6Â±0.01ms     7.1 MB/sec    1.00      3.6Â±0.01ms     7.0 MB/sec
</code></pre>
<h4>Windows</h4>
<pre><code>group                                      main                                    pr
-----                                      ----                                    --
formatter/large/dataset.py                 1.00      7.8Â±0.31ms     5.2 MB/sec     1.08      8.4Â±0.40ms     4.8 MB/sec
formatter/numpy/ctypeslib.py               1.00  1589.7Â±111.20Âµs    10.5 MB/sec    1.05  1676.2Â±81.96Âµs     9.9 MB/sec
formatter/numpy/globals.py                 1.00   153.7Â±11.20Âµs    19.2 MB/sec     1.02   156.1Â±11.42Âµs    18.9 MB/sec
formatter/pydantic/types.py                1.00      3.2Â±0.16ms     8.0 MB/sec     1.08      3.4Â±0.20ms     7.4 MB/sec
linter/all-rules/large/dataset.py          1.00     15.9Â±0.49ms     2.6 MB/sec     1.03     16.4Â±0.50ms     2.5 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      4.2Â±0.17ms     4.0 MB/sec     1.00      4.2Â±0.16ms     4.0 MB/sec
linter/all-rules/numpy/globals.py          1.00   506.5Â±32.20Âµs     5.8 MB/sec     1.00   505.1Â±30.05Âµs     5.8 MB/sec
linter/all-rules/pydantic/types.py         1.00      7.1Â±0.34ms     3.6 MB/sec     1.02      7.2Â±0.32ms     3.5 MB/sec
linter/default-rules/large/dataset.py      1.00      8.3Â±0.21ms     4.9 MB/sec     1.01      8.3Â±0.26ms     4.9 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00  1767.2Â±81.47Âµs     9.4 MB/sec     1.00  1762.8Â±77.52Âµs     9.4 MB/sec
linter/default-rules/numpy/globals.py      1.00   198.9Â±11.73Âµs    14.8 MB/sec     1.00   198.2Â±12.87Âµs    14.9 MB/sec
linter/default-rules/pydantic/types.py     1.00      3.7Â±0.15ms     6.8 MB/sec     1.01      3.7Â±0.19ms     6.8 MB/sec
</code></pre>
<!-- thollander/actions-comment-pull-request "PR Check Results" -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff/src/jupyter/schema.rs</code>:60 on 2023-06-15 07:42</div>
            <div class="timeline-body"><p>If we remove this, then we would get the following validation error:</p>
<pre><code>NotebookValidationError: 'execution_count' is a required property

Failed validating 'required' in code_cell:

On instance['cells'][3]:
{'cell_type': 'code',
 'id': '6bced3f8-e0a4-450c-ae7c-f60ad5671ee9',
 'metadata': {},
 'outputs': ['...0 outputs...'],
 'source': 'with contextlib.suppress(ValueError):\n    print()\n'}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2023-06-15 07:42</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-06-15 07:58</div>
            <div class="timeline-body"><p>Re 1: My intution goes towards using an enum and <code>#[serde(flatten)]</code>, but both should do. Maybe you can put only the cell type and <code>execution_count</code> on each variant and tell serde to decide by cell type from a container attribute.</p>
<p>Re 2: That's a tricky problem! Maybe https://stackoverflow.com/a/67792465/3549270 would work?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-06-15 11:00</div>
            <div class="timeline-body"><p>I tried the following:</p>
<ul>
<li>Download the jupyter notebook from https://github.com/sokrypton/ColabFold/blob/affc6e0e89ee723795ab009f51f2600d843dafb0/AlphaFold2.ipynb as AlphaFold2.ipynb</li>
<li>Open it with <code>jupyter notebook</code>, save as AlphaFold2-jupyter.ipynb. This reformats the entire file because apparently jupyter has different formatting settings than google colab where the notebook was created on (so that's a case we also don't have to handle)</li>
<li><code>cp AlphaFold2-jupyter.ipynb AlphaFold2-jupyter-fixed.ipynb</code></li>
<li><code>cargo run --bin ruff --features jupyter_notebook -- check --select F841 --no-cache --fix AlphaFold2-jupyter-fixed.ipynb</code></li>
<li><code>diff AlphaFold2-jupyter.ipynb AlphaFold2-jupyter-fixed.ipynb</code>, which are https://gist.github.com/konstin/98e41d667a42c978bdfcb4dcea2373d6 and https://gist.github.com/konstin/a3c4950eae3634ee9417d671beb9212b
4a5</li>
</ul>
<pre><code class="language-diff">&gt;    &quot;execution_count&quot;: null,
14a16
&gt;    &quot;execution_count&quot;: null,
112c114,115
&lt;     &quot;\n&quot;
---
&gt;     &quot;\n&quot;,
&gt;     &quot;&quot;
395d397
&lt;     &quot;  model_name = f\&quot;rank_{rank_num}\&quot;\n&quot;,
476c478,479
&lt;     &quot;\&quot;\&quot;\&quot;))\n&quot;
---
&gt;     &quot;\&quot;\&quot;\&quot;))\n&quot;,
&gt;     &quot;&quot;
504a508
&gt;    &quot;execution_count&quot;: null,
610,617d613
&lt;   &quot;accelerator&quot;: &quot;GPU&quot;,
&lt;   &quot;colab&quot;: {
&lt;    &quot;gpuType&quot;: &quot;T4&quot;,
&lt;    &quot;include_colab_link&quot;: true,
&lt;    &quot;machine_shape&quot;: &quot;hm&quot;,
&lt;    &quot;name&quot;: &quot;AlphaFold2.ipynb&quot;,
&lt;    &quot;provenance&quot;: []
&lt;   },
631d626
&lt;    &quot;nbconvert_exporter&quot;: &quot;python&quot;,
632a628
&gt;    &quot;nbconvert_exporter&quot;: &quot;python&quot;,
633a630,637
&gt;   },
&gt;   &quot;accelerator&quot;: &quot;GPU&quot;,
&gt;   &quot;colab&quot;: {
&gt;    &quot;gpuType&quot;: &quot;T4&quot;,
&gt;    &quot;include_colab_link&quot;: true,
&gt;    &quot;machine_shape&quot;: &quot;hm&quot;,
&gt;    &quot;name&quot;: &quot;AlphaFold2.ipynb&quot;,
&gt;    &quot;provenance&quot;: []
</code></pre>
<p>This means the edition works correctly (nice!), we add an extra <code>&quot;&quot;</code> at the end of list where jupyter doesn't, the <code>execution_count</code> field you mentioned and <code>metadata</code> fields get reordered.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-15 11:34</div>
            <div class="timeline-body"><blockquote>
<p>Re 2: That's a tricky problem! Maybe <a href="https://stackoverflow.com/a/67792465/3549270">stackoverflow.com/a/67792465/3549270</a> would work?</p>
</blockquote>
<p>I tried this, it didn't work. It just keeps the same order as defined in the struct which is the default behavior.</p>
<blockquote>
<p>we add an extra &quot;&quot; at the end of list where jupyter doesn't,</p>
</blockquote>
<p>Nice! Let me take a look at this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-15 12:46</div>
            <div class="timeline-body"><p>@konstin Do you mean something like this? (I'm not sure how to use <code>#[serde(flatten)]</code> here)</p>
<pre><code class="language-rust">#[derive(Debug, Serialize, Deserialize, Clone, PartialEq)]
#[serde(tag = &quot;cell_type&quot;)]
pub enum Cell {
    #[serde(rename = &quot;code&quot;)]
    Code(CodeCell),
    #[serde(rename = &quot;markdown&quot;)]
    Markdown(MarkdownCell),
    #[serde(rename = &quot;raw&quot;)]
    Raw(RawCell),
}

#[skip_serializing_none]
#[derive(Clone, Debug, Serialize, Deserialize, PartialEq)]
pub struct RawCell {
    pub attachments: Option&lt;Value&gt;,
    pub id: Option&lt;String&gt;,
    pub metadata: Value,
    pub source: SourceValue,
}

/// Notebook markdown cell.
#[skip_serializing_none]
#[derive(Clone, Debug, Serialize, Deserialize, PartialEq)]
pub struct MarkdownCell {
    pub attachments: Option&lt;Value&gt;,
    pub id: Option&lt;String&gt;,
    pub metadata: Value,
    pub source: SourceValue,
}

/// Notebook code cell.
#[derive(Clone, Debug, Serialize, Deserialize, PartialEq)]
pub struct CodeCell {
    pub execution_count: Option&lt;i64&gt;,
    pub id: Option&lt;String&gt;,
    pub metadata: Value,
    pub outputs: Vec&lt;Value&gt;,
    pub source: SourceValue,
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @charliermarsh on 2023-06-15 18:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-06-15 20:55</div>
            <div class="timeline-body"><p>Like this (untested, but i've used flatten in other projects)</p>
<pre><code class="language-rust">use serde::{Serialize, Deserialize};

#[derive(Debug, Serialize, Deserialize, Clone, PartialEq)]
#[serde(tag = &quot;cell_type&quot;)]
pub enum Cell {
    #[serde(rename = &quot;code&quot;)]
    Code {
        #[serde(flatten)]
        pub cell: CellInner,
        pub execution_count: Option&lt;i64&gt;,
    },
    #[serde(rename = &quot;markdown&quot;)]
    Markdown {
        #[serde(flatten)]
        pub cell: CellInner,
    },
    #[serde(rename = &quot;raw&quot;)]
    Raw {
        #[serde(flatten)]
        pub cell: CellInner,
    },
}

#[skip_serializing_none]
#[derive(Clone, Debug, Serialize, Deserialize, PartialEq)]
pub struct CellInner {
    pub attachments: Option&lt;Value&gt;,
    pub id: Option&lt;String&gt;,
    pub metadata: Value,
    pub source: SourceValue,
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-06-15 21:02</div>
            <div class="timeline-body"><p>Could you add a notebook saved from the web interface of <code>jupyter notebook</code> and the same notebook after running it through <code>ruff --fix</code>, and then a test that checks that the string output of <code>ruff --fix</code> matches the saved fixed notebook? This way we can both see how the differences look in the repo and have a way to ensure that we don't accidentally change the json output. I'd compare the raw text and not the parsed json because that is what people will see in their git diffs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-17 11:46</div>
            <div class="timeline-body"><p>I would argue to go with my implementation because:</p>
<ul>
<li><p>Using flatten will give us the same problem as mentioned in (2). The order of the fields will probably not be alphabetical.</p>
<pre><code class="language-jsonc">{
  &quot;cell_type&quot;: &quot;code&quot;,  // coming from the tag
  // inner
  &quot;id&quot;: &quot;5e3ef98e-224c-450a-80e6-be442ad50907&quot;,
  &quot;metadata&quot;: {
    &quot;tags&quot;: []
  },
  &quot;outputs&quot;: [],
  &quot;source&quot;: [
    &quot;import contextlib\n&quot;,
    &quot;import random&quot;
  ],
  // cell type specific fields
  &quot;execution_count&quot;: 1
}
</code></pre>
</li>
<li><p>There are other keys which has the same problem as <code>execution_count</code></p>
<ul>
<li><code>outputs</code> is required only in code cells and not others</li>
<li><code>attachments</code> is required only in raw and markdown cells and not the code cell</li>
</ul>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-17 12:03</div>
            <div class="timeline-body"><p>Oh, I found the reason why the sorting wasn't working earlier. We've declared <code>serde_json</code> with <code>preserve_order</code> feature which will preserve the insertion order and that's why the sorting was not done alphabetically.</p>
<p>@konstin It seems like the feature was added during the initial PR to support Jupyter notebook (https://github.com/astral-sh/ruff/pull/3440/files#diff-2e9d962a08321605940b5a657135052fbcef87b5e360662bb527c96d9a615542). Any reason why this was added and can we remove it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-06-18 10:41</div>
            <div class="timeline-body"><blockquote>
<p>Using flatten will give us the same problem as mentioned in (2). The order of the fields will probably not be alphabetical.</p>
</blockquote>
<p>That's a pity, yours is clearly the better solution then</p>
<blockquote>
<p>It seems like the feature was added during the initial PR to support Jupyter notebook (https://github.com/astral-sh/ruff/pull/3440/files#diff-2e9d962a08321605940b5a657135052fbcef87b5e360662bb527c96d9a615542). Any reason why this was added and can we remove it?</p>
</blockquote>
<p>none beyond &quot;feels useful&quot;, feel free to remove it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-19 08:10</div>
            <div class="timeline-body"><h2>Update</h2>
<ul>
<li>Update <code>Cell</code> schema to use tags to have independent structure for each cell type. This is to accommodate fields specific to the cell type.</li>
<li>Sort the notebook fields in alphabetical order manually to allow any field order in the struct definition.</li>
<li>Add a test case to assert JSON consistency (raw JSON, not parsed)</li>
<li>Update output snapshots as the <code>preserve_order</code> feature got removed from <code>serde_json</code> dependency. The fields just got reordered.</li>
</ul>
<h3>That trailing newline...</h3>
<p>Well, the JSON string might contain a trailing newline which is handled by black: https://github.com/psf/black/blob/01b8d3d4095ebdb91d0d39012a517931625c63cb/src/black/<strong>init</strong>.py#L1024. Currently, we don't write the JSON string with a trailing newline. This needs to be handled.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @konstin removed by @dhruvmanila on 2023-06-19 08:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @dhruvmanila on 2023-06-19 08:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-19 08:16</div>
            <div class="timeline-body"><p>@konstin I believe the integration test for Jupyter notebook here can be removed?</p>
<p>https://github.com/astral-sh/ruff/blob/4079f982f5634816808fd88c530ae848e5695f80/crates/ruff_cli/src/commands/run.rs#L190-L278</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-06-19 11:31</div>
            <div class="timeline-body"><blockquote>
<p>I believe the integration test for Jupyter notebook here can be removed?</p>
</blockquote>
<p>yep feel free to remove it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>crates/ruff/src/jupyter/schema.rs</code>:80 on 2023-06-19 11:37</div>
            <div class="timeline-body"><p>Could you add a comment why we need this indirection, i.e. why <code>sort_alphabetically</code> gives a sorted result where default serialization doesn't?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2023-06-19 11:38</div>
            <div class="timeline-body"><p>The test looks good!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dhruvmanila on 2023-06-19 18:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2023-06-19 18:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-06-19 18:17</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:58:06 UTC
    </footer>
</body>
</html>
