<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improvements to documentation - astral-sh/ruff #12712</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Improvements to documentation</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/12712">#12712</a>
        opened by <a href="https://github.com/eth3lbert">@eth3lbert</a>
        on 2024-08-06 09:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/eth3lbert">@eth3lbert</a> on 2024-08-06 09:49</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>As we did in https://github.com/astral-sh/uv/pull/5397, we improve the copy behavior for documentation in this PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @eth3lbert on 2024-08-06 09:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-08-06 09:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>docs/requirements.txt</code>:1 on 2024-08-06 09:50</div>
            <div class="timeline-body"><p>I had an issue before updating the dependencies. Now these dependencies should be the same as in uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on 2024-08-06 10:07</div>
            <div class="timeline-body"><p>\cc @zanieb</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on 2024-08-06 10:10</div>
            <div class="timeline-body"><p>(I don't have access to mkdocs insider, so I don't change insider-related dependencies.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-08-06 10:21</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>‚úÖ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>encountered format errors</strong>. (no format changes; 1 project error)</p>
<details><summary><a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)</summary>
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to parse examples/Chat_finetuning_data_prep.ipynb:6:18:25: Unparenthesized generator expression cannot be used here
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_box.ipynb:13:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_confluence.ipynb:15:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_gmail.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_jira.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_notion.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sharepoint_doc.ipynb:28:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sharepoint_text.ipynb:28:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sql_database.ipynb:2:2:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_middleware_azure_function.ipynb:37:1:13: Simple statements must be separated by newlines or semicolons
</code></pre>
</p>
</details>

<h3>Formatter (preview)</h3>
<p>‚ÑπÔ∏è ecosystem check <strong>encountered format errors</strong>. (no format changes; 1 project error)</p>
<details><summary><a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to parse examples/Chat_finetuning_data_prep.ipynb:6:18:25: Unparenthesized generator expression cannot be used here
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_box.ipynb:13:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_confluence.ipynb:15:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_gmail.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_jira.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_notion.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sharepoint_doc.ipynb:28:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sharepoint_text.ipynb:28:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sql_database.ipynb:2:2:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_middleware_azure_function.ipynb:37:1:13: Simple statements must be separated by newlines or semicolons
</code></pre>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>README.md</code>:121 on 2024-08-06 19:43</div>
            <div class="timeline-body"><p>Does this change how github or pypi renders the readme?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/js/extra.js</code>:33 on 2024-08-06 19:45</div>
            <div class="timeline-body"><p>What's the motivation for using an observer? It seems pretty heavy to me to clean up some links. Considering that this code has to run on every scroll (with debounce). Could we instead run this once on page load?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-08-06 19:48</div>
            <div class="timeline-body"><p>Nice!</p>
<p>I think the updated dependencies are creating trouble in our documentation generation script (see CI).</p>
<p>Is it intentional that this PR updates markdown files that aren't hosted on the website?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-08-07 02:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>docs/requirements.txt</code>:1 on 2024-08-07 02:11</div>
            <div class="timeline-body"><p>Are there any changes which requires the dependency upgrade? If not, I'd prefer to keep the upgrades separate as they could require some changes in the config / docs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @MichaReiser on 2024-08-07 05:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-08-07 06:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>docs/requirements.txt</code>:1 on 2024-08-07 06:57</div>
            <div class="timeline-body"><p>This PR primarily introduce extra js for the copy button.</p>
<p>Without upgrading dependencies, if you try to start the server, you will encounter a <code>jinja2.exceptions.UndefinedError: 'mkdocs.config.config_options.ExtraScriptValue object' has no attribute 'endswith'</code> error.</p>
<p>This issue has been fixed in a newer version, as seen in the release notes: https://www.mkdocs.org/about/release-notes/#version-152-2023-08-02. Therefore, I believe it's best to also upgrade the dependencies to match the version used by uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-07 06:59</div>
            <div class="timeline-body"><p>I can look into the mkdocs failure once we answered all other questions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-08-07 07:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>README.md</code>:121 on 2024-08-07 07:02</div>
            <div class="timeline-body"><p>Good point!  This does change how it appears on github (and maybe pypi too), but readme on those platforms wouldn't benefit from the patch we introduced in this PR. So, the dollar sign will still be displayed, and we can't just ignore it when copying.</p>
<p>Therefore, we probably shouldn't include this change in the <code>README.md</code>, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>docs/js/extra.js</code>:33 on 2024-08-07 07:04</div>
            <div class="timeline-body"><p>Per https://github.com/astral-sh/uv/pull/5397#issuecomment-2260684897.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-08-07 07:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-08-07 07:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>README.md</code>:121 on 2024-08-07 07:11</div>
            <div class="timeline-body"><p>Yeah. I think we should only change the markdown files in the docs folder.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-08-07 07:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>README.md</code>:121 on 2024-08-07 07:12</div>
            <div class="timeline-body"><p>~Hmm, actually it seems we only want to apply the changes to files in the <code>crates/</code> or <code>docs/</code> directories?~</p>
<p>Yeah, we should just change files that are hosted on site.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @eth3lbert on 2024-08-07 07:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-08-07 07:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/requirements.txt</code>:1 on 2024-08-07 07:41</div>
            <div class="timeline-body"><p>Interesting. It seems that <code>uv</code>'s insider version is also fixed to <code>mkdocs==1.5.0</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-08-07 07:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>docs/requirements.txt</code>:1 on 2024-08-07 07:44</div>
            <div class="timeline-body"><p>I think it's <code>mkdocs&gt;=1.5.0</code> which would install <code>1.6.0</code> if possible: https://github.com/astral-sh/uv/blob/d0b16f90185ca7783d114306ade1626156ea6e29/docs/requirements.in#L2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-07 07:44</div>
            <div class="timeline-body"><p>I upgraded the insider version but it breaks some styling. For example, the tab headers no longer use the correct colors</p>
<p><img src="https://github.com/user-attachments/assets/ea5a199c-155f-411f-8cf0-1361d61f8837" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-07 07:49</div>
            <div class="timeline-body"><p>For some reason, I'm unable to scroll to the end of the navigation on localhost but it works fine in production. I yet have to verify if this is due to the upgrade</p>
<p><img src="https://github.com/user-attachments/assets/d40ffc9c-4467-4586-bfd0-2544d8674944" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-07 07:50</div>
            <div class="timeline-body"><p>I clicked through the page and most things look okay after the upgrade but there are some regression that needs fixing before we can ship this. I would also like @charliermarsh or @zanieb  to have a look at this. They'll know better why the insider version on uv is out of sync</p>
<p>This is the <code>requirements-insiders.txt</code> that i used</p>
<pre><code>PyYAML==6.0.1
black==23.10.0
mkdocs==1.6.0
mkdocs-material @ git+ssh://git@github.com/astral-sh/mkdocs-material-insiders.git@2fcb87fe9f685cae13e7161daf459177d2da08c0
mkdocs-redirects==1.2.1
mdformat==0.7.17
mdformat-mkdocs==3.0.0
mdformat-admon==2.0.6

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on 2024-08-07 08:07</div>
            <div class="timeline-body"><blockquote>
<p>I upgraded the insider version but it breaks some styling. For example, the tab headers no longer use the correct colors</p>
<p><img src="https://private-user-images.githubusercontent.com/1203881/355722201-ea5a199c-155f-411f-8cf0-1361d61f8837.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MjMwMTY5NjksIm5iZiI6MTcyMzAxNjY2OSwicGF0aCI6Ii8xMjAzODgxLzM1NTcyMjIwMS1lYTVhMTk5Yy0xNTVmLTQxMWYtOGNmMC0xMzYxZDYxZjg4MzcucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDgwNyUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDA4MDdUMDc0NDI5WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9Yzg1ZTM5MDE3NjAyMDBmMTliZDgwMTg1MjY4NGEyZTg1OGZkZGQwZTZjMzIxNzY1ZDUwZDY2YWRhNWYyN2M2MSZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ._DNInmOfQMzB9HD_Dbihcpc4KalKonOVwFtyUU3qVkc" alt="image" /></p>
</blockquote>
<p>Yeah, I could also see this happening locally without using the insider version.
It seems like it used to use <code>color: var(--md-accent-fg-color);</code> but now uses <code>color: var(--md-default-fg-color);</code> afterwards.</p>
<p>And this likely didn't happen with <code>mkdocs-material==9.1.18</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-08-09 15:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/requirements.txt</code>:1 on 2024-08-09 15:49</div>
            <div class="timeline-body"><p>Yes, but not for the insiders version? It uses the same commit as ruff. https://github.com/astral-sh/uv/blob/d0b16f90185ca7783d114306ade1626156ea6e29/docs/requirements-insiders.txt#L71-L76</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-08-09 16:19</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/requirements.txt</code>:1 on 2024-08-09 16:19</div>
            <div class="timeline-body"><p>What I understand is that this issue was fixed in 1.5.2. I would prefer if we upgraded to the latest <code>1.5.x</code> version instead of bumping the minor as part of this PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-08-09 16:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>docs/requirements.txt</code>:1 on 2024-08-09 16:24</div>
            <div class="timeline-body"><p>Fair enough!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-08-09 16:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/requirements.txt</code>:1 on 2024-08-09 16:25</div>
            <div class="timeline-body"><p>And I hope that it solves all regressions so that we can merge this PR :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-08-09 16:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>docs/requirements.txt</code>:1 on 2024-08-09 16:28</div>
            <div class="timeline-body"><p>Since I don't have access to the insider version, I can't help much if regressions occur.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>docs/js/extra.js</code>:28 on 2024-08-09 16:31</div>
            <div class="timeline-body"><p>Should this be removed before merging, or is it intentional?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-08-09 16:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on <code>docs/js/extra.js</code>:43 on 2024-08-09 16:31</div>
            <div class="timeline-body"><p>ditto.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eth3lbert">@eth3lbert</a> reviewed on 2024-08-09 16:31</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-08-09 16:37</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/js/extra.js</code>:28 on 2024-08-09 16:37</div>
            <div class="timeline-body"><p>Oops no. I'm sorry. That's absolutely not intentional</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-12 07:13</div>
            <div class="timeline-body"><p>The trick is to not upgrade mkdocs-material</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2024-08-12 07:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-08-12 07:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on 2024-08-12 07:20</div>
            <div class="timeline-body"><p>Indeed! I also found it https://github.com/astral-sh/ruff/pull/12712#issuecomment-2272874589.</p>
<p>I love the improvement you've introduced in the latest commit. üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-08-12 07:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 21:39:00 UTC
    </footer>
</body>
</html>
