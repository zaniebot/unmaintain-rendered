<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `Iterator` impl for `StringLike` parts - astral-sh/ruff #11399</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>Iterator</code> impl for <code>StringLike</code> parts</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11399">#11399</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2024-05-13 08:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR adds support to iterate over each part of a string-like expression.</p>
<p>This similar to the one in the formatter:</p>
<p>https://github.com/astral-sh/ruff/blob/128414cd9507adc45584189f025363793dd7cd94/crates/ruff_python_formatter/src/string/any.rs#L121-L125</p>
<p>Although I don't think it's a 1-1 replacement in the formatter because the one implemented in the formatter has another information for certain variants (as can be seen for <code>FString</code>).</p>
<p>The main motivation for this is to avoid duplication for rules which work only on the parts of the string and doesn't require any information from the parent node. Here, the parent node being the expression node which could be an implicitly concatenated string.</p>
<p>This PR also updates certain rule implementation to make use of this and avoids logic duplication.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @dhruvmanila on 2024-05-13 08:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-05-13 08:42</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>✅ ecosystem check detected no format changes.</p>
<h3>Formatter (preview)</h3>
<p>✅ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @dhruvmanila on 2024-05-13 08:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/ruff_linter/src/rules/flake8_quotes/rules/check_string_quotes.rs</code>:460 on 2024-05-13 13:49</div>
            <div class="timeline-body"><p>nit:</p>
<pre><code class="language-suggestion">    let ranges: Vec&lt;_&gt; = string_like
        .parts()
        .map(|part| part.range())
        .collect();
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2024-05-13 13:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dhruvmanila on 2024-05-13 15:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2024-05-13 15:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-05-13 15:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:04:18 UTC
    </footer>
</body>
</html>
