<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`airflow`] Move `AIR301` to `AIR002` - astral-sh/ruff #16978</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>airflow</code>] Move <code>AIR301</code> to <code>AIR002</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/16978">#16978</a>
        opened by <a href="https://github.com/Lee-W">@Lee-W</a>
        on 2025-03-26 08:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a></div>
            <div class="timeline-body"><!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<h2>Summary</h2>
<!-- What's the purpose of the change? What does it do, and why? -->

<p>Unlike other AIR3XX rules, this best practice can be applied to Airflow 1 and Airflow 2 as well. Thus, we think it might make sense for use to move it to AIR002 so that the first number of the error align to Airflow version as possible to reduce confusion</p>
<h2>Test Plan</h2>
<!-- How was it tested? -->

<p>the test fixture has been updated</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-03-26 09:00</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+113 -113 violations, +0 -0 fixes in 1 projects; 54 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+113 -113 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/src/airflow/models/dag.py#L301'>airflow-core/src/airflow/models/dag.py:301:16:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/src/airflow/models/dag.py#L301'>airflow-core/src/airflow/models/dag.py:301:16:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/integration/executors/test_celery_executor.py#L240'>airflow-core/tests/integration/executors/test_celery_executor.py:240:21:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/integration/executors/test_celery_executor.py#L240'>airflow-core/tests/integration/executors/test_celery_executor.py:240:21:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/integration/executors/test_celery_executor.py#L276'>airflow-core/tests/integration/executors/test_celery_executor.py:276:21:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/integration/executors/test_celery_executor.py#L276'>airflow-core/tests/integration/executors/test_celery_executor.py:276:21:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_collection.py#L283'>airflow-core/tests/unit/dag_processing/test_collection.py:283:15:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_collection.py#L283'>airflow-core/tests/unit/dag_processing/test_collection.py:283:15:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_collection.py#L369'>airflow-core/tests/unit/dag_processing/test_collection.py:369:15:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_collection.py#L369'>airflow-core/tests/unit/dag_processing/test_collection.py:369:15:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_collection.py#L387'>airflow-core/tests/unit/dag_processing/test_collection.py:387:15:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_collection.py#L387'>airflow-core/tests/unit/dag_processing/test_collection.py:387:15:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_collection.py#L481'>airflow-core/tests/unit/dag_processing/test_collection.py:481:15:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_collection.py#L481'>airflow-core/tests/unit/dag_processing/test_collection.py:481:15:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L141'>airflow-core/tests/unit/dag_processing/test_processor.py:141:18:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L141'>airflow-core/tests/unit/dag_processing/test_processor.py:141:18:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L167'>airflow-core/tests/unit/dag_processing/test_processor.py:167:18:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L167'>airflow-core/tests/unit/dag_processing/test_processor.py:167:18:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L191'>airflow-core/tests/unit/dag_processing/test_processor.py:191:18:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L191'>airflow-core/tests/unit/dag_processing/test_processor.py:191:18:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L218'>airflow-core/tests/unit/dag_processing/test_processor.py:218:18:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L218'>airflow-core/tests/unit/dag_processing/test_processor.py:218:18:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L305'>airflow-core/tests/unit/dag_processing/test_processor.py:305:11:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L305'>airflow-core/tests/unit/dag_processing/test_processor.py:305:11:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L340'>airflow-core/tests/unit/dag_processing/test_processor.py:340:10:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/dag_processing/test_processor.py#L340'>airflow-core/tests/unit/dag_processing/test_processor.py:340:10:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/jobs/test_scheduler_job.py#L6261'>airflow-core/tests/unit/jobs/test_scheduler_job.py:6261:16:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/jobs/test_scheduler_job.py#L6261'>airflow-core/tests/unit/jobs/test_scheduler_job.py:6261:16:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/models/test_dag.py#L2180'>airflow-core/tests/unit/models/test_dag.py:2180:15:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/models/test_dag.py#L2180'>airflow-core/tests/unit/models/test_dag.py:2180:15:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/models/test_dag.py#L2189'>airflow-core/tests/unit/models/test_dag.py:2189:15:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/models/test_dag.py#L2189'>airflow-core/tests/unit/models/test_dag.py:2189:15:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/models/test_dag.py#L2879'>airflow-core/tests/unit/models/test_dag.py:2879:10:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/models/test_dag.py#L2879'>airflow-core/tests/unit/models/test_dag.py:2879:10:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/models/test_dagbag.py#L934'>airflow-core/tests/unit/models/test_dagbag.py:934:14:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/models/test_dagbag.py#L934'>airflow-core/tests/unit/models/test_dagbag.py:934:14:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/serialization/test_serialized_objects.py#L143'>airflow-core/tests/unit/serialization/test_serialized_objects.py:143:18:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/serialization/test_serialized_objects.py#L143'>airflow-core/tests/unit/serialization/test_serialized_objects.py:143:18:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/serialization/test_serialized_objects.py#L238'>airflow-core/tests/unit/serialization/test_serialized_objects.py:238:21:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/airflow-core/tests/unit/serialization/test_serialized_objects.py#L238'>airflow-core/tests/unit/serialization/test_serialized_objects.py:238:21:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/devel-common/src/tests_common/pytest_plugin.py#L1929'>devel-common/src/tests_common/pytest_plugin.py:1929:19:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/devel-common/src/tests_common/pytest_plugin.py#L1929'>devel-common/src/tests_common/pytest_plugin.py:1929:19:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/devel-common/src/tests_common/pytest_plugin.py#L2054'>devel-common/src/tests_common/pytest_plugin.py:2054:19:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/devel-common/src/tests_common/pytest_plugin.py#L2054'>devel-common/src/tests_common/pytest_plugin.py:2054:19:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/providers/apache/kafka/tests/system/apache/kafka/example_dag_event_listener.py#L85'>providers/apache/kafka/tests/system/apache/kafka/example_dag_event_listener.py:85:6:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/providers/apache/kafka/tests/system/apache/kafka/example_dag_event_listener.py#L85'>providers/apache/kafka/tests/system/apache/kafka/example_dag_event_listener.py:85:6:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/providers/arangodb/src/airflow/providers/arangodb/example_dags/example_arangodb.py#L25'>providers/arangodb/src/airflow/providers/arangodb/example_dags/example_arangodb.py:25:7:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/providers/arangodb/src/airflow/providers/arangodb/example_dags/example_arangodb.py#L25'>providers/arangodb/src/airflow/providers/arangodb/example_dags/example_arangodb.py:25:7:</a> AIR301 DAG should have an explicit `schedule` argument
+ <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/providers/asana/tests/system/asana/example_asana.py#L49'>providers/asana/tests/system/asana/example_asana.py:49:6:</a> AIR002 DAG should have an explicit `schedule` argument
- <a href='https://github.com/apache/airflow/blob/4b06e9a60dec7787feb01711881ed4562fbb1ec3/providers/asana/tests/system/asana/example_asana.py#L49'>providers/asana/tests/system/asana/example_asana.py:49:6:</a> AIR301 DAG should have an explicit `schedule` argument
... 176 additional changes omitted for project
</pre>

</p>
</details>
<details><summary>Changes by rule (2 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| AIR002 | 113 | 113 | 0 | 0 | 0 |
| AIR301 | 113 | 0 | 113 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-03-26 16:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @ntBre on 2025-03-26 16:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/uranusjr">@uranusjr</a> on 2025-03-27 06:06</div>
            <div class="timeline-body"><p>Arguably this even applies to 1.x? Although nobody in their right minds should care about 1.x in 2025. What I’m trying to say is, maybe this makes even more sense as AIR002?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-03-27 06:07</div>
            <div class="timeline-body"><blockquote>
<p>Arguably this even applies to 1.x? Although nobody in their right minds should care about 1.x in 2025. What I’m trying to say is, maybe this makes even more sense as AIR002?</p>
</blockquote>
<p>I thought we're using <code>schedule_interval</code> in 1.x?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-03-27 06:08</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>Arguably this even applies to 1.x? Although nobody in their right minds should care about 1.x in 2025. What I’m trying to say is, maybe this makes even more sense as AIR002?</p>
</blockquote>
<p>I thought we're using <code>schedule_interval</code> in 1.x?</p>
</blockquote>
<p>oh, looking into the code again. yep. <code>schedule_interval</code> is checked as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lee-W">@Lee-W</a> on 2025-03-27 06:10</div>
            <div class="timeline-body"><p>probably need to tweak the description a bit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[airflow] move AIR301 to AIR201" to "[airflow] move AIR301 to AIR102" by @Lee-W on 2025-03-27 13:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[airflow] move AIR301 to AIR102" to "[airflow] move AIR301 to AIR002" by @Lee-W on 2025-03-27 13:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/dag_schedule_argument.rs</code>:15 on 2025-03-31 20:30</div>
            <div class="timeline-body"><p>&quot;The default value of the <code>schedule</code> parameter on ...&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>crates/ruff_linter/src/rules/airflow/rules/dag_schedule_argument.rs</code>:17 on 2025-03-31 20:31</div>
            <div class="timeline-body"><p>&quot;Airflow 3 changed the default value to <code>None</code>, ...&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> approved on 2025-03-31 20:35</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[airflow] move AIR301 to AIR002" to "[`airflow`] Move `AIR301` to `AIR002`" by @dhruvmanila on 2025-03-31 20:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/dag_schedule_argument.rs</code>:15 on 2025-04-01 03:03</div>
            <div class="timeline-body"><p>Updated. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/Lee-W">@Lee-W</a> on <code>crates/ruff_linter/src/rules/airflow/rules/dag_schedule_argument.rs</code>:17 on 2025-04-01 03:03</div>
            <div class="timeline-body"><p>Updated. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lee-W">@Lee-W</a> reviewed on 2025-04-01 03:03</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dhruvmanila on 2025-04-02 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2025-04-02 15:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:11:00 UTC
    </footer>
</body>
</html>
