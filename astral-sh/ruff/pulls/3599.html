<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8`]: Implement `flake8-variables-names` - astral-sh/ruff #3599</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8</code>]: Implement <code>flake8-variables-names</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/pull/3599">#3599</a>
        opened by <a href="https://github.com/latonis">@latonis</a>
        on 2023-03-18 18:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/latonis">@latonis</a> on 2023-03-18 18:27</div>
            <div class="timeline-body"><p>Implementing <a href="https://github.com/best-doctor/flake8-variables-names">flake8-variables-names</a></p>
<p>Referenced and requested in #3463</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/latonis">@latonis</a> on 2023-03-18 18:52</div>
            <div class="timeline-body"><p>~~Adding the <code>use-varnames-strict-mode</code> setting currently. Is there a convention for how the options should be defined or can this be ported over directly?~~</p>
<p>Ended up adding the config option as <code>use_varnames_strict_mode</code> and keeping it to as close as original as possible.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[`flake8`]: flake8-variable-names core functionality implemented" to "[`flake8`]: flake8-variables-names core functionality implemented" by @latonis on 2023-03-18 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[`flake8`]: flake8-variables-names core functionality implemented" to "[`flake8`]: Implement `flake8-variables-names`" by @latonis on 2023-03-18 21:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-03-19 03:40</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/registry.rs</code>:761 on 2023-03-19 03:40</div>
            <div class="timeline-body"><p>Nit: I think these should be <code>VNE</code> to match the upstream plugin -- or was this an intentional deviation?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/flake8_variables_names/settings.rs</code>:22 on 2023-03-19 03:44</div>
            <div class="timeline-body"><p>We can probably just shorten this to <code>strict</code>, since unlike in Flake8, this is scoped under the plugin settings, which makes it clear that it applies to <code>flake8-variable-names</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-03-19 03:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/latonis">@latonis</a> reviewed on 2023-03-19 03:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/latonis">@latonis</a> on <code>crates/ruff/src/registry.rs</code>:761 on 2023-03-19 03:44</div>
            <div class="timeline-body"><p>I originally had that but changed it due to the few above not having E in their prefix, but makes sense to keep it to the original ðŸ™‚</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-03-19 03:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rules/flake8_variables_names/settings.rs</code>:21 on 2023-03-19 03:44</div>
            <div class="timeline-body"><p>Can we add some notes on the effect that strict <code>True</code> vs. <code>False</code> has on the checks?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-03-19 03:51</div>
            <div class="timeline-body"><p>This is really good work. My only hesitation here is that this strikes me as a very strict set of rules (e.g., I don't think I'd enable these on my own projects). But, we're yet to define clear criteria for rule and plugin inclusion, and our current approach has generally been not to avoid injecting too much subjectivity into the plugins we choose to incorporate.</p>
<p>For reference, the factors we'd laid out in the past were: (1) some evidence of usefulness / popularity, (2) non-overlapping behavior with existing plugins, (3) reasonably accurate (few false positives and negatives), and (4) complexity doesn't outweigh its usefulness. Though we don't have formal criteria yet. So, I'm open to incorporating. The main &quot;cost&quot; is that we'll likely surface a bunch of violations to those with <code>--select ALL</code> enabled, and they'll be forced to disable or fix.</p>
<p>@MichaReiser is thinking about some of these questions, so \cc'ing him :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/latonis">@latonis</a> on 2023-03-19 15:03</div>
            <div class="timeline-body"><blockquote>
<p>This is really good work. My only hesitation here is that this strikes me as a very strict set of rules (e.g., I don't think I'd enable these on my own projects). But, we're yet to define clear criteria for rule and plugin inclusion, and our current approach has generally been not to avoid injecting too much subjectivity into the plugins we choose to incorporate.</p>
<p>For reference, the factors we'd laid out in the past were: (1) some evidence of usefulness / popularity, (2) non-overlapping behavior with existing plugins, (3) reasonably accurate (few false positives and negatives), and (4) complexity doesn't outweigh its usefulness. Though we don't have formal criteria yet. So, I'm open to incorporating. The main &quot;cost&quot; is that we'll likely surface a bunch of violations to those with <code>--select ALL</code> enabled, and they'll be forced to disable or fix.</p>
<p>@MichaReiser is thinking about some of these questions, so \cc'ing him :)</p>
</blockquote>
<p>Hey Charlie, absolutely understand the concern for how strict it is, I had the same concern after running it and seeing the ecosystem results. No worries at all if this one is too strict and we don't want to include it at this time (or ever). I'll defer to you if you'd like to keep this open or close it, but I'll update the following requests above and implement the changes requested just in-case it is merged in at some point. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/latonis">@latonis</a> on <code>crates/ruff/src/rules/flake8_variables_names/settings.rs</code>:22 on 2023-03-19 15:04</div>
            <div class="timeline-body"><p>Makes sense to me!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/latonis">@latonis</a> reviewed on 2023-03-19 15:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/latonis">@latonis</a> reviewed on 2023-03-19 15:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/latonis">@latonis</a> on <code>crates/ruff/src/rules/flake8_variables_names/settings.rs</code>:21 on 2023-03-19 15:18</div>
            <div class="timeline-body"><p>definitely; it has been updated</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-03-28 01:41</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Benchmark</h3>
<h4>Linux</h4>
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.00     20.4Â±0.55ms  2041.8 KB/sec    1.01     20.5Â±0.80ms  2029.4 KB/sec
linter/all-rules/numpy/ctypeslib.py        1.02      5.0Â±0.18ms     3.3 MB/sec    1.00      4.9Â±0.16ms     3.4 MB/sec
linter/all-rules/numpy/globals.py          1.00   634.3Â±34.00Âµs     4.7 MB/sec    1.00   632.3Â±24.19Âµs     4.7 MB/sec
linter/all-rules/pydantic/types.py         1.03      8.8Â±0.38ms     2.9 MB/sec    1.00      8.6Â±0.28ms     3.0 MB/sec
linter/default-rules/large/dataset.py      1.00     10.7Â±0.40ms     3.8 MB/sec    1.00     10.6Â±0.34ms     3.8 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00      2.2Â±0.11ms     7.5 MB/sec    1.03      2.3Â±0.07ms     7.2 MB/sec
linter/default-rules/numpy/globals.py      1.00   265.8Â±17.16Âµs    11.1 MB/sec    1.05   280.3Â±13.96Âµs    10.5 MB/sec
linter/default-rules/pydantic/types.py     1.00      4.8Â±0.24ms     5.4 MB/sec    1.03      4.9Â±0.19ms     5.2 MB/sec
</code></pre>
<h4>Windows</h4>
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.01     13.4Â±0.03ms     3.0 MB/sec    1.00     13.3Â±0.03ms     3.1 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      3.3Â±0.01ms     5.0 MB/sec    1.00      3.3Â±0.01ms     5.0 MB/sec
linter/all-rules/numpy/globals.py          1.01   348.6Â±13.33Âµs     8.5 MB/sec    1.00    346.0Â±2.25Âµs     8.5 MB/sec
linter/all-rules/pydantic/types.py         1.00      5.6Â±0.02ms     4.6 MB/sec    1.01      5.6Â±0.03ms     4.6 MB/sec
linter/default-rules/large/dataset.py      1.01      7.0Â±0.02ms     5.8 MB/sec    1.00      6.9Â±0.02ms     5.9 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00   1450.4Â±6.83Âµs    11.5 MB/sec    1.00   1451.7Â±4.59Âµs    11.5 MB/sec
linter/default-rules/numpy/globals.py      1.00    151.9Â±1.16Âµs    19.4 MB/sec    1.01    153.4Â±3.42Âµs    19.2 MB/sec
linter/default-rules/pydantic/types.py     1.00      3.1Â±0.01ms     8.2 MB/sec    1.00      3.1Â±0.02ms     8.2 MB/sec
</code></pre>
<!-- thollander/actions-comment-pull-request "PR Check Results" -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/flake8_variables_names/rules/non_descript_variable_name.rs</code>:49 on 2023-03-28 09:59</div>
            <div class="timeline-body"><p>Nit: use denylist instead of blocklist (more inclusive)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/rules/flake8_variables_names/rules/single_letter_variable_name.rs</code>:35 on 2023-03-28 10:01</div>
            <div class="timeline-body"><p>Nit: you can write this with a match</p>
<pre><code class="language-suggestion">        &amp;&amp; (!matches!(name, &quot;i&quot;, &quot;_&quot;, &quot;T&quot;) || (strict_mode &amp;&amp; !matches!(name, &quot;_&quot;, &quot;T)))
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2023-03-28 10:02</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/latonis">@latonis</a> reviewed on 2023-03-30 13:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/latonis">@latonis</a> on <code>crates/ruff/src/rules/flake8_variables_names/rules/single_letter_variable_name.rs</code>:35 on 2023-03-30 13:06</div>
            <div class="timeline-body"><blockquote>
<p>Nit: you can write this with a match</p>
</blockquote>
<pre><code>no rules expected the token `&quot;_&quot;`                        
  --&gt; crates/ruff/src/rules/flake8_variables_names/rules/single_
letter_variable_name.rs:33:34                                   
   |                                                            
33 |         &amp;&amp; (!matches!(name, &quot;i&quot;, &quot;_&quot;, &quot;T&quot;) || (strict_mode 
&amp;&amp; !matches!(name, &quot;_&quot;, &quot;T&quot;)))                                     |                                  ^^^ no rules expected this token in macro call                                               |                                                               = note: while trying to match sequence end  
</code></pre>
<p>Currently getting this when implementing as a match statement</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/latonis">@latonis</a> on <code>crates/ruff/src/rules/flake8_variables_names/rules/non_descript_variable_name.rs</code>:49 on 2023-03-30 13:14</div>
            <div class="timeline-body"><p>Implemented :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/latonis">@latonis</a> reviewed on 2023-03-30 13:14</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/latonis">@latonis</a> reviewed on 2023-03-30 13:17</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/latonis">@latonis</a> on <code>crates/ruff/src/rules/flake8_variables_names/rules/single_letter_variable_name.rs</code>:35 on 2023-03-30 13:17</div>
            <div class="timeline-body"><p>Ah I see what I did incorrectly</p>
<p>needs to be</p>
<pre><code>!matches!(name, &quot;i&quot; | &quot;_&quot; | &quot;T&quot;) 
</code></pre>
<p>not</p>
<pre><code>matches!(name, &quot;i&quot;, &quot;_&quot;, &quot;T&quot;) 
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @latonis on 2023-03-30 13:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/latonis">@latonis</a> on 2023-04-01 00:53</div>
            <div class="timeline-body"><p>pre-commit failed due to my own rules, not sure if that is the intended result? @charliermarsh :smile_cat:
<img src="https://user-images.githubusercontent.com/6127011/229257580-5eea098a-af97-499e-8242-cb2b29e8d64c.png" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @latonis on 2023-06-14 20:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-06-14 20:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-14 20:15</div>
            <div class="timeline-body"><p>Sorry for letting this sit @latonis, and for not giving clearer feedback prior to working on the issue. There is actually a chance we re-open this in the future, since it is a popular plugin... But I will take ownership of rebasing etc. if that time comes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/latonis">@latonis</a> on 2023-06-14 20:22</div>
            <div class="timeline-body"><p>No worries at all @charliermarsh, I closed per our previous conversations about not being sure about too strict of rules being included when running all of them and that sort.</p>
<p>Happy to re-do the work if the time comes, I just figured with the amount of improvements ruff has had internally it would probably be easier to re-implement the logic rather than try to re-base it ðŸ™‚</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch restored on 2023-06-14 20:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 03:44:07 UTC
    </footer>
</body>
</html>
