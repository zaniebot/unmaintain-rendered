<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix detection of changed files in CI - astral-sh/ruff #9035</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fix detection of changed files in CI</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/9035">#9035</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2023-12-07 02:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>These were literals instead of expressions... and were consequently not evaluated.</p>
<p>Fixes bug from #8225</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by <a href="https://github.com/zanieb">@zanieb</a> on 2023-12-07 02:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-12-07 03:04</div>
            <div class="timeline-body"><p>I&#x27;m not sure if that&#x27;s the root cause because the checks did ran in the last few days and the <a href="https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions#jobsjob_idif"><code>if</code></a> documentation mentions that omitting the <code>${{ }}</code> is okay except when the expression starts with <code>!</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-12-07 03:08</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>‚úÖ ecosystem check detected no linter changes.</p>
Linter (preview)
<p>‚úÖ ecosystem check detected no linter changes.</p>
Formatter (stable)
<p>‚úÖ ecosystem check detected no format changes.</p>
Formatter (preview)
<p>‚úÖ ecosystem check detected no format changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2023-12-07 03:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-12-07 03:13</div>
            <div class="timeline-body"><p>@MichaReiser they didn&#x27;t run on this branch before the change, but did after ü§∑‚Äç‚ôÄÔ∏è perhaps a change on GitHub&#x27;s end</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-12-07 03:14</div>
            <div class="timeline-body"><p>Also, I ran the workflow with debug logs and the &quot;Determine changes&quot; workflow is not at fault</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/zanieb">@zanieb</a> on 2023-12-07 03:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2023-12-07 03:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-12-07 03:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-12-07 03:16</div>
            <div class="timeline-body"><p>Hm but it <em>does</em> seem to be at fault over in the other branch https://github.com/astral-sh/ruff/actions/runs/7122120523/job/19395730196</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-12-07 03:17</div>
            <div class="timeline-body"><pre><code> M	Cargo.toml
  ##[debug]All diff files: {&quot;A&quot;:[],&quot;C&quot;:[],&quot;D&quot;:[],&quot;M&quot;:[&quot;Cargo.toml&quot;],&quot;R&quot;:[],&quot;T&quot;:[],&quot;U&quot;:[],&quot;X&quot;:[]}
  All Done!
  ::endgroup::
::group::changed-files-yaml-linter
changed-files-yaml-linter
::group::changed-files-yaml-formatter
changed-files-yaml-formatter
::group::changed-files-yaml-code
changed-files-yaml-code
  ##[debug]All filtered diff files for code: {&quot;A&quot;:[],&quot;C&quot;:[],&quot;D&quot;:[],&quot;M&quot;:[],&quot;R&quot;:[],&quot;T&quot;:[],&quot;U&quot;:[],&quot;X&quot;:[]}
  ##[debug]Dir names include file patterns: []
  ##[debug]Added files: {&quot;paths&quot;:&quot;&quot;,&quot;count&quot;:&quot;0&quot;}
  ##[debug]Dir names include file patterns: []
  ##[debug]Copied files: {&quot;paths&quot;:&quot;&quot;,&quot;count&quot;:&quot;0&quot;}
  ##[debug]Dir names include file patterns: []
  ##[debug]Modified files: {&quot;paths&quot;:&quot;&quot;,&quot;count&quot;:&quot;0&quot;}
  ##[debug]Dir names include file patterns: []
  ##[debug]Renamed files: {&quot;paths&quot;:&quot;&quot;,&quot;count&quot;:&quot;0&quot;}
  ##[debug]Dir names include file patterns: []
  ##[debug]Type changed files: {&quot;paths&quot;:&quot;&quot;,&quot;count&quot;:&quot;0&quot;}
  ##[debug]Dir names include file patterns: []
  ##[debug]Unmerged files: {&quot;paths&quot;:&quot;&quot;,&quot;count&quot;:&quot;0&quot;}
  ##[debug]Dir names include file patterns: []
  ##[debug]Unknown files: {&quot;paths&quot;:&quot;&quot;,&quot;count&quot;:&quot;0&quot;}
  ##[debug]Dir names include file patterns: []
  ##[debug]All changed and modified files: {&quot;paths&quot;:&quot;&quot;,&quot;count&quot;:&quot;0&quot;}
  ##[debug]Dir names include file patterns: []
  ##[debug]All changed files: {&quot;paths&quot;:&quot;&quot;,&quot;count&quot;:&quot;0&quot;}
  ##[debug]Dir names include file patterns: []
  ##[debug]All other changed files: {&quot;paths&quot;:&quot;Cargo.toml&quot;,&quot;count&quot;:&quot;1&quot;}
  ##[debug]other_changed_files: [&quot;Cargo.toml&quot;]
  ##[debug]Dir names include file patterns: []
  ##[debug]All modified files: {&quot;paths&quot;:&quot;&quot;,&quot;count&quot;:&quot;0&quot;}
  ##[debug]Dir names include file patterns: []
  ##[debug]other_modified_files: [&quot;Cargo.toml&quot;]
  ##[debug]Dir names include file patterns: []
  ##[debug]Deleted files: {&quot;paths&quot;:&quot;&quot;,&quot;count&quot;:&quot;0&quot;}
  ##[debug]Dir names include file patterns: []
  ##[debug]other_deleted_files: []
  ..
  ##[debug]Set output code_any_changed = false
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-12-07 03:19</div>
            <div class="timeline-body"><p>~Ah it&#x27;s because the <code>M Cargo.toml</code> gets included in the <em>linter</em> changes~</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2023-12-07 14:18</div>
            <div class="timeline-body"><p>Now that the root cause has been fixed you may want to remove the <code>${{ }}</code> again to look idiomatic</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-12-07 14:52</div>
            <div class="timeline-body"><p>Eh we use <code>${{ }}</code> for every other <code>if</code> statement in that file. I&#x27;d prefer to be consistent.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:59:51 UTC
    </footer>
</body>
</html>
