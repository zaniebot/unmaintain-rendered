```yaml
number: 8275
title: "Preserve trailing semicolons when using `fmt: off`"
type: pull_request
state: merged
author: MichaReiser
labels:
  - formatter
assignees: []
merged: true
base: main
head: fmt-off-preserve-semicolon
created_at: 2023-10-27T08:58:05Z
updated_at: 2023-10-30T00:22:35Z
url: https://github.com/astral-sh/ruff/pull/8275
synced_at: 2026-01-10T23:40:55Z
```

# Preserve trailing semicolons when using `fmt: off`

---

_Pull request opened by @MichaReiser on 2023-10-27 08:58_

## Summary

Preserve the semicolons terminating statements when using `fmt: off`

## Test Plan

Added test. Verified that the similarity index is unchanged.


---

_Comment by @MichaReiser on 2023-10-27 08:58_

Current dependencies on/for this PR:
* main
  * **PR #8273** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8273" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
    * **PR #8275** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8275" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a>  üëà

This comment was auto-generated by [Graphite](https://app.graphite.dev/github/pr/astral-sh/ruff/8275?utm_source=stack-comment).

---

_Label `formatter` added by @MichaReiser on 2023-10-27 08:59_

---

_Review requested from @konstin by @MichaReiser on 2023-10-27 08:59_

---

_Review request for @konstin removed by @MichaReiser on 2023-10-27 09:00_

---

_Review requested from @charliermarsh by @MichaReiser on 2023-10-27 09:00_

---

_Review requested from @konstin by @MichaReiser on 2023-10-27 09:00_

---

_@konstin approved on 2023-10-27 09:15_

---

_@charliermarsh approved on 2023-10-27 12:01_

---

_Comment by @github-actions[bot] on 2023-10-29 23:58_

## PR Check Results
### Ecosystem
‚ÑπÔ∏è ecosystem check **detected format changes**. (+12 -9 lines in 7 files in 41 projects)

<details><summary><a href="https://github.com/rotki/rotki">rotki/rotki</a> (+12 -9 lines across 7 files)</summary>
<p>
<pre>ruff format</pre>
</p>
<p>

<a href='https://github.com/rotki/rotki/blob/a013e976fd650a78aa7786e69eb0e5e6a1e4e859/rotkehlchen/chain/ethereum/defi/protocols.py#L2'>rotkehlchen/chain/ethereum/defi/protocols.py~L2</a>
```diff
 
 This module handles the defi protocol list, stored in DEFI_PROTOCOLS.
 """
+
 from typing import NamedTuple
 
 

```
<a href='https://github.com/rotki/rotki/blob/a013e976fd650a78aa7786e69eb0e5e6a1e4e859/rotkehlchen/chain/ethereum/interfaces/ammswap/ammswap.py#L7'>rotkehlchen/chain/ethereum/interfaces/ammswap/ammswap.py~L7</a>
```diff
 - Uniswap Module
 - Sushiswap Module
 """
+
 import logging
 from collections import defaultdict
 from typing import TYPE_CHECKING, Optional, Union

```
<a href='https://github.com/rotki/rotki/blob/a013e976fd650a78aa7786e69eb0e5e6a1e4e859/rotkehlchen/globaldb/cache.py#L1'>rotkehlchen/globaldb/cache.py~L1</a>
```diff
 """Functions dealing with the general_cache table of the Global DB"""
+
 from collections.abc import Iterable
 from typing import Optional, Union
 

```
<a href='https://github.com/rotki/rotki/blob/a013e976fd650a78aa7786e69eb0e5e6a1e4e859/rotkehlchen/tests/exchanges/test_coinbasepro.py#L7'>rotkehlchen/tests/exchanges/test_coinbasepro.py~L7</a>
```diff
 TODO: Make some mock tests at some point
 """
 
-
 import warnings as test_warnings
 from enum import Enum
 from typing import Literal

```
<a href='https://github.com/rotki/rotki/blob/a013e976fd650a78aa7786e69eb0e5e6a1e4e859/tools/assets_database/main.py#L1'>tools/assets_database/main.py~L1</a>
```diff
 """Tool to pull an assets database from Github, and apply updates to it"""
+
 from gevent import monkey
 
 monkey.patch_all()  # isort:skip

```
<a href='https://github.com/rotki/rotki/blob/a013e976fd650a78aa7786e69eb0e5e6a1e4e859/tools/pyinstaller_hooks/pre_find_module_path/hook-distutils.py#L23'>tools/pyinstaller_hooks/pre_find_module_path/hook-distutils.py~L23</a>
```diff
 the latter is intended for use _only_ from within venvs.
 """
 
-
 import distutils
 import os
 

```
<a href='https://github.com/rotki/rotki/blob/a013e976fd650a78aa7786e69eb0e5e6a1e4e859/tools/scripts/pylint_useless_suppression.py#L12'>tools/scripts/pylint_useless_suppression.py~L12</a>
```diff
 
 We should probably open bug reports to pylint for all of these at some point.
 """
+
 import io
 import re
 import subprocess
```

</p>
</details>



---

_Merged by @MichaReiser on 2023-10-30 00:22_

---

_Closed by @MichaReiser on 2023-10-30 00:22_

---

_Branch deleted on 2023-10-30 00:22_

---
