<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fix python module invocation - astral-sh/ruff #2563</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fix python module invocation</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/2563">#2563</a>
        opened by <a href="https://github.com/trottomv">@trottomv</a>
        on 2023-02-04 08:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/trottomv">@trottomv</a></div>
            <div class="timeline-body"><p>This changes fix the #2520 Issue</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Fix python module invocation #2520" to "Fix python module invocation" by @trottomv on 2023-02-04 09:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-02-04 13:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-04 13:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-02-04 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/andersk">@andersk</a> on <code>python/ruff/__main__.py</code>:7 on 2023-02-04 21:13</div>
            <div class="timeline-body"><p>I expect this is wrong on Windows. The right way to get the <code>--user</code> scripts path is <code>sysconfig.get_path(&quot;scripts&quot;, scheme=sysconfig.get_preferred_scheme(&quot;user&quot;))</code>—but that requires Python ≥ 3.10, so we’ll need to figure out the right translation for older Python.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/andersk">@andersk</a> on <code>python/ruff/__main__.py</code>:8 on 2023-02-04 21:13</div>
            <div class="timeline-body"><p>We shouldn’t prefer a version from <code>pip install --user</code> <em>over</em> a currently active virtualenv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/andersk">@andersk</a> on <code>python/ruff/__main__.py</code>:24 on 2023-02-04 21:13</div>
            <div class="timeline-body"><p>This ends up raising <code>FileNotFoundError(FileNotFoundError(ruff_path))</code>. Why catch and rewrap the exception at all?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/andersk">@andersk</a> reviewed on 2023-02-04 21:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-02-04 21:27</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>python/ruff/__main__.py</code>:7 on 2023-02-04 21:27</div>
            <div class="timeline-body"><p>Can you think of any other projects that've had to solve this problem?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/andersk">@andersk</a> on <code>python/ruff/__main__.py</code>:15 on 2023-02-04 21:47</div>
            <div class="timeline-body"><p>This doesn’t work at all on Windows, where the binary has a <code>.exe</code> extension (which had been automatically added by <code>os.spawnv</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/andersk">@andersk</a> reviewed on 2023-02-04 21:47</div>
            <div class="timeline-body"><p>Opened #2574 to fix all these issues.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:56:01 UTC
    </footer>
</body>
</html>
