<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Use annotated parameters as type context - astral-sh/ruff #20635</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Use annotated parameters as type context</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/20635">#20635</a>
        opened by <a href="https://github.com/ibraheemdev">@ibraheemdev</a>
        on 2025-09-29 18:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a></div>
            <div class="timeline-body">Summary
<p>Use the type annotation of function parameters as bidirectional type context when inferring the argument expression. For example, the following example now type-checks:</p>
<pre><code>class TD(TypedDict):
    x: int

def f(_: TD): ...

f({ &quot;x&quot;: 1 })
</code></pre>
<p>Part of <a href="https://github.com/astral-sh/ty/issues/168">astral-sh/ty#168</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-09-29 18:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-09-29 18:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/sharkdp">@sharkdp</a> by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-09-29 18:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-09-29 18:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-09-29 18:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-09-29 18:08</div>
            <div class="timeline-body">

Diagnostic diff on <a href="https://github.com/python/typing/tree/d4f39b27a4a47aac8b6d4019e1b0b5b3156fabdc/conformance">typing conformance tests</a>

Changes were detected when running ty on typing conformance tests

<pre><code>--- old-output.txt	2025-10-03 20:48:40.319496259 +0000
+++ new-output.txt	2025-10-03 20:48:43.574517278 +0000
@@ -1,6 +1,6 @@
 WARN ty is pre-release software and not ready for production use. Expect to encounter bugs, missing features, and fatal errors.
 fatal[panic] Panicked at /home/runner/.cargo/git/checkouts/salsa-e6f3bb7c2a062968/29ab321/src/function/execute.rs:217:25 when checking `/home/runner/work/ruff/ruff/typing/conformance/tests/aliases_type_statement.py`: `PEP695TypeAliasType &lt; &#x27;db &gt;::value_type_(Id(cc17)): execute: too many cycle iterations`
-fatal[panic] Panicked at /home/runner/.cargo/git/checkouts/salsa-e6f3bb7c2a062968/29ab321/src/function/execute.rs:217:25 when checking `/home/runner/work/ruff/ruff/typing/conformance/tests/aliases_typealiastype.py`: `infer_definition_types(Id(15c32)): execute: too many cycle iterations`
+fatal[panic] Panicked at /home/runner/.cargo/git/checkouts/salsa-e6f3bb7c2a062968/29ab321/src/function/execute.rs:217:25 when checking `/home/runner/work/ruff/ruff/typing/conformance/tests/aliases_typealiastype.py`: `infer_definition_types(Id(16432)): execute: too many cycle iterations`
 _directives_deprecated_library.py:15:31: error[invalid-return-type] Function always implicitly returns `None`, which is not assignable to return type `int`
 _directives_deprecated_library.py:30:26: error[invalid-return-type] Function always implicitly returns `None`, which is not assignable to return type `str`
 _directives_deprecated_library.py:36:41: error[invalid-return-type] Function always implicitly returns `None`, which is not assignable to return type `Self@__add__`
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-09-29 18:08</div>
            <div class="timeline-body">

<code>mypy_primer</code> results

Changes were detected when running on open source projects

<pre><code>paasta (https://github.com/yelp/paasta)
+ paasta_tools/utils.py:3416:12: error[invalid-return-type] Return type does not match returned value: expected `InstanceConfigDict`, found `(Unknown &amp; ~None) | dict[str, Any]`
- Found 911 diagnostics
+ Found 912 diagnostics

dulwich (https://github.com/dulwich/dulwich)
+ dulwich/tests/utils.py:351:17: error[invalid-assignment] Too many values to unpack: Expected 2
+ dulwich/tests/utils.py:353:13: error[invalid-assignment] Not enough values to unpack: Expected 3
- Found 195 diagnostics
+ Found 197 diagnostics

sockeye (https://github.com/awslabs/sockeye)
+ sockeye/output_handler.py:254:80: error[invalid-argument-type] Argument to function `__new__` is incorrect: Expected `Iterable[Unknown]`, found `list[Any] | None`
+ sockeye/output_handler.py:254:80: error[invalid-argument-type] Argument to function `__new__` is incorrect: Expected `Iterable[Unknown]`, found `list[Any] | None`
- Found 319 diagnostics
+ Found 321 diagnostics

PyGithub (https://github.com/PyGithub/PyGithub)
+ tests/GithubRetry.py:102:53: error[unsupported-operator] Operator `&gt;` is not supported for types `None` and `int`, in comparing `Unknown | None` with `Literal[0]`
+ tests/GithubRetry.py:102:53: error[unsupported-operator] Operator `&gt;` is not supported for types `None` and `int`, in comparing `Unknown | None` with `Literal[0]`
- Found 345 diagnostics
+ Found 347 diagnostics

flake8 (https://github.com/pycqa/flake8)
+ tests/unit/plugins/pycodestyle_test.py:30:48: error[unresolved-attribute] Type `ModuleType` has no attribute `lines`
+ tests/unit/plugins/pycodestyle_test.py:30:48: error[unresolved-attribute] Type `ModuleType` has no attribute `lines`
- Found 38 diagnostics
+ Found 40 diagnostics

schemathesis (https://github.com/schemathesis/schemathesis)
+ src/schemathesis/config/_projects.py:534:9: error[invalid-assignment] Object of type `Unknown` is not assignable to attribute `_parent` on type `T@from_hierarchy | Unknown`
- Found 313 diagnostics
+ Found 314 diagnostics

mypy (https://github.com/python/mypy)
+ mypy/type_visitor.py:267:13: warning[redundant-cast] Value is already of type `Any`
+ mypy/type_visitor.py:282:13: warning[redundant-cast] Value is already of type `Any`
- Found 1832 diagnostics
+ Found 1834 diagnostics

Tanjun (https://github.com/FasterSpeeding/Tanjun)
- tanjun/annotations.py:1949:74: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `int | float`, found `~int`
+ tanjun/annotations.py:1949:74: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `int | float`, found `(int | float) &amp; ~int`
- tanjun/annotations.py:1996:74: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `int | float`, found `~int`
+ tanjun/annotations.py:1996:74: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `int | float`, found `(int | float) &amp; ~int`
+ tanjun/annotations.py:2110:75: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `int | float`, found `_NumberT@__getitem__ &amp; ~float`
- Found 114 diagnostics
+ Found 115 diagnostics

xarray (https://github.com/pydata/xarray)
+ xarray/backends/api.py:1691:26: warning[redundant-cast] Value is already of type `str`
- Found 1614 diagnostics
+ Found 1615 diagnostics

cloud-init (https://github.com/canonical/cloud-init)
+ cloudinit/cmd/status.py:204:37: warning[possibly-missing-attribute] Attribute `items` on type `(Any &amp; ~AlwaysFalsy) | (str &amp; ~AlwaysFalsy) | (list[str] &amp; ~AlwaysFalsy) | (dict[str, list[str]] &amp; ~AlwaysFalsy)` may be missing
+ cloudinit/cmd/status.py:204:37: warning[possibly-missing-attribute] Attribute `items` on type `(Any &amp; ~AlwaysFalsy) | (str &amp; ~AlwaysFalsy) | (list[str] &amp; ~AlwaysFalsy) | (dict[str, list[str]] &amp; ~AlwaysFalsy)` may be missing
+ cloudinit/net/ephemeral.py:140:13: error[unresolved-attribute] Type `str` has no attribute `get`
- Found 836 diagnostics
+ Found 839 diagnostics

prefect (https://github.com/PrefectHQ/prefect)
+ src/prefect/server/schemas/schedules.py:545:62: error[unresolved-attribute] Type `rruleset &amp; ~rrule` has no attribute `_rrule`
+ src/prefect/server/schemas/schedules.py:545:62: error[unresolved-attribute] Type `rruleset &amp; ~rrule` has no attribute `_rrule`
+ src/prefect/server/schemas/schedules.py:548:62: error[unresolved-attribute] Type `rruleset &amp; ~rrule` has no attribute `_exrule`
+ src/prefect/server/schemas/schedules.py:548:62: error[unresolved-attribute] Type `rruleset &amp; ~rrule` has no attribute `_exrule`
+ src/prefect/server/schemas/schedules.py:554:61: error[unresolved-attribute] Type `rruleset &amp; ~rrule` has no attribute `_rdate`
+ src/prefect/server/schemas/schedules.py:554:61: error[unresolved-attribute] Type `rruleset &amp; ~rrule` has no attribute `_rdate`
+ src/prefect/server/schemas/schedules.py:559:63: error[unresolved-attribute] Type `rruleset &amp; ~rrule` has no attribute `_exdate`
+ src/prefect/server/schemas/schedules.py:559:63: error[unresolved-attribute] Type `rruleset &amp; ~rrule` has no attribute `_exdate`
- Found 3189 diagnostics
+ Found 3197 diagnostics

vision (https://github.com/pytorch/vision)
+ references/detection/coco_utils.py:165:60: warning[possibly-unresolved-reference] Name `keypoints` used when possibly not defined
+ references/detection/coco_utils.py:165:60: warning[possibly-unresolved-reference] Name `keypoints` used when possibly not defined
- Found 1489 diagnostics
+ Found 1491 diagnostics

openlibrary (https://github.com/internetarchive/openlibrary)
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;type&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;redirects&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;title_suggest&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;title_sort&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;subtitle&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;alternative_title&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;alternative_subtitle&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;edition_key&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;by_statement&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;publish_date&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;publish_year&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;first_edition&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;first_publisher&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;language&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;number_of_pages_median&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;lccn&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ia_box_id&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ia_loaded_id&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ia_count&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ia_collection&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;oclc&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;isbn&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ebook_access&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ebook_provider&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;lexile&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;lcc&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;lcc_sort&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ddc&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ddc_sort&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;contributor&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;publish_place&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;publisher&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;format&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;publisher_facet&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;first_sentence&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;author_alternative_name&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;author_facet&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;subject&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;subject_facet&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;subject_key&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;place&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;place_facet&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;place_key&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;person&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;person_facet&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;person_key&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;time&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;time_facet&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;time_key&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ratings_sortable&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ratings_count_1&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ratings_count_2&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ratings_count_3&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ratings_count_4&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ratings_count_5&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_0&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_1&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_2&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_3&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_4&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_5&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_6&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_7&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_8&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_9&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_10&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_11&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_12&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_13&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_14&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_15&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_16&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_17&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_18&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_19&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_20&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_21&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_22&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_23&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_hourly_sum&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_daily_0&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_daily_1&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_daily_2&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_daily_3&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_daily_4&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_daily_5&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_score_daily_6&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;trending_z_score&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;readinglog_count&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;currently_reading_count&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;already_read_count&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;osp_count&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;text&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;seed&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;name&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;name_str&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;alternate_names&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;birth_date&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;death_date&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;date&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;work_count&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;top_work&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;top_subjects&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;subject_type&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;last_modified&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;seed_count&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;printdisabled_s&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ia_collection_s&#x27; in TypedDict `SolrDocument` constructor
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[missing-typed-dict-key] Missing required key &#x27;ebook_count_i&#x27; in TypedDict `SolrDocument` constructor
- Found 744 diagnostics
+ Found 853 diagnostics

altair (https://github.com/vega/altair)
- altair/utils/core.py:356:10: warning[redundant-cast] Value is already of type `_PandasDataFrameT@sanitize_pandas_dataframe`
- Found 1337 diagnostics
+ Found 1336 diagnostics

hydpy (https://github.com/hydpy-dev/hydpy)
+ hydpy/core/hydpytools.py:2631:61: error[unresolved-attribute] Type `object` has no attribute `name`
- Found 608 diagnostics
+ Found 609 diagnostics

colour (https://github.com/colour-science/colour)
- colour/plotting/tm3018/report.py:347:40: error[invalid-argument-type] Argument to bound method `text` is incorrect: Expected `str`, found `str | None`
+ colour/plotting/tm3018/report.py:347:40: error[invalid-argument-type] Argument to bound method `text` is incorrect: Expected `str`, found `T@optional | None | str`
- colour/plotting/tm3018/report.py:358:40: error[invalid-argument-type] Argument to bound method `text` is incorrect: Expected `str`, found `str | None`
+ colour/plotting/tm3018/report.py:358:40: error[invalid-argument-type] Argument to bound method `text` is incorrect: Expected `str`, found `T@optional | None | str`
- colour/plotting/tm3018/report.py:372:47: error[invalid-argument-type] Argument to bound method `text` is incorrect: Expected `str`, found `str | None`
+ colour/plotting/tm3018/report.py:372:47: error[invalid-argument-type] Argument to bound method `text` is incorrect: Expected `str`, found `T@optional | None | str`
- colour/plotting/tm3018/report.py:383:47: error[invalid-argument-type] Argument to bound method `text` is incorrect: Expected `str`, found `str | None`
+ colour/plotting/tm3018/report.py:383:47: error[invalid-argument-type] Argument to bound method `text` is incorrect: Expected `str`, found `T@optional | None | str`
- colour/plotting/tm3018/report.py:425:30: error[invalid-argument-type] Argument to bound method `text` is incorrect: Expected `str`, found `str | None`
+ colour/plotting/tm3018/report.py:425:30: error[invalid-argument-type] Argument to bound method `text` is incorrect: Expected `str`, found `T@optional | None | str`

dd-trace-py (https://github.com/DataDog/dd-trace-py)
+ ddtrace/contrib/internal/pymongo/client.py:340:68: warning[possibly-unresolved-reference] Name `cursor` used when possibly not defined
+ ddtrace/contrib/internal/pymongo/client.py:340:68: warning[possibly-unresolved-reference] Name `cursor` used when possibly not defined
+ ddtrace/contrib/internal/unittest/patch.py:671:19: warning[possibly-missing-attribute] Attribute `_collect_coverage_enabled` on type `CIVisibility | None` may be missing
+ ddtrace/contrib/internal/unittest/patch.py:671:19: warning[possibly-missing-attribute] Attribute `_collect_coverage_enabled` on type `CIVisibility | None` may be missing
+ ddtrace/contrib/internal/unittest/patch.py:718:19: warning[possibly-missing-attribute] Attribute `_collect_coverage_enabled` on type `CIVisibility | None` may be missing
+ ddtrace/contrib/internal/unittest/patch.py:718:19: warning[possibly-missing-attribute] Attribute `_collect_coverage_enabled` on type `CIVisibility | None` may be missing
+ ddtrace/vendor/psutil/_compat.py:151:50: warning[possibly-unresolved-reference] Name `sorted_items` used when possibly not defined
+ ddtrace/vendor/psutil/_compat.py:151:50: warning[possibly-unresolved-reference] Name `sorted_items` used when possibly not defined
+ tests/appsec/iast_packages/packages/pkg_exceptiongroup.py:36:83: warning[possibly-unresolved-reference] Name `caught_exceptions` used when possibly not defined
+ tests/appsec/iast_packages/packages/pkg_exceptiongroup.py:36:83: warning[possibly-unresolved-reference] Name `caught_exceptions` used when possibly not defined
+ tests/appsec/iast_packages/packages/pkg_exceptiongroup.py:71:83: warning[possibly-unresolved-reference] Name `caught_exceptions` used when possibly not defined
+ tests/appsec/iast_packages/packages/pkg_exceptiongroup.py:71:83: warning[possibly-unresolved-reference] Name `caught_exceptions` used when possibly not defined
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[missing-typed-dict-key] Missing required key &#x27;span_id&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[missing-typed-dict-key] Missing required key &#x27;trace_id&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[missing-typed-dict-key] Missing required key &#x27;parent_id&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[missing-typed-dict-key] Missing required key &#x27;tags&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[missing-typed-dict-key] Missing required key &#x27;name&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[missing-typed-dict-key] Missing required key &#x27;start_ns&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[missing-typed-dict-key] Missing required key &#x27;duration&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[missing-typed-dict-key] Missing required key &#x27;status&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[missing-typed-dict-key] Missing required key &#x27;meta&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[missing-typed-dict-key] Missing required key &#x27;metrics&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[missing-typed-dict-key] Missing required key &#x27;_dd&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:56:30: error[missing-typed-dict-key] Missing required key &#x27;parent_id&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:56:30: error[missing-typed-dict-key] Missing required key &#x27;tags&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:56:30: error[missing-typed-dict-key] Missing required key &#x27;name&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:56:30: error[missing-typed-dict-key] Missing required key &#x27;start_ns&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:56:30: error[missing-typed-dict-key] Missing required key &#x27;duration&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:56:30: error[missing-typed-dict-key] Missing required key &#x27;status&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:56:30: error[missing-typed-dict-key] Missing required key &#x27;meta&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:56:30: error[missing-typed-dict-key] Missing required key &#x27;metrics&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:56:30: error[missing-typed-dict-key] Missing required key &#x27;_dd&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:82:30: error[missing-typed-dict-key] Missing required key &#x27;parent_id&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:82:30: error[missing-typed-dict-key] Missing required key &#x27;tags&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:82:30: error[missing-typed-dict-key] Missing required key &#x27;name&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:82:30: error[missing-typed-dict-key] Missing required key &#x27;start_ns&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:82:30: error[missing-typed-dict-key] Missing required key &#x27;duration&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:82:30: error[missing-typed-dict-key] Missing required key &#x27;status&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:82:30: error[missing-typed-dict-key] Missing required key &#x27;meta&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:82:30: error[missing-typed-dict-key] Missing required key &#x27;metrics&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_evaluator_runner.py:82:30: error[missing-typed-dict-key] Missing required key &#x27;_dd&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[missing-typed-dict-key] Missing required key &#x27;span_id&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[missing-typed-dict-key] Missing required key &#x27;trace_id&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[missing-typed-dict-key] Missing required key &#x27;parent_id&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[missing-typed-dict-key] Missing required key &#x27;tags&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[missing-typed-dict-key] Missing required key &#x27;name&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[missing-typed-dict-key] Missing required key &#x27;start_ns&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[missing-typed-dict-key] Missing required key &#x27;duration&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[missing-typed-dict-key] Missing required key &#x27;status&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[missing-typed-dict-key] Missing required key &#x27;meta&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[missing-typed-dict-key] Missing required key &#x27;metrics&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[missing-typed-dict-key] Missing required key &#x27;_dd&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[missing-typed-dict-key] Missing required key &#x27;span_id&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[missing-typed-dict-key] Missing required key &#x27;trace_id&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[missing-typed-dict-key] Missing required key &#x27;parent_id&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[missing-typed-dict-key] Missing required key &#x27;tags&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[missing-typed-dict-key] Missing required key &#x27;name&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[missing-typed-dict-key] Missing required key &#x27;start_ns&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[missing-typed-dict-key] Missing required key &#x27;duration&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[missing-typed-dict-key] Missing required key &#x27;status&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[missing-typed-dict-key] Missing required key &#x27;meta&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[missing-typed-dict-key] Missing required key &#x27;metrics&#x27; in TypedDict `LLMObsSpanEvent` constructor
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[missing-typed-dict-key] Missing required key &#x27;_dd&#x27; in TypedDict `LLMObsSpanEvent` constructor
- Found 7456 diagnostics
+ Found 7519 diagnostics

pandas-stubs (https://github.com/pandas-dev/pandas-stubs)
- tests/indexes/test_indexes.py:1305:23: error[unsupported-operator] Operator `+` is unsupported between objects of type `None` and `timedelta`
- tests/indexes/test_indexes.py:1307:23: error[unsupported-operator] Operator `-` is unsupported between objects of type `None` and `timedelta`
- tests/scalars/test_scalars.py:948:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:951:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:956:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:959:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:964:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:969:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:979:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:982:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:987:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:990:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:995:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1000:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1012:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1015:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1018:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1021:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1024:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1027:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1032:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1035:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1038:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1041:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1044:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1047:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1052:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1055:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1058:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1063:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1066:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1069:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1324:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1327:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1332:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1335:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1340:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1345:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1357:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1360:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1363:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1366:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1371:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1374:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1377:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1380:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1385:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1389:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1398:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1405:12: error[unresolved-attribute] Type `bool` has no attribute `all`
+ tests/scalars/test_scalars.py:1417:12: warning[possibly-missing-attribute] Attribute `all` on type `bool | @Todo` may be missing
- tests/scalars/test_scalars.py:1417:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1420:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1423:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1426:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1432:12: error[unresolved-attribute] Type `bool` has no attribute `all`
+ tests/scalars/test_scalars.py:1437:12: warning[possibly-missing-attribute] Attribute `all` on type `bool | @Todo` may be missing
- tests/scalars/test_scalars.py:1437:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1440:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1443:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1446:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1452:12: error[unresolved-attribute] Type `bool` has no attribute `all`
+ tests/scalars/test_scalars.py:1457:12: warning[possibly-missing-attribute] Attribute `all` on type `bool | @Todo` may be missing
- tests/scalars/test_scalars.py:1457:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1460:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1468:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1471:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1474:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1957:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1960:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1965:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1968:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1973:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1978:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1988:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1991:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1996:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:1999:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2004:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2009:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2021:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2024:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2027:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2031:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2034:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2037:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2042:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2045:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2048:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2052:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2055:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2058:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2063:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2066:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2069:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2074:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2077:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/scalars/test_scalars.py:2080:12: error[unresolved-attribute] Type `bool` has no attribute `all`
- tests/series/test_series.py:533:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:534:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:535:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:536:17: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:539:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:540:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:541:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:542:17: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:545:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:546:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:547:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:548:17: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:551:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:552:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:553:23: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/series/test_series.py:554:17: error[unresolved-attribute] Type `None` has no attribute `sum`
- tests/test_frame.py:2640:14: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_frame.py:2644:14: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_frame.py:2649:14: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_frame.py:2654:14: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_frame.py:2661:14: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_io.py:301:10: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_io.py:306:10: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_io.py:311:10: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_io.py:316:10: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_io.py:326:10: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_io.py:331:10: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_io.py:336:10: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
- tests/test_io.py:341:10: error[invalid-context-manager] Object of type `None` cannot be used with `with` because it does not implement `__enter__` and `__exit__`
+ tests/test_io.py:987:13: error[type-assertion-failure] Argument does not have asserted type `dict[int | str, DataFrame]`
+ tests/test_pandas.py:476:22: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:478:18: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:479:22: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:481:18: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:482:22: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:484:22: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:485:18: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:489:18: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:490:22: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:493:18: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:494:22: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:497:18: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:498:22: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:501:18: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:502:22: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:505:18: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:506:22: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:513:15: error[type-assertion-failure] Argument does not have asserted type `str`
+ tests/test_pandas.py:515:15: error[type-assertion-failure] Argument does not have asserted type `str`
+ tests/test_pandas.py:517:9: error[type-assertion-failure] Argument does not have asserted type `NaTType | NAType | None`
+ tests/test_pandas.py:519:9: error[type-assertion-failure] Argument does not have asserted type `NaTType | NAType | None`
+ tests/test_pandas.py:523:15: error[type-assertion-failure] Argument does not have asserted type `int`
+ tests/test_pandas.py:525:15: error[type-assertion-failure] Argument does not have asserted type `int`
+ tests/test_pandas.py:527:15: error[type-assertion-failure] Argument does not have asserted type `None`
+ tests/test_pandas.py:529:15: error[type-assertion-failure] Argument does not have asserted type `None`
+ tests/test_pandas.py:533:15: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:535:15: error[type-assertion-failure] Argument does not have asserted type `bool`
+ tests/test_pandas.py:537:9: error[type-assertion-failure] Argument does not have asserted type `NAType | None`
+ tests/test_pandas.py:539:9: error[type-assertion-failure] Argument does not have asserted type `NAType | None`
- Found 4910 diagnostics
+ Found 4819 diagnostics

jax (https://github.com/google/jax)
+ jax/_src/pallas/fuser/block_spec.py:1517:39: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
+ jax/_src/pallas/fuser/block_spec.py:1517:39: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
- Found 2273 diagnostics
+ Found 2275 diagnostics

zulip (https://github.com/zulip/zulip)
+ zerver/actions/message_edit.py:862:24: error[invalid-argument-type] Invalid argument to key &quot;user_id&quot; with declared type `int | None` on TypedDict `EditHistoryEvent`: value of type `Unknown | str | int`
+ zerver/actions/message_edit.py:863:26: error[invalid-argument-type] Invalid argument to key &quot;timestamp&quot; with declared type `int` on TypedDict `EditHistoryEvent`: value of type `Unknown | str | int`
+ zerver/views/auth.py:125:16: error[invalid-return-type] Return type does not match returned value: expected `str`, found `str | AnyStr@urljoin | None`
- Found 2718 diagnostics
+ Found 2721 diagnostics

sympy (https://github.com/sympy/sympy)
+ sympy/crypto/crypto.py:2544:51: error[unsupported-operator] Operator `+` is unsupported between objects of type `int | NegativeInfinity` and `Literal[1]`
+ sympy/crypto/crypto.py:2544:51: error[unsupported-operator] Operator `+` is unsupported between objects of type `int | NegativeInfinity` and `Literal[1]`
+ sympy/functions/combinatorial/numbers.py:3193:61: warning[possibly-unresolved-reference] Name `s` used when possibly not defined
+ sympy/functions/combinatorial/numbers.py:3193:61: warning[possibly-unresolved-reference] Name `s` used when possibly not defined
+ sympy/ntheory/factor_.py:148:43: warning[possibly-unresolved-reference] Name `facs` used when possibly not defined
+ sympy/ntheory/factor_.py:148:43: warning[possibly-unresolved-reference] Name `facs` used when possibly not defined
+ sympy/polys/densetools.py:292:36: error[invalid-argument-type] Argument to function `dup_TC` is incorrect: Expected `Domain[Es@convert | Expr | int | float | complex | Er@dup_eval]`, found `Domain[Er@dup_eval]`
- Found 14007 diagnostics
+ Found 14014 diagnostics

rotki (https://github.com/rotki/rotki)
- rotkehlchen/history/events/structures/evm_event.py:204:63: error[invalid-argument-type] Argument to function `deserialize_optional` is incorrect: Expected `(str | None, /) -&gt; Unknown`, found `def string_to_evm_address(value: str) -&gt; @Todo`
+ rotkehlchen/history/events/structures/evm_event.py:204:63: error[invalid-argument-type] Argument to function `deserialize_optional` is incorrect: Expected `(str | None, /) -&gt; Any`, found `def string_to_evm_address(value: str) -&gt; @Todo`
- rotkehlchen/history/events/structures/evm_swap.py:103:63: error[invalid-argument-type] Argument to function `deserialize_optional` is incorrect: Expected `(str | None, /) -&gt; Unknown`, found `def string_to_evm_address(value: str) -&gt; @Todo`
+ rotkehlchen/history/events/structures/evm_swap.py:103:63: error[invalid-argument-type] Argument to function `deserialize_optional` is incorrect: Expected `(str | None, /) -&gt; Any`, found `def string_to_evm_address(value: str) -&gt; @Todo`

core (https://github.com/home-assistant/core)
+ homeassistant/components/bmw_connected_drive/notify.py:59:44: warning[possibly-unresolved-reference] Name `coordinator` used when possibly not defined
+ homeassistant/components/bmw_connected_drive/notify.py:59:44: warning[possibly-unresolved-reference] Name `coordinator` used when possibly not defined
+ homeassistant/components/bmw_connected_drive/notify.py:59:44: warning[possibly-unresolved-reference] Name `coordinator` used when possibly not defined
+ homeassistant/components/bmw_connected_drive/notify.py:59:44: warning[possibly-unresolved-reference] Name `coordinator` used when possibly not defined
+ homeassistant/components/caldav/todo.py:84:28: warning[possibly-unresolved-reference] Name `todo` used when possibly not defined
+ homeassistant/components/konnected/__init__.py:355:28: warning[possibly-unresolved-reference] Name `payload` used when possibly not defined
+ homeassistant/components/konnected/__init__.py:355:28: warning[possibly-unresolved-reference] Name `payload` used when possibly not defined
+ homeassistant/components/meteo_france/weather.py:194:21: error[missing-typed-dict-key] Missing required key &#x27;datetime&#x27; in TypedDict `Forecast` constructor
+ homeassistant/components/meteo_france/weather.py:216:21: error[missing-typed-dict-key] Missing required key &#x27;datetime&#x27; in TypedDict `Forecast` constructor
+ homeassistant/components/mqtt/debug_info.py:45:21: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
+ homeassistant/components/mqtt/debug_info.py:46:9: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
+ homeassistant/components/mqtt/debug_info.py:52:5: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
+ homeassistant/components/mqtt/debug_info.py:63:32: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
+ homeassistant/components/mqtt/debug_info.py:64:13: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
+ homeassistant/components/mqtt/debug_info.py:69:13: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
+ homeassistant/components/mqtt/debug_info.py:92:5: warning[possibly-missing-implicit-call] Method `__setitem__` of type `Unknown | EntityDebugInfo | None` may be missing
+ homeassistant/components/random/config_flow.py:113:82: warning[possibly-unresolved-reference] Name `units` used when possibly not defined
+ homeassistant/components/random/config_flow.py:113:82: warning[possibly-unresolved-reference] Name `units` used when possibly not defined
+ homeassistant/components/sensor/__init__.py:607:59: warning[possibly-unresolved-reference] Name `classes` used when possibly not defined
+ homeassistant/components/sensor/__init__.py:607:59: warning[possibly-unresolved-reference] Name `classes` used when possibly not defined
+ homeassistant/components/template/config_flow.py:433:82: warning[possibly-unresolved-reference] Name `units` used when possibly not defined
+ homeassistant/components/template/config_flow.py:433:82: warning[possibly-unresolved-reference] Name `units` used when possibly not defined
+ homeassistant/components/template/config_flow.py:457:54: warning[possibly-unresolved-reference] Name `state_classes` used when possibly not defined
+ homeassistant/components/template/config_flow.py:457:54: warning[possibly-unresolved-reference] Name `state_classes` used when possibly not defined
+ homeassistant/components/thread/diagnostics.py:151:13: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
+ homeassistant/components/thread/diagnostics.py:179:18: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
+ homeassistant/components/thread/diagnostics.py:200:9: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
- homeassistant/components/todoist/calendar.py:570:21: error[unsupported-operator] Operator `&gt;` is not supported for types `None` and `datetime`, in comparing `datetime | None` with `datetime`
+ homeassistant/components/todoist/calendar.py:552:21: error[unsupported-operator] Operator `in` is not supported for types `Unknown` and `bool`, in comparing `Unknown` with `Unknown | bool | str | None | list[Unknown] | datetime`
+ homeassistant/components/todoist/calendar.py:570:21: error[unsupported-operator] Operator `&gt;` is not supported for types `bool` and `datetime`, in comparing `Unknown | bool | str | None | list[Unknown] | datetime` with `datetime`
- homeassistant/components/todoist/calendar.py:576:35: warning[possibly-missing-attribute] Attribute `date` on type `datetime | None` may be missing
+ homeassistant/components/todoist/calendar.py:576:35: warning[possibly-missing-attribute] Attribute `date` on type `Unknown | bool | str | None | list[Unknown] | datetime` may be missing
- homeassistant/components/todoist/calendar.py:579:20: error[unsupported-operator] Operator `&lt;=` is not supported for types `None` and `datetime`, in comparing `datetime | None` with `datetime`
+ homeassistant/components/todoist/calendar.py:579:20: error[unsupported-operator] Operator `&lt;=` is not supported for types `bool` and `str`, in comparing `Unknown | bool | str | None | list[Unknown] | datetime` with `Unknown | bool | str | None | list[Unknown] | datetime`
+ homeassistant/components/todoist/calendar.py:584:33: error[unsupported-operator] Operator `+` is unsupported between objects of type `Unknown | bool | str | None | list[Unknown] | datetime` and `timedelta`
- homeassistant/util/hass_dict.pyi:146:5: error[type-assertion-failure] Argument does not have asserted type `dict[str, int]`
- homeassistant/util/hass_dict.pyi:147:5: error[type-assertion-failure] Argument does not have asserted type `int`
- homeassistant/util/hass_dict.pyi:155:62: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- homeassistant/util/hass_dict.pyi:170:5: error[type-assertion-failure] Argument does not have asserted type `dict[str, int]`
- Found 13710 diagnostics
+ Found 13735 diagnostics

scipy (https://github.com/scipy/scipy)
+ scipy/_lib/_util.py:1074:36: error[call-non-callable] Object of type `None` is not callable
+ scipy/_lib/_util.py:1074:36: error[call-non-callable] Object of type `None` is not callable
- Found 6758 diagnostics
+ Found 6760 diagnostics

</code></pre>


Memory usage changes were detected when running on open source projects

<pre><code>prefect (https://github.com/PrefectHQ/prefect)
-     struct fields = ~33MB
+     struct fields = ~35MB

</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-09-29 22:41</div>
            <div class="timeline-body"><p>It looks like a lot of these errors are duplicated diagnostics now that we infer argument expressions multiple times for callable unions/overloads, e.g.,</p>
<pre><code>if flag:
    def f(_: int): ...
else:
    def f(_: int): ...

if flag:
    x = 0

# warning[possibly-unresolved-reference] Name `x` used when possibly not defined
# warning[possibly-unresolved-reference] Name `x` used when possibly not defined
f(x)
</code></pre>
<p>(In this example, multi-inference is not strictly necessary because the signatures are identical, but that&#x27;s a separate performance concern).</p>
<p>I&#x27;m not sure there&#x27;s a great way around this other than adding checks around all diagnostics that aren&#x27;t type-context specific?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a> reviewed on 2025-09-29 22:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:9465 on 2025-09-29 22:57</div>
            <div class="timeline-body"><p>The reason we even eagerly report diagnostics during the inference of <code>TypedDict</code> literals in the first place, is because a later assignability diagnostic would not have context for missing or invalid key diagnostics. Otherwise, I don&#x27;t think we should be emitting diagnostics based on the type context, which acts more as a type hint (and is not necessarily required to be assignable to, e.g. when there is a fallback overload).</p>
<p>If we had an internal implicit <code>TypedDict</code> representation we may be able to avoid this, though we also wouldn&#x27;t even need bidirectional type inference for <code>TypedDict</code> literals in that case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-09-30 06:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-09-30 07:00</div>
            <div class="timeline-body">

<code>ecosystem-analyzer</code> results
<p>| Lint rule | Added | Removed | Changed |
|-----------|------:|--------:|--------:|
| <code>missing-typed-dict-key</code> | 162 | 0 | 0 |
| <code>unresolved-attribute</code> | 2 | 109 | 0 |
| <code>type-assertion-failure</code> | 30 | 3 | 0 |
| <code>invalid-argument-type</code> | 4 | 0 | 9 |
| <code>invalid-context-manager</code> | 0 | 13 | 0 |
| <code>non-subscriptable</code> | 9 | 0 | 0 |
| <code>unsupported-operator</code> | 2 | 2 | 2 |
| <code>possibly-missing-attribute</code> | 3 | 0 | 1 |
| <code>redundant-cast</code> | 3 | 1 | 0 |
| <code>invalid-assignment</code> | 3 | 0 | 0 |
| <code>invalid-return-type</code> | 2 | 0 | 0 |
| <code>possibly-missing-implicit-call</code> | 1 | 0 | 0 |
| <code>unused-ignore-comment</code> | 0 | 1 | 0 |
| <strong>Total</strong> | <strong>221</strong> | <strong>129</strong> | <strong>12</strong> |</p>
<p><strong><a href="https://ibraheem-argument-inference.ecosystem-663.pages.dev/diff">Full report with detailed diff</a></strong> (<a href="https://ibraheem-argument-inference.ecosystem-663.pages.dev/timing">timing results</a>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-09-30 11:27</div>
            <div class="timeline-body"><blockquote>
<p>It looks like a lot of these errors are duplicated diagnostics now that we infer argument expressions multiple times for callable unions/overloads []  I&#x27;m not sure there&#x27;s a great way around this other than adding checks around all diagnostics that aren&#x27;t type-context specific?</p>
</blockquote>
<p>Instead of adding checks for every non-type-context-specific context, can we use state on <code>InferContext</code> to keep track of whether diagnostics should be emitted or not (see the <code>InferContext::no_type_check</code> field for a similar functionality)? And then, we could circumvent the general silencing of all diagnostics for those diagnostics that should still be emitted?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:9465 on 2025-09-30 11:44</div>
            <div class="timeline-body"><blockquote>
<p>The reason we even eagerly report diagnostics during the inference of <code>TypedDict</code> literals in the first place, is because a later assignability diagnostic would not have context for missing or invalid key diagnostics.</p>
</blockquote>
<p>Correct</p>
<blockquote>
<p>Otherwise, I don&#x27;t think we should be emitting diagnostics based on the type context, which acts more as a type hint (and is not necessarily required to be assignable to, e.g. when there is a fallback overload).</p>
</blockquote>
<p>:+1:</p>
<blockquote>
<p>If we had an internal implicit <code>TypedDict</code> representation we may be able to avoid this, though we also wouldn&#x27;t even need bidirectional type inference for <code>TypedDict</code> literals in that case.</p>
</blockquote>
<p>Yes, although Carl pointed out that this approach would be tricky as well, because we would need to keep track of mutations (including through aliases):</p>
<pre><code>class Person(TypedDict):
    name: str
    age: int

def takes_person(p: Person): ...

# creates ImplicitTypedDict {&quot;name&quot;: Literal[&quot;Alice&quot;], &quot;age&quot;: Literal[20] }
alice = {&quot;name&quot;: &quot;Alice&quot;, &quot;age&quot;: 20}

takes_person(alice)  # okay

evil = alice
evil[&quot;age&quot;] = None

takes_person(alice)  # not okay anymore
</code></pre>
<p>But on the other hand, this is a case that the current approach can&#x27;t handle either, because <code>alice</code> would just be a <code>dict[Unknown | str, Unknown | str | int]</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-09-30 11:44</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-09-30 21:28</div>
            <div class="timeline-body">



<a href="https://codspeed.io/astral-sh/ruff/branches/ibraheem%2Fargument-inference?runnerMode=Instrumentation">CodSpeed Instrumentation Performance Report</a>
Merging #20635 will <strong>degrade performances by 17.12%</strong>
<p>Comparing <code>ibraheem/argument-inference</code> (dcd1dc5) with <code>main</code> (b83ac5e)</p>
Summary
<p><code> 1</code> regression<br>
<code> 42</code> untouched</p>
<blockquote>
<p>:warning: <em>Please fix the performance issues or <a href="https://codspeed.io/astral-sh/ruff/branches/ibraheem%2Fargument-inference?runnerMode=Instrumentation">acknowledge them on CodSpeed</a>.</em></p>
</blockquote>
Benchmarks breakdown
<p>|     | Benchmark | <code>BASE</code> | <code>HEAD</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
|  | <code>hydra-zen</code> | 764.5 ms | 922.4 ms | -17.12% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> removed by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-09-30 23:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-09-30 23:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> removed by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-09-30 23:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-09-30 23:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ty_python_semantic/src/types/context.rs</code>:188 on 2025-10-01 06:24</div>
            <div class="timeline-body"><p>I think we can wait with adding this method. <code>report_diagnostic</code> is only used for errors that can&#x27;t be suppressed and shouldn&#x27;t be specific to bidirectional type inference.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-10-01 06:24</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-10-02 19:24</div>
            <div class="timeline-body">



<a href="https://codspeed.io/astral-sh/ruff/branches/ibraheem%2Fargument-inference?runnerMode=WallTime">CodSpeed WallTime Performance Report</a>
Merging #20635 will <strong>degrade performances by 21.13%</strong>
<p>Comparing <code>ibraheem/argument-inference</code> (dcd1dc5) with <code>main</code> (b83ac5e)</p>
Summary
<p><code> 5</code> regressions<br>
<code> 3</code> untouched</p>
<blockquote>
<p>:warning: <em>Please fix the performance issues or <a href="https://codspeed.io/astral-sh/ruff/branches/ibraheem%2Fargument-inference?runnerMode=WallTime">acknowledge them on CodSpeed</a>.</em></p>
</blockquote>
Benchmarks breakdown
<p>|     | Benchmark | <code>BASE</code> | <code>HEAD</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
|  | <code>large[sympy]</code> | 40.6 s | 42.8 s | -5.15% |
|  | <code>medium[colour-science]</code> | 9.1 s | 11.5 s | -21.13% |
|  | <code>medium[pandas]</code> | 32.2 s | 34.3 s | -6.07% |
|  | <code>medium[static-frame]</code> | 8.9 s | 9.4 s | -4.82% |
|  | <code>small[pydantic]</code> | 2.5 s | 2.6 s | -4.26% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-10-02 19:24</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p> ecosystem check detected no linter changes.</p>
Linter (preview)
<p> ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> removed by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-10-03 01:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-10-03 01:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-10-03 04:01</div>
            <div class="timeline-body"><p>I&#x27;ve decided to remove the idea of &quot;lints that may be affected by bidirectional type context&quot;, as this seemed quite. Instead, the new implementation does the following for each argument:</p>
<ul>
<li>Performs type inference directly with the unique annotated parameter type, if there is a single binding and overload.</li>
<li>Otherwise, performs type inference once without type context. This will surface any diagnostics from inference of the expression. We then perform type inference once for each overload, with its annotated parameter type, with diagnostics silenced. The intersection of all these types are taken  so the type context can potentially allow us to infer a more assignable type, but will never lead to any new diagnostics, as we don&#x27;t know which overload will match during argument inference.</li>
</ul>
<p>This does mean we get worse diagnostics for <code>TypedDict</code> arguments when there are multiple bindings/overloads involved, due to the fallback to a generic <code>dict</code> (once <code>TypedDict</code> subtyping is properly implemented, of course), but I don&#x27;t think there&#x27;s really a way around this, and it doesn&#x27;t seem like a priority.</p>
<p>I also went through the ecosystem report, and most diagnostic changes seem to be correct, or the result of an unrelated known limitation (namely <code>TypedDict</code> subtyping, and the new constraint solver). This PR should be ready for review.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a> reviewed on 2025-10-03 04:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on <code>crates/ty_python_semantic/src/types/call/bind.rs</code>:2517 on 2025-10-03 04:18</div>
            <div class="timeline-body"><p>This is mostly for better diagnostics. Without it, <code>reveal_type(identity(1))</code> is revealed as <code>T@reveal_type | int</code>. It also doesn&#x27;t quite work for parameters annotated as <code>T | None</code>  we still might union the inferred type with <code>T@f</code> in that case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/ty_python_semantic/src/types/call/bind.rs</code>:3671 on 2025-10-03 18:02</div>
            <div class="timeline-body"><p>nit: I think you can update this helper to take in <code>argument_index: usize</code>, and use <code>argument_index?</code> up above when you call the helper. Then you only need to match on <code>node</code> below.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:4989 on 2025-10-03 18:06</div>
            <div class="timeline-body"><p>nit: Can you use <code>std::iter::once</code> here? I find the array notation makes me assume there will be multiple elements, which is subtle since there&#x27;s a tuple here, too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dcreager">@dcreager</a> on <code>crates/ty_python_semantic/src/types.rs</code>:4199 on 2025-10-03 18:19</div>
            <div class="timeline-body"><p>Were there tests that were failing with the old signature? I can see that the new signature means that there&#x27;s now a return value, which will have the same type as the value being checked, but I don&#x27;t see any tests that rely on that behavior.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dcreager">@dcreager</a> approved on 2025-10-03 18:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a> reviewed on 2025-10-03 20:25</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on <code>crates/ty_python_semantic/src/types.rs</code>:4199 on 2025-10-03 20:25</div>
            <div class="timeline-body"><p>The issue that showed up in the ecosystem report was that the <code>f(1)</code> in <code>assert_type(f(1), int)</code> was inferred as <code>int | Any</code>, because the signature of <code>assert_type</code> was <code>(Any, ..) -&gt; ..</code>. I added a test.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a> reviewed on 2025-10-03 20:32</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on <code>crates/ty_python_semantic/src/types/call/bind.rs</code>:3671 on 2025-10-03 20:32</div>
            <div class="timeline-body"><p>We also use <code>get_argument_node</code> in the diagnostic code with an <code>Option&lt;usize&gt;</code>, so I&#x27;m not sure the change is worth it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> removed by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-10-03 21:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-10-03 21:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-10-03 21:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-10-03 21:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-10-03 21:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-10-03 21:21</div>
            <div class="timeline-body"><p>Deduplicating the parameter types helps the performance regression somewhat, but outside of that I think it&#x27;s unavoidable.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:19:07 UTC
    </footer>
</body>
</html>
