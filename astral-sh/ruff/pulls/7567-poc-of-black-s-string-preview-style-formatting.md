```yaml
number: 7567
title: "POC of Black's string preview style formatting"
type: pull_request
state: closed
author: MichaReiser
labels: []
assignees: []
draft: true
base: create-string-continuation
head: string-preview-style
created_at: 2023-09-21T10:38:32Z
updated_at: 2023-12-14T10:50:33Z
url: https://github.com/astral-sh/ruff/pull/7567
synced_at: 2026-01-10T23:31:11Z
```

# POC of Black's string preview style formatting

---

_Pull request opened by @MichaReiser on 2023-09-21 10:38_

<!--
Thank you for contributing to Ruff! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

## Summary

<!-- What's the purpose of the change? What does it do, and why? -->

## Test Plan

<!-- How was it tested? -->


---

_Comment by @MichaReiser on 2023-09-21 10:38_

Current dependencies on/for this PR:
* main
  * **PR #7145** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7145" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
    * **PR #7193** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7193" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
      * **PR #7215** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7215" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
        * **PR #7217** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7217" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
          * **PR #7219** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7219" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
            * **PR #7242** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7242" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a> 
              * **PR #7567** <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/7567" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a>  üëà

This comment was auto-generated by [Graphite](https://app.graphite.dev/github/pr/astral-sh/ruff/7567?utm_source=stack-comment).

---

_Comment by @codspeed-hq[bot] on 2023-09-21 11:02_

## [CodSpeed Performance Report](https://codspeed.io/astral-sh/ruff/branches/string-preview-style)

### Merging #7567 will **degrade performances by 59.85%**

<sub>Comparing <code>string-preview-style</code> (5d2513e) with <code>create-string-continuation</code> (272306b)</sub>



### Summary

`‚ùå 6` regressions
`‚úÖ 19` untouched benchmarks



> :warning: _Please fix the performance issues or [acknowledge them on CodSpeed](https://codspeed.io/astral-sh/ruff/branches/string-preview-style)._

### Benchmarks breakdown

|     | Benchmark | `create-string-continuation` | `string-preview-style` | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| ‚ùå | `formatter[numpy/globals.py]` | 1.1 ms | 2.7 ms | -59.85% |
| ‚ùå | `formatter[unicode/pypinyin.py]` | 3.4 ms | 3.6 ms | -6.76% |
| ‚ùå | `linter/all-rules[large/dataset.py]` | 164 ms | 168.1 ms | -2.41% |
| ‚ùå | `formatter[large/dataset.py]` | 52.3 ms | 54.9 ms | -4.69% |
| ‚ùå | `formatter[numpy/ctypeslib.py]` | 9.9 ms | 14.4 ms | -31.03% |
| ‚ùå | `formatter[pydantic/types.py]` | 19.1 ms | 22.7 ms | -15.93% |


---

_Closed by @MichaReiser on 2023-12-14 10:50_

---
