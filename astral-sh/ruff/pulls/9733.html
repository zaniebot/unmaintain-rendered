<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `--range` option to `ruff format` - astral-sh/ruff #9733</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>--range</code> option to <code>ruff format</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/9733">#9733</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2024-01-31 11:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body">Summary
<p>~~This PR adds the <code>--range-start=&lt;CHAR OFFSET&gt;</code> and <code>--range-end=&lt;CHAR_OFFSET&gt;</code> options to the <code>format</code> command.~~</p>
<p>This PR adds the new <code>--range=&lt;start&gt;-&lt;end&gt;</code> option to the <code>format</code> command where <code>&lt;start&gt;</code> and <code>&lt;end&gt;</code> are specified as <code>line:column</code> (1 based).</p>
<p>The new options allow users only to format a selected range rather than the entire document. The main use case is to enable range formatting in IDEs.</p>
<p>Closes #7233</p>
Design Decisions
<ul>
<li>Range formatting is only supported when formatting a single file, which I expect to be the main use case.</li>
<li>The CLI only supports a single range. We can explore supporting multiple ranges in the future. The main challenge is that overlapping ranges invalidate the offset of whichever range gets formatted last (starting from the back helps but doesn&#x27;t prevent it). This is especially a problem if the formatter has to extend the formatted range.</li>
<li>~~The range is specified in character offsets. The alternatives I considered are:~~<ul>
<li>~~line numbers similar to Black but being able to specify the range exactly can help the formatter to narrow the range better~~</li>
<li>~~<code>line:column</code> This would be more consistent to our <code>--output-format=json</code> where we output row and column numbers and can be easier to determine. However, this is mainly a feature for editors or when integrating Ruff into other tooling where computing a character offset shouldn&#x27;t be a concern. The main downside of <code>line:column</code> is that it is a more complicated value~~</li>
</ul>
</li>
<li>~~I went with two options instead of one to avoid the need for a custom syntax like <code>4-5</code> that user need to figure out~~</li>
<li>See the discussion below for why a single <code>--range</code> option. TLDR: It gives us a way to define our own DSL to support byte and codepoint offsets in the future.</li>
</ul>
Limitations
<p>The current implementation doesn&#x27;t support notebooks because it&#x27;s unclear if the range is relative to the notebook content or the raw notebook.
I decided to not support notebooks for now because the main use case, range formatting in VS Code, doesn&#x27;t require notebook support because it only formats the closest cell.</p>
Test Plan
<ul>
<li>Added CLI tests</li>
<li>I used the debug build to develop and test the LSP range formatting functionality</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-01-31 11:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/zanieb">@zanieb</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-01-31 11:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-01-31 11:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-01-31 12:02</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>ℹ️ ecosystem check <strong>encountered linter errors</strong>. (no lint changes; 1 project error)</p>
<a href="https://github.com/sphinx-doc/sphinx">sphinx-doc/sphinx</a> (error)
<p>

<pre><code>ruff failed
  Cause: Selection of unstable rules without the `--preview` flag is not allowed. Enable preview or remove selection of:
	- FURB113
	- FURB131
	- FURB132
</code></pre>
</p>


Linter (preview)
<p>✅ ecosystem check detected no linter changes.</p>
Formatter (stable)
<p>ℹ️ ecosystem check <strong>encountered format errors</strong>. (no format changes; 2 project errors)</p>
<a href="https://github.com/sphinx-doc/sphinx">sphinx-doc/sphinx</a> (error)
<p>
<pre>ruff format --no-preview --exclude tests/roots/test-pycode/cp_1251_coded.py</pre>
</p>
<p>

<pre><code>ruff failed
  Cause: Selection of unstable rules without the `--preview` flag is not allowed. Enable preview or remove selection of:
	- FURB113
	- FURB131
	- FURB132
</code></pre>
</p>

<a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to parse examples/dalle/Image_generations_edits_and_variations_with_DALL-E.ipynb:3:7:8: Unexpected token &#x27;prompt&#x27;
</code></pre>
</p>


Formatter (preview)
<p>ℹ️ ecosystem check <strong>encountered format errors</strong>. (no format changes; 1 project error)</p>
<a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to parse examples/dalle/Image_generations_edits_and_variations_with_DALL-E.ipynb:3:7:8: Unexpected token &#x27;prompt&#x27;
</code></pre>
</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-31 15:54</div>
            <div class="timeline-body"><p>Was &quot;byte offset&quot; an option, or is the LSP not able to provide that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-01-31 16:59</div>
            <div class="timeline-body"><blockquote>
<p>Was &quot;byte offset&quot; an option, or is the LSP not able to provide that?</p>
</blockquote>
<p>I considered it but decided against it because I want to provide users with a safe interface without thinking about encodings. Byte offsets would mean that we, in addition to out of bound indices, would also need to error on inputs that fall between character boundaries.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-01-31 17:19</div>
            <div class="timeline-body"><p>I would still bias toward byte offsets I think. Or perhaps even better, provide a way for a user to enter either byte offsets or character offsets. Worrying about encoding is a good point, but I imagine the vast majority of all Python source files are UTF-8. (Is it possible for Python source files to be something other than UTF-8? I&#x27;m actually not sure.)</p>
<p>Separately from that, could we use the word &quot;codepoint&quot; instead of &quot;character&quot; here? The former has a more concrete and unambiguous definition. The downside I suppose is that &quot;character&quot; is probably a more accessible term. Still, using the word &quot;codepoint&quot; will be an extra clear sign-post that the input is <em>not</em> byte offsets.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-01-31 17:35</div>
            <div class="timeline-body"><p>@BurntSushi what&#x27;s your reasoning for biasing towards byte offsets? The only reason we use byte offsets internally is because they&#x27;re convenient (and fast) to slice strings.</p>
<p>I don&#x27;t see performance being a key motivator for this use case. Lexing, parsing, and all the IO are so dominant that the offset conversion won&#x27;t matter.</p>
<p>Allowing different formats is intriguing but I think I would than either allow row:col or code point offsets.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-01-31 17:59</div>
            <div class="timeline-body"><p>Ah no, it&#x27;s definitely not about performance. I suppose it&#x27;s more about what is easy for users to actually get. Users are unlikely to be counting characters or bytes to figure out the inputs to these flags. So they&#x27;ll probably get them from elsewhere. And I feel like usually what you get are byte offsets, especially when dealing with files on Unix operating systems. For example, grep has a <code>-b/--byte-offset</code> flag but no corresponding character offset flag. Byte offsets are just in general easier to deal with because they don&#x27;t require knowledge of encodings when you treat everything as conventionally UTF-8. (Which is the prevailing strategy on Unix. Files are just bytes and most happen to be UTF-8.)</p>
<p>This is also why I suggested offering multiple ways to provide the range. Even if you switched to byte offsets, in the case of a user with char offsets, converting to byte offsets will be pretty annoying. Similarly, if you have byte offsets but need to provide char offsets, that&#x27;s annoying too. For the same reason, I&#x27;d also advocate supporting line/column inputs too (grep provides them as well).</p>
<p>I&#x27;m not sure what the typical use case for these flags are though, and I&#x27;m sure that would have an impact on what we accept.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-01-31 18:23</div>
            <div class="timeline-body"><p>@BurntSushi the tooling support is an interesting consideration, although I don&#x27;t really know what the use cases are for using range formatting over the CLI other than from an editor integration. And even there, I would advocate using the LSP instead that supports UTF32, UTF16, and UTF8 offsets.</p>
<p>For today, I don&#x27;t think I want to support multiple encodings because we aren&#x27;t aware of any use case. However, it would be nice if the design supported different encodings:</p>
<ul>
<li>One option is to use different syntaxes, e.g. <code>row:col</code> and <code>codepoint</code>. However, this doesn&#x27;t really support UTF8 vs codepoint. We could extend it further with <code>cell:row:col</code> for notebook support</li>
<li>separate --range-encoding option that can either be bytes, codepoints where <code>row:col</code> would be changed to <code>row:bytes</code> when used with <code>bytes</code>. The benefit of this approach is that we don&#x27;t need to ship it today.</li>
</ul>
<p>I could see us do both to allow the most flexibility but I think it&#x27;s something we can defer until we know of actual use cases needing a different encoding (and they cant use the LSP).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-01-31 18:26</div>
            <div class="timeline-body"><p>Yeah if you don&#x27;t anticipate this being used by users directly and instead only with editor integrations, then I absolutely defer to you and whatever is most convenient in that context. It might be worth calling that out in the docs too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-01-31 19:32</div>
            <div class="timeline-body"><p>If we don&#x27;t expect users to call this directly we should hide it from the CLI help menus</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-01-31 21:10</div>
            <div class="timeline-body"><blockquote>
<p>If we don&#x27;t expect users to call this directly we should hide it from the CLI help menus</p>
</blockquote>
<p>I&#x27;m not convinced that hiding options solves the problem. It is a public API as soon as we add it, even if undocumented. That&#x27;s why I prefer documenting the behaviour even if I would prefer not having to expose it at all.</p>
<p>@BurntSushi it&#x27;s not that I&#x27;m not anticipating other use cases. It&#x27;s just that I want to focus on the use case at hand. What&#x27;s important to me is that the design allows us to support other potential use cases in the future, without having to redesign all options. That&#x27;s why your feedback is very valuable and we should explore alternative options more if you aren&#x27;t convinced that the one that I outlined are sufficient.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/args.rs</code>:452 on 2024-01-31 21:43</div>
            <div class="timeline-body"><p>What if we used <code>range_start_char</code> and <code>range_end_char</code>? Would that help future-proof the API?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/commands/format.rs</code>:270 on 2024-01-31 21:45</div>
            <div class="timeline-body"><p>I might consider <code>let cache = cache.filter(|_| range.is_none())</code> to make sure I didn&#x27;t miss any usages of <code>cache</code> below.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2024-01-31 21:45</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-01-31 22:08</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff/src/args.rs</code>:452 on 2024-01-31 22:08</div>
            <div class="timeline-body"><p>What about <code>range_start_codepoint</code> instead? (Since I think &quot;character&quot; is ambiguous here.) It&#x27;s a little long, but it&#x27;s probably better to start longer and come up with shorter names later if new use cases arise.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-01-31 22:15</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>If we don&#x27;t expect users to call this directly we should hide it from the CLI help menus</p>
</blockquote>
<p>I&#x27;m not convinced that hiding options solves the problem. It is a public API as soon as we add it, even if undocumented. That&#x27;s why I prefer documenting the behaviour even if I would prefer not having to expose it at all.</p>
</blockquote>
<p>Yeah I&#x27;d rather it be in <code>--help</code> too. Otherwise if someone finds themselves debugging editor integrations (or whatever) and don&#x27;t see the flags in <code>--help</code>, I could imagine that being pretty disorienting.</p>
<blockquote>
<p>@BurntSushi it&#x27;s not that I&#x27;m not anticipating other use cases. It&#x27;s just that I want to focus on the use case at hand. What&#x27;s important to me is that the design allows us to support other potential use cases in the future, without having to redesign all options. That&#x27;s why your feedback is very valuable and we should explore alternative options more if you aren&#x27;t convinced that the one that I outlined are sufficient.</p>
</blockquote>
<p>Probably &quot;sufficient&quot; isn&#x27;t the right word. It&#x27;s not that codepoint offsets won&#x27;t work. They will. It&#x27;s a sound approach. I&#x27;m mostly just making the argument that, in my experience, byte offsets tend to be easier to come by.</p>
<p>If we&#x27;re just looking for a path forward here that doesn&#x27;t requiring potentially redesigning everything, then @charliermarsh&#x27;s idea seems okay. To be clear, I agree with you that these flags will probably only really be used by editor integrations and not by end users directly. So in that sense, being more flexible in what we accept is maybe not so important.</p>
<p>If you asked me what my ideal design was <em>and</em> we had a good reason to believe these flags might be used outside of editor integrations, then I think I&#x27;d add one flag called <code>--range</code> with its own little DSL for specifying ranges. e.g., <code>--range &#x27;codepoint(start-end)&#x27;</code> or <code>--range &#x27;bytes(start-end)&#x27;</code> or <code>--range &#x27;lines(start-end)&#x27;</code> and do things that way. But that&#x27;s a fair bit of work. And if we start with <code>--range-start-codepoint/--range-end-codepoint</code>, then we can always add a hypothetical <code>--range</code> flag later if there&#x27;s user demand.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-02-01 05:43</div>
            <div class="timeline-body"><p>For reference,</p>
<ul>
<li><code>black</code> supports line ranges (<code>--line-ranges</code>)</li>
<li><code>stylua</code> supports byte offsets (<code>--range-start</code>, <code>--range-end</code>)</li>
<li><code>prettier</code> supports character offsets (<code>--range-start</code>, <code>--range-end</code>)</li>
<li><code>clang-format</code> supports both line ranges and byte offsets (<code>--offset</code> with <code>--length</code>, <code>--lines</code>)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-01 13:48</div>
            <div class="timeline-body"><p>I&#x27;ll reply in more depth but one thing to consider is that powershell&#x27;s <code>IndexOf</code> method make it easy to find the index of a substring. Getting the UTF8 byte offset is more involved (also true in Python where you need to encode the string in UTF8 first).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-02 09:31</div>
            <div class="timeline-body"><p>I&#x27;m leaning toward changing the input to <code>line:column</code> because:</p>
<ul>
<li>It&#x27;s the most convenient for users: Open your editor and you can see the numbers right there</li>
<li>It&#x27;s what we get in the LSP</li>
<li>it allows us to later add our own DSL for providing codepoint or byte offsets.</li>
<li>Using byte offsets over code point offsets favors UNIX users because getting the byte offset seems easier on UNIX but is more involved on Windows. Using code points is true the other way</li>
</ul>
<p>The downside of this is that it may require users to convert from a byte offset to line/column number if they want to use this feature in an automated way. I think I&#x27;m fine with this as a compromise for now because some tools provide line/column number output and converting a byte offset to a line number can be done using <code>wc</code> or <code>String-Content</code> (the range would be slightly larger but than providing exact ranges but that&#x27;s probably neglectable).</p>
<p>The only remaining question is if it should be single or multiple arguments. I think I&#x27;ll go with a single argument because supporting a custom DSL where you specify the range type is more awkward with multiple options.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Add `--range-start` and `--range-end` options to `ruff format`&quot; to &quot;Add `--range` option to `ruff format`&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-02 16:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-02-02 16:51</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/args.rs</code>:452 on 2024-02-02 16:51</div>
            <div class="timeline-body"><p>Resolved, because it&#x27;s now a single option</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-02-02 16:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/commands/format.rs</code>:270 on 2024-02-02 16:52</div>
            <div class="timeline-body"><p>Excellent point</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/BurntSushi">@BurntSushi</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-02 16:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff/tests/format.rs</code>:1812 on 2024-02-02 16:59</div>
            <div class="timeline-body"><p>I&#x27;d suggest adding a test with some Python source that contains non-ASCII Unicode codepoints here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>docs/configuration.md</code>:657 on 2024-02-02 17:02</div>
            <div class="timeline-body"><p>Hmmm should this say more about what <code>&lt;RANGE&gt;</code> is? (I know this is the auto-generated docs. It looks like it&#x27;s generated from a Rust doc comment? And that comment appears to have more details...)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on <code>crates/ruff/src/args.rs</code>:452 on 2024-02-02 17:05</div>
            <div class="timeline-body"><p>Is column a byte offset, codepoint offset or a grapheme cluster offset? :-)</p>
<p>(I think the &quot;most correct&quot; thing is a grapheme cluster offset... But this is another thorny question about what inputs will be produced. And this could likely come up, e.g., with emoji in strings. If an emoji has multiple codepoints in it and column numbers are counted by codepoint by Ruff but by grapheme cluster in the editor, that could lead to a mismatch.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a> reviewed on 2024-02-02 17:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-02-02 17:18</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/args.rs</code>:452 on 2024-02-02 17:18</div>
            <div class="timeline-body"><p>I&#x27;ll extend the documentation but I&#x27;ll go with codepoint because that&#x27;s what we get from VS Code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/configuration.md</code>:657 on 2024-02-02 17:19</div>
            <div class="timeline-body"><p>I suspect it only takes the first paragraph?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/configuration.md</code>:657 on 2024-02-02 17:46</div>
            <div class="timeline-body"><p>Okay, I have no idea what it does. It also removes all terminating <code>.</code>.. ugh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-02-02 17:46</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-02-04 15:56</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>docs/configuration.md</code>:657 on 2024-02-04 15:56</div>
            <div class="timeline-body"><p>The script takes the short help only. I reworded the documentation so that the short help already provides some details on <code>&lt;RANGE&gt;</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2024-02-04 16:20</div>
            <div class="timeline-body"><a href="https://codspeed.io/astral-sh/ruff/branches/range-formatting-cli">CodSpeed Performance Report</a>
Merging #9733 will <strong>improve performances by 47.49%</strong>
<p>Comparing <code>range-formatting-cli</code> (ccc71db) with <code>main</code> (4f7fb56)</p>
Summary
<p><code>⚡ 10</code> improvements
<code>✅ 20</code> untouched benchmarks</p>
Benchmarks breakdown
<p>|     | Benchmark | <code>main</code> | <code>range-formatting-cli</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| ⚡ | <code>linter/all-rules[numpy/ctypeslib.py]</code> | 24 ms | 20.7 ms | +15.63% |
| ⚡ | <code>linter/all-rules[pydantic/types.py]</code> | 49.6 ms | 44 ms | +12.7% |
| ⚡ | <code>linter/all-with-preview-rules[numpy/ctypeslib.py]</code> | 34.6 ms | 23.4 ms | +47.49% |
| ⚡ | <code>linter/all-with-preview-rules[numpy/globals.py]</code> | 3.3 ms | 3.1 ms | +7.83% |
| ⚡ | <code>linter/all-rules[large/dataset.py]</code> | 108.2 ms | 93.4 ms | +15.81% |
| ⚡ | <code>linter/all-with-preview-rules[unicode/pypinyin.py]</code> | 13.3 ms | 11.8 ms | +11.91% |
| ⚡ | <code>linter/all-rules[unicode/pypinyin.py]</code> | 12.5 ms | 10.8 ms | +14.94% |
| ⚡ | <code>linter/all-rules[numpy/globals.py]</code> | 3 ms | 2.8 ms | +7.68% |
| ⚡ | <code>linter/all-with-preview-rules[large/dataset.py]</code> | 121.6 ms | 105.1 ms | +15.71% |
| ⚡ | <code>linter/all-with-preview-rules[pydantic/types.py]</code> | 63.8 ms | 51.4 ms | +24.29% |</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/T-256">@T-256</a> reviewed on 2024-02-04 16:49</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/T-256">@T-256</a> on <code>crates/ruff/src/args.rs</code>:452 on 2024-02-04 16:49</div>
            <div class="timeline-body"><pre><code>    /// The `&lt;RANGE&gt;` uses the format `&lt;start_line&gt;:&lt;start_column&gt;-&lt;end_line&gt;:&lt;end_column&gt;`.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-02-04 17:12</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff/src/args.rs</code>:452 on 2024-02-04 17:12</div>
            <div class="timeline-body"><p>Thx</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-04 17:41</div>
            <div class="timeline-body"><p>What’s the scoop with the benchmarks?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-05 02:40</div>
            <div class="timeline-body"><blockquote>
<p>What’s the scoop with the benchmarks?</p>
</blockquote>
<p>It&#x27;s most likely that I need to rebase my changes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-05 19:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-05 19:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-02-05 19:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:01:16 UTC
    </footer>
</body>
</html>
