<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expand note to use Ruff with other language server in Kate - astral-sh/ruff #12806</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Expand note to use Ruff with other language server in Kate</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/12806">#12806</a>
        opened by <a href="https://github.com/tfardet">@tfardet</a>
        on 2024-08-11 21:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tfardet">@tfardet</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Provide instructions to use Ruff together with other servers in the Kate editor.
Because Kate does not support running multiple servers for the same language, one needs to use the <code>python-lsp-server</code> (pylsp) tool.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> reviewed on 2024-08-12 05:23</div>
            <div class="timeline-body"><p>Thank you for working on this!</p>
<p>I'm a bit hesitant on including this section with all the details as provided here. We had a section for <code>python-lsp-ruff</code> before the stable release of the Ruff language server (https://github.com/astral-sh/ruff/blob/7a7c601d5ed294a3c868b5e83f757105e0a189b8/docs/integrations.md#language-server-protocol-unofficial) but we removed it in favor of promoting the native language server. Another important difference with <code>python-lsp-ruff</code> is that it uses the <code>ruff</code> executable which means that the <a href="https://docs.astral.sh/ruff/editors/settings">server settings</a> won't be considered if provided.</p>
<p>That said, what we could do is to expand on the <code>important</code> note section stating that if someone would like to use Ruff along with another language server, the <code>python-lsp</code> can be used as a language server along with the <code>python-lsp-ruff</code> plugin. We should also state that the Ruff plugin used here would be through the executable. You might want to paraphrase this.</p>
<p>What do you think about this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @dhruvmanila on 2024-08-12 05:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tfardet">@tfardet</a> on 2024-08-12 05:54</div>
            <div class="timeline-body"><p>Hi @dhruvmanila could you elaborate on the settings part?
As far as I can tell, you can provide a toml file via the <a href="https://github.com/python-lsp/python-lsp-ruff?tab=readme-ov-file#configuration">pylsp-ruff &quot;config&quot; option</a>. Do you mean that the <code>ruff</code> executable and the language server have different options, or did I misunderstand?</p>
<p>Otherwise, just let me tell you why I did it that way:</p>
<ul>
<li>I don't think many people are knowledgeable about tools like ruff, jedi, or pylsp, so providing a config file they can simply copy-paste and have things work (well, almost, since they need to specify the path) is desirable</li>
<li>Quite frankly, I don't think anyone would want to use the current configuration instructions for Kate since they make it lose basic goto functionalities</li>
<li>It also took me quite a while to figure this out, so I thought I would just save others the trouble by providing everything ðŸ˜‰</li>
<li>using &quot;details&quot;, it doesn't really take much space and I would not expect these instructions to be much of a maintenance burden</li>
</ul>
<p>That being said, I understand if you do not want to risk that burden, or having people asking about how to use pylsp-ruff in your issue tracker.
In that case let me know if adding a disclaimer at the top of the details to tell people they should ask pylsp-ruff people if anything doesn't work would be enough, otherwise I'll just remove the details and paraphrase what you said, as requested.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @dhruvmanila by @MichaReiser on 2024-08-14 08:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-14 09:38</div>
            <div class="timeline-body"><blockquote>
<p>As far as I can tell, you can provide a toml file via the <a href="https://github.com/python-lsp/python-lsp-ruff?tab=readme-ov-file#configuration">pylsp-ruff &quot;config&quot; option</a>. Do you mean that the <code>ruff</code> executable and the language server have different options, or did I misunderstand?</p>
</blockquote>
<p>I mean the server settings as mentioned here: https://docs.astral.sh/ruff/editors/settings. Some of them controls the behavior of the server itself (<code>ruff.lint.enable</code>, etc.) while others overrides the config values (<code>ruff.lint.select</code>, etc.).</p>
<p>I think your reasoning makes sense but I'd rather prefer to re-use existing resources from other documentations. There have been some confusion in the past with how the server settings are suppose to work like https://github.com/astral-sh/ruff/issues/12778 and https://github.com/astral-sh/ruff/issues/12514 where the users were confused that the server settings weren't being considered when running the linter / formatter.</p>
<p>I think having a general guide on how to setup the <code>python-lsp-server</code> in Kate would be useful to more users while having it here would only benefit the Ruff users.
I think a <em>general</em> user of <code>python-lsp-server</code> would find it more useful to refer to a guide on setting it up in Kate rather than a <em>Ruff</em> user. It's not about maintenance burden but thinking on how much benefit does this provide to Ruff users. I hope this reasoning makes sense.</p>
<p>That said, I think it would be more useful to expand the note by informing the users that they could use <code>python-lsp-server</code> along with <code>python-lsp-ruff</code> to use Ruff with an existing language server along with relevant references like <a href="https://github.com/python-lsp/python-lsp-ruff#configuration"><code>python-lsp-ruff</code> configuration options</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tfardet">@tfardet</a> on 2024-08-14 10:00</div>
            <div class="timeline-body"><blockquote>
<p>I mean the server settings as mentioned here: https://docs.astral.sh/ruff/editors/settings. Some of them controls the behavior of the server itself (<code>ruff.lint.enable</code>, etc.) while others overrides the config values (<code>ruff.lint.select</code>, etc.).</p>
<p>I think your reasoning makes sense but I'd rather prefer to re-use existing resources from other documentations. There have been some confusion in the past with how the server settings are suppose to work like #12778 and #12514 where the users were confused that the server settings weren't being considered when running the linter / formatter.</p>
</blockquote>
<p>OK, I think this should probably be mentioned in the note, then.
Since you have much more experience with this confusion issue, would you have an idea about how to phrase that?</p>
<blockquote>
<p>I think having a general guide on how to setup the <code>python-lsp-server</code> in Kate would be useful to more users while having it here would only benefit the Ruff users. I think a <em>general</em> user of <code>python-lsp-server</code> would find it more useful to refer to a guide on setting it up in Kate rather than a <em>Ruff</em> user. It's not about maintenance burden but thinking on how much benefit does this provide to Ruff users. I hope this reasoning makes sense.</p>
</blockquote>
<p>As I mentioned, I don't think people know much about these tools and would expect them to have heard (like me) that ruff is super fast and so they would want to use it and would just arrive on the ruff docs without prior knowledge.</p>
<p>However, I  completely understand your reasoning and definitely agree that it would be better to have the detailed doc where it belongs (somewhere in the pylsp ecosystem) and just link to it in the ruff documentation.</p>
<blockquote>
<p>That said, I think it would be more useful to expand the note by informing the users that they could use <code>python-lsp-server</code> along with <code>python-lsp-ruff</code> to use Ruff with an existing language server along with relevant references like <a href="https://github.com/python-lsp/python-lsp-ruff#configuration"><code>python-lsp-ruff</code> configuration options</a>.</p>
</blockquote>
<p>I'll propose something along those lines, then, and maybe I'll make another PR once I have added the detailed configuration somewhere in the pylsp documentation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @dhruvmanila on 2024-08-16 05:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review request for @dhruvmanila removed by @dhruvmanila on 2024-08-16 05:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @dhruvmanila on 2024-08-16 05:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> approved on 2024-08-20 06:11</div>
            <div class="timeline-body"><p>I expanded the &quot;important&quot; note for the Kate setup guide with a workaround for using Ruff with another language server. Feel free to provide any thoughts on that. I'll merge this for now but happy to take any follow-ups if you have any in mind. Thanks for the suggestion and opening this PR.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Instructions to use Ruff with other servers in Kate" to "Expand note to use Ruff with other language server in Kate" by @dhruvmanila on 2024-08-20 06:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dhruvmanila on 2024-08-20 06:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2024-08-20 06:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tfardet">@tfardet</a> on 2024-08-20 07:05</div>
            <div class="timeline-body"><p>OK, that seems reasonable! I'll try to propose something to python-lsp people, thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:05:51 UTC
    </footer>
</body>
</html>
