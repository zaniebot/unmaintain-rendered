<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F841: support fixing unused assignments in tuples by renaming variables - astral-sh/ruff #9107</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>F841: support fixing unused assignments in tuples by renaming variables</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/9107">#9107</a>
        opened by <a href="https://github.com/sciyoshi">@sciyoshi</a>
        on 2023-12-12 16:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sciyoshi">@sciyoshi</a></div>
            <div class="timeline-body">Summary
<p>A fairly common pattern which triggers F841 is unused variables from tuple assignments, e.g.:</p>
<pre><code>user, created = User.objects.get_or_create(...)
      ^ F841: Local variable `created` is assigned to but never used</code></pre>
<p>This error is currently not auto-fixable.</p>
<p>This PR adds support for fixing the error automatically by renaming the unused variable to have a leading underscore (i.e. <code>_created</code>) <strong>iff</strong> the <code>dummy-variable-rgx</code> setting would match it.</p>
<p>I considered using <code>renamers::Renamer</code> here, but because by the nature of the error there should be no references to it, that seemed like overkill. Also note that the fix might break by shadowing the new name if it is already used elsewhere in the scope. I left it as is because</p>
<ol>
<li>the renamed variable matches the &quot;unused&quot; regex, so it should hopefully not already be used,</li>
<li>the fix is marked as unsafe so it should be reviewed manually anyways, and</li>
<li>I&#x27;m not actually sure how to check the scope for the new variable name ðŸ˜…</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-12-12 17:18</div>
            <div class="timeline-body">

<code>ruff-ecosystem</code> results
Linter (stable)
<p>âœ… ecosystem check detected no linter changes.</p>
Linter (preview)
<p>âœ… ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-12-12 18:22</div>
            <div class="timeline-body"><p>Nice, this makes sense to me. Appreciate the clear rationale too!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">autofix</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-12 18:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-12 18:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-12 18:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-12-12 18:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:59:57 UTC
    </footer>
</body>
</html>
