<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pylint`] Mark `PLC0207` fixes as unsafe when `*args` unpacking is present - astral-sh/ruff #19679</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>pylint</code>] Mark <code>PLC0207</code> fixes as unsafe when <code>*args</code> unpacking is present</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19679">#19679</a>
        opened by <a href="https://github.com/danparizher">@danparizher</a>
        on 2025-08-01 04:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/danparizher">@danparizher</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Fixes #19660</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-08-01 04:28</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>âœ… ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>âœ… ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-08-01 17:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by @ntBre on 2025-08-01 17:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/pylint/rules/missing_maxsplit_arg.rs</code>:42 on 2025-08-01 17:47</div>
            <div class="timeline-body"><p>This sounds slightly awkward to me. What about something like:</p>
<pre><code class="language-suggestion">/// This rule's fix is marked as unsafe for `split()`/`rsplit()` calls that contain `*args` or `**kwargs` arguments, as
/// adding a `maxsplit` argument to such a call may lead to duplicated arguments.
</code></pre>
<p>Ideally re-wrapped to 80 or 100 columns. I may have said &quot;arguments&quot; too many times, but this is a little closer to what I want, I think.</p>
<p>I kind of like covering both &quot;duplicate&quot; and &quot;too many&quot; arguments, but I wasn't sure it worked with the rest of it. I think &quot;duplicate(d)&quot; covers both cases well enough, but I'm open to alternatives.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/src/rules/pylint/rules/missing_maxsplit_arg.rs</code>:204 on 2025-08-01 17:50</div>
            <div class="timeline-body"><p>Another docs nit:</p>
<pre><code class="language-suggestion">        // Mark the fix as unsafe, if there are `*args` or `**kwargs`
</code></pre>
<p>I didn't mind the <code>keyword.arg is None</code> part before, but I guess it's pretty self-explanatory with the code just below it. If you want to try to work the parentheticals back in, it's fine with me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ntBre">@ntBre</a> on <code>crates/ruff_linter/resources/test/fixtures/pylint/missing_maxsplit_arg.py</code>:208 on 2025-08-01 17:58</div>
            <div class="timeline-body"><p>These last two aren't actually producing errors. We explicitly look for <code>**{}</code> (unpacked dict <em>literal</em>) in this rule, unlike most cases, so I think you'd need to use a variable here or otherwise modify the test if you want to try both <code>*args</code> and <code>**kwargs</code>.</p>
<p>However, I'm not sure we really need this many test cases for this. The fix in the Rust code is simple enough I'd probably be fine with just one. Are there interesting edge cases among these that I might be missing here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> approved on 2025-08-01 17:59</div>
            <div class="timeline-body"><p>Thanks! The code fix looks perfect to me, just a couple of docs nits and a question/suggestion about tests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dylwil3">@dylwil3</a> approved on 2025-08-01 18:00</div>
            <div class="timeline-body"><p>Thank you! LGTM</p>
<p>Edit: whoops, didn't see Brent reviewing - and being more helpful and discerning ðŸ˜…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/danparizher">@danparizher</a> on <code>crates/ruff_linter/resources/test/fixtures/pylint/missing_maxsplit_arg.py</code>:208 on 2025-08-01 21:28</div>
            <div class="timeline-body"><p>Unless we want to test for some pathological cases (like multiple unpacked dicts or weird combinations), I think a single test for each of these patterns is enough. I don't see any edge cases we're missing that would meaningfully change the rule's behavior.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/danparizher">@danparizher</a> reviewed on 2025-08-01 21:28</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @ntBre by @danparizher on 2025-08-01 21:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a> approved on 2025-08-06 18:19</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @ntBre on 2025-08-06 18:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-08-06 18:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-08-06 18:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:14:43 UTC
    </footer>
</body>
</html>
