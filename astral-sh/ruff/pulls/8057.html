<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change `line-ending` default to `auto` - astral-sh/ruff #8057</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Change <code>line-ending</code> default to <code>auto</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/8057">#8057</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2023-10-19 02:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>This PR changes the <code>format.line-ending</code> default from <code>lf</code> to <code>auto</code>.</p>
<p>The motivation for defaulting to <code>lf</code> is to ensure all files in a project use the same line ending, regardless of the file author's platform. However, it has the downside that it results in unexpected line-ending changes for existing projects that use a mixture of <code>\n</code> and <code>\r\n</code> and projects that use windows only.
We haven't received much feedback on the <code>lf</code> default, but there has been at least one occurrence where a user was confused about why Ruff changed all lines.
They struggled to understand the changes because many diff viewers hide whitespace changes by default.
We also put them in an uncomfortable position because they were unfamiliar with line endings (the difference between <code>\n</code> and <code>\r\n</code>) and didn't know what option to choose. So they defaulted to <code>auto</code> because it seems like the most clever option that hopefully does the right thing for them.</p>
<h2>Breaking Change</h2>
<p>While this is a breaking change because it changes the configuration, it doesn't require a new minor version because the formatter is still in alpha (excluded from versioning).</p>
<h2>Test Plan</h2>
<p>I added a new integration test that ensures the formatter preserves the line ending choice when run without any options.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-19 02:06</div>
            <div class="timeline-body"><p>Current dependencies on/for this PR:</p>
<ul>
<li>main<ul>
<li><strong>PR #8057</strong> <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8057" target="_blank"><img src="https://static.graphite.dev/graphite-32x32-black.png" alt="Graphite" width="10px" height="10px"/></a>  üëà</li>
</ul>
</li>
</ul>
<p>This comment was auto-generated by <a href="https://app.graphite.dev/github/pr/astral-sh/ruff/8057?utm_source=stack-comment">Graphite</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">breaking</span> added by @MichaReiser on 2023-10-19 02:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @MichaReiser on 2023-10-19 02:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @charliermarsh by @MichaReiser on 2023-10-19 02:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @zanieb by @MichaReiser on 2023-10-19 02:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-10-19 02:21</div>
            <div class="timeline-body"><h2>PR Check Results</h2>
<h3>Ecosystem</h3>
<p>‚úÖ ecosystem check detected no changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-10-19 03:12</div>
            <div class="timeline-body"><p>üëç üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2023-10-19 23:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2023-10-19 23:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-10-19 23:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Cjkjvfnby">@Cjkjvfnby</a> on 2023-10-21 10:45</div>
            <div class="timeline-body"><p>Thank you!</p>
<p>I got the problem with this default on my regular project on Windows. Git manages line endings for me: https://docs.github.com/en/get-started/getting-started-with-git/configuring-git-to-handle-line-endings.  So changes are committed in UNIX style and code on my machine is in Windows style.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Cjkjvfnby">@Cjkjvfnby</a> on 2023-10-21 10:52</div>
            <div class="timeline-body"><p>Although <code>auto</code> is a great option.  For my projects, I'd prefer to use <code>native</code>.  It ensures that all my files are done the same way.  All projects I have seen with mixed line endings we more resulted in the absence of the tools for fixing it, it was not something that was required.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:00:55 UTC
    </footer>
</body>
</html>
