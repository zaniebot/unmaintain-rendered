<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] Add ecosystem-report workflow - astral-sh/ruff #19349</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] Add ecosystem-report workflow</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/19349">#19349</a>
        opened by <a href="https://github.com/sharkdp">@sharkdp</a>
        on 2025-07-15 10:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Adds a new workflow that generates an ecosystem report like <a href="https://shark.fish/ecosystem-report.html">this</a> and publishes it to Cloudflare pages.</p>
<h2>Test Plan</h2>
<p>Not yet tested.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by @sharkdp on 2025-07-15 10:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by @sharkdp on 2025-07-15 10:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @Copilot by @sharkdp on 2025-07-15 10:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/copilot-pull-request-reviewer[bot]">@copilot-pull-request-reviewer[bot]</a> reviewed on 2025-07-15 10:22</div>
            <div class="timeline-body"><h2>Pull Request Overview</h2>
<p>Adds a scheduled GitHub Actions workflow that analyzes the repository, generates an ecosystem report, and deploys it to Cloudflare Pages.</p>
<ul>
<li>Introduces <code>ty-ecosystem-report.yaml</code> to run the ecosystem-analyzer on a weekly schedule (and on demand).</li>
<li>Updates <code>.github/zizmor.yml</code> to include the new workflow in the repository’s workflow rules.</li>
</ul>
<h3>Reviewed Changes</h3>
<p>Copilot reviewed 2 out of 2 changed files in this pull request and generated no comments.</p>
<p>| File | Description |
| ---- | ----------- |
| .github/zizmor.yml | Added <code>ty-ecosystem-report.yaml</code> to the list of workflows tracked by zizmor. |
| .github/workflows/ty-ecosystem-report.yaml | New workflow to checkout code, run the ecosystem-analyzer tool, generate an HTML report, and deploy to Cloudflare Pages. |</p>
<details>
<summary>Comments suppressed due to low confidence (4)</summary>

<p><strong>.github/workflows/ty-ecosystem-report.yaml:38</strong></p>
<ul>
<li>[nitpick] The step name &quot;Install Rust toolchain&quot; doesn’t match the command <code>rustup show</code>, which only displays the current toolchain. Consider renaming the step to reflect its purpose (e.g., &quot;Show Rust toolchain&quot;) or updating the command to actually install a specific toolchain.</li>
</ul>
<pre><code>      - name: Install Rust toolchain
</code></pre>
<p><strong>.github/workflows/ty-ecosystem-report.yaml:17</strong></p>
<ul>
<li>Defining <code>CF_API_TOKEN_EXISTS</code> as a boolean and then comparing it to the string <code>'true'</code> in the conditional may prevent the deploy step from running even when the token is set. You can simplify by using the secret directly in the <code>if</code>, for example: <code>if: ${{ secrets.CF_API_TOKEN != '' }}</code>.</li>
</ul>
<pre><code>  CF_API_TOKEN_EXISTS: ${{ secrets.CF_API_TOKEN != '' }}
</code></pre>
<p><strong>.github/workflows/ty-ecosystem-report.yaml:25</strong></p>
<ul>
<li>[nitpick] The checkout action is pinned to a specific commit SHA, which can make future updates harder to track. Consider using a release tag (e.g., <code>actions/checkout@v4</code>) for clearer intent and simpler upgrades.</li>
</ul>
<pre><code>      - uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4.2.2
</code></pre>
<p><strong>.github/workflows/ty-ecosystem-report.yaml:3</strong></p>
<ul>
<li>The workflow’s <code>permissions: {}</code> configuration revokes all permissions by default. Verify that the deploy step (Cloudflare Pages via wrangler) has any required permissions (e.g., <code>pages: write</code> or <code>id-token: write</code>) or confirm that no additional permissions are needed.</li>
</ul>
<pre><code>permissions: {}
</code></pre>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-07-15 10:29</div>
            <div class="timeline-body"><p>Will merge to test this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @sharkdp on 2025-07-15 10:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sharkdp on 2025-07-15 10:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-07-15 10:29</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:14:16 UTC
    </footer>
</body>
</html>
