<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Re-enable the T and C linter prefix selectors - astral-sh/ruff #3452</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Re-enable the T and C linter prefix selectors</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/3452">#3452</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-03-11 20:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-11 20:38</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>In one of the prior refactors around lint rule prefixes, we removed the <code>T</code> and <code>C</code> selectors.</p>
<p>To take <code>T</code> as an example, the issue is that we have two &quot;linters&quot; that both use the <code>T</code> prefix -- <code>flake8-debugger</code>, whose rules are (e.g.) <code>T100</code>, and <code>flake8-print</code>, whose rules are (e.g.) <code>T201</code>. In the refactored model, <code>flake8-debugger</code> was represented as having a prefix of <code>T10</code>, and a rule under that prefix with code <code>0</code>, which combines to an overall selector of <code>T100</code>.</p>
<p>Under this scheme, if the user provides the <code>T</code> prefix, we don't know where to map that code. Prior to this PR, it was redirected to <code>T10</code>, so if a user provided <code>--select T</code>, that aliased to <code>--select T10</code>, which enabled rule <code>T100</code>, thus ignoring the <code>flake8-print</code> rules entirely. I believe this was unintentional.</p>
<p>The same problem exists with the <code>C</code> prefix, where we have both the McCabe complexity and <code>flake8-comprehensions</code> rules. The McCabe rules no longer run under <code>--select C</code>, because it was redirected to <code>C40</code>.</p>
<p>This PR special-cases those two prefixes, introducing custom selectors for <code>T</code> and <code>C</code> to re-enable the expected user behavior.</p>
<p>Closes #3052.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-03-11 20:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-03-11 20:48</div>
            <div class="timeline-body"><p>âœ… ecosystem check detected no changes.</p>
<!-- thollander/actions-comment-pull-request "ecosystem-results" -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @konstin by @charliermarsh on 2023-03-11 20:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @charliermarsh on 2023-03-11 20:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>crates/ruff/src/rule_redirects.rs</code>:21 on 2023-03-11 20:50</div>
            <div class="timeline-body"><p>No longer need to redirect these at all, since they have their own custom selectors.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-03-11 20:50</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-11 20:53</div>
            <div class="timeline-body"><p>There are likely further refactors we can do here, but I'd like to get this out in the next release as it's probably surprising to users that certain codes are no longer enforced despite no change in their selectors (e.g., <code>select = [&quot;C&quot;]</code> no longer runs the complexity checks).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2023-03-13 08:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> approved on 2023-03-13 09:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @charliermarsh on 2023-03-13 12:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-03-13 12:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-03-13 12:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 04:41:43 UTC
    </footer>
</body>
</html>
