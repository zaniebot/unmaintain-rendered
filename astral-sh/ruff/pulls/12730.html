<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setup tracing and document tracing usage - astral-sh/ruff #12730</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Setup tracing and document tracing usage</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/12730">#12730</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2024-08-07 11:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><p>This PR extends our tracing configuration with more refined verbosity levels and adds a small guide on how/when to use tracing.</p>
<h2>Filtering</h2>
<p>I haven't figured out how to do field-level filtering. It is supported according to the <code>EnvFilter</code> docs but I always get too many events even if I write complete rubbish field filters ;(</p>
<h2>Existing messages</h2>
<p>We should revisit our existing messages and improve them. But we can do so while working on the relevant code and as we learn more about logging.</p>
<h2>When to use instrument</h2>
<p>My take on this is that <code>instrument</code> helps us to get nice flamegraphs and to attribute events to specific spans. I'm not entirely sure yet what the right amount of <code>instrument</code> attributes is. I suspect that we currently have too many.  Let's figure this out over time.</p>
<h2>Test plan</h2>
<p><strong>Using <code>-v</code></strong></p>
<pre><code>INFO Target version: py38
</code></pre>
<p><strong>Using <code>-vv</code></strong></p>
<pre><code>2024-08-07 15:21:47.531307982 DEBUG Checking workspace
2024-08-07 15:21:47.531494121 DEBUG Checking package /home/micha/astral/test
2024-08-07 15:21:47.535507928 DEBUG Checking file /home/micha/astral/test/c.py
2024-08-07 15:21:47.536372106 INFO Target version: py38
2024-08-07 15:21:47.536477595 DEBUG Resolved module 'child.a' to '/home/micha/astral/test/child/a.py'.
2024-08-07 15:21:47.539610905 DEBUG Resolved module 'typing' to 'stdlib/typing.pyi'.
2024-08-07 15:21:47.552381082 DEBUG Resolved module 'builtins' to 'stdlib/builtins.pyi'.
2024-08-07 15:21:47.585516812 DEBUG Module 'b' not found in the search paths.
2024-08-07 15:21:47.585969620 DEBUG Checking file /home/micha/astral/test/symlinks/foo.py
2024-08-07 15:21:47.586249639 DEBUG Resolved module 'bar.baz' to '/home/micha/astral/test/bar/baz.py'.
2024-08-07 15:21:47.586441368 DEBUG Checking file /home/micha/astral/test/bar/__init__.py
2024-08-07 15:21:47.586548578 DEBUG Checking file /home/micha/astral/test/hard-links/main.py
2024-08-07 15:21:47.586859207 DEBUG Module 'a' not found in the search paths.
2024-08-07 15:21:47.587004216 DEBUG Module 'a_alias' not found in the search paths.
2024-08-07 15:21:47.587320915 DEBUG Checking file /home/micha/astral/test/hard-links/a.py
2024-08-07 15:21:47.587575634 DEBUG Checking file /home/micha/astral/test/test-notebook.ipynb
2024-08-07 15:21:47.588266662 DEBUG Resolved module 'random' to 'stdlib/random.pyi'.
2024-08-07 15:21:47.588515651 DEBUG Resolved module 'x' to '/home/micha/astral/test/x.py'.
2024-08-07 15:21:47.588970629 DEBUG Checking file /home/micha/astral/test/x.py
2024-08-07 15:21:47.589287938 DEBUG Checking file /home/micha/astral/test/bar/baz.py
2024-08-07 15:21:47.589447748 DEBUG Checking file /home/micha/astral/test/hard-links/sub/a.py
2024-08-07 15:21:47.589697997 DEBUG Checking file /home/micha/astral/test/child/a.py
2024-08-07 15:21:47.589832246 DEBUG Checking file /home/micha/astral/test/child3/a.py
2024-08-07 15:21:47.590109115 DEBUG Checking file /home/micha/astral/test/child2/a.py
2024-08-07 15:21:47.590360335 DEBUG Checking file /home/micha/astral/test/test.py
2024-08-07 15:21:47.591255552 DEBUG Resolved module '_typeshed' to 'stdlib/_typeshed/__init__.pyi'.
2024-08-07 15:21:47.596300975 DEBUG Checking file /home/micha/astral/test/hard-links/a_alias.py
2024-08-07 15:21:47.596563415 DEBUG Checking file /home/micha/astral/test/child/__init__.py
2024-08-07 15:21:47.596673024 DEBUG Checking file /home/micha/astral/test/child3/__init__.py
2024-08-07 15:21:47.596774514 DEBUG Checking file /home/micha/astral/test/child2/__init__.py
2024-08-07 15:21:47.596876443 DEBUG Checking file /home/micha/astral/test/y.py
2024-08-07 15:21:47.597101013 DEBUG Checking file /home/micha/astral/test/hard-links/parent_test.py
</code></pre>
<p><strong>Using <code>-vvv</code> in release mode</strong></p>
<pre><code>24┐red_knot_workspace::workspace::check{}
24├─   0.000975s   0ms DEBUG red_knot_workspace::workspace Checking workspace
24└─┐red_knot_workspace::workspace::check{self=Package { [salsa id]: Id(0) }}
24  ├─   0.000990s   0ms DEBUG red_knot_workspace::workspace Checking package /home/micha/astral/test
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/child3/a.py&quot;)}
24    ├─   0.003016s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/child3/a.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/child3/a.py&quot;)}
24      ├─   0.003182s   0ms  INFO red_knot_module_resolver::resolver Target version: py38
24      ├─   0.003698s   0ms DEBUG red_knot_module_resolver::resolver Resolved module 'typing' to 'stdlib/typing.pyi'.
24      ├─   0.005381s   2ms DEBUG red_knot_module_resolver::resolver Resolved module 'builtins' to 'stdlib/builtins.pyi'.
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/test-notebook.ipynb&quot;)}
24    ├─   0.009774s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/test-notebook.ipynb
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/test-notebook.ipynb&quot;)}
24      ├─   0.009876s   0ms DEBUG red_knot_module_resolver::resolver Resolved module 'random' to 'stdlib/random.pyi'.
24      ├─   0.009895s   0ms DEBUG red_knot_module_resolver::resolver Resolved module 'child.a' to '/home/micha/astral/test/child/a.py'.
24      ├─   0.009928s   0ms DEBUG red_knot_module_resolver::resolver Resolved module 'x' to '/home/micha/astral/test/x.py'.
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/y.py&quot;)}
24    ├─   0.009976s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/y.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/y.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/bar/baz.py&quot;)}
24    ├─   0.010015s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/bar/baz.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/bar/baz.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/x.py&quot;)}
24    ├─   0.010051s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/x.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/x.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/child3/__init__.py&quot;)}
24    ├─   0.010094s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/child3/__init__.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/child3/__init__.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/c.py&quot;)}
24    ├─   0.010120s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/c.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/c.py&quot;)}
24      ├─   0.010172s   0ms DEBUG red_knot_module_resolver::resolver Module 'b' not found in the search paths.
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/hard-links/main.py&quot;)}
24    ├─   0.010200s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/hard-links/main.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/hard-links/main.py&quot;)}
24      ├─   0.010241s   0ms DEBUG red_knot_module_resolver::resolver Module 'a' not found in the search paths.
24      ├─   0.010255s   0ms DEBUG red_knot_module_resolver::resolver Module 'a_alias' not found in the search paths.
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/hard-links/a_alias.py&quot;)}
24    ├─   0.010279s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/hard-links/a_alias.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/hard-links/a_alias.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/child/a.py&quot;)}
24    ├─   0.010314s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/child/a.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/child/a.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/child2/a.py&quot;)}
24    ├─   0.010331s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/child2/a.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/child2/a.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/symlinks/foo.py&quot;)}
24    ├─   0.010360s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/symlinks/foo.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/symlinks/foo.py&quot;)}
24      ├─   0.010389s   0ms DEBUG red_knot_module_resolver::resolver Resolved module 'bar.baz' to '/home/micha/astral/test/bar/baz.py'.
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/hard-links/sub/a.py&quot;)}
24    ├─   0.010404s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/hard-links/sub/a.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/hard-links/sub/a.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/hard-links/parent_test.py&quot;)}
24    ├─   0.010442s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/hard-links/parent_test.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/hard-links/parent_test.py&quot;)}
24      ├─   0.010535s   0ms DEBUG red_knot_module_resolver::resolver Resolved module '_typeshed' to 'stdlib/_typeshed/__init__.pyi'.
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/child/__init__.py&quot;)}
24    ├─   0.011076s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/child/__init__.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/child/__init__.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/child2/__init__.py&quot;)}
24    ├─   0.011104s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/child2/__init__.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/child2/__init__.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/test.py&quot;)}
24    ├─   0.011125s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/test.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/test.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/bar/__init__.py&quot;)}
24    ├─   0.011189s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/bar/__init__.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/bar/__init__.py&quot;)}
24    ┌─┘
24  ┌─┘
24  └─┐red_knot_workspace::workspace::check_file{path=System(&quot;/home/micha/astral/test/hard-links/a.py&quot;)}
24    ├─   0.011213s   0ms DEBUG red_knot_workspace::workspace Checking file /home/micha/astral/test/hard-links/a.py
24    └─┐red_knot_workspace::lint::lint_semantic{file=System(&quot;/home/micha/astral/test/hard-links/a.py&quot;)}
24    ┌─┘
24  ┌─┘
24┌─┘
24┘
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-08-07 11:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/src/logging.rs</code>:251 on 2024-08-07 11:57</div>
            <div class="timeline-body"><p>This is copied from uv. The only change is that I use local time over UTC time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @MichaReiser on 2024-08-07 12:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Marked ready for review by @MichaReiser on 2024-08-07 12:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @carljm by @MichaReiser on 2024-08-07 12:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @MichaReiser on 2024-08-07 12:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-07 13:32</div>
            <div class="timeline-body"><p>What the heck it's not even user-facing and it's nicer than the setup we have in uv!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-07 13:34</div>
            <div class="timeline-body"><p>Do you turn on nested span indentation at higher verbosity levels? That's kind of nice.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-07 13:36</div>
            <div class="timeline-body"><blockquote>
<p>Do you turn on nested span indentation at higher verbosity levels? That's kind of nice.</p>
</blockquote>
<p>It's roughly the same as uv where <code>-vvv</code> uses the hierarchical output format and  <code>-vv</code> shows timestamp which <code>-v</code> doesn't</p>
<p>https://github.com/astral-sh/uv/blob/f63a1fde4266a6b2137461469d8ce811f38a639e/crates/uv/src/logging.rs#L166-L178</p>
<p>Most of the code is actually just adopted from UV.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-08-07 13:53</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Formatter (stable)</h3>
<p>ℹ️ ecosystem check <strong>encountered format errors</strong>. (no format changes; 1 project error)</p>
<details><summary><a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)</summary>
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to parse examples/Chat_finetuning_data_prep.ipynb:6:18:25: Unparenthesized generator expression cannot be used here
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_box.ipynb:13:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_confluence.ipynb:15:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_gmail.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_jira.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_notion.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sharepoint_doc.ipynb:28:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sharepoint_text.ipynb:28:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sql_database.ipynb:2:2:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_middleware_azure_function.ipynb:37:1:13: Simple statements must be separated by newlines or semicolons
</code></pre>
</p>
</details>

<h3>Formatter (preview)</h3>
<p>ℹ️ ecosystem check <strong>encountered format errors</strong>. (no format changes; 1 project error)</p>
<details><summary><a href="https://github.com/openai/openai-cookbook">openai/openai-cookbook</a> (error)</summary>
<p>
<pre>ruff format --preview</pre>
</p>
<p>

<pre><code>warning: Detected debug build without --no-cache.
error: Failed to parse examples/Chat_finetuning_data_prep.ipynb:6:18:25: Unparenthesized generator expression cannot be used here
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_box.ipynb:13:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_confluence.ipynb:15:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_gmail.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_jira.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_notion.ipynb:15:1:1: Expected an expression
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sharepoint_doc.ipynb:28:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sharepoint_text.ipynb:28:1:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_action_sql_database.ipynb:2:2:5: Simple statements must be separated by newlines or semicolons
error: Failed to parse examples/chatgpt/gpt_actions_library/gpt_middleware_azure_function.ipynb:37:1:13: Simple statements must be separated by newlines or semicolons
</code></pre>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/docs/tracing.md</code>:4 on 2024-08-07 16:03</div>
            <div class="timeline-body"><p>Very minor nit: Doesn't &quot;<code>debug</code>..<code>error</code>&quot; technically exclude <code>error</code>, if we assume Rust range syntax, which is what this seems to be emulating? But <code>error</code> is kind of the most user-facing, so probably we shouldn't be ambiguous about this. Maybe just say something like &quot;<code>debug</code> or greater severity&quot;?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/docs/tracing.md</code>:1 on 2024-08-07 16:06</div>
            <div class="timeline-body"><p>I assume that the <code>crates/red_knot/docs/...</code> directory is for developer-facing docs, not user-facing docs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/src/logging.rs</code>:48 on 2024-08-07 16:10</div>
            <div class="timeline-body"><pre><code class="language-suggestion">    /// Enables verbose output. Emits Ruff and Red Knot events up to the [`INFO`](tracing::Level::INFO) Corresponds to `-v`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> approved on 2024-08-07 16:17</div>
            <div class="timeline-body"><p>This looks amazing!! Thanks for the clear documentation.</p>
<p>The one thing not mentioned here which I would find really useful is how to enable this for a test in e.g. <code>red_knot_python_semantic</code> crate, or if that's even doable. I often find myself debugging something in the context of a test, and it would be really useful to have tracing output.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-07 19:58</div>
            <div class="timeline-body"><p>@carljm in what kind of tracing are you interested in tests? Is it the log messages or primarily the trace spans (or both)</p>
<p>A test helper that accepts an EnvFilter does sound useful for ad-hoc test inspections.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2024-08-07 20:34</div>
            <div class="timeline-body"><p>Potentially both. It's for the same debugging purposes that you'd use <code>-vv</code> or <code>-vvv</code> on the command line.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-08 06:05</div>
            <div class="timeline-body"><blockquote>
<p>Potentially both. It's for the same debugging purposes that you'd use <code>-vv</code> or <code>-vvv</code> on the command line.</p>
</blockquote>
<p>I can take a look as a separate (low priority) PR. I don't think I want to expose both <code>-vv</code> and <code>-vvv</code> styles. I might just go with <code>-vvv</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2024-08-08 06:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/red_knot/docs/tracing.md</code>:1 on 2024-08-08 06:06</div>
            <div class="timeline-body"><p>For now, that's certainly true I don't know about long-term. We could have <code>docs/users</code> and <code>docs/dev</code> if we end up with needing both. But most user-facing documentation should probably live on the website.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2024-08-08 06:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-08-08 06:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-08-08 06:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2024-08-08 06:29</div>
            <div class="timeline-body"><h2><a href="https://codspeed.io/astral-sh/ruff/branches/red-knot-tracing">CodSpeed Performance Report</a></h2>
<h3>Merging #12730 will <strong>improve performances by 7.46%</strong></h3>
<p><sub>Comparing <code>red-knot-tracing</code> (6e00f3f) with <code>main</code> (5107a50)</sub></p>
<h3>Summary</h3>
<p><code>⚡ 1</code> improvements
<code>✅ 31</code> untouched benchmarks</p>
<h3>Benchmarks breakdown</h3>
<p>|     | Benchmark | <code>main</code> | <code>red-knot-tracing</code> | Change |
| --- | --------- | ----------------------- | ------------------- | ------ |
| ⚡ | <code>linter/all-rules[numpy/globals.py]</code> | 778.8 µs | 724.7 µs | +7.46% |</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:05:46 UTC
    </footer>
</body>
</html>
