<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty] `dict` is not assignable to `TypedDict` - astral-sh/ruff #21238</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty] <code>dict</code> is not assignable to <code>TypedDict</code></h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/21238">#21238</a>
        opened by <a href="https://github.com/ibraheemdev">@ibraheemdev</a>
        on 2025-11-03 02:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a></div>
            <div class="timeline-body">Summary
<p>A lot of the bidirectional inference work relies on <code>dict</code> not being assignable to <code>TypedDict</code>, so I think it makes sense to add this before fully implementing <a href="https://github.com/astral-sh/ty/issues/1387">astral-sh/ty#1387</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ty</span> added by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 02:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 02:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 02:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/sharkdp">@sharkdp</a> by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 02:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 02:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a> reviewed on 2025-11-03 02:53</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on <code>crates/ty_python_semantic/resources/mdtest/comprehensions/basic.md</code>:167 on 2025-11-03 02:53</div>
            <div class="timeline-body"><p>@sharkdp it looks like the type context is not being propagated correctly here, and only seemed so because of <code>dict[str, str]</code> being assignable to <code>Person</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-11-03 02:54</div>
            <div class="timeline-body">

Diagnostic diff on <a href="https://github.com/python/typing/tree/9f6d8ced7cd1c8d92687a4e9c96d7716452e471e/conformance">typing conformance tests</a>

Changes were detected when running ty on typing conformance tests

<pre><code>--- old-output.txt	2025-11-03 17:12:53.086444331 +0000
+++ new-output.txt	2025-11-03 17:12:56.296455134 +0000
@@ -953,14 +953,16 @@
 typeddicts_extra_items.py:293:44: error[invalid-key] Invalid key for TypedDict `ClosedMovie`: Unknown key &quot;year&quot;
 typeddicts_extra_items.py:299:54: error[invalid-key] Invalid key for TypedDict `MovieExtraStr`: Unknown key &quot;summary&quot;
 typeddicts_extra_items.py:302:54: error[invalid-key] Invalid key for TypedDict `MovieExtraInt`: Unknown key &quot;year&quot;
-typeddicts_extra_items.py:303:1: error[invalid-assignment] Object of type `dict[Unknown | str, Unknown | str | int]` is not assignable to `Mapping[str, int]`
 typeddicts_extra_items.py:310:5: error[type-assertion-failure] Argument does not have asserted type `list[tuple[str, int | str]]`
 typeddicts_extra_items.py:311:5: error[type-assertion-failure] Argument does not have asserted type `list[int | str]`
 typeddicts_extra_items.py:327:5: error[unresolved-attribute] Object of type `IntDict` has no attribute `clear`
 typeddicts_extra_items.py:329:52: error[invalid-key] Invalid key for TypedDict `IntDictWithNum`: Unknown key &quot;bar&quot; - did you mean &quot;num&quot;?
+typeddicts_extra_items.py:337:1: error[unresolved-attribute] Object of type `IntDictWithNum` has no attribute `clear`
 typeddicts_extra_items.py:339:1: error[type-assertion-failure] Argument does not have asserted type `tuple[str, int]`
+typeddicts_extra_items.py:339:13: error[unresolved-attribute] Object of type `IntDictWithNum` has no attribute `popitem`
 typeddicts_extra_items.py:342:27: error[invalid-key] Cannot access `IntDictWithNum` with a key of type `str`. Only string literals are allowed as keys on TypedDicts.
 typeddicts_extra_items.py:343:31: error[invalid-key] Invalid key for TypedDict `IntDictWithNum` of type `str`
+typeddicts_extra_items.py:352:5: error[invalid-assignment] Object of type `dict[str, int]` is not assignable to `IntDict`
 typeddicts_operations.py:22:17: error[invalid-assignment] Invalid assignment to key &quot;name&quot; with declared type `str` on TypedDict `Movie`: value of type `Literal[1982]`
 typeddicts_operations.py:23:17: error[invalid-assignment] Invalid assignment to key &quot;year&quot; with declared type `int` on TypedDict `Movie`: value of type `Literal[&quot;&quot;]`
 typeddicts_operations.py:24:7: error[invalid-key] Invalid key for TypedDict `Movie`: Unknown key &quot;other&quot;
@@ -969,6 +971,7 @@
 typeddicts_operations.py:29:42: error[invalid-argument-type] Invalid argument to key &quot;year&quot; with declared type `int` on TypedDict `Movie`: value of type `float`
 typeddicts_operations.py:32:36: error[invalid-key] Invalid key for TypedDict `Movie`: Unknown key &quot;other&quot;
 typeddicts_operations.py:37:20: error[missing-typed-dict-key] Missing required key &#x27;name&#x27; in TypedDict `Movie` constructor
+typeddicts_operations.py:47:1: error[unresolved-attribute] Object of type `Movie` has no attribute `clear`
 typeddicts_operations.py:62:1: error[unresolved-attribute] Object of type `MovieOptional` has no attribute `clear`
 typeddicts_readonly.py:24:4: error[invalid-assignment] Cannot assign to key &quot;members&quot; on TypedDict `Band`: key is marked read-only
 typeddicts_readonly.py:50:4: error[invalid-assignment] Cannot assign to key &quot;title&quot; on TypedDict `Movie1`: key is marked read-only
@@ -988,5 +991,5 @@
 typeddicts_usage.py:28:17: error[missing-typed-dict-key] Missing required key &#x27;name&#x27; in TypedDict `Movie` constructor
 typeddicts_usage.py:28:18: error[invalid-key] Invalid key for TypedDict `Movie`: Unknown key &quot;title&quot;
 typeddicts_usage.py:40:24: error[invalid-type-form] The special form `typing.TypedDict` is not allowed in type expressions. Did you mean to use a concrete TypedDict or `collections.abc.Mapping[str, object]` instead?
-Found 990 diagnostics
+Found 993 diagnostics
 WARN A fatal error occurred while checking some files. Not all project files were analyzed. See the diagnostics list above for details.
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-11-03 02:55</div>
            <div class="timeline-body">

<code>mypy_primer</code> results

Changes were detected when running on open source projects

<pre><code>aioredis (https://github.com/aio-libs/aioredis)
- aioredis/client.py:3430:13: error[invalid-assignment] Object of type `KeysView[object]` is not assignable to `Sequence[@Todo] | AbstractSet[AnyKeyT@_zaggregate]`
+ aioredis/client.py:3430:13: error[invalid-assignment] Object of type `tuple[KeysView[object], ValuesView[object]]` is not assignable to `Sequence[@Todo] | AbstractSet[AnyKeyT@_zaggregate]`
- aioredis/client.py:3430:24: error[invalid-assignment] Object of type `ValuesView[object]` is not assignable to `ValuesView[int | float] | None`
+ aioredis/client.py:3430:24: error[invalid-assignment] Object of type `tuple[KeysView[object], ValuesView[object]]` is not assignable to `ValuesView[int | float] | None`

python-chess (https://github.com/niklasf/python-chess)
+ chess/engine.py:289:9: error[invalid-assignment] Object of type `(InfoDict &amp; ~AlwaysFalsy) | dict[Unknown, Unknown]` is not assignable to attribute `info` of type `InfoDict`
- Found 24 diagnostics
+ Found 25 diagnostics

pyinstrument (https://github.com/joerick/pyinstrument)
+ pyinstrument/context_manager.py:41:9: error[invalid-assignment] Object of type `dict[str, @Todo]` is not assignable to attribute `options` of type `ProfileContextOptions`
- Found 41 diagnostics
+ Found 42 diagnostics

spack (https://github.com/spack/spack)
- lib/spack/spack/bootstrap/core.py:233:18: error[invalid-assignment] Object of type `dict[Unknown, Unknown]` is not assignable to `QueryInfo`
+ lib/spack/spack/bootstrap/core.py:233:18: error[invalid-assignment] Object of type `tuple[partial[Unknown], dict[Unknown, Unknown]]` is not assignable to `QueryInfo`
- lib/spack/spack/bootstrap/core.py:246:18: error[invalid-assignment] Object of type `dict[Unknown, Unknown]` is not assignable to `QueryInfo`
+ lib/spack/spack/bootstrap/core.py:246:18: error[invalid-assignment] Object of type `tuple[partial[Unknown], dict[Unknown, Unknown]]` is not assignable to `QueryInfo`
+ lib/spack/spack/vendor/distro/distro.py:994:16: error[invalid-return-type] Return type does not match returned value: expected `InfoDict`, found `dict[str, str | dict[str, str]]`
- Found 7869 diagnostics
+ Found 7870 diagnostics

pip (https://github.com/pypa/pip)
- src/pip/_vendor/urllib3/util/ssl_.py:86:5: error[invalid-assignment] Object of type `Literal[16777216]` is not assignable to `Literal[Options.OP_NO_SSLv2]`
+ src/pip/_vendor/urllib3/util/ssl_.py:86:5: error[invalid-assignment] Object of type `tuple[Literal[16777216], Literal[33554432]]` is not assignable to `Literal[Options.OP_NO_SSLv2]`
- src/pip/_vendor/urllib3/util/ssl_.py:86:18: error[invalid-assignment] Object of type `Literal[33554432]` is not assignable to `Literal[Options.OP_NO_SSLv3]`
+ src/pip/_vendor/urllib3/util/ssl_.py:86:18: error[invalid-assignment] Object of type `tuple[Literal[16777216], Literal[33554432]]` is not assignable to `Literal[Options.OP_NO_SSLv3]`

yarl (https://github.com/aio-libs/yarl)
+ tests/test_pickle.py:29:20: error[invalid-argument-type] Argument to bound method `__setstate__` is incorrect: Expected `tuple[tuple[str, str, str, str, str]] | tuple[None, _InternalURLCache]`, found `tuple[None, dict[Unknown | str, Unknown | tuple[str, str, str, str, str]]]`
- Found 46 diagnostics
+ Found 47 diagnostics

paasta (https://github.com/yelp/paasta)
+ paasta_tools/contrib/rightsizer_soaconfigs_update.py:282:9: error[invalid-assignment] Object of type `dict[Unknown, Unknown]` is not assignable to `KubernetesRecommendation | CassandraRecommendation`
- Found 982 diagnostics
+ Found 983 diagnostics

pyjwt (https://github.com/jpadilla/pyjwt)
+ jwt/api_jws.py:50:13: error[invalid-assignment] Object of type `dict[Unknown, Unknown]` is not assignable to attribute `options` of type `SigOptions`
+ jwt/api_jwt.py:77:16: error[invalid-return-type] Return type does not match returned value: expected `FullOptions`, found `dict[Unknown, Unknown]`
- Found 37 diagnostics
+ Found 39 diagnostics

kopf (https://github.com/nolar/kopf)
+ kopf/_cogs/clients/creating.py:21:5: error[invalid-assignment] Object of type `(RawBody &amp; ~None) | dict[Unknown, Unknown]` is not assignable to `RawBody | None`
+ kopf/_cogs/clients/creating.py:23:9: warning[possibly-missing-attribute] Attribute `setdefault` may be missing on object of type `RawBody | None`
+ kopf/_cogs/clients/creating.py:25:9: warning[possibly-missing-attribute] Attribute `setdefault` may be missing on object of type `RawBody | None`
+ kopf/_cogs/clients/creating.py:27:44: warning[possibly-missing-attribute] Attribute `get` may be missing on object of type `RawBody | None`
+ kopf/_core/engines/admission.py:449:5: error[invalid-assignment] Object of type `list[dict[Unknown | str, Unknown | str] | Unknown]` is not assignable to `Collection[MatchExpression]`
+ kopf/_kits/webhacks.py:88:42: error[invalid-argument-type] Argument to bound method `append` is incorrect: Expected `AsyncGenerator[WebhookClientConfig, None]`, found `AsyncGenerator[object, None]`
+ kopf/_kits/webhacks.py:92:42: error[invalid-argument-type] Argument to bound method `remove` is incorrect: Expected `AsyncGenerator[WebhookClientConfig, None]`, found `AsyncGenerator[object, None]`
- Found 47 diagnostics
+ Found 54 diagnostics

PyWinCtl (https://github.com/Kalmat/PyWinCtl)
+ src/pywinctl/_pywinctl_linux.py:307:13: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, _WINDICT].__setitem__(key: str, value: _WINDICT, /) -&gt; None` cannot be called with a key of type `Unknown` and a value of type `dict[Unknown | str, Unknown | dict[Unknown, Unknown]]` on object of type `dict[str, _WINDICT]`
- Found 30 diagnostics
+ Found 31 diagnostics

pydantic (https://github.com/pydantic/pydantic)
+ pydantic/json_schema.py:1803:9: error[invalid-assignment] Object of type `Any | None` is not assignable to `ConfigDict`
- Found 775 diagnostics
+ Found 776 diagnostics

urllib3 (https://github.com/urllib3/urllib3)
- src/urllib3/connection.py:998:70: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- Found 362 diagnostics
+ Found 361 diagnostics

freqtrade (https://github.com/freqtrade/freqtrade)
+ freqtrade/data/btanalysis/bt_fileutils.py:238:12: error[invalid-return-type] Return type does not match returned value: expected `list[BacktestHistoryEntryType]`, found `list[dict[Unknown | str, Unknown | str] | Unknown]`
+ freqtrade/exchange/exchange_utils.py:113:9: error[invalid-assignment] Object of type `list[dict[Unknown | str, Unknown] | Unknown]` is not assignable to `list[TradeModeType]`
+ freqtrade/optimize/backtesting.py:1820:13: error[invalid-assignment] Object of type `dict[str, Any]` is not assignable to attribute `results` of type `BacktestResultType`
+ freqtrade/plugins/pairlist/PercentChangePairList.py:219:9: error[invalid-assignment] Object of type `list[dict[Unknown | str, Unknown | str | None] | Unknown]` is not assignable to `list[SymbolWithPercentage]`
+ freqtrade/rpc/api_server/api_download_data.py:32:17: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, ProgressTask].__setitem__(key: str, value: ProgressTask, /) -&gt; None` cannot be called with a key of type `str` and a value of type `dict[Unknown | str, Unknown]` on object of type `dict[str, ProgressTask]`
+ freqtrade/rpc/api_server/api_download_data.py:71:5: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, JobsContainer].__setitem__(key: str, value: JobsContainer, /) -&gt; None` cannot be called with a key of type `str` and a value of type `dict[Unknown | str, Unknown | str | None | dict[Unknown, Unknown] | bool]` on object of type `dict[str, JobsContainer]`
+ freqtrade/rpc/api_server/api_pairlists.py:92:5: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, JobsContainer].__setitem__(key: str, value: JobsContainer, /) -&gt; None` cannot be called with a key of type `str` and a value of type `dict[Unknown | str, Unknown | str | None | bool | dict[Unknown, Unknown]]` on object of type `dict[str, JobsContainer]`
- Found 460 diagnostics
+ Found 467 diagnostics

mypy (https://github.com/python/mypy)
+ mypy/build.py:974:13: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, FgDepMeta].__setitem__(key: str, value: FgDepMeta, /) -&gt; None` cannot be called with a key of type `str` and a value of type `dict[Unknown | str, Unknown | (str &amp; ~AlwaysFalsy) | int]` on object of type `dict[str, FgDepMeta]`
+ mypy/typeshed/stdlib/tkinter/__init__.pyi:584:9: error[invalid-parameter-default] Default value of type `dict[Unknown, Unknown]` is not assignable to annotated parameter type `_GridIndexInfo`
+ mypy/typeshed/stdlib/tkinter/__init__.pyi:594:9: error[invalid-parameter-default] Default value of type `dict[Unknown, Unknown]` is not assignable to annotated parameter type `_GridIndexInfo`
- Found 1839 diagnostics
+ Found 1842 diagnostics

discord.py (https://github.com/Rapptz/discord.py)
- discord/audit_logs.py:909:31: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- discord/components.py:871:25: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- discord/embeds.py:784:24: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- discord/ext/commands/context.py:285:99: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- discord/guild.py:664:69: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- discord/mentions.py:137:22: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- discord/message.py:736:24: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
+ discord/presences.py:60:9: error[invalid-assignment] Object of type `(ClientStatus &amp; ~AlwaysFalsy) | dict[Unknown, Unknown]` is not assignable to `ClientStatus`
+ discord/role.py:450:9: error[invalid-assignment] Object of type `list[dict[Unknown | str, Unknown] | Unknown]` is not assignable to `list[RolePositionUpdate]`
+ discord/role.py:700:9: error[invalid-assignment] Object of type `list[dict[Unknown | str, Unknown | int] | Unknown]` is not assignable to `list[RolePositionUpdate]`
- discord/ui/label.py:116:63: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- Found 517 diagnostics
+ Found 512 diagnostics

sphinx (https://github.com/sphinx-doc/sphinx)
- sphinx/theming.py:340:63: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- Found 521 diagnostics
+ Found 520 diagnostics

xarray (https://github.com/pydata/xarray)
- xarray/tests/test_cftimeindex_resample.py:260:22: error[no-matching-overload] No overload of function `date_range` matches arguments
+ xarray/tests/test_cftimeindex_resample.py:259:5: error[invalid-assignment] Object of type `dict[str, str | int]` is not assignable to `DateRangeKwargs`

meson (https://github.com/mesonbuild/meson)
+ docs/refman/generatorjson.py:31:16: error[invalid-return-type] Return type does not match returned value: expected `list[Type]`, found `list[dict[Unknown | str, Unknown | str | list[Type] | list[Unknown]] | Unknown]`
- mesonbuild/build.py:687:17: error[invalid-assignment] Object of type `list[str | Literal[False] | None]` is not assignable to `list[str | Literal[False]]`
+ mesonbuild/build.py:687:17: error[invalid-assignment] Object of type `list[Unknown | str | None]` is not assignable to `list[str | Literal[False]]`
+ mesonbuild/build.py:3120:69: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `BuildTargetKeywordArguments`, found `dict[Unknown | str, Unknown | bool | dict[Unknown | str, Unknown | list[str]] | list[IncludeDirs] | list[Dependency]]`
+ mesonbuild/dependencies/dub.py:469:16: error[invalid-return-type] Return type does not match returned value: expected `list[FindTargetEntry]`, found `list[dict[Unknown | str, Unknown | str] | Unknown]`
+ mesonbuild/interpreter/compiler.py:737:9: error[invalid-assignment] Object of type `(ExtractRequired &amp; ~AlwaysFalsy) | dict[Unknown | str, Unknown | bool]` is not assignable to `ExtractRequired | None`
+ mesonbuild/interpreter/compiler.py:738:62: error[invalid-argument-type] Argument to function `extract_required_kwarg` is incorrect: Expected `ExtractRequired`, found `ExtractRequired | None`
+ mesonbuild/interpreter/compiler.py:844:9: error[invalid-assignment] Object of type `(ExtractRequired &amp; ~AlwaysFalsy) | dict[Unknown | str, Unknown | bool]` is not assignable to `ExtractRequired | None`
+ mesonbuild/interpreter/compiler.py:845:62: error[invalid-argument-type] Argument to function `extract_required_kwarg` is incorrect: Expected `ExtractRequired`, found `ExtractRequired | None`
+ mesonbuild/interpreter/interpreter.py:577:33: error[invalid-argument-type] Argument to bound method `lookup` is incorrect: Expected `DependencyObjectKWs`, found `dict[Unknown | str, Unknown | MachineChoice]`
+ mesonbuild/interpreter/interpreter.py:1375:31: error[invalid-argument-type] Argument to bound method `summary_impl` is incorrect: Expected `Summary`, found `dict[Unknown | str, Unknown | bool | str]`
+ mesonbuild/interpreter/interpreter.py:1395:67: error[invalid-argument-type] Argument to bound method `summary_impl` is incorrect: Expected `Summary`, found `dict[Unknown | str, Unknown | bool | None]`
+ mesonbuild/interpreter/interpreter.py:2282:40: error[invalid-argument-type] Argument to bound method `make_test` is incorrect: Expected `BaseTest`, found `dict[str, Any]`
- mesonbuild/interpreter/interpreter.py:3395:23: error[invalid-assignment] Object of type `list[str]` is not assignable to `tuple[str, Any]`
+ mesonbuild/interpreter/interpreter.py:3395:23: error[invalid-assignment] Object of type `tuple[list[File], list[str]]` is not assignable to `tuple[str, Any]`
- mesonbuild/interpreter/interpreter.py:3400:23: error[invalid-assignment] Object of type `list[str]` is not assignable to `tuple[str, Any]`
+ mesonbuild/interpreter/interpreter.py:3400:23: error[invalid-assignment] Object of type `tuple[list[File], list[str]]` is not assignable to `tuple[str, Any]`
+ mesonbuild/interpreter/interpreter.py:3409:9: error[invalid-assignment] Object of type `dict[str | Unknown, object]` is not assignable to `Executable | StaticLibrary | SharedLibrary | SharedModule | Jar`
+ mesonbuild/interpreter/interpreter.py:3442:9: error[invalid-assignment] Method `__setitem__` of type `(Overload[(key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[@Todo], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | @Todo], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[@Todo], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_header&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;vala_vapi&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;vala_gir&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt; None, (key: Literal[&quot;d_module_versions&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_unittest&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;rust_dependency_map&quot;], value: dict[str, str], /) -&gt; None, (key: Literal[&quot;swift_interoperability_mode&quot;], value: Literal[&quot;c&quot;, &quot;cpp&quot;], /) -&gt; None, (key: Literal[&quot;swift_module_name&quot;], value: str, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: Any, /) -&gt; None, (key: Literal[&quot;c_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cuda_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;fortran_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objc_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objcpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;rust_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_args&quot;], value: list[str | File], /) -&gt; None, (key: Literal[&quot;cs_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;swift_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cython_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;nasm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;masm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;export_dynamic&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;gui_app&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;implib&quot;], value: str | bool | None, /) -&gt; None, (key: Literal[&quot;pie&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;vs_module_defs&quot;], value: str | File | CustomTarget | CustomTargetIndex | None, /) -&gt; None, (key: Literal[&quot;win_subsystem&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;android_exe_type&quot;], value: Literal[&quot;application&quot;, &quot;executable&quot;] | None, /) -&gt; None]) | (Overload[(key: Literal[&quot;rust_abi&quot;], value: @Todo | None, /) -&gt; None, (key: Literal[&quot;prelink&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;pic&quot;], value: bool | None, /) -&gt; None, (key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[@Todo], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | @Todo], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[@Todo], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_header&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;vala_vapi&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;vala_gir&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt; None, (key: Literal[&quot;d_module_versions&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_unittest&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;rust_dependency_map&quot;], value: dict[str, str], /) -&gt; None, (key: Literal[&quot;swift_interoperability_mode&quot;], value: Literal[&quot;c&quot;, &quot;cpp&quot;], /) -&gt; None, (key: Literal[&quot;swift_module_name&quot;], value: str, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: Any, /) -&gt; None, (key: Literal[&quot;c_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cuda_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;fortran_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objc_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objcpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;rust_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_args&quot;], value: list[str | File], /) -&gt; None, (key: Literal[&quot;cs_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;swift_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cython_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;nasm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;masm_args&quot;], value: list[str], /) -&gt; None]) | (Overload[(key: Literal[&quot;rust_abi&quot;], value: @Todo | None, /) -&gt; None, (key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[@Todo], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | @Todo], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[@Todo], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_header&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;vala_vapi&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;vala_gir&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;d_debug&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_import_dirs&quot;], value: list[str | IncludeDirs], /) -&gt; None, (key: Literal[&quot;d_module_versions&quot;], value: list[str | int], /) -&gt; None, (key: Literal[&quot;d_unittest&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;rust_dependency_map&quot;], value: dict[str, str], /) -&gt; None, (key: Literal[&quot;swift_interoperability_mode&quot;], value: Literal[&quot;c&quot;, &quot;cpp&quot;], /) -&gt; None, (key: Literal[&quot;swift_module_name&quot;], value: str, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: Any, /) -&gt; None, (key: Literal[&quot;c_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cuda_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;fortran_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;d_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objc_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;objcpp_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;rust_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_args&quot;], value: list[str | File], /) -&gt; None, (key: Literal[&quot;cs_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;swift_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;cython_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;nasm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;masm_args&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vs_module_defs&quot;], value: str | File | CustomTarget | CustomTargetIndex | None, /) -&gt; None]) | (Overload[(key: Literal[&quot;build_by_default&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;build_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;extra_files&quot;], value: list[@Todo], /) -&gt; None, (key: Literal[&quot;gnu_symbol_visibility&quot;], value: str, /) -&gt; None, (key: Literal[&quot;install&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;install_mode&quot;], value: FileMode, /) -&gt; None, (key: Literal[&quot;install_rpath&quot;], value: str, /) -&gt; None, (key: Literal[&quot;implicit_include_directories&quot;], value: bool, /) -&gt; None, (key: Literal[&quot;link_depends&quot;], value: list[str | File | @Todo], /) -&gt; None, (key: Literal[&quot;link_language&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_prefix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;name_suffix&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;native&quot;], value: MachineChoice, /) -&gt; None, (key: Literal[&quot;objects&quot;], value: list[@Todo], /) -&gt; None, (key: Literal[&quot;override_options&quot;], value: dict[OptionKey, @Todo], /) -&gt; None, (key: Literal[&quot;depend_files&quot;], value: list[File], /) -&gt; None, (key: Literal[&quot;resources&quot;], value: list[str], /) -&gt; None, (key: Literal[&quot;vala_header&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;vala_vapi&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;vala_gir&quot;], value: str | None, /) -&gt; None, (key: Literal[&quot;main_class&quot;], value: str, /) -&gt; None, (key: Literal[&quot;java_resources&quot;], value: StructuredSources | None, /) -&gt; None, (key: Literal[&quot;sources&quot;], value: str | File | @Todo | ExtractedObjects | BuildTarget, /) -&gt; None, (key: Literal[&quot;java_args&quot;], value: list[str], /) -&gt; None])` cannot be called with a key of type `Literal[&quot;include_directories&quot;]` and a value of type `list[IncludeDirs]` on object of type `Executable | StaticLibrary | SharedLibrary | SharedModule | Jar`
- mesonbuild/scripts/coverage.py:19:9: error[invalid-assignment] Object of type `None | str` is not assignable to `str`
+ mesonbuild/scripts/coverage.py:19:9: error[invalid-assignment] Object of type `tuple[None, None] | tuple[str, str]` is not assignable to `str`
- mesonbuild/tooldetect.py:83:5: error[invalid-assignment] Object of type `None | str` is not assignable to `str`
+ mesonbuild/tooldetect.py:83:5: error[invalid-assignment] Object of type `tuple[None, None] | tuple[str, str]` is not assignable to `str`
- mesonbuild/wrap/wrap.py:686:13: error[invalid-assignment] Object of type `list[str | Unknown | None]` is not assignable to `list[str]`
+ mesonbuild/wrap/wrap.py:686:13: error[invalid-assignment] Object of type `list[Unknown | str | None]` is not assignable to `list[str]`
+ unittests/allplatformstests.py:2153:57: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `DependencyObjectKWs`, found `dict[Unknown | str, Unknown | bool]`
+ unittests/internaltests.py:668:59: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `DependencyObjectKWs`, found `dict[Unknown | str, Unknown | bool]`
+ unittests/internaltests.py:671:59: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `DependencyObjectKWs`, found `dict[Unknown | str, Unknown | bool]`
+ unittests/internaltests.py:673:69: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `DependencyObjectKWs`, found `dict[Unknown | str, Unknown | bool]`
+ unittests/linuxliketests.py:154:54: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `DependencyObjectKWs`, found `dict[Unknown | str, Unknown | bool]`
+ unittests/linuxliketests.py:161:69: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `DependencyObjectKWs`, found `dict[Unknown | str, Unknown | bool]`
+ unittests/linuxliketests.py:175:57: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `DependencyObjectKWs`, found `dict[Unknown | str, Unknown | bool]`
+ unittests/linuxliketests.py:1149:73: error[invalid-argument-type] Argument to bound method `__init__` is incorrect: Expected `DependencyObjectKWs`, found `dict[Unknown | str, Unknown | bool]`
- Found 1658 diagnostics
+ Found 1679 diagnostics

cloud-init (https://github.com/canonical/cloud-init)
- cloudinit/net/ephemeral.py:140:13: error[unresolved-attribute] Object of type `str` has no attribute `get`
+ cloudinit/net/ephemeral.py:140:13: warning[possibly-missing-attribute] Attribute `get` may be missing on object of type `str | Unknown`

prefect (https://github.com/PrefectHQ/prefect)
- src/integrations/prefect-docker/prefect_docker/images.py:64:5: error[invalid-assignment] Object of type `dict[str, dict[str, Any] | str | None | bool]` is not assignable to `dict[str, dict[str, Any]]`
+ src/integrations/prefect-docker/prefect_docker/images.py:64:5: error[invalid-assignment] Object of type `dict[Unknown | str, Unknown | str | None | bool | dict[str, Any]]` is not assignable to `dict[str, dict[str, Any]]`
- src/prefect/cli/deploy/_core.py:78:9: error[invalid-assignment] Object of type `str` is not assignable to `dict[str, Any]`
+ src/prefect/cli/deploy/_core.py:78:9: error[invalid-assignment] Object of type `dict[str, Any]` is not assignable to `dict[str, Any]`
+ src/prefect/locking/filesystem.py:138:9: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, _LockInfo].__setitem__(key: str, value: _LockInfo, /) -&gt; None` cannot be called with a key of type `str` and a value of type `dict[Unknown | str, Unknown | str | datetime | None | Path]` on object of type `dict[str, _LockInfo]`
+ src/prefect/locking/filesystem.py:187:9: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, _LockInfo].__setitem__(key: str, value: _LockInfo, /) -&gt; None` cannot be called with a key of type `str` and a value of type `dict[Unknown | str, Unknown | str | datetime | None | Path]` on object of type `dict[str, _LockInfo]`
- Found 3301 diagnostics
+ Found 3303 diagnostics

hydra-zen (https://github.com/mit-ll-responsible-ai/hydra-zen)
+ src/hydra_zen/structured_configs/_implementations.py:3506:9: error[invalid-assignment] Object of type `@Todo | dict[Unknown, Unknown]` is not assignable to `DataclassOptions`
- tests/annotations/declarations.py:1229:41: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- tests/annotations/declarations.py:1232:41: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- tests/annotations/declarations.py:1235:41: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- tests/annotations/declarations.py:1238:45: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- tests/annotations/declarations.py:1243:41: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- tests/annotations/declarations.py:1434:47: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- tests/annotations/declarations.py:1435:51: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- Found 558 diagnostics
+ Found 552 diagnostics

cwltool (https://github.com/common-workflow-language/cwltool)
+ cwltool/cwlprov/ro.py:263:13: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, Aggregate].__setitem__(key: str, value: Aggregate, /) -&gt; None` cannot be called with a key of type `str` and a value of type `dict[Unknown | str, Unknown | str | None]` on object of type `dict[str, Aggregate]`
- Found 138 diagnostics
+ Found 139 diagnostics

openlibrary (https://github.com/internetarchive/openlibrary)
+ openlibrary/catalog/add_book/tests/test_load_book.py:124:45: error[invalid-argument-type] Argument to function `find_entity` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str]`
+ openlibrary/catalog/add_book/tests/test_load_book.py:126:47: error[invalid-argument-type] Argument to function `find_entity` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str]`
+ openlibrary/catalog/utils/tests/test_catalog_utils.py:34:31: error[invalid-argument-type] Argument to function `author_dates_match` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str]`
+ openlibrary/core/lists/model.py:498:20: error[invalid-return-type] Return type does not match returned value: expected `str | ThingReferenceDict | AnnotatedSeedDict`, found `dict[Unknown | str, Unknown | dict[Unknown | str, Unknown | str] | (str &amp; ~AlwaysFalsy)]`
+ openlibrary/core/lists/model.py:503:20: error[invalid-return-type] Return type does not match returned value: expected `str | ThingReferenceDict | AnnotatedSeedDict`, found `dict[Unknown | str, Unknown | str]`
+ openlibrary/plugins/openlibrary/tests/test_lists.py:106:18: error[invalid-argument-type] Argument to function `normalize_input_seed` is incorrect: Expected `ThingReferenceDict | AnnotatedSeedDict | str`, found `dict[Unknown | str, Unknown | str]`
+ openlibrary/plugins/worksearch/tests/test_worksearch.py:19:9: error[invalid-argument-type] Argument to function `get_doc` is incorrect: Expected `SolrDocument`, found `dict[Unknown | str, Unknown | list[Unknown | str] | str | int | None]`
+ openlibrary/tests/catalog/test_utils.py:69:31: error[invalid-argument-type] Argument to function `author_dates_match` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str | dict[Unknown | str, Unknown | str]]`
+ openlibrary/tests/catalog/test_utils.py:70:31: error[invalid-argument-type] Argument to function `author_dates_match` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str | dict[Unknown | str, Unknown | str]]`
+ openlibrary/tests/catalog/test_utils.py:71:31: error[invalid-argument-type] Argument to function `author_dates_match` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str | dict[Unknown | str, Unknown | str]]`
+ openlibrary/tests/catalog/test_utils.py:72:31: error[invalid-argument-type] Argument to function `author_dates_match` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str | dict[Unknown | str, Unknown | str]]`
+ openlibrary/tests/catalog/test_utils.py:73:31: error[invalid-argument-type] Argument to function `author_dates_match` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str | dict[Unknown | str, Unknown | str]]`
+ openlibrary/tests/catalog/test_utils.py:75:31: error[invalid-argument-type] Argument to function `author_dates_match` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str | dict[Unknown | str, Unknown | str]]`
+ openlibrary/tests/catalog/test_utils.py:77:31: error[invalid-argument-type] Argument to function `author_dates_match` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str | dict[Unknown | str, Unknown | str]]`
+ openlibrary/tests/catalog/test_utils.py:78:31: error[invalid-argument-type] Argument to function `author_dates_match` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str | dict[Unknown | str, Unknown | str]]`
+ openlibrary/tests/catalog/test_utils.py:81:9: error[invalid-argument-type] Argument to function `author_dates_match` is incorrect: Expected `AuthorImportDict`, found `dict[Unknown | str, Unknown | str | dict[Unknown | str, Unknown | str]]`
- Found 916 diagnostics
+ Found 932 diagnostics

vision (https://github.com/pytorch/vision)
- torchvision/prototype/datasets/_builtin/cub200.py:175:9: error[invalid-assignment] Object of type `tuple[str, tuple[str, BinaryIO]]` is not assignable to `tuple[tuple[str, tuple[str, BinaryIO]], Any]`
+ torchvision/prototype/datasets/_builtin/cub200.py:175:9: error[invalid-assignment] Object of type `tuple[tuple[str, tuple[str, BinaryIO]], Any]` is not assignable to `tuple[tuple[str, tuple[str, BinaryIO]], Any]`
- torchvision/transforms/functional.py:1205:9: error[invalid-assignment] Object of type `list[int | float | (list[int | float] &amp; Number)]` is not assignable to `list[int | float]`
+ torchvision/transforms/functional.py:1205:9: error[invalid-assignment] Object of type `list[Unknown | (list[int | float] &amp; Number) | float]` is not assignable to `list[int | float]`
- torchvision/transforms/functional.py:1225:13: error[invalid-assignment] Object of type `list[int | float]` is not assignable to `list[int] | None`
+ torchvision/transforms/functional.py:1225:13: error[invalid-assignment] Object of type `list[Unknown | int | float]` is not assignable to `list[int] | None`
- torchvision/transforms/v2/functional/_geometry.py:649:9: error[invalid-assignment] Object of type `list[int | float | (list[int | float] &amp; Number)]` is not assignable to `list[int | float]`
+ torchvision/transforms/v2/functional/_geometry.py:649:9: error[invalid-assignment] Object of type `list[Unknown | (list[int | float] &amp; Number) | float]` is not assignable to `list[int | float]`

scikit-build-core (https://github.com/scikit-build/scikit-build-core)
+ src/scikit_build_core/format.py:74:16: error[invalid-return-type] Return type does not match returned value: expected `PyprojectFormatter | dict[str, str]`, found `dict[str, Literal[&quot;*&quot;]]`
- Found 48 diagnostics
+ Found 49 diagnostics

scikit-learn (https://github.com/scikit-learn/scikit-learn)
+ sklearn/linear_model/_quantile.py:259:18: error[no-matching-overload] No overload of function `linprog` matches arguments
- sklearn/linear_model/_quantile.py:286:18: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
- sklearn/linear_model/_quantile.py:286:40: error[non-subscriptable] Cannot subscript object of type `None` with no `__getitem__` method
- Found 2538 diagnostics
+ Found 2537 diagnostics

altair (https://github.com/vega/altair)
+ altair/datasets/_constraints.py:57:24: error[invalid-return-type] Return type does not match returned value: expected `Metadata`, found `dict[str, @Todo]`
+ altair/datasets/_constraints.py:60:16: error[invalid-return-type] Return type does not match returned value: expected `Metadata`, found `dict[Unknown, Unknown]`
+ altair/datasets/_constraints.py:111:33: error[invalid-argument-type] Argument to bound method `from_metadata` is incorrect: Expected `Metadata`, found `dict[str, @Todo]`
+ altair/datasets/_reader.py:177:9: error[invalid-assignment] Object of type `(Metadata &amp; Top[Mapping[Unknown, object]]) | (Path &amp; Top[Mapping[Unknown, object]]) | (str &amp; Top[Mapping[Unknown, object]]) | dict[Unknown | str, Unknown]` is not assignable to `Metadata | Path | str`
+ altair/datasets/_reader.py:178:28: error[invalid-argument-type] Argument to bound method `_solve` is incorrect: Expected `Metadata`, found `Metadata | Path | str`
+ altair/vegalite/v6/api.py:664:12: error[invalid-return-type] Return type does not match returned value: expected `_ConditionExtra`, found `dict[Unknown | str, Unknown]`
- tests/vegalite/v6/test_api.py:410:42: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- tests/vegalite/v6/test_api.py:430:41: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- tests/vegalite/v6/test_api.py:465:57: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
+ tests/vegalite/v6/test_theme.py:416:12: error[invalid-return-type] Return type does not match returned value: expected `ThemeConfig`, found `dict[Unknown | str, Unknown | dict[Unknown | str, Unknown | RectConfigKwds | AreaConfigKwds | ... omitted 7 union elements]]`
- Found 1037 diagnostics
+ Found 1041 diagnostics

egglog-python (https://github.com/egraphs-good/egglog-python)
- python/tests/test_array_api.py:385:13: error[invalid-assignment] Object of type `NDArray` is not assignable to `None`
+ python/tests/test_array_api.py:385:13: error[invalid-assignment] Object of type `tuple[EGraph, NDArray, NDArray, Program]` is not assignable to `None`
- python/tests/test_array_api.py:385:16: error[invalid-assignment] Object of type `NDArray` is not assignable to `None`
+ python/tests/test_array_api.py:385:16: error[invalid-assignment] Object of type `tuple[EGraph, NDArray, NDArray, Program]` is not assignable to `None`

streamlit (https://github.com/streamlit/streamlit)
+ lib/streamlit/elements/widgets/data_editor.py:144:9: error[invalid-assignment] Object of type `dict[Unknown | str, Unknown | dict[Unknown, Unknown] | list[Unknown]] | Any` is not assignable to `EditingState`
+ lib/streamlit/elements/widgets/data_editor.py:168:67: warning[unused-ignore-comment] Unused `ty: ignore` directive: &#x27;possibly-missing-attribute&#x27;
- Found 168 diagnostics
+ Found 170 diagnostics

dd-trace-py (https://github.com/DataDog/dd-trace-py)
- ddtrace/contrib/internal/ddtrace_api/patch.py:74:5: error[invalid-assignment] Object of type `list[Unknown]` is not assignable to `tuple[list[Unknown], ...]`
+ ddtrace/contrib/internal/ddtrace_api/patch.py:74:5: error[invalid-assignment] Object of type `tuple[list[Unknown], dict[Unknown, Unknown]]` is not assignable to `tuple[list[Unknown], ...]`
+ ddtrace/llmobs/_experiment.py:189:9: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, UpdatableDatasetRecord].__setitem__(key: str, value: UpdatableDatasetRecord, /) -&gt; None` cannot be called with a key of type `str` and a value of type `dict[Unknown | str, Unknown | str]` on object of type `dict[str, UpdatableDatasetRecord]`
+ ddtrace/llmobs/_experiment.py:194:9: error[invalid-assignment] Method `__setitem__` of type `Overload[(key: SupportsIndex, value: DatasetRecord, /) -&gt; None, (key: slice[Any, Any, Any], value: Iterable[DatasetRecord], /) -&gt; None]` cannot be called with a key of type `int` and a value of type `dict[Unknown | str, Unknown | str]` on object of type `list[DatasetRecord]`
+ ddtrace/llmobs/_experiment.py:604:16: error[invalid-return-type] Return type does not match returned value: expected `LLMObsExperimentEvalMetricEvent`, found `dict[Unknown | str, Unknown | str | int | list[str] | None]`
+ tests/contrib/langgraph/conftest.py:344:16: error[invalid-return-type] Return type does not match returned value: expected `State`, found `dict[Unknown | str, Unknown | list[Unknown]]`
+ tests/llmobs/test_llmobs_evaluator_runner.py:38:34: error[invalid-argument-type] Argument to bound method `enqueue` is incorrect: Expected `LLMObsSpanEvent`, found `dict[Unknown, Unknown]`
+ tests/llmobs/test_llmobs_evaluator_runner.py:56:30: error[invalid-argument-type] Argument to bound method `enqueue` is incorrect: Expected `LLMObsSpanEvent`, found `dict[Unknown | str, Unknown | str]`
+ tests/llmobs/test_llmobs_evaluator_runner.py:82:30: error[invalid-argument-type] Argument to bound method `enqueue` is incorrect: Expected `LLMObsSpanEvent`, found `dict[Unknown | str, Unknown | str]`
+ tests/llmobs/test_llmobs_span_agent_writer.py:40:36: error[invalid-argument-type] Argument to bound method `enqueue` is incorrect: Expected `LLMObsSpanEvent`, found `dict[Unknown, Unknown]`
+ tests/llmobs/test_llmobs_span_agentless_writer.py:34:36: error[invalid-argument-type] Argument to bound method `enqueue` is incorrect: Expected `LLMObsSpanEvent`, found `dict[Unknown, Unknown]`
+ tests/utils.py:1165:16: error[invalid-return-type] Return type does not match returned value: expected `list[TestAgentRequest]`, found `list[dict[str, Any]]`
+ tests/utils.py:1218:16: error[invalid-return-type] Return type does not match returned value: expected `list[dict[str, Any]]`, found `list[TestAgentRequest]`
- Found 8152 diagnostics
+ Found 8163 diagnostics

ibis (https://github.com/ibis-project/ibis)
- ibis/backends/snowflake/tests/conftest.py:175:23: error[invalid-assignment] Object of type `HTTPMessage` is not assignable to `dict[str, Any]`
+ ibis/backends/snowflake/tests/conftest.py:175:23: error[invalid-assignment] Object of type `tuple[str, HTTPMessage]` is not assignable to `dict[str, Any]`
- ibis/expr/types/relations.py:2966:14: error[invalid-assignment] Object of type `Value` is not assignable to `BooleanValue | Deferred | None`
+ ibis/expr/types/relations.py:2966:14: error[invalid-assignment] Object of type `Iterator[Value]` is not assignable to `BooleanValue | Deferred | None`
- ibis/expr/types/relations.py:3011:14: error[invalid-assignment] Object of type `Value` is not assignable to `BooleanValue | Deferred | None`
+ ibis/expr/types/relations.py:3011:14: error[invalid-assignment] Object of type `Iterator[Value]` is not assignable to `BooleanValue | Deferred | None`

jax (https://github.com/google/jax)
- jax/_src/pallas/mosaic/lowering.py:3228:3: error[invalid-assignment] Object of type `Jaxpr` is not assignable to `ClosedJaxpr`
+ jax/_src/pallas/mosaic/lowering.py:3228:3: error[invalid-assignment] Object of type `tuple[Jaxpr, bool]` is not assignable to `ClosedJaxpr`
- jax/_src/pallas/mosaic_gpu/lowering.py:2955:3: error[invalid-assignment] Object of type `Jaxpr` is not assignable to `ClosedJaxpr`
+ jax/_src/pallas/mosaic_gpu/lowering.py:2955:3: error[invalid-assignment] Object of type `tuple[Jaxpr, bool]` is not assignable to `ClosedJaxpr`
- jax/_src/pallas/pallas_call.py:1186:33: error[invalid-assignment] Object of type `list[Any]` is not assignable to `tuple[Any, ...]`
+ jax/_src/pallas/pallas_call.py:1186:33: error[invalid-assignment] Object of type `list[list[Any]]` is not assignable to `tuple[Any, ...]`
- jax/experimental/mosaic/gpu/tcgen05.py:552:19: error[invalid-assignment] Object of type `tuple[int, ...] | None` is not assignable to `tuple[tuple[int, ...], tuple[int, ...]] | None`
+ jax/experimental/mosaic/gpu/tcgen05.py:552:19: error[invalid-assignment] Object of type `tuple[tuple[int, ...], tuple[int, ...]] | tuple[None, None]` is not assignable to `tuple[tuple[int, ...], tuple[int, ...]] | None`
- jax/experimental/mosaic/gpu/tcgen05.py:553:19: error[invalid-assignment] Object of type `tuple[int, ...]` is not assignable to `tuple[tuple[int, ...], tuple[int, ...]]`
+ jax/experimental/mosaic/gpu/tcgen05.py:553:19: error[invalid-assignment] Object of type `tuple[tuple[int, ...], tuple[int, ...]]` is not assignable to `tuple[tuple[int, ...], tuple[int, ...]]`

pandas (https://github.com/pandas-dev/pandas)
- pandas/io/formats/style.py:4316:9: error[invalid-assignment] Object of type `floating[Any]` is not assignable to `int | float`
+ pandas/io/formats/style.py:4316:9: error[invalid-assignment] Object of type `tuple[floating[Any], Literal[&quot;zero&quot;]]` is not assignable to `int | float`
+ pandas/io/formats/style_render.py:1896:12: error[invalid-return-type] Return type does not match returned value: expected `list[CSSDict]`, found `list[dict[Unknown | str, Unknown | str] | Unknown]`
- Found 3381 diagnostics
+ Found 3382 diagnostics

static-frame (https://github.com/static-frame/static-frame)
+ static_frame/test/unit/test_type_clinic.py:1078:14: error[invalid-argument-type] Argument to function `proc1` is incorrect: Expected `Model`, found `Literal[&quot;f&quot;]`
+ static_frame/test/unit/test_type_clinic.py:1078:21: error[invalid-argument-type] Argument to function `proc1` is incorrect: Expected `Model`, found `Literal[False]`
+ static_frame/test/unit/test_type_clinic.py:1079:14: error[invalid-argument-type] Argument to function `proc1` is incorrect: Expected `Model`, found `Literal[True]`
+ static_frame/test/unit/test_type_clinic.py:1079:22: error[invalid-argument-type] Argument to function `proc1` is incorrect: Expected `Model`, found `Literal[&quot;g&quot;]`
+ static_frame/test/unit/test_type_clinic.py:1082:18: error[invalid-argument-type] Argument to function `proc1` is incorrect: Expected `Model`, found `Literal[&quot;f&quot;]`
+ static_frame/test/unit/test_type_clinic.py:1082:25: error[invalid-argument-type] Argument to function `proc1` is incorrect: Expected `Model`, found `Literal[&quot;g&quot;]`
- Found 2000 diagnostics
+ Found 2006 diagnostics

zulip (https://github.com/zulip/zulip)
+ zerver/actions/message_send.py:1135:13: error[invalid-assignment] Object of type `dict[str, Unknown | None]` is not assignable to `UserData`
+ zerver/lib/export.py:1951:9: error[invalid-assignment] Object of type `dict[str, list[dict[str, Any] | Unknown] | list[int] | Unknown]` is not assignable to `MessagePartial`
+ zerver/lib/message.py:932:5: error[invalid-assignment] Object of type `dict[str, dict[int, RawUnreadDirectMessageDict] | dict[int, RawUnreadStreamDict] | set[Unknown] | dict[int, RawUnreadDirectMessageGroupDict] | bool]` is not assignable to `RawUnreadMessagesResult`
+ zerver/lib/message.py:992:13: error[invalid-assignment] Method `__setitem__` of type `bound method dict[int, RawUnreadStreamDict].__setitem__(key: int, value: RawUnreadStreamDict, /) -&gt; None` cannot be called with a key of type `Any` and a value of type `dict[str, Any]` on object of type `dict[int, RawUnreadStreamDict]`
+ zerver/lib/message.py:1005:13: error[invalid-assignment] Method `__setitem__` of type `bound method dict[int, RawUnreadDirectMessageDict].__setitem__(key: int, value: RawUnreadDirectMessageDict, /) -&gt; None` cannot be called with a key of type `Any` and a value of type `dict[str, Any]` on object of type `dict[int, RawUnreadDirectMessageDict]`
+ zerver/lib/message.py:1024:17: error[invalid-assignment] Method `__setitem__` of type `bound method dict[int, RawUnreadDirectMessageDict].__setitem__(key: int, value: RawUnreadDirectMessageDict, /) -&gt; None` cannot be called with a key of type `Any` and a value of type `dict[str, int | Unknown]` on object of type `dict[int, RawUnreadDirectMessageDict]`
+ zerver/lib/message.py:1028:17: error[invalid-assignment] Method `__setitem__` of type `bound method dict[int, RawUnreadDirectMessageGroupDict].__setitem__(key: int, value: RawUnreadDirectMessageGroupDict, /) -&gt; None` cannot be called with a key of type `Any` and a value of type `dict[str, str]` on object of type `dict[int, RawUnreadDirectMessageGroupDict]`
+ zerver/lib/message.py:1157:5: error[invalid-assignment] Object of type `dict[str, list[UnreadDirectMessageInfo] | list[UnreadStreamInfo] | list[UnreadDirectMessageGroupInfo] | list[int] | int]` is not assignable to `UnreadMessagesResult`
+ zerver/lib/push_notifications.py:1973:12: error[invalid-return-type] Return type does not match returned value: expected `dict[str, PushDeviceInfoDict]`, found `dict[str | Unknown, dict[Unknown | str, Unknown] | Unknown]`
+ zerver/lib/subscription_info.py:807:5: error[invalid-assignment] Object of type `dict[Any, dict[str, Any] | Unknown]` is not assignable to `dict[int, RawStreamDict]`
+ zerver/lib/subscription_info.py:830:5: error[invalid-assignment] Object of type `QuerySet[Subscription, dict[str, Any]]` is not assignable to `Iterable[RawSubscriptionDict]`
+ zerver/lib/user_groups.py:708:9: error[invalid-assignment] Object of type `dict[str, Unknown | int | None | list[int] | UserGroupMembersDict]` is not assignable to `UserGroupDict`
+ zerver/lib/users.py:495:12: error[invalid-return-type] Return type does not match returned value: expected `list[Account]`, found `list[dict[str, Unknown | str | None] | Unknown]`
+ zerver/models/realm_emoji.py:88:9: error[invalid-assignment] Object of type `dict[str, str | Unknown | None]` is not assignable to `EmojiInfo`
+ zerver/tests/test_channel_creation.py:98:13: error[invalid-argument-type] Argument to function `create_streams_if_needed` is incorrect: Expected `list[StreamDict]`, found `list[dict[Unknown | str, Unknown | int] | Unknown]`
+ zerver/tests/test_channel_creation.py:128:13: error[invalid-argument-type] Argument to function `create_streams_if_needed` is incorrect: Expected `list[StreamDict]`, found `list[dict[Unknown | str, Unknown | bool] | Unknown]`
+ zerver/tests/test_import_export.py:3063:23: error[invalid-argument-type] Argument to function `do_update_user_custom_profile_data_if_changed` is incorrect: Expected `list[ProfileDataElementUpdateDict]`, found `list[Unknown | dict[str, Unknown | str]]`
+ zerver/tests/test_message_dict.py:359:9: error[invalid-assignment] Object of type `list[Unknown | dict[str, str | int]]` is not assignable to `list[UserDisplayRecipient]`
+ zerver/tests/test_subs.py:422:9: error[invalid-assignment] Object of type `list[dict[Unknown | str, Unknown | bool] | Unknown]` is not assignable to `list[StreamDict]`
+ zerver/tests/test_user_status.py:23:12: error[invalid-return-type] Return type does not match returned value: expected `UserInfoDict`, found `UserInfoDict | None`
+ zerver/tornado/event_queue.py:1042:13: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, ClientInfo].__setitem__(key: str, value: ClientInfo, /) -&gt; None` cannot be called with a key of type `Unknown | str` and a value of type `dict[str, ClientDescriptor | list[Unknown] | bool]` on object of type `dict[str, ClientInfo]`
+ zerver/tornado/event_queue.py:1053:13: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, ClientInfo].__setitem__(key: str, value: ClientInfo, /) -&gt; None` cannot be called with a key of type `Unknown | str` and a value of type `dict[str, ClientDescriptor | Any | bool]` on object of type `dict[str, ClientInfo]`
+ zerver/views/streams.py:595:5: error[invalid-assignment] Object of type `list[dict[Unknown | str, Unknown] | Unknown]` is not assignable to `list[StreamDict]`
+ zilencer/views.py:1733:9: error[invalid-assignment] Method `__setitem__` of type `bound method dict[str, RemoteRealmDictValue].__setitem__(key: str, value: RemoteRealmDictValue, /) -&gt; None` cannot be called with a key of type `str` and a value of type `dict[Unknown | str, Unknown | int | None]` on object of type `dict[str, RemoteRealmDictValue]`
+ zproject/backends.py:1782:16: error[invalid-return-type] Return type does not match returned value: expected `list[ExternalAuthMethodDictT]`, found `list[ExternalAuthMethodDictT | dict[str, Unknown | str]]`
+ zproject/backends.py:2506:16: error[invalid-return-type] Return type does not match returned value: expected `list[ExternalAuthMethodDictT]`, found `list[ExternalAuthMethodDictT | dict[str, Unknown | str]]`
+ zproject/backends.py:3441:13: error[invalid-assignment] Object of type `dict[str, str | Any]` is not assignable to `ExternalAuthMethodDictT`
+ zproject/backends.py:3536:16: error[invalid-return-type] Return type does not match returned value: expected `list[ExternalAuthMethodDictT]`, found `list[ExternalAuthMethodDictT | dict[str, str | Unknown]]`
- Found 3339 diagnostics
+ Found 3367 diagnostics

rotki (https://github.com/rotki/rotki)
- rotkehlchen/api/rest.py:4039:30: error[invalid-assignment] Object of type `Unknown | list[tuple[int, HistoryBaseEntry[Unknown]]] | list[HistoryBaseEntry[Unknown]]` is not assignable to `list[HistoryBaseEntry[Unknown]]`
+ rotkehlchen/api/rest.py:4039:30: error[invalid-assignment] Object of type `zip[Unknown] | tuple[list[Unknown | None], list[tuple[int, HistoryBaseEntry[Unknown]]] | list[HistoryBaseEntry[Unknown]]]` is not assignable to `list[HistoryBaseEntry[Unknown]]`
+ rotkehlchen/balances/historical.py:73:13: error[invalid-assignment] Method `__setitem__` of type `bound method dict[Asset, HistoricalBalance].__setitem__(key: Asset, value: HistoricalBalance, /) -&gt; None` cannot be called with a key of type `Unknown` and a value of type `dict[Unknown | str, Unknown | FVal]` on object of type `dict[Asset, HistoricalBalance]`
+ rotkehlchen/chain/evm/decoding/gitcoinv2/constants.py:27:66: error[invalid-argument-type] Invalid argument to key &quot;inputs&quot; with declared type `Sequence[ABIComponentIndexed]` on TypedDict `ABIEvent`: value of type `list[Unknown | dict[Unknown | str, Unknown | bool | str]]`
+ rotkehlchen/chain/evm/decoding/gitcoinv2/constants.py:29:71: error[invalid-argument-type] Invalid argument to key &quot;inputs&quot; with declared type `Sequence[ABIComponentIndexed]` on TypedDict `ABIEvent`: value of type `list[Unknown | dict[Unknown | str, Unknown | bool | str] | dict[Unknown | str, Unknown | list[Unknown | dict[Unknown | str, Unknown | str]] | bool | str]]`
+ rotkehlchen/chain/evm/decoding/thegraph/constants.py:15:1: error[invalid-assignment] Object of type `list[Unknown | dict[Unknown | str, Unknown | bool | list[Unknown | dict[Unknown | str, Unknown | bool | str]] | str]]` is not assignable to `Sequence[ABIEvent]`
+ rotkehlchen/db/upgrades/v45_v46.py:121:25: error[invalid-argument-type] Argument to function `maybe_set_transaction_extra_data` is incorrect: Expected `AssetMovementExtraData | None`, found `dict[Unknown | str, Unknown] | None`
+ rotkehlchen/exchanges/coinbase.py:1063:21: error[invalid-argument-type] Argument to function `maybe_set_transaction_extra_data` is incorrect: Expected `AssetMovementExtraData | None`, found `dict[Unknown | str, Unknown] | None`
- rotkehlchen/tests/fixtures/rotkehlchen.py:124:46: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
- Found 1683 diagnostics
+ Found 1688 diagnostics

sympy (https://github.com/sympy/sympy)
- sympy/core/evalf.py:1410:5: error[invalid-assignment] Object of type `dict[type[Expr], ((Expr, int, dict[str, Any], /) -&gt; Any) | (def evalf_float(expr: Float, prec: int, options: dict[str, Any]) -&gt; Any) | (def evalf_rational(expr: Rational, prec: int, options: dict[str, Any]) -&gt; Any) | ... omitted 16 union elements]` is not assignable to `dict[type[Expr], (Expr, int, dict[str, Any], /) -&gt; Any]`
+ sympy/core/evalf.py:1410:5: error[invalid-assignment] Object of type `dict[Unknown | &lt;class &#x27;Symbol&#x27;&gt; | &lt;class &#x27;Dummy&#x27;&gt; | ... omitted 31 union elements, Unknown | ((x: Expr, prec: int, options: dict[str, Any]) -&gt; Any) | ((expr: Float, prec: int, options: dict[str, Any]) -&gt; Any) | ... omitted 17 union elements]` is not assignable to `dict[type[Expr], (Expr, int, dict[str, Any], /) -&gt; Any]`

core (https://github.com/home-assistant/core)
+ homeassistant/components/accuweather/weather.py:190:16: error[invalid-return-type] Return type does not match returned value: expected `list[Forecast] | None`, found `list[dict[Unknown | str, Unknown | str | None] | Unknown]`
+ homeassistant/components/accuweather/weather.py:220:16: error[invalid-return-type] Return type does not match returned value: expected `list[Forecast] | None`, found `list[dict[Unknown | str, Unknown | str | None] | Unknown]`
+ homeassistant/components/alexa/state_report.py:341:9: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventStateChangedData]`
+ homeassistant/components/alexa/state_report.py:342:9: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `(Event[Mapping[str, Any]], /) -&gt; Coroutine[Any, Any, None] | None`, found `def _async_entity_state_listener(event_: Event[EventStateChangedData]) -&gt; CoroutineType[Any, Any, None]`
+ homeassistant/components/alexa/state_report.py:343:9: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `((Mapping[str, Any], /) -&gt; bool) | None`, found `def _async_entity_state_filter(data: EventStateChangedData) -&gt; bool`
+ homeassistant/components/anthropic/config_flow.py:129:21: error[invalid-argument-type] Argument to bound method `async_create_entry` is incorrect: Expected `Iterable[ConfigSubentryData] | None`, found `list[Unknown | dict[Unknown | str, Unknown | str | dict[Unknown | str, Unknown | bool | list[Unknown | str] | str] | None]]`
+ homeassistant/components/apache_kafka/__init__.py:133:37: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventStateChangedData]`
+ homeassistant/components/apache_kafka/__init__.py:133:58: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `(Event[Mapping[str, Any]], /) -&gt; Coroutine[Any, Any, None] | None`, found `bound method Self@start.write(event: Event[EventStateChangedData]) -&gt; CoroutineType[Any, Any, None]`
+ homeassistant/components/backup/manager.py:1610:16: error[invalid-return-type] Return type does not match returned value: expected `StoredKnownBackup`, found `dict[Unknown | str, Unknown | str | list[dict[Unknown | str, Unknown | str | None] | Unknown] | list[str]]`
+ homeassistant/components/backup/manager.py:1612:30: error[invalid-argument-type] Invalid argument to key &quot;failed_addons&quot; with declared type `list[StoredAddonInfo]` on TypedDict `StoredKnownBackup`: value of type `list[dict[Unknown | str, Unknown | str | None] | Unknown]`
+ homeassistant/components/cloud/alexa_config.py:272:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventEntityRegistryUpdatedData]`
+ homeassistant/components/cloud/alexa_config.py:273:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `(Event[Mapping[str, Any]], /) -&gt; Coroutine[Any, Any, None] | None`, found `bound method Self@async_initialize._handle_entity_registry_updated(event: Event[_EventEntityRegistryUpdatedData_CreateRemove | _EventEntityRegistryUpdatedData_Update]) -&gt; CoroutineType[Any, Any, None]`
+ homeassistant/components/cloud/google_config.py:269:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventEntityRegistryUpdatedData]`
+ homeassistant/components/cloud/google_config.py:270:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `(Event[Mapping[str, Any]], /) -&gt; Coroutine[Any, Any, None] | None`, found `bound method Self@async_initialize._handle_entity_registry_updated(event: Event[_EventEntityRegistryUpdatedData_CreateRemove | _EventEntityRegistryUpdatedData_Update]) -&gt; None`
+ homeassistant/components/cloud/google_config.py:275:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventDeviceRegistryUpdatedData]`
+ homeassistant/components/cloud/google_config.py:276:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `(Event[Mapping[str, Any]], /) -&gt; Coroutine[Any, Any, None] | None`, found `bound method Self@async_initialize._handle_device_registry_updated(event: Event[_EventDeviceRegistryUpdatedData_Create | _EventDeviceRegistryUpdatedData_Remove | _EventDeviceRegistryUpdatedData_Update]) -&gt; None`
+ homeassistant/components/conversation/default_agent.py:287:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventAreaRegistryUpdatedData]`
+ homeassistant/components/conversation/default_agent.py:291:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventFloorRegistryUpdatedData]`
+ homeassistant/components/conversation/default_agent.py:295:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventEntityRegistryUpdatedData]`
+ homeassistant/components/conversation/default_agent.py:297:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `((Mapping[str, Any], /) -&gt; bool) | None`, found `bound method Self@_listen_clear_slot_list._filter_entity_registry_changes(event_data: _EventEntityRegistryUpdatedData_CreateRemove | _EventEntityRegistryUpdatedData_Update) -&gt; bool`
+ homeassistant/components/conversation/default_agent.py:300:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventStateChangedData]`
+ homeassistant/components/conversation/default_agent.py:302:17: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `((Mapping[str, Any], /) -&gt; bool) | None`, found `bound method Self@_listen_clear_slot_list._filter_state_changes(event_data: EventStateChangedData) -&gt; bool`
+ homeassistant/components/datadog/__init__.py:124:31: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventStateChangedData]`
+ homeassistant/components/device_tracker/config_entry.py:166:27: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventDeviceRegistryUpdatedData]`
+ homeassistant/components/device_tracker/config_entry.py:166:61: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `(Event[Mapping[str, Any]], /) -&gt; Coroutine[Any, Any, None] | None`, found `def handle_device_event(ev: Event[EventDeviceRegistryUpdatedData]) -&gt; None`
+ homeassistant/components/ekeybionyx/config_flow.py:110:13: error[invalid-assignment] Object of type `list[dict[Unknown | str, Unknown] | Unknown]` is not assignable to `list[SelectOptionDict]`
+ homeassistant/components/esphome/encryption_key_storage.py:49:13: error[invalid-assignment] Object of type `(Unknown &amp; ~AlwaysFalsy) | (EncryptionKeyData &amp; ~AlwaysFalsy) | dict[Unknown | str, Unknown | dict[Unknown, Unknown]]` is not assignable to attribute `_data` of type `EncryptionKeyData | None`
- homeassistant/components/evohome/storage.py:78:69: warning[unused-ignore-comment] Unused blanket `type: ignore` directive
+ homeassistant/components/google_assistant/report_state.py:190:13: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `EventType[Mapping[str, Any]] | str`, found `EventType[EventStateChangedData]`
+ homeassistant/components/google_assistant/report_state.py:191:13: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `(Event[Mapping[str, Any]], /) -&gt; Coroutine[Any, Any, None] | None`, found `def _async_entity_state_listener(event: Event[EventStateChangedData]) -&gt; CoroutineType[Any, Any, None]`
+ homeassistant/components/google_assistant/report_state.py:192:13: error[invalid-argument-type] Argument to bound method `async_listen` is incorrect: Expected `((Mapping[str, Any], /) -&gt; bool) | None`, found `def _async_entity_state_filter(data: EventStateChangedData) -&gt; bool`
+ homeassistant/components/google_generative_ai_conversation/config_flow.py:132:21: error[invalid-argument-type] Argument to bound method `async_create_entry` is incorr...*[Comment body truncated]*
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 02:56</div>
            <div class="timeline-body"><p>I&#x27;m not sure if we want to be emitting <code>invalid-assignment</code> errors if we have already emitted a <code>invalid-key</code> error. Maybe we should special case <code>TypedDict</code> annotated assignments to avoid this? Note that we <em>do</em> want to infer a <code>dict</code> for the RHS in that case (see <a href="https://github.com/astral-sh/ruff/pull/21169">astral-sh/ruff#21169</a>), but the diagnostics are effectively being duplicated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codspeed-hq[bot]">@codspeed-hq[bot]</a> on 2025-11-03 04:06</div>
            <div class="timeline-body">

<a href="https://codspeed.io/astral-sh/ruff/branches/ibraheem%2Ftyped-dict-assignability?utm_source=github&amp;utm_medium=comment&amp;utm_content=header">CodSpeed Performance Report</a>
Merging #21238 will <strong>degrade performances by 17.57%</strong>
<p>Comparing <code>ibraheem/typed-dict-assignability</code> (2aa777e) with <code>main</code> (21ec8aa)</p>
Summary
<p><code> 1</code> regression<br>
<code> 21</code> untouched<br>
<code> 30</code> skipped[^skipped]</p>
<blockquote>
<p>:warning: <em>Please fix the performance issues or <a href="https://codspeed.io/astral-sh/ruff/branches/ibraheem%2Ftyped-dict-assignability?utm_source=github&amp;utm_medium=comment&amp;utm_content=acknowledge">acknowledge them on CodSpeed</a>.</em></p>
</blockquote>
Benchmarks breakdown
<p>|     | Mode | Benchmark | <code>BASE</code> | <code>HEAD</code> | Change |
| --- | ---- | --------- | ------ | ------ | ------ |
|  | WallTime | <a href="https://codspeed.io/astral-sh/ruff/branches/ibraheem%2Ftyped-dict-assignability?uri=crates%2Fruff_benchmark%2Fbenches%2Fty_walltime.rs%3A%3Amedium%5Bcolour-science%5D&amp;runnerMode=WallTime&amp;utm_source=github&amp;utm_medium=comment&amp;utm_content=benchmark"><code>medium[colour-science]</code></a> | 11.2 s | 13.6 s | -17.57% |
[^skipped]: 30 benchmarks were skipped, so the baseline results were used instead. If they were deleted from the codebase, <a href="https://codspeed.io/astral-sh/ruff/branches/ibraheem%2Ftyped-dict-assignability?sectionId=benchmark-comparison-section-baseline-result-skipped&amp;utm_source=github&amp;utm_medium=comment&amp;utm_content=archive">click here and archive them to remove them from the performance reports</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-11-03 14:52</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/ty_python_semantic/resources/mdtest/comprehensions/basic.md</code>:167 on 2025-11-03 14:52</div>
            <div class="timeline-body"><p>Yes, absolutely. I was aware about this, but should have added a comment. But this is why I added the other test below (where it&#x27;s supposed to be an error).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> reviewed on 2025-11-03 14:54</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/ty_python_semantic/resources/mdtest/comprehensions/basic.md</code>:167 on 2025-11-03 14:54</div>
            <div class="timeline-body"><p>See also this comment: <a href="https://github.com/astral-sh/ruff/pull/20962">astral-sh/ruff#20962</a>#discussion_r2482437556</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-11-03 15:01</div>
            <div class="timeline-body"><blockquote>
<p>I&#x27;m not sure if we want to be emitting <code>invalid-assignment</code> errors if we have already emitted a <code>invalid-key</code> error. Maybe we should special case <code>TypedDict</code> annotated assignments to avoid this? Note that we <em>do</em> want to infer a <code>dict</code> for the RHS in that case (see #21169), but the diagnostics are effectively being duplicated.</p>
</blockquote>
<p>I was about to add a comment to this PR that we should maybe try to avoid emitting the additional <code>invalid-assignment</code> diagnostic, and only then saw your comment. I think it would be great if we could attempt to do this, if it&#x27;s not too complicated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/ty_python_semantic/src/types.rs</code>:1983 on 2025-11-03 15:06</div>
            <div class="timeline-body"><p>I guess intersections (of a <code>TypedDict</code> and something else), typevars, and <code>Never</code> would be types that can subtype <code>TypedDict</code>, but they were all handled above...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/ty_python_semantic/resources/mdtest/typed_dict.md</code>:208 on 2025-11-03 15:07</div>
            <div class="timeline-body"><p>I&#x27;m confused. Where does <code>invalid-argument-type</code> come from?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/sharkdp">@sharkdp</a> on <code>crates/ty_python_semantic/src/types/infer/builder.rs</code>:6208 on 2025-11-03 15:09</div>
            <div class="timeline-body"><p>I know you&#x27;re not the one to invent/introduce this, but I think I would prefer expanding <code>elt</code>/<code>elts</code> to <code>element</code>/<code>elements</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sharkdp">@sharkdp</a> approved on 2025-11-03 15:11</div>
            <div class="timeline-body"><p>Nice, thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ibraheemdev">@ibraheemdev</a> reviewed on 2025-11-03 15:36</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on <code>crates/ty_python_semantic/resources/mdtest/typed_dict.md</code>:208 on 2025-11-03 15:36</div>
            <div class="timeline-body"><p>We emit <code>invalid-argument-type</code> when a value is not assignable to its declared key type, but this should be removed now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 15:52</div>
            <div class="timeline-body"><p>I added a special case to avoid the duplicated diagnostics for simple annotated assignments, but attribute assignment and function arguments are trickier, because we may hide typed-dict diagnostics during multi-inference and rely on the assignability check to fail.</p>
<p>There is one correct new typing comformance diagnostic, but also two regressions because we do not correctly handle <code>extra_items</code> (and were hiding diagnostics by treating a <code>dict</code> as a <code>TypedDict</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 15:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-11-03 15:59</div>
            <div class="timeline-body">

<code>ecosystem-analyzer</code> results
<p>| Lint rule | Added | Removed | Changed |
|-----------|------:|--------:|--------:|
| <code>invalid-argument-type</code> | 167 | 0 | 0 |
| <code>invalid-assignment</code> | 82 | 0 | 32 |
| <code>invalid-return-type</code> | 38 | 0 | 0 |
| <code>unused-ignore-comment</code> | 1 | 33 | 0 |
| <code>non-subscriptable</code> | 0 | 11 | 0 |
| <code>possibly-missing-attribute</code> | 4 | 0 | 0 |
| <code>invalid-parameter-default</code> | 2 | 0 | 0 |
| <code>no-matching-overload</code> | 1 | 1 | 0 |
| <code>possibly-missing-implicit-call</code> | 0 | 1 | 0 |
| <code>unresolved-attribute</code> | 0 | 1 | 0 |
| <code>unsupported-operator</code> | 1 | 0 | 0 |
| <strong>Total</strong> | <strong>296</strong> | <strong>47</strong> | <strong>32</strong> |</p>
<p><strong><a href="https://ibraheem-typed-dict-assignab.ecosystem-663.pages.dev/diff">Full report with detailed diff</a></strong> (<a href="https://ibraheem-typed-dict-assignab.ecosystem-663.pages.dev/timing">timing results</a>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> removed by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 17:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ecosystem-analyzer</span> added by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 17:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 21:57</div>
            <div class="timeline-body"><p>Most of the diagnostics seem to be duplicated diagnostics (in the not-so-simple special case). I opened <a href="https://github.com/astral-sh/ty/issues/1472">astral-sh/ty#1472</a> to track that issue, but I think landing this is high priority because of how much bidirectional-inference relies on the fallback untyped <code>dict</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 21:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-11-03 21:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-11-03 21:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:20:11 UTC
    </footer>
</body>
</html>
