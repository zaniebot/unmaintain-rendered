<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a script to update the schemastore - astral-sh/ruff #4574</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a script to update the schemastore</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/4574">#4574</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-05-22 11:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>Hacked this together, it clones astral-sh/schemastore, updated the schema and pushes the changes to a new branch tagged with the ruff git hash. You can see the URL to create the PR to schemastore in the CLI. The script is separated into three blocks so you can rerun the schema generation in the middle before committing.</p>
<p>https://github.com/SchemaStore/schemastore/pull/2974 was created with this script</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/konstin">@konstin</a> on 2023-05-22 11:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2023-05-22 11:14</div>
            <div class="timeline-body">PR Check Results
Ecosystem
<p>✅ ecosystem check detected no changes.</p>
Benchmark
Linux
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.00     17.0±0.15ms     2.4 MB/sec    1.00     16.9±0.14ms     2.4 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.01      4.0±0.04ms     4.1 MB/sec    1.00      4.0±0.03ms     4.2 MB/sec
linter/all-rules/numpy/globals.py          1.00    495.0±2.86µs     6.0 MB/sec    1.00    493.4±2.42µs     6.0 MB/sec
linter/all-rules/pydantic/types.py         1.01      7.0±0.06ms     3.7 MB/sec    1.00      6.9±0.06ms     3.7 MB/sec
linter/default-rules/large/dataset.py      1.01      7.9±0.04ms     5.1 MB/sec    1.00      7.8±0.08ms     5.2 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.01   1716.7±6.46µs     9.7 MB/sec    1.00  1702.0±12.90µs     9.8 MB/sec
linter/default-rules/numpy/globals.py      1.01    187.4±1.94µs    15.7 MB/sec    1.00    185.7±3.41µs    15.9 MB/sec
linter/default-rules/pydantic/types.py     1.01      3.6±0.01ms     7.1 MB/sec    1.00      3.5±0.04ms     7.2 MB/sec
parser/large/dataset.py                    1.01      6.2±0.01ms     6.6 MB/sec    1.00      6.1±0.08ms     6.6 MB/sec
parser/numpy/ctypeslib.py                  1.00   1218.0±5.47µs    13.7 MB/sec    1.00  1216.8±12.09µs    13.7 MB/sec
parser/numpy/globals.py                    1.00    126.1±0.36µs    23.4 MB/sec    1.00    126.5±2.23µs    23.3 MB/sec
parser/pydantic/types.py                   1.00      2.7±0.01ms     9.6 MB/sec    1.00      2.7±0.02ms     9.6 MB/sec
</code></pre>
Windows
<pre><code>group                                      main                                   pr
-----                                      ----                                   --
linter/all-rules/large/dataset.py          1.00     16.5±0.12ms     2.5 MB/sec    1.00     16.5±0.13ms     2.5 MB/sec
linter/all-rules/numpy/ctypeslib.py        1.00      4.2±0.05ms     4.0 MB/sec    1.00      4.1±0.04ms     4.0 MB/sec
linter/all-rules/numpy/globals.py          1.00    496.0±8.46µs     5.9 MB/sec    1.00    493.6±8.63µs     6.0 MB/sec
linter/all-rules/pydantic/types.py         1.00      6.9±0.07ms     3.7 MB/sec    1.00      6.9±0.08ms     3.7 MB/sec
linter/default-rules/large/dataset.py      1.00      8.1±0.07ms     5.0 MB/sec    1.00      8.1±0.05ms     5.0 MB/sec
linter/default-rules/numpy/ctypeslib.py    1.00  1686.3±18.25µs     9.9 MB/sec    1.00  1694.2±18.96µs     9.8 MB/sec
linter/default-rules/numpy/globals.py      1.00    189.9±3.85µs    15.5 MB/sec    1.01    191.8±5.08µs    15.4 MB/sec
linter/default-rules/pydantic/types.py     1.00      3.6±0.03ms     7.0 MB/sec    1.00      3.6±0.04ms     7.0 MB/sec
parser/large/dataset.py                    1.00      6.5±0.04ms     6.2 MB/sec    1.00      6.5±0.04ms     6.2 MB/sec
parser/numpy/ctypeslib.py                  1.00  1237.3±16.98µs    13.5 MB/sec    1.00  1235.3±12.84µs    13.5 MB/sec
parser/numpy/globals.py                    1.00    125.6±1.79µs    23.5 MB/sec    1.01    126.4±2.46µs    23.3 MB/sec
parser/pydantic/types.py                   1.00      2.8±0.03ms     9.2 MB/sec    1.00      2.8±0.03ms     9.2 MB/sec
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-05-22 14:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>scripts/update_schemastore.py</code>:46 on 2023-05-22 14:09</div>
            <div class="timeline-body"><p>Are these intentional?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> reviewed on 2023-05-22 14:09</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on <code>scripts/update_schemastore.py</code>:33 on 2023-05-22 14:09</div>
            <div class="timeline-body"><p>I&#x27;m tempted to say we should just use a temporary directory for SchemaStore, but is that more trouble than it&#x27;s worth?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a> approved on 2023-05-22 14:41</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-05-23 10:05</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>scripts/update_schemastore.py</code>:46 on 2023-05-23 10:05</div>
            <div class="timeline-body"><p>if you enable scientific mode you can run each block individually, like below, but i&#x27;ve removed it for the tempdir</p>
<p><img src="https://github.com/charliermarsh/ruff/assets/6826232/84665ace-3164-4fd0-97a5-cc75df188044" alt="image"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a> reviewed on 2023-05-23 10:06</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/konstin">@konstin</a> on <code>scripts/update_schemastore.py</code>:33 on 2023-05-23 10:06</div>
            <div class="timeline-body"><p>added the default to tempdir</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/konstin">@konstin</a> on 2023-05-23 10:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/konstin">@konstin</a> on 2023-05-23 10:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2023-05-23 10:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:53:52 UTC
    </footer>
</body>
</html>
