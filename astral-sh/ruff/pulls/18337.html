<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[flake8_use_pathlib]: Replace os.symlink with Path.symlink_to (PTH211) - astral-sh/ruff #18337</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[flake8_use_pathlib]: Replace os.symlink with Path.symlink_to (PTH211)</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/18337">#18337</a>
        opened by <a href="https://github.com/fennr">@fennr</a>
        on 2025-05-27 18:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/fennr">@fennr</a> on 2025-05-27 18:01</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>/closes https://github.com/astral-sh/ruff/issues/18250</p>
<h2>Test Plan</h2>
<p>Add snapshot</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2025-05-28 07:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/codes.rs</code>:936 on 2025-05-28 07:33</div>
            <div class="timeline-body"><pre><code class="language-suggestion">        (Flake8UsePathlib, &quot;211&quot;) =&gt; (RuleGroup::Preview, rules::flake8_use_pathlib::violations::OsSymlink),
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> reviewed on 2025-05-28 07:33</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/flake8_use_pathlib/rules/replaceable_by_pathlib.rs</code>:206 on 2025-05-28 07:36</div>
            <div class="timeline-body"><p>We should avoid raising this rule when <code>fd</code> is set to a non-None` value (see chmod for an example)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on <code>crates/ruff_linter/src/rules/flake8_use_pathlib/violations.rs</code>:1237 on 2025-05-28 07:37</div>
            <div class="timeline-body"><p>I think it should be the opposite. But please verify it locally</p>
<pre><code class="language-suggestion">/// Path(&quot;tmp/python&quot;).symlink_to(&quot;usr/bin/python&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> requested changes on 2025-05-28 07:38</div>
            <div class="timeline-body"><p>Thanks. I think there's an error in the example and we have to account for symlink calls with an <code>fd</code> argument</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/fennr">@fennr</a> reviewed on 2025-05-28 08:21</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/fennr">@fennr</a> on <code>crates/ruff_linter/src/rules/flake8_use_pathlib/violations.rs</code>:1237 on 2025-05-28 08:21</div>
            <div class="timeline-body"><p>You are right. Corrected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/fennr">@fennr</a> reviewed on 2025-05-28 08:22</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/fennr">@fennr</a> on <code>crates/ruff_linter/src/rules/flake8_use_pathlib/rules/replaceable_by_pathlib.rs</code>:206 on 2025-05-28 08:22</div>
            <div class="timeline-body"><p>Added check and test</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @fennr on 2025-05-28 08:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a> approved on 2025-05-28 09:11</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2025-05-28 09:30</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>ℹ️ ecosystem check <strong>detected linter changes</strong>. (+10 -0 violations, +0 -0 fixes in 3 projects; 52 projects unchanged)</p>
<details><summary><a href="https://github.com/apache/airflow">apache/airflow</a> (+6 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/apache/airflow/blob/6d366c8051dbe2c988f47f293d309ea92785e7a9/airflow-core/src/airflow/dag_processing/manager.py#L845'>airflow-core/src/airflow/dag_processing/manager.py:845:25:</a> PTH211 `os.symlink` should be replaced by `Path.symlink_to`
+ <a href='https://github.com/apache/airflow/blob/6d366c8051dbe2c988f47f293d309ea92785e7a9/airflow-core/src/airflow/dag_processing/manager.py#L851'>airflow-core/src/airflow/dag_processing/manager.py:851:21:</a> PTH211 `os.symlink` should be replaced by `Path.symlink_to`
+ <a href='https://github.com/apache/airflow/blob/6d366c8051dbe2c988f47f293d309ea92785e7a9/airflow-core/src/airflow/utils/log/file_processor_handler.py#L127'>airflow-core/src/airflow/utils/log/file_processor_handler.py:127:25:</a> PTH211 `os.symlink` should be replaced by `Path.symlink_to`
+ <a href='https://github.com/apache/airflow/blob/6d366c8051dbe2c988f47f293d309ea92785e7a9/airflow-core/src/airflow/utils/log/file_processor_handler.py#L133'>airflow-core/src/airflow/utils/log/file_processor_handler.py:133:21:</a> PTH211 `os.symlink` should be replaced by `Path.symlink_to`
+ <a href='https://github.com/apache/airflow/blob/6d366c8051dbe2c988f47f293d309ea92785e7a9/airflow-core/tests/unit/utils/test_file.py#L107'>airflow-core/tests/unit/utils/test_file.py:107:9:</a> PTH211 `os.symlink` should be replaced by `Path.symlink_to`
+ <a href='https://github.com/apache/airflow/blob/6d366c8051dbe2c988f47f293d309ea92785e7a9/airflow-core/tests/unit/utils/test_file.py#L167'>airflow-core/tests/unit/utils/test_file.py:167:9:</a> PTH211 `os.symlink` should be replaced by `Path.symlink_to`
</pre>

</p>
</details>
<details><summary><a href="https://github.com/zulip/zulip">zulip/zulip</a> (+3 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview --select ALL</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/zulip/zulip/blob/26595799c7c2d0a8f8bc7c15de5dcc813fff93c9/scripts/lib/puppet_cache.py#L48'>scripts/lib/puppet_cache.py:48:5:</a> PTH211 `os.symlink` should be replaced by `Path.symlink_to`
+ <a href='https://github.com/zulip/zulip/blob/26595799c7c2d0a8f8bc7c15de5dcc813fff93c9/scripts/lib/zulip_tools.py#L55'>scripts/lib/zulip_tools.py:55:13:</a> PTH211 `os.symlink` should be replaced by `Path.symlink_to`
+ <a href='https://github.com/zulip/zulip/blob/26595799c7c2d0a8f8bc7c15de5dcc813fff93c9/tools/lib/provision.py#L59'>tools/lib/provision.py:59:5:</a> PTH211 `os.symlink` should be replaced by `Path.symlink_to`
</pre>

</p>
</details>
<details><summary><a href="https://github.com/astropy/astropy">astropy/astropy</a> (+1 -0 violations, +0 -0 fixes)</summary>
<p>
<pre>ruff check --no-cache --exit-zero --ignore RUF9 --no-fix --output-format concise --preview</pre>
</p>
<p>

<pre>
+ <a href='https://github.com/astropy/astropy/blob/2dab001c19df0d3a1f3f187f7fe70141e2c5fa24/astropy/config/paths.py#L214'>astropy/config/paths.py:214:17:</a> PTH211 `os.symlink` should be replaced by `Path.symlink_to`
</pre>

</p>
</details>
<details><summary>Changes by rule (1 rules affected)</summary>
<p>

<p>| code | total | + violation | - violation | + fix | - fix |
| ---- | ------- | --------- | -------- | ----- | ---- |
| PTH211 | 10 | 10 | 0 | 0 | 0 |</p>
</p>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @MichaReiser on 2025-05-28 10:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @MichaReiser on 2025-05-28 10:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-05-28 10:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 18:45:31 UTC
    </footer>
</body>
</html>
