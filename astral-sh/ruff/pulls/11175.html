<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] fix class vs instance - astral-sh/ruff #11175</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] fix class vs instance</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ruff/pull/11175">#11175</a>
        opened by <a href="https://github.com/carljm">@carljm</a>
        on 2024-04-27 14:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Pull request opened by <a href="https://github.com/carljm">@carljm</a> on 2024-04-27 14:40</div>
            <div class="timeline-body"><h2>Summary</h2>
<p>Clarify the type of an exact class object vs the type of instances of that class.</p>
<h2>Test Plan</h2>
<p>cargo test</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @carljm on 2024-04-27 14:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @MichaReiser by @carljm on 2024-04-27 14:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @AlexWaygood by @carljm on 2024-04-27 14:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/red_knot/src/types.rs</code>:359 on 2024-04-27 14:43</div>
            <div class="timeline-body"><p>Previous proposed spellings for &quot;exactly the <code>str</code> class&quot; (and not a subclass) have included:</p>
<ul>
<li><code>Literal[str]</code>: https://mail.python.org/archives/list/typing-sig@python.org/message/FPQH5ZHFLHGB7PMWEUHTB4FOK5O6MN6Q/</li>
<li><code>TypeForm[str]</code>: https://mail.python.org/archives/list/typing-sig@python.org/message/O6AYFN7WN623W5EJ7LULSD4LBA2M3IOA/</li>
</ul>
<p>I'd be happy with either <code>Exact[str]</code> or <code>Literal[str]</code>. I weakly prefer <code>Literal[str]</code>, because <code>Literal</code> elsewhere already specifies &quot;exactly this value I'm specifying here, and no subtype or supertype of it&quot;; and it also means that we can reuse an existing symbol rather than having to add a new special form (even if it's an internal-only special form)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2024-04-27 14:43</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2024-04-27 14:47</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/src/types.rs</code>:359 on 2024-04-27 14:47</div>
            <div class="timeline-body"><p>I like <code>Literal[...]</code> for this, I'll switch to that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> approved on 2024-04-27 14:48</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/github-actions[bot]">@github-actions[bot]</a> on 2024-04-27 14:53</div>
            <div class="timeline-body"><!-- generated-comment ecosystem -->

<h2><code>ruff-ecosystem</code> results</h2>
<h3>Linter (stable)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
<h3>Linter (preview)</h3>
<p>✅ ecosystem check detected no linter changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a> reviewed on 2024-04-27 14:57</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on <code>crates/red_knot/src/types.rs</code>:24 on 2024-04-27 14:57</div>
            <div class="timeline-body"><p>This isn't really related to your PR, but I'm kinda leery of thinking of this as a &quot;type&quot;, FWIW (I know pyright does this, but I don't like it much). Whether a symbol is bound or not in a given scope is obviously important for us to track, but it doesn't feel like it has much to do with the inferred <em>type</em> of the symbol to me</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a> reviewed on 2024-04-27 14:59</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/carljm">@carljm</a> on <code>crates/red_knot/src/types.rs</code>:24 on 2024-04-27 14:59</div>
            <div class="timeline-body"><p>I keep going back and forth on this, I see arguments both ways. Like you say, it's not related to this PR, and nothing is using this yet anyway, so there's not an urgency to decide here, but we should discuss.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @carljm on 2024-04-27 15:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @carljm on 2024-04-27 15:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2024-04-27 15:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 22:37:43 UTC
    </footer>
</body>
</html>
