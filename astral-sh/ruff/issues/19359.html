<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `from __future__ import annotations` in more rules - astral-sh/ruff #19359</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>from __future__ import annotations</code> in more rules</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/19359">#19359</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-07-15 15:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a></div>
            <div class="timeline-body"><p>https://github.com/astral-sh/ruff/pull/19100 added support for importing future annotations for TC001, TC002, TC003, UP037, and RUF013 as a proof of concept, but other rules could also be affected. In particular,</p>
<ul>
<li><a href="https://docs.astral.sh/ruff/rules/non-pep585-annotation/#non-pep585-annotation-up006">non-pep585-annotation (UP006)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/non-pep604-annotation-union/">non-pep604-annotation-union (UP007)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/non-pep604-annotation-optional/">non-pep604-annotation-optional (UP045)</a></li>
</ul>
<p>all currently rely on <a href="https://docs.astral.sh/ruff/rules/future-rewritable-type-annotation/">future-rewritable-type-annotation (FA100)</a> for similar behavior,  but they could just add the import themselves. <strong>This would likely mean deprecating FA100 eventually</strong>.</p>
<p>Similarly, <a href="https://docs.astral.sh/ruff/rules/runtime-import-in-type-checking-block/#runtime-import-in-type-checking-block-tc004">runtime-import-in-type-checking-block (TC004)</a> uses much of the same infrastructure as TC001-003. Adding a future import could be another option instead of <code>Action::Quote</code> in its implementation (the whole <code>Action</code> enum can likely be replaced by the new <code>TypingReference</code> enum).</p>
<p><a href="https://docs.astral.sh/ruff/rules/runtime-string-union/#runtime-string-union-tc010">runtime-string-union (TC010)</a> could also offer a fix by unquoting the flagged annotation and adding the future import.</p>
<h2>Status</h2>
<ul>
<li>[ ] UP006</li>
<li>[ ] UP007</li>
<li>[ ] UP045</li>
<li>[ ] TC004</li>
<li>[ ] TC010</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-07-15 15:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">tracking</span> added by @ntBre on 2025-07-15 15:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:04 UTC
    </footer>
</body>
</html>
