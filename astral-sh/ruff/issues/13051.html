<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`UP038` documentation outdated wrt. fix safety - astral-sh/ruff #13051</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>UP038</code> documentation outdated wrt. fix safety</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13051">#13051</a>
        opened by <a href="https://github.com/VeckoTheGecko">@VeckoTheGecko</a>
        on 2024-08-22 09:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/VeckoTheGecko">@VeckoTheGecko</a> on 2024-08-22 09:44</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p><a href="https://docs.astral.sh/ruff/rules/non-pep604-isinstance/">Docs mention &quot;Fix is always available.&quot;</a> but it is flagged as unsafe in the code</p>
<pre><code>ruff --version
ruff 0.6.1
</code></pre>
<h3>Code</h3>
<p>with <code>isinstance(2, (int,float))</code> I get</p>
<pre><code>test.py:1:1: UP038 Use `X | Y` in `isinstance` call instead of `(X, Y)`
  |
1 | isinstance(2, (int, float))
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^ UP038
  |
  = help: Convert to `X | Y`

Found 1 error.
No fixes available (1 hidden fix can be enabled with the `--unsafe-fixes` option).
</code></pre>
<p>Related to #2923</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-22 10:39</div>
            <div class="timeline-body"><p>Thanks for opening this issue. I can see how this is confusing. I was actually just about to change the rule metadata but then noticed that, maybe I shouldn't.</p>
<p>The documentation's fix availability doesn't consider the fix's safety today, which makes sense because the fix is always available when using <code>--unsafe-fixes</code>. But I can see how this isn't very clear, especially with the CLI message that explicitly states that the fix is unavailable.</p>
<p>@zanieb what's your take on fix availability and fix safety?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/VeckoTheGecko">@VeckoTheGecko</a> on 2024-08-22 15:05</div>
            <div class="timeline-body"><p>I see, so availability != safety (where I assumed it did). If safety was also mentioned in the doc that would have cleared it up (e.g., Fix is always available but not always safe)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @MichaReiser on 2024-08-22 15:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-23 05:24</div>
            <div class="timeline-body"><p>Yeah, I think it might be useful to add some reference to fix safety in the rule header. It might also be useful to either provide a different icon or a different color to the fix icon in the rules table (https://docs.astral.sh/ruff/rules/#legend).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/VeckoTheGecko">@VeckoTheGecko</a> on 2025-05-07 08:36</div>
            <div class="timeline-body"><p>The deprecation of this rule in #16681 means this can be closed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @VeckoTheGecko on 2025-05-07 08:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/VeckoTheGecko">@VeckoTheGecko</a> on 2025-05-07 08:39</div>
            <div class="timeline-body"><p>OH. I just realised that the title wasn't accurate anymore after the discussion, so maybe this was closed pre-maturely. @dhruvmanila is your comment https://github.com/astral-sh/ruff/issues/13051#issuecomment-2306315853 still relevant here do you think? And if so, would you mind re-opening (I don't have the perms) and updating the title?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @ntBre on 2025-05-07 14:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:54 UTC
    </footer>
</body>
</html>
