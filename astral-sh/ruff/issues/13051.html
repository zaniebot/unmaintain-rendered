<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`UP038` documentation outdated wrt. fix safety - astral-sh/ruff #13051</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>UP038</code> documentation outdated wrt. fix safety</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13051">#13051</a>
        opened by <a href="https://github.com/VeckoTheGecko">@VeckoTheGecko</a>
        on 2024-08-22 09:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/VeckoTheGecko">@VeckoTheGecko</a></div>
            <div class="timeline-body">

<p><a href="https://docs.astral.sh/ruff/rules/non-pep604-isinstance/">Docs mention &quot;Fix is always available.&quot;</a> but it is flagged as unsafe in the code</p>
<pre><code>ruff --version
ruff 0.6.1
</code></pre>
Code
<p>with <code>isinstance(2, (int,float))</code> I get</p>
<pre><code>test.py:1:1: UP038 Use `X | Y` in `isinstance` call instead of `(X, Y)`
  |
1 | isinstance(2, (int, float))
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^ UP038
  |
  = help: Convert to `X | Y`

Found 1 error.
No fixes available (1 hidden fix can be enabled with the `--unsafe-fixes` option).
</code></pre>
<p>Related to #2923</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-22 10:39</div>
            <div class="timeline-body"><p>Thanks for opening this issue. I can see how this is confusing. I was actually just about to change the rule metadata but then noticed that, maybe I shouldn&#x27;t.</p>
<p>The documentation&#x27;s fix availability doesn&#x27;t consider the fix&#x27;s safety today, which makes sense because the fix is always available when using <code>--unsafe-fixes</code>. But I can see how this isn&#x27;t very clear, especially with the CLI message that explicitly states that the fix is unavailable.</p>
<p>@zanieb what&#x27;s your take on fix availability and fix safety?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/VeckoTheGecko">@VeckoTheGecko</a> on 2024-08-22 15:05</div>
            <div class="timeline-body"><p>I see, so availability != safety (where I assumed it did). If safety was also mentioned in the doc that would have cleared it up (e.g., Fix is always available but not always safe)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-22 15:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-23 05:24</div>
            <div class="timeline-body"><p>Yeah, I think it might be useful to add some reference to fix safety in the rule header. It might also be useful to either provide a different icon or a different color to the fix icon in the rules table (https://docs.astral.sh/ruff/rules/#legend).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/VeckoTheGecko">@VeckoTheGecko</a> on 2025-05-07 08:36</div>
            <div class="timeline-body"><p>The deprecation of this rule in #16681 means this can be closed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/VeckoTheGecko">@VeckoTheGecko</a> on 2025-05-07 08:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/VeckoTheGecko">@VeckoTheGecko</a> on 2025-05-07 08:39</div>
            <div class="timeline-body"><p>OH. I just realised that the title wasn&#x27;t accurate anymore after the discussion, so maybe this was closed pre-maturely. @dhruvmanila is your comment <a href="https://github.com/astral-sh/ruff/issues/13051">astral-sh/ruff#13051</a>#issuecomment-2306315853 still relevant here do you think? And if so, would you mind re-opening (I don&#x27;t have the perms) and updating the title?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by <a href="https://github.com/ntBre">@ntBre</a> on 2025-05-07 14:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:57 UTC
    </footer>
</body>
</html>
