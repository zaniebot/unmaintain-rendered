<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ignore `no-explicit-stacklevel`/B028 if `skip_file_prefixes` is used - astral-sh/ruff #18011</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ignore <code>no-explicit-stacklevel</code>/B028 if <code>skip_file_prefixes</code> is used</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18011">#18011</a>
        opened by <a href="https://github.com/apple1417">@apple1417</a>
        on 2025-05-11 00:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/apple1417">@apple1417</a> on 2025-05-11 00:53</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Setting <code>skip_file_prefixes</code> serves the same purpose as <code>stacklevel</code>, making sure the warning fires in a more informative place. It also actually implicitly sets stack level to at least 2.</p>
<blockquote>
<p>When prefixes are supplied, stacklevel is implicitly overridden to be <code>max(2, stacklevel)</code>.</p>
</blockquote>
<p>This change was already made upstream https://github.com/PyCQA/flake8-bugbear/issues/497</p>
<p>Sample code:</p>
<pre><code class="language-py">import os
import warnings

warnings.warn(&quot;test&quot;, skip_file_prefixes=(os.path.dirname(__file__),))
</code></pre>
<ul>
<li>No explicit <code>stacklevel</code> keyword argument found (B028) [Ln 4, Col 1]</li>
</ul>
<p>https://play.ruff.rs/f3bb6bb2-4d66-4eea-b86e-fa1c54c98f6b</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @dylwil3 on 2025-05-11 20:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @dylwil3 on 2025-05-11 20:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dylwil3 on 2025-05-12 22:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dylwil3 on 2025-05-12 22:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:37:26 UTC
    </footer>
</body>
</html>
