<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ruff config custom filename - astral-sh/ruff #11344</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>ruff config custom filename</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/11344">#11344</a>
        opened by <a href="https://github.com/padrepitufo">@padrepitufo</a>
        on 2024-05-08 19:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/padrepitufo">@padrepitufo</a> on 2024-05-08 19:37</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>When using the <code>--config</code> option in <code>.pre-commit-config.yaml</code> like so:</p>
<pre><code>  - repo: https://github.com/astral-sh/ruff-pre-commit
    rev: v0.4.3
    hooks:
      - id: ruff
        name: pycln api
        files: ^api/
        args: [&quot;--config=./pyproject.ruff.toml&quot;]
</code></pre>
<p>or when running the command locally with:</p>
<pre><code>ruff --config pyproject.ruff.toml
</code></pre>
<p>and supplying a pyproject formatted file with a name other than <code>pyproject.toml</code> (as shown above), ruff will <em>not</em> recognize the file as a pyproject formatted file (it will assume it is a malformed <code>.ruff.toml</code> file) and give errors like so:</p>
<pre><code>  Cause: TOML parse error at line 1, column 1
  |
1 | [tool.ruff]
  | ^
unknown field `tool`
</code></pre>
<h3>Use Case</h3>
<p>Why oh why am I splitting up my pyproject.toml files? The team I'm working with generally does this when the section gets long within <code>pyproject.toml</code>.   While it is nice to keep all the configurations in one file, it is also nice to keep all configurations in the same format and that is what I'm aiming for.</p>
<p>Is this something that could be supported by the ruff community?</p>
<h3>Context</h3>
<p>command: <code>ruff --config pyproject.ruff.toml</code>
ruff: v0.4.3
pre-commit: 3.7.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-08 19:40</div>
            <div class="timeline-body"><p>Is this conformant to the <code>pyproject.toml</code> specification? (I think probably not?) Why not just use the <code>ruff.toml</code> syntax?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/padrepitufo">@padrepitufo</a> on 2024-05-08 19:52</div>
            <div class="timeline-body"><p>@zanieb its a great question - I've been looking to see if there is somewhere in the spec that specifies that the name must be <code>pyproject.toml</code> or that it is just convention.  The pattern in use does work with <a href="https://ichard26-testblackdocs.readthedocs.io/en/refactor_docs/pyproject_toml.html#where-black-looks-for-the-file">other tools</a>; however, it's possible that it only <em>happens</em> to work because they aren't enforcing the aforementioned potentially existing spec.</p>
<p>The main reason for not adopting <code>ruff.toml</code> syntax is to keep these config files in the same format -- pyproject.toml format.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/padrepitufo">@padrepitufo</a> on 2024-05-08 20:15</div>
            <div class="timeline-body"><p>the closest I'm finding is where the name is required <a href="https://peps.python.org/pep-0518/#file-format">when declaring <code>build system dependencies</code></a>.  Does that mean it is not required in other cases?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-08 21:18</div>
            <div class="timeline-body"><p>I'm not strongly opposed to looking for a <code>[tool.ruff]</code> top-level section in a <code>ruff.toml</code> but I don't know if this case is particularly motivating â€” it adds complexity for other users and the implementation. We support the same configuration, it's just a matter of being present in the top-level or a nested section.</p>
<p>The name is defined in <a href="https://peps.python.org/pep-0518/#file-format">PEP 518</a>, but there's not much else about it afaik.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-10 13:38</div>
            <div class="timeline-body"><p>Yeah, <code>pyproject.toml</code> is special and I don't think we should try to parse other TOML files as if they are <code>pyproject.toml</code>. It's helpful in this specific case, but it would make it harder to give good error messages and break other assumptions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-10 13:38</div>
            <div class="timeline-body"><p>Going to close for now -- I suggest using <code>ruff.toml</code> here or naming the file <code>pyproject.toml</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-10 13:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:12 UTC
    </footer>
</body>
</html>
