<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Got F811 when indirectly importing overload - astral-sh/ruff #19632</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Got F811 when indirectly importing overload</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/19632">#19632</a>
        opened by <a href="https://github.com/rj-xu">@rj-xu</a>
        on 2025-07-30 09:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/rj-xu">@rj-xu</a> on 2025-07-30 09:22</div>
            <div class="timeline-body"><h3>Summary</h3>
<pre><code class="language-python">from std import overload


@overload
def func(a: str, b: int) -&gt; int: ...
@overload
def func(a: int, b: str) -&gt; int: ...
def func(a: int | str, b: int | str) -&gt; int:
    return 0

</code></pre>
<pre><code class="language-toml">typing-modules = [&quot;std&quot;]
</code></pre>
<p>#6969
In version 0.12.5, <code>F811 Redefinition</code> still occurs, even though <code>typing-modules</code> have already been set up.
This error will appear after v0.3.0.</p>
<pre><code class="language-shell">ruff --version
ruff 0.3.0 (b53118ed0 2024-02-29)
ruff check .\src\temp.py
src\temp.py:1:1: INP001 File `src\temp.py` is part of an implicit namespace package. Add an `__init__.py`.
src\temp.py:8:10: ARG001 Unused function argument: `a`
src\temp.py:8:24: ARG001 Unused function argument: `b`
Found 3 errors.
</code></pre>
<pre><code class="language-shell">ruff --version
ruff 0.3.1 (b9264a5a1 2024-03-06)
ruff check .\src\temp.py
src\temp.py:1:1: INP001 File `src\temp.py` is part of an implicit namespace package. Add an `__init__.py`.
src\temp.py:5:10: ARG001 Unused function argument: `a`
src\temp.py:5:18: ARG001 Unused function argument: `b`
src\temp.py:7:5: F811 Redefinition of unused `func` from line 5
src\temp.py:7:10: ARG001 Unused function argument: `a`
src\temp.py:7:18: ARG001 Unused function argument: `b`
src\temp.py:8:5: F811 Redefinition of unused `func` from line 7
src\temp.py:8:10: ARG001 Unused function argument: `a`
src\temp.py:8:24: ARG001 Unused function argument: `b`
Found 9 errors.
</code></pre>
<pre><code class="language-shell">ruff --version
ruff 0.12.5 (d13228ab8 2025-07-24)
ruff check .\src\temp.py
src\temp.py:7:5: F811 Redefinition of unused `func` from line 5
  |
5 | def func(a: str, b: int) -&gt; int: ...
6 | @overload
7 | def func(a: int, b: str) -&gt; int: ...
  |     ^^^^ F811
8 | def func(a: int | str, b: int | str) -&gt; int:
9 |     return 0
  |
  = help: Remove definition: `func`

src\temp.py:8:5: F811 Redefinition of unused `func` from line 7
  |
6 | @overload
7 | def func(a: int, b: str) -&gt; int: ...
8 | def func(a: int | str, b: int | str) -&gt; int:
  |     ^^^^ F811
9 |     return 0
  |
  = help: Remove definition: `func`

src\temp.py:8:10: ARG001 Unused function argument: `a`
  |
6 | @overload
7 | def func(a: int, b: str) -&gt; int: ...
8 | def func(a: int | str, b: int | str) -&gt; int:
  |          ^ ARG001
9 |     return 0
  |

src\temp.py:8:24: ARG001 Unused function argument: `b`
  |
6 | @overload
7 | def func(a: int, b: str) -&gt; int: ...
8 | def func(a: int | str, b: int | str) -&gt; int:
  |                        ^ ARG001
9 |     return 0
  |

Found 4 errors.
</code></pre>
<h3>Version</h3>
<p>ruff 0.12.5 (d13228ab8 2025-07-24)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-30 13:00</div>
            <div class="timeline-body"><p>Thanks for opening the issue! I can reproduce this in the <a href="https://play.ruff.rs/10fc6710-1db3-431d-90d2-eaec9d01140c">playground</a>. I can reproduce it for the code in #6969 too, so maybe there has been a regression since then, just like you said. This command:</p>
<pre><code class="language-shell">uvx ruff@0.3.0 check --no-cache --select F811 --config 'lint.typing-modules=[&quot;std&quot;]'
</code></pre>
<p>gives no diagnostics, but 0.4.0 and 0.12.7 both reproduce your output above. I'm starting to bisect now.</p>
<p>Edit: Bisected to https://github.com/astral-sh/ruff/pull/10210</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-07-30 13:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-07-30 13:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rj-xu">@rj-xu</a> on 2025-08-01 09:00</div>
            <div class="timeline-body"><p><code>Final</code> doesn't work either.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-01 17:08</div>
            <div class="timeline-body"><p>I think this is actually somewhat related to https://github.com/astral-sh/ruff/issues/19664. <code>QualifiedName::from_dotted_name</code> is involved again here:</p>
<p>https://github.com/astral-sh/ruff/blob/dbd067c8698837044f505e7b12e1f733dedec46d/crates/ruff_python_semantic/src/model.rs#L210-L215</p>
<p>In fact, if you change the input to this (import from <code>std.std</code>):</p>
<pre><code>from std.std import overload


@overload
def func(a: str, b: int) -&gt; int: ...
@overload
def func(a: int, b: str) -&gt; int: ...
def func(a: int | str, b: int | str) -&gt; int:
    return 0
</code></pre>
<p>and pass <code>lint.typing-modules=[&quot;std.std&quot;]</code>, it works as expected (<a href="https://play.ruff.rs/395a1762-a31e-4881-98f9-118fd7e451ea">playground</a>).</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:18 UTC
    </footer>
</body>
</html>
