<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`flake8-boolean-trap.extend-allowed-calls` don't resolve class types - astral-sh/ruff #11264</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`flake8-boolean-trap.extend-allowed-calls` don't resolve class types</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11264">#11264</a>
        opened by <a href="https://github.com/clara-bordes">@clara-bordes</a>
        on 2024-05-03 15:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/clara-bordes">@clara-bordes</a> on 2024-05-03 15:32</div>
            <div class="timeline-body"><p>I am actually working on fixing the rule <strong>boolean-positional-value-in-call (FBT003)</strong> on a code repository.</p>
<p>I need to allow this rule for some functions. For that, at the end of my config file &quot;pyproject.toml&quot;, I have added:</p>
<pre><code>[lint.flake8-boolean-trap]
extend-allowed-calls = [&quot;LibName.className.functionName&quot;]
</code></pre>
<p>My issue here is that in my code repository, we call the function &quot;LibName.className.functionName&quot; through a variable, as following:</p>
<pre><code>from LibName import ClassName

with ClassName(&quot;[Description]&quot;) as variable:
       variable.functionName(...)
</code></pre>
<p>On such code, the rule FBT003 is <strong>still applied</strong> in spite of the &quot;extend-allowed-calls&quot; option.</p>
<p>Is the &quot;extend-allowed-calls&quot; option only works for direct function calls?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-03 19:15</div>
            <div class="timeline-body"><p>Yes, that setting doesn't support resolution to the base type. It won't trace <code>variable</code> back to <code>LibName.ClassName</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by @charliermarsh on 2024-05-04 13:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from ""flake8-boolean-trap.extend-allowed-calls" option does not work in my case" to "`flake8-boolean-trap.extend-allowed-calls` don't resolve class types" by @charliermarsh on 2024-05-04 13:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-04 13:41</div>
            <div class="timeline-body"><p>I'd suggest just disabling the rule, but we'll probably support this at some point in the future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/flying-sheep">@flying-sheep</a> on 2024-08-01 13:52</div>
            <div class="timeline-body"><p>would be nice to support wildcards in the meantime. E.g. I think all methods called like <code>.fill(True)</code> are probably fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andrei-korshikov">@andrei-korshikov</a> on 2025-03-19 05:28</div>
            <div class="timeline-body"><blockquote>
<p>would be nice to support wildcards in the meantime</p>
</blockquote>
<p>+1 on wildcards (regexes?). My use case:</p>
<pre><code class="language-python">import pycurl

curl = pycurl.Curl()
curl.setopt(pycurl.VERBOSE, True)
</code></pre>
<p><a href="http://pycurl.io/docs/latest/curlobject.html#pycurl.Curl.setopt">pycurl.Curl.setopt()</a> is positional-only (takes no keyword arguments). It should be part of #3247 when type resolution will be available.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @MichaReiser on 2025-03-19 07:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danra">@danra</a> on 2025-05-21 21:14</div>
            <div class="timeline-body"><p>Ran into this as well trying to whitelist the canonical <code>torch.Tensor.requires_grad_</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/18247.html">astral-sh/ruff#18247</a> on 2025-05-21 21:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:12 UTC
    </footer>
</body>
</html>
