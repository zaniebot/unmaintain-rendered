```yaml
number: 20891
title: "[Infinite loop] F401, I002, and PYI025"
type: issue
state: open
author: dscorbett
labels:
  - bug
  - fixes
assignees: []
created_at: 2025-10-15T13:50:13Z
updated_at: 2025-10-28T16:59:22Z
url: https://github.com/astral-sh/ruff/issues/20891
synced_at: 2026-01-10T01:56:57Z
```

# [Infinite loop] F401, I002, and PYI025

---

_Issue opened by @dscorbett on 2025-10-15 13:50_

### Summary

Ruff fails to converge when [`unused-import` (F401)](https://docs.astral.sh/ruff/rules/unused-import/), [`missing-required-import` (I002)](https://docs.astral.sh/ruff/rules/missing-required-import/), and [`unaliased-collections-abc-set-import` (PYI025)](https://docs.astral.sh/ruff/rules/unaliased-collections-abc-set-import/) are selected and `from collections.abc import Set` is a required import.
```console
$ echo 1 | ruff --isolated check --select F401,I002,PYI025 --config 'lint.isort.required-imports = ["from collections.abc import Set"]' - --unsafe-fixes --diff

error: Failed to converge after 100 iterations.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BInfinite%20loop%5D

...quoting the contents of `-`, the rule codes PYI025, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

@@ -1 +1,2 @@
+from collections.abc import Set
 1

Would fix 100 errors.
```

### Version

ruff 0.14.0 (beea8cdfe 2025-10-07)

---

_Label `bug` added by @MichaReiser on 2025-10-16 08:06_

---

_Label `fixes` added by @MichaReiser on 2025-10-16 08:06_

---

_Comment by @TaKO8Ki on 2025-10-28 14:59_

I will take this one.

---

_Assigned to @TaKO8Ki by @ntBre on 2025-10-28 16:59_

---

_Referenced in [astral-sh/ruff#21115](../../astral-sh/ruff/pulls/21115.md) on 2025-10-28 22:11_

---
