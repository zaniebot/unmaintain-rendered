<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLE1300 has bad support for `str.format` - astral-sh/ruff #18921</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>PLE1300 has bad support for `str.format`</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/18921">#18921</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-06-24 18:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dscorbett">@dscorbett</a> on 2025-06-24 18:44</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><a href="https://pylint.readthedocs.io/en/stable/user_guide/messages/error/bad-format-character.html">Pylint’s <code>bad-format-character</code> (E1300)</a> supports <code>printf</code>-style formatting. Ruff’s <a href="https://docs.astral.sh/ruff/rules/bad-string-format-character/"><code>bad-string-format-character</code> (PLE1300)</a> extends it to support <code>str.format</code>, but that extension has false positives and false negatives because it fundamentally misunderstands how format specs work. It might be better to delete the broken extension and focus the rule on <code>printf</code>-style formatting.</p>
<p><a href="https://play.ruff.rs/36dc7dc1-43a9-458b-a12a-d1007ead3c3c">False positives</a>:</p>
<pre><code class="language-console">$ cat &gt;ple1300_1.py &lt;&lt;'# EOF'
from datetime import date
import numpy as np
print(&quot;{:zf}&quot;.format(-0.0))
print(&quot;{:[%Y %m %d]}&quot;.format(date(2007, 12, 5)))
print(&quot;{:ascii}&quot;.format(np.polynomial.Polynomial([1, 2, 3])))
# EOF

$ python3.11 ple1300_1.py
0.000000
[2007 12 05]
1.0 + 2.0 x**1 + 3.0 x**2

$ ruff --isolated check ple1300_1.py --select PLE1300
ple1300_1.py:3:7: PLE1300 Unsupported format character 'f'
  |
1 | from datetime import date
2 | import numpy as np
3 | print(&quot;{:zf}&quot;.format(-0.0))
  |       ^^^^^^^^^^^^^^^^^^^^ PLE1300
4 | print(&quot;{:[%Y %m %d]}&quot;.format(date(2007, 12, 5)))
5 | print(&quot;{:ascii}&quot;.format(np.polynomial.Polynomial([1, 2, 3])))
  |

ple1300_1.py:4:7: PLE1300 Unsupported format character ']'
  |
2 | import numpy as np
3 | print(&quot;{:zf}&quot;.format(-0.0))
4 | print(&quot;{:[%Y %m %d]}&quot;.format(date(2007, 12, 5)))
  |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLE1300
5 | print(&quot;{:ascii}&quot;.format(np.polynomial.Polynomial([1, 2, 3])))
  |

ple1300_1.py:5:7: PLE1300 Unsupported format character 'i'
  |
3 | print(&quot;{:zf}&quot;.format(-0.0))
4 | print(&quot;{:[%Y %m %d]}&quot;.format(date(2007, 12, 5)))
5 | print(&quot;{:ascii}&quot;.format(np.polynomial.Polynomial([1, 2, 3])))
  |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLE1300
  |

Found 3 errors.
</code></pre>
<p><a href="https://play.ruff.rs/0754d26f-e314-4960-a327-5326330d3fa5">False negative</a>:</p>
<pre><code class="language-console">$ cat &gt;ple1300_2.py &lt;&lt;'# EOF'
print(&quot;{:f[arbitrary text]}&quot;.format(1.0))
# EOF

$ python ple1300_2.py 2&gt;&amp;1 | tail -n 1
ValueError: Invalid format specifier 'f[arbitrary text]' for object of type 'float'

$ ruff --isolated check ple1300_2.py --select PLE1300
All checks passed!
</code></pre>
<h3>Version</h3>
<p>ruff 0.12.0 (87f0feb21 2025-06-17)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-06-24 18:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-06-24 18:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @ntBre on 2025-06-24 18:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:55 UTC
    </footer>
</body>
</html>
