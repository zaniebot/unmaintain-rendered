<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instructions to enable auto formatting on Zed needs updating - astral-sh/ruff #13081</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Instructions to enable auto formatting on Zed needs updating</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13081">#13081</a>
        opened by <a href="https://github.com/victorneo">@victorneo</a>
        on 2024-08-23 15:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/victorneo">@victorneo</a></div>
            <div class="timeline-body"><p>The existing setup instructions for enabling auto formatting with Ruff on Zed does not seem to work as of Zed version 0.149.5.</p>
<p>Current docs:</p>
<pre><code>{
  &quot;languages&quot;: {
    &quot;Python&quot;: {
      &quot;format_on_save&quot;: &quot;on&quot;,
      &quot;formatter&quot;: [
        {
          &quot;code_actions&quot;: {
            &quot;source.organizeImports.ruff&quot;: true,
            &quot;source.fixAll.ruff&quot;: true
          }
        },
        {
          &quot;language_server&quot;: {
            &quot;name&quot;: &quot;ruff&quot;
          }
        }
      ]
    }
  }
}
</code></pre>
<p>The above configuration no longer work, and after some tinkering with Zed&#x27;s configuration options, this updated config now works for me by moving <code>code_actions</code> one level higher and changing it to <code>code_actions_on_format</code>:</p>
<pre><code>{
  &quot;languages&quot;: {
    &quot;Python&quot;: {
      &quot;format_on_save&quot;: &quot;on&quot;,
      &quot;language_servers&quot;: [&quot;ruff&quot;],
      &quot;formatter&quot;: {
        &quot;language_server&quot;: {
          &quot;name&quot;: &quot;ruff&quot;
        }
      },
      &quot;code_actions_on_format&quot;: {
        &quot;source.fixAll.ruff&quot;: true,
        &quot;source.organizeImports.ruff&quot;: true
      }
    }
  }
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-23 15:59</div>
            <div class="timeline-body"><p>Oh, I see the problem. Nothing in Zed has changed but the way I structured the docs is a bit confusing. The first code block includes the <code>language_servers</code> key but the following code blocks doesn&#x27;t. I think I did this because I wanted the latter code blocks to just focus on the formatting side of the things. I see how this could be confusing. Do you want to update them? They&#x27;re at https://github.com/astral-sh/ruff/blob/2d5fe9a6d3c837333e23b0a9b9d235bc338d91f6/docs/editors/setup.md#zed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-23 15:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-23 15:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-23 16:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-23 16:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:57 UTC
    </footer>
</body>
</html>
