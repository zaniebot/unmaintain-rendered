```yaml
number: 20092
title: Rule to Restrict Imports for Specific Modules by Other Specific Modules
type: issue
state: open
author: Ykrej
labels:
  - rule
  - type-inference
assignees: []
created_at: 2025-08-26T01:28:07Z
updated_at: 2025-08-26T14:31:35Z
url: https://github.com/astral-sh/ruff/issues/20092
synced_at: 2026-01-10T01:56:57Z
```

# Rule to Restrict Imports for Specific Modules by Other Specific Modules

---

_Issue opened by @Ykrej on 2025-08-26 01:28_

### Summary

Sometimes my editor's autocomplete will import items from test code even though the original definition is in the application code. I would like a rule that would flag these sort of imports. Almost like marking specific modules(like tests) as private.

Are there any existing rules that would cover this situation?

## Example
```python
# src/my_app/utils.py
def foo():
    ...
```
```python
# src/my_app/__main__.py
from tests.test_utils import foo  # Lint rule would flag this
...
```
```python
# tests/test_utils.py
from my_app.utils import foo
...
```




---

_Comment by @ntBre on 2025-08-26 14:31_

This sounds familiar but I couldn't find the related issue. This makes some sense to me, requiring a specific path to a given import, but I don't think we could really implement this at the moment since Ruff only analyzes single files at a time. It might be a better fit once we have access to ty's module resolver.

---

_Label `rule` added by @ntBre on 2025-08-26 14:31_

---

_Label `type-inference` added by @ntBre on 2025-08-26 14:31_

---

_Referenced in [astral-sh/ruff#20131](../../astral-sh/ruff/issues/20131.md) on 2025-08-28 13:08_

---
