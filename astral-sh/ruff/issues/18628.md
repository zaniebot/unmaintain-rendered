```yaml
number: 18628
title: "RUF056 ascribes meaning to `default` and ignores extra arguments"
type: issue
state: closed
author: dscorbett
labels:
  - bug
  - fixes
assignees: []
created_at: 2025-06-11T14:38:00Z
updated_at: 2025-06-13T23:07:03Z
url: https://github.com/astral-sh/ruff/issues/18628
synced_at: 2026-01-10T01:56:56Z
```

# RUF056 ascribes meaning to `default` and ignores extra arguments

---

_Issue opened by @dscorbett on 2025-06-11 14:38_

### Summary

The fix for [`falsy-dict-get-fallback` (RUF056)](https://docs.astral.sh/ruff/rules/falsy-dict-get-fallback/) can change behavior when there are extra arguments.

Extra positional argument:
```console
$ cat >ruf056_1.py <<'# EOF'
d = {}
print(not d.get("key", False, "?!"))
# EOF

$ python ruf056_1.py 2>&1 | tail -n 1
TypeError: get expected at most 2 arguments, got 3

$ ruff --isolated check ruf056_1.py --select RUF056 --preview --fix
Found 1 error (1 fixed, 0 remaining).

$ python ruf056_1.py
False
```

`default` keyword argument; the relevant parameter is positional-only and `default` has no meaning to this function:
```console
$ cat >ruf056_2.py <<'# EOF'
d = {}
print(not d.get("key", default=False))
# EOF

$ python ruf056_2.py 2>&1 | tail -n 1
TypeError: dict.get() takes no keyword arguments

$ ruff --isolated check ruf056_2.py --select RUF056 --preview --fix
Found 1 error (1 fixed, 0 remaining).

$ python ruf056_2.py
True
```

Keyword argument other than `default`; the fix doesn’t change behavior in this case, so it’s not a problem, but I mention it for completeness:
```console
$ cat >ruf056_3.py <<'# EOF'
d = {}
print(not d.get("key", False, foo=...))
# EOF

$ python ruf056_3.py 2>&1 | tail -n 1
TypeError: dict.get() takes no keyword arguments

$ ruff --isolated check ruf056_3.py --select RUF056 --preview --fix
Found 1 error (1 fixed, 0 remaining).

$ python ruf056_3.py 2>&1 | tail -n 1
TypeError: dict.get() takes no keyword arguments
```

### Version

ruff 0.11.13 (5faf72a4d 2025-06-05)

---

_Label `bug` added by @ntBre on 2025-06-11 15:18_

---

_Label `fixes` added by @ntBre on 2025-06-11 15:18_

---

_Assigned to @ntBre by @ntBre on 2025-06-11 15:18_

---

_Comment by @ntBre on 2025-06-11 16:37_

Interestingly, we have existing tests for both "known" and unknown keyword arguments, but we still offer a fix in those cases. It looks like the Python docs were updated in 3.12 to show the `/` in the argument list because [3.11](https://docs.python.org/3.11/library/stdtypes.html#dict.get) doesn't have it. But I tested Python versions back to 3.8 and none of them accept keyword arguments.

I'll just update the rule to check both the number and kind of arguments before offering a fix.

---

_Referenced in [astral-sh/ruff#18631](../../astral-sh/ruff/pulls/18631.md) on 2025-06-11 17:52_

---

_Referenced in [astral-sh/ruff#18427](../../astral-sh/ruff/pulls/18427.md) on 2025-06-12 16:00_

---

_Closed by @ntBre on 2025-06-13 23:07_

---
