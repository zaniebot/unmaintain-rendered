<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support multiple target versions - astral-sh/ruff #2519</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support multiple target versions</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/2519">#2519</a>
        opened by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a>
        on 2023-02-03 09:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on 2023-02-03 09:11</div>
            <div class="timeline-body"><ul>
<li>To implement #2039 we need to support multiple target versions.</li>
<li>We should use the minimum target version for pyupgrade.</li>
<li>For isort known standard library, we should check that the module is present for all target version</li>
<li>…</li>
</ul>
<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Support multiple target version" to "Support multiple target versions" by @JonathanPlasse on 2023-02-03 09:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-03 18:16</div>
            <div class="timeline-body"><p>What's the difference in practice between supporting a minimum version, and a range of versions?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2023-02-03 18:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on 2023-02-03 18:27</div>
            <div class="timeline-body"><p>For isort known standard library, you could have some modules that are removed for later versions.
If you use the minimum version, you would have a false negative for the later versions if you use a dropped module.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-05 23:56</div>
            <div class="timeline-body"><p>I guess I'm not sure <em>what</em> should happen if you specify that your minimum version is <code>3.7</code>, and you import <code>tomllib</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on 2023-02-12 14:48</div>
            <div class="timeline-body"><p>It should report this as an error as it is not available in the Python 3.7 standard library.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2857.html">astral-sh/ruff#2857</a> on 2023-02-13 14:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2039.html">astral-sh/ruff#2039</a> on 2023-02-24 21:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stinodego">@stinodego</a> on 2023-02-26 19:56</div>
            <div class="timeline-body"><p>I know that <code>black</code> is actually trying to get rid of target ranges and wants to switch to a single minimum target version.</p>
<p>I don't think supporting target ranges is worthwhile.</p>
<blockquote>
<ul>
<li>To implement <a href="https://github.com/charliermarsh/ruff/issues/2039">RFE: infer <code>target-version</code> from project metadata #2039</a> we need to support multiple target versions.</li>
</ul>
</blockquote>
<p>This is not true - you can infer a minimum target version from the <code>requires-python</code> specifier. That's how I initially implemented it for <code>black</code>, before I learned more about how their target versions work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-26 23:27</div>
            <div class="timeline-body"><p>Yeah I'd like to only support a minimum target version until convinced otherwise (i.e., until that's proven insufficient).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-13 23:09</div>
            <div class="timeline-body"><p>Closing for now as I'm okay with current behavior (only supporting minimums).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-03-13 23:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../pyro-ppl/numpyro/pulls/1700.html">pyro-ppl/numpyro#1700</a> on 2023-12-20 19:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:49 UTC
    </footer>
</body>
</html>
