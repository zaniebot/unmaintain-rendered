<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No LSP Completions on Neovim - astral-sh/ruff #18511</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>No LSP Completions on Neovim</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/18511">#18511</a>
        opened by <a href="https://github.com/sghng">@sghng</a>
        on 2025-06-06 19:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sghng">@sghng</a> on 2025-06-06 19:07</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Followed documentation to setup Ruff for Neovim, diagnostics/linting/formatting all works, but no context-aware completions are given. <code>LspInfo</code> shows server is attached correctly.</p>
<pre><code>	{ &quot;mason-org/mason.nvim&quot;, lazy = true, config = true },
	{
		&quot;mason-org/mason-lspconfig.nvim&quot;,
		dependencies = &quot;neovim/nvim-lspconfig&quot;,
		event = &quot;VeryLazy&quot;,
		config = function()
			require(&quot;mason-lspconfig&quot;).setup(
				---@type MasonLspconfigSettings
				{
					ensure_installed = {
						&quot;air&quot;, -- R LSP and Formatter
						&quot;cssls&quot;,
						&quot;html&quot;,
						&quot;jsonls&quot;,
						&quot;lemminx&quot;, -- xml
						&quot;lua_ls&quot;,
						&quot;marksman&quot;,
						&quot;ruff&quot;,
						&quot;tailwindcss&quot;,
						&quot;taplo&quot;, -- toml LSP
						&quot;ts_ls&quot;,
						&quot;unocss&quot;,
						&quot;vimls&quot;,
						&quot;vue_ls&quot;,
					},
				}
			)
}
</code></pre>
<p>I also tried config the server to run with <code>ruff server</code> command instead, still not working.</p>
<pre><code>- ruff (id: 1)
  - Version: 0.11.13
  - Root directory: ~/dev/adapta/backend
  - Command: { &quot;ruff&quot;, &quot;server&quot; }
  - Settings: {}
  - Attached buffers: 9
</code></pre>
<h3>Version</h3>
<p>ruff 0.11.12 (aee3af0f7 2025-05-29)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sghng">@sghng</a> on 2025-06-06 19:13</div>
            <div class="timeline-body"><p>Switching to <code>Pyrefly</code> worked just fine, so it's not caused by Neovim completion settings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-06 19:23</div>
            <div class="timeline-body"><p>Our pre-release <a href="https://github.com/astral-sh/ty/blob/main/docs/README.md#editor-integration">ty language server </a> offers some completions (and these are improving rapidly!), but the stable ruff language server <a href="https://docs.astral.sh/ruff/editors/#language-server-protocol">does not</a>:</p>
<blockquote>
<p>The server supports surfacing Ruff diagnostics, providing Code Actions to fix them, and formatting the code using Ruff's built-in formatter. Currently, the server is intended to be used alongside another Python Language Server in order to support features like navigation and autocompletion.</p>
</blockquote>
<p>so I believe this is working as intended.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @ntBre on 2025-06-06 19:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sghng">@sghng</a> on 2025-06-06 20:15</div>
            <div class="timeline-body"><blockquote>
<p>Our pre-release <a href="https://github.com/astral-sh/ty/blob/main/docs/README.md#editor-integration">ty language server </a> offers some completions (and these are improving rapidly!), but the stable ruff language server <a href="https://docs.astral.sh/ruff/editors/#language-server-protocol">does not</a>:</p>
<blockquote>
<p>The server supports surfacing Ruff diagnostics, providing Code Actions to fix them, and formatting the code using Ruff's built-in formatter. Currently, the server is intended to be used alongside another Python Language Server in order to support features like navigation and autocompletion.</p>
</blockquote>
<p>so I believe this is working as intended.</p>
</blockquote>
<p>Thanks for pointing that out! Clearly I overlook that statement in the documentation. It might be a good idea to highlight that in Ruff documentation, and also point users to <code>ty</code>. ~~Maybe also add <code>ty</code> to Mason registry.~~</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sghng on 2025-06-06 20:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
