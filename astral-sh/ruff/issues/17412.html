<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[syntax-errors] Remaining syntax errors raised by the compiler - astral-sh/ruff #17412</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[syntax-errors] Remaining syntax errors raised by the compiler</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/17412">#17412</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-04-15 18:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a></div>
            <div class="timeline-body">Summary
<p>A number of semantic or compile-time syntax errors have already been implemented
in #11934, but there are still many remaining ones. The purpose of this issue is
to track progress on this remainder. The initial source for most of these is
<a href="https://github.com/astral-sh/ruff/issues/7633#issuecomment-1740424031">this comment</a>, which reports fuzzer results comparing Python&#x27;s compiler and
ruff, but others may be included over time.</p>
<p>The next section lists the syntax errors that still need to be implemented, and
the sections after that include some more information on getting started with an
implementation.</p>
Syntax Errors
Errors mapping to current rules
<p>These might be the easiest to start with because the existing rules have working
implementations and corresponding tests. However, they could possibly require
new context methods (see below), which could complicate things.</p>
<ul>
<li>[x] <code>return</code> with value in async generator (B901)<ul>
<li>https://github.com/astral-sh/ruff/pull/21200</li>
<li>partial overlap with B901, which also applies to sync generators. This is
only a syntax error in the async case</li>
</ul>
</li>
<li>[x] no binding for nonlocal (PLE0117)<ul>
<li>https://github.com/astral-sh/ruff/pull/21032</li>
</ul>
</li>
<li>[x] <code>break</code> outside loop (F701)<ul>
<li>https://github.com/astral-sh/ruff/pull/20556</li>
<li>https://github.com/astral-sh/ruff/pull/20944</li>
</ul>
</li>
<li>[x] <code>continue</code> not properly in loop (F702)<ul>
<li>https://github.com/astral-sh/ruff/pull/20869</li>
<li>https://github.com/astral-sh/ruff/pull/20944</li>
</ul>
</li>
<li>[x] <code>yield from</code> in async function (PLE1700)<ul>
<li>https://github.com/astral-sh/ruff/pull/20051</li>
</ul>
</li>
<li>[x] future feature is not defined (F407)<ul>
<li>https://github.com/astral-sh/ruff/pull/20554</li>
</ul>
</li>
<li>[x] import <code>*</code> only allowed at module level (F406)<ul>
<li>https://github.com/astral-sh/ruff/pull/20166</li>
</ul>
</li>
<li>[x] multiple starred expressions in assignment (F622)<ul>
<li>https://github.com/astral-sh/ruff/pull/20243</li>
</ul>
</li>
</ul>
Errors mapping to current parse errors
<p>These are also straightforward and will be similar to #17131.</p>
<ul>
<li>duplicate keyword argument (<a href="https://github.com/astral-sh/ruff/pull/17804">astral-sh/ruff#17804</a>)<pre><code>def foo(x): ...

foo(x=1, x=2)  # SyntaxError: keyword argument repeated: x
</code></pre>
</li>
</ul>
New errors
<ul>
<li><p>[x] name is parameter and global (<a href="https://github.com/astral-sh/ruff/pull/20426">astral-sh/ruff#20426</a>)</p>
<pre><code>def f(a): global a
</code></pre>
</li>
<li><p>[ ] name is parameter and nonlocal</p>
<pre><code>def f(a): nonlocal a
</code></pre>
</li>
<li><p>[ ] annotated name can&#x27;t be global (<a href="https://github.com/astral-sh/ruff/pull/20868">astral-sh/ruff#20868</a>)</p>
<pre><code>x: int = 1

def f():
    global x
    x: str = &quot;foo&quot;  # SyntaxError: annotated name &#x27;x&#x27; can&#x27;t be global
</code></pre>
</li>
<li><p>[x] alternative patterns bind different names (<a href="https://github.com/astral-sh/ruff/pull/20682">astral-sh/ruff#20682</a>)</p>
<pre><code>match 42:
    case [x] | [y]: ...
</code></pre>
<p>This can probably be handled in the <code>MatchPatternVisitor</code> along with the other <code>match</code>-related errors.</p>
</li>
<li><p>[x] can&#x27;t use starred expression here (<a href="https://github.com/astral-sh/ruff/pull/17624">astral-sh/ruff#17624</a>)</p>
<pre><code>x = *value
</code></pre>
</li>
<li><p>[x] nonlocal declaration not allowed at module level (<a href="https://github.com/astral-sh/ruff/pull/17559">astral-sh/ruff#17559</a>)</p>
<pre><code>nonlocal x
</code></pre>
</li>
</ul>
Extensions to existing syntax errors
<ul>
<li>Assigning to and deleting attributes named <code>__debug__</code> is also a syntax error<pre><code>__debug__ = False  # Currently caught by ruff
x.__debug__ = False  # Not currently caught, but also a syntax error
</code></pre>
</li>
</ul>
Encoding issues
<p>These syntax errors are all related to #6791 and should only be implemented if
we decide to respect these alternate encodings in general.</p>
<p>These can also be a bit tricky to put into a file, so most of these have shell
code snippets for generating the input rather than Python code directly.</p>
<ul>
<li><p>ascii codec can&#x27;t decode byte <code>...</code> in position <code>...</code>: ordinal not in <code>range(128)</code></p>
<pre><code>printf &#x27;# -*- coding: ascii -*-\n\xc2&#x27; &gt; example.py
</code></pre>
</li>
<li><p>charmap codec can&#x27;t decode byte ...</p>
<pre><code>printf &#x27;# -*- coding: cp1252 -*-\n\x8d&#x27; &gt; example.py
</code></pre>
</li>
<li><p>utf7 codec can&#x27;t decode byte 0xc3</p>
<pre><code>printf &#x27;# -*- coding: utf-7 -*-\n\xc3&#x27; &gt; example.py
</code></pre>
<p>This one reports an <code>E902</code> error, but only if it&#x27;s enabled. Otherwise we only print a warning about invalid UTF-8.</p>
</li>
<li><p>encoding problem: <code>...</code> with BOM</p>
<pre><code>printf &#x27;\ufeff# -*- coding: ascii -*-&#x27; &gt; example.py
</code></pre>
<p>I think any encoding other than UTF-8 with a BOM (<code>\uFEFF</code>) will cause this issue.</p>
</li>
<li><p>invalid character</p>
</li>
<li><p>invalid non-printable character</p>
<ul>
<li>both this and <code>invalid character</code> mostly seem to happen with the
<code>iso-8859-1</code> encoding and a unicode character</li>
</ul>
</li>
<li><p>unknown encoding</p>
<pre><code># coding: not-a-real-encoding
</code></pre>
</li>
<li><p>source code string cannot contain null bytes</p>
<pre><code>printf &#x27;# \x00&#x27; &gt; example.py
</code></pre>
<p>This mostly seems like an issue in comments. This also isn&#x27;t exactly an encoding error, but it&#x27;s more closely related to these. It&#x27;s also raised by the CPython parser, not the compiler.</p>
</li>
</ul>
Implementation
<p>Issue #11934 contains links to each PR implementing a new semantic syntax error.
These can be used as examples of what a new implementation looks like, but this
section has a few more general notes.</p>
<p>All of the semantic syntax errors currently live in <a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/src/semantic_errors.rs"><code>semantic_errors.rs</code></a> and
correspond to a variant of the <a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/src/semantic_errors.rs#L891"><code>SemanticSyntaxErrorKind</code></a> enum. The
<a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/src/semantic_errors.rs#L19"><code>SemanticSyntaxChecker</code></a> is responsible for emitting these errors, but unlike
other AST visitors, it does not generally traverse the AST on its owns[^1]. Instead,
it relies on a parent visitor to call its <code>visit_stmt</code> and <code>visit_expr</code> methods
in the parent visitor&#x27;s <code>visit_stmt</code> or <code>visit_expr</code> methods.</p>
<p>The <a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/src/semantic_errors.rs#L19"><code>SemanticSyntaxChecker</code></a> also tracks very little of its own state. Instead,
it again defers to the parent visitor via the <a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/src/semantic_errors.rs#L1586C11-L1586C32"><code>SemanticSyntaxContext</code></a> trait.
Examples of methods on this trait include:</p>
<ul>
<li><code>python_version</code> -- returns the target Python version for linting</li>
<li><code>in_async_context</code> -- returns whether or not async code like <code>await</code> or <code>async for</code> loops are allowed in the current scope</li>
</ul>
<p>Typically the parent visitor, like the <a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_linter/src/checkers/ast/mod.rs#L182"><code>Checker</code></a> from the <code>ruff_linter</code> crate,
will implement <a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/src/semantic_errors.rs#L1586C11-L1586C32"><code>SemanticSyntaxContext</code></a> and pass itself to any
<a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/src/semantic_errors.rs#L19"><code>SemanticSyntaxChecker</code></a> method requiring a context.</p>
<p>Another important context method is <code>report_semantic_error</code>, which may require
special handling of new <a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/src/semantic_errors.rs#L891"><code>SemanticSyntaxErrorKind</code></a> variants. For example, some
syntax errors emitted by CPython overlap with existing ruff rules (e.g.
<a href="https://docs.astral.sh/ruff/rules/await-outside-async/"><code>await-outside-async</code>
(PLE1142)</a>). These need
to be transformed into normal ruff <a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_diagnostics/src/diagnostic.rs#L22"><code>Diagnostic</code></a>s instead of being reported
directly as syntax errors. This happens within the
<a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_linter/src/checkers/ast/mod.rs#L572"><code>Checker::report_semantic_error</code></a> method.</p>
Testing
<p>There are two main ways of testing new semantic errors. The first, and easier,
method is to write inline parser tests using <code>test_ok</code> and <code>test_err</code> comments,
for example:</p>
<p>https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/src/semantic_errors.rs#L80-L95</p>
<p>These are automatically extracted from the source code by the parser&#x27;s
<a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/tests/generate_inline_tests.rs#L24"><code>generate_inline_tests</code></a> function and then run like normal snapshot tests.
These work very well for simple errors that don&#x27;t require detailed information
from the <a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/src/semantic_errors.rs#L1586C11-L1586C32"><code>SemanticSyntaxContext</code></a>.</p>
<p>For errors that do require such contextual information tracked by the parent
visitor, a better alternative is to use integration tests, such as those found
in <code>linter.rs</code> in the <code>ruff_linter</code> crate:</p>
<p>https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_linter/src/linter.rs#L1015-L1025</p>
<p>https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_linter/src/linter.rs#L1064-L1066</p>
<p>The second of these can be reused for other semantic errors that correspond to
ruff rules, while something like the first example can be used for new
syntax-error-specific tests. In both cases, these integration tests will take
advantage of the existing context tracking done by the real <a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_linter/src/checkers/ast/mod.rs#L182"><code>Checker</code></a> instead
of trying to duplicate that tracking in the parser&#x27;s test
<a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/tests/fixtures.rs#L470"><code>SemanticSyntaxCheckerVisitor</code></a>.</p>
Comparing to the fuzzer results
<p>Again, the initial errors in this issue were extracted from <a href="https://github.com/astral-sh/ruff/issues/7633#issuecomment-1740424031">this comment</a> in
#7633 by following this procedure:</p>
<ol>
<li>Download and unzip the fuzzer results from <a href="https://github.com/qarmin/Automated-Fuzzer/releases/download/test/Cpython.no.parsable.parsable.by.ruff.zip">here</a></li>
<li>Run the Python script below to get a partially-deduplicated list of errors</li>
<li>Double check these errors against ruff and CPython&#x27;s parser and compiler</li>
</ol>

Python script for processing fuzzer results

<pre><code>import argparse
import compileall
import contextlib
import dataclasses
import io
import os
import re
import subprocess
from collections import Counter

FILE = re.compile(r&#x27;File &quot;([^&quot;]+)&quot;, line (\d+)&#x27;)
MESSAGE = re.compile(r&quot;SyntaxError: (.*)&quot;)


@dataclasses.dataclass
class Error:
    file: str
    line_number: int
    message: str


# Ruff rules already re-implemented as semantic syntax errors, not just rules
# that match CPython syntax errors.
RULES = [
    &quot;F404&quot;,
    &quot;F704&quot;,
    &quot;F706&quot;,
    &quot;PLE0118&quot;,
    &quot;PLE1142&quot;,
]


def run_ruff(ruff_bin, path):
    return subprocess.run(
        [
            ruff_bin,
            &quot;check&quot;,
            &quot;--no-cache&quot;,
            &quot;--silent&quot;,
            &quot;--preview&quot;,
            &quot;--config&quot;,
            f&quot;lint.select={RULES}&quot;,
            path,
        ]
    ).returncode


def main():
    parser = argparse.ArgumentParser()
    parser.add_argument(&quot;--ruff-bin&quot;, default=&quot;ruff&quot;)

    args = parser.parse_args()

    with (
        contextlib.redirect_stdout(io.StringIO()) as out,
        contextlib.redirect_stderr(os.devnull),
    ):
        compileall.compile_dir(&quot;.&quot;, force=True, quiet=1)

    seen_messages = Counter()
    errors = list()

    file, line_number = None, None
    for line in out.getvalue().splitlines():
        if m := FILE.search(line):
            file, line_number = m.groups()
        if m := MESSAGE.search(line):
            message = m[1]
            # combine repetitive messages into single entries
            for prefix in [
                &quot;unknown encoding&quot;,
                &quot;invalid escape sequence&quot;,
                &quot;&#x27;ascii&#x27; codec can&#x27;t decode&quot;,
                &quot;future feature&quot;,
                &quot;invalid character&quot;,
                &quot;invalid non-printable character&quot;,
                &quot;no binding for nonlocal&quot;,
            ]:
                if message.startswith(prefix):
                    message = prefix
                    break
            if (
                message not in seen_messages
                and run_ruff(args.ruff_bin, file) == 0
            ):
                errors.append(Error(file, line_number, message))

            seen_messages[message] += 1

    for error in sorted(errors, key=lambda e: e.message):
        count = seen_messages[error.message]
        print(f&quot;{error.file}:{error.line_number}: {error.message} ({count})&quot;)


if __name__ == &quot;__main__&quot;:
    main()
</code></pre>
</p>


<p>[^1]: There are some local violations of this principle. For example, the
<a href="https://github.com/astral-sh/ruff/blob/014bb526f45afd654e5f42db92310e98b5068a54/crates/ruff_python_parser/src/semantic_errors.rs#L1291"><code>ReboundComprehensionVisitor</code></a> recursively visits the expressions in a
comprehension looking for any expressions rebinding one of the
comprehension&#x27;s iteration variables. However, this is a highly-localized AST
traversal and won&#x27;t have the same kind of performance implications as an
additional full AST traversal.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-15 18:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">tracking</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-15 18:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[syntax-errors] Remaining errors raised by the compiler&quot; to &quot;[syntax-errors] Remaining syntax errors raised by the compiler&quot; by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-15 18:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/abhijeetbodas2001">@abhijeetbodas2001</a> on 2025-05-05 18:26</div>
            <div class="timeline-body"><blockquote>
<p>generator expression must be parenthesized</p>
</blockquote>
<p>Regardless of whether there is a trailing comma or not, the exact same AST is generated by ruff for the code (only the ranges are different).
Given this, how do we detect the trailing comma during the semantic syntax error phase?
Should this rather be detected during parsing?
For example, the <code>ast</code> module does not give an AST at all for this:</p>
<pre><code>&gt;&gt;&gt; import ast; ast.parse(&quot;max(i for i in range(3),)&quot;)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/usr/lib/python3.11/ast.py&quot;, line 50, in parse
    return compile(source, filename, mode, flags,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;&lt;unknown&gt;&quot;, line 1
    max(i for i in range(3),)
        ^^^^^^^^^^^^^^^^^^^
SyntaxError: Generator expression must be parenthesized
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-05-05 18:44</div>
            <div class="timeline-body"><p>Oh you&#x27;re exactly right, thanks! The fact that <code>ast.parse</code> fails means this is not a semantic syntax error and should instead be caught by our parser. I&#x27;ll open a separate issue for that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-08-22 19:44</div>
            <div class="timeline-body"><p>Hii , I am new to the astral community , I have tried to implement syntax error for <code>yield from</code> in async functions.
Looking forward to learn &amp; contribute.</p>
<p>Thank you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-08-30 12:26</div>
            <div class="timeline-body"><p>I have also tried to implement <code>F406</code> (mport * only allowed at module leve) in PR linked above.
Thank you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-09-04 16:39</div>
            <div class="timeline-body"><p>Hii @ntBre , I have tried to implement  <code>F622</code> multiple starred expression (linked above) , can you please take a look whenever you get a chance.
Thank you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-09-15 22:52</div>
            <div class="timeline-body"><p>Hi @ntBre , I’ve implemented the new error case where a name is both a parameter and global. I think implementation is similar for the case where a name is both a parameter and nonlocal. Do you recommend adding that in the same PR, or should I open a separate one?
Whenever you get a chance, I’d appreciate your review. Thanks a lot for your time and guidance!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-15 23:17</div>
            <div class="timeline-body"><p>Thank you! Let&#x27;s start with <code>global</code> and save <code>nonlocal</code> for a separate PR. Both of these are a bit trickier than they look initially because <code>global</code> handling in ty is quite different from Ruff, and Ruff doesn&#x27;t have much of the <code>nonlocal</code> support that ty has, so we may not even want to tackle that one immediately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-09-15 23:20</div>
            <div class="timeline-body"><p>Sure thing : ) , I understand.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-09-24 16:48</div>
            <div class="timeline-body"><p>I have tried to implement F407 , have linked the PR above.</p>
<p>Thank you : )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-09-24 16:55</div>
            <div class="timeline-body"><p>Hii @ntBre , I am also working on this break outside loop F701 , this would require some changes to the context, I have added a new <code>in_loop_context</code> , could you please take a loop &amp; let me know if I am headed in right direction. <a href="https://github.com/astral-sh/ruff/pull/20556">astral-sh/ruff#20556</a></p>
<p>Thank you :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-10-02 16:07</div>
            <div class="timeline-body"><p>Hii @ntBre , I have tried to implement the semantic syntax error where alternative patterns bind different names (linked above) . Whenever you get a chance, I’d appreciate your review.</p>
<p>Thank you : )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-10-14 17:12</div>
            <div class="timeline-body"><p>Hii @ntBre , now as we have <code>in_loop_context</code> method I have implemented(ported) <code>F702</code> as semantic syntax error linking PR (<a href="https://github.com/astral-sh/ruff/pull/20869">astral-sh/ruff#20869</a>) &amp; have also worked on a new semantic syntax error linked above where annotated name cannot be global. Would appreciate your review .</p>
<p>Thank you : )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-10-22 17:11</div>
            <div class="timeline-body"><p>Linking PR for PLE0117 <a href="https://github.com/astral-sh/ruff/pull/21032">astral-sh/ruff#21032</a></p>
<p>Thank you : )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-11-07 06:11</div>
            <div class="timeline-body"><p>Linking the follow up PR for name is parameter and global for ty <a href="https://github.com/astral-sh/ruff/pull/21312">astral-sh/ruff#21312</a></p>
<p>Thank  you : )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-11-27 03:44</div>
            <div class="timeline-body"><p>This is another one that&#x27;s easy enough to do:</p>
<pre><code>In [7]: class Foo2[T3 = int, T4]: ...
  Cell In[7], line 1
    class Foo2[T3 = int, T4]: ...
                         ^
SyntaxError: non-default type parameter &#x27;T4&#x27; follows default type parameter
</code></pre>
<p>It&#x27;s interesting that this isn&#x27;t raised by the parser while a similar error involving function parameters is being raised by the parser:</p>
<pre><code>❯ echo &quot;class Foo[T1 = int, T2]: ...&quot; | python -m ast -                                      
Module(
   body=[
      ClassDef(
         name=&#x27;Foo&#x27;,
         body=[
            Expr(
               value=Constant(value=Ellipsis))],
         type_params=[
            TypeVar(
               name=&#x27;T1&#x27;,
               default_value=Name(id=&#x27;int&#x27;, ctx=Load())),
            TypeVar(name=&#x27;T2&#x27;)])])

❯ echo &quot;def foo(t1 = int, t2): ...&quot; | python -m ast -
Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/Users/dhruv/.local/share/uv/python/cpython-3.13.5-macos-aarch64-none/lib/python3.13/ast.py&quot;, line 1865, in &lt;module&gt;
    main()
    ~~~~^^
  File &quot;/Users/dhruv/.local/share/uv/python/cpython-3.13.5-macos-aarch64-none/lib/python3.13/ast.py&quot;, line 1861, in main
    tree = parse(source, name, args.mode, type_comments=args.no_type_comments)
  File &quot;/Users/dhruv/.local/share/uv/python/cpython-3.13.5-macos-aarch64-none/lib/python3.13/ast.py&quot;, line 50, in parse
    return compile(source, filename, mode, flags,
                   _feature_version=feature_version, optimize=optimize)
  File &quot;&lt;stdin&gt;&quot;, line 1
    def foo(t1 = int, t2): ...
                      ^^
SyntaxError: parameter without a default follows parameter with a default
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-11-27 09:41</div>
            <div class="timeline-body"><blockquote>
<p>This is another one that&#x27;s easy enough to do:</p>
<p>In [7]: class Foo2[T3 = int, T4]: ...
Cell In[7], line 1
class Foo2[T3 = int, T4]: ...
^
SyntaxError: non-default type parameter &#x27;T4&#x27; follows default type parameter
It&#x27;s interesting that this isn&#x27;t raised by the parser while a similar error involving function parameters is being raised by the parser:</p>
<p>❯ echo &quot;class Foo[T1 = int, T2]: ...&quot; | python -m ast -<br>
Module(
body=[
ClassDef(
name=&#x27;Foo&#x27;,
body=[
Expr(
value=Constant(value=Ellipsis))],
type_params=[
TypeVar(
name=&#x27;T1&#x27;,
default_value=Name(id=&#x27;int&#x27;, ctx=Load())),
TypeVar(name=&#x27;T2&#x27;)])])</p>
<p>❯ echo &quot;def foo(t1 = int, t2): ...&quot; | python -m ast -
Traceback (most recent call last):
File &quot;&quot;, line 198, in _run_module_as_main
File &quot;&quot;, line 88, in _run_code
File &quot;/Users/dhruv/.local/share/uv/python/cpython-3.13.5-macos-aarch64-none/lib/python3.13/ast.py&quot;, line 1865, in 
main()
~~~~^^
File &quot;/Users/dhruv/.local/share/uv/python/cpython-3.13.5-macos-aarch64-none/lib/python3.13/ast.py&quot;, line 1861, in main
tree = parse(source, name, args.mode, type_comments=args.no_type_comments)
File &quot;/Users/dhruv/.local/share/uv/python/cpython-3.13.5-macos-aarch64-none/lib/python3.13/ast.py&quot;, line 50, in parse
return compile(source, filename, mode, flags,
_feature_version=feature_version, optimize=optimize)
File &quot;&quot;, line 1
def foo(t1 = int, t2): ...
^^
SyntaxError: parameter without a default follows parameter with a default</p>
</blockquote>
<p>I have linked the PR.</p>
<p>Thank you : )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/11happy">@11happy</a> on 2025-12-04 10:20</div>
            <div class="timeline-body"><blockquote>
<p>This is another one that&#x27;s easy enough to do:</p>
<p>In [7]: class Foo2[T3 = int, T4]: ...
Cell In[7], line 1
class Foo2[T3 = int, T4]: ...
^
SyntaxError: non-default type parameter &#x27;T4&#x27; follows default type parameter
It&#x27;s interesting that this isn&#x27;t raised by the parser while a similar error involving function parameters is being raised by the parser:</p>
<p>❯ echo &quot;class Foo[T1 = int, T2]: ...&quot; | python -m ast -<br>
Module(
body=[
ClassDef(
name=&#x27;Foo&#x27;,
body=[
Expr(
value=Constant(value=Ellipsis))],
type_params=[
TypeVar(
name=&#x27;T1&#x27;,
default_value=Name(id=&#x27;int&#x27;, ctx=Load())),
TypeVar(name=&#x27;T2&#x27;)])])</p>
<p>❯ echo &quot;def foo(t1 = int, t2): ...&quot; | python -m ast -
Traceback (most recent call last):
File &quot;&quot;, line 198, in _run_module_as_main
File &quot;&quot;, line 88, in _run_code
File &quot;/Users/dhruv/.local/share/uv/python/cpython-3.13.5-macos-aarch64-none/lib/python3.13/ast.py&quot;, line 1865, in 
main()
~~~~^^
File &quot;/Users/dhruv/.local/share/uv/python/cpython-3.13.5-macos-aarch64-none/lib/python3.13/ast.py&quot;, line 1861, in main
tree = parse(source, name, args.mode, type_comments=args.no_type_comments)
File &quot;/Users/dhruv/.local/share/uv/python/cpython-3.13.5-macos-aarch64-none/lib/python3.13/ast.py&quot;, line 50, in parse
return compile(source, filename, mode, flags,
_feature_version=feature_version, optimize=optimize)
File &quot;&quot;, line 1
def foo(t1 = int, t2): ...
^^
SyntaxError: parameter without a default follows parameter with a default</p>
</blockquote>
<p>I have linked the PR for ty one as well.
Thank you : )</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:49 UTC
    </footer>
</body>
</html>
