<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use new `Diagnostic` functionality for Ruff rules - astral-sh/ruff #19690</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use new <code>Diagnostic</code> functionality for Ruff rules</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/19690">#19690</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-08-01 15:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-01 15:16</div>
            <div class="timeline-body"><p>It's a bit late in the process, but it seemed useful to write up a tracking issue for the remaining TODOs before we can take advantage of our new <code>Diagnostic</code> infrastructure in Ruff. This is primarily focused on the <code>full</code> output format, which is where the new functionality like multiple annotations will be visible. We've already switched over the <code>concise</code> and a few other formats without any user-visible changes.</p>
<p>In brief, the remaining tasks are to switch Ruff over to the new <code>full</code>-format rendering code in <code>ruff_db</code>, update our caching code to preserve all of the information in the new diagnostics instead of the legacy subset (or sidestep this by avoiding the cache entirely in those cases, as we ended up doing), and then actually use some of the new functionality in real lint rules. The first of these has been broken into a few subtasks to make it easier for review.</p>
<ul>
<li>[x] https://github.com/astral-sh/ruff/pull/19415<ul>
<li>[x] https://github.com/astral-sh/ruff/pull/19644</li>
<li>[x] https://github.com/astral-sh/ruff/pull/19653</li>
<li>[x] https://github.com/astral-sh/ruff/pull/19698</li>
</ul>
</li>
<li>[x] https://github.com/astral-sh/ruff/pull/19869</li>
<li>[ ] https://github.com/astral-sh/ruff/issues/19688</li>
<li>[ ] https://github.com/astral-sh/ruff/issues/17203</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @ntBre by @ntBre on 2025-08-01 15:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">tracking</span> added by @ntBre on 2025-08-01 15:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by @ntBre on 2025-08-01 15:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-14 19:43</div>
            <div class="timeline-body"><p>I mostly wanted to track the stack of rendering PRs and then caching. The remaining tasks seem well-covered by their own issues.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-08-14 19:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:38:06 UTC
    </footer>
</body>
</html>
