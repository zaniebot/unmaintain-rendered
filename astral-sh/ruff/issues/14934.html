<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] mdtest should fail if you have a triple-backtick block that is unclosed - astral-sh/ruff #14934</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] mdtest should fail if you have a triple-backtick block that is unclosed</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/14934">#14934</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2024-12-12 12:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-12-12 12:25</div>
            <div class="timeline-body"><p>If you have an <a href="https://github.com/astral-sh/ruff/tree/main/crates/red_knot_test">mdtest</a> like this at the end of the Markdown file, it doesn't fail:</p>
<pre><code># bytes should be inferred as strings

```py
x = b&quot;42&quot;

reveal_type(x)  # revealed: str
</code></pre>
<p>That's because the backticks are never closed, so mdtest doesn't even recognise this as a test snippet. I <em>keep on</em> making this mistake locally and wondering why my tests aren't even running! It would be ideal if the framework could detect this and tell me that my test file is invalid because the backticks were never closed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @AlexWaygood on 2024-12-12 12:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @AlexWaygood on 2024-12-12 12:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by @AlexWaygood on 2024-12-12 12:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2024-12-12 14:25</div>
            <div class="timeline-body"><p>Yes, please! Ran into this multiple times already.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2024-12-12 14:36</div>
            <div class="timeline-body"><p>This seems trivial to fix. A PR should be ready by Saturday.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @InSyncWithFoo by @AlexWaygood on 2024-12-12 14:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14965.html">astral-sh/ruff#14965</a> on 2024-12-14 00:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @carljm on 2024-12-14 05:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @carljm on 2024-12-14 05:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:14 UTC
    </footer>
</body>
</html>
