<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Specific ruff file ignores ignore everything - astral-sh/ruff #3101</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Specific ruff file ignores ignore everything</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/3101">#3101</a>
        opened by <a href="https://github.com/henryiii">@henryiii</a>
        on 2023-02-21 22:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/henryiii">@henryiii</a> on 2023-02-21 22:11</div>
            <div class="timeline-body"><p>The following file:</p>
<pre><code class="language-python">def main(x):
    a = 1
</code></pre>
<p>Shows two errors.</p>
<pre><code class="language-console">$ ruff check --isolated --extend-select ARG tmp.py
tmp.py:2:10: ARG001 Unused function argument: `x`
tmp.py:3:5: F841 [*] Local variable `a` is assigned to but never used
Found 2 errors.
[*] 1 potentially fixable with the --fix option.
</code></pre>
<p>If I add this to the top of the file:</p>
<pre><code class="language-python"># ruff: noqa: F821
</code></pre>
<p>Then both errors disappear, instead of just one. In general, it seems that this is just a blanket noqa. (Also, this should not be too picky - <code>ruff: noqa F821</code> is an easy mistake to make! I think I'd require a <code>#</code> to put a comment on the same line, if it was my choice).</p>
<p>See https://github.com/pybind/pybind11/pull/4483#discussion_r1113570639.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-21 22:12</div>
            <div class="timeline-body"><p>Do you know what version this is on?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-21 22:13</div>
            <div class="timeline-body"><p>In #2978, we added support for directives like <code># ruff: noqa: F821</code> which ignore a specific error.</p>
<p>(Note that Flake8 treats <code># flake8: noqa: F821</code> as a blanket ignore -- as in, with Flake8, that directive will ignore <em>all</em> errors like you're seeing above.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2023-02-21 22:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-02-21 22:50</div>
            <div class="timeline-body"><p>Locally, my version is a bit older due to being from homebrew - 0.0.245. In pre-commit in the original issue, it should have ~~been the latest version, but I can check~~ - ahh, no, it's 0.0.247. I knew that was recent, but not quite how recent. It would be really helpful if <code># ruff: ignore&lt;stuff&gt;</code> was an error unless <code>&lt;stuff&gt;</code> was recognized and supported or started with a <code>#</code>.</p>
<p>I'll check and report back later tonight!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-22 00:25</div>
            <div class="timeline-body"><p>So as of that PR, we do throw warnings -- e.g., if you do <code># ruff: noqa F401</code>:</p>
<pre><code>warning: Unexpected suffix on `noqa` directive: &quot;# ruff: noqa F401&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-22 00:25</div>
            <div class="timeline-body"><p>(I think that feature shipped in 0.0.248.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-02-22 01:56</div>
            <div class="timeline-body"><p>It oddly prints the warning three times:</p>
<pre><code>warning: Unexpected suffix on `noqa` directive: &quot;# ruff: noqa SIM201 SIM300 SIM202&quot;
warning: Unexpected suffix on `noqa` directive: &quot;# ruff: noqa SIM201 SIM300 SIM202&quot;
warning: Unexpected suffix on `noqa` directive: &quot;# ruff: noqa SIM201 SIM300 SIM202&quot;

Fixed 19 errors:
- tests/test_enum.py:
    10 × SIM201 (negate-equal-op)
     7 × SIM300 (yoda-conditions)
     2 × SIM202 (negate-not-equal-op)
</code></pre>
<p>(And I'd be quite fine to have some sort of way to make all warnings errors).</p>
<p>But it does work correctly, and warns as expected, in 0.0.249 (and therefore I'd assume 0.0.251)! Sorry for the noise, I should have tried an update first.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @henryiii on 2023-02-22 01:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:49 UTC
    </footer>
</body>
</html>
