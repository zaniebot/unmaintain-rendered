<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New rule: For a specified function/method sourced from a specified module, make a specified non-required argument mandatory as a keyword argument. - astral-sh/ruff #15225</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>New rule: For a specified function/method sourced from a specified module, make a specified non-required argument mandatory as a keyword argument.</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/15225">#15225</a>
        opened by <a href="https://github.com/andyscho">@andyscho</a>
        on 2025-01-02 18:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/andyscho">@andyscho</a> on 2025-01-02 18:12</div>
            <div class="timeline-body"><h1>Rule</h1>
<p>For a user-configured (module, function, argument name), enforce that a non-required argument gets supplied. For instance, if a user configures the <code>validate</code> argument in <code>pandas.merge</code> to always be mandatory, the rule would flag if someone passes <code>pandas.merge(df1, df2)</code> without the <code>validate</code> argument.</p>
<h1>Example Use Case / Motivation</h1>
<p>Making the <code>validate</code> argument for <a href="https://pandas.pydata.org/docs/reference/api/pandas.merge.html">pandas.merge</a> functions/methods mandatory.</p>
<p>Some reasoning from <a href="https://medium.com/@akarabaev96/pandas-merge-best-practices-stop-wasting-your-time-on-debugging-the-merge-operations-72778845d9b7">this post</a>:</p>
<blockquote>
<p>Of course, many of you can say that the source problem is the duplication in the merge keys itself and it is better simply to check for duplication before performing any merge. However, this is something that we can forget to do and it is better to ALWAYS add parameter validateto the pandas.merge , since it is just 2 words to add to your code. Of course, you need to specify the validation type (“one_to_one”, “one_to_many”, etc), however, I always go with “one_to_one” as a default option, and when it raises an exception, only then I start thinking that maybe I need to change validation type</p>
</blockquote>
<p>This particular use case could be hardcoded as a new rule in pandas-vet, but it would be nice to do something more general since the core functionality seems clearly useful when dealing with various third-party libraries. Having it as a ruff rule configuration entry seems nicer than wrapping third-party method/function calls to make the arguments mandatory whenever you'd want to do this.</p>
<h1>Configuration</h1>
<p>I am envisioning something like the <a href="https://docs.astral.sh/ruff/settings/#lint_flake8-tidy-imports_banned-api">banned-api configuration</a>, allowing for specifying (1) a module qualified name base import path, (2) the name of a function, and (3) arguments to be enforced to be present.</p>
<h1>Implementation</h1>
<p>I am envisioning something like <a href="https://github.com/astral-sh/ruff/blob/main/crates/ruff_linter/src/rules/pandas_vet/rules/inplace_argument.rs">pandas-use-of-inplace-argument</a>, but using the configured module names, function names, and argument names instead of <code>&quot;pandas&quot;</code>, <code>&quot;drop&quot;</code>, and <code>&quot;inplace&quot;</code>, and then just enforcing that the argument is present in the keywords.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @dhruvmanila on 2025-01-03 02:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @dhruvmanila on 2025-01-03 02:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/16179.html">astral-sh/ruff#16179</a> on 2025-02-16 08:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andyscho">@andyscho</a> on 2025-02-16 08:05</div>
            <div class="timeline-body"><p>Although I made a quick and very rough/not correct draft that handles a few scenarios in #16179, this issue should likely have the <code>type-inference</code> label. It should also plausibly wait for #1774.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:54 UTC
    </footer>
</body>
</html>
