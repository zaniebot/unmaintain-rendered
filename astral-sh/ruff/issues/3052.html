<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C901 (max-complexity) not reported since 0.0.247 - astral-sh/ruff #3052</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>C901 (max-complexity) not reported since 0.0.247</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/3052">#3052</a>
        opened by <a href="https://github.com/kalekseev">@kalekseev</a>
        on 2023-02-20 07:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kalekseev">@kalekseev</a></div>
            <div class="timeline-body"><p>Can't find anything that can cause the change in changelog https://github.com/charliermarsh/ruff/releases/tag/v0.0.247 or docs https://beta.ruff.rs/docs/settings/#max-complexity</p>
<pre><code>❯ cat &gt; a.py
def fn(a, b, c, d, e):
    if a:
        ...
    try:
        ...
    except ValueError:
        ...
    if b:
        ...
    if c:
        ...
    if d:
        ...
    else:
        try:
            if a:
                if not b:
                    ...
        except ValueError:
            ...
    ...

❯ pip install ruff==0.0.246
Collecting ruff==0.0.246
  Using cached ruff-0.0.246-py3-none-macosx_10_9_x86_64.macosx_11_0_arm64.macosx_10_9_universal2.whl (10.7 MB)
Installing collected packages: ruff
  Attempting uninstall: ruff
    Found existing installation: ruff 0.0.244
    Uninstalling ruff-0.0.244:
      Successfully uninstalled ruff-0.0.244
Successfully installed ruff-0.0.246

❯ ruff --select C a.py
a.py:1:5: C901 `fn` is too complex (11)
Found 1 error.

❯ pip install ruff==0.0.247
Collecting ruff==0.0.247
  Using cached ruff-0.0.247-py3-none-macosx_10_9_x86_64.macosx_11_0_arm64.macosx_10_9_universal2.whl (11.1 MB)
Installing collected packages: ruff
  Attempting uninstall: ruff
    Found existing installation: ruff 0.0.246
    Uninstalling ruff-0.0.246:
      Successfully uninstalled ruff-0.0.246
Successfully installed ruff-0.0.247

❯ ruff --select C a.py
❯


</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-20 14:54</div>
            <div class="timeline-body"><p>I think the issue here is that you need to do <code>--select C9</code> now, since <code>C</code> is assigned to both <code>flake8-comprehensions</code> and <code>mccabe</code>. But I didn't realize that these no longer worked. @not-my-profile, is this intended? Is there a way we could re-enable them?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-02-20 14:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-02-20 16:06</div>
            <div class="timeline-body"><p>Ah yeah my bad. I redirected <code>C</code> to <code>C4</code> in 849b947b ... I didn't realize that it previously also included C9. Since the many-to-one mapping broke up the <code>RuleCodePrefix</code> enum we can no longer easily map one prefix to rules from different linters.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-11 16:33</div>
            <div class="timeline-body"><p>We have the same problem, I think, which <code>T</code>, which is redirected to <code>T10</code>, so <code>T</code> no longer turns on the <code>T200</code> rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-11 17:37</div>
            <div class="timeline-body"><p>Gonna consider this high-priority since we've silently turned off rules for users.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-03-11 19:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-11 20:53</div>
            <div class="timeline-body"><p>Fixed in #3452.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-03-13 12:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:46:35 UTC
    </footer>
</body>
</html>
