<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Question] Ruff server wraps line - astral-sh/ruff #11504</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Question] Ruff server wraps line</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11504">#11504</a>
        opened by <a href="https://github.com/qmmp123">@qmmp123</a>
        on 2024-05-23 03:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/qmmp123">@qmmp123</a> on 2024-05-23 03:32</div>
            <div class="timeline-body"><p>I'm using neovim with nvim-lspconfig. Ruff server wraps the line when it exceeds 88 chars but in pyproject.toml I've set <code>line-length</code> to 120. What can I do to avoid wrapping line?
cmd - ruff server --preview
pyproject.toml</p>
<pre><code class="language-toml">[tool.ruff]
exclude = [
    &quot;.bzr&quot;,
    &quot;.direnv&quot;,
    &quot;.eggs&quot;,
    &quot;.git&quot;,
    &quot;.git-rewrite&quot;,
    &quot;.hg&quot;,
    &quot;.ipynb_checkpoints&quot;,
    &quot;.mypy_cache&quot;,
    &quot;.nox&quot;,
    &quot;.pants.d&quot;,
    &quot;.pyenv&quot;,
    &quot;.pytest_cache&quot;,
    &quot;.pytype&quot;,
    &quot;.ruff_cache&quot;,
    &quot;.svn&quot;,
    &quot;.tox&quot;,
    &quot;.venv&quot;,
    &quot;.vscode&quot;,
    &quot;__pypackages__&quot;,
    &quot;_build&quot;,
    &quot;buck-out&quot;,
    &quot;build&quot;,
    &quot;dist&quot;,
    &quot;node_modules&quot;,
    &quot;site-packages&quot;,
    &quot;venv&quot;,
    &quot;superset-frontend&quot;,
    &quot;superset-embedded-sdk&quot;,
    &quot;sqllab&quot;
]

src = [&quot;superset&quot;]

# Same as Black.
line-length = 120
indent-width = 4
fix = false

# Assume Python 3.8
target-version = &quot;py38&quot;

[tool.ruff.lint.pycodestyle]
max-line-length = 120

[tool.ruff.lint]
# Enable Pyflakes (`F`) and a subset of the pycodestyle (`E`)  codes by default.
select = [&quot;E&quot;, &quot;F&quot;]
ignore = []

# Allow fix for all enabled rules (when `--fix`) is provided.
fixable = []
unfixable = []

# Allow unused variables when underscore-prefixed.
dummy-variable-rgx = &quot;^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$&quot;

[tool.ruff.format]
# Like Black, use double quotes for strings.
quote-style = &quot;double&quot;

# Like Black, indent with spaces, rather than tabs.
indent-style = &quot;space&quot;

# Like Black, respect magic trailing commas.
skip-magic-trailing-comma = false

# Like Black, automatically detect the appropriate line ending.
line-ending = &quot;auto&quot;
</code></pre>
<p>ruff version 0.4.4</p>
<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @charliermarsh on 2024-05-23 03:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @snowsignal by @snowsignal on 2024-05-23 03:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/snowsignal">@snowsignal</a> on 2024-05-23 04:01</div>
            <div class="timeline-body"><p>Hi @qmmp123! Thank you for opening this issue.</p>
<p>Could you clarify what you mean by &quot;<code>ruff server</code> wraps the line&quot;? Are you saying that the editor soft wraps the line once it reaches 88 characters? Or are you getting a <code>line too long</code> diagnostic once the line goes past 88 characters?</p>
<p>Thanks again!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qmmp123">@qmmp123</a> on 2024-05-23 04:03</div>
            <div class="timeline-body"><p>Hi @snowsignal . Yeah. The editor soft wraps the line once it reaches 88 characters</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/snowsignal">@snowsignal</a> on 2024-05-23 04:29</div>
            <div class="timeline-body"><p>@qmmp123 This sounds like a Neovim problem, not an issue with the language server. Does resizing the window to be wider change when the line soft-wraps?</p>
<p>If not, what does your Neovim configuration look like?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qmmp123">@qmmp123</a> on 2024-05-23 04:37</div>
            <div class="timeline-body"><p>@snowsignal I don't know where is the problem, but enabling ruff in nvim-ispconfig causes this problem. That's why I've created issue in this repo.
There are too many lines in my init.vim. I post only part where I'm enabling ruff</p>
<pre><code class="language-lua">local lsp = require('lspconfig')
lsp.clangd.setup{}
lsp.rust_analyzer.setup{}
lsp.cmake.setup{}
lsp.gopls.setup{}
lsp.pyright.setup{
    settings = {
        pyright = {
          disableOrganizeImports = true,
        },
        python = {
            analysis = {
                ignore = { '*' },
            },
        },
    },
}
lsp.ruff.setup{
    cmd = {&quot;ruff&quot;, &quot;server&quot;, &quot;--preview&quot;, &quot;--verbose&quot;}
}
lsp.tsserver.setup{}
lsp.html.setup{}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-05-23 04:51</div>
            <div class="timeline-body"><blockquote>
<p>The editor soft wraps the line once it reaches 88 characters</p>
</blockquote>
<p>If this happens while you're typing, you might want to checkout the value of <code>textwidth</code> and whether you've the <code>t</code> option enabled for <code>formatoptions</code>. Run this on the command-line in Neovim:</p>
<pre><code class="language-lua">vim.print(vim.bo.textwidth)
vim.print(vim.bo.formatoptions)
</code></pre>
<p>If <code>textwidth</code> is greater than 0 and you've <code>t</code> in <code>formatoptions</code>, the editor will auto-wrap the lines.</p>
<p>@qmmp123 Can you try this and let us know?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qmmp123">@qmmp123</a> on 2024-05-23 04:58</div>
            <div class="timeline-body"><p>@dhruvmanila I'm sorry. My settings cause the problem. Thank you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @qmmp123 on 2024-05-23 04:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-05-23 05:00</div>
            <div class="timeline-body"><p>No worries. Glad to hear it's sorted :)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:33:57 UTC
    </footer>
</body>
</html>
