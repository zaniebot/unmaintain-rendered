<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insert two empty lines after top level suite with trailing def/class - astral-sh/ruff #7947</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Insert two empty lines after top level suite with trailing def/class</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/7947">#7947</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-10-13 15:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>Black formats</p>
<pre><code>if True:

    def double(s):
        return s + s
print(&quot;out&quot;)
</code></pre>
<p>as</p>
<pre><code>if True:

    def double(s):
        return s + s


print(&quot;out&quot;)
</code></pre>
<p>while we format it as</p>
<pre><code>if True:

    def double(s):
        return s + s

print(&quot;out&quot;)
</code></pre>
<p>Black does so because on the top level, there are two newlines after a function or class definition. We currently don&#x27;t see that the if statement is on the top level when formatting its suite, so we can&#x27;t that we need one more newline here. This is a follow-up to #7946.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/konstin">@konstin</a> on 2023-10-13 15:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/konstin">@konstin</a> on 2023-10-13 15:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Formatter: Stable&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-16 07:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-11-14 11:55</div>
            <div class="timeline-body"><p>Works on main</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/konstin">@konstin</a> on 2023-11-14 11:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:43 UTC
    </footer>
</body>
</html>
