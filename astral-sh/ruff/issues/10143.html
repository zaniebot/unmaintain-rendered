<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Why does assert False suggest pytest? - astral-sh/ruff #10143</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Why does assert False suggest pytest?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10143">#10143</a>
        opened by <a href="https://github.com/kaddkaka">@kaddkaka</a>
        on 2024-02-27 06:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kaddkaka">@kaddkaka</a></div>
            <div class="timeline-body"><p>Upon linting a python file with only this content, ruff suggests to use pytest, why?</p>
<pre><code>assert False
</code></pre>
<p><code>ruff: Assertion always fails, replace with `pytest.fail()` [PT015]</code></p>
<p>There is nothing in filename that suggests that this is a test, so, why?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikeleppane">@mikeleppane</a> on 2024-02-27 07:33</div>
            <div class="timeline-body"><p>Hi! If you enable this rule, it does not care about the file name or whether it is a normal source or a test file. You could specify and include PT rules only for test files. However, I agree, there may be room for improvement. We could try to figure out if it is a test file based on the conventions <a href="https://docs.pytest.org/en/7.2.x/explanation/goodpractices.html#conventions-for-python-test-discovery">Python test discovery</a>. I&#x27;m not 100% sure if there are some edge cases on top of this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kaddkaka">@kaddkaka</a> on 2024-02-27 07:44</div>
            <div class="timeline-body"><p>Using standard pytest discovery seems reasonable. Including understanding pytest ini options such as</p>
<ul>
<li><code>pyproject.toml</code>:</li>
</ul>
<pre><code>[tool.pytest.ini_options]
addopts = &quot;&quot;&quot;\
--ignore=stupid_file.py&quot;&quot;&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-27 08:47</div>
            <div class="timeline-body"><p>For now, you can ignore the rule yourself by either ignoring the rule for all non test files using <a href="https://docs.astral.sh/ruff/settings/#lint_per-file-ignores"><code>per-file-ignores</code></a> or you can create a <code>ruff.toml</code> in your test directory (assuming all tests are in one directory), extend your root configuration by setting <code>extend = &quot;../pyproject.toml&quot;</code>, and enabling the pytest rules <code>extend-select = [&quot;PT&quot;]</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-27 08:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-28 01:00</div>
            <div class="timeline-body"><p>I think this can be tracked in <a href="https://github.com/astral-sh/ruff/issues/8794">astral-sh/ruff#8794</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-28 01:00</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:50 UTC
    </footer>
</body>
</html>
