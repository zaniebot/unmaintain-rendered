<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W505: Warning raised for comments in addition to docstrings - astral-sh/ruff #15733</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>W505: Warning raised for comments in addition to docstrings</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/15733">#15733</a>
        opened by <a href="https://github.com/martimlobao">@martimlobao</a>
        on 2025-01-24 20:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/martimlobao">@martimlobao</a> on 2025-01-24 20:57</div>
            <div class="timeline-body"><h3>Description</h3>
<p><a href="https://docs.astral.sh/ruff/rules/doc-line-too-long/">W505</a> (doc line too long) is raised for docstrings that are too long, but it is also raised for comments (and commented-out code). Comments, and commented-out code in particular, are not docs and I feel they should be treated differently.</p>
<pre><code class="language-toml"># ruff.toml
line-length = 119

[lint]
select = [&quot;ALL&quot;]

[lint.pycodestyle]
max-doc-length = 80
</code></pre>
<pre><code class="language-python"># example.py
class Foo:
    &quot;&quot;&quot;A really long docstring that goes on and on and should be split into multiple lines.&quot;&quot;&quot;

    def __init__(self):
        pass
        # print(&quot;This is some code that is less than 119 characters and that we commented out.&quot;)
</code></pre>
<pre><code class="language-bash">$ ruff check
example.py:2:81: W505 Doc line too long (94 &gt; 80)
  |
1 | class Foo:
2 |     &quot;&quot;&quot;A really long docstring that goes on and on and should be split into multiple lines.&quot;&quot;&quot;
  |                                                                                 ^^^^^^^^^^^^^^ W505
3 |
4 |     def __init__(self):
  |

example.py:6:81: W505 Doc line too long (100 &gt; 80)
  |
4 |     def __init__(self):
5 |         pass
6 |         # print(&quot;This is some code that is less than 119 characters and that we commented out.&quot;)
  |                                                                                 ^^^^^^^^^^^^^^^^ W505
  |
</code></pre>
<pre><code class="language-bash">$ ruff --version
ruff 0.9.3
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-01-24 21:37</div>
            <div class="timeline-body"><p>It looks like we inherited this behavior from pycodestyle, which also applies it to comments:</p>
<p>https://github.com/PyCQA/pycodestyle/blob/368d9dc21496e4cbb26a00b9e167deed39865781/pycodestyle.py#L1664-L1665</p>
<p>So I'm not sure we'd really want to depart from that.</p>
<p>It's a bit hacky, but as the <a href="https://docs.astral.sh/ruff/rules/doc-line-too-long/#why-is-this-bad">docs</a> suggest, you can avoid W505 on lines that match one of your <a href="https://docs.astral.sh/ruff/settings/#lint_task-tags">lint.task-tags</a> if you combine it with <a href="https://docs.astral.sh/ruff/settings/#lint_pycodestyle_ignore-overlong-task-comments">lint.pycodestyle.ignore-overlong-task-comments</a>:</p>
<pre><code class="language-shell">ruff check --select W505 \
    --config 'lint.pycodestyle.max-doc-length = 80' \
    --config 'lint.pycodestyle.ignore-overlong-task-comments = true' \
    --config 'lint.task-tags = [&quot;&quot;]' example.py
</code></pre>
<p>The empty <code>task-tag</code> should match any comment.</p>
<p>This reports the error for the docstring but not for the comment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-01-25 10:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/martimlobao">@martimlobao</a> on 2025-01-25 15:49</div>
            <div class="timeline-body"><p>@ntBre Thanks for the reply! That's interesting, I'm fairly sure I didn't used to get these warnings for comments in the past before switching to <code>ruff</code>, but maybe I wasn't using <code>pycodestyle</code>. In that case, it looks like this is behaving as intended (i.e. it matches <code>pycodestyle</code>'s behavior), and with your suggested workaround I'm sufficiently satisfied that I think I can close this issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @martimlobao on 2025-01-25 15:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:54 UTC
    </footer>
</body>
</html>
