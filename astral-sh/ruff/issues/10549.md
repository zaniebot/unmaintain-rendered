```yaml
number: 10549
title: Why is __main__ is considered first-party rather than stdlib ?
type: issue
state: closed
author: Avasam
labels:
  - isort
assignees: []
created_at: 2024-03-24T18:25:32Z
updated_at: 2024-05-22T03:10:27Z
url: https://github.com/astral-sh/ruff/issues/10549
synced_at: 2026-01-10T01:56:52Z
```

# Why is __main__ is considered first-party rather than stdlib ?

---

_Issue opened by @Avasam on 2024-03-24 18:25_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

Edit: I got confused with #8750 and #8805 , for some reasons I though it was the other way around. Although neither the issue nor PR offers a reasoning as to why `__main__` is considered first-party rather than stdlib by default.

Here's a handful of example usage from pywin32: https://github.com/search?q=repo%3Amhammond%2Fpywin32+"import+__main__"&type=code

---

`import __main__` gets moved all the way down with first-party imports
![image](https://github.com/astral-sh/ruff/assets/1350584/4460564d-68c2-456a-bfd2-a37f3bc59d7b)

The config:
```toml
target-version = "py37"

[lint]
select = ["I"]

[lint.isort]
combine-as-imports = true
detect-same-package = false
# This forces distutils imports to always be after setuptools
extra-standard-library = ["setuptools"]
known-third-party = ["distutils"]
```



---

_Renamed from "__main__ is considered third party by isort" to "__main__ is considered third party by lint.isort" by @Avasam on 2024-03-24 18:25_

---

_Renamed from "__main__ is considered third party by lint.isort" to "__main__ is considered third party rather than stdlib" by @Avasam on 2024-03-24 18:26_

---

_Renamed from "__main__ is considered third party rather than stdlib" to "Why is __main__ is considered third party rather than stdlib ?" by @Avasam on 2024-03-24 18:31_

---

_Comment by @zanieb on 2024-03-24 19:31_

I don't know the context from those, but `import __main__` can an import an arbitrary third-party module â€” the [Python `__main__` documentation](https://docs.python.org/3/library/__main__.html#import-main) covers this. It seems like it may be sensible to treat it as a third-party import. In the [Python import documentation](https://docs.python.org/3/reference/import.html#import-dunder-main) they describe it as a non-builtin module which might be a good reason to exclude it from the standard imports.

Including it as a first-party import seems like a misunderstanding, but maybe it's with the idea that you should only be doing this for your _own_ application?

cc @charliermarsh @AlexWaygood 

---

_Renamed from "Why is __main__ is considered third party rather than stdlib ?" to "Why is __main__ is considered first-party rather than stdlib ?" by @AlexWaygood on 2024-03-24 19:50_

---

_Comment by @charliermarsh on 2024-03-24 20:02_

It seems like it could make sense to treat it as `stdlib`, since `__main__` itself is part of the standard library. Even though it can resolve to an arbitrary file, that file can actually be different across runs, right? So there's no way to know statically what file it refers to.

---

_Label `isort` added by @charliermarsh on 2024-03-24 20:02_

---

_Label `needs-decision` added by @charliermarsh on 2024-03-24 20:02_

---

_Comment by @zanieb on 2024-03-24 20:06_

Yeah standard library might make sense... I actually don't understand the use-case for importing `__main__`, I'd be curious to hear about that as it might help with a decision.

---

_Comment by @Avasam on 2024-03-24 20:56_

> [...] I actually don't understand the use-case for importing `__main__`, I'd be curious to hear about that as it might help with a decision.

I haven't looked into it in details, and whether there's a better way to achieve what it's trying to do, but I added a reference to Pythonwin IDE (in pywin32) examples in my original description.

---

_Comment by @AlexWaygood on 2024-03-24 20:59_

Hmmm https://github.com/mhammond/pywin32/blob/7cac4eb311db157a72edff1968706d92740937ff/Pythonwin/pywin/idle/CallTips.py#L94

---

_Comment by @charliermarsh on 2024-05-03 01:37_

It looks like isort treats it as third-party, so lets just do that.

---

_Comment by @charliermarsh on 2024-05-03 01:40_

Oh, we originally _did_ mark it as third-party, huh. Just seeing https://github.com/astral-sh/ruff/issues/8750 which is linked up-top.

---

_Comment by @charliermarsh on 2024-05-03 01:40_

I would propose that we change it back to third-party.

---

_Comment by @Avasam on 2024-05-03 03:42_

Either way I can configure it to appear where I'd like in the import groups. This is more of a question since I misunderstood past issue. I don't mind too much whatever the resolution is here, as long as there's a rationale with it.

---

_Comment by @charliermarsh on 2024-05-22 03:10_

I'm gonna close this for now -- I think it's fine to leave as-is unless we hear more reports, just to avoid churn in the absence of a clear right answer. The rationale I'd give is something like: `__main__` refers to the executed module, and so that likely (but not always) refers to first-party code. But, again, I don't think there's a right answer.

---

_Closed by @charliermarsh on 2024-05-22 03:10_

---

_Label `needs-decision` removed by @charliermarsh on 2024-05-22 03:10_

---
