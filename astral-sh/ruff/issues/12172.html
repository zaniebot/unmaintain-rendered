<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`PLR6301` doesn't consider base class methods - astral-sh/ruff #12172</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>PLR6301</code> doesn't consider base class methods</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12172">#12172</a>
        opened by <a href="https://github.com/minusf">@minusf</a>
        on 2024-07-03 15:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/minusf">@minusf</a> on 2024-07-03 15:51</div>
            <div class="timeline-body"><p>Consider the following simple example (and common python pattern in general) in django:
to build a management command, one simply inherits from <code>BaseCommand</code> and overrides some methods:</p>
<pre><code class="language-py">from django.core.management.base import BaseCommand, CommandError
class Command(BaseCommand):
    def add_arguments(self, parser):
        pass
    def handle(self, *args, **options):
        pass
</code></pre>
<p>Currently both of these are marked by ruff 0.5.0 as PLR6301 (https://docs.astral.sh/ruff/rules/no-self-use/).</p>
<p>I tell a lie: I copy pasted this &quot;minimal&quot; example into a new file and there is no warning üòÅ
However the moment I add actual code to the methods, the warnings show up:</p>
<pre><code class="language-py">from django.core.management.base import BaseCommand, CommandError
class Command(BaseCommand):
    def add_arguments(self, parser): 
        parser.add_argument(&quot;--id&quot;, required=True, type=int, help=&quot;Page id&quot;)

    def handle(self, *args, **options):
        pass
</code></pre>
<p>Out of curiosity I installed <code>pylint</code> and ran it on the file and it does not trigger this message...</p>
<pre><code>[tool.ruff]
line-length = 100

[tool.ruff.lint]
preview = true
select = [
    &quot;A&quot;,      # https://pypi.org/project/flake8-builtins/
    &quot;B&quot;,      # https://pypi.org/project/flake8-bugbear/
    &quot;C4&quot;,     # https://pypi.org/project/flake8-comprehensions/
    &quot;C90&quot;,    # https://pypi.org/project/mccabe/
    &quot;DJ&quot;,     # https://pypi.org/project/flake8-django/
    &quot;DTZ&quot;,    # https://pypi.org/project/flake8-datetimez/
    &quot;E&quot;, &quot;W&quot;, # https://pypi.org/project/pycodestyle/
    &quot;F&quot;,      # https://pypi.org/project/pyflakes/
    &quot;FURB&quot;,   # https://pypi.org/project/refurb/
    &quot;G&quot;,      # https://pypi.org/project/flake8-logging-format/
    &quot;I&quot;,      # https://pypi.org/project/isort/
    &quot;N&quot;,      # https://pypi.org/project/pep8-naming/
    &quot;PERF&quot;,   # https://pypi.org/project/perflint/
    &quot;PIE&quot;,    # https://pypi.org/project/flake8-pie/
    &quot;PL&quot;,     # https://pypi.org/project/pylint/
    &quot;PT&quot;,     # https://pypi.org/project/flake8-pytest-style/
    &quot;PTH&quot;,    # https://pypi.org/project/flake8-use-pathlib/
    &quot;RET&quot;,    # https://pypi.org/project/flake8-return/
    &quot;RUF&quot;,    # Ruff-specific rules
    &quot;S&quot;,      # https://pypi.org/project/flake8-bandit/
    &quot;SIM&quot;,    # https://pypi.org/project/flake8-simplify/
    &quot;UP&quot;,     # https://pypi.org/project/pyupgrade/
]
ignore = [&quot;RUF012&quot;]

[tool.ruff.lint.isort]
# Use a single line between direct and from import.
lines-between-types = 1
section-order = [&quot;future&quot;, &quot;standard-library&quot;, &quot;third-party&quot;, &quot;django&quot;, &quot;wagtail&quot;, &quot;first-party&quot;, &quot;local-folder&quot;]

[tool.ruff.lint.isort.sections]
# Group all Django imports into a separate section.
&quot;django&quot; = [&quot;django&quot;]
&quot;wagtail&quot; = [&quot;wagtail&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-07-04 04:51</div>
            <div class="timeline-body"><p>I think this is because we're missing a check for method overrides from the base class which is done by Pylint (https://github.com/pylint-dev/pylint/blob/c8351395008e586170b0dda680594ba29b8fe0ef/pylint/extensions/no_self_use.py#L90).</p>
<p>We could possibly add this check with the current semantic model but it will only work if the base class is in the same file. In your case, it's being imported from another module which will require multifile analysis.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @dhruvmanila on 2024-07-04 04:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">multifile-analysis</span> added by @dhruvmanila on 2024-07-04 04:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "PLR6301 false positives" to "`PLR6301` doesn't consider base class methods" by @dhruvmanila on 2024-07-04 04:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/minusf">@minusf</a> on 2024-07-04 08:01</div>
            <div class="timeline-body"><p>Thank you for the quick analysis. This rule is clearly in preview mode, but in my understanding until multifile analysis is being done, even simple cases like this will be false positives. What is ruff's rule policy for these cases?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-04 12:22</div>
            <div class="timeline-body"><p>The general suggestion for now is to mark such methods as overrides: https://play.ruff.rs/d0b3d8f4-1706-4a22-b19f-ea28c7acaacc</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by @MichaReiser on 2024-10-24 14:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">multifile-analysis</span> removed by @MichaReiser on 2024-10-24 14:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DaniBodor">@DaniBodor</a> on 2025-01-15 12:13</div>
            <div class="timeline-body"><p>I ran into something similar with a class that immediately raises a <code>NotImplementedError</code>.
I've previously raised a similar issue (#12427) and there it was fixed using some generic definition of a &quot;base class stub&quot;. I wonder whether that same definition could be used to determine when to flag PLR6301 and when not to.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/spaceone">@spaceone</a> on 2025-08-11 22:21</div>
            <div class="timeline-body"><p>I have the same issue with a different library.
I would like to just add a <code># noqa: PLR6301</code> to the whole class:</p>
<pre><code class="language-python3">class Command(BaseCommand):  # noqa: PLR6301
    def add_arguments(self, parser): 
        print(1)

    def handle(self, *args, **options):
        print(2)
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:17 UTC
    </footer>
</body>
</html>
