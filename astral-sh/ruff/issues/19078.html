<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature: Support iSort's import Multi Line Output Mode 2 - Hanging Indent - astral-sh/ruff #19078</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Feature: Support iSort&#x27;s import Multi Line Output Mode 2 - Hanging Indent</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/19078">#19078</a>
        opened by <a href="https://github.com/Bengt">@Bengt</a>
        on 2025-07-01 21:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Bengt">@Bengt</a></div>
            <div class="timeline-body">Summary
<p>I want to optimize my ruff configuration to generate minimal diffs. This makes reviewing changesets easier as there is less scrolling distance, especially when handling codebases with many small files and therefore many imports. To get single-line diffs for single-line changes, I want to use one line per import:</p>
<pre><code>from utils import func1
from utils import func2
</code></pre>
<p>I can achieve that today by setting <code>force-single-line = true</code> in my PyProject.toml under <code>[tool.ruff.lint.isort]</code>. However, this breaks, when I have long distribution, package, module, or function names like so:</p>
<pre><code>from my_long_distribution_name.my_long_package_name.my_long_module_name import my_long_function_name
</code></pre>
<p>Ruff will format this like so, generating a 3-line diff:</p>
<pre><code>from my_long_distribution_name.my_long_package_name.my_long_module_name import (
    my_long_function_name,
)
</code></pre>
<p>This is a pity, as the diff would only need to be two lines if ruff supported isort&#x27;s mode 2 &quot;Hanging Indent&quot;:</p>
<pre><code>from my_long_distribution_name.my_long_package_name.my_long_module_name import \
    my_long_function_name
</code></pre>
<p>Note that implementing this is a bit tricky, as we need to adhere to the line length while inserting the backslash character. The above line is fine with ruff&#x27;s default line length of 88 characters, as it is 81 characters long. If one were to set <code>line-length = 80</code> under <code>[tool.ruff]</code> in <code>pyproject.toml</code>, the correct solution would be to split the line before the <code>import</code>:</p>
<pre><code>from my_long_distribution_name.my_long_package_name.my_long_module_name \
    import my_long_function_name
</code></pre>
<p>If I were to set <code>line-length = 73</code>, we would even need to break the line at the dot operator before the module name:</p>
<pre><code>from my_long_distribution_name.my_long_package_name.\
    my_long_module_name import my_long_function_name
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Bengt">@Bengt</a> on 2025-07-01 21:29</div>
            <div class="timeline-body"><p>There is also an open request for more general support of isort&#x27;s import multi line output mode: <a href="https://github.com/astral-sh/ruff/issues/2600">astral-sh/ruff#2600</a></p>
<p>This is my case for supporting mode 2 in particular, as it combines nicely with ruff&#x27;s preexisting <code>force-single-line</code> option.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Bengt">@Bengt</a> on 2025-07-01 21:45</div>
            <div class="timeline-body"><p>As a workaround, one can deactivate ruff&#x27;s import sorting rules and configure isort to do the same in <code>pyproject.toml</code>:</p>
<pre><code>[tool.isort]
multi_line_output = 2
force_single_line = true

[tool.ruff.lint]
ignore = [
    &quot;I001&quot;,
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-01 22:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-01 22:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-07 13:01</div>
            <div class="timeline-body"><p>Your desired style, unfortunately, is incompatible with the formatter. It reformats</p>
<pre><code>from my_long_distribution_name.my_long_package_name.my_long_module_name import \
    my_long_function_name
</code></pre>
<p>to</p>
<pre><code>from my_long_distribution_name.my_long_package_name.my_long_module_name import (
    my_long_function_name,
)

</code></pre>
<p>This makes it very unlikely that we&#x27;ll support this mode (tool compatibility is important to us).</p>
<p>I&#x27;ll merge this into <a href="https://github.com/astral-sh/ruff/issues/2600">astral-sh/ruff#2600</a> as it asks for a sub feature of it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-07 13:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:11 UTC
    </footer>
</body>
</html>
