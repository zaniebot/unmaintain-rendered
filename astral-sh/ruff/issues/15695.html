<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] Explore alternative notation for declaring file names in mdtests - astral-sh/ruff #15695</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] Explore alternative notation for declaring file names in mdtests</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/15695">#15695</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2025-01-23 17:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-23 17:15</div>
            <div class="timeline-body"><h3>Description</h3>
<p>Our mdtest framework allows multifile tests. The file's path is declared as an attribute in the code snippet:</p>
<pre><code>```pyi path=/typeshed/stdlib/builtins.pyi
class Custom: ...

custom_builtin: Custom
```
</code></pre>
<p>The downside of this is that the paths arent visible when rendering the markdown file on Github, which makes it harder to understand the test.</p>
<p><img src="https://github.com/user-attachments/assets/d0124b42-5919-4b5d-9228-1826df6f6ffe" alt="Image" /></p>
<p>We should explore if there are other notations for specifying a file's path that is visible when rendered on GitHub. We probably want to support both notations (the old and new one) for now to avoid having to rewrite all tests.</p>
<p>E.g. we could use a bold text right before a code snippet as the file path.</p>
<pre><code>**/typeshed/stdlib/builtins.pyi**

```pyi
class Custom: ...

custom_builtin: Custom
```
</code></pre>
<p>The ideal solution would be if we can get GitHub to render the file's attributes because even the information that it is a <code>pyi</code> file is relevant.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @MichaReiser on 2025-01-23 17:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by @MichaReiser on 2025-01-23 17:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @MichaReiser on 2025-01-23 17:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-23 17:29</div>
            <div class="timeline-body"><p>Github feature request https://github.com/orgs/community/discussions/77414</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/15704.html">astral-sh/ruff#15704</a> on 2025-01-24 00:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-01-24 11:44</div>
            <div class="timeline-body"><p>Another thing to keep in mind is that the original plan for MDTests envisioned other metadata fields besides <code>path=</code>. Like <code>stage=</code> if we ever want to write tests for incremental computation:</p>
<p>https://github.com/astral-sh/ruff/blob/7778d1d64631cef107e98b634d2899d4cf0aab0b/crates/red_knot_test/README.md?plain=1#L407-L410</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/15890.html">astral-sh/ruff#15890</a> on 2025-02-02 23:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sharkdp on 2025-02-04 07:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:15 UTC
    </footer>
</body>
</html>
