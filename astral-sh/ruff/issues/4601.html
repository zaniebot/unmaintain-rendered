<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blanket opt-in to nursery rules possible? - astral-sh/ruff #4601</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Blanket opt-in to nursery rules possible?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/4601">#4601</a>
        opened by <a href="https://github.com/ThiefMaster">@ThiefMaster</a>
        on 2023-05-23 13:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ThiefMaster">@ThiefMaster</a></div>
            <div class="timeline-body"><p>When converting my <a href="https://raw.githubusercontent.com/indico/indico/master/.flake8">flake8 config</a> using <code>flake8-to-ruff</code>, I got some warnings about unsupported options, one of them being <code>E265</code>. But it turned out that these rules are in fact supported, just considered &quot;beta&quot; quality and thus in nursery (if i understood its purpose correctly).</p>
<p>Having an existing project where flake8 passes with no warnings, I obviously do not want to lose functionality. On the other hand, I&#x27;d be perfectly fine with the occasional false positive due to a bug in a nursery rule.</p>
<p>I DO NOT want to manually build a list of all flake8 rules and list them explicitly in the config file. This would be ugly and cumbersome to maintain.</p>
<p>Something like this would be great:</p>
<ul>
<li><code>enable_nursery = true</code> setting which simply enables all nursery rules as long as their category (e.g. <code>E</code>) is selected.</li>
<li>something like <code>select = [&#x27;E!&#x27;]</code> with the <code>!</code> enabling nursery rules for that category. Probably more work to implement but also more flexible.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-23 14:38</div>
            <div class="timeline-body"><p>I totally understand why the current nursery setup is inconvenient but I think I&#x27;d rather focus on elevating rules out of the nursery category rather than improving support for enabling nursery rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ThiefMaster">@ThiefMaster</a> on 2023-05-23 14:51</div>
            <div class="timeline-body"><p>Wouldn&#x27;t such a setting help with this though?</p>
<p>People are lazy, and they often don&#x27;t even install prereleases of libraries to test against them - but having to opt into into many rules individually just means that there are even fewer people testing them, making it more likely that bugs only show up later when they leave nursery, kind of defeating its purpose!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-23 14:56</div>
            <div class="timeline-body"><p>Yeah, some kind of nursery flag would help! I would support its existence, probably. I&#x27;m just conveying the sentiment that every ask has to be prioritized given infinite scope and limited time, so I&#x27;m unlikely to work on this myself.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-23 14:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ThiefMaster">@ThiefMaster</a> on 2023-05-23 14:59</div>
            <div class="timeline-body"><p>Got any pointers? Never wrote Rust code beyond a little bit of playing around a year or two ago, but might be a nice thing to give it a try!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-24 02:48</div>
            <div class="timeline-body"><p>@ThiefMaster - Thank you so much for asking :) Honestly part of the reason I&#x27;m hesitant is that it&#x27;s not trivial to do, and I&#x27;m not actually sure how we would implement it. The &quot;rule selector&quot; stuff is very macro heavy and can be difficult to reason about (we want to change this), plus it also tends to require that all the various rule selectors are defined at compile time and not at runtime.</p>
<p>(Defining all this stuff at compile time does have some benefits, e.g., we accept <code>--select E265</code> on the CLI, via autocomplete, and in the JSON schema, but not <code>--select E26</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-05 02:26</div>
            <div class="timeline-body"><p>We added a <code>NURSERY</code> selector in #4852, so you can do <code>--select NURSERY</code> or add it to your pyproject.toml&#x27;s <code>select</code> field.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-05 02:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:36 UTC
    </footer>
</body>
</html>
