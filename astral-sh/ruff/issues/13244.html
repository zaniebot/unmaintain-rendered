<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Why D103 complains about docstring with f-string? - astral-sh/ruff #13244</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Why D103 complains about docstring with f-string?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/13244">#13244</a>
        opened by <a href="https://github.com/alanwilter">@alanwilter</a>
        on 2024-09-04 14:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/alanwilter">@alanwilter</a> on 2024-09-04 14:16</div>
            <div class="timeline-body"><pre><code class="language-python">boo = 'hello'
def foo()-&gt;None:
    f&quot;&quot;&quot;{boo} world!&quot;&quot;&quot;
    return
</code></pre>
<p><code>Missing docstring in public function (Ruff</code> <a href="https://docs.astral.sh/ruff/rules/undocumented-public-function"><code>D103</code></a>)</p>
<p>Or is there a &quot;proper&quot; way to do this otherwise?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-04 14:59</div>
            <div class="timeline-body"><p>F-strings aren't considered docstrings according to Python:</p>
<pre><code class="language-shell">&gt;&gt;&gt; def foo()-&gt;None:
...     f&quot;&quot;&quot;{boo} world!&quot;&quot;&quot;
...     return
... 
&gt;&gt;&gt; foo.__doc__
&gt;&gt;&gt; def bar() -&gt; None:
...     &quot;&quot;&quot;Hello world!&quot;&quot;&quot;
...     return
... 
&gt;&gt;&gt; bar.__doc__
'Hello world!'
</code></pre>
<p>So the rule here is correct.</p>
<p>I don't know if there's an idiomatic way to set a dynamic function's docstring at runtime.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-09-04 14:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alanwilter">@alanwilter</a> on 2024-09-04 15:03</div>
            <div class="timeline-body"><p>But what about templates for docstrings? In my case I make use of variables point to file name that may change. Going replacing in every docstring seems nonsense.
Anyway, I will silence D103 in code base for those cases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-04 15:06</div>
            <div class="timeline-body"><p>As I said, I don't know how to do dynamic docstrings. Maybe take a look at <a href="https://stackoverflow.com/questions/2693883/dynamic-function-docstring">this StackOverflow thread</a>.</p>
<p>You can keep using f-strings. Just keep in mind that those are not docstrings and won't show up as documentation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-09-04 15:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-09-05 06:29</div>
            <div class="timeline-body"><blockquote>
<p>But what about templates for docstrings? In my case I make use of variables point to file name that may change. Going replacing in every docstring seems nonsense.</p>
</blockquote>
<p>As far as I know, this can only be done by manually setting the <code>__doc__</code> attribute on the object that you're trying to add documentation for. So, in your example:</p>
<pre><code>&gt;&gt;&gt; def foo() -&gt; None:
...     return
... 
&gt;&gt;&gt; boo = 'hello'
&gt;&gt;&gt; foo.__doc__ = f&quot;{boo} world!&quot;
&gt;&gt;&gt; help(foo)
Help on function foo in module __main__:

foo() -&gt; None
    hello world!
</code></pre>
<p>I know Pandas does it a lot and they even have a decorator for it: https://github.com/pandas-dev/pandas/blob/bc9b1c3c4b979978dcdef42b900aa633cfeee28e/pandas/util/_decorators.py#L342-L400. I think even NumPy does it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alanwilter">@alanwilter</a> on 2024-09-05 08:50</div>
            <div class="timeline-body"><p>Cool suggestion @dhruvmanila, that sorted my issues.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:53 UTC
    </footer>
</body>
</html>
