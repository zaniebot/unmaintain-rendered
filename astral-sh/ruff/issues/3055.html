<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RET505 False Positive - astral-sh/ruff #3055</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>RET505 False Positive</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/3055">#3055</a>
        opened by <a href="https://github.com/jasonwashburn">@jasonwashburn</a>
        on 2023-02-20 11:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jasonwashburn">@jasonwashburn</a></div>
            <div class="timeline-body">

<p>Seems like <code>RET505</code> has come up in issues a few times before, but I seem to be getting false positives as well. Here is a pretty simple example of a code snippet that provokes the error.</p>
<pre><code>def is_even(value: int) -&gt; bool:
    &quot;&quot;&quot;Check if a value is even.&quot;&quot;&quot;
    if value % 2 == 0:
        print(f&quot;{value} is even&quot;)
        return True
    else:
        print(f&quot;{value} is odd&quot;)
        return False
</code></pre>
<p>When running ruff with the defaults (no config file) and adding select for RET505 produces the following:</p>
<pre><code>❯ ruff --select=RET505 false_positive.py
false_positive.py:6:5: RET505 Unnecessary `else` after `return` statement
Found 1 error.
</code></pre>
<pre><code>❯ ruff --version        
ruff 0.0.247
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-20 14:47</div>
            <div class="timeline-body"><p>I believe this is actually working as intended -- it wants you to do:</p>
<pre><code>def is_even(value: int) -&gt; bool:
    &quot;&quot;&quot;Check if a value is even.&quot;&quot;&quot;
    if value % 2 == 0:
        print(f&quot;{value} is even&quot;)
        return True

    print(f&quot;{value} is odd&quot;)
    return False
</code></pre>
<p>Since that code is equivalent: if the number is even, it&#x27;ll hit the <code>if</code>, then <code>return</code> at the end of the <code>if</code> block. So the <code>else</code> isn&#x27;t necessary.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-20 14:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jasonwashburn">@jasonwashburn</a> on 2023-02-20 15:06</div>
            <div class="timeline-body"><p>ugh...you&#x27;re right...lol, it&#x27;s so simple I looked right past that...that&#x27;s what I get for validating/submitting an issue before my second cup of coffee...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-20 15:08</div>
            <div class="timeline-body"><p>Haha no it’s all good! These rules can be hard to reason about.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:33 UTC
    </footer>
</body>
</html>
