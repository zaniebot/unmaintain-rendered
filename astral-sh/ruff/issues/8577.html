<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Panic] capacity overflow in `raw_vec` - astral-sh/ruff #8577</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Panic] capacity overflow in <code>raw_vec</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8577">#8577</a>
        opened by <a href="https://github.com/superosku">@superosku</a>
        on 2023-11-09 07:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/superosku">@superosku</a></div>
            <div class="timeline-body"><p>Hi!</p>
<p>Opening an issue since ruff asked me to. Here is the error and stack trace:</p>
<pre><code>
error: Ruff crashed. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BPanic%5D

...quoting the executed command, along with the relevant file contents and `pyproject.toml` settings, we'd be very appreciative!

thread '&lt;unnamed&gt;' panicked at library/alloc/src/raw_vec.rs:534:5:
capacity overflow
stack backtrace:
   0:        0x1053dfbc0 - _rust_eh_personality
   1:        0x104d03668 - _main
   2:        0x1053b5770 - _rust_eh_personality
   3:        0x1053e131c - _rust_eh_personality
   4:        0x1053e0f44 - _rust_eh_personality
   5:        0x1053e0bdc - _rust_eh_personality
   6:        0x104f79788 - _main
   7:        0x1053e1bec - _rust_eh_personality
   8:        0x1053e198c - _rust_eh_personality
   9:        0x1053e1920 - _rust_eh_personality
  10:        0x1053e1914 - _rust_eh_personality
  11:        0x10546503c - __rjem_je_witnesses_cleanup
  12:        0x104c9af60 - _main
  13:        0x10546680c - __rjem_je_witnesses_cleanup
  14:        0x104f3b10c - _main
  15:        0x104f39014 - _main
  16:        0x104f36df8 - _main
  17:        0x104f364c0 - _main
  18:        0x104f372cc - _main
  19:        0x104f36464 - _main
  20:        0x104f372cc - _main
  21:        0x104f36464 - _main
  22:        0x104f372cc - _main
  23:        0x104f36464 - _main
  24:        0x104f372cc - _main
  25:        0x104f36464 - _main
  26:        0x104f372cc - _main
  27:        0x104f36464 - _main
  28:        0x104f372cc - _main
  29:        0x104f37ac4 - _main
  30:        0x10546de6c - __rjem_je_witnesses_cleanup
  31:        0x104e26a38 - _main
  32:        0x104e2680c - _main
  33:        0x1053e3918 - _rust_eh_personality
  34:        0x192293fa8 - __pthread_joiner_wake

</code></pre>
<p>And the command is <code>ruff check .</code></p>
<p>I can get it back working by removing the .ruff_cache folder</p>
<p>And <code>ruff --version</code> shows <code>ruff 0.1.4</code>. I did not see anything related to this being fixed in the changelof of <code>0.1.5</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[Panic]" to "[Panic] capacity overflow in `raw_vec`" by @zanieb on 2023-11-09 14:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-09 14:53</div>
            <div class="timeline-body"><p>Thanks for the report! Perhaps related to #8147</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2023-11-09 14:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-11-27 07:48</div>
            <div class="timeline-body"><p>I believe it's safe to say that this is the same as #8147 considering that deleting the cache folder fixes the issue.</p>
<p>Closing as duplicate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2023-11-27 07:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:48:57 UTC
    </footer>
</body>
</html>
