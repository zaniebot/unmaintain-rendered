<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suppress isort for single import line - astral-sh/ruff #11832</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Suppress isort for single import line</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11832">#11832</a>
        opened by <a href="https://github.com/bloodgain">@bloodgain</a>
        on 2024-06-10 21:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bloodgain">@bloodgain</a></div>
            <div class="timeline-body"><p>Is is possible to tell ruff to ignore a single line for isort plugin sorting?</p>
<p>Currently, it appears that ruff can&#x27;t process <code># noqa: I001</code> for single lines. The only way I have found to disable import sorting at all in a file is to place <code># ruff: noqa: I001</code> before the first import, which ignores <code>unsorted-imports</code> for the entire file.</p>
<p>Example:</p>
<pre><code># ruff: noqa: I001 &lt;-- ignores import sorting for whole file, and must start with &quot;ruff:&quot;, which isn&#x27;t ideal
import os
import shutil
from time import time

import ray
# ... more RLlib import stuff

# local imports
from customModels import BaseCustomPPO
# ... etc.

# must be imported out of order due to GLIBCXX error with matplotlib
# noqa: I001 &lt;-- not respected here
import pandas as pd  # noqa: I001 &lt;-- not respected here, either
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-10 21:47</div>
            <div class="timeline-body"><p>You need to put <code># noqa: I001</code> on the first line of the import <em>block</em> (i.e., the first line of the violation).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bloodgain">@bloodgain</a> on 2024-06-10 23:27</div>
            <div class="timeline-body"><p>Unfortunately, it appears that it always triggers on the first place it thinks <code>import</code> is out-of-order, even with the intentional out-of-order import in a separate block with a <code># noqa</code> guard. Using <code>--fix</code> results in it moving the <code>noqa</code> guard comment with the import.</p>
<p>Full import example (I let ruff sort the other imports to narrow the problem.):
<strong>BEFORE</strong></p>
<pre><code>import os
import shutil
from time import time

import ray

ray.init(local_mode=True)
import wsf_python as alt_sim
from ray.rllib.algorithms.algorithm import Algorithm
from ray.rllib.models import ModelCatalog

from customModels import BaseCustomPPO
from models import getModel
from utilities import CSVLogging, orderData, registerRLLib

# noqa: I001
import pandas as pd  #must be imported out of order due to GLIBCXX error with matplotlib
</code></pre>
<p><strong>CHECK</strong></p>
<pre><code>&gt;$ ruff check --select=I001 ./reinforcementLearning/evaluate.py
reinforcementLearning\evaluate.py:8:1: I001 [*] Import block is un-sorted or un-formatted
Found 1 error.
[*] 1 fixable with the `--fix` option.
</code></pre>
<p><strong>AFTER <code>--fix</code></strong></p>
<pre><code>import os
import shutil
from time import time

import ray

ray.init(local_mode=True)
# noqa: I001
import pandas as pd  #must be imported out of order due to GLIBCXX error with matplotlib
import wsf_python as alt_sim
from ray.rllib.algorithms.algorithm import Algorithm
from ray.rllib.models import ModelCatalog

from customModels import BaseCustomPPO
from models import getModel
from utilities import CSVLogging, orderData, registerRLLib
</code></pre>
<p>Changing the guard comment to <code># ruff: noqa: I001</code> ignores the rule for the whole file, even though it&#x27;s below the other imports.</p>
<p>NOTE: I am not assuming this is a bug, just an artifact of how isort/ruff.lint.isort operates. I couldn&#x27;t find any examples for ignoring a single out-of-order import, so I thought this was the best place to find out if I missed the correct way to do it or it wasn&#x27;t possible.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-06-11 06:13</div>
            <div class="timeline-body"><p>Assuming that you <em>just</em> want to ignore the <code>pandas</code> import, can you try it with <code>isort: skip</code>?</p>
<pre><code>import os
import shutil
from time import time

import ray

ray.init(local_mode=True)
import wsf_python as alt_sim
from ray.rllib.algorithms.algorithm import Algorithm
from ray.rllib.models import ModelCatalog

from customModels import BaseCustomPPO
from models import getModel
from utilities import CSVLogging, orderData, registerRLLib

import pandas as pd  # isort: skip  # must be imported out of order due to GLIBCXX error with matplotlib	
</code></pre>
<p>This works for me locally.</p>
<p>The <code>noqa: I001</code> comment should be at the start of the import block which would be:</p>
<pre><code>import os
import shutil
from time import time

import ray

ray.init(local_mode=True)
import wsf_python as alt_sim  # noqa: I001
from ray.rllib.algorithms.algorithm import Algorithm
from ray.rllib.models import ModelCatalog

from customModels import BaseCustomPPO
from models import getModel
from utilities import CSVLogging, orderData, registerRLLib

import pandas as pd  # must be imported out of order due to GLIBCXX error with matplotlib	
</code></pre>
<p>But, this would ignore the entire block which includes all the imports after <code>ray.init</code> call. The <code>noqa</code> comment cannot be on its own line either.</p>
<p>Reference: https://docs.astral.sh/ruff/linter/#error-suppression</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-06-11 06:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bloodgain">@bloodgain</a> on 2024-06-11 18:43</div>
            <div class="timeline-body"><p>@dhruvmanila
Ah, so! That works!</p>
<p>Exactly what we needed. Thank you very much! üòäüôè</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-11 23:33</div>
            <div class="timeline-body"><p>Thank you @dhruvmanila!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-11 23:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:54 UTC
    </footer>
</body>
</html>
