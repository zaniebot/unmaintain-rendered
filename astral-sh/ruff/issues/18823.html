<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>conflict between RUF100 and PGH003 - astral-sh/ruff #18823</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>conflict between RUF100 and PGH003</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18823">#18823</a>
        opened by <a href="https://github.com/MarcelWilson">@MarcelWilson</a>
        on 2025-06-20 15:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MarcelWilson">@MarcelWilson</a></div>
            <div class="timeline-body">Summary
<p>ruff 0.12.0 incorrectly triggers <code>RUF100 [*] Unused `noqa` directive (unused: `PGH003`)</code> on the following line at the top of a file (using <code>ruff check .</code>)</p>
<pre><code># ruff: noqa: PGH003 type: ignore
</code></pre>
Version
<p>0.12.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-20 16:28</div>
            <div class="timeline-body"><p>Does that <code>type: ignore</code> comment work? I tested this in the <a href="https://play.ty.dev/0fbab10e-f3b1-413d-a0a7-b74b93a08ca5">ty</a> and <a href="https://pyright-play.net/?pythonVersion=3.8&amp;strict=true&amp;enableExperimentalFeatures=true&amp;reportImplicitOverride=true&amp;reportShadowedImports=true&amp;reportUnusedCallResult=true&amp;code=MQAgTgrgZlBcIDsD2BHAhvACgcQBIAZ8BmEAFwE8AHAU3gEsBzZMagKAA96FSQBeEAEQBnAUA">pyright</a> playgrounds, and it doesn&#x27;t appear to work, i.e. the typing diagnostic still appears unless I remove the <code>ruff: noqa: PGH003</code> part. I think both comments will work as intended on separate lines:</p>
<pre><code># type: ignore
# ruff: noqa: PGH003
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-20 16:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MarcelWilson">@MarcelWilson</a> on 2025-06-20 18:03</div>
            <div class="timeline-body"><p>Last I checked <code># type: ignore</code> tells mypy to ignore the file (unless that&#x27;s changed recently).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MarcelWilson">@MarcelWilson</a> on 2025-06-20 18:09</div>
            <div class="timeline-body"><blockquote>
<p>I think both comments will work as intended on separate lines:</p>
</blockquote>
<p>Ahh, you&#x27;re right, they do work that way.  I guess it&#x27;s unclear if this issue is actually a bug, then.   Should a single liner work the same way?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-20 18:18</div>
            <div class="timeline-body"><p>I&#x27;m also seeing the type error in the <a href="https://mypy-play.net/?mypy=latest&amp;python=3.12&amp;gist=9a75314564c4a339eada6cae33d165b9">mypy playground</a> and <a href="https://pyrefly.org/sandbox/?code=MQAgTgrgZlBcIDsD2BHAhvACgcQBIAZ8BmEAFwE8AHAU3gEsBzZMagKAA96FSQBeEAEQBnAUA">pyrefly playground</a>, so I think the single line form after the noqa isn&#x27;t parsed by any of these type checkers. I think that means PGH003 is correct not to trigger (no type errors are actually ignored by this comment) and thus the noqa is actually unused. So yeah, I think this is working as intended.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-06-20 20:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:07 UTC
    </footer>
</body>
</html>
