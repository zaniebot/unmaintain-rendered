<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>issue with requires-python  configuration option pyproject.toml  when using local install (pip -e) - astral-sh/ruff #15971</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>issue with requires-python  configuration option pyproject.toml  when using local install (pip -e)</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/15971">#15971</a>
        opened by <a href="https://github.com/justRishi">@justRishi</a>
        on 2025-02-05 14:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/justRishi">@justRishi</a> on 2025-02-05 14:18</div>
            <div class="timeline-body"><h3>Description</h3>
<p>list of keywords searched = requires-python  poetry pip</p>
<p>Refers to the configuration option documented here <a href="https://docs.astral.sh/ruff/tutorial/#configuration">ruff configuration</a> requires-python.
ruff version used = 0.8.6 in combination with poetry version = 1.8.5 on ubuntu 24.04</p>
<p>in pyproject.toml the following results in a problem when the project is used local in another python project using <code>pip install -e ../&lt;some-poetry- project&gt;</code> or `poetry run pip install -e <some-poetry-managed-project></p>
<pre><code>[project]
requires-python = &quot;&gt;=3.11&quot;
</code></pre>
<p>removing this(requires-python ) solves the problem, perhaps [project]  is invalid for pyproject.toml ?</p>
<p>relevant parts of pyproject.py</p>
<pre><code>[build-system]
requires = [&quot;poetry-core&gt;=1.0.0&quot;]
build-backend = &quot;poetry.core.masonry.api&quot;

[tool.poetry]
name = &quot;xxx&quot;

[project]
requires-python = &quot;&gt;=3.11&quot;
</code></pre>
<p>error stack is  (project name is not missing by the way) :</p>
<pre><code>  × Preparing editable metadata (pyproject.toml) did not run successfully.
  │ exit code: 1
  ╰─&gt; [17 lines of output]
      Traceback (most recent call last):
        File &quot;/home/rishi/ndw/dq-api/.venv/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 389, in &lt;module&gt;
          main()
        File &quot;/home/rishi/ndw/dq-api/.venv/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 373, in main
          json_out[&quot;return_val&quot;] = hook(**hook_input[&quot;kwargs&quot;])
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/home/rishi/ndw/dq-api/.venv/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 209, in prepare_metadata_for_build_editable
          return hook(metadata_directory, config_settings)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/tmp/pip-build-env-b04i3amd/overlay/lib/python3.12/site-packages/poetry/core/masonry/api.py&quot;, line 42, in prepare_metadata_for_build_wheel
          poetry = Factory().create_poetry(Path().resolve(), with_groups=False)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/tmp/pip-build-env-b04i3amd/overlay/lib/python3.12/site-packages/poetry/core/factory.py&quot;, line 59, in create_poetry
          raise RuntimeError(&quot;The Poetry configuration is invalid:\n&quot; + message)
      RuntimeError: The Poetry configuration is invalid:
        - project must contain ['name'] properties
      
      [end of output]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-02-05 16:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:54 UTC
    </footer>
</body>
</html>
