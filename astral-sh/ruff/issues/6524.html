<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`builtins-ignorelist` for attributes only - astral-sh/ruff #6524</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`builtins-ignorelist` for attributes only</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/6524">#6524</a>
        opened by <a href="https://github.com/benjamin-kirkbride">@benjamin-kirkbride</a>
        on 2023-08-12 18:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/benjamin-kirkbride">@benjamin-kirkbride</a> on 2023-08-12 18:02</div>
            <div class="timeline-body"><p>Looking at https://beta.ruff.rs/docs/rules/builtin-attribute-shadowing/#builtin-attribute-shadowing-a003: I agree with the point made here: https://stackoverflow.com/a/60423602/1342874</p>
<p>Specifically, I think that the following is fine, and in fact better than alternatives:</p>
<pre><code class="language-python">@dataclass
class Row:
    id: int
    input: str
</code></pre>
<p>but of course the following is not fine:</p>
<pre><code class="language-python">id, input = row.id, row.input
</code></pre>
<p>My understanding is that the <code>builtins-ignorelist</code> is all or nothing; it makes it so that you can us <code>id</code> everywhere without warning, or nowhere without warning.</p>
<p>My proposal is that there is a <code>builtins-attributes-ignorelist</code> or something similar added for this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-08-13 01:39</div>
            <div class="timeline-body"><p>Why not disable the rule entirely? It's intentionally categorized as a separate rule to enable that kind of granular on/off switch.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">waiting-on-author</span> added by @charliermarsh on 2023-08-13 01:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/benjamin-kirkbride">@benjamin-kirkbride</a> on 2023-08-13 01:48</div>
            <div class="timeline-body"><p>Fair question :sweat_smile:</p>
<p>I think there are some attributes that I would still want to list, like <code>str</code>, or <code>dict</code> or something, but I don't have a good argument for why I think that some things are okay (like <code>id</code>, <code>input</code>, <code>class</code>, etc) but others aren't..</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tylerlaprade">@tylerlaprade</a> on 2023-08-13 16:37</div>
            <div class="timeline-body"><p>I ran across this as well. I really don't want <code>type</code> to be used as a Django model attribute because if I accidentally use <code>type</code> instead of <code>self.type</code>, my code will be completely wrong, but I won't get any warnings. But <code>id</code> and <code>filter</code> seem generally harmless for my usecases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">waiting-on-author</span> removed by @charliermarsh on 2023-08-14 13:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2023-08-14 13:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Olegt0rr">@Olegt0rr</a> on 2023-09-05 06:24</div>
            <div class="timeline-body"><p>Just get  <code>A003 Class attribute exec is shadowing a python builtin</code> on a method.</p>
<pre><code class="language-python">class Foo:
    def exec(self):
        ...
</code></pre>
<p>It's not a shadowing, cause I still can use builtin <code>exec</code>.</p>
<pre><code class="language-python">class Foo:
    @staticmethod
    def exec():
        exec(&quot;print('it is not a shadowing')&quot;)

Foo.exec()

</code></pre>
<p>For me, shadowing is when an object covers the original object and confusion can occur when called.</p>
<pre><code class="language-python">def foo(exec: str):
    print(exec)
    ...
    # and the later you may want to call builtin exec, but you can't
    exec(&quot;print('it is a shadowing')&quot;)

foo('bar')
</code></pre>
<p>Also <code>readers may mistake the attribute for the builtin</code> is a very strange explanation.
My user has an id. And user's class should use it:</p>
<pre><code>class User:
    id: int
</code></pre>
<p><code>id_</code> - is ugly
<code>user_id</code> - is redundant and ugly, especially on call: <code>user.user_id</code></p>
<p>What's wrong with reader, who can mess <code>id()</code> and <code>user.id</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-05 11:28</div>
            <div class="timeline-body"><p>@Olegt0rr - That <em>is</em> working as intended but it's a strange rule. You can see an example of what it's intended to catch <a href="https://github.com/astral-sh/ruff/issues/4470">here</a>:</p>
<pre><code class="language-python">class C:
    @staticmethod
    def list() -&gt; None:
        pass

    @staticmethod
    def repeat(value: int, times: int) -&gt; list[int]:
        return [value] * times
</code></pre>
<p>The issue is that it <em>will</em> be shadowed if you reference the builtin within the class scope.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/9462.html">astral-sh/ruff#9462</a> on 2024-01-11 02:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-01-11 02:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-11 02:35</div>
            <div class="timeline-body"><p>PR up that should make this rule <em>far</em> more useful by only flagging actual shadowed reads (like in the example above) rather than the method definitions (which will almost always be fine): https://github.com/astral-sh/ruff/pull/9462</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-01-11 17:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:08 UTC
    </footer>
</body>
</html>
