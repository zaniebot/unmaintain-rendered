<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Non-partity between ruff's Q002 and pylint's C0198 (bad-docstring-quotes) - astral-sh/ruff #12637</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Non-partity between ruff's Q002 and pylint's C0198 (bad-docstring-quotes)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12637">#12637</a>
        opened by <a href="https://github.com/nwiltsie">@nwiltsie</a>
        on 2024-08-02 17:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nwiltsie">@nwiltsie</a> on 2024-08-02 17:28</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>#970 reports that pylint's <a href="https://pylint.readthedocs.io/en/stable/user_guide/messages/convention/bad-docstring-quotes.html">C0198</a> / <code>bad-docstring-quotes</code> rule has been implemented as ruff's <a href="https://docs.astral.sh/ruff/rules/bad-quotes-docstring/">Q002</a>. However, Q002 only checks that triple-quoted docstrings use the appropriate symbol; C0198 <em>also</em> checks that docstrings are triple-quoted.</p>
<p>Using this as an example...</p>
<pre><code class="language-python">&quot;This is a bad docstring&quot;

class MyError(Exception):
    '''This is also a bad docstring'''
</code></pre>
<pre><code class="language-console">$ pylint --version
pylint 3.2.2
astroid 3.2.2
Python 3.11.4 | packaged by conda-forge | (main, Jun 10 2023, 18:08:41) [Clang 15.0.7 ]
$ pylint demo.py
************* Module demo
demo.py:1:0: C0198: Bad docstring quotes in module, expected &quot;&quot;&quot;, given &quot; (bad-docstring-quotes)
demo.py:3:0: C0198: Bad docstring quotes in class, expected &quot;&quot;&quot;, given ''' (bad-docstring-quotes)

------------------------------------------------------------------
Your code has been rated at 0.00/10 (previous run: 0.00/10, +0.00)
</code></pre>
<pre><code class="language-console">$ ruff --version
ruff 0.5.5
$ ruff check demo.py --isolated --config 'lint.select = [&quot;Q&quot;]'
demo.py:4:5: Q002 [*] Single quote docstring found but double quotes preferred
  |
3 | class MyError(Exception):
4 |     '''This is also a bad docstring'''
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ Q002
  |
  = help: Replace single quotes docstring with double quotes

Found 1 error.
[*] 1 fixable with the `--fix` option.
</code></pre>
<hr />
<p>Other keywords I couldn't find results for:</p>
<ul>
<li>docstring single quote</li>
<li>add triple quote</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-02 21:40</div>
            <div class="timeline-body"><p>I believe that's enforced by <a href="https://docs.astral.sh/ruff/rules/triple-single-quotes/"><code>D300</code></a>. Does that work for your use-case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-02 21:40</div>
            <div class="timeline-body"><p>https://play.ruff.rs/6253b93e-ac15-4a95-a745-7e467f451e66</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-08-02 21:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">docstring</span> added by @charliermarsh on 2024-08-02 21:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nwiltsie">@nwiltsie</a> on 2024-08-05 16:24</div>
            <div class="timeline-body"><p>@charliermarsh Spectacular, that solves it! Thank you!</p>
<p>Leaving notes for my future self stumbling across this again:</p>
<ul>
<li>There's a difference between <code>ruff format</code> and <code>ruff check --fix</code> (https://github.com/astral-sh/ruff/discussions/9048)</li>
<li>The formatter won't add the triple-quotes (<a href="https://play.ruff.rs/6253b93e-ac15-4a95-a745-7e467f451e66?secondary=Format">example</a>).</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @nwiltsie on 2024-08-05 16:24</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:32 UTC
    </footer>
</body>
</html>
