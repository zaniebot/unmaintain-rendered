<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UP007 should leave type aliases alone - astral-sh/ruff #2981</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UP007 should leave type aliases alone</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2981">#2981</a>
        opened by <a href="https://github.com/aberres">@aberres</a>
        on 2023-02-17 12:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/aberres">@aberres</a></div>
            <div class="timeline-body"><p>Given the following snippet, <code>ruff</code> should not throw an error. At least this is the behavior of <code>pyupgrade</code>.</p>
<p>There are cases where one still needs an explicit <code>Optional</code>. See https://github.com/tiangolo/typer/issues/348 / https://github.com/tiangolo/typer/issues/348#issuecomment-1337460105 for an example.</p>
<h3>Code</h3>
<pre><code>from __future__ import annotations

from typing import Optional

StrOrNone = Optional[str]
</code></pre>
<h3>Output</h3>
<pre><code>up007.py:6:13: UP007 [*] Use `X | Y` for type annotations
Found 1 error.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-17 13:43</div>
            <div class="timeline-body"><p>Ah that's interesting. I think we used to <em>not</em> change this (following pyupgrade), but I didn't see a good reason not to, and changed it. We can revert.</p>
<p>Note that pyupgrade <em>will</em> fix these cases:</p>
<pre><code class="language-py">from __future__ import annotations

from typing import List

StrOrNone = List[str]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">autofix</span> added by @charliermarsh on 2023-02-17 13:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/twoertwein">@twoertwein</a> on 2023-02-17 14:36</div>
            <div class="timeline-body"><p>might be wrong: I think this was just a limitation of mypy&lt;1.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/aberres">@aberres</a> on 2023-02-17 15:15</div>
            <div class="timeline-body"><p>To have some more context, the use case for me is like this:</p>
<p><img src="https://user-images.githubusercontent.com/20811121/219692758-215a1a37-a8f4-4ee2-87d8-3512bf9767f6.png" alt="image" /></p>
<p>Without the indirection <code>pyupgrade</code> modernizes the code as expected, and <code>typer</code> fails.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-17 23:47</div>
            <div class="timeline-body"><p>Yeah that makes sense.</p>
<p>Is there any sense for when https://github.com/tiangolo/typer/pull/522 would be merged?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-24 22:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:46:33 UTC
    </footer>
</body>
</html>
