<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature not working (Feature request: Ignore specific rule on per file basis via in-file comment #2446) - astral-sh/ruff #21630</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Feature not working (Feature request: Ignore specific rule on per file basis via in-file comment #2446)</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/21630">#21630</a>
        opened by <a href="https://github.com/red8888">@red8888</a>
        on 2025-11-25 17:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/red8888">@red8888</a> on 2025-11-25 17:49</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Feature allows for inline file level ignores, without having to use <code>per-file-ignores</code> but it doesn't work.</p>
<p>When I add <code># ruff: noqa: XXX</code> at top or bottom of the file it is not applied and its flag as an used rule (RUF100).</p>
<p>Was this feature actually rolled out? I'm using the vs code extension</p>
<h3>Version</h3>
<p>vscode extension version: Version 2025.30.0, The extension ships with ruff==0.14.6</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-25 17:53</div>
            <div class="timeline-body"><p>Yes, file-level suppressions have been rolled out for quite a while now.</p>
<p>Can you share an example that isn't working for you?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-11-25 17:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-11-25 19:21</div>
            <div class="timeline-body"><p>If you are getting <a href="https://docs.astral.sh/ruff/rules/unused-noqa/#unused-noqa-ruf100">unused-noqa (RUF100)</a> it means that there is no need for the noqa directive because the suppressed diagnostic doesn't actually occur in that file. In other words: I suspect that in your example the <code># ruff: noqa: XXX</code> is not necessary.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/red8888">@red8888</a> on 2025-12-05 18:59</div>
            <div class="timeline-body"><blockquote>
<p>If you are getting <a href="https://docs.astral.sh/ruff/rules/unused-noqa/#unused-noqa-ruf100">unused-noqa (RUF100)</a> it means that there is no need for the noqa directive because the suppressed diagnostic doesn't actually occur in that file. In other words: I suspect that in your example the <code># ruff: noqa: XXX</code> is not necessary.</p>
</blockquote>
<p>Not the case. For example note below screenshot these classes raise <code>Missing docstring in public classRuff[D101](https://docs.astral.sh/ruff/rules/undocumented-public-class)</code></p>
<p>I throw <code># noqa: D101</code> at the top of the file OR the bottom of the file and its flagged as unused and removed on save. Putting it inline is the only way to suppress the ruff warning.</p>
<p>This should be an easy reproducible example if this works for you then perhaps there is some mis-config in my editor.</p>
<p><img width="562" height="321" alt="Image" src="https://github.com/user-attachments/assets/cdb871e1-6000-40a1-ac96-3b8a9f43dcf7" /></p>
<p><img width="695" height="316" alt="Image" src="https://github.com/user-attachments/assets/e31e8ac9-9edc-4091-b06f-d05a119d7bfb" /></p>
<p><img width="556" height="277" alt="Image" src="https://github.com/user-attachments/assets/436215ea-bf13-40f1-95ab-added54bbe02" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-05 19:29</div>
            <div class="timeline-body"><p>This could probably be more prominent in our docs, but file-level suppressions have to start with <code>ruff:</code> or <code>flake8:</code>, not just <code>noqa</code>:</p>
<blockquote>
<p>A file-level exemption comment is given by a case-sensitive match for #ruff: or #flake8:, with optional whitespace after # and before :, followed by optional whitespace and a case-insensitive match for noqa. After this, the specification is as in the inline case.</p>
</blockquote>
<ul>
<li>https://docs.astral.sh/ruff/linter/#full-suppression-comment-specification</li>
<li>https://play.ruff.rs/1b051fec-39fb-48fb-a978-34502fe34658</li>
</ul>
<p>That wasn't obvious to me until I checked the test cases in #2978.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-12-05 19:29</div>
            <div class="timeline-body"><p>Could you try using <code># ruff: noqa: D101</code> instead of <code># noqa: D101</code>? The former is the format for file-level suppressions, while the latter only works for in-line suppressions. See <a href="https://docs.astral.sh/ruff/linter/#error-suppression">the docs</a> for the full specification.</p>
<p>Edit: jinx @ntBre ðŸ˜„</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:17 UTC
    </footer>
</body>
</html>
