<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E203: format with ruff an flake8 - astral-sh/ruff #21455</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>E203: format with ruff an flake8</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/21455">#21455</a>
        opened by <a href="https://github.com/misery">@misery</a>
        on 2025-11-14 14:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/misery">@misery</a> on 2025-11-14 14:13</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I have this snipped that will be formatted by <code>ruff format</code> like this.</p>
<pre><code>OPTIONS = {}
HG_ENV_PREFIX = 'HG_USERVAR_'
for key, value in six.iteritems(os.environ):
  if key.startswith(HG_ENV_PREFIX):
    OPTIONS[key[len(HG_ENV_PREFIX) :]] = value
</code></pre>
<p>flake8 will throw a warning for this: <code>E203 whitespace before ':'</code></p>
<p>ruff check won't give a warning here.</p>
<pre><code>ruff check --select E203 --preview
All checks passed!
</code></pre>
<p>Is flake8 or ruff correct here? I need to use <code># fmt: skip</code> here. Maybe the formatter should avoid that whitespace?</p>
<h3>Version</h3>
<p>0.14.5</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-11-14 17:24</div>
            <div class="timeline-body"><p>I believe that <code>flake8</code>'s implementation of E203 is not PEP 8 compliant - see, e.g., https://black.readthedocs.io/en/stable/the_black_code_style/current_style.html#slices . Ruff's implementation of E203 does not emit a lint on the formatted version of your snippet - <a href="https://play.ruff.rs/6a39cc04-bb03-410d-973c-c65404974658">Playground</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @dylwil3 on 2025-11-14 17:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amyreese">@amyreese</a> on 2025-11-14 19:50</div>
            <div class="timeline-body"><p>Generally speaking, Ruff/Black style is not compatible with flake8's pycodestyle lints. If you have a formatter enforcing your code style, then it's suggested that you disable style related lint rules. This is what we do with the <a href="https://docs.astral.sh/ruff/configuration/">default Ruff configuration</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-14 20:29</div>
            <div class="timeline-body"><p>To clarify, the E rules in Ruff are compatible with the formatter. It's just unnecessary to run them when using the formatter too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-12-10 17:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:38:44 UTC
    </footer>
</body>
</html>
