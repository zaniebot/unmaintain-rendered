<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Integrate criterion statistics and plots into CI - astral-sh/ruff #5354</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Integrate criterion statistics and plots into CI</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/5354">#5354</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-06-25 11:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/konstin">@konstin</a> on 2023-06-25 11:24</div>
            <div class="timeline-body"><p>For each PR, our CI <a href="https://github.com/astral-sh/ruff/blob/main/.github/workflows/benchmark.yaml">compares</a> running criterion benchmarks on main vs. running them on the PR and posts a comment with the timing changes. Unfortunately, the github actions runner performance is rather noisy, so e.g. in <a href="https://github.com/astral-sh/ruff/pull/5340#issuecomment-1604574715">this change</a> that doesn't touch the linter at all we still see large seeming changes to linter performance.</p>
<p><a href="https://github.com/bheisler/criterion.rs">criterion</a>, the benchmarking framework we use, integrates statistical methods and e.g. computes p-values that tells you whether a change is statistically significant (vs. the just noise) and it plots each run to allow for manual inspection. It would be great if we could extend CI to show more information, e.g. whether criterion considers the difference significant. I don't know if that is possible with the way github handles artifacts, but exporting the criterion plots and linking them on the PR comment would also be helpful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">performance</span> added by @konstin on 2023-06-25 11:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-10 05:32</div>
            <div class="timeline-body"><p>I think this is less relevant now that we're on CodSpeed, but can always revisit if we migrate away.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-11-10 05:32</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:09 UTC
    </footer>
</body>
</html>
