<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] support type[Any] - astral-sh/ruff #14546</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] support type[Any]</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14546">#14546</a>
        opened by <a href="https://github.com/carljm">@carljm</a>
        on 2024-11-22 22:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a></div>
            <div class="timeline-body"><p>The Python type system supports the <code>type[Any]</code> type as a special case of <a href="https://typing.readthedocs.io/en/latest/spec/special-types.html#type">the <code>type[...]</code> special form</a>. This is a gradual type representing some unknown class and all of its subclasses.</p>
<p>Once we have fixed <a href="https://github.com/astral-sh/ruff/issues/14544">astral-sh/ruff#14544</a>, we should also support <code>type[Any]</code>. This will require updating our representation of <code>SubclassOfType</code> to an enum, so it can store either a <code>Class</code> or just represent <code>type[Any]</code>. This will also require checking each place we handle <code>Type::SubclassOf</code> and updating it to handle the gradual variant correctly.</p>
<p>We should also infer <code>type[Any]</code> from an annotation that just uses bare <code>type</code>, e.g. <code>x: type = ...</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by <a href="https://github.com/carljm">@carljm</a> on 2024-11-22 22:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/carljm">@carljm</a> on 2024-11-22 22:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-11-23 10:43</div>
            <div class="timeline-body"><p>I suspect the enum we want here will have the same variants as this one:</p>
<p>https://github.com/astral-sh/ruff/blob/07d13c6b4a9acdfac3fbce314ee50685d0e8df0d/crates/red_knot_python_semantic/src/types/mro.rs#L303</p>
<p>I don&#x27;t know whether it&#x27;s worth trying to reuse (and rename?) that one or create another one with the same variants</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2024-12-08 02:54</div>
            <div class="timeline-body"><p>This seems simple enough. I&#x27;ll have a PR ready by tomorrow.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2024-12-08 02:57</div>
            <div class="timeline-body"><blockquote>
<p>This seems simple enough. I&#x27;ll have a PR ready by tomorrow.</p>
</blockquote>
<p>Appreciate the interest in contributing! This issue (and a few others) are assigned to me because they are on the ramp up plan for a new Astral team member. If there isn&#x27;t an unassigned issue that looks interesting to you, I can create some additional ones soon!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2024-12-08 03:10</div>
            <div class="timeline-body"><blockquote>
<p>This issue (and a few others) are assigned to me because they are on the ramp up plan for a new Astral team member.</p>
</blockquote>
<p>Is that so? The branch is at 90% already, but I guess I&#x27;ll have to drop it then.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/dcreager">@dcreager</a> on 2024-12-09 15:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned <a href="https://github.com/carljm">@carljm</a> by <a href="https://github.com/dcreager">@dcreager</a> on 2024-12-09 15:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dcreager">@dcreager</a> on 2024-12-10 21:11</div>
            <div class="timeline-body"><blockquote>
<p>We should also infer <code>type[Any]</code> from an annotation that just uses bare <code>type</code>, e.g. <code>x: type = ...</code>.</p>
</blockquote>
<p>Surfacing from <a href="https://github.com/astral-sh/ruff/pull/14876">astral-sh/ruff#14876</a>#discussion_r1878322282 that we have decided to interpret bare <code>type</code> as <code>type[object]</code>, not <code>type[Any]</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dcreager">@dcreager</a> on 2024-12-10 21:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dcreager">@dcreager</a> on 2024-12-10 21:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:01 UTC
    </footer>
</body>
</html>
