<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruff format: Blank line after &quot;class&quot; keyword - astral-sh/ruff #22237</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ruff format: Blank line after &quot;class&quot; keyword</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/22237">#22237</a>
        opened by <a href="https://github.com/danijar">@danijar</a>
        on 2025-12-28 19:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/danijar">@danijar</a></div>
            <div class="timeline-body"><p>This feature request is for ruff format to place blank line below the &quot;class&quot; keyword if there is no class docstring, either via a new configuration option or as the default behavior.</p>
<p>I&#x27;m aware that ruff format aims to stay close to black and have as little configuration as possible. However, after using ruff format for a couple of weeks I got around to all formatting decisions except for this one. I&#x27;d argue that code is significantly less readable with the current behavior of removing the blank line.</p>
<p>As example, take this real world code example of a unit test for a build backend, as processed by ruff format. In this example, the class name and first method name become difficult to see at a quick glance, because they are &quot;merged&quot; together:</p>
<pre><code>class TestInstall:
    @pytest.mark.parametrize(&#x27;project&#x27;, PROJECTS)
    def test_sync_editable(self, project):
        path = ROOT / project.path
        system = utils.System(cwd=path)
        system(&#x27;rm -rf .venv&#x27;)
        system(&#x27;uv sync --editable&#x27;)
        code = f&#x27;import {project.name}; print({project.name}.foo())&#x27;
        assert system(f&#x27;uv run python -c &quot;{code}&quot;&#x27;) == &#x27;42\n&#x27;

    @pytest.mark.parametrize(&#x27;project&#x27;, PROJECTS)
    def test_sync_no_editable(self, project):
        path = ROOT / project.path
        system = utils.System(cwd=path)
        system(&#x27;rm -rf .venv&#x27;)
        system(&#x27;uv sync --no-editable&#x27;)
        code = f&#x27;import {project.name}; print({project.name}.foo())&#x27;
        assert system(f&#x27;uv run python -c &quot;{code}&quot;&#x27;) == &#x27;42\n&#x27;

    @pytest.mark.parametrize(&#x27;project&#x27;, PROJECTS)
    def test_build_wheel(self, tmpdir, project):
        packages = []
        for folder in [project.path, *(project.deps or [])]:
            path = ROOT / folder
            system = utils.System(cwd=path)
            system(&#x27;rm -rf .venv&#x27;)
            system(&#x27;rm -rf dist&#x27;)
            system(&#x27;uv sync&#x27;)
            system(&#x27;uv build&#x27;)
            wheels = list((path / &#x27;dist&#x27;).glob(&#x27;*.whl&#x27;))
            assert len(wheels) == 1, wheels
            packages += [str(x) for x in wheels]
        ...
</code></pre>
<p>Note that when there is a class docstring, black and ruff format will already insert a blank line below the docstring, clearly separating the class name from the first method:</p>
<pre><code>class TestInstall:
    &quot;&quot;&quot;Test installation&quot;&quot;&quot;

    @pytest.mark.parametrize(&#x27;project&#x27;, PROJECTS)
    def test_sync_editable(self, project):
        path = ROOT / project.path
        system = utils.System(cwd=path)
        system(&#x27;rm -rf .venv&#x27;)
        system(&#x27;uv sync --editable&#x27;)
        code = f&#x27;import {project.name}; print({project.name}.foo())&#x27;
        assert system(f&#x27;uv run python -c &quot;{code}&quot;&#x27;) == &#x27;42\n&#x27;
</code></pre>
<p>We found ourselves inserting useless class docstrings across the code base to satisfy the formatter, which adds overhead when reading and modifying the code.</p>
<p>Moreover, in the case that the first method of the class is <code>__init__()</code>, having it visually connected to the class name may be less of a concern, so the current behaviors works there too.</p>
<p>I suspect that when the formatting decision was made in black, the creators mostly had the above two common cases in mind. I would argue that explicitly placing a blank line below a &quot;class&quot; keyword that has no docstring solves a visual clarity issue in the general case, and is thus a worthwhile deviation from black (whether configurable or not).</p>
<p>Thank you for your consideration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-29 02:08</div>
            <div class="timeline-body"><p>Thank you for the feedback and the great write-up! I think this is a duplicate of #21380, which also links to some of the previous discussion.</p>
<p>We recently added an exception for function headers in #21110 and are open to doing the same for classes, but we&#x27;re still collecting feedback (such as this issue!) to help us decide.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-29 02:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-29 02:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">style</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-29 02:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:43 UTC
    </footer>
</body>
</html>
