<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>feat: Ambiguous character detection - astral-sh/ruff #565</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>feat: Ambiguous character detection</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/565">#565</a>
        opened by <a href="https://github.com/samuelcolvin">@samuelcolvin</a>
        on 2022-11-03 10:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/samuelcolvin">@samuelcolvin</a></div>
            <div class="timeline-body"><p>vscode identifies ambiguous unicode characters and warns about them, screenshot:</p>
<p><img src="https://user-images.githubusercontent.com/4039449/199698850-608984e7-0422-4b8c-95b8-e8067a5b6205.png" alt="image"></p>
<p>It would be great if ruff could do the same. I guess most useful in comments and docstrings, but I guess could also be useful in any string - though you might get false positives.</p>
<p>I :heart: sourcegraph, it makes finding this stuff much easier in big codebases, <a href="https://sourcegraph.com/github.com/microsoft/vscode@86f0f9bfa268fe21af7efae37d8f0da1dba8137f/-/blob/src/vs/base/common/strings.ts?L1094">here</a> is the raw data used by vscode, see also https://github.com/hediet/vscode-unicode-data.</p>
<p>This idea came from <a href="https://github.com/pydantic/pydantic/pull/4714">pydantic/pydantic#4714</a> thanks to @adriangb.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-03 13:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samuelcolvin">@samuelcolvin</a> on 2022-11-03 13:22</div>
            <div class="timeline-body"><p>Great, ye I was thinking auto-fixing would be great, not sure if the available dataset includes the substitution characters, but I would assume it does.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-04 03:29</div>
            <div class="timeline-body"><p>Coming together:</p>
<p><img src="https://user-images.githubusercontent.com/1309177/199879066-1017f334-a5f6-469f-a2bf-2f379dcfb3c1.png" alt="Screen Shot 2022-11-03 at 11 29 08 PM"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-04 03:30</div>
            <div class="timeline-body"><p>Any input on what the error code should be for this? (E.g., I just used <code>X001</code> above.) It&#x27;s one of the first rules that isn&#x27;t indexed based on another plugin&#x27;s coding.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samuelcolvin">@samuelcolvin</a> on 2022-11-04 08:56</div>
            <div class="timeline-body"><p>I think the above wording looks great.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samuelcolvin">@samuelcolvin</a> on 2022-11-04 08:58</div>
            <div class="timeline-body"><p>What did you decide about docstrings, comments, strings?</p>
<p>Thinking about it, imagine I would want the error in all places. I guess if you used a different error code, people could easily switch it off in strings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-04 15:02</div>
            <div class="timeline-body"><p>For now it&#x27;s just doing errors in strings (including docstrings). I could add comments too. I&#x27;m hesitant to check <em>every</em> character in every file since it&#x27;s hard to make that fast.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-04 16:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-04 16:08</div>
            <div class="timeline-body"><p>I&#x27;m going to make a separate task for comments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samuelcolvin">@samuelcolvin</a> on 2022-11-04 16:43</div>
            <div class="timeline-body"><p>Makes sense, but I do think a different code for strings vs docstrings would be good - there are legimate reasons to use unicode characters in strings that are unlike to be intentional in docstrings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-04 16:44</div>
            <div class="timeline-body"><p>Okay, sounds good, I can change that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-04 18:46</div>
            <div class="timeline-body"><p>Resolved in <a href="https://github.com/charliermarsh/ruff/pull/590">charliermarsh/ruff#590</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-09 15:24</div>
            <div class="timeline-body"><p>Comment support went out in #653 as <code>RUF003</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:26 UTC
    </footer>
</body>
</html>
