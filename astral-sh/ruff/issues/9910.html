<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enforcing docstring length (not the code snippets) - astral-sh/ruff #9910</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Enforcing docstring length (not the code snippets)</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/9910">#9910</a>
        opened by <a href="https://github.com/ma-sadeghi">@ma-sadeghi</a>
        on 2024-02-09 13:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ma-sadeghi">@ma-sadeghi</a> on 2024-02-09 13:02</div>
            <div class="timeline-body"><p>Is it possible to enforce docstring length (I know this possible for code snippets, but I mean the strings). Here's an example: Enforce docstring line length of 75:</p>
<pre><code class="language-python">def f(a, b):
	&quot;&quot;&quot;
	Very long long long long long long long long long long long long long long long long long description.

	Parameters
	----------
	a: int
		First number to add
	b: int
		Second number to add

	Returns
	-------
	int
		Another long long long long long long long long long long long long long long long long description.
	&quot;&quot;&quot;
</code></pre>
<pre><code class="language-python">def f(a, b):
	&quot;&quot;&quot;
	Very long long long long long long long long long long long long long long
    long long long description.

	Parameters
	----------
	a: int
		First number to add
	b: int
		Second number to add

	Returns
	-------
	int
		Another long long long long long long long long long long long long
        long long long long description.
	&quot;&quot;&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-02-09 13:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @MichaReiser on 2024-02-09 13:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-09 13:06</div>
            <div class="timeline-body"><p>Hy @ma-sadeghi</p>
<p>Not yet. We want to add docstring (the comment content) formatting in the future and are also thinking about string formatting in general (automatically splitting or collapsing them) but this isn't supported today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ma-sadeghi">@ma-sadeghi</a> on 2024-02-09 18:19</div>
            <div class="timeline-body"><p>@MichaReiser thanks for your quick reply. Looking forward to it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Peque">@Peque</a> on 2024-04-12 15:04</div>
            <div class="timeline-body"><p>Not sure if this is also what you had in mind @ma-sadeghi, but I'd suggest not only convert this:</p>
<pre><code class="language-python">def foo():
    &quot;&quot;&quot;
    Foo foo foo foo foo foo foo foo foo foo one two three four five six seven eight nine ten.
    &quot;&quot;&quot;
    return &quot;foo&quot;
</code></pre>
<p>Into:</p>
<pre><code class="language-python">def foo():
    &quot;&quot;&quot;
    Foo foo foo foo foo foo foo foo foo foo one two three four five six
    seven eight nine ten.
    &quot;&quot;&quot;
    return &quot;foo&quot;
</code></pre>
<p>But also:</p>
<pre><code class="language-python">def foo():
    &quot;&quot;&quot;
    Foo foo foo foo foo foo foo foo foo foo
    one two three four five six seven eight
    nine ten.
    &quot;&quot;&quot;
    return &quot;foo&quot;
</code></pre>
<p>Into:</p>
<pre><code class="language-python">def foo():
    &quot;&quot;&quot;
    Foo foo foo foo foo foo foo foo foo foo one two three four five six
    seven eight nine ten.
    &quot;&quot;&quot;
    return &quot;foo&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ma-sadeghi">@ma-sadeghi</a> on 2024-04-17 19:04</div>
            <div class="timeline-body"><p>@Peque Yep, that makes sense!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nataziel">@nataziel</a> on 2024-04-23 04:35</div>
            <div class="timeline-body"><p>+1 to this request</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @dhruvmanila on 2024-04-24 06:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">docstring</span> added by @dhruvmanila on 2024-04-24 06:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cheriimoya">@cheriimoya</a> on 2024-10-03 12:07</div>
            <div class="timeline-body"><p>I came across this and it's really annoying. With the following config, I get errors from <code>ruff check</code> that <code>ruff format</code> can't fix:</p>
<p>pyproject.toml:</p>
<pre><code class="language-toml">[tool.ruff]
line-length = 120

[tool.ruff.lint]
extend-select = [ &quot;E&quot; ]

[tool.ruff.format]
docstring-code-format = true
docstring-code-line-length = 70
# Proposed:
# docstring-format: bool = true
# docstring-line-length: int = [tool.ruff].line-length
</code></pre>
<p>example.py</p>
<pre><code class="language-py">&quot;&quot;&quot;This is doing nothing really! It shall only show, how to confuse ruff in a way that it throws an error it cannot fix itself... Which I find kind of annoying.&quot;&quot;&quot;


def main():
    &quot;&quot;&quot;aaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;&quot;&quot;
</code></pre>
<hr />
<p>Using these files, I get this when running <code>ruff check</code>:</p>
<pre><code class="language-plain">example.py:1:121: E501 Line too long (163 &gt; 120)
  |
1 | &quot;&quot;&quot;This is doing nothing really! It shall only show, how to confuse ruff in a way that it throws an error it cannot fix itself... Which I find kind of annoying.&quot;&quot;&quot;
  |                                                                                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ E501
  |

example.py:5:121: E501 Line too long (134 &gt; 120)
  |
4 | def main():
5 |     &quot;&quot;&quot;aaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;&quot;&quot;
  |                                                                                                                         ^^^^^^^^^^^^^^ E501
  |

Found 2 errors.
</code></pre>
<p>yet, <code>ruff format</code> outputs <code>1 file left unchanged</code>.</p>
<p><code>ruff 0.6.8</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cheriimoya">@cheriimoya</a> on 2024-10-03 12:11</div>
            <div class="timeline-body"><p>Funny addition, don't know if it's a bug:</p>
<p>When running <code>ruff check</code> against this change, it says <code>All checks passed!</code></p>
<pre><code class="language-diff">diff --git a/example.py b/example.py
index 4752a9e..5726fe6 100644
--- a/example.py
+++ b/example.py
@@ -1,5 +1,5 @@
-&quot;&quot;&quot;This is doing nothing really! It shall only show, how to confuse ruff in a way that it throws an error it cannot fix itself... Which I find kind of annoying.&quot;&quot;&quot;
+&quot;&quot;&quot;Thisisdoingnothingreally!Itshallonlyshow,howtoconfuseruffinawaythatitthrowsanerroritcannotfixitself...WhichIfindkindofannoying.&quot;&quot;&quot;


 def main():
-    &quot;&quot;&quot;aaaaaaaaaaaa aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;&quot;&quot;
+    &quot;&quot;&quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa&quot;&quot;&quot;
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:12 UTC
    </footer>
</body>
</html>
