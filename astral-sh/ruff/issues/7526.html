<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UP035: No violations when importing an entire module and using deprecated/moved class/method - astral-sh/ruff #7526</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UP035: No violations when importing an entire module and using deprecated/moved class/method</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/7526">#7526</a>
        opened by <a href="https://github.com/einarwar">@einarwar</a>
        on 2023-09-19 17:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/einarwar">@einarwar</a> on 2023-09-19 17:45</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>When explicitly importing deprecated/moved classes/methods UP035 works as expected. Example snippet that will raise a UP035:</p>
<pre><code class="language-python">from typing import Mapping
# Import from `collections.abc` instead: `Mapping`Ruff[UP035](https://beta.ruff.rs/docs/rules/deprecated-import)
</code></pre>
<p>However, when importing the entire module from where the deprecated/moved submodule originally was, no error is raised. Example snippet:</p>
<pre><code class="language-python">import typing
x: typing.Mapping[str, int] = {}
# No error is raised
</code></pre>
<p>I would think the expected behaviour would be to raise an UP035 violation on the line where the deprecated/moved class is defined, in the above case line 2.</p>
<p>Settings:
Ruff 0.0.290
Ruff-VSCode v2023.38.0 with <code>fromEnvironment</code> as import-strategy
Enabled UP in pyproject.toml</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-09-19 18:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2023-09-19 18:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jerr0328">@jerr0328</a> on 2024-07-11 14:54</div>
            <div class="timeline-body"><p>Seems like it's also mentioned in #3936, I was surprised that ruff didn't catch this but I guess it's a bit trickier to catch and fix.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/10955.html">astral-sh/ruff#10955</a> on 2024-07-11 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../pydantic/pydantic/pulls/12182.html">pydantic/pydantic#12182</a> on 2025-08-21 07:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/21314.html">astral-sh/ruff#21314</a> on 2025-11-07 14:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @MichaReiser on 2025-11-10 12:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-10 12:24</div>
            <div class="timeline-body"><p>Flagging full qualified name usages does make sense to me. The only issue is that the rule only flags imports, not usages, which seems an issue with how the rule is designed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @MichaReiser on 2025-11-10 12:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:51 UTC
    </footer>
</body>
</html>
