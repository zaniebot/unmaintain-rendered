<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consider extending `suppressible-exception` (`SIM105`) to multi-line `try` blocks - astral-sh/ruff #8593</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Consider extending <code>suppressible-exception</code> (<code>SIM105</code>) to multi-line <code>try</code> blocks</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8593">#8593</a>
        opened by <a href="https://github.com/DetachHead">@DetachHead</a>
        on 2023-11-10 00:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/DetachHead">@DetachHead</a> on 2023-11-10 00:29</div>
            <div class="timeline-body"><pre><code class="language-py">try: # error
    ...
except Exception:
    pass

try: # no error
    ...
    ...
except Exception:
    pass
</code></pre>
<p><a href="https://play.ruff.rs/0ae2bc17-7268-450b-b602-298728301078">playground</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2023-11-10 00:40</div>
            <div class="timeline-body"><p>I think this is intentional, although I don't really see why.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-11-10 13:18</div>
            <div class="timeline-body"><p>For context, this is due to #1947/#1948 and flake8-simplify doing the same (https://github.com/MartinThoma/flake8-simplify/blob/60e0ddbc82973af673259850cc00c6e8221f8643/flake8_simplify/rules/ast_try.py#L46). I'm not sure if that's the best way to handle this though</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-11 15:08</div>
            <div class="timeline-body"><p>I think the current restriction is not unreasonable, but I'd be open to reviewing a PR that modifies the rule to use the more limited exemption from #1947:</p>
<blockquote>
<p>If a <code>try:</code> block has an unreachable end because all its non-exceptional control flow paths end with a <code>return</code>, <code>raise</code>, <code>break</code>, or <code>continue</code>, should we exempt it from SIM105?</p>
</blockquote>
<p>Though it'd be contingent on reviewing the changes in the ecosystem checks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-11-11 15:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`suppressible-exception` (`SIM105`) false negative when multiple lines in `try` block" to "Consider extending `suppressible-exception` (`SIM105`) to multi-line `try` blocks" by @charliermarsh on 2023-11-11 15:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2023-11-11 15:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DetachHead">@DetachHead</a> on 2024-07-04 07:26</div>
            <div class="timeline-body"><p>workaround: use <a href="https://docs.astral.sh/ruff/rules/try-except-pass/"><code>S110</code></a> instead. though it has a different error message, it seems to be pretty much the same rule except it also covers this case as well.</p>
<p>perhaps <code>SIM105</code> should be deprecated in favor of <code>S110</code> and <code>S110</code>'s error message can be updated to also mention <code>contextlib.suppress</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chirizxc">@chirizxc</a> on 2026-01-04 22:35</div>
            <div class="timeline-body"><p>Can we remove the restriction for certain circumstances?</p>
<p>For example, if there are only imports inside the block?</p>
<pre><code class="language-python">try:
    from pydantic import ConfigDict, TypeAdapter, ValidationError
    from pydantic.main import IncEx
except ImportError:
    pass
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chirizxc">@chirizxc</a> on 2026-01-04 23:16</div>
            <div class="timeline-body"><p>or make <code>detect-multiline</code> parameter and by default it will be false</p>
<pre><code class="language-toml">[lint.flake8-simplify]
detect-multiline = true
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DetachHead">@DetachHead</a> on 2026-01-05 00:18</div>
            <div class="timeline-body"><p>why would it make a difference if the block only contains import statements?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chirizxc">@chirizxc</a> on 2026-01-05 14:39</div>
            <div class="timeline-body"><blockquote>
<p>why would it make a difference if the block only contains import statements?</p>
</blockquote>
<p>The code is just an example, I suggest adding:</p>
<pre><code class="language-toml">[lint.flake8-simplify]
detect-multiline = true
</code></pre>
<p>so that it can detect not only single lines.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DetachHead">@DetachHead</a> on 2026-01-05 23:32</div>
            <div class="timeline-body"><p>i still don't understand why anybody would only want the error to be reported on single-line <code>try</code>/<code>except</code> statements, so i don't see the point making it an option</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:31:55 UTC
    </footer>
</body>
</html>
