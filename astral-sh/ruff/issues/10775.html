<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D403 does not trigger for a single-word docstring that ends with a period - astral-sh/ruff #10775</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>D403 does not trigger for a single-word docstring that ends with a period</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/10775">#10775</a>
        opened by <a href="https://github.com/jbmoorhouse">@jbmoorhouse</a>
        on 2024-04-04 14:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jbmoorhouse">@jbmoorhouse</a> on 2024-04-04 14:41</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<h1>Keywords searched for</h1>
<p><code>D403</code> -&gt; Potentially related to https://github.com/astral-sh/ruff/issues/2989</p>
<h1>Ruff version</h1>
<p><code>0.3.0</code></p>
<h1>Issue</h1>
<p>For a docstring with one word (admittedly not a typical docstring :wink:), if the word is not capitalised and there is no fullstop, the correct errors are raised</p>
<p><img src="https://github.com/astral-sh/ruff/assets/32223462/ef3031de-f9fc-4eda-8942-15b0120831d0" alt="image" /></p>
<p>However, when adding a full stop, <code>D403</code> is suppressed/not raised</p>
<p><img src="https://github.com/astral-sh/ruff/assets/32223462/fd1ff5d7-f14f-42fc-99d3-310d9a0d0c1b" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">docstring</span> added by @AlexWaygood on 2024-04-04 14:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-04-04 14:51</div>
            <div class="timeline-body"><p>I think this is probably a bug in the check here</p>
<p>https://github.com/astral-sh/ruff/blob/230c9ce23603515245c55e3c0cfbd23c3f22cbe5/crates/ruff_linter/src/rules/pydocstyle/rules/capitalized.rs#L62-L64</p>
<p>It splits by whitespace to get the first word. But that means it returns early if it's a single word. We should probably change this to</p>
<pre><code>let first_word = body.split(' ').next().unwrap_or(&amp;body);
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "D403 issue" to "D403 does not trigger for a single-word docstring that ends with a period" by @AlexWaygood on 2024-04-04 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @AlexWaygood on 2024-04-04 14:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-04-04 14:58</div>
            <div class="timeline-body"><p>Okay, that's not sufficient, because it then gets skipped in</p>
<pre><code>    for char in first_word.chars() {
        if !char.is_ascii_alphabetic() &amp;&amp; char != '\'' {
            dbg!(&quot;Non ascii character&quot;);
            return;
        }
    }
</code></pre>
<p>I need to look into the pycodestyle implementation if this is intentional.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-04-04 15:28</div>
            <div class="timeline-body"><p>Okay, I was wrong. Split is used correctly. It always returns the string even if the split character isn't found. It bails because <code>.</code> isn't an ASCII character, and this matches pydocstyle's implementation.</p>
<p>I'll put up a PR but I&quot;m not sure if we should change the current behavior because a single word isn't really a phrase...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10776.html">astral-sh/ruff#10776</a> on 2024-04-04 16:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-04-05 06:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/13167.html">astral-sh/ruff#13167</a> on 2024-08-30 18:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:12 UTC
    </footer>
</body>
</html>
