<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suggestion: mark fixable checks in the default output? - astral-sh/ruff #2452</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Suggestion: mark fixable checks in the default output?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2452">#2452</a>
        opened by <a href="https://github.com/henryiii">@henryiii</a>
        on 2023-02-01 18:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/henryiii">@henryiii</a> on 2023-02-01 18:24</div>
            <div class="timeline-body"><p>One thing IMO that would really be nice would be Ruby Rubocop's feature of marking changes that support autofix. For example, on the dummy Ruby file:</p>
<pre><code class="language-rb"># frozen_string_literal: true

def abs(x)
  if x &gt; 0
    x
  else
    -x
  end
end
</code></pre>
<p>Rubocop produces this:</p>
<pre><code>Inspecting 1 file
C

Offenses:

tmp.rb:3:9: C: Naming/MethodParameterName: Method parameter must be at least 3 characters long.
def abs(x)
        ^
tmp.rb:4:6: C: [Correctable] Style/NumericPredicate: Use x.positive? instead of x &gt; 0.
  if x &gt; 0
     ^^^^^

1 file inspected, 2 offenses detected, 1 offense auto-correctable
</code></pre>
<p>Yeah, the default is a little verbose, but notice the <code>[Correctable]</code> marker. That's fantastic, as it gives you an idea of what adding the fix (<code>-A</code> in Rubocop) flag will do, and what it won't. I miss not having some little mark or something in Ruff's output that lets me know what fixing will do and what it won't.</p>
<p>This is different than looking up each issue and checking to see if it's fixable or not, and it's a bit more helpful than just the summary of how many would be fixable, which is already there. I don't think it needs to be spelled out, but a little marker might be useful (like <code>[*]</code>, then <code>[*]</code> could be placed by the total number of fixable values, to help a user realize what it is there for.</p>
<p>Maybe the target is to try to mimic flake8's output as closely as possible, and that's okay, but just thought I'd point it out.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @charliermarsh on 2023-02-01 18:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-01 18:27</div>
            <div class="timeline-body"><p>Yeah this is a nice suggestion (and an improvement over the <code>X potentially fixable</code> note we include in the output today). Would love feedback from others on what the right format could look like.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-01 19:39</div>
            <div class="timeline-body"><p>A few options...</p>
<pre><code class="language-console">resources/test/fixtures/pyupgrade/UP035.py:47:14: F811 Redefinition of unused `Counter` from line 33
resources/test/fixtures/pyupgrade/UP035.py:50:15: F401 `a.b` imported but unused
resources/test/fixtures/pyupgrade/future_annotations.py:8:5: F401 `models.Nut` imported but unused
resources/test/fixtures/pyupgrade/future_annotations.py:26:19: F821 Undefined name `Bar` [*]
...
[*] 1 potentially fixable...
</code></pre>
<pre><code class="language-console">resources/test/fixtures/pyupgrade/UP035.py:47:14: F811 Redefinition of unused `Counter` from line 33
resources/test/fixtures/pyupgrade/UP035.py:50:15: F401 `a.b` imported but unused
resources/test/fixtures/pyupgrade/future_annotations.py:8:5: F401 `models.Nut` imported but unused
[*] resources/test/fixtures/pyupgrade/future_annotations.py:26:19: F821 Undefined name `Bar`
...
[*] 1 potentially fixable...
</code></pre>
<p>I suspect that the former is more likely to be backwards-compatible for anyone relying on the format, and it avoids an offset in the filename.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-02-01 19:54</div>
            <div class="timeline-body"><p>Or:</p>
<pre><code>resources/test/fixtures/pyupgrade/UP035.py:47:14: F811 Redefinition of unused `Counter` from line 33
resources/test/fixtures/pyupgrade/UP035.py:50:15: F401 `a.b` imported but unused
resources/test/fixtures/pyupgrade/future_annotations.py:8:5: F401 `models.Nut` imported but unused
resources/test/fixtures/pyupgrade/future_annotations.py:26:19: F821 [*] Undefined name `Bar`
</code></pre>
<p>Or</p>
<pre><code>resources/test/fixtures/pyupgrade/UP035.py:47:14: F811 Redefinition of unused `Counter` from line 33
resources/test/fixtures/pyupgrade/UP035.py:50:15: F401 `a.b` imported but unused
resources/test/fixtures/pyupgrade/future_annotations.py:8:5: F401 `models.Nut` imported but unused
resources/test/fixtures/pyupgrade/future_annotations.py:26:19: [*] F821 Undefined name `Bar`
</code></pre>
<p>I like it at the end or in the middle (either example above), I don't like it at the beginning, makes the paths harder to read &amp; quickly jump to.</p>
<p>Hey, how do you autofix an undefined name? :P</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-01 20:07</div>
            <div class="timeline-body"><blockquote>
<p>Hey, how do you autofix an undefined name? :P</p>
</blockquote>
<p>Haha oops, I was just adding stars randomly to real output :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/akx">@akx</a> on 2023-02-02 12:26</div>
            <div class="timeline-body"><p>Related to #2149 :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-02 17:21</div>
            <div class="timeline-body"><p>I'm gonna go with:</p>
<pre><code>resources/test/fixtures/pyupgrade/UP035.py:47:14: F811 Redefinition of unused `Counter` from line 33
resources/test/fixtures/pyupgrade/UP035.py:50:15: F401 `a.b` imported but unused
resources/test/fixtures/pyupgrade/future_annotations.py:8:5: F401 `models.Nut` imported but unused
resources/test/fixtures/pyupgrade/future_annotations.py:26:19: F821 [*] Undefined name `Bar`
</code></pre>
<p>It's least likely to break any existing clients as it retains the {file}:{row}:{column}:{code}:{message} structure (if we call <code>[*]</code> part of the message), visually clear, etc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-03 21:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:29:11 UTC
    </footer>
</body>
</html>
