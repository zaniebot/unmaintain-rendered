<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blank lines around controls - astral-sh/ruff #20679</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>blank lines around controls</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/20679">#20679</a>
        opened by <a href="https://github.com/SmikeForYou">@SmikeForYou</a>
        on 2025-10-02 10:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/SmikeForYou">@SmikeForYou</a> on 2025-10-02 10:45</div>
            <div class="timeline-body"><p>Hi. First of all want to thank you on such a powerfull formatting and lining tool as <code>ruff</code>. I have one suggestion for formatting improvement wich will make codestyle much readable.</p>
<p><strong>Summary</strong></p>
<p>To add support for blank lines around control blocks(if/with/for/while/try) in formatting options.</p>
<p><em>Unformatted</em></p>
<pre><code class="language-python">def unformatted():
    if True:
        print(1234)
    while False:
        print(123)
    for _ in range(1):
        print(1234)
    try:
        pass
    except:
        print(123)
    finally:
        print(123)
</code></pre>
<p><em>Formatted</em></p>
<pre><code class="language-python">def unformatted():
    if True:
        print(1234)

    while False:
        print(123)

    for _ in range(1):
        print(1234)

    try:
        pass
    except:
        print(123)
    finally:
        print(123)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @AlexWaygood on 2025-10-02 11:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">style</span> added by @MichaReiser on 2025-10-02 11:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-10-02 11:27</div>
            <div class="timeline-body"><p>Thanks for this suggestion. What about nested controls?</p>
<pre><code class="language-py">if True:
	if False: ...
</code></pre>
<p>or</p>
<pre><code>
```py
if True:

	if False
</code></pre>
<p>IMO, this is too opinionated but I'm interested in other opinions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SmikeForYou">@SmikeForYou</a> on 2025-10-02 12:59</div>
            <div class="timeline-body"><p>Nice point. For my current project i wrote python script for this kind of formatting and it formats only top level of controls blocks without diving into nested blocks. But its really interesting to see the opinion of community</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SmikeForYou">@SmikeForYou</a> on 2025-10-02 13:03</div>
            <div class="timeline-body"><p>But basicly i think that better approach is not to add blank line before first nested block(same behaviour as for first line after <code>def</code>):
<em>Unformatted:</em></p>
<pre><code class="language-python">def unformatted():
    if True:
        if True:
            print(1234)
        for _ in (1,):
            print(123)
    while False:
        if True:
            print(123)
    for _ in range(1):
        print(1234)
    try:
        pass
    except:
        print(123)
    finally:
        print(123)
</code></pre>
<p><em>Formatted</em>:</p>
<pre><code class="language-python">def formatted():
    if True:
        if True:
            print(1234)

        for _ in (1,):
            print(123)

    while False:
        if True:
            print(123)

    for _ in range(1):
        print(1234)

    try:
        pass
    except:
        print(123)
    finally:
        print(123)

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SmikeForYou">@SmikeForYou</a> on 2025-10-09 11:34</div>
            <div class="timeline-body"><p>@MichaReiser hey. How do you think, we can implement?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-10-09 12:04</div>
            <div class="timeline-body"><p>This will require broader community interest to be implemented in the formatter.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:18 UTC
    </footer>
</body>
</html>
