<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ruff.toml doesn't work with [tool.ruff] hierarchy - astral-sh/ruff #4725</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>ruff.toml doesn't work with [tool.ruff] hierarchy</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/4725">#4725</a>
        opened by <a href="https://github.com/turnerm">@turnerm</a>
        on 2023-05-30 12:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/turnerm">@turnerm</a> on 2023-05-30 12:56</div>
            <div class="timeline-body"><p>The <code>ruff</code> <a href="https://beta.ruff.rs/docs/configuration/#using-rufftoml">documentation</a> states the following:</p>
<blockquote>
<p>As an alternative to pyproject.toml, Ruff will also respect a ruff.toml (or .ruff.toml) file, which implements an equivalent schema (though the [tool.ruff] hierarchy can be omitted).</p>
</blockquote>
<p>In particular, stating that the <code>[tool.ruff]</code> hierarchy <em>can</em> be omitted implies that it should be possible to use the hierarchy in <code>ruff.toml</code>.</p>
<p>However, I do not find this to be the case. In particular, I've created the following <code>ruff.toml</code>:</p>
<pre><code class="language-toml">[tool.ruff]
line-length = 79
</code></pre>
<p>Then with Python 3.11 and <code>ruff</code> 0.0.270 I tried running the command <code>ruff check *</code>, and get the following error:</p>
<pre><code class="language-shell">error: Failed to parse `/home/turnerm/scratch/ruff_test/ruff.toml`: TOML parse error at line 1, column 2
  |
1 | [tool.ruff]
  |  ^^^^
unknown field `tool`, expected one of `allowed-confusables`, `builtins`, `cache-dir`, `dummy-variable-rgx`, `exclude`, `extend`, `extend-exclude`, `extend-include`, `extend-ignore`, `extend-select`, `extend-fixable`, `extend-unfixable`, `external`, `fix`, `fix-only`, `fixable`, `format`, `force-exclude`, `ignore`, `ignore-init-module-imports`, `include`, `line-length`, `tab-size`, `required-version`, `respect-gitignore`, `select`, `show-source`, `show-fixes`, `src`, `namespace-packages`, `target-version`, `task-tags`, `typing-modules`, `unfixable`, `flake8-annotations`, `flake8-bandit`, `flake8-bugbear`, `flake8-builtins`, `flake8-comprehensions`, `flake8-errmsg`, `flake8-quotes`, `flake8-self`, `flake8-tidy-imports`, `flake8-type-checking`, `flake8-gettext`, `flake8-implicit-str-concat`, `flake8-import-conventions`, `flake8-pytest-style`, `flake8-unused-arguments`, `isort`, `mccabe`, `pep8-naming`, `pycodestyle`, `pydocstyle`, `pylint`, `per-file-ignores`, `extend-per-file-ignores`
</code></pre>
<p>If I change the name of <code>ruff.toml</code> to <code>pyproject.toml</code>, or remove the <code>[ruff.toml]</code> heading, then <code>ruff</code> runs without error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../OCHA-DAP/hdx-python-utilities/pulls/16.html">OCHA-DAP/hdx-python-utilities#16</a> on 2023-05-30 12:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-30 13:19</div>
            <div class="timeline-body"><p>The documentation should be clearer on this point: <code>[tool.ruff]</code> <em>has</em> to be omitted for <code>ruff.toml</code> (it's not optional).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-05-30 17:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4732.html">astral-sh/ruff#4732</a> on 2023-05-30 17:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-05-30 17:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cartok">@cartok</a> on 2023-10-31 13:58</div>
            <div class="timeline-body"><p>People will still land here cause the preset is using it. https://github.com/astral-sh/ruff#configuration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phillipjohnston">@phillipjohnston</a> on 2024-03-13 15:06</div>
            <div class="timeline-body"><blockquote>
<p>People will still land here cause the preset is using it. https://github.com/astral-sh/ruff#configuration.</p>
</blockquote>
<p>I did this just now while working through the readme.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 15:07</div>
            <div class="timeline-body"><p>I don't think we can put tabs in the README (unlike in the docs). I'll try to clarify it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10393.html">astral-sh/ruff#10393</a> on 2024-03-13 18:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-03-13 18:12</div>
            <div class="timeline-body"><blockquote>
<p>I don't think we can put tabs in the README (unlike in the docs).</p>
</blockquote>
<p>Yeah that seems correct :/ https://github.com/github/markup/issues/1552#issuecomment-1554743574</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/michealroberts">@michealroberts</a> on 2025-04-29 13:20</div>
            <div class="timeline-body"><p>I'm here in 2025:</p>
<pre><code>error: Failed to parse `/workspaces/celerity/ruff.toml`: TOML parse error at line 33, column 1
   |
33 | indent-width = 4
</code></pre>
<p>Seems like I have ruff 0.0.* installed, and needed to bump minor versions. If anyone encounters this error.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:09 UTC
    </footer>
</body>
</html>
