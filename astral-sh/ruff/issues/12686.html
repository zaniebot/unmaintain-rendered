<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is it possible for ruff to preserve the multi-line list comprehension for readability? - astral-sh/ruff #12686</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is it possible for ruff to preserve the multi-line list comprehension for readability?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/12686">#12686</a>
        opened by <a href="https://github.com/jd-solanki">@jd-solanki</a>
        on 2024-08-05 11:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jd-solanki">@jd-solanki</a> on 2024-08-05 11:43</div>
            <div class="timeline-body"><p>Hi üëãüèª</p>
<p>Big fan of Ruff &amp; Sister projects ‚ù§Ô∏è</p>
<p>Can we preserve the multi-line list comprehension for readability?</p>
<pre><code class="language-py">    return [
        data
        for data in sku_data
        if data.date &gt;= today.replace(month=today.month - duration_in_months)
    ]
</code></pre>
<p>With ruff it's get formatted in single line:</p>
<pre><code class="language-py">return [data for data in sku_data if data.date &gt;= today.replace(month=today.month - duration_in_months)]
</code></pre>
<p>My ruff config:</p>
<pre><code class="language-toml"># Docs: https://docs.astral.sh/ruff/settings/
select = [&quot;ALL&quot;]
fix = true
target-version = &quot;py312&quot;
line-length = 120

ignore = [
    &quot;D101&quot;,   # Missing docstring in public class
    &quot;D104&quot;,   # Missing docstring in public package
    &quot;D100&quot;,   # Missing docstring in public module
    &quot;ANN201&quot;, # Missing return type annotation for public function `get_db`
    &quot;D103&quot;,   # Missing docstring in public function
    &quot;INP001&quot;, # File `X` is part of an implicit namespace package. Add an `__init__.py`.
    &quot;D102&quot;,   # Missing docstring in public method
    &quot;D107&quot;,   # Missing docstring in `__init__`
    &quot;ANN101&quot;, # Missing type annotation for `self` in method
    &quot;D106&quot;,   # Missing docstring in public nested class
    &quot;ERA001&quot;, # Found commented-out code
    &quot;T201&quot;,   # `print` found

    # Comments
    &quot;TD002&quot;, # Missing author in TODO; try: `# TODO(&lt;author_name&gt;): ...` or `# TODO @&lt;author_name&gt;: ...`
    &quot;TD003&quot;, # Missing issue link on the line following this TODO

    # FastAPI only
    &quot;B008&quot;, # Do not perform function call `Depends` in argument defaults
]
[extend-per-file-ignores]
&quot;tests/**&quot; = [&quot;S101&quot;, &quot;PLR2004&quot;]

[format]
skip-magic-trailing-comma = false
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-05 12:44</div>
            <div class="timeline-body"><p>Thanks for the kind words and reporting the improvement.</p>
<p>This has come up before. I'll merge the issue into https://github.com/astral-sh/ruff/issues/11753</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-08-05 12:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:53 UTC
    </footer>
</body>
</html>
