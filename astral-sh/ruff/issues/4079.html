<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>commandline length limit easily reached on windows shell invocations - astral-sh/ruff #4079</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>commandline length limit easily reached on windows shell invocations</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/4079">#4079</a>
        opened by <a href="https://github.com/carpenterjc">@carpenterjc</a>
        on 2023-04-24 14:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/carpenterjc">@carpenterjc</a> on 2023-04-24 14:55</div>
            <div class="timeline-body"><p>We use bazel to invoke ruff during the build so that the exclusions are contained in the bazel build files, and invoke ruff in a batch file which writes out a file on each batch when it is linted successfully.</p>
<p>What I have noticed is that we regularly reach the command line length limit which for batch files/windows shell is very low. The normal solution of this, for things like c++ compiler/linker is to provide a response file which contains a line per argument. Something like: https://crates.io/crates/argfile for rust. However I cannot see how to do this or if it needs building into ruff.</p>
<p>On windows, you will see ruff can't be invoked with a relatively small number of files if they have longish paths.</p>
<pre><code>import subprocess
subprocess.run([
  &quot;ruff&quot;,
  &quot;check&quot;,
  &quot;--no-cache&quot;,
  &quot;--target-version&quot;,
  &quot;py37&quot;,
  &quot;--config&quot;,
  &quot;pyproject.toml&quot;,
  &quot;--quiet&quot;,] + [&quot;abcdefghijklmnopqrstuvwxyz/abcdefghijklmnopqrstuvwxyz/abcdefghijklmnopqrstuvwxyz/abcdefghijklmnopqrstuvwxyz.py&quot;] * 116, 
  shell=True,
  )
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-04-25 05:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-25 05:16</div>
            <div class="timeline-body"><p>We should be able to support this, but it does require changes within Ruff AFAICT.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4087.html">astral-sh/ruff#4087</a> on 2023-04-25 05:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-04-25 05:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-04-25 23:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-25 23:58</div>
            <div class="timeline-body"><p>Will be available in the next release. See #4087 for an example.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:50 UTC
    </footer>
</body>
</html>
