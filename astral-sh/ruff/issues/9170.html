<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undocumented formatter deviation - empty lines are removed from block beginning - astral-sh/ruff #9170</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Undocumented formatter deviation - empty lines are removed from block beginning</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/9170">#9170</a>
        opened by <a href="https://github.com/jond01">@jond01</a>
        on 2023-12-17 16:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jond01">@jond01</a> on 2023-12-17 16:01</div>
            <div class="timeline-body"><ul>
<li>A minimal code snippet that reproduces the bug:
Original <code>.py</code> file:</li>
</ul>
<pre><code class="language-py">def f():

    pass

</code></pre>
<p>Black - unchanged.</p>
<p>Ruff:</p>
<pre><code class="language-py">def f():
    pass

</code></pre>
<p>The same happens with if statements, for loops, class declarations, etc.</p>
<ul>
<li>The command you invoked: <code>ruff format</code>.</li>
<li>The current Ruff settings: nothing relevant.</li>
<li>The current Ruff version: 0.1.8</li>
</ul>
<p>More examples are here:
https://github.com/mlrun/mlrun/pull/4748</p>
<ul>
<li>https://github.com/mlrun/mlrun/pull/4748/files#diff-277e10f57c688505214127056ff0b8b38c04197562f1fff844ddbd7700e69ec7</li>
<li>https://github.com/mlrun/mlrun/pull/4748/files#diff-eab0b5a3c6ae8610645aa6cd8e98d6ada4b71820a550b0ea8c10588f62f018ae</li>
<li>https://github.com/mlrun/mlrun/pull/4748/files#diff-85933aa74a2d66c3e4dcdf7a9ad8397f5a7971080d34ef1108296a7c6b69e7e3</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MichaReiser on 2023-12-18 00:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @MichaReiser on 2023-12-18 00:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Formatter: Stable" by @MichaReiser on 2023-12-18 00:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-20 05:00</div>
            <div class="timeline-body"><p>Are you using Black in preview mode? As far as I can tell, Black does indeed remove the blank line here: https://black.vercel.app/?version=main&amp;state=_Td6WFoAAATm1rRGAgAhARYAAAB0L-Wj4AB7AE9dAD2IimZxl1N_WlbvK5V9Hvo0zZlkjkY7jWHIgmdR0rHlIb74KGjor5TXSOaGv8qKEVysQM7wuFOHgrCWK8Ui7FQA2zwGzHKOlacpv7iYIwAAAIh9HcwrvN0JAAFrfFA6PP8ftvN9AQAAAAAEWVo=</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-20 05:11</div>
            <div class="timeline-body"><p>Confirming that this is part of preview, so it's a case of https://github.com/astral-sh/ruff/issues/8893. Merging into that issue, thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-12-20 05:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:52 UTC
    </footer>
</body>
</html>
