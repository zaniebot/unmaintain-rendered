<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remove `output-format=text` - astral-sh/ruff #12040</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Remove <code>output-format=text</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12040">#12040</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2024-06-26 08:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-06-26 08:14</div>
            <div class="timeline-body"><p>https://github.com/astral-sh/ruff/pull/12010 (shipped in Ruff 0.5) made using <code>output-format=text</code> a hard error. The next deprecation step is to remove the option entirely in 0.6 or 0.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.6" by @MichaReiser on 2024-06-26 08:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @dhruvmanila on 2024-06-28 06:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "v0.6" by @MichaReiser on 2024-08-12 14:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.7" by @MichaReiser on 2024-08-12 14:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-10-08 12:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/simsong">@simsong</a> on 2025-06-26 19:43</div>
            <div class="timeline-body"><p>so how do you turn off all of the TTY escape codes in the output?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/simsong">@simsong</a> on 2025-06-26 19:47</div>
            <div class="timeline-body"><p>Apparently you need to run with <code>NO_COLOR=1</code> environment variable set. ruff is using some magic Rust thing to figure out if it should colorize the output, and this fails when running inside an emacs compile window. You get stuff like this:</p>
<p><img src="https://github.com/user-attachments/assets/8b26cd80-08fa-4ba9-accc-d8239e30ab26" alt="Image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-26 20:09</div>
            <div class="timeline-body"><p>Another option, if you do want the colors, is to add this to your config:</p>
<pre><code class="language-elisp">(require 'ansi-color)
(add-hook 'compilation-filter-hook 'ansi-color-compilation-filter)
</code></pre>
<p>That's what I have in my Emacs config!</p>
<p><img src="https://github.com/user-attachments/assets/a393a7b9-4baa-43d8-be78-2d7a09e5d5ad" alt="Image" /></p>
<p>I double-checked with <code>emacs -nw -Q</code> to make sure that was the important piece of configuration and that it works in the terminal.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/simsong">@simsong</a> on 2025-06-26 23:46</div>
            <div class="timeline-body"><p>Woah. Thanks.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:14 UTC
    </footer>
</body>
</html>
