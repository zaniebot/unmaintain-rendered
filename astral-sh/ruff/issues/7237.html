<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improved string processing POC - astral-sh/ruff #7237</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Improved string processing POC</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/7237">#7237</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2023-09-08 08:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-09-08 08:06</div>
            <div class="timeline-body"><p>Create a POC for #6936 to explore possible implementations and the performance implications.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @MichaReiser by @MichaReiser on 2023-09-08 08:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Formatter: Beta" by @MichaReiser on 2023-09-08 08:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @MichaReiser on 2023-09-08 08:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-09-08 17:27</div>
            <div class="timeline-body"><p>Learnings so far</p>
<ul>
<li>Black picks the preferred quote depending on the string parts that it merges. Meaning, the implicit string concatenation may have some parts that use single and other parts that use double quotes, depending on what requires the fewest escape for that specific line. Implementing this in Ruff is probably very hard, if not impossible. Ruff normalizes the entire string and picks a single quote for all parts</li>
<li>I need to investigate if black applies the same formatting for triple quoted strings, and if it does, where ruff breaks these strings correctly. It could be a problem that the separator in 'flat' mode requires less space than the separator in expanded mode (one space vs triple quotes).</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "Formatter: Beta" by @MichaReiser on 2023-09-25 09:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Formatter: Stable" by @MichaReiser on 2023-09-25 09:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2023-09-27 13:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:10 UTC
    </footer>
</body>
</html>
