<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B007 fixer: don't mark loop variable as ignored when the dict iteration can be fixed - astral-sh/ruff #13771</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>B007 fixer: don't mark loop variable as ignored when the dict iteration can be fixed</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13771">#13771</a>
        opened by <a href="https://github.com/xmo-odoo">@xmo-odoo</a>
        on 2024-10-16 09:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/xmo-odoo">@xmo-odoo</a> on 2024-10-16 09:22</div>
            <div class="timeline-body"><p>Given code like</p>
<pre><code class="language-python">for a, b in foo.items():
    something(b)
</code></pre>
<p>Currently the fixer will rename <code>a</code> to <code>_a</code>, but the better fix here would be to drop <code>a</code> entirely and iterate on <code>foo.values()</code> instead. Likewise <code>foo.keys()</code> if <code>b</code> is the unused loop variable.</p>
<p>Now obviously <code>foo</code> could technically be a non-mapping which just happens to have a <code>.items()</code> yielding a pair of items, but given the fixer is already unsafe I am not sure that would be a major issue?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrugman">@sbrugman</a> on 2024-10-16 22:10</div>
            <div class="timeline-body"><p>Hi @xmo-odoo ,</p>
<p>Thanks for raising this issue.</p>
<p>The rule <a href="https://docs.astral.sh/ruff/rules/incorrect-dict-iterator/#incorrect-dict-iterator-perf102">incorrect-dict-iterator (PERF102)</a> already addresses the case you are describing (and supports auto fix which is marked unsafe as you note).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @xmo-odoo on 2024-10-17 09:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/xmo-odoo">@xmo-odoo</a> on 2024-10-17 09:34</div>
            <div class="timeline-body"><p>Noted, thanks.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:14 UTC
    </footer>
</body>
</html>
