<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C417 false positive when not exactly 1 lambda parameter - astral-sh/ruff #15796</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>C417 false positive when not exactly 1 lambda parameter</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/15796">#15796</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-01-28 22:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dscorbett">@dscorbett</a></div>
            <div class="timeline-body"><h3>Description</h3>
<p><a href="https://docs.astral.sh/ruff/rules/unnecessary-map/"><code>unnecessary-map</code> (C417)</a> has a false positive in Ruff 0.9.3 when there is not exactly one lambda parameter. If the fix is enabled, it changes the programâ€™s behavior by suppressing or changing the raised error.</p>
<pre><code class="language-console">$ cat &gt;c417.py &lt;&lt;'# EOF'
try:
    print(list(map(lambda: 1, &quot;xyz&quot;)))
except Exception as e:
    print(repr(e))
try:
    print(list(map(lambda x, y: x, [(1, 2), (3, 4)])))
except Exception as e:
    print(repr(e))
try:
    print(list(map(lambda x, y: x, &quot;xyz&quot;)))
except Exception as e:
    print(repr(e))
# EOF

$ python c417.py
TypeError('&lt;lambda&gt;() takes 0 positional arguments but 1 was given')
TypeError(&quot;&lt;lambda&gt;() missing 1 required positional argument: 'y'&quot;)
TypeError(&quot;&lt;lambda&gt;() missing 1 required positional argument: 'y'&quot;)

$ ruff --isolated check  --select C417 c417.py --unsafe-fixes --fix
Found 3 errors (3 fixed, 0 remaining).

$ cat c417.py
try:
    print([1 for _ in &quot;xyz&quot;])
except Exception as e:
    print(repr(e))
try:
    print([x for x, y in [(1, 2), (3, 4)]])
except Exception as e:
    print(repr(e))
try:
    print([x for x, y in &quot;xyz&quot;])
except Exception as e:
    print(repr(e))

$ python c417.py
[1, 1, 1]
[1, 3]
ValueError('not enough values to unpack (expected 2, got 1)')
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-01-29 18:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:52:05 UTC
    </footer>
</body>
</html>
