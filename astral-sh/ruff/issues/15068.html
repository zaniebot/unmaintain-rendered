<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F841 should also lint dummy variables - astral-sh/ruff #15068</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>F841 should also lint dummy variables</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/15068">#15068</a>
        opened by <a href="https://github.com/SaturnFromTitan">@SaturnFromTitan</a>
        on 2024-12-19 15:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/SaturnFromTitan">@SaturnFromTitan</a> on 2024-12-19 15:09</div>
            <div class="timeline-body"><p>First off, thanks a ton for the fantastic project! I love how the Python lining ecosystem is streamlined by <code>ruff</code> ‚ù§</p>
<h2>Description</h2>
<p>The docs of <code>F841</code> give the following example:</p>
<pre><code class="language-python">def asdf() -&gt; int:
    x = 1
    y = 2
    return x
</code></pre>
<p><code>y</code> is correctly identified as an unused variable.</p>
<p><code>ruff</code> won't flag the unused variable if a dummy variable, i.e. <code>_</code>, is used (<a href="https://play.ruff.rs/19e4c2b2-9890-48ff-ba10-dad8d11ad0f0">playground</a>). I don't think there's any value in the assignment, so it should still be flagged/fixed as well imo. If a user really wants to allow the syntax, using <code># noqa: F841</code> should be preferred as it's more explicit.</p>
<p>Dummy variables should only be respected when unpacking multiple values, i.e.</p>
<pre><code class="language-python">my_var, _ = my_func()
</code></pre>
<h2>Real-world example</h2>
<p>I stumbled upon the following pattern in my code base:</p>
<pre><code class="language-python">_ = my_func()
</code></pre>
<p>I would've expected it to be auto-corrected to</p>
<pre><code class="language-python">my_func()
</code></pre>
<p>However, <code>F841</code> wasn't triggered due to the dummy variable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2024-12-19 19:32</div>
            <div class="timeline-body"><p>You can configure dummy variables with https://docs.astral.sh/ruff/settings/#lint_dummy-variable-rgx . I wonder if you could configure it to never match in your case. (Although that might not interact correctly with unpacking)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-20 07:56</div>
            <div class="timeline-body"><p>You can set the the dummy variable rgx to <code>^$</code> which only accepts empty strings (which isn't a valid dummy variable). See <a href="https://play.ruff.rs/676dcdbd-c8db-483e-9675-85c0de923da6">playground</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-12-20 07:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SaturnFromTitan">@SaturnFromTitan</a> on 2024-12-20 08:13</div>
            <div class="timeline-body"><p>@MichaReiser @Avasam Thanks for your answers. I see that changing the config resolves the issue, but it feels like a hack. I want to use <code>_</code> as a dummy variable in other situations where there's no good alternative to them (see below). I'm afraid changing the config might break or cause issues with other rules in the future.</p>
<p>My argument is that even if <code>_</code> is a dummy variable, there's no value in keeping the assignment. So I don't see why the lint rule should be effectively disabled. As mentioned above, if someone wants to disable the lint rule, an explicit <code># noqa: F841</code> should be preferred.</p>
<p>IMO Dummy variables should only be used if the there's no good alternative syntax, i.e. <code>for</code> loops, pattern matching, match-case statements, etc.:</p>
<pre><code class="language-python">my_val1, _, my_val3 = my_func()
</code></pre>
<p>or</p>
<pre><code class="language-python">for _ in range(100):
    print(&quot;hello&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2024-12-20 19:41</div>
            <div class="timeline-body"><p>This seems to be an old (and apparently controversial) debate: https://github.com/PyCQA/pyflakes/issues/202
I'm not sure how I personally feel about either side, but I'm tempted to side with the inertia of leaving the behavior as is - it has been this way in Pyflakes itself since 2018.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-21 13:56</div>
            <div class="timeline-body"><p>I agree; we should not change this. It has also not come up before (at least to my knowledge), which suggests that what we have today works for most users.</p>
<p>I think we could consider some improvements to flag unused code where the left is a dummy variable and the right side is a constant. But I'm not sure if that would be what you're looking for @SaturnFromTitan</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SaturnFromTitan">@SaturnFromTitan</a> on 2024-12-23 13:41</div>
            <div class="timeline-body"><blockquote>
<p>This seems to be an old (and apparently controversial) debate: <a href="https://github.com/PyCQA/pyflakes/issues/202">PyCQA/pyflakes#202</a> I'm not sure how I personally feel about either side, but I'm tempted to side with the inertia of leaving the behavior as is - it has been this way in Pyflakes itself since 2018.</p>
</blockquote>
<p>Thanks for linking this discussion! I didn't know some companies/projects have adopted <code>_ = my_func()</code> as an intentional style decision. I don't quite agree that it's a good convention, but that doesn't matter üòÑ  I see now why pyflakes/ruff want to support it üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @SaturnFromTitan on 2024-12-23 13:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:15 UTC
    </footer>
</body>
</html>
