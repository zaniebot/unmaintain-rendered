```yaml
number: 316
title: SPR001 false positives for two-argument super()
type: issue
state: closed
author: andersk
labels:
  - bug
assignees: []
created_at: 2022-10-04T04:42:14Z
updated_at: 2022-10-04T17:55:33Z
url: https://github.com/astral-sh/ruff/issues/316
synced_at: 2026-01-10T01:56:44Z
```

# SPR001 false positives for two-argument super()

---

_Issue opened by @andersk on 2022-10-04 04:42_

`super(MyClass, arg)` can only be replaced with `super()` if `arg` is the first argument to a function thatâ€™s defined within `class MyClass`. In other cases, the `SPR001` diagnostic from ruff (and from flake8-super, I guess) is a false positive.

Some examples:

```python
class BaseClass:
    def f(self):
        pass


def defined_outside(self):
    super(MyClass, self).f()  # CANNOT use super()


class MyClass(BaseClass):
    def normal(self):
        super(MyClass, self).f()  # can use super()
        super().f()

    def different_argument(self, other):
        super(MyClass, other).f()  # CANNOT use super()

    def comprehension_scope(self):
        [super(MyClass, self).f() for x in [1]]  # CANNOT use super()

    def inner_functions(self):
        def outer_argument():
            super(MyClass, self).f()  # CANNOT use super()

        def inner_argument(self):
            super(MyClass, self).f()  # can use super()
            super().f()

        outer_argument()
        inner_argument(self)

    def inner_class(self):
        class InnerClass:
            super(MyClass, self).f()  # CANNOT use super()

            def method(inner_self):
                super(MyClass, self).f()  # CANNOT use super()

        InnerClass().method()

    defined_outside = defined_outside


MyClass().normal()
MyClass().different_argument(MyClass())
MyClass().comprehension_scope()
MyClass().inner_functions()
MyClass().inner_class()
MyClass().defined_outside()
```

Some false positives in the wild:

https://github.com/zulip/zulip/blob/5.6/zerver/lib/test_helpers.py#L167
https://github.com/zulip/zulip/blob/5.6/zerver/tests/test_auth_backends.py#L326

---

_Comment by @charliermarsh on 2022-10-04 11:55_

Nice, good call, will fix.

---

_Label `bug` added by @charliermarsh on 2022-10-04 12:38_

---

_Assigned to @charliermarsh by @charliermarsh on 2022-10-04 16:42_

---

_Comment by @charliermarsh on 2022-10-04 16:42_

Working on this now.

---

_Referenced in [astral-sh/ruff#323](../../astral-sh/ruff/pulls/323.md) on 2022-10-04 17:45_

---

_Closed by @charliermarsh on 2022-10-04 17:55_

---
