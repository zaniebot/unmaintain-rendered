<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clarify and document process/criteria for the inclusion of new checks - astral-sh/ruff #2257</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Clarify and document process/criteria for the inclusion of new checks</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/2257">#2257</a>
        opened by <a href="https://github.com/sciyoshi">@sciyoshi</a>
        on 2023-01-27 14:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sciyoshi">@sciyoshi</a> on 2023-01-27 14:50</div>
            <div class="timeline-body"><p>People who are looking to adopt Ruff will invariably have differing needs from their linter. There are currently at least 400 flake8 plugins/linter packages on PyPI, and it is unlikely that Ruff will grow in scope to support all of them (nor should it, I think).</p>
<p>Given this, and especially in the absence of a <a href="https://github.com/charliermarsh/ruff/issues/283#issuecomment-1403025627">plugin system</a>, I think it would be helpful to document what checks would be accepted into Ruff. There is some information on the maintenance team's perspective on this scattered throughout comments in the GitHub issues. Perhaps the clearest stance I've seen is <a href="https://github.com/charliermarsh/ruff/issues/2054#issuecomment-1399613889">laid out here</a>, but there are also some related thoughts <a href="https://github.com/charliermarsh/ruff/issues/2142#issuecomment-1402739664">here</a> and <a href="https://github.com/charliermarsh/ruff/issues/2142#issuecomment-1402695405">here</a>. If I were to attempt to summarize:</p>
<ol>
<li><p><strong>There should be a clear rationale for why a check is useful.</strong></p>
<p>An obvious criteria, and I would suggest that such a rationale would make sense to include as part of any documentation for the check.</p>
</li>
<li><p><strong>It should be sufficiently robust, i.e. few false positives and negatives.</strong></p>
<p>For checks that are enabled by default in Ruff, I would agree with this. However, there is a class of checks that are useful to enable in some scenarios, but that shouldn't be enabled by default and should likely be explicitly opt-in. Would these be considered for inclusion? There's been discussion of having <a href="https://github.com/charliermarsh/ruff/issues/1774">check categories</a>, and maybe the answer is that the work there needs to be completed first.</p>
</li>
<li><p><strong>It should not be overly complex to implement relative to its usefulness.</strong></p>
<p>This might exclude some otherwise useful checks, but I think limiting scope in this way makes sense in order to reduce the maintenance burden.</p>
</li>
<li><p><strong>There should be evidence of demand.</strong></p>
<p>Does this mean the check is part of a flake8 plugin with N downloads/month for some N &gt;&gt; 0? Or is opening GitHub issue with a few votes enough to count?</p>
</li>
</ol>
<p>I would suggest another criteria: checks should likely be library-agnostic. Note that some upstream checks that are planned for inclusion already go against this, e.g. Django- and requests-related checks in flake8-bandit.</p>
<p>As an example, ESLint documents their <a href="https://eslint.org/docs/latest/contribute/propose-new-rule">guidelines for new rules here</a>. Including a similar section with some of the above information in CONTRIBUTING.md would I think be helpful.</p>
<p>There is also the broader question of whether Ruff is planning to take an opinionated stance on linting (akin to black for formatting), but maybe that is a separate discussion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sciyoshi">@sciyoshi</a> on 2023-01-27 14:52</div>
            <div class="timeline-body"><p>Disclosure: I bring this question up because of a specific security-related check I'd be interested in seeing in Ruff that we've been using in our own codebase via a custom flake8 plugin, that is broadly useful but will likely have false positives (should not be enabled by default), and that has been requested in <a href="https://github.com/PyCQA/flake8-bugbear/issues/57">flake8-bugbear</a> and <a href="https://github.com/PyCQA/bandit/issues/445">flake8-bandit</a> but not yet implemented. At the moment, it seems there isn't a great place to add it (short of creating a new flake8 plugin for it specifically), but if there is a chance of it being accepted I'd be happy to do that work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-27 15:34</div>
            <div class="timeline-body"><p>This is great and a much-needed discussion. I can't write a complete response <em>right now</em> but I'll try to return to this as soon as I can (hopefully this weekend).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-01-27 15:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sciyoshi">@sciyoshi</a> on 2023-01-30 01:21</div>
            <div class="timeline-body"><p>Two other thoughts/questions that came to mind along similar lines:</p>
<ul>
<li>Should Ruff include checks for compatibility with versions of Python that are unsupported by Ruff itself? (Per <a href="https://github.com/charliermarsh/ruff/issues/2096#issuecomment-1399652963">this comment</a>, probably not).</li>
<li>Should Ruff include checks for things that would normally be addressed by an AST-preserving autoformatter (black or <a href="https://github.com/charliermarsh/ruff/issues/1904">otherwise</a>)? Note that the already-implemented <code>flake8-quotes</code> and <code>flake8-commas</code> probably fall into this category, as would <a href="https://github.com/charliermarsh/ruff/issues/2319#issuecomment-1407548839"><code>flake8-tabs</code></a>.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2315.html">astral-sh/ruff#2315</a> on 2023-01-31 04:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/berzi">@berzi</a> on 2023-02-22 08:19</div>
            <div class="timeline-body"><p>Additional question: is the process of implementing new checks documented for potential contributors? Upon a (very) cursory look I couldn't find anything and if I wanted to contribute I'd have to read existing code and try to emulate it, which might result in suboptimal implementation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-22 16:15</div>
            <div class="timeline-body"><p>@berzi - Yeah, the contributing section has some guidance on adding new rules! https://beta.ruff.rs/docs/contributing/#example-adding-a-new-lint-rule</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3269.html">astral-sh/ruff#3269</a> on 2023-02-28 17:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jankatins">@jankatins</a> on 2023-03-16 12:15</div>
            <div class="timeline-body"><p>Another suggestion I would have is a &quot;black&quot;-like opinionated but more or less universally applicable set of checks as default: checks for clear bugs, (by some definition) sane formatting, typing problems, old style code which has newer versions, security issues, ... So I can drop in <code>ruff .</code> or even <code>ruff . --fix</code> and get a nice codebase (after fixing all checks) without having to configure anything at the start. Similar to the black experience: It makes sense, one might have a slightly different opinion but having one thing implemented makes the codebase better than not having ruff run on it. no matter the opinions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/berzi">@berzi</a> on 2023-03-16 12:18</div>
            <div class="timeline-body"><p>@jankatins A default configuration already exists. One might argue it's currently too conservative, but that seems like a discussion for a separate issue.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:49 UTC
    </footer>
</body>
</html>
