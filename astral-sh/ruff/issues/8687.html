<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A config option to ignore rules for specific lines by pattern matching or something similar - astral-sh/ruff #8687</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>A config option to ignore rules for specific lines by pattern matching or something similar</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8687">#8687</a>
        opened by <a href="https://github.com/Lassii-">@Lassii-</a>
        on 2023-11-15 07:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lassii-">@Lassii-</a></div>
            <div class="timeline-body"><p>Hello,</p>
<p>I&#x27;m working in a project where we&#x27;re currently introducing Ruff as the solution for linting and it&#x27;s overall working great but we have one situation where I haven&#x27;t been able to find a good solution. We use Python and Robot Framework and we define the RF test keywords to be used in RF in Python, for example <code>@keyword(&quot;User presses the info button&quot;</code> and some of these lines are longer than 120 characters which is our line length limit set in Ruff.</p>
<p>However for these lines we would like to ignore the rule because the readability gets worse if they&#x27;re split. I&#x27;m aware that you can add <code># noqa: E501</code> to a line to ignore the rule but this is quite cumbersome and needs manual maintenance plus these files also have other lines that we want the rule to be enabled for so full file E501 ignore is not good.</p>
<p>There doesn&#x27;t currently seem to be a way to match lines inside files by a pattern to ignore specific rules, for example lines that start with the already mentioned <code>@keyword</code> so could something like this be implemented?</p>
<p>Thank you,
Lassi</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">noqa</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-15 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-15 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-15 17:51</div>
            <div class="timeline-body"><p>Interesting. I could see a regex -&gt; rule codes mapping to ignore violations where the diagnostic range matches that in the regex. In practice though, I think this would be hard to implement in a performant way that matches user expectations.</p>
<p>A simpler approach would be a dedicated setting for <code>E501</code> e.g. <code>ignores_lines: [regex, ...]</code> but I&#x27;m not excited about that either.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MusicalNinjaDad">@MusicalNinjaDad</a> on 2025-01-11 09:49</div>
            <div class="timeline-body"><p>+1 for this idea with a different use case:</p>
<p>I find I start all my tests with:</p>
<pre><code>import pytest  # noqa: F401, RUF100
</code></pre>
<p>so that I can temporarily add and remove various marks etc. (e.g. <code>pytest.mark.xfail</code> or <code>pytest.mark.skip</code>) as tests and code changes, without constantly reimporting pytest and removing the import if I remove the mark.</p>
<p>I&#x27;d rather not add <code>F401</code> to my</p>
<pre><code>[tool.ruff.lint.per-file-ignores]
    # Additional ignores for tests 
    &quot;**/test_*.py&quot; = [
     ...
    ]
</code></pre>
<p>as I want other imports to be checked.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/coredumperror">@coredumperror</a> on 2025-01-29 19:01</div>
            <div class="timeline-body"><p>I&#x27;d also like a feature like this, to make Ruff ignore my <code>nosemgrep</code> comments.</p>
<p>For instance, it&#x27;ll complain about the following as &quot;commented out code&quot; (rule ERA001):</p>
<pre><code> # nosemgrep:direct-use-of-jinja2</code></pre>
<p>That&#x27;s a false positive in this particular case, though I would rather not ignore the rule globally. But it&#x27;s also rather cumbersome to add <code># noqa: ERA001</code> to every single one of my nosemgrep comments.</p>
<p>Some way to say &quot;Ignore ERA001 on all lines that begin with <code># nosemgrep</code>&quot; would be great.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-02-02 16:18</div>
            <div class="timeline-body"><p>@coredumperror You can add <code>nosemgrep</code> to the <a href="https://docs.astral.sh/ruff/settings/#lint_task-tags"><code>task-tags</code></a> setting. While not intended for this use case, it should work.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:45 UTC
    </footer>
</body>
</html>
