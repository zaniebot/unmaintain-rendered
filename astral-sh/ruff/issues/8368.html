<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow override of configuration options via the CLI - astral-sh/ruff #8368</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow override of configuration options via the CLI</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8368">#8368</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2023-10-30 21:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>Currently, Ruff includes many configuration options that are only available via a configuration file. These options should be available via the CLI as well so users can either:</p>
<ul>
<li>Provide configuration options without defining a configuration file</li>
<li>Override configuration options per invocation of Ruff without modifying files</li>
</ul>
<p>There have been previous requests for this, but I could not find them. If you know where they&#x27;re at please share so we can have more historical context here.</p>
Proposals
<p>There are a few options for exposing this capability.</p>
<p><strong>Environment variables</strong></p>
<p>Add environment variable overrides for all settings. Environment variables would take precedence over all persistent configuration options but not CLI flags.</p>
<p><strong>A repeatable CLI option with key value pairs</strong></p>
<p>A  CLI option for overriding settings e.g. <code>--setting &lt;NAME&gt;=&lt;VALUE&gt;</code></p>
<p>Alternative names include <code>--settings</code>, <code>--override-setting</code>, <code>--override-config</code>, <code>--set-config</code>, <code>--configure</code>, <code>--override</code>, <code>--option</code>, <code>--options</code></p>
<blockquote>
<p>Ruff already uses <code>--config &lt;CONFIG&gt;</code> to provide a path to a configuration file.
Cargo uses <code>--config</code> for both overriding options <em>and</em> providing the path to a configuration file.</p>
</blockquote>
<p><strong>A CLI option with JSON support</strong></p>
<p>A  CLI option for overriding settings in bulk e.g. <code>--settings {...}</code></p>
<p>This has been requested for programmatic use of Ruff previously e.g. you can use <code>jq</code> to pass a configuration file in bulk. However, this is not a very user-friendly approach for most use cases.</p>
<p><strong>Dedicated CLI options</strong></p>
<p>A dedicated CLI option generated for each setting e.g. <code>--set-&lt;name&gt; VALUE</code>.</p>
<p>We would probably omit enumerating these in the <code>help</code> menus and document the pattern instead. We could omit the <code>set-</code> prefix but then we need to worry about collisions between configuration options and existing CLI flags. Additionally, this option does not work well with the <code>&lt;section&gt;.&lt;name&gt;</code> syntax used in our configuration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2023-10-30 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2023-10-30 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-10-30 21:21</div>
            <div class="timeline-body"><p>For what it&#x27;s worth, I think that <code>--config NAME=VALUE</code> matching Cargo&#x27;s design is reasonable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2023-10-30 22:33</div>
            <div class="timeline-body"><p>Loved these proposals, here are examples and cons of each:</p>
1. Environment variables
<pre><code>RUFF_FORMAT_LINE_LENGTH=120 ruff format .
</code></pre>
<p>cons:</p>
<ul>
<li>All words capitalized and <code>-</code> replaced by <code>_</code></li>
<li>Problem with <code>&lt;section&gt;.&lt;name&gt;</code> settings</li>
<li>Long, less user friendly because they may be varied by different shells/OSs.</li>
</ul>
2. A repeatable CLI option with key value pairs (e.g. <code>--config</code>)
<pre><code>ruff format . --config line-length=120
</code></pre>
<p>cons:</p>
<ul>
<li>it&#x27;s long and it may not preferable where e.g. <code>--line-length</code> already available to choose.</li>
</ul>
3. A CLI option with JSON support (e.g. <code>--config</code>)
<pre><code>ruff format . --config {&quot;line-length&quot;:120}
ruff format . --config eyJsaW5lLWxlbmd0aCI6MTIwfQ==
</code></pre>
<p>cons:</p>
<ul>
<li>it&#x27;s not clear it should merge with already loaded settings or reset it.</li>
<li>it&#x27;s not clear what should happen when using it multiple times.</li>
</ul>
4. Dedicated CLI options (without any prefixes)
<pre><code>ruff format . --line-length=120
</code></pre>
<p>cons:</p>
<ul>
<li>Collisions with existing CLI flags</li>
<li>Problem with <code>&lt;section&gt;.&lt;name&gt;</code> settings</li>
</ul>
<hr>
<p>I think 1, 2 and 3 can be supported at same time.
4 can be preferable over 2 when its conditions are available (no <code>.</code> in settings name).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-01-19 19:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-02-09 21:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:44 UTC
    </footer>
</body>
</html>
