<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How are we supposed to document constructors and how does this affect the class documentation? - astral-sh/ruff #9972</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How are we supposed to document constructors and how does this affect the class documentation?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/9972">#9972</a>
        opened by <a href="https://github.com/nbro10">@nbro10</a>
        on 2024-02-13 10:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nbro10">@nbro10</a> on 2024-02-13 10:56</div>
            <div class="timeline-body"><p>This is my first time trying ruff. I'm interested in <code>ruff</code> mostly because I'm interested in rust. Our codebases aren't so big that using ruff would lead to a significant improvement in development efficiency, so we could also stick with PyLint, flake8, black and isort, in case ruff does not satisfy our usual needs. Anyway, I have a few questions, all related to docstrings.</p>
<p>Ruff version: 0.2.1</p>
<p>Ruff settings in <code>pyproject.toml</code></p>
<pre><code>[tool.ruff]
line-length = 100
show-fixes = true

[tool.ruff.lint]
select = [&quot;D&quot;]
ignore = [&quot;D104&quot;]

[tool.ruff.lint.pydocstyle]
convention = &quot;google&quot;

[tool.ruff.lint.per-file-ignores]
# Ignore some rules for specific files

[tool.ruff.format]
quote-style = &quot;double&quot;
</code></pre>
<p>Example:</p>
<p>This example actually illustrates more than one problem that I'd like to ask about.</p>
<pre><code># example.py

&quot;&quot;&quot;
A module.
&quot;&quot;&quot;


class A:
    &quot;&quot;&quot;
    A class.
    &quot;&quot;&quot;

    def __init__(self, a):
        &quot;&quot;&quot;

        Args:
            a: The parameter.
        &quot;&quot;&quot;

</code></pre>
<p>Now, if we run <code>ruff check example.py</code>, we will get these warnings</p>
<pre><code>example.py:3:1: D200 One-line docstring should fit on one line
example.py:3:1: D212 [*] Multi-line docstring summary should start at the first line
example.py:9:5: D200 One-line docstring should fit on one line
example.py:9:5: D212 [*] Multi-line docstring summary should start at the first line
example.py:14:9: D205 1 blank line required between summary line and description
example.py:14:9: D212 [*] Multi-line docstring summary should start at the first line
Found 6 errors.
</code></pre>
<p>Btw, I don't get any warnings if I run pylint, which is strange, but I know that <code>ruff</code> and <code>pylint</code> are not really compatible right now. Here, with pylint, I'm only suppressing <code>missing-module-docstring</code> and <code>too-few-public-methods</code>.</p>
<p>Now, I understand the D200 warnings, because <a href="https://peps.python.org/pep-0257/">PEP257</a> suggests the following</p>
<blockquote>
<p>The closing quotes are on the same line as the opening quotes. This looks better for one-liners.</p>
</blockquote>
<p>However, if I run <code>ruff</code> with the option <code>--fix</code>, it will produce this ugliness (which is inconsistent with the suggestion above):</p>
<pre><code># example.py

&quot;&quot;&quot;A module.
&quot;&quot;&quot;


class A:
    &quot;&quot;&quot;A class.
    &quot;&quot;&quot;

    def __init__(self, a):
        &quot;&quot;&quot;Args:
        a: The parameter.
        &quot;&quot;&quot;
</code></pre>
<p>Clearly, I was not expecting e.g.</p>
<pre><code>&quot;&quot;&quot;
A module.
&quot;&quot;&quot;
</code></pre>
<p>to turn into this ugliness</p>
<pre><code>&quot;&quot;&quot;A module.
&quot;&quot;&quot;
</code></pre>
<p>but</p>
<pre><code>&quot;&quot;&quot;A module.&quot;&quot;&quot;
</code></pre>
<p><strong>First of all, why is ruff acting like this? Is this because of a rule, or is this a bug? If this is not a bug, is there a way to tell ruff to format this properly, i.e. have one-liners be one-liners?</strong> In any case, this is inconsistent with <a href="https://peps.python.org/pep-0257/">PEP257</a></p>
<p>Second, you can see that the docstrings of the <code>__init__</code> method also turned into another ugliness</p>
<pre><code>        &quot;&quot;&quot;Args:
        a: The parameter.
        &quot;&quot;&quot;
</code></pre>
<p><strong>Is this also bug? Can we avoid this?</strong> I suppose yes, by ignoring the initial warning, but this feels like a bug because nobody will ever want this format by default - it looks horrible.</p>
<p>Another question - <strong>How are we supposed to document <code>__init__</code> methods, according to ruff and according to the Python conventions?</strong> PyLint never complained that I didn't give a description to the <code>__init__</code> method, as far as I remember. This PyLint behavior is desirable, assuming that we already provide a description for the class, which is the case here.</p>
<p>This leads me to another question - <strong>how are we supposed to document the class when the <code>__init__</code> method also has parameters, according to ruff and the Python conventions?</strong> I think documenting the <code>__init__</code> method when it has no parameters is completely useless. Everyone knows that the <code>__init__</code> method is supposed to initialise. But when it has parameters, we very often want to document those parameters somewhere, which can be in the <code>__init__</code> method or in the class docstring.</p>
<p>Note: I'd like my docstrings to be compatible with Sphinx, which leads me to my last question - <strong>is ruff compatible with sphinx in general? If not, what are the known incompatibilities?</strong></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tmke8">@tmke8</a> on 2024-02-13 20:59</div>
            <div class="timeline-body"><p>The <code>D</code> warnings come from <a href="https://github.com/PyCQA/pydocstyle">pydocstyle</a>, not pylint.</p>
<p>Sphinx can take the documentation both from the class docstring or the <code>__init__</code> docstring. You can control which with this setting: https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#confval-autoclass_content By default Sphinx only looks at the class docstring.</p>
<p>The fixes do look like they might be bugs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/butterlyn">@butterlyn</a> on 2024-06-28 09:10</div>
            <div class="timeline-body"><p>Seconding this as an issue, it's very unusual to require a <code>__init__</code> docstring description if the class already has one.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:11 UTC
    </footer>
</body>
</html>
