<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUF005 rewrites raw strings - astral-sh/ruff #5020</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>RUF005 rewrites raw strings</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/5020">#5020</a>
        opened by <a href="https://github.com/scastlara">@scastlara</a>
        on 2023-06-12 07:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/scastlara">@scastlara</a> on 2023-06-12 07:53</div>
            <div class="timeline-body"><p>Hello! üëãüèΩ</p>
<p>I've encountered this problem when working on a django+rest-framework project.</p>
<p><code>RUF005</code> seems to rewrite my <code>re_path</code> (which are regular expression paths) so that they don't use python's raw strings anymore. Maybe this is intended, maybe not, but it is rather strange.</p>
<pre><code class="language-python">from django.urls import re_path
from api.v1.routers import SimpleRouter

MyView = None
AnotherView = None
router = SimpleRouter()
router.register(r&quot;another-endpoint&quot;, AnotherView)

urlpatterns = [
    re_path(r&quot;^my-endpoint/?&quot;, MyView, name=&quot;view1&quot;),
    re_path(r&quot;^my-endpoint/(?P&lt;pk&gt;\d+)?&quot;, MyView, name=&quot;view2&quot;),
] + router.urls
</code></pre>
<p>And then <code>ruff --select=RUF005 foo.py</code></p>
<pre><code>foo.py:9:15: RUF005 Consider `[re_path(&quot;^my-endpoint/?&quot;, MyView, name=&quot;view1&quot;), re_path(&quot;^my-endpoint/(?P&lt;pk&gt;\\d+)?&quot;, MyView, name=&quot;view2&quot;), *router.urls]` instead of concatenation
Found 1 error.
</code></pre>
<p>Making it use <code>*router.urls</code> is indeed the purpose of this rule, but it seems strange it undoes my raw strings, especially this one  which I think is just better with <code>r&quot;&quot;</code>:</p>
<p><code>r&quot;^my-endpoint/(?P&lt;pk&gt;\d+)?&quot;</code> ‚û°Ô∏è  <code>&quot;^my-endpoint/(?P&lt;pk&gt;\\d+)?&quot;</code></p>
<p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-12 12:51</div>
            <div class="timeline-body"><p>Thank you for the clear issue :) Totally -- this is a bug in Ruff, though one that's a little tricky for us to fix, so won't be resolved immediately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-12 12:53</div>
            <div class="timeline-body"><p>I think this is a duplicate of #4130, so closing in favor of that, though I take this as another vote that we need to fix it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-06-12 12:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-06-12 12:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:50 UTC
    </footer>
</body>
</html>
