<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Feature Request] Add a rule that warns about assigning None - astral-sh/ruff #13477</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>[Feature Request] Add a rule that warns about assigning None</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/13477">#13477</a>
        opened by <a href="https://github.com/serjflint">@serjflint</a>
        on 2024-09-23 06:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/serjflint">@serjflint</a> on 2024-09-23 06:36</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>Hi! I am switching linters in my codebase from flake8+pylint to ruff.</p>
<p>I found an interesting <a href="https://github.com/python/mypy/issues/17803">bug</a> in the code. People use <code>var = None</code> as a placeholder for values before a loop or a condition. The problem is that mypy considers that as <code>var: None = None</code>.</p>
<p>Can ruff warn about that misuse and propose a change <code>var: SomeType | None = None</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-09-23 08:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by @MichaReiser on 2024-09-23 08:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2024-09-23 08:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-23 08:54</div>
            <div class="timeline-body"><p>Welcome to the ruff users :)</p>
<p>Because you're mentioning pylint and flake8: Do you know if pylint or flake8 have a rule that captures this pattern?</p>
<p>To clarify my understanding. You're referring to code like this (but it applies to all kinds of loops):</p>
<pre><code class="language-python">var = None

for x in range(1, 10):
    var = x


print(x)
</code></pre>
<p>But it doesn't apply if the for loop has an <code>orelse</code> branch where the variable is assigned unconditionally (both in the for body and the orelse).</p>
<p>I'm a bit hesitant of adding such a rule because it assumes specific mypy behavior. We're in the process of building a type checker and our type checker would correctly infer the <code>var</code> type as <code>int | None</code> if it is unannotated. I also suspect that implementing said rules requires implementing something close to a type checker to have a low false positive rate.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
