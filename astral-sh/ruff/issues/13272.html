<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruff format attempts to format git related files - astral-sh/ruff #13272</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ruff format attempts to format git related files</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13272">#13272</a>
        opened by <a href="https://github.com/naquiroz">@naquiroz</a>
        on 2024-09-06 20:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/naquiroz">@naquiroz</a></div>
            <div class="timeline-body">

<p>Keywords searched: <code>git</code></p>
<p>When creating a branch with a name that ends in <code>.py</code>, ruff attempts so format it.</p>
<p><img src="https://github.com/user-attachments/assets/c9b7b28d-d003-4230-9a4a-86a9ae6d6c13" alt="CleanShot 2024-09-06 at 15 58 11"></p>
Steps to reproduce
<ol>
<li>Create a branch in git with a name like <code>my-file.py</code></li>
<li>Run the ruff formatter.</li>
<li>See how it tries to format a git file.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Ruf format attempts to format git related files.&quot; to &quot;Ruf format attempts to format git related files&quot; by <a href="https://github.com/naquiroz">@naquiroz</a> on 2024-09-06 20:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-06 20:40</div>
            <div class="timeline-body"><p>Hehe that&#x27;s funny. Would you mind sharing your configuration? I wonder if <a href="https://docs.astral.sh/ruff/settings/">respect-gitignore</a> is on or off</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Ruf format attempts to format git related files&quot; to &quot;Ruff format attempts to format git related files&quot; by <a href="https://github.com/naquiroz">@naquiroz</a> on 2024-09-06 21:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/naquiroz">@naquiroz</a> on 2024-09-06 21:35</div>
            <div class="timeline-body"><p>How do I get my configuration?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-07 12:42</div>
            <div class="timeline-body"><p>Do you have a <code>pyproject.toml</code> with a <code>[tool.ruff]</code> section or a <code>ruff.toml</code> in your project? See <a href="https://docs.astral.sh/ruff/configuration/">How to configure Ruff</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-09 11:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2024-09-15 17:31</div>
            <div class="timeline-body"><p>Oh yeah I remember this happenning to me once, but forgot to report. I don&#x27;t have <code>respect-gitignore</code> set in any of my projects.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-16 08:23</div>
            <div class="timeline-body"><p>I verified this locally and I can only reproduce this behavior when overriding the <a href="https://docs.astral.sh/ruff/settings/#exclude"><code>exclude</code></a> setting.</p>
<p>Ruff ignores the <code>.gitignore</code> directory by default because it is part of the default <code>exclude</code> list. You may want to consider using <code>extend-exclude</code> if you want to exclude some directories in addition to the default once.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-info</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-16 08:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/naquiroz">@naquiroz</a> on 2024-09-17 13:09</div>
            <div class="timeline-body"><p>I&#x27;m sharing my <code>pyproject.toml</code></p>
<p>I&#x27;ll also take a look into the <code>extend-exclude</code></p>
<pre><code>[tool.poetry]
name = &quot;redacted&quot;
version = &quot;0.1.0&quot;
description = &quot;Backend&quot;
package-mode = false

[tool.poetry.dependencies]
python = &quot;3.11.7&quot;
babel = &quot;2.13.1&quot;
boto3 = &quot;1.28.85&quot;
django = &quot;4.2.11&quot;
django-model-utils = &quot;4.3.1&quot;
djangorestframework = &quot;3.14.0&quot;
django-extensions = &quot;^3.2.3&quot;
django-cors-headers = &quot;^4.3.0&quot;
djangorestframework-simplejwt = &quot;^5.3.0&quot;
drf-yasg = &quot;1.21.7&quot;
faker = &quot;20.0.0&quot;
fastapi = &quot;0.104.1&quot;
loguru = &quot;0.7.2&quot;
pandas = &quot;2.2.0&quot;
pydantic = &quot;2.5.0&quot;
pyjwt = &quot;2.8.0&quot;
python-dotenv = &quot;1.0.0&quot;
pytz = &quot;2023.3&quot;
redis = &quot;5.0.1&quot;
requests = &quot;2.31.0&quot;
rest-framework-simplejwt = &quot;0.0.2&quot;
sentry-sdk = &quot;1.35.0&quot;
xlsxwriter = &quot;3.1.9&quot;
openpyxl = &quot;^3.1.2&quot;
psycopg2-binary = &quot;^2.9.9&quot;
pandas-market-calendars = &quot;^4.3.2&quot;
resend = &quot;^0.6.0&quot;
heyoo = &quot;^0.1.0&quot;
pyparsing = &quot;^3.1.1&quot;
pydot = &quot;^2.0.0&quot;
holidays = &quot;^0.40&quot;
textdistance = &quot;^4.6.1&quot;
factory-boy = &quot;^3.3.0&quot;
factories = &quot;^1.2.0&quot;
redgreenunittest = &quot;^0.1.1&quot;
slack-sdk = &quot;^3.27.1&quot;
django-money = &quot;^3.4.1&quot;
whitenoise = &quot;^6.6.0&quot;
xstate-machine = &quot;^3.1.2&quot;
moto = &quot;^5.0.4&quot;
python-decouple = &quot;^3.8&quot;
flower = &quot;^2.0.1&quot;
python-dateutil = &quot;^2.9.0.post0&quot;
django-simple-history = &quot;^3.0.0&quot;
drf-extensions = &quot;^0.7.1&quot;
json-log-formatter = &quot;^1.0&quot;
unidecode = &quot;^1.3.8&quot;
celery = {version = &quot;~5.4.0&quot;, extras = [&quot;pytest&quot;]}
django-axes = &quot;^6.5.0&quot;
django-localflavor = &quot;^4.0&quot;
django-countries = &quot;^7.6.1&quot;
uvicorn = &quot;^0.30.1&quot;
gunicorn = &quot;^22.0.0&quot;
xhtml2pdf = &quot;^0.2.16&quot;
jinja2 = &quot;^3.1.4&quot;
celery-types = &quot;^0.22.0&quot;
posthog= &quot;^3.5.0&quot;
google-cloud-logging = &quot;^3.10.0&quot;
phonenumbers = &quot;^8.13.42&quot;
django-silk = &quot;^5.1.0&quot;
django-autocomplete-light = &quot;^3.11.0&quot;
google-cloud-secret-manager = &quot;^2.20.2&quot;
django-filter = &quot;^24.3&quot;
pymupdf = &quot;1.24.9&quot;
djangorestframework-api-key = &quot;^3.0.0&quot;

[tool.poetry.group.dev.dependencies]
ruff = &quot;^0.4.8&quot;
coverage = &quot;^7.5.3&quot;
pytest = &quot;^8.2.2&quot;
pytest-django = &quot;^4.8.0&quot;
pytest-celery = {extras = [&quot;all&quot;], version = &quot;^1.0.0&quot;}
pytest-split = &quot;^0.9.0&quot;
pytest-xdist = {extras = [&quot;psutil&quot;], version = &quot;^3.6.1&quot;}
pytest-cov = &quot;^5.0.0&quot;
django-stubs = &quot;^5.0.4&quot;
djangorestframework-stubs = &quot;^3.15.0&quot;

[tool.ruff]

exclude = [&quot;**/migrations/**.py&quot;]
line-length = 120

[tool.ruff.lint]
select = [&quot;E&quot;, &quot;F&quot;, &quot;B&quot;, &quot;I&quot;]

exclude = [&quot;**/migrations/**.py&quot;, &quot;.venv/**.py&quot;]

[tool.ruff.lint.per-file-ignores]
&quot;__init__.py&quot; = [&quot;F401&quot;]


[tool.ruff.format]
exclude = [&quot;**/migrations/**.py&quot;, &quot;.venv/**.py&quot;]


[tool.pytest.ini_options]
DJANGO_SETTINGS_MODULE = &quot;service.settings&quot;
addopts = &quot;--import-mode=importlib --reuse-db&quot;
filterwarnings = [
    &quot;ignore:DateTimeField.*received a naive datetime.*:RuntimeWarning&quot;,
    &quot;ignore::DeprecationWarning&quot;
]


[build-system]
requires = [&quot;poetry-core&quot;]
build-backend = &quot;poetry.core.masonry.api&quot;

[tool.coverage.run]
omit = [&quot;**/migrations/**&quot;, &quot;.venv/**&quot;, &quot;**/tests/**&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-17 13:15</div>
            <div class="timeline-body"><p>@naquiroz thanks for sharing the config.  I think you want to use <code>tool.ruff.extend-include</code> instead of <code>tool.ruff.exclude</code>. I think that should fix the problem for you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-22 07:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2024-10-04 17:25</div>
            <div class="timeline-body"><p>edit: make sure you don&#x27;t have <code>exclude</code> in your command either ^^&quot;</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:57 UTC
    </footer>
</body>
</html>
