```yaml
number: 18193
title: Bad splitting of long expressions in function arguments
type: issue
state: closed
author: tolomea
labels:
  - formatter
assignees: []
created_at: 2025-05-19T12:39:44Z
updated_at: 2025-05-19T13:39:10Z
url: https://github.com/astral-sh/ruff/issues/18193
synced_at: 2026-01-10T01:56:56Z
```

# Bad splitting of long expressions in function arguments

---

_Issue opened by @tolomea on 2025-05-19 12:39_

This 
```
f(
    x,
    a=lambda b, c: "this_is_very_very_very_very_very_very_very_very_very_very_very_long",
)
```
Gets formatted as 
```
f(
    x,
    a=lambda b,
    c: "this_is_very_very_very_very_very_very_very_very_very_very_very_long",
)
```
and
```
f(
    x,
    a="hello" if a else "this_is_very_very_very_very_very_very_very_very_very_very_very_long",
)
```
Gets formatted as
```
f(
    x,
    a="hello"
    if a
    else "this_is_very_very_very_very_very_very_very_very_very_very_very_long",
)
```
(checked in the playpen)

I'm not sure how I feel about the splits themselves.
However the split within the arg is strictly inside the split for the function arguments and so needs parens and an additional indent level.
For example like this:
```
f(
    x,
    a=(
        lambda b,
        c: "this_is_very_very_very_very_very_very_very_very_very_very_very_long"
    ),
)
```
and
```
f(
    x,
    a=(
        "hello"
        if a
        else "this_is_very_very_very_very_very_very_very_very_very_very_very_long"
    ),
)
```
FYI: Black had a series of problems like this where different types of split within a split weren't getting indented. Suggesting that maybe a general solution is needed rather than a case by case approach


---

_Label `formatter` added by @ntBre on 2025-05-19 13:11_

---

_Comment by @MichaReiser on 2025-05-19 13:39_

Yes, this requires a general solution and is tracked in https://github.com/astral-sh/ruff/issues/12856 (see the link in that issue to where my minds at)

---

_Closed by @MichaReiser on 2025-05-19 13:39_

---
