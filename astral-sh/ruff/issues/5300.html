<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pyproject.toml settings deactivates ruff - astral-sh/ruff #5300</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>pyproject.toml settings deactivates ruff</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/5300">#5300</a>
        opened by <a href="https://github.com/Zaffer">@Zaffer</a>
        on 2023-06-22 14:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Zaffer">@Zaffer</a> on 2023-06-22 14:10</div>
            <div class="timeline-body"><p>With any of the following the settings in my pyproject.toml ruff stops auto-formatting my code and is not able to sort imports. As soon as I take all of these options out of the toml file it works again:</p>
<pre><code class="language-toml">[tool.ruff]
line-length = 119
per-file-ignores = {&quot;__init__.py&quot; = [&quot;F401&quot;]}

[tool.ruff.isort.args]
profile = &quot;black&quot;

[mypy]
ignore_missing_imports = True
</code></pre>
<p>For reference here is my VSCode settings.json:</p>
<pre><code class="language-json">{
  &quot;python.defaultInterpreterPath&quot;: &quot;~/.cache/pypoetry/virtualenvs/nosible-digest-api-QN8QTDzb-py3.10/bin/python&quot;,
  &quot;python.terminal.activateEnvironment&quot;: true,
  &quot;python.analysis.importFormat&quot;: &quot;relative&quot;,
  &quot;python.analysis.autoFormatStrings&quot;: true,
  &quot;python.linting.mypyEnabled&quot;: true,
  &quot;python.linting.mypyCategorySeverity.error&quot;: &quot;Information&quot;,
  &quot;python.linting.mypyCategorySeverity.note&quot;: &quot;Hint&quot;,
  &quot;python.formatting.provider&quot;: &quot;black&quot;,
  &quot;[python]&quot;: {
    // &quot;editor.defaultFormatter&quot;: null,
    &quot;editor.formatOnSave&quot;: true,
    &quot;editor.codeActionsOnSave&quot;: {
      &quot;source.fixAll.ruff&quot;: true,
      &quot;source.organizeImports.ruff&quot;: true
    }
  },
  &quot;mypy.runUsingActiveInterpreter&quot;: true,
  &quot;mypy.targets&quot;: [&quot;./services/digest_api&quot;],
  }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-22 14:20</div>
            <div class="timeline-body"><p>I think there are a few errors in the <code>pyproject.toml</code> file, so Ruff is probably failing when trying to parse it. It should probably look like this:</p>
<pre><code class="language-toml">[tool.ruff]
line-length = 119
per-file-ignores = {&quot;__init__.py&quot; = [&quot;F401&quot;]}

[mypy]
ignore_missing_imports = true 
</code></pre>
<p>(Ruff doesn't support <code>profile</code>, Black is the default. But <code>[tool.ruff.isort.args]</code> should be <code>[tool.ruff.isort]</code>, without <code>args</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sanmai-NL">@sanmai-NL</a> on 2023-06-22 14:20</div>
            <div class="timeline-body"><p>@Zaffer <code>True</code> should be lowercase in TOML.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-22 19:17</div>
            <div class="timeline-body"><p>Closing optimistically.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-06-22 19:17</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:09 UTC
    </footer>
</body>
</html>
