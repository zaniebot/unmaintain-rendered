<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUF009 - Frozen Dataclass  with nested class should be valid - astral-sh/ruff #20266</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>RUF009 - Frozen Dataclass  with nested class should be valid</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/20266">#20266</a>
        opened by <a href="https://github.com/FEsteven">@FEsteven</a>
        on 2025-09-05 13:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/FEsteven">@FEsteven</a> on 2025-09-05 13:13</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Frozen dataclasses objects should be considered immutable even with nested class.</p>
<p>I have an issue like <a href="https://github.com/astral-sh/ruff/issues/17424">this issue</a> fixed in ruff 0.12.1 but with nested class:</p>
<p><a href="https://play.ruff.rs/d08b1cca-b46c-48f4-b1df-19e86821c15a">Playground</a></p>
<pre><code class="language-Python">@dataclasses.dataclass(frozen=True)
class A:
    foo: int = 1

@dataclasses.dataclass(frozen=True)
class B:
    b: A = A()  # it's valid , since ruff 0.12.1


@dataclasses.dataclass(frozen=True)
class C:
    @dataclasses.dataclass(frozen=True)
    class D:
        foo: int = 1
        
    d: D = D()  # should be valid , but gives RUF009
</code></pre>
<h3>Version</h3>
<p>ruff 0.12.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-05 13:44</div>
            <div class="timeline-body"><p>Interesting, it does seem like we should be allowing that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-09-05 13:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/IDrokin117">@IDrokin117</a> on 2025-09-09 18:15</div>
            <div class="timeline-body"><p>I will take this one</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @IDrokin117 by @ntBre on 2025-09-09 18:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/20352.html">astral-sh/ruff#20352</a> on 2025-09-11 17:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/20353.html">astral-sh/ruff#20353</a> on 2025-09-11 17:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-09-12 20:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
