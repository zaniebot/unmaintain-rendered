```yaml
number: 9992
title: Option to vertically format arguments if wrapped.
type: issue
state: open
author: funkybob
labels:
  - formatter
  - style
assignees: []
created_at: 2024-02-15T01:13:21Z
updated_at: 2025-09-15T09:12:33Z
url: https://github.com/astral-sh/ruff/issues/9992
synced_at: 2026-01-10T01:56:51Z
```

# Option to vertically format arguments if wrapped.

---

_Issue opened by @funkybob on 2024-02-15 01:13_

Would it be possible to add a formatter option so that once it decides to split arguments to a call onto a new line, each argument goes on its own line?

So, for example, when it chooses to reformat:
```
foo = bar(long_name=value, another_argument=1, something_else="12314")
```
into:
```
foo = bar(
    long_name=value, another_argument=1, something_else="12314"
)
```
it will instead produce:
```
foo = bar(
    long_name=value,
    another_argument=1,
    something_else="12314"
)
```
(and ideally also add the trailing comma, but that's a separate formatting option, I assume)

I know I can force this formatting to be retained by using the magic trailing comma, but I'd like to not have to think about this.


---

_Label `formatter` added by @dhruvmanila on 2024-02-15 04:37_

---

_Label `needs-decision` added by @dhruvmanila on 2024-02-15 04:37_

---

_Label `needs-decision` removed by @MichaReiser on 2024-02-15 09:44_

---

_Label `needs-decision` added by @MichaReiser on 2024-02-15 09:45_

---

_Label `style` added by @MichaReiser on 2024-02-15 09:45_

---

_Label `needs-decision` removed by @MichaReiser on 2024-02-15 09:45_

---

_Comment by @MichaReiser on 2024-02-15 09:54_

Hy @funkybob 

The main request in this issue is to have an option to disable the style where ruff tries to format all arguments on a single line before splitting each argument on a separate line. Ruff should already add the trailing comma as you want it to: It adds the trailing comma when each argument is on its own line, but it omits it when formatting all arguments on a single line (the style that you don't want to have).

We're still considering our position on how configurable our formatter should be. There are arguments for an opinionated formatter with very few options. But supporting many options also has its benefits. For now, our position is to avoid formatting style-related options, which includes the option you're asking for.



---

_Comment by @benblank on 2024-09-07 23:08_

If ruff prefers to avoid configurable formatting, then I think there's a case to be made that "one argument per line" should be how calls like this are wrapped.

Basically, the point of wrapping code is to improve readability, right? Long, unbroken lines may extend past the edge of a reading area and also tend to be more difficult to parse visually. Good wrapping helps with both of those issues.

But this kind of "function name, then every-argument-on-a-single-line, then close parenthesis" wrapping doesn't really do a lot for line lengths. This is especially noticeable with short function names; in funkybob's second example, the indented arguments line is only seven characters shorter than the original! A few more keystrokes, and it'll need rewrapped anyway.

I also don't think it does hardly anything for visual parsing; again, looking at the examples above, it's *really easy* to quickly spot that there are three arguments in the last example. But I find myself having to sort of stop-and-count-the-equals-signs in the other two. Putting each argument on a separate line makes a big difference for readability, I believe.

Finally, there's also a sense in which it seems oddly inconsistent to me. It feels like there's a kind of "gap" between calls which are short enough to not need wrapped at all and those which are long enough that all the arguments can't be made to fit on a single line, anyway. In between the two, there's this kind of "partial wrapping" which triples the vertical space taken by the call but often doesn't significantly reduce the horizontal space, nor improve readability much.

**TL;DR:** If ruff is going to have only one wrapping behavior in this scenario, I think it should be the one funkybob describes, not it's current behaviorâ€¦ even though it would be a breaking change. ðŸ˜“

---

_Comment by @alexei on 2024-10-30 13:48_

Because sometimes ruff puts each argument on its own line, and sometimes it puts all arguments on the same line, I often find myself having to review the changes and make manual adjustments. I too support to either have an option to instruct ruff to lean on always adding the comma, or have that as the default behavior. This would help enforcing a consistent style, especially in larger brownfield projects.

---

_Comment by @jorenham on 2024-10-30 16:39_

I wrote a simple `libcst` codemod that adds a trailing comma to such half-wrapped parameters, so that `ruff format` will place them onto separate lines after that:

https://github.com/scipy/scipy-stubs/blob/4421f887972d7b79cee22bf50fa18a179aa1195c/codegen/mods.py#L99-L122

But clearly this is far from ideal; as it requires running `ruff format` twice, doesn't work if `skip-magic-trailing-comma` is set, and is very slow compared to `ruff`.

---

_Referenced in [astral-sh/ruff#15846](../../astral-sh/ruff/issues/15846.md) on 2025-01-31 10:17_

---

_Comment by @Tatsh on 2025-02-18 09:10_

I would like to have the option to keep arguments aligned after the bracket:

```python
func(long1,
     long2,
     long3)
```

YAPF has an implicit way of controlling the line breaks which is by adding a trailing `,\n)` to the list or function arguments:

```python
foo(1, 2, 3,
)
```

becomes:

```python
foo(
    1,
    2,
    3,
)
```

These are what are keeping me from switching. Please make it configurable especially since YAPF is seeming more and more like a dead project.

---

_Comment by @Avasam on 2025-02-22 17:22_

> disable the style where ruff tries to format all arguments on a single line before splitting each argument on a separate line

Basically. Others have already said it in more details, but for me:

1. I see this current behaviour as going against the idea of formatting code so that it reduces merge conflicts. (you now have wrapping style transitions instead of one).
2. It's also not any more readable. Either fit on a line, or wrap the parameters, call args, comprehension statements (ref https://github.com/astral-sh/ruff/issues/11753), etc. individually.

---

_Comment by @Avasam on 2025-02-22 17:26_

> I wrote a simple `libcst` codemod that adds a trailing comma to such half-wrapped parameters, so that `ruff format` will place them onto separate lines after that:
> 
> [jorenham/scipy-stubs@`dd90c64`/codegen/mods.py#L97-L121](https://github.com/jorenham/scipy-stubs/blob/dd90c64c05a8f75f684662c277278e2c35400d4f/codegen/mods.py#L97-L121)

Your codemod is pretty small. But I'll still point to existing work https://pypi.org/project/add-trailing-comma/ which I have used. (I appreciate your work on scipy-stubs btw!)



---

_Comment by @jorenham on 2025-02-22 17:33_

> > I wrote a simple `libcst` codemod that adds a trailing comma to such half-wrapped parameters, so that `ruff format` will place them onto separate lines after that:
> > [jorenham/scipy-stubs@`dd90c64`/codegen/mods.py#L97-L121](https://github.com/jorenham/scipy-stubs/blob/dd90c64c05a8f75f684662c277278e2c35400d4f/codegen/mods.py#L97-L121)
> 
> Your codemod is pretty small. But I'll still point to existing work [pypi.org/project/add-trailing-comma](https://pypi.org/project/add-trailing-comma/) which I have used. 

Oh I didn't know about this one &mdash; I'll give it try. Thanks for sharing

> (I appreciate your work on scipy-stubs btw!)

That's good to to hear! Thank you for contributing to it, as well :)

---

_Comment by @PedroPerpetua on 2025-04-15 17:30_

Seconding this issue; I'd love to have the ability to enforce this!

---

_Referenced in [PedroPerpetua/django-rest-framework-boilerplate#73](../../PedroPerpetua/django-rest-framework-boilerplate/issues/73.md) on 2025-04-15 17:34_

---

_Comment by @ivangabriele on 2025-06-11 22:14_

@funkybob Maybe we should retitle / update this proposal to "Always align arguments vertically for any wrapped statement"?

---

_Comment by @jorenham on 2025-06-11 22:38_

I would prefer this be an extra option, similar to the [`trailing_comma`](https://rust-lang.github.io/rustfmt/?version=v1.8.0&search=#trailing_comma) option of `rustfmt`, which can be either `Vertical` (the current behavior), `Always` (the new option), or `Never` (if disabled)

---

_Referenced in [astral-sh/ruff#11753](../../astral-sh/ruff/issues/11753.md) on 2025-06-11 23:24_

---

_Comment by @ivangabriele on 2025-06-16 04:26_

> I would prefer this be an extra option, similar to the [`trailing_comma`](https://rust-lang.github.io/rustfmt/?version=v1.8.0&search=#trailing_comma) option of `rustfmt`, which can be either `Vertical` (the current behavior), `Always` (the new option), or `Never` (if disabled)

I may be mistaken but I think the point of this proposal is to avoid "intermediate" states with some wrapping cases keeping args horizontally aligned. In Rust, by default, as soon as a list of args forces a line to wrap, they are aligned vertically without any "intermediary" state.

Rust code example with a classic 80 line width:

```rust
pub async fn get_dashboard_state(app_handle: AppHandle, shared_state: State<'_, state::DashboardSharedState>) -> Result<(), ()> {
```

is auto-formatted like that by `rustfmt`:

```rust
pub async fn get_dashboard_state(
    app_handle: AppHandle,
    shared_state: State<'_, state::DashboardSharedState>,
) -> Result<(), ()> {
```

and **not** like that:

```rust
pub async fn get_dashboard_state(
    app_handle: AppHandle, shared_state: State<'_, state::DashboardSharedState>,
) -> Result<(), ()> {
```

which IMO makes it a lot more readable.

---

_Comment by @funkybob on 2025-06-16 04:33_

@ivangabriele you are correct.

I find the intermediate step pointless, as it really doesn't improve readability, it just prevents a line being over the max line length.

In all honesty I would prefer the choice to split to arg-per-line not depend on line length; however, I'll be the first to concede that trying to determine a rule for when readability is impacted is far from trivial.


---

_Comment by @nicknicolini on 2025-06-26 01:51_

@MichaReiser @ntBre i'm curious if there is an up to date viewpoint on this ticket, I think @ivangabriele has the best articulation of what is being asked for [here](https://github.com/astral-sh/ruff/issues/9992#issuecomment-2975063491). Was wondering if ruff devs are open to putting the behavior behind a flag and/or changing the behavior in the next formatting break

As it stands, ruff users are forced to choose being using ruff with imo less readable "intermediary" wrapped code (as outlined by Ivan above), or using a separate, slower, formatting tool in pre-commit just to achieve desired vertical formatting (e.g. `add-trailing-commas`). Both of these options are kind of a bummer coming from formatting tooling in other languages

---

_Comment by @MichaReiser on 2025-06-26 06:56_

No, there's no update on this issue. This formatting is also not specific to arguments. The same 3-layout formatting exists for many other nodes, e.g. dictionaries and an option would have to address all of them holistically or the formatting style becomes inconsistent. 

---

_Comment by @funkybob on 2025-06-26 07:07_

If it makes any difference, if I saw the same thing happen on dicts (moving the items to a new line to avoid line limit) I'd also object.

If it's hard to read on one line, it's hard to read on one line; it should be split to many lines.

---

_Comment by @nicknicolini on 2025-06-26 21:02_

> No, there's no update on this issue. This formatting is also not specific to arguments. The same 3-layout formatting exists for many other nodes, e.g. dictionaries and an option would have to address all of them holistically or the formatting style becomes inconsistent.

@MichaReiser does that mean ruff doesn't want to make a decision here? or could a decision be made + OSS contribution on the table? i'd imagine folks on this ticket would be willing to contribute (myself included) if there's a clear decision

---

_Comment by @MichaReiser on 2025-06-27 06:56_

> does that mean ruff doesn't want to make a decision here?

No, it's just not a priority for us right now. We're focusing on features with higher demand, but we might pick this up when working on the 2026 formatter style (which is when someone has time to focus on the formatter).

>  or could a decision be made + OSS contribution on the table?

That would certainly help drive the discussion forward but it probably still has the outcome that we won't have time to make the decision before working on the new formatter style.

---

_Comment by @nicknicolini on 2025-06-30 16:51_

> > does that mean ruff doesn't want to make a decision here?
> 
> No, it's just not a priority for us right now. We're focusing on features with higher demand, but we might pick this up when working on the 2026 formatter style (which is when someone has time to focus on the formatter).
> 
> > or could a decision be made + OSS contribution on the table?
> 
> That would certainly help drive the discussion forward but it probably still has the outcome that we won't have time to make the decision before working on the new formatter style.

sounds good, just wanted to confirm! If a decision is made on what ruff would like to support and you are open to a contribution for the change, feel free to give an update here whenever that happens. Would be willing to take a stab at it

---

_Comment by @ivangabriele on 2025-08-30 13:03_

> No, it's just not a priority for us right now. We're focusing on features with higher demand, but we might pick this up when working on the 2026 formatter style (which is when someone has time to focus on the formatter).

@MichaReiser I ask just in case: would a PR help or would it be useless right now regarding your roadmap? It may be non-trivial (I didn't take time to check how that part works yet) and considered a breaking change (even though we can always make that an opt-in option on the current version).

---

_Comment by @MichaReiser on 2025-09-15 09:12_

@ivangabriele A PR could help to assess the changes but, as stated above, I don't think will get to reviewing or making a decision on this before working on the 2026 style guide.

---
