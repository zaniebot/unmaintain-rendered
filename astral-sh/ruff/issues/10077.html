<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Infinite loop] for pyi file - astral-sh/ruff #10077</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Infinite loop] for pyi file</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10077">#10077</a>
        opened by <a href="https://github.com/gaborbernat">@gaborbernat</a>
        on 2024-02-22 02:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gaborbernat">@gaborbernat</a></div>
            <div class="timeline-body"><p>https://github.com/tox-dev/pyproject-api/blob/df39546/src/pyproject_api/_backend.pyi#L1</p>
<pre><code>‚ùØ pre-commit run --all-files
fix end of files.........................................................Passed
trim trailing whitespace.................................................Passed
Validate GitHub Workflows................................................Passed
codespell................................................................Passed
tox-ini-fmt..............................................................Passed
pyproject-fmt............................................................Passed
ruff-format..............................................................Failed
- hook id: ruff-format
- files were modified by this hook

1 file reformatted, 15 files left unchanged

ruff.....................................................................Failed
- hook id: ruff
- exit code: 1
- files were modified by this hook

error: Failed to converge after 100 iterations.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BInfinite%20loop%5D

...quoting the contents of `src/pyproject_api/_backend.pyi`, the rule codes E302, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

src/pyproject_api/_backend.pyi:3:1: E302 Expected 2 blank lines, found 1
Found 105 errors (104 fixed, 1 remaining).
[*] 1 fixable with the --fix option.

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[Infinite loop]" to "[Infinite loop] for pyi file" by @gaborbernat on 2024-02-22 02:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaborbernat">@gaborbernat</a> on 2024-02-22 02:42</div>
            <div class="timeline-body"><p>For now, managed to sidestep the issue with <a href="https://github.com/tox-dev/pyproject-api/pull/124/commits/989d105fbb47287298a1d893bf69f0ac936ea159">tox-dev/pyproject-api@<code>989d105</code> (#124)</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-22 02:43</div>
            <div class="timeline-body"><p>Thanks! I'll take a look at this tonight.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-02-22 02:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-02-22 02:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-22 15:07</div>
            <div class="timeline-body"><p>Okay, it seems this isn't specific to <code>pyi</code> files but the conflict is between <code>E302</code> and <code>I001</code> where <code>I001</code> enforces at most 1 blank line (depending on what you specified in <code>lines-after-imports</code> and <code>E302</code> enforces two empty lines.</p>
<p>That's also why I haven't been able to reproduce this behavior when running the above code in an isolated unit test where <code>I001</code> isn't enabled.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaborbernat">@gaborbernat</a> on 2024-02-22 15:11</div>
            <div class="timeline-body"><p>I wonder if ruff should fail when conflicting settings are set, or pick a winner and ignore the other rules ü§î</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-23 12:47</div>
            <div class="timeline-body"><p>@gaborbernat, thank you for all your high-quality issues with code examples. It makes fixing issues so much easier
@charliermarsh I'm working on this now. I change the blank line rule to not check empty lines after import statements if isort is enabled.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @charliermarsh by @MichaReiser on 2024-02-23 13:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @MichaReiser by @MichaReiser on 2024-02-23 13:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-03-05 10:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:49:41 UTC
    </footer>
</body>
</html>
