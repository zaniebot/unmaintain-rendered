<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] Fixes for string literal handling - astral-sh/ruff #13224</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] Fixes for string literal handling</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/13224">#13224</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2024-09-03 07:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-03 07:29</div>
            <div class="timeline-body"><ul>
<li>Chane the type of <code>StringLiteralType::value</code> to <code>Option&lt;Box&gt;</code> so that we can distinguish between empty strings in the source code and strings that were truncated</li>
<li>Avoid building strings that are larger than <code>MAX_STRING_LITERAL_SIZE</code> when concatenating strings with <code>+</code> in <code>infer_binary_expression</code></li>
</ul>
<p>See comments in https://github.com/astral-sh/ruff/pull/13117</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @MichaReiser on 2024-09-03 07:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @MichaReiser on 2024-09-03 07:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-09-03 07:33</div>
            <div class="timeline-body"><blockquote>
<ul>
<li>Chane the type of <code>StringLiteralType::value</code> to <code>Option&lt;Box&gt;</code> so that we can distinguish between empty strings in the source code and strings that were truncated</li>
</ul>
</blockquote>
<p>I think we should just use <code>Type::LiteralString</code> (which means &quot;a string literal, but not one we know the value of&quot;) for the latter rather than changing the type of <code>StringLiteralType::value</code>. We shouldn't use <code>StringLiteralType</code> unless we know the value of the string literal.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/13117.html">astral-sh/ruff#13117</a> on 2024-09-03 07:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Follow ups for #13117" to "[red-knot] Fixes for string literal handling" by @carljm on 2024-09-03 21:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/13276.html">astral-sh/ruff#13276</a> on 2024-09-07 06:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @carljm on 2024-09-08 03:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @carljm on 2024-09-08 03:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
