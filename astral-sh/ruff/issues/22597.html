<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UP008 false negative in inner (nested) classes - astral-sh/ruff #22597</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UP008 false negative in inner (nested) classes</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/22597">#22597</a>
        opened by <a href="https://github.com/generalmimon">@generalmimon</a>
        on 2026-01-15 13:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/generalmimon">@generalmimon</a></div>
            <div class="timeline-body">Summary
<p>Playground link: https://play.ruff.rs/f9f8f76b-c468-4f4f-a3b8-0bca5850daf1</p>
<pre><code>class Base:
    def __init__(self, foo):
        self.foo = foo

class Outer(Base):
    def __init__(self, foo):
        super(Outer, self).__init__(foo)  # UP008 issued as expected

    class Inner(Base):
        def __init__(self, foo):
            super(Outer.Inner, self).__init__(foo)  # Bug: would also expect UP008, but it was not issued

o = Outer(5)
i = Outer.Inner(5)
</code></pre>
<hr>
<p>By the way, Pylint&#x27;s <a href="https://pylint.readthedocs.io/en/latest/user_guide/messages/refactor/super-with-arguments.html"><code>super-with-arguments</code></a> also has a problem only with <code>super(Outer, self)</code>, but not with <code>super(Outer.Inner, self)</code>:</p>
<pre><code>$ pylint --version
pylint 4.0.4
astroid 4.0.3
Python 3.14.2 (tags/v3.14.2:df79316, Dec  5 2025, 17:18:21) [MSC v.1944 64 bit (AMD64)]
$ pylint --disable=all --enable=super-with-arguments test.py
************* Module test
test.py:7:8: R1725: Consider using Python 3 style super() without arguments (super-with-arguments)

-----------------------------------
Your code has been rated at 9.09/10
</code></pre>
<p>However, https://github.com/asottile/pyupgrade correctly upgrades both <code>super()</code> calls:</p>
<pre><code>$ pip freeze | grep -F pyupgrade
pyupgrade==3.21.2
$ cp test.py test-original.py
$ pyupgrade test.py
Rewriting test.py
$ git diff --no-index test-original.py test.py
diff --git 1/test-original.py 2/test.py
index 2f6d7cd2..65bf24ac 100644
--- 1/test-original.py
+++ 2/test.py
@@ -4,11 +4,11 @@ class Base:
 
 class Outer(Base):
     def __init__(self, foo):
-        super(Outer, self).__init__(foo)  # UP008 issued as expected
+        super().__init__(foo)  # UP008 issued as expected
 
     class Inner(Base):
         def __init__(self, foo):
-            super(Outer.Inner, self).__init__(foo)  # Bug: would also expect UP008, but it was not issued
+            super().__init__(foo)  # Bug: would also expect UP008, but it was not issued
 
 o = Outer(5)
 i = Outer.Inner(5)
</code></pre>
Version
<p>ruff 0.14.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2026-01-15 15:44</div>
            <div class="timeline-body"><p>Thanks for the report and the great write-up! This does seem like a bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2026-01-15 15:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2026-01-15 15:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/leandrobbraga">@leandrobbraga</a> on 2026-01-20 22:43</div>
            <div class="timeline-body"><p>I have a fix in <a href="https://github.com/astral-sh/ruff/pull/22677">astral-sh/ruff#22677</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/generalmimon">@generalmimon</a> on 2026-01-21 23:01</div>
            <div class="timeline-body"><p>I went digging in the https://github.com/asottile/pyupgrade repo and found that it also didn&#x27;t originally support <code>super</code> calls in nested classes: <a href="https://github.com/asottile/pyupgrade/issues/696">asottile/pyupgrade#696</a></p>
<p>The reason I mention this is that the associated PR <a href="https://github.com/asottile/pyupgrade/pull/707">asottile/pyupgrade#707</a> could be interesting to look at, both for the implementation and for the added test cases, which are quite thorough and Ruff would not pass them at the moment. <a href="https://github.com/asottile/pyupgrade">pyupgrade</a> is MIT-licensed (see <a href="https://github.com/asottile/pyupgrade/blob/369aea6489e38ca74a18df494f191857ba484950/LICENSE">LICENSE</a>), so I believe it should be OK to look at it.</p>
<p>As for the test cases that Ruff wouldn&#x27;t pass, this test case https://github.com/asottile/pyupgrade/blob/369aea6489e38ca74a18df494f191857ba484950/tests/features/super_test.py#L32-L35 essentially covers the same situation that I described in my review comment <a href="https://github.com/astral-sh/ruff/pull/22677">astral-sh/ruff#22677</a>#discussion_r2714271448.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-22 00:10:28 UTC
    </footer>
</body>
</html>
