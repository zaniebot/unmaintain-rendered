<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formatter: Specify indentation for function parameters - astral-sh/ruff #8360</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Formatter: Specify indentation for function parameters</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/8360">#8360</a>
        opened by <a href="https://github.com/LeonarddeR">@LeonarddeR</a>
        on 2023-10-30 15:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/LeonarddeR">@LeonarddeR</a> on 2023-10-30 15:58</div>
            <div class="timeline-body"><p>The current indentation behavior for function parameters is: 4-space indentation at function definitions, like this:</p>
<pre><code>def my_function(
    my_function_arg_1,
    my_function_arg_2,
    my_function_arg_3,
    my_function_arg_4,
):
    pass
</code></pre>
<p>This leads to reduced readability, because the function name and the argument names become harder to distinguish.</p>
<p>Adding one more level of indentation greatly improves readability:</p>
<pre><code>def my_function(
        my_function_arg_1,
        my_function_arg_2,
        my_function_arg_3,
        my_function_arg_4,
):
    pass
</code></pre>
<p>PEP8 also has the same suggestion: https://peps.python.org/pep-0008/#indentation</p>
<p><em>Originally posted by @jsh9 in https://github.com/astral-sh/ruff/discussions/7310#discussioncomment-7128822</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2023-10-30 21:20</div>
            <div class="timeline-body"><blockquote>
<pre><code>def my_function(
    my_function_arg_1,
    my_function_arg_2,
    my_function_arg_3,
    my_function_arg_4,
):
    pass
</code></pre>
<p>This leads to reduced readability, because the function name and the argument names become harder to distinguish.</p>
</blockquote>
<p>I don't agree with this because it's rare in the wild to <strong><em>all</em></strong> parameters starts with <strong><em>fullname</em></strong> of function/class name.
BTW, in my view it's not reducing readability (this may differ for you).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @charliermarsh on 2023-10-30 23:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">style</span> added by @charliermarsh on 2023-10-30 23:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-31 00:55</div>
            <div class="timeline-body"><p>I think this is the same as https://github.com/astral-sh/ruff/issues/8360</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2023-10-31 00:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-10-31 01:39</div>
            <div class="timeline-body"><blockquote>
<p>I think this is the same as #8360</p>
</blockquote>
<p>@MichaReiser Can you update the comment to link the correct issue? Currently, it's referring to itself ;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-31 01:59</div>
            <div class="timeline-body"><p>Why do I always do this... ğŸ¤¦ I'm trying to find the issue again but can't for some reason. I saw it before. I'll re-open this in the meantime.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @MichaReiser on 2023-10-31 01:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rwightman">@rwightman</a> on 2023-10-31 04:42</div>
            <div class="timeline-body"><p>I don't see why there is any need to downvote this, this a contentious issue based on numerous heated issues in black, etc that you can look up. The question is not whether you like it but whether there are enough who do.</p>
<p>The proposal is not to change the default, or force one way or another, but hopefully have a configuration option so that those of use who much prefer combining the PEP-8 recommendation of an extra indent level for function args with sad-face can do so.</p>
<p>Also, it is not just about readability in the contrived case where the args happen to match the function name, I feel the different alignment aids readbility regardless.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jsh9">@jsh9</a> on 2023-10-31 04:50</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<pre><code>def my_function(
    my_function_arg_1,
    my_function_arg_2,
    my_function_arg_3,
    my_function_arg_4,
):
    pass
</code></pre>
<p>This leads to reduced readability, because the function name and the argument names become harder to distinguish.</p>
</blockquote>
<p>I don't agree with this because it's rare in the wild to <strong><em>all</em></strong> parameters starts with <strong><em>fullname</em></strong> of function/class name. BTW, in my view it's not reducing readability (this may differ for you).</p>
</blockquote>
<p>@T-256 you might be missing my main point there.</p>
<p>Even with different names, it's still not very readable:</p>
<pre><code>def perform_some_tasks(
    data: List[float],
    arg2: Union[int, str, bool],
    hello: Optional[int],
    good: Dict[str, Any],
    morning: float,
) -&gt; None:
    ...
</code></pre>
<p>Look at this instead (much more readable):</p>
<pre><code>def perform_some_tasks(
        data: List[float],
        arg2: Union[int, str, bool],
        hello: Optional[int],
        good: Dict[str, Any],
        morning: float,
) -&gt; None:
    ...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LeonarddeR">@LeonarddeR</a> on 2023-10-31 07:00</div>
            <div class="timeline-body"><p>@rwightman wrote:</p>
<blockquote>
<p>The proposal is not to change the default, or force one way or another, but hopefully have a configuration option so that those of use who much prefer combining the PEP-8 recommendation of an extra indent level for function args with sad-face can do so.</p>
</blockquote>
<p>Thanks for highlighting this. Indeed, it was not my intention to advocate for this to become the default in any way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jankatins">@jankatins</a> on 2023-10-31 13:29</div>
            <div class="timeline-body"><p>Just FYI: I downvoted this issue because I find any config for the format a negative thing, because it leads to longwinded bikesheding discussions and I really love the way black handled it: have some guiding principles (make diffs as short as possible, which means the indent should be as short as possible to not result in line breaks) and then take a decision and be done with it. The amount of time spent on discussing and/or tweaking styles (both on these issues/PRs or your own projects when you change some config) will (in my opinion) never be outweighed by any gains you have because some formatting is a tiny bit more readable than what black or now ruff does.</p>
<p>(and yes: been there, done it, will never get the time back I spent on making intelij format SQL the way I wanted it to... And also not the time I spend on resolving merge conflicts because I thought aligned AS was a good thing...)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2023-10-31 13:45</div>
            <div class="timeline-body"><blockquote>
<p>Even with different names, it's still not very readable:</p>
</blockquote>
<p>Still, it's readable into my eyes, I think it's a personalization choose but perhaps modern editors with syntax highlighting solve your problem:</p>
<pre><code class="language-py">def perform_some_tasks(
    data: List[float],
    arg2: Union[int, str, bool],
    hello: Optional[int],
    good: Dict[str, Any],
    morning: float,
) -&gt; None:
    ...

def perform_some_tasks(
        data: List[float],
        arg2: Union[int, str, bool],
        hello: Optional[int],
        good: Dict[str, Any],
        morning: float,
) -&gt; None:
    ...
</code></pre>
<p>I disliked because I'd not like to encounter codebases with this option enabled, the reason is that going to show lines fat, and in syntax colorized editor it's uglier. (This is my taste, maybe it is different for youÙ‹!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/josephsl">@josephsl</a> on 2023-10-31 14:16</div>
            <div class="timeline-body"><p>Hi,</p>
<p>While indenting function arguments one extra level may not be readable for some, it may help programmers who must use alternatives to sight to program - several screen reading technologies include a feature to announce indentation level (one of them provides an option to announce indentation with audio). For example:</p>
<p>def my_function():
var1 = some_value</p>
<p>Versus:
def my_function(
var1 = some_value,
):</p>
<p>To most of us, the presence of comma at the end makes it clear that we are passing a keyword argument to this function. However, for people relying on assistive technologies (especially screen readers), programmers must infer from surrounding code (or subtle changes to output by text-to-speech engine as configured by the screen reading technology), unless they listen to speech output carefully, they may not know where function body starts and ends. A counterargument could be that blind programmers can ask the screen reader to announce all punctuation, and some would cite productivity as a reason to not take up that alternative. Another alternative is to ask people to use type hints in function definitions, but not all developers may heed that advice (type hints do inform programmers that we are reading function signature, not the body itself, quite useful if arguments are written on the same indentation as rest of the function body).</p>
<p>I understand that what I wrote above opens up a can of possibly unnecessary discussions, but I think it is also important to think about readability from the perspective of those who may not see what we wrote and must rely on alternative modes to figure out what's going on.</p>
<p>Thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rwightman">@rwightman</a> on 2023-10-31 17:54</div>
            <div class="timeline-body"><blockquote>
<p>Still, it's readable into my eyes, I think it's a personalization choose but perhaps modern editors with syntax highlighting solve your problem:</p>
</blockquote>
<p>I use a 'modern editor', PyCharm, and it defaults to the extra indent level (continuation indent 8) for formatting because it's following PEP-8. Again, the extra indent is PEP-8. Sadface is not, but I do prefer sadface in combo with this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jsh9">@jsh9</a> on 2023-11-01 07:09</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>Even with different names, it's still not very readable:</p>
</blockquote>
<p>Still, it's readable into my eyes, I think it's a personalization choose but perhaps modern editors with syntax highlighting solve your problem:</p>
<pre><code class="language-python">def perform_some_tasks(
    data: List[float],
    arg2: Union[int, str, bool],
    hello: Optional[int],
    good: Dict[str, Any],
    morning: float,
) -&gt; None:
    ...

def perform_some_tasks(
        data: List[float],
        arg2: Union[int, str, bool],
        hello: Optional[int],
        good: Dict[str, Any],
        morning: float,
) -&gt; None:
    ...
</code></pre>
<p>I disliked because I'd not like to encounter codebases with this option enabled, the reason is that going to show lines fat, and in syntax colorized editor it's uglier. (This is my taste, maybe it is different for youÙ‹!)</p>
</blockquote>
<p>I never rely on syntax highlighting because in many cases there is no syntax highlighting.  Just to name a few:</p>
<ul>
<li>Error logs (especially for web applications)</li>
<li>Stack traces (especially when running stuff in the terminal)</li>
<li>Code searches in terminal</li>
<li>Sharing code snippets with people in Slack</li>
<li>...</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jsh9">@jsh9</a> on 2023-11-01 07:18</div>
            <div class="timeline-body"><blockquote>
<p>The amount of time spent on discussing and/or tweaking styles (both on these issues/PRs or your own projects when you change some config) will never be outweighed by any gains you have because some formatting is a tiny bit more readable than what black or now ruff does.</p>
</blockquote>
<p>@jankatins: I would suggest that we all refrain from making absolute statements like this (with phrases like &quot;will never be outweighed by...&quot;).</p>
<p>If you can find statistics that support your &quot;will never&quot; claim, please feel free to share it here.  (And note that the statistics need to be statistically rigorous.)</p>
<p>Otherwise, I would suggest <strong><em>not</em></strong> making design choices that hurt people's productivity.</p>
<p>By the way, &quot;a tiny bit more readable&quot; is your personal opinion, and there are a lot of people who do not agree with your opinion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jankatins">@jankatins</a> on 2023-11-01 11:43</div>
            <div class="timeline-body"><blockquote>
<p>I would suggest that we all refrain from making absolute statements like this</p>
</blockquote>
<p>Added a &quot;In my opinion&quot;.</p>
<p>I'm looking forward to the statistics why this additional config improves readability and productivity and not decreases is because of the time lost doing bike shedding.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2023-11-07 04:27</div>
            <div class="timeline-body"><blockquote>
<p>I never rely on syntax highlighting because in many cases there is no syntax highlighting.  Just to name a few:</p>
<ul>
<li>Error logs (especially for web applications)</li>
<li>Stack traces (especially when running stuff in the terminal)</li>
<li>Code searches in terminal</li>
<li>Sharing code snippets with people in Slack</li>
<li>...</li>
</ul>
</blockquote>
<p>Whilst I'm not a fan of this style, and I'd rather rely on syntax highlighting + empty left side, this is the best counter-argument I've seen to &quot;just use syntax highlights&quot;. Validating it for readability reasons for those scenarios.</p>
<p>Not something I'd use in mine. But I could also work with a codebase that uses it (if autoformatted) w/o affecting my productivity.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../huggingface/pytorch-image-models/pulls/2036.html">huggingface/pytorch-image-models#2036</a> on 2023-11-17 17:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jsh9">@jsh9</a> on 2024-01-15 00:59</div>
            <div class="timeline-body"><p>Hi authors of Ruff, may I follow up on this issue?  Do you have plans to include this configurability into Ruff in the near future?  Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-01-15 07:04</div>
            <div class="timeline-body"><p>@jsh9 this is not on our near-time roadmap because there are other features with a wider reach that we want to work on.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jsh9">@jsh9</a> on 2024-01-15 07:07</div>
            <div class="timeline-body"><p>Thanks @MichaReiser !  Would you be willing to point to us (people who would like this feature) where this feature is implemented in the code?</p>
<p>I'm not familiar with Rust, so it's difficult for me to contribute.  But with your pointers maybe I (or other people) can take a stab at it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-01-15 09:24</div>
            <div class="timeline-body"><p>The complexity of the requested feature isn't specifically implementing it, but:</p>
<ul>
<li>Deciding if ruff wants to be less opinionated and support configuration flags as the one mentioned above</li>
<li>Decide on a formatting: I remember that there was some discussion around if &quot;sad-face&quot; should be on its own or the same line</li>
<li>Consider the style change holistically. What does it mean if we allow changing the indentation for function (and lambda?) parameters. Are there other places where it should be possible to customize the indentation? How does it fit into the larger formatting style?</li>
</ul>
<p>The code change itself is probably rather straightforward (I say that often and am then surprised that formatter changes are always hard :laughing: ). It might be as simple as adding an extra indent level to the code in</p>
<p>https://github.com/astral-sh/ruff/blob/febc69ab48416dacdad2499ccb6512dd8e56cc7c/crates/ruff_python_formatter/src/other/parameters.rs#L249-L282</p>
<pre><code class="language-rust">write!(
    f,
    [
        token(&quot;(&quot;),
        dangling_open_parenthesis_comments(parenthesis_dangling),
        soft_two_level_block_indent(&amp;group(&amp;format_inner)),
        token(&quot;)&quot;)
    ]
)
</code></pre>
<p>It would require a custom <code>soft_block_indent</code> builder that writes two indents instead of just one:</p>
<pre><code class="language-rust">let snapshot = f.snapshot();

f.write_element(FormatElement::Tag(StartIndent));
f.write_element(FormatElement::Tag(StartIndent)); // &lt;---- this

match self.mode {
    IndentMode::Soft =&gt; write!(f, [soft_line_break()])?,
    IndentMode::Block =&gt; write!(f, [hard_line_break()])?,
    IndentMode::SoftLineOrSpace | IndentMode::SoftSpace =&gt; {
        write!(f, [soft_line_break_or_space()])?;
    }
}

let is_empty = {
    let mut recording = f.start_recording();
    recording.write_fmt(Arguments::from(&amp;self.content))?;
    recording.stop().is_empty()
};

if is_empty {
    f.restore_snapshot(snapshot);
    return Ok(());
}

f.write_element(FormatElement::Tag(EndIndent));
f.write_element(FormatElement::Tag(EndIndent)); // &lt;---- and this

match self.mode {
    IndentMode::Soft =&gt; write!(f, [soft_line_break()]),
    IndentMode::Block =&gt; write!(f, [hard_line_break()]),
    IndentMode::SoftSpace =&gt; write!(f, [soft_line_break_or_space()]),
    IndentMode::SoftLineOrSpace =&gt; Ok(()),
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6893.html">astral-sh/ruff#6893</a> on 2024-02-22 18:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stolenzc">@stolenzc</a> on 2024-04-02 01:10</div>
            <div class="timeline-body"><p>I am watching this issue more than 1 month, and I always wait for implement this function in ruff. our company have some code style rules, All other rules can be satisfied through configuration, only this one I can't. This style also follow pep8 style.  I like ruff, but I can't directly using it in my work and life.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../nvaccess/nvda/issues/14817.html">nvaccess/nvda#14817</a> on 2024-04-11 15:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/coinflip112">@coinflip112</a> on 2024-05-30 13:04</div>
            <div class="timeline-body"><p>I'd very much appreciate this feature. I'll get bullied into using Pycharm's formatter otherwise ğŸ˜…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jsh9">@jsh9</a> on 2024-07-05 07:06</div>
            <div class="timeline-body"><p>Hi @MichaReiser ,</p>
<p>May I follow up on this topic here?  Have you and/or the Ruff team discuss these questions that you outlined <a href="https://github.com/astral-sh/ruff/issues/8360#issuecomment-1891659341">above</a>?</p>
<blockquote>
<p>The complexity of the requested feature isn't specifically implementing it, but:</p>
<ul>
<li>Deciding if ruff wants to be less opinionated and support configuration flags as the one mentioned above</li>
<li>Decide on a formatting: I remember that there was some discussion around if &quot;sad-face&quot; should be on its own or the same line</li>
<li>Consider the style change holistically. What does it mean if we allow changing the indentation for function (and lambda?) parameters. Are there other places where it should be possible to customize the indentation? How does it fit into the larger formatting style?</li>
</ul>
</blockquote>
<p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-07-05 08:03</div>
            <div class="timeline-body"><p>No, I'm sorry. We haven't decided on this yet</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vvlutin">@vvlutin</a> on 2024-07-30 13:19</div>
            <div class="timeline-body"><p>I think that to increase readability it might be reasonable to indent infinite loops by 3 levels? You know, diversity and variety, all that stuff. And I would personally prefer indent <strong>init</strong> by 4 levels, so it finally can be seen by elder people</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vvlutin">@vvlutin</a> on 2024-07-30 13:33</div>
            <div class="timeline-body"><p>Brackets are sufficient for readability in both cases above. So if readability is the goal then the first option is newline character before closing bracket. And the second option is complication of indentation logic by double indentation levels specifically for arguments lists. If complicating logic considered pythonic option, then maybe pep8 should allow both cases explicitly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../vnmabus/rdata/pulls/45.html">vnmabus/rdata#45</a> on 2024-10-11 20:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tonycoco">@tonycoco</a> on 2024-10-16 21:30</div>
            <div class="timeline-body"><p>Google's <a href="https://google.github.io/styleguide/pylintrc"><code>.pylintrc</code></a> currently sets <code>indent-after-paren=4</code>. I'm writing some of our open-source solutions and would like to set up a Ruff config equivalent. Looking to see if there's been any progress on a config/flag for this behavior.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RoelantStegmann">@RoelantStegmann</a> on 2024-11-07 14:33</div>
            <div class="timeline-body"><p>Yes, also following this. Hope it will become adopted.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jsh9">@jsh9</a> on 2024-11-30 18:19</div>
            <div class="timeline-body"><p>Hi @MichaReiser , I assume there are no updates to this issue because you were still contemplate the 3 questions you mentioned earlier this year:</p>
<blockquote>
<p>The complexity of the requested feature isn't specifically implementing it, but:</p>
<ul>
<li>Deciding if ruff wants to be less opinionated and support configuration flags as the one mentioned above</li>
<li>Decide on a formatting: I remember that there was some discussion around if &quot;sad-face&quot; should be on its own or the same line</li>
<li>Consider the style change holistically. What does it mean if we allow changing the indentation for function (and lambda?) parameters. Are there other places where it should be possible to customize the indentation? How does it fit into the larger formatting style?</li>
</ul>
</blockquote>
<p>To quote Voltaire, <em>&quot;perfect is the enemy of good&quot;</em>.  So maybe it's better if we reach a &quot;good enough&quot; consensus and then start to implement a solution?</p>
<p>Here are my opinions on these 3 questions, which hopefully can help push this forward.</p>
<p><strong>1. Whether Ruff wants to be less opinionated about this</strong></p>
<p>If you add such a config flag (<code>--double-indent-for-function-def</code>, or a better name), I don't think you'll offend anyone. Here's my reasoning:</p>
<p>Suppose we separate users into 3 groups: (A) people who support double indentation under function definitions, (B) people who strongly oppose this, (C) people who don't care.</p>
<ul>
<li>People in Group A will be very happy with this flag and start to adopt Ruff with this flag on.</li>
<li>People in Group B are not affected since they can keep using Ruff with this flag off.</li>
<li>People in Group C don't care.</li>
</ul>
<p><strong>2. Whether &quot;sad-face&quot; should be on its own line</strong></p>
<p>This is out of the scope of our request, which is to &quot;add a level of indentation for <em><strong>function arguments</strong></em> in function signature&quot;.  Note that this request is limited to the <strong>function arguments</strong> only.</p>
<p><strong>3. Holistic style change</strong></p>
<p>I don't think the styles in other places are affected by this, because the only reason that we are requesting a double indentation is that <code>def</code> has 3 letters, making the function name and function arguments lined up in a way that's not very readable:</p>
<pre><code>def my_function(
    data,
    identity,
    some_args,
    some_more_args,
):
    pass
</code></pre>
<p>At least to my current knowledge, other places of the Python language don't have this issue, so the current style works fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rwightman">@rwightman</a> on 2024-11-30 19:43</div>
            <div class="timeline-body"><p>@jsh9 agree with the reasoning, no surprise :)</p>
<p>For me the 3 char + space def alignment is not consequential, it's the mental parse btw function args and fn body that is the biggest win. Also, I'm a pycharm user and this has always been the PEP preferred approach and a default for the builtin formatting, so it's engrained in my existing code and preferred style.</p>
<p>Sadface does help with that parse, but as soon as you add sadface w/ return typing it once again gets less obvious without the extra arg indent level.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vitor-amartins">@vitor-amartins</a> on 2025-04-04 13:47</div>
            <div class="timeline-body"><p>Hi @jsh9, agree with all the points you brought. Also @rwightman has exact the same point that get me here, it's the approach used on Pycharm, and it keeps fighting with the ruff format, and only because of that I choose not to use ruff format. If it had a flag like mentioned by @jsh9, it would be the thing that would make me use format.</p>
<p>@MichaReiser do you have any updates based on the presented points?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/19921.html">astral-sh/ruff#19921</a> on 2025-08-14 22:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jsh9">@jsh9</a> on 2025-08-14 22:42</div>
            <div class="timeline-body"><p>Hi everyone on this thread, I created a pull request to attempt to implement this feature, based on @MichaReiser 's hint above (https://github.com/astral-sh/ruff/issues/8360#issuecomment-1891659341).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jsh9">@jsh9</a> on 2025-09-01 01:03</div>
            <div class="timeline-body"><p>Hi everyone who are interested in getting this feature implemented:</p>
<p>My PR (https://github.com/astral-sh/ruff/pull/19921) was closed by @MichaReiser with reasons given in <a href="https://github.com/astral-sh/ruff/pull/19921#issuecomment-3190761907">this comment</a>.  I asked a follow-up question in that PR, but got no reply.</p>
<p>I therefore forked Ruff and implemented this feature on my own fork.  All in accordance with the MIT license of Ruff.</p>
<p>My fork is called <strong><em>Muff</em></strong>: https://github.com/jsh9/muff.  It offers this formatting style by default (this is the only difference in functionality between Muff and Ruff), and Muff is published to PyPI: https://pypi.org/project/muff/</p>
<p>As of August 31, 2025, I complied binaries for these 5 platforms:</p>
<ul>
<li>x86_64 macOS</li>
<li>ARM macOS</li>
<li>x86_64 Linux (glibc 2.17, which <a href="https://pypi.org/project/ruff/#files">Ruff also appears to be offering</a>)</li>
<li>ARM Linux</li>
<li>x86_64 Windows</li>
</ul>
<p>(I don't have an ARM-based Windows computer, and AWS doesn't offer ARM Windows EC2, so unfortunately there's no ARM Windows binary for now.)</p>
<p>I really like Ruff as a tool and I sincerely hope that @charliermarsh and team will eventually implement this feature.  Until then, I'll try my best to keep my fork up to date with Ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stolenzc">@stolenzc</a> on 2025-09-01 07:03</div>
            <div class="timeline-body"><blockquote>
<p>Hi everyone who are interested in getting this feature implemented:å¤§å®¶å¥½ï¼Œæœ‰å…´è¶£å®ç°æ­¤åŠŸèƒ½çš„äººï¼š</p>
<p>My PR (<a href="https://github.com/astral-sh/ruff/pull/19921">#19921</a>) was closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> with reasons given in <a href="https://github.com/astral-sh/ruff/pull/19921#issuecomment-3190761907">this comment</a>. I asked a follow-up question in that PR, but got no reply.æˆ‘çš„ PR ( <a href="https://github.com/astral-sh/ruff/pull/19921">#19921</a> ) å·²è¢« å…³é—­ï¼ŒåŸå› å·²åœ¨ ä¸­ç»™å‡ºã€‚æˆ‘åœ¨è¯¥ PR ä¸­æå‡ºäº†åç»­é—®é¢˜ï¼Œä½†æ²¡æœ‰å¾—åˆ°å›å¤ã€‚</p>
<p>I therefore forked Ruff and implemented this feature on my own fork. All in accordance with the MIT license of Ruff.å› æ­¤ï¼Œæˆ‘ fork äº† Ruffï¼Œå¹¶åœ¨è‡ªå·±çš„ fork ä¸Šå®ç°äº†æ­¤åŠŸèƒ½ã€‚æ‰€æœ‰æ“ä½œå‡éµå¾ª Ruff çš„ MIT è®¸å¯è¯ã€‚</p>
<p>My fork is called <strong><em>Muff</em></strong>: https://github.com/jsh9/muff. It offers this formatting style by default (this is the only difference in functionality between Muff and Ruff), and Muff is published to PyPI: https://pypi.org/project/muff/æˆ‘çš„ fork ç‰ˆæœ¬åä¸º <strong><em>Muff</em></strong> ï¼š https://github.com/jsh9/muff ã€‚å®ƒé»˜è®¤æä¾›ä»¥ä¸‹æ ¼å¼æ ·å¼ï¼ˆè¿™æ˜¯ Muff å’Œ Ruff ä¹‹é—´å”¯ä¸€çš„åŠŸèƒ½åŒºåˆ«ï¼‰ï¼Œå¹¶ä¸” Muff å·²å‘å¸ƒåˆ° PyPIï¼š https://pypi.org/project/muff/</p>
<p>As of August 31, 2025, I complied binaries for these 5 platforms:æˆªè‡³ 2025 å¹´ 8 æœˆ 31 æ—¥ï¼Œæˆ‘å·²ä¸ºä»¥ä¸‹ 5 ä¸ªå¹³å°ç¼–è¯‘äº†äºŒè¿›åˆ¶æ–‡ä»¶ï¼š</p>
<ul>
<li>x86_64 macOS</li>
<li>ARM macOS</li>
<li>x86_64 Linux (glibc 2.17, which <a href="https://pypi.org/project/ruff/#files">Ruff also appears to be offering</a>)x86_64 Linuxï¼ˆglibc 2.17ï¼Œ <a href="https://pypi.org/project/ruff/#files">Ruff ä¼¼ä¹ä¹Ÿæä¾›è¯¥ç‰ˆæœ¬ </a>ï¼‰</li>
<li>ARM Linux</li>
<li>x86_64 Windows</li>
</ul>
<p>(I don't have an ARM-based Windows computer, and AWS doesn't offer ARM Windows EC2, so unfortunately there's no ARM Windows binary for now.)ï¼ˆæˆ‘æ²¡æœ‰åŸºäº ARM çš„ Windows è®¡ç®—æœºï¼Œå¹¶ä¸” AWS ä¸æä¾› ARM Windows EC2ï¼Œå› æ­¤é—æ†¾çš„æ˜¯ç›®å‰æ²¡æœ‰ ARM Windows äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ï¼‰</p>
<p>I really like Ruff as a tool and I sincerely hope that <a href="https://github.com/charliermarsh">@charliermarsh</a> and team will eventually implement this feature. Until then, I'll try my best to keep my fork up to date with Ruff.æˆ‘éå¸¸å–œæ¬¢ Ruff è¿™æ¬¾å·¥å…·ï¼Œå¹¶çœŸè¯šåœ°å¸Œæœ›å›¢é˜Ÿæœ€ç»ˆèƒ½å¤Ÿå®ç°è¿™ä¸ªåŠŸèƒ½ã€‚åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä¼šå°½åŠ›è®©æˆ‘çš„ fork ä¸ Ruff ä¿æŒåŒæ­¥æ›´æ–°ã€‚</p>
</blockquote>
<p>I think I'll give it a try, this problem still bothers me and I've been waiting for this feature for a long time. Thanks for your efforts</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thaibui">@thaibui</a> on 2025-11-13 09:55</div>
            <div class="timeline-body"><p>@MichaReiser Could you just merge the PR https://github.com/astral-sh/ruff/pull/19921 so that we don't have to have another fork? I followed this thread and ended up using <code>muff</code> instead of <code>ruff</code> simply because there isn't an option to change the default.</p>
<p>Thanks for the work @jsh9 &amp; @MichaReiser</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:51 UTC
    </footer>
</body>
</html>
