<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature request: Lint rule to disallow unseeded RNGs (niche?) - astral-sh/ruff #14003</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Feature request: Lint rule to disallow unseeded RNGs (niche?)</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/14003">#14003</a>
        opened by <a href="https://github.com/dmcc">@dmcc</a>
        on 2024-10-30 17:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dmcc">@dmcc</a> on 2024-10-30 17:35</div>
            <div class="timeline-body"><p>I'll preface that this lint rule would not be intended for many (maybe even most) use cases. I wouldn't expect it to be on by default or anything like that. I recognize this could be considered too niche so won't be offended if this isn't a good fit.</p>
<h2>The use case</h2>
<p>In some <a href="https://datascience.stackexchange.com/questions/78109/should-you-use-random-state-or-random-seed-in-machine-learning-models">AI/ML training work</a>, seeding your RNG is strongly encouraged to improve reproducibility. For cases where RNGs are used for ML and have no security implications, it would be nice to enable this.</p>
<h2>Examples</h2>
<p>This would be an error:</p>
<pre><code>import random
# [...]
rng = random.Random()</code></pre>
<p>as would:</p>
<pre><code>import random
# [...]
x = random.random()</code></pre>
<p>while this would be fine:</p>
<pre><code>import random
# [...]
rng = random.Random(x=7)</code></pre>
<p>(non-exhaustive list as we'd ideally cover popular library uses too)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-11-07 04:57</div>
            <div class="timeline-body"><blockquote>
<p>seeding your RNG is strongly encouraged to improve reproducibility</p>
</blockquote>
<p>I'm not sure I understand this. Should the rule enforce seeding if there's any random value being used? I'm not experienced in this area so can't really say how useful this rule would be. Regardless, I don't think this is possible until #1774 is completed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @dhruvmanila on 2024-11-07 04:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @dhruvmanila on 2024-11-07 04:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dmcc">@dmcc</a> on 2024-11-07 14:38</div>
            <div class="timeline-body"><blockquote>
<p>Should the rule enforce seeding if there's any random value being used?</p>
</blockquote>
<p>Yes, exactly. Somewhat counterintuitively, in ML development (but not ML production), it's helpful for numbers to <em>not</em> be random for more repeatable experiments, easier debugging, etc. There are a good number of articles for ML development best practices suggesting folks seed their RNGs. Here's one which is part of the official <a href="https://pytorch.org/docs/stable/notes/randomness.html#pytorch-random-number-generator">PyTorch documentation</a>, the leading deep learning framework.</p>
<blockquote>
<p>Regardless, I don't think this is possible until https://github.com/astral-sh/ruff/issues/1774 is completed.</p>
</blockquote>
<p>Yeah, makes total sense. I think most folks would be annoyed/confused if they enabled this rule unintentionally.</p>
<p>(and yes, I've considered writing this as a Python linter, but prefer to have it running faster in ruff...)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:14 UTC
    </footer>
</body>
</html>
