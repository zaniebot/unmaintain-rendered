<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>per-file-ignores + E501: bug or not using it right? - astral-sh/ruff #20104</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>per-file-ignores + E501: bug or not using it right?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/20104">#20104</a>
        opened by <a href="https://github.com/vcaraulean">@vcaraulean</a>
        on 2025-08-26 19:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vcaraulean">@vcaraulean</a></div>
            <div class="timeline-body">Summary
<p>Following <a href="https://docs.astral.sh/ruff/settings/#lint_per-file-ignores">per-file-ignores</a> documentation I have following config section in my <code>pyproject.toml</code>:</p>
<pre><code>[tool.ruff.lint.per-file-ignores]
&quot;models.py&quot; = [&quot;E501&quot;]
# Doubling, just because
&quot;src/**/models.py&quot; = [&quot;E501&quot;]
# ... to be sure
&quot;src/client/connectivity/models.py&quot; = [&quot;E501&quot;]
</code></pre>
<p><code>E501</code> is:</p>
<pre><code>uv run ruff rule E501
# line-too-long (E501)

Derived from the **pycodestyle** linter.

## What it does
Checks for lines that exceed the specified maximum character length.
</code></pre>
<p>However, running <code>uv run ruff format</code> in the project&#x27;s root directory still trims the long lines:</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/fd7e0360-c7e1-4654-9945-57855b02ed03"></p>
<p>Am I setting it wrong or my expectations are off?
I want to disable long line re-formatting for readability but only for specific files..</p>
Version
<p>ruff 0.12.10 (c68ff8d90 2025-08-21)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;per-file-ignores - bug or not using it right?&quot; to &quot;per-file-ignores + E501: bug or not using it right?&quot; by <a href="https://github.com/vcaraulean">@vcaraulean</a> on 2025-08-26 19:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-26 19:22</div>
            <div class="timeline-body"><p>E501 is a lint rule, so any configuration for it will only affect <code>ruff check</code> calls, not <code>ruff format</code>. The formatter doesn&#x27;t really have separate &quot;rules&quot; like the linter, so I don&#x27;t think there&#x27;s a <code>per-file-ignores</code> analog in the formatter settings. There&#x27;s <a href="https://docs.astral.sh/ruff/settings/#format_exclude"><code>tool.ruff.format.exclude</code></a>, but that will exclude the files from any formatting, not just the line length.</p>
<p>Otherwise, you may be able to set <a href="https://docs.astral.sh/ruff/settings/#line-length"><code>line-length</code></a> using a <a href="https://docs.astral.sh/ruff/configuration/#config-file-discovery">hierarchical configuration</a>, if all of the files you want to exclude are in a separate directory.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-26 19:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-26 19:24</div>
            <div class="timeline-body"><p>This might be a bit more tedious, but you can also use <a href="https://docs.astral.sh/ruff/formatter/#format-suppression">suppression comments</a> if there are just small blocks of code you&#x27;d like to avoid formatting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vcaraulean">@vcaraulean</a> on 2025-08-26 19:51</div>
            <div class="timeline-body"><p>Thanks @ntBre for explaining and pointing to caveats and solutions !
(I&#x27;m still learning thing about ruff)</p>
<p>For the time being I&#x27;ll be happily maintaining my <code>models.py</code> formatted for readability and telling ruff to close eyes when going over:</p>
<pre><code>[tool.ruff.format]
exclude = [&quot;models.py&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/vcaraulean">@vcaraulean</a> on 2025-08-26 19:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:22 UTC
    </footer>
</body>
</html>
