<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Missing file name when emiting warnings - astral-sh/ruff #5729</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Missing file name when emiting warnings</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/5729">#5729</a>
        opened by <a href="https://github.com/matejsp">@matejsp</a>
        on 2023-07-13 09:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/matejsp">@matejsp</a> on 2023-07-13 09:00</div>
            <div class="timeline-body"><pre><code>(venv) ➜  rm -rf .ruff_cache &amp;&amp; ruff .
warning: Invalid `# noqa` directive on line 6: expected a comma-separated list of codes (e.g., `# noqa: F401, F841`).
warning: Invalid `# noqa` directive on line 1: expected a comma-separated list of codes (e.g., `# noqa: F401, F841`).
warning: Invalid `# noqa` directive on line 7: expected a comma-separated list of codes (e.g., `# noqa: F401, F841`).
warning: Invalid `# noqa` directive on line 3: expected a comma-separated list of codes (e.g., `# noqa: F401, F841`).
warning: Invalid `# noqa` directive on line 25: expected a comma-separated list of codes (e.g., `# noqa: F401, F841`).
</code></pre>
<p>This warning is emitted only on first run (after cache is build it is no longer displayed)
It would be nice to threat warnings as errors</p>
<p>Ruff version:
(venv) ➜ ruff --version
ruff 0.0.27</p>
<p>Previous version didn't emit such warnings on lines:
<code># noqa: 901</code>
now it wants complete code:
<code># noqa: C901</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-07-13 13:37</div>
            <div class="timeline-body"><p>@matejsp just to clarify, you're looking for three things here?</p>
<ol>
<li>Include the file name in the warnings</li>
<li>Always emit warnings, even if the cache exists</li>
<li>The ability to error on warnings</li>
</ol>
<p>Is that right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/matejsp">@matejsp</a> on 2023-07-13 13:47</div>
            <div class="timeline-body"><ol>
<li>YES (bug title)</li>
<li>would be nice</li>
<li>would also be nice :D</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-13 13:49</div>
            <div class="timeline-body"><p>I think the &quot;right&quot; solution here might be to treat those warnings as diagnostics, rather than &quot;warnings&quot;. As diagnostics, they would have all of those properties automatically.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-13 13:50</div>
            <div class="timeline-body"><p>It's similar to #850.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-13 13:55</div>
            <div class="timeline-body"><p>Maybe I'll rephrase that as: they should very likely be diagnostics, and not ad hoc warnings. But the downside of being diagnostics is that they won't be enabled by default for users.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-07-18 14:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:30:41 UTC
    </footer>
</body>
</html>
