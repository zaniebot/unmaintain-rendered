<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Every list element is on one line - astral-sh/ruff #13751</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Every list element is on one line</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13751">#13751</a>
        opened by <a href="https://github.com/xJrJackBlack">@xJrJackBlack</a>
        on 2024-10-14 13:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/xJrJackBlack">@xJrJackBlack</a> on 2024-10-14 13:52</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>Hello</p>
<pre><code>$ ruff --version
ruff 0.6.6
</code></pre>
<p>I have this list:</p>
<pre><code class="language-py">data = [
    0x9B, 0x02, 0x20, 0x02, 0x80, 0x00, 0x04, 0x80, 0x00, 0x01, 
    0x80, 0x00, 0x01, 0x02, 0x04, 0x10, 0x01, 0x04, 0x4B, 0x02, 
    0x40, 0x40, 0x80, 0x00, 0x45, 0x02, 0x40, 0x40, 0x80, 0x00
    ]
</code></pre>
<p>But ruff formatter makes it like this:</p>
<pre><code class="language-py">data = [
    0x9B,
    0x02,
    0x20,
    0x02,
    0x80,
    0x00,
    0x04,
    0x80,
    0x00,
    0x01,
    0x80,
    0x00,
    0x01,
    0x02,
    0x04,
    0x10,
    0x01,
    0x04,
    0x4B,
    0x02,
    0x40,
    0x40,
    0x80,
    0x00,
    0x45,
    0x02,
    0x40,
    0x40,
    0x80,
    0x00,
]
</code></pre>
<p><strong>What I have done:</strong></p>
<ul>
<li>In <code>settings.json</code> file I have added this: <code>&quot;ruff.lint.ignore&quot;: [&quot;COM812&quot;],</code> but it does not worked for me. I have tried this both on linux and windows.</li>
<li>on windows under <code>C:\Users\buser\AppData\Local\Programs\Python\Python311-arm64\Lib\test</code> I have found <code>.ruff.toml</code> file. I have added this line (at the end) <code>ignore = [&quot;COM812&quot;]</code>; also this does not work!</li>
<li>I have created <code>.ruff.toml</code> file in my linux machine's home directory and add those lines and nothing changes:</li>
</ul>
<pre><code>[lint]
ignore = [&quot;COM812&quot;]

[format]
# Like Black, respect magic trailing commas.
skip-magic-trailing-comma = true
</code></pre>
<p>I have longer lists! like 1024 bytes. And it is very very annoying when all elements are on one line separately!</p>
<p>What is the solution? How can I make formatter not to put single element on a newline? Especially; can I fix this just by editing <code>settings.json</code>?</p>
<p>P.S. folks sorry for my bad English; not my mother tongue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-14 13:55</div>
            <div class="timeline-body"><p>Hi @xJrJackBlack</p>
<p>No, you can't change the formatting with a setting. But you can use <code>fmt: off</code> or <code>fmt: skip</code> for the few statements where you don't want this specific formatting.</p>
<p>Improving formatting for very long lists is something we want to tackle eventually.</p>
<pre><code class="language-python">data = [
    0x9B, 0x02, 0x20, 0x02, 0x80, 0x00, 0x04, 0x80, 0x00, 0x01, 
    0x80, 0x00, 0x01, 0x02, 0x04, 0x10, 0x01, 0x04, 0x4B, 0x02, 
    0x40, 0x40, 0x80, 0x00, 0x45, 0x02, 0x40, 0x40, 0x80, 0x00
] # fmt: skip
</code></pre>
<p>However, note that this will disable all formatting for that statement</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-10-14 13:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/xJrJackBlack">@xJrJackBlack</a> on 2024-10-14 14:03</div>
            <div class="timeline-body"><p>Great thanks for your immediate reply <code># fmt: skip</code> works without any additional setting for me!</p>
<p>I hope that feature will come sooner ðŸ˜Š</p>
<p>close #13751</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-10-14 14:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:35:26 UTC
    </footer>
</body>
</html>
