<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consider adding `keep-runtime-typing` or equivalent option for `pyupgrade` rules - astral-sh/ruff #962</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Consider adding <code>keep-runtime-typing</code> or equivalent option for <code>pyupgrade</code> rules</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/962">#962</a>
        opened by <a href="https://github.com/layday">@layday</a>
        on 2022-11-29 20:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/layday">@layday</a></div>
            <div class="timeline-body"><p>pyupgrade allows opting out of upgrading <code>typing</code> aliases of built-in collections and <code>typing.Union</code>s if they are used at runtime (e.g. by libraries such as Pydantic and cattrs) in Python versions in which they are unsupported if not stringified (&lt; 3.9 for the former and &lt; 3.10 for the latter).  It would be great if ruff could provide an equivalent option so that we are able to adopt the new syntax upon upgrading Python, without having to ignore the rules (and later forget to unignore them).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-29 20:42</div>
            <div class="timeline-body"><p>Can do!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2022-11-29 20:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @charliermarsh on 2022-11-29 20:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2022-11-30 00:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-30 01:05</div>
            <div class="timeline-body"><p>Added in https://github.com/charliermarsh/ruff/pull/965. I mirrored pyupgrade's behavior, which is that if you target Python 3.9, we still make those upgrades even if you passed in <code>--keep-runtime-typing</code> -- so that setting is only applicable when <code>--target-version</code> is 3.7 or 3.8, and you've imported <code>from __future__ import annotations</code> .</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-11-30 01:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:45:35 UTC
    </footer>
</body>
</html>
