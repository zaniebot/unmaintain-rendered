<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nested bare except not found - astral-sh/ruff #5678</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Nested bare except not found</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/5678">#5678</a>
        opened by <a href="https://github.com/puittenbroek">@puittenbroek</a>
        on 2023-07-11 08:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/puittenbroek">@puittenbroek</a> on 2023-07-11 08:24</div>
            <div class="timeline-body"><p>Tried to search for an existing issue regarding this but couldn't find any. Apologies if my search was insufficient.
Busy introducing ruff for our repositories and ran into situation where it didn't find all issues that flake8 did raise.
Most notably this 'bare except' issue.</p>
<p>A minimal code snippet that reproduces the bug.:</p>
<pre><code class="language-python">def some_function(*args, **kwargs):
    try:
        1 / 0
    except:
        raise


if __name__ == &quot;__main__&quot;:
    try:
        1 / 0
    except:
        pass

    some_function()

</code></pre>
<p>The command you invoked (e.g., <code>ruff /path/to/file.py --fix</code>), ideally including the <code>--isolated</code> flag.:</p>
<pre><code class="language-bash">ruff check --isolated -n broken.py
</code></pre>
<p>The current Ruff version (<code>ruff --version</code>):</p>
<pre><code>ruff 0.0.277
</code></pre>
<p>Output:</p>
<pre><code>broken.py:11:5: E722 Do not use bare `except`
Found 1 error.
</code></pre>
<p>Expected it to also find line 4, flake8 does find this; <code>flake8 broken.py</code>:</p>
<pre><code>broken.py:4:5: E722 do not use bare 'except'
broken.py:11:5: E722 do not use bare 'except'

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-11 13:16</div>
            <div class="timeline-body"><p>I believe it's because you're re-raising the exception on line 5, which we allow, since it then forces the exception to be handled by the caller.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/puittenbroek">@puittenbroek</a> on 2023-07-11 13:20</div>
            <div class="timeline-body"><p>Ha.. you're right. If I replace it with a <code>pass</code> ruff does error on it. Case closed then :+1:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @puittenbroek on 2023-07-11 13:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">waiting-on-author</span> added by @charliermarsh on 2023-07-11 13:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-11 13:26</div>
            <div class="timeline-body"><p>Thanks for the clear issue :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">waiting-on-author</span> removed by @charliermarsh on 2023-07-11 13:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:50 UTC
    </footer>
</body>
</html>
