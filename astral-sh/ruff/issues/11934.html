<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>☂️ Syntax errors raised by the compiler - astral-sh/ruff #11934</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>☂️ Syntax errors raised by the compiler</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11934">#11934</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2024-06-19 03:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-06-19 03:26</div>
            <div class="timeline-body"><p>This is an umbrella issue to collect all the syntax errors that are raised by the CPython compiler. These are different than the ones that are raised by the parser. IOW, the source code which raises these errors are valid as per the grammar.</p>
<ul>
<li>[x] <a href="https://github.com/astral-sh/ruff/pull/16858#r2005396519">Duplicate parameter names</a> (https://github.com/astral-sh/ruff/pull/17131)</li>
<li>[x] <code>await</code> outside async function (PLE1142) (https://github.com/astral-sh/ruff/pull/17363)</li>
<li>[x] <code>yield</code> outside function (F704) (https://github.com/astral-sh/ruff/pull/17298)</li>
<li>[x] <code>return</code> outside function (F706) (https://github.com/astral-sh/ruff/pull/17300)</li>
<li>[x] <code>await</code> in annotations (extending the <code>yield</code> and named expression handling from #17101) (https://github.com/astral-sh/ruff/pull/17282)</li>
<li>[x] PEP 649 annotations in annotated assignments (https://github.com/astral-sh/ruff/pull/17283)</li>
<li>[x] https://github.com/astral-sh/ruff/issues/11118 (https://github.com/astral-sh/ruff/pull/17101)<ul>
<li><a href="https://peps.python.org/pep-0649/#changes-to-allowable-annotations-syntax">PEP 649</a></li>
</ul>
</li>
<li>[x] Duplicate key in mapping <code>match</code> pattern (<code>case {&quot;x&quot;: 1, &quot;x&quot;: 2}:</code>) (https://github.com/astral-sh/ruff/pull/17129)</li>
<li>[x] Name assigned before <code>global</code> declaration (PLE0118) (https://github.com/astral-sh/ruff/pull/17135)</li>
<li>[x] https://github.com/astral-sh/ruff/issues/16520 (https://github.com/astral-sh/ruff/pull/17134)</li>
<li>[x] https://github.com/astral-sh/ruff/issues/13759 (<a href="https://github.com/python/cpython/pull/100581">cpython#100581</a>)</li>
<li>[x] Multiple assignments to name 'a' in pattern (<code>case [a, b, a]:</code>)</li>
<li>[x] <a href="https://github.com/astral-sh/ruff/blob/ff3bf583b28c455a19571a54cd4a4e2bc024b5b8/crates/ruff_python_ast/src/nodes.rs#L3024-L3035">Irrefutable patterns</a> are syntax errors<ul>
<li><code>SyntaxError: name capture 'x' makes remaining patterns unreachable</code></li>
<li><code>SyntaxError: wildcard makes remaining patterns unreachable</code></li>
</ul>
</li>
<li>[x] https://github.com/astral-sh/ruff/issues/11119</li>
<li>[x] #14395</li>
</ul>
<p>A lot of them are mentioned in this <a href="https://github.com/astral-sh/ruff/issues/7633#issuecomment-1740424031">comment</a>. These all would be part of <code>E999</code> rule.</p>
<h2>Version-related errors</h2>
<p>The following are both version-related and detected by the compiler. Many of them were originally tracked in #6591.</p>
<h3>3.13</h3>
<ul>
<li>[x] ~~<code>global</code> declarations in <code>try</code> nodes~~ (<a href="https://github.com/python/cpython/issues/111123">cpython#111123</a>) (https://github.com/astral-sh/ruff/pull/17285)<ul>
<li>Are now allowed in <code>except</code> blocks if the variable is only referenced in an <code>else</code> block</li>
<li>Are now disallowed in <code>else</code> blocks if the variable is only referenced in an <code>except</code> block</li>
</ul>
</li>
</ul>
<h3>3.11</h3>
<ul>
<li>[x] Async comprehensions are now allowed when nested inside sync comprehensions in async functions (<a href="https://github.com/python/cpython/issues/77527">cpython#77527</a>) (https://github.com/astral-sh/ruff/pull/17177)</li>
</ul>
<h3>3.10</h3>
<ul>
<li>[x] <code>del __debug__</code> is a syntax error on Python 3.10+ (<a href="https://github.com/python/cpython/issues/89163">cpython#89163</a>)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">tracking</span> added by @dhruvmanila on 2024-06-19 03:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @ntBre by @ntBre on 2025-03-05 21:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-04-23 19:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:12 UTC
    </footer>
</body>
</html>
