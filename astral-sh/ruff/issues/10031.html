<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`ERA001` does not detect commented out `case` statements - astral-sh/ruff #10031</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>ERA001</code> does not detect commented out <code>case</code> statements</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10031">#10031</a>
        opened by <a href="https://github.com/dosisod">@dosisod</a>
        on 2024-02-18 20:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dosisod">@dosisod</a></div>
            <div class="timeline-body"><p>Commented out <code>case</code> statements are ignored if they are missing a body, or have a body and fit on one line:</p>
<pre><code class="language-python">match 1:
    # case 1:          # commented code ignored
    # case 1: print()  # commented code ignored

    case 1:
        pass
        # print()  # commented code found

# if 1: print()  # commented code found

if 1:
    pass
    # print()  # commented code found
</code></pre>
<p>Running:</p>
<pre><code>$ ruff --version
ruff 0.2.2

$ ruff file.py --output-format=concise
file.py:7:9: ERA001 Found commented-out code
file.py:9:1: ERA001 Found commented-out code
file.py:13:5: ERA001 Found commented-out code
</code></pre>
<p>The first 2 <code>case</code> blocks should be counted but aren't. Often times I will duplicate and comment out a <code>case</code> statement to figure out why a pattern isn't matching, only to forget to remove the commented out case.</p>
<p>The example with the case/body on one line is less of an issue but still odd, perhaps the <code>case</code> statement is preventing the body from being detected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-19 07:59</div>
            <div class="timeline-body"><p>Thanks for the report.</p>
<p>I think we need to extend the <code>POSITIVE_CASES</code> to handle <code>case</code></p>
<p>Playground: https://play.ruff.rs/5a305aa9-6e5c-4fa4-999a-8fc427ab9a23</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MichaReiser on 2024-02-19 07:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @MichaReiser on 2024-02-19 07:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @MichaReiser on 2024-02-19 07:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ottaviohartman">@ottaviohartman</a> on 2024-02-20 00:28</div>
            <div class="timeline-body"><p>@MichaReiser opened my first PR for this! Let me know how it looks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-02-20 03:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:49:39 UTC
    </footer>
</body>
</html>
