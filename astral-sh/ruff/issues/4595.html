<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Possibility to implement flake8-length into ruff - astral-sh/ruff #4595</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Possibility to implement flake8-length into ruff</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/4595">#4595</a>
        opened by <a href="https://github.com/jsh9">@jsh9</a>
        on 2023-05-23 07:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jsh9">@jsh9</a> on 2023-05-23 07:48</div>
            <div class="timeline-body"><p>Hi,</p>
<p>I've found that <a href="https://github.com/orsinium-labs/flake8-length">flake8-length</a> written by @orsinium to be one of my favorite flake8 plugins.  I searched the issue pool of ruff and didn't find anyone mentioning it.</p>
<p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/orsinium">@orsinium</a> on 2023-05-23 08:51</div>
            <div class="timeline-body"><p><img src="https://github.com/charliermarsh/ruff/assets/9638362/5677ad29-0c59-4652-b849-6ed4a8284747" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">plugin</span> added by @charliermarsh on 2023-05-24 01:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-24 01:24</div>
            <div class="timeline-body"><p>I think my preference would be to modify our existing rule rather than add multiple line-length rules within Ruff itself. Same goes for flake8-bugbear's variant that allows a 10% buffer. E.g., we do allow long lines that end in URLs, as long as the URL <em>starts</em> before the length limit (which differs from pycodestyle). We also allow lines that consistent of a single token without whitespace to break it up.</p>
<p>What other behaviors or exceptions might you find helpful in our check?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2023-05-24 01:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jsh9">@jsh9</a> on 2023-05-24 02:43</div>
            <div class="timeline-body"><p>Hi Charlie,</p>
<p>Ideally for me, an &quot;intelligent&quot; line length checker should ignore these situations:</p>
<ul>
<li>Long string literals (if the string starts before the length limit)</li>
<li>Comments (if the non-comment part of the line ends before the length limit)</li>
</ul>
<p>flake8-length can do both, which is why I like it.  Also, the violation code of flake8-length is <code>LN</code>, which is intuitive (better than <code>E501</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/orsinium">@orsinium</a> on 2023-05-24 06:16</div>
            <div class="timeline-body"><blockquote>
<p>What other behaviors or exceptions might you find helpful in our check?</p>
</blockquote>
<p>Flake8-length allows:</p>
<ul>
<li>Long string literals.</li>
<li>Long URLs in strings and comments.</li>
<li>When the last word in a text (comment, string, or docstring) doesn't fit a bit.</li>
<li>Long shebangs.</li>
<li><code>noqa:</code>, <code>pragma:</code> and similar comments that should appear on the same line as their violation and so cannot be easily moved or split.</li>
</ul>
<p>The motivation is described in the README, but in short, these are things you want to keep unbroken for the sake of grep'ability.</p>
<p>It also allows <a href="https://github.com/orsinium-labs/flake8-length/blob/master/flake8_length/_parser.py#L15-L36">certain symbols and tokens</a> to appear after the string. So, <code>a: f('very long text'),</code> won't be reported (<code>)</code> and <code>,</code> are allowed to go after) but <code>f('very long text').something_else()</code> will be reported because the <code>something_else</code> part goes beyond the screen but it's significant for the reader to see.</p>
<p>There is also a specific exception for raw SQL queries. SQL allows newlines between tokens, so they can be safely reformatted into a multiline string literal.</p>
<p>I guess that's it. The parser's source code is just about 100 lines.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @charliermarsh on 2023-07-10 01:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2023-07-10 01:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stinodego">@stinodego</a> on 2023-08-09 19:03</div>
            <div class="timeline-body"><p>I have tried <code>flake8-length</code> before, but I found that I get pretty much the same behavior by ignoring <code>E501</code> (line too long) and enabling pycodestyle's <code>max-doc-length</code>:</p>
<pre><code>
[tool.ruff]
line-length = 88

select = [
  &quot;E&quot;, # pycodestyle
  &quot;W&quot;, # pycodestyle
]
ignore = [
  &quot;E501&quot;,  # Line length regulated by black
]

[tool.ruff.pycodestyle]
max-doc-length = 88
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/orsinium">@orsinium</a> on 2023-08-10 06:16</div>
            <div class="timeline-body"><blockquote>
<p>but I found that I get pretty much the same behavior by ignoring E501 (line too long) &lt;...&gt;</p>
</blockquote>
<p>The point of flake8-length is to not remove the line length limit for the code. From the README:</p>
<blockquote>
<p>If you're about having as strict limits as possible, flake8-length is on your side. It's better to set 90 chars limit with a few reasonable exceptions rather than have 120 or more chars limit for everything.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stinodego">@stinodego</a> on 2023-08-10 08:21</div>
            <div class="timeline-body"><p>Yes, the point being that <code>black</code> already takes care of that!</p>
<p>It will wrap anything except for very long strings and comments. And the <code>max-doc-length</code> setting will then warn you about certain long strings / comments, but has reasonable exceptions built-in. So it works out to be approximately the same (in my experience) as what the <code>flake8-length</code> plugin is trying to achieve.</p>
<p>If you take <code>black</code> out of the picture, then it becomes a whole different conversation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lev-blit">@lev-blit</a> on 2023-08-22 12:47</div>
            <div class="timeline-body"><p>@stinodego I agree that black takes care of that, but it adds a large overhead. There's a project I worked on which had about 200~ files, with some of them being very large, and running ruff was shorter than a blink of an eye but running black against all those files felt like an eternity compared to that (and it was quite long without comparison too - about 8 seconds). That's just because ruff doesn't ignore comments and other examples given above regarding <code>flake8-length</code>.</p>
<p>It would be really useful for ruff to be able to support those features, then I would be able to use black only as a formatting tool and not as a linting tool just for E501.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RosanneZe">@RosanneZe</a> on 2024-02-16 08:58</div>
            <div class="timeline-body"><p>We're looking to switch from flake8 to ruff, but we would like to keep the behaviour that flake8-length gives. So I'd like to add my vote to adding it as a plugin.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SmartManoj">@SmartManoj</a> on 2025-06-26 02:58</div>
            <div class="timeline-body"><p>Is this not solved with <a href="https://docs.astral.sh/ruff/settings/#line-length">this</a>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lev-blit">@lev-blit</a> on 2025-07-04 22:59</div>
            <div class="timeline-body"><p>@SmartManoj no, it doesn't ignore comments / docstrings</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MarthinusBosman">@MarthinusBosman</a> on 2025-08-04 14:24</div>
            <div class="timeline-body"><p>Hoping to add some attention to this. At least some solution where I can either autowrap comments/docstrings or ignore them to some degree.</p>
<p>It's very boring to have to go and manually fix this for every instance when trying to switch existing projects to ruff.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:30:10 UTC
    </footer>
</body>
</html>
