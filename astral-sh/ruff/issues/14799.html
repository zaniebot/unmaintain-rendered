<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUF052 Fix Breaks Overload Definitions - astral-sh/ruff #14799</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>RUF052 Fix Breaks Overload Definitions</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/14799">#14799</a>
        opened by <a href="https://github.com/oguzhanmeteozturk">@oguzhanmeteozturk</a>
        on 2024-12-05 23:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/oguzhanmeteozturk">@oguzhanmeteozturk</a> on 2024-12-05 23:08</div>
            <div class="timeline-body"><p>The automatic fix for RUF052 introduces inconsistent parameter renaming in overload definitions. Specifically, if a parameter name is prefixed with an underscore (e.g., _param), the fixer renames it inconsistently across overloads and the main function. This leads to invalid overload definitions, as parameter names must match exactly between overloads and the implementation.</p>
<pre><code class="language-python">@overload
def func(
    tp: str, value: object, /, *, strict: bool = True, eval: bool = True, _param: str = &quot;func&quot;
) -&gt; bool: ...

@overload
def func(
    tp: type[_T], value: object, /, *, strict: bool = True, eval: bool = True, _param: str = &quot;func&quot;
) -&gt; _T | None: ...

def func(
    tp: str | type[_T] | object, value: object,  /, *, strict: bool = True, eval: bool = True, param: str = &quot;func&quot; 
) -&gt; _T | object | None: ...
</code></pre>
<p>I am not fully up to date on the process or discussions around RUF052, but given the potential for these changes to render code invalid, I wonder why wasnâ€™t this fix categorized as an unsafe fix requiring explicit user consent in the first place?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @AlexWaygood on 2024-12-05 23:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by @AlexWaygood on 2024-12-05 23:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @AlexWaygood on 2024-12-06 00:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-06 08:56</div>
            <div class="timeline-body"><p>Thanks. Marking the fix as unsafe is a good first step if the binding belongs to a function parameter.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-06 08:57</div>
            <div class="timeline-body"><p>Related to https://github.com/astral-sh/ruff/issues/14790 and https://github.com/astral-sh/ruff/issues/14796</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14818.html">astral-sh/ruff#14818</a> on 2024-12-06 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-12-06 14:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:54 UTC
    </footer>
</body>
</html>
