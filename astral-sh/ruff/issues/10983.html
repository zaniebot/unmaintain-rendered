<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formatter: include files that were formatted in the output - astral-sh/ruff #10983</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Formatter: include files that were formatted in the output</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10983">#10983</a>
        opened by <a href="https://github.com/AdrianB-sovo">@AdrianB-sovo</a>
        on 2024-04-16 20:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AdrianB-sovo">@AdrianB-sovo</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
formatter, CI, filenames, files
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>It would be useful to have the files that were formatted when running <code>ruff-format</code>.
<strong>Usecase:</strong> I use the pre-commit config to run Ruff locally before each commit, but also on the CI <strong>for all files</strong>.</p>
<ul>
<li>Locally, I want to automatically change the files with the formatter on a commit.</li>
<li>In the CI, I want to see what files are not correctly formatted if the format checking fails.</li>
</ul>
<p>So, to be able to do this with the same config, I use <code>ruff-format</code> <strong>without</strong> the <code>--check</code> option, but then I don't get the list of formatted files.
With the <code>--check</code> option:</p>
<pre><code>ruff.....................................................................Passed
ruff-format..............................................................Failed
- hook id: ruff-format
- exit code: 1

Would reformat: src/api/v1/endpoints/customers.py
1 file would be reformatted, 317 files already formatted
</code></pre>
<p>Without the <code>--check</code> option:</p>
<pre><code>ruff.....................................................................Passed
ruff-format..............................................................Failed
- hook id: ruff-format
- files were modified by this hook

1 file reformatted, 317 files left unchanged
</code></pre>
<p>It's not a big problem, since I can run the formatter locally on all files, but I think it would still be nice to have the list of formatted files, either by default or by opting-in with an option.</p>
<p>I'm using ruff v0.3.6.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Formatter: include files that were formatted" to "Formatter: include files that were formatted in the output" by @AdrianB-sovo on 2024-04-16 20:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @AlexWaygood on 2024-04-16 21:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @AlexWaygood on 2024-04-16 21:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-17 17:32</div>
            <div class="timeline-body"><p>I believe this is the same as https://github.com/astral-sh/ruff/issues/8953.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-17 17:32</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:50:05 UTC
    </footer>
</body>
</html>
