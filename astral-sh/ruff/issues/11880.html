<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`ruff` SchemaStore entry doesn't have `tool.ruff.lint` - astral-sh/ruff #11880</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>ruff</code> SchemaStore entry doesn&#x27;t have <code>tool.ruff.lint</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11880">#11880</a>
        opened by <a href="https://github.com/jamesbraza">@jamesbraza</a>
        on 2024-06-14 20:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jamesbraza">@jamesbraza</a></div>
            <div class="timeline-body"><p>With <code>ruff==0.4.9</code>, <code>validate-pyproject==0.18</code> and <code>validate-pyproject-schema-store==2024.6.10</code> in <code>pre-commit</code>:</p>
<pre><code>  - repo: https://github.com/abravalheri/validate-pyproject
    rev: v0.18
    hooks:
      - id: validate-pyproject
        additional_dependencies:
          - &quot;validate-pyproject-schema-store[all]&quot;
</code></pre>
<p>Running <code>validate-pyproject</code> on my <code>pyproject.toml</code> with <code>tool.ruff.lint</code> in it:</p>
<pre><code>Validate pyproject.toml.......................................................Failed
- hook id: validate-pyproject
- exit code: 1

Invalid file: pyproject.toml
[ERROR] `tool.ruff.lint` cannot be validated by any definition:

    - type: table
      keys:
        &#x27;allowed-confusables&#x27;:
          type: [array, null]
          items: {type: string, max length: 1, min length: 1}
        &#x27;dummy-variable-rgx&#x27;:
          type: [string, null]
        &#x27;exclude&#x27;:
          type: [array, null]
          items: {type: string}
        &#x27;explicit-preview-rules&#x27;:
          type: [boolean, null]
        &#x27;extend-fixable&#x27;:
          type: [array, null]
          items: {}
        &#x27;extend-ignore&#x27;:
          deprecated: True
          type: [array, null]
          items: {}
        &#x27;extend-per-file-ignores&#x27;:
          type: [table, null]
          additional keys:
            type: array
            items: {}
        &#x27;extend-safe-fixes&#x27;:
          type: [array, null]
          items: {}
        &#x27;extend-select&#x27;:
          type: [array, null]
          items: {}
        &#x27;extend-unfixable&#x27;:
          deprecated: True
          type: [array, null]
          items: {}
        &#x27;extend-unsafe-fixes&#x27;:
          type: [array, null]
          items: {}
        &#x27;external&#x27;:
          type: [array, null]
          items: {type: string}
        &#x27;fixable&#x27;:
          type: [array, null]
          items: {}
        &#x27;flake8-annotations&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-bandit&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-boolean-trap&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-bugbear&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-builtins&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-comprehensions&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-copyright&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-errmsg&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-gettext&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-implicit-str-concat&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-import-conventions&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-pytest-style&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-quotes&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-self&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-tidy-imports&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-type-checking&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;flake8-unused-arguments&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;ignore&#x27;:
          type: [array, null]
          items: {}
        &#x27;ignore-init-module-imports&#x27;:
          type: [boolean, null]
        &#x27;isort&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;logger-objects&#x27;:
          type: [array, null]
          items: {type: string}
        &#x27;mccabe&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;pep8-naming&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;per-file-ignores&#x27;:
          type: [table, null]
          additional keys:
            type: array
            items: {}
        &#x27;preview&#x27;:
          type: [boolean, null]
        &#x27;pycodestyle&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;pydocstyle&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;pyflakes&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;pylint&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;pyupgrade&#x27;:
          at least one of the following:
            - {}
            - {type: null}
        &#x27;select&#x27;:
          type: [array, null]
          items: {}
        &#x27;task-tags&#x27;:
          type: [array, null]
          items: {type: string}
        &#x27;typing-modules&#x27;:
          type: [array, null]
          items: {type: string}
        &#x27;unfixable&#x27;:
          type: [array, null]
          items: {}
      additional keys: False
    - {type: null}
</code></pre>
<p>Is <code>tool.ruff.lint</code> in https://github.com/SchemaStore/schemastore/blob/master/src/schemas/json/ruff.json?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 20:43</div>
            <div class="timeline-body"><p>Yep this is defined at https://github.com/SchemaStore/schemastore/blob/9f41e44514dddbe9c5dca604055bafb72ba514c2/src/schemas/json/ruff.json#L419-L428</p>
<p>Seems like an issue with <code>validate-pyproject-schema-store</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 20:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 20:56</div>
            <div class="timeline-body"><p>Actually this runs fine:</p>
<pre><code>[tool.ruff.lint]
extend-select = [
    &quot;FURB105&quot;,
]
</code></pre>
<p>And this generates the crash:</p>
<pre><code>[tool.ruff.lint]
extend-select = [
    &quot;FURB105&quot;,
    &quot;FURB154&quot;,
]
</code></pre>
<p>It seems FURB154 was just released today in https://github.com/astral-sh/ruff/tree/v0.4.9.</p>
<p>So it seems https://github.com/SchemaStore/schemastore/blob/master/src/schemas/json/ruff.json#L2559-L2561 needs updating?</p>
<p>And it&#x27;s a bad failure message from <code>validate-pyproject</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 21:05</div>
            <div class="timeline-body"><p>Cc @alex-700 since he added <code>FURB154</code> in <a href="https://github.com/astral-sh/ruff/pull/11187">astral-sh/ruff#11187</a> (would you mind adding it to JSON schema as well?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 21:10</div>
            <div class="timeline-body"><p>Thanks for investigating! It should be present in our copy of the schema, we just need to push to schema store.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 21:13</div>
            <div class="timeline-body"><p>Ah, I see:</p>
<p>https://github.com/astral-sh/ruff/blob/ccc418cc49eaaac28197c503ac711f4972672a5e/ruff.schema.json#L3070</p>
<p>Do you think there is an opportunity for increased automation here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 21:13</div>
            <div class="timeline-body"><p>We have to open a pull request downstream and we have a script to automate it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 21:17</div>
            <div class="timeline-body"><p>Okay gotchu that sounds good. Do you think that script can be auto-run by Ruff&#x27;s CI when a new release is cut in GitHub?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 21:21</div>
            <div class="timeline-body"><p>I don&#x27;t think we have a bot account that would open pull requests over in another organization.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 21:51</div>
            <div class="timeline-body"><p>https://github.com/SchemaStore/schemastore/pull/3866</p>
<p>We&#x27;ll just need to be better about doing this during releases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 22:05</div>
            <div class="timeline-body"><p>Okay sounds good, going to close this out in favor of that PR</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 22:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:54 UTC
    </footer>
</body>
</html>
