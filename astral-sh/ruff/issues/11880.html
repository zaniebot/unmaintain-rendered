<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`ruff` SchemaStore entry doesn't have `tool.ruff.lint` - astral-sh/ruff #11880</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`ruff` SchemaStore entry doesn't have `tool.ruff.lint`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/11880">#11880</a>
        opened by <a href="https://github.com/jamesbraza">@jamesbraza</a>
        on 2024-06-14 20:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 20:37</div>
            <div class="timeline-body"><p>With <code>ruff==0.4.9</code>, <code>validate-pyproject==0.18</code> and <code>validate-pyproject-schema-store==2024.6.10</code> in <code>pre-commit</code>:</p>
<pre><code class="language-yaml">  - repo: https://github.com/abravalheri/validate-pyproject
    rev: v0.18
    hooks:
      - id: validate-pyproject
        additional_dependencies:
          - &quot;validate-pyproject-schema-store[all]&quot;
</code></pre>
<p>Running <code>validate-pyproject</code> on my <code>pyproject.toml</code> with <code>tool.ruff.lint</code> in it:</p>
<pre><code>Validate pyproject.toml.......................................................Failed
- hook id: validate-pyproject
- exit code: 1

Invalid file: pyproject.toml
[ERROR] `tool.ruff.lint` cannot be validated by any definition:

    - type: table
      keys:
        'allowed-confusables':
          type: [array, null]
          items: {type: string, max length: 1, min length: 1}
        'dummy-variable-rgx':
          type: [string, null]
        'exclude':
          type: [array, null]
          items: {type: string}
        'explicit-preview-rules':
          type: [boolean, null]
        'extend-fixable':
          type: [array, null]
          items: {}
        'extend-ignore':
          deprecated: True
          type: [array, null]
          items: {}
        'extend-per-file-ignores':
          type: [table, null]
          additional keys:
            type: array
            items: {}
        'extend-safe-fixes':
          type: [array, null]
          items: {}
        'extend-select':
          type: [array, null]
          items: {}
        'extend-unfixable':
          deprecated: True
          type: [array, null]
          items: {}
        'extend-unsafe-fixes':
          type: [array, null]
          items: {}
        'external':
          type: [array, null]
          items: {type: string}
        'fixable':
          type: [array, null]
          items: {}
        'flake8-annotations':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-bandit':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-boolean-trap':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-bugbear':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-builtins':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-comprehensions':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-copyright':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-errmsg':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-gettext':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-implicit-str-concat':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-import-conventions':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-pytest-style':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-quotes':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-self':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-tidy-imports':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-type-checking':
          at least one of the following:
            - {}
            - {type: null}
        'flake8-unused-arguments':
          at least one of the following:
            - {}
            - {type: null}
        'ignore':
          type: [array, null]
          items: {}
        'ignore-init-module-imports':
          type: [boolean, null]
        'isort':
          at least one of the following:
            - {}
            - {type: null}
        'logger-objects':
          type: [array, null]
          items: {type: string}
        'mccabe':
          at least one of the following:
            - {}
            - {type: null}
        'pep8-naming':
          at least one of the following:
            - {}
            - {type: null}
        'per-file-ignores':
          type: [table, null]
          additional keys:
            type: array
            items: {}
        'preview':
          type: [boolean, null]
        'pycodestyle':
          at least one of the following:
            - {}
            - {type: null}
        'pydocstyle':
          at least one of the following:
            - {}
            - {type: null}
        'pyflakes':
          at least one of the following:
            - {}
            - {type: null}
        'pylint':
          at least one of the following:
            - {}
            - {type: null}
        'pyupgrade':
          at least one of the following:
            - {}
            - {type: null}
        'select':
          type: [array, null]
          items: {}
        'task-tags':
          type: [array, null]
          items: {type: string}
        'typing-modules':
          type: [array, null]
          items: {type: string}
        'unfixable':
          type: [array, null]
          items: {}
      additional keys: False
    - {type: null}
</code></pre>
<p>Is <code>tool.ruff.lint</code> in https://github.com/SchemaStore/schemastore/blob/master/src/schemas/json/ruff.json?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 20:43</div>
            <div class="timeline-body"><p>Yep this is defined at https://github.com/SchemaStore/schemastore/blob/9f41e44514dddbe9c5dca604055bafb72ba514c2/src/schemas/json/ruff.json#L419-L428</p>
<p>Seems like an issue with <code>validate-pyproject-schema-store</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-06-14 20:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 20:56</div>
            <div class="timeline-body"><p>Actually this runs fine:</p>
<pre><code class="language-toml">[tool.ruff.lint]
extend-select = [
    &quot;FURB105&quot;,
]
</code></pre>
<p>And this generates the crash:</p>
<pre><code class="language-toml">[tool.ruff.lint]
extend-select = [
    &quot;FURB105&quot;,
    &quot;FURB154&quot;,
]
</code></pre>
<p>It seems FURB154 was just released today in https://github.com/astral-sh/ruff/tree/v0.4.9.</p>
<p>So it seems https://github.com/SchemaStore/schemastore/blob/master/src/schemas/json/ruff.json#L2559-L2561 needs updating?</p>
<p>And it's a bad failure message from <code>validate-pyproject</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../abravalheri/validate-pyproject/issues/180.html">abravalheri/validate-pyproject#180</a> on 2024-06-14 21:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 21:05</div>
            <div class="timeline-body"><p>Cc @alex-700 since he added <code>FURB154</code> in https://github.com/astral-sh/ruff/pull/11187 (would you mind adding it to JSON schema as well?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 21:10</div>
            <div class="timeline-body"><p>Thanks for investigating! It should be present in our copy of the schema, we just need to push to schema store.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 21:13</div>
            <div class="timeline-body"><p>Ah, I see:</p>
<p>https://github.com/astral-sh/ruff/blob/ccc418cc49eaaac28197c503ac711f4972672a5e/ruff.schema.json#L3070</p>
<p>Do you think there is an opportunity for increased automation here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 21:13</div>
            <div class="timeline-body"><p>We have to open a pull request downstream and we have a script to automate it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 21:17</div>
            <div class="timeline-body"><p>Okay gotchu that sounds good. Do you think that script can be auto-run by Ruff's CI when a new release is cut in GitHub?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 21:21</div>
            <div class="timeline-body"><p>I don't think we have a bot account that would open pull requests over in another organization.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 21:51</div>
            <div class="timeline-body"><p>https://github.com/SchemaStore/schemastore/pull/3866</p>
<p>We'll just need to be better about doing this during releases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-06-14 22:05</div>
            <div class="timeline-body"><p>Okay sounds good, going to close this out in favor of that PR</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jamesbraza on 2024-06-14 22:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/14810.html">astral-sh/ruff#14810</a> on 2024-12-06 09:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:53 UTC
    </footer>
</body>
</html>
