<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`UP037` with torchtyping can be annoying - astral-sh/ruff #12082</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>UP037</code> with torchtyping can be annoying</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12082">#12082</a>
        opened by <a href="https://github.com/fsouza">@fsouza</a>
        on 2024-06-28 04:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/fsouza">@fsouza</a> on 2024-06-28 04:15</div>
            <div class="timeline-body"><p>(I wasn't sure if this was the ~same as #10812 so I figured opening a new issue wouldn't hurt)</p>
<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>When using <a href="https://github.com/patrick-kidger/torchtyping">torchtyping</a>, it's common to write annotations like <code>TensorType[&quot;batch&quot;, &quot;x_channels&quot;]</code>. ruff doesn't like that because of the quoted <code>&quot;batch&quot;</code> and <code>&quot;x_channels&quot;</code> (and removes the quote with autofix, leading to invalid code).</p>
<p>For now, we're resorting to <code># noqa</code>, but I wonder if this is something ruff can handle.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/knyazer">@knyazer</a> on 2024-07-02 19:58</div>
            <div class="timeline-body"><p>Does not answer your question, but torchtyping is currently in an almost deprecated state: prefer to use <a href="https://github.com/patrick-kidger/jaxtyping">jaxtyping</a> (it supports typing of anything numpy-ish, but the name is slightly misleading).</p>
<p>I think at some point I was reading some stuff from Patrick (the author of torchtyping) about what he uses in his workflow, and his observation was that most static analysis tools work poorly with his typing libraries, so the main intent behind using the type annotations was to use them with <a href="https://github.com/beartype/beartype">beartype</a>, a runtime typechecker.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:15 UTC
    </footer>
</body>
</html>
