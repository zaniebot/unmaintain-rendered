<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow character ranges or locales in `allowed-confusables` for RUF001, RUF002, &amp; RUF003 - astral-sh/ruff #13330</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow character ranges or locales in <code>allowed-confusables</code> for RUF001, RUF002, &amp; RUF003</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13330">#13330</a>
        opened by <a href="https://github.com/namurphy">@namurphy</a>
        on 2024-09-12 01:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/namurphy">@namurphy</a></div>
            <div class="timeline-body"><p>Rules <a href="https://docs.astral.sh/ruff/rules/ambiguous-unicode-character-string/">RUF001</a>, <a href="https://docs.astral.sh/ruff/rules/ambiguous-unicode-character-docstring/">RUF002</a>, and <a href="https://docs.astral.sh/ruff/rules/ambiguous-unicode-character-comment/">RUF003</a> help flag potentially ambiguous Unicode characters. While the configuration variable <code>allowed-confusables</code> can be used to specify allowed Unicode characters, it can become cumbersome to define <code>allowed-confusables</code> for projects whose docstrings use a lot of mathematical notation, or projects that are written in languages that use (for example) the Cyrillic alphabet.</p>
<p>It would be quite convenient if <code>allowed-confusables</code> could contain character ranges. Some possible use cases are:</p>
<pre><code class="language-toml">allowed-confusables = [&quot;α-ω&quot;]  # lower case Greek letters for use in equations
allowed-confusables = [&quot;∀-⋿&quot;]  # Mathematical operators Unicode block
allowed-confusables = [&quot;Ѐ-ӿ&quot;]  # Cyrillic alphabet
</code></pre>
<p>Allowing character ranges would make it easier to configure exceptions to these rules.  It'd also be less likely that we'd forget to include certain Unicode characters.</p>
<p>A related possibility would be to allow regular expressions, since there may be some use cases where a certain character should be allowed but only in a specific context.</p>
<p>Many thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-12 18:42</div>
            <div class="timeline-body"><p>That does sound annoying. I just looked through VS code's confusable code and it seems to have some concept for locale confusables. That's why I'm not sure if allowing character ranges is the right solution. Maybe a better approach is to allow configuring the locale(s) and if mathematical operators should be allowed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Allow character ranges in `allowed-confusables` for RUF001, RUF002, & RUF003" to "Allow character ranges or locales in `allowed-confusables` for RUF001, RUF002, & RUF003" by @namurphy on 2024-09-12 18:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/namurphy">@namurphy</a> on 2024-09-12 19:32</div>
            <div class="timeline-body"><blockquote>
<p>That does sound annoying. I just looked through VS code's confusable code and it seems to have some concept for locale confusables. That's why I'm not sure if allowing character ranges is the right solution. Maybe a better approach is to allow configuring the locale(s) and if mathematical operators should be allowed.</p>
</blockquote>
<p>Very interesting! I hadn't thought of that!  Defining locales (and being able to specify more than one) would make it even easier to configure allowed confusables.  I updated the title to include that possibility.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:51:04 UTC
    </footer>
</body>
</html>
