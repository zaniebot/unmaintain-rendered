```yaml
number: 11841
title: PLR1711 (useless-return) does not check return statements if they are indented.
type: issue
state: open
author: yuji38kwmt
labels:
  - rule
assignees: []
created_at: 2024-06-12T02:36:21Z
updated_at: 2024-06-12T06:44:59Z
url: https://github.com/astral-sh/ruff/issues/11841
synced_at: 2026-01-10T01:56:52Z
```

# PLR1711 (useless-return) does not check return statements if they are indented.

---

_Issue opened by @yuji38kwmt on 2024-06-12 02:36_


# Description

[PLR1711](https://docs.astral.sh/ruff/rules/useless-return/) (`useless-return`) does not check `return` statements if they are indented.

But with Pylint, [R1711](https://pylint.readthedocs.io/en/latest/user_guide/messages/refactor/useless-return.html) checks.

I expect Ruff to behave in the same way as Pylint.

### sample.py

```python
def foo(
    value_list: list[str],
) -> None:
    if len(value_list) == 0:
        print(f"a")
    else:
        print("b")
        return
```

### Checks with Ruff

```
$ ruff --version
ruff 0.4.8

$ ruff check --select PLR1711 sample.py
All checks passed!
```

### Checks with Pylint

```
$ pylint --version
pylint 3.2.3
astroid 3.2.2
Python 3.12.1 (main, Feb  7 2024, 10:25:21) [GCC 11.4.0]

$ pylint sample.py --enable R1711 --disable C,W
************* Module sample
sample.py:1:0: R1711: Useless return at end of function or method (useless-return)

------------------------------------------------------------------
Your code has been rated at 8.00/10 (previous run: 6.00/10, +2.00)

```




---

_Label `rule` added by @charliermarsh on 2024-06-12 02:44_

---

_Comment by @dhruvmanila on 2024-06-12 06:44_

We could possibly use `AnyNodeRef::from(node).last_child_in_body` https://github.com/astral-sh/ruff/blob/db8f2c2d9fec7cc6722fcfdd825189f14f839b68/crates/ruff_python_ast/src/node.rs#L6972-L6973 to get the last statement although I think there might be other nuances which we need to consider to match Pylint's behavior.

---
