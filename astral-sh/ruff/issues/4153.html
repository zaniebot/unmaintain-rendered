<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change `isort.split-on-trailing-comma` default to false - astral-sh/ruff #4153</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Change <code>isort.split-on-trailing-comma</code> default to false</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/4153">#4153</a>
        opened by <a href="https://github.com/janosh">@janosh</a>
        on 2023-04-29 21:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/janosh">@janosh</a></div>
            <div class="timeline-body"><p><a href="https://beta.ruff.rs/docs/settings/#split-on-trailing-comma">Currently defaults to true</a>, causing this to stay as is</p>
<pre><code>from a import (
    b,
)
</code></pre>
<p>I think a better default would be to fold:</p>
<pre><code>from a import b
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-29 23:00</div>
            <div class="timeline-body"><p>I think the current default is &quot;correct&quot; because it&#x27;s consistent with Black&#x27;s behavior and isort&#x27;s <code>profile = &quot;black&quot;</code>, unless I&#x27;m misunderstanding. Black respects these &quot;magic trailing commas&quot; (which has the downside you&#x27;ve outlined above: if you have a trailing comma, Black will never remove it) and so removing them would break Black compatibility by default.</p>
<p>So, I&#x27;d rather err on the side of leaving this default as-is. Users are, of course, welcome to change the setting in their own projects :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-29 23:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/janosh">@janosh</a> on 2023-04-29 23:04</div>
            <div class="timeline-body"><p>Good point. Didn&#x27;t consider <code>black</code>. I wish they&#x27;d change this default but seems very unlikely.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/janosh">@janosh</a> on 2023-04-29 23:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/intgr">@intgr</a> on 2023-05-20 19:46</div>
            <div class="timeline-body"><p>I also found this behavior surprising. I think <code>blacks</code>&#x27;s behavior is not relevant here, black is fine with either formatting. We should follow <code>isort</code>&#x27;s behavior instead.</p>
<p><code>split-on-trailing-comma = false</code> matches <code>isort</code>&#x27;s default behavior (with or without <code>profile = &quot;black&quot;</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/intgr">@intgr</a> on 2023-05-20 19:50</div>
            <div class="timeline-body"><blockquote>
<p>it&#x27;s consistent with Black&#x27;s behavior and isort&#x27;s profile = &quot;black&quot;, unless I&#x27;m misunderstanding</p>
</blockquote>
<p>I think you&#x27;re misunderstanding isort&#x27;s behavior :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-20 20:07</div>
            <div class="timeline-body"><p>Is this not a bug in isort? The documentation says that <code>split-on-trailing-comma</code> defaults to <code>true</code> for the Black profile (and collapsing imports like that is definitely inconsistent with Black).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/intgr">@intgr</a> on 2023-05-20 22:13</div>
            <div class="timeline-body"><p>If that&#x27;s the case, it sounds like a bug indeed.</p>
<p>Where does it say that? https://pycqa.github.io/isort/docs/configuration/options.html#split-on-trailing-comma only says the behavior mimics black when enabled, not that it&#x27;s set to true with black profile.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-20 22:15</div>
            <div class="timeline-body"><p>In the <a href="https://pycqa.github.io/isort/docs/configuration/profiles.html">Profiles</a> documentation:</p>
<img alt="Screen Shot 2023-05-20 at 6 15 10 PM" src="https://github.com/charliermarsh/ruff/assets/1309177/de6ed6c4-3c26-4a6b-8e16-876c363cc909">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-20 22:16</div>
            <div class="timeline-body"><p>(I agree with you that I&#x27;m not seeing this behavior in practice, so not certain what&#x27;s wrong: the documentation or the implementation.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/intgr">@intgr</a> on 2023-05-20 22:18</div>
            <div class="timeline-body"><p>Ah OK, I was looking at the &quot;Black Compatibility&quot; and &quot;Options&quot; sections of their docs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnthagen">@johnthagen</a> on 2023-05-21 18:40</div>
            <div class="timeline-body"><blockquote>
<p>(and collapsing imports like that is definitely inconsistent with Black).</p>
</blockquote>
<p>One minor note I wanted to bring up, it is inconsistent with how Black <em>would</em> have formatted it, but if isort or Ruff <em>do</em> format it to:</p>
<pre><code>from a import b
</code></pre>
<p>Black is happy with it, just like if a user would have compressed it to one line manually. We&#x27;ve been running this way with isort + black for years, but it does seem like this might not have been intentional as mentioned in this thread.</p>
<p>I do find this useful so I&#x27;m glad to hear there is an opt-out, since unlike other parts of code, it&#x27;d be much less likely for a user to <em>intentionally</em> want to lengthen imports as they might some other code since imports are mostly boilerplate. In my experience it&#x27;s much more likely that a user has their editor automatically remove an unused import but it leaves the trailing comma for another import from that same module. I&#x27;ve observed that over time in large code bases without <code>isort</code> collapsing these it can lead to a lot of wasted vertical space.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/janosh">@janosh</a> on 2023-05-21 20:56</div>
            <div class="timeline-body"><blockquote>
<p>if isort or Ruff <em>do</em> format it to:</p>
<pre><code>from a import b
</code></pre>
<p>Black is happy with it</p>
</blockquote>
<p>Great point. I&#x27;d appreciate departing from <code>isort</code> profile <code>black</code> in this respect since <code>split-on-trailing-comma=true</code> is a poor default imo for the same reason @johnthagen mentioned</p>
<blockquote>
<p>it&#x27;d be much less likely for a user to intentionally want to lengthen imports</p>
</blockquote>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:35 UTC
    </footer>
</body>
</html>
