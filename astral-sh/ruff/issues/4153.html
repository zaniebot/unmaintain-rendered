<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change `isort.split-on-trailing-comma` default to false - astral-sh/ruff #4153</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Change `isort.split-on-trailing-comma` default to false</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/4153">#4153</a>
        opened by <a href="https://github.com/janosh">@janosh</a>
        on 2023-04-29 21:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/janosh">@janosh</a> on 2023-04-29 21:36</div>
            <div class="timeline-body"><p><a href="https://beta.ruff.rs/docs/settings/#split-on-trailing-comma">Currently defaults to true</a>, causing this to stay as is</p>
<pre><code class="language-py">from a import (
    b,
)
</code></pre>
<p>I think a better default would be to fold:</p>
<pre><code class="language-py">from a import b
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-29 23:00</div>
            <div class="timeline-body"><p>I think the current default is &quot;correct&quot; because it's consistent with Black's behavior and isort's <code>profile = &quot;black&quot;</code>, unless I'm misunderstanding. Black respects these &quot;magic trailing commas&quot; (which has the downside you've outlined above: if you have a trailing comma, Black will never remove it) and so removing them would break Black compatibility by default.</p>
<p>So, I'd rather err on the side of leaving this default as-is. Users are, of course, welcome to change the setting in their own projects :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2023-04-29 23:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/janosh">@janosh</a> on 2023-04-29 23:04</div>
            <div class="timeline-body"><p>Good point. Didn't consider <code>black</code>. I wish they'd change this default but seems very unlikely.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @janosh on 2023-04-29 23:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/intgr">@intgr</a> on 2023-05-20 19:46</div>
            <div class="timeline-body"><p>I also found this behavior surprising. I think <code>blacks</code>'s behavior is not relevant here, black is fine with either formatting. We should follow <code>isort</code>'s behavior instead.</p>
<p><code>split-on-trailing-comma = false</code> matches <code>isort</code>'s default behavior (with or without <code>profile = &quot;black&quot;</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/intgr">@intgr</a> on 2023-05-20 19:50</div>
            <div class="timeline-body"><blockquote>
<p>it's consistent with Black's behavior and isort's profile = &quot;black&quot;, unless I'm misunderstanding</p>
</blockquote>
<p>I think you're misunderstanding isort's behavior :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../typeddjango/django-stubs/pulls/1507.html">typeddjango/django-stubs#1507</a> on 2023-05-20 19:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-20 20:07</div>
            <div class="timeline-body"><p>Is this not a bug in isort? The documentation says that <code>split-on-trailing-comma</code> defaults to <code>true</code> for the Black profile (and collapsing imports like that is definitely inconsistent with Black).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/intgr">@intgr</a> on 2023-05-20 22:13</div>
            <div class="timeline-body"><p>If that's the case, it sounds like a bug indeed.</p>
<p>Where does it say that? https://pycqa.github.io/isort/docs/configuration/options.html#split-on-trailing-comma only says the behavior mimics black when enabled, not that it's set to true with black profile.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-20 22:15</div>
            <div class="timeline-body"><p>In the <a href="https://pycqa.github.io/isort/docs/configuration/profiles.html">Profiles</a> documentation:</p>
<img width="1792" alt="Screen Shot 2023-05-20 at 6 15 10 PM" src="https://github.com/charliermarsh/ruff/assets/1309177/de6ed6c4-3c26-4a6b-8e16-876c363cc909">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-20 22:16</div>
            <div class="timeline-body"><p>(I agree with you that I'm not seeing this behavior in practice, so not certain what's wrong: the documentation or the implementation.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/intgr">@intgr</a> on 2023-05-20 22:18</div>
            <div class="timeline-body"><p>Ah OK, I was looking at the &quot;Black Compatibility&quot; and &quot;Options&quot; sections of their docs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../PyCQA/isort/pulls/2137.html">PyCQA/isort#2137</a> on 2023-05-20 23:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4561.html">astral-sh/ruff#4561</a> on 2023-05-21 18:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnthagen">@johnthagen</a> on 2023-05-21 18:40</div>
            <div class="timeline-body"><blockquote>
<p>(and collapsing imports like that is definitely inconsistent with Black).</p>
</blockquote>
<p>One minor note I wanted to bring up, it is inconsistent with how Black <em>would</em> have formatted it, but if isort or Ruff <em>do</em> format it to:</p>
<pre><code class="language-py">from a import b
</code></pre>
<p>Black is happy with it, just like if a user would have compressed it to one line manually. We've been running this way with isort + black for years, but it does seem like this might not have been intentional as mentioned in this thread.</p>
<p>I do find this useful so I'm glad to hear there is an opt-out, since unlike other parts of code, it'd be much less likely for a user to <em>intentionally</em> want to lengthen imports as they might some other code since imports are mostly boilerplate. In my experience it's much more likely that a user has their editor automatically remove an unused import but it leaves the trailing comma for another import from that same module. I've observed that over time in large code bases without <code>isort</code> collapsing these it can lead to a lot of wasted vertical space.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../johnthagen/python-blueprint/pulls/172.html">johnthagen/python-blueprint#172</a> on 2023-05-21 18:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/janosh">@janosh</a> on 2023-05-21 20:56</div>
            <div class="timeline-body"><blockquote>
<p>if isort or Ruff <em>do</em> format it to:</p>
<pre><code class="language-python">from a import b
</code></pre>
<p>Black is happy with it</p>
</blockquote>
<p>Great point. I'd appreciate departing from <code>isort</code> profile <code>black</code> in this respect since <code>split-on-trailing-comma=true</code> is a poor default imo for the same reason @johnthagen mentioned</p>
<blockquote>
<p>it'd be much less likely for a user to intentionally want to lengthen imports</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6288.html">astral-sh/ruff#6288</a> on 2023-08-03 00:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../zulip/zulip/pulls/26410.html">zulip/zulip#26410</a> on 2023-08-03 00:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../odoo/odoo/pulls/205038.html">odoo/odoo#205038</a> on 2025-04-08 14:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:50 UTC
    </footer>
</body>
</html>
