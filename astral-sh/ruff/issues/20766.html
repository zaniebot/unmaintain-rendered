<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rules for Undocumented Public Variable / Constant and Class Member (attribute docstrings) - astral-sh/ruff #20766</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rules for Undocumented Public Variable / Constant and Class Member (attribute docstrings)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/20766">#20766</a>
        opened by <a href="https://github.com/phiresky">@phiresky</a>
        on 2025-10-08 13:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/phiresky">@phiresky</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p><a href="https://peps.python.org/pep-0257/">PEP 257 – Docstring Conventions (attribute docstrings)</a> defines a syntax for variable/member docstrings. The syntax is controversial, but it is supported by tools (e.g. VSCode).</p>
<p>Currently there is no lint to enforce global variables / constants to either be made private (underscore) or be documented.</p>
<p>So I'm imagining two new rules, very similar to the existing pydocstyle rules. The first one I think would be great, the second one is a bit difficult due to the various other ways that exist to document class members.</p>
<h1>1. undocumented-public-module-variable</h1>
<h2>What it does</h2>
<p>Checks for undocumented public module-level variable definitions.</p>
<h2>Why is this bad?</h2>
<p>Public module-level variables should be documented via docstrings to
describe their purpose and expected values.</p>
<p>According to PEP 257, docstrings for module-level variables should be
placed immediately after the variable assignment.</p>
<p>If the codebase adheres to a standard format for module-level variable
docstrings, follow that format for consistency.</p>
<h2>Example</h2>
<pre><code class="language-python">DEFAULT_TIMEOUT: int = 30
MAX_CONNECTIONS: int = 100
</code></pre>
<p>Use instead:</p>
<pre><code class="language-python">DEFAULT_TIMEOUT: int = 30
&quot;&quot;&quot;The default timeout duration in seconds.&quot;&quot;&quot;

MAX_CONNECTIONS: int = 100
&quot;&quot;&quot;The maximum number of concurrent connections allowed.&quot;&quot;&quot;
</code></pre>
<h1>2. undocumented-public-class-attribute</h1>
<h2>What it does</h2>
<p>Checks for undocumented public class attribute definitions.</p>
<h2>Why is this bad?</h2>
<p>Public class attributes should be documented via docstrings to describe
their purpose and expected values.</p>
<p>According to PEP 257, docstrings for class attributes should be placed
immediately after the attribute assignment.</p>
<p>If the codebase adheres to a standard format for attribute docstrings,
follow that format for consistency.</p>
<h2>Example</h2>
<pre><code class="language-python">class Config:
    timeout: int = 30
    max_retries: int = 3
</code></pre>
<p>Use instead:</p>
<pre><code class="language-python">class Config:
    timeout: int = 30
    &quot;&quot;&quot;The timeout duration in seconds.&quot;&quot;&quot;

    max_retries: int = 3
    &quot;&quot;&quot;The maximum number of retry attempts.&quot;&quot;&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-10-08 15:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @ntBre on 2025-10-08 15:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/my1e5">@my1e5</a> on 2025-10-08 15:20</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://peps.python.org/pep-0257/">PEP 257 – Docstring Conventions (attribute docstrings)</a> defines a syntax for variable/member docstrings.</p>
</blockquote>
<p>I believe the relevant PEP here is (the rejected) <a href="https://peps.python.org/pep-0224/">PEP 224 – Attribute Docstrings</a>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phiresky">@phiresky</a> on 2025-10-08 15:25</div>
            <div class="timeline-body"><p>PEP 224 was the first to mention it, but this text is included in PEP 257:</p>
<blockquote>
<p>String literals occurring elsewhere in Python code may also act as documentation. They are not recognized by the Python bytecode compiler and are not accessible as runtime object attributes (i.e. not assigned to <code>__doc__</code>), but two types of extra docstrings may be extracted by software tools:</p>
<ul>
<li><strong>String literals occurring immediately after a simple assignment at the top level of a module, class, or <code>__init__</code> method are called “attribute docstrings”.</strong></li>
<li>String literals occurring immediately after another docstring are called “additional docstrings”.</li>
</ul>
</blockquote>
<p>ruff already (partially) models this:</p>
<p>https://github.com/astral-sh/ruff/blob/3771f1567c778776777679674b8cffdc90aa51aa/crates/ruff_python_semantic/src/model.rs#L2519-L2542</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Rules for Undocumented Public Variable / Constant and Class Member (attribute" to "Rules for Undocumented Public Variable / Constant and Class Member (attribute docstrings)" by @phiresky on 2025-10-08 17:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phiresky">@phiresky</a> on 2025-10-08 17:47</div>
            <div class="timeline-body"><p>Added an implementation here: https://github.com/astral-sh/ruff/pull/20772</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:26 UTC
    </footer>
</body>
</html>
