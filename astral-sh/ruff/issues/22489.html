<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extend if-with-same-arms (SIM114) or new rule for seperate if statements that return - astral-sh/ruff #22489</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Extend if-with-same-arms (SIM114) or new rule for seperate if statements that return</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/22489">#22489</a>
        opened by <a href="https://github.com/GideonBear">@GideonBear</a>
        on 2026-01-10 09:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/GideonBear">@GideonBear</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Ref #8125, originally raised as https://github.com/astral-sh/ruff/issues/8125#issuecomment-3707046945</p>
<p><a href="https://docs.astral.sh/ruff/rules/if-with-same-arms/#if-with-same-arms-sim114">if-with-same-arms (SIM114)</a></p>
<p>Take the following example: <a href="https://play.ruff.rs/a1efcc7f-af3e-4d6b-a923-c958ea86bf1a">playground</a></p>
<p><a href="https://docs.astral.sh/ruff/rules/superfluous-else-return/#superfluous-else-return-ret505">superfluous-else-return (RET505)</a> indicates that writing this in the <code>if-if</code> style is preferred to writing it in the <code>if-elif</code> style. The functions have exactly the same behavior, and in both, SIM114 is valid. But by writing it in the preferred style following RET505, SIM114 doesn't trigger anymore. This means that people that write in the RET505 style by themselves, or fix RET505 before SIM114, don't get the benefit of SIM114.</p>
<p>I propose making SIM114 check, similarly to what RET505 checks in the first block, if the blocks return in all paths. If that is the case, pretend like it is <code>if-elif</code>, because the runtime behavior is identical.</p>
<p>This will make the rule more complex, as it will need to run on pairs/sets of if statements. This can be a new RUF rule as well, if you don't want to overload SIM114.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:45 UTC
    </footer>
</body>
</html>
