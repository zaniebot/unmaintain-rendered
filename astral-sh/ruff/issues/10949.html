<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suggested lint rule: disallow implicit-cast-to-bool - astral-sh/ruff #10949</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Suggested lint rule: disallow implicit-cast-to-bool</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10949">#10949</a>
        opened by <a href="https://github.com/patrick-kidger">@patrick-kidger</a>
        on 2024-04-15 07:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/patrick-kidger">@patrick-kidger</a> on 2024-04-15 07:55</div>
            <div class="timeline-body"><p>I'm thinking of writing a new lint rule for Ruff, to disallow implicit-cast-to-bool.</p>
<p>That is, to disallow statements like <code>foo = None; if foo:</code>. Our team finds that these are a common source of bugs. For example if <code>foo: Optional[int]</code> then was the intention for <code>if foo:</code> to not trigger on just <code>foo = None</code>, or did the author want it to not trigger on <code>foo = 0</code> as well?</p>
<p>As per the contributing guidelines I'm opening an issue to see if this is a rule that is in-scope for Ruff?
In terms of technical feasibility of implementing this -- to what extent do the ruff internals track the types of each variable?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-04-15 08:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-04-15 08:10</div>
            <div class="timeline-body"><p>Hy. I haven't checked if Ruff already has a similar rule and I'm not familiar enough with Python to know if that's a rule that Ruff should support (@AlexWaygood knows more) but I think this isn't a rule that we can add until #1774 is done because it's not a rule that we want to enable by default and many users are using <code>--select  ALL</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kkom">@kkom</a> on 2024-04-16 14:10</div>
            <div class="timeline-body"><p>Big ➕1️⃣  to a rule like this! FWIW, I created a discussion about it here: https://github.com/astral-sh/ruff/discussions/8757#discussion-5865172</p>
<details>

<summary>Alternative option: Typechecker</summary>

<p>As a sidenote, if you want to, you could also support this discussion where I pitched this rule in Pyright: https://github.com/microsoft/pyright/discussions/6488#discussion-5865204</p>
<p>I think implementing this in the typechecker would be much more reliable.</p>
<p>Pyright is known to implement opinionated rules like this (e.g. unnecessary comparison), but the maintainer is currently not convinced about this one:</p>
<blockquote>
<p>I'm not convinced that it represents a sufficiently common source of bugs to merit adding such a rule, but I could perhaps be persuaded with some additional evidence.</p>
</blockquote>
</details>

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Garrett-R">@Garrett-R</a> on 2025-01-05 05:08</div>
            <div class="timeline-body"><p>+1 for this rule.  Typescript-ESLint provides an <a href="https://typescript-eslint.io/rules/strict-boolean-expressions/">similar rule</a> (discussion <a href="https://github.com/typescript-eslint/typescript-eslint/issues/49">here</a>) which has been quite helpful (TypeScript also has falsey values for primitives).   It doesn't ban <em>all</em> implicit casts to bool, but does ban it for primitives like string, number, etc.</p>
<p>And my Stack Overflow <a href="https://stackoverflow.com/questions/68200814/prevent-implicit-casts">request</a> for this (in case someone remembers to update there if this rule gets implemented).</p>
<blockquote>
<p>because it's not a rule that we want to enable by default and many users are using <code>--select  ALL</code></p>
</blockquote>
<p>Can't it be disabled by default, but enabled if you choose to do <code>--select ALL</code>?  I feel like if you go the <code>--select ALL</code> route, you're committing to getting <em>everything</em> and using a blocklist.  So, it's just expected when I update Ruff at my startup (we use this) that I'll need to need to review new rules and possibly add some to the blocklist.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:33:31 UTC
    </footer>
</body>
</html>
