<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUF065 should ignore `str` when not used for conversion - astral-sh/ruff #21315</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>RUF065 should ignore `str` when not used for conversion</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/21315">#21315</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-11-07 14:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dscorbett">@dscorbett</a> on 2025-11-07 14:02</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><a href="https://docs.astral.sh/ruff/rules/logging-eager-conversion/"><code>logging-eager-conversion</code> (RUF065)</a> should only treat <code>str</code> as an unnecessary conversion when it has exactly one argument and that argument isn’t starred. Otherwise, the <code>str</code> call is doing something else and can’t be so straightforwardly removed. <a href="https://play.ruff.rs/d4bd231e-6994-449a-9639-b344f7a2ed78">Example</a>:</p>
<pre><code class="language-console">$ cat &gt;ruf065.py &lt;&lt;'# EOF'
import logging
logging.warning(&quot;%s&quot;, str())
logging.warning(&quot;%s&quot;, str(b&quot;\xe2\x9a\xa0&quot;, &quot;utf-8&quot;))
logging.warning(&quot;%s&quot;, str(*(b&quot;\xf0\x9f\x9a\xa7&quot;, &quot;utf-8&quot;)))
logging.warning(&quot;%s&quot;, str(**{&quot;object&quot;: b&quot;\xf0\x9f\x9a\xa8&quot;, &quot;encoding&quot;: &quot;utf-8&quot;}))
# EOF

$ ruff --isolated check ruf065.py --select RUF065 --preview --output-format concise -q
ruf065.py:2:23: RUF065 Unnecessary `str()` conversion when formatting with `%s`
ruf065.py:3:23: RUF065 Unnecessary `str()` conversion when formatting with `%s`
ruf065.py:4:23: RUF065 Unnecessary `str()` conversion when formatting with `%s`
ruf065.py:5:23: RUF065 Unnecessary `str()` conversion when formatting with `%s`
</code></pre>
<h3>Version</h3>
<p>ruff 0.14.4 (c7ff9826d 2025-11-06)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-11-07 18:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-11-07 18:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @ntBre on 2025-11-07 18:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/21330.html">astral-sh/ruff#21330</a> on 2025-11-07 23:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-11-10 23:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:17 UTC
    </footer>
</body>
</html>
