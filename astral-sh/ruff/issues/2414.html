<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement `flake8-functions` - astral-sh/ruff #2414</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Implement `flake8-functions`</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/2414">#2414</a>
        opened by <a href="https://github.com/ngnpope">@ngnpope</a>
        on 2023-01-31 20:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ngnpope">@ngnpope</a> on 2023-01-31 20:59</div>
            <div class="timeline-body"><p><a href="https://github.com/best-doctor/flake8-functions">GitHub</a>, <a href="https://pypi.org/project/flake8-functions/">PyPI</a>.</p>
<ul>
<li>[ ] <a href="https://github.com/best-doctor/flake8-functions/blob/master/flake8_functions/function_length.py"><code>CFQ001</code></a>: Function ... has length {function_length} that exceeds max allowed length {max_function_length}<ul>
<li>This is an alternative to complexity checkers and is just purely the number of lines in the function</li>
<li>Unlike <code>too-many-statements</code> (<code>PLR0915</code>) from <code>pylint</code>, this counts the literal number of lines that the function takes up on the page, rather than the number of statements in the function.</li>
</ul>
</li>
<li>[x] <a href="https://github.com/best-doctor/flake8-functions/blob/master/flake8_functions/function_arguments_amount.py"><code>CFQ002</code></a>: Function ... has {arguments_amount} arguments that exceeds max allowed {max_parameters_amount}<ul>
<li>Already implemented as <code>too-many-arguments</code> (<code>PLR0913</code>) from <a href="https://github.com/charliermarsh/ruff/issues/970/"><code>pylint</code></a></li>
</ul>
</li>
<li>[ ] <a href="https://github.com/best-doctor/flake8-functions/blob/master/flake8_functions/function_purity.py"><code>CFQ003</code></a>: Function ... is not pure<ul>
<li>Uses <a href="https://pypi.org/project/mr-proper/"><code>mr-proper</code></a> under the hood to check that a function is &quot;pure&quot;</li>
<li><em>That library says it's very experimental and it looks a bit too magic, so can probably skip this rule.</em></li>
</ul>
</li>
<li>[x] <a href="https://github.com/best-doctor/flake8-functions/blob/master/flake8_functions/function_returns_amount.py"><code>CFQ004</code></a>: Function ... has {returns_amount} returns that exceeds max allowed {max_returns_amount}<ul>
<li>Already implemented as <code>too-many-return-statements</code> (<code>PLR0911</code>) from <a href="https://github.com/charliermarsh/ruff/issues/970/"><code>pylint</code></a></li>
</ul>
</li>
</ul>
<p>Configuration options:</p>
<ul>
<li>[ ] <code>max-function-length</code> implemented as <code>pylint:max-statements</code></li>
<li>[x] <code>max-parameters-amount</code> implemented as <code>pylint:max-args</code></li>
<li>[x] <code>max-returns-amount</code> to be implemented as <code>pylint:max-returns</code></li>
</ul>
<p>Other than <code>CFQ003</code> which is dubious, these will all be covered by <code>pylint</code> rules...
So this can be closed if desired, but this will be useful to refer to when aliases are implemented.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-01-31 22:44</div>
            <div class="timeline-body"><p>CFQ003 would be truly awesome to have</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ngnpope">@ngnpope</a> on 2023-01-31 23:24</div>
            <div class="timeline-body"><p>Sounds like &quot;challenge accepted&quot;? ðŸ˜‚</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-01-31 23:34</div>
            <div class="timeline-body"><p>The features of Mr. Proper should be useable attributes to discover violations:</p>
<blockquote>
<ul>
<li>that function has no blacklisted calls (like print) and blacklisted attributes access (like smth.count);</li>
<li>that function not uses global objects (only local vars and function arguments);</li>
<li>that function has al least one return;</li>
<li>that function not mutates it's arguments;</li>
<li>that function has no local imports;</li>
<li>that function has no arguments of forbidden types (like ORM objects);</li>
<li>that function not uses self, class or super;</li>
<li>that function has calls of only pure functions.</li>
</ul>
</blockquote>
<p>Mostly this requires no type checking!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">plugin</span> added by @charliermarsh on 2023-02-01 15:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chanman3388">@chanman3388</a> on 2023-02-03 19:14</div>
            <div class="timeline-body"><p>You mind if I implement <code>too-many-return-statements</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ngnpope">@ngnpope</a> on 2023-02-03 19:42</div>
            <div class="timeline-body"><p>Go ahead! ðŸ™‚</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2564.html">astral-sh/ruff#2564</a> on 2023-02-04 11:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mirecl">@mirecl</a> on 2023-05-15 07:13</div>
            <div class="timeline-body"><p>Why <a href="https://github.com/best-doctor/flake8-functions/blob/master/flake8_functions/function_length.py">CFQ001</a> and <a href="https://github.com/best-doctor/flake8-functions/blob/master/flake8_functions/function_returns_amount.py">CFQ004</a> is done?
PLR0915/PLR0911 is not equal rule for CFQ001/CFQ004!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-04-09 10:24</div>
            <div class="timeline-body"><blockquote>
<p>Why <a href="https://github.com/best-doctor/flake8-functions/blob/master/flake8_functions/function_length.py?rgh-link-date=2023-05-15T07%3A13%3A05Z">CFQ001</a> and <a href="https://github.com/best-doctor/flake8-functions/blob/master/flake8_functions/function_returns_amount.py?rgh-link-date=2023-05-15T07%3A13%3A05Z">CFQ004</a> is done? PLR0915/PLR0911 is not equal rule for CFQ001/CFQ004!</p>
</blockquote>
<p>I've unticked <code>CFQ001</code> -- you're right, that does seem distinct from <code>PLR0915</code> to me. <code>CFQ004</code> <em>does</em> look basically the same as <code>PLR0911</code> to me, though -- would you mind explaining to me how they are different, @mirecl?</p>
<p>(N.B. Just because I've &quot;unticked&quot; the rule doesn't <em>necessarily</em> mean that we'll accept a PR. <code>CFQ001</code> is a very opinionated rule, so we probably <em>wouldn't</em> accept this rule until https://github.com/astral-sh/ruff/issues/1774 is completed and we have a better way of marking rules as disabled by default.)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:08 UTC
    </footer>
</body>
</html>
