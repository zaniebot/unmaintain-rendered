<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruff does not complain about missing tzinfo when using `datetime.datetime.combine` - astral-sh/ruff #19070</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Ruff does not complain about missing tzinfo when using `datetime.datetime.combine`</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/19070">#19070</a>
        opened by <a href="https://github.com/RuurdBijlsma">@RuurdBijlsma</a>
        on 2025-07-01 13:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/RuurdBijlsma">@RuurdBijlsma</a> on 2025-07-01 13:57</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Example when leaving out tzinfo when constructing a datetime normally:</p>
<pre><code class="language-python">1 file reformatted, 87 files left unchanged
src/dynamic_dimensioning_logic/logic.py:78:13: DTZ001 `datetime.datetime()` called without a `tzinfo` argument
   |
76 |         self.hello_world.write(output_df=output_df)
77 |         logger.info(&quot;posted-hello_world&quot;)
78 |         x = datetime.datetime(year=2025, month=6, day=1, hour=0, minute=0, second=0)
   |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ DTZ001
79 |         logger.info(&quot;x&quot;, x=x)
   |
   = help: Pass a `datetime.timezone` object to the `tzinfo` parameter

Found 1 error.
</code></pre>
<p>Now, when I construct a datetime with datetime.datetime.combine (note I don't pass a tzinfo):</p>
<pre><code class="language-python">y = datetime.datetime.combine(
    datetime.date(year=2025, month=6, day=1),
    datetime.time(hour=0, minute=0, second=0)
)
</code></pre>
<p>I get no ruff error, even though combine does take a tzinfo argument. This cause a bug for me so I'd love a ruff error here.</p>
<p>I have <code>select =['ALL']</code> in my ruff.toml, so it's not disabled.</p>
<h3>Version</h3>
<p>0.12.1</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-07-01 14:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @ntBre on 2025-07-01 14:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-01 14:10</div>
            <div class="timeline-body"><p>Thanks, this sounds like a reasonable rule to me. I don't see a corresponding rule in <a href="https://pypi.org/project/flake8-datetimez/">flake8-datetimez</a>, so we would need to decide where to put this functionality. A few options are a new rule in the DTZ namespace, if we think the upstream linter is unlikely to add more rules, a new RUF rule, or as an extension to one of the existing rules.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
