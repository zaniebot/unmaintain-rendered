<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UP034 misses unnecessary parenthesis - astral-sh/ruff #8807</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UP034 misses unnecessary parenthesis</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/8807">#8807</a>
        opened by <a href="https://github.com/chbndrhnns">@chbndrhnns</a>
        on 2023-11-21 15:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/chbndrhnns">@chbndrhnns</a> on 2023-11-21 15:08</div>
            <div class="timeline-body"><pre><code class="language-py">class C:
    def __init__(self, arg):
        ...

    @classmethod
    def from_env(cls):
        return cls(arg=(&quot;str&quot;))
</code></pre>
<p>Run <code>ruff check --fix test.py</code> with such config:</p>
<pre><code>[tool.ruff]
select = [&quot;UP&quot;]
</code></pre>
<p>I expect ruff to remove the parenthesis around &quot;str&quot;:</p>
<pre><code class="language-py">class C:
    def __init__(self, arg):
        ...

    @classmethod
    def from_env(cls):
        return cls(arg=(&quot;str&quot;))

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-21 16:20</div>
            <div class="timeline-body"><p>I don't think this is in scope for the upgrade rule as these parentheses were never necessary. Perhaps I misunderstand the intent of the rule though cc @charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chbndrhnns">@chbndrhnns</a> on 2023-11-21 16:25</div>
            <div class="timeline-body"><p>They were never necessary and PyCharm sometimes adds them as part of an inline refactoring. Thatâ€™s what made me start looking for an existing rule in ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ezrashaw">@Ezrashaw</a> on 2023-11-21 21:02</div>
            <div class="timeline-body"><p>I'm not sure that any lint rule is relevant here. However, the ruff formatter doesn't remove those parentheses, whereas it does for:</p>
<pre><code class="language-python">def fun():
	return (1 + 1)
</code></pre>
<p>~~It seems that the formatter doesn't format function call arguments correctly.
I'd like to have a go at this if that's ok.~~
Black also exhibits this behaviour.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-21 21:15</div>
            <div class="timeline-body"><p>We could consider a separate rule for removing superfluous parentheses.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-21 21:51</div>
            <div class="timeline-body"><p>I think that the last time this came up, we said we'd treat it as a request to implement Pylint's C0325: https://github.com/astral-sh/ruff/issues/2389. So let's do the same here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-11-21 21:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:52 UTC
    </footer>
</body>
</html>
