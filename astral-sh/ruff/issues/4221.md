```yaml
number: 4221
title: Missing newline before import makes SIM105 produce invalid autofix
type: issue
state: closed
author: konstin
labels:
  - bug
assignees: []
created_at: 2023-05-04T10:41:37Z
updated_at: 2023-05-04T11:54:45Z
url: https://github.com/astral-sh/ruff/issues/4221
synced_at: 2026-01-10T01:56:47Z
```

# Missing newline before import makes SIM105 produce invalid autofix

---

_Issue opened by @konstin on 2023-05-04 10:41_

Command: `ruff --no-cache --select SIM105 --fix file.py`, ruff version 59d40f9f81056a8433db4de490857a6a23f93d2c

Input:

```python
import json


def foo():
    try:
        json.loads("data.json")
    except json.decoder.JSONDecodeError:
        pass
```

This produces:

```python
import jsonimport contextlib



def foo():
    with contextlib.suppress(json.decoder.JSONDecodeError):
        json.loads("data.json")
```

I originally found this when testing bokeh in [this file](https://github.com/bokeh/bokeh/blob/fcb4ae4836b9422e40ae511a77ac2e339ed789e0/docs/bokeh/docserver.py)

---

_Label `bug` added by @konstin on 2023-05-04 10:41_

---

_Referenced in [astral-sh/ruff#4220](../../astral-sh/ruff/pulls/4220.md) on 2023-05-04 10:48_

---

_Comment by @dhruvmanila on 2023-05-04 11:51_

Duplicate of #4203

---

_Comment by @konstin on 2023-05-04 11:54_

thanks

---

_Closed by @konstin on 2023-05-04 11:54_

---
