<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ungrouping `import` ... `as` ... - astral-sh/ruff #15652</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ungrouping <code>import</code> ... <code>as</code> ...</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/15652">#15652</a>
        opened by <a href="https://github.com/CmpCtrl">@CmpCtrl</a>
        on 2025-01-21 16:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/CmpCtrl">@CmpCtrl</a></div>
            <div class="timeline-body"><p>Ruff recently started ungrouping imports from a module when using <code>import</code> ... <code>as</code> ..., Am i doing something wrong?</p>
<p>I&#x27;m using Ruff v2025.2.0 in vscode.</p>
<p>Silly example:</p>
<pre><code>from numpy import ( # noqa: F401
    array as np_array,
    ndarray as np_ndarray,
    float64 as np_float64,
    int32 as np_int32,
    int64,
    uint32,
    uint64,
)
</code></pre>
<p>formats to:</p>
<pre><code>from numpy import (  # noqa: F401
    array as np_array,
)
from numpy import (
    float64 as np_float64,
)
from numpy import (
    int32 as np_int32,
)
from numpy import (
    int64,
    uint32,
    uint64,
)
from numpy import (
    ndarray as np_ndarray,
)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-21 17:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-21 17:17</div>
            <div class="timeline-body"><p>hi</p>
<p>I don&#x27;t think anything changed recently in isort that changed the behavior but have you tried setting <a href="https://docs.astral.sh/ruff/settings/#lint_isort_combine-as-imports"><code>combine-as-imports</code></a> to <code>true</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-22 05:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CmpCtrl">@CmpCtrl</a> on 2025-01-22 14:52</div>
            <div class="timeline-body"><p>That setting didn&#x27;t seem to have any influence. I&#x27;m confused how this works, i had assumed that formatting imports happened with format (either right-click format or format on save) but that doesn&#x27;t seem to be the case?</p>
<p>So i was using a vscode setting of:</p>
<pre><code>     &quot;[python]&quot;: {
        &quot;editor.formatOnSave&quot;: true,
        &quot;editor.defaultFormatter&quot;: &quot;charliermarsh.ruff&quot;,
        &quot;editor.codeActionsOnSave&quot;: {
            &quot;source.organizeImports&quot;: &quot;explicit&quot;
        },
    },
</code></pre>
<p>If i do <code>shift-alt-o</code> to organize inputs, ruff separates the <code>import as</code> but i also tried isort and that works as expected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-22 14:55</div>
            <div class="timeline-body"><p>Yes, <code>format</code> doesn&#x27;t organize your imports. You have to use the explicit organize imports command.</p>
<blockquote>
<p>That setting didn&#x27;t seem to have any influence. I</p>
</blockquote>
<p>Interesting, setting <code>combine-as-imports</code> to <code>true</code> does keep the imports together when I tried, see</p>
<p>https://play.ruff.rs/f5e639be-75b4-4346-9678-fbc010068b30</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-23 09:22</div>
            <div class="timeline-body"><p>Do you see this only in an editor context or is the behavior same from the command-line? If it&#x27;s different, can you try using <code>source.organizeImports.ruff</code> instead? The one that you&#x27;ve is a broader code action which means if there are any other extensions that supports organizing imports in a Python file, they will be invoked as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CmpCtrl">@CmpCtrl</a> on 2025-01-23 14:58</div>
            <div class="timeline-body"><p>How do i run ruff from the command line in VScode correctly? I have the ruff extension installed.
If i run <code>ruff check --fix ruff_issue.py</code> i get the <code>ruff : The term &#x27;ruff&#x27; is not recognized as the name of a cmdlet, function, script file, or operable program.</code>.</p>
<p>if i run the full path (which i found from the ruff output terminal) i get <code>All checks passed!</code> and it doesn&#x27;t change anything (i think it should sort the order).
<code>c:\Users\xxx\.vscode\extensions\charliermarsh.ruff-2025.2.0-win32-x64\bundled\libs\bin\ruff.exe check --fix ruff_issue.py</code></p>
<p>Switching the vscode setting to the following makes no change, it then ungroups the import as.</p>
<pre><code>    &quot;[python]&quot;: {
        &quot;editor.formatOnSave&quot;: true,
        &quot;editor.defaultFormatter&quot;: &quot;charliermarsh.ruff&quot;,
        &quot;editor.codeActionsOnSave&quot;: {
            &quot;source.organizeImports.ruff&quot;: &quot;explicit&quot;
        },
    },
</code></pre>
<p>Clearly i am doing something wrong, and haven&#x27;t had time to learn how to use this correctly, so please dont be shy about pointing out whatever basic obvious thing i&#x27;m missing. Thanks for the help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-25 11:09</div>
            <div class="timeline-body"><blockquote>
<p>Clearly i am doing something wrong, and haven&#x27;t had time to learn how to use this correctly, so please dont be shy about pointing out whatever basic obvious thing i&#x27;m missing. Thanks for the help.</p>
</blockquote>
<p>I don&#x27;t think there isn&#x27;t anything obvious. At least there&#x27;s nothing obvious to me.</p>
<p>Do you have other extensions installed? Maybe isort? Could you try disabling those extensions to see if the issue still reproduces?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-29 09:36</div>
            <div class="timeline-body"><p>@CmpCtrl Is the issue that Ruff organizes the imports from first code snippet to the second code snippet as seen in the issue description? If so, then that&#x27;s the default formatting. If you&#x27;d like to keep them combined, then <a href="https://docs.astral.sh/ruff/settings/#lint_isort_combine-as-imports"><code>combine-as-imports</code></a> setting can be used as mentioned in <a href="https://github.com/astral-sh/ruff/issues/15652">astral-sh/ruff#15652</a>#issuecomment-2607465479 (refer to the playground link).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CmpCtrl">@CmpCtrl</a> on 2025-01-29 12:41</div>
            <div class="timeline-body"><p>Thanks yea, so i made a new <code>pyproject.toml</code> with that setting this morning and it now works. I was confused since i had tried that when it was suggested before and it made no change to the behavior. I must have had a typo somewhere. I&#x27;m also confused about why the behavior seemed to change recently, i must have had the isort extension active in the past. Thanks for the tips.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/CmpCtrl">@CmpCtrl</a> on 2025-01-29 12:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:20 UTC
    </footer>
</body>
</html>
