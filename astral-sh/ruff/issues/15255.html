<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUF025 is remapped to C420 but now it's also a new rule - astral-sh/ruff #15255</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>RUF025 is remapped to C420 but now it's also a new rule</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/15255">#15255</a>
        opened by <a href="https://github.com/oprypin">@oprypin</a>
        on 2025-01-04 12:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/oprypin">@oprypin</a> on 2025-01-04 12:52</div>
            <div class="timeline-body"><p>• https://github.com/astral-sh/ruff/pull/12533 remapped the rule <code>RUF025</code>  as <code>C420</code>.</p>
<p>• https://github.com/astral-sh/ruff/pull/15104 added a different new rule under the code <code>RUF025</code>.</p>
<p>The immediate issue is that even though RUF025 has just appeared <a href="https://docs.astral.sh/ruff/rules/unnecessary-empty-iterable-within-deque-call/">in documentation</a>, if you enable it, the rule doesn't actually work, and you just get the following warning:</p>
<pre><code>warning: `RUF025` has been remapped to `C420`.
</code></pre>
<p>So I suppose (luckily?) the new rule was not <em>actually</em> added yet because it's impossible to use it, it only appears in docs and in the codebase.</p>
<p>Rule codes that were remapped from are supposed to remain reserved forever, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-04 13:14</div>
            <div class="timeline-body"><blockquote>
<p>Rule codes that were remapped from are supposed to remain reserved forever, right?</p>
</blockquote>
<p>Argh, thanks. This is such a foot gun, especially with the many holes in the Ruff code section. I assumed that the redirects are at least visible in the <code>codes</code> section because it's the case for deprecated rules. I'll look into this on Monday, but we should have a static check that asserts that <code>codes</code> and redirects don't overlap.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @MichaReiser by @MichaReiser on 2025-01-04 13:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MichaReiser on 2025-01-04 13:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-01-04 14:12</div>
            <div class="timeline-body"><p>Current <code>RUF</code> &quot;holes&quot;:</p>
<ul>
<li><a href="https://github.com/astral-sh/ruff/issues?q=sort%3Aupdated-desc%20RUF004"><code>RUF004</code></a>: Redirects to <code>B026</code> (#3290, #3293)</li>
<li><a href="https://github.com/astral-sh/ruff/issues?q=sort%3Aupdated-desc%20RUF014"><code>RUF014</code></a>: Would be a duplicate of <code>PLW0101</code> (#5384, #10891)</li>
<li><a href="https://github.com/astral-sh/ruff/issues?q=sort%3Aupdated-desc%20RUF037"><code>RUF037</code></a>: One rejected (#14111)</li>
<li><a href="https://github.com/astral-sh/ruff/issues?q=sort%3Aupdated-desc%20RUF042"><code>RUF042</code></a>: One rejected (#14564) and one pending (#14831)</li>
<li><a href="https://github.com/astral-sh/ruff/issues?q=sort%3Aupdated-desc%20RUF044"><code>RUF044</code></a>: One pending (#14688)</li>
<li><a href="https://github.com/astral-sh/ruff/issues?q=sort%3Aupdated-desc%20RUF045"><code>RUF045</code></a>: One pending (#14349)</li>
<li><a href="https://github.com/astral-sh/ruff/issues?q=sort%3Aupdated-desc%20RUF047"><code>RUF047</code></a>: One rejected (#14746) and one pending (#15051)</li>
<li><a href="https://github.com/astral-sh/ruff/issues?q=sort%3Aupdated-desc%20RUF049"><code>RUF049</code></a>: Empty</li>
<li><a href="https://github.com/astral-sh/ruff/issues?q=sort%3Aupdated-desc%20RUF050"><code>RUF050</code></a>: Two rejected (#14607, #14763)</li>
<li><a href="https://github.com/astral-sh/ruff/issues?q=sort%3Aupdated-desc%20RUF053"><code>RUF053</code></a>: Empty</li>
<li><a href="https://github.com/astral-sh/ruff/issues?q=sort%3Aupdated-desc%20RUF054"><code>RUF054</code></a>: Empty</li>
</ul>
<p>It should perhaps be emphasized that I opened most of the aforementioned PRs...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-05 08:49</div>
            <div class="timeline-body"><blockquote>
<p>So I suppose (luckily?) the new rule was not actually added yet because it's impossible to use it, it only appears in docs and in the codebase.</p>
</blockquote>
<p>I think it was possible to use the rule using the <code>ALL</code> selector but yes, most users weren't able to use it.</p>
<p>Thank you @InSyncWithFoo for volunteering to fix this issue so quickly! I also want to make clear that this was entirely my fault and by no means yours, just because we skipped a few rule codes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-01-05 08:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:36:11 UTC
    </footer>
</body>
</html>
