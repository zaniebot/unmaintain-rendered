<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exclude subfolders not working when using ruff format - astral-sh/ruff #16146</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Exclude subfolders not working when using ruff format</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/16146">#16146</a>
        opened by <a href="https://github.com/akshaybabloo">@akshaybabloo</a>
        on 2025-02-13 23:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/akshaybabloo">@akshaybabloo</a></div>
            <div class="timeline-body"><h3>Description</h3>
<p>I am trying to exclude a subfolder when I use <code>ruff format</code>. Here is my configuration:</p>
<pre><code class="language-toml"># ruff.toml

line-length = 88
target-version = &quot;py310&quot;

[lint]
select = [
    &quot;A&quot;,    # Builtins
    &quot;B&quot;,    # Bugbear
    &quot;D&quot;,    # pyDocStyle
    &quot;E&quot;,    # pyCodeStyle
    &quot;F&quot;,    # Pyflakes
    &quot;G&quot;,    # Logging format
    &quot;N&quot;,    # Naming
    &quot;S&quot;,    # Bandit (security)
    &quot;BLE&quot;,  # Blind Except
    &quot;CPY&quot;,  # Copyright
    &quot;DTZ&quot;,  # Date Time
    &quot;ICN&quot;,  # Imports
    &quot;TID&quot;,  # Tidy imports
    &quot;LOG&quot;,  # Logging
    &quot;PIE&quot;,  # Unnecessary things
    &quot;PT&quot;,   # PyTest Style
    &quot;Q&quot;,    # Quotes
    &quot;ARG&quot;,  # Arguments
    &quot;PTH&quot;,  # Pathlib vs OS
    &quot;DOC&quot;,  # pyDocLint
]

ignore = [
    &quot;E203&quot;,   # whitespace-before-punctuation
    &quot;E501&quot;,   # line too long
    &quot;S101&quot;,   # assert detected
    &quot;D407&quot;,   # Missing dashed underline after section
    &quot;D203&quot;,   # One blank line before class doc
    &quot;D212&quot;,   # Multi line docstring - 1st line
    &quot;D213&quot;,   # Multi line docstring - 2nd line
    &quot;D413&quot;,   # Missing blank line after last section
    &quot;PTH123&quot;, # `open()` should be replaced by `Path.open()`
    &quot;G004&quot;,   # Logging uses f-string
    &quot;D401&quot;,   # First line should be in imperative mood
    &quot;D200&quot;,   # One-line docstring should fit on one line with quotes

    # TODO: Following rules needs to be fixed
    &quot;D101&quot;,   # Missing docstring in public class
    &quot;D102&quot;,   # Missing docstring in public method
    &quot;D104&quot;,   # Missing docstring in public package
    &quot;D107&quot;,   # Missing docstring in __init__
    &quot;D103&quot;,   # Missing docstring in public function
    &quot;D100&quot;,   # Missing docstring in public module
    &quot;D205&quot;,   # 1 blank line required between summary line and description
    &quot;D202&quot;,
    &quot;B011&quot;,   # Do not use `assert` to raise exceptions
    &quot;PT015&quot;,  # Use `assert` instead of `raise` in tests
    &quot;PIE790&quot;, # Unnecessary `pass` statement
    &quot;D415&quot;,   # First line should end with a period, question mark, or exclamation point
    &quot;D400&quot;,   # First line should end with a period, question mark, or exclamation point
    &quot;PTH118&quot;, # `os.path` should be replaced by `Path`
    &quot;A002&quot;,   # Function argument `set` is shadowing a Python builtin
    &quot;A001&quot;,
    &quot;B007&quot;,   # Loop control
    &quot;PTH110&quot;, # `os.path` should be replaced by `Path`
    &quot;PTH103&quot;, # `os.path` should be replaced by `Path`
    &quot;ARG001&quot;, # Unused argument
]

exclude = [&quot;images/*&quot;, &quot;pipelines/*&quot;, &quot;tools/*&quot;, &quot;*.pyi&quot;, &quot;test_legacy/*&quot;, &quot;deprecated_logged_data_official_names/*.py&quot;]
fixable = [&quot;ALL&quot;]

# Allow unused variables when underscore-prefixed.
dummy-variable-rgx = &quot;^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$&quot;

[format]
skip-magic-trailing-comma = false  # Like Black, respect magic trailing commas.
line-ending = &quot;auto&quot;               # Like Black, automatically detect the appropriate line ending.

[lint.mccabe]
max-complexity = 10                # Unlike Flake8, default to a complexity level of 10.

</code></pre>
<p>I want to ignore <code>ignore_py</code> and it's folders. I tried <code>ignore_py/*</code>, <code>ignore_py/**</code> and <code>ignore_py/**/</code> none of these worked.</p>
<p><strong>Version:</strong> 0.9.6</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-02-14 04:01</div>
            <div class="timeline-body"><p>Could you try once more but put <code>exclude = [&quot;ignore_py/*&quot;]</code> under <code>[format]</code> or at the top level? Apologies if you've already tried that and I'm misunderstanding.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @dylwil3 on 2025-02-14 04:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-02-14 07:24</div>
            <div class="timeline-body"><p>This is probably related to https://github.com/astral-sh/ruff/issues/8267</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-02-14 07:25</div>
            <div class="timeline-body"><p>Oh, never mind. @dylwil3's right. I only read the title and jumped right to conclusion. You'll need an <code>exclude</code> in the <code>format</code> section or you can move the <code>exclude</code> to the top level if it should apply to both format and lint</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/akshaybabloo">@akshaybabloo</a> on 2025-02-14 11:44</div>
            <div class="timeline-body"><p>Oh got it. I will giive that a try.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @akshaybabloo on 2025-02-14 11:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:52:12 UTC
    </footer>
</body>
</html>
