<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Duplication and Unused Code Detection - astral-sh/ruff #18432</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Code Duplication and Unused Code Detection</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/18432">#18432</a>
        opened by <a href="https://github.com/ALPA-Industry-and-Technology">@ALPA-Industry-and-Technology</a>
        on 2025-06-02 15:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ALPA-Industry-and-Technology">@ALPA-Industry-and-Technology</a> on 2025-06-02 15:03</div>
            <div class="timeline-body"><h3>Question</h3>
<p>Hello everyone,</p>
<p>I'm not sure if this is expected behavior or a potential issue, but I’ve come across a situation that I couldn't fully resolve using existing answers on this topic. I hope someone here can help clarify things.</p>
<p>For my company, we’re evaluating various linters and formatters. During our testing, we explored <strong>Ruff</strong> and created a <code>test_script.py</code> file containing numerous code smells - specifically, several instances of code duplication (9 lines repeated multiple times within the same file), as well as many unused classes, functions, local variables, and arguments.</p>
<p>We noticed that Ruff, unlike some other static analysis tools, <strong>does not appear to detect code duplications</strong> within the same file. Additionally, while it seems to detect unused local variables and arguments, <strong>unused classes and functions are not flagged</strong> as expected.</p>
<p>Is there a specific reason for this behavior?<br />
And more importantly, is there a way to configure Ruff (or extend it) to detect <strong>both code duplications</strong> and <strong>unused functions/classes</strong>, across the whole project but also <strong>within the same file</strong>?</p>
<p>Looking forward to your insights.
<br>
Best regards,<br />
Alex</p>
<h3>Version</h3>
<p>ruff 0.11.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @ALPA-Industry-and-Technology on 2025-06-02 15:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-02 15:53</div>
            <div class="timeline-body"><p>Hi @ALPA-Industry-and-Technology</p>
<p>Ruff currently doesn't support duplicate code detection. There are two open issues around it (https://github.com/astral-sh/ruff/issues/17724 and https://github.com/astral-sh/ruff/issues/10522). There's no specific reason that Ruff doesn't support it other than that there have always been more pressing issues to work on.</p>
<p>For unused functions and classes. Python's module system makes detecting unused functions and classes non trivial because all module-level symbols are public. That means, detecting unused functions and classes (and variables) requires searching for all usages across all files. We hope that we'll be able to provide such a lint rule in the future with your new semantic analysis that we build as part of our experimental type checker ty. But it isn't something that ruff supports today because ruff's analysis is single file only.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-07-24 12:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:55 UTC
    </footer>
</body>
</html>
