<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flag unused imports even with redefinition - astral-sh/ruff #300</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Flag unused imports even with redefinition</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/300">#300</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2022-10-02 17:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><p>Given this code:</p>
<pre><code class="language-py">import os
import os
</code></pre>
<p>We return:</p>
<pre><code>Found 1 error(s).
foo.py:2:1: F401 `os` imported but unused
</code></pre>
<p>Flake8 does this:</p>
<pre><code>foo.py:2:1: F811 redefinition of unused 'os' from line 1
foo.py:2:1: F401 'os' imported but unused
</code></pre>
<p>My preference would be:</p>
<pre><code>Found 2 error(s).
foo.py:1:1: F401 `os` imported but unused
foo.py:2:1: F401 `os` imported but unused
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2022-10-02 17:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @charliermarsh on 2022-10-02 17:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Cxxshyy">@Cxxshyy</a> on 2022-10-18 20:21</div>
            <div class="timeline-body"><p>hi im fairly new to rust but can have a go at this so can you first tell me what file handle this and ill take a look</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> removed by @charliermarsh on 2022-10-18 21:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-10-18 21:09</div>
            <div class="timeline-body"><p>@Cxxshyy - Awesome! I marked this as <code>good first issue</code> a few weeks back but I think it may be deceptively tricky. (It requires some extra book-keeping to understand when an import &quot;redefines&quot; another import, since you can have imports split across <code>if</code>-<code>else</code> blocks and so on.)</p>
<p>If you're looking for a place to contribute, a good starting point might be to take a rule you like from <a href="https://github.com/PyCQA/flake8-bugbear"><code>flake8-bugbear</code></a> and add it to Ruff (#389). I wrote some instructions on a similar issue in <a href="https://github.com/charliermarsh/ruff/issues/312#issuecomment-1280008634">here</a> that would be helpful for understanding how to add a new check. Does that look interesting to you?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Cxxshyy">@Cxxshyy</a> on 2022-10-18 21:19</div>
            <div class="timeline-body"><p>yes that looks interesting ill have a look at this tomorrow</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-10-18 21:20</div>
            <div class="timeline-body"><p>Cool, don't hesitate to ask questions, I'd love to be helpful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Cxxshyy">@Cxxshyy</a> on 2022-10-18 21:21</div>
            <div class="timeline-body"><p>will do thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-16 05:28</div>
            <div class="timeline-body"><p>This got resolved when we added the redefined-while-unused checks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-12-16 05:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:45:21 UTC
    </footer>
</body>
</html>
