<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PERF401 false positive when appended list items depend on previous items - astral-sh/ruff #6210</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>PERF401 false positive when appended list items depend on previous items</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/6210">#6210</a>
        opened by <a href="https://github.com/andersk">@andersk</a>
        on 2023-07-31 20:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/andersk">@andersk</a> on 2023-07-31 20:26</div>
            <div class="timeline-body"><p>This incorrectly triggers <a href="https://beta.ruff.rs/docs/rules/manual-list-comprehension/">PERF401 manual-list-comprehension</a> (#5298):</p>
<pre><code class="language-python">fibonacci = [0, 1]
for i in range(20):
    fibonacci.append(sum(fibonacci[-2:]))
print(fibonacci)
</code></pre>
<p>This cannot be converted to a list comprehension because each appended item depends on the previous items. Similar to #5581, but without an <code>if</code> conditional.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-31 20:27</div>
            <div class="timeline-body"><p>Thanks, will fix.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-07-31 20:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-08-01 03:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:30:52 UTC
    </footer>
</body>
</html>
