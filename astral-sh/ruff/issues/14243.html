<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruff format doesn't sort imports, nothing changed (E402) - astral-sh/ruff #14243</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ruff format doesn&#x27;t sort imports, nothing changed (E402)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14243">#14243</a>
        opened by <a href="https://github.com/zakimimit">@zakimimit</a>
        on 2024-11-10 09:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zakimimit">@zakimimit</a></div>
            <div class="timeline-body"><p>Hello</p>
<p>Ruff format doesn&#x27;t sort imports, nothing changed</p>
<p>I use Vscode Extenstion Ruff v2024.54.0</p>
<p>ruff.toml</p>
<pre><code>[lint]
extend-select = [&quot;I&quot;,&quot;N&quot;,&quot;F&quot;,&quot;E&quot;,&quot;W&quot;,&quot;R&quot;,&quot;C90&quot;,&quot;UP&quot;,&quot;SIM&quot;,&quot;E402&quot;]

extend-ignore = [&quot;E501&quot;]

ignore = [&quot;E501&quot;,&quot;F403&quot;,&quot;F405&quot;]


</code></pre>
<p>This does not work
Module-level import not at top of file
Module-import-not-at-top-of-file (E402)</p>
<p>I try several times, nothing works</p>
<p><img src="https://github.com/user-attachments/assets/9d11c8c8-4708-461c-9409-16dcdd9593c3" alt="image"></p>
<p><img src="https://github.com/user-attachments/assets/75426107-b94a-4b46-8eff-72bf402762c2" alt="image"></p>
<p>I hope you can fix it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-10 15:58</div>
            <div class="timeline-body"><p>Not all errors are auto-fixable. Can you be more specific about what you&#x27;re trying to do?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-10 15:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zakimimit">@zakimimit</a> on 2024-11-10 17:04</div>
            <div class="timeline-body"><blockquote>
<p>Not all errors are auto-fixable. Can you be more specific about what you&#x27;re trying to do?</p>
</blockquote>
<p>For example</p>
<pre><code>from flask_wtf import FlaskForm
from wtforms import (
    SubmitField,
)

class SetPriceForm(FlaskForm):
    submit = SubmitField(&quot;Set Prices&quot;)


import pyotp

class SeForm(FlaskForm):
    submit = SubmitField(&quot;Set &quot;)

    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        if not self.is_submitted():
            self.auth_key.data = pyotp.random_base32()

</code></pre>
<p>The import pyotp is not fixed
It should be fixed  and go up with othor import</p>
<p>Like this</p>
<pre><code>
import pyotp

from flask_wtf import FlaskForm
from wtforms import (
    SubmitField,
)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-11 09:50</div>
            <div class="timeline-body"><p>The reason this isn&#x27;t working as expected is because <code>ruff</code> doesn&#x27;t support the <code>float-to-top</code> isort options. We track that feature in <a href="https://github.com/astral-sh/ruff/issues/1251">astral-sh/ruff#1251</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-11 09:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:00 UTC
    </footer>
</body>
</html>
