<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indent multi-line expressions in function arguments - astral-sh/ruff #12854</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Indent multi-line expressions in function arguments</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/12854">#12854</a>
        opened by <a href="https://github.com/edaqa-uncountable">@edaqa-uncountable</a>
        on 2024-08-13 08:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/edaqa-uncountable">@edaqa-uncountable</a> on 2024-08-13 08:48</div>
            <div class="timeline-body"><p>Would it be possible to add an option to allow indentation of multi-line expressions in function arguments?  Currently it aligns everything to the left with the other arguments.</p>
<p>For example, this is the formatting I get:</p>
<pre><code>some_func(
   param_one=value,
   param_two=&quot;hi&quot;
   if some_cond
   else &quot;bye&quot;,
   param_three=1
   if some_cond
   else 2,
)
</code></pre>
<p>That alignment is hard to read. I want something like this instead:</p>
<pre><code>some_func(
   param_one=value,
   param_two=&quot;hi&quot;
       if some_cond
       else &quot;bye&quot;,
   param_three=1
       if some_cond
       else 2,
)
</code></pre>
<p>I've shortened the lines to focus on the alignment (though I realize this short they might end up on one-line)</p>
<p>I admit I don't know what the ideal formatting here is, but the first one is definitely not it.  Perhaps it should always rewrite as a paren expression, which has nicer results.</p>
<pre><code>some_func(
   param_one=value,
   param_two=(
       &quot;hi&quot;
       if some_cond
       else &quot;bye&quot;
   ),
   param_three=(
       1
       if some_cond
       else 2
   )
)
</code></pre>
<p>Keywords: indent function argument parameter</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @dhruvmanila on 2024-08-13 08:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @dhruvmanila on 2024-08-13 08:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">style</span> added by @dhruvmanila on 2024-08-13 08:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-13 10:58</div>
            <div class="timeline-body"><p>I agree, that Ruff's current nested expression formatting isn't ideal (for example, the formatting of the <code>if else</code> expression) and I explained my thinking around it in https://github.com/psf/black/issues/4123 (and why we deviate from black).</p>
<p>We plan to revisit sub-expression formatting. I just created https://github.com/astral-sh/ruff/issues/12856 to make this more visible.</p>
<p>Therefore, yes we want to improve nested if expression formatting although I'm not sure if it will use the exact style that you're proposing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-08-13 10:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:53 UTC
    </footer>
</body>
</html>
