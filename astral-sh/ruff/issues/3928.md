```yaml
number: 3928
title: "`required-imports  = [\"from __future__ import annotations\"]` reports missing import in `pyi` files"
type: issue
state: closed
author: bryanforbes
labels:
  - bug
assignees: []
created_at: 2023-04-10T20:12:28Z
updated_at: 2023-04-12T02:31:22Z
url: https://github.com/astral-sh/ruff/issues/3928
synced_at: 2026-01-10T01:56:47Z
```

# `required-imports  = ["from __future__ import annotations"]` reports missing import in `pyi` files

---

_Issue opened by @bryanforbes on 2023-04-10 20:12_

Ruff version: 0.0.261

Given the following configuration:

```toml
[tool.ruff]
select = ["I"]

[tool.ruff.isort]
required-imports = ["from __future__ import annotations"]
```

And the following file at `stubs/my_thing/__init__.pyi`:

```python
def do_something() -> None: ...
```

`ruff` reports that `from __future__ import annotations` is missing from `stubs/my_thing/__init__.pyi`. This is contrary to how `isort` works: `isort` does not enforce this import for `pyi` files because stub files ["are treated as if `from __future__ import annotations` is enabled"](https://typing.readthedocs.io/en/latest/source/stubs.html#syntax).

---

_Comment by @charliermarsh on 2023-04-10 20:58_

Thanks! This does seem like a bug. I'm guessing we should just avoid enforcing required imports for `.pyi` files altogether.

---

_Label `bug` added by @charliermarsh on 2023-04-10 20:58_

---

_Comment by @bryanforbes on 2023-04-10 21:13_

@charliermarsh it might also be a good idea to implement `Y044` from `flake8-pyi` to complement this change

---

_Comment by @charliermarsh on 2023-04-11 20:30_

I'll fix this tonight.

---

_Comment by @Avasam on 2023-04-11 23:09_

Related: https://github.com/charliermarsh/ruff/issues/3072#issuecomment-1500721160

My current config:
```toml
[tool.ruff.isort]
required-imports = ["from __future__ import annotations"]

[tool.ruff.per-file-ignores]
"*.pyi" = [
  "I002", # from __future__ import annotations
]
```

---

_Referenced in [astral-sh/ruff#3940](../../astral-sh/ruff/pulls/3940.md) on 2023-04-12 02:20_

---

_Closed by @charliermarsh on 2023-04-12 02:31_

---
