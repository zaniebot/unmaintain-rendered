<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatically enable `--format=github` if the environment looks like GitHub Actions? - astral-sh/ruff #1973</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Automatically enable <code>--format=github</code> if the environment looks like GitHub Actions?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1973">#1973</a>
        opened by <a href="https://github.com/woodruffw">@woodruffw</a>
        on 2023-01-18 21:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/woodruffw">@woodruffw</a></div>
            <div class="timeline-body"><p>Thanks again for maintaining <code>ruff</code>! I&#x27;m trying to roll it out to more projects at Trail of Bits, and it&#x27;s been very satisfying to see the speedups we&#x27;re getting/the additional things it can catch ðŸ™‚</p>
<p>This is a feature request for a (very small) QoL improvement: automatically enabling <code>--format=github</code> (<code>SerializationFormat::Github</code>) if <code>ruff</code>&#x27;s invoked environment looks like GitHub Actions.</p>
<p>My rationale here is that GitHub Actions have a distinguishable environment (you can always be relatively confident you&#x27;re in one if both <code>CI</code> and <code>GITHUB_ACTIONS</code> are set), and the act of being invoked in a GitHub Action <em>probably</em> implies user intent to have annotations rather than the standard formatting. This also makes the &quot;intelligent&quot; choice possible even when <code>ruff</code> is nested in a build system or task runner that&#x27;s meant to be run both locally and in CI, e.g. <code>make lint</code> will do the right thing in both cases.</p>
<p>If there&#x27;s interest, I&#x27;m happy to submit a PR for this!</p>
Downsides
<p>This arguably makes <code>ruff</code> too clever, which is a good reason to not want this! I&#x27;m totally happy using one of the alternatives below if this is how you feel as <code>ruff</code>&#x27;s maintainers; just figured I&#x27;d open the issue to gauge interest.</p>
Alternatives considered
<ul>
<li>Setting <code>RUFF_FORMAT=github</code> explicitly. This would work perfectly fine!</li>
<li>Passing <code>--format=github</code> through all of our various makefiles/build abstractions. This is workable, just a little tedious ðŸ™‚</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2023-01-18 21:14</div>
            <div class="timeline-body"><p>@woodruffw this was actually removed a few weeks ago: <a href="https://github.com/charliermarsh/ruff/pull/1697">charliermarsh/ruff#1697</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woodruffw">@woodruffw</a> on 2023-01-18 21:16</div>
            <div class="timeline-body"><p>Ah, dang -- yeah, I could have sworn I saw this behavior before, but I thought I had imagined it!</p>
<p>The rationale there makes sense to me! Using <code>RUFF_FORMAT</code> is no major lift for us, so I&#x27;ll go with that.</p>
<p>Thanks for the fast response!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/woodruffw">@woodruffw</a> on 2023-01-18 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-18 21:24</div>
            <div class="timeline-body"><p>Thanks for the thoughtful issue @woodruffw (and so glad to hear that Ruff is working for you). And thank you @edgarrmondragon for following up!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:30 UTC
    </footer>
</body>
</html>
