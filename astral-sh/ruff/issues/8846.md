```yaml
number: 8846
title: PD003 raise an error for xarray.DataArray
type: issue
state: closed
author: seisman
labels:
  - bug
  - type-inference
assignees: []
created_at: 2023-11-27T02:20:23Z
updated_at: 2023-11-28T06:23:34Z
url: https://github.com/astral-sh/ruff/issues/8846
synced_at: 2026-01-10T01:56:50Z
```

# PD003 raise an error for xarray.DataArray

---

_Issue opened by @seisman on 2023-11-27 02:20_

Minimal code snippet to reproduce the bug:
```python
import numpy as np
import xarray as xr

array = xr.DataArray([1, np.nan, 3], dims="x")
array.isnull()
```
The command:
```
$ ruff check test.py --select=PD --show-source --isolated
test.py:5:1: PD003 `.isna` is preferred to `.isnull`; functionality is equivalent
  |
4 | array = xr.DataArray([1, np.nan, 3], dims="x")
5 | array.isnull()
  | ^^^^^^^^^^^^ PD003
  |

Found 1 error.
```
ruff version: 
```
$ ruff --version 
ruff 0.1.6
```

---

_Referenced in [GenericMappingTools/pygmt#2830](../../GenericMappingTools/pygmt/pulls/2830.md) on 2023-11-27 02:21_

---

_Comment by @dhruvmanila on 2023-11-27 15:38_

Thanks for raising this. This is similar to #6432 and is a limitation without having a proper type inference logic. Maybe we could define a `is_pandas_dataframe` method similar to `is_list` \cc @charliermarsh who has more context on the current type inference logic.

https://github.com/astral-sh/ruff/blob/6afa66d92dd4e3ce8cb623e472377b3f6f564d70/crates/ruff_python_semantic/src/analyze/typing.rs#L496-L501

---

_Label `type-inference` added by @dhruvmanila on 2023-11-27 15:38_

---

_Label `bug` added by @dhruvmanila on 2023-11-27 15:38_

---

_Comment by @charliermarsh on 2023-11-28 06:23_

(Gonna merge into https://github.com/astral-sh/ruff/issues/6432.)

---

_Closed by @charliermarsh on 2023-11-28 06:23_

---

_Referenced in [OpenSenseAction/pypwsqc#16](../../OpenSenseAction/pypwsqc/pulls/16.md) on 2024-03-14 06:48_

---

_Referenced in [astral-sh/ruff#14671](../../astral-sh/ruff/pulls/14671.md) on 2024-11-29 07:33_

---
