<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rule suggestion: always import from definition - astral-sh/ruff #19559</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rule suggestion: always import from definition</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/19559">#19559</a>
        opened by <a href="https://github.com/gorewilliams">@gorewilliams</a>
        on 2025-07-25 15:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gorewilliams">@gorewilliams</a></div>
            <div class="timeline-body">Summary
<p>When writing Python packages, I often export functions/classes in <code>__init__.py</code> files to make imports shorter and neater for package users. But when I work on the package itself, I&#x27;d like Ruff to stop me (the package developer) from using these shortcut imports, as they make the code confusing and may lead to unintended circular imports.</p>
<p>Here&#x27;s a rough example (no pun intended):</p>
<p><code>supercoolpkg/__init__.py</code></p>
<pre><code>from supercoolpkg.http_client import HTTPClient
from supercoolpkg.http_error import HTTPError
</code></pre>
<p><code>supercoolpkg/http_error.py</code></p>
<pre><code>class HTTPError(Exception):
    pass
</code></pre>
<p><code>supercoolpkg/http_client.py</code></p>
<pre><code>from supercoolpkg import HTTPError  # ERROR: Circular import


class HTTPClient:
     def get(self, url: str) -&gt; str:
        try:
            ...
        except Exception as e:
           raise HTTPError(...) from e
</code></pre>
<p>Instead:</p>
<pre><code>from supercoolpkg.http_error import HTTPError  # Imported from definition, no circular import


class HTTPClient:
     def get(self, url: str) -&gt; str:
        try:
            ...
        except Exception as e:
           raise HTTPError(...) from e
</code></pre>
<p>A rule that enforces importing from definition (or alternatively disallows importing from <code>__init__.py</code>) will prevent this.</p>
<p>Would love to hear your opinion on this.
Many thx in advance!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-25 19:58</div>
            <div class="timeline-body"><p>This sounds similar and possibly overlaps with <a href="https://github.com/astral-sh/ruff/issues/167">astral-sh/ruff#167</a> and maybe <a href="https://github.com/astral-sh/ruff/issues/1107">astral-sh/ruff#1107</a>. I think it still needs the type-inference/multi-file resolution we&#x27;re working on in ty.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-25 19:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-25 19:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gorewilliams">@gorewilliams</a> on 2025-07-25 20:07</div>
            <div class="timeline-body"><p>Thanks for the swift reply. Yeah makes sense that this would need ty. Exciting times :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-28 10:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:16 UTC
    </footer>
</body>
</html>
