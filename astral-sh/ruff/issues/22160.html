<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLR0124 Documentation Issue - astral-sh/ruff #22160</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>PLR0124 Documentation Issue</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/22160">#22160</a>
        opened by <a href="https://github.com/bruno-brant">@bruno-brant</a>
        on 2025-12-23 11:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bruno-brant">@bruno-brant</a></div>
            <div class="timeline-body">Summary
<p>PLR0124 documentation states:</p>
<blockquote>
<p>Comparing a name to itself always results in the same value (...)</p>
</blockquote>
<p>Bu it doesn&#x27;t, as one can overload <code>__eq__</code>.</p>
<p>This came up in a situation where I had an assertion like:</p>
<pre><code>assert foo == foo
</code></pre>
<p>I wrote the test because foo&#x27;s class had overriden <strong>eq</strong> and I needed to test that the equality still held.</p>
<p>I suggest to rewrite the first sentence, switching &quot;always&quot; to &quot;likely&quot; and adjusting the rest accordingly:</p>
<blockquote>
<p>Comparing a name to itself likely results in a truthy value, and is probably a mistake.</p>
</blockquote>
Version
<p>N/A</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-23 14:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-23 14:19</div>
            <div class="timeline-body"><p>Hmm, I think I initially read this as &quot;Comparing a name to itself <strong>is always true</strong>, and is likely a mistake,&quot; but it actually says &quot;always results in the same value.&quot; That kind of raises the required strangeness level of an <code>__eq__</code> implementation that would break this assumption (i.e. <code>foo == foo</code> is sometimes true and sometimes false).</p>
<p>It&#x27;s probably still worth calling out in the docs, but I&#x27;d probably make it more of a footnote or at least separate section rather than changing the main text since this should be rare.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bruno-brant">@bruno-brant</a> on 2025-12-23 17:33</div>
            <div class="timeline-body"><p>Hi @ntBre!</p>
<p>Indeed, a symbol should always equal itself; but we are not talking about the implementation of the equality operation but the scrutinization of code syntax. Given a python object can have a custom <strong>eq</strong> that can perform whatever the user desires, stating &quot;always results in the same value&quot; is false - that&#x27;s implementation dependant.</p>
<p>It&#x27;s nitpicking, for sure, but personally I would prefer the docs to be more precise. Maybe adding &quot;should&quot; (as in <em>should always result in the same value</em>) would suffice? Not giving the absolute idea that this is automatically true?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-24 19:20</div>
            <div class="timeline-body"><p>I agree with @ntBre that this seems like a very specific edge case that I don&#x27;t think we need to highlight so prominently. But a prominent case where this is true is comparing <code>math.nan</code> with itself.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bruno-brant">@bruno-brant</a> on 2025-12-24 21:39</div>
            <div class="timeline-body"><p>Is it proeminent to include a <em>should</em> qualifier? Genuinely asking, sorry if I&#x27;m sounding pushy.</p>
<p>I would agree with a note to at least make sure users understand that this is a call to <code>__eq__</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-26 08:51</div>
            <div class="timeline-body"><p>I wouldn&#x27;t mind changing always to something like: &quot;for most objects, comparing it to itself...&quot;</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:42 UTC
    </footer>
</body>
</html>
