<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>flake8-logging-format should check `.log(level, msg)` calls too - astral-sh/ruff #2562</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>flake8-logging-format should check `.log(level, msg)` calls too</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/2562">#2562</a>
        opened by <a href="https://github.com/andersk">@andersk</a>
        on 2023-02-04 00:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/andersk">@andersk</a> on 2023-02-04 00:59</div>
            <div class="timeline-body"><pre><code class="language-python">import logging
logger = logging.getLogger(&quot;test&quot;)
a, b = &quot;a&quot;, &quot;b&quot;
logger.error(f&quot;{a} {b}&quot;)  # raises G004 Logging statement uses f-string
logger.log(logging.ERROR, f&quot;{a} {b}&quot;)  # should raise G004, but doesn’t
</code></pre>
<p>Also reported upstream at globality-corp/flake8-logging-format#69.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-04 01:29</div>
            <div class="timeline-body"><p>Can do!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-02-04 01:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-03-24 18:25</div>
            <div class="timeline-body"><p>So, I'm looking into this and have a few queries:</p>
<p>As per the <a href="https://docs.python.org/3/library/logging.html#logging.Logger.log">documentation of the <code>log</code> function</a>, it says that the <code>level</code> argument could be any integer level. In addition to that, it allows <a href="https://docs.python.org/3/library/logging.html#logging.addLevelName">adding</a> of custom log levels as well. The user could pass in any arbitrary integer as well and that works.</p>
<p><em>Should we support any arbitrary integer levels or only the ones defined in the standard library?</em></p>
<p>This is more towards the implementation side: I see that the implementation has been grouped together instead of each rule being a separate module. With the support of <code>logging.log</code>, special handling would be required where it's either one or the other. Are there any plans to refactor into separate modules or is this ok for now?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andersk">@andersk</a> on 2023-03-24 19:07</div>
            <div class="timeline-body"><p>We have no need to validate or even inspect the <code>level</code> argument. (It’s probably going to be a variable anyway.) We just need to apply the same string formatting rules to <code>logger.log(level, msg)</code> that we would apply to <code>logger.debug(msg)</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3726.html">astral-sh/ruff#3726</a> on 2023-03-25 06:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-03-25 15:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:08 UTC
    </footer>
</body>
</html>
