<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Syntax errors related to indentation after backslashes - astral-sh/ruff #19301</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Syntax errors related to indentation after backslashes</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/19301">#19301</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-07-12 20:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dscorbett">@dscorbett</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Ruff has false positives and false negatives when detecting syntax errors related to indentation after backslashes. <a href="https://docs.python.org/3/reference/lexical_analysis.html#indentation">Python’s documentation</a> says “the whitespace up to the first backslash determines the indentation”, so the leading white space of the next line shouldn’t cause a syntax error, though this principle has been interpreted inconsistently in different Python versions. See https://github.com/python/cpython/issues/90249.</p>
<p><a href="https://play.ruff.rs/44ebd0a2-e83f-4898-8f31-44d0c631598f">False positive (unexpected indentation)</a> (in all Python versions):</p>
<pre><code class="language-console">$ cat &gt;test_1.py &lt;&lt;'# EOF'
if True:
    pass
    \
        print(&quot;1&quot;)
# EOF

$ python3.13 test_1.py
1

$ ruff --isolated check test_1.py --output-format concise -q --target-version py313
test_1.py:3:1: SyntaxError: Unexpected indentation
test_1.py:5:1: SyntaxError: Expected a statement
</code></pre>
<p><a href="https://play.ruff.rs/029a16c9-bfa6-4ca2-9597-26c3036fdd23">False positive (missing indentation)</a> (except in Python 3.9 only, where it is a true positive):</p>
<pre><code class="language-console">$ cat &gt;test_2.py &lt;&lt;'# EOF'
if True:
    \
print(&quot;2&quot;)
# EOF

$ python3.13 test_2.py
2

$ ruff --isolated check test_2.py --output-format concise -q --target-version py313
test_2.py:3:1: SyntaxError: Expected an indented block after `if` statement

$ python3.9 test_2.py 2&gt;&amp;1 | tail -n 1
IndentationError: expected an indented block

$ ruff --isolated check test_2.py --output-format concise -q --target-version py39
test_2.py:3:1: SyntaxError: Expected an indented block after `if` statement
</code></pre>
<p><a href="https://play.ruff.rs/b085d040-c518-45ab-a8df-94688c241ebf">False negative (unexpected indentation)</a> (except in Python 3.9 and earlier, where it is a true negative):</p>
<pre><code class="language-console">$ cat &gt;test_3.py &lt;&lt;'# EOF'
\
    \
print(&quot;3&quot;)
# EOF

$ python3.13 test_3.py 2&gt;&amp;1 | tail -n 1
IndentationError: unexpected indent

$ ruff --isolated check test_3.py --target-version py313
All checks passed!

$ python3.9 test_3.py
3

$ ruff --isolated check test_3.py --target-version py39
All checks passed!
</code></pre>
<p><a href="https://play.ruff.rs/c4359afd-c1e0-4dd5-b2bc-cc9e79857903">False positive (unexpected indentation)</a> (except in Python 3.10 and later, where it is a true positive):</p>
<pre><code class="language-console">$ cat &gt;test_4.py &lt;&lt;'# EOF'
\
    print(&quot;4&quot;)
# EOF

$ python3.9 test_4.py
4

$ ruff --isolated check test_4.py --output-format concise -q --target-version py39
test_4.py:1:1: SyntaxError: Unexpected indentation
test_4.py:3:1: SyntaxError: Expected a statement

$ python3.10 test_4.py 2&gt;&amp;1 | tail -n 1
IndentationError: unexpected indent

$ ruff --isolated check test_4.py --output-format concise -q --target-version py310
test_4.py:1:1: SyntaxError: Unexpected indentation
test_4.py:3:1: SyntaxError: Expected a statement
</code></pre>
<p><a href="https://play.ruff.rs/51876800-57da-4c30-99cb-84a0a2f5b1a8">False positive (no matching indentation)</a> (in all Python versions):</p>
<pre><code class="language-console">$ cat &gt;test_5.py &lt;&lt;'# EOF'
if True:
    pass
    \
  print(&quot;5&quot;)
# EOF

$ python3.13 test_5.py
5

$ ruff --isolated check test_5.py --output-format concise -q --target-version py313
test_5.py:3:1: SyntaxError: unindent does not match any outer indentation level
test_5.py:5:1: SyntaxError: Expected dedent, found end of file
</code></pre>
<h3>Version</h3>
<p>ruff 0.12.3 (5bc81f26c 2025-07-11)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MichaReiser on 2025-07-14 07:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">parser</span> added by @MichaReiser on 2025-07-14 07:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:03 UTC
    </footer>
</body>
</html>
