<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>isort ability to treat comments as code - astral-sh/ruff #9697</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>isort ability to treat comments as code</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/9697">#9697</a>
        opened by <a href="https://github.com/yasirroni">@yasirroni</a>
        on 2024-01-30 05:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/yasirroni">@yasirroni</a> on 2024-01-30 05:43</div>
            <div class="timeline-body"><p>isort support ability to treat comments as code https://github.com/pycqa/isort/issues/1357. It is very useful in <code>.py</code> files generated from <code>.ipynb</code> that each section of import separated by comment <code># %%</code></p>
<p>Thus,</p>
<pre><code class="language-python">import os

import cvxpy as cp
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd

# %%  &gt;&gt;&gt; This should make all import below this treated as separate isort task
import sys
import traceback
import warnings
</code></pre>
<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-01-30 07:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by @MichaReiser on 2024-01-30 07:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-01-30 11:04</div>
            <div class="timeline-body"><p>Thanks for the feature request!</p>
<p>I agree that having this config would be useful for this specific use-case but I was wondering what's the motive behind running Ruff on the generated <code>.py</code> file instead of <code>.ipynb</code> directly.</p>
<p>We do something like this for Jupyter notebooks where we need to treat each cell boundary as an import boundary. This can then be used here by treating comments as another import boundary.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yasirroni">@yasirroni</a> on 2024-01-30 17:02</div>
            <div class="timeline-body"><p>That would make sense. I just need to exclude all generated py file. Thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-08 03:33</div>
            <div class="timeline-body"><p>I think I'd prefer not to support this until we see a compelling reason to do so, since we support import sorting within notebooks natively. Gonna close for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-02-08 03:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mwoitek">@mwoitek</a> on 2024-09-02 15:18</div>
            <div class="timeline-body"><p>I've found this issue because I'd like to have this feature. So I want to give you a reason to add it. I don't like to use Jupyter notebooks for coding. I avoid them with the help of a tool named Jupytext. It allows me to create notebooks from Python scripts. To do so, I add to my scripts special comments that serve as cell delimiters. Then it's important that, when I format my code, these comments remain in place. That's precisely the problem that isort's <code>treat_comments_as_code</code> solves. Please consider adding this option.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:11 UTC
    </footer>
</body>
</html>
