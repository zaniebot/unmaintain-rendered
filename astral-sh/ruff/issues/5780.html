<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comment placement of expressions with keywords - astral-sh/ruff #5780</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Comment placement of expressions with keywords</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/5780">#5780</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2023-07-15 15:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-07-15 15:00</div>
            <div class="timeline-body"><p>We have a few nodes that are separated by a keyword. For example:</p>
<pre><code class="language-python">with (x as y) # x and y are separated by the as keyword
except x as e: # Same
call(a, b) # a and b are separated by a comma
...
</code></pre>
<p>It would be nice if we could unify the comment placement logic for all of these.</p>
<blockquote>
<p>i wonder if an abstraction with two nodes with a single token in between makes sense, which would also force us to handle them consistently. We have the same pattern in slices (x[a:b]), argument lists x(a,b) and binary expressions (a+b). (also this feature is inconsistent because with (a as b) works but except (a as b) doesn't).
<a href="https://github.com/astral-sh/ruff/pull/5758/files/5e98a87684a79cd297756072870d5b7142498ffc#r1263948323">Original Message</a> from @konstin</p>
</blockquote>
<p>This task aims to explore if generalizing the logic is possible and, if so, implement the generalization.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4798.html">astral-sh/ruff#4798</a> on 2023-07-15 15:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5758.html">astral-sh/ruff#5758</a> on 2023-07-15 15:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @konstin on 2023-07-15 19:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-09-08 07:25</div>
            <div class="timeline-body"><p>Closing as unplanned.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2023-09-08 07:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:50 UTC
    </footer>
</body>
</html>
