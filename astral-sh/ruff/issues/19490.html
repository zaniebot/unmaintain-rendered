<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Feature Request] Add auto-import support for Ruff LSP - astral-sh/ruff #19490</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Feature Request] Add auto-import support for Ruff LSP</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/19490">#19490</a>
        opened by <a href="https://github.com/seamuswn">@seamuswn</a>
        on 2025-07-22 15:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/seamuswn">@seamuswn</a> on 2025-07-22 15:14</div>
            <div class="timeline-body"><h3>Summary</h3>
<h3>What</h3>
<p>Supporting the detection, selection and addition of missing imports is a potential fix for the following lint rules:
https://docs.astral.sh/ruff/rules/undefined-name/
https://docs.astral.sh/ruff/rules/undefined-local-with-import-star-usage/</p>
<p>Essentially re-opening this feature request from 2023 which was closed at that time:
https://github.com/astral-sh/ruff/issues/4059</p>
<h3>Why am I asking</h3>
<p>With the current lack of Pylance support for non-VsCode Vscodium projects (e.g. Cursor), there's no real viable option for an LSP offering this code action. BasedPyright is supposed to support this but has <a href="https://github.com/DetachHead/basedpyright/issues/545">a significant limitation</a> in that it can only detect and suggest auto-imports for files that have previously been opened within the same IDE session (so in order to be able to suggest <code>from src.foo import bar</code>, <code>src/foo.py</code> must have been opened already).</p>
<p>If Ruff were to support this, it would significantly improve the developer experience for folks looking for open source LSPs that would support this pretty rudimentary code action, that kind of falls between the cracks in where we expect this to be supported, as to my knowledge the only real viable alternative is <a href="https://github.com/python-rope/rope">rope</a>.</p>
<h3>Reference Implementation: Pycharm</h3>
<p>For reference of how this might work, I think the Pycharm IDE actions implementation works pretty nicely (see docs <a href="https://www.jetbrains.com/help/pycharm/creating-and-optimizing-imports.html#import-packages">here</a>):</p>
<ol>
<li><p>It has a code action for <code>Import this name</code> or <code>Import this name locally</code>. The former option will add an import statement at the top of the module, the latter will insert the import statement on the line immediately preceding the reference, at the same level of indentation.</p>
</li>
<li><p>If there's only a single option found for the name, that name is inlined in the Code Action:
<img width="488" height="87" alt="Image" src="https://github.com/user-attachments/assets/85d9f921-b38e-45fe-835e-4ab2ecfd6019" /></p>
</li>
<li><p>If there are multiple options found for the name, it displays <code>Import this name</code>, which then shows a dropdown of options when selected:</p>
</li>
</ol>
<p><img width="232" height="82" alt="Image" src="https://github.com/user-attachments/assets/c4fd0b1e-d79c-4049-a3fe-1c3d59861f74" /></p>
<p><img width="382" height="136" alt="Image" src="https://github.com/user-attachments/assets/9bb011f0-c1c4-47b9-960a-c104e60dce29" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-22 16:24</div>
            <div class="timeline-body"><p>I believe we're working on this in our upcoming type-checker and LSP ty: https://github.com/astral-sh/ty/issues/535. ty has the necessary infrastructure for module resolution and multi-file analysis that isn't currently integrated into Ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-07-22 16:24</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:55 UTC
    </footer>
</body>
</html>
