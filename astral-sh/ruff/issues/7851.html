<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUF100 for noqa: E501 not at end of line - astral-sh/ruff #7851</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>RUF100 for noqa: E501 not at end of line</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/7851">#7851</a>
        opened by <a href="https://github.com/LefterisJP">@LefterisJP</a>
        on 2023-10-08 08:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/LefterisJP">@LefterisJP</a> on 2023-10-08 08:11</div>
            <div class="timeline-body"><p>With the new ruff release <code>ruff==0.0.292</code> all unneeded noqa: E501 comments are detected! Yay!</p>
<p>But this seems to also be valid (or at least have been working until now), having the noqa: E501 in the middle of the comment and then have more comment text after it.</p>
<pre><code class="language-python"># line length 99
averylongvariablenamethatyouprobablyshouldneveruse = 'avalue'  # noqa: E501  # ruff will try to autofix/remove cause by the end of the pragma the line is &lt;99 but with this extra comment we made it go over, so once autofixed there is a line length violation
</code></pre>
<p>If you run <code>ruff --fix</code> on this it will autofix the noqa: E501 away thinking it's not needed since by the end of noqa: E501 line length is less than the limit. Ignoring the fact that the comment continues.</p>
<p>So we will end up with this:</p>
<pre><code># line length 99
averylongvariablenamethatyouprobablyshouldneveruse = 'avalue'  # ruff will try to autofix/remove cause by the end of the pragma the line is &lt;99 but with this extra comment we made it go over, so once autofixed there is a line length violation
</code></pre>
<p>Which will then hit again with a line length violation and need manual fix/action.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-08 13:35</div>
            <div class="timeline-body"><p>Ahh very tricky! Thanks, this is a good call.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-10-08 13:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">noqa</span> added by @charliermarsh on 2023-10-08 13:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-08 13:35</div>
            <div class="timeline-body"><p>I hope the change was overall a net positive :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LefterisJP">@LefterisJP</a> on 2023-10-08 15:02</div>
            <div class="timeline-body"><blockquote>
<p>I hope the change was overall a net positive :)</p>
</blockquote>
<p>Oh yes ofc. Just had 1 file where we had 50 of those in a row and was annoying to fix by hand. But as you can see it's 2,5k lines PR that's linked :+1:</p>
<p>Most of it autofixed!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-12-07 18:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:31:33 UTC
    </footer>
</body>
</html>
