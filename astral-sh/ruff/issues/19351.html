<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linter diff test helper for testing different options - astral-sh/ruff #19351</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Linter diff test helper for testing different options</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/19351">#19351</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2025-07-15 11:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-15 11:04</div>
            <div class="timeline-body"><p>Our current approach to testing preview behavior (or any configurable rule behavior) is to create two tests: One with preview disabled and one with preview enabled. However, both tests run on the same input file.</p>
<p>This makes it very hard to spot differences between preview on/off. That's why it would be helpful to have a helper that: given an input file, runs the rule on that file with preview off, then with preview on and only snapshots the diagnostics that were removed or added in preview. This should help to drastically reduce the snapshot sizes for our preview tests.</p>
<p>This concept can be extended to testing differences between arbitrary settings where the base run uses the default settings and the second run uses whatever settings the user provided (preview, a custom option, etc)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @MichaReiser on 2025-07-15 11:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">linter</span> added by @MichaReiser on 2025-07-15 11:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by @MichaReiser on 2025-07-15 11:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/19390.html">astral-sh/ruff#19390</a> on 2025-07-28 14:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/19715.html">astral-sh/ruff#19715</a> on 2025-08-03 22:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
