<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>False Positive F811 Redfinition on class member if global variable with same name is unused. - astral-sh/ruff #13930</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>False Positive F811 Redfinition on class member if global variable with same name is unused.</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/13930">#13930</a>
        opened by <a href="https://github.com/Daraan">@Daraan</a>
        on 2024-10-25 16:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Daraan">@Daraan</a> on 2024-10-25 16:33</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>Version: 0.7.1</p>
<p>In the following code snippet the class member is marked as redefinition</p>
<p>https://play.ruff.rs/ce10f9c6-0895-4146-932c-89c3aea05159</p>
<pre><code class="language-python">from queue import Empty

class Types:
    INVALID = 0
    UINT = 1
    HEX = 2
    Empty = 3  # &lt;-- reported as redefinition

# q = Empty() &lt;- this disables the error, if uncommented
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "False Positive F811 Redfinition on class member" to "False Positive F811 Redfinition on class member if global variable with same name is unused." by @Daraan on 2024-10-25 16:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MichaReiser on 2024-10-26 08:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/13936.html">astral-sh/ruff#13936</a> on 2024-10-26 09:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-28 01:05</div>
            <div class="timeline-body"><p>Pyflakes flags this, so I'm inclined to say it's working as expected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-28 07:02</div>
            <div class="timeline-body"><p>Looking at this more closely, it does seem consistent with how we handle redefinitions in function bodies.</p>
<p>https://play.ruff.rs/39ccfb6f-b0d6-4674-9fa1-6982797166fc</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Daraan">@Daraan</a> on 2024-10-28 08:11</div>
            <div class="timeline-body"><p>Thank you for looking at it. True, it is a redefinition I guess a warning is then helpfull.</p>
<p>I am then only confused about the variable usage of it that disables the error: https://play.ruff.rs/47aeefef-757c-47ec-afb0-7952478d0aeb</p>
<pre><code class="language-python">q = Empty() # &lt;- this disables the error, if uncommented
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-30 07:53</div>
            <div class="timeline-body"><p>The reason that the usage disables the warning is that <code>F811</code> only warns about symbols that get redefined but are never used. Adding <code>q = Empty()</code> adds a use to <code>Empty</code>: It's still redefined, but no longer unused.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @MichaReiser on 2024-10-30 07:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-10-30 07:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-08 03:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:53 UTC
    </footer>
</body>
</html>
