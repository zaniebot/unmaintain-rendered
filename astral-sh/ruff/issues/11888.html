<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiple dispatch not recognized  - astral-sh/ruff #11888</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Multiple dispatch not recognized </h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/11888">#11888</a>
        opened by <a href="https://github.com/oskarpfeffer">@oskarpfeffer</a>
        on 2024-06-16 11:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/oskarpfeffer">@oskarpfeffer</a> on 2024-06-16 11:36</div>
            <div class="timeline-body"><p>Ruff does not recognize multiple dispatch methods.</p>
<p>Example:</p>
<pre><code>from plum import dispatch

@dispatch
def f(x: str):
    return &quot;This is a string!&quot;

@dispatch
def f(x: int):
    return &quot;This is an integer!&quot;
</code></pre>
<pre><code>$ ruff check test.py
test.py:10:5: F811 Redefinition of unused `f` from line 5
Found 1 error.
</code></pre>
<pre><code>$ ruff --version           
ruff 0.4.9
</code></pre>
<p>Is there a way to include it as a rule to ignore the redefinition when there is <code>@dispatch</code> before the function?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-06-18 05:48</div>
            <div class="timeline-body"><p>Hi</p>
<p>This is an interesting use of type annotations. I don't think it's feasible for us to add an exception for <code>plum</code>. Plum bends python semantics in a way that are difficult to understand for static analysis tools and we rather avoid coding framework specific behavior into ruff, unless it is a very popular framework.</p>
<p>I just tried your example with Pyright and it also reports error when type checking the code</p>
<pre><code>  /home/micha/astral/test/dispatch.py:4:5 - error: Function declaration &quot;f&quot; is obscured by a declaration of the same name (reportRedeclaration)
  /home/micha/astral/test/dispatch.py:12:3 - error: Argument of type &quot;Literal['test']&quot; cannot be assigned to parameter &quot;x&quot; of type &quot;int&quot; in function &quot;f&quot;
    &quot;Literal['test']&quot; is incompatible with &quot;int&quot; (reportArgumentType)
2 errors, 0 warnings, 0 information 

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-06-18 05:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/20970.html">astral-sh/ruff#20970</a> on 2025-10-20 13:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:53 UTC
    </footer>
</body>
</html>
