<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `--target-version pyXX` option to CLI - astral-sh/ruff #2857</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add <code>--target-version pyXX</code> option to CLI</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2857">#2857</a>
        opened by <a href="https://github.com/kdeldycke">@kdeldycke</a>
        on 2023-02-13 14:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kdeldycke">@kdeldycke</a></div>
            <div class="timeline-body"><p>This is a feature request to add a <code>--target-version pyXX</code> to ruff.</p>
<p>The idea is to mimick Black by allowing any subset of the following values:</p>
<ul>
<li><code>--target-version py37</code></li>
<li><code>--target-version py38</code></li>
<li><code>--target-version py39</code></li>
<li><code>--target-version py310</code></li>
<li><code>--target-version py311</code></li>
<li>...</li>
</ul>
<p>With the idea that <a href="https://github.com/psf/black/issues/751#issuecomment-473066811">you should include all Python versions that you want your code to run under (as Black does)</a>.</p>
<p>This exact format is <a href="https://github.com/adamchainz/blacken-docs/blob/cd4e60f68cbac1d7fd2a1586c3a8c4f0fbd196c7/src/blacken_docs/__init__.py#L263-L271">also what <code>blacken-docs</code> CLI supports</a>.</p>
<p>On a practical level, this will help me a lot as I already <a href="https://github.com/kdeldycke/workflows/blob/355d4ed18b8133660e5a2cda13f58602f0999fa1/.github/metadata.py#L337-L386">generates these flags in my build pipeline</a> for Black and blacken-docs. These are <a href="https://github.com/kdeldycke/workflows/blob/355d4ed18b8133660e5a2cda13f58602f0999fa1/.github/metadata.py#L325-L335">generated dynamically by inspecting the <code>pyproject.toml</code></a> of my projects.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2023-02-13 14:49</div>
            <div class="timeline-body"><p>For the record, this is adjacent to: <a href="https://github.com/charliermarsh/ruff/issues/2039">charliermarsh/ruff#2039</a> and <a href="https://github.com/charliermarsh/ruff/issues/2519">charliermarsh/ruff#2519</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-13 14:50</div>
            <div class="timeline-body"><p>Hey thanks for filing! This exact API actually <em>is</em> available on the CLI, I just hid it by accident in a prior commit ü§¶</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2023-02-13 14:56</div>
            <div class="timeline-body"><p>Oh wow that&#x27;s perfect! And incredibly fast!</p>
<p>I can test  #2859 as soon as a release is publish.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-13 14:59</div>
            <div class="timeline-body"><p>It <em>should</em> actually work even with existing versions (<code>ruff check /path/to/file.py --target-version py311</code>), it just won&#x27;t show up in <code>--help</code>. If you see otherwise, let me know!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-13 15:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2023-02-13 15:05</div>
            <div class="timeline-body"><p>Works indeed!</p>
<pre><code>$ ruff --version
ruff 0.0.245

$ ruff check --fix-only --exit-zero --diff --target-version 311 ./.github/metadata.py
error: invalid value &#x27;311&#x27; for &#x27;--target-version &lt;TARGET_VERSION&gt;&#x27;: Unknown version: 311 (try: &quot;py37&quot;)

For more information, try &#x27;--help&#x27;.

$ ruff check --fix-only --exit-zero --diff --target-version py311 ./.github/metadata.py
</code></pre>
<p>No rush then to publish a new version of ruff.</p>
<p>Feel free to close this issue! :)</p>
<p>And thanks a lot for ruff, I <a href="https://twitter.com/kdeldycke/status/1625120220636495872">played with it today</a> and <a href="https://github.com/kdeldycke/workflows/compare/v2.7.6...main#diff-93681562069e3d6bd247d402c10c794bf75baa6e1ff97676b50fda96343e251d">was able to get rid of <code>iSort</code>, <code>Pyupgrade</code>, <code>Pylint</code>, <code>Pycln</code> and <code>Pydocstyle</code></a>!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-13 15:06</div>
            <div class="timeline-body"><p>Amazing, thanks for giving Ruff a try :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2023-02-13 15:06</div>
            <div class="timeline-body"><p>Just FYI, it doesn&#x27;t supports multiple value yet, but that&#x27;s a detail:</p>
<pre><code>‚ùØ ruff check --fix-only --exit-zero --target-version py38 --target-version py311 ./.github/metadata.py
error: the argument &#x27;--target-version &lt;TARGET_VERSION&gt;&#x27; cannot be used multiple times

Usage: ruff check [OPTIONS] [FILES]...

For more information, try &#x27;--help&#x27;.
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:32 UTC
    </footer>
</body>
</html>
