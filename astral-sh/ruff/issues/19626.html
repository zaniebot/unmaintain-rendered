<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Failed to execute the command 'ruff.applyFormat'. - astral-sh/ruff #19626</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Failed to execute the command 'ruff.applyFormat'.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/19626">#19626</a>
        opened by <a href="https://github.com/dlefcoe">@dlefcoe</a>
        on 2025-07-29 21:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dlefcoe">@dlefcoe</a> on 2025-07-29 21:21</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>CTRL+shift+P</p>
<p><code>Ruff: Format document</code></p>
<p>Then get the popup error in vscode.</p>
<p><img width="1476" height="1154" alt="Image" src="https://github.com/user-attachments/assets/65ad7337-07e5-44ec-a721-414ba96f0a4c" /></p>
<h3>Version</h3>
<p>Version 2025.24.0,     The extension ships with ruff==0.12.0.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-29 22:26</div>
            <div class="timeline-body"><p>Thanks for the report!</p>
<p>Can you check if the same issue happens in the CLI? Or possibly attach some of the logs mentioned in the ruff-vscode <a href="https://github.com/astral-sh/ruff-vscode?tab=readme-ov-file#troubleshooting">troubleshooting</a> section?</p>
<p>I'm not seeing anything obvious in the screenshot that could cause the error, but I could be missing something.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @ntBre on 2025-07-29 22:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dlefcoe">@dlefcoe</a> on 2025-07-30 17:14</div>
            <div class="timeline-body"><p>i see this error message:</p>
<pre><code>2025-07-29 21:24:06.766630300  INFO Registering workspace: g:\My Drive\darren\02_programming\python
[Error - 9:24:07 PM] Stopping server timed out
2025-07-29 21:24:10.140568400  INFO Configuration file watcher successfully registered
[Error - 9:24:10 PM] Server process exited with code 1.

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-30 19:22</div>
            <div class="timeline-body"><p>I'm not sure that's enough information, at least for me. You can try collecting <code>trace</code>-level logs with the <code>ruff.logLevel</code> setting, as mentioned in the troubleshooting section, or maybe this will ring some bells for @dhruvmanila when he's back next week.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dlefcoe">@dlefcoe</a> on 2025-07-30 19:31</div>
            <div class="timeline-body"><p>It works on other projects (on the same PC), but not that specific project.
And it works on a different PC pointing to the same (Google Drive) folder.</p>
<p>Have you come across this, partially working issue, before ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-30 19:41</div>
            <div class="timeline-body"><p>No, I haven't run into that before. Could you try running the ruff CLI on that project, as I suggested earlier? That might help to disentangle whether this is an internal Ruff issue, an issue with Ruff's LSP server, or something in VS Code or the project itself.</p>
<p>From this description, it's not sounding like a Ruff issue to me, but I could be wrong.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dlefcoe">@dlefcoe</a> on 2025-07-31 18:51</div>
            <div class="timeline-body"><p>this is using the <code>Ruff: Show client logs</code> :</p>
<pre><code>2025-07-29 21:24:01.996 [info] Name: Ruff
2025-07-29 21:24:01.996 [info] Module: ruff
2025-07-29 21:24:01.996 [info] Python extension loading
2025-07-29 21:24:01.996 [info] Waiting for interpreter from python extension.
2025-07-29 21:24:02.039 [info] Python extension loaded
2025-07-29 21:24:02.099 [info] Using interpreter: c:\Users\admin\AppData\Local\Programs\Python\Python312\python.exe
2025-07-29 21:24:02.400 [info] Workspace settings for g:\My Drive\darren\02_programming\python: {
    &quot;nativeServer&quot;: &quot;auto&quot;,
    &quot;cwd&quot;: &quot;g:\\My Drive\\darren\\02_programming\\python&quot;,
    &quot;workspace&quot;: &quot;file:///g%3A/My%20Drive/darren/02_programming/python&quot;,
    &quot;path&quot;: [],
    &quot;ignoreStandardLibrary&quot;: true,
    &quot;interpreter&quot;: [
        &quot;c:\\Users\\admin\\AppData\\Local\\Programs\\Python\\Python312\\python.exe&quot;
    ],
    &quot;configuration&quot;: null,
    &quot;importStrategy&quot;: &quot;fromEnvironment&quot;,
    &quot;codeAction&quot;: {
        &quot;fixViolation&quot;: {
            &quot;enable&quot;: true
        },
        &quot;disableRuleComment&quot;: {
            &quot;enable&quot;: true
        }
    },
    &quot;lint&quot;: {
        &quot;enable&quot;: true,
        &quot;run&quot;: &quot;onType&quot;,
        &quot;args&quot;: [],
        &quot;preview&quot;: null,
        &quot;select&quot;: null,
        &quot;extendSelect&quot;: null,
        &quot;ignore&quot;: null
    },
    &quot;format&quot;: {
        &quot;args&quot;: [],
        &quot;preview&quot;: null
    },
    &quot;enable&quot;: true,
    &quot;organizeImports&quot;: true,
    &quot;fixAll&quot;: true,
    &quot;showNotifications&quot;: &quot;off&quot;,
    &quot;exclude&quot;: null,
    &quot;lineLength&quot;: null,
    &quot;configurationPreference&quot;: &quot;editorFirst&quot;,
    &quot;showSyntaxErrors&quot;: true,
    &quot;logLevel&quot;: null,
    &quot;logFile&quot;: null
}
2025-07-29 21:24:02.411 [info] Global settings: {
    &quot;nativeServer&quot;: &quot;auto&quot;,
    &quot;cwd&quot;: &quot;C:\\Users\\admin\\AppData\\Local\\Programs\\Microsoft VS Code&quot;,
    &quot;workspace&quot;: &quot;C:\\Users\\admin\\AppData\\Local\\Programs\\Microsoft VS Code&quot;,
    &quot;path&quot;: [],
    &quot;ignoreStandardLibrary&quot;: true,
    &quot;interpreter&quot;: [],
    &quot;configuration&quot;: null,
    &quot;importStrategy&quot;: &quot;fromEnvironment&quot;,
    &quot;codeAction&quot;: {
        &quot;fixViolation&quot;: {
            &quot;enable&quot;: true
        },
        &quot;disableRuleComment&quot;: {
            &quot;enable&quot;: true
        }
    },
    &quot;lint&quot;: {
        &quot;enable&quot;: true,
        &quot;run&quot;: &quot;onType&quot;,
        &quot;args&quot;: []
    },
    &quot;format&quot;: {
        &quot;args&quot;: []
    },
    &quot;enable&quot;: true,
    &quot;organizeImports&quot;: true,
    &quot;fixAll&quot;: true,
    &quot;showNotifications&quot;: &quot;off&quot;,
    &quot;configurationPreference&quot;: &quot;editorFirst&quot;,
    &quot;showSyntaxErrors&quot;: true
}
2025-07-29 21:24:02.698 [info] Falling back to bundled executable: c:\Users\admin\.vscode\extensions\charliermarsh.ruff-2025.24.0-win32-x64\bundled\libs\bin\ruff.exe
2025-07-29 21:24:02.961 [info] Resolved 'ruff.nativeServer: auto' to use the native server
2025-07-29 21:24:02.966 [info] Found Ruff 0.12.0 at c:\Users\admin\.vscode\extensions\charliermarsh.ruff-2025.24.0-win32-x64\bundled\libs\bin\ruff.exe
2025-07-29 21:24:02.966 [info] Server run command: c:\Users\admin\.vscode\extensions\charliermarsh.ruff-2025.24.0-win32-x64\bundled\libs\bin\ruff.exe server
2025-07-29 21:24:02.968 [info] Server: Start requested.
2025-07-29 21:24:05.297 [info] Server: Stop requested
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dlefcoe">@dlefcoe</a> on 2025-07-31 19:44</div>
            <div class="timeline-body"><p>After extensive testing, by systematically opening folders i found the offending folder.</p>
<p>it is a folder that was testing virtual environments (<code>test_venv_folder</code>).
the sub folders are:</p>
<ul>
<li>Include</li>
<li>Lib</li>
<li>my_code</li>
<li>Scripts     &lt;--- this is the specific folder that causes the Ruff error.</li>
</ul>
<p>but very specifically, the <code>Scripts</code> subfolder which contains the following files:</p>
<ul>
<li>activate</li>
<li>activate.bat</li>
<li>Activate.ps1</li>
<li>deactivate.bat</li>
<li>easy_install.exe</li>
<li>easy_install-3.9.exe</li>
<li>pip.exe</li>
<li>pip3.9.exe</li>
<li>pip3.exe</li>
<li>python.exe</li>
<li>pythonw.exe</li>
</ul>
<p>The odd thing is that this is a legacy folder that has not been touched for a few years, so how would the error have come about from this ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-31 20:00</div>
            <div class="timeline-body"><p>Thanks for the additional information! I may need to defer to @MichaReiser or @dhruvmanila, who know a lot more about our LSP than I do.</p>
<p>I think it could still be helpful if you could adjust your <code>ruff.logLevel</code> to <code>debug</code> or <code>trace</code>. I'm not sure there will be anything more helpful in those logs, but at least we'll get a lot more information compared to the <code>info</code> logs.</p>
<p>But Micha or Dhruv might have some ideas regardless.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-31 20:04</div>
            <div class="timeline-body"><p>Hmm, yeah not sure what's happening. The logs suggest that the server exits abnormally but it's a bit weird that it doesn't print any error message (which it normally should).</p>
<p>Can you try running ruff from the CLI (e.g. <code>uvx ruff check)</code> in the root folder or that problematic folder?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dlefcoe">@dlefcoe</a> on 2025-07-31 20:17</div>
            <div class="timeline-body"><p>yes,  this is the error message:</p>
<pre><code>(test_venv_folder) PS C:\Users\admin\Desktop\test_venv_folder\Scripts&gt;  uvx ruff check
uvx : The term 'uvx' is not recognized as the name of a cmdlet, function, script file, or operable program. Check the spelling of the name, or  
if a path was included, verify that the path is correct and try again.
At line:1 char:2
+  uvx ruff check
+  ~~~
    + CategoryInfo          : ObjectNotFound: (uvx:String) [], CommandNotFoundException
    + FullyQualifiedErrorId : CommandNotFoundException

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-31 20:19</div>
            <div class="timeline-body"><p>Unfortunately that's not a Ruff error. It looks like your system doesn't recognize <code>uvx</code> as a command. Maybe you can invoke this Ruff executable directly:</p>
<pre><code>c:\Users\admin\.vscode\extensions\charliermarsh.ruff-2025.24.0-win32-x64\bundled\libs\bin\ruff.exe
</code></pre>
<p>As in</p>
<pre><code class="language-shell">c:\Users\admin\.vscode\extensions\charliermarsh.ruff-2025.24.0-win32-x64\bundled\libs\bin\ruff.exe check
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dlefcoe">@dlefcoe</a> on 2025-07-31 20:20</div>
            <div class="timeline-body"><p>i get this:</p>
<pre><code>
(test_venv_folder) PS C:\Users\admin\Desktop\test_venv_folder\Scripts&gt; c:\Users\admin\.vscode\extensions\charliermarsh.ruff-2025.24.0-win32-x64\bundled\libs\bin\ruff.exe check
warning: No Python files found under the given path(s)
All checks passed!
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-08-04 08:24</div>
            <div class="timeline-body"><blockquote>
<p>O Registering workspace: g:\My Drive\darren\02_programming\python
[Error - 9:24:07 PM] Stopping server timed out</p>
</blockquote>
<p>I'm sorry. I don't think I've ever seen these logs before.</p>
<p>Can you try increasing the log level to <code>debug</code> (see instructioons <a href="https://github.com/astral-sh/ruff-vscode#troubleshooting">here</a>) and share the entire content in <code>Output</code> -&gt; <code>Ruff Language Server</code> (drop down right next to <code>Filter)</code> with us.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-09-17 07:19</div>
            <div class="timeline-body"><p>Closing as we don't have an MRE</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-09-17 07:19</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:18 UTC
    </footer>
</body>
</html>
