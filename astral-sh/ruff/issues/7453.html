<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change Ruff Rules url to include the rule-id - astral-sh/ruff #7453</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Change Ruff Rules url to include the rule-id</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/7453">#7453</a>
        opened by <a href="https://github.com/Crissal1995">@Crissal1995</a>
        on 2023-09-17 10:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Crissal1995">@Crissal1995</a> on 2023-09-17 10:48</div>
            <div class="timeline-body"><p>Hi,</p>
<p>I created a tool that uses Ruff under the hood to check my users' codebase, and warn them in case at least one Ruff violation is found.
In particular, I added (Github) annotations to their files in the PR page, adding a inline comment with the violated rule(s).</p>
<p>The problem, however, is that I would like to include an url to the violated rule, so that users can just click on the url in the annotation and land on the rule page, e.g., https://docs.astral.sh/ruff/rules/unused-import/</p>
<p>But the rule path is the rule name written in kebab-case, and not the rule id.</p>
<p>Since I parse the output returned from <code>ruff check</code>, this would be the easiest change; in the example, the url should become https://docs.astral.sh/ruff/rules/F401</p>
<p>Is it possible/feasible to change the urls? Or maybe setup a redirect, keeping only one page?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-09-18 04:56</div>
            <div class="timeline-body"><p>Hey, thanks for opening this issue.</p>
<blockquote>
<p>In particular, I added (Github) annotations to their files in the PR page, adding a inline comment with the violated rule(s).</p>
</blockquote>
<p>I am curious to know what the tool does as we do provide GitHub annotations via the <code>--format github</code> which then is picked up by GitHub to annotate the code in the pull request diff.</p>
<blockquote>
<p>The problem, however, is that I would like to include an url to the violated rule, so that users can just click on the url in the annotation and land on the rule page, e.g., <a href="https://docs.astral.sh/ruff/rules/unused-import/">docs.astral.sh/ruff/rules/unused-import</a></p>
</blockquote>
<p>We provide the URL in the JSON output (<code>ruff check --format json</code>):</p>
<pre><code class="language-json">[
  {
    &quot;code&quot;: &quot;F821&quot;,
    &quot;end_location&quot;: {
      &quot;column&quot;: 6,
      &quot;row&quot;: 3
    },
    &quot;filename&quot;: &quot;/Users/dhruv/playground/ruff/fstring.py&quot;,
    &quot;fix&quot;: null,
    &quot;location&quot;: {
      &quot;column&quot;: 5,
      &quot;row&quot;: 3
    },
    &quot;message&quot;: &quot;Undefined name `x`&quot;,
    &quot;noqa_row&quot;: 6,
    &quot;url&quot;: &quot;https://docs.astral.sh/ruff/rules/undefined-name&quot;
  },
  {
    &quot;code&quot;: &quot;F821&quot;,
    &quot;end_location&quot;: {
      &quot;column&quot;: 14,
      &quot;row&quot;: 5
    },
    &quot;filename&quot;: &quot;/Users/dhruv/playground/ruff/fstring.py&quot;,
    &quot;fix&quot;: null,
    &quot;location&quot;: {
      &quot;column&quot;: 13,
      &quot;row&quot;: 5
    },
    &quot;message&quot;: &quot;Undefined name `y`&quot;,
    &quot;noqa_row&quot;: 6,
    &quot;url&quot;: &quot;https://docs.astral.sh/ruff/rules/undefined-name&quot;
  }
]
</code></pre>
<p>I hope this helps for your use-case. Feel free to ask any other questions if not.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2023-09-18 04:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @dhruvmanila on 2023-09-18 04:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Crissal1995">@Crissal1995</a> on 2023-09-18 17:00</div>
            <div class="timeline-body"><p>Hey, thanks for the detailes reply!</p>
<p>For the first bit, actually I annotate the code in a separate step (not during <code>ruff check</code>), but I will give it a try.</p>
<p>I was instead oblivious of the output format, that looks really nice and complete - and easier to parse than stdout logs ðŸ« .</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-09-18 17:27</div>
            <div class="timeline-body"><p>Sorry there was a typo. It's the <code>--format</code> flag and not the <code>--output</code> flag ðŸ˜…</p>
<pre><code>      --format &lt;FORMAT&gt;
          Output serialization format for violations [env: RUFF_FORMAT=] [possible values: text, json, json-lines, junit, grouped, github, gitlab, pylint, azure]
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:31:22 UTC
    </footer>
</body>
</html>
