<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>False Positive YODA Condition SIM300 - astral-sh/ruff #11940</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>False Positive YODA Condition SIM300</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11940">#11940</a>
        opened by <a href="https://github.com/lukasz-flyrlabs">@lukasz-flyrlabs</a>
        on 2024-06-19 13:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/lukasz-flyrlabs">@lukasz-flyrlabs</a> on 2024-06-19 13:06</div>
            <div class="timeline-body"><p>Keywords searched:
&quot;YODA&quot;, &quot;SIM300&quot;</p>
<p>Description:
Ruff incorrectly flags a comparison between a setting from dynaconf (str) and an enum value (str) as a YODA condition. The condition being flagged is not a YODA condition as it involves a configuration setting and an enum, not a plain constant or literal.</p>
<p>Minimal code snippet to reproduce the bug:</p>
<pre><code class="language-python">from enum import Enum
from dynaconf import Dynaconf

class PriceSource(Enum):
    source1 = &quot;source1&quot;
    source2 = &quot;source2&quot;

settings = Dynaconf(settings_files=[&quot;settings.toml&quot;])
# settings.toml content:
# [default]
# PRICE_SOURCE = &quot;source1&quot;

assert settings.PRICE_SOURCE == PriceSource.source1
</code></pre>
<p>ruff==0.4.9</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trag1c">@trag1c</a> on 2024-06-19 13:09</div>
            <div class="timeline-body"><p>Corrected code block :)</p>
<pre><code class="language-py">from enum import Enum
from dynaconf import Dynaconf

class PriceSource(Enum):
    source1 = &quot;source1&quot;
    source2 = &quot;source2&quot;

settings = Dynaconf(settings_files=[&quot;settings.toml&quot;])
# settings.toml content:
# [default]
# PRICE_SOURCE = &quot;source1&quot;

assert settings.PRICE_SOURCE == PriceSource.source1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-06-21 06:08</div>
            <div class="timeline-body"><p>@AlexWaygood any thoughts on this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-06-21 06:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-06-21 11:26</div>
            <div class="timeline-body"><p>Strictly speaking, I suppose this is a false positive. But to me, it seems like the rule is working as designed, and the heuristic it uses seems pretty reasonable to me. I'm not sure we should change anything here as I haven't seen evidence (yet) that this kind of false positive is particularly common. My advice would be to just <code># noqa</code> it in this instance (or switch off the rule if you find that you have many false positives from this rule on your code).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-23 16:27</div>
            <div class="timeline-body"><p>Yeah, I think this is actually reasonable. I'd suggest not using <code>SCREAMING_SNAKE_CASE</code> for the setting value if it isn't a constant.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-06-23 16:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:13 UTC
    </footer>
</body>
</html>
