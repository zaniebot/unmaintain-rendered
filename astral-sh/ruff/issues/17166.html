<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiple paths for ignoring same rules in lint.per-file-ignores - astral-sh/ruff #17166</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Multiple paths for ignoring same rules in lint.per-file-ignores</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/17166">#17166</a>
        opened by <a href="https://github.com/VladimirPodolian">@VladimirPodolian</a>
        on 2025-04-03 08:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/VladimirPodolian">@VladimirPodolian</a></div>
            <div class="timeline-body">Summary
<p>Hi! I would like to reduce copy-pasting in Ruff configurations, specifically in the <code>lint.per-file-ignores</code> block. I have the same rules to ignore for <code>**/page_object/**</code>, <code>**/src/**</code>, and <code>**/data/**</code>  in <code>lint.per-file-ignores</code> block. However, it seems that it’s not possible to group these paths under a single rules block simultaneously. Correct me if I&#x27;m wrong</p>
<p>Actual:</p>
<pre><code>[lint.per-file-ignores]
&quot;**/tests/**&quot; = [
    &quot;ANN001&quot;,  # Missing type annotation for test function argument
    &quot;ANN201&quot;,  # Missing return type annotation for public test function
    &quot;S101&quot;,  # Use of `assert` detected
    &quot;D103&quot;,  # Missing docstring in public function
    &quot;F811&quot;,  # Redefinition of &quot;unused&quot; fixture
    &quot;T201&quot;,  # Usage of print detected
    &quot;ARG001&quot;,  # Unused test function argument
    &quot;RET503&quot;,  # Missing explicit `return` at the end of function able to return non-`None` value
    &quot;PLR0913&quot;,  # Too many arguments in test function definition (6 &gt; 5)
]
&quot;**/page_object/**&quot; = [
    &quot;ANN204&quot;,  # Missing return type annotation for special method `__init__`
    &quot;D101&quot;,  # Missing docstring in public class
    &quot;D104&quot;,  # Missing docstring in public package
    &quot;D105&quot;,  # Missing docstring in magic method
    &quot;D107&quot;,  # Missing docstring in `__init__`
    &quot;EM101&quot;,  # Exception must not use a string literal, assign to variable first
    &quot;N999&quot;,  # Invalid module name: &#x27;WrapperMixin&#x27; (CamelCase error)
    &quot;TRY003&quot;,  # Avoid specifying long messages outside the exception class
]
&quot;**/src/**&quot; = [
    &quot;ANN204&quot;,  # Missing return type annotation for special method `__init__`
    &quot;D101&quot;,  # Missing docstring in public class
    &quot;D104&quot;,  # Missing docstring in public package
    &quot;D105&quot;,  # Missing docstring in magic method
    &quot;D107&quot;,  # Missing docstring in `__init__`
    &quot;EM101&quot;,  # Exception must not use a string literal, assign to variable first
    &quot;N999&quot;,  # Invalid module name: &#x27;WrapperMixin&#x27; (CamelCase error)
    &quot;TRY003&quot;,  # Avoid specifying long messages outside the exception class
]
&quot;**/data/**&quot; = [
    &quot;ANN204&quot;,  # Missing return type annotation for special method `__init__`
    &quot;D101&quot;,  # Missing docstring in public class
    &quot;D104&quot;,  # Missing docstring in public package
    &quot;D105&quot;,  # Missing docstring in magic method
    &quot;D107&quot;,  # Missing docstring in `__init__`
    &quot;EM101&quot;,  # Exception must not use a string literal, assign to variable first
    &quot;N999&quot;,  # Invalid module name: &#x27;WrapperMixin&#x27; (CamelCase error)
    &quot;TRY003&quot;,  # Avoid specifying long messages outside the exception class
]
</code></pre>
<p>Expected:</p>
<pre><code>[lint.per-file-ignores]
&quot;**/tests/**&quot; = [
    &quot;ANN001&quot;,  # Missing type annotation for test function argument
    &quot;ANN201&quot;,  # Missing return type annotation for public test function
    &quot;S101&quot;,  # Use of `assert` detected
    &quot;D103&quot;,  # Missing docstring in public function
    &quot;F811&quot;,  # Redefinition of &quot;unused&quot; fixture
    &quot;T201&quot;,  # Usage of print detected
    &quot;ARG001&quot;,  # Unused test function argument
    &quot;RET503&quot;,  # Missing explicit `return` at the end of function able to return non-`None` value
    &quot;PLR0913&quot;,  # Too many arguments in test function definition (6 &gt; 5)
]
&quot;**/src/**, **/data/**, **/page_object/**&quot; = [
    &quot;ANN204&quot;,  # Missing return type annotation for special method `__init__`
    &quot;D101&quot;,  # Missing docstring in public class
    &quot;D104&quot;,  # Missing docstring in public package
    &quot;D105&quot;,  # Missing docstring in magic method
    &quot;D107&quot;,  # Missing docstring in `__init__`
    &quot;EM101&quot;,  # Exception must not use a string literal, assign to variable first
    &quot;N999&quot;,  # Invalid module name: &#x27;WrapperMixin&#x27; (CamelCase error)
    &quot;TRY003&quot;,  # Avoid specifying long messages outside the exception class
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-03 08:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-03 08:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-03 08:26</div>
            <div class="timeline-body"><p>This does make sense. I always liked the syntax of node&#x27;s globbing</p>
<pre><code>const imagesAlt = globSync(&#x27;{css,public}/*.{png,jpeg}&#x27;)
</code></pre>
<p>But I don&#x27;t think this is supported by Rust&#x27;s glob crate (CC: @BurntSushi)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-04-03 12:16</div>
            <div class="timeline-body"><p>Yeah brace expansion isn&#x27;t supported by <code>glob</code> but is supported by <code>globset</code>, but <code>globset</code> doesn&#x27;t have the directory traversal APIs that <code>glob</code> has.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-04-04 18:09</div>
            <div class="timeline-body"><p>I think we already use <code>globset</code> for this.</p>
<pre><code>❯ ruff check --output-format concise  .
examples/example.py:1:8: F401 [*] `os` imported but unused
tests/test.py:1:8: F401 [*] `os` imported but unused
Found 2 errors.
[*] 2 fixable with the `--fix` option.

❯ ruff check --config &quot;lint.per-file-ignores = {&#x27;{tests,examples}/*&#x27;=[&#x27;F401&#x27;]}&quot; --output-format concise  .
All checks passed!
</code></pre>
<p>@VladimirPodolian could you try using this brace syntax and let me know if it works for you?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CatBraaain">@CatBraaain</a> on 2025-09-11 03:39</div>
            <div class="timeline-body"><p>The Brace syntax works for me.
It looks like Ruff uses globset for standard glob matching, while implementing custom support for negated patterns (using a leading !) and directory-only patterns (using a trailing /).</p>
<p>Example:</p>
<pre><code>[tool.ruff.lint.per-file-ignores]
&quot;!{src,tests}/**.py&quot; = [
    &quot;T201&quot;, # flake8-print
]
</code></pre>
<p>ref:</p>
<ul>
<li><a href="https://docs.rs/globset/latest/globset/#syntax">globset document</a></li>
<li><a href="https://github.com/astral-sh/ruff/blob/a3ec8ca9dfb484775f38712681d1174260d2bf4b/crates/ty_project/src/glob/exclude.rs">ruff source code</a></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-09-15 14:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:46 UTC
    </footer>
</body>
</html>
