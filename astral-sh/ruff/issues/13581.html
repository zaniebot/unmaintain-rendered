<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B905's autofix sets strict=False, but the suggested fix is strict=True - astral-sh/ruff #13581</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>B905's autofix sets strict=False, but the suggested fix is strict=True</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13581">#13581</a>
        opened by <a href="https://github.com/mdbernard">@mdbernard</a>
        on 2024-10-01 04:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mdbernard">@mdbernard</a></div>
            <div class="timeline-body"><p>The <a href="https://docs.astral.sh/ruff/rules/zip-without-explicit-strict/#zip-without-explicit-strict-b905">docs for B905</a> state the suggested fix is to use <code>strict=True</code>, but the autofix introduced <a href="https://github.com/astral-sh/ruff/pull/9176">here</a> autofixes with <code>strict=False</code>.</p>
<p>Either the docs or the autofix should be updated to match the other.</p>
<p>I would argue that the autofix should be changed to <code>strict=True</code>, since that is the option less likely to cause unexpected runtime behavior for users. It might cause runtime exceptions to be raised, but I personally would prefer those to silently continuing with potentially unintended behavior.</p>
<hr />
<p>Keywords: B905, zip-without-explicit-strict</p>
<p>Current ruff version: 0.6.6</p>
<p>Minimal snippet:</p>
<pre><code class="language-python">zip(a, b)
</code></pre>
<p>Command invoked:
<code>ruff check example.py --target-version=py311 --select=B905</code></p>
<p>Output:</p>
<pre><code>example.py:1:1: B905 [*] `zip()` without an explicit `strict=` parameter
  |
1 | zip(a, b)
  | ^^^^^^^^^ B905
  |
  = help: Add explicit `strict=False`

Found 1 error.
[*] 1 fixable with the `--fix` option.
</code></pre>
<p>Expected output:</p>
<pre><code>...
  = help: Add explicit `strict=True`
...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-01 05:01</div>
            <div class="timeline-body"><p>I wonder if we use <code>strict=False</code> to avoid changing the semantics / behavior of the code? I think this is probably correct, but we should recommend adding <code>strict</code> not necessarily <code>strict=False</code> in the message?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @zanieb on 2024-10-01 05:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mdbernard">@mdbernard</a> on 2024-10-01 05:04</div>
            <div class="timeline-body"><p>That also works! Just removing the autofix altogether and letting the user decide what they want. Based on personal experience I'd almost always want <code>strict=True</code>, but I see the counter-argument that it changes behavior, so it might not be a desirable autofix.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-01 05:09</div>
            <div class="timeline-body"><p>I don't think we should remove the autofix entirely though, just change the message.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-10-07 11:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:51:10 UTC
    </footer>
</body>
</html>
