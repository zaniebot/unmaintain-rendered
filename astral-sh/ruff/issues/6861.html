<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruff and Black disagree on spacing between slice indices - astral-sh/ruff #6861</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ruff and Black disagree on spacing between slice indices</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/6861">#6861</a>
        opened by <a href="https://github.com/danparizher">@danparizher</a>
        on 2023-08-25 02:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/danparizher">@danparizher</a> on 2023-08-25 02:35</div>
            <div class="timeline-body"><p>When running <code>ruff . --fix</code> on this line of code, it deletes a space between <code>1</code> and <code>:</code>, which is inconsistent with the Black formatter.</p>
<pre><code class="language-diff">- self.reduce_section_group(merged_sections[i - 1 : i + 2])
+ self.reduce_section_group(merged_sections[i - 1: i + 2])
</code></pre>
<p>Running <code>black .</code> reverts this change</p>
<p>Another snippet example:</p>
<pre><code class="language-diff">- for row in self.data[self.cur_page * 10 - 10 : self.cur_page * 10]
+ for row in self.data[self.cur_page * 10 - 10: self.cur_page * 10]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-08-25 02:43</div>
            <div class="timeline-body"><p>Can you share your Ruff configuration?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danparizher">@danparizher</a> on 2023-08-25 02:50</div>
            <div class="timeline-body"><p>@charliermarsh I have found that it originates from Nursery Rule <code>E203</code>. So it is a disagreement between Pycodestyle and Black?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-08-25 03:44</div>
            <div class="timeline-body"><p>@Arborym - Yeah, that's right. We don't enable any rules by default that conflict with Black, but Pycodestyle (and, by extension, Flake8) contain some, a few of which would be enabeld via <code>NURSERY</code>. See: https://black.readthedocs.io/en/stable/guides/using_black_with_other_tools.html#flake8. I'd recommend turning off that rule explicitly if you're using the nursery set alongside Black.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2023-08-25 03:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-08-25 21:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2023-09-17 17:56</div>
            <div class="timeline-body"><p>This issue now extends to Ruff's own formatter. But I assume the answer would be the same: Just disable that rule. So I won't open a new issue for it.</p>
<p>Also https://github.com/astral-sh/ruff/discussions/7305#discussioncomment-6980767</p>
<blockquote>
<p>[...] there are some unanswered questions about how the linter/formatter configuration should co-exist.</p>
<p>There's no definite timeline but we plan to add configuration support as part of our <a href="https://github.com/astral-sh/ruff/milestone/5">beta release</a>. Expect it to take a couple of weeks, maybe even more, depending on the user feedback.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/7259.html">astral-sh/ruff#7259</a> on 2023-09-21 19:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:51 UTC
    </footer>
</body>
</html>
