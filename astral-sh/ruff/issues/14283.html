<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Infinite loop] PLC0414 conflicts with I002 if a useless alias is required - astral-sh/ruff #14283</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Infinite loop] PLC0414 conflicts with I002 if a useless alias is required</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/14283">#14283</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2024-11-11 15:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dscorbett">@dscorbett</a> on 2024-11-11 15:21</div>
            <div class="timeline-body"><p><a href="https://docs.astral.sh/ruff/rules/useless-import-alias/"><code>useless-import-alias</code> (PLC0414)</a> conflicts with <a href="https://docs.astral.sh/ruff/rules/missing-required-import/"><code>missing-required-import</code> (I002)</a> in Ruff 0.7.3 if the latter rule is configured to require an alias that the former rule considers useless.</p>
<pre><code class="language-console">$ echo 1 | ruff check --isolated --select I002,PLC0414 --config 'lint.isort.required-imports = [&quot;import numpy as numpy&quot;]' - --unsafe-fixes --fix

error: Failed to converge after 100 iterations.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BInfinite%20loop%5D

...quoting the contents of `-`, the rule codes I002, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
import numpy
1
-:1:1: I002 Missing required import: `import numpy as numpy`
Found 101 errors (100 fixed, 1 remaining).
[*] 1 fixable with the --fix option.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @AlexWaygood on 2024-11-11 15:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @AlexWaygood on 2024-11-11 15:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14287.html">astral-sh/ruff#14287</a> on 2024-11-11 22:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2024-11-11 22:31</div>
            <div class="timeline-body"><p>Thanks for this!</p>
<p>I think the simplest-to-implement fix is to let the user-specified config win and use I002 (that's what I do in the linked PR).</p>
<p>But it feels a little awkward because surely they wouldn't have meant to put that as the required import... Maybe in some future iteration a warning could be emitted in this case. At the moment, such a warning isn't quite precedented since it involves actually checking that the supplied config has a useless alias (as opposed to just reporting that two rules are known to always conflict, say). So I imagine some thought would have to go into it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> removed by @dylwil3 on 2024-11-11 22:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dylwil3 on 2024-11-14 21:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dylwil3 on 2024-11-14 21:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/18365.html">astral-sh/ruff#18365</a> on 2025-05-29 10:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:54 UTC
    </footer>
</body>
</html>
