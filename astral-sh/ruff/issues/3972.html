<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&quot;# noqa&quot; is ignored when `per-file-ignores` is provided - astral-sh/ruff #3972</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>&quot;# noqa&quot; is ignored when `per-file-ignores` is provided</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/3972">#3972</a>
        opened by <a href="https://github.com/DmytroLitvinov">@DmytroLitvinov</a>
        on 2023-04-14 07:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/DmytroLitvinov">@DmytroLitvinov</a> on 2023-04-14 07:04</div>
            <div class="timeline-body"><p>Hi there.
I am trying to integrate <code>ruff</code> as a possible replacement of <code>flake8</code> and I see that behavior of <code>per-file-ignores</code> option is not the same as in <code>flake8</code>.</p>
<ul>
<li><code>flake8</code> settings</li>
</ul>
<pre><code>[flake8]
max-line-length = 120
per-file-ignores =
    __init__.py:F401,F403
</code></pre>
<p>flake8 respects <code>noqa</code> in that case, but not <code>ruff</code>. Not sure is it expected behavior for <code>ruff</code> or not?</p>
<ul>
<li>Code snippet to reproduce the issue:</li>
</ul>
<pre><code class="language-python"># __init__.py file
&quot;&quot;&quot;
See what is changed since then - https://github.com/ui/django-post_office/compare/3fead089a4e7e7fc2ae5ab56383f4ebf64c8777b...master  # noqa: E501
After you adapt it, then please change hash commit in url.
&quot;&quot;&quot;
</code></pre>
<ul>
<li>Ruff settings:</li>
</ul>
<pre><code># pyproject.toml
[tool.ruff]
line-length = 120
# Sync with flake8 configuration
[tool.ruff.per-file-ignores]
&quot;__init__.py&quot; = [&quot;F401&quot;, &quot;F403&quot;]
</code></pre>
<ul>
<li>Ruff version: 0.0.261</li>
<li>Ruff issue: <code>__init__.py:2:121: E501 Line too long (144 &gt; 120 characters)</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DmytroLitvinov">@DmytroLitvinov</a> on 2023-04-14 07:12</div>
            <div class="timeline-body"><p>As far as I see right now also, it is not about <code>per-file-ignores</code> option, but because of docstrings.</p>
<pre><code class="language-python">&quot;&quot;&quot;
# docsting.py
https://github.com/robbitt07/django_boilerplate/blob/fcd03f03e9e9e54088cf69cd3c4bc83eabfd2666/utils/storage_backends.py#L8  # noqa: E501
&quot;&quot;&quot;
</code></pre>
<p>Issue: <code>docstring.py:2:121: E501 Line too long (138 &gt; 120 characters)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-14 12:43</div>
            <div class="timeline-body"><p>Yeah that's correct -- we don't support <code># noqa</code> comments within multi-line strings. There's a note on it <a href="https://beta.ruff.rs/docs/configuration/#error-suppression">here</a>. Instead, we respect <code># noqa</code> comments at the end of docstrings, like:</p>
<pre><code class="language-py">&quot;&quot;&quot;
# docsting.py
https://github.com/robbitt07/django_boilerplate/blob/fcd03f03e9e9e54088cf69cd3c4bc83eabfd2666/utils/storage_backends.py#L8 
&quot;&quot;&quot;  # noqa: E501
</code></pre>
<p>Flake8 respects <em>either</em> variant, so changing this should retain Flake8 compatibility.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-04-14 12:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../GenericMappingTools/pygmt/pulls/2747.html">GenericMappingTools/pygmt#2747</a> on 2023-10-15 10:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:08 UTC
    </footer>
</body>
</html>
