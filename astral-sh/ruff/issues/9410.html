<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement more flake8-bugbear rules - astral-sh/ruff #9410</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Implement more flake8-bugbear rules</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/9410">#9410</a>
        opened by <a href="https://github.com/mikaelarguedas">@mikaelarguedas</a>
        on 2024-01-06 17:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mikaelarguedas">@mikaelarguedas</a> on 2024-01-06 17:45</div>
            <div class="timeline-body"><p>(B035 aka RUF011 implemented in bugbear https://github.com/PyCQA/flake8-bugbear/issues/391)</p>
<ul>
<li>[ ] B035: Found dict comprehension with a static key - either a constant value or variable not from the comprehension expression. This will result in a dict with a single key that was repeatedly overwritten.</li>
</ul>
<details><summary>bugbear version's catches more problematic cases</summary>

<pre><code class="language-python">CONST_KEY_VAR = &quot;KEY&quot;

# bad
bad_const_key_var = {CONST_KEY_VAR: i for i in range(3)}

# bad - variabe not from generator
v3 = 1
bad_var_not_from_nested_tuple = {v3: k for k, (v1, v2) in {&quot;a&quot;: (1, 2)}.items()}
</code></pre>
<p>RUF012 doesnt report any error</p>
<p>flake8-bugbear reports:</p>
<pre><code>B035 Static key in dict comprehension 'CONST_KEY_VAR'.
B035 Static key in dict comprehension 'v3'.
</code></pre>
</details>

<ul>
<li>[ ] B036: Found except BaseException: without re-raising (no raise in the top-level of the except block). This catches all kinds of things (Exception, SystemExit, KeyboardInterrupt...) and may prevent a program from exiting as expected.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-06 19:42</div>
            <div class="timeline-body"><p>Nice, we can definitely catch those in <code>B035</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @charliermarsh on 2024-01-06 19:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2024-01-06 19:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-01-06 20:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-06 20:29</div>
            <div class="timeline-body"><p>I'm gonna do this for fun, and move the rule to <code>B035</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/9411.html">astral-sh/ruff#9411</a> on 2024-01-06 20:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-01-06 20:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikaelarguedas">@mikaelarguedas</a> on 2024-01-06 20:56</div>
            <div class="timeline-body"><p>Awesome thanks!</p>
<p>2 newbies questions:</p>
<ul>
<li>Should this ticket stay opened for the implementation of B036 ?</li>
<li>How does the moving / equaling error codes work ? is there a track somewhere of error codes that are equivalent ? (losely related to my reflection for https://github.com/astral-sh/ruff/issues/9354 where making equivalent rules visible could be a good first step)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-06 22:11</div>
            <div class="timeline-body"><p>@mikaelarguedas -- Ah yeah, I actually missed that second bullet. But I'm going to move that into #3758 and generalize the ticket since it's about a new rule.</p>
<p>We can rename rules and have them continue to work internally, so e.g. if folks have <code>RUF011</code> as a <code># noqa</code> or similar it will continue to work with a redirect. We have some notes on rule aliasing here (https://github.com/astral-sh/ruff/issues/2186), but we're planning to do a big overhaul of the rule categories and hierarchies some time this year anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikaelarguedas">@mikaelarguedas</a> on 2024-01-06 22:41</div>
            <div class="timeline-body"><blockquote>
<p>But I'm going to move that into https://github.com/astral-sh/ruff/issues/3758 and generalize the ticket since it's about a new rule.</p>
</blockquote>
<p>:+1:</p>
<blockquote>
<p>We can rename rules and have them continue to work internally, so e.g. if folks have RUF011 as a # noqa or similar it will continue to work with a redirect.</p>
</blockquote>
<p>Great! Does this appear on the website in the category of the relevant flake8 plugin ?</p>
<blockquote>
<p>We have some notes on rule aliasing here (https://github.com/astral-sh/ruff/issues/2186), but we're planning to do a big overhaul of the rule categories and hierarchies some time this year anyway.</p>
</blockquote>
<p>:heart:</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:11 UTC
    </footer>
</body>
</html>
