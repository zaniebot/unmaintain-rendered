<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Actions output is missing file names and line numbers - astral-sh/ruff #1693</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>GitHub Actions output is missing file names and line numbers</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/1693">#1693</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-01-06 15:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-06 15:03</div>
            <div class="timeline-body"><p>See: https://github.com/pypa/hatch/pull/702#issuecomment-1373727049.</p>
<p>Here's an example: https://github.com/pypa/hatch/actions/runs/3853184547/jobs/6565955257.</p>
<p>The action comments appear in the right spot in the &quot;Files changed&quot; tabs, but should the locations also be visible in the logs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../pypa/hatch/pulls/702.html">pypa/hatch#702</a> on 2023-01-06 15:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2023-01-06 15:16</div>
            <div class="timeline-body"><p>I think it should also be visible in the logs because the errors are from a newly released version of Ruff rather than any files I actually changed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-06 15:20</div>
            <div class="timeline-body"><p>Are you suggesting that the line numbers and such were visible before, but are no longer visible?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2023-01-06 15:24</div>
            <div class="timeline-body"><p>Yes definitely but I don't remember how long ago</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-06 16:43</div>
            <div class="timeline-body"><p>Thanks, I'll look into it today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-06 17:07</div>
            <div class="timeline-body"><p>Relevant: https://github.com/golangci/golangci-lint-action/issues/119</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1696.html">astral-sh/ruff#1696</a> on 2023-01-06 17:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-06 17:22</div>
            <div class="timeline-body"><p>I think this is &quot;working as intended&quot; from the perspective of GitHub's workflow commands.</p>
<p>Users can disable workflow commands (so they won't get inline comments, just build logs) with <code>--format text</code> or setting <code>GITHUB_ACTIONS=false</code> when invoking Ruff.</p>
<p>But the other thing we can do is add explicit additional text to the logs, even if it won't be picked up by GitHub, like:</p>
<img width="884" alt="Screen Shot 2023-01-06 at 12 22 00 PM" src="https://user-images.githubusercontent.com/1309177/211064415-b4cc3df5-0ec3-48b8-b429-32f469a869ed.png">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2023-01-06 17:25</div>
            <div class="timeline-body"><p>Yes that would be nice! Do you know why in that example output the first error was showing the file and line numbers and the rest weren't? Was the first error just malformed and was accidentally being printed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-06 17:26</div>
            <div class="timeline-body"><p>I'm wondering that too. Not sure yet... Debugging it now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-06 20:59</div>
            <div class="timeline-body"><p>Two fixes here:</p>
<ul>
<li>The GitHub reporting is now opt-in (<code>ruff --format=github .</code>) instead of auto-detecting via the <code>GITHUB_ACTIONS</code> env var.</li>
<li>When running with <code>--format=github</code>, we now preserve the location information:</li>
</ul>
<p><img src="https://user-images.githubusercontent.com/1309177/211098952-40052821-9aed-4b96-9baa-9fbea44c4c4a.png" alt="Screen Shot 2023-01-06 at 3 08 06 PM" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-06 20:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2023-01-06 21:09</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:07 UTC
    </footer>
</body>
</html>
