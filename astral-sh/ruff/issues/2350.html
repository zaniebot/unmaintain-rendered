<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>allow to specify output format for --format=text - astral-sh/ruff #2350</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>allow to specify output format for --format=text</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2350">#2350</a>
        opened by <a href="https://github.com/spaceone">@spaceone</a>
        on 2023-01-30 12:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/spaceone">@spaceone</a></div>
            <div class="timeline-body"><p>flake8 supports specifying the output format via an command line argument: <code>flake8 --format &#x27;%(path)s&#x27;</code></p>
<p>allowed specifiers are:
* code
* text
* path
* row
* col</p>
<p>ruff could support <code>--error-format &#x27;{path}:{row}:{col} {code}: {text}</code> when <code>--format=text</code>.</p>
<p>This would allow me to easily open all files with specific violations in my editor (<code>vim -p $(ruff --select E --error-format &#x27;{path}&#x27;)</code> )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-30 12:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ngnpope">@ngnpope</a> on 2023-01-30 12:17</div>
            <div class="timeline-body"><p>You&#x27;re likely to end up with duplicates like that if there are multiple violations in a file. So you&#x27;d want another flag to avoid duplicate rows, or have <code>ruff</code> deduplicate automatically, or use <code>ruff --select E --error-format &#x27;{path}&#x27; | sort --unique</code>.</p>
<p>Also note that <code>tabpagemax</code> is set to <code>10</code> by default, so you may want to up that when using <code>-p</code>...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-30 12:20</div>
            <div class="timeline-body"><p>I kind of intentionally didn&#x27;t do this because it felt like it&#x27;d add a good deal of complexity, and that in most cases these problems would be solvable by chaining different tools. E.g., in this case, couldn&#x27;t you pipe the output, split at <code>:</code>, and take everything before it to see the list of paths?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ngnpope">@ngnpope</a> on 2023-01-30 12:20</div>
            <div class="timeline-body"><p>This would also be nice for formatting the output when using <code>--statistics</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ngnpope">@ngnpope</a> on 2023-01-30 12:24</div>
            <div class="timeline-body"><blockquote>
<p>...and that in most cases these problems would be solvable by chaining different tools.</p>
</blockquote>
<p>True, this is possible, and you don&#x27;t even need to fiddle splitting text strings:</p>
<pre><code>ruff check --format=json . | jq --raw-output .[].filename | sort --unique
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/spaceone">@spaceone</a> on 2023-01-30 13:00</div>
            <div class="timeline-body"><blockquote>
<p>You&#x27;re likely to end up with duplicates like that if there are multiple violations in a file. So you&#x27;d want another flag to avoid duplicate rows, or have <code>ruff</code> deduplicate automatically, or use <code>ruff --select E --error-format &#x27;{path}&#x27; | sort --unique</code>.</p>
</blockquote>
<p>jeah, that&#x27;s not something I expect <code>ruff</code> to do.</p>
<blockquote>
<p>Also note that <code>tabpagemax</code> is set to <code>10</code> by default, so you may want to up that when using <code>-p</code>...</p>
</blockquote>
<p>yes, I have <a href="https://github.com/spaceone/dotfiles/blob/master/vimrc#L8">set tabpagemax=30 in vimrc</a>.</p>
<p>Currently I am using <code>vim -p $(ruff --select SIM115 --fix $files | sed -rne &#x27;s/:.*//gp&#x27;)</code>.
So this feature would just allow me to not always write that much/complex.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/goodspark">@goodspark</a> on 2023-05-08 18:18</div>
            <div class="timeline-body"><p>FWIW, this will make Ruff even easier to drop in with VSCode&#x27;s built-in flake8 integration, which fails bc VSCode sends <code>--format &quot;%(row)d,%(col)d,%(code).1s,%(code)s:%(text)s&quot;</code> to Ruff. Alternatively, one could just use the Ruff VSCode extension.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-30 09:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ankush">@ankush</a> on 2024-04-07 10:18</div>
            <div class="timeline-body"><p>pylint format works with vim&#x27;s quickfix (better than just opening file as this will also use location and error message)</p>
<pre><code>nvim -q &lt;(ruff check --output-format=pylint)
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:31 UTC
    </footer>
</body>
</html>
