<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to not parse a nested pyproject.toml? - astral-sh/ruff #1812</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to not parse a nested pyproject.toml?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/1812">#1812</a>
        opened by <a href="https://github.com/gbolmier">@gbolmier</a>
        on 2023-01-12 10:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/gbolmier">@gbolmier</a> on 2023-01-12 10:06</div>
            <div class="timeline-body"><p>I love this project, keep up the good work ‚ù§Ô∏è</p>
<pre><code class="language-sh">$ ruff --version
ruff 0.0.218
$ python --version
Python 3.8.15
</code></pre>
<p>I'm developing a Cookiecutter template which gives me the following tree structure:</p>
<pre><code>.
‚îú‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ pyproject.toml
‚îî‚îÄ‚îÄ {{ cookiecutter.repo_name }}
    ‚îú‚îÄ‚îÄ pyproject.toml
    ‚îî‚îÄ‚îÄ ...
</code></pre>
<p>where the nested <code>pyproject.toml</code> has Jinja2 placeholders causing parsing errors:</p>
<pre><code class="language-sh">$ ruff .
error TOML parse error at line 26, column 2
   |
26 | {% if cookiecutter.use_mypy == &quot;Yes&quot; %}
   |  ^
Invalid inline table
Expected `}`
</code></pre>
<p>Using the <code>config</code> flag to only use the root level <code>pyproject.toml</code> doesn‚Äôt prevent the nested <code>pyproject.toml</code> to be parsed. Is there a way to not parse it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-01-12 12:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-12 12:15</div>
            <div class="timeline-body"><p>Ahh interesting. Yeah, we should fix this. I have to look back at the code. We‚Äôre probably parsing it out of convenience (due to some specific details related to the abstractions).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-01-12 15:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1816.html">astral-sh/ruff#1816</a> on 2023-01-12 16:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1827.html">astral-sh/ruff#1827</a> on 2023-01-12 18:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-12 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-12 18:21</div>
            <div class="timeline-body"><p>(This should be fixed in the next release (v0.0.220), which will go out later today. Would appreciate if you could test and confirm once it's live!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gbolmier">@gbolmier</a> on 2023-01-13 08:33</div>
            <div class="timeline-body"><p>Thank you so much for the blazing fast fix @charliermarsh üôè
<code>ruff --config=pyproject.toml .</code> now works like a charm üöÄ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../UCL-ARC/python-tooling/pulls/14.html">UCL-ARC/python-tooling#14</a> on 2023-03-14 14:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:49 UTC
    </footer>
</body>
</html>
