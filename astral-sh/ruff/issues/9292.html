<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruff doesn't detect unsorted imports if there is an extra newline between imports and next block - astral-sh/ruff #9292</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Ruff doesn't detect unsorted imports if there is an extra newline between imports and next block</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/9292">#9292</a>
        opened by <a href="https://github.com/discentem">@discentem</a>
        on 2023-12-27 05:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/discentem">@discentem</a> on 2023-12-27 05:04</div>
            <div class="timeline-body"><blockquote>
<p>A minimal code snippet that reproduces the bug.</p>
</blockquote>
<pre><code class="language-shell">% ruff check .      
% cat timestamp/timestamp.py 
</code></pre>
<pre><code class="language-python">import datetime

# &lt;--- extra line
def is_expired(unix_timestamp: int) -&gt; bool:
    timestamp = datetime.datetime.fromtimestamp(unix_timestamp)
    current_time = datetime.datetime.now()
    return current_time &gt; timestamp
</code></pre>
<pre><code class="language-shell">% cat timestamp/timestamp.py
</code></pre>
<pre><code class="language-python">import datetime
# &lt;--- extra line now removed
def is_expired(unix_timestamp: int) -&gt; bool:
    timestamp = datetime.datetime.fromtimestamp(unix_timestamp)
    current_time = datetime.datetime.now()
    return current_time &gt; timestamp
</code></pre>
<pre><code class="language-shell">% ruff check .              
timestamp/timestamp.py:1:1: I001 [*] Import block is un-sorted or un-formatted
Found 1 error.
[*] 1 fixable with the `--fix` option.
</code></pre>
<blockquote>
<p>The command you invoked (e.g., <code>ruff /path/to/file.py --fix</code>), ideally including the <code>--isolated</code> flag.
<code>ruff check .</code> and <code>ruff check . --fix</code>
The current Ruff settings (any relevant sections from your <code>pyproject.toml</code>).</p>
</blockquote>
<pre><code class="language-toml">[tool.ruff.lint]
select = [
    &quot;ANN001&quot;, # https://docs.astral.sh/ruff/rules/missing-type-function-argument/
    &quot;F401&quot;,   # https://docs.astral.sh/ruff/rules/unused-import/
    &quot;I001&quot;,   # https://docs.astral.sh/ruff/rules/unsorted-imports/
    &quot;I002&quot;,   # https://docs.astral.sh/ruff/rules/missing-required-import/
    &quot;F821&quot;,   # https://docs.astral.sh/ruff/rules/undefined-name/
    &quot;F823&quot;,   # https://docs.astral.sh/ruff/rules/local-variable-undefined/
    &quot;F841&quot;,   # https://docs.astral.sh/ruff/rules/local-variable-unused/
    &quot;F842&quot;,   # https://docs.astral.sh/ruff/rules/unused-annotation/
]
</code></pre>
<blockquote>
<p>The current Ruff version (<code>ruff --version</code>).
<code>ruff 0.1.5</code></p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Ruff doesn't detect unsorted imports if there is an extra space between imports and next block" to "Ruff doesn't detect unsorted imports if there is an extra newline between imports and next block" by @discentem on 2023-12-27 05:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @discentem on 2023-12-27 09:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:11 UTC
    </footer>
</body>
</html>
