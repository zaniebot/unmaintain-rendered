<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIM109—potential false positive - astral-sh/ruff #1993</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>SIM109—potential false positive</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1993">#1993</a>
        opened by <a href="https://github.com/patrick91">@patrick91</a>
        on 2023-01-19 10:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/patrick91">@patrick91</a> on 2023-01-19 10:58</div>
            <div class="timeline-body"><p>Hi there, I have this code this:</p>
<pre><code class="language-python">import abc

def x(annotation_origin):
    return (
        annotation_origin == list
        or annotation_origin == tuple
        or annotation_origin is abc.Sequence
    )
</code></pre>
<p>that gets converted to</p>
<pre><code class="language-python">import abc

def x(annotation_origin):
    return (
        annotation_origin in (list, tuple)
    )
</code></pre>
<p>I'm not 100% sure this is a bug, but the previous code we had is valid. The same behaviour happens with Flake8</p>
<p><a href="https://ruff.pages.dev/#N4KABGBECGA2sHsDuBTAJgWgMYIHYDMBXAZ2gCNYVjIAuMAbQF0AacKMwgS1gBdPdqdJqwiQ0hALYSAnhgBu0AE6dylDIoDmAD1pQAegAoA+gGoAPsZP1oGAF4BBDAC0ADBgCcRxgCprdx64ejCYA-ACUYQAkkCJQKFo8KLiYnBq4CIoousJskPGJyRjEKJRYPNksufkoirhwFbGQqemZDbmw-CgYlLgaPAAWugAcQ43FpeVCbKIAojHTUABi8xCiAMoAkgCyAIwu7pBslaI8ShooPPI1xJx4upAADtIAzHsrUPiw0ADWKEMY0Fw6VOfDwgjAoFWUBkTww-E4l0yPEItV0+DgxViomIhAeD0yxGIGHEUlkZ3B6NgmIWkBxeIJRPSuC6SJRuH4GjRGJQWKgcEQSCKp0UAM0ANw0i5VJQbAAvo1Pj8-hgyIC0AjdJDVpB+ko0Dg0OgMDwJA9iZxMmUMpKplDRAB6E0Pd5QyD2hSKR2ml3a+2GuT24j9CSHKGMOUKr6-f4cDRkFBKTU06qFThSQinChdLD88FMCO5RXRjA1RQSYicuha0QSaBaIXKXrdJJ9QZ0FwF0RF5UAR0ICES4OrUH4HWZGD7A6o9zQCEIWZ9kAkhF43E6E-7g5nc4XvLECCwxB4jY0G6n4P388oi+gcgQnEwVBzDyydGPhBlEHlhajyr4aFkNMHgyHghxpVVcHUEpoD4OQuiAkCLweJQklAxcIOZTBoAeThNVlTsPl-f4EMUS4cFwODcFBAQk1dOAVGKMC7SgZDkmgJC0B9bEEzIDJcHuYgaN5URcEkJ57lwZ1hL5XhoAte44HKaSlxgh5EB4DoyAAOieNSB3uNTygWfCv0jJV-ieQdLiPaRryrGl8E4BIUS6ZDMio-oqGnN9FA-Pc3OgCQLmUWwujqIKiR4aQX3uZE1KyfylEC4LOFC+Q4A-SLotfKAOiPRcAqC49Uq6BRYEy9RkGNbLYtxa890UOTGKgvsLS6WseCwfoMHwDJsgWUQACF2JQGYtCwFAHmorioDGiaptufjlIANQy0bFEUPrlIAeTWGYNq2gaoA2bb9s2xQZsgGYKItPAgqos7DuY2kD1+HgtNLPqFmObVGs4ZqU0wTJWsyDAOq6nq+qEH6ayUb4MDc1DPMY3R30-MBvy7IiMEIUTiiwzRJFQpjtWaDJSqUFR1SwDBwu8sBKWKAimmIEDaO1XrFAmjAkEas16JGiluT3TnuZuXo1DHHLGZ5GlxY0SX13iLBypuME2ldHAJDIdd2LhU1EKlalXWINSEQwPBjT+sdTy12tUd82XXQyQ0RTIWQopiny-IcjIxZAnmEX6fgihQMpFqF6U92+dIkEgxzFCPBGlCijXtRj5BIIGC1MDc1Pob3fJGqFNU9W6TgyEaxQbQYGGoEyL5YPgg3SKJF2anuIhSORy4eAQbBEEYpSaWBrhMhSFu0ILmkVfYlHp81sFTiovM68gD0VCzVe93ScvmSJeNOZy-NTNyCQsBzeN2dh+stfirQERrvZmZfB5-nCjlr5HNJydp5K8yOrSC4ABVKSgDEhKAACKZ0usUHgoCADCXxCSXQgYoaBcckFz1gSAh4WwEDiHquAhM6DM74MIQlQB7FpC4CwGsXBl1qG0IACokIwUtQBcDQGsKPJAmC0BLrom4C5Oak1prKUQL0LYVBSDnEurWLQkDOD4HwKGVYa9Z6EiKv0AhxIw4ZBghkABz1NHEG0QQtREA15HhgpwLA5jMCGhwI1Puid+rPRsXwexFwdGcW+i-aQBoqBRTshCGkZNQYIDgooSRp5TjEHhnbYmRt0aYxYtIWch4Qk5WAGkx4tl+CTDCXReAVVawaDselcqXRPb03oJw48liwDhlPqIJ4uINCNUNF-SAvxJrqFxnwIK1UcK9BSXKEAspIjTJIjwMA5AsAgBAIafAYAtAGEBMCWxeAjAZFSPwMINAFislqGAAwR0ICbIHNs3AuzlAVNwGAAAvE8sAeUeAXLABkeZQJrnUTufsx5LywBxUoJ875VyQSLQBQ8sA-15lkCwFpehfYkgTQWGEEAQA">Playground link</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-01-19 12:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-01-19 12:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-19 12:39</div>
            <div class="timeline-body"><p>It looks like a bug to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/patrick91">@patrick91</a> on 2023-01-19 12:44</div>
            <div class="timeline-body"><p>By the way, my “workaround” was:</p>
<pre><code class="language-python">import abc

def x(annotation_origin):
    return (
        annotation_origin in (list, tuple)  
    ) or annotation_origin is abc.Sequence
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-19 15:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:28:57 UTC
    </footer>
</body>
</html>
