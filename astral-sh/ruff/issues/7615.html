<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formatter: Docstrings with `quote-style = &quot;single&quot;` configuration - astral-sh/ruff #7615</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Formatter: Docstrings with <code>quote-style = &quot;single&quot;</code> configuration</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/7615">#7615</a>
        opened by <a href="https://github.com/alkatar21">@alkatar21</a>
        on 2023-09-23 12:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/alkatar21">@alkatar21</a></div>
            <div class="timeline-body">

<p>Following <a href="https://github.com/astral-sh/ruff/issues/1904">astral-sh/ruff#1904</a>#issuecomment-1731862483 I tried the new configuration</p>
<pre><code>[tool.ruff.format]
# Use single quotes rather than double quotes.
quote-style = &quot;single&quot;
</code></pre>
<p>But now docstrings are also formatted with single quotes:</p>
<pre><code>def func():
  &#x27;&#x27;&#x27;Docstring.&#x27;&#x27;&#x27;
  string_taking_function(&#x27;A string&#x27;)
</code></pre>
<p>I thought with docstrings there is no real discussion that they always use <code>&quot;&quot;&quot;</code> and it only refers to normal strings and <a href="https://peps.python.org/pep-0008/#string-quotes">PEP 8</a> also says so. Like the following example:</p>
<pre><code>def func():
  &quot;&quot;&quot;Docstring.&quot;&quot;&quot;
  string_taking_function(&#x27;A string&#x27;)
</code></pre>
<p>There was a short discussion on <a href="https://discord.com/channels/1039017663004942429/1073384953741574217/1155091710813159484">Discord</a> already where @charliermarsh mentioned the following:</p>
<blockquote>
<p>Yeah need to look into this ‚Äî we‚Äôve discussed it before but started off by using the configured quotes universally.
Worth checking what the single-quote Black forks do here, and if users of our flake8-quotes plug-in tend to use double quotes for docstrings even when enforcing single quotes</p>
</blockquote>
<p>For me it would be important that docstrings always use <code>&quot;&quot;&quot;</code> regardless of <code>quote-style</code>. I am not quite sure if this is to be understood as a feature request or rather as a bug. <a href="https://docs.astral.sh/ruff/rules/triple-single-quotes">D300</a> considers this as a bug as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/konstin">@konstin</a> on 2023-09-23 12:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/konstin">@konstin</a> on 2023-09-23 12:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vanchaxy">@vanchaxy</a> on 2023-09-23 13:47</div>
            <div class="timeline-body"><p>We also use &quot;single everywhere except docstring&quot;. +1 to always use double for docstring (preferably) or make it configurable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-23 15:53</div>
            <div class="timeline-body"><p>It looks like <a href="https://pypi.org/project/blue/">Blue</a> also uses double quotes for triple-quoted strings and docstrings, and single quotes everywhere else.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-23 15:59</div>
            <div class="timeline-body"><p>Some data from Code Search:</p>
<ul>
<li>22 files with <code>docstring-quotes = &quot;single&quot;</code> (<a href="https://github.com/search?type=code&amp;q=%22docstring-quotes+%3D+%5C%22single%5C%22%22+path%3Apyproject.toml">source</a>)</li>
<li>57 files with <code>multiline-quotes = &quot;single&quot;</code> (<a href="https://github.com/search?type=code&amp;q=%22multiline-quotes+%3D+%5C%22single%5C%22%22+path%3Apyproject.toml">source</a>)</li>
<li>372 files with <code>inline-quotes = &quot;single&quot;</code> (<a href="https://github.com/search?type=code&amp;q=%22inline-quotes+%3D+%5C%22single%5C%22%22+path%3Apyproject.toml">source</a>)</li>
</ul>
<p>So the majority of projects that are using single quotes only apply it to non-docstring, non-multiline strings, but there are <em>some</em> projects that deviate from that pattern.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Formatter: Beta&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-09-24 15:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-09-25 11:55</div>
            <div class="timeline-body"><p>@alkatar21 would you expect that <code>&quot;</code> are also used for non-docstring triple quoted strings?</p>
<p>What about a single-quoted docstring? Should it use <code>&quot;</code> or <code>&#x27;</code>&#x27;:</p>
<pre><code>def test():
    &#x27;Single quoted docstring&#x27;
   ...
</code></pre>
<p>Using <code>&quot;</code> for all triple quoted strings would be in line with <a href="https://peps.python.org/pep-0008/#string-quotes">PEP8</a></p>
<p>We can</p>
<ul>
<li>Change <code>quote-style</code> to only apply to not-triple quoted strings</li>
<li>and/or add a new <code>quote-style-triple-quoted</code> (or similar)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alkatar21">@alkatar21</a> on 2023-09-25 13:05</div>
            <div class="timeline-body"><blockquote>
<p>@alkatar21 would you expect that <code>&quot;</code> are also used for non-docstring triple quoted strings?</p>
</blockquote>
<p>I believe the following are all docstrings (used by editors and sphinx for example) and should therefore use <code>&quot;</code>.</p>
<pre><code>class ExampleClass:
    &quot;&quot;&quot;Class docstring.&quot;&quot;&quot;
    variable1: int
    &quot;&quot;&quot;Docstring for variable1.&quot;&quot;&quot;
    variable2: int
    &quot;&quot;&quot;Docstring for variable2.&quot;&quot;&quot;

    def __init__(self, parameter: str) -&gt; None:
        self.parameter: str = parameter
        &quot;&quot;&quot;Docstring for parameter.&quot;&quot;&quot;
</code></pre>
<p>I don&#x27;t remember ever using non-docstring triple quoted strings and accordingly have no personal opinion about it, but I would suggest to follow PEP8.</p>
<blockquote>
<p>What about a single-quoted docstring? Should it use <code>&quot;</code> or <code>&#x27;</code>&#x27;:</p>
<pre><code>def test():
    &#x27;Single quoted docstring&#x27;
   ...
</code></pre>
</blockquote>
<p>I didn&#x27;t even know that is possible, but off the top of my head I&#x27;d say <code>&#x27;</code> since it&#x27;s a simple string?</p>
<blockquote>
<p>Using <code>&quot;</code> for all triple quoted strings would be in line with <a href="https://peps.python.org/pep-0008/#string-quotes">PEP8</a></p>
</blockquote>
<p>Then I would suggest to follow PEP8.</p>
<blockquote>
<p>We can</p>
<pre><code>* Change `quote-style` to only apply to not-triple quoted strings

* and/or add a new `quote-style-triple-quoted` (or similar)</code></pre>
<p>I would suggest to follow PEP8 and implement <code> Change &#x27;quote-style&#x27; to only apply to not-triple quoted strings</code>. It is probably easier and well justified with PEP8. If there is a big demand, you can always consider adding the option later. I think it is better to possibly add the option at some point in the future than to regret about the option later on.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-25 13:11</div>
            <div class="timeline-body"><p>@MichaReiser - the other option is to mirror the configuration options that we use for flake8-quotes: a setting for inline quotes, a setting for multiline quotes, and a setting for docstrings (which applies to single- and triple-quoted docstrings).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-09-25 13:17</div>
            <div class="timeline-body"><p>I&#x27;d prefer only having at most a single quotes setting</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-25 13:24</div>
            <div class="timeline-body"><p>I agree that it would be nice to have a single setting. The data I scraped above demonstrates that we can‚Äôt use a single setting and still support all users, but we could make that choice.</p>
<p>If we want a single setting, my suggestion would be to enforce double quotes for docstrings and triple-quoted strings, and use the string setting for all others. This would be consistent with Blue and Pyink which always use double quotes for such strings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-09-25 13:42</div>
            <div class="timeline-body"><blockquote>
<p>@MichaReiser - the other option is to mirror the configuration options that we use for flake8-quotes: a setting for inline quotes, a setting for multiline quotes, and a setting for docstrings (which applies to single- and triple-quoted docstrings).</p>
</blockquote>
<p>Yeah, I prefer having as few options as possible. Ideally, just one, two if we must. I would try to avoid having all three.</p>
<p>The other part that&#x27;s interesting about this is... Should these options now become global? Or are we fine repeating the configuration twice (I would argue it&#x27;s fine, because the formatter makes the lint rule obsolete)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tanoc">@tanoc</a> on 2023-09-27 14:30</div>
            <div class="timeline-body"><p>I think having the same settings as in flake8-quotes is not a bad idea. I&#x27;m fine with defaults values for multiline and docstrings checking what is most commonly used, but excluding customization on these settings could create the same problem that fueled the need for Black forks (Blue, Pyink, ...)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-09-27 16:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-27 16:23</div>
            <div class="timeline-body"><p>Our current plan is to always use double quotes for docstrings and triple-quoted strings (as per PEP 8 and PEP 257). We&#x27;ll change this an upcoming release, prior to the Beta.</p>
<p>If there&#x27;s still strong demand, we&#x27;ll then consider adding an additional dedicated setting to use single quotes everywhere (i.e., for docstrings and triple-quoted strings in addition).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tanoc">@tanoc</a> on 2023-09-27 17:11</div>
            <div class="timeline-body"><p>Seems reasonable. Just to add to your data, please keep in mind that there <a href="https://github.com/search?type=code&amp;q=%22id%3A+double-quote-string-fixer%22+path%3A.pre-commit-config.yaml">a lot of projects</a> using pre-commit with <code>double-quote-string-fixer</code> (that just fixes normal strings and doesn&#x27;t change docstrings or triple-quoted strings, so maybe is not so black an white as it seems).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">accepted</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-27 18:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/warsaw">@warsaw</a> on 2023-09-27 19:28</div>
            <div class="timeline-body"><p>I just tried out <code>quote-style = &#x27;single&#x27;</code> on one of my repos and hit exactly this problem.</p>
<blockquote>
<p>It looks like <a href="https://pypi.org/project/blue/">Blue</a> also uses double quotes for triple-quoted strings and docstrings, and single quotes everywhere else.</p>
</blockquote>
<p>Yes, <code>blue</code> explicitly keeps triple-quoted-double-quotes for docstrings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-27 19:39</div>
            <div class="timeline-body"><p>üëç We&#x27;re going to change this, probably in the upcoming release (or the next one, if it doesn&#x27;t make it).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/warsaw">@warsaw</a> on 2023-09-27 19:49</div>
            <div class="timeline-body"><p>Great to hear @charliermarsh.  I&#x27;m super excited about being able to switch to <code>ruff format</code>.</p>
<p>I noticed one other formatting deviation from blue related to right-hanging comments, but I&#x27;ll open a new ticket on that when I get a chance, if it hasn&#x27;t already been reported.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-27 20:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-28 19:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Destroy666x">@Destroy666x</a> on 2023-10-13 04:13</div>
            <div class="timeline-body"><p>Please reconsider this as it&#x27;s a bit nonsensical as of now since you can do:</p>
<pre><code>[tool.ruff.flake8-quotes]
docstring-quotes = &#x27;single&#x27;
inline-quotes = &#x27;single&#x27;
multiline-quotes = &#x27;single&#x27;
</code></pre>
<p>and then the formatter is just straight up incompatible with the other part of the software. Software definitely shouldn&#x27;t conflict with itself.</p>
<p>You could just split it into 3 variables like above for the most compatible approach.</p>
<p>If you need any arguments why use single quotes - they&#x27;re simply easier to press and that&#x27;s the advantage. Disadvantages? None for me, I don&#x27;t mind that let&#x27;s say 90% of projects go for doubles, no other tool that I&#x27;m using has problems with that either.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Destroy666x">@Destroy666x</a> on 2023-10-20 14:47</div>
            <div class="timeline-body"><p>Formatter is unrelated to rules, as can be also seen from my comment above. Doing that changed nothing indeed. There&#x27;s currently no way to disable the quote formatting, pretty sure.</p>
<p>EDIT: comment got deleted in case someone is confused.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-10-26 14:04</div>
            <div class="timeline-body"><p>FYI, the disadvantage is that you&#x27;re much more likely to have single quotes inside a string of text than a double quote. Your comment above has one single quote, and mine has seven. Neither of us used a double quote.</p>
<p>And easier to press doesn&#x27;t matter if your formatter converts them to double quotes for you anyway. ;)</p>
<p>(That&#x27;s the reasoning behind Black&#x27;s choice, by the way)</p>
<p>Though I&#x27;d also add that single quotes are used by Python&#x27;s built in repr&#x27;s.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-10-26 14:10</div>
            <div class="timeline-body"><p>I was hoping to covert projects like pypa/black and pyproject-metadata to the Ruff formatter, and wasn&#x27;t able to due to this - previously we used <code>double-quote-string-fixer</code> to convert strings to single quotes, so all our triple quoted strings are single quoted already. I don&#x27;t really see why someone would want double quoted triple strings if they wanted single quoted strings - but it&#x27;s a bit hard for me to be sure though, since I&#x27;m personally on the double quote &quot;go with black&quot; side. Triple quoted strings actually do not have the one key differentiator for double/single quotes: you can put single or double quotes inside them!</p>
<p>But anyway, I&#x27;d like to adopt ruff-format in these projects without having to ask all our developers about changing styles. Though I could ask, given what PEP says.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-10-26 14:21</div>
            <div class="timeline-body"><p>Ahh! <code>double-quote-string-fixer</code> leaves triple quoted strings alone! So we have both types of strings in the codebase, I think that&#x27;s totally fine to standardize on something, and moving toward more double quotes is good! Not an issue for me anymore. I&#x27;ll let someone who actually cares about single quotes argue about triple quoted strings if they care. :)</p>
<p>Though I notice all the triple quoted strings that were changed were not docstrings. :(</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Destroy666x">@Destroy666x</a> on 2023-10-26 14:33</div>
            <div class="timeline-body"><blockquote>
<p>FYI, the disadvantage is that you&#x27;re much more likely to have single quotes inside a string of text than a double quote. Your comment above has one single quote, and mine has seven. Neither of us used a double quote.</p>
</blockquote>
<p>That&#x27;s... quite unreasonable I&#x27;d say, as it assumes, I don&#x27;t know why:</p>
<ul>
<li>usage of shortened forms</li>
<li>language - English, which uses <code>&#x27;</code> quite often indeed. Most of other languages don&#x27;t.</li>
<li>language usage in the 1st place, my software could be just a bot with nearly 0 user interaction. Or I could have software with good practice of keeping translations in some config/data-like files, e.g. YAML or JSON. This would mean most of strings are programming-related and unlikely to have any of <code>&#x27;</code> or <code>&quot;</code>, unless parsing of specific formats occurs, but then e.g. dealing with JSON would mean mostly dealing with <code>&quot;</code>.</li>
</ul>
<p>You just can&#x27;t generalize like that, so still no idea why software vendors/authors try to enforce such things TBH, especially when introducing inconsistencies like I mentioned. And the formatters utilize double minimal escaping quoting method anyways, so wrapping with the other when necessary occurs. It really shouldn&#x27;t matter what&#x27;s used and what&#x27;s the user&#x27;s preference.</p>
<blockquote>
<p>And easier to press doesn&#x27;t matter if your formatter converts them to double quotes for you anyway. ;)</p>
</blockquote>
<p>True. I could just prefer the more minimalistic look of <code>&#x27;</code> though, including while reading the code in repository, why not. I&#x27;m not that pedantic but some people might be.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-10-26 14:46</div>
            <div class="timeline-body"><p>I&#x27;m not sure I&#x27;d say &quot;most other&quot; - At least Spanish and French both use single quotes, and pretty much don&#x27;t use double quotes at all! (<code>¬´¬ª</code> used instead). Languages that don&#x27;t use either don&#x27;t matter, since either is fine. Also, Python is written in English. I think it&#x27;s enough to break the symmetry; it doesn&#x27;t need to be a huge reason since otherwise it&#x27;s a toss-up, it&#x27;s just a character choice. And if you are dealing with formatted intput/output like json you should use a library (factor out the quoting) and not try to manually handle quoting. :)</p>
<p>Also, many other (computer) languages don&#x27;t give you the option, and those mostly force double quotes (C, C++, Java, Rust, Matlab, Go, Swift) for strings. Using double quotes in Python is also consistent with those languages, and makes it easier to go back and forth. (note: JavaScript and Fortran are like Python. Ruby and Bash allow both, but double quotes interpolate and single do not. I don&#x27;t know of a language that forces single quotes.)</p>
<p>Anyway, doesn&#x27;t really matter here, I think here the thing to argue is if you like single quotes, do you like triple quoted single quotes? Due to PEP 257, enforcing double quoted docstrings seems fine, but what about free-standing single triple quotes? That&#x27;s what we have (hopefully had) in pypa/build. Docstrings used double, everything else (even if triple quoted) was single. I don&#x27;t like single quotes anyway, so I&#x27;m a bad judge. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/warsaw">@warsaw</a> on 2023-10-26 17:19</div>
            <div class="timeline-body"><blockquote>
<p>including while reading the code in repository</p>
</blockquote>
<p>Yes, exactly.  It&#x27;s not just about the ease of <em>writing</em> single quotes over double quotes (at least for US qwerty keyboards, don&#x27;t know about others), but about <em>reading</em> code.  The extra screen grit of double quotes can reduce the readability of code too.</p>
<p>My understanding was that black adopted this style because it was more compatible with JavaScript or JSON or some such, with little ergonomic consideration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Destroy666x">@Destroy666x</a> on 2023-10-26 19:22</div>
            <div class="timeline-body"><blockquote>
<p>I&#x27;m not sure I&#x27;d say &quot;most other&quot; - At least Spanish and French both use single quotes, and pretty much don&#x27;t use double quotes at all</p>
</blockquote>
<p>I don&#x27;t think any of Asian languges does and that&#x27;s already the most as there are loads of variations. While French uses them as frequently as English, I don&#x27;t know where you see them in Spanish - I personally almost never do. They&#x27;re mostly popular in Germanic languages I&#x27;d say.</p>
<blockquote>
<p>Also, Python is written in English. I think it&#x27;s enough to break the symmetry</p>
</blockquote>
<p>Why does that matter at all...? Not only does Python allow both, but also the language used by authors is quite irrelevant IMO, while we&#x27;re talking about a specific tool especially.</p>
<blockquote>
<p>And if you are dealing with formatted intput/output like json you should use a library (factor out the quoting) and not try to manually handle quoting</p>
</blockquote>
<p>This point makes no sense, as I was obviously talking from perspective of someone e.g. writing the librar to parse the JSON.</p>
<blockquote>
<p>Using double quotes in Python is also consistent with those languages</p>
</blockquote>
<p>Why would I want to be consistent with entirely different languages though? Python is normally way way more loose than C, C++ or Java and rather uncomparable. The fact that C doesn&#x27;t have lambdas doesn&#x27;t mean I should avoid lambda usage, for instance. The fact that languages differ is an advantage of variety of them, not a disadvantage. You can code a quick bot without type hints and without caring much about formatting with Python and then a business application with 1000 classes with Java that follows very specific standards.</p>
<blockquote>
<p>do you like triple quoted single quotes?</p>
</blockquote>
<p>I don&#x27;t mind them at all ¬Ø_(„ÉÑ)_/¬Ø E.g. for the reason specified by the person above.</p>
<p>I think you&#x27;re way too focused on defending a specific style while not considering the freedom aspect at all.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-10-27 01:47</div>
            <div class="timeline-body"><p>I think this discussion shows why Black didn&#x27;t make it configurable, and just picked a &quot;correct&quot; one. :) Happy to argue about why double quotes are better somewhere else, but it doesn&#x27;t have anything to do with this issue - Ruff-format already lets you pick single quotes!</p>
<p>To summarize: if you set <code>quote-style = &quot;single&quot;</code>, you get this:</p>
<pre><code>def f():
    &quot;&quot;&quot;
    Docstring.
    &quot;&quot;&quot;

    single = &#x27;hello&#x27;
    triple = &quot;&quot;&quot;Hi there&quot;&quot;&quot;
</code></pre>
<p>The docstring is correct, PEP 257 states docstrings should use double quotes. The triple quote string is correct according to PEP 8, which states all triple quoted strings should be made with double quotes. I&#x27;m okay with Ruff not providing configurability to contradict a PEP - I&#x27;ll try to get it updated in pypa/build and pyproject-metadata. The one place where it&#x27;s left open by formatting PEPs is for simple strings, and Ruff has an option for that, which is nice. Though IMO, even just seeing them above, I&#x27;d much rather just make the simple string double quoted too. ;)</p>
<p>Having a &#x27;&quot;preserve&quot;` option would be fantastic (didn&#x27;t notice it was missing!), and would help people do whatever they are doing now with Black. Being at least as configurable as Black is a low bar. ;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-27 02:15</div>
            <div class="timeline-body"><blockquote>
<p>Having a &#x27;&quot;preserve&quot;` option would be fantastic (didn&#x27;t notice it was missing!), and would help people do whatever they are doing now with Black. Being at least as configurable as Black is a low bar. ;)</p>
</blockquote>
<p><code>preserve</code> would be slightly different to Black&#x27;s <code>--skip-string-normalization</code> in the sense that it still removes unnecessary escapes and normalizes string prefixes. It&#x27;s the same in that it keeps your quotes the same. However, I want to wait with adding it until we figure out how to handle the new string preview feature that automatically joins and splits strings. The formatter could get the quotes wrong when splitting or joining strings depending on how obscure the quote  rules are in a project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ThiefMaster">@ThiefMaster</a> on 2023-11-09 18:33</div>
            <div class="timeline-body"><p>I&#x27;d also like to be able to configure quote styles separately. flake8-quotes does it very nicely, so why not allow autoformatting to be as flexible:</p>
<pre><code>inline-quotes = single
multiline-quotes = single
docstring-quotes = double
avoid-escape = true
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ThiefMaster">@ThiefMaster</a> on 2023-11-09 18:37</div>
            <div class="timeline-body"><p>Actually, if you want a single setting: How about a <code>quotes = match-linter</code> option? That way you have onle ONE setting and it uses the config of the flake8-quotes rules...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-11-29 03:59</div>
            <div class="timeline-body"><p>We&#x27;re considering adding the <code>preserve</code> option in <a href="https://github.com/astral-sh/ruff/pull/8822">astral-sh/ruff#8822</a>. Please comment on the PR if you use <code>--skip-string-normalization</code> and your use case isn&#x27;t covered by Ruff&#x27;s settings today nor after adding the <code>preserve</code> option. Thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sknaumov">@sknaumov</a> on 2025-08-31 05:28</div>
            <div class="timeline-body"><p>Have you considered having <code>quote-style: single-pep8</code> option to support formatting with single quotes for non-triplequote cases?</p>
<p>I think that it solves most concerns:</p>
<ol>
<li>Support people who are using <code>blue</code> formatter but want to use more modern one, without reformatting their codebase.</li>
<li>Provide single quotes option that conforms to PEP8.</li>
<li>Do not introduce too many config options, unlike some proposals in this ticket =&gt; no exponential number of configurations to test.</li>
</ol>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:43 UTC
    </footer>
</body>
</html>
