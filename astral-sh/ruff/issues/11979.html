<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>new rule - enforce that strings passed to exceptions have a variable in them - astral-sh/ruff #11979</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>new rule - enforce that strings passed to exceptions have a variable in them</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/11979">#11979</a>
        opened by <a href="https://github.com/DetachHead">@DetachHead</a>
        on 2024-06-22 00:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/DetachHead">@DetachHead</a> on 2024-06-22 00:10</div>
            <div class="timeline-body"><p>there have been countless times where i've encountered unhelpful error messages in software that don't provide enough information to the user. i think this is something that can be addressed with a lint rule. for example:</p>
<pre><code class="language-py">if not path.exists():
    raise Exception(&quot;file not found&quot;) # error: use a relevant variable in your error message to provide more information to the user
</code></pre>
<p>error messages like this are extremely common and are very frustrating when exposed to a user. what file was it looking for?</p>
<p>in this case, the fix would be to include the <code>path</code> variable in the message:</p>
<pre><code class="language-py">if not path.exists():
    raise Exception(f&quot;file not found: {path}&quot;)
</code></pre>
<p>obviously there will be cases where this is intentional, so here are a couple ideas to help reduce the number of false positives:</p>
<ul>
<li>the error could only be reported on certain exception types (eg. <code>Exception</code>, <code>FileNotFoundError</code>). ideally this would be user-configurable.</li>
<li>only report the error if the raised exception is being passed a literal string. ie. <code>raise FooException()</code> would not report the error but <code>raise FooException(&quot;something failed&quot;)</code> would</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2024-06-23 17:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/denwong47">@denwong47</a> on 2024-06-24 21:43</div>
            <div class="timeline-body"><p>I can give this a go as it seems quite similar to the other PR (#11981) I just worked on, and I personally like long and detailed Exceptions!</p>
<p>I am proposing to only deal with Built-in Exceptions - as User defined exceptions can have particular contextual meaning already, and a variable is not necessarily required.</p>
<p>There are also 4 notable exceptions:</p>
<ul>
<li><code>NotImplementedError</code> - this, by definition, is not an error related to any runtime states.</li>
<li><code>UnicodeDecodeError</code>, <code>UnicodeEncodeError</code> and <code>UnicodeTranslateError</code> - these by its <code>__init__</code> already mandates contextual information.</li>
</ul>
<p>I'll set this up to check against the remaining 52 types.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/12032.html">astral-sh/ruff#12032</a> on 2024-06-25 19:17</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
