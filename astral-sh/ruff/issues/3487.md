```yaml
number: 3487
title: "Infer `target-version` from project metadata at runtime"
type: issue
state: closed
author: charliermarsh
labels:
  - core
assignees: []
created_at: 2023-03-13T19:42:44Z
updated_at: 2023-03-13T21:15:31Z
url: https://github.com/astral-sh/ruff/issues/3487
synced_at: 2026-01-10T01:56:46Z
```

# Infer `target-version` from project metadata at runtime

---

_Issue opened by @charliermarsh on 2023-03-13 19:42_

In #3470, we added the ability to grab the `target-version` from `pyproject.toml` in `flake-to-ruff`. However, Black picks this info up at runtime, and I think we should do the same -- that is, allow users to omit `target-version` entirely if they have a `requires-python` defined.

Related to #2039.

---

_Referenced in [astral-sh/ruff#2039](../../astral-sh/ruff/issues/2039.md) on 2023-03-13 19:42_

---

_Label `core` added by @charliermarsh on 2023-03-13 19:43_

---

_Comment by @JonathanPlasse on 2023-03-13 20:58_

Have you tested it?
It should already be implemented in [#3470](https://github.com/charliermarsh/ruff/pull/3470/files#diff-80b1ade58ef6ff57826a31ddacd945d59bcdefa2217bd3b90e821a3d1e69962aR119-R144).
I tested this configuration and use `--show-settings` to check if `target-version` is the expected value.
```toml
[project]
requires-python = ">=3.8"

[tool.ruff]
```
`tool.ruff` is needed for it to work.
Also, it will not work if `ruff.toml` is used instead.
The parsing of the configuration would have to be refactored.

Maybe we should close this issue and open another one?

---

_Comment by @charliermarsh on 2023-03-13 21:02_

Wait, sorry, you're right, and I'm wrong -- I just misunderstood the scope of the change. Let me re-read then close this!

---

_Comment by @charliermarsh on 2023-03-13 21:15_

Sweet!

---

_Closed by @charliermarsh on 2023-03-13 21:15_

---

_Referenced in [gip-inclusion/les-emplois#2480](../../gip-inclusion/les-emplois/pulls/2480.md) on 2023-05-09 10:34_

---
