<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>test_multi_file_function_references fails on 32-bit platforms - astral-sh/ruff #19641</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>test_multi_file_function_references fails on 32-bit platforms</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/19641">#19641</a>
        opened by <a href="https://github.com/hannesbraun">@hannesbraun</a>
        on 2025-07-30 16:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hannesbraun">@hannesbraun</a></div>
            <div class="timeline-body">Summary
<p>The test <code>goto_references::tests::test_multi_file_function_references</code> fails on 32-bit platforms (armhf, armv7, x86):</p>
<pre><code>failures:
---- goto_references::tests::test_multi_file_function_references stdout ----
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Snapshot Summary ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Snapshot: multi_file_function_references
Source: crates/ty_ide/src/goto_references.rs:721
────────────────────────────────────────────────────────────────────────────────
Expression: test.references()
────────────────────────────────────────────────────────────────────────────────
-old snapshot
+new results
────────────┬───────────────────────────────────────────────────────────────────
    5     5 │ 3 |     return x * 2
    6     6 │   |
    7     7 │ 
    8     8 │ info[references]: Reference 2
    9       │- --&gt; module.py:5:12
   10       │-  |
   11       │-4 | def process_data(data):
   12       │-5 |     return helper_function(data)
   13       │-  |            ^^^^^^^^^^^^^^^
   14       │-6 |
   15       │-7 | def double_process(data):
   16       │-  |
   17       │-
   18       │-info[references]: Reference 3
   19       │- --&gt; module.py:8:14
   20       │-  |
   21       │-7 | def double_process(data):
   22       │-8 |     result = helper_function(data)
   23       │-  |              ^^^^^^^^^^^^^^^
   24       │-9 |     return helper_function(result)
   25       │-  |
   26       │-
   27       │-info[references]: Reference 4
   28       │- --&gt; module.py:9:12
   29       │-  |
   30       │-7 | def double_process(data):
   31       │-8 |     result = helper_function(data)
   32       │-9 |     return helper_function(result)
   33       │-  |            ^^^^^^^^^^^^^^^
   34       │-  |
   35       │-
   36       │-info[references]: Reference 5
   37     9 │  --&gt; app.py:6:27
   38    10 │   |
   39    11 │ 4 | class DataProcessor:
   40    12 │ 5 |     def __init__(self):
┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈
   43    15 │ 7 |     
   44    16 │ 8 |     def process(self, value):
   45    17 │   |
   46    18 │ 
   47       │-info[references]: Reference 6
         19 │+info[references]: Reference 3
   48    20 │  --&gt; app.py:9:16
   49    21 │   |
   50    22 │ 8 |     def process(self, value):
   51    23 │ 9 |         return helper_function(value)
   52    24 │   |                ^^^^^^^^^^^^^^^
         25 │+  |
         26 │+
         27 │+info[references]: Reference 4
         28 │+ --&gt; module.py:5:12
         29 │+  |
         30 │+4 | def process_data(data):
         31 │+5 |     return helper_function(data)
         32 │+  |            ^^^^^^^^^^^^^^^
         33 │+6 |
         34 │+7 | def double_process(data):
         35 │+  |
         36 │+
         37 │+info[references]: Reference 5
         38 │+ --&gt; module.py:8:14
         39 │+  |
         40 │+7 | def double_process(data):
         41 │+8 |     result = helper_function(data)
         42 │+  |              ^^^^^^^^^^^^^^^
         43 │+9 |     return helper_function(result)
         44 │+  |
         45 │+
         46 │+info[references]: Reference 6
         47 │+ --&gt; module.py:9:12
         48 │+  |
         49 │+7 | def double_process(data):
         50 │+8 |     result = helper_function(data)
         51 │+9 |     return helper_function(result)
         52 │+  |            ^^^^^^^^^^^^^^^
   53    53 │   |
────────────┴───────────────────────────────────────────────────────────────────
Stopped on the first failure. Run `cargo insta test` to run all snapshots.
thread &#x27;goto_references::tests::test_multi_file_function_references&#x27; panicked at /home/buildozer/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/insta-1.43.1/src/runtime.rs:679:13:
snapshot assertion for &#x27;multi_file_function_references&#x27; failed in line 721
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
Version
<p>ruff 0.12.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hannesbraun">@hannesbraun</a> on 2025-07-30 16:31</div>
            <div class="timeline-body"><p>Duplicate of #19640</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/hannesbraun">@hannesbraun</a> on 2025-07-30 16:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:17 UTC
    </footer>
</body>
</html>
