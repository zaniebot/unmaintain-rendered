<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statically linked binaries - astral-sh/ruff #12216</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Statically linked binaries</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12216">#12216</a>
        opened by <a href="https://github.com/Zaczero">@Zaczero</a>
        on 2024-07-06 14:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Zaczero">@Zaczero</a></div>
            <div class="timeline-body"><p>I have decided to create a dedicated issue, as <a href="https://github.com/astral-sh/ruff-vscode/issues/563">astral-sh/ruff-vscode#563</a> and <a href="https://github.com/astral-sh/ruff/issues/1699">astral-sh/ruff#1699</a> talk about it losly.</p>
Problem
<p>Ruff has a dependency on glibc, meaning that it only works on systems where such a library is provided. This is quite a common issue, especially with the rising popularity of NixOS. Ruff fails to work on such systems when using it via the VSCode extension or with a pip install.</p>
<p>Ruff windows builds <a href="https://github.com/astral-sh/ruff/blob/main/.cargo/config.toml">are statically linked</a>. Linux are not.</p>
My View
<p>By depending on external dependencies, applications (in theory) save on installation size since the library can be installed once per system. However, in reality, it often turns out to be the opposite. By dynamically linking a C library, applications have limited compiler-optimization potential. The most obvious example would be no method inlining for library-provided methods (since those are provided at runtime). This, in turn, prevents other optimizations and can result in a bigger binary size.</p>
<p>I could also be completely wrong about this, as I am just a Python dev and don&#x27;t have deep experience with compilers.</p>
Rust Example
<p><a href="https://github.com/biomejs/biome/releases/tag/cli%2Fv1.8.3">BiomeJS</a>, a JS toolchain also developed in Rust, provides <a href="https://musl.libc.org">musl</a> (statically linked) release builds. They are often smaller in size than glibc-counterparts and are more compatible (because of the lack of external dependencies).</p>
Expected Behavior
<p>When using Ruff from the VSCode extension or from pip, I expect the binary to be in a dependency-free format. This will provide better compatibility and, in theory, will reduce installation size and increase startup and runtime performance.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Zaczero">@Zaczero</a> on 2024-07-06 15:30</div>
            <div class="timeline-body"><p>Update: I have just discovered that ruff musl builds <a href="https://github.com/astral-sh/ruff/releases/0.5.1">are already available</a>. I suppose the issue now boils down to only making it a default option in vscode extension, if not already. pip musllinux <a href="https://pypi.org/project/ruff/#files">wheels are provided</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Zaczero">@Zaczero</a> on 2024-07-06 15:32</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:55 UTC
    </footer>
</body>
</html>
