<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>linter for a subclass changing the asyncio &quot;color&quot; of a method - astral-sh/ruff #16489</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>linter for a subclass changing the asyncio &quot;color&quot; of a method</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/16489">#16489</a>
        opened by <a href="https://github.com/NorthIsUp">@NorthIsUp</a>
        on 2025-03-04 03:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/NorthIsUp">@NorthIsUp</a></div>
            <div class="timeline-body">Summary
<p>I don&#x27;t know if this describes it well, but I&#x27;d love a lint error for if a subclass changes the aio typing of a method.</p>
<pre><code>class Foo:
    async def run(self) -&gt; None:
        await asyncio.sleep(1)
        return


class Bar(Foo):
    def run(self) -&gt; None:  # &lt;- lint error, changes from awaitable to callable
        return None
</code></pre>
<p>and vice versa, where the superclass is <code>def whatever</code> and the subclass is <code>async def whatever</code></p>
<p>thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2025-03-04 08:02</div>
            <div class="timeline-body"><p>Unless your class and subclasses are defined in the same file, Ruff won&#x27;t be able to check this for a while still (see: multifile analysis and redknot).</p>
<p>This is more in the ballpark of a type-checker (mypy/pyright)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-03-04 09:31</div>
            <div class="timeline-body"><p>I think this makes sense to me as a rule that flags incompatible overrides but Ruff currently lacks the capabilities to do this cross-module (as @Avasam pointed out).</p>
<p>I think we should add this once we integrate our new semantic multi-file analysis engine into Ruff but I&#x27;ll close this for now, as it isn&#x27;t actionable for us in the near future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-03-04 09:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-03-04 09:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:36 UTC
    </footer>
</body>
</html>
