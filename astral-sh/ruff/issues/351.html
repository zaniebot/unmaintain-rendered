<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatically rewrite `NamedTuple` and `TypedDict` with newer syntaxes - astral-sh/ruff #351</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Automatically rewrite <code>NamedTuple</code> and <code>TypedDict</code> with newer syntaxes</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/351">#351</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2022-10-07 20:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-10-07 20:07</div>
            <div class="timeline-body"><p>From <code>pyupgrade</code>:</p>
<img width="792" alt="Screen Shot 2022-10-07 at 4 04 06 PM" src="https://user-images.githubusercontent.com/1309177/194644709-69165fc1-6da3-4551-abcc-4d86e1801036.png">

<p>This could be a good use-case for the codegen module.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2022-10-07 20:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/martinlehoux">@martinlehoux</a> on 2022-11-12 18:20</div>
            <div class="timeline-body"><p>I'll try this one if that's okay</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/martinlehoux">@martinlehoux</a> on 2022-11-13 09:11</div>
            <div class="timeline-body"><p>A few questions on top of my mind @charliermarsh</p>
<ul>
<li>Should we handle <code>from typing import TypedDict as CustomTypedDict</code>?</li>
<li>Should we handle <code>MyType = TypedDict(&quot;MyType&quot;, dict(a=str, b=int))</code>?</li>
<li>What should we do for <code>MyType = TypedDict(&quot;OtherName&quot;, ...)</code>?</li>
<li>And overall, do you think TypedDict rule and NamedTuple rule should be the same, or two different rules?</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-13 15:51</div>
            <div class="timeline-body"><p>Good questions!</p>
<blockquote>
<p>Should we handle <code>from typing import TypedDict as CustomTypedDict</code>?</p>
</blockquote>
<p>Na, I think we should ignore (leave it unchanged).</p>
<blockquote>
<p>Should we handle <code>MyType = TypedDict(&quot;MyType&quot;, dict(a=str, b=int))</code>?</p>
</blockquote>
<p>I think it's fine not to handle this case. It'd be nice to include it, but I don't see it as a requirement.</p>
<blockquote>
<p>What should we do for <code>MyType = TypedDict(&quot;OtherName&quot;, ...)</code>?</p>
</blockquote>
<p>Let's ignore this case, if possible (leave it unchanged).</p>
<blockquote>
<p>And overall, do you think TypedDict rule and NamedTuple rule should be the same, or two different rules?</p>
</blockquote>
<p>I would vote for two different rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/martinlehoux">@martinlehoux</a> on 2022-11-18 18:54</div>
            <div class="timeline-body"><p>Regarding <a href="https://docs.python.org/3/library/collections.html#collections.namedtuple">NamedTuples</a>:</p>
<ul>
<li>Support <code>rename</code> (that converts invalid identifiers to  <code>_&lt;k&gt;</code> keys, and duplicated too) =&gt; <em>I  don't see a technical reason for why not, but doesn't seem very useful</em></li>
<li>Support <code>defaults</code> (that list fields defaults from right to left) =&gt; <em>I guess this one is useful</em></li>
<li>Support <code>module</code> (I don't event know if possible with class) =&gt; <em>I'd say we drop that</em></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-11-20 15:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-20 15:26</div>
            <div class="timeline-body"><p>Completed by @martinlehoux! Thank you!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:10:15 UTC
    </footer>
</body>
</html>
