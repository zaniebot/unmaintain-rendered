<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enforce consistent prefixes across implicitly concatenated strings - astral-sh/ruff #22316</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Enforce consistent prefixes across implicitly concatenated strings</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/22316">#22316</a>
        opened by <a href="https://github.com/GideonBear">@GideonBear</a>
        on 2025-12-31 13:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/GideonBear">@GideonBear</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Ref #4662 and #10885
@charliermarsh, pinging you since this was originally a comment in #4662, but I decided to flesh this follow-up question out into a feature request immediately.</p>
<p>This has to do with rule <a href="https://docs.astral.sh/ruff/rules/f-string-missing-placeholders/#f-string-missing-placeholders-f541">f-string-missing-placeholders (F541)</a>, but should work for other prefixes (<code>r&quot;...&quot;</code>) as well.</p>
<hr />
<p>If the stance of ruff is &quot;you should/can use common prefixes&quot;, there should (IMO) be a rule that enforces this, to strive for consistency.</p>
<pre><code class="language-py"># Bad, inconsistent
test_string = (
    f&quot;this is a string without placeholders &quot;
    &quot;and this is also without placeholders &quot;
    f&quot;{some_string} is in a placeholder&quot;
)
# Fine
test_string = (
    &quot;this is a string without placeholders &quot;
    f&quot;{some_string} is in a placeholder&quot;
)
</code></pre>
<p>Proposal:</p>
<pre><code class="language-diff"> # Bad, inconsistent
 test_string = (
     f&quot;this is a string without placeholders &quot;
-    &quot;and this is also without placeholders &quot;
+    f&quot;and this is also without placeholders &quot;
     f&quot;{some_string} is in a placeholder&quot;
 )
 # Fine
 test_string = (
-    &quot;this is a string without placeholders &quot;
+    f&quot;this is a string without placeholders &quot;
     f&quot;{some_string} is in a placeholder&quot;
 )
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-12-31 15:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @ntBre on 2025-12-31 15:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-31 15:13</div>
            <div class="timeline-body"><p>This makes sense to me! I'll put <code>needs-decision</code> on it for now to let others have a chance to weigh in, but this seems like a reasonable stylistic rule.</p>
<p>cc @amyreese</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amyreese">@amyreese</a> on 2026-01-09 01:24</div>
            <div class="timeline-body"><p>I do like the idea of keeping the same prefixes to align the literals. This would be a divergence from other linters though.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:44 UTC
    </footer>
</body>
</html>
