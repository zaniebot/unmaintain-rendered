<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a flag for disabling the update check or make it opt-in - astral-sh/ruff #1437</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a flag for disabling the update check or make it opt-in</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1437">#1437</a>
        opened by <a href="https://github.com/stinos">@stinos</a>
        on 2022-12-29 09:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/stinos">@stinos</a></div>
            <div class="timeline-body"><p>Something like <code>--no-update-check</code>. It's fairly uncommon for a commanline tool to have an update check, let alone one which is activated depending on log level and cannot be disabled (or I'm missing something, also possible). Alternative: don't do the update check by default but on demand only.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluetech">@bluetech</a> on 2022-12-29 14:10</div>
            <div class="timeline-body"><p><code>-q</code> disables the update check entirely (including the network call).</p>
<p>https://github.com/charliermarsh/ruff/blob/058ee8e6bf6ce482b8ac7423049fe3b9cc9e80a0/src/main_native.rs#L271-L275</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2022-12-29 15:16</div>
            <div class="timeline-body"><p>I don't think ruff should by default check for updates secretly in the background every time you run it ... that very much breaks the user expectations for a command-line tool. I think it would be better to just add some stderr output to <code>-V</code> / <code>--version</code> like:</p>
<pre><code>You can check if a new version is available at https://pypi.org/project/ruff/.

To update ruff via pip run:

    pip install ruff --upgrade
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stinos">@stinos</a> on 2022-12-29 16:04</div>
            <div class="timeline-body"><blockquote>
<p><code>-q</code> disables the update check entirely (including the network call).</p>
</blockquote>
<p>I'm aware. But <code>-q</code> also means no output so one cannot have verbose output combined with no update check. I'm actually not quite sure what the rationale is behind tying update on/off to log level.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-29 16:48</div>
            <div class="timeline-body"><p>Sure, we can add a setting to disable this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-29 16:48</div>
            <div class="timeline-body"><p>(Typing the update to log level is a side effect of the log level goal: show the check violations, and no other output.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @charliermarsh on 2022-12-29 16:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-12-29 18:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-29 18:32</div>
            <div class="timeline-body"><p>Going out in <a href="https://github.com/charliermarsh/ruff/releases/tag/v0.0.200">v0.0.200</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluetech">@bluetech</a> on 2022-12-29 19:37</div>
            <div class="timeline-body"><p>Congratulations on 200 releases! Ruff is really terrific.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-30 00:58</div>
            <div class="timeline-body"><p>@bluetech - Thank you so much! That means a lot. I love hearing it :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stinos">@stinos</a> on 2022-12-30 09:16</div>
            <div class="timeline-body"><blockquote>
<p>Going out in v0.0.200.</p>
</blockquote>
<p>Ok that was quick, thanks!!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:45:51 UTC
    </footer>
</body>
</html>
