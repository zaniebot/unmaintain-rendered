```yaml
number: 10207
title: "RUF022 `__all__` is not sorted: odd sorting algorithm"
type: issue
state: closed
author: ilius
labels: []
assignees: []
created_at: 2024-03-03T04:10:47Z
updated_at: 2024-03-04T05:45:11Z
url: https://github.com/astral-sh/ruff/issues/10207
synced_at: 2026-01-10T01:56:51Z
```

# RUF022 `__all__` is not sorted: odd sorting algorithm

---

_Issue opened by @ilius on 2024-03-03 04:10_

My code:
```
__all__ = [
	"Box",
	"GLibError",
	"GdkPixbuf",
	"HBox",
	"Menu",
	"MenuItem",
	"TWO_BUTTON_PRESS",
	"VBox",
	"gdk",
	"getOrientation",
	"getScrollValue",
	"gtk",
	"main_context_default",
	"pack",
	"pango",
	"source_remove",
	"timeout_add",
	"timeout_add_seconds",
]
```

I run `ruff . --preview` and get:

    RUF022 `__all__` is not sorted

I confirmed in Python shell that `sorted(__all__) == __all__`.

Is `ruff` using a different sorting method?

```
ruff version
ruff 0.3.0
```

---

_Comment by @ilius on 2024-03-03 07:51_

Moving `TWO_BUTTON_PRESS` to the top fixed it.
Looks like full-uppercase names with length>=2 should be first!
It's kinda odd!

Is this documented somewhere?

It's not very convenient since editors can not sort this way.

---

_Renamed from "RUF022 `__all__` is not sorted: false positive?" to "RUF022 `__all__` is not sorted: odd sorting algorithm" by @ilius on 2024-03-03 07:54_

---

_Comment by @charliermarsh on 2024-03-03 18:20_

Yeah, it's documented in the rule documentation: https://docs.astral.sh/ruff/rules/unsorted-dunder-all/#what-it-does.

---

_Comment by @ilius on 2024-03-04 00:10_

Thanks.

Although the doc says the fix is safe.
But I had to pass --unsafe-fixes to get them fixed.

---

_Comment by @charliermarsh on 2024-03-04 00:23_

Lemme take a look at that.

---

_Comment by @charliermarsh on 2024-03-04 01:35_

The fix is only ever marked as safe, as far as I can tell from the code.

---

_Comment by @ilius on 2024-03-04 05:44_

You are right.
I think `"RUF"` was not in `lint.fixable` in `pyproject.toml`.

---

_Closed by @ilius on 2024-03-04 05:45_

---
