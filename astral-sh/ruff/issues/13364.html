<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`ruff format` check lines-after-imports options but not respect it - astral-sh/ruff #13364</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`ruff format` check lines-after-imports options but not respect it</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/13364">#13364</a>
        opened by <a href="https://github.com/trim21">@trim21</a>
        on 2024-09-16 03:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/trim21">@trim21</a> on 2024-09-16 03:01</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>I'm using <code>ruff 0.6.5 (8558126df 2024-09-13)</code> with config <code>tool.ruff.lint.isort.lines-after-imports = 2</code></p>
<p>ruff format warns about <code>lines-after-imports</code> are not -1,1,2 but did't add 2 empty lines after last import</p>
<p>for example, not changes for this file:</p>
<pre><code class="language-python">import io

with io.StringIO() as f:
    print(&quot;ok&quot;, file=f)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-09-16 07:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by @MichaReiser on 2024-09-16 07:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-16 07:55</div>
            <div class="timeline-body"><p>The <code>lines-after-imports</code> setting is a <code>isort</code> setting and <code>isort</code> runs as part of <code>ruff check</code> and not <code>ruff format</code>.</p>
<p>Can you try to run</p>
<pre><code class="language-shell">ruff check --fix --select I
</code></pre>
<p>It should add the two empty lines. We hope to integrate format into <code>ruff check</code> in the long-term and possibly move <code>isort</code> to <code>format</code> to reduce the confusion (see https://github.com/astral-sh/ruff/issues/8232)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-09-20 06:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jzr-supove">@jzr-supove</a> on 2025-03-05 12:40</div>
            <div class="timeline-body"><blockquote>
<p>ruff check --fix --select I</p>
</blockquote>
<p>@MichaReiser why it only works when I specify the <code>--select I</code> option?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trim21">@trim21</a> on 2025-03-05 12:41</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>ruff check --fix --select I</p>
</blockquote>
<p><a href="https://github.com/MichaReiser">@MichaReiser</a> why it only works when I specify the <code>--select I</code> option?</p>
</blockquote>
<p>It's an option of I rule</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:53 UTC
    </footer>
</body>
</html>
