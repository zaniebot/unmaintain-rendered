<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature request: new rule (and auto fix?) keyword only parameters - astral-sh/ruff #8382</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Feature request: new rule (and auto fix?) keyword only parameters</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/8382">#8382</a>
        opened by <a href="https://github.com/tiangolo">@tiangolo</a>
        on 2023-10-31 17:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/tiangolo">@tiangolo</a> on 2023-10-31 17:27</div>
            <div class="timeline-body"><p>This is something I like to do and request people do as well, but I haven't seen a linter that implements my (personal) rule.</p>
<p>I'm a bit ashamed of coming just to add a new issue to request a new non-existing rule/fix just because I would want it, but anyway, worth trying. ðŸ˜…</p>
<h2>Description</h2>
<p>I try to avoid callables (functions, methods) with more than two positional parameters/arguments.</p>
<p>I told @Kludex about it a while ago, and he built https://github.com/Kludex/kwonly-transformer which is very close to what I want.</p>
<p>There is also https://github.com/vchaptsev/flake8-keyword-arguments which is a bit closer but only implements the rule/error, not the fix.</p>
<h2>Specification (?)</h2>
<p>Here's the description of what I would like.</p>
<p>It applies both to creating a function/method signature and to calling it.</p>
<ul>
<li>If there are at most 2 parameters/arguments, it's fine to leave them positional.</li>
<li>If there are more than 2 parameters/arguments:<ul>
<li>If at most 2 are required and the rest are optional, the two parameters can be positional but the rest should be keyword only.</li>
<li>If there are more than 2 parameters/arguments required, all of them have to be keyword only.</li>
</ul>
</li>
</ul>
<p>I tend to be a bit stricter than that, but I would think that's generalizable enough that it could be useful to others. For example, if there's one required parameter and the rest are optional, I would try to allow only the first one to be positional, all the others would be required to be keyword only. The rationale is that normally it's a function that applies to a specific object and has some parameters/modifications for how to apply it.</p>
<p>The reason for 2 parameters and allowing 2 in most places is mainly for the cases when an operation applies to two things, one is in some way the origin/source and the other is the destiny, so it can be considered starting from the first and going to the second (going left to right, the same direction as when writing or reading code).</p>
<p>Maybe that could be a configurable threshold, could be 2, or could be 0 for people who don't want any positional argument... don't know, for me, it would be fine if it was fixed at 2.</p>
<h2>Other ideas</h2>
<p>It could be stricter and with more rules, with other things like, if all parameters/arguments are optional, they should all be required, but that (and other potential extra rules) is probably more cumbersome and less flexible.</p>
<h2>Auto Fix</h2>
<p>Of course, it would be great if it could not just show the error but also auto fix it, but not sure how difficult that is, it would change the calls and hopefully also the function signature.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-10-31 17:37</div>
            <div class="timeline-body"><p>Thanks for the comprehensive suggestion! There's some discussion at https://github.com/astral-sh/ruff/discussions/8137 already too.</p>
<p>I agree with the general sentiment that positional argument use should be limited.</p>
<p>We may have a hard time with the fix, as we don't perform fixes across multiple files yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @zanieb on 2023-10-31 17:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tiangolo">@tiangolo</a> on 2023-11-01 09:29</div>
            <div class="timeline-body"><p>Ah! yes, it seems that's related to the same, sorry, I only checked on issues and not on discussions. ðŸ˜…  Feel free to close this one!</p>
<p>About the fix, get it, maybe just fixing the calls (and not the signature) would already do most of the work. But in any case, even just the rule detecting it would help a lot.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8907.html">astral-sh/ruff#8907</a> on 2023-11-29 23:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jack-mcivor">@jack-mcivor</a> on 2024-02-06 12:08</div>
            <div class="timeline-body"><p>FWIW I found a couple of additional issues that I think are the same</p>
<ul>
<li>https://github.com/astral-sh/ruff/issues/3269</li>
<li>https://github.com/astral-sh/ruff/issues/4235</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../waltsims/k-wave-python/pulls/564.html">waltsims/k-wave-python#564</a> on 2025-03-16 15:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:11 UTC
    </footer>
</body>
</html>
