<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overriding one sub-setting nulls out other inherited settings - astral-sh/ruff #4348</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Overriding one sub-setting nulls out other inherited settings</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/4348">#4348</a>
        opened by <a href="https://github.com/hotpxl">@hotpxl</a>
        on 2023-05-10 14:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/hotpxl">@hotpxl</a> on 2023-05-10 14:56</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<h2>Problem description</h2>
<p>I'm using <code>extend</code> to extend the base configuration from a parent directory, then override <code>isort.required-imports</code>. But as soon as I override <code>isort.required-imports</code>, other settings under <code>isort</code> section from the parent configuration are lost. I was expecting to only override the sub-setting I specified and inherit the rest.</p>
<p>For reproducing the issue, I have the following tree:</p>
<pre><code>root/
  .ruff.toml
  subdir/
    .ruff.toml
    a.py
</code></pre>
<p><code>root/.ruff.toml</code> has</p>
<pre><code>select = [&quot;I&quot;]

[isort]
required-imports = [&quot;from __future__ import annotations&quot;]
forced-separate = [&quot;my_utils&quot;]
</code></pre>
<p><code>root/subdir/.ruff.toml</code> has</p>
<pre><code>extend = &quot;../.ruff.toml&quot;

[isort]
required-imports = []
</code></pre>
<p><code>root/subdir/a.py</code> has</p>
<pre><code>import my_utils
import other_utils

my_utils.a()
other_utils.b()
</code></pre>
<p>When I run <code>ruff check --fix **/**</code>, ruff <em>does not</em> split my_utils and other_utils imports, unless I also add <code>forced-separate = [&quot;my_utils&quot;]</code> to <code>root/subdir/.ruff.toml</code>.</p>
<p>(I can also verify this behavior using <code>--show-settings</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @charliermarsh on 2023-05-10 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-12 01:34</div>
            <div class="timeline-body"><p>I agree -- we should be overriding on a per-key basis, not a per-section basis.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4431.html">astral-sh/ruff#4431</a> on 2023-05-14 14:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-05-15 02:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/9872.html">astral-sh/ruff#9872</a> on 2024-02-07 12:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:50 UTC
    </footer>
</body>
</html>
