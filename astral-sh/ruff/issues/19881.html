<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Change &quot;description&quot; key layout in gitlab output format - astral-sh/ruff #19881</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Change &quot;description&quot; key layout in gitlab output format</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/19881">#19881</a>
        opened by <a href="https://github.com/ppiasek">@ppiasek</a>
        on 2025-08-12 16:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ppiasek">@ppiasek</a> on 2025-08-12 16:34</div>
            <div class="timeline-body"><p>Hey! We are using Ruff in our project and have integrated it with Gitlab's codequality reports. Apart from that, we are using a few other tools using the same reports, and we have noticed that we struggle to find what kind of check is reported by Ruff in codequality report, because only the description is displayed there.</p>
<p>Example:
<code>Major - Missing docstring in public package in &lt;file&gt;</code></p>
<p>This might be obvious for someone, but we are in the process of setting up a new repo and polishing rule configuration - removing rules that we do not like (we started from enabling all the possible rules). I noticed that pylint, on the other hand, displays it much better.</p>
<p>Example:
<code>Critical - E1120: No value for argument 'url' in function call in &lt;file&gt;</code></p>
<p>The description from pylint contains the actual check name.</p>
<p>How does it look from the code?</p>
<p>Right now, Ruff has it implemented like this:</p>
<pre><code>let value = json!({
                &quot;check_name&quot;: check_name,
                &quot;description&quot;: description,
                &quot;severity&quot;: &quot;major&quot;,
                &quot;fingerprint&quot;: format!(&quot;{:x}&quot;, message_fingerprint),
                &quot;location&quot;: {
                    &quot;path&quot;: path,
                    &quot;positions&quot;: {
                        &quot;begin&quot;: start_location,
                        &quot;end&quot;: end_location,
                    },
                },
            });
</code></pre>
<p>How I would imagine it:</p>
<pre><code>let value = json!({
                &quot;check_name&quot;: check_name,
                &quot;description&quot;: check_name + &quot; &quot; + description, # sorry for the syntax, don't know Rust at all
                &quot;severity&quot;: &quot;major&quot;,
                &quot;fingerprint&quot;: format!(&quot;{:x}&quot;, message_fingerprint),
                &quot;location&quot;: {
                    &quot;path&quot;: path,
                    &quot;positions&quot;: {
                        &quot;begin&quot;: start_location,
                        &quot;end&quot;: end_location,
                    },
                },
            });
</code></pre>
<p>Optionally there could be a setting whether to display check_name + description or just description.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-12 17:38</div>
            <div class="timeline-body"><p>Thanks for the report! I've been working on our diagnostics recently, so this is good to know.</p>
<p>In our snapshot tests, the rule code is included in the <code>check_name</code> field:</p>
<p>https://github.com/astral-sh/ruff/blob/6f42c0d143460adf833caff139c11e9eaff7752d/crates/ruff/tests/snapshots/lint__output_format_gitlab.snap#L19-L24</p>
<p>Is that rendered anywhere by GitLab?</p>
<p>Edit: Sorry, I guess you already noticed that that's what the <code>check_name</code> is. I'm just surprised that it's not rendered with the description on GitLab.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by @ntBre on 2025-08-12 17:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-12 17:53</div>
            <div class="timeline-body"><p>I was curious and set up a GitLab repo to test this out, and it looks just like you said:</p>
<p><img width="429" height="128" alt="Image" src="https://github.com/user-attachments/assets/31c3a666-cd79-47bd-938d-e5d9dd8c3c36" /></p>
<p>I think it definitely makes sense to use a description like what you suggested!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-08-13 06:55</div>
            <div class="timeline-body"><p>Interesting (and somewhat surprising) design decision from GitLab. I agree, this change makes sense and should be a piece of cake for @ntBre</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-08-13 15:19</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:38:11 UTC
    </footer>
</body>
</html>
