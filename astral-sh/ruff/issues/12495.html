<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SyntaxError on py2 code - astral-sh/ruff #12495</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>SyntaxError on py2 code</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12495">#12495</a>
        opened by <a href="https://github.com/serjflint">@serjflint</a>
        on 2024-07-24 17:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/serjflint">@serjflint</a></div>
            <div class="timeline-body">

<p>Hi! After updating from 0.3.4 to 0.5.3 ruff started to print unskippable (can&#x27;t noqa them) SyntaxError.
Previously comments like <code># noqa: E999 py2 incompatibility</code> worked fine.
An easiest reproducer would be <code>{}.get(&#x27;a&#x27;, 0L)</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-07-24 19:03</div>
            <div class="timeline-body"><p>Ruff doesn&#x27;t support parsing or analyzing Python 2. I recommend you to <code>exclude</code> python 2 files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/serjflint">@serjflint</a> on 2024-07-24 20:21</div>
            <div class="timeline-body"><blockquote>
<p>Ruff doesn&#x27;t support parsing or analyzing Python 2. I recommend you to <code>exclude</code> python 2 files.</p>
</blockquote>
<p>It&#x27;s certainly a reasonable approach. And I don&#x27;t really want to check them. But it&#x27;s too much work to separate. The extension is the same for both py2 and py3 files and there is no easy way to build a regex. Tens of thousands of files in different directories.</p>
<p>The thing is, in previous versions of ruff I could just noqa them in place. Putting a noqa at the beginning of the file doesn&#x27;t help (as in pylint). On the other hand, only about 10 files raised a SyntaxError when checked by ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-07-25 05:54</div>
            <div class="timeline-body"><blockquote>
<p>The thing is, in previous versions of ruff I could just noqa them in place. Putting a noqa at the beginning of the file doesn&#x27;t help (as in pylint). On the other hand, only about 10 files raised a SyntaxError when checked by ruff.</p>
</blockquote>
<p>You can still do the same, but instead of adding a noqa for those few files, add them to your &quot;exclude&quot; configuration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-07-25 05:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-07-25 06:23</div>
            <div class="timeline-body"><p>https://astral.sh/blog/ruff-v0.5.0#changes-to-e999-and-reporting-of-syntax-errors provides some context on why this was done.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/serjflint">@serjflint</a> on 2024-07-25 07:29</div>
            <div class="timeline-body"><blockquote>
<p>https://astral.sh/blog/ruff-v0.5.0#changes-to-e999-and-reporting-of-syntax-errors provides some context on why this was done.</p>
</blockquote>
<p>Thank you. Now I see the reasoning.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:56 UTC
    </footer>
</body>
</html>
