<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SyntaxError on py2 code - astral-sh/ruff #12495</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>SyntaxError on py2 code</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/12495">#12495</a>
        opened by <a href="https://github.com/serjflint">@serjflint</a>
        on 2024-07-24 17:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/serjflint">@serjflint</a> on 2024-07-24 17:02</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>Hi! After updating from 0.3.4 to 0.5.3 ruff started to print unskippable (can't noqa them) SyntaxError.
Previously comments like <code># noqa: E999 py2 incompatibility</code> worked fine.
An easiest reproducer would be <code>{}.get('a', 0L)</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-07-24 19:03</div>
            <div class="timeline-body"><p>Ruff doesn't support parsing or analyzing Python 2. I recommend you to <code>exclude</code> python 2 files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/serjflint">@serjflint</a> on 2024-07-24 20:21</div>
            <div class="timeline-body"><blockquote>
<p>Ruff doesn't support parsing or analyzing Python 2. I recommend you to <code>exclude</code> python 2 files.</p>
</blockquote>
<p>It's certainly a reasonable approach. And I don't really want to check them. But it's too much work to separate. The extension is the same for both py2 and py3 files and there is no easy way to build a regex. Tens of thousands of files in different directories.</p>
<p>The thing is, in previous versions of ruff I could just noqa them in place. Putting a noqa at the beginning of the file doesn't help (as in pylint). On the other hand, only about 10 files raised a SyntaxError when checked by ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-07-25 05:54</div>
            <div class="timeline-body"><blockquote>
<p>The thing is, in previous versions of ruff I could just noqa them in place. Putting a noqa at the beginning of the file doesn't help (as in pylint). On the other hand, only about 10 files raised a SyntaxError when checked by ruff.</p>
</blockquote>
<p>You can still do the same, but instead of adding a noqa for those few files, add them to your &quot;exclude&quot; configuration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-07-25 05:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-07-25 06:23</div>
            <div class="timeline-body"><p>https://astral.sh/blog/ruff-v0.5.0#changes-to-e999-and-reporting-of-syntax-errors provides some context on why this was done.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/serjflint">@serjflint</a> on 2024-07-25 07:29</div>
            <div class="timeline-body"><blockquote>
<p>https://astral.sh/blog/ruff-v0.5.0#changes-to-e999-and-reporting-of-syntax-errors provides some context on why this was done.</p>
</blockquote>
<p>Thank you. Now I see the reasoning.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
