```yaml
number: 9809
title: Misunderstood skip-magic-trailing-comma
type: issue
state: closed
author: korolkevich
labels:
  - question
assignees: []
created_at: 2024-02-03T17:30:32Z
updated_at: 2024-02-04T12:29:27Z
url: https://github.com/astral-sh/ruff/issues/9809
synced_at: 2026-01-10T01:56:51Z
```

# Misunderstood skip-magic-trailing-comma

---

_Issue opened by @korolkevich on 2024-02-03 17:30_

Hi. If we use the 'ruff' format with 'skip-magic-trailing-comma' set to false, with example:

```
# input:
def _example_function_xxxxxxx(variable: Optional[List[str]], variable2: Optional[List[str]]) -> List[example.ExampleConfig]:
    pass
```

 we get the following result:

```
def _example_function_xxxxxxx(
    variable: Optional[List[str]], variable2: Optional[List[str]]
) -> List[example.ExampleConfig]:
    pass
```
but why not this?
```
def _example_function_xxxxxxx(
    variable: Optional[List[str]], 
    variable2: Optional[List[str]],
) -> List[example.ExampleConfig]:
    pass
```


https://play.ruff.rs/6dceb416-dc2d-48a5-9eb6-6b8bc2cc5990







---

_Comment by @zanieb on 2024-02-03 20:01_

Because this fits on one line, the trailing comma is not added.

`skip-magic-trailing-comma` is for a different purpose. If you have

```python
def _example_function_xxxxxxx(
    variable: Optional[List[str]], 
    variable2: Optional[List[str]],
) -> List[example.ExampleConfig]:
    pass
```

With `skip-magic-trailing-comma = true` the parameters will be collapsed to one line when formatted whereas by default (`= false`) the trailing comma would be respected as an indication that we should leave the parameters on separate lines even though they would fit on a single line.

https://docs.astral.sh/ruff/settings/#format_skip-magic-trailing-comma

---

_Label `question` added by @zanieb on 2024-02-03 20:01_

---

_Comment by @korolkevich on 2024-02-04 05:44_

Is there any way to convert Example1 to Example2? Perhaps with certain configurations?
```
# Example1:
def _example_function_xxxxxxx(variable: Optional[List[str]], variable2: Optional[List[str]]) -> List[example.ExampleConfig]:
    pass
```


```
def _example_function_xxxxxxx(
    variable: Optional[List[str]], 
    variable2: Optional[List[str]],
) -> List[example.ExampleConfig]:
    pass
```

---

_Comment by @MichaReiser on 2024-02-04 11:01_

@korolkevich I'm sorry, but there's no such configuration. You can add a trailing comma after the last argument to make Ruff format each argument on its own line. But I think you want something else. What I understand is that you want ruff to never format the arguments on on a single line, even if it makes them fit:

```python
# Example1:
def _example_function_xxxxxxx(variable: Optional[List[str]], variable2: Optional[List[str]]) -> List[example.ExampleConfig]:
    pass
```

or 

```python
def _example_function_xxxxxxx(
    variable: Optional[List[str]], 
    variable2: Optional[List[str]],
) -> List[example.ExampleConfig]:
    pass
```

but never

```python
def _example_function_xxxxxxx(
    variable: Optional[List[str]], variable2: Optional[List[str]]
) -> List[example.ExampleConfig]:
    pass
```
For which no configuration option exists.

---

_Comment by @korolkevich on 2024-02-04 12:29_

@MichaReiser thank you :)

---

_Closed by @korolkevich on 2024-02-04 12:29_

---

_Referenced in [nvaccess/nvda#16804](../../nvaccess/nvda/pulls/16804.md) on 2024-07-03 06:54_

---
