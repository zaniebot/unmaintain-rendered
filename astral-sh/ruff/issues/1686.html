<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B023 False positives - astral-sh/ruff #1686</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>B023 False positives</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1686">#1686</a>
        opened by <a href="https://github.com/TomFryers">@TomFryers</a>
        on 2023-01-06 09:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/TomFryers">@TomFryers</a> on 2023-01-06 09:24</div>
            <div class="timeline-body"><p>False positive B023 errors are quite common with <code>filter</code>, <code>reduce</code>, <code>key=</code>, <code>return</code> and <code>map</code>. For instance, this code</p>
<pre><code class="language-python">unsorted_things = [([&quot;foo&quot;, &quot;bar&quot;], 0), ([&quot;foobar&quot;, &quot;barfoo&quot;], 4), ([&quot;baz&quot;, &quot;foo&quot;, &quot;moo&quot;], 1)]
for unsorted_thing, letter in unsorted_things:
    unsorted_thing.sort(key=lambda x: (x[letter], len(x)))
</code></pre>
<p>is fine, but it currently gets flagged as B023.</p>
<p>This was raised in Flake8 Bugbear in issue <a href="https://github.com/PyCQA/flake8-bugbear/pull/303">303</a> (and <a href="https://github.com/PyCQA/flake8-bugbear/pull/305">305</a>) and fixed in <a href="https://github.com/PyCQA/flake8-bugbear#221027">22.10.27</a>.</p>
<p>Ignoring these does cause some false negatives, for instance if the <code>filter</code> or <code>map</code> is not evaluated before the next iteration, but this was deemed acceptable in the Bugbear issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-06 12:18</div>
            <div class="timeline-body"><p>Ah cool. We can fix this! Thanks for filing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-01-06 12:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-01-11 01:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-11 02:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:28:47 UTC
    </footer>
</body>
</html>
