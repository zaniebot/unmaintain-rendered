<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ignore configuration from pyproject.toml is ignored when using --select from the CLI - astral-sh/ruff #18352</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ignore configuration from pyproject.toml is ignored when using --select from the CLI</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18352">#18352</a>
        opened by <a href="https://github.com/YoniPrv">@YoniPrv</a>
        on 2025-05-28 12:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/YoniPrv">@YoniPrv</a> on 2025-05-28 12:05</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hi all,</p>
<p>I don't know if this is a bug or indented behavior but when i use the select statement it tends to ignore the ignore configuration in my toml.
Example toml:</p>
<pre><code>[tool.ruff.lint]
select = [&quot;D&quot;, &quot;PL&quot;, &quot;F&quot;, &quot;E&quot;, &quot;I&quot;, &quot;S&quot;, &quot;DTZ&quot;]
ignore = [&quot;S101&quot;]
</code></pre>
<p>with <code>ruff check | grep S101</code> i get no results and the S101 gets ignored</p>
<p>But when I execute <code>ruff check --select=S | grep S101</code> I get results back</p>
<pre><code>$ ruff check --select=S | grep S101
abc.py:34:9: S101 Use of `assert` detected
   |         ^^^^^^ S101
</code></pre>
<p>Is it normal behavior that ignore is ignored when using the select statement?</p>
<h3>Version</h3>
<p>ruff 0.11.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-28 12:08</div>
            <div class="timeline-body"><p>That's intended. you have to use <code>--extend-select</code> to extend the selection from your configuration</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-05-28 12:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/YoniPrv">@YoniPrv</a> on 2025-05-28 12:12</div>
            <div class="timeline-body"><pre><code>$ ruff check --extend-select=S | grep S101
abc.py:34:9: S101 Use of `assert` detected
   |         ^^^^^^ S101
</code></pre>
<p>this also returns S101 errors?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-28 12:18</div>
            <div class="timeline-body"><p>Oh sorry, I was a bit too quick with replying.</p>
<p>This is still intentional. <code>--select</code> takes precedence over the <code>ignore</code> in the configuration. You'd have to write <code>--select S --ignore S101</code> or ignore all rules except <code>S</code> <code>--ignore D --ignore PL --ignore F --ignore E --ignore I --ignore DTZ</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/YoniPrv">@YoniPrv</a> on 2025-05-28 13:00</div>
            <div class="timeline-body"><p>Oh. Thats a bummer.
We are using a pre-commit configuration and splitted it in multiple sections (fix/exit-zero) for our ci/cd pipeline to make it not crash on errors we don't want.
e.g.</p>
<pre><code>      - id: ruff
        name: ruff-bandit
        verbose: true
        args: [&quot;--select=S&quot;, &quot;--exit-zero&quot;]

      - id: ruff
        name: ruff-datetime
        args: [&quot;--select=DTZ&quot;, &quot;--fix&quot;] 
        types_or: [python, pyi]

</code></pre>
<p>At the moment we have multiple ignores in the .toml file so that vscode can use them.
This means we have to duplicate our ignores in our precommit configuration as well as in our toml?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-28 13:07</div>
            <div class="timeline-body"><p>Yes. It would only matter for rules that overlap, though. Like, I don't think you need to do <code>--select S --ignore D</code>. You'd just need <code>--select S --ignore S101</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @YoniPrv on 2025-06-24 11:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:17 UTC
    </footer>
</body>
</html>
