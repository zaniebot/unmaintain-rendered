<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature request: Ignore specific rule on per file basis via in-file comment - astral-sh/ruff #2446</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Feature request: Ignore specific rule on per file basis via in-file comment</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2446">#2446</a>
        opened by <a href="https://github.com/mmarras">@mmarras</a>
        on 2023-02-01 17:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mmarras">@mmarras</a></div>
            <div class="timeline-body"><p>I know we can ignore specific files per toml (<code>per-file-ignores</code>) and we can also ignore the whole file by putting <code># ruff: noqa</code>  at the top of the file. Also I can do <code>--extend-ignore=&lt;rule&gt;</code>.</p>
<p>But how about if I want to ignore only one specifc rule in this file?</p>
<p>The first solution per toml file is not possible for my workflow, the last one does not help with a --pre-commit huck. Would it be possible to allow for it via the in-line comment alla <code># ruff: noqa: N803</code>.</p>
<p>Background, I am programming a physics based model and N803 is giving me hell, as we use capital variables because they do have commonly understood physical meaning (t for time and T for temperature).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Alphasite">@Alphasite</a> on 2023-02-02 01:11</div>
            <div class="timeline-body"><p>I suspect <code>extends-per-file-ignore</code> would solve many of the common use cases for this as well. That is biting me a little as well for our monorepo.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-02 01:14</div>
            <div class="timeline-body"><p>You can always turn off the <code>N803</code> violation entry (<code>ignore = [&quot;N803&quot;]</code> in your <code>pyproject.toml</code>), but I assume you want to keep it enabled, and just disable it in select files -- is that right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-02 01:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mmarras">@mmarras</a> on 2023-02-02 07:36</div>
            <div class="timeline-body"><blockquote>
</blockquote>
<p>That is correct. I‘m working on a django app, which, as explained earlier, encapsulates a physics based model. So here N803 and friends should be off as upper-case conveys meaning, but in general we like the idea of keeping things lower-case in all other apps in general.</p>
<p>Also for this specific project, the .toml is managed by the repo owner, many people contributing apps. And we have pre-commit hooks in place which prevent you from pushing changes to config files. Of course I could ask for a change or force-commit, I was just thinking why not make #ruff: noqa more fine-grained, would be the perfect match for my use-case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-03 19:48</div>
            <div class="timeline-body"><p>Flake8 intentionally doesn&#x27;t support this IIUC. Clippy (Rust&#x27;s linter) does support something like it although their system is very powerful and effectively allows you to turn rules on and off in any scope.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-17 01:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-17 01:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mmarras">@mmarras</a> on 2023-02-17 07:08</div>
            <div class="timeline-body"><p>Awesome! Thanks for picking this one up in no time. On Feb 17, 2023, at 02:59, Charlie Marsh <em><strong>@</strong></em>.***&gt; wrote:﻿
Closed #2446 as completed via e081455.</p>
<p>—Reply to this email directly, view it on GitHub, or unsubscribe.You are receiving this because you authored the thread.Message ID: <em><strong>@</strong></em>.***&gt;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yasirroni">@yasirroni</a> on 2023-03-07 13:02</div>
            <div class="timeline-body"><p>For those that come here but did not understand how to use that, see the docs on per-file-ignores <a href="https://beta.ruff.rs/docs/settings/#per-file-ignores">here</a>. An example is how FastAPI use that <a href="https://github.com/tiangolo/fastapi/blob/66e03c816b8185d6ee8fc6d10fbb410bcb385105/pyproject.toml#L177-L186">here</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/egeres">@egeres</a> on 2023-07-09 12:21</div>
            <div class="timeline-body"><p>It seems that the <code># flake8: noqa</code> syntax disables ruff for a singular file without having to edit the <code>pyproject.toml</code>!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-09 19:36</div>
            <div class="timeline-body"><p>Yes, you can use <code># ruff: noqa</code> or (for example) <code># ruff: noqa: F401</code> to turn off violations all violations or a specific rule, respectively, within a given file. (<code># flake8: noqa</code> is also supported for compatibility.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/1vecera">@1vecera</a> on 2025-05-09 09:42</div>
            <div class="timeline-body"><p>I&#x27;d still like to be able to define it on a per-file basis so that different sets of rules apply to different portions of the project.</p>
<p>Use case:</p>
<ul>
<li>My tests have a very lax set of rules when it comes to code quality</li>
<li>My pipeline code has bit more relax set of rules</li>
<li>My tests have nearly no rules apply to them</li>
</ul>
<p>Writing #noqa 100x times wastes effort and generates hard-to-maintain code. @charliermarsh - I&#x27;d be happy for your view.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-09 09:55</div>
            <div class="timeline-body"><p>@1vecera have you tried <a href="https://docs.astral.sh/ruff/settings/#lint_per-file-ignores"><code>per-file-ignore</code></a>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/daniel-vecera-nova">@daniel-vecera-nova</a> on 2025-05-09 10:34</div>
            <div class="timeline-body"><p>Ahh, wasn&#x27;t aware this existed, Thanks @MichaReiser</p>
<p>For anyone stumbling here:</p>
<ul>
<li>use #noqa: RULESECTIONRULENUMBER to ignore inline</li>
<li>Use <a href="https://docs.astral.sh/ruff/settings/#lint_per-file-ignores">per-file-ignore</a> to set specific rules for a set of files!</li>
</ul>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:31 UTC
    </footer>
</body>
</html>
