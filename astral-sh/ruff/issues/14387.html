<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rule proposal: require explicit `strict=` argument for `itertools.batched` - astral-sh/ruff #14387</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rule proposal: require explicit <code>strict=</code> argument for <code>itertools.batched</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14387">#14387</a>
        opened by <a href="https://github.com/tjkuson">@tjkuson</a>
        on 2024-11-16 20:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tjkuson">@tjkuson</a></div>
            <div class="timeline-body"><p><a href="https://docs.python.org/3/library/itertools.html#itertools.batched">As of Python 3.13</a>, <code>itertools.batched</code> has a <code>strict</code> parameter that defaults to <code>False</code>.  By default, the batches might not be of the same size, which may cause subtle bugs. When<code>strict=True</code>, it raises <code>ValueError</code> if the final batch is not the same size as the rest.</p>
<p>This seems analogous to the existing rule <code>B905</code> which requires an explicit <code>strict=</code> parameter for <code>zip</code>. Hence, I think it makes sense if there is a similar rule for <code>itertools.batched</code>.</p>
<p>I also created an <a href="https://github.com/PyCQA/flake8-bugbear/issues/498">issue</a> <code>flake8-bugbear</code> which seems like a natural place for the rule given the similarity to <code>B905</code>.</p>
<p>Searched keywords: <code>itertools.batched</code>, <code>itertools</code>, <code>batched</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-11-16 22:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2024-11-17 02:25</div>
            <div class="timeline-body"><p>I&#x27;ll take this on.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-18 07:35</div>
            <div class="timeline-body"><p>Thanks for creating the upstream issue. Let&#x27;s see what the outcome is upstream before adding this rule to avoid recoding in the near future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjkuson">@tjkuson</a> on 2024-12-08 15:02</div>
            <div class="timeline-body"><p>Merged as <code>B911</code> upstream.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-08 17:38</div>
            <div class="timeline-body"><p>Great. @InSyncWithFoo do you want to update your PR and recode the rule to B911?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2024-12-08 18:18</div>
            <div class="timeline-body"><p>Done, and thanks @tjkuson for the heads-up.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-10 08:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:00 UTC
    </footer>
</body>
</html>
