<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Config Discovery: use `$XDG_CONFIG_HOME` on macOS - astral-sh/ruff #10739</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Global Config Discovery: use <code>$XDG_CONFIG_HOME</code> on macOS</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10739">#10739</a>
        opened by <a href="https://github.com/SPiCaRiA">@SPiCaRiA</a>
        on 2024-04-02 14:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/SPiCaRiA">@SPiCaRiA</a> on 2024-04-02 14:09</div>
            <div class="timeline-body"><p>Hi, I'm newly migrating to ruff and it works so far so good for me, thank you for making this great tool!</p>
<p>However, I noticed that ruff uses the <code>config_dir</code> in <code>dirs</code> crates, which goes to <code>$HOME/Library/Application Support</code> under macOS. Generally I believe that as a CLI tool (and like many others), ruff should probably stick with XDG config home under macOS. When I look into my <code>$HOME/Library/Application Support</code>, they're almost all GUI application stuffs. Also, I think it is expected &amp; intuitional to read config from <code>$XDG_CONFIG_HOME</code> since macOS mostly behave in *nix way.</p>
<p>Please let me know what you think :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @zanieb on 2024-04-02 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-02 14:11</div>
            <div class="timeline-body"><p>This seems reasonable to me but I'd like to hear from someone else on our team first too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-04-02 14:39</div>
            <div class="timeline-body"><p>We have a similar request in a comment for <code>uv</code> as well: https://github.com/astral-sh/uv/issues/1511</p>
<p>I'm not a macOS user so I don't have a good sense of what the right choice is. But my understanding is that <code>XDG_CONFIG_HOME</code> is commonly used on macOS. I have a fair number of things in my <code>~/.config</code> directory on my test mac mini for example.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-02 14:44</div>
            <div class="timeline-body"><p>I prefer Linux to macOS but use macOS as a daily driver and I would be very confused if <code>~/.config</code> was not a valid configuration path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-02 16:37</div>
            <div class="timeline-body"><p>I use macOS exclusively. Honestly, I wouldn't know where to expect the config to go. I'd have to look it up in the docs for any given tool. But looking at my machine, I do think <code>~/.config</code> is more appropriate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/baggiponte">@baggiponte</a> on 2024-04-04 21:11</div>
            <div class="timeline-body"><p>That was a matter of discussion for PDM too (which does not recognise the XDG_* vars for macOS). PDM does this because the underlying Python package platformdirs does this. As a mac user who versions their dotfiles, I spent a bit of time to make sure that as many projects as I use can save data under <code>~/.config</code>. It makes the most sense, it's more portable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-04-17 09:29</div>
            <div class="timeline-body"><p>Could you report this upstream at https://github.com/dirs-dev/dirs-rs? I'm not a mac user so i'm not qualified to weigh in on this, i just wouldn't want to diverge from the effective rust standard without an upstream discussion first</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-04-17 11:59</div>
            <div class="timeline-body"><p>@konstin I think it's been discussed before upstream and they are pretty opposed: https://github.com/dirs-dev/directories-rs/issues/47</p>
<p>I don't think I'd consider <code>dirs-rs</code> to be an effective Rust standard personally. But it is probably the most popular implementation of XDG.</p>
<p>There's also some other discussion that touches on this topic here: https://internals.rust-lang.org/t/pre-rfc-split-cargo-home/19747</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-04-17 12:04</div>
            <div class="timeline-body"><p>And in particular, it looks like <code>dirs</code> won't respect <code>XDG_CONFIG_HOME</code> on macOS? https://github.com/dirs-dev/directories-rs/issues/47#issuecomment-596467168</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-04-17 12:32</div>
            <div class="timeline-body"><p>If we want xdg over the platform default on mac, we should consider switching to something like  <a href="https://docs.rs/etcetera/latest/etcetera/app_strategy/struct.Xdg.html">etcetera's Xdg</a> and <code>etcetera::app_strategy::choose_app_strategy</code> (&quot;Returns the current OSâ€™s default <code>AppStrategy</code> This uses the <code>Windows</code> strategy on Windows, and <code>Xdg</code> everywhere else.&quot;) over <code>directories</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-04-23 20:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-06-27 11:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:33:23 UTC
    </footer>
</body>
</html>
