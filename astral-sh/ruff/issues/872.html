<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for `vulture`-like dead code detection - astral-sh/ruff #872</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for <code>vulture</code>-like dead code detection</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/872">#872</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2022-11-22 14:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><p>As a maintainer of a large Python codebase, I found <a href="https://github.com/jendrikseipp/vulture"><code>vulture</code></a> to be really useful, especially for detecting unused functions and unused modules.</p>
<p>This would require us to introduce some new patterns and capabilities that don't yet exist in Ruff, but should! For example, we need to be able to run some analysis over every file (list the used members), then reconcile that analysis post-hoc. We also need to be able to map from references to local modules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2022-11-22 14:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by @charliermarsh on 2022-12-31 18:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">plugin</span> added by @charliermarsh on 2022-12-31 18:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/olliemath">@olliemath</a> on 2023-05-12 12:57</div>
            <div class="timeline-body"><p>By the way there is a subset of vulture (and pylint) that would be useful even without mapping out the entire codebase, namely this sort of dead-code detection:</p>
<pre><code class="language-python">def oops():
    return 1
    return 2  # &lt;- guaranteed never to run
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-12 12:58</div>
            <div class="timeline-body"><p>Yeah I'm interested in doing this. @MichaReiser shared some links with me around building these kinds of control-flow graphs. I may write it up as a more detailed issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/saippuakauppias">@saippuakauppias</a> on 2023-06-08 06:48</div>
            <div class="timeline-body"><p>+1 we really miss this kind of linter in ruff</p>
<p>The most interesting thing is to find those functions and classes that are forgotten and do not run</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eronning">@eronning</a> on 2023-08-30 14:11</div>
            <div class="timeline-body"><p>Also +1 on linting these issues in ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">multifile-analysis</span> added by @zanieb on 2023-08-30 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/akx">@akx</a> on 2023-09-07 13:33</div>
            <div class="timeline-body"><p>+1 – would be nice.</p>
<p>Being 100% certain about deadness of names (even locals) can be tricky – e.g. PyCharm generally highlights (well, lowlights) unused locals, <em>unless</em> it notices <code>vars()</code>, <code>locals()</code>, etc. being used in the same scope, in which case it just throws its paws up and doesn't do that highlighting anymore.</p>
<p>For globals, it gets even harder because a tricky user could be <code>getattr</code>ing (or <code>vars().get</code>ing) from any given module.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FilipeBento">@FilipeBento</a> on 2023-10-11 16:37</div>
            <div class="timeline-body"><p>This would be extremely useful. I understand full implementation requires a lot of work, but checking if methods or variables are unused is very helpful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/choweth">@choweth</a> on 2023-12-19 17:50</div>
            <div class="timeline-body"><p>This <code>vulture</code>-like tool is great: https://github.com/asottile/dead</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2024-02-20 23:56</div>
            <div class="timeline-body"><p>Since this was opened a while ago, have there been any changes internally that would make such an implementation easier?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-02-21 05:23</div>
            <div class="timeline-body"><blockquote>
<p>Since this was opened a while ago, have there been any changes internally that would make such an implementation easier?</p>
</blockquote>
<p>Not yet. Adding multi-file analysis is a feature that's on our roadmap which will allow us to support this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alexbondar92">@alexbondar92</a> on 2024-08-07 13:04</div>
            <div class="timeline-body"><p>also +1 for this feature</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a> on 2024-09-18 17:26</div>
            <div class="timeline-body"><p>If this is implemented, one kind of dead code that is not caught by vulture is when a derived class has a useless override:</p>
<pre><code class="language-python">class Problem:
    def reward_threshold(self) -&gt; float:
        &quot;&quot;&quot;The average return threshold at which the problem is considered solved.&quot;&quot;&quot;
        raise NotImplementedError

class BasicProblem(Problem):  # This class was inserted as part of a refactor.
    @override
    def reward_threshold(self) -&gt; float:
        return 100.0

@dataclass
class GeometryProblem(BasicProblem):
    @override
    def reward_threshold(self) -&gt; float:  # Useless override — this was forgotten during the refactor.
        return 100.0
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by @MichaReiser on 2024-10-24 14:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">multifile-analysis</span> removed by @MichaReiser on 2024-10-24 14:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MedAzizTousli">@MedAzizTousli</a> on 2024-10-27 20:49</div>
            <div class="timeline-body"><p>Any updates on this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CharlesPerrotMinot">@CharlesPerrotMinot</a> on 2025-05-05 05:51</div>
            <div class="timeline-body"><p>Can't wait for it, especially with the pitfalls of vulture (doesn't recognize inheritance, or fastapi api tags)!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Spenhouet">@Spenhouet</a> on 2025-09-10 14:37</div>
            <div class="timeline-body"><p>Somewhat related feature requests:</p>
<ul>
<li>https://github.com/astral-sh/ruff/issues/17724 (also multifile analysis)</li>
<li>https://github.com/astral-sh/uv/issues/13904 (also on the unused topic)</li>
</ul>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:45:33 UTC
    </footer>
</body>
</html>
