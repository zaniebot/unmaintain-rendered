<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B905 and B912 fixes should be unsafe - astral-sh/ruff #20694</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>B905 and B912 fixes should be unsafe</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/20694">#20694</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-10-03 17:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dscorbett">@dscorbett</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>The fixes for <a href="https://docs.astral.sh/ruff/rules/zip-without-explicit-strict/"><code>zip-without-explicit-strict</code> (B905)</a> and <a href="https://docs.astral.sh/ruff/rules/map-without-explicit-strict/"><code>map-without-explicit-strict</code> (B912)</a> should be marked unsafe by the same reasoning as in <a href="https://github.com/astral-sh/ruff/pull/19518#issuecomment-3129685094">this comment</a>:</p>
<blockquote>
<p>The issue isn't that our fix would change behavior but that we could silently preserve the wrong behavior. Instead we should alert the user to the issue so that they can decide what it's supposed to say.</p>
</blockquote>
<p><a href="https://play.ruff.rs/827c9cbe-186f-4c52-9a15-71f571b8192d">Example</a>:</p>
<pre><code class="language-console">$ cat &gt;b9.py &lt;&lt;'# EOF'
print(list(zip(&quot;ab&quot;, &quot;123&quot;)))
print(list(map(lambda x, y: y + x, &quot;ab&quot;, &quot;123&quot;)))
# EOF

$ python b9.py
[('a', '1'), ('b', '2')]
['1a', '2b']

$ ruff --isolated check b9.py --select B905,B912 --preview --target-version py314 --fix
Found 2 errors (2 fixed, 0 remaining).

$ cat b9.py
print(list(zip(&quot;ab&quot;, &quot;123&quot;, strict=False)))
print(list(map(lambda x, y: y + x, &quot;ab&quot;, &quot;123&quot;, strict=False)))

$ python3.14 b9.py
[('a', '1'), ('b', '2')]
['1a', '2b']
</code></pre>
<h3>Version</h3>
<p>ruff 0.13.3 (188c0dce2 2025-10-02)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by @ntBre on 2025-10-03 19:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-10-07 20:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:24 UTC
    </footer>
</body>
</html>
