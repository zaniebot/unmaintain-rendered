<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload WASM packages for each release - astral-sh/ruff #1385</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Upload WASM packages for each release</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1385">#1385</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2022-12-26 19:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><p><em>No description provided.</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">playground</span> added by @charliermarsh on 2022-12-26 19:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mattrunyon">@mattrunyon</a> on 2024-05-16 00:03</div>
            <div class="timeline-body"><p>I was interested in uploading the wasm to npm and could contribute a PR to add this.</p>
<p>What would the desired npm package name be? <code>@astral-sh/ruff</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-05-27 15:37</div>
            <div class="timeline-body"><p>Charlie created a new <a href="https://www.npmjs.com/org/astral-sh"><code>astral-sh</code></a> organisation.</p>
<p>I would call it <code>@astral-sh/ruff-api</code> just to give us the option to publish the ruff binary to NPM in the future (we don't plan on doing this but you can never know).</p>
<p>What's important to me is that we very clearly mark the package as experimental. I suspect significant API changes to the linter API with the work of red-knot (multifile analysis).</p>
<p>@mattrunyon I suspect you need me to initialize an empty package to get started?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mattrunyon">@mattrunyon</a> on 2024-05-28 16:43</div>
            <div class="timeline-body"><p>I don't think an empty package needs to be created.</p>
<p>The main question would be how does this get handled w/ your organization's versioning/changelog tool. It looks like the package version is not available to the Rust workspaces, but is updated in just the published files (I think via some internal tool?). Without knowing how to tell that tool to update the cargo file version field for <code>ruff_wasm</code>, it could just be a step in the CI job that replaces the version (e.g. with <code>sed</code>) before running <code>wasm-pack</code>. The cargo version is used in the generated <code>package.json</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-05-29 08:24</div>
            <div class="timeline-body"><p>We use <a href="https://github.com/zanieb/rooster/">rooster</a> for our release process and it can bump the version number for you.</p>
<p>All you need to do is to list the <code>ruff_wasm/Cargo.toml</code> in the <code>version_files</code> section</p>
<p>https://github.com/astral-sh/ruff/blob/49a5a9ccc2b6b8f69bb64f87d3a915aff47eb02a/pyproject.toml#L107-L113</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vshymanskyy">@vshymanskyy</a> on 2024-07-12 11:40</div>
            <div class="timeline-body"><p>I'm really interested in this. While working on ViperIDE for MicroPython ( https://viper-ide.org ) I integrated the <code>mpy-cross</code> compiler using WebAssembly and it does report syntax errors. But it's not nearly as cool as ruff :)
Being able to install ruff as an NPM package would simplify things a lot.</p>
<p>I'm using CodeMirror 6 editor and bundling it with Rollup.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vshymanskyy">@vshymanskyy</a> on 2024-07-13 17:41</div>
            <div class="timeline-body"><p>Just some feedback. It was really easy to integrate ruff, the Workspace API is simple and clear, bundling with Rollup works like a charm. <strong>Kudos to the ruff team!</strong></p>
<p>If anyone needs a CodeMirror 6 linter, see https://github.com/vshymanskyy/ViperIDE/blob/main/src/editor.js#L203</p>
<p><img src="https://github.com/user-attachments/assets/f02d4290-1e5b-4875-b1e2-dff6526c328b" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-07-17 06:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-07-18 18:32</div>
            <div class="timeline-body"><p>The first version of the packages are up!</p>
<ul>
<li>Node.js: https://www.npmjs.com/package/@astral-sh/ruff-wasm-nodejs</li>
<li>Bundler: https://www.npmjs.com/package/@astral-sh/ruff-wasm-bundler</li>
<li>Web: https://www.npmjs.com/package/@astral-sh/ruff-wasm-web</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vshymanskyy">@vshymanskyy</a> on 2024-07-18 20:21</div>
            <div class="timeline-body"><p>Awesome, thank you</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:45:50 UTC
    </footer>
</body>
</html>
