<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ensure that line-length and doc-length behavior is consistent with Flake8 - astral-sh/ruff #2756</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Ensure that line-length and doc-length behavior is consistent with Flake8</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/2756">#2756</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-02-11 04:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-11 04:06</div>
            <div class="timeline-body"><p>See: https://github.com/charliermarsh/ruff/issues/1784#issuecomment-1426597334</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1784.html">astral-sh/ruff#1784</a> on 2023-02-11 04:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-02-11 04:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3846.html">astral-sh/ruff#3846</a> on 2023-04-01 12:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-01 16:07</div>
            <div class="timeline-body"><p>On further investigation, it seems that our current behavior <em>is</em> consistent with Flake8.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-04-01 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LukasMinogue">@LukasMinogue</a> on 2023-05-16 11:23</div>
            <div class="timeline-body"><p>@charliermarsh</p>
<blockquote>
<p>On further investigation, it seems that our current behavior <em>is</em> consistent with Flake8.</p>
</blockquote>
<p>https://github.com/charliermarsh/ruff/blob/6049aabe27ee536d40c8cf6f446f475d1a937318/ruff.schema.json#L1339-L1340</p>
<p>As far as I can see, that is not the case. It does not work for docstrings, nor single comments (isolated or at the end of a line).</p>
<p>I have several <code>E501 Line too long</code> warnings when using comments, that flake would ignore. I would not even mind, but since there is no auto-fix for this, it makes this a unwelcomed hassle and I could not find a way to change it or turn it off for just the comments.</p>
<p>I am using ruff 0.0.267.</p>
<p><strong>My <code>pyproject.toml</code> file</strong></p>
<pre><code>...
[tool.ruff]
line-length = 88
...

[tool.ruff.pycodestyle]
max-doc-length = 180
...
</code></pre>
<p><strong>Example file</strong></p>
<pre><code class="language-py">import numpy as np # this is a long comment increasing the length of this line over 88 characters

# this is a very very very very very very very very very long single line comment with a length over 88 characters.

def func():
    &quot;&quot;&quot;this is a very very very very very very very very very long doc string with a length over 88 characters.&quot;&quot;&quot;
    print(np.array([1,2,3]))
</code></pre>
<p><strong>Warnings</strong></p>
<pre><code class="language-bash">Untitled-1.py:2:89: E501 Line too long (97 &gt; 88 characters)
Untitled-1.py:4:89: E501 Line too long (115 &gt; 88 characters)
Untitled-1.py:7:89: E501 Line too long (114 &gt; 88 characters)
Found 3 errors.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-16 13:00</div>
            <div class="timeline-body"><p>Do you mind sharing your Flake8 configuration? In my experience and testing, Flake8 flags all of those line as E501:</p>
<pre><code class="language-shell">&gt; flake8 foo.py --select E501 --isolated
foo.py:1:80: E501 line too long (97 &gt; 79 characters)
foo.py:3:80: E501 line too long (115 &gt; 79 characters)
foo.py:6:80: E501 line too long (114 &gt; 79 characters)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-16 13:07</div>
            <div class="timeline-body"><p>Also note that Ruff doesn't enable the <code>W</code> rules by default:</p>
<pre><code>❯ ruff foo --select W505
foo/foo.py:3:101: W505 Doc line too long (115 &gt; 100 characters)
foo/foo.py:6:101: W505 Doc line too long (114 &gt; 100 characters)
</code></pre>
<p>And that Flake8 also doesn't flag end-of-line comments as &quot;doc lines&quot;:</p>
<pre><code class="language-shell">❯ flake8 foo.py --select W505 --max-doc-length 100 --isolated
foo.py:3:101: W505 doc line too long (115 &gt; 100 characters)
foo.py:6:101: W505 doc line too long (114 &gt; 100 characters)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LukasMinogue">@LukasMinogue</a> on 2023-05-16 13:45</div>
            <div class="timeline-body"><blockquote>
<p>Do you mind sharing your Flake8 configuration? In my experience and testing, Flake8 flags all of those line as E501:</p>
</blockquote>
<p>Excuse me, I overlooked the Error in my ignore list. You are right.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:08 UTC
    </footer>
</body>
</html>
