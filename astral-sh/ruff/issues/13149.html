<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multiline function definition headers - astral-sh/ruff #13149</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Multiline function definition headers</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13149">#13149</a>
        opened by <a href="https://github.com/RubenVanEldik">@RubenVanEldik</a>
        on 2024-08-29 09:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/RubenVanEldik">@RubenVanEldik</a></div>
            <div class="timeline-body"><p>I have a question about a quite opinionated formatting issue. Apologies if this has been discussed before, but it&#x27;s quite hard to search for it in the exiting issues.</p>
<p>When a list (or, set, tuple, etc) gets too long for a single line, it becomes a multiline statement where each item is on its own line. However, when the function arguments get too long (which happens very often when you&#x27;re adding types), the function arguments get all moved to their own line, if possible.</p>
<p>I think this intermediate solution is the worst of both worlds because the number of lines are tripled but the line length is often barely shorter. Which makes the whole function harder to read.</p>
<p>You can fix this yourself already by adding a comma after the last argument, but I would like to propose that if a function definition header does not fit on a single line, each argument should get it&#x27;s own line. Similar to lists, etc.</p>
<p>Before formatting:</p>
<pre><code>my_list_variable = [&quot;item_one&quot;, &quot;item_two&quot;, &quot;item_three&quot;, &quot;item_four&quot;, &quot;item_five&quot;, &quot;item_six&quot;]

def my_func(arg_1: int, arg_2: int, arg_3: int, arg_4: int, arg_5: int, arg_6: int, arg_7: int):
    pass
</code></pre>
<p>After formatting:</p>
<pre><code>my_list_variable = [
    &quot;item_one&quot;,
    &quot;item_two&quot;,
    &quot;item_three&quot;,
    &quot;item_four&quot;,
    &quot;item_five&quot;,
    &quot;item_six&quot;,
]


def my_func(
    arg_1: int, arg_2: int, arg_3: int, arg_4: int, arg_5: int, arg_6: int, arg_7: int
):
    pass
</code></pre>
<p>My proposed fromatting:</p>
<pre><code>my_list_variable = [
    &quot;item_one&quot;,
    &quot;item_two&quot;,
    &quot;item_three&quot;,
    &quot;item_four&quot;,
    &quot;item_five&quot;,
    &quot;item_six&quot;,
]


def my_func(
    arg_1: int,
    arg_2: int,
    arg_3: int,
    arg_4: int,
    arg_5: int,
    arg_6: int,
    arg_7: int,
):
    pass

</code></pre>
<p>(<a href="https://play.ruff.rs/94e8d3d7-a048-409e-a321-f0ac24a9db86">Ruff playground link</a>)</p>
<ul>
<li>List of keywords you searched for before creating this issue. `function definition header&#x27;, &#x27;function signature&#x27;</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-08-29 09:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-08-29 09:51</div>
            <div class="timeline-body"><p>Hi, thanks for opening the issue!</p>
<p>As with many formatting decisions, this is unfortunately quite subjective. Many people prefer the &quot;intermediate&quot; solution rather than their function definition immediately being exploded across multiple lines when it goes a single character over the line length. In this style decision -- as with most of our style decisions currently -- we follow what Black does.</p>
<p>However, are you aware of the formatter&#x27;s behaviour around trailing commas? If you have a trailing comma at the end of your parameter list, the formatter will always split the parameter list over multiple lines, even if it&#x27;s well below the maximum line length you&#x27;ve specified: https://play.ruff.rs/27f31e3e-5bf5-40e2-b142-4b885563940f</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RubenVanEldik">@RubenVanEldik</a> on 2024-08-29 10:00</div>
            <div class="timeline-body"><p>Hi Alex, thank you for your response!</p>
<p>It is indeed very subjective! I wanted to see if this could be a discussion for Ruff, but it makes total sense to follow Black in this regard. So I&#x27;ll close the issue!</p>
<p>For now I&#x27;ll just instruct all my colleagues manually to add the comma whenever it doesn&#x27;t fit on a single line anymore :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/RubenVanEldik">@RubenVanEldik</a> on 2024-08-29 10:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-08-29 10:06</div>
            <div class="timeline-body"><blockquote>
<p>For now I&#x27;ll just instruct all my colleagues manually to add the comma whenever it doesn&#x27;t fit on a single line anymore :)</p>
</blockquote>
<p>Ah, you can enforce it with one of our linter rules ;) https://docs.astral.sh/ruff/rules/missing-trailing-comma/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RubenVanEldik">@RubenVanEldik</a> on 2024-08-29 10:28</div>
            <div class="timeline-body"><p>You&#x27;re completely right.. Somehow I have added this rule to our ignore list a few months ago.</p>
<p>Sorry for discussing an a rule that I actively ignored myself... ðŸ™„ðŸ™„</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-08-29 10:33</div>
            <div class="timeline-body"><p>hehe, no worries!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:57 UTC
    </footer>
</body>
</html>
