<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rule `E203` conflicts with formatter - astral-sh/ruff #8642</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rule <code>E203</code> conflicts with formatter</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8642">#8642</a>
        opened by <a href="https://github.com/ofek">@ofek</a>
        on 2023-11-13 04:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ofek">@ofek</a> on 2023-11-13 04:19</div>
            <div class="timeline-body"><p>Running the formatter on</p>
<pre><code class="language-python">release_lines = history_file_lines[history_file_lines.index('## Unreleased') + 1: -1]
</code></pre>
<p>produces</p>
<pre><code class="language-python">release_lines = history_file_lines[history_file_lines.index('## Unreleased') + 1 : -1]
</code></pre>
<p>which then fails the rule</p>
<pre><code>scripts\utils.py:22:85: E203 Whitespace before ':'
</code></pre>
<p>Is the fix simply to document that here? https://docs.astral.sh/ruff/formatter/#conflicting-lint-rules</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-13 04:30</div>
            <div class="timeline-body"><p>I will add it to that list, though there's an open issue to fix the rule to allow this: https://github.com/astral-sh/ruff/issues/7259.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @charliermarsh on 2023-11-13 04:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-11-13 05:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-13 16:42</div>
            <div class="timeline-body"><p>I decided to just fix it instead.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2023-11-13 17:12</div>
            <div class="timeline-body"><p>Oh nice that's much better, thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-11-13 17:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JohannesBuchner">@JohannesBuchner</a> on 2025-01-27 09:27</div>
            <div class="timeline-body"><p>I am still getting this unwanted behaviour with ruff-0.9.3:</p>
<pre><code>$ cat &gt; foo.py
lanes[laneid + 1:]
$ ruff format foo.py
1 file reformatted
$ cat foo.py
lanes[laneid + 1 :]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-27 10:43</div>
            <div class="timeline-body"><p>@JohannesBuchner That's an expected behavior. What the original issue was pointing out is that <code>E203</code> rule is <em>removing</em> the whitespace before the <code>:</code> operator while the formatter adds it - causing the conflicting behavior between the linter and the formatter.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JohannesBuchner">@JohannesBuchner</a> on 2025-01-27 10:53</div>
            <div class="timeline-body"><p>@dhruvmanila Thanks for the quick response. flake8 gives the error &quot;E203 whitespace before ':'&quot; with the reformatted output. I see from https://github.com/psf/black/issues/315 that they claim that this is an issue of pep8. There is help at https://ichard26-testblackdocs.readthedocs.io/en/refactor_docs/compatible_configs.html for configuring flake8. Thanks.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:31:57 UTC
    </footer>
</body>
</html>
