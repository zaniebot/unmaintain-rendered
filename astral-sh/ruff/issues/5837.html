<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rule for “Subclass dataclass attribute overwritten by Base class init attribute” - astral-sh/ruff #5837</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rule for “Subclass dataclass attribute overwritten by Base class init attribute”</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/5837">#5837</a>
        opened by <a href="https://github.com/ssweber">@ssweber</a>
        on 2023-07-17 16:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ssweber">@ssweber</a></div>
            <div class="timeline-body"><p>Is there a rule to catch the following:</p>
<pre><code>from dataclasses import dataclass

@dataclass
class Base:
    value: int = 10

@dataclass
class Subclass(Base):
    value = 20
# Should be `value: int = 20`. missing the `: int`.
# It&#x27;s treated as a Class level variable and will be
# overwritten by Base `value` during init

print(Base().value) # Output: 10
print(Subclass.value) # Output: 20
print(Subclass().value)  # Output: 10
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">typing</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-19 01:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-19 01:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">typing</span> removed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-19 01:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-19 01:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-19 01:20</div>
            <div class="timeline-body"><p>I don&#x27;t think we can implement this reliably without cross-file type analysis. Unless the rule were &quot;Every attribute in a dataclass should have a type annotation, even if only a <code>ClassVar</code>.&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssweber">@ssweber</a> on 2023-07-20 02:13</div>
            <div class="timeline-body"><p>I think that’s a good wording. I’m super green in things, but I was surprised by the behavior!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:39 UTC
    </footer>
</body>
</html>
