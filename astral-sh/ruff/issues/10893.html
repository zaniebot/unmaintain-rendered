<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vscode formatter conflicts with isort linting quick fix on I001, can't save file and auto-format without breaking linting in some files - astral-sh/ruff #10893</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Vscode formatter conflicts with isort linting quick fix on I001, can't save file and auto-format without breaking linting in some files</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10893">#10893</a>
        opened by <a href="https://github.com/ryanovas">@ryanovas</a>
        on 2024-04-12 01:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ryanovas">@ryanovas</a> on 2024-04-12 01:37</div>
            <div class="timeline-body"><p>Hi, new user of ruff here.</p>
<p>Having a strange issue where the linter quick fix wants to solve I001 one way, and the formatter wants to format in another way. I have format &amp; quick fix on save both enabled, and they both try to apply and it always flips between the 2, settling on the formatter and the linting error not going away.</p>
<p>I don't want to turn off the isort linting, I would prefer for them not to conflict in the first place. Here are my files:</p>
<p>pyproject.toml:</p>
<pre><code>[tool.ruff]
exclude = [&quot;*/migrations/&quot;]
line-length = 100

[tool.ruff.format]
quote-style = &quot;single&quot;
indent-style = &quot;tab&quot;
docstring-code-format = true

[tool.ruff.lint]
select = [
  # pycodestyle
  &quot;E&quot;,
  # Pyflakes
  &quot;F&quot;,
  # pyupgrade
  &quot;UP&quot;,
  # flake8-bugbear
  &quot;B&quot;,
  # flake8-simplify
  &quot;SIM&quot;,
  # isort
  &quot;I&quot;,
]
# https://docs.astral.sh/ruff/formatter/#conflicting-lint-rules
ignore = [&quot;W191&quot;, &quot;E111&quot;, &quot;E114&quot;, &quot;E117&quot;, &quot;D206&quot;, &quot;D300&quot;, &quot;Q000&quot;, &quot;Q001&quot;, &quot;Q002&quot;, &quot;Q003&quot;, &quot;COM812&quot;, &quot;COM819&quot;, &quot;ISC001&quot;, &quot;ISC002&quot;, &quot;E501&quot;]
</code></pre>
<p>my file when the quick fix from the linter is applied:</p>
<pre><code>from rest_framework.generics import ListAPIView, RetrieveAPIView

from blog.models import BlogPost, BlogPostTag
from blog.serializers import BlogPostSerializer, BlogPostTagSerializer
</code></pre>
<p>my file when the formatter runs:</p>
<pre><code>from blog.models import BlogPost, BlogPostTag
from blog.serializers import BlogPostSerializer, BlogPostTagSerializer
from rest_framework.generics import ListAPIView, RetrieveAPIView
</code></pre>
<p>It also does this in another file:</p>
<p>with linter:</p>
<pre><code>from core.base_tests import LiveApiTestCase

from blog.models import BlogPost
</code></pre>
<p>with formatter:</p>
<pre><code>from blog.models import BlogPost
from core.base_tests import LiveApiTestCase
</code></pre>
<p>Interestingly, it only seems to do it with the vscode extention. If I run format manually it doesn't change the file from the linting version. It also doesn't do this in every file. Here are some examples that don't do this:</p>
<pre><code>from pprint import pformat

import requests
from django.test import LiveServerTestCase, TestCase
</code></pre>
<pre><code>from autoslug import AutoSlugField
from core.base_models import BaseModel
from core.utils.cms import cms_image_preview
from django.conf import settings
from django.db import models
</code></pre>
<pre><code>import uuid

from django.db import models
</code></pre>
<p>My versions are:
ruff = &quot;^0.3.6&quot;
extension version: v2024.16.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-12 01:39</div>
            <div class="timeline-body"><p>Is it possible that you have the isort extension installed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-12 01:40</div>
            <div class="timeline-body"><p>Separately, what does your project structure look like? Do you use a <code>src</code> directory?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ryanovas">@ryanovas</a> on 2024-04-12 01:42</div>
            <div class="timeline-body"><p>Looks like I did have the isort extension, disabling it fixed the problem. Good call, and such a fast response!</p>
<p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ryanovas on 2024-04-12 01:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-12 01:43</div>
            <div class="timeline-body"><p>Oh nice! Okay, glad it was an easy fix. Happy to help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ryanovas">@ryanovas</a> on 2024-04-12 01:45</div>
            <div class="timeline-body"><p>easy fixes are the best kind of fixes</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:33:29 UTC
    </footer>
</body>
</html>
