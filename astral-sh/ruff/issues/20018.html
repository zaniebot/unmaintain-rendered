<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unused `readline` import should be allowed - astral-sh/ruff #20018</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>unused <code>readline</code> import should be allowed</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/20018">#20018</a>
        opened by <a href="https://github.com/A5rocks">@A5rocks</a>
        on 2025-08-21 07:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/A5rocks">@A5rocks</a></div>
            <div class="timeline-body">Summary
<p><code>readline</code> is a funny module in the stdlib that, if you import it, has side effects on <code>input</code>. It shouldn&#x27;t raise F401.</p>
<p>See https://play.ruff.rs/67cbd733-7f37-4318-abc9-1c7e67bf5ea9</p>
Version
<p>v0.12.9</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-21 13:37</div>
            <div class="timeline-body"><p>That&#x27;s cool, I didn&#x27;t realize just importing <code>readline</code> would change how <code>input</code> works.</p>
<p>Is this common? It makes some sense to special-case this since it&#x27;s in the standard library, but it could also be a good use-case for noqa or <a href="https://docs.astral.sh/ruff/settings/#lint_pyflakes_allowed-unused-imports">allowed-unused-imports</a> if it&#x27;s uncommon. I&#x27;m not sure if we&#x27;d always want to allow <code>readline</code> to be unused or only if <code>input</code> is also used. In other cases the import may still be unused.</p>
<p>For what it&#x27;s worth, pyflakes also flags this example, so we&#x27;re at least in line with upstream.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-21 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-21 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/A5rocks">@A5rocks</a> on 2025-08-21 14:37</div>
            <div class="timeline-body"><p>I&#x27;m not sure it&#x27;s common. I was thinking about some related code and then was hit with &quot;I bet ruff doesn&#x27;t support <em>this</em>&quot; :^)</p>
<p>It might be better to wait and see if anyone actually needs this (i.e. makes an issue about this).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2025-08-23 15:39</div>
            <div class="timeline-body"><p>This also relates to <a href="https://github.com/astral-sh/ruff/issues/8149">astral-sh/ruff#8149</a> about analysing side-effect imports.</p>
<p>Since stdlib has a limited number of known modules, it could be hardcoded to avoid unnecessary analysis.</p>
<p>https://hadialqattan.github.io/pycln/#/?id=implicit-imports-from-sub-packages</p>
<blockquote>
<p>All Python standrad modules are considered as imports without side effects except (<a href="https://www.python.org/dev/peps/pep-0020/">this</a>, <a href="http://python-history.blogspot.com/2010/06/import-antigravity.html">antigravity</a>, <a href="https://docs.python.org/3.8/library/rlcompleter.html">rlcompleter</a>).</p>
</blockquote>
<p>I guess you&#x27;d add readline to this.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:21 UTC
    </footer>
</body>
</html>
