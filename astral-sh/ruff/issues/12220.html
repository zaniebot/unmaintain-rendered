<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conflict between check and format with D203 - astral-sh/ruff #12220</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Conflict between check and format with D203</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12220">#12220</a>
        opened by <a href="https://github.com/arylix">@arylix</a>
        on 2024-07-06 19:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/arylix">@arylix</a></div>
            <div class="timeline-body">

<pre><code>
class Test:
    &quot;&quot;&quot;
    Test class docstring.
    &quot;&quot;&quot;
</code></pre>
<pre><code>lint.select = [&quot;D&quot;]
lint.ignore = [&quot;D100&quot;, &quot;D200&quot;, &quot;D212&quot;, &quot;D211&quot;]
</code></pre>
<p>When I run <code>ruff check test.py --config ruff.toml</code> I get:</p>
<pre><code>test.py:2:5: D203 [*] 1 blank line required before class docstring
  |
1 |   class Test:
2 |       &quot;&quot;&quot;
  |  _____^
3 | |     Test class docstring.
4 | |     &quot;&quot;&quot;
  | |_______^ D203
  |
  = help: Insert 1 blank line before class docstring

Found 1 error.
</code></pre>
<p>With <code>--fix</code> Ruff changes the file to:</p>
<pre><code>class Test:

    &quot;&quot;&quot;
    Test class docstring.
    &quot;&quot;&quot;
</code></pre>
<p>When I now run <code>ruff format test.py --config ruff.toml</code> it redoes the changes and removes the blank line:</p>
<pre><code>class Test:
    &quot;&quot;&quot;
    Test class docstring.
    &quot;&quot;&quot;
</code></pre>
<p>Ruff version: 0.5.1</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-07-08 08:07</div>
            <div class="timeline-body"><p>Thanks for reporting this. It&#x27;s interesting that this only comes up now :)</p>
<p>I don&#x27;t think there&#x27;s a way to make this rule formatter compatible. But we should warn when running <code>ruff format</code> and the rule is enabled.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">incompatibility</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-07-08 08:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arylix">@arylix</a> on 2024-07-08 10:23</div>
            <div class="timeline-body"><p>So it will definitely not be possible to use D203 with the formatter?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-07-08 13:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-07-08 13:13</div>
            <div class="timeline-body"><p>No, I&#x27;m sorry. The formatter is designed to be compatible with black and follows its guidelines. We may want to deviate from their style guide in the future or allow more customizability, but that&#x27;s something we yet have to decide on.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:55 UTC
    </footer>
</body>
</html>
