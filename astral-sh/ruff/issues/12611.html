<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fixing file with rules E302, I001 cause infinite loop - astral-sh/ruff #12611</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Fixing file with rules E302, I001 cause infinite loop</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12611">#12611</a>
        opened by <a href="https://github.com/qarmin">@qarmin</a>
        on 2024-08-01 12:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/qarmin">@qarmin</a></div>
            <div class="timeline-body"><p>ruff 0.5.5+379 (a3e67abf4 2024-07-31)</p>
<pre><code>ruff check *.py --select E302,I001 --no-cache --fix --unsafe-fixes --preview --output-format concise --isolated
</code></pre>
<p>file content(at the bottom should be attached raw, not formatted file - github removes some non-printable characters, so copying from here may not work):</p>
<pre><code>import time
#替换环境

#测试环境，替换eb部分3台服务器及其代码
def web_replace():
    bg=time.time()
</code></pre>
<p>error</p>
<pre><code>/tmp/tmp_folder/data/5053444380204826248.py:1:1: I001 Import block is un-sorted or un-formatted
Found 501 errors (500 fixed, 1 remaining).
[*] 1 fixable with the --fix option.

debug error: Failed to converge after 500 iterations in `/tmp/tmp_folder/data/5053444380204826248.py` with rule codes I001:---
import time


#替换环境

#测试环境，替换eb部分3台服务器及其代码
def web_replace():
    bg=time.time()
---
</code></pre>
<p>Ruff build, that was used to reproduce problem(compiled on Ubuntu 22.04 with relase mode + debug symbols + debug assertions + overflow checks) - https://github.com/qarmin/Automated-Fuzzer/releases/download/Nightly/ruff.7z</p>
<p><a href="https://github.com/user-attachments/files/16456600/python_compressed.zip">python_compressed.zip</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-01 12:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fuzzer</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-01 12:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-01 21:24</div>
            <div class="timeline-body"><p>Huh, that&#x27;s funny. Thanks for reporting!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-01 21:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TaKO8Ki">@TaKO8Ki</a> on 2025-09-26 07:28</div>
            <div class="timeline-body"><p>I will take this one.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/TaKO8Ki">@TaKO8Ki</a> by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-26 15:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-10-14 07:24</div>
            <div class="timeline-body"><p>See <a href="https://github.com/astral-sh/ruff/issues/20853">astral-sh/ruff#20853</a>#issuecomment-3400349146 for an ASCII-only reproduction and a fix suggestion</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:56 UTC
    </footer>
</body>
</html>
