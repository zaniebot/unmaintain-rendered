<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `flake8-obey-import-goat` - astral-sh/ruff #3127</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add `flake8-obey-import-goat`</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/3127">#3127</a>
        opened by <a href="https://github.com/bellini666">@bellini666</a>
        on 2023-02-22 15:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bellini666">@bellini666</a> on 2023-02-22 15:07</div>
            <div class="timeline-body"><p>Ref: https://pypi.org/project/flake8-obey-import-goat</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">plugin</span> added by @charliermarsh on 2023-02-22 15:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2023-02-23 02:31</div>
            <div class="timeline-body"><p>Isn't this the same thing as TID? https://beta.ruff.rs/docs/rules/#flake8-tidy-imports-tid ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-23 02:32</div>
            <div class="timeline-body"><p>Yeah this looks identical to <a href="https://beta.ruff.rs/docs/rules/banned-api/"><code>banned-api</code></a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bellini666">@bellini666</a> on 2023-02-23 15:15</div>
            <div class="timeline-body"><blockquote>
<p>Yeah this looks identical to <a href="https://beta.ruff.rs/docs/rules/banned-api/"><code>banned-api</code></a>.</p>
</blockquote>
<p>Not necessarily. What it it does it to ensure that some imports are done in a specific way.</p>
<p>For example, if you want for someone to always <code>import os</code> and use <code>os.path</code> instead of <code>from is import path</code>.</p>
<p>The <code>banned-api</code>, if I understood that correctly, will totally prevent it from being used</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on 2023-02-23 16:16</div>
            <div class="timeline-body"><p>With <code>banned-api</code>, you cannot specify with a glob which modules are concerned for the ban.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on 2023-02-23 16:26</div>
            <div class="timeline-body"><p>The configuration of <code>flake8-obey-import-goat</code> look like this:</p>
<pre><code class="language-ini">[flake8]
forbidden-imports =
    *: datetime.datetime, stdlib modules should be imported as a module
    *: typing.Optional, we use T | None instead of Optional[T]
    users.*: foo.*, users module should not use foo module
    *.implementation.*: *.domain.*, implementation layer should not use domain layer
</code></pre>
<p>With the <code>banned-api</code> plugin, the configuration would look like this:</p>
<pre><code class="language-toml">[tool.ruff.flake8-tidy-imports.banned-api]
&quot;datetime.datetime&quot;.msg = &quot;stdlib modules should be imported as a module&quot;
&quot;typing.Optional&quot;.msg = &quot;we use T | None instead of Optional[T]&quot;
&quot;foo.*&quot;.msg = &quot;users module should not use foo module&quot;
&quot;*.domain.*&quot;.msg = &quot;implementation layer should not use domain layer&quot;
</code></pre>
<p><code>banned-api</code>, could be extended by adding a <code>path</code> like this, by default would be <code>*</code>.</p>
<pre><code class="language-toml">[tool.ruff.flake8-tidy-imports.banned-api]
&quot;datetime.datetime&quot;.msg = &quot;stdlib modules should be imported as a module&quot;
&quot;typing.Optional&quot;.msg = &quot;we use T | None instead of Optional[T]&quot;
&quot;foo.*&quot;.msg = &quot;users module should not use foo module&quot;
&quot;foo.*&quot;.path = &quot;users.*&quot;
&quot;*.domain.*&quot;.msg = &quot;implementation layer should not use domain layer&quot;
&quot;*.domain.*&quot;.path = &quot;*.implementation.*&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on 2023-02-23 17:00</div>
            <div class="timeline-body"><p>Is a pull request welcome with this new behavior?
It would be backward compatible.
How should we handle that this is a merge of two plugins in the documentation?
Should we mention <code>flake8-obey-import-goat</code> in <code>flake8-tidy-imports.banned-api</code>?
Or, should we only add the license <code>flake8-obey-import-goat</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2023-07-10 01:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:49 UTC
    </footer>
</body>
</html>
