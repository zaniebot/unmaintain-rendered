<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ecosystem check: Set `--no-fix` - astral-sh/ruff #15146</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ecosystem check: Set <code>--no-fix</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/15146">#15146</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2024-12-26 09:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><pre><code>          &gt; It looks like in the ecosystem check a bunch of violations were removed with no fix, so I&#x27;m wondering if a syntax error was introduced by the fix. Maybe when there is a default argument something goes wrong?</code></pre>
<p>I think this happens for projects where the <code>ruff.toml</code> or <code>pyproject.toml</code> contains <code>fix = true</code>. I also got tripped up by this behavior in some of my pull requests. I think it would be a good idea to change the ecosystem script to pass <code>--no-fix</code>, so this doesn&#x27;t happen, since the output will always be interpreted incorrectly when fixes have been applied (this can also lead to other confusing things like new E501 flags, because the fix caused a line to get too long, or an unrelated unfixable violation getting flagged, because the fix caused the violation to be slightly offset, so you see a +1 -1 for that violation).</p>
<p><em>Originally posted by @Daverball in <a href="https://github.com/astral-sh/ruff/issues/15139">astral-sh/ruff#15139</a>#issuecomment-2562006234</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-26 09:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-26 09:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2024-12-26 10:41</div>
            <div class="timeline-body"><p>Wouldn&#x27;t this remove valuable information about fixes that we get from the ecosystem check?</p>
<p>Maybe we should just run it both with and without fixes and use the former to populate the +/- violations and the latter for +/- fixes?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-26 10:51</div>
            <div class="timeline-body"><blockquote>
<p>Wouldn&#x27;t this remove valuable information about fixes that we get from the ecosystem check?</p>
</blockquote>
<p>It helps showing how some fixes enable other fixes but I&#x27;ve found the result more confusing than useful. To the point where differences where often ignored because &quot;the ecosystem check is weird, that must be a false positive&quot;.</p>
<p>If we have specific use cases where we find this useful, we could consider having a second ecosystem check that always runs with <code>--fix</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Daverball">@Daverball</a> on 2024-12-26 11:43</div>
            <div class="timeline-body"><p>I agree that having some output about applied fixes would be useful to have in the ecosystem results (especially in order to catch fixes that are unstable in some scenarios, that weren&#x27;t covered by the tests), but it needs to be deliberate, with its own section in the results table, rather than incidental, so the results can be interpreted correctly.</p>
<p>Right now for a new rule with a fix that either always works or works most of the time we will generally see a lower ecosystem impact than the rule actually has, to an unpredictable degree based on the individual project configurations.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eclbg">@eclbg</a> on 2025-01-03 10:35</div>
            <div class="timeline-body"><p>Hey! I&#x27;m working on this and will submit a PR shortly. Feel free to assign it to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/eclbg">@eclbg</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-03 11:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-06 09:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:12 UTC
    </footer>
</body>
</html>
