<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Misunderstood skip-magic-trailing-comma - astral-sh/ruff #9809</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Misunderstood skip-magic-trailing-comma</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/9809">#9809</a>
        opened by <a href="https://github.com/korolkevich">@korolkevich</a>
        on 2024-02-03 17:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/korolkevich">@korolkevich</a> on 2024-02-03 17:30</div>
            <div class="timeline-body"><p>Hi. If we use the 'ruff' format with 'skip-magic-trailing-comma' set to false, with example:</p>
<pre><code># input:
def _example_function_xxxxxxx(variable: Optional[List[str]], variable2: Optional[List[str]]) -&gt; List[example.ExampleConfig]:
    pass
</code></pre>
<p>we get the following result:</p>
<pre><code>def _example_function_xxxxxxx(
    variable: Optional[List[str]], variable2: Optional[List[str]]
) -&gt; List[example.ExampleConfig]:
    pass
</code></pre>
<p>but why not this?</p>
<pre><code>def _example_function_xxxxxxx(
    variable: Optional[List[str]], 
    variable2: Optional[List[str]],
) -&gt; List[example.ExampleConfig]:
    pass
</code></pre>
<p>https://play.ruff.rs/6dceb416-dc2d-48a5-9eb6-6b8bc2cc5990</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-03 20:01</div>
            <div class="timeline-body"><p>Because this fits on one line, the trailing comma is not added.</p>
<p><code>skip-magic-trailing-comma</code> is for a different purpose. If you have</p>
<pre><code class="language-python">def _example_function_xxxxxxx(
    variable: Optional[List[str]], 
    variable2: Optional[List[str]],
) -&gt; List[example.ExampleConfig]:
    pass
</code></pre>
<p>With <code>skip-magic-trailing-comma = true</code> the parameters will be collapsed to one line when formatted whereas by default (<code>= false</code>) the trailing comma would be respected as an indication that we should leave the parameters on separate lines even though they would fit on a single line.</p>
<p>https://docs.astral.sh/ruff/settings/#format_skip-magic-trailing-comma</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-02-03 20:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/korolkevich">@korolkevich</a> on 2024-02-04 05:44</div>
            <div class="timeline-body"><p>Is there any way to convert Example1 to Example2? Perhaps with certain configurations?</p>
<pre><code># Example1:
def _example_function_xxxxxxx(variable: Optional[List[str]], variable2: Optional[List[str]]) -&gt; List[example.ExampleConfig]:
    pass
</code></pre>
<pre><code>def _example_function_xxxxxxx(
    variable: Optional[List[str]], 
    variable2: Optional[List[str]],
) -&gt; List[example.ExampleConfig]:
    pass
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-04 11:01</div>
            <div class="timeline-body"><p>@korolkevich I'm sorry, but there's no such configuration. You can add a trailing comma after the last argument to make Ruff format each argument on its own line. But I think you want something else. What I understand is that you want ruff to never format the arguments on on a single line, even if it makes them fit:</p>
<pre><code class="language-python"># Example1:
def _example_function_xxxxxxx(variable: Optional[List[str]], variable2: Optional[List[str]]) -&gt; List[example.ExampleConfig]:
    pass
</code></pre>
<p>or</p>
<pre><code class="language-python">def _example_function_xxxxxxx(
    variable: Optional[List[str]], 
    variable2: Optional[List[str]],
) -&gt; List[example.ExampleConfig]:
    pass
</code></pre>
<p>but never</p>
<pre><code class="language-python">def _example_function_xxxxxxx(
    variable: Optional[List[str]], variable2: Optional[List[str]]
) -&gt; List[example.ExampleConfig]:
    pass
</code></pre>
<p>For which no configuration option exists.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/korolkevich">@korolkevich</a> on 2024-02-04 12:29</div>
            <div class="timeline-body"><p>@MichaReiser thank you :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @korolkevich on 2024-02-04 12:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../nvaccess/nvda/pulls/16804.html">nvaccess/nvda#16804</a> on 2024-07-03 06:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:52 UTC
    </footer>
</body>
</html>
