<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`UP035` does not detect `typing.NoReturn` - astral-sh/ruff #5111</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`UP035` does not detect `typing.NoReturn`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/5111">#5111</a>
        opened by <a href="https://github.com/DetachHead">@DetachHead</a>
        on 2023-06-15 04:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/DetachHead">@DetachHead</a> on 2023-06-15 04:07</div>
            <div class="timeline-body"><p>in python 3.11, <code>typing.NoReturn</code> is deprecated in favor of <code>typing.Never</code> and <code>typing.Union</code> is deprecated in favor of the <code>|</code> operator.</p>
<pre><code class="language-py">from typing import NoReturn, Union # no error
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-06-15 04:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-15 04:14</div>
            <div class="timeline-body"><p>Makes sense, thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @charliermarsh on 2023-06-15 13:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @charliermarsh on 2023-06-15 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5126.html">astral-sh/ruff#5126</a> on 2023-06-15 19:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluetech">@bluetech</a> on 2023-06-15 19:17</div>
            <div class="timeline-body"><p><code>NoReturn</code> and <code>Union</code> are not deprecated in Python so I think the word &quot;deprecated&quot; should not be used for them.</p>
<p>The <code>NoReturn</code> lint should be qualified to when it appears in not-return position, there <code>Never</code> makes more sense.</p>
<p><code>Union</code> is already covered by UP007 isn't it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluetech">@bluetech</a> on 2023-06-15 19:18</div>
            <div class="timeline-body"><p>Actually the <code>NoReturn</code> case is handled by PYI050.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-15 20:49</div>
            <div class="timeline-body"><p>Ah, I think I agree -- unlike in PEP 585, PEP 604 didn't deprecate <code>Union</code>. And based on my reading of the docs, I think I agree that <code>Never</code> is not necessarily a deprecation of <code>NoReturn</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-06-15 20:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2023-06-15 23:51</div>
            <div class="timeline-body"><p><code>Never</code>:</p>
<blockquote>
<p>New in version 3.11: On older Python versions, <a href="https://docs.python.org/3/library/typing.html#typing.NoReturn"><code>NoReturn</code></a> may be used to express the same concept. <code>Never</code> was added to make the intended meaning more explicit.</p>
</blockquote>
<p><code>NoReturn</code>:</p>
<blockquote>
<p>Starting in Python 3.11, the <a href="https://docs.python.org/3/library/typing.html#typing.Never"><code>Never</code></a> type should be used for this concept instead.</p>
</blockquote>
<p>While not explicitly deprecated (yet), the docs strongly state that <code>Never</code> should be used over <code>NoReturn</code>.</p>
<p>PYI050 doesn't apply to return types, and also doesn't apply to python files, so it's very limited in scope.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DetachHead">@DetachHead</a> on 2023-06-15 23:59</div>
            <div class="timeline-body"><blockquote>
<p><code>Union</code> is already covered by UP007 isn't it?</p>
</blockquote>
<p>oh right. i wasn't looking at usages only the imports. that's fine then</p>
<p>but yeah as @KotlinIsland said, <code>PYI050</code> isn't really sufficient</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-16 00:37</div>
            <div class="timeline-body"><blockquote>
<p>Starting in Python 3.11, the <a href="https://docs.python.org/3/library/typing.html#typing.Never">Never</a> type should be used for this concept instead.</p>
</blockquote>
<p>I think the full paragraph reads differently:</p>
<blockquote>
<p>Special type indicating that a function never returns... NoReturn can also be used as a <a href="https://en.wikipedia.org/wiki/Bottom_type">bottom type</a>, a type that has no values. Starting in Python 3.11, the <a href="https://docs.python.org/3/library/typing.html#typing.Never">Never</a> type should be used for this concept instead.</p>
</blockquote>
<p>The suggestion is to use <code>Never</code> instead of <code>NoReturn</code> when you're indicating a &quot;bottom type&quot; (a type that has no values). My read of the wording here is that you are intended to use <code>NoReturn</code> as a return type for functions that don't return, but <code>Never</code> for (e.g.) arguments or other variables that have no value.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DetachHead">@DetachHead</a> on 2023-06-16 00:48</div>
            <div class="timeline-body"><p>imo having two separate types that do the exact same thing is just confusing and misleading. i've seen people misinterpret <code>NoReturn</code> to mean that the function returns <code>None</code>. having a separate <code>Never</code> type while not treating the old one as deprecated just makes that misinterpretation more likely. i feel like the name <code>NoReturn</code> was only picked because nobody considered the fact that there are other use cases for it, which is why i think it should be avoided altogether.</p>
<p>but i guess it comes down to personal preference, so perhaps a new rule could be created to ban all usages of <code>NoReturn</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`UP035` does not detect `typing.NoReturn` and `typing.Union`" to "`UP035` does not detect `typing.NoReturn`" by @DetachHead on 2023-06-16 00:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5241.html">astral-sh/ruff#5241</a> on 2023-06-21 06:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../DetachHead/basedpyright/issues/356.html">DetachHead/basedpyright#356</a> on 2024-07-12 02:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:50 UTC
    </footer>
</body>
</html>
