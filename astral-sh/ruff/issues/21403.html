<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class property without return - astral-sh/ruff #21403</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Class property without return</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/21403">#21403</a>
        opened by <a href="https://github.com/ashrub-holvi">@ashrub-holvi</a>
        on 2025-11-12 13:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ashrub-holvi">@ashrub-holvi</a> on 2025-11-12 13:21</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hi,
possible linter check - method wrapped to property decorator must have at least one explicit return, possible issue is:</p>
<pre><code>In [1]: class A:
   ...:     @property
   ...:     def b(self):
   ...:         &quot;Hi&quot;
   ...: 

In [3]: A().b is None
Out[3]: True
</code></pre>
<p>of course it should be covered by tests, but sometimes is not, especially if it's some special path in the code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-11-12 14:52</div>
            <div class="timeline-body"><p>This sounds reasonable to me. I thought one of our RET rules might activate here, but I didn't see anything in the <a href="https://play.ruff.rs/b7028262-015d-4f46-a0dd-f2f142559c37">playground</a> even with an annotation. <a href="https://docs.astral.sh/ruff/rules/useless-expression/#useless-expression-b018">useless-expression (B018)</a> triggers if you make the body an int or something, to avoid &quot;Hi&quot; looking like a docstring, but that wouldn't help in general.</p>
<p>@amyreese what do you think?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-11-12 14:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @ntBre on 2025-11-12 14:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amyreese">@amyreese</a> on 2025-11-12 21:49</div>
            <div class="timeline-body"><p>Makes sense to me. Same for <code>@functools.cached_property</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @MichaReiser on 2025-11-13 08:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ShaharNaveh">@ShaharNaveh</a> on 2025-11-19 11:04</div>
            <div class="timeline-body"><p>How would the new rule handle this case:</p>
<pre><code class="language-py">import abc


class Meta(metaclass=abc.ABCMeta):
    @property
    @abc.abstractmethod
    def prop1(self):
        ...
 
    @property
    @abc.abstractmethod
    def prop2(self):
        &quot;&quot;&quot;
        Some docstring
        &quot;&quot;&quot;
</code></pre>
<p>Will it be ignored if <code>abc.abstractmethod</code> is one of the decorators?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-19 11:14</div>
            <div class="timeline-body"><p>Yes, it should ignore abstract methods. We could even consider checking if <code>class</code> inherits <code>Protocol</code> (only directly) and, if so, ignore the error</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/21535.html">astral-sh/ruff#21535</a> on 2025-11-20 08:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-11-26 08:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:18 UTC
    </footer>
</body>
</html>
