<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ruff did not return the original code - astral-sh/ruff #12348</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ruff did not return the original code</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12348">#12348</a>
        opened by <a href="https://github.com/ArtemIsmagilov">@ArtemIsmagilov</a>
        on 2024-07-16 15:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ArtemIsmagilov">@ArtemIsmagilov</a> on 2024-07-16 15:46</div>
            <div class="timeline-body"><p>ruff version 0.5.2
OS ubuntu</p>
<p>I have python code</p>
<pre><code class="language-python">self.create_empty_buttons(&quot;btn_task1&quot;, &quot;btn_task2&quot;, &quot;btn_task3&quot;, &quot;btn_task4&quot;, &quot;btn_task5&quot;, &quot;btn_task6&quot;)
</code></pre>
<p>After command ruff formatting code and create many nested arguments
going ruff with line-length=80</p>
<pre><code class="language-bash">ruff ruff format . --line-length=80
&gt;&gt;&gt;self.create_empty_buttons(
            &quot;btn_task1&quot;,
            &quot;btn_task2&quot;,
            &quot;btn_task3&quot;,
            &quot;btn_task3&quot;,
            &quot;btn_task3&quot;,
            &quot;btn_task3&quot;,
        )
</code></pre>
<p>I'm trying to remove this nesting that fits in 120 characters, but ruff does not make the code initially horizontal without nesting. Why?</p>
<pre><code class="language-bash">ruff ruff format . --line-length=120
&gt;&gt;&gt;???self.create_empty_buttons(
           &quot;btn_task1&quot;,
           &quot;btn_task2&quot;,
           &quot;btn_task3&quot;,
           &quot;btn_task3&quot;,
           &quot;btn_task3&quot;,
           &quot;btn_task3&quot;,
       )
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ArtemIsmagilov">@ArtemIsmagilov</a> on 2024-07-16 15:49</div>
            <div class="timeline-body"><p>It would be expected for me remove nested args for example</p>
<pre><code class="language-python">&gt;&gt;&gt;self.create_empty_buttons(&quot;btn_task1&quot;, &quot;btn_task2&quot;, &quot;btn_task3&quot;, &quot;btn_task4&quot;, &quot;btn_task5&quot;, &quot;btn_task6&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ArtemIsmagilov">@ArtemIsmagilov</a> on 2024-07-16 15:51</div>
            <div class="timeline-body"><p>I may not know much about whether this is semantically correct and whether this is expected by many developers. I just want to know why exactly this return is ignored, given that it fits in 120 characters.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-16 15:51</div>
            <div class="timeline-body"><p>But you ran with <code>--line-length=80</code>, and the line is over 80 characters.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-16 15:52</div>
            <div class="timeline-body"><p>Oh, and then you re-ran with <code>--line-length=120</code> <em>on the formatted output</em>, is that right? By default Ruff will respect trailing commas and won't collapse statements. You can configure that here: https://docs.astral.sh/ruff/settings/#format_skip-magic-trailing-comma</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-16 15:52</div>
            <div class="timeline-body"><p>Or just remove the trailing comma from your example.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ArtemIsmagilov">@ArtemIsmagilov</a> on 2024-07-16 15:56</div>
            <div class="timeline-body"><p>Hi, @charliermarsh, thank you. Remove <code>,</code> in end. ruff returned the lines as expected)
It seems I missed this point because you have it in the documentation. Thanks again)</p>
<p>Result now after remove  <code>,</code> in end args</p>
<pre><code class="language-python">&gt;&gt;&gt;self.create_empty_buttons(&quot;btn_task1&quot;, &quot;btn_task2&quot;, &quot;btn_task3&quot;, &quot;btn_task4&quot;, &quot;btn_task5&quot;, &quot;btn_task6&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ArtemIsmagilov on 2024-07-16 15:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-16 15:58</div>
            <div class="timeline-body"><p>No problem! Glad to help.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:13 UTC
    </footer>
</body>
</html>
