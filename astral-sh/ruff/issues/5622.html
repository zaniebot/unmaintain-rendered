<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consider promoting platform.system over sys.platform and os.name - astral-sh/ruff #5622</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Consider promoting platform.system over sys.platform and os.name</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/5622">#5622</a>
        opened by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a>
        on 2023-07-08 18:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a> on 2023-07-08 18:28</div>
            <div class="timeline-body"><p>See <a href="https://stackoverflow.com/questions/1854/how-to-identify-which-os-python-is-running-on/58071295#58071295">this explanation</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Consider urging prefer platform.system over sys.platform and os.name" to "Consider promoting platform.system over sys.platform and os.name" by @NeilGirdhar on 2023-07-08 18:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2023-07-10 01:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-07-10 01:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/real-or-random">@real-or-random</a> on 2025-03-26 12:29</div>
            <div class="timeline-body"><p>I disagree. Different methods have different purposes. As stated in the linked post, if you only care whether you're on posix or not, <code>os.name == &quot;posix&quot;</code> is the right thing to do.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a> on 2025-03-26 12:40</div>
            <div class="timeline-body"><blockquote>
<p>I disagree. Different methods have different purposes. As stated in the linked post, if you only care whether you're on posix or not, <code>os.name == &quot;posix&quot;</code> is the right thing to do.</p>
</blockquote>
<p>Why not do <code>platform.system() in {'Linux', 'Darwin'}</code>?  It's easier to understand, it's easier to alter if what you're checking changes, and it doesn't depend on what future Python versions do with &quot;OS specific modules&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/real-or-random">@real-or-random</a> on 2025-03-26 13:11</div>
            <div class="timeline-body"><blockquote>
<p>Why not do <code>platform.system() in {'Linux', 'Darwin'}</code>?</p>
</blockquote>
<p>This misses Android, iOS, and potentially FreeBSD.</p>
<p>It's just a different check. If I want to know how to interpret the <a href="https://docs.python.org/3/library/os.html#os.popen"><code>os.popen</code> return code</a>, I may want to know whether I'm on a POSIX system or not, and the straightforward way to check this is <code>os.name == &quot;posix&quot;</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a> on 2025-03-26 13:15</div>
            <div class="timeline-body"><p>Got it, thanks.  Does <code>sys.platform</code> have common uses too?  It seems like most people will just check if it <code>startswith</code> something they know?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-03-26 13:36</div>
            <div class="timeline-body"><p><code>sys.platforms</code> is used and <a href="https://typing.python.org/en/latest/spec/directives.html#version-and-platform-checking">understood by type checkers</a> whereas <code>os.platform</code> isn't (but some type checkers do support it, e.g. Pyright).</p>
<p>A use case where you want to use <code>sys.platform</code> is when checking for specific APIs, e.g. https://docs.python.org/3/library/sys.html#sys.activate_stack_trampoline which is only available on linux and not all posix systems.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-03-26 13:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a> on 2025-03-26 13:43</div>
            <div class="timeline-body"><blockquote>
<p><code>sys.platforms</code> is used and <a href="https://typing.python.org/en/latest/spec/directives.html#version-and-platform-checking">understood by type checkers</a> whereas <code>os.platform</code> isn't (but some type checkers do support it, e.g. Pyright).</p>
<p>A use case where you want to use <code>sys.platform</code> is when checking for specific APIs, e.g. https://docs.python.org/3/library/sys.html#sys.activate_stack_trampoline which is only available on linux and not all posix systems.</p>
</blockquote>
<p>How would you check that?   Wouldn't <code>platform.system() == 'Linux'</code> be what you want?  As opposed to <code>sys.platform.startswith('linux')</code>, which seems much worse.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-03-26 15:35</div>
            <div class="timeline-body"><p>I'd use <code>sys.platform == &quot;linux&quot;</code>? <code>startswith</code> shouldn't be necessary anymore because of</p>
<blockquote>
<p>Changed in version 3.3: On Linux, <a href="https://docs.python.org/3/library/sys.html#sys.platform">sys.platform</a> doesnâ€™t contain the major version anymore. It is always 'linux', instead of 'linux2' or 'linux3'.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a> on 2025-03-27 02:39</div>
            <div class="timeline-body"><p>Okay.  I'm not sure if it's possible, but I think it would be good to come up with canonical ways of accomplishing various tasks and have Ruff nudge users towards these ways.  If <code>sys.platform == 'linux'</code> is better than <code>platform.system() == 'Linux'</code>, (or vice versa), it would be good to nudge everyone to write the same idea in the same way.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:30:39 UTC
    </footer>
</body>
</html>
