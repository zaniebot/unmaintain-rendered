<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUF056 ascribes meaning to `default` and ignores extra arguments - astral-sh/ruff #18628</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>RUF056 ascribes meaning to <code>default</code> and ignores extra arguments</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18628">#18628</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-06-11 14:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dscorbett">@dscorbett</a> on 2025-06-11 14:38</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>The fix for <a href="https://docs.astral.sh/ruff/rules/falsy-dict-get-fallback/"><code>falsy-dict-get-fallback</code> (RUF056)</a> can change behavior when there are extra arguments.</p>
<p>Extra positional argument:</p>
<pre><code class="language-console">$ cat &gt;ruf056_1.py &lt;&lt;'# EOF'
d = {}
print(not d.get(&quot;key&quot;, False, &quot;?!&quot;))
# EOF

$ python ruf056_1.py 2&gt;&amp;1 | tail -n 1
TypeError: get expected at most 2 arguments, got 3

$ ruff --isolated check ruf056_1.py --select RUF056 --preview --fix
Found 1 error (1 fixed, 0 remaining).

$ python ruf056_1.py
False
</code></pre>
<p><code>default</code> keyword argument; the relevant parameter is positional-only and <code>default</code> has no meaning to this function:</p>
<pre><code class="language-console">$ cat &gt;ruf056_2.py &lt;&lt;'# EOF'
d = {}
print(not d.get(&quot;key&quot;, default=False))
# EOF

$ python ruf056_2.py 2&gt;&amp;1 | tail -n 1
TypeError: dict.get() takes no keyword arguments

$ ruff --isolated check ruf056_2.py --select RUF056 --preview --fix
Found 1 error (1 fixed, 0 remaining).

$ python ruf056_2.py
True
</code></pre>
<p>Keyword argument other than <code>default</code>; the fix doesn’t change behavior in this case, so it’s not a problem, but I mention it for completeness:</p>
<pre><code class="language-console">$ cat &gt;ruf056_3.py &lt;&lt;'# EOF'
d = {}
print(not d.get(&quot;key&quot;, False, foo=...))
# EOF

$ python ruf056_3.py 2&gt;&amp;1 | tail -n 1
TypeError: dict.get() takes no keyword arguments

$ ruff --isolated check ruf056_3.py --select RUF056 --preview --fix
Found 1 error (1 fixed, 0 remaining).

$ python ruf056_3.py 2&gt;&amp;1 | tail -n 1
TypeError: dict.get() takes no keyword arguments
</code></pre>
<h3>Version</h3>
<p>ruff 0.11.13 (5faf72a4d 2025-06-05)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-06-11 15:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by @ntBre on 2025-06-11 15:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @ntBre by @ntBre on 2025-06-11 15:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-11 16:37</div>
            <div class="timeline-body"><p>Interestingly, we have existing tests for both &quot;known&quot; and unknown keyword arguments, but we still offer a fix in those cases. It looks like the Python docs were updated in 3.12 to show the <code>/</code> in the argument list because <a href="https://docs.python.org/3.11/library/stdtypes.html#dict.get">3.11</a> doesn't have it. But I tested Python versions back to 3.8 and none of them accept keyword arguments.</p>
<p>I'll just update the rule to check both the number and kind of arguments before offering a fix.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-06-13 23:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:37:39 UTC
    </footer>
</body>
</html>
