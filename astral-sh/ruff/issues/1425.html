<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`wasm-pack` test is unreliable - astral-sh/ruff #1425</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`wasm-pack` test is unreliable</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/1425">#1425</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2022-12-28 15:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-28 15:10</div>
            <div class="timeline-body"><p>See: https://github.com/charliermarsh/ruff/actions/runs/3794761527/jobs/6453331265.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/squiddy">@squiddy</a> on 2022-12-28 15:14</div>
            <div class="timeline-body"><p>What I don't understand - and I noticed that in multiple runs - is why the operation is being canceled. Many times the tests succeeded.</p>
<pre><code>running 3 tests

test ruff::lib_wasm::test::empty_config ... ok
test ruff::lib_wasm::test::partial_config ... ok
test ruff::lib_wasm::test::partial_nested_config ... ok

test result: ok. 3 passed; 0 failed; 0 ignored

Error: The operation was canceled.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-28 15:15</div>
            <div class="timeline-body"><p>Yeah, trying to find any relevant issues etc. but not seeing anything.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-28 15:24</div>
            <div class="timeline-body"><p>I don't know if this is just a symptom of a different failure, but when it fails in this way, we never see the other test suites skip execution:</p>
<img width="566" alt="Screen Shot 2022-12-28 at 10 24 08 AM" src="https://user-images.githubusercontent.com/1309177/209834183-e99e339f-a0d3-4714-9807-1569211db022.png">
<img width="1108" alt="Screen Shot 2022-12-28 at 10 24 12 AM" src="https://user-images.githubusercontent.com/1309177/209834186-2a537a15-141b-44b4-97d7-dd1f981eadad.png">

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-28 15:28</div>
            <div class="timeline-body"><p>I'll try setting <code>--lib</code> for now... I dunno.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/squiddy">@squiddy</a> on 2022-12-28 15:34</div>
            <div class="timeline-body"><p>I'm also seeing this.. which isn't that helpful. I was thinking that maybe it's just being canceled because a new workflow was scheduled, but that doesn't seem to be the case.
I would also kinda rule out memory issues, we're not even running headless browsers for testing..</p>
<pre><code>2022-12-28T15:22:07.1731677Z running 3 tests
2022-12-28T15:22:07.1831067Z 
2022-12-28T15:22:07.2165473Z test ruff::lib_wasm::test::empty_config ... ok
2022-12-28T15:22:07.2217990Z test ruff::lib_wasm::test::partial_config ... ok
2022-12-28T15:22:07.2433964Z test ruff::lib_wasm::test::partial_nested_config ... ok
2022-12-28T15:22:07.2457576Z 
2022-12-28T15:22:07.2459785Z test result: ok. 3 passed; 0 failed; 0 ignored
2022-12-28T15:22:07.2460027Z 
2022-12-28T15:22:41.4902290Z ##[error]Process completed with exit code 143.
2022-12-28T15:22:41.4984194Z ##[error]The runner has received a shutdown signal. This can happen when the runner service is stopped, or a manually started runner is canceled.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/squiddy">@squiddy</a> on 2022-12-28 15:36</div>
            <div class="timeline-body"><p>Well, actually.. when you start searching for the &quot;shutdown signal&quot; thing, numerous issues popup about people's jobs being canceled. Most often due to resource limits.</p>
<p>For example: https://github.com/actions/runner-images/issues/6680
One response: https://github.com/actions/runner-images/issues/6680#issuecomment-1335778010</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1427.html">astral-sh/ruff#1427</a> on 2022-12-28 17:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2022-12-28 22:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @charliermarsh on 2022-12-28 22:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2023-02-17 23:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-23 22:01</div>
            <div class="timeline-body"><p>I don't remember having seen this in months.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-02-23 22:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:49 UTC
    </footer>
</body>
</html>
