<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Feedback] `PLW0133` not implements all pylint `W0133` detections - astral-sh/ruff #10392</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Feedback] <code>PLW0133</code> not implements all pylint <code>W0133</code> detections</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10392">#10392</a>
        opened by <a href="https://github.com/Taragolis">@Taragolis</a>
        on 2024-03-13 17:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Taragolis">@Taragolis</a></div>
            <div class="timeline-body">

<p>I&#x27;ve tested this simple snippet in <code>ruff 0.3.2</code> (https://play.ruff.rs/9eb226cd-c2de-41fe-9118-b2e90857fa9e) and in <code>pylint</code>, and the detection a bit different</p>
<pre><code># w0133.py
from __future__ import annotations
from io import UnsupportedOperation


def some_func(b: str, *, a: str | None = None, raise_an_error=True):
    if a:
        msg = &quot;`a` is deprecated, consider to use `b` instead.&quot;
        if raise_an_error:
            msg = &quot;Use `b` instead.&quot;
            ValueError(msg)
        DeprecationWarning(msg)
        b = a
    return b


class AwesomeClass:
    def __init__(self, b: str | None = None, **kwargs):
        if a := kwargs.pop(&quot;a&quot;, None):
            DeprecationWarning(&quot;`a` is deprecated, consider to use `b` instead.&quot;)
            if b and a != b:
                msg = f&quot;Unable to resolve ambiguous values b={b!r}, a={a!r}.&quot;
                ValueError(msg)
            b = a
        self.b = b

    def abstract(self):
        NotImplementedError(&quot;abstract should be implemented&quot;)


ValueError(&quot;Foo&quot;)
Warning(&quot;Bar&quot;)
UnsupportedOperation(&quot;Spam&quot;)

if __name__ == &quot;__main__&quot;:
    ValueError(&quot;Spam&quot;)
    DeprecationWarning(&quot;Egg&quot;)
</code></pre>
ruff
<pre><code>❯ pipx run --spec=&quot;ruff&quot; ruff check w0133.py --select &quot;PLW0133&quot; --preview

w0133.py:11:13: PLW0133 Missing `raise` statement on exception
   |
 9 |         if raise_an_error:
10 |             msg = &quot;Use `b` instead.&quot;
11 |             ValueError(msg)
   |             ^^^^^^^^^^^^^^^ PLW0133
12 |         DeprecationWarning(msg)
13 |         b = a
   |
   = help: Add `raise` keyword

w0133.py:23:17: PLW0133 Missing `raise` statement on exception
   |
21 |             if b and a != b:
22 |                 msg = f&quot;Unable to resolve ambiguous values b={b!r}, a={a!r}.&quot;
23 |                 ValueError(msg)
   |                 ^^^^^^^^^^^^^^^ PLW0133
24 |             b = a
25 |         self.b = b
   |
   = help: Add `raise` keyword

w0133.py:28:9: PLW0133 Missing `raise` statement on exception
   |
27 |     def abstract(self):
28 |         NotImplementedError(&quot;abstract should be implemented&quot;)
   |         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ PLW0133
   |
   = help: Add `raise` keyword

w0133.py:31:1: PLW0133 Missing `raise` statement on exception
   |
31 | ValueError(&quot;Foo&quot;)
   | ^^^^^^^^^^^^^^^^^ PLW0133
32 | Warning(&quot;Bar&quot;)
33 | UnsupportedOperation(&quot;Spam&quot;)
   |
   = help: Add `raise` keyword

w0133.py:36:5: PLW0133 Missing `raise` statement on exception
   |
35 | if __name__ == &quot;__main__&quot;:
36 |     ValueError(&quot;Spam&quot;)
   |     ^^^^^^^^^^^^^^^^^^ PLW0133
37 |     DeprecationWarning(&quot;Egg&quot;)
   |
   = help: Add `raise` keyword

Found 5 errors.
No fixes available (5 hidden fixes can be enabled with the `--unsafe-fixes` option).
</code></pre>
pylint
<pre><code>❯ pipx run --spec=&quot;pylint&quot; pylint --disable=all --enable=&quot;W0133&quot; w0133.py
************* Module w0133
w0133.py:11:12: W0133: Exception statement has no effect (pointless-exception-statement)
w0133.py:12:8: W0133: Exception statement has no effect (pointless-exception-statement)
w0133.py:20:12: W0133: Exception statement has no effect (pointless-exception-statement)
w0133.py:23:16: W0133: Exception statement has no effect (pointless-exception-statement)
w0133.py:28:8: W0133: Exception statement has no effect (pointless-exception-statement)
w0133.py:31:0: W0133: Exception statement has no effect (pointless-exception-statement)
w0133.py:32:0: W0133: Exception statement has no effect (pointless-exception-statement)
w0133.py:33:0: W0133: Exception statement has no effect (pointless-exception-statement)
w0133.py:36:4: W0133: Exception statement has no effect (pointless-exception-statement)
w0133.py:37:4: W0133: Exception statement has no effect (pointless-exception-statement)
</code></pre>
<p>What I&#x27;ve found:</p>
<ol>
<li>ruff detects only some of <a href="https://docs.python.org/3/library/exceptions.html#exception-hierarchy">builtin exceptions</a></li>
<li>ruff do not detect <code>Warning</code> (builtin Exception) and all subclasses, so useless warnings are undetected</li>
<li>Classes which inherits from <code>Exception</code> or <code>BaseException</code> can&#x27;t be detected</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[Feedback] `PLW0133` not implements all pylint `W0133`&quot; to &quot;[Feedback] `PLW0133` not implements all pylint `W0133` detections&quot; by <a href="https://github.com/Taragolis">@Taragolis</a> on 2024-03-13 17:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 18:00</div>
            <div class="timeline-body"><p>Good catch, we should add the warnings. We won&#x27;t be adding user-defined subclasses right now, I&#x27;ll mark it as a limitation in the rule.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 18:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 18:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 18:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 18:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-13 19:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:51 UTC
    </footer>
</body>
</html>
