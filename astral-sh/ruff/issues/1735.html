<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playground should use `pyproject.toml` format for the settings - astral-sh/ruff #1735</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Playground should use <code>pyproject.toml</code> format for the settings</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1735">#1735</a>
        opened by <a href="https://github.com/not-my-profile">@not-my-profile</a>
        on 2023-01-08 04:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a></div>
            <div class="timeline-body"><p>The <a href="https://ruff.pages.dev/">playground</a> currently uses JSON for the Settings ... which I don&#x27;t think makes much sense given that ruff normally is configured via <code>pyproject.toml</code>.</p>
<p>So I think it would be better if the Settings tab of the demo was actually named <code>pyproject.toml</code> and would contain the contents of a valid <code>pyproject.toml</code> file. This way users could simply copy&#x27;n&#x27;paste between their local config file and the online playground.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">playground</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-08 20:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-08 20:59</div>
            <div class="timeline-body"><p>Would be nice! Although I&#x27;m guessing we&#x27;d lose JSON Schema support (since VS Code doesn&#x27;t support JSON Schema for TOML without an extension), which would be a bummer.</p>
<p>Maybe there&#x27;s a middle ground, like allowing users to paste in TOML and auto-converting to JSON.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-09 03:09</div>
            <div class="timeline-body"><p>Ah, I didn&#x27;t think about JSON schema support. Slightly off-topic: Does the Ruff VS code extension integrate with any other extension that provides JSON schema support for TOML? I just tried <a href="https://open-vsx.org/extension/tamasfe/even-better-toml">Even Better TOML</a> but it does not recognize <code>tool.ruff</code>.</p>
<p>Back to the topic at hand: Yeah I think it&#x27;s quite unfortunate that Monaco doesn&#x27;t support extensions (<a href="https://github.com/microsoft/monaco-editor/issues/343">microsoft/monaco-editor#343</a>). Auto-converting doesn&#x27;t let the user get TOML out of the playground ... we could provide a toggle button to switch between TOML and JSON, but this obviously still isn&#x27;t ideal. The ideal solution would be to get JSON schema support in Monaco but that&#x27;s probably not possible until Monaco supports extensions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-09 03:29</div>
            <div class="timeline-body"><p>Even Better TOML does work for me:</p>
<p><img src="https://user-images.githubusercontent.com/1309177/211236697-2a96f989-8987-4221-b296-e3be8265d856.png" alt="Screen Shot 2023-01-08 at 10 28 32 PM"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-09 04:11</div>
            <div class="timeline-body"><p>Ah my bad, it does work! I was just getting confused by some errors it highlighted but these are just because my <code>pyproject.toml</code> file uses recently introduced settings that the VS code extension, that hasn&#x27;t been updated since, doesn&#x27;t yet know about. I am using the <code>ruff.path</code> setting to use the latest version of ruff with the extension ... would it be possible for the extension to obtain the latest JSON schema from the <code>ruff</code> binary?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-09 04:22</div>
            <div class="timeline-body"><p>I don&#x27;t <em>think</em> so. I haven&#x27;t looked into it deeply. Unfortunately we have to update the schema in the <a href="https://github.com/SchemaStore/schemastore">SchemaStore repository</a> in order to ship updates, which I do from time to time. (You <em>can</em> point SchemaStore to a URL, rather than including the schema in the repo directly, but then we wouldn&#x27;t be able to autocomplete in <code>pyproject.toml</code> files -- anything that&#x27;s included in <em>another</em> schema has to be bundled directly.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-13 14:17</div>
            <div class="timeline-body"><p>You can now paste a TOML configuration into the playground using CTRL-V and it gets converted to JSON. The playground also supports copying the JSON configuration as TOML by right click -&gt; Copy pyproject.toml.</p>
<p>I looked into using TOML as the configuration format but, unfortunately, Monaco doesn&#x27;t support TOML auto completion and I couldn&#x27;t find any plugin.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-13 14:17</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:29 UTC
    </footer>
</body>
</html>
