<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UP031 does not flag errors - astral-sh/ruff #8902</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UP031 does not flag errors</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8902">#8902</a>
        opened by <a href="https://github.com/abhijeetbodas2001">@abhijeetbodas2001</a>
        on 2023-11-29 06:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/abhijeetbodas2001">@abhijeetbodas2001</a></div>
            <div class="timeline-body"><p>The <code>UP031</code> fixer seems to be broken. I picked up one of the examples from the documentation for the fixer itself (https://docs.astral.sh/ruff/rules/printf-string-formatting/), but latest <code>ruff v0.1.6</code> did not flag it.</p>
<pre><code class="language-bash">[~] $ cat test.py
[~] $ cat -n test.py
     1  value = 1
     2  print(&quot;%s&quot; % value)  # &quot;1&quot;
     3  print(&quot;{}&quot;.format(value))  # &quot;1&quot;
     4
     5  value = (1,)
     6  print(&quot;%s&quot; % value)  # &quot;1&quot;
     7  print(&quot;{}&quot;.format(value))  # &quot;(1,)&quot;
     8

[~] $ ruff --select UP test.py
test.py:3:7: UP032 [*] Use f-string instead of `format` call
test.py:7:7: UP032 [*] Use f-string instead of `format` call
Found 2 errors.
[*] 2 fixable with the `--fix` option.
[~] $ ruff --version
ruff 0.1.6
[~] $
</code></pre>
<p>(Notice that line 2 and line 6 did not get flagged by <code>UP031</code>)</p>
<p>Please LMK if any other info is required for debugging. Thanks a lot for all your efforts on this project!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2023-11-29 06:33</div>
            <div class="timeline-body"><p>I think you meant <code>UP031</code>.  I don't think Ruff currently infers the type of the variable. The example in the doc shows you why Ruff can't autofix this w/o type information. It's expected to not be fixable with that specific example.  Although I think it should still raise it, see #6796, which this issue might duplicate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/abhijeetbodas2001">@abhijeetbodas2001</a> on 2023-11-29 10:25</div>
            <div class="timeline-body"><blockquote>
<p>I think you meant UP031</p>
</blockquote>
<p>Oops, yes. I will update the title.</p>
<blockquote>
<p>Although I think it should still raise it, see https://github.com/astral-sh/ruff/issues/6796, which this issue might duplicate.</p>
</blockquote>
<p>Yup, that issue describes the same use case. Even I wanted just flagging the occurence, even if not autofixing it.
I will close out this issue. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "UP301 does not flag errors" to "UP031 does not flag errors" by @abhijeetbodas2001 on 2023-11-29 10:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @abhijeetbodas2001 on 2023-11-29 10:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:49:09 UTC
    </footer>
</body>
</html>
