```yaml
number: 11005
title: "f strings with `=` don't get formatted"
type: issue
state: closed
author: DetachHead
labels:
  - formatter
assignees: []
created_at: 2024-04-18T00:59:51Z
updated_at: 2024-04-19T12:25:24Z
url: https://github.com/astral-sh/ruff/issues/11005
synced_at: 2026-01-10T01:56:52Z
```

# f strings with `=` don't get formatted

---

_Issue opened by @DetachHead on 2024-04-18 00:59_

# before
```py
a = 1
f"{ a   =  }"
f"{ a   }"
```
# after
```py
a = 1
f"{ a   =  }"
f"{a}"
```

[playground](https://play.ruff.rs/ee8c1c05-db9e-41e4-8ad6-7dc96248ebb7)

---

_Label `formatter` added by @charliermarsh on 2024-04-18 01:26_

---

_Comment by @charliermarsh on 2024-04-18 01:26_

I think there is a reason for this, maybe that those are debug representations and they must be verbatim? @dhruvmanila would know.

---

_Comment by @DetachHead on 2024-04-18 01:54_

oh i didn't realize the whitespace is included in the output
```
>>> f"{1   =  }"  
'1   =  1'
```

in that case, maybe it can be a lint rule instead so people can decide for themselves whether they want to enforce a consistent formatting for these

---

_Comment by @dhruvmanila on 2024-04-18 02:34_

Yeah, so as you've noticed whitespaces are preserved for debug expressions which means if the formatter removed them, it will actually change the code output. This is why we avoid doing that.

I don't know if it can be a lint rule as we can't infer if the user intended to put the whitespaces there or not.

---

_Comment by @dhruvmanila on 2024-04-19 12:25_

I'll close this issue as it's working as expected.

---

_Closed by @dhruvmanila on 2024-04-19 12:25_

---
