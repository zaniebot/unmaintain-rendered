<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Issues with `B009` and `B010` autofix - astral-sh/ruff #2202</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Issues with <code>B009</code> and <code>B010</code> autofix</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2202">#2202</a>
        opened by <a href="https://github.com/WilliamJamieson">@WilliamJamieson</a>
        on 2023-01-26 17:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/WilliamJamieson">@WilliamJamieson</a></div>
            <div class="timeline-body">

<p>I found that running the autofix for <code>B009</code> and <code>B010</code> can break code in a very specific circumstance, specifically when it is applied to:</p>
<ul>
<li>https://github.com/asdf-format/asdf/blob/ae9b77cdc8d69f1f1fd136ff48c9a523a86c18af/asdf/types.py#L85</li>
<li>https://github.com/asdf-format/asdf/blob/ae9b77cdc8d69f1f1fd136ff48c9a523a86c18af/asdf/types.py#L149</li>
</ul>
<p>Will deeply break my code.</p>
<p>Based on this discussion thread: <a href="https://github.com/astropy/astropy/pull/14275">astropy/astropy#14275</a>#discussion_r1072555924, I think the issue is in how python handles <code>__X</code> access meaning this issue is likely limited to only cases where the attribute being set or gotten is of the form <code>__X</code>.</p>
<p>I think the solution might be to avoid making an autofix when the fixed string in question has the prefix <code>__</code> but no suffix <code>__</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 17:19</div>
            <div class="timeline-body"><p>Oh interesting! Will fix now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 17:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 17:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 17:20</div>
            <div class="timeline-body"><p>Thank you for flagging this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 17:22</div>
            <div class="timeline-body"><p>Ah right, ok, the double underscore causes name mangling.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/WilliamJamieson">@WilliamJamieson</a> on 2023-01-26 17:24</div>
            <div class="timeline-body"><p>Thanks for such a fast response!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sciyoshi">@sciyoshi</a> on 2023-01-26 17:25</div>
            <div class="timeline-body"><p>Oh sorry @charliermarsh - didn&#x27;t see you were already fixing! ðŸ˜…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 17:28</div>
            <div class="timeline-body"><p>No prob! Thanks so much for hopping on it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 17:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 17:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:31 UTC
    </footer>
</body>
</html>
