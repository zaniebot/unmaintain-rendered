<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A006 and A002 both trigger for lambda's - astral-sh/ruff #14135</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>A006 and A002 both trigger for lambda's</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/14135">#14135</a>
        opened by <a href="https://github.com/jaap3">@jaap3</a>
        on 2024-11-06 14:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jaap3">@jaap3</a> on 2024-11-06 14:51</div>
            <div class="timeline-body"><p>This example triggers two violations (with preview enabled), is this intentional?</p>
<pre><code class="language-python">lambda id: id + 1
</code></pre>
<pre><code>$ ruff check --isolated --preview --select A test.py

test.py:1:8: A002 Argument `id` is shadowing a Python builtin
  |
1 | lambda id: id + 1
  |        ^^ A002
  |

test.py:1:8: A006 Lambda argument `id` is shadowing a Python builtin
  |
1 | lambda id: id + 1
  |        ^^ A006
  |
</code></pre>
<pre><code>$ ruff --version
ruff 0.7.2
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @dylwil3 on 2024-11-06 15:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @dylwil3 on 2024-11-06 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2024-11-06 15:30</div>
            <div class="timeline-body"><p>Nice catch! It looks like <code>flake8-builtins</code> distinguishes between (named) functions and lambdas. We should match that behavior and maybe update the documentation on <code>A002</code> and <code>A006</code>.</p>
<p>My only hesitation is that this would be a breaking change for a stable rule - so if people were running the checker with preview <em>off</em> and catching this shadowing on lambdas, they would no longer catch it if we matched <code>flake8-builtins</code>.</p>
<p>Not sure the best protocol for handling this - @MichaReiser / @AlexWaygood ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-11-06 18:06</div>
            <div class="timeline-body"><p>Great question. When we <em>expand</em> the scope of a stable rule, we generally put the new behaviour in preview mode for a couple of months before promoting it to stable. When we <em>reduce</em> the scope of a rule, it's more of a judgement call.</p>
<p>I <em>can</em> see the argument that this might be a breaking change for some people -- but it definitely feels like a bug to me to have two rules complain about the exact same error. So I'd be inclined to ship the behaviour change straight into stable for this one, so that users can benefit from the bugfix even if they haven't selected <code>preview = true</code> (most don't).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @dylwil3 on 2024-11-06 18:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "A005 and A002 both trigger for lambda's" to "A006 and A002 both trigger for lambda's" by @dylwil3 on 2024-11-07 00:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @dylwil3 by @dylwil3 on 2024-11-07 01:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14144.html">astral-sh/ruff#14144</a> on 2024-11-07 01:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dylwil3 on 2024-11-07 05:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:14 UTC
    </footer>
</body>
</html>
