<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Setting to stop `ruff format` from unwrapping long strings - astral-sh/ruff #16109</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Setting to stop <code>ruff format</code> from unwrapping long strings</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/16109">#16109</a>
        opened by <a href="https://github.com/jamesbraza">@jamesbraza</a>
        on 2025-02-12 00:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jamesbraza">@jamesbraza</a></div>
            <div class="timeline-body"><h3>Description</h3>
<p>If I have something like this:</p>
<pre><code class="language-python">long_string = (
    &quot;An above 79 but below 88 char line. In other words, a long long long long long&quot;
    &quot; long string.&quot;
)
</code></pre>
<p>I have observed with <code>ruff==0.9.6</code> that <code>ruff format --line-length 120</code> will unwrap this string to be one line.</p>
<p>When working with (a convoluted) set up of both <code>ruff format</code> and <code>black</code> checked code, this string unwrapping can cause issues:</p>
<ul>
<li>Someone running <code>black</code>: won't unwrap lines</li>
<li>Someone running <code>ruff</code>: will unwrap lines</li>
</ul>
<p>Is there any chance we can get a setting to not auto-unwrap strings?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-12 04:49</div>
            <div class="timeline-body"><p>Thank you for the report.</p>
<p>This is coming from the 2025 style guide of formatting implicitly concatenated strings if they fit on a single line within the line length limit. This is a known deviation from Black (https://docs.astral.sh/ruff/formatter/black/#implicit-concatenated-strings) although Black's unstable style applies the same formatting.</p>
<blockquote>
<p>Is there any chance we can get a setting to not auto-unwrap strings?</p>
</blockquote>
<p>I don't think there's a way to configure this specific way except for <a href="https://docs.astral.sh/ruff/formatter/#format-suppression">suppressing those lines</a>. Using two separate line length limit could potentially solve it but that would create even more differences.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @dhruvmanila on 2025-02-12 04:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @dhruvmanila on 2025-02-12 04:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2025-02-12 06:53</div>
            <div class="timeline-body"><p>Thanks for understanding, yeah you understand the issue at hand.</p>
<blockquote>
<p>I don't think there's a way to configure this specific way except for <a href="https://docs.astral.sh/ruff/formatter/#format-suppression">suppressing those lines</a>.</p>
</blockquote>
<p>This won't work because it's not a one off where one can add <code># fmt: off</code>/<code>on</code>. It applies to every string in the code base. In the past every long string in the entire source was formatted:</p>
<pre><code class="language-bash">black --preview --enable-unstable-feature=string_processing src
</code></pre>
<blockquote>
<p>This is coming from the 2025 style guide of formatting implicitly concatenated strings if they fit on a single line within the line length limit.</p>
</blockquote>
<p>Thanks for clarifying. I guess the request here is to add a new setting that either:</p>
<ul>
<li>Disables implicit string concatenation</li>
<li>Applies a different <code>line-length</code> for implicit string concatenation</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-02-12 08:08</div>
            <div class="timeline-body"><p>I want to avoid introducing syntax-specific line lengths. I think that would be confusing and open an endless request for line-length settings. I think we can consider an option to disable automatic string splitting/joining. But it's somewhat unclear if that setting then should also disable comment formatting (automatically breaking comments after a specific line length) if this is something the formatter supports in the future.</p>
<p>I'll keep this open to see if there's more demand for it. I consider it unlikely that we implement said setting if there isn't.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @MichaReiser on 2025-02-12 08:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @MichaReiser on 2025-02-12 08:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> removed by @MichaReiser on 2025-02-12 08:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2025-02-12 08:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2025-02-12 19:54</div>
            <div class="timeline-body"><p>Sound good. I agree it's a bit hacky, ima just close this out. Really I need to resolve a jank set up ðŸ˜†</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jamesbraza on 2025-02-12 19:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:52:11 UTC
    </footer>
</body>
</html>
