<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement flake8-simplify - astral-sh/ruff #998</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Implement flake8-simplify</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/998">#998</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2022-12-02 15:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-02 15:36</div>
            <div class="timeline-body"><p>Python-specific rules:</p>
<ul>
<li>[x] <code>SIM101</code> (&quot;Multiple isinstance-calls which can be merged into a single call by using a tuple as a second argument&quot;)</li>
<li>[x] <code>SIM105</code> (&quot;Use 'contextlib.suppress(...)' instead of try-except-pass&quot;)</li>
<li>[x] <code>SIM107</code> (&quot;Don't use <code>return</code> in try/except and finally &quot;)</li>
<li>[x] <code>SIM108</code> (&quot;Use the ternary operator if it's reasonable &quot;)</li>
<li>[x] <code>SIM109</code> (&quot;Use a tuple to compare a value against multiple values&quot;)</li>
<li>[x] <code>SIM110</code> (&quot;Use <a href="https://docs.python.org/3/library/functions.html#any">any(...)</a> &quot;)</li>
<li>[x] <code>SIM111</code> (&quot;Use <a href="https://docs.python.org/3/library/functions.html#all">all(...)</a>&quot;)</li>
<li>[x] <code>SIM113</code> (&quot;Use enumerate instead of manually incrementing a counter&quot;)</li>
<li>[x] <code>SIM114</code> (&quot;Combine conditions via a logical or to prevent duplicating code&quot;)</li>
<li>[x] <code>SIM115</code> (&quot;Use context handler for opening files&quot;)</li>
<li>[x] <code>SIM116</code> (&quot;Use a dictionary instead of many if/else equality checks&quot;)</li>
<li>[x] <code>SIM117</code> (&quot;Merge with-statements that use the same scope&quot;)</li>
</ul>
<p>Simplifying Comparisons:</p>
<ul>
<li>[x] <code>SIM201</code> (&quot;Use 'a != b' instead of 'not a == b'&quot;)</li>
<li>[x] <code>SIM202</code> (&quot;Use 'a == b' instead of 'not a != b'&quot;)</li>
<li>[x] <code>SIM203</code> (&quot;Use 'a not in b' instead of 'not (a in b)'&quot;)</li>
<li>[x] <code>SIM208</code> (&quot;Use 'a' instead of 'not (not a)'&quot;)</li>
<li>[x] <code>SIM210</code> (&quot;Use 'bool(a)' instead of 'True if a else False'&quot;)</li>
<li>[x] <code>SIM211</code> (&quot;Use 'not a' instead of 'False if a else True'&quot;)</li>
<li>[x] <code>SIM212</code> (&quot;Use 'a if a else b' instead of 'b if not a else a'&quot;)</li>
<li>[x] <code>SIM220</code> (&quot;Use 'False' instead of 'a and not a'&quot;)</li>
<li>[x] <code>SIM221</code> (&quot;Use 'True' instead of 'a or not a'&quot;)</li>
<li>[x] <code>SIM222</code> (&quot;Use 'True' instead of '... or True'&quot;)</li>
<li>[x] <code>SIM223</code> (&quot;Use 'False' instead of '... and False'&quot;)</li>
<li>[x] <code>SIM300</code> (&quot;Use 'age == 42' instead of '42 == age'&quot;)</li>
</ul>
<p>Simplifying usage of dictionaries:</p>
<ul>
<li>[x] <code>SIM401</code> (&quot;Use 'a_dict.get(key, &quot;default_value&quot;)' instead of an if-block&quot;)</li>
<li>[x] <code>SIM118</code> (&quot;Use 'key in dict' instead of 'key in dict.keys()'&quot;)</li>
</ul>
<p>General Code Style:</p>
<ul>
<li>[x] <code>SIM102</code> (&quot;Use a single if-statement instead of nested if-statements&quot;)</li>
<li>[x] <code>SIM103</code> (&quot;Return the boolean condition directly&quot;)</li>
<li>[x] <code>SIM112</code> (&quot;Use CAPITAL environment variables&quot;)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2022-12-02 15:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/106.html">astral-sh/ruff#106</a> on 2022-12-02 16:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-02 16:50</div>
            <div class="timeline-body"><p>This plugin is particularly useful because we should be able to autofix most of these.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1195.html">astral-sh/ruff#1195</a> on 2022-12-11 12:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1449.html">astral-sh/ruff#1449</a> on 2022-12-29 21:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../astral-sh/ruff-lsp/issues/23.html">astral-sh/ruff-lsp#23</a> on 2022-12-30 12:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../sphinx-doc/sphinx/pulls/11053.html">sphinx-doc/sphinx#11053</a> on 2022-12-31 09:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> removed by @charliermarsh on 2022-12-31 18:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">plugin</span> added by @charliermarsh on 2022-12-31 18:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1539.html">astral-sh/ruff#1539</a> on 2023-01-01 22:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1543.html">astral-sh/ruff#1543</a> on 2023-01-02 01:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1586.html">astral-sh/ruff#1586</a> on 2023-01-03 04:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @charliermarsh on 2023-01-04 01:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1621.html">astral-sh/ruff#1621</a> on 2023-01-04 03:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-04 20:44</div>
            <div class="timeline-body"><p>I'm working on <code>SIM110</code> and <code>SIM111</code>.</p>
<p>(These actually require some weird logic whereby we need to be able to peek at the next sibling, so TBD.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1626.html">astral-sh/ruff#1626</a> on 2023-01-04 20:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1649.html">astral-sh/ruff#1649</a> on 2023-01-05 01:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1650.html">astral-sh/ruff#1650</a> on 2023-01-05 02:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1651.html">astral-sh/ruff#1651</a> on 2023-01-05 02:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1653.html">astral-sh/ruff#1653</a> on 2023-01-05 04:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danieleades">@danieleades</a> on 2023-01-05 11:01</div>
            <div class="timeline-body"><p>looking good! I'll keep an eye on this issue and hopefully be able to remove the <code>flake8-simplify</code> plugin from Sphinx soon!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1666.html">astral-sh/ruff#1666</a> on 2023-01-05 17:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-06 00:32</div>
            <div class="timeline-body"><p>I'm working on <code>SIM101</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1673.html">astral-sh/ruff#1673</a> on 2023-01-06 01:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1684.html">astral-sh/ruff#1684</a> on 2023-01-06 06:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1687.html">astral-sh/ruff#1687</a> on 2023-01-06 09:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1712.html">astral-sh/ruff#1712</a> on 2023-01-07 09:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1717.html">astral-sh/ruff#1717</a> on 2023-01-07 17:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/messense">@messense</a> on 2023-01-08 01:51</div>
            <div class="timeline-body"><blockquote>
<p>SIM106 (&quot;Handle error-cases first&quot;)</p>
</blockquote>
<p><code>SIM106</code> was removed in <code>flake8-simplify</code> due to too many false-positives: https://github.com/MartinThoma/flake8-simplify/pull/108</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-08 03:17</div>
            <div class="timeline-body"><p>Removed, thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../fpgmaas/deptry/pulls/268.html">fpgmaas/deptry#268</a> on 2023-01-08 15:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1764.html">astral-sh/ruff#1764</a> on 2023-01-10 08:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1778.html">astral-sh/ruff#1778</a> on 2023-01-11 03:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1782.html">astral-sh/ruff#1782</a> on 2023-01-11 13:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jackklika">@jackklika</a> on 2023-01-20 16:35</div>
            <div class="timeline-body"><p>FYI <code>SIM103</code> autofix refactored my code to be incorrect:</p>
<pre><code>(apps-z6RSF3Uo-py3.10) jack@macbook api % cat /tmp/a.py 
def verify_user(kind):
    if kind != &quot;USER&quot;:
        return False
    else:
        return True
(apps-z6RSF3Uo-py3.10) jack@macbook api % ruff /tmp/a.py
/tmp/a.py:2:5: SIM103 Return the condition `kind != &quot;USER&quot;` directly
Found 1 error(s).
1 potentially fixable with the --fix option.
(apps-z6RSF3Uo-py3.10) jack@macbook api % ruff /tmp/a.py --fix
Found 1 error(s) (1 fixed, 0 remaining).
(apps-z6RSF3Uo-py3.10) jack@macbook api % cat /tmp/a.py      
def verify_user(kind):
    return kind != &quot;USER&quot;
(apps-z6RSF3Uo-py3.10) jack@macbook api % 

</code></pre>
<p>In the first case, the function returns <code>False</code> if the kind is not <code>&quot;USER&quot;</code>, and True otherwise. In the fixed function, it returns the opposite. In the REPL:</p>
<pre><code>&gt;&gt;&gt; def verify_user(kind):
...     if kind != &quot;USER&quot;:
...         return False
...     else:
...         return True
&gt;&gt;&gt; verify_user(&quot;USER&quot;)
True
&gt;&gt;&gt; def verify_user(kind):
...     return kind != &quot;USER&quot;
&gt;&gt;&gt; verify_user(&quot;USER&quot;)
False
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-20 16:57</div>
            <div class="timeline-body"><p>@jackklika - D'oh, thank you. I'll fix that this afternoon. Must be a flipped condition somewhere.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2035.html">astral-sh/ruff#2035</a> on 2023-01-20 16:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/harupy">@harupy</a> on 2023-01-22 05:52</div>
            <div class="timeline-body"><p>Can I implement SIM124?</p>
<p>https://github.com/MartinThoma/flake8-simplify#sim909 says:</p>
<blockquote>
<p>The trial period starts on 28th of March and will end on 28th of September 2022.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-22 05:54</div>
            <div class="timeline-body"><p>Go for it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/harupy">@harupy</a> on 2023-01-22 06:03</div>
            <div class="timeline-body"><p>@charliermarsh Is there a way to compare two expressions while ignoring their contexts?</p>
<pre><code class="language-python">foo = foo
^^^   ^^^
 |     |
 |      ---- Name { id: &quot;foo&quot;, ctx: Load }
  ---------- Name { id: &quot;foo&quot;, ctx: Store }
</code></pre>
<p>I tried <code>ComparableExpr</code> but it didn't work because the assignment target and value don't have the same context.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-22 18:26</div>
            <div class="timeline-body"><p>Hmm, no, we don't have anything to support that right now. Although arguably <code>ComparableExpr</code> should ignore <code>ctx</code>. Trying to think of where that would be incorrect.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../apache/airflow/issues/26378.html">apache/airflow#26378</a> on 2023-02-06 18:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2702.html">astral-sh/ruff#2702</a> on 2023-02-10 01:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2767.html">astral-sh/ruff#2767</a> on 2023-02-11 15:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2823.html">astral-sh/ruff#2823</a> on 2023-02-12 19:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../materialsproject/pymatgen/pulls/2847.html">materialsproject/pymatgen#2847</a> on 2023-02-15 19:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-20 20:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7777.html">astral-sh/ruff#7777</a> on 2023-10-03 12:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:07 UTC
    </footer>
</body>
</html>
