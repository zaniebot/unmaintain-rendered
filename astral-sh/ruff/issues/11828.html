<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F811 is not raised when it is needed - astral-sh/ruff #11828</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>F811 is not raised when it is needed</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/11828">#11828</a>
        opened by <a href="https://github.com/Denis-Alexeev">@Denis-Alexeev</a>
        on 2024-06-10 20:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Denis-Alexeev">@Denis-Alexeev</a> on 2024-06-10 20:21</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>Ruff does not raise F811 error when unused redefinition exists.</p>
<p>Keywords:
&quot;F811&quot;, &quot;redefinition&quot;</p>
<p>Code snippet:</p>
<pre><code class="language-python">&quot;&quot;&quot;module.&quot;&quot;&quot;
class AAA:
    &quot;&quot;&quot;ddd.&quot;&quot;&quot;

    def world(self: &quot;AAA&quot;) -&gt; None:
        &quot;&quot;&quot;Docstring.&quot;&quot;&quot;

    hello = world

    def hello(self: &quot;AAA&quot;) -&gt; None:
        &quot;&quot;&quot;Docstring.&quot;&quot;&quot;

</code></pre>
<p>Command:
<code>ruff check --config /path/to/config /path/to/python/file.py</code></p>
<p>ruff.toml:</p>
<pre><code>target-version = &quot;py312&quot;

[lint]
select = [&quot;ALL&quot;]
</code></pre>
<p>ruff version:
ruff 0.4.8</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-06-10 20:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-12 02:46</div>
            <div class="timeline-body"><p>Not clear why it's not being raised here, but it should be AFAICT.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ukyen8">@ukyen8</a> on 2024-06-13 08:43</div>
            <div class="timeline-body"><p>@charliermarsh I think the shadowed binding can also be an Assignment. At the moment, Ruff checks shadowed binding for class, function, import, from import.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ukyen8">@ukyen8</a> on 2024-06-17 21:41</div>
            <div class="timeline-body"><p>@charliermarsh I like using Ruff. I'd love to contribute to ruff and would like to work on this issue. Is it okay if I take this on?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-06-18 04:55</div>
            <div class="timeline-body"><p>@ukyen8 Yeah, go for it. The code for this rule logic is at https://github.com/astral-sh/ruff/blob/c53d55a483f0f81f0dcdc67f762bbf2c71e96773/crates/ruff_linter/src/checkers/ast/analyze/deferred_scopes.rs#L190-L309</p>
<p>Don't hesitate to ask any questions if you're stuck either here or on Discord :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/11961.html">astral-sh/ruff#11961</a> on 2024-06-21 09:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-07-13 17:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-07-26 02:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-26 02:16</div>
            <div class="timeline-body"><p>Fixed in https://github.com/astral-sh/ruff/pull/11961, forgot to close.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
