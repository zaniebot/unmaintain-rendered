<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I001 when two empty lines between imports and function - astral-sh/ruff #10410</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>I001 when two empty lines between imports and function</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10410">#10410</a>
        opened by <a href="https://github.com/mgzenitech">@mgzenitech</a>
        on 2024-03-14 08:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mgzenitech">@mgzenitech</a></div>
            <div class="timeline-body">

<p>This triggers <code>I001</code></p>
<pre><code>#!/usr/bin/env -S poetry run python

from typing import Any
from jsonc_parser.parser import JsoncParser


def from_json(
    source: str,
    _: dict[str, str],
) -&gt; dict[str, Any]:
    &quot;&quot;&quot;
    Parses a JSONC (JSON with comments) string into a Python dictionary.

    Args:
        source: A string containing JSONC content to be parsed.

    Returns:
        A dictionary representation of the parsed JSONC content.
    &quot;&quot;&quot;
    return JsoncParser.parse_str(source)
</code></pre>
<p>However this doesn&#x27;t (please take notice of empty line between imports and function as that is the only difference):</p>
<pre><code>#!/usr/bin/env -S poetry run python

from typing import Any
from jsonc_parser.parser import JsoncParser

def from_json(
    source: str,
    _: dict[str, str],
) -&gt; dict[str, Any]:
    &quot;&quot;&quot;
    Parses a JSONC (JSON with comments) string into a Python dictionary.

    Args:
        source: A string containing JSONC content to be parsed.

    Returns:
        A dictionary representation of the parsed JSONC content.
    &quot;&quot;&quot;
    return JsoncParser.parse_str(source)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-14 15:49</div>
            <div class="timeline-body"><p>I&#x27;m unable to reproduce this. I see an I001 error in both cases: https://play.ruff.rs/68796056-b9bd-4903-8abf-a6d4cf4ce927.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-info</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-14 15:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mgzenitech">@mgzenitech</a> on 2024-03-14 15:54</div>
            <div class="timeline-body"><p>Found the issue...</p>
<p>If I set <code>lines-after-imports = 1</code> and run formatter it leaves the linter unhappy :D and since there is no way to control this for formatter I was forced to set it to <code>lines-after-imports = 2</code> to be able to use both linter and formatter...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/mgzenitech">@mgzenitech</a> on 2024-03-14 15:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-14 16:00</div>
            <div class="timeline-body"><p>Oh right! Thanks for following up.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vmartyanov">@vmartyanov</a> on 2024-05-15 12:41</div>
            <div class="timeline-body"><p>Got error &quot;Import block is un-sorted or un-formatted&quot; when just one single empty line is absent. The message is not informative when ruff knows well what is expected. Need more informative messages in this case. And number of empty lines should not be an error</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:51 UTC
    </footer>
</body>
</html>
