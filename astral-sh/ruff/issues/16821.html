<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TC003 + pydantic.BaseModel - astral-sh/ruff #16821</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>TC003 + pydantic.BaseModel</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/16821">#16821</a>
        opened by <a href="https://github.com/stiangrim">@stiangrim</a>
        on 2025-03-17 19:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/stiangrim">@stiangrim</a> on 2025-03-17 19:42</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hi ðŸ‘‹
I have a problem with combining <code>TC003</code> with <code>BaseModel</code> from <code>pydantic</code>:</p>
<pre><code>from __future__ import annotations

from typing import TYPE_CHECKING

if TYPE_CHECKING:
    import datetime

class DeliveryWindow(BaseModel):
    start_time: datetime.time
</code></pre>
<p><strong><code>TC003</code></strong> tells me to move <code>datetime.time</code> inside <code>TYPE_CHECKING</code>, however creating an object of <code>DeliveryWindow</code> will cause an error:</p>
<pre><code>{
    &quot;error&quot;: &quot;`DeliveryWindow` is not fully defined; you should define `datetime`, then call `DeliveryWindow.model_rebuild()`.\n\nFor further information visit https://errors.pydantic.dev/2.10/u/class-not-fully-defined&quot;,
    &quot;error_type&quot;: &quot;PydanticUserError&quot;
}
</code></pre>
<h3>Version</h3>
<p>0.11.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stiangrim">@stiangrim</a> on 2025-03-17 19:56</div>
            <div class="timeline-body"><p>Closed as I found docs for this here:</p>
<p>https://docs.astral.sh/ruff/settings/#lint_flake8-type-checking_runtime-evaluated-base-classes</p>
<pre><code>[tool.ruff.lint.flake8-type-checking]
runtime-evaluated-base-classes = [&quot;pydantic.BaseModel&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @stiangrim on 2025-03-17 19:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @ntBre on 2025-03-17 20:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:17 UTC
    </footer>
</body>
</html>
