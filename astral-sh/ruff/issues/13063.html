<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISC001 fix covers not all cases - astral-sh/ruff #13063</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>ISC001 fix covers not all cases</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/13063">#13063</a>
        opened by <a href="https://github.com/serjflint">@serjflint</a>
        on 2024-08-22 19:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/serjflint">@serjflint</a> on 2024-08-22 19:37</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>ruff 0.5.3
ruff check --fix</p>
<p>Hi! I am trying to fix all ISC errors after switching from 80 line-length to 120.
I still have many cases which are flagged by ISC001 but aren't auto-fixed.</p>
<p>One such case is where only one side is an f-string:
<code>'Argument &quot;num&quot; has incorrect type. ' f'Expected {num}.'</code>
<code>f'Request to {TVM_SERVICE_NAME} failed. ' 'Unexpected error: ' + error_msg</code>
<code>f'oneOf schema variants {nullable_variants} are nullable ' 'at the same time, this create ambiguities'</code></p>
<p>Another one was with different quote-styles (because some string are double-quoted even with <code>quote-style = &quot;single&quot;</code>), but I worked around it by formatting everything to double-quotes and back.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by @AlexWaygood on 2024-08-22 19:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2024-08-22 19:58</div>
            <div class="timeline-body"><p>The current implementation of this rule requires that both the leading and trailing quotes of each string agree before concatenating. That's actually causing both issues, because the leading quote for <code>f&quot;{num}&quot;</code> comes out as <code>f&quot;</code> not <code>&quot;</code>.</p>
<p>https://github.com/astral-sh/ruff/blob/2edd32aa31446c81c245beb1230de26220a7d7e8/crates/ruff_linter/src/rules/flake8_implicit_str_concat/rules/implicit.rs#L159-L173</p>
<p>From my point of view, the f-string miss is a bug but the disagreement in quote-styles is maybe not (and fixable, as you say, by running a formatter first). Maybe these can be concatenated with correct quotes depending on a user-defined setting? Or, if the linter is allowed to look at formatter settings, the rule could default to concatenating <code>&quot;a&quot; 'b'</code> to <code>&quot;ab&quot;</code> if the formatter settings prefer double-quotes, for example.</p>
<p>But in any event, I defer to the maintainers.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
