<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An argument named `raises` confuses ruff's pydocstyle rules - astral-sh/ruff #3547</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>An argument named <code>raises</code> confuses ruff's pydocstyle rules</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/3547">#3547</a>
        opened by <a href="https://github.com/Julian">@Julian</a>
        on 2023-03-15 18:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Julian">@Julian</a></div>
            <div class="timeline-body"><p>Running:</p>
<pre><code class="language-sh">âŠ™  ruff check --select D417,D214,D405 =(printf '
def f(a, raises) -&gt; None:
    &quot;&quot;&quot;
    Do really important stuff.

    Arguments:

        a:
            a super important integer

        raises:

            uh oh, some exceptions!
    &quot;&quot;&quot;
')
</code></pre>
<p>produces:</p>
<pre><code>/tmp/zsh82UkZp:2:5: D417 Missing argument description in the docstring: `raises`
/tmp/zsh82UkZp:3:5: D405 [*] Section name should be properly capitalized (&quot;raises&quot;)
/tmp/zsh82UkZp:3:5: D214 [*] Section is over-indented (&quot;raises&quot;)
Found 3 errors.
</code></pre>
<p>where <code>ruff</code> is expecting <code>raises:</code> to be a <code>Raises:</code> Napoleon block, but it isn't, it's simply the name of the argument, which indeed is described and properly capitalized.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-03-15 23:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">docstring</span> added by @charliermarsh on 2023-03-15 23:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-15 23:34</div>
            <div class="timeline-body"><p>I think this is consistent with <code>pydocstyle</code>. If I run <code>pydocstyle foo.py --convention=google</code>, I get:</p>
<pre><code>foo.py:1 at module level:
        D100: Missing docstring in public module
foo.py:2 in public function `f`:
        D212: Multi-line docstring summary should start at the first line
foo.py:2 in public function `f`:
        D405: Section name should be properly capitalized ('Raises', not 'raises')
foo.py:2 in public function `f`:
        D214: Section is over-indented ('Raises')
</code></pre>
<p>The issue is the space between arguments which AFAICT is not &quot;compliant&quot; with the Google spec, although I'm not sure that part is &quot;formally&quot; defined anywhere. E.g., see this example from the <a href="https://google.github.io/styleguide/pyguide.html">docs</a>:</p>
<pre><code class="language-py">def fetch_smalltable_rows(
    table_handle: smalltable.Table,
    keys: Sequence[bytes | str],
    require_all_keys: bool = False,
) -&gt; Mapping[bytes, tuple[str, ...]]:
    &quot;&quot;&quot;Fetches rows from a Smalltable.

    Retrieves rows pertaining to the given keys from the Table instance
    represented by table_handle.  String keys will be UTF-8 encoded.

    Args:
        table_handle: An open smalltable.Table instance.
        keys: A sequence of strings representing the key of each table
          row to fetch.  String keys will be UTF-8 encoded.
        require_all_keys: If True only rows with values set for all keys will be
          returned.
</code></pre>
<p>So, e.g., this works as expected:</p>
<pre><code class="language-py">def f(a, raises) -&gt; None:
    &quot;&quot;&quot;
    Do really important stuff.

    Arguments:

        a:
            a super important integer
        raises:
            uh oh, some exceptions!
    &quot;&quot;&quot;
</code></pre>
<p>I'm gonna close just because these regexes are hard to get right and the goal is mostly to be consistent with pydocstyle right now (until we implement a formal parser for docstrings), so if pydocstyle behaves the same way, I don't want to mess with the regexes too much.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-03-15 23:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-03-15 23:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:46:48 UTC
    </footer>
</body>
</html>
