<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Don't trigger SLF001 on access to a class member from an instance of the class - astral-sh/ruff #17197</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Don't trigger SLF001 on access to a class member from an instance of the class</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/17197">#17197</a>
        opened by <a href="https://github.com/cbornet">@cbornet</a>
        on 2025-04-04 10:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/cbornet">@cbornet</a> on 2025-04-04 10:33</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>SLF001 triggers for this code:</p>
<pre><code class="language-python">class A:
    def _foo(self):
        do_something()

    def is_foo_overridden(self):
        &quot;&quot;&quot;Returns true if the subclass of A overrides the _foo method.&quot;&quot;&quot;
        return type(self)._foo is A._foo  # SLF001
</code></pre>
<p>It would be nice if it didn't trigger.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trag1c">@trag1c</a> on 2025-04-04 10:40</div>
            <div class="timeline-body"><p>This doesn't trigger SLF001 (the rule is about private member access, maybe you're thinking of something else?). Matter of fact there are zero violations on that line for latest ruff release with <code>--select ALL --preview</code> ðŸ˜…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cbornet">@cbornet</a> on 2025-04-04 11:08</div>
            <div class="timeline-body"><p>Sorry, I meant <code>_foo</code>, not <code>foo</code>.
Will update the description.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../langchain-ai/langchain/pulls/30666.html">langchain-ai/langchain#30666</a> on 2025-04-04 11:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-04-04 18:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-04 18:04</div>
            <div class="timeline-body"><p>This looks like it could be a further extension to the work in https://github.com/astral-sh/ruff/pull/16149.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @MichaReiser on 2025-04-05 07:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2025-04-05 07:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/18797.html">astral-sh/ruff#18797</a> on 2025-06-19 17:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tpoliaw">@tpoliaw</a> on 2025-12-08 18:23</div>
            <div class="timeline-body"><p>This appears to also cause problems when using Self or <code>&quot;StringName&quot;</code> to avoid dependency issues, eg</p>
<pre><code class="language-python">from typing import Self

class Foo:
    def __init__(self, bar: int):
        self._bar = bar
    def stringed(self, other: &quot;Foo&quot;) -&gt; int:
        return self._bar + other._bar
    def selfed(self, other: Self) -&gt; int:
        return self._bar + other._bar
</code></pre>
<p>Running <code>uvx ruff check --select SLF001 /tmp/demo.py</code> gives</p>
<pre><code>SLF001 Private member accessed: `_bar`
 --&gt; /tmp/demo.py:7:28
  |
5 |         self._bar = bar
6 |     def stringed(self, other: &quot;Foo&quot;) -&gt; int:
7 |         return self._bar + other._bar
  |                            ^^^^^^^^^^
8 |     def selfed(self, other: Self) -&gt; int:
9 |         return self._bar + other._bar
  |

SLF001 Private member accessed: `_bar`
 --&gt; /tmp/demo.py:9:28
  |
7 |         return self._bar + other._bar
8 |     def selfed(self, other: Self) -&gt; int:
9 |         return self._bar + other._bar
  |                            ^^^^^^^^^^
  |

Found 2 errors.
</code></pre>
<p>where I wouldn't expect either to give errors</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:55 UTC
    </footer>
</body>
</html>
