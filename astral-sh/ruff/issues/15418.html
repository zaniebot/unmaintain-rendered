<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Move F841 unused variable because not dummy syntax on preview into a specific rule - astral-sh/ruff #15418</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Move F841 unused variable because not dummy syntax on preview into a specific rule</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/15418">#15418</a>
        opened by <a href="https://github.com/un-pogaz">@un-pogaz</a>
        on 2025-01-11 10:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/un-pogaz">@un-pogaz</a> on 2025-01-11 10:22</div>
            <div class="timeline-body"><p>For this code:</p>
<pre><code class="language-python">def make_tuple(idx):
    return idx, str(idx)


def foo(count):
    for i in range(count):
        value, dummy = make_tuple(i)
        print(value)
</code></pre>
<p>When run Ruff in normal mode, return no error. But when run into preview mode, Ruff sudendly raise unused variable error because the  dummy syntax is not used for the unpacking tuple, even if your use the <code>explicit-preview-rules</code> settings on <code>true</code>.</p>
<p>Except I don't want use dummy syntax. After having explored different options, settings and rules, I haven't found any solution that doesn't create more problems, and I'm obliged to ignore the rule 'F841' from the entire project (which is far from great, but clearly the lesser evil).</p>
<p><strong>Excepted behavior:</strong></p>
<p>Run Ruff in preview mode with <code>explicit-preview-rules</code> settings on <code>true</code>, the output should be identical to Ruff into normal mode.</p>
<p><strong>Suggestion:</strong></p>
<p>Create a specific (preview) rule to control and raise error if a unused variable should use dummy syntax instead.</p>
<p>This will make it possible to finely control Ruff's behavior, while preserving consistency output between normal and preview mode.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @dylwil3 on 2025-01-11 14:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @dylwil3 on 2025-01-11 14:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> removed by @MichaReiser on 2025-01-11 15:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-01-11 15:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-12 09:48</div>
            <div class="timeline-body"><p>Hi @un-pogaz</p>
<p>It's currently not possible to only opt-in to preview behavior of some rules but not of others because it would require an explicit syntax in the configuration.</p>
<p>Splitting this rule has already been proposed in another issue. I'll merge the two</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-01-12 09:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:14 UTC
    </footer>
</body>
</html>
