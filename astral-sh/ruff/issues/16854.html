<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SWAP and MISSING flake8-annotations (ANN) - astral-sh/ruff #16854</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>SWAP and MISSING flake8-annotations (ANN)</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/16854">#16854</a>
        opened by <a href="https://github.com/p1-dta">@p1-dta</a>
        on 2025-03-19 17:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/p1-dta">@p1-dta</a> on 2025-03-19 17:33</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>ANN203 does not exist, ANN202 detect protected AND private when it should only detect protected, ANN202 documentation mention private instead of protected.</p>
<p>From flake8-annotations:</p>
<ul>
<li>ANN202: Missing return type annotation for protected function</li>
<li>ANN203: Missing return type annotation for secret function</li>
</ul>
<p>From Ruff Rules documentation:</p>
<ul>
<li>ANN202: <a href="https://docs.astral.sh/ruff/rules/missing-return-type-private-function/">missing-return-type-private-function</a>, <code>Missing return type annotation for private function {name}</code></li>
<li>ANN203: No RUFF existing rules.</li>
</ul>
<p>From <a href="https://play.ruff.rs/2767d675-b8d1-47cb-baad-e8872fb2de54">Playground</a>:</p>
<ul>
<li>ANN202 detect protected function but mention &quot;private&quot; function</li>
<li>ANN202 also detect private functions when it shouldn't</li>
<li>ANN203 not raised</li>
</ul>
<p>Expected detection:</p>
<ul>
<li>ANN202: Missing return type annotation for protected function</li>
<li>ANN203: Missing return type annotation for secret function</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @ntBre on 2025-03-19 19:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-19 19:58</div>
            <div class="timeline-body"><p>Thanks for opening the issue! Based on the <a href="https://github.com/astral-sh/ruff/pull/625">PR</a> adding support for flake8-annotations rules, I think this was an intentional choice to combine ANN202 and ANN203. I also think &quot;private&quot; is pretty reasonable for both types. I don't think I've run into the &quot;protected&quot; and &quot;secret&quot; terminology before.</p>
<p>Is this causing you any problems, or is it just a difference from the upstream rule?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/p1-dta">@p1-dta</a> on 2025-03-19 20:44</div>
            <div class="timeline-body"><p>Hi.
In a nutshell: Ok for me, this need to be documented but we can close if you want, thanks for answering.</p>
<p>If this is a ruff-specific implementation and design choice, I understand but this should be explicitly stated in documentation.</p>
<p>No issue for me except that it feels weird to go from 202 to 204 without 203 and it is not coherent with flake8-annotations, even if I'm not against &quot;updates&quot; when it makes sense. In this case, to have two rules for annotations, one for protected and one for private doesn't seems very valuable to me.</p>
<p>For protected, that's the one leading underscore attributes or methods that, by convention, should not be accessed from outside of class scope, but still shared to subclasses. You can find here two instances of the word &quot;protected&quot; used <a href="https://docs.python.org/3/library/gettext.html#gettext.NullTranslations">here</a> and <a href="https://docs.python.org/3/library/zipfile.html#zipfile.ZipInfo">here</a>.
For &quot;secret&quot;, I don't know why they used this wording in the flake8 extension, maybe to explicitly emphasize the difference with conventional OOP private attr.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-19 21:45</div>
            <div class="timeline-body"><p>Ah, I see, thanks. I think we could definitely mention this in the documentation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @ntBre on 2025-03-19 21:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @ntBre on 2025-03-19 21:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:15 UTC
    </footer>
</body>
</html>
