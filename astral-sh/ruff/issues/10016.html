<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add exclusions for D103 - astral-sh/ruff #10016</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add exclusions for D103</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/10016">#10016</a>
        opened by <a href="https://github.com/clairem-sl">@clairem-sl</a>
        on 2024-02-17 06:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/clairem-sl">@clairem-sl</a> on 2024-02-17 06:51</div>
            <div class="timeline-body"><p>With my current <code>ruff</code> (version <strong>0.2.1</strong>), it keeps warning me that <code>main()</code> has no docstring (rule <code>D103</code>).</p>
<p>For me, I see no need for <code>main()</code> to ever have a docstring. After all, it's the <code>main()</code> function anyways, and I always use the <code>if __name__ == &quot;__main__&quot;</code> invocation to start it, and functionalities that may find use in other modules are already extracted to their own functions.</p>
<p>That results in me having to add <code># noqa: D103</code> every single time I create a new <code>__main__.py</code>, and it gets old quickly.</p>
<p>It would be nice if we have this configuration knob:</p>
<pre><code class="language-toml">[tool.ruff.lint.pydocstyle]
allow-undocumented = [&quot;main&quot;]
</code></pre>
<p>This knob will control the behavior of rules <code>D100</code> to <code>D104</code>.</p>
<p>A more granular approach can be implemented as well, for instance:</p>
<pre><code class="language-toml">[tool.ruff.lint.pydocstyle]
allow-undocumented-public-function = [&quot;main&quot;, &quot;get_options&quot;]
allow-undocumented-public-class = [&quot;Options&quot;]
allow-undocumented-public-method = [&quot;SomeClass.public_method&quot;]
# ... and so on, following pydocstyle rule names in https://docs.astral.sh/ruff/rules/#pydocstyle-d
</code></pre>
<p>(The <code>allow-undocumented-public-(function|class)</code> examples above are particularly useful for me because I define a <code>Protocol</code> named <code>Options</code>, and I <code>cast()</code> the result of <code>get_options()</code> [parses CLI for options using <code>argparse</code>] into <code>Options</code> for easy reference in <code>main()</code> and other functions that uses the options from CLI. For example, <a href="https://github.com/clairem-sl/sl-cartography/blob/8a758119657603f78612051bff2b88939b9804c4/src/worldmap_v4/nightlights2/__main__.py#L42-L71">here</a>, <a href="https://github.com/clairem-sl/sl-cartography/blob/8a758119657603f78612051bff2b88939b9804c4/src/worldmap_v4/mosaic/__main__.py#L43-L72">here</a>, <a href="https://github.com/clairem-sl/sl-cartography/blob/8a758119657603f78612051bff2b88939b9804c4/src/retriever_v4/maps/__main__.py#L44-L69">here</a>, and <a href="https://github.com/clairem-sl/sl-cartography/blob/8a758119657603f78612051bff2b88939b9804c4/src/analysis/clumps/__main__.py#L21-L37">here</a>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @AlexWaygood on 2024-02-18 11:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">docstring</span> added by @AlexWaygood on 2024-02-18 11:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jn64">@jn64</a> on 2025-09-05 02:37</div>
            <div class="timeline-body"><p>Duplicate / superset of #7401 (that one only mentions D103, not D100 to D104)</p>
<p>For reference, previous (unresolved) issues in pydocstyle:</p>
<ul>
<li>https://github.com/PyCQA/pydocstyle/issues/537</li>
<li>https://github.com/PyCQA/pydocstyle/issues/532</li>
</ul>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:52 UTC
    </footer>
</body>
</html>
