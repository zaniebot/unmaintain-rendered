<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>noqa comments do not work on multiline function signatures - astral-sh/ruff #1548</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>noqa comments do not work on multiline function signatures</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1548">#1548</a>
        opened by <a href="https://github.com/marscher">@marscher</a>
        on 2023-01-02 09:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/marscher">@marscher</a></div>
            <div class="timeline-body"><p>Ruff-0.0.204 accepts <code>noqa</code> selector comments if the signature is contained in one line. But it fails if the signature gets wrapped along multiple lines. The latter sometimes happens for long parameters lists leading to too long lines.</p>
<p>Ruff ignores C901 as expected</p>
<pre><code class="language-python">def foo(a: int, b: float) -&gt; float:  # noqa: C901
    pass
</code></pre>
<p>Ruff reports C901 for this:</p>
<pre><code class="language-python">def foo(a: int,
            b: float
) -&gt; float:  # noqa: C901
    pass
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "noqa comment do not work on multiline function signatures" to "noqa comments do not work on multiline function signatures" by @marscher on 2023-01-02 10:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-02 18:36</div>
            <div class="timeline-body"><p>The desired placement is like this:</p>
<pre><code class="language-py">def foo(  # noqa: C901
    a: int,
    b: float,
) -&gt; float:
    pass
</code></pre>
<p>Which is consistent with Flake8, so I think this is working as intended!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-02 18:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">noqa</span> added by @charliermarsh on 2023-01-02 18:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/marscher">@marscher</a> on 2023-01-03 10:26</div>
            <div class="timeline-body"><p>Thanks for the clarification! I will now blame my IDE :+1:</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:45:54 UTC
    </footer>
</body>
</html>
