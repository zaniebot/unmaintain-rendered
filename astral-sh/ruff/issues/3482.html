<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement flake8-dunder-all - astral-sh/ruff #3482</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Implement flake8-dunder-all</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/3482">#3482</a>
        opened by <a href="https://github.com/Goldziher">@Goldziher</a>
        on 2023-03-13 15:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Goldziher">@Goldziher</a> on 2023-03-13 15:39</div>
            <div class="timeline-body"><p>Would be great to see, also the optional script there that auto adds it:</p>
<p>https://github.com/python-formate/flake8-dunder-all</p>
<p>One note- <code>__all__</code> should be a tuple is a good optional rule, since it's a convention I'm some code bases and gives a very small performance gain..</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../python-formate/flake8-dunder-all/issues/50.html">python-formate/flake8-dunder-all#50</a> on 2023-03-13 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">plugin</span> added by @charliermarsh on 2023-03-13 16:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/onerandomusername">@onerandomusername</a> on 2023-03-14 05:03</div>
            <div class="timeline-body"><p>Interesting, that library seems to be missing two key checks.</p>
<ul>
<li>https://pypi.org/project/sort-all/ to sort the dunders in order</li>
<li>the fact that every item in an <strong>all</strong> should be a string (and ruff could probably fix that automatically)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Goldziher">@Goldziher</a> on 2023-03-14 15:41</div>
            <div class="timeline-body"><blockquote>
<p>Interesting, that library seems to be missing two key checks.</p>
<ul>
<li>https://pypi.org/project/sort-all/ to sort the dunders in order</li>
<li>the fact that every item in an <strong>all</strong> should be a string (and ruff could probably fix that automatically)</li>
</ul>
</blockquote>
<p>Also:</p>
<ol start="3">
<li>ensure uniqueness of the strings</li>
<li>ensure the string is identical to a name in the module namespace (i.e. is help by an actual value)</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../meltano/sdk/issues/1565.html">meltano/sdk#1565</a> on 2023-03-30 19:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2023-03-30 20:44</div>
            <div class="timeline-body"><p>The original flake8 plugin seems to be unmaintained. What do folks think of porting and adding the rules suggested above (prefix is a placeholder):</p>
<ul>
<li><code>DALL000</code>: Module lacks <code>__all__</code></li>
<li><code>DALL001</code>: <code>__all__</code> is out of order (auto-fixable)</li>
<li>~<code>DALL002</code>: Element of <code>__all__</code> is not a string literal~. Covered by Pylint <code>invalid-all-object</code></li>
<li><code>DALL003</code>: Elements of <code>__all__</code> should be unique (auto-fixable)</li>
<li>~<code>DALL004</code>: ... specified in <code>__all__</code> but not present in module~. Covered by Pyflakes <code>undefined-export</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/onerandomusername">@onerandomusername</a> on 2023-03-31 00:27</div>
            <div class="timeline-body"><p>it would also be nice to check the following</p>
<ul>
<li><code>__all__</code> should be a tuple</li>
<li><code>__all__</code> should be a list</li>
</ul>
<p>all can be either of the above, as some <code>__all__</code>s need to be extended later on.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-31 00:33</div>
            <div class="timeline-body"><p>Some of these exist as already-implemented Pylint rules (<code>invalid-all-format</code> and <code>invalid-all-object</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2023-03-31 01:12</div>
            <div class="timeline-body"><p>Thanks @charliermarsh, I've updated my comment to reflect which checks are already implemented</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/onerandomusername">@onerandomusername</a> on 2023-03-31 02:42</div>
            <div class="timeline-body"><blockquote>
<p>Some of these exist as already-implemented Pylint rules (<code>invalid-all-format</code> and <code>invalid-all-object</code>).</p>
</blockquote>
<p>Tbh they could be autofixable. The information from F822 is there for PLE0604 to be autofixable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JackAshwell11">@JackAshwell11</a> on 2023-04-11 17:05</div>
            <div class="timeline-body"><p>Has anymore progress been made on this issue? Having this in Ruff would be pretty helpful.</p>
<p>I can implement the rules if it is to be accepted into Ruff</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2023-04-25 02:26</div>
            <div class="timeline-body"><p>@Aspect1103 are you still interested on working on this issue? Otherwise I might take a look in the coming days.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JackAshwell11">@JackAshwell11</a> on 2023-04-25 07:06</div>
            <div class="timeline-body"><blockquote>
<p>@Aspect1103 are you still interested on working on this issue? Otherwise I might take a look in the coming days.</p>
</blockquote>
<p>I have gotten quite busy in the past couple days so haven't had much time. You're free to work on it if you want</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2023-07-10 01:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../astropy/astropy/pulls/15781.html">astropy/astropy#15781</a> on 2023-12-22 15:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:08 UTC
    </footer>
</body>
</html>
