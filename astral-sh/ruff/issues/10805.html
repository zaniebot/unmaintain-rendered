<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`flake8-slots`] Rule `SLOT002` doesn't take `typing.NamedTuple` into account - astral-sh/ruff #10805</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>flake8-slots</code>] Rule <code>SLOT002</code> doesn't take <code>typing.NamedTuple</code> into account</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10805">#10805</a>
        opened by <a href="https://github.com/autinerd">@autinerd</a>
        on 2024-04-06 17:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/autinerd">@autinerd</a> on 2024-04-06 17:07</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>Hello :blush:</p>
<p>While adding the <code>SLOT</code> rules to Home Assistant, I found that the <code>SLOT002</code> doesn't take subclasses of <code>typing.NamedTuple</code> in account, although they are the typed version of <code>collections.namedtuple</code>.</p>
<p>Thanks in advance!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-04-06 17:55</div>
            <div class="timeline-body"><p>Hi, thanks for opening the issue! Can you give a minimal code snippet as an example of where you think this rule should be emitting an error but isn't currently?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-04-06 18:11</div>
            <div class="timeline-body"><p>Ah, do you mean something like this?</p>
<pre><code class="language-py">from typing import NamedTuple

class Foo(NamedTuple(&quot;Foo&quot;, [(&quot;x&quot;, int)])):
    pass
</code></pre>
<p>It's unusual to inherit from a call-based <code>typing.NamedTuple</code> rather than to do something like</p>
<pre><code class="language-py">from typing import NamedTuple

class Foo(NamedTuple):
    x: int
</code></pre>
<p>And if you create a class-based <code>typing.NamedTuple</code> (the second way), it will create the <code>__slots__</code> for you. But I suppose if you <em>do</em> inherit from a call-based <code>typing.NamedTuple</code>, we probably <em>should</em> emit the diagnostic the same as if it were a <code>collections.namedtuple</code> (and we currently don't).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/autinerd">@autinerd</a> on 2024-04-06 18:27</div>
            <div class="timeline-body"><p>Oh, I didn't know that this example:</p>
<pre><code class="language-python">from typing import NamedTuple

class Foo(NamedTuple):
    x: int
</code></pre>
<p>will have the <code>__slots__</code> automatically created, then it is not needed of course, thanks.</p>
<p>And I didn't know about the call-based NamedTuple as well :sweat_smile: (it is not used in the Home Assistant codebase), but that would be a good idea to add.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-04-06 23:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:33:26 UTC
    </footer>
</body>
</html>
