<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UP041 false-positive in the case of target=py310 - astral-sh/ruff #8565</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>UP041 false-positive in the case of target=py310</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/8565">#8565</a>
        opened by <a href="https://github.com/alex-700">@alex-700</a>
        on 2023-11-08 15:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/alex-700">@alex-700</a> on 2023-11-08 15:17</div>
            <div class="timeline-body"><p>Hi!</p>
<p>UP041 (which is introduced in https://github.com/astral-sh/ruff/pull/8476) suggests to replace <code>asyncio.TimeoutError</code> with <code>TimeoutError</code> even when <code>target-version</code> is set to <code>py310</code>. And it offers the &quot;safe&quot; fix. But in the case of 3.10 this fix is &quot;unsafe&quot; (see. <a href="https://docs.python.org/3.10/library/asyncio-exceptions.html#asyncio.TimeoutError">asyncio.TimeoutError</a> in py310 docs)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-11-08 16:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-08 16:14</div>
            <div class="timeline-body"><p>Thanks, looks like we should refine this!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-08 17:21</div>
            <div class="timeline-body"><p>Since it's not noted here: <code>asyncio.TimeoutError</code> is an alias of <code>TimeoutError</code> in Python 3.11+ but they are distinct types in older versions. We should note this in the documentation and probably suggest an unsafe fix if the target version is not py311.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @zanieb on 2023-11-08 17:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @BurntSushi by @BurntSushi on 2023-11-09 14:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/8587.html">astral-sh/ruff#8587</a> on 2023-11-09 17:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2023-11-10 15:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:11 UTC
    </footer>
</body>
</html>
