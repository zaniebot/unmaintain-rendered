```yaml
number: 1686
title: B023 False positives
type: issue
state: closed
author: TomFryers
labels:
  - bug
assignees: []
created_at: 2023-01-06T09:24:33Z
updated_at: 2023-01-11T02:23:49Z
url: https://github.com/astral-sh/ruff/issues/1686
synced_at: 2026-01-10T01:56:45Z
```

# B023 False positives

---

_Issue opened by @TomFryers on 2023-01-06 09:24_

False positive B023 errors are quite common with `filter`, `reduce`, `key=`, `return` and `map`. For instance, this code
```python
unsorted_things = [(["foo", "bar"], 0), (["foobar", "barfoo"], 4), (["baz", "foo", "moo"], 1)]
for unsorted_thing, letter in unsorted_things:
    unsorted_thing.sort(key=lambda x: (x[letter], len(x)))
```
is fine, but it currently gets flagged as B023.

This was raised in Flake8 Bugbear in issue [303](https://github.com/PyCQA/flake8-bugbear/pull/303) (and [305](https://github.com/PyCQA/flake8-bugbear/pull/305)) and fixed in [22.10.27](https://github.com/PyCQA/flake8-bugbear#221027).

Ignoring these does cause some false negatives, for instance if the `filter` or `map` is not evaluated before the next iteration, but this was deemed acceptable in the Bugbear issue.

---

_Comment by @charliermarsh on 2023-01-06 12:18_

Ah cool. We can fix this! Thanks for filing.

---

_Label `bug` added by @charliermarsh on 2023-01-06 12:18_

---

_Assigned to @charliermarsh by @charliermarsh on 2023-01-11 01:22_

---

_Referenced in [astral-sh/ruff#1776](../../astral-sh/ruff/pulls/1776.md) on 2023-01-11 02:23_

---

_Closed by @charliermarsh on 2023-01-11 02:23_

---

_Referenced in [akretion/partner-module-information#15](../../akretion/partner-module-information/pulls/15.md) on 2024-05-17 18:30_

---
