<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement `flake8-logging` - astral-sh/ruff #7248</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Implement `flake8-logging`</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/7248">#7248</a>
        opened by <a href="https://github.com/LaBatata101">@LaBatata101</a>
        on 2023-09-08 19:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/LaBatata101">@LaBatata101</a> on 2023-09-08 19:46</div>
            <div class="timeline-body"><p>Issue to track the implementation of <a href="https://github.com/adamchainz/flake8-logging"><code>flake8-logging</code></a> rules.</p>
<ul>
<li>[x] <code>LOG001</code> use logging.getLogger() to instantiate loggers</li>
<li>[x] <code>LOG002</code> use <code>__name__</code> with <code>getLogger()</code></li>
<li>[x] <code>LOG003</code> extra <code>key '&lt;key&gt;'</code> clashes with <code>LogRecord</code> attribute <strong>/</strong> Covered by <a href="https://beta.ruff.rs/docs/rules/logging-extra-attr-clash/"><code>G101</code></a></li>
<li>[x] <code>LOG004</code> avoid <code>exception()</code> outside of exception handlers</li>
<li>[x] <code>LOG005</code> use <code>exception()</code> within an exception handler <strong>/</strong> Covered by <a href="https://beta.ruff.rs/docs/rules/error-instead-of-exception/"><code>TRY400</code></a></li>
<li>[x] <code>LOG006</code> redundant <code>exc_info</code> argument for <code>exception()</code> <strong>/</strong> Covered by <a href="https://beta.ruff.rs/docs/rules/logging-redundant-exc-info/"><code>G202</code></a></li>
<li>[x] <code>LOG007</code> use <code>error()</code> instead of <code>exception()</code> with <code>exc_info=False</code></li>
<li>[x] <code>LOG008</code> <code>warn()</code> is deprecated, use <code>warning()</code> instead <strong>/</strong> Covered by <a href="https://beta.ruff.rs/docs/rules/logging-warn/"><code>G010</code></a></li>
<li>[x] <code>LOG009</code> <code>WARN</code> is undocumented, use <code>WARNING</code> instead</li>
<li>[ ] <code>LOG010</code> <code>exception()</code> does not take an exception</li>
<li>[x] <code>LOG011</code> avoid pre-formatting log messages <strong>/</strong> Covered by <a href="https://beta.ruff.rs/docs/rules/logging-f-string/"><code>G004</code></a>, <a href="https://beta.ruff.rs/docs/rules/logging-string-concat/"><code>G003</code></a>, <a href="https://beta.ruff.rs/docs/rules/logging-percent-format/"><code>G002</code></a>, <a href="https://beta.ruff.rs/docs/rules/logging-string-format/"><code>G001</code></a></li>
<li>[ ] <code>LOG012</code> formatting error: <code>&lt;n&gt;</code> <code>&lt;style&gt;</code> placeholders but <code>&lt;m&gt;</code> arguments</li>
<li>[ ] <code>LOG013</code> formatting error: <code>&lt;missing/unreferenced&gt;</code> keys: <code>&lt;keys&gt;</code></li>
<li>[x] <code>LOG014</code> avoid <code>exc_info=True</code> outside of exception handlers</li>
<li>[x] <code>LOG015</code> avoid logging calls on the root logger</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">plugin</span> added by @zanieb on 2023-09-08 21:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7249.html">astral-sh/ruff#7249</a> on 2023-09-08 22:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qdegraaf">@qdegraaf</a> on 2023-09-08 23:29</div>
            <div class="timeline-body"><p>I'm implementing <code>LOG007</code> but will wait for review and merge of https://github.com/astral-sh/ruff/pull/7249 and the boilerplate is in so it's easier to review</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LaBatata101">@LaBatata101</a> on 2023-09-08 23:33</div>
            <div class="timeline-body"><p>I'm implementing <code>LOG001</code>, just waiting for #7249 to get merged</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jonprindiville">@jonprindiville</a> on 2023-09-11 14:38</div>
            <div class="timeline-body"><p>Hm, <code>LOG001</code> feels a bit like a specific case of <a href="https://beta.ruff.rs/docs/rules/banned-api/">banned-api (<code>TID251</code>)</a>.</p>
<p>Not to say that <code>LOG001</code> <em>can't</em> have an explicit implementation, just reminds me of this other thing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7397.html">astral-sh/ruff#7397</a> on 2023-09-15 02:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7399.html">astral-sh/ruff#7399</a> on 2023-09-15 04:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7410.html">astral-sh/ruff#7410</a> on 2023-09-15 16:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qdegraaf">@qdegraaf</a> on 2023-09-15 16:21</div>
            <div class="timeline-body"><p>It looks like <code>LOG012</code> is covered by <code>PLE1206</code>|<code>LoggingTooFewArgs</code> it only appears to cover <code>%s</code> formatting but so does <code>LOG012</code> according to <a href="https://github.com/adamchainz/flake8-logging#log012-formatting-error-n-style-placeholders-but-m-arguments">upstream README</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjkuson">@tjkuson</a> on 2023-09-15 16:34</div>
            <div class="timeline-body"><p><code>LOG007</code> should probably be implemented only once #4136 is resolved; otherwise, it conflicts with <code>TRY400</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/9128305">@9128305</a> on 2023-11-28 15:09</div>
            <div class="timeline-body"><p>New rules
https://github.com/adamchainz/flake8-logging#log013-formatting-error-missingunreferenced-keys-keys
https://github.com/adamchainz/flake8-logging#log014-avoid-exc_infotrue-outside-of-exception-handlers</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-11-28 15:13</div>
            <div class="timeline-body"><p>Thanks! I've updated the issue description.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/javulticat">@javulticat</a> on 2023-12-19 20:16</div>
            <div class="timeline-body"><p>Might I suggest that <code>ruff</code> drops/ignores <code>flake8-logging-format</code> (and the <code>G</code> error codes) entirely in favor of using <code>flake8-logging</code> (and exclusively the <code>LOG</code> error codes) as its source-of-truth for logging-related linting rules?</p>
<p>Currently, it is pretty confusing that <code>ruff</code> has logging-related linting rules spread out in two separate places (<code>G</code> and <code>LOG</code>).  To an end user of <code>ruff</code>, there really shouldn't be two separate places to find logging-related linting rules - it really seems like it's just an implementation detail that they were originally derived from two separate projects.</p>
<p>To illustrate a concrete example of how this is a problem for our organization, I see here that you've marked that some of <code>flake8-logging</code>'s <code>LOG</code> rules are already covered by some <code>G</code> rules from <code>flake8-logging-format</code> you already have, so you aren't planning on implementing those <code>LOG</code> rules (from what I gather, please correct me if I am wrong).  As an organization that is currently using <code>flake8</code> with <code>flake8-logging</code>, if we were to switch to <code>ruff</code>, how are our engineers supposed to know which of <code>ruff</code>'s <code>G</code> rules map to the <code>LOG</code> rules they are familiar with (short of having our engineers digging through Github and finding this Issue, which isn't a realistic option)?  I suppose you could put it in the official docs, but it would <em>vastly</em> reduce the friction for us to migrate to <code>ruff</code> if we could simply enable <code>LOG</code> rules and get the same behavior we currently get from <code>flake8-logging</code>.  Because, even if the mapping from <code>G</code> to <code>LOG</code> rules was documented, is there any guarantee that the rules derived from <code>flake8-logging-format</code> have identical behavior as the corresponding rule(s) derived from <code>flake8-logging</code>?</p>
<p>That brings me to what is an even more important point, in my opinion.  Compared to <code>flake8-logging-format</code>, <code>flake8-logging</code> seems to pretty objectively be a <strong>far</strong> better project to use as the source-of-truth from which you derive your logging-related linting rules.  <code>flake8-logging-format</code> is &quot;maintained&quot; (and I use that word very lightly, because the project hasn't seen any activity in <em>over a year</em>) by some unknown corporate entity.  On the other hand, <code>flake8-logging</code> was created and is actively maintained (most recent commit is less than a week old) by one of the most respected developers in the world of OSS Python software, <a href="https://github.com/adamchainz"><code>adamchainz</code></a> (whose Github profile should speak for itself, but highlights: core member of both <code>Django</code> and <code>pytest</code> teams, primary author/maintainer of many other highly regarded and heavily used OSS Python projects - including some I believe <code>ruff</code> is already using, such as <a href="https://github.com/adamchainz/flake8-comprehensions"><code>flake8-comprehensions</code></a>).</p>
<p>I encourage you to read <a href="https://adamj.eu/tech/2023/09/07/introducing-flake8-logging/">Adam's blog post</a> on why he created <code>flake8-logging</code>.  Essentially, it sounds like he had his own concerns about using <code>flake8-logging-format</code> to enforce logging-related linting rules and decided to create a higher-quality, up-to-date <code>flake8</code> plugin that contained a superset of those rules that would render <code>flake8-logging-format</code> obsolete: <code>flake8-logging</code>.  So, if I understand that correctly, I believe you should be able to look at <code>flake8-logging</code> exclusively for (likely higher-quality) implementations of all of the rules that <code>flake8-logging-format</code> supports, plus all of the additional rules that <code>flake8-logging</code> has added (and will continue to add if/when helpful new rules are identified, such as the recent LOG013 and LOG014 rules, which is something <code>flake8-logging-format</code> hasn't done in years).</p>
<p>Thanks for considering!  I've had a lot of my engineers ask about switching to <code>ruff</code>, and we've been watching the project with great interest, but this is definitely one of the larger blockers that are still preventing us from adopting it in my organization.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jakkdl">@jakkdl</a> on 2024-03-24 17:31</div>
            <div class="timeline-body"><p>New rule <code>LOG015</code> added upstream: https://github.com/adamchainz/flake8-logging?tab=readme-ov-file#log015-avoid-logging-calls-on-the-root-logger</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/12178.html">astral-sh/ruff#12178</a> on 2024-07-04 04:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/13046.html">astral-sh/ruff#13046</a> on 2024-08-22 15:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JCWasmx86">@JCWasmx86</a> on 2024-11-10 10:14</div>
            <div class="timeline-body"><p>I'm implementing LOG004</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14245.html">astral-sh/ruff#14245</a> on 2024-11-10 16:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14302.html">astral-sh/ruff#14302</a> on 2024-11-13 00:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qartik">@qartik</a> on 2024-11-16 13:37</div>
            <div class="timeline-body"><p>The recently implemented <a href="https://docs.astral.sh/ruff/rules/root-logger-call/#example">LOG015</a> in #14302 is in conflict with <a href="https://docs.astral.sh/ruff/rules/invalid-get-logger-argument/#example">LOG002</a>. One suggests using <code>logging.getLogger(__file__)</code>, the other calls that a bad practice. LOG015 should suggest <code>logging.getLogger(__name__)</code>.</p>
<p>It also seems to be triggering when <code>logging.getLogger(__name__)</code> is already being used, ie, not a root logger.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2024-11-16 15:23</div>
            <div class="timeline-body"><blockquote>
<p>It also seems to be triggering when <code>logging.getLogger(__name__)</code> is already being used, ie, not a root logger.</p>
</blockquote>
<p>I <a href="https://play.ruff.rs/3c72ff48-70bc-4488-aa4b-fc7e64486ad7">can't reproduce</a> the problem. Could you show a minimal reproducible example, please?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tmct">@tmct</a> on 2024-11-16 16:58</div>
            <div class="timeline-body"><p>The ruff docs do look surprising there - the original LOG015 <a href="https://github.com/adamchainz/flake8-logging?tab=readme-ov-file#log015-avoid-logging-calls-on-the-root-logger">docs</a> and implementation definitely expect <code>__name__</code> for this pattern rather than <code>__file__</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tmct">@tmct</a> on 2024-11-16 17:03</div>
            <div class="timeline-body"><p>I believe the intent of LOG015 is to promote &quot;namespaced&quot; logging e.g. &quot;logger.info&quot; in favour of plain &quot;logging.info&quot; calls - doing so usually adds very helpful context. (Getting hold of the root logger at the start of applications to configure it should not be discouraged - but logging from it directly in &quot;library&quot; code.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/14390.html">astral-sh/ruff#14390</a> on 2024-11-16 21:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-16 21:56</div>
            <div class="timeline-body"><p>Thanks. Makes sense. I created a new issue to track the resolution.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qartik">@qartik</a> on 2024-11-17 13:25</div>
            <div class="timeline-body"><blockquote>
<p>I <a href="https://play.ruff.rs/3c72ff48-70bc-4488-aa4b-fc7e64486ad7">can't reproduce</a> the problem. Could you show a minimal reproducible example, please?</p>
</blockquote>
<p>You are right. I was confused and my comment about wrongly triggering is invalid.</p>
<p>Thanks for the update to the doc however.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14682.html">astral-sh/ruff#14682</a> on 2024-11-29 16:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/15799.html">astral-sh/ruff#15799</a> on 2025-01-29 00:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:51 UTC
    </footer>
</body>
</html>
