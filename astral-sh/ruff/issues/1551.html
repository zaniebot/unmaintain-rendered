<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>issue with import reordering when original lines have noqa comments.  - astral-sh/ruff #1551</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>issue with import reordering when original lines have noqa comments.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1551">#1551</a>
        opened by <a href="https://github.com/ghuls">@ghuls</a>
        on 2023-01-02 10:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ghuls">@ghuls</a></div>
            <div class="timeline-body"><p>ruff combines import lines with and without noqa comments</p>
<p>File after <code>isort</code>:</p>
<pre><code>from aaa import used_function_a
from bbb import unused_function_b  # noqa: F401
from bbb import first_used_function_b
from ccc import used_function_c
from ddd import used_function_d

used_function_a()
first_used_function_b()
used_function_c()
used_function_d()
</code></pre>
<p>After <code>ruff --fix --select I001</code></p>
<pre><code>from aaa import used_function_a
from bbb import unused_function_b, unused_function_b  # noqa: F401
from ccc import used_function_c
from ddd import used_function_d

used_function_a()
first_used_function_b()
used_function_c()
used_function_d()
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-02 17:25</div>
            <div class="timeline-body"><p>Hmm yeah. <code>isort</code> can do stuff like this too -- for example, this:</p>
<pre><code>from module import (
    # noqa: F401
    foo,
    bar
)
</code></pre>
<p>Becomes:</p>
<pre><code>from module import bar, foo  # noqa: F401
</code></pre>
<p>I think <code>isort</code> generally puts any <code>from</code> import with an inline comment on its own line, which doesn&#x27;t seem ideal to me either.</p>
<p>Probably the &quot;right&quot; fix here is to output:</p>
<pre><code>from aaa import used_function_a
from bbb import (
    first_used_function_b,
    unused_function_b,  # noqa: F401
)
from ccc import used_function_c
from ddd import used_function_d
</code></pre>
<p>What do you think?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-02 17:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ghuls">@ghuls</a> on 2023-01-02 19:27</div>
            <div class="timeline-body"><p>I am happy with the latter.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-02 19:45</div>
            <div class="timeline-body"><p>This might be a regression because I thought we <em>did</em> do this. Regardless, will fix.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ghuls">@ghuls</a> on 2023-01-02 20:26</div>
            <div class="timeline-body"><p>You do it, but I think only if you have 3 from imports for the same module. It took a bit of time to make this minimal case to reproduce it because of this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-02 21:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-02 21:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-02 21:24</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:29 UTC
    </footer>
</body>
</html>
