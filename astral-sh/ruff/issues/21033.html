<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUF027 creates invalid f-string interpolations with backslashes before Python 3.12 - astral-sh/ruff #21033</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>RUF027 creates invalid f-string interpolations with backslashes before Python 3.12</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/21033">#21033</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-10-22 18:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dscorbett">@dscorbett</a> on 2025-10-22 18:35</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><a href="https://docs.astral.sh/ruff/rules/missing-f-string-syntax/"><code>missing-f-string-syntax</code> (RUF027)</a> applies to putative interpolations containing backslashes, which are not valid until Python 3.12. The fix can therefore introduce syntax errors. RUF027 should probably be suppressed for such strings before Python 3.12. <a href="https://play.ruff.rs/9e3243a1-379b-4ae2-ab31-1355d71b85c8">Example</a>:</p>
<pre><code class="language-console">$ cat &gt;ruf027.py &lt;&lt;'# EOF'
x = &quot;!&quot;
print(&quot;{'\''}{x\
}&quot;)
# EOF

$ python3.11 ruf027.py
{'''}{x}

$ ruff --isolated check ruf027.py --select RUF027 --preview --target-version py311 --unsafe-fixes --fix --output-format concise
ruf027.py:2:11: invalid-syntax: Cannot use an escape sequence (backslash) in f-strings on Python 3.11 (syntax was added in Python 3.12)
ruf027.py:2:17: invalid-syntax: Cannot use an escape sequence (backslash) in f-strings on Python 3.11 (syntax was added in Python 3.12)
Found 3 errors (1 fixed, 2 remaining).

$ python3.11 ruf027.py 2&gt;&amp;1 | tail -n 1
SyntaxError: f-string expression part cannot include a backslash
</code></pre>
<h3>Version</h3>
<p>ruff 0.14.1 (2bffef596 2025-10-16)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-10-22 20:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by @ntBre on 2025-10-22 20:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/21069.html">astral-sh/ruff#21069</a> on 2025-10-24 22:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:18 UTC
    </footer>
</body>
</html>
