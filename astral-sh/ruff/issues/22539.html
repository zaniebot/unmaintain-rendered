<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&quot;Not an issue&quot;: Python builtin is shadowed by method `str` A003 - astral-sh/ruff #22539</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>&quot;Not an issue&quot;: Python builtin is shadowed by method <code>str</code> A003</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/22539">#22539</a>
        opened by <a href="https://github.com/hunterhogan">@hunterhogan</a>
        on 2026-01-12 22:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hunterhogan">@hunterhogan</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>https://github.com/python/cpython/issues/143661#issuecomment-3732892288</p>
<blockquote>
<p>Sorry but it's not an issue. There is no shadowing involved for the end-user, only for the AST class itself but that's also not an issue. ast.Name also has an id field. Unless you write str = interp.str, in which case it's rather the user's fault, there won't be an issue. I'm closing this as not planned.</p>
</blockquote>
<p><a href="https://github.com/hunterhogan/astToolkit/blob/05c52ce9f0e5e27dc5669b90c646044552ae8ad9/astToolkit/_toolDOT.py">Source</a></p>
<p><code>rest</code> and the 14 other methods above <code>rest</code> do not induce not-an-issue diagnostic messages.</p>
<pre><code class="language-python">import ast
import builtins
import sys

type hasDOTrest = ast.MatchMapping
type hasDOTtag = ast.TypeIgnore
type hasDOTtype_comment = ast.arg | ast.Assign | ast.AsyncFor | ast.AsyncFunctionDef | ast.AsyncWith | ast.For | ast.FunctionDef | ast.With

if sys.version_info &gt;= (3, 14):
    type hasDOTstr = ast.Interpolation

class DOT:
    &quot;&quot;&quot;Access attributes and sub-nodes of AST elements via consistent accessor methods.

    The DOT class provides static methods to access specific attributes of different types of AST nodes in a consistent
    way. This simplifies attribute access across various node types and improves code readability by abstracting the
    underlying AST structure details.

    DOT is designed for safe, read-only access to node properties, unlike the grab class which is designed for modifying
    node attributes.

    &quot;&quot;&quot;

    @staticmethod
    def rest(node: hasDOTrest) -&gt; None | str:
        return node.rest

    if sys.version_info &gt;= (3, 14):

        @staticmethod
        def str(node: hasDOTstr) -&gt; builtins.str:
            return node.str

    @staticmethod
    def tag(node: hasDOTtag) -&gt; str:
        return node.tag

    @staticmethod
    def type_comment(node: hasDOTtype_comment) -&gt; None | str:
        return node.type_comment
</code></pre>
<h2>Diagnostic messages about something that is not an issue.</h2>
<pre><code class="language-json">[{
	&quot;resource&quot;: &quot;/C:/apps/astToolkit/astToolkit/_Z0Z_.py&quot;,
	&quot;owner&quot;: &quot;Ruff&quot;,
	&quot;code&quot;: {
		&quot;value&quot;: &quot;A003&quot;,
		&quot;target&quot;: {
			&quot;$mid&quot;: 1,
			&quot;path&quot;: &quot;/ruff/rules/builtin-attribute-shadowing&quot;,
			&quot;scheme&quot;: &quot;https&quot;,
			&quot;authority&quot;: &quot;docs.astral.sh&quot;
		}
	},
	&quot;severity&quot;: 4,
	&quot;message&quot;: &quot;Python builtin is shadowed by method `str` from line 31&quot;,
	&quot;source&quot;: &quot;Ruff&quot;,
	&quot;startLineNumber&quot;: 39,
	&quot;startColumn&quot;: 58,
	&quot;endLineNumber&quot;: 39,
	&quot;endColumn&quot;: 61,
	&quot;modelVersionId&quot;: 59,
	&quot;origin&quot;: &quot;extHost1&quot;
}]

[{
	&quot;resource&quot;: &quot;/C:/apps/astToolkit/astToolkit/_Z0Z_.py&quot;,
	&quot;owner&quot;: &quot;Ruff&quot;,
	&quot;code&quot;: {
		&quot;value&quot;: &quot;A003&quot;,
		&quot;target&quot;: {
			&quot;$mid&quot;: 1,
			&quot;path&quot;: &quot;/ruff/rules/builtin-attribute-shadowing&quot;,
			&quot;scheme&quot;: &quot;https&quot;,
			&quot;authority&quot;: &quot;docs.astral.sh&quot;
		}
	},
	&quot;severity&quot;: 4,
	&quot;message&quot;: &quot;Python builtin is shadowed by method `str` from line 31&quot;,
	&quot;source&quot;: &quot;Ruff&quot;,
	&quot;startLineNumber&quot;: 39,
	&quot;startColumn&quot;: 58,
	&quot;endLineNumber&quot;: 39,
	&quot;endColumn&quot;: 61,
	&quot;modelVersionId&quot;: 59,
	&quot;origin&quot;: &quot;extHost1&quot;
}]
</code></pre>
<h3>Version</h3>
<p>2026.34.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2026-01-12 22:23</div>
            <div class="timeline-body"><p>The shadowing that's happening here is that the return type annotation <code>str</code> doesn't resolve to the builtin type <code>str</code> but to <code>DOT.str</code>. As you can see e.g. by clicking on <code>str</code> in this <a href="https://play.ty.dev/87fe4a96-f251-4588-95ee-cb996f4dbfdb">playground</a> or by running the following snippet in Python 3.14</p>
<pre><code class="language-pycon">&gt;&gt;&gt;
... import builtins
... import sys
...
... type hasDOTrest = ast.MatchMapping
... type hasDOTtag = ast.TypeIgnore
... type hasDOTtype_comment = ast.arg | ast.Assign | ast.AsyncFor | ast.AsyncFunctionDef | ast.AsyncWith | ast.For | ast.FunctionDef | ast.With
...
... if sys.version_info &gt;= (3, 14):
...     type hasDOTstr = ast.Interpolation
...
... class DOT:
...     &quot;&quot;&quot;Access attributes and sub-nodes of AST elements via consistent accessor methods.
...
...     The DOT class provides static methods to access specific attributes of different types of AST nodes in a consistent
...     way. This simplifies attribute access across various node types and improves code readability by abstracting the
...     underlying AST structure details.
...
...     DOT is designed for safe, read-only access to node properties, unlike the grab class which is designed for modifying
...     node attributes.
...
...     &quot;&quot;&quot;
...
...     @staticmethod
...     def rest(node: hasDOTrest) -&gt; None | str:
...         return node.rest
...
...     if sys.version_info &gt;= (3, 14):
...
...         @staticmethod
...         def str(node: hasDOTstr) -&gt; builtins.str:
...             return node.str
...
...     @staticmethod
...     def tag(node: hasDOTtag) -&gt; str:
...         return node.tag
...
...     @staticmethod
...     def type_comment(node: hasDOTtype_comment) -&gt; None | str:
...         return node.type_comment
...     print(str)
...
&lt;staticmethod(&lt;function DOT.str at 0x105c07270&gt;)&gt;
</code></pre>
<p>The shadowning warning goes away if you change all <code>str</code> return types to <code>builtins.str</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2026-01-12 22:24</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 23:25:29 UTC
    </footer>
</body>
</html>
