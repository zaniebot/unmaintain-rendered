<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[New rule] Octal literal for `chmod` mode bits - astral-sh/ruff #18464</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[New rule] Octal literal for <code>chmod</code> mode bits</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18464">#18464</a>
        opened by <a href="https://github.com/opk12">@opk12</a>
        on 2025-06-04 16:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/opk12">@opk12</a></div>
            <div class="timeline-body">Summary
<p><code>pathlib.Path(&#x27;/file&#x27;).chmod(444)</code> means something different than what it seems, should be <code>chmod(0o444)</code>.</p>
<p>Also, <code>chmod</code> of a decimal or hexadecimal literal is most likely unintentional, because it is are hard to read and the standard usage is octal. For example, telling the mode bits from <code>292</code> or <code>0x124</code> is not straightforward.</p>
<p>A new rule could look for a numeric literal and propose the octal form. There exist <code>stat.S_*</code> constants listed at <a href="https://docs.python.org/3/library/os.html#os.chmod">os.chmod()</a>, but honestly I&#x27;m not their fan, as the 3-digit version is cleaner and is standard in the POSIX world.</p>
<p>I don&#x27;t have experience with the similar functions, but I guess the rule should also cover them.</p>
<ul>
<li><code>pathlib.Path.lchmod()</code></li>
<li><code>os.chmod()</code></li>
<li><code>os.fchmod()</code></li>
<li><code>os.lchmod()</code></li>
</ul>
<p>Docs</p>
<ul>
<li><a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path.chmod">Path.chmod()</a></li>
<li><a href="https://docs.python.org/3/library/os.html#os.chmod">os.chmod()</a></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-04 17:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-04 17:50</div>
            <div class="timeline-body"><p>This makes sense to me. I think we should probably also allow the <code>stat.* | ...</code> case, but I think it makes sense to warn on other int literals.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-05 06:26</div>
            <div class="timeline-body"><p>https://docs.astral.sh/ruff/rules/bad-file-permissions/ is related. We should ensure the two rules perform the check in the same places</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RazerM">@RazerM</a> on 2025-06-05 23:33</div>
            <div class="timeline-body"><p>I have a proof of concept of this working and hope to open a PR soonâ„¢</p>
<pre><code>crates\ruff_linter\resources\test\fixtures\ruff\RUF061.py:3:18: RUF061 Non-octal mode, did you mean 0o444?
  |
1 | import os
2 |
3 | os.chmod(&quot;/foo&quot;, 444)  # Error
  |                  ^^^ RUF061
4 | os.chmod(&quot;/foo&quot;, 0o444)  # OK
  |
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-05 23:37</div>
            <div class="timeline-body"><p>Awesome, thank you! Just a note if it&#x27;s not too late already, I think RUF061-063 are all in use by existing PRs (<a href="https://github.com/astral-sh/ruff/pull/18233">astral-sh/ruff#18233</a>#discussion_r2127241647). We can always  renumber later, but RUF064 should be the next free code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/RazerM">@RazerM</a> by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-05 23:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-19 09:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:01 UTC
    </footer>
</body>
</html>
