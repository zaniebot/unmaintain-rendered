```yaml
number: 18529
title: "formatter moves `ty:ignore` comments"
type: issue
state: closed
author: DetachHead
labels:
  - rule
  - formatter
assignees: []
created_at: 2025-06-07T06:58:57Z
updated_at: 2025-06-07T14:02:44Z
url: https://github.com/astral-sh/ruff/issues/18529
synced_at: 2026-01-10T01:56:56Z
```

# formatter moves `ty:ignore` comments

---

_Issue opened by @DetachHead on 2025-06-07 06:58_

### Summary

ruff's formatter avoids moving `pyright:ignore` and `type:ignore` comments, but this logic should also be applied to `ty:ignore` comments

before:

```py
print("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")  # pyright:ignore
print("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")  # type:ignore
print("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")  # ty:ignore
```

after:

```py
print("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")  # pyright:ignore
print("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")  # type:ignore
print(
    "aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"
)  # ty:ignore
```

https://play.ruff.rs/c929c411-7438-4c4b-a25f-e85ed5de83a4?secondary=Format

### Version

v0.11.13

---

_Comment by @DetachHead on 2025-06-07 07:34_

`PGH003` and `E501` also need to be updated to support `ty:ignore` comments:

```py
print("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")  # pyright:ignore
print("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")  # type:ignore
print("aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa")  # ty:ignore (no PGH003 or E501 errors)
```

https://play.ruff.rs/abd92d11-01f1-4997-9e27-78cb03165d77

---

_Label `rule` added by @AlexWaygood on 2025-06-07 09:43_

---

_Label `formatter` added by @AlexWaygood on 2025-06-07 09:43_

---

_Comment by @MichaReiser on 2025-06-07 13:10_

> PGH003

I think we should instead make it an option for ty whether blanked ignore comments are allowed or not, rather than building it into ruff

---

_Referenced in [astral-sh/ruff#18532](../../astral-sh/ruff/pulls/18532.md) on 2025-06-07 13:13_

---

_Referenced in [astral-sh/ty#605](../../astral-sh/ty/issues/605.md) on 2025-06-07 14:00_

---

_Referenced in [astral-sh/ty#606](../../astral-sh/ty/issues/606.md) on 2025-06-07 14:02_

---

_Closed by @MichaReiser on 2025-06-07 14:02_

---
