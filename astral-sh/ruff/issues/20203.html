<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>superfluous-literal-comparison - astral-sh/ruff #20203</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>superfluous-literal-comparison</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/20203">#20203</a>
        opened by <a href="https://github.com/dorschw">@dorschw</a>
        on 2025-09-02 08:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dorschw">@dorschw</a> on 2025-09-02 08:10</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Code like this is likely unintended and redundant:</p>
<pre><code class="language-python">if x == 0 and x != 1: ...
</code></pre>
<p>To keep things simple, only check comparison with literals, not with variables (allow <code>x == variable and x != other_variable</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-09-02 12:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @ntBre on 2025-09-02 12:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2025-09-12 23:51</div>
            <div class="timeline-body"><p>I'm not sure how well this would fit in ruff (a linter), since it could also be the job of type checkers with <code>int</code> -&gt; <code>Literal</code> narrowing.</p>
<p>Pyright supports this with strict mode <a href="https://pyright-play.net/?strict=true&amp;code=B4AgvCCWB2AuAUMAOBXBBKdBYAUJAZiKGBAAwgCG0AJkSAIQQCMAXCAHSdA">playground</a></p>
<p>Mypy doesn't fully support the example yet, but it is being considered https://github.com/python/mypy/issues/16819 . Code with the variable already narrowed to literal and strict enabled also gives an error on similar code <a href="https://mypy-play.net/?mypy=latest&amp;python=3.12&amp;flags=strict&amp;gist=64a94142b6863f717d4a66d79b8068b0">playground</a></p>
<hr />
<p>If it would apply to arbitrary code, there's also the issues of mutating calls in the code, ie</p>
<pre><code class="language-py">if next(x) == 0 and next(x) != 1:...
</code></pre>
<p>So it should be restricted to just working on simple variables and literals.</p>
<p>Some additional considerations, would this also support strings?</p>
<pre><code class="language-py">if x == &quot;a&quot; and x != &quot;b&quot;:...
</code></pre>
<p>What about membership tests on collections comprised of simple literals?</p>
<pre><code class="language-py">if x in [1, 2, 3] and x != 4:...
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:55 UTC
    </footer>
</body>
</html>
