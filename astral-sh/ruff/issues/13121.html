<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Type hinting Numpy arrays raises UP037 warning - astral-sh/ruff #13121</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Type hinting Numpy arrays raises UP037 warning</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13121">#13121</a>
        opened by <a href="https://github.com/MattTheCuber">@MattTheCuber</a>
        on 2024-08-27 11:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MattTheCuber">@MattTheCuber</a></div>
            <div class="timeline-body"><p>Type hinting Numpy arrays raises the warning &quot;Remove quotes from type annotation Ruff (UP037)&quot;. From our research, this seems to be the only way of type hinting that satisfies Pyright.</p>
<pre><code>from nptyping import Int, NDArray, Shape

# Warning UP037 raised on &quot;2, 3&quot; below
def test(data: NDArray[Shape[&quot;2, 3&quot;], Int]):
    pass
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-27 14:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nvandamme">@nvandamme</a> on 2024-12-06 14:32</div>
            <div class="timeline-body"><p>Confirming on my side with multiple warnings:</p>
<pre><code>import nptyping as npt
points: (
        npt.NDArray[npt.Shape[&quot;*, [x, y, z]&quot;], npt.Number]  # noqa: F722
        | npt.NDArray[npt.Shape[&quot;[x, y, z]&quot;], npt.Number]  # noqa: F821
        | npt.NDArray[npt.Shape[&quot;3, *&quot;], npt.Number]  # noqa: F722
        | Sequence[npt.Number]
        | Sequence[Sequence[npt.Number]]
    )
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2025-07-09 23:54</div>
            <div class="timeline-body"><p>This looks to have been covered in/might be a duplicate of #6014</p>
<p>Also from that issue, <a href="https://github.com/astral-sh/ruff/issues/6014">astral-sh/ruff#6014</a>#issuecomment-1650235989 <code>nptyping.Shape</code> is just an alias for <code>typing.Literal</code> <a href="https://github.com/ramonhagenaars/nptyping/blob/master/USERDOCS.md#shape-expressions">as said in the <code>nptyping</code> docs</a>, so you can use it instead to make <code>UP037</code> happy https://play.ruff.rs/368f82f7-a4fe-442e-a18d-f7ce61bc927f</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:57 UTC
    </footer>
</body>
</html>
