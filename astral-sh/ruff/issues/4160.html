<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow for testing of packages in integration tests - astral-sh/ruff #4160</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow for testing of packages in integration tests</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/4160">#4160</a>
        opened by <a href="https://github.com/chanman3388">@chanman3388</a>
        on 2023-04-30 11:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/chanman3388">@chanman3388</a></div>
            <div class="timeline-body"><p>It is my understanding that we cannot use folders/packages in integration tests.
For the moment I believe that we just use <code>ruff::test::test_path</code> to test a specific module, but I think it should be easy enough to make a similar function, or perhaps even a parent function that calls <code>test_path</code> not unlike how <code>ruff_cli::commands::run</code> lints all the files in parallel (I have not yet fully thought through the implementation).</p>
<p>I am happy to implement this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-01 09:48</div>
            <div class="timeline-body"><p>Adding support for testing multiple file would be cool to have to test any multi-file analysis that we plan to build properly.</p>
<p>Ideally, I would prefer a single testing infrastructure for single file and multi-file analysis (we can have helpers for single-file or multi-file test cases) because the testing infrastructure re-implements the linting orchestration layer of ruff and any divergence in it from ruff&#x27;s actual behavior results in a false sense of safety. That&#x27;s why I think we should strive to have an as thin-as-possible testing implementation and share it if possible.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-02 01:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chanman3388">@chanman3388</a> on 2023-05-05 01:49</div>
            <div class="timeline-body"><p>I&#x27;ve had a little look into this further and had a few more questions. I was hoping to mirror the orchestration layer but I think this approach may be too heavy-handed. We could maybe do something like, detect the path we want to test is a python module or package then simply call <code>test_path</code> on each? This feels like it should work as we use <code>packaging::detect_package_root</code> to detect the package? Would something like that be sufficient?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-03 03:07</div>
            <div class="timeline-body"><p>Going to close this for now to keep the issue tracker actionable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-03 03:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:35 UTC
    </footer>
</body>
</html>
