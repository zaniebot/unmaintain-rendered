<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Long list formatted into each element occupies one row - astral-sh/ruff #15249</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Long list formatted into each element occupies one row</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/15249">#15249</a>
        opened by <a href="https://github.com/paoxiaode">@paoxiaode</a>
        on 2025-01-04 10:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/paoxiaode">@paoxiaode</a></div>
            <div class="timeline-body"><p>Dear Developers, I am facing the same problem as this one in Ruff https://github.com/psf/black/issues/3935</p>
<p>Before format</p>
<pre><code class="language-python">idx = [
    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 18, 19,
    20, 21, 22, 23, 24, 25, 27, 28, 31, 32, 33, 34, 35, 36, 37, 38, 39
]
</code></pre>
<p>After format</p>
<pre><code class="language-python">idx = [
    0,
    1,
    2,
    3,
    4,
    5,
    6,
    7,
    8,
    9,
    10,
    11,
    13,
    14,
    15,
    16,
    17,
    18,
    19,
    20,
    21,
    22,
    23,
    24,
    25,
    27,
    28,
    31,
    32,
    33,
    34,
    35,
    36,
    37,
    38,
    39,
]
</code></pre>
<p>I want to know if ruff allows multiple elements to be on the same line at the same time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @AlexWaygood on 2025-01-04 10:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @AlexWaygood on 2025-01-04 10:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-04 11:06</div>
            <div class="timeline-body"><p>Yes, this is something we're aware of but I haven't had time yet to work on an improved heuristic for array formatting.</p>
<p>For example, Prettier uses a &quot;fill&quot; layout where it tries to fit as many items as possible on each line if the values are simple (small numbers, constant string literals, etc).</p>
<pre><code class="language-js">const a = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1, 16, 17, 18, 19, 20, 21, 22, 223, 34, 34, 44, 444]

// Formatted
const a = [
  1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1, 16, 17, 18, 19, 20, 21, 22,
  223, 34, 34, 44, 444,
];
</code></pre>
<p>I'd like to have something like this for Ruff. There's also a related discussion around <code>np.array</code> formatting, see https://github.com/astral-sh/ruff/discussions/8452</p>
<p>For now, your best option is to either accept the formatting or use <code>fmt: skip</code> to disable formatting for that entire statement</p>
<pre><code class="language-py">idx = [
    0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14, 15, 16, 17, 18, 19,
    20, 21, 22, 23, 24, 25, 27, 28, 31, 32, 33, 34, 35, 36, 37, 38, 39
]  # fmt: skip
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tdulcet">@tdulcet</a> on 2025-01-04 13:01</div>
            <div class="timeline-body"><p>Also see #11886.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/paoxiaode">@paoxiaode</a> on 2025-01-04 14:36</div>
            <div class="timeline-body"><p>Thanks for reply</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-01-04 14:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:51:55 UTC
    </footer>
</body>
</html>
