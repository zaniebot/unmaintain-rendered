<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support pycln's autofixes analysis - astral-sh/ruff #8149</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Support pycln's autofixes analysis</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/8149">#8149</a>
        opened by <a href="https://github.com/Avasam">@Avasam</a>
        on 2023-10-23 18:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Avasam">@Avasam</a> on 2023-10-23 18:40</div>
            <div class="timeline-body"><p>The core functionality of pycln (that is, cleaning up imports) is already supported by Ruff.
However, there's two specific features that I would like to see. And I know they won't be possible until Ruff has multi-file analysis (see #7447):</p>
<ul>
<li>Side-effect detection: https://hadialqattan.github.io/pycln/#/?id=side-effects<ul>
<li>This is about being able to detect when an import removal is safe, or when it it may cause side effects (for example: importing <code>setuptools</code> changes how <code>distutils</code> work, so a stray <code>import setuptools</code> should be left in). This is also used a lot in pywin32: https://github.com/mhammond/pywin32/blob/main/pycln.toml</li>
</ul>
</li>
<li>star-import unpacking: https://hadialqattan.github.io/pycln/#/?id=-x-expand-stars-flag<ul>
<li><p>Replaces</p>
<pre><code class="language-py">from foo import *
bar()
bar_two()
</code></pre>
<p>With:</p>
<pre><code class="language-py">from foo import bar, bar_two
bar()
bar_two()
</code></pre>
<p>(assuming of course the <code>foo</code> module can be statically analysed)</p>
</li>
</ul>
</li>
<li>Detect implicit imports from sub-packages: https://hadialqattan.github.io/pycln/#/?id=implicit-imports-from-sub-packages<ul>
<li>IMO this is a code smell in itself. But the current &quot;unknown symbol&quot; checks could be improved. And a new error code added for implicit imports usage.</li>
</ul>
</li>
</ul>
<p>The first two could probably be integrated into existing checks <code>unused-import (F401)</code> and <code>undefined-local-with-import-star[-usage] (F403/F405)</code> as possible &quot;safe autofixes&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @dhruvmanila on 2023-10-25 05:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">multifile-analysis</span> added by @dhruvmanila on 2023-10-25 05:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6601.html">astral-sh/ruff#6601</a> on 2023-10-28 17:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/9962.html">astral-sh/ruff#9962</a> on 2024-08-19 04:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by @MichaReiser on 2024-10-24 14:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">multifile-analysis</span> removed by @MichaReiser on 2024-10-24 14:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/18728.html">astral-sh/ruff#18728</a> on 2025-06-18 15:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/20018.html">astral-sh/ruff#20018</a> on 2025-08-23 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4757.html">astral-sh/ruff#4757</a> on 2025-08-23 15:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/20113.html">astral-sh/ruff#20113</a> on 2025-08-27 14:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:10 UTC
    </footer>
</body>
</html>
