<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature request: Make *any* unknown rule code in &quot;ignore&quot; setting a warning, not an error - astral-sh/ruff #14443</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Feature request: Make <em>any</em> unknown rule code in &quot;ignore&quot; setting a warning, not an error</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14443">#14443</a>
        opened by <a href="https://github.com/Avasam">@Avasam</a>
        on 2024-11-18 20:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Avasam">@Avasam</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<h2>What happens currently</h2>
<p>https://github.com/astral-sh/ruff/pull/14435 closes #13505 but restricts itself to previously-known error codes.</p>
<p>For the sake of tracking, I'm letting the previous issue be closed, but opening this one as a follow-up to allow <em>any</em> error unknown error code in <code>ignore</code> setting to be a warning.</p>
<p>Take for example <code>DOC402</code> added in Ruff <code>0.5.7</code>. Ignoring <code>DOC402</code> in my shared configs means that my config it is no longer valid for previous versions of Ruff.</p>
<p>(everything below this line is identical to the previous issue description)</p>
<p>At the moment, ignoring a rule code that Ruff doesn't know about in the <code>ignore</code> setting will cause an error:
For example using <code>ruff==0.5.6</code>:</p>
<pre><code class="language-toml">[lint]
select = [&quot;ALL&quot;]
ignore = [
  # ...
  &quot;DOC201&quot;, # docstring-missing-returns
  &quot;DOC402&quot;, # docstring-missing-yields
  &quot;DOC501&quot;, # docstring-missing-exception
]
</code></pre>
<p>Results in:</p>
<pre><code>ruff failed
  Cause: Failed to parse [...]]\ruff.toml
  Cause: TOML parse error at line 17, column 1
   |
17 | [lint]
   | ^^^^^^
Unknown rule selector: `DOC402`
</code></pre>
<h2>What I'd like to see</h2>
<p>I'd like such errors, for <code>ignore</code> specifically, to be warnings instead</p>
<h2>Why ?</h2>
<p>For shared configurations. Not completely failing on unknown ignored error codes allows the same configuration to be valid for a wider range of Ruff versions, reducing maintenance and increasing compatibility on the configuration side. Whether it's because the consumer has updated to a new Ruff version that removed that rule, or because they're still behind but the config disabled a rule they don't have access to yet.</p>
<p>Whilst rn shared configs are mostly done through copy-and-paste (https://github.com/BesLogic/shared-configs/blob/main/ruff.toml) or some sort of git management (https://github.com/jaraco/skeleton/blob/main/ruff.toml). This will become especially relevant with https://github.com/astral-sh/ruff/issues/12352</p>
<h2>Why only <code>ignore</code> ?</h2>
<p>This request opens the question: why not do the same for rule selection or settings? Because those convey an explicit desire for the code to conform to those rules and configurations. Ignoring a rule, whether it exists or not, results in the same lint validation.</p>
<h2>Prior art</h2>
<p>ESLint works very similarly to what I'm asking, with the only difference that it completely ignores the disabled rule, instead of warning.
The &quot;enable all rules + disable what we don't want or need&quot; pattern has allowed me with https://www.npmjs.com/package/eslint-config-beslogic to support a wide range of peer dependencies whilst staying mostly up to date with new rules (until I need to reconfigure a non-disabled newly added rule, but with ESLint's JS-based configs I have ways to work around that too with version-detection, although that's not relevant here)</p>
<p>Flake8 only errors-out on rule codes that are completely impossible. For example ignoring <code>AAAA</code> results in <code>ValueError: Error code 'AAAA' supplied to 'extend-ignore' option does not match '^[A-Z]{1,3}[0-9]{0,3}$'</code></p>
<p>Ruff is already able to output warnings, for example when linting non-UTF-8 files:</p>
<pre><code>warning: Failed to lint Pythonwin\pywin\test\_dbgscript.py: stream did not contain valid UTF-8
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @dhruvmanila on 2024-11-19 03:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2024-11-19 07:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-19 07:14</div>
            <div class="timeline-body"><p>Whether we want this behavior is less clear to me than #13505. I can see use cases where it is useful, but it requires that the configuration maintainer keeps their configuration in sync with new ruff releases and having users to disregard warnings seems non-ideal to me.</p>
<p>A somewhat more involved alternative is that the preset explicitly lists the desired rules one by one. This way, there are no warnings whatsoever and upgrading ruff to a newer version doesn't require manual reviewing if new rules &quot;sneaked in&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2024-11-19 15:57</div>
            <div class="timeline-body"><p>(btw feel free to close either version of this issue, so they don't stay duplicated)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-19 16:09</div>
            <div class="timeline-body"><p>I'd like to keep it open because it demonstrates a useful use case. I'm just not sure if the proposed solution is the right one or if there's another way of solving the problem of using the same configuration across multiple ruff versions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tuttle">@tuttle</a> on 2026-01-12 12:32</div>
            <div class="timeline-body"><p>We also use</p>
<pre><code>select = [&quot;ALL&quot;]
ignore = [
   ... list of not (yet) resolved rules ...
]
</code></pre>
<p>One of our developers has <strong>Auto update</strong> set on <strong>the Ruff extension to VSCode</strong>, he added the new rule from ruff 0.14.11 to the ignore list, pushed and CI failed with <strong>Unknown rule selector: RUF067</strong> on our CI.</p>
<p>It is convenient to have VSCode extensions up to date so the new ruff rules are used automatically, and the code base could become a bit better. But it collides with CI that uses locked package versions.</p>
<p>We would for example welcome a ruff cmd line option <code>--warn-about-unknown-ignored-rules</code> or something like that which we would add to the CI.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2026-01-12 12:36</div>
            <div class="timeline-body"><p>The way we solved this in ty is by making unknown rules a normal diagnostic with a warning severity.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @MichaReiser on 2026-01-12 12:36</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:51:34 UTC
    </footer>
</body>
</html>
