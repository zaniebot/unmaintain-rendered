<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`superfluous-else-return` (RET505) ignores try/else blocks - astral-sh/ruff #8018</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>superfluous-else-return</code> (RET505) ignores try/else blocks</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8018">#8018</a>
        opened by <a href="https://github.com/korverdev">@korverdev</a>
        on 2023-10-17 15:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/korverdev">@korverdev</a></div>
            <div class="timeline-body"><p>This is probably harder to check for and much more uncommon, but RET505 could potentially apply to <code>try/else</code> blocks as well.</p>
<p>Example of the admittedly pretty bad code where this cropped up for me:</p>
<pre><code>try:
    run(&quot;docker --version&quot;, check=True, shell=True)
except CalledProcessError:
    return &quot;podman&quot;
else:
    return &quot;docker&quot;
</code></pre>
<p>What I&#x27;d expect this to be changed to:</p>
<pre><code>try:
    run(&quot;docker --version&quot;, check=True, shell=True)
except CalledProcessError:
    return &quot;podman&quot;
return &quot;docker&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2023-10-17 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2023-10-17 17:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tdulcet">@tdulcet</a> on 2024-06-09 14:37</div>
            <div class="timeline-body"><p>#970 says that <a href="https://pylint.readthedocs.io/en/latest/user_guide/messages/refactor/no-else-return.html">Pylint R1705</a> is implemented by <code>RET505</code>, but Pylint does supports else blocks on try statements, while this rule does not.</p>
<p>Also see #9625.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-09 17:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-09 17:28</div>
            <div class="timeline-body"><p>Seems reasonable to support.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TomMontagnon">@TomMontagnon</a> on 2025-06-13 14:26</div>
            <div class="timeline-body"><p>It doesn&#x27;t manage <code>elif</code> statements well too.</p>
<p>This <code>elif</code> raise <code>RET505</code>, but is clearly not superflous.</p>
<pre><code>def my_fonc():
    While True
        resp = input(&quot;y/n question : &quot;)
        if resp == &quot;y&quot;:
            foo()
            return True
        elif resp == &quot;n&quot;:
            bar()
            return False
        else:
            print(&quot;try again&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tdulcet">@tdulcet</a> on 2025-06-14 19:57</div>
            <div class="timeline-body"><blockquote>
<p>This <code>elif</code> raise <code>RET505</code>, but is clearly not superfluous.</p>
</blockquote>
<p>Both the <code>elif</code> and <code>else</code> in your example look superfluous to me:</p>
<pre><code>def my_fonc():
    while True:
        resp = input(&quot;y/n question : &quot;)
        if resp == &quot;y&quot;:
            foo()
            return True

        if resp == &quot;n&quot;:
            bar()
            return False

        print(&quot;try again&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TomMontagnon">@TomMontagnon</a> on 2025-06-14 20:04</div>
            <div class="timeline-body"><p>Yup, I hadn&#x27;t seen things that way.... you are perfectly right, thanks !</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:43 UTC
    </footer>
</body>
</html>
