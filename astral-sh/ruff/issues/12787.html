<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rule for PEP 515 - Underscores in Numeric Literals - astral-sh/ruff #12787</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rule for PEP 515 - Underscores in Numeric Literals</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12787">#12787</a>
        opened by <a href="https://github.com/guillp">@guillp</a>
        on 2024-08-09 14:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/guillp">@guillp</a> on 2024-08-09 14:09</div>
            <div class="timeline-body"><p>I would like to implement a rule for <a href="https://peps.python.org/pep-0515/">PEP 515</a>. This allows using underscores as visual separators in numerics. Large numbers are hard to read and using underscore as thousands, millions, etc. separators increases readability a lot.</p>
<p>E.g this would turn this:</p>
<pre><code class="language-python">my_large_int = 313391313513489341
</code></pre>
<p>into:</p>
<pre><code class="language-python">my_large_int = 313_391_313_513_489_341
</code></pre>
<p>A few things I have in mind:</p>
<ul>
<li>underscore would be added as thousands, millions, billions, etc. separator, so every 3 digits</li>
<li>for float, it probably makes sense to add it as thousandths, millionths, etc.</li>
<li>for integers &lt;= 99999 (so 5 or less digits), no need to add a thousands separator, those are readable enough without it</li>
<li>for hexadecimal notation, add an underscore every 4 digits, if the length is &gt; 4 (eg. <code>0x15_DEAD_BEEF</code>). Would it make sense to left-pad with 0 to have a length that is a multiple of 4 (so <code>0x0015_DEAD_BEEF</code>) ?</li>
<li>for binary notation, add an underscore every 8 digits (eg. <code>0b1100110_01101111_01101111</code>). Would it make sense to left pad with 0 up to a multiple of 8 (so <code>0b01100110_01101111_01101111</code>) ?</li>
</ul>
<p>I did not find any prior art so if such a rule exists somewhere else, feel free to point me to it as well.</p>
<p>This would be my first Ruff rule and one of my first experiments with Rust, so I'm looking for feedback about the rule itself before I start coding it. If you feel this is not implementable for any reason, just let me know as well :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-09 15:38</div>
            <div class="timeline-body"><p>Thanks for the rule idea.</p>
<p>https://github.com/astral-sh/ruff/issues/3693 covers the handling of large numbers. The issue also points out that one challenge with such a rule is that different cultures use different grouping. That means the rule has to be configurable (although we could decide to skip this initially). It would be great to have a design for how different culture norms could be supported by the rule.</p>
<p>In my opinion, hexadecimal and binary numbers should have their own rules. I can see users who want to enforce strict number formatting but want more freedom when it comes to binary notation. The good thing is that it means we can add those rules one by one.</p>
<p>My only concern with these rules is that they potentially overlap with the formatter. Although I think it's unlikely that the formatter wants to be opinionated about the formatting.</p>
<p>@AlexWaygood what's your take on these rules?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-08-09 15:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @MichaReiser on 2024-08-09 15:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2024-08-09 15:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:40 UTC
    </footer>
</body>
</html>
