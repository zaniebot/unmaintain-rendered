<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>less brackets than black in multiline assert - astral-sh/ruff #8388</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>less brackets than black in multiline assert</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/8388">#8388</a>
        opened by <a href="https://github.com/peterjc">@peterjc</a>
        on 2023-10-31 19:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/peterjc">@peterjc</a> on 2023-10-31 19:41</div>
            <div class="timeline-body"><p>Excerpt from https://github.com/peterjc/thapbi-pict/blob/v1.0.3/thapbi_pict/prepare.py formatted by black (e.g. black version 23.10.1):</p>
<pre><code class="language-python">assert (
    parse_flash_stdout(
        &quot;&quot;&quot;\
...
[FLASH] Read combination statistics:
[FLASH]     Total pairs:      6105
[FLASH]     Combined pairs:   5869
...
&quot;&quot;&quot;
    )
    == (6105, 5869)
)
</code></pre>
<p>Output from ruff version 1.0.3 (which black reverts to the above):</p>
<pre><code class="language-python">assert parse_flash_stdout(
    &quot;&quot;&quot;\
...
[FLASH] Read combination statistics:
[FLASH]     Total pairs:      6105
[FLASH]     Combined pairs:   5869
...
&quot;&quot;&quot;
) == (6105, 5869)
</code></pre>
<p>I prefer the ruff version (one less level of indentation and no redundant parenthesis).</p>
<p>I'm unsure if this is https://github.com/astral-sh/ruff/blob/main/docs/formatter/black.md#call-chain-calls-break-differently or #8180 or #8331.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stinodego">@stinodego</a> on 2023-10-31 20:21</div>
            <div class="timeline-body"><p>I noticed this too in the Polars test suite. It's one of the nice improvements of the ruff formatter, in my opinion! Though I'm not sure it's intended.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-31 21:52</div>
            <div class="timeline-body"><p>Thanks for reporting. We're glad you like it :)</p>
<p>This is related to https://github.com/astral-sh/ruff/issues/6938, which we need to document properly. It is a partial implementation of Black's <a href="https://black.readthedocs.io/en/stable/the_black_code_style/future_style.html#improved-multiline-string-handling">improved multiline string handling</a> that we got for free, and fixing it backward felt like wasted work, considering how rare it is. Which is why we kept it. I'll keep this issue open to track the documentation of the deviation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @MichaReiser on 2023-10-31 21:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @MichaReiser on 2023-10-31 21:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Formatter: Stable" by @MichaReiser on 2023-10-31 21:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/13386.html">astral-sh/ruff#13386</a> on 2024-09-18 06:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/13663.html">astral-sh/ruff#13663</a> on 2024-10-23 11:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:51 UTC
    </footer>
</body>
</html>
