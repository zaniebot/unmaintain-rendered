<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>less brackets than black in multiline assert - astral-sh/ruff #8388</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>less brackets than black in multiline assert</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8388">#8388</a>
        opened by <a href="https://github.com/peterjc">@peterjc</a>
        on 2023-10-31 19:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/peterjc">@peterjc</a></div>
            <div class="timeline-body"><p>Excerpt from https://github.com/peterjc/thapbi-pict/blob/v1.0.3/thapbi_pict/prepare.py formatted by black (e.g. black version 23.10.1):</p>
<pre><code>assert (
    parse_flash_stdout(
        &quot;&quot;&quot;\
...
[FLASH] Read combination statistics:
[FLASH]     Total pairs:      6105
[FLASH]     Combined pairs:   5869
...
&quot;&quot;&quot;
    )
    == (6105, 5869)
)
</code></pre>
<p>Output from ruff version 1.0.3 (which black reverts to the above):</p>
<pre><code>assert parse_flash_stdout(
    &quot;&quot;&quot;\
...
[FLASH] Read combination statistics:
[FLASH]     Total pairs:      6105
[FLASH]     Combined pairs:   5869
...
&quot;&quot;&quot;
) == (6105, 5869)
</code></pre>
<p>I prefer the ruff version (one less level of indentation and no redundant parenthesis).</p>
<p>I&#x27;m unsure if this is https://github.com/astral-sh/ruff/blob/main/docs/formatter/black.md#call-chain-calls-break-differently or #8180 or #8331.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stinodego">@stinodego</a> on 2023-10-31 20:21</div>
            <div class="timeline-body"><p>I noticed this too in the Polars test suite. It&#x27;s one of the nice improvements of the ruff formatter, in my opinion! Though I&#x27;m not sure it&#x27;s intended.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-31 21:52</div>
            <div class="timeline-body"><p>Thanks for reporting. We&#x27;re glad you like it :)</p>
<p>This is related to <a href="https://github.com/astral-sh/ruff/issues/6938">astral-sh/ruff#6938</a>, which we need to document properly. It is a partial implementation of Black&#x27;s <a href="https://black.readthedocs.io/en/stable/the_black_code_style/future_style.html#improved-multiline-string-handling">improved multiline string handling</a> that we got for free, and fixing it backward felt like wasted work, considering how rare it is. Which is why we kept it. I&#x27;ll keep this issue open to track the documentation of the deviation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-31 21:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-31 21:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Formatter: Stable&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-31 21:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:45 UTC
    </footer>
</body>
</html>
