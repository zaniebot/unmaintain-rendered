<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement --allow-global-unused-variables from PyLint - astral-sh/ruff #11426</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Implement --allow-global-unused-variables from PyLint</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11426">#11426</a>
        opened by <a href="https://github.com/Mellowdv">@Mellowdv</a>
        on 2024-05-14 14:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Mellowdv">@Mellowdv</a> on 2024-05-14 14:51</div>
            <div class="timeline-body"><p>PyLint allows users to pass --allow-global-unused-variables=n(o) option to catch not only function scope unused variables, but also module scope variables. This would modify rule F841: Unused Variable.</p>
<p>I would like to implement this.
Now there is a question that I would like to have answered before committing and perhaps open a discussion on it, if no clear answer is available.</p>
<p>Is 1-to-1 (or let's say bug-for-bug) parity with PyLint desirable?
PyLint has some undesirable behaviour, for example reporting class definitions not used in the same file as the definition as &quot;unused variables&quot; (in our code base and probably most code bases, it is fairly normal to have classes defined in one file and using them in another). I would prefer to define a &quot;global-unused-variable&quot; as not within function scope, not within class scope, not within generator/lambda scope and unused.</p>
<p>As mentioned above, PyLint reports the classes as unused (at least in our code base), and so it seems that it does not check this between files.</p>
<p>As such, I think Ruff is capable of checking whether a Module scoped variable that is not in a Function, Class, Generator or a Lambda, is unused and reporting it (given 'allow-global-unused-variables = false' is set in ruff.toml or other config file). In fact, I've got it working more or less on our codebase, just need to check whether the behaviour is in line with my expectations.</p>
<p>Please let me know if I'm wrong and what the opinion on PyLint parity is.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">multifile-analysis</span> added by @MichaReiser on 2024-05-27 07:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/njharman">@njharman</a> on 2024-05-27 13:35</div>
            <div class="timeline-body"><p>Your implementation is what I would expect. I would be annoyed by the pylint behavior.</p>
<p>Recently an unused global var caused bug for me. Found this issue while searching for &quot;why is this not reported?&quot; So, I'm +1 on this feature being implemented.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by @MichaReiser on 2024-10-24 14:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">multifile-analysis</span> removed by @MichaReiser on 2024-10-24 14:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:13 UTC
    </footer>
</body>
</html>
