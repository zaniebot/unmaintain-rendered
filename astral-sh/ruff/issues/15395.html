<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to check folder and file name conventions (missing init-hook)? - astral-sh/ruff #15395</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to check folder and file name conventions (missing init-hook)?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/15395">#15395</a>
        opened by <a href="https://github.com/fhg-isi">@fhg-isi</a>
        on 2025-01-10 10:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/fhg-isi">@fhg-isi</a> on 2025-01-10 10:06</div>
            <div class="timeline-body"><p>Currently I use pylint in combination with an init-hook to check folder and file name conventions.
I would like to switch to ruff but ruff does not seem to support init-hooks to include custom checks.</p>
<p>Is there a ruff rule to do so that I missed?</p>
<p>If not, could you please add rules for it?</p>
<p>If you do not want to include such a feature in ruff, what would be the best practice to check folder and file name conventions?</p>
<p>As a workaround, I could include the checks via pre-commit-hooks and GitHub workflows.</p>
<p>However, I would prefer it to be part of the lint workflow.... so that naming conventions are checked every time the linting is performed. pre-commit hooks would require extra user activity and GitHub workflows give a delayed hint.</p>
<p>For eslint in the JavaScript world there is https://www.npmjs.com/package/eslint-plugin-check-file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "How to check folder and file name conventions?" to "How to check folder and file name conventions (missing init-hook)?" by @fhg-isi on 2025-01-10 10:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-10 10:32</div>
            <div class="timeline-body"><p>Do you have an example of the naming conventions you want to enforce?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-01-10 10:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fhg-isi">@fhg-isi</a> on 2025-01-10 10:40</div>
            <div class="timeline-body"><p>Here is example code to check for <strong>snake_case</strong> naming convention for folder and file names.</p>
<p>Related:
https://peps.python.org/pep-0008/#package-and-module-names</p>
<pre><code>import logging
import os
import re

# This module checks if all file and folder names follow
# the snake_case naming convention.
# It is included from the pyproject.toml file via init-hook
# of pylint.


def main(directory_to_check=&quot;.&quot;):
    _initialize_logging()
    logging.info('Checking if all file and folder names are in snake_case...')
    folders_to_exclude = [
        &quot;LICENSES&quot;,
        &quot;web&quot;,
        &quot;.git&quot;,
        &quot;.idea&quot;,
        &quot;.ruff_cache&quot;,
        &quot;.pytest_cache&quot;,
        &quot;.vscode&quot;,
        &quot;__pycache__&quot;,
    ]
    file_names_to_exclude = [
        &quot;Dockerfile&quot;,
        &quot;README.md&quot;,
        &quot;THIRDPARTY.md&quot;,
    ]
    check_folders_and_files_to_be_in_snake_case(
        directory_to_check,
        folders_to_exclude,
        file_names_to_exclude,
    )
    logging.info('... naming convention check finished.')


def _initialize_logging():
    logger = logging.getLogger()
    logger.setLevel(logging.INFO)


def check_folders_and_files_to_be_in_snake_case(
    directory_to_check,
    folders_to_exclude,
    file_names_to_exclude,
):
    for path, sub_folders, files in os.walk(directory_to_check):
        for sub_folder in sub_folders:
            if _is_excluded_folder(sub_folder, folders_to_exclude):
                continue

            check_folders_and_files_to_be_in_snake_case(
                directory_to_check + &quot;/&quot; + sub_folder,
                folders_to_exclude,
                file_names_to_exclude,
            )

        if _is_excluded_folder(path, folders_to_exclude):
            continue

        for name in files:
            if name in file_names_to_exclude:
                continue

            _check_snake_case(path, name)
        break


def _is_excluded_folder(path, folders_to_exclude):
    for folder_to_exclude in folders_to_exclude:  # noqa: SIM110
        if folder_to_exclude in path:
            return True
    return False


def _check_snake_case(path, name):
    if not _is_snake_case(name):
        message = &quot;Directory or file name is not in snake_case:\n&quot; + path + &quot;/&quot; + name
        raise NameError(message)



def _is_snake_case(name):
    items = name.split(&quot;.&quot;)
    name_without_ending = items[0]
    if name_without_ending == &quot;&quot;:
        return True

    _rex = re.compile(&quot;_?[a-z0-9]+(?:_+[a-z0-9]+)*&quot;)
    is_snake = _rex.fullmatch(name_without_ending)
    return is_snake


if __name__ == &quot;__main__&quot;:
    main()
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/calumy">@calumy</a> on 2025-01-10 10:46</div>
            <div class="timeline-body"><p>This might be handled by: https://docs.astral.sh/ruff/rules/invalid-module-name/. Per file excludes can also be set for the <code>folders_to_exclude</code> and <code>file_names_to_exclude</code> that are outlined in the script.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fhg-isi">@fhg-isi</a> on 2025-01-10 10:59</div>
            <div class="timeline-body"><p>If I create a file src/fooBaa/fooBaa.py, including some FooBaa class and run</p>
<p><code>ruff check --select N999</code></p>
<p>I do not get a warning.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-10 11:10</div>
            <div class="timeline-body"><p>It should warn once you add an <code>__init__.py</code> to the <code>fooBaa</code> directory</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fhg-isi">@fhg-isi</a> on 2025-01-10 11:15</div>
            <div class="timeline-body"><p>Thank you for clarification. I do not want to use <code>__init__.py</code> files for Python &gt;= 3.3.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-10 12:37</div>
            <div class="timeline-body"><p>You can also list the namespace packages in <a href="https://docs.astral.sh/ruff/settings/#namespace-packages"><code>namespace-packages</code></a> that should give you the same behavior I think.</p>
<p>The reason why Ruff only enforces this rule for regular packages is that the name is only relevant for modules that are intended to be imported from other modules and this is generally true for all modules that are part of a package (folder with an <code>__init__.py</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-01-25 10:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:54 UTC
    </footer>
</body>
</html>
