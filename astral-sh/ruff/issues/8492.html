<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Have a separate rule to RUF100 for unknown/disabled rules - astral-sh/ruff #8492</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Have a separate rule to RUF100 for unknown/disabled rules</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8492">#8492</a>
        opened by <a href="https://github.com/xi">@xi</a>
        on 2023-11-05 09:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/xi">@xi</a></div>
            <div class="timeline-body"><p>See prior discussion in #2194 and #2424.</p>
<p>RUF100 flags noqas that are no longer relevant. There are to distinct cases:</p>
<ul>
<li>ruff has checked the rule and knows that there is no problem in that line, so the noqa is not needed</li>
<li>ruff has not checked the rule (either because it is not selected or because it is not implemented)</li>
</ul>
<p>In both cases, no noqa makes no different to ruff. However, in the second case, the noqa might make a difference to other linters that are used in addition to ruff. For those cases, the <a href="https://docs.astral.sh/ruff/settings/#external"><code>external</code></a> setting can be used to list rules that should not be flagged. However, it might be tedious to list all relevant rules.</p>
<p>So I propose to split RUF100 into two rules. RUF100 would only flag noqas that ruff has actually checked. And a new rule would flag noqas that are not relevant to ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-11-05 16:25</div>
            <div class="timeline-body"><p>Splitting this rule would actually allow make it way easier to enable it. Note this doesn&#x27;t entirely solve the problem if any differences in false positives / false negatives exist between ruff and the external rule code tool, but it would be a nice start!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bendoerry">@bendoerry</a> on 2023-11-06 09:43</div>
            <div class="timeline-body"><p>This would be a great help for us.</p>
<p>We currently have to check for unnecessary (as opposed to not-enabled/understood) noqas separately in our CI.
Our current method for finding relies on enabling all rules and then parsing the json output format using jq.</p>
<p>Ideally we would just be able to enable one rule in our standard linting config which would highlight these unnecessary noqas, but not noqas for rules that just aren&#x27;t enabled at that moment.</p>
<p>Not that familiar on ruff&#x27;s internals so can&#x27;t comment on to what extent checking that noqas for non-enabled rules are valid will impact performance.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ThiefMaster">@ThiefMaster</a> on 2023-11-14 13:28</div>
            <div class="timeline-body"><p>Being able to disable this rule for specific violations would also reduce the impact of the F401 shortcoming documented in #61 (see <a href="https://github.com/astral-sh/ruff/issues/60#issuecomment-1809338927">my comment</a> in there)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Quexington">@Quexington</a> on 2024-11-08 23:28</div>
            <div class="timeline-body"><p>Adding a comment to this because it seems close to what I came here to report, but if you&#x27;re searching through a large list of ruff errors, and you want to select &amp; fix just the <code>RUF100</code>, you end up making a mess for yourself because it will accidentally generate a false positive on <em>all</em> of the <code>noqa</code>s.</p>
<pre><code>foo = &quot;bar&quot;  # noqa: &lt;some_error_code&gt;
bat = &quot;baz&quot;  # noqa: &lt;error that no longer applies&gt;
</code></pre>
<p>If you run <code>ruff check --select RUF100 --fix</code> in order to apply a targeted fix to the <code>bat</code>/<code>baz</code> line, it will remove BOTH <code>noqa</code>s because <code>&lt;some_error_code&gt;</code> is no longer selected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-11-11 10:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-11-11 10:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:45 UTC
    </footer>
</body>
</html>
