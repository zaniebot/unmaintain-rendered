<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[flake8-django] DJ001 is not raised for models not directly inherited from Model - astral-sh/ruff #2892</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[flake8-django] DJ001 is not raised for models not directly inherited from Model</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2892">#2892</a>
        opened by <a href="https://github.com/konysko">@konysko</a>
        on 2023-02-14 10:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konysko">@konysko</a></div>
            <div class="timeline-body"><p>DJ001 is not raised for models which doesn't directly inherits from django.db.models.Model. The source of bug is in https://github.com/charliermarsh/ruff/blob/f7515739acc0a7b5c580bf05aac6055181739c65/crates/ruff/src/rules/flake8_django/rules/helpers.rs#L6 It should lookup whole mro for the Model class.</p>
<p>Affected version: 0.0.246
Snippet reproducing bug:</p>
<pre><code class="language-python">from django.db import models
from django.utils.translation import gettext_lazy as _
from utils.models import BaseModel


class ExampleModel(BaseModel):
    name = models.CharField(max_length=255, verbose_name=_('Name'), null=True)
    description = models.TextField(verbose_name=_('Description'))

    def __str__(self) -&gt; str:
        return self.name
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-14 16:04</div>
            <div class="timeline-body"><p>I think in this case it would also be fine to skip the base model check. If a class has a <code>django.models.CharField</code>, that's good enough IMO.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-02-15 14:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-02-15 15:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-15 15:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:46:31 UTC
    </footer>
</body>
</html>
