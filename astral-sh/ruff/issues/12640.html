<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`B909` False-positive: Detects immediate `break` but not `return` - astral-sh/ruff #12640</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>B909</code> False-positive: Detects immediate <code>break</code> but not <code>return</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12640">#12640</a>
        opened by <a href="https://github.com/Avasam">@Avasam</a>
        on 2024-08-02 18:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Avasam">@Avasam</a> on 2024-08-02 18:46</div>
            <div class="timeline-body"><ul>
<li><p>List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
B909</p>
</li>
<li><p>A minimal code snippet that reproduces the bug.</p>
</li>
</ul>
<pre><code class="language-python">def __pop_image_type(split_image: Iterable[AutoSplitImage], image_type: ImageType):
    for image in split_image:
        if image.image_type == image_type:
            split_image.remove(image)
            return image

    return None
</code></pre>
<ul>
<li>The command you invoked (e.g., <code>ruff /path/to/file.py --fix</code>), ideally including the <code>--isolated</code> flag.
<code>ruff check . --isolated --select=B909 --preview</code></li>
<li>The current Ruff version (<code>ruff --version</code>).
ruff 0.5.6</li>
</ul>
<p>See the reproducer above, I'd expect that to pass, given that the below code also passes, but is much less cleaner:</p>
<pre><code class="language-python">def __pop_image_type(split_image: list[AutoSplitImage], image_type: ImageType):
    for image in split_image:
        if image.image_type == image_type:
            split_image.remove(image)
            break
    else:
        return None

    return image
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-08-02 21:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-08-02 21:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-08-02 22:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-08-02 22:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:32 UTC
    </footer>
</body>
</html>
