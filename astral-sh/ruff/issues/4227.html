<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PYI015 covers parts of PYI052 - astral-sh/ruff #4227</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>PYI015 covers parts of PYI052</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/4227">#4227</a>
        opened by <a href="https://github.com/twoertwein">@twoertwein</a>
        on 2023-05-04 18:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/twoertwein">@twoertwein</a> on 2023-05-04 18:27</div>
            <div class="timeline-body"><p>flake8-pyi</p>
<blockquote>
<p>Y015 | Only simple default values are allowed for assignments. Similar to Y011, but for assignments rather than parameter annotations.
-- | --
Y052 | Y052 disallows assignments to constant values where the assignment does not have a type annotation. For example, x = 0 in the global namespace is ambiguous in a stub, as there are four different types that could be inferred for the variable x: int, Final[int], Literal[0], or Final[Literal[0]]. Enum members are excluded from this check, as are various special assignments such as <strong>all</strong> and <strong>match_args</strong>.</p>
</blockquote>
<p>ruff seems to include Y52 in Y15 but does not exclude enums.</p>
<p>in pyi file:</p>
<pre><code class="language-py">from enum import Enum

class _NoDefault(Enum):
    no_default = ...

no_default: Final = _NoDefault.no_default  # noqa: PYI015
NoDefault = Literal[_NoDefault.no_default]
</code></pre>
<p>xref https://github.com/pandas-dev/pandas/pull/53062#discussion_r1185161948</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-05-04 18:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-05 18:12</div>
            <div class="timeline-body"><p>üëç I think the best solution here is to implement <code>Y052</code>, and fix <code>Y015</code> such that they're non-overlapping (as in <code>flake8-pyi</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @charliermarsh on 2023-05-06 03:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sladyn98">@sladyn98</a> on 2023-05-06 20:36</div>
            <div class="timeline-body"><p>@charliermarsh I would like to work on this issue, can you point me to some code pointers and I can work on it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mccullocht">@mccullocht</a> on 2023-05-06 20:52</div>
            <div class="timeline-body"><p>@sladyn98 I briefly looked into this. The <a href="https://github.com/PyCQA/flake8-pyi/blob/7425435c81d852a3c5a4be45a5b714785cec4ce1/pyi.py#L996">pylint</a> implementation of <code>Y052</code> and <code>Y015</code> appear together, it probably makes sense structure things similarly and place it near the <a href="https://github.com/charliermarsh/ruff/blob/539af34f585eee4d762f6bd01ca508429c35d85e/crates/ruff/src/rules/flake8_pyi/rules/simple_defaults.rs#L396">ruff</a> implementation of <code>Y015</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4271.html">astral-sh/ruff#4271</a> on 2023-05-08 00:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-05-16 01:59</div>
            <div class="timeline-body"><p>Closed by https://github.com/charliermarsh/ruff/pull/4293.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-05-16 01:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:06 UTC
    </footer>
</body>
</html>
