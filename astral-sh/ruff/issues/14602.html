<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to deal with counter-argument to rules? Concrete example PLC1901 - astral-sh/ruff #14602</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to deal with counter-argument to rules? Concrete example PLC1901</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14602">#14602</a>
        opened by <a href="https://github.com/kaddkaka">@kaddkaka</a>
        on 2024-11-26 06:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kaddkaka">@kaddkaka</a></div>
            <div class="timeline-body"><p>The pylint rule PLC1901 (<code>compare-to-empty-string</code>) checks for comparison with empty string which it considers &quot;unnecessary&quot;, but I would argue this is not a problem, but rather the reverse!</p>
<p>Example code from <a href="https://docs.astral.sh/ruff/rules/compare-to-empty-string/">documentation</a>:</p>
<pre><code class="language-py">x: str = ...

if x == &quot;&quot;:
    print(&quot;x is empty&quot;)
</code></pre>
<p>Even if the compared object is known to be a string or not, <code>x == &quot;&quot;</code> shows and explain the intent much better than <code>not x</code>.</p>
<ul>
<li>If type annotation is missing, or or many lines away, the person reading the code will understand that this variable is meant to be a string. <code>not x</code> does not give any clue on what type x is supposed to be.</li>
</ul>
<p>Could there be a section &quot;Why is this <em>not</em> bad&quot; in the documentation?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kaddkaka">@kaddkaka</a> on 2024-11-26 06:27</div>
            <div class="timeline-body"><p>There has been complaints regarding PLC1901 in particular before: https://github.com/astral-sh/ruff/issues/4282#issuecomment-1538815106</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kaddkaka">@kaddkaka</a> on 2024-11-26 06:31</div>
            <div class="timeline-body"><p>Oh, I just found https://github.com/astral-sh/ruff/pull/5264</p>
<p>Is this rule still in &quot;nursery&quot;? Is PLC1901 meant to only be active if explicitly opt-in? I seem to get it just by having select &quot;PL&quot;.</p>
<p>Nothing in the rule page documentation hints about this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-11-26 08:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-26 08:43</div>
            <div class="timeline-body"><p>Hi @kaddkaka</p>
<p>Thanks for all the research and linking the relevant issues. That's useful.</p>
<p>Yes, the <code>PLC</code> rules aren't for everyone. They encode specific conventions that <em>some</em> find useful. There are many other rules in Ruff that are of a stylistic nature or are rather opinionated. We suggest you freely disable rules if you don't agree with what they're asserting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kaddkaka">@kaddkaka</a> on 2024-11-26 09:19</div>
            <div class="timeline-body"><p>@MichaReiser thanks, I agree this is the way to go. In the closed PR it was mentioned that this rule was moved to a &quot;nursery&quot;. Does that corresponds to the rules enabled by  <code>--preview</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-26 09:22</div>
            <div class="timeline-body"><p>Yes, preview replaced the nursery concept and it is to opt-in to more experimental Ruff features and <a href="https://docs.astral.sh/ruff/rules/compare-to-empty-string/">PLC1901</a> is one such experimental rule</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kaddkaka">@kaddkaka</a> on 2024-11-28 06:36</div>
            <div class="timeline-body"><p>Would it be valuable to have more rule categories here?</p>
<ol>
<li>rules that are new and not yet battle-tested (they enter in <code>--preview</code> and are moved to stable set of rules when mature)</li>
<li>Some rules are considered not good and it's not valuable to include them in the &quot;default&quot; set of rules. these rules should perhaps be stable put &quot;opt-in&quot;</li>
</ol>
<p>So instead of:</p>
<ul>
<li><code>--preview</code> and <code>stable</code>, have:</li>
<li><code>--preview</code>, <code>stable-default</code>, <code>stable-opt-in</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-28 06:38</div>
            <div class="timeline-body"><p>Yes, we think that's the long term solution for this. We plan to recategorize rules but haven't gotten around to actually do it. See https://github.com/astral-sh/ruff/issues/1774</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-01-25 10:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:51:39 UTC
    </footer>
</body>
</html>
