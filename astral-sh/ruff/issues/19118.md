```yaml
number: 19118
title: "ICN001 import aliases should be normalized before checking against `__debug__`"
type: issue
state: closed
author: dscorbett
labels:
  - bug
  - fixes
assignees: []
created_at: 2025-07-03T12:17:48Z
updated_at: 2025-08-06T06:42:52Z
url: https://github.com/astral-sh/ruff/issues/19118
synced_at: 2026-01-10T01:56:57Z
```

# ICN001 import aliases should be normalized before checking against `__debug__`

---

_Issue opened by @dscorbett on 2025-07-03 12:17_

### Summary

Ruff should check that no alias in [`lint.flake8-import-conventions.aliases`](https://docs.astral.sh/ruff/settings/#lint_flake8-import-conventions_aliases) or [`lint.flake8-import-conventions.extend-aliases`](https://docs.astral.sh/ruff/settings/#lint_flake8-import-conventions_extend-aliases) normalizes to `__debug__` under NFKC. Ruff currently only checks that no alias equals `__debug__` exactly, letting the fix for [`unconventional-import-alias` (ICN001)](https://docs.astral.sh/ruff/rules/unconventional-import-alias/) introduce a syntax error.

[Playground](https://play.ruff.rs/2c5a867f-3558-406e-ac12-08ca893b72ff)

```console
$ cat >icn001.py <<'# EOF'
import collections
from collections import abc
# EOF

$ ruff --isolated check --config 'lint.flake8-import-conventions.aliases = {"collections" = "_ï¹ð˜¥ð˜¦ð˜£ð˜¶ð˜¨ï¹ï¹"}' --config 'lint.flake8-import-conventions.extend-aliases = {"collections.abc" = "_ï¹ð”¡ð”¢ð”Ÿð”²ð”¤ï¹ï¹"}' icn001.py --select ICN001 --unsafe-fixes --fix

$ ruff --isolated check --config 'lint.flake8-import-conventions.aliases = {"collections" = "_ï¹ð˜¥ð˜¦ð˜£ð˜¶ð˜¨ï¹ï¹"}' --config 'lint.flake8-import-conventions.extend-aliases = {"collections.abc" = "_ï¹ð”¡ð”¢ð”Ÿð”²ð”¤ï¹ï¹"}' icn001.py --select ICN001 --unsafe-fixes --fix --output-format concise
icn001.py:1:23: SyntaxError: cannot assign to `__debug__`
icn001.py:2:32: SyntaxError: cannot assign to `__debug__`
Found 4 errors (2 fixed, 2 remaining).

$ cat icn001.py
import collections as _ï¹ð˜¥ð˜¦ð˜£ð˜¶ð˜¨ï¹ï¹
from collections import abc as _ï¹ð”¡ð”¢ð”Ÿð”²ð”¤ï¹ï¹
```

### Version

ruff 0.12.1 (32c54189c 2025-06-26)

---

_Label `bug` added by @ntBre on 2025-07-03 14:41_

---

_Label `fixes` added by @ntBre on 2025-07-03 14:41_

---

_Referenced in [astral-sh/ruff#19411](../../astral-sh/ruff/pulls/19411.md) on 2025-07-17 20:07_

---

_Closed by @MichaReiser on 2025-08-06 06:42_

---
