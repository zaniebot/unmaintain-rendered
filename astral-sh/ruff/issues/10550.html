<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>removal of leading white-space in top-of-file comment  - astral-sh/ruff #10550</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>removal of leading white-space in top-of-file comment</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10550">#10550</a>
        opened by <a href="https://github.com/janwilmans">@janwilmans</a>
        on 2024-03-24 18:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/janwilmans">@janwilmans</a></div>
            <div class="timeline-body"><p>using ruff vscode plugin,  default configuration but with:</p>
<pre><code>[tool.ruff]
line-length = 160
indent-width = 4
</code></pre>
<p>Before code format:</p>
<pre><code>#!/usr/bin/env python3
&quot;&quot;&quot;Returns with exitcode 1 if /....., otherwise 0 (success)
    description bla bla description
    description bla bla description
&quot;&quot;&quot;
</code></pre>
<p>after code format:</p>
<pre><code>#!/usr/bin/env python3
&quot;&quot;&quot;Returns with exitcode 1 if /....., otherwise 0 (success)
description bla bla description
description bla bla description
&quot;&quot;&quot;
</code></pre>
<p>All leading whitespace in comments up top seems to be removed, however, in raw-strings that are assigned to a variable, this does not happen.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">docstring</span> added by @AlexWaygood on 2024-03-24 19:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @AlexWaygood on 2024-03-24 19:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-24 19:57</div>
            <div class="timeline-body"><p>I believe this is by design. The formatter normalizes docstrings, and a string expression at the top of a file is a docstring.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/janwilmans">@janwilmans</a> on 2024-03-24 23:40</div>
            <div class="timeline-body"><p>The docstring can change the behaviour of the program, such as with docopt, so I think there should at least be a way to disable this ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-25 00:54</div>
            <div class="timeline-body"><p>This looks like a duplicate of #10396</p>
<p>You can disable this with <code># fmt: skip</code> as discussed there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/janwilmans">@janwilmans</a> on 2024-03-25 07:34</div>
            <div class="timeline-body"><p>You are correct, this is a duplicate, I did not find it because I did not look for 'docstring' as a keyword, silly me, thank you for pointing that out.</p>
<p>However, I think it is not a reasonable solution to annotate all python files with tool-specific annotations, I see there is an issue <a href="https://github.com/psf/black/issues/4276">#4276</a> for this on the Black repo. They are also of the opinion that modifying user data is allowed by a code formatter.</p>
<p>I'm not sure I follow this logic, any change that have a runtime effect is a bug to me. I will go back to autopep8, feel free to close this issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-03-25 07:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:49:55 UTC
    </footer>
</body>
</html>
