```yaml
number: 16099
title: C403 fix fails when a comma follows the list
type: issue
state: closed
author: dscorbett
labels:
  - bug
  - fixes
  - help wanted
assignees: []
created_at: 2025-02-11T15:02:30Z
updated_at: 2025-02-15T17:45:42Z
url: https://github.com/astral-sh/ruff/issues/16099
synced_at: 2026-01-10T01:56:55Z
```

# C403 fix fails when a comma follows the list

---

_Issue opened by @dscorbett on 2025-02-11 15:02_

### Description

The fix for [`unnecessary-list-comprehension-set` (C403)](https://docs.astral.sh/ruff/rules/unnecessary-list-comprehension-set/) produces a syntax error when a comma follows the argument.
```console
$ cat >c403.py <<'# EOF'
set([x for x in range(5)],)
# EOF

$ ruff --isolated check --select C403 c403.py --unsafe-fixes --diff 2>&1 | grep error:
error: Fix introduced a syntax error. Reverting all changes.
```
This is similar to #15852. I checked the rest of that series of rules and C403 seems to be the only one this bug still applies to.

---

_Label `bug` added by @ntBre on 2025-02-11 15:48_

---

_Label `fixes` added by @ntBre on 2025-02-11 15:48_

---

_Comment by @ntBre on 2025-02-11 17:08_

@dylwil3 Do you want to take this one too? Or it could be a good `help wanted` with #15929 as an example.

---

_Label `help wanted` added by @dylwil3 on 2025-02-11 17:22_

---

_Comment by @dylwil3 on 2025-02-11 17:22_

I'll put `help wanted` for now and if no one picks it up in a few days I can take it - thanks!

---

_Referenced in [astral-sh/ruff#16110](../../astral-sh/ruff/pulls/16110.md) on 2025-02-12 01:04_

---

_Closed by @dylwil3 on 2025-02-15 17:45_

---
