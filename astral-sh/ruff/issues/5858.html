<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PERF203 should only trigger for exception handler that unconditionally raises - astral-sh/ruff #5858</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>PERF203 should only trigger for exception handler that unconditionally raises</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/5858">#5858</a>
        opened by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a>
        on 2023-07-18 13:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a> on 2023-07-18 13:27</div>
            <div class="timeline-body"><p>I think that PERF203 should only trigger when the exception handler unconditionally raises.</p>
<pre><code class="language-python">for i in range(10):
    try:
        print(1 / 0)
    except Exception:  # a.py:4:5: PERF203 `try`-`except` within a loop incurs performance overhead
        print(&quot;oops&quot;)
    print(&quot;2&quot;)
</code></pre>
<p>Although, this is not a priority for me since I decided to disable it.  It never caught anything useful for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">waiting-on-author</span> added by @charliermarsh on 2023-07-19 01:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-19 01:22</div>
            <div class="timeline-body"><p>For completeness -- could you give an example of a case that should and shouldn't be caught, based on this criteria?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NeilGirdhar">@NeilGirdhar</a> on 2023-07-19 03:24</div>
            <div class="timeline-body"><p>Where it should not be caught is, in my opinion constructs like the one displayed above.  The problem is that this error can't be acted on for such an example.  You can't move the try/except outside the loop since that would make an exception skip everything that follows the try/except.</p>
<p>As for where it should be caught, I think it's tricky because there's a balance.  While it is more efficient to have try/except around the loop, it means that more code is protected by the try/except, which is a downside.  Ideally, you want the minimum amount of code in a try/except.</p>
<p>I'm not sure what others like, but personally I don't find this error useful in the first place since it is trying to add more code to the try/except.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-07-28 04:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:30:44 UTC
    </footer>
</body>
</html>
