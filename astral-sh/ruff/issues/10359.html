<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test display_default_settings is failing on 32 bits archs - astral-sh/ruff #10359</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Test display_default_settings is failing on 32 bits archs</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/10359">#10359</a>
        opened by <a href="https://github.com/raspbeguy">@raspbeguy</a>
        on 2024-03-12 14:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/raspbeguy">@raspbeguy</a> on 2024-03-12 14:20</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>Hi,</p>
<p>I'm trying to fix <a href="https://gitlab.alpinelinux.org/alpine/aports/-/blob/master/testing/ruff/APKBUILD">Alpine's packages for ruff</a> which is broken on 32 bits architectures because of failing test <code>display_default_settings</code>.</p>
<p>Here is the output on x86:</p>
<pre><code>---- display_default_settings stdout ----
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Snapshot Summary ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
Snapshot file: crates/ruff/tests/snapshots/show_settings__display_default_settings.snap
Snapshot: display_default_settings
Source: crates/ruff/tests/show_settings.rs:30
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
program: ruff
args:
  - check
  - &quot;--show-settings&quot;
  - unformatted.py
───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────
-old snapshot
+new results
────────────┬──────────────────────────────────────────────────────────────────────────────────────────────────────────
  230   230 │ 	gettext,
  231   231 │ 	ngettext,
  232   232 │ ]
  233   233 │ linter.flake8_implicit_str_concat.allow_multiline = true
  234       │-linter.flake8_import_conventions.aliases = {&quot;matplotlib&quot;: &quot;mpl&quot;, &quot;matplotlib.pyplot&quot;: &quot;plt&quot;, &quot;pandas&quot;: &quot;pd&quot;, &quot;seaborn&quot;: &quot;sns&quot;, &quot;tensorflow&quot;: &quot;tf&quot;, &quot;networkx&quot;: &quot;nx&quot;, &quot;plotly.express&quot;: &quot;px&quot;, &quot;polars&quot;: &quot;pl&quot;, &quot;numpy&quot;: &quot;np&quot;, &quot;panel&quot;: &quot;pn&quot;, &quot;pyarrow&quot;: &quot;pa&quot;, &quot;altair&quot;: &quot;alt&quot;, &quot;tkinter&quot;: &quot;tk&quot;, &quot;holoviews&quot;: &quot;hv&quot;}
        234 │+linter.flake8_import_conventions.aliases = {&quot;pandas&quot;: &quot;pd&quot;, &quot;panel&quot;: &quot;pn&quot;, &quot;plotly.express&quot;: &quot;px&quot;, &quot;seaborn&quot;: &quot;sns&quot;, &quot;tensorflow&quot;: &quot;tf&quot;, &quot;numpy&quot;: &quot;np&quot;, &quot;matplotlib&quot;: &quot;mpl&quot;, &quot;matplotlib.pyplot&quot;: &quot;plt&quot;, &quot;tkinter&quot;: &quot;tk&quot;, &quot;polars&quot;: &quot;pl&quot;, &quot;pyarrow&quot;: &quot;pa&quot;, &quot;networkx&quot;: &quot;nx&quot;, &quot;altair&quot;: &quot;alt&quot;, &quot;holoviews&quot;: &quot;hv&quot;}
  235   235 │ linter.flake8_import_conventions.banned_aliases = {}
  236   236 │ linter.flake8_import_conventions.banned_from = []
  237   237 │ linter.flake8_pytest_style.fixture_parentheses = true
  238   238 │ linter.flake8_pytest_style.parametrize_names_type = tuple
────────────┴──────────────────────────────────────────────────────────────────────────────────────────────────────────
To update snapshots run `cargo insta review`
Stopped on the first failure. Run `cargo insta test` to run all snapshots.
thread 'display_default_settings' panicked at /home/alpine/.cargo/registry/src/index.crates.io-1cd66030c949c28d/insta-1.35.1/src/runtime.rs:563:9:
snapshot assertion for 'display_default_settings' failed in line 30
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-12 14:22</div>
            <div class="timeline-body"><p>Looks like the test is reliant on the order, can fix.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-03-12 14:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-03-12 14:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by @zanieb on 2024-03-12 14:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10370.html">astral-sh/ruff#10370</a> on 2024-03-12 19:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-03-12 19:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/10470.html">astral-sh/ruff#10470</a> on 2024-03-19 08:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/13009.html">astral-sh/ruff#13009</a> on 2024-08-20 17:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:52 UTC
    </footer>
</body>
</html>
