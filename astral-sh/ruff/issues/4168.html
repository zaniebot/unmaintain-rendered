<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Testing docs examples - astral-sh/ruff #4168</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Testing docs examples</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/4168">#4168</a>
        opened by <a href="https://github.com/calumy">@calumy</a>
        on 2023-05-01 11:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/calumy">@calumy</a> on 2023-05-01 11:31</div>
            <div class="timeline-body"><p>As far as I am aware, the examples in docs are not currently tested to check that the proposed fix actually fixes an issue. This would be useful to check the initial example returns the expected error code and that the &quot;Use instead:&quot; section removes the error.</p>
<p>I think this could be added as a stage in the <code>docs</code> section of the <code>CI</code> workflow. I would propose adding this as an independent stage after the <a href="https://github.com/charliermarsh/ruff/blob/main/.github/workflows/ci.yaml#L238-L239">Generate docs</a> section rather than being added to the generate docs step as this is also used when <a href="https://github.com/charliermarsh/ruff/blob/main/.github/workflows/docs.yaml">releasing the docs</a> and should not block the docs from being released.</p>
<p>If this would be deemed useful, I am happy to give it a go.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-01 11:59</div>
            <div class="timeline-body"><p>It could be worth taking inspiration from Rome. It automatically generates tests from the rule documentation (you only provide the example, it generates the expected diagnostic and fix automatically). The tests run as part of the regular rust tests, and the documentation is also used on the website. <a href="https://github.com/rome/tools/blob/ff9801344c16c03794908f1dcb62e16b95be7c61/crates/rome_js_analyze/src/analyzers/correctness/no_new_symbol.rs#L9-L34">example</a>, <a href="https://docs.rome.tools/lint/rules/nonewsymbol/">documentation</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on 2023-05-01 15:53</div>
            <div class="timeline-body"><p>Some rules need to have a certain setting enable so we need to add a mechanic for this.
Also, we could run black to check if the code is well formatted.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on 2023-05-01 15:56</div>
            <div class="timeline-body"><ul>
<li>I presented some idea in this PR #3191.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/calumy">@calumy</a> on 2023-05-01 16:39</div>
            <div class="timeline-body"><p>I'm happy to give the formatting bit a go but the testing part might be a bit beyond my minimal Rust skills. I was originally thinking it could be done with another Python script but integrating into the current testing process makes more sense.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by @charliermarsh on 2023-05-02 01:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4240.html">astral-sh/ruff#4240</a> on 2023-05-05 10:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4270.html">astral-sh/ruff#4270</a> on 2023-05-07 16:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:50 UTC
    </footer>
</body>
</html>
