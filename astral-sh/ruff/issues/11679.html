<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File directive `# flake8: noqa` also suppresses isort errors - astral-sh/ruff #11679</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>File directive <code># flake8: noqa</code> also suppresses isort errors</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11679">#11679</a>
        opened by <a href="https://github.com/albertvillanova">@albertvillanova</a>
        on 2024-06-01 16:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/albertvillanova">@albertvillanova</a></div>
            <div class="timeline-body"><p>The file directive <code># flake8: noqa</code> does not only suppress <code>flake8</code> errors but also <code>isort</code> ones.</p>
<p>I would expect the flake8 directive to suppress only <code>flake8</code> errors, being equivalent to:</p>
<pre><code>[tool.ruff.lint.per-file-ignores]
&quot;my_filename.py&quot; = [&quot;F&quot;]
</code></pre>
<p>This was the behavior before replacing <code>flake8</code>+<code>isort</code> with <code>ruff</code>.</p>
<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-01 17:03</div>
            <div class="timeline-body"><p>Thanks! From my perspective this is working-as-intended. <code># flake8: noqa</code> is interpreted as &quot;suppress all lint errors&quot;, and unorganized imports is a form of lint error.</p>
<p>Similarly:</p>
<pre><code class="language-toml">[tool.ruff.lint.per-file-ignores]
&quot;my_filename.py&quot; = [&quot;F&quot;]
</code></pre>
<p>This wouldn't match Flake8's behavior either, since <code># flake8: noqa</code> doesn't mean &quot;Ignore the F rules&quot;, it means &quot;Ignore all Flake8 rules&quot;, which includes the Pycodestyle rules (E, W) and any plugins you have installed. So that would be too narrow.</p>
<p>If you only want to ignore the <code>F</code> rules, I suggest using per-file ignores instead.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-06-01 17:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/albertvillanova">@albertvillanova</a> on 2024-06-02 09:03</div>
            <div class="timeline-body"><p>Thanks for your reply, @charliermarsh.</p>
<p>Forget my above comment about the equivalence to ignoring F rules, which is not precise.</p>
<p>The key points are: for our files marked with the directive <code># flake8: noqa</code></p>
<ul>
<li>before using <code>ruff</code>, we were using <code>flake8</code>+<code>isort</code><ul>
<li>all Flake8 rules were ignored but not isort ones: the imports were sorted</li>
</ul>
</li>
<li>we replaced <code>flake8</code>+<code>isort</code> with <code>ruff</code> and we expected the same behavior<ul>
<li>however now the imports are no longer sorted</li>
</ul>
</li>
</ul>
<p>If this behavior change is fine from your perspective, would you consider it worth mentioning explicitly in the docs to make it even clearer?</p>
<p>For example, maybe something like:</p>
<blockquote>
<p>Note that Ruff will treat Flake8's <code># flake8: noqa</code> directive as equivalent to <code># ruff: noqa</code>, thus suppressing all linting violations, not only Flake8 ones (e.g. also <code>isort</code>).</p>
</blockquote>
<p>instead of:</p>
<blockquote>
<p>Note that Ruff will also respect Flake8's <code># flake8: noqa</code> directive, and will treat it as equivalent to <code># ruff: noqa</code>.</p>
</blockquote>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:50:22 UTC
    </footer>
</body>
</html>
