<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARG flake8-unused-args does not work with dunder methods - astral-sh/ruff #21904</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ARG flake8-unused-args does not work with dunder methods</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/21904">#21904</a>
        opened by <a href="https://github.com/alexruddick-grantek">@alexruddick-grantek</a>
        on 2025-12-10 19:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/alexruddick-grantek">@alexruddick-grantek</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>My initial concern was finding (bad) code that tried to pass <code>*args</code> to <code>__aenter()__</code>.<br />
The <code>*args</code> has no effect, and should be caught by a linter IMO.
https://docs.python.org/3/reference/datamodel.html#object.__aenter</p>
<p>The maintainers at <code>flake8-asyncio</code> <a href="https://github.com/python-trio/flake8-async/issues/421#event-21464789729">pointed out</a> that this is not only just <code>__aenter__</code> but also affects a number of other dunder methods.</p>
<p>I also realized there is flake8 plugin that catches this: <code>flake8-unused-arguments</code>.  <code>ruff</code> implements these rules as <code>ARG</code>.  After doing some testing, I realized that <code>ruff</code> doesn't flag unused arguments in dunder methods <em>at all</em>.  Not <code>some_arg</code>, not <code>*args</code>, and not <code>**kwargs</code>.</p>
<pre><code class="language-python">class Class:
    def foo(self, arg1, arg2):
        print(arg1)  # ARG002 Unused method argument: `arg2`

    def __aenter__(self, unused):  # ruff does not error, flake8 does
        return self

class Foo:
    async def __aenter__(self, *args):   # ruff does not error, flake8 does
        return self

class Bar:
    async def __aenter__(self, **kwargs):   # ruff does not error, flake8 does
        return self

class Baz:
    async def __aenter__(self):  # OK
        return self
</code></pre>
<p>See reproduction repo here: https://github.com/alexrudd2/unused-args (ruff + flake8) or <a href="https://play.ruff.rs/7fa84f6b-b5cf-43fb-8fde-2a3c3dfd48c0">playground</a>.</p>
<h3>Version</h3>
<p>0.14.8</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alexrudd2">@alexrudd2</a> on 2025-12-10 20:00</div>
            <div class="timeline-body"><p>(posting here to subscribe to notifications on my intended account)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amyreese">@amyreese</a> on 2025-12-10 20:11</div>
            <div class="timeline-body"><p>I assume the ARG rule in ruff is just trying to avoid needing a catalog of 100+ dunder methods to know which ones have arguments that need to be used or not, as it is common to not use arguments in methods like <code>__exit__</code> or <code>__aexit__</code> for decorators that don't care about exception state, etc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @amyreese on 2025-12-10 20:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-10 20:18</div>
            <div class="timeline-body"><p>Related: https://github.com/astral-sh/ruff/issues/1796, the corresponding PR is where the exception for dunder methods was added.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:41 UTC
    </footer>
</body>
</html>
