<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ruff freezes when running with --stdin-filename - astral-sh/ruff #14530</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ruff freezes when running with --stdin-filename</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/14530">#14530</a>
        opened by <a href="https://github.com/Guust-Franssens">@Guust-Franssens</a>
        on 2024-11-22 13:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Guust-Franssens">@Guust-Franssens</a> on 2024-11-22 13:56</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<pre><code class="language-bash">$ ruff check --stdin-filename src/__init__.py  --verbose --isolated
[2024-11-22][14:49:35][ruff::resolve][DEBUG] Isolated mode, not reading any pyproject.toml
</code></pre>
<p>however running it without specifying --stdin-filename works without any problem</p>
<pre><code class="language-bash">$ ruff check src/__init__.py --verbose --isolated
[2024-11-22][14:51:18][ruff::resolve][DEBUG] Isolated mode, not reading any pyproject.toml
[2024-11-22][14:51:18][ruff::commands::check][DEBUG] Identified files to lint in: 3.3689ms
[2024-11-22][14:51:18][ruff::diagnostics][DEBUG] Checking: C:\Users\gfranssens\vscode-projects\belgian-journal\src\__init__.py
[2024-11-22][14:51:18][ruff::commands::check][DEBUG] Checked 1 files in: 12.029ms
All checks passed!
</code></pre>
<p>I have tried running on many versions however all with same problem (minor version 0.5, 0.6, 0.7).  I was currently using the latest version.</p>
<pre><code class="language-bash">$ ruff version
ruff 0.8.0 (a90e404c3 2024-11-22)
</code></pre>
<p>the reason that this is a problem is because the VSCode extension runs in the background with --stdin-filename thus no corrections are done on save.</p>
<p>I believe the problem is related to something on my machine, however I cannot figure out what is the problem...
Hopefully someone knows a fix...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-11-22 14:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-22 14:25</div>
            <div class="timeline-body"><p>Ruff expects that you pass a file via stdin when you specify <code>--stdin-filename</code> like this:</p>
<pre><code>ruff check --stdin-filename test.py &lt; ../test/c.py
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Guust-Franssens">@Guust-Franssens</a> on 2024-11-22 14:54</div>
            <div class="timeline-body"><p>@MichaReiser thanks already, make sense....</p>
<p>when I check the VSCode output for the ruff extension I see the following; afterwhich it freezes. I assume I should be this instead on the vscode-ruff extension?</p>
<pre><code>2024-11-22 15:51:16.631 [info] Using environment executable: C:\Users\gfranssens\.local\bin\ruff.EXE
2024-11-22 15:51:16.632 [info] Found ruff 0.8.0 at C:\Users\gfranssens\.local\bin\ruff.EXE
2024-11-22 15:51:16.632 [info] Running Ruff with: C:\Users\gfranssens\.local\bin\ruff.EXE ['check', '--force-exclude', '--no-cache', '--no-fix', '--quiet', '--output-format', 'json', '-', '--stdin-filename', 'c:\\Users\\gfranssens\\vscode-projects\\belgian-journal\\src\\spiders\\legal_entities.py']
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-22 14:59</div>
            <div class="timeline-body"><p>Can you explain with what you mean by freeze? I don't think ruff prints any other messages after <code>Running Ruff with</code>. Do you see violations in your editor? Does the output get updated when you change and save a file?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Guust-Franssens on 2024-11-22 16:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Guust-Franssens">@Guust-Franssens</a> on 2024-11-22 17:00</div>
            <div class="timeline-body"><p>My VSCode settings for Ruff were improplerly configured....</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:54 UTC
    </footer>
</body>
</html>
