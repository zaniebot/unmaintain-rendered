<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D400 should accept question mark as a sentence ender - astral-sh/ruff #8020</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>D400 should accept question mark as a sentence ender</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/8020">#8020</a>
        opened by <a href="https://github.com/warsaw">@warsaw</a>
        on 2023-10-17 16:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/warsaw">@warsaw</a> on 2023-10-17 16:05</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p><code>D400</code> complains when the first line of a docstring ends in a <code>?</code>.   However, it seems natural when documenting a predicate function that the first line of the docstring poses a question.  <code>D400</code> should accept <code>?</code> as a sentence ender in those cases.</p>
<pre><code class="language-python"># example.py
def is_a_thing(thing: int) -&gt; bool:
    &quot;&quot;&quot;Is this a thing?&quot;&quot;&quot;
    return bool(thing)
</code></pre>
<pre><code class="language-toml"># ruff.toml
select = ['D400']
</code></pre>
<pre><code class="language-shell">$ ruff check example.py 
example.py:2:5: D400 First line should end with a period
Found 1 error.
No fixes available (1 hidden fix can be enabled with the `--unsafe-fixes` option).
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @zanieb on 2023-10-17 17:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @zanieb on 2023-10-17 17:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-18 22:48</div>
            <div class="timeline-body"><p>Following pydocstyle, I think there's a different rule for this (<code>D415</code>). Could you disable <code>D400</code> and enable <code>D415</code> instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/warsaw">@warsaw</a> on 2023-10-18 23:11</div>
            <div class="timeline-body"><p>Oh interesting.  I tried to boil it down to an easy reproducer, but actually, in my production code (which I can't share), I have <code>select = ['D']</code> rather than specifically <code>D400</code>.  Maybe there's a weird interaction going on here?</p>
<p>Yup, if I change the <code>ruff.toml</code> to just:</p>
<pre><code class="language-toml"># ruff.toml
select = ['D']
</code></pre>
<p>I get</p>
<pre><code>warning: `one-blank-line-before-class` (D203) and `no-blank-line-before-class` (D211) are incompatible. Ignoring `one-blank-line-before-class`.
warning: `multi-line-summary-first-line` (D212) and `multi-line-summary-second-line` (D213) are incompatible. Ignoring `multi-line-summary-second-line`.
foo.py:1:1: D100 Missing docstring in public module
foo.py:2:5: D400 [*] First line should end with a period
Found 2 errors.
[*] 1 potentially fixable with the --fix option.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> removed by @MichaReiser on 2023-10-18 23:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Formatter: D400 should accept question mark as a sentence ender" to "D400 should accept question mark as a sentence ender" by @MichaReiser on 2023-10-18 23:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-18 23:25</div>
            <div class="timeline-body"><p>Do you have a convention set? Like:</p>
<pre><code class="language-toml">[tool.ruff.pydocstyle]
convention = &quot;google&quot;
</code></pre>
<p>That effectively acts as a filter on the select.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/warsaw">@warsaw</a> on 2023-10-18 23:34</div>
            <div class="timeline-body"><p>Yes, I'm using <code>convention = 'pep257'</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-09 05:03</div>
            <div class="timeline-body"><p>I think the solution here is to fix #2606, then suggest using <code>D415</code> in lieu of <code>D400</code>. Right now, it's impossible to enable <code>D415</code> alongside that convention.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-10 18:48</div>
            <div class="timeline-body"><p>Okay, in the next release, you should be able to add:</p>
<pre><code class="language-toml">select = [&quot;D&quot;, &quot;D415&quot;]
ignore = [&quot;D400&quot;]

[pydocstyle]
convention = &quot;pep257&quot;
</code></pre>
<p>To enable the PEP 257 convention, but swapping out D400 for D415.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-11-10 18:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">docstring</span> added by @charliermarsh on 2023-11-10 18:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @charliermarsh on 2023-11-10 18:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:51 UTC
    </footer>
</body>
</html>
