<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[FEATURE] Ruff support for removing obsolete and not needed noqa in the code - astral-sh/ruff #5736</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[FEATURE] Ruff support for removing obsolete and not needed noqa in the code</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/5736">#5736</a>
        opened by <a href="https://github.com/matejsp">@matejsp</a>
        on 2023-07-13 11:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/matejsp">@matejsp</a></div>
            <div class="timeline-body"><p>We have quite large codebase and have a lot of noqa in the code for various reasons.
When we refactor or format the code some noqa statements are no longer required.</p>
<p>I really like that you have better validation for noqa comments with latest ruff. We fixed a lot of invalid noqa statements in the code.</p>
<p>I propose a new feature (or cmd flag) that would run all the rules in the configuration and display warning if specific rule ignore was not needed.</p>
<p>for example:</p>
<pre><code>@django_cache_decorators.never_cache  # noqa: C901
def some_function():
    return &quot;a&quot;
</code></pre>
<p>Since rule &quot;Function is too complex (C901)&quot; is no longer needed because this function does not need, I would like a warning that this particular noqa was not used. This should work only for RUFF know rules and should skip unknown (for example if they are not already implemented by ruff).</p>
<p>Display something along the lines:</p>
<pre><code>warning: Invalid `# noqa` directive on line 459: this rule C901 is not needed in this line.
</code></pre>
<p>I understand that some rules are maybe 100% in sync with other tools and could pose a problem (just a warning is fine).
Alternative could be to include this in statistics somehow.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[FEATURE] Ruff support for removing obsolete and not needed noqa" to "[FEATURE] Ruff support for removing obsolete and not needed noqa in the code" by @matejsp on 2023-07-13 11:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-07-13 13:35</div>
            <div class="timeline-body"><p>Hey @matejsp could you briefly clarify how this feature request is different from https://beta.ruff.rs/docs/rules/unused-noqa/?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/matejsp">@matejsp</a> on 2023-07-13 13:48</div>
            <div class="timeline-body"><p>Ha! that's exactly what I was looking for, but was searching at the wrong place. Ruff is awesome.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @matejsp on 2023-07-13 13:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:47:40 UTC
    </footer>
</body>
</html>
