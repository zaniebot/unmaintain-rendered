<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Check whether `import`s are at top of notebook - astral-sh/ruff #13025</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Check whether <code>import</code>s are at top of notebook</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13025">#13025</a>
        opened by <a href="https://github.com/redeboer">@redeboer</a>
        on 2024-08-21 07:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/redeboer">@redeboer</a> on 2024-08-21 07:46</div>
            <div class="timeline-body"><p>Since #8872, <a href="https://docs.astral.sh/ruff/rules/module-import-not-at-top-of-file/"><code>E402</code></a> works per cell in Jupyter notebooks. However, in some projects, you may want to have the <code>import</code>s in one cell on the top of the notebook (e.g. to avoid cluttering code cells further below).</p>
<p>Would it be an idea to either introduce:</p>
<ol>
<li>a new <a href="https://docs.astral.sh/ruff/settings/#lintpycodestyle"><code>lint.pycodestyle</code></a> setting like <code>imports-at-top-of-notebook</code> (defaults to <code>False</code>)?</li>
<li>a new <code>E403</code> rule that is specifically for notebooks that works <strong>at notebook level</strong>? This is a variant of what @dhruvmanila suggested in https://github.com/astral-sh/ruff/pull/8872#issue-2015007451.</li>
</ol>
<p>I would suggest 1., to avoid potential rule code clashes (e.g. #2194).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @AlexWaygood on 2024-08-21 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @AlexWaygood on 2024-08-21 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">notebook</span> added by @AlexWaygood on 2024-08-21 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-23 05:21</div>
            <div class="timeline-body"><p>Thanks for the feature request. I think this is a useful feature.</p>
<p>We also discussed about providing a dedicated code action to move all imports in a Jupyter Notebook to a dedicated code cell at the top. Just want to confirm whether this request is to move the imports to a <em>dedicated</em> code cell at the top or just to the first code cell (might contain other Python code) in the notebook.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/redeboer">@redeboer</a> on 2024-08-23 08:41</div>
            <div class="timeline-body"><blockquote>
<p>We also discussed about providing a dedicated code action to move all imports in a Jupyter Notebook to a dedicated code cell at the top.</p>
</blockquote>
<p>Awesome!</p>
<blockquote>
<p>Just want to confirm whether this request is to move the imports to a <em>dedicated</em> code cell at the top or just to the first code cell (might contain other Python code) in the notebook.</p>
</blockquote>
<p>Ah that's a good point. In practice, we usually have a dedicated cell for this yes, but I'm not sure if everyone works like that. Also, we sometimes put global configurations like <code>logging</code> levels or <code>matplotlib</code> styles in that top cell (example <a href="https://compwa.github.io/report/030.html">here</a>).</p>
<p>Perhaps this could be configurable too? Difficult to think of good keywords here though, maybe <code>imports-at-top-of-notebook = True</code> and <code>imports-at-top-of-notebook = &quot;separate&quot;</code>? Well as I'm writing this, they already sound like a bad idea...</p>
<p>One could even consider implementing a a separate, additional rule that checks whether <code>import</code>s are in a dedicated cell.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/whatnick">@whatnick</a> on 2024-10-09 04:45</div>
            <div class="timeline-body"><p>This would be a really useful feature for cleaning up ad-hoc developed notebooks into something more maintainable.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:52 UTC
    </footer>
</body>
</html>
