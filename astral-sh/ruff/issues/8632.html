<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add formatting option to control spacing between consecutive `if` statements - astral-sh/ruff #8632</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add formatting option to control spacing between consecutive <code>if</code> statements</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8632">#8632</a>
        opened by <a href="https://github.com/ofek">@ofek</a>
        on 2023-11-12 18:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ofek">@ofek</a> on 2023-11-12 18:51</div>
            <div class="timeline-body"><p>I'm upgrading formatting across codebases and am often fixing https://docs.astral.sh/ruff/rules/#flake8-return-ret</p>
<p>When I fix those, I am facing an internal quandary regarding spacing between statements and I noticed myself converging on a pattern that seems correct.</p>
<p>Basically, I think there should be 0 or 1 new lines between <code>if</code> and <code>elif</code> statements as usual. Either one looks normal to me based on all of the code I have read over the years. However, zero new lines between consecutive <code>if</code> statements looks very odd and I would appreciate an option to enforce a new line between them, which is what I am now doing everywhere.</p>
<p>Perhaps this option could serve the dual purpose of enforcing zero new lines between <code>if</code> and <code>elif</code> statements.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">style</span> added by @charliermarsh on 2023-11-12 20:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @charliermarsh on 2023-11-12 20:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/warsaw">@warsaw</a> on 2023-11-15 00:35</div>
            <div class="timeline-body"><p>I generally prefer zero newlines between <code>if</code>, <code>elif</code>, and <code>else</code> clauses in the same conditional, and usually a single newline between consecutive <code>if</code> conditionals, but it's highly dependent on context.  If I can, I will put a meaningful comment between these clauses and that serves as enough of a visual separation for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-11-27 06:45</div>
            <div class="timeline-body"><p>Do I understand you correctly that this is about the number of lines between these two if statements:</p>
<pre><code class="language-python">
if True:
	...

if False:
	...
</code></pre>
<p>I do share your perspective that using a single line between if statements (in fact all control flow statements) helps improve readability, I don't think that enforcing it is something that reaches consensus in the community and may be even too opinionated for ruff. Maybe it would be better to support this as a lint rule?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2023-11-27 14:26</div>
            <div class="timeline-body"><p>Yes but this is very specific unlike what you said about all control flow statements. I and apparently many others would like a formatting option to make it so that there is a new line between consecutive <code>if</code> statements but zero new lines between <code>if</code>-<code>elif</code>-<code>else</code> statements.</p>
<p>This would be purely formatting and not a lint rule from my point of view but if that is what you want and it is fixable from the command line that I'm fine with whatever as long as it happens!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2023-12-13 16:41</div>
            <div class="timeline-body"><p>I understand this effort has not yet begun, but am I understanding correctly that this would be an acceptable feature?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-12-14 03:19</div>
            <div class="timeline-body"><blockquote>
<p>I understand this effort has not yet begun, but am I understanding correctly that this would be an acceptable feature?</p>
</blockquote>
<p>No, we haven't started with this yet. I'm currently implementing Black's 2024 preview style and try to get concensus around them. I also find improving the numpy array formatting (and other multi-dimensional arrays) more urgent because it hinders an entire sub-ecosystem from adopting ruff.</p>
<p>We haven't really figured out our process for adpoting style changes but I think style changes require that the vast majority of the Python ecosystem sees the change as desired and an overall improvement because it otherwise requires a formatter option, something that we tried to avoid so far.</p>
<p>I haven't seen a lot of feedback around this specific styling issue and expect that this change could be very controversial because many are opinionated (myself included) in how to space if statements (when and when not to add an empty line). So I don't think we see enough support to prioritize implementing this change ourself.</p>
<p>One possibility to drive this further is to implement the change yourself and show that the generated output by the ecosystem check is an overall improvement and then seek feedback from the wider community.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-01-04 10:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2025-01-04 14:44</div>
            <div class="timeline-body"><p>@MichaReiser Can you please link the option for posterity?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-01-05 08:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-05 08:58</div>
            <div class="timeline-body"><p>Sorry, I should have closed this as not planned.</p>
<p>There has only been little support for this issue, and I'm leaning more towards relaxing the formatter's blank line rules rather than making them more strict to make the formatter appealing to more users.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2025-01-05 19:27</div>
            <div class="timeline-body"><p>Okay, although what do you mean by little support? Also we're not asking for default strictness but rather an option.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-06 08:43</div>
            <div class="timeline-body"><p>Ruff follows Black's philosophy of only supporting minimal configuration to avoid formatting discussions becoming formatter-option discussions. We also default to being black-compatible rather than diverting from Black's style guide.</p>
<p>We've made a few exceptions where we diverge from Black's style guide or added options where Black has none but we only did so for highly requested features and they remain the exception. I don't see this feature request to meet that bar.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:31:57 UTC
    </footer>
</body>
</html>
