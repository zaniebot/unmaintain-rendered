<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`invalid-rule-code` (`RUF102`) doesn't respect rule redirects - astral-sh/ruff #20235</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>invalid-rule-code</code> (<code>RUF102</code>) doesn&#x27;t respect rule redirects</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/20235">#20235</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-09-04 14:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ntBre">@ntBre</a></div>
            <div class="timeline-body">Summary
<p>This came up in the <a href="https://github.com/astral-sh/ruff/pull/20232#issuecomment-3253818000">ecosystem check</a> when trying to stabilize the rule for the 0.13 release. Using the <code>TC002</code> example with an added <code>TCH002</code> noqa (<code>TCH</code> has been remapped to <code>TC</code>):</p>
<pre><code>from __future__ import annotations

import pandas as pd  # noqa: TCH002


def func(df: pd.DataFrame) -&gt; int:
    return len(df)
</code></pre>
<p>Selecting both <code>TC002</code> and <code>RUF102</code> shows that <code>TC002</code> is suppressed (the noqa code works and is not invalid), but <code>RUF102</code> still fires:</p>
<pre><code>&gt; ruff check try.py --select TC002 --select RUF102 --preview
RUF102 [*] Invalid rule code in `# noqa`: TCH002
 --&gt; try.py:3:22
  |
1 | from __future__ import annotations
2 |
3 | import pandas as pd  # noqa: TCH002
  |                      ^^^^^^^^^^^^^^
  |
help: Remove the rule code

Found 1 error.
[*] 1 fixable with the `--fix` option.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-04 14:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-04 14:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TaKO8Ki">@TaKO8Ki</a> on 2025-09-04 17:23</div>
            <div class="timeline-body"><p>I will take this issue:)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/amyreese">@amyreese</a> on 2025-09-10 21:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:23 UTC
    </footer>
</body>
</html>
