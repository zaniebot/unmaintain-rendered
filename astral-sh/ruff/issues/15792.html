<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FURB171 Does not trigger when calling set(...) - astral-sh/ruff #15792</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>FURB171 Does not trigger when calling set(...)</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/15792">#15792</a>
        opened by <a href="https://github.com/naslundx">@naslundx</a>
        on 2025-01-28 20:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/naslundx">@naslundx</a> on 2025-01-28 20:10</div>
            <div class="timeline-body"><h3>Description</h3>
<p>Minimal code snippet:</p>
<pre><code class="language-python">if 1 in {1}:  # This triggers
    print(&quot;Single-element set&quot;)

if 1 in set([1]):  # This does not, but is equivalent
    print(&quot;Single-element set&quot;)
</code></pre>
<p>Command:
<code>ruff check --isolated testfile.py --select FURB171 --preview</code></p>
<p>No other settings.</p>
<p>Ruff version 0.9.3.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/15793.html">astral-sh/ruff#15793</a> on 2025-01-28 20:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-01-28 21:07</div>
            <div class="timeline-body"><p>These two are not equivalent:</p>
<pre><code class="language-pycon">&gt;&gt;&gt; set(1)
Traceback (most recent call last):
  File &quot;&lt;python-input-0&gt;&quot;, line 1, in &lt;module&gt;
    set(1)
    ~~~^^^
TypeError: 'int' object is not iterable
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/naslundx">@naslundx</a> on 2025-01-29 08:01</div>
            <div class="timeline-body"><p>Sorry about that. Edited the original post, it should be <code>set([1])</code>. Indeed:</p>
<pre><code class="language-python">&gt;&gt;&gt; set([1]) == {1}
True
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-01-29 17:25</div>
            <div class="timeline-body"><p>I'm not sure if the scope of the rule should be extended to include <em>composite</em> constructions of singleton collections. There would be a lot of special cases to consider and it's not clear to me how one would draw the line for what should or shouldn't be considered. Already in this case if we add <code>set([1])</code> shouldn't we also add <code>set(&quot;a&quot;)</code> or <code>set((1,))</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @dylwil3 on 2025-01-29 17:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @dylwil3 on 2025-01-29 17:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-01-30 13:32</div>
            <div class="timeline-body"><blockquote>
<p>I'm not sure if the scope of the rule should be extended to include <em>composite</em> constructions of singleton collections. There would be a lot of special cases to consider and it's not clear to me how one would draw the line for what should or shouldn't be considered. Already in this case if we add <code>set([1])</code> shouldn't we also add <code>set(&quot;a&quot;)</code> or <code>set((1,))</code></p>
</blockquote>
<p>@AlexWaygood has convinced me that this extension in scope has more pros than cons - thanks for suggesting it, and sorry for  delaying things a bit!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @dylwil3 on 2025-01-30 13:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @dylwil3 on 2025-01-30 13:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/18035.html">astral-sh/ruff#18035</a> on 2025-05-12 09:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-05-29 18:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:15 UTC
    </footer>
</body>
</html>
