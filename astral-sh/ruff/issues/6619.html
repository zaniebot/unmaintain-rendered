<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature Request: Offer validation of exported items in `__all__` - astral-sh/ruff #6619</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Feature Request: Offer validation of exported items in <code>__all__</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/6619">#6619</a>
        opened by <a href="https://github.com/kkirsche">@kkirsche</a>
        on 2023-08-16 15:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kkirsche">@kkirsche</a> on 2023-08-16 15:20</div>
            <div class="timeline-body"><p>This feature request is to ask if it would be possible to provide optional support for validating that the contents are <code>__all__</code> in an <code>__init__.py</code> file or equivalent are actually imported or cannot be determined due to a <code>from package import *</code> method.</p>
<p>For example:</p>
<pre><code class="language-python">from package.module.client import A
from package.module.enums import B
from package.module.server import C

__all__ = [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;]
</code></pre>
<p>In this example, it would be great if ruff was able to warn the developer that <code>D</code> is not imported and because there are no <code>*</code> imports, it doesn't appear to exist</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2023-08-16 15:24</div>
            <div class="timeline-body"><p>I think this is covered by <a href="https://beta.ruff.rs/docs/rules/undefined-local-with-import-star-usage/">F405</a> and <a href="https://beta.ruff.rs/docs/rules/undefined-export/">F822</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kkirsche">@kkirsche</a> on 2023-08-16 15:26</div>
            <div class="timeline-body"><p>Huh, I haven't triggered those before for it. Let me see if I can trigger those or if I had a misconfigured ruff instance. Thanks for letting me know about those.</p>
<p>I think the reason it usually doesn't trigger tools is that &quot;A&quot;, &quot;B&quot;, &quot;C&quot; are strings and most tools only look for the types because they're parsing the AST rather than the content. I'll give that a shot though!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2023-08-16 16:06</div>
            <div class="timeline-body"><p>FWIW</p>
<pre><code class="language-python"># myfile.py
from package.module.client import A
from package.module.enums import B
from package.module.server import C

__all__ = [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;]
</code></pre>
<pre><code class="language-console">$ ruff check --isolated --select F myfile.py
myfile.py:5:1: F822 Undefined name `D` in `__all__`
Found 1 error.
</code></pre>
<hr />
<pre><code class="language-python"># myfile.py
from package.module.client import A
from package.module.enums import B
from package.module.server import *

__all__ = [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;]
</code></pre>
<pre><code class="language-console">$ ruff check --isolated --select F myfile.py
myfile.py:3:1: F403 `from package.module.server import *` used; unable to detect undefined names
myfile.py:5:1: F405 `C` may be undefined, or defined from star imports
myfile.py:5:1: F405 `D` may be undefined, or defined from star imports
Found 3 errors.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kkirsche">@kkirsche</a> on 2023-08-16 16:21</div>
            <div class="timeline-body"><p>I'll close this then and look into my config. Thank you and sorry for the overhead caused by this issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kkirsche on 2023-08-16 16:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:31:01 UTC
    </footer>
</body>
</html>
