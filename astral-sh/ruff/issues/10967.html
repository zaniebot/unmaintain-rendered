<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`line-to-long` (`E501`) ignore not working as intended - astral-sh/ruff #10967</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>line-to-long</code> (<code>E501</code>) ignore not working as intended</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10967">#10967</a>
        opened by <a href="https://github.com/bedilbek">@bedilbek</a>
        on 2024-04-16 06:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bedilbek">@bedilbek</a></div>
            <div class="timeline-body"><p>before</p>
<pre><code class="language-python">def check():
    assert lists == [  # noqa
        np.array([[996, 631], [992, 632], [983, 637], [978, 638], [974, 640], [968, 643], [963, 647],[958, 649], [955, 651], [949, 657], [946, 659], [944, 660]]),  # noqa
        np.array([[1520, 373], [1512, 379], [1510, 380], [1508, 381], [1496, 385], [1494, 386],[1492, 387], [1489, 389], [1486, 391], [1477, 400], [1474, 402]]),  # noqa
        np.array([[1527, 1045], [1500, 1046], [1492, 1047], [1476, 1051], [1469, 1051], [1460, 1054],[1454, 1055], [1445, 1055], [1439, 1057], [1430, 1060]]),  # noqa
        np.array([[1814, 570], [1812, 571], [1808, 575], [1807, 577], [1807, 589], [1806, 598],[1805, 605], [1804, 611], [1803, 615], [1801, 619], [1800, 623]]),  # noqa
        np.array([[1039, 419], [1034, 420], [1031, 421], [1029, 422], [1027, 423], [1024, 425],[1022, 427], [1020, 431], [1017, 434], [1015, 435], [1007, 435]])  # noqa
    ]  # noqa

</code></pre>
<p>after</p>
<pre><code class="language-python">def check():
    assert lists == [  # noqa
        np.array([
            [996, 631],
            [992, 632],
            [983, 637],
            [978, 638],
            [974, 640],
            [968, 643],
            [963, 647],
            [958, 649],
            [955, 651],
            [949, 657],
            [946, 659],
            [944, 660],
        ]),  # noqa
        np.array([
            [1520, 373],
            [1512, 379],
            [1510, 380],
            [1508, 381],
            [1496, 385],
            [1494, 386],
            [1492, 387],
            [1489, 389],
            [1486, 391],
            [1477, 400],
            [1474, 402],
        ]),  # noqa
        np.array([
            [1527, 1045],
            [1500, 1046],
            [1492, 1047],
            [1476, 1051],
            [1469, 1051],
            [1460, 1054],
            [1454, 1055],
            [1445, 1055],
            [1439, 1057],
            [1430, 1060],
        ]),  # noqa
        np.array([
            [1814, 570],
            [1812, 571],
            [1808, 575],
            [1807, 577],
            [1807, 589],
            [1806, 598],
            [1805, 605],
            [1804, 611],
            [1803, 615],
            [1801, 619],
            [1800, 623],
        ]),  # noqa
        np.array([
            [1039, 419],
            [1034, 420],
            [1031, 421],
            [1029, 422],
            [1027, 423],
            [1024, 425],
            [1022, 427],
            [1020, 431],
            [1017, 434],
            [1015, 435],
            [1007, 435],
        ]),  # noqa
    ]  # noqa

</code></pre>
<p><a href="https://play.ruff.rs/6d2bf2d2-0606-407c-a84c-8d671ea20427">Playground</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-04-16 06:28</div>
            <div class="timeline-body"><p>The formatter uses <code>fmt: off</code> and <code>fmt: skip</code> suppression comments to disable formatting of a line.</p>
<pre><code class="language-python">def check():
    assert lists == [ 
        np.array([[996, 631], [992, 632], [983, 637], [978, 638], [974, 640], [968, 643], [963, 647],[958, 649], [955, 651], [949, 657], [946, 659], [944, 660]]),  # noqa: E501
        np.array([[1520, 373], [1512, 379], [1510, 380], [1508, 381], [1496, 385], [1494, 386],[1492, 387], [1489, 389], [1486, 391], [1477, 400], [1474, 402]]),  # noqa: E501
        np.array([[1527, 1045], [1500, 1046], [1492, 1047], [1476, 1051], [1469, 1051], [1460, 1054],[1454, 1055], [1445, 1055], [1439, 1057], [1430, 1060]]),  # noqa: E501
        np.array([[1814, 570], [1812, 571], [1808, 575], [1807, 577], [1807, 589], [1806, 598],[1805, 605], [1804, 611], [1803, 615], [1801, 619], [1800, 623]]),  # noqa: E501
        np.array([[1039, 419], [1034, 420], [1031, 421], [1029, 422], [1027, 423], [1024, 425],[1022, 427], [1020, 431], [1017, 434], [1015, 435], [1007, 435]])  # noqa: E501
    ]  # fmt: skip 
</code></pre>
<p>https://play.ruff.rs/64b8c543-5fa7-4aa2-a80c-8e18fb0a2aad</p>
<p>This should work. It's a bit annoying that you have to repeat noqa: 501 on every line. But unfortunately,</p>
<pre><code class="language-python">def check():
    assert lists == [ 
        np.array([[996, 631], [992, 632], [983, 637], [978, 638], [974, 640], [968, 643], [963, 647],[958, 649], [955, 651], [949, 657], [946, 659], [944, 660]]),
        np.array([[1520, 373], [1512, 379], [1510, 380], [1508, 381], [1496, 385], [1494, 386],[1492, 387], [1489, 389], [1486, 391], [1477, 400], [1474, 402]]),
        np.array([[1527, 1045], [1500, 1046], [1492, 1047], [1476, 1051], [1469, 1051], [1460, 1054],[1454, 1055], [1445, 1055], [1439, 1057], [1430, 1060]]),
        np.array([[1814, 570], [1812, 571], [1808, 575], [1807, 577], [1807, 589], [1806, 598],[1805, 605], [1804, 611], [1803, 615], [1801, 619], [1800, 623]]),
        np.array([[1039, 419], [1034, 420], [1031, 421], [1029, 422], [1027, 423], [1024, 425],[1022, 427], [1020, 431], [1017, 434], [1015, 435], [1007, 435]])
    ]  # fmt: skip # noqa: 501
</code></pre>
<p>doesn't work</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-04-16 06:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bedilbek">@bedilbek</a> on 2024-04-16 08:04</div>
            <div class="timeline-body"><p>@MichaReiser,</p>
<pre><code class="language-python"># fmt: off
...
# fmt: on
</code></pre>
<p>It actually works, there was a problem of integrating ruff formatter notation into Pycharm IDE formatter. I found a workaround. Thanks anyway</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @bedilbek on 2024-04-16 08:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:50:05 UTC
    </footer>
</body>
</html>
