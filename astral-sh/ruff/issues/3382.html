<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ruff `&gt;=0.0.252` as pycharm File Watcher - astral-sh/ruff #3382</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ruff `&gt;=0.0.252` as pycharm File Watcher</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/3382">#3382</a>
        opened by <a href="https://github.com/FieryDruid">@FieryDruid</a>
        on 2023-03-07 11:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/FieryDruid">@FieryDruid</a> on 2023-03-07 11:29</div>
            <div class="timeline-body"><p>I tried to set up ruff launch in File Watcher. This worked fine on ruff versions prior to <code>0.0.252</code> (found out by iterating through versions), but in versions <code>&gt;=0.0.252</code> when running File Watcher, my IDE highlights errors momentarily instead of permanently displaying them. On versions <code>&lt;=0.0.251</code>, everything works correctly, when a file is changed, the File Watcher is launched, the IDE highlights errors and the highlighting does not disappear until the error is fixed</p>
<p>Maybe someone can tell me what could be the problem? I did not see any &quot;breaking&quot; changes in the changelogs of versions <code>0.0.252 - 0.0.254</code>, I noticed similar behavior when updating from <code>0.0.247</code> to the current <code>0.0.254</code>, the configs did not change, as did the File Watcher settings. Perhaps this is some kind of my local problem, but for some reason I observe different behavior on the old and new versions. Due to this, I thought it might have something to do with changes in versions <code>&gt;=0.0.252</code>.</p>
<p>I check on the simplest example - the type of quotes used in strings (in pyproject.toml <code>inline-quotes</code> set as <code>single</code>):</p>
<pre><code class="language-python">test = &quot;hello world&quot;
</code></pre>
<ul>
<li><p><strong>File Watcher settings</strong>:</p>
<p><img src="https://user-images.githubusercontent.com/36041629/223405884-bf10e477-5dee-485e-96ad-6addaf4817f1.png" alt="image" /></p>
<ul>
<li><code>File type</code> - <code>python</code></li>
<li><code>Scope</code> - <code>Project Files</code></li>
<li><code>Program</code> - <code>$PyInterpreterDirectory$/ruff</code></li>
<li><code>Arguments</code> - <code>$FilePath$</code></li>
<li><code>Working directory</code> - <code>$ProjectFileDir$</code></li>
</ul>
</li>
<li><p><strong>ruff version</strong> - <code>0.0.254</code></p>
</li>
<li><p><strong>ruff settings</strong>:</p>
<pre><code class="language-toml">[tool.ruff]
line-length = 120
select = [&quot;ALL&quot;]
target-version = &quot;py37&quot;

[tool.ruff.flake8-quotes]
docstring-quotes = &quot;double&quot;
inline-quotes = &quot;single&quot;
multiline-quotes = &quot;double&quot;
</code></pre>
</li>
</ul>
<p>Short videos with showing problem. There are no errors when launching in the console (I tried to enable displaying the console when starting File Watcher), all tested versions (<code>0.0.247</code>, <code>0.0.251-0.0.254</code>) give the same list of remarks</p>
<p>On versions <code>&gt;=0.0.252</code>:</p>
<p>https://user-images.githubusercontent.com/36041629/223407218-7938ff1a-9763-46f3-b1cd-a9977d982055.mp4</p>
<hr />
<p>On versions <code>&lt;=0.0.251</code></p>
<p>https://user-images.githubusercontent.com/36041629/223406994-3d499d70-13fd-4686-bf4d-b8d82702fb4b.mp4</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-08 20:49</div>
            <div class="timeline-body"><p>Thank you for the clear issue. It's not immediately obvious to me what's going on, but first step is I need to find a few mins to try and repro on my end.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-08 22:00</div>
            <div class="timeline-body"><p>I see the same behavior.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-08 22:04</div>
            <div class="timeline-body"><p>This was somehow caused by #3104.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-08 22:18</div>
            <div class="timeline-body"><p>I don't quite understand what's going on, but if you change arguments to <code>$FilePath$ --no-cache</code> -- at least on my end, that seems to fix it. (Caching here is unnecessary anyways, since you're running on-change, though it's still a &quot;bug&quot; of course.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2023-03-08 22:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-08 22:18</div>
            <div class="timeline-body"><p>Do you mind trying that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-03-08 22:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FieryDruid">@FieryDruid</a> on 2023-03-09 06:28</div>
            <div class="timeline-body"><p>Yes, works correctly with <code>--no-cache</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-10 02:56</div>
            <div class="timeline-body"><p>I'm going to mark this as fixed due to a viable workaround. If we start seeing this in other integrations, I'll re-open and try to understand what's going on.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-03-10 02:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:49 UTC
    </footer>
</body>
</html>
