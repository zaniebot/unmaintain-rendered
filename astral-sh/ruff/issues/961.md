```yaml
number: 961
title: "Support for multi-line tables in `pyproject.toml`"
type: issue
state: closed
author: patrick91
labels: []
assignees: []
created_at: 2022-11-29T12:56:43Z
updated_at: 2023-03-02T14:43:25Z
url: https://github.com/astral-sh/ruff/issues/961
synced_at: 2026-01-10T01:56:44Z
```

# Support for multi-line tables in `pyproject.toml`

---

_Issue opened by @patrick91 on 2022-11-29 12:56_

I do have a few per-file ignores in my project[1]. Do you think it is possible to add support for multi-line tables?

This works:

```
[tool.ruff]
line-length = 89
per-file-ignores = {"tests/federation/printer/*" = ["E501"], "tests/test_printer/test_basic.py" = ["E501"], "tests/pyright/test_federation.py" = ["E501"], "tests/test_printer/test_schema_directives.py" = ["E501"]}
```

This does not:

```
[tool.ruff]
line-length = 89
per-file-ignores = {
  "tests/federation/printer/*" = ["E501"], 
  "tests/test_printer/test_basic.py" = ["E501"], 
  "tests/pyright/test_federation.py" = ["E501"], 
  "tests/test_printer/test_schema_directives.py" = ["E501"]
}
```

Error:

```
error expected a table key, found a newline at line 196 column 21
```

I get the same error in VS Code: 

<img width="733" alt="CleanShot 2022-11-29 at 12 54 13@2x" src="https://user-images.githubusercontent.com/667029/204534442-85b0c67d-a73e-4edc-a5da-94190965c61f.png">

My understanding is that multi-line tables are supported by TOML: https://github.com/toml-lang/toml/pull/904

but it's a relatively new feature :)

Anyway, I'm fine with having the ignores on one line, it's not a big deal, I opened the issue just in case it is easy to implement and for others that might stumble on the same problem :)

[1] https://github.com/strawberry-graphql/strawberry/pull/2367/files#diff-50c86b7ed8ac2cf95bd48334961bf0530cdc77b5a56f852c5c61b89d735fd711R196

---

_Comment by @sondr3 on 2022-11-29 13:26_

I'm not an expert in TOML and how tables work, but I ran into this problem in a project too. You can use the following syntax for this at the moment:

```toml
[tool.ruff.per-file-ignores]
"tests/federation/printer/*" = ["E501"]
"tests/test_printer/test_basic.py" = ["E501"]
"tests/pyright/test_federation.py" = ["E501"]
"tests/test_printer/test_schema_directives.py" = ["E501"]
```

It doesn't look to me like the PR your linked has been published under a new TOML version, so for now the spec doesn't allow these kinds of tables.

---

_Comment by @patrick91 on 2022-11-29 15:10_

> I'm not an expert in TOML and how tables work, but I ran into this problem in a project too. You can use the following syntax for this at the moment:
> 
> ```toml
> [tool.ruff.per-file-ignores]
> "tests/federation/printer/*" = ["E501"]
> "tests/test_printer/test_basic.py" = ["E501"]
> "tests/pyright/test_federation.py" = ["E501"]
> "tests/test_printer/test_schema_directives.py" = ["E501"]
> ```

ah! great suggestion!

 
> It doesn't look to me like the PR your linked has been published under a new TOML version, so for now the spec doesn't allow these kinds of tables.

didn't notice that! thanks for checking ðŸ˜Š

I'll close the issue for now then!



---

_Closed by @patrick91 on 2022-11-29 15:10_

---

_Comment by @paddyroddy on 2023-03-02 14:43_

It ain't pretty, but I like one section per tool. The following works, which is good enough for me.
```
[tool.ruff]
per-file-ignores = {"btrack/models.py" = [
    "UP006",
    "UP007",
], "btrack/config.py" = [
    "UP006",
    "UP007",
]}
```

---
