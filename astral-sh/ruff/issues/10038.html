<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>(üêû) blank-line-with-whitespace (W293) fix is highly unsafe - astral-sh/ruff #10038</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>(üêû) blank-line-with-whitespace (W293) fix is highly unsafe</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10038">#10038</a>
        opened by <a href="https://github.com/KotlinIsland">@KotlinIsland</a>
        on 2024-02-19 05:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2024-02-19 05:59</div>
            <div class="timeline-body"><pre><code class="language-py">def test_something():
    assert foo() == &quot;&quot;&quot;\
assert [1, 2, 3] == [1, 4, 3]
  
  At index 1 diff: 2 != 4
  Use -v to get more diff&quot;&quot;&quot;
</code></pre>
<p>Here, the white space on line 2 of the expected value is intentional, yet <code>ruff check --fix</code> deletes it without question.</p>
<p>Or is this actually a bug, and it shouldn't be applying to strings at all?</p>
<h1>Workaround</h1>
<p>Disable this rule and use <code>ruff format</code> instead, as it doesn't modify the content of strings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-19 07:19</div>
            <div class="timeline-body"><p>I think that rule shouldn't apply to strings, or if it does, it should be marked as unsafe.</p>
<p>We generally recommend the use of the formatter over style related lint rules if you use the formatter anyway (avoids running unnecessary rules )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MichaReiser on 2024-02-19 07:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by @MichaReiser on 2024-02-19 07:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-02-19 07:21</div>
            <div class="timeline-body"><p>It might be an actual bug because we do mark it as unsafe inside a multiline string:</p>
<p>https://github.com/astral-sh/ruff/blob/3209b8545fa749c3c9dd9d37d6931d0f2ccdc26c/crates/ruff_linter/src/rules/pycodestyle/rules/trailing_whitespace.rs#L105-L113</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-02-19 11:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:32:51 UTC
    </footer>
</body>
</html>
