<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`Pyflakes`] `F541` fix changes behavior if the string becomes a docstring - astral-sh/ruff #18807</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>Pyflakes</code>] <code>F541</code> fix changes behavior if the string becomes a docstring</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18807">#18807</a>
        opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a>
        on 2025-06-19 23:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a></div>
            <div class="timeline-body">Summary
<p>If the string <a href="https://docs.astral.sh/ruff/rules/f-string-missing-placeholders/#f-string-missing-placeholders-f541">f-string-missing-placeholders (F541)</a> is targeting is in a position where it would become a docstring, it can change behavior. It should probably be marked unsafe or not apply in this case.
<a href="https://play.ruff.rs/1a928179-19c9-4a39-9649-a911adb054cf">playground</a></p>
<pre><code>PS ~\Desktop\New_folder\ruff&gt;Get-Content issue.py
</code></pre>
<pre><code>f&quot;Hello, world!&quot;
print(__doc__)
</code></pre>
<pre><code>PS ~\Desktop\New_folder\ruff&gt;py issue.py
</code></pre>
<pre><code>None
</code></pre>
<pre><code>PS ~\Desktop\New_folder\ruff&gt;uvx ruff check issue.py --isolated --select F
</code></pre>
<pre><code>issue.py:1:1: F541 [*] f-string without any placeholders
  |
1 | f&quot;Hello, world!&quot;
  | ^^^^^^^^^^^^^^^^ F541
2 | print(__doc__)
  |
  = help: Remove extraneous `f` prefix

Found 1 error.
[*] 1 fixable with the `--fix` option.
</code></pre>
<pre><code>PS ~\Desktop\New_folder\ruff&gt;uvx ruff check issue.py --isolated --select F --fix
</code></pre>
<pre><code>Found 1 error (1 fixed, 0 remaining).
</code></pre>
<pre><code>PS ~\Desktop\New_folder\ruff&gt;Get-Content issue.py
</code></pre>
<pre><code>&quot;Hello, world!&quot;
print(__doc__)
</code></pre>
<pre><code>PS ~\Desktop\New_folder\ruff&gt;py issue.py
</code></pre>
<pre><code>Hello, world!
</code></pre>
Version
<p>ruff 0.12.0 (87f0feb 2025-06-17) + playground</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-20 06:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-20 06:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-20 06:59</div>
            <div class="timeline-body"><p>Thanks. I think we shouldn&#x27;t provide a fix in this (rare) case</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:07 UTC
    </footer>
</body>
</html>
