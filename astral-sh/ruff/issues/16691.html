<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[new-rule] Private module entities - astral-sh/ruff #16691</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[new-rule] Private module entities</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/16691">#16691</a>
        opened by <a href="https://github.com/danmur97">@danmur97</a>
        on 2025-03-12 19:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/danmur97">@danmur97</a></div>
            <div class="timeline-body">Summary
Description
<ul>
<li>Almost any entity that is private (underscore prefixed) and is imported from a module should be denied
e.g. <code>from foo import _foo_function, _FooClass, _FOO_CONSTANT  # denied</code></li>
<li>This should not apply to modules themselves because a private module should be importable from its direct parent.
e.g. <code>from . import _direct_child_module   # allowed</code></li>
<li>Ensuring correct imports over modules is out of the scope of this issue.
e.g. <code>from .foo import _internal_module   # allowed but denied by other rule</code></li>
</ul>
Motivation
<p>Underscore prefix on names commonly means private/internal definitions that are not intended to be used outside.
This is widely known for members of a class and enforced by the <a href="https://docs.astral.sh/ruff/rules/private-member-access/#private-member-access-slf001">SLF001</a> lint rule. However, this private convention is not enforced at module level.</p>
<p>Both modules and classes can be used to group entities. Constants, variables, functions, and other classes can be defined within a module, some of which can also be private. The lack of a private-module-entity-access lint rule forces to replace a module with a wrapper class to enforce the private convention.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-12 20:34</div>
            <div class="timeline-body"><p>Does the <a href="https://docs.astral.sh/ruff/preview/">preview</a> rule <a href="https://docs.astral.sh/ruff/rules/import-private-name/#import-private-name-plc2701"><code>import-private-name</code></a> (<code>PLC2701</code>) do what you want?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danmur97">@danmur97</a> on 2025-03-12 22:30</div>
            <div class="timeline-body"><p>Testing the PLC2701 rule, I only got <code>Private name import &#x27;_foo&#x27; from external module &#x27;foo&#x27;</code> that only checks for illegal imports, taking <code>foo</code> as an external package.</p>
<p>The rule has to be adjusted or extended by this one to also check internal importations.
Also, by the description, it seems that all private entities are denied, when modules should be allowed (even if private).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-12 23:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2025-03-13 03:03</div>
            <div class="timeline-body"><blockquote>
<p>Also, by the description, it seems that all private entities are denied, when modules should be allowed (even if private).</p>
</blockquote>
<p>I just happened to opened an issue for <code>PLC2701</code> flagging first-party private modules: <a href="https://github.com/astral-sh/ruff/issues/16694">astral-sh/ruff#16694</a></p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:39 UTC
    </footer>
</body>
</html>
