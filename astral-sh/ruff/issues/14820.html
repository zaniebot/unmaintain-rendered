<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avoid checking for problems in VSCODE interactive - astral-sh/ruff #14820</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Avoid checking for problems in VSCODE interactive</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/14820">#14820</a>
        opened by <a href="https://github.com/arccarlinbr">@arccarlinbr</a>
        on 2024-12-06 15:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/arccarlinbr">@arccarlinbr</a> on 2024-12-06 15:31</div>
            <div class="timeline-body"><p>It looks like this</p>
<pre><code>[{
	&quot;resource&quot;: &quot;/Interactive-1.interactive&quot;,
	&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#3&quot;,
	&quot;severity&quot;: 8,
	&quot;message&quot;: &quot;SyntaxError: Expected `except` or `finally` after `try` block&quot;,
	&quot;source&quot;: &quot;Ruff&quot;,
	&quot;startLineNumber&quot;: 1,
	&quot;startColumn&quot;: 1,
	&quot;endLineNumber&quot;: 1,
	&quot;endColumn&quot;: 7
},{
	&quot;resource&quot;: &quot;/Interactive-1.interactive&quot;,
	&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#3&quot;,
	&quot;severity&quot;: 8,
	&quot;message&quot;: &quot;SyntaxError: Expected ',', found name&quot;,
	&quot;source&quot;: &quot;Ruff&quot;,
	&quot;startLineNumber&quot;: 1,
	&quot;startColumn&quot;: 27,
	&quot;endLineNumber&quot;: 1,
	&quot;endColumn&quot;: 45
},{
	&quot;resource&quot;: &quot;/Interactive-1.interactive&quot;,
	&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#3&quot;,
	&quot;severity&quot;: 8,
	&quot;message&quot;: &quot;SyntaxError: Expected ',', found string&quot;,
	&quot;source&quot;: &quot;Ruff&quot;,
	&quot;startLineNumber&quot;: 1,
	&quot;startColumn&quot;: 45,
	&quot;endLineNumber&quot;: 1,
	&quot;endColumn&quot;: 89
},{
	&quot;resource&quot;: &quot;/Interactive-1.interactive&quot;,
	&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#3&quot;,
	&quot;code&quot;: {
		&quot;value&quot;: &quot;F821&quot;,
		&quot;target&quot;: {
			&quot;$mid&quot;: 1,
			&quot;path&quot;: &quot;/ruff/rules/undefined-name&quot;,
			&quot;scheme&quot;: &quot;https&quot;,
			&quot;authority&quot;: &quot;docs.astral.sh&quot;
		}
	},
	&quot;severity&quot;: 8,
	&quot;message&quot;: &quot;Undefined name `con`&quot;,
	&quot;source&quot;: &quot;Ruff&quot;,
	&quot;startLineNumber&quot;: 1,
	&quot;startColumn&quot;: 1,
	&quot;endLineNumber&quot;: 1,
	&quot;endColumn&quot;: 4
},{
	&quot;resource&quot;: &quot;/Interactive-1.interactive&quot;,
	&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#3&quot;,
	&quot;code&quot;: {
		&quot;value&quot;: &quot;F821&quot;,
		&quot;target&quot;: {
			&quot;$mid&quot;: 1,
			&quot;path&quot;: &quot;/ruff/rules/undefined-name&quot;,
			&quot;scheme&quot;: &quot;https&quot;,
			&quot;authority&quot;: &quot;docs.astral.sh&quot;
		}
	},
	&quot;severity&quot;: 8,
	&quot;message&quot;: &quot;Undefined name `carteira`&quot;,
	&quot;source&quot;: &quot;Ruff&quot;,
	&quot;startLineNumber&quot;: 1,
	&quot;startColumn&quot;: 65,
	&quot;endLineNumber&quot;: 1,
	&quot;endColumn&quot;: 73
},{
	&quot;resource&quot;: &quot;/Interactive-1.interactive&quot;,
	&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#3&quot;,
	&quot;code&quot;: {
		&quot;value&quot;: &quot;F821&quot;,
		&quot;target&quot;: {
			&quot;$mid&quot;: 1,
			&quot;path&quot;: &quot;/ruff/rules/undefined-name&quot;,
			&quot;scheme&quot;: &quot;https&quot;,
			&quot;authority&quot;: &quot;docs.astral.sh&quot;
		}
	},
	&quot;severity&quot;: 8,
	&quot;message&quot;: &quot;Undefined name `safra`&quot;,
	&quot;source&quot;: &quot;Ruff&quot;,
	&quot;startLineNumber&quot;: 1,
	&quot;startColumn&quot;: 76,
	&quot;endLineNumber&quot;: 1,
	&quot;endColumn&quot;: 81
},{
	&quot;resource&quot;: &quot;/Interactive-1.interactive&quot;,
	&quot;owner&quot;: &quot;_generated_diagnostic_collection_name_#3&quot;,
	&quot;code&quot;: {
		&quot;value&quot;: &quot;F821&quot;,
		&quot;target&quot;: {
			&quot;$mid&quot;: 1,
			&quot;path&quot;: &quot;/ruff/rules/undefined-name&quot;,
			&quot;scheme&quot;: &quot;https&quot;,
			&quot;authority&quot;: &quot;docs.astral.sh&quot;
		}
	},
	&quot;severity&quot;: 8,
	&quot;message&quot;: &quot;Undefined name `con`&quot;,
	&quot;source&quot;: &quot;Ruff&quot;,
	&quot;startLineNumber&quot;: 1,
	&quot;startColumn&quot;: 1,
	&quot;endLineNumber&quot;: 1,
	&quot;endColumn&quot;: 4
}]

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-06 16:30</div>
            <div class="timeline-body"><p>I'm not sure I understand what you're asking for. Could you share some more details?</p>
<p>Do you want Ruff to stop checking the <code>/Interactive-1.interactive</code> file? What kind of file is it? Is it a notebook? Any chance that you specified the language Python in VS Code?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-12-06 16:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @MichaReiser on 2024-12-06 16:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arccarlinbr">@arccarlinbr</a> on 2024-12-06 19:39</div>
            <div class="timeline-body"><p>Yes, interactive1 is an interactive notebook on vscode that I run using Run in interactive Window &gt; Run Selection/ Line in interactive Window</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-07 13:17</div>
            <div class="timeline-body"><p>I don't think the extension has a dedicated setting for this. Maybe we should consider adding one (CC: @dhruvmanila).</p>
<p>For now, you'd have to create <code> ruff.toml</code> and set <code>extend-exclude = [&quot;*.ipynb&quot;]</code> as described in the <a href="https://astral.sh/blog/ruff-v0.6.0#jupyter-notebooks-are-now-linted-and-formatted-by-default">0.6 announcement blog post</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> removed by @MichaReiser on 2024-12-07 13:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-12-09 08:08</div>
            <div class="timeline-body"><blockquote>
<p>It looks like this</p>
</blockquote>
<p>Can you tell me where do you get this output from? I don't really see any diagnostics surfaced by Ruff in the interactive window:</p>
<p><img src="https://github.com/user-attachments/assets/e7473739-f516-43b7-8fa6-aa9b0d6b6751" alt="Image" /></p>
<p>Additionally, it seems that Ruff is already ignoring those files?</p>
<pre><code>2024-12-09 13:37:14.574 [info] [Trace - 1:37:14 PM]   12.583897833s DEBUG      ruff:main ruff_server::resolve: Ignored path as it's not in the inclusion set: /Interactive-1.interactive
</code></pre>
<blockquote>
<p>I don't think the extension has a dedicated setting for this. Maybe we should consider adding one (CC: <a href="https://github.com/dhruvmanila"><img alt="" width="16" height="16" src="https://avatars.githubusercontent.com/u/67177269?s=64&amp;u=3f6384e9bb2b4338388f8729ce4820e080607ebb&amp;v=4">@dhruvmanila</a>).</p>
</blockquote>
<p>Are you referring to a setting to explicitly disable linting and formatting Jupyter Notebooks in VS Code ?</p>
<blockquote>
<p>For now, you'd have to create <code> ruff.toml</code> and set <code>extend-exclude = [&quot;*.ipynb&quot;]</code> as described in the <a href="https://astral.sh/blog/ruff-v0.6.0#jupyter-notebooks-are-now-linted-and-formatted-by-default">0.6 announcement blog post</a></p>
</blockquote>
<p>I don't think this will work because the interactive file doesn't have a <code>.ipynb</code> extension.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14759.html">astral-sh/ruff#14759</a> on 2024-12-09 08:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arccarlinbr">@arccarlinbr</a> on 2024-12-09 13:12</div>
            <div class="timeline-body"><p>It is not a jupyter notebook, is is just an interactive window that <code>spawns</code> when you click run in interactive window, I think vscode behind the screens create a temporary python file</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arccarlinbr">@arccarlinbr</a> on 2024-12-09 14:11</div>
            <div class="timeline-body"><p>I am on a company pc so I can't post the pictures from vscode directly but here it is <img src="https://i.imghippo.com/files/LoJ7489To.png" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-12-09 16:56</div>
            <div class="timeline-body"><p>Just to confirm that it's this command (Jupyter: Run current file in interactive window) that you're running, right?</p>
<p><img src="https://github.com/user-attachments/assets/600b6c42-3d2c-49ac-969c-e83a1d373fbf" alt="Image" /></p>
<p>I'll explore a bit more to see if I can get Ruff to pick the file up.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arccarlinbr">@arccarlinbr</a> on 2024-12-09 18:59</div>
            <div class="timeline-body"><p>I dont think so, I am using F9</p>
<p><img src="https://i.imghippo.com/files/xR8250Fwk.png" alt="image" /></p>
<p>which in ctrl+shift+p looks like</p>
<p><img src="https://i.imghippo.com/files/JR7913TQ.png" alt="run_in_interactive" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-12-10 04:35</div>
            <div class="timeline-body"><p>Thanks, but the &quot;Run selection/line in interactive window&quot; doesn't give me any warnings either :(</p>
<p>I at least see the diagnostics from Pylance but not from Ruff:</p>
<p><img src="https://github.com/user-attachments/assets/fcff9c23-1f4c-453b-a0d4-91771d337687" alt="Image" /></p>
<p>When I click on the diagnostics from Pylance, it opens up an empty &quot;Interactive-1.interactive.py&quot; file which tells me that they might be &quot;copying&quot; the code into a temporary file and then running it.</p>
<p>I'm still not seeing the diagnostics from &quot;Interactive-1.interactive&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @MichaReiser on 2024-12-10 07:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-01-25 10:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lanikeha">@Lanikeha</a> on 2025-01-27 22:33</div>
            <div class="timeline-body"><p>I am not sure if there is any new information below, but you can run any python file in jupyter interactive windows. This is the setting:</p>
<p><img src="https://github.com/user-attachments/assets/0c433730-ce83-4045-947e-a3b717d79508" alt="Image" /></p>
<p>When I do that, I get tons or errors from code that is copied into execution to the interactive windows. When that happens, Ruff is unusable due to all kind of highlighted &quot;problems&quot; that don't exist in the original .py source file (just in the interactive window).</p>
<p><img src="https://github.com/user-attachments/assets/780fe291-22f6-44f7-bead-d5cfe8e60a55" alt="Image" /></p>
<p>To reproduce:</p>
<ol>
<li>install Jypyter extentions</li>
<li>activate &quot;Execute Selection&quot; option as on screenshot above</li>
<li>open any .py source file and run it in the interactive window by selecting code you want to run (best to select all code) and hitting Shift + Enter</li>
<li>The &quot;Interactive — youfile.py&quot; tab should appear with script output (this one looks like the notebook, has cells with source code and output cells)</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arccarlinbr">@arccarlinbr</a> on 2025-01-28 12:34</div>
            <div class="timeline-body"><p>Exactly, this shouldn't be a closed issue, my vscode had many extensions when I executed my code, the inability to reproduce it was my fault, but the issue highlighted with pylance wasn't the one I mentioned on text, even though it was also on the pictures</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-29 10:48</div>
            <div class="timeline-body"><blockquote>
<p>To reproduce:</p>
<ol>
<li>install Jypyter extentions</li>
<li>activate &quot;Execute Selection&quot; option as on screenshot above</li>
<li>open any .py source file and run it in the interactive window by selecting code you want to run (best to select all code) and hitting Shift + Enter</li>
<li>The &quot;Interactive — youfile.py&quot; tab should appear with script output (this one looks like the notebook, has cells with source code and output cells)</li>
</ol>
</blockquote>
<p>Thanks for providing these steps but unfortunately I'm still not seeing the behavior that you're expecting. Can you provide a screen recording of the same like I've below?</p>
<p>https://github.com/user-attachments/assets/b8e06c14-7902-4922-8d47-73e66621a7ab</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lanikeha">@Lanikeha</a> on 2025-01-29 11:05</div>
            <div class="timeline-body"><p>There you go. The difference is that in your example Ruff does not evaluate contents of &quot;Interactive&quot; tab. In my case it does (so every problem is reported twice and does not dissapear from Interactive file even after was corected in .py source file).</p>
<p>I am not able to upload file, hence the link to my google drive:
https://drive.google.com/file/d/1NTtMwWYYibwvpy1vYrkjrff12kO3WxQs/view?usp=sharing</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-01-29 11:10</div>
            <div class="timeline-body"><p>Do you have any other VS Code settings that might be relevant here? Which OS are you on?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Lanikeha">@Lanikeha</a> on 2025-01-29 11:26</div>
            <div class="timeline-body"><blockquote>
<p>Do you have any other VS Code settings that might be relevant here? Which OS are you on?</p>
</blockquote>
<p>I don't know what to identify as unusual, here are my settings:</p>
<p><a href="https://github.com/user-attachments/files/18586660/settings.json">settings.json</a></p>
<p>Windows 11 Pro, 23H2. compile 22631.4317, Windows Feature Experience Pack 1000.22700.1041.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-11 10:17</div>
            <div class="timeline-body"><blockquote>
<p>There you go. The difference is that in your example Ruff does not evaluate contents of &quot;Interactive&quot; tab. In my case it does (so every problem is reported twice and does not dissapear from Interactive file even after was corected in .py source file).</p>
</blockquote>
<p>I'm not sure what does &quot;evaluate&quot; mean here, do you mind expanding on that?</p>
<p>I saw your video and that does seem unfortunate that it happens, it could be specific to Windows although not sure without being able to reproduce the issue.</p>
<p>Do you see this issue in other extensions like flake8, pylint, etc.?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @MichaReiser on 2025-02-11 10:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arccarlinbr">@arccarlinbr</a> on 2025-02-12 14:25</div>
            <div class="timeline-body"><p>Pylance used to have this same problem, but they appear to have fixed it, maybe the same &quot;fix&quot; could be applied here? https://github.com/microsoft/pylance-release/issues/6617</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/contang0">@contang0</a> on 2025-02-28 10:16</div>
            <div class="timeline-body"><p>Also interested. It makes no sense at all to lint the interactive window because it is not a part of the project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/b-a0">@b-a0</a> on 2025-03-18 21:44</div>
            <div class="timeline-body"><p>I'm also running into this issue (on Windows) and found that I can work around this by running <code># ruff: noqa</code> in the interactive window. Ruff then ignores all of Interactive window contents as described in the docs on <a href="https://docs.astral.sh/ruff/linter/#error-suppression">error suppression</a>.</p>
<p>I tried setting that as one of the items in VS code settings <code>&quot;jupyter.runStartupCommands&quot;</code>, but that didn't work unfortunately, so for now I will have to type this in manually once per window to suppress Ruff warnings for interactive windows.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-03-21 04:27</div>
            <div class="timeline-body"><p>Hmm, my guess is that this seems specific to Windows. I'll try to look at the Pylance issue to see if anything obvious jumps out but anyone else is welcomed to try to debug it as well. I don't have a working Windows machine :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../astral-sh/ruff-vscode/issues/748.html">astral-sh/ruff-vscode#748</a> on 2025-05-05 14:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rio-raimundo">@rio-raimundo</a> on 2025-05-24 10:26</div>
            <div class="timeline-body"><p>Just wanted to say that I also experience this issue, and am also on a Windows PC.</p>
<p>However, it seems like putting the following into a pyproject.toml file removes the linting for the interactive terminal:</p>
<pre><code class="language-toml">[tool.ruff.lint.per-file-ignores]
&quot;*.interactive&quot; = [&quot;ALL&quot;]
</code></pre>
<p>Presumably this would work in a ruff.toml too but I haven't tested it.</p>
<p>However, other strategies like ruff.exclude (in both pyproject.toml and directly in the VSCode settings do not work:</p>
<pre><code class="language-toml">[tool.ruff]
exclude = [&quot;*.interactive&quot;]
</code></pre>
<pre><code class="language-json">&quot;ruff.exclude&quot;: [
     &quot;**/*.interactive&quot;
]
</code></pre>
<p>Using the 'force-exclude' flag doesn't seem to save these.</p>
<p>Very new to ruff so I was just messing around from the docs and I'm sure there's lots more I haven't tried, but hopefully this will be helpful:)</p>
<p>I'd still love to see a setting in VSCODE (or just ignore interactive terminals by default) so that I don't have to add this line to every project:) Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/valentinetech">@valentinetech</a> on 2025-05-31 15:30</div>
            <div class="timeline-body"><p>Same issue using interactive window same issue with vscode, cursor, mac and windows.</p>
<p>Can be reproducted 100% of time clicking <code>Run Below</code> when you have .py file put in cell chunks and interactive mode turned on.</p>
<p>Example:</p>
<pre><code># %%
code

# %%
more code

# %%
more code
</code></pre>
<p>Getting annoying error: Ruff encountered a problem. Check the logs for more details.</p>
<p><code>2025-05-31 18:25:17.406351000  WARN No settings available for untitled:/Interactive-1.interactive - falling back to default setting</code></p>
<p>Would be nice option to permanently turn off this error atleast</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vfmax397">@vfmax397</a> on 2025-06-07 08:06</div>
            <div class="timeline-body"><p>Same issue when running code in interactive window, but i found the reason:</p>
<p>when using jupyter interactive, Ruff didn't follow the 【pyproject.toml】setting under your workspace
but the default config file under the 【C:\Users\Administrator\AppData\Roaming\ruff 】 if it exists</p>
<p>so what need to do:
create a file 【C:\Users\Administrator\AppData\Roaming\ruff\pyproject.toml】 and edit:</p>
<p>'''
[tool.ruff]
select = [&quot;FLY&quot;]         # at least 1 rule, shortest rule
ignore = [&quot;FLY002&quot;]   # ignore it
'''</p>
<p>and keep your own projectpy.toml under your workspace for your vscode</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-06-23 11:35</div>
            <div class="timeline-body"><p>Can someone who's facing this issue provide the extension and server logs? You can find the instructions here: https://github.com/astral-sh/ruff-vscode#troubleshooting.</p>
<p>Use the following settings:</p>
<pre><code class="language-json">{
  &quot;ruff.trace.server&quot;: &quot;verbose&quot;,
  &quot;ruff.logLevel&quot;: &quot;debug&quot;
}
</code></pre>
<p>And, provide the logs messages that are under the &quot;Ruff&quot;, &quot;Ruff Language Server&quot;, and &quot;Ruff Language Server Trace&quot; output channel (Command Palette &gt; Output: Show Output Channels):</p>
<p>https://github.com/user-attachments/assets/9f6f67f0-ea83-4cc8-ae75-ad695fe82315</p>
<p>As this is specific to Windows, I'm guessing it might be related to https://github.com/astral-sh/ruff/pull/18544 but I can't confirm as I don't have a Windows machine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-23 12:25</div>
            <div class="timeline-body"><p>Here the logs from my windows machine. <code>create.py</code> is the original python file from where I open the interactive window.</p>
<pre><code>2025-06-23 14:23:57.155846600  INFO main ruff_server::session::index: Registering workspace: c:\Users\Micha\astral\test
2025-06-23 14:23:57.156251500 DEBUG ruff:main notification{method=&quot;textDocument/didOpen&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:57.156470800 DEBUG ruff:main notification{method=&quot;notebookDocument/didOpen&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:57.156499800 DEBUG ruff:main notification{method=&quot;notebookDocument/didOpen&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:57.156510700 DEBUG ruff:main notification{method=&quot;notebookDocument/didOpen&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:57.156455700 DEBUG ruff:worker:0 request{id=1 method=&quot;textDocument/diagnostic&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:57.156565400 DEBUG ruff:worker:0 request{id=1 method=&quot;textDocument/diagnostic&quot;}: ruff_server::resolve: Included path via `include`: c:\Users\Micha\astral\test\create.py
2025-06-23 14:23:57.157480100 DEBUG     ruff:main client_response{id=0 method=&quot;client/registerCapability&quot;}: ruff_server::session::client: enter
2025-06-23 14:23:57.157505600  INFO     ruff:main client_response{id=0 method=&quot;client/registerCapability&quot;}: ruff_server::server::main_loop: Configuration file watcher successfully registered
2025-06-23 14:23:57.157524500 TRACE     ruff:main ruff_server::server::main_loop: method=&quot;textDocument/diagnostic&quot; response.id=1 duration=1.16ms
2025-06-23 14:23:57.157548200 DEBUG ruff:worker:1 request{id=2 method=&quot;textDocument/codeAction&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:57.157709900 TRACE     ruff:main ruff_server::server::main_loop: method=&quot;textDocument/codeAction&quot; response.id=2 duration=276.00µs
2025-06-23 14:23:57.487445300 DEBUG ruff:worker:2 request{id=3 method=&quot;textDocument/codeAction&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:57.487638400 TRACE     ruff:main ruff_server::server::main_loop: method=&quot;textDocument/codeAction&quot; response.id=3 duration=316.70µs
2025-06-23 14:23:57.573940600 DEBUG ruff:worker:3 request{id=4 method=&quot;textDocument/codeAction&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:57.574141900 TRACE     ruff:main ruff_server::server::main_loop: method=&quot;textDocument/codeAction&quot; response.id=4 duration=311.80µs
2025-06-23 14:23:58.037476200 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:58.037519400 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.037527500 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.039213800 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:58.039241700 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.039247900 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.050830200 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:58.050858400 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.050867000 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.051612800 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:58.051632200 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.051639300 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.052370600 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:58.052385000 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.052390400 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.061283400 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:58.061310900 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.061317000 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.062200400 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::server::api: enter
2025-06-23 14:23:58.062216700 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:23:58.062222200 DEBUG     ruff:main notification{method=&quot;notebookDocument/didChange&quot;}: ruff_server::session::index: Falling back to configuration of the only active workspace for the new document 'untitled:/Interactive-1.interactive'.
2025-06-23 14:24:18.386307500 DEBUG ruff:worker:0 request{id=5 method=&quot;textDocument/codeAction&quot;}: ruff_server::server::api: enter
2025-06-23 14:24:18.386416200 TRACE     ruff:main ruff_server::server::main_loop: method=&quot;textDocument/codeAction&quot; response.id=5 duration=192.50µs
</code></pre>
<p>I can see Ruff diagnostics when expanding the code. Although I think seeing diagnostics doesn't feel that wrong to me unless <code>.interactive</code> is explicitly excluded (which I haven't in this testing but maybe I should have?). I've to run now. I can to some more testing when I'm back (or tomorrow).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-23 14:07</div>
            <div class="timeline-body"><p>IMO, the current behavior does make sense. Especially when opting into the exerimental behavior to use the notebook editor for interactive windows (where you can edit the code).</p>
<p>But I can also understand that the diagnostics can be noisy or undesired and it's not clear why setting <code>exclude</code> doesn't work on Windows (I've to debug). However, I do think that adding a toggle option to disable diagnostics in interactive windows is more a Jupyter feature than something we should add to Ruff. I suggest that someone opens an issue upstream.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-23 14:19</div>
            <div class="timeline-body"><p>The reasons why the exclude don't work on windows is because we use <code>file_path</code> here instead of <code>virtual_path</code>.</p>
<p>https://github.com/astral-sh/ruff/blob/10a1d9f01e899201c8d37d29071fe68752d09544/crates/ruff_server/src/lint.rs#L74</p>
<p>but also skip the exclude check entirely if the file has no <code>file_path</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-06-23 14:29</div>
            <div class="timeline-body"><blockquote>
<p>But I can also understand that the diagnostics can be noisy or undesired and it's not clear why setting <code>exclude</code> doesn't work on Windows (I've to debug). However, I do think that adding a toggle option to disable diagnostics in interactive windows is more a Jupyter feature than something we should add to Ruff. I suggest that someone opens an issue upstream.</p>
</blockquote>
<p>Thank you!</p>
<p>Yeah, I think that makes sense. There's https://github.com/microsoft/vscode-jupyter/issues/8289 which is already closed but I couldn't find the mentioned <code>&quot;python.pylanceLspNotebooksEnabled&quot;</code> option nor any PR that closes that issue. Then, there's this Pylance issue (https://github.com/microsoft/pylance-release/issues/6617) that's open which is related to this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-23 14:34</div>
            <div class="timeline-body"><p>Oh right, I forgot about those issues. I feel like implementing this on the LSP side is &quot;hard&quot;, unless there's a way for us to know which cells are read-only (and even then, maybe another notebook feature has read-only cells but wants to show diagnostics?).</p>
<p>Either way. I think fixing exclude here would offer a work around to users</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/18910.html">astral-sh/ruff#18910</a> on 2025-06-24 09:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-06-27 03:28</div>
            <div class="timeline-body"><p>Hi all, we've released a new Ruff version (<code>0.12.1</code>) that fixes the issue where adding the <code>*.interactive</code> path to <code>exclude</code> option wasn't working on Windows as reported in https://github.com/astral-sh/ruff/issues/14820#issuecomment-2906758898. That should be fixed, it would be great if someone in this thread could test it out!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> removed by @dhruvmanila on 2025-06-27 03:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arccarlinbr">@arccarlinbr</a> on 2025-06-27 22:27</div>
            <div class="timeline-body"><p>I checked it, unfortunately Pylance is now once again bugged lol, but Ruff is good to go.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arccarlinbr">@arccarlinbr</a> on 2025-06-27 22:28</div>
            <div class="timeline-body"><p>Looks fixed to me</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @arccarlinbr on 2025-06-27 22:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @dhruvmanila on 2025-06-30 14:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @dhruvmanila on 2025-06-30 14:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @dhruvmanila on 2025-06-30 14:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "How to avoid checking for problems in VSCODE interactive" to "Avoid checking for problems in VSCODE interactive" by @dhruvmanila on 2025-06-30 14:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/19995.html">astral-sh/ruff#19995</a> on 2025-08-19 21:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:14 UTC
    </footer>
</body>
</html>
