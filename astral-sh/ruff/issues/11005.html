<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>f strings with `=` don't get formatted - astral-sh/ruff #11005</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>f strings with `=` don't get formatted</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/11005">#11005</a>
        opened by <a href="https://github.com/DetachHead">@DetachHead</a>
        on 2024-04-18 00:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/DetachHead">@DetachHead</a> on 2024-04-18 00:59</div>
            <div class="timeline-body"><h1>before</h1>
<pre><code class="language-py">a = 1
f&quot;{ a   =  }&quot;
f&quot;{ a   }&quot;
</code></pre>
<h1>after</h1>
<pre><code class="language-py">a = 1
f&quot;{ a   =  }&quot;
f&quot;{a}&quot;
</code></pre>
<p><a href="https://play.ruff.rs/ee8c1c05-db9e-41e4-8ad6-7dc96248ebb7">playground</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @charliermarsh on 2024-04-18 01:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-18 01:26</div>
            <div class="timeline-body"><p>I think there is a reason for this, maybe that those are debug representations and they must be verbatim? @dhruvmanila would know.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DetachHead">@DetachHead</a> on 2024-04-18 01:54</div>
            <div class="timeline-body"><p>oh i didn't realize the whitespace is included in the output</p>
<pre><code>&gt;&gt;&gt; f&quot;{1   =  }&quot;  
'1   =  1'
</code></pre>
<p>in that case, maybe it can be a lint rule instead so people can decide for themselves whether they want to enforce a consistent formatting for these</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-04-18 02:34</div>
            <div class="timeline-body"><p>Yeah, so as you've noticed whitespaces are preserved for debug expressions which means if the formatter removed them, it will actually change the code output. This is why we avoid doing that.</p>
<p>I don't know if it can be a lint rule as we can't infer if the user intended to put the whitespaces there or not.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-04-19 12:25</div>
            <div class="timeline-body"><p>I'll close this issue as it's working as expected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2024-04-19 12:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:52 UTC
    </footer>
</body>
</html>
