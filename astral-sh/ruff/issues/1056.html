<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[feature-request] Special case E721 (use isinstance instead of type comparison) for `type(None)` - astral-sh/ruff #1056</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[feature-request] Special case E721 (use isinstance instead of type comparison) for <code>type(None)</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1056">#1056</a>
        opened by <a href="https://github.com/smackesey">@smackesey</a>
        on 2022-12-05 12:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/smackesey">@smackesey</a></div>
            <div class="timeline-body"><p>Comparison to <code>type(None)</code> occasionally comes up in our codebase:</p>
<pre><code>if context.dagster_type.typing_type == type(None):
    return None
</code></pre>
<p>This raises a ruff/flake8 error: <code>E721 Do not compare types, use isinstance()</code>.</p>
<p>IMO this rule should not apply for comparisons to <code>type(None)</code>, since the &quot;correct&quot; form implied by the rule looks very odd:</p>
<pre><code>if isinstance(None, context.dagster_type.typing_type):
    return None
</code></pre>
<p>I think this weirdness is unique to <code>type(None)</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Special case E721 for `type(None)`&quot; to &quot;Special case E721 (use isinstance instead of type comparison) for `type(None)`&quot; by <a href="https://github.com/smackesey">@smackesey</a> on 2022-12-05 12:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-05 14:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Special case E721 (use isinstance instead of type comparison) for `type(None)`&quot; to &quot;[feature-request] Special case E721 (use isinstance instead of type comparison) for `type(None)`&quot; by <a href="https://github.com/smackesey">@smackesey</a> on 2022-12-05 14:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-24 09:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:27 UTC
    </footer>
</body>
</html>
