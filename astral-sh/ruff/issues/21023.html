<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISC001 panic: begin &lt;= end (1 &lt;= 0) when slicing `'` - astral-sh/ruff #21023</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>ISC001 panic: begin &lt;= end (1 &lt;= 0) when slicing `'`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/21023">#21023</a>
        opened by <a href="https://github.com/correctmost">@correctmost</a>
        on 2025-10-21 18:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/correctmost">@correctmost</a> on 2025-10-21 18:01</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><code>ruff check --select=ISC001 s.py</code> panics with the following code:</p>
<p><strong>s.py</strong></p>
<pre><code class="language-python">'' '
</code></pre>
<p>Output:</p>
<pre><code>panic: Panicked at crates/ruff_linter/src/rules/flake8_implicit_str_concat/rules/implicit.rs:200:25 when checking `/tmp/ruff/s.py`: `begin &lt;= end (1 &lt;= 0) when slicing `'``
--&gt; s.py:1:1
</code></pre>
<p>Version info:</p>
<ul>
<li>Python 3.13.7 on Arch Linux</li>
</ul>
<h3>Version</h3>
<p>ruff 0.14.1</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-21 18:56</div>
            <div class="timeline-body"><p>Thank you for the report and such a minimal example!</p>
<p>This bisects to #20848, but I'm a bit surprised that we run any rules when there's a parse error:</p>
<pre><code>&gt; uvx ruff@0.14.1 check - &lt;&lt;&lt;&quot;'' '&quot;
invalid-syntax: missing closing quote in string literal
 --&gt; -:1:4
  |
1 | '' '
  |    ^
  |

Found 1 error.
</code></pre>
<p>But I guess we only skip the AST-based checks instead of token-based checks like ISC001.</p>
<p>https://github.com/astral-sh/ruff/blob/e18ead10e16e2945bd81330e4732a372321a802a/crates/ruff_linter/src/linter.rs#L192-L193</p>
<p>Maybe we need to skip these too? Otherwise it seems like there could be a lot of surprising errors like this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-10-21 18:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TaKO8Ki">@TaKO8Ki</a> on 2025-10-21 20:53</div>
            <div class="timeline-body"><p>I'll take this one.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-10-22 06:15</div>
            <div class="timeline-body"><p>Yeah, I suspected that this one is on me when I saw the error message.</p>
<blockquote>
<p>Maybe we need to skip these too? Otherwise it seems like there could be a lot of surprising errors like this.</p>
</blockquote>
<p>Our long-term goal is to do the opposite. Run all checks (maybe with fixes disabled) when there are syntax errors. One motivation for this is that it's very annoying when lints &quot;flicker&quot; as you type because they disappear and reappear, even in places that are entirely unrelated to the changed code.</p>
<blockquote>
<p>I'll take this one.</p>
</blockquote>
<p>Thank you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/21034.html">astral-sh/ruff#21034</a> on 2025-10-22 18:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-10-28 19:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
