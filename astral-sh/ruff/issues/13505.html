<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature request: Make unknown rule code in &quot;ignore&quot; setting a warning, not an error - astral-sh/ruff #13505</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Feature request: Make unknown rule code in &quot;ignore&quot; setting a warning, not an error</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13505">#13505</a>
        opened by <a href="https://github.com/Avasam">@Avasam</a>
        on 2024-09-24 15:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Avasam">@Avasam</a></div>
            <div class="timeline-body">

What happens currently
<p>At the moment, ignoring a rule code that Ruff doesn&#x27;t know about in the <code>ignore</code> setting will cause an error:
For example using <code>ruff==0.5.6</code>:</p>
<pre><code>[lint]
select = [&quot;ALL&quot;]
ignore = [
  # ...
  &quot;DOC201&quot;, # docstring-missing-returns
  &quot;DOC402&quot;, # docstring-missing-yields
  &quot;DOC501&quot;, # docstring-missing-exception
]
</code></pre>
<p>Results in:</p>
<pre><code>ruff failed
  Cause: Failed to parse [...]]\ruff.toml
  Cause: TOML parse error at line 17, column 1
   |
17 | [lint]
   | ^^^^^^
Unknown rule selector: `DOC402`
</code></pre>
What I&#x27;d like to see
<p>I&#x27;d like such errors, for <code>ignore</code> specifically, to be warnings instead</p>
Why ?
<p>For shared configurations. Not completely failing on unknown ignored error codes allows the same configuration to be valid for a wider range of Ruff versions, reducing maintenance and increasing compatibility on the configuration side. Whether it&#x27;s because the consumer has updated to a new Ruff version that removed that rule, or because they&#x27;re still behind but the config disabled a rule they don&#x27;t have access to yet.</p>
<p>Whilst rn shared configs are mostly done through copy-and-paste (https://github.com/BesLogic/shared-configs/blob/main/ruff.toml) or some sort of git management (https://github.com/jaraco/skeleton/blob/main/ruff.toml). This will become especially relevant with <a href="https://github.com/astral-sh/ruff/issues/12352">astral-sh/ruff#12352</a></p>
Why only <code>ignore</code> ?
<p>This request opens the question: why not do the same for rule selection or settings? Because those convey an explicit desire for the code to conform to those rules and configurations. Ignoring a rule, whether it exists or not, results in the same lint validation.</p>
Prior art
<p>ESLint works very similarly to what I&#x27;m asking, with the only difference that it completely ignores the disabled rule, instead of warning.
The &quot;enable all rules + disable what we don&#x27;t want or need&quot; pattern has allowed me with https://www.npmjs.com/package/eslint-config-beslogic to support a wide range of peer dependencies whilst staying mostly up to date with new rules (until I need to reconfigure a non-disabled newly added rule, but with ESLint&#x27;s JS-based configs I have ways to work around that too with version-detection, although that&#x27;s not relevant here)</p>
<p>Flake8 only errors-out on rule codes that are completely impossible. For example ignoring <code>AAAA</code> results in <code>ValueError: Error code &#x27;AAAA&#x27; supplied to &#x27;extend-ignore&#x27; option does not match &#x27;^[A-Z]{1,3}[0-9]{0,3}$&#x27;</code></p>
<p>Ruff is already able to output warnings, for example when linting non-UTF-8 files:</p>
<pre><code>warning: Failed to lint Pythonwin\pywin\test\_dbgscript.py: stream did not contain valid UTF-8
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">linter</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-24 16:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule-selection</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-24 16:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-24 16:26</div>
            <div class="timeline-body"><p>This seems reasonable to me if @charliermarsh agrees.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-19 16:08</div>
            <div class="timeline-body"><p>This will ship as part of Ruff 0.8</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-19 16:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;v0.8&quot; by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-11-19 16:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:58 UTC
    </footer>
</body>
</html>
