<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[red-knot] Adapt the `fuzz-parser` script to fuzz red-knot too - astral-sh/ruff #14157</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[red-knot] Adapt the <code>fuzz-parser</code> script to fuzz red-knot too</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14157">#14157</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2024-11-07 15:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-11-07 15:08</div>
            <div class="timeline-body"><p>We have a script here which proved very useful in discovering issues with our parser during the rewrite of the parser: https://github.com/astral-sh/ruff/tree/main/scripts/fuzz-parser. It generates random source-code snippets for Python that are guaranteed to be syntactically valid.</p>
<p>I think it wouldn't be too hard to adapt the script so that it can also run red-knot instead of just running the parser over the randomly generated source code. It might be quite useful for finding red-knot panics.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by @AlexWaygood on 2024-11-07 15:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">red-knot</span> added by @AlexWaygood on 2024-11-07 15:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @AlexWaygood on 2024-11-07 15:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/connorskees">@connorskees</a> on 2024-11-24 20:06</div>
            <div class="timeline-body"><p>As part of this work, would it make sense to add support to red-knot for type checking files read from stdin? Right now red-knot assumes that it's parsing workspaces from the file system, and doesn't seem to support ad hoc type checking of individual files. For fuzzing this would be helpful, as it avoids the overhead of reading and writing to the file system in a hot loop.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-24 20:47</div>
            <div class="timeline-body"><blockquote>
<p>As part of this work, would it make sense to add support to red-knot for type-checking files read from stdin?</p>
</blockquote>
<p>Possibly, although I would prefer waiting to add stdin support until we have a clearer picture on how red-knots CLI should look like (should it even support paths)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-11-25 13:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:35:39 UTC
    </footer>
</body>
</html>
