<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a new rule for json.dump VS json.dumps - astral-sh/ruff #18474</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a new rule for json.dump VS json.dumps</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18474">#18474</a>
        opened by <a href="https://github.com/stmlange">@stmlange</a>
        on 2025-06-05 06:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/stmlange">@stmlange</a> on 2025-06-05 06:32</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hello,
first of all - thank you for the amazing ruff linter!</p>
<p>I would kindly request a new rule for &quot;json.dump&quot; as I always happen to confuse it with &quot;json.dumps&quot;.</p>
<p>The key difference is that the dump expects a fp argument while the dump<em>s</em> does not:</p>
<ul>
<li>json.dump(obj, fp) -- https://docs.python.org/3/library/json.html#json.dump</li>
<li>json.dumps(obj) -- https://docs.python.org/3/library/json.html#json.dumps</li>
</ul>
<p>Minimal example:</p>
<pre><code class="language-python">&quot;&quot;&quot;Example that demonstrates an issue with json.dump VS json.dumps.&quot;&quot;&quot;

import json


def main() -&gt; None:
    &quot;&quot;&quot;Execute the main application logic.&quot;&quot;&quot;
    json_result = {&quot;foo&quot;: &quot;bar&quot;}
    json.dump(json_result, indent=4, ensure_ascii=False)


if __name__ == &quot;__main__&quot;:
    main()
</code></pre>
<p>Running the code fails with:</p>
<pre><code>TypeError: dump() missing 1 required positional argument: 'fp'
</code></pre>
<p>Pylint seems to have checks for this:</p>
<pre><code>位 pylint example.py
************* Module example
example.py:11:10: E1120: No value for argument 'fp' in function call (no-value-for-parameter)

位 pylint --version
pylint 3.2.7
astroid 3.2.4
</code></pre>
<p>Ruff does not detect the issue:</p>
<pre><code>位 ruff check --select ALL example.py
[incompatible selected rules warning goes here]
All checks passed!

位 ruff --version
ruff 0.11.12
</code></pre>
<p>Thank you for your time and happy linting :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-05 07:17</div>
            <div class="timeline-body"><p>I think this is something a type checker can catch well and doesn't need to be a specific lint rule.</p>
<p>For example, our in-progress type checker ty catches this: https://play.ty.dev/0a7d986f-9810-48a0-a95a-922f7862af92</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-06-05 07:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-06-05 07:17</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:37:36 UTC
    </footer>
</body>
</html>
