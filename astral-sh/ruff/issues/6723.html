<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formatter: Empty lines in stub files - astral-sh/ruff #6723</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Formatter: Empty lines in stub files</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/6723">#6723</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-08-21 09:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/konstin">@konstin</a></div>
            <div class="timeline-body"><p>When formatting typeshed (<code>cargo run --bin ruff_dev -- format-dev --write typeshed</code>), there is still a big diff with black wrt to empty lines.</p>
<p>E.g. given</p>
<pre><code>class Feature:
    def getMandatoryRelease(self) -&gt; None: ...
    compiler_flag: int

def getMandatoryRelease(self) -&gt; None: ...
compiler_flag: int

if sys.platform != &quot;win32&quot;:
    def can_change_color() -&gt; bool: ...
    # Changed in Python 3.8.8 and 3.9.2
    if sys.version_info &gt;= (3, 8):
        pass

if sys.platform == &quot;win32&quot;:
    class Dummy:
        __new__: None
        __init__: None

    # Actual typename SummaryInformation, not exposed by the implementation
    class _SummaryInformation:
        def GetProperty(self, field: int) -&gt; int | bytes | None: ...
</code></pre>
<p>black will format this as</p>
<pre><code>class Feature:
    def getMandatoryRelease(self) -&gt; None: ...
    compiler_flag: int

def getMandatoryRelease(self) -&gt; None: ...

compiler_flag: int

if sys.platform != &quot;win32&quot;:
    def can_change_color() -&gt; bool: ...
    # Changed in Python 3.8.8 and 3.9.2
    if sys.version_info &gt;= (3, 8):
        pass

if sys.platform == &quot;win32&quot;:
    class Dummy:
        __new__: None
        __init__: None

    # Actual typename SummaryInformation, not exposed by the implementation
    class _SummaryInformation:
        def GetProperty(self, field: int) -&gt; int | bytes | None: ...
</code></pre>
<p>while we format this as</p>
<pre><code>class Feature:
    def getMandatoryRelease(self) -&gt; None: ...

    compiler_flag: int

def getMandatoryRelease(self) -&gt; None: ...

compiler_flag: int

if sys.platform != &quot;win32&quot;:

    def can_change_color() -&gt; bool: ...

    # Changed in Python 3.8.8 and 3.9.2
    if sys.version_info &gt;= (3, 8):
        pass

if sys.platform == &quot;win32&quot;:

    class Dummy:
        __new__: None
        __init__: None

    # Actual typename SummaryInformation, not exposed by the implementation
    class _SummaryInformation:
        def GetProperty(self, field: int) -&gt; int | bytes | None: ...
</code></pre>
<p>The task is to go through the typeshed diff and figure out each empty line rule we&#x27;re still missing. If you implement this you don&#x27;t need to (and probably shouldn&#x27;t) fix everything at once but you can implement any part of it (as long as it doesn&#x27;t decrease the similarity index).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/konstin">@konstin</a> on 2023-08-21 09:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/konstin">@konstin</a> on 2023-08-21 09:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Formatter: Beta&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-08-22 14:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/konstin">@konstin</a> by <a href="https://github.com/konstin">@konstin</a> on 2023-09-06 17:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/konstin">@konstin</a> on 2023-09-11 08:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:41 UTC
    </footer>
</body>
</html>
