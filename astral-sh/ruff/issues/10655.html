<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>isort and ruff behavior mismatch w.r.t. relative imports and `relative-imports-order` option. - astral-sh/ruff #10655</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>isort and ruff behavior mismatch w.r.t. relative imports and <code>relative-imports-order</code> option.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10655">#10655</a>
        opened by <a href="https://github.com/subhamagr">@subhamagr</a>
        on 2024-03-29 10:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/subhamagr">@subhamagr</a></div>
            <div class="timeline-body"><p>I have the following code:</p>
<pre><code># view.py

from .utils import create_question
from django_polls.apps.polls.models import Choice
from .models import Question
from ..models import ABC
</code></pre>
<p>and the following ruff config:</p>
<pre><code>[tool.ruff.lint.isort]
case-sensitive = false
combine-as-imports = true
force-wrap-aliases = true
split-on-trailing-comma = true
default-section = &quot;third-party&quot;
detect-same-package = false
force-single-line = false
force-sort-within-sections = false
from-first = false
lines-between-types = 0
lines-after-imports = 2
extra-standard-library = [&quot;typing_extensions&quot;]
known-first-party = []
known-local-folder = [&quot;django_polls&quot;]
no-lines-before = [&quot;future&quot;, &quot;standard-library&quot;]
order-by-type = false
relative-imports-order = &quot;closest-to-furthest&quot;
section-order = [
    &quot;future&quot;,
    &quot;standard-library&quot;,
    &quot;third-party&quot;,
    &quot;first-party&quot;,
    &quot;local-folder&quot;,
]
</code></pre>
<p>now if I run <code>ruff check . --select I --fix</code>, the fixed code is as follows:</p>
<pre><code>from django_polls.apps.polls.models import Choice
from .models import Question
from .utils import create_question
from ..models import ABC
</code></pre>
<p>but with the following isort config:</p>
<pre><code>[tool.isort]
force_alphabetical_sort_within_sections = true
force_sort_within_sections = false
from_first = false
known_first_party = []
known_local_folder = [&quot;django_polls&quot;]
known_tests = [&quot;tests&quot;]
#line_length = 88
lines_after_imports = 2
lines_between_sections = 1
profile = &quot;black&quot;
reverse_relative = true
sections = [
    &quot;FUTURE&quot;,
    &quot;STDLIB&quot;,
    &quot;THIRDPARTY&quot;,
    &quot;FIRSTPARTY&quot;,
    &quot;LOCALFOLDER&quot;,
]
src_paths = [&quot;src&quot;, &quot;tests&quot;]
</code></pre>
<p>I get the following:</p>
<pre><code>from .models import Question
from .utils import create_question
from ..models import ABC
from django_polls.apps.polls.models import Choice
</code></pre>
<p>I would prefer the output by isort, but I want to understand the behavior mismatch. I would assume that ruff's <code>relative-imports-order = &quot;closest-to-furthest&quot;</code> is equivalent to isort's <code>reverse_relative = true</code>. Please help me out.
Why is the local folder (django_polls) imports treated as closest rather than relative <code>.</code> and <code>..</code> imports?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-03-30 00:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by @charliermarsh on 2024-03-30 01:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-30 01:17</div>
            <div class="timeline-body"><p>We probably just never tested because the &quot;local folder&quot; category typically only include relative imports. I would say our behavior is not quite correct, since the <code>relative-imports-order</code> should only affect relative imports, and not other imports in the &quot;local folder&quot; category.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-03-30 01:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-03-30 02:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-30 02:16</div>
            <div class="timeline-body"><p>Fixed in the next release.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:49:58 UTC
    </footer>
</body>
</html>
