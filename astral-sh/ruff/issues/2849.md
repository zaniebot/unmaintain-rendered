```yaml
number: 2849
title: "noqa: E501 not detected"
type: issue
state: closed
author: spaceone
labels: []
assignees: []
created_at: 2023-02-13T11:12:09Z
updated_at: 2023-02-13T13:45:58Z
url: https://github.com/astral-sh/ruff/issues/2849
synced_at: 2026-01-10T01:56:46Z
```

# noqa: E501 not detected

---

_Issue opened by @spaceone on 2023-02-13 11:12_

```python
    """
     >>> UsernameHandler(20).format_username('Foo[COUNTER2][COUNTER2]')  # noqa: E501 # doctest: +IGNORE_EXCEPTION_DETAIL
    """
```

doesn't ignore `E501`

---

_Comment by @JonathanPlasse on 2023-02-13 11:46_

Is it intentional to have `# noqa: E501` inside the string?
Ruff does not read `noqa` inside strings.
You must place the `noqa` after the string for it to work.
```python
    """
     >>> UsernameHandler(20).format_username('Foo[COUNTER2][COUNTER2]')  # noqa: E501 # doctest: +IGNORE_EXCEPTION_DETAIL
    """  # noqa: E501
```

---

_Comment by @charliermarsh on 2023-02-13 13:39_

That’s correct — we don’t respect noqa comments _inside_ of strings.

---

_Closed by @charliermarsh on 2023-02-13 13:39_

---

_Comment by @spaceone on 2023-02-13 13:45_

OK, feels better. But this was supported by `flake8` and then different with ruff. but `flake8` also support the ruff-noqa variant → switched the code to that.

---

_Referenced in [aws-powertools/powertools-lambda-python#2495](../../aws-powertools/powertools-lambda-python/pulls/2495.md) on 2023-06-18 10:58_

---
