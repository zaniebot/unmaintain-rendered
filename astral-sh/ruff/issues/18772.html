<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[flake8-pytest-style] PT023/PT026 do not check that pytest is pytest - astral-sh/ruff #18772</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[flake8-pytest-style] PT023/PT026 do not check that pytest is pytest</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/18772">#18772</a>
        opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a>
        on 2025-06-18 23:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2025-06-18 23:32</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>From what I can tell,  all <code>PT</code> rules that use <code>pytest.&lt;something&gt;</code> will make sure <code>pytest</code> is from <code>import pytest</code> before running, besides <code>PT023</code> and <code>PT026</code> <a href="https://play.ruff.rs/d1a628c5-32b2-4c76-9d65-95f94109cc53">playground</a></p>
<pre><code>PS ~\Desktop\New_folder&gt;Get-Content issue.py
</code></pre>
<pre><code class="language-py">#import pytest

@pytest.mark.parametrize()
def test_bar(): ...

@pytest.fixture()
def my_fixture(): ...


@pytest.fixture(scope=&quot;function&quot;)
def my_fixture(): ...

# single parameter, always expecting string
@pytest.mark.parametrize((&quot;param&quot;,), [1, 2, 3])
def test_foo(param): ...


# multiple parameters, expecting tuple
@pytest.mark.parametrize([&quot;param1&quot;, &quot;param2&quot;], [(1, 2), (3, 4)])
def test_bar(param1, param2): ...


# multiple parameters, expecting tuple
@pytest.mark.parametrize(&quot;param1,param2&quot;, [(1, 2), (3, 4)])
def test_baz(param1, param2): ...

@pytest.mark.parametrize(&quot;param&quot;, [1, 2, 3])
def test_foo(param): ...


@pytest.mark.parametrize((&quot;param1&quot;, &quot;param2&quot;), [(1, 2), (3, 4)])
def test_bar(param1, param2): ...

@pytest.mark.parametrize(
    (&quot;param1&quot;, &quot;param2&quot;),
    [
        (1, 2),
        (1, 2),
    ],
)
def test_foo(param1, param2): ...

def test_foo():
    if some_condition:
        pytest.fail(&quot;some_condition was True&quot;)
    ...

@pytest.mark.asyncio
@pytest.fixture()
async def my_fixture():
    return 0

@pytest.fixture()
def a():
    pass


@pytest.mark.usefixtures(&quot;a&quot;)
@pytest.fixture()
def b(a):
    pass

@pytest.mark.usefixtures
def test_something(): ...

def test_foo():
    with pytest.warns():
        do_something()

def test_foo():
    with pytest.warns(RuntimeWarning):
        ...

    # empty string is also an error
    with pytest.warns(RuntimeWarning, match=&quot;&quot;):
        ...
def test_foo_warns():
    with pytest.warns(Warning):
        setup()  # False negative if setup triggers a warning but foo does not.
        foo()
</code></pre>
<pre><code>PS ~\Desktop\New_folder&gt;uvx ruff check issue.py --select PT
</code></pre>
<pre><code>issue.py:3:1: PT023 [*] Use `@pytest.mark.parametrize` over `@pytest.mark.parametrize()`
  |
1 | #import pytest
2 |
3 | @pytest.mark.parametrize()
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^ PT023
4 | def test_bar(): ...
  |
  = help: Remove parentheses

issue.py:63:1: PT026 Useless `pytest.mark.usefixtures` without parameters
   |
61 |     pass
62 |
63 | @pytest.mark.usefixtures
   | ^^^^^^^^^^^^^^^^^^^^^^^^ PT026
64 | def test_something(): ...
   |
   = help: Remove `usefixtures` decorator or pass parameters

Found 2 errors.
[*] 1 fixable with the `--fix` option (1 hidden fix can be enabled with the `--unsafe-fixes` option).
</code></pre>
<h3>Version</h3>
<p>ruff 0.12.0 (87f0feb21 2025-06-17) + playground</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-06-18 23:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-06-19 00:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-06-19 00:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/18779.html">astral-sh/ruff#18779</a> on 2025-06-19 02:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-06-19 09:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:55 UTC
    </footer>
</body>
</html>
