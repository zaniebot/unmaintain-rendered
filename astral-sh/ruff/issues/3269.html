<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support rules from flake8-force-keyword-arguments - astral-sh/ruff #3269</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Support rules from flake8-force-keyword-arguments</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/3269">#3269</a>
        opened by <a href="https://github.com/Riezebos">@Riezebos</a>
        on 2023-02-28 08:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Riezebos">@Riezebos</a> on 2023-02-28 08:59</div>
            <div class="timeline-body"><p>Calling a function with a lot of unnamed arguments is a lot less readable than using keyword arguments. These rules enforce keyword arguments if a function has a lot of parameters, which should lead to more readable code. I believe adding them to ruff would be a good idea!</p>
<p>https://github.com/isac322/flake8-force-keyword-arguments</p>
<p>If there is anything I can do for this as a Python dev with practically 0 Rust experience, I would be happy to help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-28 17:09</div>
            <div class="timeline-body"><p>We haven't defined rigorous criteria for including rules in Ruff yet (#2257), but this rule does look a little niche just based on stars and usage, and I think it might be hard to enforce rigorously right now since we can't inspect function signatures across modules. So I'd vote to pass on this one for the moment just given the tradeoff in utility vs. complexity.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">plugin</span> added by @charliermarsh on 2023-02-28 17:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Riezebos">@Riezebos</a> on 2023-03-01 09:29</div>
            <div class="timeline-body"><p>Thanks for the response! I think it would be partially possible with only local information:</p>
<ul>
<li>Rule 1: Flag any function definition that accepts &gt;X positional arguments</li>
<li>Rule 2: Flag any function call that uses &gt;X positional arguments</li>
</ul>
<p>For the first rule I think only local information is needed? An autofix could potentially be provided that adds <code>*, </code> at the start of the parameter definition (and removes any other <code>*,</code> or <code>/,</code> from the definition).</p>
<p>With only local information rule 2 would falsely flag function calls of functions with &gt;X positional-only parameters or with *args. I would personally be fine with manually adding noqa comments there but I can imagine that this disqualifies it.</p>
<p>Would rule 1 be an option?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2023-07-10 01:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/flying-sheep">@flying-sheep</a> on 2023-10-20 12:15</div>
            <div class="timeline-body"><p>@charliermarsh I think you made a mistake when you filed https://github.com/pylint-dev/pylint/issues/8667 and therefore <a href="https://docs.astral.sh/ruff/rules/too-many-arguments/">PLR0913</a>.</p>
<p>It’s <em>much</em> more useful in Python to restrict the number of <em>positional</em> arguments in function definitions.</p>
<p>In response to your change, a rule for only positional arguments has been requested for Pylint for that reason: https://github.com/pylint-dev/pylint/issues/9099</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../scverse/scanpy/pulls/2702.html">scverse/scanpy#2702</a> on 2023-10-20 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/emilte">@emilte</a> on 2024-02-01 19:48</div>
            <div class="timeline-body"><p>I would love this.
I currently have a custom implementation of this in my project with pylint.
I'm considering to replace everything with ruff, but will surely miss this feature.
A star * at the beginning of functions would help immensely :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/flying-sheep">@flying-sheep</a> on 2024-02-02 07:37</div>
            <div class="timeline-body"><p><code>R0917</code> aka “too-many-positional” is implemented in Ruff already.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/emilte">@emilte</a> on 2024-02-02 10:11</div>
            <div class="timeline-body"><p>Aha, that's great, thx!</p>
<p>I struggled a bit to get this working, is there a tiny bug in the documentation?
The example shows <code>max-pos-args</code>, but <code>max-positional-args</code> seems to be the correct key.
https://docs.astral.sh/ruff/settings/#pylint-max-positional-args</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-02-02 11:29</div>
            <div class="timeline-body"><blockquote>
<p>The example shows <code>max-pos-args</code>, but <code>max-positional-args</code> seems to be the correct key.</p>
</blockquote>
<p>Thanks! It must be a typo. Do you want to open a PR fixing the docs? The type is here:</p>
<p>https://github.com/astral-sh/ruff/blob/467c091382fa60243e261417b4620aeca4012bf5/crates/ruff_workspace/src/options.rs#L2766</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/emilte">@emilte</a> on 2024-02-02 20:35</div>
            <div class="timeline-body"><p>Thx for the opportunity.
https://github.com/astral-sh/ruff/pull/9797</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tmke8">@tmke8</a> on 2024-02-05 16:37</div>
            <div class="timeline-body"><p>I think this issue can be closed then, since it's possible to achieve the desired behavior with <code>PLR0917</code> and setting</p>
<pre><code class="language-toml">[tool.ruff.lint.pylint]
max-positional-args = 1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Riezebos on 2024-02-05 19:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jack-mcivor">@jack-mcivor</a> on 2024-02-06 12:04</div>
            <div class="timeline-body"><p>@Riezebos are you sure this is closed?</p>
<blockquote>
<p>Rule 1: Flag any function definition that accepts &gt;X positional arguments
Rule 2: Flag any function call that uses &gt;X positional arguments</p>
</blockquote>
<p>AFAICT PLR0917 checks function definitions only (Rule 1). I don't think a check for function calls exists? (Rule 2)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8382.html">astral-sh/ruff#8382</a> on 2024-02-06 12:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @Riezebos on 2024-02-06 13:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Riezebos">@Riezebos</a> on 2024-02-06 13:25</div>
            <div class="timeline-body"><p>@jack-mcivor you're right, I guess it is partially solved. I am not a contributor, and I am not the only one interested in these rules. So I don't think it is up to me anymore to decide whether this is open or closed.</p>
<ul>
<li>[X] Rule 1: Flag any function definition that accepts &gt;X positional arguments (solved in <a href="https://docs.astral.sh/ruff/rules/too-many-positional/">PLR0917</a>)</li>
<li>[ ] Rule 2: Flag any function call that uses &gt;X positional arguments</li>
</ul>
<p>Just to make the reference circle complete, this topic was also discusses in https://github.com/astral-sh/ruff/discussions/8137</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/uripeled2">@uripeled2</a> on 2024-02-07 12:51</div>
            <div class="timeline-body"><p>I would be very happy to see a rule that flags any function call that uses &gt;X positional arguments</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Andrew-S-Rosen">@Andrew-S-Rosen</a> on 2024-04-15 22:41</div>
            <div class="timeline-body"><p>Related, what would be super useful is some rule that would ensure that arguments are explicitly specified in keyword (rather than positional) format when calling a function that accepts keyword arguments. The purpose here is that if the order or number of arguments in the function signature is ever updated, the user's code would remain unaffected. This would, however, require inspection of each function signature, including those of dependencies.</p>
<p>This might not be viable in the short-term, but I wanted to throw out additional motivation beyond &quot;it just looks nicer.&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andrewemporia">@andrewemporia</a> on 2024-10-30 20:20</div>
            <div class="timeline-body"><p>I would also really like Rule 2 as it makes this much easier to roll out to an existing codebase. If I turn on Rule 1 and someone touches a large file they will have to go add '*' to every large function definition in that file and <strong>then</strong> change every caller of those functions which is a large amount of work. Just requiring function calls to be keyword if passing over a certain number of args is much more palatable to introduce change for a team. And an autofix would be fantastic.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../datahub-project/datahub/pulls/12535.html">datahub-project/datahub#12535</a> on 2025-02-11 17:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/toppk">@toppk</a> on 2025-10-04 19:30</div>
            <div class="timeline-body"><p>While I agree with @andrewemporia that making arguments keyword-only causes a big burden, that's sometimes the correct fix.  I'd like a rule that finds functions that have lots of identically typed keyword paramenters that aren't keyword-only.  that's the mistake I make.</p>
<pre><code class="language-python">def foo(a:int,b:int, data1:dict[str,int]|None=None, data2:dict[str,int]|None=None) -&gt; bool:  ...
</code></pre>
<p>I find too many times i'm calling</p>
<pre><code class="language-python">foo(1,2,{'hi':3})  # data1
</code></pre>
<p>thinking that's <code>data2</code>, and not <code>data1</code>.  in this case the only fix is making data1/data2 kwonly, i.e.</p>
<pre><code class="language-python">def foo(a:int,b:int,*, data1:dict[str,int]|None=None, data2:dict[str,int]|None=None) -&gt; bool:  ...
</code></pre>
<p>so i'd like a rule that isn't about positional, but about similarly typed positional-or-keyword parameters.  once the parameters are keyword-only, my type checker (or runtime :-/ ) will spot that the callers are broken.  it would be incremental by fixing the caller's first before moving to keyword-only, but the proper mechanism for wanting keyword-only is using keyword-only, IMO.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:08 UTC
    </footer>
</body>
</html>
