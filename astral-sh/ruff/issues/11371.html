<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Fix error] PIE804 auto fix does not handle :=  - astral-sh/ruff #11371</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Fix error] PIE804 auto fix does not handle :=</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11371">#11371</a>
        opened by <a href="https://github.com/njharman">@njharman</a>
        on 2024-05-11 17:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/njharman">@njharman</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>I believe the issue is ruff 0.4.4 PIE804 auto fix does not handle := with same name as dict key</p>
<pre><code>        func(
              **{
                  &quot;live&quot;: False,
                  &quot;url_foo&quot;: (url_foo := &quot;http://custom.com&quot;),
                  &quot;url_bar&quot;: (url_bar := &quot;http://bespoke.com&quot;),
              },
          )

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-11 18:21</div>
            <div class="timeline-body"><p>What happens? No fix is offered? The fix is incorrect?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trag1c">@trag1c</a> on 2024-05-11 18:23</div>
            <div class="timeline-body"><p>Seems like Ruff fixes this as</p>
<pre><code class="language-py">func(
      live=False,
      url_foo=url_foo := &quot;http://custom.com&quot;,
      url_bar=url_bar := &quot;http://bespoke.com&quot;,
)
</code></pre>
<p>which is a syntax error</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2024-05-11 18:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by @zanieb on 2024-05-11 18:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/njharman">@njharman</a> on 2024-05-11 18:31</div>
            <div class="timeline-body"><blockquote>
<p>What happens? No fix is offered? The fix is incorrect?</p>
</blockquote>
<p>Ruff fixed, found syntax error then reverted fix (without showing it (or maybe I'm blind?)) and asked me to kindly report it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-11 21:28</div>
            <div class="timeline-body"><p>I think they just need to be parenthesized.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-05-11 21:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-11 22:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:50:15 UTC
    </footer>
</body>
</html>
