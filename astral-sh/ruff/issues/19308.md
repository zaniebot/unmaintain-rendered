```yaml
number: 19308
title: Add formatter-compatible rule to enforce one-arg-per-line + trailing comma when line-length exceeded
type: issue
state: closed
author: zerlok
labels: []
assignees: []
created_at: 2025-07-13T12:51:41Z
updated_at: 2025-07-14T09:20:39Z
url: https://github.com/astral-sh/ruff/issues/19308
synced_at: 2026-01-10T01:56:57Z
```

# Add formatter-compatible rule to enforce one-arg-per-line + trailing comma when line-length exceeded

---

_Issue opened by @zerlok on 2025-07-13 12:51_

### Summary

**Current limitation**:

* Ruff formatter reflows function signatures when line-length is exceeded
* However, it preserves grouped arguments even when broken across lines
* It does **not** insert trailing commas
* `COM812` adds trailing commas only if the layout is already multiline
* One-arg-per-line layout only occurs **after** trailing comma is inserted

This results in a 3-pass cycle to achieve desired layout:

1. Format → break long line
2. Fix → add comma
3. Format → apply one-arg-per-line

**Request**:

Add a rule or formatter enhancement to enforce:

* If function signature exceeds `line-length`

  * Break into multiline
  * Place one argument per line
  * Add trailing comma
* If it does **not** exceed line-length, keep as-is

**Goal**:

Allow this transformation to occur in **one pass**, avoiding chained invocations and repeated file watcher triggers.

**Benefit**:

Cleaner formatting, aligned with Black-like behavior but under Ruff’s control, and better editor automation compatibility.

**Example**:

```python
# Input
def f(a: int, b: int, c: int, d: int, e: int) -> int:
    return a + b + c + d + e

# Desired output
def f(
    a: int,
    b: int,
    c: int,
    d: int,
    e: int,
) -> int:
    return a + b + c + d + e
```

**Related**:

* [https://github.com/astral-sh/ruff/issues/6357](https://github.com/astral-sh/ruff/issues/6357)
* [https://github.com/astral-sh/ruff/issues/10966](https://github.com/astral-sh/ruff/issues/10966)


---

_Closed by @MichaReiser on 2025-07-14 09:20_

---
