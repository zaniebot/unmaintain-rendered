<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add info about used git commit into `ruff --version` if available - astral-sh/ruff #11691</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add info about used git commit into <code>ruff --version</code> if available</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11691">#11691</a>
        opened by <a href="https://github.com/qarmin">@qarmin</a>
        on 2024-06-02 12:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/qarmin">@qarmin</a></div>
            <div class="timeline-body"><p>Currently git version of app, always for <code>ruff --version</code> prints something like</p>
<pre><code>ruff 0.4.7
</code></pre>
<p>I think that here could be added more info like</p>
<ul>
<li>git hash of commit</li>
<li>type of build - custom build, official build, other</li>
<li>build commands</li>
</ul>
<p>e.g.</p>
<pre><code>ruff 0.4.7, abcdef, custom build
ruff 0.4.7, abcdef, from debian repository
ruff 0.4.7, abcdef, official package
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-06-02 13:07</div>
            <div class="timeline-body"><p>Uff, that took me a while to figure out myself. You can use <code>ruff version</code> to get the commit number (doesn&#x27;t work for local builds).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-02 18:01</div>
            <div class="timeline-body"><p>Yeah we added this in <a href="https://github.com/astral-sh/ruff/pull/8034">astral-sh/ruff#8034</a></p>
<p>As mentioned there, we could include this for the <code>-V</code> / <code>--version</code> flag. We didn&#x27;t change it initially to avoid a breaking change for tools that parse the output. I think we should change this to match the <code>uv</code> behavior which is as follows:</p>
<pre><code>❯ uv -V
uv 0.2.3
❯ uv --version
uv 0.2.3 (ce4d862b0 2024-05-24)
❯ uv version
uv 0.2.3 (ce4d862b0 2024-05-24)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-06-03 09:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KangOl">@KangOl</a> on 2024-06-03 16:20</div>
            <div class="timeline-body"><p>I would instead follow the same behavior as python which output the build info when <code>--version</code> (or <code>-V</code>) is provided twice. https://docs.python.org/3/using/cmdline.html#cmdoption-version</p>
<pre><code>❯ python3 --version
Python 3.11.7
❯ python3 --version --version
Python 3.11.7 (main, Dec 18 2023, 10:50:03) [Clang 15.0.0 (clang-1500.1.0.2.5)]
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:54 UTC
    </footer>
</body>
</html>
