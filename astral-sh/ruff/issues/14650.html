<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confusing setting A incompatible with setting B warning - astral-sh/ruff #14650</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Confusing setting A incompatible with setting B warning</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14650">#14650</a>
        opened by <a href="https://github.com/dimaqq">@dimaqq</a>
        on 2024-11-28 01:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dimaqq">@dimaqq</a></div>
            <div class="timeline-body"><pre><code>&gt; uvx ruff -v format --preview tests/unit/test_proxy.py
[2024-11-28][09:57:06][ruff::resolve][DEBUG] Using configuration file (via parent) at: /code/python-libjuju/pyproject.toml
warning: `one-blank-line-before-class` (D203) and `no-blank-line-before-class` (D211) are incompatible. Ignoring `one-blank-line-before-class`.
warning: `multi-line-summary-first-line` (D212) and `multi-line-summary-second-line` (D213) are incompatible. Ignoring `multi-line-summary-second-line`.
[2024-11-28][09:57:06][ruff::commands::format][DEBUG] format_path; path=/code/python-libjuju/tests/unit/test_proxy.py
[2024-11-28][09:57:06][ruff::commands::format][DEBUG] Formatted 1 files in 662.75Âµs
1 file left unchanged
</code></pre>
<p>The thing is, my repo doesn&#x27;t mention any of <code>one-blank-line-before-class</code>, <code>no-blank-line-before-class</code>, D203, D211...</p>
<p>The warnings are gone if I remove the <code>pyproject.toml</code> entirely, or if I remove the &quot;D&quot; from <code>[tool.ruff.lint] select = [...]</code></p>
<p>Could it be that selecting D selects all Dnnn flags and there are incompatible flags in that set?
Could this be improved?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dimaqq">@dimaqq</a> on 2024-11-28 01:06</div>
            <div class="timeline-body"><p>Config: https://github.com/juju/python-libjuju/blob/main/pyproject.toml</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-11-28 05:26</div>
            <div class="timeline-body"><blockquote>
<p>Could it be that selecting D selects all Dnnn flags and there are incompatible flags in that set?</p>
</blockquote>
<p>Yes, that&#x27;s correct. Including &quot;D&quot; selects the entire category which will include all the rules that falls under that category which includes &quot;Dxxx&quot; rule codes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dimaqq">@dimaqq</a> on 2024-11-29 05:07</div>
            <div class="timeline-body"><p>I wish ruff would only include the setting that takes effect out of the two.</p>
<p>In the meantime, is there a syntax to &quot;include all D, but exclude specific D123&quot; ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-11-29 05:25</div>
            <div class="timeline-body"><blockquote>
<p>In the meantime, is there a syntax to &quot;include all D, but exclude specific D123&quot; ?</p>
</blockquote>
<p>Yes, you can use the <a href="https://docs.astral.sh/ruff/settings/#lint_ignore"><code>lint.ignore</code></a> setting for that:</p>
<pre><code>[tool.ruff.lint]
extend-select = [&quot;D&quot;]
ignore = [&quot;D123&quot;]
</code></pre>
<p>Additionally, you might be interested in this list: https://docs.astral.sh/ruff/formatter/#conflicting-lint-rules</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-11-29 08:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2024-11-30 20:55</div>
            <div class="timeline-body"><p>There&#x27;s a few mutually-exclusive conflicting rules (the only ones I can think off are in D, namely D203 vs D211 and D212 vs D213) that would be better off as configs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-30 21:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dimaqq">@dimaqq</a> on 2024-12-01 07:10</div>
            <div class="timeline-body"><p>This is not very... user-friendly, I guess.
In other words this weakens that statement that &quot;ruff is a drop-in replacement for flake8, black, etc.&quot;</p>
<p>I&#x27;m happy to use the work-around, and thank you for the amazing tool!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:03 UTC
    </footer>
</body>
</html>
