<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flag to produce structured output - astral-sh/ruff #181</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Flag to produce structured output</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/181">#181</a>
        opened by <a href="https://github.com/HallerPatrick">@HallerPatrick</a>
        on 2022-09-13 19:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/HallerPatrick">@HallerPatrick</a> on 2022-09-13 19:51</div>
            <div class="timeline-body"><p>Most linters have a flag (pylint: <code>-f</code>) that allows to definition of a structured format in which the listing errors are output. This allows the integration of <code>ruff</code> in editor plugins such as vscode (#118) and neovim.</p>
<p>In the next days I would give it a go and would make a PR for this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-09-13 20:20</div>
            <div class="timeline-body"><p>Yeah happy to support this. Is there a common standard for how the output should be formatted? E.g. is it JSON? Is it expected to follow any specific schema?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2022-09-13 20:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Jackenmen">@Jackenmen</a> on 2022-09-13 23:19</div>
            <div class="timeline-body"><p>I don't know about other tools but GitHub supports single-line (and partially multi-line) regexp matching with their GitHub Actions Problem Matchers:
https://github.com/actions/toolkit/blob/main/docs/problem-matchers.md</p>
<p>This should probably already work fine with ruff as its output is <code>filename:line:column:error message</code> which can be matched easily, assuming that ruff can guarantee that this format will be kept (or if it could give an option that will ensure that this format is always used). For ease of parsing, ruff should probably have some auto-detection of terminal color support which would make it easy to make such problem matchers.</p>
<p>If in the future, you would have something like a severity (warning vs error) similar to i.e. eslint, GitHub's problem matchers supports &quot;warning&quot; and &quot;error&quot; literal strings as severity and shows it accordingly in line annotations.</p>
<p>As an example, pylint gives a few examples of message templates that work well with other tooling:
https://pylint.pycqa.org/en/latest/user_guide/usage/output.html</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/HallerPatrick">@HallerPatrick</a> on 2022-09-14 07:44</div>
            <div class="timeline-body"><blockquote>
<p>Yeah happy to support this. Is there a common standard for how the output should be formatted? E.g. is it JSON? Is it expected to follow any specific schema?</p>
</blockquote>
<p>I don't think there is a universal standard. But, IMO, having the linting errors in a JSON format is a safe bet, as every common language has no problem parsing it. Pylint supports text, json, parseable, colorized and msvs. Every further format can be implemented when there is a demand for it.</p>
<p>@jack1142 This is limited to Github Actions, so in the context of CI/CD? I am not sure if any editor supports regexp matching of output formats for parsing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/185.html">astral-sh/ruff#185</a> on 2022-09-14 12:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/HallerPatrick">@HallerPatrick</a> on 2022-09-14 12:23</div>
            <div class="timeline-body"><p>Opened a PR. I encapsulated the write out logic into a own Printer struct. It is now easy to extend the printer with new formats through the <code>SerializationFormat</code> enum.</p>
<p>One open question is: What is the output if <code>ruff</code> is in watch mode? Should it still output json, if set? For now it just writes to &quot;normal&quot; text to stdout and not json.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-09-14 12:44</div>
            <div class="timeline-body"><p>I think it's fine for ruff to throw a warning when a non-default format is combined with watch mode (and then ignore that format). It's similar behavior to <code>--autofix</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-09-14 14:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/19552.html">astral-sh/ruff#19552</a> on 2025-07-31 19:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:06 UTC
    </footer>
</body>
</html>
