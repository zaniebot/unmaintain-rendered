<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[pydocstyle]: d417 being ignored with convention=google - astral-sh/ruff #16477</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[pydocstyle]: d417 being ignored with convention=google</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/16477">#16477</a>
        opened by <a href="https://github.com/sjhw">@sjhw</a>
        on 2025-03-03 18:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sjhw">@sjhw</a> on 2025-03-03 18:21</div>
            <div class="timeline-body"><p>Hello ruff team! Thank you for making such an incredible tool, I've found my python project management experience has skyrocketed in ease since incorporating this into my organization's main Python repo.</p>
<p>I read from #15065 that <code>convention=google</code> is the only way that D417 is supported, but I have enabled this convention and am still struggling to get the check to work as intended.</p>
<p>I'm a junior dev so this is my first time really diving into Python project management and style enforcement, so it's entirely possible I may just be missing something obvious in the way that the pydocstyle checks are working, or maybe even what D417 truly is, in which case I apologize for the inconvenience and appreciate any insight you could provide. Thank you for your time!</p>
<h2>Summary</h2>
<p>When using Ruff to enforce pydocstyle checks, I cannot get the check to identify that a function has undocumented params. It seems to pass the check no matter what. I hope to use this as a pre-commit check to prevent new code additions from being committed without properly having docstrings with explanations for all function arguments.</p>
<h2>Example</h2>
<p>My <code>pyproject.toml</code> contains the following config:</p>
<pre><code class="language-toml">[tool.ruff]
line-length = 79 # 88
fix = true
show-fixes = true
lint.select = [
    &quot;I&quot;,
    &quot;D&quot;,  # enables pydocstyle checks
]

[tool.ruff.lint.pydocstyle]
convention = &quot;google&quot;
</code></pre>
<p>Here is a module, <code>mystery_module.py</code></p>
<pre><code class="language-python">&quot;&quot;&quot;Test module for ruff pydocstyle checks.&quot;&quot;&quot;


def mystery_function(mystery_int: int):
    &quot;&quot;&quot;Return a mysterious number.&quot;&quot;&quot;
    mystery_int += 1
    return mystery_int

</code></pre>
<p>When checking this module with Ruff, I get the following message in the console:</p>
<pre><code class="language-terminal">&gt; ruff check mystery_module.py 
All checks passed!
</code></pre>
<p>When I delete the docstring in <code>mystery_function</code> altogether, Ruff is correctly able to identify the consequential D103 violation resulting from a public function with a missing docstring:</p>
<pre><code class="language-python">&quot;&quot;&quot;Test module for ruff pydocstyle checks.&quot;&quot;&quot;

import numpy as np


def mystery_function(mystery_int: int):
    mystery_int += 1
    return mystery_int
</code></pre>
<pre><code class="language-terminal">&gt; ruff check mystery_module.py 
mystery_module.py:6:5: D103 Missing docstring in public function
  |
6 | def mystery_function(mystery_int: int):
  |     ^^^^^^^^^^^^^^^^ D103
7 |     mystery_int += 1
8 |     return mystery_int
  |

Found 1 error.
</code></pre>
<p>When running with <code>--isolated</code>, the check correctly identifies unused import Numpy (which I intentionally added to ensure that Ruff is otherwise working as intended)</p>
<pre><code class="language-terminal">&gt; ruff check mystery_module.py --isolated
mystery_module.py:2:17: F401 [*] `numpy` imported but unused
  |
1 | &quot;&quot;&quot;Test module for ruff pydocstyle checks.&quot;&quot;&quot;
2 | import numpy as np
  |                 ^^ F401
  |
  = help: Remove unused import: `numpy`

Found 1 error.
[*] 1 fixable with the `--fix` option.
</code></pre>
<h2>Expected</h2>
<p>Because the function <code>mystery_function</code> uses an argument <code>mystery_int</code> that isn't properly documented, I want Ruff to be able to flag this as a D417 violation and prevent the commit from being made, which isn't happening currently.</p>
<h3>Version</h3>
<p>0.9.9</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">great writeup</span> added by @MichaReiser on 2025-03-04 09:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-03-04 10:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-03-04 10:17</div>
            <div class="timeline-body"><p>Thanks for the kind words and the great write up!</p>
<p><code>D417</code> only flags missing arguments if the docstring has an <code>Args</code> (or <code>Other args</code>, <code>keyword args</code>...) section. It doesn't flag docstrings that have no documented arguments.</p>
<p>I think what you want is the stricter https://github.com/astral-sh/ruff/pull/13280 that flags all functions regardless if they have an <code>Args</code> section or not if any of the parameters are undocumented.</p>
<p>I do think that we could improve our documentation on D417, it took me a while to understand what the issue was</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/16494.html">astral-sh/ruff#16494</a> on 2025-03-04 10:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sjhw">@sjhw</a> on 2025-03-04 14:26</div>
            <div class="timeline-body"><p>Thank you so much for your response Micha! The stricter #13280 is indeed exactly what I was looking for here, it seems I was simply under a misunderstanding as to what <code>D417</code> truly was checking for. Thank you very much!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sjhw on 2025-03-04 14:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:54 UTC
    </footer>
</body>
</html>
