<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow strings to intersperse imports for E402 - astral-sh/ruff #9373</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow strings to intersperse imports for E402</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/9373">#9373</a>
        opened by <a href="https://github.com/XChikuX">@XChikuX</a>
        on 2024-01-03 00:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/XChikuX">@XChikuX</a> on 2024-01-03 00:43</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>My expectations of Ruff (E402) don't match the error it throws</p>
<p>Example: (<strong><em>this should be valid</em></strong>)</p>
<pre><code class="language-py">from io import BytesIO
from typing import (
    AsyncIterable,
    Awaitable,
    Callable,
    Tuple,
    List,
    Dict,
    Union,
    Any,
)

&quot;&quot;&quot;                     STRAWBERRY IMPORTS                            &quot;&quot;&quot;
from fastapi import BackgroundTasks
import strawberry
from strawberry.fastapi import BaseContext
from strawberry.types import Info as _Info
</code></pre>
<p>However I see vscode through E402 errors, for the imports after the comments.</p>
<p>The <a href="https://docs.astral.sh/ruff/rules/module-import-not-at-top-of-file/">Docs</a> don't satisfactorily cover this edge case either.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-03 01:47</div>
            <div class="timeline-body"><p>I believe this is intentional. What's the motivation for using a string rather than a comment in that position?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-01-03 01:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/XChikuX">@XChikuX</a> on 2024-01-03 05:04</div>
            <div class="timeline-body"><p>It helps me differentiate between code sections. I find it very useful when a file starts to get big.</p>
<p>Splitting it into more files causes unnecessary overhead from imports. And I have regular comments in other areas.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trag1c">@trag1c</a> on 2024-01-03 09:03</div>
            <div class="timeline-body"><p>Wouldn't a more visible comment like</p>
<pre><code class="language-py">#########################################################################
###                     STRAWBERRY IMPORTS                            ###
#########################################################################
</code></pre>
<p>suffice?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/XChikuX">@XChikuX</a> on 2024-01-03 17:39</div>
            <div class="timeline-body"><p>Unfortunately no, different comment types have different coloration.</p>
<p>In my vscode &quot;#&quot; type comments are green. And 3 quoted comments like the above mentioned are orange/red.</p>
<p>I personally have a much easier time shifting through my code. When I can sort by color in my brain.</p>
<p>Your argument could follow up by saying, <em>we don't cater to individual preferences</em></p>
<p>However, if I prefer this, I'm sure there are many developers out there who think like I do and just haven't expressed their opinions on github.</p>
<p>Since this change doesn't affect other coders adversely in anyway. I don't see any reason not to implement it unless there is a good reason not to.</p>
<p>I start my day coding with an annoying warning everyday. I'd very much like it to go away.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnslavik">@johnslavik</a> on 2024-01-03 17:51</div>
            <div class="timeline-body"><blockquote>
<p>I start my day coding with an annoying warning everyday. I'd very much like it to go away.</p>
</blockquote>
<p>You can always suppress the warning with <code># noqa: E402</code>.
The practice you've mentioned isn't very common. Triple quoted strings, besides being strings, are primarily meant to serve as a documentation. If the problem is with colors, I would recommend looking for a different theme/tweaking your current one to make it easier for you to work with. I think I had read quite a lot of Python code already and I've never seen someone using strings that way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-03 18:06</div>
            <div class="timeline-body"><p>I'm open to changing if there's additional support for it, so I'll probably leave this open for now. For me it's not quite correct (e.g., arguably misleading since it's not captured as a docstring by Python itself) and not adherent to PEP 8, but not in a way that's hugely critical.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjkuson">@tjkuson</a> on 2024-01-03 18:27</div>
            <div class="timeline-body"><p>If the aim is code separation, I am unclear why that suggests using a string: strings are typically more common and larger than comments. Further, strings are usually just ordinary parts of code implementation, whereas comments are more likely to draw the eye of the reader as something to note. Thus, wouldn't using a comment would be <em>better</em> suited to delineate code sections?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/XChikuX">@XChikuX</a> on 2024-01-04 21:45</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>I start my day coding with an annoying warning everyday. I'd very much like it to go away.</p>
</blockquote>
<p>You can always suppress the warning with <code># noqa: E402</code>. The practice you've mentioned isn't very common. Triple quoted strings, besides being strings, are primarily meant to serve as a documentation. If the problem is with colors, I would recommend looking for a different theme/tweaking your current one to make it easier for you to work with. I think I had read quite a lot of Python code already and I've never seen someone using strings that way.</p>
</blockquote>
<p>I've added a:</p>
<pre><code class="language-config">[tool.ruff.lint.per-file-ignores]
&quot;app/common.py&quot; = [&quot;E402&quot;]
</code></pre>
<p>There was only one file where my imports were a bit harder to manage and needed the separation I'd asked for.</p>
<p>Thank you for the suggestion @bswck</p>
<p>This fits my needs so far. However, I still don't see why E402 needs to cover docstring issues. Perhaps it wasn't considered as a part of the original PEP 8?</p>
<p>@charliermarsh I appreciate you being open to different perspectives. If this has no support for a few months feel free to close it.</p>
<p>PS, I found <a href="https://stackoverflow.com/questions/64428794/flake8-disable-linter-only-for-a-block-of-code">a missing flake8 feature</a>. This could be a missing feature in ruff too (NOTE: <em>I only did a preliminary search of the docs, I could have missed it</em>)</p>
<p>@tjkuson I use comments for very serious portions of code and giving the dev important information and considerations. I try to squeeze in obvious information in <code>log.info</code>'s</p>
<p>Code separation isn't something I consider as serious as logic flows. Do let me know if this is just a subjective opinion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjkuson">@tjkuson</a> on 2024-01-04 23:43</div>
            <div class="timeline-body"><blockquote>
<p>Code separation isn't something I consider as serious as logic flows. Do let me know if this is just a subjective opinion.</p>
</blockquote>
<p>IMO, yeah, this is subjective. I've mostly seen/used code separation to indicate something exceptional to the reader and catch their eye (e.g., because the code is complex or long, so sharp visual markers make it easier to parse).</p>
<p>EDIT: My comment was also less about hierarchy of importance and more distinction; to me, strings look too much like runtime code for it to function well as something that separates code. But my main point here is that I think your style preference is subjective and non-idiomatic.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/XChikuX">@XChikuX</a> on 2024-01-05 00:29</div>
            <div class="timeline-body"><p>@tjkuson This just looks really clean to me. If you prefer something else, power to you</p>
<p><img src="https://github.com/astral-sh/ruff/assets/5894493/0f870cab-1551-4dc7-a5ee-a61ffb0e765e" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnslavik">@johnslavik</a> on 2024-01-05 00:52</div>
            <div class="timeline-body"><blockquote>
<p>@tjkuson This just looks really clean to me. If you prefer something else, power to you</p>
<p><img src="https://private-user-images.githubusercontent.com/5894493/294331419-0f870cab-1551-4dc7-a5ee-a61ffb0e765e.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDQ0MTU3NTAsIm5iZiI6MTcwNDQxNTQ1MCwicGF0aCI6Ii81ODk0NDkzLzI5NDMzMTQxOS0wZjg3MGNhYi0xNTUxLTRkYzctYTVlZS1hNjFmZmIwZTc2NWUucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDEwNSUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAxMDVUMDA0NDEwWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9NGJkODNjYTUwNjFiOWEyOTI2M2U0NzczN2ZiNzJiYWIzZTdjYmRlZDdjNjQxZGZiMjEwMDQwNzEwOGVmNGVmNyZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ.Bf4O51S1PWrl4f_skou0rmZGf-p5lcC9Wlg1AKQoGYs" alt="image" /></p>
</blockquote>
<p>This doesn't follow <a href="https://peps.python.org/pep-0008/#imports">PEP 8</a>.
A standard is a standard.</p>
<p>Of course, your preference is your preference. But for the sake of readability and overall convenience when working with your code, I would recommend sticking to the PEP8 <strong>standard</strong>. Ruff is pretty good at helping in doing that.</p>
<blockquote>
<p>PS, I found <a href="https://stackoverflow.com/questions/64428794/flake8-disable-linter-only-for-a-block-of-code">a missing flake8 feature</a>. This could be a missing feature in ruff too (NOTE: I only did a preliminary search of the docs, I could have missed it)</p>
</blockquote>
<p>This is off-topic. Maybe open a separate issue instead? ;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/XChikuX">@XChikuX</a> on 2024-01-05 02:00</div>
            <div class="timeline-body"><blockquote>
<p>A standard is a standard.</p>
</blockquote>
<p>I question all standards. Always have, always will.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnslavik">@johnslavik</a> on 2024-01-05 02:08</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>A standard is a standard.</p>
</blockquote>
<p>I question all standards. Always have, always will.</p>
</blockquote>
<p>Unlike Ruff :P</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Ruff (E402) bug" to "Allow strings to intersperse imports for E402" by @charliermarsh on 2024-01-05 04:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @charliermarsh on 2024-01-05 04:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2024-01-05 04:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2024-01-05 04:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/XChikuX">@XChikuX</a> on 2024-10-03 09:23</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<blockquote>
<p>I start my day coding with an annoying warning everyday. I'd very much like it to go away.</p>
</blockquote>
<p>You can always suppress the warning with <code># noqa: E402</code>. The practice you've mentioned isn't very common. Triple quoted strings, besides being strings, are primarily meant to serve as a documentation. If the problem is with colors, I would recommend looking for a different theme/tweaking your current one to make it easier for you to work with. I think I had read quite a lot of Python code already and I've never seen someone using strings that way.</p>
</blockquote>
<p>I've added a:</p>
<pre><code class="language-config">[tool.ruff.lint.per-file-ignores]
&quot;app/common.py&quot; = [&quot;E402&quot;]
</code></pre>
<p>There was only one file where my imports were a bit harder to manage and needed the separation I'd asked for.</p>
<p>Thank you for the suggestion @bswck</p>
<p>This fits my needs so far. However, I still don't see why E402 needs to cover docstring issues. Perhaps it wasn't considered as a part of the original PEP 8?</p>
<p>@charliermarsh I appreciate you being open to different perspectives. If this has no support for a few months feel free to close it.</p>
<p>PS, I found <a href="https://stackoverflow.com/questions/64428794/flake8-disable-linter-only-for-a-block-of-code">a missing flake8 feature</a>. This could be a missing feature in ruff too (NOTE: <em>I only did a preliminary search of the docs, I could have missed it</em>)</p>
<p>@tjkuson I use comments for very serious portions of code and giving the dev important information and considerations. I try to squeeze in obvious information in <code>log.info</code>'s</p>
<p>Code separation isn't something I consider as serious as logic flows. Do let me know if this is just a subjective opinion.</p>
</blockquote>
<p>The ignore rule is working quite well for me.</p>
<p>@charliermarsh feel free to close this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-10-07 07:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:11 UTC
    </footer>
</body>
</html>
