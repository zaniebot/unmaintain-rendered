<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Missing syntax error for unparenthesized generator expression in single-argument call - astral-sh/ruff #17867</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Missing syntax error for unparenthesized generator expression in single-argument call</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/17867">#17867</a>
        opened by <a href="https://github.com/ntBre">@ntBre</a>
        on 2025-05-05 18:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ntBre">@ntBre</a> on 2025-05-05 18:48</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>generator expression must be parenthesized</p>
</blockquote>
<p>Regardless of whether there is a trailing comma or not, the exact same AST is generated by ruff for the code (only the ranges are different).
Given this, how do we detect the trailing comma during the semantic syntax error phase?
Should this rather be detected during parsing?
For example, the <code>ast</code> module does not give an AST at all for this:</p>
<pre><code class="language-py">&gt;&gt; import ast; ast.parse(&quot;max(i for i in range(3),)&quot;)
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/usr/lib/python3.11/ast.py&quot;, line 50, in parse
    return compile(source, filename, mode, flags,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;&lt;unknown&gt;&quot;, line 1
    max(i for i in range(3),)
        ^^^^^^^^^^^^^^^^^^^
SyntaxError: Generator expression must be parenthesized
</code></pre>
</blockquote>
<p><em>Originally posted by @abhijeetbodas2001 in <a href="https://github.com/astral-sh/ruff/issues/17412#issuecomment-2851948615">#17412</a></em></p>
<p>This is closely related to #12445, which handled the multiple-argument case, but CPython also raises an error for a single argument.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-05-05 18:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">parser</span> added by @ntBre on 2025-05-05 18:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/abhijeetbodas2001">@abhijeetbodas2001</a> on 2025-05-05 19:12</div>
            <div class="timeline-body"><p>I can take this up, if that's alright.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @abhijeetbodas2001 by @ntBre on 2025-05-05 19:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/17893.html">astral-sh/ruff#17893</a> on 2025-05-06 17:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-05-07 18:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-05-07 18:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:15 UTC
    </footer>
</body>
</html>
