```yaml
number: 2743
title: "CLI: --color=auto|no|yes"
type: issue
state: closed
author: spaceone
labels: []
assignees: []
created_at: 2023-02-10T21:27:47Z
updated_at: 2023-07-06T13:01:41Z
url: https://github.com/astral-sh/ruff/issues/2743
synced_at: 2026-01-10T01:56:46Z
```

# CLI: --color=auto|no|yes

---

_Issue opened by @spaceone on 2023-02-10 21:27_

The CLI should support `--color=auto|no|yes` where `auto` detects if the output is redirected into a pipe/file and prevent colorizing output in that case.

---

_Comment by @charliermarsh on 2023-02-10 21:29_

We already support this via environment variables which I think is sufficient personally (see #1830).

---

_Comment by @charliermarsh on 2023-02-10 21:30_

Any reason the env vars wouldn't work for you?

---

_Comment by @spaceone on 2023-02-10 21:31_

env vars are OK. I didn't find them by grepping through the source code as it's probably in a external lib. maybe just document it in README.md

---

_Comment by @spaceone on 2023-02-10 21:36_

ah, and detecting if the stdout filedescriptor is being redirected to a file should disable the color output as well imho. most unix tools do that.

---

_Comment by @charliermarsh on 2023-02-10 21:37_

Does the external lib not handle that?

---

_Comment by @spaceone on 2023-02-10 21:38_

i somehow don't get it working. even `NO_COLOR=1` prints ANSI escape sequences.

---

_Comment by @spaceone on 2023-02-10 21:39_

for `--show-source` it seems `NO_COLOR=1` has no effect. but for the regular output it has. That's the bug.

---

_Comment by @charliermarsh on 2023-02-10 21:40_

Hmm, it definitely works for me

---

_Comment by @charliermarsh on 2023-02-10 21:40_

Ahh ok

---

_Comment by @charliermarsh on 2023-02-10 21:40_

That makes sense

---

_Comment by @charliermarsh on 2023-02-10 21:40_

`--show-source` goes through a separate mechanism, I'll look into it

---

_Comment by @charliermarsh on 2023-02-10 21:52_

(Created separate issues for these.)

---

_Closed by @charliermarsh on 2023-02-10 21:52_

---

_Comment by @Sarcasm on 2023-07-06 12:59_

> Any reason the env vars wouldn't work for you?
> -- https://github.com/astral-sh/ruff/issues/2743#issuecomment-1426368171

Discoverability.

I wanted to pipe `ruff check --show-source` to a pager:

```
ruff check --show-source src | less -RFX
```

Seeing the absence of color, the fastest way for me to find it, was to do:

```
$ ruff -h
$ ruff check -h
$ man ruff
No manual entry for ruff
```

So I had to google it, and found this issue.

If I search directly on the website I find:

> How can I disable Ruff's color output?
> -- https://beta.ruff.rs/docs/faq/#how-can-i-disable-ruffs-color-output

I feel like the command line `-h` is more discoverable.
The `--color=auto|yes|no` help documentation could mention the env vars for those who prefer to use that, but I think it's more common in CI or build scripts than for when the user needs it on the command line.

BTW ruff is great!

---

_Referenced in [Infleqtion/client-superstaq#1242](../../Infleqtion/client-superstaq/pulls/1242.md) on 2025-07-02 15:39_

---
