<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DJ008: Should it also work for tolomea/django-auto-prefetch? - astral-sh/ruff #13664</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>DJ008: Should it also work for tolomea/django-auto-prefetch?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13664">#13664</a>
        opened by <a href="https://github.com/TheLovinator1">@TheLovinator1</a>
        on 2024-10-07 15:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/TheLovinator1">@TheLovinator1</a> on 2024-10-07 15:50</div>
            <div class="timeline-body"><h1><a href="https://docs.astral.sh/ruff/rules/django-model-without-dunder-str/">DJ008</a> - Django model without __str__ method</h1>
<p><a href="https://github.com/tolomea/django-auto-prefetch">django-auto-prefetch</a> uses <code>auto_prefetch.Model</code> instead of <code>models.Model</code> so the rule does not trigger. Should this be changed or is there a way to make it work with <code>auto_prefetch.Model</code> via pyproject.toml?</p>
<h2>What the rule does</h2>
<pre><code class="language-text">Checks that a __str__ method is defined in Django models.
</code></pre>
<h2>Example</h2>
<pre><code class="language-python">from django.db import models


class Book(models.Model): # Will trigger DJ008
    author = models.ForeignKey(&quot;Author&quot;, on_delete=models.CASCADE)

    class Meta:
        verbose_name = &quot;Book&quot;
</code></pre>
<pre><code class="language-python">import auto_prefetch
from django.db import models


class Book(auto_prefetch.Model): # Will not trigger DJ008
    author = auto_prefetch.ForeignKey(&quot;Author&quot;, on_delete=models.CASCADE)

    class Meta(auto_prefetch.Model.Meta):
        verbose_name = &quot;Book&quot;
</code></pre>
<p>Keywords: django-auto-prefetch, DJ008 and django-model-without-dunder-str.</p>
<p>Thanks, TheLovinator.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-07 15:56</div>
            <div class="timeline-body"><p>Yeah, our Django rules are very limited at the moment until we finish migrating Ruff to a multifile-capable analysis (which we're working on). The underlying issue is the same as for https://github.com/astral-sh/ruff/issues/12865: Ruff isn't capable of reasoning about imports from other modules.</p>
<p>A setting could be a short-term workaround that I'm open considering.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @MichaReiser on 2024-10-07 15:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:35:20 UTC
    </footer>
</body>
</html>
