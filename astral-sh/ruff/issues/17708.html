<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unused noqa is not unused and is removed - astral-sh/ruff #17708</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Unused noqa is not unused and is removed</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/17708">#17708</a>
        opened by <a href="https://github.com/TrevorWinstral">@TrevorWinstral</a>
        on 2025-04-29 14:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/TrevorWinstral">@TrevorWinstral</a> on 2025-04-29 14:09</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I want to ignore S101 (use of assert) for an entire function. However, when I use <code># noqa: S101</code> on the definition line, I get an error that the noqa is unused <em>and</em> that I have an S101 violation. So the noqa is not respected and if I have <code>--fix</code> then it is even removed. I would like to use multiple asserts so just ignoring the individual line here is not an option.</p>
<p>MWE:</p>
<pre><code class="language-python">&quot;&quot;&quot;Demonstrate Ruff noqa removal.&quot;&quot;&quot;


def foo() -&gt; None:  # noqa: S101
    &quot;&quot;&quot;Dummy.&quot;&quot;&quot;
    assert True
</code></pre>
<p>And the terminal output</p>
<pre><code>‚ùØ ruff check mwe.py
mwe.py:4:21: RUF100 [*] Unused `noqa` directive (unused: `S101`)
  |
4 | def foo() -&gt; None:  # noqa: S101
  |                     ^^^^^^^^^^^^ RUF100
5 |     &quot;&quot;&quot;Dummy.&quot;&quot;&quot;
6 |     assert True
  |
  = help: Remove unused `noqa` directive

mwe.py:6:5: S101 Use of `assert` detected
  |
4 | def foo() -&gt; None:  # noqa: S101
5 |     &quot;&quot;&quot;Dummy.&quot;&quot;&quot;
6 |     assert True
  |     ^^^^^^ S101
  |

Found 2 errors.
[*] 1 fixable with the `--fix` option.
</code></pre>
<h3>Version</h3>
<p>ruff 0.11.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-29 14:20</div>
            <div class="timeline-body"><p>Ruff doesn't support block level suppressions. Instead, the suppression must be at the end of the line raising the diagnostic. E.g,</p>
<pre><code class="language-py">def foo() -&gt; None:  
    &quot;&quot;&quot;Dummy.&quot;&quot;&quot;
    assert True # noqa: S101
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-04-29 14:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @TrevorWinstral on 2025-04-29 14:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:17 UTC
    </footer>
</body>
</html>
