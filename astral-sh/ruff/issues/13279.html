<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unfixable = [&quot;F401&quot;] only works with ruff.toml [lint] but not with pyproject.toml [tool.lint.ruff] - astral-sh/ruff #13279</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>unfixable = [&quot;F401&quot;] only works with ruff.toml [lint] but not with pyproject.toml [tool.lint.ruff]</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/13279">#13279</a>
        opened by <a href="https://github.com/tendermonster">@tendermonster</a>
        on 2024-09-07 14:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/tendermonster">@tendermonster</a> on 2024-09-07 14:25</div>
            <div class="timeline-body"><p>Since recently, for some reason, ignoring of F401 does not work over pyproject.toml.
Probably, other settings set using [tool.ruff.lint] don't work either. Don't really understand why.
Does anyone have a lead of why this could be happening?</p>
<p>If you're filing a bug report, please consider including the following information:</p>
<ul>
<li><p>List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.</p>
<ul>
<li>unfixable = [&quot;F401&quot;]</li>
</ul>
</li>
<li><p>A minimal code snippet that reproduces the bug.</p>
<ul>
<li>a basic python file with an unused import</li>
</ul>
</li>
<li><p>The command you invoked (e.g., <code>ruff /path/to/file.py --fix</code>), ideally including the <code>--isolated</code> flag.</p>
<ul>
<li>ruff is run on save by vscode</li>
</ul>
</li>
<li><p>The current Ruff settings (any relevant sections from your <code>pyproject.toml</code>).
<strong>pyproject.toml</strong></p>
</li>
</ul>
<pre><code>[tool.black]
line-length = 88
target-version = ['py38','py39','py310','py311']
include = '\.pyi?$'

# We use preview style for formatting Black itself. If you
# want stable formatting across releases, you should keep
# this off.
preview = false


[tool.lint.ruff]
# Enable pycodestyle (`E`) and Pyflakes (`F`) codes by default.
extend-select = [&quot;E&quot;, &quot;F&quot;, &quot;SIM&quot;]
ignore = [&quot;E501&quot;, &quot;F841&quot;, &quot;F401&quot;]
show-fixes = true

# Allow autofix for all enabled rules (when `--fix`) is provided.
fixable = [&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;I&quot;, &quot;N&quot;, &quot;Q&quot;, &quot;S&quot;, &quot;T&quot;, &quot;W&quot;, &quot;ANN&quot;, &quot;ARG&quot;, &quot;BLE&quot;, &quot;COM&quot;, &quot;DJ&quot;, &quot;DTZ&quot;, &quot;EM&quot;, &quot;ERA&quot;, &quot;EXE&quot;, &quot;FBT&quot;, &quot;ICN&quot;, &quot;INP&quot;, &quot;ISC&quot;, &quot;NPY&quot;, &quot;PD&quot;, &quot;PGH&quot;, &quot;PIE&quot;, &quot;PL&quot;, &quot;PT&quot;, &quot;PTH&quot;, &quot;PYI&quot;, &quot;RET&quot;, &quot;RSE&quot;, &quot;RUF&quot;, &quot;SIM&quot;, &quot;SLF&quot;, &quot;TCH&quot;, &quot;TID&quot;, &quot;TRY&quot;, &quot;UP&quot;, &quot;YTT&quot;]
unfixable = [&quot;F401&quot;]

# Exclude a variety of commonly ignored directories.
exclude = [
    &quot;.bzr&quot;,
    &quot;.direnv&quot;,
    &quot;.eggs&quot;,
    &quot;.git&quot;,
    &quot;.git-rewrite&quot;,
    &quot;.hg&quot;,
    &quot;.mypy_cache&quot;,
    &quot;.nox&quot;,
    &quot;.pants.d&quot;,
    &quot;.pytype&quot;,
    &quot;.ruff_cache&quot;,
    &quot;.svn&quot;,
    &quot;.tox&quot;,
    &quot;.venv&quot;,
    &quot;__pypackages__&quot;,
    &quot;_build&quot;,
    &quot;buck-out&quot;,
    &quot;build&quot;,
    &quot;dist&quot;,
    &quot;node_modules&quot;,
    &quot;venv&quot;,
]

# Same as Black.
line-length = 88

# Allow unused variables when underscore-prefixed.
dummy-variable-rgx = &quot;^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$&quot;

# Assume Python 3.8.
target-version = &quot;py38&quot;

[tool.ruff.lint.mccabe]
# Unlike Flake8, default to a complexity level of 10.
max-complexity = 10

[tool.ruff.lint.isort]
case-sensitive = true
classes = [&quot;SVC&quot;]

# Ignore `E402` (import violations) in all `__init__.py` files, and in `path/to/file.py`.
[tool.ruff.lint.per-file-ignores]
&quot;__init__.py&quot; = [
    &quot;F401&quot;,  # unused import
    &quot;F403&quot;,  # star imports
    ]

[tool.ruff.lint.pydocstyle]
convention = &quot;google&quot;
</code></pre>
<ul>
<li>The current Ruff version (<code>ruff --version</code>).<ul>
<li>ruff 0.6.4</li>
<li>vscode 1.93.0</li>
</ul>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-09-07 15:03</div>
            <div class="timeline-body"><p>I think you want <code>[tool.ruff.lint]</code> rather than <code>[tool.lint.ruff]</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tendermonster">@tendermonster</a> on 2024-09-07 15:16</div>
            <div class="timeline-body"><p>That is what I thought as well. But when I do that, I get a warning(by vscode editor): is not valid under any of the given schemas. That change also does not seem to do any difference</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tendermonster">@tendermonster</a> on 2024-09-07 15:25</div>
            <div class="timeline-body"><p>ok, i think i found it.
The fields</p>
<ul>
<li><code>show-fixes</code></li>
<li><code>line-length</code></li>
<li>and <code>target-version</code>
were the problem because they were unrecognized.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @tendermonster on 2024-09-07 15:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
