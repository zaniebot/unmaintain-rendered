<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F821 and F722 errors when importing from typing_extensions in version 0.0.94 - astral-sh/ruff #548</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>F821 and F722 errors when importing from typing_extensions in version 0.0.94</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/548">#548</a>
        opened by <a href="https://github.com/StefanBRas">@StefanBRas</a>
        on 2022-11-02 11:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/StefanBRas">@StefanBRas</a> on 2022-11-02 11:05</div>
            <div class="timeline-body"><p>Importing from <code>typing_extensions</code> instead of <code>typing</code> gives some errors with ruff version 0.0.94</p>
<pre><code class="language-python">from typing_extensions import Literal, List
from pydantic import BaseModel
from dataclasses import dataclass 

f821_outer = Literal['x']              # No errors
f722_outer = Literal['+', &quot;-&quot;]         # No errors        
f821_List = List[Literal['x']]         # No errors             
f722_List = List[Literal['+','-']]     # No errors             

class Tmp(BaseModel):
    a: Literal['x']                    # F821 Undefined name `x`                   
    b: Literal['+', &quot;-&quot;]               # F722 Syntax error in forward annotation: `+`, # F722 Syntax error in forward annotation: `-`              
    c: List[Literal['x']]              # F821 Undefined name `x`                                
    d: List[Literal['+','-']]          # F722 Syntax error in forward annotation: `+`, # F722 Syntax error in forward annotation: `-`             
    e: f821_outer                      # No errors                     
    f: f722_outer                      # No errors                        

@dataclass
class Tmp1:
    a: Literal['x']                    # F821 Undefined name `x`                                      
    b: Literal['+', &quot;-&quot;]               # F722 Syntax error in forward annotation: `+`, # F722 Syntax error in forward annotation: `-`                    
    c: List[Literal['x']]              # F821 Undefined name `x`                                
    d: List[Literal['+','-']]          # F722 Syntax error in forward annotation: `+`, # F722 Syntax error in forward annotation: `-`             
    e: f821_outer                      # No errors                        
    f: f722_outer                      # No errors                        

def tmp(
    a: Literal['x'],                   # F821 Undefined name `x`                   
    b: Literal['+', &quot;-&quot;],              # F722 Syntax error in forward annotation: `+`, # F722 Syntax error in forward annotation: `-`      
    c: List[Literal['x']],             # F821 Undefined name `x`                                
    d: List[Literal['+','-']],         # F722 Syntax error in forward annotation: `+`, # F722 Syntax error in forward annotation: `-`
    e: f821_outer,                     # No errors                        
    f: f722_outer,                     # No errors                        
    ):
    pass

</code></pre>
<p>yields</p>
<pre><code>Found 18 error(s).
f821.py:11:15: F821 Undefined name `x`
f821.py:12:15: F722 Syntax error in forward annotation: `+`
f821.py:12:20: F722 Syntax error in forward annotation: `-`
f821.py:13:20: F821 Undefined name `x`
f821.py:14:20: F722 Syntax error in forward annotation: `+`
f821.py:14:24: F722 Syntax error in forward annotation: `-`
f821.py:20:15: F821 Undefined name `x`
f821.py:21:15: F722 Syntax error in forward annotation: `+`
f821.py:21:20: F722 Syntax error in forward annotation: `-`
f821.py:22:20: F821 Undefined name `x`
f821.py:23:20: F722 Syntax error in forward annotation: `+`
f821.py:23:24: F722 Syntax error in forward annotation: `-`
f821.py:28:15: F821 Undefined name `x`
f821.py:29:15: F722 Syntax error in forward annotation: `+`
f821.py:29:20: F722 Syntax error in forward annotation: `-`
f821.py:30:20: F821 Undefined name `x`
f821.py:31:20: F722 Syntax error in forward annotation: `+`
f821.py:31:24: F722 Syntax error in forward annotation: `-`
</code></pre>
<p>When changing the import from <code>typing_extensions</code> to <code>typing</code> I get 0 errors.
When using ruff version 0.0.93 I get 0 errors (using either import)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-02 12:34</div>
            <div class="timeline-body"><p>Thank you! Will fix this today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/550.html">astral-sh/ruff#550</a> on 2022-11-02 13:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-11-02 13:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-02 13:04</div>
            <div class="timeline-body"><p>Thanks for this and apologies for the oversight. This is going out in <a href="https://github.com/charliermarsh/ruff/releases/tag/v0.0.95">v0.0.95</a> (building now).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/StefanBRas">@StefanBRas</a> on 2022-11-02 13:25</div>
            <div class="timeline-body"><p>No worries, I can hardly complain when there's a fix two hours after reporting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2342.html">astral-sh/ruff#2342</a> on 2023-01-30 08:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:48 UTC
    </footer>
</body>
</html>
