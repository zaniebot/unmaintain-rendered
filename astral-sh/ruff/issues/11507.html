<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`ruff server` in `v0.4.5` doesn't consider the configuration setting in Neovim - astral-sh/ruff #11507</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`ruff server` in `v0.4.5` doesn't consider the configuration setting in Neovim</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/11507">#11507</a>
        opened by <a href="https://github.com/a1401358759">@a1401358759</a>
        on 2024-05-23 07:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/a1401358759">@a1401358759</a> on 2024-05-23 07:54</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>When I updated to version 0.4.5, the E30* checks all failed and nothing changed in my configuration</p>
<p>my pyproject.toml</p>
<pre><code class="language-toml">[tool.ruff]
preview = true
# Exclude a variety of commonly ignored directories.
exclude = [
    &quot;.bzr&quot;,
    &quot;.direnv&quot;,
    &quot;.eggs&quot;,
    &quot;.git&quot;,
    &quot;.git-rewrite&quot;,
    &quot;.hg&quot;,
    &quot;.ipynb_checkpoints&quot;,
    &quot;.mypy_cache&quot;,
    &quot;.nox&quot;,
    &quot;.pants.d&quot;,
    &quot;.pyenv&quot;,
    &quot;.pytest_cache&quot;,
    &quot;.pytype&quot;,
    &quot;.ruff_cache&quot;,
    &quot;.svn&quot;,
    &quot;.tox&quot;,
    &quot;.venv&quot;,
    &quot;.vscode&quot;,
    &quot;__pypackages__&quot;,
    &quot;_build&quot;,
    &quot;buck-out&quot;,
    &quot;build&quot;,
    &quot;dist&quot;,
    &quot;node_modules&quot;,
    &quot;site-packages&quot;,
    &quot;venv&quot;,
]

# Same as Black.
line-length = 120
indent-width = 4

[tool.ruff.lint]
# Enable Pyflakes (`F`) and a subset of the pycodestyle (`E`)  codes by default.
# Unlike Flake8, Ruff doesn't enable pycodestyle warnings (`W`) or
# McCabe complexity (`C901`) by default.
select = [&quot;E4&quot;, &quot;E7&quot;, &quot;E9&quot;, &quot;F&quot;, &quot;I001&quot;]
ignore = [&quot;E402&quot;,&quot;E501&quot;,&quot;N802&quot;,&quot;N803&quot;,&quot;N806&quot;,&quot;N801&quot;,&quot;N813&quot;,&quot;N815&quot;,&quot;N816&quot;,&quot;RUF001&quot;,&quot;RUF002&quot;,&quot;RUF003&quot;,&quot;RUF012&quot;,&quot;ARG001&quot;]
extend-select = [&quot;E&quot;, &quot;N&quot;, &quot;W&quot;, &quot;ARG&quot;, &quot;RUF&quot;]

# Allow fix for all enabled rules (when `--fix`) is provided.
fixable = [&quot;ALL&quot;]
unfixable = []

# Allow unused variables when underscore-prefixed.
dummy-variable-rgx = &quot;^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$&quot;

[tool.ruff.format]
# Like Black, use double quotes for strings.
quote-style = &quot;double&quot;

# Like Black, indent with spaces, rather than tabs.
indent-style = &quot;space&quot;

# Like Black, respect magic trailing commas.
skip-magic-trailing-comma = false

# Like Black, automatically detect the appropriate line ending.
line-ending = &quot;auto&quot;

# Enable auto-formatting of code examples in docstrings. Markdown,
# reStructuredText code/literal blocks and doctests are all supported.
#
# This is currently disabled by default, but it is planned for this
# to be opt-out in the future.
docstring-code-format = false

# Set the line length limit used when formatting code snippets in
# docstrings.
#
# This only has an effect when the `docstring-code-format` setting is
# enabled.
docstring-code-line-length = &quot;dynamic&quot;
</code></pre>
<p>my ruff config</p>
<pre><code class="language-lua">  init_options = {
    filetypes = { &quot;python&quot; },
    single_file_support = true,
    cmd = { &quot;ruff&quot;, &quot;server&quot;, &quot;--preview&quot; },
    settings = {
      configuration = &quot;~/.config/nvim/pyproject.toml&quot;,
    },
  },
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @snowsignal on 2024-05-24 06:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @snowsignal by @snowsignal on 2024-05-24 06:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-05-24 07:22</div>
            <div class="timeline-body"><p>Can you provide a minimal code snippet on which it's failing? And, just to confirm, by &quot;failing&quot; do you mean that the v0.4.4 wasn't raising any violations but v0.4.5 does?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/a1401358759">@a1401358759</a> on 2024-05-24 08:31</div>
            <div class="timeline-body"><p>@dhruvmanila
<img src="https://github.com/astral-sh/ruff/assets/15830146/7f0af8ac-d4c5-4e84-9ea3-cd0c8ecc4cc0" alt="image" />
I'm sorry, I wasn't accurate in my description. It's not a failure, it's a non-effect.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/snowsignal">@snowsignal</a> on 2024-05-24 23:44</div>
            <div class="timeline-body"><p>I haven't been able to reproduce this issue. The <code>pyproject.toml</code> you put in the issue is the one in <code>~/.config/nvim</code>, right? Do you have any local <code>.toml</code> configuration files?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/a1401358759">@a1401358759</a> on 2024-05-25 03:39</div>
            <div class="timeline-body"><p>@snowsignal</p>
<img width="363" alt="image" src="https://github.com/astral-sh/ruff/assets/15830146/2f49f236-7178-4adc-a7aa-688b61bfeb01">

<img width="304" alt="image" src="https://github.com/astral-sh/ruff/assets/15830146/bf9e89e8-27ce-40ca-9aae-64746f498094">

<p>I don't have any local <code>.toml</code> configuration files</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-05-27 11:12</div>
            <div class="timeline-body"><p>I think I found the bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @dhruvmanila on 2024-05-27 11:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @dhruvmanila by @dhruvmanila on 2024-05-27 11:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @snowsignal by @dhruvmanila on 2024-05-27 11:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "When I updated to version 0.4.5, the E30* checks all failed and nothing changed in my configuration" to "`ruff server` in `v0.4.5` doesn't consider the configuration setting in Neovim" by @dhruvmanila on 2024-05-27 11:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/11497.html">astral-sh/ruff#11497</a> on 2024-05-27 11:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/11566.html">astral-sh/ruff#11566</a> on 2024-05-27 11:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2024-05-27 15:36</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:12 UTC
    </footer>
</body>
</html>
