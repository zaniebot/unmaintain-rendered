<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detect async test in unittest.TestCase - astral-sh/ruff #20170</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Detect async test in unittest.TestCase</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/20170">#20170</a>
        opened by <a href="https://github.com/WimYedema">@WimYedema</a>
        on 2025-08-30 21:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/WimYedema">@WimYedema</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>This test will pass:</p>
<pre><code class="language-py">import unittest

class SimpleTest(unittest.TestCase):
    async def test_false(self):
        self.assertTrue(False)
</code></pre>
<p>But it will give a &quot;helpful&quot; warning:</p>
<pre><code class="language-sh">$ uv run python -m unittest tests/test_false.py 
C:\Users\wimye\.pyenv\pyenv-win\versions\3.12.5\Lib\unittest\case.py:589: RuntimeWarning: coroutine 'SimpleTest.test_false' was never awaited
  if method() is not None:
RuntimeWarning: Enable tracemalloc to get the object allocation traceback
C:\Users\wimye\.pyenv\pyenv-win\versions\3.12.5\Lib\unittest\case.py:690: DeprecationWarning: It is deprecated to return a value that is not None from a test case (&lt;bound method SimpleTest.test_false of &lt;tests.test_false.SimpleTest testMethod=test_false&gt;&gt;)        
  return self.run(*args, **kwds)
.
----------------------------------------------------------------------
Ran 1 test in 0.004s

OK
</code></pre>
<p>It would be nice to have a rule that checks this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-09-01 15:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @ntBre on 2025-09-01 15:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:16 UTC
    </footer>
</body>
</html>
