<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`multi-line-implicit-string-concatenation (ISC002)` should use parens. - astral-sh/ruff #21271</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>multi-line-implicit-string-concatenation (ISC002)</code> should use parens.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/21271">#21271</a>
        opened by <a href="https://github.com/css-optivoy">@css-optivoy</a>
        on 2025-11-04 11:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/css-optivoy">@css-optivoy</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p><a href="https://docs.astral.sh/ruff/rules/multi-line-implicit-string-concatenation/#example">ISC002</a> states:</p>
<blockquote>
<p>For string literals that wrap across multiple lines, <a href="https://peps.python.org/pep-0008/#maximum-line-length">PEP 8</a> recommends the use of <strong>implicit string concatenation within parentheses</strong> instead of using a backslash for line continuation, as the former is more readable than the latter.</p>
</blockquote>
<p>And the example on the page shows wrapping the string in parens.</p>
<p>However, what the formatter does in practice seems to be the opposite where running <code>ruff format</code> on:</p>
<pre><code class="language-python">print(
    &quot;Eggs&quot;,
    &quot;Bacon&quot;,
    &quot;Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam &quot; \
    &quot;Spam Spam Spam Spam&quot;,
)
</code></pre>
<p>will produce:</p>
<pre><code class="language-python">print(
    &quot;Eggs&quot;,
    &quot;Bacon&quot;,
    &quot;Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam &quot;
    &quot;Spam Spam Spam Spam&quot;,
)
</code></pre>
<p>While syntactically valid, this seems counter to the stated function of this check, and the result (I would argue), is indeed <em>less</em> readable than the original.</p>
<p>I would expect this check to always wrap multi-line implicit string concatenation within parentheses, as stated.
Ideally even ones that do not use backslash.</p>
<p>At the very least I feel this should be a configurable option.</p>
<p>Thank you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-11-04 13:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-04 13:13</div>
            <div class="timeline-body"><p><code>ruff format</code> is independent of the <code>ISC</code> rules and it is unopinionated on whether you format your multiline implicit concatenated string in parentheses (or not)</p>
<pre><code class="language-py">print(
    &quot;Eggs&quot;,
    &quot;Bacon&quot;,
    &quot;Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam &quot; \
    &quot;Spam Spam Spam Spam&quot;,
)
</code></pre>
<p>gets formatted as</p>
<pre><code class="language-py">print(
    &quot;Eggs&quot;,
    &quot;Bacon&quot;,
    &quot;Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam &quot;
    &quot;Spam Spam Spam Spam&quot;,
)
</code></pre>
<p>and</p>
<pre><code class="language-py">print(
    &quot;Eggs&quot;,
    &quot;Bacon&quot;,
    (&quot;Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam &quot;
    &quot;Spam Spam Spam Spam&quot;),
)
</code></pre>
<p>is formatted to</p>
<pre><code>print(
    &quot;Eggs&quot;,
    &quot;Bacon&quot;,
    (
        &quot;Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam Spam &quot;
        &quot;Spam Spam Spam Spam&quot;
    ),
)
</code></pre>
<p>There are two reasons for this:</p>
<ul>
<li>The formatter tries to avoid introducing new parentheses in expression positions. There's an argument that the formatter should add an extra level of indent on the second line, to make it visually clear that the string &quot;continues&quot; on the next line</li>
<li>A formatter is a tricky balance between being opinionated and avoiding being too opinionated. Being too opinionated makes the formatter less appealing to users who don't agree with the formatter style. That's what ISC002 is for. It gives a way to enforce a more opinionated formatting for the people who explicitly prefer one formatting over the other</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/css-optivoy">@css-optivoy</a> on 2025-11-05 15:29</div>
            <div class="timeline-body"><p>Ah, right. This is not the first time I mix up the formatter and the checker.
I tend to run the checker with --fix first and then the formatter, which obscures exactly which does what.
Thank you for clarifying.</p>
<p>I guess what I'm really after is for the checker to be able to fix <code>ISC002</code> so that I can run something like:</p>
<pre><code class="language-bash">ruff check ./str_concat_multiline.py --select ISC002 --fix --unsafe-fixes --fixable ISC002
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-11-07 14:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/css-optivoy">@css-optivoy</a> on 2025-11-10 09:10</div>
            <div class="timeline-body"><p>@MichaReiser Just to clarify, does closed as 'completed' mean that the requested new fix was added?
I had a look at the recent commit history but didn't see anything, but perhaps I'm looking in the wrong place.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-10 09:13</div>
            <div class="timeline-body"><p>No, we didn't make any changes but we'd accept a PR adding a fix for ISC002.</p>
<p>I marked it as completed because I got the impression that I answered your question.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:33 UTC
    </footer>
</body>
</html>
