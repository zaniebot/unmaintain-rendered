```yaml
number: 21201
title: "Extend `comparison-with-itself` to support any expressions"
type: issue
state: closed
author: harupy
labels:
  - question
assignees: []
created_at: 2025-11-02T09:39:02Z
updated_at: 2025-11-03T09:04:08Z
url: https://github.com/astral-sh/ruff/issues/21201
synced_at: 2026-01-10T01:56:57Z
```

# Extend `comparison-with-itself` to support any expressions

---

_Issue opened by @harupy on 2025-11-02 09:39_

### Question

Related to https://github.com/pylint-dev/pylint/issues/10713. `comparison-with-itself` only flags comparisons with `Name` or `Name` with certain function calls (e.g., `id(a) == id(a)`). I wonder if it's possible to extend this r
rule to flag any expressions.

```python
# flagged
a == a

# not flagged
a.b == a.b
a.c() == a.c()
```

### Version

0.9.7

---

_Label `question` added by @harupy on 2025-11-02 09:39_

---

_Comment by @dylwil3 on 2025-11-02 10:00_

One thing to be careful with is side effects, eg `next(it) == next(it)`. There is some support for detecting possible side effects in the code base so maybe it's still possible.

---

_Comment by @harupy on 2025-11-03 09:04_

@dylwil3 Thanks for the comment. Good point. Yeah, you might do `a.b == a.b` in tests to ensure the `b` property result doesn't change :)

---

_Closed by @harupy on 2025-11-03 09:04_

---
