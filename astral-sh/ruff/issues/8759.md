```yaml
number: 8759
title: SIM300 tries to add a Yoda condition...
type: issue
state: closed
author: ThiefMaster
labels:
  - bug
assignees: []
created_at: 2023-11-18T22:39:57Z
updated_at: 2023-11-18T23:05:21Z
url: https://github.com/astral-sh/ruff/issues/8759
synced_at: 2026-01-10T01:56:50Z
```

# SIM300 tries to add a Yoda condition...

---

_Issue opened by @ThiefMaster on 2023-11-18 22:39_

```python
class DummyHandler(RequestHandler):
    CONFIG = {'foo': 'bar'}


assert DummyHandler.CONFIG == {}
```


```diff
$ ruff --isolated --select SIM300 --preview rufftest/ruff_sample.py --diff
--- rufftest/ruff_sample.py
+++ rufftest/ruff_sample.py
@@ -2,4 +2,4 @@
     CONFIG = {'foo': 'bar'}


-assert DummyHandler.CONFIG == {}
+assert {} == DummyHandler.CONFIG

Would fix 1 error.
```

I guess it considers anything in *ALL UPPERCASE* a constant. But this is clearly too broad, and it also seems questionable whether `FOO == bar` would even be a Yoda condition to begin with.

At least from the rule description and example it's meant to detect obviously-weird stuff like `'literal' == variable`, ie having a literal value on the left side of a binary comparison operator.

My suggestion would be to remove the uppercase checks from `is_constant_like` altogether and just keep the check for literal expressions. Alternatively, any literal could be considered "more of constant" than an uppercase string and thus never be expected on the left side of a binary op.

---

_Label `bug` added by @charliermarsh on 2023-11-18 22:55_

---

_Comment by @charliermarsh on 2023-11-18 22:56_

I think part of the problem here is that we don't consider `{}` to be a literal for the purpose of the rule, which seems wrong to me.

---

_Comment by @charliermarsh on 2023-11-18 23:04_

I would suggest two improvements here...

1. We could consider dicts, lists, etc. to be literals for the purpose of the rule.
2. We should probably flag `assert 1 == DummyHandler.CONFIG`, which we don't today -- we consider both of those expressions to be equally "constant".

---

_Comment by @charliermarsh on 2023-11-18 23:05_

I think this is the same as https://github.com/astral-sh/ruff/issues/6956.

---

_Closed by @charliermarsh on 2023-11-18 23:05_

---

_Referenced in [astral-sh/ruff#6956](../../astral-sh/ruff/issues/6956.md) on 2023-11-18 23:05_

---
