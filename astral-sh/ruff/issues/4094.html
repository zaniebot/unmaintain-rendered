<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C419 autofix can remove comment - astral-sh/ruff #4094</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>C419 autofix can remove comment</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/4094">#4094</a>
        opened by <a href="https://github.com/Skylion007">@Skylion007</a>
        on 2023-04-25 14:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Skylion007">@Skylion007</a></div>
            <div class="timeline-body">

<p>We did a large change of the PyTorch codebase with ruff in <a href="https://github.com/pytorch/pytorch/pull/99890">pytorch/pytorch#99890</a> by enabling C419 with autofixes. It mostly worked out of the box, but we did have to add back in one type comment for mypy that got deleted by the autofix: <a href="https://github.com/pytorch/pytorch/pull/99890">pytorch/pytorch#99890</a>/commits/ad98f63af41f54ebb76a817037d1fda0612e3e1a</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-25 15:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-25 15:12</div>
            <div class="timeline-body"><p>üëç Thanks. We preserve some comments in the comprehension fixes, but clearly not that one :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-04-25 18:20</div>
            <div class="timeline-body"><p>I can pick this up, wanted to get into CST :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-04-25 18:45</div>
            <div class="timeline-body"><p>Ok, so it seems like we&#x27;re not copying over the <code>lbracket</code> and <code>rbracket</code> fields from the <code>ListComp</code> node. Now, this is a challenge as we need to convert it into a <code>GeneratorExp</code> which only has the <code>lpar</code> and <code>rpar</code> fields. We&#x27;ll need to pick the required parts from the Bracket nodes into the Parenthesis nodes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/dhruvmanila">@dhruvmanila</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-04-26 00:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-05-09 06:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:35 UTC
    </footer>
</body>
</html>
