<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruff crashed workspace URL was not a file path! - astral-sh/ruff #12660</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ruff crashed workspace URL was not a file path!</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12660">#12660</a>
        opened by <a href="https://github.com/Odud">@Odud</a>
        on 2024-08-04 09:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Odud">@Odud</a> on 2024-08-04 09:54</div>
            <div class="timeline-body"><p>I'm trying to install and use ruff with Vscode on Windows 10
I've installed ruff with <code>python -m pip install ruff</code> and then the vsode extension but on starting vscode I get the message saying that the Ruff server crashed 5 times in the last 3 minutes. The server will not be restarted. The output looks like this:</p>
<pre><code>2024-08-04 10:36:18.577 [info] Name: Ruff
2024-08-04 10:36:18.577 [info] Module: ruff
2024-08-04 10:36:18.577 [info] Python extension loading
2024-08-04 10:36:18.577 [info] Waiting for interpreter from python extension.
2024-08-04 10:36:18.577 [info] Python extension loaded
2024-08-04 10:36:18.577 [info] Using interpreter: c:\Users\langb\AppData\Local\Programs\Python\Python312\python.exe
2024-08-04 10:36:18.648 [info] Using the Ruff binary: c:\Users\langb\AppData\Local\Programs\Python\Python312\Scripts\ruff.exe
2024-08-04 10:36:18.998 [info] Resolved 'ruff.nativeServer: auto' to use the native server
2024-08-04 10:36:19.000 [info] Found Ruff 0.5.6 at c:\Users\langb\AppData\Local\Programs\Python\Python312\Scripts\ruff.exe
2024-08-04 10:36:19.000 [info] Server run command: c:\Users\langb\AppData\Local\Programs\Python\Python312\Scripts\ruff.exe server
2024-08-04 10:36:19.001 [info] Server: Start requested.
2024-08-04 10:36:19.058 [info] ruff failed
  Cause: workspace URL was not a file path!
</code></pre>
<p>Contents of pyproject.toml (in .vscode\extensions\charliermarsh.ruff-2024.36.0-win32-x64)</p>
<pre><code>[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;

[project]
name = &quot;ruff-vscode&quot;
version = &quot;2024.36.0&quot;
description = &quot;A Visual Studio Code extension with support for the Ruff linter.&quot;
authors = [{ name = &quot;Charlie Marsh&quot;, email = &quot;charlie.r.marsh@gmail.com&quot; }]
maintainers = [{ name = &quot;Charlie Marsh&quot;, email = &quot;charlie.r.marsh@gmail.com&quot; }]
requires-python = &quot;&gt;=3.7&quot;
license = &quot;MIT&quot;
dependencies = [&quot;packaging&gt;=23.1&quot;, &quot;ruff-lsp==0.0.54&quot;, &quot;ruff==0.5.4&quot;]

[project.optional-dependencies]
dev = [&quot;mypy==1.2.0&quot;, &quot;python-lsp-jsonrpc==1.0.0&quot;]

[tool.ruff]
line-length = 88
target-version = &quot;py37&quot;
extend-exclude = [&quot;bundled/libs&quot;, &quot;scr/testFixture&quot;]

[tool.ruff.lint]
select = [&quot;E&quot;, &quot;F&quot;, &quot;W&quot;, &quot;Q&quot;, &quot;UP&quot;, &quot;I&quot;, &quot;N&quot;]

[tool.mypy]
files = [&quot;bundled/tool&quot;, &quot;build&quot;, &quot;tests&quot;]
no_implicit_optional = true
check_untyped_defs = true

[[tool.mypy.overrides]]
module = [&quot;debugpy.*&quot;, &quot;lsprotocol.*&quot;, &quot;pygls.*&quot;, &quot;pylsp_jsonrpc.*&quot;]
ignore_missing_imports = true
</code></pre>
<p>I've tried <code>python -m pip uninstall ruff</code> and uninstalling the extension, followed by reinstall but this has made no difference.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @MichaReiser on 2024-08-04 10:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-05 03:48</div>
            <div class="timeline-body"><p>Can you turn on verbose logging using the following config and provide the logs? I'm specifically interested in the initialization parameters the client is providing to the editor.</p>
<pre><code class="language-json">{
	&quot;ruff.trace.server&quot;: &quot;verbose&quot;
}
</code></pre>
<p>(Assuming that you're using VS Code based on the provided logs)</p>
<p>It's this method (<a href="https://docs.rs/url/2.5.2/url/struct.Url.html#method.to_file_path"><code>to_file_path</code></a>) which is failing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-05 03:51</div>
            <div class="timeline-body"><p>Also, the <code>pyproject.toml</code> config that you've provided is the one from <code>astral-sh/ruff-vscode</code> extension. Can you provide the path to the folder that's open in VS Code?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Odud">@Odud</a> on 2024-08-05 09:31</div>
            <div class="timeline-body"><p>Logging output attached.</p>
<p>Regarding your second request I can't find a pyproject.toml (or ruff.toml
or .ruff.toml) anywhere in my working directory structure other than the
ones I found in astral-sh/ruff-vscode. Please tell me where to look.</p>
<p>Thanks for your help so far.</p>
<p><em>Pete Barlow</em></p>
<p>On Mon, 5 Aug 2024 at 04:48, Dhruv Manilawala <em><strong>@</strong></em>.***&gt;
wrote:</p>
<blockquote>
<p>Can you turn on verbose logging using the following config and provide the
logs? I'm specifically interested in the initialization parameters the
client is providing to the editor.</p>
<p>{
&quot;ruff.trace.server&quot;: &quot;verbose&quot;
}</p>
<p>(Assuming that you're using VS Code based on the provided logs)</p>
<p>It's this method (to_file_path
<a href="https://docs.rs/url/2.5.2/url/struct.Url.html#method.to_file_path">https://docs.rs/url/2.5.2/url/struct.Url.html#method.to_file_path</a>)
which is failing.</p>
<p>—
Reply to this email directly, view it on GitHub
<a href="https://github.com/astral-sh/ruff/issues/12660#issuecomment-2268116862">https://github.com/astral-sh/ruff/issues/12660#issuecomment-2268116862</a>,
or unsubscribe
<a href="https://github.com/notifications/unsubscribe-auth/ADXMVZ5TX35EGIJYF2O6JE3ZP3YYNAVCNFSM6AAAAABL6WGIGGVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDENRYGEYTMOBWGI">https://github.com/notifications/unsubscribe-auth/ADXMVZ5TX35EGIJYF2O6JE3ZP3YYNAVCNFSM6AAAAABL6WGIGGVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDENRYGEYTMOBWGI</a>
.
You are receiving this because you authored the thread.Message ID:
<em><strong>@</strong></em>.***&gt;</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-05 10:13</div>
            <div class="timeline-body"><blockquote>
<p>Logging output attached.</p>
</blockquote>
<p>I'm sorry but I don't see anything attached to your latest message.</p>
<blockquote>
<p>Regarding your second request I can't find a pyproject.toml (or ruff.toml or .ruff.toml) anywhere in my working directory structure other than the ones I found in astral-sh/ruff-vscode. Please tell me where to look.</p>
</blockquote>
<p>It's fine if there's no config files in your project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Odud">@Odud</a> on 2024-08-05 11:47</div>
            <div class="timeline-body"><p>Sorry about that, here it is. I've tried to attach it again.</p>
<p><em>Pete Barlow</em></p>
<p>On Mon, 5 Aug 2024 at 11:14, Dhruv Manilawala <em><strong>@</strong></em>.***&gt;
wrote:</p>
<blockquote>
<p>Logging output attached.</p>
<p>I'm sorry but I don't see anything attached to your latest message.</p>
<p>Regarding your second request I can't find a pyproject.toml (or ruff.toml
or .ruff.toml) anywhere in my working directory structure other than the
ones I found in astral-sh/ruff-vscode. Please tell me where to look.</p>
<p>It's fine if there's no config files in your project.</p>
<p>—
Reply to this email directly, view it on GitHub
<a href="https://github.com/astral-sh/ruff/issues/12660#issuecomment-2268709667">https://github.com/astral-sh/ruff/issues/12660#issuecomment-2268709667</a>,
or unsubscribe
<a href="https://github.com/notifications/unsubscribe-auth/ADXMVZY46B7OQLH7EOSELP3ZP5F6VAVCNFSM6AAAAABL6WGIGGVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDENRYG4YDSNRWG4">https://github.com/notifications/unsubscribe-auth/ADXMVZY46B7OQLH7EOSELP3ZP5F6VAVCNFSM6AAAAABL6WGIGGVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDENRYG4YDSNRWG4</a>
.
You are receiving this because you authored the thread.Message ID:
<em><strong>@</strong></em>.***&gt;</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-05 11:55</div>
            <div class="timeline-body"><blockquote>
<p>Sorry about that, here it is. I've tried to attach it again.</p>
</blockquote>
<p>Unfortunately, I don't see it :(</p>
<p>I'm guessing one can't include attachments when replying to GitHub issue via email.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Odud">@Odud</a> on 2024-08-05 12:09</div>
            <div class="timeline-body"><p>Trying though github this time, seems to have taken the attachment
<a href="https://github.com/user-attachments/files/16495401/Ruff.log">Ruff.log</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Odud">@Odud</a> on 2024-08-05 12:17</div>
            <div class="timeline-body"><p>So I think I know what is causing it, but not why. At the end of my vscode workspace file I had the following lines</p>
<pre><code>        {
            &quot;name&quot;: &quot;Pico (W) Remote Workspace&quot;,
            &quot;uri&quot;: &quot;pico:&quot;
        }
</code></pre>
<p>This was a hangover from when I was doing some Pico development in the same workspace. I've now removed it and restarted Vscode and I haven't seen anymore crashes in Ruff. Ruff is reporting code issues correctly now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-05 12:29</div>
            <div class="timeline-body"><p>Yeah, I see the issue. The workspace URI is different than what's expected (&quot;pico:&quot; instead of &quot;file:&quot;). I'm not sure if that's intentional but I wonder if we should ignore the workspace instead of throwing an error and log it as a warning.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-05 12:29</div>
            <div class="timeline-body"><p>Thanks for providing the logs!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Odud">@Odud</a> on 2024-08-05 12:39</div>
            <div class="timeline-body"><p>It was included by the Pico extension, it seems to be there to enable
looking at the remote Pico filesystem which is accessed over a COM port. My
guess would be it is best to ignore rather than error.</p>
<p>Thanks for your help.</p>
<p>Pete Barlow</p>
<p>On Mon, 5 Aug 2024, 13:29 Dhruv Manilawala, <em><strong>@</strong></em>.***&gt;
wrote:</p>
<blockquote>
<p>Yeah, I see the issue. The workspace URI is different than what's expected
(&quot;pico:&quot; instead of &quot;file:&quot;). I'm not sure if that's intentional but I
wonder if we should ignore the workspace instead of throwing an error and
log it as a warning.</p>
<p>—
Reply to this email directly, view it on GitHub
<a href="https://github.com/astral-sh/ruff/issues/12660#issuecomment-2268957507">https://github.com/astral-sh/ruff/issues/12660#issuecomment-2268957507</a>,
or unsubscribe
<a href="https://github.com/notifications/unsubscribe-auth/ADXMVZ4JGSB7DCTLOF2UJWDZP5V2LAVCNFSM6AAAAABL6WGIGGVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDENRYHE2TONJQG4">https://github.com/notifications/unsubscribe-auth/ADXMVZ4JGSB7DCTLOF2UJWDZP5V2LAVCNFSM6AAAAABL6WGIGGVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDENRYHE2TONJQG4</a>
.
You are receiving this because you authored the thread.Message ID:
<em><strong>@</strong></em>.***&gt;</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-05 13:44</div>
            <div class="timeline-body"><blockquote>
<p>My guess would be it is best to ignore rather than error.</p>
</blockquote>
<p>Yeah, I agree.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @dhruvmanila by @dhruvmanila on 2024-08-05 13:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2024-08-07 09:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Odud">@Odud</a> on 2024-08-07 09:39</div>
            <div class="timeline-body"><p>Great!
Pete Barlow</p>
<p>On Wed, 7 Aug 2024, 10:16 Dhruv Manilawala, <em><strong>@</strong></em>.***&gt;
wrote:</p>
<blockquote>
<p>Closed #12660 <a href="https://github.com/astral-sh/ruff/issues/12660">https://github.com/astral-sh/ruff/issues/12660</a> as
completed via #12725 <a href="https://github.com/astral-sh/ruff/pull/12725">https://github.com/astral-sh/ruff/pull/12725</a>.</p>
<p>—
Reply to this email directly, view it on GitHub
<a href="https://github.com/astral-sh/ruff/issues/12660#event-13789353260">https://github.com/astral-sh/ruff/issues/12660#event-13789353260</a>, or
unsubscribe
<a href="https://github.com/notifications/unsubscribe-auth/ADXMVZ4MYS3J4BZUBFVLDFLZQHQWFAVCNFSM6AAAAABL6WGIGGVHI2DSMVQWIX3LMV45UABCJFZXG5LFIV3GK3TUJZXXI2LGNFRWC5DJN5XDWMJTG44DSMZVGMZDMMA">https://github.com/notifications/unsubscribe-auth/ADXMVZ4MYS3J4BZUBFVLDFLZQHQWFAVCNFSM6AAAAABL6WGIGGVHI2DSMVQWIX3LMV45UABCJFZXG5LFIV3GK3TUJZXXI2LGNFRWC5DJN5XDWMJTG44DSMZVGMZDMMA</a>
.
You are receiving this because you authored the thread.Message ID:
<em><strong>@</strong></em>.***&gt;</p>
</blockquote>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:34 UTC
    </footer>
</body>
</html>
