<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ignoring `import-private-name (PLC2701)` for `_typeshed` import - astral-sh/ruff #15295</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ignoring <code>import-private-name (PLC2701)</code> for <code>_typeshed</code> import</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/15295">#15295</a>
        opened by <a href="https://github.com/Avasam">@Avasam</a>
        on 2025-01-06 04:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Avasam">@Avasam</a> on 2025-01-06 04:07</div>
            <div class="timeline-body"><p><code>_typeshed</code> exposes plenty of very useful type aliases and protocols. A lot of those are even marked as <code>stable</code> by typeshed maintainers.
<code>_typeshed</code> imports can <em>only</em> be used in annotations and type-stubs.</p>
<p>For these reasons, I don't think <code>import-private-name (PLC2701)</code> brings value in applying to the <code>_typeshed</code> import. I'd like to see this rule ignore that import. Or to have a way to configure names and/or modules I'd like ignored.</p>
<p>Ruff: 0.8.5</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2025-01-06 08:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2025-01-06 08:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-06 08:09</div>
            <div class="timeline-body"><p>For reference: The documentation of the <code>_typeshed</code> module can be found <a href="https://github.com/python/typeshed/tree/main/stdlib/_typeshed">here</a></p>
<p>I'm more leaning towards an option (e.g. an allowlist of modules where private names are allowed), if we want to change this at all as this module is in a gray area where it is somewhat public but also not entirely stable. Another alternative is to remove it from <code>PLC2701</code> and introduce a new rule specifically to <code>_typeshed</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2025-01-06 08:21</div>
            <div class="timeline-body"><p>An allowlist would be my go-to solution, whether or not you have it default to include <code>_typeshed</code>. It's more flexible for the end user and their cases where they know they have to repeatedly import a private name or from a private module.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:36:12 UTC
    </footer>
</body>
</html>
