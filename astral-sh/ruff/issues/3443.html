<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use `CI_PROJECT_DIR`-relative paths for GitLab annotations - astral-sh/ruff #3443</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use <code>CI_PROJECT_DIR</code>-relative paths for GitLab annotations</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/3443">#3443</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-03-10 16:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-10 16:06</div>
            <div class="timeline-body"><p>At least for Gitlab <a href="https://docs.gitlab.com/ee/ci/testing/code_quality.html#implement-a-custom-tool"><code>path</code> should be relative</a> to the <code>CI_PROJECT_DIR</code> location. With this implementation links in widgets are broken.</p>
<p><em>Originally posted by @Agalin in https://github.com/charliermarsh/ruff/issues/1837#issuecomment-1464014758</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-03-10 16:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Agalin">@Agalin</a> on 2023-03-10 16:11</div>
            <div class="timeline-body"><p>I'd say there are two options:</p>
<ul>
<li>Make it relative to the mentioned variable if present - but what happens if it's not defined?</li>
<li>Keep paths just relative. I'm not familiar with Github's directory changing but I see no reason why toll cannot be called from a parent directory. It's already possible to use a config from subdirectory and select only subdir files for scan.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-03-10 16:32</div>
            <div class="timeline-body"><p>I guess my initial reaction is that we should try to make relative to <code>CI_PROJECT_DIR</code>, then fallback to cwd-relative if it's not defined.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-03-13 03:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:29:36 UTC
    </footer>
</body>
</html>
