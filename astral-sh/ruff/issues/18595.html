<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No one-line functions - astral-sh/ruff #18595</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>No one-line functions</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18595">#18595</a>
        opened by <a href="https://github.com/tylerlaprade">@tylerlaprade</a>
        on 2025-06-09 17:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tylerlaprade">@tylerlaprade</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>This would have to be an optional rule since a lot of people wouldn't like it. My codebase would really benefit from a rule that forbids any one-line functions. These can arise for a variety of reasons, most commonly a refactor from a more complex function implementation to a simpler one. It would be cleaner to just in-line that one line where it's used. It might make sense to limit this to only single-use functions, since it could be helpful to have a one-line function that is used in many places.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-06-09 17:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @ntBre on 2025-06-09 17:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @MichaReiser on 2025-06-10 11:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-10 11:49</div>
            <div class="timeline-body"><p>I do understand the motivation of this rule but I don't see a heuristic that would work reliably.</p>
<blockquote>
<p>It might make sense to limit this to only single-use functions, since it could be helpful to have a one-line function that is used in many places.</p>
</blockquote>
<p>This will require multifile analysis and finding all references (which can be very expensive).</p>
<p>Overall, my impression is that the rule is too vague and will have too many false positives. A one-line function can have the sole purpose of giving something a name, and we would need heuristics to judge if &quot;whatever the one-line statement is, is it complex enough to justify a function. It's also a fairly complicated rule (at least if we were to provide a fix) because it needs to account for shadowing.</p>
<p>I also think that the harm these function cause is very low (unless it's a very hot function).</p>
<p>Given all this, I don't think we should add this rule. At least, not how it is outlined in the summary. I do think a rule that can find left-over functions from a refactor would be interesting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tylerlaprade">@tylerlaprade</a> on 2025-06-10 12:15</div>
            <div class="timeline-body"><p>Those are excellent points; I agree entirely. I wonder if limiting it to private functions would be safe enough? Or if there's some other way to detect refactored functions that's even better.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:52:50 UTC
    </footer>
</body>
</html>
