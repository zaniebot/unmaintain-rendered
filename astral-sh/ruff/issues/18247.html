<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `torch.Tensor.requires_grad_` to `flake8-boolean-trap` allowlist - astral-sh/ruff #18247</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Add `torch.Tensor.requires_grad_` to `flake8-boolean-trap` allowlist</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/18247">#18247</a>
        opened by <a href="https://github.com/danra">@danra</a>
        on 2025-05-21 21:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/danra">@danra</a> on 2025-05-21 21:18</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I've <a href="https://github.com/astral-sh/ruff/issues/11264#issuecomment-2899262171">tried</a> extending the whitelist myself, but wasn't able to. Perhaps this possible with the internal whitelist? Or if not, it would still be good to add this to the whitelist whenever it does become possible.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-22 06:08</div>
            <div class="timeline-body"><p>Can you share a more complete example. How are you using <code>torch.Tensor.requires_grad_</code>? How is it different from https://github.com/astral-sh/ruff/issues/11264?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-05-22 06:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danra">@danra</a> on 2025-05-22 18:19</div>
            <div class="timeline-body"><p>From https://docs.pytorch.org/docs/stable/notes/autograd.html#autograd-for-complex-numbers :</p>
<blockquote>
<p>To freeze parts of your model, simply apply <code>.requires_grad_(False)</code> to the parameters that you don’t want updated. And as described above, since computations that use these parameters as inputs would not be recorded in the forward pass, they won’t have their <code>.grad</code> fields updated in the backward pass because they won’t be part of the backward graph in the first place, as desired.</p>
</blockquote>
<p>One more use case is to just completely stop tracking gradients once you're done with the backprop but are still transforming some values that participated in it.</p>
<blockquote>
<p>How is it different from https://github.com/astral-sh/ruff/issues/11264?</p>
</blockquote>
<p>This issue is for adding this specific function to the built-in whitelist. The other issue is about whitelist extension capabilities in general, and about how currently the function can't be whitelisted by the user.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add torch.Tensor.requires_grad_() to flake8-boolean-trap whitelist" to "Add torch.Tensor.requires_grad_() to flake8-boolean-trap allowlist" by @MichaReiser on 2025-05-25 11:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add torch.Tensor.requires_grad_() to flake8-boolean-trap allowlist" to "Add `torch.Tensor.requires_grad_` to `flake8-boolean-trap` allowlist" by @MichaReiser on 2025-05-25 11:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-25 11:03</div>
            <div class="timeline-body"><p>Could you share an example of how <code>requires_grad_</code> is used. I'm not familiar with tensor and the reference link has way too much content that doesn't seem relevant.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-07-24 12:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-info</span> added by @MichaReiser on 2025-07-24 12:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
