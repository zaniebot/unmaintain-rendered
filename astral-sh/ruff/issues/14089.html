<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C419 unsafe fixes with trailing comma causes syntax error: &quot;Generator expression must be parenthesized&quot; - astral-sh/ruff #14089</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>C419 unsafe fixes with trailing comma causes syntax error: &quot;Generator expression must be parenthesized&quot;</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14089">#14089</a>
        opened by <a href="https://github.com/ROCKTAKEY">@ROCKTAKEY</a>
        on 2024-11-04 10:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ROCKTAKEY">@ROCKTAKEY</a></div>
            <div class="timeline-body">

<p>Hello, thanks for such a great package!</p>
<p>When fixing C419 with <code>--unsafe-fixes</code> on <code>.py</code> file with trailing comma, the fixed code sometimes causes syntax error, because the trailing comma is not removed.</p>
A minimal code snippet that reproduces the bug.
<ol>
<li>Save the following contents to <code>example.py</code>:</li>
</ol>
<pre><code>any([i for i in [1, 2]],)
</code></pre>
<ol>
<li>Execute the following contents:</li>
</ol>
<pre><code>ruff check example.py --select C419 --isolated --unsafe-fixes --fix
</code></pre>
<ol>
<li>Now, <code>example.py</code> has the following contents:</li>
</ol>
<pre><code>any(i for i in [1, 2],)
</code></pre>
<ol>
<li>Then, <code>python example.py</code> causes syntax error:</li>
</ol>
<pre><code>  File &quot;/path/to/example.py&quot;, line 1
    any(i for i in [1, 2],)
        ^^^^^^^^^^^^^^^^^
SyntaxError: Generator expression must be parenthesized
</code></pre>
Additional information
List of keywords you searched for before creating this issue.
<ul>
<li>C419</li>
</ul>
The current Ruff settings
<ul>
<li>No <code>pyproject.toml</code></li>
</ul>
The current Ruff version
<pre><code>ruff 0.7.2
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-04 11:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-04 11:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-04 11:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-04 20:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:59 UTC
    </footer>
</body>
</html>
