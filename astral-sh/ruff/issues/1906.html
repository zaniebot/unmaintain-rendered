<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Better benchmarking - astral-sh/ruff #1906</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Better benchmarking</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1906">#1906</a>
        opened by <a href="https://github.com/not-my-profile">@not-my-profile</a>
        on 2023-01-16 04:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/not-my-profile">@not-my-profile</a></div>
            <div class="timeline-body"><ul>
<li>[ ] create a script for running the CPython benchmark</li>
<li>[ ] include the benchmark SVG shown in the README in the repository and add some script to regenerate it<ul>
<li>[ ] include the versions of the linters in the SVG</li>
<li>[ ] add <code>ruff --select ALL</code> to the chart</li>
</ul>
</li>
<li>[ ] introduce some tooling to benchmark the current working directory in comparison to a certain git branch (<code>main</code> by default)</li>
<li>[ ] create tooling for creating a breakdown for the total time ruff takes (how much of it is spend reading the files, parsing them with RustPython, how much time in checkers::ast, checkers::lines, checkers::tokens, etc.)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-16 05:30</div>
            <div class="timeline-body"><p>For what it’s worth, I care more about better tooling to benchmark Ruff than I do about benchmarking against other tools (and recreating the graph, etc.). Most useful here by far would be automating Ruff’s internal benchmark, measuring it continuously, and breaking it down by where time is spent.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-16 05:54</div>
            <div class="timeline-body"><p>(I'm actually regenerating the graph for unrelated reasons, so I'll check-in some instructions and such. Also, if helpful, all of the versions are encoded in <code>scripts/pyproject.toml</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-16 06:43</div>
            <div class="timeline-body"><p>(Updated the graph and added some more instructions in #1907.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jvdd">@jvdd</a> on 2023-02-02 12:00</div>
            <div class="timeline-body"><p>I just discovered codspeed: https://codspeed.io/ - a tool for continuous benchmarking and find it amizing!</p>
<p>It can monitor <a href="https://docs.codspeed.io/benchmarks/python">Python</a> &amp; <a href="https://docs.codspeed.io/benchmarks/rust">Rust</a> benchmarks and gives feedback in pull requests about improvements / regressions - <a href="https://github.com/jvdd/argminmax/pull/13#issuecomment-1413567852">see example</a>.<br />
After quickly toying around with it, the benchmark results look really stable (better / same stability as I get on my development server).</p>
<p>Some large Rust libraries that interated codspeed:</p>
<ul>
<li>https://github.com/pydantic/pydantic-core/pull/332</li>
<li>https://github.com/samueltardieu/pathfinding/pull/404</li>
</ul>
<p>P.S.: I am not affiliated / involved with codspeed - just very pleased with it and thought it could be worthwhile to share this with such a performance oriented library as this one :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-02 13:03</div>
            <div class="timeline-body"><p>I'm interested in giving it a try :) The author reached out to me a while ago and kindly gave me beta access, but I haven't had a chance to set it up :joy:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-08 16:59</div>
            <div class="timeline-body"><p>Closing as we added <code>cargo benchmark</code> which helps with some of the above. Any remaining we can open as separate tickets in the future if we choose to prioritize.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-06-08 16:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:46:04 UTC
    </footer>
</body>
</html>
