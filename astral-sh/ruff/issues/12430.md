```yaml
number: 12430
title: Formatter produces invalid python code if comment between decorator and PEP695 function
type: issue
state: closed
author: randolf-scholz
labels:
  - bug
  - formatter
assignees: []
created_at: 2024-07-21T14:17:17Z
updated_at: 2024-07-22T12:17:01Z
url: https://github.com/astral-sh/ruff/issues/12430
synced_at: 2026-01-10T01:56:53Z
```

# Formatter produces invalid python code if comment between decorator and PEP695 function

---

_Issue opened by @randolf-scholz on 2024-07-21 14:17_

https://play.ruff.rs/dbb2fd6a-2906-4ea2-bd00-4abe59506b00

```python
@decorator
# remark
def foo[S](x: S) -> S: ...
```
becomes

```python
@decorator
def foo# remark
[S](x: S) -> S: ...
```

---

_Label `bug` added by @MichaReiser on 2024-07-21 14:21_

---

_Label `formatter` added by @MichaReiser on 2024-07-21 14:21_

---

_Assigned to @MichaReiser by @MichaReiser on 2024-07-21 14:21_

---

_Comment by @MichaReiser on 2024-07-22 07:41_

Thanks for reporting this!

---

_Referenced in [astral-sh/ruff#12447](../../astral-sh/ruff/pulls/12447.md) on 2024-07-22 07:42_

---

_Closed by @MichaReiser on 2024-07-22 12:17_

---
