<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Show an error when using a name prior to usage of global keyword - astral-sh/ruff #197</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Show an error when using a name prior to usage of global keyword</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/197">#197</a>
        opened by <a href="https://github.com/Jackenmen">@Jackenmen</a>
        on 2022-09-15 02:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Jackenmen">@Jackenmen</a></div>
            <div class="timeline-body"><p>e.g. this will error at runtime:</p>
<pre><code>TOMATO = &quot;black cherry&quot;


def update_tomato():
    print(TOMATO)  # will error here
    global TOMATO
    TOMATO = &quot;cherry tomato&quot;
</code></pre>
<p>While this won&#x27;t:</p>
<pre><code>TOMATO = &quot;black cherry&quot;


def update_tomato():
    global TOMATO
    print(TOMATO)
    TOMATO = &quot;cherry tomato&quot;
</code></pre>
<p>Seen in pylint:
https://pylint.pycqa.org/en/latest/user_guide/messages/error/used-prior-global-declaration.html</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-09-15 02:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-11-30 03:13</div>
            <div class="timeline-body"><p>This is also <a href="https://pylint.pycqa.org/en/latest/user_guide/messages/error/used-prior-global-declaration.html">E0118</a> in Pylint.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Jackenmen">@Jackenmen</a> on 2022-12-04 13:34</div>
            <div class="timeline-body"><p>I think I may have originally wanted this to be added to <code>F821</code> (<code>UndefinedName</code>) but I guess it isn&#x27;t quite the same kind of error + flake8 doesn&#x27;t report on it:</p>
<pre><code>  File &quot;/tmp/blah/test.py&quot;, line 6
    global TOMATO
    ^^^^^^^^^^^^^
SyntaxError: name &#x27;TOMATO&#x27; is used prior to global declaration
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-09 15:12</div>
            <div class="timeline-body"><p>Gonna try to fix this today. (Itâ€™ll force me to learn all the rules around globals.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-09 17:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-10 15:02</div>
            <div class="timeline-body"><p>Interesting I think these are actually <em>syntax</em> errors?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-10 16:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-10 16:19</div>
            <div class="timeline-body"><p>Implemented as <code>PLE0118</code> (to match Pylint&#x27;s <code>E0118</code>).</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:25 UTC
    </footer>
</body>
</html>
