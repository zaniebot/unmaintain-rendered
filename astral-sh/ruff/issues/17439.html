<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support B950 flake8-bugbear line too long warning - astral-sh/ruff #17439</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Support B950 flake8-bugbear line too long warning</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/17439">#17439</a>
        opened by <a href="https://github.com/daviewales">@daviewales</a>
        on 2025-04-17 01:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/daviewales">@daviewales</a> on 2025-04-17 01:30</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>There was some discussion of this when <code>flake8-bugbear</code> was implemented (https://github.com/astral-sh/ruff/issues/389#issuecomment-1383237964). However, so far as I can tell, <code>B950</code> was not ultimately included.</p>
<p>I believe there are advantages to supporting <code>B950</code>, rather than using <code>E501</code> with a line length of 96:</p>
<ul>
<li>You keep your line length setting at 88, which means that auto-formatters will aim to keep lines below 88 characters (or whatever your preferred line length is).</li>
<li>The warning says 'Line too long (100 &gt; 88)', rather than 'Line too long (100 &gt; 96)', which informs the user that the preferred line length is 88, not 96.</li>
<li>You only trigger warnings when the line length is over 96.</li>
</ul>
<p>The outcome is that <em>most</em> of your codebase sticks below 88 characters, but in the rare occasion that your auto-formatter can't reduce the line length below 88 characters, and the line is between 88 and 96 characters, no warning will be raised.</p>
<p>Just because the police won't stop you for driving 85 in an 80 zone doesn't mean we should change all the speed limits to 85.</p>
<p>See the description of the rule from <a href="https://pypi.org/project/flake8-bugbear/">flake8-bugbear</a>:</p>
<blockquote>
<p>B950: Line too long. This is a pragmatic equivalent of pycodestyle’s E501: it considers “max-line-length” but only triggers when the value has been exceeded by more than 10%. noqa and type: ignore comments are ignored. You will no longer be forced to reformat code due to the closing parenthesis being one character too far to satisfy the linter. At the same time, if you do significantly violate the line length, you will receive a message that states what the actual limit is. This is inspired by Raymond Hettinger’s <a href="https://www.youtube.com/watch?v=wf-BqAjZb8M">“Beyond PEP 8” talk</a> and highway patrol not stopping you if you drive &lt; 5mph too fast. Disable E501 to avoid duplicate warnings. Like E501, this error ignores long shebangs on the first line and urls or paths that are on their own line:</p>
<pre><code class="language-python">#! long shebang ignored

# https://some-super-long-domain-name.com/with/some/very/long/paths
url = (
    &quot;https://some-super-long-domain-name.com/with/some/very/long/paths&quot;
)
</code></pre>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-17 14:49</div>
            <div class="timeline-body"><p>I think I understand the difference between the two rules and can see your point. The main idea I see in the other thread is setting <code>line-length</code> to 97, but we now also have <a href="https://docs.astral.sh/ruff/settings/#lint_pycodestyle_max-line-length">max-line-length</a>, which used in combination with <code>line-length</code> sounds to me like what you're after. Here's the example from the docs:</p>
<pre><code class="language-toml"># The formatter wraps lines at a length of 88.
line-length = 88

[pycodestyle]
# E501 reports lines that exceed the length of 100.
max-line-length = 100
</code></pre>
<p>Is that still different from B950?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/daviewales">@daviewales</a> on 2025-04-22 02:52</div>
            <div class="timeline-body"><p>Thanks. Functionally that's the same.
However, the warning message is different.</p>
<p>With B950 and <code>line-length = 88</code>, the warning message for lines longer than 96 is:</p>
<pre><code>Line too long (100 &gt; 88)</code></pre>
<p>With E501, <code>line-length = 88</code> and <code>max-line-length = 96</code>, the warning message for lines longer than 96 is:</p>
<pre><code>Line too long (100 &gt; 96)</code></pre>
<p>The difference is that when a warning is raised, the first informs the user that the standard line length is 88 characters, while the second informs the user that the standard line length is 96 characters.</p>
<p>i.e. B950 keeps the speed limit at 88, but does not trigger a violation until you exceed 96.
E501 raises the speed limit to 96, but installs a cruise control in your car which tries to keep your speed below 88.</p>
<p>I think there's still value in B950.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2025-04-22 06:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-22 06:40</div>
            <div class="timeline-body"><p>Introducing <code>B950</code> as another rule isn't an option because we want to avoid having rules with overlapping responsibilities (that, when configured differently, may even result in conflicting diagnostics).</p>
<p>I think my preferred solution here would be to adjust the message if a user configured both <code>max-line-length</code> and <code>line-length</code> and to include both lengths in the message. Any suggestions on how we could rephrase the message?</p>
<p>The alternatives are a new option but that just feels overkill. Or we wait for our new diagnostic system that allows attaching notes. The diagnostic could then explain that the global line-length limit is 88 and the max-line-length is 96.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/daviewales">@daviewales</a> on 2025-05-02 03:28</div>
            <div class="timeline-body"><p>What about the following?</p>
<pre><code>Line too long (100 &gt; 96 &gt; 88)</code></pre>
<p>This includes the violating line length, the <code>max-line-length</code> and the target <code>line-length</code>.</p>
<p>A longer version of the message might say:</p>
<pre><code>Line too long (100 &gt; max-line-length=96 &gt; line-length=88)</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @MichaReiser on 2025-05-02 07:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2025-05-10 17:42</div>
            <div class="timeline-body"><p>Another question is how we suppress too long line B950 errors when using max-line-length?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> removed by @MichaReiser on 2025-05-12 07:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @MichaReiser on 2025-05-12 07:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dreamsorcerer">@Dreamsorcerer</a> on 2025-07-28 14:21</div>
            <div class="timeline-body"><p>B950 also ignores <code>pragma: no cover</code> comments, but I'm guessing that's just an oversight in ruff as it appears to ignore noqa/type:ignore comments (which I don't think the original E501 does).</p>
<p>There's a list of test cases in https://github.com/PyCQA/flake8-bugbear/blob/main/tests/eval_files/b950.py</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:15 UTC
    </footer>
</body>
</html>
