<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`--add-noqa` is unintuitive - astral-sh/ruff #2187</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`--add-noqa` is unintuitive</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/2187">#2187</a>
        opened by <a href="https://github.com/not-my-profile">@not-my-profile</a>
        on 2023-01-26 05:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-26 05:47</div>
            <div class="timeline-body"><p>I would expect <code>--add-noqa</code> to only add the directive to violations that ruff cannot fix but it in fact adds it everywhere.</p>
<p>Even worse the following just ignores the <code>--fix</code> option and does not fix anything but adds <code>noqa</code> everywhere:</p>
<pre><code>ruff foo.py --add-noqa --fix
</code></pre>
<p>I think at least the former should be clearly explained in the option description in <code>--help</code> and the latter should result in an error until that is supported.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2155.html">astral-sh/ruff#2155</a> on 2023-01-26 05:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 14:34</div>
            <div class="timeline-body"><p>I think a reasonable thing to do for now would be to warn users that <code>--fix</code> is incompatible with <code>--add-noqa</code> (and recommend that users run <code>ruff --fix .</code> and then <code>ruff --add-noqa .</code>).</p>
<p>I view <code>--add-noqa</code> as something that's run once, or perhaps a few times, as an upgrade tool. In that light, it might be fine as a separate subcommand.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @charliermarsh on 2023-01-26 14:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2513.html">astral-sh/ruff#2513</a> on 2023-02-03 04:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-03 04:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:49 UTC
    </footer>
</body>
</html>
