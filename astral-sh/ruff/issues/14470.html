<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCH: Remove requirement for the name `TYPE_CHECKING` to be from `typing[_extensions]`? - astral-sh/ruff #14470</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>TCH: Remove requirement for the name <code>TYPE_CHECKING</code> to be from <code>typing[_extensions]</code>?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14470">#14470</a>
        opened by <a href="https://github.com/bzoracler">@bzoracler</a>
        on 2024-11-20 00:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bzoracler">@bzoracler</a></div>
            <div class="timeline-body"><p>Although it is canonical to import <code>TYPE_CHECKING</code> from <code>typing</code> or <code>typing_extensions</code>, type-checkers do not seem to actually require this (see playground demos: <a href="https://mypy-play.net/?mypy=latest&amp;python=3.12&amp;gist=53c467ed82f6ec030c4c65b5e6cc189a">mypy</a>, <a href="https://pyre-check.org/play?input=TYPE_CHECKING%3A%20bool%20%3D%20bool(">pyre</a>%0A%0Aif%20not%20TYPE_CHECKING%3A%0A%20%20%20%20a%3A%20int%20%3D%20%22%22%0Aelse%3A%0A%20%20%20%20b%3A%20str%20%3D%200), <a href="https://pyright-play.net/?pythonVersion=3.13&amp;strict=true&amp;reportMissingModuleSource=true&amp;enableExperimentalFeatures=true&amp;code=CoTQCgog%2BgwgEhGBpAkgOQOIC4AEAjAewIBscBefI4gCgEoAoegSwDMcA7AgFx1ElgTJ02ejjE4AhribseFAETz6AU2IBnZVlHi8uNVwBO5HAAYgA">pyright</a>).</p>
<p>It would be great if this requirement is also removed in ruff. Currently, <code>TCH*</code> violations aren&#x27;t reported if <code>TYPE_CHECKING</code> isn&#x27;t imported from <code>typing[_extensions]</code> (see <a href="https://play.ruff.rs/c8e6e3b4-a13c-4bf4-a755-eb42926a5f16">ruff playground</a>).</p>
<p>Use-case: I&#x27;d like to be able to define my own extended typing module with extra symbols like so:</p>
<pre><code># my_typing_module.py

from typing_extensions import *

...
</code></pre>
<pre><code>import my_typing_module

if my_typing_module.TYPE_CHECKING:
  from pathlib import Path  # Expected ruff: TCH004, but got no warning

p: Path = Path()
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-20 07:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-20 07:14</div>
            <div class="timeline-body"><p>Hi @bzoracler</p>
<p>Have you tried adding your module to the <a href="https://docs.astral.sh/ruff/settings/#lint_typing-modules"><code>typing-modules</code></a> list? Ruff should then recognize it and treat it the same as a regular <code>typing</code> module.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bzoracler">@bzoracler</a> on 2024-11-20 08:02</div>
            <div class="timeline-body"><p>Oh, thanks for that - that&#x27;ll be an acceptable workaround.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/bzoracler">@bzoracler</a> on 2024-11-20 08:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:00 UTC
    </footer>
</body>
</html>
