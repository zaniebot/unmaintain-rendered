<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement C0325 to catch unnecessary parentheses - astral-sh/ruff #2389</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Implement C0325 to catch unnecessary parentheses</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2389">#2389</a>
        opened by <a href="https://github.com/spaceone">@spaceone</a>
        on 2023-01-31 11:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/spaceone">@spaceone</a> on 2023-01-31 11:46</div>
            <div class="timeline-body"><p>not detected:
<code>ruff --isolated --select UP034 - &lt;&lt;&lt;&quot;set(('1.3.6.1.4.1.4203.666.11.1.4.2.12.1'),)&quot;</code></p>
<p>expected:
<code>-:1:5: UP034 Avoid extraneous parentheses</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-01-31 12:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-31 12:33</div>
            <div class="timeline-body"><p>(<code>pyupgrade</code> doesn't catch it either.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/spaceone">@spaceone</a> on 2023-02-01 17:26</div>
            <div class="timeline-body"><p>https://github.com/asottile/pyupgrade/issues/791</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wookie184">@wookie184</a> on 2023-05-07 12:24</div>
            <div class="timeline-body"><p>The behaviour wanted here is probably that of pylint's <a href="https://pylint.readthedocs.io/en/latest/user_guide/messages/convention/superfluous-parens.html"><code>C0325</code></a>. On https://github.com/charliermarsh/ruff/issues/970 <code>C0325</code> is marked as completed due to <code>UP034</code>, but the scope of <code>UP034</code> is much smaller so that doesn't seem correct.</p>
<p>The <code>UP043</code> rule could be expanded to cover more cases, but it's not really related to pyupgrade's purpose, so IMO it would make sense just to implement the pylint rule separately.</p>
<p>EDIT: Actually, I don't think the pylint rule even catches the above case, although it still catches more than pyupgrade, and would make more sense to extend.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2023-08-22 21:12</div>
            <div class="timeline-body"><p>Any single statement with an operator is also not detected, which is consistent with pyupgrade:
ie: <code>test = (1) + 2</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codereport">@codereport</a> on 2023-10-13 18:32</div>
            <div class="timeline-body"><p>Honestly, ruff <code>UP034</code> doesn't catch anything for me. pylint catches all of these:</p>
<pre><code class="language-py">assert (a == b)
if (a == b):
while (a == b):
</code></pre>
<p>and returns</p>
<pre><code>C0325: Unnecessary parens after 'if' keyword (superfluous-parens)
C0325: Unnecessary parens after 'while' keyword (superfluous-parens)
C0325: Unnecessary parens after 'assert' keyword (superfluous-parens)
</code></pre>
<p>ruff catches nothing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-13 19:21</div>
            <div class="timeline-body"><p>Yeah I think they're just very different rules. I would describe UP034 as catching &quot;redundant&quot; parentheses, so, e.g., it will catch <code>((1)) + 2</code> but not <code>(1) + 2</code>. C0325 seems to catch &quot;unnecessary&quot; parentheses, i.e., all cases in which parentheses are not syntactically necessary, even if they may be used intentionally for readability or otherwise.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codereport">@codereport</a> on 2023-10-13 19:31</div>
            <div class="timeline-body"><p>@charliermarsh Looking forward to when it is implemented. Currently the only thing I use pylint for is that check. Once it is added I can remove that dependency : ) I am pretty sure a <code>--fix</code> is possible as well and pylint doesn't do that. So it will be not only a replacement but an improvement : )</p>
<p>Thanks for all your work on this tool btw. I have never looked back since discovering it. I think I first heard about it on Talk Python to Me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-13 19:52</div>
            <div class="timeline-body"><p>@codereport - Thank you for the kind words, so glad it's working well for you! (And yeah -- once implemented, we should be able to support autofix here.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "UP034 false negative (not detected)" to "Implement C0325 to catch unnecessary parentheses" by @charliermarsh on 2023-10-13 19:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2023-10-13 19:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-10-13 19:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ilyakamens">@ilyakamens</a> on 2024-09-25 02:44</div>
            <div class="timeline-body"><p>Any idea when this will be added?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pelson">@pelson</a> on 2025-09-18 03:33</div>
            <div class="timeline-body"><p>Came here to say that I was expecting <code>UP034</code> to fix unnecessary parentheses such as the one in the example below:</p>
<pre><code>$ echo 'import os; str( u&quot;&quot;, errors=(&quot;strict&quot;))' &gt; foo.py; ruff check --fix --extend-select UP034 ./foo.py; cat foo.py | ruff format -
Found 1 error (1 fixed, 0 remaining).
str(&quot;&quot;, errors=(&quot;strict&quot;))
</code></pre>
<p>(and also wish I was able to pipe the <code>ruff check --fix</code> to make the reproducer more elegant ðŸ˜‰, #20460)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/spaceone">@spaceone</a> on 2025-10-23 10:54</div>
            <div class="timeline-body"><blockquote>
<p>(and also wish I was able to pipe the ruff check --fix to make the reproducer more elegant ðŸ˜‰, https://github.com/astral-sh/ruff/issues/20460)</p>
</blockquote>
<p>You can use bash for this:</p>
<pre><code>$ ruff check --isolated --diff --fix --extend-select UP034 &lt;(echo 'import os; str( u&quot;&quot;, errors=(&quot;strict&quot;))')
--- /dev/fd/63
+++ /dev/fd/63
@@ -1 +1 @@
-import os; str( u&quot;&quot;, errors=(&quot;strict&quot;))
+str( u&quot;&quot;, errors=(&quot;strict&quot;))

Would fix 1 error.

</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:29:08 UTC
    </footer>
</body>
</html>
