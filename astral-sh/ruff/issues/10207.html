<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUF022 `__all__` is not sorted: odd sorting algorithm - astral-sh/ruff #10207</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>RUF022 <code>__all__</code> is not sorted: odd sorting algorithm</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10207">#10207</a>
        opened by <a href="https://github.com/ilius">@ilius</a>
        on 2024-03-03 04:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ilius">@ilius</a> on 2024-03-03 04:10</div>
            <div class="timeline-body"><p>My code:</p>
<pre><code>__all__ = [
	&quot;Box&quot;,
	&quot;GLibError&quot;,
	&quot;GdkPixbuf&quot;,
	&quot;HBox&quot;,
	&quot;Menu&quot;,
	&quot;MenuItem&quot;,
	&quot;TWO_BUTTON_PRESS&quot;,
	&quot;VBox&quot;,
	&quot;gdk&quot;,
	&quot;getOrientation&quot;,
	&quot;getScrollValue&quot;,
	&quot;gtk&quot;,
	&quot;main_context_default&quot;,
	&quot;pack&quot;,
	&quot;pango&quot;,
	&quot;source_remove&quot;,
	&quot;timeout_add&quot;,
	&quot;timeout_add_seconds&quot;,
]
</code></pre>
<p>I run <code>ruff . --preview</code> and get:</p>
<pre><code>RUF022 `__all__` is not sorted</code></pre>
<p>I confirmed in Python shell that <code>sorted(__all__) == __all__</code>.</p>
<p>Is <code>ruff</code> using a different sorting method?</p>
<pre><code>ruff version
ruff 0.3.0
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ilius">@ilius</a> on 2024-03-03 07:51</div>
            <div class="timeline-body"><p>Moving <code>TWO_BUTTON_PRESS</code> to the top fixed it.
Looks like full-uppercase names with length&gt;=2 should be first!
It's kinda odd!</p>
<p>Is this documented somewhere?</p>
<p>It's not very convenient since editors can not sort this way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "RUF022 `__all__` is not sorted: false positive?" to "RUF022 `__all__` is not sorted: odd sorting algorithm" by @ilius on 2024-03-03 07:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-03 18:20</div>
            <div class="timeline-body"><p>Yeah, it's documented in the rule documentation: https://docs.astral.sh/ruff/rules/unsorted-dunder-all/#what-it-does.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ilius">@ilius</a> on 2024-03-04 00:10</div>
            <div class="timeline-body"><p>Thanks.</p>
<p>Although the doc says the fix is safe.
But I had to pass --unsafe-fixes to get them fixed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-04 00:23</div>
            <div class="timeline-body"><p>Lemme take a look at that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-04 01:35</div>
            <div class="timeline-body"><p>The fix is only ever marked as safe, as far as I can tell from the code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ilius">@ilius</a> on 2024-03-04 05:44</div>
            <div class="timeline-body"><p>You are right.
I think <code>&quot;RUF&quot;</code> was not in <code>lint.fixable</code> in <code>pyproject.toml</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ilius on 2024-03-04 05:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:32:59 UTC
    </footer>
</body>
</html>
