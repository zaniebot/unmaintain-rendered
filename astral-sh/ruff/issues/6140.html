<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for Quarto notebooks  - astral-sh/ruff #6140</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for Quarto notebooks</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/6140">#6140</a>
        opened by <a href="https://github.com/mjkanji">@mjkanji</a>
        on 2023-07-28 01:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mjkanji">@mjkanji</a> on 2023-07-28 01:25</div>
            <div class="timeline-body"><p>Copy-pasting my comment from #3792 below. Since Ruff already supports Jupyter notebooks, and Quarto is a plaintext equivalent of notebooks, it should hopefully be (relatively) easy to add support. The holy grail would be if the VS Code extension can highlight linting errors in the code blocks in an open <code>.qmd</code> file, but even just CLI support would be great to have as a start.</p>
<hr />
<p>Chiming in here to ask if the development of this feature can also take Quarto (.qmd) into consideration. It's a great project aimed at providing a plaintext equivalent of Jupyter notebooks.</p>
<p>Hopefully, adding support shouldn't be too complicated because, like (vanilla) Markdown, .qmd files denote Python blocks explicitly, albeit with a slightly different syntax:</p>
<pre><code class="language-md"># This is a Markdown heading

This is regular text.

```{python}
#| echo: false

# This is a Python comment
print(&quot;Hello, Ruff!&quot;)
```
</code></pre>
<p>The <code>#| echo: false</code> at the top is a Quarto-specific comment that controls its behaviour. See <a href="https://quarto.org/docs/computations/execution-options.html#output-options">here</a>. I don't imagine Ruff necessarily cares about specially formatted comments, though maybe it'll become relevant if you add formatting as a core functionality, a la #1904.</p>
<p>Unlike Markdown, and like Jupyter notebooks, Quarto documents &quot;carry the context throughout the file&quot; -- so adding support should hopefully just be a matter of treating the code blocks as a single Python script, while ignoring any Markdown outside of those blocks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2023-07-28 04:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wiraki">@wiraki</a> on 2023-08-30 14:21</div>
            <div class="timeline-body"><p>Just wanted to add my +1 to this request :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JanPalasek">@JanPalasek</a> on 2023-12-13 07:46</div>
            <div class="timeline-body"><p>@mjkanji You cannot process the notebook code only by concatenating code cells and running the analysis on the whole code. This is due to jupyter specific features like cell-level magics.</p>
<p>However, it is pretty much the same as processing Jupyter notebooks. It only requires a different parser for cells.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mjkanji">@mjkanji</a> on 2023-12-13 17:31</div>
            <div class="timeline-body"><blockquote>
<p>@mjkanji You cannot process the notebook code only by concatenating code cells and running the analysis on the whole code. This is due to jupyter specific features like cell-level magics.</p>
<p>However, it is pretty much the same as processing Jupyter notebooks. It only requires a different parser for cells.</p>
</blockquote>
<p>Awesome! Hopefully, this can be implemented soon!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tvatter">@tvatter</a> on 2024-01-25 09:41</div>
            <div class="timeline-body"><p>+1 that would be really awesome, and probably something like that would also close #8800.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">notebook</span> added by @dhruvmanila on 2024-02-12 06:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danieltomasz">@danieltomasz</a> on 2024-06-18 18:32</div>
            <div class="timeline-body"><p>As this thread seems relevant does anyone know a way to disable rule for formatting  comments in Jupyter code cell withing <code>.ipynb</code> notebooks?(I am using notebooks via vscode extension), I can move it to new issue, but this one seems relevant (altough my request is different in scope)</p>
<p>Quarto is not only a format of markdown based notebooks, but open source technical publishing  system.
With Quarto I can have Quarto <code>.ipynb</code> document/notebook  with python code cells annotated via &quot;comment pipe&quot; on top it.</p>
<pre><code>#| echo: false
import pandas as pd
import mne
</code></pre>
<p>Applying ruff formating is breaking it by adding space after <code>#</code>. How I can disable this behaviour ?
<code># fmt: skip</code> like below</p>
<pre><code>#| echo: false         # fmt: skip
</code></pre>
<p>doesn't seem to work.</p>
<p>More discussion is here  https://github.com/quarto-dev/quarto-cli/discussions/9137</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chamaoskurumi">@chamaoskurumi</a> on 2024-09-05 08:56</div>
            <div class="timeline-body"><blockquote>
<p>+1 that would be really awesome</p>
</blockquote>
<p>I second that...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yeelauren">@yeelauren</a> on 2024-09-25 02:30</div>
            <div class="timeline-body"><p>My current workaround is this:</p>
<pre><code>quarto convert your_doc.qmd 
jupyter nbconvert --to python your_doc.ipynb   
</code></pre>
<p>And you can run ruff on Jupyter or the python file directly but not ideal :melting_face:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SaintRod">@SaintRod</a> on 2024-10-20 16:11</div>
            <div class="timeline-body"><p>+1 :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/so-rose">@so-rose</a> on 2024-10-21 13:07</div>
            <div class="timeline-body"><p>Big +1 from here!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntluong95">@ntluong95</a> on 2024-12-12 21:51</div>
            <div class="timeline-body"><p>I strongly vote for this feature. As Quarto notebook is more and more common over Jupyter notebook, support for it is very much needed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danieltomasz">@danieltomasz</a> on 2024-12-13 20:21</div>
            <div class="timeline-body"><p>So basically, here are mentioned 2 separate issues:</p>
<ol>
<li>Add support for <code>.qmd</code> files</li>
<li>Disable formatting of the quarto pipe comments <code>#| settings: values</code>, which currently are formatted when someone is using <code>quarto</code> within Python <code>.ipynb</code> file</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/aeturrell">@aeturrell</a> on 2024-12-16 15:25</div>
            <div class="timeline-body"><p>Massive +1 for this!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mohelm">@mohelm</a> on 2025-03-04 15:47</div>
            <div class="timeline-body"><p>Hey is there an update on the support for <code>qmd</code> files?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/malcolmbarrett">@malcolmbarrett</a> on 2025-04-11 19:37</div>
            <div class="timeline-body"><p>I have experimented with a few approaches (including converting to Jupyter and back and the linked nbqa PR), and I think the tricks to make Ruff work with it leave too many artifacts in the Quarto document (particularly in the metadata, but other issues as well). I thought maybe these approaches might be sufficient, but I believe the best approach is going to be native Ruff support for formatting <code>.qmd</code> files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gmermoud">@gmermoud</a> on 2025-04-18 13:43</div>
            <div class="timeline-body"><p>+1 that would be really useful!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/myoung3">@myoung3</a> on 2025-10-25 13:05</div>
            <div class="timeline-body"><p>https://github.com/quarto-dev/quarto-markdown is an in-development parser for qmd files from the Quarto team that can parse into json. Once this is released it might be easy to use this to extract all the python code blocks from qmd files.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:30:50 UTC
    </footer>
</body>
</html>
