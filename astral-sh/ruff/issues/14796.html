<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUF052: do not apply to function arguments? - astral-sh/ruff #14796</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>RUF052: do not apply to function arguments?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14796">#14796</a>
        opened by <a href="https://github.com/inducer">@inducer</a>
        on 2024-12-05 21:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/inducer">@inducer</a> on 2024-12-05 21:07</div>
            <div class="timeline-body"><p>I feel that the connotation of a leading underscore is quite different between local variables and function arguments. I agree with the premise of the rule that an underscored local variable is an unused dummy thing. But an underscored function arguments to me is an internal thing, comparable to an underscored method in a class, not to be considered part of the public interface. As such, I would prefer if the rule could separate function argument names from other local variables.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2024-12-05 21:26</div>
            <div class="timeline-body"><p>Incidentally, adopting this point of view would also solve #14790</p>
<p>So that makes it tempting to agree - but perhaps for selfish reasons. Curious what other folks think!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @dylwil3 on 2024-12-05 21:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-05 21:29</div>
            <div class="timeline-body"><blockquote>
<p>But an underscored function arguments to me is an internal thing, comparable to an underscored method in a class, not to be considered part of the public interface. As such, I would prefer if the rule could separate function argument names from other local variables.</p>
</blockquote>
<p>So... would this be <a href="https://docs.astral.sh/ruff/rules/unused-function-argument/"><code>unused-function-argument</code></a> instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2024-12-05 21:35</div>
            <div class="timeline-body"><p>It sounds like the OP is saying that an underscored argument should be indicating that it is &quot;private&quot; rather than &quot;unused&quot;. So, for example:</p>
<pre><code class="language-python">def foo(x:int, y:str, _z:bool = False):
# &lt;-- do stuff --&gt;
if _z:
    #&lt;-- something... --&gt;
#&lt;--- more stuff ---&gt;
</code></pre>
<p>I <em>think</em> (but I could be wrong) that the OP is suggesting that the connotation of <code>_z</code> is &quot;this is a private, internal setting I can use&quot; as opposed to &quot;this is a dummy variable&quot;. In particular, the above code snippet should trigger neither <a href="https://docs.astral.sh/ruff/rules/used-dummy-variable/#used-dummy-variable-ruf052">used-dummy-variable (RUF052)</a> nor <a href="https://docs.astral.sh/ruff/rules/unused-function-argument/#unused-function-argument-arg001">unused-function-argument (ARG001)</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-05 21:45</div>
            <div class="timeline-body"><p>Ah yes, of course — yeah I agree it's weird to raise this (RUF052) for function arguments.</p>
<p>My point is if that if we're not going to treat it as a dummy variable then if it's <em>unused</em> we should raise a violation</p>
<pre><code>❯ cat example.py
def foo(x: int, y: str, _z: bool = False):
    return 10

❯ uvx ruff@latest check example.py --select ARG001
Installed 1 package in 1ms
example.py:1:9: ARG001 Unused function argument: `x`
  |
1 | def foo(x: int, y: str, _z: bool = False):
  |         ^ ARG001
2 |     return 10
  |

example.py:1:17: ARG001 Unused function argument: `y`
  |
1 | def foo(x: int, y: str, _z: bool = False):
  |                 ^ ARG001
2 |     return 10
  |

Found 2 errors.
</code></pre>
<p>Note we don't flag <code>_z</code> here and the documentation says</p>
<blockquote>
<p>If a variable is intentionally defined-but-not-used, it should be prefixed with an underscore, or some other value that adheres to the <a href="https://docs.astral.sh/ruff/settings/#lint_dummy-variable-rgx">lint.dummy-variable-rgx</a> pattern.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2024-12-05 21:56</div>
            <div class="timeline-body"><p>Yeah that's a little awkward... it kinda seems like both interpretations of the underscore could make sense in different contexts. I would personally find it okay to ignore both checks in the presence of underscores.</p>
<p>I guess I don't have a good sense of how many people would be happy to receive a lint error (either of them) alerting to the case where they did or didn't use a function argument that was named with an underscore. Like - what is the prevalence of people <em>accidentally</em> putting an underscore on a function argument and wishing they hadn't?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-05 22:00</div>
            <div class="timeline-body"><p>I don't really know of a context where you'd define an intentionally unused variable in a function signature. Matching a parent signature comes to mind, but... you can't add an underscore to resolve that because it changes the signature.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2024-12-05 22:15</div>
            <div class="timeline-body"><p>I think you can change the name for position-only arguments.</p>
<p>But I agree I don't know who's doing this...</p>
<pre><code class="language-python">class Foo:
    def bar(self, x:int, /) -&gt; int:
        return x

class Bar(Foo):
    def bar(self, _x:int, /) -&gt; int:
        return 17
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-05 22:37</div>
            <div class="timeline-body"><p>Yeah I guess so haha getting increasingly dubious though.</p>
<p>This can be a separate debate, but I guess I find it weird that we would not apply <code>RUF052</code> because it's not a dummy argument but... we also wouldn't apply <code>ARG001</code> because it is a dummy argument.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @dylwil3 on 2024-12-05 23:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-12-06 14:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:35:57 UTC
    </footer>
</body>
</html>
