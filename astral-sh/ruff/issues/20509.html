<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>remove blank line before the return statement in a last nested function - astral-sh/ruff #20509</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>remove blank line before the return statement in a last nested function</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/20509">#20509</a>
        opened by <a href="https://github.com/ngdangtu-vn">@ngdangtu-vn</a>
        on 2025-09-22 07:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ngdangtu-vn">@ngdangtu-vn</a> on 2025-09-22 07:32</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Current behaviour:</p>
<pre><code class="language-py">def exception_handler(fallback=None):
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # ...

        return wrapper

    return decorator
</code></pre>
<p>Expect behaviour:</p>
<pre><code class="language-py">def exception_handler(fallback=None):
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # ...
        return wrapper
    return decorator
</code></pre>
<p>Imho, I don't think a blank line in this case is reasonable. In fact it makes me hard to follow the code block.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "remove blank line before the return statement in a function" to "remove blank line before the last return statement in a function" by @ngdangtu-vn on 2025-09-22 07:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @MichaReiser on 2025-09-22 07:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">style</span> added by @MichaReiser on 2025-09-22 07:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-09-22 07:39</div>
            <div class="timeline-body"><p>Thanks for opening this issue</p>
<p>I find both formatting hard to read, but I'd probably prefer the first version because the empty lines at least give me some form of grouping. But this is definitely very subjective, and there's no &quot;clear better&quot; version.</p>
<p>Changing the default now without it being clearly better is too disruptive a change. However, I consider this another instance where I find black's style guide too opinionated, and I'd prefer what prettier and rustfmt do, leave the number of empty lines up to the author (but disallow more than 2 empty lines). We would probably have to introduce this style change behind a configuration option because this more strict behavior is liked by many users.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "remove blank line before the last return statement in a function" to "remove blank line before the return statement in a last nested function" by @ngdangtu-vn on 2025-09-22 07:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
