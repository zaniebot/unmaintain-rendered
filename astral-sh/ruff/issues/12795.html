<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to disable Ruff linter in AstroNvim LSP? - astral-sh/ruff #12795</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to disable Ruff linter in AstroNvim LSP?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12795">#12795</a>
        opened by <a href="https://github.com/memeLordo">@memeLordo</a>
        on 2024-08-10 15:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/memeLordo">@memeLordo</a></div>
            <div class="timeline-body">

<p>Is there anyway to disable <code>ruff </code> linting completely and leave it only for formattiong? I&#x27;m using a NeoVim configuration with Mason. What I have is a double display for linting in <code>basedpyright</code> and <code>ruff</code>:
<img src="https://github.com/user-attachments/assets/89182f2b-04a3-4f3f-8f0a-803e4309eeb2" alt="Error"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/memeLordo">@memeLordo</a> on 2024-08-10 15:20</div>
            <div class="timeline-body"><p>My previous attemts to set up configuration using help from #12514 and #12778 had no effect.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-10 15:50</div>
            <div class="timeline-body"><p>Have you tried setting <a href="https://docs.astral.sh/ruff/editors/settings/#lint_enable">lint.enable</a></p>
<p>If you need more help, please share your neovim configuration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/memeLordo">@memeLordo</a> on 2024-08-11 02:16</div>
            <div class="timeline-body"><p>Sent request. My config is used by AstroNvim. I tried to put the code at different places, but still nothing seems to work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-11 05:49</div>
            <div class="timeline-body"><p>Can you share your Neovim config? I&#x27;m specifically interested in how you&#x27;ve setup basedpyright and Ruff. Which plugins are you using to set them up? Is it just <code>nvim-lspconfig</code> or do you have any other plugins as well?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-11 05:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/memeLordo">@memeLordo</a> on 2024-08-11 13:32</div>
            <div class="timeline-body"><p>Basically,  <code>basedpyright</code> and <code>ruff</code> installed via <code>Mason</code>, and it configures using AstroNmiv nested structure. Unfortunately, I haven&#x27;t been able to find the same configuration for <code>ruff</code>, because it implies that user would be using it as a main linter, instead of  <code>basedpyright</code>. Here is an example: <a href="https://github.com/astral-sh/ruff-lsp/issues/384">astral-sh/ruff-lsp#384</a>#issuecomment-1941556771
<code>ruff</code> works from the package, and I can&#x27;t manage to configure it inside my nvim-config.</p>
<p>My <code>basedpyright_config.lua</code>:</p>
<pre><code>-- if true then return {} end -- INFO: REMOVE THIS LINE TO ACTIVATE THIS FILE
return {
  &quot;AstroNvim/astrolsp&quot;,
  opts = {

    servers = {
      &quot;basedpyright&quot;,
    },

    ---@diagnostic disable: missing-fields
    config = {
      basedpyright = {
        before_init = function(_, c)
          if not c.settings then c.settings = {} end
          if not c.settings.python then c.settings.python = {} end
          c.settings.python.pythonPath = vim.fn.exepath &quot;python&quot;
        end,
        settings = {
          basedpyright = {
            analysis = {
              -- ignore = { &quot;*&quot; },
              -- autoImportCompletions = true,
              -- autoSearchPaths = true,
              diagnosticMode = &quot;openFilesOnly&quot;,
              useLibraryCodeForTypes = true,
              -- reportMissingImports = true,
              typeCheckingMode = &quot;standard&quot;,
            },
          },
        },
      },
    },
  },
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-12 05:33</div>
            <div class="timeline-body"><blockquote>
<p>Unfortunately, I haven&#x27;t been able to find the same configuration for <code>ruff</code>, because it implies that user would be using it as a main linter, instead of <code>basedpyright</code>.</p>
</blockquote>
<p>I&#x27;m not familiar with AstroNvim but are you saying that Ruff is configured to be the default linter in that framework and you&#x27;re interested in using Ruff only as a formatter? I couldn&#x27;t find any references to &quot;ruff&quot; in the repository (https://github.com/search?q=repo:AstroNvim/AstroNvim%20ruff&amp;type=code). It&#x27;s a bit difficult to help without knowing the way you&#x27;ve configured Ruff in your editor ðŸ˜…</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/memeLordo">@memeLordo</a> on 2024-08-13 13:13</div>
            <div class="timeline-body"><p>That&#x27;s the point, it isn&#x27;t configured at all, but still works. I will ask in a forum of AstroNvim for this and provide the answer once it&#x27;s gotten here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/memeLordo">@memeLordo</a> on 2024-08-13 13:47</div>
            <div class="timeline-body"><blockquote>
<p>Have you tried setting <a href="https://docs.astral.sh/ruff/editors/settings/#lint_enable">lint.enable</a></p>
<p>If you need more help, please share your neovim configuration.</p>
</blockquote>
<p>Here how you, presumably, can configure the same code in AstroNvim:</p>
<p><code>.../plugins/ruff_config.lua</code>:</p>
<pre><code>return {
  &quot;AstroNvim/astrolsp&quot;,
  opts = {
    config = {
      ruff_lsp = {
        settings = {
          ruff = {
            lint = {
              enable = false,
            },
          },
        },
      },
    },
  },
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/memeLordo">@memeLordo</a> on 2024-08-13 13:48</div>
            <div class="timeline-body"><p>But still I get the same double-linting. Will be waiting for the reply from AstroTeam.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-13 13:55</div>
            <div class="timeline-body"><p>Can you confirm (via docs?) the name of the Ruff server as defined in the plugin? Is it <code>ruff_lsp</code> or <code>ruff</code> (native server)? Either way, it should be <code>init_options</code> instead of <code>settings</code> if these are the server settings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mehalter">@mehalter</a> on 2024-08-13 14:48</div>
            <div class="timeline-body"><p>This was resolved by correctly adding the code from the  ruff documentation.</p>
<p>No issue here on the ruff side ðŸ˜„</p>
<pre><code>return {
  &quot;AstroNvim/astrolsp&quot;,
  opts = {
    config = {
      ruff = {
        init_options = {
          settings = {
            lint = { enable = false },
          },
        },
      },
    },
  },
}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/memeLordo">@memeLordo</a> on 2024-08-13 14:49</div>
            <div class="timeline-body"><p>Yeah, it&#x27;s true. Thank you a lot!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/memeLordo">@memeLordo</a> on 2024-08-13 14:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Disable Ruff lint&quot; to &quot;How to disable Ruff linter in AstroNvim LSP?&quot; by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-13 16:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:56 UTC
    </footer>
</body>
</html>
