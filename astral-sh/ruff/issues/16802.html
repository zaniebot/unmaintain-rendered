<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Infinite loop] I002 and UP035 - astral-sh/ruff #16802</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Infinite loop] I002 and UP035</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/16802">#16802</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-03-17 12:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dscorbett">@dscorbett</a> on 2025-03-17 12:35</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Ruff fails to converge when <a href="https://docs.astral.sh/ruff/rules/missing-required-import/"><code>missing-required-import</code> (I002)</a> and <a href="https://docs.astral.sh/ruff/rules/deprecated-import/"><code>deprecated-import</code> (UP035)</a> are selected and a deprecated import is required.</p>
<pre><code class="language-console">$ echo 1 | ruff --isolated check - --select I002,UP035 --config 'lint.isort.required-imports=[&quot;from collections import Sequence&quot;]' --fix

error: Failed to converge after 100 iterations.

This indicates a bug in Ruff. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BInfinite%20loop%5D

...quoting the contents of `-`, the rule codes I002, along with the `pyproject.toml` settings and executed command, we'd be very appreciative!

from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
from collections.abc import Sequence
1
-:1:1: I002 Missing required import: `from collections import Sequence`
Found 101 errors (100 fixed, 1 remaining).
[*] 1 fixable with the `--fix` option.
</code></pre>
<h3>Version</h3>
<p>ruff 0.11.0 (2cd25ef64 2025-03-14)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-03-17 12:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by @AlexWaygood on 2025-03-17 12:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @AlexWaygood on 2025-03-17 12:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> removed by @AlexWaygood on 2025-03-17 12:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-17 12:50</div>
            <div class="timeline-body"><p>I haven't looked closely enough to know if this is a good approach, but the fix could possibly be similar to the changes in https://github.com/astral-sh/ruff/pull/15480.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dylwil3">@dylwil3</a> on 2025-03-17 13:50</div>
            <div class="timeline-body"><p>I think in this particular case another option could be to just not offer the <em>fix</em> for <code>UP035</code> here, or even maybe ignore the rule altogether for required imports.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-03-17 14:15</div>
            <div class="timeline-body"><blockquote>
<p>or even maybe ignore the rule altogether for required imports.</p>
</blockquote>
<p>this makes sense to me. If we do this, we could even say in the docs for <code>UP035</code> that one way of configuring the rule (excluding certain deprecated-import upgrades) is to specify the <code>lint.isort.required-imports</code> setting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/18729.html">astral-sh/ruff#18729</a> on 2025-06-17 17:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/19413.html">astral-sh/ruff#19413</a> on 2025-07-28 18:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-07-31 19:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/21115.html">astral-sh/ruff#21115</a> on 2025-10-29 19:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:16 UTC
    </footer>
</body>
</html>
