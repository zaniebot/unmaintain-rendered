```yaml
number: 20018
title: "unused `readline` import should be allowed"
type: issue
state: open
author: A5rocks
labels:
  - rule
  - needs-decision
assignees: []
created_at: 2025-08-21T07:40:08Z
updated_at: 2025-08-23T15:39:04Z
url: https://github.com/astral-sh/ruff/issues/20018
synced_at: 2026-01-10T01:56:57Z
```

# unused `readline` import should be allowed

---

_Issue opened by @A5rocks on 2025-08-21 07:40_

### Summary

`readline` is a funny module in the stdlib that, if you import it, has side effects on `input`. It shouldn't raise F401.

See https://play.ruff.rs/67cbd733-7f37-4318-abc9-1c7e67bf5ea9

### Version

v0.12.9

---

_Comment by @ntBre on 2025-08-21 13:37_

That's cool, I didn't realize just importing `readline` would change how `input` works.

Is this common? It makes some sense to special-case this since it's in the standard library, but it could also be a good use-case for noqa or [allowed-unused-imports](https://docs.astral.sh/ruff/settings/#lint_pyflakes_allowed-unused-imports) if it's uncommon. I'm not sure if we'd always want to allow `readline` to be unused or only if `input` is also used. In other cases the import may still be unused.

For what it's worth, pyflakes also flags this example, so we're at least in line with upstream.

---

_Label `rule` added by @ntBre on 2025-08-21 13:37_

---

_Label `needs-decision` added by @ntBre on 2025-08-21 13:37_

---

_Comment by @A5rocks on 2025-08-21 14:37_

I'm not sure it's common. I was thinking about some related code and then was hit with "I bet ruff doesn't support *this*" :^)

It might be better to wait and see if anyone actually needs this (i.e. makes an issue about this).

---

_Comment by @Avasam on 2025-08-23 15:39_

This also relates to https://github.com/astral-sh/ruff/issues/8149 about analysing side-effect imports.

Since stdlib has a limited number of known modules, it could be hardcoded to avoid unnecessary analysis.

https://hadialqattan.github.io/pycln/#/?id=implicit-imports-from-sub-packages
> All Python standrad modules are considered as imports without side effects except ([this](https://www.python.org/dev/peps/pep-0020/), [antigravity](http://python-history.blogspot.com/2010/06/import-antigravity.html), [rlcompleter](https://docs.python.org/3.8/library/rlcompleter.html)).

I guess you'd add readline to this.

---
