<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Print warning when run against an unsupported file - astral-sh/ruff #1473</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Print warning when run against an unsupported file</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1473">#1473</a>
        opened by <a href="https://github.com/not-my-profile">@not-my-profile</a>
        on 2022-12-30 10:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2022-12-30 10:56</div>
            <div class="timeline-body"><pre><code>$ echo 'not json' &gt; foo.json 
$ ruff foo.json 
$ echo $?
0
</code></pre>
<p>We might also consider returning a non-zero status code since the file isn't supported.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2022-12-30 12:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-30 12:22</div>
            <div class="timeline-body"><p>Good idea.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-30 12:22</div>
            <div class="timeline-body"><p>(And agree -- non-zero.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-30 16:28</div>
            <div class="timeline-body"><p>We should probably also warn if we can't find any valid files (but aren't passed an invalid file <em>directly</em>).</p>
<p>For example: <code>ruff foo/</code> where <code>foo</code> is an empty directory, or doesn't contain any <code>.py</code> or <code>.pyi</code> files.</p>
<p>Here's how Black handles these cases:</p>
<pre><code>ruff on î‚  charlie/fix-message:main [$â‡¡] is ğŸ“¦ v0.0.202 via ğŸ v3.11.1 (.venv) via ğŸ¦€ v1.65.0
â¯ black pyproject.toml
error: cannot format pyproject.toml: Cannot parse: 41:8: combine-as-imports = true

Oh no! ğŸ’¥ ğŸ’” ğŸ’¥
1 file failed to reformat.
ruff on î‚  charlie/fix-message:main [$â‡¡] is ğŸ“¦ v0.0.202 via ğŸ v3.11.1 (.venv) via ğŸ¦€ v1.65.0
â¯ black pyproject.toml setup.py
blerror: cannot format pyproject.toml: Cannot parse: 41:8: combine-as-imports = true

Oh no! ğŸ’¥ ğŸ’” ğŸ’¥
1 file left unchanged, 1 file failed to reformat.
ruff on î‚  charlie/fix-message:main [$â‡¡] is ğŸ“¦ v0.0.202 via ğŸ v3.11.1 (.venv) via ğŸ¦€ v1.65.0
â¯ black foo
No Python files are present to be formatted. Nothing to do ğŸ˜´
ruff on î‚  charlie/fix-message:main [$â‡¡] is ğŸ“¦ v0.0.202 via ğŸ v3.11.1 (.venv) via ğŸ¦€ v1.65.0
â¯ black foo/ setup.py
All done! âœ¨ ğŸ° âœ¨
1 file left unchanged.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2022-12-30 20:36</div>
            <div class="timeline-body"><p>In short:</p>
<ul>
<li>(Optional) If we don't find <em>any</em> files, show a warning.</li>
<li>If we're passed a non <code>.py</code> or <code>.pyi</code> file, raise an error for that file (but process any valid files).</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2022-12-31 13:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @charliermarsh on 2022-12-31 18:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:10:16 UTC
    </footer>
</body>
</html>
