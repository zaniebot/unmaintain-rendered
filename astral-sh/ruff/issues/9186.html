<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>docstring code formatter: add a `--docstring-code-format` parameter to `ruff format` CLI - astral-sh/ruff #9186</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>docstring code formatter: add a `--docstring-code-format` parameter to `ruff format` CLI</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/9186">#9186</a>
        opened by <a href="https://github.com/kdeldycke">@kdeldycke</a>
        on 2023-12-18 15:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2023-12-18 15:46</div>
            <div class="timeline-body"><p>Following the implementation of experimental docstring format, a <code>docstring-code-format</code> configuration &quot;knob&quot; has been added in #8854. That way you can activate this new behavior by adding the following to <code>ruff.toml</code> (or any equivalent):</p>
<pre><code class="language-toml">[format]
docstring-code-format = true
</code></pre>
<p>What I would like to have is a <code>--docstring-code-format</code> CLI option that I can use like so:</p>
<pre><code class="language-shell-session">$ ruff format --docstring-code-format .
</code></pre>
<p>Why? Because I would like to test the docstring formatter on some projects, by the way of reuseable GitHub actions. And for these projects, I do not have the authority on the configuration files. I can only alter CLI parameters of ruff in the actions.</p>
<p>Is my proposal reasonable? Or is there a way I can pass arbitrary local configuration parameters via the CLI?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "docstring code formatter: add a `--docstring-code-format` parameter to the CLI" to "docstring code formatter: add a `--docstring-code-format` parameter to `ruff format` CLI" by @kdeldycke on 2023-12-18 15:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2023-12-19 08:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @MichaReiser on 2023-12-19 08:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-12-19 09:56</div>
            <div class="timeline-body"><p>Hy @kdeldycke</p>
<p>Thanks for opening this issue and explaining your use case.</p>
<p>We've been hesitant to expose all formater options because the main benefit of a formatter is consistency and it requires that all users use the same configuration, ideally commited in the repository. We only support <code>--line-length</code> today (see https://github.com/astral-sh/ruff/pull/8363). But we understand that there are use cases where providing the option via CLI is useful, your use case is one of them. Our preferred solution is that ruff has a generic way to set an arbitrary configuration value. It encourage using configuration files over using CLI options but enables use cases like yours. See https://github.com/astral-sh/ruff/issues/8368</p>
<p>Unfortunately, we haven't made progress with implementing a generic way to pass option values yet which, understandably, is unsatisfying for users.</p>
<p>I don't think there's a good workaround for use case at the moment. You could specify another configuration but it would override all other settings too (and disables the automatic configuration discovery).</p>
<p>Related to:</p>
<ul>
<li>https://github.com/astral-sh/ruff/issues/8737</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @MichaReiser on 2023-12-19 09:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2023-12-19 09:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @MichaReiser on 2023-12-22 06:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @MichaReiser on 2023-12-22 06:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2024-01-04 12:47</div>
            <div class="timeline-body"><p>Thanks @MichaReiser for the detailed explanation of the current state of the CLI. I totally understand the priority and decision of my feature request. There are things way more important to focus on.</p>
<p>In the mean time, I hacked my way into generating a <a href="https://github.com/kdeldycke/workflows/blob/dcc778a4534e417b23042867d9fb402ad4ed8568/.github/workflows/autofix.yaml#L85-L131">custom local <code>ruff.toml</code> file</a> to feed to my CLI.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2024-01-05 07:40</div>
            <div class="timeline-body"><p>Another use case to consider, is using CLI parameters to setting up <a href="https://marketplace.visualstudio.com/items?itemName=charliermarsh.ruff">Ruff VScode extension</a>:</p>
<p><img src="https://github.com/astral-sh/ruff/assets/159718/1c0a8f6b-18ad-4581-8634-c7b1a3021e08" alt="Screenshot 2024-01-05 at 11 37 46" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/9599.html">astral-sh/ruff#9599</a> on 2024-02-06 19:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-06 19:09</div>
            <div class="timeline-body"><p>This will be supported once https://github.com/astral-sh/ruff/issues/9186 is merged</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-02-09 21:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:11 UTC
    </footer>
</body>
</html>
