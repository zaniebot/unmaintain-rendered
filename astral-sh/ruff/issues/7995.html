<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add newline after module docstrings (`module_docstring_newlines`) - astral-sh/ruff #7995</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add newline after module docstrings (<code>module_docstring_newlines</code>)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/7995">#7995</a>
        opened by <a href="https://github.com/DanielNoord">@DanielNoord</a>
        on 2023-10-16 20:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/DanielNoord">@DanielNoord</a> on 2023-10-16 20:20</div>
            <div class="timeline-body"><pre><code class="language-python">&quot;&quot;&quot;Test docstring&quot;&quot;&quot;
a = 1
</code></pre>
<p>On the playground this does not currently get a newline added with the <code>format</code> option turned on.</p>
<p>Recently a PR of mine got merged to <code>black</code> to include a newline after the module docstring:
https://github.com/psf/black/pull/3932
<em>Most credits should go to others though for that PR as I mostly copied and rebased code.</em></p>
<p>It's still in the preview style but got generally favourable responses when initially proposed a couple of year ago. Since nobody has really objected to it during its previous iterations I expect it to be part of the default style some day.</p>
<p>Would <code>ruff</code> be open to to include this change to <code>ruff format</code> as well?</p>
<p><em>EDIT: Oh, and congrats on the <code>0.1.0</code> release ðŸŽ‰</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-16 20:45</div>
            <div class="timeline-body"><p>Cool, so this is part of Black's preview style? If so, we'll likely add it under our own <code>--preview</code> flag soon.</p>
<p>(And thank you!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @charliermarsh on 2023-10-16 20:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Formatter: Stable" by @charliermarsh on 2023-10-16 20:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-16 20:45</div>
            <div class="timeline-body"><p>@konstin - Perhaps another good / easy one for preview.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @MichaReiser on 2023-10-17 00:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DanielNoord">@DanielNoord</a> on 2023-10-17 06:48</div>
            <div class="timeline-body"><p>@charliermarsh Sorry should have been clearer. This is currently only available on <code>black</code> <code>main</code> as <code>preview</code>. (I run from <code>master</code> locally). You can see in the linked PR that it actually already applies to <code>blacks</code> own codebase. There hasn't been a release yet, I can ask them when they plan on doing so but I don't want to bother the maintainers too much.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-10-18 13:09</div>
            <div class="timeline-body"><p>I added a test case in #8044, it's not trivial to fix though</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-18 22:05</div>
            <div class="timeline-body"><blockquote>
<p>I added a test case in #8044, it's not trivial to fix though</p>
</blockquote>
<p>We could try to format it as part of the module if the first statement in the suite is a doc comment without any leading comments? Not sure how to handle trailing suppression comments though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @konstin by @konstin on 2023-10-20 10:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-10-28 01:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add newline after module docstrings" to "Add newline after module docstrings (`module_docstring_newlines`)" by @MichaReiser on 2023-11-29 00:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:31:36 UTC
    </footer>
</body>
</html>
