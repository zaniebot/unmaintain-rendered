<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FURB192 fix should always be unsafe? - astral-sh/ruff #22204</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>FURB192 fix should always be unsafe?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/22204">#22204</a>
        opened by <a href="https://github.com/harupy">@harupy</a>
        on 2025-12-26 10:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/harupy">@harupy</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>The FURB192 fix is currently marked as unsafe only when <code>reverse</code> is present, but it should always be unsafe.</p>
<h3>Examples where <code>min/max</code> leads to a behavior change</h3>
<pre><code class="language-python">data = [&quot;a&quot;, &quot;b&quot;]
sorted(data, key=len)[-1]  # &quot;b&quot; (last equal item)
max(data, key=len)  # &quot;a&quot; (first equal item)


class Item:
    def __init__(self, k, name):
        self.k = k
        self.name = name

    def __lt__(self, other):
        return self.k &lt; other.k


items = [Item(1, &quot;a&quot;), Item(1, &quot;b&quot;)]
sorted(items)[-1].name  # &quot;b&quot;
max(items).name  # &quot;a&quot;
</code></pre>
<p>Output</p>
<pre><code>FURB192 [*] Prefer `max` over `sorted()` to compute the maximum value in a sequence
 --&gt; examples.py:2:1
  |
1 | data = [&quot;a&quot;, &quot;b&quot;]
2 | sorted(data, key=len)[-1]  # &quot;b&quot; (last equal item)
  | ^^^^^^^^^^^^^^^^^^^^^^^^^
3 | max(data, key=len)  # &quot;a&quot; (first equal item)
  |
help: Replace with `max`
1 | data = [&quot;a&quot;, &quot;b&quot;]
  - sorted(data, key=len)[-1]  # &quot;b&quot; (last equal item)
2 + max(data, key=len)  # &quot;b&quot; (last equal item)
3 | max(data, key=len)  # &quot;a&quot; (first equal item)
4 | 
5 | 

FURB192 [*] Prefer `max` over `sorted()` to compute the maximum value in a sequence
  --&gt; examples.py:16:1
   |
15 | items = [Item(1, &quot;a&quot;), Item(1, &quot;b&quot;)]
16 | sorted(items)[-1].name  # &quot;b&quot;
   | ^^^^^^^^^^^^^^^^^
17 | max(items).name  # &quot;a&quot;
   |
help: Replace with `max`
13 | 
14 | 
15 | items = [Item(1, &quot;a&quot;), Item(1, &quot;b&quot;)]
   - sorted(items)[-1].name  # &quot;b&quot;
16 + max(items).name  # &quot;b&quot;
17 | max(items).name  # &quot;a&quot;

Found 2 errors.
[*] 2 fixable with the `--fix` option.
</code></pre>
<h3>Version</h3>
<p>9693375e101ffb7749c160230ca90d820161a5da</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-26 15:20</div>
            <div class="timeline-body"><p>Nice catch! It makes sense to me to mark it always unsafe. We already have some pretty extensive docs about its unsafety around breaking ties too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @ntBre on 2025-12-26 15:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by @ntBre on 2025-12-26 15:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/harupy">@harupy</a> on 2025-12-26 15:26</div>
            <div class="timeline-body"><p>@ntBre Thanks for the comment! Can I file a PR for this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/harupy">@harupy</a> on 2025-12-27 10:36</div>
            <div class="timeline-body"><p>@ntBre Filed #22210 :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-12-29 14:17</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:44 UTC
    </footer>
</body>
</html>
