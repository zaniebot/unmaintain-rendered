```yaml
number: 1348
title: Support for refurb
type: issue
state: open
author: guyrosin
labels:
  - plugin
assignees: []
created_at: 2022-12-23T12:19:46Z
updated_at: 2025-12-31T23:15:33Z
url: https://github.com/astral-sh/ruff/issues/1348
synced_at: 2026-01-10T01:56:44Z
```

# Support for refurb

---

_Issue opened by @guyrosin on 2022-12-23 12:19_

It would be nice to have support for refurb (https://github.com/dosisod/refurb) - a great tool for simplifying and modernizing Python code. It currently includes 48 checks.

---

_Label `rule` added by @charliermarsh on 2022-12-24 19:09_

---

_Label `rule` removed by @charliermarsh on 2022-12-31 18:13_

---

_Label `plugin` added by @charliermarsh on 2022-12-31 18:13_

---

_Referenced in [astral-sh/ruff#1774](../../astral-sh/ruff/issues/1774.md) on 2023-01-23 21:58_

---

_Comment by @sbrugman on 2023-01-26 15:18_

### builtin
- [x] [`FURB113`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/list_extend.py) use-list-extend: Use `x.extend(...)` instead of repeatedly calling `x.append()`
- [x] [`FURB131`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_del.py) no-del: 
- [x] [`FURB135`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_ignored_dict_items.py) no-ignored-dict-items: ([PERF102](https://docs.astral.sh/ruff/rules/incorrect-dict-iterator/))
- [x] [`FURB148`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_ignored_enumerate.py) no-ignored-enumerate-items: 
- [x] [`FURB142`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_set_for_loop.py) no-set-for-loop: 
- [x] [`FURB145`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_slice_copy.py) no-slice-copy: Replace `x[:]` with `x.copy()`
- [x] [`FURB105`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/print.py) simplify-print: Replace `print("")` with `print()`
- [x] [`FURB132`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/set_discard.py) use-set-discard: Replace `if x in s: s.remove(x)` with `s.discard(x)`
- [x] [`FURB137`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/simplify_comprehension.py) simplify-comprehension: 
- [x] [`FURB154`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/simplify_global_and_nonlocal.py) simplify-global-and-nonlocal: 
- [x] [`FURB121`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/use_isinstance_tuple.py)(PLR1701/SIM101) use-isinstance-issubclass-tuple: 
- [x] [`FURB136`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/use_max.py) use-min-max: 
- [x] [`FURB122`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/writelines.py) use-writelines: Replace `for line in lines: f.write(line)` with `f.writelines(lines)`
- [x]  [`FURB161`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/use_bit_count.py) use-bit-count: `bin(0b1010).count("1")`
- [x]  [`FURB166`](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/use_int_base_zero.py) use-int-base-zero: `int(x[2:], 2)` -> `int(x, 0)`
- [ ]  `FURB173` use-dict-union: `{"k": "v", **d}` -> `{"k": "v"} | d`

### contextlib
- [X] [`FURB107`](https://github.com/dosisod/refurb/blob/master/refurb/checks/contextlib/with_suppress.py)(SIM105) use-with-suppress: 

### datetime
* [x]  [`FURB162`](https://github.com/dosisod/refurb/blob/master/refurb/checks/datetime/simplify_fromisoformat.py) simplify-fromisoformat
* [x]  [`FURB176`](https://github.com/dosisod/refurb/blob/master/refurb/checks/datetime/simplify_fromisoformat.py) (DTZ003/DTZ004) unreliable-utc-usage

### decimal
* [x] `FURB157`: simplify-decimal-ctor: `Decimal("123")` -> `Decimal(123)` 
* [x]  `FURB164`: no-from-float: `Decimal.from_float(x)` -> `Decimal(x)`

### flow
- [ ] [`FURB133`](https://github.com/dosisod/refurb/blob/master/refurb/checks/flow/no_trailing_continue.py) no-redundant-continue: Continue is redundant here
- [ ] [`FURB125`](https://github.com/dosisod/refurb/blob/master/refurb/checks/flow/no_trailing_return.py) no-redundant-return: Return is redundant here
- [ ] [`FURB127`](https://github.com/dosisod/refurb/blob/master/refurb/checks/flow/no_with_assign.py) no-with-assign: This variable is redeclared later, and can be removed here
- [ ] [`FURB126`](https://github.com/dosisod/refurb/blob/master/refurb/checks/flow/simplify_return.py) simplify-return: 

### function
- [ ] [`FURB120`](https://github.com/dosisod/refurb/blob/master/refurb/checks/function/use_implicit_default.py) use-implicit-default: Don't pass an argument if it is the same as the default value

### functools
- [x] [`FURB134`](https://github.com/dosisod/refurb/blob/master/refurb/checks/functools/use_cache.py)(UP033) use-cache: Replace `@lru_cache(maxsize=None)` with `@cache`

### iterable
- [x] [`FURB129`](https://github.com/dosisod/refurb/blob/master/refurb/checks/iterable/implicit_readlines.py) simplify-readlines: Replace `f.readlines()` with `f`
- [ ] [`FURB109`](https://github.com/dosisod/refurb/blob/master/refurb/checks/iterable/in_tuple.py) use-consistent-in-bracket: 

### itertools
- [x] [`FURB140`](https://github.com/dosisod/refurb/blob/master/refurb/checks/itertools/use_starmap.py) use-starmap: Replace `f(...) for ... in x` with `starmap(f, x)`
- [ ] [`FURB179`](https://github.com/dosisod/refurb/blob/master/refurb/checks/itertools/use_chain_from_iterable.py) use-chain-from-iterable

### logical
- [ ] [`FURB124`](https://github.com/dosisod/refurb/blob/master/refurb/checks/logical/use_equal_chain.py) use-comparison-chain: 
- [x] [`FURB108`](https://github.com/dosisod/refurb/blob/master/refurb/checks/logical/use_in.py) use-in-oper: (`SIM109`)
- [x] [`FURB110`](https://github.com/dosisod/refurb/blob/master/refurb/checks/logical/use_or.py) use-or-oper: Replace `x if x else y` with `x or y`

### math
- [x] [`FURB152`](https://github.com/dosisod/refurb/blob/master/refurb/checks/math/use_constants.py) use-math-constant: 
- [x]  `FURB163`: simplify-math-log: `math.log(x, 10)` -> `math.log10(x)`

### pathlib
- [x] [`FURB104`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/cwd.py) use-pathlib-cwd: Replace `os.getcwd()` with `Path.cwd()`
- [x] [`FURB141`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/exists.py) (PTH110) use-pathlib-exists: 
- [x] [`FURB146`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/is_file.py)(PTH113) use-pathlib-is-funcs: 
- [x] [`FURB150`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/mkdir.py)(PTH102) use-pathlib-mkdir: 
- [x] [`FURB147`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/no_join.py) (PTH118) no-path-join: 
- [x] [`FURB117`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/open.py) use-pathlib-open: 
- [x] [`FURB101`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/read_text.py) use-pathlib-read-text-read-bytes: 
- [x] [`FURB153`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/simplify_ctor.py)(PTH201) simplify-path-constructor: Replace `Path(".")` with `Path()`
- [ ] [`FURB151`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/touch.py) use-pathlib-touch: 
- [x] [`FURB144`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/unlink.py)(PTH107) use-pathlib-unlink: 
- [ ] [`FURB100`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/with_suffix.py) use-pathlib-with-suffix: Use `Path(x).with_suffix(y)` instead of slice and concat
- [ ] [`FURB103`](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/write_text.py) use-pathlib-write-text-write-bytes: 
- [ ]  `FURB172`: use-suffix
- [x]  `FURB155` (PTH202)

### readability
- [x] [`FURB130`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/in_keys.py)(SIM118) no-in-dict-keys: 
- [x] [`FURB114`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_double_not.py)(SIM208) no-double-not: Replace `not not x` with `bool(x)`
- [ ] ~[`FURB149`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_is_bool_compare.py) no-bool-literal-compare~ (https://github.com/astral-sh/ruff/pull/9539) 
- [ ] [`FURB115`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_len_cmp.py) no-len-compare: 
- [ ] [`FURB143`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_or_default.py) no-default-or: 
- [ ] [`FURB123`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_unnecessary_cast.py) no-redundant-cast: 
- [x] [`FURB138`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_comprehension.py)(PERF401) use-list-comprehension: Consider using list comprehension
- [x] [`FURB111`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_func_name.py) use-func-name: Replace `lambda x: f(x)` with `f`
- [x] [`FURB112`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_literal.py) use-literal: ([C408](https://docs.astral.sh/ruff/rules/unnecessary-collection-call/))
- [x] [`FURB118`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_operators.py) use-operator: 
- [ ] [`FURB128`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_tuple_swap.py) use-tuple-unpack-swap: Use tuple unpacking instead of temporary variables to swap values
- [ ]  `FURB160`: no-redundant-assignment: `x = x`
- [ ]  `FURB165`: no-temp-class-object
- [x]  `FURB168`: no-isinstance-type-none: `isinstance(x, type(None))` -> `x is None`
- [x]  `FURB169`: no-is-type-none: `type(x) is type(None)` -> `x is None`
- [x]  `FURB171`: no-single-item-in: `x in (,y)` -> `x == y`

### string
- [ ] [`FURB106`](https://github.com/dosisod/refurb/blob/master/refurb/checks/string/expandtabs.py) use-expandtabs: 
- [x] [`FURB116`](https://github.com/dosisod/refurb/blob/master/refurb/checks/string/fstring_number.py) use-fstring-number-format: 
- [ ] [`FURB139`](https://github.com/dosisod/refurb/blob/master/refurb/checks/string/no_multiline_lstrip.py) no-multiline-lstrip: Replace `"""\n...""".lstrip()` with `"""\..."""`
- [x] [`FURB102`](https://github.com/dosisod/refurb/blob/master/refurb/checks/string/startswith.py)(PIE810) use-startswith-endswith-tuple: 
- [x] [`FURB119`](https://github.com/dosisod/refurb/blob/master/refurb/checks/string/use_fstring_fmt.py) use-fstring-format: 
- [ ]  FURB156: use-string-charsets
- [ ]  FURB159: simplify-strip

### FastAPI
* [ ]  FURB175: simplify-fastapi-query

### Misc
* [ ]  FURB174: simplify-token-function
 
### Pattern matching
* [ ]  FURB158: simplify-as-pattern-with-builtin: `case str() as x:` -> `case str(x):`
 
### Regex 
* [x]  FURB167: use-long-regex-flag: `re.I` -> `re.IGNORECASE`
* [ ]  FURB170: use-regex-pattern-methods
 

---

_Comment by @sbrugman on 2023-01-26 17:32_

@charliermarsh `refurb` leverages type information from mypy for many of its checks (it actually extends mypy).
For instance, [no_del](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_del.py#L50) looks if the variable is of type `list` of `dict` to determine the violation. 

Are there any examples of rules where `ruff` keeps track of the type of a variable? And perhaps broader, what is your view on type inference in `ruff`?

---

_Referenced in [astral-sh/ruff#2348](../../astral-sh/ruff/pulls/2348.md) on 2023-01-30 11:51_

---

_Referenced in [astral-sh/ruff#2608](../../astral-sh/ruff/issues/2608.md) on 2023-02-06 20:11_

---

_Label `needs-decision` added by @charliermarsh on 2023-07-10 02:53_

---

_Referenced in [astral-sh/ruff#5833](../../astral-sh/ruff/pulls/5833.md) on 2023-07-17 14:12_

---

_Referenced in [astral-sh/ruff#5905](../../astral-sh/ruff/issues/5905.md) on 2023-07-20 18:10_

---

_Referenced in [dosisod/refurb#190](../../dosisod/refurb/issues/190.md) on 2023-07-22 05:32_

---

_Comment by @dosisod on 2023-07-22 07:58_

Hi, creator of Refurb here! I've added a bunch of checks since this issue was opened, so I would like to give an updated list of what's new. I also went ahead and checked all the existing items on the list to see which ones have been completed and need to be marked off. The docs explaining each of the checks can be found [here](https://github.com/dosisod/refurb/blob/master/docs/checks.md).

These Refurb checks are already in Ruff and can be checked off:

* FURB102 (PIE810)
* FURB114 (SIM208)
* FURB121 (PLR1701/SIM101)
* FURB138 (PERF401)
* FURB144 (PTH107)
* FURB146 (PTH113)
* FURB150 (PTH102)
* *These are new checks that will need to be added to the list (see below)*
* FURB155 (PTH202)
* FURB176 (DTZ003/DTZ004)

In the process I found a bunch of rules in Ruff that are either giving false positives or aren't emitting errors for all the tests in the Refurb test suite. I wouldn't consider these 100% merged, but I'll list them here anyways and will open issues individually later:

* FURB107 (SIM105)
* FURB108 (PLR1714)
* FURB112 (C408/UP018)
* FURB119 (RUF010)
* FURB123 (UP018)
* FURB125 (PLR1711)
* FURB126 (RET505)
* FURB130 (SIM118)
* FURB135 (PERF102)
* FURB137 (C400/C401/C403/C411)

The rest are new checks that have been added since this issue was opened, and don't tie to any existing rule in Ruff. I tried to maintain the same format as the comment by @sbrugman

#### builtin

- [x] FURB161: use-bit-count: `bin(0b1010).count("1")`
- [ ] FURB166: use-int-base-zero: `int(x[2:], 2)` -> `int(x, 0)`
- [ ] FURB173: use-dict-union: `{"k": "v", **d}` -> `{"k": "v"} | d`

#### Datetime

- [ ] FURB162: simplify-fromisoformat
- [x] FURB176 (DTZ003/DTZ004)

#### Decimal

- [ ] FURB157: simplify-decimal-ctor: `Decimal("123")` -> `Decimal(123)`
- [ ] FURB164: no-from-float: `Decimal.from_float(x)` -> `Decimal(x)`

#### FastAPI

- [ ] FURB175: simplify-fastapi-query

#### Math

- [ ] FURB163: simplify-math-log: `math.log(x, 10)` -> `math.log10(x)`

#### Misc

- [ ] FURB174: simplify-token-function

#### Pathlib

- [ ] FURB172: use-suffix
- [x] FURB155 (PTH202)

#### Pattern matching

- [ ] FURB158: simplify-as-pattern-with-builtin: `case str() as x:` -> `case str(x):`

#### Readability

- [x] FURB160: no-redundant-assignment: `x = x`
- [ ] FURB165: no-temp-class-object
- [ ] FURB168: no-isinstance-type-none: `isinstance(x, type(None))` -> `x is None`
- [ ] FURB169: no-is-type-none: `type(x) is type(None)` -> `x is None`
- [ ] FURB171: no-single-item-in: `x in (,y)` -> `x == y`

#### Regex

- [x] FURB167: use-long-regex-flag: `re.I` -> `re.IGNORECASE`
- [ ] FURB170: use-regex-pattern-methods

#### String

- [ ] FURB156: use-string-charsets
- [ ] FURB159: simplify-strip

That's it! Feel free to hide/edit this comment once the original comment gets updated.

---

_Comment by @sbrugman on 2023-07-22 12:20_

@dosisod Thanks for the extensive review, I've updated the tracking. The rules that are nearly implemented because of the different behaviours on some tests cases we will mark as complete as they are fixed.

Currently working on `FURB101` and `FURB103`

---

_Referenced in [astral-sh/ruff#5977](../../astral-sh/ruff/issues/5977.md) on 2023-07-22 13:24_

---

_Referenced in [astral-sh/ruff#5987](../../astral-sh/ruff/issues/5987.md) on 2023-07-22 20:48_

---

_Referenced in [astral-sh/ruff#5988](../../astral-sh/ruff/issues/5988.md) on 2023-07-22 21:08_

---

_Referenced in [astral-sh/ruff#5995](../../astral-sh/ruff/pulls/5995.md) on 2023-07-23 01:04_

---

_Comment by @SavchenkoValeriy on 2023-08-13 08:49_

Hey there folks, I'm working on [FURB113](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/list_extend.py).

---

_Referenced in [astral-sh/ruff#5377](../../astral-sh/ruff/issues/5377.md) on 2023-08-17 02:54_

---

_Referenced in [astral-sh/ruff#6587](../../astral-sh/ruff/issues/6587.md) on 2023-08-17 03:13_

---

_Referenced in [astral-sh/ruff#6702](../../astral-sh/ruff/pulls/6702.md) on 2023-08-20 12:35_

---

_Referenced in [astral-sh/ruff#6897](../../astral-sh/ruff/pulls/6897.md) on 2023-08-26 13:42_

---

_Referenced in [astral-sh/ruff#6904](../../astral-sh/ruff/pulls/6904.md) on 2023-08-26 20:32_

---

_Comment by @SavchenkoValeriy on 2023-08-26 20:43_

Also implemented [FURB131](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_del.py) and [FURB132](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/set_discard.py).

@charliermarsh WDYT? Do you think it's worth it? Thanks!

---

_Comment by @SavchenkoValeriy on 2023-08-29 16:36_

Working on [FURB140](https://github.com/dosisod/refurb/blob/master/refurb/checks/itertools/use_starmap.py).

---

_Referenced in [astral-sh/ruff#6995](../../astral-sh/ruff/issues/6995.md) on 2023-08-29 20:05_

---

_Comment by @tjkuson on 2023-08-30 11:38_

Working on [FURB145](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_slice_copy.py).

---

_Referenced in [astral-sh/ruff#7007](../../astral-sh/ruff/pulls/7007.md) on 2023-08-30 11:57_

---

_Comment by @jack-mcivor on 2023-09-06 12:31_

I'm guessing the `needs-decision` label could be removed or replaced?

---

_Label `needs-decision` removed by @charliermarsh on 2023-09-06 12:40_

---

_Comment by @charliermarsh on 2023-09-06 12:40_

Good call, thanks.

---

_Referenced in [astral-sh/ruff#7253](../../astral-sh/ruff/pulls/7253.md) on 2023-09-09 14:45_

---

_Comment by @SavchenkoValeriy on 2023-09-09 15:23_

Working on [FURB101](https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/read_text.py)

---

_Comment by @tjkuson on 2023-09-16 11:55_

Working on [FURB148](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_ignored_enumerate.py).

---

_Referenced in [astral-sh/ruff#7454](../../astral-sh/ruff/pulls/7454.md) on 2023-09-17 11:24_

---

_Referenced in [astral-sh/ruff#7617](../../astral-sh/ruff/pulls/7617.md) on 2023-09-23 13:27_

---

_Referenced in [astral-sh/ruff#6258](../../astral-sh/ruff/issues/6258.md) on 2023-09-26 02:02_

---

_Referenced in [astral-sh/ruff#7682](../../astral-sh/ruff/pulls/7682.md) on 2023-09-27 21:43_

---

_Referenced in [astral-sh/ruff#7704](../../astral-sh/ruff/pulls/7704.md) on 2023-09-28 21:16_

---

_Referenced in [astral-sh/ruff#7727](../../astral-sh/ruff/pulls/7727.md) on 2023-09-30 23:16_

---

_Comment by @tjkuson on 2023-10-04 14:28_

Working on `FURB171`.

---

_Referenced in [astral-sh/ruff#7815](../../astral-sh/ruff/pulls/7815.md) on 2023-10-04 15:52_

---

_Comment by @tjkuson on 2023-10-28 12:37_

Working on `FURB168`.

---

_Referenced in [astral-sh/ruff#8308](../../astral-sh/ruff/pulls/8308.md) on 2023-10-28 16:03_

---

_Comment by @tjkuson on 2023-11-04 12:28_

Working on `FURB169`.

---

_Referenced in [astral-sh/ruff#8487](../../astral-sh/ruff/pulls/8487.md) on 2023-11-04 14:50_

---

_Comment by @diceroll123 on 2023-11-04 20:45_

`FURB160` is covered by `PLW0127`

---

_Referenced in [astral-sh/ruff#8664](../../astral-sh/ruff/pulls/8664.md) on 2023-11-13 20:48_

---

_Referenced in [astral-sh/ruff#8727](../../astral-sh/ruff/pulls/8727.md) on 2023-11-16 21:33_

---

_Referenced in [scikit-learn/scikit-learn#27825](../../scikit-learn/scikit-learn/pulls/27825.md) on 2023-11-23 17:54_

---

_Comment by @tjkuson on 2023-11-26 17:44_

Working on `FURB163`!

---

_Referenced in [astral-sh/ruff#8842](../../astral-sh/ruff/pulls/8842.md) on 2023-11-26 19:19_

---

_Referenced in [pyca/cryptography#9944](../../pyca/cryptography/pulls/9944.md) on 2023-11-30 15:08_

---

_Referenced in [astral-sh/ruff#9077](../../astral-sh/ruff/pulls/9077.md) on 2023-12-09 20:59_

---

_Comment by @Skylion007 on 2023-12-10 16:49_

[FURB137](https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/simplify_comprehension.py) is implemented by various C4 checks, I think.

---

_Comment by @Skylion007 on 2023-12-11 16:03_

While [FURB179](https://github.com/dosisod/refurb/blob/master/refurb/checks/itertools/use_chain_from_iterable.py) might be a bit complicated to do properly, could we just add a check that does the simplest case that converts `itertools.chain(*iterable)` to `itertools.chain.from_iterable(iterable)`? That's also the one transform that should be more or less guaranteed to increase performance (not sure about the other ones on the latest versions of Python; the sum list way is probably worse, but covered by RUF017).

---

_Comment by @Skylion007 on 2023-12-11 16:09_

[FURB119](https://github.com/dosisod/refurb/blob/master/refurb/checks/string/use_fstring_fmt.py) is implemented by RUF010 so that can probably checked off too.

---

_Referenced in [astral-sh/ruff#9171](../../astral-sh/ruff/pulls/9171.md) on 2023-12-17 20:25_

---

_Comment by @Skylion007 on 2023-12-18 20:07_

FURB111 is covered by PLW0108 https://docs.astral.sh/ruff/rules/unnecessary-lambda/

---

_Comment by @sbrugman on 2023-12-22 10:54_

@charliermarsh to what extent is the semantics tracked by `ruff` ready to implement features to detect default arguments?
i.e. is it possible to find the function default argument from a reference?

For builtins I guess https://github.com/astral-sh/ruff/blob/main/crates/ruff_python_stdlib/src/builtins.rs could be extended. This would effectively generalise redundant-open-modes (UP015).

> Don't pass an argument if it is the same as the default value:
> 
> Bad:
> 
> ```python
> def greet(name: str = "bob") -> None:
>     print(f"Hello {name}")
> 
> greet("bob")
> ```
> 
> Good:
> 
> ```python
> def greet(name: str = "bob") -> None:
>     print(f"Hello {name}")
> 
> greet()
> ```

https://github.com/dosisod/refurb/blob/master/refurb/checks/function/use_implicit_default.py

---

_Comment by @charliermarsh on 2023-12-22 15:20_

@sbrugman -- I think we're not yet in a position to support that rule (at least not robustly), since we can't trace function calls _across files_.

---

_Referenced in [astral-sh/ruff#9045](../../astral-sh/ruff/issues/9045.md) on 2023-12-22 15:34_

---

_Referenced in [astral-sh/ruff#9265](../../astral-sh/ruff/pulls/9265.md) on 2023-12-23 21:52_

---

_Comment by @dosisod on 2024-01-08 22:44_

Hi all! Here's an updated list of some of the new and/or improved checks added to Refurb recently:

## New (or not yet listed) checks

- [ ] [`FURB178`](https://github.com/dosisod/refurb/blob/master/refurb/checks/shlex/use_join.py) `use-shlex-join`: Replace `" ".join(shlex.quote(x) for x in y)` with `shlex.join(y)`
- [x] [`FURB180`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_abc_shorthand.py) `use-abc-shorthand`: Replace `metaclass=ABCMeta` with `ABC`
- [ ] [`FURB182`](https://github.com/dosisod/refurb/blob/master/refurb/checks/hashlib/simplify_ctor.py) `simplify-hashlib-ctor`: Replace `h = sha512(); h.update(b'data')` with `h = sha512(b'data')`
- [ ] [`FURB183`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_str_func.py) `use-str-func`: Replace `f"{x}"` with `str(x)`
- [ ] [`FURB184`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/fluid_interface.py) `use-fluid-interface`: See https://github.com/dosisod/refurb/issues/286 for examples
- [ ] [`FURB185`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_copy_with_merge.py) `no-copy-with-merge`: Replace `x.copy() | {...}` with `x | {...}`
- [ ] [`FURB186`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_sort.py) `use-sort`: Replace `x = sorted(x)` with `x.sort()`

## Improved checks
- [ ] Improve `FURB179`/`RUF107` support: [examples](https://github.com/dosisod/refurb/blob/a295cee6d188f5797aefe5d7cf77a353ed48ea93/test/data/err_179.py#L37-L50)

Note that `FURB179` uses `chain.from_iterable(x)`, whereas `RUF107` uses `reduce(iadd, x, [])`

- [ ] Improve `FURB173` `use-dict-union` support: [examples](https://github.com/dosisod/refurb/blob/a295cee6d188f5797aefe5d7cf77a353ed48ea93/test/data/err_173.py#L37-L42)

Even though FURB173 isn't implemented yet, this improved detection might be worth adding to Ruff. C408 does detect `dict(a=1)`, though it doesn't detect `dict(**x, a=1)`. The `**x` part can be problematic if `x` doesn't use `str` for the key type, whereas `x | {"a": 1}` or `{**x, "a": 1}` will work regardless of the key type.

---

_Referenced in [astral-sh/ruff#9516](../../astral-sh/ruff/pulls/9516.md) on 2024-01-14 20:52_

---

_Referenced in [astral-sh/ruff#9539](../../astral-sh/ruff/pulls/9539.md) on 2024-01-15 23:06_

---

_Comment by @dosisod on 2024-01-25 06:14_

Released a (small) update with a few notable changes:

New checks:
- [ ] [`FURB187`](https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_reverse.py) `use-reverse`: `x = reversed(x)`, `x = x[::-1]` -> `x.reverse()`
- [x] [`FURB188`](https://github.com/dosisod/refurb/blob/master/refurb/checks/string/remove_prefix_or_suffix.py) `use-remove-prefix-or-suffix`: `f[:-4] if f.endswith(".txt") else f` -> `f.removesuffix(".txt")`
  * `removeprefix()`/`removesuffix()` is Python 3.9+

Both of the above checks improved performance when using the suggested changes, at least in the micro benchmarks I ran.

Improved checks:
- [ ] FURB118: `lambda x: (x[2], x[0])` -> `operator.itemgetter(2, 0)`
- [ ] FURB111/PLW0108: `lambda: 0.0` -> `float`
  * PLW0108 used to cover FURB111, but this new change means PLW0108 no longer fully covers FURB111. This new change is similar to a [new Pyupgrade](https://github.com/asottile/pyupgrade#replace-unnecessary-lambdas-in-collectionsdefaultdict-calls) check, but that one only checks for lambdas in `defaultdict()`s, whereas mine has no such restriction.

Also, there are a lot of scattered check-lists throughout this issue, perhaps we could consolidate them into the comment at the top? At the very least I could consolidate my comments into one, if that helps.

---

_Referenced in [astral-sh/ruff#10002](../../astral-sh/ruff/pulls/10002.md) on 2024-02-16 12:14_

---

_Comment by @Skylion007 on 2024-02-27 23:55_

Isn't FURB142 already implemented as PLC0208?

---

_Referenced in [astral-sh/ruff#10526](../../astral-sh/ruff/pulls/10526.md) on 2024-03-22 16:12_

---

_Referenced in [astral-sh/ruff#10533](../../astral-sh/ruff/pulls/10533.md) on 2024-03-23 06:30_

---

_Referenced in [astral-sh/ruff#10583](../../astral-sh/ruff/pulls/10583.md) on 2024-03-25 18:17_

---

_Comment by @hikaru-kajita on 2024-03-27 06:59_

Working on `FURB164`.

---

_Referenced in [astral-sh/ruff#10630](../../astral-sh/ruff/pulls/10630.md) on 2024-03-27 17:02_

---

_Referenced in [astral-sh/ruff#10647](../../astral-sh/ruff/pulls/10647.md) on 2024-03-28 14:07_

---

_Referenced in [astral-sh/ruff#10650](../../astral-sh/ruff/pulls/10650.md) on 2024-03-28 20:58_

---

_Referenced in [astral-sh/ruff#10687](../../astral-sh/ruff/pulls/10687.md) on 2024-04-01 03:02_

---

_Referenced in [astral-sh/ruff#10802](../../astral-sh/ruff/pulls/10802.md) on 2024-04-06 16:10_

---

_Referenced in [astral-sh/ruff#10921](../../astral-sh/ruff/pulls/10921.md) on 2024-04-14 01:58_

---

_Referenced in [astral-sh/ruff#11187](../../astral-sh/ruff/pulls/11187.md) on 2024-04-28 22:24_

---

_Referenced in [astral-sh/ruff#13256](../../astral-sh/ruff/pulls/13256.md) on 2024-09-05 17:51_

---

_Referenced in [astral-sh/ruff#13530](../../astral-sh/ruff/pulls/13530.md) on 2024-09-26 18:14_

---

_Referenced in [astral-sh/ruff#14105](../../astral-sh/ruff/pulls/14105.md) on 2024-11-05 12:21_

---

_Comment by @jamesbraza on 2025-01-06 18:40_

Can someone edit the:

- `FURB141` comment to mention it's redundant to `PTH110`
- `FURB147` comment to mention it's redundant to `PTH118`

Thanks in advance

---

_Referenced in [astral-sh/ruff#16113](../../astral-sh/ruff/pulls/16113.md) on 2025-02-12 05:36_

---

_Referenced in [astral-sh/ruff#16131](../../astral-sh/ruff/pulls/16131.md) on 2025-02-13 06:44_

---

_Comment by @jamesbraza on 2025-03-11 01:28_

Let's add [`FURB184`](https://github.com/dosisod/refurb/blob/master/docs/checks.md#furb184-use-fluid-interface) to the OP, as I like that rule :D

---

_Referenced in [astral-sh/ruff#21855](../../astral-sh/ruff/issues/21855.md) on 2025-12-09 00:35_

---
