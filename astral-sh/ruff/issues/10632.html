<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bad fixes with E266: multiple-leading-hashes-for-block-comment - astral-sh/ruff #10632</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Bad fixes with E266: multiple-leading-hashes-for-block-comment</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10632">#10632</a>
        opened by <a href="https://github.com/Hnasar">@Hnasar</a>
        on 2024-03-27 17:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Hnasar">@Hnasar</a></div>
            <div class="timeline-body"><p>I&#x27;m trying out <code>--preview</code> with ruff 0.3.4. <a href="https://docs.astral.sh/ruff/rules/multiple-leading-hashes-for-block-comment/">E266</a> which is a pycodestyle --preview rule has some weird fixes:</p>
<ol>
<li>Probably should try to leave headers alone if the comment ends in one or more <code>#</code></li>
</ol>
<pre><code>-##################################### FOO #############################################
+# FOO #############################################
</code></pre>
<ol>
<li>Why is the space after the <code>:</code>?</li>
</ol>
<pre><code>-            #:::team.foo.bar.baz
+            #: ::team.foo.bar.baz
</code></pre>
<ol>
<li>Weird example in https://docs.astral.sh/ruff/rules/multiple-leading-hashes-for-block-comment/#example</li>
</ol>
<blockquote>
<p>Use instead:</p>
</blockquote>
<pre><code># Block comments:
#  - Block comment list
# \xa0- Block comment list
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-28 12:15</div>
            <div class="timeline-body"><ol>
<li><p>I think flagging it (and the way its fixed) is in line with the intent of the rule. You might want to disable <code>E266</code> if you want to keep header comments with this specific format.</p>
</li>
<li><p>Pycodestyle both allows <code>:</code> or <code>!</code> directly after the <code>#</code></p>
</li>
</ol>
<pre><code>#: E265:2:1
m = 42
#! This is important
mx = 42 - 42
#: E266:3:5 E266:6:5
</code></pre>
<ol>
<li>I assume what you find weird about it is the <code>\xa0</code>? Or is it something else</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-28 12:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-28 13:46</div>
            <div class="timeline-body"><p>Pycodestyle also allows this style for headers:</p>
<pre><code>#####
# Foo
#####
</code></pre>
<p>That is, lines that are <em>only</em> <code>#</code> are allowed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Hnasar">@Hnasar</a> on 2024-04-01 15:10</div>
            <div class="timeline-body"><p>Thanks for the clarifications!</p>
<blockquote>
<ol>
<li>Probably should try to leave headers alone</li>
</ol>
</blockquote>
<p>TIL about the pycodestyle suggested header style, thanks. IMO since PEP 8 doesn&#x27;t specify a header style, tools should be more permissive (but I understand the desire for compatibility with pycodestyle)</p>
<blockquote>
<ol>
<li>Why is the space after the :?</li>
</ol>
</blockquote>
<blockquote>
<p>Pycodestyle both allows : or ! directly after the #</p>
</blockquote>
<ul>
<li>TIL that <code>#:</code> is for <a href="https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#directive-autoproperty">sphinx documentation</a>, but the fact that pycodestyle supports this is undocumented.</li>
<li>FYI for <code>#!</code>: pycodestyle does <strong>not</strong> allow <code>#! comment</code> (except for shebangs on the first line) -- these comments result in <code>E265 block comment should start with &#x27;# &#x27;</code></li>
</ul>
<blockquote>
<ol>
<li>Weird example in https://docs.astral.sh/ruff/rules/multiple-leading-hashes-for-block-comment/#example</li>
</ol>
</blockquote>
<blockquote>
<p>I assume what you find weird about it is the \xa0? Or is it something else</p>
</blockquote>
<ul>
<li>the <code>\xa0</code> is weird and</li>
<li>the &quot;use instead&quot; doesn&#x27;t seem to follow from the &quot;example&quot;
E.g. perhaps instead it should be</li>
</ul>
<p>Example</p>
<pre><code>### Public API
def say_hi():
    ## This is a block comment.
    print(&quot;hi&quot;)
</code></pre>
<p>Use instead</p>
<pre><code># Public API
def say_hi():
    # This is a block comment.
    print(&quot;hi&quot;)
</code></pre>
<p>or</p>
<p>Use instead</p>
<pre><code>#############
# Public API
#############
def say_hi():
    # This is a block comment.
    print(&quot;hi&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-18 01:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-18 01:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:51 UTC
    </footer>
</body>
</html>
