```yaml
number: 10522
title: Rule to detect duplicate function definitions.
type: issue
state: open
author: ollz272
labels:
  - rule
  - needs-decision
assignees: []
created_at: 2024-03-22T09:26:41Z
updated_at: 2024-09-23T22:19:32Z
url: https://github.com/astral-sh/ruff/issues/10522
synced_at: 2026-01-10T01:56:52Z
```

# Rule to detect duplicate function definitions.

---

_Issue opened by @ollz272 on 2024-03-22 09:26_

We have the rule PIE794 which detects duplicate class field definitions. I think it would be nice to have a rule which detects duplicate function definitions:

```python
# Error
class Foo:
    
    def bar():
        print("hello world")

    def bar():
        print("hello ruff")
```

This is clearly a mistake and would be great if it was caught by ruff.

---

_Comment by @MichaReiser on 2024-03-22 16:34_

Have you tried `F811`? It flags the second declaration of `bar` https://play.ruff.rs/f029b8b6-26bd-49f9-9da2-ac2b22685b0b

---

_Label `question` added by @MichaReiser on 2024-03-22 16:34_

---

_Comment by @kaddkaka on 2024-03-23 09:35_

For function in file scope the duplicated function is found by both pylint `E0102` and mypy `no-redef`, example:
```py
 def banana():
    """banana"""


def banana():
    """banana"""
```

And in the class method duplication case:
```py
class BananaTree:
   """BananTree"""

   def banana(self):
       """banana"""

   def banana(self):
       """banana"""
```

Shows these errors:
```
pylint: [function-redefined] method already defined line 4 [E0102]
pyflakes: redefinition of unused 'banana' from line 4
```

According to https://github.com/astral-sh/ruff/issues/970 Pylint rule `E0102` is covered by `F811` that @MichaReiser mentioned. 

That info is missing but should be added to documentation at https://docs.astral.sh/ruff/rules/#pylint-pl

---

_Comment by @kaddkaka on 2024-03-23 09:40_

`F811` is however called [redefined-while-unused](https://docs.astral.sh/ruff/rules/redefined-while-unused/) and only triggers when the first definition has not been called. This means that F811 is easily missed for exampled in this example:

```py
def banana():
    """banana"""

banan()

def banana():
    """banana"""
```

Give no error in pyflakes and *no error in ruff* as well. Since the first definition is used, it doesn't report the redefinition as an error.

This mean ruff *does not* implement `E0102` as it is implemented in `ruff 0.3.2`



---

_Referenced in [astral-sh/ruff#970](../../astral-sh/ruff/issues/970.md) on 2024-03-23 09:47_

---

_Comment by @ollz272 on 2024-03-23 13:18_

I see why this isn't being picked up for us, we have private variables, which it doesn't work for
https://play.ruff.rs/ee3c213f-21d7-4540-a052-9acbc6ac4d6f

---

_Comment by @charliermarsh on 2024-03-23 13:31_

Why should the second definition be flagged here?

```python
def banana():
    """banana"""

banana()

def banana():
    """banana"""
```

This seems valid to me.

---

_Comment by @charliermarsh on 2024-03-23 13:32_

Yeah, that's due to [`dummy-variable-rgx`](https://docs.astral.sh/ruff/settings/#lint_dummy-variable-rgx). I wonder if that shouldn't be applied to functions. I'm not really sure. It's possible that users would find that really surprising.

---

_Comment by @kaddkaka on 2024-03-23 19:50_

> Why should the second definition be flagged here?
> 
> ```python
> def banana():
>     """banana"""
> 
> banana()
> 
> def banana():
>     """banana"""
> ```
> 
> This seems valid to me.

I didn't state any opinion about the rule, but E0102 *does* trigger on this code.

Opinion: Sure this could be a valid case, but it's probably quite rare to redefine functions like this. I can see programmers prefer to have a warning for this. If one doesn't want the warning it can be turned off. 

---

_Label `question` removed by @AlexWaygood on 2024-09-23 22:19_

---

_Label `rule` added by @AlexWaygood on 2024-09-23 22:19_

---

_Label `needs-decision` added by @AlexWaygood on 2024-09-23 22:19_

---

_Referenced in [astral-sh/ruff#17724](../../astral-sh/ruff/issues/17724.md) on 2025-04-30 06:22_

---

_Referenced in [astral-sh/ruff#18432](../../astral-sh/ruff/issues/18432.md) on 2025-06-02 15:53_

---
