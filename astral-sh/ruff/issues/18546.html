<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rule request: detect redundant type unions - astral-sh/ruff #18546</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rule request: detect redundant type unions</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18546">#18546</a>
        opened by <a href="https://github.com/robsdedude">@robsdedude</a>
        on 2025-06-08 08:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/robsdedude">@robsdedude</a> on 2025-06-08 08:23</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Inspired by https://github.com/astral-sh/ruff/issues/18508</p>
<p>I'd like to see ruff detect (and possibly fix) redundant types in unions. Examples:</p>
<pre><code class="language-python">import typing

foo1: A | B | A  # becomes A | B
foo2: typing.Union[int, B, float, int, C]  # becomes Union[int, B, float, C]
foo3: typing.Optional[None]  # becomes None
</code></pre>
<p>For simplicity, I'd be fine leaving out nested annotations in the first iteration. They could still be added at a later time. E.g.,</p>
<pre><code class="language-python">import typing

foo: typing.Union[int, None, typing.Optional[int]]  # could become typing.Union[int, None]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-06-08 09:57</div>
            <div class="timeline-body"><p>Thanks! We already have this one: https://docs.astral.sh/ruff/rules/duplicate-union-member/#flake8-pyi-pyi</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-06-08 09:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/robsdedude">@robsdedude</a> on 2025-06-08 10:18</div>
            <div class="timeline-body"><p>Ah, nice! I've not checked it yet but judging by the linked issue that rule does not cover <code>Optional[None]</code>. Would you be interested in a PR to change that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-06-08 10:24</div>
            <div class="timeline-body"><p>Sure, that sounds in the spirit of the rule!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-06-08 10:24</div>
            <div class="timeline-body"><p>Might have to be a preview-only change initially though, since it's an expansion in scope</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:37:38 UTC
    </footer>
</body>
</html>
