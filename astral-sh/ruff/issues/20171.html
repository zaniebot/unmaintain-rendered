<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A003 misses some attributes referenced within the class scope - astral-sh/ruff #20171</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>A003 misses some attributes referenced within the class scope</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/20171">#20171</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-08-31 01:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dscorbett">@dscorbett</a> on 2025-08-31 01:15</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><a href="https://docs.astral.sh/ruff/rules/builtin-attribute-shadowing/"><code>builtin-attribute-shadowing</code> (A003)</a> is only emitted for attributes that “are referenced from within the class scope”, but that seems to only include references in annotations. There are false negatives for attributes used within the class scope in decorators, in argument defaults, and in other attributes’ definitions, as in <code>property</code>, <code>id</code>, and <code>bin</code> respectively in <a href="https://play.ruff.rs/d9ec5da2-a26d-4ac1-a40d-e20d3c8f446e">the example below</a>.</p>
<pre><code class="language-console">$ cat &gt;a003.py &lt;&lt;'# EOF'
class C:
    @staticmethod
    def property(f): return f
    id = 1
    @[property][0]
    def f(self, x=[id]): return x
    bin = 2
    foo = [bin]
print(C().f(), C().foo)
# EOF

$ python a003.py
[1] [2]

$ ruff --isolated check a003.py --select A003
All checks passed!

$ flake8 --select A a003.py
a003.py:3:5: A003 class attribute &quot;property&quot; is shadowing a Python builtin
a003.py:4:5: A003 class attribute &quot;id&quot; is shadowing a Python builtin
a003.py:7:5: A003 class attribute &quot;bin&quot; is shadowing a Python builtin

</code></pre>
<h3>Version</h3>
<p>ruff 0.12.11 (c2bc15bc1 2025-08-28)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/20178.html">astral-sh/ruff#20178</a> on 2025-08-31 15:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-09-01 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-09-01 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-09-22 22:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
