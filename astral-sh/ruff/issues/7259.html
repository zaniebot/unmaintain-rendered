<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E203 fix should leave equal amounts of space on either side of a slice operator - astral-sh/ruff #7259</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>E203 fix should leave equal amounts of space on either side of a slice operator</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/7259">#7259</a>
        opened by <a href="https://github.com/bersbersbers">@bersbersbers</a>
        on 2023-09-10 15:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bersbersbers">@bersbersbers</a> on 2023-09-10 15:46</div>
            <div class="timeline-body"><pre><code class="language-python">ham[lower + offset : upper + offset]
</code></pre>
<p><code>ruff --fix --select E203 bug.py</code> (v0.0.287) gives</p>
<pre><code class="language-python">ham[lower + offset: upper + offset]
</code></pre>
<p>which is discouraged by PEP 8:</p>
<blockquote>
<p>However, in a slice the colon acts like a binary operator, and should have equal amounts on either side (treating it as the operator with the lowest priority).</p>
</blockquote>
<p>https://peps.python.org/pep-0008/#pet-peeves</p>
<p>So, <code>ham[lower + offset: upper + offset]</code> is incorrect. I would argue that <code>ham[lower + offset : upper + offset]</code> (which is what <code>black</code> outputs) should not be flagged by <code>E203</code>; and if so, <em>both</em> spaces should be removed (but I still argue to remove none at all).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-11 23:13</div>
            <div class="timeline-body"><p>Our behavior is consistent with pycodestyle, but I am inclined to support this (though it's low priority).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-09-11 23:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">accepted</span> added by @charliermarsh on 2023-09-11 23:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oefe">@oefe</a> on 2023-09-17 14:15</div>
            <div class="timeline-body"><p>It's also inconsistent with black, which puts spaces on both sides.
(Though I would argue that if you're using black, you don't that rule anyway.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gertvdijk">@gertvdijk</a> on 2023-09-21 19:49</div>
            <div class="timeline-body"><p>I think this is a duplicate of https://github.com/astral-sh/ruff/issues/6861, but I'm happy to see it's considered/accepted now. ðŸ˜ƒ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8642.html">astral-sh/ruff#8642</a> on 2023-11-13 04:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-11-13 05:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-13 14:51</div>
            <div class="timeline-body"><p>Gonna look at fixing this today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/8654.html">astral-sh/ruff#8654</a> on 2023-11-13 15:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-11-13 17:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8752.html">astral-sh/ruff#8752</a> on 2023-11-18 06:42</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:10 UTC
    </footer>
</body>
</html>
