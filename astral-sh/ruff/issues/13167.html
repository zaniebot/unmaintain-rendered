<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>False negative for D403 when the first sentence only has one word but the whole docstring is longer - astral-sh/ruff #13167</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>False negative for D403 when the first sentence only has one word but the whole docstring is longer</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/13167">#13167</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2024-08-30 18:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dscorbett">@dscorbett</a> on 2024-08-30 18:44</div>
            <div class="timeline-body"><p><a href="https://docs.astral.sh/ruff/rules/first-line-capitalized/">D403</a> has a false negative when the docstring’s first word (tokenized by spaces) is not ASCII alphabetic <em>and</em> the docstring either contains a space or doesn’t end with ASCII terminal punctuation. This is similar to #10775. #10776 only fixed the case where a docstring contains no spaces and ends with ASCII terminal punctuation.</p>
<p>In the following example, <code>f1</code> has a true positive and <code>f2</code> has a false negative.</p>
<pre><code class="language-console">$ ruff --version
ruff 0.6.3
$ cat d403.py
def f1():
    &quot;&quot;&quot;footles.&quot;&quot;&quot;
def f2():
    &quot;&quot;&quot;footles.

    This is a no-op.
    &quot;&quot;&quot;
$ ruff check -q --output-format concise --isolated --select D403 d403.py
d403.py:2:5: D403 [*] First word of the first line should be capitalized: `footles` -&gt; `Footles`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-02 07:21</div>
            <div class="timeline-body"><p>The current behavior is insofar intentional that it matches <a href="https://github.com/PyCQA/pydocstyle/blob/8d0cdfc93e86e096bb5753f07dc5c7c373e63837/src/pydocstyle/checker.py#L574-L589">pydocstyle</a></p>
<p>We would have to take a closer look why pydocstyle deliberately excludes all first words that contain any non ASCII characters.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-09-02 07:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2024-09-02 07:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @MichaReiser on 2024-09-02 07:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dscorbett">@dscorbett</a> on 2024-09-02 14:36</div>
            <div class="timeline-body"><p>Ruff’s D403 already doesn’t match pydocstyle: Ruff flags <code>f1</code> and pydocstyle doesn’t. This is intentional due to #10775. As long as Ruff’s behavior is different, I think it should be self-consistent.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/15082.html">astral-sh/ruff#15082</a> on 2024-12-20 14:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2024-12-30 10:51</div>
            <div class="timeline-body"><p>This seems to be reseolved by #15082.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-12-30 10:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
