<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remove falsy dict.get() fallback in `if` statements - astral-sh/ruff #4934</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Remove falsy dict.get() fallback in `if` statements</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/4934">#4934</a>
        opened by <a href="https://github.com/janosh">@janosh</a>
        on 2023-06-07 18:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/janosh">@janosh</a> on 2023-06-07 18:08</div>
            <div class="timeline-body"><pre><code class="language-py"># bad
if dct.get(key, False):
if dct.get(key, &quot;&quot;):
if dct.get(key, []):
if dct.get(key, {}):

# good
if dct.get(key):

# bad
if dct.get(key, set()) and other_cond:
if dct.get(key, 0) or other_cond:

# good
if dct.get(key) and other_cond:
if dct.get(key) or other_cond:
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-06-07 19:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/evanrittenhouse">@evanrittenhouse</a> on 2023-06-08 00:52</div>
            <div class="timeline-body"><p>@charliermarsh Would this just be a <code>RUF</code> rule?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/janosh">@janosh</a> on 2023-06-08 04:03</div>
            <div class="timeline-body"><p>Actually if statement is not needed. Any boolean evaluation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-08 05:19</div>
            <div class="timeline-body"><pre><code class="language-python"># bad
if dct.get(key) and other_cond:
if dct.get(key) or other_cond:
</code></pre>
<p>Can you expand on why this is bad? I don't think it is as the <code>other_cond</code> will be evaluated if the <code>.get</code> is truthy in the <code>and</code> case and falsy in the <code>or</code> case.</p>
<p>This would also require type inference without which we're limited to certain cases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/evanrittenhouse">@evanrittenhouse</a> on 2023-06-08 05:27</div>
            <div class="timeline-body"><p>@dhruvmanila just a heads up, I don't think the boolean expression is necessary (see the comment above yours :) )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/janosh">@janosh</a> on 2023-06-08 06:08</div>
            <div class="timeline-body"><blockquote>
<p>Can you expand on why this is bad?</p>
</blockquote>
<p>Sorry, that was an oversight. I meant <code># good</code>. Fixed above.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">accepted</span> added by @charliermarsh on 2023-07-10 01:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/15160.html">astral-sh/ruff#15160</a> on 2024-12-27 00:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-12-31 10:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:50 UTC
    </footer>
</body>
</html>
