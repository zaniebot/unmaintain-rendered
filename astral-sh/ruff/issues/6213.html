<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>except-as followed by a space before the colon causes a debug assertion failure - astral-sh/ruff #6213</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>except-as followed by a space before the colon causes a debug assertion failure</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/6213">#6213</a>
        opened by <a href="https://github.com/addisoncrump">@addisoncrump</a>
        on 2023-07-31 22:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/addisoncrump">@addisoncrump</a> on 2023-07-31 22:37</div>
            <div class="timeline-body"><p>Consider the following snippet:</p>
<pre><code class="language-py">try:
  print(&quot;hello&quot;)
except A as e :
  print(&quot;oh no!&quot;)
</code></pre>
<p>Note the space following <code>e</code>.</p>
<p>This snippet causes ruff to fail a debug assertion:</p>
<pre><code>~/git/ruff/target/debug/ruff --fix minimized-from-crash-1248f0f7231a99d2
warning: Detected debug build without --no-cache.
warning: Linting panicked minimized-from-crash-1248f0f7231a99d2: This indicates a bug in `ruff`. If you could open an issue at:

https://github.com/astral-sh/ruff/issues/new?title=%5BLinter%20panic%5D

with the relevant file contents, the `pyproject.toml` settings, and the following stack trace, we'd be very appreciative!

panicked at 'assertion failed: matches!(following.kind, SimpleTokenKind :: Colon)', crates/ruff/src/rules/pyflakes/fixes.rs:120:5
</code></pre>
<p>Fairly certain that this assertion is just not accounting for whitespace, which is a minor issue but may show up again in the future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4972.html">astral-sh/ruff#4972</a> on 2023-07-31 22:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-08-01 03:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-08-01 03:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/6218.html">astral-sh/ruff#6218</a> on 2023-08-01 03:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-08-01 03:42</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:09 UTC
    </footer>
</body>
</html>
