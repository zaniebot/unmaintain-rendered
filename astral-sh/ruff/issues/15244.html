<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unable to ignore UP006, UP035 after upgrade to 0.8.0 or later (python3.10) - astral-sh/ruff #15244</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Unable to ignore UP006, UP035 after upgrade to 0.8.0 or later (python3.10)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/15244">#15244</a>
        opened by <a href="https://github.com/jhovell">@jhovell</a>
        on 2025-01-03 21:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jhovell">@jhovell</a></div>
            <div class="timeline-body"><p>Bug not present in 0.7.4</p>
<p>After upgrading to 0.8.0-0.8.5 my project has a large number of <code>UP</code> rule violations, but the issue is there seems to be no way to suppress these violations.</p>
<pre><code>poetry run ruff check . --statistics
1046	UP006 	[*] non-pep585-annotation
 385	UP035 	[ ] deprecated-import
[*] fixable with `ruff check --fix`
</code></pre>
<p>Adding</p>
<pre><code>[tool.ruff.lint]
...
ignore = [
    &quot;UP006&quot;, # non-pep585-annotation
    &quot;UP035&quot;, # deprecated import
]
</code></pre>
<p>... has no effect and also interestingly <code>&quot;UP&quot;</code> or any variant is not present in my <code>select = [ .. ]</code> section, and error even persists if i remove my <code>select</code> block entirely (presumably default rules) or explicitly <code>select = [ ] </code></p>
<p>I have experimented with different <code>target-version</code> settings and also tried various settings for</p>
<pre><code>[tool.ruff.lint.pyupgrade]
keep-runtime-typing = true or false
</code></pre>
<pre><code>[tool.ruff] # any of the following

target-version = &quot;py38&quot;
target-version = &quot;py39&quot;
target-version = &quot;py310&quot;
</code></pre>
<p>I have also tried with preview mode turned on and off, same result.</p>
<pre><code>poetry run python --version
Python 3.10.13
</code></pre>
<p>Is some other rule or setting triggering these rules? Is there some way to work around these violations temporarily so I can upgrade ruff?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oprypin">@oprypin</a> on 2025-01-03 23:54</div>
            <div class="timeline-body"><p>Does a file <code>ruff.toml</code> exist in your directory, or do you have global overrides?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-04 12:03</div>
            <div class="timeline-body"><p>Can you run ruff with <code>ruff check --show-settings</code> to see what rules are selecting. Or consider using <code>ruff check --verbose</code> to see which configuration files Ruff picks up</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-01-04 12:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jhovell">@jhovell</a> on 2025-01-04 19:41</div>
            <div class="timeline-body"><blockquote>
<p>Does a file <code>ruff.toml</code> exist in your directory, or do you have global overrides?</p>
</blockquote>
<p>It's a poetry project and everything is configured through pyproject.toml. There's no ruff.toml. Not sure where else I'd look at for global overrides?</p>
<p>Relevant section for pyproject.toml</p>
<pre><code>
[tool.ruff]
line-length = 120
target-version = &quot;py310&quot;

[tool.ruff.lint]
ignore = [
    &quot;UP006&quot;,
    &quot;UP035&quot;,
]

[tool.ruff.lint.pyupgrade]
keep-runtime-typing = true
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-04 19:45</div>
            <div class="timeline-body"><blockquote>
<p>Can you run ruff with <code>ruff check --show-settings</code> to see what rules are selecting. Or consider using <code>ruff check --verbose</code> to see which configuration files Ruff picks up</p>
</blockquote>
<p>Can you try the commands that I listed above?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jhovell">@jhovell</a> on 2025-01-04 19:51</div>
            <div class="timeline-body"><p>@MichaReiser ah, thanks! that uncovered the issue. Per your suggestion, I ran <code>ruff check --verbose</code> and saw that there were two other pyproject.toml files in sub projects I did not know about and did not know they were being processed. not sure if this is recommended or not.</p>
<p>Feel free to close this issue. Really appreciate it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-01-05 08:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:51:54 UTC
    </footer>
</body>
</html>
