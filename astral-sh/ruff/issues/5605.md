```yaml
number: 5605
title: Formatter generates invalid code with magic trailing comma in slice expression
type: issue
state: closed
author: konstin
labels:
  - formatter
assignees: []
created_at: 2023-07-08T07:22:41Z
updated_at: 2023-07-14T09:55:06Z
url: https://github.com/astral-sh/ruff/issues/5605
synced_at: 2026-01-10T01:56:48Z
```

# Formatter generates invalid code with magic trailing comma in slice expression

---

_Issue opened by @konstin on 2023-07-08 07:22_

The formatter generates in valid code for [jhnnsrs/mikro-napari mikro_napari/models/representation.py:604-610](https://github.com/jhnnsrs/mikro-napari/blob/f0a47eb8d58420ea8d2cbec61e85a457cfb602ce/mikro_napari/models/representation.py#L604-L610).

Minimized example:
```python
x[:,]
```
is formatted to
```python
x[(:,)]
```
which is invalid since slice expressions can only exist in brackets (`[]`) and not parentheses (`()`)

---

_Label `formatter` added by @konstin on 2023-07-08 07:22_

---

_Referenced in [astral-sh/ruff#5759](../../astral-sh/ruff/pulls/5759.md) on 2023-07-14 09:12_

---

_Closed by @konstin on 2023-07-14 09:55_

---
