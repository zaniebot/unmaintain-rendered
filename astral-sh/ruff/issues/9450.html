<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`ruff check --select=I001 .` passes on windows but fails on linux - astral-sh/ruff #9450</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`ruff check --select=I001 .` passes on windows but fails on linux</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/9450">#9450</a>
        opened by <a href="https://github.com/karthiknadig">@karthiknadig</a>
        on 2024-01-09 22:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/karthiknadig">@karthiknadig</a> on 2024-01-09 22:29</div>
            <div class="timeline-body"><p>sample.py:</p>
<pre><code class="language-python"># Copyright (c) Microsoft Corporation. All rights reserved.
# Licensed under the MIT License.

import json

import hamcrest
import jsonrpc
import pytest

from lsprotocol import types as lsp


def something():
    pass
</code></pre>
<p>windows: Everything passes</p>
<pre><code>nox &gt; ruff check .
nox &gt; ruff check --select=I001 .
nox &gt; ruff format --check .
52 files already formatted
</code></pre>
<p>Linux: I001 check fails</p>
<pre><code>nox &gt; ruff check .
nox &gt; ruff check --select=I001 .
tests/python/notifications/test_progress.py:4:1: I001 [*] Import block is un-sorted or un-formatted
tests/python/requests/test_workspace_symbols_request.py:4:1: I001 [*] Import block is un-sorted or un-formatted
tests/python/test_cattrs_special_cases.py:4:1: I001 [*] Import block is un-sorted or un-formatted
tests/python/test_custom_validators.py:4:1: I001 [*] Import block is un-sorted or un-formatted
tests/python/test_enums.py:4:1: I001 [*] Import block is un-sorted or un-formatted
tests/python/test_generated_data.py:4:1: I001 [*] Import block is un-sorted or un-formatted
tests/python/test_location.py:4:1: I001 [*] Import block is un-sorted or un-formatted
tests/python/test_position.py:4:1: I001 [*] Import block is un-sorted or un-formatted
tests/python/test_range.py:4:1: I001 [*] Import block is un-sorted or un-formatted
Found 9 errors.
[*] 9 fixable with the `--fix` option.
nox &gt; Command ruff check --select=I001 . failed with exit code 1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-09 22:48</div>
            <div class="timeline-body"><p>Just confirming since it's not mentioned in the shell output, you see this behavior with <code>sample.py</code>? I can really only think of two culprits here:</p>
<ol>
<li>Something related to line endings.</li>
<li>Some directory exists on Linux but not Windows which is making Ruff think something is first-party.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by @charliermarsh on 2024-01-09 22:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/karthiknadig">@karthiknadig</a> on 2024-01-09 23:40</div>
            <div class="timeline-body"><p>The <code>sample.py</code> is a representation of how each of the failing files look like. This is strange because this check used to pass and some of these files were not modified recently.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-09 23:43</div>
            <div class="timeline-body"><p>Can you give an example of the import block before and after Ruff's changes?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/karthiknadig">@karthiknadig</a> on 2024-01-10 01:46</div>
            <div class="timeline-body"><p>Closing this, it turned out to be a weird issue with another tool, that kept adding back the space that caused this error.</p>
<p>The space in question:
<img src="https://github.com/astral-sh/ruff/assets/3840081/ae25e713-0809-4367-862c-8a499eeb6de2" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @karthiknadig on 2024-01-10 01:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:52 UTC
    </footer>
</body>
</html>
