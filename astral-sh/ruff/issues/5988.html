<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add native type literals to `UP018` - astral-sh/ruff #5988</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add native type literals to <code>UP018</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/5988">#5988</a>
        opened by <a href="https://github.com/dosisod">@dosisod</a>
        on 2023-07-22 21:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dosisod">@dosisod</a></div>
            <div class="timeline-body"><p>See https://github.com/astral-sh/ruff/issues/1348#issuecomment-1646520368.</p>
<p><code>UP018</code>/<code>C408</code> detects some, but not all of the same errors as Refurb:</p>
<pre><code class="language-python"># detected by Ruff and Refurb
l = list()
d = dict()
t = tuple()

# only detected by Refurb
i = int()
f = float()
c = complex()
b = bool()

# missleading error message in Ruff, see below
by = bytes()
s = str()
</code></pre>
<p>Running in Ruff:</p>
<pre><code>$ ruff x.py
x.py:1:1: E741 Ambiguous variable name: `l`
x.py:1:5: C408 [*] Unnecessary `list` call (rewrite as a literal)
x.py:2:5: C408 [*] Unnecessary `dict` call (rewrite as a literal)
x.py:3:5: C408 [*] Unnecessary `tuple` call (rewrite as a literal)
x.py:10:6: UP018 [*] Unnecessary call to `bytes`
x.py:11:5: UP018 [*] Unnecessary call to `str`
</code></pre>
<p>Running in Refurb:</p>
<pre><code>$ refurb x.py
x.py:1:5 [FURB112]: Replace `list()` with `[]`
x.py:2:5 [FURB112]: Replace `dict()` with `{}`
x.py:3:5 [FURB112]: Replace `tuple()` with `()`
x.py:5:5 [FURB112]: Replace `int()` with `0`
x.py:6:5 [FURB112]: Replace `float()` with `0.0`
x.py:7:5 [FURB112]: Replace `complex()` with `0j`
x.py:8:5 [FURB112]: Replace `bool()` with `False`
x.py:10:6 [FURB112]: Replace `bytes()` with `b&quot;&quot;`
x.py:11:5 [FURB112]: Replace `str()` with `&quot;&quot;`
</code></pre>
<p>The &quot;Unnecessary call to <code>bytes</code>/<code>str</code>&quot; message is also misleading because there are no arguments to <code>str()</code>/<code>bytes()</code>.</p>
<p>Very few projects according to <a href="https://grep.app/search?q=%5B%5Ea-zA-Z_.0-9%5D%28int%7Cfloat%7Cstr%7Cbytes%7Cbool%7Ccomplex%29%5C%28%5C%29&amp;regexp=true&amp;case=true&amp;filter%5Blang%5D%5B0%5D=Python">grep.app</a> are using the <code>int()</code>, <code>str()</code>, etc. form, but still worth adding IMO.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-07-23 03:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @dhruvmanila by @dhruvmanila on 2023-07-23 08:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-07-23 09:39</div>
            <div class="timeline-body"><p>Complex seems a bit difficult (no pun intended) as it can accept 0, 1 or 2 arguments and it can accept them as keyword arguments as well:</p>
<pre><code class="language-python">complex()
# 0j

complex(1)
# (1+0j)

complex(1, 2)
# (1+2j)

complex(real=1, imag=2)
# (1+2j)

complex(1, imag=2)
# (1+2j)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-07-24 01:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:47:45 UTC
    </footer>
</body>
</html>
