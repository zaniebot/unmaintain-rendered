<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support for nested classes - astral-sh/ruff #3667</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support for nested classes</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/3667">#3667</a>
        opened by <a href="https://github.com/ShalokShalom">@ShalokShalom</a>
        on 2023-03-22 14:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ShalokShalom">@ShalokShalom</a></div>
            <div class="timeline-body"><p>I know that nested classes are usually not considered to be pythonic, or usable at all.
I actually found a use, and suggest to consider them:</p>
<p><img src="https://user-images.githubusercontent.com/6344099/226937354-7619905c-fa3c-4245-a22a-5ee4265b56d9.png" alt="Screenshot_20230322_153212"></p>
<p>@choice implements choice classes, also called <a href="https://en.wikipedia.org/wiki/Tagged_union">tagged unions</a>, and I like to group them together, in order to increase readability.</p>
<p>The error shows doesn&#x27;t take this into account, since the nested classes seem to be considered, as you see.</p>
<p>It thinks Exit is unused, and therefor doesn&#x27;t assume, that it might be an indentation error.
I understand, if you think this to be the edge case it might be, and the error to be accurate enough in this case. Still, I think its worth acknowledging this issue.</p>
<p>I appreciate your response. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on 2023-03-22 17:08</div>
            <div class="timeline-body"><pre><code>@choice
class ChoiceExit:
    class PassableExit: ...
    class LockedExit: ...
    class NoExit: ...

Exit = PassableExit | LockedExit | NoExit
</code></pre>
<p>Would the code above work for you?
The problem is that you are overriding Exit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ShalokShalom">@ShalokShalom</a> on 2023-03-23 12:14</div>
            <div class="timeline-body"><p>Well, idk to be honest. I want to create a discriminated union.</p>
<p>That is an Enum in Rust ðŸ˜ƒ</p>
<p>I would probably prefer, to have an unified name for both, the outer class, and the union of the three inner classes.</p>
<p>I guess it would become confusing to refer to them, otherwise.</p>
<p>I could also see implementing @choice via init_subclass, but that is not your concern.
I was more intending, to make you aware of the lack of consideration of the usage of nested classes in general.</p>
<p>I know that your example would work, but the linter doesn&#x27;t give any hint about this.
I guess there are cases, where indenting the bottom line would lead to what the programmer actually wants. And in this case, the current warning doesnt suggest this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on 2023-03-23 12:32</div>
            <div class="timeline-body"><p>Can you provide the link to <code>@choice</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ShalokShalom">@ShalokShalom</a> on 2023-03-23 12:36</div>
            <div class="timeline-body"><p>That&#x27;s not implemented yet, also because I dont know, how I should implement it. ðŸ˜„</p>
<p>The plan was to inject the Union building structure, and eventually including the functionality of @final.</p>
<p>But I am very new to Python, and try to bring over the DUs from FSharp, to continue this style of programming. It seems like I am going against the common coding practices in the Python community.</p>
<p>There is also no real maintained, properly ergonomic sumtype implementation, as far as I see.
Do you know more about that? ðŸ˜„</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonathanPlasse">@JonathanPlasse</a> on 2023-03-23 12:39</div>
            <div class="timeline-body"><pre><code>@choice
class Exit:
    class PassableExit: ...
    class LockedExit: ...
    class NoExit: ...

SomeExitPattern = Exit.PassableExit | Exit.LockedExit | Exit.NoExit
</code></pre>
<p>Why not this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ShalokShalom">@ShalokShalom</a> on 2023-03-23 13:19</div>
            <div class="timeline-body"><p>Yeah, that would also be an option.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ShalokShalom">@ShalokShalom</a> on 2023-03-23 13:19</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:34 UTC
    </footer>
</body>
</html>
