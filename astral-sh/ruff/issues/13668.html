<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`allowed-unused-imports` has incorrect documentation - astral-sh/ruff #13668</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`allowed-unused-imports` has incorrect documentation</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/13668">#13668</a>
        opened by <a href="https://github.com/tylerlaprade">@tylerlaprade</a>
        on 2024-10-07 18:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/tylerlaprade">@tylerlaprade</a> on 2024-10-07 18:39</div>
            <div class="timeline-body"><ul>
<li>In the <a href="https://docs.astral.sh/ruff/settings/#lint_allowed-unused-imports">docs</a>, it's part of the <code>lint</code> section rather than <code>lint.pyflakes</code></li>
<li>In those same docs, &quot;thought&quot; is used in place of &quot;though&quot;</li>
<li>The TOML schema doesn't recognize the setting at any of the three possible levels.
<img width="1800" alt="image" src="https://github.com/user-attachments/assets/b5385226-f74d-45d0-873b-4658087af557"></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-07 19:09</div>
            <div class="timeline-body"><p>We should allow defining this either at <code>lint</code> or <code>lint.pyflakes</code> from my read of the code.
I presume the schema store has just not been updated since the last release.</p>
<p>Typo fix at https://github.com/astral-sh/ruff/pull/13669</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-10-07 19:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-07 19:10</div>
            <div class="timeline-body"><p>https://github.com/SchemaStore/schemastore/pull/4131</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tylerlaprade">@tylerlaprade</a> on 2024-10-08 01:49</div>
            <div class="timeline-body"><p>Thanks! Is there precedent for allowing other settings at two different levels? It seems a bit confusing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-08 01:53</div>
            <div class="timeline-body"><p>I'm not sure honestly. It does seem confusing if it's not necessary for some reason. cc @charliermarsh who reviewed that contribution.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-08 08:30</div>
            <div class="timeline-body"><p>It should only be under lint.pyflakes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/13677.html">astral-sh/ruff#13677</a> on 2024-10-08 09:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2024-10-17 15:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.7" by @AlexWaygood on 2024-10-17 15:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tylerlaprade">@tylerlaprade</a> on 2025-01-02 14:52</div>
            <div class="timeline-body"><p><img width="1512" alt="Image" src="https://github.com/user-attachments/assets/ab1afc1f-40fd-435e-98f4-96999db48c0d" />
<code>lint</code> is still not recognized for me</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-02 15:02</div>
            <div class="timeline-body"><p>@tylerlaprade I'm unable to reproduce this. I created a <code>.ruff.toml</code> file and opened it in VS Code with even better toml installed. It provides me intelli sense and auto suggestions. Any chance you manually selected an old schema in Better toml for <code>ruff.toml</code> files?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tylerlaprade">@tylerlaprade</a> on 2025-01-03 15:13</div>
            <div class="timeline-body"><p>@MichaReiser, hmm, these are the three options it gives me. I don't know how to distinguish between them. All three seem to have the same problem, though.</p>
<p><img width="1051" alt="Image" src="https://github.com/user-attachments/assets/06424685-b537-4771-834e-ffc90f57607e" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-03 15:17</div>
            <div class="timeline-body"><p>What's the exact error message from the schema? Can you try commenting out all settings and then, one by one (or doing a binary search where you comment in 50%) comment in the sections? Do you see the same in a <code>pyproject.toml</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tylerlaprade">@tylerlaprade</a> on 2025-01-03 15:22</div>
            <div class="timeline-body"><p>Oh! Good idea - it was hard to tell which line was problematic since <em>all</em> occurrences of <code>lint</code> were squiggled, but the problem seems to come solely from <code>extend-safe-fixes = [&quot;ANN&quot;, &quot;C4&quot;, &quot;EM&quot;, &quot;RET&quot;, &quot;SIM&quot;, &quot;TCH&quot;, &quot;UP&quot;]</code>. Was that setting deprecated?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tylerlaprade">@tylerlaprade</a> on 2025-01-03 15:25</div>
            <div class="timeline-body"><p>Ah ha! If I move it outside of <code>[lint]</code> (for some reason it's valid in both places???), the error actually becomes helpful.
<img width="1048" alt="Image" src="https://github.com/user-attachments/assets/b0e18fef-2f7f-4de7-993a-54754d0a0981" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-03 15:27</div>
            <div class="timeline-body"><p>The setting wasn't deprecated but <code>TCH</code> was renamed to <code>TC</code> (<a href="https://astral.sh/blog/ruff-v0.8.0#new-error-codes-for-flake8-type-checking-rules">blog</a>) and this seems to be causing the issue.</p>
<p>I see you just solved it. Nice. Yeah, our error reporting for the lint section is unfortunate because we use some functionality to avoid repeating all options globally and under <code>lint</code> and it doesn't seem to be that well supported</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:14 UTC
    </footer>
</body>
</html>
