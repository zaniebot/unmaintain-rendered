```yaml
number: 20509
title: remove blank line before the return statement in a last nested function
type: issue
state: open
author: ngdangtu-vn
labels:
  - formatter
  - style
assignees: []
created_at: 2025-09-22T07:32:21Z
updated_at: 2025-09-22T07:59:19Z
url: https://github.com/astral-sh/ruff/issues/20509
synced_at: 2026-01-10T01:56:57Z
```

# remove blank line before the return statement in a last nested function

---

_Issue opened by @ngdangtu-vn on 2025-09-22 07:32_

### Summary

Current behaviour:

```py
def exception_handler(fallback=None):
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # ...

        return wrapper

    return decorator
```

Expect behaviour:
```py
def exception_handler(fallback=None):
    def decorator(func):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # ...
        return wrapper
    return decorator
```

Imho, I don't think a blank line in this case is reasonable. In fact it makes me hard to follow the code block.

---

_Renamed from "remove blank line before the return statement in a function" to "remove blank line before the last return statement in a function" by @ngdangtu-vn on 2025-09-22 07:33_

---

_Label `formatter` added by @MichaReiser on 2025-09-22 07:34_

---

_Label `style` added by @MichaReiser on 2025-09-22 07:34_

---

_Comment by @MichaReiser on 2025-09-22 07:39_

Thanks for opening this issue

I find both formatting hard to read, but I'd probably prefer the first version because the empty lines at least give me some form of grouping. But this is definitely very subjective, and there's no "clear better" version. 

Changing the default now without it being clearly better is too disruptive a change. However, I consider this another instance where I find black's style guide too opinionated, and I'd prefer what prettier and rustfmt do, leave the number of empty lines up to the author (but disallow more than 2 empty lines). We would probably have to introduce this style change behind a configuration option because this more strict behavior is liked by many users.

---

_Renamed from "remove blank line before the last return statement in a function" to "remove blank line before the return statement in a last nested function" by @ngdangtu-vn on 2025-09-22 07:59_

---
