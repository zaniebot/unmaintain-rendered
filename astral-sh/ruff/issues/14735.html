<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rule to prohibit closures? - astral-sh/ruff #14735</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rule to prohibit closures?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14735">#14735</a>
        opened by <a href="https://github.com/s-banach">@s-banach</a>
        on 2024-12-02 15:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/s-banach">@s-banach</a> on 2024-12-02 15:48</div>
            <div class="timeline-body"><p>Sometimes I accidentally write a python script like this:</p>
<pre><code class="language-python">import polars as pl


def f(data_1: pl.DataFrame):
    return data_1.join(data_2, on=&quot;...&quot;)


if __name__ == &quot;__main__&quot;:
    data_1 = pl.DataFrame(...)
    data_2 = pl.DataFrame(...)
    result = f(data_1)
</code></pre>
<p>It can be easy to miss the mistake when <code>f</code> has more arguments.</p>
<p>I understand that sometimes people deliberately define global constants, and read from those constants without passing them into a function. But it would be nice to have an option to prohibit that pattern, and force all variables to be passed in explicitly. Is it feasible or desirable for ruff to make an optional rule like that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-12-02 17:44</div>
            <div class="timeline-body"><p>Restricting any use of closures is too restricting with Ruff's current rule model. We might be able to support a rule like this once #1774 has been completed.</p>
<p>Even then, restricting all closures seems fairly strict and it would probably be good to come up with a more specific heuristic to reduce the false positives where the use of closures is intended.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-12-02 17:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:15 UTC
    </footer>
</body>
</html>
