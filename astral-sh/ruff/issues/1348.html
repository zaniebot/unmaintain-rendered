<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support for refurb - astral-sh/ruff #1348</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support for refurb</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1348">#1348</a>
        opened by <a href="https://github.com/guyrosin">@guyrosin</a>
        on 2022-12-23 12:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/guyrosin">@guyrosin</a> on 2022-12-23 12:19</div>
            <div class="timeline-body"><p>It would be nice to have support for refurb (https://github.com/dosisod/refurb) - a great tool for simplifying and modernizing Python code. It currently includes 48 checks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2022-12-24 19:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> removed by @charliermarsh on 2022-12-31 18:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">plugin</span> added by @charliermarsh on 2022-12-31 18:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1774.html">astral-sh/ruff#1774</a> on 2023-01-23 21:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-01-26 15:18</div>
            <div class="timeline-body"><h3>builtin</h3>
<ul>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/list_extend.py"><code>FURB113</code></a> use-list-extend: Use <code>x.extend(...)</code> instead of repeatedly calling <code>x.append()</code></li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_del.py"><code>FURB131</code></a> no-del:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_ignored_dict_items.py"><code>FURB135</code></a> no-ignored-dict-items: (<a href="https://docs.astral.sh/ruff/rules/incorrect-dict-iterator/">PERF102</a>)</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_ignored_enumerate.py"><code>FURB148</code></a> no-ignored-enumerate-items:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_set_for_loop.py"><code>FURB142</code></a> no-set-for-loop:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_slice_copy.py"><code>FURB145</code></a> no-slice-copy: Replace <code>x[:]</code> with <code>x.copy()</code></li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/print.py"><code>FURB105</code></a> simplify-print: Replace <code>print(&quot;&quot;)</code> with <code>print()</code></li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/set_discard.py"><code>FURB132</code></a> use-set-discard: Replace <code>if x in s: s.remove(x)</code> with <code>s.discard(x)</code></li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/simplify_comprehension.py"><code>FURB137</code></a> simplify-comprehension:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/simplify_global_and_nonlocal.py"><code>FURB154</code></a> simplify-global-and-nonlocal:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/use_isinstance_tuple.py"><code>FURB121</code></a>(PLR1701/SIM101) use-isinstance-issubclass-tuple:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/use_max.py"><code>FURB136</code></a> use-min-max:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/writelines.py"><code>FURB122</code></a> use-writelines: Replace <code>for line in lines: f.write(line)</code> with <code>f.writelines(lines)</code></li>
<li>[x]  <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/use_bit_count.py"><code>FURB161</code></a> use-bit-count: <code>bin(0b1010).count(&quot;1&quot;)</code></li>
<li>[x]  <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/use_int_base_zero.py"><code>FURB166</code></a> use-int-base-zero: <code>int(x[2:], 2)</code> -&gt; <code>int(x, 0)</code></li>
<li>[ ]  <code>FURB173</code> use-dict-union: <code>{&quot;k&quot;: &quot;v&quot;, **d}</code> -&gt; <code>{&quot;k&quot;: &quot;v&quot;} | d</code></li>
</ul>
<h3>contextlib</h3>
<ul>
<li>[X] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/contextlib/with_suppress.py"><code>FURB107</code></a>(SIM105) use-with-suppress:</li>
</ul>
<h3>datetime</h3>
<ul>
<li>[x]  <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/datetime/simplify_fromisoformat.py"><code>FURB162</code></a> simplify-fromisoformat</li>
<li>[x]  <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/datetime/simplify_fromisoformat.py"><code>FURB176</code></a> (DTZ003/DTZ004) unreliable-utc-usage</li>
</ul>
<h3>decimal</h3>
<ul>
<li>[x] <code>FURB157</code>: simplify-decimal-ctor: <code>Decimal(&quot;123&quot;)</code> -&gt; <code>Decimal(123)</code></li>
<li>[x]  <code>FURB164</code>: no-from-float: <code>Decimal.from_float(x)</code> -&gt; <code>Decimal(x)</code></li>
</ul>
<h3>flow</h3>
<ul>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/flow/no_trailing_continue.py"><code>FURB133</code></a> no-redundant-continue: Continue is redundant here</li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/flow/no_trailing_return.py"><code>FURB125</code></a> no-redundant-return: Return is redundant here</li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/flow/no_with_assign.py"><code>FURB127</code></a> no-with-assign: This variable is redeclared later, and can be removed here</li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/flow/simplify_return.py"><code>FURB126</code></a> simplify-return:</li>
</ul>
<h3>function</h3>
<ul>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/function/use_implicit_default.py"><code>FURB120</code></a> use-implicit-default: Don't pass an argument if it is the same as the default value</li>
</ul>
<h3>functools</h3>
<ul>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/functools/use_cache.py"><code>FURB134</code></a>(UP033) use-cache: Replace <code>@lru_cache(maxsize=None)</code> with <code>@cache</code></li>
</ul>
<h3>iterable</h3>
<ul>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/iterable/implicit_readlines.py"><code>FURB129</code></a> simplify-readlines: Replace <code>f.readlines()</code> with <code>f</code></li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/iterable/in_tuple.py"><code>FURB109</code></a> use-consistent-in-bracket:</li>
</ul>
<h3>itertools</h3>
<ul>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/itertools/use_starmap.py"><code>FURB140</code></a> use-starmap: Replace <code>f(...) for ... in x</code> with <code>starmap(f, x)</code></li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/itertools/use_chain_from_iterable.py"><code>FURB179</code></a> use-chain-from-iterable</li>
</ul>
<h3>logical</h3>
<ul>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/logical/use_equal_chain.py"><code>FURB124</code></a> use-comparison-chain:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/logical/use_in.py"><code>FURB108</code></a> use-in-oper: (<code>SIM109</code>)</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/logical/use_or.py"><code>FURB110</code></a> use-or-oper: Replace <code>x if x else y</code> with <code>x or y</code></li>
</ul>
<h3>math</h3>
<ul>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/math/use_constants.py"><code>FURB152</code></a> use-math-constant:</li>
<li>[x]  <code>FURB163</code>: simplify-math-log: <code>math.log(x, 10)</code> -&gt; <code>math.log10(x)</code></li>
</ul>
<h3>pathlib</h3>
<ul>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/cwd.py"><code>FURB104</code></a> use-pathlib-cwd: Replace <code>os.getcwd()</code> with <code>Path.cwd()</code></li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/exists.py"><code>FURB141</code></a> (PTH110) use-pathlib-exists:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/is_file.py"><code>FURB146</code></a>(PTH113) use-pathlib-is-funcs:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/mkdir.py"><code>FURB150</code></a>(PTH102) use-pathlib-mkdir:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/no_join.py"><code>FURB147</code></a> (PTH118) no-path-join:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/open.py"><code>FURB117</code></a> use-pathlib-open:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/read_text.py"><code>FURB101</code></a> use-pathlib-read-text-read-bytes:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/simplify_ctor.py"><code>FURB153</code></a>(PTH201) simplify-path-constructor: Replace <code>Path(&quot;.&quot;)</code> with <code>Path()</code></li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/touch.py"><code>FURB151</code></a> use-pathlib-touch:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/unlink.py"><code>FURB144</code></a>(PTH107) use-pathlib-unlink:</li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/with_suffix.py"><code>FURB100</code></a> use-pathlib-with-suffix: Use <code>Path(x).with_suffix(y)</code> instead of slice and concat</li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/write_text.py"><code>FURB103</code></a> use-pathlib-write-text-write-bytes:</li>
<li>[ ]  <code>FURB172</code>: use-suffix</li>
<li>[x]  <code>FURB155</code> (PTH202)</li>
</ul>
<h3>readability</h3>
<ul>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/in_keys.py"><code>FURB130</code></a>(SIM118) no-in-dict-keys:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_double_not.py"><code>FURB114</code></a>(SIM208) no-double-not: Replace <code>not not x</code> with <code>bool(x)</code></li>
<li>[ ] ~<a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_is_bool_compare.py"><code>FURB149</code></a> no-bool-literal-compare~ (https://github.com/astral-sh/ruff/pull/9539)</li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_len_cmp.py"><code>FURB115</code></a> no-len-compare:</li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_or_default.py"><code>FURB143</code></a> no-default-or:</li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_unnecessary_cast.py"><code>FURB123</code></a> no-redundant-cast:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_comprehension.py"><code>FURB138</code></a>(PERF401) use-list-comprehension: Consider using list comprehension</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_func_name.py"><code>FURB111</code></a> use-func-name: Replace <code>lambda x: f(x)</code> with <code>f</code></li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_literal.py"><code>FURB112</code></a> use-literal: (<a href="https://docs.astral.sh/ruff/rules/unnecessary-collection-call/">C408</a>)</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_operators.py"><code>FURB118</code></a> use-operator:</li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_tuple_swap.py"><code>FURB128</code></a> use-tuple-unpack-swap: Use tuple unpacking instead of temporary variables to swap values</li>
<li>[ ]  <code>FURB160</code>: no-redundant-assignment: <code>x = x</code></li>
<li>[ ]  <code>FURB165</code>: no-temp-class-object</li>
<li>[x]  <code>FURB168</code>: no-isinstance-type-none: <code>isinstance(x, type(None))</code> -&gt; <code>x is None</code></li>
<li>[x]  <code>FURB169</code>: no-is-type-none: <code>type(x) is type(None)</code> -&gt; <code>x is None</code></li>
<li>[x]  <code>FURB171</code>: no-single-item-in: <code>x in (,y)</code> -&gt; <code>x == y</code></li>
</ul>
<h3>string</h3>
<ul>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/string/expandtabs.py"><code>FURB106</code></a> use-expandtabs:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/string/fstring_number.py"><code>FURB116</code></a> use-fstring-number-format:</li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/string/no_multiline_lstrip.py"><code>FURB139</code></a> no-multiline-lstrip: Replace <code>&quot;&quot;&quot;\n...&quot;&quot;&quot;.lstrip()</code> with <code>&quot;&quot;&quot;\...&quot;&quot;&quot;</code></li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/string/startswith.py"><code>FURB102</code></a>(PIE810) use-startswith-endswith-tuple:</li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/string/use_fstring_fmt.py"><code>FURB119</code></a> use-fstring-format:</li>
<li>[ ]  FURB156: use-string-charsets</li>
<li>[ ]  FURB159: simplify-strip</li>
</ul>
<h3>FastAPI</h3>
<ul>
<li>[ ]  FURB175: simplify-fastapi-query</li>
</ul>
<h3>Misc</h3>
<ul>
<li>[ ]  FURB174: simplify-token-function</li>
</ul>
<h3>Pattern matching</h3>
<ul>
<li>[ ]  FURB158: simplify-as-pattern-with-builtin: <code>case str() as x:</code> -&gt; <code>case str(x):</code></li>
</ul>
<h3>Regex</h3>
<ul>
<li>[x]  FURB167: use-long-regex-flag: <code>re.I</code> -&gt; <code>re.IGNORECASE</code></li>
<li>[ ]  FURB170: use-regex-pattern-methods</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-01-26 17:32</div>
            <div class="timeline-body"><p>@charliermarsh <code>refurb</code> leverages type information from mypy for many of its checks (it actually extends mypy).
For instance, <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_del.py#L50">no_del</a> looks if the variable is of type <code>list</code> of <code>dict</code> to determine the violation.</p>
<p>Are there any examples of rules where <code>ruff</code> keeps track of the type of a variable? And perhaps broader, what is your view on type inference in <code>ruff</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2348.html">astral-sh/ruff#2348</a> on 2023-01-30 11:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2608.html">astral-sh/ruff#2608</a> on 2023-02-06 20:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2023-07-10 02:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5833.html">astral-sh/ruff#5833</a> on 2023-07-17 14:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5905.html">astral-sh/ruff#5905</a> on 2023-07-20 18:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../dosisod/refurb/issues/190.html">dosisod/refurb#190</a> on 2023-07-22 05:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dosisod">@dosisod</a> on 2023-07-22 07:58</div>
            <div class="timeline-body"><p>Hi, creator of Refurb here! I've added a bunch of checks since this issue was opened, so I would like to give an updated list of what's new. I also went ahead and checked all the existing items on the list to see which ones have been completed and need to be marked off. The docs explaining each of the checks can be found <a href="https://github.com/dosisod/refurb/blob/master/docs/checks.md">here</a>.</p>
<p>These Refurb checks are already in Ruff and can be checked off:</p>
<ul>
<li>FURB102 (PIE810)</li>
<li>FURB114 (SIM208)</li>
<li>FURB121 (PLR1701/SIM101)</li>
<li>FURB138 (PERF401)</li>
<li>FURB144 (PTH107)</li>
<li>FURB146 (PTH113)</li>
<li>FURB150 (PTH102)</li>
<li><em>These are new checks that will need to be added to the list (see below)</em></li>
<li>FURB155 (PTH202)</li>
<li>FURB176 (DTZ003/DTZ004)</li>
</ul>
<p>In the process I found a bunch of rules in Ruff that are either giving false positives or aren't emitting errors for all the tests in the Refurb test suite. I wouldn't consider these 100% merged, but I'll list them here anyways and will open issues individually later:</p>
<ul>
<li>FURB107 (SIM105)</li>
<li>FURB108 (PLR1714)</li>
<li>FURB112 (C408/UP018)</li>
<li>FURB119 (RUF010)</li>
<li>FURB123 (UP018)</li>
<li>FURB125 (PLR1711)</li>
<li>FURB126 (RET505)</li>
<li>FURB130 (SIM118)</li>
<li>FURB135 (PERF102)</li>
<li>FURB137 (C400/C401/C403/C411)</li>
</ul>
<p>The rest are new checks that have been added since this issue was opened, and don't tie to any existing rule in Ruff. I tried to maintain the same format as the comment by @sbrugman</p>
<h4>builtin</h4>
<ul>
<li>[x] FURB161: use-bit-count: <code>bin(0b1010).count(&quot;1&quot;)</code></li>
<li>[ ] FURB166: use-int-base-zero: <code>int(x[2:], 2)</code> -&gt; <code>int(x, 0)</code></li>
<li>[ ] FURB173: use-dict-union: <code>{&quot;k&quot;: &quot;v&quot;, **d}</code> -&gt; <code>{&quot;k&quot;: &quot;v&quot;} | d</code></li>
</ul>
<h4>Datetime</h4>
<ul>
<li>[ ] FURB162: simplify-fromisoformat</li>
<li>[x] FURB176 (DTZ003/DTZ004)</li>
</ul>
<h4>Decimal</h4>
<ul>
<li>[ ] FURB157: simplify-decimal-ctor: <code>Decimal(&quot;123&quot;)</code> -&gt; <code>Decimal(123)</code></li>
<li>[ ] FURB164: no-from-float: <code>Decimal.from_float(x)</code> -&gt; <code>Decimal(x)</code></li>
</ul>
<h4>FastAPI</h4>
<ul>
<li>[ ] FURB175: simplify-fastapi-query</li>
</ul>
<h4>Math</h4>
<ul>
<li>[ ] FURB163: simplify-math-log: <code>math.log(x, 10)</code> -&gt; <code>math.log10(x)</code></li>
</ul>
<h4>Misc</h4>
<ul>
<li>[ ] FURB174: simplify-token-function</li>
</ul>
<h4>Pathlib</h4>
<ul>
<li>[ ] FURB172: use-suffix</li>
<li>[x] FURB155 (PTH202)</li>
</ul>
<h4>Pattern matching</h4>
<ul>
<li>[ ] FURB158: simplify-as-pattern-with-builtin: <code>case str() as x:</code> -&gt; <code>case str(x):</code></li>
</ul>
<h4>Readability</h4>
<ul>
<li>[x] FURB160: no-redundant-assignment: <code>x = x</code></li>
<li>[ ] FURB165: no-temp-class-object</li>
<li>[ ] FURB168: no-isinstance-type-none: <code>isinstance(x, type(None))</code> -&gt; <code>x is None</code></li>
<li>[ ] FURB169: no-is-type-none: <code>type(x) is type(None)</code> -&gt; <code>x is None</code></li>
<li>[ ] FURB171: no-single-item-in: <code>x in (,y)</code> -&gt; <code>x == y</code></li>
</ul>
<h4>Regex</h4>
<ul>
<li>[x] FURB167: use-long-regex-flag: <code>re.I</code> -&gt; <code>re.IGNORECASE</code></li>
<li>[ ] FURB170: use-regex-pattern-methods</li>
</ul>
<h4>String</h4>
<ul>
<li>[ ] FURB156: use-string-charsets</li>
<li>[ ] FURB159: simplify-strip</li>
</ul>
<p>That's it! Feel free to hide/edit this comment once the original comment gets updated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-07-22 12:20</div>
            <div class="timeline-body"><p>@dosisod Thanks for the extensive review, I've updated the tracking. The rules that are nearly implemented because of the different behaviours on some tests cases we will mark as complete as they are fixed.</p>
<p>Currently working on <code>FURB101</code> and <code>FURB103</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5977.html">astral-sh/ruff#5977</a> on 2023-07-22 13:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5987.html">astral-sh/ruff#5987</a> on 2023-07-22 20:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5988.html">astral-sh/ruff#5988</a> on 2023-07-22 21:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5995.html">astral-sh/ruff#5995</a> on 2023-07-23 01:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SavchenkoValeriy">@SavchenkoValeriy</a> on 2023-08-13 08:49</div>
            <div class="timeline-body"><p>Hey there folks, I'm working on <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/list_extend.py">FURB113</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5377.html">astral-sh/ruff#5377</a> on 2023-08-17 02:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6587.html">astral-sh/ruff#6587</a> on 2023-08-17 03:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/6702.html">astral-sh/ruff#6702</a> on 2023-08-20 12:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/6897.html">astral-sh/ruff#6897</a> on 2023-08-26 13:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/6904.html">astral-sh/ruff#6904</a> on 2023-08-26 20:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SavchenkoValeriy">@SavchenkoValeriy</a> on 2023-08-26 20:43</div>
            <div class="timeline-body"><p>Also implemented <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_del.py">FURB131</a> and <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/set_discard.py">FURB132</a>.</p>
<p>@charliermarsh WDYT? Do you think it's worth it? Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SavchenkoValeriy">@SavchenkoValeriy</a> on 2023-08-29 16:36</div>
            <div class="timeline-body"><p>Working on <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/itertools/use_starmap.py">FURB140</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6995.html">astral-sh/ruff#6995</a> on 2023-08-29 20:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjkuson">@tjkuson</a> on 2023-08-30 11:38</div>
            <div class="timeline-body"><p>Working on <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_slice_copy.py">FURB145</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7007.html">astral-sh/ruff#7007</a> on 2023-08-30 11:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jack-mcivor">@jack-mcivor</a> on 2023-09-06 12:31</div>
            <div class="timeline-body"><p>I'm guessing the <code>needs-decision</code> label could be removed or replaced?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @charliermarsh on 2023-09-06 12:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-06 12:40</div>
            <div class="timeline-body"><p>Good call, thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7253.html">astral-sh/ruff#7253</a> on 2023-09-09 14:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SavchenkoValeriy">@SavchenkoValeriy</a> on 2023-09-09 15:23</div>
            <div class="timeline-body"><p>Working on <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/pathlib/read_text.py">FURB101</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjkuson">@tjkuson</a> on 2023-09-16 11:55</div>
            <div class="timeline-body"><p>Working on <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/no_ignored_enumerate.py">FURB148</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7454.html">astral-sh/ruff#7454</a> on 2023-09-17 11:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7617.html">astral-sh/ruff#7617</a> on 2023-09-23 13:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6258.html">astral-sh/ruff#6258</a> on 2023-09-26 02:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7682.html">astral-sh/ruff#7682</a> on 2023-09-27 21:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7704.html">astral-sh/ruff#7704</a> on 2023-09-28 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7727.html">astral-sh/ruff#7727</a> on 2023-09-30 23:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjkuson">@tjkuson</a> on 2023-10-04 14:28</div>
            <div class="timeline-body"><p>Working on <code>FURB171</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7815.html">astral-sh/ruff#7815</a> on 2023-10-04 15:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjkuson">@tjkuson</a> on 2023-10-28 12:37</div>
            <div class="timeline-body"><p>Working on <code>FURB168</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/8308.html">astral-sh/ruff#8308</a> on 2023-10-28 16:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjkuson">@tjkuson</a> on 2023-11-04 12:28</div>
            <div class="timeline-body"><p>Working on <code>FURB169</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/8487.html">astral-sh/ruff#8487</a> on 2023-11-04 14:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/diceroll123">@diceroll123</a> on 2023-11-04 20:45</div>
            <div class="timeline-body"><p><code>FURB160</code> is covered by <code>PLW0127</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/8664.html">astral-sh/ruff#8664</a> on 2023-11-13 20:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/8727.html">astral-sh/ruff#8727</a> on 2023-11-16 21:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../scikit-learn/scikit-learn/pulls/27825.html">scikit-learn/scikit-learn#27825</a> on 2023-11-23 17:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjkuson">@tjkuson</a> on 2023-11-26 17:44</div>
            <div class="timeline-body"><p>Working on <code>FURB163</code>!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/8842.html">astral-sh/ruff#8842</a> on 2023-11-26 19:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../pyca/cryptography/pulls/9944.html">pyca/cryptography#9944</a> on 2023-11-30 15:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/9077.html">astral-sh/ruff#9077</a> on 2023-12-09 20:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-12-10 16:49</div>
            <div class="timeline-body"><p><a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/builtin/simplify_comprehension.py">FURB137</a> is implemented by various C4 checks, I think.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-12-11 16:03</div>
            <div class="timeline-body"><p>While <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/itertools/use_chain_from_iterable.py">FURB179</a> might be a bit complicated to do properly, could we just add a check that does the simplest case that converts <code>itertools.chain(*iterable)</code> to <code>itertools.chain.from_iterable(iterable)</code>? That's also the one transform that should be more or less guaranteed to increase performance (not sure about the other ones on the latest versions of Python; the sum list way is probably worse, but covered by RUF017).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-12-11 16:09</div>
            <div class="timeline-body"><p><a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/string/use_fstring_fmt.py">FURB119</a> is implemented by RUF010 so that can probably checked off too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/9171.html">astral-sh/ruff#9171</a> on 2023-12-17 20:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-12-18 20:07</div>
            <div class="timeline-body"><p>FURB111 is covered by PLW0108 https://docs.astral.sh/ruff/rules/unnecessary-lambda/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-12-22 10:54</div>
            <div class="timeline-body"><p>@charliermarsh to what extent is the semantics tracked by <code>ruff</code> ready to implement features to detect default arguments?
i.e. is it possible to find the function default argument from a reference?</p>
<p>For builtins I guess https://github.com/astral-sh/ruff/blob/main/crates/ruff_python_stdlib/src/builtins.rs could be extended. This would effectively generalise redundant-open-modes (UP015).</p>
<blockquote>
<p>Don't pass an argument if it is the same as the default value:</p>
<p>Bad:</p>
<pre><code class="language-python">def greet(name: str = &quot;bob&quot;) -&gt; None:
    print(f&quot;Hello {name}&quot;)

greet(&quot;bob&quot;)
</code></pre>
<p>Good:</p>
<pre><code class="language-python">def greet(name: str = &quot;bob&quot;) -&gt; None:
    print(f&quot;Hello {name}&quot;)

greet()
</code></pre>
</blockquote>
<p>https://github.com/dosisod/refurb/blob/master/refurb/checks/function/use_implicit_default.py</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-22 15:20</div>
            <div class="timeline-body"><p>@sbrugman -- I think we're not yet in a position to support that rule (at least not robustly), since we can't trace function calls <em>across files</em>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/9045.html">astral-sh/ruff#9045</a> on 2023-12-22 15:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/9265.html">astral-sh/ruff#9265</a> on 2023-12-23 21:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dosisod">@dosisod</a> on 2024-01-08 22:44</div>
            <div class="timeline-body"><p>Hi all! Here's an updated list of some of the new and/or improved checks added to Refurb recently:</p>
<h2>New (or not yet listed) checks</h2>
<ul>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/shlex/use_join.py"><code>FURB178</code></a> <code>use-shlex-join</code>: Replace <code>&quot; &quot;.join(shlex.quote(x) for x in y)</code> with <code>shlex.join(y)</code></li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_abc_shorthand.py"><code>FURB180</code></a> <code>use-abc-shorthand</code>: Replace <code>metaclass=ABCMeta</code> with <code>ABC</code></li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/hashlib/simplify_ctor.py"><code>FURB182</code></a> <code>simplify-hashlib-ctor</code>: Replace <code>h = sha512(); h.update(b'data')</code> with <code>h = sha512(b'data')</code></li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_str_func.py"><code>FURB183</code></a> <code>use-str-func</code>: Replace <code>f&quot;{x}&quot;</code> with <code>str(x)</code></li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/fluid_interface.py"><code>FURB184</code></a> <code>use-fluid-interface</code>: See https://github.com/dosisod/refurb/issues/286 for examples</li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/no_copy_with_merge.py"><code>FURB185</code></a> <code>no-copy-with-merge</code>: Replace <code>x.copy() | {...}</code> with <code>x | {...}</code></li>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_sort.py"><code>FURB186</code></a> <code>use-sort</code>: Replace <code>x = sorted(x)</code> with <code>x.sort()</code></li>
</ul>
<h2>Improved checks</h2>
<ul>
<li>[ ] Improve <code>FURB179</code>/<code>RUF107</code> support: <a href="https://github.com/dosisod/refurb/blob/a295cee6d188f5797aefe5d7cf77a353ed48ea93/test/data/err_179.py#L37-L50">examples</a></li>
</ul>
<p>Note that <code>FURB179</code> uses <code>chain.from_iterable(x)</code>, whereas <code>RUF107</code> uses <code>reduce(iadd, x, [])</code></p>
<ul>
<li>[ ] Improve <code>FURB173</code> <code>use-dict-union</code> support: <a href="https://github.com/dosisod/refurb/blob/a295cee6d188f5797aefe5d7cf77a353ed48ea93/test/data/err_173.py#L37-L42">examples</a></li>
</ul>
<p>Even though FURB173 isn't implemented yet, this improved detection might be worth adding to Ruff. C408 does detect <code>dict(a=1)</code>, though it doesn't detect <code>dict(**x, a=1)</code>. The <code>**x</code> part can be problematic if <code>x</code> doesn't use <code>str</code> for the key type, whereas <code>x | {&quot;a&quot;: 1}</code> or <code>{**x, &quot;a&quot;: 1}</code> will work regardless of the key type.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/9516.html">astral-sh/ruff#9516</a> on 2024-01-14 20:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/9539.html">astral-sh/ruff#9539</a> on 2024-01-15 23:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dosisod">@dosisod</a> on 2024-01-25 06:14</div>
            <div class="timeline-body"><p>Released a (small) update with a few notable changes:</p>
<p>New checks:</p>
<ul>
<li>[ ] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/readability/use_reverse.py"><code>FURB187</code></a> <code>use-reverse</code>: <code>x = reversed(x)</code>, <code>x = x[::-1]</code> -&gt; <code>x.reverse()</code></li>
<li>[x] <a href="https://github.com/dosisod/refurb/blob/master/refurb/checks/string/remove_prefix_or_suffix.py"><code>FURB188</code></a> <code>use-remove-prefix-or-suffix</code>: <code>f[:-4] if f.endswith(&quot;.txt&quot;) else f</code> -&gt; <code>f.removesuffix(&quot;.txt&quot;)</code><ul>
<li><code>removeprefix()</code>/<code>removesuffix()</code> is Python 3.9+</li>
</ul>
</li>
</ul>
<p>Both of the above checks improved performance when using the suggested changes, at least in the micro benchmarks I ran.</p>
<p>Improved checks:</p>
<ul>
<li>[ ] FURB118: <code>lambda x: (x[2], x[0])</code> -&gt; <code>operator.itemgetter(2, 0)</code></li>
<li>[ ] FURB111/PLW0108: <code>lambda: 0.0</code> -&gt; <code>float</code><ul>
<li>PLW0108 used to cover FURB111, but this new change means PLW0108 no longer fully covers FURB111. This new change is similar to a <a href="https://github.com/asottile/pyupgrade#replace-unnecessary-lambdas-in-collectionsdefaultdict-calls">new Pyupgrade</a> check, but that one only checks for lambdas in <code>defaultdict()</code>s, whereas mine has no such restriction.</li>
</ul>
</li>
</ul>
<p>Also, there are a lot of scattered check-lists throughout this issue, perhaps we could consolidate them into the comment at the top? At the very least I could consolidate my comments into one, if that helps.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10002.html">astral-sh/ruff#10002</a> on 2024-02-16 12:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2024-02-27 23:55</div>
            <div class="timeline-body"><p>Isn't FURB142 already implemented as PLC0208?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10526.html">astral-sh/ruff#10526</a> on 2024-03-22 16:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10533.html">astral-sh/ruff#10533</a> on 2024-03-23 06:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10583.html">astral-sh/ruff#10583</a> on 2024-03-25 18:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hikaru-kajita">@hikaru-kajita</a> on 2024-03-27 06:59</div>
            <div class="timeline-body"><p>Working on <code>FURB164</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10630.html">astral-sh/ruff#10630</a> on 2024-03-27 17:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10647.html">astral-sh/ruff#10647</a> on 2024-03-28 14:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10650.html">astral-sh/ruff#10650</a> on 2024-03-28 20:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10687.html">astral-sh/ruff#10687</a> on 2024-04-01 03:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10802.html">astral-sh/ruff#10802</a> on 2024-04-06 16:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10921.html">astral-sh/ruff#10921</a> on 2024-04-14 01:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/11187.html">astral-sh/ruff#11187</a> on 2024-04-28 22:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/13256.html">astral-sh/ruff#13256</a> on 2024-09-05 17:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/13530.html">astral-sh/ruff#13530</a> on 2024-09-26 18:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14105.html">astral-sh/ruff#14105</a> on 2024-11-05 12:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2025-01-06 18:40</div>
            <div class="timeline-body"><p>Can someone edit the:</p>
<ul>
<li><code>FURB141</code> comment to mention it's redundant to <code>PTH110</code></li>
<li><code>FURB147</code> comment to mention it's redundant to <code>PTH118</code></li>
</ul>
<p>Thanks in advance</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/16113.html">astral-sh/ruff#16113</a> on 2025-02-12 05:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/16131.html">astral-sh/ruff#16131</a> on 2025-02-13 06:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2025-03-11 01:28</div>
            <div class="timeline-body"><p>Let's add <a href="https://github.com/dosisod/refurb/blob/master/docs/checks.md#furb184-use-fluid-interface"><code>FURB184</code></a> to the OP, as I like that rule :D</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/21855.html">astral-sh/ruff#21855</a> on 2025-12-09 00:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:03 UTC
    </footer>
</body>
</html>
