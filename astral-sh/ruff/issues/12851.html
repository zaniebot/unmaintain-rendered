<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Lint Request] Lint against `assertTrue`/`assertFalse` instead of more specific asserts - astral-sh/ruff #12851</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Lint Request] Lint against <code>assertTrue</code>/<code>assertFalse</code> instead of more specific asserts</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/12851">#12851</a>
        opened by <a href="https://github.com/alanhdu">@alanhdu</a>
        on 2024-08-12 19:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/alanhdu">@alanhdu</a></div>
            <div class="timeline-body"><p>The default <code>unittest.TestCase</code> uses a set of specialized <code>assert*</code> functions to give better error messages (unlike <code>pytest</code> which does some metaprogramming to work with &quot;bare&quot; <code>assert</code> statements).</p>
<p>Would it be possible to have a lint that auto-detects (and corrects) using the less general <code>assertTrue/assertFalse</code> instead of the more specialized asserts (since those will have subpar error message)? For instance, a lint that would autofix
<code>self.assertTrue(isinstance(x, int))</code> to <code>self.assertIsInstance(x, int)</code>?</p>
<p>I think the actual implementation should be straightforward, but one subtlety is that this would be incompatible with the existing</p>
<p>This would be incompatible with PT009 (which encourages &quot;bare asserts&quot;), but presumably we can just document that users should only use one or another?</p>
<p>I assume this is already implemented somewhere in some other linter, but I actually haven't seen one before -- in our codebase, I just have a set of regexes to apply (which isn't great, but so far hasn't led to too many false positives either).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2024-08-13 04:53</div>
            <div class="timeline-body"><blockquote>
<p>This would be incompatible with PT009 (which encourages &quot;bare asserts&quot;), but presumably we can just document that users should only use one or another?</p>
</blockquote>
<p>That would be expected given you probably shouldn't be mixing unittest and pytest together ^^</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-13 08:09</div>
            <div class="timeline-body"><p>This should be addressed by https://github.com/astral-sh/ruff/issues/2417 which has rules for your specific use-case (https://github.com/jparise/flake8-assertive). I'll merge this issue into it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2024-08-13 08:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:50:51 UTC
    </footer>
</body>
</html>
