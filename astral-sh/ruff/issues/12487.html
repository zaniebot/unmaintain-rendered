<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ruff check --fix isort rule I001 removes comments - astral-sh/ruff #12487</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>ruff check --fix isort rule I001 removes comments</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/12487">#12487</a>
        opened by <a href="https://github.com/kfot">@kfot</a>
        on 2024-07-24 08:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kfot">@kfot</a> on 2024-07-24 08:59</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p><code>ruff check --fix</code> will remove the comment in such situation while it shouldn't be affected</p>
<p><img src="https://github.com/user-attachments/assets/3f308766-f2ef-42e8-a413-e358cf221276" alt="image" /></p>
<p>Snippet:</p>
<pre><code class="language-python">
class Transaction(object):
    &quot;&quot;&quot;Implements the Transaction class.&quot;&quot;&quot;

    def __init__(self, client, test_mode=False):
        from mylib import (
            MyClient,
            MyMgmtClient,
        )  # some comment

        ....
</code></pre>
<p>Pyproject:</p>
<pre><code class="language-toml">[tool.ruff]
extend-include = [&quot;*.ipynb&quot;]
exclude = [
    &quot;.bzr&quot;,
    &quot;.direnv&quot;,
    &quot;.eggs&quot;,
    &quot;.git&quot;,
    &quot;.git-rewrite&quot;,
    &quot;.hg&quot;,
    &quot;.mypy_cache&quot;,
    &quot;.nox&quot;,
    &quot;.pants.d&quot;,
    &quot;.pytype&quot;,
    &quot;.ruff_cache&quot;,
    &quot;.svn&quot;,
    &quot;.tox&quot;,
    &quot;.venv&quot;,
    &quot;__pypackages__&quot;,
    &quot;_build&quot;,
    &quot;buck-out&quot;,
    &quot;build&quot;,
    &quot;dist&quot;,
    &quot;node_modules&quot;,
    &quot;site-packages&quot;,
    &quot;venv&quot;,
]

line-length = 120

[tool.ruff.lint.isort]
known-first-party = [&quot;mylib&quot;]


[tool.ruff.lint]
select = [
    &quot;A&quot;,  # prevent using keywords that clobber python builtins
    &quot;B&quot;,  # bugbear: security warnings
    &quot;D&quot;, # pydocstyle
    &quot;I&quot;,  # isort
    &quot;E&quot;,  # pycodestyle
    &quot;F&quot;,  # pyflakes
    &quot;ISC&quot;,  # implicit string concatenation
    &quot;RUF&quot;,  # the ruff developer's own rules
]

ignore = [
    &quot;B904&quot;,  # raise-without-from-inside-except: syntax not compatible with py2
    &quot;D100&quot;, # Missing docstring in public module
    &quot;D101&quot;, # Missing docstring in public class
    &quot;D102&quot;, #  Missing docstring in public method
    &quot;D103&quot;, #  Missing docstring in public function
    &quot;D104&quot;, #  Missing docstring in public package
    &quot;D105&quot;, # Missing docstring in magic method
    &quot;E731&quot;,  # lambda-assignment: lambdas are substential in maintenance of py2/3 codebase
    &quot;ISC001&quot;,  # conflicts with ruff format command
    &quot;RUF005&quot;,  # collection-literal-concatenation: syntax not compatible with py2
    &quot;RUF012&quot;, # mutable-class-default: typing is not available for py2
]

[tool.ruff.lint.pydocstyle]
convention = &quot;numpy&quot;
</code></pre>
<p>Version
ruff 0.5.2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MichaReiser on 2024-07-24 11:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by @MichaReiser on 2024-07-24 11:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-07-24 11:32</div>
            <div class="timeline-body"><p>Makes sense. <a href="https://play.ruff.rs/dd45fea9-4983-434d-bba0-6d8cee832a9c">Playground</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-24 21:39</div>
            <div class="timeline-body"><p>Agree this is a bug, thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-24 21:43</div>
            <div class="timeline-body"><p>This is specifically about trailing commas on the last import in the block.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-07-24 22:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/12498.html">astral-sh/ruff#12498</a> on 2024-07-24 22:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-07-25 21:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-07-25 21:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
