```yaml
number: 2004
title: "Ruff's first party import detection treats any folder in root as a package"
type: issue
state: open
author: Jackenmen
labels:
  - core
assignees: []
created_at: 2023-01-19T19:05:06Z
updated_at: 2023-03-24T20:21:54Z
url: https://github.com/astral-sh/ruff/issues/2004
synced_at: 2026-01-10T01:56:45Z
```

# Ruff's first party import detection treats any folder in root as a package

---

_Issue opened by @Jackenmen on 2023-01-19 19:05_

Repro:
```
mkdir ruff_isort_repro
cd ruff_isort_repro
python -m venv .venv
. .venv/bin/activate
pip install ruff

mkdir schema
echo '{}' > schema/example-json-schema.json

mkdir example_package
touch example_package/sub.py
echo $'import schema\n\nfrom example_package import sub' > example_package/__init__.py
```
```
$ ruff . --select I001 --fix --diff 
--- example_package/__init__.py
+++ example_package/__init__.py
@@ -1,3 +1,2 @@
 import schema
-
 from example_package import sub

Would fix 1 error(s).
```

I've run into this because I use a `schema` package from PyPI *and* I have a `schema` folder with JSON schemas within the root of the repository which causes ruff to think that `schema` is a package. I think that one way of solving this would be to alter the current heuristic to check for `{base}/__init__.py` file and `{base}.py` file rather than `{base}` directory and `{base.py}` file. This may potentially affect namespace packages and I'm not sure there's a good solution for this that doesn't involve explicitly specifying namespace packages.

---

_Comment by @charliermarsh on 2023-01-19 22:31_

What you're describing could work... I believe we already require namespace packages to be defined explicitly ([`namespace-packages`](https://github.com/charliermarsh/ruff#namespace-packages)) so that might be fine.

(You could also mark `schema` as `known-third-party` to unblock you though.)


---

_Label `core` added by @charliermarsh on 2023-01-19 22:31_

---

_Comment by @Cjkjvfnby on 2023-03-24 20:21_

The same behavior is in isort  https://github.com/PyCQA/isort/issues/2101

---

_Referenced in [astral-sh/ruff#8372](../../astral-sh/ruff/issues/8372.md) on 2023-10-31 10:18_

---
