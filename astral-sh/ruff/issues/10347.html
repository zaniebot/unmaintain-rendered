<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for attribute docstrings - astral-sh/ruff #10347</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Add support for attribute docstrings</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/10347">#10347</a>
        opened by <a href="https://github.com/tibdex">@tibdex</a>
        on 2024-03-11 22:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/tibdex">@tibdex</a> on 2024-03-11 22:07</div>
            <div class="timeline-body"><p>The goal of this issue is to get Ruff to lint and format attribute docstrings as already done for class/method/function docstrings.</p>
<p><a href="https://peps.python.org/pep-0224">PEP 224</a> is about attribute docstrings. It was rejected but its proposed syntax (where a triple quote string can be placed under a class attribute to document it) has become a de facto standard:</p>
<ul>
<li>Pyright/Pylance/VS Code supports it (added in https://github.com/microsoft/pyright/issues/2106 and https://github.com/microsoft/pyright/commit/ea60aafef03d10a7f28c543b10941fcc4cd08a09).</li>
<li>Sphinx supports it with the <a href="https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html#directive-autoattribute"><code>:autoattribute: directive</code></a>.</li>
</ul>
<p>For example, with this code:</p>
<pre><code class="language-python">from dataclasses import dataclass

@dataclass
class Demo:
    &quot;&quot;&quot;Demo.&quot;&quot;&quot;

    value: int
    &quot;&quot;&quot;The value.&quot;&quot;&quot;
</code></pre>
<p>Sphinx outputs the expected HTML:</p>
<img width="408" alt="Screenshot 2024-03-11 at 17 29 48" src="https://github.com/astral-sh/ruff/assets/6574550/f53e5313-1c6b-4322-a15d-5a0b6af8eed0">

<p>and <a href="https://www.sphinx-doc.org/en/master/usage/extensions/doctest.html"><code>shpinx.ext.doctest</code></a> would even detect interactive Python sessions in <code>value</code>'s docstring and check them.</p>
<p>VS Code also shows the attribute docstring on hover:</p>
<img width="250" alt="Screenshot 2024-03-11 at 17 33 38" src="https://github.com/astral-sh/ruff/assets/6574550/e31e4769-b0cb-4715-a598-24c5905b9db8">

<p>On the other hand, with this code trying to document the attribute in a Google style docstring:</p>
<pre><code class="language-python">from dataclasses import dataclass

@dataclass
class Demo:
    &quot;&quot;&quot;Demo.

    Attributes:
        value: The value.
    &quot;&quot;&quot;

    value: int
</code></pre>
<p>Sphinx, even with <a href="https://www.sphinx-doc.org/en/master/usage/extensions/napoleon.html">sphinx.ext.napoleon</a> correctly configured, duplicates the attribute:</p>
<img width="421" alt="Screenshot 2024-03-11 at 17 29 03" src="https://github.com/astral-sh/ruff/assets/6574550/54ccc1a1-eb17-497c-908d-b8df3432b678">

<p>and VS Code does not show the docstring on hover:</p>
<img width="247" alt="Screenshot 2024-03-11 at 17 33 59" src="https://github.com/astral-sh/ruff/assets/6574550/7e815230-1948-4bd9-bfc8-8df7adfc3050">

<p>Would you consider detecting this syntax as attribute docstrings and handling them like the other docstrings (e.g. formatting code examples in them)?</p>
<blockquote>
<p>[!NOTE]
<a href="https://peps.python.org/pep-0727">PEP 727</a> is a draft suggesting to document attributes like this:</p>
<pre><code class="language-python">from typing import Annotated, Doc

class Demo:
    value: Annotated[int, Doc(&quot;The value.&quot;)]
</code></pre>
<p><a href="https://typing-extensions.readthedocs.io/en/stable/#Doc"><code>typing-extensions</code> already provides it</a> but Sphinx and VS Code do not support it.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5975.html">astral-sh/ruff#5975</a> on 2024-03-11 22:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">docstring</span> added by @charliermarsh on 2024-03-11 22:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-11 22:30</div>
            <div class="timeline-body"><p>I'm generally supportive of this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-06-07 03:40</div>
            <div class="timeline-body"><p>Ruff can now detect this via https://github.com/astral-sh/ruff/pull/11315 although it's currently not being used anywhere (linter or formatter).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../PTB-MR/mrpro/pulls/508.html">PTB-MR/mrpro#508</a> on 2024-11-11 16:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14318.html">astral-sh/ruff#14318</a> on 2024-11-13 17:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danielcjacobs">@danielcjacobs</a> on 2025-11-06 15:56</div>
            <div class="timeline-body"><blockquote>
<p>Ruff can now detect this via https://github.com/astral-sh/ruff/pull/11315 although it's currently not being used anywhere (linter or formatter).</p>
</blockquote>
<p>Note, it seems ruff only handles attribute docstrings that are directly under the attribute.</p>
<p>It would be very nice to also have support for attribute docstrings placed in a google-style <code>Attributes:</code> section, as requested in the issue description.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DetachHead">@DetachHead</a> on 2025-12-05 07:55</div>
            <div class="timeline-body"><p>from #21805, this should also work on global variables (not just attributes in classes) as well as the new syntax for type aliases:</p>
<pre><code class="language-py">foo = 1
&quot;&quot;&quot;docstring&quot;&quot;&quot;

type Foo = int
&quot;&quot;&quot;docstring&quot;&quot;&quot;
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:12 UTC
    </footer>
</body>
</html>
