<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rule request: checking `ArgumentParser` argument names - astral-sh/ruff #17324</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rule request: checking <code>ArgumentParser</code> argument names</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/17324">#17324</a>
        opened by <a href="https://github.com/jamesbraza">@jamesbraza</a>
        on 2025-04-09 19:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jamesbraza">@jamesbraza</a></div>
            <div class="timeline-body">Summary
<p><code>AttributeError</code>s can arise from typos in <code>ArgumentParser</code>&#x27;s args after <code>parse_args</code>.</p>
<pre><code>import argparse

parser = argparse.ArgumentParser()
parser.add_argument(&quot;--arg&quot;, type=str)
args = parser.parse_args()
print(args.not_an_arg)
</code></pre>
<p>This snippet will blow up with <code>AttributeError: &#x27;Namespace&#x27; object has no attribute &#x27;not_an_arg&#x27;</code>, as <code>not_an_arg</code> is not an argument.</p>
<p>It would be cool if Ruff could detect this type of error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-09 20:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-09 20:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-09 20:52</div>
            <div class="timeline-body"><p>This seems like the kind of thing that would benefit from type inference. I tested <a href="https://mypy-play.net/?mypy=latest&amp;python=3.12&amp;gist=3f37523417f908f8a6a489d9c144f87b">mypy</a> and <a href="https://pyright-play.net/?pythonVersion=3.8&amp;strict=true&amp;code=JYWwDg9gTgLgBAQygczEgzgUwFDbVLKOAXkRXywDoBBFAVxEwDsYAFDTKACgEo8OolBABNhAfSTIGzGFwBEAWgWS5AGjgwAnmEzF0MKH0noScCp0rmJKdLzxRgLLscpMIMCU2vIeQA">pyright</a>, and they don&#x27;t currently detect this, though. Maybe red-knot will!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-10 06:23</div>
            <div class="timeline-body"><p>I think that would even be hard for a type checker, and would require a feature similar to TypeScript&#x27;s <a href="https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html">template literal types</a> that allows defining &quot;dynamic&quot; members (<code>not_an_arg</code>). What makes this worse is that <code>argparse</code> API allows a lot of customization which impacts the argument names etc, making this hard to represent. It might as well be that Python needs a new argument parser with a typing friendlier API</p>
<p>I&#x27;ll close this issue because it isn&#x27;t actionable for us in the short term (even mid-term)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-10 06:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:48 UTC
    </footer>
</body>
</html>
