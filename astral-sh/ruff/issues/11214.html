<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`ruff server` first-party libraries get categorized as third-party - astral-sh/ruff #11214</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`ruff server` first-party libraries get categorized as third-party</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11214">#11214</a>
        opened by <a href="https://github.com/bluthej">@bluthej</a>
        on 2024-04-30 14:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bluthej">@bluthej</a> on 2024-04-30 14:25</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>Keywords: I001, Organize imports, first-party</p>
<p>Ruff version : 0.4.2</p>
<p>If I'm not mistaken, <code>ruff server</code> currently treats first-party libraries like they're third-party libraries, which is not the case for <code>ruff-lsp</code>.</p>
<p>Here is a minimal setup to reproduce this:</p>
<ul>
<li>Create a new project with the following layout:</li>
</ul>
<pre><code class="language-shell">.
├── pyproject.toml
└── src
     └── hello_world
         ├── __init__.py
         ├── module.py
         └── other_module.py
</code></pre>
<p>with these contents:</p>
<details><summary>pyproject.toml</summary>
<p>

<pre><code class="language-toml">[build-system]
requires = [&quot;setuptools&gt;=61.0&quot;]
build-backend = &quot;setuptools.build_meta&quot;

[project]
name = &quot;hello-world&quot;
version = &quot;0.0.1&quot;
dependencies = [
  &quot;numpy&quot;
]

[tool.ruff]
lint.extend-select = [&quot;I&quot;]
</code></pre>
</p>
</details> 

<details><summary>module.py</summary>
<p>

<pre><code class="language-python">hello = &quot;hello world&quot;
</code></pre>
</p>
</details> 

<details><summary>other_module.py</summary>
<p>

<pre><code class="language-python">from pathlib import Path

from numpy.linalg import norm

from hello_world.module import hello
</code></pre>
</p>
</details> 

<ul>
<li>Then run <code>ruff-lsp</code> in an editor =&gt; this should not lint the import order, just like doing <code>ruff check .</code> doesn't say anything about import order</li>
<li>Then run <code>ruff server</code> in an editor =&gt; now there should be an <code>Organize import</code> lint, and if you apply it, it should bring the <code>hello_world</code> import just above the <code>numpy</code> import, which is not the expected behavior</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @snowsignal on 2024-04-30 14:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @snowsignal on 2024-04-30 14:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @snowsignal by @snowsignal on 2024-04-30 14:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-30 15:57</div>
            <div class="timeline-body"><p>It's similar to #11185: we need to determine and provide the containing package at that call site.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/11224.html">astral-sh/ruff#11224</a> on 2024-05-01 00:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @snowsignal on 2024-05-02 02:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @snowsignal on 2024-05-02 02:24</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:12 UTC
    </footer>
</body>
</html>
