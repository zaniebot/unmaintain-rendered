<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[formatter] target-python option - astral-sh/ruff #8051</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[formatter] target-python option</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8051">#8051</a>
        opened by <a href="https://github.com/smackesey">@smackesey</a>
        on 2023-10-18 19:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/smackesey">@smackesey</a></div>
            <div class="timeline-body"><p>Working on migrating our formatter setup to <code>ruff</code>. I noticed this does not work:</p>
<pre><code>ruff format --target-python=py38 .
</code></pre>
<p>Does the <code>target-python</code> setting not affect the formatter? Black has this setting.</p>
<p>Related, <code>ruff format --line-length=100 .</code> does work, but <code>line-length</code> isn&#x27;t listed under <code>ruff format --help</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-18 20:27</div>
            <div class="timeline-body"><p>Good question... It doesn&#x27;t affect the formatter right now, because we never reformat in a way that introduces incompatible syntax. For example, we don&#x27;t <em>add</em> parentheses around context managers (though we do preserve them if they&#x27;re already present). It may be necessary when we start to support preview style, since Black <em>does</em> add parentheses around context managers for supported versions when <code>--preview</code> is enabled.</p>
<p>Like in the linter, we don&#x27;t error if you set <code>--target-python=py38</code> and <em>already</em> use some syntax that isn&#x27;t Python 3.8-compatible, because our parser just supports the latest Python syntax. (This may change in the future.) This is different than in Black, where (IIUC) they use the target version to modify the set of supported features in the parser.</p>
<p>(I did some research on this in <a href="https://github.com/astral-sh/ruff/issues/7234">astral-sh/ruff#7234</a>, if interested.)</p>
<p>All that being said... I think we should add this flag to the formatter, even if it doesn&#x27;t modulate behavior right now. It&#x27;s surprising that it doesn&#x27;t exist, and it <em>will</em> need to exist in the future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-18 20:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-19 00:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:43 UTC
    </footer>
</body>
</html>
