<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Feature Request] Exclude option in per-linter configuration - astral-sh/ruff #9930</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>[Feature Request] Exclude option in per-linter configuration</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/9930">#9930</a>
        opened by <a href="https://github.com/AAraKKe">@AAraKKe</a>
        on 2024-02-11 13:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/AAraKKe">@AAraKKe</a> on 2024-02-11 13:45</div>
            <div class="timeline-body"><h2>Description</h2>
<p>Hi team! I started with Ruff a couple of days ago for a side project, and I love it. Not only because of how fast it is but also because it removes the need to maintain several configuration files since now everything can live in the <code>pyproject.toml</code> file of the project (I am looking to you, flake8...).</p>
<p>I have been looking into the configuration and have not found the option I am asking for here, if it is there, forgive me for the issue. Just point in the right direction, and thanks a lot!</p>
<p>I am having an issue with isort and the lack of <code>exclude</code> option at a per-linter level. We have an <code>exclude</code> top-level option to tell Ruff to exclude given files from everything. Then we have a dedicated lint <code>exclude</code> option so we can decide what files not to lint. However, given that Ruff provides so many <em>linters</em> when linting, it would be nice if we could also have exclude for each one of them. When running each feature, each one would run on any file that is not excluded by a combination of any <code>exclude</code> up to its node.</p>
<p>I am saying this because, while isort is great, imports sometimes can be sensitive to sorting. I know that is not ideal, and modules should be importable in a stand-alone manner, but there are use cases where importing things in a <code>__init__</code> in a certain way is done on purpose for specific reasons. I wouldn't like to exclude <code>__init__</code> files from linting completely, but I would love to be able to not run isort in them.</p>
<h2>Example use case</h2>
<p>As an example, I am building an app in which there are hundreds of handlers. These handlers then need to be registered on the app, and we have built it in such a way that just defining the handler in the package and decorating it with a <code>Registry.register</code> method registers them. This removes the need to keep registering handlers. However, in order for this to happen automagically, the init needs to be written with imports in such a way that when the handler is imported, the decorator already exists to avoid circular dependencies.</p>
<p>This is known and documented in the project and everyone is onboard with the solution as it saves a huge amount of boilerplate, but we need to disable linting in <code>__init__</code> files to avoid isort breaking this feature.</p>
<p>Thanks a lot!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[Feature Request] Exclude option for isort configuration" to "[Feature Request] Exclude option in per-linter configuration" by @AAraKKe on 2024-02-11 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-11 14:51</div>
            <div class="timeline-body"><p>This is sort of the intent of <a href="https://docs.astral.sh/ruff/settings/#lint_per-file-ignores"><code>per-file-ignores</code></a> -- have you tried that? E.g., you can disable the isort rules in <code>__init__.py</code> files with:</p>
<pre><code class="language-toml">[tool.ruff.lint.per-file-ignores]
&quot;__init__.py&quot; = [&quot;I&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-02-11 14:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AAraKKe">@AAraKKe</a> on 2024-02-12 19:23</div>
            <div class="timeline-body"><p>Actually I tried it but I thought it was not working as expected. But it does! I was validated whether the VSCode extension reports something to validate the configuration and for some reason the extension misses this configuration. Is it because there are options the extension does not recognize?</p>
<p>The block of imports appears underlined as if it needed to be formated but if I run Ruff it is not sorted, as expected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-23 21:28</div>
            <div class="timeline-body"><p>I'm glad to hear that <code>per-file-ignores</code> works for you.</p>
<p>The VS Code extension supports all configuration settings.  Can you share a screenshot of what you're seeing? Do you have the <code>isort</code> plugin (not ruff, the standalone isort plugin) installed and it conflicts with ruff's settings?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AAraKKe">@AAraKKe</a> on 2024-02-25 11:10</div>
            <div class="timeline-body"><p>Nevermind! All good, I just noticed when answering to your question that the <code>per-file-ignores</code> seem to have been removed from <code>pyproject.toml</code> by a coworker for some reason. If I add it back it is all working fine. Not sure what happened there. I will figure it out with him, thanks a lot!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-02-25 11:39</div>
            <div class="timeline-body"><p>Thanks for reporting back. I'll close the issue but feel free to comment again or to open a new issue if you have more questions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-02-25 11:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:12 UTC
    </footer>
</body>
</html>
