<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ordered comparisons - astral-sh/ruff #9459</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ordered comparisons</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/9459">#9459</a>
        opened by <a href="https://github.com/Armavica">@Armavica</a>
        on 2024-01-10 19:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Armavica">@Armavica</a></div>
            <div class="timeline-body"><p>The rule <code>SIM300</code> discourages so-called &quot;Yoda comparisons&quot;, i.e. comparisons where the numerical constant is first. While this can make sense to focus on the variable, this can lead to code that is more difficult to read and more easy to get wrong, especially for interval checking. See for example https://llewellynfalco.blogspot.com/2016/02/dont-use-greater-than-sign-in.html for the full argument.</p>
<p>Consider the following code:</p>
<pre><code>def f(x):
    a = (5 &lt; x and x &lt; 10)  # noqa: SIM300 # probably the easiest to read though
    b = (5 &lt; x and 10 &gt; x)  # noqa: SIM300
    c = (x &gt; 5 and x &lt; 10)
    d = (x &gt; 5 and 10 &gt; x)  # noqa: SIM300
    e = (x &lt; 10 and 5 &lt; x)  # noqa: SIM300
    f = (x &lt; 10 and x &gt; 5)
    g = (10 &gt; x and 5 &lt; x)  # noqa: SIM300
    h = (10 &gt; x and x &gt; 5)  # noqa: SIM300
    return (a, b, c, d, e, f, g, h)
</code></pre>
<p>Out of the eight different ways to write this condition, I would argue that the first one is by far the one whose intent is the clearest, despite the first condition being flagged by SIM300.</p>
<p>I could see several possible options for a rule or rules fixing this pattern:</p>
<ul>
<li>Don&#x27;t do anything: this does not address the pattern, but also does not contradict SIM300</li>
<li>Add a rule &quot;Don&#x27;t use &gt; or &gt;=&quot; for simple comparisons, contradicting SIM300 in some cases</li>
<li>Address the specific case of range checking (like in this example) by additionally reordering the left and right boundaries, still contradicting SIM300 in some cases</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tjkuson">@tjkuson</a> on 2024-01-11 12:36</div>
            <div class="timeline-body"><p>The argument linked seems to be that the author finds one style easier to read and extrapolates that other developers shouldn&#x27;t use the greater sign for consistency (it could just as well be titled &#x27;Don&#x27;t use the less than sign in programming&#x27; or &#x27;Always put the numerical constant on the right&#x27;).</p>
<p>Personally, I find that keeping the variable on the left makes comparisons significantly easier to read and like that <code>SIM300</code> enforces this (I prefer <code>x &gt; 5</code> to <code>5 &lt; x</code>), so would prefer that Ruff keeps <em>some way</em> of linting for this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Armavica">@Armavica</a> on 2024-01-12 19:49</div>
            <div class="timeline-body"><p>Yes, it is a convention and as with many others some might prefer the opposite one. Perhaps rule SIM300 could be configurable, to either flag one or the other pattern?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-13 01:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-13 01:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hauntsaninja">@hauntsaninja</a> on 2024-01-14 03:24</div>
            <div class="timeline-body"><p>Maybe the best thing here is if the fix recognises the situation and suggests the <a href="https://docs.python.org/3/library/stdtypes.html#comparisons">chained comparison</a> <code>5 &lt; x &lt; 10</code> instead.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:48 UTC
    </footer>
</body>
</html>
