<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ruff can not fix indent error and more whitespaces on function parameters (but black works well) - astral-sh/ruff #9001</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ruff can not fix indent error and more whitespaces on function parameters (but black works well)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/9001">#9001</a>
        opened by <a href="https://github.com/lgf4591">@lgf4591</a>
        on 2023-12-05 00:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/lgf4591">@lgf4591</a></div>
            <div class="timeline-body"><h1>Code</h1>
<pre><code class="language-python">def main(   num   ):
            print(f&quot;the num is: {num}&quot;)
</code></pre>
<h1>ruff config</h1>
<pre><code class="language-toml">[tool.black]
target-version = [&quot;py37&quot;]
line-length = 120
skip-string-normalization = true

[tool.ruff]
target-version = &quot;py37&quot;
line-length = 120
indent-width = 2
select = [
  &quot;A&quot;,
  &quot;ARG&quot;,
  &quot;B&quot;,
  &quot;C&quot;,
  &quot;DTZ&quot;,
  &quot;E&quot;,
  &quot;EM&quot;,
  &quot;F&quot;,
  &quot;FBT&quot;,
  &quot;I&quot;,
  &quot;ICN&quot;,
  &quot;ISC&quot;,
  &quot;N&quot;,
  &quot;PLC&quot;,
  &quot;PLE&quot;,
  &quot;PLR&quot;,
  &quot;PLW&quot;,
  &quot;Q&quot;,
  &quot;RUF&quot;,
  &quot;S&quot;,
  &quot;T&quot;,
  &quot;TID&quot;,
  &quot;UP&quot;,
  &quot;W&quot;,
  &quot;YTT&quot;,
]
ignore = [
  # Allow non-abstract empty methods in abstract base classes
  &quot;B027&quot;,
  # Allow boolean positional values in function calls, like `dict.get(... True)`
  &quot;FBT003&quot;,
  # Ignore checks for possible passwords
  &quot;S105&quot;,
  &quot;S106&quot;,
  &quot;S107&quot;,
  # Ignore complexity
  &quot;C901&quot;,
  &quot;PLR0911&quot;,
  &quot;PLR0912&quot;,
  &quot;PLR0913&quot;,
  &quot;PLR0915&quot;,
  # T201 `print` found
  &quot;T201&quot;,
]
unfixable = [
  # Don't touch unused imports
  &quot;F401&quot;,
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-05 00:03</div>
            <div class="timeline-body"><p>Have you tried running <code>ruff format</code>, instead of <code>ruff check</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2023-12-05 00:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lgf4591">@lgf4591</a> on 2023-12-05 09:20</div>
            <div class="timeline-body"><p>yes, but it doesn't work</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-12-05 09:30</div>
            <div class="timeline-body"><p>I tried to reproduce the issue with the given configuration using <code>ruff format</code> but haven't been able to.</p>
<pre><code class="language-bash">~/astral/test
➜ ls
main.py		pyproject.toml

~/astral/test
➜ ../ruff/target/debug/ruff format
warning: The following rules may cause conflicts when used with the formatter: `ISC001`. To avoid unexpected behavior, we recommend disabling these rules, either by removing them from the `select` or `extend-select` configuration, or adding them to the `ignore` configuration.
warning: Detected debug build without --no-cache.
1 file reformatted

~/astral/test
➜ bat main.py
───────┬─────────────────────────────────────────────────────────────────────────────────────────────
       │ File: main.py
───────┼─────────────────────────────────────────────────────────────────────────────────────────────
   1   │ def main(num):
   2   │   print(f&quot;the num is: {num}&quot;)
───────┴─────────────────────────────────────────────────────────────────────────────────────────────
</code></pre>
<p>Can you list the content of your directory and share how you invoke ruff?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lgf4591">@lgf4591</a> on 2023-12-05 11:40</div>
            <div class="timeline-body"><p>thx!, I tested it in another PC and it works well with &quot;ruff format .&quot; , then I reinstall my vscode on my PC, it work well now</p>
<p>by the way, why &quot;ruff check . --fix&quot; command doesn't work?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @lgf4591 on 2023-12-05 11:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-12-06 00:21</div>
            <div class="timeline-body"><p>Hmm that's surprising. Not sure what's happening. Have you checked that both computers use the same ruff version?</p>
<p>Or do you have a user-level configuration on the computer where formatting isn't working (only if you aren't using the latest version of ruff). You can use the <code>--show-settings</code> option for debugging. The output is rather bad (we plan to improve it), but it prints the name of all configurations ruff takes into consideration:</p>
<pre><code class="language-bash">ruff check --show-setting
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:49:12 UTC
    </footer>
</body>
</html>
