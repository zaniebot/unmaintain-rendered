<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Block fixes on a repo with uncommitted files? - astral-sh/ruff #18449</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Block fixes on a repo with uncommitted files?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18449">#18449</a>
        opened by <a href="https://github.com/etiennebacher">@etiennebacher</a>
        on 2025-06-03 21:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/etiennebacher">@etiennebacher</a> on 2025-06-03 21:39</div>
            <div class="timeline-body"><p>Hello, while using <code>cargo fix</code> on a repo that uses version control, I got this error:</p>
<blockquote>
<p>error: the working directory of this package has uncommitted changes, and <code>cargo fix</code> can potentially perform destructive changes; if you'd like to suppress this error pass <code>--allow-dirty</code>, or commit the changes to these files: <list of files></p>
</blockquote>
<p>I thought this was very useful. In the absence of this check, it can be very hard to see the changes generated by <code>cargo fix</code>.</p>
<p>It made me realize that Ruff doesn't have this kind of check (and therefore doesn't have an equivalent of <code>--allow-dirty</code>). This would seem quite useful to me and therefore I'm surprised I haven't found a single issue or documentation item mentioning this. I looked for &quot;dirty&quot;, &quot;uncommitted&quot;, and &quot;unstaged&quot; in the issues and docs, I hope I didn't overlook something obvious.</p>
<p>Has this been discussed before? Does it make sense to implement this feature (which would likely break some workflow since previous calls to <code>--fix</code> would now be blocked)? If not, maybe the <a href="https://docs.astral.sh/ruff/linter/#fixes">section on fixes</a> could suggest using version control before applying <code>--fix</code>.</p>
<hr />
<p>ruff 0.11.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @MichaReiser on 2025-06-04 05:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @MichaReiser on 2025-06-04 05:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:37:35 UTC
    </footer>
</body>
</html>
