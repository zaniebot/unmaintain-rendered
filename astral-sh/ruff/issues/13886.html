<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rule E221 and Rule E222 does not catch error in if condition  - astral-sh/ruff #13886</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Rule E221 and Rule E222 does not catch error in if condition</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13886">#13886</a>
        opened by <a href="https://github.com/samratashok87">@samratashok87</a>
        on 2024-10-23 10:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/samratashok87">@samratashok87</a></div>
            <div class="timeline-body"><p>Rule E221 ([multiple-spaces-before-operator] and Rule E222 ([multiple-spaces-after-operator) work for normal assignment operators.
But If multiples spaces are present in if condition either before or after &#x27;==&#x27; operator Ruff does not catch.</p>
<pre><code>#!/usr/bin/env python3
a  =  1
if a  ==  1:
    print(a)

In the above code Ruff flags the line a = 1 as error as it contains more space before and after operator where as it does not catch the error on the if condition.

/home/ashok/.local/bin/ruff check hello_world.py                                                                                    

hello_world.py:6:2: E221 [*] Multiple spaces before operator
  |
5 | print(&#x27;Hello World&#x27;)
6 | a  =  1
  |  ^^ E221
7 | if a  ==  1:
8 |     print(a)
  |
  = help: Replace with single space

hello_world.py:6:5: E222 [*] Multiple spaces after operator
  |
5 | print(&#x27;Hello World&#x27;)
6 | a  =  1
  |     ^^ E222
7 | if a  ==  1:
8 |     print(a)
  |
  = help: Replace with single space
</code></pre>
<p>This issue is caught by flake8.</p>
<p>Ruff.toml</p>
<pre><code>target-version = &quot;py310&quot;
[lint]
preview = true
extend-select = [
  &quot;E&quot;,
  &quot;PL&quot;,  # pylint
  &quot;UP&quot;,  # pyupgrade
  &quot;D&quot;,   # pydocstyle
  &quot;C4&quot;,
  &quot;SIM&quot;,
]
</code></pre>
<p>ruff version :  0.7.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-23 12:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-23 12:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-23 12:34</div>
            <div class="timeline-body"><p>The rule correctly detects leading whitespace for <code>&lt;=</code>. For some reason, <code>EqEqual</code> is missing from https://github.com/astral-sh/ruff/blob/fc7fa59e5fcdef7f83fbf8e6228be434930af66c/crates/ruff_linter/src/rules/pycodestyle/rules/logical_lines/space_around_operator.rs#L292-L327</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-23 13:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:59 UTC
    </footer>
</body>
</html>
