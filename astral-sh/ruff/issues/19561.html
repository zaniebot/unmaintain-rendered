<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UP010 should not report future features as unnecessary if they are used - astral-sh/ruff #19561</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UP010 should not report future features as unnecessary if they are used</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/19561">#19561</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-07-25 18:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dscorbett">@dscorbett</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>If a feature imported from <code>__future__</code> is used later in the module, it is not unnecessary, so <a href="https://docs.astral.sh/ruff/rules/unnecessary-future-import/"><code>unnecessary-future-import</code> (UP010)</a> should not flag it. <a href="https://play.ruff.rs/d08da604-d150-4389-9c90-d3e727e12bdf">Example</a>:</p>
<pre><code class="language-console">$ cat &gt;up010.py &lt;&lt;'# EOF'
from __future__ import print_function
print(print_function)
# EOF

$ python up010.py
_Feature((2, 6, 0, 'alpha', 2), (3, 0, 0, 'alpha', 0), 1048576)

$ ruff --isolated check up010.py --select UP010 --fix
Found 1 error (1 fixed, 0 remaining).

$ python up010.py 2&gt;&amp;1 | tail -n 1
NameError: name 'print_function' is not defined
</code></pre>
<p>This also applies to reexports using <code>__all__</code> <a href="https://play.ruff.rs/025537c1-ecd4-4b57-a12c-1b13284a448e">like this</a>:</p>
<pre><code class="language-python">from __future__ import print_function
__all__ = [&quot;print_function&quot;]
</code></pre>
<h3>Version</h3>
<p>ruff 0.12.5 (d13228ab8 2025-07-24)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-07-25 19:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MichaReiser on 2025-07-28 09:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikeleppane">@mikeleppane</a> on 2025-08-04 16:55</div>
            <div class="timeline-body"><p>Hi! I have reviewed this, and it is my understanding that the necessary adjustments/fixes may result in a somewhat wider blast radius.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-04 22:12</div>
            <div class="timeline-body"><blockquote>
<p>Hi! I have reviewed this, and it is my understanding that the necessary adjustments/fixes may result in a somewhat wider blast radius.</p>
</blockquote>
<p>Thanks for looking into it! Could you expand a bit on the wider blast radius? I assumed you meant that this would impact other rules (like changing the semantic model somehow), but from a quick peek at the rule implementation, it seems like it could be pretty localized, although it sounds like we may want to reuse some code from <a href="https://docs.astral.sh/ruff/rules/unused-import/#unused-import-f401">unused-import (F401)</a>.</p>
<p>I could be wrong, though. I'm interested in what you found!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikeleppane">@mikeleppane</a> on 2025-08-05 05:15</div>
            <div class="timeline-body"><p>Yes, you are correct! The <code>unused-import</code> rule can address the cases I was looking for. However, the current implementation of <code>UP010</code> cannot accommodate the possible use cases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-08-20 19:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:07 UTC
    </footer>
</body>
</html>
