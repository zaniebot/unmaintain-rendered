<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recognize charsets in different orders (`FURB156`) - astral-sh/ruff #21144</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Recognize charsets in different orders (<code>FURB156</code>)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/21144">#21144</a>
        opened by <a href="https://github.com/lypwig">@lypwig</a>
        on 2025-10-30 15:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/lypwig">@lypwig</a></div>
            <div class="timeline-body">Summary
<p>Instead of:</p>
<pre><code>if c in &quot;abcdefghijklmnopqrstuvwxyz&quot;:
    print(c)
</code></pre>
<p>Use:</p>
<pre><code>from string import ascii_lowercase
if c in ascii_lowercase:
    print(c)
</code></pre>
<p>And more generally:</p>
<ul>
<li><code>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</code> -&gt; <code>string.ascii_letters</code></li>
<li><code>abcdefghijklmnopqrstuvwxyz</code> -&gt; <code>string.ascii_lowercase</code></li>
<li><code>ABCDEFGHIJKLMNOPQRSTUVWXYZ</code> -&gt; <code>string.ascii_uppercase</code></li>
<li><code>0123456789</code> -&gt; <code>string.digits</code></li>
<li><code>0123456789abcdefABCDEF</code> -&gt; <code>string.hexdigits</code></li>
<li><code>01234567</code> -&gt; <code>string.octdigits</code></li>
</ul>
<p>The main reason is, when using a string literal like <code>abcdefghijklmopqrstuvwxyz</code> it&#x27;s not abvious when a letter is missing (oops, just did it, did you see it?), so it&#x27;s a potential source of errors.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-30 16:09</div>
            <div class="timeline-body"><p>This makes sense to me. Clippy has a similar <a href="https://rust-lang.github.io/rust-clippy/master/index.html#manual_is_ascii_check"><code>manual_is_ascii_check</code></a> too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-30 16:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-30 16:10</div>
            <div class="timeline-body"><p>Oh, actually we have an existing rule for this in preview: <a href="https://docs.astral.sh/ruff/rules/hardcoded-string-charset/#hardcoded-string-charset-furb156">hardcoded-string-charset (FURB156)</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> removed by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-30 16:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-30 16:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lypwig">@lypwig</a> on 2025-10-31 08:26</div>
            <div class="timeline-body"><p>Great!</p>
<p>A suggestion: when using the <code>in</code> keyword, the rule could work whatever the letters order.</p>
<p>Ie. these lines are similar*, but only the first one is detected by the linter:</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/918002ce-6c6e-41c0-94de-90655e8688e4"></p>
<p>https://play.ruff.rs/36ad710a-cafd-42ba-8dce-6778299bdbe5</p>
<p>*It&#x27;s not exactly the same because the iteration order differs, but I guess it&#x27;s a very specific use-case to check in a specific order.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-31 13:04</div>
            <div class="timeline-body"><p>Ah that&#x27;s a good point. There&#x27;s code in the rule for constructing bitsets of characters, but then we don&#x27;t convert the input to a set for the comparison. The set field is actually completely unused from what I can tell.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-31 13:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-31 13:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Rule request: avoid boilerplate string litterals.&quot; to &quot;Recognize charsets in different orders (`FURB156`)&quot; by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-31 13:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-11-01 02:08</div>
            <div class="timeline-body"><p>I looked into this a bit more and was going to make the set change, but I found <a href="https://github.com/astral-sh/ruff/issues/13802">astral-sh/ruff#13802</a> and #14233. It&#x27;s actually intentional that we only perform the check for that exact order because otherwise the diagnostic and fix is likely to be incorrect if <code>x</code> in your example isn&#x27;t a single character:</p>
<pre><code>&gt;&gt;&gt; import string
&gt;&gt;&gt; &#x27;1&#x27; in &#x27;1234567890&#x27;
True
&gt;&gt;&gt; &#x27;012&#x27; in &#x27;1234567890&#x27;
False
&gt;&gt;&gt; &#x27;012&#x27; in string.digits
True
</code></pre>
<p>So I&#x27;ll close this for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ntBre">@ntBre</a> on 2025-11-01 02:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:35 UTC
    </footer>
</body>
</html>
