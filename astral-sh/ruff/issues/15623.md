```yaml
number: 15623
title: running ruff fails on mounted cloud storage
type: issue
state: closed
author: likesum
labels:
  - question
assignees: []
created_at: 2025-01-20T22:50:53Z
updated_at: 2025-02-07T10:12:31Z
url: https://github.com/astral-sh/ruff/issues/15623
synced_at: 2026-01-10T01:56:55Z
```

# running ruff fails on mounted cloud storage

---

_Issue opened by @likesum on 2025-01-20 22:50_

When running `ruff` on a mounted cloud storage such as GCS,

```
ruff format test.py 
ruff failed
  Cause: Failed to rename temporary cache file to /home/xxx
  Cause: failed to persist temporary file: Operation not supported (os error 95)
  Cause: Operation not supported (os error 95)
```

---

_Renamed from "running ruff on mounted cloud storage" to "running ruff fails on mounted cloud storage" by @likesum on 2025-01-20 22:51_

---

_Label `question` added by @MichaReiser on 2025-01-21 07:17_

---

_Comment by @MichaReiser on 2025-01-21 07:18_

I don't know anything about GCS. Is the GCS storage read only? 

Either way, you can try to run ruff without caching `--no-cache` or specify another cache directory in your configuration/CLI `ruff format --cache-dir /not/gcs/.ruff-cache`

---

_Comment by @likesum on 2025-01-22 19:13_

> I don't know anything about GCS. Is the GCS storage read only?
> 
> Either way, you can try to run ruff without caching `--no-cache` or specify another cache directory in your configuration/CLI `ruff format --cache-dir /not/gcs/.ruff-cache`

Thanks, the workaround works. GCS is not read only, therefore I suspect the issue may have nothing to do with GCS in particular, rather it could be any directories that are mounted through e.g., sshfs.

---

_Closed by @MichaReiser on 2025-02-07 10:12_

---
