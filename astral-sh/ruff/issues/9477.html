<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Default copyright pattern doesn't allow commas - astral-sh/ruff #9477</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Default copyright pattern doesn't allow commas</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/9477">#9477</a>
        opened by <a href="https://github.com/dopplershift">@dopplershift</a>
        on 2024-01-11 21:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dopplershift">@dopplershift</a> on 2024-01-11 21:27</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>As of ruff 0.1.11, the default <code>notice-rgx</code> does not allow for headers that have commas, like:</p>
<blockquote>
<p>Copyright (c) 2018, 2019 Developers</p>
</blockquote>
<p><a href="https://github.com/astral-sh/ruff/blob/eb4ed2471b48d6ccba74064c65e37e32cba41a6c/crates/ruff_workspace/src/options.rs#L1065-L1076">Part of the docs</a> do say that <code>(?i)Copyright\s+(\(C\)\s+)?\d{4}([-,]\d{4})*</code> is the default pattern (which works), but there's also <code>(?i)Copyright\s+(\(C\)\s+)?\d{4}(-\d{4})*</code> mentioned in a separate sentence in the docs and matches what's in <a href="https://github.com/astral-sh/ruff/blob/eb4ed2471b48d6ccba74064c65e37e32cba41a6c/crates/ruff_linter/src/rules/flake8_copyright/settings.rs#L16C29-L16C73"><code>COPYRIGHT</code></a> (and reflects actual behavior). Any reason commas shouldn't be accepted?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-12 00:29</div>
            <div class="timeline-body"><p>I think it might be an oversight. We should probably allow commas there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-01-12 00:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/9498.html">astral-sh/ruff#9498</a> on 2024-01-12 21:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dopplershift">@dopplershift</a> on 2024-01-12 21:17</div>
            <div class="timeline-body"><p>PR submitted in #9498.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-25 05:10</div>
            <div class="timeline-body"><p>I believe this <em>is</em> allowed, at least in my testing: https://play.ruff.rs/b1dc1b2a-afec-48e6-82b5-ce7eb68fbf33. Closing for now but happy to revisit!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-01-25 05:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dopplershift">@dopplershift</a> on 2024-02-14 22:43</div>
            <div class="timeline-body"><p>@charliermarsh I think this and #9498 were closed in error, my local testing still shows a need to manually set <code>notice_rgx</code> in order to get this behavior accepting commas.</p>
<p>I think the reason your testing didn't show a problem is because you have to set <code>tool.ruff.lint.flake8-copyright.author</code> to <code>&quot;Developers&quot;</code> in order to enable the check I believe.</p>
<p>I can't figure out how to share it, but I verified this by setting the author properly on your link above.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dopplershift">@dopplershift</a> on 2024-03-01 00:05</div>
            <div class="timeline-body"><p>Ping @charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-01 00:06</div>
            <div class="timeline-body"><p>Ack, will take another look!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dopplershift">@dopplershift</a> on 2024-03-22 17:35</div>
            <div class="timeline-body"><p>Ping since there's a PR to fix sitting in #9498.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @charliermarsh on 2024-03-22 18:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-22 18:14</div>
            <div class="timeline-body"><p>Thanks, I think you're right, that does it. I'll get it merged now, but need to add tests.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-03-22 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dopplershift">@dopplershift</a> on 2024-03-22 18:43</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:52 UTC
    </footer>
</body>
</html>
