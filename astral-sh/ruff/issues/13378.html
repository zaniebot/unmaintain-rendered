<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>When set to parents (default) ban-relative-imports setting results in no errors despite parent relative imports being present - astral-sh/ruff #13378</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>When set to parents (default) ban-relative-imports setting results in no errors despite parent relative imports being present</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13378">#13378</a>
        opened by <a href="https://github.com/lgig">@lgig</a>
        on 2024-09-17 09:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/lgig">@lgig</a></div>
            <div class="timeline-body">

<p>Hello,</p>
<p>I&#x27;m trying to configure ruff to ban parent relative imports as described in rule <a href="https://docs.astral.sh/ruff/rules/relative-imports/">TID252</a> and <a href="https://docs.astral.sh/ruff/settings/#lint_flake8-tidy-imports_ban-relative-imports">ban-relative-imports</a> setting, but I can&#x27;t seem to make it work. Am I missing something or could this be a bug?</p>
<p>I tried searching issues for <code>ban-relative-imports</code> and <code>parents</code>, but none seem related.</p>
<p>Directory structure:</p>
<pre><code>__init__.py
a.py
one/
    __init__.py
    b.py
    two/
        __init__.py
        c.py
        d.py
</code></pre>
<p><code>d.py</code>:</p>
<pre><code>from ...a import A # Should be an error (fixable into `from a import A`?)
from ..b import B # Should be an error (fixable into `from one.B import B`?)
from .c import C # Should be ok

class D(A, B, C):
    ...
</code></pre>
<p><code>c.py</code>:</p>
<pre><code>class C:
    ...
</code></pre>
<p><code>b.py</code>:</p>
<pre><code>class B:
    ...
</code></pre>
<p><code>a.py</code>:</p>
<pre><code>class A:
    ...
</code></pre>
<p>My command (launched from project root):</p>
<pre><code>$ ruff check
All checks passed!
</code></pre>
<p>While I expected two errors from <code>d.py</code>.<br>
(obvious errors added on purpose inside <code>d.py</code> are recognized so the file is being checked)</p>
<p>My settings (<code>ruff.toml</code>):</p>
<pre><code>[lint.flake8-tidy-imports]
ban-relative-imports = &quot;parents&quot;
</code></pre>
<p>These seem optional as <code>&quot;parents&quot;</code> is the default value. The setting seems to be recognized:</p>
<pre><code>$ ruff check --show-settings | grep ban_relative_imports
linter.flake8_tidy_imports.ban_relative_imports = &quot;parents&quot;
</code></pre>
<p>Version:</p>
<pre><code>$ ruff --version
ruff 0.6.5
</code></pre>
<p>Thank you for your time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-17 14:10</div>
            <div class="timeline-body"><p>Did you enable the rule, e.g., with <code>extend-select = [&quot;TID252&quot;]</code>? It won&#x27;t run by default, even if that setting is provided.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-17 14:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lgig">@lgig</a> on 2024-09-18 06:58</div>
            <div class="timeline-body"><p>I didn&#x27;t and that was it. I see it&#x27;s also mentioned in the tutorial, but in a hurry I still missed it, my bad. Apologies for the silly question and thank you. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/lgig">@lgig</a> on 2024-09-18 06:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:58 UTC
    </footer>
</body>
</html>
