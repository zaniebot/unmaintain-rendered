<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I001: Auto-fix does not respect global conf `line-length` - astral-sh/ruff #4894</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>I001: Auto-fix does not respect global conf `line-length`</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/4894">#4894</a>
        opened by <a href="https://github.com/pespinel">@pespinel</a>
        on 2023-06-06 07:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/pespinel">@pespinel</a> on 2023-06-06 07:01</div>
            <div class="timeline-body"><p>The I001 auto-fix does not respect the global line-length ruff config.</p>
<p>Example:</p>
<pre><code>from acceptance.app.novum.pageelements.internalwebviewnavigationtopbar import AndroidInternalWebviewNavigationTopBar
from acceptance.app.novum.pageobjects.base.profile.security_and_privacy.change_security_question.\
    change_security_question import BaseChangeSecurityQuestion
</code></pre>
<p>After running ruff with auto-fix:</p>
<pre><code>from acceptance.app.novum.pageelements.internalwebviewnavigationtopbar import AndroidInternalWebviewNavigationTopBar
from acceptance.app.novum.pageobjects.base.profile.security_and_privacy.change_security_question.change_security_question import (
    BaseChangeSecurityQuestion,
)
</code></pre>
<p><code>E501 Line too long (130 &gt; 120 characters)</code></p>
<p>Ruff version: <code> 0.0.270</code></p>
<p>Ruff config:</p>
<pre><code>select = [
    #&quot;A&quot;, # Flake8 builtins
    #&quot;B&quot;, # Flake8 bugbear
    #&quot;D&quot;, # Pydocstyle
    &quot;E&quot;, # Pycodestyle errors
    &quot;F&quot;, # Pyflakes
    &quot;G&quot;, # Flake8 logging-format
    &quot;I&quot;, # Isort
    &quot;N&quot;, # Pep8-naming
    #&quot;Q&quot;, # Flake8-quotes
    #&quot;S&quot;, # Flake8 bandit
    &quot;W&quot;, # Pycodestyle warnings
    &quot;ANN&quot;, # Flake8 annotations
    &quot;ASYNC&quot;, # Flake8 async
    &quot;ARG&quot;, # Flake8 unused-arguments
    #&quot;BLE&quot;, # Flake8 blind-except
    #&quot;COM&quot;, # Flake8 commas
    #&quot;C4&quot;, # Fake8 comprehensions
    &quot;C90&quot;, # McCabe
    #&quot;DTZ&quot;, # Flake8 datetime
    #&quot;EM&quot;, # Flake8 errmsg
    #&quot;EXE&quot;, # Flake8 executable
    #&quot;ERA&quot;, # Eradicate
    &quot;FA&quot;, # Flake8 future-annotations
    #&quot;FBT&quot;, # Flake8 boolean-trap
    &quot;FLY&quot;, # Flake 8 misc lints
    &quot;INP&quot;, # Flake8 implicit-namespace
    &quot;INT&quot;, # Flake8 gettext
    #&quot;ISC&quot;, # Flake8 implicit-str-concat
    &quot;ICN&quot;, # Flake8 import-conventions
    &quot;NPY&quot;, # Numpy
    &quot;PYI&quot;, # Flake8 pyi
    &quot;PIE&quot;, # Flake8 pie
    #&quot;PT&quot;, # Flake8 pytest
    #&quot;PTH&quot;, # Flake8 path-lib
    &quot;PL&quot;, # Pylint
    #&quot;RET&quot;, # Flake8 return
    #&quot;RSE&quot;, # Flake8 raise
    #&quot;RUF&quot;, # Ruff
    #&quot;SLF&quot;, # Flake8 self
    #&quot;SIM&quot;, # Flake8 simmplify
    &quot;TCH&quot;, # Flake8 type-checking
    #&quot;TD&quot;, # Flake8 todos
    &quot;TID&quot;, # Flake8 tidy-imports
    #&quot;TRY&quot;, # Tryceratops
    &quot;T10&quot;, # Flake8 debugger
    &quot;T20&quot;, # Flake8 print
    &quot;TCH&quot;, # Flake8 type-checking
    #&quot;UP&quot;, # Flake8 pyupgrade
    &quot;YTT&quot; # Flake8 2020
]
ignore = [
    &quot;ARG001&quot;, # unused-function-argument
    &quot;ARG002&quot;, # unused-method-argument
    &quot;ARG005&quot;, # unused-lambda-argument
    &quot;FLY002&quot;, # static-join-to-f-string
    &quot;G001&quot;, # logging-format-interpolation
    &quot;PLC1901&quot;, # compare-to-empty-string
    &quot;PLR5501&quot;, # collapsible-else-if
    &quot;PLR2004&quot;, # magic-value-comparison
    &quot;PLW2901&quot;, # redefined-loop-name
]
fixable = [&quot;F&quot;, &quot;I&quot;]
unfixable = []
exclude = [
    &quot;acceptance/resources/users_data&quot;,
    &quot;acceptance/resources/web_driver&quot;,
    &quot;acceptance/resources/web_driver_agent&quot;,
    &quot;build_tools&quot;,
    &quot;docs&quot;,
    &quot;.idea&quot;,
    &quot;.vscode&quot;,
    &quot;.venv&quot;,
    &quot;venv&quot;,
    &quot;_output&quot;,
    &quot;.ruff_cache&quot;
]
line-length = 120
target-version = &quot;py38&quot;
format = &quot;github&quot;

[pylint]
max-branches = 15
max-args = 8

[mccabe]
max-complexity = 15

[flake8-unused-arguments]
ignore-variadic-names = true

[flake8-annotations]
ignore-fully-untyped = true
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "I001 auto-fix does not respect global conf `line-length`" to "I001: Auto-fix does not respect global conf `line-length`" by @pespinel on 2023-06-06 10:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-06 14:27</div>
            <div class="timeline-body"><p>Hmm, I believe it does respect it -- what output are you expecting here? <code>from acceptance.app.novum.pageobjects.base.profile.security_and_privacy.change_security_question.change_security_question</code> alone exceeds the line length, so there's no way to break up that import to adhere to your setting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2023-06-06 14:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pespinel">@pespinel</a> on 2023-06-06 15:09</div>
            <div class="timeline-body"><blockquote>
<p>Hmm, I believe it does respect it -- what output are you expecting here? <code>from acceptance.app.novum.pageobjects.base.profile.security_and_privacy.change_security_question.change_security_question</code> alone exceeds the line length, so there's no way to break up that import to adhere to your setting.</p>
</blockquote>
<p>@charliermarsh Before applying the solution, the import didn't break the <code>Line Too Long</code> rule. Maybe it would be possible to preserve the line break when applying the auto-fix?</p>
<p>Also if I manually fix the E501 issue:</p>
<pre><code>from acceptance.app.novum.pageelements.internalwebviewnavigationtopbar import AndroidInternalWebviewNavigationTopBar
from acceptance.app.novum.pageobjects.base.profile.security_and_privacy.change_security_question. \
    change_security_question import (
        BaseChangeSecurityQuestion,
)
</code></pre>
<p>The I001 appears again: <code>I001 Import block is un-sorted or un-formatted</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-06-06 19:00</div>
            <div class="timeline-body"><p>Ahh, ok, I see what you're saying! Thanks for clarifying.</p>
<p>Candidly, I'm comfortable with our current behavior, and I think it's preferable to enforce the current formatting over changing it to accommodate this style of line-length workaround. isort and Black exhibit the same behavior. If you're already implementing custom formatting for those long imports, then I'd suggest explicitly ignoring the line-length error like:</p>
<pre><code class="language-py">from acceptance.app.novum.pageobjects.base.profile.security_and_privacy.change_security_question.change_security_question (  # noqa: E501
    BaseChangeSecurityQuestion,
)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-06-06 19:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-06-07 03:44</div>
            <div class="timeline-body"><p>I would also suggest to use relative imports at that level of nested packages. This could simplify the import block and IMHO, more readable as well. Another solution could be to expose the symbols using a <code>__init__.py</code> file in a package so that your top level imports are clean (this is my best efforts, I'm not sure how your project is structured):</p>
<pre><code class="language-python">from acceptance.app.novum.pageobjects.base import BaseChangeSecurityQuestion
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../langchain-ai/langchain/pulls/18437.html">langchain-ai/langchain#18437</a> on 2024-03-13 04:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:07 UTC
    </footer>
</body>
</html>
