<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`line-too-long` (`E501`) - conflicts with formatter - astral-sh/ruff #10272</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`line-too-long` (`E501`) - conflicts with formatter</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/10272">#10272</a>
        opened by <a href="https://github.com/DetachHead">@DetachHead</a>
        on 2024-03-07 09:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/DetachHead">@DetachHead</a> on 2024-03-07 09:33</div>
            <div class="timeline-body"><h1>before</h1>
<pre><code class="language-py">def foo():
    &quot;&quot;&quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa aaaaaaa
    &quot;&quot;&quot;
</code></pre>
<h1>after</h1>
<pre><code class="language-py">def foo():
    &quot;&quot;&quot;aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa aaaaaaa&quot;&quot;&quot; # E501: Line too long (91 &gt; 88)
</code></pre>
<p><a href="https://play.ruff.rs/78361064-f9ba-4914-ae6d-cc7c71a1c369">playground</a></p>
<p>related: #6269</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-07 09:47</div>
            <div class="timeline-body"><p>Hy @DetachHead</p>
<p>Thanks for reporting this. This is an interesting one. Putting the closing quotes on the same line as the opening quotes
is desired for consistency but it can have the undesired side effect that it exceeds the line length.</p>
<p>There are other cases where the formatter collapses lines even if that means that it increases the line length. For example, the formatter removes the parentheses from:</p>
<pre><code class="language-python">aaaaaaaaaaaaaaaaaa = (
    bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
)
</code></pre>
<p>It's less of a problem in this case because the input already exceeds the line length. However, this is different from what you report. I'm not sure what the desired behavior should be because it either leads to reduced consistency OR a violation of E501. From a pure formatting standpoint, I would prefer keeping it as is, but it would mean that E501 can be incompatible with the formatter, so it might be worth fixing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @MichaReiser on 2024-03-07 09:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">incompatibility</span> added by @MichaReiser on 2024-03-07 09:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> removed by @MichaReiser on 2024-03-07 09:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/14025.html">astral-sh/ruff#14025</a> on 2024-10-31 20:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vasily-v-ryabov">@vasily-v-ryabov</a> on 2025-04-03 11:11</div>
            <div class="timeline-body"><p>In our project pure <code>ruff format --config .ruff.toml</code> produces 3k+ <code>line-too-long</code> warnings, but explicit use of <code>ruff format --config .ruff.toml --line-length 80</code> produces only 30+ warnings which are easily fixable by hands or ignored by <code># fmt: off</code>. I'm not sure why <code>.ruff.toml</code> option <code>max-line-length = 80</code> is ignored by the Formatter, but at least we have a workaround which is acceptable for us.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-03 11:15</div>
            <div class="timeline-body"><p>The formatter uses the global <code>line-length</code> setting. The <code>max-line-length</code> setting is for when you want to use a different limit between E501 and the formatter</p>
<p>https://docs.astral.sh/ruff/settings/#line-length</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:12 UTC
    </footer>
</body>
</html>
