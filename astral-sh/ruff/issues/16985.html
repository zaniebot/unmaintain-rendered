<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F821 &quot;Undefined name&quot; for Literal values - astral-sh/ruff #16985</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>F821 &quot;Undefined name&quot; for Literal values</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/16985">#16985</a>
        opened by <a href="https://github.com/gavindsouza">@gavindsouza</a>
        on 2025-03-26 17:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gavindsouza">@gavindsouza</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Simplified version of the source code:</p>
<pre><code class="language-python">from typing import Literal

Data = str
Select = Literal
Check = bool

class Guest:
    nickname: Data
    croissant_preference: Select[&quot;Croissant&quot;, &quot;Pain au chocolat&quot;, &quot;Pain aux raisins&quot;]
    likes_snacks: Check
</code></pre>
<p>Output of <code>ruff check</code></p>
<pre><code class="language-bash">% ruff check backoffice/__init__.py                                                                                                                       25-03-26 - 18:42:28
backoffice/__init__.py:13:35: F821 Undefined name `Croissant`
   |
11 | class Guest:
12 |     nickname: Data
13 |     croissant_preference: Select[&quot;Croissant&quot;, &quot;Pain au chocolat&quot;, &quot;Pain aux raisins&quot;]
   |                                   ^^^^^^^^^ F821
14 |     likes_snacks: Check
   |

backoffice/__init__.py:13:47: F722 Syntax error in forward annotation: Unexpected token at the end of an expression
   |
11 | class Guest:
12 |     nickname: Data
13 |     croissant_preference: Select[&quot;Croissant&quot;, &quot;Pain au chocolat&quot;, &quot;Pain aux raisins&quot;]
   |                                               ^^^^^^^^^^^^^^^^^^ F722
14 |     likes_snacks: Check
   |

backoffice/__init__.py:13:67: F722 Syntax error in forward annotation: Unexpected token at the end of an expression
   |
11 | class Guest:
12 |     nickname: Data
13 |     croissant_preference: Select[&quot;Croissant&quot;, &quot;Pain au chocolat&quot;, &quot;Pain aux raisins&quot;]
   |                                                                   ^^^^^^^^^^^^^^^^^^ F722
14 |     likes_snacks: Check
   |

Found 3 errors.
</code></pre>
<h3>Version</h3>
<p>0.11.2, also latest main</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-03-26 18:08</div>
            <div class="timeline-body"><p>This seems to be a duplicate of #11378.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-03-26 18:26</div>
            <div class="timeline-body"><p>Thanks, I think it is a duplicate. Replacing <code>Select</code> with <code>Literal</code> directly suppresses the diagnostics, so the issue is related to aliasing again. As the other issue is labeled, this will require better type inference to detect this kind of aliasing robustly.</p>
<p>https://play.ruff.rs/903e0a21-6e61-4210-8469-0520206ebc96</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-03-26 18:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:52:28 UTC
    </footer>
</body>
</html>
