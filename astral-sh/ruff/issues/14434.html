<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCH001 like rule for pre 3.12 generics like TypVar, ParamSpec and the likes - astral-sh/ruff #14434</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>TCH001 like rule for pre 3.12 generics like TypVar, ParamSpec and the likes</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14434">#14434</a>
        opened by <a href="https://github.com/bvolkmer">@bvolkmer</a>
        on 2024-11-18 13:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bvolkmer">@bvolkmer</a> on 2024-11-18 13:20</div>
            <div class="timeline-body"><p>It would be nice to have a rule, that checks if a TypeVar, ParamSpec and the likes is defined outside <code>if TYPE_CHECKING</code> eventhough it is not needed. Example:</p>
<pre><code class="language-python">from __future__ import annotations
from typing import TypeVar
_T = TypeVar(&quot;_T&quot;) # Warning here: Move generics TypeVar into a type-checking block

def foobar(arg: _T):
    return arg
</code></pre>
<p>could be:</p>
<pre><code class="language-python">from __future__ import annotations
from typing import TYPE_CHECKING

if TYPE_CHECKING:
    from typing import TypeVar

    _T = TypeVar(&quot;_T&quot;)

def foobar(arg: _T):
    return arg
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Daverball">@Daverball</a> on 2024-11-18 13:51</div>
            <div class="timeline-body"><p>There is a <code>TCH004</code> equivalent rule in the upstream <code>flake8-type-checking</code> plugin (namely <code>TC009</code>). I considered adding a <code>TCH001-003</code> equivalent as well, but I deemed its potential for false positives too high. The<code>TCH004</code> case is a lot more useful, since it will prevent runtime errors and I will definitely port <code>TCH009</code> to ruff.</p>
<p>A more narrow equivalent to <code>TCH001-003</code> just for type-vars might make some sense (although I would only do it for type vars that are marked as private with a <code>_</code> prefix or by virtue of not being included in <code>__all__</code> and then it becomes more questionable how useful this rule is, since you still have to go in with the intent of making that type var private to the module).</p>
<p>Here's a more general discussion about the future of <code>flake8-type-checking</code> within ruff: #13208</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2024-11-19 07:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-11-28 07:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:15 UTC
    </footer>
</body>
</html>
