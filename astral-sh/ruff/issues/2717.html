<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>docs: consider deploying documentation only on tagged releases - astral-sh/ruff #2717</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>docs: consider deploying documentation only on tagged releases</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2717">#2717</a>
        opened by <a href="https://github.com/bastimeyer">@bastimeyer</a>
        on 2023-02-10 16:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bastimeyer">@bastimeyer</a> on 2023-02-10 16:03</div>
            <div class="timeline-body"><p>Hi, I've just migrated one of our projects from flake8 to ruff over the past few days and I've been slowly adding more of the available rules to the project's config since then.</p>
<p>While browsing the docs, I had a look at the <code>PYI</code> rules of the <code>flake8-pyi</code> re-implementation:
https://beta.ruff.rs/docs/rules/#flake8-pyi-pyi</p>
<p>Even though I was using the latest version of ruff, namely <code>0.0.244</code> released on 2023-02-08, adding <code>PYI</code> resulted in an error:</p>
<pre><code>$ GIT_PAGER=cat git diff -U0
diff --git a/pyproject.toml b/pyproject.toml
index 1dbef5be..cc7e4b8b 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -82,0 +83,2 @@ select = [
+  # flake8-pyi
+  &quot;PYI&quot;,

$ ruff --version
ruff 0.0.244

$ ruff .
error: TOML parse error at line 84, column 3
   |
84 |   &quot;PYI&quot;,
   |   ^^^^^
Unknown rule selector `PYI`
</code></pre>
<p>That confused me, so I had a look at the issue tracker and commit log and found that the first one of these rules (#848) was just implemented this morning and it hasn't made it into a new release yet:</p>
<ul>
<li>125615af1209de6c3be226b10b8f55a5eccd5aea</li>
<li>67e58a024aad929447d74898f12a48d1150d8fb8</li>
</ul>
<p>From looking at the <code>docs.yml</code> CI config, new docs builds get deployed on each push to the <code>main</code> branch when the project's <code>README.md</code> gets updated:
https://github.com/charliermarsh/ruff/blame/cda2ff0b180d311a24cf545c0339ba8977437db3/.github/workflows/docs.yaml</p>
<p>I understand that this project is currently moving pretty fast and that there are lots of changes and new releases. However, deploying docs only on tagged releases would avoid confusions like this and would solve inconsistencies between what's documented and what's actually currently available when installing ruff from a tagged release (pre-built wheels, etc). Since you're having your docs organized in the project's readme and considering the development pace, splitting up docs builds between &quot;stable&quot; tags (quoted, because still pre 1.0.0) and the &quot;unstable&quot; main branch is currently probably not needed, and anyone who's looking for the latest stuff can have a look at the readme instead of the published docs.</p>
<p>Thanks for listening.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">release</span> added by @charliermarsh on 2023-02-10 16:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-10 16:48</div>
            <div class="timeline-body"><p>This makes sense! The only downside is that the README and the docs will be out-of-sync, but... I guess that's ok, and unavoidable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-11 03:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:29:17 UTC
    </footer>
</body>
</html>
