<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pre-commit does not pickup black line-length from pyproject.toml - astral-sh/ruff #2899</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>pre-commit does not pickup black line-length from pyproject.toml</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2899">#2899</a>
        opened by <a href="https://github.com/quassy">@quassy</a>
        on 2023-02-14 20:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/quassy">@quassy</a></div>
            <div class="timeline-body"><p>Since #1317 ruff should pick up <code>line-length</code> from the <code>tool.black</code> section of pyproject.toml, but for me it does not:</p>
<ul>
<li><p>A minimal code snippet that reproduces the bug: Any Python file with a line that is longer than 88 characters.</p>
</li>
<li><p>The command you invoked:
Run from the main directory where <code>pyproject.toml</code> is located:</p>
</li>
</ul>
<pre><code>$ black .
All done! ‚ú® üç∞ ‚ú®
15 files left unchanged.

$ ruff . | grep E501
fastapi-backend/models.py:33:89: E501 Line too long (112 &gt; 88 characters)
fastapi-backend/models.py:55:89: E501 Line too long (109 &gt; 88 characters)
fastapi-backend/routers/giveboxes.py:39:89: E501 Line too long (109 &gt; 88 characters)
fastapi-backend/routers/images.py:29:89: E501 Line too long (94 &gt; 88 characters)
fastapi-backend/routers/images.py:58:89: E501 Line too long (91 &gt; 88 characters)
fastapi-backend/routers/user_box_association.py:12:89: E501 Line too long (89 &gt; 88 characters)
fastapi-backend/routers/user_box_association.py:13:89: E501 Line too long (97 &gt; 88 characters)
fastapi-backend/routers/user_box_association.py:14:89: E501 Line too long (90 &gt; 88 characters)
</code></pre>
<ul>
<li>The current Ruff settings (any relevant sections from your <code>pyproject.toml</code>):</li>
</ul>
<pre><code># Python
[tool.black]
line-length = 120
target_version = [&quot;py311&quot;]

[tool.ruff]
# line-length = 120
extend-ignore = [
    &quot;ANN002&quot;, &quot;ANN003&quot;, &quot;ANN101&quot;, &quot;ANN102&quot;, &quot;D103&quot;, &quot;D100&quot;, &quot;D101&quot;,
    &quot;D203&quot;, &quot;D204&quot;, &quot;D213&quot;, &quot;D215&quot;, &quot;D400&quot;, &quot;D404&quot;, &quot;D406&quot;, &quot;D407&quot;, &quot;D408&quot;, &quot;D409&quot;, &quot;D413&quot;,
]  # &quot;E203&quot;, &quot;B001&quot;, &quot;W503&quot;, &quot;R504&quot;
exclude = [&quot;.git&quot;, &quot;__pycache__&quot;, &quot;.mypy_cache&quot;, &quot;.pytest_cache&quot;, &quot;.venv&quot;, &quot;.cache&quot;, &quot;test/&quot;]
extend-select = [&quot;E&quot;, &quot;F&quot;, &quot;ANN&quot;, &quot;S&quot;, &quot;B&quot;, &quot;A&quot;, &quot;RET&quot;, &quot;D&quot;]

[tool.ruff.flake8-annotations]
mypy-init-return = true

[tool.ruff.per-file-ignores]
&quot;tests/test_&quot; = [&quot;D&quot;]
&quot;*/__init__.py&quot; = [&quot;D104&quot;]
</code></pre>
<ul>
<li><p>The current Ruff version (<code>ruff --version</code>): 0.0.245 installed via Homebrew, alternatively 0.0.246 as a pre-commit.com hook.</p>
</li>
<li><p>Similar issues: #1462 #1311</p>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-14 20:42</div>
            <div class="timeline-body"><p>Ahhh sorry -- #1317 is actually about the <code>flake8-to-ruff</code> command-line tool, which we ship separately here: https://pypi.org/project/flake8-to-ruff/.</p>
<p>That tool will <em>generate</em> a <code>pyproject.toml</code> for you, and it&#x27;ll pick up the line-length settings that you&#x27;ve provided to Black, but you still have to repeat them <code>line-length</code>.</p>
<p>So I think this is working as intended, even if it&#x27;s a little inconvenient to duplicate the two.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-14 20:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/quassy">@quassy</a> on 2023-02-14 20:48</div>
            <div class="timeline-body"><p>Thanks! I missed that when reading. Then I&#x27;ll just wait until ruff supports all black formatting to drop the black section one day üòâ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-14 20:53</div>
            <div class="timeline-body"><p>I assume you&#x27;re quassy7 from Twitter -- if so, hi!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:32 UTC
    </footer>
</body>
</html>
