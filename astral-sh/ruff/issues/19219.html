<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`pydoclint`] `DOC501` does not lint on relatively imported names - astral-sh/ruff #19219</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>[`pydoclint`] `DOC501` does not lint on relatively imported names</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/19219">#19219</a>
        opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a>
        on 2025-07-08 21:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2025-07-08 21:38</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I found this while working on #18972, it's the edge case mentioned in #19218. <a href="https://docs.astral.sh/ruff/rules/docstring-missing-exception/#docstring-missing-exception-doc501">docstring-missing-exception (DOC501)</a> does not lint if the name is from a relative import. It does work on absolute imports though.</p>
<p>https://play.ruff.rs/a248e30e-399e-4e58-a6c4-a060d65b82ea</p>
<pre><code class="language-py">from my_module import TruePositiveImport

def true_positive_import():
    &quot;&quot;&quot;True positive.&quot;&quot;&quot;  # DOC501
    raise TruePositiveImport


class TruePositiveDefined:...

def true_positive_defined():
    &quot;&quot;&quot;True positive.&quot;&quot;&quot;  # DOC501
    raise TruePositiveDefined


from . import FalseNegative

def false_negative():
    &quot;&quot;&quot;False negative.&quot;&quot;&quot;  # No error
    raise FalseNegative


def maybe_true_negative():
    &quot;&quot;&quot;Maybe true negative?&quot;&quot;&quot;  # No error
    raise NotDefinedException  # F821 (Undefined name)
</code></pre>
<p>As said in #19218, imports in the function body have to undergo name resolution to figure out if they are <code>NotImplementedError</code>, which is why <code>DOC501</code> doesn't lint on undefined names. I think the issue with relative imports comes from the fact that they don't have an associated top module, so some part of the code is defaulting to skipping that case.</p>
<h3>Version</h3>
<p>playground</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/19224.html">astral-sh/ruff#19224</a> on 2025-07-09 02:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
