<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RUF009 - allow defining other field function - astral-sh/ruff #17426</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>RUF009 - allow defining other field function</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/17426">#17426</a>
        opened by <a href="https://github.com/CarliJoy">@CarliJoy</a>
        on 2025-04-16 11:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/CarliJoy">@CarliJoy</a> on 2025-04-16 11:24</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I am using <a href="https://typed-settings.readthedocs.io">typed-settings</a> a framework allowing to load settings easier.</p>
<p>It  provides an extended alias to <code>attrs.field</code> <a href="https://typed-settings.readthedocs.io/en/latest/apiref.html#typed_settings.option"><code>typed_settings.option</code></a>.</p>
<p>Using <a href="https://docs.astral.sh/ruff/settings/#lint_flake8-bugbear_extend-immutable-calls"><code>extend-immutable-calls</code></a> I can whitelist the complete function but this would prevent finding mutables when defined as <code>ts.option(default=[])</code></p>
<p>Could one extend the syntax for <code>extend-immutable-calls</code> i.e. that I can define <code>typed_settings.option(default=*)</code> and ruff checks the values of <code>default</code> to be immutable?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @ntBre on 2025-04-16 13:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-16 13:30</div>
            <div class="timeline-body"><p>From looking into this a bit, it sounds like two options might be required:</p>
<ul>
<li>a setting to extend the known <code>field</code> functions</li>
<li>a setting to extend the known dataclass kinds</li>
</ul>
<p>The second one is based on my quick skim of the <code>typed-settings</code> docs, which showed that they have aliases for <code>attrs</code> class decorators too.</p>
<p>On the other hand, maybe type inference could resolve the aliases and the rest of the current implementation could work as normal.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @MichaReiser on 2025-04-23 06:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2025-04-23 06:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:55 UTC
    </footer>
</body>
</html>
