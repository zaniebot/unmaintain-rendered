<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>F811: Check TypeVar defaults and stringised type parameters in bases - astral-sh/ruff #5952</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>F811: Check TypeVar defaults and stringised type parameters in bases</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/5952">#5952</a>
        opened by <a href="https://github.com/Gobot1234">@Gobot1234</a>
        on 2023-07-21 16:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Gobot1234">@Gobot1234</a> on 2023-07-21 16:40</div>
            <div class="timeline-body"><p>I have code that looks like</p>
<pre><code class="language-py">from typing import TYPE_CHECKING

if TYPE_CHECKING:
	import some_circular_mod

def bar():
	import some_circular_mod  # F811 Redefinition of unused `some_circular_mod` from line 4
</code></pre>
<p>I don't think an error should be reported in this case and ruff should check if the module is imported in TYPE_CHECKING before emitting the error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-21 16:44</div>
            <div class="timeline-body"><p>Is <code>some_circular_mod</code> being used in type annotations elsewhere?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">waiting-on-author</span> added by @charliermarsh on 2023-07-21 16:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gobot1234">@Gobot1234</a> on 2023-07-21 16:45</div>
            <div class="timeline-body"><p>Yeah, sorry missed that from the example</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-21 16:57</div>
            <div class="timeline-body"><p>Do you mind updating the example to include a usage? For example, this <em>doesn't</em> raise F811, which seems correct:</p>
<pre><code class="language-python">from typing import TYPE_CHECKING

if TYPE_CHECKING:
    import some_circular_mod

def bar():
    import some_circular_mod

def foo():
    x: some_circular_mod.A = 1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gobot1234">@Gobot1234</a> on 2023-07-21 17:08</div>
            <div class="timeline-body"><p>Sorry again, didn't take the time to check,</p>
<pre><code class="language-py">from typing import TYPE_CHECKING
from typing_extensions import TypeVar

if TYPE_CHECKING:
    import some_circular_mod

T = TypeVar(&quot;T&quot;, default=&quot;some_circular_mod.X&quot;)  # problematically not checked


def bar():
    import some_circular_mod

class Foo(Generic[T]): pass
class Bar(Foo[&quot;some_circular_mod.Y&quot;]): pass  # problematically not checked
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-21 17:10</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">waiting-on-author</span> removed by @charliermarsh on 2023-07-21 17:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-07-21 17:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[Feature] F811: Check if import is inside of TYPE_CHECKING block" to "[Feature] F811: Check TypeVar defaults and stringised type parameters in bases" by @Gobot1234 on 2023-07-21 17:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[Feature] F811: Check TypeVar defaults and stringised type parameters in bases" to "F811: Check TypeVar defaults and stringised type parameters in bases" by @Gobot1234 on 2023-07-21 17:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-04-23 15:47</div>
            <div class="timeline-body"><p>I believe this was fixed in 0.1.12.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-04-23 15:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:30:46 UTC
    </footer>
</body>
</html>
