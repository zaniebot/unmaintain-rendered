<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`flake8-builtins (A)` rules that shouldn't apply to stubs - astral-sh/ruff #15293</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>flake8-builtins (A)</code> rules that shouldn't apply to stubs</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/15293">#15293</a>
        opened by <a href="https://github.com/Avasam">@Avasam</a>
        on 2025-01-06 03:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Avasam">@Avasam</a></div>
            <div class="timeline-body"><p>The following I'm pretty sure should be disabled in stubs, as they are out of a stub author's control:</p>
<ul>
<li><a href="https://docs.astral.sh/ruff/rules/builtin-variable-shadowing/#builtin-variable-shadowing-a001">builtin-variable-shadowing (A001)</a> (344 hits in typeshed)
This happens with aliases and other top-level variables. Non-runtime type aliases should be private in the first place. Devs also shouldn't try to import builtins from a module that happens to import said builtin. And finally this rule mostly tries to protect against <em>using</em> the shadowed variable. In a typing-only context, you should mostly be guarded by type tests anyway.</li>
<li><a href="https://docs.astral.sh/ruff/rules/builtin-argument-shadowing/#builtin-argument-shadowing-a002">builtin-argument-shadowing (A002)</a> (2085 hits on typeshed)</li>
<li><a href="https://docs.astral.sh/ruff/rules/builtin-attribute-shadowing/#builtin-attribute-shadowing-a003">builtin-attribute-shadowing (A003)</a></li>
<li><a href="https://docs.astral.sh/ruff/rules/builtin-module-shadowing/#builtin-module-shadowing-a005">builtin-module-shadowing (A005)</a> (done in https://github.com/astral-sh/ruff/pull/15350)</li>
</ul>
<p>As for the rest:</p>
<ul>
<li><a href="https://docs.astral.sh/ruff/rules/builtin-import-shadowing/#builtin-import-shadowing-a004">builtin-import-shadowing (A004)</a> (53 hits in typeshed, nearly all re-exports)
Very similar as <code>A001</code> but can actually be worked around with import aliases and re-export aliases. (which would trigger <code>A001</code> instead)
Could maybe be ignored in stubs if re-exported ? (<code>import print as print</code>, <code>from tensorflow.math import abs as abs</code>, <code>import foo as print; print = print</code> and  <code>import foo as print; __all__= [&quot;print&quot;]</code>)</li>
<li><a href="https://docs.astral.sh/ruff/rules/builtin-lambda-argument-shadowing/#builtin-lambda-argument-shadowing-a006">builtin-lambda-argument-shadowing (A006)</a>
I don't think lambdas apply to type stubs anyway. Probably doesn't need to be ignored.</li>
</ul>
<p>Ruff: 0.8.5</p>
<p>(this report is extracted from https://github.com/astral-sh/ruff/issues/14535#issuecomment-2496160152 and https://github.com/astral-sh/ruff/issues/14535#issuecomment-2561461038 for ease of tracking and discussion)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @dhruvmanila on 2025-01-06 06:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-01-08 12:59</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://docs.astral.sh/ruff/rules/builtin-module-shadowing/#builtin-module-shadowing-a005">builtin-module-shadowing (A005)</a></p>
</blockquote>
<p>This has been tackled in https://github.com/astral-sh/ruff/pull/15350</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:51:55 UTC
    </footer>
</body>
</html>
