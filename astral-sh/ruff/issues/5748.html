<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Should `SomeStrEnum(str, Enum)` require `SLOT000`? - astral-sh/ruff #5748</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Should <code>SomeStrEnum(str, Enum)</code> require <code>SLOT000</code>?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/5748">#5748</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-07-13 19:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-13 19:42</div>
            <div class="timeline-body"><h3>Discussed in https://github.com/astral-sh/ruff/discussions/5747</h3>
<div type='discussions-op-text'>

<p><sup>Originally posted by <strong>jamesbraza</strong> July 13, 2023</sup>
Please see the below file with Python 3.10.10:</p>
<pre><code class="language-python">from enum import Enum

class SomeStrEnum(str, Enum):
    KEY = &quot;value&quot;
</code></pre>
<p>Running <code>ruff==0.0.278</code> on this:</p>
<pre><code class="language-bash">&gt; ruff --isolated --select=&quot;SLOT&quot; a.py
a.py:3:7: SLOT000 Subclasses of `str` should define `__slots__`
Found 1 error.
</code></pre>
<p>Running <code>flake8-slots==0.1.5</code> with <code>flake8==4.0.1</code> on this, there's no error:</p>
<pre><code class="language-bash">&gt; flake8 a.py
</code></pre>
<p>Fwiw, Python 3.11's built-in <a href="https://docs.python.org/3/library/enum.html#enum.StrEnum"><code>enum.StrEnum</code></a> doesn't seem to define <code>__slots__</code>.</p>
<p>I am not sure if there should or should not be <code>SLOT000</code> for this.  Looks like @qdegraaf added <code>SLOT</code> rule in <code>ruff==0.0.273</code>, so notifying him.</p>
<p>I am thinking either:</p>
<ul>
<li>This is a false positive of <code>SLOT000</code></li>
<li>Or should the built-in <code>StrEnum</code> define <code>__slots__</code>? </div></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-07-13 19:42</div>
            <div class="timeline-body"><p>Looks like <code>flake8-slots</code> omits enums: https://github.com/python-formate/flake8-slots/blob/0b1ecb9076c6194f29265b7bfb904d63073bce08/flake8_slots/<strong>init</strong>.py#L102.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-07-13 19:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">accepted</span> added by @charliermarsh on 2023-07-13 19:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-07-13 19:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-07-13 20:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sujuka99">@sujuka99</a> on 2023-08-11 13:45</div>
            <div class="timeline-body"><p>Is this expected?</p>
<pre><code class="language-py">class SuperEnum(Enum):
	...

class CustomStrEnum(str, SuperEnum):  # Results in &quot;SLOT000 Subclasses of `str` should define `__slots__`&quot;
	...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-08-11 13:49</div>
            <div class="timeline-body"><p>Yeah, we don't trace across base classes right now. You'd need to add <code>Enum</code> as a parent class to have it detected properly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sujuka99">@sujuka99</a> on 2023-08-11 13:58</div>
            <div class="timeline-body"><blockquote>
<p>Yeah, we don't trace across base classes right now. You'd need to add <code>Enum</code> as a parent class to have it detected properly.</p>
</blockquote>
<p>Thanks for the quick answer :)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:30:41 UTC
    </footer>
</body>
</html>
