<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W605 isn't being detected in a monorepository with legacy code. - astral-sh/ruff #1950</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>W605 isn't being detected in a monorepository with legacy code.</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/1950">#1950</a>
        opened by <a href="https://github.com/ljesparis">@ljesparis</a>
        on 2023-01-18 08:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ljesparis">@ljesparis</a> on 2023-01-18 08:55</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

- A minimal code snippet that reproduces the bug.
- The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
- The current Ruff settings (any relevant sections from your `pyproject.toml`).
- The current Ruff version (`ruff --version`).
-->

<p>Hello i'm comparing <strong>flake8 output</strong> vs <strong>ruff output</strong> in a monorepository with legacy code.</p>
<h4>Flake8 output</h4>
<pre><code class="language-shell">src/../../../file.py:14:68: W605 invalid escape sequence '\w'
src/../../../file.py:9:39: W605 invalid escape sequence '\{'
src/../../../file.py:9:46: W605 invalid escape sequence '\}'
src/../../../file.py:10:53: W605 invalid escape sequence '\W'
</code></pre>
<h4>Ruff output</h4>
<p>nothing</p>
<h4>A minimal code snippet that reproduces the bug.</h4>
<pre><code class="language-python">def test_function(value: str) -&gt; None:
    re.findall(&quot;\{(.*?)\}&quot;, value)
    re.findall(&quot;({\w*.|{)&quot;, value)
    re.findall(&quot;(.\W*}|})&quot;, value)
</code></pre>
<h4>The command you invoked (e.g., <code>ruff /path/to/file.py --fix</code>), ideally including the <code>--isolated</code> flag.</h4>
<pre><code class="language-shell">ruff \ 
    --ignore E501,F821 \
    --target-version py38 \
    --line-length 120 \
    --respect-gitignore \
    --exclude 'src/*/tests/*','src/*/migrations/','src/**/_dependency_injection/*','__init__.py','models.py','admin.py' \
    src
</code></pre>
<h4>The current Ruff version (<code>ruff --version</code>).</h4>
<pre><code class="language-shell">$ ruff --version                                                                                                                                                                                   !7148
ruff 0.0.224
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-01-18 12:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-18 12:48</div>
            <div class="timeline-body"><p>I actually do see the same thing between tools! Maybe a configuration issue? We don't enable the <code>W</code> rules by default, so you may need <code>--select E,F,W</code> in your command.</p>
<p><img src="https://user-images.githubusercontent.com/1309177/213175472-1bc93a50-e31b-4ec9-829e-3fffcab99960.png" alt="Screen Shot 2023-01-18 at 7 48 03 AM" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2023-01-18 12:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2023-01-18 12:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-18 19:35</div>
            <div class="timeline-body"><p>Tentatively closing, but please let me know if you continue to see this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-18 19:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:07 UTC
    </footer>
</body>
</html>
