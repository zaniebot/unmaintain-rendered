<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>W605 isn't being detected in a monorepository with legacy code. - astral-sh/ruff #1950</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>W605 isn&#x27;t being detected in a monorepository with legacy code.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1950">#1950</a>
        opened by <a href="https://github.com/ljesparis">@ljesparis</a>
        on 2023-01-18 08:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ljesparis">@ljesparis</a></div>
            <div class="timeline-body">

<p>Hello i&#x27;m comparing <strong>flake8 output</strong> vs <strong>ruff output</strong> in a monorepository with legacy code.</p>
Flake8 output
<pre><code>src/../../../file.py:14:68: W605 invalid escape sequence &#x27;\w&#x27;
src/../../../file.py:9:39: W605 invalid escape sequence &#x27;\{&#x27;
src/../../../file.py:9:46: W605 invalid escape sequence &#x27;\}&#x27;
src/../../../file.py:10:53: W605 invalid escape sequence &#x27;\W&#x27;
</code></pre>
Ruff output
<p>nothing</p>
A minimal code snippet that reproduces the bug.
<pre><code>def test_function(value: str) -&gt; None:
    re.findall(&quot;\{(.*?)\}&quot;, value)
    re.findall(&quot;({\w*.|{)&quot;, value)
    re.findall(&quot;(.\W*}|})&quot;, value)
</code></pre>
The command you invoked (e.g., <code>ruff /path/to/file.py --fix</code>), ideally including the <code>--isolated</code> flag.
<pre><code>ruff \ 
    --ignore E501,F821 \
    --target-version py38 \
    --line-length 120 \
    --respect-gitignore \
    --exclude &#x27;src/*/tests/*&#x27;,&#x27;src/*/migrations/&#x27;,&#x27;src/**/_dependency_injection/*&#x27;,&#x27;__init__.py&#x27;,&#x27;models.py&#x27;,&#x27;admin.py&#x27; \
    src
</code></pre>
The current Ruff version (<code>ruff --version</code>).
<pre><code>$ ruff --version                                                                                                                                                                                   !7148
ruff 0.0.224
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-18 12:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-18 12:48</div>
            <div class="timeline-body"><p>I actually do see the same thing between tools! Maybe a configuration issue? We don&#x27;t enable the <code>W</code> rules by default, so you may need <code>--select E,F,W</code> in your command.</p>
<p><img src="https://user-images.githubusercontent.com/1309177/213175472-1bc93a50-e31b-4ec9-829e-3fffcab99960.png" alt="Screen Shot 2023-01-18 at 7 48 03 AM"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-18 12:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-18 12:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-18 19:35</div>
            <div class="timeline-body"><p>Tentatively closing, but please let me know if you continue to see this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-18 19:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:30 UTC
    </footer>
</body>
</html>
