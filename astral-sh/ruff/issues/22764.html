<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>More opinionated multiline string formatting - astral-sh/ruff #22764</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>More opinionated multiline string formatting</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/22764">#22764</a>
        opened by <a href="https://github.com/RazerM">@RazerM</a>
        on 2026-01-20 13:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/RazerM">@RazerM</a></div>
            <div class="timeline-body"><blockquote>
<p>Now that black has stabilized multiline_string_handling I&#x27;d like to see it in ruff, it&#x27;s the one thing keeping me from adopting ruff format in some projects.</p>
<p>To summarise:</p>
<p>ruff allows this:</p>
<pre><code>op.execute(&quot;&quot;&quot;
    CREATE TRIGGER ...
    ...
&quot;&quot;&quot;)
</code></pre>
<p>but changes:</p>
<pre><code>op.execute(dedent(&quot;&quot;&quot;
    CREATE TRIGGER ...
    ...
&quot;&quot;&quot;).strip())
</code></pre>
<p>to</p>
<pre><code>op.execute(
    dedent(&quot;&quot;&quot;
    CREATE TRIGGER ...
    ...
    &quot;&quot;&quot;).strip()
)
</code></pre>
<p>which I can&#x27;t get behind</p>
</blockquote>
<p><em>Originally posted by @RazerM in <a href="https://github.com/astral-sh/ruff/issues/20482#issuecomment-3772967812">#20482</a></em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2026-01-20 14:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">style</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2026-01-20 14:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2026-01-20 14:04</div>
            <div class="timeline-body"><p>Issue where we discussed this preview style before <a href="https://github.com/astral-sh/ruff/issues/8896">astral-sh/ruff#8896</a> and the implementation of the current style <a href="https://github.com/astral-sh/ruff/pull/9243">astral-sh/ruff#9243</a> and later <a href="https://github.com/astral-sh/ruff/pull/9637">astral-sh/ruff#9637</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2026-01-20 15:06</div>
            <div class="timeline-body"><p>Ruff already implements <code>multiline_string_handling</code> but it isn&#x27;t as opinionated about it as black. The main reason for it was to reduce the diff size between the old and the new formatter style. See <a href="https://github.com/astral-sh/ruff/pull/9637">astral-sh/ruff#9637</a></p>
<p>I&#x27;m also not sure that I like Black&#x27;s formatting better:</p>
<pre><code>op.execute(dedent(&quot;&quot;&quot;
    CREATE TRIGGER ...
    ...
&quot;&quot;&quot;).strip())

</code></pre>
<p>gets formatted to (tested on their playground)</p>
<pre><code>op.execute(
    dedent(
        &quot;&quot;&quot;
    CREATE TRIGGER ...
    ...
&quot;&quot;&quot;
    ).strip()
)
</code></pre>
<p>And you can make Ruff do the same formatting by manually inserting a line break after the <code>dedent</code></p>
<pre><code>op.execute(dedent(
    &quot;&quot;&quot;
    CREATE TRIGGER ...
    ...
&quot;&quot;&quot;).strip())
</code></pre>
<p>becomes</p>
<pre><code>op.execute(
    dedent(
        &quot;&quot;&quot;
    CREATE TRIGGER ...
    ...
&quot;&quot;&quot;
    ).strip()
)
</code></pre>
<p>I don&#x27;t see a strong reason here to change anything in Ruff as it gives you the option to have either formatting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;multiline_string_handling in ruff format&quot; to &quot;More opinionated multiline string formatting&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2026-01-20 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2026-01-20 18:57</div>
            <div class="timeline-body"><p>The black playground is out of date, so it still has 2025&#x27;s style (we haven&#x27;t managed to get in contact with the maintainer to update it v.v). The new 2026 style leaves the formatting as Razer observes:</p>
<pre><code>PS ~\Documents\python_projects\black&gt;uvx black -c @&#x27;
op.execute(dedent(&quot;&quot;&quot;
    CREATE TRIGGER ...
    ...
&quot;&quot;&quot;).strip())
&#x27;@
op.execute(dedent(&quot;&quot;&quot;
    CREATE TRIGGER ...
    ...
&quot;&quot;&quot;).strip())
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 20:45:05 UTC
    </footer>
</body>
</html>
