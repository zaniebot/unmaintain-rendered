<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Please implement PIE801 (prefer-simple-return) - astral-sh/ruff #6681</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Please implement PIE801 (prefer-simple-return)</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/6681">#6681</a>
        opened by <a href="https://github.com/nth10sd">@nth10sd</a>
        on 2023-08-18 19:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nth10sd">@nth10sd</a> on 2023-08-18 19:54</div>
            <div class="timeline-body"><p>From <a href="https://github.com/sbdchd/flake8-pie">flake8-pie</a>:</p>
<pre><code>Return boolean expressions directly instead of returning True and False.

# error
def main():
    if foo &gt; 5:
        return True
    return False

# error
def main():
    if foo &gt; 5:
        return True
    else:
        return False

# ok
def main():
    return foo &gt; 5
</code></pre>
<pre><code>$ ruff --version
ruff 0.0.285
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-08-18 20:03</div>
            <div class="timeline-body"><p>Is this the same as https://beta.ruff.rs/docs/rules/needless-bool/?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nth10sd">@nth10sd</a> on 2023-08-18 20:15</div>
            <div class="timeline-body"><p>It's similar.</p>
<p>However, the following testcase is detected as <code>PIE801</code> via <code>flake8-pie</code> but not by <code>ruff</code>:</p>
<pre><code>def f():
    x = &quot;x&quot;
    y = &quot;y&quot;
    if x == &quot;x&quot; and y == &quot;z&quot;:
        return True
    return False
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-08-20 03:21</div>
            <div class="timeline-body"><p>Currently, the <a href="https://beta.ruff.rs/docs/rules/needless-bool/"><code>needless-bool</code></a> works for an <code>if</code> statement <em>only</em>. Here, <code>return False</code> is <em>outside</em> the <code>if</code> statement and so it isn't detected here. If it would be inside an <code>else</code> body, then we would detect it (https://play.ruff.rs/43e800ce-14d3-41f5-9e9e-1d86b4ae5d19). I'm not sure if there's a way to get the next statement without using the entire function body.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-08-20 13:58</div>
            <div class="timeline-body"><p>We do something similar in <code>convert_for_loop_to_any_all</code>, to get the next sibling.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-09-21 00:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-12 02:09</div>
            <div class="timeline-body"><p>These are now picked up by <a href="https://docs.astral.sh/ruff/rules/needless-bool/"><code>needless-bool</code></a> in preview.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-12 02:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:51 UTC
    </footer>
</body>
</html>
