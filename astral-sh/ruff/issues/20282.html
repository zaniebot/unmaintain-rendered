<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`unreliable-callable-check` (B004) should be marked unsafe - astral-sh/ruff #20282</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>unreliable-callable-check</code> (B004) should be marked unsafe</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/20282">#20282</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-09-06 22:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dscorbett">@dscorbett</a></div>
            <div class="timeline-body">Summary
<p>The fix for <a href="https://docs.astral.sh/ruff/rules/unreliable-callable-check/"><code>unreliable-callable-check</code> (B004)</a> should be marked unsafe because the replacement is not exactly equivalent to the original expression. (If they were equivalent, <code>callable</code> wouldnâ€™t have been reintroduced in Python 3.2.) <a href="https://play.ruff.rs/5ff82084-76d5-45ac-a269-dd0ed920e885">Example</a>:</p>
<pre><code>$ cat &gt;b004.py &lt;&lt;&#x27;# EOF&#x27;
import operator
print(hasattr(operator, &quot;__call__&quot;))

class C:
    def __init__(self): self.__call__ = None
print(hasattr(C(), &quot;__call__&quot;))
# EOF

$ python b004.py
True
True

$ ruff --isolated check b004.py --select B004 --fix
Found 2 errors (2 fixed, 0 remaining).

$ python b004.py
False
False
</code></pre>
Version
<p>ruff 0.12.12 (c6516e9b6 2025-09-04)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-08 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/ntBre">@ntBre</a> on 2025-09-12 19:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:24 UTC
    </footer>
</body>
</html>
