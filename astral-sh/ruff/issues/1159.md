```yaml
number: 1159
title: "False positive for “RET504: Unnecessary variable assignment before `return` statement”"
type: issue
state: closed
author: quassy
labels:
  - bug
assignees: []
created_at: 2022-12-09T09:22:01Z
updated_at: 2022-12-09T17:28:10Z
url: https://github.com/astral-sh/ruff/issues/1159
synced_at: 2026-01-10T01:56:44Z
```

# False positive for “RET504: Unnecessary variable assignment before `return` statement”

---

_Issue opened by @quassy on 2022-12-09 09:22_

Code similar to the following will return a false positive for RET504, as the variable assignment here is in fact not unnecessary or optional:
```python
def foobar() -> str:
    result = get_foobar_from_db()
    print(f"Got {len(result)} number of results from db.")
    return result
```

---

_Label `bug` added by @charliermarsh on 2022-12-09 14:43_

---

_Comment by @charliermarsh on 2022-12-09 14:43_

Good catch.

---

_Referenced in [astral-sh/ruff#1163](../../astral-sh/ruff/pulls/1163.md) on 2022-12-09 17:28_

---

_Closed by @charliermarsh on 2022-12-09 17:28_

---
