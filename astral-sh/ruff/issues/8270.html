<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lines-after-imports is not being enforced correctly on 0.1.3 - astral-sh/ruff #8270</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>lines-after-imports is not being enforced correctly on 0.1.3</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8270">#8270</a>
        opened by <a href="https://github.com/qbedard">@qbedard</a>
        on 2023-10-27 06:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/qbedard">@qbedard</a></div>
            <div class="timeline-body"><p>Ruff version: 0.1.3</p>
<p>ruff.toml:</p>
<pre><code class="language-toml">[isort]
lines-after-imports = 2
</code></pre>
<p>Python file:</p>
<pre><code class="language-python">import os
print(os.environ[&quot;SHELL&quot;])
</code></pre>
<p>Expected:</p>
<pre><code class="language-python">import os


print(os.environ[&quot;SHELL&quot;])
</code></pre>
<p>Actual:</p>
<pre><code class="language-python">import os

print(os.environ[&quot;SHELL&quot;])
</code></pre>
<p>In fact, it seems that the lines after the imports remain untouched if there are 1 or 2 lines and are only altered from 0 -&gt; 1 and &gt;2 -&gt; 2.</p>
<p>With <code>lines-after-imports = 1</code>, it should always be 1 line.</p>
<p>With <code>lines-after-imports = 2</code>, it should always be 2 lines.</p>
<p>üôè</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-10-27 07:58</div>
            <div class="timeline-body"><p>Hey, I'm unable to reproduce this locally. Can you tell us how are you running Ruff? Are you using the CLI / VSCode extension / any other editor with ruff-lsp?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @dhruvmanila on 2023-10-27 07:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qbedard">@qbedard</a> on 2023-10-27 15:25</div>
            <div class="timeline-body"><blockquote>
<p>Hey, I'm unable to reproduce this locally. Can you tell us how are you running Ruff? Are you using the CLI / VSCode extension / any other editor with ruff-lsp?</p>
</blockquote>
<p>Via CLI.</p>
<p>I think I've figured it out though. The lines are only adjusted when running <code>ruff --fix</code>, not when running <code>ruff format</code>. That's a little surprising.</p>
<p>First thought, best thought: Shouldn't running <code>ruff format</code> also rope in the isort functionality? I understand the history of how we got here (integrating isort functionality before <code>ruff format</code> was around), but the end of the day, isort is primarily a formatter as well, so it's bit odd that only black functionality is tied to <code>ruff format</code> while isort is relegated to <code>ruff --fix</code>.</p>
<p>Thoughts?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-10-27 15:46</div>
            <div class="timeline-body"><p>We agree that <code>isort</code> is the weird one now and we are considering pulling it out of linting. Whether it will be part of formatting or entirely its own command, we don't know yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qbedard">@qbedard</a> on 2023-10-28 22:54</div>
            <div class="timeline-body"><blockquote>
<p>We agree that <code>isort</code> is the weird one now and we are considering pulling it out of linting. Whether it will be part of formatting or entirely its own command, we don't know yet.</p>
</blockquote>
<p>Cool, cool. I'll close this issue and keep an eye out for changes down the line.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @qbedard on 2023-10-28 22:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:48:47 UTC
    </footer>
</body>
</html>
