<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruff: Lint failed - error: Ruff crashed. - astral-sh/ruff #11527</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ruff: Lint failed - error: Ruff crashed.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11527">#11527</a>
        opened by <a href="https://github.com/david-waterworth">@david-waterworth</a>
        on 2024-05-24 07:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/david-waterworth">@david-waterworth</a> on 2024-05-24 07:04</div>
            <div class="timeline-body"><p>I got this message as a 'pop-up' from vscode</p>
<pre><code>Ruff: Lint failed (
error: Ruff crashed. If you could open an issue at:

    https://github.com/astral-sh/ruff/issues/new?title=%5BPanic%5D

...quoting the executed command, along with the relevant file contents and `pyproject.toml` settings, we'd be very appreciative!

thread 'main' panicked at crates/ruff_linter/src/rules/pycodestyle/rules/invalid_escape_sequence.rs:215:18:
called `Option::unwrap()` on a `None` value
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
)
</code></pre>
<p>I guess it's from the vscode extension (extension v2024.22.0)</p>
<p>My pyproject.toml contains</p>
<pre><code class="language-[tool.ruff]">line-length = 120
select = [
    &quot;E&quot;,  # pycodestyle errors (settings from FastAPI, thanks, @tiangolo!)
    &quot;W&quot;,  # pycodestyle warnings
    &quot;F&quot;,  # pyflakes
    &quot;I&quot;,  # isort
    &quot;C&quot;,  # flake8-comprehensions
    &quot;B&quot;,  # flake8-bugbear
]
ignore = [
    &quot;E501&quot;,  # line too long, handled by black
    &quot;C901&quot;,  # too complex
]
per-file-ignores = { &quot;*.ipynb&quot; = [&quot;E402&quot;, &quot;F704&quot;, &quot;B018&quot;] }

[tool.ruff.isort]
order-by-type = true
relative-imports-order = &quot;closest-to-furthest&quot;
extra-standard-library = [&quot;typing&quot;]
section-order = [&quot;future&quot;, &quot;standard-library&quot;, &quot;third-party&quot;, &quot;first-party&quot;, &quot;local-folder&quot;]
known-first-party = []
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @snowsignal on 2024-05-24 07:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @snowsignal by @snowsignal on 2024-05-24 07:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-05-24 07:20</div>
            <div class="timeline-body"><p>Can you provide the source code on which it crashed? Also, the Ruff version used by the extension? There's just one <code>unwrap</code> in the file which shouldn't really fail.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> removed by @MichaReiser on 2024-05-27 11:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-05-27 11:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> removed by @charliermarsh on 2024-05-28 01:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-info</span> added by @charliermarsh on 2024-05-28 01:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/david-waterworth">@david-waterworth</a> on 2024-05-28 22:32</div>
            <div class="timeline-body"><p>Sorry I have no idea what code it crashed on and I closed vscode shortly after seeing the error, and the pop-up message doesn't say (I think it was from the vscode notification system - the bell icon in the lower rhs of the bottom window border). If it happens again I'll try and figure it out - I've seen it several times but not been able to work out what it means.</p>
<p>I'm using extension version v2024.22.0 which according to the docs ships with <code>ruff==0.4.5</code> (I also have ruff==0.4.6 installed globally via pipx and my project uses the ruff precommit hook (https://github.com/astral-sh/ruff-pre-commit) which is version 0.4.4 - so I'm only assuming it was the version from the extension that was running because the other two shouldn't be running in the background afaik.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-28 22:35</div>
            <div class="timeline-body"><p>All good @david-waterworth. That trace usually means Ruff had a problem with the specific contents of the file, so if you see it again, do you mind sharing them here (if you can)? Otherwise hard for us to resolve.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-17 14:36</div>
            <div class="timeline-body"><p>I'll close this for now as there's nothing actionable for us to do. @david-waterworth let us know if you still run into this and I'm happy to re-open the issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-08-17 14:36</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:33:58 UTC
    </footer>
</body>
</html>
