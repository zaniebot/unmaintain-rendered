<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruff 2025 style guide - astral-sh/ruff #13371</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ruff 2025 style guide</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13371">#13371</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2024-09-16 16:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><p>From <a href="https://github.com/psf/black/blob/main/CHANGES.md">Black's changelog</a>. Last checked 16.09.2024, Last release: v24.8.0.</p>
<p>Goals:</p>
<ul>
<li>Close parity with Black when migrating from Black to Ruff</li>
<li>Fix Ruff specific bugs</li>
<li>Innovate on local formatting (to keep close parity with black)</li>
</ul>
<h2>Preview Styles</h2>
<h3>Black preview styles</h3>
<ul>
<li>[x] <a href="https://github.com/psf/black/pull/4214"><code>remove_redundant_guard_parens</code></a> https://github.com/astral-sh/ruff/pull/13513</li>
<li>[x] <a href="https://github.com/psf/black/pull/4269"><code>parens_for_long_if_clauses_in_case_block</code></a> (related to <code>remove_redundant_guard_parens</code>): See <a href="https://github.com/astral-sh/ruff/pull/10969">#10969</a> https://github.com/astral-sh/ruff/pull/13513</li>
<li>[ ] <a href="https://github.com/psf/black/pull/4146/files"><code>no_normalize_fmt_skip_whitespace</code></a>: Don't normalize leading whitespace before <code>fmt: skip</code> comments.</li>
</ul>
<h3>Black unstable styles</h3>
<ul>
<li>[ ] [<code>hug_parens_with_braces_and_square_brackets</code>]<ul>
<li>https://github.com/astral-sh/ruff/issues/11375</li>
</ul>
</li>
<li>[x]  <a href="https://github.com/astral-sh/ruff/issues/12856">~~<code>wrap_long_dict_values_in_parens</code>~~</a>: We decided not to support this style for now because it introduces new parentheses.</li>
<li>[x] <a href="https://github.com/astral-sh/ruff/issues/8896">~~<code>multiline_string_handling</code>~~</a> non goal. Maybe a simplified version of it that only joins implicitly concatenated strings</li>
</ul>
<h3>Ruff preview styles</h3>
<p>Ruff specific preview styles that we may want to stabilize</p>
<ul>
<li>[x] <a href="https://github.com/astral-sh/ruff/issues/7594"><code>f_string_formatting</code></a> (style improvement)<ul>
<li>[x] https://github.com/astral-sh/ruff/issues/11056</li>
<li>[x] https://github.com/astral-sh/ruff/issues/13237</li>
<li>[x] https://github.com/astral-sh/ruff/issues/13813</li>
<li>[x] https://github.com/astral-sh/ruff/issues/14608</li>
<li>[x] fixes https://github.com/astral-sh/ruff/issues/14766</li>
</ul>
</li>
<li>[x] <a href="https://github.com/astral-sh/ruff/pull/12282"><code>comprehension_leading_expression_comments_same_line</code></a> (bugfix)</li>
<li>[x] <a href="https://github.com/astral-sh/ruff/pull/10276"><code>with_single_item_pre_39_enabled</code></a> (style improvement)</li>
<li>[x] <a href="https://github.com/astral-sh/ruff/pull/13539"><code>f_string_implicit_concatenated_string_literal_quotes</code></a> (bugfix)</li>
</ul>
<h3>Ruff improvements</h3>
<ul>
<li>[x] <a href="https://github.com/astral-sh/ruff/issues/9447">Unnecessary parentheses around return-type annotations</a> https://github.com/astral-sh/ruff/pull/13381</li>
<li>[x] <a href="https://github.com/astral-sh/ruff/issues/9457">Implicit string formatting</a></li>
<li>[x] <a href="https://github.com/astral-sh/ruff/issues/6933">Can omit parentheses layout for patterns</a>: Related to <code>remove_redundant_guard_parens</code> and <code>parens_for_long_if_clauses_in_case_block</code></li>
</ul>
<h2>Open Bugs</h2>
<p>Existing bugs in the ruff formatter for which no preview style exists.</p>
<h3>Require a new style guide</h3>
<p>Bug fixes that change how existing code is formatted and require a</p>
<ul>
<li>[x] <a href="https://github.com/astral-sh/ruff/issues/13358">line length calculation for docstring code block is incorrect when using <code>dynamic</code></a></li>
<li>[ ] <a href="https://github.com/astral-sh/ruff/issues/11254">Handling of blank lines between module docstring and a comment</a> (unclear if it requires a new style guide) @konstin</li>
<li>[ ] <a href="https://github.com/astral-sh/ruff/issues/11820">Parenthesize assignment values that fit into the line length</a></li>
<li>[ ] <a href="https://github.com/astral-sh/ruff/issues/8179">Handle over-long lambda expressions</a> (possibly requires a new style guide)</li>
</ul>
<h3>Bug fixes that don't change existing formatting</h3>
<p>Bug fixes that don't require a new style guide because they don't change existing cod</p>
<ul>
<li>[ ] <a href="https://github.com/astral-sh/ruff/issues/10275">Preserve trailing whitespace in docstring examples</a></li>
<li>[ ] <a href="https://github.com/astral-sh/ruff/issues/11480">Incorrect docstring code block formatting for statement sequences</a></li>
<li>[x] <a href="https://github.com/astral-sh/ruff/issues/13369">Trailing parenthesized function return type comment becomes leading comment</a></li>
<li>[ ] <a href="https://github.com/astral-sh/ruff/issues/9958">Handling of empty lines after <code>;</code></a></li>
<li>[ ] <a href="https://github.com/astral-sh/ruff/issues/11430">Suppressing statement sequences</a></li>
<li>[ ] <a href="https://github.com/astral-sh/ruff/issues/11216">Using <code>fmt:skip</code> to suppress compound statements</a></li>
</ul>
<h2>Black Bug fixes</h2>
<p>Black preview styles that are related to Black-specific bug fixes. Ruff already handles those cases correctly</p>
<ul>
<li><a href="https://github.com/psf/black/pull/4440"><code>pep646_typed_star_arg_type_var_tuple</code></a></li>
<li><a href="https://github.com/psf/black/pull/4095"><code>unify_docstring_detection</code></a>: Format module and single quoted docstrings</li>
<li><a href="https://github.com/psf/black/pull/4164"><code>typed_params_trailing_comma</code></a></li>
<li><a href="https://github.com/psf/black/pull/4154"><code>is_simple_lookup_for_doublestar_expression</code></a></li>
<li><a href="https://github.com/psf/black/pull/4185"><code>docstring_check_for_newline</code></a></li>
<li><a href="https://github.com/psf/black/pull/4440"><code>pep646_typed_star_arg_type_var_tuple</code></a></li>
</ul>
<h3>Needs fixing</h3>
<ul>
<li>[x] https://github.com/astral-sh/ruff/issues/14778</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @MichaReiser on 2024-09-16 16:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">style</span> added by @MichaReiser on 2024-09-16 16:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @MichaReiser by @MichaReiser on 2024-09-16 16:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @MichaReiser on 2024-09-17 10:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @MichaReiser on 2024-09-17 10:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-17 10:44</div>
            <div class="timeline-body"><p>If anyone's interested in picking up one item on this list, let me know :) Happy to help</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-17 12:38</div>
            <div class="timeline-body"><p>One open question is whether we want to support multiple formatter edition (or at least one old edition). It took the community a long time to upgrade to Ruff 0.2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bnkc">@bnkc</a> on 2024-09-18 05:37</div>
            <div class="timeline-body"><p>Hey @MichaReiser I'd be interested in picking up https://github.com/astral-sh/ruff/issues/11216. Let me know if this is alright. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-18 06:02</div>
            <div class="timeline-body"><blockquote>
<p>Hey @MichaReiser I'd be interested in picking up #11216. Let me know if this is alright. Thanks!</p>
</blockquote>
<p>Sure. Feel free to give it a go. I don't know what changes are necessary for it but feel free to comment on that issue with ideas or go ahead with a PR and we can discuss there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-25 16:43</div>
            <div class="timeline-body"><p>@bnkc how is it going with the docstring bug? Do you need help or did you decide not to work on it (which is fine)? I'm asking because I'm considering to look into it myself because it is probably the most &quot;sever&quot; bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-27 08:04</div>
            <div class="timeline-body"><p>@dhruvmanila, do you remember what the open decisions were on the f-string formatting and what the remaining work is for it to be stabilized? Do you know if black implemented a similar formatting style?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-10-01 13:33</div>
            <div class="timeline-body"><blockquote>
<p>@dhruvmanila, do you remember what the open decisions were on the f-string formatting and what the remaining work is for it to be stabilized? Do you know if black implemented a similar formatting style?</p>
</blockquote>
<ul>
<li>https://github.com/astral-sh/ruff/issues/13237</li>
<li>Style decision regarding indentation: https://github.com/astral-sh/ruff/discussions/9785#discussioncomment-8470590</li>
<li>https://github.com/astral-sh/ruff/issues/11056 which depends on https://github.com/astral-sh/ruff/issues/6591</li>
<li>https://github.com/astral-sh/ruff/issues/13813</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-16 14:01</div>
            <div class="timeline-body"><p>Regarding f-string formatting. We should look into whether it plays nicely with https://github.com/astral-sh/ruff/blob/ae9c6a9255294cb5cc884726fcbfbcd441f2f76c/crates/ruff_python_formatter/src/other/arguments.rs#L221</p>
<p>From looking at the <code>is_multiline</code> implementation I get the impression that it is an over-approximation and a string that was a multiline string might collapse (but maybe that's fine?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-10-24 09:50</div>
            <div class="timeline-body"><p>Black's plan is to stabilize all preview styles, but none of the unstable features which aligns with what I outlined in the summary. https://github.com/psf/black/issues/4501</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alechouse97">@alechouse97</a> on 2024-11-25 16:47</div>
            <div class="timeline-body"><p>Are there any plans to incorporate allowing empty new lines after certain code blocks from #9745 ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-11-25 17:22</div>
            <div class="timeline-body"><blockquote>
<p>Are there any plans to incorporate allowing empty new lines after certain code blocks from #9745 ?</p>
</blockquote>
<p>No, allowing empty lines after clause header is not planned for the upcoming style guide</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-01-09 09:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trim21">@trim21</a> on 2025-01-13 15:19</div>
            <div class="timeline-body"><p>I'm late for this issue, can we have a stable output of https://docs.astral.sh/ruff/formatter/black/#call-expressions-with-a-single-multiline-string-argument ?</p>
<p>If it's too late for stable 2025 style, is it possible to be a preview style?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-13 15:25</div>
            <div class="timeline-body"><blockquote>
<p>I'm late for this issue, can we have a stable output of <a href="https://docs.astral.sh/ruff/formatter/black/#call-expressions-with-a-single-multiline-string-argument">docs.astral.sh/ruff/formatter/black#call-expressions-with-a-single-multiline-string-argument</a> ?</p>
<p>If it's too late for stable 2025 style, is it possible to be a preview style?</p>
</blockquote>
<p>I'm not sure I understand what you mean. The feature itself is stable since last year. Please open a new issue if it isn't working for you together with an example.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:51:06 UTC
    </footer>
</body>
</html>
