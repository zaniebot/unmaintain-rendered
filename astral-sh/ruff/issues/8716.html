<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E501: Separate setting/rule for string literals - astral-sh/ruff #8716</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>E501: Separate setting/rule for string literals</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8716">#8716</a>
        opened by <a href="https://github.com/ThiefMaster">@ThiefMaster</a>
        on 2023-11-16 10:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ThiefMaster">@ThiefMaster</a></div>
            <div class="timeline-body"><p>It would be nice if <code>E501</code> had  either a separate rule for string literals or if there was a <code>max-literal-line-length</code> setting to set a (higher/unlimited) length for string literals.</p>
<p>My usecase is database migrations which contain (triple-quoted multiline) string literals with raw SQL, like <a href="https://github.com/indico/indico/blob/9b6dc5e04b1827203320f4ce88eed10389813f92/indico/migrations/versions/20170905_1521_640584a3987e_add_event_roles_to_acls.py#L44">this one</a>. Often these are more readable when you write a statement in one line, rather than wrapping them. For example, when changing many constraints becomes very unreadable if there's not one query per line.</p>
<p>However, at the same time I do NOT want to excessively long lines of Python code in those files. So disabling <code>E501</code> for these files requires me to manually check all the code lines.</p>
<p>Some thoughts on the various options to handle this:</p>
<ul>
<li>New rule: Maybe a bit invasive since it'd mean <code>E501</code> would no longer check string literals, and someone not enabling the new rule would suddenly lose functionality. But also most flexible to enable/disable on a per-file basis.</li>
<li>New string literal line length setting: Straightforward, the same rule would handle everything. But it could not easily be done only for certain files via <code>per-file-ignores</code> (enabling both rules globally, and disabling the new one for files matching a certain pattern)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "E501 string literals" to "E501: Separate setting/rule for string literals" by @ThiefMaster on 2023-11-16 10:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-11-16 16:10</div>
            <div class="timeline-body"><p>I guess my recommendation here is to use a code formatter to enforce line length and turn off this rule.</p>
<p>Happy to hear from more people that want this setting though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @zanieb on 2023-11-16 16:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @zanieb on 2023-11-16 16:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-16 16:13</div>
            <div class="timeline-body"><p>Alternatively, I'd probably suggest just adding a <code># noqa: E501</code> to the end of those multiline strings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @MichaReiser on 2023-11-27 06:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2023-11-27 06:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @MichaReiser on 2023-11-27 06:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">waiting-on-author</span> added by @MichaReiser on 2023-11-27 06:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @MichaReiser on 2023-11-27 06:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @MichaReiser on 2023-11-27 06:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-11-27 06:52</div>
            <div class="timeline-body"><p>@ThiefMaster would any of the above suggestions work for you? You can also disable <code>E501</code> for the entire file or all files in the migration directory.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-28 19:00</div>
            <div class="timeline-body"><p>I'm gonna close for now given inactivity. (The second point could be seen as a use-case for #7696.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-01-28 19:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mdengler">@mdengler</a> on 2024-07-14 20:10</div>
            <div class="timeline-body"><blockquote>
<p>I guess my recommendation here is to use a code formatter to enforce line length and turn off this rule.</p>
<p>Happy to hear from more people that want this setting though.</p>
</blockquote>
<p>I'd like this setting, since I'd like not to have to use a &quot;ignore W505,E501 in linter and use formatter to avoid E501-violations-except-in-literals&quot; approach.  ignore-in-linter-and-enforce-using-formatter works for sufficiently-opinionated projects where the formatter does what the project wants; but non-opinionated purists may reasonably bristle at a linter rule that overrides explicit well-behaved coder intentions like &quot;I want exactly this string literal&quot; and I think a setting like the OP's would be very nice.</p>
<p>There are a number of theoretical and practical use-cases for such a setting:</p>
<ol>
<li>string literals where python- and side-by-side-diff-considerations bend to higher-priority readability ones, like the OP's SQL-string example; and</li>
<li>string/comments for which people may <code>grep</code> (or equivalent); for example, if the user sees an error <code>multi-word command that is long failed; please consider long-solution text instead</code> in a log / warning message, does <code>grep &quot;multi-word command&quot;</code> that finds nothing because <code>ruff format</code> split &quot;multi-word&quot; and &quot;command&quot; over multiple lines in the source file because the string literal exceeded the <code>line-length</code>, the user is frustrated and the coder's nice verbose message is somewhat wasted</li>
</ol>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:49:02 UTC
    </footer>
</body>
</html>
