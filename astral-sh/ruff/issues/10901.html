<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extra parentheses in a simple assignation - astral-sh/ruff #10901</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Extra parentheses in a simple assignation</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10901">#10901</a>
        opened by <a href="https://github.com/enriquesanchezb">@enriquesanchezb</a>
        on 2024-04-12 07:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/enriquesanchezb">@enriquesanchezb</a> on 2024-04-12 07:48</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>Hello folks!</p>
<p>In my company, we are migrating one repo we have to Ruff and I found this weird behaviour in a file. We have something like this:
<code>payload[&quot;identity&quot;][&quot;clientUUID&quot;] = client_uuid</code>
and it changing it to
<code>payload[&quot;identity&quot;][&quot;clientUUID&quot;] = (client_uuid)</code></p>
<p>(Note: the name of the variables are longer)</p>
<p>Anyway, it's a simple variable and I don't think is necesssary</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-info</span> added by @MichaReiser on 2024-04-12 07:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-04-12 07:55</div>
            <div class="timeline-body"><p>Hy. Thanks for reporting this.</p>
<p>We'll need some more information to reproduce the issue. What command are you running (<code>ruff check</code> or <code>ruff format</code>)? what's your Ruff configuration (what rules have you enabled)? Can you share a specific code example where this reformatting happens or at least an example that uses identifier names that have the same length?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/enriquesanchezb">@enriquesanchezb</a> on 2024-04-12 08:36</div>
            <div class="timeline-body"><p>Hi Micha,</p>
<p>thanks for your fast answer. We are using <code>ruff format &lt;path&gt;</code> this is our config:</p>
<pre><code>exclude = [
    &quot;.bzr&quot;,
    &quot;.direnv&quot;,
    &quot;.eggs&quot;,
    &quot;.git&quot;,
    &quot;.git-rewrite&quot;,
    &quot;.hg&quot;,
    &quot;.ipynb_checkpoints&quot;,
    &quot;.mypy_cache&quot;,
    &quot;.nox&quot;,
    &quot;.pants.d&quot;,
    &quot;.pyenv&quot;,
    &quot;.pytest_cache&quot;,
    &quot;.pytype&quot;,
    &quot;.ruff_cache&quot;,
    &quot;.svn&quot;,
    &quot;.tox&quot;,
    &quot;.venv&quot;,
    &quot;.vscode&quot;,
    &quot;__pypackages__&quot;,
    &quot;_build&quot;,
    &quot;buck-out&quot;,
    &quot;build&quot;,
    &quot;dist&quot;,
    &quot;node_modules&quot;,
    &quot;site-packages&quot;,
    &quot;venv&quot;,
    &quot;conftest.py&quot;
]

# Same as Black.
line-length = 88

# Assume Python 3.9
target-version = &quot;py39&quot;

[lint]
# Enable Pyflakes (`F`) and a subset of the pycodestyle (`E`)  codes by default.
select = [&quot;E4&quot;, &quot;E7&quot;, &quot;E9&quot;, &quot;F&quot;]
ignore = [&quot;F401&quot;,&quot;F403&quot;,&quot;F405&quot;,&quot;F811&quot;]

# Allow fix for all enabled rules (when `--fix`) is provided.
fixable = [&quot;ALL&quot;]
unfixable = []

# Allow unused variables when underscore-prefixed.
dummy-variable-rgx = &quot;^(_+|(_+[a-zA-Z0-9_]*[a-zA-Z0-9]+?))$&quot;

[format]
# Like Black, use double quotes for strings.
quote-style = &quot;double&quot;

# Like Black, indent with spaces, rather than tabs.
indent-style = &quot;space&quot;

# Like Black, automatically detect the appropriate line ending.
line-ending = &quot;auto&quot;
</code></pre>
<p>and the variables names are something like this:</p>
<pre><code>payload_data_for_verify[&quot;persona&quot;][&quot;demandSpecificationUID&quot;] = demand_specification_uid
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-04-12 09:34</div>
            <div class="timeline-body"><p>Thanks for the extra information. What Ruff version are you using?</p>
<p>I tried to reproduce (I copied the formatter configuration) this in the <a href="https://play.ruff.rs/3a513818-e0c8-45e2-95f7-80b212e44351">Playground</a> but the value doesn't get parenthesized if the line fits into the configured line length.</p>
<p>However, the value gets parenthesized if the entire assignment exceeds the configured line length because keeping the code in the configured line length is one of the formatter's key objectives</p>
<pre><code class="language-python">payload_data_for_verify[&quot;persona&quot;][&quot;demandSpecificationUID&quot;] = demand_specification_uid

payload_data_for_verify[&quot;persona&quot;][&quot;demandSpecificationUIDDDD&quot;] = (
    demand_specification_uid
)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-08-17 14:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:33:30 UTC
    </footer>
</body>
</html>
