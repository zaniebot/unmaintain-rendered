<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>one-line docstrings and selective line-length fixing - astral-sh/ruff #18932</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>one-line docstrings and selective line-length fixing</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18932">#18932</a>
        opened by <a href="https://github.com/ALPA-Industry-and-Technology">@ALPA-Industry-and-Technology</a>
        on 2025-06-25 05:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ALPA-Industry-and-Technology">@ALPA-Industry-and-Technology</a> on 2025-06-25 05:57</div>
            <div class="timeline-body"><h3>Question</h3>
<p>Hi there,</p>
<p>I'm configuring <code>ruff</code> for a project and encountered two related issues regarding docstring formatting and line-length fixes. I'd appreciate any clarification or guidance on how to address them.</p>
<hr />
<ol>
<li>Docstring formatting: one-line vs multi-line</li>
</ol>
<p>Let's say I have long multi-line docstrings in both classes and methods, like this:</p>
<pre><code>class MyClass:
    &quot;&quot;&quot;This is a very long docstring that explains what this class does in detail. 
    It goes on to span multiple lines because it's too long for a single line.&quot;&quot;&quot;

    def my_method(self):
        &quot;&quot;&quot;This is a very long docstring for the method, describing all the internal logic and usage scenarios, 
        which also causes it to span several lines.&quot;&quot;&quot;
        pass
</code></pre>
<p>When I run ruff, it fixes them correctly:</p>
<pre><code>class MyClass:
    &quot;&quot;&quot;
    This is a very long docstring that explains what this class does in detail.
    It goes on to span multiple lines because it's too long for a single line.
    &quot;&quot;&quot;

    def my_method(self):
        &quot;&quot;&quot;
        This is a very long docstring for the method, describing all the internal logic and usage scenarios,
        which also causes it to span several lines.
        &quot;&quot;&quot;
        pass
</code></pre>
<p>However, when the docstrings are in one-line, like in this example:</p>
<pre><code>class MyClass:
    &quot;&quot;&quot;This is a very long docstring that explains what this class does in detail. It goes on to span multiple lines because it's too long for a single line.&quot;&quot;&quot;

    def my_method(self):
        &quot;&quot;&quot;This is a very long docstring for the method, describing all the internal logic and usage scenarios, which also causes it to span several lines.&quot;&quot;&quot;
        pass
</code></pre>
<p>Ruff currently does not reformat these lines.</p>
<p>Question: Is there a rule or setting I need to enable to enforce this formatting for all docstrings, regardless of their length?</p>
<ol start="2">
<li>Selective line-length fixing</li>
</ol>
<p>I would like ruff to automatically fix lines only if they exceed 88 characters, and leave everything else unchanged.</p>
<p>Question: Is this behavior possible to configure in ruff?</p>
<h3>Version</h3>
<p>ruff 0.11.13</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @ALPA-Industry-and-Technology on 2025-06-25 05:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-25 14:27</div>
            <div class="timeline-body"><p>I don't think the linter or formatter can currently re-wrap long lines. The only fix you're seeing in the first example is <a href="https://docs.astral.sh/ruff/rules/new-line-after-last-paragraph/#new-line-after-last-paragraph-d209">new-line-after-last-paragraph (D209)</a>. There's a related issue about comments in https://github.com/astral-sh/ruff/issues/7414. Does that answer your second question too?</p>
<p>I always re-wrap my docstrings &quot;manually&quot; with the handy M-q or <code>fill-paragraph</code> binding in Emacs, but it would be cool if we could do it automatically.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ALPA-Industry-and-Technology">@ALPA-Industry-and-Technology</a> on 2025-06-30 15:40</div>
            <div class="timeline-body"><p>Thanks for the reply!</p>
<p>Just to clarify - I don't think D209 is doing the reformatting in my case. That rule only enforces that the closing triple quotes in a multi-line docstring appear on their own line, but it doesn’t re-wrap or split long one-liner docstrings into multiple lines.</p>
<p>What I’ve observed is that if the docstring already spans multiple lines, Ruff adjusts the quoting correctly (likely due to D209). But if the same content is written as a one-liner - even if it’s extremely long - Ruff doesn’t touch it at all. So as far as I can tell, Ruff doesn't currently reflow or rewrap long docstrings, regardless of the line length setting.</p>
<p>Sounds like manual formatting is still the way to go for now - or maybe a feature request for future support?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-06-30 17:59</div>
            <div class="timeline-body"><p>No problem, thanks for the report!</p>
<p>Yeah, I think manual formatting is still the way to go currently. I feel like #7414 is close enough in spirit that we may not need a separate issue to track wrapping docstrings, but you could open a separate one, or we can repurpose this issue, if you'd prefer. Or comment on #7414 since I don't think docstrings have been mentioned yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-07-07 12:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:37:50 UTC
    </footer>
</body>
</html>
