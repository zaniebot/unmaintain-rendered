<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bad identification of unused noqa statements (RUF100) - astral-sh/ruff #14320</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Bad identification of unused noqa statements (RUF100)</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/14320">#14320</a>
        opened by <a href="https://github.com/jankatins">@jankatins</a>
        on 2024-11-13 14:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jankatins">@jankatins</a> on 2024-11-13 14:14</div>
            <div class="timeline-body"><p>The following file has two errors, one wrong:</p>
<pre><code class="language-python">&quot;&quot;&quot;Test.&quot;&quot;&quot;

class Whatever:
    &quot;&quot;&quot;A class.&quot;
    def __init__(self, password: str) -&gt; None:
        &quot;&quot;&quot;A class init.&quot;&quot;&quot;
        self.password = password

Whatever(password=&quot;test_password&quot;)
Whatever(password=&quot;test_password&quot;)  # noqa: S106
Whatever(password=&quot;test_password&quot;)  # noqa: S106 Possible hardcoded password
</code></pre>
<pre><code class="language-shell">λ  ruff check --select=ALL utils/__init__.py
utils/__init__.py:9:10: S106 Possible hardcoded password assigned to argument: &quot;password&quot;
   |
 7 |         self.password = password
 8 | 
 9 | Whatever(password=&quot;test_password&quot;)
   |          ^^^^^^^^^^^^^^^^^^^^^^^^ S106
10 | Whatever(password=&quot;test_password&quot;)  # noqa: S106
11 | Whatever(password=&quot;test_password&quot;)  # noqa: S106 Possible hardcoded password
   |

utils/__init__.py:11:37: RUF100 [*] Unused `noqa` directive (unknown: `Possible`)
   |
 9 | Whatever(password=&quot;test_password&quot;)
10 | Whatever(password=&quot;test_password&quot;)  # noqa: S106
11 | Whatever(password=&quot;test_password&quot;)  # noqa: S106 Possible hardcoded password
   |                                     ^^^^^^^^^^^^^^^^^^^^^ RUF100
   |
   = help: Remove unused `noqa` directive

Found 2 errors.
[*] 1 fixable with the `--fix` option.
</code></pre>
<p>The S106 is correct, but the RUF100 tells me that the noqa statement is wrong. And If I fix it via adding <code>--fix</code> to the ruff call, the last line in the file is shortened to</p>
<pre><code class="language-python">Whatever(password=&quot;test_password&quot;)  # noqa: S106 hardcoded password
</code></pre>
<p>and now it's not anymore complained about:</p>
<pre><code class="language-shell"> λ  ruff check --select=ALL utils/__init__.py --fix
utils/__init__.py:9:10: S106 Possible hardcoded password assigned to argument: &quot;password&quot;
   |
 7 |         self.password = password
 8 | 
 9 | Whatever(password=&quot;test_password&quot;)
   |          ^^^^^^^^^^^^^^^^^^^^^^^^ S106
10 | Whatever(password=&quot;test_password&quot;)  # noqa: S106
11 | Whatever(password=&quot;test_password&quot;)  # noqa: S106 hardcoded password
   |

Found 1 error.
</code></pre>
<p>(Note: this also happens with other noqa statements, not only with S106)</p>
<pre><code class="language-shell"> λ  ruff --version
ruff 0.7.3
</code></pre>
<p>(It didn't happen with older ruff versions, we just got a few renovate PRs which errors because of this upgrade)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jankatins">@jankatins</a> on 2024-11-13 14:16</div>
            <div class="timeline-body"><p>Damn, didn't look int he closed section: this is https://github.com/astral-sh/ruff/issues/14228 and already fixed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jankatins on 2024-11-13 14:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:14 UTC
    </footer>
</body>
</html>
