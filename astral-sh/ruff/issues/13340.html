<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Tag Blocks - astral-sh/ruff #13340</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Task Tag Blocks</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13340">#13340</a>
        opened by <a href="https://github.com/scarere">@scarere</a>
        on 2024-09-12 19:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/scarere">@scarere</a></div>
            <div class="timeline-body">

<p>I&#x27;ve really enjoyed using ruff recently. One feature that I like is the option to ignore linting on task tags and the ability to define custom task tags. I noticed recently that task tags are only recognized if they are in a comment, but not a triple quoted comment block. Eg.</p>
<pre><code># TODO: E501 surpressed on this comment when ignore-overlong-task-comments = true

&quot;&quot;&quot;
TODO: E501 not surpressed on this comment even when ignore-overlong-task-comments = true
&quot;&quot;&quot;
</code></pre>
<p>I&#x27;m not sure if this is a bug, or if it is the intended behaviour. Either way I think it is not an uncommon desire to want to write out more detailed TODO notes that span several lines. My typical solution is to put them in triple quoted comment blocks but then as shown above, they will not be detected by ruff.</p>
<p>I proposed two changes:</p>
<ol>
<li>Make ruff recognize task tags that are within triple quoted strings</li>
<li>Specify a way to designate a block of comment lines with a task tag so that the tag itself doesn&#x27;t have to be repeated.</li>
</ol>
<p>Example of what change 2 might look like</p>
<pre><code>&quot;&quot;&quot;
Maybe use indentation
TODOLIST: Add som new feature to module
    - indented item automatically marked as a TODO item. E501 ignored when ignore-overlong-task-comments = true
Unindenting ends the todo list
&quot;&quot;&quot;

# Or maybe use a new special tag
# ruff: start TODO
# Comments in between start and end tags ignore E501 when ignore-overlong-task-comments = true
# ruff: end TODO
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-13 14:02</div>
            <div class="timeline-body"><p>Hi @scarere</p>
<p>This behavior is intentional because multiline docstrings aren&#x27;t considered comments in the Python specification. They&#x27;re strings. Some editors support multiline comments by indenting the next line like this:</p>
<pre><code># TODO: We should make this work on windows
#  The current logic doesn&#x27;t account for windows.
#  more content...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/scarere">@scarere</a> on 2024-09-13 15:09</div>
            <div class="timeline-body"><p>Hi @MichaReiser</p>
<p>That would be a useful workaround, does VS Code have an extension for this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-13 17:17</div>
            <div class="timeline-body"><p>Hmm not sure. I don&#x27;t use VS code but I quickly tried using TODO comments and it seems that VS code doesn&#x27;t use any special syntax highlighting for anything other than the TODO keyword itself. So it should just work?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-13 22:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:57 UTC
    </footer>
</body>
</html>
