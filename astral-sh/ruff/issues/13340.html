<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Tag Blocks - astral-sh/ruff #13340</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Task Tag Blocks</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/13340">#13340</a>
        opened by <a href="https://github.com/scarere">@scarere</a>
        on 2024-09-12 19:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/scarere">@scarere</a> on 2024-09-12 19:24</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* List of keywords you searched for before creating this issue. Write them down here so that others can find this issue more easily and help provide feedback.
  e.g. "RUF001", "unused variable", "Jupyter notebook"
* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>I've really enjoyed using ruff recently. One feature that I like is the option to ignore linting on task tags and the ability to define custom task tags. I noticed recently that task tags are only recognized if they are in a comment, but not a triple quoted comment block. Eg.</p>
<pre><code class="language-python"># TODO: E501 surpressed on this comment when ignore-overlong-task-comments = true

&quot;&quot;&quot;
TODO: E501 not surpressed on this comment even when ignore-overlong-task-comments = true
&quot;&quot;&quot;
</code></pre>
<p>I'm not sure if this is a bug, or if it is the intended behaviour. Either way I think it is not an uncommon desire to want to write out more detailed TODO notes that span several lines. My typical solution is to put them in triple quoted comment blocks but then as shown above, they will not be detected by ruff.</p>
<p>I proposed two changes:</p>
<ol>
<li>Make ruff recognize task tags that are within triple quoted strings</li>
<li>Specify a way to designate a block of comment lines with a task tag so that the tag itself doesn't have to be repeated.</li>
</ol>
<p>Example of what change 2 might look like</p>
<pre><code class="language-python">&quot;&quot;&quot;
Maybe use indentation
TODOLIST: Add som new feature to module
    - indented item automatically marked as a TODO item. E501 ignored when ignore-overlong-task-comments = true
Unindenting ends the todo list
&quot;&quot;&quot;

# Or maybe use a new special tag
# ruff: start TODO
# Comments in between start and end tags ignore E501 when ignore-overlong-task-comments = true
# ruff: end TODO
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-13 14:02</div>
            <div class="timeline-body"><p>Hi @scarere</p>
<p>This behavior is intentional because multiline docstrings aren't considered comments in the Python specification. They're strings. Some editors support multiline comments by indenting the next line like this:</p>
<pre><code class="language-python"># TODO: We should make this work on windows
#  The current logic doesn't account for windows.
#  more content...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/scarere">@scarere</a> on 2024-09-13 15:09</div>
            <div class="timeline-body"><p>Hi @MichaReiser</p>
<p>That would be a useful workaround, does VS Code have an extension for this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-09-13 17:17</div>
            <div class="timeline-body"><p>Hmm not sure. I don't use VS code but I quickly tried using TODO comments and it seems that VS code doesn't use any special syntax highlighting for anything other than the TODO keyword itself. So it should just work?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2024-09-13 22:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:53 UTC
    </footer>
</body>
</html>
