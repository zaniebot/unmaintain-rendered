<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[D214, D405, D417] False positive with arg keyword `attributes` - astral-sh/ruff #16007</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[D214, D405, D417] False positive with arg keyword <code>attributes</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/16007">#16007</a>
        opened by <a href="https://github.com/JP-Ellis">@JP-Ellis</a>
        on 2025-02-07 00:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/JP-Ellis">@JP-Ellis</a></div>
            <div class="timeline-body"><h2>Summary</h2>
<p>If using Google style and putting the argument's description on a new line, then if one argument is <code>attributes</code>, it raises D214 and D405.</p>
<p>I raised a similar issue previously (#8457), and this appears to another related edge case.</p>
<h2>Example</h2>
<details>
<summary><code>ruff.toml</code></summary>

<pre><code class="language-toml">[lint.pydocstyle]
convention = &quot;google&quot;
</code></pre>
</details> 

<pre><code class="language-python">def send(payload: str, attributes: dict[str, Any]) -&gt; None:
    &quot;&quot;&quot;
    Send a message.

    Args:
        payload:
            The message payload.

        attributes:
            Additional attributes to be sent alongside the message.
    &quot;&quot;&quot;
</code></pre>
<pre><code class="language-console">‚ùØ ruff check --config config.toml --select ALL ruff.py 
ruff.py:1:5: D417 Missing argument description in the docstring for `send`: `attributes`
  |
1 | def send(payload: str, attributes: dict[str, Any]) -&gt; None:
  |     ^^^^ D417
2 |     &quot;&quot;&quot;
3 |     Send a message.
  |
ruff.py:9:9: D405 [*] Section name should be properly capitalized (&quot;attributes&quot;)
   |
 7 |             The message payload.
 8 |
 9 |         attributes:
   |         ^^^^^^^^^^ D405
10 |             Additional attributes to be sent alongside the message.
11 |     &quot;&quot;&quot;
   |
   = help: Capitalize &quot;attributes&quot;

ruff.py:9:9: D214 [*] Section is over-indented (&quot;attributes&quot;)
   |
 7 |             The message payload.
 8 |
 9 |         attributes:
   |         ^^^^^^^^^^ D214
10 |             Additional attributes to be sent alongside the message.
11 |     &quot;&quot;&quot;
   |
   = help: Remove over-indentation from &quot;attributes&quot;

Found 6 errors.
</code></pre>
<p><em>Note that I omitted a couple of expected errors (such as an undefined 'Any')</em></p>
<details>
<summary><code>ruff --version</code></summary>

<pre><code>ruff 0.9.3
</code></pre>
</details>

<h2>Related</h2>
<p>This is related (nearly identical) to #8457.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-02-07 04:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">docstring</span> added by @ntBre on 2025-02-07 04:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @ntBre by @ntBre on 2025-02-07 14:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-02-08 16:40</div>
            <div class="timeline-body"><p>I realized I never responded here, but thank you for the report! This looks like a bug, and I have a PR open to address it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-02-11 17:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-02-11 17:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:52:09 UTC
    </footer>
</body>
</html>
