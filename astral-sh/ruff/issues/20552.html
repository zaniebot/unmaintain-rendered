<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halstead complexity metrics - astral-sh/ruff #20552</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Halstead complexity metrics</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/20552">#20552</a>
        opened by <a href="https://github.com/daanmlab">@daanmlab</a>
        on 2025-09-24 14:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/daanmlab">@daanmlab</a> on 2025-09-24 14:22</div>
            <div class="timeline-body"><h3>Background</h3>
<p>Ruff already supports cyclomatic complexity (C90x) and cognitive complexity checks. These are valuable for identifying overly complex control flow, but they do not cover Halstead metrics, which measure program complexity based on operators and operands.</p>
<p>Halstead metrics are widely used in software engineering research and in some industry settings (e.g., as part of the maintainability index). Adding them to Ruff would provide a more complete complexity analysis alongside existing rules.</p>
<h3>Proposal</h3>
<p>Introduce a new rule family for Halstead metrics, tentatively <code>HAL</code>:</p>
<p><code>HAL001:</code> Halstead Volume exceeds configured maximum</p>
<p><code>HAL002:</code> Halstead Effort exceeds configured maximum</p>
<p><code>HAL003:</code> Halstead Difficulty exceeds configured maximum</p>
<h3>Configuration example (pyproject.toml):</h3>
<pre><code>[tool.ruff.lint.halstead]
max_volume = 800
max_effort = 20000
max_difficulty = 50

</code></pre>
<p>Example diagnostic:</p>
<pre><code>HAL001 Function `calculate_metrics` has Halstead Volume 950 &gt; 800
</code></pre>
<h3>Motivation</h3>
<p>Today, Halstead metrics can only be obtained by running <a href="https://pypi.org/project/radon">Radon</a>
or other external tools. Integrating them directly into Ruff would:</p>
<p>Provide developers with a unified linting/complexity workflow</p>
<p>Avoid introducing another dependency</p>
<p>Benefit from Ruffâ€™s speed and parallelism</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-09-24 14:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @ntBre on 2025-09-24 14:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-09-24 16:18</div>
            <div class="timeline-body"><p>Thanks for opening this issue.</p>
<p>I'll merge this into https://github.com/astral-sh/ruff/issues/2418 as it is a request for a new complexity metric and we track in https://github.com/astral-sh/ruff/issues/2418 the design for how we want to support multiple complexity metrics in Ruff</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-09-24 16:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
