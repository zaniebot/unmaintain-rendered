<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for rule aliasing - astral-sh/ruff #2186</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for rule aliasing</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2186">#2186</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-01-26 03:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><p>This is known thing we're working on and have mentioned in a bunch of other issues and PRs.</p>
<p>Apart from tracking the implementation, I want to use this issue to catalog any known aliases:</p>
<ul>
<li><code>PGH002</code> (<code>pygrep-hooks</code>) is an alias of <code>G010</code> (<code>flake8-logging-format</code>)</li>
<li><code>B904</code> is an alias of <code>TRY200</code> (see: #2347)</li>
<li><code>R100</code> (<code>flake8-raise</code>) is an alias of <code>TRY200</code></li>
<li><code>R101</code> (<code>flake8-raise</code>) is an alias of <code>TRY201</code></li>
</ul>
<p>These aren't one-to-one-aliases, but:</p>
<ul>
<li><code>UP031</code> and <code>UP032</code> reimplement <a href="https://github.com/ikamensh/flynt"><code>flynt</code></a></li>
<li><code>RUF100</code> reimplements <a href="https://github.com/asottile/yesqa"><code>yesqa</code></a></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">core</span> added by @charliermarsh on 2023-01-26 03:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 04:27</div>
            <div class="timeline-body"><p>The Pylint rules are mapped to Ruff aliases in #970.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-26 06:54</div>
            <div class="timeline-body"><p>I'd call it &quot;many-to-many mapping between codes and rules&quot; since I think we also want to move away from rules having a primary code and rules needing a code at all (see #1773) and since we also want to support the mapping of one code to multiple rules.</p>
<p>Note that I have already nearly implemented this (other than being recently side-tracked by my CLI refactor #2155). I still want to perform the switch to subcommands (#2190) before tackling this issue, since introducing a new subcommand to list linters would help with tackling this issue :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrugman">@sbrugman</a> on 2023-01-26 13:40</div>
            <div class="timeline-body"><p><code>flake8-use-pathlib</code> (PTH) is an alias for most of <a href="https://github.com/dosisod/refurb/tree/master/refurb/checks/pathlib"><code>refurb</code></a>s pathlib violations</p>
<p>Just adding a thought to the discussion: users may care about <code>ruff</code>'s plugin coverage before making the switch. Developers might also wonder which are still open. If the many-to-many mapping registers aliases (and perhaps also <em>won't implement</em>) this could be computed/documented automatically.</p>
<p>PGH001 no-eval = PLW0123 eval-used
N804 = PLC0202</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 15:00</div>
            <div class="timeline-body"><p>I hadn't really considered a many-to-many mapping -- I'd been assuming one-to-many. Interesting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-13 17:39</div>
            <div class="timeline-body"><p>SIM104 is an alias for UP028.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-05-02 14:00</div>
            <div class="timeline-body"><p>PIE792 would be an alias of UP004 if we implemented it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-09-30 16:10</div>
            <div class="timeline-body"><p>This problem is only growing as we implement more and more and rules and forces us to make decision like: https://github.com/astral-sh/ruff/pull/7506 We really should revisit this and try to make it a higher pri feature to prevent the maintainer burden / tech debt from continuing to grow.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-09-30 16:12</div>
            <div class="timeline-body"><p>There are a ton of aliases in pylint rules: https://github.com/astral-sh/ruff/issues/970</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-30 16:56</div>
            <div class="timeline-body"><p>Yeah the rule system has been a highly important but hard-to-prioritize thing for a while now. Candidly, I don't know that rule aliasing is actually the right solution -- I feel like it addresses a symptom but creates other problems. For example, if a rule is aliased, does it show up twice if you enable it and the alias? If not, which code should it use? When you select a rule via a code that's an alias for that rule, what code shows up when we report diagnostics? Is it the code you selected, or the canonical code, which you didn't? How do <code># noqa</code> identifiers work for aliased rules? Etc.</p>
<p>I want to view the problem holistically. Ideally, I'd like to recategorize all the rules into semantically meaningful categories, and add tooling to aid in migrations from Flake8 to Ruff (and from older to newer Ruff versions).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-09-30 17:06</div>
            <div class="timeline-body"><blockquote>
<p>I feel like it addresses a symptom but creates other problems. For example, if a rule is aliased, does it show up twice if you enable it and the alias?</p>
</blockquote>
<p>I think the more explicit use case here is category rules. If a rule is selected by categories, both aliases/rule codes will appear (they can both indicate the same problem). Flake8 has this problem when multiple plugins are enabled after all so we can copy their display logic. The main difference is that we actually deduplicate the rules on the backend?</p>
<p><code>noqa:</code> presumably noqa would need to block both rule codes? We could add a command that automatically &quot;cannonicalizes&quot; the aliases. Once again, we can look to flake8, copy what they have an migrate to our own better version gradually.</p>
<p>I agree all these problems are pretty good to fix in the long term, but many of have workarounds or solution courtesy flake8's admittingly flawed rule code system. While we are borrowing their rule code system, why not also borrow their way of handling duplicate/overlapping rules too?</p>
<p>My biggest concern currently is that having all these alias written down in the codebase somewhere instead of scattered throughout issues will make it easier to migrate to whatever final system we end up choosing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-09-30 17:12</div>
            <div class="timeline-body"><p>Yeah, that's true, one model for aliases (similar to what you're describing) would be that the user-facing behavior is entirely unchanged from (e.g.) having two separate rules, and instead it's just an abstraction within the codebase to allow exposing a violation under multiple codes, which lets us categorize these internally and ensure that (e.g.) all Pylint rules are added when you enable Pylint.</p>
<p>This would have the nice effect that enabling Pylint gives you all the Pylint rules.</p>
<p>The downside is that we'd still be exposing the same rule multiple times in the docs and elsewhere (so, e.g., would https://github.com/astral-sh/ruff/pull/7506 be solved?), and if you run with <code>ALL</code> or overlapping categories, you'd see the same violation multiple times. Both of these could be sources of confusion (though I'm not commenting here on whether it's the right tradeoff or not).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Skylion007">@Skylion007</a> on 2023-10-01 15:34</div>
            <div class="timeline-body"><p>True, but this tradeoff has to be balanced with the current behavior where enabling the PyLint code does not actually enable all the pylint checks we support.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2023-10-01 16:33</div>
            <div class="timeline-body"><p>It feels like this capability might just be a stop-gap until we recategorize the rules, but it's hard to know when we'll do that. I think I may prefer to focus our efforts on recategorization.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikaelarguedas">@mikaelarguedas</a> on 2024-01-06 22:36</div>
            <div class="timeline-body"><p>A couple other rule aliasing (not duplicated within Ruff but useful to know for displaying to people migrating or for a migration tool)</p>
<p>(flake8-super) SPR100 : UP008
(flake8-bugbear) B035 : RUF011
(flake8-loopy) LPY100 : FURB148
(flake8-tuple) T801 : COM818
(flake8-simplify) SIM203 : E713</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mscheifer">@mscheifer</a> on 2024-05-07 22:05</div>
            <div class="timeline-body"><p>I think B036 is an alias of BLE001.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:46:11 UTC
    </footer>
</body>
</html>
