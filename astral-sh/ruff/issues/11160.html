<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support for py:percent jupyter notebooks - astral-sh/ruff #11160</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support for py:percent jupyter notebooks</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11160">#11160</a>
        opened by <a href="https://github.com/bluss">@bluss</a>
        on 2024-04-26 08:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bluss">@bluss</a></div>
            <div class="timeline-body"><p>Does ruff support py:percent files? py:percent is one of the plain python formats jupytext supports, and it's the one I use for jupyter notebooks in git (not using .ipynb other as an intermediate product in execution/build), and it's also supported by vscode.</p>
<p>Something like</p>
<ul>
<li>automatically using jupyter style rules for py:percent files</li>
<li>Or, identify py:percent files as a separate kind of file and allow setting separate rules for these</li>
<li>Or, allow inline code comment to set jupyter style rules for a source file</li>
<li>The formatter removes extra <code>;</code> but this rule should be suppressed in a notebook</li>
</ul>
<p>About the py:percent format: https://jupytext.readthedocs.io/en/latest/formats-scripts.html</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-04-26 14:44</div>
            <div class="timeline-body"><p>Hey, thanks for opening this issue!</p>
<p>By &quot;py:percent&quot; files, do you mean a regular Python files containing <code>%%</code> comments as a way of creating the cell boundaries? We don't currently support that. I think https://github.com/astral-sh/ruff/issues/8800 is a similar request.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-04-26 14:46</div>
            <div class="timeline-body"><p>I'll merge this with the linked issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2024-04-26 14:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2024-04-26 15:18</div>
            <div class="timeline-body"><p>Ok, fine for me. I found the previous issue but it seemed to be about markdown-framed formats, so was not sure if this would be included.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-04-26 15:45</div>
            <div class="timeline-body"><p>No worries. I updated the issue title to contain all formats supported by Jupytext which will be easier to track :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Norlandz">@Norlandz</a> on 2025-12-13 09:59</div>
            <div class="timeline-body"><p>Was trying to find a way to tell Ruff to stop complaining about the Jupyter magic commands with <code>%</code>. In jupytext py:percent files.
Not sure if this is the right place to ask.</p>
<p>eg something like:</p>
<pre><code># %%

# ruff ignore start
%load_ext autoreload
%autoreload 2
# ruff ignore end

do_this()

# %%
import os
do_that()
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-12-15 09:42</div>
            <div class="timeline-body"><p>Ruff supports parsing those magic commands if they're in a Jupyter notebook but it doesn't recognize the py:percent format in Jupytext. Refer to #8800</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:50:09 UTC
    </footer>
</body>
</html>
