<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consider either reporting or accepting #noqa (without space) - astral-sh/ruff #5177</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Consider either reporting or accepting #noqa (without space)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/5177">#5177</a>
        opened by <a href="https://github.com/mairas">@mairas</a>
        on 2023-06-19 09:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mairas">@mairas</a></div>
            <div class="timeline-body"><p>I just tried to add a <code>noqa</code> comment on my Pydantic validator that doesn't get correctly introspected:</p>
<pre><code>import pydantic


class Device(pydantic.BaseModel):
    serial: int

    @pydantic.validator(&quot;serial&quot;)
    def validate_serial(cls, v: int) -&gt; int:  #noqa: N805
        return v
</code></pre>
<p>But as a typo, didn't add a space between the comment # mark and the <code>noqa</code> pragma. When running <code>ruff check --fix</code>, the <code>noqa</code> got ignored and ruff reported an error. <code>black</code> would fix these errors but it is run after <code>ruff</code> (due to <code>--fix</code>). Needless to say, this resulted in quite a bit of confused debugging. :-)</p>
<p>My first idea would be to implement a new rule that would report such errors. Or alternatively, <code>ruff</code> could accept <code>noqa</code> pragmas even without the preceding whitespace.</p>
<p>Ruff settings:</p>
<pre><code>[tool.ruff] # https://github.com/charliermarsh/ruff
fix = true
ignore = [
  &quot;B904&quot;,
  &quot;B905&quot;,
  &quot;BLE001&quot;,
  &quot;E501&quot;,
  &quot;ERA001&quot;,
  &quot;N802&quot;,
  &quot;N803&quot;,
  &quot;PGH003&quot;,
  &quot;PLR2004&quot;,
  &quot;RET504&quot;,
  &quot;S101&quot;,
  &quot;S104&quot;,
]
ignore-init-module-imports = true
line-length = 88
select = [
  #&quot;A&quot;,
  &quot;B&quot;,
  &quot;BLE&quot;,
  #&quot;C4&quot;,
  #&quot;C90&quot;,
  #&quot;D&quot;,
  #&quot;DTZ&quot;,
  &quot;E&quot;,
  &quot;ERA&quot;,
  &quot;F&quot;,
  &quot;G&quot;,
  &quot;I&quot;,
  &quot;INP&quot;,
  &quot;ISC&quot;,
  &quot;N&quot;,
  &quot;NPY&quot;,
  &quot;PGH&quot;,
  &quot;PIE&quot;,
  &quot;PLC&quot;,
  &quot;PLE&quot;,
  &quot;PLR&quot;,
  #&quot;PLW&quot;,
  &quot;PT&quot;,
  &quot;PTH&quot;,
  &quot;PYI&quot;,
  #&quot;RET&quot;,
  &quot;RSE&quot;,
  &quot;RUF&quot;,
  &quot;S&quot;,
  #&quot;SIM&quot;,
  &quot;T10&quot;,
  &quot;T20&quot;,
  &quot;TID&quot;,
  &quot;UP&quot;,
  &quot;W&quot;,
  &quot;YTT&quot;,
]
target-version = &quot;py310&quot;
unfixable = [&quot;ERA001&quot;, &quot;F841&quot;, &quot;T201&quot;, &quot;T203&quot;]
</code></pre>
<p>Ruff version: 0.0.265</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2023-06-20 20:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-06-20 20:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> removed by @charliermarsh on 2023-06-20 20:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">noqa</span> added by @charliermarsh on 2023-06-20 20:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @charliermarsh on 2023-07-04 19:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-07-04 19:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-07-06 16:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:47:29 UTC
    </footer>
</body>
</html>
