<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unify terminology: error vs. check vs. rule - astral-sh/ruff #1546</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Unify terminology: error vs. check vs. rule</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/1546">#1546</a>
        opened by <a href="https://github.com/not-my-profile">@not-my-profile</a>
        on 2023-01-02 05:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-02 05:59</div>
            <div class="timeline-body"><p>The documentation currently uses all of them switching between them at random. For example in the <code>--help</code>:</p>
<ul>
<li><code>--select</code>: Comma-separated list of <strong>error</strong> codes to enable (or ALL, to enable all <strong>checks</strong>)</li>
<li><code>--exclude</code> List of paths, used to exclude files and/or directories from <strong>checks</strong></li>
<li><code>--explain</code> Explain a <strong>rule</strong></li>
</ul>
<p>The README also contains &quot;lint rule&quot; thrice, &quot;lint check&quot; once, &quot;check code prefix&quot; 7 times and &quot;error code prefix&quot; once.</p>
<p>It would be better to use consistent terminology to avoid confusing the user.</p>
<p>Prior art:</p>
<p>Linter | Term used
--|--
clippy | lint(s)
ESLint | rule(s)
pyflakes | check(s) (but not used often)
pycodestyle | check(s) &amp; error code(s)
pydocstyle | error(s) &amp; error code(s)</p>
<p>Some thoughts:</p>
<ul>
<li>If rules can be both errors or warnings as suggested in <a href="https://www.github.com/charliermarsh/ruff/issues/1256">#1256</a>, then we probably want to discontinue any uses of the term &quot;error code&quot;.</li>
<li>Ruff is a linter so lint(s) might be the most obvious choice semantically, however users are less likely to be familiar with the noun &quot;lint&quot; than with a more common noun like &quot;rule&quot; or &quot;check&quot;.</li>
<li>Some lint(s) perform several checks or enforce several rules. For example TID251 checks both import statements as well as attribute access, T100 checks for several imports, etc. With that in mind &quot;lint(s)&quot; might make the most sense.</li>
<li>While it is not strictly necessary that our UI lingo matches the lingo we use within the codebase, I think for the sake of consistency and seamless onboarding of contributors we should aim for consistent terminology throughout the project (CLI, API, documentation). I do consider the consistency of the user-facing terminology to be most important.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1547.html">astral-sh/ruff#1547</a> on 2023-01-02 07:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-02 17:48</div>
            <div class="timeline-body"><p>Yes, good idea.</p>
<p>My thoughts:</p>
<ul>
<li>For the reasons you describe, I also dislike &quot;error&quot; or &quot;error code&quot;.</li>
<li>We probably need two terms: one for the abstract rule (like &quot;lines are too long&quot;), and one for a rule that has been triggered. For example, we could have &quot;rule&quot; and &quot;violation&quot; (in the code, this is basically <code>CheckKind</code> and <code>Check</code>).</li>
<li>We also need terms for what are currently called &quot;check code&quot; and &quot;check code prefix&quot;.</li>
</ul>
<p>I think my preference is &quot;rule&quot; and &quot;violation&quot; (which could be more specifically broken down into errors and warnings, both of which are kinds of violations).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">core</span> added by @charliermarsh on 2023-01-02 18:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-04 16:03</div>
            <div class="timeline-body"><p>@andersk - Sorry to ping and please feel free to ignore if uninterested but you tend to have good and thoughtful opinions on this kind of stuff. Any preferences on the stabilization of this nomenclature?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-04 20:58</div>
            <div class="timeline-body"><p>When we change this, we should also change the internal convention that &quot;plugin&quot; refers to any function that takes a <code>Checker</code> and adds a rule, where &quot;check&quot; refers to a pure function that returns a <code>Check</code>. It's super confusing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andersk">@andersk</a> on 2023-01-05 05:31</div>
            <div class="timeline-body"><p>Perhaps ‚Äúdiagnostic‚Äù might be less unfamiliar than ‚Äúlint‚Äù and less judgmental than ‚Äúerror‚Äù or ‚Äúviolation‚Äù? Some other possibilities that came to mind are ‚Äúdefect‚Äù and ‚Äúissue‚Äù.</p>
<p>I recently noticed the <a href="https://www.oasis-open.org/committees/sarif/">SARIF specification</a>, which seems to have ‚Äúrules‚Äù and ‚Äúresults‚Äù, but that‚Äôs pretty generic.</p>
<p>I guess the ‚Äúplugin‚Äù terminology was inherited from Flake8, but yeah, it‚Äôs not going to make much sense in the future when Ruff takes over the world to the point where people stop writing Flake8 plugins for us to clone and start contributing directly to Ruff. Usually ‚Äúplugins‚Äù are things that can be separately installed and added at runtime (maybe we‚Äôll have that in the future?).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-05 05:35</div>
            <div class="timeline-body"><p>‚ÄúWhen Ruff takes over the world‚Äù made my day üòÑ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-06 23:41</div>
            <div class="timeline-body"><p>I like your suggestion of rule &amp; violation since these words are commonly understood and the relationship between these concepts is clear: when you violate a rule you have a violation. Fun sidenote: Google claims to have &gt;600k results for &quot;violate a rule&quot; but only 3 results for &quot;violate a lint&quot;.</p>
<p>I don't really see the point of grouping rule implementations by their function signatures into files like <code>checks.rs</code> and <code>plugins.rs</code> ... I think it would make more sense to have one <code>.rs</code> file per rule, which would contain the function implementing the rule (no matter if it takes a Checker or returns a Check) and would also contain the definition of the new violation struct &amp; <code>Violation</code> implementation (see #1685). Especially because the idea is to document the rules as docstrings on the structs, so it would be nice to have everything important for a rule (implementation, struct, struct impl and documentation) in one file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-06 23:50</div>
            <div class="timeline-body"><p>Yeah let's run with &quot;rule&quot; and &quot;violation&quot;, I think.</p>
<p>I don't feel strongly about grouping by signature. I more like that there's some nomenclature that indicates whether the function is pure or mutates the checker. We could even have a <code>_mut</code> suffix or something. It's not a hard requirement for me though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1685.html">astral-sh/ruff#1685</a> on 2023-01-07 00:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-07 06:42</div>
            <div class="timeline-body"><p>We need a better name for the <code>Check</code> struct:</p>
<pre><code class="language-rust">pub struct Check {
    pub kind: CheckKind,
    pub location: Location,
    pub end_location: Location,
    pub fix: Option&lt;Fix&gt;,
    pub parent: Option&lt;Location&gt;,
}
</code></pre>
<p>After #1685 each variant of the <code>CheckKind</code> enum will contain structs implementing the <code>Violation</code> trait, so <code>kind</code> should probably be renamed to <code>violation</code> ...</p>
<p>We notably cannot name <code>Check</code> violation as well since that we want both the now-called Check struct and the new trait to be usable in the same module without having to rename them. I am starting to think <code>Diag</code> (short for diagnostic) would be a good name for the <code>Check</code> struct.</p>
<p>So the idea would be: a Diagnostic consists of a Violation, the context where the violation occured and optionally a suggested Fix.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-07 07:06</div>
            <div class="timeline-body"><p>Haha I guess I might just as well use this issue as a general place to raise terminology issues:</p>
<p>I don't think what we currently call &quot;category&quot; should be called category. IMO pyflakes, pycodestyle, isort, etc. aren't categories ... they are origins (answering the question &quot;where does the lint originate from?&quot;). I think a much better use for the term &quot;category&quot; is <a href="https://github.com/rust-lang/rust-clippy#clippy">what clippy calls categories</a>, namely categories such as all, correctness, suspicious, style, complexity, perf, pedantic or nursery.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 16:29</div>
            <div class="timeline-body"><p>Does <code>CheckKind</code> then become <code>ViolationKind</code>? Or <code>DiagnosticViolation</code>?</p>
<p>E.g.:</p>
<pre><code class="language-rs">pub struct Diagnostic {
    pub violation: DiagnosticViolation,
    pub location: Location,
    pub end_location: Location,
    pub fix: Option&lt;Fix&gt;,
    pub parent: Option&lt;Location&gt;,
}
</code></pre>
<p>Is that right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 16:33</div>
            <div class="timeline-body"><p>(The last struct to consider here is <code>Message</code>, which maybe we just leave as-is for now. )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-07 16:57</div>
            <div class="timeline-body"><blockquote>
<p>Does CheckKind then become ViolationKind? Or DiagnosticViolation?</p>
</blockquote>
<p>I think either would work. I don't think the exact naming of the enum matters much since it should actually only occur very seldomly in code (because the <code>Check::new</code> or <code>Diagnostic::new</code> calls <code>into()</code>).</p>
<p>What's the difference between <code>Message</code> and the current <code>Check</code>? They look very similar.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 17:40</div>
            <div class="timeline-body"><p>They're very similar. They exist because <code>Check</code> is generated in a single-file context. <code>Message</code> then adds the filename to <code>Check</code> (and extracts the source, if the user has that setting enabled).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 20:21</div>
            <div class="timeline-body"><p>@not-my-profile - For now, if you start work on any of the TODOs from #1685, can you file a new issue, and I'll assign you? (Or just comment here if you prefer -- either is fine.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-10 02:11</div>
            <div class="timeline-body"><p>This has been improved enough that I'm gonna go ahead and close out for now (as of https://github.com/charliermarsh/ruff/pull/1760).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-01-10 02:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-10 02:11</div>
            <div class="timeline-body"><p>Thanks to @not-my-profile for the push here and for a bunch of great work on the migration itself.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-10 06:48</div>
            <div class="timeline-body"><p>You're very welcome :) Thank you for being so supportive!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2046.html">astral-sh/ruff#2046</a> on 2023-01-21 01:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:49 UTC
    </footer>
</body>
</html>
