<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formatter does not sort inputs to match isort profile [&quot;I&quot;] - astral-sh/ruff #8612</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Formatter does not sort inputs to match isort profile [&quot;I&quot;]</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8612">#8612</a>
        opened by <a href="https://github.com/mwip">@mwip</a>
        on 2023-11-11 09:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mwip">@mwip</a></div>
            <div class="timeline-body"><p>This could be by design, but I did not find a specific answer to the following question in the issues here. So I thought I&#x27;d ask.</p>
<p>Is there any option to force import sorting in <code>ruff format</code> in below&#x27;s example? I am aware that <code>ruff test.py --fix</code> would solve this, but to me, this seems like an unnecessary second step. (Using a <code>lsp</code> integration this could mean a manual intervention when it could also be used in an on-save-hook, for example.) Am I maybe missing something in the <a href="https://docs.astral.sh/ruff/formatter/#conflicting-lint-rules">conflicting lint rules</a>?</p>
<p>Given the following MWE:</p>
<pre><code># test.py
import os
import sys
from pathlib import Path
import numpy as np
from local_module import something
</code></pre>
<pre><code># pyproject.toml
[tool.ruff]
select = [
    &quot;I&quot;,
]
</code></pre>
<p>we can see <code>ruff</code> will check for sorted inputs:</p>
<pre><code>$ ruff test.py
# test.py:1:1: I001 [*] Import block is un-sorted or un-formatted
# Found 1 error.
# [*] 1 fixable with the `--fix` option.
</code></pre>
<p>Yet,  <code>ruff format</code> will not sort imports <code>isort</code>-style:</p>
<pre><code>$ ruff format test.py
# 1 file left unchanged
</code></pre>
<p>This would be the expected outcome:</p>
<pre><code>import os
import sys
from pathlib import Path

import numpy as np

from local_module import something
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-11 12:34</div>
            <div class="timeline-body"><p>Good question -- we have an open issue to document this better (#8367).</p>
<p>Right now, import sorting is part of the linter (<code>ruff check</code> and <code>ruff check --fix</code>) rather than the formatter <code>ruff format</code>). At present, the formatter doesn&#x27;t do any import <em>sorting</em> -- just formatting. So it won&#x27;t reorder and collapse imports. This is both for historical reasons and because unlike the rest of the formatter, it requires changing the AST and so (possibly) the behavior of your code.</p>
<p>More practically, what this means is that import sorting is performed via <code>ruff check</code> and <code>ruff check --fix</code> rather than <code>ruff format</code>. With the above configuration, <code>ruff check --fix</code> should give you isort-like import sorting, while <code>ruff format</code> will handle general code formatting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-11 12:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-11 12:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-11 12:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-11 12:34</div>
            <div class="timeline-body"><p>(I&#x27;m happy to answer any follow-up questions of course, just ask :))</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mwip">@mwip</a> on 2023-11-11 13:57</div>
            <div class="timeline-body"><p>Thank you for the prompt and helpful reply. This totally makes sense. Excuse me missing the issue and thanks for linking it.</p>
<p>I will just set up my on save hooks to run <code>ruff check --select &quot;I&quot; --fix</code> for the file in addition to a <code>ruff format</code>. Works fine for me. (I have to make use of Emacs&#x27; customizability in some way :wink: ). Maybe this help someone else finding this in the future.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:45 UTC
    </footer>
</body>
</html>
