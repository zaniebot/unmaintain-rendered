<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`redefined-loop-name` warns on tuple unpacking swap - astral-sh/ruff #22218</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>redefined-loop-name</code> warns on tuple unpacking swap</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/22218">#22218</a>
        opened by <a href="https://github.com/injust">@injust</a>
        on 2025-12-27 00:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/injust">@injust</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Using tuple unpacking to swap variables is common, but PLW2901 warns because it's technically overwriting the for-loop variables:</p>
<p>https://play.ruff.rs/1be1a287-f128-4840-816a-21818db565bb</p>
<pre><code class="language-python">from itertools import pairwise

def test(nums: list[int]) -&gt; None:
    for a, b in pairwise(nums):
        if b &gt; a:
            a, b = b, a
        print(a, b)
</code></pre>
<p>Perhaps the rule should be suppressed when variables are being swapped, as long as they were both defined in the same loop.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-29 15:17</div>
            <div class="timeline-body"><p>Thanks for the report! I'm not sure this is worth a general exception to the rule, but I'm open to other opinions.</p>
<p>cc @amyreese</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-12-29 15:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @ntBre on 2025-12-29 15:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amyreese">@amyreese</a> on 2026-01-09 01:17</div>
            <div class="timeline-body"><p>tbh, I can't remember ever seeing loop variables swapped like that, since they'll just be reset on the next iteration. I'd have to see meaningful usage in the wild to think the exception is worth it.</p>
<p>530 existing suppressions of this rule in the wild that do multiple assignment, including false positive hits because regex: https://github.com/search?q=%2F.%2B%2C.%2B%3D.*PLW2901%2F&amp;type=code</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:53:44 UTC
    </footer>
</body>
</html>
