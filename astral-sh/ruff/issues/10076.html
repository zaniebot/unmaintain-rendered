<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Race condition between ruff and isort in VScode - astral-sh/ruff #10076</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Race condition between ruff and isort in VScode</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/10076">#10076</a>
        opened by <a href="https://github.com/jazzlw">@jazzlw</a>
        on 2024-02-21 22:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jazzlw">@jazzlw</a> on 2024-02-21 22:54</div>
            <div class="timeline-body"><p>Not sure if this is the right place for this, sorry if not.</p>
<p>If you have both ruff and isort enabled in vscode, with format_on_save enabled, and then you have blank lines after the imports, it will delete lines of code after the blank lines when it deletes them. The number of code lines deleted depends on the number of blank lines.</p>
<p>Not a big deal, since it goes away once you realize and disable isort, but maybe would be nice to have some kind of heads up or warning or something.</p>
<p>To recreate:</p>
<p>Enable ruff and isort and format on save in VScode.</p>
<p>when you save the following python file:</p>
<pre><code class="language-python">import sys







def test():
    a = 'test'
    return a


def foo(bar):
    return bar + 1
</code></pre>
<p>It becomes the following when formatted by the two (first function deleted):</p>
<pre><code class="language-python">import sys


def foo(bar):
    return bar + 1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-21 23:02</div>
            <div class="timeline-body"><p>Ahh yeah, this one is unfortunate. It's tracked in the VS Code extension repo (https://github.com/astral-sh/ruff-vscode/issues/128), but it's actually a bug in VS Code itself that remains unfixed: https://github.com/microsoft/vscode/issues/174295.</p>
<p>Thanks for filing and sorry for the trouble.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-02-21 23:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-21 23:02</div>
            <div class="timeline-body"><p>(Just merging into the VS Code repo issue.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-02-21 23:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jazzlw">@jazzlw</a> on 2024-02-22 02:13</div>
            <div class="timeline-body"><p>thanks for the quick response!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:52 UTC
    </footer>
</body>
</html>
