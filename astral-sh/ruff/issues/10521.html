<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>adding pystrict3 feature: checking docstrings - astral-sh/ruff #10521</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>adding pystrict3 feature: checking docstrings</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10521">#10521</a>
        opened by <a href="https://github.com/JohannesBuchner">@JohannesBuchner</a>
        on 2024-03-22 08:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/JohannesBuchner">@JohannesBuchner</a> on 2024-03-22 08:52</div>
            <div class="timeline-body"><p>Hi,</p>
<p>I was wondering whether you may be interested in copying into your project some features from the static code analyzer <a href="https://github.com/JohannesBuchner/pystrict3">pystrict3</a>.</p>
<p>In particular, I want to highlight here the feature for <strong>checking docstrings for the documented arguments and returns</strong>:</p>
<p>Consider this example function:</p>
<pre><code>def compute(num1, num2):
    &quot;&quot;&quot;
    Combined two integer numbers.

    Parameters
    ----------
    num1 : int
        First number to add.

    Returns
    -------
    sum: int
        first number plus second number
    int
        first number minus second number
    &quot;&quot;&quot;:
        return num1 + num2, num1 - num2, num1
</code></pre>
<p>Here, it would raise two warnings:</p>
<ol>
<li>parameter num2 is not documented</li>
<li>a triple is returned, but a tuple is documented.</li>
</ol>
<p>numpydoc, rst and google-style are supported.</p>
<p>There is also a gendocstr.py script that can add generated docstrings to a python script.</p>
<p>Checking and fixing docstring parameter docstrings seems to be within the scope of ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by @MichaReiser on 2024-03-22 16:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/153957">@153957</a> on 2024-03-23 10:04</div>
            <div class="timeline-body"><ol>
<li>should already be handled by Rule D417: https://docs.astral.sh/ruff/rules/undocumented-param/</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JohannesBuchner">@JohannesBuchner</a> on 2024-03-23 20:18</div>
            <div class="timeline-body"><p>pystrict3 code supports numpydoc, rst and google-style, while D417 only supports google-style at the moment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JohannesBuchner">@JohannesBuchner</a> on 2024-03-23 20:24</div>
            <div class="timeline-body"><p>re 1, the code for getting the documented parameters in the docstring is in list_documented_parameters
https://github.com/JohannesBuchner/pystrict3/blob/master/pystrict3lib/funcchecker.py#L135
re 2, the code is in the max_documented_returns function just below.</p>
<p>both functions are used by this ast NodeVisitor class: https://github.com/JohannesBuchner/pystrict3/blob/master/pystrict3lib/<strong>init</strong>.py#L203</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:33:15 UTC
    </footer>
</body>
</html>
