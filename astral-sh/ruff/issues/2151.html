<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pydantic model validator triggers N805: First argument of a method should be named `self` - astral-sh/ruff #2151</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>pydantic model validator triggers N805: First argument of a method should be named <code>self</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2151">#2151</a>
        opened by <a href="https://github.com/hofrob">@hofrob</a>
        on 2023-01-25 09:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hofrob">@hofrob</a></div>
            <div class="timeline-body"><p>Sorry to bother you guys with this again (#769), but there may be a regression here (or I'm too stupid  to find out what I'm doing wrong).</p>
<p>Reproduce:</p>
<ul>
<li>create a new project with the current version of ruff (0.0.231 at the time of writing)</li>
<li>create a python file with a pydantic model with a validator</li>
<li>run <code>ruff -n --select N805 n805.py</code></li>
</ul>
<p>Contents of <code>n805.py</code> (which looks exactly like the test case):</p>
<pre><code class="language-python">import pydantic


class TestN805(pydantic.BaseModel):
    first: str
    second: str

    @pydantic.validator(&quot;first&quot;)
    def min_length(cls, value: str) -&gt; str:
        pass
</code></pre>
<p>Result:</p>
<pre><code class="language-bash">n805.py:9:20: N805 First argument of a method should be named `self`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-25 12:18</div>
            <div class="timeline-body"><p>No prob! Can you try adding this to your <code>pyproject.toml</code>?</p>
<pre><code class="language-toml">[tool.ruff.pep8-naming]
# Allow Pydantic's `@validator` decorator to trigger class method treatment.
classmethod-decorators = [&quot;classmethod&quot;, &quot;pydantic.validator&quot;]
</code></pre>
<p>There's an explanation <a href="https://github.com/charliermarsh/ruff#pep8-naming">here</a> in the README.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-25 12:19</div>
            <div class="timeline-body"><p>(This tells Ruff that methods annotated with <code>@pydantic.validator</code> (or <code>from pydantic import validator; @validator</code>) should be considered class methods.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2023-01-25 12:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hofrob">@hofrob</a> on 2023-01-25 12:22</div>
            <div class="timeline-body"><p>Oh, so I have to tell ruff which methods are considered as class methods!</p>
<p>Thanks a lot for the quick reply! And for this insanely useful tool!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @hofrob on 2023-01-25 12:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-25 12:23</div>
            <div class="timeline-body"><p>Awesome, glad it's working for you :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Bobronium">@Bobronium</a> on 2023-02-10 08:19</div>
            <div class="timeline-body"><p>Comming here from https://github.com/PyCQA/pep8-naming/issues/169</p>
<p>Couldn't get it to work with <code>&quot;validator&quot;</code> added to config, but <code>&quot;pydantic.validator&quot;</code>, as suggested here, worked.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/luminoso">@luminoso</a> on 2025-04-07 13:15</div>
            <div class="timeline-body"><p>The updated syntax for ruff and pydantic v2 is:</p>
<pre><code class="language-toml">[tool.ruff.lint.pep8-naming]
# Allow Pydantic's `@validator` decorator to trigger class method treatment.
classmethod-decorators = [&quot;classmethod&quot;, &quot;pydantic.field_validator&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FBosler">@FBosler</a> on 2025-09-10 13:53</div>
            <div class="timeline-body"><p>What about model_validator? it behaves differently for <code>mode=&quot;before&quot;</code> vs <code>mode=&quot;after&quot;</code> one should be a class method, one an instance method. I additionally decorated the ones that are classmethods with the classmethod decorator ... but don't love it</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:46:10 UTC
    </footer>
</body>
</html>
