<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Respect `--output-format` with `--watch` - astral-sh/ruff #19550</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Respect `--output-format` with `--watch`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/19550">#19550</a>
        opened by <a href="https://github.com/sathishvj">@sathishvj</a>
        on 2025-07-25 04:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sathishvj">@sathishvj</a> on 2025-07-25 04:03</div>
            <div class="timeline-body"><h3>Question</h3>
<p>The ruff linter for python in watch mode does not show code details and position of error.</p>
<p>If I run &quot;ruff check .&quot;, if there is a code error, it shows me the code where the issue is.</p>
<p>If I run &quot;ruff check --watch .&quot;, it does not show me code details.</p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @sathishvj on 2025-07-25 04:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2025-07-25 04:12</div>
            <div class="timeline-body"><p>Please give more information on the ruff version you are using (run <code>ruff version</code>), the files/folder you are trying to watch, and the configuration you are using. Testing locally it works fine on ruff 0.12.4 (ee2759b36 2025-07-17) (running <code>uvx ruff check --watch . --isolated</code>), so more details are needed. Info about your operating system may also be useful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sathishvj">@sathishvj</a> on 2025-07-25 04:29</div>
            <div class="timeline-body"><p>ruff 0.12.4
MacOs Sequoia 15.5
BASH_VERSION = 5.2.37(1)-release
I don't have a ruff.toml locally</p>
<p>I installed ruff with homebrew. I also ran it as you did with &quot;uvx ruff&quot;.
The output is still minimal.</p>
<p>The folder I am watching is the current folder with a bunch of python files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2025-07-25 05:30</div>
            <div class="timeline-body"><p>üëç . Sadly I can't test it since I'm on windows, but hopefully someone else with a mac can. Can you send the output of <code>uvx ruff check --watch . --isolated -v</code>, since there might be something useful there?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sathishvj">@sathishvj</a> on 2025-07-25 05:37</div>
            <div class="timeline-body"><p>[11:01:51 AM] Starting linter in watch mode...
[2025-07-25][11:01:51][ruff_workspace::resolver][DEBUG] Included path via <code>include</code>: &quot;<full path>/main.py&quot;
[2025-07-25][11:01:51][ruff::diagnostics][DEBUG] Checking: /<full path>/main.py
<local path>/main.py:344:3: SyntaxError: Expected an expression</p>
<p>There are lots of other files that are listed too, but I believe this would be the relevant logs.</p>
<p>Thank you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2025-07-25 05:58</div>
            <div class="timeline-body"><p>Ah I see, I misunderstood the problem. I assumed it was that the file paths weren't appearing, instead of wanting the full output format.</p>
<p>As far as I'm aware, currently <code>--watch</code> only supports that singular output format, and trying to set other ones with <code>--output-format</code> has no effect.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/19552.html">astral-sh/ruff#19552</a> on 2025-07-25 06:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sathishvj">@sathishvj</a> on 2025-07-25 06:17</div>
            <div class="timeline-body"><p>Oh. My apologies for not being clearer in the original issue message - I shouldn't have wasted your time like that and I shall do better next time. Yet, thank you for your responses.</p>
<p>For others here, my workaround is to use a file watcher like fswatch/watchman/watchexec to watch for file changes and then execute ruff.</p>
<p>To the ruff team, it would be good to have a flag to enable detailed output with code snippet even in --watch mode, like so:</p>
<pre><code>main.py:344:3: SyntaxError: Expected an expression
342 |     app.run(host='0.0.0.0', port=int(os.environ.get('PORT', 8080)), debug=True)
343 |
344 | x-
    |   ^
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sathishvj on 2025-07-25 06:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-25 06:18</div>
            <div class="timeline-body"><p>@ntBre another diagnostic related improvement</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-25 13:25</div>
            <div class="timeline-body"><p>@sathishvj I'll reopen this if it's okay with you. I think it makes sense to support more output formats in <code>watch</code> mode as you said.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @ntBre on 2025-07-25 13:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @ntBre on 2025-07-25 13:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @ntBre on 2025-07-25 13:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "How do i make ruff show more details in watch mode?" to "Respect `--output-format` with `--watch`" by @ntBre on 2025-07-25 13:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-25 13:33</div>
            <div class="timeline-body"><p>I noticed this when looking into https://github.com/astral-sh/ruff/issues/19552 after commenting here, but the <code>--preview</code> flag actually enables full output with <code>--watch</code>. We can still leave this open to allow other output formats, but that might help with your specific use case!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sathishvj">@sathishvj</a> on 2025-07-25 13:55</div>
            <div class="timeline-body"><p>Yes, it does! Thank you. üëç
So, is this a fix needed in the docs? Or planned for a later release?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-07-25 19:53</div>
            <div class="timeline-body"><p>Glad to hear it! Yeah, I guess this was supposed to be stabilized in a release at some point, but I think it would still be nice to respect <code>--output-format</code> instead of just switching the default to <code>full</code>. If this preview behavior isn't document anywhere, that could be nice to add in the meantime.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/19734.html">astral-sh/ruff#19734</a> on 2025-08-04 09:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mathieugouin">@mathieugouin</a> on 2025-10-23 19:26</div>
            <div class="timeline-body"><p>Just saying I would love this to work:</p>
<pre><code>ruff check --output-format concise --watch .
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-23 19:31</div>
            <div class="timeline-body"><p>I think that exact command <em>will</em> (appear to) work, but only because <code>concise</code> is still the default output format üòÑ</p>
<p>In preview the default is now <code>full</code>, so we still need to respect the flag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mathieugouin">@mathieugouin</a> on 2025-10-24 19:45</div>
            <div class="timeline-body"><p>Strange... when I type the command I pasted above, I get the expanded/detailed output.</p>
<pre><code>ruff --version
ruff 0.14.2
</code></pre>
<pre><code>ruff check --output-format concise --watch .

D400 First line should end with a period
  --&gt; Informal\test_gpib_name.py:28:5
   |
27 |   def main():
28 | /     &quot;&quot;&quot;
29 | |     Test data:
30 | |
31 | |     ***
32 | |     ***
33 | |     ***
34 | |     ***
35 | |     ***
36 | |     ***
37 | |     ***
38 | |     ***
39 | |     &quot;&quot;&quot;
   | |_______^
40 |       test_data = {
41 |           &quot;ABC&quot;: &quot;ABC&quot;,
   |
help: Add period
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-10-27 07:43</div>
            <div class="timeline-body"><p>@mathieugouin, are you using <code>preview</code> mode (e.g., in your config?) because I can reproduce your behavior with <code>--preview</code>, and changing the output format isn't possible. This seems at least inconsistent with non-preview behavior and is probably related to showing fixes by default (CC: @ntBre).</p>
<p>I'd be inclined to just support different output formats (at least in preview), or are there reasons why we can't do that for watch mode?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-27 13:09</div>
            <div class="timeline-body"><p>I don't think this is related to showing fixes. I thought there was an even older issue about this, but https://github.com/astral-sh/ruff/issues/19552 is the best I found. Non-preview watch mode uses concise output, and at some point we planned to switch to full output, but it has been in preview for quite a while. Neither stable nor preview currently support <code>--output-format</code>, but I agree that they should!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/21097.html">astral-sh/ruff#21097</a> on 2025-10-27 13:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-10-27 16:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mathieugouin">@mathieugouin</a> on 2025-10-27 18:35</div>
            <div class="timeline-body"><p>@MichaReiser You were right, I had <code>preview = true</code> in my <code>ruff.toml</code> and in fact this automatically &quot;force&quot; the output format to full.  In non-preview, the <code>--watch</code> output format reverts to concise.</p>
<p>Thanks for pointing that!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:55 UTC
    </footer>
</body>
</html>
