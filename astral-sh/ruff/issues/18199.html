<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ruff format does not support ignore despite explicit instructions to do so - astral-sh/ruff #18199</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ruff format does not support ignore despite explicit instructions to do so</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/18199">#18199</a>
        opened by <a href="https://github.com/utdrmac">@utdrmac</a>
        on 2025-05-19 16:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/utdrmac">@utdrmac</a></div>
            <div class="timeline-body">Summary
<pre><code>$ ruff --version
ruff 0.11.10

$ ruff format --check .build/mytool.py
warning: The following rule may cause conflicts when used with the formatter: `COM812`. To avoid unexpected behavior, we recommend disabling this rule, either by removing it from the `select` or `extend-select` configuration, or adding it to the `ignore` configuration.
</code></pre>
<p>The instructions tell me to add COM812 to the &#x27;ignore&#x27; configuration. Sure thing:</p>
<pre><code>$ cat ruff.toml
[lint]
select = [&quot;ALL&quot;]
ignore = [&quot;C901&quot;, &quot;D100&quot;, &quot;D103&quot;, &quot;D203&quot;, &quot;D211&quot;, &quot;D212&quot;]

[format]
quote-style = &quot;double&quot;

$ ruff format --check .build/mytool.py
ruff failed
  Cause: Failed to load configuration `/path/ruff.toml`
  Cause: Failed to parse /path/ruff.toml
  Cause: TOML parse error at line 3, column 1
  |
3 | ignore = [&quot;COM812&quot;]
  | ^^^^^^
unknown field `ignore`, expected one of `exclude`, `preview`, `indent-style`, `quote-style`, `skip-magic-trailing-comma`, `line-ending`, `docstring-code-format`, `docstring-code-line-length`
</code></pre>
<p>Extremely contradictory instructions. Formatter says &quot;do this&quot;, I did it, then formatter complains. I&#x27;m at a loss.</p>
<p>Please either A) update the warning output to provide proper instructions, or B) add ignore support to ruff.toml for <code>[format]</code> section to match instructions. Because I&#x27;m running &#x27;ruff format&#x27; it does not make sense to add to the ignore section of [lint]. If I was running &#x27;ruff check&#x27;, sure, it makes sense (sorta) to add to [lint] section, but I&#x27;m running format option, so naturally, it should be added to the [format] section.</p>
Version
<p>0.11.10</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-19 16:10</div>
            <div class="timeline-body"><p>Oh, you have to add it to the <code>lint.ignore</code> section. But I can see how this is confusing. We can improve the message by using the full option name.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-19 16:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-19 16:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CodeMan62">@CodeMan62</a> on 2025-05-19 19:04</div>
            <div class="timeline-body"><p>will investigate it and create a PR for this</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/CodeMan62">@CodeMan62</a> by <a href="https://github.com/ntBre">@ntBre</a> on 2025-05-19 20:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-20 14:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:57 UTC
    </footer>
</body>
</html>
