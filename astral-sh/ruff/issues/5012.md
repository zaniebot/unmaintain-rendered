```yaml
number: 5012
title: Strange behavior --add-noqa
type: issue
state: closed
author: rSedoy
labels:
  - bug
  - suppression
assignees: []
created_at: 2023-06-11T08:13:55Z
updated_at: 2023-06-12T00:21:25Z
url: https://github.com/astral-sh/ruff/issues/5012
synced_at: 2026-01-10T01:56:47Z
```

# Strange behavior --add-noqa

---

_Issue opened by @rSedoy on 2023-06-11 08:13_

```
cat >> pyproject.toml << EOF
[tool.ruff]
line-length = 80
format = 'grouped'
target-version = 'py311'
select = ['ALL']
EOF

ruff . --add-noqa

cat pyproject.toml
[tool.ruff]  # noqa: B018, D100, F821
line-length = 80  # noqa: F821
format = 'grouped'  # noqa: A001, Q000
target-version = 'py311'  # noqa: Q000, F821
select = ['ALL']  # noqa: Q000

ruff --version
ruff 0.0.272
```

---

_Comment by @dhruvmanila on 2023-06-11 12:25_

Thanks for reporting! I think we missed this in #4496 ;)

---

_Label `bug` added by @dhruvmanila on 2023-06-11 12:25_

---

_Label `noqa` added by @dhruvmanila on 2023-06-11 12:25_

---

_Referenced in [astral-sh/ruff#5013](../../astral-sh/ruff/pulls/5013.md) on 2023-06-11 13:02_

---

_Closed by @charliermarsh on 2023-06-12 00:21_

---
