<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B008: mark builtins.slice() as immutable - astral-sh/ruff #21565</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>B008: mark builtins.slice() as immutable</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/21565">#21565</a>
        opened by <a href="https://github.com/anabelle2001">@anabelle2001</a>
        on 2025-11-21 17:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/anabelle2001">@anabelle2001</a> on 2025-11-21 17:49</div>
            <div class="timeline-body"><h1>Example</h1>
<pre><code class="language-py">def a(b=float(&quot;inf&quot;)): ... # True Negative
def c(d=slice(None)): ... # False Positive, as slice() is immutable
</code></pre>
<p>There is also the semi-related corner case of <code>def e(f: slice = dict()): ...</code>. This is clearly erroneous code, but it is incorrectly flagged as violating B008, despite the docs saying &quot;Parameters with immutable type annotations will be ignored by this rule&quot;. (e.g., <code>def g(h: int = dict()): ...</code>, does not trigger B008)</p>
<p>see also: <a href="https://docs.python.org/3/library/functions.html#slice">docs.python.org &gt; builtins &gt; slice</a></p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-11-21 21:15</div>
            <div class="timeline-body"><p>Thanks! It makes sense to me to update this list to include slice:</p>
<p>https://github.com/astral-sh/ruff/blob/f04a18d8f82afc8d60af053d1b121f32d719b454/crates/ruff_python_stdlib/src/typing.rs#L329</p>
<p>based on the linked docs:</p>
<blockquote>
<p>Slice objects have read-only data attributes start, stop, and step which merely return the argument values (or their default). They have no other explicit functionality</p>
</blockquote>
<p>I think that should also resolve the annotation case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-11-21 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> removed by @ntBre on 2025-11-21 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @ntBre on 2025-11-21 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-12-08 19:00</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:38:45 UTC
    </footer>
</body>
</html>
