<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`D100` should be ignored on test modules (at least with Google convention) - astral-sh/ruff #10645</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`D100` should be ignored on test modules (at least with Google convention)</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/10645">#10645</a>
        opened by <a href="https://github.com/sbrudenell">@sbrudenell</a>
        on 2024-03-28 06:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sbrudenell">@sbrudenell</a> on 2024-03-28 06:40</div>
            <div class="timeline-body"><p>I have:</p>
<pre><code>$ ruff --version
ruff 0.3.4
</code></pre>
<pre><code class="language-toml"># pyproject.toml
[tool.ruff.lint.pydocstyle]
convention = &quot;google&quot;
</code></pre>
<p>(I wasn't certain how to provide this config with <code>--config &lt;something&gt; --isolated</code>)</p>
<pre><code>$ ruff check  --select D100 tests/
tests/fooutil/fooutil_test.py:1:1: D100 Missing docstring in public module
</code></pre>
<p>But <a href="https://google.github.io/styleguide/pyguide.html#3821-test-modules">the Google style guide</a> says for this case:</p>
<blockquote>
<p>Module-level docstrings for test files are not required. They should be included only when there is additional information that can be provided.</p>
</blockquote>
<p>So I think <code>D100</code> shouldn't be generated for test modules by default. I can configure this with <code>per-file-ignores</code>, but perhaps this should be implied by <code>convention = &quot;google&quot;</code>.</p>
<p>I'm not sure what pydocstyle's intended behavior was in this case. <a href="https://pydocstyle.org/en/stable/">The pydocstyle hosted docs site</a> isn't loading for me right now. But pydocstyle is fully deprecated (in favor of ruff) and archived, so perhaps there's no value in replicating their behavior.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @AlexWaygood on 2024-03-28 06:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">docstring</span> added by @AlexWaygood on 2024-03-28 06:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">linter</span> added by @AlexWaygood on 2024-03-28 06:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sbrudenell">@sbrudenell</a> on 2024-03-28 08:01</div>
            <div class="timeline-body"><p>Perhaps <code>D104</code> should be disabled for tests as well. The Google style guide does say that packages should have top-level docstrings, and does <em>not</em> call out that this is <em>not</em> required for <em>test</em> packages, but IMHO I can't imagine the authors intended for boilerplate to be required for packages but not for modules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-28 13:47</div>
            <div class="timeline-body"><p>I like the idea</p>
<p>I think one part that ruff lacks today to implement this is an understanding of what a test-module is, because that depends on your project structure. That's why <code>per-file-ignores</code> is the recommended solution for now.</p>
<p>We have the same problem the other way round where some pytest rules are flagged outside of tests:</p>
<ul>
<li>https://github.com/astral-sh/ruff/issues/7286</li>
<li>https://github.com/astral-sh/ruff/issues/9803</li>
</ul>
<p>and more</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/15158.html">astral-sh/ruff#15158</a> on 2024-12-27 00:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:12 UTC
    </footer>
</body>
</html>
