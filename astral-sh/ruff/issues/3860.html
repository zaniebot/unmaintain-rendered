<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>flake8-pyi: PYI015 false positive on TypeVar assignment - astral-sh/ruff #3860</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>flake8-pyi: PYI015 false positive on TypeVar assignment</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/3860">#3860</a>
        opened by <a href="https://github.com/bluetech">@bluetech</a>
        on 2023-04-03 10:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bluetech">@bluetech</a></div>
            <div class="timeline-body"><p>Given this pyi file:</p>
<pre><code class="language-py">from typing import TypeVar
_T = TypeVar('_T')
</code></pre>
<p>running</p>
<pre><code>ruff --select PYI015 --isolated --no-cache x.pyi
</code></pre>
<p>gives</p>
<pre><code>x.pyi:2:6: PYI015 [*] Only simple default values allowed for assignments
</code></pre>
<p>I think <code>TypeVar</code> assignments should be excluded from this rule as they appear naturally in pyi files.</p>
<p>Possible workaround is <code>_T: TypeVar = TypeVar('_T')</code>, however that's unnecessarily redundant, and pyright doesn't like it.</p>
<p>Similar cases - <code>TypeAlias</code> (already handled), <code>NewType</code>, <code>TypeVarTuple</code>, <code>ParamSpec</code></p>
<p>From a quick test, this doesn't happen on flake8-pyi.</p>
<p>I think I can provide a PR for this.</p>
<p>ruff 0.0.260</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-04-03 15:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:46:57 UTC
    </footer>
</body>
</html>
