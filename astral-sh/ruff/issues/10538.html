<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Split `PIE790` into separate rules for unnecessary `pass` vs `...`; I want to keep `...` in example code - astral-sh/ruff #10538</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Split `PIE790` into separate rules for unnecessary `pass` vs `...`; I want to keep `...` in example code</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10538">#10538</a>
        opened by <a href="https://github.com/Zac-HD">@Zac-HD</a>
        on 2024-03-23 20:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Zac-HD">@Zac-HD</a> on 2024-03-23 20:14</div>
            <div class="timeline-body"><p>The autofix to remove useless <code>pass</code> statements is great, but I currently disable the whole rule because it <em>also</em> catches <code>...</code>.  These constructs are equivalent at execution time, but ellipses do in fact convey something to the reader, and therefore I want to keep them for example code.  Consider e.g.:</p>
<blockquote>
<p>The way to think about the recursive strategy is that you're repeatedly building up a series of strategies as follows:</p>
<pre><code class="language-python">s1 = base
s2 = one_of(s1, extend(s1))
s3 = one_of(s2, extend(s2))
...
</code></pre>
</blockquote>
<p>In other cases, it's useful to show where not-currently-relevant code has been omitted.  Using a comment is sometimes a reasonable substitute, but in already-commented code it's nice to have a distinguished marker which is <em>not</em> an explanatory comment.</p>
<p>I'm aware of a variety of other uses in type-checking etc. which might also motivate splitting out this rule, but haven't looked into them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2024-03-23 21:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-24 20:22</div>
            <div class="timeline-body"><p>Given all the problems we've had with ellipses in type checking contexts it might indeed be sensible to just split these into separate rules ðŸ¤”</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-24 20:23</div>
            <div class="timeline-body"><p>I'm fine with it. We could implement the related Pylint rule (https://pylint.readthedocs.io/en/latest/user_guide/messages/warning/unnecessary-ellipsis.html) and remove ellipses from this rule (although we just added them here, it was originally in preview).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-25 07:32</div>
            <div class="timeline-body"><p>It may also be helpful to think about how we would categorize the two rules in the future. It would be a strong reason to split them if we would categorize them differently.</p>
<p>I'm undecided on the categories but my initial thinking is:</p>
<ul>
<li>ellipsis: <code>restriction</code>. It generally seems fine to use ellipsis because they have a specific meaning (even though it has the same runtime semantics as <code>pass</code>)</li>
<li><code>pass</code>: <code>complexity</code>. The function definition is overly complex and it can be simplified by removing the <code>pass</code> statement without altering its semantics.</li>
</ul>
<p>CC: @AlexWaygood</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-03-25 12:58</div>
            <div class="timeline-body"><p>I think it's reasonable to want to distinguish between <code>...</code> and <code>pass</code> for this rule, since they're conventionally used for different purposes even if they have identical semantics from Python's perspective when they're used as statements. However, while I don't really have a strong opinion here, I think I lean towards making the rule configurable rather than creating a separate rule for <code>...</code>s.</p>
<p>I know pyright treats <code>...</code> differently to <code>pass</code> in the context of function and class bodies. As far as I know, however, that's a pyright-specific thing that's never been formally enshrined in a typing spec of any sort. Mypy does not treat <code>...</code> differently to <code>pass</code> in these contexts, as far as I'm aware, and pyright's choice here has always seemed slightly odd to me. (But I'm not saying we shouldn't support pyright users. We should obviously make it easy for people to use the two tools at the same time; they're both great!)</p>
<p>So I see the motivation for removing <code>...</code> and <code>pass</code> as basically the same. In both cases, the rule is pushing you to simplify the code by removing statements that are, strictly speaking, redundant.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-03-25 13:57</div>
            <div class="timeline-body"><p>@AlexWaygood so what I understand from your description is that you would configure both rules with the same severity? Would the detection of <code>...</code> be enabled by default?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-03-25 13:59</div>
            <div class="timeline-body"><p>Yeah, I would probably have them both in the same category and the same severity, and would probably have them both enabled by default. But as I say, no <em>strong</em> opinion here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-25 14:20</div>
            <div class="timeline-body"><p>Here's the relevant commentary from the Pyright author just for reference https://github.com/astral-sh/ruff/issues/8756</p>
<p>I sort of strongly prefer separate rules over configuration options.</p>
<p>Are all &quot;useless statements&quot; going to go into &quot;complexity&quot;?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-03-25 14:26</div>
            <div class="timeline-body"><blockquote>
<p>Are all &quot;useless statements&quot; going to go into &quot;complexity&quot;?</p>
</blockquote>
<p>I haven't yet decided whether &quot;complexity&quot; will be its own category in my proposal, or just a subcategory (and whatever I propose, we'll obviously discuss it internally before going ahead with anything ðŸ˜„). But to me, it makes sense for all &quot;useless statement&quot; rules to be part of the same category, yeah</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-25 14:27</div>
            <div class="timeline-body"><p>It feels like a bit of a weird home. I'd never turn on the complexity rules personally, but I would absolutely want useless statements to be detected. I'd say it's almost &quot;suspicious&quot; :) but of course a <code>pass</code> in an empty body is pedantic to remove and a <code>pass</code> in the middle of a function is quite suspicious.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-03-25 14:32</div>
            <div class="timeline-body"><p>Yeah I think &quot;style&quot; might make more sense than &quot;complexity&quot; for &quot;redundant statement&quot; rules. (I only said above that I thought they should all be in the <em>same</em> category ;). But let's not get <em>too</em> into the weeds of rule recategorisation details here ;)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:12 UTC
    </footer>
</body>
</html>
