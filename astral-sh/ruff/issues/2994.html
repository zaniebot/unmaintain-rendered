<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D415 not triggering when it should - astral-sh/ruff #2994</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>D415 not triggering when it should</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2994">#2994</a>
        opened by <a href="https://github.com/cazador481">@cazador481</a>
        on 2023-02-17 18:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/cazador481">@cazador481</a> on 2023-02-17 18:31</div>
            <div class="timeline-body"><h1>Code snippet</h1>
<pre><code class="language-python">def create_and_verify_testrun_entries(
    nvregress_post_client,
    nvregress_crud_client,
    nvregress_project,
    regression_run_data=sample_regression_run_data,
    test_run_data=sample_test_run_data,
):
    &quot;&quot;&quot;Create testrun entries in NVRegress and verify that those
    entries can be read back.

    regression_run_data is layered on top of minimal_regression_run_data
    &quot;&quot;&quot;
    pass
</code></pre>
<h1>Expected Results:</h1>
<p>I expect the docstring to cause a  D415 error but it isn't.
What flake8 shows</p>
<pre><code class="language-sh">poetry run flake8 --select D415 test.py
test.py:8:1: D415 First line should end with a period, question mark, or exclamation point
</code></pre>
<h1>Actual results</h1>
<pre><code class="language-sh"> poetry run ruff --select D415 test.py

</code></pre>
<h1>poetry version</h1>
<pre><code class="language-sh">poetry run ruff --version
ruff 0.0.247
</code></pre>
<h1>pyproject.toml</h1>
<pre><code class="language-toml">
[tool.ruff.pycodestyle]
max-doc-length = 120

[tool.ruff]
line-length = 120
exclude = [&quot;.venv&quot;]
ignore = [
    &quot;D105&quot;,
    &quot;D107&quot;,
    &quot;D401&quot;,
    &quot;E501&quot;,
    &quot;W505&quot;,
]
select = [
    &quot;B&quot;,
    # &quot;C&quot;,
    &quot;D&quot;,
    &quot;E&quot;,
    &quot;F&quot;,
    &quot;N&quot;,
    &quot;W&quot;,
]

[tool.ruff.pydocstyle]
convention = &quot;google&quot;

[tool.ruff.per-file-ignores]
&quot;dejavu/__init__.py&quot; = [&quot;F401&quot;]
</code></pre>
<!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-17 18:56</div>
            <div class="timeline-body"><p>This is actually an intentional deviation. We look for the first logical line, rather than the first physical line (so you should see an error if you remove the period from <code>back.</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cazador481">@cazador481</a> on 2023-02-17 19:11</div>
            <div class="timeline-body"><p>Thanks for the info.  Is that deviation documented anywhere?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-17 20:58</div>
            <div class="timeline-body"><p>I don't think so, but it will be documented when we add documentation for that rule specifically.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-17 23:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:05 UTC
    </footer>
</body>
</html>
