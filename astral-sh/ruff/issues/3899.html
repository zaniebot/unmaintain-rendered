<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>E712 Error message should be improved. Suggestion is not valid in pyspark code - astral-sh/ruff #3899</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>E712 Error message should be improved. Suggestion is not valid in pyspark code</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/3899">#3899</a>
        opened by <a href="https://github.com/jnlaia">@jnlaia</a>
        on 2023-04-06 11:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jnlaia">@jnlaia</a></div>
            <div class="timeline-body"><p>When a E712 violation is found by ruff, the message looks like</p>
<pre><code>E712 Comparison to `True` should be `cond is True`
</code></pre>
<p>This message is not valid if we are talking about pyspark code (and if autofix is enabled, it will fix it wrongly). For instance, the following code snippet is not valid pyspark code</p>
<pre><code>spark_dataframe.where(sf.col(&quot;a_boolean_column&quot;) is True)
</code></pre>
<p>but the lines below are both valid</p>
<pre><code>spark_dataframe.where(sf.col(&quot;a_boolean_column&quot;))
spark_dataframe.where(sf.col(&quot;a_boolean_column&quot;) == True)
</code></pre>
<p>In flake8, the error message was</p>
<pre><code>E712 comparison to True should be &#x27;if cond is True:&#x27; or &#x27;if cond:&#x27;
</code></pre>
<p>which would cover the pyspark scenario</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-06 21:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-06 21:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-13 18:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">type-inference</span> removed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-13 18:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-04-13 19:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:35 UTC
    </footer>
</body>
</html>
