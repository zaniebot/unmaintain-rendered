<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B006: Suggest to use field() instead of None for default parameters - astral-sh/ruff #17629</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>B006: Suggest to use field() instead of None for default parameters</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/17629">#17629</a>
        opened by <a href="https://github.com/C0rn3j">@C0rn3j</a>
        on 2025-04-25 14:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/C0rn3j">@C0rn3j</a> on 2025-04-25 14:40</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>https://docs.astral.sh/ruff/rules/mutable-argument-default/</p>
<pre><code class="language-python">def add_to_list(item, some_list=None):
    if some_list is None:
        some_list = []
    some_list.append(item)
    return some_list


l1 = add_to_list(0)  # [0]
l2 = add_to_list(1)  # [1]
</code></pre>
<p>The current example above makes <code>some_list</code> be able to be defined as both <code>None</code> and a <code>list</code>, which is needlessly complex and problematic as the case of None now has to be considered.</p>
<p>It also confuses type checkers like Pyright, which now think <code>add_to_list</code> could return both <code>None</code> and <code>list</code>.</p>
<p>I suggest adapting <code>field</code> from <code>dataclasses</code>, which allows to never use None, and to add typing to the suggested examples:</p>
<pre><code class="language-python">from dataclasses import field

def add_to_list(item, some_list: list[int] = field(default_factory=list[int])) -&gt; list[int]:
    some_list.append(item)
    return some_list

l1 = add_to_list(0)  # [0]
l2 = add_to_list(1)  # [1]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/C0rn3j">@C0rn3j</a> on 2025-04-25 15:09</div>
            <div class="timeline-body"><p>My bad, <code>field()</code> can only be within a <code>@dataclass</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @C0rn3j on 2025-04-25 15:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:17 UTC
    </footer>
</body>
</html>
