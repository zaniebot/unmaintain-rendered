<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>False positive: `args` in a numpy-style docstring is treated as a section header - astral-sh/ruff #12738</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>False positive: `args` in a numpy-style docstring is treated as a section header</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/12738">#12738</a>
        opened by <a href="https://github.com/bzoracler">@bzoracler</a>
        on 2024-08-08 04:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bzoracler">@bzoracler</a> on 2024-08-08 04:18</div>
            <div class="timeline-body"><p>Possibly related to https://github.com/astral-sh/ruff/issues/9426</p>
<p>I'm trying to write a numpy-style docstring for a <code>TypedDict</code>, however it's triggering <code>D405</code>, <code>D407</code>, and <code>D411</code> because it thinks that one of the key-value pairs is a section header (see <a href="https://play.ruff.rs/d5c9b0b3-b72b-420c-80eb-6e55fb59d180">ruff playground</a>):</p>
<pre><code class="language-python">from typing import TypedDict

class CommandLineSettings(TypedDict):
    &quot;&quot;&quot;
    Settings to the command line program

    Items
    -----
    args
        CLI arguments
    &quot;&quot;&quot;

    args: list[str]
</code></pre>
<p><code>Args</code> is not a recognised section header in numpydoc, which only specifies <a href="https://numpydoc.readthedocs.io/en/latest/format.html#parameters"><code>Parameters</code></a>, so I think this is a false positive.</p>
<p>I've tested this with <code>pydocstyle</code>, which also produces the same false positives, but it's no longer maintained, so I'm posting the issue here.</p>
<hr />
<p>I'm aware that <code>Items</code> is not a recognised section header, but numpydoc doesn't have a style guide for <code>TypedDict</code>s, and none of the existing recognised headers (<code>Attributes</code>, <code>Parameters</code>) are suitable substitutes IMO. Anyway, ruff isn't producing any false positives for the section <code>Items</code>, so I don't have any issues with ruff's behaviour of this section - just the <code>args</code> entry underneath the header.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-08-08 06:04</div>
            <div class="timeline-body"><p>Can you try setting the <code>pydocstyle.convention</code> setting to <code>numpy</code> <a href="https://play.ruff.rs/a9b6fa54-ad9a-4089-83ca-e176dc2dc7d2">playground</a>. I'm not quiet sure what convention is used when the value is <code>null</code> (default) but the error goes away in the playground when explicitly setting numpy.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bzoracler">@bzoracler</a> on 2024-08-08 06:07</div>
            <div class="timeline-body"><p>Oh, thank you! That fixed it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @bzoracler on 2024-08-08 06:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
