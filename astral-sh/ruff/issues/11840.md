```yaml
number: 11840
title: "New rule: Decimal with float argument"
type: issue
state: closed
author: kbaskett248
labels:
  - rule
assignees: []
created_at: 2024-06-11T21:39:56Z
updated_at: 2024-11-15T09:56:25Z
url: https://github.com/astral-sh/ruff/issues/11840
synced_at: 2026-01-10T01:56:52Z
```

# New rule: Decimal with float argument

---

_Issue opened by @kbaskett248 on 2024-06-11 21:39_

I'm interested in adding a new rule to check for `Decimal` being called with a float literal argument. For example:

```py
# Don't
d = Decimal(1.234)
# Do
d = Decimal('1.234')
```

This seems like a generally useful check. I searched for open issues and PRs involving `Decimal` and didn't find any mention of this type of check. I'm happy to work on a PR, but wanted to make sure this check makes sense in `ruff`. Please let me know if I'm missing something or there's any reason this check wouldn't be accepted.

Thanks!

---

_Comment by @charliermarsh on 2024-06-12 02:34_

I don't _think_ we have a check for this. Can you say more on why it's something to be avoided?

---

_Label `rule` added by @charliermarsh on 2024-06-12 02:34_

---

_Comment by @mayanyax on 2024-06-12 05:32_

Consider:

```
>>> Decimal(0.3) == Decimal(0.1) + Decimal(0.1) + Decimal(0.1)
False
>>> Decimal('0.3') == Decimal('0.1') + Decimal('0.1') + Decimal('0.1')
True
```

In the first example you basically creating an exact representation of the floating point approximation to 0.1. To my mind that is almost certainly not what is wanted as it seems to defeat the purpose of using Decimal in the first place.



---

_Comment by @kbaskett248 on 2024-06-12 11:51_

Yeah, @mayanyax is exactly right. Passing a `float` literal could introduce imprecision, which is exactly what we're hoping to avoid.

---

_Comment by @mjgp2 on 2024-07-18 09:46_

This would be a good addition, I have use cases where this has caused potential bugs.

---

_Comment by @Matthieu-LAURENT39 on 2024-08-03 11:24_

this is a footgun i keep forgetting, and i would definitely enjoy seeing this rule implemented.

---

_Referenced in [astral-sh/ruff#12909](../../astral-sh/ruff/pulls/12909.md) on 2024-08-15 18:50_

---

_Comment by @AlexWaygood on 2024-11-15 09:56_

Fixed by #12909

---

_Closed by @AlexWaygood on 2024-11-15 09:56_

---
