<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>new rules for pandas 2.0 deprecations - astral-sh/ruff #8824</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>new rules for pandas 2.0 deprecations</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8824">#8824</a>
        opened by <a href="https://github.com/morotti">@morotti</a>
        on 2023-11-23 12:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/morotti">@morotti</a></div>
            <div class="timeline-body"><p>Hello,</p>
<p>First, thank you for making ruff, it's great!</p>
<p>There are rules around pandas to block deprecated pandas functions, mostly inspired from pandas-vet https://docs.astral.sh/ruff/rules/#pandas-vet-pd</p>
<p>pandas released a new major version 2.0 few months ago, with a bazillion of breaking changes.
is it possible to add new rules to flag and automatically adjust deprecated imports?</p>
<p>import pandas.datetime is removed. to be replaced by import datetime.datetime.</p>
<p>import pandas.util.testing is removed.
pandas.util.testing.assert_frame_equal -&gt; pandas.testing.assert_frame_equal
pandas.util.testing.assert_series_equal -&gt; pandas.testing.assert_series_equal
pandas.util.testing.assert_almost_equal -&gt; numpy.assert_almost_equal
there are other functions that were available but not all of them are available in a new location.</p>
<p>Thank you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-24 15:20</div>
            <div class="timeline-body"><p>Would definitely accept a contribution to this effect -- we've done the same for NumPy.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @charliermarsh on 2023-11-24 15:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "new rules for pandas 2.0 depreciations" to "new rules for pandas 2.0 deprecations" by @charliermarsh on 2023-11-24 17:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/olsgaard">@olsgaard</a> on 2024-03-07 05:15</div>
            <div class="timeline-body"><p>To what degree does ruff want to implement exceptions for different libraries?</p>
<p>For example, I find <a href="https://docs.astral.sh/ruff/rules/true-false-comparison">E712 Comparison to True should be <code>cond is True</code></a> problematic when sub-setting pandas data frames, e.g.</p>
<pre><code class="language-python">df[df['bool_column_with_nans']] #ValueError: Cannot mask with non-boolean array containing NA / NaN values

df[df['bool_column_with_nans'] == True] #Clear, readable, works, but a problem according to linter
</code></pre>
<p>As this issue is related to library specific rules, I am wondering to what degree these kind of things can be attached to the topic.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:49:06 UTC
    </footer>
</body>
</html>
