<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`TC001`, `TC002`, `TC003` - documentation mentions import cycles which is misleading - astral-sh/ruff #15552</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`TC001`, `TC002`, `TC003` - documentation mentions import cycles which is misleading</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/15552">#15552</a>
        opened by <a href="https://github.com/DetachHead">@DetachHead</a>
        on 2025-01-17 14:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/DetachHead">@DetachHead</a> on 2025-01-17 14:41</div>
            <div class="timeline-body"><p>the documentation for these three rules all mention import cycles:</p>
<ul>
<li>https://docs.astral.sh/ruff/rules/typing-only-first-party-import/</li>
<li>https://docs.astral.sh/ruff/rules/typing-only-third-party-import/</li>
<li>https://docs.astral.sh/ruff/rules/typing-only-standard-library-import/</li>
</ul>
<blockquote>
<p>Unused imports add a performance overhead at runtime, and risk creating import cycles. If an import is only used in typing-only contexts, it can instead be imported conditionally under an <code>if TYPE_CHECKING:</code> block to minimize runtime overhead.</p>
</blockquote>
<p>for <code>TC002</code> and <code>TC003</code>, mentioning import cycles isn't relevant because standard library or third party modules will never import from the source code that imported it, so i think the mention of import cycles should be removed from the documentation for these two rules.</p>
<p>for <code>TC001</code>, import cycles are a relevant concern because the imported module is part of your source code and therefore could have a circular dependency on the current file. however it's a common (and dangerous) misconception that import cycles are only an issue at runtime. it almost always means there's a problem with how your project is structured regardless of whether the import is <code>TYPE_CHECKING</code> only so it's misleading to suggest that a <code>TYPE_CHECKING</code> import is a suitable solution. <a href="https://github.com/DetachHead/basedpyright/issues/960#issuecomment-2552777922">see this discussion for an example</a>.</p>
<p>perhaps the <code>TC001</code> documentation can include a warning mentioning that <code>TYPE_CHECKING</code> imports are not the best solution to import cycles</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @MichaReiser on 2025-01-17 14:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:54 UTC
    </footer>
</body>
</html>
