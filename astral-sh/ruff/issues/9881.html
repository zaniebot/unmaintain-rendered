<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An F841 error shows up only when enabling the preview mode - astral-sh/ruff #9881</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>An F841 error shows up only when enabling the preview mode</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/9881">#9881</a>
        opened by <a href="https://github.com/suhaibmujahid">@suhaibmujahid</a>
        on 2024-02-07 21:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/suhaibmujahid">@suhaibmujahid</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<p>Currently, <code>F841</code> is not in preview. However, it will catch the following unused variable (i.e., <code>secund</code>) only when the preview mode is enabled.</p>
<h2>Minimal code snippet</h2>
<pre><code class="language-py">class Foo:
    def bar(self):
        return 1, 2

    def main(self):
        first, secund = self.bar()

        print(first)
</code></pre>
<h2>Invoked commands</h2>
<p>The following command shows no errors:</p>
<pre><code class="language-sh">ruff ruff_F841.py --isolated
</code></pre>
<p>While enabling the preview shows an <code>F841</code> error:</p>
<pre><code class="language-sh">ruff ruff_F841.py --isolated --preview
</code></pre>
<pre><code>ruff_F841.py:6:16: F841 Local variable `secund` is assigned to but never used
  |
5 |     def main(self):
6 |         first, secund = self.bar()
  |                ^^^^^^ F841
7 | 
8 |         print(first)
  |
  = help: Remove assignment to unused variable `secund`

Found 1 error.
No fixes available (1 hidden fix can be enabled with the `--unsafe-fixes` option).
</code></pre>
<h2>The current Ruff settings</h2>
<p>Just the defaults with no customization</p>
<h2>The current Ruff version</h2>
<pre><code>ruff 0.2.1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-07 21:49</div>
            <div class="timeline-body"><p>Hey sorry -- this is intended and it's covered in the rule documentation: https://docs.astral.sh/ruff/rules/unused-variable/. Right now, we don't lint against unused variables in tuples if at least one of them is used, but we're considering changing that behavior (hence why the revised logic is present in preview).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-02-07 21:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-07 21:50</div>
            <div class="timeline-body"><p>(For completeness, there's also a separate issue here discussing whether / how to stabilize that change: https://github.com/astral-sh/ruff/issues/8884.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/suhaibmujahid">@suhaibmujahid</a> on 2024-02-07 21:54</div>
            <div class="timeline-body"><p>I appreciate the clarification.</p>
<p>BTW, this behaviour does not respect the <code>explicit-preview-rules</code> option. When having <code>explicit-preview-rules = true</code>, I was expecting to not have any preview behaviour unless the rule is explicitly selected.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:49:35 UTC
    </footer>
</body>
</html>
