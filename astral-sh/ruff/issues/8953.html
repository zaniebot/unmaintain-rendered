<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logging which files were changed when running `ruff format .` ? - astral-sh/ruff #8953</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Logging which files were changed when running <code>ruff format .</code> ?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8953">#8953</a>
        opened by <a href="https://github.com/thvasilo">@thvasilo</a>
        on 2023-12-01 17:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/thvasilo">@thvasilo</a></div>
            <div class="timeline-body"><p>Hi team, thanks for the great tool.</p>
<p>One of the small features I appreciated with <code>black</code> is that it would list which files were changed when I ran the command, is it possible to have that with ruff as well?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Logging which files where changed when running `ruff format .` ?&quot; to &quot;Logging which files were changed when running `ruff format .` ?&quot; by <a href="https://github.com/thvasilo">@thvasilo</a> on 2023-12-01 17:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2023-12-02 12:48</div>
            <div class="timeline-body"><p>There are already <code>--check</code> and <code>--diff</code> options for formatter:</p>
<pre><code>&gt; ruff format . --check
Would reformat: demo.py
Would reformat: wgpy.py
2 files would be reformatted
</code></pre>
<p>if you need unified command for both check and modify files in one command, then we could consider an option to do it:</p>
<pre><code>&gt; ruff format . --check --force-modify
Would reformat: demo.py
Would reformat: wgpy.py
2 files reformatted
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-02 13:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-12-04 00:27</div>
            <div class="timeline-body"><blockquote>
<p>One of the small features I appreciated with black is that it would list which files where changed when I ran the command, is it possible to have that with ruff as well?</p>
</blockquote>
<p>May I ask what you use the printed file names? Is it to better understand what the command changed? Would you expect <code>ruff check --fix</code> (linter) to show the names of fixed files too?</p>
<p>The reasons that I&#x27;m aware why we aren&#x27;t printing file names today are: a) printing many names to the console may require more time than ruff linting all your files and b) can be very verbose if many files were changed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thvasilo">@thvasilo</a> on 2023-12-05 18:19</div>
            <div class="timeline-body"><blockquote>
<p>Is it to better understand what the command changed ?</p>
</blockquote>
<p>Yes that would be it. At least for smaller projects usually there&#x27;s only a few files changed for each commit, with the black pre-commit hook I could see which files were changed, so if there&#x27;s an option to do it with ruff I&#x27;d use it.</p>
<blockquote>
<p><code>ruff format . --check --force-modify</code></p>
</blockquote>
<p>Yup something like that would work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2023-12-06 00:26</div>
            <div class="timeline-body"><p>I must admit I never used pre-commit myself so happy to learn with you. Can you use <code>ruff format</code> without the check inside of your pre-commit. The step should fail if there are any modified files according to @charliermarsh&#x27;s <a href="https://github.com/astral-sh/ruff-pre-commit/issues/61#issuecomment-1838777145">comment</a>. Any chance that the pre-commit hook lists the changed files in the error message?</p>
<p>Another option that is supported today is to use <code>--diff</code>, but it not only prints the file name but also the diff for each file. Not sure if that&#x27;s too noisy.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2024-04-17 19:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dev-iL">@Dev-iL</a> on 2024-05-02 12:45</div>
            <div class="timeline-body"><blockquote>
<p>May I ask what you use the printed file names?</p>
</blockquote>
<p>I can share my own reasoning why I need to know which files were changed: when I have commits which modify multiple files and files have some staged as well as unstaged changes, I have no idea which parts of which files I need to stage to make ruff happy.</p>
<p>Therefore, if there was an &quot;auto-stage fixes&quot; option, I wouldn&#x27;t need to know which files were changed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/markbaird">@markbaird</a> on 2024-10-25 19:07</div>
            <div class="timeline-body"><p>As another user switching over from <code>black</code> I would like to echo the request to show the list of files that were modified. If I commit 10 files, and I all I get is this message from Ruff:</p>
<pre><code> - files were modified by this hook 
Found 1 error (1 fixed, 0 remaining).
</code></pre>
<p>It is a bit disconcerting not having any indication of which file was modified.</p>
<blockquote>
<p>The reasons that I&#x27;m aware why we aren&#x27;t printing file names today are: a) printing many names to the console may require more time than ruff linting all your files and b) can be very verbose if many files were changed.</p>
</blockquote>
<p>@MichaReiser  I think it&#x27;s reasonable that this should be a configuration option that is disabled by default, so people would have to opt-in to the extra output if they accept the performance hit and the extra noise.  I tried using <code>--verbose</code> but this is  <strong>way</strong> too noisy to be useful. I think something like a <code>--info</code> log level would be appropriate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/justinTM">@justinTM</a> on 2025-02-28 01:14</div>
            <div class="timeline-body"><p>this would be necessary for undo, otherwise the user has to manually specify <code>--output-format concise</code>, parse out the files and lines for each file, and undo them somehow using git stashing or whatever. having this built in would be great. all it takes is one accidental repo-wide ruff run and you sped the next few minutes to an hour manually putting everything back the way it was</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TParcollet">@TParcollet</a> on 2025-10-07 13:23</div>
            <div class="timeline-body"><p>Hello there, bumping the issue as this is a concern for us as well. We basically need a --check flag that would also apply the changes after showing the list of changed files! Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:47 UTC
    </footer>
</body>
</html>
