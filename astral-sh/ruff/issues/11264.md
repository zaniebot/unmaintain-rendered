```yaml
number: 11264
title: "`flake8-boolean-trap.extend-allowed-calls` don't resolve class types"
type: issue
state: open
author: clara-bordes
labels:
  - type-inference
  - wish
assignees: []
created_at: 2024-05-03T15:32:43Z
updated_at: 2025-05-21T21:14:12Z
url: https://github.com/astral-sh/ruff/issues/11264
synced_at: 2026-01-10T01:56:52Z
```

# `flake8-boolean-trap.extend-allowed-calls` don't resolve class types

---

_Issue opened by @clara-bordes on 2024-05-03 15:32_

I am actually working on fixing the rule **boolean-positional-value-in-call (FBT003)** on a code repository.

I need to allow this rule for some functions. For that, at the end of my config file "pyproject.toml", I have added:

```
[lint.flake8-boolean-trap]
extend-allowed-calls = ["LibName.className.functionName"]
```

My issue here is that in my code repository, we call the function "LibName.className.functionName" through a variable, as following:

```
from LibName import ClassName

with ClassName("[Description]") as variable:
       variable.functionName(...)
```

On such code, the rule FBT003 is **still applied** in spite of the "extend-allowed-calls" option.

Is the "extend-allowed-calls" option only works for direct function calls?

---

_Comment by @charliermarsh on 2024-05-03 19:15_

Yes, that setting doesn't support resolution to the base type. It won't trace `variable` back to `LibName.ClassName`.

---

_Label `type-inference` added by @charliermarsh on 2024-05-04 13:41_

---

_Renamed from ""flake8-boolean-trap.extend-allowed-calls" option does not work in my case" to "`flake8-boolean-trap.extend-allowed-calls` don't resolve class types" by @charliermarsh on 2024-05-04 13:41_

---

_Comment by @charliermarsh on 2024-05-04 13:41_

I'd suggest just disabling the rule, but we'll probably support this at some point in the future.

---

_Comment by @flying-sheep on 2024-08-01 13:52_

would be nice to support wildcards in the meantime. E.g. I think all methods called like `.fill(True)` are probably fine.

---

_Comment by @andrei-korshikov on 2025-03-19 05:28_

> would be nice to support wildcards in the meantime

+1 on wildcards (regexes?). My use case:

```python
import pycurl

curl = pycurl.Curl()
curl.setopt(pycurl.VERBOSE, True)
```

[pycurl.Curl.setopt()](http://pycurl.io/docs/latest/curlobject.html#pycurl.Curl.setopt) is positional-only (takes no keyword arguments). It should be part of #3247 when type resolution will be available.

---

_Label `wish` added by @MichaReiser on 2025-03-19 07:02_

---

_Comment by @danra on 2025-05-21 21:14_

Ran into this as well trying to whitelist the canonical `torch.Tensor.requires_grad_`

---

_Referenced in [astral-sh/ruff#18247](../../astral-sh/ruff/issues/18247.md) on 2025-05-21 21:18_

---
