<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>I002 fixes’ insertions appear in reverse alphabetical order - astral-sh/ruff #20811</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>I002 fixes’ insertions appear in reverse alphabetical order</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/20811">#20811</a>
        opened by <a href="https://github.com/dscorbett">@dscorbett</a>
        on 2025-10-11 13:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dscorbett">@dscorbett</a> on 2025-10-11 13:24</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>The fix for <a href="https://docs.astral.sh/ruff/rules/missing-required-import/"><code>missing-required-import</code> (I002)</a> inserts imports in reverse alphabetical order. This is probably never what anyone wants. It would be better to insert them in the order specified in the config, but if they must be sorted, then they should be inserted in alphabetical order.</p>
<pre><code class="language-console">$ echo 1 | ruff --isolated check - --config 'lint.isort.required-imports = [&quot;import x1&quot;, &quot;import x3&quot;, &quot;import x2&quot;]' --select I002 --unsafe-fixes --fix -q
import x3
import x2
import x1
1
</code></pre>
<h3>Version</h3>
<p>ruff 0.14.0 (beea8cdfe 2025-10-07)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-10-13 20:27</div>
            <div class="timeline-body"><p>I think it makes sense to try this. We currently insert each import at the very beginning of the file:</p>
<p>https://github.com/astral-sh/ruff/blob/a362ddb86ca356bdb3ca97d71af106258ef51cdc/crates/ruff_linter/src/rules/isort/rules/add_required_imports.rs#L127-L130</p>
<p>But I think that's a little easier to deal with than #20787. An <code>IndexSet</code> might be helpful for the <code>required_imports</code> field instead of a <code>BTreeSet</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fixes</span> added by @ntBre on 2025-10-13 20:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:38:33 UTC
    </footer>
</body>
</html>
