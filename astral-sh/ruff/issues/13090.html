<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unclear how to configure the quouting style in Zed extension - astral-sh/ruff #13090</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Unclear how to configure the quouting style in Zed extension</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/13090">#13090</a>
        opened by <a href="https://github.com/Yura52">@Yura52</a>
        on 2024-08-25 10:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Yura52">@Yura52</a> on 2024-08-25 10:06</div>
            <div class="timeline-body"><p>(key words: zed, quote-style)</p>
<p>Hi! I managed to make Ruff work in Zed with the official extension, but I don't understand how to configure the quoting style for the Ruff formatter: it always formats my code as if I set the quoting style to &quot;double&quot;. Below, I added the relevant part of my <code>settings.json</code>. Some things to note:</p>
<ul>
<li>I tried <code>&quot;quote-style&quot;</code>, <code>&quot;quote_style&quot;</code>, <code>&quot;quoteStyle&quot;</code>, under the <code>&quot;format&quot;</code> key (as in the snippet below) and one level above (e.g. next to <code>&quot;lineLength&quot;</code>) -- nothing worked.</li>
<li>At the same time it seems that all other pieces do have affect: I tested this by commenting and/or changing the below settings in both <code>&quot;languages&quot;</code> and <code>&quot;lsp&quot;</code> sections.</li>
</ul>
<p>My environment:</p>
<pre><code>macOS: 14.5
Ruff: 0.6.2 (Homebrew)
Zed: 0.149.5
Ruff extension: 0.0.2
</code></pre>
<pre><code class="language-jsonc">&quot;languages&quot;: {
    &quot;Python&quot;: {
      &quot;language_servers&quot;: [&quot;ruff&quot;],
      &quot;format_on_save&quot;: &quot;on&quot;,
      &quot;formatter&quot;: [
        {
          &quot;code_actions&quot;: {
            &quot;source.organizeImports.ruff&quot;: true
          }
        },
        { &quot;language_server&quot;: { &quot;name&quot;: &quot;ruff&quot; } }
      ]
    }
  },
  &quot;lsp&quot;: {
    &quot;ruff&quot;: {
      &quot;initialization_options&quot;: {
        &quot;settings&quot;: {
          &quot;targetVersion&quot;: &quot;py310&quot;,
          &quot;lineLength&quot;: 88,
          &quot;lint&quot;: {
            &quot;extendSelect&quot;: [&quot;RUF&quot;, &quot;UP&quot;, &quot;E501&quot;, &quot;E731&quot;]
          },
          &quot;format&quot;: {
            &quot;quote-style&quot;: &quot;single&quot;
          }
        }
      }
    }
  },
</code></pre>
<p>P.S. Not an issue at all, but I was a bit surprised by <code>thisNamingStyle</code> instead of <code>this_naming_style</code> or <code>this-naming-style</code>, because the latter two options would be more consistent with other Zed settings and with <code>pyproject.toml</code>. But again, this is not a big deal.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/victorneo">@victorneo</a> on 2024-08-25 18:09</div>
            <div class="timeline-body"><p>ruff seems to have two different set of settings: <a href="https://docs.astral.sh/ruff/editors/settings/">lsp settings</a> and <a href="https://docs.astral.sh/ruff/configuration/">ruff specific configuration options</a></p>
<p>Notice that the options available under <code>format</code> for both sets of configuration options are different.</p>
<p>If my understanding is correct, <code>quote-style</code> is a ruff configuration option that can only be configured via one of the following files: <a href="https://docs.astral.sh/ruff/configuration/"><code>pyproject.toml</code>, <code>ruff.toml</code>, or <code>.ruff.toml</code></a></p>
<p><code>lsp</code> server settings that you configure in <code>settings.json</code> only support the following options, which is why it doesn't work when you put them in <a href="https://docs.astral.sh/ruff/editors/settings/"><code>settings.json</code></a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-26 04:21</div>
            <div class="timeline-body"><p>What @victorneo said is correct. The server settings are different than the Ruff configuration. A few config keys are exposed as server settings but not all are, so <code>quote-style</code> isn't exposed. But, to account for them, there's <code>ruff.configuration</code> where you can provide a custom configuration path. Or, you can provide them at the project level as the server will consider those settings as well.</p>
<blockquote>
<p>P.S. Not an issue at all, but I was a bit surprised by <code>thisNamingStyle</code> instead of <code>this_naming_style</code> or <code>this-naming-style</code>, because the latter two options would be more consistent with other Zed settings and with <code>pyproject.toml</code>. But again, this is not a big deal.</p>
</blockquote>
<p>It's because the server is agnostic to any editor that supports LSP. The naming style comes from the actual protocol https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/.</p>
<p>I'll mark this is resolved but feel free to ask any other questions that you might have.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2024-08-26 04:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @dhruvmanila on 2024-08-26 04:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Yura52">@Yura52</a> on 2024-08-26 10:15</div>
            <div class="timeline-body"><p>Thank you for the replies, I have managed to configure Ruff in Zed successfully! I should admit that, before knowing the details, in <a href="https://docs.astral.sh/ruff/editors/setup/#zed">the example</a> in the Ruff documentation (<a href="https://zed.dev/docs/languages/python#code-formatting--linting">linked</a> in the Zed documentation), the paragraph <em>&quot;To configure the language server, you can provide the <a href="https://docs.astral.sh/ruff/editors/settings/">server settings</a>&quot;</em> sounded to me like &quot;here is an example of customizing Ruff behavior through the editor config&quot;, and I thought that I could do the same with any setting. Perhaps, a short comment after that sentence can be helpful for newcomers.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-26 13:20</div>
            <div class="timeline-body"><blockquote>
<p>Perhaps, a short comment after that sentence can be helpful for newcomers.</p>
</blockquote>
<p>Happy to accept a PR which makes it clear in the docs :)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
