<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow `fmt: skip` for dict and list contents - astral-sh/ruff #19227</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow <code>fmt: skip</code> for dict and list contents</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/19227">#19227</a>
        opened by <a href="https://github.com/spaceone">@spaceone</a>
        on 2025-07-09 09:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/spaceone">@spaceone</a></div>
            <div class="timeline-body"><pre><code>from foo import Tab, Group, _
layout = [  # fmt: skip
    Tab(_(&#x27;General&#x27;), _(&#x27;Basic settings&#x27;), layout=[
        Group(_(&#x27;User account&#x27;), layout=[
            [&#x27;title&#x27;, &#x27;firstname&#x27;, &#x27;lastname&#x27;],
            [&#x27;username&#x27;, &#x27;description&#x27;],
            &#x27;password&#x27;,
            [&#x27;overridePWHistory&#x27;, &#x27;overridePWLength&#x27;],
            &#x27;mailPrimaryAddress&#x27;,
        ]),
        Group(_(&#x27;Personal information&#x27;), layout=[
            &#x27;displayName&#x27;,
            &#x27;birthday&#x27;,
            &#x27;jpegPhoto&#x27;,
        ]),
        Group(_(&#x27;Organisation&#x27;), layout=[
            &#x27;organisation&#x27;,
            [&#x27;employeeNumber&#x27;, &#x27;employeeType&#x27;],
            &#x27;secretary&#x27;,
        ]),
    ]),
    Tab(_(&#x27;Groups&#x27;), _(&#x27;Groups&#x27;), layout=[
        Group(_(&#x27;Primary group&#x27;), layout=[
            &#x27;primaryGroup&#x27;,
        ]),
        Group(_(&#x27;Additional groups&#x27;), layout=[
            &#x27;groups&#x27;,
        ]),
    ]),
]

</code></pre>
<p>is reformatted as:</p>
<pre><code>from foo import Tab, Group, _
layout = [  # fmt: skip
    Tab(
        _(&#x27;General&#x27;),
        _(&#x27;Basic settings&#x27;),
        layout=[
            Group(
                _(&#x27;User account&#x27;),
                layout=[
                    [&#x27;title&#x27;, &#x27;firstname&#x27;, &#x27;lastname&#x27;],
                    [&#x27;username&#x27;, &#x27;description&#x27;],
                    &#x27;password&#x27;,
                    [&#x27;overridePWHistory&#x27;, &#x27;overridePWLength&#x27;],
                    &#x27;mailPrimaryAddress&#x27;,
                ],
            ),
            Group(
                _(&#x27;Personal information&#x27;),
                layout=[
                    &#x27;displayName&#x27;,
                    &#x27;birthday&#x27;,
                    &#x27;jpegPhoto&#x27;,
                ],
            ),
            Group(
                _(&#x27;Organisation&#x27;),
                layout=[
                    &#x27;organisation&#x27;,
                    [&#x27;employeeNumber&#x27;, &#x27;employeeType&#x27;],
                    &#x27;secretary&#x27;,
                ],
            ),
        ],
    ),
    Tab(
        _(&#x27;Groups&#x27;),
        _(&#x27;Groups&#x27;),
        layout=[
            Group(
                _(&#x27;Primary group&#x27;),
                layout=[
                    &#x27;primaryGroup&#x27;,
                ],
            ),
            Group(
                _(&#x27;Additional groups&#x27;),
                layout=[
                    &#x27;groups&#x27;,
                ],
            ),
        ],
    ),
]

</code></pre>
<p>I have many of those and different dictionary defintions, where I would like to have a single comment instead of using <code>#fmt: off</code> / <code>#fmt: on</code> blocks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/akx">@akx</a> on 2025-07-09 10:13</div>
            <div class="timeline-body"><p>The <code># fmt: skip</code> comment needs to be at the end of the expression you don&#x27;t want to format, in this case after the final closing <code>]</code>. <a href="https://play.ruff.rs/0db4019e-040d-435f-912f-1cb4f41a8483">See playground.</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-09 10:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/spaceone">@spaceone</a> on 2025-07-09 11:00</div>
            <div class="timeline-body"><p>ah thank you! Closing this issue is okay for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-09 11:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:50:12 UTC
    </footer>
</body>
</html>
