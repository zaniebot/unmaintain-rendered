<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow `fmt: skip` for dict and list contents - astral-sh/ruff #19227</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Allow `fmt: skip` for dict and list contents</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/19227">#19227</a>
        opened by <a href="https://github.com/spaceone">@spaceone</a>
        on 2025-07-09 09:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/spaceone">@spaceone</a> on 2025-07-09 09:20</div>
            <div class="timeline-body"><pre><code class="language-python">from foo import Tab, Group, _
layout = [  # fmt: skip
    Tab(_('General'), _('Basic settings'), layout=[
        Group(_('User account'), layout=[
            ['title', 'firstname', 'lastname'],
            ['username', 'description'],
            'password',
            ['overridePWHistory', 'overridePWLength'],
            'mailPrimaryAddress',
        ]),
        Group(_('Personal information'), layout=[
            'displayName',
            'birthday',
            'jpegPhoto',
        ]),
        Group(_('Organisation'), layout=[
            'organisation',
            ['employeeNumber', 'employeeType'],
            'secretary',
        ]),
    ]),
    Tab(_('Groups'), _('Groups'), layout=[
        Group(_('Primary group'), layout=[
            'primaryGroup',
        ]),
        Group(_('Additional groups'), layout=[
            'groups',
        ]),
    ]),
]

</code></pre>
<p>is reformatted as:</p>
<pre><code class="language-python">from foo import Tab, Group, _
layout = [  # fmt: skip
    Tab(
        _('General'),
        _('Basic settings'),
        layout=[
            Group(
                _('User account'),
                layout=[
                    ['title', 'firstname', 'lastname'],
                    ['username', 'description'],
                    'password',
                    ['overridePWHistory', 'overridePWLength'],
                    'mailPrimaryAddress',
                ],
            ),
            Group(
                _('Personal information'),
                layout=[
                    'displayName',
                    'birthday',
                    'jpegPhoto',
                ],
            ),
            Group(
                _('Organisation'),
                layout=[
                    'organisation',
                    ['employeeNumber', 'employeeType'],
                    'secretary',
                ],
            ),
        ],
    ),
    Tab(
        _('Groups'),
        _('Groups'),
        layout=[
            Group(
                _('Primary group'),
                layout=[
                    'primaryGroup',
                ],
            ),
            Group(
                _('Additional groups'),
                layout=[
                    'groups',
                ],
            ),
        ],
    ),
]

</code></pre>
<p>I have many of those and different dictionary defintions, where I would like to have a single comment instead of using <code>#fmt: off</code> / <code>#fmt: on</code> blocks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/akx">@akx</a> on 2025-07-09 10:13</div>
            <div class="timeline-body"><p>The <code># fmt: skip</code> comment needs to be at the end of the expression you don't want to format, in this case after the final closing <code>]</code>. <a href="https://play.ruff.rs/0db4019e-040d-435f-912f-1cb4f41a8483">See playground.</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-07-09 10:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/spaceone">@spaceone</a> on 2025-07-09 11:00</div>
            <div class="timeline-body"><p>ah thank you! Closing this issue is okay for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-07-09 11:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
