<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Panic] ruff fix-import - astral-sh/ruff #3033</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Panic] ruff fix-import</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/3033">#3033</a>
        opened by <a href="https://github.com/justinchuby">@justinchuby</a>
        on 2023-02-19 16:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/justinchuby">@justinchuby</a> on 2023-02-19 16:00</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with Ruff.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `ruff /path/to/file.py --fix`), ideally including the `--isolated` flag.
* The current Ruff settings (any relevant sections from your `pyproject.toml`).
* The current Ruff version (`ruff --version`).
-->

<h3>File</h3>
<p>The file is <code>https://github.com/onnx/onnx/blob/7f0a9f2537348e7e53a825e0b716db1dbc997e47/onnx/backend/test/case/node/where.py</code></p>
<h3>pyproject.toml</h3>
<pre><code class="language-toml">[tool.ruff]
target-version = &quot;py37&quot;
select = [
    &quot;E&quot;, # pycodestyle
    &quot;F&quot;, # Pyflakes
    &quot;W&quot;, # pycodestyle
    &quot;B&quot;, # flake8-bugbear
    &quot;N&quot;, # pep8-naming
    &quot;YTT&quot;, # flake8-2020
    &quot;RUF&quot;, # Ruff-specific rules
    &quot;TID252&quot;, # Relative imports
]
ignore = [
    &quot;B9&quot;, # Opinionated bugbear rules
    &quot;E402&quot;, # warns on imports coming after statements. There are important use cases
            # like demandimport (https://fburl.com/demandimport) that require statements
    &quot;E501&quot;,
    &quot;N803&quot;, # Argument casing
    &quot;N806&quot;, # Variable name in function should be lowercase
]
ignore-init-module-imports = true
unfixable = [
    &quot;F401&quot;, # Unused imports
]

[tool.ruff.flake8-tidy-imports]
# Disallow all relative imports.
ban-relative-imports = &quot;all&quot;
</code></pre>
<h3>Command ran</h3>
<pre><code class="language-sh">RUST_BACKTRACE=full ruff --fix-only --exit-zero --config=pyproject.toml /Users/justinc/Documents/GitHub/onnx/onnx/backend/test/case/node/where.py
</code></pre>
<p>Error:</p>
<pre><code>thread 'main' panicked at 'called `Option::unwrap()` on a `None` value', crates/ruff/src/rules/flake8_tidy_imports/relative_imports.rs:102:54
stack backtrace:
   0:        0x1054e8ed8 - &lt;std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display&gt;::fmt::h2990a6f24ccff6db
   1:        0x104edb668 - core::fmt::write::h91497fd291c8b104
   2:        0x1054e3ea0 - std::io::stdio::_eprint::hfdc1bd7888eaa0e7
   3:        0x1054eca70 - std::panicking::default_hook::hdfe992d5fb29a991
   4:        0x1054ec798 - std::panicking::default_hook::hdfe992d5fb29a991
   5:        0x1052796d4 - &lt;reqwest::redirect::TooManyRedirects as core::fmt::Debug&gt;::fmt::h082b790308395cc4
   6:        0x1054ed02c - std::panicking::rust_panic_with_hook::h2eb0e4b718773521
   7:        0x1054eceb8 - &lt;std::panicking::begin_panic_handler::StrPanicPayload as core::panic::BoxMeUp&gt;::get::h3f7cfefea3e19c93
   8:        0x1054eb8c4 - &lt;std::sys_common::backtrace::_print::DisplayBacktrace as core::fmt::Display&gt;::fmt::h2990a6f24ccff6db
   9:        0x1054ecc74 - _rust_begin_unwind
  10:        0x1055b0eec - core::panicking::panic_fmt::ha46aa9af97eb193d
  11:        0x1055b0e0c - core::panicking::panic::h5713e7735cef5fa8
  12:        0x10531cce4 - &lt;ruff::checkers::ast::Checker as ruff::ast::visitor::Visitor&gt;::visit_stmt::h4b593c8c33a76cb3
  13:        0x105333440 - &lt;ruff::checkers::ast::Checker as ruff::ast::visitor::Visitor&gt;::visit_body::h0fc88a428b1d49d5
  14:        0x10534a4d8 - &lt;ruff::checkers::ast::Checker as ruff::ast::visitor::Visitor&gt;::visit_body::h0fc88a428b1d49d5
  15:        0x10535a298 - ruff::linter::check_path::h842469eb58db80b1
  16:        0x105364d20 - ruff::linter::lint_fix::h929bb0874a600095
  17:        0x105266a30 - &lt;reqwest::redirect::TooManyRedirects as core::fmt::Debug&gt;::fmt::h082b790308395cc4
  18:        0x10520086c - &lt;reqwest::redirect::TooManyRedirects as core::fmt::Debug&gt;::fmt::h082b790308395cc4
  19:        0x105264aa4 - &lt;reqwest::redirect::TooManyRedirects as core::fmt::Debug&gt;::fmt::h082b790308395cc4
  20:        0x10527d370 - &lt;reqwest::redirect::TooManyRedirects as core::fmt::Debug&gt;::fmt::h082b790308395cc4
  21:        0x105274640 - &lt;reqwest::redirect::TooManyRedirects as core::fmt::Debug&gt;::fmt::h082b790308395cc4
  22:        0x10527eb30 - &lt;reqwest::redirect::TooManyRedirects as core::fmt::Debug&gt;::fmt::h082b790308395cc4
  23:        0x1051d47d8 - &lt;reqwest::redirect::TooManyRedirects as core::fmt::Debug&gt;::fmt::h082b790308395cc4
  24:        0x1051d4c80 - &lt;reqwest::redirect::TooManyRedirects as core::fmt::Debug&gt;::fmt::h082b790308395cc4
  25:        0x1054debc8 - std::rt::lang_start_internal::h94fa211da9d06d56
  26:        0x10528c58c - _main
fish: Job 1, 'RUST_BACKTRACE=full ruff --fix-â€¦' terminated by signal SIGABRT (Abort)
</code></pre>
<h3>Version</h3>
<p>ruff 0.0.247</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-02-19 16:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-02-19 16:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-19 16:12</div>
            <div class="timeline-body"><p>Taking a look...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-19 16:15</div>
            <div class="timeline-body"><p>Just confirmed locally that this was fixed by #2990. Will cut a new release today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-02-19 16:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/justinchuby">@justinchuby</a> on 2023-02-19 16:16</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-19 16:17</div>
            <div class="timeline-body"><p>Thanks for filing!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:49 UTC
    </footer>
</body>
</html>
