<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Failed to create fix for `UnnecessaryComprehensionAnyAll: Expected Expression::ListComp` - astral-sh/ruff #6713</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Failed to create fix for <code>UnnecessaryComprehensionAnyAll: Expected Expression::ListComp</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/6713">#6713</a>
        opened by <a href="https://github.com/qarmin">@qarmin</a>
        on 2023-08-21 08:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/qarmin">@qarmin</a> on 2023-08-21 08:46</div>
            <div class="timeline-body"><p>Ruff 0.0.285</p>
<pre><code>ruff  *.py --select ALL
</code></pre>
<p>file content:</p>
<pre><code>any(x.id for x in bar)
any({x.id for x in bar})
</code></pre>
<p>error:</p>
<pre><code>error: Failed to create fix for UnnecessaryComprehensionAnyAll: Expected Expression::ListComp
PY_FILE_TEST_51040573.py:1:1: D100 Missing docstring in public module
</code></pre>
<p><a href="https://github.com/astral-sh/ruff/files/12394105/PY_FILE_TEST_51040573.py.zip">PY_FILE_TEST_51040573.py.zip</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-08-21 10:19</div>
            <div class="timeline-body"><p>It seems that neither <code>flake8-comprehension</code> or <code>flake8-pie</code> raises a violation when set comprehensions are used. \cc @charliermarsh any idea why this was added in https://github.com/astral-sh/ruff/pull/3824?</p>
<p>Sets are unordered so we might not know when <code>any</code> stops and if it benefits or not. Depending on the reason for the PR, the fix would be either to not flag it for set comprehensions or update the autofix to account for that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @dhruvmanila on 2023-08-21 10:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">autofix</span> added by @dhruvmanila on 2023-08-21 10:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-08-21 12:54</div>
            <div class="timeline-body"><p>@dhruvmanila - It still makes sense to avoid allocating the set IMO. We should update the autofix, I think.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fuzzer</span> added by @charliermarsh on 2023-08-21 12:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-08-21 23:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:31:03 UTC
    </footer>
</body>
</html>
