<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consider supporting ignores for banned-api configuration - astral-sh/ruff #18723</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Consider supporting ignores for banned-api configuration</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/18723">#18723</a>
        opened by <a href="https://github.com/soceanainn">@soceanainn</a>
        on 2025-06-17 13:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/soceanainn">@soceanainn</a> on 2025-06-17 13:56</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Right now our codebase has a bunch of imports that are banned at the project root, and we would primarily like to extend this and ban additional imports at a particular sub level, but extending this configuration is not supported.
This has been discussed at length in other issues and comments:</p>
<ol>
<li>https://github.com/astral-sh/ruff/issues/7696#issuecomment-1780479743</li>
<li>https://github.com/astral-sh/ruff/issues/9872</li>
<li>https://github.com/astral-sh/ruff/issues/14822</li>
</ol>
<p>If we supported an explicit ignore / exclude for this configuration option, I believe we could work around a lot of these issues, by banning at the project root, and selectively allowing for all other packages.</p>
<p>For example, if I have a package 'src' containing packages A and B, and I wanted to 'extend' the banned APIs to ban 'foo' from package B, I could just invert this and instead ban 'foo' at the 'src' level, and then extend this for package A to ignore 'foo' in the banned API list.</p>
<p>If this was implemented it would also solve for another common use case we have where we want to provide our own abstractions around some 3rd party dependency, so ideally we would like to ban direct imports of those packages, except in our internal package that is providing the wrapper / abstraction (e.g. <code>src.redis</code> can import <code>redis</code> directly, but no other package can).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @ntBre on 2025-06-17 17:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:55 UTC
    </footer>
</body>
</html>
