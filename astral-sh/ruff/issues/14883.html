<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>(ðŸ“š) docs for `PLW1641` `known problems` doesn't make sense - astral-sh/ruff #14883</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>(ðŸ“š) docs for <code>PLW1641</code> <code>known problems</code> doesn&#x27;t make sense</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/14883">#14883</a>
        opened by <a href="https://github.com/KotlinIsland">@KotlinIsland</a>
        on 2024-12-09 23:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/KotlinIsland">@KotlinIsland</a></div>
            <div class="timeline-body"><pre><code># Known problems
Does not check for `__hash__` implementations in superclasses.
</code></pre>
<p><code>__hash__</code> defined in a superclass doesn&#x27;t affect the semantics:</p>
<pre><code>class A:
    def __hash__(self):
        return 1

class B(A):
   def __eq__(self, other):
       return False
B.__hash__ # None
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-09 23:38</div>
            <div class="timeline-body"><p>The rule is</p>
<blockquote>
<p>Checks for classes that implement <code>__eq__</code> but not <code>__hash__</code>.</p>
</blockquote>
<p>So.. if you have this:</p>
<pre><code>class A:
    def __hash__(self):
        return 1

class B(A):
   def __eq__(self, other):
       return False
</code></pre>
<p>B implements <code>__hash__</code> via A but is not detected by Ruff.</p>
<p>What doesn&#x27;t make sense about this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2024-12-10 00:18</div>
            <div class="timeline-body"><blockquote>
<p>What doesn&#x27;t make sense about this?</p>
</blockquote>
<p>as in my OP:</p>
<pre><code>print(B.__hash__) # None
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2024-12-10 00:27</div>
            <div class="timeline-body"><blockquote>
<p>A class that overrides <a href="https://docs.python.org/3/reference/datamodel.html#object.__eq__"><strong>eq</strong>()</a> and does not define <a href="https://docs.python.org/3/reference/datamodel.html#object.__hash__"><strong>hash</strong>()</a> will have its <a href="https://docs.python.org/3/reference/datamodel.html#object.__hash__"><strong>hash</strong>()</a> implicitly set to None.</p>
</blockquote>
<p>source: <a href="https://docs.python.org/3/reference/datamodel.html#object.__hash__">https://docs.python.org/3/reference/datamodel.html#object.__hash__</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-10 00:28</div>
            <div class="timeline-body"><p>Wow, so it&#x27;s <em>just</em> when <code>__eq__</code> is defined?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-10 00:41</div>
            <div class="timeline-body"><p>@KotlinIsland sorry your OP doesn&#x27;t have inheritance</p>
<p>Interesting find though!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-10 00:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2024-12-10 01:01</div>
            <div class="timeline-body"><blockquote>
<p>sorry your OP doesn&#x27;t have inheritance</p>
</blockquote>
<p>fail...</p>
<p>i&#x27;ve updated it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-12-20 08:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-12-20 08:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:49:08 UTC
    </footer>
</body>
</html>
