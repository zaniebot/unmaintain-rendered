<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>docs: overload-with-docstring does not really explain &quot;why this is bad&quot; - astral-sh/ruff #10071</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>docs: overload-with-docstring does not really explain &quot;why this is bad&quot;</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/10071">#10071</a>
        opened by <a href="https://github.com/pawamoy">@pawamoy</a>
        on 2024-02-21 13:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/pawamoy">@pawamoy</a> on 2024-02-21 13:50</div>
            <div class="timeline-body"><p>https://docs.astral.sh/ruff/rules/overload-with-docstring/</p>
<p>Current explanation:</p>
<blockquote>
<p>The <code>@overload</code> decorator is used to define multiple compatible signatures for a given function, to support type-checking. A series of <code>@overload</code> definitions should be followed by a single non-decorated definition that contains the implementation of the function.</p>
</blockquote>
<blockquote>
<p><code>@overload</code> function definitions should not contain a docstring; instead, the docstring should be placed on the non-decorated definition that contains the implementation.</p>
</blockquote>
<p>The references at the end say nothing about docstrings in overloads:</p>
<ul>
<li><a href="https://peps.python.org/pep-0257/">PEP 257 â€“ Docstring Conventions</a></li>
<li><a href="https://docs.python.org/3/library/typing.html#typing.overload">Python documentation: typing.overload</a></li>
</ul>
<hr />
<p>To me, docstrings in overloads <em>can be</em> a bad thing, because these docstrings are lost at runtime. Therefore they cannot be displayed with <code>help(function)</code> in a REPL or in other interactive interpreters (notebooks).</p>
<p>However, in a static context (IDE, documentation tools), they <em>could</em> be a good thing: currently VSCode shows a slider with each overloaded docstring when displaying help for parameters while typing:</p>
<p><img src="https://github.com/astral-sh/ruff/assets/3999221/99d9ca00-e4cf-4dda-8859-e1530f581429" alt="vscode_overloads" />
<img src="https://github.com/astral-sh/ruff/assets/3999221/7381130b-32ff-460a-9a99-2c592ace3b48" alt="vscode_overloads2" /></p>
<p>When the docstring is written in the implementation, VSCode still shows a slider. The only thing that changes then between the popups is the function signature.</p>
<details><summary>The code if you want to test:</summary>

<pre><code class="language-python">from typing import overload


@overload
def f(a: int, b: str) -&gt; str:
    ...


@overload
def f(c: int, d: str) -&gt; str:
    ...


def f(
    a: int | None = None,
    b: str | None = None,
    c: int | None = None,
    d: str | None = None,
) -&gt; str:
    &quot;&quot;&quot;F.
    
    Args:
        a: Third.
        b: Third.
        c: Third.
        d: Third.
    &quot;&quot;&quot;
    return b or d


f()
</code></pre>
</details>

<p>Any other suggestions <em>why</em> docstrings in overloads are a good or a bad thing?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2024-02-22 02:42</div>
            <div class="timeline-body"><p>They aren't lost at runtime.</p>
<pre><code class="language-py">from typing import overload, get_overloads
@overload
def f():
    &quot;&quot;&quot;f1&quot;&quot;&quot;
@overload
def f():
    &quot;&quot;&quot;f2&quot;&quot;&quot;
def f():
    &quot;&quot;&quot;f3&quot;&quot;&quot;

for fn in get_overloads(f):
    help(fn)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pawamoy">@pawamoy</a> on 2024-02-22 09:24</div>
            <div class="timeline-body"><p>Ah, interesting, thanks! The overloads are a registered in a global registry. Then I don't have any argument for why adding docstrings to overloads is a bad thing :smile:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @MichaReiser on 2024-02-22 13:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:32:52 UTC
    </footer>
</body>
</html>
