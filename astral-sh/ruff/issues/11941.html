<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Specify custom pragmas to be ignored for line-too-long by the formatter  - astral-sh/ruff #11941</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Specify custom pragmas to be ignored for line-too-long by the formatter</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11941">#11941</a>
        opened by <a href="https://github.com/getzze">@getzze</a>
        on 2024-06-19 16:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/getzze">@getzze</a> on 2024-06-19 16:30</div>
            <div class="timeline-body"><p>Some pragma comments (for instance &quot;noqa&quot;, &quot;type&quot;, &quot;pylint&quot;) when put at the end of a long line do not trigger a reformatting of the line when running <code>ruff format</code></p>
<pre><code class="language-python">a = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;  # noqa: F401
</code></pre>
<p>with <code>line-length=80</code> this line does not get reformatted.</p>
<p>From what I could guess, the list of ignored pragmas is hard-coded in this file:
https://github.com/astral-sh/ruff/blob/main/crates/ruff_python_trivia/src/pragmas.rs</p>
<p>It would be great if we could specify our own pragmas to be ignored, for instance I would need to ignore <code># pragma: no cover</code> and <code># spellchecker</code>.</p>
<p>This line will be reformatted</p>
<pre><code class="language-python">a = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;  # pragma: no cover
</code></pre>
<p>For the linter, there is the <code>task-tags</code> option in combination with <code>ignore-overlong-task-comments=true</code>, but the name is not explicit enough and it is ignored by the formatter anyway.</p>
<p>I currently have to add an ignored pragma before to prevent reformatting:</p>
<pre><code class="language-python">a = &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;  # pylint: line-too-long  # pragma: no cover
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">formatter</span> added by @AlexWaygood on 2024-06-19 17:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @zanieb on 2024-06-19 17:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-06-20 06:01</div>
            <div class="timeline-body"><p>Yeah I think I'm open to this kind of configuration as it doesn't change the formatting itself, it just allows customizing what the formatter considers a pragma</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:13 UTC
    </footer>
</body>
</html>
