<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warning for invalid `noqa` code is only provided when related rules are selected - astral-sh/ruff #12831</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Warning for invalid `noqa` code is only provided when related rules are selected</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/12831">#12831</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2024-08-12 04:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-12 04:55</div>
            <div class="timeline-body"><p>It seems that the warning is only provided when a rule from the <code>LintSource::Noqa</code> is enabled which is unexpected (I think?):</p>
<pre><code class="language-console">❯ ruff check ~/playground/ruff/src/play.py --isolated --no-cache                                 
All checks passed!

❯ ruff check ~/playground/ruff/src/play.py --isolated --no-cache --extend-select=RUF100
warning: Invalid rule code provided to `# ruff: noqa` at /Users/dhruv/playground/ruff/src/play.py:1: HEL101
All checks passed!
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">suppression</span> added by @dhruvmanila on 2024-08-12 04:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Warning for invalid `noqa` code is only provided when `RUF100` is selected" to "Warning for invalid `noqa` code is only provided when related rules are selected" by @dhruvmanila on 2024-08-12 04:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/12811.html">astral-sh/ruff#12811</a> on 2024-08-12 04:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-12 14:34</div>
            <div class="timeline-body"><p>I didn't look closely at all but could it also be that we skip this entirely when there aren't any lint errors (but RUF100 is special since it <em>can</em> trigger when there are no other lint errors)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-12 15:54</div>
            <div class="timeline-body"><p>Yeah, we do skip it when there aren't any lint errors:</p>
<p>https://github.com/astral-sh/ruff/blob/aa8081d72eb439783acf9d956c81b9904da67d2d/crates/ruff_linter/src/linter.rs#L267-L273</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-13 15:59</div>
            <div class="timeline-body"><p>@charliermarsh Is this an expected behavior? I find it a bit confusing that we show warnings only in certain scenarios.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/16178.html">astral-sh/ruff#16178</a> on 2025-02-15 17:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dylwil3 on 2025-02-16 19:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dylwil3 on 2025-02-16 19:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../canonical/operator/pulls/1674.html">canonical/operator#1674</a> on 2025-04-09 15:42</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:13 UTC
    </footer>
</body>
</html>
