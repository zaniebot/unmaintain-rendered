<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Should `S101` be ignored in a test file? - astral-sh/ruff #714</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Should `S101` be ignored in a test file?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/714">#714</a>
        opened by <a href="https://github.com/harupy">@harupy</a>
        on 2022-11-13 00:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/harupy">@harupy</a> on 2022-11-13 00:55</div>
            <div class="timeline-body"><p>Should <code>S101</code> (assert detection) be ignored in a test file? We do use <code>assert</code> in a test file:</p>
<pre><code class="language-python"># tests/test_foo.py


def test_foo():
    assert foo() == 1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/harupy">@harupy</a> on 2022-11-13 01:03</div>
            <div class="timeline-body"><p>Another assert use case that should be considered valid:</p>
<pre><code class="language-python"># tests/utils.py: A collection of helper functions for testing

def assert_foo(x, y):
   assert x == y


def assert_bar(x, y):
   assert x != y
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andersk">@andersk</a> on 2022-11-13 01:30</div>
            <div class="timeline-body"><p>Itâ€™s hard to imagine a heuristic that would satisfy everyone here. Some people might want to forbid <code>assert</code> even in tests, in favor of test-specific methods with more useful failure output like <code>self.assertEqual(x, y)</code>.</p>
<p>But better configurability would help. In general, as we add support for more opinionated rules, it does seem inevitable that people will want to be more selective about which files to apply them in. Perhaps we could take some inspiration from the <code>overrides</code> configration sections of <a href="https://eslint.org/docs/latest/user-guide/configuring/configuration-files#how-do-overrides-work">ESLint</a> and <a href="https://mypy.readthedocs.io/en/stable/config_file.html#using-a-pyproject-toml-file">mypy</a>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/harupy">@harupy</a> on 2022-11-13 01:52</div>
            <div class="timeline-body"><blockquote>
<p>But better configurability would help</p>
</blockquote>
<p>Agree. It looks like <code>bandit</code> provides an option for specifying files where assert detection is disabled:
https://github.com/PyCQA/bandit/blob/f909a7dea9495517a8550c9b9f6a75bd286ce7e3/bandit/plugins/asserts.py#L20</p>
<pre><code>**Config Options:**

You can configure files that skip this check. This is often useful when you
use assert statements in test cases.

.. code-block:: yaml
    assert_used:
      skips: ['*_test.py', '*test_*.py']

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/harupy">@harupy</a> on 2022-11-13 01:59</div>
            <div class="timeline-body"><p>Confirmed <code>--per-file-ignores=tests/*:S101</code> can disable <code>S101</code> in files under <code>tests</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @harupy on 2022-11-13 01:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4368.html">astral-sh/ruff#4368</a> on 2023-05-11 09:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:48 UTC
    </footer>
</body>
</html>
