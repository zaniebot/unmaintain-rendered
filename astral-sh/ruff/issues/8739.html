<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Q003 autofix for triple nested quotes is not valid python code - astral-sh/ruff #8739</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Q003 autofix for triple nested quotes is not valid python code</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/8739">#8739</a>
        opened by <a href="https://github.com/dragon-dxw">@dragon-dxw</a>
        on 2023-11-17 11:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dragon-dxw">@dragon-dxw</a></div>
            <div class="timeline-body"><p>Version: 0.1.5
input:
<code>msg = f&quot;Document \&quot;{context['document'].name}\&quot; does not have a PDF.&quot;</code>
error [no args, invoked by precommit]:
<code>judgments/views/document_full_text.py:38:19: Q003 [*] Change outer quotes to avoid escaping inner quotes</code>
autofix via <code>--fix</code> [via precommit]
<code>msg = f'Document &quot;{context['document'].name}&quot; does not have a PDF.'</code>
which is not valid python</p>
<p>ruff config: https://github.com/nationalarchives/ds-caselaw-editor-ui/blob/chore/test-factory-improvements/pyproject.toml</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Q003 autofix not valid python" to "Q003 autofix is not valid python code" by @dragon-dxw on 2023-11-17 11:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Q003 autofix is not valid python code" to "Q003 autofix for triple nested quotes is not valid python code" by @dragon-dxw on 2023-11-17 12:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-11-17 16:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sciyoshi">@sciyoshi</a> on 2023-11-23 14:06</div>
            <div class="timeline-body"><p>@dragon-dxw the fixed version is in fact <a href="https://docs.python.org/3.12/whatsnew/3.12.html#pep-701-syntactic-formalization-of-f-strings">valid syntax in Python 3.12</a>. If you set the target Python version to 3.11 or lower in your configuration using <code>target-version</code>, this should no longer be marked as an error. See https://github.com/astral-sh/ruff/pull/7588</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-24 15:32</div>
            <div class="timeline-body"><p>Yeah, in my testing this seems to be correctly detected based on the Python version. Do you mind testing if your Python version is set to Python 3.12? Happy to revisit if we're able to reproduce with a lower target-version.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-11-24 15:32</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 16:49:03 UTC
    </footer>
</body>
</html>
