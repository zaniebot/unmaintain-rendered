<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ensure Google-style docstring lines end in a correct character - astral-sh/ruff #16930</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ensure Google-style docstring lines end in a correct character</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/16930">#16930</a>
        opened by <a href="https://github.com/gtkacz">@gtkacz</a>
        on 2025-03-23 23:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/gtkacz">@gtkacz</a> on 2025-03-23 23:28</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>From the official <a href="https://google.github.io/styleguide/pyguide.html#38-comments-and-docstrings">Google Python style guide on docstrings</a>:</p>
<blockquote>
<p>A docstring should [...] [be] terminated by a period, question mark, or exclamation point.</p>
</blockquote>
<p>Furthermore, in every example from the <a href="https://google.github.io/styleguide/pyguide.html#383-functions-and-methods">&quot;functions and methods&quot; section</a> all of the &quot;Args&quot;, &quot;Returns&quot;, and &quot;Raises&quot; line items end with a full stop (<code>.</code>).</p>
<p>I propose that two new rules be created:</p>
<ol>
<li><code>google-docstring-text-ends-in-correct-character</code>: Ensure that in every Google-style docstring, the summary and description portions of the docstring end in one of the proposed characters (<code>.</code>, <code>?</code>, <code>!</code>).</li>
<li><code>google-docstring-line-items-end-in-fullstop</code>: Ensure that in every Google-style docstring, all of the &quot;Args&quot;, &quot;Returns&quot;, and &quot;Raises&quot; line items end with a full stop (<code>.</code>).</li>
</ol>
<p>These should only be enforced if the <code>google</code> convention is active.</p>
<p>If these already exist, I'm sorry, I couldn't find them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rule</span> added by @ntBre on 2025-03-24 14:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-03-27 20:10</div>
            <div class="timeline-body"><p><a href="https://docs.astral.sh/ruff/rules/missing-terminal-punctuation/">D415</a> already tests that the summary ends in a punctuation. Enforcing that the description ends in a punctuation is more challenging because it can contain arbitrary content. For example the following example from the google style guide doesn't end in a period.</p>
<pre><code class="language-py">&quot;&quot;&quot;A one-line summary of the module or program, terminated by a period.

Leave one blank line.  The rest of this docstring should contain an
overall description of the module or program.  Optionally, it may also
contain a brief description of exported classes and functions and/or usage
examples.

Typical usage example:

foo = ClassFoo()
bar = foo.function_bar()
&quot;&quot;&quot;
</code></pre>
<p>The same problem exists for <code>Returns</code>, <code>Args</code> etc. sections. E.g, not every line in this example from the google style guide ends in a period.</p>
<pre><code class="language-py">def fetch_smalltable_rows(
    table_handle: smalltable.Table,
    keys: Sequence[bytes | str],
    require_all_keys: bool = False,
) -&gt; Mapping[bytes, tuple[str, ...]]:
    &quot;&quot;&quot;Fetches rows from a Smalltable.

    Retrieves rows pertaining to the given keys from the Table instance
    represented by table_handle.  String keys will be UTF-8 encoded.

    Args:
        table_handle: An open smalltable.Table instance.
        keys: A sequence of strings representing the key of each table
          row to fetch.  String keys will be UTF-8 encoded.
        require_all_keys: If True only rows with values set for all keys will be
          returned.

    Returns:
        A dict mapping keys to the corresponding table row data
        fetched. Each row is represented as a tuple of strings. For
        example:

        {b'Serak': ('Rigel VII', 'Preparer'),
         b'Zim': ('Irk', 'Invader'),
         b'Lrrr': ('Omicron Persei 8', 'Emperor')}

        Returned keys are always bytes.  If a key from the keys argument is
        missing from the dictionary, then that row was not found in the
        table (and require_all_keys must have been False).

    Raises:
        IOError: An error occurred accessing the smalltable.
    &quot;&quot;&quot;
</code></pre>
<p>There's also the chance that a section ends in an example, which doesn't necessarily get terminated with a period.</p>
<p>I don't think we should add such rules because there's no clear heuristic that doesn't lead to too many false positives.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-03-27 20:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:17 UTC
    </footer>
</body>
</html>
