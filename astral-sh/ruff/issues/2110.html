<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Difficult to discover existing rules - astral-sh/ruff #2110</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Difficult to discover existing rules</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2110">#2110</a>
        opened by <a href="https://github.com/brianmego">@brianmego</a>
        on 2023-01-23 17:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/brianmego">@brianmego</a></div>
            <div class="timeline-body"><p>First off, thank you so much for building and maintaining this repo. My team and I discovered it last week and got so excited we independently went home and started contributing the same feature to it over the weekend. We also ran into the same stumbling block, which seemed worth reporting.</p>
<p>In particular, we wanted to ensure ruff could run pylint rule W0102. Turns out this is already implemented (as B006), but we both missed it and burned a few hours reimplementing it before realizing it. Here&#x27;s the steps we took that led to that unfortunate miss:</p>
<ol>
<li>We grepped the codebase for 0102 and &#x27;default-value&#x27; and did not find anything.</li>
<li>We searched the issues for the same and discovered <a href="https://github.com/charliermarsh/ruff/issues/970">charliermarsh/ruff#970</a>, which stated it was already implemented, but as we couldn&#x27;t find where, we both assumed it was a misprint.</li>
<li>We cloned the repo and went through the CONTRIBUTING.md to add the new feature (super well put together. Thanks!)</li>
<li>We both named our new rule PLW0102, and tested it with <code>--select=PLW0102</code>, which worked great.</li>
<li>We both tried to test it without the specific select rule, and it wasn&#x27;t running. This led to the discovery that not all rules are on by default, which makes sense. And then, on running <code>--select=ALL</code>, noticed that lo and behold, both PLW0102 <em>and</em> B006 were matching our test line.</li>
</ol>
<p>Neither of us regret the time we spent learning the codebase and are only excited to contribute in other ways, but perhaps there&#x27;s something that could be done to avoid the above steps for the next contributor.</p>
<p>Some ideas (B006 used as example, but would affect all rules)</p>
<ul>
<li>A mapping file that states B006 a.k.a. pylint W0102</li>
<li>The current Comment of <code>///B006</code> in the rule definition could instead be <code>///B006 (pylint W0102)</code></li>
<li>Updating the pylint issue above to keep track of the mapping.</li>
<li>Updating the <code>define_violation</code> macro to optionally take aliases for a rule.</li>
</ul>
<p>This is just a start to the discussion. if you are interested in any of these in particular, we would love to help make it a reality.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-23 17:27</div>
            <div class="timeline-body"><p>Gah, I&#x27;m so sorry that you burned time on this!</p>
<p>This is definitely a problem and, as you note, it&#x27;s not confined to W0102. We&#x27;re getting close to enabling rule aliases -- so, e.g., we would map both <code>PLW0102</code> and <code>B006</code> to the same underlying rule, and users could select either of them (similar to what you suggest with that last bullet). There are a few details to figure out, like what happens if you enable both rules... but we&#x27;ve done a bunch of internal refactors to make it possible (\cc @not-my-profile).</p>
<p>In the meantime, though, I think a minimally responsible thing to do would be to amend the Pylint issues to make this mapping clear (again, as you suggest!). There are a bunch of other rules that are checked off in that issue that are actually implemented as non-<code>PL</code> rules. (In general, the project is more closely aligned with Flake8 and its plugins than Pylint, so if a rule exists in Pylint and elsewhere, we tend to use the Flake8 code and terminology.)</p>
<p>I will try to get to that today, but lets use this issue to track updating that <em>other</em> issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-23 17:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/not-my-profile">@not-my-profile</a> on 2023-01-23 17:29</div>
            <div class="timeline-body"><p>Thanks for bringing this up. We are well aware that a many to many mapping between codes and rules is currently really lacking and I have been working on getting that implemented ... it&#x27;s very much my current top priority in ruff.</p>
<p>I already have a concrete idea on how to implement that ... I think the only refactor that&#x27;s still blocking the implementation is #2103, after that has been merged I&#x27;ll work on the PR to implement the many to many mapping :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-26 04:27</div>
            <div class="timeline-body"><p>(As a follow-up: it took me a few days, but I went through and mapped all the checked-off rules in #970 to their Ruff equivalents.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brianmego">@brianmego</a> on 2023-01-27 03:38</div>
            <div class="timeline-body"><p>Rock on. I think in line with your previous intent, we can close this one. Thanks for making it clearer and look forward to contributing in the future!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/brianmego">@brianmego</a> on 2023-01-27 03:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-27 03:42</div>
            <div class="timeline-body"><p>Awesome! ðŸŽ¸ ðŸŽ¸ ðŸŽ¸</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:30 UTC
    </footer>
</body>
</html>
