<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No feedback when an error occurs in the server in certain cases - astral-sh/ruff #12572</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>No feedback when an error occurs in the server in certain cases</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/ruff/issues/12572">#12572</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2024-07-30 02:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-07-30 02:27</div>
            <div class="timeline-body"><p>With the way the tracing system is set in the server, there's no feedback provided to the user if an error occurs in certain cases. This is the case because for every <code>tracing::error</code> expression, we also require to send a request to display the message like:</p>
<p>https://github.com/astral-sh/ruff/blob/7571da877811100d88fd0a33c933835d05c7c2e4/crates/ruff_server/src/server/api/requests/execute_command.rs#L129-L130</p>
<p>But, it's missing in a few cases. For example, if the path specified in <code>ruff.configuration</code> is invalid, the user won't know that:</p>
<p>https://github.com/astral-sh/ruff/blob/7571da877811100d88fd0a33c933835d05c7c2e4/crates/ruff_server/src/session/index/ruff_settings.rs#L288-L291</p>
<p>Related to https://github.com/astral-sh/ruff/issues/12523</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @dhruvmanila on 2024-07-30 02:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-09 13:41</div>
            <div class="timeline-body"><p>I looked at this and I think the reason this error message isn't displayed is because this code gets executed many number of times while building the settings index. We could either introduce a macro like <code>show_err_msg_once</code> but the logs would still contain multiple entries.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @dhruvmanila by @dhruvmanila on 2025-01-15 07:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/15494.html">astral-sh/ruff#15494</a> on 2025-01-15 12:42</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:53 UTC
    </footer>
</body>
</html>
