<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discrepancies between ``isort`` and Ruff's ``I`` lint check - astral-sh/ruff #1718</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Discrepancies between <code>isort</code> and Ruff&#x27;s <code>I</code> lint check</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/1718">#1718</a>
        opened by <a href="https://github.com/AA-Turner">@AA-Turner</a>
        on 2023-01-07 18:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AA-Turner">@AA-Turner</a></div>
            <div class="timeline-body"><p>It seems Ruff expects a space after <code>isort:skip</code> (i.e. Ruff wants <code>isort: skip</code>), and Ruff seems to ignore F401 for the purposes of import sorting, whereas <code>isort</code> honours them as skip markers(?).</p>
<p>Ruff also reports 1 error in the initial call, yet the <code>--diff</code> call reports three errors.</p>
<p>Ruff version 213; isort version 5.11.4</p>
<p>Sample file:</p>
<pre><code>(sphinx) PS I:\Development\sphinx&gt; type bug.py            
from operator import add  # noqa: F401
from operator import sub  # noqa: F401

from math import pi  # noqa: F401  isort:skip
from math import e  # noqa: F401  isort:skip

from string import (  # noqa: E402  # isort:skip
    ascii_lowercase
)

from pprint import pprint  # isort:skip
(sphinx) PS I:\Development\sphinx&gt; isort bug.py           
(sphinx) PS I:\Development\sphinx&gt; ruff bug.py --select I
bug.py:1:1: I001 Import block is un-sorted or un-formatted
Found 1 error(s).
1 potentially fixable with the --fix option.
(sphinx) PS I:\Development\sphinx&gt; ruff bug.py --diff    
--- bug.py
+++ bug.py
@@ -1,11 +1,8 @@
-from operator import add  # noqa: F401
-from operator import sub  # noqa: F401
-
-from math import pi  # noqa: F401  isort:skip
-from math import e  # noqa: F401  isort:skip
-
-from string import (  # noqa: E402  # isort:skip
-    ascii_lowercase
+from math import (
+    e,  # noqa: F401  isort:skip
+    pi,  # noqa: F401  isort:skip
+)
+from operator import (
+    add,  # noqa: F401
+    sub,  # noqa: F401
 )
-
-from pprint import pprint  # isort:skip

Would fix 3 error(s).
(sphinx) PS I:\Development\sphinx&gt; ruff -V           
ruff 0.0.213
(sphinx) PS I:\Development\sphinx&gt; 
</code></pre>
<p>A</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">isort</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 20:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 20:34</div>
            <div class="timeline-body"><p>Yeah this was sort of a known thing when I implemented it, but maybe that was a bad decision. (Both Ruff and isort should respect the version with the space, but Ruff doesn&#x27;t respect the version without the space, IIUC.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 22:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 22:30</div>
            <div class="timeline-body"><p>I fixed the <code># isort:skip</code> part. Will look at the error count too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AA-Turner">@AA-Turner</a> on 2023-01-07 22:31</div>
            <div class="timeline-body"><p>Thanks for the quick fix!</p>
<p>A</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 22:32</div>
            <div class="timeline-body"><p>When you ran <code>ruff bug.py --diff </code>, what other error codes were enabled? (Since there&#x27;s no <code>--select I</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AA-Turner">@AA-Turner</a> on 2023-01-07 22:43</div>
            <div class="timeline-body"><p>Ahh, sorry:</p>
<p><code>tool.ruff.select</code>:</p>
<pre><code>
select = [
    &quot;E&quot;,   # pycodestyle
    &quot;F&quot;,   # Pyflakes
    &quot;W&quot;,   # pycodestyle
    # plugins:
    &quot;B&quot;,   # flake8-bugbear
    &quot;C4&quot;,  # flake8-comprehensions
    &quot;PGH&quot;, # pygrep-hooks
    &quot;PLC&quot;, # pylint
    &quot;PLE&quot;, # pylint
    &quot;PLR&quot;, # pylint
    &quot;PLW&quot;, # pylint
    &quot;S&quot;,   # flake8-bandit
    &quot;SIM&quot;, # flake8-simplify
    &quot;T10&quot;, # flake8-debugger
    &quot;UP&quot;,  # pyupgrade
    &quot;RUF100&quot;,  # yesqa
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AA-Turner">@AA-Turner</a> on 2023-01-07 22:49</div>
            <div class="timeline-body">
Full Ruff section:

<pre><code>
[tool.ruff]
target-version = &quot;py38&quot;  # Pin Ruff to Python 3.8
line-length = 95
exclude = [
    &#x27;.git&#x27;,
    &#x27;.tox&#x27;,
    &#x27;.venv&#x27;,
    &#x27;tests/roots/*&#x27;,
    &#x27;build/*&#x27;,
    &#x27;doc/_build/*&#x27;,
    &#x27;sphinx/search/*&#x27;,
    &#x27;doc/usage/extensions/example*.py&#x27;,
]
ignore = [
    # pycodestyle
    &#x27;E741&#x27;,
    # flake8-bugbear
    &#x27;B006&#x27;,
    &#x27;B023&#x27;,
    # flake8-bugbear opinionated (disabled by default in flake8)
    &#x27;B904&#x27;,
    &#x27;B905&#x27;,
    # pygrep-hooks
    &quot;PGH003&quot;,
    # flake8-bandit
    &quot;S101&quot;,  # assert used
    &quot;S105&quot;,  # possible hardcoded password
    &quot;S113&quot;,  # probable use of requests call without timeout
    &quot;S324&quot;,  # probable use of insecure hash functions
    # flake8-simplify
    &quot;SIM102&quot;, # nested &#x27;if&#x27; statements
    &quot;SIM103&quot;, # return condition directly
    &quot;SIM105&quot;, # use contextlib.suppress
    &quot;SIM108&quot;, # use ternary operator
    &quot;SIM117&quot;, # use single &#x27;with&#x27; statement
]
external = [  # Whitelist for RUF100 unkown code warnings
    &quot;E704&quot;,
    &quot;W291&quot;,
    &quot;W293&quot;,
    &quot;SIM110&quot;,
    &quot;SIM113&quot;,
]
select = [
    &quot;E&quot;,   # pycodestyle
    &quot;F&quot;,   # Pyflakes
    &quot;W&quot;,   # pycodestyle
    # plugins:
    &quot;B&quot;,   # flake8-bugbear
    &quot;C4&quot;,  # flake8-comprehensions
    &quot;PGH&quot;, # pygrep-hooks
    &quot;PLC&quot;, # pylint
    &quot;PLE&quot;, # pylint
    &quot;PLR&quot;, # pylint
    &quot;PLW&quot;, # pylint
    &quot;S&quot;,   # flake8-bandit
    &quot;SIM&quot;, # flake8-simplify
    &quot;T10&quot;, # flake8-debugger
    &quot;UP&quot;,  # pyupgrade
    &quot;RUF100&quot;,  # yesqa
]
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AA-Turner">@AA-Turner</a> on 2023-01-07 22:51</div>
            <div class="timeline-body"><blockquote>
<p>When you ran <code>ruff bug.py --diff </code>, what other error codes were enabled? (Since there&#x27;s no <code>--select I</code>.)</p>
</blockquote>
<p><code>flake8</code>&#x27;s <code>--isolated</code> would be useful in general for bug reporting, as it means hidden config state can&#x27;t affect the output of Ruff -- I reached for it the first few times I wanted to report a bug but it doesn&#x27;t exist (yet!).</p>
<p>A</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 22:53</div>
            <div class="timeline-body"><p>Would that force Ruff to use the default settings (+ whatever&#x27;s passed in on the command-line)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 22:53</div>
            <div class="timeline-body"><p>Ahh cool. Yes, seeing that now in Flake8. That would be straightforward to support.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 22:54</div>
            <div class="timeline-body"><p>Tracking here: <a href="https://github.com/charliermarsh/ruff/issues/1724">charliermarsh/ruff#1724</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-07 22:54</div>
            <div class="timeline-body"><p>With regards to the above: I&#x27;m just gonna chalk it up to Ruff fixing other errors (like the unused <code>pprint</code>) for now. If you see other confusing behavior, feel free to open another issue :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AA-Turner">@AA-Turner</a> on 2023-01-07 22:56</div>
            <div class="timeline-body"><p>Brilliant, thank you!</p>
<p>A</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:29 UTC
    </footer>
</body>
</html>
