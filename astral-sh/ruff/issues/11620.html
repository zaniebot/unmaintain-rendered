<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruff should follow imported notebooks via %run magic - astral-sh/ruff #11620</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ruff should follow imported notebooks via %run magic</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/11620">#11620</a>
        opened by <a href="https://github.com/djoshea">@djoshea</a>
        on 2024-05-30 15:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/djoshea">@djoshea</a></div>
            <div class="timeline-body"><p>I&#x27;m working on jupyter notebooks in VSCode, and I have been modularizing the long preambles by putting a bunch of imports into a <code>preamble.ipynb</code> notebook, and then running this in my <code>main.ipynb</code> notebook via</p>
<pre><code>%run preamble.ipynb
</code></pre>
<p>This works well, but Ruff doesn&#x27;t look at the code in the preamble when it lints the main notebook. A simple example would be to have <code>preamble.ipynb</code> contain the cell:</p>
<pre><code>import sys
</code></pre>
<p>And <code>main.ipynb</code> contains two cells:</p>
<pre><code>%run preamble.ipynb
</code></pre>
<p>and</p>
<pre><code>sys.path.append(...)
</code></pre>
<p>Then I get an &quot;Undefined name <code>sys</code> Ruff (F821)&quot; linting error.</p>
<p>Would it be possible to enable an option to have ruff follow these %run style imports? Or to avoid the X/Y problem, is there a better way to deal with modularizing a long list of imports in my development notebooks that plays well with Ruff?</p>
<p>Thanks!</p>
<p>Keywords: &quot;%run magic&quot; &quot;follow imported notebook&quot; &quot;preamble&quot;
Ruff version: v2024.22.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-05-30 16:12</div>
            <div class="timeline-body"><p>There&#x27;s some context on why supporting <code>run</code> isn&#x27;t feasible today in <a href="https://github.com/astral-sh/ruff/issues/9644">astral-sh/ruff#9644</a>. We may support it in the future when we support multifile analysis.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2024-05-30 16:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:53 UTC
    </footer>
</body>
</html>
