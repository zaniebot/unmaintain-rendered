<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D105 appears on overload definitions - astral-sh/ruff #20116</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>D105 appears on overload definitions</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/20116">#20116</a>
        opened by <a href="https://github.com/rwb27">@rwb27</a>
        on 2025-08-27 16:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/rwb27">@rwb27</a> on 2025-08-27 16:00</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I have some descriptor definitions where <code>__get__</code> is overloaded (because its return type is <code>Self</code> when accessed on the class, but something else otherwise). With the <code>D</code> ruleset enabled, I get a <code>D105</code> on each overload definition.</p>
<p>I thought the convention was that overloads didn't get individual docstrings, so I wonder if this might need some sort of exception?</p>
<pre><code class="language-python">
class MyDescriptor:

    @overload
    def __get__(self, obj: Thing, type: type | None = None) -&gt; Value: ...  # noqa: D105

    @overload
    def __get__(self, obj: None, type: type) -&gt; Self: ...  # noqa: D105

    def __get__(self, obj: Thing | None, type: type | None = None) -&gt; Value | Self:
        &quot;&quot;&quot;Return the value or the descriptor, as per `property`.

        If ``obj`` is ``None`` (i.e. the descriptor is accessed as a class attribute),
        we return the descriptor, i.e. ``self``.

        If ``obj`` is not ``None``, we return a value. To remove the need for this
        boilerplate in every subclass, we will call ``__instance_get__`` to get the
        value.

        :param obj: the `.Thing` instance to which we are attached.
        :param type: the `.Thing` subclass on which we are defined.

        :return: the value of the descriptor returned from ``__instance_get__`` when
            accessed on an instance, or the descriptor object if accessed on a class.
        &quot;&quot;&quot;
        if obj is not None:
            return self.instance_get(obj)
        return self
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-27 17:00</div>
            <div class="timeline-body"><p>Do you have <code>@overload</code> imported somewhere? I see some overload checking in the rule implementation, and the errors seem to clear up in the <a href="https://play.ruff.rs/acb227d1-8382-4f71-a044-c89d23fc1a90">playground</a> when I add the import and remove the noqa comments in your example!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @ntBre on 2025-08-27 17:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rwb27">@rwb27</a> on 2025-08-28 08:20</div>
            <div class="timeline-body"><p>ah sorry, I didn't paste in that bit. <code>overload</code> is imported from <code>typing</code>:</p>
<pre><code class="language-python">from typing import overload, Generic, Mapping, TypeVar, TYPE_CHECKING
</code></pre>
<p>I have just tried it again, and I think the problem is me - sorry! <code>D105</code> was at some point being checked both by ruff and by the <code>pydocstyle</code> flake8 plugin. I think I got confused, and it was the flake8 plugin that fired spuriously on the overloads. Sorry to have trespassed on your time, and thanks so much for your help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @rwb27 on 2025-08-28 08:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../labthings/labthings-fastapi/pulls/180.html">labthings/labthings-fastapi#180</a> on 2025-08-28 11:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-08-28 12:48</div>
            <div class="timeline-body"><p>No problem, glad it's working now!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:16 UTC
    </footer>
</body>
</html>
