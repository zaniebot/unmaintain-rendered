<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Question] is it possible to run ruff only on edited lines of a branch/commit? - astral-sh/ruff #2472</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Question] is it possible to run ruff only on edited lines of a branch/commit?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2472">#2472</a>
        opened by <a href="https://github.com/tharwan">@tharwan</a>
        on 2023-02-02 12:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tharwan">@tharwan</a></div>
            <div class="timeline-body">

<p>Similar to the what darker does for black, it would be very nice for introducing ruff to a code base to only apply it to changed lines.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-02 13:06</div>
            <div class="timeline-body"><p>Hey! It&#x27;s not possible right now -- some things like this have come up in #1149, #1931, #2189. I&#x27;m hesitant to support it since it&#x27;s a hard feature to get right. I haven&#x27;t used <code>darker</code>, but the problem with applying that methodology to Ruff (IIUC) is that unlike code formatting, linter errors are not always localized: you could remove an import from one part of the file, and it could cause an error in an unchanged part of the file.</p>
<p>One alternative (not what you&#x27;re looking for, but thought I&#x27;d mention it) is that you can run <code>ruff --add-noqa /path/to/file.py</code> and it will add <code>noqa</code> suppressions to any lines that fail. I know this won&#x27;t work in all cases, but it&#x27;s an option.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-02 13:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-02 13:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tharwan">@tharwan</a> on 2023-02-02 13:24</div>
            <div class="timeline-body"><p>Thanks for the quick reply! I guess another option would be to include all files touched by  a commit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-02-02 13:40</div>
            <div class="timeline-body"><p>Yeah definitely! Although I feel like there are probably ways to do that via Git commands and piping, and if they&#x27;re workable, it&#x27;s a bit easier than building logic into Ruff.</p>
<p>In Flake8, they suggest this as an alternative to their <code>--diff</code> functionality which was deprecated:</p>
<pre><code>git diff --name-only -z --diff-filter=d -- &#x27;*.py&#x27; | xargs -0 flake8 or utilize pre-commit run --from-ref=... --to-ref=...
</code></pre>
<p>But I haven&#x27;t tried it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/itolosa">@itolosa</a> on 2024-01-05 20:31</div>
            <div class="timeline-body"><p>I guess another brute force solution would be to run ruff before and after the changes and in some sort do a set difference:</p>
<p>introducedErrors = errorsAfter - errorsBefore</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/victor-varjo">@victor-varjo</a> on 2025-03-28 13:09</div>
            <div class="timeline-body"><blockquote>
<p>I guess another brute force solution would be to run ruff before and after the changes and in some sort do a set difference:</p>
<p>introducedErrors = errorsAfter - errorsBefore</p>
</blockquote>
<p>And make it aware of file renames.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:31 UTC
    </footer>
</body>
</html>
