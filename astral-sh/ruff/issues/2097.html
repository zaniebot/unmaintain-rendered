<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Implement `flake8-use-fstring` - astral-sh/ruff #2097</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Implement <code>flake8-use-fstring</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/2097">#2097</a>
        opened by <a href="https://github.com/Secrus">@Secrus</a>
        on 2023-01-22 22:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Secrus">@Secrus</a></div>
            <div class="timeline-body"><p>https://github.com/MichaelKim0407/flake8-use-fstring</p>
<ul>
<li><p><code>FS001</code>: <code>%</code> formatting is used.</p>
</li>
<li><p><code>FS002</code>: <code>.format</code> formatting is used.</p>
</li>
<li><p><code>FS003</code>: f-string missing prefix (ignored by default).</p>
</li>
</ul>
<p>Config options:
<code>--percent-greedy</code>, <code>--format-greedy</code></p>
<ul>
<li><p>Level 0 (default): only report error if the value before <code>%</code> or <code>.format</code> is a string literal.</p>
</li>
<li><p>Level 1: report error if a string literal appears before <code>%</code> or <code>.format</code> anywhere in the statement.</p>
</li>
<li><p>Level 2: report any usage of <code>%</code> or <code>.format</code>.</p>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-23 00:18</div>
            <div class="timeline-body"><p>I believe we support FS001 and FS002, at least partially, as UP031 and UP032, which also automatically upgrade <code>%</code> strings to <code>.format</code> strings, and <code>.format</code> strings to f-strings.</p>
<p>(I say &quot;partially&quot;, because it doesn&#x27;t flag <em>every</em> usage of <code>%</code> and <code>.format</code> strings -- it omits some cases depending on formatting.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">plugin</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-23 00:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-23 01:42</div>
            <div class="timeline-body"><p>We could change UP031 and UP032 to <em>always</em> flag those string formatting methods, even if they can&#x27;t fix them. That&#x27;d be one way to close out this issue. But it&#x27;s a bit of a behavior change for those rules.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Secrus">@Secrus</a> on 2023-01-25 20:36</div>
            <div class="timeline-body"><p>Let me test how it works right now, looking at the rules description, it might actually be enough.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-25 20:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-01-30 22:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/martinhoyer">@martinhoyer</a> on 2023-04-24 14:40</div>
            <div class="timeline-body"><p>@charliermarsh Sorry for necro&#x27;ing a closed issue - just want to mention that in my recent usage, UP032 did indeed left some <code>.format()</code>s, which are a bit more complex then just already assigned variable(s).<br>
I&#x27;m thinking an opt-in option in settings for it to flag them, even though auto-fix is not available could be nice?<br>
Might include comment, like &quot;consider adding helper variable for complex formatting before using it in f-string&quot;</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 18:48:30 UTC
    </footer>
</body>
</html>
