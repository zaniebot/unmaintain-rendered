<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unspecific error message from tiny typo - astral-sh/ruff #13022</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Unspecific error message from tiny typo</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ruff/issues/13022">#13022</a>
        opened by <a href="https://github.com/turkishmaid">@turkishmaid</a>
        on 2024-08-21 05:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/turkishmaid">@turkishmaid</a> on 2024-08-21 05:59</div>
            <div class="timeline-body"><p>Using Ruff 0.6.1 as native server in VSCode 1.92.1, Ruff extension v2024.42.0, on MacOS 14.4 (but I guess all of that is irrelevant).</p>
<p>With a tiny typo like this in the <code>ruff.toml</code></p>
<pre><code class="language-toml">[lint]
ignore = [
## typo, should be &quot;EM102&quot;
  &quot;ME102&quot;, # f-string in exception
]
select = [&quot;ALL&quot;, &quot;TD006&quot;, &quot;TD007&quot;, &quot;FIX&quot;]
</code></pre>
<p>I am shown some unspecific Ruff error popup referring to the logs:</p>
<blockquote>
<p>Error while resolving settings from workspace /(redacted). Please refer to the logs for more details.
Source: Ruff</p>
</blockquote>
<p>Unfortunately, in the logs there is no trace of the actual issue:</p>
<p><img src="https://github.com/user-attachments/assets/eb15e76a-bd5c-42c6-90d2-f9ed717ef93a" alt="image" /></p>
<p>Took me ages to find out and I was only successful when I commented out the whole <code>ruff.toml</code> and added it back line by line.</p>
<p>Would it be possible to have a message like so instead? In the popup if that is possible, or at least in the Ruff output...</p>
<blockquote>
<p>ruff.toml(/path): line 12: [lint.ignore]: &quot;ME102&quot; is not a valid rule</p>
</blockquote>
<p>Even better would be when Ruff would lint its own settings and issue warnings about incorrect or deprecated settings in <code>ruff.toml</code> or  <code>pyproject.toml</code>.</p>
<p>Else: Great tool. Love lightning fast linting. Sometimes I create an issue deliberately just to see it pop up üòÅ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @MichaReiser on 2024-08-21 06:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @dhruvmanila by @MichaReiser on 2024-08-21 09:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-21 09:25</div>
            <div class="timeline-body"><p>Can you try turning on the server log messages via https://docs.astral.sh/ruff/editors/settings/#traceserver ?</p>
<pre><code class="language-json">{
    &quot;ruff.trace.server&quot;: &quot;messages&quot;
}
</code></pre>
<p>You should then see the log messages in the output channel.</p>
<p>I agree that this is a bit annoying that the notification suggests to refer to the log messages but there won't be any until the user turns them on. This relates to https://github.com/astral-sh/ruff/issues/12523.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2024-08-21 09:32</div>
            <div class="timeline-body"><p>Regardless, I don't see any specific location in the message:</p>
<pre><code>2024-08-21 14:57:09.926 [info] [Trace - 2:57:09 PM]   29.078199584s ERROR ThreadId(42) ruff_server::session::index::ruff_settings: Failed to parse /Users/dhruv/playground/ruff/pyproject.toml
</code></pre>
<p>Although it is visible when I run it from the command-line:</p>
<pre><code class="language-console">‚ùØ ruff check .                         
ruff failed
  Cause: Failed to parse /Users/dhruv/playground/ruff/pyproject.toml
  Cause: TOML parse error at line 1, column 1
  |
1 | [tool.ruff.lint]
  | ^^^^^^^^^^^^^^^^
Unknown rule selector: `ME102`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2024-08-21 10:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2024-08-21 10:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:34:52 UTC
    </footer>
</body>
</html>
