<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>False positive F821 (Undefined name) for NamedTuple - astral-sh/ruff #8803</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>False positive F821 (Undefined name) for NamedTuple</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/8803">#8803</a>
        opened by <a href="https://github.com/cbeytas">@cbeytas</a>
        on 2023-11-21 07:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/cbeytas">@cbeytas</a> on 2023-11-21 07:46</div>
            <div class="timeline-body"><p>ruff 0.1.6, Python 3.11</p>
<pre><code class="language-python">import typing
User = typing.NamedTuple('User', **{'name': str, 'password': bytes})
User = typing.NamedTuple('User', name=str, password=bytes)
User = typing.NamedTuple('User', [('name', str), ('password', bytes)])
</code></pre>
<p>Those namedtuples should all be functionally equivalent. Why is F821 flagged on the first one?</p>
<pre><code>ruff test.py --isolated
test.py:2:38: F821 Undefined name `name`
test.py:2:51: F821 Undefined name `password`
Found 2 errors.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2023-11-21 11:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-11-21 12:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tmke8">@tmke8</a> on 2023-11-21 12:55</div>
            <div class="timeline-body"><p>Worth noting maybe that the syntax used in the first two lines has been deprecated in Python 3.13:</p>
<blockquote>
<p><em>Deprecated since version 3.13, will be removed in version 3.15:</em> The undocumented keyword argument syntax for creating NamedTuple classes (<code>NT = NamedTuple(&quot;NT&quot;, x=int)</code>) is deprecated, and will be disallowed in 3.15. Use the class-based syntax or the functional syntax instead.</p>
</blockquote>
<p>https://docs.python.org/3.13/library/typing.html#typing.NamedTuple</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/8810.html">astral-sh/ruff#8810</a> on 2023-11-21 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-11-21 19:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:52 UTC
    </footer>
</body>
</html>
