<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G001 doesn't detect current_app.logger for Flask - astral-sh/ruff #4251</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>G001 doesn't detect current_app.logger for Flask</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/ruff/issues/4251">#4251</a>
        opened by <a href="https://github.com/samuelhwilliams">@samuelhwilliams</a>
        on 2023-05-06 06:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/samuelhwilliams">@samuelhwilliams</a> on 2023-05-06 06:12</div>
            <div class="timeline-body"><p>Ruff version: 0.0.264</p>
<p>I've started using Ruff on a few Flask projects and after turning on the G linter (flake8-logging-format) have noticed that Ruff doesn't report on formatting violations inside <code>current_app.logger</code> calls.</p>
<p>Having done a quick dig around Ruff I suspect this is the thing that would need updating: https://github.com/charliermarsh/ruff/blob/11e1380df412cd18eb8f6001e6164195bf90436b/crates/ruff_python_semantic/src/analyze/logging.rs#L19</p>
<p>Example <code>app.py</code> (<a href="https://github.com/samuelhwilliams/test_ruff_flask_logger">git repo here</a>):
<img width="544" alt="image" src="https://user-images.githubusercontent.com/2920760/236605760-9edc70cc-45a4-4479-a67c-e82ef2ed18fb.png"></p>
<p>Validate:</p>
<pre><code class="language-bash">$ sam:~/work/test_ruff_flask_logger [main]$ ruff check .
app.py:11:17: G001 Logging statement uses `string.format()`
Found 1 error.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2023-05-06 07:03</div>
            <div class="timeline-body"><p>This can be supported easily. I think even <code>app.logger.info</code> works, right? The latter would be hard to detect as there's no type inference yet.</p>
<p>Let me create a quick PR for the main issue :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4253.html">astral-sh/ruff#4253</a> on 2023-05-06 07:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samuelhwilliams">@samuelhwilliams</a> on 2023-05-06 08:52</div>
            <div class="timeline-body"><p>Amazing - thank you üôá‚Äç‚ôÇÔ∏è</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-05-06 15:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:09 UTC
    </footer>
</body>
</html>
