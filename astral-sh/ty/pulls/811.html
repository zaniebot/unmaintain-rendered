<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update astral-sh/setup-uv action to v6 - astral-sh/ty #811</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Update astral-sh/setup-uv action to v6</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ty/pull/811">#811</a>
        opened by <a href="https://github.com/renovate">@renovate</a>
        on 2025-07-11 07:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/renovate">@renovate</a></div>
            <div class="timeline-body"><p>This PR contains the following updates:</p>
<p>| Package | Type | Update | Change |
|---|---|---|---|
| <a href="https://redirect.github.com/astral-sh/setup-uv">astral-sh/setup-uv</a> | action | major | <code>v5.4.2</code> -&gt; <code>v6.3.1</code> |</p>
<hr>
Release Notes

astral-sh/setup-uv (astral-sh/setup-uv)

<a href="https://redirect.github.com/astral-sh/setup-uv/releases/tag/v6.3.1"><code>v6.3.1</code></a>: ğŸŒˆ Do not warn when version not in manifest-file
<p><a href="https://redirect.github.com/astral-sh/setup-uv/compare/v6.3.0...v6.3.1">Compare Source</a></p>
Changes
<p>This is a hotfix to change the warning messages that a version could not be found in the local manifest-file to info level.</p>
<p>A <code>setup-uv</code> release contains a version-manifest.json file with infos in all available <code>uv</code> releases. When a new <code>uv</code> version is released this is not contained in this file until the file gets updated and a new <code>setup-uv</code> release is made.
We will overhaul this process in the future but for now the spamming of warnings is removed.</p>
ğŸ› Bug fixes
<ul>
<li>Do not warn when version not in manifest-file <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/462">#â€‹462</a>)</li>
</ul>
ğŸ§° Maintenance
<ul>
<li>chore: update known versions for 0.7.14 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/459">#â€‹459</a>)</li>
<li>Revert &quot;Set expected cache dir drive to C: on windows (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/451">#â€‹451</a>)&quot; <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/460">#â€‹460</a>)</li>
</ul>
<a href="https://redirect.github.com/astral-sh/setup-uv/releases/tag/v6.3.0"><code>v6.3.0</code></a>: ğŸŒˆ Use latest version from manifest-file
<p><a href="https://redirect.github.com/astral-sh/setup-uv/compare/v6.2.1...v6.3.0">Compare Source</a></p>
Changes
<p>If a manifest-file is supplied the default value of the version input (latest) will get the latest version available in the manifest. That might not be the actual latest version available in the official uv repo.</p>
ğŸš€ Enhancements
<ul>
<li>Use latest version from manifest-file <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/458">#â€‹458</a>)</li>
</ul>
<a href="https://redirect.github.com/astral-sh/setup-uv/releases/tag/v6.2.1"><code>v6.2.1</code></a>: ğŸŒˆ Fix &quot;No such file or directory version-manifest.json&quot;
<p><a href="https://redirect.github.com/astral-sh/setup-uv/compare/v6.2.0...v6.2.1">Compare Source</a></p>
Changes
<p>Release v6.2.0 contained a bug that slipped through the automated test. The action tried to look for the default version-manifest.json in the root of the repostory using this action instead of relative to the action itself.</p>
ğŸ› Bug fixes
<ul>
<li>Look for version-manifest.json relative to action path <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/456">#â€‹456</a>)</li>
</ul>
<a href="https://redirect.github.com/astral-sh/setup-uv/releases/tag/v6.2.0"><code>v6.2.0</code></a>: ğŸŒˆ  New input manifest-file
<p><a href="https://redirect.github.com/astral-sh/setup-uv/compare/v6.1.0...v6.2.0">Compare Source</a></p>
Changes
<p>This release adds a new input <code>manifest-file</code>.</p>
<p>The <code>manifest-file</code> input allows you to specify a JSON manifest that lists available uv versions,
architectures, and their download URLs. By default, this action uses the manifest file contained
in this repository, which is automatically updated with each release of uv.</p>
<p>The manifest file contains an array of objects, each describing a version,
architecture, platform, and the corresponding download URL.</p>
<p>You can supply a custom manifest file URL to define additional versions,
architectures, or different download URLs.
This is useful if you maintain your own uv builds or want to override the default sources.</p>
<p>For example:</p>
<pre><code>[
  {
    &quot;version&quot;: &quot;0.7.12-alpha.1&quot;,
    &quot;artifactName&quot;: &quot;uv-x86_64-unknown-linux-gnu.tar.gz&quot;,
    &quot;arch&quot;: &quot;x86_64&quot;,
    &quot;platform&quot;: &quot;unknown-linux-gnu&quot;,
    &quot;downloadUrl&quot;: &quot;https://release.pyx.dev/0.7.12-alpha.1/uv-x86_64-unknown-linux-gnu.tar.gz&quot;
  },
  ...
]
</code></pre>
<pre><code>- name: Use a custom manifest file
  uses: astral-sh/setup-uv@v6
  with:
    manifest-file: &quot;https://example.com/my-custom-manifest.json&quot;
</code></pre>
<blockquote>
<p>[!WARNING]<br>
If you have previously used <code>server-url</code> to use your self hosted uv binaries use this new way instead.
<code>server-url</code> is deprecated and will be removed in a future release</p>
</blockquote>
ğŸš€ Enhancements
<ul>
<li>Add input manifest-file <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/454">#â€‹454</a>)</li>
<li>Add warning about shadowed uv binaries to <code>activate-environment</code> <a href="https://redirect.github.com/zanieb">@â€‹zanieb</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/439">#â€‹439</a>)</li>
</ul>
ğŸ§° Maintenance
<ul>
<li>chore: update known versions for 0.7.13 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/444">#â€‹444</a>)</li>
<li>Set expected cache dir drive to C: on windows <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/451">#â€‹451</a>)</li>
<li>chore: update known versions for 0.7.11 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/442">#â€‹442</a>)</li>
<li>chore: update known versions for 0.7.10 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/440">#â€‹440</a>)</li>
<li>chore: update known versions for 0.7.9 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/437">#â€‹437</a>)</li>
<li>Check that all jobs are in all-tests-passed.needs <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/432">#â€‹432</a>)</li>
<li>chore: update known versions for 0.7.8 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/428">#â€‹428</a>)</li>
</ul>
<a href="https://redirect.github.com/astral-sh/setup-uv/releases/tag/v6.1.0"><code>v6.1.0</code></a>: ğŸŒˆ
<p><a href="https://redirect.github.com/astral-sh/setup-uv/compare/v6.0.1...v6.1.0">Compare Source</a></p>
Changes
<p>This release adds the input <code>server-url</code> which defaults to <code>https://github.com</code>. You can set this to a custom url to control where this action downloads the uv release from. This is useful for users of gitea and comparable solutions.</p>
<p><a href="https://redirect.github.com/sebadevo">@â€‹sebadevo</a> pointed out that we don&#x27;t invalidate the cache when the <code>prune-cache</code> input is changed. This leads to unnessecarily big caches. The input is now used to compute the cache key, properly invalidating the cache when it is changed.</p>
<blockquote>
<p>[!NOTE]<br>
For most users this release will invalidate the cache once.
You will see the known warning <a href="https://redirect.github.com/astral-sh/setup-uv?tab=readme-ov-file#why-do-i-see-warnings-like-no-github-actions-cache-found-for-key">no-github-actions-cache-found-for-key</a>
This is expected and will only appear once.</p>
</blockquote>
ğŸ› Bug fixes
<ul>
<li>Purge cache in cache key <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/423">#â€‹423</a>)</li>
</ul>
ğŸš€ Enhancements
<ul>
<li>feat: support custom github url <a href="https://redirect.github.com/Zoupers">@â€‹Zoupers</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/414">#â€‹414</a>)</li>
</ul>
ğŸ§° Maintenance
<ul>
<li>chore: update known versions for 0.7.7 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/422">#â€‹422</a>)</li>
<li>chore: update known versions for 0.7.6 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/415">#â€‹415</a>)</li>
<li>chore: update known versions for 0.7.5 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/412">#â€‹412</a>)</li>
<li>chore: update known versions for 0.7.4 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/410">#â€‹410</a>)</li>
<li>chore: update known versions for 0.7.3 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/405">#â€‹405</a>)</li>
<li>Fix path to known-checksums.ts <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/404">#â€‹404</a>)</li>
<li>Fix update-known-versions workflow argument <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/401">#â€‹401</a>)</li>
<li>Fix update-known-versions workflow <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/400">#â€‹400</a>)</li>
<li>Create version-manifest.json on uv release <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/399">#â€‹399</a>)</li>
<li>Run infrastructure workflows on arm runners <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/396">#â€‹396</a>)</li>
<li>chore: update known checksums for 0.7.2 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/395">#â€‹395</a>)</li>
<li>chore: update known checksums for 0.7.0 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/390">#â€‹390</a>)</li>
</ul>
ğŸ“š Documentation
<ul>
<li>Add section to README explaining if packages are installed by setup-uv <a href="https://redirect.github.com/pirate">@â€‹pirate</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/398">#â€‹398</a>)</li>
</ul>
â¬†ï¸ Dependency updates
<ul>
<li>Bump dependencies <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/424">#â€‹424</a>)</li>
<li>Bump typescript from 5.8.2 to 5.8.3 @â€‹<a href="https://redirect.github.com/apps/dependabot">dependabot[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/393">#â€‹393</a>)</li>
</ul>
<a href="https://redirect.github.com/astral-sh/setup-uv/releases/tag/v6.0.1"><code>v6.0.1</code></a>: ğŸŒˆ Fix default cache dependency glob
<p><a href="https://redirect.github.com/astral-sh/setup-uv/compare/v6...v6.0.1">Compare Source</a></p>
Changes
<p>The new default in v6 used illegal patterns and therefore didn&#x27;t match requirements files. This is now fixed.</p>
ğŸ› Bug fixes
<ul>
<li>Fix default cache dependency glob <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/388">#â€‹388</a>)</li>
</ul>
ğŸ§° Maintenance
<ul>
<li>chore: update known checksums for 0.6.17 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/384">#â€‹384</a>)</li>
</ul>
â¬†ï¸ Dependency updates
<ul>
<li>Bump dependencies <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/389">#â€‹389</a>)</li>
</ul>
<a href="https://redirect.github.com/astral-sh/setup-uv/releases/tag/v6.0.0"><code>v6.0.0</code></a>: ğŸŒˆ activate-environment and working-directory
<p><a href="https://redirect.github.com/astral-sh/setup-uv/compare/v5.4.2...v6">Compare Source</a></p>
Changes
<p>This version contains some breaking changes which have been gathering up for a while. Lets dive into them:</p>
<ul>
<li><a href="#activate-environment">Activate environment</a></li>
<li><a href="#working-directory">Working Directory</a></li>
<li><a href="#default-cache-dependency-glob">Default <code>cache-dependency-glob</code></a></li>
<li><a href="#use-default-cache-dir-on-self-hosted-runners">Use default cache dir on self hosted runners</a></li>
</ul>
Activate environment
<p>In previous versions using the input <code>python-version</code> automatically activated a venv at the repository root.
This led to some unwanted side-effects, was sometimes unexpected and not flexible enough.</p>
<p>The venv activation is now explicitly controlled with the new input <code>activate-environment</code> (false by default):</p>
<pre><code>- name: Install the latest version of uv and activate the environment
  uses: astral-sh/setup-uv@v6
  with:
    activate-environment: true
- run: uv pip install pip
</code></pre>
<p>The venv gets created by the <a href="https://docs.astral.sh/uv/pip/environments/"><code>uv venv</code></a> command so the python version is controlled by the <code>python-version</code> input or the files <code>pyproject.toml</code>, <code>uv.toml</code>, <code>.python-version</code> in the <code>working-directory</code>.</p>
Working Directory
<p>The new input <code>working-directory</code> controls where we look for <code>pyproject.toml</code>, <code>uv.toml</code> and <code>.python-version</code> files
which are used to determine the version of uv and python to install.</p>
<p>It can also be used to control where the venv gets created.</p>
<pre><code>- name: Install uv based on the config files in the working-directory
  uses: astral-sh/setup-uv@v6
  with:
    working-directory: my/subproject/dir
</code></pre>
<blockquote>
<p>[!CAUTION]</p>
<p>The inputs <code>pyproject-file</code> and <code>uv-file</code> have been removed.</p>
</blockquote>
Default <code>cache-dependency-glob</code>
<p><a href="https://redirect.github.com/ssbarnea">@â€‹ssbarnea</a> found out that the default <code>cache-dependency-glob</code> was not suitable for a lot of users.</p>
<p>The old default</p>
<pre><code>cache-dependency-glob: |
  **/requirements*.txt
  **/uv.lock
</code></pre>
<p>is changed and should cover over 99.5% of use cases:</p>
<pre><code>cache-dependency-glob: |
  **/*(requirements|constraints)*.(txt|in)
  **/pyproject.toml
  **/uv.lock
</code></pre>
<blockquote>
<p>[!NOTE]</p>
<p>This shouldn&#x27;t be a breaking change. The only thing you may notice is that your caches get invalidated once.</p>
</blockquote>
Use default cache dir on self hosted runners
<p>The directory where uv stores its cache was always set to a directory in <code>RUNNER_TEMP</code>. For self-hosted runners this made no sense as this gets cleaned after every run and led to slower runs than necessary.</p>
<p>On self-hosted runners <code>UV_CACHE_DIR</code> is no longer set and the <a href="https://docs.astral.sh/uv/concepts/cache/#cache-directory">default cache directory</a> is used instead.</p>
ğŸš¨ Breaking changes
<ul>
<li>Change default cache-dependency-glob <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/352">#â€‹352</a>)</li>
<li>No default UV_CACHE_DIR on selfhosted runners <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/380">#â€‹380</a>)</li>
<li>new inputs activate-environment and working-directory <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/381">#â€‹381</a>)</li>
</ul>
ğŸ§° Maintenance
<ul>
<li>chore: update known checksums for 0.6.16 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/378">#â€‹378</a>)</li>
<li>chore: update known checksums for 0.6.15 @â€‹<a href="https://redirect.github.com/apps/github-actions">github-actions[bot]</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/377">#â€‹377</a>)</li>
</ul>
ğŸ“š Documentation
<ul>
<li>bump to v6 in README <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/382">#â€‹382</a>)</li>
<li>log info on venv activation <a href="https://redirect.github.com/eifinger">@â€‹eifinger</a> (<a href="https://redirect.github.com/astral-sh/setup-uv/issues/375">#â€‹375</a>)</li>
</ul>


<hr>
Configuration
<p>ğŸ“… <strong>Schedule</strong>: Branch creation - &quot;before 4am on Monday&quot; (UTC), Automerge - At any time (no schedule defined).</p>
<p>ğŸš¦ <strong>Automerge</strong>: Disabled by config. Please merge this manually once you are satisfied.</p>
<p>â™» <strong>Rebasing</strong>: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.</p>
<p>ğŸ”• <strong>Ignore</strong>: Close this PR and you won&#x27;t be reminded about this update again.</p>
<hr>
<ul>
<li>[ ] If you want to rebase/retry this PR, check this box</li>
</ul>
<hr>
<p>This PR was generated by <a href="https://mend.io/renovate/">Mend Renovate</a>. View the <a href="https://developer.mend.io/github/astral-sh/ty">repository job log</a>.</p>


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/renovate[bot]">@renovate[bot]</a> on 2025-07-11 07:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-11 07:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-11 07:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Branch deleted on 2025-07-11 07:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:27:28 UTC
    </footer>
</body>
</html>
