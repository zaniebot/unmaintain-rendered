<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add setup guide for using language server in Neovim - astral-sh/ty #436</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add setup guide for using language server in Neovim</h1>

    <div class="meta">
        <span class="state-icon state-merged"></span>
        <a href="https://github.com/astral-sh/ty/pull/436">#436</a>
        opened by <a href="https://github.com/fabridamicelli">@fabridamicelli</a>
        on 2025-05-17 19:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/fabridamicelli">@fabridamicelli</a></div>
            <div class="timeline-body"><!--
Thank you for contributing to ty! To help us out with reviewing, please consider the following:

- Does this pull request include a summary of the change? (See below.)
- Does this pull request include a descriptive title?
- Does this pull request include references to any relevant issues?
-->

<p>Thanks for this tool!</p>
<p>This config worked right away for me for type checking, so at least until the docs are more exhaustive, we could have this snippet.</p>
<h2>Summary</h2>
<p>Add documentation for minimal setup of <code>ty</code> on Neovim.</p>
<h2>Test Plan</h2>
<p>This worked out-of-the-box for me</p>
<p><img src="https://github.com/user-attachments/assets/f8a43999-7351-43fd-939e-1a5ff0d9f9d1" alt="image" /></p>
<!-- How was it tested? -->

</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @AlexWaygood on 2025-05-17 20:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @AlexWaygood on 2025-05-17 20:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hahuang65">@hahuang65</a> on 2025-05-18 00:35</div>
            <div class="timeline-body"><p>FWIW, I've found that even if you don't have <code>ty</code> installed (because the mason PR hasn't been accepted yet), you can still run <code>{ &quot;uvx&quot;, &quot;ty&quot;, &quot;server&quot; }</code> and get it to work, if you have <code>uv</code> installed.</p>
<p>In fact, I personally even run it with <code>poetry</code> if I discover a <code>poetry.lock</code> file, in order to automatically get the venv loaded up for the LSP.</p>
<pre><code>      if require(&quot;util&quot;).dir_has_file(root_dir, &quot;poetry.lock&quot;) then
        vim.notify_once(&quot;Running `ty` with `poetry`&quot;)
        cmd = { &quot;poetry&quot;, &quot;run&quot;, &quot;uvx&quot;, &quot;ty&quot;, &quot;server&quot; }
      else
        vim.notify_once(&quot;Running `ty` without a virtualenv&quot;)
        cmd = { &quot;uvx&quot;, &quot;ty&quot;, &quot;server&quot; }
      end
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>docs/reference/editor-settings.md</code>:162 on 2025-05-18 16:01</div>
            <div class="timeline-body"><p>I don't think this is required given that the plugin includes the ty config: https://github.com/neovim/nvim-lspconfig/blob/ac1dfbe3b60e5e23a2cff90e3bd6a3bc88031a57/lsp/ty.lua#L4</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on <code>docs/reference/editor-settings.md</code>:135 on 2025-05-18 16:50</div>
            <div class="timeline-body"><p>This section should actually be present under the https://github.com/astral-sh/ty/blob/main/docs/README.md#other-editors section instead. This document is only to provide reference for all editor settings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> requested changes on 2025-05-18 16:54</div>
            <div class="timeline-body"><p>I'd suggest moving the section to the relevant page and use https://docs.astral.sh/ruff/editors/setup/#neovim as a reference.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/fabridamicelli">@fabridamicelli</a> reviewed on 2025-05-18 19:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/fabridamicelli">@fabridamicelli</a> on <code>docs/reference/editor-settings.md</code>:162 on 2025-05-18 19:04</div>
            <div class="timeline-body"><p>You are right. Now it is correct and follows instructions as in Ruff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/fabridamicelli">@fabridamicelli</a> reviewed on 2025-05-18 19:04</div>
            <div class="timeline-body"></div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Review comment by <a href="https://github.com/fabridamicelli">@fabridamicelli</a> on <code>docs/reference/editor-settings.md</code>:135 on 2025-05-18 19:04</div>
            <div class="timeline-body"><p>done</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Review requested from @dhruvmanila by @fabridamicelli on 2025-05-18 19:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "docs: add how to start server in neovim" to "Add setup guide for using language server in Neovim" by @dhruvmanila on 2025-05-21 15:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a> approved on 2025-05-21 15:22</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Merged by @dhruvmanila on 2025-05-21 15:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2025-05-21 15:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Jaehaks">@Jaehaks</a> on 2025-08-15 00:24</div>
            <div class="timeline-body"><p>How ot configure settings in neovim?</p>
<p>I wrote like this, but ty cannot recognize the rule.
or can I set config file location like ruff? ruff lsp supports <code>settings.configuration</code> to set config file globally</p>
<pre><code class="language-lua">vim.lsp.config('ty', {
  cmd = {'ty', 'server'},
  filetypes = {'python'},
  root_dir = function (bufnr, cb)
    local root = vim.fs.root(bufnr, {
      'ty.toml',
      'pyproject.toml',
      '.git'
    }) or vim.fn.getcwd()
    -- root directory must be transferred to callback function to recognize
    cb(root)
  end,
  settings = { -- see https://docs.astral.sh/ty/reference/configuration/
    ty = {
      rules = {
        ['division-by-zero'] = 'error',
      }
    },
  },
})

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-08-15 02:16</div>
            <div class="timeline-body"><p>Currently, ty server only supports the settings mentioned in https://docs.astral.sh/ty/reference/editor-settings/ to be defined directly in an editor, we plan to add more in the future as per user feedback. I'd suggest you open a new issue to request a specific setting to be available directly in an editor if you wish so.</p>
<p>Regardless, you can use a configuration file (<code>ty.toml</code> or <code>pyproject.toml</code>) to specify other available settings and the server should pick that up unless it's outside the project itself.</p>
<p>Related: https://github.com/astral-sh/ty/issues/786</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Jaehaks">@Jaehaks</a> on 2025-08-16 06:27</div>
            <div class="timeline-body"><p>@dhruvmanila
Thanks a lot for your reply:)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:21:53 UTC
    </footer>
</body>
</html>
