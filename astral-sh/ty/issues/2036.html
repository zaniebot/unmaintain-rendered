<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>error[unresolved-attribute]: Module `sqlean` has no member `connect` - astral-sh/ty #2036</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>error[unresolved-attribute]: Module `sqlean` has no member `connect`</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2036">#2036</a>
        opened by <a href="https://github.com/kracekumar">@kracekumar</a>
        on 2025-12-17 20:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kracekumar">@kracekumar</a> on 2025-12-17 20:57</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><a href="https://github.com/nalgeon/sqlean.py">Sqlean</a> is sqlite3 compatible library. And ty is unable to find the attribute <code>connect</code> even though it's available. The sqlean is written in <code>C</code>. Not sure if this is the issue</p>
<p>Snippet</p>
<pre><code>error[unresolved-attribute]: Module `sqlean` has no member `connect`
  --&gt; tests/utils.py:24:12
   |
23 | def db_connection(dbname=&quot;:memory:&quot;):
24 |     conn = sqlite3.connect(database=dbname, isolation_level=None)
   |            ^^^^^^^^^^^^^^^
25 |     return conn
   |
info: rule `unresolved-attribute` is enabled by default
</code></pre>
<p>Mypy: https://mypy-play.net/?mypy=latest&amp;python=3.9&amp;gist=34f8db88a3b9a8f609026eee9cd1ca7e
ty: https://play.ty.dev/7c1c9070-31bc-433f-8185-499fcb50d53c</p>
<h3>Version</h3>
<p>ty 0.0.2 (42835578d 2025-12-16), python version: 3.9</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-12-17 21:22</div>
            <div class="timeline-body"><p>Thanks for the report!</p>
<p>The playground examples aren't very informative here, since neither mypy nor ty playground has any access to the <code>sqlean</code> module. The mypy example emits no diagnostics because it has <code># mypy: ignore-errors</code> comment :) If that is removed, it emits an error that it can't find <code>sqlean</code> module.</p>
<p>When I try locally with <code>uv init</code> and then <code>uv add sqlean</code>, it doesn't seem that <code>sqlean.connect</code> exists at runtime, either:</p>
<pre><code class="language-pycon">âžœ uv run python
Python 3.13.2 (main, Mar 11 2025, 17:30:09) [Clang 20.1.0 ] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import sqlean
&gt;&gt;&gt; sqlean.connect
Traceback (most recent call last):
  File &quot;&lt;python-input-1&gt;&quot;, line 1, in &lt;module&gt;
    sqlean.connect
AttributeError: module 'sqlean' has no attribute 'connect'
</code></pre>
<p>So it seems that ty is providing accurate type information here, and the reason your code type-checks under mypy is probably because of that <code># mypy: ignore-errors</code> comment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @carljm on 2025-12-17 21:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kracekumar">@kracekumar</a> on 2025-12-17 21:47</div>
            <div class="timeline-body"><p>Thanks for the answer. I am replying since I have some extra information to share.</p>
<blockquote>
<p>When I try locally with uv init and then uv add sqlean, it doesn't seem that sqlean.connect exists at runtime, either:</p>
</blockquote>
<p>It's weird. It seems to exist for me because there needs to be <code>sqlean and sqlean-py</code>and both needs to be installed.
Sample code</p>
<pre><code>$cat a.py
import sqlean
print(sqlean.connect)
</code></pre>
<p>pyproject</p>
<pre><code>cat pyproject.toml
[project]
name = &quot;sqlean-test&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.9&quot;
dependencies = [
    &quot;mypy&gt;=1.19.1&quot;,
    &quot;sqlean&gt;=0.0.3&quot;,
    &quot;sqlean-py&gt;=3.50.4.5&quot;,
    &quot;ty&gt;=0.0.2&quot;,
]
</code></pre>
<p>runtime does seem to consist of the function</p>
<pre><code class="language-python">uv run a.py
&lt;built-in function connect&gt;
</code></pre>
<blockquote>
<p>The mypy example emits no diagnostics because it has # mypy: ignore-errors comment :) If that is removed, it emits an error that it can't find sqlean module.</p>
</blockquote>
<p>ah, you're right. My apologies. Mypy do throw an error. I over-looked the ignore line at the top of the file.</p>
<pre><code>$uv run mypy a.py
a.py:1: error: Skipping analyzing &quot;sqlean&quot;: module is installed, but missing library stubs or py.typed marker  [import-untyped]
a.py:1: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
Found 1 error in 1 file (checked 1 source file)
</code></pre>
<p>ty</p>
<pre><code>uv run ty check a.py
error[unresolved-attribute]: Module `sqlean` has no member `connect`
 --&gt; a.py:2:7
  |
1 | import sqlean
2 | print(sqlean.connect)
  |       ^^^^^^^^^^^^^^
  |
info: rule `unresolved-attribute` is enabled by default
</code></pre>
<p>I will add ignore for sqlean.</p>
<p>Thanks a lot for quick response!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-12-17 22:07</div>
            <div class="timeline-body"><p>Thanks for the additional info!</p>
<p>If I install <code>sqlean-py</code> module, then I do indeed see <code>sqlean.connect</code> available at runtime. However, it seems to be made available at runtime as an import side effect, in a way that is not visible to type checkers. (I don't think mypy or any other type checker can see it either, it's just that mypy ignores the <code>sqlean</code> module altogether and treats it as unknown, whereas we find it and analyze its code.) So the solution here is either to ignore, or to add some type stubs for <code>sqlean</code> module.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:54:35 UTC
    </footer>
</body>
</html>
