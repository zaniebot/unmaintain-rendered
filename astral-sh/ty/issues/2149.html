<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inconsistent semantic highlighting for imports in VS Code - astral-sh/ty #2149</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Inconsistent semantic highlighting for imports in VS Code</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2149">#2149</a>
        opened by <a href="https://github.com/GlobalMin">@GlobalMin</a>
        on 2025-12-20 03:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/GlobalMin">@GlobalMin</a></div>
            <div class="timeline-body"><p>I'm very excited to be using <code>ty</code> given how well <code>uv</code> and <code>ruff</code> have changed my Python dev experience, and so far it's clearly very fast. The one issue I'm having in VSCode is some 3rd party libraries, meaning needing to install with <code>uv add</code> are not highlighted like others and it looks off. See below for example where <code>pandas</code> is colored white while the other import paths are in green. Not all external libs have issues as shown in screenshot as well - <code>fastapi</code> looks fine.</p>
<p><img width="459" height="271" alt="Image" src="https://github.com/user-attachments/assets/81424b79-9139-496e-aaa5-f5045546a584" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @AlexWaygood on 2025-12-21 20:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-12-23 08:33</div>
            <div class="timeline-body"><p>I don't think it's related to third-party imports as it happens for standard library imports as well (https://play.ty.dev/2b5f19b2-59d7-496f-9b65-8ea19f7ee6ef).</p>
<p>I think it's because for an aliased import like <code>import foo as bar</code>, the server only sends the <code>Namespace</code> token for <code>bar</code> and not <code>foo</code> (<a href="https://github.com/astral-sh/ruff/blob/4745d15fff5d73fe5a91cc9901df5ecf209ae60f/crates/ty_ide/src/semantic_tokens.rs#L708-L721">code ref</a>). Maybe we should send the <code>Namespace</code> token for <code>foo</code> as well?</p>
<p>It's interesting that I'm not seeing this discrepancy with the colorscheme that I'm using in VS Code (Gruvbox Material) but only with the default colorscheme.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Inconsistent semantic highlighting for some third-party imports in VS Code" to "Inconsistent semantic highlighting for imports in VS Code" by @dhruvmanila on 2025-12-23 08:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-23 08:56</div>
            <div class="timeline-body"><p>I used <code>Developer: Inspect Editor Tokens and Scopes</code> to inspect the semantic tokens produced by pylance and it classifies both <code>pathlib</code> tokens as namespace</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MichaReiser on 2025-12-23 08:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Stable" by @MichaReiser on 2025-12-23 08:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/GlobalMin">@GlobalMin</a> on 2025-12-23 17:45</div>
            <div class="timeline-body"><p>Ok I can confirm it's not about native Python versus 3rd party it's the <code>import a as b</code> pattern. Can reproduce 100% when adding imports like this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-12-24 17:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:21:30 UTC
    </footer>
</body>
</html>
