<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improve diagnostics when a variable is declared to have a type from the `numbers` module and an `int`/`float`/`complex` is passed - astral-sh/ty #2563</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Improve diagnostics when a variable is declared to have a type from the <code>numbers</code> module and an <code>int</code>/<code>float</code>/<code>complex</code> is passed</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/2563">#2563</a>
        opened by <a href="https://github.com/tubarao312">@tubarao312</a>
        on 2026-01-19 15:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tubarao312">@tubarao312</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Integer integers are <em>not</em> considered <code>numbers.Number</code>. Also appears to happen for <code>float</code> and <code>complex</code> numbers.</p>
<pre><code class="language-py">from numbers import Number

a: Number = 1
#           ~
# Object of type `Literal[1]` is not assignable to `Number` (invalid-assignment)

</code></pre>
<p><a href="https://play.ty.dev/5e142380-4474-46fa-841e-6fa871b0ae7c">Playground Link</a></p>
<h3>Version</h3>
<p>ty 0.0.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by @AlexWaygood on 2026-01-19 15:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-19 15:05</div>
            <div class="timeline-body"><p>Thanks for the report. All other type checkers agree with ty here, and it would be unsound for ty to do anything else here, unfortunately. For more information, you can see https://discuss.python.org/t/numeric-generics-where-do-we-go-from-pep-3141-and-present-day-mypy/17155, https://github.com/python/mypy/issues/3186, and https://stackoverflow.com/questions/69334475/how-to-hint-at-number-types-i-e-subclasses-of-number-not-numbers-themselv.</p>
<p>However, one thing we definitely should do here is improve our diagnostic for these situations. Mypy has a special-cased diagnostic specifically for this issue because it's so common; we should do something similar. It doesn't look like it emits the special diagnostic on your snippet specifically, but on this snippet:</p>
<pre><code class="language-py">from numbers import Number

def f(x: Number): ...

f(1)
</code></pre>
<p>it emits this message, which is very nice:</p>
<pre><code>main.py:5: error: Argument 1 to &quot;f&quot; has incompatible type &quot;int&quot;; expected &quot;Number&quot;  [arg-type]
main.py:5: note: Types from &quot;numbers&quot; aren't supported for static type checking
main.py:5: note: See https://peps.python.org/pep-0484/#the-numeric-tower
main.py:5: note: Consider using a protocol instead, such as typing.SupportsFloat
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Object of type `Literal[1]` is not assignable to `numbers.Number`" to "Improve diagnostics when a variable is declared to have a type from the `numbers` module and an `int`/`float`/`complex` is passed" by @AlexWaygood on 2026-01-19 15:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-19 15:28:45 UTC
    </footer>
</body>
</html>
