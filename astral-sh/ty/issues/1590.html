<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No file-level diagnostics for project-external files - astral-sh/ty #1590</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>No file-level diagnostics for project-external files</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1590">#1590</a>
        opened by <a href="https://github.com/sharkdp">@sharkdp</a>
        on 2025-11-19 11:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-11-19 11:10</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I might be wrong, but I seem to remember that I used to get file-level diagnostics in project-external files. For example: I have the <code>~/ruff</code> folder opened in VS Code. If I open a file from <code>~/playground</code>, I don't see any diagnostics:</p>
<p><img width="344" height="116" alt="Image" src="https://github.com/user-attachments/assets/60be60e6-7235-4fbb-bb44-02c0bdb5db73" /></p>
<p>Everything works fine if the file comes from within the project:</p>
<p><img width="358" height="127" alt="Image" src="https://github.com/user-attachments/assets/bd1869f7-4baf-459e-a0fe-26669c9aeaf3" /></p>
<p>And everything also works fine if I open <code>~/playground</code> as a folder.</p>
<p>I'm not sure if something in VS Code has changed, or if something in ty has changed.</p>
<p>Choosing a different <code>&quot;ty.diagnosticMode&quot;</code> does not help.</p>
<h3>Version</h3>
<p>ffce0de3c 2025-11-19</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @sharkdp on 2025-11-19 11:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @sharkdp on 2025-11-19 11:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-19 11:12</div>
            <div class="timeline-body"><p>This is sort of intentional. We only provide basic LSP features for non-project files but no errors because those could be standard library files or just a random file you're looking at.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @MichaReiser on 2025-11-19 11:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-11-19 11:16</div>
            <div class="timeline-body"><p>I certainly wouldn't want to see them in workspace diagnostics. But ideally, I'd like to see them on a per-file basis?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-19 11:30</div>
            <div class="timeline-body"><blockquote>
<p>I certainly wouldn't want to see them in workspace diagnostics. But ideally, I'd like to see them on a per-file basis?</p>
</blockquote>
<p>I think it depends and we may want to introduce a configuration option for this. I'd be very annoyed seeing a ton of diagnostics on standard library files because they aren't annotated or redefine variables in a way that isn't allowed by ty (but completely fine in a file that has typing stubs).</p>
<p>This question then expands into:</p>
<ul>
<li>Should on-save fixes run when hitting save?</li>
<li>How should we handle auto import completions (may already be an issue today)? We don't know the search paths</li>
<li>...</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-11-19 12:20</div>
            <div class="timeline-body"><blockquote>
<p>I'd be very annoyed seeing a ton of diagnostics on standard library files because they aren't annotated or redefine variables in a way that isn't allowed by ty (but completely fine in a file that has typing stubs).</p>
</blockquote>
<p>Both of these things should (ideally) happen a lot less with ty than with other type checkers, but I see your point.</p>
<p>I am not so sure anymore if this ever worked(?), but I now realize that other LSPs like rust-analyzer also don't support it, and it seems potentially difficult or even controversial. So let's maybe close this for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sharkdp on 2025-11-19 12:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 02:11:43 UTC
    </footer>
</body>
</html>
