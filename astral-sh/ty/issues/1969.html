<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Go to Definition not work for module - astral-sh/ty #1969</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Go to Definition not work for module</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1969">#1969</a>
        opened by <a href="https://github.com/Liyixin95">@Liyixin95</a>
        on 2025-12-17 01:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Liyixin95">@Liyixin95</a></div>
            <div class="timeline-body">Summary
<p>dir structure</p>
<pre><code>❯ lsd --tree                                                                                                                                                                                                                     (base)
 .
├──  __init__.py
├──  module1
│   └──  __init__.py
├──  module2.py
└──  test.py
</code></pre>
<p>code in test.py</p>
<pre><code>from test import module1, module2
</code></pre>
<p>call <code>go to definition</code> on <code>module1</code> and <code>module2</code> can not jump to the module path.</p>
Version
<p>0.0.2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-17 04:06</div>
            <div class="timeline-body"><p>Why would <code>module1</code> and <code>module2</code> be importable from <code>test</code> in your example?</p>
<p>e.g., if you look at this playground example https://play.ty.dev/59aaa507-8a05-4b8a-a5eb-6267ee59828e</p>
<p><code>module1</code> and <code>module2</code> are importable,  but not via <code>from test</code>, which I&#x27;d expect since they aren&#x27;t submodules of <code>test</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Liyixin95">@Liyixin95</a> on 2025-12-17 05:12</div>
            <div class="timeline-body"><blockquote>
<p>Why would <code>module1</code> and <code>module2</code> be importable from <code>test</code> in your example?</p>
<p>e.g., if you look at this playground example https://play.ty.dev/59aaa507-8a05-4b8a-a5eb-6267ee59828e</p>
<p><code>module1</code> and <code>module2</code> are importable, but not via <code>from test</code>, which I&#x27;d expect since they aren&#x27;t submodules of <code>test</code>?</p>
</blockquote>
<p>sorry for missing information.  the root module is test, the test.py is a name chosen at random. change it to test1.py get the same result.</p>
<pre><code> .
└── 󰙨 test
    ├──  __init__.py
    ├──  module1
    │   └──  __init__.py
    ├──  module2.py
    └──  test.py
</code></pre>
<p>And I have tried pyrefly in this case. Pyrefly can jump to<code>test/module1/__init__.py</code> or <code>test/module2.py</code> by call go to definition.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-17 07:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-17 08:26</div>
            <div class="timeline-body"><p>Did you open the <code>test</code> folder in the editor or is it any other folder? Do you have any <code>pyproject.toml</code> or <code>ty.toml</code> files in that or any of its ancestor directories?</p>
<p>Go-to definition is working for me if I open <code>test</code>&#x27;s parent folder in VS Code. The imports don&#x27;t resolve if I open <code>test</code> directly (because ty then thinks <code>test</code> is the root of your project`)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-info</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-17 08:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Liyixin95">@Liyixin95</a> on 2025-12-17 09:59</div>
            <div class="timeline-body"><blockquote>
<p>Did you open the <code>test</code> folder in the editor or is it any other folder? Do you have any <code>pyproject.toml</code> or <code>ty.toml</code> files in that or any of its ancestor directories?</p>
<p>Go-to definition is working for me if I open <code>test</code>&#x27;s parent folder in VS Code. The imports don&#x27;t resolve if I open <code>test</code> directly (because ty then thinks <code>test</code> is the root of your project`)</p>
</blockquote>


<p>https://github.com/user-attachments/assets/9254c268-6bd4-4182-9989-e1fccaed613d</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-17 10:12</div>
            <div class="timeline-body"><p>Can you try opening the <em>parent</em> folder of the <code>tests</code> directory?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Liyixin95">@Liyixin95</a> on 2025-12-17 10:22</div>
            <div class="timeline-body"><blockquote>
<p>Can you try opening the <em>parent</em> folder of the <code>tests</code> directory?</p>
</blockquote>
<p>The folder i opened is <code>ty-test</code>, which is already the parent of test.</p>
<p><img src="https://github.com/user-attachments/assets/bb93447e-94da-40f7-856f-40e63cb3a24a" alt="Image"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-info</span> removed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-17 10:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-17 10:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Stable&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-17 10:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-17 10:24</div>
            <div class="timeline-body"><p>Test:</p>
<pre><code>        let test = CursorTest::builder()
            .source(&quot;lib/__init__.py&quot;, r#&quot;&quot;#)
            .source(&quot;lib/module.py&quot;, r#&quot;&quot;#)
            .source(&quot;main.py&quot;, r#&quot;from lib import module&lt;CURSOR&gt;&quot;#)
            .build();
</code></pre>
<p>Returns no goto def targets</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-17 10:38</div>
            <div class="timeline-body"><p>I think what we need is a fallback in <code>resolve_from_import_definitions</code> to resolve the full module name and return its definition. @Gankra is this something you could look into? I think you&#x27;ll be much faster at fixing this than I</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/Gankra">@Gankra</a> by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-17 14:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-17 14:25</div>
            <div class="timeline-body"><p>Positively baffled I&#x27;m sure we implemented this, but yep it doesn&#x27;t work right now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-18 07:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:26:27 UTC
    </footer>
</body>
</html>
