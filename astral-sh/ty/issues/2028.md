```yaml
number: 2028
title: Go to Definition not working for stringified nested class
type: issue
state: open
author: steved-stripe
labels:
  - server
assignees: []
created_at: 2025-12-17T18:46:55Z
updated_at: 2026-01-09T09:32:44Z
url: https://github.com/astral-sh/ty/issues/2028
synced_at: 2026-01-10T01:56:41Z
```

# Go to Definition not working for stringified nested class

---

_Issue opened by @steved-stripe on 2025-12-17 18:46_

### Summary

```python
class Foo:
    class Bar:
        customer: str
def f(p: "Foo.Bar"): ...
#             ^^^ goto-def doesn't work
f(Foo.Bar())
```

https://play.ty.dev/5f9d19ff-1647-4de6-98b9-bee5b961ec1f

### Version

30c3f9aaf

---

_Label `server` added by @AlexWaygood on 2025-12-17 19:05_

---

_Renamed from "Go to Definition not working for nested class" to "Go to Definition not working for stringified nested class" by @AlexWaygood on 2025-12-17 19:05_

---

_Comment by @MichaReiser on 2025-12-18 08:56_

I think this would be fixed by https://github.com/astral-sh/ruff/pull/21758 (CC: @Gankra)

---

_Added to milestone `Pre-stable 1` by @MichaReiser on 2025-12-31 15:43_

---

_Assigned to @Gankra by @Gankra on 2026-01-05 15:08_

---

_Comment by @MichaReiser on 2026-01-09 09:32_

We should also test that find references etc. work with stringified annotations.

---
