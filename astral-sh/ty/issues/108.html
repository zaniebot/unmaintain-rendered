<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>salsa panic &quot;attempt to subtract with overflow&quot; in table/memo.rs - astral-sh/ty #108</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>salsa panic &quot;attempt to subtract with overflow&quot; in table/memo.rs</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/108">#108</a>
        opened by <a href="https://github.com/carljm">@carljm</a>
        on 2025-04-30 23:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/carljm">@carljm</a></div>
            <div class="timeline-body"><pre><code>fatal[panic] Panicked at /home/runner/.cargo/git/checkouts/salsa-e6f3bb7c2a062968/42f1583/src/table/memo.rs:225:30 when checking `/tmp/mypy_primer/projects/optuna/optuna/visualization/_rank.py`: `attempt to subtract with overflow`
</code></pre>
<p>Reproduces (but not consistently) on ruff commit <code>547f159e3f5e35023c62b8962a3d26e0bc14450d</code> (PR https://github.com/astral-sh/ruff/pull/17589) checking the mypy-primer project <code>optuna</code>: https://github.com/astral-sh/ruff/actions/runs/14765384601/job/41455638363?pr=17589</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @carljm on 2025-04-30 23:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-01 05:58</div>
            <div class="timeline-body"><p>Probably related to https://github.com/astral-sh/ty/issues/115</p>
<p>I don't think we need to fix those two for the alpha. They only reproduce once every 1000th run or something like that (I haven't had any look to repro even when running red knot for minutes)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-05-03 14:49</div>
            <div class="timeline-body"><p>Another occurence of this, this time while checking <code>starlette</code>: https://github.com/astral-sh/ruff/actions/runs/14811731265/job/41587228964 (CI run for https://github.com/astral-sh/ruff/pull/17813)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[red-knot] salsa panic "attempt to subtract with overflow" in table/memo.rs" to "salsa panic "attempt to subtract with overflow" in table/memo.rs" by @MichaReiser on 2025-05-07 15:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sharkdp on 2025-05-08 10:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sharkdp on 2025-05-08 10:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:19:34 UTC
    </footer>
</body>
</html>
