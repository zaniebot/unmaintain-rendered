<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Callable type has no attribute __name__ - astral-sh/ty #2375</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Callable type has no attribute <strong>name</strong></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2375">#2375</a>
        opened by <a href="https://github.com/lervag">@lervag</a>
        on 2026-01-07 11:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/lervag">@lervag</a></div>
            <div class="timeline-body">Summary
<p>Consider this short snippet:</p>
<pre><code>from concurrent.futures import Future, ProcessPoolExecutor
from typing import Callable, ParamSpec, TypeVar

P = ParamSpec(&quot;P&quot;)
T = TypeVar(&quot;T&quot;)


class ProcessPoolManager:
    def __init__(self, max_workers: int):
        self.max_workers: int = max_workers
        self.__executor = ProcessPoolExecutor(max_workers=self.max_workers)

    def submit_job(self, fn: Callable[P, T], *args: P.args, **kwargs: P.kwargs) -&gt; Future[T]:
        future = self._executor.submit(fn, *args, **kwargs)
        future.add_done_callback(lambda f: self._handle_job_completion(f, fn.__name__))

        return future
</code></pre>
<p>With pyright/basedpyright, I don&#x27;t get any type warnings (it seems the assume callable is a named function). But with <code>ty</code> I get the following:</p>
<pre><code>&gt; ty check test.py
error[unresolved-attribute]: Object of type `(**P@submit_job) -&gt; T@submit_job` has no attribute `__name__`
  --&gt; test.py:15:75
   |
13 |     def submit_job(self, fn: Callable[P, T], *args: P.args, **kwargs: P.kwargs) -&gt; Future[T]:
14 |         future = self._executor.submit(fn, *args, **kwargs)
15 |         future.add_done_callback(lambda f: self._handle_job_completion(f, fn.__name__))
   |                                                                           ^^^^^^^^^^^
16 |
17 |         return future
   |
help: Function objects have a `__name__` attribute, but not all callable objects are functions
info: rule `unresolved-attribute` is enabled by default

Found 1 diagnostic
</code></pre>
<p>The help message is very useful here, and I see that it is probably right. But I can&#x27;t figure out how to either change my signature to only allow &quot;named&quot; functions or how to adjust so that we only get <code>__name__</code> if it is available. I was hoping someone here might have an idea?</p>
Version
<pre><code>&gt; ty version
ty 0.0.9
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-07 12:16</div>
            <div class="timeline-body"><p>Hey, thanks for the report -- nice writeup :-) does this FAQ help answer your questions? <a href="https://docs.astral.sh/ty/reference/typing-faq/#why-does-ty-say-callable-has-no-attribute-__name__">https://docs.astral.sh/ty/reference/typing-faq/#why-does-ty-say-callable-has-no-attribute-__name__</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-07 12:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">callables</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-07 12:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-07 12:17</div>
            <div class="timeline-body"><p>hmm, maybe we should just link to the FAQ directly from our diagnostic?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lervag">@lervag</a> on 2026-01-07 12:38</div>
            <div class="timeline-body"><p>Thanks! That was definitely helpful!</p>
<p>After posting my issue I ended up solving my issue like this:</p>
<pre><code>    def submit_job(self, fn: Callable[P, T], *args: P.args, **kwargs: P.kwargs) -&gt; Future[T]:
        future = self._executor.submit(fn, *args, **kwargs)

        fn_name = getattr(fn, &quot;__name__&quot;, &quot;unnamed&quot;)
        if not isinstance(fn_name, str):
            fn_name = &quot;unnamed&quot;

        future.add_done_callback(lambda f: self._handle_job_completion(f, fn_name))
        return future
</code></pre>
<p>That resolves my typing issue. I don&#x27;t think we&#x27;d ever run into a case where my original variant would fail, but I don&#x27;t see a reason not to just stay on the safe side.</p>
<p>Again thanks for the quick reply and for already having written a good explenation of this issue!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/lervag">@lervag</a> on 2026-01-07 12:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lervag">@lervag</a> on 2026-01-07 12:51</div>
            <div class="timeline-body"><p>Oh, I missed the info box on my first read:</p>
<pre><code>if TYPE_CHECKING:
    from ty_extensions import Intersection

    type FunctionLikeCallable[**P, R] = Intersection[Callable[P, R], FunctionType]
else:
    FunctionLikeCallable = Callable
</code></pre>
<p>That&#x27;s neat and exactly what I wanted. &lt;3</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:26:59 UTC
    </footer>
</body>
</html>
