<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add subdiagnostic hint for `NotImplemented()` - astral-sh/ty #1571</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add subdiagnostic hint for `NotImplemented()`</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1571">#1571</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-11-15 19:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-11-15 19:49</div>
            <div class="timeline-body"><p>Callling <code>NotImplemented()</code> fails at runtime. If a user tries to call <code>NotImplemented()</code> (e.g. in <code>raise NotImplemented(&quot;my message here&quot;)</code>, we currently emit a <code>call-non-callable</code> diagnostic:</p>
<p><img width="1432" height="292" alt="Image" src="https://github.com/user-attachments/assets/dc43d55e-e4a5-4921-863e-c5e0c46fdb28" /></p>
<p>But in this situation, it's almost always the case that the user meant to call <code>NotImplementedError()</code> instead (the two are very often confused). What would be great is if we could attach a subdiagnostic saying &quot;Did you mean <code>NotImplementedError</code>?&quot;.</p>
<p>It's a little bit involved to achieve this, since there are quite a few locations in our codebase where we emit <code>call-non-callable</code> diagnostics. It would be nice to refactor that a bit so that all those locations call a single <code>report_non_callable_called()</code> function that also attaches the subdiagnostic -- I wouldn't want us to repeat the subdiagnostic logic everywhere we currently emit this diagnostic.</p>
<p>https://github.com/astral-sh/ruff/pull/21475 shows how a similar hint was added for <code>raise NotImplemented</code> (which causes us to emit <code>invalid-raise</code> rather than <code>call-non-callable</code>, so it's a different code path).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @AlexWaygood on 2025-11-15 19:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by @AlexWaygood on 2025-11-15 19:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Stable" by @carljm on 2025-11-15 21:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> removed by @AlexWaygood on 2025-11-18 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @AlexWaygood by @AlexWaygood on 2025-11-18 21:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-11-19 19:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 02:11:42 UTC
    </footer>
</body>
</html>
