<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use signature of `__init_subclass__` of superclasses to inform keyword-argument completion suggestions inside class definitions - astral-sh/ty #1777</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use signature of `__init_subclass__` of superclasses to inform keyword-argument completion suggestions inside class definitions</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1777">#1777</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-12-05 14:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-05 14:55</div>
            <div class="timeline-body"><p>In this snippet, the class definition <code>Bar</code> will fail because <code>Foo.__init_subclass__</code> states that subclasses must provide the <code>special_keyword</code> keyword argument when you inherit from <code>Foo</code>:</p>
<pre><code class="language-py">class Foo:
    def __init_subclass__(cls, special_keyword):
        pass

class Bar(Foo): ...
</code></pre>
<p>The definition of <code>Bar</code> must instead be:</p>
<pre><code class="language-py">class Bar(Foo, special_keyword=42): ...
</code></pre>
<p>or similar. We could look at the <code>__init_subclass__</code> signatures of classes already in the class definition to inform autocomplete suggestions for keyword arguments in this context.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @AlexWaygood on 2025-12-05 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">completions</span> added by @AlexWaygood on 2025-12-05 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-12-05 15:58</div>
            <div class="timeline-body"><p>It seems like the type checker should also error on the definition of <code>Bar</code> that doesn't provide <code>special_keyword</code>? I guess that should be a separate issue? (Maybe you already filed one and I didn't see it yet.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-05 16:03</div>
            <div class="timeline-body"><p>yeah I filed that one a few weeks/months ago ;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-05 16:04</div>
            <div class="timeline-body"><p>see https://github.com/astral-sh/ty/issues/1541</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dangotbanned">@dangotbanned</a> on 2025-12-05 23:05</div>
            <div class="timeline-body"><p>Sorely missing this in <code>pyright</code>/<code>pylance</code>, would be great to see better support in <code>ty</code></p>
<ul>
<li>https://github.com/microsoft/pylance-release/discussions/2781</li>
</ul>
<p>(I assume these are related, but ignore me if not)</p>
<p>The lacking <code>__init_subclass__</code> support in <code>pylance</code> <em>also</em> means symbols that are used in the defining context don't show up in <code>Find All References</code> either</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 02:11:50 UTC
    </footer>
</body>
</html>
