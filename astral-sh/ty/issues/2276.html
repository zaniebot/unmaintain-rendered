<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server: auto-indent works much worse when Pylance is disabled - astral-sh/ty #2276</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Server: auto-indent works much worse when Pylance is disabled</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/2276">#2276</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-12-30 13:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Consider the below video. With Pylance enabled (at the beginning of the video), hitting return automatically indents my cursor by 8 spaces, which is where I want it to be to add a new line to the beginning of my function. But with Pylance disabled (so that ty is the only Python LSP active), hitting return only automatically indents my cursor by 4 spaces</p>
<p>https://github.com/user-attachments/assets/d021e9d4-db44-441c-9423-63847d72e967</p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @AlexWaygood on 2025-12-30 13:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-30 13:40</div>
            <div class="timeline-body"><p>Yeah, ty doesn't do any auto-indent at all</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-30 13:42</div>
            <div class="timeline-body"><p>I'm also not sure if this is something that needs to be implemented in VS Code. At least, it's not obvious to me what LSP feature this corresponds to. Maybe format on type? https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#textDocument_onTypeFormatting</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Pre-stable 1" by @MichaReiser on 2025-12-31 15:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2026-01-05 15:19</div>
            <div class="timeline-body"><p>It's either that or like... semantic-tokens(???)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:21:37 UTC
    </footer>
</body>
</html>
