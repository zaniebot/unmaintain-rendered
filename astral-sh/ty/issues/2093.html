<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[ty + neovim] Language server diagnostics are not showing - astral-sh/ty #2093</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[ty + neovim] Language server diagnostics are not showing</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2093">#2093</a>
        opened by <a href="https://github.com/kuyugama">@kuyugama</a>
        on 2025-12-18 23:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kuyugama">@kuyugama</a> on 2025-12-18 23:15</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I'm having issue with diagnostics in <strong>zed</strong> and <strong>neovim</strong> with <code>ty</code> ls. Are they just disabled by default, or this is some sort of bug?</p>
<p>My neovim version is <strong>0.11.4</strong>, installed with <code>lazy.nvim</code>. And <code>ty</code> is installed by <code>mason.nvim</code>.</p>
<p>Testing it with simple code:</p>
<pre><code class="language-python">def some(a: str) -&gt; int:
    return 1

some()
</code></pre>
<p>But it doesn't show any diagnostics.</p>
<p><img width="1122" height="722" alt="Image" src="https://github.com/user-attachments/assets/1cd76c1f-63fd-4dae-9ac8-5885c0b50b34" /></p>
<p><img width="979" height="156" alt="Image" src="https://github.com/user-attachments/assets/b8db0920-3fc6-43a7-a8dc-862a5824f880" /></p>
<h3>Version</h3>
<p>0.0.2 [python package 0.0.3]</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @kuyugama on 2025-12-18 23:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @carljm on 2025-12-18 23:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-19 07:28</div>
            <div class="timeline-body"><p>I would certainly expect a diagnostic for <code>some()</code></p>
<p>Can you share your neovim configuration?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Zaloog">@Zaloog</a> on 2025-12-19 07:34</div>
            <div class="timeline-body"><p><img width="1108" height="187" alt="Image" src="https://github.com/user-attachments/assets/19376893-24d4-4544-91ea-343995840629" /></p>
<p>Cant reproduce that...
Did you follow the setup in https://docs.astral.sh/ty/editors/#neovim @kuyugama ?
Like Micha said, we would need more details about your config</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kuyugama">@kuyugama</a> on 2025-12-19 07:45</div>
            <div class="timeline-body"><p>@Zaloog looks like you have another ls, because <code>ty</code> rule for missing argument is called <code>missing-argument</code>. But, you get <code>reportCallIssue</code>, more like <code>pyright</code> kind of a message</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Zaloog">@Zaloog</a> on 2025-12-19 07:55</div>
            <div class="timeline-body"><p>@kuyugama
True... thought removing basedpyright from config was enough...
Just removed basedpyright completely from Mason, also get no diagnostics for your example.
Guess i have to check my config again</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kuyugama">@kuyugama</a> on 2025-12-19 08:32</div>
            <div class="timeline-body"><p>@MichaReiser</p>
<blockquote>
<p>I would certainly expect a diagnostic for <code>some()</code></p>
<p>Can you share your neovim configuration?</p>
</blockquote>
<p>Made clean installation of neovim (https://github.com/kuyugama/neovim.config) but there are still no diagnostics.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Zaloog">@Zaloog</a> on 2025-12-19 08:32</div>
            <div class="timeline-body"><p><img width="1519" height="55" alt="Image" src="https://github.com/user-attachments/assets/a947a40f-f03b-4c58-a235-9539525ebb18" /></p>
<p>I am getting this, even though I can install latest ty version when searching for it with <code>:Mason</code>.
I am using the default setup as shown in the docs for <code>nvim &lt;= 0.10</code></p>
<pre><code class="language-lua">            require('lspconfig').ty.setup({
                settings = {
                    ty = {}
                }
            })
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-19 12:05</div>
            <div class="timeline-body"><blockquote>
<p>I am getting this, even though I can install latest ty version when searching for it with <code>:Mason</code>. I am using the default setup as shown in the docs for <code>nvim &lt;= 0.10</code></p>
<pre><code>        require('lspconfig').ty.setup({
            settings = {
                ty = {}
            }
        })</code></pre>
</blockquote>
<p>Can you verify that you're using a recent version of the lspconfig package?</p>
<blockquote>
<p>Made clean installation of neovim (<a href="https://github.com/kuyugama/neovim.config?rgh-link-date=2025-12-19T08%3A32%3A12.000Z">kuyugama/neovim.config</a>) but there are still no diagnostics.</p>
</blockquote>
<p>Are there any neovim logs that you could share? I'm not at all familiar with lazyvim and neovim.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Zaloog">@Zaloog</a> on 2025-12-19 12:59</div>
            <div class="timeline-body"><p>Works for me now</p>
<p><img width="1166" height="187" alt="Image" src="https://github.com/user-attachments/assets/43a9c38b-fc61-4cc9-82b0-1f36505dba2e" /></p>
<p>updated to nvim 0.11 and also updated all packages.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kuyugama">@kuyugama</a> on 2025-12-19 13:00</div>
            <div class="timeline-body"><p>Now it suddenly started working, huh. All I did was re-enter the user environment :/</p>
<p><img width="3072" height="1664" alt="Image" src="https://github.com/user-attachments/assets/b270d911-5db1-4679-9543-5964a769c3fe" /></p>
<p>And this is my working environment:</p>
<p><img width="2244" height="1444" alt="Image" src="https://github.com/user-attachments/assets/30abc96e-ec31-49e9-ba56-5a341c58dd17" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-12-19 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kuyugama">@kuyugama</a> on 2025-12-19 13:23</div>
            <div class="timeline-body"><p>Hmmm, <code>ty</code> seems to not show diagnostics for files that are mentioned in <code>.gitignore</code>. Also, sometimes I need to reopen files to get diagnostics showing (When restarting ls server, this may be the neovim issue)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kuyugama">@kuyugama</a> on 2025-12-19 13:30</div>
            <div class="timeline-body"><blockquote>
<p>Hmmm, <code>ty</code> seems to not show diagnostics for files that are mentioned in <code>.gitignore</code></p>
</blockquote>
<p>Found a way to fix this â€” Configure <code>ty</code> with <code>src.respect-ignore-files = false</code> in <code>pyproject.toml</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-19 13:30</div>
            <div class="timeline-body"><p>You can disable gitignore exclusion, see https://docs.astral.sh/ty/reference/configuration/#respect-ignore-files</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:53:03 UTC
    </footer>
</body>
</html>
