<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to avoid doubled diagnostics ruff vs. ty? - astral-sh/ty #2195</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to avoid doubled diagnostics ruff vs. ty?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2195">#2195</a>
        opened by <a href="https://github.com/jamilraichouni">@jamilraichouni</a>
        on 2025-12-23 22:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jamilraichouni">@jamilraichouni</a> on 2025-12-23 22:51</div>
            <div class="timeline-body"><h3>Question</h3>
<p>Using Neovim v0.11.5 and <code>ruff</code> v0.14.10 I get this:</p>
<p><img width="1357" height="411" alt="Image" src="https://github.com/user-attachments/assets/2975e858-b1c8-4171-8551-e67e43dd195b" /></p>
<p>My config is at the top right hand side and I marked the diagnostic error message which appears twice.</p>
<p>I looked at https://github.com/astral-sh/ty/blob/8c54a1cca2c41414bd4bc56c3b7b0591007f6d0f/docs/reference/editor-settings.md and also scanned the issues first.</p>
<p>Many thanks,
Jamil</p>
<h3>Version</h3>
<p>0.0.6</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @jamilraichouni on 2025-12-23 22:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @AlexWaygood on 2025-12-23 22:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-12-23 23:59</div>
            <div class="timeline-body"><p>I'm more familiar with the ty side than the ruff side, but on the ty side you can just disable the <code>invalid-syntax</code> rule if you are also running ruff, e.g. in your <code>pyproject.toml</code>:</p>
<pre><code class="language-toml">[tool.ty.rules]
invalid-syntax = &quot;ignore&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-24 00:06</div>
            <div class="timeline-body"><blockquote>
<p>I'm more familiar with the ty side than the ruff side, but on the ty side you can just disable the <code>invalid-syntax</code> rule if you are also running ruff, e.g. in your <code>pyproject.toml</code>:</p>
<p>[tool.ty.rules]
invalid-syntax = &quot;ignore&quot;</p>
</blockquote>
<p>I don't think that's true @carljm. A decision was made that <code>invalid-syntax</code> should be different from all other error codes and should not be suppressable via the usual mechanism.</p>
<p>There is however a ruff setting to switch off reporting of syntax errors in the editor specifically: https://docs.astral.sh/ruff/editors/settings/#showsyntaxerrors.</p>
<p>And there is an open issue to add the same setting for ty: https://github.com/astral-sh/ty/issues/2106</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamilraichouni">@jamilraichouni</a> on 2025-12-24 00:11</div>
            <div class="timeline-body"><p>Thanks!</p>
<p>Tried that via</p>
<pre><code class="language-lua">vim.lsp.config(&quot;ty&quot;, {
    cmd = { &quot;ty&quot;, &quot;server&quot; },
    filetypes = { &quot;python&quot; },
    root_markers = { &quot;pyproject.toml&quot;, &quot;.git&quot;, &quot;ty.toml&quot; },
    settings = {
        -- https://github.com/astral-sh/ty/blob/main/docs/reference/editor-settings.md
        ty = {
            disableLanguageServices = true,
            configuration = {
                rules = {
                    [&quot;invalid-syntax&quot;] = &quot;ignore&quot;,
                },
            }
        }
    }
})
</code></pre>
<p>and the diagnostic still appears.
#2106 sounds like what I need.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-12-24 00:14</div>
            <div class="timeline-body"><p>Seems like you could probably set <code>showSyntaxErrors</code> to <code>false</code> in your Ruff LSP config today, if you don't want to wait for #2106 in ty?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2025-12-24 05:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:53:03 UTC
    </footer>
</body>
</html>
