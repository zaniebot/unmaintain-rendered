<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Default generic types should be assigned to type hints? - astral-sh/ty #2562</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Default generic types should be assigned to type hints?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2562">#2562</a>
        opened by <a href="https://github.com/gabriel-abn">@gabriel-abn</a>
        on 2026-01-19 12:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gabriel-abn">@gabriel-abn</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>Hi guys... me again :v</p>
<p>the problem/question is really straightforward:
shouldn't generics with a default type hint to this specific type when no overlap specified?</p>
<p>a really simple example:</p>
<pre><code class="language-python">from abc import ABC

class Product[T: float](ABC):
	amount: T

	def __init__(self, amount: T) -&gt; None:
		self.amount = amount

	def get_amount(self) -&gt; T:
		return self.amount


class Course(Product, ABC):
	course_name: str

	def __init__(self, amount: float, course_name: str) -&gt; None:
		super().__init__(amount)
		self.course_name = course_name


test = Course(amount=100, course_name=&quot;Mathematics&quot;)
reveal_type(test.get_amount())  # revealed: Unknown
</code></pre>
<p>when looking for the type hint on <code>.get_amount()</code> method, it shows that the return type is <code>Unknown</code>.</p>
<p><img width="716" height="527" alt="Image" src="https://github.com/user-attachments/assets/22aa36b0-5d6f-4f7b-8201-f5fe1bc0d041" /></p>
<p>just checked what it hints over the superclass constructor and it's set to Unknown as well...</p>
<hr />
<p>when i don't define a overlap type does it really set to unknown and ignore the default generic type?</p>
<h3>Version</h3>
<p>0.0.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @gabriel-abn on 2026-01-19 12:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-19 13:11</div>
            <div class="timeline-body"><p>Hi! I think ty is correct on this one -- <a href="https://mypy-play.net/?mypy=latest&amp;python=3.12&amp;gist=88cd195054dad69056a84b40fe708e27">mypy</a>, <a href="https://pyright-play.net/?pyrightVersion=1.1.405&amp;pythonVersion=3.13&amp;reportUnreachable=true&amp;code=GYJw9gtgBAhgRgYygSwgBzCALlAggIQGEAoYhAGxgGcqoAFcAEwFcEsBtAFQC4phywMLAF0AFAUIBKbsQCQMCGGYA7LL06lZjAKbAoAfX3JlyLIdFVt5YABpYilWqidJUALQA%2BKADkwy7TKyspbWAHQKSqpQALz2kViaOnoA5tpmEY4WVsCuns6BsiBpzCDKUCHA4Q6qpGSUNFCESiCWogxgLGx2EtJyCM2W%2BsoKAeVYIIm6BkYmZvpZ1nYZqrz8glh2-SWDwxCjVOO5Xr7%2BBVTMaNogopKhhsam5stYknLB2aFbLdpDIzFQXx2I1qWG0B3%2BTW22lEz2iAEYAAwIzYDH67bTRABEAFkhAALbQQITIBBUTGvIoAN20MHI%2BiwAE9LqJQQdQql0tUsDdXkA">pyright</a> and <a href="https://pyrefly.org/sandbox/?project=N4IgZglgNgpgziAXKOBDAdgEwEYHsAeAdAA4CeS4ATrgLYAEq2AxnRDcbpQC50CCAQgGEAOulFMoqOHDoAFapgCuTLgG0AKojpgouVFwC6ACgGCAlIlHCuqGrkXouW9VbFdMMMHQD63iOgguXyM4GCgwABoGOwcnOnUzOgBaAD46ADlcdBhLN2tQ8MJbe0c6AF5okq5Xaw8vAHMYIOLYkLCwRNT43OtrSibFSnQ6ArAimMca9AkpGUF7SlCjeVwlFSjTCysuJgXQ73RbHJGuShr3Tx8-AKDvNvColsctHT0uKN3B-cOaY7hTzppTLZHrVLhwRTEGCUIxmQi%2BfyBYJPLhmbb5dqET6LGAHI7lOjY75HKZceA8CrzL4wIwosoARgADIyPntcT8YGVhCAALL6AAWMBo%2BggTDg3LR6H6ADcYKgoN4uKQoUYyf9CI1mhMuLDJSAIiBFFxoHASORECAAMR0ACqxqggVI2gcKggWXFYiwlzAnGFQXQiho2GhRnwWn8qOSaX%2BlFydHjdH6XEGwzA3PSgeDsbowHwAF9uaJ9SAyP0dKRCFxaFAKNbZKQy1AnWgsHh8ISspB6oMRVlCKJrQBlGAwOj8rhcYhwRAAehnpc8TcInHqM5g6BnmFwYpnu3QXZ7xqyM%2B0nAY0tQ0EYsA7%2B4g3coveGuGIR-QptEZC4-KySVlizdYYKm5ABmQh6QAJkLdAQDzA1UFdWUADFoBgCgWxwAgzVgoA">pyrefly</a> all agree with us here.</p>
<p>The issue with your code as it is currently written is that your <code>Course</code> class does not provide type arguments to <code>Product</code> when it inherits from <code>Product</code>. For example, you could have written <code>class Course(Product[float], ABC): ...</code>, and then ty <a href="https://play.ty.dev/a9764cac-0eed-4d2d-aff6-6cbfc98fc4a0">would have inferred the type correctly</a>. Because you haven't provided any type arguments here, ty applies the &quot;default specialization&quot; of <code>Product</code> when it considers the type that <code>Course</code> should be understood as inheriting from. In this case, the default specialization of <code>Product</code> is <code>Product[Unknown]</code> (or <code>Product[Any]</code>, which means the same thing).</p>
<p>The reason why the default specialization of <code>Product</code> is <code>Product[Unknown]</code> rather than <code>Product[float]</code> is because <code>Product</code> is generic over a type variable <code>T</code> that has an <em>upper bound</em> (<code>float</code>) but does not have a <em>default</em>. If you want the default specialization of <code>Product</code> to be <code>Product[float]</code> rather than <code>Product[Unknown]</code>, you would have to write the class like this:</p>
<pre><code class="language-py">from abc import ABC

class Product[T: float = float](ABC):
	amount: T

	def __init__(self, amount: T) -&gt; None:
		self.amount = amount

	def get_amount(self) -&gt; T:
		return self.amount
</code></pre>
<p>Mypy and pyright both offer disabled-by-default rules that you can opt into that will warn you if you don't provide type arguments to a generic class, since it's often unexpected and undesirable for the default specialization to be implicitly applied like this. We intend to add such a rule at some point too -- you can follow https://github.com/astral-sh/ty/issues/2442 for updates on that!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2026-01-19 13:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-19 13:25:26 UTC
    </footer>
</body>
</html>
