<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[panic] &quot;too many cycle iterations&quot; panic during semantic analysis of dynamic imports - astral-sh/ty #1199</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[panic] &quot;too many cycle iterations&quot; panic during semantic analysis of dynamic imports</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1199">#1199</a>
        opened by <a href="https://github.com/floraCodes">@floraCodes</a>
        on 2025-09-18 07:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/floraCodes">@floraCodes</a> on 2025-09-18 07:18</div>
            <div class="timeline-body"><h2>Description</h2>
<p>The <code>ty</code> type checker panics with a cycle detection error when analyzing a Python file containing dynamic imports and complex type inference patterns.</p>
<h2>Error Message</h2>
<pre><code>error[panic]: Panicked at /Users/runner/.cargo/git/checkouts/salsa-e6f3bb7c2a062968/a3ffa22/src/function/execute.rs:228:25 when checking [av_scanning.py](vscode-file://vscode-app/Applications/Visual%20Studio%20Code%20copy.app/Contents/Resources/app/out/vs/code/electron-browser/workbench/workbench.html): exported_names(Id(12d52)): execute: too many cycle iterations
</code></pre>
<h2>Environment</h2>
<ul>
<li>Platform: macOS aarch64</li>
<li>Version: 0.0.1-alpha.20 (f41f00af1 2025-09-03)</li>
<li>Python version: 3.9+</li>
</ul>
<h2>Code Pattern That Triggers Panic</h2>
<p>The panic occurs in a file that contains:</p>
<ol>
<li>Dynamic imports inside try/except blocks (<code>import pyclamd</code>)</li>
<li>Complex class hierarchies with enums and dataclasses</li>
<li>Async methods with multiple return types</li>
<li>Type annotations with union types and optionals</li>
</ol>
<h2>Workaround</h2>
<p>Currently excluding the file from <code>ty</code> checking in <code>ty.toml</code>:</p>
<pre><code class="language-toml">[src]
exclude = [&quot;app/services/av_scanning.py&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/floraCodes">@floraCodes</a> on 2025-09-18 07:21</div>
            <div class="timeline-body"><p>probs related to #256</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @carljm on 2025-09-18 14:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 02:11:31 UTC
    </footer>
</body>
</html>
