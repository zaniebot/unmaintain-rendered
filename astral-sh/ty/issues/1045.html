<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oddities with ANSI escape codes and terminal output in the PyCharm console on Windows - astral-sh/ty #1045</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Oddities with ANSI escape codes and terminal output in the PyCharm console on Windows</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1045">#1045</a>
        opened by <a href="https://github.com/AA-Turner">@AA-Turner</a>
        on 2025-08-18 20:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AA-Turner">@AA-Turner</a></div>
            <div class="timeline-body">Summary
<p>When running <code>ty check</code> in the PyCharm console on Windows, the first line (&quot;WARN ty is pre-release ...&quot;) is not properly formatted, but contains ANSI escape codes:</p>
<pre><code>PS&gt; ty check
?[1;33mWARN?[0m ty is pre-release software and not ready for production use. Expect to encounter bugs, missing features, and fatal errors.
Checking ------------------------------------------------------------ 740/740 files
</code></pre>
<p><img alt="Image" src="https://github.com/user-attachments/assets/fb8f4f8a-b7c3-4329-bb3e-7f81874e6ac8"></p>
<p>All other lines are properly formatted with colour and boldface text, it just seems to the the first line that&#x27;s wrong.</p>
<p>Another problem is piping to a file -- the progress indicator is printed several times (with no formatting, but this seems expected):</p>
<pre><code>PS&gt; ty check &gt;tyout.txt
WARN ty is pre-release software and not ready for production use. Expect to encounter bugs, missing features, and fatal errors.
Checking ------------------------------------------------------------ 1/740 files
Checking ------------------------------------------------------------ 2/740 files
Checking ------------------------------------------------------------ 3/740 files
Checking ------------------------------------------------------------ 4/740 files
Checking ------------------------------------------------------------ 5/740 files
Checking ------------------------------------------------------------ 6/740 files
Checking ------------------------------------------------------------ 7/740 files
Checking ------------------------------------------------------------ 8/740 files
Checking ------------------------------------------------------------ 9/740 files
Checking ------------------------------------------------------------ 10/740 files
Checking ------------------------------------------------------------ 11/740 files
Checking ------------------------------------------------------------ 12/740 files
Checking ------------------------------------------------------------ 13/740 files
Checking ------------------------------------------------------------ 14/740 files
Checking ------------------------------------------------------------ 15/740 files
Checking ------------------------------------------------------------ 16/740 files
Checking ------------------------------------------------------------ 18/740 files
Checking ------------------------------------------------------------ 18/740 files
Checking ------------------------------------------------------------ 19/740 files
Checking ------------------------------------------------------------ 20/740 files
Checking ------------------------------------------------------------ 21/740 files
Checking ------------------------------------------------------------ 74/740 files
Checking ------------------------------------------------------------ 171/740 files
Checking ------------------------------------------------------------ 304/740 files
Checking ------------------------------------------------------------ 419/740 files
Checking ------------------------------------------------------------ 610/740 files
Checking ------------------------------------------------------------ 740/740 files
</code></pre>
<p>This is specific to the embeded PyCharm terminal, the Windows Terminal programme has neither of these errors - the WARN line is printed in orange and only one progress indicator line is printed.</p>
<p>Both terminal emulators (PyCharm embedded &amp; Windows Terminal) are running PowerShell Core 7.5.2, with the same active virtual environment running ty alpha 18.</p>
<p>Sorry that this is a rather odd bug report, but the behaviour is spooky! Feel free to close if the problem is with PyCharm, but I thought worth reporting as it&#x27;s something other users may run in to.</p>
<p>Thanks,
Adam</p>
Version
<p>ty 0.0.1-alpha.18 (d697cc092 2025-08-14)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/carljm">@carljm</a> on 2025-08-19 00:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-08-19 09:13</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:25:20 UTC
    </footer>
</body>
</html>
