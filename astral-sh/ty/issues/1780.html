<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support rewriting relative image URLs to absolute in docstrings? - astral-sh/ty #1780</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support rewriting relative image URLs to absolute in docstrings?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1780">#1780</a>
        opened by <a href="https://github.com/mflova">@mflova</a>
        on 2025-12-05 17:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mflova">@mflova</a></div>
            <div class="timeline-body"><p>It would be great if VS Code could render images embedded in Python docstrings, similar to how Pylance currently does.</p>
<p>As a reference, Pylance currently supports:</p>
<ul>
<li>Absolute paths (via <code>file://</code>)</li>
<li>Web-based URLs</li>
</ul>
<p>It does not support relative paths, as discussed here: <a href="https://github.com/microsoft/pylance-release/issues/7755">Pylance issue #7755</a>.</p>
<p>Is this something that must be done at the level of ty-vscode? Or does it have to be implemented somewhere else? Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-05 17:52</div>
            <div class="timeline-body"><blockquote>
<p>Is this something that must be done at the level of ty-vscode? Or does it have to be implemented somewhere else? Thanks!</p>
</blockquote>
<p>Not sure, that depends on VS Code's markdown support</p>
<p>Reading through the linked issue, this might just work if we detect them:</p>
<blockquote>
<p>This is really a function of how VS code renders the markdown (and not how Pylance generates it). Although maybe we could forcefully put the file:// prefix into the markdown...</p>
</blockquote>
<p>Can you share a sample markdown example that currently works in pylance?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @MichaReiser on 2025-12-05 17:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mflova">@mflova</a> on 2025-12-06 18:23</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>Is this something that must be done at the level of ty-vscode? Or does it have to be implemented somewhere else? Thanks!</p>
</blockquote>
<p>Not sure, that depends on VS Code's markdown support</p>
<p>Reading through the linked issue, this might just work if we detect them:</p>
<blockquote>
<p>This is really a function of how VS code renders the markdown (and not how Pylance generates it). Although maybe we could forcefully put the file:// prefix into the markdown...</p>
</blockquote>
<p>Can you share a sample markdown example that currently works in pylance?</p>
</blockquote>
<p>I am a bit confused here. I tried with <code>ty</code> LSP and the image seems to be rendering properly</p>
<p><img width="566" height="388" alt="Image" src="https://github.com/user-attachments/assets/53027158-b267-4642-95b0-45c1be93db3f" /></p>
<p>Maybe I did something wrong back then when I tried. But now I can get the very same functionalities that <code>pylance</code> is supporting (absolute paths and URL-based). So maybe there would be no action here. The only thing that would be great to have is the local relative paths. For private tools or libraries that need to use images, none of the currently supported options are feasible, since you cannot make the image public and an absolute path would be meaningless.</p>
<p>Would there be a possibility to work on this? Or is this something that purely depends on VSCode?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-06 18:30</div>
            <div class="timeline-body"><p>Clarifying: you're saying we have feature parity with pylance here?</p>
<p>I agree relative images would be really nice, although I wonder how often the relevant images are bundled in wheels (so this would only benefit docs for the thing you are working on). Also It would be helpful to have an example of a convention that appears in the actual python ecosystem.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mflova">@mflova</a> on 2025-12-06 18:39</div>
            <div class="timeline-body"><blockquote>
<p>Clarifying: you're saying we have feature parity with pylance here?</p>
<p>I agree relative images would be really nice, although I wonder how often the relevant images are bundled in wheels (so this would only benefit docs for the thing you are working on). Also It would be helpful to have an example of a convention that appears in the actual python ecosystem.</p>
</blockquote>
<p>If I did not make any mistake, the image-related one should be same as pylance. By mistake I mean using <code>pylance</code> when I thought I was using <code>ty</code>. But I double checked multiple times</p>
<p>About the convention, I am not sure if we will find any. As far as I am aware, Python LSPs cannot render images from a relative path (at least <code>pylance</code> nor <code>ty</code>). As a consequence, I am not sure if I can find any &quot;convention&quot;. I assume that the two main ways would be 1) a relative path with respect to the root or 2) a relative path with respect to the current file where the docstring is defined</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-06 18:46</div>
            <div class="timeline-body"><p>Yeah if there's a convention I would assume it's more of a Sphinx thing</p>
<p>(can confirm ty renders images in vscode) ((we don't do anything special we just let the markdown through to vscode))</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @Gankra on 2025-12-06 18:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Support rendering images in docstrings" to "Support rewriting relative image URLs to absolute in docstrings?" by @Gankra on 2025-12-06 18:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:21:12 UTC
    </footer>
</body>
</html>
