<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Compress the source text stored in `SourceText` - astral-sh/ty #537</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Compress the source text stored in <code>SourceText</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/537">#537</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2025-05-28 12:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><p>ty holds on to all read source files because it can&#x27;t purge the file without risking that it won&#x27;t be able to re-read the file later.</p>
<p>We should explore the possibility of storing the compressed source text instead of the raw string.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">memory</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-28 12:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Beta&quot; by <a href="https://github.com/carljm">@carljm</a> on 2025-06-11 00:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/ibraheemdev">@ibraheemdev</a> by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-24 10:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-24 10:41</div>
            <div class="timeline-body"><p>@ibraheemdev can you comment here with your findings and either close this issue (if you think it&#x27;s not worth doing) or leave it open until we have more accurate numbers, thanks to your upstream salsa work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ibraheemdev">@ibraheemdev</a> on 2025-06-24 19:53</div>
            <div class="timeline-body"><p>I think we should keep this open until we have better memory usage numbers for salsa values, it&#x27;s hard to measure if this is worth it without that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-08-15 07:01</div>
            <div class="timeline-body"><p>We now have those numbers and they show that source text is neglectibe in the grand scheme of things (this may change in the future if we make other optimizations but we can then revisit if this is worth exploring)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-08-15 07:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:24:41 UTC
    </footer>
</body>
</html>
