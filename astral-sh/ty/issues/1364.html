<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Playground crashes on trying to rename a file to nothing - astral-sh/ty #1364</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Playground crashes on trying to rename a file to nothing</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1364">#1364</a>
        opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a>
        on 2025-10-15 22:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>See attached video, the process is</p>
<ol>
<li>Delete a file's name</li>
<li>Press enter</li>
</ol>
<p>The playground will error in the console and be in an unstable state, where then navigating from and back to that file crashes the playground.</p>
<p>While doing this, the playground will first error with <code>Uncaught Error: Is a directory</code> and then crash with <code>Uncaught Error: null pointer passed to rust</code></p>
<p>Edit: I did some more testing, and this same crash also happens if you try renaming the file to <code>.</code> or <code>..</code> or similar things (ie, <code>./a</code> works but <code>./..</code> crashes)</p>
<p>https://github.com/user-attachments/assets/ccaf02f1-e416-41e2-bd41-f602a3e8bd87</p>
<details>
<summary>Full console errors when causing the crash</summary>

<p>Error on trying to rename the file to nothing:</p>
<pre><code>index-FQR4vDKH.js:64 Uncaught Error: Is a directory
    at Bp.l.wbg.__wbg_new_97ddeb994a38bb69 (index-FQR4vDKH.js:64:25749)
    at ty_wasm_bg-Uf3CeSIQ.wasm:0x81c9e1
    at ty_wasm_bg-Uf3CeSIQ.wasm:0x764aaa
    at ty_wasm_bg-Uf3CeSIQ.wasm:0x7e18a4
    at go.openFile (index-FQR4vDKH.js:64:18602)
    at ne (index-FQR4vDKH.js:87:7690)
    at le (index-FQR4vDKH.js:87:3379)
    at onRenamed (index-FQR4vDKH.js:76:63643)
    at h (index-FQR4vDKH.js:76:64469)
    at onBlur (index-FQR4vDKH.js:76:65036)
Bp.l.wbg.__wbg_new_97ddeb994a38bb69 @ index-FQR4vDKH.js:64
$func10208 @ ty_wasm_bg-Uf3CeSIQ.wasm:0x81c9e1
$func5269 @ ty_wasm_bg-Uf3CeSIQ.wasm:0x764aaa
$workspace_openFile @ ty_wasm_bg-Uf3CeSIQ.wasm:0x7e18a4
openFile @ index-FQR4vDKH.js:64
ne @ index-FQR4vDKH.js:87
le @ index-FQR4vDKH.js:87
onRenamed @ index-FQR4vDKH.js:76
h @ index-FQR4vDKH.js:76
onBlur @ index-FQR4vDKH.js:76
Gg @ index-FQR4vDKH.js:49
(anonymous) @ index-FQR4vDKH.js:49
Kc @ index-FQR4vDKH.js:49
As @ index-FQR4vDKH.js:49
Us @ index-FQR4vDKH.js:50
M_ @ index-FQR4vDKH.js:50
onKeyDown @ index-FQR4vDKH.js:76
Gg @ index-FQR4vDKH.js:49
(anonymous) @ index-FQR4vDKH.js:49
Kc @ index-FQR4vDKH.js:49
As @ index-FQR4vDKH.js:49
Us @ index-FQR4vDKH.js:50
M_ @ index-FQR4vDKH.js:50
</code></pre>
<p>Error on playground crash:</p>
<pre><code>index-FQR4vDKH.js:64 Uncaught Error: null pointer passed to rust
    at Bp.l.wbg.__wbg_wbindgenthrow_4c11a24fca429ccf (index-FQR4vDKH.js:64:29195)
    at ty_wasm_bg-Uf3CeSIQ.wasm:0x819901
    at ty_wasm_bg-Uf3CeSIQ.wasm:0x81990e
    at ty_wasm_bg-Uf3CeSIQ.wasm:0x805f9b
    at Ge.path (index-FQR4vDKH.js:64:6385)
    at Xv (index-FQR4vDKH.js:76:65256)
    at index-FQR4vDKH.js:87:5887
    at Object.yd [as useMemo] (index-FQR4vDKH.js:49:42702)
    at ge.useMemo (index-FQR4vDKH.js:18:7241)
    at h1 (index-FQR4vDKH.js:87:5785)
Bp.l.wbg.__wbg_wbindgenthrow_4c11a24fca429ccf @ index-FQR4vDKH.js:64
$func10107 @ ty_wasm_bg-Uf3CeSIQ.wasm:0x819901
$func10108 @ ty_wasm_bg-Uf3CeSIQ.wasm:0x81990e
$filehandle_path @ ty_wasm_bg-Uf3CeSIQ.wasm:0x805f9b
path @ index-FQR4vDKH.js:64
Xv @ index-FQR4vDKH.js:76
(anonymous) @ index-FQR4vDKH.js:87
yd @ index-FQR4vDKH.js:49
ge.useMemo @ index-FQR4vDKH.js:18
h1 @ index-FQR4vDKH.js:87
g1 @ index-FQR4vDKH.js:87
Ru @ index-FQR4vDKH.js:49
Fu @ index-FQR4vDKH.js:49
Pd @ index-FQR4vDKH.js:49
Tg @ index-FQR4vDKH.js:49
Qm @ index-FQR4vDKH.js:49
ms @ index-FQR4vDKH.js:49
vg @ index-FQR4vDKH.js:49
Ug @ index-FQR4vDKH.js:49
dl @ index-FQR4vDKH.js:49
Hg @ index-FQR4vDKH.js:49
(anonymous) @ index-FQR4vDKH.js:49
</code></pre>
</details>

<h3>Version</h3>
<p>Playground (73520e4ac)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">playground</span> added by @AlexWaygood on 2025-10-15 23:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fatal</span> added by @AlexWaygood on 2025-10-15 23:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @MichaReiser on 2025-11-14 08:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:20:48 UTC
    </footer>
</body>
</html>
