<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature request: Signature help: add support for annotated-doc (FastAPI) - astral-sh/ty #2478</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Feature request: Signature help: add support for annotated-doc (FastAPI)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/2478">#2478</a>
        opened by <a href="https://github.com/tiangolo">@tiangolo</a>
        on 2026-01-13 09:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tiangolo">@tiangolo</a></div>
            <div class="timeline-body"><p>I love ty! ðŸ«¶</p>
<hr />
<p>I'm not sure if this is the right repo or if it should be on the main ty repo.</p>
<h2>Description</h2>
<p>I would like ty to provide better support for the <strong>Signature help</strong> (I think that's the name?) for FastAPI's methods and classes.</p>
<h2>Annotated Doc</h2>
<p>So, what I'm asking is actually support for annotated-doc.</p>
<p>In FastAPI, I document parameters/arguments in structured Python instead of a micro syntax in docstrings, I use: https://github.com/fastapi/annotated-doc/ instead of numpydoc, sphinx, or other things.</p>
<p>The code looks like this:</p>
<pre><code class="language-Python">from typing import Annotated

from annotated_doc import Doc

def hi(name: Annotated[str, Doc(&quot;Who to say hi to&quot;)]) -&gt; None:
    print(f&quot;Hi, {name}!&quot;)
</code></pre>
<p>It is supported by mkdocstrings for the online docs, but currently, no editor or language server supports it.</p>
<p>Part of the idea with annotated-doc was that it would be relatively simple for tooling to add support for it, as all the data is in Python syntax, would be extracted from the AST, and so on, and rendered with Markdown.</p>
<h2>Preview</h2>
<p>This FastAPI code:</p>
<pre><code class="language-Python">from fastapi import FastAPI

app = FastAPI()


@app.get(&quot;/{item_id}&quot;)
async def read_item(item_id: int):
    return {&quot;item_id&quot;: item_id, &quot;name&quot;: f&quot;Item {item_id}&quot;}
</code></pre>
<p>When triggering signature help for <code>@app.get()</code>:</p>
<p><img width="1164" height="337" alt="Image" src="https://github.com/user-attachments/assets/3cdbd2fe-117c-49c9-8ddf-85ba1e9fbdba" /></p>
<h3>Current</h3>
<p>Currently, the signature help looks like this:</p>
<p><img width="763" height="874" alt="Image" src="https://github.com/user-attachments/assets/ddabcf75-e28e-4d0e-9277-cd9a045eab72" /></p>
<h3>Desired</h3>
<p>I would like it to look, for example, like this:</p>
<p><img width="755" height="1335" alt="Image" src="https://github.com/user-attachments/assets/7ddfe47b-59f3-4076-97fe-f302f36c6d69" /></p>
<h2>Other Editors</h2>
<p>I see this repo is the one that says &quot;signature help&quot;, but I would suspect it would be better supported at the ty language server side so that Zed (and others) can also benefit from it.</p>
<h2>FastAPI support</h2>
<p>I think this would also mean that ty and the ty language server would be able to claim having the best FastAPI support for editors. Which I think is nice.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2026-01-13 10:14</div>
            <div class="timeline-body"><p>Thanks for the kind words and the detailed write-up.</p>
<p>This is related to https://github.com/astral-sh/ty/issues/504, although we could maybe special case some of it in the server only</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @MichaReiser on 2026-01-13 10:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-13 10:21:20 UTC
    </footer>
</body>
</html>
