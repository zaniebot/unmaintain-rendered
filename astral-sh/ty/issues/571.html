<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`ty check` sync packages with `uv.lock` - astral-sh/ty #571</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>ty check</code> sync packages with <code>uv.lock</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/571">#571</a>
        opened by <a href="https://github.com/dkang-quora">@dkang-quora</a>
        on 2025-06-03 06:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dkang-quora">@dkang-quora</a></div>
            <div class="timeline-body">Summary
<p><code>.venv/bin/python -m ty check</code> modifies the existing installation and runs the check on the old version.
I use <code>uv pip sync requirements.txt</code> and <code>ty check</code> seems to sync with uv.lock which is out-of-sync in my usage. There should be an option to disable the sync.</p>
<p>.venv/lib/python3.12/site-packages/some_package-0.1.1255443.dist-info/
-&gt;
.venv/lib/python3.12/site-packages/some_package-0.1.1097115.dist-info/</p>
Version
<p>ty 0.0.1-alpha.8</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-03 06:56</div>
            <div class="timeline-body"><p>I don&#x27;t think I follow the problem you&#x27;re running into. ty doesn&#x27;t have a uv integration. It simply attempts to locate your local virtual environment by respecting the <code>VIRTUAL_ENV</code> environment variable or checking if a <code>.venv</code> directory exists (and is a virtual environment). It then uses the packages that are installed into the virtual environment.</p>
<p>Can you try running ty with <code>-vv</code>. It will then print additiona logs telling you which virtual environment it uses:</p>
<pre><code>2025-06-03 08:54:43.43533 DEBUG Discovering virtual environment in `/Users/micha/astral/ruff-vscode`
2025-06-03 08:54:43.435343 DEBUG Found `.venv` folder at `/Users/micha/astral/ruff-vscode/.venv`
2025-06-03 08:54:43.435375 DEBUG Attempting to parse virtual environment metadata at &#x27;/Users/micha/astral/ruff-vscode/.venv/pyvenv.cfg&#x27;
2025-06-03 08:54:43.435409 DEBUG Searching for site-packages directory in `sys.prefix` path `/Users/micha/astral/ruff-vscode/.venv`
2025-06-03 08:54:43.436033 DEBUG Resolved site-packages directories for this virtual environment are: SitePackagesPaths({&quot;/Users/micha/astral/ruff-vscode/.venv/lib/python3.12/site-packages&quot;})
2025-06-03 08:54:43.436202 DEBUG Adding site-packages search path &#x27;/Users/micha/astral/ruff-vscode/.venv/lib/python3.12/site-packages&#x27;
</code></pre>
<blockquote>
<p>.venv/lib/python3.12/site-packages/some_package-0.1.1255443.dist-info/
-&gt;
.venv/lib/python3.12/site-packages/some_package-0.1.1097115.dist-info/</p>
</blockquote>
<p>Does that mean you&#x27;ve the same package installed twice in the same virtual environment with different versions?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-info</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-06-03 06:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dkang-quora">@dkang-quora</a> on 2025-06-03 07:47</div>
            <div class="timeline-body"><p>Sorry, I think it&#x27;s <code>uv run</code> which modified the env.</p>
<pre><code>‚ùØ uv run ty check
Uninstalled 2 packages in 94ms
Installed 2 packages in 14ms
WARN ty is pre-release software and not ready for production use. Expect to encounter bugs, missing features, and fatal errors.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/dkang-quora">@dkang-quora</a> on 2025-06-03 07:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:24:44 UTC
    </footer>
</body>
</html>
