<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inconsistent highlighting of builtins - astral-sh/ty #1470</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Inconsistent highlighting of builtins</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1470">#1470</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2025-11-03 14:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-03 14:10</div>
            <div class="timeline-body"><p>ty's builtins highlighting is inconsistent in a few types:</p>
<ul>
<li><code>float</code> isn't highlighted as a builtin (because it's a union internally)</li>
<li>builtins in type aliases (value position) aren't highlighted as builtins</li>
</ul>
<p>ty:</p>
<p><img width="313" height="316" alt="Image" src="https://github.com/user-attachments/assets/1fe20e0d-dbf2-4a58-825e-3befcac6d278" /></p>
<p>pylance</p>
<p><img width="313" height="316" alt="Image" src="https://github.com/user-attachments/assets/a92f3475-d925-410d-a5e5-5edc59b3000e" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @MichaReiser on 2025-11-03 14:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @MichaReiser on 2025-11-03 14:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MatthewMckee4">@MatthewMckee4</a> on 2025-11-03 15:18</div>
            <div class="timeline-body"><p>Don't ty and pylance both highlight in the same way. What language server do you have activated in that screenshot?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-03 15:41</div>
            <div class="timeline-body"><p>Hmm, right, it does. I must have messed up my extension settings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Use different highlighting for builtin types" to "Inconsistent highlighting of builtins" by @MichaReiser on 2025-11-04 14:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-04 14:05</div>
            <div class="timeline-body"><p>I updated the issue description</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-11 19:14</div>
            <div class="timeline-body"><p>This is slightly more involved and the underlying issue really is that we do classification based on the type rather than definition because <code>definition_kind_for_name</code> is very limited (it only looks at the current scope).</p>
<p>My very naive approach of using <code>definitions_for_name</code> instead lead to some nice improvements in tests but it also regressed some other tests.</p>
<p>Ultimately the fix here is to address this todo from <a href="https://github.com/astral-sh/ty/issues/791">Follow up on TODOs in semantic token provider #791</a></p>
<blockquote>
<p>Improve classification for name tokens that are imported from other modules. Currently, these are classified based on their types, which often means they're classified as variables when they should be classes, etc.</p>
</blockquote>
<p>So I think we can close this as a duplicate</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-11-11 19:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 02:11:39 UTC
    </footer>
</body>
</html>
