<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attributes of `types.FunctionType` should be available on `lambda` functions - astral-sh/ty #567</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Attributes of <code>types.FunctionType</code> should be available on <code>lambda</code> functions</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/567">#567</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-06-02 11:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>ty currently emits a false-positive diagnostic on this snippet:</p>
<pre><code class="language-py">from typing import reveal_type

x = lambda y: y

# error[unresolved-attribute] Type `(y) -&gt; Unknown` has no attribute `__code__`
reveal_type(x.__code__)  # revealed: Unknown
</code></pre>
<p>https://play.ty.dev/84a1b067-9670-4463-82ce-0fc025997c91</p>
<p>All <code>lambda</code> functions are instances of <code>types.FunctionType</code>, so all attributes available on <code>types.FunctionType</code> instances should also be available on <code>lambda</code>s.</p>
<p>Following https://github.com/astral-sh/ruff/pull/18242 this is easy to fix: we just need to change this line so that it calls <code>CallableType::function_like()</code> rather than <code>CallableType::single()</code> (and add some tests).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @AlexWaygood on 2025-06-02 11:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @AlexWaygood on 2025-06-02 11:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">runtime semantics</span> added by @AlexWaygood on 2025-06-02 11:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @MichaReiser on 2025-06-02 11:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lipefree">@lipefree</a> on 2025-06-02 11:59</div>
            <div class="timeline-body"><p>I can try to resolve this issue !</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-06-02 15:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:20:03 UTC
    </footer>
</body>
</html>
