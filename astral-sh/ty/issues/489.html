<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`ty` doesn't catch renaming arguments in overrides - astral-sh/ty #489</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>ty</code> doesn't catch renaming arguments in overrides</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/489">#489</a>
        opened by <a href="https://github.com/mathialo">@mathialo</a>
        on 2025-05-22 17:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mathialo">@mathialo</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>First of all, after having migrated every project I'm involved with to <code>ruff</code> and <code>uv</code>, I'm really excited to see where <code>ty</code> is going!</p>
<p><strong>Summary</strong></p>
<p>When overriding methods in subclasses, it's important to keep the same argument names since any argument in Python can be given as a keyword argument. If an override in a subclass changes the name of a parameter, it breaks the polymorphism for any user of the class using keyword arguments</p>
<p><strong>To Reproduce</strong></p>
<pre><code class="language-python">from abc import ABC, abstractmethod


class Adder(ABC):
    @abstractmethod
    def add(self, a: int, b: int) -&gt; int:
        pass


class MyAdder(Adder):
    def add(self, a: int, b: int) -&gt; int:
        return a + b


class OtherAdder(Adder):
    def add(self, a: int, new_b: int) -&gt; int:
        return a + new_b


def use_adder(adder: Adder) -&gt; int:
    return adder.add(a=1, b=2)


print(f&quot;1 + 2 = {use_adder(MyAdder())}&quot;)  # works
print(f&quot;1 + 2 = {use_adder(OtherAdder())}&quot;)  # broken, but type checks in ty
</code></pre>
<p>The code example above should not type check, as <code>OtherAdder</code> is not a valid subclass of <code>Adder</code>. If I type check this code in <code>pyright</code>, it correctly identifies this issue:</p>
<pre><code class="language-commandline">$ uvx pyright classes.py
/path/to/classes.py
  /path/to/classes.py:16:9 - error: Method &quot;add&quot; overrides class &quot;Adder&quot; in an incompatible manner
    Parameter 3 name mismatch: base parameter is named &quot;b&quot;, override parameter is named &quot;new_b&quot; (reportIncompatibleMethodOverride)
1 error, 0 warnings, 0 informations
</code></pre>
<p><code>ty</code> lets this error through:</p>
<pre><code class="language-commandline">$ uvx ty check classes.py
WARN ty is pre-release software and not ready for production use. Expect to encounter bugs, missing features, and fatal errors.
All checks passed!
</code></pre>
<h3>Version</h3>
<p>ty 0.0.1-alpha.6</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-05-22 17:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-05-22 17:47</div>
            <div class="timeline-body"><p>Thanks! Yes, we don't enforce the Liskov Substitution Principle at all yet. This is a priority for us to complete before the Beta release.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:19:58 UTC
    </footer>
</body>
</html>
