<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Failed to parse pyenv.cfg when there is &quot;=&quot; in the command - astral-sh/ty #522</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Failed to parse pyenv.cfg when there is &quot;=&quot; in the command</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/522">#522</a>
        opened by <a href="https://github.com/kkpattern">@kkpattern</a>
        on 2025-05-27 10:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kkpattern">@kkpattern</a></div>
            <div class="timeline-body">Summary
<p>Reproduce step:</p>
<pre><code>python3 -m venv .venv --prompt hello_ty
. ./.venv/bin/activate
pip install ty
ty check .
</code></pre>
<p>output:</p>
<pre><code>ty failed
  Cause: Invalid search path settings
  Cause: Failed to discover the site-packages directory: Failed to parse the pyvenv.cfg file at /home/.../ty-playground/.venv/pyvenv.cfg because line 6 has too many &#x27;=&#x27; characters
</code></pre>
<p>The pyvenv.cfg looks like this:</p>
<pre><code>home = /usr/local/bin
include-system-site-packages = false
version = 3.11.12
prompt = &#x27;hello_ty&#x27;
executable = /usr/local/bin/python3.11
command = /usr/local/bin/python3 -m venv --prompt=&quot;hello_ty&quot; /home/.../ty-playground/.venv
</code></pre>
<p>I&#x27;m not sure if this is a bug with ty or python venv. Maybe the command should be escaped?</p>
Version
<p>ty 0.0.0-alpha.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-27 10:25</div>
            <div class="timeline-body"><p>Can you try a more recent ty version? This should have been fixed a few releases back (<a href="https://github.com/astral-sh/ruff/pull/18144">astral-sh/ruff#18144</a>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-27 10:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kkpattern">@kkpattern</a> on 2025-05-27 10:29</div>
            <div class="timeline-body"><p>Ah sorry. It&#x27;s fine with <code>ty 0.0.1a7</code>.  I thought ty 0.0.0-alpha.7 is the latest version.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/kkpattern">@kkpattern</a> on 2025-05-27 10:32</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:24:40 UTC
    </footer>
</body>
</html>
