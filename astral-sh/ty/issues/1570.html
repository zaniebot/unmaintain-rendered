<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[playground] External Python packages - astral-sh/ty #1570</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[playground] External Python packages</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1570">#1570</a>
        opened by <a href="https://github.com/mtshiba">@mtshiba</a>
        on 2025-11-15 14:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mtshiba">@mtshiba</a></div>
            <div class="timeline-body"><p>Being able to use external Python packages in the ty playground would be very useful for things like bug reports.</p>
<p>The ty playground uses pyodide to run scripts. pyodide has a lightweight package manager called micropip, which I think we can leverage. Installed packages appear to be accessible via <code>pyodide.FS</code>.</p>
<p>https://micropip.pyodide.org/en/stable/project/api.html#module-micropip</p>
<pre><code class="language-js">await pyodide.loadPackage(&quot;micropip&quot;);
const micropip = pyodide.pyimport(&quot;micropip&quot;);
await micropip.install('snowballstemmer');
</code></pre>
<p>It seems that micropip does not have as full-featured package management as pip/uv, but being able to download Python code would be sufficient.</p>
<p>The interface I imagine would allow dependencies to be specified by adding a &quot;dependencies&quot; section to ty.json, or by uploading a uv.lock file. Of course, micropip doesn't understand uv.lock, but dependencies can be specified via a pyodide-lock.json, a pyodide-specific lock file. In other words, all we need to do is implement a conversion from uv.lock to pyodide-lock.json.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">playground</span> added by @AlexWaygood on 2025-11-15 14:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-11-15 14:10</div>
            <div class="timeline-body"><p>This would indeed be a very cool and useful feature. https://mypy.app/, which is a pyodide-based alternative mypy playground, has this feature -- the source code for the playground is at https://github.com/emmatyping/mypy.app.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @AlexWaygood on 2025-11-15 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/silamon">@silamon</a> on 2025-11-19 16:59</div>
            <div class="timeline-body"><p>The source code kind of suggest that ty will need to be published as a pyodide wheel to make this all work. Importing a package into the playground is not a big thing to add, but making the imports of that package visible to ty is not straightforward.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:20:59 UTC
    </footer>
</body>
</html>
