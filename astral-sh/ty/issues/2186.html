<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crippled reveal_type output for --output-format=gitlab/github - astral-sh/ty #2186</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Crippled reveal_type output for --output-format=gitlab/github</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2186">#2186</a>
        opened by <a href="https://github.com/abelcheung">@abelcheung</a>
        on 2025-12-23 15:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/abelcheung">@abelcheung</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p><code>reveal_type</code> output works when <code>--output-format</code> is set to <code>full</code> or <code>concise</code>, but not for <code>github</code> or <code>gitlab</code>. Here is a minimal example:</p>
<pre><code class="language-python">from typing import reveal_type

x = &quot;str&quot;.lower()
reveal_type(1)
reveal_type(x)
</code></pre>
<p>Concise output produces:</p>
<pre><code>ty check --python-version 3.11 --output-format concise test.py
test.py:4:13: info[revealed-type] Revealed type: `Literal[1]`
test.py:5:13: info[revealed-type] Revealed type: `LiteralString`
Found 2 diagnostics
</code></pre>
<p>However the type is chopped off from <code>github</code> or <code>gitlab</code> result. For example, this is the output of <code>github</code> output format:</p>
<pre><code>ty check --python-version 3.11 --output-format github test.py
::notice title=ty (revealed-type),file=[redacted]]\test.py,line=4,col=13,endLine=4,endColumn=14::test.py:4:13: revealed-type: Revealed type
::notice title=ty (revealed-type),file=[redacted]\test.py,line=5,col=13,endLine=5,endColumn=14::test.py:5:13: revealed-type: Revealed type
</code></pre>
<h3>Version</h3>
<p>ty 0.0.5 (d37b7dbd9 2025-12-20)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by @AlexWaygood on 2025-12-23 15:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "M1" by @AlexWaygood on 2025-12-23 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @AlexWaygood on 2025-12-23 15:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ntBre">@ntBre</a> on 2025-12-23 15:30</div>
            <div class="timeline-body"><p>Ah the GitHub and GitLab formats use <code>Diagnostic::body</code>, while concise uses <code>Diagnostic::concise_message</code>. It doesn't seem to break any Ruff tests to switch them to <code>concise_message</code>, so that might do the trick!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @ntBre by @ntBre on 2025-12-23 15:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ntBre on 2025-12-24 15:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:21:32 UTC
    </footer>
</body>
</html>
