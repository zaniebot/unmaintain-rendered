<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-completion does not work for local variables in VSCode - astral-sh/ty #1864</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Auto-completion does not work for local variables in VSCode</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1864">#1864</a>
        opened by <a href="https://github.com/philippkarg">@philippkarg</a>
        on 2025-12-12 13:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/philippkarg">@philippkarg</a> on 2025-12-12 13:24</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><img width="686" height="195" alt="Image" src="https://github.com/user-attachments/assets/044926d8-3c3b-471a-a161-7f435c230b9e" /></p>
<p>I have noticed that <code>ty</code>'s auto-completion does not work for local variables in VSCode (haven't tested other IDEs).</p>
<p>Code snippet:</p>
<pre><code class="language-py">def foo(my_var: str) -&gt; str:
    my_str = f&quot;{my_var} hello!&quot;
    return my


if __name__ == &quot;__main__&quot;:
    foo(&quot;test&quot;)
</code></pre>
<h3>Additional information</h3>
<p><code>ty</code>-related VSCode settings:</p>
<pre><code class="language-json">{
    &quot;ty.experimental.rename&quot;: true,
    &quot;python.languageServer&quot;: &quot;None&quot;,
    &quot;ty.completions.autoImport&quot;: false
}
</code></pre>
<p><code>ty</code> language server logs (after restarting it):</p>
<pre><code>2025-12-12 14:16:22.699006920  INFO Server shut down
[Error - 2:16:22 PM] Server process exited with code 0.
2025-12-12 14:16:22.727296702  INFO Version: 0.0.1-alpha.33
2025-12-12 14:16:22.732810333  INFO Defaulting to python-platform `linux`
2025-12-12 14:16:22.733372001  INFO Python version: Python 3.13, platform: linux
2025-12-12 14:16:22.738145528  INFO Indexed 1 file(s) in 0.002s
</code></pre>
<p><code>ty</code> extension logs:</p>
<pre><code>2025-12-12 14:16:22.692 [info] Using interpreter: /home/philippkarg/test/ty-test/.venv/bin/python
2025-12-12 14:16:22.693 [info] Initialization options: {}
2025-12-12 14:16:22.719 [info] Using the ty binary: /home/philippkarg/test/ty-test/.venv/bin/ty
2025-12-12 14:16:22.720 [info] Found executable at /home/philippkarg/test/ty-test/.venv/bin/ty
2025-12-12 14:16:22.720 [info] Server run command: /home/philippkarg/test/ty-test/.venv/bin/ty server
2025-12-12 14:16:22.720 [info] Server: Start requested.
</code></pre>
<h3>Version</h3>
<p>ty 0.0.1-alpha.33</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-12-12 13:38</div>
            <div class="timeline-body"><p>Duplicate of #1294 (the original issue was an incorrect type, but it morphed into the failure mode you observe).</p>
<p>And it's fixed in https://github.com/astral-sh/ruff/pull/21872, but isn't in a release yet.</p>
<p>I confirmed that this specific issue is indeed fixed on current <code>main</code>. Thank you for the report!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2025-12-12 13:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/philippkarg">@philippkarg</a> on 2025-12-12 19:37</div>
            <div class="timeline-body"><p>Thanks for getting back to me so quickly. I otherwise love ty so far!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-12-12 19:41</div>
            <div class="timeline-body"><p>This should be fixed in the latest <code>0.0.1-alpha.34</code> release of ty and the <code>2025.69.0</code> release of the VS Code extension.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:55:22 UTC
    </footer>
</body>
</html>
