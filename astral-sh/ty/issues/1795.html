<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a CI job doing randomized daily fuzzing using the py-fuzzer script - astral-sh/ty #1795</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a CI job doing randomized daily fuzzing using the py-fuzzer script</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1795">#1795</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-12-07 15:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a></div>
            <div class="timeline-body"><p>We currently have a CI job that runs the py-fuzzer script on every ty PR: https://github.com/astral-sh/ruff/blob/285d6410d3dcc0567fee1d72bc46bfe3008af36b/.github/workflows/ci.yaml#L653-L680. However, this CI job always runs ty on the same 1,000 fuzzer seeds each time. It compares the PR branch against <code>main</code>, and checks that ty does not introduce any <em>new</em> panics on the first 1,000 seeds compared to the <code>main</code> branch.</p>
<p>Ideally ty would be sufficiently panic-free (and stack-overflow-free) that we would be able to add a daily CI job invoking ty on <em>randomized</em> fuzzer seeds. We already have such a CI job for the parser -- the CI job runs the parser on 1,000 randomly selected fuzzer seeds every night, and opens an issue if it found any panics: https://github.com/astral-sh/ruff/blob/main/.github/workflows/daily_fuzz.yaml.</p>
<p>This issue tracks adding a similar daily CI job for ty.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-07 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-07 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fuzzer</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-07 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-07 15:40</div>
            <div class="timeline-body"><p>There are currently only two stack overflows (and no panics) on the first 10,000 py-fuzzer seeds, so I&#x27;d say we&#x27;re pretty close to being able to add such a CI job.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Stable&quot; by <a href="https://github.com/carljm">@carljm</a> on 2025-12-08 17:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:26:18 UTC
    </footer>
</body>
</html>
