<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add inlay hint for int/float/complex special case - astral-sh/ty #1498</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add inlay hint for int/float/complex special case</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1498">#1498</a>
        opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a>
        on 2025-11-07 02:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a> on 2025-11-07 02:21</div>
            <div class="timeline-body"><p>It would be nice if ty added an inlay hint on typings that use the int/float/complex special case. Currently, a type hint like this:</p>
<pre><code class="language-py">x: float
</code></pre>
<p>Gets no inlay hint, while <code>x</code> is actually <code>int | float</code>. Ty does not try to hide this if you do <code>reveal_type(x)</code>, so it would be nice if for consistency an inlay hint was added also saying that.</p>
<p>Here's roughly what I would like to see, where the text in the comments would be the new inlay hints:</p>
<pre><code class="language-py">a: float# | int
b: complex# | float | int
c: complex | float# | int
</code></pre>
<hr />
<p>What follows are some additional thoughts on more complex cases, but even just working only with a single <code>float</code>/<code>complex</code> type hint would be a big improvement.</p>
<p>One wrinkle is what would happen on more complex unions where the special case is not the last item? (using <code>js</code> highlighting for inline comments)</p>
<pre><code class="language-js">d: float | str// | int
e: float/* | int*/ | str
</code></pre>
<p>And what if it's float and complex, but split apart?</p>
<pre><code class="language-js">f: complex | list | float | str// | int
f: complex | list | float/* | int*/ | str
g: complex/* | int*/ | str | float
</code></pre>
<p>What if it's an existing type with one of the union members?</p>
<pre><code class="language-py">type MyType = int | None
h: MyType | complex# | float
i: MyType | complex# | float | int
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @AlexWaygood on 2025-11-07 03:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-07 14:15</div>
            <div class="timeline-body"><p>I very well understand that <code>float</code> being an alias for <code>float | int</code> is surprising. I was surprised to learn about it. But I'm not convinced that adding an inlay to <code>x: float</code> is helpful. In fact, I think it would be rather confusing because it reads as <code>x: float | int</code> and I'd be confused whether I'm supposed to add <code>int</code> to the union. Inlays also have the downside that they take up a significant amount of space in your editor and finding the right level of verbosity is already a challenge.</p>
<p>We do show <code>float | int</code> if you hover <code>x</code>, mirroring what reveal type does. I think this is sufficient and avoids repeating content. Can you say more why you want inlays in addition to hover?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-11-14 08:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 02:11:40 UTC
    </footer>
</body>
</html>
