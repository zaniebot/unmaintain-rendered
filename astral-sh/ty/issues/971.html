<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wrong type for 10**1.2 - astral-sh/ty #971</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>wrong type for 10**1.2</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/971">#971</a>
        opened by <a href="https://github.com/chris-RNG">@chris-RNG</a>
        on 2025-08-12 09:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/chris-RNG">@chris-RNG</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>The result of an integer to the power of a float returns type int instead of float. The <a href="https://play.ty.dev/b1951f72-125d-4a63-bd51-bcae07139e2f">Minimal Playground Example</a> shows int instead of float.
If I use it with jax Array, type int is expected instead of Array. If i use a a float like 10.0**1.2 its working as expected.</p>
<pre><code class="language-python"># /// script
# requires-python = &quot;&gt;=3.13&quot;
# dependencies = [&quot;jax&quot;]
# ///

import jax
from jax import Array


def main() -&gt; None:
    a: Array = jax.numpy.array([1.1, 2.1, 3.1])
    b: int = 10**a
    c: Array = 10**a
    d: Array = 10.0**a
    e: Array = jax.numpy.power(10, a)
    f: int = 10**1.2
    print(f&quot;a: {a}, b: {b}, c: {c}, d: {d}, e: {e}, f: {f}&quot;)


if __name__ == &quot;__main__&quot;:
    main()

</code></pre>
<p>Output of ty check:</p>
<pre><code>WARN ty is pre-release software and not ready for production use. Expect to encounter bugs, missing features, and fatal errors.
Checking ------------------------------------------------------------ 1/1 files                                                          error[invalid-assignment]: Object of type `int` is not assignable to `Array`
  --&gt; ty_issue.py:13:5
   |
11 |     a: Array = jax.numpy.array([1.1, 2.1, 3.1])
12 |     b: int = 10**a
13 |     c: Array = 10**a
   |     ^
14 |     d: Array = 10.0**a
15 |     e: Array = jax.numpy.power(10, a)
   |
info: rule `invalid-assignment` is enabled by default

Found 1 diagnostic
</code></pre>
<h3>Version</h3>
<p>ty 0.0.1-alpha.17</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-08-12 09:17</div>
            <div class="timeline-body"><p>Thanks for the report! This is a duplicate of #544 â€” see https://github.com/astral-sh/ty/issues/616#issuecomment-2955889207 for an explanation of why</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2025-08-12 09:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-11-12 01:56</div>
            <div class="timeline-body"><p>Confirmed this will be fixed by https://github.com/astral-sh/ruff/pull/21394</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:20:26 UTC
    </footer>
</body>
</html>
