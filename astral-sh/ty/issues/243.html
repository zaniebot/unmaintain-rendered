<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use structured `Diagnostic`s instead of generic `anyhow::Result` in `run` - astral-sh/ty #243</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use structured <code>Diagnostic</code>s instead of generic <code>anyhow::Result</code> in <code>run</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/243">#243</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2024-08-08 08:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MichaReiser">@MichaReiser</a></div>
            <div class="timeline-body"><p>The <code>run</code> function returns a <code>anyhow::Result&lt;ExitStatus&gt;</code>. The downside of this is that the <code>Error</code> is unstructured and unspecific about what went wrong. This limits the way we can present the error to the user.</p>
<p>We should explore using a more structured <code>Error</code> similar to Biome&#x27;s CLI Diagnostic (supports multiple code frames) or Miette (supports only a single code frame).</p>
<p>https://github.com/MichaReiser/biome/blob/60671ec3a4c59421583d5d1ec8cfe30d45b27cd7/crates/biome_cli/src/diagnostics.rs#L18-L59</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-15 09:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-01-15 09:51</div>
            <div class="timeline-body"><p>@BurntSushi I just came across this somewhat older issue that&#x27;s also related to diagnostics (less the rendering, more the &quot;represent error-chains&quot;/error type requirement of it)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/BurntSushi">@BurntSushi</a> by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-01-15 16:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[red-knot] Use structured `Diagnostic`s instead of generic `anyhow::Result` in `run`&quot; to &quot;Use structured `Diagnostic`s instead of generic `anyhow::Result` in `run`&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-07 15:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-07 16:00</div>
            <div class="timeline-body"><p>I think this is out of scope for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-07 16:00</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:24:20 UTC
    </footer>
</body>
</html>
