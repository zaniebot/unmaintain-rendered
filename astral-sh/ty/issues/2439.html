<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@Todo type - astral-sh/ty #2439</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>@Todo type</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/2439">#2439</a>
        opened by <a href="https://github.com/tamireinhorn">@tamireinhorn</a>
        on 2026-01-11 03:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/tamireinhorn">@tamireinhorn</a> on 2026-01-11 03:56</div>
            <div class="timeline-body"><p>I wrote a function like:</p>
<pre><code class="language-py">def fetch_user_countries_count(
    source: str, source_ids: list[int]
) -&gt; sa.Sequence[sa.RowMapping[str, Any]]:
    user_locations = user_author_locations_cte(source=source, source_ids=source_ids)
    stmt = select_countries_with_author_count(user_locations)
    with SESSION() as sess:
        return sess.execute(stmt).mappings().all()
</code></pre>
<p>And yet, when I call it anywhere else, I get:</p>
<pre><code class="language-py">def fetch_user_countries_count(
    source: str,
    source_ids: list[int]
) -&gt; @Todo
</code></pre>
<p>I don't understand what else I should be doing. I tried changing the inner types but to no avail. I saw nothing mentioning said Todo type in the docs as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-11 14:16</div>
            <div class="timeline-body"><p>Hey, thanks for the report, and sorry for the confusing UX :-)</p>
<p>The <code>@Todo</code> type doesn't mean that you've done anything wrong -- it means that there's some missing logic in ty itself and we don't know how to infer a good type here. To know exactly what the <code>Todo</code> is about here, we'll need a way to reproduce this -- how is the variable <code>sa</code> defined in your code? Is that a third-party module?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @AlexWaygood on 2026-01-11 14:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-info</span> added by @AlexWaygood on 2026-01-11 17:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tamireinhorn">@tamireinhorn</a> on 2026-01-11 18:21</div>
            <div class="timeline-body"><blockquote>
<p>Hey, thanks for the report, and sorry for the confusing UX :-)</p>
<p>The <code>@Todo</code> type doesn't mean that you've done anything wrong -- it means that there's some missing logic in ty itself and we don't know how to infer a good type here. To know exactly what the <code>Todo</code> is about here, we'll need a way to reproduce this -- how is the variable <code>sa</code> defined in your code? Is that a third-party module?</p>
</blockquote>
<p>yeah, SA is defined as <code>import sqlalchemy as sa</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 02:26:57 UTC
    </footer>
</body>
</html>
