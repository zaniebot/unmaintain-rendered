<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improve diagnostics for failed call to overloaded function - astral-sh/ty #274</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Improve diagnostics for failed call to overloaded function</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/274">#274</a>
        opened by <a href="https://github.com/carljm">@carljm</a>
        on 2025-05-08 14:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/carljm">@carljm</a> on 2025-05-08 14:17</div>
            <div class="timeline-body"><p>Currently we emit a very opaque &quot;No overload of bound method <code>__init__</code> matches&quot; diagnostic, with zero additional context: no reference to the called function, its overloads, what failed to match, etc.</p>
<p>Sample code:</p>
<pre><code class="language-py">from typing import overload

@overload
def f(x: int) -&gt; int: ...

@overload
def f(x: str) -&gt; str: ...

def f(x: int | str) -&gt; int | str:
    return x

f(b&quot;foo&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by @carljm on 2025-05-08 14:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">calls</span> added by @AlexWaygood on 2025-05-11 07:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">overloads</span> added by @AlexWaygood on 2025-05-11 07:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @BurntSushi by @BurntSushi on 2025-05-13 14:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-05-14 19:10</div>
            <div class="timeline-body"><p>This has been closed in https://github.com/astral-sh/ruff/pull/18073</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sharkdp on 2025-05-14 19:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-05-15 00:00</div>
            <div class="timeline-body"><p>Re-opening this because this currently only works for <code>FunctionType</code>, it should be applied to other overloaded callables as well like:</p>
<ul>
<li><p><code>BoundMethodType</code> - contains the <code>FunctionType</code></p>
<pre><code class="language-py">import tempfile

tempfile.TemporaryDirectory()
</code></pre>
</li>
<li><p><code>ClassLiteral</code> - this will be tricky because it could be either <code>__new__</code> or <code>__init__</code></p>
<pre><code class="language-py">type()
</code></pre>
</li>
</ul>
<p>Others are mentioned <a href="https://github.com/astral-sh/ruff/blob/466021d5e1793ca30e0d860cb1cd27e32f5233aa/crates/ty_python_semantic/src/types/call/bind.rs#L1504-L1523">here</a> for which I'm not sure if it's worth the effort.</p>
<p>cc @BurntSushi, feel free to close it if you prefer to track this in a separate issue</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @dhruvmanila on 2025-05-15 00:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2025-05-15 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-05-15 15:46</div>
            <div class="timeline-body"><p>I created #409 to track remaining work here. Thanks for the call out @dhruvmanila!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 02:10:59 UTC
    </footer>
</body>
</html>
