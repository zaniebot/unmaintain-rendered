<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panic crashes in 0.0.12 - astral-sh/ty #2503</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Panic crashes in 0.0.12</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/2503">#2503</a>
        opened by <a href="https://github.com/dabao12321">@dabao12321</a>
        on 2026-01-14 23:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dabao12321">@dabao12321</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>After updating to 0.0.12, we've seen consistent panic crashes on multiple files that didn't happen before with 0.0.11 with e.g. the following errors:</p>
<pre><code>error[panic]: Panicked at crates/ty_python_semantic/src/types/infer/builder.rs:9021:14 when checking `/Users/amandali/Documents/work/solomon/libs/servicelib/servicelib/template_resolver/data_catalog.py`: `assertion `left == right` failed
  left: Some(StringLiteral(StringLiteralType { value: &quot;label&quot; }))
 right: None`
info: This indicates a bug in ty.
info: If you could open an issue at https://github.com/astral-sh/ty/issues/new?title=%5Bpanic%5D, we'd be very appreciative!
info: Platform: macos aarch64
info: Version: 0.0.12 (4b74e4ded 2026-01-14)
info: Args: [&quot;ty&quot;, &quot;check&quot;, &quot;libs/servicelib/servicelib/template_resolver/data_catalog.py&quot;]
info: run with `RUST_BACKTRACE=1` environment variable to show the full backtrace information
info: query stacktrace:
   0: infer_definition_types(Id(7fc4))
             at crates/ty_python_semantic/src/types/infer.rs:104
   1: place_by_id(Id(380d))
             at crates/ty_python_semantic/src/place.rs:877
   2: Type &lt; 'db &gt;::member_lookup_with_policy_(Id(3409))
             at crates/ty_python_semantic/src/types.rs:873
   3: infer_definition_types(Id(1404))
             at crates/ty_python_semantic/src/types/infer.rs:104
   4: infer_scope_types(Id(1000))
             at crates/ty_python_semantic/src/types/infer.rs:70
   5: check_file_impl(Id(c00))
             at crates/ty_project/src/lib.rs:554


Found 1 diagnostic
WARN A fatal error occurred while checking some files. Not all project files were analyzed. See the diagnostics list above for details.
</code></pre>
<p>for code:</p>
<pre><code>&quot;label&quot;: {
                &quot;label&quot;: &quot;Label&quot;,
                &quot;type&quot;: &quot;property&quot;,
                &quot;access_path&quot;: &quot;label&quot;,
            },
</code></pre>
<h3>Version</h3>
<p>0.0.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">fatal</span> added by @carljm on 2026-01-14 23:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-info</span> added by @carljm on 2026-01-14 23:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Pre-stable 1" by @carljm on 2026-01-14 23:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2026-01-14 23:33</div>
            <div class="timeline-body"><p>Thanks for the report! Is there any chance you can provide any more code context? The given snippet doesn't seem to cause ty any trouble. Are you assigning this nested dict to a variable typed as a TypedDict, maybe?</p>
<p>This looks like something which I'd expect to reproduce consistently given the same code. Does it? If so, is it possible you could minimize a code snippet which causes it to happen?</p>
<p>Or alternatively, running with <code>RUST_BACKTRACE=1</code> and providing a full stack trace could also help us track it down, but this would probably require building a debug build of ty for the stack trace to have useful information.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-14 23:45:38 UTC
    </footer>
</body>
</html>
