<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Include dotted module names in `import` completions? - astral-sh/ty #1206</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Include dotted module names in <code>import</code> completions?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1206">#1206</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-09-18 17:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a></div>
            <div class="timeline-body"><p>It might be cool if ty could include <code>collections.abc</code> (a dotted module name) in the list of suggested completions here:</p>
<p><img width="1282" height="720" alt="Image" src="https://github.com/user-attachments/assets/be5ae43a-9a6d-4e82-b919-2bf365b6a990" /></p>
<p>Thoughts @BurntSushi?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @AlexWaygood on 2025-09-18 17:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-09-18 17:11</div>
            <div class="timeline-body"><p>This seems like it could go overboard really quickly -- if a module has ten submodules, and they each have ten submodules, does that expand to a hundred autocomplete options? Or does it only go one level? Or is there some other factor that determines whether a submodule gets grouped with its parent module or not? Seems like querying for all the submodules could also impact performance of autocomplete.</p>
<p>The current behavior is that if you autocomplete <code>collections</code> and type a dot, then you get the suggestion for <code>abc</code> -- that seems reasonable and what I would expect.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-09-18 17:22</div>
            <div class="timeline-body"><blockquote>
<p>This seems like it could go overboard really quickly -- if a module has ten submodules, and they each have ten submodules, does that expand to a hundred autocomplete options? Or does it only go one level? Or is there some other factor that determines whether a submodule gets grouped with its parent module or not? Seems like querying for all the submodules could also impact performance of autocomplete.</p>
</blockquote>
<p>All true! But this must all be weighed against the fact that I import things from <code>collections.abc</code> much more often than from <code>collections</code> ðŸ˜†</p>
<p>I feel like we could probably use heuristics to keep things performant. Maybe we could only look for submodules if there aren't very many non-submodule matches. Or we could even consider just doing this for stdlib modules, which I'd wager are imported much more often than third-party modules.</p>
<p>Just throwing some ideas out! It felt mildly annoying that I had to type <code>import coll&lt;DOWN&gt;&lt;TAB&gt;.a&lt;DOWN&gt;&lt;TAB&gt;</code> in the playground just now rather than just <code>import coll&lt;DOWN&gt;&lt;DOWN&gt;&lt;TAB&gt;</code>, considering that this is one of the most-imported modules in typed Python</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-09-18 17:29</div>
            <div class="timeline-body"><blockquote>
<p>I had to type <code>import coll&lt;DOWN&gt;&lt;TAB&gt;.a&lt;DOWN&gt;&lt;TAB&gt;</code></p>
</blockquote>
<p>You only really need <code>coll&lt;TAB&gt;.&lt;TAB&gt;</code> here, because <code>coll</code> is enough to make <code>collections</code> the first option, and <code>abc</code> is the only submodule option, so it's the top option immediately after typing the dot.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-09-18 17:31</div>
            <div class="timeline-body"><p>I would be less worried about performance here and more about overwhelming the user.</p>
<p>With that said, I am working on ranking for auto-import right now. Ranking is kind of necessary, otherwise it's really easy for symbols you <em>probably</em> don't want to make it to the top with just a few keystrokes. If we get to a point where we are happy with auto-import's ranking, we could try expanding the auto-completions here and applying ranking to that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">completions</span> added by @AlexWaygood on 2025-09-30 15:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Z post-stable" by @MichaReiser on 2025-11-14 08:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "Z post-stable" by @carljm on 2025-11-18 16:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-17 16:49</div>
            <div class="timeline-body"><p>@BurntSushi is this now completed following https://github.com/astral-sh/ruff/pull/21799?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-17 17:08:24 UTC
    </footer>
</body>
</html>
