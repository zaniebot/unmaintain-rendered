<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improve diagnostics (and documentation) for unresolved imports caused by editable installs that use setuptools as their build backend - astral-sh/ty #585</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Improve diagnostics (and documentation) for unresolved imports caused by editable installs that use setuptools as their build backend</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/585">#585</a>
        opened by <a href="https://github.com/SoftwareApe">@SoftwareApe</a>
        on 2025-06-05 12:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/SoftwareApe">@SoftwareApe</a></div>
            <div class="timeline-body">Summary
<p>Hi,</p>
<p>I hope this isn&#x27;t a duplicate issue. I scanned through <a href="https://github.com/astral-sh/ty/issues/445">astral-sh/ty#445</a> and the current open issues but didn&#x27;t find it.</p>
<p>I have some development submodules added through <code>uv add --editable ...</code>. These are found in the <code>tool.uv.sources</code> section of the <code>pyproject.toml</code>.</p>
<p>They seem to work fine with uv and ruff. But <code>ty</code> complains that:</p>
<pre><code>error[unresolved-import]: Cannot resolve imported module ...
</code></pre>
<p>PS: Amazing work from the astral team as always. This alpha version is already better than many mature python type-checkers!</p>
Version
<p><code>ty==0.0.1a8</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-06-05 12:32</div>
            <div class="timeline-body"><p>This is probably a duplicate of <a href="https://github.com/astral-sh/ty/issues/475">astral-sh/ty#475</a> if your development submodules are using <code>setuptools</code> for their build backend. But we&#x27;ve decided internally that we want to prioritise better diagnostics for this situation, so I&#x27;ll keep this issue open to track that üëç</p>
<p>Thanks for the report!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">imports</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-06-05 12:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SoftwareApe">@SoftwareApe</a> on 2025-06-05 14:42</div>
            <div class="timeline-body"><p>@AlexWaygood thank you so much! It indeed seems like #475 it&#x27;s the same issue. I guess I didn&#x27;t search for the right combination of strings. It&#x27;s indeed a setuptools dependency.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;error[unresolved-import]: Cannot resolve imported module for editable sources from tool.uv.sources are not found by ty.&quot; to &quot;Improve diagnostics for unresolved imports caused by local packages that use setuptools as their build backend&quot; by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-06-05 16:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/AlexWaygood">@AlexWaygood</a> by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-06-05 16:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-11-13 06:46</div>
            <div class="timeline-body"><p>I&#x27;ve reopened #475 to see if there&#x27;s any way we can support these -- but if we can&#x27;t, we should still improve the diagnostics.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Stable&quot; by <a href="https://github.com/carljm">@carljm</a> on 2025-11-13 06:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-13 07:43</div>
            <div class="timeline-body"><p>A first step (and very easy) could be to add some debug or info level logging when ty skips a <code>pth</code> file.</p>
<p>https://github.com/astral-sh/ruff/blob/64edfb6ef6f26bb3618c5c888f5abf3a866a172c/crates/ty_python_semantic/src/module_resolver/resolver.rs#L600-L615</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-13 15:29</div>
            <div class="timeline-body"><p>Some notes from our internal discord on how we could detect packages that use setuptools</p>
<blockquote>
<p>Would you go and try to find a matching .pth file with wild python code in it?
and there are other things that setuptools inserts into site-packages that you can look for to know for sure that the package is installed, we just have no idea where the package actually is located
and those things will also tell us that it was setuptools that installed it</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Improve diagnostics for unresolved imports caused by local packages that use setuptools as their build backend&quot; to &quot;Improve diagnostics (and documentation) for unresolved imports caused by editable installs that use setuptools as their build backend&quot; by <a href="https://github.com/carljm">@carljm</a> on 2025-11-13 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-11-13 15:31</div>
            <div class="timeline-body"><p>Some useful links for future reference: <a href="https://github.com/pypa/setuptools/issues/3518">pypa/setuptools#3518</a> and https://docs.basedpyright.com/v1.25.0/usage/import-resolution/#setuptools</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:24:45 UTC
    </footer>
</body>
</html>
