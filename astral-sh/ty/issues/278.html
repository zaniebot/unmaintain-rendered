<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make `unused-ignore-comment` enabled by default - astral-sh/ty #278</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make <code>unused-ignore-comment</code> enabled by default</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/278">#278</a>
        opened by <a href="https://github.com/AlexWaygood">@AlexWaygood</a>
        on 2025-05-08 16:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AlexWaygood">@AlexWaygood</a></div>
            <div class="timeline-body"><p>We made this rule disabled by default in <a href="https://github.com/astral-sh/ruff/pull/17955">astral-sh/ruff#17955</a>, on the following grounds:</p>
<blockquote>
<p>Right now it seems like there are too many situations where:</p>
<ol>
<li>There is a typing error on a line that all other type checkers detect</li>
<li>The user has suppressed that error for Reasons with a type: ignore comment</li>
<li>But we don&#x27;t yet detect the typing error due to a missing feature, leading us to complain about the unused ignore comment</li>
</ol>
<p>The rule feels like more of a lint anyway, and mypy&#x27;s version is opt-in. I&#x27;d like for it to be enabled by default for the GA release, but right now it feels like we&#x27;re getting a lot of user questions about it. Let&#x27;s make it disabled-by-default until we&#x27;re closer to feature-parity with other type checkers.</p>
</blockquote>
<p>I think we all agree that we&#x27;d like it to be enabled by default for the GA release. This issue exists so we don&#x27;t forget to do so.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;GA&quot; by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-05-08 16:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-05-08 16:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-05-08 16:33</div>
            <div class="timeline-body"><p>Possible considerations when re-enabling it:</p>
<ol>
<li>Separate rules for unused <code>type: ignore</code> vs unused <code>ty: ignore</code>, since it&#x27;s useful to be able to suppress the former but not the latter (if the codebase is checked by multiple type checkers).</li>
<li>And/or a config option to determine what we do with <code>type: ignore</code> comments (pretend they don&#x27;t exist, warn if they are unused, ignore the error codes, treat them the same)</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">suppression</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-05-10 17:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-24 14:23</div>
            <div class="timeline-body"><p>We introduced the <code>analysis.respect-type-ignore-comments</code> setting, which should put us in a position to enable this rule by default. However, I think we should wait until we fixed the instability (involving an <code>unused-ignore-comment</code> warning) on <code>pandas-stubs</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-02 20:19</div>
            <div class="timeline-body"><blockquote>
<p>We introduced the <code>analysis.respect-type-ignore-comments</code> setting, which should put us in a position to enable this rule by default. However, I think we should wait until we fixed the instability (involving an <code>unused-ignore-comment</code> warning) on <code>pandas-stubs</code></p>
</blockquote>
<p>Hmm, but this rule is far from the only error code where we have instability currently. Most of our other unstable rules are enabled by default anyway, and the instability for this error code isn&#x27;t really an issue with the error code itself (it&#x27;s instability in other error codes that causes suppression comments for those codes to sometimes be unused, sometimes not!).</p>
<p>I&#x27;d lean towards just enabling the rule by default at this stage. Though I think we could consider adding a subdiagnostic that points the user towards the configuration setting if it&#x27;s an unused <code>type: ignore</code> comment (rather than an unused <code>ty: ignore</code> comment).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2026-01-09 10:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:24:23 UTC
    </footer>
</body>
</html>
