<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Goto-type and hover-type for non-expression nodes (identifiers in statements) - astral-sh/ty #144</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Goto-type and hover-type for non-expression nodes (identifiers in statements)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/144">#144</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2025-04-01 10:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-04-01 10:55</div>
            <div class="timeline-body"><p>https://github.com/astral-sh/ruff/pull/16901 implemented basic goto type definition support. However, there are still a handful of nodes that have identifier children for which goto type definition doesn't work because the enclosing node isn't an expression or a definition. We should add support for goto type definition for those nodes as well.</p>
<p>See the TODO comments in <code>ty_ide::goto::GotoTarget::inferred_type</code></p>
<p>Status:</p>
<ul>
<li>[x] goto-declaration</li>
<li>[x] goto-definition</li>
<li>[x] find-references</li>
<li>[x] rename (caveat: https://github.com/astral-sh/ty/issues/1661)</li>
<li>[x] hover (caveat: we do not display the type on hover, limited by goto-type)</li>
<li>[ ] goto-type<ul>
<li>[x] imports</li>
<li>[ ] global/nonlocal - needs type inference changes to compute+record the type</li>
<li>[ ] match patterns - needs type inference changes to compute+record the type</li>
<li>[ ] type params (? should we even do anything here)</li>
</ul>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[red-knot] Goto type definition for non-expression nodes" to "Goto type definition for non-expression nodes" by @MichaReiser on 2025-05-07 15:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @AlexWaygood on 2025-05-11 07:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/UnboundVariable">@UnboundVariable</a> on 2025-07-24 20:01</div>
            <div class="timeline-body"><p>This same TODO affects the &quot;goto declaration&quot; and &quot;goto definition&quot; features. Once addressed, all three &quot;goto&quot; features should support these non-expression nodes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "GA" by @MichaReiser on 2025-08-15 07:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Beta" by @MichaReiser on 2025-08-15 07:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @Gankra by @carljm on 2025-08-15 15:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "Beta" by @carljm on 2025-08-15 15:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "GA" by @carljm on 2025-08-15 15:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Goto type definition for non-expression nodes" to "Goto-type and hover-type for non-expression nodes (identifiers in statements)" by @Gankra on 2025-12-02 19:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-02 19:52</div>
            <div class="timeline-body"><p>I sketched out the IDE half of this here: https://github.com/astral-sh/ruff/pull/21762</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @Gankra by @Gankra on 2025-12-02 19:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-02 19:55</div>
            <div class="timeline-body"><p>I'm going to unassign myself from this issue because I've pushed this functionality as far as I'm going to.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "Stable" by @MichaReiser on 2025-12-31 16:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Pre-stable 1" by @MichaReiser on 2025-12-31 16:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone "Pre-stable 1" by @MichaReiser on 2025-12-31 16:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Stable" by @MichaReiser on 2025-12-31 16:37</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:51:35 UTC
    </footer>
</body>
</html>
