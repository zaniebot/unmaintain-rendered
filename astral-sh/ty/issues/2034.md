```yaml
number: 2034
title: "vscode extension -- ty not discovering pyproject.toml file - missing/no configuration option for \"path to config file\"?"
type: issue
state: open
author: ColemanDunn
labels:
  - configuration
  - server
assignees: []
created_at: 2025-12-17T20:40:20Z
updated_at: 2026-01-10T01:03:47Z
url: https://github.com/astral-sh/ty/issues/2034
synced_at: 2026-01-10T01:56:41Z
```

# vscode extension -- ty not discovering pyproject.toml file - missing/no configuration option for "path to config file"?

---

_Issue opened by @ColemanDunn on 2025-12-17 20:40_

### Summary

Given a project structure like this: 

```
my_repo
├── backend
│   ├── pyproject.toml
│   ├── .venv
│   └── app
├── frontend
└── README.md
```

The ty extension is both able to find the executable in my `.venv` folder (although I suspect this is because it is the chosen environment for my vscode (cursor) project) and support go to definition for both first and third party modules.

However, rule configuration in my `pyproject.toml` are not respected and first party module auto imports do not work. I suspect both of these are due to the ty extension not discovering my `pyproject.toml` file. 

If I do 
```toml
[tool.ty.rules]
unsupported-operator = "ignore"
```
or set it to `warn`, `a = 10 + "test"` still shows as an error.


Ruff configuration still works however without me having to point it to the toml file via some setting. 

A lot if not most linter extensions have some sort of "path to config file" setting (including the (now old) ruff extension on pycharm), though given how ruff auto-discovers it just fine, perhaps a setting like this is not needed and it this could be a bug in `ty` if not a missing feature. 

Thanks! Excited to use `ty` in vscode

### Version

0.0.2

---

_Label `configuration` added by @carljm on 2025-12-17 20:57_

---

_Label `server` added by @carljm on 2025-12-17 20:57_

---

_Comment by @MichaReiser on 2025-12-18 09:14_

Yes, this is a known limitation that ty only picks up your configuration if it's directly in the folder you opened in your editor or any of its ancestor directories. 

---

_Closed by @MichaReiser on 2025-12-18 09:14_

---

_Comment by @MichaReiser on 2025-12-18 17:34_

I'll re-open this. While https://github.com/astral-sh/ruff/pull/22053 will help in the described instance, there will still be inconsistencies if the configuration file uses any relative paths (because the LSP resolves the paths relative to the workspace root whereas the CLI resolves them relative to the `pyproject.toml`).

---

_Reopened by @MichaReiser on 2025-12-18 17:34_

---

_Comment by @ColemanDunn on 2025-12-22 19:26_

> I'll re-open this. While [astral-sh/ruff#22053](https://github.com/astral-sh/ruff/pull/22053) will help in the described instance, there will still be inconsistencies if the configuration file uses any relative paths (because the LSP resolves the paths relative to the workspace root whereas the CLI resolves them relative to the `pyproject.toml`).

Thanks! In fact my config does use relative paths (to the `pyproject.toml`). I would also like to add that just with auto discovery, Ruff handles this no problem currently (both in vscode extension and the cli).

---

_Comment by @ColemanDunn on 2025-12-30 00:29_

> I'll re-open this. While [astral-sh/ruff#22053](https://github.com/astral-sh/ruff/pull/22053) will help in the described instance, there will still be inconsistencies if the configuration file uses any relative paths (because the LSP resolves the paths relative to the workspace root whereas the CLI resolves them relative to the `pyproject.toml`).

Speaking of https://github.com/astral-sh/ruff/pull/22053, it seems this only supports `ty.toml`. I tried pointing the vscode setting to my `pyproject.toml` but got errors in the logs. Should it also support `pyproject.toml`?

---

_Comment by @dhruvmanila on 2025-12-30 05:17_

> Should it also support `pyproject.toml`?

cc @MichaReiser 

---

_Comment by @MichaReiser on 2025-12-30 07:41_

Not supporting `pyproject.toml` is intentional to align the option with the CLI `--config-file` option. It's also aligned with uv's `--config-file` option.

The main idea of these options is sharing ty configurations between projects (or have them in non-standard locations). For that use case, using `pyproject.toml` doesn't make much sense becuase `pyproject.toml`s are for packages. 

I can see how using a `pyproject.toml` would be slightly more convenient than using a `ty.toml` in your use case. But, I don't think it's a reason enough to accept `pyproject.toml` files because `configurationFile` isn't the proper solution for your use case, as outlined above. Instead, we have to solve projects with configurations in sub-folders more holistically. 

---

_Comment by @ColemanDunn on 2025-12-30 16:43_

Thanks that makes sense. For what it's worth, ty, uv, and ruff config docs all mention using `pyproject.toml` first before mentioning their respective more specific TOML files. Ruff also accepts both files in the cli with the `--config` option (though it is a different flag technically): 

```
--config <CONFIG_OPTION>
          Either a path to a TOML configuration file (`pyproject.toml` or
          `ruff.toml`)
```

---

_Comment by @ColemanDunn on 2026-01-10 01:03_

Come to think of it, since it is the case that `--config-file` is more for sharing ty configurations between projects rather than for a given project as a whole, should this issue be modified more specifically to a feature request that supports something like a "project configuration file" setting? This would match the many linters and LSPs across different languages out there that have some sort of setting equivalent to this in their respective vscode extensions. Perhaps that is too much lift and clashes with solving configurations in sub folders more holistically which would ideally handle this anyway as it does in ruff. If that is the case then maybe this issue should be closed?


Should a new issue be opened addressing resolving to the nearest `pyproject.toml` when it comes to monorepos/repos with nested projects [as ruff does](https://docs.astral.sh/ruff/configuration/#config-file-discovery) as well as other tools? 


Is ruff's solution a good golden standard for this for a possible PR? Assuming the implementations aren't currently wildly different already of course. 

Thanks!

---
