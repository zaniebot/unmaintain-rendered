<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>List concatenation not resolving correctly to `list[str]` but to `list[_T]` - astral-sh/ty #314</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>List concatenation not resolving correctly to <code>list[str]</code> but to <code>list[_T]</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/314">#314</a>
        opened by <a href="https://github.com/ion-elgreco">@ion-elgreco</a>
        on 2025-05-10 17:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ion-elgreco">@ion-elgreco</a> on 2025-05-10 17:23</div>
            <div class="timeline-body"><h3>Summary</h3>
<pre><code class="language-python">def print_list(value: list[str]) -&gt; None:
    print(value)


existing_list = [&quot;foo&quot;]
print_list(
    existing_list
    + [
        &quot;bar&quot;,
    ],
)
</code></pre>
<pre><code class="language-python">  --&gt; test.py:7:5
   |
 5 |   existing_list = [&quot;foo&quot;]
 6 |   print_list(
 7 | /     existing_list
 8 | |     + [
 9 | |         &quot;bar&quot;,
10 | |     ],
   | |_____^ Expected `list[str]`, found `list[_T]`
11 |   )
   |
info: Function defined here
 --&gt; test.py:1:5
  |
1 | def print_list(value: list[str]) -&gt; None:
  |     ^^^^^^^^^^ ---------------- Parameter declared here
2 |     print(value)
  |
info: `invalid-argument-type` is enabled by default

Found 1 diagnostic
</code></pre>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "List concatenation not resolving correctly to `list[str]` but to `list[T_]`" to "List concatenation not resolving correctly to `list[str]` but to `list[_T]`" by @ion-elgreco on 2025-05-10 17:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">generics</span> added by @AlexWaygood on 2025-05-10 17:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @AlexWaygood on 2025-05-10 17:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hauntsaninja">@hauntsaninja</a> on 2025-05-10 23:48</div>
            <div class="timeline-body"><p>I think ty just doesn't support any list concatenation right now:</p>
<pre><code>error[unsupported-operator]: Operator `+` is unsupported between objects of type `list[int]` and `list[int]`
  --&gt; test1.py:14:12
   |
13 | def f4(x: list[int], y: list[int]):
14 |     return x + y
   |            ^^^^^
   |
info: `unsupported-operator` is enabled by default
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dcreager on 2025-05-12 17:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:39:31 UTC
    </footer>
</body>
</html>
