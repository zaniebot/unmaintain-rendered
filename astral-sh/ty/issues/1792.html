<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to build a tiny `ty`? - astral-sh/ty #1792</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to build a tiny <code>ty</code>?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1792">#1792</a>
        opened by <a href="https://github.com/lmmx">@lmmx</a>
        on 2025-12-06 16:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/lmmx">@lmmx</a></div>
            <div class="timeline-body">Question
<p>I just built my own <code>uv</code> with the <code>minimal-size</code> profile and saw over 50% disk size saving (I am also stripping the binary and compressing with upx) from 17MB down to just 7.8 MB (ðŸ¥³!!) and I was wondering if/how I could achieve the same with ty</p>
<pre><code>git clone --depth 1 https://github.com/astral-sh/uv.git &quot;$temp_dir/uv&quot;
cargo build --manifest-path &quot;$temp_dir/uv/Cargo.toml&quot; --profile minimal-size -p uv
</code></pre>
<p>ty is a Python package not a pure Rust crate, but the underlying crate is built with maturin so my hunch is this should be possible...</p>
<p>https://github.com/astral-sh/ty/blob/84a1881169fe0d5c0e012d405ed1c0c8a4dcb7c6/pyproject.toml#L88-L99</p>
<p>Pre-built <code>ty</code> as installed via <code>uv tool</code> is now bigger than the minimally sized <code>uv</code>!</p>
<pre><code>8.1M	ty
7.8M	uv
</code></pre>
<ul>
<li><a href="https://github.com/lmmx/just-pre-commit/blob/master/refresh_binaries.sh#L37-L38">Source</a></li>
</ul>
Version
<p>Latest on trunk</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/lmmx">@lmmx</a> on 2025-12-06 16:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-06 17:13</div>
            <div class="timeline-body"><p><code>uv</code> and <code>ty</code> have the same basic structure, they&#x27;re both pure Rust that we optionally bundle as python packages for ease of use. The actual rust code for <code>ty</code> is in https://github.com/astral-sh/ruff/ (which this repo includes as a submodule).</p>
<p><code>cargo build -p ty</code> builds the pure rust binary version of ty</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lmmx">@lmmx</a> on 2025-12-06 17:27</div>
            <div class="timeline-body"><p>Aha aha, I&#x27;m sorry for some reason the repo here made me think I needed to go via maturin. I checked and the <code>ty</code> I have is indeed a binary, so can&#x27;t be Python. I added the same profile section that uv has to the ruff workspace TOML and built smaller versions of both ty and ruff ðŸŽ‰ I&#x27;ll close this one and see if there&#x27;s any interest in adding that over in the other repo.</p>
<p>before:</p>
<pre><code>11M	ruff
8.1M	ty
</code></pre>
<p>after:</p>
<pre><code>6.3M	ruff
5.6M	ty
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/lmmx">@lmmx</a> on 2025-12-06 17:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:26:18 UTC
    </footer>
</body>
</html>
