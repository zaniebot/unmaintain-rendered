<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow the server in buffer not tied to actual file - astral-sh/ty #1619</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow the server in buffer not tied to actual file</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1619">#1619</a>
        opened by <a href="https://github.com/klonuo">@klonuo</a>
        on 2025-11-24 12:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/klonuo">@klonuo</a></div>
            <div class="timeline-body"><p>Hi,</p>
<p>If I open empty buffer in editor, set the syntax to Python and paste some code, the server doesn't do anything.
If I create empty file and save it, then paste some code server works even saved file is empty, just following the code in the buffer.</p>
<p>This is the same for <code>ruff</code> too, but for example other LSP server allows working on empty buffer, i.e. LSP json.</p>
<p>So I wanted to suggest this as a feature request, if easily possible.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-24 12:24</div>
            <div class="timeline-body"><p>Hi @klonuo</p>
<p>This should work with ty. Can you tell me more about what editor you're using? Can you share an example of what isn't working. E.g are diagnostics missing? Are completions not working? Do you have a code example you could share?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-info</span> added by @MichaReiser on 2025-11-24 12:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/klonuo">@klonuo</a> on 2025-11-24 12:32</div>
            <div class="timeline-body"><p>Tried both in Zed and in Sublime Text.</p>
<p>I noticed this while I copied part of the logs which was Python dictionary and wanted to format it with ruff to see whats happening, for example:</p>
<pre><code class="language-python">{'merge_action': 'UPDATE', 'updated': datetime.datetime(2025, 11, 24, 10, 24)}
</code></pre>
<p>Just copy paste this in empty buffer.</p>
<p>In Sublime Text LSP options are disabled (although as previously mentioned if I do the same with json code in empty buffer it works fine).
In Zed I can run LSP command but nothing happens nor anything is written in LSP log, until I create new file and do the same.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-24 12:34</div>
            <div class="timeline-body"><p>Okay, so this is about Ruff and not ty?</p>
<p>What formatting woudl you expect for <code>{'merge_action': 'UPDATE', 'updated': datetime.datetime(2025, 11, 24, 10, 24)}</code> ? The formatting looks correct, at least when you've configured single quotes over double quotes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/klonuo">@klonuo</a> on 2025-11-24 12:36</div>
            <div class="timeline-body"><p>It's same with ty - if you hover on datetime for example nothing will happen, nor it would complain that datetime is not defined.</p>
<p>The dictionary was much larger, this is just for example :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-24 12:38</div>
            <div class="timeline-body"><p>I just tested this with Zed and I can confirm that formatting doesn't work for untitled files but it does for VS Code. I took a look at the logs and it seems that Zed never sends a message to Ruff or ty when the untitled file is open. So this seems like an upstream bug in Zed rather than ruff or ty</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/klonuo">@klonuo</a> on 2025-11-24 12:45</div>
            <div class="timeline-body"><p>Same for Sublime Text, but in VS Code it indeed works for some reason. I dont have neovim here to check also...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-24 12:58</div>
            <div class="timeline-body"><p>I don't have Sublime but the follwing upstream zed issues seem relevant:</p>
<ul>
<li>https://github.com/zed-industries/zed/issues/17098</li>
<li>https://github.com/zed-industries/zed/issues/20839</li>
</ul>
<p>I don't know how sublime handles unsaved buffers but they are supported in Ruff and ty.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/klonuo">@klonuo</a> on 2025-11-24 13:26</div>
            <div class="timeline-body"><p>Ok thanks, in vscode both work obviously. I'll close this issue</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @klonuo on 2025-11-24 14:36</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:21:02 UTC
    </footer>
</body>
</html>
