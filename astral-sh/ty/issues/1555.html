<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-import should support re-exports - astral-sh/ty #1555</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Auto-import should support re-exports</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1555">#1555</a>
        opened by <a href="https://github.com/BurntSushi">@BurntSushi</a>
        on 2025-11-14 13:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-11-14 13:42</div>
            <div class="timeline-body"><p>At present, ty's auto-import feature doesn't understand re-exports. While this can manifest in a number of ways, one practical real world problem is that it makes auto-import with numpy effectively useless:</p>
<p>https://github.com/user-attachments/assets/1b81a0e0-776b-48c8-8809-eb6bbc339fe5</p>
<p>In the demo above, I <em>want</em> to use <code>numpy.array</code>. But that corresponds to none of the options presented to me. Instead, it provides options for <code>array</code> within the sub-modules of <code>numpy</code>, but that's not what I want.</p>
<p>This is because <code>numpy</code> crafts its public API by re-exporting symbols from sub-modules. While ty itself understands this (e.g., <code>numpy.arra&lt;CURSOR&gt;</code> works as expected), auto-import does not. This is because auto-import does its own AST visit to try and very quickly extract exported symbols from dependencies without needing to do full type checking on all of them.</p>
<p>What we'd like to do is implement logic for detecting the <a href="https://typing.python.org/en/latest/spec/distributing.html#library-interface-public-and-private-symbols">library interface</a>. We already have this in ty, but reusing it <em>outside</em> of ty is difficult. And auto-import already has its own AST visitor anyway. We may not be able to fully support some things without proper type checking (handling <code>__all__</code> correctly in all cases comes to mind), but we should be able to handle most cases. And where we can't, we should probably prefer false positives over false negatives when possible.</p>
<p>(I've already started work on this but paused it to work on some lower hanging polishing for completions.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Stable" by @BurntSushi on 2025-11-14 13:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @BurntSushi by @BurntSushi on 2025-11-14 13:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @BurntSushi on 2025-11-14 13:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">completions</span> added by @BurntSushi on 2025-11-14 13:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2025-12-04 18:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 02:11:42 UTC
    </footer>
</body>
</html>
