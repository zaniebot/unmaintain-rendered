```yaml
number: 2083
title: Import resolution... not the same as ruff (or pyright, pyrefly, etc)
type: issue
state: open
author: danielpopescu
labels:
  - needs-info
  - imports
assignees: []
created_at: 2025-12-18T18:25:15Z
updated_at: 2026-01-09T02:47:12Z
url: https://github.com/astral-sh/ty/issues/2083
synced_at: 2026-01-10T01:56:41Z
```

# Import resolution... not the same as ruff (or pyright, pyrefly, etc)

---

_Issue opened by @danielpopescu on 2025-12-18 18:25_

### Summary


I have a project, with a non standard folder hierarchy... something like this:

<project_root>/abc/xyz/A
<project_root>/abc/xyz/B
...
<project_root>/abc/xyz/Z

python files are spread into the leaf folders A, B,...etc

anywhere in the files in the project (from A, B, etc) I can import, say foo.py from A as:

import A.foo 

into any files from A,B,C....etc

This is fine with LSP servers I use: pyright/basedpyright, pyrefly or linters like ruff, etc... 

With ty I get an unresloved-inport error. One must use: import abc.xyz.A.foo  to fix it.

This is also puzzling as I thought ruff and ty use the same code but somehow dont behave the same for this particular issue... 

using latest 0.0.3 version.

### Version

_No response_

---

_Label `imports` added by @AlexWaygood on 2025-12-18 18:27_

---

_Comment by @carljm on 2025-12-18 19:23_

You probably want to set the `environment.root` config to `['.abc/xyz']`?

---

_Comment by @danielpopescu on 2025-12-18 19:29_

Thanks. But I dont have to do that for ruff or pyright... Furthermore, I only have a small global config (setting python version and additional paths for type stubs - not included in typeshed). I dont use per project configs. 

---

_Comment by @carljm on 2025-12-18 19:32_

I'm curious whether pyright/pyrefly/etc are auto-discovering the correct root somehow, or are falling back to "desperation mode" import resolution.

I guess this might be a case for expanding our "desperation mode" to not rely on a `pyproject.toml`, cc @Gankra 

Ruff is not really relevant here, it doesn't resolve imports at all

---

_Comment by @AlexWaygood on 2025-12-18 19:54_

> Ruff is not really relevant here, it doesn't resolve imports at all

(it actually does have _some_ naive resolution so it can classify imports for its isort rules)

---

_Comment by @carljm on 2025-12-23 00:12_

> I dont use per project configs.

Why would a per-project config be needed? Are there multiple different `abc/xyz` outer directories? I wasn't sure since the example only shows one.

---

_Label `needs-info` added by @carljm on 2026-01-09 02:46_

---

_Comment by @carljm on 2026-01-09 02:47_

I'd like to explore this more, but I think we would need a more complete example reproducing the problem, and also including information like which directories have `pyproject.toml` files.

---
