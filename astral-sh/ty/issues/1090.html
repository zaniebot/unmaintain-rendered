<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ty allows passing different types for constrained TypeVar arguments. - astral-sh/ty #1090</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ty allows passing different types for constrained TypeVar arguments.</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1090">#1090</a>
        opened by <a href="https://github.com/IDrokin117">@IDrokin117</a>
        on 2025-08-23 15:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/IDrokin117">@IDrokin117</a></div>
            <div class="timeline-body">Summary
<p>Ty doesn&#x27;t flag issues when two distinct types are passed to a function that uses the same generic type parameter T for its arguments. This might be allowed for <code>bound</code> types (if satisfy), but not for <code>constraints</code>. See examples for mypy and pyrefly.</p>
<pre><code>from typing import TypeVar

T = TypeVar(&quot;T&quot;, int, str) 
def q(s: T, s1: T): # s and s1 must have the same type
    pass
q(1, &quot;str&quot;) # not OK
</code></pre>
<pre><code>from typing import TypeVar

T = TypeVar(&quot;T&quot;,  bound=int | str) 
def q(s: T, s1: T): # s and s1 might be only subtype of &quot;int | str&quot;
    pass
q(1, &quot;str&quot;)  # OK
</code></pre>
<p>See <a href="https://www.gaohongnan.com/computer_science/type_theory/05-typevar-bound-constraints.html#id20">Bound versus Constraints</a></p>
Playgrounds
<ul>
<li><a href="https://play.ty.dev/85f7a6c3-e88b-49fd-aa49-d4b85bd0ffe9">Ty</a>. No errors</li>
<li><a href="https://mypy-play.net/?mypy=latest&amp;python=3.12&amp;gist=552421be9605bfe11da9e665ae663fef">Mypy</a>. <code>main.py:7: error: Value of type variable &quot;T&quot; of &quot;q&quot; cannot be &quot;object&quot;  [type-var]</code></li>
<li><a href="https://pyrefly.org/sandbox/?code=GYJw9gtgBALgngBwJYDsDmUkQWEMogCmAboQIYA2A%2BvAoQFCiSyKoZY55QAqihAamRD163KAF4efQSAAUAIm7yANJhQxVAZxggAlPQAmhYFACOszQC4eWgIzXuuy-SiuoCMps31zt1fO0QeV0gA&amp;version=3.12">Pyrefly</a> <code>ERROR 7:6-11: Argument `Literal[&#x27;str&#x27;]` is not assignable to parameter `s1` with type `int` in function `q` [[bad-argument-type](https://pyrefly.org/en/docs/error-kinds/#bad-argument-type)]</code></li>
</ul>
Version
<p>0.0.1-alpha.19</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-08-23 16:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">generics</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-08-23 16:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Beta&quot; by <a href="https://github.com/carljm">@carljm</a> on 2025-08-25 16:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-08-25 16:05</div>
            <div class="timeline-body"><p>Thanks for the report! I think at this point this will likely be rolled into #623, but I&#x27;ll keep it open to make sure it gets fixed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Ty allows passing different types for TypeVar arguments.&quot; to &quot;Ty allows passing different types for constrained TypeVar arguments.&quot; by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-08-27 11:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Ty allows passing different types for constrained TypeVar arguments.&quot; to &quot;ty allows passing different types for constrained TypeVar arguments.&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-09-19 08:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/dcreager">@dcreager</a> by <a href="https://github.com/carljm">@carljm</a> on 2025-09-19 14:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone &quot;Beta&quot; by <a href="https://github.com/carljm">@carljm</a> on 2025-12-05 00:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Stable&quot; by <a href="https://github.com/carljm">@carljm</a> on 2025-12-05 00:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:25:24 UTC
    </footer>
</body>
</html>
