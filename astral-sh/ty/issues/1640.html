<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hover rendering has no title on non-trival stringified annotations - astral-sh/ty #1640</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Hover rendering has no title on non-trival stringified annotations</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1640">#1640</a>
        opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a>
        on 2025-11-26 04:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a></div>
            <div class="timeline-body">Summary
<p>With this code:
https://play.ty.dev/fdd1d134-c407-4bee-bbc6-55418b97988e</p>
<pre><code>a: &quot;str&quot;
b: &quot;str | int&quot;
</code></pre>
<p>Hovering the <code>str</code> in <code>a</code> gives a title saying <code>str</code>:</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/5efc35da-2396-41f2-85f9-a8a3ec58c1c9"></p>
<p>While hovering the <code>str</code> in <code>b</code> is missing that title:</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/1740e63e-0821-4ebb-a788-1e96db269e37"></p>
<p>This happens both in the playground and in VSC.</p>
Version
<p>ty 0.0.1-alpha.28 (8c342496a 2025-11-25) playground (536425619)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-11-26 04:39</div>
            <div class="timeline-body"><p>Yep, expected limitation in the current implementation, unfortunately. We need to augment the string-annotation tracking in inference to store the type of the sub-ast exprs.</p>
<p>Micha proposed just allowing (Expr, Expr) as a key for looking up the type of an expression (the second Expr would belong to the sub-AST).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by <a href="https://github.com/Gankra">@Gankra</a> on 2025-11-26 04:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/Gankra">@Gankra</a> by <a href="https://github.com/Gankra">@Gankra</a> on 2025-11-26 04:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-26 10:15</div>
            <div class="timeline-body"><p>Another possible approach is to introduce a new scope for string literal expressions, though I&#x27;m not sure whether that would break anything.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Stable&quot; by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-05 13:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:26:05 UTC
    </footer>
</body>
</html>
