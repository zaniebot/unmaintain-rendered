<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`dict` with known literal keys and values being assignable to a variable annotated with `Literal` is unsupported - astral-sh/ty #2103</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>dict</code> with known literal keys and values being assignable to a variable annotated with <code>Literal</code> is unsupported</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2103">#2103</a>
        opened by <a href="https://github.com/CarrotManMatt">@CarrotManMatt</a>
        on 2025-12-19 08:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/CarrotManMatt">@CarrotManMatt</a></div>
            <div class="timeline-body">Summary
<p>Apologies if this is a known lacking feature due to ty being beta software, I couldn&#x27;t find any issues referring to this problem.</p>
<p>I have a variable typed as <code>Final[Mapping[Literal[1, 2, 3], Literal[&quot;DEBUG&quot;, &quot;INFO&quot;, &quot;WARN&quot;, &quot;ERROR&quot;, &quot;CRITICAL&quot;]]]</code>, yet a dictionary made with the correct literal keys or values seems to be incorrectly unassignable to this variable: <code>{1: &quot;INFO&quot;, 2: &quot;DEBUG&quot;, 3: &quot;DEBUG&quot;}</code>.</p>
<blockquote>
<p>Object of type `dict[Unknown | int, Unknown | str]` is not assignable to `Mapping[Literal[1, 2, 3], Literal[&quot;DEBUG&quot;, &quot;INFO&quot;, &quot;WARN&quot;, &quot;ERROR&quot;, &quot;CRITICAL&quot;]]`</p>
</blockquote>
<p>https://play.ty.dev/7170ec5b-b7ff-4227-91eb-e1f06e0477c7</p>
Version
<p>ty 0.0.4</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-19 08:37</div>
            <div class="timeline-body"><p>Thanks, I think this is #1576 (we don&#x27;t apply type context very well at the moment if the declared type is a supertype of the inferred type)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-19 08:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CarrotManMatt">@CarrotManMatt</a> on 2025-12-19 09:21</div>
            <div class="timeline-body"><p>Cheers, apologies for the bug report noise because of me not being able to find the correct issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-19 09:25</div>
            <div class="timeline-body"><p>Np, it&#x27;s impossible to find dupes on github, especially for a project full of jargon like a type checker ðŸ˜ƒ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-12-22 22:46</div>
            <div class="timeline-body"><p>(Confirmed the PR for #1576 already fixes this)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:26:38 UTC
    </footer>
</body>
</html>
