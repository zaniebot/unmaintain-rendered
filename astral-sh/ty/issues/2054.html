<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Variable reassignment type checking - astral-sh/ty #2054</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Variable reassignment type checking</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2054">#2054</a>
        opened by <a href="https://github.com/staciax">@staciax</a>
        on 2025-12-18 08:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/staciax">@staciax</a> on 2025-12-18 08:00</div>
            <div class="timeline-body"><h3>Question</h3>
<p><code>ty</code> currently allows a variable to be reassigned to incompatible types without reporting any error.</p>
<p>Example:</p>
<pre><code class="language-py">x = 5
x = &quot;hi&quot; # &lt;--
</code></pre>
<p>ty output:</p>
<pre><code class="language-py">All checks passed!
</code></pre>
<p>mypy output:</p>
<pre><code class="language-py">test.py:2: error: Incompatible types in assignment (expression has type &quot;str&quot;, variable has type &quot;int&quot;)  [assignment]
Found 1 error in 1 file (checked 1 source file)
</code></pre>
<p><strong>Question</strong></p>
<p>Once a variable’s type is inferred, should later assignments be checked for compatibility with that inferred type?</p>
<p>If so, is it possible that this could be supported in the future, or made available via a configuration option (for example, a strict or opt-in mode)?</p>
<h3>Version</h3>
<p>ty 0.0.3 (fadfe0966 2025-12-17)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @staciax on 2025-12-18 08:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-12-18 08:20</div>
            <div class="timeline-body"><p>Thank you for your question.</p>
<blockquote>
<p>Once a variable’s type is inferred, should later assignments be checked for compatibility with that inferred type?</p>
</blockquote>
<p>ty chooses not to do this. There is (in principle) nothing wrong with the code here. If you want <code>x</code> to only ever be an int, it needs to be annotated (<code>x: int = 5</code>).</p>
<blockquote>
<p>If so, is it possible that this could be supported in the future, or made available via a configuration option (for example, a strict or opt-in mode)?</p>
</blockquote>
<p>See <a href="https://docs.astral.sh/ty/reference/typing-faq/#does-ty-have-a-strict-mode">here</a>:</p>
<blockquote>
<p>Not yet. A stricter inference mode is tracked in <a href="https://github.com/astral-sh/ty/issues/1240">this issue</a>. In the meantime, you can consider using Ruff's <a href="https://docs.astral.sh/ruff/rules/#flake8-annotations-ann">flake8-annotations rules</a> to enforce more explicit type annotations in your code.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/staciax">@staciax</a> on 2025-12-18 09:38</div>
            <div class="timeline-body"><p>Thank you for the clarification.
That makes sense. I understand that this behavior is intentional and that explicit annotations are the recommended approach.
I’ll follow the stricter inference tracking issue and consider using Ruff’s <code>flake8-annotations</code> rules where appropriate.
Thanks for the guidance.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @staciax on 2025-12-18 09:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:54:35 UTC
    </footer>
</body>
</html>
