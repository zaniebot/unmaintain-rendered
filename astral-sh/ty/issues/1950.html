<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>find-references on a definition should be find-uses (not include self) - astral-sh/ty #1950</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>find-references on a definition should be find-uses (not include self)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1950">#1950</a>
        opened by <a href="https://github.com/Gankra">@Gankra</a>
        on 2025-12-16 18:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Gankra">@Gankra</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<pre><code>x = 1
print(x)
</code></pre>
<p>If you find-references on the second x it goes to the first (good!)
If you find-references on the first x it shows both itself <em>and</em> the second (bad, not helpful, should only be the second).</p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @Gankra on 2025-12-16 18:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @Gankra on 2025-12-16 18:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-16 18:32</div>
            <div class="timeline-body"><p>Oh wild we actually support this distinction but it's something the client tells us which it wants?</p>
<p>https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/#referenceContext</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-16 18:32</div>
            <div class="timeline-body"><p>This problem affects PyCharm, where the default find usages shortcut doesn't work, but &quot;find usages&quot; from the menu does, which then shows two options, the current line and column as well sa the real find usages dialog the user wants.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-16 18:45</div>
            <div class="timeline-body"><blockquote>
<p>If you find-references on the first x it shows both itself and the second (bad, not helpful, should only be the second).</p>
</blockquote>
<p>This is also what pylance and rust analyzer does. So I'm not sure if this is indeed entirely undesired.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-16 18:46</div>
            <div class="timeline-body"><p>Same if you do find references on a function, r-a returns the function as well as all uses.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-16 19:24</div>
            <div class="timeline-body"><p>Hmm is cmd+click a different API than &quot;find-references&quot;? Or maybe it's one of those &quot;they query a bunch of different ones with fallback&quot; situtations?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/GuilhermePSC">@GuilhermePSC</a> on 2026-01-14 09:42</div>
            <div class="timeline-body"><p>I'm currently exploring moving from pyright to ty, and it looks great! Thank you for all the efforts you put into this.
I came across this issue because we also use PyCharm and the absence of a quick shortcut to &quot;Go to usages&quot; is a bit annoying. It's currently blocking adoption for me (maybe together with the <a href="https://github.com/astral-sh/ty/issues/2403">absence of full support to Pydantic</a>).</p>
<p>Do you have a timeline to solve this issue in https://github.com/astral-sh/ruff/pull/22012?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Pre-stable 1" by @MichaReiser on 2026-01-15 08:29</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-15 08:50:11 UTC
    </footer>
</body>
</html>
