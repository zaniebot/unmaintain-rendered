<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&quot;ty&quot; can't find dist-packages when using the system packages (not a venv) on Linux - astral-sh/ty #2508</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>&quot;ty&quot; can't find dist-packages when using the system packages (not a venv) on Linux</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2508">#2508</a>
        opened by <a href="https://github.com/a-h-ismail">@a-h-ismail</a>
        on 2026-01-15 09:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/a-h-ismail">@a-h-ismail</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hello Maintainers,</p>
<p>I have recently installed <code>ty</code> as an alternative to <code>pyright</code> for better performance. The problem is that no matter what I tried, <code>ty</code> won't find the <code>site-packages</code> for the system Python installation.</p>
<p>More information:
<code>ty</code> is installed from the official extension on VSCodium. I tried both the bundled <code>ty</code> and the one installed using <code>pipx</code> on Debian 13 (my host OS). Without any configuration, I get:</p>
<pre><code>INFO Version: 0.0.12
INFO Defaulting to python-platform `linux`
ERROR Failed to create project for workspace `file://&lt;path_to_project&gt;`: Failed to discover the site-packages directory: Invalid selected interpreter in your editor `/usr`: Could not find a `site-packages` directory for this Python installation/executable. Falling back to default settings
INFO Defaulting to python-platform `linux`
INFO Python version: Python 3.13, platform: linux
</code></pre>
<p>When I include the configuration file <code>ty.toml</code>:</p>
<pre><code>[environment]
extra-paths = [&quot;/usr/lib/python313.zip&quot;,&quot;/usr/lib/python3.13&quot;,&quot;/usr/lib/python3.13/lib-dynload&quot;,&quot;$HOME/.local/lib/python3.13/site-packages&quot;,&quot;/usr/local/lib/python3.13/dist-packages&quot;,&quot;/usr/lib/python3/dist-packages&quot;]
python = &quot;/usr/bin/python3.13&quot;
python-version = &quot;3.13&quot;
</code></pre>
<p>I get:</p>
<pre><code>INFO Version: 0.0.12
INFO Defaulting to python-platform `linux`
ERROR Failed to create project for workspace `file://&lt;path_to_project&gt;`: Failed to discover the site-packages directory: Invalid `environment.python` setting

--&gt; Invalid setting in configuration file `&lt;project_root&gt;/ty.toml`
  |
1 | [environment]
2 | extra-paths = [&quot;/usr/lib/python313.zip&quot;,&quot;/usr/lib/python3.13&quot;,&quot;/usr/lib/python3.13/lib-dynload&quot;,&quot;&lt;home&gt;/.local/lib/python3.13/siteâ€¦
3 | python = &quot;/usr/bin/python3.13&quot;
  |          ^^^^^^^^^^^^^^^^^^^^^ Could not find a `site-packages` directory for this Python installation/executable
4 | python-version = &quot;3.13&quot;
  |
. Falling back to default settings
INFO Defaulting to python-platform `linux`
INFO Python version: Python 3.13, platform: linux
</code></pre>
<p>Can I somehow give the <code>site-packages</code> to <code>ty</code> using something similar to <code>python -c &quot;import sys; print('\n'.join(sys.path))&quot;</code> for system paths as a workaround for now?</p>
<p>Thank you</p>
<h3>Version</h3>
<p>ty 0.0.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Ty can't find dist-packages when using the system packages (not a venv) on Linux" to ""ty" can't find dist-packages when using the system packages (not a venv) on Linux" by @a-h-ismail on 2026-01-15 10:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">imports</span> added by @AlexWaygood on 2026-01-15 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2026-01-15 16:35</div>
            <div class="timeline-body"><p>Thanks for the report! This is #1323</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @carljm on 2026-01-15 16:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/a-h-ismail">@a-h-ismail</a> on 2026-01-16 06:06</div>
            <div class="timeline-body"><p>@carljm Do you have any workaround for the time being?
I can help you test any patches for Debian.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2026-01-16 07:49</div>
            <div class="timeline-body"><p>@a-h-ismail see https://github.com/astral-sh/ty/issues/1323#issuecomment-3726358944</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/a-h-ismail">@a-h-ismail</a> on 2026-01-16 12:37</div>
            <div class="timeline-body"><p>@MichaReiser Thank you. I have tried the <code>extra-paths</code> workaround and it didn't work for some reason. However the <code>PYTHONPATH</code> did work. I still get an error from &quot;ty Language server&quot; on startup, but the packages are getting recognized.</p>
<p>I got the directories to add to PYTHONPATH by running <code>python -c &quot;import sys; print(':'.join(sys.path))&quot;</code> and removing the leading ':' then exporting the remaining text into PYTHONPATH in <code>.profile</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-16 12:59:50 UTC
    </footer>
</body>
</html>
