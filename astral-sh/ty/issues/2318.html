<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Literal autocomplete - astral-sh/ty #2318</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Literal autocomplete</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2318">#2318</a>
        opened by <a href="https://github.com/benomahony">@benomahony</a>
        on 2026-01-03 18:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/benomahony">@benomahony</a></div>
            <div class="timeline-body"><p>ty doesn't provide autocomplete for Literal type alias values when typing inside strings. This works fine in basedpyright/pyright.</p>
<h2>Reproduction</h2>
<pre><code class="language-python">from pydantic_ai.models import KnownModelName

model_name: KnownModelName = &quot;&quot;  # cursor here, between the quotes
</code></pre>
<p>When I type between the quotes or trigger completion, I'd expect to see suggestions like:</p>
<ul>
<li><code>&quot;anthropic:claude-3-5-haiku-latest&quot;</code></li>
<li><code>&quot;openai:gpt-5&quot;</code></li>
<li>etc.</li>
</ul>
<p>Instead, no literal suggestions appear - just generic string completions.</p>
<p>The same code works in basedpyright, which shows all the literal values from the type alias.</p>
<h2>Context</h2>
<p><code>KnownModelName</code> is defined as a Literal type alias in pydantic-ai:</p>
<pre><code class="language-python">KnownModelName = Literal[
    &quot;openai/gpt-4o&quot;,
    &quot;anthropic/claude-sonnet-4-5-20250929&quot;,
    # ... bunch more model names
]
</code></pre>
<p>This pattern is pretty common for libraries that want type safety + IDE autocomplete for string constants.</p>
<h2>Environment</h2>
<ul>
<li>ty 0.0.8</li>
<li>Neovim with LazyVim</li>
<li>Python 3.14</li>
</ul>
<p>Pyright added this feature in response to microsoft/pyright#335 if that's helpful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">completions</span> added by @AlexWaygood on 2026-01-03 18:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @AlexWaygood on 2026-01-03 18:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-03 18:33</div>
            <div class="timeline-body"><p>Thanks! I think this is https://github.com/astral-sh/ty/issues/938</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @AlexWaygood on 2026-01-03 18:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:21:39 UTC
    </footer>
</body>
</html>
