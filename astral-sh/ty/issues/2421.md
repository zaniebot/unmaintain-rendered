```yaml
number: 2421
title: "Add strict-optional configuration option (or separate rule) for T | None argument mismatches"
type: issue
state: open
author: FroguelYipit
labels:
  - configuration
assignees: []
created_at: 2026-01-09T18:39:16Z
updated_at: 2026-01-09T21:32:01Z
url: https://github.com/astral-sh/ty/issues/2421
synced_at: 2026-01-10T01:56:41Z
```

# Add strict-optional configuration option (or separate rule) for T | None argument mismatches

---

_Issue opened by @FroguelYipit on 2026-01-09 18:39_

### Summary

This is more of a feature request, but since I didn't see that option, I'm opening as a bug. 

When using third-party libraries with incomplete type hints, ty frequently flags `invalid-argument-type` errors when passing `T | None` to functions that accept `T`. This happens because the library's type stubs incorrectly annotate a parameter as `T` when it actually accepts `None` at runtime. 

Example
```py
def lib_func(a: int = None) -> int:
    return a or 1

a = None
lib_func(a=a) 
```
then `ty` will flag the `a=a` as being wrong, despite there being no error at runtime. I understand this might be desired behavior in some cases, which is why I'm asking for a config to switch on or off. My issue is specific for this `None` that work at runtime. Ideally they'd be warnings not errors, but only current option would be to disable all invalid argument checks which is not an option. 

### Version

ty 0.0.10 (d18902cdc 2026-01-07)

---

_Comment by @carljm on 2026-01-09 19:06_

Hmm, I was hoping the Python ecosystem by this point had mostly moved on from relying on mypy's old non-strict-optional behavior, but it sounds like at least some libraries have not?

I don't love the idea of adding an option for this -- IMO the annotations in the library are just wrong and should be fixed. But we can consider it, and see if there's high demand for it.

Do any type checkers other than mypy offer a similar option?

---

_Label `configuration` added by @MichaReiser on 2026-01-09 21:32_

---
