<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use main project for virtual files - astral-sh/ty #794</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use main project for virtual files</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/794">#794</a>
        opened by <a href="https://github.com/MichaReiser">@MichaReiser</a>
        on 2025-07-09 20:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-07-09 20:23</div>
            <div class="timeline-body"><p>We currently always use the default project for virtual files. That's unlikely what the user expects. Instead, we should use the primary workspace and project. How we define primary is up for debate: the easiest is if there's a single workspace with a single project, we should then use those. It's less clear what the right heuristics are if there are multiple workspaces or projects. We can either use the default in those cases or always use the outer most project and workspace</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @MichaReiser on 2025-07-09 20:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-07-15 06:29</div>
            <div class="timeline-body"><p>We now add all virtual files to the primary workspace and project but currently we only support a single workspace containing a single project.</p>
<p>These are the TODOs that needs to be resolved to close this issue: https://github.com/astral-sh/ruff/blob/93a44b3b2b1f97b8532adf41cdd9dd82ee9a65bb/crates/ty_server/src/session.rs#L166-L207</p>
<p>This can only be done once multiple workspaces and projects are supported in the server.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-07-15 06:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 02:11:17 UTC
    </footer>
</body>
</html>
