<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add inlay hint for generic type in generic constructor calls - astral-sh/ty #2295</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add inlay hint for generic type in generic constructor calls</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/2295">#2295</a>
        opened by <a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a>
        on 2025-12-31 22:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MeGaGiGaGon">@MeGaGiGaGon</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>When writing highly generic-centric code, one of my favorite features from basedpyright that I'd like to see in ty is inlay hints for constructors, specifically for situations where there is no other good place for showing the type of that generic, ie in the middle of a chain of calls.</p>
<p><img width="430" height="180" alt="Image" src="https://github.com/user-attachments/assets/9bc2fb49-08e2-4bf2-9fa1-5f65d3f1803d" /></p>
<p>Currently ty doesn't have that <code>[int]</code> inlay hint on the <code>HasGeneric</code> constructor call
https://play.ty.dev/d2ef7feb-51a9-47ba-b349-8c0c15196854</p>
<p><img width="340" height="181" alt="Image" src="https://github.com/user-attachments/assets/e5b408fa-0032-4d9e-8a84-cbd60dc02f7b" /></p>
<p>Code for easy copy/pasting:</p>
<pre><code class="language-py">class HasGeneric[T]:
    def __init__(self, x: T):
        self._x: T = x

def uses_generic[T](item: HasGeneric[T]): ...

my_item = 1

uses_generic(HasGeneric(my_item))
</code></pre>
<p>(At least personally I would also really like it if there was an additional <code>[int]</code> inlay hint on the <code>uses_generic</code> call, but that is probably too far since it's currently invalid syntax.)</p>
<h3>Version</h3>
<p>playground 758926eec</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @AlexWaygood on 2025-12-31 22:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2026-01-05 12:25</div>
            <div class="timeline-body"><p>Ooh that is neat. In simple cases I guess this is as &quot;&quot;easy&quot;&quot; as &quot;get the inferred type of the expression&quot; and then <em>vague gestures</em> extracting the generics from the type... but I have a feeling there is 1000 corner cases and this will be quite tricky.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @Gankra on 2026-01-05 12:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2026-01-06 00:26</div>
            <div class="timeline-body"><p>Yeah that is very cool. I'm optimistic there won't be <em>that</em> many corner cases, and the &quot;vague gestures&quot; should also not be that complicated -- it's in principle exactly the same thing that type-display for a <code>GenericAlias</code> already does.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:21:38 UTC
    </footer>
</body>
</html>
