<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>docstrings and signatures in hovers should fallback to base classes - astral-sh/ty #2051</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>docstrings and signatures in hovers should fallback to base classes</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/2051">#2051</a>
        opened by <a href="https://github.com/KeepNoob">@KeepNoob</a>
        on 2025-12-18 04:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/KeepNoob">@KeepNoob</a></div>
            <div class="timeline-body">Summary
<p>Currently, ty only support doc string star with &quot;&quot;&quot;, but in some case the package author use <code>___doc___</code> instead. For example, class <code>Cov2d</code> in Pytorch use <code>__doc__</code> which could not display within ty.</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/9ad6e5fa-3fb3-4433-adc7-c1c961d635e8"></p>
<p>Ty result:
<img alt="Image" src="https://github.com/user-attachments/assets/91b7d782-f9c9-475c-9a1b-7913d6291251"></p>
<p>And in Pyrefly and Pylance, it also render function signature.</p>
<p>Pyrefly:
<img alt="Image" src="https://github.com/user-attachments/assets/2486f795-b9cb-4cf3-a4de-c6dcdf1ad468"></p>
Version
<p>VS Code Ty extension 2025.74.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/Gankra">@Gankra</a> by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-18 04:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-18 05:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Stable&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-18 05:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-18 06:06</div>
            <div class="timeline-body"><p>I can&#x27;t find any evidence of any LSP supporting <code>__doc__</code>, even with completely trivial instances like</p>
<pre><code>class MyClass:
    __doc__ = &quot;hello there&quot;
</code></pre>
<p>The instances in pytorch are, to put it mildly, nightmarish for static analysis to resolve. They&#x27;re concatenating and formatting and splatting strings across several files. I expect this is basically always the case for anyone using <code>__doc__</code> because if you could express it simply, you would have.</p>
<p>I&#x27;m not opposed to adding support for <code>__doc__</code> but I&#x27;d want a motivating case that is practical for static analysis to support.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-12-18 06:57</div>
            <div class="timeline-body"><p>Both pylance and pyrefly render the documentation from the ancestor class <code>Model</code> when hovering a constructor call. But neither render the <code>__doc__</code> attribute</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/e9cd62d7-1a60-4906-8bf1-b8f57306924a"></p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/1e9f550e-d68a-454d-b5e4-4ba15d220ace"></p>
<p>There are two things we want to investigate here:</p>
<ul>
<li>Why is ty not showing the <code>__init__</code> signature when hovering the constructor call</li>
<li>We should extend ty&#x27;s docstring detection to walk up the ancestor chain for overridden methods.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Do Not Support Render __doc__ Class Attribute and Function Signature&quot; to &quot;docstrings and signatures in hovers should fallback to base classes&quot; by <a href="https://github.com/Gankra">@Gankra</a> on 2025-12-18 12:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:26:33 UTC
    </footer>
</body>
</html>
