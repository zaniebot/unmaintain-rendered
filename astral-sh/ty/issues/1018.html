<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dedicated support for Django - astral-sh/ty #1018</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>dedicated support for Django</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1018">#1018</a>
        opened by <a href="https://github.com/aaschenbrener">@aaschenbrener</a>
        on 2025-08-16 04:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/aaschenbrener">@aaschenbrener</a> on 2025-08-16 04:16</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>This is an expansion on the known issue:  No implicit import of submodules (https://github.com/astral-sh/ty/issues/133). I've imported Django models explicitly from their submodules. There is an issue with dynamic model attributes like objects and id that Ty doesn’t recognize.</p>
<p>I’m encountering persistent unresolved-attribute errors when running Ty static type checker on Django models, specifically on standard Django model attributes such as id, demo_name, and objects. These errors occur even though the Django model is properly defined, registered, explicitly imported and confirmed to have those attributes in the Django shell.</p>
<p>Steps to reproduce:</p>
<p>Define a Django model with fields such as id, demo_name in apps/sample/models/example.py.</p>
<p>Confirm the model loads and works correctly inside the Django shell:</p>
<pre><code class="language-py">from apps.sample.models.example import Demo
from django.db import models

issubclass(Demo, models.Model)  # Returns True
Demo._meta.get_fields()  # Returns expected model fields including 'id'
Demo.objects.all()  # Executes without error
</code></pre>
<p>Run Ty on a test file that uses this model, e.g. test_ty_model.py:</p>
<pre><code class="language-py">def test_model_fields(m: Demo):
    reveal_type(m.id)
    reveal_type(m.demo_name)
    reveal_type(m.save)
</code></pre>
<p>Ty reports errors like:</p>
<pre><code>error[unresolved-attribute]: Type `Demo` has no attribute `id`
error[unresolved-attribute]: Type `Demo` has no attribute `objects`
</code></pre>
<p>I have tried running Ty with explicit environment variables to load Django settings, but the errors persist:</p>
<pre><code>PYTHONPATH=. DJANGO_SETTINGS_MODULE=proj.settings.dev ty check test_ty_model.py
</code></pre>
<p>Expected behavior:
Ty should recognize standard Django model attributes (id, objects, model fields) and when the Django environment is correctly configured.</p>
<p>Actual behavior:
Ty reports unresolved-attribute errors for these standard model attributes, even though Django shell confirms their existence.</p>
<p>Environment:</p>
<p>Ty version: 0.0.1-alpha.18 (d697cc092 2025-08-14)
Python version: 3.13.6
Django version: 5.2.5
OS: macOS 15.6 24G84</p>
<p>Project structure:</p>
<pre><code>project-root/
├── manage.py
├── test_ty_model.py             
├── apps/
│   ├── sample/
│   │   ├── models/
│   │   │   └── example.py
├── proj/
│   ├── settings/
│   │   └── base.py
│   │   └──  dev.py
</code></pre>
<h3>Version</h3>
<p>0.0.1-alpha.18 (d697cc092 2025-08-14)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-08-16 14:51</div>
            <div class="timeline-body"><p>Thanks for the report! At the moment we don't have any dedicated support for Django, and due to Django's use of dynamic metaclass modifications, some attributes of Django's models aren't visible to a type-checker unless it implements dedicated Django support.</p>
<p>I'm a bit confused by the mention of using <code>django = true</code> in <code>.ty.toml</code>, since no such option exists (or has ever existed) in ty; seems like maybe something hallucinated by an LLM?</p>
<p>We would like to add some kind of Django support in future; will keep this issue open to track that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">feature</span> added by @carljm on 2025-08-16 14:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-08-16 14:57</div>
            <div class="timeline-body"><p>We also don't support <code>.ty.toml</code>. The configuration file must be named <code>ty.toml</code> and the <code>src</code> option is <code>src.root = [&quot;apps&quot;, &quot;proj&quot;]</code>. Python path is under <code>environment</code>, etc. See https://docs.astral.sh/ty/reference/configuration/#environment</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/aaschenbrener">@aaschenbrener</a> on 2025-08-18 14:06</div>
            <div class="timeline-body"><p>Thank you for the update. Yes, I was having trouble with django and difficulty figuring out how ty.toml could help and attempted to  on an LLM to help configure. It seems to have hallucinated a lot. I've removed the ty.toml file completely for now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">library</span> added by @AlexWaygood on 2025-11-04 22:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">feature</span> removed by @AlexWaygood on 2025-11-04 22:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/VaishnavGhenge">@VaishnavGhenge</a> on 2025-12-18 06:36</div>
            <div class="timeline-body"><p>+1. Django is one of the most popular Python frameworks, and these unresolved-attribute errors on model fields make ty unusable for Django projects without sprinkling # ty: ignore everywhere.
Would love to see either native support for Django's model metaclass patterns or a plugin system for django-stubs integration.</p>
<p>@carljm</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ronaldorcampos">@ronaldorcampos</a> on 2025-12-19 22:06</div>
            <div class="timeline-body"><p>I have a lot of errors of the type</p>
<p>Attribute <code>id</code> may be missing on object of type <code>Unknown | ForeignKey</code> - accessing id in a FK
Attribute <code>save</code> may be missing on object of type <code>Unknown | ForeignKey</code> - accessing save in a FK
Element <code>BigIntegerField</code> of this union is not assignable to <code>int</code> - passing pk/id to a function that takes int
Attribute <code>hour</code> may be missing on object of type <code>Unknown | DateTimeField</code> - accessing hour of a datetime field
No argument provided for required parameter <code>cls</code> of function <code>as_manager</code> - overriding objects manager</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/beaugunderson">@beaugunderson</a> on 2025-12-19 22:14</div>
            <div class="timeline-body"><p>it does sound like there's a <a href="https://astral.sh/blog/ty#:~:text=Following%20the%20Beta,and%20Django.">commitment</a> to future Django support, which I am REALLY looking forward to!</p>
<p><img width="749" height="192" alt="Image" src="https://github.com/user-attachments/assets/d6933f75-702a-4112-9c32-80f18e686633" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Stable" by @carljm on 2025-12-20 00:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ramtinabadi">@ramtinabadi</a> on 2025-12-26 13:12</div>
            <div class="timeline-body"><p>Just tinkering with ty, I had a workaround for Django's model using my old package, <a href="https://github.com/Vieolo/django-hint">django-hint</a>, which seems to work until a first-party support is added to ty.</p>
<p>Here is how you use it:</p>
<pre><code class="language-python">from typing import cast
from django_hint import StandardModelType

class SomeModel(models.Model, StandardModelType['SomeModel']):
    name = cast('str', models.CharField(max_length=100))
</code></pre>
<p>Adding the <code>StandardModelType</code> to the class and casting each field, you wouldn't need to force ty to ignore the type check, and you'll have access to the query functions.</p>
<p>This is just a workaround until first-party support is added</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "unresolved-attribute errors for Django model fields" to "dedicated support for Django" by @carljm on 2026-01-08 18:19</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:48:55 UTC
    </footer>
</body>
</html>
