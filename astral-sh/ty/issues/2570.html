<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add completion benchmarks to `ty_walltime` - astral-sh/ty #2570</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add completion benchmarks to <code>ty_walltime</code></h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/2570">#2570</a>
        opened by <a href="https://github.com/BurntSushi">@BurntSushi</a>
        on 2026-01-20 14:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a></div>
            <div class="timeline-body"><p>In https://github.com/astral-sh/ruff/pull/22630, I added a small ad hoc CLI tool for ad hoc benchmarking/profiling of completions. But ideally, we'd have some benchmarks for completions in our LSP benchmarks too. A good start would be to add them to <code>ty_walltime</code>. Currently, I think all of the benchmarks in <code>ty_walltime</code> are just running type checking:</p>
<p>https://github.com/astral-sh/ruff/blob/0a1dddbf73e368a2019617ee907b0eb271eca979/crates/ruff_benchmark/benches/ty_walltime.rs#L74-L90</p>
<p>So we'll want to add a new kind of benchmark that, instead of running type checking, it asks for completions instead.</p>
<p>For completions, the uncached and cached cases can be markedly different. Ideally we could benchmark both. But at minimum, we should be clear about which case is being tested (perhaps in the name of the benchmark).</p>
<p>(It may also be a good idea to add completion benchmarks to <code>scripts/ty_benchmark</code>, but I think that's a separate task.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Stable" by @BurntSushi on 2026-01-20 14:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">performance</span> added by @BurntSushi on 2026-01-20 14:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by @BurntSushi on 2026-01-20 14:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">completions</span> added by @BurntSushi on 2026-01-20 14:19</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 14:44:30 UTC
    </footer>
</body>
</html>
