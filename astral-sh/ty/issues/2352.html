<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown code blocks rendering space as HTML code on Docstrings - astral-sh/ty #2352</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Markdown code blocks rendering space as HTML code on Docstrings</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2352">#2352</a>
        opened by <a href="https://github.com/gabriel-abn">@gabriel-abn</a>
        on 2026-01-05 18:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gabriel-abn">@gabriel-abn</a></div>
            <div class="timeline-body"><p>I'm using tabs on my code instead of spaces. Really don't know if this can be a cause.</p>
<p>Every Markdown tag I used works nice but code blocks are not rendering as I expected. They're rendering all spaces as HTML tags.</p>
<p><img width="943" height="899" alt="Image" src="https://github.com/user-attachments/assets/720f8441-bd60-4066-a0fd-ad598c2a1dc5" /></p>
<p><strong>OBS</strong>: Math blocks (with $$ --- $$) does not render as well. I see that is not a commonly used block but they're very nice to document some calculation and formulas.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2026-01-05 18:14</div>
            <div class="timeline-body"><p>Dang, guess I gotta fix this hack -- what IDE is this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gabriel-abn">@gabriel-abn</a> on 2026-01-05 18:19</div>
            <div class="timeline-body"><p>VSCode.</p>
<p><img width="517" height="262" alt="Image" src="https://github.com/user-attachments/assets/8d19d5e0-69ee-4505-bf2c-0b1baa4b2a96" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MichaReiser on 2026-01-05 18:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @MichaReiser on 2026-01-05 18:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Pre-stable 1" by @MichaReiser on 2026-01-05 18:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2026-01-05 18:52</div>
            <div class="timeline-body"><p>So I'll note that markdown isn't exactly happy about this input. Given the following:</p>
<hr />
<pre><code> Returns:
     Union...
     ```
     {
        id: ....
     }
     ```
 </code></pre>
<hr />
<p>We get this rendering:</p>
<hr />
<p>Returns:
Union...
<code>     {         id: ....      }     </code></p>
<hr />
<p>I honestly don't even understand what on earth is happening in the markdown grammar here, but, suffice it to say it's Bad.</p>
<p>I can however munge the output to faithfully render it by eating the indent on the ``` lines:</p>
<p>Returns:
    Union...</p>
<pre><code>     {
        id: ....
     }
</code></pre>
<hr />
<p>Which looks even better in vscode</p>
<p><img width="175" height="137" alt="Image" src="https://github.com/user-attachments/assets/9e0d62e9-a21b-43c1-9708-1c473d1cca7f" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gabriel-abn">@gabriel-abn</a> on 2026-01-05 19:02</div>
            <div class="timeline-body"><p>Nice!! Just tested myself and this fixes for the highlight (even the html tags are highlighted lol).</p>
<p>This code block behavior is very similar to Obsidian. When adding a tab to a line it turns into a code like highlight.</p>
<p><img width="698" height="406" alt="Image" src="https://github.com/user-attachments/assets/118e8fab-0fca-4832-863e-d2efc474c417" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Gankra on 2026-01-06 15:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:21:41 UTC
    </footer>
</body>
</html>
