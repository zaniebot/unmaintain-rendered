<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support `extend-include`, `extend-exclude` - astral-sh/ty #1655</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support <code>extend-include</code>, <code>extend-exclude</code></h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1655">#1655</a>
        opened by <a href="https://github.com/alexei">@alexei</a>
        on 2025-11-27 12:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/alexei">@alexei</a> on 2025-11-27 12:49</div>
            <div class="timeline-body"><p>It would be useful if <code>[tool.ty.src]</code> allowed <code>extend-include</code> and <code>extend-exclude</code> directives. <code>include</code> and <code>exclude</code> have some defaults which work for most packages (or at least those using the &quot;src&quot; layout). But sometimes there's <em>that</em> package that has a <code>scripts/</code> directory or something. Now the config looks like:</p>
<pre><code class="language-toml">[tool.ty.src]
include = [
    &quot;scripts/&quot;,
    &quot;src/&quot;,
    &quot;tests/&quot;,
]
</code></pre>
<p>With <code>extend-include</code> it would be simplified to:</p>
<pre><code class="language-toml">[tool.ty.src]
extend-include = [
    &quot;scripts/&quot;,
]
</code></pre>
<p>This would also be very familiar to Ruff users, see https://docs.astral.sh/ruff/settings/#extend-include</p>
<hr />
<p>As a side note, it is strange to me that both <code>include</code> and <code>exclude</code> default to <code>null</code> (or so are documented) when they're not really null.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-27 13:09</div>
            <div class="timeline-body"><p>Both <code>include</code> and <code>exclude</code> have the <code>extend</code> semantics from Ruff in that additional entries will be appended. However, this isn't very useful at the moment because ty doesn't support hierarchical configuration files.</p>
<p>To remove an <code>exclude</code> in ty, you specify a negative exclude pattern. That will take precedence over the default exclude. See https://docs.astral.sh/ty/reference/configuration/#exclude_1 for more details</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @MichaReiser on 2025-11-27 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @AlexWaygood on 2025-11-27 13:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alexei">@alexei</a> on 2025-11-29 09:42</div>
            <div class="timeline-body"><p>To me, changing semantics from one project to another is very confusing. I think that should be avoided or at least documented.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-29 14:57</div>
            <div class="timeline-body"><p>The new semantics are documented, but happy to make any changes if you can suggest a specific improvement.</p>
<p>We didn't change this just for fun ;).  Ruff's behavior has consistently been confusing to users, and the new behavior is much closer to uv's include/exclude semantics.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:41:11 UTC
    </footer>
</body>
</html>
