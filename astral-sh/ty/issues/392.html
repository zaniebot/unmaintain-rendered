<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>support for bare `TypeAliasType` - astral-sh/ty #392</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>support for bare <code>TypeAliasType</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/392">#392</a>
        opened by <a href="https://github.com/jorenham">@jorenham</a>
        on 2025-05-14 18:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jorenham">@jorenham</a> on 2025-05-14 18:14</div>
            <div class="timeline-body"><p>For example <code>Unit = TypeAliasType(&quot;Unit&quot;, tuple[()])</code> is reported as <code>error[invalid-type-form]</code>, independent of whether <code>TypeAliasType</code> is imported from <code>typing</code> or <code>typing_extensions</code>.</p>
<p>https://play.ty.dev/9903c4a3-6d05-4663-b282-4731ed610369</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">feature</span> added by @carljm on 2025-05-14 18:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @carljm on 2025-05-14 18:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-05-14 18:24</div>
            <div class="timeline-body"><p>Thanks for the report! I guess the use case here is using <code>TypeAliasType</code> from <code>typing_extensions</code> in order to use PEP 695 type aliases on Python versions that don't have PEP 695 syntax.</p>
<p>(In case it's not clear to another reader of this issue, <code>Unit = TypeAliasType(&quot;Unit&quot;, tuple[()])</code> has the same runtime effect as the PEP 695 syntactic sugar <code>type Unit = tuple[()]</code>.)</p>
<p>We already support the latter, we should ideally support the former as well. Shouldn't be a difficult change, I don't think; we already have a <code>KnownClass::TypeAliasType</code> and it already recognizes it from both <code>typing</code> and <code>typing_extensions</code>, we just need to add a special known-case for evaluating calls to it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">typing semantics</span> added by @AlexWaygood on 2025-05-14 18:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jorenham">@jorenham</a> on 2025-05-14 18:43</div>
            <div class="timeline-body"><blockquote>
<p>I guess the use case here is using <code>TypeAliasType</code> from <code>typing_extensions</code> in order to use PEP 695 type aliases on Python versions that don't have PEP 695 syntax.</p>
</blockquote>
<p>Another use-case is to control the how certain type-checkers report it. Mypy, for instance, will in certain situations report the full type expression if it's a <code>TypeAlias</code>, but if it's a <code>TypeAliasType</code> it just report its name. So I mostly use it to reduce the amount of error message spaghettification.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MatthewMckee4">@MatthewMckee4</a> on 2025-05-15 21:56</div>
            <div class="timeline-body"><p>Is this another example of a <code>TypeForm</code> that we need to handle <em>differently</em>, like in #122?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-05-16 02:22</div>
            <div class="timeline-body"><blockquote>
<p>Is this another example of a <code>TypeForm</code> that we need to handle <em>differently</em>, like in <a href="https://github.com/astral-sh/ty/issues/122">#122</a>?</p>
</blockquote>
<p>Yes, the second argument when instantiating a <code>TypeAliasType</code> will need to be treated as a type expression, similar to e.g. the <code>bound</code> or <code>constraints</code> argument when instantiating a legacy <code>TypeVar</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @sharkdp by @sharkdp on 2025-05-16 13:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sharkdp on 2025-05-19 14:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sharkdp on 2025-05-19 14:36</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 11:39:36 UTC
    </footer>
</body>
</html>
