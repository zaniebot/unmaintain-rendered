<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Best way to use `dict`s as `kwargs`? - astral-sh/ty #2465</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Best way to use <code>dict</code>s as <code>kwargs</code>?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/2465">#2465</a>
        opened by <a href="https://github.com/galah92">@galah92</a>
        on 2026-01-12 13:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/galah92">@galah92</a></div>
            <div class="timeline-body">Question
<pre><code>def foo(a: str, b: int) -&gt; None:
    pass


kw = {&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: 42}
foo(**kw)
</code></pre>
<p>This yields:</p>
<blockquote>
<p>Argument to function <code>foo</code> is incorrect: Expected <code>int</code>, found <code>Unknown | str | init</code></p>
</blockquote>
<p>What&#x27;s the best way to type <code>kw</code> to make this work? I&#x27;m looking for something simpler than defining a <code>TypeDict</code>, specifically.</p>
<p>Motivation: I need to call multiple functions that support the same subset of kwargs with similar values.</p>
Version
<p>ty 0.0.11 (830cb9cc6 2026-01-09)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/galah92">@galah92</a> on 2026-01-12 13:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-12 13:43</div>
            <div class="timeline-body"><p>The solution that works today is to do</p>
<pre><code>from typing import Any, cast

def foo(a: str, b: int) -&gt; None:
    pass

kw = cast(dict[str, Any], {&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: 42})
foo(**kw)
</code></pre>
<p>We intend to soon change our behaviour so that this will also work:</p>
<pre><code>from typing import Any

def foo(a: str, b: int) -&gt; None:
    pass

kw: dict[str, Any] = {&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: 42}
foo(**kw)
</code></pre>
<p>And we have <a href="https://github.com/astral-sh/ty/issues/1248">astral-sh/ty#1248</a> open to track not emitting any error at all on your original code (which I think would be good)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-12 13:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/galah92">@galah92</a> on 2026-01-12 14:12</div>
            <div class="timeline-body"><p>Thank you. Note that <code>kw: dict[str, Any] = {&quot;a&quot;: &quot;hello&quot;, &quot;b&quot;: 42}</code> seems to work for me already, no need for <code>cast</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-12 14:13</div>
            <div class="timeline-body"><p>Ah right, yeah, I forgot that we implemented that for invariant generics already ðŸ˜†</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:27:05 UTC
    </footer>
</body>
</html>
