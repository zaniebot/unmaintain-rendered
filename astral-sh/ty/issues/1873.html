<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`__qualname__` not recognized inside class body - astral-sh/ty #1873</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>__qualname__</code> not recognized inside class body</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1873">#1873</a>
        opened by <a href="https://github.com/randolf-scholz">@randolf-scholz</a>
        on 2025-12-13 08:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/randolf-scholz">@randolf-scholz</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p><code>ty</code> does not know that about certain <a href="https://docs.python.org/3/reference/datamodel.html#special-attributes">special attributes</a> are already available when creating the class (namely <code>__qualname__</code>, <code>__module__</code> and <code>__firstlineno__</code>) https://play.ty.dev/5b18389b-f35c-4f0c-9d53-f9c8bac4526e</p>
<pre><code class="language-python">from typing import reveal_type
class Foo:
    print(vars())
    reveal_type(__qualname__)      # E: unresolved-reference
    reveal_type(__module__)        # E: unresolved-reference
    reveal_type(__firstlineno__)   # E: unresolved-reference
</code></pre>
<p>Real world example: https://play.ty.dev/1ad0e7a0-7850-4445-98be-a92dc69e3cec</p>
<pre><code class="language-python">import logging
from typing import ClassVar

class WithLogger:
    logger: ClassVar[logging.Logger] = logging.getLogger(__qualname__)
</code></pre>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">runtime semantics</span> added by @sharkdp on 2025-12-13 08:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Stable" by @AlexWaygood on 2025-12-13 12:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-12-13 19:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-12-13 22:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:21:17 UTC
    </footer>
</body>
</html>
