<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>report invalid overload implementation when implementation is unannotated - astral-sh/ty #1232</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>report invalid overload implementation when implementation is unannotated</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1232">#1232</a>
        opened by <a href="https://github.com/KotlinIsland">@KotlinIsland</a>
        on 2025-09-22 02:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/KotlinIsland">@KotlinIsland</a></div>
            <div class="timeline-body">Summary
<pre><code>from typing import overload

@overload
def f(a: int) -&gt; int: ...

@overload
def f(a: str) -&gt; str: ...

def f(a):
    return 1  # expect error about this implementation being invalid
</code></pre>
Version
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-09-22 04:36</div>
            <div class="timeline-body"><p>Is this similar to #128 and #103 ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2025-09-22 05:25</div>
            <div class="timeline-body"><blockquote>
<p>Is this similar to #128 and #103 ?</p>
</blockquote>
<p>no, seems very different. although perhaps it would depend on return type inference</p>
<p>i know the impl in my egg isn&#x27;t annotated, but the signatures are annotated, this is the true source of truth in an overload impl</p>
<p>this issue is regarding that the body of the impl conforms to the signature declarations, i.e. here the impl does not conform to signature 2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">overloads</span> added by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-09-22 07:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;report invalid overload implmentation&quot; to &quot;report invalid overload implementation&quot; by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-09-22 12:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;report invalid overload implementation&quot; to &quot;report invalid overload implementation when implementation is unannotated&quot; by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-09-22 12:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-09-22 12:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-09-22 21:46</div>
            <div class="timeline-body"><p>Does any existing type checker implement this?</p>
<p>It seems quite difficult to implement in full generality.</p>
<p>It would be easy to tell if the return type of the implementation is compatible with no overload, but the feature requested here seems like it would at least require re-checking the implementation body once per overload.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2025-09-22 23:35</div>
            <div class="timeline-body"><blockquote>
<p>it would at least require re-checking the implementation body once per overload.</p>
</blockquote>
<p>something along those lines, yes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Z post-stable&quot; by <a href="https://github.com/carljm">@carljm</a> on 2025-11-15 01:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Removed from milestone &quot;Z post-stable&quot; by <a href="https://github.com/carljm">@carljm</a> on 2025-11-18 16:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:25:35 UTC
    </footer>
</body>
</html>
