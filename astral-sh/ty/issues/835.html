<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>detect unused names (including unused because shadowed) - astral-sh/ty #835</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>detect unused names (including unused because shadowed)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/835">#835</a>
        opened by <a href="https://github.com/karlicoss">@karlicoss</a>
        on 2025-07-16 23:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/karlicoss">@karlicoss</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<h2>What happens</h2>
<p>If a function is declared twice, ty happily accepts it and infers the type as of the latest definition:</p>
<pre><code class="language-py">def x() -&gt; int:
    return 1

def x() -&gt; str:
    return &quot;&quot;

reveal_type(x)
# Revealed type: `def x() -&gt; str` (revealed-type) [Ln 7, Col 13]
</code></pre>
<p>ty playground link: https://play.ty.dev/9143957d-9d8d-4f20-b8c0-f6ce700d69f8</p>
<h2>Expected behaviour</h2>
<p>Should probably complain (especially if the types are mismatching).</p>
<p>For the same code, mypy complains with <a href="https://mypy.readthedocs.io/en/stable/error_code_list.html#check-that-each-name-is-defined-once-no-redef"><code>no-redef</code> error</a></p>
<p>https://mypy-play.net/?mypy=latest&amp;python=3.12&amp;gist=592caaea970d4463db57c27616547448</p>
<p>Apologies if this is already discussed somewhere, but couldn't find!</p>
<h3>Version</h3>
<p><a href="https://github.com/astral-sh/ty/commit/03f35a4908bfe4d3ff201293beb3aa1fb1e52f05">03f35a4</a> -- latest git (playground)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">lint</span> added by @carljm on 2025-07-16 23:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-07-16 23:39</div>
            <div class="timeline-body"><p>I think we see this as more of a lint rule, not a core type checker feature. This code doesn't have any type errors in it.</p>
<p>I do think a &quot;this function/class was defined and then shadowed without ever being used&quot; lint rule would make sense to add on top of ty in the future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">feature</span> added by @carljm on 2025-07-16 23:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/karlicoss">@karlicoss</a> on 2025-07-16 23:47</div>
            <div class="timeline-body"><p>Ah thanks! Out of interest, is there a special lint mode planned for ty? Or you mean it would be part of ruff?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2025-07-16 23:56</div>
            <div class="timeline-body"><p>The details are still somewhat TBD, but in the long term we envision unifying ruff and ty in some way such that we can have lint rules powered by ty's type analysis.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "ty doesn't detect same name defined multiple types (aka mypy no-redef)" to "detect unused names (including unused because shadowed)" by @carljm on 2025-07-17 03:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:20:18 UTC
    </footer>
</body>
</html>
