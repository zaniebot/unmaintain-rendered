<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tuple return type contains incorrect union - astral-sh/ty #1989</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Tuple return type contains incorrect union</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/1989">#1989</a>
        opened by <a href="https://github.com/judahrand">@judahrand</a>
        on 2025-12-17 09:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/judahrand">@judahrand</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I've had a quick poke through existing issues and couldn't find something that looked like this.</p>
<pre><code class="language-python">from typing import reveal_type


def func() -&gt; tuple[int, str, float]:
    return 42, &quot;hello&quot;, 2.71


a, b, c = func()
reveal_type(func)  # Expected: def func() -&gt; tuple[int, str, float]
reveal_type(a)  # Expected: int
reveal_type(b)  # Expected: str
reveal_type(c)  # Expected: float
</code></pre>
<p><code>ty</code> seems to think that the signature of <code>func</code> is <code>def func() -&gt; tuple[int, str, int | float]</code> despite the declared signature.</p>
<h3>Version</h3>
<p>ty 0.0.2 (42835578d 2025-12-16)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sharkdp">@sharkdp</a> on 2025-12-17 09:02</div>
            <div class="timeline-body"><p>Thank you for reporting this.</p>
<p>We treat an annotation of <code>float</code> as being equivalent to <code>int | float</code>, as explained in <a href="https://typing.python.org/en/latest/spec/special-types.html#special-cases-for-float-and-complex">this section</a> of the Python typing specification.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @sharkdp on 2025-12-17 09:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-12-17 09:04</div>
            <div class="timeline-body"><p>(Hey @judahrand, great to see you here! ðŸ˜ƒ)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/judahrand">@judahrand</a> on 2025-12-17 09:07</div>
            <div class="timeline-body"><blockquote>
<p>Thank you for reporting this.</p>
<p>We treat an annotation of <code>float</code> as being equivalent to <code>int | float</code>, as explained in <a href="https://typing.python.org/en/latest/spec/special-types.html#special-cases-for-float-and-complex">this section</a> of the Python typing specification.</p>
</blockquote>
<p>Aha! That explains it! Desired behaviour rather than a bug. I came across this while try to simplify another case which <em>seemed</em> wrong to me (but is contained within a closed codebase so can't share the direct example). I'll close this report and see if I can come up with something which reproduces the other thing ðŸ˜…</p>
<blockquote>
<p>(Hey @judahrand, great to see you here! ðŸ˜ƒ)</p>
</blockquote>
<p>I'm always lurking away in the background ðŸ˜›</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/judahrand">@judahrand</a> on 2025-12-17 09:08</div>
            <div class="timeline-body"><blockquote>
<p>Thank you for reporting this.</p>
<p>We treat an annotation of <code>float</code> as being equivalent to <code>int | float</code>, as explained in <a href="https://typing.python.org/en/latest/spec/special-types.html#special-cases-for-float-and-complex">this section</a> of the Python typing specification.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @judahrand on 2025-12-17 09:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:21:21 UTC
    </footer>
</body>
</html>
