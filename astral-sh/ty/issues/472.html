<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add config option to disable inlay type hints for variable assignment targets - astral-sh/ty #472</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add config option to disable inlay type hints for variable assignment targets</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/472">#472</a>
        opened by <a href="https://github.com/pirate">@pirate</a>
        on 2025-05-20 01:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/pirate">@pirate</a></div>
            <div class="timeline-body"><p>I just installed the extension and was surprised to find it's trying to suggest inline type hints for a bunch of assignemnt expressions that don't need them:</p>
<p><img width="387" alt="Image" src="https://github.com/user-attachments/assets/56f9c0cd-f6b9-4896-80f9-710d845ce756" /></p>
<p><img width="390" alt="Image" src="https://github.com/user-attachments/assets/f36bc86e-a075-4827-983c-e36afe735e73" /></p>
<p><img width="550" alt="Image" src="https://github.com/user-attachments/assets/e293847c-ca4a-4597-8d47-67ce9b946865" /></p>
<p><img width="1145" alt="Image" src="https://github.com/user-attachments/assets/0f4528d3-3497-4c47-8f26-c6a82569816c" /></p>
<p>None of these are suggested by <code>pyright</code> or <code>mypy</code> LSP servers, and there doesn't seem to be a way to disable these suggestions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-05-21 14:16</div>
            <div class="timeline-body"><p>I agree! Thanks for reporting.</p>
<p>I'll move this to ty repository as it's related to the language server.</p>
<p>For reference, there is an option inside VS Code that's used by Pyright / Pylance:</p>
<pre><code class="language-jsonc">  // Enable/disable inlay hints for variable types. Hints are not displayed for assignments of literals or constants:
  // ```python
  // foo':list[str]' = [&quot;a&quot;]
  // ```
  &quot;python.analysis.inlayHints.variableTypes&quot;: false,
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @dhruvmanila on 2025-05-21 14:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hahuang65">@hahuang65</a> on 2025-05-21 21:25</div>
            <div class="timeline-body"><p>I'm not sure this will be a use-case in the future, but I use both <code>basedpyright</code> and <code>ty</code> in Neovim right now, as their feature sets don't fully overlap (yet?)</p>
<p>However, this causes an issue where if both try to set inlay hints, they trip over each other and actually throw errors like this:</p>
<pre><code>Error in decoration provider vim_lsp_inlayhint.win:                                                                 
Error executing lua: /usr/share/nvim/runtime/lua/vim/lsp/inlay_hint.lua:345: Invalid 'col': out of range            
stack traceback:                                                                                                    
        [C]: in function 'nvim_buf_set_extmark'                                                                     
        /usr/share/nvim/runtime/lua/vim/lsp/inlay_hint.lua:345: in function &lt;/usr/share/nvim/runtime/lua/vim/lsp/inlay_hint.lua:311&gt; 
</code></pre>
<p>This <a href="https://www.reddit.com/r/neovim/comments/1axlen1/inlay_hints_invalid_col_out_of_range/">reddit post</a> is what led me to realize it was because I had both <code>basedpyright</code> and <code>ty</code> on.</p>
<p>Any way, with basedpyright, there is a granular setting for inlay hint types. If ty will be doing different inlay hint types as well, perhaps a granular option set like this would be worth consider?</p>
<pre><code>      settings = {
        basedpyright = {
          analysis = {
            inlayHints = {
              variableTypes = false, -- conflicts with ty
              callArgumentNames = false, -- conflicts with ty
              functionReturnTypes = true,
              genericTypes = false, -- conflicts with ty
            },
          },
        },
      },
</code></pre>
<p>^
I've had to disable anything that MIGHT also have inlay hinting on the same line as a <code>ty</code> hint.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-06-01 11:42</div>
            <div class="timeline-body"><p>Related: https://github.com/astral-sh/ty-vscode/issues/20</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dhruvmanila on 2025-08-07 13:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:19:57 UTC
    </footer>
</body>
</html>
