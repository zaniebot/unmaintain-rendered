<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apply formatting to hover information - astral-sh/ty #264</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Apply formatting to hover information</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/264">#264</a>
        opened by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a>
        on 2025-05-08 08:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-05-08 08:04</div>
            <div class="timeline-body"><p>Here's what ty has to say about the type of <code>pydantic.Field</code>:</p>
<p><img src="https://github.com/user-attachments/assets/fdfbcd42-e160-4b34-b5bd-b895e8110923" alt="" /></p>
<p>For reference, here's Pyright's:</p>
<p><img src="https://github.com/user-attachments/assets/685105da-4d6e-44b1-857c-951d5399481a" alt="" /></p>
<p>There are two problems here:</p>
<ul>
<li><p>There is no syntax highlighting.</p>
<p><a href="https://github.com/astral-sh/ruff/blob/d566636ca5b86b90b9ff5e292f7fbb2598691c47/crates/ty_ide/src/hover.rs#L124">The code block's language is <code>text</code></a>, but it should be <code>python</code>. I understand <a href="https://github.com/astral-sh/ruff/pull/17057#discussion_r2028151621">ty's type information is not always valid Python</a>, but for all intents and purposes it might as well be considered as such. I'd also like to add that ty should put more trust in syntax highlighters, which are often written with invalid code in mind.</p>
</li>
<li><p>The formatting is unreadable.</p>
<p>I feel like it should be possible to run Ruff's formatter on ty's output, especially syntactically valid ones like <code>Literal[&quot;some&quot;, &quot;very&quot;, &quot;long&quot;, &quot;names&quot;]</code>.</p>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">server</span> added by @MichaReiser on 2025-05-08 08:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-13 16:34</div>
            <div class="timeline-body"><p><img width="960" height="317" alt="Image" src="https://github.com/user-attachments/assets/8d8c3409-db77-47e1-a937-ee7429da5505" /></p>
<p>We've since added python highlighting but are still dropping the ball on pretty-printing the type (this scrolls for a long while, eventually you also hit docs).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @Gankra by @Gankra on 2025-08-13 16:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-08-13 22:11</div>
            <div class="timeline-body"><p>@Gankra Appreciate the update, and thanks for your recent work on new server features. I have been seeing syntax highlighting, but no docstrings anywhere. Is there something I need to set client-side to get that to work? Neither <a href="https://docs.astral.sh/ty/reference/editor-settings/">the docs</a> nor <a href="https://github.com/astral-sh/ruff/pull/19882">the PR</a> mentions such a thing.</p>
<p>I'm using <a href="https://github.com/InSyncWithFoo-Sandbox/ty/actions/runs/16950026260">a self-built version of ty</a> on PyCharm, if that matters.</p>
<p>Here's a screenshot, for debugging and entertainment:</p>
<p><img width="1345" height="742" alt="Image" src="https://github.com/user-attachments/assets/1610e0b3-db9a-4b70-85e5-19289d9e4ed2" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-08-14 13:53</div>
            <div class="timeline-body"><p>The docstring stuff landed like, a day or two ago so unless you have the latest build of main you won't see it, but otherwise it should Just Work?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a> on 2025-08-14 15:54</div>
            <div class="timeline-body"><p>@Gankra I did in fact have the latest build of the main branch, unless something was wrong with <code>gh run download</code>. On the other hand, 0.0.1-alpha.18 does work:</p>
<p><img width="902" height="530" alt="Image" src="https://github.com/user-attachments/assets/01389cf6-bc01-409c-ba9a-56ba0da1ce3d" /></p>
<p>Not pretty by any means, but certainly an improvement over Pyright's:</p>
<p><img width="1197" height="628" alt="Image" src="https://github.com/user-attachments/assets/27a1bb3d-abab-4069-b1ed-3ae758ea3ef8" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Beta" by @MichaReiser on 2025-08-15 12:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-08-15 12:43</div>
            <div class="timeline-body"><p>I'll merge this into https://github.com/astral-sh/ty/issues/1000, now that we do apply some basic formatting (I'll create another issue for docstring formatting)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MichaReiser on 2025-08-15 12:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 02:10:58 UTC
    </footer>
</body>
</html>
