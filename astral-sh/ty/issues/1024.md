```yaml
number: 1024
title: server hangs after changing file
type: issue
state: closed
author: DetachHead
labels:
  - server
  - hang
assignees: []
created_at: 2025-08-17T04:06:51Z
updated_at: 2025-08-20T08:28:31Z
url: https://github.com/astral-sh/ty/issues/1024
synced_at: 2026-01-10T02:06:24Z
```

# server hangs after changing file

---

_Issue opened by @DetachHead on 2025-08-17 04:06_

### Summary

originally raised at https://github.com/astral-sh/ty/issues/601#issuecomment-3016471681 but opening a new issue because this is still occurring, but i think it's a different issue since it happens on both windows and linux, and only seems to occur in one of the files in my project:

> this issue seems to be mostly fixed, but it seems to still occur in some cases. i've been trying for hours to narrow this down to a minimal repo, but i can't figure it out unfortunately, so the steps to reproduce involve cloning my repo:
> 
> 1. clone https://github.com/DetachHead/pytest-robotframework/commit/360a3b3ad171d80f019fe4f26e17d313d4c63164
> 2. run `./pw uv sync`
> 3. open `pytest_robotframework/__init__.py` in vscode
> 4. remove [one of these `# ty:ignore` comments](https://github.com/DetachHead/pytest-robotframework/blob/360a3b3ad171d80f019fe4f26e17d313d4c63164/pytest_robotframework/__init__.py#L272-L273) and notice that the error does not come back
> 5. restart the language server and see that the error comes back


### Version

0.0.1-alpha.18

---

_Comment by @MichaReiser on 2025-08-17 07:08_

Interesting: can you tell us more about what editor you're using and what your settings are (do you use workspace diagnostics or diagnostics for open files only)

---

_Comment by @DetachHead on 2025-08-17 11:05_

i'm using vscode, here are the only settings i've changed:

```jsonc
// .vscode/settings.json
{
    "ty.disableLanguageServices": true // using basedpyright for now
}
```
```toml
# pyproject.toml

[tool.ty.rules]
division-by-zero = "error"
possibly-unresolved-reference = "warn"
unused-ignore-comment = "warn"
invalid-type-form = "ignore" # https://github.com/astral-sh/ty/issues/157

[tool.ty.environment]
python-platform = "all"

[tool.ty.terminal]
error-on-warning = true
```

the project i linked has the vscode config files committed if that helps: https://github.com/DetachHead/pytest-robotframework

---

_Label `server` added by @AlexWaygood on 2025-08-17 22:28_

---

_Comment by @MichaReiser on 2025-08-18 06:45_

Thanks, I'll take a look

---

_Comment by @MichaReiser on 2025-08-18 08:02_

It seems the ty version is somewhat out of date. So I went ahead and updated it. I do observe a slightly different behavior than what you described (maybe I messed something up with the setup). 

* ty runs one check successfully
* Remove one of the two `ty: ignore`
* I can now see that ty takes 100% cpu usage and I suspect it hangs

And these are the logs:

```
pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd4)), revision: R5 } }
2025-08-18 10:05:27.383597000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: TupleType(Id(a846)), revision: R5 } }
2025-08-18 10:05:27.383607000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: Specialization(Id(d8e1)), revision: R5 } }
2025-08-18 10:05:27.383621000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd5)), revision: R5 } }
2025-08-18 10:05:27.383633000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: TupleType(Id(a847)), revision: R5 } }
2025-08-18 10:05:27.383643000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: Specialization(Id(d8e2)), revision: R5 } }
2025-08-18 10:05:27.383655000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd6)), revision: R5 } }
2025-08-18 10:05:27.383668000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: TupleType(Id(a848)), revision: R5 } }
2025-08-18 10:05:27.383679000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: Specialization(Id(d8e3)), revision: R5 } }
2025-08-18 10:05:27.383690000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd7)), revision: R5 } }
2025-08-18 10:05:27.383703000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: TupleType(Id(a849)), revision: R5 } }
2025-08-18 10:05:27.383714000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: Specialization(Id(d8e4)), revision: R5 } }
2025-08-18 10:05:27.383724000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd8)), revision: R5 } }
2025-08-18 10:05:27.383735000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: TupleType(Id(a84a)), revision: R5 } }
2025-08-18 10:05:27.383748000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: Specialization(Id(d8e5)), revision: R5 } }
2025-08-18 10:05:27.383759000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd9)), revision: R5 } }
2025-08-18 10:05:27.383770000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: TupleType(Id(a84b)), revision: R5 } }
2025-08-18 10:05:27.383783000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: Specialization(Id(d8e6)), revision: R5 } }
2025-08-18 10:05:27.383794000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcda)), revision: R5 } }
2025-08-18 10:05:27.383805000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: TupleType(Id(a84c)), revision: R5 } }
2025-08-18 10:05:27.383818000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: Specialization(Id(d8e7)), revision: R5 } }
2025-08-18 10:05:27.383829000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcdb)), revision: R5 } }
2025-08-18 10:05:27.383841000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ModuleNameIngredient(Id(5001)), revision: R5 } }
2025-08-18 10:05:27.383857000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: place_by_id::interned_arguments(Id(6401)), revision: R5 } }
2025-08-18 10:05:27.383872000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ClassLiteral < 'db >::try_mro_::interned_arguments(Id(6cd1)), revision: R5 } }
2025-08-18 10:05:27.383888000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcc3)), revision: R5 } }
2025-08-18 10:05:27.383899000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ClassLiteral < 'db >::try_mro_::interned_arguments(Id(6ce1)), revision: R5 } }
2025-08-18 10:05:27.383912000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd1)), revision: R5 } }
2025-08-18 10:05:27.383924000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ClassLiteral < 'db >::try_mro_::interned_arguments(Id(6ce2)), revision: R5 } }
2025-08-18 10:05:27.383936000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd2)), revision: R5 } }
2025-08-18 10:05:27.383958000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ClassLiteral < 'db >::try_mro_::interned_arguments(Id(6ce3)), revision: R5 } }
2025-08-18 10:05:27.383972000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd3)), revision: R5 } }
2025-08-18 10:05:27.383992000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ClassLiteral < 'db >::try_mro_::interned_arguments(Id(6ce4)), revision: R5 } }
2025-08-18 10:05:27.384007000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd4)), revision: R5 } }
2025-08-18 10:05:27.384066000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ClassLiteral < 'db >::try_mro_::interned_arguments(Id(6ce5)), revision: R5 } }
2025-08-18 10:05:27.384096000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd5)), revision: R5 } }
2025-08-18 10:05:27.384108000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ClassLiteral < 'db >::try_mro_::interned_arguments(Id(6ce6)), revision: R5 } }
2025-08-18 10:05:27.384122000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd6)), revision: R5 } }
2025-08-18 10:05:27.384135000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ClassLiteral < 'db >::try_mro_::interned_arguments(Id(6ce7)), revision: R5 } }
2025-08-18 10:05:27.384149000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd7)), revision: R5 } }
2025-08-18 10:05:27.384161000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ClassLiteral < 'db >::try_mro_::interned_arguments(Id(6ce8)), revision: R5 } }
2025-08-18 10:05:27.384175000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd8)), revision: R5 } }
2025-08-18 10:05:27.384187000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ClassLiteral < 'db >::try_mro_::interned_arguments(Id(6ce9)), revision: R5 } }
2025-08-18 10:05:27.384197000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcd9)), revision: R5 } }
2025-08-18 10:05:27.384207000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: ClassLiteral < 'db >::try_mro_::interned_arguments(Id(6cea)), revision: R5 } }
2025-08-18 10:05:27.384218000 TRACE ty:worker:3 request{id=15 method="textDocument/inlayHint"}:infer_scope_types{scope=Id(3c0c) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=8871..8874 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_scope_types{scope=Id(3c0b) file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_definition_types{range=9742..9746 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}:infer_expression_types{expression=Id(445f) range=9749..9798 file=File(System("/Users/micha/astral/pytest-robotframework/pytest_robotframework/__init__.py"))}: ty_project::db: Salsa event: Event { thread_id: ThreadId(24), kind: DidValidateInternedValue { key: GenericAlias(Id(dcda)), revision: R5 } }
```

I've a longer log locally. It seems we keep validating the same values repeatedly.

---

_Added to milestone `Beta` by @MichaReiser on 2025-08-18 08:13_

---

_Renamed from "diagnostics on some files don't update until the language server is restarted" to "server hangs after changing file" by @MichaReiser on 2025-08-18 08:13_

---

_Label `hang` added by @MichaReiser on 2025-08-18 08:22_

---

_Comment by @MichaReiser on 2025-08-18 08:59_

I can confirm that this is another salsa bug. The diagnostics update immediately if I comment out the `deep_verify_memo` and backdating code within `maybe_changed_after_cold` (which is the same as disabling reusing any results from a previous revision).

This will probably take me a while to narrow down because i first need to come up with a much simpler MRE (ideally a couple of lines, and i then still need to translate it into a standalone salsa repro)


---

_Comment by @MichaReiser on 2025-08-18 12:53_

A more minimal repro:

```py
from __future__ import annotations

from robot import result

result.Keyword(
    # pyright is only run when robot 7 is installed
    kwname=keyword_name2,  # pyright:ignore[reportCallIssue] # ty:ignore[unknown-argument]
    libname=self._module,  # pyright:ignore[reportCallIssue] # ty:ignore[unknown-argument]
    doc=doc,
    args=log_args,
    tags=self._tags,
)
```

I'm unable to reproduce this with the CLI (at least not consistently). This suggests that the request timing might be important (or multi threading, ugh)

---

_Comment by @MichaReiser on 2025-08-18 14:31_

I think this is the underlying issue https://github.com/salsa-rs/salsa/pull/981

This probably requires something like `validate_same_iteration` but for `maybe_changed_after`? However, I need to consider this, and the challenge is that we don't push queries to the query stack in `maybe_changed_after` because it's expensive. But we could decide to do so only for queries that have a recovery function set

---

_Comment by @MichaReiser on 2025-08-19 07:19_

This gets fixed by https://github.com/salsa-rs/salsa/pull/981

---

_Closed by @MichaReiser on 2025-08-20 07:24_

---

_Reopened by @MichaReiser on 2025-08-20 07:52_

---

_Closed by @MichaReiser on 2025-08-20 08:28_

---
