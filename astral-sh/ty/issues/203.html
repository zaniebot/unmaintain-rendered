<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>diagnostic range is off when the line is indented with tabs - astral-sh/ty #203</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>diagnostic range is off when the line is indented with tabs</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/ty/issues/203">#203</a>
        opened by <a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a>
        on 2025-02-06 01:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/InSyncWithFoo">@InSyncWithFoo</a></div>
            <div class="timeline-body"><p>Given this file:</p>
<pre><code>def f():
	return (1 == &#x27;2&#x27;)()  # Tab indented
</code></pre>
<p>Ruff gets the range correctly:</p>
<pre><code>$ ruff check --select PLR0133 --isolated
foo.py:2:10: PLR0133 Two constants compared in a comparison, consider replacing `1 == &#x27;2&#x27;`
  |
1 | def f():
2 |     return (1 == &#x27;2&#x27;)()  # Tab indented
  |             ^ PLR0133
  |

Found 1 error.
</code></pre>
<p>But Red Knot doesn&#x27;t:</p>
<pre><code>$ red_knot check --venv-path .venv
error: lint:call-non-callable
 --&gt; ~\project\foo.py:2:9
  |
1 | def f():
2 |     return (1 == &#x27;2&#x27;)()  # Tab indented
  |        ^^^^^^^^^^^^ Object of type `bool` is not callable
  |
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">diagnostics</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-02-06 04:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-02-06 06:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Red Knot&#x27;s diagnostic range is off when the line is indented with tabs&quot; to &quot;[red-knot] diagnostic range is off when the line is indented with tabs&quot; by <a href="https://github.com/carljm">@carljm</a> on 2025-03-27 18:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;[red-knot] diagnostic range is off when the line is indented with tabs&quot; to &quot;diagnostic range is off when the line is indented with tabs&quot; by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-05-07 15:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-06-26 15:21</div>
            <div class="timeline-body"><p>It appears that this has been fixed by <a href="https://github.com/astral-sh/ruff/pull/18962">astral-sh/ruff#18962</a> ðŸ¥³</p>
<p>@BurntSushi, do you think it&#x27;s worth adding another regression test for this specifically, or would that just duplicate the tests you already added in that PR?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-06-26 16:24</div>
            <div class="timeline-body"><p>Nice find! Sounds like a good idea: <a href="https://github.com/astral-sh/ruff/pull/18965">astral-sh/ruff#18965</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-06-26 16:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:24:16 UTC
    </footer>
</body>
</html>
