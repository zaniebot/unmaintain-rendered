<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flaky tests in CI - astral-sh/ty #1540</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Flaky tests in CI</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/ty/issues/1540">#1540</a>
        opened by <a href="https://github.com/dhruvmanila">@dhruvmanila</a>
        on 2025-11-13 16:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dhruvmanila">@dhruvmanila</a></div>
            <div class="timeline-body">Summary
<p>Collecting the flaky tests that we&#x27;re seeing so far, re-running them makes them pass:</p>
<ul>
<li>~~<code>ty_server::e2e pull_diagnostics::on_did_open</code>: https://github.com/astral-sh/ruff/actions/runs/19290646588/job/55160349507?pr=21363#step:7:5873~~</li>
<li><code>ty::file_watching directory_renamed</code>: https://github.com/astral-sh/ruff/actions/runs/19336380853/job/55312446927?pr=21421#step:7:5706</li>
<li><code>ty::file_watching unix::symlink_inside_project</code>: https://github.com/astral-sh/ruff/actions/runs/19322265094/job/55265874405?pr=21419#step:7:5706</li>
</ul>
Version
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">ci</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-11-13 16:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2025-11-13 16:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2025-11-13 16:37</div>
            <div class="timeline-body"><p>What&#x27;s important to note is that they&#x27;re all specific to macos</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mtshiba">@mtshiba</a> on 2025-11-13 16:39</div>
            <div class="timeline-body"><p>another one: <a href="https://github.com/astral-sh/ruff/pull/21317">astral-sh/ruff#21317</a>#issuecomment-3503482666</p>
<ul>
<li>~~<code>ty_server::e2e pull_diagnostics::document_diagnostic_caching_changed</code>: <a href="https://github.com/astral-sh/ruff/actions/runs/19173434027/job/54811898939?pr=21317">astral-sh/ruff/actions/runs/19173434027/job/54811898939?pr=21317</a>~~</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2025-11-14 23:29</div>
            <div class="timeline-body"><p><code>ty::file_watching directory_moved_to_trash</code> https://github.com/astral-sh/ruff/actions/runs/19377807970/job/55449565886</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/carljm">@carljm</a> on 2026-01-09 03:29</div>
            <div class="timeline-body"><p>Are we still seeing any of these? If so, it must not be super frequent. I can&#x27;t remember the last time I saw a flaky test failure.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MichaReiser">@MichaReiser</a> on 2026-01-09 07:15</div>
            <div class="timeline-body"><p>The file watching tests flake sometimes on macos. But it&#x27;s not very often, which is why I never looked into it. The e2e tests are fixed</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2026-01-09 10:04</div>
            <div class="timeline-body"><blockquote>
<p>The e2e tests are fixed</p>
</blockquote>
<p>(I&#x27;ve marked them off from this thread.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-09 18:13</div>
            <div class="timeline-body"><p>they definitely still flake from time to time: https://github.com/astral-sh/ruff/actions/runs/20860850768/job/59939819903?pr=22481 was just now</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dhruvmanila">@dhruvmanila</a> on 2026-01-12 05:13</div>
            <div class="timeline-body"><blockquote>
<p>they definitely still flake from time to time: <a href="https://github.com/astral-sh/ruff/actions/runs/20860850768/job/59939819903?pr=22481">astral-sh/ruff/actions/runs/20860850768/job/59939819903?pr=22481</a> was just now</p>
</blockquote>
<p>But this is <code>test unix::symlink_inside_project</code>, the ones that Micha fixed is related to the LSP e2e tests, unless I&#x27;m misreading what you&#x27;re saying?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AlexWaygood">@AlexWaygood</a> on 2026-01-12 07:41</div>
            <div class="timeline-body"><p>Sorry, yes â€” I was responding to Carl rather than Micha but I made that very unclear!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:25:57 UTC
    </footer>
</body>
</html>
