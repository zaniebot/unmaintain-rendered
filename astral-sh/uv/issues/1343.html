<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip compile` does not annotate direct dependencies e.g. `via -r requirements.in` - astral-sh/uv #1343</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`uv pip compile` does not annotate direct dependencies e.g. `via -r requirements.in`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1343">#1343</a>
        opened by <a href="https://github.com/ThiefMaster">@ThiefMaster</a>
        on 2024-02-15 21:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ThiefMaster">@ThiefMaster</a> on 2024-02-15 21:05</div>
            <div class="timeline-body"><p>I found this kind pretty useful to immediately see which entries in <code>requirements.txt</code> come from direct dependencies, and to also see which ones are both direct and transitive ones.</p>
<p>To reproduce:</p>
<ul>
<li>Clone https://github.com/indico/indico/ (or get the <code>requirements*</code> files)</li>
<li>Run <code>uv pip compile requirements.in -o requirements.txt</code></li>
<li>See the (partial) diff below:</li>
</ul>
<pre><code class="language-diff">diff --git a/requirements.txt b/requirements.txt
index e376581100..b2eae90d3f 100644
--- a/requirements.txt
+++ b/requirements.txt
@@ -1,40 +1,26 @@
-#
-# This file is autogenerated by pip-compile with Python 3.9
-# by the following command:
-#
-#    pip-compile --strip-extras
-#
+# This file was autogenerated by uv v0.1.0 via the following command:
+#    uv pip compile requirements.in -o requirements.txt
 alembic==1.12.1
-    # via
-    #   -r requirements.in
-    #   flask-migrate
+    # via flask-migrate
 amqp==5.2.0
     # via kombu
 asttokens==2.4.1
     # via
     #   sentry-sdk
     #   stack-data
-async-timeout==4.0.3
-    # via redis
 attrs==23.1.0
     # via
     #   jsonschema
     #   referencing
 authlib==1.2.1
-    # via -r requirements.in
 babel==2.13.1
-    # via
-    #   -r requirements.in
-    #   flask-babel
+    # via flask-babel
 bcrypt==4.0.1
-    # via -r requirements.in
 billiard==4.2.0
     # via celery
 bleach==6.1.0
-    # via -r requirements.in
[...]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ThiefMaster">@ThiefMaster</a> on 2024-02-15 21:12</div>
            <div class="timeline-body"><p>Especially while this tool is new it also makes it MUCH harder to compare output from pip-tools and uv, since there's lots of noise in the diff from this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ThiefMaster">@ThiefMaster</a> on 2024-02-15 21:35</div>
            <div class="timeline-body"><p>Not removing it would also allow for something similar to ruff's ecosystem checks. Not sure if such checks exist atm (I found some issues related to them but no actual code)...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @charliermarsh on 2024-02-15 21:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../astral-sh/ruff-pre-commit/pulls/68.html">astral-sh/ruff-pre-commit#68</a> on 2024-02-15 22:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../inventree/InvenTree/pulls/6499.html">inventree/InvenTree#6499</a> on 2024-02-16 19:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../python-trio/trio/pulls/2958.html">python-trio/trio#2958</a> on 2024-02-16 23:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1665.html">astral-sh/uv#1665</a> on 2024-02-18 20:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1797.html">astral-sh/uv#1797</a> on 2024-02-21 06:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jzmiller1">@jzmiller1</a> on 2024-02-23 20:02</div>
            <div class="timeline-body"><p>The lack of the -r requirements.in in the output has been a blocker on using uv to replace pip-compile in some projects I work on.  Glad to see this already on the radar.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2160.html">astral-sh/uv#2160</a> on 2024-03-04 16:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2162.html">astral-sh/uv#2162</a> on 2024-03-04 16:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`uv pip compile` removes `via -r requirements.in`" to "`uv pip compile` does not annotate direct dependencies e.g. `via -r requirements.in`" by @zanieb on 2024-03-04 16:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../edgarrmondragon/citric/pulls/1115.html">edgarrmondragon/citric#1115</a> on 2024-03-08 00:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Djailla">@Djailla</a> on 2024-03-25 15:17</div>
            <div class="timeline-body"><p>Hello @charliermarsh do you have an update on this issue ?</p>
<p>Thanks a lot !</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3066.html">astral-sh/uv#3066</a> on 2024-04-16 16:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/palfrey">@palfrey</a> on 2024-04-21 20:30</div>
            <div class="timeline-body"><p>FYI, I'm (slowly) having a bit of of a poke at this one. @charliermarsh I'm assuming you'd be interested in PRs for this one right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-21 21:30</div>
            <div class="timeline-body"><p>Yeah happily. Let me know if you run into issues or have questions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3269.html">astral-sh/uv#3269</a> on 2024-04-25 20:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/palfrey">@palfrey</a> on 2024-04-25 21:02</div>
            <div class="timeline-body"><p>@charliermarsh (and anyone else interested): https://github.com/astral-sh/uv/pull/3269 is a first draft at this. It has the major redeeming feature that it works (i.e. does the requested item here), but there's a stack of unresolved questions in the PR that need figuring out.</p>
<p>Also, it's needed some fairly chunky changes overall, and there's probably at least <em>some</em> stylistic changes that are wanted (although I tried to keep to the same style as the surrounding code)!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-09 03:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-09 14:43</div>
            <div class="timeline-body"><p>Will be supported in the next version thanks to @palfrey.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/matmair">@matmair</a> on 2024-05-09 22:12</div>
            <div class="timeline-body"><p>Thank you @palfrey - this will make dependabot updates so much less annoying</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:17 UTC
    </footer>
</body>
</html>
