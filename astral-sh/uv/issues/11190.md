```yaml
number: 11190
title: "uv fails on `uv pip install --all-extras` with a `pyproject.toml`"
type: issue
state: closed
author: gaspardc-met
labels:
  - question
assignees: []
created_at: 2025-02-03T19:15:21Z
updated_at: 2025-02-03T22:12:40Z
url: https://github.com/astral-sh/uv/issues/11190
synced_at: 2026-01-10T01:57:25Z
```

# uv fails on `uv pip install --all-extras` with a `pyproject.toml`

---

_Issue opened by @gaspardc-met on 2025-02-03 19:15_

### Summary

In a project with a `pyproject.toml` file and a lockfile at `uv.lock`

- `uv sync --all-extras` works ‚úÖ 
- `uv pip install .` works ‚úÖ 
- `uv pip install project-name` works ‚úÖ 
- `uv pip install --all-extras .` fails üî¥ 
- `uv pip install --all-extras project-name` fails üî¥ 

Requesting any extras faills too

Logs: 
```
 uv pip install --verbose --all-extras .

DEBUG uv 0.5.26
error: Requesting extras requires a `pyproject.toml`, `setup.cfg`, or `setup.py` file.
```

Am I doing something wrong ? 

### Platform

Ubuntu 22.04

### Version

uv 0.5.26

### Python version

Python 3.11.5

---

_Label `bug` added by @gaspardc-met on 2025-02-03 19:15_

---

_Comment by @charliermarsh on 2025-02-03 19:22_

If you want to enable extras with a project name or path, you should use the standards-compliant syntax, like:

```
uv pip install project-name[foo]
```

As the error suggests, `--all-extras` only exists for `pyproject.toml`, `setup.cfg,` and `setup.py`, where there is no equivalent syntax for enabling extras.


---

_Label `bug` removed by @charliermarsh on 2025-02-03 19:23_

---

_Label `question` added by @charliermarsh on 2025-02-03 19:23_

---

_Comment by @gaspardc-met on 2025-02-03 19:33_

Sorry this might be a dumb question, but the local project here is defined with a `pyproject.toml`
Formerly, I used `pip install .[extra]` but here I was changing a command from `uv sync` to `uv pip install`

I don't understand why this doesn't work here, with a `pyproject.toml` located right there at `.`
I'm probably not grasping a key concept here 

How would it work to use `uv pip install --all-extras` then ? 

---

_Comment by @zanieb on 2025-02-03 19:38_

The invocation would be `uv pip install -r pyproject.toml --all-extras` ‚Äî but that will only install your project's dependencies not the project itself.

You'll need to enumerate all the extras, unfortunately. That's how it works in pip.

I'll see if I can improve this error message.

---

_Comment by @charliermarsh on 2025-02-03 19:42_

You would typically add an extra within the `pyproject.toml` called `all` that points to the others -- like:

```toml
[project.optional-dependencies]
async = ["anyio"]
testing = ["pytest"]
all = ["project[anyio]", "project[pytest]"]
```

Then you'd run `uv pip install ".[all]"`.

---

_Referenced in [astral-sh/uv#11193](../../astral-sh/uv/pulls/11193.md) on 2025-02-03 19:45_

---

_Comment by @gaspardc-met on 2025-02-03 19:46_

Thank you both for the answers, I feel like a fool. 
After using 'uv sync' for so long one forgets how 'pip install' works I guess. 
Seeing the same argument in the docs I assumed it worked the same way üëçüèª

---

_Comment by @zanieb on 2025-02-03 19:48_

No foolishness! It's just an awkward extension to the pip interface for parity with elsewhere. Without these flags, it's not possible to select extras from files like `-r pyproject.toml`.

---

_Closed by @zanieb on 2025-02-03 22:12_

---
