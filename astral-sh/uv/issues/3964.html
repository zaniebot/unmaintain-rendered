<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>``uv pip sync`` removes pip when syncing dependencies from a ``requirements.txt`` without pip - astral-sh/uv #3964</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv pip sync</code> removes pip when syncing dependencies from a <code>requirements.txt</code> without pip</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3964">#3964</a>
        opened by <a href="https://github.com/FishAlchemist">@FishAlchemist</a>
        on 2024-06-02 10:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/FishAlchemist">@FishAlchemist</a></div>
            <div class="timeline-body"><p>uv 0.2.5 (47db418ba 2024-05-28)</p>
<p>Is this the expected behavior? I'm concerned that UV might not handle some exceptional cases yet. Therefore, I always add the <code>--seed</code> flag when initializing a virtual environment with UV.  If this is indeed the expected behavior, I suppose I'll need to add pip to the <code>requirements.in</code> file, even though including pip in there seems a bit strange.</p>
<pre><code class="language-powershell">‚ùØ uv pip sync .\uv_requirements.txt --verbose
DEBUG Searching for Python interpreter in virtual environments
DEBUG Found CPython 3.10.11 at `C:\Users\user\Documents\source\temp\.venv\Scripts\python.exe` (active virtual environment)
DEBUG Using Python 3.10.11 environment at .venv\Scripts\python.exe
DEBUG Acquired lock for `.venv`
DEBUG Using registry request timeout of 30s
DEBUG Solving with target Python version 3.10.11
DEBUG Adding direct dependency: certifi==2024.6.2
DEBUG Adding direct dependency: charset-normalizer==3.3.2
DEBUG Adding direct dependency: idna==3.7
DEBUG Adding direct dependency: requests==2.32.3
DEBUG Adding direct dependency: urllib3==2.2.1
DEBUG Found fresh response for: https://pypi.org/simple/certifi/
DEBUG Found fresh response for: https://pypi.org/simple/idna/
DEBUG Searching for a compatible version of certifi (==2024.6.2)
DEBUG Found fresh response for: https://pypi.org/simple/requests/
DEBUG Found installed version of certifi==2024.6.2 that satisfies preference in ==2024.6.2
DEBUG Selecting: certifi==2024.6.2 (installed)
DEBUG Found fresh response for: https://pypi.org/simple/urllib3/
DEBUG Found fresh response for: https://pypi.org/simple/charset-normalizer/
DEBUG Searching for a compatible version of charset-normalizer (==3.3.2)
DEBUG Found installed version of charset-normalizer==3.3.2 that satisfies preference in ==3.3.2
DEBUG Selecting: charset-normalizer==3.3.2 (installed)
DEBUG Searching for a compatible version of idna (==3.7)
DEBUG Found installed version of idna==3.7 that satisfies preference in ==3.7
DEBUG Selecting: idna==3.7 (installed)
DEBUG Searching for a compatible version of requests (==2.32.3)
DEBUG Found installed version of requests==2.32.3 that satisfies preference in ==2.32.3
DEBUG Selecting: requests==2.32.3 (installed)
DEBUG Searching for a compatible version of urllib3 (==2.2.1)
DEBUG Found installed version of urllib3==2.2.1 that satisfies preference in ==2.2.1
DEBUG Selecting: urllib3==2.2.1 (installed)
DEBUG Tried 6 versions: certifi 1, charset-normalizer 1, idna 1, requests 1, root 1, urllib3 1
Resolved 5 packages in 5ms
DEBUG Requirement already installed: certifi==2024.6.2
DEBUG Requirement already installed: charset-normalizer==3.3.2
DEBUG Requirement already installed: idna==3.7
DEBUG Requirement already installed: requests==2.32.3
DEBUG Requirement already installed: urllib3==2.2.1
DEBUG Unnecessary package: build==1.2.1
DEBUG Unnecessary package: click==8.1.7
DEBUG Unnecessary package: colorama==0.4.6
DEBUG Unnecessary package: packaging==24.0
DEBUG Unnecessary package: pip==24.0
DEBUG Unnecessary package: pip-tools==7.4.1
DEBUG Unnecessary package: pyproject-hooks==1.1.0
DEBUG Unnecessary package: setuptools==70.0.0
DEBUG Unnecessary package: tomli==2.0.1
DEBUG Unnecessary package: wheel==0.43.0
DEBUG Uninstalled build (34 files, 5 directories)
DEBUG Uninstalled click (39 files, 3 directories)
DEBUG Uninstalled colorama (31 files, 6 directories)
DEBUG Uninstalled packaging (36 files, 3 directories)
DEBUG Uninstalled pip (529 files, 106 directories)
DEBUG Uninstalled pip-tools (55 files, 9 directories)
DEBUG Uninstalled pyproject-hooks (13 files, 5 directories)
DEBUG Uninstalled setuptools (494 files, 63 directories)
DEBUG Uninstalled tomli (14 files, 3 directories)
DEBUG Uninstalled wheel (62 files, 9 directories)
Uninstalled 10 packages in 176ms
 - build==1.2.1
 - click==8.1.7
 - colorama==0.4.6
 - packaging==24.0
 - pip==24.0
 - pip-tools==7.4.1
 - pyproject-hooks==1.1.0
 - setuptools==70.0.0
 - tomli==2.0.1
 - wheel==0.43.0
</code></pre>
<p><a href="https://github.com/user-attachments/files/15524953/uv_requirements.txt">uv_requirements.txt</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-02 16:49</div>
            <div class="timeline-body"><p>Yes, <code>uv pip sync</code> removes any dependencies that aren't in the requirements file. Are you looking for <code>uv pip install</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-06-02 16:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2024-06-02 17:06</div>
            <div class="timeline-body"><blockquote>
<p>Yes, <code>uv pip sync</code> removes any dependencies that aren't in the requirements file. Are you looking for <code>uv pip install</code>?</p>
</blockquote>
<p>I know <code>uv pip install</code> , but I recently wanted to try using <code>uv pip compile</code> and <code>uv pip sync</code> to manage my environment dependencies.
However, I was surprised to find that <code>uv pip sync</code> removes <strong>pip</strong> if it is not specified in the dependency file.
This is different from pip-tools's pip-sync, which does not remove <strong>pip</strong>.
Therefore, if I need to keep <strong>pip</strong>, <strong>setuptools</strong>, and <strong>wheel</strong> in my environment, I need to explicitly include them in my requirements.in file.
I need to keep them because I use them occasionally. For example, in a previous version of uv, I was unable to install PyTorch. Although this issue has been fixed in the new version, I still need them before it is fixed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-02 17:12</div>
            <div class="timeline-body"><p>I think you should mark them as necessary dependencies then, yeah.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2024-06-02 17:22</div>
            <div class="timeline-body"><blockquote>
<p>I think you should mark them as necessary dependencies then, yeah.</p>
</blockquote>
<p>Since it is expected behavior, I will write them(<strong>pip</strong>, <strong>setuptools</strong>, and <strong>wheel</strong>) to <code>requirements.in</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @FishAlchemist on 2024-06-02 17:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-02 17:43</div>
            <div class="timeline-body"><p>We actually do preserve them, I think, if you create the virtualenv with a tool <em>other</em> than uv, with the assumption being that you need the seed packages in that case, but don't if you're using uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2024-06-02 18:02</div>
            <div class="timeline-body"><blockquote>
<p>We actually do preserve them, I think, if you create the virtualenv with a tool <em>other</em> than uv, with the assumption being that I</p>
</blockquote>
<p>Just tried other ways of creating a virtual environment, and <strong>seed packages</strong> are indeed retained.
When creating a virtual environment with UV, <strong>seed packages</strong> can be optionally installed. This suggests that there is a possibility of using UV but requiring <strong>seed packages</strong>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:25:08 UTC
    </footer>
</body>
</html>
