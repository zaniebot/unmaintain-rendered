<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UV not found; Docker install fails with latest install and `v0.5.0` - astral-sh/uv #8948</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UV not found; Docker install fails with latest install and `v0.5.0`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/8948">#8948</a>
        opened by <a href="https://github.com/dwillhelm">@dwillhelm</a>
        on 2024-11-08 16:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dwillhelm">@dwillhelm</a> on 2024-11-08 16:00</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>Hi, love your work.</p>
<p>My docker builds are failing this morning due to a <code>uv</code> installation issue. I'm following <a href="https://docs.astral.sh/uv/guides/integration/docker/#installing-uv:~:text=uvx%20/bin/-,Or%2C%20with%20the%20installer%3A,-Dockerfile">this example</a> from the docs. I was able to fix it by pinning to a older version, but figured it was worthwhile to create the issue.</p>
<p>In my dockerfile, using</p>
<pre><code class="language-dockerfile">ADD https://astral.sh/uv/install.sh /uv-installer.sh
</code></pre>
<p>or</p>
<pre><code class="language-dockerfile">ADD https://astral.sh/uv/0.5.0/install.sh /uv-installer.sh
</code></pre>
<p>Results in a</p>
<pre><code class="language-console">RUN uv sync --frozen --no-cache

/bin/sh: 1: uv: not found 
</code></pre>
<p>Running with an older version, however, does not fail. For example</p>
<pre><code class="language-dockerfile">ADD https://astral.sh/uv/0.4.17/install.sh /uv-installer.sh
</code></pre>
<p>Here's part of my <code>Dockerfile</code> just in case</p>
<pre><code class="language-dockerfile"># this is my dockerfile
FROM python:3.11-slim

# The installer requires curl (and certificates) to download the release archive
RUN apt-get update &amp;&amp; apt-get install -y --no-install-recommends curl ca-certificates

# Download the latest installer
ADD https://astral.sh/uv/0.4.17/install.sh /uv-installer.sh # &lt;-- pinning version fixed it for me! 

# Run the installer then remove it
RUN sh /uv-installer.sh &amp;&amp; rm /uv-installer.sh

# Ensure the installed binary is on the `PATH`
ENV PATH=&quot;/root/.cargo/bin/:$PATH&quot;

WORKDIR /backend
...
...

</code></pre>
<p>I resolved my issue by pinning the version, but figured others might come across the issue. Thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/my1e5">@my1e5</a> on 2024-11-08 16:03</div>
            <div class="timeline-body"><p>Duplicate of https://github.com/astral-sh/uv/issues/8925</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-08 16:03</div>
            <div class="timeline-body"><p>In v0.5, we moved the default install location to <code>~/.local/bin</code>. You can view the release notes here: https://github.com/astral-sh/uv/releases/tag/0.5.0. I think the issue is you need to change this line:</p>
<pre><code># Ensure the installed binary is on the `PATH`
ENV PATH=&quot;/root/.cargo/bin/:$PATH&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dwillhelm">@dwillhelm</a> on 2024-11-08 16:07</div>
            <div class="timeline-body"><p>That works! Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-11-08 16:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../commaai/openpilot/pulls/33973.html">commaai/openpilot#33973</a> on 2024-11-09 04:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/juan11iguel">@juan11iguel</a> on 2025-01-28 13:19</div>
            <div class="timeline-body"><p>This should be updated in the <a href="https://docs.astral.sh/uv/guides/integration/docker/#installing-uv">documentation</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-28 13:59</div>
            <div class="timeline-body"><p>Sorry, where? We don't reference <code>/root/.cargo/bin</code> on that page.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/juan11iguel">@juan11iguel</a> on 2025-01-28 16:55</div>
            <div class="timeline-body"><blockquote>
<p>Sorry, where? We don't reference <code>/root/.cargo/bin</code> on that page.</p>
</blockquote>
<p>Sorry! Just checked again and you are right, I must have misread it before</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MyNameIsNeXTSTEP">@MyNameIsNeXTSTEP</a> on 2025-04-01 08:34</div>
            <div class="timeline-body"><p>@charliermarsh @juan11iguel If not referrencd in the docs, but the issue is here and resolved, why not add to docs too ðŸ¤” ?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:01 UTC
    </footer>
</body>
</html>
