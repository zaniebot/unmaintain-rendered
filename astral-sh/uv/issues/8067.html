<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv tool install --reinstall` not working as documented - astral-sh/uv #8067</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv tool install --reinstall</code> not working as documented</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/8067">#8067</a>
        opened by <a href="https://github.com/dpoznik">@dpoznik</a>
        on 2024-10-10 03:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dpoznik">@dpoznik</a></div>
            <div class="timeline-body"><p>The docs suggest that <code>uv tool install --reinstall</code> should reinstall <em>all</em> packages:</p>
<pre><code class="language-sh">$ uv --version
uv 0.4.20 (0e1b25a53 2024-10-08)

$ uv tool install --help
...
      --reinstall                              Reinstall all packages, regardless of whether they're already installed. Implies `--refresh`
      --reinstall-package &lt;REINSTALL_PACKAGE&gt;  Reinstall a specific package, regardless of whether it's already installed. Implies `--refresh-package`
...
</code></pre>
<p>This suggests that one need not specify a particular package. But in practice, a package name is expected:</p>
<pre><code class="language-sh">$ uv tool install --reinstall
error: the following required arguments were not provided:
  &lt;PACKAGE&gt;

Usage: uv tool install --reinstall --index-url &lt;INDEX_URL&gt; &lt;PACKAGE&gt;

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-10 09:04</div>
            <div class="timeline-body"><p><code>uv tool install --reinstall &lt;PACKAGE&gt;</code> will reinstall <code>&lt;PACKAGE&gt;</code> and all of its dependencies (whereas <code>uv tool --reinstall-package &lt;FOO&gt; &lt;PACKAGE&gt;</code> will reinstall <code>&lt;FOO&gt;</code>, but not <code>&lt;PACKAGE&gt;</code>). Any suggestions on how to make this clearer?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @charliermarsh on 2024-10-10 09:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2024-10-10 09:09</div>
            <div class="timeline-body"><p><code>--reinstall</code> is not &quot;Reinstall all tools&quot;, but it's like &quot;Reinstall everything for one tool&quot;.</p>
<p>Maybe this is a clarification.
Here PACKAGE is the tool you want to install:</p>
<pre><code>Usage: uv tool install [OPTIONS] &lt;PACKAGE&gt;
</code></pre>
<hr />
<p>But below, <em>packages</em> is all the distribution packages in the installation of <em>the tool</em> (the previous single <code>PACKAGE</code>).</p>
<pre><code>Installer options:
      --reinstall
          Reinstall all packages, regardless of whether they're already installed. Implies
          `--refresh`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dpoznik">@dpoznik</a> on 2024-10-10 14:53</div>
            <div class="timeline-body"><blockquote>
<p>Any suggestions on how to make this clearer?</p>
</blockquote>
<p>Perhaps something like the following, wherein instances of &quot;package&quot; have been edited to forms of &quot;dependency&quot; to disambiguate &quot;packages&quot; providing tools from &quot;packages&quot; these tool-providing packages depend on:</p>
<pre><code>      --reinstall                         Reinstall all dependencies, regardless of whether they're already installed. Implies `--refresh`
      --reinstall-package &lt;DEPENDENCY&gt;    Reinstall a specific dependency, regardless of whether it's already installed. Implies `--refresh-package`

      --refresh                           Refresh all cached data
      --refresh-package &lt;DEPENDENCY&gt;      Refresh cached data for a specific dependency
</code></pre>
<p>It may be even clearer if the second and fourth option were <code>--reinstall-dependency</code> and <code>--refresh-dependency</code>, respectively. But that would involve more than just a documentation tweak.</p>
<p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dpoznik">@dpoznik</a> on 2024-10-10 15:04</div>
            <div class="timeline-body"><p>Relatedly, does <code>uv tool</code> have an equivalent to <code>pipx</code>'s <a href="https://pipx.pypa.io/stable/docs/#pipx-reinstall-all"><code>reinstall-all</code></a> subcommand?
I find this useful when, for example, upgrading Python.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-10 15:16</div>
            <div class="timeline-body"><p>You can do <code>uv tool upgrade --all</code>. You can even do <code>uv tool upgrade --all --python 3.13</code> to upgrade all installed tools to Python 3.13.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dpoznik">@dpoznik</a> on 2024-10-10 15:40</div>
            <div class="timeline-body"><blockquote>
<p>You can do <code>uv tool upgrade --all</code>. You can even do <code>uv tool upgrade --all --python 3.13</code> to upgrade all installed tools to Python 3.13.</p>
</blockquote>
<p>Ah, so <code>uv tool upgrade</code> is closer in behavior to <a href="https://pipx.pypa.io/stable/docs/#pipx-reinstall"><code>pipx reinstall</code></a> than to <a href="https://pipx.pypa.io/stable/docs/#pipx-upgrade"><code>pipx upgrade</code></a>, which upgrades a tool <em>within</em> its existing environment. Got it. Thanks!</p>
<p>If not already present, it may be worth noting this contrast somewhere in the docs to help folks transition.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-11 09:45</div>
            <div class="timeline-body"><p>\cc @zanieb for opinions on changing the <code>--reinstall</code> docs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/aa956">@aa956</a> on 2024-12-12 18:53</div>
            <div class="timeline-body"><p><code>uv tool upgrade --all</code> does not actually (re)create links in the <code>~/.local/bin/</code>.</p>
<p><code>uv tool upgrade --all --python 3.13</code> does recreate them.</p>
<p>I've installed same packages/tools multiple times using <code>pip install --user package</code>, <code>pipx install package</code>, <code>uv tool install package</code>.</p>
<p>After that, pip and pipx packages were uninstalled and some of the uv installed tool links are removed from <code>~/.local/bin/</code> by that.</p>
<p>Is there a need to have a way to replay all of the installations for all of the tools with all of the <code>--with optional-dependency</code> and <code>package[extra]</code>?</p>
<p>At the moment the only thing that gets damaged in mixed environment (uv/pipx/pip) is link in <code>~/.local/bin/</code> but maybe something else is installed outside of <code>~/.local/share/uv/</code>. Man pages for example?</p>
<p>It is clearly not an everyday operation to install the same package using 3 different package managers but I've just tried to compare pipx, poetry and uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Perlence">@Perlence</a> on 2024-12-24 12:18</div>
            <div class="timeline-body"><p>I'd love to have a version of <code>pipx reinstall-all</code> in <code>uv tool</code>. My use case is that after upgrading and removing some Python versions, the venvs for the installed uv tools stopped working. If it was pipx, I would run <code>pipx reinstall-all</code> and it would reinstall the packages with new venvs from working Python versions.</p>
<p>An additional note is that some packages were specifically installed with an older version of Python, e.g. <code>uv tool install --python 3.12 PACKAGE</code>. In this case, I would expect <code>uv tool reinstall-all</code> to reinstall the package with the latest Python 3.12 fix.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/elliot-100">@elliot-100</a> on 2025-02-15 12:25</div>
            <div class="timeline-body"><p>I appreciate there's an ongoing discussion about how best to handle this, but I feel this related message is wrong as it stands:</p>
<pre><code class="language-sh">&gt; uvx --reinstall
warning: Tools cannot be reinstalled via `uvx`; use `uv tool
upgrade --reinstall` to reinstall all installed tools, or `uvx
package@latest` to run the latest version of a tool.
Provide a command to run with `uvx &lt;command&gt;`.

See `uvx --help` for more information.
</code></pre>
<p>And should read</p>
<pre><code class="language-sh">use `uv tool upgrade --reinstall --all` to reinstall all installed tools
</code></pre>
<p>as:</p>
<pre><code class="language-sh">&gt; uv tool upgrade --reinstall
error: the following required arguments were not provided:
  &lt;NAME&gt;...

Usage: uv tool upgrade --reinstall &lt;NAME&gt;...

For more information, try '--help'.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-15 13:53</div>
            <div class="timeline-body"><p>Thanks! That looks like an oversight (https://github.com/astral-sh/uv/pull/11535).</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:27:36 UTC
    </footer>
</body>
</html>
