<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Specify target platform in uv export - astral-sh/uv #17226</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Specify target platform in uv export</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/17226">#17226</a>
        opened by <a href="https://github.com/hy144328">@hy144328</a>
        on 2025-12-23 11:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hy144328">@hy144328</a></div>
            <div class="timeline-body">Summary
<p>Currently, <code>uv export</code> analyzes <code>uv.lock</code>, and is able to generate a <code>requirements.txt</code> with hashes, environment markers, etc. from it.
This is great because I am able to use it many different Python environments as long as I have a modern Pip to handle all those extra information other than the package name and version.
However, other installers do not support all the bells and whistles, e.g. <code>mamba install</code>.
I would like to drop all the hashes, environment markers, and specify during the call that the <code>requirements.txt</code> is targeted towards a very specific environment.</p>
<p><code>uv pip compile</code> supports the <code>--python-version</code> and <code>--python-platform</code> flags, which provides exactly what I need.
However, it resolves from <code>pyproject.toml</code> and ignores my <code>uv.lock</code>.
So the set-up I am testing against using <code>uv.lock</code> possibly deviates from what I am going to install in my target environment using <code>requirements.txt</code> via <code>pyproject.toml</code>.
Another work-around would be to pipe <code>uv export</code> to <code>grep</code> or <code>sed</code>.
But it would be nicer if <code>uv export</code> and <code>uv pip compile</code> shared a notion of target environment.</p>
<p>In a nutshell:</p>
<p>| | <code>uv export</code>  | <code>uv pip compile</code> |
|-|---|----|
| supports <code>--python-platform</code> | :x: | ✅  |
| uses <code>uv.lock</code> | ✅  | :x: |</p>
Example
<p>Sometimes, I just want to slightly extend a container image with a few dependencies.
Examples, are Airflow, Spark and Jupyter applications.
There are nice container images available that unfortunately do not use <code>uv</code> or <code>pip</code>.
For example, https://quay.io/repository/jupyter/scipy-notebook?tab=info .
Especially, Scientific Python stacks like to use <code>mamba install</code>, which does not support environment markers.
So instead of having a &#x27;perfect&#x27; container image built from scratch all under <code>uv</code>, I would like to convert my <code>uv.lock</code>, convert it to <code>requirements.txt</code>, and copy it into my <code>Dockerfile</code> for <code>docker build</code> to pick up.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/hy144328">@hy144328</a> on 2025-12-23 11:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:41:23 UTC
    </footer>
</body>
</html>
