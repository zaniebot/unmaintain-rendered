<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is there a way for one extra to include another extra? - astral-sh/uv #13387</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is there a way for one extra to include another extra?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13387">#13387</a>
        opened by <a href="https://github.com/nikhilweee">@nikhilweee</a>
        on 2025-05-11 17:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/nikhilweee">@nikhilweee</a></div>
            <div class="timeline-body">Question
<p><strong>Background</strong>
Extras in <code>[project.optional-dependencies]</code> are flat lists of requirements, so as I understand currently there is no way for one extra to include another.</p>
<pre><code>[project.optional-dependencies]
dev  = [&quot;pytest&quot;,&quot;flake8&quot;]
docs = [&quot;sphinx&quot;,&quot;mkdocs&quot;]
# no syntax for docs to include dev
</code></pre>
<p>By contrast, <code>[dependency-groups]</code> does support <a href="https://packaging.python.org/en/latest/specifications/dependency-groups/#dependency-group-include">native inclusion</a>:</p>
<pre><code>[dependency-groups]
dev  = [&quot;pytest&quot;,&quot;flake8&quot;]
docs = [&quot;sphinx&quot;,&quot;mkdocs&quot;]
docs = [
    &quot;sphinx&quot;,
    &quot;mkdocs&quot;,
    {include-group = &quot;dev&quot;}, # native inclusion
]
</code></pre>
<p><strong>Question</strong>
Does <code>uv</code> currently support, or plan to support a way for one <code>extra</code> to include other extras?  If not, what’s the recommended way to avoid copy‑&amp;‑paste beyond installing multiple extras (e.g. <code>uv sync --extra dev --extra docs</code>)?</p>
<p>I understand that it might not be easy to change the existing spec for <code>[project.optional-dependencies]</code> to match <code>[dependency-groups]</code> since that would involve raising a PEP, but I wonder if it&#x27;s worth adding something in <code>[tool.uv]</code> since <code>uv</code> has full control over that table.</p>
Platform
<p>Linux 5.15.167.4-microsoft-standard-WSL2 x86_64 GNU/Linux</p>
Version
<p>uv 0.7.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/nikhilweee">@nikhilweee</a> on 2025-05-11 17:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-11 18:01</div>
            <div class="timeline-body"><p>Yes:</p>
<pre><code>[project]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
dependencies = []

[project.optional-dependencies]
dev = [
    &quot;foo[docs]&quot;,
]
docs = [
    &quot;sphinx&gt;=8.2.3&quot;,
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nikhilweee">@nikhilweee</a> on 2025-05-11 19:46</div>
            <div class="timeline-body"><p>That&#x27;s interesting, I was under the impression that uv would try to fetch the published package from pypi (and fail if not found) rather than look in the local pyproject. This makes me wonder, how does uv know where to fetch a dependency from?</p>
<pre><code>[project]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
dependencies = []

[project.optional-dependencies]
dev = [
    &quot;foo[docs]&quot;,
    &quot;pandas[excel]&quot;, 
]
docs = [
    &quot;sphinx&gt;=8.2.3&quot;,
]
</code></pre>
<p>Is it as simple as looking for the dependency in the local pyproject and fallback to pypi (or the relevant source)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-15 02:40</div>
            <div class="timeline-body"><p>When looking at a package, if it references a package of the same name, it&#x27;s assumed to be &quot;itself&quot;; so above, <code>foo[docs]</code> is known to be equal to the &quot;current package&quot; since the &quot;current package&quot; is <code>foo</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-15 02:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:38:35 UTC
    </footer>
</body>
</html>
