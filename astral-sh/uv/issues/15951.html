<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Behavior of `uv run` with no `pyproject.toml` - astral-sh/uv #15951</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Behavior of `uv run` with no `pyproject.toml`</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/15951">#15951</a>
        opened by <a href="https://github.com/albertotb">@albertotb</a>
        on 2025-09-19 16:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/albertotb">@albertotb</a> on 2025-09-19 16:18</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I got so used to using <code>uv run</code> when working with projects, that I tried using it also when there is no <code>pyproject.toml</code> and got confused with the behavior. Steps to reproduce this:</p>
<ul>
<li>Create venv: <code>uv venv --python 3.9</code></li>
<li>Install some dependencies: <code>uv pip install -r requirements.txt</code></li>
</ul>
<p>The <code>uv pip install</code> seems to automatically pick up the previously created environment, es per the rules https://docs.astral.sh/uv/pip/environments/#using-arbitrary-python-environments One annoying thing is that if the base conda env is activated, this installs into that environment instead. It can be fixed with: <code>uv pip install --python .venv -r requirements.txt</code></p>
<p>Now, if I do <code>uv run script.py</code>, it runs inside the previously created environment. However, I noticed that if I have a global Python version pinned with:</p>
<pre><code>uv python pin --global 3.12
</code></pre>
<p>suddenly <code>uv run script.py</code> inside the same directory as before no longer picks up the venv in <code>.venv</code> and instead runs with the globally pinned Python version. You can confirm this by removing the pin with (is there any other way?):</p>
<p><code>rm $HOME/.config/uv/.python-version</code></p>
<p>and <code>uv run</code> works again.</p>
<p>I understand that <code>uv run</code> is designed to be used with a projects workflow in mind, but I was wondering where can I find the rules that <code>uv run</code> uses to find the Python binary. As per https://docs.astral.sh/uv/pip/environments/#using-arbitrary-python-environments, <code>uv run</code> is a command that does not mutate the environment, so it points to https://docs.astral.sh/uv/concepts/python-versions/#discovery-of-python-versions. However, that does not seem correct since the Python in my <code>PATH</code> is a completely different version to the one in the venv, and <code>uv run</code> correctly picks up the venv if no global Python version is pinned by uv.</p>
<p>Summary and my expectations: even when no <code>pyproject.toml</code> is present, I would expect (maybe naively) that <code>uv run</code> uses the Python binary in the venv if a <code>.venv</code> directory is present. There are probably many reasons why it does not work this way, but at least I would like to understand the rules behind this behavior, because it seems that sort of works sometimes.</p>
<h3>Platform</h3>
<p>Ubuntu 22.04.5 LTS</p>
<h3>Version</h3>
<p>0.8.18</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @albertotb on 2025-09-19 16:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Behavior of `uv run` outside a project" to "Behavior of `uv run` with no `pyproject.toml`" by @albertotb on 2025-09-19 16:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:12 UTC
    </footer>
</body>
</html>
