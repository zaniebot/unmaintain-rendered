<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip sync requirements.txt` does nothing on 0.2.6 with `python_full_version` specified - astral-sh/uv #4044</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv pip sync requirements.txt</code> does nothing on 0.2.6 with <code>python_full_version</code> specified</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/4044">#4044</a>
        opened by <a href="https://github.com/sterliakov">@sterliakov</a>
        on 2024-06-05 11:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sterliakov">@sterliakov</a></div>
            <div class="timeline-body"><p>With the following <code>requirements.txt</code>:</p>
<pre><code>annotated-types==0.7.0 ; python_full_version &gt;= &quot;3.11.7&quot; and python_full_version &lt; &quot;3.12.0&quot;
</code></pre>
<p>(generated by <code>poetry export</code>, with hashes removed manually because they change nothing in this report)</p>
<p>Runnning</p>
<pre><code>uv pip sync requirements.txt
</code></pre>
<p>I get</p>
<pre><code>Resolved 0 packages in 1ms
Audited 0 packages in 0.02ms
</code></pre>
<p>Full repro script:</p>
<pre><code>python -m venv venv
. venv/bin/activate
pip install &#x27;uv == 0.2.6&#x27;
#Collecting uv==0.2.6
#  Obtaining dependency information for uv==0.2.6 from https://files.pythonhosted.org/packages/c3/b9/9d3e14257af3e06ee8ec865b22985ba9b5a6ca59411fc99197bfac0c5973/uv-0.2.6-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata
#  Using cached uv-0.2.6-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (32 kB)
#Using cached uv-0.2.6-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (10.5 MB)
#Installing collected packages: uv
#Successfully installed uv-0.2.6
#
#[notice] A new release of pip is available: 23.2.1 -&gt; 24.0
#[notice] To update, run: pip install --upgrade pip
uv --version
#uv 0.2.6
python --version
#Python 3.11.7
which python
#/tmp/venv/bin/python
which uv
#/tmp/venv/bin/uv
echo &#x27;annotated-types==0.7.0 ; python_full_version &gt;= &quot;3.11.7&quot; and python_full_version &lt; &quot;3.12.0&quot;&#x27; &gt; requirements.txt
uv pip sync requirements.txt 
#Resolved 0 packages in 1ms
#Audited 0 packages in 0.02ms
ls venv/lib/python3.11/site-packages/
# _distutils_hack  distutils-precedence.pth  pip  pip-23.2.1.dist-info  pkg_resources  setuptools  setuptools-65.5.0.dist-info  uv  uv-0.2.6.dist-info
</code></pre>
<p>This repro&#x27;s with <code>uv 0.2.6</code> on Ubuntu 22.04 and in docker (<code>public.ecr.aws/docker/library/python:3.11-slim-bookworm</code>). Pinning to <code>0.2.5</code> resolves the issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sterliakov">@sterliakov</a> on 2024-06-05 11:58</div>
            <div class="timeline-body"><p>This has nothing to do with the specific python versions: requiring</p>
<pre><code>annotated-types==0.7.0 ; python_full_version &gt;= &quot;3.11.6&quot; and python_full_version &lt; &quot;3.12.0&quot;
</code></pre>
<p>(so that current version is strictly greater) or even</p>
<pre><code>annotated-types==0.7.0 ; python_full_version &lt; &quot;3.12.0&quot;
# or
annotated-types==0.7.0 ; python_full_version &gt; &quot;3.10.0&quot;
</code></pre>
<p>does not help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-05 14:58</div>
            <div class="timeline-body"><p>I can take a look. Not obvious to me what changed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-05 14:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-05 14:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-05 15:46</div>
            <div class="timeline-body"><p>Ah ok, it&#x27;s an issue that&#x27;s specific to <code>pip sync</code>. <code>pip install</code> should work if you need a workaround. But I will fix it today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-05 16:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:31:26 UTC
    </footer>
</body>
</html>
