<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>allow uv publish to upload doc zips - astral-sh/uv #16425</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>allow uv publish to upload doc zips</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16425">#16425</a>
        opened by <a href="https://github.com/Ktlist">@Ktlist</a>
        on 2025-10-23 16:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Ktlist">@Ktlist</a> on 2025-10-23 16:40</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I odnt know if this is explained somewhere but i have not found it</p>
<p>Currently im using a private pypi regidtry to store my own packages, its run with a devpi-server
I want to also upload the documentation that for devpi-server is just a zip with the html and files needed</p>
<p>the issue is that if i try to do a uv publish --index private_index (the index is defined in pyproject.toml)
it uploads the sdist and wheel but for the docs zip issues a warning that it has been skipped since looks like a distribution but it isnÂ´t here is the log:</p>
<p>uv publish --index packages_staging
warning: Skipping file that looks like a distribution, but is not a valid distribution filename: dist\packagetemplate-0.1.1a1.doc.zip
Publishing 2 files to https://some-server/packages/staging/
File packagetemplate-0.1.4a10-py3-none-any.whl already exists, skipping
File packagetemplate-0.1.4a10.tar.gz already exists, skipping</p>
<p>the wheel and sdist were previously uploaded but thats normal to be skipped</p>
<p>Thanks in advance</p>
<h3>Platform</h3>
<p>Windows 11</p>
<h3>Version</h3>
<p>uv 0.9.2 (141369ce7 2025-10-10)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @Ktlist on 2025-10-23 16:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ktlist">@Ktlist</a> on 2025-10-23 21:26</div>
            <div class="timeline-body"><p>I have been investigating the code a bit but i have not touched any of rust before so i might get things wrong:</p>
<p>first seems that files ended in xxxx.doc.zip are filtered out
at this point since they are not a wheel nor a tar.gz dist file:
https://github.com/astral-sh/uv/blob/17181fef07326707ca6921aba28d1dbdd1e6ce83/crates/uv-publish/src/lib.rs#L270-L284</p>
<p>So I modified the file name to en in only zip as the code seem sto accept that kind of files, so the new file is called
packagetemplate-0.1.1a1.zip
and this works perfectly... until we reach the point of actually uploading the file:
https://github.com/astral-sh/uv/blob/17181fef07326707ca6921aba28d1dbdd1e6ce83/crates/uv-publish/src/lib.rs#L679-L685</p>
<p>at this point is clear that there was never the intention of uploading any file ended in .zip</p>
<p>I dont know what are the limitations and if its possible to create some kind of bypass of these rules, also if someone comes up with a workarround after seeing the code ill be glad to hear</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-10-24 09:00</div>
            <div class="timeline-body"><p><code>uv publish</code> is only for uploading the two standardized Python package formats, wheels and source distributions. It's not the right tool for uploading docs zip files to a server. I'm surprised devpi accepts this file, most package registries reject files that are not wheels or source distributions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ktlist">@Ktlist</a> on 2025-10-24 10:03</div>
            <div class="timeline-body"><p>thnaks @konstin for the response</p>
<p>i have a doubt left, how is usually people managing the documentation of the packages?
using completely dedicated services only for the documentation with its own calls and authentications?
I have always worked with devpi and used devpi-client to manage uploads, but seeing how powerfull uv is i wanted to fully use it
i would rather not need to use both tools at the same time since i would need to parse credentials to both and maintain 2 pipelines</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-10-24 10:04</div>
            <div class="timeline-body"><blockquote>
<p>i have a doubt left, how is usually people managing the documentation of the packages?
using completely dedicated services only for the documentation with its own calls and authentications?</p>
</blockquote>
<p>Yes, this is generally not handled through package registries, I'm not aware of any other projects that use package registries for documentation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ktlist">@Ktlist</a> on 2025-10-24 10:11</div>
            <div class="timeline-body"><p>ok thanks for the info</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Ktlist on 2025-10-24 10:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:13 UTC
    </footer>
</body>
</html>
