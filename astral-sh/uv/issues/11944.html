<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add confirmation after running `uv add some_package` - astral-sh/uv #11944</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add confirmation after running `uv add some_package`</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/11944">#11944</a>
        opened by <a href="https://github.com/ifsheldon">@ifsheldon</a>
        on 2025-03-04 09:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ifsheldon">@ifsheldon</a> on 2025-03-04 09:42</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Can you please add a confirmation after <code>uv add some_package</code> before actually downloading and adding it? Some Python packages (like PyTorch) have a lot of dependencies and large size, so I think it'd be nice to ask for confirmation after <code>uv add some_package</code>, presenting what packages will be added and the estimated total disk usage. This confirmation can also avoid typo mistakes.</p>
<p>This behavior is pretty much the same as <code>conda install</code> or <code>mamba install</code>.</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @ifsheldon on 2025-03-04 09:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2025-03-04 17:22</div>
            <div class="timeline-body"><p>The problem with this is that uv, or any tool that installs Python packages, can't guarantee that packages won't be downloaded during resolution.</p>
<p>If the index doesn't support metadata files or http range requests the package must be downloaded to extract the metadata.</p>
<p>Conda based tools get around this by having a json file (or multiple json files) that represent all dependencies for all packages. This has its own tradeoffs, as you need to download the entire universe of dependencies (sometimes many hundreds of MBs) to install a small package with no dependencies.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-04 17:43</div>
            <div class="timeline-body"><p>I'm loosely into the idea of adding opt-in confirm behavior to various commands, i.e., I like this in <code>npx</code> and it would be useful in  <code>uvx</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/karanravindra">@karanravindra</a> on 2025-03-04 22:33</div>
            <div class="timeline-body"><blockquote>
<p>presenting what packages will be added and the estimated total disk usage</p>
</blockquote>
<p>I actually think that's a pretty cool idea.</p>
<p>In terms of a confirmation after using <code>uv add xyz</code>, I have found (on Mac and Linux) that simply pressing &lt;CTRL+C&gt; will not only stop the download, but also removes any cache.</p>
<p>ps: pytorch offers a no-gpu install version which is WAYYYY smaller
https://download.pytorch.org/libtorch/cpu/libtorch-macos-arm64-2.6.0.zip</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ifsheldon">@ifsheldon</a> on 2025-03-05 08:39</div>
            <div class="timeline-body"><blockquote>
<p>The problem with this is that uv, or any tool that installs Python packages, can't guarantee that packages won't be downloaded during resolution.</p>
</blockquote>
<p>OK, got it. So I guess there's not a way that definitely works for any packages to get the size and its dependencies of the package without downloading it. This mechanism seems kind of flawed, but anyway it's not uv's fault.</p>
<blockquote>
<p>In terms of a confirmation after using uv add xyz, I have found (on Mac and Linux) that simply pressing &lt;CTRL+C&gt; will not only stop the download, but also removes any cache.</p>
</blockquote>
<p>This is neat. So, perhaps one workaround is that <code>uv add xyz</code> will actually download the packages <em>before</em> asking confirmation and if the user cancel it in the confirmation, it just cleans the related cache.</p>
<p>As far as I understand, there are two parts:</p>
<ol>
<li>Adding confirmation: This should be super straightforward and easy to add</li>
<li>List all dependencies and estimate their total size: This is a bit hard (to my surprise).</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/karanravindra">@karanravindra</a> on 2025-03-05 21:11</div>
            <div class="timeline-body"><blockquote>
<p>As far as I understand, there are two parts:</p>
<p>Adding confirmation: This should be super straightforward and easy to add
List all dependencies and estimate their total size: This is a bit hard (to my surprise).</p>
</blockquote>
<p>definitely seems possible though I would also suggest that this feature can be toggle able with and Environment Variable. I imagine there would be a large portion of users who wouldn't use this, for example if they have fast internet.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:02 UTC
    </footer>
</body>
</html>
