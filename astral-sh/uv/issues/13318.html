<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The hash value of the `aarch64.whl` is missing in the Docker container on the macOS M1 platform. - astral-sh/uv #13318</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>The hash value of the `aarch64.whl` is missing in the Docker container on the macOS M1 platform.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13318">#13318</a>
        opened by <a href="https://github.com/eric-gitta-moore">@eric-gitta-moore</a>
        on 2025-05-06 19:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/eric-gitta-moore">@eric-gitta-moore</a> on 2025-05-06 19:08</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I don't know what happened. Why is it that exactly the <code>manylinux_2_28_aarch64.whl</code> has its hash missing, which results in the inability to install it?</p>
<pre><code class="language-shell">❯ docker run -it --rm -v .:/app nvidia/cuda:12.8.1-cudnn-devel-ubuntu22.04 /bin/bash
❯ uv cache clean
❯ uv sync --extra cpu
DEBUG Requirement already installed: markdown-it-py==3.0.0
DEBUG Requirement already installed: pygments==2.19.1
DEBUG Requirement already installed: mdurl==0.1.2
DEBUG Found stale response for: https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp311-cp311-manylinux_2_28_aarch64.whl
DEBUG Sending revalidation request for: https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp311-cp311-manylinux_2_28_aarch64.whl
DEBUG Found not-modified response for: https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp311-cp311-manylinux_2_28_aarch64.whl
  x Failed to download `torch==2.7.0+cpu`
  `-&gt; Hash mismatch for `torch==2.7.0+cpu`

      Expected:
        sha256:c98c4f48f42a2237e079f3de48e8549de2c8cf68cdcf2041564c7794bbce0b59
        sha256:f874c1ba4c834db5848eaafd6e63dfce87fb44bb2d9234978c3ad47b5b0f37dd
        sha256:6b7edcbf8bb0b9ac2e6c001434797c5ec3f25394f91eb0ed7aeeeeed9ad4500f
        sha256:e32f385dc0b5007ca410035c3b91ef4b1b34b142e9bcdb31d3f0224b7748e992

      Computed:
        sha256:ce510375ed79223db3ec144fe14cbcffc8a361ac57f39674397ff2d8db3b2c21
  help: `torch` (v2.7.0+cpu) was included because `mt-photos-ai[cpu]` (v0.1.0) depends on `torch`
root@0415c658ba27:/app# uanme -a
</code></pre>
<p>project.toml</p>
<pre><code class="language-toml">[project]
name = &quot;mt-photos-ai&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.10,&lt;3.12&quot;
dependencies = [
    &quot;cn-clip&gt;=1.5.1&quot;,
    &quot;fastapi[standard]&gt;=0.115&quot;,
    &quot;numpy&gt;=1.24.4,&lt;2&quot;,
    &quot;opencv-contrib-python&gt;=4.6.0.66&quot;,
    &quot;opencv-python-headless&gt;=4.6.0.66&quot;,
    &quot;python-dotenv&gt;=1.0.0&quot;,
    &quot;python-multipart&gt;=0.0.6&quot;,
    &quot;rapidocr&gt;=2.0.6&quot;,
    &quot;uvicorn[standard]&gt;=0.23.2&quot;,
    &quot;insightface&gt;=0.7.3&quot;,
    &quot;requests&gt;=2.28.1&quot;,
]

[project.optional-dependencies]
cuda = [&quot;onnxruntime-gpu&gt;=1.21.1&quot;, &quot;torch&gt;=2.6.0&quot;, &quot;torchvision&quot;, &quot;torchaudio&quot;]
cpu = [&quot;onnxruntime&gt;=1.21.1&quot;, &quot;torch&gt;=2.6.0&quot;, &quot;torchvision&quot;, &quot;torchaudio&quot;]

[tool.uv]
conflicts = [[{ extra = &quot;cuda&quot; }, { extra = &quot;cpu&quot; }]]

[tool.uv.sources]
torch = [
    { index = &quot;pytorch-cuda&quot;, extra = &quot;cuda&quot; },
    { index = &quot;pytorch-cpu&quot;, extra = &quot;cpu&quot; },
]
torchvision = [
    { index = &quot;pytorch-cuda&quot;, extra = &quot;cuda&quot; },
    { index = &quot;pytorch-cpu&quot;, extra = &quot;cpu&quot; },
]
torchaudio = [
    { index = &quot;pytorch-cuda&quot;, extra = &quot;cuda&quot; },
    { index = &quot;pytorch-cpu&quot;, extra = &quot;cpu&quot; },
]

[[tool.uv.index]]
url = &quot;https://pypi.tuna.tsinghua.edu.cn/simple/&quot;
default = true

[[tool.uv.index]]
name = &quot;pytorch-cuda&quot;
url = &quot;https://download.pytorch.org/whl/cu124&quot;
explicit = true

[[tool.uv.index]]
name = &quot;pytorch-cpu&quot;
url = &quot;https://download.pytorch.org/whl/cpu&quot;
explicit = true

</code></pre>
<p>uv.lock</p>
<pre><code class="language-toml">
[[package]]
name = &quot;torch&quot;
version = &quot;2.7.0+cpu&quot;
source = { registry = &quot;https://download.pytorch.org/whl/cpu&quot; }
resolution-markers = [
    &quot;python_full_version &gt;= '3.11' and platform_machine == 'aarch64' and sys_platform == 'linux'&quot;,
    &quot;(python_full_version &gt;= '3.11' and platform_machine != 'aarch64' and sys_platform == 'linux') or (python_full_version &gt;= '3.11' and sys_platform != 'darwin' and sys_platform != 'linux')&quot;,
    &quot;python_full_version &lt; '3.11' and platform_machine == 'aarch64' and sys_platform == 'linux'&quot;,
    &quot;(python_full_version &lt; '3.11' and platform_machine != 'aarch64' and sys_platform == 'linux') or (python_full_version &lt; '3.11' and sys_platform != 'darwin' and sys_platform != 'linux')&quot;,
]
dependencies = [
    { name = &quot;filelock&quot;, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
    { name = &quot;fsspec&quot;, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
    { name = &quot;jinja2&quot;, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
    { name = &quot;networkx&quot;, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
    { name = &quot;sympy&quot;, version = &quot;1.14.0&quot;, source = { registry = &quot;https://pypi.tuna.tsinghua.edu.cn/simple/&quot; }, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
    { name = &quot;typing-extensions&quot;, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
]
wheels = [
    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp310-cp310-manylinux_2_28_aarch64.whl&quot; },
    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp310-cp310-manylinux_2_28_x86_64.whl&quot;, hash = &quot;sha256:c98c4f48f42a2237e079f3de48e8549de2c8cf68cdcf2041564c7794bbce0b59&quot; },
    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp310-cp310-win_amd64.whl&quot;, hash = &quot;sha256:f874c1ba4c834db5848eaafd6e63dfce87fb44bb2d9234978c3ad47b5b0f37dd&quot; },
    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp311-cp311-manylinux_2_28_aarch64.whl&quot; },
    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp311-cp311-manylinux_2_28_x86_64.whl&quot;, hash = &quot;sha256:6b7edcbf8bb0b9ac2e6c001434797c5ec3f25394f91eb0ed7aeeeeed9ad4500f&quot; },
    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp311-cp311-win_amd64.whl&quot;, hash = &quot;sha256:e32f385dc0b5007ca410035c3b91ef4b1b34b142e9bcdb31d3f0224b7748e992&quot; },
]

</code></pre>
<h3>Platform</h3>
<p>macOS 15 Darwin 24.3.0 arm64</p>
<h3>Version</h3>
<p>uv 0.7.2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @eric-gitta-moore on 2025-05-06 19:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eric-gitta-moore">@eric-gitta-moore</a> on 2025-05-06 19:12</div>
            <div class="timeline-body"><p>I must be pasted it manually</p>
<pre><code class="language-diff">[[package]]
name = &quot;torch&quot;
version = &quot;2.7.0+cpu&quot;
source = { registry = &quot;https://download.pytorch.org/whl/cpu&quot; }
resolution-markers = [
    &quot;python_full_version &gt;= '3.11' and platform_machine == 'aarch64' and sys_platform == 'linux'&quot;,
    &quot;(python_full_version &gt;= '3.11' and platform_machine != 'aarch64' and sys_platform == 'linux') or (python_full_version &gt;= '3.11' and sys_platform != 'darwin' and sys_platform != 'linux')&quot;,
    &quot;python_full_version &lt; '3.11' and platform_machine == 'aarch64' and sys_platform == 'linux'&quot;,
    &quot;(python_full_version &lt; '3.11' and platform_machine != 'aarch64' and sys_platform == 'linux') or (python_full_version &lt; '3.11' and sys_platform != 'darwin' and sys_platform != 'linux')&quot;,
]
dependencies = [
    { name = &quot;filelock&quot;, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
    { name = &quot;fsspec&quot;, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
    { name = &quot;jinja2&quot;, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
    { name = &quot;networkx&quot;, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
    { name = &quot;sympy&quot;, version = &quot;1.14.0&quot;, source = { registry = &quot;https://pypi.tuna.tsinghua.edu.cn/simple/&quot; }, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
    { name = &quot;typing-extensions&quot;, marker = &quot;(sys_platform != 'darwin' and extra == 'extra-12-mt-photos-ai-cpu') or (extra == 'extra-12-mt-photos-ai-cpu' and extra == 'extra-12-mt-photos-ai-cuda')&quot; },
]
wheels = [
+    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp310-cp310-manylinux_2_28_aarch64.whl&quot;, hash = &quot;sha256:ce510375ed79223db3ec144fe14cbcffc8a361ac57f39674397ff2d8db3b2c21&quot; },
-    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp310-cp310-manylinux_2_28_aarch64.whl&quot; },
    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp310-cp310-manylinux_2_28_x86_64.whl&quot;, hash = &quot;sha256:c98c4f48f42a2237e079f3de48e8549de2c8cf68cdcf2041564c7794bbce0b59&quot; },
    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp310-cp310-win_amd64.whl&quot;, hash = &quot;sha256:f874c1ba4c834db5848eaafd6e63dfce87fb44bb2d9234978c3ad47b5b0f37dd&quot; },
    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp311-cp311-manylinux_2_28_aarch64.whl&quot; },
    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp311-cp311-manylinux_2_28_x86_64.whl&quot;, hash = &quot;sha256:6b7edcbf8bb0b9ac2e6c001434797c5ec3f25394f91eb0ed7aeeeeed9ad4500f&quot; },
    { url = &quot;https://download.pytorch.org/whl/cpu/torch-2.7.0%2Bcpu-cp311-cp311-win_amd64.whl&quot;, hash = &quot;sha256:e32f385dc0b5007ca410035c3b91ef4b1b34b142e9bcdb31d3f0224b7748e992&quot; },
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-06 22:30</div>
            <div class="timeline-body"><p>Linking this to the other issue that reported this: #13195</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @konstin on 2025-05-06 22:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @konstin on 2025-05-06 22:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/13432.html">astral-sh/uv#13432</a> on 2025-05-13 14:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/07pepa">@07pepa</a> on 2025-05-13 14:47</div>
            <div class="timeline-body"><p>Also true on m3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../pytorch/pytorch/issues/153469.html">pytorch/pytorch#153469</a> on 2025-05-13 15:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-13 15:34</div>
            <div class="timeline-body"><p>Merging this with #13195</p>
<p>I've reported this upstream at https://github.com/pytorch/pytorch/issues/153469</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-05-13 15:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:05 UTC
    </footer>
</body>
</html>
