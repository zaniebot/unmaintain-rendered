<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>When I use `uv add &lt;path&gt;` to add a local package, no errors appear, but the installation is not successful. - astral-sh/uv #7570</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>When I use <code>uv add &lt;path&gt;</code> to add a local package, no errors appear, but the installation is not successful.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7570">#7570</a>
        opened by <a href="https://github.com/vvandk">@vvandk</a>
        on 2024-09-20 02:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vvandk">@vvandk</a></div>
            <div class="timeline-body"><p>When I use <code>uv add &lt;path&gt;</code> to add a local package, no errors appear, but the installation is not successful.</p>
<pre><code>$ uv --version
uv 0.4.13 (Homebrew 2024-09-19)
$ uv venv
Using Python 3.10.9 interpreter at: /Library/Frameworks/Python.framework/Versions/3.10/bin/python3.10
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
$ uv add ../kinit-config  
Resolved 21 packages in 1ms
Audited 17 packages in 0.12ms
$ uv run config_ex.py 
Traceback (most recent call last):
  File &quot;/Users/ktianc/programming/ktianc/project/kinit_v2/kinit_runtime/config_ex.py&quot;, line 1, in &lt;module&gt;
    from kinit_config import settings
ModuleNotFoundError: No module named 'kinit_config'
</code></pre>
<p>Below is my kinit-config and pyproject.toml configuration:</p>
<pre><code>[project]
name = &quot;kinit-config&quot;
version = &quot;0.0.1&quot;
description = &quot;kinit config&quot;
license = { file = &quot;LICENSE&quot; }
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.10&quot;
dependencies = [
    &quot;pydantic-settings&gt;=2.5.2&quot;,
    &quot;pydantic&gt;=2.9.2&quot;,
]

[tool.setuptools]
packages = [&quot;kinit_config&quot;]
</code></pre>
<p>Here is the pyproject.toml configuration after I executed the uv add ../kinit-config/ command</p>
<pre><code>[project]
name = &quot;kinit_runtime&quot;
version = &quot;0.0.1&quot;
description = &quot;kinit runtime&quot;
license = { file = &quot;LICENSE&quot; }
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.10&quot;
dependencies = [
    &quot;fastapi&gt;=0.115.0&quot;,
    &quot;kinit-config&quot;,
    &quot;loguru&gt;=0.7.2&quot;,
    &quot;pydantic-settings&gt;=2.5.2&quot;,
    &quot;rich&gt;=13.8.1&quot;,
]


[tool.uv.sources]
kinit-config = { path = &quot;../kinit-config&quot; }


[tool.setuptools]
packages = [&quot;kinit_runtime&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-20 02:40</div>
            <div class="timeline-body"><p>Thanks for the report! Can you try <code>uv sync --reinstall --refresh-package kinit-config</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vvandk">@vvandk</a> on 2024-09-20 02:40</div>
            <div class="timeline-body"><pre><code>$ uv pip list
Package           Version
----------------- -------
annotated-types   0.7.0
anyio             4.4.0
exceptiongroup    1.2.2
fastapi           0.115.0
idna              3.10
loguru            0.7.2
markdown-it-py    3.0.0
mdurl             0.1.2
pydantic          2.9.2
pydantic-core     2.23.4
pydantic-settings 2.5.2
pygments          2.18.0
python-dotenv     1.0.1
rich              13.8.1
sniffio           1.3.1
starlette         0.38.5
typing-extensions 4.12.2
</code></pre>
<p>The kinit-config was not found.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 02:43</div>
            <div class="timeline-body"><p>I think you need to add a <code>[build-system]</code> to <code>kinit-config/pyproject.toml</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 02:44</div>
            <div class="timeline-body"><p>For example:</p>
<pre><code class="language-toml">[build-system]
requires = [&quot;setuptools&gt;=42&quot;]
build-backend = &quot;setuptools.build_meta&quot;
</code></pre>
<p>Otherwise, we treat the project as a non-packed project. See https://docs.astral.sh/uv/concepts/projects/#creating-projects.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-09-20 02:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-20 02:58</div>
            <div class="timeline-body"><p>I thought we just did that for workspace members. Do we do that for path dependencies too? Or is this a workspace member and I'm missing it?</p>
<p>Anyway, we might want to sniff for <code>[tool.setuptools]</code> and warn if we don't have a build-system and aren't going to package the project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vvandk">@vvandk</a> on 2024-09-20 08:52</div>
            <div class="timeline-body"><p>The issue can be resolved by applying the following configuration after testing. Thank you!</p>
<pre><code>[tool.uv]
package = true
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @vvandk on 2024-09-20 08:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:27:16 UTC
    </footer>
</body>
</html>
