<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Difference in behavior between mac and linux - astral-sh/uv #12817</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Difference in behavior between mac and linux</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12817">#12817</a>
        opened by <a href="https://github.com/natemcintosh">@natemcintosh</a>
        on 2025-04-10 18:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/natemcintosh">@natemcintosh</a></div>
            <div class="timeline-body">Summary
<p>When asking for the help message from a script, I get two different responses on mac and linux.</p>
<pre><code># Make a new app
mkdir diff-behaviors
cd diff-behaviors
uv init --app .
</code></pre>
<p>Then in <code>main.py</code>, paste the following:</p>
<pre><code># main.py
if __name__ == &quot;__main__&quot;:
    from argparse import ArgumentParser

    parser = ArgumentParser(description=&quot;A simple command-line tool.&quot;)
    parser.add_argument(&quot;--greet&quot;, type=str, help=&quot;Greet a person by name.&quot;)
    args = parser.parse_args()
    if args.greet:
        print(f&quot;Hello, {args.greet}!&quot;)
    else:
        print(&quot;Hello, World!&quot;)

</code></pre>
<ul>
<li>Running <code>uv run main.py</code> works as expected</li>
<li>Running <code>uv run main.py --greet Nate</code> works as expected</li>
<li>Running <code>uv run main.py -h</code> (or <code>uv run main.py --help</code>) <strong>produces different results</strong>.</li>
</ul>
<p>On two Linux machines I have access to</p>
<pre><code>$ uv run main.py -h
Run a command or script

Usage:
  &gt; uv run {flags} ...(args) 

Flags:
  --extra &lt;string&gt;: Include optional dependencies from the specified extra name
  --all-extras: Include all optional dependencies
  --no-extra &lt;string&gt;: Exclude the specified optional dependencies, if `--all-extras` is supplied
  # And many more lines after this
</code></pre>
<p>But running on my mac, I get</p>
<pre><code>$ uv run main.py -h
usage: main.py [-h] [--greet GREET]

A simple command line tool.

options:
  -h, --help    show this help message and exit
  --greet GREET Name of the person to greet.
</code></pre>
Platform
<p>Darwin 24.4.0 arm64 and Linux 6.13.9-200.fc41.x86_64 x86_64 GNU/Linux</p>
Version
<p>uv 0.6.14</p>
Python version
<p>Python 3.13.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/natemcintosh">@natemcintosh</a> on 2025-04-10 18:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/natemcintosh">@natemcintosh</a> on 2025-04-10 18:15</div>
            <div class="timeline-body"><p>Actually, I&#x27;ve just discovered that this may be a <a href="https://www.nushell.sh/">nushell</a> issue. Running the above, but in bash, produces the expected results.</p>
<p>Interestingly, while I created an analogous test with poetry, which produced the same results, except that on mac, it now does not work as expected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/natemcintosh">@natemcintosh</a> on 2025-04-10 18:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:38:13 UTC
    </footer>
</body>
</html>
