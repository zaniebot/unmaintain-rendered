<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv install python on Windows fails during archive extraction - astral-sh/uv #6331</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv install python on Windows fails during archive extraction</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6331">#6331</a>
        opened by <a href="https://github.com/mrijken">@mrijken</a>
        on 2024-08-21 14:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mrijken">@mrijken</a> on 2024-08-21 14:29</div>
            <div class="timeline-body"><p>If I call <code>uv python install 3.12</code>  on W11 with uv 0.3.0, I get:</p>
<pre><code>Searching for Python versions matching: Python 3.12
cpython-3.12.5-windows-x86_64-none ------------------------------ 4.47 MB/23.57 MB
error: Failed to install cpython-3.12.5-windows-x86_64-none: Failed to extract archive: cpython-3.12.5%2B20240814-x86_64-pc-windows-msvc-install_only_stripped.tar.gz
</code></pre>
<p>I tried it multiple times and every time I get the same issue. However when I add <code>-vv</code> to make it verbose, I will install without issues.</p>
<p>I could reproduce it for Python 3.11 also.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pplmx">@pplmx</a> on 2024-08-21 14:36</div>
            <div class="timeline-body"><p>After the retry, it works</p>
<p><img src="https://github.com/user-attachments/assets/2ae7fa5a-1620-4502-bb0a-73ae51683295" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-21 15:01</div>
            <div class="timeline-body"><p>It might be antivirus, it can do weird things interrupting large zip files. cc @charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2024-08-21 15:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">uv python</span> added by @zanieb on 2024-08-21 15:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "uv install python on Windows is stable" to "uv install python on Windows fails during archive extraction" by @zanieb on 2024-08-21 15:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikey-no">@mikey-no</a> on 2024-08-28 09:45</div>
            <div class="timeline-body"><p>Running: <code>uv python install 3.8.5</code>
I get error:</p>
<pre><code>Searching for Python versions matching: Python 3.8.5
cpython-3.8.5-windows-x86_64-none ------------------------------ 20.97 MB/32.45 MB                                                                               error: Failed to install cpython-3.8.5-windows-x86_64-none
  Caused by: Failed to extract archive: cpython-3.8.5-x86_64-pc-windows-msvc-shared-pgo-20200830T2254.tar.zst
</code></pre>
<p>I am using: uv 0.3.5 (6c62d9fbf 2024-08-27)
On Windows 10.
I re-ran the same command: <code>uv python install 3.8.5</code>
a second time and it worked with no other changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonasR">@JonasR</a> on 2024-11-07 13:11</div>
            <div class="timeline-body"><p>I can confirm that this could be 'fixed' by just running multiple times. Third time was the charm in my case.
Seems very believable to me that it was caused by some kind of corporate snake oil. Never saw the error on my private machines.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">network</span> added by @konstin on 2024-11-08 15:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-23 03:23</div>
            <div class="timeline-body"><p>We now retry these -- which may help? I'll close, but we can re-open if we get more reports.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-23 03:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/agilevic">@agilevic</a> on 2025-08-06 14:35</div>
            <div class="timeline-body"><p>This still occurs in Windows 11. I tried with uv 0.7.x or uv 0.8.x.</p>
<pre><code>uv python install --native-tls --install-dir C:\users\readacted\python 3.14
cpython-3.14.0b3-windows-x86_64-none (download) ------------------------------ 20.19 MiB/20.69 MiB                                                                                                               error: Failed to install cpython-3.14.0b3-windows-x86_64-none
  Caused by: Failed to extract archive: cpython-3.14.0b3-20250630-x86_64-pc-windows-msvc-install_only_stripped.tar.gz
  Caused by: failed to unpack `\\?\C:\Users\redacted\python\.temp\.tmpM4UCgj\python\vcruntime140_1.dll`
  Caused by: failed to unpack `python/vcruntime140_1.dll` into `\\?\C:\Users\redacted\python\.temp\.tmpM4UCgj\python\vcruntime140_1.dll`
  Caused by: error decoding response body
  Caused by: request or response body error
  Caused by: operation timed out
</code></pre>
<p>But strangely the workaround is to create a venv anywhere like so:</p>
<p><code>uv venv --native-tls --python=3.14 venv\py314</code></p>
<p>Confirm the python is now installed</p>
<pre><code>uv python list
cpython-3.14.0b3-windows-x86_64-none                 AppData\Roaming\uv\python\cpython-3.14.0b3-windows-x86_64-none\python.exe
cpython-3.14.0b3+freethreaded-windows-x86_64-none    &lt;download available&gt;
cpython-3.13.5-windows-x86_64-none                   &lt;download available&gt;
[...]
</code></pre>
<p>Check if it works</p>
<pre><code>AppData\Roaming\uv\python\cpython-3.14.0b3-windows-x86_64-none\python.exe
Python 3.14.0b3 (main, Jun 29 2025, 16:17:35) [MSC v.1944 64 bit (AMD64)] on win32
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;
</code></pre>
<p>This may be as some pointed out due to Windows Defender on this particular machine, which is in a corporate environment.
But why it works via the venv command then?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-08-06 16:01</div>
            <div class="timeline-body"><p>Does this happen consistently, or only sporadically? If consistently, it's a different problem, either network or filesystem policy. In this case, please open a new issue. If it happens sporadically, we now track this is in https://github.com/astral-sh/uv/issues/14069.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:26:11 UTC
    </footer>
</body>
</html>
