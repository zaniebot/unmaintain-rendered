<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Merging `.python-version` and `.python-versions` into a single file? - astral-sh/uv #7983</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Merging `.python-version` and `.python-versions` into a single file?</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/7983">#7983</a>
        opened by <a href="https://github.com/mkniewallner">@mkniewallner</a>
        on 2024-10-07 18:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mkniewallner">@mkniewallner</a> on 2024-10-07 18:14</div>
            <div class="timeline-body"><p>https://github.com/astral-sh/uv/pull/7972 made me aware that uv supports both <code>.python-version</code> to define a single Python version to use in a project, and <code>.python-versions</code> to define multiple ones (<a href="https://docs.astral.sh/uv/concepts/python-versions/#project-python-versions">documentation</a>).</p>
<p>The format seems to be close to what <a href="https://github.com/pyenv/pyenv">pyenv supports</a>. Was this a goal when implementing the feature in uv? If so, you might want to know that <code>pyenv</code> also <a href="https://github.com/pyenv/pyenv/blob/d201daeb3366cae98cca88654b4c52018175ded5/README.md?plain=1#L155-L164">supports setting multiple versions on <code>.python-version</code> file</a>, without using the plural form of the file:</p>
<blockquote>
<p><strong>NOTE:</strong> You can activate multiple versions at the same time, including multiple
versions of Python2 or Python3 simultaneously. This allows for parallel usage of
Python2 and Python3, and is required with tools like <code>tox</code>. For example, to instruct
Pyenv to first use your system Python and Python3 (which are e.g. 2.7.9 and 3.4.2)
but also have Python 3.3.6, 3.2.1, and 2.5.2 available, you first <code>pyenv install</code>
the missing versions, then set <code>pyenv global system 3.3.6 3.2.1 2.5.2</code>.
Then you'll be able to invoke any of those versions with an appropriate <code>pythonX</code> or
<code>pythonX.Y</code> name.
You can also specify multiple versions in a <code>.python-version</code> file by hand,
separated by newlines. Lines starting with a <code>#</code> are ignored.</p>
</blockquote>
<p>Would it make sense for uv to match this behaviour? I believe this could be great for interoperability, for users switching from other package managers, and for overall consistency in the Python ecosystem.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-07 18:23</div>
            <div class="timeline-body"><p>I think pyenv writes all these to the same line, which is problematic (e.g. #7935). We'd need to do more work to support that. Interoperability with <code>pyenv</code> isn't super high on my list of priorities, but could be nice to have.</p>
<p>Back in https://github.com/astral-sh/uv/pull/6359#discussion_r1725457858 I added support for reading multiple versions from <code>.python-version</code> files though, so there's no real need for separate files going forward.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @zanieb on 2024-10-07 18:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mkniewallner">@mkniewallner</a> on 2024-10-07 18:40</div>
            <div class="timeline-body"><blockquote>
<p>I think pyenv writes all these to the same line, which is problematic (e.g. #7935).</p>
</blockquote>
<p>The <a href="https://github.com/pyenv/pyenv/blob/d201daeb3366cae98cca88654b4c52018175ded5/test/version-file-read.bats#L74-L84">test suite</a> in <code>pyenv</code> makes me believe that it does separate the versions with a newline (in line with what the README mentions). Didn't test myself, but I can if needed.</p>
<blockquote>
<p>Back in <a href="https://github.com/astral-sh/uv/pull/6359#discussion_r1725457858">#6359 (comment)</a> I added support for reading multiple versions from <code>.python-version</code> files though, so there's no real need for separate files going forward.</p>
</blockquote>
<p>Oh didn't see that sorry, I should have checked the code instead of only relying on what the documentation says. Would it make sense to recommend using <code>.python-version</code> when using multiple versions in that case, while keeping support for <code>.python-versions</code> for now?</p>
<p>If https://github.com/astral-sh/uv/issues/7983 is accepted and implemented, this could also enable automated updates of Python versions for users of both <code>pyenv</code> and uv that use Renovate (which currently only supports <code>.python-version</code> with a single version in it).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-07 19:12</div>
            <div class="timeline-body"><blockquote>
<p>The <a href="https://github.com/pyenv/pyenv/blob/d201daeb3366cae98cca88654b4c52018175ded5/test/version-file-read.bats#L74-L84">test suite</a> in pyenv makes me believe that it does separate the versions with a newline (in line with what the README mentions). Didn't test myself, but I can if needed.</p>
</blockquote>
<p>You could be right! I'm basing this off the user report in the linked contribution.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-07 19:13</div>
            <div class="timeline-body"><blockquote>
<p>Would it make sense to recommend using .python-version when using multiple versions in that case?</p>
</blockquote>
<p>I think that'd be fine, but I'm not sure I have a strong understand of what other tools will do with a multi-version <code>.python-version</code> file e.g. I'm worried about Renovate and GitHub Actions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mkniewallner">@mkniewallner</a> on 2024-10-07 20:51</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>Would it make sense to recommend using .python-version when using multiple versions in that case?</p>
</blockquote>
<p>I think that'd be fine, but I'm not sure I have a strong understand of what other tools will do with a multi-version <code>.python-version</code> file e.g. I'm worried about Renovate and GitHub Actions.</p>
</blockquote>
<p>For Renovate, until the change is accepted/implemented, it will simply not be able to parse the version(s) from the file, since today it assumes that there's always a single version, so not too problematic IMO.</p>
<p>For <code>actions/setup-python</code>, <a href="https://github.com/actions/setup-python/blob/19dfb7b659fa9e60c2f89c33335ab5f6f1792b6e/src/utils.ts#L265-L273">it also currently assumes</a> that there is a single version in the file passed in <code>python-version-file</code> output, or in <code>.python-version</code>, if neither <code>python-version-file</code> nor <code>python-version</code> are set in the action. So probably more problematic here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edmorley">@edmorley</a> on 2024-10-07 22:14</div>
            <div class="timeline-body"><p>There sadly isn't a spec for <code>.python-version</code> files - and the pyenv docs don't describe the format in detail, so I had to reverse engineer it whilst writing a parser for the files recently. Multiple versions are indeed supported already by pyenv in the <code>.python-version</code> file, separated one per line. As such having the additional supported filename of <code>.python-versions</code> seems redundant - and so I would be in favour of deprecating/sunsetting <code>.python-versions</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Czaki">@Czaki</a> on 2024-10-16 15:26</div>
            <div class="timeline-body"><blockquote>
<p>The <a href="https://github.com/pyenv/pyenv/blob/d201daeb3366cae98cca88654b4c52018175ded5/test/version-file-read.bats#L74-L84">test suite</a> in <code>pyenv</code> makes me believe that it does separate the versions with a newline (in line with what the README mentions). Didn't test myself, but I can if needed.</p>
</blockquote>
<p>I still have archived projects with python versions stored in a single line separated by space. And pyenv was working with it. But now I can confirm that pyenv is separating the python version with new lines.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/realharry">@realharry</a> on 2025-10-16 19:19</div>
            <div class="timeline-body"><p>I would also like to request to enhance &quot;uv python pin&quot; to accept multiple versions of Python, or even ranges of versions. For example,</p>
<pre><code>uv python pin 3.12, 3.13
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-16 19:24</div>
            <div class="timeline-body"><p>@realharry please open a new issue as that's a different objective than we're discussing here.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:00 UTC
    </footer>
</body>
</html>
