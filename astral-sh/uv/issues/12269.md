```yaml
number: 12269
title: uv sync fails when python-requires of a dependency is higher than that of the dependent package, how to address?
type: issue
state: closed
author: astafan8
labels:
  - question
assignees: []
created_at: 2025-03-18T10:03:51Z
updated_at: 2025-03-19T08:06:58Z
url: https://github.com/astral-sh/uv/issues/12269
synced_at: 2026-01-10T01:57:28Z
```

# uv sync fails when python-requires of a dependency is higher than that of the dependent package, how to address?

---

_Issue opened by @astafan8 on 2025-03-18 10:03_

### Question

I am working on a package A that has python-requires in pyproject.toml set to `>=3.10.1`. Package A depends on package B, and is mentioned in the dependencies section in the pyproject.toml, and for the sake of this questions let's assume that it's pinned to be `>=some-very-old-version`. However, the recent versions of package B happened to drop python 3.10 support, and now have `>=3.11` in their pyproject.toml.

Moreover, I tell uv to set up an environment in such a way that project B is installed in editable mode from a local clone like this in pyproject.toml of package A:
```toml
[tool.uv.sources]
B = { path = "../B", editable = true }
```

Then, when i run ``uv sync --all-extras --upgrade`` in package A repo to do some development on it, i get the following error from uv:

```
  × No solution found when resolving dependencies:
  ╰─▶ Because the requested Python version (>=3.10.1) does not satisfy Python>=3.11 and B==2025.4.0.dev16 depends on Python>=3.11, we can conclude that
      B==2025.4.0.dev16 cannot be used.
      And because only B==2025.4.0.dev16 is available and your project depends on B, we can conclude that your project's requirements are unsatisfiable.

      hint: The `requires-python` value (>=3.10.1) includes Python versions that are not supported by your dependencies (e.g., B==2025.4.0.dev16 only supports >=3.11). Consider using a     
      more restrictive `requires-python` value (like >=3.11).
```

So, how can I work with ``uv sync`` on the package A before it drops support of python 3.10? For now I temporarily change the python-requires of A to be `>=3.11`, but i don't want to remember to do this hack all the time. There must be a better way, or I might need to learn something about `uv sync` and `python` and life :) So looking forward to your answers and perspectives on this issue.

And an exatra question - can't `uv sync` be asked to focus on resolving python depednencies and prepare an environment that's just focus on the intended python version, in my case python 3.12? I do have `.python-version` file with `3.12` created via `uv python pin 3.12` and i get confused by the uv's response above because i didn't ask it explicitly to do anything with python 3.10. But again, maybe i don't understand something.

I did my google/copilot/github/etc search but could not find a duplicate, so apologies if it's still a duplicate.


### Platform

``Windows 11``

### Version

``uv 0.6.5 (bcbcd0a1e 2025-03-06)``

---

_Label `question` added by @astafan8 on 2025-03-18 10:03_

---

_Comment by @charliermarsh on 2025-03-18 13:43_

I think what you can do is add `B; python_version >= "3.11"` to note that it should only be installed on that version.

---

_Assigned to @charliermarsh by @charliermarsh on 2025-03-18 13:43_

---

_Comment by @astafan8 on 2025-03-18 15:43_

@charliermarsh thanks! Where would I add this?

---

_Comment by @charliermarsh on 2025-03-18 15:58_

In `project.dependencies`:

```toml
[project]
name = "..."
version = "..."
dependencies = ["B; python_version >= '3.11'"]
```

---

_Comment by @astafan8 on 2025-03-18 16:52_

@charliermarsh this worked!

Now, is there a way that could work on command-line and without changing the dependencies entry?

---

_Comment by @zanieb on 2025-03-18 17:22_

No, the dependency entry needs to be "correct" otherwise the project metadata is unsolvable — i.e., if you have a dependency that only supports a subset of your project's Python range, it needs to be limited to that subset.

---

_Closed by @charliermarsh on 2025-03-18 19:53_

---

_Comment by @astafan8 on 2025-03-19 08:06_

Thank you for explaining!

And how should one than go about dropping python version support in a collection of interdependent packages? Seems like it's not possible to do it package-by-package relatively independenty in time since uv won't allow to install things, and adding `B; python_vesion >= 3.11` would technically mean that package A does not depend on package B on python 3.10 while it could be totally find for install an older version of B that still supports python 3.10.

---
