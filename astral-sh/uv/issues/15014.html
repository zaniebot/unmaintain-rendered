<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>torch nightlies fails if the latest nightly is missing - astral-sh/uv #15014</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>torch nightlies fails if the latest nightly is missing</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/15014">#15014</a>
        opened by <a href="https://github.com/pbontrager">@pbontrager</a>
        on 2025-08-01 16:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/pbontrager">@pbontrager</a> on 2025-08-01 16:30</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I have a torch dependency in my project list &quot;torch&gt;2.7.1&quot;. And I include an index:</p>
<pre><code>[[tool.uv.index]]
name = &quot;torch-nightly&quot;
url = &quot;https://download.pytorch.org/whl/nightly/&quot;
explicit = True

[tool.uv.sources]
torch = { index = &quot;pytorch-nightly&quot; }
</code></pre>
<p>This normally works, but when I ran it today, it failed because the linux wheels didn't build and push to the index for some reason (2.9.0.dev20250801+cu128). Therefore the latest builds are only for &quot;win_amd64&quot;. Since my only requirement is &quot;&gt;2.7.1&quot;, shouldn't the system fall back to yesterdays build (2.9.0.dev20250731+cu128), which are still on the index?</p>
<h3>Platform</h3>
<p>Linux 6.4.3-0_fbk20_zion_2830_g3e5ab162667d x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.8.4</p>
<h3>Python version</h3>
<p>Python 3.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @pbontrager on 2025-08-01 16:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-01 16:56</div>
            <div class="timeline-body"><p>Please see https://docs.astral.sh/uv/concepts/resolution/#required-environments</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @zanieb on 2025-08-01 16:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-08-01 16:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pbontrager">@pbontrager</a> on 2025-08-01 18:24</div>
            <div class="timeline-body"><p>Okay thank you! Adding the environments option fixed it in this case. To further clarify, this means that every platform supported needs to be on the same version of the dependency? Is there a way to support linux + win + darwin and for each one it takes the latest build that exists even if they're not the same?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-01 18:29</div>
            <div class="timeline-body"><blockquote>
<p>To further clarify, this means that every platform supported needs to be on the same version of the dependency?</p>
</blockquote>
<p>I'm not actually sure. It gets kind of nuanced at that point. I think you'd want a new https://docs.astral.sh/uv/concepts/resolution/#multi-version-resolution option like <code>fork-strategy = &quot;platform&quot;</code></p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:29 UTC
    </footer>
</body>
</html>
