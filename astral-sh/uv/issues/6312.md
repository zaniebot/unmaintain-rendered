```yaml
number: 6312
title: uv cache prune --ci prunes everything in the cache
type: issue
state: closed
author: valentincalomme
labels:
  - question
assignees: []
created_at: 2024-08-21T08:51:06Z
updated_at: 2024-08-21T13:22:53Z
url: https://github.com/astral-sh/uv/issues/6312
synced_at: 2026-01-10T01:57:13Z
```

# uv cache prune --ci prunes everything in the cache

---

_Issue opened by @valentincalomme on 2024-08-21 08:51_

I've just upgrade to `uv==0.3.0` and was happy to see a tip about caching in Github actions in the documentation.

Although, by applying what is described in the docs, and running `uv cache prune --ci`, my entire cache is pruned and I'm left with  a 240KB cache, which is far too small for the dependencies that I have.

Am I misunderstanding how this command should work?

---

_Comment by @zanieb on 2024-08-21 12:43_

For some use cases, we will prune nearly the entire cache. The details are described [in the docs](https://docs.astral.sh/uv/concepts/cache/#caching-in-continuous-integration).

---

_Label `question` added by @zanieb on 2024-08-21 12:43_

---

_Comment by @charliermarsh on 2024-08-21 13:22_

Yeah, it's strange, but it turns out that it's actually (a lot) faster to just re-download from the registry than it is to upload and then re-download from GitHub Actions (which is roughly what happens when you cache the wheels that came from the registry). So counterintuitively, our `uv cache prune --ci`, removes any _wheels_ that were downloaded from a registry, but keeps any _source distributions_ that you built locally (since those tend to be costly).


---

_Closed by @charliermarsh on 2024-08-21 13:22_

---

_Referenced in [astral-sh/setup-uv#122](../../astral-sh/setup-uv/issues/122.md) on 2024-10-16 18:06_

---

_Referenced in [VOICEVOX/voicevox_engine#1827](../../VOICEVOX/voicevox_engine/pulls/1827.md) on 2025-11-29 14:24_

---
