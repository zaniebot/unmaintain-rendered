```yaml
number: 4516
title: "`uv pip sync` fails to clear environment when given an empty requirements list"
type: issue
state: closed
author: ncoghlan
labels:
  - enhancement
assignees: []
created_at: 2024-06-25T14:04:51Z
updated_at: 2024-07-02T13:14:28Z
url: https://github.com/astral-sh/uv/issues/4516
synced_at: 2026-01-10T01:57:09Z
```

# `uv pip sync` fails to clear environment when given an empty requirements list

---

_Issue opened by @ncoghlan on 2024-06-25 14:04_

I have a use case where several different environments are being updated with `uv pip sync`, and some of those environments may legitimately have a desired end state of "just a Python runtime with no extra packages" (the packages that are installed into those environments are platform dependent, and on some platforms there are no additional packages needed).

When trying to clear those environments, `uv pip sync` simply reports "No requirements found" and exits immediately instead of synchronising the environment with the requirements list as desired.

I can work around this, but being able to reliably clear an environment from outside was a key motivation for switching from `pip-sync` to `uv pip sync` (due to https://github.com/jazzband/pip-tools/issues/2103)

---

_Comment by @zanieb on 2024-06-25 14:17_

Hi! The request makes sense but this is a tough one for user experience because people can pass all sorts of requirements sources and we've seen people confused when they accidentally have an empty set of requirements. Do you think we should add a flag to opt-in to this behavior? 

---

_Label `needs-design` added by @zanieb on 2024-06-25 14:17_

---

_Comment by @ncoghlan on 2024-06-25 14:24_

Yeah, an opt-in flag like `--allow-clear` would make sense (I assumed the UX benefit was the reason for the current behaviour)

---

_Referenced in [astral-sh/uv#4517](../../astral-sh/uv/pulls/4517.md) on 2024-06-25 14:37_

---

_Comment by @zanieb on 2024-06-25 14:37_

Here's a proof of concept: https://github.com/astral-sh/uv/pull/4517

---

_Label `needs-design` removed by @zanieb on 2024-06-25 14:37_

---

_Label `enhancement` added by @zanieb on 2024-06-25 14:37_

---

_Comment by @ncoghlan on 2024-06-25 16:01_

That would definitely work for my use case, and the name `--allow-empty-requirements` seems clear enough.

---

_Closed by @charliermarsh on 2024-07-02 13:14_

---

_Closed by @charliermarsh on 2024-07-02 13:14_

---
