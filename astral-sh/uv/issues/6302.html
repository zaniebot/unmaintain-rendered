<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ú® How to define custom commands like `tool.rye.scripts` - astral-sh/uv #6302</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>‚ú® How to define custom commands like `tool.rye.scripts`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/6302">#6302</a>
        opened by <a href="https://github.com/jd-solanki">@jd-solanki</a>
        on 2024-08-21 06:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jd-solanki">@jd-solanki</a> on 2024-08-21 06:28</div>
            <div class="timeline-body"><p>Hi üëãüèª</p>
<p>I'm really happy for UV. I always wanted better python ecosystem thanks all of you for your efforts.</p>
<p>I want to migrate from rye to UV as I'm starting new project and wanted to add custom command like <code>uv run dev</code> that executes <code>uv run fastapi dev src/backend/main.py</code> for me.</p>
<p>In Rye, I used to define it under scripts section:</p>
<pre><code class="language-toml">[tool.rye.scripts]
dev = &quot;uvicorn aitools.main:app --reload&quot;
migration = &quot;alembic revision --autogenerate -m&quot;
migrate = &quot;alembic upgrade head&quot;
downgrade = &quot;alembic downgrade -1&quot;
</code></pre>
<p>However, It looks like UV don't have this feature or isn't documented yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/captnswing">@captnswing</a> on 2024-08-21 09:01</div>
            <div class="timeline-body"><p>I think this is done in the <code>[project.scripts]</code> table.</p>
<p>See https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#creating-executable-scripts</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jorgebodega">@jorgebodega</a> on 2024-08-21 09:34</div>
            <div class="timeline-body"><p>It is not exactly the same. <code>[project.scripts]</code> requires a python file to be created to execute something.</p>
<p>To achieve this, I'm still using <a href="https://github.com/nat-n/poethepoet">poethepoet</a> inherited from poetry, and it just works.</p>
<p>But yes, this would be great to have inside <code>uv</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/patrick91">@patrick91</a> on 2024-08-21 12:42</div>
            <div class="timeline-body"><p><code>pdm</code> does it like this:</p>
<pre><code>[tool.pdm.scripts]
start = &quot;flask run -p 54321&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-21 12:44</div>
            <div class="timeline-body"><p>Yeah we don't support this yet, but we plan to in some way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2024-08-21 12:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">projects</span> added by @zanieb on 2024-08-21 12:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/anthonycorletti">@anthonycorletti</a> on 2024-08-22 19:48</div>
            <div class="timeline-body"><p>this sounds really useful.</p>
<p>my solution for this right now is leaving scripts in a bin directory which does the trick because i don't have to remember commands or reverse-i-search forever. would love to have something like this:</p>
<pre><code class="language-toml"># ...

[tool.uv.scripts]
clean = &quot;rm -rf build dist *_cache&quot;
format = &quot;ruff format&quot;
check = &quot;ruff check&quot;
test = &quot;pytest&quot;
dev = &quot;uvicorn app.main:app --reload&quot;

[tool.uv.scripts.combos]
ok = [&quot;clean&quot;, &quot;format&quot;, &quot;check&quot;, &quot;test&quot;]

# ...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/patrick91">@patrick91</a> on 2024-08-23 10:38</div>
            <div class="timeline-body"><p>@anthonycorletti the combo stuff is interesting, <a href="https://mise.jdx.dev/">mise</a> does it like this:</p>
<pre><code>[tasks.fetch-openapi]
run = &quot;curl localhost:8000/api/v1/openapi.json -O&quot;

[tasks.modify-openapi]
run = &quot;node modify-openapi-operationids.js&quot;
depends = [&quot;fetch-openapi&quot;]
</code></pre>
<p>but I wonder if this is scope creep :D</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ion-elgreco">@ion-elgreco</a> on 2024-08-25 12:30</div>
            <div class="timeline-body"><p>This would be nice to have so I don't need to have separate make/just files</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/my1e5">@my1e5</a> on 2024-08-27 10:36</div>
            <div class="timeline-body"><p>Duplicate of https://github.com/astral-sh/uv/issues/5903</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jd-solanki on 2024-08-27 10:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phihung">@phihung</a> on 2024-10-30 14:13</div>
            <div class="timeline-body"><p>Hi. I created a small, dependency-free tool to manage scripts directly from pyproject.toml:
https://github.com/phihung/tomlscript</p>
<p>It works with all dependencies management tools. Tested with uv, pip and poetry.</p>
<h3>Configuration example</h3>
<pre><code class="language-toml">[tool.tomlscript]
# Start dev server ==&gt; this line is the documentation of the command
dev = &quot;uv run uvicorn --port {port:5001} myapp:app --reload&quot;

# Linter and test 
test = &quot;&quot;&quot;
uv run ruff check
uv run pytest --inline-snapshot=review
&quot;&quot;&quot;

# Generate pyi stubs (python function) ==&gt; Execute python function
gen_pyi = &quot;mypackage.typing:generate_pyi&quot;

setup_dev = &quot;&quot;&quot;
uv sync
uv run mypy --install-types--non-interactive
aws s3 cp s3://my-bucket/model ./models
&quot;&quot;&quot;
</code></pre>
<h3>Usage</h3>
<pre><code>alias tom=&quot;uvx tomlscript&quot;

tom  # list commands
tom setup_dev # Setup dev env, install dependencies, etc
tom dev --port 8000
tom gen_pyi  --mode all  # execute python function with arguments
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Mai0313">@Mai0313</a> on 2025-01-16 03:33</div>
            <div class="timeline-body"><p>any update?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-16 03:38</div>
            <div class="timeline-body"><p>@Mai0313 please don't ask for updates. See #9452.</p>
<p>This issue is being tracked in #5903</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:59 UTC
    </footer>
</body>
</html>
