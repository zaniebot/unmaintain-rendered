<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip sync` should maybe have a `--no-remove` flag? - astral-sh/uv #4113</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv pip sync` should maybe have a `--no-remove` flag?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/4113">#4113</a>
        opened by <a href="https://github.com/thejcannon">@thejcannon</a>
        on 2024-06-06 20:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/thejcannon">@thejcannon</a> on 2024-06-06 20:12</div>
            <div class="timeline-body"><p>ðŸ‘‹ Howdy!</p>
<p>At $work we use a global lockfile to manage dependencies, so <code>uv pip sync</code> naturally is a great fit for keeping the transient environment up-to-date with regard to the lockfile as we travel forward and backwards in time (via git ops).</p>
<p><em>However</em>, we also support people installing certain dependencies for one-off tooling or prototyping and I'd hate to tell them to run <code>uv pip sync</code> and those deps dissapear.</p>
<p>I understand that havign some kind of <code>--no-remove</code> flag is likely not <em>truly</em> what we want (because the env will maybe become bloated over time, or maybe there's conflicting deps, or maybe we're leaving a dep with a security concern) but I think it handles the use-case well-enough that it's worth trying out.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-06 23:03</div>
            <div class="timeline-body"><p>What if we have other ways to managing one-off tooling and prototyping? e.g. <code>uv tool</code> (#3560) or <code>uv run --with &lt;one-off-package&gt;</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thejcannon">@thejcannon</a> on 2024-06-07 01:43</div>
            <div class="timeline-body"><p>I expected this answer ðŸ˜„ I'd love to see those. I'm not 100% certain I'd be able to convince all of the folks I support (some of which aren't engineers, and don't know what <code>uv</code> is, or that it's used under the hood for our common tooling) to always use the totally-awesome-<code>uv</code>-thing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2024-06-07 02:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @charliermarsh on 2024-06-07 02:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-07 02:50</div>
            <div class="timeline-body"><p>I think <code>pip install --no-deps</code> will... basically do what you want? Internally it's like, exactly this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-07 02:56</div>
            <div class="timeline-body"><p>We'll probably expose something like this, it was in our original designs. I'm just curious to see how far we can get without exposing it by, e.g., building better APIs and want to learn more about the stories behind it. Centrally managing environment state seems like a fair use case, especially if the downstream users have access to <code>pip</code>. You could still definitely break their environment with a sync operation though (or the sync could fail).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-07 02:58</div>
            <div class="timeline-body"><p>To be clear, I meant <code>uv pip install --no-deps</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thejcannon">@thejcannon</a> on 2024-06-07 03:52</div>
            <div class="timeline-body"><p>Oh...... yeeeeeaaaaaaahhhh I think you're right ðŸ¤¦</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @thejcannon on 2024-06-07 03:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:28 UTC
    </footer>
</body>
</html>
