<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add flag to allow global installs e.g. for CI - astral-sh/uv #1526</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add flag to allow global installs e.g. for CI</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1526">#1526</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-02-16 18:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-16 18:47</div>
            <div class="timeline-body"><p>We require install into a virtual environment, but in ephemeral builds like CI or containers this may not be desired.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2024-02-16 18:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @zanieb on 2024-02-16 18:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yabirgb">@yabirgb</a> on 2024-02-16 19:37</div>
            <div class="timeline-body"><p>I was facing the same issue. Maybe provide a <code>--no-env</code>or <code>--global</code> variable so the user can't do it by accident</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/justinh-rahb">@justinh-rahb</a> on 2024-02-16 20:39</div>
            <div class="timeline-body"><p>Ya, this has been a blocker to using this to speed up some slow container builds unfortunately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../scikit-hep/pyhf/pulls/2444.html">scikit-hep/pyhf#2444</a> on 2024-02-16 21:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2024-02-16 21:38</div>
            <div class="timeline-body"><p>Workaround credit to @matthewfeickert:</p>
<pre><code class="language-yaml">    - name: Set the VIRTUAL_ENV variable for uv to work
      run: |
        echo &quot;VIRTUAL_ENV=${Python_ROOT_DIR}&quot; &gt;&gt; $GITHUB_ENV
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/matthewfeickert">@matthewfeickert</a> on 2024-02-16 22:26</div>
            <div class="timeline-body"><p>I actually took that from https://github.com/astral-sh/uv/issues/1386#issuecomment-1947801083 and https://github.com/astral-sh/uv/issues/1386#issuecomment-1947835870. The important bit here is that it needs to be done in a seperate step before you want to use it, so you can't modify the <code>$GITHUB_ENV</code> in the same run command as you want to use it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1550.html">astral-sh/uv#1550</a> on 2024-02-17 00:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-17 00:40</div>
            <div class="timeline-body"><p>This is a duplicate of https://github.com/astral-sh/uv/issues/1374; oops. I'll keep both for now since they're distinct titles.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hauntsaninja">@hauntsaninja</a> on 2024-02-17 01:01</div>
            <div class="timeline-body"><p>(Naming the flag <code>--system</code> would mirror venv's <code>--system-site-packages</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1578.html">astral-sh/uv#1578</a> on 2024-02-17 12:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../rotki/rotki/pulls/7499.html">rotki/rotki#7499</a> on 2024-02-17 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yabirgb">@yabirgb</a> on 2024-02-17 13:29</div>
            <div class="timeline-body"><p>I got this error pointing the env to the python location as @henryiii posted. Did anyone face the same issue? In the docker container it worked fine</p>
<p><img src="https://github.com/astral-sh/uv/assets/5068010/22384b90-84e3-451a-a886-e8cd06c3e87a" alt="image" /></p>
<p>https://github.com/rotki/rotki/pull/7499</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1584.html">astral-sh/uv#1584</a> on 2024-02-17 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-18 16:06</div>
            <div class="timeline-body"><p>I am a fan of a system flag though @zanieb has done a lot more work on the Python discovery stuff.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Consider allowing global installs e.g. for CI" to "Add flag to allow global installs e.g. for CI" by @zanieb on 2024-02-18 17:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-18 17:08</div>
            <div class="timeline-body"><p>I can probably take this on next week.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-02-18 17:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kafonek">@kafonek</a> on 2024-02-18 18:40</div>
            <div class="timeline-body"><p>@zanieb not sure if you want this as a separate ticket, but in containers where we install system python through <code>apt-get</code>, <code>uv pip install</code> fails because there's no <code>/usr/lib/python3.10/site-packages</code> directory (all libs are just in <code>/usr/lib/python3.10</code> by the looks of it). Example Dockerfile to reproduce:</p>
<pre><code>FROM nvidia/cuda:12.1.1-devel-ubuntu22.04

RUN apt-get update &amp;&amp; \
    apt-get install -y build-essential python3.10 python3.10-dev curl &amp;&amp; \
    apt-get clean

RUN ln -s /usr/bin/python3.10 /usr/bin/python

RUN curl -LsSf https://astral.sh/uv/install.sh | sh

ENV VIRTUAL_ENV=&quot;/usr&quot;
RUN /root/.cargo/bin/uv pip install ruff -v
</code></pre>
<pre><code>&gt; [5/5] RUN /root/.cargo/bin/uv pip install ruff -v:
0.286  uv::requirements::from_source source=ruff
0.287     0.001892s DEBUG uv_interpreter::virtual_env Found a virtualenv through VIRTUAL_ENV at: /usr
0.288     0.001951s DEBUG uv_interpreter::interpreter Detecting markers for: /usr/bin/python
0.308     0.022522s DEBUG uv::commands::pip_install Using Python 3.10.12 environment at /usr/bin/python
0.310 error: Failed to list installed packages
0.310   Caused by: failed to read directory `/usr/lib/python3.10/site-packages`
0.310   Caused by: No such file or directory (os error 2)
------
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pablodz">@pablodz</a> on 2024-02-18 18:46</div>
            <div class="timeline-body"><p>https://ryxcommar.com/2024/02/15/how-to-cut-your-python-docker-builds-in-half-with-uv/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1396.html">astral-sh/uv#1396</a> on 2024-02-19 00:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1374.html">astral-sh/uv#1374</a> on 2024-02-19 15:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2024-02-19 16:24</div>
            <div class="timeline-body"><p>Similar to #1396 a <code>--python</code> flag would solve this constraint. Additionally, it makes sense to simply use whatever comes first on PATH as a default; users have come to expect this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1705.html">astral-sh/uv#1705</a> on 2024-02-19 16:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qthequartermasterman">@qthequartermasterman</a> on 2024-02-20 00:36</div>
            <div class="timeline-body"><blockquote>
<p>I got this error pointing the env to the python location as @henryiii posted. Did anyone face the same issue? In the docker container it worked fine</p>
<p><img src="https://private-user-images.githubusercontent.com/5068010/305646245-22384b90-84e3-451a-a886-e8cd06c3e87a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MDgzODk2OTEsIm5iZiI6MTcwODM4OTM5MSwicGF0aCI6Ii81MDY4MDEwLzMwNTY0NjI0NS0yMjM4NGI5MC04NGUzLTQ1MWEtYTg4Ni1lOGNkMDZjM2U4N2EucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI0MDIyMCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNDAyMjBUMDAzNjMxWiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9MDU5OTBjNDgzZWJmMDk2NTIxYmQ4YWMzMzdlMDc5NTRhZWFjMjZmNWE3MjQwMTU2MzVlZTYwODg0N2VmOWUzMiZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QmYWN0b3JfaWQ9MCZrZXlfaWQ9MCZyZXBvX2lkPTAifQ._3Hone7n4b22Wfryd42oDS6JVM-hZGOqyWT3GAcuCnQ" alt="image" /></p>
<p><a href="https://github.com/rotki/rotki/pull/7499">rotki/rotki#7499</a></p>
</blockquote>
<p>I see this same error, but only in Python 3.9 and 3.10. Python 3.11 works fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1761.html">astral-sh/uv#1761</a> on 2024-02-20 15:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1779.html">astral-sh/uv#1779</a> on 2024-02-20 21:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mronphillips">@mronphillips</a> on 2024-02-22 21:41</div>
            <div class="timeline-body"><blockquote>
<p>@zanieb not sure if you want this as a separate ticket, but in containers where we install system python through <code>apt-get</code>, <code>uv pip install</code> fails because there's no <code>/usr/lib/python3.10/site-packages</code> directory (all libs are just in <code>/usr/lib/python3.10</code> by the looks of it). Example Dockerfile to reproduce:</p>
<pre><code>FROM nvidia/cuda:12.1.1-devel-ubuntu22.04

RUN apt-get update &amp;&amp; \
    apt-get install -y build-essential python3.10 python3.10-dev curl &amp;&amp; \
    apt-get clean

RUN ln -s /usr/bin/python3.10 /usr/bin/python

RUN curl -LsSf https://astral.sh/uv/install.sh | sh

ENV VIRTUAL_ENV=&quot;/usr&quot;
RUN /root/.cargo/bin/uv pip install ruff -v
</code></pre>
<pre><code>&gt; [5/5] RUN /root/.cargo/bin/uv pip install ruff -v:
0.286  uv::requirements::from_source source=ruff
0.287     0.001892s DEBUG uv_interpreter::virtual_env Found a virtualenv through VIRTUAL_ENV at: /usr
0.288     0.001951s DEBUG uv_interpreter::interpreter Detecting markers for: /usr/bin/python
0.308     0.022522s DEBUG uv::commands::pip_install Using Python 3.10.12 environment at /usr/bin/python
0.310 error: Failed to list installed packages
0.310   Caused by: failed to read directory `/usr/lib/python3.10/site-packages`
0.310   Caused by: No such file or directory (os error 2)
------
</code></pre>
</blockquote>
<p>We're facing the same with Ubuntu 22.04 and Python 3.10 in docker.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-28 04:25</div>
            <div class="timeline-body"><p>In the next release, you can provide a <code>--python</code> flag to <code>uv pip install</code> and <code>uv pip sync</code> in lieu of setting the <code>VIRTUAL_ENV</code> variable in CI environments.</p>
<p><code>--python</code> can point to any Python interpreter -- it doesn't need to be a virtualenv (e.g., <code>--python $(which python3.12)</code> and so on).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-02-28 04:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @zanieb by @charliermarsh on 2024-02-28 04:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-28 04:27</div>
            <div class="timeline-body"><p>(I'm undecided on adding a flag like <code>--system</code> or <code>--global</code>, since it'd just be a syntactic nicety over <code>--python</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pablodz">@pablodz</a> on 2024-02-28 04:28</div>
            <div class="timeline-body"><p>This only will be for cicd simplicity, maybe --cicd ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-28 04:31</div>
            <div class="timeline-body"><p>I'm not sure why this would be better specified as <em>just</em> for CI.</p>
<p>Would <code>--system</code> be exactly equivalent to <code>--python python3</code>? <code>--python python3</code> would be confusing to see when reviewing code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-28 04:33</div>
            <div class="timeline-body"><blockquote>
<p>Would --system be exactly equivalent to --python python3? --python python3 would be confusing to see when reviewing code.</p>
</blockquote>
<p>Roughly, yeah. (My assumption is that internally, we'd just use <code>find_default_python</code> instead of passing a selector to <code>find_requested_python</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NMertsch">@NMertsch</a> on 2024-02-28 05:18</div>
            <div class="timeline-body"><p>Thank you for this great tool and the exceptional community support! ‚ô•Ô∏è</p>
<p><code>--python python3</code> could be confused with specifying &quot;not Python 2&quot;. <code>--python python</code> looks weird to me.</p>
<p><code>--global</code>, <code>--system</code>, <code>--no-venv</code>, or <code>--python-executable XYZ</code> would solve this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-28 05:53</div>
            <div class="timeline-body"><p>I think in CI environments like GitHub Actions (or Docker containers, etc.) I'd expect that you'd typically either encode the full path (<code>--python /usr/...</code>) or use <code>--python $(which python3)</code> or similar.</p>
<p>(But I'm not really opposed to adding <code>--system</code> or <code>--global</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-28 06:55</div>
            <div class="timeline-body"><p>I don't think using <code>which</code> is platform portable so that sounds annoying. I'm loosely in favor of adding a dedicated flag. I don't know if <code>--global</code> is any clearer than <code>--system</code> to me.</p>
<blockquote>
<p>--python python3 could be confused with specifying &quot;not Python 2&quot;</p>
</blockquote>
<p>Is there a problem with that? It would be problematic if we picked up Python 2 because we don't support it. I am worried that people will do <code>--python python</code> and be confused when it picks up Python 2 which still seems weirdly common.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alexprengere">@alexprengere</a> on 2024-02-28 07:00</div>
            <div class="timeline-body"><p>I think <code>--python ...</code> is fine, and there is no need for another flag that is syntactic sugar over this.</p>
<p>My rationale is that I think if &quot;regular pip&quot; as &quot;always part of a specific Python distribution&quot; (installed via <em>ensurepip</em> or a system package), so <code>--system/--global</code> makes sense, as it refers to the implicit Python it was installed with.
But I think of &quot;uv pip&quot; as a global command untied to any Python interpreter (installed from cargo/pipx/..), so <code>--system/--global</code> seems confusing. Hence the need to specify the Python interpreter.</p>
<p>AFAICT a parallel is that <code>pip-compile</code> from pip-tools uses the Python it is installed with to generate the requirements, whereas <code>uv pip compile</code> has a <code>--python-version</code> (even though it is optional).</p>
<p>Perhaps my mental model of this is inaccurate though üòâ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/strickvl">@strickvl</a> on 2024-02-28 07:06</div>
            <div class="timeline-body"><p>When it comes to working with scripts / workflows in the CI, I think having a dedicated flag (precise name doesn't matter so much) would help simplify things at the user end. You're frequently working on different operating systems and environments and so not needing to supply this every time would be helpful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/albertferras-vrf">@albertferras-vrf</a> on 2024-02-28 08:03</div>
            <div class="timeline-body"><p>(These are my thoughts as a user of <code>uv</code>, I don't know the details of how uv works or what it was designed for)
If uv is supposed to have the same syntax/behaviour than <code>pip</code> and you can use it just by adding <code>uv</code> as a prefix to the existing pip command, why not keep the same behaviour as pip? I never had to specify which python's site-packages I want to install something to, because <code>pip</code> is already part of either the system python or some virtualenv's pip.
So, if <code>uv</code> is installed on a virtualenv, install packages there. If it's on system, install packages on system.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../zenml-io/zenml/pulls/2442.html">zenml-io/zenml#2442</a> on 2024-02-28 08:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2042.html">astral-sh/uv#2042</a> on 2024-02-28 12:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-28 15:19</div>
            <div class="timeline-body"><p>I empathize with that perspective but we still want to guide users towards using virtual environments and make installing into the system Python an opt-in behavior. It's an intentional difference to have a virtual environment-focused workflow by default, and something we plan to continue to do. Manipulating the system Python is generally discouraged and even dangerous (see: <a href="https://packaging.python.org/en/latest/specifications/externally-managed-environments/">Externally Managed Environments</a>), and I think it's good for us to take advantage of the opportunity to have some different defaults from <code>pip</code>, this being one of them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2024-02-28 15:31</div>
            <div class="timeline-body"><p>Also, I should point out that pip does have the ability to be used in this way - <code>pip --python &lt;python&gt;</code> allows you to target some other Python install, and using this actually speeds up tools like <code>build</code> - we reduced our <code>venv</code> based backend building an sdist and wheel from 10 seconds to 4 seconds by removing the pip install and instead using the outer pip instance (if possible). Historically, people have always installed pip and used pip wherever Python was (that's why people even push for <code>python -m pip</code> over <code>pip</code>, to ensure you are getting the &quot;local&quot; one, though <code>pip --python python</code> is actually just as valid), but that's not necessarily the best model.</p>
<p>The big difference with uv is it's built for virtualenvs, and picks up on them automatically. I need to be <em>sure</em> that <code>uv pip install &lt;thing&gt;</code> will install into <code>.venv</code>, not my system! I was really worried about that when I first started using uv, and love that it does ensure that I can't mess up my system by mistake.</p>
<p>FYI, in GitHub Actions, especially if you were setting up a composite action, you could do it this way:</p>
<pre><code class="language-yaml">    - uses: actions/setup-python@v5
      id: python
      with:
        python-version: &quot;3.12&quot;
        update-environment: false
    - run: |
        uv pip install --python &quot;${{ steps.python.outputs.python-path }}&quot; &lt;...&gt;
</code></pre>
<p>This is explicit and will not affect the environment of future steps.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2046.html">astral-sh/uv#2046</a> on 2024-02-28 16:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-28 21:16</div>
            <div class="timeline-body"><p>This is out now in <a href="https://github.com/astral-sh/uv/releases/tag/0.1.12">v0.1.12</a>. Broadly, there are two new flags:</p>
<ul>
<li><code>--python</code>: Provide a path to an arbitrary Python interpreter, and <code>uv</code> will install into that interpreter's environment. (This could be a virtualenv, or a system path.)</li>
<li><code>--system</code>: Install into the &quot;global&quot; Python. Could be thought of as a platform-agnostic shorthand for <code>--python $(which python3)</code>.</li>
</ul>
<p>Folks that have historically set <code>VIRTUAL_ENV</code> in CI or a container to install into a system Python should be able to remove that setting, and instead pass <code>--system</code> to their <code>uv</code> commands.</p>
<p>I would appreciate feedback. It's a big change and Python installations and setups are very diverse, so I'm sure I got a few things wrong.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astrojuanlu">@astrojuanlu</a> on 2024-02-28 23:00</div>
            <div class="timeline-body"><p>Thanks for the quick release!</p>
<p>I just tested uv 0.1.12 and looks like <code>uv pip install --system ...</code> did its thing, but then neither <code>pytest</code> nor <code>python -m pytest</code> worked on Windows (&quot;command not found&quot; and &quot;No module named pytest&quot; respectively).</p>
<p>https://github.com/kedro-org/kedro-plugins/actions/runs/8088151338/job/22101608421</p>
<p>On Linux everything went fine!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-28 23:02</div>
            <div class="timeline-body"><p>Thanks @astrojuanlu -- I'm tracking that here: https://github.com/astral-sh/uv/issues/2056. It's something specific to Windows with Python versions prior to Python 3.12 (i.e., Python 3.12 seems to work).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../huggingface/huggingface_hub/pulls/2072.html">huggingface/huggingface_hub#2072</a> on 2024-03-01 12:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-04 14:50</div>
            <div class="timeline-body"><p>Calling this complete! <code>--system</code> exists.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-03-04 14:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/liiight">@liiight</a> on 2024-03-06 15:22</div>
            <div class="timeline-body"><p>Not sure if this merits a new issue (it probably does) but can this be implemented for <code>uv pip compile</code> as well?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-06 15:23</div>
            <div class="timeline-body"><p>I think <code>uv pip compile</code> will already discover a system Python if needed, since it doesn't modify the virtual environment. Are you seeing otherwise?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/liiight">@liiight</a> on 2024-03-06 15:29</div>
            <div class="timeline-body"><p>Well, yes and no.
I actually had a broken <code>.venv</code> dir which it auto discovered:</p>
<pre><code class="language-bash">$ uv pip compile be3_lib.txt
error: Broken virtualenv `/repos/analytics_content/.venv`, it contains a pyvenv.cfg but no Python binary at `/repos/analytics_content/.venv/bin/python`
</code></pre>
<p>This is because I use this directory in a docker container which is mounted so it broke the venv symlink. After I removed the <code>.venv</code> dir it worked as expected.</p>
<p>Maybe adding the same <code>--system</code> / <code>--python</code> flags here as well in order to explicitly set it?</p>
<p>Thanks for the swift response, it's very much on brand with uv &amp; ruff üòÜ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-06 15:29</div>
            <div class="timeline-body"><p>Yeah, it could make sense to include it for consistency.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/liiight">@liiight</a> on 2024-03-06 15:31</div>
            <div class="timeline-body"><p>Cool, do you want me to open a separate issue for this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-06 15:31</div>
            <div class="timeline-body"><p>Yes please, you can just link to your comment above, no need to write an extensive description.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2242.html">astral-sh/uv#2242</a> on 2024-03-06 15:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2387.html">astral-sh/uv#2387</a> on 2024-03-12 17:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../commaai/agnos-builder/pulls/248.html">commaai/agnos-builder#248</a> on 2024-07-18 10:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8085.html">astral-sh/uv#8085</a> on 2024-10-10 12:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jgehrcke">@jgehrcke</a> on 2024-10-10 12:15</div>
            <div class="timeline-body"><p>Great thread. I came here because I want to install dependencies in CI using <code>uv sync</code>.</p>
<p>Do we want to support <code>--system</code> for <code>uv sync</code>? I am proposing this here: https://github.com/astral-sh/uv/issues/8085</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../kedro-org/kedro/issues/4713.html">kedro-org/kedro#4713</a> on 2025-05-29 04:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ramchandra-st">@ramchandra-st</a> on 2025-08-26 08:27</div>
            <div class="timeline-body"><p>Thank you, @henryiii; your solution worked for me as well.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:56 UTC
    </footer>
</body>
</html>
