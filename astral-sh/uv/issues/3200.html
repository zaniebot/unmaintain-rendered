<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv doesn't reinstall editable package when non-editable package is requested - astral-sh/uv #3200</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv doesn't reinstall editable package when non-editable package is requested</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3200">#3200</a>
        opened by <a href="https://github.com/danielhollas">@danielhollas</a>
        on 2024-04-22 21:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/danielhollas">@danielhollas</a> on 2024-04-22 21:15</div>
            <div class="timeline-body"><p>Consider the following sequence</p>
<pre><code class="language-console">$ git clone https://github.com/aiidateam/aiida-core &amp;&amp; cd aiida-core
$ uv venv --seed
$ uv pip install --no-deps -e .
   Built file:///home/hollas/atmospec/aiida-core                                                                                                                                                                   Built 1 editable in 170ms
Resolved 1 package in 0.71ms
Installed 1 package in 1ms
 + aiida-core==2.5.1.post0 (from file:///home/hollas/atmospec/aiida-core)
</code></pre>
<p>Running editable install for the second time re-installs the package, which is nice:</p>
<pre><code class="language-console">$ uv pip install --no-deps -e .
Built 1 editable in 183ms
Resolved 1 package in 0.93ms
Installed 1 package in 4ms
 - aiida-core==2.5.1.post0 (from file:///home/hollas/atmospec/aiida-core)
 + aiida-core==2.5.1.post0 (from file:///home/hollas/atmospec/aiida-core)
</code></pre>
<p>However, trying to install the package in non-editable mode does not re-install it</p>
<pre><code class="language-console">$ uv pip install --no-deps .
Resolved 1 package in 1ms
Audited 1 package in 0.04ms
</code></pre>
<p>uv version 0.1.36</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-23 13:20</div>
            <div class="timeline-body"><p>Hmm interesting. Makes sense to force a reinstall here I suppose.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2024-04-23 13:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danielhollas">@danielhollas</a> on 2024-04-23 14:22</div>
            <div class="timeline-body"><p>My understanding was that while the editable mode generally tries to emulate the actual installation, it is not guaranteed to be perfect so I think reinstalling is the only correct option here. Citing from <a href="https://peps.python.org/pep-0660/#terminology-and-goals">PEP 660</a></p>
<blockquote>
<p>Depending on the way build backends implement this specification, some minor differences may be visible such as the presence of additional files that are in the source tree and would not be part of a regular install. Build backends are encouraged to document such potential differences.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by @charliermarsh on 2024-04-23 18:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-04-23 18:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-23 18:12</div>
            <div class="timeline-body"><p>I'll label it as a bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-04-23 18:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3219.html">astral-sh/uv#3219</a> on 2024-04-23 18:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-23 19:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:26 UTC
    </footer>
</body>
</html>
