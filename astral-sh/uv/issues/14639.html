<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>working on a prerelease of a package breaks uv for local development - astral-sh/uv #14639</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>working on a prerelease of a package breaks uv for local development</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/14639">#14639</a>
        opened by <a href="https://github.com/Butanium">@Butanium</a>
        on 2025-07-15 22:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Butanium">@Butanium</a></div>
            <div class="timeline-body">Summary
<p>I&#x27;m currently working on my package which has local tag 1.0.0.dev1. No matter which argument I use for <code>--prerelease</code> I get the same error when syncing / running</p>
<pre><code>uv sync --all-extras
error: Failed to generate package metadata for `nnterp @ editable+.`
  Caused by: The build backend returned an error
  Caused by: Call to `setuptools.build_meta.build_editable` failed (exit status: 1)

[stderr]
Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 14, in &lt;module&gt;
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 473, in get_requires_for_build_editable
    return self.get_requires_for_build_wheel(config_settings)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 331, in get_requires_for_build_wheel
    return self._get_build_requires(config_settings, requirements=[])
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 301, in _get_build_requires
    self.run_setup()
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 317, in run_setup
    exec(code, locals())
  File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools/__init__.py&quot;, line 115, in setup
    return distutils.core.setup(**attrs)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools/_distutils/core.py&quot;, line 148, in setup
    _setup_distribution = dist = klass(attrs)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools/dist.py&quot;, line 321, in __init__
    _Distribution.__init__(self, dist_attrs)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools/_distutils/dist.py&quot;, line 309, in __init__
    self.finalize_options()
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools/dist.py&quot;, line 784, in finalize_options
    ep(self)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools_scm/_integration/setuptools.py&quot;, line 123, in infer_version
    _assign_version(dist, config)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools_scm/_integration/setuptools.py&quot;, line 55, in _assign_version
    maybe_version = _get_version(config, force_write_version_files=True)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools_scm/_get_version_impl.py&quot;, line 101, in _get_version
    version_string = _format_version(parsed_version)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools_scm/version.py&quot;, line 442, in format_version
    main_version = _entrypoints._call_version_scheme(
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools_scm/_entrypoints.py&quot;, line 123, in _call_version_scheme
    result = scheme(version)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools_scm/version.py&quot;, line 240, in guess_next_dev_version
    return version.format_next_version(guess_next_version)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools_scm/version.py&quot;, line 188, in format_next_version
    guessed = guess_next(self, *k, **kw)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools_scm/version.py&quot;, line 233, in guess_next_version
    return _modify_version._bump_dev(version) or _modify_version._bump_regex(version)
  File &quot;/mnt/nw/home/c.dumas/.cache/uv/builds-v0/.tmpV69XSH/lib/python3.10/site-packages/setuptools_scm/_modify_version.py&quot;, line 27, in _bump_dev
    raise ValueError(
ValueError: choosing custom numbers for the `.devX` distance is not supported.
 The 1.0.0.dev1 can&#x27;t be bumped
Please drop the tag or create a new supported one ending in .dev0

hint: This usually indicates a problem with the package or the build environment.
</code></pre>
<p>MWE in toml:</p>
<pre><code>[build-system]
requires = [&quot;setuptools&gt;=45&quot;, &quot;setuptools_scm[toml]&gt;=6.2&quot;]
[tool.setuptools_scm]

[project]
dynamic = [&quot;version&quot;]
name = &quot;nnterp&quot;
authors = [
  { name=&quot;Cl√©ment Dumas&quot;, email=&quot;butanium.contact@gmail.com&quot; },
]
description = &quot;Utils and mechanistic interpretability intervensions using nnsight&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.9&quot;
classifiers = [
    &quot;Programming Language :: Python :: 3&quot;,
    &quot;License :: OSI Approved :: MIT License&quot;,
    &quot;Operating System :: OS Independent&quot;,
]
</code></pre>
<p>command:</p>
<pre><code>uv init examples &amp;&amp; cd examples &amp;&amp; git init &amp;&amp; git add . &amp;&amp; git commit -m &quot;Initial commit&quot; &amp;&amp; git tag 1.0.0.dev1
</code></pre>
<p>edit the toml with above and run <code>uv sync</code></p>
Platform
<p>Linux 6.8.0-60-generic x86_64 GNU/Linux</p>
Version
<p>uv 0.7.20</p>
Python version
<p>3.10.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/Butanium">@Butanium</a> on 2025-07-15 22:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-15 22:27</div>
            <div class="timeline-body"><p>Hi again!</p>
<p>The error</p>
<pre><code>ValueError: choosing custom numbers for the `.devX` distance is not supported.
 The 1.0.0.dev1 can&#x27;t be bumped
</code></pre>
<p>comes from setuptools, not uv. I&#x27;m not sure what their restriction is, but I don&#x27;t think it&#x27;s uv&#x27;s fault?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">external</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-15 22:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Butanium">@Butanium</a> on 2025-07-15 23:22</div>
            <div class="timeline-body"><p>can confrim that it&#x27;s from them! sorry about that, I got confused as I had some struggle installing <code>nnsight 0.5.dev8</code> with uv while pip would work (I did figure out the pre-release arg at some point).</p>
<p>For future reference, it&#x27;s a problem about using <code>dev</code> in the tag, as stated in the error.... <a href="https://github.com/pypa/setuptools-scm/issues/1040">pypa/setuptools-scm#1040</a>
sorry for the incovenience and thanks zanieb!!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Butanium">@Butanium</a> on 2025-07-15 23:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Butanium">@Butanium</a> on 2025-07-15 23:24</div>
            <div class="timeline-body"><p>@zanieb I deleted my comment in <a href="https://github.com/astral-sh/uv/issues/12589">astral-sh/uv#12589</a>#issuecomment-3075900912</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-16 04:28</div>
            <div class="timeline-body"><p>No problem, thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:39:26 UTC
    </footer>
</body>
</html>
