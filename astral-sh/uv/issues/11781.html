<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv venv` sources `.venv/bin/activate` on fish, when it should be sourcing `.venv/bin/activate.fish` - astral-sh/uv #11781</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv venv</code> sources <code>.venv/bin/activate</code> on fish, when it should be sourcing <code>.venv/bin/activate.fish</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11781">#11781</a>
        opened by <a href="https://github.com/beaumccartney">@beaumccartney</a>
        on 2025-02-25 20:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/beaumccartney">@beaumccartney</a></div>
            <div class="timeline-body">Summary
<p><code>.venv/bin/activate</code> is a bash script, and in fact the script states that it must be sourced from bash. More generally the script source needs to be decided based on the shell (though idk if this behavior is incorrect on other shells)</p>
Platform
<p>Darwin 24.3.0 arm64</p>
Version
<p>uv 0.6.3 (Homebrew 2025-02-24)</p>
Python version
<p>Python 3.9.21</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/beaumccartney">@beaumccartney</a> on 2025-02-25 20:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-25 20:25</div>
            <div class="timeline-body"><p>We don&#x27;t source the file for you, is the complaint that we recommend the wrong file?</p>
<p>This is already covered in https://docs.astral.sh/uv/pip/environments/#using-a-virtual-environment</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/beaumccartney">@beaumccartney</a> on 2025-02-25 23:02</div>
            <div class="timeline-body"><p>Ahh pardon me, I misread the output.</p>
<p>Recommending the correct file would be a nice touch.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-25 23:08</div>
            <div class="timeline-body"><p>Doesn&#x27;t it?</p>
<p>https://github.com/astral-sh/uv/blob/239f3d76b9061ae9fd6d9290831af019a24c901a/crates/uv/src/commands/venv.rs#L393-L420</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-25 23:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-25 23:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/beaumccartney">@beaumccartney</a> on 2025-02-25 23:58</div>
            <div class="timeline-body"><p>oh weird</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/92300b06-c1c4-426b-a39f-174e05e94245"></p>
<p>I haven&#x27;t changed my login shell so <code>$SHELL</code> is still zsh but I am working from fish.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-26 00:27</div>
            <div class="timeline-body"><p>I see. I&#x27;m not sure how we would detect the shell in that case :/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/beaumccartney">@beaumccartney</a> on 2025-02-26 01:30</div>
            <div class="timeline-body"><p>Fair enough</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/beaumccartney">@beaumccartney</a> on 2025-02-26 01:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pquentin">@pquentin</a> on 2025-03-03 07:26</div>
            <div class="timeline-body"><p>I also ended up in that case. The recommendations from Hynek and Julia Evans + the rewrite in Rust motivated me to try it, and I used chsh to switch. I also use Starship. I have no idea what a login shell is and don&#x27;t know why <code>SHELL</code> is still set to zsh.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:37:29 UTC
    </footer>
</body>
</html>
