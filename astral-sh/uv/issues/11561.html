<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Installing local packages - astral-sh/uv #11561</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Installing local packages</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11561">#11561</a>
        opened by <a href="https://github.com/Spacerulerwill">@Spacerulerwill</a>
        on 2025-02-16 19:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Spacerulerwill">@Spacerulerwill</a> on 2025-02-16 19:05</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I have the following setup:</p>
<pre><code>project/
  common/
    __init__.py
    pyproject.toml
  main/
    main.py
    pyproject.toml
</code></pre>
<p>common's __init__,py is empty and pyproject.toml has the default generated for the uv init command. main/main.py contains <code>import common</code> and it's pyproject.toml looks like this:</p>
<pre><code>[project]
name = &quot;main&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
    &quot;common @ file:///${PROJECT_ROOT}/../common&quot;
]
</code></pre>
<p>with my working directory as <code>main</code>, I try and run <code>uv run main.py</code> only to get:</p>
<pre><code>Traceback (most recent call last):
  File &quot;main/main.py&quot;, line 1, in &lt;module&gt;
    import common
ModuleNotFoundError: No module named 'common'
</code></pre>
<p>I have inspected my uv virtual environment and in <code>.venv/lib/python3.12/site-packages</code> I can see the package metadata folder <code>common-0.1.0.dist-info</code> but not the folder for the package itself (as would appear when installing a pip package like pypi package repository. If I copy my common source code into  <code>.venv/lib/python3.12/site-packages</code> the import works. Why does it not do this already and is there a way to make it? The only way I can see to get around this is just to just add <code>project</code> above my to my python import path. Not an ideal solution. I also will encounter intellisense problems when opening the <code>main</code> folder as root folder in my editor instead of the <code>project</code> folder.</p>
<p>I am effectively trying to emulate how you can have adjacent crates in a rust project that can import things from eachother.</p>
<p>Anyway I can achieve this??</p>
<h3>Platform</h3>
<p>Linux 6.8.0-53-generic x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>0.5.31</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @Spacerulerwill on 2025-02-16 19:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-16 19:07</div>
            <div class="timeline-body"><p>A few things:</p>
<ol>
<li>If you ran <code>uv init common</code>, you probably want to <code>rm -rf common</code> and then <code>uv init common --lib</code> to make sure that it creates a library you can import from.</li>
<li>I would suggest using workspaces for this instead of <code>${PROJECT_ROOT}</code>, which isn't really recommended. So in <code>main/pyproject.toml</code>:</li>
</ol>
<pre><code class="language-toml">[project]
name = &quot;main&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
    &quot;common&quot;
]

[tool.uv.workspace]
members = [&quot;../common&quot;]

[tool.uv.sources]
common = { workspace = true }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Spacerulerwill">@Spacerulerwill</a> on 2025-02-16 21:14</div>
            <div class="timeline-body"><p>Brilliant, it works. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Spacerulerwill on 2025-02-16 21:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Installing local pckages" to "Installing local packages" by @AlexWaygood on 2025-02-16 22:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:00 UTC
    </footer>
</body>
</html>
