<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Failed to install `jupyterlab-widgets==3.0.16` in Windows via symlink - astral-sh/uv #16877</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Failed to install <code>jupyterlab-widgets==3.0.16</code> in Windows via symlink</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16877">#16877</a>
        opened by <a href="https://github.com/nathanjmcdougall">@nathanjmcdougall</a>
        on 2025-11-27 19:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/nathanjmcdougall">@nathanjmcdougall</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Running <code>uv add jupyterlab-widgets==3.0.16 --link-mode=symlink</code> fails on a fresh project on Windows when running without admin permissions.</p>
<h3>Reproduction</h3>
<pre><code>&gt; uv init
&gt; uv add jupyterlab-widgets==3.0.16 --link-mode=symlink
Resolved 2 packages in 32ms
error: Failed to install: jupyterlab_widgets-3.0.16-py3-none-any.whl (jupyterlab-widgets==3.0.16)
  Caused by: failed to symlink file from C:\Users\namc\AppData\Local\uv\cache\archive-v0\EswKn5fxGWjZvCVIQHCBP\jupyterlab_widgets-3.0.16.data\data\share\jupyter\labextensions\@jupyter-widgets\jupyterlab-manager\static\packages_base_lib_index_js-webpack_sharing_consume_default_jquery_jquery.5dd13f8e980fa3c50bfe.js to C:\Users\namc\Temp\pl\.venv\Lib\site-packages\jupyterlab_widgets-3.0.16.data\data\share\jupyter\labextensions\@jupyter-widgets\jupyterlab-manager\static\packages_base_lib_index_js-webpack_sharing_consume_default_jquery_jquery.5dd13f8e980fa3c50bfe.js: A required privilege is not held by the client. (os error 1314)
</code></pre>
<ul>
<li>I have Windows developer mode enabled to enable symlinks.</li>
<li>I've tried <code>uv cache clean jupyterlab-widgets</code>.</li>
<li>I've tried setting a different to the cache directory via <code>uv add jupyterlab-widgets==3.0.16 --link-mode=symlink --cache-dir=&quot;C:/uc&quot;</code>, with the same issue.</li>
</ul>
<h3>Other things that do work</h3>
<ul>
<li>Running with admin permissions is successful.</li>
<li>Installing the previous version of <code>jupyterlab-widgets==3.0.15</code> works fine.</li>
<li>Using <code>--no-cache</code>, <code>--link-mode=copy</code> and <code>--link-mode=hardlink</code> are all successful.</li>
</ul>
<h3>Considerations</h3>
<p>The long relative path in the package <code>jupyter\labextensions\@jupyter-widgets\jupyterlab-manager\static\packages_base_lib_index_js-webpack_sharing_consume_default_jquery_jquery.5dd13f8e980fa3c50bfe.js</code> is a bit suspicious. Actually, there's an even longer one:  <code>jupyter\labextensions\@jupyter-widgets\jupyterlab-manager\static\vendors-node_modules_d3-color_src_color_js-node_modules_d3-format_src_defaultLocale_js-node_m-09b215.2643c43f22ad111f4f82.js.map</code>.</p>
<p><code>jupyterlab-widgets</code> is a required dependency of <code>ipywidgets</code>, and shares <a href="https://github.com/jupyter-widgets/ipywidgets">the same git repo</a>.</p>
<p>I am using symlinks as a workaround to #11134.</p>
<h3>Platform</h3>
<p>Windows 11 Enterprise 24H2</p>
<h3>Version</h3>
<p>uv 0.9.13 (7ca92dcf6 2025-11-26)</p>
<h3>Python version</h3>
<p>Python 3.13.2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @nathanjmcdougall on 2025-11-27 19:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-11-28 05:46</div>
            <div class="timeline-body"><p>os error 1314 seems related to missing <code>SeCreateSymbolicLinkPrivilege</code> which Admin has by default on windows.</p>
<p>The fact that it work before the &quot;long path length&quot; added in 3.0.16 is a good hint. This makes me think that the non-admin symlink support added starting in <a href="https://blogs.windows.com/windowsdeveloper/2016/12/02/symlinks-windows-10/">Windows 10 Insiders build 14972</a> doesn't work for path lengths above 260 (e.g. without longpaths being enabled) or simply behaves differently after 260 is reached.</p>
<p>If possible, can you try giving your non-admin user temporary <code>SeCreateSymbolicLinkPrivilege</code>?</p>
<p>You can do so via launching <code>Edit Group Policy</code> (<code>gpedit.msc</code>) then under <code>Computer Configuration\Windows Settings\Security Settings\Local Policies\User Rights Assignment\Create symbolic links</code> --&gt; Add your user and a reboot is likely needed. Then try re-running the uv command once again.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by @samypr100 on 2025-11-28 05:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nathanjmcdougall">@nathanjmcdougall</a> on 2025-11-28 20:35</div>
            <div class="timeline-body"><p>I don't have authorization to readily modify the group policy at my organization. However, I was able to reproduce the issue on my personal Windows 10 Home 21H1 installation (build 19043.1165).</p>
<p>I used <code>ntrights</code> to give myself the <code>SeCreateSymbolicLinkPrivilege</code> permission, restarted, and got past the permissions error. Instead I've got os error 87 - which I'd be tempted to pin down to the fact that this is a fairly old Windows build.</p>
<pre><code>C:\Users\Nathan McDougall\Documents\Temp&gt; whoami /priv

PRIVILEGES INFORMATION
----------------------

Privilege Name                Description                          State
============================= ==================================== ========
SeShutdownPrivilege           Shut down the system                 Disabled
SeChangeNotifyPrivilege       Bypass traverse checking             Enabled
SeUndockPrivilege             Remove computer from docking station Disabled
SeIncreaseWorkingSetPrivilege Increase a process working set       Disabled
SeTimeZonePrivilege           Change the time zone                 Disabled
SeCreateSymbolicLinkPrivilege Create symbolic links                Disabled
</code></pre>
<pre><code>PS C:\Users\Nathan McDougall\Documents\Temp&gt; ~/.local/bin/uv add jupyterlab-widgets==3.0.16 --link-mode=symlink
Resolved 2 packages in 2.06s
error: Failed to install: jupyterlab_widgets-3.0.16-py3-none-any.whl (jupyterlab-widgets==3.0.16)
  Caused by: failed to symlink file from C:\Users\Nathan McDougall\AppData\Local\uv\cache\archive-v0\WE7CiwuqXvBGgXoKsJ0VW\jupyterlab_widgets-3.0.16.data\data\share\jupyter\labextensions\@jupyter-widgets\jupyterlab-manager\static\packages_base_lib_index_js-webpack_sharing_consume_default_jquery_jquery.5dd13f8e980fa3c50bfe.js to C:\Users\Nathan McDougall\Documents\Temp\.venv\Lib\site-packages\jupyterlab_widgets-3.0.16.data\data\share\jupyter\labextensions\@jupyter-widgets\jupyterlab-manager\static\packages_base_lib_index_js-webpack_sharing_consume_default_jquery_jquery.5dd13f8e980fa3c50bfe.js: The parameter is incorrect. (os error 87)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-11-30 01:27</div>
            <div class="timeline-body"><p>@nathanjmcdougall Thanks for the details. If possible, could you try the uv build from <a href="https://github.com/astral-sh/uv/actions/runs/19793348707?pr=16894">this PR</a> to see if it resolves the os error 87 issue (and possibly the os error 1314)?</p>
<p>You can download the binaries for example from <a href="https://github.com/astral-sh/uv/actions/runs/19793348707/artifacts/4715445963">artifacts-x86_64-pc-windows-msvc</a> and use uv binary instead (assuming your windows system is x86_64).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nathanjmcdougall">@nathanjmcdougall</a> on 2025-11-30 08:04</div>
            <div class="timeline-body"><p>Unfortunately the os error 87 persists on the Windows 10 Home machine. I'll try the Windows 11 Enterprise machine next.</p>
<pre><code class="language-Powershell"> C:\Users\Nathan McDougall\Documents\Temp&gt; ~\Downloads\artifacts-x86_64-pc-windows-msvc\uv-x86_64-pc-windows-msvc\uv self version
uv 0.9.13 (b93a15297 2025-11-29)
</code></pre>
<pre><code>C:\Users\Nathan McDougall\Documents\Temp&gt; ~\Downloads\artifacts-x86_64-pc-windows-msvc\uv-x86_64-pc-windows-msvc\uv add jupyterlab-widgets==3.0.16 --link-mode=symlink
Resolved 2 packages in 103ms
Uninstalled 1 package in 19ms
error: Failed to install: jupyterlab_widgets-3.0.16-py3-none-any.whl (jupyterlab-widgets==3.0.16)
  Caused by: failed to symlink file from C:\Users\Nathan McDougall\AppData\Local\uv\cache\archive-v0\WE7CiwuqXvBGgXoKsJ0VW\jupyterlab_widgets-3.0.16.data\data\share\jupyter\labextensions\@jupyter-widgets\jupyterlab-manager\static\packages_base_lib_index_js-webpack_sharing_consume_default_jquery_jquery.5dd13f8e980fa3c50bfe.js to C:\Users\Nathan McDougall\Documents\Temp\.venv\Lib\site-packages\jupyterlab_widgets-3.0.16.data\data\share\jupyter\labextensions\@jupyter-widgets\jupyterlab-manager\static\packages_base_lib_index_js-webpack_sharing_consume_default_jquery_jquery.5dd13f8e980fa3c50bfe.js: The parameter is incorrect. (os error 87)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nathanjmcdougall">@nathanjmcdougall</a> on 2025-11-30 08:20</div>
            <div class="timeline-body"><p>On the Windows 11 Enterprise machine, getting the same os error 1314.</p>
<pre><code>C:\Users\namc\Temp\pl&gt; ~\Downloads\artifacts-x86_64-pc-windows-msvc\uv-x86_64-pc-windows-msvc\uv self version
uv 0.9.13 (17cd72c5d 2025-11-29)
</code></pre>
<p>(N.B. hash is different - I find that surprising).</p>
<pre><code>C:\Users\namc\Temp\pl&gt;  ~\Downloads\artifacts-x86_64-pc-windows-msvc\uv-x86_64-pc-windows-msvc\uv add jupyterlab-widgets==3.0.16 --link-mode=symlink
Using CPython 3.13.2
Creating virtual environment at: .venv
Resolved 2 packages in 313ms
error: Failed to install: jupyterlab_widgets-3.0.16-py3-none-any.whl (jupyterlab-widgets==3.0.16)
  Caused by: failed to symlink file from C:\Users\namc\AppData\Local\uv\cache\archive-v0\EswKn5fxGWjZvCVIQHCBP\jupyterlab_widgets-3.0.16.data\data\share\jupyter\labextensions\@jupyter-widgets\jupyterlab-manager\static\packages_base_lib_index_js-webpack_sharing_consume_default_jquery_jquery.5dd13f8e980fa3c50bfe.js to C:\Users\namc\Temp\pl\.venv\Lib\site-packages\jupyterlab_widgets-3.0.16.data\data\share\jupyter\labextensions\@jupyter-widgets\jupyterlab-manager\static\packages_base_lib_index_js-webpack_sharing_consume_default_jquery_jquery.5dd13f8e980fa3c50bfe.js: A required privilege is not held by the client. (os error 1314)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-11-30 13:58</div>
            <div class="timeline-body"><blockquote>
<p>(N.B. hash is different - I find that surprising).</p>
</blockquote>
<p>Running it with <code>-v</code> will tell you what version it actually ran with.</p>
<p><code>path\to\uv add jupyterlab-widgets==3.0.16 --link-mode=symlink -v</code></p>
<p>Its possible you may need to add the binaries to the PATH in some cases, although not sure of the specifics on the policies.</p>
<p>Commit b93a152979a9aae80ba2df52fdfb01f16fdb6ca5 would be the correct build.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-11-30 19:18</div>
            <div class="timeline-body"><p>@nathanjmcdougall I was able to reproduce the errors on my windows 11 25H2 system and could confirm #16894 fixed the issues. I don't have an install as old as Windows 10 21H1 to confirm how far back the issue is fixed, but theoretically it should fix it starting from Windows 10 1903 assuming two things are enabled:</p>
<ol>
<li>Developer Mode is enabled</li>
<li><code>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\FileSystem@LongPathsEnabled</code> dword is set to <code>1</code>.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nathanjmcdougall">@nathanjmcdougall</a> on 2025-11-30 20:37</div>
            <div class="timeline-body"><p>I can confirm the fix was successful on the Windows 11 24H2 machine, once I set <code>LongPathsEnabled</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @konstin on 2025-12-01 08:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-01 08:20</div>
            <div class="timeline-body"><p>The docs suggest that using the <code>\\?\</code> prefix works around the MAX_PATH limitation, if that works we should use that, if it doesn't, we should improve the error message to hint at enabling long paths.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-12-01 12:45</div>
            <div class="timeline-body"><blockquote>
<p>The docs suggest that using the <code>\\?\</code> prefix works around the MAX_PATH limitation, if that works we should use that, if it doesn't, we should improve the error message to hint at enabling long paths.</p>
</blockquote>
<p>Agreed on improving the error message as well, although enabling long paths doesn't work without the manifest changes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-12-01 20:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:33:33 UTC
    </footer>
</body>
</html>
