<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Default to `__token__` during `uv publish` if no username value is provided - astral-sh/uv #17608</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Default to <code>__token__</code> during <code>uv publish</code> if no username value is provided</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/17608">#17608</a>
        opened by <a href="https://github.com/xavdid">@xavdid</a>
        on 2026-01-19 09:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/xavdid">@xavdid</a></div>
            <div class="timeline-body">Summary
<p>When publishing packages with <code>uv publish</code>, there are interactive inputs for collecting credentials.</p>
<pre><code>% uv publish
Publishing 2 files https://upload.pypi.org/legacy/
Enter username (&#x27;__token__&#x27; if using a token): some_username
Enter password: &lt;password input&gt;
...
</code></pre>
<p>Everything works if I type <code>__token__</code> and paste my token, but I find myself typing <code>__token__</code> a lot.</p>
<p>It would be nice if the username value defaulted to <code>__token__</code> if no input was provided. So publishing would be:</p>
<pre><code>% uv publish
Publishing 2 files https://upload.pypi.org/legacy/
Enter username (&#x27;__token__&#x27; if using a token): &lt;enter&gt;
Enter password: &lt;paste&gt; &lt;enter&gt;
...
</code></pre>
<p>I tried running <code>uv publish --username __token__</code>, expecting it to prompt me for my token, but it looks like that expected the token to be available in the env or as an arg also, so the upload starts immediately (and fails with a 403, as expected).</p>
<p>Happy to put a PR up for this! Should be a small change to: https://github.com/astral-sh/uv/blob/abd6b8f56c6a48783550d776f22695999c19399a/crates/uv/src/commands/publish.rs#L503</p>
Example
<p>It would be smoother to publish packages locally and interactively!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/xavdid">@xavdid</a> on 2026-01-19 09:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:41:34 UTC
    </footer>
</body>
</html>
