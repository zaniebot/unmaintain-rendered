<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use `-v`, `-vv`, `-vvv` to configure tracing levels - astral-sh/uv #1569</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use `-v`, `-vv`, `-vvv` to configure tracing levels</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/1569">#1569</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-02-17 04:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-17 04:07</div>
            <div class="timeline-body"><p>Right now, as mentioned in #1567, we show a <em>lot</em> of output in <code>-v</code>.</p>
<p>We should have <code>-v</code> be more user friendly and use <code>-vv</code> and <code>-vvv</code> to dump more verbose tracing information.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2024-02-17 04:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">tracing</span> added by @zanieb on 2024-02-17 04:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/olivierlefloch">@olivierlefloch</a> on 2024-02-18 23:46</div>
            <div class="timeline-body"><p>I may be missing something, but related to this, it would be great if the <code>-vvv</code> level also displayed calls to <code>trace</code>, for example to debug</p>
<p>https://github.com/astral-sh/uv/issues/1458</p>
<p>I'd like to be able to see the <code>method</code> that <code>fresh_request</code> invoked. I'm not familiar enough with <code>ruff</code>'s tracing/logging, but perhaps</p>
<p>https://github.com/astral-sh/uv/blob/3b70b42f160eee8a0dbb74436cccb0f6e8ea8979/crates/uv-client/src/cached_client.rs#L389</p>
<p>could be logged?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-18 23:53</div>
            <div class="timeline-body"><p>You can control the log level during verbose mode with e.g. <code>RUST_LOG=trace</code> for now.</p>
<p>I totally agree though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1670.html">astral-sh/uv#1670</a> on 2024-02-19 00:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/olivierlefloch">@olivierlefloch</a> on 2024-02-19 00:18</div>
            <div class="timeline-body"><p>Thanks for the tip! Actually, that failed when running <code>uv</code> with <code>RUST_LOG=trace python -m uv ‚Ä¶</code> but worked with <code>RUST_LOG=trace uv ‚Ä¶</code> üëç</p>
<p>I'd suggest adding it to <code>CONTRIBUTING.md</code> as that's where I imagined I might be able to find this information: https://github.com/astral-sh/uv/pull/1670</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-19 00:22</div>
            <div class="timeline-body"><p>The <code>python -m ...</code> issue should be fixed by #1667</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1710.html">astral-sh/uv#1710</a> on 2024-02-19 18:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @zanieb on 2024-02-19 18:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1897.html">astral-sh/uv#1897</a> on 2024-02-23 04:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2146.html">astral-sh/uv#2146</a> on 2024-03-04 07:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/4346.html">astral-sh/uv#4346</a> on 2024-06-18 01:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5209.html">astral-sh/uv#5209</a> on 2024-07-19 14:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5580.html">astral-sh/uv#5580</a> on 2024-07-30 14:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/11698.html">astral-sh/uv#11698</a> on 2025-02-21 17:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-02-24 17:20</div>
            <div class="timeline-body"><p>Ok so, for context, the tracing log filter levels are:</p>
<pre><code>none &lt; error &lt; warn &lt; info &lt; debug &lt; trace</code></pre>
<p>Currently:</p>
<ul>
<li><code>&lt;no flag&gt; =&gt; none</code></li>
<li><code>-v =&gt; uv=debug</code> (enable debug logs, but only from uv crates, e.g. <em>not</em> reqwest)</li>
<li><code>-vv</code> is just more formatting/details on <code>uv=debug</code>?</li>
<li><code>RUST_LOG=&quot;...&quot;</code> is available to override these more fine-grain</li>
</ul>
<p>In our code, we use <code>warn</code>, <code>debug</code>, and <code>trace</code>.
We basically don't use <code>error</code> and <code>info</code> at all.</p>
<p>Not using <code>error</code> is basically fine, but we want to expand our use of <code>info</code> (migrating some existing debugs/traces to higher log levels).</p>
<p>Naively/greenfield I would want to do <code>-v =&gt; error</code>, <code>-vv =&gt; warn</code>, etc. But I don't think that's worthwhile.</p>
<p>I think <code>-v =&gt; info</code>, <code>-vv = debug</code>, <code>-vvv =&gt; trace</code> would be reasonable.</p>
<p>I think starting at <code>-v =&gt; warn</code> might be reasonable though?</p>
<p>Unclear if we still want the filter to only be &quot;uv&quot; (I guess sure?).</p>
<p>Unclear if we want this &quot;extra formatting&quot; mode to still be a thing (I'm ambivalent).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-24 17:56</div>
            <div class="timeline-body"><p>I think <code>-v =&gt; info</code> etc. makes sense in the long run, but I think we need to start with:</p>
<p><code>-v =&gt; debug (uv-only)</code>, <code>-vv =&gt; trace (uv-only)</code>, <code>-vvv =&gt; trace (all crates)</code></p>
<p>We have a lot of work to do before there's a proper <code>info</code> layer and I'm not sure we should block this work on accomplishing that. <code>-v</code> needs to continue to get us logs that are usable for resolving issue reports.</p>
<p>Once we elevate more logs to info, we can shift it all over one?</p>
<p>Regarding the nested formatting, I'd move that to an environment variable. It feels weird in <code>-v</code> (to me).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-02-24 18:19</div>
            <div class="timeline-body"><p>Sounds good to me!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/11758.html">astral-sh/uv#11758</a> on 2025-02-24 21:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Gankra on 2025-02-28 23:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:22 UTC
    </footer>
</body>
</html>
