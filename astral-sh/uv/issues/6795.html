<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wrong `python_full_version` in `uv.lock` - astral-sh/uv #6795</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Wrong <code>python_full_version</code> in <code>uv.lock</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6795">#6795</a>
        opened by <a href="https://github.com/TheRealBecks">@TheRealBecks</a>
        on 2024-08-29 07:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/TheRealBecks">@TheRealBecks</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>I have the following <code>pyproject.toml</code>:</p>
<pre><code>[project]
name = &quot;lightning&quot;
description = &quot;Ansible Network Automation for Cisco IOS, Cisco NX-OS and Arista EOS&quot;
readme = &quot;README.md&quot;
version = &quot;1.0.0&quot;
requires-python = &quot;==3.12&quot;
dependencies = [
  &quot;ansible&quot;,
  &quot;ansible-core&quot;,
  &quot;ansible-navigator&quot;,
  &quot;ansible-pylibssh&quot;,
  &quot;hvac&quot;,
  &quot;jmespath&quot;,
  &quot;netaddr&quot;,
  &quot;paramiko&quot;,
  &quot;pyavd[ansible]&quot;,
]

[project.optional-dependencies]
dev = [
  &quot;icecream&quot;,
  &quot;ruff==0.6.2&quot;,
]
</code></pre>
<p><code>requires-python</code> is hard coded to version <code>==3.12</code>.</p>
<p>With <code>uv sync</code> (without any extras to be installed) a <code>uv.lock</code> has been created with the following data in the first few lines:</p>
<pre><code>version = 1
requires-python = &quot;==3.12&quot;
resolution-markers = [
    &quot;python_full_version &lt; '3.13'&quot;,
    &quot;python_full_version &gt;= '3.13'&quot;,
]
</code></pre>
<p>The second line of <code>python_full_version</code> looks wrong as it declares the version to be <code>&gt;= '3.13'</code> while the first one says <code>&lt; '3.13'</code>.</p>
<p>I used <code>uv</code> in version <code>0.3.5</code> on Opensuse Tumbleweed Linux.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TheRealBecks">@TheRealBecks</a> on 2024-08-29 07:28</div>
            <div class="timeline-body"><p>I also tried version <code>0.4.0</code>, but that does not change the <code>python_full_version</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-29 12:53</div>
            <div class="timeline-body"><p><code>resolution-markers</code> is effectively internal bookkeeping for the resolver. Are you seeing an incorrect resolution?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-08-29 12:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-29 13:56</div>
            <div class="timeline-body"><p>Generally it's expected for these markers to be disjoint. See the documentation on forking at https://docs.astral.sh/uv/reference/resolver-internals/#forking</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TheRealBecks">@TheRealBecks</a> on 2024-08-29 14:08</div>
            <div class="timeline-body"><p>I requested Python 3.12 (12!), but the <code>resolution-markers</code> are:</p>
<ol>
<li><code>&lt; '3.13'</code> --&gt; That's correct for version 3.12</li>
<li><code>&gt;= '3.13'</code> --&gt; That's <strong>wrong</strong> for version 3.12. I expected <code>&gt;= '3.12'</code></li>
</ol>
<p>So <strong>I think</strong> that's wrong? ðŸ˜€</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-29 14:09</div>
            <div class="timeline-body"><p>That's still ok! It's internal state that represents how we resolved the dependencies. It doesn't effect the outcome when you run <code>uv sync</code> or similar.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TheRealBecks">@TheRealBecks</a> on 2024-08-29 14:11</div>
            <div class="timeline-body"><p>Okay, if you say so then this issue/question can be closed! ðŸ˜€</p>
<p>Thanks a lot for the fast response!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @TheRealBecks on 2024-08-29 14:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-29 17:00</div>
            <div class="timeline-body"><p>Related #6150</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:26:40 UTC
    </footer>
</body>
</html>
