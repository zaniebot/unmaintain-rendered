<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>no error on `uv sync --upgrade-package` when specifying a package that isn't included in the project's dependencies - astral-sh/uv #7805</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>no error on `uv sync --upgrade-package` when specifying a package that isn't included in the project's dependencies</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/7805">#7805</a>
        opened by <a href="https://github.com/DetachHead">@DetachHead</a>
        on 2024-09-30 07:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/DetachHead">@DetachHead</a> on 2024-09-30 07:05</div>
            <div class="timeline-body"><p>when running <code>uv sync --upgrade-package</code> with a package that is not present in the project's dependencies (or a transient dependency in the lockfile), uv should report an error</p>
<pre><code>&gt; uv sync --upgrade-package asdfasdf
Resolved 139 packages in 2.06s
Audited 139 packages in 1ms
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2024-09-30 09:20</div>
            <div class="timeline-body"><p>I wanted to report a similar bug for <code>uv sync --no-build-isolation-package foo</code>, so I'll just mention it here. Same issue, uv could report at least a warning for this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-30 12:48</div>
            <div class="timeline-body"><p>I think we can do these.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-09-30 12:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2024-10-01 19:26</div>
            <div class="timeline-body"><p>I found an unintentional feature, I'll share for the fun of it.</p>
<p><code>uv lock -P notexist</code> will update the lockfile with trivial enforced version updates such as local path dependencies and the own workspace.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-23 03:47</div>
            <div class="timeline-body"><p>My only concern is that this is technically a breaking change, since you could in theory rely on this (e.g., maybe someone <em>always</em> passes <code>--upgrade-package foo</code> to upgrade regardless of whether <code>foo</code> is in the tree).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DetachHead">@DetachHead</a> on 2024-11-23 06:27</div>
            <div class="timeline-body"><p>imo it's far more likely that it's a mistake most of the time. when tools silently ignore things like this it allows mistakes to go undetected potentially causing even bigger problems in the future. i guess if people rely on it there can be an option to disable the error which can be suggested to the user in the error message.</p>
<p>i strongly believe it's always better to show the user an error to make sure they're aware of a potential problem and giving them the option to suppress instead of just silently ignoring it just on the off chance that it's intentional.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qiuxiaomu">@qiuxiaomu</a> on 2025-05-16 13:05</div>
            <div class="timeline-body"><p>I would also like to raise that when we do <code>uv sync --upgrade</code> or <code>uv lock --upgrade</code>, the upgrade is silently done and no message is present to user to signal which packages are (not) upgraded. I thought that the command didn't work but when I check the <code>uv.lock</code> I read that the packages were upgraded (checking them one by one could also be troublesome).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/14370.html">astral-sh/uv#14370</a> on 2025-06-30 23:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnthagen">@johnthagen</a> on 2025-07-01 01:26</div>
            <div class="timeline-body"><p>Wanted to explicitly list that this same issue exists for <code>uv lock --upgrade-package</code> as well since we've merged #14370 into this issue.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:22 UTC
    </footer>
</body>
</html>
