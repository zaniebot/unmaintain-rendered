<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mismatch between documentation and code comment on PyPI Index priority - astral-sh/uv #2990</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Mismatch between documentation and code comment on PyPI Index priority</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2990">#2990</a>
        opened by <a href="https://github.com/tdejager">@tdejager</a>
        on 2024-04-11 12:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tdejager">@tdejager</a></div>
            <div class="timeline-body"><p>The code in <code>crates/distribution-types/src/index_url.rs:167</code> says:</p>
<pre><code>/// The index locations to use for fetching packages.
///
/// By default, uses the PyPI index.
///
/// &quot;pip treats all package sources equally&quot; (&lt;<a href="https://github.com/pypa/pip/issues/8606">pypa/pip#8606</a>#issuecomment-788754817&gt;),
/// and so do we, i.e., you can&#x27;t rely that on any particular order of querying indices.
///
/// If the fields are none and empty, ignore the package index, instead rely on local archives and
/// caches.
///
/// From a pip perspective, this type merges `--index-url`, `--extra-index-url`, and `--find-links`.
</code></pre>
<p>Hower the <code>PIP_COMPATIBILITY.md</code> mentions:</p>
<blockquote>
<p>In both uv and pip, users can specify multiple package indexes from which to search for the available versions of a given package. However, uv and pip differ in how they handle packages that exist on multiple indexes.
For example, imagine that a company publishes an internal version of requests on a private index (--extra-index-url), but also allows installing packages from PyPI by default. In this case, the private requests would conflict with the public <a href="https://pypi.org/project/requests/">requests</a> on PyPI.
When uv searches for a package across multiple indexes, it will iterate over the indexes in order (preferring the --extra-index-url over the default index), and stop searching as soon as it finds a match. This means that if a package exists on multiple indexes, uv will limit its candidate versions to those present in the first index that contains the package.
etc.</p>
</blockquote>
<p>I feel like this contradicts each other. I think the code comment is out of date or am I missing something else ðŸ˜„ ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-11 14:06</div>
            <div class="timeline-body"><p>The comment is out-of-date, I&#x27;ll update it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-11 14:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-11 14:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-11 14:06</div>
            <div class="timeline-body"><p>(The compatibility guide is correct.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tdejager">@tdejager</a> on 2024-04-11 15:33</div>
            <div class="timeline-body"><p>Great thank you! :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-11 17:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:30:47 UTC
    </footer>
</body>
</html>
