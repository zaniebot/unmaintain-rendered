<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Second order path dependencies are not handled - astral-sh/uv #2239</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Second order path dependencies are not handled</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2239">#2239</a>
        opened by <a href="https://github.com/adrienball">@adrienball</a>
        on 2024-03-06 12:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/adrienball">@adrienball</a> on 2024-03-06 12:15</div>
            <div class="timeline-body"><p>I am facing an issue with second order path dependencies, which I manage to isolate in a simple example.
Let's consider the following project layout:</p>
<pre><code class="language-console">├── package-1
│   └── setup.py
├── package-2
│   └── setup.py
└── package-3
    └── setup.py
</code></pre>
<p>With the following content:</p>
<p><strong>package-1/setup.py</strong></p>
<pre><code>from setuptools import setup

setup(
    name=&quot;package-1&quot;,
    version=&quot;0.1.0&quot;
)
</code></pre>
<p><strong>package-2/setup.py</strong></p>
<pre><code>from setuptools import setup, os

setup(
    name=&quot;package-2&quot;,
    version=&quot;0.1.0&quot;,
    install_requires=[f&quot;package-1 @ file://{os.getcwd()}/../package-1&quot;],
)
</code></pre>
<p><strong>package-3/setup.py</strong></p>
<pre><code>from setuptools import setup, os

setup(
    name=&quot;package-3&quot;,
    version=&quot;0.1.0&quot;,
    install_requires=[f&quot;package-2 @ file://{os.getcwd()}/../package-2&quot;],
)
</code></pre>
<p>Now if I try to install package-3:</p>
<pre><code class="language-shell">&gt; cd package-3
&gt; uv venv --seed
Using Python 3.9.9 interpreter at: /Library/Frameworks/Python.framework/Versions/3.9/bin/python3
Creating virtualenv at: .venv
 + pip==24.0
 + setuptools==69.1.1
 + wheel==0.42.0
Activate with: source .venv/bin/activate
&gt; uv pip install -e .
   Built file:///Users/###/uv-debug/package-3                                                                                                                                                                                                    Built 1 editable in 1.07s
error: Package `package-1` attempted to resolve via URL: file:///Users/###/uv-debug/package-1. URL dependencies must be expressed as direct requirements or constraints. Consider adding `package-1 @ file:///Users/###/uv-debug/package-1` to your dependencies or constraints file.
</code></pre>
<p>However if I try to install package-2, it works:</p>
<pre><code class="language-shell">&gt; cd package-2
&gt; uv venv --seed
Using Python 3.9.9 interpreter at: /Library/Frameworks/Python.framework/Versions/3.9/bin/python3
Creating virtualenv at: .venv
 + pip==24.0
 + setuptools==69.1.1
 + wheel==0.42.0
Activate with: source .venv/bin/activate
&gt; uv pip install -e .
   Built file:///Users/###/uv-debug/package-2                                                                                                                                                                                                    Built 1 editable in 1.10s
Resolved 2 packages in 1ms
Installed 2 packages in 5ms
 + package-1==0.1.0 (from file:///Users/###/uv-debug/package-1)
 + package-2==0.1.0 (from file:///Users/###/uv-debug/package-2)
</code></pre>
<p>I have no issue if I use <code>pip install -e .</code> instead of <code>uv pip install -e .</code>.</p>
<p>Thanks for your help!</p>
<h2>Environment</h2>
<p>uv 0.1.15
python 3.9.9
MacOS</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-06 13:50</div>
            <div class="timeline-body"><p>Thanks -- this is by design right now as per the error message: we don't respect arbitrary direct URL dependencies, and instead require that they're declared upfront as first-party dependencies. You can track that behavior here: https://github.com/astral-sh/uv/issues/1808.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-06 13:50</div>
            <div class="timeline-body"><p>(Gonna merge into #1808.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-03-06 13:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/adrienball">@adrienball</a> on 2024-03-06 14:30</div>
            <div class="timeline-body"><p>Thanks for your reactivity :)
I'll keep following for potential updates on #1808 then.
Feel free to close this issue if necessary.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:24 UTC
    </footer>
</body>
</html>
