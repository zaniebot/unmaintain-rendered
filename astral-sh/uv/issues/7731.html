<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Depedency with the same name as the project doesn't error - astral-sh/uv #7731</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Depedency with the same name as the project doesn't error</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/7731">#7731</a>
        opened by <a href="https://github.com/2531">@2531</a>
        on 2024-09-27 06:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/2531">@2531</a> on 2024-09-27 06:16</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>If you add a dependency with the same name as the project name, nothing happens. Although this may seem strange, project names are free!
The steps are as follows</p>
<pre><code class="language-bash">uv init ruff
cd ruff
uv add ruff
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add dependency issue" to "Depedency with the same name as the project doesn't error" by @konstin on 2024-09-27 09:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @konstin on 2024-09-27 09:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-27 12:20</div>
            <div class="timeline-body"><p>I guess we should have a dedicated error here? In some strange sense this is correct though... Projects do sometimes have circular dependencies.</p>
<pre><code class="language-toml">[project]
name = &quot;ruff&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
    &quot;ruff&quot;,
]

[tool.uv.sources]
ruff = { workspace = true }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/2531">@2531</a> on 2024-09-27 16:36</div>
            <div class="timeline-body"><p>Yes, after further testing I realized that the dependencies are also not actually added to the environment when the project name is the same as the implicit dependency name. Often we initialize the project before adding the dependencies and it is also unlikely that we are aware of all the implicit dependency names, and when adding the main dependency package, implicit dependencies that have the same name as the project name are not added, which can cause unexpected problems.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2024-09-27 17:14</div>
            <div class="timeline-body"><p>One important use case for circular dependencies is extras, you might want your <code>all</code> extra to depend on your <code>test</code> and <code>dev</code> extra and you would define it as <code>all = [&quot;mypkg[test]&quot;, &quot;mypkg[dev]&quot;]</code>.</p>
<p>But it does seem odd for a project to depend on itself with no additional conditions, if you're already installing the project you don't need to specify you need to install your project for your project to work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/luaa9">@luaa9</a> on 2024-09-28 16:22</div>
            <div class="timeline-body"><p>I ran into a possibly related issue where the directory name is the same as the python dependency.</p>
<p>For example:</p>
<pre><code>uv init lark
cd lark
uv add lark
uv run &lt;Python script using lark&gt;
</code></pre>
<p>The script won't be able to find the module lark</p>
<p>It's understandable if this might be a restriction, but perhaps a note should be  added to the documentation?.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-09-28 19:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7766.html">astral-sh/uv#7766</a> on 2024-09-28 19:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-28 20:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-28 20:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:22 UTC
    </footer>
</body>
</html>
