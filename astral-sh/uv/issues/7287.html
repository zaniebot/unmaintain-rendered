<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upgrade tool Python patch versions automatically on managed Python upgrade - astral-sh/uv #7287</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Upgrade tool Python patch versions automatically on managed Python upgrade</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7287">#7287</a>
        opened by <a href="https://github.com/neutrinoceros">@neutrinoceros</a>
        on 2024-09-11 10:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/neutrinoceros">@neutrinoceros</a> on 2024-09-11 10:36</div>
            <div class="timeline-body"><p>Here's a scenario where I have a tool (say, <code>pre-commit</code>) installed against a uv-managed python interpreter (say 3.12.5) which also happens to be my only uv-managed python 3.12. Trying to upgrade to Python 3.12.6 results in a broken state where Python 3.12.5 is dropped under my tool.</p>
<pre><code class="language-shell">$ uv python install 3.12.5 # important: there must be only point version of 3.12 managed by uv after this command
$ uv tool install pre-commit -p 3.12 --python-preference=only-managed
$ uv tool list
pre-commit v3.8.0
- pre-commit
$ uv python install 3.12 --reinstall
Searching for Python versions matching: Python 3.12
Found existing installation for Python 3.12: cpython-3.12.5-macos-aarch64-none
Installed Python 3.12.6 in 2.44s
 - cpython-3.12.5-macos-aarch64-none
 + cpython-3.12.6-macos-aarch64-none
$ uv tool list
Python interpreter not found at `/Users/clm/Library/Application Support/uv/tools/pre-commit/bin/python3`
</code></pre>
<p>I can fix my tools easily enough by manually re-installing 3.12.5 (in co-existence with 3.12.6), but I can see two approaches to improve the user experience here:</p>
<ul>
<li>avoid uninstalling 3.12.5 (maybe raise a warning), seeing that it's used by tools (or at least ask for confirmation)</li>
<li>bring all tools installed against 3.12.5 along the ride (this may not be doable in the general case but I confess it was what I <em>expected</em> to happen, but not necessarily silently)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-11 11:41</div>
            <div class="timeline-body"><p>Thanks for the report!</p>
<p>Related:</p>
<ul>
<li>https://github.com/astral-sh/uv/issues/6297</li>
<li>https://github.com/astral-sh/uv/issues/4718</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">uv python</span> added by @zanieb on 2024-09-11 11:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">uv tool</span> added by @zanieb on 2024-09-11 11:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2024-09-11 11:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/neutrinoceros">@neutrinoceros</a> on 2024-09-11 12:06</div>
            <div class="timeline-body"><p>Thanks for the pointers. I looked for something similar before I opened this ticket but didn't find #6297. Feel free to close mine as a duplicate if it makes sense !</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-11 13:15</div>
            <div class="timeline-body"><p>I'll tweak the title â€” we can track this separately, I think, even though it's similar.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "UX/BUG (?): support upgrading managed python for installed tools ?" to "Upgrade tool Python patch versions automatically on managed Python upgrade" by @zanieb on 2024-09-11 13:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jtfmumm on 2025-06-20 14:17</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:35:10 UTC
    </footer>
</body>
</html>
