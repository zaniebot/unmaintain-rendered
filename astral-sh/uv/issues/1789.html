<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support flags via environment variables - astral-sh/uv #1789</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Support flags via environment variables</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1789">#1789</a>
        opened by <a href="https://github.com/gaborbernat">@gaborbernat</a>
        on 2024-02-21 00:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/gaborbernat">@gaborbernat</a> on 2024-02-21 00:25</div>
            <div class="timeline-body"><p>Pip supports setting environment variables via flags, today I know of UV_INDEX_URL and UV_EXTRA_INDEX_URL that uv also has.</p>
<p>However, such as <code>PIP_PREFER_BINARY=true</code> I don't think has an equivalent. It would be nice if uv would do similar for all flags in case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-21 00:31</div>
            <div class="timeline-body"><p>I think it's unlikely that we try to match <em>all</em> of the pip environment variables ‚Äî we've tried to avoid environment based configuration in Ruff (for reasons unknown to me, I kind of like having a variable for each option). Is there a particular reason this would be useful?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaborbernat">@gaborbernat</a> on 2024-02-21 01:01</div>
            <div class="timeline-body"><p>Because you can control the indexes via <code>UV_INDEX_URL</code> and <code>UV_EXTRA_INDEX_URL</code>; but if both have a package currently the first one will take priority, and there's no way without this to tell, prioritize the index that has a wheel...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-21 03:13</div>
            <div class="timeline-body"><p>I don't mind adding environment variable support, personally. (But I'd prefer to have our own <code>UV_*</code> variables rather than read <code>PIP_*</code> variables.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @charliermarsh on 2024-02-21 03:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaborbernat">@gaborbernat</a> on 2024-02-21 03:29</div>
            <div class="timeline-body"><p>I agree with not reusing pip ones üßê</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mgaitan">@mgaitan</a> on 2024-02-21 20:36</div>
            <div class="timeline-body"><p>running <code>uv --help</code> I can see there is some flags that supports envvars, like</p>
<pre><code>      --cache-dir &lt;CACHE_DIR&gt;
          Path to the cache directory
          
          [env: UV_CACHE_DIR=]
</code></pre>
<p>but others doesn't like <code>--color</code>  or <code>--verbose</code>  . Couldn't be the support for environment variable generalized with the same <code>UV_&lt;UPPER_CLI_FLAG&gt;</code> pattern?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @zanieb on 2024-02-21 20:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1839.html">astral-sh/uv#1839</a> on 2024-02-21 22:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1841.html">astral-sh/uv#1841</a> on 2024-02-21 23:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../napari/napari/pulls/6668.html">napari/napari#6668</a> on 2024-02-27 11:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Czaki">@Czaki</a> on 2024-03-04 18:28</div>
            <div class="timeline-body"><p>@zanieb @charliermarsh I may be interested to implementing this (it is blocking me to migrate test to use uv). Where is the best place to ask some questions (if I am good, understanding code structure for example)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-04 20:59</div>
            <div class="timeline-body"><p>@Czaki -- You're welcome to either (1) ask questions here, (2) open a draft PR early and ask questions there, or (3) ask in Discord. I have a minor preference for fielding questions in GitHub but it's whatever you prefer!</p>
<p>I suspect the changes would mostly be in: https://github.com/astral-sh/uv/blob/14d968ac224c88988c60b6c067f0cafbc3ea4a07/crates/uv/src/main.rs#L475.</p>
<p>(Not sure if @zanieb has objections to adding these, maybe wait for Zanie to chime in.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-04 21:02</div>
            <div class="timeline-body"><p>We can add these but we might want to scope some of the more specific options e.g.<code>ONLY_BINARY</code> to <code>UV_PIP_</code> instead of <code>UV_</code>.</p>
<p>Edit: I said this same thing longer at https://github.com/astral-sh/uv/issues/1535#issuecomment-1960718966</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mimre25">@mimre25</a> on 2024-03-05 09:13</div>
            <div class="timeline-body"><p>Not sure if this is the right place, but I stumbled upon <code>PIP_CONSTRAINT</code> for build constraints missing.</p>
<p>I've tried <code>UV_CONSTRAINT</code>, but that doesn't seem to be accounted for either.</p>
<p>Is there currently a way to set this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Czaki">@Czaki</a> on 2024-03-05 09:15</div>
            <div class="timeline-body"><p>@mimre25 only using flags. This Issue is about introducing such an option.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mimre25">@mimre25</a> on 2024-03-05 09:41</div>
            <div class="timeline-body"><p>:facepalm: why didn't I think of that?</p>
<p>Anyhow, to offer something to the discussion:</p>
<p>The premise first premises of <code>uv</code> states:</p>
<blockquote>
<p>An extremely fast Python package installer and resolver, written in Rust. Designed as a <strong>drop-in replacement</strong> for <code>pip</code> and <code>pip-compile</code>.</p>
</blockquote>
<p>(Highlight by me).</p>
<p>Wouldn't it make sense to use the <code>PIP_*</code> environment variable in this case? Otherwise, <code>uv</code> won't be a <em>drop-in replacement</em> for <code>pip</code> anymore.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Czaki">@Czaki</a> on 2024-03-05 11:38</div>
            <div class="timeline-body"><p>I agree that this statement is not true, and based on other issues it will never be true.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-05 13:46</div>
            <div class="timeline-body"><p>I'd like to support more environment variables for uv, but reading configuration files and environment variables intended for other tools isn't a sustainable strategy. It means we need to be bug-for-bug compatible with those other tools, since users will end up relying on bugs in the format, the parser, etc.; and if the other tool <em>changes</em> the format in some way, we're then locked in to changing it in parallel ways to avoid breaking things for users. If that configuration is versioned in some way, it gets even harder, since we might need to know <em>which version</em> of the other tool you're expecting to use. It <em>also</em> means that we <em>cannot</em> introduce any of our settings or configuration, since otherwise our <code>pip.conf</code> (if we, for example, used that configuration file) would no longer be useable with <code>pip</code>. Conversely, it can <em>also</em> lead to a lot of user confusion -- if we read configuration files intended for other tools, I'm certain we'd receive issues in which users were surprised that we <em>did</em> read those files, since they're not intended for us.</p>
<p>We plan to have our own environment variables and our own persistent configuration format. We'll document these differences in our pip compatibility policy (https://github.com/astral-sh/uv/issues/2023).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1404.html">astral-sh/uv#1404</a> on 2024-03-05 15:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tafia">@tafia</a> on 2024-03-06 00:41</div>
            <div class="timeline-body"><p>I think I understand where you're coming from but pip.conf is a de-facto standard. I don't remember ever changing it so I'd say it is particularly stable and deserves an exception.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-06 01:48</div>
            <div class="timeline-body"><p>It's really important to distinguish between de-facto standards established by tools and <em>actual</em> standards though. We're very interested in improving the standards such that there is not a tool-specific file that every other tool needs to deal with.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pawamoy">@pawamoy</a> on 2024-03-28 15:15</div>
            <div class="timeline-body"><p>Sorry if this is the wrong place: could uv support a <code>UV_RESOLUTION</code> environment variable, with possible values <code>highest</code>, <code>lowest</code>, <code>lowest-direct</code>? It's not critical, I can easily check this env var and set the according CLI flag myself :slightly_smiling_face:</p>
<pre><code class="language-bash">if [ -n &quot;${UV_RESOLUTION}&quot; ]; then
  uv_opts=&quot;--resolution=${UV_RESOLUTION}&quot;
fi
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-28 15:21</div>
            <div class="timeline-body"><p>Happy to add -- do you mind creating a separate issue just for tracking?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2710.html">astral-sh/uv#2710</a> on 2024-03-28 15:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-19 14:12</div>
            <div class="timeline-body"><p>Closing for now as we have many of these.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-19 14:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3162.html">astral-sh/uv#3162</a> on 2024-04-20 16:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:18 UTC
    </footer>
</body>
</html>
