<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using uv.lock file to define package requirements? - astral-sh/uv #7698</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Using uv.lock file to define package requirements?</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/7698">#7698</a>
        opened by <a href="https://github.com/TARHiS">@TARHiS</a>
        on 2024-09-26 07:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/TARHiS">@TARHiS</a> on 2024-09-26 07:40</div>
            <div class="timeline-body"><p>When building package with <code>uv build</code>, is it possible to use uv.lock file as a requirements of a package instead of using pyproject.toml dependencies? Use case for this is to create application package that is used to deploy web servers by using private PyPI as a distribution channel.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-26 12:21</div>
            <div class="timeline-body"><p>This would be cool üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2024-09-26 12:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">projects</span> added by @zanieb on 2024-09-26 12:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tfsingh">@tfsingh</a> on 2024-09-28 06:40</div>
            <div class="timeline-body"><p>I've been doing a good amount of digging on this issue and wanted to check if I'm thinking about this correctly.</p>
<p>My current understanding is that <code>uv</code> itself does not handle dependencies specified in <code>pyproject.toml</code> files during the build process (<code>pyproject.toml</code> files are only scraped for  <a href="https://github.com/astral-sh/uv/blob/313612dad7a6843f753f2331d38b07b896676701/crates/uv/src/commands/build.rs#L214">package names/roots</a> during <code>uv build</code>, afaict).</p>
<p>Instead, uv defers to <a href="https://github.com/astral-sh/uv/blob/313612dad7a6843f753f2331d38b07b896676701/crates/uv-build-frontend/src/lib.rs#L40">setup_tools as the build backend</a> via the execution of an intermediary <a href="https://github.com/astral-sh/uv/blob/313612dad7a6843f753f2331d38b07b896676701/crates/uv-build-frontend/src/lib.rs#L691">Python script</a>. My understanding is that from here, <code>setup_tools</code> uses the given path, scrapes the dependencies from the corresponding <code>pyproject.toml</code>, and builds the package.</p>
<p>I'll be candid in that my understanding of Python packaging (while improving) is limited, but if the above is true then I think this issue might require either:</p>
<ol>
<li>Injecting some custom logic into setup tools via <a href="https://setuptools.pypa.io/en/latest/userguide/extension.html">extensions</a> (looks promising but requires more diligence, haven't verified this would work)</li>
<li>Custom <code>uv</code> build backend :)</li>
</ol>
<p>Let me know if I'm thinking about this correctly and if so, I'll do some more digging into the first potential solution.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tfsingh">@tfsingh</a> on 2024-09-29 18:37</div>
            <div class="timeline-body"><p>cc'ing @charliermarsh for your thoughts on the above</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:00 UTC
    </footer>
</body>
</html>
