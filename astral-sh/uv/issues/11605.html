<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mininum Python requirement from dependency greater than root project. - astral-sh/uv #11605</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Mininum Python requirement from dependency greater than root project.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11605">#11605</a>
        opened by <a href="https://github.com/jdumas">@jdumas</a>
        on 2025-02-18 21:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jdumas">@jdumas</a></div>
            <div class="timeline-body">Summary
<p>Hi.</p>
<p>So trying to run <code>uv sync</code> on the following <code>pyproject.toml</code>:</p>
<pre><code>[project]
name = &quot;uv-python&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.9&quot;
dependencies = [
    &quot;sphinx&gt;=8.2.0&quot;
]
</code></pre>
<p>produces the following message:</p>
<pre><code>  × No solution found when resolving dependencies for split (python_full_version &gt;= &#x27;3.9&#x27; and python_full_version &lt; &#x27;3.11&#x27;):
  ╰─▶ Because the requested Python version (&gt;=3.9) does not satisfy Python&gt;=3.11 and sphinx==8.2.0 depends on Python&gt;=3.11, we can conclude that sphinx==8.2.0 cannot be used.
      And because only sphinx&lt;=8.2.0 is available and your project depends on sphinx&gt;=8.2.0, we can conclude that your project&#x27;s requirements are unsatisfiable.

      hint: The `requires-python` value (&gt;=3.9) includes Python versions that are not supported by your dependencies (e.g., sphinx==8.2.0 only supports &gt;=3.11). Consider using a
      more restrictive `requires-python` value (like &gt;=3.11).
</code></pre>
<p>I&#x27;m not sure I fully agree with the message. If a dependency requires a more recent Python version (e.g. 3.11), then <code>uv</code> should implicitly bump the min Python version to 3.11, not complain that my <code>requires-python</code> is too low right?</p>
<p>In this example this might seem trivial, but in practice I have <code>sphinx</code> as an optional <code>[dependency-groups]</code> which is used to build my website. My main package supports Python 3.9 and 3.10, and I only build the website using Python 3.11. I think that this type of scenario should be supported no?</p>
Platform
<p>macOS (Darwin 23.5.0 arm64)</p>
Version
<p>uv 0.6.1 (Homebrew 2025-02-17)</p>
Python version
<p>N/A</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/jdumas">@jdumas</a> on 2025-02-18 21:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vivodi">@vivodi</a> on 2025-02-18 21:59</div>
            <div class="timeline-body"><blockquote>
<p>If a dependency requires a more recent Python version (e.g. 3.11), then uv should implicitly bump the min Python version to 3.11, not complain that my requires-python is too low right?</p>
</blockquote>
<p>I think the current behavior is correct. <code>uv</code> should not implicitly do that as it&#x27;s unsafe and inappropriate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-18 22:34</div>
            <div class="timeline-body"><p>@vivodi Please be respectful here, we want to foster a welcoming community here and that message is quite curt.</p>
<blockquote>
<p>If a dependency requires a more recent Python version (e.g. 3.11), then uv should implicitly bump the min Python version to 3.11, not complain that my requires-python is too low right?</p>
</blockquote>
<p>The problem is that sphinx is not going to be installable on the full range of Python versions your project supports. We don&#x27;t just lock for your current Python version, we lock for all relevant Python versions.</p>
<p>If that&#x27;s what you want, then you should declare</p>
<pre><code>dependencies = [
    &quot;sphinx&gt;=8.2.0; python_version &gt;= &#x27;3.11&#x27;&quot;
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-18 22:40</div>
            <div class="timeline-body"><p>The fix for your dependency-group case is to allow declaring a separate <code>requires-python</code> range <a href="https://github.com/astral-sh/uv/issues/11606">astral-sh/uv#11606</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-18 22:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-18 22:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jdumas">@jdumas</a> on 2025-02-18 22:45</div>
            <div class="timeline-body"><p>@zanieb thanks! I believe I can use the <code>; python_version &gt;= &#x27;3.11&#x27;</code> for now to get things going, but indeed ideally #11606 would be needed to avoid surprises when building documentation. I&#x27;ll close this issue and follow #11606 instead.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/jdumas">@jdumas</a> on 2025-02-18 22:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:37:22 UTC
    </footer>
</body>
</html>
