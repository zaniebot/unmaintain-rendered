```yaml
number: 11781
title: "`uv venv` sources `.venv/bin/activate` on fish, when it should be sourcing `.venv/bin/activate.fish`"
type: issue
state: closed
author: beaumccartney
labels:
  - question
assignees: []
created_at: 2025-02-25T20:24:00Z
updated_at: 2025-03-03T07:26:16Z
url: https://github.com/astral-sh/uv/issues/11781
synced_at: 2026-01-10T01:57:27Z
```

# `uv venv` sources `.venv/bin/activate` on fish, when it should be sourcing `.venv/bin/activate.fish`

---

_Issue opened by @beaumccartney on 2025-02-25 20:24_

### Summary

`.venv/bin/activate` is a bash script, and in fact the script states that it must be sourced from bash. More generally the script source needs to be decided based on the shell (though idk if this behavior is incorrect on other shells)

### Platform

Darwin 24.3.0 arm64

### Version

uv 0.6.3 (Homebrew 2025-02-24)

### Python version

Python 3.9.21

---

_Label `bug` added by @beaumccartney on 2025-02-25 20:24_

---

_Comment by @zanieb on 2025-02-25 20:25_

We don't source the file for you, is the complaint that we recommend the wrong file? 

This is already covered in https://docs.astral.sh/uv/pip/environments/#using-a-virtual-environment

---

_Comment by @beaumccartney on 2025-02-25 23:02_

Ahh pardon me, I misread the output.

Recommending the correct file would be a nice touch. 

---

_Comment by @zanieb on 2025-02-25 23:08_

Doesn't it?

https://github.com/astral-sh/uv/blob/239f3d76b9061ae9fd6d9290831af019a24c901a/crates/uv/src/commands/venv.rs#L393-L420

---

_Label `bug` removed by @zanieb on 2025-02-25 23:08_

---

_Label `question` added by @zanieb on 2025-02-25 23:08_

---

_Comment by @beaumccartney on 2025-02-25 23:58_

oh weird

<img width="688" alt="Image" src="https://github.com/user-attachments/assets/92300b06-c1c4-426b-a39f-174e05e94245" />

I haven't changed my login shell so `$SHELL` is still zsh but I am working from fish.

---

_Comment by @zanieb on 2025-02-26 00:27_

I see. I'm not sure how we would detect the shell in that case :/

---

_Comment by @beaumccartney on 2025-02-26 01:30_

Fair enough

---

_Closed by @beaumccartney on 2025-02-26 01:30_

---

_Comment by @pquentin on 2025-03-03 07:26_

I also ended up in that case. The recommendations from Hynek and Julia Evans + the rewrite in Rust motivated me to try it, and I used chsh to switch. I also use Starship. I have no idea what a login shell is and don't know why `SHELL` is still set to zsh.

---
