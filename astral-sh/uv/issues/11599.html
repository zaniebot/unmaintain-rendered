<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Show hint when permission denied encountered during system package install - astral-sh/uv #11599</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Show hint when permission denied encountered during system package install</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/11599">#11599</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-02-18 14:30
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><pre><code>~: uv pip install --system Pillow
Using Python 3.12.8 environment at: /usr
Resolved 1 package in 103ms
error: Failed to install: pillow-11.1.0-cp312-cp312-manylinux_2_28_x86_64.whl (pillow==11.1.0)
  Caused by: failed to create directory `/usr/local/lib64/python3.12/site-packages/`: Permission denied (os error 13)
</code></pre>
<p>We should hint what to do here, e.g.,</p>
<blockquote>
<p>hint: It looks like you do not have permissions to write to the system Python environment. Consider creating a virtual environment (<code>uv venv</code>) then installing the package or installing it in an isolated tool environment (<code>uv tool install</code>).</p>
</blockquote>
<p>We could probably be smart, like only hint a tool install if the package has entry points.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @zanieb on 2025-02-18 14:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jtkiley">@jtkiley</a> on 2025-03-15 19:41</div>
            <div class="timeline-body"><p>I got this error and it would be nice to have some workable guidance from the tool itself.</p>
<p>I tried to use uv today for the first time, and I extensively use devcontainers in VSCode (local and Github Codespaces). I added the uv feature and swapped my post create command to <code>uv pip</code> to install from a requirements.txt (then added <code>--system</code> from the first error I got). I can see that uv very quickly pulls the dependencies and in parallel, but then I get the error and my devcontainer build stops.</p>
<p>I know this is because uv doesn't fall back to --user packages like pip does, and I see from other issues that you all don't want to do that.</p>
<p>I spent an hour looking at it, and I'm going to switch back to pip, but it would be nice if you all consider this use case for new users of uv. I hoped to see what I read was a drop in replacement for pip, which along with the idea of cargo for Python, is what motivated me to check it out in the first place. (Also, I love <code>ruff</code>, so more stuff from the same folks sounded great.)</p>
<p>Perhaps consider putting out your own devcontainer feature that could smooth out the user experience, too. I've read plenty of love for uv, so I'm certainly interested in checking it out.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-15 20:29</div>
            <div class="timeline-body"><p>@jtkiley would you mind opening a new issue with an example problematic devcontainer? We can look into improving that experience.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:29:59 UTC
    </footer>
</body>
</html>
