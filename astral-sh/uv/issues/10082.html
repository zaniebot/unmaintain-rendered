<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A command to install/get version of the package from `uv.lock` - astral-sh/uv #10082</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>A command to install/get version of the package from <code>uv.lock</code></h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/10082">#10082</a>
        opened by <a href="https://github.com/paduszyk">@paduszyk</a>
        on 2024-12-21 14:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/paduszyk">@paduszyk</a></div>
            <div class="timeline-body"><p>In some circumstances, one may need a package installed using an exact version pinned in <code>uv.lock</code>.</p>
<p>For instance, this is the case when one wants to run <code>ruff check</code> on <code>ruff format</code> in CI and use the same version of the Ruff as the one installed in the environment — in fact, in the case of linting/formatting with <code>ruff</code>, the <code>ruff</code> is the only dependency required.</p>
<p>The following workflow:</p>
<pre><code># ...

jobs:
  ruff:
    runs-on: ubuntu-latest
    steps:
      # Check out.
      # Set up Python. 
      - run: uv add ruff
      - run: uv run ruff check
      - run: uv run ruff format
</code></pre>
<p>will use the latest version compatible with Python set up — It does not have to be the same as the one in <code>uv.lock</code>.</p>
<p>One can circumvent this by using:</p>
<pre><code>    - run: uv sync --only-group ruff --frozen
</code></pre>
<p>with the <code>ruff</code> dependency group available in <code>pyproject.toml</code>. But is there any sense to define a separate group for a single development dependency?</p>
<p>I think that adding an extra command that would either return the exact version or install the pinned package would be an interesting feature. If the former, the version could be used as input for GitHub Actions...</p>
<p>Note that similar ideas were tried to be added to other dependency managers, e.g. python-poetry/poetry#3570.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-06 20:40</div>
            <div class="timeline-body"><p>Up to date Poetry ref <a href="https://github.com/python-poetry/poetry/issues/3033">python-poetry/poetry#3033</a></p>
<p>Unfortunately, I think the best <code>uv sync</code> flag for this is <code>--package</code> which is already taken for selecting a workspace member. I think we could overload the term? But it could be confusing unless we do so elsewhere and allow selection of <em>any</em> package as the root of the tree instead of just workspace members? cc @charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-06 20:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-06 20:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-06 20:41</div>
            <div class="timeline-body"><p>A <code>uv export</code> flag would be reasonable too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/paduszyk">@paduszyk</a> on 2025-01-25 18:58</div>
            <div class="timeline-body"><p>@zanieb The particular case used in my Ruff example is solved by: astral-sh/ruff-action#30 :+1:</p>
<p>But anyways, I will stay with my point that extending uv by providing an interface for extracting dependency versions from <code>uv.lock</code> might be useful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chriskuehl">@chriskuehl</a> on 2025-03-01 05:06</div>
            <div class="timeline-body"><p>I would also appreciate this feature as I think this is a very natural way to run Ruff in CI given that it doesn&#x27;t require any other dependencies to be installed. My use case is packaging a &quot;Ruff CI&quot; step into a shared CI pipeline which is used by many of our projects. I don&#x27;t want to build the entire virtualenv in this step as it can be slow and fragile in some of our projects (e.g. if some deps need to be compiled).</p>
<p>My current workaround is to use a command like <code>uvx $(uv export --frozen --no-hashes | grep &#x27;^ruff==&#x27;)</code> which I think achieves a similar goal.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:36:21 UTC
    </footer>
</body>
</html>
