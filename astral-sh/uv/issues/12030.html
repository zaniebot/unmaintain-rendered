<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to make Pylance recognize the declared dependencies in a script - astral-sh/uv #12030</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>How to make Pylance recognize the declared dependencies in a script</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/12030">#12030</a>
        opened by <a href="https://github.com/CrendKing">@CrendKing</a>
        on 2025-03-07 02:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/CrendKing">@CrendKing</a> on 2025-03-07 02:51</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I don't know if this has been asked before. If yes, please let me know and close this.</p>
<p>Many people love the <a href="https://docs.astral.sh/uv/guides/scripts/#declaring-script-dependencies">inline declared dependencies feature</a> of uv. However, when one works on the script in VSCode with Pylance or I assume any other Python language server, it won't be able to find the dependencies, since uv dynamically creates the environment. This always ends with errors like <code>Import &quot;&lt;dependency&gt;&quot; could not be resolved</code>, not to mention the broken Intellisense for these dependencies.</p>
<p>I know if I explicitly creates a venv and change the interpreter to the venv python binary it will fix the issue, but I tries to move away from venv approach for standalone scripts. Is there some black magic I'm not aware?</p>
<p><img src="https://github.com/user-attachments/assets/7cb0a7ee-336b-4b2f-90ae-f8073b90a180" alt="Image" /></p>
<h3>Platform</h3>
<p>Windows 11</p>
<h3>Version</h3>
<p>0.6.5</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @CrendKing on 2025-03-07 02:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jromal">@jromal</a> on 2025-03-12 16:12</div>
            <div class="timeline-body"><p>I think you could use on the terminal <code>uv run my_script.py</code> or set the &quot;launch.json&quot; to `uv run --script&quot;.</p>
<p>But because &quot;venv&quot; can be created so easily, probably not many tried it.</p>
<p>But just thinking out loud, without a computer in front of me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-03-12 16:28</div>
            <div class="timeline-body"><p>There is a feature request in pylance here: https://github.com/microsoft/pylance-release/discussions/6522. So no hidden tricks involved, but it will take a bit until we can replace the venv workarounds.</p>
<p>Inline script metadata is still comparatively young, I expect it will take some time until it is universally supported across IDEs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CrendKing">@CrendKing</a> on 2025-03-12 19:28</div>
            <div class="timeline-body"><p>I see. Use venv until the tools start to support the feature. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @CrendKing on 2025-03-12 19:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/m0awie">@m0awie</a> on 2025-05-13 08:14</div>
            <div class="timeline-body"><p>For anyone looking for a quicker solution in the meantime, you can point VS Code to a cached UV virtual environment, using
<code>uv python find --script script.py</code>
This will print the path to the cached venv, which you can then enter as an interpreter path using the select interpreter command.
You may need to run with <code>uv run --script script.py</code> to update the cache if you add a dependency.
The cache name should stay the same when adding a dependency from my cursory testing, but the window will need to be reloaded; using command palette; Developer: Reload Window</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Jamie-BitFlight">@Jamie-BitFlight</a> on 2025-11-27 04:34</div>
            <div class="timeline-body"><p>For anyone landing here looking for a solution for <strong>CI/pre-commit</strong> (not IDE support), I built a wrapper tool that auto-installs PEP 723 dependencies before running linters:</p>
<pre><code class="language-bash">pip install pep723-loader
pep723-loader mypy your_script.py
pep723-loader basedpyright your_script.py
</code></pre>
<p>Or in pre-commit:</p>
<pre><code class="language-yaml">- repo: local
  hooks:
    - id: mypy
      name: mypy
      entry: uv run -q --no-sync --with pep723-loader --with mypy pep723-loader mypy
      language: system
      types: [python]
      pass_filenames: true
</code></pre>
<p>It scans files for <code># /// script</code> metadata, extracts deps via <code>uv export --script</code>, installs them, then runs your linter. Useful until native IDE/LSP support arrives.</p>
<p>Repo: https://github.com/bitflight-devops/pre-commit-pep723-linter-wrapper</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:26 UTC
    </footer>
</body>
</html>
