<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editable installation with extras - astral-sh/uv #7845</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Editable installation with extras</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/7845">#7845</a>
        opened by <a href="https://github.com/detlefla">@detlefla</a>
        on 2024-10-01 14:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/detlefla">@detlefla</a> on 2024-10-01 14:39</div>
            <div class="timeline-body"><p>When I try to install extras for an editable installation, e.g. <code>uv pip install -e . --all-extras</code>, uv refuses this with an error message:</p>
<pre><code>error: Requesting extras requires a `pyproject.toml`, `setup.cfg`, or `setup.py` file.
</code></pre>
<p>Without <code>--extra</code> or Â´--all-extras` everything is fine, so the pyproject.toml file is obviously present and can be processed.</p>
<p>Particularly with an <code>install -e</code>, however, it's often desirable to install the dev dependencies; <code>uv pip install</code> doesn't have any kind of <code>--dev</code> flag (unless I miss something).</p>
<p>I haven't provided a full working sample as I think this behaviour doesn't depend on any particular conditions, but of course I'll try to prepare a stripped-down sample if it helps. I'm using uv 0.4.17.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw-gts">@notatallshaw-gts</a> on 2024-10-01 16:24</div>
            <div class="timeline-body"><p>Don't you want <code>uv pip install -e .[my-extra]</code>?</p>
<p>That's how it works for pip, and I believe uv is copying the behavior here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/detlefla">@detlefla</a> on 2024-10-01 16:56</div>
            <div class="timeline-body"><p>OK, thanks for pointing this out, in fact it works. It's a bit surprising that <code>--all-extras</code> doesn't work then, and it seems that an extra <code>[dev]</code> is apparently better suited for development than using <code>tool.uv.dev-dependencies</code>.</p>
<p>But I can very well live with that, thank you for doing a great job with uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw-gts">@notatallshaw-gts</a> on 2024-10-01 17:01</div>
            <div class="timeline-body"><blockquote>
<p>It's a bit surprising that <code>--all-extras</code> doesn't work then</p>
</blockquote>
<p><code>--all-extras</code> isn't an option from pip, it's an option from pip-compile, so while I'm sure that uv could add it, it's behavior is not currently defined, e.g. would you wanting it installing every extra from every transitive dependency?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/detlefla">@detlefla</a> on 2024-10-01 17:12</div>
            <div class="timeline-body"><p>As this option appears in the output for <code>uv pip install --help</code> and this output looks significantly different from <code>uv pip compile --help</code>, I thought this option was related to the install subcommand.</p>
<p>In fact IMO it wouldn't be useful to apply this to all transitive dependencies, no.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw-gts">@notatallshaw-gts</a> on 2024-10-01 17:22</div>
            <div class="timeline-body"><blockquote>
<p>As this option appears in the output for <code>uv pip install --help</code></p>
</blockquote>
<p>Yeah:</p>
<pre><code>$ uv pip install --help | grep &quot;all-extras&quot;
      --all-extras                           Include all optional dependencies

$ ls pyproject.toml
pyproject.toml

$ uv pip install . --all-extras
error: Requesting extras requires a `pyproject.toml`, `setup.cfg`, or `setup.py` file.
</code></pre>
<p>This looks like a bug, <code>--all-extras</code> should not be available for <code>uv pip install</code>? Or the docs / error message isn't clear when it should work? @charliermarsh ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-01 17:30</div>
            <div class="timeline-body"><p><code>--all-extras</code> applies to passing a <code>pyproject.toml</code> or similar directly -- like <code>uv pip install ./pyproject.toml --all-extras</code>. There's no defined syntax for enabling extras there, unlike when passing a path (<code>uv pip install .[dev]</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw-gts">@notatallshaw-gts</a> on 2024-10-01 17:33</div>
            <div class="timeline-body"><p>That makes sense, the <code>--help</code> and the error are both pretty unclear though if you're not already familiar with that exact use case.</p>
<p>If no one else does I might write a PR, or else I will be confused when I come across this again in a years time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @zanieb on 2024-10-01 18:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-10-01 18:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8416.html">astral-sh/uv#8416</a> on 2024-10-21 21:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../pypa/pip/issues/12963.html">pypa/pip#12963</a> on 2024-10-26 16:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pamelafox">@pamelafox</a> on 2024-11-12 19:41</div>
            <div class="timeline-body"><p>I was just writing up a similar experience when I found this one. What I wrote up--</p>
<p>I attempted to install a project that had a pyproject.toml in the root and several extras defined:</p>
<pre><code>(flask-admin) flask-admin % uv pip install -e . --all-extras                  
error: Requesting extras requires a `pyproject.toml`, `setup.cfg`, or `setup.py` file.
</code></pre>
<p>It worked when I ran:</p>
<pre><code>(flask-admin) flask-admin % uv pip install -e . --all-extras -r pyproject.toml
</code></pre>
<p>It seemed unnecessary, since <code>-e .</code> works fine when not specifying extras, so I was surprised I needed to explicitly pass in the pyproject.toml when asking for extras.</p>
<p>I think another example in the documentation could be helpful. I was looking through https://docs.astral.sh/uv/pip/packages/#editable-packages for guidance.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssbarnea">@ssbarnea</a> on 2025-01-02 10:02</div>
            <div class="timeline-body"><p>Keep in mind that --editable can also be mentioned multiple times, this means that we might want to ensure that we allow mentioning the all extras as a part of the --editable argument. Maybe <code>...[*]</code> or <code>...[all]</code> (star is bit problematic as it might need to be escaped for shell.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/akaihola">@akaihola</a> on 2025-01-11 17:07</div>
            <div class="timeline-body"><blockquote>
<p><code>uv pip install ./pyproject.toml --all-extras</code></p>
</blockquote>
<p>@charliermarsh,</p>
<pre><code class="language-bash">$ uv --version
uv 0.5.15
$ uv pip install ./pyproject.toml --all-extras
error: Requesting extras requires a `pyproject.toml`, `setup.cfg`, or `setup.py` file.     &lt;-- why?
$ uv pip install ./pyproject.toml
error: Failed to parse: `./pyproject.toml`
  Caused by: Expected path (`./pyproject.toml`) to end in a supported file extension:      &lt;-- why?
  `.whl`, `.tar.gz`, `.zip`, `.tar.bz2`, `.tar.lz`, `.tar.lzma`, `.tar.xz`, `.tar.zst`, `.tar`, `.tbz`, `.tgz`, `.tlz`, or `.txz`
./pyproject.toml
^^^^^^^^^^^^^^^^
$ ls pyproject.toml
pyproject.toml
$ uv pip install -e .
Using Python 3.12.7 environment at: /home/akaihola/.cache/myproject/.venv
Audited 1 package in 131ms
</code></pre>
<p>As a work-around, this seems to work:</p>
<pre><code class="language-bash">$ uv pip compile --all-extras pyproject.toml | uv pip install -r -
Resolved 34 packages in 39ms
Using Python 3.12.7 environment at: /home/akaihola/.cache/aider-chat/.venv
Resolved 34 packages in 33ms
Prepared 9 packages in 202ms
Uninstalled 9 packages in 115ms
Installed 9 packages in 37ms
$ uv pip install -e .
Using Python 3.12.7 environment at: /home/akaihola/.cache/myproject/.venv
Audited 1 package in 131ms
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/11193.html">astral-sh/uv#11193</a> on 2025-02-03 20:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-02-03 22:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:00 UTC
    </footer>
</body>
</html>
