<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv add [package] =&gt; package cmd fails&quot;&quot;=&gt; re-activate the environment &quot;source .venv/bin/activate&quot; - astral-sh/uv #16256</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv add [package] =&gt; package cmd fails&quot;&quot;=&gt; re-activate the environment &quot;source .venv/bin/activate&quot;</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16256">#16256</a>
        opened by <a href="https://github.com/AhnafCodes">@AhnafCodes</a>
        on 2025-10-12 16:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AhnafCodes">@AhnafCodes</a></div>
            <div class="timeline-body">Question: Is &quot;uv sync&quot; or &quot;source .venv/bin/activate&quot; -environment refresh,  needed after  &quot;uv add&quot;
<pre><code>  (.venv) % uv add django
      Resolved 5 packages in 352ms
      Installed 3 packages in 153ms
       + asgiref==3.10.0
       + django==5.2.7
       + sqlparse==0.5.3

 (.venv)%  django-admin startproject main .

      Traceback (most recent call last):
        File &quot;/Library/Frameworks/Python.framework/Versions/3.13/bin/django-admin&quot;, line 5, in &lt;module&gt;
          from django.core.management import execute_from_command_line
        File &quot;/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/django/core/management/__init__.py&quot;, line 17, in &lt;module&gt;
          from django.conf import settings
      File &quot;/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/django/conf/__init__.py&quot;, line 19, in &lt;module&gt;
        from django.utils.deprecation import RemovedInDjango60Warning
      File &quot;/Library/Frameworks/Python.framework/Versions/3.13/lib/python3.13/site-packages/django/utils/deprecation.py&quot;, line 4, in &lt;module&gt;
      from asgiref.sync import iscoroutinefunction, markcoroutinefunction, sync_to_async

  ModuleNotFoundError: No module named &#x27;asgiref&#x27;

(.venv) % source .venv/bin/activate       

(.venv) % django-admin startproject main .
(.venv)  % 

</code></pre>
<p><img alt="Image" src="https://github.com/user-attachments/assets/89aae4c0-a0db-4402-86f6-887cb8cef9be"></p>
Platform
<p>iMac, MacOS Sequoia</p>
Version
<p>uv 0.7.13 (62ed17b23 2025-06-12)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/AhnafCodes">@AhnafCodes</a> on 2025-10-12 16:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-12 16:59</div>
            <div class="timeline-body"><blockquote>
<p>Is &quot;uv sync&quot; or &quot;source .venv/bin/activate&quot; -environment refresh, needed after &quot;uv add&quot;?</p>
</blockquote>
<p>Not usually.</p>
<p>Are you sure you had the right virtual environment active? I&#x27;d recommend just using <code>uv run django-admin ...</code> to ensure you&#x27;re in the correct environment instead of activating it.</p>
<p>Please use code blocks instead of screenshots in the future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AhnafCodes">@AhnafCodes</a> on 2025-10-12 19:24</div>
            <div class="timeline-body"><p>yes, i did run &quot;which python&quot; to test. Its the right one.
Also you can see in the attached image, I dont close and reopen the shell, but rather I run &quot;source .venv/bin/activate&quot; after it fails and that fixes it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-12 22:09</div>
            <div class="timeline-body"><p>The activation script shouldn&#x27;t change the available packages.</p>
<p>You can clearly see that <code>django-admin</code> was invoked from the wrong path in your logs</p>
<blockquote>
<p>/Library/Frameworks/Python.framework/Versions/3.13/bin/django-admin</p>
</blockquote>
<p>rather than from within the virtual environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AhnafCodes">@AhnafCodes</a> on 2025-10-12 23:20</div>
            <div class="timeline-body"><p>Thanks for the help and checking</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/AhnafCodes">@AhnafCodes</a> on 2025-10-12 23:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:40:38 UTC
    </footer>
</body>
</html>
