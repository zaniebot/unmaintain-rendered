<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support constraints in `requirements.txt` files - astral-sh/uv #172</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support constraints in `requirements.txt` files</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/172">#172</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-10-23 21:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-23 21:27</div>
            <div class="timeline-body"><p>We now support constraints, but we bail when they're provided as part of a <code>requirements.txt</code> file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Initial release" by @charliermarsh on 2023-10-24 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2023-10-24 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @charliermarsh on 2023-10-24 19:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-10-26 19:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 22:54</div>
            <div class="timeline-body"><ul>
<li>If a constraint file includes a requirements file, the requirements in that file count as constraints.</li>
<li>If a constraint file includes a constraint file, those are basically ignored? It looks like nested constraints are always ignored.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 22:55</div>
            <div class="timeline-body"><ul>
<li>If a requirements file includes a requirements file, which includes a constraint file, that constraint file seems to be ignored.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 22:56</div>
            <div class="timeline-body"><p>(These are all <code>pip</code> behaviors.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> removed by @charliermarsh on 2023-10-26 22:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 22:58</div>
            <div class="timeline-body"><p>(Removing <code>wish</code> tag because it turns out this is very common.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 23:45</div>
            <div class="timeline-body"><p>I don't really know what the right behavior is here. pip's behavior is very strange.</p>
<p>https://github.com/pypa/pip/pull/8821</p>
<p>https://github.com/pypa/pip/issues/8416</p>
<p>We have three options:</p>
<ul>
<li>Follow pip.</li>
<li>Treat everything included from a <code>-c</code> as a constraint, regardless of whether it's added via a nested <code>-r</code> or <code>-c</code>. (This is the current behavior.)</li>
<li>Reject nested <code>-r</code> in a constraint file, or even reject nested <code>-c</code> in a constraint file.</li>
</ul>
<p>The second is the most reasonable so I'll just run with that for now.</p>
<p>\cc @konstin</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-10-27 00:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:42:49 UTC
    </footer>
</body>
</html>
