```yaml
number: 15297
title: Dependent local package becomes editable
type: issue
state: open
author: tonnico
labels:
  - bug
assignees: []
created_at: 2025-08-15T04:39:54Z
updated_at: 2025-08-25T14:17:17Z
url: https://github.com/astral-sh/uv/issues/15297
synced_at: 2026-01-12T16:02:07Z
```

# Dependent local package becomes editable

---

_@tonnico_

### Summary

I try to follow the [AWS CDK example](https://docs.astral.sh/uv/guides/integration/aws-lambda/#deploying-a-zip-archive).

I have the following structure:

```bash
uv init --bare foo
cd foo
uv init --lib a
uv init --lib b
uv init --lib shared
(cd a && uv add shared)
(cd b && uv add shared)
```

now I want to export my dependencies for package `a`.

```bash
foo uv export --frozen --no-dev --no-editable --package a -o requirements.txt
```

<details>
<summary>requirements.txt</summary>

```txt
# This file was autogenerated by uv via the following command:
#    uv export --frozen --no-dev --no-editable --package a -o requirements.txt
./a
./shared
    # via a
```

</details>

Finally I install the dependencies in a target directory, but the `shared` dependency becomes editable.

```bash
uv pip install \
   --no-installer-metadata \
   --no-compile-bytecode \
   --python-platform x86_64-manylinux2014 \
   --python 3.13 \
   --target packages \
   -r requirements.txt
```

<details><summary>debug output</summary>

```txt
DEBUG uv 0.8.10 (Homebrew 2025-08-13)
DEBUG Searching for Python 3.13 in virtual environments, managed installations, or search path
DEBUG Found `cpython-3.13.5-macos-x86_64-none` at `/Users/nico/projects/uv-bug/foo/.venv/bin/python3` (virtual environment)
Using CPython 3.13.5 interpreter at: .venv/bin/python3
DEBUG Using `--target` directory at packages
DEBUG Acquired lock for `packages`
DEBUG At least one requirement is not satisfied: file:///Users/nico/projects/uv-bug/foo/a
DEBUG Using request timeout of 30s
DEBUG Found PEP 621 metadata for /Users/nico/projects/uv-bug/foo/a in `pyproject.toml` (a)
DEBUG Found PEP 621 metadata for /Users/nico/projects/uv-bug/foo/shared in `pyproject.toml` (shared)
DEBUG Found static `pyproject.toml` for: a @ file:///Users/nico/projects/uv-bug/foo/a
DEBUG Found static `pyproject.toml` for: shared @ file:///Users/nico/projects/uv-bug/foo/shared
DEBUG Found workspace root: `/Users/nico/projects/uv-bug/foo`
DEBUG Adding root workspace member: `/Users/nico/projects/uv-bug/foo`
DEBUG Found workspace root: `/Users/nico/projects/uv-bug/foo`
DEBUG Adding root workspace member: `/Users/nico/projects/uv-bug/foo`
DEBUG Adding discovered workspace member: `/Users/nico/projects/uv-bug/foo/a`
DEBUG Adding discovered workspace member: `/Users/nico/projects/uv-bug/foo/a`
DEBUG Adding discovered workspace member: `/Users/nico/projects/uv-bug/foo/b`
DEBUG Adding discovered workspace member: `/Users/nico/projects/uv-bug/foo/b`
DEBUG Adding discovered workspace member: `/Users/nico/projects/uv-bug/foo/shared`
DEBUG Adding discovered workspace member: `/Users/nico/projects/uv-bug/foo/shared`
DEBUG Allowing an editable variant of file:///Users/nico/projects/uv-bug/foo/shared
DEBUG Solving with installed Python version: 3.13.5
DEBUG Solving with target Python version: >=3.13.5
DEBUG Adding direct dependency: a*
DEBUG Adding direct dependency: shared*
DEBUG Searching for a compatible version of a @ file:///Users/nico/projects/uv-bug/foo/a (*)
DEBUG Adding transitive dependency for a==0.1.0: shared*
DEBUG Searching for a compatible version of shared @ file:///Users/nico/projects/uv-bug/foo/shared (*)
DEBUG Tried 2 versions: a 1, shared 1
DEBUG marker environment resolution took 0.006s
Resolved 2 packages in 44ms
DEBUG Computed cache info: Some(Timestamp(SystemTime { tv_sec: 1755231649, tv_nsec: 330989051 })), None, None, {}, {"src": Some(Timestamp(Timestamp(SystemTime { tv_sec: 1755231649, tv_nsec: 108338081 })))}
DEBUG Directory source requirement already cached: a==0.1.0 (from file:///Users/nico/projects/uv-bug/foo/a)
DEBUG Computed cache info: Some(Timestamp(SystemTime { tv_sec: 1755231649, tv_nsec: 253928064 })), None, None, {}, {"src": Some(Timestamp(Timestamp(SystemTime { tv_sec: 1755231649, tv_nsec: 254012372 })))}
DEBUG Directory source requirement already cached: shared==0.1.0 (from file:///Users/nico/projects/uv-bug/foo/shared)
Installed 2 packages in 4ms
 + a==0.1.0 (from file:///Users/nico/projects/uv-bug/foo/a)
 + shared==0.1.0 (from file:///Users/nico/projects/uv-bug/foo/shared)
DEBUG Released lock at `packages/.lock`
```

</details>

```bash
> ls -l packages
total 8
drwxr-xr-x  4 nico  staff  128 Aug 15 06:28 a
drwxr-xr-x  5 nico  staff  160 Aug 15 06:28 a-0.1.0.dist-info
drwxr-xr-x  5 nico  staff  160 Aug 15 06:28 shared-0.1.0.dist-info
-rw-r--r--  1 nico  staff   42 Aug 15 06:20 shared.pth
```

This problem did not occur when I added the `--no-deps` flag to the installation.

Is this the correct behaviour, whereby a dependent package is always editable by default?
Perhaps there is a missing `--no-editable` flag for`uv pip install`?

### Platform

macOS 15.6

### Version

uv 0.8.10 (Homebrew 2025-08-13)

### Python version

Python 3.13.5

---

_Label `bug` added by @tonnico on 2025-08-15 04:39_

---

_Comment by @charliermarsh on 2025-08-15 13:46_

If you pass `--no-sources`, I think that will disable the editables here. (The packages are being included as editable because they're workspace members.) I need to think a bit more on the "right" behavior.

---

_Comment by @tonnico on 2025-08-15 15:40_

> If you pass `--no-sources`

I can confirm that this produces my expected output.


> The packages are being included

It is only the `shared` package which is editable. The package `a` is not editable.

---

_Comment by @zanieb on 2025-08-15 15:45_

See also

- https://github.com/astral-sh/uv/issues/14963
- https://github.com/astral-sh/uv/issues/14617
- https://github.com/astral-sh/uv/issues/5631

---

_Comment by @vivekd22 on 2025-08-25 14:17_

@charliermarsh Does `--no-sources` work with `uv sync` or `uv build` in this case -
I have workspace members that are dependencies of other workspace members. During development, I would want to sync with upstream PyPI version (for example, to verify some functionality or to build a wheel). It seems that as long as the versioning is satisfied by the local workspace member, uv always picks that. If the version is not satisfied by the local workspace member, then uv fails with the error -
```
  × No solution found when resolving dependencies:
  ╰─▶ Because a depends on uv-demo and your workspace requires a, we can conclude that your workspace's requirements are unsatisfiable.
```
Example is same as this -
```
uv init --bare foo
cd foo
uv init --lib a
uv init --lib shared
(cd a && uv add shared)
```
I would want shared to be fetched from PyPI when using `--no-sources`

---
