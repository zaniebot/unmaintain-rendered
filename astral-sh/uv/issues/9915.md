```yaml
number: 9915
title: /bin/sh is used as a const in for relocatable console_scripts in the shebang
type: issue
state: closed
author: markmarkmarkthebest
labels:
  - question
assignees: []
created_at: 2024-12-15T14:59:23Z
updated_at: 2025-01-06T20:47:42Z
url: https://github.com/astral-sh/uv/issues/9915
synced_at: 2026-01-10T01:57:23Z
```

# /bin/sh is used as a const in for relocatable console_scripts in the shebang

---

_Issue opened by @markmarkmarkthebest on 2024-12-15 14:59_

I have a console script which invokes a code that expects environments variables containing a dot (.) in their names to be passed. Sadly unlike "/bin/bash", /bin/sh does not support environment variable names in that format. It would be really nice if you could respect the "SHELL" env var to override the shebang in the relocatable console_scripts.
This is the relevant line of code: 
https://github.com/astral-sh/uv/blob/9e2e9f2d10e69e48ac0c58359db9a1c5208cff8b/crates/uv-install-wheel/src/wheel.rs#L131

---

_Comment by @zanieb on 2024-12-15 16:51_

My understand is that the shebang is consistent with rest of the ecosystem, though I could be wrong. Are there other tools that use `SHELL` here? Separately, I don't think it's desirable for us to maintain these shebangs for multiple shell dialects.

---

_Comment by @markmarkmarkthebest on 2024-12-16 05:28_

Doesn't seem like /bin/sh is used anywhere as a const in the rest of the ecosystem. In my case the /bin/sh shebang causes environment variables the code I am running depends on to be ignored. Changing the shebang to /bin/bash just fixes it but I can't control it because when using a relocatable venv it is automatically created with this shebang. @zanieb I understand that using /bin/sh allows the console script to be executed on every posix machine, but some applications rely on a specific shell dialect to execute the process. If you maybe have a solution how to solve it without manually editing the console scripts using sed, yet still making the venv relocatable it would be great (:

---

_Comment by @zanieb on 2024-12-16 17:01_

> Doesn't seem like /bin/sh is used anywhere as a const in the rest of the ecosystem.

Can you provide an example? The code you link to has a reference to pip which uses `/bin/sh` as well

https://github.com/pypa/pip/blob/0ad4c94be74cc24874c6feb5bb3c2152c398a18e/src/pip/_vendor/distlib/scripts.py#L136-L165

---

_Label `question` added by @zanieb on 2025-01-06 20:47_

---

_Closed by @zanieb on 2025-01-06 20:47_

---
