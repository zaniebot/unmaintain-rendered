<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is UV_SYSTEM_PYTHON variable fully respected? - astral-sh/uv #12715</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is UV_SYSTEM_PYTHON variable fully respected?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12715">#12715</a>
        opened by <a href="https://github.com/houtianze">@houtianze</a>
        on 2025-04-07 14:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/houtianze">@houtianze</a></div>
            <div class="timeline-body">Summary
<p>I&#x27;m not entirely sure if it&#x27;s a bug in <code>uv</code> or some misconfigured in Google Colab, but here is the Colab notebook that reproduced this:
https://colab.research.google.com/drive/17Ev3IAHypidXVbOSKRBH3sp9tWEnL_Jn</p>
<p>Google Colab somehow sets the <code>UV_SYSTEM_PYTHON </code> env var to <code>true</code>. If you run the code cell one by one (or just view the existing output), you will find the <code>uv sync</code> seems to not have installed the <code>spacy</code> package into the <code>.venv</code> directory, and running the system python directly can access this package, but when running <code>uv run python ...</code>, it can&#x27;t find it. I don&#x27;t know what is going on behind the scene, but this behavior doesn&#x27;t look right too me.</p>
Platform
<p>Linux x86_64</p>
Version
<p>0.6.12</p>
Python version
<p>3.13</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/houtianze">@houtianze</a> on 2025-04-07 14:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-07 14:27</div>
            <div class="timeline-body"><p><code>UV_SYSTEM_PYTHON</code> doesn&#x27;t affect the project APIs (<code>uv sync</code>, <code>uv run</code>, etc.). I believe it only affects the <code>uv pip</code> API.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-07 14:28</div>
            <div class="timeline-body"><p>The project APIs (<code>uv sync</code>, <code>uv run</code>, etc.) can instead be configured via <code>UV_PROJECT_ENVIRONMENT</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/houtianze">@houtianze</a> on 2025-04-07 15:53</div>
            <div class="timeline-body"><p>Thansk for the quick response.</p>
<p>After further inspection, it&#x27;s should be due to <code>misaki[zh]</code> not doesn&#x27;t have the <code>spacy</code> package as its dependency which I assume it does. I got confused as why <code>spacy</code> is not installed to <code>.venv</code> in this case but <code>uv pip</code> still sees it (the system one). In this case, <code>uv</code> behaves correctly per your explanation (it only affect <code>uv pip</code>), thus this is not a bug. Closing it now, thanks again.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/houtianze">@houtianze</a> on 2025-04-07 15:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:38:08 UTC
    </footer>
</body>
</html>
