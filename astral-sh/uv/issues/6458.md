```yaml
number: 6458
title: "`find-links` causing local wheel path to expand to absolute path when creating lockfile"
type: issue
state: closed
author: rseeley
labels:
  - bug
assignees: []
created_at: 2024-08-22T19:08:54Z
updated_at: 2024-08-26T17:56:47Z
url: https://github.com/astral-sh/uv/issues/6458
synced_at: 2026-01-10T01:57:14Z
```

# `find-links` causing local wheel path to expand to absolute path when creating lockfile

---

_Issue opened by @rseeley on 2024-08-22 19:08_

I'm working in a repo that uses several wheels for the same package, each one targeting a different architecture, stored in a directory local to the repo (`packages/package-a`). I'm using `uv` 0.3.1 and am on a Mac (M1). To accomplish installing the package across environments, I'm using the following setup in `pyproject.toml`:

```toml
dependencies = [
  "package-a>=0.1.2,<1.0.0"
]

[tool.uv]
find-links = [
  "packages/package-a"
]
```

This allows `uv` to discover the wheel properly, but when creating a `uv.lock` file with `uv lock`, it expands the file path to the absolute path on my system. This breaks portability when sharing amongst a team and when in CI. I'm wondering if this can be updated to be relative? I've tried doing `file:///packages/package-a` and`file:///./packages/package-a` and neither seem to work in `find-links`, giving me the error 

```
error: Failed to read `--find-links` directory: /packages/package-a
  Caused by: failed to read directory `/packages/package-a`
  Caused by: No such file or directory (os error 2)
```

I also tried `file://./packages/package-a` and got

```
error: Expected a file URL, but received: file://./packages/package-a
```

---

_Label `bug` added by @zanieb on 2024-08-22 21:14_

---

_Assigned to @charliermarsh by @zanieb on 2024-08-22 21:14_

---

_Comment by @charliermarsh on 2024-08-22 23:06_

Funny, we have tests for this, but the tests also resolve to the absolute path, so just an oversight ðŸ¤¦ 

---

_Referenced in [astral-sh/uv#6475](../../astral-sh/uv/pulls/6475.md) on 2024-08-22 23:52_

---

_Referenced in [astral-sh/uv#6566](../../astral-sh/uv/pulls/6566.md) on 2024-08-24 03:25_

---

_Comment by @charliermarsh on 2024-08-26 17:56_

Fixed in https://github.com/astral-sh/uv/pull/6566.

---

_Closed by @charliermarsh on 2024-08-26 17:56_

---

_Referenced in [astral-sh/uv#16602](../../astral-sh/uv/issues/16602.md) on 2025-11-05 17:17_

---
