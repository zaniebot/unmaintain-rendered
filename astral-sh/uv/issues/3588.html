<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Header of locked requirements does not include Python version - astral-sh/uv #3588</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Header of locked requirements does not include Python version</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/3588">#3588</a>
        opened by <a href="https://github.com/Rogdham">@Rogdham</a>
        on 2024-05-14 19:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Rogdham">@Rogdham</a></div>
            <div class="timeline-body"><p>Hello, I noticed that <code>pip-tools</code> includes the Python version compiled against in the header, while <code>uv</code> does not:</p>
<pre><code>1,6c1,2
&lt; #
&lt; # This file is autogenerated by pip-compile with Python 3.12
&lt; # by the following command:
&lt; #
&lt; #    pip-compile requirements.in
&lt; #
---
&gt; # This file was autogenerated by uv via the following command:
&gt; #    uv pip compile requirements.in -o requirements.txt
</code></pre>
<p>As we know, until a platform-agnostic lock file is created, the output depends on the Python version.</p>
<p>Having the version included is useful for caching mechanisms, typically in CI where the venv can be cached based on the hash of the <code>requirements.txt</code> file.</p>
<p>As a workaround for now, we can add the version in <code>UV_CUSTOM_COMPILE_COMMAND</code>.</p>
<p>Results above from pip-tools 7.4.1 / uv 0.1.44.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-15 04:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/avilaton">@avilaton</a> on 2024-07-14 14:03</div>
            <div class="timeline-body"><p>@charliermarsh I&#x27;ve proposed a change in dependabot that relies on the tiny piece of string <code>autogenerated by uv</code> to decide if it should use <code>uv pip compile</code> instead of <code>pip-compile</code>. I&#x27;m worried about the brittleness of this approach but if we don&#x27;t have any better ideas, I would like to at least add a test that ensures this doesn&#x27;t change without warning. I can try adding it if you think that helps.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:31:08 UTC
    </footer>
</body>
</html>
