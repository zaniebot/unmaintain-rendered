<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv tool upgrade` Not Functioning as Expected - astral-sh/uv #8276</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv tool upgrade</code> Not Functioning as Expected</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/8276">#8276</a>
        opened by <a href="https://github.com/powercoconola">@powercoconola</a>
        on 2024-10-17 00:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/powercoconola">@powercoconola</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>Hello :)</p>
<p>I am using the latest <code>uv</code> version:</p>
<pre><code>uv --version
uv 0.4.22 (34be3af84 2024-10-15)
</code></pre>
<p>I have an issue with <code>uv tool upgrade</code>. It does not seem to want to upgrade tools as I expect.
Here is an example with <code>ruff</code>:</p>
<pre><code>uv tool install ruff
Resolved 1 package in 290ms
Prepared 1 package in 1.26s
Installed 1 package in 29ms
 + ruff==0.6.9
Installed 1 executable: ruff.exe

uv tool uninstall ruff
Uninstalled 1 executable: ruff.exe

uv tool install ruff==0.6.6
Resolved 1 package in 110ms
Prepared 1 package in 922ms
Installed 1 package in 32ms
 + ruff==0.6.6
Installed 1 executable: ruff.exe

uv tool upgrade ruff
Nothing to upgrade
</code></pre>
<p><code>uv tool upgrade ruff</code> does not upgrade from 0.6.6 to 0.6.9.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "uv tool upgrade Not Functioning as Expected" to "`uv tool upgrade` Not Functioning as Expected" by @powercoconola on 2024-10-17 00:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-17 01:01</div>
            <div class="timeline-body"><p>Hi! Upgrading tools operates within the constraints you provide for the tool, so <code>uv tool install ruff==0.6.6</code> pins Ruff to that version in perpetuity. In contrast, <code>uv tool install ruff&gt;=0.6.6</code> and a future <code>uv tool upgrade ruff</code> would upgrade to a newer version.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-17 01:02</div>
            <div class="timeline-body"><p>This is described briefly in the help menu (e.g., <code>uv help tool upgrade</code>)</p>
<blockquote>
<p>Upgrade installed tools.</p>
<p>If a tool was installed with version constraints, they will be respected on upgrade â€” to upgrade a tool beyond the originally provided constraints, use <code>uv tool install</code> again.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-10-17 01:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">uv tool</span> added by @zanieb on 2024-10-17 01:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/powercoconola">@powercoconola</a> on 2024-10-17 01:06</div>
            <div class="timeline-body"><blockquote>
<p>Hi! Upgrading tools operates within the constraints you provide for the tool, so <code>uv tool install ruff==0.6.6</code> pins Ruff to that version in perpetuity. In contrast, <code>uv tool install ruff&gt;=0.6.6</code> and a future <code>uv tool upgrade ruff</code> would upgrade to a newer version.</p>
</blockquote>
<p>I see, this makes sense. I suppose for my usecase, I would like to ensure all tools are upgraded to their latest versions and so I would run <code>uv tool install --reinstall</code> instead. I wouldn't want my/someone else's error from using <code>==</code> prevent my updating of tools. The only issue with this is it is slower than simply upgrading.
Would a new function <code>uv tool upgrade --force</code> make sense here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/powercoconola">@powercoconola</a> on 2024-11-20 03:56</div>
            <div class="timeline-body"><p>Just revisiting this if anyone has any suggestions.
My goal is to have a single command update all my tools installed with <code>uv tool</code> to latest version, regardless of the current version installed and regardless if I or someone used <code>==</code> to denote version initially installed.</p>
<p>After much experimenting, it looks like this is the best solution:</p>
<pre><code>&gt;uv tool install ruff==0.7.3
Resolved 1 package in 117ms
Prepared 1 package in 1.24s
Uninstalled 1 package in 7ms
Installed 1 package in 38ms
 - ruff==0.7.4
 + ruff==0.7.3
Installed 1 executable: ruff.exe

&gt;uv tool update ruff
Nothing to upgrade

&gt;uv tool install --force ruff
Resolved 1 package in 22ms
Uninstalled 1 package in 14ms
Installed 1 package in 35ms
 - ruff==0.7.3
 + ruff==0.7.4
Installed 1 executable: ruff.exe
</code></pre>
<p>I'd use <code>uv tool install --force &lt;package&gt;</code> every time and never use <code>uv tool update</code> pretty much. Does anyone see any flaws in this method of updating tools?</p>
<p>Another option is to use <code>uv tool install --upgrade &lt;package&gt;</code>, but I'm not sure what the difference is.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:27:45 UTC
    </footer>
</body>
</html>
