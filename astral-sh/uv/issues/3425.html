<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make it possible to avoid yanked versions of packages in compiled requirements - astral-sh/uv #3425</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make it possible to avoid yanked versions of packages in compiled requirements</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3425">#3425</a>
        opened by <a href="https://github.com/barseghyanartur">@barseghyanartur</a>
        on 2024-05-07 15:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/barseghyanartur">@barseghyanartur</a> on 2024-05-07 15:20</div>
            <div class="timeline-body"><h2>Feature request</h2>
<p>Make it possible to avoid yanked versions of packages in compiled requirements (compiled with <code>uv pip compile</code>).</p>
<h3>What's the problem this feature will solve?</h3>
<p>For instance, <a href="https://pypi.org/project/Django/4.2.12/">Django 4.2.12</a> was marked as yanked, but appears in the compiled requirements. Not ideal.</p>
<h3>Describe the solution you'd like</h3>
<p>At least to have an option to opt-out from yanked versions. It would be better though to have that as a default (and have an optional argument for opting-in).</p>
<h3>Command</h3>
<pre><code class="language-sh">uv pip compile --output-file requirements/default.txt \
    --no-strip-extras \
    --extra tests --extra loadtests pyproject.toml \
    --no-emit-package pip \
    --upgrade
</code></pre>
<h3>UV platform</h3>
<p>macOS</p>
<h3>UV version</h3>
<p>0.1.39</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/barseghyanartur">@barseghyanartur</a> on 2024-05-07 15:39</div>
            <div class="timeline-body"><p>It might be that you already do that. In that case, maybe I was unlucky, and my requirements were compiled after the release has been marked as yanked. In that case, sorry for the buzz. Worth checking anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-07 15:56</div>
            <div class="timeline-body"><p>Yanked versions should already be excluded unless they are pinned in the requirements we're compiling.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-05-07 15:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/barseghyanartur">@barseghyanartur</a> on 2024-05-07 19:43</div>
            <div class="timeline-body"><p>@zanieb:</p>
<p>Thanks for confirming. Then it was probably just a bad timing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @barseghyanartur on 2024-05-07 19:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/seefood">@seefood</a> on 2025-08-25 08:51</div>
            <div class="timeline-body"><p>just got a remark about a yanked package for the first time while running uv lock. it's not an explicit dependency. should I just accept the fate or make it an explicit dependency? is there a recommended workaround or is uv smart enough to have used one if there was and I should just accept its resolution as the best scenario?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-25 12:55</div>
            <div class="timeline-body"><p>We'll usually only use a yanked version if it's pinned somewhere, so presumably one of your dependencies is pinning to that yanked version?</p>
<p>You can use <code>uv lock --upgrade-package &lt;name&gt;</code> to see if we can resolve to another version.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/seefood">@seefood</a> on 2025-08-26 10:55</div>
            <div class="timeline-body"><p>in my case it just said package foo version 1.5.0 is yanked, so I explicitly added foo&lt;1.5.0 and the lock indeed picked 1.4.5 and said nothing. I think there's no automatic attempt by uv to avoid yanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-27 18:56</div>
            <div class="timeline-body"><p>That's just not true. See the test coverage at https://github.com/astral-sh/uv/blob/ee0ba65eb22c6bba59ea216ff07aeb170f8d3f2a/crates/uv/tests/it/pip_install_scenarios.rs#L4189-L4631</p>
<p>Feel free to share a reproduction in a new issue and we can look at it. It's not appropriate to bump an old issue like this.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:27 UTC
    </footer>
</body>
</html>
