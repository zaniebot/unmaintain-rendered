```yaml
number: 9985
title: Conforming to the XDG specification
type: issue
state: closed
author: NellyWhads
labels:
  - question
assignees: []
created_at: 2024-12-17T23:18:57Z
updated_at: 2024-12-18T18:54:53Z
url: https://github.com/astral-sh/uv/issues/9985
synced_at: 2026-01-10T01:57:23Z
```

# Conforming to the XDG specification

---

_Issue opened by @NellyWhads on 2024-12-17 23:18_

Currently, `uv` prioritizes `$HOME/...` paths over `$XDG_*` paths in most cases. This behavior is contradictory to the [XDG specification](https://specifications.freedesktop.org/basedir-spec/latest/#variables).

This means when setting `XDG_*` variables in a docker image, for example, `UV_*` variables also must be set.

Examples of variables which do not automatically use the `XDG_*` specification:
```Dockerfile
ENV UV_TOOL_DIR="${XDG_STATE_HOME}/uv/tools"
ENV UV_PYTHON_INSTALL_DIR="${XDG_STATE_HOME}/uv/python"
ENV UV_CACHE_DIR="${XDG_CACHE_HOME}/uv"
```

Example of a `UV_*` variable mapping to multiple potential `XDG_*` locations: https://docs.astral.sh/uv/configuration/installer/#changing-the-install-path

Consistent environment inheritance would make `uv` easier to configure according to the XDG specification.

---

_Comment by @charliermarsh on 2024-12-17 23:32_

I think these all respect XDG... The uv cache at least respects `XDG_CACHE_HOME`. I believe the tool dir also respects `XDG_BIN_HOME`. And Python respects `XDG_DATA_HOME`.


---

_Label `question` added by @charliermarsh on 2024-12-17 23:32_

---

_Comment by @NellyWhads on 2024-12-17 23:46_

I'll try again but was running into path errors unless I explicitly set them in the Dockerfile.

I presume this isn't a recent change - they've been respected for quite some time?

---

_Comment by @zanieb on 2024-12-18 02:11_

Yeah I think we've respected XDG-first for quite some time.

---

_Comment by @NellyWhads on 2024-12-18 17:23_

Here's the outcome of my testing:

```shell
$ env | grep -E "^(XDG|UV)_" && uv cache dir && uv python dir && uv tool dir
XDG_BIN_HOME=/opt/bin
XDG_DATA_HOME=/opt/share
XDG_CONFIG_HOME=/opt/config
XDG_CACHE_HOME=/opt/cache
XDG_STATE_HOME=/opt/state
/opt/cache/uv
/opt/share/uv/python
/opt/share/uv/tools
```

I tried searching through the uv docs for either a config print-out which can tell the user where each of the UV_* directories are expected to be mapped, or consistent documentation regarding which XDG_* directories will be used for but wasn't able to track something consistent down.

Manually executing tool and python installs leads to these inferred locations:

Tools:
```shell
$ uv tool install tldr && whereis tldr
Resolved 4 packages in 49ms
Prepared 4 packages in 15ms
Installed 4 packages in 4ms
 + colorama==0.4.6
 + shtab==1.7.1
 + termcolor==2.5.0
 + tldr==3.3.0
Installed 1 executable: tldr
tldr: /opt/bin/tldr
```

Python versions:
```shell
$ uv python install 3.8 && whereis python3.8
Installed Python 3.8.20 in 1.10s
 + cpython-3.8.20-linux-x86_64-gnu
python3.8:

$ export UV_PYTHON_BIN_DIR=${XDG_BIN_HOME}

$ uv python install 3.10 && whereis python3.10
Installed Python 3.10.16 in 1.14s
 + cpython-3.10.16-linux-x86_64-gnu
python3.10:

$ env | grep -E "^(XDG|UV)_"
UV_PYTHON_BIN_DIR=/opt/bin
XDG_BIN_HOME=/opt/bin
XDG_DATA_HOME=/opt/share
XDG_CONFIG_HOME=/opt/config
XDG_CACHE_HOME=/opt/cache
XDG_STATE_HOME=/opt/state
```

Could I get some help with the python bin dir configuration? If so, I'd be happy to make a small PR which adds the appropriate references to the environment variables page.

---

_Comment by @charliermarsh on 2024-12-18 17:24_

I think these are all documented in the help? Like `uv help python dir`.

---

_Comment by @zanieb on 2024-12-18 17:27_

We don't install Python binaries into the bin directory without `--preview`, ref https://github.com/astral-sh/uv/pull/8458

---

_Comment by @NellyWhads on 2024-12-18 17:36_

Ah, okay. I have been reading the web documentation here: https://docs.astral.sh/uv/configuration/environment/

The references aren't easily traced in those links.

`--preview` did indeed fix the python linking - I'll enable that in my docker setup!

---

_Comment by @NellyWhads on 2024-12-18 18:18_

Is python bin-linking the only current `--preview` feature (seems to be the only mention in web docs)? Can we expect more / where can we learn about all `--preview` features?


---

_Comment by @zanieb on 2024-12-18 18:21_

The other preview feature is a build backend. We'll probably talk more about preview features in the documentation in the future, yeah. They're mentioned in the changelog.

---

_Closed by @NellyWhads on 2024-12-18 18:54_

---

_Referenced in [astral-sh/uv#13307](../../astral-sh/uv/issues/13307.md) on 2025-05-06 00:14_

---
