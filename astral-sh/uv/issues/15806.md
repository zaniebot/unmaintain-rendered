```yaml
number: 15806
title: "Unable to pass a path containing spaces to the `--env-file` option of `uv run`"
type: issue
state: closed
author: angelo-peronio
labels:
  - bug
assignees: []
created_at: 2025-09-12T10:13:11Z
updated_at: 2025-09-18T11:38:38Z
url: https://github.com/astral-sh/uv/issues/15806
synced_at: 2026-01-10T01:57:35Z
```

# Unable to pass a path containing spaces to the `--env-file` option of `uv run`

---

_Issue opened by @angelo-peronio on 2025-09-12 10:13_

### Summary

I am not able to pass a path containing spaces to the `--env-file` option of `uv run`, both on Windows and on Linux. Passing the same path to the `--directory` option works as expected, instead. Might be related to #12639. Am I missing something obvious?

### On Windows / PowerShell

* Platform: Microsoft Windows 11 Version 24H2 (OS Build 26100.4946) x86_64
* Shell: PowerShell 7.5.2
* `uv` version: uv 0.8.17 (10960bc13 2025-09-10)
* Python version: Python 3.13.7 (main, Sep  2 2025, 14:16:00) [MSC v.1944 64 bit (AMD64)]

```powershell
PS> mkdir "path with spaces"
PS> "TEST=Success!" | Out-File '.\path with spaces\.env'

PS> uv run -vvv --env-file="path with spaces\.env" python -c 'import os; print(os.environ["TEST"])'
DEBUG uv 0.8.17 (10960bc13 2025-09-10)
TRACE Error trace: No environment file found at: `spaces\.env`
error: No environment file found at: `spaces\.env`
```

The "obvious" escape attempts did not work:

```powershell
PS> uv run --env-file='path with spaces\.env' python -c 'import os; print(os.environ["TEST"])'
error: No environment file found at: `spaces\.env`

PS> uv run --env-file=path` with` spaces\.env python -c 'import os; print(os.environ["TEST"])'
error: No environment file found at: `spaces\.env`

PS> uv run "--env-file='path with spaces\.env'" python -c 'import os; print(os.environ["TEST"])'
error: No environment file found at: `spaces\.env'`
```

A path with no whitespaces works as expected:

```powershell
PS> mkdir path-without-spaces
PS> "TEST=Success!" | Out-File .\path-without-spaces\.env
PS> uv run --env-file=path-without-spaces\.env python -c 'import os; print(os.environ["TEST"])'
Success!
```

Interestingly, `uv run --directory` works as expected:

```powershell
PS> uv run --directory="path with spaces" pwsh -Command pwd

Path
----
C:\cache\test\mre\path with spaces
```


### On Linux / bash

* Platform: Linux 6.6.87.2-microsoft-standard-WSL2 x86_64 GNU/Linux
* Shell: GNU bash, version 5.2.21(1)-release (x86_64-pc-linux-gnu)
* `uv` version: uv 0.8.17
* Python version: Python 3.12.3 (main, Aug 14 2025, 17:47:21) [GCC 13.3.0]

I observed the same behavior on Linux WSL:

```bash
$> mkdir 'path with spaces'
$> echo TEST=Success! > path\ with\ spaces/.env
$> uv run -vvv --env-file=path\ with\ spaces/.env python -c 'import os; print(os.environ["TEST"])'
DEBUG uv 0.8.17
TRACE Error trace: No environment file found at: `spaces/.env`
error: No environment file found at: `spaces/.env`

$> uv run --env-file='path with spaces/.env' python -c 'import os; print(os.environ["TEST"])'
error: No environment file found at: `spaces/.env`

$> uv run --env-file="path with spaces/.env" python -c 'import os; print(os.environ["TEST"])'
error: No environment file found at: `spaces/.env`
```

---

_Label `bug` added by @angelo-peronio on 2025-09-12 10:13_

---

_Assigned to @charliermarsh by @charliermarsh on 2025-09-12 15:05_

---

_Comment by @charliermarsh on 2025-09-12 15:39_

It's because you can provide multiple values by space-delimiting. Let me see if there's a way to escape it in Clap...

---

_Comment by @charliermarsh on 2025-09-12 15:45_

It doesn't look like there's any way to fix it natively in Clap, but I will add our own escaping.

---

_Referenced in [astral-sh/uv#15815](../../astral-sh/uv/pulls/15815.md) on 2025-09-12 16:08_

---

_Closed by @charliermarsh on 2025-09-12 22:11_

---

_Comment by @angelo-peronio on 2025-09-18 11:38_

It works, thank you!

For reference: in the path passed to `--env-file`, one needs to use forward slashes `/` as path separators, and escape whitespaces with backward slashes `\`.

---
