<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What's the recommended way to specify C-extension build? - astral-sh/uv #10382</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>What's the recommended way to specify C-extension build?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/10382">#10382</a>
        opened by <a href="https://github.com/Guitaricet">@Guitaricet</a>
        on 2025-01-08 01:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Guitaricet">@Guitaricet</a> on 2025-01-08 01:56</div>
            <div class="timeline-body"><p>Hello! Love uv so far</p>
<p>I'm getting a bit confused with what's the recommended way to migrate python bindings for C-modules to uv with <code>setup.py</code> like this:</p>
<pre><code>import numpy
from setuptools import Extension, setup

a_module = Extension(
    &quot;my_extension&quot;,
    sources=[&quot;extension.c&quot;],
    libraries=[&quot;turbojpeg&quot;],
    library_dirs=[&quot;/usr/lib&quot;],
    include_dirs=[numpy.get_include(), &quot;/usr/include/&quot;],
)

setup(
    name=&quot;my_extension&quot;,
    version=&quot;1.0&quot;,
    description=&quot;Extension written in C&quot;,
    ext_modules=[a_module],
    install_requires=[&quot;numpy&lt;2.0.0&quot;],
)
</code></pre>
<p>I think specifically, it's not obvious how to describe <code>Extension</code> object. Any recommendations would be really appreciated</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-01-08 03:06</div>
            <div class="timeline-body"><p>Howdy, this seems related to https://github.com/astral-sh/uv/issues/10267</p>
<p>I would use a build backend that facilitates building extension modules in a build isolation compatible manner out of the box such as <a href="https://github.com/scikit-build/scikit-build-core">scikit-build-core</a>. <code>uv init --build-backend scikit</code> can provide a working example if you're interested. This type of build backend will give you the mos flexibility and compatibility with uv over legacy setuptools approach.</p>
<p>Nonetheless, if your only option is to rely on legacy setuptools, uv should still call your legacy setup.py script using <code>setuptools.build_meta:__legacy__</code> as the build backend. You can specify this build backend on your pyproject.toml if needed, more info can be found in https://setuptools.pypa.io/en/latest/userguide/pyproject_config.html / https://setuptools.pypa.io/en/latest/userguide/ext_modules.html</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @samypr100 on 2025-01-08 03:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-03-03 03:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:32:01 UTC
    </footer>
</body>
</html>
