---
number: 10931
title: "Diagnose `.dirty` version"
type: issue
state: closed
author: superlopuh
labels:
  - question
assignees: []
created_at: 2025-01-24T08:49:03Z
updated_at: 2025-01-24T17:24:11Z
url: https://github.com/astral-sh/uv/issues/10931
synced_at: 2026-01-10T01:24:59Z
---

# Diagnose `.dirty` version

---

_Issue opened by @superlopuh on 2025-01-24 08:49_

### Question

Is there a way to print the reasoning behind a `.dirty` in the version of a package? I'm playing around with my dependency spec in a `pyproject.toml`, and seemingly innocuous changes add a `.dirty` to the version string, and I have no idea why.

### Platform

macOS 15.2

### Version

uv 0.5.20 (Homebrew 2025-01-15)

---

_Label `question` added by @superlopuh on 2025-01-24 08:49_

---

_Comment by @charliermarsh on 2025-01-24 14:43_

Sorry, can you create a reproduction? This doesn't seem to be a uv behavior. I'm guessing that your build backend is doing this. Are you using dynamic metadata?

---

_Comment by @superlopuh on 2025-01-24 16:32_

Hi, would you like me to create a minimal reproducer? Here are the steps to reproduce in the project I'm working on, we do use a dynamic version.

The behaviour can be observed by cloning our pure python repo and comparing [this branch](https://github.com/xdslproject/xdsl/tree/sasha/dependencies/less-precise-versions) to main. Running `uv sync` or `make venv` on main results in a non-dirty version, vs the branch's dirty suffix. The `~=` seem to cause it.

---

_Comment by @konstin on 2025-01-24 16:35_

The `.dirty` seems to be created by `versioneer.py`, unrelated to uv

---

_Comment by @superlopuh on 2025-01-24 16:38_

I see, thank you! I wasn't sure how to phrase the issue, and I appreciate your help here, but do you think that some way to get uv to print the reasoning behind the .dirty would make sense? It would be nice to know where to start looking as a user instead of filing a new issue when this happens.

---

_Comment by @superlopuh on 2025-01-24 16:39_

Or you mean that the version string itself is generated by versioneer, and unrelated to uv?

---

_Comment by @notatallshaw on 2025-01-24 17:00_

When you build from source code, the front end installer (in this case uv, but could be pip, or poetry, or pdm, etc.) calls the backend builder (in this case [setuptools and versioneer](https://github.com/xdslproject/xdsl/blob/sasha/dependencies/less-precise-versions/pyproject.toml#L69)) to build the package.

The front end only knows what the backend is doing via some limited hooks, and anything that is printed to stdout or stderr, the backend can be running arbitary code. As [your version](https://github.com/xdslproject/xdsl/blob/sasha/dependencies/less-precise-versions/pyproject.toml#L14) is dynamic that tells the frontend to get the version from the backend.

Versioneer is doing *something* to put "[dirty](https://github.com/xdslproject/xdsl/blob/sasha/dependencies/less-precise-versions/versioneer.py#L78)" in the [version string](https://github.com/xdslproject/xdsl/blob/sasha/dependencies/less-precise-versions/versioneer.py#L128). But the frontend, uv, is not privy to why it is doing that.

---

_Comment by @superlopuh on 2025-01-24 17:24_

Thank you for the explanation! I was under the impression that uv appended this to the version string when some modifications were made to the venv it managed, sorry about the noise.

---

_Closed by @superlopuh on 2025-01-24 17:24_

---
