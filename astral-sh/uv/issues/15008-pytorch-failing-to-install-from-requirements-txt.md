```yaml
number: 15008
title: "Pytorch failing to install from `requirements.txt` generated by `uv export`"
type: issue
state: closed
author: bradenkinard-sh
labels:
  - question
assignees: []
created_at: 2025-07-31T21:15:26Z
updated_at: 2025-08-01T14:32:04Z
url: https://github.com/astral-sh/uv/issues/15008
synced_at: 2026-01-12T16:02:02Z
```

# Pytorch failing to install from `requirements.txt` generated by `uv export`

---

_@bradenkinard-sh_

### Summary

I'm working on building an AWS Lambda that uses Pytorch. I've set up my project similar to the documentation for Pytorch here: https://docs.astral.sh/uv/guides/integration/pytorch/

I am finding that if I use `uv pip compile` to generate a `requirements.txt` in my dockerfile, it builds without issue. However, if I try to use `uv export` to generate a `requirements.txt`, and attempt to install from that, I get errors because it claims it cannot find the specified version of pytorch for a non-Darwin machine.

This version works:
```uv-pip-compile.Dockerfile
...
# Install dependencies
RUN --mount=from=uv,source=/uv,target=/bin/uv \
    --mount=type=cache,target=/root/.cache/uv \
    --mount=type=bind,source=uv.lock,target=uv.lock \
    --mount=type=bind,source=pyproject.toml,target=pyproject.toml \
    uv pip compile pyproject.toml --output-file requirements.txt --index https://download.pytorch.org/whl/cpu --emit-index-url && \
    uv pip install -r requirements.txt --target "${LAMBDA_TASK_ROOT}"
```

This version fails:
```uv-export.Dockerfile
...
# Install dependencies
RUN --mount=from=uv,source=/uv,target=/bin/uv \
    --mount=type=cache,target=/root/.cache/uv \
    --mount=type=bind,source=uv.lock,target=uv.lock \
    --mount=type=bind,source=pyproject.toml,target=pyproject.toml \
    uv export --frozen --no-dev --no-editable -o requirements.txt --index-url https://download.pytorch.org/whl/cpu && \
    uv pip install -r requirements.txt --target "${LAMBDA_TASK_ROOT}"
```

I can't tell if this is user error on my part in terms of the arguments I'm passing to `uv export` or if this is a genuine bug.

I've created a minimal reproducible [example here](https://github.com/bradenkinard-sh/uv-pytorch-example).

### Platform

macOS 15.5 Darwin 24.5.0 arm64

### Version

uv 0.7.13 (Homebrew 2025-06-12)

### Python version

Python 3.13.0

---

_Label `bug` added by @bradenkinard-sh on 2025-07-31 21:15_

---

_Comment by @zanieb on 2025-07-31 21:34_

We don't emit index URLs in `uv export`, I imagine that's the problem? e.g., https://github.com/astral-sh/uv/issues/10008

---

_Label `bug` removed by @zanieb on 2025-08-01 12:46_

---

_Label `question` added by @zanieb on 2025-08-01 12:46_

---

_Comment by @vancromy on 2025-08-01 13:35_

Correct @zanieb. I'm in the same boat. I have to manually edit the generated file. #10008 has been dormant since April. What is stopping the issue from being addressed? Is it development resource or a higher level discussion about whether it should be supported?

---

_Comment by @zanieb on 2025-08-01 13:50_

We cannot express the index URL semantics provided by the `pyproject.toml` (e.g., explicit indexes) in a `requirements.txt` file, so we don't want to include them in the export. I think the long-term solution is probably going to be to export to a `pylock.toml` instead.

Can you just provide the `--index-url` to the `pip install` invocation?

---

_Comment by @bradenkinard-sh on 2025-08-01 14:32_

@zanieb Yes, passing `--index-url` to `pip install` works, at least in my case. Thanks for the clarification.

---

_Closed by @bradenkinard-sh on 2025-08-01 14:32_

---
