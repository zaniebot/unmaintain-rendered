<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unexpected uv pip compile results regarding python version requrements - astral-sh/uv #13411</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>unexpected uv pip compile results regarding python version requrements</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/13411">#13411</a>
        opened by <a href="https://github.com/schenker">@schenker</a>
        on 2025-05-12 14:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/schenker">@schenker</a> on 2025-05-12 14:56</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I get unexpected results when compiling a requirements.in with <code>uv pip compile</code>.</p>
<pre><code class="language-console">% cat requirements.in 
overpass
</code></pre>
<p>Compiling this file with <code>uv pip compile</code> gives the following output (<strong>overpass==0.72</strong>):</p>
<pre><code class="language-console">% uv pip compile -o requirements.txt requirements.in --upgrade --python-version 3.13
Resolved 9 packages in 192ms
# This file was autogenerated by uv via the following command:
#    uv pip compile -o requirements.txt requirements.in --python-version 3.13
certifi==2025.4.26
    # via requests
charset-normalizer==3.4.2
    # via requests
idna==3.10
    # via requests
numpy==2.2.5
    # via shapely
osm2geojson==0.2.6
    # via overpass
overpass==0.7.2
    # via -r requirements.in
requests==2.32.3
    # via
    #   osm2geojson
    #   overpass
shapely==2.1.0
    # via osm2geojson
urllib3==2.4.0
    # via requests
</code></pre>
<p>Compiling the file with <code>piptools</code> gives me the following output (<strong>overpass==0.7</strong>):</p>
<pre><code class="language-console"> % python3 -m piptools compile -o requirements.txt requirements.in --upgrade         
WARNING: --strip-extras is becoming the default in version 8.0.0. To silence this warning, either use --strip-extras to opt into the new default or use --no-strip-extras to retain the existing behavior.
#
# This file is autogenerated by pip-compile with Python 3.13
# by the following command:
#
#    pip-compile --output-file=requirements.txt requirements.in
#
certifi==2025.4.26
    # via requests
charset-normalizer==3.4.2
    # via requests
geojson==3.2.0
    # via overpass
idna==3.10
    # via requests
numpy==2.2.5
    # via shapely
overpass==0.7
    # via -r requirements.in
requests==2.32.3
    # via overpass
shapely==2.1.0
    # via overpass
urllib3==2.4.0
    # via requests
</code></pre>
<p>overpass 0.71 introduced <a href="https://github.com/mvexel/overpass-api-python-wrapper/blob/39f71509a7b5640a55af01ac77ab437ac44796d1/pyproject.toml#L13">pyproject.toml</a>, which states that only python&lt;3.12 is supported.</p>
<p>Installing the requirements that were generated with <code>uv</code> via <code>pip</code> fails, while installing them via <code>uv pip</code> works:</p>
<pre><code class="language-console">% pip install -r requirements.txt   
Collecting certifi==2025.4.26 (from -r requirements.txt (line 3))
  Using cached certifi-2025.4.26-py3-none-any.whl.metadata (2.5 kB)
Collecting charset-normalizer==3.4.2 (from -r requirements.txt (line 5))
  Using cached charset_normalizer-3.4.2-cp313-cp313-macosx_10_13_universal2.whl.metadata (35 kB)
Collecting idna==3.10 (from -r requirements.txt (line 7))
  Using cached idna-3.10-py3-none-any.whl.metadata (10 kB)
Collecting numpy==2.2.5 (from -r requirements.txt (line 9))
  Using cached numpy-2.2.5-cp313-cp313-macosx_14_0_arm64.whl.metadata (62 kB)
Collecting osm2geojson==0.2.6 (from -r requirements.txt (line 11))
  Using cached osm2geojson-0.2.6.tar.gz (14 kB)
  Preparing metadata (setup.py) ... done
ERROR: Could not find a version that satisfies the requirement overpass==0.7.2 (from versions: 0.2.3, 0.2.4, 0.2.5, 0.2.6, 0.3, 0.3.1, 0.4.0, 0.5.0, 0.5.1, 0.5.2, 0.5.3, 0.5.4, 0.5.6, 0.6.0, 0.6.1, 0.7)

[notice] A new release of pip is available: 25.0.1 -&gt; 25.1.1
[notice] To update, run: pip install --upgrade pip
ERROR: No matching distribution found for overpass==0.7.2

% uv pip install -r requirements.txt
Using Python 3.13.3 environment at: v
Resolved 9 packages in 4ms
Installed 9 packages in 20ms
 + certifi==2025.4.26
 + charset-normalizer==3.4.2
 + idna==3.10
 + numpy==2.2.5
 + osm2geojson==0.2.6
 + overpass==0.7.2
 + requests==2.32.3
 + shapely==2.1.0
 + urllib3==2.4.0
</code></pre>
<p>I would like to understand why <code>uv pip compile -o requirements.txt requirements.in --upgrade --python-version 3.12</code> appears to be selecting a version of overpass that does not support python 3.13.</p>
<h3>Platform</h3>
<p>Ubuntu 24.04 with python 3.12 and macOS Sequoia 15.4.1 with python 3.13.</p>
<h3>Version</h3>
<p>uv 0.6.14 (a4cec56dc 2025-04-09)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @schenker on 2025-05-12 14:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-12 15:33</div>
            <div class="timeline-body"><p>We generally don't enforce upper-bounds on <code>requires-python</code>: https://docs.astral.sh/uv/pip/compatibility/#requires-python-enforcement.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/schenker">@schenker</a> on 2025-05-12 15:48</div>
            <div class="timeline-body"><p>Thanks for the quick answer!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @schenker on 2025-05-12 15:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:03 UTC
    </footer>
</body>
</html>
