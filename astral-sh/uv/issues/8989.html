<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inconsistent/wrong dependencies inferred from egg-info in sdist - astral-sh/uv #8989</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Inconsistent/wrong dependencies inferred from egg-info in sdist</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8989">#8989</a>
        opened by <a href="https://github.com/zeevro">@zeevro</a>
        on 2024-11-10 14:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zeevro">@zeevro</a></div>
            <div class="timeline-body"><p><code>uv</code> tries to find static metadata so eagerly, it will use weird egg-info files that somehow found their way into sdists. However, these may conflict with the <code>setup.py</code> contents. I think there should be a way to tell <code>uv</code> to ignore these and run the build-backend to get the metadata - even on <code>uv lock</code> and the like.</p>
<p>EDIT: Seems like they aren't &quot;weird egg-info files files that somehow found their way in&quot; but are intended to be there and the problem lies with this specific package and its weird <code>setup.py</code> that checks what's installed in the environment. Still, I think it would be a good idea to have a way to ignore the egg-info and call the build-backend for metadata (like <code>pip</code> does).</p>
<pre><code># uv venv --no-cache
Using CPython 3.12.3 interpreter at: /usr/local/bin/python3
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate

# uv pip install --no-cache -v dkimpy
DEBUG uv 0.5.1
DEBUG Searching for default Python interpreter in virtual environments
DEBUG Found `cpython-3.12.3-linux-x86_64-gnu` at `/root/.venv/bin/python3` (virtual environment)
DEBUG Using Python 3.12.3 environment at .venv
DEBUG Acquired lock for `.venv`
DEBUG At least one requirement is not satisfied: dkimpy
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.12.3
DEBUG Solving with target Python version: &gt;=3.12.3
DEBUG Adding direct dependency: dkimpy*
DEBUG No cache entry for: https://pypi.org/simple/dkimpy/
DEBUG Acquired lock for `/tmp/.tmpgVoVHL/sdists-v6/pypi/dkimpy/1.1.8`
DEBUG Searching for a compatible version of dkimpy (*)
DEBUG Selecting: dkimpy==1.1.8 [compatible] (dkimpy-1.1.8.tar.gz)
DEBUG No cache entry for: https://files.pythonhosted.org/packages/f0/6f/84e91828186bbfcedd7f9385ef5e0d369632444195c20e08951b7ffe0481/dkimpy-1.1.8.tar.gz
DEBUG Downloading source distribution: dkimpy==1.1.8
DEBUG No static `pyproject.toml` available for: dkimpy==1.1.8 (MissingPyprojectToml)
DEBUG No static `PKG-INFO` available for: dkimpy==1.1.8 (PkgInfo(UnsupportedMetadataVersion(&quot;2.1&quot;)))
DEBUG Found static `egg-info` for: dkimpy==1.1.8
DEBUG Released lock at `/tmp/.tmpgVoVHL/sdists-v6/pypi/dkimpy/1.1.8/.lock`
DEBUG Adding transitive dependency for dkimpy==1.1.8: py3dns*
DEBUG No cache entry for: https://pypi.org/simple/py3dns/
DEBUG No cache entry for: https://files.pythonhosted.org/packages/b7/43/1ff28f5302a0f423d4210cacc1f12fb416b6ba1f4c7107e020d264acb625/py3dns-4.0.2-py3-none-any.whl.metadata
DEBUG Searching for a compatible version of py3dns (*)
DEBUG Selecting: py3dns==4.0.2 [compatible] (py3dns-4.0.2-py3-none-any.whl)
DEBUG Tried 2 versions: dkimpy 1, py3dns 1
DEBUG marker environment resolution took 0.626s
Resolved 2 packages in 626ms
DEBUG Identified uncached distribution: dkimpy==1.1.8
DEBUG Identified uncached distribution: py3dns==4.0.2
DEBUG Acquired lock for `/tmp/.tmpgVoVHL/sdists-v6/pypi/dkimpy/1.1.8`
DEBUG No cache entry for: https://files.pythonhosted.org/packages/b7/43/1ff28f5302a0f423d4210cacc1f12fb416b6ba1f4c7107e020d264acb625/py3dns-4.0.2-py3-none-any.whl
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/f0/6f/84e91828186bbfcedd7f9385ef5e0d369632444195c20e08951b7ffe0481/dkimpy-1.1.8.tar.gz
DEBUG Building: dkimpy==1.1.8
DEBUG Ignoring empty directory
DEBUG Resolving build requirements
DEBUG Solving with installed Python version: 3.12.3
DEBUG Solving with target Python version: &gt;=3.12.3
DEBUG Adding direct dependency: setuptools&gt;=40.8.0
DEBUG No cache entry for: https://pypi.org/simple/setuptools/
WARN Skipping file for setuptools: setuptools-0.6b1-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b1-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6b2-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b2-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6b3-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b3-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6b4-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6b4-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c1-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c1-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c10-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c10-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c10-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c10-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c10-py2.6.egg
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c10.win32-py2.6.exe
WARN Skipping file for setuptools: setuptools-0.6c11-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c11-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.6.egg
WARN Skipping file for setuptools: setuptools-0.6c11-py2.7.egg
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.6.exe
WARN Skipping file for setuptools: setuptools-0.6c11.win32-py2.7.exe
WARN Skipping file for setuptools: setuptools-0.6c2-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c2-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c3-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c3-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c3-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c4-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c4-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c4-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c4-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c4.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c4.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c4.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c5-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c5-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c5-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c5-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c5.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c5.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c5.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c6-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c6-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c6-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c6-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c6.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c6.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c6.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c7-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c7-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c7-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c7-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c7.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c7.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c7.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c8-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c8-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c8-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c8-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c8.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c8.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c8.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-0.6c9-1.src.rpm
WARN Skipping file for setuptools: setuptools-0.6c9-py2.3.egg
WARN Skipping file for setuptools: setuptools-0.6c9-py2.4.egg
WARN Skipping file for setuptools: setuptools-0.6c9-py2.5.egg
WARN Skipping file for setuptools: setuptools-0.6c9-py2.6.egg
WARN Skipping file for setuptools: setuptools-0.6c9.win32-py2.3.exe
WARN Skipping file for setuptools: setuptools-0.6c9.win32-py2.4.exe
WARN Skipping file for setuptools: setuptools-0.6c9.win32-py2.5.exe
WARN Skipping file for setuptools: setuptools-18.3.1-py3.4.egg
DEBUG Searching for a compatible version of setuptools (&gt;=40.8.0)
DEBUG Selecting: setuptools==75.3.0 [compatible] (setuptools-75.3.0-py3-none-any.whl)
DEBUG No cache entry for: https://files.pythonhosted.org/packages/90/12/282ee9bce8b58130cb762fbc9beabd531549952cac11fc56add11dcb7ea0/setuptools-75.3.0-py3-none-any.whl.metadata
DEBUG Tried 1 versions: setuptools 1
DEBUG marker environment resolution took 0.257s
DEBUG Installing in setuptools==75.3.0 in /tmp/.tmpgVoVHL/builds-v0/.tmpDHLvPB
DEBUG Identified uncached distribution: setuptools==75.3.0
DEBUG Downloading and building requirement for build: setuptools==75.3.0
DEBUG No cache entry for: https://files.pythonhosted.org/packages/90/12/282ee9bce8b58130cb762fbc9beabd531549952cac11fc56add11dcb7ea0/setuptools-75.3.0-py3-none-any.whl
DEBUG Installing build requirement: setuptools==75.3.0
DEBUG Creating PEP 517 build environment
DEBUG Calling `setuptools.build_meta:__legacy__.get_requires_for_build_wheel()`
DEBUG running egg_info
DEBUG writing dkimpy.egg-info/PKG-INFO
DEBUG writing dependency_links to dkimpy.egg-info/dependency_links.txt
DEBUG writing entry points to dkimpy.egg-info/entry_points.txt
DEBUG writing requirements to dkimpy.egg-info/requires.txt
DEBUG writing top-level names to dkimpy.egg-info/top_level.txt
DEBUG reading manifest file 'dkimpy.egg-info/SOURCES.txt'
DEBUG reading manifest template 'MANIFEST.in'
DEBUG warning: no previously-included files found matching 'dkim/*.pyc'
DEBUG warning: no previously-included files found matching 'dkim/tests/*.pyc'
DEBUG adding license file 'LICENSE'
DEBUG writing manifest file 'dkimpy.egg-info/SOURCES.txt'
DEBUG Calling `setuptools.build_meta:__legacy__.build_wheel(&quot;/tmp/.tmpgVoVHL/builds-v0/.tmpbIhmGg&quot;, {}, None)`
DEBUG running bdist_wheel
DEBUG running build
DEBUG running build_py
DEBUG creating build/lib/dkim
DEBUG copying dkim/dkimverify.py -&gt; build/lib/dkim
DEBUG copying dkim/arcsign.py -&gt; build/lib/dkim
DEBUG copying dkim/asn1.py -&gt; build/lib/dkim
DEBUG copying dkim/dknewkey.py -&gt; build/lib/dkim
DEBUG copying dkim/__init__.py -&gt; build/lib/dkim
DEBUG copying dkim/asyncsupport.py -&gt; build/lib/dkim
DEBUG copying dkim/canonicalization.py -&gt; build/lib/dkim
DEBUG copying dkim/dkimsign.py -&gt; build/lib/dkim
DEBUG copying dkim/util.py -&gt; build/lib/dkim
DEBUG copying dkim/arcverify.py -&gt; build/lib/dkim
DEBUG copying dkim/__main__.py -&gt; build/lib/dkim
DEBUG copying dkim/crypto.py -&gt; build/lib/dkim
DEBUG copying dkim/dnsplug.py -&gt; build/lib/dkim
DEBUG installing to build/bdist.linux-x86_64/wheel
DEBUG running install
DEBUG running install_lib
DEBUG creating build/bdist.linux-x86_64/wheel
DEBUG creating build/bdist.linux-x86_64/wheel/dkim
DEBUG copying build/lib/dkim/dkimverify.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/arcsign.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/asn1.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/dknewkey.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/__init__.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/asyncsupport.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/canonicalization.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/dkimsign.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/util.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/arcverify.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/__main__.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/crypto.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG copying build/lib/dkim/dnsplug.py -&gt; build/bdist.linux-x86_64/wheel/./dkim
DEBUG running install_data
DEBUG creating build/bdist.linux-x86_64/wheel/dkimpy-1.1.8.data/data
DEBUG creating build/bdist.linux-x86_64/wheel/dkimpy-1.1.8.data/data/share/man/man1
DEBUG copying man/arcsign.1 -&gt; build/bdist.linux-x86_64/wheel/dkimpy-1.1.8.data/data/share/man/man1
DEBUG copying man/arcverify.1 -&gt; build/bdist.linux-x86_64/wheel/dkimpy-1.1.8.data/data/share/man/man1
DEBUG copying man/dkimsign.1 -&gt; build/bdist.linux-x86_64/wheel/dkimpy-1.1.8.data/data/share/man/man1
DEBUG copying man/dkimverify.1 -&gt; build/bdist.linux-x86_64/wheel/dkimpy-1.1.8.data/data/share/man/man1
DEBUG copying man/dknewkey.1 -&gt; build/bdist.linux-x86_64/wheel/dkimpy-1.1.8.data/data/share/man/man1
DEBUG running install_egg_info
DEBUG running egg_info
DEBUG writing dkimpy.egg-info/PKG-INFO
DEBUG writing dependency_links to dkimpy.egg-info/dependency_links.txt
DEBUG writing entry points to dkimpy.egg-info/entry_points.txt
DEBUG writing requirements to dkimpy.egg-info/requires.txt
DEBUG writing top-level names to dkimpy.egg-info/top_level.txt
DEBUG reading manifest file 'dkimpy.egg-info/SOURCES.txt'
DEBUG reading manifest template 'MANIFEST.in'
DEBUG warning: no previously-included files found matching 'dkim/*.pyc'
DEBUG warning: no previously-included files found matching 'dkim/tests/*.pyc'
DEBUG adding license file 'LICENSE'
DEBUG writing manifest file 'dkimpy.egg-info/SOURCES.txt'
DEBUG Copying dkimpy.egg-info to build/bdist.linux-x86_64/wheel/./dkimpy-1.1.8-py3.12.egg-info
DEBUG running install_scripts
DEBUG creating build/bdist.linux-x86_64/wheel/dkimpy-1.1.8.dist-info/WHEEL
DEBUG creating '/tmp/.tmpgVoVHL/builds-v0/.tmpbIhmGg/.tmp-98v9y6uf/dkimpy-1.1.8-py3-none-any.whl' and adding 'build/bdist.linux-x86_64/wheel' to it
DEBUG adding 'dkim/__init__.py'
DEBUG adding 'dkim/__main__.py'
DEBUG adding 'dkim/arcsign.py'
DEBUG adding 'dkim/arcverify.py'
DEBUG adding 'dkim/asn1.py'
DEBUG adding 'dkim/asyncsupport.py'
DEBUG adding 'dkim/canonicalization.py'
DEBUG adding 'dkim/crypto.py'
DEBUG adding 'dkim/dkimsign.py'
DEBUG adding 'dkim/dkimverify.py'
DEBUG adding 'dkim/dknewkey.py'
DEBUG adding 'dkim/dnsplug.py'
DEBUG adding 'dkim/util.py'
DEBUG adding 'dkimpy-1.1.8.data/data/share/man/man1/arcsign.1'
DEBUG adding 'dkimpy-1.1.8.data/data/share/man/man1/arcverify.1'
DEBUG adding 'dkimpy-1.1.8.data/data/share/man/man1/dkimsign.1'
DEBUG adding 'dkimpy-1.1.8.data/data/share/man/man1/dkimverify.1'
DEBUG adding 'dkimpy-1.1.8.data/data/share/man/man1/dknewkey.1'
DEBUG adding 'dkimpy-1.1.8.dist-info/LICENSE'
DEBUG adding 'dkimpy-1.1.8.dist-info/METADATA'
DEBUG adding 'dkimpy-1.1.8.dist-info/WHEEL'
DEBUG adding 'dkimpy-1.1.8.dist-info/entry_points.txt'
DEBUG adding 'dkimpy-1.1.8.dist-info/top_level.txt'
DEBUG adding 'dkimpy-1.1.8.dist-info/RECORD'
DEBUG removing build/bdist.linux-x86_64/wheel
DEBUG Finished building: dkimpy==1.1.8
DEBUG Released lock at `/tmp/.tmpgVoVHL/sdists-v6/pypi/dkimpy/1.1.8/.lock`
Prepared 2 packages in 1.01s
Installed 2 packages in 2ms
 + dkimpy==1.1.8
 + py3dns==4.0.2
DEBUG Released lock at `/root/.venv/.lock`

# uv pip install --no-cache -v dkimpy
DEBUG uv 0.5.1
DEBUG Searching for default Python interpreter in virtual environments
DEBUG Found `cpython-3.12.3-linux-x86_64-gnu` at `/root/.venv/bin/python3` (virtual environment)
DEBUG Using Python 3.12.3 environment at .venv
DEBUG Acquired lock for `.venv`
DEBUG At least one requirement is not satisfied: dnspython&gt;=2.0.0
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.12.3
DEBUG Solving with target Python version: &gt;=3.12.3
DEBUG Adding direct dependency: dkimpy*
DEBUG No cache entry for: https://pypi.org/simple/dkimpy/
DEBUG Found installed version of dkimpy==1.1.8 that satisfies *
DEBUG Searching for a compatible version of dkimpy (*)
DEBUG Found installed version of dkimpy==1.1.8 that satisfies *
DEBUG Selecting: dkimpy==1.1.8 [installed] (installed)
DEBUG Adding transitive dependency for dkimpy==1.1.8: dnspython&gt;=2.0.0
DEBUG No cache entry for: https://pypi.org/simple/dnspython/
DEBUG Searching for a compatible version of dnspython (&gt;=2.0.0)
DEBUG Selecting: dnspython==2.7.0 [compatible] (dnspython-2.7.0-py3-none-any.whl)
DEBUG No cache entry for: https://files.pythonhosted.org/packages/68/1b/e0a87d256e40e8c888847551b20a017a6b98139178505dc7ffb96f04e954/dnspython-2.7.0-py3-none-any.whl.metadata
DEBUG Tried 2 versions: dkimpy 1, dnspython 1
DEBUG marker environment resolution took 0.396s
Resolved 2 packages in 396ms
DEBUG Requirement already installed: dkimpy==1.1.8
DEBUG Identified uncached distribution: dnspython==2.7.0
DEBUG Unnecessary package: py3dns==4.0.2
DEBUG No cache entry for: https://files.pythonhosted.org/packages/68/1b/e0a87d256e40e8c888847551b20a017a6b98139178505dc7ffb96f04e954/dnspython-2.7.0-py3-none-any.whl
Prepared 1 package in 206ms
Installed 1 package in 1ms
 + dnspython==2.7.0
DEBUG Released lock at `/root/.venv/.lock`
</code></pre>
<p><code>pip</code> output for comparison:</p>
<pre><code># uv venv --no-cache --seed
Using CPython 3.12.3 interpreter at: /usr/local/bin/python3
Creating virtual environment with seed packages at: .venv
 + pip==24.3.1
Activate with: source .venv/bin/activate

# .venv/bin/pip install --dry-run --no-cache -v dkimpy
Using pip 24.3.1 from /root/.venv/lib/python3.12/site-packages/pip (python 3.12)
Collecting dkimpy
  Downloading dkimpy-1.1.8.tar.gz (66 kB)
  Running command pip subprocess to install build dependencies
  Using pip 24.3.1 from /root/.venv/lib/python3.12/site-packages/pip (python 3.12)
  Collecting setuptools&gt;=40.8.0
    Obtaining dependency information for setuptools&gt;=40.8.0 from https://files.pythonhosted.org/packages/90/12/282ee9bce8b58130cb762fbc9beabd531549952cac11fc56add11dcb7ea0/setuptools-75.3.0-py3-none-any.whl.metadata
    Using cached setuptools-75.3.0-py3-none-any.whl.metadata (6.9 kB)
  Using cached setuptools-75.3.0-py3-none-any.whl (1.3 MB)
  Installing collected packages: setuptools
  Successfully installed setuptools-75.3.0
  Installing build dependencies ... done
  Running command Getting requirements to build wheel
  running egg_info
  writing dkimpy.egg-info/PKG-INFO
  writing dependency_links to dkimpy.egg-info/dependency_links.txt
  writing entry points to dkimpy.egg-info/entry_points.txt
  writing requirements to dkimpy.egg-info/requires.txt
  writing top-level names to dkimpy.egg-info/top_level.txt
  reading manifest file 'dkimpy.egg-info/SOURCES.txt'
  reading manifest template 'MANIFEST.in'
  warning: no previously-included files found matching 'dkim/*.pyc'
  warning: no previously-included files found matching 'dkim/tests/*.pyc'
  adding license file 'LICENSE'
  writing manifest file 'dkimpy.egg-info/SOURCES.txt'
  Getting requirements to build wheel ... done
  Running command Preparing metadata (pyproject.toml)
  running dist_info
  creating /tmp/pip-modern-metadata-7yvcqhf8/dkimpy.egg-info
  writing /tmp/pip-modern-metadata-7yvcqhf8/dkimpy.egg-info/PKG-INFO
  writing dependency_links to /tmp/pip-modern-metadata-7yvcqhf8/dkimpy.egg-info/dependency_links.txt
  writing entry points to /tmp/pip-modern-metadata-7yvcqhf8/dkimpy.egg-info/entry_points.txt
  writing requirements to /tmp/pip-modern-metadata-7yvcqhf8/dkimpy.egg-info/requires.txt
  writing top-level names to /tmp/pip-modern-metadata-7yvcqhf8/dkimpy.egg-info/top_level.txt
  writing manifest file '/tmp/pip-modern-metadata-7yvcqhf8/dkimpy.egg-info/SOURCES.txt'
  reading manifest file '/tmp/pip-modern-metadata-7yvcqhf8/dkimpy.egg-info/SOURCES.txt'
  reading manifest template 'MANIFEST.in'
  warning: no previously-included files found matching 'dkim/*.pyc'
  warning: no previously-included files found matching 'dkim/tests/*.pyc'
  adding license file 'LICENSE'
  writing manifest file '/tmp/pip-modern-metadata-7yvcqhf8/dkimpy.egg-info/SOURCES.txt'
  creating '/tmp/pip-modern-metadata-7yvcqhf8/dkimpy-1.1.8.dist-info'
  Preparing metadata (pyproject.toml) ... done
Collecting dnspython&gt;=2.0.0 (from dkimpy)
  Obtaining dependency information for dnspython&gt;=2.0.0 from https://files.pythonhosted.org/packages/68/1b/e0a87d256e40e8c888847551b20a017a6b98139178505dc7ffb96f04e954/dnspython-2.7.0-py3-none-any.whl.metadata
  Downloading dnspython-2.7.0-py3-none-any.whl.metadata (5.8 kB)
Downloading dnspython-2.7.0-py3-none-any.whl (313 kB)
Would install dkimpy-1.1.8 dnspython-2.7.0
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-10 15:52</div>
            <div class="timeline-body"><p>I'm somewhat unlikely to change this since Poetry does the same thing and it makes a big difference for some packages (and it looks like a problem with the package itself?). You can override the metadata for that package by providing <code>[[tool.uv.dependency-metadata]]</code> if needed: https://docs.astral.sh/uv/concepts/resolution/#dependency-metadata</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-11-10 15:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zeevro">@zeevro</a> on 2024-11-10 22:17</div>
            <div class="timeline-body"><p>Yeah, I did end up using the <code>dependency-metadata</code> override. However, this solution is not very good in this case.
I ended up adding this to my  <code>pyproject.toml</code>:</p>
<pre><code class="language-toml">[[tool.uv.dependency-metadata]]
name = &quot;dkimpy&quot;
version = &quot;1.1.4&quot;
requires-dist = [&quot;dnspython&gt;=1.16.0&quot;]

[[tool.uv.dependency-metadata]]
name = &quot;dkimpy&quot;
requires-dist = [&quot;dnspython&gt;=2.0.0&quot;]
</code></pre>
<p>But when a new version of dkimpy comes out with different dependencies I will have to add more overrides.
A configuration option to disable the egg-info parsing would be a better solution IMHO.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-10 22:18</div>
            <div class="timeline-body"><p>I think the real solution is for dkimpy to fix their distribution. Why does it contain incorrect metadata?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zeevro">@zeevro</a> on 2024-11-11 15:03</div>
            <div class="timeline-body"><p>The author has this weird section in his <code>setup.py</code> that checks if <code>py3dns</code> is already installed and if so uses that as a dependency instead of the default <code>dnspython</code>. I guess he has <code>py3dns</code> installed in the environment where he builds the distributions. I think there is a wider use-case for distributions with dynamic stuff like that in their <code>setup.py</code>, though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-02-10 17:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.6.0" by @charliermarsh on 2025-02-10 17:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-12 18:04</div>
            <div class="timeline-body"><p>Fixed in v0.6.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-02-12 18:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:28:16 UTC
    </footer>
</body>
</html>
