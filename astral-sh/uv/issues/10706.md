```yaml
number: 10706
title: "Popup windows \"Making stdin/stdout/stderr inheritable failed\" when when running a gui-script on Windows"
type: issue
state: closed
author: deffi
labels:
  - bug
  - windows
assignees: []
created_at: 2025-01-17T10:21:31Z
updated_at: 2025-02-11T09:37:57Z
url: https://github.com/astral-sh/uv/issues/10706
synced_at: 2026-01-10T01:57:24Z
```

# Popup windows "Making stdin/stdout/stderr inheritable failed" when when running a gui-script on Windows

---

_Issue opened by @deffi on 2025-01-17 10:21_

## Summary

When using `uv run` or `uv tool run` to run a script from `[project.gui-scripts]` in `pyproject.toml`, 3 popup messages are displayed before the script is started:
  * "Making stdin inheritable failed"
  * "Making stdout inheritable failed"
  * "Making stderr inheritable failed"

This is regardless of whether the script is doing anything GUI related or not.


## To reproduce

Preparation:
* `uv init --app --package foo`
* In `pyproject.toml`, replace `[project.scripts]` with `[project.gui-scripts]`

Issue demonstration, in `foo/`:
* `uv run foo`  → popup messages
* `uv tool run --from . foo` → popup messages

On the other hand, this works as expected:
* `.venv\Scripts\foo.exe` → no popups
* `uv tool install . & foo` → no popups

Output from `uv --verbose run foo`:
<details>
<summary>Output</summary>

    DEBUG uv 0.5.20 (1c17662b3 2025-01-15)
    DEBUG Found project root: `c:\Users\[...]\foo`
    DEBUG No workspace root found, using project root
    DEBUG Discovered project `foo` at: c:\Users\[...]\foo
    DEBUG Reading Python requests from version file at `c:\Users\[...]\foo\.python-version`
    DEBUG Using Python request `3.13` from version file at `.python-version`
    DEBUG The virtual environment's Python version satisfies `3.13`
    DEBUG Using request timeout of 30s
    DEBUG Found static `pyproject.toml` for: foo @ file:///C:/Users/[...]/foo
    DEBUG No workspace root found, using project root
    DEBUG Existing `uv.lock` satisfies workspace requirements
    Resolved 1 package in 10ms
    DEBUG Using request timeout of 30s
    DEBUG Requirement already installed: foo==0.1.0 (from file:///C:/Users/[...]/foo)
    Audited 1 package in 0.49ms
    DEBUG Using Python 3.13.1 interpreter at: C:\Users\[...]\foo\.venv\Scripts\python.exe
    DEBUG Running `foo`
    DEBUG Command exited with code: 0

</details>

## Additional information

For scripts in `[project.scripts]` (as opposed to `[project.gui-scripts]`), this does not happen.

The message seems to be generated by the [`spawn_child`](https://github.com/astral-sh/uv/blob/dce7b9da1317cb44abe0255aa9f5d0a61f6a3eb6/crates/uv-trampoline/src/bounce.rs#L329) function in `uv-trampoline`'s `bounce.rs`.

Redirecting the output changes the behavior slightly:
* `uv run foo >1.txt` → popups only for "stdin" and "stderr", output of `foo` in `1.txt`
* `uv run foo 2>2.txt` → no popups, messages written to `2.txt` instead

## Versions

Windows 11 Version 23H2 (Build 22631.4460)
uv 0.5.20 (1c17662b3 2025-01-15)


---

_Renamed from "Popups "Making stdin/stdout/stderr inheritable failed" when when running a gui-script on Windows" to "Popup windows "Making stdin/stdout/stderr inheritable failed" when when running a gui-script on Windows" by @deffi on 2025-01-17 10:22_

---

_Label `windows` added by @konstin on 2025-01-17 12:58_

---

_Comment by @cbrnr on 2025-02-03 11:43_

I have a GUI app with a `[project.gui-scripts]` entry, so these error messages pop up before the app launches (if you want to try run `uvx mnelab`).

---

_Comment by @zanieb on 2025-02-03 13:55_

@konstin this sounds like a bug, right?

---

_Label `bug` added by @zanieb on 2025-02-03 13:55_

---

_Comment by @konstin on 2025-02-03 14:01_

Yes, there shouldn't be any pop-ups

---

_Comment by @zanieb on 2025-02-03 14:05_

Happy to accept a pull request here.

@Gankra might be worth a look.

---

_Assigned to @Gankra by @Gankra on 2025-02-06 18:14_

---

_Comment by @Gankra on 2025-02-06 18:15_

Can repro, will fix.

---

_Referenced in [astral-sh/uv#11295](../../astral-sh/uv/pulls/11295.md) on 2025-02-06 20:18_

---

_Closed by @Gankra on 2025-02-07 18:33_

---

_Closed by @Gankra on 2025-02-07 18:33_

---

_Comment by @deffi on 2025-02-11 09:37_

I confirm that this is fixed in 0.5.30.

Note that one has to re-install the project for this to take effect (e.g., `uv sync --reinstall` or delete `.venv`).


---
