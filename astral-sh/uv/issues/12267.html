<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to use uvicorn and streamlit in a UV environment? - astral-sh/uv #12267</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to use uvicorn and streamlit in a UV environment?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/12267">#12267</a>
        opened by <a href="https://github.com/dyuzhou">@dyuzhou</a>
        on 2025-03-18 09:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dyuzhou">@dyuzhou</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I use uvicorn and streamlit in my project. The command is started normally when using the caonda environment. However, the following error is thrown when using UV. I don't know if it is a problem with my usage or something else? How should I use uv run uvicorn app:app --workers 2?</p>
<p>Magic number 'UVSC' or 'UVPY' not found at the end of the file. Did you append the magic number, the length and the path to the python executable at the end of the file?</p>
<h3>Platform</h3>
<p>Windows 11 X86</p>
<h3>Version</h3>
<p>uv 0.6.2</p>
<h3>Python version</h3>
<p>Python 3.10</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @dyuzhou on 2025-03-18 09:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-03-19 11:33</div>
            <div class="timeline-body"><p>I tried it out and I can run uvicorn fine on windows, can you share the command steps by step that led you there?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @konstin on 2025-03-19 11:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @konstin on 2025-03-19 11:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johannesloibl">@johannesloibl</a> on 2025-03-27 10:36</div>
            <div class="timeline-body"><p>We got the same error but in a Hatch context (Hatch v1.14.0):</p>
<p><img src="https://github.com/user-attachments/assets/6d3990ea-7437-431a-9874-276fdd9dabd1" alt="Image" /></p>
<p>FYI @ofek</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2025-03-27 12:17</div>
            <div class="timeline-body"><p>Can't help without a reproducible example.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johannesloibl">@johannesloibl</a> on 2025-03-27 13:00</div>
            <div class="timeline-body"><blockquote>
<p>Can't help without a reproducible example.</p>
</blockquote>
<p>Sry this is also not reproducible on my PC but only occurring for a colleague. I hoped you were maybe seeing this error message somewhere in the code, but i expect it has nothing to to with Hatch, just wanted you to be aware.</p>
<p>Weirdly calling <code>hatch build</code> has no problem, but running it through a hatch script</p>
<p><img src="https://github.com/user-attachments/assets/b92ca1b7-8236-4da4-aa77-215b97d33867" alt="Image" /> named &quot;publish&quot; it fails on <code>hatch build</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">external</span> added by @zanieb on 2025-04-01 19:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dyuzhou">@dyuzhou</a> on 2025-04-14 02:16</div>
            <div class="timeline-body"><p>I think I found this problem very easily using it on docker.
In docker, use uv add streamlit, then use streamlit run app.py</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-04-14 08:24</div>
            <div class="timeline-body"><p>Can you share your Dockerfile and a set of minimal files you add during the docker build?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:30:29 UTC
    </footer>
</body>
</html>
