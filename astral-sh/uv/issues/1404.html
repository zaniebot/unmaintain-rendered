<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use settings from the pip configuration file (`pip.conf`) - astral-sh/uv #1404</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use settings from the pip configuration file (`pip.conf`)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/1404">#1404</a>
        opened by <a href="https://github.com/msharp9">@msharp9</a>
        on 2024-02-16 00:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/msharp9">@msharp9</a> on 2024-02-16 00:54</div>
            <div class="timeline-body"><p>Pip allows a user to set configuration settings inside a <code>pip.conf</code>, usually stored at <code>~/.config/pip/pip.conf</code>.  For example, setting a default index-url. uv seems to ignore these settings completely.</p>
<p>This is a problem since enterprise companies typically have their own PyPI images and don't want users to use the public PyPI for security reasons. For example, users who use AWS codeartifact have this config file updated automatically when they run aws login. https://docs.aws.amazon.com/codeartifact/latest/ug/python-configure-pip.html</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2024-02-16 00:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @zanieb on 2024-02-16 00:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-16 00:55</div>
            <div class="timeline-body"><p>Thanks for the clear issue!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @zanieb on 2024-02-16 01:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by @zanieb on 2024-02-16 01:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/owenlamont">@owenlamont</a> on 2024-02-16 07:02</div>
            <div class="timeline-body"><p>I was just about to raise an issue for this exact use case. We also use codeartifact for a few in house packages but mostly pull public PyPi packages via AWS codeartifact.</p>
<p>Anyway +1 to this. Would love to use uv if this can be supported.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kkpattern">@kkpattern</a> on 2024-02-20 10:45</div>
            <div class="timeline-body"><p>We also set <code>index-url</code> in our venv by <code>pip config --site set install.index-url &quot;http://path/to/internal/pypi/server&quot;</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/schlamar">@schlamar</a> on 2024-02-22 09:22</div>
            <div class="timeline-body"><p>BTW, for Windows this is <code>%APPDATA%\pip\pip.ini</code>, see https://pip.pypa.io/en/stable/topics/configuration/#location</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mcrumiller">@mcrumiller</a> on 2024-02-25 15:02</div>
            <div class="timeline-body"><p>Can you perhaps add to the README instructions on how to set the index-url? My company uses a proxy repo and it's not obvoius how to read from it. Do we have to supply <code>--index-url</code> every time we call <code>python -m pip uv</code>? That seems a bit cumbersome.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-25 15:53</div>
            <div class="timeline-body"><p>Hi @mcrumiller you can use <code>UV_INDEX_URL</code> instead. We may want to add all of our environment variables to the README, but they are currently listed in the <code>--help</code> output e.g.</p>
<pre><code>  -i, --index-url &lt;INDEX_URL&gt;
          The URL of the Python package index (by default: https://pypi.org/simple)
          
          [env: UV_INDEX_URL=]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/PetterS">@PetterS</a> on 2024-03-01 12:21</div>
            <div class="timeline-body"><p>The environment variables are nice, but reading the pip config file would be very good for enterprises. It would allow a seamless transition to uv without installing additional configuration on the machines.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edwardpeek-crown-public">@edwardpeek-crown-public</a> on 2024-03-04 21:30</div>
            <div class="timeline-body"><p>We'd like the system config to be considered as well (<code>/etc/xdg/pip/pip.conf</code> on Ubuntu). Our organisation configure a local mirror for all dev machines &amp; users this way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RichardDally">@RichardDally</a> on 2024-03-05 09:31</div>
            <div class="timeline-body"><blockquote>
<p>The environment variables are nice, but reading the pip config file would be very good for enterprises. It would allow a seamless transition to uv without installing additional configuration on the machines.</p>
</blockquote>
<p>Exactly, this is what I was expecting from uv, a drop-in replacement with a major performance boost.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-05 15:10</div>
            <div class="timeline-body"><p>This is still under consideration, but the comment at https://github.com/astral-sh/uv/issues/1789#issuecomment-1978810917 explains our current stance well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RichardDally">@RichardDally</a> on 2024-03-13 14:24</div>
            <div class="timeline-body"><blockquote>
<p>Hi @mcrumiller you can use <code>UV_INDEX_URL</code> instead. We may want to add all of our environment variables to the README, but they are currently listed in the <code>--help</code> output e.g.</p>
<pre><code>
  -i, --index-url &lt;INDEX_URL&gt;

          The URL of the Python package index (by default: https://pypi.org/simple)

          

          [env: UV_INDEX_URL=]

</code></pre>
</blockquote>
<p>I've been trying environment variables but it raises an error related to Unexpected fragment on URL: contact.
I've seen issues that have been closed for this, I'm a little bit puzzled here.
Using version 0.1.12 on Windows on private Artifactory repository.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-22 19:27</div>
            <div class="timeline-body"><p>@RichardDally could you please create a new issue if this is not related to <code>pip.conf</code> support?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-22 19:32</div>
            <div class="timeline-body"><p>Okay, we are officially considering support for this feature. Here is my proposal.</p>
<h3>Require explicit selection of configuration files</h3>
<p><code>pip</code> supports discovery of configuration files at various locations</p>
<ul>
<li>Do not support automated discovery of <code>pip.conf</code></li>
<li>Do not support global / user / site</li>
<li>Use of <code>pip.conf</code> requires opt-in e.g. <code>--pip-config &lt;path&gt;</code> or <code>UV_PIP_CONFIG=&lt;path&gt;</code></li>
</ul>
<h3>Only support index configuration</h3>
<p><code>pip</code> supports all of the command-line options via the configuration file</p>
<ul>
<li>Do not support flags like <code>no-compile</code>, etc.<ul>
<li>Unknown flags are ignored without warning</li>
<li>Flags we support in the CLI but not in the config file result in a warning in verbose mode</li>
</ul>
</li>
<li>Support for:<ul>
<li><code>find-links</code>, <code>index-url</code>, <code>extra-index-url</code></li>
</ul>
</li>
<li>Possible support for <code>native-tls</code> toggle</li>
</ul>
<h3>Do not support configuration per command</h3>
<p><code>pip</code> supports separate configuration for each sub-command like <code>install</code></p>
<ul>
<li>All configuration must be either in a <code>[global]</code> declaration or in the top-level</li>
<li>Declarations in the top-level will override those in a <code>[global]</code> section<ul>
<li>We could alternatively error or avoid checking <code>[global]</code> at all if a top-level option exists</li>
</ul>
</li>
<li>Configuration per command will be silently ignored</li>
<li>If configuration file is provided without <code>[global]</code> or top-level options we will warn it is empty</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kkpattern">@kkpattern</a> on 2024-03-23 08:37</div>
            <div class="timeline-body"><blockquote>
<h3>Require explicit selection of configuration files</h3>
<p><code>pip</code> supports discovery of configuration files at various locations</p>
<ul>
<li>Do not support automated discovery of <code>pip.conf</code></li>
<li>Do not support global / user / site</li>
<li>Use of <code>pip.conf</code> requires opt-in e.g. <code>--pip-config &lt;path&gt;</code> or <code>UV_PIP_CONFIG=&lt;path&gt;</code></li>
</ul>
</blockquote>
<p>Maybe UV can auto discovery <code>pip.conf</code> in a virtual environment?</p>
<p><code>UV_INDEX_URL</code> is actually enough for most use cases. I think many want uv to support <code>pip.conf</code> because they want uv as a drop-in replacement for pip. Without auto-discovery <code>pip.conf</code> from a virtual env, this cannot be achieved.</p>
<p>Also, in our project's CI job, there're multiple stage install different dependencies into the same <code>.venv</code>. For example, the bootstrap script may setup the <code>.venv</code> and install all the essential dependencies. Then in a later stage, the test script will install all the test related dependencies into the <code>.venv</code>.</p>
<p>By auto-picking up the <code>pip.conf</code> in the virtual environment, all the jobs in the following stages don't need to worry about which index it should use, which is very convenient for us.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-29 16:50</div>
            <div class="timeline-body"><blockquote>
<p>Maybe UV can auto discovery pip.conf in a virtual environment?</p>
</blockquote>
<p>What exactly do this mean? There's a <code>pip.conf</code> file <em>in</em> the <code>.venv</code> folder?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kkpattern">@kkpattern</a> on 2024-03-29 17:14</div>
            <div class="timeline-body"><blockquote>
<p>What exactly do this mean? There's a <code>pip.conf</code> file <em>in</em> the <code>.venv</code> folder?</p>
</blockquote>
<p>Yes. If you activate a <code>.venv</code> then run <code>pip config --site set install.index-url &quot;http://pypi.internal.com&quot;</code>, there will be a <code>pip.conf</code> in the <code>.venv</code> containing following content:</p>
<pre><code>[install]
index-url = http://pypi.internal.com
</code></pre>
<p>Later <code>pip</code> commands will automatically pick up this config file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-29 17:16</div>
            <div class="timeline-body"><p>Why not just export an environment variable selecting the configuration file? e.g. <code>UV_PIP_CONFIG=./.venv/pip.conf</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kkpattern">@kkpattern</a> on 2024-03-29 17:28</div>
            <div class="timeline-body"><p>It's convenient when we want to install some libs into a .venv across multiple sessions.</p>
<p>For example, a developer may set up a local <code>.venv</code> for development and use it for a relatively long time. Then, one day, they may need to update or install a new lib from an internal Pypi index. Since pip can automatically pick up the <code>pip.conf</code> file in the <code>.venv </code>folder, they don't need to remember what the index is or where the <code>pip.conf</code> is located.</p>
<p>This is not a deal breaker. We already use <code>uv</code> in our project and are very happy with it. But I think it's a nice-to-have feature.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-29 17:44</div>
            <div class="timeline-body"><p>Thanks for the additional details! I don't think we'd launch this feature with support for that, but I'm not fully opposed. I worry about <em>sometimes</em> supporting inference, but having it work in the most-scoped context makes some sense.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2024-03-29 19:34</div>
            <div class="timeline-body"><p>Just as another viewpoint for this conversation, as someone who has helped set up a lot of different users Python environments a lot of users get confused by all the different places pip configuration can go, e.g. environmental variables, multiple user directories, multiple system directories, venv directories etc.</p>
<p>I've encountered many time someone not being able to find where a setting was set, and have a broken environment until someone assisted them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ikamensh">@ikamensh</a> on 2024-04-03 14:58</div>
            <div class="timeline-body"><blockquote>
<p>Do not support automated discovery of pip.conf
Do not support global / user / site</p>
</blockquote>
<p>Maybe one default location can be supported without causing any confusion? I would pick user config as the one config if I had to choose. I see how not picking any discovery is a simple solution, but perhaps there is a benefit if this choice is done well.</p>
<p>With environment variables the issue is e.g. I use fish shell, but sometimes things are run through bash. Then I have to maintain two configs and export variables there. Even for one shell its an extra step that sometimes could be avoided.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-03 16:44</div>
            <div class="timeline-body"><p>The intent is to introduce our own configuration in the future and we'll support automatic discovery of that. We're just not particularly comfortable reading other tool's configuration files without opt-in.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/msharp9">@msharp9</a> on 2024-04-03 20:58</div>
            <div class="timeline-body"><p>Since I first created the issue there's been a lot of conversation, this is what I would suggest as I've thought about everyone's different viewpoints.</p>
<p>UV should create it's own configuration file and provide automatic discovery for it.
There should then be another tool that converts pip configs to uv configs, e.g pip.conf -&gt; uv.conf.
This second tool could provide a simple extensible configuration to add default locations. Collect all pip.conf, and create one combined uv.conf to the auto discovery location.</p>
<p>If UV then added support for plugins, then all a user would have to do is pip install both, say, <code>pip install uv uv-pip-conf</code>. This would make the user experience feel much more like UV is actually a drop in replacement to pip and pip-tools since no flags or environment variables would have to be set.</p>
<p>This would be similar to how flake8 plugins work, simply pip install flake8 and flake8-import-order as an example, and now flake8 automatically checks your codes imports along with other syntax.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/d-miketa">@d-miketa</a> on 2024-04-03 21:37</div>
            <div class="timeline-body"><p>@zanieb Slightly off topic, but would you be willing to share an expected timeline for the config file feature? Itâ€™s the one thing preventing me from immediately swapping all of my projects to uv. ðŸ˜… Many thanks, love the project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-03 23:59</div>
            <div class="timeline-body"><p>Hey @d-miketa â€” we don't have a timeline yet. I think it will be relatively straight-forward to implement but I'm giving time for feedback on my proposal which only has four upvotes compared to the ~50 on the original post.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaby">@gaby</a> on 2024-04-14 23:21</div>
            <div class="timeline-body"><p>As stated by @PetterS not having built-in support for <code>/etc/pip.conf</code> will be detrimental for Enterprise adoption.</p>
<p>In our case we drop a configuration in <code>/etc/pip.conf</code> using Ansible, we then symlink this file to <code>/etc/xdg/pip/pip.conf</code> for Ubuntu based systems.</p>
<p>After that any Python package installed using ansible.pip module automatically uses the configuration from <code>/etc/pip.conf</code>, we don't have to expose ENV's or write extra config files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-14 23:37</div>
            <div class="timeline-body"><p>That requirement sounds more like you need a persistent configuration file rather than a pip.conf specifically - or am I misunderstanding?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaby">@gaby</a> on 2024-04-14 23:43</div>
            <div class="timeline-body"><p>@charliermarsh In enterprise environments <code>/etc/pip.conf</code> is used to managed several things:</p>
<ul>
<li>Index-url</li>
<li>Search-index</li>
<li>HTTP/HTTPS proxies</li>
<li>Custom CA's</li>
</ul>
<p>User are just able to do &quot;pip install&quot; without having to configure anything since it's managed by the platform via <code>/etc/pip.conf</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astronautas">@astronautas</a> on 2024-04-18 11:30</div>
            <div class="timeline-body"><p>Any progress on this? It's critical for enterprise environments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CostcoFanboy">@CostcoFanboy</a> on 2024-04-20 19:01</div>
            <div class="timeline-body"><blockquote>
<p>The intent is to introduce our own configuration in the future and we'll support automatic discovery of that. We're just not particularly comfortable reading other tool's configuration files without opt-in</p>
</blockquote>
<p>Then uv will stay indefinitely a non-viable product for enterprise solutions.</p>
<p><code>/etc/pip.conf</code> or even sometimes <code>pip.conf</code> files getting cp'd inside of the venv folder during the dependency installation phase is an industry-wide practice/trend, for better or for worse.</p>
<p>Regardless, huge fan of the product and thank you immensely for your time and hard work.
Just sad to see this will only stay on personal projects.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-20 19:09</div>
            <div class="timeline-body"><p>I think what I don't understand yet is: if you're going through the effort to migrate from pip to uv, why is it any harder to ask that you use (for sake of argument) <code>uv.conf</code> rather than <code>pip.conf</code>? Why is that not possible? Like, if I told you that it was the exact same file, but it had to be named <code>uv.conf</code>, why would <em>that</em> be a problem?</p>
<p>We may be convinced to change the behavior here (I'm genuinely looking for answers to that question), but FWIW I can personally name a bunch of enterprises that are already using uv, so I'm not worried about it only being viable for personal projects :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaby">@gaby</a> on 2024-04-20 19:11</div>
            <div class="timeline-body"><p>@charliermarsh If <code>uv.conf</code> becomes a thing, and location is predefined, ex <code>/etc/uv.conf</code>. It should work enterprise environments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-20 19:15</div>
            <div class="timeline-body"><p>Thatâ€™s the thing Iâ€™m mostly trying to understand. Is it important the file is literally named pip.conf, that it follows the exact same schema, that itâ€™s auto-discovered in the same way? If so, why? (Iâ€™m genuinely open to being convinced, it just adds work and a maintenance burden for us so I want to make sure we have the right motivation.)</p>
<p>Or is it that users just need a way to specify persistent configuration? What if we (eg) supported reading pip.conf but you had to set a UV environment variable for it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CostcoFanboy">@CostcoFanboy</a> on 2024-04-20 19:54</div>
            <div class="timeline-body"><blockquote>
<p>I think what I don't understand yet is: if you're going through the effort to migrate from pip to uv, why is it any harder to ask that you use (for sake of argument) uv.conf rather than pip.conf? Why is that not possible? Like, if I told you that it was the exact same file, but it had to be named uv.conf, why would that be a problem?</p>
</blockquote>
<p>Apologies I don't think I expressed myself clearly.</p>
<p>While the actual name of the file doesn't necessarily need to be the same, the feature set need to be mirrored and it would be highly desirable for the discovery mechanism to be mimicked. Mostly having a global predefined location (e.g. /etc/pip.conf) and a project-specific/localized one (e.g. inside of venv in its root) is very important..</p>
<p>From the previous posts it didn't feel like there was functionality-mirroring in mind, but from your clarification it does feel like I'm wrong.</p>
<blockquote>
<p>FWIW I can personally name a bunch of enterprises that are already using uv, so I'm not worried about it only being viable for personal projects :)</p>
</blockquote>
<p>Would this mean there is another way that UV supports trusted-host, index-url AND extra-index-url (fallback)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hutch3232">@hutch3232</a> on 2024-04-21 15:03</div>
            <div class="timeline-body"><p>In my enterprise environment, sys admins configure <code>/etc/pip.conf</code> to work with our PyPI mirror. A sizeable portion of our users probably do not really even understand the mirror or bother with <code>pip.conf</code> since it &quot;just works&quot;. Thinking short-term, it would be nice if <code>uv</code> picked up <code>pip.conf</code> so that it was a drop-in replacement for <code>pip</code> in enterprise environments. It wouldn't require convincing the sys admins to create/maintain an additional config file or to teach users how to do it themselves. Longer-term though, as <code>uv</code> adoption increases, it probably wouldn't be much of an ask for sys admins to create the file. I think supporting <code>pip.conf</code> would primarily help less comfortable users get up and running with <code>uv</code>. More advanced users would have little issue figuring it out, using a hypothetical <code>uv.conf</code> or environmental variables. With that in mind, less comfortable users probably are sticking with <code>pip</code> in the short-term anyway. More advanced users are probably the people very excited about <code>uv</code> and jumping into it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/astronautas">@astronautas</a> on 2024-04-21 20:00</div>
            <div class="timeline-body"><p>@charliermarsh In our case (a small data point, but still) we don't care that much how the file is named, as long as uv can resolve deps from non pypi sources and it's possible to define those sources within *.conf.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/PetterS">@PetterS</a> on 2024-04-21 20:22</div>
            <div class="timeline-body"><p>There can be (and have been where I've worked) automated setup scripts that make sure there is a <code>pip.conf</code> with appropriate settings. If <code>uv</code> just works with that file the gradual adoption within the enterprise could be quicker.</p>
<p>It's not a dealbreaker of course since we are talking about developers here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eswolinsky3241">@eswolinsky3241</a> on 2024-05-25 12:27</div>
            <div class="timeline-body"><blockquote>
<p>I think what I don't understand yet is: if you're going through the effort to migrate from pip to uv, why is it any harder to ask that you use (for sake of argument) <code>uv.conf</code> rather than <code>pip.conf</code>? Why is that not possible? Like, if I told you that it was the exact same file, but it had to be named <code>uv.conf</code>, why would <em>that</em> be a problem?</p>
<p>We may be convinced to change the behavior here (I'm genuinely looking for answers to that question), but FWIW I can personally name a bunch of enterprises that are already using uv, so I'm not worried about it only being viable for personal projects :)</p>
</blockquote>
<p>@charliermarsh Just to comment since I came across this post while playing with uv: We also use AWS Codeartifact, which uses short-lived credentials that need to be refreshed every twelve hours. The AWS CLI offers a single <a href="https://docs.aws.amazon.com/cli/latest/reference/codeartifact/login.html">helper command</a> that can obtain the credentials and rewrite the index url in <code>pip.conf</code> (or the equivalent config file for npm, maven, etc.). Obviously AWS currently offers no such support for uv, so it's on the user to update <code>uv.conf</code> every twelve hours. Not saying this is a huge deal, just something that could be tedious enough to convince an enterprise user to stick with pip. Loving uv so far though!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ilCatania">@ilCatania</a> on 2024-05-28 22:32</div>
            <div class="timeline-body"><p>I also work in a corporate environment where someone else manages <code>pip.conf</code> on my behalf and I do not have full control over my users' installations.</p>
<p>My short term plan to be able to replace <code>pip</code> with <code>uv pip</code> has been a handmade utility that reads from <code>pip.conf</code> and sets the corresponding <code>uv</code> environment variables.</p>
<p>I would be very happy, once <code>uv</code> supports its own configuration file, if there was a command to create / update said configuration file with values from <code>pip.conf</code>. Something like</p>
<pre><code class="language-shell">uv import-pip-conf --overwrite --ignore-unsupported --pip-conf-file=~/.pip.conf
</code></pre>
<p>(I am making it up but you get the idea hopefully)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/quartox">@quartox</a> on 2024-10-18 17:06</div>
            <div class="timeline-body"><p>I also have the short-lived credentials problem in an corporate environment. My <code>pip.conf</code> file is updated every 8 hours with new credentials. The tools to update these credentials are owned by other teams at my company. It would be more challenging for me to convince them to adopt <code>uv</code> before I am able to test it out and demonstrate some improvements with existing workflows.</p>
<p>I was wondering if it would it be possible for <code>uv.conf</code> to reference specific configurations in <code>pip.conf</code>? For example what if the <code>uv.conf</code> file contains the line</p>
<p><code>index-url = ${/path/to/pip.conf:index-url}</code></p>
<p>Don't care much about specific syntax (which I took from <a href="https://docs.python.org/3/library/configparser.html#configparser.ExtendedInterpolation">here</a>) but the intent is to reference values in the <code>pip.conf</code> file explicitly. This way we could keep updating <code>pip.conf</code> every 8 hours until I can get broad consensus to move to <code>uv.conf</code> workflows.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-10-22 21:31</div>
            <div class="timeline-body"><p>FYI, https://github.com/astral-sh/uv/pull/7851 landed, which now allows you to set global configuration for <code>uv.toml</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/darksim33">@darksim33</a> on 2024-10-24 16:55</div>
            <div class="timeline-body"><blockquote>
<p>FYI, #7851 landed, which now allows you to set global configuration for <code>uv.toml</code>.</p>
</blockquote>
<p>Just to make this clear since I'm new to the tool. Is it possible to link the pip.conf using the uv.toml?
I tried a few things but they don't seem to work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaby">@gaby</a> on 2024-10-25 13:20</div>
            <div class="timeline-body"><blockquote>
<p>@charliermarsh In enterprise environments <code>/etc/pip.conf</code> is used to managed several things:</p>
<ul>
<li>Index-url</li>
<li>Search-index</li>
<li>HTTP/HTTPS proxies</li>
<li>Custom CA's</li>
</ul>
<p>User are just able to do &quot;pip install&quot; without having to configure anything since it's managed by the platform via <code>/etc/pip.conf</code>.</p>
</blockquote>
<p>Quoting myself since I just tried using <code>/etc/uv/uv.toml</code> and some of these options are not even supported.</p>
<p><code>uv</code> keeps pushing some of these configs to ENV variables. These are not practical for enteprise environments.</p>
<p>Currently there's no way to set a <code>cert</code> file for a proxy/index, and there's no way to set <code>http/https</code> proxies via <code>pyproject.toml</code> / <code>uv.toml</code></p>
<p>Enteprise environments typically set <code>SquidProxy</code> or <code>Pypi Mirror</code>. These services are exposed to users with internal TLS certs signed by the Enterprise CA.</p>
<p>tldr: If the ENV's listed here https://docs.astral.sh/uv/configuration/environment/ were supported via <code>uv.toml</code> and <code>pyproject.toml</code> it would solve a lot of the use-cases listed on this thread.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/schlamar">@schlamar</a> on 2024-10-25 17:11</div>
            <div class="timeline-body"><p>@gaby for this use case you can use native-tls setting https://docs.astral.sh/uv/reference/settings/#native-tls</p>
<p>In this case SSL works automatically if your internal cert is in the system's certificate store (which is usually the case in enterprise setups).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaby">@gaby</a> on 2024-10-25 22:46</div>
            <div class="timeline-body"><p>@schlamar Yes, that works. But sometimes the Proxy CA is not installed in the system.</p>
<p>Regardless, you can't set http/https proxy via <code>toml</code> only via ENV.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Use users pip.conf" to "Use settings from the pip configuration file (`pip.conf`)" by @zanieb on 2024-11-26 23:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brant-qai">@brant-qai</a> on 2025-03-28 08:51</div>
            <div class="timeline-body"><p>There are a number of important issues that arise by <em>not</em> honoring <code>pip.conf</code>.</p>
<h2>Unexpected</h2>
<p>The <code>uv pip</code>command is understood to only support a subset of pip's options, but it still &quot;feels&quot; like pip. Right up until you realize it isn't honoring your pip configurations. This feels very counterintuitive. Of course RTFM, but it's easy to not read the whole thing; it's huge. The behavior is &quot;surprising&quot;.</p>
<h2>Custom Tools/History</h2>
<p>There exist a plethora of tools out there that write custom <code>pip.conf</code> files for you. AWS Code Artifact is one but there are others, including lots of custom internal tooling written by various companies (The last two companies I worked for had their own). Since pip has been around for a VERY long time, there is a lot of tooling written around it. The <code>pip.conf</code> file may be managed by a sysadmin (I've worked places where it was a symlink to a copy on the network drive where it was updated every hour OR occasionally at random for other reasons).</p>
<p>One could argue that everyone should just rewrite their tools, but that is often a hard sell.</p>
<p>The years of history behind the <code>pip.conf</code> file make it a very stable standard. It is also a very simple standard. It has very few options and is easy to parse. The maintenance burden on the <code>uv</code> project will be vanishingly minimal; the up-front development cost would be the primary cost, and the way it functions would map very well onto the existing pip shim (it's an ini file and the global section maps directly to command line arguments).</p>
<h2>Change/Risk Adverse Teams</h2>
<p>The reality is that change is hard, and it's <em>definitely</em> hard to do change &quot;all at once&quot;. Even in a shop committed to switching entirely to <code>uv</code>, that is going to be a thing that happens gradually, one repo at a time or one project/package at a time. The easier that transition is, the easier it is for someone to advocate for the adoption of <code>uv</code>.</p>
<p>It makes a simple proof-of-concept difficult because you can't just convert one project to <code>uv</code> and have it work without extra steps.  <em>waves hand; ignore this weird copy/paste export of environment variables...</em></p>
<h2>Interstitial State &amp; Maintenance Burden</h2>
<p>Many companies aren't monoliths. They may have an overarching sysadmin team but multiple departments or other organizational units. There will be many places with hybrid environments - that is, one department may switch to <code>uv</code> while other change/risk-adverse departments may not, or may delay in doing so. By forcing those who manage those config files to manage another separate one you place a maintenance burden that was not asked for and shouldn't be necessary.</p>
<p>It would also be unsurprising for some companies to always be in mixed state with some teams never adopting newer (better imo) tools for the life of the company.</p>
<h2>Environment Variable Limitations</h2>
<p>Environment variables are a bad solution. What should be simple/streamlined becomes challenging. Take this example script setup (using Code Artifact again as an example) as a 'happy path':</p>
<pre><code class="language-bash">#!/bin/bash

aws codeartifact login --tool pip --repository python-packages --domain &lt;DOMAIN&gt; --domain-owner &lt;ACCOUNT_ID&gt; --region &lt;REGION&gt;
</code></pre>
<p>Which makes the process painless. It updates my <code>pip.conf</code> file for me. I set it up once and voila, I don't have to think about it anymore; I'm off to the races. Can I do something like this easily for <code>uv</code> ? No.</p>
<p>The documentation (to again use Code Artifact as an example) suggests this:</p>
<pre><code class="language-bash">export AWS_CODEARTIFACT_TOKEN=&quot;$(
    aws codeartifact get-authorization-token \
    --domain &lt;DOMAIN&gt; \
    --domain-owner &lt;ACCOUNT_ID&gt; \
    --query authorizationToken \
    --output text
)&quot;
export UV_INDEX_PRIVATE_REGISTRY_USERNAME=aws
export UV_INDEX_PRIVATE_REGISTRY_PASSWORD=&quot;$AWS_CODEARTIFACT_TOKEN&quot;
</code></pre>
<p>I <em>can't</em> make that into a shell script because scripts run in a different execution context than the parent shell. The child shell that executes the script can't set environment variables for the parent shell.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/juhaszp95">@juhaszp95</a> on 2025-04-25 12:26</div>
            <div class="timeline-body"><p>I'm trying to migrate from <code>pip</code> to <code>uv</code>. I have a <code>pip.conf</code> file with a <code>[global] index-url</code> and <code>extra-index-url</code> specified. These are persistent configurations so that <code>pip</code> always installs from these indexes.</p>
<p>I'd like to achieve the same behaviour in <code>uv</code>, so that I can use these indexes automatically when I call <code>uv add</code> in any project. I've tried to add them to a user-level <code>uv.toml</code> file, but without success - I'm probably using the wrong format, but I couldn't figure out what the right format is (I couldn't find in the docs).</p>
<p>Any help would be appreciated...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-25 12:30</div>
            <div class="timeline-body"><p>You should be able to put them in the top-level of your user- or system-level <code>uv.toml</code>, like:</p>
<pre><code class="language-toml">index-url = &quot;...&quot;
extra-index-url = [&quot;...&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/juhaszp95">@juhaszp95</a> on 2025-04-25 12:38</div>
            <div class="timeline-body"><p>Ah perfect, thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gioxc88">@gioxc88</a> on 2025-04-29 14:39</div>
            <div class="timeline-body"><blockquote>
<p>You should be able to put them in the top-level of your user- or system-level <code>uv.toml</code>, like:</p>
<pre><code class="language-toml">index-url = &quot;...&quot;
extra-index-url = [&quot;...&quot;]
</code></pre>
</blockquote>
<p>Can you please give an example?</p>
<p>If I have a list do I separate entries inside square brackets with commas ?</p>
<p>Do I need to use double quotes for each entry ?</p>
<p>Would this work for trusted-hosts as well?</p>
<p>Thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/juhaszp95">@juhaszp95</a> on 2025-04-29 14:57</div>
            <div class="timeline-body"><p>Exactly! You can put muliptle entries as a list of strings, i.e. enclosed in quotation marks, spearated by commas, all within a pair of square brackets.</p>
<p>I have only tried <code>index-url</code> and <code>extra-index-url</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gioxc88">@gioxc88</a> on 2025-04-29 15:17</div>
            <div class="timeline-body"><blockquote>
<p>Exactly! You can put muliptle entries as a list of strings, i.e. enclosed in quotation marks, spearated by commas, all within a pair of square brackets.</p>
<p>I have only tried <code>index-url</code> and <code>extra-index-url</code>.</p>
</blockquote>
<p>I am trying, but that doesn't work .</p>
<p>I have a uv.toml file placed in C:\Users\myuser.config\uv</p>
<p>And I am doing uv add mypackage but it can't find anything</p>
<p>I wonder if this what I am doing wrong</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alexjolig">@alexjolig</a> on 2025-05-02 11:39</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>Exactly! You can put muliptle entries as a list of strings, i.e. enclosed in quotation marks, spearated by commas, all within a pair of square brackets.
I have only tried <code>index-url</code> and <code>extra-index-url</code>.</p>
</blockquote>
<p>I am trying, but that doesn't work .</p>
<p>I have a uv.toml file placed in C:\Users\myuser.config\uv</p>
<p>And I am doing uv add mypackage but it can't find anything</p>
<p>I wonder if this what I am doing wrong</p>
</blockquote>
<p>You can use <code>[[tool.uv.index]]</code> and add as many urls as you need</p>
<pre><code>[[tool.uv.index]]
url = &quot;FIRST-URL-MARKED AS DEFAULT&quot;
default = true

[[tool.uv.index]]
url = &quot;SECOND-URL&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lemming622">@lemming622</a> on 2025-10-22 16:08</div>
            <div class="timeline-body"><blockquote>
<p>You should be able to put them in the top-level of your user- or system-level <code>uv.toml</code>, like:</p>
<p>index-url = &quot;...&quot;
extra-index-url = [&quot;...&quot;]</p>
</blockquote>
<p>This looks great.  How can this functionality be added to a project toml so that it's done automatically?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/suewonjp">@suewonjp</a> on 2025-12-20 03:50</div>
            <div class="timeline-body"><p>Most enterprises use proxy repositories like Artifactory, etc. and they configure custom URLs in pip.conf or pip.ini (on Windows) and currently, they will hesitate to use uv since they can't seamlessly migrate from pip unless you support pip.conf/pip.ini</p>
<p>I'm not sure how you prioritize this issue, but clearly, this looks like a big blocker against expanding uv community more and more, IMO.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:16:44 UTC
    </footer>
</body>
</html>
