<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For uv&gt;0.1.6 Docker/Github Action fails to install package from Github URL  - astral-sh/uv #1914</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>For uv&gt;0.1.6 Docker/Github Action fails to install package from Github URL </h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1914">#1914</a>
        opened by <a href="https://github.com/mtmpaulwulff">@mtmpaulwulff</a>
        on 2024-02-23 14:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mtmpaulwulff">@mtmpaulwulff</a> on 2024-02-23 14:32</div>
            <div class="timeline-body"><p>In my requirements file i am specifying to install the following package:
<code>django-celery-beat @ git+https://github.com/celery/django-celery-beat.git@acd10a390c85414a59e9b37be6226e4a9ea4fb81</code></p>
<p>The commit does exist in Github: https://github.com/celery/django-celery-beat/commit/acd10a390c85414a59e9b37be6226e4a9ea4fb81</p>
<p>With <code>uv==0.1.6</code> the uv pip install process ran without problems.</p>
<p>For <code>uv&gt;=0.1.8</code> the process fails with the following error message:</p>
<pre><code>------
 &gt; [python-run-stage  6/23] RUN uv pip install --no-cache -r local.txt:
: Failed to download and build: django-celery-beat @ git+https://github.com/celery/django-celery-beat.git@acd10a390c8[541](https://github.com/martalmar/foundation/actions/runs/8020252175/job/21909709543#step:3:542)4a59e9b37be6226e4a9ea4fb81
0.650   Caused by: Git operation failed
0.650   Caused by: failed to clone into: /tmp/.tmpwqm4ZO/git-v0/db/6fd60c06f70cb37a
0.650   Caused by: failed to fetch commit `acd10a390c85414a59e9b37be6226e4a9ea4fb81`
0.650   Caused by: could not execute process `git fetch --force --update-head-ok 'https://github.com/celery/django-celery-beat.git' '+acd10a390c85414a59e9b37be6226e4a9ea4fb81:refs/commit/acd10a390c85414a59e9b37be6226e4a9ea4fb81'` (never executed)
0.650   Caused by: No such file or directory (os error 2)
------
</code></pre>
<ul>
<li>The image is based on <code>3.10-slim-bullseye</code>.</li>
<li>I am installing uv itself with <code>RUN pip install uv==0.1.9</code> in my Dockerfile.</li>
<li>I am setting <code>ENV VIRTUAL_ENV=/usr/local</code> in my Dockerfile. But I also tested <code>RUN uv venv</code> instead.</li>
<li>I did not check <code>uv==0.1.7</code></li>
<li>I can replicate the error within my local Docker build process.</li>
<li>I cannot replicate the error in my local Windows environment.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-02-23 14:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-23 14:37</div>
            <div class="timeline-body"><p>Thanks! We changed our git clone which fixed a bunch of issues with authentication, but there must be some non-authentication-related case we regressed on here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-23 15:16</div>
            <div class="timeline-body"><p>@mtmpaulwulff - One question: do you have Git installed in the container? Like does <code>which git</code> succeed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-02-23 15:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mtmpaulwulff">@mtmpaulwulff</a> on 2024-02-23 16:09</div>
            <div class="timeline-body"><p>Okay, this was the issue and by adding git installation in the Dockerfile the problem was solved.
I guess after 0.1.6 git became an external dependency for uv, therefore it worked with the older version. Thanks for the support!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @mtmpaulwulff on 2024-02-23 16:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:18 UTC
    </footer>
</body>
</html>
