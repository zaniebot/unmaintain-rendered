<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interpolating environment variables in Package Indexes - astral-sh/uv #8443</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Interpolating environment variables in Package Indexes</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8443">#8443</a>
        opened by <a href="https://github.com/arnaldojvg">@arnaldojvg</a>
        on 2024-10-22 10:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/arnaldojvg">@arnaldojvg</a></div>
            <div class="timeline-body"><p>Hello!</p>
<p>First of all I want to say thanks for this great tool :)</p>
<p>I&#x27;m currently in an effort to move away from Pipfile/pipenv to use <code>uv</code>, but I&#x27;m facing a challenge:</p>
<p>I can&#x27;t define an <a href="https://docs.astral.sh/uv/configuration/indexes/">index</a> that has credentials as a proper index in my pyproject.toml</p>
<pre><code>[[tool.uv.index]]
name = &quot;pypi-custom&quot;
url = &quot;https://aws:$CODEARTIFACT_AUTH_TOKEN@host.d.codeartifact.eu-central-1.amazonaws.com/pypi/python/simple/&quot;
</code></pre>
<p>As it always gives me a 401.</p>
<p>I managed to make it work using the <a href="https://docs.astral.sh/uv/guides/integration/alternative-indexes/#aws-codeartifact">Alternative Indexes</a> approach + some workarounds.</p>
<p>However, this doesn&#x27;t allow me to specify from which index to install which package, and entirely rely on the resolution strategy (fallback), which, in my current project is not an issue, but it is definitely a weak point.</p>
<p>Is there any way to make <code>uv</code> interpolate the environment variables in the .toml files?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-22 10:55</div>
            <div class="timeline-body"><p>Hi! Glad you like the tool. There&#x27;s not a way to do this right now, you can track support in <a href="https://github.com/astral-sh/uv/issues/5734">astral-sh/uv#5734</a></p>
<p>Instead, I&#x27;d recommend setting <code>UV_INDEX_PYPI_CUSTOM_PASSWORD=&quot;$CODEARTIFACT_AUTH_TOKEN&quot;</code> â€” we&#x27;ll use it as the password at runtime then.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-22 10:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-22 10:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/arnaldojvg">@arnaldojvg</a> on 2024-10-22 11:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arnaldojvg">@arnaldojvg</a> on 2024-10-22 11:21</div>
            <div class="timeline-body"><p>Thanks @zanieb will watch the other issue to be aware, this should work!
Appreciate the quick answer.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:34:58 UTC
    </footer>
</body>
</html>
