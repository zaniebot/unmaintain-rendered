<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModuleNotFoundError - astral-sh/uv #14140</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ModuleNotFoundError</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/14140">#14140</a>
        opened by <a href="https://github.com/LIghtJUNction">@LIghtJUNction</a>
        on 2025-06-18 22:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/LIghtJUNction">@LIghtJUNction</a> on 2025-06-18 22:19</div>
            <div class="timeline-body"><h3>Summary</h3>
<h1>Bug Report: ModuleNotFoundError when using <code>uv tool install -e .</code> with duplicate package configuration</h1>
<h2>Description</h2>
<p>When using <code>uv tool install -e .</code> with certain <code>pyproject.toml</code> configurations, the installed executable fails with <code>ModuleNotFoundError</code>, even though <code>uv build</code> works correctly in both cases.</p>
<h2>Expected Behavior</h2>
<p>The executable should run normally after <code>uv tool install -e .</code> regardless of the package configuration format.</p>
<h2>Actual Behavior</h2>
<p>The executable fails with <code>ModuleNotFoundError</code> in one specific configuration.</p>
<h2>Reproduction Steps</h2>
<h3>Case A (Works correctly):</h3>
<pre><code class="language-toml">[tool.hatch.build.targets.wheel]
packages = [&quot;src/astrbot&quot;]
</code></pre>
<ol start="0">
<li>uv build ✔️</li>
<li>Run <code>uv tool install -e .</code></li>
<li>Execute the script-defined executable</li>
<li>✅ Everything works normally</li>
</ol>
<h3>Case B (Fails):</h3>
<pre><code class="language-toml">[tool.hatch.build.targets.wheel]
packages = [&quot;astrbot&quot;]
</code></pre>
<ol start="0">
<li>uv build ✔️</li>
<li>Run <code>uv tool install -e .</code></li>
<li>Execute the script-defined executable</li>
<li>❌ Fails with <code>ModuleNotFoundError</code></li>
</ol>
<h2>Additional Information</h2>
<ul>
<li>https://github.com/LIghtJUNction/AstrBot/tree/test</li>
</ul>
<h2>Configuration Details</h2>
<p>Please find the relevant <code>pyproject.toml</code> sections above. The project structure and script definitions remain the same between both cases.</p>
<h3>Platform</h3>
<p>win11 amd64</p>
<h3>Version</h3>
<p>uv --version uv 0.7.9 (13a86a23b 2025-05-30)</p>
<h3>Python version</h3>
<p>Python 3.10.17</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @LIghtJUNction on 2025-06-18 22:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-18 22:20</div>
            <div class="timeline-body"><p>This sounds like a <code>hatch</code> / <code>hatchling</code> behavior, not anything to do with uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @zanieb on 2025-06-18 22:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-06-18 22:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">external</span> added by @zanieb on 2025-06-18 22:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LIghtJUNction">@LIghtJUNction</a> on 2025-06-18 22:23</div>
            <div class="timeline-body"><blockquote>
<p>This sounds like a <code>hatch</code> / <code>hatchling</code> behavior, not anything to do with uv.</p>
</blockquote>
<p>Thank you for the clarification! You're absolutely right - this does sound like hatch/hatchling behavior rather than a uv issue. I appreciate your insight.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LIghtJUNction">@LIghtJUNction</a> on 2025-06-18 22:23</div>
            <div class="timeline-body"><blockquote>
<p>This sounds like a <code>hatch</code> / <code>hatchling</code> behavior, not anything to do with uv.</p>
</blockquote>
<p>Thank you for the clarification! I'm still learning about the relationship between these tools - could you help me understand why uv tool install would be related to hatch/hatchling behavior? I'd appreciate any insights into how these tools interact in this context.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-18 22:27</div>
            <div class="timeline-body"><p>When you install a package, we need to invoke a build system to create an installable distribution. Per the PEP 517 spec, uv acts as a build frontend and something else acts as a build backend. In this case, it looks like you're using <code>hatchling</code> as the build backend, hence the <code>[tool.hatch.build.targets.wheel]</code> configuration. Anything that happens within <code>hatchling</code> is out of scope for us, unless we're doing something spec in-compliant.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LIghtJUNction">@LIghtJUNction</a> on 2025-06-18 22:30</div>
            <div class="timeline-body"><blockquote>
<p>When you install a package, we need to invoke a build system to create an installable distribution. Per the PEP 517 spec, uv acts as a build frontend and something else acts as a build backend. In this case, it looks like you're using <code>hatchling</code> as the build backend, hence the <code>[tool.hatch.build.targets.wheel]</code> configuration. Anything that happens within <code>hatchling</code> is out of scope for us, unless we're doing something spec in-compliant.</p>
</blockquote>
<p>Thank you so much for the detailed explanation! Now I understand - when installing a package, uv acts as the build frontend following the PEP 517 spec and invokes the build system, while hatchling serves as the build backend handling the actual build process. So the [tool.hatch.build.targets.wheel] configuration is indeed within hatchling's domain. I get it now - anything happening within hatchling is outside of uv's control unless there's a spec compliance issue on uv's side.</p>
<p>Thank you again for your patience in explaining this - it really clarifies the build process for me!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../pypa/hatch/issues/2004.html">pypa/hatch#2004</a> on 2025-06-18 22:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-06-18 22:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../pypa/hatch/issues/2005.html">pypa/hatch#2005</a> on 2025-06-18 22:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:04 UTC
    </footer>
</body>
</html>
