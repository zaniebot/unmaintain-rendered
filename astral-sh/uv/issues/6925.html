<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UV does not respect pip mirror configuration for uv add and uv tool install - astral-sh/uv #6925</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UV does not respect pip mirror configuration for uv add and uv tool install</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6925">#6925</a>
        opened by <a href="https://github.com/sanbei101">@sanbei101</a>
        on 2024-09-02 01:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/sanbei101">@sanbei101</a></div>
            <div class="timeline-body"><p>Description:</p>
<p>I have configured my pip mirror settings in pyproject.toml as follows:</p>
<pre><code>[pip]
index-url = &quot;https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple&quot;
[tool.uv.pip]
index-url = &quot;https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple&quot;
</code></pre>
<p>When I use <code>uv pip install ruff</code>, it correctly uses the mirror and installs quickly.</p>
<p>However, when I use <code>uv add ruff</code> or <code>uv tool install ruff</code>, UV still downloads from <code>https://pypi.org/</code> instead of using the specified <code>mirror</code>. This behavior is confusing because I expected UV to respect the mirror settings for all package management commands.</p>
<p><strong>Questions</strong>:</p>
<p>Is there a way to make UV use the configured pip mirror for uv add and uv tool install commands?
If not, could you provide guidance on how to ensure UV consistently uses the specified mirror for all commands?
Thank you for your <strong>assistance</strong>!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sunfkny">@sunfkny</a> on 2024-09-02 08:19</div>
            <div class="timeline-body"><p>Duplicate of #6800, <code>[tool.uv.pip]</code> only applies to the <code>uv pip</code> subcommand, you should use <code>[tool.uv]</code></p>
<pre><code class="language-toml">[tool.uv]
index-url = &quot;https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sanbei101">@sanbei101</a> on 2024-09-02 08:57</div>
            <div class="timeline-body"><p>原来如此,非常感谢!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sanbei101 on 2024-09-02 08:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sanbei101">@sanbei101</a> on 2024-09-02 09:05</div>
            <div class="timeline-body"><p>对了,不知道<code>uvx</code>有没有镜像的配置呢?
似乎</p>
<pre><code>[tool.uv]
index-url = &quot;https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple&quot;
</code></pre>
<p>依然不适用于<code>uvx</code>,比如<code>uvx ruff check</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @sanbei101 on 2024-09-02 09:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sunfkny">@sunfkny</a> on 2024-09-02 09:27</div>
            <div class="timeline-body"><p>Edit: It's not a bug. It's a feature.</p>
<p><code>uvx</code> is alias for <code>uv tool run</code>, For <code>tool</code> commands, you should use user-level configuration</p>
<p><code>~/.config/uv/uv.toml</code></p>
<pre><code class="language-toml">index-url = &quot;https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple&quot;
</code></pre>
<p>https://github.com/astral-sh/uv/pull/5923</p>
<p>https://github.com/astral-sh/uv/blob/9edf2d8132355b56b9f64f1b6b3457e4f4919acf/docs/configuration/files.md?plain=1#L8-L12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-02 17:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-09-02 17:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @charliermarsh on 2024-09-02 17:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wangzhe258369">@wangzhe258369</a> on 2025-04-16 02:47</div>
            <div class="timeline-body"><p>uv is designed to deliberately not read any configuration that pip reads. uv only recognizes the index-url under [tool.uv], or environment variables starting with UV_ such as UV_INDEX, UV_DEFAULT_INDEX, UV_EXTRA_INDEX_URL, etc.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:26:45 UTC
    </footer>
</body>
</html>
