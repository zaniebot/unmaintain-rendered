<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Private repository as a source - astral-sh/uv #6421</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Private repository as a source</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6421">#6421</a>
        opened by <a href="https://github.com/NevoleMarek">@NevoleMarek</a>
        on 2024-08-22 10:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/NevoleMarek">@NevoleMarek</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>Hi, I d'like to transition from <code>poetry</code> to <code>uv</code>. What I am missing is a way of using private repositories as source for packages.</p>
<p><a href="https://python-poetry.org/docs/repositories/#private-repository-example">Poetry</a> allows to add private repositories like so:</p>
<p><code>poetry source add --priority=supplemental foo https://pypi.example.org/simple/</code></p>
<p>and then to install package from the repository like so:</p>
<p><code>poetry add --source foo private-package</code></p>
<p>Can this be sensibly done using <code>uv</code>?</p>
<p>I guess it could somehow be done via HTTP URLs but that seems a bit cumbersome.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-22 12:43</div>
            <div class="timeline-body"><p>So, today, you would do something like this in your <code>pyproject.toml</code>:</p>
<pre><code class="language-toml">[tool.uv]
extra-index-url = [&quot;https://pypi.example.org/simple/&quot;]
</code></pre>
<p>uv will then look in <code>https://pypi.example.org/simple/</code> before looking in PyPI, and if a package exists on that index, it won't check PyPI at all.</p>
<p>We'll likely add a more granular index API in the future that looks more like what you get in Poetry, PDM, or Rye.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-22 12:43</div>
            <div class="timeline-body"><p>If you want to replace PyPI entirely, you can do:</p>
<pre><code class="language-toml">[tool.uv]
index-url = &quot;https://pypi.example.org/simple/&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-22 12:44</div>
            <div class="timeline-body"><p>Alternatively, you can define these globally in <code>~/.config/uv/uv.toml</code>:</p>
<pre><code class="language-toml">extra-index-url = [&quot;https://pypi.example.org/simple/&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @charliermarsh on 2024-08-22 12:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NevoleMarek">@NevoleMarek</a> on 2024-08-22 13:07</div>
            <div class="timeline-body"><p>Thanks for the response</p>
<p>I guess the setting <code>extra-index-url</code> with <code>index-strategy = &quot;first-index&quot;</code> will do for now.</p>
<p>Looking forward to more granular API in the future.</p>
<p>One thing I would like to prevent via the future API is dependency confusion attacks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-22 13:15</div>
            <div class="timeline-body"><p>Makes sense. Our default strategy is more resilient to such attacks than pip (since, if a package exists on your index, we won't even look at PyPI, even if a more recent version is available there), but we do want to add an API that allows for explicit package-to-index assignments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rafalkrupinski">@rafalkrupinski</a> on 2024-08-26 07:03</div>
            <div class="timeline-body"><p>Regarding private source repository, is there a way to provide credentials?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NevoleMarek">@NevoleMarek</a> on 2024-08-26 10:43</div>
            <div class="timeline-body"><p>The simplest way would be to add the private source repo as <code>extra-index-url</code> already with the credentials as follows:</p>
<pre><code>[tool.uv]
extra-index-url = [&quot;https://&lt;username&gt;:&lt;password&gt;@&lt;index_url&gt;&quot;]
</code></pre>
<p>But as you can imagine this not the safest option. A bit more cumbersome but viable option is to specify the index and credentials with the <code>uv add</code> command and environment variables.</p>
<p><code>uv add package --extra-index-url https://${USERNAME}:${PASSWORD}@&lt;index_url&gt;</code></p>
<p>What I would like to see in the future is something similar to Poetry's way of doing this.</p>
<p>In addition to simple addition of sources they also provide the following way to add credentials to the sources.</p>
<p><code>poetry config http-basic.your_index &lt;username&gt; &lt;password&gt;</code> <a href="https://python-poetry.org/docs/repositories/">find more here</a></p>
<p>There are other options that <code>uv</code> <a href="https://docs.astral.sh/uv/configuration/authentication/#http-authentication">recommends</a> for http authentication but they are not the simplest either or maybe I am missing something</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rafalkrupinski">@rafalkrupinski</a> on 2024-08-26 14:16</div>
            <div class="timeline-body"><p>@NevoleMarek thanks, I'll check it out!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-26 17:42</div>
            <div class="timeline-body"><p>See also:</p>
<ul>
<li>https://github.com/astral-sh/uv/pull/6389</li>
<li>#171</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-08-26 17:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rafalkrupinski">@rafalkrupinski</a> on 2024-08-27 10:42</div>
            <div class="timeline-body"><p>Actually I like the idea of using keyring and KWallet integration. Way better than storing passwords in open text.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yohann84L">@yohann84L</a> on 2024-10-04 08:36</div>
            <div class="timeline-body"><p>Still no alternative to the <code>poetry config http-basic.your_index &lt;username&gt; &lt;password&gt;</code> ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-21 21:18</div>
            <div class="timeline-body"><p>We support <code>UV_INDEX_&lt;NAME&gt;_USERNAME</code> and <code>UV_INDEX_&lt;NAME&gt;_PASSWORD</code> now in addition to indexes in source definitions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-21 21:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hamedhsn">@hamedhsn</a> on 2025-01-28 18:24</div>
            <div class="timeline-body"><p>@zanieb is there any env variable to set the specific private index URL? like username and password you mentioned above?i did not see in the doc</p>
<p>I want to use <code>uv pip install private_pkg</code>
the <code>uv pip</code> seems not picking up <code>UV_INDEX_&lt;NAME&gt;_USERNAME and UV_INDEX_&lt;NAME&gt;_PASSWORD</code></p>
<p>basically, the question is if I want to use <code>uv pip install private_pkg</code> without having pyproject.toml to set the index + credentials how can I set the credentials</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tuomastik">@tuomastik</a> on 2025-02-24 09:59</div>
            <div class="timeline-body"><p>For token-based authentication, like Azure Artifacts feed, you can use:</p>
<pre><code class="language-yml">[[tool.uv.index]]
name = &quot;azureartifacts&quot;
url = &quot;https://pkgs.dev.azure.com/XXX/YYY/_packaging/ZZZ/pypi/simple/&quot;
</code></pre>
<p>Together with:</p>
<pre><code class="language-bash">export UV_INDEX_AZUREARTIFACTS_USERNAME=&lt;YOUR_PERSONAL_ACCESS_TOKEN&gt;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mattiamatrix">@mattiamatrix</a> on 2025-03-17 17:51</div>
            <div class="timeline-body"><p>AWS CodeArtifact worked by setting <code>UV_INDEX_&lt;NAME&gt;_PASSWORD</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TiansuYu">@TiansuYu</a> on 2025-08-22 14:24</div>
            <div class="timeline-body"><p>This does not solve the issue where some package wants to be specifically declared as from a private pypi. I am missing something like this from the UX:</p>
<pre><code class="language-toml">[project]
dependencies = [
    ...
    my-private-package = {version = &quot;&gt;= 0.1.0&quot;, index = &quot;my-private-pypi&quot; }
]

[[tool.uv.index]]
name = &quot;my-private-pypi&quot;
url = &quot;https://&lt;some-url&gt;/simple/&quot;
explicit = true
authenticate = &quot;always&quot;
</code></pre>
<p>similar process is well established within poetry. UV seems to be a bit clunky on that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-08-22 14:29</div>
            <div class="timeline-body"><p>What you're looking for exists -- it's a core feature:</p>
<pre><code class="language-toml">[project]
dependencies = [&quot;my-private-package&gt;=0.1.0&quot;]

[tool.uv.sources]
my-private-package = { index = &quot;my-private-pypi&quot; }

[[tool.uv.index]]
name = &quot;my-private-pypi&quot;
url = &quot;https://&lt;some-url&gt;/simple/&quot;
explicit = true
authenticate = &quot;always&quot;
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:26:22 UTC
    </footer>
</body>
</html>
