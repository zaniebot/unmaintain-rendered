<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error installing wheel with &quot;invalid version&quot; - astral-sh/uv #5478</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Error installing wheel with &quot;invalid version&quot;</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/5478">#5478</a>
        opened by <a href="https://github.com/albertotb">@albertotb</a>
        on 2024-07-26 12:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/albertotb">@albertotb</a> on 2024-07-26 12:40</div>
            <div class="timeline-body"><p>Version: <code>uv 0.2.29</code></p>
<p>I'm not sure if this is intended or not:</p>
<pre><code>uv pip install https://huggingface.co/PlanTL-GOB-ES/es_anonimization_core_lg/resolve/main/es_anonimization_core_lg-any-py3-none-any.whl
</code></pre>
<p>Fails with</p>
<pre><code>error: The wheel filename &quot;es_anonimization_core_lg-any-py3-none-any.whl&quot; has an invalid version: expected version to start with a number, but no leading ASCII digits were found
</code></pre>
<p>However, the equivalent pip command is able to install the wheel:</p>
<pre><code>pip install https://huggingface.co/PlanTL-GOB-ES/es_anonimization_core_lg/resolve/main/es_anonimization_core_lg-any-py3-none-any.whl
Collecting es-anonimization-core-lg==any
  Downloading https://huggingface.co/PlanTL-GOB-ES/es_anonimization_core_lg/resolve/main/es_anonimization_core_lg-any-py3-none-any.whl (587.8 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 587.8/587.8 MB 1.5 MB/s eta 0:00:00
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-26 18:34</div>
            <div class="timeline-body"><p>In our current design this is intentional -- we require that wheels always have valid wheel filenames, and that isn't a valid filename (since it's omitting the version).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @charliermarsh on 2024-07-26 18:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 00:51</div>
            <div class="timeline-body"><p>We should support this, requires some refactors though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eth3lbert">@eth3lbert</a> on 2024-07-29 06:42</div>
            <div class="timeline-body"><blockquote>
<p>Version: <code>uv 0.2.29</code></p>
<p>I'm not sure if this is intended or not:</p>
<pre><code>uv pip install https://huggingface.co/PlanTL-GOB-ES/es_anonimization_core_lg/resolve/main/es_anonimization_core_lg-any-py3-none-any.whl
</code></pre>
<p>Fails with</p>
<pre><code>error: The wheel filename &quot;es_anonimization_core_lg-any-py3-none-any.whl&quot; has an invalid version: expected version to start with a number, but no leading ASCII digits were found
</code></pre>
<p>However, the equivalent pip command is able to install the wheel:</p>
<pre><code>pip install https://huggingface.co/PlanTL-GOB-ES/es_anonimization_core_lg/resolve/main/es_anonimization_core_lg-any-py3-none-any.whl
Collecting es-anonimization-core-lg==any
  Downloading https://huggingface.co/PlanTL-GOB-ES/es_anonimization_core_lg/resolve/main/es_anonimization_core_lg-any-py3-none-any.whl (587.8 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 587.8/587.8 MB 1.5 MB/s eta 0:00:00
</code></pre>
</blockquote>
<p>Apologies for the intrusion. Could you please specify which version of <code>pip</code> you are using?</p>
<p>I have tested this with <code>pip</code> version <code>24.2</code> and encountered the following error:</p>
<pre><code class="language-shell">pip install https://huggingface.co/PlanTL-GOB-ES/es_anonimization_core_lg/resolve/main/es_anonimization_core_lg-any-py3-none-any.whl               
ERROR: Invalid requirement: 'es-anonimization-core-lg==any': Expected end or semicolon (after name and no valid version specifier)
    es-anonimization-core-lg==any
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/albertotb">@albertotb</a> on 2024-07-29 13:47</div>
            <div class="timeline-body"><p>Sure, I'm using pip 24.0, which seems to work fine. I will report to the creator of the wheel to see if they can follow the naming conventions. The confusing part here is that with pip seems to work (at least in some versions), so the wheel mantainers may not have noticed that the naming is incorrect.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/albertotb">@albertotb</a> on 2024-07-29 22:35</div>
            <div class="timeline-body"><p>Looking at pip release notes maybe this is related to this issue https://github.com/pypa/pip/issues/12063</p>
<p>It seems that starting with pip 24.1b1 the wheel I used as an example is no longer installable with pip https://pip.pypa.io/en/stable/news/#b1-2024-05-06</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../huggingface/huggingface_hub/issues/2637.html">huggingface/huggingface_hub#2637</a> on 2024-10-27 15:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jcorrie">@jcorrie</a> on 2024-10-27 15:40</div>
            <div class="timeline-body"><p>I'm experiencing the same issue using uv pip to install a spacy model via hugging face. The url given by hugging face for the wheels file seems only (?) to provide &quot;any&quot; as the version number. Agreed with @albertotb that from the pip issue referenced it seems like this is probably something hugging face will need to update. I've open a new issue <a href="https://github.com/huggingface/huggingface_hub/issues/2637">huggingface/huggingface_hub#2637</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/albertotb">@albertotb</a> on 2024-10-27 16:03</div>
            <div class="timeline-body"><p>Yes, the workaround I'm using is to stick with pip to install those HuggingFace models and pin pip&lt;=24.0. I guess you could also host a clone of such HuggingFacel models but with the correct naming. That is not ideal if they are being updated regularly, but it's probably fine for most models.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jtauber">@jtauber</a> on 2024-11-09 18:36</div>
            <div class="timeline-body"><p>can the wheel also be downloaded and renamed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/albertotb">@albertotb</a> on 2024-11-16 12:51</div>
            <div class="timeline-body"><blockquote>
<p>can the wheel also be downloaded and renamed?</p>
</blockquote>
<p>Probably, although not an ideal solution. You would have to re-host it somewhere or pass it around, and you also miss any updates.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/11434.html">astral-sh/uv#11434</a> on 2025-02-12 04:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2025-02-19 00:44</div>
            <div class="timeline-body"><blockquote>
<p>We should support this, requires some refactors though.</p>
</blockquote>
<p>Does uv have a strong reason to support this other than it happens to work with pip?</p>
<p>Pip is moving towards only allowing valid wheels, in fact this was going to be broken by https://github.com/pypa/pip/pull/12917, but as there was no deprication warning I'm going to push it out till pip 25.3: https://github.com/pypa/pip/pull/12917#issuecomment-2667222833, after which, like uv, pip will require wheels to have valid names in all cases.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-19 01:24</div>
            <div class="timeline-body"><p>Looking back at this, I agree with you that we shouldn't support it. Especially if pip is moving in that direction.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-02-19 01:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../huspacy/huspacy/issues/76.html">huspacy/huspacy#76</a> on 2025-10-08 16:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:20 UTC
    </footer>
</body>
</html>
