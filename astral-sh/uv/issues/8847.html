<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warn when `.python-version` conflicts with `uv venv -p &lt;version&gt;` in projects - astral-sh/uv #8847</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Warn when `.python-version` conflicts with `uv venv -p &lt;version&gt;` in projects</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/8847">#8847</a>
        opened by <a href="https://github.com/tleonhardt">@tleonhardt</a>
        on 2024-11-05 23:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/tleonhardt">@tleonhardt</a> on 2024-11-05 23:23</div>
            <div class="timeline-body"><h1>Summary</h1>
<p>I ask <code>uv</code> to install a Python 3.12 virtual environment and then ask it to run a command using what I assume is the default virtual environment and it actually runs it using Python 3.13.</p>
<p>Perhaps I am misunderstanding how <code>uv</code> is supposed to work but this is a very non-intuitive customer experience.</p>
<h2>How to reproduce</h2>
<pre><code class="language-sh">$ uv venv --python 3.12
Using CPython 3.12.6
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
$ uv run python -V
Using CPython 3.13.0
Removed virtual environment at: .venv
Creating virtual environment at: .venv
...
</code></pre>
<h2>Platform details</h2>
<pre><code class="language-sh">$  uv --version
uv 0.4.30 (Homebrew 2024-11-05)
</code></pre>
<ul>
<li>OS: macOS Sequoia 15.1 (Apple Silicon)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-05 23:24</div>
            <div class="timeline-body"><p>Do you have a <code>.python-version</code> file in the directory that pins to 3.13, maybe?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tleonhardt">@tleonhardt</a> on 2024-11-05 23:26</div>
            <div class="timeline-body"><p>Doh!  I do have a <code>.python-version</code> file in that directory pinned to 3.13.  I'm not sure where it came from.</p>
<p>I removed it and now it works as expected.</p>
<p>@charliermarsh You are the best.  Your response time is truly insane.  Thank you sir!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @tleonhardt on 2024-11-05 23:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-05 23:27</div>
            <div class="timeline-body"><p>Really glad I could help! (I wonder if we should've warned in the first <code>uv venv</code> invocation? \cc @zanieb)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tleonhardt">@tleonhardt</a> on 2024-11-05 23:28</div>
            <div class="timeline-body"><p>I view this as 100% my own fault.</p>
<p>But if you could warn users to let them know about this potentially unanticipated behavior, that would be fantastic.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-05 23:36</div>
            <div class="timeline-body"><p>Thanks for the ping, yeah it seems like we should probably warn there if you're changing to virtual environment to something we won't use in future project invocations.</p>
<p><code>uv run</code> should also say where it sourced that version from. I might have made that easier in #6370.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @zanieb on 2024-11-05 23:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-11-05 23:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @zanieb on 2024-11-05 23:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[Bug?] uv venv --python 3.12 creates a Python 3.13.0 virtual environment" to "Warn when `.python-version` conflicts with `uv venv -p <version>` in projects" by @zanieb on 2024-11-05 23:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Belval">@Belval</a> on 2025-05-08 19:28</div>
            <div class="timeline-body"><p>Any update on this? We encountered a situation where it delete a <code>.venv</code> that took some time to install...</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:01 UTC
    </footer>
</body>
</html>
