<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can't the tool use the dependencies in the project? - astral-sh/uv #14409</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Can't the tool use the dependencies in the project?</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/14409">#14409</a>
        opened by <a href="https://github.com/KQDtianxiaK">@KQDtianxiaK</a>
        on 2025-07-02 08:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/KQDtianxiaK">@KQDtianxiaK</a> on 2025-07-02 08:00</div>
            <div class="timeline-body"><h3>Question</h3>
<pre><code>[project]
name = &quot;state&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.11&quot;
dependencies = [
    &quot;argparse&gt;=1.4.0&quot;,
    &quot;huggingface-hub&gt;=0.33.1&quot;,
    &quot;jupyter&gt;=1.1.1&quot;,
    &quot;nvidia-cublas-cu12&gt;=12.9.1.4&quot;,
    &quot;nvidia-cudnn-cu12&gt;=9.10.2.21&quot;,
    &quot;nvidia-cufft-cu12&gt;=11.4.1.4&quot;,
    &quot;nvidia-cusolver-cu12&gt;=11.7.5.82&quot;,
    &quot;nvidia-cusparse-cu12&gt;=12.5.10.65&quot;,
    &quot;nvidia-cusparselt-cu12&gt;=0.7.1&quot;,
    &quot;nvidia-nccl-cu12&gt;=2.27.5&quot;,
    &quot;scanpy&gt;=1.11.3&quot;,
    &quot;torch&gt;=2.0.0&quot;,
    &quot;triton&gt;=3.3.1&quot;,
    &quot;umap-learn&gt;=0.5.8&quot;,
]
</code></pre>
<pre><code>$ uv tool list
arc-state v0.9.3
- state
</code></pre>
<p>My pyproject.toml file content is as above. I have installed the dependencies (cuda and torch) required by the tool I want to use: arc-state, But every time I reconnect to the server and use the following command,
<code>uv tool run -from arc-state state emb ...</code>
it will re-download cuda and torch dependencies.</p>
<h3>Platform</h3>
<p>Debian 6.1.90-1~bpo11+1 (2024-05-06) x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.7.17</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @KQDtianxiaK on 2025-07-02 08:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-02 14:45</div>
            <div class="timeline-body"><p>The environments are isolated by default. It shouldn't be re-downloading the dependencies though, are they not cached? Is it downloading new versions?</p>
<p>Related https://github.com/astral-sh/uv/issues/7186</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KQDtianxiaK">@KQDtianxiaK</a> on 2025-07-03 02:48</div>
            <div class="timeline-body"><blockquote>
<p>The environments are isolated by default. It shouldn't be re-downloading the dependencies though, are they not cached? Is it downloading new versions?</p>
<p>Related <a href="https://github.com/astral-sh/uv/issues/7186">#7186</a></p>
</blockquote>
<p>After I use the following command,
<code>uv tool update-shell</code>
I can call it directly with <code>state emb ...</code> instead of <code>uv tool run --from arc-state state emb ...</code>, and now it will not re-download dependencies.
In addition, I think that although <code>uvx</code> can automatically download dependencies, sometimes the dependency files are too large, which may increase the waiting time, especially for users in other countries. Maybe a step should be added to first check whether the current project environment has installed the dependencies required by <code>uvx xxx</code>. I have just used uv for three days. Please forgive me if there are any misunderstandings. Thank you for your reply!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:28 UTC
    </footer>
</body>
</html>
