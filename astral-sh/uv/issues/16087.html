<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Specify a path and index for package source - astral-sh/uv #16087</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Specify a path and index for package source</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/16087">#16087</a>
        opened by <a href="https://github.com/zacharymostowsky">@zacharymostowsky</a>
        on 2025-10-01 16:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zacharymostowsky">@zacharymostowsky</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>Hello,</p>
<p>I am trying to specify both a path and index to a dependency. I want to define some dependency in my project dependencies and have it pulled from a custom index but when I develop on the project locally, I want that dependency to be resolved from a local path. Is this possible?</p>
<p>I do not want to use 2 optional dependency groups because this dependency is in fact required for normal use of scripts in this virtual environment.</p>
<p>My hack around right now is to use the marker option and pick which source based on the system platform. This works okay for me as my deployed envs use Linux and locally I am on a Mac but is really not the right solution.</p>
<p>Stack Overflow Issue with same ask/request: https://stackoverflow.com/questions/79471982/uv-index-and-path-for-the-same-dependency-in-one-pyproject-toml-file</p>
<p>I want to be able to do something like this but not sure how to / if possible to reference the main project dependencies.</p>
<pre><code class="language-toml">[project]
dependencies = [
    &quot;my-package&quot;
]

[dependency-groups]
dev = [
    &quot;my-package&quot;,
]

[tool.uv.sources]
my-package = [
  { path = &quot;../path/to/my_package&quot; },
  { index = &quot;my-ado-index&quot; },
]

[[tool.uv.index]]
name = &quot;my-ado-index&quot;
url = &quot;https://my-ado-index/&quot;
</code></pre>
<h3>Platform</h3>
<p>Mac OS 15.6.1 (24G90) arm64</p>
<h3>Version</h3>
<p>uv 0.7.9 (13a86a23b 2025-05-30)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zacharymostowsky on 2025-10-01 16:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-18 10:15</div>
            <div class="timeline-body"><p>We're working on index proxy support, which should enable this workflow by &quot;proxying&quot; the production index with a file URL.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @konstin on 2025-12-18 10:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @konstin on 2025-12-18 10:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:33:02 UTC
    </footer>
</body>
</html>
