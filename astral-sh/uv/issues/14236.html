<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add `--torch-backend` flag support to `uv add` command for automatic PyTorch backend configuration - astral-sh/uv #14236</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Add `--torch-backend` flag support to `uv add` command for automatic PyTorch backend configuration</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/14236">#14236</a>
        opened by <a href="https://github.com/FishAlchemist">@FishAlchemist</a>
        on 2025-06-24 11:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2025-06-24 11:08</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Request to add a <code>--torch-backend</code> flag to the <code>uv add</code> command that automatically configures PyTorch backend sources in <code>pyproject.toml</code>. When using <code>uv add --torch-backend </code>, the command should:</p>
<ul>
<li>Automatically add the appropriate source configuration to <code>pyproject.toml</code> based on uv's documentation recommendations</li>
<li>Bind the specified torch package to the corresponding source</li>
<li>If a source with a different name but same URL already exists in <code>pyproject.toml</code>, automatically bind to that existing source instead of creating a duplicate</li>
</ul>
<p>Expected behavior: The command should automatically configure the appropriate PyTorch index URL in <code>pyproject.toml</code> and bind the torch packages to that source, eliminating the need for manual source configuration.</p>
<p>Referencing the content from the uv documentation.
https://docs.astral.sh/uv/guides/integration/pytorch/</p>
<hr />
<p>Additional note: I'm bringing this up purely as an idea; whether it's ultimately implemented or deemed unnecessary is fine.</p>
<h3>Example</h3>
<p>Write the document suggested content into pyproject.toml based on the given backend.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @FishAlchemist on 2025-06-24 11:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-06-24 13:34</div>
            <div class="timeline-body"><p>Yeah I need to sit down and figure out how we want to handle this here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-06-24 13:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/remleduff">@remleduff</a> on 2025-08-22 01:24</div>
            <div class="timeline-body"><p>What is the plan for proxy package indexes for this?</p>
<p>(We actually build torch from source to local package-indexes that match the torch naming scheme, so if you enabled an extra with the same logic as what --pytorch-backend does, it could actually help us too).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mohaidoss">@mohaidoss</a> on 2025-09-02 09:54</div>
            <div class="timeline-body"><p>Hello @charliermarsh beside the <code>uv add</code> functionality, can we specify <code>pytorch-backend=auto</code> in the <code>pyproject.toml</code> file ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../kyutai-labs/delayed-streams-modeling/issues/131.html">kyutai-labs/delayed-streams-modeling#131</a> on 2025-09-02 09:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:28 UTC
    </footer>
</body>
</html>
