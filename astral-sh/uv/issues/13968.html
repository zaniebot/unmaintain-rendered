<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Warn when `--upgrade-package &lt;name&gt;` does not result in an upgrade - astral-sh/uv #13968</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Warn when <code>--upgrade-package &lt;name&gt;</code> does not result in an upgrade</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/13968">#13968</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-06-11 15:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body">Summary
<p>We should explain why we could not upgrade a package when it was explicitly requested. As reported at <a href="https://github.com/astral-sh/uv/issues/1419">astral-sh/uv#1419</a>#issuecomment-2961172589, we don&#x27;t do this right now.</p>
<p>This may be a very hard problem do to the complexity of the resolver.</p>
Example
<pre><code>$ uv add --upgrade-package httpx
warning: cannot upgrade `httpx` because `foo` requires `httpx==0.1.0`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-11 15:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-06-11 15:34</div>
            <div class="timeline-body"><p>Implementation guidance:</p>
<p>For the regular case, it should be possible to get this information by looking at the incompatibilities we get from pubgrub in the resolver, there should be at least one incompatibility that puts an upper bound that is below the latest version that would have been otherwise selected. This is not a full proof as our error messages are, as the source of the (transitive) incompatibility may only be a preference, not a hard constraint (that is, we could upgrade to a higher version, but we couldn&#x27;t due a specific interaction between priorities and preferences - I can explain the details if required).</p>
<p>Another option is that there is a latest version but we didn&#x27;t select it for other reasons, namely it&#x27;s too high requires-python bound incompatible with the project requires-python, or, if the option is used, not having a wheel matching <code>tool.uv.required-environments</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:39:00 UTC
    </footer>
</body>
</html>
