<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Options for improving build isolation - astral-sh/uv #6992</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Options for improving build isolation</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6992">#6992</a>
        opened by <a href="https://github.com/dakinggg">@dakinggg</a>
        on 2024-09-04 01:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dakinggg">@dakinggg</a></div>
            <div class="timeline-body"><p>As I&#x27;m sure you know, build isolation is a real pain for packages with a requirement that packages are built with the same version of another package as will be used at runtime. This is very common in the pytorch ecosystem, and makes supporting multiple pytorch versions much more difficult. I&#x27;m sure there are many possible ways to improve the situation, but one thing I would like is to be able to specify in my pyproject.toml that one of my dependencies should be installed without build isolation. So I could make package A, that depends on package B, always install package B without build isolation. Wondering if something like this is a feature you would consider.</p>
<p>Apologies if there is an issue about this already (there are a lot of issues related to build isolation).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-04 02:09</div>
            <div class="timeline-body"><p>We do currently support disabling build isolation for individual packages with https://docs.astral.sh/uv/reference/settings/#no-build-isolation-package. Is that something like what you&#x27;re imagining? We also have some docs here on the workflows required to get it working in projects: https://docs.astral.sh/uv/concepts/projects/#build-isolation</p>
<p>I&#x27;m interested in better solutions to this problem though -- not happy with what we have today. I&#x27;m kind of imagining something whereby you declare that packages that your package needs to include (e.g., you could say that package A needs PyTorch), and then we link those into the the build environment...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-04 02:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dakinggg">@dakinggg</a> on 2024-09-04 02:23</div>
            <div class="timeline-body"><p>That does seem to be exactly what I described, thanks! Just to check, does that specification still work if I am using the <code>uv pip</code> interface?</p>
<p>And agreed on there must be better solutions...I suppose ideally my installation would understand somehow that both package A and package B rely on pytorch, and the same version of pytorch must be used for building B and running A, I would not need to preinstall pytorch in my environment, and it would just work with a simple <code>install</code> of package A.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-04 02:26</div>
            <div class="timeline-body"><p>Yup, <code>--no-build-isolation-package</code> is supported in the <code>uv pip</code> interface.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dakinggg">@dakinggg</a> on 2024-09-04 02:27</div>
            <div class="timeline-body"><p>Amazing! From my perspective, question is answered, feel free to close as you see fit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-04 02:32</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:33:37 UTC
    </footer>
</body>
</html>
