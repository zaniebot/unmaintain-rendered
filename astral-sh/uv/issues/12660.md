```yaml
number: 12660
title: "Can I install a project's `optional-dependencies` without its `dependencies` with `uv`?"
type: issue
state: open
author: alph0n5e
labels:
  - enhancement
assignees: []
created_at: 2025-04-03T20:51:54Z
updated_at: 2025-04-04T16:04:50Z
url: https://github.com/astral-sh/uv/issues/12660
synced_at: 2026-01-10T01:57:29Z
```

# Can I install a project's `optional-dependencies` without its `dependencies` with `uv`?

---

_Issue opened by @alph0n5e on 2025-04-03 20:51_

### Question

Hi!

Is it possible to only install a project's specific extra, or `optional-dependencies`, without installing the project itself or its direct dependencies?

I am able to do it for a group defined in `dependency-groups`, using `uv sync --freeze --only-group <my-group>`, but is it something we can do for `optional-dependencies` groups as well (something akin to `uv sync --only-extra <my-group>`)?

Thanks for the amazing work, I've been really enjoying working with `uv` over the last few months.

### Platform

_No response_

### Version

_No response_

---

_Label `question` added by @alph0n5e on 2025-04-03 20:51_

---

_Comment by @zanieb on 2025-04-03 21:29_

Thanks for the kind words.

No, this isn't supported, the `optional-dependencies` are always intended to include the project (per the specification). Can you share your use-case?

---

_Comment by @alph0n5e on 2025-04-04 06:22_

Thank you for your response. The use-case was the following:

My team is working with GPU-specific optional dependencies which are heavy but less likely to change than the mandatory dependencies, and we would like to front-load their installation in an upstream intermediate Docker layer or image as part of our builds.

```toml
# pyproject.toml
[project]
name = "my-project"
dependencies = [
    # standard deps, including local libs with relative paths
]
...
[project.optional-dependencies]
gpu = [
    # GPU-specific deps
]
...
```

We were hoping to be able to leverage the existing `pyproject.toml` or `uv.lock` dependencies specification to do such an "extra-only" install, without having to re-specify the extras in the Docker layer, if that makes sense.

```dockerfile
# GPU build
...
# Install extra-specific optional dependencies, possibly even in an intermediate image
RUN --mount=type=cache,target=/root/.cache/uv \
    --mount=type=bind,source=uv.lock,target=uv.lock \
    --mount=type=bind,source=pyproject.toml,target=pyproject.toml \
    uv sync --frozen --only-extra gpu  # this is where it gets fuzzy
...
# Install "standard" dependencies
RUN --mount=type=cache,target=/root/.cache/uv \
    --mount=type=bind,source=uv.lock,target=uv.lock \
    --mount=type=bind,source=pyproject.toml,target=pyproject.toml \
    uv sync --frozen --no-install-project
...
# Sync the project
RUN --mount=type=cache,target=/root/.cache/uv \
    uv sync --frozen
```

There are probably other (and better?) ways to address this use-case, but I was curious if such a thing was possible "as-is".

---

_Comment by @zanieb on 2025-04-04 13:59_

Ah, I see. That's interesting. It was _considered_ to allow referring to dependency groups from optional dependencies but ultimately left out of the standard, I guess this is a use-case for that.

I can't think of a particularly clean way to do this yet. I'm hesitant to add that interface more broadly, because I think it will be confusing to others.

---

_Label `question` removed by @zanieb on 2025-04-04 14:00_

---

_Label `enhancement` added by @zanieb on 2025-04-04 14:00_

---

_Comment by @alph0n5e on 2025-04-04 16:04_

I understand, it may be too specific of a use-case for a broader implementation. Thanks for considering it anyway!

---
