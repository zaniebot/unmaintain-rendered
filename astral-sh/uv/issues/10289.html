<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using jupyter notebooks with uv causes circular imports - astral-sh/uv #10289</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Using jupyter notebooks with uv causes circular imports</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/10289">#10289</a>
        opened by <a href="https://github.com/anuroop18">@anuroop18</a>
        on 2025-01-03 15:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/anuroop18">@anuroop18</a> on 2025-01-03 15:28</div>
            <div class="timeline-body"><p>I did following</p>
<ul>
<li><code>uv init</code></li>
<li><code>uv venv</code></li>
<li><code>source .venv/bin/activate</code></li>
<li><code>uv add jupyterlab</code>  (same problem if using ipykernel or marimo)</li>
<li>Open some notebook and try to run some cell</li>
<li>Shows circular import error like following:</li>
</ul>
<pre><code>The kernel failed to start as 'get_ipython' could not be imported from 'most likely due to a circular import'.
</code></pre>
<details>
<summary>This is the detailed error i am getting.</summary>

<pre><code>15:21:43.265 [info] Starting Kernel (Python Path: ~/projects/worksheet_automation/.venv/bin/python, Venv, 3.13.0) for '~/projects/worksheet_automation/src/scripts/experiments.ipynb' (disableUI=false)
15:21:43.286 [info] Process Execution: ~/projects/worksheet_automation/.venv/bin/python -c &quot;import ipykernel; print(ipykernel.__version__); print(&quot;5dc3a68c-e34e-4080-9c3e-2a532b2ccb4d&quot;); print(ipykernel.__file__)&quot;
15:21:43.312 [info] Process Execution: ~/projects/worksheet_automation/.venv/bin/python -m ipykernel_launcher --f=/home/~/.local/share/jupyter/runtime/kernel-v33885fbf97197ca0b83610954ce18c5d90e11ea7d.json
    &gt; cwd: //home/~/projects/worksheet_automation/src/scripts
15:21:43.672 [error] Disposing kernel process due to an error Error: The kernel died. Error: Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)... View Jupyter [log](command:jupyter.viewOutput) for further details.
    &gt; Kernel Id = .jvsc74a57bd04b8b6175ebb045c6837643fdeeb2af16a8fcb612fd1ee157725d0c80dd9e4020./home/~/projects/worksheet_automation/.venv/python./home/~/projects/worksheet_automation/.venv/python.-m#ipykernel_launcher
    &gt; Interpreter Id = ~/projects/worksheet_automation/.venv/bin/python
    &gt; at ChildProcess.&lt;anonymous&gt; (/home/~/.cursor-server/extensions/ms-toolsai.jupyter-2024.8.1-linux-x64/dist/extension.node.js:299:44598)
    &gt; stdErr = Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)
15:21:43.674 [error] Failed to connect raw kernel session: Error: The kernel died. Error: Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)... View Jupyter [log](command:jupyter.viewOutput) for further details.
15:21:43.675 [error] Failed to connect raw kernel session: Error: The kernel died. Error: Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)... View Jupyter [log](command:jupyter.viewOutput) for further details.
15:21:43.675 [warn] Failed to shutdown kernel, .jvsc74a57bd04b8b6175ebb045c6837643fdeeb2af16a8fcb612fd1ee157725d0c80dd9e4020./home/~/projects/worksheet_automation/.venv/python./home/~/projects/worksheet_automation/.venv/python.-m#ipykernel_launcher [TypeError: Cannot read properties of undefined (reading 'dispose')
	at L_.shutdown (/home/~/.cursor-server/extensions/ms-toolsai.jupyter-2024.8.1-linux-x64/dist/extension.node.js:304:13629)
	at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
	at async U_.shutdown (/home/~/.cursor-server/extensions/ms-toolsai.jupyter-2024.8.1-linux-x64/dist/extension.node.js:304:22107)]
15:21:43.676 [warn] Error occurred while trying to start the kernel, options.disableUI=false Error: The kernel died. Error: Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)... View Jupyter [log](command:jupyter.viewOutput) for further details.
    &gt; Kernel Id = .jvsc74a57bd04b8b6175ebb045c6837643fdeeb2af16a8fcb612fd1ee157725d0c80dd9e4020./home/~/projects/worksheet_automation/.venv/python./home/~/projects/worksheet_automation/.venv/python.-m#ipykernel_launcher
    &gt; Interpreter Id = ~/projects/worksheet_automation/.venv/bin/python
    &gt; at ChildProcess.&lt;anonymous&gt; (/home/~/.cursor-server/extensions/ms-toolsai.jupyter-2024.8.1-linux-x64/dist/extension.node.js:299:44598)
    &gt; stdErr = Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)
15:21:43.677 [warn] Kernel Error, context = start Error: The kernel died. Error: Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)... View Jupyter [log](command:jupyter.viewOutput) for further details.
    &gt; Kernel Id = .jvsc74a57bd04b8b6175ebb045c6837643fdeeb2af16a8fcb612fd1ee157725d0c80dd9e4020./home/~/projects/worksheet_automation/.venv/python./home/~/projects/worksheet_automation/.venv/python.-m#ipykernel_launcher
    &gt; Interpreter Id = ~/projects/worksheet_automation/.venv/bin/python
    &gt; at ChildProcess.&lt;anonymous&gt; (/home/~/.cursor-server/extensions/ms-toolsai.jupyter-2024.8.1-linux-x64/dist/extension.node.js:299:44598)
    &gt; stdErr = Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)
15:21:43.690 [info] Process Execution: ~/projects/worksheet_automation/.venv/bin/python -c &quot;import ipykernel;print('6af208d0-cb9c-427f-b937-ff563e17efdf')&quot;
15:21:44.211 [info] Dispose Kernel '~/projects/worksheet_automation/src/scripts/experiments.ipynb' associated with '~/projects/worksheet_automation/src/scripts/experiments.ipynb'
15:21:44.213 [error] Error in notebook cell execution Error: The kernel died. Error: Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)... View Jupyter [log](command:jupyter.viewOutput) for further details.
    &gt; Kernel Id = .jvsc74a57bd04b8b6175ebb045c6837643fdeeb2af16a8fcb612fd1ee157725d0c80dd9e4020./home/~/projects/worksheet_automation/.venv/python./home/~/projects/worksheet_automation/.venv/python.-m#ipykernel_launcher
    &gt; Interpreter Id = ~/projects/worksheet_automation/.venv/bin/python
    &gt; at ChildProcess.&lt;anonymous&gt; (/home/~/.cursor-server/extensions/ms-toolsai.jupyter-2024.8.1-linux-x64/dist/extension.node.js:299:44598)
    &gt; stdErr = Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)
15:21:44.215 [error] Error in execution (get message for cell) Error: The kernel died. Error: Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)... View Jupyter [log](command:jupyter.viewOutput) for further details.
    &gt; Kernel Id = .jvsc74a57bd04b8b6175ebb045c6837643fdeeb2af16a8fcb612fd1ee157725d0c80dd9e4020./home/~/projects/worksheet_automation/.venv/python./home/~/projects/worksheet_automation/.venv/python.-m#ipykernel_launcher
    &gt; Interpreter Id = ~/projects/worksheet_automation/.venv/bin/python
    &gt; at ChildProcess.&lt;anonymous&gt; (/home/~/.cursor-server/extensions/ms-toolsai.jupyter-2024.8.1-linux-x64/dist/extension.node.js:299:44598)
    &gt; stdErr = Traceback (most recent call last):
  File &quot;&lt;frozen runpy&gt;&quot;, line 198, in _run_module_as_main
  File &quot;&lt;frozen runpy&gt;&quot;, line 88, in _run_code
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel_launcher.py&quot;, line 16, in &lt;module&gt;
    from ipykernel import kernelapp as app
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/ipykernel/kernelapp.py&quot;, line 21, in &lt;module&gt;
    from IPython.core.application import (  # type:ignore[attr-defined]
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py&quot;, line 53, in &lt;module&gt;
    from .core.application import Application
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/application.py&quot;, line 37, in &lt;module&gt;
    from IPython.core import crashhandler, release
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/crashhandler.py&quot;, line 30, in &lt;module&gt;
    from IPython.core import ultratb
  File &quot;/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/core/ultratb.py&quot;, line 111, in &lt;module&gt;
    from IPython import get_ipython
ImportError: cannot import name 'get_ipython' from partially initialized module 'IPython' (most likely due to a circular import) (/home/~/projects/worksheet_automation/.venv/lib/python3.11/site-packages/IPython/__init__.py)
15:21:44.225 [info] Process Execution: ~/projects/worksheet_automation/.venv/bin/python -c &quot;import ipykernel;print('6af208d0-cb9c-427f-b937-ff563e17efdf')&quot;
</code></pre>
</details>

<details>
<summary>I get this error when using `uv run marimo`</summary>

<pre><code>Process Process-1:
Traceback (most recent call last):
  File &quot;/home/anuroop/.local/share/uv/python/cpython-3.11.10-linux-x86_64-gnu/lib/python3.11/multiprocessing/process.py&quot;, line 314, in _bootstrap
    self.run()
  File &quot;/home/anuroop/.local/share/uv/python/cpython-3.11.10-linux-x86_64-gnu/lib/python3.11/multiprocessing/process.py&quot;, line 108, in run
    self._target(*self._args, **self._kwargs)
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/marimo/_runtime/runtime.py&quot;, line 2137, in launch_kernel
    kernel.start_completion_worker(completion_queue)
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/marimo/_runtime/runtime.py&quot;, line 543, in start_completion_worker
    from marimo._runtime.complete import completion_worker
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/marimo/_runtime/complete.py&quot;, line 10, in &lt;module&gt;
    import jedi  # type: ignore # noqa: F401
    ^^^^^^^^^^^
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/__init__.py&quot;, line 33, in &lt;module&gt;
    from jedi.api import Interpreter, Script, preload_module, set_debug_function
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/api/__init__.py&quot;, line 17, in &lt;module&gt;
    from jedi.api import classes, helpers, interpreter, refactoring
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/api/classes.py&quot;, line 24, in &lt;module&gt;
    from jedi.api.helpers import filter_follow_imports
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/api/helpers.py&quot;, line 15, in &lt;module&gt;
    from jedi.inference.base_value import NO_VALUES
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/inference/__init__.py&quot;, line 69, in &lt;module&gt;
    from jedi.inference import helpers, imports, recursion
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/inference/imports.py&quot;, line 23, in &lt;module&gt;
    from jedi.inference.gradual.typeshed import (
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/inference/gradual/typeshed.py&quot;, line 11, in &lt;module&gt;
    from jedi.inference.gradual.stub_value import StubModuleValue, TypingModuleWrapper
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/inference/gradual/stub_value.py&quot;, line 4, in &lt;module&gt;
    from jedi.inference.gradual.typing import TypingModuleFilterWrapper
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/inference/gradual/typing.py&quot;, line 11, in &lt;module&gt;
    from jedi.inference.arguments import repack_with_argument_clinic
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/inference/arguments.py&quot;, line 18, in &lt;module&gt;
    from jedi.inference.value import iterable
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/inference/value/__init__.py&quot;, line 5, in &lt;module&gt;
    from jedi.inference.value.instance import (
  File &quot;/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/inference/value/instance.py&quot;, line 7, in &lt;module&gt;
    from jedi.inference.arguments import TreeArgumentsWrapper, ValuesArguments
ImportError: cannot import name 'TreeArgumentsWrapper' from partially initialized module 'jedi.inference.arguments' (most likely due to a circular import) (/home/anuroop/projects/worksheet_automation/.venv/lib/python3.11/site-packages/jedi/inference/arguments.py)
</code></pre>
</details>

<p>They work fine when installed and using with pip.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-03 15:51</div>
            <div class="timeline-body"><p>How are you running Jupyter, after installing it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2025-01-03 15:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/anuroop18">@anuroop18</a> on 2025-01-03 15:57</div>
            <div class="timeline-body"><p>@charliermarsh  Thanks for quick reply.</p>
<p>I did following:</p>
<ul>
<li><p><code>uv run jupyter lab</code> or</p>
</li>
<li><p><code>source .venv/bin/activate</code> =&gt; <code>jupyter lab</code> or</p>
</li>
<li><p>Running in vscode/cursor
Getting same error in all of the above.</p>
</li>
<li><p>Tried this also with same error: <code>uv run --with jupyter jupyter lab</code></p>
</li>
</ul>
<p>But if the do following:</p>
<ul>
<li><code>uv venv</code></li>
<li><code>uv pip install pip</code></li>
<li>Select that .venv as kernel in vscode notebook</li>
<li>Then install ipykernel using the dialog that vscode displays</li>
<li>Then all works fine, even after <code>uv sync</code></li>
</ul>
<p>I checked all packages installed in every way, pip/uv. The list is exactly same.</p>
<p>Additionally, i am running all this using wsl. Everything used to work fine. Getting these errors for only 1 week .Tried different versions still same issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-03 16:08</div>
            <div class="timeline-body"><p>I don't really know what's going on, but you could try (1) <code>uv cache clean</code>, then (2) <code>uv venv</code> and re-run your workflow. Does that help at all?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/anuroop18">@anuroop18</a> on 2025-01-03 16:21</div>
            <div class="timeline-body"><p>Thankyou so so much. üôèüôè</p>
<p>This solved my problem instantly.</p>
<p>But what was really causing problem??</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../Cyfrin/moccasin/issues/179.html">Cyfrin/moccasin#179</a> on 2025-01-03 16:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @anuroop18 on 2025-01-03 16:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-03 17:41</div>
            <div class="timeline-body"><p>I‚Äôm not certain. Weird things can happen with Jupyter specifically because a lot of packages tend to write to the same location in the environment. Or perhaps at some point a file within a virtual environment was edited, and that ‚Äúpoisoned‚Äù the cache. Hard to say.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:25 UTC
    </footer>
</body>
</html>
