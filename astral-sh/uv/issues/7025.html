<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uvx (and uv) considerably slower in windows command prompt but fine in powershell - astral-sh/uv #7025</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>uvx (and uv) considerably slower in windows command prompt but fine in powershell</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/7025">#7025</a>
        opened by <a href="https://github.com/geophpherie">@geophpherie</a>
        on 2024-09-04 14:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/geophpherie">@geophpherie</a> on 2024-09-04 14:47</div>
            <div class="timeline-body"><p>Running <code>uvx jupyter</code> in windows command prompt really chokes up for me, the progress bars start freezing up and progress becomes unclear. But in powershell everything runs with reasonable speed. This is using 0.4.4.</p>
<p>I settled on this as a MRE, but I first came across this when using <code>uv run</code> with a script that launches <code>jupyter</code>. Was seeing terrible performance in command prompt, but fine in powershell, and fine on a mac on the same wifi.</p>
<p>This snippet was my ultimate goal, to be run with <code>uv run</code>.</p>
<pre><code># /// script
# requires-python = &quot;&gt;=3.12&quot;
# dependencies = [
#     &quot;jupyter&quot;,
#     &quot;pandas&quot;,
# ]
# ///
import subprocess
from pathlib import Path

subprocess.run([
    &quot;jupyter&quot;,
    &quot;notebook&quot;,
])
</code></pre>
<p>Originally came to the GitHub issues through (https://github.com/astral-sh/uv/issues/5073) but I think maybe it's not quite similar enough. Any thoughts or tips would be much appreciated!</p>
<p><img src="https://github.com/user-attachments/assets/6ced3616-9e8b-4498-a165-33fd2b49cf38" alt="export" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-04 14:48</div>
            <div class="timeline-body"><p>Can you try using <code>--no-progress</code>? Maybe it's a rendering issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geophpherie">@geophpherie</a> on 2024-09-04 14:56</div>
            <div class="timeline-body"><p>Thanks for the quick response!</p>
<p>Running <code>uvx --no-progress jupyter</code> seems to result in the same thing.</p>
<p>In CMD it takes a long time, haven't got it to complete yet, but in PS it finishes up quick. So maybe same issue still there?</p>
<p><code>Installed 96 packages in 1.90s</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geophpherie">@geophpherie</a> on 2024-09-04 15:07</div>
            <div class="timeline-body"><p>So it ends up as a network timeout - but again, in PS and on MAC on same wifi there's no issue with timing out. Idk that <code>babel</code> itself is a problem or just caught in the crossfire here.</p>
<pre><code>error: Failed to prepare distributions
  Caused by: Failed to fetch wheel: babel==2.16.0
  Caused by: Failed to extract archive
  Caused by: Failed to download distribution due to network timeout. Try increasing UV_HTTP_TIMEOUT (current value: 30s).
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-04 15:07</div>
            <div class="timeline-body"><p>Very weird â€” sorry I have no idea why Windows behavior would be different across these two shells.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by @zanieb on 2024-09-04 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geophpherie">@geophpherie</a> on 2024-09-04 17:17</div>
            <div class="timeline-body"><p>Well so if i launch cmd.exe in powershell it works as expected ... idk what's going on there but doesn't seem like a uv problem that I can tell. Gonna close this.</p>
<p>thank you for the time!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @geophpherie on 2024-09-04 17:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geophpherie">@geophpherie</a> on 2024-09-05 14:17</div>
            <div class="timeline-body"><p>FWIW I've now learned that running <code>uvx --no-cache jupyter notebook</code> makes it run just as snappy in CMD as in PS.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @geophpherie on 2024-09-05 14:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @geophpherie on 2024-09-05 14:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geophpherie">@geophpherie</a> on 2024-09-11 15:50</div>
            <div class="timeline-body"><p>Sort of wondering if there's something that's slowing down cache lookups for some reason. Some of these take up to 10s - i'm guessing it shouldn't take near that long.</p>
<p><img src="https://github.com/user-attachments/assets/f1dd4ad2-9617-4272-a659-6196c2876234" alt="image" /></p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:22 UTC
    </footer>
</body>
</html>
