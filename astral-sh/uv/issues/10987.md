```yaml
number: 10987
title: "`uv export` does not generate hashes for `--find-links`"
type: issue
state: closed
author: apaleyes
labels:
  - bug
assignees: []
created_at: 2025-01-27T15:08:32Z
updated_at: 2025-01-27T15:17:40Z
url: https://github.com/astral-sh/uv/issues/10987
synced_at: 2026-01-10T01:57:25Z
```

# `uv export` does not generate hashes for `--find-links`

---

_Issue opened by @apaleyes on 2025-01-27 15:08_

### Summary

Probably related to other similar entries, some of which are closed and some are open: https://github.com/astral-sh/uv/issues/3874, https://github.com/astral-sh/uv/pull/5544, https://github.com/astral-sh/uv/issues/7064

When generating requirements.txt file from the uv environment, it does not add hashes for dependencies supplied via `find-links`. This means that resulting requirements.txt file is not usable - `pip install` [cannot work](https://pip.pypa.io/en/stable/cli/pip_download/#cmdoption-require-hashes) with a file where some dependencies have hashes and some don't.

### Minimal example to reproduce
Create a new directory with the following `pyproject.toml`:
```
[project]
name = "uv-hash-repro"
version = "0.1"
requires-python = ">=3.10,<3.13"
dependencies = [
    "torch",
    "torch-geometric",
    "torch-cluster",
    "torch-scatter",
]

[tool.uv]
find-links = [
    "https://data.pyg.org/whl/torch-2.5.1+cpu.html",
]

[[tool.uv.index]]
name = "pytorch-cpu"
url = "https://download.pytorch.org/whl/cpu"
explicit = true
```

Now run
```
uv venv
uv sync
```

And now generate requirements with export, and observe absence of hashes:
```
uv export --frozen --no-emit-project | grep -A 1 torch
```

On my machine this gives following output, where hashes for `torch-scatter` and `torch-cluster` are clearly missing:
```
torch==2.5.1 \
    --hash=sha256:23d062bf70776a3d04dbe74db950db2a5245e1ba4f27208a87f0d743b0d06e86 \
--
torch-cluster==1.6.3 ; (platform_machine != 'x86_64' and sys_platform == 'linux') or (platform_machine != 'x86_64' and sys_platform == 'win32') or (sys_platform != 'linux' and sys_platform != 'win32')
torch-cluster==1.6.3+pt25cpu ; (platform_machine == 'x86_64' and sys_platform == 'linux') or (platform_machine == 'x86_64' and sys_platform == 'win32')
torch-geometric==2.6.1 \
    --hash=sha256:1f18f9d0fc4d2239d526221e4f22606a4a3895b5d965a9856d27610a3df662c6 \
--
torch-scatter==2.1.2 ; (platform_machine != 'x86_64' and sys_platform == 'linux') or (platform_machine != 'x86_64' and sys_platform == 'win32') or (sys_platform != 'linux' and sys_platform != 'win32')
torch-scatter==2.1.2+pt25cpu ; (platform_machine == 'x86_64' and sys_platform == 'linux') or (platform_machine == 'x86_64' and sys_platform == 'win32')
tqdm==4.67.1 \
```

### Platform

macos (Darwin 23.2.0 arm64)

### Version

uv 0.5.23

### Python version

3.11

---

_Label `bug` added by @apaleyes on 2025-01-27 15:08_

---

_Comment by @charliermarsh on 2025-01-27 15:12_

Yeah, this is a duplicate of https://github.com/astral-sh/uv/issues/7064.

---

_Comment by @charliermarsh on 2025-01-27 15:15_

For what it's worth, we may not change it. Adding hashes for `--find-links` would require downloading and hashing _all_ distributions for a matching version in the index. For PyTorch, for example, this would be _incredibly_ slow.

You can run with `--no-hashes` to omit hashes entirely (or use uv to install the file (which accepts partial hashes)).


---

_Closed by @charliermarsh on 2025-01-27 15:15_

---

_Comment by @apaleyes on 2025-01-27 15:17_

that was lightning fast, thanks for the response @charliermarsh !

---
