<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Specify a custom index for only one package - astral-sh/uv #3931</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Specify a custom index for only one package</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3931">#3931</a>
        opened by <a href="https://github.com/mariomeissner">@mariomeissner</a>
        on 2024-05-31 08:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mariomeissner">@mariomeissner</a></div>
            <div class="timeline-body"><p>I am using <code>uv pip compile</code> in a project that has pytorch dependencies. I need to use the custom pytorch index <code>https://download.pytorch.org/whl/cu117</code> to install <code>pytorch==2.13.1+cu117</code>. I am using the following syntax in my <code>requirements.in</code> file:</p>
<pre><code>--extra-index-url https://download.pytorch.org/whl/cu117
torch==1.13.1+cu117
torchmetrics==1.3.1
</code></pre>
<p>However, this fails with the following error:</p>
<pre><code>  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of torchmetrics==1.3.1 and you require
      torchmetrics==1.3.1, we can conclude that the requirements are
      unsatisfiable.
</code></pre>
<p>Indeed, <code>torchmetrics==1.3.1</code> is not available in the pytorch index, but it should be available in the default pypi index. I am aware of uv&#x27;s limitation to search across multiple indexes, but I thought that I would be able to apply the custom index flag to only one package (in this case <code>torch</code>), and have it search for all other packages in the default index. This doesn&#x27;t seem to be the case, as shown by the torchmetrics failure.</p>
<p>Is there a way to specify a custom index for just one package?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-31 16:36</div>
            <div class="timeline-body"><p>There isn&#x27;t a way to do this with <code>requirements.txt</code> but we&#x27;ll support it in the future via TOML (see: #171). In the meantime, you should be able to use <code>--index-strategy unsafe-first-match</code> or <code>--index-strategy unsafe-any-match</code> to allow searching over multiple indexes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-31 16:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mariomeissner">@mariomeissner</a> on 2024-06-01 00:17</div>
            <div class="timeline-body"><p>Thanks Charlie.</p>
<p>I think one more solution is to use the &#x27;@&#x27; notation to specify the download URL, probably better and faster than enabling unsafe search.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:31:19 UTC
    </footer>
</body>
</html>
