<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support parsing `--find-links`, `--index-url`, and `--extra-index-url` from `requirements.txt` - astral-sh/uv #1143</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support parsing <code>--find-links</code>, <code>--index-url</code>, and <code>--extra-index-url</code> from <code>requirements.txt</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/1143">#1143</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-01-27 01:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><p><em>No description provided.</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-27 01:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-27 02:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-29 15:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/VictorGob">@VictorGob</a> on 2024-02-15 22:47</div>
            <div class="timeline-body"><p>I have tried installing the following requirements.txt in two Python 3.11-slim containers, one with uv and the other with regular pip (to see the speed difference). It seems that uv has ignored the <code>--extra-index-url</code> and installed the GPU version of PyTorch. (uv also tested with <code>--index-url</code>)</p>
<blockquote>
<p>$ cat requirements.txt
--extra-index-url https://download.pytorch.org/whl/cpu
pandas
polars
numpy
torch
torchvision
torchaudio
matplotlib</p>
</blockquote>
<p>These are the biggest differences when running <code>pip freeze</code>:</p>
<blockquote>
<p>// Packages extra with uv:
nvidia-cublas-cu12==12.1.3.1
nvidia-cuda-cupti-cu12==12.1.105
nvidia-cuda-nvrtc-cu12==12.1.105
nvidia-cuda-runtime-cu12==12.1.105
nvidia-cudnn-cu12==8.9.2.26
nvidia-cufft-cu12==11.0.2.54
nvidia-curand-cu12==10.3.2.106
nvidia-cusolver-cu12==11.4.5.107
nvidia-cusparse-cu12==12.1.0.106
nvidia-nccl-cu12==2.19.3
nvidia-nvjitlink-cu12==12.3.101
nvidia-nvtx-cu12==12.1.105
// pytorch packages installed with uv, no CPU version
torch==2.2.0
torchaudio==2.2.0
torchvision==0.17.0</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-15 22:49</div>
            <div class="timeline-body"><p>I think <code>uv</code> is probably finding <code>pytorch</code> from PyPI, rather than the extra index. What happens if you use <code>--index-url</code> instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/VictorGob">@VictorGob</a> on 2024-02-15 22:54</div>
            <div class="timeline-body"><p>Same:
(In both uv attempts, I ran <code>uv venv</code> before installing anything. And both attempts were in separate Python 3.11-slim containers.)</p>
<blockquote>
<p>$ cat requirements.txt
--index-url https://download.pytorch.org/whl/cpu
pandas
polars
numpy
torch
torchvision
torchaudio
matplotlib
$ uv pip freeze
certifi==2024.2.2
charset-normalizer==3.3.2
contourpy==1.2.0
cycler==0.12.1
filelock==3.13.1
fonttools==4.48.1
fsspec==2024.2.0
idna==3.6
jinja2==3.1.3
kiwisolver==1.4.5
markupsafe==2.1.5
matplotlib==3.8.3
mpmath==1.3.0
networkx==3.2.1
numpy==1.26.4
nvidia-cublas-cu12==12.1.3.1
nvidia-cuda-cupti-cu12==12.1.105
nvidia-cuda-nvrtc-cu12==12.1.105
nvidia-cuda-runtime-cu12==12.1.105
nvidia-cudnn-cu12==8.9.2.26
nvidia-cufft-cu12==11.0.2.54
nvidia-curand-cu12==10.3.2.106
nvidia-cusolver-cu12==11.4.5.107
nvidia-cusparse-cu12==12.1.0.106
nvidia-nccl-cu12==2.19.3
nvidia-nvjitlink-cu12==12.3.101
nvidia-nvtx-cu12==12.1.105
packaging==23.2
pandas==2.2.0
pillow==10.2.0
polars==0.20.8
pyparsing==3.1.1
python-dateutil==2.8.2
pytz==2024.1
requests==2.31.0
six==1.16.0
sympy==1.12
torch==2.2.0
torchaudio==2.2.0
torchvision==0.17.0
triton==2.2.0
typing-extensions==4.9.0
tzdata==2024.1
urllib3==2.2.0</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-15 22:56</div>
            <div class="timeline-body"><p>Thanks, will take a look!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/VictorGob">@VictorGob</a> on 2024-02-20 22:14</div>
            <div class="timeline-body"><p>Different error now:</p>
<pre><code>$ root@62643bd3bcd0:~/test# uv pip install -r requirement.txt 
  × No solution found when resolving dependencies:
  ╰─▶ Because matplotlib was not found in the package registry and you require matplotlib, we can conclude that the
      requirements are unsatisfiable.
root@62643bd3bcd0:~/test# cat requirement.txt 
--index-url https://download.pytorch.org/whl/cpu
pandas
polars
numpy
torch
torchvision
torchaudio
matplotlib
$ root@62643bd3bcd0:~/test# uv --version
uv 0.1.6
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:29:09 UTC
    </footer>
</body>
</html>
