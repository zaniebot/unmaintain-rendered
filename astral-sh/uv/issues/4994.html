<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv tool install` unable to install a tool that depends on intermediate dependencies with entrypoints - astral-sh/uv #4994</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`uv tool install` unable to install a tool that depends on intermediate dependencies with entrypoints</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/4994">#4994</a>
        opened by <a href="https://github.com/j178">@j178</a>
        on 2024-07-11 15:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/j178">@j178</a> on 2024-07-11 15:38</div>
            <div class="timeline-body"><p>For instance, <code>fastapi</code> doesn't have any entrypoints but it depends on <code>fastapi-cli</code>, which provides an entrypoint named <code>fastapi</code>.
<code>uv tool install fastapi</code> would result in a failure, displaying the error message <code>No executables found for fastapi</code>.</p>
<pre><code>$ uv tool install fastapi
warning: `uv tool run` is experimental and may change without warning.
Resolved 36 packages in 729ms
Installed 36 packages in 92ms
...
 + fastapi==0.111.0
 + fastapi-cli==0.0.4
...
error: No executables found for `fastapi`
</code></pre>
<p>But at the same time <code>uv tool run fastapi</code> works:</p>
<pre><code>$ uv tool run fastapi --version
warning: `uv tool run` is experimental and may change without warning.
Resolved 36 packages in 18ms
FastAPI CLI version: 0.0.4
</code></pre>
<h2>Environment</h2>
<pre><code>os: Windows 11 Pro 23H2 (Build 22631.3737)
uv version: 0.2.24
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-11 15:40</div>
            <div class="timeline-body"><p>Interesting. I don't think we should install executables from dependencies by default, but we should allow opt-in.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-07-11 15:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/j178">@j178</a> on 2024-07-11 15:56</div>
            <div class="timeline-body"><p><code>rye tools install</code> has a flag <code>--include-dep &lt;INCLUDE_DEP&gt;</code> to include scripts from a given dependency, maybe <code>uv</code> can allow something likes this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @zanieb by @zanieb on 2024-07-11 16:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-11 16:23</div>
            <div class="timeline-body"><p>I actually won't take this on right away, I've got to take care of some other things first if someone is interested. I think we need something like:</p>
<ul>
<li><code>--executable &lt;name&gt;</code>: Only install the given executable name</li>
<li><code>--include-package &lt;package name&gt;</code>: Include executables from the given dependency package</li>
</ul>
<p>I'm a little unsure of the name for the second one. Maybe:</p>
<ul>
<li><code>--include-dep</code></li>
<li><code>--include-executables</code></li>
<li><code>--executables-from</code></li>
</ul>
<p>For <code>--executable</code>, we need to decide if we'll scan dependencies if it's not found (we probably shouldn't for safety and performance but we <em>could</em>). If not, it's kind of separate from this issue.</p>
<p>We'll need to add included packages to the receipt, which is where most of the complexity is here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-11 22:48</div>
            <div class="timeline-body"><p>Why would this not be uv tool install fastapi-cli?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-12 00:51</div>
            <div class="timeline-body"><p>And if <code>fastapi-cli</code> doesn't depend on <code>fastapi</code>, couldn't you do: <code>uv tool install fastapi-cli --with fastapi</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-07-12 00:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-12 00:59</div>
            <div class="timeline-body"><p>Although it seems like <code>uvx fastapi --from fastapi-cli</code> just works?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/4997.html">astral-sh/uv#4997</a> on 2024-07-12 03:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-12 16:20</div>
            <div class="timeline-body"><p>Yeah <code>uvx --from fastapi-cli fastapi ...</code> does seem like the proper invocation here â€” but we would need to support including dependency entry points for parity with Rye and pipx.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-12 16:23</div>
            <div class="timeline-body"><p>Yeah it just seems like it's kind of... the wrong way around, to include a dependency entrypoint. And it complicates the CLI a lot.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5017.html">astral-sh/uv#5017</a> on 2024-07-12 16:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-12 16:32</div>
            <div class="timeline-body"><p>I agree it's a bit awkward. I think we should pursue #5017 and #5018 to help guide users to the correct path here and we can consider implementing this more complicated API based on additional feedback.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-21 23:31</div>
            <div class="timeline-body"><p>Ok, <code>uv tool run jupyter</code> is a counterexample here. Right now, we suggest <code>uv tool run --from jupyter-core jupyter</code>. And it's true that <code>jupyter-core</code> contains the Jupyer executable... but you <em>also</em> need <code>jupyer</code> installed in order to do, like, <code>jupyter notebook</code>. Otherwise, you get: <code>Jupyter command </code>jupyter-notebook<code> not found.</code></p>
<p>So the command in that case would really need to be... <code>uv tool run --from jupyter-core --with jupyter jupyter notebook</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6329.html">astral-sh/uv#6329</a> on 2024-08-21 14:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-21 21:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:20 UTC
    </footer>
</body>
</html>
