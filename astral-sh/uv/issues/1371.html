<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP 401 Unauthorized for private package index - astral-sh/uv #1371</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>HTTP 401 Unauthorized for private package index</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/1371">#1371</a>
        opened by <a href="https://github.com/exs-avianello">@exs-avianello</a>
        on 2024-02-15 22:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/exs-avianello">@exs-avianello</a> on 2024-02-15 22:14</div>
            <div class="timeline-body"><p>Hello! Very excited for this project ‚ù§Ô∏è</p>
<p>Installing a package from a private azure package index (Azure Artifacts) seems to be failing with a <code>HTTP status client error (405 Method Not Allowed)</code>:</p>
<pre><code>uv pip install --extra-index-url &quot;https://&lt;FEED_NAME&gt;:&lt;PERSONAL_ACCESS_TOKEN&gt;@pkgs.dev.azure.com/&lt;ORGANIZATION_NAME&gt;/_packaging/&lt;FEED_NAME&gt;/pypi/simple/&quot; package-name                                          
error: Failed to download: package-name==X.Y.Z
  Caused by: HTTP status client error (405 Method Not Allowed) for url (pkgs.dev.azure.com/&lt;ORGANIZATION_NAME&gt;/_packaging/.../pypi/download/package-name/X.Y.Z/package_name-X.Y.Z-py3-none-any.whl#[sha256=])
</code></pre>
<p>The equivalent pip-native command works as expected</p>
<pre><code>python -m pip install --extra-index-url &quot;https://&lt;FEED_NAME&gt;:&lt;PERSONAL_ACCESS_TOKEN&gt;@pkgs.dev.azure.com/&lt;ORGANIZATION_NAME&gt;/_packaging/&lt;FEED_NAME&gt;/pypi/simple/&quot; package-name
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-02-15 22:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-15 22:15</div>
            <div class="timeline-body"><p>Thank you! Will take a look.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">index</span> added by @zanieb on 2024-02-15 23:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yogevyuval">@yogevyuval</a> on 2024-02-18 14:54</div>
            <div class="timeline-body"><p>Same here - Really want to test (and replace pip with) uv but waiting for Azure artifacts support :( !</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-18 15:03</div>
            <div class="timeline-body"><p>Thanks and sorry about that -- we'll get this setup internally and see if we can reproduce.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-18 17:19</div>
            <div class="timeline-body"><p>Yep this is a priority for me next week!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MarcSkovMadsen">@MarcSkovMadsen</a> on 2024-02-19 11:09</div>
            <div class="timeline-body"><p>+1. Same issue for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-02-19 14:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-19 14:43</div>
            <div class="timeline-body"><p>I believe this is the same as https://github.com/astral-sh/uv/issues/1458 (lack of support for HEAD requests).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-19 20:49</div>
            <div class="timeline-body"><p>Okay, @olivierlefloch fixed HEAD requests, but there's now an auth problem. @zanieb, do you want to take from here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/exs-avianello">@exs-avianello</a> on 2024-02-21 13:38</div>
            <div class="timeline-body"><p>Thank you all!</p>
<p>I can confirm that on <code>uv 0.1.6</code> this is no longer giving <code>405 Method Not Allowed</code> but a <code>401 Unauthorized</code></p>
<pre><code>uv pip install --extra-index-url &quot;https://&lt;FEED_NAME&gt;:&lt;PERSONAL_ACCESS_TOKEN&gt;@pkgs.dev.azure.com/&lt;ORGANIZATION_NAME&gt;/_packaging/&lt;FEED_NAME&gt;/pypi/simple/&quot; package-name                                          
error: Failed to download: package-name==X.Y.Z
  Caused by: HTTP status client error (401 Unauthorized) for url (pkgs.dev.azure.com/&lt;ORGANIZATION_NAME&gt;/_packaging/.../pypi/download/package-name/X.Y.Z/package_name-X.Y.Z-py3-none-any.whl#[sha256=])
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gwdekker">@gwdekker</a> on 2024-02-22 09:07</div>
            <div class="timeline-body"><p>Same for gitlab hosted private package index: getting a 401 Unauthorized.  Interestingly, opening the URL in the error message in the browser downloads the package for me without a problem. the url looks like this:</p>
<p><code>https://gitlab.com/api/v4/groups/&lt;GROUP_NR&gt;/-/packages/pypi/files/&lt;SOME_LONG_HASH&gt;/&lt;PKG_NAME&gt;-py3-none-any.whl#sha256=&lt;PKG_SHA&gt; </code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @charliermarsh on 2024-02-22 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @charliermarsh by @charliermarsh on 2024-02-22 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-22 20:31</div>
            <div class="timeline-body"><p>Hi! We just merged a fix with #1874 that's out in v0.1.8 ‚Äî let me know if that helps. I'll continue testing against various private repositories.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/exs-avianello">@exs-avianello</a> on 2024-02-22 20:40</div>
            <div class="timeline-body"><p>Thank you @zanieb! At least for Azure Artifacts, I am still seeing the same error on <code>0.1.8</code> (<code>401 Unauthorized</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yogevyuval">@yogevyuval</a> on 2024-02-22 21:05</div>
            <div class="timeline-body"><p>Same here, <code>401 Unauthorized</code> for Azure Artifacts with uv <code>0.1.8</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "uv pip install HTTP status client error (405 Method Not Allowed) for private azure package index" to "HTTP 401 Unauthorized for private package index" by @zanieb on 2024-02-22 21:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-22 21:27</div>
            <div class="timeline-body"><p>For my own sanity, note this is also being tracked in https://github.com/astral-sh/uv/issues/1709</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-22 22:31</div>
            <div class="timeline-body"><p>A fix is up at https://github.com/astral-sh/uv/pull/1886 if anyone wants to give it a try against a private index.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/inigohidalgo">@inigohidalgo</a> on 2024-02-22 22:54</div>
            <div class="timeline-body"><p>Verified working on azure artifacts feed using token authentication!!</p>
<p>Incredible work @zanieb, @olivierlefloch and @charliermarsh üöÄ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-02-23 00:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/exs-avianello">@exs-avianello</a> on 2024-02-23 07:17</div>
            <div class="timeline-body"><p>I can confirm as well ‚ù§Ô∏è Thank you so much!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:42:55 UTC
    </footer>
</body>
</html>
