<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selecting .venv/bin/python as an active interpreter in VSCode doesn't enable IDE features - astral-sh/uv #9637</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Selecting .venv/bin/python as an active interpreter in VSCode doesn&#x27;t enable IDE features</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/9637">#9637</a>
        opened by <a href="https://github.com/oulianov">@oulianov</a>
        on 2024-12-04 13:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/oulianov">@oulianov</a></div>
            <div class="timeline-body"><p><strong>Maintainer edit: Please set <code>python.usePythonEnvironmentsExtension: true</code> and check if the problem persists.</strong> See <a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-3197523231 for more detail.</p>
<hr>
<p>Hello,</p>
<p>I develop my Python app with uv to handle dependencies. I want to benefit from intellisense, type hints, mypy and ruff in VSCode while I develop my app. VSCode is the most popular IDE for Python developers.</p>
<p>Usually, I create the a virtual env with <code>python -m venv</code>. I then select the virtual env in VSCode as an &quot;Active Interpreter&quot;. This adds support from all the VSCode features mentioned.</p>
<p>With uv, a folder .venv is created. However, when I select this .venv as an active interpreter in VSCode, <strong>nothing changes in my editor.</strong> Intellisense, type hints, and mypy don&#x27;t work. Installed modules are not found. Custom modules are not found either.</p>
<p>When I run &quot;Reload Window&quot;, this results in a toast on the bottom right &quot;Reactivating terminals&quot; that never completes.</p>
<p>Restarting VSCode with the config doesn&#x27;t make it work.</p>
<p>This means for now I need to have multiple virtual environment running. One for uv, another for development. This voids the usefulness of uv for package management.</p>
<p><strong>How to make uv virtual environments work with VSCode?</strong></p>
<hr>
<p><strong>[EDIT] HERE IS A WORKAROUND!</strong>  Here&#x27;s a foolproof technique my buddy @Jeerhz showed me to select a uv <code>.venv</code> as an active interpreter in vscode.</p>
<ol>
<li>First, copy the absolute path to the <code>.venv</code>. <strong>Not</strong> to the /bin/python, only the .venv folder.</li>
</ol>
<p><img alt="Image" src="https://github.com/user-attachments/assets/2492bd12-aed1-4cbc-8185-6aa33ad368a0"></p>
<ol>
<li>Do Cmd+Shift+P, then look for &quot;Python: Select interpreter&quot;. Press Enter. Select the option: &quot;Enter interpreter path&quot;.</li>
</ol>
<p><img alt="Image" src="https://github.com/user-attachments/assets/d9e57cc3-0b3f-4f52-bd55-1750900e4639"></p>
<ol>
<li>Now in this field you copy paste the absolute path to the .venv folder.</li>
</ol>
<p><img alt="Image" src="https://github.com/user-attachments/assets/249a183f-df01-4db9-bd62-1343895d80d0"></p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/8071a06f-d38b-426b-ac9d-1da8c8c36128"></p>
<p>Press enter and now you have the right Python environment with all the dependencies.</p>
<p>Selecting .venv as an active interpreter in VSCode works. But selecting .venv/bin/python doesn&#x27;t.</p>
<hr>
<p><strong>Recommendation:</strong> use an extension like <a href="https://marketplace.visualstudio.com/items?itemName=teticio.python-envy">teticio.python-envy</a> to automatically set the interpreter path based on the file you&#x27;re currently looking at, compare <a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-2813097995 . This is what I currently use and it has been working quite well in my monorepo setup.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Selecting .venv/bin/python as an active interpreter in VSCode doesn&#x27;t enable features&quot; to &quot;Selecting .venv/bin/python as an active interpreter in VSCode doesn&#x27;t enable IDE features&quot; by <a href="https://github.com/oulianov">@oulianov</a> on 2024-12-04 13:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-04 17:02</div>
            <div class="timeline-body"><p>I don&#x27;t know what to say here, this is pretty basic functionality and I cannot reproduce it</p>
<pre><code>‚ùØ uv init example
Initialized project `example` at `/Users/zb/workspace/uv/example`
‚ùØ code example
‚ùØ cd example
‚ùØ uv add httpx
Using CPython 3.12.7
Creating virtual environment at: .venv
Resolved 8 packages in 113ms
Installed 7 packages in 13ms
 + anyio==4.6.2.post1
 + certifi==2024.8.30
 + h11==0.14.0
 + httpcore==1.0.7
 + httpx==0.28.0
 + idna==3.10
 + sniffio==1.3.1
</code></pre>
<p><img src="https://github.com/user-attachments/assets/747b092b-8bc6-4776-954b-fcbbda0e96ed" alt="Image"></p>
<p>Can you share more details?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-04 17:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oulianov">@oulianov</a> on 2024-12-04 23:27</div>
            <div class="timeline-body"><p>Hello, Zanieb!</p>
<p>OK, this is a relief to know this is supposed to work. Here are more details:</p>
<p>Following the same steps as you, this is what I get after running <code>uv add httpx</code> in VSCode : &quot;Can&#x27;t resolve httpx import&quot;.
This is ok : I need to activate the python environment.
<img src="https://github.com/user-attachments/assets/23443f44-2c84-4972-8c65-ca7b8462c8ec" alt="Image"></p>
<p>I do Command+Shift+P. This lists the interpreters, but the local .venv doesn&#x27;t show up. This is alright, I can still enter the path to it manually.
<img src="https://github.com/user-attachments/assets/5da66123-877a-419e-926a-223cd966bea1" alt="Image"></p>
<p>Then, I manually select the path to the .venv created by uv: <code>.venv/bin/python</code> by clicking on &quot;Enter Interpreter path&quot;.
This doesn&#x27;t enable intellisense.<br>
I can select any other environment (either conda, either created with python -m venv) normally.
A message saying &quot;Reactivating terminals&quot; in the bottom left runs infinitely. Reloading the window doesn&#x27;t stop this. I would need to quit and restart vscode.
<img src="https://github.com/user-attachments/assets/225d868a-6b2b-4fe4-83be-a3da959fb529" alt="Image"></p>
<p>If I try to do <code>uv run hello.py</code> in the VSCode terminal, the process hangs and never completes. If I Ctrl+C to stop the execution and instead do <code>python hello.py</code>, the program runs normally.</p>
<p>Running <code>uv run hello.py</code> in a new terminal results in this:</p>
<pre><code>error: Querying Python at `/Users/nicolasoulianov/test/example/.venv/bin/python3` failed with exit status signal: 9 (SIGKILL)
--- stdout:

--- stderr:

---
</code></pre>
<p>This error occurs whether VSCode is open or not.
<img src="https://github.com/user-attachments/assets/7d56ef8e-9304-4f10-909d-571932d8adb7" alt="Image"></p>
<p>When I go again to select an interpreter, VSCode tells me that I&#x27;m using <code>~/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python</code>.
<img src="https://github.com/user-attachments/assets/8b5422ab-cb1a-4931-a08e-227e8ad0049b" alt="Image"></p>
<ul>
<li>I have conda <code>23.7.4</code> installed. I&#x27;m using MacOS Sonoma 14.6.1 on a MacBook M3 Pro.</li>
<li>A colleague has the same problem (he use a similar machine to mine).</li>
</ul>
<p>What else can I share with you to help you further?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oulianov">@oulianov</a> on 2024-12-04 23:41</div>
            <div class="timeline-body"><p>I think I figured this out: the uv .venv can&#x27;t be selected in VSCode when the .venv is not at the root of the VSCode workspace.</p>
<p>For example, this doesn&#x27;t work: .venv is in example/.venv
<img src="https://github.com/user-attachments/assets/17c9adfa-fe8d-4dc9-bae4-23568a9d0292" alt="Image"></p>
<p>However, this works: .venv is at the root of the VSCode workspace.
<img src="https://github.com/user-attachments/assets/a54397a7-2196-4340-be88-1a20473dd9ca" alt="Image"></p>
<p>This is pretty weird. I&#x27;m working with a lot of monorepo so I&#x27;m used to have multiple Python projects with different configs in the same VSCode window.</p>
<p>Do you know of a way to circumvent this behavior ? So that I can still have intellisense, even if the uv <code>.venv</code> is not at the root of the VSCode workspace ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-05 01:11</div>
            <div class="timeline-body"><p>That&#x27;s.. very weird. I&#x27;m not sure what would cause that.</p>
<p>Perhaps we should narrow down <code>uv run python</code> failing? Can you produce that consistently?</p>
<p>Can you invoke Python directly? e.g.</p>
<pre><code>‚ùØ uv python find --python-preference only-managed --system
/Users/zb/.local/share/uv/python/cpython-3.12.7-macos-aarch64-none/bin/python3.12
‚ùØ /Users/zb/.local/share/uv/python/cpython-3.12.7-macos-aarch64-none/bin/python3.12 --version
Python 3.12.7
</code></pre>
<p>Can you create a virtual environment with it and use it?</p>
<pre><code>‚ùØ /Users/zb/.local/share/uv/python/cpython-3.12.7-macos-aarch64-none/bin/python3.12 -m venv ./venv
‚ùØ ./venv/bin/python --version
Python 3.12.7
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oulianov">@oulianov</a> on 2024-12-05 10:22</div>
            <div class="timeline-body"><p>Unfortunately, I can&#x27;t reproduce the issue with just <code>uv run python</code></p>
<p>I can invoke Python directly. I can create venv with it and use it.</p>
<pre><code>nicolasoulianov@MacBook-Pro-de-Nicolas-2 teleop % uv python find --python-preference only-managed --system
/Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10
nicolasoulianov@MacBook-Pro-de-Nicolas-2 teleop % /Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 --version
Python 3.10.15
nicolasoulianov@MacBook-Pro-de-Nicolas-2 teleop % /Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 -m venv ./venv2
nicolasoulianov@MacBook-Pro-de-Nicolas-2 teleop % ./venv2/bin/python --version
Python 3.10.15
</code></pre>
<p>Here is another piece of information. When I select the interpreter in .venv/bin/python, I see that I select a shortcut towards the true interpreter (localized at <code>/Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10</code>). Maybe this information is not enough for VSCode to make sense of the dependencies?
<img src="https://github.com/user-attachments/assets/ff2df880-d1a1-4ba8-8e5f-b225c049c9d4" alt="Image"></p>
<p>Do you work with uv-managed .venv in subfolders in VSCode ? Or you know someone that does ?
How does Intellisense work for you and them ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oulianov">@oulianov</a> on 2024-12-05 10:28</div>
            <div class="timeline-body"><p>I opened a new VSCode window and tried again activating the .venv environment. Now, when I run</p>
<pre><code>/Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 --version
</code></pre>
<p>The program hangs. I can&#x27;t even Ctrl+C to stop it.</p>
<p><img src="https://github.com/user-attachments/assets/2493728b-5507-4242-b7ce-98bdfb76a00e" alt="Image"></p>
<p>I have the infinite &quot;Reactivating terminals&quot; loading bar
<img src="https://github.com/user-attachments/assets/159bf625-41fa-4dc1-8533-4258661421ca" alt="Image"></p>
<p>I need to restart my computer to be able to use everything normally again.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-05 15:13</div>
            <div class="timeline-body"><p>Does everything work if you do <code>uv venv --python-preference only-system</code> to skip using our managed interpreters?</p>
<p>Do you have an antivirus or similar?</p>
<p>Can you look at the VSCode Python debug logs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oulianov">@oulianov</a> on 2024-12-05 16:10</div>
            <div class="timeline-body"><p>I enabled VSCode Python debug logs.</p>
<p>I don&#x27;t have an antivirus. However, I&#x27;m running Vanta Agent and 1Password.</p>
Using managed venv
<p>If I select the managed uv .venv/bin/python as an active interpreter, I have a null error code.</p>
<pre><code>2024-12-05 16:37:48.507 [info] &gt; ~/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 -I ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py
2024-12-05 16:37:48.511 [error] Error: Command failed: /Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 -I /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py

    at genericNodeError (node:internal/errors:984:15)
    at wrappedFn (node:internal/errors:538:14)
    at ChildProcess.exithandler (node:child_process:423:12)
    at ChildProcess.emit (node:events:531:35)
    at maybeClose (node:internal/child_process:1105:16)
    at Socket.&lt;anonymous&gt; (node:internal/child_process:457:11)
    at Socket.emit (node:events:519:28)
    at Pipe.&lt;anonymous&gt; (node:net:339:12) {
  code: null,
  killed: false,
  signal: &#x27;SIGKILL&#x27;,
  cmd: &#x27;/Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 -I /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py&#x27;
}
2024-12-05 16:37:50.513 [info] &gt; ~/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10 -I ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py
</code></pre>
<p>I have then the &quot;Reactivating terminals error&quot;</p>
<p>Running</p>
<pre><code>/Users/nicolasoulianov/.local/share/uv/python/cpython-3.10.15-macos-aarch64-none/bin/python3.10
</code></pre>
<p>In a terminal hangs the process. It doesn&#x27;t show the Python console.</p>
Creating a new venv
<p>I create a .venv with <code>uv venv --python-preference only-system</code> to skip the managed interpreters.</p>
<p>I try to select it but nothing happens, not even an error message. I delete the conda environment I had which was named <code>teleop</code>, the same name as the folder containing the .venv.</p>
<p>I try again to select the .venv. Now, I have an error when selecting it. The error code is 126. I see &quot;Permission denied&quot;. I also have a visible error toaster in VSCode. This is the first time it has been the case.</p>
<p><img src="https://github.com/user-attachments/assets/fdb7c8e1-26c2-471d-8965-535ab0810291" alt="Image"></p>
<pre><code>2024-12-05 16:50:38.156 [error] Error: Command failed: /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python -I /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py
/bin/sh: /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python: Permission denied

    at genericNodeError (node:internal/errors:984:15)
    at wrappedFn (node:internal/errors:538:14)
    at ChildProcess.exithandler (node:child_process:423:12)
    at ChildProcess.emit (node:events:531:35)
    at maybeClose (node:internal/child_process:1105:16)
    at Socket.&lt;anonymous&gt; (node:internal/child_process:457:11)
    at Socket.emit (node:events:519:28)
    at Pipe.&lt;anonymous&gt; (node:net:339:12) {
  code: 126,
  killed: false,
  signal: null,
  cmd: &#x27;/Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python -I /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py&#x27;
</code></pre>
<p>I try to run the Python interpreter in my console, and I get permission denied as well.</p>
<pre><code>(teleop) (base) nicolasoulianov@MacBook-Pro-de-Nicolas-2 teleop % /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python
zsh: permission denied: /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python
</code></pre>
<p>I then change the authorizations of the .venv folder</p>
<pre><code>sudo chmod -R 777 .venv
</code></pre>
<p>I run this command. It doesn&#x27;t show anything in the command line.</p>
<pre><code> /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python
</code></pre>
<p>I have this error in the VSCode Python extension logs : failed to parse json</p>
<pre><code>2024-12-05 16:59:22.698 [info] &gt; ./teleop/.venv/bin/python -I ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py ~/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py
2024-12-05 16:59:22.701 [error] Failed to parse interpreter information for &gt;&gt; /Users/nicolasoulianov/robots/robots/teleop/.venv/bin/python -I /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/get_output_via_markers.py /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py &lt;&lt; with Error: python /Users/nicolasoulianov/.vscode/extensions/ms-python.python-2024.20.0-darwin-arm64/python_files/interpreterInfo.py returned bad JSON () (SyntaxError: Unexpected end of JSON input)
</code></pre>
<p>Could this be an authorization issue with uv, my home folder, MacOS &quot;security features&quot;, or something else ?ü§î</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-05 23:18</div>
            <div class="timeline-body"><p>Have you tried updating VSCode to the latest version?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oulianov">@oulianov</a> on 2024-12-06 10:59</div>
            <div class="timeline-body"><p>I am on the VSCode latest version available</p>
<p><img src="https://github.com/user-attachments/assets/c9ac2fc8-2e0c-468e-9467-b9c2eb62172f" alt="Image"></p>
<pre><code>Version: 1.95.3 (Universal)
Commit: f1a4fb101478ce6ec82fe9627c43efbf9e98c813
Date: 2024-11-13T14:50:04.152Z (3 wks ago)
Electron: 32.2.1
ElectronBuildId: 10427718
Chromium: 128.0.6613.186
Node.js: 20.18.0
V8: 12.8.374.38-electron.0
OS: Darwin arm64 23.6.0
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-06 14:54</div>
            <div class="timeline-body"><p>I&#x27;m sorry I&#x27;m out of suggestions here if you&#x27;ve updated VS Code and restarted it. We can&#x27;t reproduce this problem.</p>
<p>For reference, I&#x27;m using the exact same build</p>
<pre><code>Version: 1.95.3
Commit: f1a4fb101478ce6ec82fe9627c43efbf9e98c813
Date: 2024-11-13T14:50:04.152Z (3 wks ago)
Electron: 32.2.1
ElectronBuildId: 10427718
Chromium: 128.0.6613.186
Node.js: 20.18.0
V8: 12.8.374.38-electron.0
OS: Darwin arm64 23.5.0
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oulianov">@oulianov</a> on 2024-12-10 08:59</div>
            <div class="timeline-body"><p>Hmm... This is all very strange.</p>
<p>I assume there must something cursed about my setup :</p>
<ul>
<li>multiple .venv in a single VSCode workspace</li>
<li>nested python projects</li>
</ul>
<p>I&#x27;ll simplify my setup and keep you posted.</p>
<p>In the meanwhile, using an additional .venv for development and uv for deployment works good enough.</p>
<p>Thank you for the support!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NellyWhads">@NellyWhads</a> on 2024-12-18 18:41</div>
            <div class="timeline-body"><p>I&#x27;d just like to confirm that I&#x27;m using the following setup with success:</p>
<ul>
<li>Python monorepo</li>
<li>Single uv workspace with multiple projects</li>
<li>using <code>direnv</code> to set <a href="https://docs.astral.sh/uv/configuration/environment/?query=preview#uv_project_environment"><code>UV_PROJECT_ENVIRONMENT</code></a> within each project directory such that <code>uv</code> creates a separate <code>.venv</code> in the project root instead of the workspace root</li>
<li>VSCode opened to the workspace directory -&gt; manually selecting the appropriate <code>.venv</code> -&gt; <code>Reload Window</code></li>
<li>Testing integration also works so long as I point VSCode to the specific <code>pyproject.toml</code> which houses the <code>pytest</code> config for the specific project.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cam-at-tactiq">@cam-at-tactiq</a> on 2025-01-05 22:43</div>
            <div class="timeline-body"><p>I have the same issues as @oulianov, I have a large monorepo and each python project is independent, we don&#x27;t use the workspaces feature yet.</p>
<p>When selecting the interpreter VS Code follows the symlinks back to <code>~/.local/share/uv/python/...</code> without access to any of the libraries I have installed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-05 22:51</div>
            <div class="timeline-body"><p>Can someone please share a <em>minimal</em> project this reproduces on and a script to setup the environments?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chanderson0">@chanderson0</a> on 2025-01-28 18:00</div>
            <div class="timeline-body"><p>I can reproduce this locally in my development monorepo. Here&#x27;s a minimal repro. If there&#x27;s any other information I can provide, let me know.</p>
<ul>
<li>uv version: 0.5.24</li>
<li>VSCode version: 1.96.4</li>
<li>mspython-python extension version: 2024.22.2</li>
<li>ms-python.vscode-pylance extension version: 2025.1.101</li>
</ul>
<p>Instructions:</p>
<ol>
<li>Run <code>./setup.sh</code></li>
<li>Open VSCode</li>
<li>In VSCode, open <code>projects/project1/hello.py</code></li>
<li>Run <code>Python &gt; Select Interpreter</code></li>
<li>Enter Interpreter Path...</li>
<li>Find...</li>
<li>Select <code>path/to/projects/project1/.venv/bin/python</code></li>
<li>Note that Pylance reports <code>Import &quot;urllib3&quot; could not be resolved</code></li>
<li>Reload Window</li>
<li>Note that Pylance still reports <code>Import &quot;urllib3&quot; could not be resolved</code></li>
<li>Rinse and repeat with <code>project2/hello.py</code></li>
</ol>
<p><code>setup.sh</code>:</p>
<pre><code>root=$(realpath &quot;$(dirname &quot;$0&quot;)&quot;)

cd $root
mkdir -p projects/project1
cd projects/project1
uv python find --python-preference only-managed --system
uv init --no-workspace --python-preference only-managed
uv add urllib3
uv sync
cat &lt;&lt;EOF &gt; hello.py
import urllib3
print(&quot;p1&quot;, urllib3.__file__)
EOF
uv run hello.py
echo &quot;&quot;

cd $root
mkdir -p projects/project2
cd projects/project2
uv python find --python-preference only-system --system
uv init --no-workspace --python-preference only-system
uv add python-dateutil
uv sync
cat &lt;&lt;EOF &gt; hello.py
import dateutil
print(&quot;p2&quot;, dateutil.__file__)
EOF
uv run hello.py
echo &quot;&quot;
</code></pre>
<p>Terminal output:</p>
<pre><code>/Users/chris/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none/bin/python3.10
Initialized project `project1`
Using CPython 3.10.14
Creating virtual environment at: .venv
Resolved 2 packages in 59ms
Installed 1 package in 3ms
 + urllib3==2.3.0
Resolved 2 packages in 0.20ms
Audited 1 package in 0.01ms
p1 /Users/chris/code/uv-monorepo-vscode/projects/project1/.venv/lib/python3.10/site-packages/urllib3/__init__.py

/Users/chris/.local/share/mise/installs/python/3.10.15/bin/python
Initialized project `project2`
Using CPython 3.10.14
Creating virtual environment at: .venv
Resolved 3 packages in 44ms
Installed 2 packages in 2ms
 + python-dateutil==2.9.0.post0
 + six==1.17.0
Resolved 3 packages in 0.22ms
Audited 2 packages in 0.00ms
p2 /Users/chris/code/uv-monorepo-vscode/projects/project2/.venv/lib/python3.10/site-packages/dateutil/__init__.py
</code></pre>
<p>Also, I intermittently get this error in the <code>Python</code> logs in VSCode if I reload the window a few times:</p>
<pre><code>2025-01-28 13:02:22.140 [info] Native locator: Refresh started
2025-01-28 13:02:22.140 [info] Native locator: Refresh started
2025-01-28 13:02:22.362 [info] &gt; pyenv which python
2025-01-28 13:02:22.362 [info] cwd: .
2025-01-28 13:02:22.482 [info] &gt; conda info --json
2025-01-28 13:02:22.493 [info] Poetry environment manager found at: /Users/chris/.local/pipx/venvs/poetry/bin/poetry
2025-01-28 13:02:22.501 [info] Conda environment manager found at: /opt/homebrew/Caskroom/miniconda/base/bin/conda
2025-01-28 13:02:22.504 [info] Python interpreter path: ~/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none/bin/python
2025-01-28 13:02:23.364 [info] Starting Pylance language server.
2025-01-28 13:02:23.500 [info] Native locator: Refresh finished in 1578 ms
2025-01-28 13:02:28.119 [error] Active interpreter type is detected as Unknown {&quot;id&quot;:&quot;/Users/chris/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none/bin/python&quot;,&quot;sysPrefix&quot;:&quot;/Users/chris/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none&quot;,&quot;envType&quot;:&quot;Unknown&quot;,&quot;envName&quot;:&quot;&quot;,&quot;envPath&quot;:&quot;/Users/chris/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none/bin/python&quot;,&quot;path&quot;:&quot;/Users/chris/.local/share/uv/python/cpython-3.10.14-macos-aarch64-none/bin/python&quot;,&quot;architecture&quot;:3,&quot;sysVersion&quot;:&quot;&quot;,&quot;version&quot;:{&quot;raw&quot;:&quot;3.10.14&quot;,&quot;major&quot;:3,&quot;minor&quot;:10,&quot;patch&quot;:14,&quot;build&quot;:[],&quot;prerelease&quot;:[]},&quot;displayName&quot;:&quot;Python 3.10.14&quot;,&quot;detailedDisplayName&quot;:&quot;Python 3.10.14&quot;}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-28 19:33</div>
            <div class="timeline-body"><p>@chanderson0 thanks for all the details. Unfortunately, I followed your instructions and could not reproduce the problem.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chanderson0">@chanderson0</a> on 2025-01-28 20:29</div>
            <div class="timeline-body"><p>Thanks for the quick reply!</p>
<p>After playing with a lot more, I think part of the issue is that there&#x27;s a difference in (a) using the GUI to select a Python interpreter path (which appears to resolve symlinks and therefore breaks any link to the actual local venv) and entering either (b) an absolute path or (c) a path relative to the workspace root (which appears to not resolve symlinks, and does work as intended).</p>
<p>So maybe the resolution is to always enter an actual path and not the filesystem picker as in (b) and (c). It&#x27;s working for me, anyway! If I get a chance, I&#x27;ll open an issue with Pylance, since that&#x27;s a confusing behavior.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-28 20:35</div>
            <div class="timeline-body"><p>I was using Ctrl-P to invoke Python &gt; Select Interpreter then entering an absolute interpreter path.</p>
<p>I honestly don&#x27;t know how to get a filesystem picker to show up :D</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oulianov">@oulianov</a> on 2025-01-31 03:06</div>
            <div class="timeline-body"><p>Coming back to this issue. Here&#x27;s a foolproof technique my buddy @Jeerhz showed me to select a uv <code>.venv</code> as an active interpreter in vscode.</p>
<ol>
<li>First, copy the absolute path to the <code>.venv</code>. <strong>Not</strong> to the /bin/python, only the .venv folder.</li>
</ol>
<p><img alt="Image" src="https://github.com/user-attachments/assets/2492bd12-aed1-4cbc-8185-6aa33ad368a0"></p>
<ol>
<li>Do Cmd+Shift+P, then look for &quot;Python: Select interpreter&quot;. Press Enter. Select the option: &quot;Enter interpreter path&quot;.</li>
</ol>
<p><img alt="Image" src="https://github.com/user-attachments/assets/d9e57cc3-0b3f-4f52-bd55-1750900e4639"></p>
<ol>
<li>Now in this field you copy paste the absolute path to the .venv folder.</li>
</ol>
<p><img alt="Image" src="https://github.com/user-attachments/assets/249a183f-df01-4db9-bd62-1343895d80d0"></p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/8071a06f-d38b-426b-ac9d-1da8c8c36128"></p>
<p>Press enter and now you have the right Python environment with all the dependencies.</p>
<p>Selecting .venv as an active interpreter in VSCode works. But selecting .venv/bin/python doesn&#x27;t.</p>
<p><strong>It would be nice if we didn&#x27;t have to do all these shenanigans.</strong> In a monorepo, I switch from python project and dependencies all the time. The current procedure is pretty painful, not documented, and not trivial.</p>
<p>It would be great to have all the <code>.venv</code> show up in the interpreter list. Even better, the active interpreter could switch automatically depending on the opened file.</p>
<p>@zanieb are there any plans to improve the uv experience in vscode?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-31 18:28</div>
            <div class="timeline-body"><p>I cannot reproduce this problem (e.g., by entering the full path to the Python interpreter). Hence, I cannot figure out how to improve the experience.</p>
<p>We need more information to understand what&#x27;s going on.</p>
<p>Does this only occur with <code>uv venv</code>? Does this not occur with <code>python -m venv</code>?</p>
<p>Does this only occur with uv-managed Python versions? Does this not occur with <code>uv venv --python-preference only-system</code> vs <code>uv venv --python-preference only-managed</code>?</p>
<p>Frankly, these sounds like VS Code bugs that we won&#x27;t really be able to fix but I&#x27;m happy to try regardless.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-31 18:30</div>
            <div class="timeline-body"><p>To be clear, I agree that something must be wrong because we keep hearing reports. I just can&#x27;t tell what exactly is wrong since each time I try to reproduce, it works fine for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chanderson0">@chanderson0</a> on 2025-01-31 19:05</div>
            <div class="timeline-body"><p>I&#x27;m pretty sure that the issue originally highlighted in this thread (and the one I was facing) derives from the VSCode behavior that resolves symlinks when you open the file picker during interpreter selection. That&#x27;s probably on the VSCode side to fix.</p>
<p>But there may be something additionally happening where uv venvs aren&#x27;t being picked up automatically, and so someone would need to either (a) add uv support into https://github.com/microsoft/python-environment-tools and https://github.com/microsoft/vscode-python (see e.g. <a href="https://github.com/microsoft/vscode-python/pull/24442">microsoft/vscode-python#24442</a> and <a href="https://github.com/microsoft/python-environment-tools/pull/172">microsoft/python-environment-tools#172</a> for Pixi doing this recently) or (b) figure out why the existing virtualenv locator isn&#x27;t working against these environments.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-31 20:10</div>
            <div class="timeline-body"><blockquote>
<p>I&#x27;m pretty sure that the issue originally highlighted in this thread (and the one I was facing) derives from the VSCode behavior that resolves symlinks when you open the file picker during interpreter selection. That&#x27;s probably on the VSCode side to fix.</p>
</blockquote>
<p>I&#x27;m surprised this hasn&#x27;t come up before as symbolically linked interpreters in virtual environments are very common on Unix.</p>
<p>We use standards-compliant virtual environments and these <em>should</em> be found by their normal locator since it includes our default name of <code>.venv</code>? https://github.com/microsoft/python-environment-tools/blob/1abe5cec5ebfbe97ca71746a4cfc7fe89bddf8e0/crates/pet/src/find.rs#L262</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NellyWhads">@NellyWhads</a> on 2025-02-04 02:18</div>
            <div class="timeline-body"><p>To throw another loop in this - our setup is extremely similar and we are able to use the regular VSCode Interpreter selector. We&#x27;re running the latest VSCode and I&#x27;ve tried it on the latest Cursor. Works stably on MacOS, and on remote development hosts both inside and outside devcontainers with no issues.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cloudycotton">@cloudycotton</a> on 2025-02-05 15:24</div>
            <div class="timeline-body"><p>I encountered this issue just now with my tauri setup. Vscode doesn&#x27;t recognise the path in .venv created by default.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jdumas">@jdumas</a> on 2025-02-07 01:25</div>
            <div class="timeline-body"><p>Hi. I&#x27;m also running into this. I have a <code>.venv</code> in a <code>scripts/</code> subfolder of my vscode project:</p>
<pre><code>scripts/.venv/bin/python@ -&gt; /opt/homebrew/Caskroom/miniconda/base/bin/python3
</code></pre>
<p>Now if I add the interpreter via the vscode UI, it seems to be adding the target path and think I&#x27;m in the base conda environment. But if manually specify <code>&lt;my_repo&gt;/scripts/.venv/bin/python</code> in in the vscode popup to find the interpreter (i.e. without going through macOS Finder), then it establishes the correct venv.</p>
<p>Seems to be more an issue with vscode than <code>uv</code> I would say.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cloudycotton">@cloudycotton</a> on 2025-02-07 02:56</div>
            <div class="timeline-body"><p>I‚Äôve noticed another issue: when I install dependencies and package a script with uvx pyinstaller main.py, the dependencies aren‚Äôt bundled as expected. This might be related.</p>
<p>I&#x27;m on latest Mac OS build.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jzazo">@jzazo</a> on 2025-02-12 15:18</div>
            <div class="timeline-body"><p>Sorry, I haven&#x27;t read the full thread, but I will add something in case it helps. I don&#x27;t experience this issue with VSCode, but whenever my VSCode was misconfigured was because it was not using the workspace properly:
https://code.visualstudio.com/docs/editor/workspaces/workspaces</p>
<p>If you have a single-folder workspace you open your workspace with Open Folder, if you have a monorepo, you select open workspace from file, and you need proper settings.</p>
<p>I have a single-folder repo and everything shows nicely for me using uv. If you haven&#x27;t selected a workspace properly, selecting an interpreter may have issues, because VSCode may have trouble using a .venv to source files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geozeke">@geozeke</a> on 2025-02-19 19:28</div>
            <div class="timeline-body"><p>Just adding my issue to this thread. It seemed like virtual environments were working fine in vscode for a long time, now I experience the same issue with them not activating when opening the terminal. I tried the tips about typing-out the <code>.venv</code> path as described above, without luck. I&#x27;m managing my environments with <code>uv</code>, in separate project folders within a monorepo workspace.</p>
<p>Maybe this is a new bit of information:</p>
<p>I&#x27;m using macOS, with <code>zsh</code>, OhMyZsh, and the <code>powerlevel10k</code> theme (all this worked fine, until just recently). Not sure if others with this issue have the same setup.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geozeke">@geozeke</a> on 2025-02-19 19:50</div>
            <div class="timeline-body"><p>It&#x27;s a little &quot;hacky&quot;, but I added this to my <code>.zshrc</code> file, and it seems rock-solid whenever you open a new terminal in a vscode project folder, within a monorepo workspace. It assumes that (1) you&#x27;re running a terminal in vscode, and (2) your virtual environment is located in <code>./.venv</code> (the uv default). Maybe a good bandaid until this gets resolved.</p>
<pre><code># Activate the python virtual environment if it&#x27;s present *and* you&#x27;re running
# the terminal in vscode.
if [ &quot;$TERM_PROGRAM&quot; = &quot;vscode&quot; ]; then
    if [ -d &quot;./.venv&quot; ]; then
        source ./.venv/bin/activate
    fi
fi
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stur86">@stur86</a> on 2025-02-22 16:54</div>
            <div class="timeline-body"><p>Adding to the experience. Same for me. Virtualenvs created by UV worked fine for me until not long ago. Today I tried one and I got hit with these problems; Pylance doesn&#x27;t recognise the installed libraries. I made sure to select the correct binary for the virtual environment, this was at the root of the project, there was only one virtual environment, etc. etc. Fails with both Python 3.12 and 3.11. I also tried doing the same thing with Poetry, and with that one it works.</p>
<p>Closest thing that this reminds me of is when some time ago the change to allow for a different format to link editable installs. That did mess up my language server&#x27;s detection back then. Is it possible something similar has happened here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-24 15:39</div>
            <div class="timeline-body"><p>@stur86 that&#x27;d be if you&#x27;re using <code>setuptools</code> e.g. <a href="https://github.com/astral-sh/uv/issues/10946">astral-sh/uv#10946</a> or <a href="https://github.com/astral-sh/uv/issues/1708">astral-sh/uv#1708</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stur86">@stur86</a> on 2025-02-24 19:02</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/stur86">@stur86</a> that&#x27;d be if you&#x27;re using <code>setuptools</code> e.g. <a href="https://github.com/astral-sh/uv/issues/10946">#10946</a> or <a href="https://github.com/astral-sh/uv/issues/1708">#1708</a></p>
</blockquote>
<p>Actually my build backend is hatchling right now. I also tried</p>
<pre><code>[tool.uv]
config-settings = { editable_mode = &quot;compat&quot; }
</code></pre>
<p>as mentioned in another issue and it does not seem to work, in fact it breaks <code>uv sync</code>. Haven&#x27;t dived deep into why that is yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SimonBirrell">@SimonBirrell</a> on 2025-02-26 17:55</div>
            <div class="timeline-body"><p>Same for me. Multiple folders within the repo, each with their own pyproject.toml and .venv.</p>
<p>The code works when run, but VS Code doesn&#x27;t find the .venvs and uses the system Python (as displayed on the bottom line). &quot;Select Python interpreter&quot; doesn&#x27;t list the .venvs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stur86">@stur86</a> on 2025-03-01 18:09</div>
            <div class="timeline-body"><blockquote>
<p>Same for me. Multiple folders within the repo, each with their own pyproject.toml and .venv.</p>
<p>The code works when run, but VS Code doesn&#x27;t find the .venvs and uses the system Python (as displayed on the bottom line). &quot;Select Python interpreter&quot; doesn&#x27;t list the .venvs.</p>
</blockquote>
<p>My case is worse than this; I do manage to select the virtual environment&#x27;s Python. It just does nothing to fix this. The virtual environment does have the packages installed, it&#x27;s just that Pylance specifically doesn&#x27;t seem to notice.</p>
<p>EDIT: just noticed that the same thing happens with Poetry. It&#x27;s not UV&#x27;s fault, it&#x27;s something else that changed either in <code>setuptools</code> as mentioned above or in <code>pip</code> or in Pylance.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jzazo">@jzazo</a> on 2025-03-01 22:08</div>
            <div class="timeline-body"><p>As I mentioned before, have you correctly set up a single or multi-root workspace?
https://code.visualstudio.com/docs/editor/workspaces/workspaces</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stur86">@stur86</a> on 2025-03-02 00:21</div>
            <div class="timeline-body"><blockquote>
<p>As I mentioned before, have you correctly set up a single or multi-root workspace? https://code.visualstudio.com/docs/editor/workspaces/workspaces</p>
</blockquote>
<p>The doc mentions you don&#x27;t need to do anything other than opening a folder with VSCode, so yes I guess. But in the end it did resolve when I created a <code>.vscode</code> folder and a settings file inside it, even if essentially empty.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tomaszbk">@tomaszbk</a> on 2025-03-08 19:45</div>
            <div class="timeline-body"><p>I also had my venv in a custom path other than the project&#x27;s root path, and solved this by running:
<code>ln -s &lt;custom_venv_location&gt; .venv</code>
it creates a link to cheat vs code into thinking the venv is there</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gravityrail">@gravityrail</a> on 2025-03-10 15:58</div>
            <div class="timeline-body"><p>Assuming .venv in the project root, this worked for me (when switching from poetry to uv)</p>
<pre><code>rm -rf .venv
uv sync
</code></pre>
<p>Then in Cursor:</p>
<ul>
<li>CMD-SHIFT-P</li>
<li>Clear workspace interpreter setting</li>
<li>Click the python env in the bottom right</li>
<li>Click &quot;+ Create virtual environment&quot;</li>
<li>Click &quot;Venv&quot;</li>
<li>Click to reuse the existing .venv</li>
</ul>
<p>Then all my dependencies resolved.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/0LEL0">@0LEL0</a> on 2025-03-23 12:42</div>
            <div class="timeline-body"><p>I found that when I use this plugin &quot;Python Environment Manager (deprecated)&quot; it works well, but when I use &quot;Microsoft Python Environments Extension&quot; it can&#x27;t find .venv/bin/python.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hoangquochung1110">@hoangquochung1110</a> on 2025-03-24 08:22</div>
            <div class="timeline-body"><p>Hi guys, do we have a working solution to this issue ?
Basic features of the IDE are not enabled for some reason if I initial venv using <code>uv venv</code> command</p>
<p><img src="https://github.com/user-attachments/assets/1db1e139-2f19-47ee-b47f-8e4b587d65da" alt="Image"></p>
<p>Many thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rcgreen99">@rcgreen99</a> on 2025-03-27 02:17</div>
            <div class="timeline-body"><p>If your pyproject.toml is not in the root of your workspace, you may have to select the interpreter.</p>
<ol>
<li><p>First, <strong>find the path of your interpreter</strong> by going to the directory where you pyprojectl.toml is and <code>cd</code>-ing into <code>.venv/bin/</code>. If you <code>ls</code> here you should see a file called python, which is your interpreter. You can get the directory path using the command <code>pwd</code> to get the current directory.</p>
</li>
<li><p>Press cmd + shift + P and type in <strong>Python: Select Interpreter</strong></p>
</li>
<li><p>Select <strong>Enter interpreter path...</strong></p>
</li>
<li><p>Paste in the directory your got using <code>pwd</code> from before and <code>python</code> to the end of it</p>
</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/PacoBahena">@PacoBahena</a> on 2025-04-02 20:02</div>
            <div class="timeline-body"><p>when you select the interpreter, make sure you pass down the interpreter path manually, because if passing via ui (finder/windows explorer) vscode will set the symlink to uv system python causing the link to fail.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/soutot">@soutot</a> on 2025-04-03 14:27</div>
            <div class="timeline-body"><blockquote>
<p>If your pyproject.toml is not in the root of your workspace, you may have to select the interpreter.</p>
<ol>
<li>First, <strong>find the path of your interpreter</strong> by going to the directory where you pyprojectl.toml is and <code>cd</code>-ing into <code>.venv/bin/</code>. If you <code>ls</code> here you should see a file called python, which is your interpreter. You can get the directory path using the command <code>pwd</code> to get the current directory.</li>
<li>Press cmd + shift + P and type in <strong>Python: Select Interpreter</strong></li>
<li>Select <strong>Enter interpreter path...</strong></li>
<li>Paste in the directory your got using <code>pwd</code> from before and <code>python</code> to the end of it</li>
</ol>
</blockquote>
<p>I tried this and I get <code>Invalid Python interpreter is selected</code> error:</p>
<p><img src="https://github.com/user-attachments/assets/3ab9fc45-0474-45ad-b633-0f628a982f51" alt="Image"></p>
<p><code>ls</code>-ing <code>/Users/user/Documents/my-repo/py-proj1/.venv/bin</code> I can see both python and python3.12.</p>
<p>Tried a few different paths:
/Users/user/Documents/my-repo/py-proj1/.venv/bin
/Users/user/Documents/my-repo/py-proj1/.venv/bin/python
/Users/user/Documents/my-repo/py-proj1/.venv/bin/python3.12</p>
<p>None worked.</p>
<p>The output shows:</p>
<blockquote>
<p>[warning] Failed to check if /Users/user/Documents/my-repo/py-proj1/.venv/bin/python3.12 is an executable [Error: ENOENT: no such file or directory, lstat &#x27;/usr/local/bin/python3.12&#x27;] {
errno: -2,
code: &#x27;ENOENT&#x27;,
syscall: &#x27;lstat&#x27;,
path: &#x27;/usr/local/bin/python3.12&#x27;
}</p>
</blockquote>
<p>I have multiple python projects in this repo. In a repo with a single project it works.
Any hints?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NellyWhads">@NellyWhads</a> on 2025-04-07 05:16</div>
            <div class="timeline-body"><p>Have you tried:</p>
<ol>
<li>Using the pre-release version of the Python extension? This used to fix things for me (but is no longer required for the last ~4 months)</li>
<li>Re-loading the VSCode Window, Re-starting the python language server, and/or re-starting the extensions provider?</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/morrissimo">@morrissimo</a> on 2025-04-16 13:25</div>
            <div class="timeline-body"><p>Seeing this exact issue as well. But these steps allowed me to work around it:</p>
<blockquote>
<p>If your pyproject.toml is not in the root of your workspace, you may have to select the interpreter.</p>
<ol>
<li>First, <strong>find the path of your interpreter</strong> by going to the directory where you pyprojectl.toml is and <code>cd</code>-ing into <code>.venv/bin/</code>. If you <code>ls</code> here you should see a file called python, which is your interpreter. You can get the directory path using the command <code>pwd</code> to get the current directory.</li>
<li>Press cmd + shift + P and type in <strong>Python: Select Interpreter</strong></li>
<li>Select <strong>Enter interpreter path...</strong></li>
<li>Paste in the directory your got using <code>pwd</code> from before and <code>python</code> to the end of it</li>
</ol>
</blockquote>
<p>...but NOT when I use the &quot;Find&quot; feature in the VSCode &quot;Enter interpreter path&quot; command&#x27;s UI. These steps <strong>only</strong> worked for me by pasting the full path to the interpreter into the &quot;Enter interpreter path&quot; command UI.</p>
<p>Versions fwiw:</p>
<ul>
<li>Macbook Pro OSX Sequoia 15.4</li>
<li>VSCode 1.99.2<blockquote>
<p>Version: 1.99.2 (Universal)
Commit: 4949701c880d4bdb949e3c0e6b400288da7f474b
Date: 2025-04-10T01:21:25.295Z
Electron: 34.3.2
ElectronBuildId: 11161073
Chromium: 132.0.6834.210
Node.js: 20.18.3
V8: 13.2.152.41-electron.0
OS: Darwin x64 24.4.0</p>
</blockquote>
</li>
<li>uv 0.6.14 (a4cec56dc 2025-04-09)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codethief">@codethief</a> on 2025-04-17 14:16</div>
            <div class="timeline-body"><p>To add another data point to the discussion: My workspace is a monorepo, whose subfolders each contain a separat uv project / <code>pyproject.toml</code> &amp; <code>.venv</code> folder, and like everyone else here I was struggling with setting up the interpreter correctly. Now I just installed the <a href="https://github.com/teticio/python-envy">teticio.python-envy</a> extension, which automatically recognizes <code>.venv</code> folders and sets the interpreter path depending on the file I am looking at. So far, everything (IntelliSense, type hints, etc.) seems to be working fine!</p>
<p>I&#x27;m running</p>
<ul>
<li>Linux / NixOS 25.05</li>
<li>VSCode 1.98.2</li>
<li>uv 0.6.9</li>
<li>ms-python.python 2025.4.0</li>
<li>ms-python.vscode-pylance 2025.4.1</li>
<li>teticio.python-envy 0.1.8</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zcuric">@zcuric</a> on 2025-04-17 14:32</div>
            <div class="timeline-body"><p>I had this issue when using Docker and Django. I notice that <code>.venv</code> was messed up with from the Docker so I made it work like this:</p>
<p>Create a separate virtual environment (to differentiate it from the one used in Docker):</p>
<pre><code>uv venv .venv-editor
</code></pre>
<p>Activate the virtual environment:</p>
<pre><code>source .venv-editor/bin/activate
</code></pre>
<p>Install dependencies into the active environment:</p>
<pre><code>uv sync --active
</code></pre>
<p>In VSCode, open the command palette (Cmd+Shift+P), search for ‚ÄúPython: Select Interpreter‚Äù, and select the .venv-editor environment (it should point to .venv-editor/bin/python).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ben-xD">@ben-xD</a> on 2025-04-21 10:08</div>
            <div class="timeline-body"><p>The workarounds mentioned above didn&#x27;t really help me. <code>uv run python</code> or just <code>./venv/bin/python</code> was killed with error code 137.</p>
<p>This was happening to me on python 3.11. A quick fix for me was to upgrade the project I was testing to Python 3.12 or 3.13.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rayterrill">@rayterrill</a> on 2025-04-21 18:04</div>
            <div class="timeline-body"><p>I fixed this by setting the following setting in my user settings.json (non-monorepo setup, opening a project in the root):</p>
<pre><code>    &quot;python.defaultInterpreterPath&quot;: &quot;./.venv&quot;,
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Victsz">@Victsz</a> on 2025-04-24 02:26</div>
            <div class="timeline-body"><p>My case is the language server never work for pylance when using uv and select python in  ./.venv
<img src="https://github.com/user-attachments/assets/849e23eb-4e84-451a-83ed-aa2c32a52ae4" alt="Image">
But sometimes jedi can work but not always...</p>
<p><img src="https://github.com/user-attachments/assets/0f14a5ec-5f78-49e3-b88c-44774221be83" alt="Image">
The only change I made to show above captures is the language server option.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jbohnslav">@jbohnslav</a> on 2025-05-03 14:23</div>
            <div class="timeline-body"><p>This is semi-related, but in case it helps people: I kept getting sigkills as well. I had to</p>
<p><code>rm -rf /Users/USERNAME/.local/share/uv</code>, then <code>uv sync</code> and it all worked.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Robinsstudio">@Robinsstudio</a> on 2025-05-06 23:32</div>
            <div class="timeline-body"><p>I also have this issue and my <code>.venv</code> is not at the root of the project as well. The workaround fixes it but it&#x27;s actually not really necessary on my end as using the absolute path to the Python interpreter will work. I just have to choose &quot;Enter interpreter path&quot; and then paste the absolute path to it. It works with the absolute path to <code>.venv</code>, <code>.venv/bin</code> and even <code>.venv/bin/python</code>.</p>
<p>I also figured that it works with paths relative to the root of the workspace. For example, if I have my workspace at <code>/Users/robinsstudio/my_amazing_project</code> and my Python interpreter at <code>/Users/robinsstudio/my_amazing_project/path/to/python/.venv/bin/python</code>, then I can simply paste <code>./path/to/python/.venv/bin/python</code> at the &quot;Enter interpreter path&quot; step.</p>
<p>I hope this will help someone!</p>
<p>edit: After some further investigation, I think the core issue lies in the fact that <code>.venv/bin/python</code> is a symbolic link rather than a real Python executable. So if you do &quot;Select interpreter&quot; ‚Üí &quot;Enter interpreter path&quot; ‚Üí &quot;Find&quot; and then select <code>python</code> in <code>.venv/bin</code>, VS Code will not get <code>.venv/bin/python</code> as interpreter path but rather the path that the symbolic link is pointing to. So that&#x27;s obviously wrong because it&#x27;s outside of the UV environment. You can see the path VS Code is using by opening &quot;Select interpreter&quot; again. It will be shown on top.</p>
<p>Bottom line: you should just paste the path to the interpreter manually and not use &quot;Find&quot;. At least that&#x27;s the behavior I have on Mac.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/egorvavilov">@egorvavilov</a> on 2025-05-10 10:32</div>
            <div class="timeline-body"><p>@oulianov</p>
<p>I encountered the same issue when setting up a multi-repo workspace using uv on a Mac M1, and none of the suggested solutions worked for me initially‚Äîespecially in getting <code>VSCode + Pylance + Python + uv</code> to cooperate.</p>
<p>After some searching, I found a workaround that resolved the issue. Here&#x27;s what worked:</p>
<p>Project structure:</p>
<pre><code>.
‚îú‚îÄ‚îÄ child_repo_A
‚îÇ   ‚îú‚îÄ‚îÄ .venv
‚îÇ   ‚îú‚îÄ‚îÄ pyproject.toml
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ child_repo_B
‚îÇ   ‚îú‚îÄ‚îÄ .venv
‚îÇ   ‚îú‚îÄ‚îÄ pyproject.toml
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ README.md
</code></pre>
<p>Steps:</p>
<ol>
<li>Open the Command Palette <code>(Cmd+Shift+P / Ctrl+Shift+P)</code> in VSCode and select: <code>Workspaces: Add Folder to Workspace...</code>
Add each child repo as a separate folder.</li>
<li>Once added, VSCode will treat each child repository as an independent project in the File Explorer.</li>
<li>Inside each child repo, create a .vscode/settings.json file with the following content:</li>
</ol>
<pre><code>{
  &quot;python.defaultInterpretorPath&quot;: &quot;.venv/bin/python&quot;
}
</code></pre>
<ol>
<li>This enables proper interpreter resolution, and Pylance should now work correctly with your environment.</li>
</ol>
<p>Let me know if this helps or if you run into any edge cases</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wnowicki">@wnowicki</a> on 2025-05-13 14:39</div>
            <div class="timeline-body"><p>I am getting the same issue, I&#x27;ve lost my autocompletion on dependencies.</p>
<p>I&#x27;ve setup venv <code>uv venv venv</code> to differenciate from default <code>.venv</code> and it did work for some time. Usually it works after VSC restart.</p>
<p>Maybe this is some VSC issue:</p>
<pre><code>2025-05-13 16:30:42.808 [error] Stopping language client failed Error: Stopping the server timed out
    at /Users/xxx/.vscode/extensions/ms-python.python-2025.6.0-darwin-arm64/out/client/extension.js:2:2026466
    at l.stop (/Users/xxx/.vscode/extensions/ms-python.python-2025.6.0-darwin-arm64/out/client/extension.js:2:22718)
</code></pre>
<p>Some update before posting this, I&#x27;ve checked project where I don&#x27;t have UV installed yet and there is the same issue. I think I&#x27;ll check VSC.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BlackDark">@BlackDark</a> on 2025-05-14 12:33</div>
            <div class="timeline-body"><p>I also did not have completions for my local projects but when I did a uv sync  --no-editable i got the completions back working because the folder gets copied to the .venv directory I think. But of course now also the stuff is fixed and not symlinked so changes get not reflected back to the .venv.</p>
<p>Not sure if this is related.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-14 12:58</div>
            <div class="timeline-body"><p>I asked upstream (VS Code Python) for input on the matter: <a href="https://github.com/microsoft/vscode-python/issues/25068">microsoft/vscode-python#25068</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-14 16:16</div>
            <div class="timeline-body"><p>Could you check whether you have the same problem with https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs? From a VS Code maintainer in <a href="https://github.com/microsoft/vscode-python/issues/25068">microsoft/vscode-python#25068</a>:</p>
<blockquote>
<p>Install that extension and reload VS Code. That will cause python extension to replace its features with the new extension. That will soon be replacing all the environment features in python extension.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wnowicki">@wnowicki</a> on 2025-05-14 17:19</div>
            <div class="timeline-body"><p>I&#x27;ve tried, installed and it didn&#x27;t help.</p>
<p>Please see as well <a href="https://github.com/microsoft/pylance-release/issues/7209">microsoft/pylance-release#7209</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zhuoqun-chen">@zhuoqun-chen</a> on 2025-05-15 02:15</div>
            <div class="timeline-body"><p>Hi all and @oulianov, would you mind trying to add this line in your project&#x27;s <code>.vscode/settings.json</code>:</p>
<pre><code>&quot;python.defaultInterpreterPath&quot;: &quot;${workspaceFolder}/.venv&quot;
</code></pre>
<p>I&#x27;m assuming <code>uv</code> is installed globally inside your <code>$PATH</code>, eg, I&#x27;m using <code>uv</code> installed with <code>brew</code> on my mac.</p>
<p>If getting no luck, also setting up in the UI interface like this:</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/d2a2aba9-820d-4aba-a002-8363f22e112e"></p>
<p>Using this always gives me the correct IDE features whether in <code>cursor</code> or <code>vscode</code>. Anyway, this is just my own config so I&#x27;m posting here for reference. Hope this can help you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Florian-crg">@Florian-crg</a> on 2025-05-15 10:03</div>
            <div class="timeline-body"><p>‚ùå The solution mentioned in <a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-2654030261 will not work on all setup.</p>
<blockquote>
<p>if you have a monorepo, you select open workspace from file</p>
</blockquote>
<p>If you‚Äôre working in a monorepo, you can select ‚ÄúOpen Workspace from File‚Äù to open a specific subfolder as its own workspace.</p>
<p>When you do this, external libraries will still resolve correctly. However, internal imports will only work if they are relative to the subfolder you‚Äôre opening as the workspace.</p>
<p>For example, with the following structure:</p>
<pre><code>main_folder/
‚îú‚îÄ‚îÄ sub_folder/  (opened as workspace)
‚îÇ   ‚îú‚îÄ‚îÄ .venv/
‚îÇ   ‚îú‚îÄ‚îÄ pyfile_1.py
‚îÇ   ‚îî‚îÄ‚îÄ pyfile_2.py
‚îú‚îÄ‚îÄ ...
</code></pre>
<p>Inside <code>pyfile_2.py</code>:</p>
<pre><code>from pyfile_1 import whatever  # ‚ùå Won&#x27;t work
from typing import Any         # ‚úÖ Works (standard library)
</code></pre>
<p>So, imports like from <code>pyfile_1</code> import ... won‚Äôt resolve unless <code>pyfile_1.py</code> is discoverable from the workspace root ‚Äî in this case, sub_folder.</p>
<hr>
<p>‚úÖ <strong>The solution mentioned in <a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2626203937">this comment</a> worked for me</strong> with this setup:</p>
<pre><code>main_folder/ (opened as workspace)
‚îú‚îÄ‚îÄ sub_folder/  
‚îÇ   ‚îú‚îÄ‚îÄ .venv/
‚îÇ   ‚îú‚îÄ‚îÄ pyfile_1.py
‚îÇ   ‚îî‚îÄ‚îÄ pyfile_2.py
‚îú‚îÄ‚îÄ ...
</code></pre>
<p>That said, it didn‚Äôt work immediately ‚Äî possibly due to caching ü§∑ or something similar. Restarting / closing the folder or else might help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bholagabbar">@bholagabbar</a> on 2025-05-21 22:06</div>
            <div class="timeline-body"><p>I spent like 3 days trying to fix this uv/autocomplete issue but in vain. This is a waste of time. Great library, terrible support for existing tooling. just CANNOT get it to work in a monorepo setup with pylance and the existing other tools. I&#x27;ve tried everything under the sun, nope</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codethief">@codethief</a> on 2025-05-21 22:57</div>
            <div class="timeline-body"><p>@bholagabbar Did you try <a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-2813097995 ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-22 01:16</div>
            <div class="timeline-body"><p>@bholagabbar please go open an issue in VS Code or comment on <a href="https://github.com/microsoft/vscode-python/issues/25068">this existing one</a> instead. We are just using standards-compliant Python virtual environments. There&#x27;s nothing we can do to fix this behavior ‚Äî and if there somehow is I&#x27;d be happy to hear it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bholagabbar">@bholagabbar</a> on 2025-05-22 02:41</div>
            <div class="timeline-body"><p>@codethief I tried installing the package, didn&#x27;t work for me :(</p>
<p>Hey @zanieb , appreciate your reply. Let me layout the step my step commands to replicate this. I really want to help your team (and myself) get to the bottom of this issue and this really shouldn&#x27;t be something that stops users from using uv. So here goes</p>
<p>I use <a href="https://www.cursor.com/">Cursor</a></p>
<ul>
<li><p><code>uv init infra --bare</code> (This acts sort of as the base of my monorepo`</p>
</li>
<li><p><code>cd infra</code></p>
</li>
<li><p><code>uv venv</code>. Then I set the interpreter to this path and restart my terminal too</p>
</li>
<li><p><code>uv init dataos --lib</code> (Core library to by shared by services`</p>
</li>
<li><p><code>uv init actor-rep-runner</code> (Service that uses code from dataos`</p>
</li>
<li><p>The pyproject.toml files for <code>infra</code> and <code>actor-rep-runner</code>  are as follows</p>
<pre><code>[project]
name = &quot;infra&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.13&quot;
dependencies = []

[tool.uv.workspace]
members = [
    &quot;dataos&quot;,
    &quot;actor-rep-runner&quot;,
]
</code></pre>
<pre><code>[project]
name = &quot;actor-rep-runner&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.13&quot;
dependencies = [
    &quot;dataos&quot;,
]

[tool.uv.sources]
dataos = { workspace = true }
</code></pre>
</li>
<li><p>I do a <code>uv sync</code> from the root <code>infra/</code></p>
</li>
<li><p>Create a file inside <code>dataos</code> that you want to reuse in your service</p>
<ul>
<li><code>cd dataos/src/dataos</code></li>
<li><code>touch hunter.py</code></li>
</ul>
<pre><code>def hunt():
    print (&quot;Hunting...&quot;)
</code></pre>
</li>
<li><p><code>cd ../../../actor-rep-runner/</code>
This is how my <code>main.py</code> looks, with no imports</p>
</li>
</ul>
<p><img src="https://github.com/user-attachments/assets/5df5bdb4-e42d-4fee-88d4-e309c161df3f" alt="Image"></p>
<p>As you can see, <code>from dataos.hunter import hunt</code> is unable to be detected. Any ideas ?</p>
<p>I think this issue is relevant as well: <a href="https://github.com/astral-sh/uv/issues/7576">astral-sh/uv#7576</a>#issuecomment-2740802359</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codethief">@codethief</a> on 2025-05-22 07:37</div>
            <div class="timeline-body"><p>@bholagabbar</p>
<blockquote>
<p>@codethief I tried installing the package, didn&#x27;t work for me :(</p>
</blockquote>
<p>That&#x27;s unfortunate! What exactly didn&#x27;t work, though? Setting the .venv as Python environment? Or import resolution as in your screenshot?</p>
<p>Regarding your screenshot: What exactly is the error message when you hover over the import? Are you using Pylance? If so, you might want to look at <a href="https://github.com/microsoft/pylance-release/issues/7151">microsoft/pylance-release#7151</a> and https://github.com/microsoft/pylance-release/blob/main/TROUBLESHOOTING.md#unresolved-import-warnings .</p>
<p>Either way, it seems your projects <code>actor-rep-runner</code> and <code>dataos</code> each have their own <code>pyproject.toml</code> but not a separate <code>.venv</code> (= their own set of dependencies), and instead are nested under the <code>infra</code> project and are supposed to use the latter <code>.venv</code>? That seems very weird to me. <strong>EDIT:</strong> Never mind, I missed the fact that you are using <a href="https://docs.astral.sh/uv/concepts/projects/workspaces/">uv workspaces</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/xflcx1991">@xflcx1991</a> on 2025-05-24 14:55</div>
            <div class="timeline-body"><blockquote>
<p>‚ùå The solution mentioned in <a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2654030261">#9637 (comment)</a> will not work on all setup.‚ùå ‰∏≠ <a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2654030261">#9637 (comment)</a> ÊèêÂà∞ÁöÑËß£ÂÜ≥ÊñπÊ°à‰∏çÈÄÇÁî®‰∫éÊâÄÊúâËÆæÁΩÆ„ÄÇ</p>
<blockquote>
<p>if you have a monorepo, you select open workspace from fileÂ¶ÇÊûúÊÇ®Êúâ monorepoÔºåËØ∑ÈÄâÊã© Open workspace from file</p>
</blockquote>
<p>If you‚Äôre working in a monorepo, you can select ‚ÄúOpen Workspace from File‚Äù to open a specific subfolder as its own workspace.Â¶ÇÊûú‰Ω†Âú® monorepo ‰∏≠Â∑•‰ΩúÔºå‰Ω†ÂèØ‰ª•ÈÄâÊã© ‚ÄúOpen Workspace from File‚Äù Êù•ÊâìÂºÄ‰∏Ä‰∏™ÁâπÂÆöÁöÑÂ≠êÊñá‰ª∂Â§π‰Ωú‰∏∫ÂÆÉËá™Â∑±ÁöÑÂ∑•‰ΩúÂå∫„ÄÇ</p>
<p>When you do this, external libraries will still resolve correctly. However, internal imports will only work if they are relative to the subfolder you‚Äôre opening as the workspace.ÊâßË°åÊ≠§‰ΩúÊó∂ÔºåÂ§ñÈÉ®Â∫ì‰ªçÂ∞ÜÊ≠£Á°ÆËß£Êûê„ÄÇ‰ΩÜÊòØÔºå‰ªÖÂΩìÂÜÖÈÉ®ÂØºÂÖ•Áõ∏ÂØπ‰∫éÊÇ®‰Ωú‰∏∫Â∑•‰ΩúÂå∫ÊâìÂºÄÁöÑÂ≠êÊñá‰ª∂Â§πÊó∂ÔºåÂÜÖÈÉ®ÂØºÂÖ•ÊâçÊúâÊïà„ÄÇ</p>
<p>For example, with the following structure:‰æãÂ¶ÇÔºåÂÖ∑Êúâ‰ª•‰∏ãÁªìÊûÑÔºö</p>
<pre><code>main_folder/
‚îú‚îÄ‚îÄ sub_folder/  (opened as workspace)
‚îÇ   ‚îú‚îÄ‚îÄ .venv/
‚îÇ   ‚îú‚îÄ‚îÄ pyfile_1.py
‚îÇ   ‚îî‚îÄ‚îÄ pyfile_2.py
‚îú‚îÄ‚îÄ ...
</code></pre>
<p>Inside <code>pyfile_2.py</code>:<code>pyfile_2.py</code> ÂÜÖÂπïÔºö</p>
<pre><code>from pyfile_1 import whatever  # ‚ùå Won&#x27;t work
from typing import Any         # ‚úÖ Works (standard library)
</code></pre>
<p>So, imports like from <code>pyfile_1</code> import ... won‚Äôt resolve unless <code>pyfile_1.py</code> is discoverable from the workspace root ‚Äî in this case, sub_folder.Âõ†Ê≠§ÔºåÂÉè from <code>pyfile_1</code> import ËøôÊ†∑ÁöÑ imports ...Èô§ÈùûÂèØ‰ª•‰ªéÂ∑•‰ΩúÂå∫Ê†πÔºàÂú®Êú¨‰æã‰∏≠‰∏∫ sub_folderÔºâÂèëÁé∞ <code>pyfile_1.py</code>ÔºåÂê¶Âàô‰∏ç‰ºöËß£Êûê„ÄÇ</p>
<p>‚úÖ <strong>The solution mentioned in <a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2626203937">this comment</a> worked for me</strong> with this setup:‚úÖ **<a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2626203937"> Ê≠§ËØÑËÆ∫</a>‰∏≠ÊèêÂà∞ÁöÑËß£ÂÜ≥ÊñπÊ°àÈÄÇÁî®‰∫éÊ≠§ËÆæÁΩÆ **Ôºö</p>
<pre><code>main_folder/ (opened as workspace)
‚îú‚îÄ‚îÄ sub_folder/  
‚îÇ   ‚îú‚îÄ‚îÄ .venv/
‚îÇ   ‚îú‚îÄ‚îÄ pyfile_1.py
‚îÇ   ‚îî‚îÄ‚îÄ pyfile_2.py
‚îú‚îÄ‚îÄ ...
</code></pre>
<p>That said, it didn‚Äôt work immediately ‚Äî possibly due to caching ü§∑ or something similar. Restarting / closing the folder or else might help.‰πüÂ∞±ÊòØËØ¥ÔºåÂÆÉÂπ∂Ê≤°ÊúâÁ´ãÂç≥Â∑•‰Ωú‚Äî‚ÄîÂèØËÉΩÊòØÁî±‰∫éÁºìÂ≠òü§∑ÊàñÁ±ª‰ººÂéüÂõ†„ÄÇÈáçÊñ∞ÂêØÂä®/ÂÖ≥Èó≠Êñá‰ª∂Â§πÊàñÂÖ∂‰ªñÊñπÂºèÂèØËÉΩ‰ºöÊúâÊâÄÂ∏ÆÂä©„ÄÇ</p>
</blockquote>
<p>Thank you very much, it turned out to be this &quot;Open Workspace from File&quot;. I&#x27;m also mono-project, I was inspired, I chose &quot;Add Fold to workspace&quot;, I chose the root of the python project folder created by uv, and it worked, now cursor workspace has two entries, one is the mono-project root, and the other is the python project root that I just added, Now the python code has selected the interpreter path to be the one in the .venv directory, and the import statement is normal, and there is no warning that the package cannot be found.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bholagabbar">@bholagabbar</a> on 2025-05-25 00:17</div>
            <div class="timeline-body"><p>Thanks! Was finally able to get it to work. One common thread is that the code editor takes time to recognize the imports and needs to be restarted. I&#x27;m not really sure what worked, but I documented everything in my README as such:</p>
<ul>
<li><code>uv venv</code> - Creates a <code>.venv/</code> virtual environment folder</li>
<li><code>source .venv/bin/activate</code> - Activates the virtual environment</li>
<li><code>uv sync</code> - Installs dependencies for all projects in the workspace</li>
<li>Ensure you have a <code>.env</code> wherever we have a <code>.env.sample</code> file</li>
<li><a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2626203937">Select interpreter</a></li>
<li>Install <a href="https://github.com/teticio/python-envy">python-envy</a> extension for vscode</li>
<li>Restart your terminal and window for autocompletion to work</li>
</ul>
<p><code>uv</code> is annoying to setup, here are some selected github issues that address common annoyances: <a href="https://github.com/astral-sh/uv/issues/9637#issue-2717716303">1</a>, <a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2813097995">2</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bholagabbar">@bholagabbar</a> on 2025-05-25 00:20</div>
            <div class="timeline-body"><p>@zanieb I have a (somewhat) related question. Why does <code>uv</code> not treat workspace members like automatic dependencies ?</p>
<p>Here&#x27;s an example</p>
<pre><code>[project]
name = &quot;infra&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.13&quot;

[tool.uv.workspace]
members = [
    &quot;dataos&quot;,
    &quot;actor-rep-runner&quot;,
]
</code></pre>
<p>This is the root <code>pyproject.toml</code> for the workspace. If I do <code>uv sync</code> here, it actually <em>deletes</em> all the existing dependencies it had installed, when i did <code>uv sync</code> from WITHIN the <code>dataos/</code> and <code>actor-rep-runner/</code> folders</p>
<p>What fixed it was adding these 2 blocks</p>
<pre><code>dependencies = [
    &quot;dataos&quot;,
    &quot;actor-rep-runner&quot;,
]

[tool.uv.sources]
dataos = { workspace = true }
actor-rep-runner = { workspace = true }
</code></pre>
<p>I really shouldn&#x27;t have to add the above ? Seems obvious to me personally, or maybe I am opinionated ü§∑‚Äç‚ôÇ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-25 00:29</div>
            <div class="timeline-body"><p>@bholagabbar -- Because workspaces consist of multiple members, and each member can depend on any subset (or none, or all) of the other members. For example, you might not want <code>dataos</code> to depend on <code>actos-rep-runner</code>, right? The workspace root is no different -- it&#x27;s just another member, and each member needs to declare its own dependencies.</p>
<p>If you have further questions, I suggest joining the Discord? (Since this issue in particular has a lot of subscribers, and it&#x27;s better not to ping them all for unrelated queries.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lucacerone">@lucacerone</a> on 2025-05-29 16:18</div>
            <div class="timeline-body"><blockquote>
<p>Selecting .venv as an active interpreter in VSCode works. But selecting .venv/bin/python doesn&#x27;t.</p>
<p><strong>It would be nice if we didn&#x27;t have to do all these shenanigans.</strong> In a monorepo, I switch from python project and dependencies all the time. The current procedure is pretty painful, not documented, and not trivial.</p>
<p>It would be great to have all the <code>.venv</code> show up in the interpreter list. Even better, the active interpreter could switch automatically depending on the opened file.</p>
<p><a href="https://github.com/zanieb">@zanieb</a> are there any plans to improve the uv experience in vscode?</p>
</blockquote>
<p>Thanks a lot! This is the only thing that worked for me!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pdpark-wex">@pdpark-wex</a> on 2025-05-30 21:28</div>
            <div class="timeline-body"><p>The only thing that worked for me was reverting to the older &quot;js&quot; python locator with this setting: <code>&quot;python.locator&quot;: &quot;js&quot;</code> - from <a href="https://stackoverflow.com/questions/78886125/vscode-python-extension-loading-forever-saying-reactivating-terminals#answer-78886126">here</a>. Obviously not a great long term solution, but nothing else worked.</p>
<p>I reported this <a href="https://github.com/microsoft/vscode-python/issues/25120#issuecomment-2923529911">here</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-06-02 09:15</div>
            <div class="timeline-body"><p>@pdpark-wex Does this mean you also tried https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs and that didn&#x27;t work?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pdpark-wex">@pdpark-wex</a> on 2025-06-03 16:36</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/pdpark-wex">@pdpark-wex</a> Does this mean you also tried https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs and that didn&#x27;t work?</p>
</blockquote>
<p>I have not tried it yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/7l-hyuk">@7l-hyuk</a> on 2025-06-14 05:54</div>
            <div class="timeline-body"><p>Anyone using WSL should check the following:</p>
<ul>
<li>In vscode, press <code>ctrl + shift + P</code></li>
<li>Select <code>WSL: Connect to WSL</code></li>
</ul>
<p>VSCode will now connect to your WSL instance and automatically detect your virtual environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thefabus">@thefabus</a> on 2025-06-14 18:15</div>
            <div class="timeline-body"><p>I&#x27;m not sure if this has been mentioned yet, but I had the same issue (Select Interpreter appears to do nothing), and what worked for me was to disable managed python.</p>
<p>The smoking gun was the managed interpreter crashing, however, after uninstalling all managed python interpreters I&#x27;ve been unable to reproduce this. The following only occurred in iTerm, in the VSCode terminal it would just hang:</p>
<pre><code>‚ùØ uv python install --reinstall
Installed Python 3.11.13 in 1.52s
 + cpython-3.11.13-macos-aarch64-none
‚ùØ deactivate
‚ùØ source .venv/bin/activate
‚ùØ python --version
zsh: killed     python --version
</code></pre>
<p>I uninstalled all managed python versions:</p>
<pre><code>‚ùØ uv python list
cpython-3.14.0b2-macos-aarch64-none                 &lt;download available&gt;
cpython-3.14.0b2+freethreaded-macos-aarch64-none    &lt;download available&gt;
cpython-3.13.5-macos-aarch64-none                   /opt/homebrew/bin/python3.13 -&gt; ../Cellar/python@3.13/3.13.5/bin/python3.13
cpython-3.13.5-macos-aarch64-none                   /opt/homebrew/bin/python3 -&gt; ../Cellar/python@3.13/3.13.5/bin/python3
cpython-3.13.5-macos-aarch64-none                   &lt;download available&gt;
cpython-3.13.5+freethreaded-macos-aarch64-none      &lt;download available&gt;
cpython-3.12.11-macos-aarch64-none                  &lt;download available&gt;
cpython-3.11.13-macos-aarch64-none                  &lt;download available&gt;
cpython-3.10.18-macos-aarch64-none                  &lt;download available&gt;
cpython-3.9.23-macos-aarch64-none                   &lt;download available&gt;
cpython-3.9.6-macos-aarch64-none                    /usr/bin/python3
cpython-3.8.20-macos-aarch64-none                   &lt;download available&gt;
pypy-3.11.11-macos-aarch64-none                     &lt;download available&gt;
pypy-3.10.16-macos-aarch64-none                     &lt;download available&gt;
pypy-3.9.19-macos-aarch64-none                      &lt;download available&gt;
pypy-3.8.16-macos-aarch64-none                      &lt;download available&gt;
graalpy-3.11.0-macos-aarch64-none                   &lt;download available&gt;
graalpy-3.10.0-macos-aarch64-none                   &lt;download available&gt;
graalpy-3.8.5-macos-aarch64-none                    &lt;download available&gt;
</code></pre>
<p>Then reinitializing with system python fixed it for me:</p>
<pre><code>‚ùØ rm -rf .venv
‚ùØ uv venv --no-managed-python
Using CPython 3.13.5 interpreter at: /opt/homebrew/opt/python@3.13/bin/python3.13
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
</code></pre>
<p>Hope this helps.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bholagabbar">@bholagabbar</a> on 2025-06-14 18:24</div>
            <div class="timeline-body"><p>This issue seems to be initiation ritual into uv lol. Happy user now, but the 3 days I spent trying to figure this out were ridiculous</p>
<p>Sent via Superhuman iOS ( <em><strong>@</strong></em>.*** )</p>
<p>On Sat, Jun 14, 2025 at 11:16‚ÄØAM, Fabian Kabus &lt; <em><strong>@</strong></em>.*** &gt; wrote:</p>
<blockquote>
<p><em>thefabus</em> left a comment (astral-sh/uv#9637) (
<a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-2972953664 )</p>
<p>I&#x27;m not sure if this has been mentioned yet, but I had the same issue
(Select Interpreter appears to do nothing), and what worked for me was to
disable managed python.</p>
<p>The smoking gun was the managed interpreter crashing, however, after
uninstalling all managed python interpreters I&#x27;ve been unable to reproduce
this. The following only occurred in iTerm, in the VSCode terminal it
would just hang:</p>
<p>‚ùØ uv python install --reinstall
Installed Python 3.11.13 in 1.52s
+
cpython-3.11.13-macos-aarch64-none
‚ùØ deactivate
‚ùØ source
.venv/bin/activate
‚ùØ python --version
zsh: killed     python --version</p>
<p>I uninstalled all managed python versions:</p>
<p>‚ùØ uv python list
cpython-3.14.0b2-macos-aarch64-none<br>

cpython-3.14.0b2+freethreaded-macos-aarch64-none<br>

cpython-3.13.5-macos-aarch64-none<br>
/opt/homebrew/bin/python3.13 -&gt;
..<em><strong>@</strong></em>.<em><strong>/3.13.5/bin/python3.13
cpython-3.13.5-macos-aarch64-none<br>
/opt/homebrew/bin/python3 -&gt; ..</strong></em>@<em><strong>.</strong></em>/3.13.5/bin/python3
cpython-3.13.5-macos-aarch64-none                   
cpython-3.13.5+freethreaded-macos-aarch64-none      
cpython-3.12.11-macos-aarch64-none                  
cpython-3.11.13-macos-aarch64-none                  
cpython-3.10.18-macos-aarch64-none                  
cpython-3.9.23-macos-aarch64-none                   
cpython-3.9.6-macos-aarch64-none                    /usr/bin/python3
cpython-3.8.20-macos-aarch64-none                   
pypy-3.11.11-macos-aarch64-none                     
pypy-3.10.16-macos-aarch64-none                     
pypy-3.9.19-macos-aarch64-none                      
pypy-3.8.16-macos-aarch64-none                      
graalpy-3.11.0-macos-aarch64-none                   
graalpy-3.10.0-macos-aarch64-none                   
graalpy-3.8.5-macos-aarch64-none                    </p>
<p>Then reinitializing with system python fixed it for me:</p>
<p>‚ùØ rm -rf .venv
‚ùØ uv venv --no-managed-python
Using CPython 3.13.5
interpreter at: <em><strong>@</strong></em>.***/bin/python3.13
Creating
virtual environment at: .venv
Activate with: source .venv/bin/activate</p>
<p>Hope this helps.</p>
<p>‚Äî
Reply to this email directly, view it on GitHub (
<a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-2972953664 ) , or
unsubscribe (
https://github.com/notifications/unsubscribe-auth/ACZG4GYOJ5EWGVIRYCAE3633DRRGZAVCNFSM6AAAAABTAE3XXWVHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDSNZSHE2TGNRWGQ
).
You are receiving this because you were mentioned. Message ID: &lt;astral-sh/uv/issues/9637/2972953664
@ github. com&gt;</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/frodera">@frodera</a> on 2025-06-17 09:25</div>
            <div class="timeline-body"><p>This solution from @thefabus is the only one that has worked for me.</p>
<blockquote>
<p>‚ùØ rm -rf .venv
‚ùØ uv venv --no-managed-python
Using CPython 3.13.5 interpreter at: /opt/homebrew/opt/python@3.13/bin/python3.13
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate</p>
</blockquote>
<p>The workaround of &quot;Selecting .venv as an active interpreter&quot; suggested did not do the trick for me for some reason. ü§∑üèª</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-06-17 09:28</div>
            <div class="timeline-body"><p>From the other thread, it seems that the preview environment extension also fixes this (https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs, <a href="https://github.com/microsoft/vscode-python/issues/25068">microsoft/vscode-python#25068</a>#issuecomment-2967309800)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lmanc">@lmanc</a> on 2025-06-30 18:46</div>
            <div class="timeline-body"><p>@konstin, the locator fix suggested by @pdpark-wex worked for me, too.</p>
<p>I tried everything else, the <code>.venv</code> absolute path and the new Python Environments extension, but the only thing that fixed it was switching back to the old locator.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/day0n">@day0n</a> on 2025-07-10 23:57</div>
            <div class="timeline-body"><p>+1</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Duc-NSH">@Duc-NSH</a> on 2025-07-23 03:11</div>
            <div class="timeline-body"><blockquote>
<p>The only thing that worked for me was reverting to the older &quot;js&quot; python locator with this setting: <code>&quot;python.locator&quot;: &quot;js&quot;</code> - from <a href="https://stackoverflow.com/questions/78886125/vscode-python-extension-loading-forever-saying-reactivating-terminals#answer-78886126">here</a>. Obviously not a great long term solution, but nothing else worked.</p>
<p>I reported this <a href="https://github.com/microsoft/vscode-python/issues/25120#issuecomment-2923529911">here</a></p>
</blockquote>
<p>Thank you very much! This solution worked for me. Although I mostly use NeoVim, I still need to use VsCode for certain tasks. The bug where VsCode doesn&#x27;t detect non-root .venv makes me dislike opening it every time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hsiehbocheng">@hsiehbocheng</a> on 2025-07-28 01:41</div>
            <div class="timeline-body"><p>Not sure if I‚Äôm misunderstanding your issue, but I ran into something very similar.
VS Code couldn‚Äôt find the Python interpreter in my .venv from uv, and I eventually discovered it was because the virtual-env lived inside a sub-folder (e.g. project/sub-module/.venv).</p>
<p>By default a VS Code workspace only scans the top-level folder for interpreters, so anything in deeper paths is ignored. The fix was to switch to a multi-root workspace (File ‚ñ∏ Add Folder to Workspace‚Ä¶) and add the sub-folder as its own root. As soon as I did that, the .venv interpreter showed up.</p>
<p>Docs for reference: https://code.visualstudio.com/docs/editing/workspaces/multi-root-workspaces</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codethief">@codethief</a> on 2025-07-28 09:07</div>
            <div class="timeline-body"><p>@Duc-NSH @hsiehbocheng</p>
<blockquote>
<p>The bug where VsCode doesn&#x27;t detect non-root .venv</p>
</blockquote>
<blockquote>
<p>I eventually discovered it was because the virtual-env lived inside a sub-folder (e.g. project/sub-module/.venv).
By default a VS Code workspace only scans the top-level folder for interpreters, so anything in deeper paths is ignored.</p>
</blockquote>
<p>Correct, and ‚Äì with all due respect ‚Äì we have discussed this various times already (see e.g. the <a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2518779669">4th comment here</a>). The bug/deficiency is in Pyright/Pylance[0], and has nothing to do with uv.</p>
<p>Overall, I feel like we&#x27;re going in circles, so <strong>let me summarize all the solutions &amp; workarounds people here in this thread have identified so far</strong>. I added a suffix <code>(?)</code> to solutions I haven&#x27;t verified myself and where there hasn&#x27;t been a lot of feedback yet.</p>
<p><strong>Solution 1:</strong>  Set the interpreter path by hand manually, as discussed <a href="https://github.com/astral-sh/uv/issues/9637#issue-2717716303">in the very first post</a> here as well as <a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2552026597">various</a> <a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2756287897">others</a>. Note that there seems to be an additional issue regarding symlinks, see <a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2619993750">1</a>, <a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2773598069">2</a>, <a href="https://github.com/astral-sh/uv/issues/9637#issuecomment-2856524057">3</a>. Either way, this solution doesn&#x27;t work great if you&#x27;re in a monorepo or often switch between multiple projects/workspaces in VSCode.</p>
<p><strong>Solution 2:</strong> Use a multi-root workspace in VSCode, i.e. one root for every Python project. This isn&#x27;t exactly great if you&#x27;re in a monorepo with a lot of projects and collaborators, each of whom will have to set up their VSCode instance by hand, but it seems it is what the <a href="https://github.com/microsoft/pyright/discussions/7979#discussioncomment-9527473">Pyright devs recommend</a>.</p>
<p><strong>Solution 3</strong>: Like 1 but use an extension like <a href="https://marketplace.visualstudio.com/items?itemName=teticio.python-envy">teticio.python-envy</a> to automatically set the interpreter path based on the file you&#x27;re currently looking at, compare <a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-2813097995 . This is what I currently use and it has been working quite well in my monorepo setup.</p>
<p><strong>Solution 4(?)</strong>: Use the new <a href="https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs">ms-python.vscode-python-envs</a> extension, as per <a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-2979632654 .</p>
<p><strong>Solution 5(?)</strong>: Set <code>&quot;python.locator&quot;: &quot;js&quot;</code>, compare <a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-2923535889 .</p>
<p><strong>Side note regarding solutions 1 and 3:</strong> You might also want to add a <code>pyrightconfig.json</code> to your workspace root and set different <a href="https://microsoft.github.io/pyright/#/configuration?id=execution-environment-options"><code>executionEnvironments</code></a> for your different projects there. This should ensure that import suggestions work as expected. E.g.:</p>
<pre><code>{
    &quot;executionEnvironments&quot;: [
        {
            &quot;root&quot;: &quot;./python-project1&quot;
        },
        {
            &quot;root&quot;: &quot;./python-project2&quot;
        },
        // ‚Ä¶
    ],
    // ‚Ä¶
}
</code></pre>
<p>[0]: Related tickets:</p>
<ul>
<li>https://github.com/microsoft/pyright/issues/10498</li>
<li>https://github.com/microsoft/pylance-release/issues/7151</li>
<li>https://github.com/microsoft/pylance-release/issues/3899</li>
<li>https://github.com/microsoft/pylance-release/issues/5564</li>
<li>https://github.com/microsoft/vscode-python/issues/21204</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jyaros">@jyaros</a> on 2025-08-08 22:41</div>
            <div class="timeline-body"><p>Personally i was able to add uvenv as an interpreter only once I reopened the git repo at the top level of the workspace so that the env folder was at root. If you dont <strong>need</strong> to open up a higher parent directory for your work, this is the easiest way to get around the issue ...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-09 03:14</div>
            <div class="timeline-body"><p>If there&#x27;s a canonical way to configure this correctly, e.g., as described by @codethief, I think we should add it to an integration guide in the documentation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konosubakonoakua">@konosubakonoakua</a> on 2025-08-18 13:43</div>
            <div class="timeline-body"><blockquote>
<p>The only thing that worked for me was reverting to the older &quot;js&quot; python locator with this setting: <code>&quot;python.locator&quot;: &quot;js&quot;</code> - from <a href="https://stackoverflow.com/questions/78886125/vscode-python-extension-loading-forever-saying-reactivating-terminals#answer-78886126">here</a>. Obviously not a great long term solution, but nothing else worked.</p>
<p>I reported this <a href="https://github.com/microsoft/vscode-python/issues/25120#issuecomment-2923529911">here</a></p>
</blockquote>
<p>Thank you, work like a charm.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eleanorjboyd">@eleanorjboyd</a> on 2025-08-18 16:02</div>
            <div class="timeline-body"><p>Hello everyone! Wanted to hop in per @konstin suggestion. I am an engineer on the VS Code team specifically working on Python and environments. We are beginning to roll out a new extension called the Python Environments Extension which is a new extension dedicated to all environment and package management for Python in VS Code. This will serve as the backbone for Python support in VS Code, a required extension which all Python extensions (the core Python, the Python Debugger, and various linter/formatter extensions) will rely on.</p>
<p>With this being said, we encourage everyone encountering issues with their environments in VS Code to install the new extension and add to their user settings:  <code>python.usePythonEnvironmentsExtension: true</code>. Once enabled you may find your issue is fixed (as we have made significant improvements to the environment experience) or it may still persist. If you still have it, please file an issue on <a href="https://github.com/microsoft/vscode-python-environments">this repo</a> and I will get back to you to figure out and solve the bug. This will make sure your bug is fixed moving forward instead of on the soon-to-be deprecated code for environments which lives on the Python extension.</p>
<p>Feel free to reach out with any outstanding questions in that repository and I hope everyone adopts the new extension as we are excited about the new features which it enables!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ggirelli">@ggirelli</a> on 2025-08-19 09:36</div>
            <div class="timeline-body"><blockquote>
<p>With this being said, we encourage everyone encountering issues with their environments in VS Code to install the new extension and add to their user settings: <code>python.usePythonEnvironmentsExtension: true</code>.</p>
</blockquote>
<p>This fixed the issue for me. Thank you so much! üôèüèª</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> removed by <a href="https://github.com/konstin">@konstin</a> on 2025-08-19 11:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">external</span> added by <a href="https://github.com/konstin">@konstin</a> on 2025-08-19 11:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hsuabina">@hsuabina</a> on 2025-08-19 18:50</div>
            <div class="timeline-body"><blockquote>
<p>Solution 3: Like 1 but use an extension like <a href="https://marketplace.visualstudio.com/items?itemName=teticio.python-envy">teticio.python-envy</a> to automatically set the interpreter path based on the file you&#x27;re currently looking at, compare <a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-2813097995 . This is what I currently use and it has been working quite well in my monorepo setup.</p>
</blockquote>
<p>I&#x27;m also working on a monorepo (with packages of all sorts) and for someone that&#x27;s not so used to work on python projects this solution was simple and effective.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codethief">@codethief</a> on 2025-08-21 02:34</div>
            <div class="timeline-body"><p>@eleanorjboyd I&#x27;ve seen your new extension be mentioned a few times already but so far no one ever spelled out what it does differently compared to the old Python extension. Could you elaborate? Does it support monorepos? (I.e. multiple Python projects / venvs per workspace.) Does it automatically recognize Python projects / venvs or do I have to configure things by hand? Etc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/matthias-busch">@matthias-busch</a> on 2025-09-15 13:18</div>
            <div class="timeline-body"><blockquote>
<p>Solution 3: Like 1 but use an extension like <a href="https://marketplace.visualstudio.com/items?itemName=teticio.python-envy">teticio.python-envy</a> to automatically set the interpreter path based on the file you&#x27;re currently looking at, compare <a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-2813097995 . This is what I currently use and it has been working quite well in my monorepo setup.</p>
</blockquote>
<p>Gotta say this does work quite well in my monorepos. Thanks for the tip!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mironnn">@mironnn</a> on 2025-10-10 17:54</div>
            <div class="timeline-body"><p>had the same issue.</p>
<p>Disabling this buggy sh..t solved the issue.
https://marketplace.visualstudio.com/items?itemName=ms-python.vscode-python-envs is recommended to be uninstalled.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eleanorjboyd">@eleanorjboyd</a> on 2025-10-10 20:50</div>
            <div class="timeline-body"><p>Hi @mironnn- would appreciate if you file an issue on our repo if you are seeing a problem so I can fix it! Thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zcuric">@zcuric</a> on 2025-10-14 12:02</div>
            <div class="timeline-body"><blockquote>
<p>Hello everyone! Wanted to hop in per <a href="https://github.com/konstin">@konstin</a> suggestion. I am an engineer on the VS Code team specifically working on Python and environments. We are beginning to roll out a new extension called the Python Environments Extension which is a new extension dedicated to all environment and package management for Python in VS Code. This will serve as the backbone for Python support in VS Code, a required extension which all Python extensions (the core Python, the Python Debugger, and various linter/formatter extensions) will rely on.</p>
<p>With this being said, we encourage everyone encountering issues with their environments in VS Code to install the new extension and add to their user settings: <code>python.usePythonEnvironmentsExtension: true</code>. Once enabled you may find your issue is fixed (as we have made significant improvements to the environment experience) or it may still persist. If you still have it, please file an issue on <a href="https://github.com/microsoft/vscode-python-environments?rgh-link-date=2025-08-18T16%3A02%3A20.000Z">this repo</a> and I will get back to you to figure out and solve the bug. This will make sure your bug is fixed moving forward instead of on the soon-to-be deprecated code for environments which lives on the Python extension.</p>
<p>Feel free to reach out with any outstanding questions in that repository and I hope everyone adopts the new extension as we are excited about the new features which it enables!</p>
</blockquote>
<p>Does this apply in Cursor as well? üôà</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ksaurabh21">@ksaurabh21</a> on 2025-10-14 13:51</div>
            <div class="timeline-body"><p>I am using VS code on Win11 VM on azure. I have created a .venv using uv but none of the solutions suggested above worked for me. I am trying to run a notebook (have jupyter extension and ipykernel installed) but unable to have VS code detect the venv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/piehld">@piehld</a> on 2025-10-20 16:09</div>
            <div class="timeline-body"><blockquote>
<p>With this being said, we encourage everyone encountering issues with their environments in VS Code to install the new extension and add to their user settings: <code>python.usePythonEnvironmentsExtension: true</code>.</p>
</blockquote>
<p>Is it <code>python.usePythonEnvironmentsExtension</code> or <code>python.useEnvironmentsExtension</code>? The extension docs suggest the latter, and the former is not showing up as a valid setting.</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/0cf45e70-0a27-4a40-92d8-1be5cbca5cc8"></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/djsamseng">@djsamseng</a> on 2025-11-19 04:55</div>
            <div class="timeline-body"><p>In my case, <strong>not</strong> selecting &quot;Select at workspace level&quot; fixed the issue.</p>
<p>My setup was:</p>
<ul>
<li>A global uv venv located outside of the VSCode workspace (ex: ~/.venv)</li>
<li>A VSCode workspace with multiple projects</li>
<li>Python: Select interpreter -&gt; Select at workspace level -&gt; Enter interpreter path -&gt; intellisense does not work, installed modules (via uv pip install) are not found</li>
</ul>
<p>What did work was:
Python: Select interpreter -&gt; <em><strong>Project Name</strong></em> -&gt; Enter interpreter path -&gt; intellisense works</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/akk29">@akk29</a> on 2025-11-20 01:35</div>
            <div class="timeline-body"><p>Resolved, I just selected path of interpreter in from VS code bottom right corner in .venv/Scripts/python, after that it got resolved, though I have also uninstalled the extension mentioned above , added that config also didn&#x27;t work that either (reverted it). Not sure if uninstalling extension have any effect on this. Path selection for interpreter have definitely fixed this issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/juhaszp95">@juhaszp95</a> on 2025-11-26 13:50</div>
            <div class="timeline-body"><p>Just leaving a comment here to say that <a href="https://github.com/astral-sh/uv/issues/9637">astral-sh/uv#9637</a>#issuecomment-2813097995 works for me, and is the only solution which is working for me at the moment (i.e. the new Python Environments extension didn&#x27;t solve the issue for me).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tinodj">@tinodj</a> on 2025-12-04 21:46</div>
            <div class="timeline-body"><p>I hit this when using uv, and actually the problem is finder resolving symlink on MacOS, described here: <a href="https://github.com/astral-sh/uv/issues/8706">astral-sh/uv#8706</a>#issuecomment-2773598984</p>
<p>With python.usePythonEnvironmentsExtension: true this is not fixed, and this extension even it makes impossible to enter path manually, only to select it from finder, which then resolves to original uv python. However, extension is very nice itself and there are lot of useful features.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cs-mshah">@cs-mshah</a> on 2025-12-07 19:11</div>
            <div class="timeline-body"><blockquote>
<p>In my case, <strong>not</strong> selecting &quot;Select at workspace level&quot; fixed the issue.</p>
<p>My setup was:</p>
<ul>
<li>A global uv venv located outside of the VSCode workspace (ex: ~/.venv)</li>
<li>A VSCode workspace with multiple projects</li>
<li>Python: Select interpreter -&gt; Select at workspace level -&gt; Enter interpreter path -&gt; intellisense does not work, installed modules (via uv pip install) are not found</li>
</ul>
<p>What did work was: Python: Select interpreter -&gt; <em><strong>Project Name</strong></em> -&gt; Enter interpreter path -&gt; intellisense works</p>
</blockquote>
<p>This is what works for me as well. Thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:35:57 UTC
    </footer>
</body>
</html>
