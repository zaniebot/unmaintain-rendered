<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File permissions on lock files (#11324) - astral-sh/uv #12665</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>File permissions on lock files (#11324)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/12665">#12665</a>
        opened by <a href="https://github.com/Lalufu">@Lalufu</a>
        on 2025-04-04 09:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Lalufu">@Lalufu</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>In #11324 (addressed in #11328) there was a complaint about a lock file error in case a <code>uv</code> environment was created by one user, but then used by another. The fix for this was to create the lock files in question with <code>0o777</code> permissions, ignoring any user <code>umask</code>. While this fixes the problem, it now leaves world writable files on the file system, which isn't great practice, either.
What I'm not understanding from the original issue, and what I'd like some clarification on, are the consequences of not being able to acquire the lock file in question. If this lock file is taken to prevent concurrent changes to other files, in the case presented this would not be possible in any case, as all other files are also owned by a different user? What does taking the lock file guard? What could happen if <code>uv run</code> continued without having taken the lock in this case?</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @Lalufu on 2025-04-04 09:29</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:30:47 UTC
    </footer>
</body>
</html>
