<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow building and installing Python from source - astral-sh/uv #10561</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow building and installing Python from source</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/10561">#10561</a>
        opened by <a href="https://github.com/nazdridoy">@nazdridoy</a>
        on 2025-01-13 12:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nazdridoy">@nazdridoy</a> on 2025-01-13 12:02</div>
            <div class="timeline-body"><p>I am requesting a feature/enhancement for <code>uv</code> to include the ability to build Python from source during the virtual environment setup. This would align <code>uv</code> with tools like <code>pyenv</code> (this is preventing me from completely transitioning to uv), which allows users to compile Python from source, ensuring compatibility and reducing potential issues with pre-built binaries.</p>
<p><strong>Motivation:</strong></p>
<p>Building Python from source can help mitigate issues related to pre-built Python binaries, such as:</p>
<ol>
<li><strong>Compatibility:</strong> Source builds can be optimized and configured for the specific system architecture, ensuring better compatibility with system libraries and dependencies.</li>
<li><strong>Customization:</strong> Users can specify build options and enable specific Python features that might not be included in standard pre-built binaries.</li>
<li><strong>preventing weird bug:</strong> This approach can help prevent issues like <a href="https://github.com/astral-sh/uv/issues/10555">uv pre-built python issue #10555</a> and others related to Python version discrepancies, linking issues, or missing symbols in shared libraries.</li>
</ol>
<p><strong>Proposed Solution:</strong></p>
<ol>
<li>Introduce a command or flag in <code>uv</code> to allow building Python from source during the virtual environment creation.</li>
<li>Provide users with the option to specify Python version and configure build options.</li>
<li>Include necessary build dependencies checks and error messages to guide users in installing required packages.</li>
</ol>
<p>Many Python developers use <code>pyenv</code> to build Python from source, especially in environments where system-provided Python versions are outdated or incompatible with their projects. Incorporating a similar feature in <code>uv</code> would greatly enhance its utility and robustness.</p>
<p>Please consider this feature request to help future-proof <code>uv</code> and provide a more flexible development environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[Feature Request] Add Ability to Build Python from Source in "uv"" to "[Feature Request] Add The Ability to Build Python from Source in "uv"" by @nazdridoy on 2025-01-13 12:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-13 18:39</div>
            <div class="timeline-body"><p>I think we are unlikely to do this. It adds more complexity to the user experience and I would rather invest in improving the pre-built Python distributions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[Feature Request] Add The Ability to Build Python from Source in "uv"" to "Allow building and installing Python from source" by @zanieb on 2025-01-13 18:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @zanieb on 2025-01-13 18:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-13 18:39</div>
            <div class="timeline-body"><p>I'm not sure what value we would provide over using another tool, like pyenv, for this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nazdridoy">@nazdridoy</a> on 2025-01-13 20:45</div>
            <div class="timeline-body"><blockquote>
<p>I'm not sure what value we would provide over using another tool</p>
</blockquote>
<p>pyenv build python from source, uv provides prebuilt binary. for some project i have to use pyenv to manage python as binary provided by uv break things.</p>
<p>though for the most part uv is awesome.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2025-01-14 16:36</div>
            <div class="timeline-body"><blockquote>
<p>for some project i have to use pyenv to manage python as binary provided by uv break things.</p>
</blockquote>
<p>If it's an issue to do with the pre-built binary itself consider searching and/or reporting issues over on the repo that builds them: https://github.com/astral-sh/python-build-standalone</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nazdridoy">@nazdridoy</a> on 2025-01-14 16:47</div>
            <div class="timeline-body"><p>i know it will increase development complexity but wouldn't it be better to let user --build python from source if they want and manage them with uv?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JamesParrott">@JamesParrott</a> on 2025-01-15 19:37</div>
            <div class="timeline-body"><p>This request requires the user to have a C compiler and Make installed .  That used to be a fair assumption on Posix desktops and servers.  But even there that's often no longer the case (that a compiler and build deps are available), when working within the lighter-weight Docker containers.</p>
<p>Pyenv-win doesn't build Pythons from source (<a href="https://github.com/pyenv-win/pyenv-win/issues/529">not yet</a>, perhaps).  Personally I doubt the majority of pyenv users, that happen to be using a distro without a compiler chain and build dependencies, would take the trouble to set up the <a href="https://github.com/pyenv/pyenv/wiki#suggested-build-environment">suggested build environment</a> that Pyenv requires.  So I wouldn't expect uv users to do so either.</p>
<blockquote>
<p>i know it will increase development complexity but wouldn't it be better to let user --build python from source if they want and manage them with uv?</p>
</blockquote>
<p>Yes it would.  But it would only be a tiny bit better.  It would certainly not be enough of an improvement to figure out all the design decisions this necessitates.</p>
<p>It's much better that those users that want to do so, configure exactly how they want to build Python from source for themselves.  Instead of uv having to invent some opinionated way of doing so, and then having to support all the inevitable edge cases.</p>
<p>At the very least should uv pick GCC or Clang?  Or keep it light and venture into uncharted waters with Zig or tinycc?  Could uv use Ninja, CMake or Meson?  (Can it just replicate indygreg's builds in the cloud on the fly?  If so why shouldn't it just download one of indygreg's builds!)  What should uv do on Windows too - look for MSYS2 or MSVC?  Can Rust just fix it all gracefully, on all platforms?</p>
<p>Users that want a source build, have already figured out all these issues and made their own decisions.  Anyone that wants to build from source can easily do so too in a docker container using <a href="https://devguide.python.org/getting-started/setup-building/index.html#unix">the Python dev guide</a> too.  The gist of it is:</p>
<pre><code>docker run --rm -it debian:trixie bash
apt-get update -y
apt-get install build-essential gdb lcov libbz2-dev libffi-dev \
         libgdbm-dev liblzma-dev libncurses5-dev libreadline6-dev \
         libsqlite3-dev libssl-dev lzma lzma-dev tk-dev uuid-dev xvfb git
git clone --depth=1 --branch=3.12 https://github.com/python/cpython
cd cpython
./configure
make -j
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:32:05 UTC
    </footer>
</body>
</html>
