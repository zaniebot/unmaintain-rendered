```yaml
number: 16912
title: "Allow nested dependency groups with CLI (`uv add` + `include-group`)"
type: issue
state: open
author: Avasam
labels:
  - enhancement
  - needs-design
  - cli
assignees: []
created_at: 2025-12-01T17:34:30Z
updated_at: 2025-12-01T19:06:27Z
url: https://github.com/astral-sh/uv/issues/16912
synced_at: 2026-01-10T01:57:37Z
```

# Allow nested dependency groups with CLI (`uv add` + `include-group`)

---

_Issue opened by @Avasam on 2025-12-01 17:34_

### Summary

I'm trying to achieve the following through CLI:

```toml
# pyproject.toml
[dependency-groups]
ruff = [
    "beslogic-ruff-config",
    "ruff",
]
dev = [
  { include-group = "ruff" },
]
[tool.uv.sources]
beslogic-ruff-config = { git = "https://github.com/Beslogic/Beslogic-Ruff-Config", rev = "<rev>" }
```

What I got so far:
```shell
uv add git+https://github.com/Beslogic/Beslogic-Ruff-Config --group ruff --rev <rev>
uv add ruff --group ruff
# Something like that
uv add "{ include-group = 'ruff' }" --dev # also tried with --raw
```

Which results in:
```shell
error: Failed to parse: `{ include-group = 'ruff' }`
  Caused by: Expected package name starting with an alphanumeric character, found `{`
{ include-group = 'ruff' }
```

I would like to add an `include-group` entry using the CLI.

https://docs.astral.sh/uv/concepts/projects/dependencies/#nesting-groups makes no mention of this being possible, hence I'm opening as a feature request.

### Example

Tools that only need to run within a specific context and don't need to pull in the entire dev dependencies can offer a simpler optimized installation method through a few CLI commands (create a dependency group, then add said group to dev)

(my full real-world example is included in summary)

I can see this pattern becoming popular once Ruff officially supports extending non-local configurations

---

_Label `enhancement` added by @Avasam on 2025-12-01 17:34_

---

_Comment by @zanieb on 2025-12-01 17:42_

This is a duplicate of https://github.com/astral-sh/uv/issues/9054 though I think this one is a bit clearer

---

_Referenced in [astral-sh/uv#9054](../../astral-sh/uv/issues/9054.md) on 2025-12-01 17:42_

---

_Label `cli` added by @zanieb on 2025-12-01 17:42_

---

_Label `needs-design` added by @zanieb on 2025-12-01 17:43_

---

_Comment by @zanieb on 2025-12-01 17:44_

```
uv add --include-group foo --group bar
```

is the first thing I can think of? 

Or I guess we could use our invented syntax we use for display, i.e.:

```
uv add project:foo --group bar
```

---

_Comment by @Avasam on 2025-12-01 17:57_

IMO `--include-group` has better discoverability. As a CLI arg it'll naturally come up in --help and it'll be easier to search for in docs.

`uv add foo2 --include-group foo --group bar` would still work and add both the dependency and include to the group

---

_Comment by @zanieb on 2025-12-01 18:00_

I'm a little wary of adding more flags though. We do already support group selection e.g., `uv pip install --group pyproject.toml:group`. And this is how you'd add an extra to a group, e.g., `uv add project[foo] --group bar`.

---
