<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can't add package (pyqpbo) - astral-sh/uv #11161</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Can't add package (pyqpbo)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11161">#11161</a>
        opened by <a href="https://github.com/noamgot">@noamgot</a>
        on 2025-02-02 09:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/noamgot">@noamgot</a> on 2025-02-02 09:39</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I tried adding the <a href="https://github.com/pystruct/pyqpbo">pyqpbo</a> package to a fresh uv-initialized project</p>
<pre><code>uv init --python 3.10
uv python pin 3.10
</code></pre>
<p>I got this error:</p>
<pre><code>❯ uv add pyqpbo
  × Failed to build `pyqpbo==0.1.2`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit status: 1)

      [stderr]
      Traceback (most recent call last):
        File &quot;&lt;string&gt;&quot;, line 14, in &lt;module&gt;
        File &quot;$HOME/.cache/uv/builds-v0/.tmpOpYTfz/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 334, in get_requires_for_build_wheel
          return self._get_build_requires(config_settings, requirements=[])
        File &quot;$HOME/.cache/uv/builds-v0/.tmpOpYTfz/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 304, in _get_build_requires
          self.run_setup()
        File &quot;$HOME/.cache/uv/builds-v0/.tmpOpYTfz/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 522, in run_setup
          super().run_setup(setup_script=setup_script)
        File &quot;$HOME/.cache/uv/builds-v0/.tmpOpYTfz/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 320, in run_setup
          exec(code, locals())
        File &quot;&lt;string&gt;&quot;, line 5, in &lt;module&gt;
      ModuleNotFoundError: No module named 'numpy'

      hint: This usually indicates a problem with the package or the build environment.
  help: `pyqpbo` (v0.1.2) was included because `pyqpbo-test` (v0.1.0) depends on `pyqpbo`
</code></pre>
<p>I know this is a very old package, but I must use it in my project.</p>
<p>For reference, when I create a clean venv I can <code>pip install pyqpbo</code>  and use it:</p>
<pre><code>python3.10 -m venv .venv
source .venv/bin/activate
pip install pyqpbo # works!
pip install numpy==1.25 # we must install it to make the next line work
python -c &quot;from pyqpbo import alpha_expansion_general_graph&quot;  # works!
</code></pre>
<p>Notes:</p>
<ul>
<li>I installed numpy in the venv example just to make the import work. pyqpbo's installation works without it. It doesn't work in the uv case either with or without numpy installed.</li>
<li>The full context is that I tried to install it within a <a href="https://pixi.sh">pixi</a> (conda) environment, but since they use uv as their pypi installation backend, I checked it in a fresh uv project and got the same error I got with pixi.</li>
</ul>
<p>If you have a solution for this - I'd like to hear about it. thanks!</p>
<h3>Platform</h3>
<p>Ubuntu 22.04, Linux 5.15.0-88-generic x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.5.25</p>
<h3>Python version</h3>
<p>3.10.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @noamgot on 2025-02-02 09:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-02-02 12:07</div>
            <div class="timeline-body"><p>This is another instance of https://github.com/astral-sh/uv/issues/2252, <code>pyqpbo</code> fails to declare its build dependency on numpy. You can work around this by installing numpy manually (as you did) and then deactivating build isolation for the package (https://docs.astral.sh/uv/concepts/projects/config/#build-isolation).</p>
<p>We should add a better hint here for <code>ModuleNotFoundError: No module named '.*'</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @konstin on 2025-02-02 12:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @konstin on 2025-02-02 12:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/noamgot">@noamgot</a> on 2025-02-02 13:46</div>
            <div class="timeline-body"><p>thanks @konstin , looks like it's good enough for me (and works in pixi as well :) )</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @noamgot on 2025-02-02 13:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:32:59 UTC
    </footer>
</body>
</html>
