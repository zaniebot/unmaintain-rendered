<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&quot;on venv creation&quot; script - astral-sh/uv #10264</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>&quot;on venv creation&quot; script</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/10264">#10264</a>
        opened by <a href="https://github.com/majidaldo">@majidaldo</a>
        on 2025-01-01 17:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/majidaldo">@majidaldo</a> on 2025-01-01 17:25</div>
            <div class="timeline-body"><p>close to https://github.com/astral-sh/uv/issues/10211.</p>
<p>Use cases: <code>pre-commit install</code> and environment variable setting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-01 17:33</div>
            <div class="timeline-body"><p>On activate as in <code>source .venv/bin/activate</code> or during <code>uv run</code>? I think I need more details here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from ""on venv activate" script" to ""on venv creation" script" by @majidaldo on 2025-01-02 02:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/majidaldo">@majidaldo</a> on 2025-01-02 02:35</div>
            <div class="timeline-body"><blockquote>
<p>On activate as in <code>source .venv/bin/activate</code> or during <code>uv run</code>? I think I need more details here.</p>
</blockquote>
<p>errr sorry changed the issue title. <code>uv run</code> variations can be handled but there is no 'hook' to do something on env creation with the driving use case being a place to put <code>pre-commit install</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sayandipdutta">@sayandipdutta</a> on 2025-01-02 15:45</div>
            <div class="timeline-body"><p>+1
Such a <code>on venv creation</code> hook will also let me set the <code>venv --prompt</code> to something other than <code>.venv</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brunomjm">@brunomjm</a> on 2025-02-06 15:52</div>
            <div class="timeline-body"><p>+1
If I may rephrase: a way to include custom actions in the <code>uv sync</code> process (my use case is also <code>pre-commit install</code>).
Benefits:</p>
<ul>
<li>Less boilerplate / manual steps until a developer can start working on a fresh clone or after a pull where pre-commits where changed,</li>
<li>Less risk of developers bypassing or forgetting about required pre-commit hooks in a project.</li>
</ul>
<p>@majidaldo maybe mention <code>uv sync</code> in the title?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/majidaldo">@majidaldo</a> on 2025-02-06 17:24</div>
            <div class="timeline-body"><blockquote>
<p>+1 If I may rephrase: a way to include custom actions in the <code>uv sync</code> process (my use case is also <code>pre-commit install</code>). Benefits:</p>
<ul>
<li>Less boilerplate / manual steps until a developer can start working on a fresh clone or after a pull where pre-commits where changed,</li>
<li>Less risk of developers bypassing or forgetting about required pre-commit hooks in a project.</li>
</ul>
<p><a href="https://github.com/majidaldo">@majidaldo</a> maybe mention <code>uv sync</code> in the title?</p>
</blockquote>
<p>my suggestion isn't on <code>uv sync</code> but on venv activation though. let <code>uv sync</code> just be about creating the env (not activating it).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-06 19:53</div>
            <div class="timeline-body"><blockquote>
<p>Such a on venv creation hook will also let me set the venv --prompt to something other than .venv.</p>
</blockquote>
<p>Why not just set the prompt when you create the venv? Is this when the venv is created via a specific command or.. ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sayandipdutta">@sayandipdutta</a> on 2025-02-07 03:53</div>
            <div class="timeline-body"><p>No, not using the explicit command. For things like <code>uv sync</code>, <code>uv run</code>, nd <code>uv add</code>. I am thinking more along the lines of a hook.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-07 15:58</div>
            <div class="timeline-body"><p>But... with those commands the <code>--prompt</code> should be the name of the directory / project not <code>.venv</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sayandipdutta">@sayandipdutta</a> on 2025-02-07 17:39</div>
            <div class="timeline-body"><p>Well... I checked, and this is embarrassing ðŸ˜…</p>
<p>Either this wasn't the default behavior in some previous version, or I had messed up somewhere. I remember scouring the issues for such a request. And I ended up writing a custom script to do this. Although I have been seeing the correct prompt ever since, I figured this was solely due to my script, and didn't bother to check thoroughly.</p>
<p>Sorry for the trouble! Thanks a lot!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-07 17:41</div>
            <div class="timeline-body"><p>Haha thanks for following up, that's helpful. Just trying to understand the use-cases :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/majidaldo">@majidaldo</a> on 2025-02-07 18:14</div>
            <div class="timeline-body"><p>since we're developing python, i can get something functionally close if i hook stuff into a <code>__init__.py</code>, but such code shouldn't really be in distributed code:</p>
<pre><code class="language-python">if dev(): # figure out if in dev mode
   # setup steps
   ...

</code></pre>
<p>something more involved would be to hook into a build script for some 'dev' package.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/brunomjm">@brunomjm</a> on 2025-02-14 14:20</div>
            <div class="timeline-body"><blockquote>
<p>my suggestion isn't on <code>uv sync</code> but on venv activation though. let <code>uv sync</code> just be about creating the env (not activating it).</p>
</blockquote>
<p>Not sure I understand, since uv abstracts away venv activation no? But I don't wanna hijack your issue ðŸ˜„ Maybe I will create a separate one.</p>
<p>@zanieb I would be curious to hear your opinion on the intent behind <code>uv sync</code> though: is it strictly meant for syncing dependencies in a virtual environment or could it be extended to a broader definition of &quot;environment&quot; (i.e. prepare the environment for development) which could include installing pre-commit hooks?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/majidaldo">@majidaldo</a> on 2025-02-14 19:43</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>my suggestion isn't on <code>uv sync</code> but on venv activation though. let <code>uv sync</code> just be about creating the env (not activating it).</p>
</blockquote>
<p>Not sure I understand, since uv abstracts away venv activation no? But I don't wanna hijack your issue ðŸ˜„ Maybe I will create a separate one.</p>
<p><a href="https://github.com/zanieb">@zanieb</a> I would be curious to hear your opinion on the intent behind <code>uv sync</code> though: is it strictly meant for syncing dependencies in a virtual environment or could it be extended to a broader definition of &quot;environment&quot; (i.e. prepare the environment for development) which could include installing pre-commit hooks?</p>
</blockquote>
<p>that would be <code>uv run</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Avasam">@Avasam</a> on 2025-06-11 23:17</div>
            <div class="timeline-body"><p>On venv creation is close enough to a pre-install script that I could use it to automatically install os-level requirements and configs. Replacing https://github.com/Toufool/AutoSplit/blob/9d1104b07e6b6d87e42ea7b386255badfdf51851/scripts/install.ps1 with only <code>uv sync</code>/<code>uv run</code>. At least until if/when https://peps.python.org/pep-0725/ ever lands.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:59 UTC
    </footer>
</body>
</html>
