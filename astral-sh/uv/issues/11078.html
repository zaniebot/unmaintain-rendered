<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Version discovery with untrusted `.venv` Python binary - astral-sh/uv #11078</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Version discovery with untrusted <code>.venv</code> Python binary</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11078">#11078</a>
        opened by <a href="https://github.com/RoloEdits">@RoloEdits</a>
        on 2025-01-29 19:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/RoloEdits">@RoloEdits</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>While submitting https://github.com/starship/starship/pull/6523 to add version detection for <code>uv</code> managed python installations, worry came up for potential issues with untrusted python binaries being executed with no interaction. Is there any mitigation <code>uv</code> does against such untrusted <code>.venv</code> python binaries? And if not, is there ever a safe way this could be done?</p>
<h3>Platform</h3>
<p>Windows 11</p>
<h3>Version</h3>
<p>uv 0.5.25 (9c07c3fc5 2025-01-28)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @RoloEdits on 2025-01-29 19:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-29 19:49</div>
            <div class="timeline-body"><p>We have no concept of trusted or untrusted Python binaries. If there are binaries on your system that are executable, uv may invoke them while sniffing for Python interpreters. I don't know what the threat model is here, like... you have a malicious binary on your machine already?</p>
<p>You can use <code>--python &lt;path&gt;</code> to explicitly request a Python binary. I think that's my best recommendation?</p>
<p>Are there ways you think we could verify the safety of arbitrary Python binaries?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RoloEdits">@RoloEdits</a> on 2025-01-29 20:05</div>
            <div class="timeline-body"><p>I thought that would be the case. Just wanted to know if there was anything in this scope that I was not accounting for. Any validation would need checksums I would venture. But given that <code>.venv</code> should not be in source control, and any executables in there should be install from the user, which should, in theory, be ok. Always good to double check though. Thanks for the response!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">security</span> added by @zanieb on 2025-01-29 20:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-29 20:20</div>
            <div class="timeline-body"><p>Yeah sorry there's not a better answer. Especially on Windows, where the binaries are <em>copied</em> into virtual environments it's hard to verify that it's some trusted system interpreter without doing a fair bit of work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-01-29 20:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:29:37 UTC
    </footer>
</body>
</html>
