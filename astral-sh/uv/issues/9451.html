<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip install` failing with Git LFS repositories - astral-sh/uv #9451</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv pip install</code> failing with Git LFS repositories</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9451">#9451</a>
        opened by <a href="https://github.com/dimk90">@dimk90</a>
        on 2024-11-26 20:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dimk90">@dimk90</a></div>
            <div class="timeline-body">Description
<p>Installation from a repository with LFS content fails with a smudge error, e.g.</p>
<pre><code>uv venv -p 3.11
uv pip install &quot;git+https://github.com/makarovdi/uplot.git@main&quot;
</code></pre>
<p>the output:</p>
<pre><code>Updating https://github.com/makarovdi/uplot.git (main)
error: Git operation failed
  Caused by: process didn&#x27;t exit successfully: `D:\Workspace\sdk\Git\cmd\git.exe reset --hard dbc97a068bb6128833a4a7cc3d1e15649a03e3c2` (exit code: 128)
--- stderr
Downloading gallery/asset/hvline.png (184 KB)
Error downloading object: gallery/asset/hvline.png (e0ceff1): Smudge error: Error downloading gallery/asset/hvline.png (e0ceff1ec4965d6141a39c652807adde9c67d5019aff2cd7dae85390a740086c): error transferring &quot;e0ceff1ec4965d6141a39c652807adde9c67d5019aff2cd7dae85390a740086c&quot;: [0] remote missing object e0ceff1ec4965d6141a39c652807adde9c67d5019aff2cd7dae85390a740086c

Errors logged to &#x27;D:\Workspace\sdk\msys2\home\dmitry\.cache\uv\git-v0\checkouts\b218c100bb0184e1\dbc97a0\.git\lfs\logs\20241126T212020.8355407.log&#x27;.
Use `git lfs logs last` to view the log.
error: external filter &#x27;git-lfs filter-process&#x27; failed
fatal: gallery/asset/hvline.png: smudge filter lfs failed
</code></pre>

   Verbose Output

<pre><code>$ GIT_TRACE=1 uv pip install -v &quot;git+https://github.com/makarovdi/uplot.git@main&quot;

DEBUG uv 0.5.4 (c62c83c37 2024-11-20)
DEBUG Searching for default Python interpreter in virtual environments
DEBUG Found `cpython-3.11.10-windows-x86_64-none` at `D:\Workspace\sdk\msys2\tmp\.venv\Scripts\python.exe` (virtual environment)
DEBUG Using Python 3.11.10 environment at .venv
DEBUG Acquired lock for `.venv`
DEBUG At least one requirement is not satisfied: git+https://github.com/makarovdi/uplot.git@main
DEBUG Using request timeout of 30s
DEBUG Fetching source distribution from Git: https://github.com/makarovdi/uplot.git
DEBUG Acquired lock for `https://github.com/makarovdi/uplot`
DEBUG Updating Git source `https://github.com/makarovdi/uplot.git`
DEBUG Attempting GitHub fast path for: https://api.github.com/repos/makarovdi/uplot/commits/main
DEBUG Performing a Git fetch for: https://github.com/makarovdi/uplot.git
DEBUG reset D:\Workspace\sdk\msys2\home\dmitry\.cache\uv\git-v0\checkouts\b218c100bb0184e1\dbc97a0 to dbc97a068bb6128833a4a7cc3d1e15649a03e3c2
DEBUG Released lock at `D:\Workspace\sdk\msys2\home\dmitry\.cache\uv\git-v0\locks\b218c100bb0184e1`
DEBUG Released lock at `D:\Workspace\sdk\msys2\tmp\.venv\.lock`
error: Git operation failed
  Caused by: process didn&#x27;t exit successfully: `D:\Workspace\sdk\Git\cmd\git.exe reset --hard dbc97a068bb6128833a4a7cc3d1e15649a03e3c2` (exit code: 128)
--- stderr
21:21:37.010198 exec-cmd.c:243          trace: resolved executable dir: D:/Workspace/sdk/Git/mingw64/bin
21:21:37.025993 git.c:465               trace: built-in: git reset --hard dbc97a068bb6128833a4a7cc3d1e15649a03e3c2
21:21:37.025993 run-command.c:657       trace: run_command: &#x27;git-lfs filter-process&#x27;
21:21:37.451457 trace git-lfs: exec: git &#x27;-c&#x27; &#x27;filter.lfs.smudge=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.clean=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.process=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.required=false&#x27; &#x27;rev-parse&#x27; &#x27;--git-dir&#x27; &#x27;--show-toplevel&#x27;
21:21:37.520338 trace git-lfs: exec: git &#x27;rev-parse&#x27; &#x27;--is-bare-repository&#x27;
21:21:37.567338 trace git-lfs: exec: git &#x27;config&#x27; &#x27;--includes&#x27; &#x27;--local&#x27; &#x27;lfs.repositoryformatversion&#x27;
21:21:37.614976 trace git-lfs: exec: git &#x27;config&#x27; &#x27;--includes&#x27; &#x27;--replace-all&#x27; &#x27;lfs.repositoryformatversion&#x27; &#x27;0&#x27;
21:21:37.679131 trace git-lfs: exec: git &#x27;config&#x27; &#x27;--includes&#x27; &#x27;-l&#x27;
21:21:37.727555 trace git-lfs: exec: git &#x27;rev-parse&#x27; &#x27;--is-bare-repository&#x27;
21:21:37.784939 trace git-lfs: exec: git &#x27;config&#x27; &#x27;--includes&#x27; &#x27;-l&#x27; &#x27;--blob&#x27; &#x27;:.lfsconfig&#x27;
21:21:37.849423 trace git-lfs: exec: git &#x27;config&#x27; &#x27;--includes&#x27; &#x27;-l&#x27; &#x27;--blob&#x27; &#x27;HEAD:.lfsconfig&#x27;
21:21:37.925630 trace git-lfs: Install hook: pre-push, force=false, path=D:\Workspace\sdk\msys2\home\dmitry\.cache\uv\git-v0\checkouts\b218c100bb0184e1\dbc97a0\.git\hooks\pre-push
21:21:37.926228 trace git-lfs: Install hook: post-checkout, force=false, path=D:\Workspace\sdk\msys2\home\dmitry\.cache\uv\git-v0\checkouts\b218c100bb0184e1\dbc97a0\.git\hooks\post-checkout
21:21:37.926767 trace git-lfs: Install hook: post-commit, force=false, path=D:\Workspace\sdk\msys2\home\dmitry\.cache\uv\git-v0\checkouts\b218c100bb0184e1\dbc97a0\.git\hooks\post-commit
21:21:37.927303 trace git-lfs: Install hook: post-merge, force=false, path=D:\Workspace\sdk\msys2\home\dmitry\.cache\uv\git-v0\checkouts\b218c100bb0184e1\dbc97a0\.git\hooks\post-merge
21:21:37.927303 trace git-lfs: Initialize filter-process
21:21:37.928466 trace git-lfs: exec: git &#x27;-c&#x27; &#x27;filter.lfs.smudge=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.clean=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.process=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.required=false&#x27; &#x27;rev-parse&#x27; &#x27;HEAD&#x27; &#x27;--symbolic-full-name&#x27; &#x27;HEAD&#x27;
21:21:37.973273 trace git-lfs: Error loading current ref: Git can&#x27;t resolve ref: &quot;HEAD&quot;
21:21:37.973897 trace git-lfs: exec: git &#x27;-c&#x27; &#x27;filter.lfs.smudge=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.clean=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.process=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.required=false&#x27; &#x27;rev-parse&#x27; &#x27;--git-dir&#x27;
21:21:38.022759 trace git-lfs: exec: git &#x27;-c&#x27; &#x27;filter.lfs.smudge=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.clean=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.process=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.required=false&#x27; &#x27;remote&#x27;
21:21:38.068208 trace git-lfs: tq: running as batched queue, batch size of 100
21:21:38.069606 trace git-lfs: filepathfilter: accepting &quot;gallery/asset/hvline.png&quot;
21:21:38.071303 trace git-lfs: filepathfilter: accepting &quot;gallery/asset/legend.png&quot;
21:21:38.071832 trace git-lfs: filepathfilter: accepting &quot;gallery/asset/mpl-example.png&quot;
21:21:38.073024 trace git-lfs: filepathfilter: accepting &quot;gallery/asset/plot-3d.png&quot;
21:21:38.073597 trace git-lfs: filepathfilter: accepting &quot;gallery/asset/plot.png&quot;
21:21:38.074655 trace git-lfs: filepathfilter: accepting &quot;gallery/asset/plotly5-example.png&quot;
21:21:38.075283 trace git-lfs: filepathfilter: accepting &quot;gallery/asset/plugin.png&quot;
21:21:38.076339 trace git-lfs: filepathfilter: accepting &quot;gallery/asset/scatter-3d.png&quot;
21:21:38.076915 trace git-lfs: filepathfilter: accepting &quot;gallery/asset/scatter.png&quot;
21:21:38.077996 trace git-lfs: filepathfilter: accepting &quot;gallery/asset/surface3d.png&quot;
Updating files: 100% (54/54), done.
21:21:38.095627 trace git-lfs: tq: sending batch of size 10
21:21:38.095627 trace git-lfs: tq: starting transfer adapter &quot;lfs-standalone-file&quot;
21:21:38.097282 trace git-lfs: exec: sh &#x27;-c&#x27; &#x27;git-lfs standalone-file&#x27;
21:21:39.048814 trace git-lfs: tq: running as batched queue, batch size of 100
21:21:39.049376 trace git-lfs: filepathfilter: accepting &quot;gallery/asset/hvline.png&quot;
Downloading gallery/asset/hvline.png (184 KB)
21:21:39.049376 trace git-lfs: tq: running as batched queue, batch size of 100
21:21:39.049376 trace git-lfs: tq: sending batch of size 1
21:21:39.049376 trace git-lfs: tq: starting transfer adapter &quot;lfs-standalone-file&quot;
21:21:39.052235 trace git-lfs: exec: sh &#x27;-c&#x27; &#x27;git-lfs standalone-file&#x27;
Error downloading object: gallery/asset/hvline.png (e0ceff1): Smudge error: Error downloading gallery/asset/hvline.png (e0ceff1ec4965d6141a39c652807adde9c67d5019aff2cd7dae85390a740086c): error transferring &quot;e0ceff1ec4965d6141a39c652807adde9c67d5019aff2cd7dae85390a740086c&quot;: [0] remote missing object e0ceff1ec4965d6141a39c652807adde9c67d5019aff2cd7dae85390a740086c
21:21:40.020979 trace git-lfs: exec: git &#x27;-c&#x27; &#x27;filter.lfs.smudge=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.clean=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.process=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.required=false&#x27; &#x27;rev-parse&#x27; &#x27;--git-dir&#x27;
21:21:40.092706 trace git-lfs: exec: git &#x27;-c&#x27; &#x27;filter.lfs.smudge=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.clean=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.process=&#x27; &#x27;-c&#x27; &#x27;filter.lfs.required=false&#x27; &#x27;remote&#x27;

Errors logged to &#x27;D:\Workspace\sdk\msys2\home\dmitry\.cache\uv\git-v0\checkouts\b218c100bb0184e1\dbc97a0\.git\lfs\logs\20241126T212140.0137644.log&#x27;.
Use `git lfs logs last` to view the log.
error: external filter &#x27;git-lfs filter-process&#x27; failed
fatal: gallery/asset/hvline.png: smudge filter lfs failed
</code></pre>


Versions
<p><code>Windows 11 Pro 24H2</code>  + <code>MSYS2</code>
<code>uv 0.5.4 (c62c83c37 2024-11-20)</code></p>
Related issues
<ul>
<li>#3312 is related probably.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-26 20:22</div>
            <div class="timeline-body"><p>How does this differ from <a href="https://github.com/astral-sh/uv/issues/3312">astral-sh/uv#3312</a>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-26 20:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dimk90">@dimk90</a> on 2024-12-02 18:16</div>
            <div class="timeline-body"><blockquote>
<p>How does this differ from <a href="https://github.com/astral-sh/uv/issues/3312">#3312</a>?</p>
</blockquote>
<p>The main difference is that the original question in 3312 focused on <code>Rye</code> and <code>git2</code>.
After reading the entire discussion, I found a similar example with <code>uv pip install</code> and its output.
It seems this is a duplicate. Apologies for that - I should have read 3312 more carefully.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-02 19:28</div>
            <div class="timeline-body"><p>No problem! It happens. Thanks for looking into it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-02 19:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-02 19:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:35:47 UTC
    </footer>
</body>
</html>
