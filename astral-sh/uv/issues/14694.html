<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support for --no-sources-package when resolving - astral-sh/uv #14694</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support for --no-sources-package when resolving</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/14694">#14694</a>
        opened by <a href="https://github.com/Panacea729">@Panacea729</a>
        on 2025-07-17 21:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Panacea729">@Panacea729</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>It seems as though most of the arguments that support being applied to every package also allow package specific arguments, e.x. (--upgrade-package, --reinstall-package, --no-build-package, ...) etc. It led me to believe that intuitively there would also be a <code>--no-sources-package</code> when doing <code>uv run</code>, <code>uv sync</code>, <code>uv lock</code>, etc...</p>
<p>It seems like there was some distinction between, &quot;probably should apply to all packages&quot; (i.e. --index), and, &quot;could apply to specific packages&quot;, (e.x. <code>--upgrade-package</code>).</p>
<p>I'm not sure where that line was drawn nor does it seem to be discussed in the docs.</p>
<p>For me personally, a <code>--no-sources-package</code> argument would be useful (or even a --no-sources-group if using groups). I have a few different dependency groups that include workspace packages. In some of those groups the packages might exist locally in the workspace, and sometimes they won't. When they won't I want to sync with <code>--no-sources</code>, but now I have to split up my dependency groups into individual groups that would exist together at the same time and then use two <code>uv sync</code>s or create a bunch of <code>requirements.txt</code> files with specific directories and install those using pip.</p>
<p>If this sort of scenario was specifically excluded from workspaces (seeing as the lock file gets a bit wonky) then I don't really see a need and this can be closed. I will say that, in a setup supporting multiple different developer setups all possibly having access/containing different local dependencies in their workspace, this can be useful even though the lock file might differ from the one committed to VCS.</p>
<p>Alternatively, if there's any plans to support conditional sources based on environment variables or some other means (outside of environment markers), that would also address my issue. I know that there are issues out there to support environment variables in the pyproject.toml (like the hatch frontend, which satisfies my situation by allowing environment variables as a source as part of environments' (they don't support PEP 735) dependencies)</p>
<p>An issue that recently mentioned something similar is https://github.com/astral-sh/uv/issues/14600. Which intended to use different uv config files for different sources. This request was rejected because the intention is to keep sources in the same place as the project. Without conditional sources, in my case it requires splitting up the <code>uv sync</code> calls into two separate <code>uv sync</code> and <code>uv sync --no-sources</code>, but in other instances it could necessitate people to use the pip interface, which is not ideal.</p>
<p>Thank you.</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @Panacea729 on 2025-07-17 21:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Panacea729">@Panacea729</a> on 2025-07-17 22:15</div>
            <div class="timeline-body"><p>Oh I was completely unaware that you can differentiate sources by dependency group until I saw this comment: https://github.com/astral-sh/uv/pull/14197#issuecomment-2994205542</p>
<p>Is this somewhere in the docs? I was unable to find it anywhere. This seems to resolve my issue. I can have editable paths for one group and indexed for another group.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:32:09 UTC
    </footer>
</body>
</html>
