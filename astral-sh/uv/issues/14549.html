<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No solution found when resolving dependencies for split - astral-sh/uv #14549</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>No solution found when resolving dependencies for split</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/14549">#14549</a>
        opened by <a href="https://github.com/bra-fsn">@bra-fsn</a>
        on 2025-07-10 20:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bra-fsn">@bra-fsn</a> on 2025-07-10 20:33</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I have a strange error, which drives me mad.
<code>pip install</code> works, <code>uv pip install</code> works locally, it also works &quot;manually&quot; in a GitHub workflow environment (by entering the box and issuing the same command as the workflow step), but it fails when I try to execute it in the workflow.
About the environment:
I'm trying to set up an uv venv in a Github workflow to run pytest for a package.
To add to the mix, I'm using <a href="https://github.com/astral-sh/uv/issues/11097">this</a> feature, that is: two private registries with our proxy (which returns authenticated redirects). One of the dependencies in the tested package is in these private repos.
I don't think this is the cause of the error, just mentioning it.</p>
<p>The package to be tested is installed this way:</p>
<pre><code class="language-shell">uv venv
uv --verbose pip install $pip_args -e .[test]
</code></pre>
<p><code>$pip_args</code> contains the two extra index urls (--extra-index-url https://proxy1 --extra-index-url https://proxy2).</p>
<p>I've saved the two outputs:
https://gist.github.com/bra-fsn/f185e932e7a1ac0259f682be073f9f7d
works.txt is from a python:3.12 container
doesntwork.txt is from the github action's output</p>
<p><code>REDACTED_TESTED_PKGNAME</code> is the package name of the tested package (installed locally, so that's the <code>.</code> in <code>pip install</code>.
<code>REDACTED_DEPENDENT_LOCAL_PKG</code> is a dependency of the tested package (special because it's in a local repo, available only via the proxy)
<code>REDACTED_REPO_NAME</code> is the AWS CodeArtifact repo (where the proxy redirects local packages)</p>
<p>I've tried to put the wheel to a HTTP server instead to make sure our proxying is not the cause (but again: it works from a local container and even in the GHA workflow environment if I'm trying to install it manually) and voila, the error message has changed to this:</p>
<pre><code>DEBUG Released lock at `/home/runner/_work/package-REDACTED_TESTED_PKGNAME/package-REDACTED_TESTED_PKGNAME/.venv/.lock`
  × No solution found when resolving dependencies:
  ╰─▶ Because the requested Python version (&gt;=3.8) does not satisfy
      Python&gt;=3.9.0 and REDACTED_DEPENDENT_LOCAL_PKG==1.2.6 depends on Python&gt;=3.9.0, we can
      conclude that REDACTED_DEPENDENT_LOCAL_PKG==1.2.6 cannot be used.
      And because only REDACTED_DEPENDENT_LOCAL_PKG==1.2.6 is available, we can conclude that
      all versions of REDACTED_DEPENDENT_LOCAL_PKG cannot be used.
      And because your project depends on REDACTED_DEPENDENT_LOCAL_PKG and your project
      requires REDACTED_TESTED_PKGNAME[test], we can conclude that your project's
      requirements are unsatisfiable.

      hint: The `requires-python` value (&gt;=3.8) includes Python versions that
      are not supported by your dependencies (e.g., REDACTED_DEPENDENT_LOCAL_PKG==1.2.6 only
      supports &gt;=3.9.0). Consider using a more restrictive `requires-python`
      value (like &gt;=3.9.0).
</code></pre>
<p>So <code>REDACTED_TESTED_PKGNAME</code> has <code>requires-python = &quot;&gt;=3.8&quot;</code> in its <code>pyproject.toml</code> file, while <code>REDACTED_DEPENDENT_LOCAL_PKG</code> has <code>python_requires=&quot;&gt;=3.9.0&quot;</code> in its <code>setup.py</code>.</p>
<p>(sorry, I just noticed that <code>DEPENDENT</code> should be <code>DEPENDENCY</code>, as it's the dependency of the <code>TESTED_PKGNAME</code>)</p>
<p>If I change <code>3.8</code> to <code>3.9</code>, the github version starts to work.
I'm puzzled:</p>
<ol>
<li>why doesn't uv prints this clear error message if I have the package name (from a private repo, so coming from an --extra-index-url)</li>
<li>why does it work in two places and doesn't in the automated github workflow?</li>
<li>is this a real error on python 3.12? A package to be installed requires &gt;=3.8, one of its dependencies need &gt;=3.9. I would assume this is just fine.</li>
</ol>
<h3>Platform</h3>
<p>Ubuntu 24.04 amd64</p>
<h3>Version</h3>
<p>0.7.20</p>
<h3>Python version</h3>
<p>3.12.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @bra-fsn on 2025-07-10 20:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-07-12 12:10</div>
            <div class="timeline-body"><p>Are you running <code>uv lock</code>, or <code>uv sync</code>, or <code>uv run</code> somewhere? That error message suggests we're performing a universal solve, which would be the case for those commands, but not for <code>uv pip install</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bra-fsn">@bra-fsn</a> on 2025-07-12 13:35</div>
            <div class="timeline-body"><blockquote>
<p>Are you running <code>uv lock</code>, or <code>uv sync</code>, or <code>uv run</code> somewhere? That error message suggests we're performing a universal solve, which would be the case for those commands, but not for <code>uv pip install</code>.</p>
</blockquote>
<p>No, only <code>uv venv</code> and then <code>uv pip install</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-07-12 15:08</div>
            <div class="timeline-body"><p>Can you share the full verbose logs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bra-fsn">@bra-fsn</a> on 2025-07-12 16:56</div>
            <div class="timeline-body"><blockquote>
<p>Can you share the full verbose logs?</p>
</blockquote>
<p>This should be the full one. (https://gist.githubusercontent.com/bra-fsn/f185e932e7a1ac0259f682be073f9f7d/raw/c3aced392cde9c62f39306aac909cbeb8c05b6fc/doesntwork.txt)
Can you see something that is missing? I've downloaded it straight from github.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:35:52 UTC
    </footer>
</body>
</html>
