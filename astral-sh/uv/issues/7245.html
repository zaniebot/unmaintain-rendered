<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questions: Migrating from poetry - astral-sh/uv #7245</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Questions: Migrating from poetry</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7245">#7245</a>
        opened by <a href="https://github.com/EdgyEdgemond">@EdgyEdgemond</a>
        on 2024-09-10 08:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/EdgyEdgemond">@EdgyEdgemond</a></div>
            <div class="timeline-body"><p>I came here looking for information on <code>poetry env info</code> but found another comment on a closed issue that covered a few other points. So I hijacked that comment.</p>
<p><em>Originally posted by @mikeleppane in https://github.com/astral-sh/uv/issues/6668#issuecomment-2311845394</em></p>
<p>After using Poetry for years, I've decided to try uv. And it's great üëè. Here are some thoughts I had while using uv. Some of these may have been discussed already.</p>
<ul>
<li>export only dev-dependencies from uv.lock to requirements-dev.txt (this is useful at least in the CI); <em>poetry export --without-hashes --without-urls  --only=dev -o requirements-dev.txt</em></li>
<li><em>uv sync/pip install</em> only dev-dependencies (like above useful in the CI)</li>
<li>show the latest version but only for outdated packages; <em>poetry show --outdated</em> / <em>poetry show --outdated --only=dev</em> has been useful.</li>
<li>how do get info about the current virtual env? E.g. Poetry has <em>poetry env info</em> command to display info about current env</li>
<li>is it possible to only update dev-dependencies like <em>poetry update --only=dev</em>?</li>
</ul>
<p>Thanks!</p>
<p><em>Originally posted by @mikeleppane in https://github.com/astral-sh/uv/issues/6668#issuecomment-2311845394</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/EdgyEdgemond">@EdgyEdgemond</a> on 2024-09-10 13:18</div>
            <div class="timeline-body"><p>to add to this, I can see how to do forks in resolving dependencies, and adding sources. Is the following case covered in <code>uv</code> currently?</p>
<pre><code> 
[tool.poetry.dependencies]
torch = [
    { markers = &quot;sys_platform == 'darwin' and platform_machine == 'arm64'&quot;, url = &quot;https://download.pytorch.org/whl/cpu/torch-2.0.1-cp310-none-macosx_11_0_arm64.whl&quot; },
    { markers = &quot;sys_platform == 'darwin' and platform_machine == 'x86_64'&quot;, url = &quot;https://download.pytorch.org/whl/cpu/torch-2.0.1-cp310-none-macosx_10_9_x86_64.whl&quot; },
    { platform = &quot;linux&quot;, version = &quot;=2.0.1&quot;, source = &quot;pytorch-cpu&quot; },
]

[[tool.poetry.source]]
name = &quot;pytorch-cpu&quot;
url = &quot;https://download.pytorch.org/whl/cpu&quot;
priority = &quot;explicit&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-10 13:42</div>
            <div class="timeline-body"><p>A lot of different questions here but I'll try to answer them:</p>
<blockquote>
<p>export only dev-dependencies from uv.lock to requirements-dev.txt (this is useful at least in the CI); poetry export --without-hashes --without-urls --only=dev -o requirements-dev.txt</p>
</blockquote>
<blockquote>
<p>uv sync/pip install only dev-dependencies (like above useful in the CI)</p>
</blockquote>
<p>These don't exist right now, see #6472.</p>
<blockquote>
<p>show the latest version but only for outdated packages; poetry show --outdated / poetry show --outdated --only=dev has been useful.</p>
</blockquote>
<p><code>--outdated</code> isn't supported yet, see https://github.com/astral-sh/uv/issues/2150.</p>
<blockquote>
<p>how do get info about the current virtual env? E.g. Poetry has poetry env info command to display info about current env</p>
</blockquote>
<p>We intentionally don't support using an arbitrary virtual environment for the uv &quot;project&quot; APIs (<code>uv sync</code>, <code>uv lock</code>, etc.), it also lives in <code>.venv</code>. What information would you want here?</p>
<blockquote>
<p>is it possible to only update dev-dependencies like poetry update --only=dev?</p>
</blockquote>
<p>Same thing, we don't support this kind of only-dev workflow right now.</p>
<blockquote>
<p>to add to this, I can see how to do forks in resolving dependencies, and adding sources. Is the following case covered in uv currently?</p>
</blockquote>
<p>You can accomplish this without <code>tool.uv.sources</code>, i.e., using only standards-compliant metadata, but <code>tool.uv.sources</code> doesn't support a list like that right now (see https://github.com/astral-sh/uv/issues/3397):</p>
<pre><code class="language-toml">[project]
dependencies = [
    &quot;torch @ https://download.pytorch.org/whl/cpu/torch-2.0.1-cp310-none-macosx_11_0_arm64.whl ; sys_platform == 'darwin' and platform_machine == 'arm64'&quot;,
    &quot;torch @ https://download.pytorch.org/whl/cpu/torch-2.0.1-cp310-none-macosx_10_9_x86_64.whl ; sys_platform == 'darwin' and platform_machine == 'x86_64'&quot;,
    &quot;torch==2.0.1 ; sys_platform != 'darwin' or platform_machine != 'arm64' or platform_machine != 'x86_64'&quot;
]
</code></pre>
<p>Then you'd set <code>https://download.pytorch.org/whl/cpu</code> as your <code>extra-index-url</code>.</p>
<p>That last feature (<code>explicit</code> pinning) is tracked in #171.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-09-10 13:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/EdgyEdgemond">@EdgyEdgemond</a> on 2024-09-10 14:17</div>
            <div class="timeline-body"><p>-edit- Just rereading your response, are you saying it <em>always</em> lives in <code>.venv</code>, if so I am happy to move forward with that assumption -/edit-</p>
<p>Thanks for the prompt response @charliermarsh</p>
<p>In terms of <code>poetry env info</code> it is used to determine where the venv is currently located (if in project, in a poetry directory etc.) So that the location can be used dynamically in a script without knowing what the current dev did in their poetry/uv setup etc.</p>
<p>This is the one that I am most interested in &quot;location of current venv&quot;</p>
<pre><code>&gt;&gt; poetry env info -p
/home/edgy/code/test-uv/.venv
</code></pre>
<p>Example of full output</p>
<pre><code>&gt;&gt; poetry env info

Virtualenv
Python:         3.12.4
Implementation: CPython
Path:           /home/edgy/code/test-uv/.venv
Executable:     /home/edgy/code/test-uv/.venv/bin/python
Valid:          True

Base
Platform:   linux
OS:         posix
Python:     3.12.4
Path:       /usr
Executable: /usr/bin/python3.12
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/EdgyEdgemond">@EdgyEdgemond</a> on 2024-09-10 14:19</div>
            <div class="timeline-body"><p>In terms of my torch question, it looks like <code>find-links</code> might have been what I was after. Have yet to confirm with a colleague on a mac that it is working, but the following #worksonmymachine and is a lot simpler.</p>
<pre><code>dependencies = [
    &quot;torch == 2.0.1+cpu&quot;,
]

[tool.uv]
find-links = [&quot;https://download.pytorch.org/whl/torch_stable.html&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/EdgyEdgemond">@EdgyEdgemond</a> on 2024-09-10 14:20</div>
            <div class="timeline-body"><p>@mikeleppane some answers to some of your questions as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @EdgyEdgemond on 2024-09-11 09:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:27:01 UTC
    </footer>
</body>
</html>
