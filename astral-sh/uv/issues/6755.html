<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confusing error message when project directory is changed - astral-sh/uv #6755</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Confusing error message when project directory is changed</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/6755">#6755</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-08-28 15:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>e.g.</p>
<pre><code>$ uv init uv-example-flask
$ uv --directory uv-example-flask add flask
$ mv uv-example-flask uv-flask-example
$ cd uv-flask-example
$ uv run -v flask
DEBUG uv 0.3.5
DEBUG Found project root: `/Users/zb/workspace/uv-flask-example`
DEBUG No workspace root found, using project root
DEBUG Discovered project `uv-example-flask` at: /Users/zb/workspace/uv-flask-example
DEBUG The virtual environment's Python version satisfies `Python &gt;=3.11`
DEBUG Using request timeout of 30s
DEBUG Acquired lock for `/Users/zb/.cache/uv/built-wheels-v3/path/c88ead026f48e749`
DEBUG Found static `pyproject.toml` for: uv-example-flask @ file:///Users/zb/workspace/uv-flask-example
DEBUG No workspace root found, using project root
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 9 packages in 3ms
DEBUG Using request timeout of 30s
DEBUG Requirement already installed: blinker==1.8.2
DEBUG Requirement already installed: click==8.1.7
DEBUG Requirement already installed: flask==3.0.3
DEBUG Requirement already installed: itsdangerous==2.2.0
DEBUG Requirement already installed: jinja2==3.1.4
DEBUG Requirement already installed: markupsafe==2.1.5
DEBUG Requirement already installed: werkzeug==3.0.4
Audited 7 packages in 0.08ms
DEBUG Using Python 3.11.7 interpreter at: /Users/zb/workspace/uv-flask-example/.venv/bin/python3
DEBUG Running `flask`
error: Failed to spawn: `flask`
  Caused by: No such file or directory (os error 2)
$ /Users/zb/workspace/uv-flask-example/.venv/bin/flask
zsh: /Users/zb/workspace/uv-flask-example/.venv/bin/flask: bad interpreter: /Users/zb/workspace/uv-example-flask/.venv/bin/python: no such file or directory
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @zanieb on 2024-08-28 15:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">projects</span> added by @zanieb on 2024-08-28 15:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-28 15:16</div>
            <div class="timeline-body"><p>I think it'd be interesting to consider using relocatable venvs in the project API. It would solve this problem entirely and be a lot more intuitive for users IMO.</p>
<p>The main downside is that copying a script out of an environment would <em>not</em> work, since that script would contain a relative path. But we support that with <code>uv tool</code>, or you can use <code>uv venv</code> etc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-28 15:24</div>
            <div class="timeline-body"><p>Yeah basically agree we should change the default.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/michaeloliverx">@michaeloliverx</a> on 2024-09-06 09:07</div>
            <div class="timeline-body"><p>I am getting this error in my CI environment, how do I fix it?</p>
<pre><code>$ curl -LsSf https://astral.sh/uv/install.sh | sh
downloading uv 0.4.6 x86_64-unknown-linux-gnu
installing to /root/.cargo/bin
  uv
  uvx
everything's installed!
To add $HOME/.cargo/bin to your PATH, either restart your shell or run:
    source $HOME/.cargo/env (sh, bash, zsh)
    source $HOME/.cargo/env.fish (fish)
$ source $HOME/.cargo/env
$ uv --version
uv 0.4.6
$ uv sync --verbose
DEBUG uv 0.4.6
DEBUG Found project root: `/var/www/builds/biorelate/apps/galactic-api`
DEBUG No workspace root found, using project root
DEBUG Searching for Python &gt;=3.11 in managed installations or system path
DEBUG Searching for managed installations at `/root/.local/share/uv/python`
DEBUG Found `cpython-3.11.2-linux-x86_64-gnu` at `/usr/local/bin/python3` (search path)
Using Python 3.11.2 interpreter at: /usr/local/bin/python3
Creating virtualenv at: .venv
DEBUG Using request timeout of [30](https://gitlab.com/biorelate/apps/galactic-api/-/jobs/7761728283#L30)s
DEBUG Acquired lock for `/var/www/builds/biorelate/apps/galactic-api/.cache/uv/built-wheels-v3/editable/3be25bafd0800626`
DEBUG Found static `pyproject.toml` for: galactic-api @ file:///var/www/builds/biorelate/apps/galactic-api
DEBUG No workspace root found, using project root
DEBUG Released lock at `/var/www/builds/biorelate/apps/galactic-api/.cache/uv/built-wheels-v3/editable/3be25bafd0800626/.lock`
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 109 packages in 2ms
DEBUG Using request timeout of 30s
DEBUG Identified uncached requirement: aiohttp==3.9.3
... &lt;snip&gt;
Audited 85 packages in 0.43ms
DEBUG Using Python 3.11.2 interpreter at: /var/www/builds/biorelate/apps/galactic-api/.venv/bin/python3
DEBUG Running `mypy .`
error: Failed to spawn: `mypy`
  Caused by: No such file or directory (os error 2)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-06 13:25</div>
            <div class="timeline-body"><p>@michaeloliverx please open a new issue and include the full logs.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:26:37 UTC
    </footer>
</body>
</html>
