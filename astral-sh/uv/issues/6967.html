<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv can't find commands within virtualenv until executed once with uv run &lt;command&gt; - astral-sh/uv #6967</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv can't find commands within virtualenv until executed once with uv run <command></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6967">#6967</a>
        opened by <a href="https://github.com/klaytron">@klaytron</a>
        on 2024-09-03 12:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/klaytron">@klaytron</a> on 2024-09-03 12:43</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>When invoking a command (.e.g. <code>pytest</code>) within a uv venv, the command is not found until first run with the explicit <code>uv run &lt;command&gt;</code> one time, at which point the package installations take place, and running commands with the venv without <code>uv run</code> works.</p>
<p>DESIRED: package installations already take place upon creating or entering the venv.</p>
<pre><code>$ curl -LsSf https://astral.sh/uv/install.sh | sh
downloading uv 0.4.3 x86_64-unknown-linux-gnu
installing to /home/clayton/.cargo/bin
  uv
  uvx
everything's installed!

$ uv sync --frozen
Audited 94 packages in 0.19ms

$ uv venv
Using Python 3.12.3 interpreter at: /usr/bin/python3
Creating virtualenv at: .venv
Activate with: source .venv/bin/activate
$ source .venv/bin/activate

(venv) $ pytest
Command 'pytest' not found, but can be installed with:
sudo apt install python3-pytest

(venv) $ uv run pytest
Installed 94 packages in 41ms
# pytest output

(venv) $ pytest
# pytest output
</code></pre>
<p>platform linux -- Python 3.12.3
uv 0.4.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-03 12:49</div>
            <div class="timeline-body"><p><code>uv venv</code> replaces the virtual environment that was created by <code>uv sync</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-09-03 12:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-03 12:50</div>
            <div class="timeline-body"><p>(You should remove <code>uv venv</code> from the above and just activate it.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/klaytron">@klaytron</a> on 2024-09-03 12:53</div>
            <div class="timeline-body"><p>thank you for quick reply!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @klaytron on 2024-09-03 12:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:41 UTC
    </footer>
</body>
</html>
