<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>panic when trying to `pip-compile scripts/benchmarks/requirements/pydantic.in` for the second time - astral-sh/uv #360</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>panic when trying to <code>pip-compile scripts/benchmarks/requirements/pydantic.in</code> for the second time</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/360">#360</a>
        opened by <a href="https://github.com/BurntSushi">@BurntSushi</a>
        on 2023-11-07 18:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BurntSushi">@BurntSushi</a></div>
            <div class="timeline-body"><p>To reproduce:</p>
<pre><code>$ git rev-parse HEAD
294955ecffe9441248e467083e0414150b726865
$ virtualenv ve
$ . ve/bin/activate
$ cargo run -p puffin-cli -- pip-compile ./scripts/benchmarks/requirements/pydantic.in
[.. snip ..]
    Finished dev [unoptimized + debuginfo] target(s) in 23.37s
     Running `target/debug/puffin pip-compile ./scripts/benchmarks/requirements/pydantic.in`
Updated https://github.com/pydantic/pydantic-extra-types.git (a973b79)
Updated https://github.com/jimporter/mike.git (076a4af)
Built mike @ git+https://github.com/jimporter/mike.git@076a4af3270a448f6aeb880c9c6c2fc0d80f603f
Built pydantic-extra-types @ git+https://github.com/pydantic/pydantic-extra-types.git@a973b7942112df731e2618336e55e3343a2e1c32
Resolved 84 packages in 3.61s
# This file was autogenerated by Puffin v0.0.1 via the following command:
#    target/debug/puffin pip-compile ./scripts/benchmarks/requirements/pydantic.in
annotated-types==0.6.0
    # via pydantic
ansi2html==1.8.0
asttokens==2.4.1
    # via devtools
[.. snip ..]
$ cargo run -p puffin-cli -- pip-compile ./scripts/benchmarks/requirements/pydantic.in
    Finished dev [unoptimized + debuginfo] target(s) in 0.08s
     Running `target/debug/puffin pip-compile ./scripts/benchmarks/requirements/pydantic.in`
Updated https://github.com/jimporter/mike.git (076a4af)
Updating https://github.com/pydantic/pydantic-extra-types.git (main)
та╝ Resolving dependencies...                                                                                                                                                                thread &#x27;tokio-runtime-worker&#x27; panicked at crates/puffin-cli/src/commands/reporters.rs:300:29:
removal index (is 1) should be &lt; len (is 1)
Updating https://github.com/pydantic/pydantic-extra-types.git (main)
Building mike @ git+https://github.com/jimporter/mike.git@076a4af3270a448f6aeb880c9c6c2fc0d80f603f
таж Resolving dependencies...                                                                                                                                                                thread &#x27;main&#x27; panicked at crates/puffin-cli/src/commands/reporters.rs:263:41:
called `Result::unwrap()` on an `Err` value: PoisonError { .. }
</code></pre>
<p>Notice that I ran <code>cargo run -p puffin-cli -- pip-compile ./scripts/benchmarks/requirements/pydantic.in</code> twice. The first time seems to have succeeded, but the second one panics.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-07 18:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone &quot;Feature complete&quot; by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-07 18:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-07 18:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-07 18:55</div>
            <div class="timeline-body"><p>Thanks for filing, very clear issue. Fixed in #362.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-07 18:58</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:28:57 UTC
    </footer>
</body>
</html>
