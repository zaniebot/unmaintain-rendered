<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>handle same package for production(versioned) and development (editable) - astral-sh/uv #17073</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>handle same package for production(versioned) and development (editable)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/17073">#17073</a>
        opened by <a href="https://github.com/donniedarko-zen">@donniedarko-zen</a>
        on 2025-12-10 15:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/donniedarko-zen">@donniedarko-zen</a> on 2025-12-10 15:07</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I am trying to handle two different environments using uv:</p>
<ul>
<li>Production environment → uses a <strong>versioned dependency</strong> from a private package index (e.g., CodeArtifact)</li>
<li>Local development environment → uses an <strong>editable version of the same private package</strong> from a local path
At the same time, I want local development to automatically use the editable local path version of that same package. Currently, uv always requires explicit flags to choose between these two setups, and exporting without options does not include the production dependency.</li>
</ul>
<p>I want to be able to run:
<code>uv export --no-dev -o requirements.txt</code>
and get a production-ready requirements.txt that includes the versioned package, without needing to pass any extra flags.</p>
<p>what is the recommended uv workflow for cleanly separating:</p>
<ol>
<li>production versioned dependencies, and</li>
<li>local editable dependencies,
when both refer to a package with the same name?</li>
</ol>
<hr />
<p>The ideal would be like :</p>
<pre><code class="language-Pyproject">[project]
name = &quot;my-repo&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.11&quot;
dependencies = [
    &quot;shapely==2.0.4&quot;,
    &quot;brain==0.11.100&quot;,
]

[dependency-groups]
dev = [
    &quot;brain&quot;,
    &quot;pytest&gt;=9.0.1&quot;,
]

[tool.uv.sources]
brain= { path = &quot;../brain&quot;, editable = true, group='dev'}
</code></pre>
<p>So once I do <code>uv export --no-dev -o requirements.txt</code> , the dev dependencies will be excluded and only the versioned <code>brain</code> will be exported with other packages. (<code>shapely</code> will be included and <code>pytest</code> will be excluded)</p>
<hr />
<p>I used <code>[dependency-groups]</code> and resolved the <a href="https://docs.astral.sh/uv/concepts/projects/config/#conflicting-dependencies">conflicts</a> in the <code>pyproject.toml</code> file. However, both production and development environments are created under <code>[package.dev-dependencies]</code> in the lock file. This doesn't seem right, because the production packages shouldn't be under the dev dependencies.</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p>uv 0.9.13</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @donniedarko-zen on 2025-12-10 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-11 10:01</div>
            <div class="timeline-body"><p>Does <code>uv export --no-sources</code> work for your case? It's not intended for that, but it may just work here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/donniedarko-zen">@donniedarko-zen</a> on 2025-12-19 08:43</div>
            <div class="timeline-body"><blockquote>
<p>Does <code>uv export --no-sources</code> work for your case? It's not intended for that, but it may just work here.</p>
</blockquote>
<p>Thank you, it seems like this is what I need to use with the above <code>pyproject.toml</code> file.
<code>uv export ---no-sources -o requirements.txt</code> gives the expected <code>requirements.txt</code> file without any editable versions and dev-group.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @donniedarko-zen on 2025-12-19 08:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:15 UTC
    </footer>
</body>
</html>
