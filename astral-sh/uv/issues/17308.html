<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unknown field `python-version` when parsing pyproject.toml in non-workspaced subdirectory of a monorepo - astral-sh/uv #17308</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>unknown field <code>python-version</code> when parsing pyproject.toml in non-workspaced subdirectory of a monorepo</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/17308">#17308</a>
        opened by <a href="https://github.com/btakita">@btakita</a>
        on 2026-01-02 19:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/btakita">@btakita</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>When I run uv in a subdirectory of a monorepo root...where the subdirectory is not included as a workspace member...uv is unable to parse pyproject.toml.</p>
<p>Here is the relevant section:</p>
<pre><code>[tool.uv]
default-groups = [&quot;dev&quot;, &quot;test&quot;]
python-preference = &quot;only-managed&quot;
python-version = &quot;3.13&quot;
package = false
</code></pre>
<p>And the error:</p>
<pre><code>‚ùØ uv venv .venv --clear
zsh: correct venv to .venv [nyae]? n
warning: Failed to parse `pyproject.toml` during settings discovery:
  TOML parse error at line 95, column 1
     |
  95 | python-version = &quot;3.13&quot;
     | ^^^^^^^^^^^^^^
  unknown field `python-version`, expected one of `required-version`, `native-tls`, `offline`, `no-cache`, `cache-dir`, `preview`, `python-preference`, `python-downloads`, `concurrent-downloads`, `concurrent-builds`, `concurrent-installs`, `index`, `index-url`, `extra-index-url`, `no-index`, `find-links`, `index-strategy`, `keyring-provider`, `allow-insecure-host`, `resolution`, `prerelease`, `fork-strategy`, `dependency-metadata`, `config-settings`, `config-settings-package`, `no-build-isolation`, `no-build-isolation-package`, `extra-build-dependencies`, `extra-build-variables`, `exclude-newer`, `exclude-newer-package`, `link-mode`, `compile-bytecode`, `no-sources`, `upgrade`, `upgrade-package`, `reinstall`, `reinstall-package`, `no-build`, `no-build-package`, `no-binary`, `no-binary-package`, `torch-backend`, `python-install-mirror`, `pypy-install-mirror`, `python-downloads-json-url`, `publish-url`, `trusted-publishing`, `check-url`, `add-bounds`, `pip`, `cache-keys`, `override-dependencies`, `exclude-dependencies`, `constraint-dependencies`, `build-constraint-dependencies`, `environments`, `required-environments`, `conflicts`, `workspace`, `sources`, `managed`, `package`, `default-groups`, `dependency-groups`, `dev-dependencies`, `build-backend`

Using CPython 3.13.11
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
</code></pre>
<p>If I add the directory as a workspace, the error does not occur.</p>
<h3>Platform</h3>
<p>Linux 6.18.2-3-cachyos x86_64 unknown</p>
<h3>Version</h3>
<p>uv 0.9.21 (0dc9556ad 2025-12-30)</p>
<h3>Python version</h3>
<p>Using CPython 3.13.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @btakita on 2026-01-02 19:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "unknown field `python-version` when parsing pyproject.toml" to "unknown field `python-version` when parsing pyproject.toml in non-workspaced subdirectory of a monorepo" by @btakita on 2026-01-02 19:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/turtleDev">@turtleDev</a> on 2026-01-04 09:26</div>
            <div class="timeline-body"><p>https://docs.astral.sh/uv/reference/settings/#pip_python-platform</p>
<p>According to the reference, <code>python-version</code> needs to be specified under <code>[tool.uv.pip]</code></p>
<p>Would you be able to create a reproduction for this bug so we could analyze the problem further?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2026-01-05 22:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2026-01-05 22:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @charliermarsh on 2026-01-05 22:59</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:33:46 UTC
    </footer>
</body>
</html>
