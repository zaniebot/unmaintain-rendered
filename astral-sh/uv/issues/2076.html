<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support paths with spaces in launchers - astral-sh/uv #2076</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support paths with spaces in launchers</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2076">#2076</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-02-29 09:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/konstin">@konstin</a> on 2024-02-29 09:00</div>
            <div class="timeline-body"><p>See https://github.com/astral-sh/uv/issues/1997#issuecomment-1970091076</p>
<p>When creating a new launcher, we insert the path to the python interpreter as shebang. This fails if there is a space in the path:</p>
<pre><code class="language-python">#!/Users/ferris/my python project/.venv/bin/python
# -*- coding: utf-8 -*-
import re
import sys
from launchable import main
if __name__ == &quot;__main__&quot;:
    sys.argv[0] = re.sub(r&quot;(-script\.pyw|\.exe)?$&quot;, &quot;&quot;, sys.argv[0])
    sys.exit(main())
</code></pre>
<p>The system tries to execute this as <code>/Users/ferris/my</code> with arguments <code>python</code> and <code>project/venv/bin/python</code>. We should instead use the same workaround as pip when there's a space in the path:</p>
<pre><code class="language-python">#!/bin/sh
'''exec' &quot;/Users/ferris/my python project/.venv/bin/python&quot; &quot;$0&quot; &quot;$@&quot;
' '''
# -*- coding: utf-8 -*-
import re
import sys
from launchable import main
if __name__ == &quot;__main__&quot;:
    sys.argv[0] = re.sub(r&quot;(-script\.pyw|\.exe)?$&quot;, &quot;&quot;, sys.argv[0])
    sys.exit(main())
</code></pre>
<p>pip reference code: https://github.com/pypa/pip/blob/0ad4c94be74cc24874c6feb5bb3c2152c398a18e/src/pip/_vendor/distlib/scripts.py#L136-L165</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @konstin on 2024-02-29 09:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @konstin on 2024-02-29 09:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-29 18:58</div>
            <div class="timeline-body"><p>I can grab this one later if no one gets to it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-02-29 21:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pradyunsg">@pradyunsg</a> on 2024-02-29 21:21</div>
            <div class="timeline-body"><p>FYI: https://github.com/pradyunsg/installer/blob/d01624e5f20963f046e67d58f5319e21a07aa03e/src/installer/scripts.py#L54</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-29 21:25</div>
            <div class="timeline-body"><p>Nice, thank you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2097.html">astral-sh/uv#2097</a> on 2024-02-29 21:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-02-29 23:19</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:24 UTC
    </footer>
</body>
</html>
