<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>docker build hangs, can't build image for uv locally - astral-sh/uv #8974</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>docker build hangs, can't build image for uv locally</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8974">#8974</a>
        opened by <a href="https://github.com/shaneikennedy">@shaneikennedy</a>
        on 2024-11-09 15:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/shaneikennedy">@shaneikennedy</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<pre><code>uv git:main*
‚ùØ docker build . -t myuv --load
[+] Building 992.6s (16/18)                                    docker:desktop-linux
 =&gt; [internal] load build definition from Dockerfile                           0.0s
 =&gt; =&gt; transferring dockerfile: 1.54kB                                         0.0s
 =&gt; [internal] load metadata for docker.io/library/ubuntu:latest               1.8s
 =&gt; [internal] load .dockerignore                                              0.0s
 =&gt; =&gt; transferring context: 2B                                                0.0s
 =&gt; [ 1/14] FROM docker.io/library/ubuntu:latest@sha256:99c35190e22d294cdace2  0.0s
 =&gt; [internal] load build context                                              0.1s
 =&gt; =&gt; transferring context: 2.08MB                                            0.1s
 =&gt; CACHED [ 2/14] WORKDIR /root                                               0.0s
 =&gt; CACHED [ 3/14] RUN apt update   &amp;&amp; apt install -y --no-install-recommends  0.0s
 =&gt; CACHED [ 4/14] RUN python3 -m venv /root/.venv                             0.0s
 =&gt; CACHED [ 5/14] RUN .venv/bin/pip install cargo-zigbuild                    0.0s
 =&gt; CACHED [ 6/14] RUN case &quot;linux/arm64&quot; in   &quot;linux/arm64&quot;) echo &quot;aarch64-u  0.0s
 =&gt; CACHED [ 7/14] COPY rust-toolchain.toml rust-toolchain.toml                0.0s
 =&gt; CACHED [ 8/14] RUN curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup  0.0s
 =&gt; CACHED [ 9/14] RUN rustup target add $(cat rust_target.txt)                0.0s
 =&gt; [10/14] COPY crates crates                                                 0.2s
 =&gt; [11/14] COPY ./Cargo.toml Cargo.toml                                       0.0s
 =&gt; [12/14] COPY ./Cargo.lock Cargo.lock                                       0.0s
 =&gt; [13/14] RUN cargo zigbuild --bin uv --bin uvx --target $(cat rust_targe  990.3s
 =&gt; =&gt; #    Compiling uv-tool v0.0.1 (/root/crates/uv-tool)
 =&gt; =&gt; #    Compiling uv-scripts v0.0.1 (/root/crates/uv-scripts)
 =&gt; =&gt; #    Compiling tikv-jemallocator v0.6.0
 =&gt; =&gt; #    Compiling uv-performance-memory-allocator v0.1.0 (/root/crates/uv-perfo
 =&gt; =&gt; # rmance-memory-allocator)
 =&gt; =&gt; #    Compiling uv v0.5.1 (/root/crates/uv)
ERROR: failed to solve: Canceled: context canceled
uv git:main*  999s
‚ùØ 
</code></pre>
<p>building the image locally hangs forever and never succeeds. This was working yesterday on possibly a very stale branch... don't rememeber how stale though unfortunately :/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-09 16:10</div>
            <div class="timeline-body"><p>We build these images for every release, so it should be working. Perhaps the problem has something to do with your platform?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-11-09 16:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2024-11-09 17:10</div>
            <div class="timeline-body"><p>Is this on linux?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/shaneikennedy">@shaneikennedy</a> on 2024-11-09 20:21</div>
            <div class="timeline-body"><p>This was on Mac,i tried on another laptop and the image builds, must be something on my work machine, sorry for the waste üëé</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @shaneikennedy on 2024-11-09 20:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:28:15 UTC
    </footer>
</body>
</html>
