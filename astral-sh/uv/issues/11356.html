<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv run jupyter contrib nbextension install --user` fails on a fresh install - astral-sh/uv #11356</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv run jupyter contrib nbextension install --user</code> fails on a fresh install</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11356">#11356</a>
        opened by <a href="https://github.com/laowantong">@laowantong</a>
        on 2025-02-09 15:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/laowantong">@laowantong</a> on 2025-02-09 15:11</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I have a new machine on which I try to make a clean install of all my Python stuff. I am new to the <code>uv</code> revolution ;)</p>
<p>Installing Jupyter with <code>uv</code> and launching a notebook works fine, but I cannot complete the installation of its nbextensions.</p>
<h3>To reproduce the issue</h3>
<pre><code class="language-shell">% mkdir test
% cd test
% uv init
% uv add jupyter jupyter_contrib_nbextensions
% uv run jupyter contrib nbextension install --user
</code></pre>
<p>The last command fails with <code>ModuleNotFoundError: No module named 'notebook.nbextensions'</code></p>
<p>Full output <a href="https://gist.github.com/laowantong/329d63d19da700272e7e15fdbeb3530a">here</a>.</p>
<p><strong>Note.</strong> Someone has succeeded with the same steps <a href="https://jupyter-tutorial.readthedocs.io/de/latest/nbextensions/install.html">here</a>.</p>
<h3>Platform</h3>
<p>macOS Sequoia 15.3 Mac mini M4</p>
<h3>Version</h3>
<p>uv 0.5.26 (5ef3d5139 2025-01-30)</p>
<h3>Python version</h3>
<p>Python 3.13.1</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @laowantong on 2025-02-09 15:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-09 18:15</div>
            <div class="timeline-body"><p>It seems like there's an incompatibility between <code>notebook</code> and <code>jupyter</code> that isn't captured by the versioned requirements? I ran <code>uv add notebook==6.4.12</code> before your <code>uv run</code> command and it seemed to work as expected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2025-02-09 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2025-02-09 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/laowantong">@laowantong</a> on 2025-02-09 18:29</div>
            <div class="timeline-body"><p>Thank you very much, that made it work. But after that, when I try to launch:</p>
<pre><code>uv run jupyter notebook
</code></pre>
<p>I get <code>ModuleNotFoundError: No module named 'jupyter_server.contents'</code></p>
<details><summary>Full output</summary>

<pre>
Traceback (most recent call last):
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/notebook/traittypes.py", line 235, in _resolve_classes
    klass = self._resolve_string(klass)
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/traitlets.py", line 2015, in _resolve_string
    return import_item(string)
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/utils/importstring.py", line 33, in import_item
    module = __import__(package, fromlist=[obj])
ModuleNotFoundError: No module named 'jupyter_server.contents'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/aristide/Downloads/test/.venv/bin/jupyter-notebook", line 10, in <module>
    sys.exit(main())
             ~~~~^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/jupyter_core/application.py", line 283, in launch_instance
    super().launch_instance(argv=argv, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/config/application.py", line 1073, in launch_instance
    app = cls.instance(**kwargs)
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/config/configurable.py", line 583, in instance
    inst = cls(*args, **kwargs)
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/traitlets.py", line 1292, in __new__
    inst.setup_instance(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/traitlets.py", line 1335, in setup_instance
    super(HasTraits, self).setup_instance(*args, **kwargs)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/traitlets/traitlets.py", line 1311, in setup_instance
    init(self)
    ~~~~^^^^^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/notebook/traittypes.py", line 226, in instance_init
    self._resolve_classes()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/aristide/Downloads/test/.venv/lib/python3.13/site-packages/notebook/traittypes.py", line 238, in _resolve_classes
    warn(f"{klass} is not importable. Is it installed?", ImportWarning)
    ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: warn() missing 1 required keyword-only argument: 'stacklevel'
</pre>

</details>

<p><code>uv add jupyter_server</code> doesn't solve the problem. I am lost...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-10 00:58</div>
            <div class="timeline-body"><p>I don't really know why these things are incompatible -- it seems like a problem with the packages themselves -- but this works:</p>
<pre><code>uv add jupyter jupyter_contrib_nbextensions notebook==6.4.12 traitlets==5.9.0
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/laowantong">@laowantong</a> on 2025-02-10 07:19</div>
            <div class="timeline-body"><p>Yes, it works, sort of...</p>
<pre><code>mkdir test
cd test
uv init
uv add jupyter jupyter_contrib_nbextensions notebook==6.4.12 traitlets==5.9.0
uv run jupyter contrib nbextension install --user
uv run jupyter notebook
</code></pre>
<p>There are some new errors (<code>[jupyter_nbextensions_configurator] wrote error: 'Forbidden'</code>) during the launch and the Extensions panel is stuck:</p>
<p><img src="https://github.com/user-attachments/assets/3d3783fa-d992-4974-90df-9fcfb245adae" alt="Image" /></p>
<p>I am not sure I will continue in this direction, perhaps I should going back to <code>nbclassic</code>, or conda :(</p>
<p>Anyway, the advantage of <code>uv</code> is that it allows quick and secure explorations. I guess the errors are on the Jupyter side.</p>
<p>Thank you again for your replies and all the voodoo ;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @laowantong on 2025-02-10 07:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/simonprovost">@simonprovost</a> on 2025-02-16 00:43</div>
            <div class="timeline-body"><p>Oh sadness this is closed and will not be explored further!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chunkily">@chunkily</a> on 2025-09-18 10:33</div>
            <div class="timeline-body"><p>Just encountered the same issue today.
It appears to be an issue on the jupyter_contrib_nbextensions side and not uv. https://github.com/ipython-contrib/jupyter_contrib_nbextensions/issues/1667</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:55 UTC
    </footer>
</body>
</html>
