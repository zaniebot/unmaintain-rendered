<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support for Python projects that don't use a build system - astral-sh/uv #6321</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Support for Python projects that don't use a build system</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/6321">#6321</a>
        opened by <a href="https://github.com/anze3db">@anze3db</a>
        on 2024-08-21 12:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/anze3db">@anze3db</a> on 2024-08-21 12:19</div>
            <div class="timeline-body"><p>Hey! Congrats on the 0.3.0 release! üéâ</p>
<p>I'm trying to switch one of my Django projects from pip-tools to uv, but for most Django projects there usually isn't a need for a build step, so I'd want <code>uv</code> to only create the virtual environment and install the dependencies.</p>
<p>Currently, when I run <code>uv sync</code> or <code>uv run</code> I get the following <code>setuptools</code> error:</p>
<pre><code>uv run python manage.py runserver
error: Failed to prepare distributions
  Caused by: Failed to fetch wheel: fedidevs @ file:///Users/anze/Coding/fedidevs
  Caused by: Build backend failed to determine extra requires with `build_editable()` with exit status: 1
--- stdout:

--- stderr:
error: Multiple top-level packages discovered in a flat-layout: ['posts', 'theme', 'confs', 'stats', 'static', 'accounts', 'fedidevs', 'staticfiles', 'mastodon_auth', 'static_nonversioned'].

To avoid accidental inclusion of unwanted files or directories,
setuptools will not proceed with this build.

If you are trying to create a single distribution with multiple packages
on purpose, you should not rely on automatic discovery.
Instead, consider the following options:

1. set up custom discovery (`find` directive with `include` or `exclude`)
2. use a `src-layout`
3. explicitly set `py_modules` or `packages` with a list of names

To find more information, look for &quot;package discovery&quot; on setuptools docs.
---
</code></pre>
<p>I managed to get around this problem by adding the following lines to my <code>pyproject.toml</code></p>
<pre><code>[tool.setuptools]
py-modules = []
</code></pre>
<p>This makes the <code>uv run</code> and <code>uv sync</code> command work, but uv still generates build artifacts that I don't need.</p>
<p>Ideally I think <code>uv</code> should only install the dependencies and skip trying to build the project. Is there any way to prevent uv from running setuptools?</p>
<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-21 13:37</div>
            <div class="timeline-body"><p>Yeah this is something we're thinking a lot about -- how to better serve projects that would prefer not to use a build system.</p>
<p>I think the most harmless setup for now is:</p>
<pre><code>[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;

[tool.hatch.build.targets.wheel]
packages = [&quot;.&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @charliermarsh on 2024-08-21 13:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arv-anshul">@arv-anshul</a> on 2024-08-21 15:33</div>
            <div class="timeline-body"><p>I have also <strong>this issue with my data science projects</strong>. Previously, using <code>rye</code> which has virtual package feature, <code>uv</code> has also <code>--virtual</code> flag with <code>uv init</code> command but it doesn't works as <code>rye</code>.</p>
<p><strong>Please fix this issue, it will be very helpful for Data Science guys.</strong></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-21 15:41</div>
            <div class="timeline-body"><p>üëç This is something we want to have a better answer to. Working on it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2024-08-21 23:41</div>
            <div class="timeline-body"><p>It would be cool if <code>uv</code> supported this <code>hatchling</code> capability for build-less projects (or scripts?).</p>
<p>If <code>uv</code> provided a full-blown PEP517 build backend that would really be the bee's knees! It would be a one stop shop.</p>
<p>For the most simple source-only projects that don't compile any binaries... I think <code>uv</code> could just check the <code>[build-system]</code> section for <code>uv.build</code> and do the necessary src/dist-info file additions in <code>.venv/Lib/site-packages</code>. Performance wise, I'm sure whatever backend capability that the Astral team could add to <code>uv</code> would blow the other backends out of the water.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-28 18:09</div>
            <div class="timeline-body"><p>This exists now as of <a href="https://github.com/astral-sh/uv/releases/tag/0.4.0">v0.4.0</a>!</p>
<p>Projects that omit <code>[build-system]</code> will no longer be built and installed by default. You can also set <code>tool.uv.package</code> to <code>false</code> to control the behavior explicitly, as in:</p>
<pre><code class="language-toml">[tool.uv]
package = false
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-08-28 18:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-08-28 18:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dimaqq">@dimaqq</a> on 2025-07-11 12:11</div>
            <div class="timeline-body"><p>Is <code>package = false</code> still the right way to prevent a package from being built?</p>
<p>I've upgraded one project to uv just now, it's not a workspace, and there's no <code>build-system</code>, but otherwise it's a valid uv pyproject.toml with dep groups, etc.</p>
<ul>
<li><code>uv build --all</code> errors out &quot;Workspace does not contain any buildable packages.&quot; ‚úÖ</li>
<li><code>uv build</code> builds an sdist and a wheel. ‚ùì</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-11 12:45</div>
            <div class="timeline-body"><p><code>uv build</code> is an explicit request for a build, so... yes we'll force the package to be built there. Can you open a new issue with more details if you have more questions? This issue is old and shouldn't be bumped.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:21 UTC
    </footer>
</body>
</html>
