<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infinite allocation loop when SSL_CERT_FILE is a directory - astral-sh/uv #17494</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Infinite allocation loop when SSL_CERT_FILE is a directory</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/17494">#17494</a>
        opened by <a href="https://github.com/pieterdavid">@pieterdavid</a>
        on 2026-01-15 18:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/pieterdavid">@pieterdavid</a></div>
            <div class="timeline-body">Summary
<p>To reproduce (note: kill the process before it freezes your machine):</p>
<pre><code>% uv init --bare
% mkdir empty-dir
% SSL_CERT_FILE=./empty-dir uv venv --verbose
</code></pre>
<p>After a few lines of output the process starts allocating more and more memory, until the RAM and swap file limits of WSL are reached and it is killed.
The last lines of output are these:</p>
<pre><code>[...]
DEBUG Using Python request `&gt;=3.13` from `requires-python` metadata
DEBUG Using request timeout of 30s
</code></pre>
<p>Putting a directory for SSL_CERT_FILE is obviously a misconfiguration, but since there is a check to ignore the value in case the path doesn&#x27;t exist, it would be nice if it could do the same in case it&#x27;s a directory instead of a file.</p>
Platform
<p>Archlinux on WSL2</p>
Version
<p>uv 0.9.25 (38fcac0f3 2026-01-13)</p>
Python version
<p>Python 3.13.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/pieterdavid">@pieterdavid</a> on 2026-01-15 18:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2026-01-15 20:56</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2026-01-15 22:13</div>
            <div class="timeline-body"><p>It looks like the root cause is at https://github.com/rustls/pki-types/blob/85522565adf28a76909ea17dd2759b6046eb2bed/src/pem.rs#L50-L56</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2026-01-16 13:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:41:32 UTC
    </footer>
</body>
</html>
