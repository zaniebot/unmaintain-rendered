<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv sync can not resolve version, but uv pip install can - astral-sh/uv #16594</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>uv sync can not resolve version, but uv pip install can</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/16594">#16594</a>
        opened by <a href="https://github.com/Jerakin">@Jerakin</a>
        on 2025-11-04 17:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Jerakin">@Jerakin</a> on 2025-11-04 17:22</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Using <code>uv sync</code> one of our packages can't be synced, it throws the error below (it also can't be pulled down with <code>uv add</code>). However a valid version exists and can be pulled down with <code>uv pip install mydepen</code>.</p>
<pre><code>  x No solution found when resolving dependencies for split (markers: python_full_version == '3.9.*'):
  `-&gt; Because the requested Python version (&gt;=3.9) does not satisfy Python&gt;=3.10,&lt;4 and all versions of mydepen depend on Python&gt;=3.10,&lt;4, we can conclude that all versions of mydepen cannot be used.
      And because your project depends on mydepen, we can conclude that your project's requirements are unsatisfiable.

      hint: The `requires-python` value (&gt;=3.9) includes Python versions that are not supported by your dependencies (e.g., all versions of mydepen only supports &gt;=3.10, &lt;4). Consider using a more restrictive  
      `requires-python` value (like &gt;=3.10, &lt;4).
</code></pre>
<p>It's an internal package so unfortunately I can't share a reproduction case, but hopefully the log can help.</p>
<details><summary>uv sync --verbose</summary>
<p>

<pre><code>PS D:\projects\test-project&gt; uv sync --verbose
DEBUG uv 0.9.7 (0adb44480 2025-10-30)
DEBUG Acquired shared lock for `C:\Users\jerakin\AppData\Local\uv\cache`
DEBUG Found project root: `D:\projects\test-project`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `D:\projects\test-project`
DEBUG No Python version file found in workspace: D:\projects\test-project
DEBUG Using Python request `&gt;=3.9` from `requires-python` metadata
DEBUG Checking for Python environment at: `.venv`
DEBUG The project environment's Python version satisfies the request: `Python &gt;=3.9`
DEBUG Released lock at `C:\Users\jerakin\AppData\Local\Temp\uv-ceddaac331f3092f.lock`
DEBUG Acquired lock for `.venv`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: test-project @ file:///D:/projects/test-project
DEBUG No workspace root found, using project root
DEBUG Solving with installed Python version: 3.9.21
DEBUG Solving with target Python version: &gt;=3.9
DEBUG Adding direct dependency: test-project*
DEBUG Searching for a compatible version of test-project @ file:///D:/projects/test-project (*)
DEBUG Adding direct dependency: mydepen*
DEBUG Acquired lock for `C:\Users\jerakin\AppData\Local\uv\cache\simple-v18\index\e0c21cce6dd9ebe2\mydepen.lock`
DEBUG Found stale response for: https://company.com/api/pypi/pypi/simple/mydepen/
DEBUG Sending revalidation request for: https://company.com/api/pypi/pypi/simple/mydepen/
DEBUG Found modified response for: https://company.com/api/pypi/pypi/simple/mydepen/
DEBUG Released lock at `C:\Users\jerakin\AppData\Local\uv\cache\simple-v18\index\e0c21cce6dd9ebe2\mydepen.lock`
DEBUG Searching for a compatible version of mydepen (*)
DEBUG Forking Python requirement `&gt;=3.9` on `~=3.10` for mydepen==2020.3.7 (split `python_full_version == '3.9.*'`, split `python_full_version &gt;= '3.10'`)
DEBUG Narrowed `requires-python` bound to: &gt;=3.9, &lt;3.10
DEBUG Narrowed `requires-python` bound to: &gt;=3.10
DEBUG Solving split (markers: python_full_version &gt;= '3.10') (requires-python: RequiresPython { specifiers: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: &quot;3.10&quot; }]), range: RequiresPythonRange(LowerBound(Included(&quot;3.10&quot;)), UpperBound(Unbounded)) })
DEBUG Searching for a compatible version of mydepen (*)
DEBUG Selecting: mydepen==2020.3.7 [compatible] (mydepen-2020.3.7-cp310-cp310-win_amd64.whl)
DEBUG Acquired lock for `C:\Users\jerakin\AppData\Local\uv\cache\wheels-v5\index\e0c21cce6dd9ebe2\mydepen\mydepen-2020.3.7-cp310-cp310-win_amd64.lock`
DEBUG Found fresh response for: https://company.com/api/pypi/pypi/mydepen/2020.3.7/mydepen-2020.3.7-cp310-cp310-win_amd64.whl
DEBUG Released lock at `C:\Users\jerakin\AppData\Local\uv\cache\wheels-v5\index\e0c21cce6dd9ebe2\mydepen\mydepen-2020.3.7-cp310-cp310-win_amd64.lock`
DEBUG Tried 2 versions: mydepen 1, test-project 1
DEBUG split `python_full_version &gt;= '3.10'` resolution took 0.002s
DEBUG Solving split (markers: python_full_version == '3.9.*') (requires-python: RequiresPython { specifiers: VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: &quot;3.9&quot; }, VersionSpecifier { operator: LessThan, version: &quot;3.10&quot; }]), range: RequiresPythonRange(LowerBound(Included(&quot;3.9&quot;)), UpperBound(Excluded(&quot;3.10&quot;))) })
DEBUG Searching for a compatible version of mydepen (*)
DEBUG No compatible version found for: Python
DEBUG Recording unit propagation conflict of Python from incompatibility of (mydepen)
DEBUG Searching for a compatible version of mydepen (&lt;2020.3.7 | &gt;2020.3.7)
DEBUG Recording unit propagation conflict of Python from incompatibility of (mydepen)
DEBUG Searching for a compatible version of mydepen (&lt;2020.3.4 | &gt;2020.3.4, &lt;2020.3.7 | &gt;2020.3.7)
DEBUG Recording unit propagation conflict of Python from incompatibility of (mydepen)
DEBUG Searching for a compatible version of mydepen (&lt;2020.3.2 | &gt;2020.3.2, &lt;2020.3.4 | &gt;2020.3.4, &lt;2020.3.7 | &gt;2020.3.7)
DEBUG Recording unit propagation conflict of Python from incompatibility of (mydepen)
DEBUG Searching for a compatible version of mydepen (&lt;2020.3.1 | &gt;2020.3.1, &lt;2020.3.2 | &gt;2020.3.2, &lt;2020.3.4 | &gt;2020.3.4, &lt;2020.3.7 | &gt;2020.3.7)
DEBUG No compatible version found for: mydepen
DEBUG Recording unit propagation conflict of mydepen from incompatibility of (test-project)
DEBUG Searching for a compatible version of test-project @ file:///D:/projects/test-project (&lt;0.1.0 | &gt;0.1.0)
DEBUG No compatible version found for: test-project
  x No solution found when resolving dependencies for split (markers: python_full_version == '3.9.*'):
  `-&gt; Because the requested Python version (&gt;=3.9) does not satisfy Python&gt;=3.10,&lt;4 and all versions of mydepen depend on Python&gt;=3.10,&lt;4, we can conclude that all versions of mydepen cannot be used.
      And because your project depends on mydepen, we can conclude that your project's requirements are unsatisfiable.

      hint: The `requires-python` value (&gt;=3.9) includes Python versions that are not supported by your dependencies (e.g., all versions of mydepen only supports &gt;=3.10, &lt;4). Consider using a more restrictive  
      `requires-python` value (like &gt;=3.10, &lt;4).
DEBUG Released lock at `D:\projects\test-project\.venv\.lock`
DEBUG Released lock at `C:\Users\jerakin\AppData\Local\uv\cache\.lock`
</code></pre>
</p>
</details> 

<p>These are the available versions on the registry.</p>
<details><summary>package registry</summary>
<p>

<pre><code>mydepen-2020.3.1-cp27-cp27m-win_amd64.whl
mydepen-2020.3.1-cp310-cp310-win_amd64.whl
mydepen-2020.3.1-cp37-cp37m-win_amd64.whl
mydepen-2020.3.1-cp39-cp39-win_amd64.whl
mydepen-2020.3.2-cp27-cp27m-win_amd64.whl
mydepen-2020.3.2-cp310-cp310-win_amd64.whl
mydepen-2020.3.2-cp311-cp311-win_amd64.whl
mydepen-2020.3.2-cp37-cp37m-win_amd64.whl
mydepen-2020.3.2-cp38-cp38-win_amd64.whl
mydepen-2020.3.2-cp39-cp39-win_amd64.whl
mydepen-2020.3.4-cp310-cp310-win_amd64.whl
mydepen-2020.3.4-cp311-cp311-win_amd64.whl
mydepen-2020.3.4-cp37-cp37m-win_amd64.whl
mydepen-2020.3.4-cp38-cp38-win_amd64.whl
mydepen-2020.3.4-cp39-cp39-win_amd64.whl
mydepen-2020.3.7-cp310-cp310-win_amd64.whl
mydepen-2020.3.7-cp311-cp311-win_amd64.whl
mydepen-2020.3.7-cp37-cp37m-win_amd64.whl
mydepen-2020.3.7-cp38-cp38-win_amd64.whl
mydepen-2020.3.7-cp39-cp39-win_amd64.whl
</code></pre>
</p>
</details> 

<p>Of course the project doesn't exist so this pyproject won't work, but this is how it looks.</p>
<details><summary>pyproject.toml</summary>
<p>

<pre><code class="language-toml">[project]
name = &quot;test-project&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
requires-python = &quot;&gt;=3.9&quot;
dependencies = [
    &quot;mydepen&quot;
]

[[tool.uv.index]]
name = &quot;company&quot;
url = &quot;https://company.com/api/pypi/pypi/simple&quot;
publish-url = &quot;https://company.com/api/pypi/pypi&quot;
default = true
</code></pre>
</p>
</details> 

<h3>Platform</h3>
<p>Windows 11</p>
<h3>Version</h3>
<p>v0.6.13, v0.9.7</p>
<h3>Python version</h3>
<p>python 3.9.21</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @Jerakin on 2025-11-04 17:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-11-04 19:04</div>
            <div class="timeline-body"><p>I think this is correct? You're saying that you want to support Python 3.9 and later, but that dependency requires at least Python 3.10. So when we try to generate the lockfile (and therefore generate a resolution for all supported Python versions), we fail when trying to find a version of <code>mydepen</code> that would work for Python 3.9.</p>
<p><code>uv pip install</code> would work as long as you're using Python 3.10 or later, but I assume <code>uv pip install --python 3.9</code> would also fail.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2025-11-05 17:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2025-11-05 17:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Jerakin">@Jerakin</a> on 2025-11-06 08:15</div>
            <div class="timeline-body"><p>The dependency doesn't require <code>3.10</code> . The package registry contains wheels for <code>2.7</code>, <code>3.7</code>, <code>3.8</code>, and <code>3.9</code> (As well as <code>3.10</code> and <code>3.11</code>).</p>
<p><code>uv pip install</code> is run in an active environment of python <code>3.9</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-06 12:51</div>
            <div class="timeline-body"><p>What is the <code>Requires-Python</code> in the <code>METADATA</code> for those wheels? Does it vary?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Jerakin">@Jerakin</a> on 2025-11-06 14:11</div>
            <div class="timeline-body"><p>They all seem correct.</p>
<p>| package | version |
| --- | --- |
| mydepen-2020.3.2-cp27-cp27m-win_amd64.whl | Requires-Python: ~=2.7
| mydepen-2020.3.2-cp37-cp37m-win_amd64.whl | Requires-Python: ~=3.7
| mydepen-2020.3.2-cp38-cp38-win_amd64.whl | Requires-Python: ~=3.8
| mydepen-2020.3.2-cp39-cp39-win_amd64.whl | Requires-Python: ~=3.9
| mydepen-2020.3.2-cp310-cp310-win_amd64.whl | Requires-Python: ~=3.10
| mydepen-2020.3.2-cp311-cp311-win_amd64.whl | Requires-Python: ~=3.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Jerakin">@Jerakin</a> on 2025-11-06 14:19</div>
            <div class="timeline-body"><p>Is there a difference in how <code>uv sync</code> and <code>uv pip install</code> searches for compatible version(s)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-11-06 14:34</div>
            <div class="timeline-body"><p>It's generally not recommended to vary your <code>Requires-Python</code> in that way. Python ABI compatibility is covered by the wheel tag, not the <code>Requires-Python</code>, which is intended to be the minimum compatible Python version for the source code.</p>
<p>uv, like many other tools, assumes that metadata is consistent within a release, and so <code>uv sync</code> (which generates a <code>uv.lock</code> and therefore must perform a universal resolution) will use the <code>Requires-Python</code> from one of the wheels and assume it applies to the entire release. See: https://docs.astral.sh/uv/reference/internals/resolver/#metadata-consistency.</p>
<p><code>uv pip install</code> does differ in that it only has to resolve for a single platform, so it won't even look at wheels that aren't relevant for the current platform.</p>
<p>I'd recommend releasing with a consistent <code>Requires-Python</code>. If you can't re-release or re-build the dependency, you could consider providing <a href="https://docs.astral.sh/uv/concepts/resolution/#dependency-metadata">static metadata</a> as a workaround.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Jerakin">@Jerakin</a> on 2025-11-06 15:02</div>
            <div class="timeline-body"><p>That's awesome. Thank you so much for helping narrowing it down!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Jerakin on 2025-11-06 15:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:30 UTC
    </footer>
</body>
</html>
