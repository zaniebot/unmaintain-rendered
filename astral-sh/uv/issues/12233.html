<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use build backend from venv (hatchling) - astral-sh/uv #12233</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use build backend from venv (hatchling)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12233">#12233</a>
        opened by <a href="https://github.com/pycaw">@pycaw</a>
        on 2025-03-17 09:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/pycaw">@pycaw</a> on 2025-03-17 09:17</div>
            <div class="timeline-body"><h3>Question</h3>
<p>How can I tell uv to use hatchling that I installed to the venv (uv add hatchling --group dev)?</p>
<p>It uses <code>~/.cache/uv/builds-v0/.tmpkMKgQV/lib/python3.10/site-packages/hatchling</code> no matter what. I'd want this so that the hook I develop as part of the projects gets lintiing from the same version of hatchling that I build the project with. Or would this would be kind of an antipattern?</p>
<h3>Platform</h3>
<p>linux x86_64</p>
<h3>Version</h3>
<p>uv 0.6.2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @pycaw on 2025-03-17 09:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-17 13:04</div>
            <div class="timeline-body"><p>I think you could add:</p>
<pre><code class="language-toml">[tool.uv.sources]
hatchling = { path = &quot;./path/to/hatchling&quot; }
</code></pre>
<p>To the <code>pyproject.toml</code> of the project that's being built (i.e., the one that has <code>hatchling</code> in its <code>[build-system]</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pycaw">@pycaw</a> on 2025-03-17 13:34</div>
            <div class="timeline-body"><blockquote>
<p>I think you could add:</p>
<p>[tool.uv.sources]
hatchling = { path = &quot;./path/to/hatchling&quot; }</p>
<p>To the <code>pyproject.toml</code> of the project that's being built (i.e., the one that has <code>hatchling</code> in its <code>[build-system]</code>).</p>
</blockquote>
<p>I don't see this working as,</p>
<blockquote>
<p><a href="https://docs.astral.sh/uv/concepts/projects/dependencies/#path">Path</a>: A local wheel, source distribution, or project directory.</p>
</blockquote>
<p>Point to hatchling sitting in a venv's site-packages dir won't satisfy this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-17 13:36</div>
            <div class="timeline-body"><p>In a venv's site-packages dir? That would definitely be an anit-pattern.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pycaw">@pycaw</a> on 2025-03-17 13:44</div>
            <div class="timeline-body"><p>So answer is then, it seems, no, we can't use hatchling that is in the project's venv or that is there as a uv tool.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-17 13:46</div>
            <div class="timeline-body"><p>No, because that's not a &quot;Python package&quot;. It's just a Python module.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-17 13:46</div>
            <div class="timeline-body"><p>Given:</p>
<pre><code class="language-toml">[project]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
authors = [
    { name = &quot;Charlie Marsh&quot;, email = &quot;charlie.r.marsh@gmail.com&quot; }
]
requires-python = &quot;&gt;=3.13.0&quot;
dependencies = []

[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;

[tool.uv.sources]
hatchling = { path = &quot;../.venv/lib/python3.13/site-packages/hatchling&quot;}
</code></pre>
<p>You get:</p>
<pre><code>❯ uv build
Building source distribution...
  × Failed to build `/Users/crmarsh/workspace/uv/foo`
  ├─▶ Failed to resolve requirements from `build-system.requires`
  ├─▶ No solution found when resolving: `hatchling @ file:///Users/crmarsh/workspace/uv/.venv/lib/python3.13/site-packages/hatchling`
  ├─▶ Failed to build `hatchling @ file:///Users/crmarsh/workspace/uv/.venv/lib/python3.13/site-packages/hatchling`
  ╰─▶ /Users/crmarsh/workspace/uv/.venv/lib/python3.13/site-packages/hatchling does not appear to be a Python project, as neither `pyproject.toml` nor `setup.py` are present in the directory
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-03-17 13:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pycaw">@pycaw</a> on 2025-03-17 14:06</div>
            <div class="timeline-body"><blockquote>
<p>Given:</p>
<p>[project]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
authors = [
{ name = &quot;Charlie Marsh&quot;, email = &quot;charlie.r.marsh@gmail.com&quot; }
]
requires-python = &quot;&gt;=3.13.0&quot;
dependencies = []</p>
<p>[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;</p>
<p>[tool.uv.sources]
hatchling = { path = &quot;../.venv/lib/python3.13/site-packages/hatchling&quot;}</p>
<p>You get:</p>
<pre><code>❯ uv build
Building source distribution...
  × Failed to build `/Users/crmarsh/workspace/uv/foo`
  ├─▶ Failed to resolve requirements from `build-system.requires`
  ├─▶ No solution found when resolving: `hatchling @ file:///Users/crmarsh/workspace/uv/.venv/lib/python3.13/site-packages/hatchling`
  ├─▶ Failed to build `hatchling @ file:///Users/crmarsh/workspace/uv/.venv/lib/python3.13/site-packages/hatchling`
  ╰─▶ /Users/crmarsh/workspace/uv/.venv/lib/python3.13/site-packages/hatchling does not appear to be a Python project, as neither `pyproject.toml` nor `setup.py` are present in the directory
</code></pre>
</blockquote>
<p>Yes, that's been my experience as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-17 14:07</div>
            <div class="timeline-body"><p>What problem are you trying to solve? Maybe I can help you find another way to get to the same outcome.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pycaw">@pycaw</a> on 2025-03-17 14:14</div>
            <div class="timeline-body"><p>Originally this:</p>
<blockquote>
<p>... so that the hook I develop as part of the project gets lintiing from the same version of hatchling that I build the project with</p>
</blockquote>
<p>I wanted to avoid using hatchling sourced from different paths and instead have a single one for these two purposes.</p>
<p>Since then I simply installed it in my venv and created the hook aided by the sweet linter handholding.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:02 UTC
    </footer>
</body>
</html>
