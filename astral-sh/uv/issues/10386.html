<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv publish does not recognize UV_INDEX_{name}_PASSWORD and UV_INDEX_{name}_USERNAME - astral-sh/uv #10386</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv publish does not recognize UV_INDEX_{name}<em>PASSWORD and UV_INDEX</em>{name}_USERNAME</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/10386">#10386</a>
        opened by <a href="https://github.com/SalttownUser">@SalttownUser</a>
        on 2025-01-08 09:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/SalttownUser">@SalttownUser</a></div>
            <div class="timeline-body"><p>I have an issue using the <code>uv publish</code> command. I&#x27;m trying to upload a package to a private GitLab package registry and getting check error.</p>
<p>The index url is a GitLab group url combining packages inherited from multiple projects in the group:</p>
<pre><code>[[tool.uv.index]]
name = &quot;gitlab-private&quot;
url = &quot;https://example.org/api/v4/groups/1/packages/pypi/simple&quot;
default = true
publish-url = &quot;https://example.org/api/v4/projects/2/packages/pypi&quot;
</code></pre>
<p>I did use these environment variable with credentials for url:</p>
<pre><code>UV_INDEX_GITLAB_PRIVATE_PASSWORD
UV_INDEX_GITLAB_PRIVATE_USERNAME
</code></pre>
<p>and</p>
<pre><code>UV_PUBLISH_USERNAME
UV_PUBLISH_PASSWORD
</code></pre>
<p>containing the credentials to push packages to publish-url.</p>
<pre><code>uv publish --index gitlab-private -v
DEBUG uv 0.5.11 (c4d0caaee 2024-12-19)
warning: `uv publish` is experimental and may change without warning
DEBUG Publishing with index gitlab-private
DEBUG Not a distribution filename: `.gitignore`
Publishing 6 files https://example.org/api/v4/projects/2/packages/pypi
DEBUG Using request timeout of 900s
DEBUG Checking for my_package-py3-none-any.whl in the registry
DEBUG No cache entry for: https://example.org/api/v4/projects/2/packages/pypi/simple/my_package/
DEBUG No netrc file found
error: Failed to query check URL
  Caused by: Package `my_package` was not found in the registry
</code></pre>
<p>When I add the credentials for index to the url with <code>url = &quot;https://user:password@example.org/api/v4/groups/1/packages/pypi/simple&quot;</code> everything works.</p>
Expected behavior
<p>uv publish should use UV_INDEX_{name}<em>PASSWORD and UV_INDEX</em>{name}_USERNAME to
authenticate with the index &quot;name&quot; to check the package dependencies.</p>
<p><em>Originally posted by @SalttownUser in <a href="https://github.com/astral-sh/uv/issues/9775#issuecomment-2557498010">#9775</a></em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-08 14:34</div>
            <div class="timeline-body"><p>I believe this is the same as #9845?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-08 14:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-08 15:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:36:33 UTC
    </footer>
</body>
</html>
