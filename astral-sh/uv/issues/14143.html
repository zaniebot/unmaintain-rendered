<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wishlist: let `uv tool install --reinstall` remember how a tool was installed - astral-sh/uv #14143</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Wishlist: let `uv tool install --reinstall` remember how a tool was installed</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/14143">#14143</a>
        opened by <a href="https://github.com/callegar">@callegar</a>
        on 2025-06-19 08:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/callegar">@callegar</a> on 2025-06-19 08:24</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Suppose that for some reason you want to install a newer point release of python via uv: <code>uv python install 3.13.5</code> and that you want that to substitute for the previous minor release, so that you also do <code>uv python uninstall 3.13.4</code>.</p>
<p>In principle, this should be a painless operation, since CPython is ABI compatible across minor-releases even at the C-API level.</p>
<p><em>CPython’s Application Binary Interface (ABI) is forward- and backwards-compatible across a minor release (if these are compiled the same way; see <a href="https://docs.python.org/3/c-api/stable.html#stable-abi-platform">Platform Considerations</a> below). So, code compiled for Python 3.10.0 will work on 3.10.8 and vice versa, but will need to be compiled separately for 3.9.x and 3.11.x.</em></p>
<p>However, all tools installed with <code>uv tool</code> will break, because the current version of python is specified via a symlink to the minor release, not to the release (e.g. there is not a link to some managed python 3.13, but to the specific 3.13.4). Nonetheless, uv tool will report that nicely. For instance saying <code>uv tool list</code> might end up saying:</p>
<pre><code>warning: Broken symlink at `/home/user/.local/share/uv/tools/retext/bin/python3`,
was the underlying Python interpreter removed?
</code></pre>
<p>also suggesting how to fix the problem:</p>
<pre><code>hint: Consider recreating the environment (e.g., with `uv venv`) (run `uv tool install retext --reinstall` to reinstall)
</code></pre>
<p>The problem is that to use the hint, one actually needs to remember <em>how the tool was installed</em> (e.g. the extras - stuff that goes in brakets as in <code>uv tool install package[extra] --reinstall</code> and the stuff on the <code>--with</code> parameter). Would be great if one could say: <code>uv tool install package --reinstall --keep-setup</code> or something similar.</p>
<p>Even better would be to have a shorthand doing that for all the tools.</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @callegar on 2025-06-19 08:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-19 16:03</div>
            <div class="timeline-body"><p>#13954 will resolve the issue of the Python interpreter breaking.</p>
<p>I think we could consider retaining options during <code>uv tool install &lt;package&gt; --reinstall</code>, I'm not sure. A simple elucidation of the existing behavior is:</p>
<pre><code>❯ uv tool install flask --with httpx
Resolved 15 packages in 232ms
Prepared 5 packages in 96ms
Installed 15 packages in 13ms
 + anyio==4.9.0
 + blinker==1.9.0
 + certifi==2025.6.15
 + click==8.2.1
 + flask==3.1.1
 + h11==0.16.0
 + httpcore==1.0.9
 + httpx==0.28.1
 + idna==3.10
 + itsdangerous==2.2.0
 + jinja2==3.1.6
 + markupsafe==3.0.2
 + sniffio==1.3.1
 + typing-extensions==4.14.0
 + werkzeug==3.1.3
Installed 1 executable: flask
❯ uv tool install flask --reinstall
Resolved 7 packages in 70ms
Prepared 7 packages in 0.84ms
Uninstalled 15 packages in 18ms
Installed 7 packages in 10ms
 - anyio==4.9.0
 ~ blinker==1.9.0
 - certifi==2025.6.15
 ~ click==8.2.1
 ~ flask==3.1.1
 - h11==0.16.0
 - httpcore==1.0.9
 - httpx==0.28.1
 - idna==3.10
 ~ itsdangerous==2.2.0
 ~ jinja2==3.1.6
 ~ markupsafe==3.0.2
 - sniffio==1.3.1
 - typing-extensions==4.14.0
 ~ werkzeug==3.1.3
Installed 1 executable: flask
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:28 UTC
    </footer>
</body>
</html>
