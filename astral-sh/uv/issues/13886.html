<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improve documentation for Keyring Credential Provider - astral-sh/uv #13886</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Improve documentation for Keyring Credential Provider</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/13886">#13886</a>
        opened by <a href="https://github.com/da1910">@da1910</a>
        on 2025-06-06 14:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/da1910">@da1910</a> on 2025-06-06 14:46</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>The documentation for the keyring provider does indicate how to use it for some cases, but provides examples of package feeds that do not verify usernames, or use hard coded usernames.</p>
<p>In a team development setting it is not desirable to hard code usernames into the pyproject.toml file, and if we can avoid environment variables that's definitely preferable.</p>
<p>I'd suggest an example up front of using a generic index (I use artifactory which does this) that requires a valid username and token, along with an idea of what credentials must be stored in keyring to allow authentication. Right now the only way I could work out what was required was to inspect the logs with <code>uv sync -vv</code> and see what it was trying to fetch from the keyring backend.</p>
<p>This is complicated by the fact that if you provide <code>https://user@package.feed.com/pypi/simple/</code> as an index url then uv will look for <code>package.feed.com</code> in keyring with the username <code>user</code>, however if you use the (undocumented?) support for <code>--mode creds</code> to authenticate the url <code>https://package.feed.com/pypi/simple/</code> then uv looks for <code>https://package.feed.com/pypi/simple/</code> in keyring.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @da1910 on 2025-06-06 14:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-06 17:41</div>
            <div class="timeline-body"><p>See https://docs.astral.sh/uv/configuration/indexes/#using-credential-providers â€” we'll use <code>--mode creds</code> if you set <code>authenticate = &quot;always&quot;</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by @zanieb on 2025-06-06 17:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-06-06 17:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/da1910">@da1910</a> on 2025-06-07 12:05</div>
            <div class="timeline-body"><p>Indeed, I discovered this, but it's not explained anywhere that I could see?</p>
<p>Neither is exactly what secrets need to be stored in keyring for each mode, since it appears to be hard coded to look for specific secret names?</p>
<p>I can draft some text that would have helped me if you'd be open to a documentation enhancement? This could either in the form of &quot;here's how to use jfrog artifactory&quot;, or more generically &quot;here's how to store credentials for a generic mirror that requires a username and password/token&quot;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/da1910">@da1910</a> on 2025-07-24 16:12</div>
            <div class="timeline-body"><p>It seems as though a recent fix for the authentication code changed the behaviour again, preventing redirects being followed, and breaking our workflow - the azure pypi provider redirects from <code>pkgs.dev.azure.com/org_name</code> to <code>pkgs.dev.azure.com/org_guid</code> which prevents authentication.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:28 UTC
    </footer>
</body>
</html>
