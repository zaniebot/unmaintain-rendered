<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Software Bill of Materials (SBOM) output - astral-sh/uv #6012</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Software Bill of Materials (SBOM) output</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6012">#6012</a>
        opened by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a>
        on 2024-08-11 23:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/chrisrodrigue">@chrisrodrigue</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p><code>uv</code> is in a prime position to be able to emit an SBOM that reflects the state of the current <code>uv</code>-managed virtual environment, or ingest an SBOM to produce a managed virtual environment.</p>
<p><a href="https://www.cisa.gov/sbom">SBOM</a> requirements supersede any existing PEP. <a href="https://www.whitehouse.gov/briefing-room/presidential-actions/2021/05/12/executive-order-on-improving-the-nations-cybersecurity/">Executive Order 14028</a> demands SBOM documentation from all vendors to the US government by September 2023. It is reasonable to assume that <code>uv</code> may indirectly fall under this executive order if there are downstream users of <code>uv</code> that provide software to the US government.</p>
<p>It would be awesome if <code>uv</code> could emit an SBOM in one of the industry standard formats. <a href="https://cyclonedx.org/specification/overview/">CycloneDX</a> is one such SBOM standard. I think <code>uv</code> may already have all the metadata necessary to output one.</p>
<p>SBOM support would greatly improve the security posture of <code>uv</code> and <code>uv</code>-managed projects.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2024-08-12 09:08</div>
            <div class="timeline-body"><p>As <a href="https://github.com/astral-sh/uv/issues/4711#issuecomment-2266020335">hinted previously</a>, you can use my <a href="https://github.com/kdeldycke/meta-package-manager">Meta Package Manager</a> CLI in the mean time to export the SBOM of a <code>uv</code> environment:</p>
<pre><code class="language-shell-session">$ mpm --uv sbom --spdx                   
info: User selection of managers by priority: &gt; uv
info: Managers dropped by user: None
info: Print SPDX export to &lt;stdout&gt;
info: Export packages from uv...
</code></pre>
<pre><code class="language-json">{
    &quot;SPDXID&quot;: &quot;SPDXRef-DOCUMENT&quot;,
    &quot;creationInfo&quot;: {
        &quot;created&quot;: &quot;2024-08-02T23:29:10Z&quot;,
        &quot;creators&quot;: [
            &quot;Tool: meta-package-manager-5.18.1&quot;
        ]
    },
    &quot;dataLicense&quot;: &quot;CC0-1.0&quot;,
    &quot;name&quot;: &quot;macOS-Darwin-23.6.0-arm64&quot;,
    &quot;spdxVersion&quot;: &quot;SPDX-2.3&quot;,
    &quot;documentNamespace&quot;: &quot;https://github.com/kdeldycke/meta-package-manager/releases/tag/v5.18.1/fdcf50b29504cc4c0df620af2283ed3&quot;,
    &quot;packages&quot;: [
        {
            &quot;SPDXID&quot;: &quot;SPDXRef-pkg-uv-alabaster-0.7.16&quot;,
            &quot;downloadLocation&quot;: &quot;https://www.example.com&quot;,
            &quot;externalRefs&quot;: [
                {
                    &quot;referenceCategory&quot;: &quot;PACKAGE_MANAGER&quot;,
                    &quot;referenceLocator&quot;: &quot;pkg:uv/alabaster@0.7.16&quot;,
                    &quot;referenceType&quot;: &quot;purl&quot;
                }
            ],
            &quot;filesAnalyzed&quot;: false,
            &quot;name&quot;: &quot;alabaster&quot;,
            &quot;primaryPackagePurpose&quot;: &quot;INSTALL&quot;,
            &quot;supplier&quot;: &quot;Organization: UV&quot;,
            &quot;versionInfo&quot;: &quot;0.7.16&quot;
        },
        {
            &quot;SPDXID&quot;: &quot;SPDXRef-pkg-uv-arrow-1.3.0&quot;,
            &quot;downloadLocation&quot;: &quot;https://www.example.com&quot;,
            &quot;externalRefs&quot;: [
                {
                    &quot;referenceCategory&quot;: &quot;PACKAGE_MANAGER&quot;,
                    &quot;referenceLocator&quot;: &quot;pkg:uv/arrow@1.3.0&quot;,
                    &quot;referenceType&quot;: &quot;purl&quot;
                }
            ],
            &quot;filesAnalyzed&quot;: false,
            &quot;name&quot;: &quot;arrow&quot;,
            &quot;primaryPackagePurpose&quot;: &quot;INSTALL&quot;,
            &quot;supplier&quot;: &quot;Organization: UV&quot;,
            &quot;versionInfo&quot;: &quot;1.3.0&quot;
        },
...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Software Bill of Materials (SBOM) output feature" to "FR: Software Bill of Materials (SBOM) output" by @chrisrodrigue on 2024-08-22 11:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2024-10-31 20:25</div>
            <div class="timeline-body"><p>Taking a CycloneDX BOM as <em>input</em> could also be an awesome way to set up a venv.</p>
<p>Any python components in the BOM would have a PyPI purl, which uv could read and sync with <code>pyproject.toml</code> and the managed venv.</p>
<p>See related issue here regarding purl support: https://github.com/astral-sh/uv/issues/8265</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sanmai-NL">@sanmai-NL</a> on 2024-11-23 16:37</div>
            <div class="timeline-body"><p>@chrisrodrigue, for the sake of completeness, can you please describe alternatives, including complementary tools, that can provide this information? If standard tools can output it for various build tools, why should <code>uv</code> implement this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2024-11-24 01:07</div>
            <div class="timeline-body"><p>Well, SBOM is a standardized specification describing the dependencies of a software project. It is highly relevant in the realm of security and enables interoperability between various CI/CD tools such as vulnerability scanners.</p>
<p><a href="https://trivy.dev/v0.33/docs/sbom/">Trivy</a>, <a href="https://goharbor.io/docs/edge/administration/sbom-integration/">Harbor</a>, and <a href="https://docs.docker.com/reference/cli/docker/scout/sbom/">Docker</a> are just a few examples of tools that can understand SBOMs, but these are largely focused around OCI containers.</p>
<p>Tools that support generating SBOMs for Python projects usually only support <code>poetry.lock</code> or arbitrary virtual environments, rather than <code>uv.lock</code>. However, the <code>uv.lock</code> file contains most or all of the data necessary for a minimal SBOM, but it is non-standard.</p>
<p>uv is the best candidate for being able to convert its own <code>uv.lock</code> into an SBOM, and it could ingest an SBOM to reproduce a virtual environment from an already attested set of dependencies.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-26 00:12</div>
            <div class="timeline-body"><p>This sounds cool as a <code>uv export</code> format option. I don't think it's on our immediate roadmap though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @zanieb on 2024-11-26 00:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2024-11-26 16:48</div>
            <div class="timeline-body"><p>A <code>uv export</code> format option sounds perfect!</p>
<p>Notes: The <a href="https://cyclonedx.org/docs/1.6/json/">CycloneDX spec</a> is currently at version 1.6. It supports really rich metadata, but the only required fields in an SBOM are <code>bomFormat</code> and <code>bomVersion</code>. For <code>components</code>, the <code>type</code> and <code>name</code> fields are minimally required. I think it would be safe to use <code>‚Äùlibrary‚Äù</code> as the default <code>type</code> for packages, and the package name as the <code>name</code>.</p>
<p>For each component, the minimal correct metadata to have would likely be <code>purl</code> and <code>hashes</code> (for PyPI packages), or an <code>externalReferences</code> array (for non-PyPI packages) with the package source URL as the <code>url</code>, type set to <code>‚Äùdistribution‚Äù</code>, and the <code>hashes</code> array set with <code>alg</code> and <code>content</code> for each hash. Lastly, the <code>dependencies</code> array is used to capture the dependency graph. I would recommended supporting at least version 1.5 of the spec.</p>
<p>(Could a reverse <code>uv import</code> option that takes an SBOM to set up a project/venv also be useful?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-26 17:05</div>
            <div class="timeline-body"><blockquote>
<p>(Could a reverse uv import option that takes an SBOM to set up a project/venv also be useful?)</p>
</blockquote>
<p>Yeah this would also be cool, but would need quite a bit of design. It'd also be useful for importing existing <code>pyproject.toml</code> from other project managers like Poetry.</p>
<p>If someone is interested in working on <code>uv export</code> format, I'm supportive of it ‚Äî we just won't be working on it ourselves right now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-03-02 19:36</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/chrisrodrigue">@chrisrodrigue</a>, for the sake of completeness, can you please describe alternatives, including complementary tools, that can provide this information? If standard tools can output it for various build tools, why should <code>uv</code> implement this?</p>
</blockquote>
<p>https://pypi.org/project/cyclonedx-bom/ is able to generate SBOM from a Python (virtual) environment.</p>
<p>There is currently an open ticket asking for docs how it can be utilized with <code>uv</code> easily</p>
<ul>
<li>https://github.com/CycloneDX/cyclonedx-python/issues/857</li>
</ul>
<p>Maybe this is something you guys can help?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2025-04-24 13:44</div>
            <div class="timeline-body"><p>Good news: <a href="https://peps.python.org/pep-0770/">PEP 770</a> was just accepted, which notably reserves the subdirectory <code>.dist-info/sboms</code></p>
<p>Some highlights:</p>
<blockquote>
<p><a href="https://peps.python.org/pep-0770/#sbom-files-in-project-formats">SBOM files in project formats</a></p>
<p>A few additions will be made to the existing specifications.</p>
<p><a href="https://packaging.python.org/en/latest/glossary/#term-Built-Distribution">Built distributions</a> (<a href="https://packaging.python.org/en/latest/glossary/#term-Wheel">wheels</a>)
The wheel specification will be updated to add the new registry of reserved directory names and to reflect that if the <code>.dist-info/sboms</code> subdirectory is specified that the directory contains SBOM files.</p>
<p><a href="https://packaging.python.org/en/latest/glossary/#term-Installed-Project">Installed projects</a>
The Recording Installed Projects specification will be updated to reflect that if the <code>.dist-info/sboms</code> subdirectory is specified that the directory contains SBOM files and that any files in this directory MUST be copied from wheels by install tools.</p>
</blockquote>
<p>@konstin I know you are doing great work on the <code>uv_build</code> backend, so this might be of interest to you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/snyk-tim">@snyk-tim</a> on 2025-09-01 15:26</div>
            <div class="timeline-body"><p>Our team at Snyk are big fans of uv and we're very excited about the direction of the project. We've been following the discussion in this issue and would love to contribute the implementation for this feature.</p>
<p>We have some engineering capacity to dedicate to this and want to ensure we build it in a way that aligns with the project's standards. Before we dive in, we wanted to propose an initial approach and get your feedback.</p>
<p>Based on the existing discussion, here's what we have in mind:</p>
<h3>Proposed Implementation</h3>
<ul>
<li>Add an additional format to the <code>uv export</code> command that generates an SBOM from the lockfile.</li>
<li>Use the format name <code>cyclonedx1.6+json</code> to explicitly specify the SBOM format in use. Using this approach would allow future SBOM styles to be output if required, such as XML, newer versions or SPDX SBOMs.</li>
<li>Create a new <code>CycloneDx16Export</code> struct in the <code>uv-resolver</code> crate following the same pattern as <code>RequirementsTxtExport</code> with a <code>from_lock()</code> method and <code>Display</code> trait implementation.</li>
<li>Add new SBOM focused structs to support a minimum CycloneDX structure for generating JSON output.<ul>
<li>An alternative is to use the <a href="https://github.com/CycloneDX/cyclonedx-rust-cargo/blob/main/cyclonedx-bom/README.md">official CycloneDX crate</a>, which supports multiple CycloneDX versions and both JSON and XML output, but is currently limited to version 1.5. Feedback on the use of third-party dependencies would be welcome.</li>
</ul>
</li>
<li>The current implementation of <code>uv pip compile</code> uses the <code>ExportFormat</code> enum for the <code>--format</code> flag. This should be replaced with a format type specific to <code>pip compile</code>.</li>
</ul>
<h3>Limitations</h3>
<ul>
<li>The proposal is limited to adding the CycloneDX SBOM export option and does not encompass any implementation of PEP-770. The resulting SBOM can serve as a foundation for adding PEP-770 support in the future.</li>
<li>The proposal does not include support for using an SBOM to create a venv. It is limited to exporting from a uv lockfile only.</li>
</ul>
<p>Looking forward to your feedback!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woodruffw">@woodruffw</a> on 2025-09-04 13:20</div>
            <div class="timeline-body"><p>Hey @snyk-tim! Thanks a ton for following up on this thread.</p>
<p>We're excited to hear more about how you and the other Snyk folks would contribute here!</p>
<p>We talked about this a bit internally, and I think we <em>don't</em> want to own any CycloneDX structure/data modeling long term, so I'd lean towards using the official CycloneDX crate as a 3p dependency (presuming you all think it's trustworthy). To whit:</p>
<ol>
<li>Do you have thoughts on how hard it would be for the Snyk folks to add 1.6 support there?</li>
<li>Is 1.6 support a hard blocker, or more of a nice-to-have?</li>
</ol>
<p>Related to the above: do you have thoughts on what the compatibility policy should be here? I'm abstractly concerned that at some point we'll want to bump the version of CycloneDX emitted, at which point anybody using <code>--format=cyclonedx1.5+json</code> (for example) would be broken and would need to both upgrade to 1.6 <em>and</em> change however they've scripted <code>uv export</code>.</p>
<p>Similarly, do you have thoughts on supporting <em>just</em> the JSON output, versus supporting both XML and JSON? I'm curious how many users really need both, and I figure you all have more insight there.</p>
<p>Apart from the above, I think the overall approach you've laid out makes a lot of sense!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-09-04 14:40</div>
            <div class="timeline-body"><p>prior art:  https://pypi.org/project/cyclonedx-bom/
<code>uv</code> test bed: <a href="https://github.com/CycloneDX/cyclonedx-python/tree/main/tests/_data/infiles/environment/via-uv">https://github.com/CycloneDX/cyclonedx-python/tree/main/tests/_data/infiles/environment/via-uv</a>
SBOM results:</p>
<ul>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.0.xml.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.0.xml.bin</a></li>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.1.xml.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.1.xml.bin</a></li>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.2.xml.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.2.xml.bin</a></li>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.3.xml.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.3.xml.bin</a></li>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.4.xml.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.4.xml.bin</a></li>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.5.xml.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.5.xml.bin</a></li>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.6.xml.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.6.xml.bin</a></li>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.2.json.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.2.json.bin</a></li>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.3.json.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.3.json.bin</a></li>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.4.json.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.4.json.bin</a></li>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.5.json.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.5.json.bin</a></li>
<li><a href="https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.6.json.bin">https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/environment/plain_via-uv_1.6.json.bin</a></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "FR: Software Bill of Materials (SBOM) output" to "Software Bill of Materials (SBOM) output" by @konstin on 2025-09-04 16:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/snyk-tim">@snyk-tim</a> on 2025-09-09 12:25</div>
            <div class="timeline-body"><p>Hey @woodruffw, thanks for the quick and positive feedback! We're excited to get started.</p>
<p>Great to hear you're happy to use the official CycloneDX crate. That makes the path forward much clearer.</p>
<p>Here are our thoughts based on your questions and our internal discussion:</p>
<h3>CycloneDX Versioning</h3>
<p>Regarding the CycloneDX version, for the specific use case of representing a uv lockfile, the functional differences between CycloneDX 1.5 and 1.6 are minor. This makes 1.6 a nice-to-have but not a hard blocker.</p>
<h3>Format Flag and Compatibility</h3>
<p>If you decide to introduce support for a newer version of CycloneDX, with the proposed format name <code>cyclonedx&lt;version&gt;+&lt;format&gt;</code>, we can support multiple versions and output formats at the same time without impacting existing users. The CycloneDX Rust package supports outputting multiple versions and formats so it should be easy to maintain support for multiple versions.</p>
<h3>JSON and XML Support</h3>
<p>At Snyk, we almost exclusively see customers using JSON, although XML is still used occasionally. The CycloneDX Rust package supports outputting multiple versions and formats so it would be trivial to add support for XML now or in the future. For the initial implementation, we suggest focusing on supporting JSON output only.</p>
<h3>Summary</h3>
<p>To summarize our updated proposal:</p>
<ul>
<li>Implement SBOM export using the official CycloneDX crate targeting CycloneDX 1.5.</li>
<li>Add support for CycloneDX 1.5 JSON output format as <code>cyclonedx1.5+json</code>.</li>
</ul>
<p>If this approach sounds good to you, we can begin working on an initial PR. Looking forward to hearing your thoughts!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woodruffw">@woodruffw</a> on 2025-09-09 14:14</div>
            <div class="timeline-body"><blockquote>
<p>Regarding the CycloneDX version, for the specific use case of representing a uv lockfile, the functional differences between CycloneDX 1.5 and 1.6 are minor. This makes 1.6 a nice-to-have but not a hard blocker.</p>
</blockquote>
<p>Cool, I'm a +1 on moving forwards with 1.5 then üôÇ</p>
<blockquote>
<p>At Snyk, we almost exclusively see customers using JSON, although XML is still used occasionally. The CycloneDX Rust package supports outputting multiple versions and formats so it would be trivial to add support for XML now or in the future. For the initial implementation, we suggest focusing on supporting JSON output only.</p>
</blockquote>
<p>This sounds good to me! I'm curious what @zanieb and others think, but I'm personally inclined to suggest that we make this <code>--format=cyclonedx1.5</code> <em>without</em> the <code>+json</code> qualifier -- we could add <code>+json</code> as a qualifier later on <em>if</em> we end up adding support for the XML form, but I don't think that's a given (since end users themselves haven't indicated any need for XML support). Do you have thoughts on that?</p>
<p>Apart from the above, your proposed approach sounds good to me! The flag name is just a bikeshed, so I think you can begin working on it and we can always figure that our further in üôÇ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-09 15:08</div>
            <div class="timeline-body"><p>I'm fine with dropping the json qualifier though I think we should allow it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/snyk-tim">@snyk-tim</a> on 2025-09-11 15:09</div>
            <div class="timeline-body"><p>Sounds good, thank you for confirming.</p>
<p>We'll proceed with <code>--format=cyclonedx1.5</code> for JSON output. We'll start planning the work and will be in touch when we have a PR ready.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-09-24 16:44</div>
            <div class="timeline-body"><p>Hi team - following up on the conversation above, we at Snyk (@snyk-tim, @snyk-will and I) have started on the implementation, and while there's a fair bit left to do we wanted to get a bit of early feedback to see if we're heading in the right direction. One point we're unsure about is that there is an <code>ExportFormat</code> enum which is used both by the <code>export</code> and <code>pip compile</code> commands, and it doesn't seem like we'd want an SBOM schema to be a valid format for <code>pip compile</code>, so we've split the enum up. Would you mind having a quick scan of the changes <a href="https://github.com/thomasschafer/uv/pull/4/">here</a> to see what you think?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @woodruffw by @woodruffw on 2025-09-24 16:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woodruffw">@woodruffw</a> on 2025-09-24 16:58</div>
            <div class="timeline-body"><p>Thanks @thomasschafer! I can take a look at those changes now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-17 13:43</div>
            <div class="timeline-body"><p>Hi team, we're trying to work out the best way to add metadata for workspace paths and PEP 508 markers to SBOMs exported from uv. We think the best way to include these would be under <a href="https://cyclonedx.org/docs/1.5/json/#components_items_properties">component properties</a>, e.g. for a marker:</p>
<pre><code class="language-json">&quot;properties&quot;: [
  {
    &quot;name&quot;: &quot;cdx:python:package:marker&quot;,
    &quot;value&quot;: &quot;python_full_version &gt;= '3.12' or sys_platform == 'win32'&quot;
  }
]
</code></pre>
<p>We think it would be best to namespace uv-specific properties under <code>cdx:uv</code>, following the standard approach of tools like Poetry (<code>cdx:poetry</code>), as shown <a href="https://github.com/CycloneDX/cyclonedx-property-taxonomy/blob/main/cdx.md">here</a>. We would contribute the namespace and taxonomy, similarly to <a href="https://github.com/CycloneDX/cyclonedx-property-taxonomy/pull/29/files">this PR</a>. Are you happy with this general approach?</p>
<p>We think we'd need properties for the following:</p>
<ul>
<li><strong>Workspace paths:</strong> We'd add <code>cdx:uv:workspace:path</code>, which would be for workspace packages only, containing the relative path to the package from the project root.</li>
<li><strong>PEP 508 markers:</strong> We think it would make sense to add this to the <code>cdx:python</code> namespace as <code>cdx:python:package:marker</code>, given that this is not a uv-specific concept, but if this is rejected by the Python CycloneDX maintainers we'd instead use the uv namespace i.e. <code>cdx:uv:package:marker</code>.</li>
</ul>
<p>@jkowalleck it would also be great to get your opinion here if you don't mind, as I can see that you have contributed a lot to the <a href="https://github.com/CycloneDX/cyclonedx-property-taxonomy">cyclonedx-property-taxonomy</a> repo! üôè</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-10-17 14:03</div>
            <div class="timeline-body"><p>re https://github.com/astral-sh/uv/issues/6012#issuecomment-3415682236</p>
<blockquote>
<p>We think it would be best to namespace uv-specific properties under <code>cdx:uv</code></p>
</blockquote>
<p><strong>PEP 508 markers</strong>: For the general python markers, sure, write a ticket/pullrequest to add something to the <code>cdx:python:*</code> namespace.
This would benefit everybody working with Python components.</p>
<p><strong>Workspace paths</strong>: All these <code>cdx:*</code> properties are owned by the CycloneDX team - see https://github.com/CycloneDX/cyclonedx-property-taxonomy/blob/f7c4136bf6175d2b0bef1dc0b1303a509e20bbb2/README.md?plain=1#L83. Using one like this means, that you dont have control over it.
I'd recommend that you register your own <code>uv</code> namespace - see <a href="https://github.com/CycloneDX/cyclonedx-property-taxonomy?tab=readme-ov-file#registering-new-top-level-namespaces">https://github.com/CycloneDX/cyclonedx-property-taxonomy?tab=readme-ov-file#registering-new-top-level-namespaces</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-17 14:20</div>
            <div class="timeline-body"><p>This is useful, thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-10-17 14:30</div>
            <div class="timeline-body"><p>re: PEP 508 - i dont think it is appropriate to put the constraints for dependencies in properties on a component.
dependencies and their constraints go into the <code>components</code> properties - these constraints are actually defined outside the respective dependent package - they come from the other package that defines the dependency</p>
<p>see the following scenario:
we have python packages <code>A</code>, <code>B</code>, <code>C</code>, <code>D</code>.</p>
<ul>
<li><code>A</code> depends on <code>B</code></li>
<li><code>A</code> depends on <code>C</code></li>
<li><code>B</code> depends on <code>D</code>, only if <code>python_full_version &gt;= '3.12'</code></li>
<li><code>C</code> depends on <code>D</code>, no matter what.</li>
</ul>
<p>how do you intend to solve this with properties?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-17 15:01</div>
            <div class="timeline-body"><p>It looks like uv has some method of solving this before reaching the export format-specific code - for instance, given this <code>pyproject.toml</code>:</p>
<pre><code class="language-toml">[project]
name = &quot;project&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.10&quot;
dependencies = [
    &quot;trio ; python_version &gt; '3.11'&quot;,
    &quot;trio ; sys_platform == 'win32'&quot;,
]

[build-system]
requires = [&quot;setuptools&gt;=42&quot;]
build-backend = &quot;setuptools.build_meta&quot;
</code></pre>
<p>we get this <code>requirements.txt</code>:</p>
<pre><code># This file was autogenerated by uv via the following command:
#    uv export --cache-dir [CACHE_DIR]
-e .
attrs==23.2.0 ; python_full_version &gt;= '3.12' or sys_platform == 'win32' \
    --hash=sha256:935dc3b529c262f6cf76e50877d35a4bd3c1de194fd41f47a2b7ae8f19971f30 \
    --hash=sha256:99b87a485a5820b23b879f04c2305b44b951b502fd64be915879d77a7e8fc6f1
    # via
    #   outcome
    #   trio
cffi==1.16.0 ; (python_full_version &gt;= '3.12' and implementation_name != 'pypy' and os_name == 'nt') or (implementation_name != 'pypy' and os_name == 'nt' and sys_platform == 'win32') \
    --hash=sha256:2c56b361916f390cd758a57f2e16233eb4f64bcbeee88a4881ea90fca14dc6ab \
    --hash=sha256:68678abf380b42ce21a5f2abde8efee05c114c2fdb2e9eef2efdb0257fba1235 \
    --hash=sha256:9f90389693731ff1f659e55c7d1640e2ec43ff725cc61b04b2f9c6d8d017df6a \
    --hash=sha256:b2ca4e77f9f47c55c194982e10f058db063937845bb2b7a86c84a6cfe0aefa8b \
    --hash=sha256:bcb3ef43e58665bbda2fb198698fcae6776483e0c4a631aa5647806c25e02cc0 \
    --hash=sha256:db8e577c19c0fda0beb7e0d4e09e0ba74b1e4c092e0e40bfa12fe05b6f6d75ba \
    --hash=sha256:e6024675e67af929088fda399b2094574609396b1decb609c55fa58b028a32a1
    # via trio
exceptiongroup==1.2.0 ; python_full_version &lt; '3.11' and sys_platform == 'win32' \
    --hash=sha256:4bfd3996ac73b41e9b9628b04e079f193850720ea5945fc96a08633c66912f14 \
    --hash=sha256:91f5c769735f051a4290d52edd0858999b57e5876e9f85937691bd4c9fa3ed68
    # via trio
idna==3.6 ; python_full_version &gt;= '3.12' or sys_platform == 'win32' \
    --hash=sha256:9ecdbbd083b06798ae1e86adcbfe8ab1479cf864e4ee30fe4e46a003d12491ca \
    --hash=sha256:c05567e9c24a6b9faaa835c4821bad0590fbb9d5779e7caa6e1cc4978e7eb24f
    # via trio
outcome==1.3.0.post0 ; python_full_version &gt;= '3.12' or sys_platform == 'win32' \
    --hash=sha256:9dcf02e65f2971b80047b377468e72a268e15c0af3cf1238e6ff14f7f91143b8 \
    --hash=sha256:e771c5ce06d1415e356078d3bdd68523f284b4ce5419828922b6871e65eda82b
    # via trio
pycparser==2.21 ; (python_full_version &gt;= '3.12' and implementation_name != 'pypy' and os_name == 'nt') or (implementation_name != 'pypy' and os_name == 'nt' and sys_platform == 'win32') \
    --hash=sha256:8ee45429555515e1f6b185e78100aea234072576aa43ab53aefcae078162fca9 \
    --hash=sha256:e644fdec12f7872f86c58ff790da456218b10f863970249516d60a5eaca77206
    # via cffi
sniffio==1.3.1 ; python_full_version &gt;= '3.12' or sys_platform == 'win32' \
    --hash=sha256:2f6da418d1f1e0fddd844478f41680e794e6051915791a034ff65e5f100525a2 \
    --hash=sha256:f4324edc670a0f49750a81b895f35c3adb843cca46f0530f79fc1babb23789dc
    # via trio
sortedcontainers==2.4.0 ; python_full_version &gt;= '3.12' or sys_platform == 'win32' \
    --hash=sha256:25caa5a06cc30b6b83d11423433f65d1f9d76c4c6a0c90e3379eaa43b9bfdb88 \
    --hash=sha256:a163dcaede0f1c021485e957a39245190e74249897e2ae4b2aa38595db237ee0
    # via trio
trio==0.25.0 ; python_full_version &gt;= '3.12' or sys_platform == 'win32' \
    --hash=sha256:9b41f5993ad2c0e5f62d0acca320ec657fdb6b2a2c22b8c7aed6caf154475c4e \
    --hash=sha256:e6458efe29cc543e557a91e614e2b51710eba2961669329ce9c862d50c6e8e81
    # via project
</code></pre>
<p>where the markers have been resolved. We can just use this existing logic when exporting SBOMs to get the relevant markers</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-10-19 11:06</div>
            <div class="timeline-body"><p>these &quot;markers&quot; are constraints, defining UNDER WHICH CIRCUMSTANCES a dependency is about to be used.
the information decides whether a component is a dependency and shall be installed. (regardless the constraints, a dependency is a dependency, right?)</p>
<p>how do you plan to put this &quot;marker&quot; information into an SBOM? My answer would be: this information does not belong in an SBOM.
And, I dont see a technical way to put this information in any SBOM anyway.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2025-10-19 13:58</div>
            <div class="timeline-body"><p>The <code>dependencies</code> property of the cdx spec documents the dependencies for each component, so I think the logic here is to use the <code># via &lt;component&gt;</code> comments in the <code>requirements.txt</code> to populate the <code>dependsOn</code> array for each component with already resolved dependencies. This information appears to be cached, so it can be reused instead of attempting to resolve the dependency graph again. Does that sound right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2025-10-19 14:11</div>
            <div class="timeline-body"><blockquote>
<p>We'll proceed with <code>--format=cyclonedx1.5</code> for JSON output. We'll start planning the work and will be in touch when we have a PR ready.</p>
</blockquote>
<p>May I suggest the more explicit:</p>
<p><code>--schema=cyclonedx1.5 --format=json</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-19 15:50</div>
            <div class="timeline-body"><blockquote>
<p>these &quot;markers&quot; are constraints, defining UNDER WHICH CIRCUMSTANCES a dependency is about to be used. the information decides whether a component is a dependency and shall be installed. (regardless the constraints, a dependency is a dependency, right?)</p>
<p>how do you plan to put this &quot;marker&quot; information into an SBOM? My answer would be: this information does not belong in an SBOM. And, I dont see a technical way to put this information in any SBOM anyway.</p>
</blockquote>
<p>Given this <code>pylock.toml</code>:</p>
<pre><code class="language-toml">[project]
name = &quot;project&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [&quot;anyio ; sys_platform == 'darwin'&quot;, &quot;iniconfig&quot;]

[build-system]
requires = [&quot;setuptools&gt;=42&quot;]
build-backend = &quot;setuptools.build_meta&quot;
</code></pre>
<p>I'd suggest that the SBOM should look like this, which the WIP implementation we're working on produces:</p>
<details>

<pre><code class="language-json">{
  &quot;bomFormat&quot;: &quot;CycloneDX&quot;,
  &quot;specVersion&quot;: &quot;1.5&quot;,
  &quot;version&quot;: 1,
  &quot;serialNumber&quot;: &quot;[SERIAL_NUMBER]&quot;,
  &quot;metadata&quot;: {
    &quot;timestamp&quot;: &quot;[TIMESTAMP]&quot;,
    &quot;tools&quot;: [
      {
        &quot;vendor&quot;: &quot;Astral Software Inc.&quot;,
        &quot;name&quot;: &quot;uv&quot;,
        &quot;version&quot;: &quot;[VERSION]&quot;
      }
    ],
    &quot;component&quot;: {
      &quot;type&quot;: &quot;application&quot;,
      &quot;bom-ref&quot;: &quot;1-project@0.1.0&quot;,
      &quot;name&quot;: &quot;project&quot;,
      &quot;version&quot;: &quot;0.1.0&quot;
    }
  },
  &quot;components&quot;: [
    {
      &quot;type&quot;: &quot;library&quot;,
      &quot;bom-ref&quot;: &quot;2-anyio@4.3.0&quot;,
      &quot;name&quot;: &quot;anyio&quot;,
      &quot;version&quot;: &quot;4.3.0&quot;,
      &quot;purl&quot;: &quot;pkg:pypi/anyio@4.3.0&quot;,
      &quot;properties&quot;: [
        {
          &quot;name&quot;: &quot;uv:package:marker&quot;,
          &quot;value&quot;: &quot;sys_platform == 'darwin'&quot;
        }
      ]
    },
    {
      &quot;type&quot;: &quot;library&quot;,
      &quot;bom-ref&quot;: &quot;3-idna@3.6&quot;,
      &quot;name&quot;: &quot;idna&quot;,
      &quot;version&quot;: &quot;3.6&quot;,
      &quot;purl&quot;: &quot;pkg:pypi/idna@3.6&quot;,
      &quot;properties&quot;: [
        {
          &quot;name&quot;: &quot;uv:package:marker&quot;,
          &quot;value&quot;: &quot;sys_platform == 'darwin'&quot;
        }
      ]
    },
    {
      &quot;type&quot;: &quot;library&quot;,
      &quot;bom-ref&quot;: &quot;4-iniconfig@2.0.0&quot;,
      &quot;name&quot;: &quot;iniconfig&quot;,
      &quot;version&quot;: &quot;2.0.0&quot;,
      &quot;purl&quot;: &quot;pkg:pypi/iniconfig@2.0.0&quot;
    },
    {
      &quot;type&quot;: &quot;library&quot;,
      &quot;bom-ref&quot;: &quot;5-sniffio@1.3.1&quot;,
      &quot;name&quot;: &quot;sniffio&quot;,
      &quot;version&quot;: &quot;1.3.1&quot;,
      &quot;purl&quot;: &quot;pkg:pypi/sniffio@1.3.1&quot;,
      &quot;properties&quot;: [
        {
          &quot;name&quot;: &quot;uv:package:marker&quot;,
          &quot;value&quot;: &quot;sys_platform == 'darwin'&quot;
        }
      ]
    }
  ],
  &quot;dependencies&quot;: [
    {
      &quot;ref&quot;: &quot;2-anyio@4.3.0&quot;,
      &quot;dependsOn&quot;: [
        &quot;3-idna@3.6&quot;,
        &quot;5-sniffio@1.3.1&quot;
      ]
    },
    {
      &quot;ref&quot;: &quot;3-idna@3.6&quot;,
      &quot;dependsOn&quot;: []
    },
    {
      &quot;ref&quot;: &quot;4-iniconfig@2.0.0&quot;,
      &quot;dependsOn&quot;: []
    },
    {
      &quot;ref&quot;: &quot;1-project@0.1.0&quot;,
      &quot;dependsOn&quot;: [
        &quot;2-anyio@4.3.0&quot;,
        &quot;4-iniconfig@2.0.0&quot;
      ]
    },
    {
      &quot;ref&quot;: &quot;5-sniffio@1.3.1&quot;,
      &quot;dependsOn&quot;: []
    }
  ]
}
</code></pre>
</details>

<p>For reference, here is the <code>requirements.txt</code> that uv current exports:</p>
<details>

<pre><code># This file was autogenerated by uv via the following command:
#    uv export --cache-dir [CACHE_DIR]
-e .
anyio==4.3.0 ; sys_platform == 'darwin' \
    --hash=sha256:048e05d0f6caeed70d731f3db756d35dcc1f35747c8c403364a8332c630441b8 \
    --hash=sha256:f75253795a87df48568485fd18cdd2a3fa5c4f7c5be8e5e36637733fce06fed6
    # via project
idna==3.6 ; sys_platform == 'darwin' \
    --hash=sha256:9ecdbbd083b06798ae1e86adcbfe8ab1479cf864e4ee30fe4e46a003d12491ca \
    --hash=sha256:c05567e9c24a6b9faaa835c4821bad0590fbb9d5779e7caa6e1cc4978e7eb24f
    # via anyio
iniconfig==2.0.0 \
    --hash=sha256:2d91e135bf72d31a410b17c16da610a82cb55f6b0477d1a902134b24a455b8b3 \
    --hash=sha256:b6a85871a79d2e3b22d2d1b94ac2824226a63c6b741c88f7ae975f18b6778374
    # via project
sniffio==1.3.1 ; sys_platform == 'darwin' \
    --hash=sha256:2f6da418d1f1e0fddd844478f41680e794e6051915791a034ff65e5f100525a2 \
    --hash=sha256:f4324edc670a0f49750a81b895f35c3adb843cca46f0530f79fc1babb23789dc
    # via anyio
</code></pre>
</details>

<p>It's useful to have these markers in the SBOM so that vulnerability scanning tools can filter out issues that are not relevant given a particular environment. For instance, in the example above, if there was a vulnerability in <code>anyio@4.3.0</code> (which has marker <code>sys_platform == 'darwin'</code>), then customers using darwin as a platform would be vulnerable and should be informed as such, and those using another platform would not and so should not be given a false positive vulnerability finding.</p>
<p>Let me know if I'm missing something!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-19 15:55</div>
            <div class="timeline-body"><blockquote>
<p>May I suggest the more explicit:</p>
<p><code>--schema=cyclonedx1.5 --format=json</code></p>
</blockquote>
<p>I don't object to this but, given how little usage there is of XML CycloneDX SBOMs, we weren't sure how useful it would be when discussing previously. Even if we do want to add a <code>--format</code> flag that can be either <code>json</code> or <code>xml</code>, I would suggest that <code>json</code> should be the default so that users can still just use <code>--schema=cyclonedx1.5</code> and get a JSON SBOM out, with an option to set <code>--format=xml</code> if needed. I'm happy to let the uv maintainers decide here</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2025-10-19 16:47</div>
            <div class="timeline-body"><p>I don‚Äôt see anything wrong with defaulting to JSON since it s probably the most widely used format in this space!</p>
<blockquote>
<p>Let me know if I'm missing something!</p>
</blockquote>
<p>Any thoughts on adding <code>hashes</code> for each component?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2025-10-19 16:58</div>
            <div class="timeline-body"><p>Also‚Ä¶ I wonder if it would be a good idea to omit <code>&quot;dependsOn&quot;: []</code> for components without dependencies. <code>dependsOn</code> doesn‚Äôt seem to be a required property per <a href="https://cyclonedx.org/docs/1.5/json/#dependencies_items_dependsOn">this</a>.</p>
<p>Maybe there is a benefit to the added lines/noise that isn‚Äôt immediately obvious?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-19 19:57</div>
            <div class="timeline-body"><blockquote>
<p>Any thoughts on adding <code>hashes</code> for each component?</p>
</blockquote>
<p>It didn't feel immediately necessary given that there are no imminent plans for importing an SBOM into a uv project, but I'm interested to hear others' thoughts.</p>
<p>If we did want to add hashes then there would be some questions to address I think - for instance, where would we put them in the SBOM? They could be added as uv-namespaced properties, such as <code>uv:package:hashes</code>, or alternatively we could make use of <code>externalReferences</code> (see <a href="https://cyclonedx.org/docs/1.5/json/#components_items_externalReferences">here</a>) which has a <code>hashes</code> field, but  <code>externalReferences</code> also requires fields <code>type</code> and <code>url</code> - I guess type would be <code>distribution</code> and <code>url</code> would be easy for wheels but less clear for other types of package. I think <code>externalReferences</code> makes the most sense as it is referenced in the Python namespace taxonomy <a href="https://github.com/CycloneDX/cyclonedx-property-taxonomy/blob/main/cdx/python.md#cdxpythonpackagesource-namespace-taxonomy">here</a>.</p>
<p>Maybe could be added in a separate PR when these questions are fleshed out a little more?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-19 20:03</div>
            <div class="timeline-body"><blockquote>
<p>Also‚Ä¶ I wonder if it would be a good idea to omit <code>&quot;dependsOn&quot;: []</code> for components without dependencies. <code>dependsOn</code> doesn‚Äôt seem to be a required property per <a href="https://cyclonedx.org/docs/1.5/json/#dependencies_items_dependsOn">this</a>.</p>
</blockquote>
<p>I thought that most users would read</p>
<ul>
<li>empty <code>dependsOn</code> -&gt; we looked for dependencies and there are none</li>
<li>omitted <code>dependsOn</code> -&gt; there might be some dependencies but we didn't look</li>
</ul>
<p>I think that technically (according to the <a href="https://cyclonedx.org/docs/1.5/json/#dependencies_items_dependsOn">spec</a>) an omitted <code>dependsOn</code> actually does mean that there are no deps, but I wonder if just being explicit will make users' (and maintainers') lives easier, at the cost of a very slightly larger SBOM?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-20 14:07</div>
            <div class="timeline-body"><blockquote>
<p>It's useful to have these markers in the SBOM so that vulnerability scanning tools can filter out issues that are not relevant given a particular environment</p>
</blockquote>
<p>I agree having the markers in the SBOM seems useful.</p>
<p>Naively, I'm not sure it should use a <code>uv</code>-specific tag though? The markers are just standard Python package markers and that makes it sound like a tool-specific format. I might expect <code>python:package:marker</code>?</p>
<p>edit: I missed this comment https://github.com/astral-sh/uv/issues/6012#issuecomment-3415750026 which discusses this as well.</p>
<blockquote>
<p>May I suggest the more explicit:</p>
<p>--schema=cyclonedx1.5 --format=json</p>
</blockquote>
<p>I don't think this matches our existing use of <code>--format</code> here and I don't think it's worth the complexity of adding another flag. We can always consider something like this in the future if the need arises.</p>
<blockquote>
<p>Any thoughts on adding hashes for each component?</p>
</blockquote>
<p>This seems reasonable to me.</p>
<p>edit: I agree with https://github.com/astral-sh/uv/issues/6012#issuecomment-3419914733 it seems fine to defer this work too.</p>
<blockquote>
<p>I wonder if it would be a good idea to omit &quot;dependsOn&quot;: [] for components without dependencies. dependsOn doesn‚Äôt seem to be a required property per <a href="https://cyclonedx.org/docs/1.5/json/#dependencies_items_dependsOn">this</a>.</p>
</blockquote>
<p>I'd probably keep it, seems like it'd make life easier for a consumer.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-10-20 14:30</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>Any thoughts on adding <code>hashes</code> for each component?</p>
</blockquote>
<p>It didn't feel immediately necessary given that there are no imminent plans for importing an SBOM into a uv project, but I'm interested to hear others' thoughts.</p>
<p>If we did want to add hashes then there would be some questions to address I think - for instance, where would we put them in the SBOM? They could be added as uv-namespaced properties, such as <code>uv:package:hashes</code>, or alternatively we could make use of <code>externalReferences</code> (see <a href="https://cyclonedx.org/docs/1.5/json/#components_items_externalReferences">here</a>) which has a <code>hashes</code> field, but <code>externalReferences</code> also requires fields <code>type</code> and <code>url</code> - I guess type would be <code>distribution</code> and <code>url</code> would be easy for wheels but less clear for other types of package. I think <code>externalReferences</code> makes the most sense as it is referenced in the Python namespace taxonomy <a href="https://github.com/CycloneDX/cyclonedx-property-taxonomy/blob/main/cdx/python.md#cdxpythonpackagesource-namespace-taxonomy">here</a>.</p>
<p>Maybe could be added in a separate PR when these questions are fleshed out a little more?</p>
</blockquote>
<p>are these hashes calculated and owned by<code>uv</code>? then these hashes would go into a <code>$.components[].property</code>. at best, a property owned by the UV team.</p>
<p>if the hashes are just the usual checksums of a package(wheel/archive) that might be downloaded to resolve a dependency, then the hashes go to external references.</p>
<p>I highly suggest you look at the prior art:</p>
<ul>
<li>requirements<ul>
<li>input: https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/infiles/requirements/with-hashes.txt</li>
<li>SBOM result: https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/requirements/file_with-hashes_1.6.json.bin</li>
</ul>
</li>
<li>poetry<ul>
<li>input lockfile: https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/infiles/poetry/with-extras/lock21/poetry.lock</li>
<li>SBOM result:  https://github.com/CycloneDX/cyclonedx-python/blob/main/tests/_data/snapshots/poetry/all-extras_with-extras_lock20_1.6.json.bin</li>
</ul>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-20 14:34</div>
            <div class="timeline-body"><p>Thanks @jkowalleck, from my understanding they are checksums so sounds like <code>externalReferences</code> is the way forward. Based on the comment <a href="https://github.com/astral-sh/uv/issues/6012#issuecomment-3422243573">here</a> I think we'll leave the hashes out of this initial PR and they can be added in future using the info you've shared!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-10-20 14:36</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>Also‚Ä¶ I wonder if it would be a good idea to omit <code>&quot;dependsOn&quot;: []</code> for components without dependencies. <code>dependsOn</code> doesn‚Äôt seem to be a required property per <a href="https://cyclonedx.org/docs/1.5/json/#dependencies_items_dependsOn">this</a>.</p>
</blockquote>
<p>I thought that most users would read</p>
<pre><code>* empty `dependsOn` -&gt; we looked for dependencies and there are none

* omitted `dependsOn` -&gt; there might be some dependencies but we didn't look</code></pre>
<p>I think that technically (according to the <a href="https://cyclonedx.org/docs/1.5/json/#dependencies_items_dependsOn">spec</a>) an omitted <code>dependsOn</code> actually does mean that there are no deps, but I wonder if just being explicit will make users' (and maintainers') lives easier, at the cost of a very slightly larger SBOM?</p>
</blockquote>
<p>nope. no <code>dependsOn</code> is the same as an empty <code>dependsOn</code> - meaning there are no dependencies.</p>
<p>to indicate SBOM completeness, use <code>$.compositions[].dependencies[]</code> - see https://cyclonedx.org/docs/1.6/json/#compositions_items_dependencies. Be aware, that <code>$.compositions[].dependencies[]</code> is an addition to <code>$.dependencies</code> - it does not replace it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-10-20 14:44</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>these &quot;markers&quot; are constraints, defining UNDER WHICH CIRCUMSTANCES a dependency is about to be used. the information decides whether a component is a dependency and shall be installed. (regardless the constraints, a dependency is a dependency, right?)
how do you plan to put this &quot;marker&quot; information into an SBOM? My answer would be: this information does not belong in an SBOM. And, I dont see a technical way to put this information in any SBOM anyway.</p>
</blockquote>
<p>Given this <code>pylock.toml</code>:</p>
<pre><code class="language-toml">[project]
name = &quot;project&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [&quot;anyio ; sys_platform == 'darwin'&quot;, &quot;iniconfig&quot;]

[build-system]
requires = [&quot;setuptools&gt;=42&quot;]
build-backend = &quot;setuptools.build_meta&quot;
</code></pre>
<p>I'd suggest that the SBOM should look like this, which the WIP implementation we're working on produces:
{see https://github.com/astral-sh/uv/issues/6012#issuecomment-3419762626}</p>
<p>For reference, here is the <code>requirements.txt</code> that uv current exports:
{see https://github.com/astral-sh/uv/issues/6012#issuecomment-3419762626}</p>
<p>It's useful to have these markers in the SBOM so that vulnerability scanning tools can filter out issues that are not relevant given a particular environment. For instance, in the example above, if there was a vulnerability in <code>anyio@4.3.0</code> (which has marker <code>sys_platform == 'darwin'</code>), then customers using darwin as a platform would be vulnerable and should be informed as such, and those using another platform would not and so should not be given a false positive vulnerability finding.</p>
<p>Let me know if I'm missing something!</p>
</blockquote>
<p>To my understanding, this provided SBOM is utterly wrong.
the properties of a component belong to a component.
the properties you used are based on information regarding a dependency constraint - they are NOT defined by the component - and they dont belong to the component.
Furthermore, the name <code>up:package:marker</code> are simply misleading. it is a dependency constraint, the value has nothing todo with a package, or does it?</p>
<p>Therefore, the properties are wrong and confusing.
the claimed use case is impossible to solve with the SBOM you provide. as explained <a href="https://github.com/astral-sh/uv/issues/6012#issuecomment-3419578289">earlier</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-20 14:47</div>
            <div class="timeline-body"><blockquote>
<p>nope. no <code>dependsOn</code> is the same as an empty <code>dependsOn</code> - meaning there are no dependencies.</p>
<p>to indicate SBOM completeness, use <code>$.compositions[].dependencies[]</code> - see https://cyclonedx.org/docs/1.6/json/#compositions_items_dependencies. Be aware, that <code>$.compositions[].dependencies[]</code> is an addition to <code>$.dependencies</code> - it does not replace it.</p>
</blockquote>
<p>To clarify, this is what I meant when I said &quot;technically (according to the spec) an omitted dependsOn actually does mean that there are no deps&quot;, but again I'm just trying to make the maintainer's lives easier here, which @zanieb seems to agree with based on &quot;I'd probably keep it, seems like it'd make life easier for a consumer.&quot; in https://github.com/astral-sh/uv/issues/6012#issuecomment-3422243573.</p>
<p>In the case of the SBOMs exported by uv, is there much benefit to adding <code>$.compositions[].dependencies[]</code> given that we already will have all dependencies under <code>$.dependencies</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-10-20 14:49</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>nope. no <code>dependsOn</code> is the same as an empty <code>dependsOn</code> - meaning there are no dependencies.
to indicate SBOM completeness, use <code>$.compositions[].dependencies[]</code> - see https://cyclonedx.org/docs/1.6/json/#compositions_items_dependencies. Be aware, that <code>$.compositions[].dependencies[]</code> is an addition to <code>$.dependencies</code> - it does not replace it.</p>
</blockquote>
<p>To clarify, this is what I meant when I said &quot;technically (according to the spec) an omitted dependsOn actually does mean that there are no deps&quot;, but again I'm just trying to make the maintainer's lives easier here, which <a href="https://github.com/zanieb">@zanieb</a> seems to agree with based on &quot;I'd probably keep it, seems like it'd make life easier for a consumer.&quot; in <a href="https://github.com/astral-sh/uv/issues/6012#issuecomment-3422243573">#6012 (comment)</a>.</p>
<p>In the case of the SBOMs exported by uv, is there much benefit to adding <code>$.compositions[].dependencies[]</code> given that we already will have all dependencies under <code>$.dependencies</code>?</p>
</blockquote>
<p>nope. not much benefit of adding <code>$.compositions[].dependencies[]</code>, unless you omit certain dependencies/components, and you want to express this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-20 14:53</div>
            <div class="timeline-body"><blockquote>
<p>To my understanding, this provided SBOM is utterly wrong. the properties of a component belong to a component. the properties you used are based on information regarding a dependency constraint - they are NOT defined by the component - and they dont belong to the component. Furthermore, the name <code>up:package:marker</code> are simply misleading. it is a dependency constraint, the value has nothing todo with a package, or does it?</p>
</blockquote>
<p>This should be <code>cdx:python:package:marker</code>, I just hadn't updated it at the time!</p>
<p>It is relevant to a package and not a component in this case. As explained <a href="https://github.com/astral-sh/uv/issues/6012#issuecomment-3415951667">here</a>, uv has a method of resolving markers on dependencies to build a marker that applies to the package as a whole, which means it becomes applicable to the component in the SBOM and not the dependency.</p>
<p>For instance, in the <code>pylock.toml</code> <a href="https://github.com/astral-sh/uv/issues/6012#issuecomment-3415951667">here</a> we have</p>
<pre><code class="language-toml">dependencies = [
    &quot;trio ; python_version &gt; '3.11'&quot;,
    &quot;trio ; sys_platform == 'win32'&quot;,
]
</code></pre>
<p>which results in</p>
<pre><code>trio==0.25.0 ; python_full_version &gt;= '3.12' or sys_platform == 'win32' \
</code></pre>
<p>in the <code>requirements.txt</code>, and which we will also use in the SBOM. <code>python_version &gt; '3.11'</code> and <code>sys_platform == 'win32'</code> both apply to the dependency, but <code>python_full_version &gt;= '3.12' or sys_platform == 'win32'</code> applies to the component as a whole, which is why we're planning on adding the latter to the SBOM and not the former.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-10-20 15:02</div>
            <div class="timeline-body"><p>re https://github.com/astral-sh/uv/issues/6012#issuecomment-3422430301</p>
<blockquote>
<p>This should be <code>cdx:python:package:marker</code>, I just hadn't updated it at the time!</p>
</blockquote>
<p>there is no such thing <code>cdx:python:package:marker</code> yet, and there never will be.
Reason:</p>
<ul>
<li>the thing you call markers are dependency constraints per <a href="https://peps.python.org/pep-0508/">PEP508</a>.</li>
<li>CycloneDX dependencies don't know properties nor constraints.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-20 15:06</div>
            <div class="timeline-body"><blockquote>
<p>there is no such thing <code>cdx:python:package:marker</code> yet, and there never will be. Reason:</p>
<ul>
<li>the thing you call markers are dependency constraints per <a href="https://peps.python.org/pep-0508/">PEP508</a>.</li>
<li>CycloneDX dependencies don't know properties nor constraints.</li>
</ul>
</blockquote>
<p>You appeared to say in https://github.com/astral-sh/uv/issues/6012#issuecomment-3415750026 that we should add it to the <code>cdx:python</code> namespace - we can keep it in the <code>uv</code> namespace though given the objection</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-10-20 15:12</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>there is no such thing <code>cdx:python:package:marker</code> yet, and there never will be. Reason:</p>
<ul>
<li>the thing you call markers are dependency constraints per <a href="https://peps.python.org/pep-0508/">PEP508</a>.</li>
<li>CycloneDX dependencies don't know properties nor constraints.</li>
</ul>
</blockquote>
<p>You appeared to say in <a href="https://github.com/astral-sh/uv/issues/6012#issuecomment-3415750026">#6012 (comment)</a> that we should add it to the <code>cdx:python</code> namespace - we can keep it in the <code>uv</code> namespace though given the objection</p>
</blockquote>
<p>I sayed:</p>
<blockquote>
<p>For the general python markers, sure, write a ticket/pullrequest to add something to the cdx:python:* namespace.</p>
</blockquote>
<p>In case this was a general python packaging feature, sure, pull request it for the taxonomy, and we might discuss the use and definition.</p>
<p>But you are not using a general python packaging feature, are you?
this resolution is unique to <code>uv</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-20 15:15</div>
            <div class="timeline-body"><blockquote>
<p>But you are not using a general python packaging feature, are you? this resolution is unique to <code>uv</code>.</p>
</blockquote>
<p>I think the resolution is implemented by uv but I don‚Äôt see why another tool couldn‚Äôt implement the same thing. Given the uncertainty though let‚Äôs stick with the <code>uv</code> namespace</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-20 16:00</div>
            <div class="timeline-body"><blockquote>
<p>the thing you call markers are dependency constraints per <a href="https://peps.python.org/pep-0508/">PEP508</a>.</p>
</blockquote>
<p>Huh? Please see the following section of the specification https://peps.python.org/pep-0508/#environment-markers
PEP 508 does not refer to anything as a &quot;dependency constraint&quot;, so I'm not sure where you're getting that from ‚Äî can you quote the section you are referencing? The marker is a component of a dependency specification. Version constraints, which is the closest term I can think of, are a separate component.</p>
<blockquote>
<p>It is relevant to a package and not a component in this case. As explained https://github.com/astral-sh/uv/issues/6012#issuecomment-3415951667, uv has a method of resolving markers on dependencies to build a marker that applies to the package as a whole, which means it becomes applicable to the component in the SBOM and not the dependency.</p>
</blockquote>
<p>Just to confirm, this understanding of uv's resolver is correct.</p>
<blockquote>
<p>But you are not using a general python packaging feature, are you? this resolution is unique to uv.</p>
</blockquote>
<p>I'm not sure what this means. Resolution is always going to be unique to the resolver and each resolution can produce entirely different sets of packages so the entire SBOM is predicated on the tool-specific resolution.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2025-10-20 18:25</div>
            <div class="timeline-body"><p>The <code>components.hashes</code> array of the SBOM seems to be the place to document the hashes of the components of the project. Each item in that array has properties <code>alg</code> (e.g. <code>‚ÄùSHA-256‚Äù</code>) and <code>content</code> (the actual hash value). <code>externalReferences</code> seems to be a catch all for various hyperlinks pertaining to the project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-10-21 07:35</div>
            <div class="timeline-body"><blockquote>
<p>The <code>components.hashes</code> array of the SBOM seems to be the place to document the hashes of the components of the project. Each item in that array has properties <code>alg</code> (e.g. <code>‚ÄùSHA-256‚Äù</code>) and <code>content</code> (the actual hash value). <code>externalReferences</code> seems to be a catch all for various hyperlinks pertaining to the project.</p>
</blockquote>
<p><code>components.hashes</code> is for the component. for example <code>npm</code> and <code>yarn</code> have internal integrity hash calculations - which could go here.</p>
<p>the hashes of a <code>requirements.txt</code> and other hashes that refer to files downloaded from PyPI and other sources refer to the hash of a downloadable file.
they go to <code>externalReferences</code>.
see https://github.com/astral-sh/uv/issues/6012#issuecomment-3422335660</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomasschafer">@thomasschafer</a> on 2025-10-27 16:01</div>
            <div class="timeline-body"><p>@jkowalleck did you have any more thoughts on having the resolved marker under the <code>cdx:python</code> namespace, based on @zanieb's thoughts here https://github.com/astral-sh/uv/issues/6012#issuecomment-3422732821?</p>
<p>If you are open to it, I have a PR <a href="https://github.com/CycloneDX/cyclonedx-property-taxonomy/pull/142">here</a> to add it, but I appreciate that there was some disagreement here so happy to continue the discussion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jkowalleck">@jkowalleck</a> on 2025-10-27 17:23</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/jkowalleck">@jkowalleck</a> did you have any more thoughts on having the resolved marker under the <code>cdx:python</code> namespace, based on <a href="https://github.com/zanieb">@zanieb</a>'s thoughts here <a href="https://github.com/astral-sh/uv/issues/6012#issuecomment-3422732821">#6012 (comment)</a>?</p>
<p>If you are open to it, I have a PR <a href="https://github.com/CycloneDX/cyclonedx-property-taxonomy/pull/142">here</a> to add it, but I appreciate that there was some disagreement here so happy to continue the discussion.</p>
</blockquote>
<p>The python packaging &quot;marker&quot; is for dependencies, still. Using it for components instead makes no sense, or does it?</p>
<p>Everybody, please be invited to discuss it here https://github.com/CycloneDX/cyclonedx-property-taxonomy/pull/142</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @woodruffw on 2025-11-20 17:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bunny-therapist">@bunny-therapist</a> on 2025-11-20 18:48</div>
            <div class="timeline-body"><p>Great! Any plans to make it possible for the sbom to be included in built packages, in the PEP-specified .dist-info/sboms directory?</p>
<p>I suppose we can already just create an sbom and list it in the pyproject metadata, but something more encapsulated, so that sbom is built at build time? Like make it dynamic metadata created by the build backend, for example?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:26:06 UTC
    </footer>
</body>
</html>
