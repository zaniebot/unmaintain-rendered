<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remove `filename` from `File` struct - astral-sh/uv #6132</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Remove `filename` from `File` struct</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/6132">#6132</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-08-16 01:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-16 01:05</div>
            <div class="timeline-body"><p>There's a section in <a href="https://peps.python.org/pep-0691/#why-include-the-filename-when-the-url-has-it-already">PEP 691</a> that says:</p>
<blockquote>
<p>We could reduce the size of our responses by removing the filename key and expecting clients to pull that information out of the URL.</p>
</blockquote>
<blockquote>
<p>Currently this PEP chooses not to do that, largely because <a href="https://peps.python.org/pep-0503/">PEP 503</a> explicitly required that the filename be available via the anchor tag of the links, though that was largely because something had to be there. It’s not clear if repositories in the wild always have a filename as the last part of the URL or if they’re relying on the filename in the anchor tag.</p>
</blockquote>
<blockquote>
<p>It also makes the responses slightly nicer to read for a human, as you get a nice short unique identifier.</p>
</blockquote>
<blockquote>
<p>If we got reasonable confidence that mandating the filename is in the URL, then we could drop this data and reduce the size of the JSON response.</p>
</blockquote>
<p>But <a href="https://peps.python.org/pep-0503/">PEP 503</a> says:</p>
<blockquote>
<p>The href attribute MUST be a URL that links to the location of the file for download, and the text of the anchor tag MUST match the final path component (the filename) of the URL.</p>
</blockquote>
<p>I think we actually rely on the filename exactly matching the end of the URL, e.g., when serializing and deserializing the lockfile. So I think we should just rip it out.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">performance</span> added by @charliermarsh on 2024-08-16 01:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:21 UTC
    </footer>
</body>
</html>
