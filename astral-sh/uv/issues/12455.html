<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Installing secp256k1 fails on uv but not on pip? - astral-sh/uv #12455</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Installing secp256k1 fails on uv but not on pip?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/12455">#12455</a>
        opened by <a href="https://github.com/saschanaz">@saschanaz</a>
        on 2025-03-24 23:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/saschanaz">@saschanaz</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Somehow when triggered by uv, the build script tries to find aclocal-1.16 when I only have aclocal-1.17. But checking out the <a href="https://github.com/rustyrussell/secp256k1-py/">repository</a> and running <code>uv build</code> succeeds. Running <code>pip install secp256k1==0.14.0</code> on system python also succeeds, which is 3.13.2.</p>
<p>A test pyproject:</p>
<pre><code class="language-toml">[project]
name = &quot;test&quot;
version = &quot;0.0.0&quot;
dependencies = [
    &quot;secp256k1 == 0.14.0&quot;
]
</code></pre>
<p>The full log:</p>
<details>

<pre><code>$ uv run --no-cache
warning: No `requires-python` value found in the workspace. Defaulting to `&gt;=3.13`.
  × Failed to build `secp256k1==0.14.0`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit status: 1)

      [stdout]
      2.4.3
      Using bundled libsecp256k1
      running bdist_wheel
      running build
      running build_py
      creating build/lib.linux-x86_64-cpython-313/secp256k1
      copying secp256k1/__main__.py -&gt; build/lib.linux-x86_64-cpython-313/secp256k1
      copying secp256k1/__init__.py -&gt; build/lib.linux-x86_64-cpython-313/secp256k1
      running build_clib
      Building experimental
      checking build system type... x86_64-pc-linux-gnu
      checking host system type... x86_64-pc-linux-gnu
      checking for a BSD-compatible install... /usr/bin/install -c
      checking whether build environment is sane... yes
      checking for a thread-safe mkdir -p... /usr/bin/mkdir -p
      checking for gawk... gawk
      checking whether make sets $(MAKE)... yes
      checking whether make supports nested variables... yes
      checking how to print strings... printf
      checking whether make supports the include directive... yes (GNU style)
      checking for gcc... gcc
      checking whether the C compiler works... yes
      checking for C compiler default output file name... a.out
      checking for suffix of executables...
      checking whether we are cross compiling... no
      checking for suffix of object files... o
      checking whether we are using the GNU C compiler... yes
      checking whether gcc accepts -g... yes
      checking for gcc option to accept ISO C89... none needed
      checking whether gcc understands -c and -o together... yes
      checking dependency style of gcc... none
      checking for a sed that does not truncate output... /usr/bin/sed
      checking for grep that handles long lines and -e... /usr/bin/grep
      checking for egrep... /usr/bin/grep -E
      checking for fgrep... /usr/bin/grep -F
      checking for ld used by gcc... /usr/bin/ld
      checking if the linker (/usr/bin/ld) is GNU ld... yes
      checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
      checking the name lister (/usr/bin/nm -B) interface... BSD nm
      checking whether ln -s works... yes
      checking the maximum length of command line arguments... 1572864
      checking how to convert x86_64-pc-linux-gnu file names to x86_64-pc-linux-gnu format... func_convert_file_noop
      checking how to convert x86_64-pc-linux-gnu file names to toolchain format... func_convert_file_noop
      checking for /usr/bin/ld option to reload object files... -r
      checking for objdump... objdump
      checking how to recognize dependent libraries... pass_all
      checking for dlltool... no
      checking how to associate runtime and link libraries... printf %s\n
      checking for ar... ar
      checking for archiver @FILE support... @
      checking for strip... strip
      checking for ranlib... ranlib
      checking command to parse /usr/bin/nm -B output from gcc object... ok
      checking for sysroot... no
      checking for a working dd... /usr/bin/dd
      checking how to truncate binary pipes... /usr/bin/dd bs=4096 count=1
      checking for mt... no
      checking if : is a manifest tool... no
      checking how to run the C preprocessor... gcc -E
      checking for ANSI C header files... yes
      checking for sys/types.h... yes
      checking for sys/stat.h... yes
      checking for stdlib.h... yes
      checking for string.h... yes
      checking for memory.h... yes
      checking for strings.h... yes
      checking for inttypes.h... yes
      checking for stdint.h... yes
      checking for unistd.h... yes
      checking for dlfcn.h... yes
      checking for objdir... .libs
      checking if gcc supports -fno-rtti -fno-exceptions... no
      checking for gcc option to produce PIC... -fPIC -DPIC
      checking if gcc PIC flag -fPIC -DPIC works... yes
      checking if gcc static flag -static works... yes
      checking if gcc supports -c -o file.o... yes
      checking if gcc supports -c -o file.o... (cached) yes
      checking whether the gcc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
      checking dynamic linker characteristics... GNU/Linux ld.so
      checking how to hardcode library paths into programs... immediate
      checking whether stripping libraries is possible... yes
      checking if libtool supports shared libraries... yes
      checking whether to build shared libraries... no
      checking whether to build static libraries... yes
      checking whether make supports nested variables... (cached) yes
      checking for pkg-config... /usr/bin/pkg-config
      checking pkg-config is at least version 0.9.0... yes
      checking for ar... /usr/bin/ar
      checking for ranlib... /usr/bin/ranlib
      checking for strip... /usr/bin/strip
      checking for gcc option to accept ISO C89... (cached) none needed
      checking dependency style of gcc... none
      checking if gcc supports -Werror=unknown-warning-option... no
      checking if gcc supports -std=c89 -pedantic -Wno-long-long -Wnested-externs -Wshadow -Wstrict-prototypes -Wundef... yes
      checking if gcc supports -Wno-overlength-strings... yes
      checking if gcc supports -Wall... yes
      checking if gcc supports -Wno-unused-function... yes
      checking if gcc supports -Wextra... yes
      checking if gcc supports -Wcast-align... yes
      checking if gcc supports -Wcast-align=strict... yes
      checking if gcc supports -Wconditional-uninitialized... no
      checking if gcc supports -fvisibility=hidden... yes
      checking valgrind/memcheck.h usability... no
      checking valgrind/memcheck.h presence... no
      checking for valgrind/memcheck.h... no
      checking for x86_64 assembly availability... yes
      configure: ******
      configure: WARNING: experimental build
      configure: Experimental features do not have stable APIs or properties, and may not be safe for production use.
      configure: Building extrakeys module: yes
      configure: Building schnorrsig module: yes
      configure: ******
      checking that generated files are newer than configure... done
      configure: creating ./config.status
      config.status: creating Makefile
      config.status: creating libsecp256k1.pc
      config.status: creating src/libsecp256k1-config.h
      config.status: executing depfiles commands
      config.status: executing libtool commands

      Build Options:
        with ecmult precomp     = yes
        with external callbacks = no
        with benchmarks         = yes
        with tests              = yes
        with coverage           = no
        module ecdh             = yes
        module recovery         = yes
        module extrakeys        = yes
        module schnorrsig       = yes

        asm                     = x86_64
        ecmult window size      = 15
        ecmult gen prec. bits   = 4

        valgrind                = no
        CC                      = gcc
        CPPFLAGS                =
        SECP_CFLAGS             = -O2  -std=c89 -pedantic -Wno-long-long -Wnested-externs -Wshadow -Wstrict-prototypes -Wundef -Wno-overlength-strings -Wall
      -Wno-unused-function -Wextra -Wcast-align -Wcast-align=strict -fvisibility=hidden
        CFLAGS                  = -g -O2
        LDFLAGS                 =

        CC_FOR_BUILD            = gcc
        CPPFLAGS_FOR_BUILD      =
        SECP_CFLAGS_FOR_BUILD   = -O2  -std=c89 -pedantic -Wno-long-long -Wnested-externs -Wshadow -Wstrict-prototypes -Wundef -Wno-overlength-strings -Wall
      -Wno-unused-function -Wextra -Wcast-align -Wcast-align=strict -fvisibility=hidden
        CFLAGS_FOR_BUILD        = -g -O2
        LDFLAGS_FOR_BUILD       =
      CDPATH=&quot;${ZSH_VERSION+.}:&quot; &amp;&amp; cd /tmp/.tmp22pCnI/sdists-v9/pypi/secp256k1/0.14.0/1W-XseqHB4GOYwJ0K2YVo/src/libsecp256k1 &amp;&amp; /bin/sh
      /tmp/.tmp22pCnI/sdists-v9/pypi/secp256k1/0.14.0/1W-XseqHB4GOYwJ0K2YVo/src/libsecp256k1/build-aux/missing aclocal-1.16 -I build-aux/m4

      [stderr]
      /tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/_distutils/dist.py:289: UserWarning: Unknown distribution option: 'tests_require'
        warnings.warn(msg)
      /tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/dist.py:759: SetuptoolsDeprecationWarning: License classifiers are deprecated.
      !!

              ********************************************************************************
              Please consider removing the following classifiers in favor of a SPDX license expression:

              License :: OSI Approved :: MIT License

              See https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#license for details.
              ********************************************************************************

      !!
        self._finalize_license_expression()
      The [wheel] section is deprecated. Use [bdist_wheel] instead.
      /tmp/.tmp22pCnI/sdists-v9/pypi/secp256k1/0.14.0/1W-XseqHB4GOYwJ0K2YVo/src/libsecp256k1/build-aux/missing: line 81: aclocal-1.16: command not found
      WARNING: 'aclocal-1.16' is missing on your system.
               You should only need it if you modified 'acinclude.m4' or
               'configure.ac' or m4 files included by 'configure.ac'.
               The 'aclocal' program is part of the GNU Automake package:
               &lt;https://www.gnu.org/software/automake&gt;
               It also requires GNU Autoconf, GNU m4 and Perl in order to run:
               &lt;https://www.gnu.org/software/autoconf&gt;
               &lt;https://www.gnu.org/software/m4/&gt;
               &lt;https://www.perl.org/&gt;
      make: *** [Makefile:870: /tmp/.tmp22pCnI/sdists-v9/pypi/secp256k1/0.14.0/1W-XseqHB4GOYwJ0K2YVo/src/libsecp256k1/aclocal.m4] Error 127
      Traceback (most recent call last):
        File &quot;&lt;string&gt;&quot;, line 11, in &lt;module&gt;
          wheel_filename = backend.build_wheel(&quot;/tmp/.tmp22pCnI/builds-v0/.tmprjw3VY&quot;, {}, None)
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/build_meta.py&quot;, line 435, in build_wheel
          return _build(['bdist_wheel'])
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/build_meta.py&quot;, line 426, in _build
          return self._build_with_temp_dir(
                 ~~~~~~~~~~~~~~~~~~~~~~~~~^
              cmd,
              ^^^^
          ...&lt;3 lines&gt;...
              self._arbitrary_args(config_settings),
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
          )
          ^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/build_meta.py&quot;, line 407, in _build_with_temp_dir
          self.run_setup()
          ~~~~~~~~~~~~~~^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/build_meta.py&quot;, line 522, in run_setup
          super().run_setup(setup_script=setup_script)
          ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/build_meta.py&quot;, line 320, in run_setup
          exec(code, locals())
          ~~~~^^^^^^^^^^^^^^^^
        File &quot;&lt;string&gt;&quot;, line 265, in &lt;module&gt;
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/__init__.py&quot;, line 117, in setup
          return distutils.core.setup(**attrs)
                 ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/_distutils/core.py&quot;, line 186, in setup
          return run_commands(dist)
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/_distutils/core.py&quot;, line 202, in run_commands
          dist.run_commands()
          ~~~~~~~~~~~~~~~~~^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/_distutils/dist.py&quot;, line 1002, in run_commands
          self.run_command(cmd)
          ~~~~~~~~~~~~~~~~^^^^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/dist.py&quot;, line 1104, in run_command
          super().run_command(command)
          ~~~~~~~~~~~~~~~~~~~^^^^^^^^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/_distutils/dist.py&quot;, line 1021, in run_command
          cmd_obj.run()
          ~~~~~~~~~~~^^
        File &quot;&lt;string&gt;&quot;, line 112, in run
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/command/bdist_wheel.py&quot;, line 370, in run
          self.run_command(&quot;build&quot;)
          ~~~~~~~~~~~~~~~~^^^^^^^^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/_distutils/cmd.py&quot;, line 357, in run_command
          self.distribution.run_command(command)
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/dist.py&quot;, line 1104, in run_command
          super().run_command(command)
          ~~~~~~~~~~~~~~~~~~~^^^^^^^^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/_distutils/dist.py&quot;, line 1021, in run_command
          cmd_obj.run()
          ~~~~~~~~~~~^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/_distutils/command/build.py&quot;, line 135, in run
          self.run_command(cmd_name)
          ~~~~~~~~~~~~~~~~^^^^^^^^^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/_distutils/cmd.py&quot;, line 357, in run_command
          self.distribution.run_command(command)
          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/dist.py&quot;, line 1104, in run_command
          super().run_command(command)
          ~~~~~~~~~~~~~~~~~~~^^^^^^^^^
        File &quot;/tmp/.tmp22pCnI/builds-v0/.tmphvFwxX/lib/python3.13/site-packages/setuptools/_distutils/dist.py&quot;, line 1021, in run_command
          cmd_obj.run()
          ~~~~~~~~~~~^^
        File &quot;&lt;string&gt;&quot;, line 219, in run
        File &quot;/home/kagami/.local/share/uv/python/cpython-3.13.0-linux-x86_64-gnu/lib/python3.13/subprocess.py&quot;, line 419, in check_call
          raise CalledProcessError(retcode, cmd)
      subprocess.CalledProcessError: Command '['make']' returned non-zero exit status 2.

      hint: This usually indicates a problem with the package or the build environment.
  help: `secp256k1` (v0.14.0) was included because `test` (v0.0.0) depends on `secp256k1`
</code></pre>
</details>

<h3>Platform</h3>
<p>Linux 6.13.6-arch1-1-surface x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.6.9 (3d9460278 2025-03-20)</p>
<h3>Python version</h3>
<p>3.13 (<code>uv run python --version</code> obviously fails because of the installation failure)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @saschanaz on 2025-03-24 23:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-01 18:35</div>
            <div class="timeline-body"><p>Do you mean <code>0.14.0</code> or <code>1.14.0</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-01 18:37</div>
            <div class="timeline-body"><p>Looks like <code>1.14.0</code> doesn't exist, so you mean <code>pip install 0.14.0</code> works? Can you share logs for that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-01 18:37</div>
            <div class="timeline-body"><p>Can you also include the flags described in https://docs.astral.sh/uv/reference/troubleshooting/build-failures/#confirming-that-a-build-failure-is-specific-to-uv</p>
<p>Can you also share the result of <code>uv python find</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/shroominic">@shroominic</a> on 2025-04-21 08:24</div>
            <div class="timeline-body"><p>same problem when trying to install <code>cashu</code></p>
<pre><code> &gt; [4/6] RUN uv sync --no-cache:                          
#8 0.424 Using CPython 3.11.12 interpreter at: /usr/local/bin/python3                                               
#8 0.424 Creating virtual environment at: /.venv          
#8 0.435 Resolved 81 packages in 2ms                      
#8 0.726 Downloading asyncpg (2.9MiB)
#8 0.727 Downloading coincurve (1.2MiB)
#8 0.729 Downloading setuptools (1.2MiB)
#8 0.729 Downloading grpcio-tools (2.7MiB)
#8 0.729 Downloading cryptography (3.7MiB)
#8 0.730 Downloading pygments (1.2MiB)
#8 0.730 Downloading sqlalchemy (3.0MiB)
#8 0.731 Downloading zstandard (4.7MiB)
#8 0.731 Downloading greenlet (1.1MiB)
#8 0.731 Downloading grpcio (5.8MiB)
#8 0.805 Downloading pycryptodomex (2.1MiB)
#8 0.805 Downloading cashu (6.7MiB)
#8 0.806 Downloading brotli (2.8MiB)
#8 0.806 Downloading uvloop (3.6MiB)
#8 5.879  Downloaded greenlet
#8 6.014  Downloaded coincurve
#8 6.055  Downloaded setuptools
#8 6.091  Downloaded pygments
#8 8.775  Downloaded pycryptodomex
#8 9.726    Building secp256k1==0.14.0
#8 10.26  Downloaded grpcio-tools
#8 10.72  Downloaded brotli
#8 10.85  Downloaded sqlalchemy
#8 10.91  Downloaded asyncpg
#8 11.63  Downloaded cryptography
#8 11.63  Downloaded uvloop
#8 13.31  Downloaded zstandard
#8 13.70  Downloaded grpcio
#8 13.85  Downloaded cashu
#8 17.93   × Failed to build `secp256k1==0.14.0`
#8 17.93   ├─▶ The build backend returned an error
#8 17.93   ╰─▶ Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit
#8 17.93       status: 1)
#8 17.93 
#8 17.93       [stdout]
#8 17.93       2.3.0
#8 17.93       Using bundled libsecp256k1
#8 17.93       running bdist_wheel
#8 17.93       running build
#8 17.93       running build_py
#8 17.93       creating build/lib.linux-aarch64-cpython-311/secp256k1
#8 17.93       copying secp256k1/__init__.py -&gt;
#8 17.93       build/lib.linux-aarch64-cpython-311/secp256k1
#8 17.93       copying secp256k1/__main__.py -&gt;
#8 17.93       build/lib.linux-aarch64-cpython-311/secp256k1
#8 17.93       running build_clib
#8 17.93       Building experimental
#8 17.93       checking build system type... aarch64-unknown-linux-musl
#8 17.93       checking host system type... aarch64-unknown-linux-musl
#8 17.93       checking for a BSD-compatible install... /usr/bin/install -c
#8 17.93       checking whether build environment is sane... yes
#8 17.93       checking for a thread-safe mkdir -p...
#8 17.93       /tmp/.tmpFY0jjm/sdists-v9/pypi/secp256k1/0.14.0/h4IdzNs_d8C9elgNF3SJH/src/libsecp256k1/build-aux/install-sh
#8 17.93       -c -d
#8 17.93       checking for gawk... no
#8 17.93       checking for mawk... no
#8 17.93       checking for nawk... no
#8 17.93       checking for awk... awk
#8 17.93       checking whether make sets $(MAKE)... yes
#8 17.93       checking whether make supports nested variables... yes
#8 17.93       checking how to print strings... printf
#8 17.93       checking whether make supports the include directive... yes (GNU style)
#8 17.93       checking for gcc... gcc
#8 17.93       checking whether the C compiler works... yes
#8 17.93       checking for C compiler default output file name... a.out
#8 17.93       checking for suffix of executables...
#8 17.93       checking whether we are cross compiling... no
#8 17.93       checking for suffix of object files... o
#8 17.93       checking whether we are using the GNU C compiler... yes
#8 17.93       checking whether gcc accepts -g... yes
#8 17.93       checking for gcc option to accept ISO C89... none needed
#8 17.93       checking whether gcc understands -c and -o together... yes
#8 17.93       checking dependency style of gcc... none
#8 17.93       checking for a sed that does not truncate output... /bin/sed
#8 17.93       checking for grep that handles long lines and -e... /bin/grep
#8 17.93       checking for egrep... /bin/grep -E
#8 17.93       checking for fgrep... /bin/grep -F
#8 17.93       checking for ld used by gcc... /usr/aarch64-alpine-linux-musl/bin/ld
#8 17.93       checking if the linker (/usr/aarch64-alpine-linux-musl/bin/ld) is GNU
#8 17.93       ld... yes
#8 17.93       checking for BSD- or MS-compatible name lister (nm)... /usr/bin/nm -B
#8 17.93       checking the name lister (/usr/bin/nm -B) interface... BSD nm
#8 17.93       checking whether ln -s works... yes
#8 17.93       checking the maximum length of command line arguments... 98304
#8 17.93       checking how to convert aarch64-unknown-linux-musl file names to
#8 17.93       aarch64-unknown-linux-musl format... func_convert_file_noop
#8 17.93       checking how to convert aarch64-unknown-linux-musl file names to
#8 17.93       toolchain format... func_convert_file_noop
#8 17.93       checking for /usr/aarch64-alpine-linux-musl/bin/ld option to reload
#8 17.93       object files... -r
#8 17.93       checking for objdump... objdump
#8 17.93       checking how to recognize dependent libraries... pass_all
#8 17.93       checking for dlltool... no
#8 17.93       checking how to associate runtime and link libraries... printf %s\n
#8 17.93       checking for ar... ar
#8 17.93       checking for archiver @FILE support... @
#8 17.93       checking for strip... strip
#8 17.93       checking for ranlib... ranlib
#8 17.93       checking command to parse /usr/bin/nm -B output from gcc object... ok
#8 17.93       checking for sysroot... no
#8 17.93       checking for a working dd... /bin/dd
#8 17.93       checking how to truncate binary pipes... /bin/dd bs=4096 count=1
#8 17.93       checking for mt... no
#8 17.93       checking if : is a manifest tool... no
#8 17.93       checking how to run the C preprocessor... gcc -E
#8 17.93       checking for ANSI C header files... yes
#8 17.93       checking for sys/types.h... yes
#8 17.93       checking for sys/stat.h... yes
#8 17.93       checking for stdlib.h... yes
#8 17.93       checking for string.h... yes
#8 17.93       checking for memory.h... yes
#8 17.93       checking for strings.h... yes
#8 17.93       checking for inttypes.h... yes
#8 17.93       checking for stdint.h... yes
#8 17.93       checking for unistd.h... yes
#8 17.93       checking for dlfcn.h... yes
#8 17.93       checking for objdir... .libs
#8 17.93       checking if gcc supports -fno-rtti -fno-exceptions... no
#8 17.93       checking for gcc option to produce PIC... -fPIC -DPIC
#8 17.93       checking if gcc PIC flag -fPIC -DPIC works... yes
#8 17.93       checking if gcc static flag -static works... yes
#8 17.93       checking if gcc supports -c -o file.o... yes
#8 17.93       checking if gcc supports -c -o file.o... (cached) yes
#8 17.93       checking whether the gcc linker (/usr/aarch64-alpine-linux-musl/bin/ld)
#8 17.93       supports shared libraries... yes
#8 17.93       checking dynamic linker characteristics... GNU/Linux ld.so
#8 17.93       checking how to hardcode library paths into programs... immediate
#8 17.93       checking whether stripping libraries is possible... yes
#8 17.93       checking if libtool supports shared libraries... yes
#8 17.93       checking whether to build shared libraries... no
#8 17.93       checking whether to build static libraries... yes
#8 17.93       checking whether make supports nested variables... (cached) yes
#8 17.93       checking for pkg-config... /usr/bin/pkg-config
#8 17.93       checking pkg-config is at least version 0.9.0... yes
#8 17.93       checking for ar... /usr/bin/ar
#8 17.93       checking for ranlib... /usr/bin/ranlib
#8 17.93       checking for strip... /usr/bin/strip
#8 17.93       checking for gcc option to accept ISO C89... (cached) none needed
#8 17.93       checking dependency style of gcc... none
#8 17.93       checking if gcc supports -Werror=unknown-warning-option... no
#8 17.93       checking if gcc supports -std=c89 -pedantic -Wno-long-long
#8 17.93       -Wnested-externs -Wshadow -Wstrict-prototypes -Wundef... yes
#8 17.93       checking if gcc supports -Wno-overlength-strings... yes
#8 17.93       checking if gcc supports -Wall... yes
#8 17.93       checking if gcc supports -Wno-unused-function... yes
#8 17.93       checking if gcc supports -Wextra... yes
#8 17.93       checking if gcc supports -Wcast-align... yes
#8 17.93       checking if gcc supports -Wcast-align=strict... yes
#8 17.93       checking if gcc supports -Wconditional-uninitialized... no
#8 17.93       checking if gcc supports -fvisibility=hidden... yes
#8 17.93       checking valgrind/memcheck.h usability... no
#8 17.93       checking valgrind/memcheck.h presence... no
#8 17.93       checking for valgrind/memcheck.h... no
#8 17.93       checking for x86_64 assembly availability... no
#8 17.93       configure: ******
#8 17.93       configure: WARNING: experimental build
#8 17.93       configure: Experimental features do not have stable APIs or properties,
#8 17.93       and may not be safe for production use.
#8 17.93       configure: Building extrakeys module: yes
#8 17.93       configure: Building schnorrsig module: yes
#8 17.93       configure: ******
#8 17.93       checking that generated files are newer than configure... done
#8 17.93       configure: creating ./config.status
#8 17.93       config.status: creating Makefile
#8 17.93       config.status: creating libsecp256k1.pc
#8 17.93       config.status: creating src/libsecp256k1-config.h
#8 17.93       config.status: executing depfiles commands
#8 17.93       config.status: executing libtool commands
#8 17.93 
#8 17.93       Build Options:
#8 17.93         with ecmult precomp     = yes
#8 17.93         with external callbacks = no
#8 17.93         with benchmarks         = yes
#8 17.93         with tests              = yes
#8 17.93         with coverage           = no
#8 17.93         module ecdh             = yes
#8 17.93         module recovery         = yes
#8 17.93         module extrakeys        = yes
#8 17.93         module schnorrsig       = yes
#8 17.93 
#8 17.93         asm                     = no
#8 17.93         ecmult window size      = 15
#8 17.93         ecmult gen prec. bits   = 4
#8 17.93 
#8 17.93         valgrind                = no
#8 17.93         CC                      = gcc
#8 17.93         CPPFLAGS                =
#8 17.93         SECP_CFLAGS             = -O2  -std=c89 -pedantic -Wno-long-long
#8 17.93       -Wnested-externs -Wshadow -Wstrict-prototypes -Wundef
#8 17.93       -Wno-overlength-strings -Wall -Wno-unused-function -Wextra -Wcast-align
#8 17.93       -Wcast-align=strict -fvisibility=hidden
#8 17.93         CFLAGS                  = -g -O2
#8 17.93         LDFLAGS                 =
#8 17.93 
#8 17.93         CC_FOR_BUILD            = gcc
#8 17.93         CPPFLAGS_FOR_BUILD      =
#8 17.93         SECP_CFLAGS_FOR_BUILD   = -O2  -std=c89 -pedantic -Wno-long-long
#8 17.93       -Wnested-externs -Wshadow -Wstrict-prototypes -Wundef
#8 17.93       -Wno-overlength-strings -Wall -Wno-unused-function -Wextra -Wcast-align
#8 17.93       -Wcast-align=strict -fvisibility=hidden
#8 17.93         CFLAGS_FOR_BUILD        = -g -O2
#8 17.93         LDFLAGS_FOR_BUILD       =
#8 17.93       CDPATH=&quot;${ZSH_VERSION+.}:&quot; &amp;&amp; cd
#8 17.93       /tmp/.tmpFY0jjm/sdists-v9/pypi/secp256k1/0.14.0/h4IdzNs_d8C9elgNF3SJH/src/libsecp256k1
#8 17.93       &amp;&amp; /bin/sh
#8 17.93       /tmp/.tmpFY0jjm/sdists-v9/pypi/secp256k1/0.14.0/h4IdzNs_d8C9elgNF3SJH/src/libsecp256k1/build-aux/missing
#8 17.93       aclocal-1.16 -I build-aux/m4
#8 17.93 
#8 17.93       [stderr]
#8 17.93       /tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/_distutils/dist.py:289:
#8 17.93       UserWarning: Unknown distribution option: 'tests_require'
#8 17.93         warnings.warn(msg)
#8 17.93       /tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/dist.py:759:
#8 17.93       SetuptoolsDeprecationWarning: License classifiers are deprecated.
#8 17.93       !!
#8 17.93 
#8 17.93       
#8 17.93       ********************************************************************************
#8 17.93               Please consider removing the following classifiers in favor of a
#8 17.93       SPDX license expression:
#8 17.93 
#8 17.93               License :: OSI Approved :: MIT License
#8 17.93 
#8 17.93               See
#8 17.93       https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#license
#8 17.93       for details.
#8 17.93       
#8 17.93       ********************************************************************************
#8 17.93 
#8 17.93       !!
#8 17.93         self._finalize_license_expression()
#8 17.93       The [wheel] section is deprecated. Use [bdist_wheel] instead.
#8 17.93       /tmp/.tmpFY0jjm/sdists-v9/pypi/secp256k1/0.14.0/h4IdzNs_d8C9elgNF3SJH/src/libsecp256k1/build-aux/missing:
#8 17.93       line 81: aclocal-1.16: not found
#8 17.93       WARNING: 'aclocal-1.16' is missing on your system.
#8 17.93                You should only need it if you modified 'acinclude.m4' or
#8 17.93                'configure.ac' or m4 files included by 'configure.ac'.
#8 17.93                The 'aclocal' program is part of the GNU Automake package:
#8 17.93                &lt;https://www.gnu.org/software/automake&gt;
#8 17.93                It also requires GNU Autoconf, GNU m4 and Perl in order to run:
#8 17.93                &lt;https://www.gnu.org/software/autoconf&gt;
#8 17.93                &lt;https://www.gnu.org/software/m4/&gt;
#8 17.93                &lt;https://www.perl.org/&gt;
#8 17.93       make: *** [Makefile:870:
#8 17.93       /tmp/.tmpFY0jjm/sdists-v9/pypi/secp256k1/0.14.0/h4IdzNs_d8C9elgNF3SJH/src/libsecp256k1/aclocal.m4]
#8 17.93       Error 127
#8 17.93       Traceback (most recent call last):
#8 17.93         File &quot;&lt;string&gt;&quot;, line 11, in &lt;module&gt;
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/build_meta.py&quot;,
#8 17.93       line 432, in build_wheel
#8 17.93           return _build(['bdist_wheel'])
#8 17.93                  ^^^^^^^^^^^^^^^^^^^^^^^
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/build_meta.py&quot;,
#8 17.93       line 423, in _build
#8 17.93           return self._build_with_temp_dir(
#8 17.93                  ^^^^^^^^^^^^^^^^^^^^^^^^^^
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/build_meta.py&quot;,
#8 17.93       line 404, in _build_with_temp_dir
#8 17.93           self.run_setup()
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/build_meta.py&quot;,
#8 17.93       line 512, in run_setup
#8 17.93           super().run_setup(setup_script=setup_script)
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/build_meta.py&quot;,
#8 17.93       line 317, in run_setup
#8 17.93           exec(code, locals())
#8 17.93         File &quot;&lt;string&gt;&quot;, line 265, in &lt;module&gt;
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/__init__.py&quot;,
#8 17.93       line 117, in setup
#8 17.93           return distutils.core.setup(**attrs)
#8 17.93                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/_distutils/core.py&quot;,
#8 17.93       line 186, in setup
#8 17.93           return run_commands(dist)
#8 17.93                  ^^^^^^^^^^^^^^^^^^
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/_distutils/core.py&quot;,
#8 17.93       line 202, in run_commands
#8 17.93           dist.run_commands()
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/_distutils/dist.py&quot;,
#8 17.93       line 1002, in run_commands
#8 17.93           self.run_command(cmd)
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/dist.py&quot;,
#8 17.93       line 1104, in run_command
#8 17.93           super().run_command(command)
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/_distutils/dist.py&quot;,
#8 17.93       line 1021, in run_command
#8 17.93           cmd_obj.run()
#8 17.93         File &quot;&lt;string&gt;&quot;, line 112, in run
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/command/bdist_wheel.py&quot;,
#8 17.93       line 370, in run
#8 17.93           self.run_command(&quot;build&quot;)
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/_distutils/cmd.py&quot;,
#8 17.93       line 357, in run_command
#8 17.93           self.distribution.run_command(command)
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/dist.py&quot;,
#8 17.93       line 1104, in run_command
#8 17.93           super().run_command(command)
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/_distutils/dist.py&quot;,
#8 17.93       line 1021, in run_command
#8 17.93           cmd_obj.run()
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/_distutils/command/build.py&quot;,
#8 17.93       line 135, in run
#8 17.93           self.run_command(cmd_name)
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/_distutils/cmd.py&quot;,
#8 17.93       line 357, in run_command
#8 17.93           self.distribution.run_command(command)
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/dist.py&quot;,
#8 17.93       line 1104, in run_command
#8 17.93           super().run_command(command)
#8 17.93         File
#8 17.93       &quot;/tmp/.tmpFY0jjm/builds-v0/.tmpvfMR41/lib/python3.11/site-packages/setuptools/_distutils/dist.py&quot;,
#8 17.93       line 1021, in run_command
#8 17.93           cmd_obj.run()
#8 17.93         File &quot;&lt;string&gt;&quot;, line 219, in run
#8 17.93         File &quot;/usr/local/lib/python3.11/subprocess.py&quot;, line 413, in
#8 17.93       check_call
#8 17.93           raise CalledProcessError(retcode, cmd)
#8 17.93       subprocess.CalledProcessError: Command '['make']' returned non-zero exit
#8 17.93       status 2.
#8 17.93 
#8 17.93       hint: This usually indicates a problem with the package or the build
#8 17.93       environment.
#8 17.93   help: `secp256k1` (v0.14.0) was included because `proxy` (v0.1.0)
#8 17.93         depends on `cashu` (v0.16.5) which depends on `secp256k1`
------
executor failed running [/bin/sh -c uv sync --no-cache]: exit code: 1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/saschanaz">@saschanaz</a> on 2025-04-21 08:47</div>
            <div class="timeline-body"><blockquote>
<p>Looks like <code>1.14.0</code> doesn't exist, so you mean <code>pip install 0.14.0</code> works? Can you share logs for that?</p>
</blockquote>
<p>From <code>pip install . --log output.txt</code>: <a href="https://github.com/user-attachments/files/19831720/output.txt">output.txt</a> (build starts around line 8912 with the message &quot;Running command Building wheel for secp256k1 (pyproject.toml)&quot;. Not sure what the initial &quot;Requirement already satisfied&quot; means, because this ran after <code>pip uninstall secp256k1 &amp;&amp; pip cache purge</code> and the full build ran as you can see in the log anyway.</p>
<blockquote>
<p>Can you also include the flags described in https://docs.astral.sh/uv/reference/troubleshooting/build-failures/#confirming-that-a-build-failure-is-specific-to-uv</p>
</blockquote>
<pre><code>[kagami@SURFINAZ-7 test-pyproject]$ uv venv -p 3.13 --seed
Using CPython 3.13.0
Creating virtual environment with seed packages at: .venv
 + pip==25.0.1
Activate with: source .venv/bin/activate
[kagami@SURFINAZ-7 test-pyproject]$ source .venv/bin/activate
(test-pyproject) [kagami@SURFINAZ-7 test-pyproject]$ pip install --use-pep517 --no-cache --force-reinstall 'secp256k1==0.14.0'
Collecting secp256k1==0.14.0
  Downloading secp256k1-0.14.0.tar.gz (2.4 MB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.4/2.4 MB 40.1 MB/s eta 0:00:00
  Installing build dependencies ... done
  Getting requirements to build wheel ... done
  Installing backend dependencies ... done
  Preparing metadata (pyproject.toml) ... done
Collecting cffi&gt;=1.3.0 (from secp256k1==0.14.0)
  Downloading cffi-1.17.1-cp313-cp313-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (1.5 kB)
Collecting pycparser (from cffi&gt;=1.3.0-&gt;secp256k1==0.14.0)
  Downloading pycparser-2.22-py3-none-any.whl.metadata (943 bytes)
Downloading cffi-1.17.1-cp313-cp313-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (479 kB)
Downloading pycparser-2.22-py3-none-any.whl (117 kB)
Building wheels for collected packages: secp256k1
  Building wheel for secp256k1 (pyproject.toml) ... done
  Created wheel for secp256k1: filename=secp256k1-0.14.0-cp313-cp313-linux_x86_64.whl size=1374027 sha256=5c52e640f2227ac11cca59bfc08d35615968fdad6e702176e0b09588d4b99c85
  Stored in directory: /tmp/pip-ephem-wheel-cache-63w2lb2_/wheels/6e/9d/fb/914714811fd30b1504681ce23dd928f0729273710d60918caa
Successfully built secp256k1
Installing collected packages: pycparser, cffi, secp256k1
Successfully installed cffi-1.17.1 pycparser-2.22 secp256k1-0.14.0
</code></pre>
<blockquote>
<p>Can you also share the result of <code>uv python find</code>?</p>
</blockquote>
<p><code>/home/kagami/.local/share/uv/python/cpython-3.13.0-linux-x86_64-gnu/bin/python3.13</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/saschanaz">@saschanaz</a> on 2025-04-21 09:05</div>
            <div class="timeline-body"><p>(BTW, as a workaround one could migrate to <a href="https://github.com/rustyrussell/secp256k1-py/pull/23">my PR</a> which uses CMake instead of autotools, although I have no intention to maintain any further than what <a href="https://github.com/snarfed/bridgy-fed">bridgy-fed</a> needs)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:30:37 UTC
    </footer>
</body>
</html>
