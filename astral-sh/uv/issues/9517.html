<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enable package overrides for 'tool install' - astral-sh/uv #9517</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Enable package overrides for &#x27;tool install&#x27;</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9517">#9517</a>
        opened by <a href="https://github.com/restlessronin">@restlessronin</a>
        on 2024-11-29 09:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/restlessronin">@restlessronin</a></div>
            <div class="timeline-body"><p>I have a CLI app that is currently being built by poetry (https://pypi.org/project/llm-context/). &#x27;pipx&#x27; is used to install it. There are no dependency issues at either build or resolution times. And the package runs fine.</p>
<p>I want to be able to do a &#x27;uv tool install&#x27; for this package.</p>
<p>There are no problems when I build using &#x27;uv&#x27;. When I try to install, I get</p>
<pre><code> uv tool install &quot;llm-context @ .&quot;
  √ó No solution found when resolving dependencies:
  ‚ï∞‚îÄ‚ñ∂ Because tree-sitter-languages==1.10.2 has no wheels with a matching Python ABI tag
      and llm-context==0.1.1 depends on tree-sitter-languages==1.10.2, we can conclude that
      llm-context==0.1.1 cannot be used.
      And because only llm-context==0.1.1 is available and you require llm-context, we can
      conclude that your requirements are unsatisfiable.
</code></pre>
<p>Since I know it is currently running without apparent problems with the pipx install, I would like to force the override. Ideally I would do this at build time, rather than at install time.</p>
<p>I found this <a href="https://github.com/astral-sh/uv/pull/631">astral-sh/uv#631</a> which seems to do what I want (although it&#x27;s at install time), but this is for pip-install. Apparently the equivalent is not set up for tool install?</p>
<p>I&#x27;m wondering if there are plans to enable this for tools as well. As I said it&#x27;s ideally something that goes into the metadata at build time, so that uv knows to override the dependency at install time.</p>
<p>Great project! Thanks for all the work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-29 16:56</div>
            <div class="timeline-body"><p>Hmm yeah, we probably need to accept <code>--with-overrides</code> or <code>--with-constraints</code> or something like that here. \cc @zanieb</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-29 16:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/restlessronin">@restlessronin</a> on 2024-11-29 17:07</div>
            <div class="timeline-body"><p>Great.</p>
<p>&#x27;uv pip install&quot; appears to work with project metadata, i.e. if I build with</p>
<pre><code>[tool.uv]
override-dependencies = [
  &quot;tree-sitter-languages==1.10.2&quot;
]
</code></pre>
<p>in the &#x27;pyproject.toml&#x27; file, I don&#x27;t seem to need to specify overrides at install time. That would be the ideal solution.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-29 17:09</div>
            <div class="timeline-body"><p><code>uv tool</code> intentionally doesn&#x27;t read project configuration, though, since it&#x27;s a &quot;global&quot; command.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/restlessronin">@restlessronin</a> on 2024-11-29 17:17</div>
            <div class="timeline-body"><p>ah. i thought the project metadata (including the override-dependencies) might be getting baked into the package at build time, and available to &#x27;uv&#x27; at install time. i guess that&#x27;s not what&#x27;s happening here? I&#x27;m not very familiar with python packaging so I&#x27;m ignorant of the details.</p>
<p>That would seem to indicate that there would be no way to do <code>uvx &lt;package-name / script-name&gt;</code> on a new machine and have it just work (since my package has this resolution issue). That&#x27;s a shame. Seeing that work at speed with a python package was quite magical.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-29 17:31</div>
            <div class="timeline-body"><p>Ah yeah, that metadata isn&#x27;t available at <code>uv tool install</code> time if the package is coming from PyPI. It&#x27;s not included in the distribution, since that piece is all standardized.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-29 17:32</div>
            <div class="timeline-body"><p>I&#x27;m confused though, how / why does your package work if it has this problem? Why does <code>pipx</code> let you install it...?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/restlessronin">@restlessronin</a> on 2024-11-29 17:36</div>
            <div class="timeline-body"><p>I&#x27;m afraid I don&#x27;t know enough about python installation to answer that question. I don&#x27;t get any warnings from pipx install, and the package functionality works fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-29 17:40</div>
            <div class="timeline-body"><p>My guess is that you&#x27;re using different Python versions -- <code>tree-sitter-languages</code> doesn&#x27;t have wheels for Python 3.13, but I&#x27;m guessing that&#x27;s what you&#x27;re using by default, whereas pipx is using some other, older Python version. What does <code> uv tool install --python 3.12 &quot;llm-context @ .&quot;</code> give you?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/restlessronin">@restlessronin</a> on 2024-11-30 05:35</div>
            <div class="timeline-body"><p>Yup. That worked. Thanks! üôèüèæ</p>
<p>I had already set &quot;.python-version&quot; to 3.12 to see if that was the issue, but I guess tool install doesn&#x27;t look at the project settings.</p>
<p>Now if there were a way to run &#x27;uvx&#x27; directly with the CLI scripts within the package, that would be my ideal scenario. But this is already really good.</p>
<p>Once again, thanks. Keep up the amazing work!</p>
<p>UPDATE:</p>
<p>I tried</p>
<pre><code>requires-python = &quot;&gt;=3.10,&lt;3.13&quot;
</code></pre>
<p>To see if &#x27;uv tool install&#x27; would solve correctly with the modified python version constraint, but it didn&#x27;t work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-01 03:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-03 01:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:35:51 UTC
    </footer>
</body>
</html>
