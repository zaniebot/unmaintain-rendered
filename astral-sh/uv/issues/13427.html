<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv init` cannot create `.git` - astral-sh/uv #13427</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`uv init` cannot create `.git`</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/13427">#13427</a>
        opened by <a href="https://github.com/gbaian10">@gbaian10</a>
        on 2025-05-13 08:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/gbaian10">@gbaian10</a> on 2025-05-13 08:55</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>When I run <code>uv init temp --verbose</code>, it cannot generate the <code>.git</code> folder and <code>.gitignore</code> file.
But if I explicitly specify the VCS with <code>uv init temp --verbose --vcs git</code>, then it does create them.</p>
<p>I usually run this in another environment where this issue does not occur.
Is it possible that something is causing it not to create git-related resources?</p>
<pre><code>DEBUG uv 0.7.3
DEBUG No Python version file found in ancestors of working directory: /home/gbaian10/temp
DEBUG Checking for Python environment at `temp/.venv`
DEBUG Searching for default Python interpreter in managed installations or search path
DEBUG Searching for managed installations at `.local/share/uv/python`
DEBUG Found `cpython-3.10.12-linux-x86_64-gnu` at `/usr/bin/python` (first executable in the search path)
DEBUG `git rev-parse --is-inside-work-tree` failed but didn't contain `not a git repository` in stderr for `/home/gbaian10/temp`
DEBUG No Python version file found in ancestors of working directory: /home/gbaian10/temp
DEBUG Writing Python versions to `/home/gbaian10/temp/.python-version`
Initialized project `temp` at `/home/gbaian10/temp`
</code></pre>
<h3>Platform</h3>
<p>Ubuntu 22.04</p>
<h3>Version</h3>
<p>uv 0.7.3</p>
<h3>Python version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @gbaian10 on 2025-05-13 08:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-13 09:12</div>
            <div class="timeline-body"><p>What does this print when run before creating the <code>.git</code> folder?</p>
<pre><code>git rev-parse --is-inside-work-tree
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gbaian10">@gbaian10</a> on 2025-05-13 09:21</div>
            <div class="timeline-body"><blockquote>
<p>What does this print when run before creating the <code>.git</code> folder?</p>
<pre><code>git rev-parse --is-inside-work-tree
</code></pre>
</blockquote>
<pre><code>fatal: not a git repository (or any of the parent directories): .git
</code></pre>
<p>But when I run <code>uv init temp --verbose --vcs git</code>, it gets the same output verbose, but it successfully created a Git repository.</p>
<hr />
<p>In another normal environment (where Git is generated correctly), I ran <code>uv init temp --verbose</code> and got the following output.</p>
<pre><code>DEBUG uv 0.7.3
DEBUG No Python version file found in ancestors of working directory: /home/vscode/temp
DEBUG Checking for Python environment at `temp/.venv`
DEBUG Searching for default Python interpreter in managed installations or search path
DEBUG Searching for managed installations at `.local/share/uv/python`
DEBUG Found managed installation `cpython-3.13.3-linux-x86_64-gnu`
DEBUG Found `cpython-3.13.3-linux-x86_64-gnu` at `/home/vscode/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/bin/python3.13` (managed installations)
DEBUG Not a Git repository `/home/vscode/temp`
DEBUG No Python version file found in ancestors of working directory: /home/vscode/temp
DEBUG Writing Python versions to `/home/vscode/temp/.python-version`
Initialized project `temp` at `/home/vscode/temp`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @konstin on 2025-05-13 09:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @konstin on 2025-05-13 09:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-13 09:27</div>
            <div class="timeline-body"><p>The only reason why Git would fail to initialize is when <code>git rev-parse --is-inside-work-tree</code> fails oddly, but I can't really tell why this fails as I can't reproduce the environment in which it fails.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gbaian10">@gbaian10</a> on 2025-05-13 09:51</div>
            <div class="timeline-body"><p>I reinstalling uv also had no effect and did not solve the problem.
However, if I run it again in a clean Docker environment, I can get the correct result, and I am unable to reproduce this issue in a new environment myself.<br />
It's possible that something on my local machine is causing this problem, but I haven't been able to pinpoint the source of the issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-13 09:53</div>
            <div class="timeline-body"><p>Did you change the <code>PATH</code> environment variable in a way that <code>git</code> wouldn't work or point to a non-Git executable?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gbaian10">@gbaian10</a> on 2025-05-13 10:15</div>
            <div class="timeline-body"><p>When I run the following command, I only get two system-level paths.</p>
<pre><code class="language-sh">where git
</code></pre>
<p>/usr/bin/git
/bin/git</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Shadow-Xin">@Shadow-Xin</a> on 2025-05-22 17:27</div>
            <div class="timeline-body"><p>The same issue also appeared on my newly purchased Mac Mini M4. I installed git and uv using Homebrew, and when I run the 'where git' command, the result is:</p>
<pre><code>/opt/homebrew/bin/git
/usr/bin/git
</code></pre>
<p>Could it be a bug?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-22 19:07</div>
            <div class="timeline-body"><p>@Shadow-Xin Do both those gits work and show the same output on stdout and stderr for <code>git rev-parse --is-inside-work-tree</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Shadow-Xin">@Shadow-Xin</a> on 2025-05-23 06:01</div>
            <div class="timeline-body"><p>I got it: Because i have installed two gits.After i run <code>brew uninstall git</code>,the problem solved.
@gbaian10 Maybe you should uninstall one of these gits.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gbaian10">@gbaian10</a> on 2025-05-26 02:31</div>
            <div class="timeline-body"><p>I deleted <code>/bin/git</code>, which caused <code>/usr/bin/git</code> to be deleted as well. As a result, my entire system no longer had git.</p>
<p>I used <code>sudo apt install --reinstall git</code> to reinstall git, but when I run <code>where git</code> I still get the same two paths, and the problem where uv cannot create the <code>.git</code> folder still persists.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Etyctmlrls">@Etyctmlrls</a> on 2025-05-27 13:08</div>
            <div class="timeline-body"><p>It is necessary to ensure that your command line can use the git command.</p>
<p><img src="https://github.com/user-attachments/assets/eda4532a-0536-4e60-8c86-2aacf8496bad" alt="Image" /></p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:27 UTC
    </footer>
</body>
</html>
