<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOML parse error: `default-index` setting in uv.toml - astral-sh/uv #9049</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>TOML parse error: <code>default-index</code> setting in uv.toml</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9049">#9049</a>
        opened by <a href="https://github.com/idling-mind">@idling-mind</a>
        on 2024-11-12 09:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/idling-mind">@idling-mind</a></div>
            <div class="timeline-body"><p>Hi,
Below is my uv.toml file.</p>
<pre><code class="language-toml">default-index = &quot;https://pypackages:***@tfsprod.internal/DefaultCollection/_packaging/pypackages/pypi/simple/&quot;
index = &quot;https://ett_packages:***@tfsprod.internal/DefaultCollection/ETT/_packaging/ett_packages/pypi/simple/&quot;
native-tls = true
</code></pre>
<p>when I run any uv command, i throws me the following error.</p>
<pre><code>error: Failed to parse: `uv.toml`
  Caused by: TOML parse error at line 1, column 1
  |
1 | default-index = &quot;https://pypackages:***@tfsprod.internal/DefaultCollection/_packaging/pypackages/pypi/simple/&quot;
  | ^^^^^^^^^^^^^
unknown field `default-index`, expected one of `native-tls`, `offline`, `no-cache`, `cache-dir`, `preview`, `python-preference`, `python-downloads`, `concurrent-downloads`, `concurrent-builds`, `concurrent-installs`, `index`, `index-url`, `extra-index-url`, `no-index`, `find-links`, `index-strategy`, `keyring-provider`, `allow-insecure-host`, `resolution`, `prerelease`, `dependency-metadata`, `config-settings`, `no-build-isolation`, `no-build-isolation-package`, `exclude-newer`, `link-mode`, `compile-bytecode`, `no-sources`, `upgrade`, `upgrade-package`, `reinstall`, `reinstall-package`, `no-build`, `no-build-package`, `no-binary`, `no-binary-package`, `publish-url`, `trusted-publishing`, `pip`, `cache-keys`, `override-dependencies`, `constraint-dependencies`, `environments`, `workspace`, `sources`, `managed`, `package`, `default-groups`, `dev-dependencies`
</code></pre>
<p>However, if I set <code>UV_DEFAULT_INDEX</code> env variable, it works fine.</p>
<p>I'm having uv v0.5.1</p>
<p>regards</p>
<p>ps: Thanks for this great tool!!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 14:58</div>
            <div class="timeline-body"><p>The syntax in TOML is like this:</p>
<pre><code class="language-toml">[[tool.uv.index]]
url = &quot;https://pypackages:***@tfsprod.internal/DefaultCollection/_packaging/pypackages/pypi/simple/&quot;
default = true

[[tool.uv.index]]
url = &quot;https://ett_packages:***@tfsprod.internal/DefaultCollection/ETT/_packaging/ett_packages/pypi/simple/&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-11-12 14:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/idling-mind">@idling-mind</a> on 2024-11-12 15:09</div>
            <div class="timeline-body"><p>Isn't the content you specified for <code>pyproject.toml</code>? will that work in <code>uv.toml</code>? I was trying to create it in similar way as shown in the example here. https://docs.astral.sh/uv/configuration/files/#configuration-files</p>
<pre><code>index-url = &quot;https://test.pypi.org/simple&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 17:15</div>
            <div class="timeline-body"><p>In <code>uv.toml</code>, you would just drop the <code>[[tool.uv</code> piece:</p>
<pre><code class="language-toml">[[index]]
url = &quot;https://pypackages:***@tfsprod.internal/DefaultCollection/_packaging/pypackages/pypi/simple/&quot;
default = true

[[index]]
url = &quot;https://ett_packages:***@tfsprod.internal/DefaultCollection/ETT/_packaging/ett_packages/pypi/simple/&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 17:15</div>
            <div class="timeline-body"><p>Alternatively, you can do:</p>
<pre><code class="language-toml">index-url = &quot;https://pypackages:***@tfsprod.internal/DefaultCollection/_packaging/pypackages/pypi/simple/&quot;
extra-index-url = &quot;https://ett_packages:***@tfsprod.internal/DefaultCollection/ETT/_packaging/ett_packages/pypi/simple/&quot;
native-tls = true
</code></pre>
<p>But those fields are considered legacy, and the <code>[[index]]</code> syntax is preferred.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/idling-mind">@idling-mind</a> on 2024-11-12 18:04</div>
            <div class="timeline-body"><p>Thanks! using <code>[[index]]</code> format worked for me and I prefer that one! :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @idling-mind on 2024-11-12 18:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:28:18 UTC
    </footer>
</body>
</html>
