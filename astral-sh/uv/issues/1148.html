<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set executable bit - astral-sh/uv #1148</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Set executable bit</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1148">#1148</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-01-27 10:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/konstin">@konstin</a> on 2024-01-27 10:47</div>
            <div class="timeline-body"><p>The command <code>python -m ziglang</code> works after <code>pip install ziglang</code>, but fails with <code>puffin pip install ziglang</code> (&quot;PermissionError: [Errno 13] Permission denied&quot;) because we're not setting the executable bit for the zig executable:</p>
<p><strong>pip</strong></p>
<pre><code>ls -lah .venv/lib/python3.12/site-packages/ziglang
total 142M
drwxrwxr-x  5 konsti konsti 4,0K Jan 27 11:44 .
drwxrwxr-x  7 konsti konsti 4,0K Jan 27 11:44 ..
drwxrwxr-x  3 konsti konsti 4,0K Jan 27 11:44 doc
-rw-rw-r--  1 konsti konsti    0 Jan 27 11:44 __init__.py
drwxrwxr-x 13 konsti konsti 4,0K Jan 27 11:44 lib
-rw-rw-r--  1 konsti konsti 1,1K Jan 27 11:44 LICENSE
-rw-rw-r--  1 konsti konsti  198 Jan 27 11:44 __main__.py
drwxrwxr-x  2 konsti konsti 4,0K Jan 27 11:44 __pycache__
-rw-rw-r--  1 konsti konsti 4,0K Jan 27 11:44 README.md
-rwxrwxr-x  1 konsti konsti 142M Jan 27 11:44 zig
</code></pre>
<p><strong>puffin</strong></p>
<pre><code>$ ls -lah .venv/lib/python3.12/site-packages/ziglang
total 142M
drwxrwxr-x  5 konsti konsti 4,0K Jan 27 11:43 .
drwxrwxr-x  7 konsti konsti 4,0K Jan 27 11:43 ..
drwxrwxr-x  3 konsti konsti 4,0K Jan 27 11:43 doc
-rw-rw-r--  2 konsti konsti    0 Jan 27 11:42 __init__.py
drwxrwxr-x 13 konsti konsti 4,0K Jan 27 11:43 lib
-rw-rw-r--  2 konsti konsti 1,1K Jan 27 11:42 LICENSE
-rw-rw-r--  2 konsti konsti  198 Jan 27 11:42 __main__.py
drwxrwxr-x  2 konsti konsti 4,0K Jan 27 11:43 __pycache__
-rw-rw-r--  2 konsti konsti 4,0K Jan 27 11:42 README.md
-rw-rw-r--  2 konsti konsti 142M Jan 27 11:42 zig
</code></pre>
<p>To do: Investigate for which files we need to set the executable bit</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @konstin on 2024-01-27 10:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-01-27 11:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-27 11:23</div>
            <div class="timeline-body"><p>I can take a look at this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-27 11:37</div>
            <div class="timeline-body"><p>Oh, I think it's not being set during <em>download</em>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-27 11:38</div>
            <div class="timeline-body"><p>That makes sense. It's a regression from when we changed to streaming-unzip. Good catch!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-27 11:47</div>
            <div class="timeline-body"><p>I'll add a test too. Though not Zig becomes the binary is insanely large lmao.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-01-27 12:34</div>
            <div class="timeline-body"><p>Okay actually not trivial because the executable bits are stored in the central directory archive and not as part of the entry. Looking into it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1151.html">astral-sh/uv#1151</a> on 2024-01-28 00:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-01-28 00:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:56 UTC
    </footer>
</body>
</html>
