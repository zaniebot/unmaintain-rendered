<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Can't install pypi package dtale - astral-sh/uv #7703</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Can't install pypi package dtale</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7703">#7703</a>
        opened by <a href="https://github.com/kjyv">@kjyv</a>
        on 2024-09-26 09:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kjyv">@kjyv</a></div>
            <div class="timeline-body"><p>Hey there,
I'm trying to install <a href="https://github.com/man-group/dtale">dtale</a> with a simple pyproject.toml running <code>uv sync</code> (.venv deleted, .cache/uv deleted). Even if it is the only package, I see this error:
<code>error: distribution kaleido==0.2.1.post1 @ registry+https://pypi.org/simple can't be installed because it doesn't have a source distribution or wheel for the current platform</code></p>
<p>Installing with <code>uv pip install dtale</code> work fine though and the same package combination works well with pipenv.
I'm on macOS 15.0, uv 0.4.16.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-09-26 11:26</div>
            <div class="timeline-body"><p>This is caused by a difference in how <code>uv sync</code> and <code>uv pip install</code> handle unavailable wheel. The tl;dr fix for you problem is adding the following to your <code>pyproject.toml</code>:</p>
<pre><code>[tool.uv]
constraint-dependencies = [&quot;kaleido!=0.2.1.post1&quot;]
</code></pre>
<p>The longer explanation: There are two recent versions of dtale, 0.2.1 and 0.2.1.post1. The former has a source distribution and wheels for all sorts of platforms (https://pypi.org/project/kaleido/0.2.1/#files), the latter only has an armv7l wheel for linux (https://pypi.org/project/kaleido/0.2.1.post1/#files); I think the authors wanted to add the missing wheel to the release, but instead created a new release. When using <code>uv pip install</code>, the resolver skips over 0.2.1.post1 because it wants to find something that works for the current platform and uses 0.2.1 instead. <code>uv sync</code> on the other hand attempts a universal resolution that is the same independent from which platform you run it, so it can't skip releases due to missing source distributions or platforms. It then locks 0.2.1.post1 and subsequently fails to install. The constraint we're adding says that if the resolver is trying to pick a version for kaleido, it should skip that post-release, but without making kaleido a dependency of your project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @konstin on 2024-09-26 11:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kjyv">@kjyv</a> on 2024-09-26 12:17</div>
            <div class="timeline-body"><p>Ok, thank you for the detailed explanation. So the contraint fixes our problem but I guess it's not ideal if users like me run into this and the error message is not saying much about how to go forward. Rather than changing the resolver for the sync which I guess is tricky for all platforms with such packages, could this case be detected by uv and a more specific error message shown?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @charliermarsh on 2024-09-28 19:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @charliermarsh on 2024-09-28 19:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-20 00:37</div>
            <div class="timeline-body"><p>I think this is a case of the more general #7816.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-20 00:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LuchiLucs">@LuchiLucs</a> on 2025-01-14 13:33</div>
            <div class="timeline-body"><p>I'm trying to install the package <code>connectorx</code> on <code>py3.9</code> but it fails it <code>uv add</code>. What are the available options here? I also checked <a href="https://github.com/astral-sh/uv/issues/7816">7816</a> and <a href="https://github.com/astral-sh/uv/issues/7435">7435</a> but I would like to know if there is a recommended option</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-01-14 13:36</div>
            <div class="timeline-body"><p>@LuchiLucs Can you please open a new issue with a minimal reproduction of your example and information about your platform?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LuchiLucs">@LuchiLucs</a> on 2025-01-14 13:38</div>
            <div class="timeline-body"><p>@konstin Sure, sorry about this.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:27:21 UTC
    </footer>
</body>
</html>
