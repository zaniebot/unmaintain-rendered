<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>add integration tests for venv activation scripts - astral-sh/uv #15294</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>add integration tests for venv activation scripts</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/15294">#15294</a>
        opened by <a href="https://github.com/2bndy5">@2bndy5</a>
        on 2025-08-15 01:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/2bndy5">@2bndy5</a> on 2025-08-15 01:45</div>
            <div class="timeline-body"><p>Following a discussion about the topic of venv activation scripts:</p>
<blockquote>
<p>I think someone just needs to validate and pull in those upstream changes [from virtualenv package] into our virtual environment activation scripts. Ideally, we'd have some test coverage that makes it apparent we're resolving the problem.</p>
<p>-- originally from https://github.com/astral-sh/uv/issues/14917#issuecomment-3186780343</p>
</blockquote>
<p>Then in https://github.com/astral-sh/uv/pull/15272:</p>
<blockquote>
<blockquote>
<p>What are the requirements of the requested test(s)? I added a nushell activation test. Do you want more tests for all other supported shell(s)? I'm of the impression that nushell needed a test to detect breakages because nushell is still in v0.x. I have only ever used bash and pwsh (with much reluctance).</p>
</blockquote>
<p>It'd be ideal to have test coverage for them all, but I don't think it's necessary to do here! Especially if you're reluctant :) We can open an issue to track it.</p>
</blockquote>
<p>Let this be the issue to track adding integration/unit tests for activating venv in variously supported shells.</p>
<h2>Proposed idea</h2>
<p>An aggregated discussion between zanieb and myself across the aforementioned threads:</p>
<blockquote>
<blockquote>
<p>I see now that integration tests are written directly in the CI.yml workflow (an overwhelmingly long file). While unconventional per rust standards, this makes writing integration tests easier.</p>
</blockquote>
<p><em>we could</em> do another testing strategy within our test suite, e.g., we'd add a new <code>test-nushell</code> feature then assume nushell is available and add a snapshot test for the activation script that's gated by the feature. Then, we'd install nushell in the Linux cargo test run.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "add integration tests for venv activation" to "add integration tests for venv activation scripts" by @2bndy5 on 2025-08-15 01:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/15272.html">astral-sh/uv#15272</a> on 2025-08-15 01:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:11 UTC
    </footer>
</body>
</html>
