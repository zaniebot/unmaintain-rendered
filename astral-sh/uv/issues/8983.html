<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eagerly warn/error when a project is under a path with `:` (because unix will cry when you put it on PATH) - astral-sh/uv #8983</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Eagerly warn/error when a project is under a path with <code>:</code> (because unix will cry when you put it on PATH)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/8983">#8983</a>
        opened by <a href="https://github.com/lemorage">@lemorage</a>
        on 2024-11-10 08:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/lemorage">@lemorage</a> on 2024-11-10 08:32</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>I used <code>uv venv --python 3.10</code> to create a virtual env and activated it. Under this venv, I created a <code>main.py</code> containing a single line of code <code>print('Hello world!')</code>. However, when I ran the script using <code>uv run</code>, I got the error saying <code>path segment contains separator ':'</code>.</p>
<pre><code>(me) ☁  me [master] ⚡  uv run main.py --verbose
error: path segment contains separator `:`
(me) ☁  me [master] ⚡  python main.py
Hello world!
</code></pre>
<ul>
<li>macos version: Sequoia 15.1</li>
<li>The current uv version: uv 0.5.1 (Homebrew 2024-11-08)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-10 15:51</div>
            <div class="timeline-body"><p>I've never seen this before -- I assume it has to do with something unusual in some path on your machine. What does <code>pwd</code> look like? What about your <code>$PATH</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-11-10 15:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lemorage">@lemorage</a> on 2024-11-11 02:19</div>
            <div class="timeline-body"><p>ohh, thank u so much for your suggestions! I checked my CWD, and it turns out the issue was indeed caused by an unusual character in the directory name. The <code>:</code> in the path below was causing the problem:</p>
<pre><code>/Users/clannad/Dev/mercurius/ucb/cs194:294-196_fa24/me/
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @lemorage on 2024-11-11 02:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-11 02:23</div>
            <div class="timeline-body"><p>No prob, thanks for following up!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mtnmbr">@mtnmbr</a> on 2024-11-11 11:45</div>
            <div class="timeline-body"><p>Hey, I am currently trying to move my CI setup from poetry to uv with docker on jenkins and am experiencing a similar error when trying to sync my venv.</p>
<p>Locally everything is fine, but on CI when running <code> uv sync --locked --verbose</code> am getting the following error:</p>
<pre><code>error: Failed to prepare distributions
  Caused by: Failed to build `component-config-util @ file:///srv/dsadock/atvmces/workspace/r_feature_replace-poetry-with-uv/component_config_util`
  Caused by: Failed to build PATH for build script
  Caused by: path segment contains separator `:`
script returned exit code 2
</code></pre>
<p>uv version is 0.4.23</p>
<p>EDIT:</p>
<p>resolved. this has been a setting related to the resoultion of my <code>UV_CACHE</code> environment variable. It introduced windows like paths into the cache folder and this produced the above error.</p>
<p>The respective error line was just slightly above:</p>
<pre><code>
DEBUG Released lock at `/srv/dsadock/atvmces/workspace/r_feature_replace-poetry-with-uv/d:\slave\workspace\r_feature_replace-poetry-with-uv/.cache/uv/sdists-v4/editable/c5ec13b93a5ad88a/.lock`
</code></pre>
<p>sorry for the noise</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/knl">@knl</a> on 2025-03-21 15:09</div>
            <div class="timeline-body"><p>I'm encountering a similar problem, but I don't think <code>:</code> is an unusual character for UNIX paths. Is this limitation because of Windows?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @Gankra on 2025-03-21 15:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @Gankra on 2025-03-21 15:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @Gankra on 2025-03-21 15:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @Gankra on 2025-03-21 15:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @Gankra on 2025-03-21 15:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @Gankra on 2025-03-21 15:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`uv run` command gives `error: path segment contains separator ':'`" to "Eagerly warn/error when a project is under a path with `:` (because unix will cry when you put it on PATH)" by @Gankra on 2025-03-21 15:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-03-21 15:47</div>
            <div class="timeline-body"><p>This appears to be a fundamental limitation with unix and key environment variables. i.e. PATH is a <code>:</code>-delimited value, so if you need to add anything to PATH that contains a <code>:</code> you just... Can't. There's apparently no escaping, you just lose.</p>
<p>This is relevant if e.g. we want to create a venv under such a path and run your project in it.</p>
<p>We can potentially add a better eager diagnostic for this, as cargo did in https://github.com/rust-lang/cargo/pull/11318</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/xzm123456">@xzm123456</a> on 2025-04-25 07:50</div>
            <div class="timeline-body"><p>I encountered the same problem. The problem is as follows: My pwd and $PATH information are at the end</p>
<p>uvtest uv add -r requirements.txt
× Failed to build <code>fire==0.7.0</code>
├─▶ Failed to build PATH for build script
╰─▶ path segment contains separator <code>:</code>
help: If you want to add the package regardless of the failed resolution, provide the <code>--frozen</code> flag to skip locking and syncing.</p>
<p>(uvtest) ➜  uvtest pwd
/home/xzm/workspace/ocr/uv/uvtest
(uvtest) ➜  uvtest echo $PATH<br />
/home/xzm/workspace/ocr/uv/uvtest/.venv/bin:/home/xzm/.local/bin:/root/anaconda3/bin:/home/xzm/.vscode-server/bin/8b3775030ed1a69b13e4f4c628c612102e30a681/bin/remote-cli:/root/anaconda3/bin:/usr/local/bin:/usr/bin:/home/xzm/bin:/usr/local/sbin:/usr/sbin</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:48 UTC
    </footer>
</body>
</html>
