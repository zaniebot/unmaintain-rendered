<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv fails on `uv pip install --all-extras` with a `pyproject.toml` - astral-sh/uv #11190</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv fails on <code>uv pip install --all-extras</code> with a <code>pyproject.toml</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11190">#11190</a>
        opened by <a href="https://github.com/gaspardc-met">@gaspardc-met</a>
        on 2025-02-03 19:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gaspardc-met">@gaspardc-met</a></div>
            <div class="timeline-body">Summary
<p>In a project with a <code>pyproject.toml</code> file and a lockfile at <code>uv.lock</code></p>
<ul>
<li><code>uv sync --all-extras</code> works ‚úÖ</li>
<li><code>uv pip install .</code> works ‚úÖ</li>
<li><code>uv pip install project-name</code> works ‚úÖ</li>
<li><code>uv pip install --all-extras .</code> fails üî¥</li>
<li><code>uv pip install --all-extras project-name</code> fails üî¥</li>
</ul>
<p>Requesting any extras faills too</p>
<p>Logs:</p>
<pre><code> uv pip install --verbose --all-extras .

DEBUG uv 0.5.26
error: Requesting extras requires a `pyproject.toml`, `setup.cfg`, or `setup.py` file.
</code></pre>
<p>Am I doing something wrong ?</p>
Platform
<p>Ubuntu 22.04</p>
Version
<p>uv 0.5.26</p>
Python version
<p>Python 3.11.5</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/gaspardc-met">@gaspardc-met</a> on 2025-02-03 19:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-03 19:22</div>
            <div class="timeline-body"><p>If you want to enable extras with a project name or path, you should use the standards-compliant syntax, like:</p>
<pre><code>uv pip install project-name[foo]
</code></pre>
<p>As the error suggests, <code>--all-extras</code> only exists for <code>pyproject.toml</code>, <code>setup.cfg,</code> and <code>setup.py</code>, where there is no equivalent syntax for enabling extras.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-03 19:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-03 19:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaspardc-met">@gaspardc-met</a> on 2025-02-03 19:33</div>
            <div class="timeline-body"><p>Sorry this might be a dumb question, but the local project here is defined with a <code>pyproject.toml</code>
Formerly, I used <code>pip install .[extra]</code> but here I was changing a command from <code>uv sync</code> to <code>uv pip install</code></p>
<p>I don&#x27;t understand why this doesn&#x27;t work here, with a <code>pyproject.toml</code> located right there at <code>.</code>
I&#x27;m probably not grasping a key concept here</p>
<p>How would it work to use <code>uv pip install --all-extras</code> then ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-03 19:38</div>
            <div class="timeline-body"><p>The invocation would be <code>uv pip install -r pyproject.toml --all-extras</code> ‚Äî but that will only install your project&#x27;s dependencies not the project itself.</p>
<p>You&#x27;ll need to enumerate all the extras, unfortunately. That&#x27;s how it works in pip.</p>
<p>I&#x27;ll see if I can improve this error message.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-03 19:42</div>
            <div class="timeline-body"><p>You would typically add an extra within the <code>pyproject.toml</code> called <code>all</code> that points to the others -- like:</p>
<pre><code>[project.optional-dependencies]
async = [&quot;anyio&quot;]
testing = [&quot;pytest&quot;]
all = [&quot;project[anyio]&quot;, &quot;project[pytest]&quot;]
</code></pre>
<p>Then you&#x27;d run <code>uv pip install &quot;.[all]&quot;</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaspardc-met">@gaspardc-met</a> on 2025-02-03 19:46</div>
            <div class="timeline-body"><p>Thank you both for the answers, I feel like a fool.
After using &#x27;uv sync&#x27; for so long one forgets how &#x27;pip install&#x27; works I guess.
Seeing the same argument in the docs I assumed it worked the same way üëçüèª</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-03 19:48</div>
            <div class="timeline-body"><p>No foolishness! It&#x27;s just an awkward extension to the pip interface for parity with elsewhere. Without these flags, it&#x27;s not possible to select extras from files like <code>-r pyproject.toml</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-03 22:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:37:03 UTC
    </footer>
</body>
</html>
