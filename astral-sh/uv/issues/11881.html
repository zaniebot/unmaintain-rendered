<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using cl in Uv build causes garbled text on non-English encoding Windows - astral-sh/uv #11881</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Using cl in Uv build causes garbled text on non-English encoding Windows</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/11881">#11881</a>
        opened by <a href="https://github.com/sdbds">@sdbds</a>
        on 2025-03-01 09:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sdbds">@sdbds</a> on 2025-03-01 09:44</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Using cl in Uv build causes garbled text on non-English encoding Windows</p>
<p>python setup.py bdist_wheel is OK.</p>
<pre><code>C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmp21jyVj\spas_sage_attn-0.1.0\csrc\qattn\qk_int_sv_f8_cuda.cu(17): fatal error C1083: �޷��򿪰����ļ�: ��../utils.cuh��: No such file or directory
[3/3] cl /showIncludes /nologo /O2 /W3 /GL /DNDEBUG /MD /MD /wd4819 /wd4251 /wd4244 /wd4267 /wd4275 /wd4018 /wd4190 /wd4624 /wd4067 /wd4068 /EHsc -IE:\Python310\lib\site-packages\torch\include -IE:\Python310\lib\site-packages\torch\include\torch\csrc\api\include -IE:\Python310\lib\site-packages\torch\include\TH -IE:\Python310\lib\site-packages\torch\include\THC -IE:\cuda\12.4\include -IE:\cudnn\v9.1\include -IE:\Python310\include -IE:\Python310\Include &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\ATLMFC\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Auxiliary\VS\include&quot; &quot;-IE:\Windows Kits\10\include\10.0.22621.0\ucrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\um&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\shared&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\winrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\cppwinrt&quot; -c C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmp21jyVj\spas_sage_attn-0.1.0\csrc\qattn\pybind.cpp /FoC:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmp21jyVj\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc/qattn/pybind.obj -g -O3 -fopenmp -lgomp -std=c++17 -DENABLE_BF16 -D_GLIBCXX_USE_CXX11_ABI=0 -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_qattn -D_GLIBCXX_USE_CXX11_ABI=0 /std:c++17

ע��: �����ļ�:    E:\Python310\lib\site-packages\torch\include\torch/csrc/autograd/python_variable.h
ע��: �����ļ�:    E:\Python310\lib\site-packages\torch\include\torch/csrc/utils/python_numbers.h
ע��: �����ļ�:     E:\Python310\lib\site-packages\torch\include\torch/csrc/jit/frontend/tracer.h
ע��: �����ļ�:     E:\Python310\lib\site-packages\torch\include\torch/csrc/utils/object_ptr.h
ע��: �����ļ�:     E:\Python310\lib\site-packages\torch\include\torch/csrc/utils/tensor_numpy.h
ע��: �����ļ�:    E:\Python310\lib\site-packages\torch\include\torch/csrc/utils/python_tuples.h
C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpaoUjlR\spas_sage_attn-0.1.0\csrc\qattn\pybind.cpp(19): fatal error C1083: �޷��򿪰����ļ�: ��attn_cuda.h��: No such file or directory
ninja: build stopped: subcommand failed.
  × Failed to build `E:\Code\SpargeAttn-for-windows\`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit code: 1)
      hint: This usually indicates a problem with the package or the build environment.
</code></pre>
<h3>Platform</h3>
<p>Windows 11 x64</p>
<h3>Version</h3>
<p>uv 0.6.3 (a0b9f22a2 2025-02-24)</p>
<h3>Python version</h3>
<p>3.10</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @sdbds on 2025-03-01 09:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by @konstin on 2025-03-03 13:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-03-10 11:42</div>
            <div class="timeline-body"><p>Can you share a command/setup that reproduces that problem?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @konstin on 2025-03-10 11:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @konstin on 2025-03-10 11:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sdbds">@sdbds</a> on 2025-03-11 06:00</div>
            <div class="timeline-body"><blockquote>
<p>Can you share a command/setup that reproduces that problem?</p>
</blockquote>
<p>this repo as sample:</p>
<p>https://github.com/sdbds/SpargeAttn-for-windows</p>
<p><code>uv build --python 3.10 --no-build-isolation --verbose ./ </code></p>
<pre><code>DEBUG uv 0.6.4 (04db70662 2025-03-03)
DEBUG Searching for Python 3.10 in virtual environments, managed installations, search path, or registry
DEBUG Searching for managed installations at `E:\Roaming\uv\python`
DEBUG Skipping incompatible managed installation `cpython-3.12.8-windows-x86_64-none`
DEBUG Skipping incompatible managed installation `cpython-3.11.10-windows-x86_64-none`
DEBUG Found `cpython-3.10.11-windows-x86_64-none` at `E:\Python310\python.exe` (first executable in the search path)
DEBUG Using request timeout of 30s
Building source distribution...
DEBUG Proceeding without build isolation
DEBUG Calling `setuptools.build_meta:__legacy__.build_sdist(&quot;E:\\Code\\SpargeAttn-for-windows\\dist&quot;, {})`
running sdist
running egg_info
writing spas_sage_attn.egg-info\PKG-INFO
writing dependency_links to spas_sage_attn.egg-info\dependency_links.txt
writing top-level names to spas_sage_attn.egg-info\top_level.txt
reading manifest file 'spas_sage_attn.egg-info\SOURCES.txt'
adding license file 'LICENSE'
writing manifest file 'spas_sage_attn.egg-info\SOURCES.txt'
running check
creating spas_sage_attn-0.1.0
creating spas_sage_attn-0.1.0\csrc
creating spas_sage_attn-0.1.0\csrc\fused
creating spas_sage_attn-0.1.0\csrc\qattn
creating spas_sage_attn-0.1.0\evaluate
creating spas_sage_attn-0.1.0\evaluate\modify_model
creating spas_sage_attn-0.1.0\spas_sage_attn
creating spas_sage_attn-0.1.0\spas_sage_attn.egg-info
copying files to spas_sage_attn-0.1.0...
copying LICENSE -&gt; spas_sage_attn-0.1.0
copying README.md -&gt; spas_sage_attn-0.1.0
copying setup.py -&gt; spas_sage_attn-0.1.0
copying csrc/fused\fused.cu -&gt; spas_sage_attn-0.1.0\csrc/fused
copying csrc/fused\pybind.cpp -&gt; spas_sage_attn-0.1.0\csrc/fused
copying csrc/qattn\pybind.cpp -&gt; spas_sage_attn-0.1.0\csrc/qattn
copying csrc/qattn\qk_int_sv_f16_cuda.cu -&gt; spas_sage_attn-0.1.0\csrc/qattn
copying csrc/qattn\qk_int_sv_f8_cuda.cu -&gt; spas_sage_attn-0.1.0\csrc/qattn
copying csrc\fused\fused.cu -&gt; spas_sage_attn-0.1.0\csrc\fused
copying csrc\fused\pybind.cpp -&gt; spas_sage_attn-0.1.0\csrc\fused
copying csrc\qattn\pybind.cpp -&gt; spas_sage_attn-0.1.0\csrc\qattn
copying csrc\qattn\qk_int_sv_f16_cuda.cu -&gt; spas_sage_attn-0.1.0\csrc\qattn
copying csrc\qattn\qk_int_sv_f8_cuda.cu -&gt; spas_sage_attn-0.1.0\csrc\qattn
copying evaluate\__init__.py -&gt; spas_sage_attn-0.1.0\evaluate
copying evaluate\cogvideo_example.py -&gt; spas_sage_attn-0.1.0\evaluate
copying evaluate\modify_model\__init__.py -&gt; spas_sage_attn-0.1.0\evaluate\modify_model
copying evaluate\modify_model\modify_cogvideo.py -&gt; spas_sage_attn-0.1.0\evaluate\modify_model
copying spas_sage_attn\__init__.py -&gt; spas_sage_attn-0.1.0\spas_sage_attn
copying spas_sage_attn\autotune.py -&gt; spas_sage_attn-0.1.0\spas_sage_attn
copying spas_sage_attn\core.py -&gt; spas_sage_attn-0.1.0\spas_sage_attn
copying spas_sage_attn\quant_per_block.py -&gt; spas_sage_attn-0.1.0\spas_sage_attn
copying spas_sage_attn\quant_per_warp_cuda.py -&gt; spas_sage_attn-0.1.0\spas_sage_attn
copying spas_sage_attn\utils.py -&gt; spas_sage_attn-0.1.0\spas_sage_attn
copying spas_sage_attn.egg-info\PKG-INFO -&gt; spas_sage_attn-0.1.0\spas_sage_attn.egg-info
copying spas_sage_attn.egg-info\SOURCES.txt -&gt; spas_sage_attn-0.1.0\spas_sage_attn.egg-info
copying spas_sage_attn.egg-info\dependency_links.txt -&gt; spas_sage_attn-0.1.0\spas_sage_attn.egg-info
copying spas_sage_attn.egg-info\top_level.txt -&gt; spas_sage_attn-0.1.0\spas_sage_attn.egg-info
copying spas_sage_attn.egg-info\SOURCES.txt -&gt; spas_sage_attn-0.1.0\spas_sage_attn.egg-info
Writing spas_sage_attn-0.1.0\setup.cfg
Creating tar archive
removing 'spas_sage_attn-0.1.0' (and everything under it)
Building wheel from source distribution...
DEBUG Proceeding without build isolation
DEBUG Calling `setuptools.build_meta:__legacy__.build_wheel(&quot;E:\\Code\\SpargeAttn-for-windows\\dist&quot;, {}, None)`
running bdist_wheel
running build
running build_py
creating build
creating build\lib.win-amd64-cpython-310
creating build\lib.win-amd64-cpython-310\evaluate
copying evaluate\cogvideo_example.py -&gt; build\lib.win-amd64-cpython-310\evaluate
copying evaluate\__init__.py -&gt; build\lib.win-amd64-cpython-310\evaluate
creating build\lib.win-amd64-cpython-310\spas_sage_attn
copying spas_sage_attn\autotune.py -&gt; build\lib.win-amd64-cpython-310\spas_sage_attn
copying spas_sage_attn\core.py -&gt; build\lib.win-amd64-cpython-310\spas_sage_attn
copying spas_sage_attn\quant_per_block.py -&gt; build\lib.win-amd64-cpython-310\spas_sage_attn
copying spas_sage_attn\quant_per_warp_cuda.py -&gt; build\lib.win-amd64-cpython-310\spas_sage_attn
copying spas_sage_attn\utils.py -&gt; build\lib.win-amd64-cpython-310\spas_sage_attn
copying spas_sage_attn\__init__.py -&gt; build\lib.win-amd64-cpython-310\spas_sage_attn
creating build\lib.win-amd64-cpython-310\evaluate\modify_model
copying evaluate\modify_model\modify_cogvideo.py -&gt; build\lib.win-amd64-cpython-310\evaluate\modify_model
copying evaluate\modify_model\__init__.py -&gt; build\lib.win-amd64-cpython-310\evaluate\modify_model
running build_ext
E:\Python310\lib\site-packages\torch\utils\cpp_extension.py:416: UserWarning: The detected CUDA version (12.6) has a minor version mismatch with the version that was used to compile PyTorch (12.4). Most likely this shouldn't be a problem.
  warnings.warn(CUDA_MISMATCH_WARN.format(cuda_str_version, torch.version.cuda))
building 'spas_sage_attn._qattn' extension
creating C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310
creating C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release
creating C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc
creating C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc\qattn
Emitting ninja build file C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\build.ninja...
Compiling objects...
Allowing ninja to set a default number of workers... (overridable by setting the environment variable MAX_JOBS=N)
[1/3] E:\cuda\12.6\bin\nvcc --generate-dependencies-with-compile --dependency-output C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc/qattn/qk_int_sv_f8_cuda.obj.d -std=c++17 --use-local-env -Xcompiler /MD -Xcompiler /wd4819 -Xcompiler /wd4251 -Xcompiler /wd4244 -Xcompiler /wd4267 -Xcompiler /wd4275 -Xcompiler /wd4018 -Xcompiler /wd4190 -Xcompiler /wd4624 -Xcompiler /wd4067 -Xcompiler /wd4068 -Xcompiler /EHsc -Xcudafe --diag_suppress=base_class_has_different_dll_interface -Xcudafe --diag_suppress=field_without_dll_interface -Xcudafe --diag_suppress=dll_interface_conflict_none_assumed -Xcudafe --diag_suppress=dll_interface_conflict_dllexport_assumed -IE:\Python310\lib\site-packages\torch\include -IE:\Python310\lib\site-packages\torch\include\torch\csrc\api\include -IE:\Python310\lib\site-packages\torch\include\TH -IE:\Python310\lib\site-packages\torch\include\THC -IE:\cuda\12.6\include -IE:\cudnn\v9.6\include -IE:\Python310\include -IE:\Python310\Include &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\ATLMFC\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Auxiliary\VS\include&quot; &quot;-IE:\Windows Kits\10\include\10.0.22621.0\ucrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\um&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\shared&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\winrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\cppwinrt&quot; -c C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\csrc\qattn\qk_int_sv_f8_cuda.cu -o C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc/qattn/qk_int_sv_f8_cuda.obj -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -O3 -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ --use_fast_math --threads=8 -Xptxas=-v -diag-suppress=174 -D_GLIBCXX_USE_CXX11_ABI=0 -gencode arch=compute_89,code=sm_89 -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_qattn -D_GLIBCXX_USE_CXX11_ABI=0
FAILED: C:/Users/qinglongshengzhe/AppData/Local/uv/cache/sdists-v8/.tmpRkTEpR/spas_sage_attn-0.1.0/build/temp.win-amd64-cpython-310/Release/csrc/qattn/qk_int_sv_f8_cuda.obj
E:\cuda\12.6\bin\nvcc --generate-dependencies-with-compile --dependency-output C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc/qattn/qk_int_sv_f8_cuda.obj.d -std=c++17 --use-local-env -Xcompiler /MD -Xcompiler /wd4819 -Xcompiler /wd4251 -Xcompiler /wd4244 -Xcompiler /wd4267 -Xcompiler /wd4275 -Xcompiler /wd4018 -Xcompiler /wd4190 -Xcompiler /wd4624 -Xcompiler /wd4067 -Xcompiler /wd4068 -Xcompiler /EHsc -Xcudafe --diag_suppress=base_class_has_different_dll_interface -Xcudafe --diag_suppress=field_without_dll_interface -Xcudafe --diag_suppress=dll_interface_conflict_none_assumed -Xcudafe --diag_suppress=dll_interface_conflict_dllexport_assumed -IE:\Python310\lib\site-packages\torch\include -IE:\Python310\lib\site-packages\torch\include\torch\csrc\api\include -IE:\Python310\lib\site-packages\torch\include\TH -IE:\Python310\lib\site-packages\torch\include\THC -IE:\cuda\12.6\include -IE:\cudnn\v9.6\include -IE:\Python310\include -IE:\Python310\Include &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\ATLMFC\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Auxiliary\VS\include&quot; &quot;-IE:\Windows Kits\10\include\10.0.22621.0\ucrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\um&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\shared&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\winrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\cppwinrt&quot; -c C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\csrc\qattn\qk_int_sv_f8_cuda.cu -o C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc/qattn/qk_int_sv_f8_cuda.obj -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -O3 -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ --use_fast_math --threads=8 -Xptxas=-v -diag-suppress=174 -D_GLIBCXX_USE_CXX11_ABI=0 -gencode arch=compute_89,code=sm_89 -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_qattn -D_GLIBCXX_USE_CXX11_ABI=0
qk_int_sv_f8_cuda.cu
cl: ������ warning D9025 :������д��/D__CUDA_NO_HALF_OPERATORS__��(�á�/U__CUDA_NO_HALF_OPERATORS__��)
cl: ������ warning D9025 :������д��/D__CUDA_NO_HALF_CONVERSIONS__��(�á�/U__CUDA_NO_HALF_CONVERSIONS__��)
qk_int_sv_f8_cuda.cu
C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\csrc\qattn\qk_int_sv_f8_cuda.cu(17): fatal error C1083: �޷��򿪰����ļ�: ��../utils.cuh��: No such file or directory
cl: ������ warning D9025 :������д��/D__CUDA_NO_HALF_OPERATORS__��(�á�/U__CUDA_NO_HALF_OPERATORS__��)
cl: ������ warning D9025 :������д��/D__CUDA_NO_HALF_CONVERSIONS__��(�á�/U__CUDA_NO_HALF_CONVERSIONS__��)
qk_int_sv_f8_cuda.cu
C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\csrc\qattn\qk_int_sv_f8_cuda.cu(17): fatal error C1083: �޷��򿪰����ļ�: ��../utils.cuh��: No such file or directory
[2/3] E:\cuda\12.6\bin\nvcc --generate-dependencies-with-compile --dependency-output C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc/qattn/qk_int_sv_f16_cuda.obj.d -std=c++17 --use-local-env -Xcompiler /MD -Xcompiler /wd4819 -Xcompiler /wd4251 -Xcompiler /wd4244 -Xcompiler /wd4267 -Xcompiler /wd4275 -Xcompiler /wd4018 -Xcompiler /wd4190 -Xcompiler /wd4624 -Xcompiler /wd4067 -Xcompiler /wd4068 -Xcompiler /EHsc -Xcudafe --diag_suppress=base_class_has_different_dll_interface -Xcudafe --diag_suppress=field_without_dll_interface -Xcudafe --diag_suppress=dll_interface_conflict_none_assumed -Xcudafe --diag_suppress=dll_interface_conflict_dllexport_assumed -IE:\Python310\lib\site-packages\torch\include -IE:\Python310\lib\site-packages\torch\include\torch\csrc\api\include -IE:\Python310\lib\site-packages\torch\include\TH -IE:\Python310\lib\site-packages\torch\include\THC -IE:\cuda\12.6\include -IE:\cudnn\v9.6\include -IE:\Python310\include -IE:\Python310\Include &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\ATLMFC\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Auxiliary\VS\include&quot; &quot;-IE:\Windows Kits\10\include\10.0.22621.0\ucrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\um&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\shared&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\winrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\cppwinrt&quot; -c C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\csrc\qattn\qk_int_sv_f16_cuda.cu -o C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc/qattn/qk_int_sv_f16_cuda.obj -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -O3 -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ --use_fast_math --threads=8 -Xptxas=-v -diag-suppress=174 -D_GLIBCXX_USE_CXX11_ABI=0 -gencode arch=compute_89,code=sm_89 -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_qattn -D_GLIBCXX_USE_CXX11_ABI=0
FAILED: C:/Users/qinglongshengzhe/AppData/Local/uv/cache/sdists-v8/.tmpRkTEpR/spas_sage_attn-0.1.0/build/temp.win-amd64-cpython-310/Release/csrc/qattn/qk_int_sv_f16_cuda.obj
E:\cuda\12.6\bin\nvcc --generate-dependencies-with-compile --dependency-output C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc/qattn/qk_int_sv_f16_cuda.obj.d -std=c++17 --use-local-env -Xcompiler /MD -Xcompiler /wd4819 -Xcompiler /wd4251 -Xcompiler /wd4244 -Xcompiler /wd4267 -Xcompiler /wd4275 -Xcompiler /wd4018 -Xcompiler /wd4190 -Xcompiler /wd4624 -Xcompiler /wd4067 -Xcompiler /wd4068 -Xcompiler /EHsc -Xcudafe --diag_suppress=base_class_has_different_dll_interface -Xcudafe --diag_suppress=field_without_dll_interface -Xcudafe --diag_suppress=dll_interface_conflict_none_assumed -Xcudafe --diag_suppress=dll_interface_conflict_dllexport_assumed -IE:\Python310\lib\site-packages\torch\include -IE:\Python310\lib\site-packages\torch\include\torch\csrc\api\include -IE:\Python310\lib\site-packages\torch\include\TH -IE:\Python310\lib\site-packages\torch\include\THC -IE:\cuda\12.6\include -IE:\cudnn\v9.6\include -IE:\Python310\include -IE:\Python310\Include &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\ATLMFC\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Auxiliary\VS\include&quot; &quot;-IE:\Windows Kits\10\include\10.0.22621.0\ucrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\um&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\shared&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\winrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\cppwinrt&quot; -c C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\csrc\qattn\qk_int_sv_f16_cuda.cu -o C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc/qattn/qk_int_sv_f16_cuda.obj -D__CUDA_NO_HALF_OPERATORS__ -D__CUDA_NO_HALF_CONVERSIONS__ -D__CUDA_NO_BFLOAT16_CONVERSIONS__ -D__CUDA_NO_HALF2_OPERATORS__ --expt-relaxed-constexpr -O3 -std=c++17 -U__CUDA_NO_HALF_OPERATORS__ -U__CUDA_NO_HALF_CONVERSIONS__ --use_fast_math --threads=8 -Xptxas=-v -diag-suppress=174 -D_GLIBCXX_USE_CXX11_ABI=0 -gencode arch=compute_89,code=sm_89 -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_qattn -D_GLIBCXX_USE_CXX11_ABI=0
qk_int_sv_f16_cuda.cu
cl: ������ warning D9025 :������д��/D__CUDA_NO_HALF_OPERATORS__��(�á�/U__CUDA_NO_HALF_OPERATORS__��)
cl: ������ warning D9025 :������д��/D__CUDA_NO_HALF_CONVERSIONS__��(�á�/U__CUDA_NO_HALF_CONVERSIONS__��)
qk_int_sv_f16_cuda.cu
C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\csrc\qattn\qk_int_sv_f16_cuda.cu(17): fatal error C1083: �޷��򿪰����ļ�: ��../utils.cuh��: No such file or directory
cl: ������ warning D9025 :������д��/D__CUDA_NO_HALF_OPERATORS__��(�á�/U__CUDA_NO_HALF_OPERATORS__��)
cl: ������ warning D9025 :������д��/D__CUDA_NO_HALF_CONVERSIONS__��(�á�/U__CUDA_NO_HALF_CONVERSIONS__��)
qk_int_sv_f16_cuda.cu
C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\csrc\qattn\qk_int_sv_f16_cuda.cu(17): fatal error C1083: �޷��򿪰����ļ�: ��../utils.cuh��: No such file or directory
[3/3] cl /showIncludes /nologo /O2 /W3 /GL /DNDEBUG /MD /MD /wd4819 /wd4251 /wd4244 /wd4267 /wd4275 /wd4018 /wd4190 /wd4624 /wd4067 /wd4068 /EHsc -IE:\Python310\lib\site-packages\torch\include -IE:\Python310\lib\site-packages\torch\include\torch\csrc\api\include -IE:\Python310\lib\site-packages\torch\include\TH -IE:\Python310\lib\site-packages\torch\include\THC -IE:\cuda\12.6\include -IE:\cudnn\v9.6\include -IE:\Python310\include -IE:\Python310\Include &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\ATLMFC\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Auxiliary\VS\include&quot; &quot;-IE:\Windows Kits\10\include\10.0.22621.0\ucrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\um&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\shared&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\winrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\cppwinrt&quot; -c C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\csrc\qattn\pybind.cpp /FoC:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc/qattn/pybind.obj -g -O3 -fopenmp -lgomp -std=c++17 -DENABLE_BF16 -D_GLIBCXX_USE_CXX11_ABI=0 -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_qattn -D_GLIBCXX_USE_CXX11_ABI=0 /std:c++17
FAILED: C:/Users/qinglongshengzhe/AppData/Local/uv/cache/sdists-v8/.tmpRkTEpR/spas_sage_attn-0.1.0/build/temp.win-amd64-cpython-310/Release/csrc/qattn/pybind.obj
cl /showIncludes /nologo /O2 /W3 /GL /DNDEBUG /MD /MD /wd4819 /wd4251 /wd4244 /wd4267 /wd4275 /wd4018 /wd4190 /wd4624 /wd4067 /wd4068 /EHsc -IE:\Python310\lib\site-packages\torch\include -IE:\Python310\lib\site-packages\torch\include\torch\csrc\api\include -IE:\Python310\lib\site-packages\torch\include\TH -IE:\Python310\lib\site-packages\torch\include\THC -IE:\cuda\12.6\include -IE:\cudnn\v9.6\include -IE:\Python310\include -IE:\Python310\Include &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.41.34120\ATLMFC\include&quot; &quot;-IE:\Microsoft Visual Studio\2022\Community\VC\Auxiliary\VS\include&quot; &quot;-IE:\Windows Kits\10\include\10.0.22621.0\ucrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\um&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\shared&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\winrt&quot; &quot;-IE:\Windows Kits\10\\include\10.0.22621.0\\cppwinrt&quot; -c C:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\csrc\qattn\pybind.cpp /FoC:\Users\qinglongshengzhe\AppData\Local\uv\cache\sdists-v8\.tmpRkTEpR\spas_sage_attn-0.1.0\build\temp.win-amd64-cpython-310\Release\csrc/qattn/pybind.obj -g -O3 -fopenmp -lgomp -std=c++17 -DENABLE_BF16 -D_GLIBCXX_USE_CXX11_ABI=0 -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=_qattn -D_GLIBCXX_USE_CXX11_ABI=0 /std:c++17
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sdbds">@sdbds</a> on 2025-03-24 11:37</div>
            <div class="timeline-body"><p>any new process？</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @konstin by @zanieb on 2025-04-01 18:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @konstin by @konstin on 2025-04-15 12:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-04-15 12:37</div>
            <div class="timeline-body"><p>I don't have a Windows CUDA machine I could test with. Can you try setting the env var <code>PYTHONUTF8</code> to <code>1</code>? uv assumes all subprocess output to be UTF8, which may not be the case when Python is not running in UTF8 mode.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sdbds">@sdbds</a> on 2025-04-18 02:58</div>
            <div class="timeline-body"><blockquote>
<p>I don't have a Windows CUDA machine I could test with. Can you try setting the env var <code>PYTHONUTF8</code> to <code>1</code>? uv assumes all subprocess output to be UTF8, which may not be the case when Python is not running in UTF8 mode.</p>
</blockquote>
<p>Thank you for your hint, I tested and still cannot recognize...</p>
<p>It seems to be a problem caused by cl.exe rather than Python, so the cl command must be specified to use UTF8.</p>
<p>UseUnicodeForAssemblerListing=True</p>
<p>However, it seems that it is not possible to affect the UV compiler initiated by the external environment</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sdbds">@sdbds</a> on 2025-04-22 10:54</div>
            <div class="timeline-body"><blockquote>
<p>I don't have a Windows CUDA machine I could test with. Can you try setting the env var <code>PYTHONUTF8</code> to <code>1</code>? uv assumes all subprocess output to be UTF8, which may not be the case when Python is not running in UTF8 mode.</p>
</blockquote>
<p>Is there a way to specify the cl compiler to use UTF-8 environment?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-04-22 11:27</div>
            <div class="timeline-body"><p>I don't know about the cl compiler setting unfortunately, I only know about the uv's build frontend side of it.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:01 UTC
    </footer>
</body>
</html>
