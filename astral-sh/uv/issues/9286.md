```yaml
number: 9286
title: Impossible to override keyring-provider option if set to subprocess anywhere
type: issue
state: closed
author: maxbrunet
labels:
  - needs-mre
assignees: []
created_at: 2024-11-20T17:40:40Z
updated_at: 2024-11-21T17:07:48Z
url: https://github.com/astral-sh/uv/issues/9286
synced_at: 2026-01-10T01:57:21Z
```

# Impossible to override keyring-provider option if set to subprocess anywhere

---

_Issue opened by @maxbrunet on 2024-11-20 17:40_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

While trying to workaround #9285, I did not find a way for disabling `keyring-provider`.

In all the combinations I tested, `disabled` never has any effect, `subprocess` always applies:

```bash
UV_KEYRING_PROVIDER=subprocess uv lock --keyring-provider=disabled
```

```bash
# I usually expect flags to take precedence on env vars, but just to note that I tried it
UV_KEYRING_PROVIDER=disabled uv lock --keyring-provider=subprocess
```

```bash
# keyring-provider=subprocess in pyproject.toml
UV_KEYRING_PROVIDER=disabled uv lock --keyring-provider=disabled
```

I would have expected that it is possible to override back to the default:

https://github.com/astral-sh/uv/blob/b19ccb6b977dfbdd4c8711c571457ed0d8ba3308/docs/reference/settings.md?plain=1#L856

### Version

```
uv 0.5.3 (56d362208 2024-11-19)
```

---

_Label `bug` added by @charliermarsh on 2024-11-20 17:41_

---

_Comment by @charliermarsh on 2024-11-20 17:42_

Seems like a bug.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-11-20 20:07_

---

_Comment by @charliermarsh on 2024-11-20 20:19_

How did you determine this? I see the right behavior:

```
‚ùØ UV_KEYRING_PROVIDER=subprocess uv lock --keyring-provider=disabled --show-settings | grep keyring
        keyring_provider: Disabled,
```

---

_Label `bug` removed by @charliermarsh on 2024-11-20 20:19_

---

_Label `needs-mre` added by @charliermarsh on 2024-11-20 20:19_

---

_Comment by @maxbrunet on 2024-11-21 17:07_

Sorry for the noise, I got confused in my testing, `UV_KEYRING_PROVIDER=disabled` works indeed

---

_Closed by @maxbrunet on 2024-11-21 17:07_

---
