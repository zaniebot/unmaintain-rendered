```yaml
number: 3513
title: Add support for setting all remote packages to --only-binary
type: issue
state: closed
author: yeswalrus
labels: []
assignees: []
created_at: 2024-05-10T17:21:44Z
updated_at: 2024-05-13T20:42:36Z
url: https://github.com/astral-sh/uv/issues/3513
synced_at: 2026-01-10T01:57:07Z
```

# Add support for setting all remote packages to --only-binary

---

_Issue opened by @yeswalrus on 2024-05-10 17:21_

Feature request/suggestion:
If your requirements.txt file contains both local packages that are meant to be built as well as remote packages, the `--no-build` flag becomes unusable. It would be very useful to be able to specify you don't want to build any package that needs to be fetched remotely.  At minimum this could be achieved with `--only-binary :remote:`.

Perhaps more flexible would be adding wildcard pattern support for the `--only-binary` flag, perhaps in the form `:<package>@<remote>:`, so you could say `--only-binary :some-package@*:` or `--only-binary :*@remote.url:`

edit:
The simplest option would be to simply ignore the --only-binary flag for any package marked with `--editable` in the requirements.txt

---

_Comment by @zanieb on 2024-05-11 02:20_

I'm having a hard time pulling up the code to confirm this, but I'm pretty sure that we already do not apply `--only-binary` to editable requirements.

---

_Comment by @zanieb on 2024-05-11 02:28_

Here's a demonstrative test case https://github.com/astral-sh/uv/pull/3521

---

_Comment by @yeswalrus on 2024-05-11 03:19_

Interesting. I've got some --editable local packages, and when I set --no-build, I wind up with failures. Ex:

```
Built 6 editables in 868ms
error: Failed to build `sim-scores @ file:///home/user/dev/prod/pins/python/sim_scores`
  Caused by: Building source distributions is disabled
```

where my requirements.txt looks like:
```
...
--editable python/sim_scores
...
```

---

_Comment by @yeswalrus on 2024-05-11 05:15_

I think I figured out the issue.
Packages A and B are both listed in the requirements.txt with `--editable`. 
Package B has Package A listed as a dependency in it's setup.py, which is sufficient to cause the error.

This appears to be an issue with cycle resolution. I think the *actual* bug is that if a package is listed as --editable, the ignoring of --no-build should be extended to all subsequent discoveries of it (and possibly a more detailed error message naming which dependency of the package caused the failure).

I can work a bit on putting together a repro test case a bit later today

---

_Referenced in [astral-sh/uv#3559](../../astral-sh/uv/pulls/3559.md) on 2024-05-13 18:51_

---

_Comment by @yeswalrus on 2024-05-13 18:51_

I've managed to reproduce the error in a unit test here: https://github.com/astral-sh/uv/pull/3559

---

_Referenced in [astral-sh/uv#3561](../../astral-sh/uv/pulls/3561.md) on 2024-05-13 20:36_

---

_Comment by @zanieb on 2024-05-13 20:36_

Thanks! I've reproduced that in https://github.com/astral-sh/uv/pull/3561

---

_Referenced in [astral-sh/uv#3562](../../astral-sh/uv/issues/3562.md) on 2024-05-13 20:37_

---

_Comment by @zanieb on 2024-05-13 20:37_

Going to track this in a more focused issue at https://github.com/astral-sh/uv/issues/3562

---

_Closed by @zanieb on 2024-05-13 20:42_

---
