```yaml
number: 16546
title: report an error when installing a package that overrides another
type: issue
state: open
author: DetachHead
labels:
  - enhancement
assignees: []
created_at: 2025-11-01T08:53:41Z
updated_at: 2026-01-06T10:08:23Z
url: https://github.com/astral-sh/uv/issues/16546
synced_at: 2026-01-10T01:57:36Z
```

# report an error when installing a package that overrides another

---

_Issue opened by @DetachHead on 2025-11-01 08:53_

### Summary

since pypi packages can have conflicting names, if you install two different packages with the same name they will silently override each other. uv should fail when this occurs to prevent unexpected behavior.

### Example

this often occurs when using a fork. for example, i've made [my own fork](https://pypi.org/project/dtach/) of the abandoned [tach](https://pypi.org/project/tach/) linter. to allow it to be a drop-in replacement, i've kept the package name "tach", but this can cause unexpected behavior if the user has both packages installed at the same time:

```
uv add --dev dtach
uv add --dev tach
```

in this example, one of the packages will be silently overridden.

---

_Label `enhancement` added by @DetachHead on 2025-11-01 08:53_

---

_Comment by @charliermarsh on 2025-11-01 19:41_

I think we already _do_ emit a warning if you install both in the same operation?

---

_Comment by @DetachHead on 2025-11-02 05:10_

hmm i don't see a warning when adding both dependencies in the same command either:

```
$ uv add --dev tach dtach
Using CPython 3.12.3 interpreter at: .pyprojectx/main/python
Creating virtual environment at: .venv
warning: No `requires-python` value found in the workspace. Defaulting to `>=3.12`.
Resolved 23 packages in 162ms
Installed 22 packages in 25ms
 + annotated-types==0.7.0
 + dtach==0.31.0
 + gitdb==4.0.12
 + gitpython==3.1.45
 + markdown-it-py==4.0.0
 + mdurl==0.1.2
 + networkx==3.5
 + prompt-toolkit==3.0.52
 + pydantic==2.12.3
 + pydantic-core==2.41.4
 + pydot==3.0.4
 + pygments==2.19.2
 + pyparsing==3.2.5
 + pyyaml==6.0.3
 + rich==13.9.4
 + smmap==5.0.2
 + tach==0.29.0
 + tomli==2.3.0
 + tomli-w==1.2.0
 + typing-extensions==4.15.0
 + typing-inspection==0.4.2
 + wcwidth==0.2.14
```

i'm using uv 0.9.7, tested on both a linux and macos device

---

_Comment by @charliermarsh on 2025-11-02 18:25_

Oh sorry, I think we rolled it back because it was triggering on too many real-world packages that include overlapping files or write to overlapping directories.

---

_Comment by @DetachHead on 2025-11-02 22:48_

Maybe it could be a setting? IMO it's quite dangerous for something like this to go undetected 

---

_Comment by @samypr100 on 2025-11-03 03:34_

See https://github.com/astral-sh/uv/pull/13437

---

_Comment by @konstin on 2025-12-16 13:32_

This is available with `--preview-features detect-module-conflicts`, it's not active by default currently because some popular packages rely on it.

---

_Comment by @DetachHead on 2025-12-20 04:24_

hmm i still don't see an error when i enable this feature:

```
$ uv add --dev dtach --preview-features detect-module-conflicts
Resolved 95 packages in 38ms
      Built test-project @ file:///home/me/test-project
Prepared 1 package in 107ms
Uninstalled 1 package in 0.41ms
Installed 2 packages in 7ms
 + dtach==0.31.2
 ~ test-project==1.0.0 (from file:///home/me/test-project)
```

tested with uv 0.9.18

---

_Comment by @samypr100 on 2025-12-24 23:37_

> hmm i still don't see an error when i enable this feature:

In it's current form, I think it would only show up when both are being installed. Try cleaning your venv

---

_Comment by @DetachHead on 2025-12-25 07:39_

ah that worked, thanks.

would it be possible for this to be reported as an error instead of a warning? (or at least an option to do so) because i believe in its current state this warning would be extremely easy to miss, considering what i would think is the most common scenario:

1. user adds a new package that conflicts with an already installed package (eg. `uv add --dev dtach` when `tach` is already installed in the venv)
2. the warning does not appear since one of the packages was already installed, so the user commits their change that introduces the new package
3. the warning now appears in CI when running `uv sync`. nobody notices because it's a warning that does not cause the CI to fail
4. the PR introducing the conflicting packages gets merged because nobody noticed the warning

---

_Comment by @konstin on 2026-01-05 19:02_

There's a number of existing setups that rely on overriding things unfortunately, which blocks us from properly erroring here.

---

_Comment by @DetachHead on 2026-01-06 10:08_

if it's an option then users who rely on those setups can just disable the error

---
