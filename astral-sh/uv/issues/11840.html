<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nushell activation script creates a duplicated prompt - astral-sh/uv #11840</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>nushell activation script creates a duplicated prompt</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11840">#11840</a>
        opened by <a href="https://github.com/Ravencentric">@Ravencentric</a>
        on 2025-02-27 21:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Ravencentric">@Ravencentric</a> on 2025-02-27 21:33</div>
            <div class="timeline-body"><h3>Summary</h3>
<blockquote>
<p>I initially opened this in the nushell repository (https://github.com/nushell/nushell/issues/15205) but was told to bring it up here.</p>
</blockquote>
<hr />
<p>nu:</p>
<p><img src="https://github.com/user-attachments/assets/8e706bd4-58cb-4866-8336-062bb39c7b39" alt="Image" /></p>
<p>Notice the duplicated <code>(.venv)</code>.</p>
<p>pwsh:</p>
<p><img src="https://github.com/user-attachments/assets/ac4b78e7-4d82-41cc-9a5b-028755ee30ec" alt="Image" /></p>
<h3>How to reproduce</h3>
<ol>
<li>Install <a href="https://starship.rs/guide/">starship</a></li>
<li>Add the following to <code>$nu.config-path</code>:<pre><code class="language-nu">mkdir ($nu.data-dir | path join &quot;vendor/autoload&quot;)
starship init nu | save -f ($nu.data-dir | path join &quot;vendor/autoload/starship.nu&quot;)
</code></pre>
</li>
<li>Create a venv with <a href="https://docs.astral.sh/uv/">uv</a>: <code>uv venv</code></li>
<li>Activate the venv with <code>overlay use .venv/Scripts/activate.nu</code></li>
</ol>
<h3>Platform</h3>
<p>Windows 11 x86_64</p>
<h3>Version</h3>
<p>uv 0.6.3 (a0b9f22a2 2025-02-24)</p>
<h3>Python version</h3>
<p>Python 3.13.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @Ravencentric on 2025-02-27 21:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cptpiepmatz">@cptpiepmatz</a> on 2025-02-27 23:57</div>
            <div class="timeline-body"><p>I don't think that is an issue here, the <code>VIRTUAL_ENV_DISABLE_PROMPT</code> env variable already allows to remove that extra line.</p>
<p>I also explained it more <a href="https://github.com/nushell/nushell/issues/15205#issuecomment-2689373775">here</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ravencentric">@Ravencentric</a> on 2025-02-28 11:30</div>
            <div class="timeline-body"><p>That did the trick, thank you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Ravencentric on 2025-02-28 11:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:01 UTC
    </footer>
</body>
</html>
