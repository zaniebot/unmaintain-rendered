<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv init` should autofill the `authors` field in pyproject.toml - astral-sh/uv #7718</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv init` should autofill the `authors` field in pyproject.toml</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7718">#7718</a>
        opened by <a href="https://github.com/Ravencentric">@Ravencentric</a>
        on 2024-09-26 17:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Ravencentric">@Ravencentric</a> on 2024-09-26 17:02</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<h2>Feature Request</h2>
<p><code>poetry init</code> autofills the <code>authors</code> field:</p>
<pre><code class="language-shell">‚ùØ cat .\pyproject.toml
[tool.poetry]
name = &quot;example&quot;
version = &quot;0.1.0&quot;
description = &quot;&quot;
authors = [&quot;Ravencentric &lt;my@example.email&gt;&quot;]
</code></pre>
<p>I find this quite helpful. This is usually boiler-plate that I'll have to fill anyway and not something that frequently changes so I doubt this will be controversial either. Would love to see this in <code>uv init</code>.</p>
<h2>Wish</h2>
<p>I would also like it if <code>uv init</code> would autofill <a href="https://peps.python.org/pep-0639/#project-source-metadata">license</a> field. <a href="https://choosealicense.com/licenses/mit/">MIT</a> seems to be the <a href="https://snyk.io/blog/over-10-of-python-packages-on-pypi-are-distributed-without-any-license/">popular option as of 2018</a>. This might be harder to get a consensus on so I don't mind if this gets rejected. This can also be tied to a specific mode, like say <code>--package</code> and <code>--lib</code> but not with <code>--app</code> since the former two are supposed to be published and the latter isn't. Prior art example for this would be <code>hatch</code> which upon <code>hatch new</code> creates this:</p>
<pre><code class="language-toml">[project]
name = &quot;hello&quot;
dynamic = [&quot;version&quot;]
description = ''
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.8&quot;
license = &quot;MIT&quot;
keywords = []
authors = [
  { name = &quot;Ravencentric&quot;, email = &quot;my@example.email&quot; },
]
classifiers = [
  &quot;Development Status :: 4 - Beta&quot;,
  &quot;Programming Language :: Python&quot;,
  &quot;Programming Language :: Python :: 3.8&quot;,
  &quot;Programming Language :: Python :: 3.9&quot;,
  &quot;Programming Language :: Python :: 3.10&quot;,
  &quot;Programming Language :: Python :: 3.11&quot;,
  &quot;Programming Language :: Python :: 3.12&quot;,
  &quot;Programming Language :: Python :: Implementation :: CPython&quot;,
  &quot;Programming Language :: Python :: Implementation :: PyPy&quot;,
]
dependencies = []
</code></pre>
<p>along with the <code>license.txt</code></p>
<pre><code class="language-shell">hello
‚îú‚îÄ‚îÄ src
‚îÇ   ‚îî‚îÄ‚îÄ hello
‚îÇ       ‚îú‚îÄ‚îÄ __about__.py
‚îÇ       ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ tests
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ LICENSE.txt
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ pyproject.toml
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`uv init` should add `author` field in pyproject.toml" to "`uv init` should autofill the `authors` field in pyproject.toml" by @Ravencentric on 2024-09-26 17:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-27 12:25</div>
            <div class="timeline-body"><p>How would we determine the <code>authors</code> in this case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ravencentric">@Ravencentric</a> on 2024-09-27 13:06</div>
            <div class="timeline-body"><p>So I just checked poetry, pdm, and hatch. Both poetry and hatch pull the author from <code>git</code>. pdm is an exception here since pdm's init interactively asks the user for author instead.</p>
<h2>Case 1: No git on the system OR unconfigured git</h2>
<p>You can check that git (if installed) doesn't have a configured author by running:</p>
<pre><code class="language-shell">$ git config user.name # no output
$ git config user.email # no output
</code></pre>
<p>Both hatch and poetry use a placeholder in this case:</p>
<ul>
<li><p>poetry</p>
<pre><code>$ poetry new --src hello-poetry &amp;&amp; cat hello-poetry/pyproject.toml
</code></pre>
<pre><code class="language-toml">[tool.poetry]
name = &quot;hello-poetry&quot;
version = &quot;0.1.0&quot;
description = &quot;&quot;
authors = [&quot;Your Name &lt;you@example.com&gt;&quot;]
readme = &quot;README.md&quot;
packages = [{include = &quot;hello_poetry&quot;, from = &quot;src&quot;}]

[tool.poetry.dependencies]
python = &quot;^3.12&quot;


[build-system]
requires = [&quot;poetry-core&quot;]
build-backend = &quot;poetry.core.masonry.api&quot;
</code></pre>
</li>
<li><p>hatch</p>
<pre><code class="language-shell">$ hatch new hello-hatch &amp;&amp; cat hello-hatch/pyproject.toml
</code></pre>
<pre><code class="language-toml">[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;

[project]
name = &quot;hello-hatch&quot;
dynamic = [&quot;version&quot;]
description = ''
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.8&quot;
license = &quot;MIT&quot;
keywords = []
authors = [
{ name = &quot;U.N. Owen&quot;, email = &quot;void@some.where&quot; },
]
classifiers = [
&quot;Development Status :: 4 - Beta&quot;,
&quot;Programming Language :: Python&quot;,
&quot;Programming Language :: Python :: 3.8&quot;,
&quot;Programming Language :: Python :: 3.9&quot;,
&quot;Programming Language :: Python :: 3.10&quot;,
&quot;Programming Language :: Python :: 3.11&quot;,
&quot;Programming Language :: Python :: 3.12&quot;,
&quot;Programming Language :: Python :: Implementation :: CPython&quot;,
&quot;Programming Language :: Python :: Implementation :: PyPy&quot;,
]
dependencies = []
</code></pre>
</li>
</ul>
<h2>Case 2: Configured git exists on the system</h2>
<p>Configure git:</p>
<pre><code>$ git config --global user.name &quot;raven&quot;
$ git config --global user.email &quot;raven@email.com&quot;
$ git config user.name
raven
$ git config user.email
raven@email.com
</code></pre>
<p>Now both poetry and hatch will pull the author field from the above git configuration:</p>
<ul>
<li><p>poetry</p>
<pre><code class="language-shell">$ poetry new --src hello-poetry &amp;&amp; cat hello-poetry/pyproject.toml
</code></pre>
<pre><code class="language-toml">[tool.poetry]
name = &quot;hello-poetry&quot;
version = &quot;0.1.0&quot;
description = &quot;&quot;
authors = [&quot;raven &lt;raven@email.com&gt;&quot;]
readme = &quot;README.md&quot;
packages = [{include = &quot;hello_poetry&quot;, from = &quot;src&quot;}]

[tool.poetry.dependencies]
python = &quot;^3.12&quot;


[build-system]
requires = [&quot;poetry-core&quot;]
build-backend = &quot;poetry.core.masonry.api&quot;
</code></pre>
</li>
<li><p>hatch</p>
<pre><code class="language-shell">$ hatch new hello-hatch &amp;&amp; cat hello-hatch/pyproject.toml
</code></pre>
<pre><code class="language-toml">[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;

[project]
name = &quot;hello-hatch&quot;
dynamic = [&quot;version&quot;]
description = ''
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.8&quot;
license = &quot;MIT&quot;
keywords = []
authors = [
{ name = &quot;raven&quot;, email = &quot;raven@email.com&quot; },
]
classifiers = [
&quot;Development Status :: 4 - Beta&quot;,
&quot;Programming Language :: Python&quot;,
&quot;Programming Language :: Python :: 3.8&quot;,
&quot;Programming Language :: Python :: 3.9&quot;,
&quot;Programming Language :: Python :: 3.10&quot;,
&quot;Programming Language :: Python :: 3.11&quot;,
&quot;Programming Language :: Python :: 3.12&quot;,
&quot;Programming Language :: Python :: Implementation :: CPython&quot;,
&quot;Programming Language :: Python :: Implementation :: PyPy&quot;,
]
dependencies = []
</code></pre>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ravencentric">@Ravencentric</a> on 2024-09-27 13:14</div>
            <div class="timeline-body"><p>Relevant poetry snippet:
https://github.com/python-poetry/poetry/blob/150ff09e5609f9ea9f5502e7f8b4720458e5126b/src/poetry/console/commands/init.py#L152-L157</p>
<p>Relevant hatch snippet(s):
https://github.com/pypa/hatch/blob/5352e4422636cf1238017a74f0c67d689ccee558/src/hatch/config/model.py#L460-L483
https://github.com/pypa/hatch/blob/5352e4422636cf1238017a74f0c67d689ccee558/src/hatch/config/model.py#L491-L514</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7756.html">astral-sh/uv#7756</a> on 2024-09-28 11:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2024-09-28 16:45</div>
            <div class="timeline-body"><p>As I prefer not to expose my personal email in the Git commit history, I usually set up accounts with  email addresses like <code>@users.noreply.github.com</code> and <code>@users.noreply.gitlab.com</code>.
Therefore, I hope that when encountering these two types of email addresses, they won't be set as the author's email, or a warning will be initialized.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dpprdan">@dpprdan</a> on 2024-09-28 19:59</div>
            <div class="timeline-body"><blockquote>
<p>How would we determine the <code>authors</code> in this case?</p>
</blockquote>
<blockquote>
<p>pdm's init interactively asks the user for author instead.</p>
</blockquote>
<p>I'd prefer pdm's approach (also w.r.t. @FishAlchemist's comment), plus a way to store this info in the user-level configuration (e.g., <code>~/.config/uv/uv.toml</code>).</p>
<p>For a non-Python precedent see <a href="https://usethis.r-lib.org/reference/use_description.html"><code>use_description()</code> from the {usethis} R üì¶</a> (especially the paragraph starting with &quot;If you create a lot of packages, ...&quot;). lt can also set a licence and package (or project) language. (In R, the <code>DESCRIPTION</code> file is the equivalent to <code>pyproject.toml</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ravencentric">@Ravencentric</a> on 2024-09-28 20:40</div>
            <div class="timeline-body"><p>I like the idea of being able to define commonly shared project metadata in user level uv.toml</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-29 15:24</div>
            <div class="timeline-body"><p>Defining metadata in the <code>uv.toml</code> seems nice, as does reading from <code>git</code> by default. I think that we won't make this command interactive just for this feature, but I think an <code>--interactive / -i</code> flag would be nice in the future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-08 19:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-08 19:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8098.html">astral-sh/uv#8098</a> on 2024-10-10 15:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:56 UTC
    </footer>
</body>
</html>
