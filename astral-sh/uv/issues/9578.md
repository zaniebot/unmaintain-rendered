```yaml
number: 9578
title: How do I build a package which depends on another local package, for later use in a Docker container?
type: issue
state: open
author: NicholasPini
labels: []
assignees: []
created_at: 2024-12-02T14:44:45Z
updated_at: 2025-04-28T08:10:14Z
url: https://github.com/astral-sh/uv/issues/9578
synced_at: 2026-01-10T01:57:22Z
```

# How do I build a package which depends on another local package, for later use in a Docker container?

---

_Issue opened by @NicholasPini on 2024-12-02 14:44_

I have a bunch of parallel projects: each of these is it's own uv project. These project can depend on one another. Ultimately, I want to build a wheel file from a project, and use it in a Dockerfile to build the environment. Here is the problem: if project A depends on project B, this will be reflected in the wheel file, but then when I do
```docker
RUN uv pip install --no-cache-dir ./*.whl
```
in my Dockerfile, it fails because it does not find package B in the registry. I don't want to import the source files of project B directly in the Docker image to avoid having to rebuild every time: I only want the dependencies necessary for A and B to work. The source files are going to be pulled from S3.

I thought about not making A depend on B, and just add B later in the container, but this means developing the project A without being able to rely on the linter to know if some dependencies is available because it's already in B, and having to install B's dependencies after having built the Docker image, which is suboptimal.

Note that I require the packages to be separated, thus I cannot use workspaces.

Is there a solution?


---

_Comment by @gary-wall-hpe on 2024-12-02 14:48_

When you build A, where do you put the whl build artifact?

---

_Comment by @NicholasPini on 2024-12-02 14:51_

> When you build A, where do you put the whl build artifact?

I leave the default path, which is the `dist` folder inside the project A folder. The dependencies of project B is declared as `../project_B`, because A and B are both in the same main folder, at the same level.

---

_Comment by @gary-wall-hpe on 2024-12-02 14:55_

> > When you build A, where do you put the whl build artifact?
> 
> I leave the default path, which is the `dist` folder inside the project A folder. The dependencies of project B is declared as `../project_B`, because A and B are both in the same main folder, at the same level.

As I humbly understand, the index URL is the only place it will look to resolve unless you explicitly tell it where to find the file. But if you truly want to separate projects having a custom index you publish built artifacts to would give you flexibility.

---

_Comment by @NicholasPini on 2024-12-02 15:01_

> > > When you build A, where do you put the whl build artifact?
> > 
> > 
> > I leave the default path, which is the `dist` folder inside the project A folder. The dependencies of project B is declared as `../project_B`, because A and B are both in the same main folder, at the same level.
> 
> As I humbly understand, the index URL is the only place it will look to resolve unless you explicitly tell it where to find the file. But if you truly want to separate projects having a custom index you publish built artifacts to would give you flexibility.

I believe I can add the `--find-links` option to `uv build` and pass the local dependencies' paths. Problem is, I believe that it would still fail as soon as I try to install the wheel file inside the docker container. 

---

_Comment by @zanieb on 2024-12-02 15:58_

Why not use `--find-links` during `uv pip install` too?

---

_Comment by @NicholasPini on 2024-12-02 16:22_

> Why not use `--find-links` during `uv pip install` too?

I get a `relative URL without a base` error. I tried both an absolute path, and a relative path.

---

_Comment by @zanieb on 2024-12-02 16:32_

Can you share a minimal example of this whole thing as a GitHub repository? I don't think we'll be able to help without a concrete demonstration.

---

_Comment by @JuR-0 on 2025-04-27 17:41_

@NicholasPini Did you solve your issue? I have a similar use case where I have a local dependency and a docker deployment. Couldn't find a solution. Any help would be appreciated

---

_Comment by @NicholasPini on 2025-04-27 18:10_

> [@NicholasPini](https://github.com/NicholasPini) Did you solve your issue? I have a similar use case where I have a local dependency and a docker deployment. Couldn't find a solution. Any help would be appreciated

Kinda? I don't use wheel files anymore. I copy the same exact folder structure into my dockerfile, with all necessary python projects and their toml/lock files, skipping the actual source code (except the __init__.py files, these are necessary). 

---

_Comment by @JuR-0 on 2025-04-28 08:10_

> Kinda? I don't use wheel files anymore. I copy the same exact folder structure into my dockerfile, with all necessary python projects and their toml/lock files, skipping the actual source code (except the **init**.py files, these are necessary).

Seems like a hassle for something that shouldn't be. Thanks for your answer I'll see if I can make it work on my end 

---
