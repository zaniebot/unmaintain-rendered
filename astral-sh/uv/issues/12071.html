<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Question] Using `uvx` and PEP723 - astral-sh/uv #12071</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Question] Using <code>uvx</code> and PEP723</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12071">#12071</a>
        opened by <a href="https://github.com/anzhi0708">@anzhi0708</a>
        on 2025-03-09 03:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/anzhi0708">@anzhi0708</a></div>
            <div class="timeline-body">Question
<p>Suppose I installed a certain command using <code>uvx</code> and then ran a script. The script provides a list of dependencies using the PEP 723 standard.</p>
<pre><code>me@MacBook-Air ~/dev&gt; head -n 19 test_my_sdk.py
# /// script
# dependencies = [
#     &quot;chardet&gt;=5.2.0&quot;,
#     &quot;colorama&gt;=0.4.6&quot;,
#     &quot;httpx&gt;=0.28.1&quot;,
#     &quot;openpyxl&gt;=3.1.5&quot;,
#     &quot;pandas&gt;=2.2.3&quot;,
#     &quot;typer&gt;=0.15.2&quot;,
#     &quot;rich&quot;,
#     &quot;memory_profiler&quot;
# ]
# ///

</code></pre>
<ul>
<li>Installing <code>memory_profile</code>:</li>
</ul>
<pre><code>uv tool install --with matplotlib memory-profiler
</code></pre>
<p>Now, I can use <code>uv run</code> to execute this script, and <code>uv</code> will automatically manage the dependencies declared in the script. However, if I use the <code>mprof</code> command from the recently installed <code>memory_profiler</code> to run the script, it reports missing dependencies (e.g., <code>pandas</code>, which is declared at the beginning of the script). It seems that the installed command only includes dependencies specified with <code>--with</code>, but not others. If I want to run this script using the newly installed <code>mprof</code> command, do I need to list all dependencies with <code>--with</code> when installing it? Like <code>uv tool install --with matplotlib --with httpx --with colorama --with chardet --with openpyxl --with pandas --with typer --with rich memory-profiler</code>?</p>
Platform
<p><em>No response</em></p>
Version
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/anzhi0708">@anzhi0708</a> on 2025-03-09 03:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-09 15:32</div>
            <div class="timeline-body"><p>Yeah unfortunately that&#x27;s what you&#x27;d need to do now</p>
<p>I think you want <a href="https://github.com/astral-sh/uv/issues/6542">astral-sh/uv#6542</a></p>
<p>You can workaround specifying all the dependencies with something like</p>
<pre><code>uv export --script example.py | uvx --with-requirements - --from memory-profiler mprof
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/anzhi0708">@anzhi0708</a> on 2025-03-11 04:36</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/anzhi0708">@anzhi0708</a> on 2025-03-11 04:36</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:37:42 UTC
    </footer>
</body>
</html>
