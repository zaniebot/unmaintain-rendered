<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Termux on Android - astral-sh/uv #2408</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Termux on Android</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2408">#2408</a>
        opened by <a href="https://github.com/phanirithvij">@phanirithvij</a>
        on 2024-03-13 11:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/phanirithvij">@phanirithvij</a></div>
            <div class="timeline-body"><p>I tried installing on termux on Android but build failed.
Can this platform Android be supported?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charbeljc">@charbeljc</a> on 2024-03-18 19:00</div>
            <div class="timeline-body"><p>Hi, we are following the same path, here. From what I see, <code>rye</code> is installable with no glitches on Termux, failing at runtime to bootstrap itself due to the unavailability of <code>uv</code>.</p>
<pre><code class="language-bash">cargo install --path crates/uv
</code></pre>
<p>fails at link stage:</p>
<pre><code>[...] &quot;/data/data/com.termux/files/usr/lib/rustlib/aarch64-linux-android/lib/libcompiler_builtins-d269850cd60e0323.rlib&quot; \
  &quot;-Wl,-Bdynamic&quot; &quot;-lgcc&quot; &quot;-lz&quot; &quot;-ldl&quot; &quot;-llog&quot; &quot;-lunwind&quot; &quot;-ldl&quot; &quot;-lm&quot; &quot;-lc&quot; \
  &quot;-Wl,--eh-frame-hdr&quot; &quot;-Wl,-z,noexecstack&quot; \
  &quot;-L&quot; &quot;/data/data/com.termux/files/usr/lib/rustlib/aarch64-linux-android/lib&quot; &quot;-o&quot; &quot;/data/data/com.termux/files/home/Hack/uv/target/release/deps/uv-e66b0816d4199fc5&quot; \
  &quot;-Wl,--gc-sections&quot; &quot;-pie&quot; &quot;-Wl,-z,relro,-z,now&quot; &quot;-Wl,-O1&quot; &quot;-nodefaultlibs&quot;
  = note: ld.lld: error: unable to find library -lgcc
          cc: error: linker command failed with exit code 1 (use -v to see invocation)
</code></pre>
<p>I guess <code>cc</code>is the culprit here...</p>
<p>Regards</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-18 19:11</div>
            <div class="timeline-body"><p>I haven't looked at it at all, but you could try <code>--no-default-features --features flate2/rust_backend</code> to reduce some native dependencies.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charbeljc">@charbeljc</a> on 2024-03-18 20:28</div>
            <div class="timeline-body"><p>Hey, I did try another way, and just succeeded installing...</p>
<p>See https://stackoverflow.com/questions/68873570/how-do-i-fix-ld-error-unable-to-find-library-lgcc-when-cross-compiling-rust for details.</p>
<pre><code class="language-bash">cd /data/data/com.termux/files/usr/lib
cat &lt;&lt; EOF &gt; libgcc.a
INPUT(-lunwind)
EOF
cd $UV_SOURCES
cargo install --path crates/uv
</code></pre>
<p>Bingo !</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charbeljc">@charbeljc</a> on 2024-03-18 20:31</div>
            <div class="timeline-body"><p>However, there is still work to be done here...</p>
<pre><code>❯ uv venv
  × Querying Python at `/data/data/com.termux/files/usr/bin/python3` did not return the expected
  │ data: invalid value: integer `-1`, expected u16 with exit status: 0
  │ --- stdout:
  │ {&quot;result&quot;: &quot;success&quot;, &quot;markers&quot;: {&quot;implementation_name&quot;: &quot;cpython&quot;, &quot;implementation_version&quot;:
  │ &quot;3.11.8&quot;, &quot;os_name&quot;: &quot;posix&quot;, &quot;platform_machine&quot;: &quot;aarch64&quot;, &quot;platform_python_implementation&quot;:
  │ &quot;CPython&quot;, &quot;platform_release&quot;: &quot;5.4.233-qgki-ge0ae3f4f4643&quot;, &quot;platform_system&quot;: &quot;Linux&quot;,
  │ &quot;platform_version&quot;: &quot;#1 SMP PREEMPT Thu Dec 14 04:24:04 UTC 2023 f2fs-hash:1e2949fb28&quot;,
  │ &quot;python_full_version&quot;: &quot;3.11.8&quot;, &quot;python_version&quot;: &quot;3.11&quot;, &quot;sys_platform&quot;:
  │ &quot;linux&quot;}, &quot;base_prefix&quot;: &quot;/data/data/com.termux/files/usr&quot;, &quot;base_exec_prefix&quot;:
  │ &quot;/data/data/com.termux/files/usr&quot;, &quot;prefix&quot;: &quot;/data/data/com.termux/files/usr&quot;,
  │ &quot;base_executable&quot;: &quot;/data/data/com.termux/files/usr/bin/python3&quot;,
  │ &quot;sys_executable&quot;: &quot;/data/data/com.termux/files/usr/bin/python3&quot;, &quot;stdlib&quot;:
  │ &quot;/data/data/com.termux/files/usr/lib/python3.11&quot;, &quot;scheme&quot;: {&quot;platlib&quot;:
  │ &quot;/data/data/com.termux/files/usr/lib/python3.11/site-packages&quot;, &quot;purelib&quot;:
  │ &quot;/data/data/com.termux/files/usr/lib/python3.11/site-packages&quot;, &quot;include&quot;:
  │ &quot;/data/data/com.termux/files/usr/include/python3.11&quot;, &quot;scripts&quot;:
  │ &quot;/data/data/com.termux/files/usr/bin&quot;, &quot;data&quot;: &quot;/data/data/com.termux/files/usr&quot;},
  │ &quot;virtualenv&quot;: {&quot;purelib&quot;: &quot;lib/python3.11/site-packages&quot;, &quot;platlib&quot;:
  │ &quot;lib/python3.11/site-packages&quot;, &quot;include&quot;: &quot;include/site/python3.11&quot;, &quot;scripts&quot;: &quot;bin&quot;,
  │ &quot;data&quot;: &quot;&quot;}, &quot;platform&quot;: {&quot;os&quot;: {&quot;name&quot;: &quot;manylinux&quot;, &quot;major&quot;: -1, &quot;minor&quot;: -1}, &quot;arch&quot;:
  │ &quot;aarch64&quot;}}
  │ --- stderr:

  │ ---
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charbeljc">@charbeljc</a> on 2024-03-18 22:16</div>
            <div class="timeline-body"><p>With something like that, <code>uv</code> goes further, trying to install <code>fastapi</code>.</p>
<pre><code>diff --git a/crates/uv-interpreter/python/get_interpreter_info.py b/crates/uv-interpreter/python/get_interpreter_info.py
index a2c1e98b..210c8c6b 100644
--- a/crates/uv-interpreter/python/get_interpreter_info.py
+++ b/crates/uv-interpreter/python/get_interpreter_info.py
@@ -440,11 +440,16 @@ def get_operating_system_and_architecture():
                 &quot;minor&quot;: musl_version[1],
             }
         elif glibc_version:
-            operating_system = {
-                &quot;name&quot;: &quot;manylinux&quot;,
-                &quot;major&quot;: glibc_version[0],
-                &quot;minor&quot;: glibc_version[1],
-            }
+            if glibc_version == (-1, -1) and architecture == &quot;aarch64&quot;:
+                operating_system = {
+                    &quot;name&quot;: &quot;android&quot;,
+                }
+            else:
+                operating_system = {
+                    &quot;name&quot;: &quot;manylinux&quot;,
+                    &quot;major&quot;: glibc_version[0],
+                    &quot;minor&quot;: glibc_version[1],
+                }
         else:
</code></pre>
<p>Oh, and it even installed <code>maturin</code> from sources  and trying to build <code>_pydantic_core</code> with it, right now ...</p>
<pre><code class="language-bash">[...]
DEBUG Writing entrypoints name=&quot;pydantic&quot;
DEBUG No data name=&quot;pydantic&quot;
DEBUG Writing extra metadata name=&quot;pydantic&quot;
DEBUG Writing record name=&quot;pydantic&quot;
Installed 10 packages in 63ms
 + annotated-types==0.6.0
 + anyio==4.3.0
 + fastapi==0.110.0
 - hello==0.1.0 (from file:///data/data/com.termux/files/home/Hack/hello)
 + hello==0.1.0 (from file:///data/data/com.termux/files/home/Hack/hello)
 + idna==3.6
 + pydantic==2.6.4
 + pydantic-core==2.16.3
 + sniffio==1.3.1
 + starlette==0.36.3
 + typing-extensions==4.10.0

</code></pre>
<p>And python is failing to load <code>fastapi</code>.</p>
<pre><code>❯ python
Python 3.11.8 (main, Feb 11 2024, 13:05:24) [Clang 17.0.2 (https://android.googlesource.com/toolchain/llvm-project d9f89f4d1 on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import fastapi
Traceback (most recent call last):
  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
  File &quot;/data/data/com.termux/files/home/Hack/hello/.venv/lib/python3.11/site-packages/fastapi/__init__.py&quot;, line 7, in &lt;module&gt;
    from .applications import FastAPI as FastAPI
  File &quot;/data/data/com.termux/files/home/Hack/hello/.venv/lib/python3.11/site-packages/fastapi/applications.py&quot;, line 16, in &lt;module&gt;
    from fastapi import routing
  File &quot;/data/data/com.termux/files/home/Hack/hello/.venv/lib/python3.11/site-packages/fastapi/routing.py&quot;, line 22, in &lt;module&gt;
    from fastapi import params
  File &quot;/data/data/com.termux/files/home/Hack/hello/.venv/lib/python3.11/site-packages/fastapi/params.py&quot;, line 5, in &lt;module&gt;
    from fastapi.openapi.models import Example
  File &quot;/data/data/com.termux/files/home/Hack/hello/.venv/lib/python3.11/site-packages/fastapi/openapi/models.py&quot;, line 4, in &lt;module&gt;
    from fastapi._compat import (
  File &quot;/data/data/com.termux/files/home/Hack/hello/.venv/lib/python3.11/site-packages/fastapi/_compat.py&quot;, line 20, in &lt;module&gt;
    from fastapi.exceptions import RequestErrorModel
  File &quot;/data/data/com.termux/files/home/Hack/hello/.venv/lib/python3.11/site-packages/fastapi/exceptions.py&quot;, line 3, in &lt;module&gt;
    from pydantic import BaseModel, create_model
  File &quot;/data/data/com.termux/files/home/Hack/hello/.venv/lib/python3.11/site-packages/pydantic/__init__.py&quot;, line 383, in __getattr__
    module = import_module(module_name, package=package)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/data/data/com.termux/files/usr/lib/python3.11/importlib/__init__.py&quot;, line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/data/data/com.termux/files/home/Hack/hello/.venv/lib/python3.11/site-packages/pydantic/main.py&quot;, line 14, in &lt;module&gt;
    from pydantic_core import PydanticUndefined
ImportError: cannot import name 'PydanticUndefined' from 'pydantic_core' (unknown location)
&gt;&gt;&gt;
</code></pre>
<p>That's all for tonight :cat2:</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/indrastorms">@indrastorms</a> on 2024-07-30 07:58</div>
            <div class="timeline-body"><p>Any progress?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Biswa96">@Biswa96</a> on 2024-08-23 14:21</div>
            <div class="timeline-body"><p>I have added uv in termux in Android but it shows an error as following.</p>
<pre><code>$ uv python install 3.11
Searching for Python versions matching: Python 3.11
error: No download found for request: cpython-3.11-linux-x86_64-none

$ type python
python is /data/data/com.termux/files/usr/bin/python
</code></pre>
<p>The issue is in the uv-python crate.</p>
<pre><code>&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.path = [&quot;/data/data/com.termux/files/home/uv-0.3.2/crates/uv-python/&quot;] + sys.path
&gt;&gt;&gt; from python.get_interpreter_info import main
&gt;&gt;&gt; main()
{&quot;result&quot;: &quot;error&quot;, &quot;kind&quot;: &quot;libc_not_found&quot;}
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-29 15:06</div>
            <div class="timeline-body"><p>I'm not sure there is an upstream Python distribution available yet anyway https://github.com/indygreg/python-build-standalone/issues/176</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">releases</span> added by @zanieb on 2024-09-29 15:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mgedmin">@mgedmin</a> on 2024-10-04 12:13</div>
            <div class="timeline-body"><blockquote>
<p>I'm not sure there is an upstream Python distribution available yet anyway</p>
</blockquote>
<p>I'd be happy if uv would support working with the termux Python installed using <code>pkg install python</code>.  (<code>uv</code> itself is also already available in the Termux repositories, the only issue is that it doesn't actually work due to this libc version thing.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-04 13:02</div>
            <div class="timeline-body"><p>The problem with the interpreter query is that we can't find a Libc version, which we require on Linux</p>
<p>https://github.com/astral-sh/uv/blob/c7ff70b2814c84fbec1279bb2674bb0f8990a945/crates/uv-python/python/get_interpreter_info.py#L457-L480</p>
<p>What does <code>_get_glibc_version</code> return?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Biswa96">@Biswa96</a> on 2024-10-04 13:18</div>
            <div class="timeline-body"><blockquote>
<p>What does <code>_get_glibc_version</code> return?</p>
</blockquote>
<p><code>(-1, -1)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-04 13:23</div>
            <div class="timeline-body"><p>Unfortunately that's an upstream Python issue then i.e that's what it returns when it cannot determine a version. We can look into it, but I don't understand the nuances of their implementation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-10-04 13:26</div>
            <div class="timeline-body"><p>Do you know if Python on Android links glibc or bionic?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Biswa96">@Biswa96</a> on 2024-10-04 13:31</div>
            <div class="timeline-body"><blockquote>
<p>Do you know if Python on Android links glibc or bionic?</p>
</blockquote>
<p>It is possible to have both.</p>
<ul>
<li>python linked with bionic libc https://github.com/termux/termux-packages/tree/master/packages/python</li>
<li>python linked with glibc https://github.com/termux/glibc-packages/tree/main/gpkg/python</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">uv python</span> added by @zanieb on 2024-10-04 13:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">uv python</span> removed by @zanieb on 2024-10-04 13:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-04 13:39</div>
            <div class="timeline-body"><p>Let's use #7373 to track this interpreter query problem and this issue for broader support — the other issue has more relevant context for what we're discussing now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2024-11-21 12:50</div>
            <div class="timeline-body"><p>I think this can be closed now that https://github.com/astral-sh/uv/issues/7373 is closed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-21 13:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:24:20 UTC
    </footer>
</body>
</html>
