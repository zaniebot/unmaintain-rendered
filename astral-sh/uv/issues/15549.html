<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv venv ignores UV_VENV_HOME on Windows - astral-sh/uv #15549</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>uv venv ignores UV_VENV_HOME on Windows</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/15549">#15549</a>
        opened by <a href="https://github.com/svenviktorjonsson">@svenviktorjonsson</a>
        on 2025-08-27 12:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/svenviktorjonsson">@svenviktorjonsson</a> on 2025-08-27 12:25</div>
            <div class="timeline-body"><h3>Summary</h3>
<h2>Summary</h2>
<p>The <code>uv venv</code> command on Windows consistently ignores the <code>UV_VENV_HOME</code> environment variable. Instead of creating a virtual environment in the specified directory, it always defaults to creating a <code>.venv</code> folder in the current working directory.</p>
<hr />
<h2>Steps to Reproduce</h2>
<ol>
<li>Set the <code>UV_VENV_HOME</code> environment variable permanently in PowerShell:<pre><code class="language-powershell">[System.Environment]::SetEnvironmentVariable(&quot;UV_VENV_HOME&quot;, &quot;$HOME\.virtualenvs&quot;, &quot;User&quot;)
</code></pre>
</li>
<li>Open a new, clean PowerShell terminal to ensure the variable is loaded.</li>
<li>Confirm the variable is set:<pre><code class="language-powershell">echo $env:UV_VENV_HOME
# Expected output: C:\Users\YourUser\.virtualenvs
</code></pre>
</li>
<li>Navigate to any empty project directory.</li>
<li>Run the environment creation command:<pre><code class="language-powershell">uv venv
</code></pre>
</li>
</ol>
<hr />
<h2>Expected Behavior</h2>
<p><code>uv</code> should create a new virtual environment inside the directory specified by <code>UV_VENV_HOME</code> (e.g., <code>C:\Users\YourUser\.virtualenvs\project-name</code>).</p>
<hr />
<h2>Actual Behavior</h2>
<p><code>uv</code> ignores the <code>UV_VENV_HOME</code> variable and creates a <code>.venv</code> folder in the current working directory.</p>
<h2>Testing run</h2>
<h2>üöÄ STARTING TEST: Checking if uv respects UV_VENV_HOME...</h2>
<ol>
<li>Setting $env:UV_VENV_HOME to 'C:\Users\user.name.virtualenvs\uv-test-location'</li>
<li>Creating a temporary test directory at 'uv-temp-test-project'</li>
<li>Running <code>uv venv</code>...
Using CPython 3.11.9 interpreter at: C:\Python\Python311\python.exe
Creating virtual environment at: .venv
Activate with: .venv\Scripts\activate</li>
<li>Checking for a local '.venv' folder...</li>
</ol>
<hr />
<h2>‚ùå TEST FAILED!
<code>uv</code> created a local '.venv' folder, ignoring the environment variable.</h2>
<p>üßπ Cleaning up...</p>
<ul>
<li>Removing temporary project directory: uv-temp-test-project</li>
<li>Unsetting $env:UV_VENV_HOME</li>
</ul>
<hr />
<h2>‚ú® Test complete.</h2>
<h3>Platform</h3>
<p>Windows 10</p>
<h3>Version</h3>
<p>uv 0.8.13 (ede75fe62 2025-08-21)</p>
<h3>Python version</h3>
<p>Python 3.11.9</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @svenviktorjonsson on 2025-08-27 12:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/svenviktorjonsson">@svenviktorjonsson</a> on 2025-08-27 12:27</div>
            <div class="timeline-body"><p>correction:</p>
<p>C:\Users\user.name.virtualenvs\uv-test-location was missing an \ and should be consistent with earlier example path:
C:\Users\YourUser.virtualenvs\uv-test-location</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-27 14:16</div>
            <div class="timeline-body"><p><code>UV_VENV_HOME</code> is not something we support. Did you get that from an LLM or something..?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @zanieb on 2025-08-27 14:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-08-27 14:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:29 UTC
    </footer>
</body>
</html>
