<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>source .venv/bin/activate failed if the python version is not already installed by pyenv - astral-sh/uv #7949</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>source .venv/bin/activate failed if the python version is not already installed by pyenv</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/7949">#7949</a>
        opened by <a href="https://github.com/songron">@songron</a>
        on 2024-10-06 22:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/songron">@songron</a> on 2024-10-06 22:08</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>I use pyenv to manage python versions on my computer (apple m1).
The problem is that if the specified python version was not already installed by pyenv, <code>source .venv/bin/activate</code> wouldn't activate the virtualenv (and reported no errors).</p>
<p>How to reproduce:
For example, if I have python 3.12.5 but not 3.12.6 available in pyenv. If I do</p>
<pre><code>uv init -p 3.12.6
uv add ipython
source .vene/bin/activate  # does nothing
</code></pre>
<p>It <strong>wouldn't activate the virtual env</strong>. Though it was actually created and python 3.12.6 was added by uv. <code>uv run</code> worked well.</p>
<p>Instead, if I start with <code>uv init -p 3.12.5</code> the issue was gone. The only difference is that <code>3.12.5</code> was already installed previously by pyenv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/songron">@songron</a> on 2024-10-06 22:20</div>
            <div class="timeline-body"><p>It's interesting that if I do install the desired python with python (pyenv install 3.12.6), then it works --- <code>source .venv/bin/activate</code> will activate the virtual env created by uv. Though the venv python activated was actually managed by uv (linked to <code>~/.local/share/uv/python/cpython-3.12.6-macos-aarch64-none/bin/python3.12</code>) and has nothing to do with pyenv.</p>
<p>It's confusing to me why it failed to activate venv at the first place since the later installed python by pyenv was not used in the virtual env in anyway (I suppose).</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:22 UTC
    </footer>
</body>
</html>
