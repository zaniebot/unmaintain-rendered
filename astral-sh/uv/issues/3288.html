<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Defining index-url in pyproject.toml not working - astral-sh/uv #3288</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Defining index-url in pyproject.toml not working</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3288">#3288</a>
        opened by <a href="https://github.com/florianfischer91">@florianfischer91</a>
        on 2024-04-27 09:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/florianfischer91">@florianfischer91</a> on 2024-04-27 09:49</div>
            <div class="timeline-body"><p>First of all thanks for developing uv (and ruff). They are really amazing :-)</p>
<p>I was trying to set the <code>index-url</code> in a <code>pyproject.toml</code>, but im always getting the following error:</p>
<pre><code>error: Failed to parse `pyproject.toml`
  Caused by: TOML parse error at line 2, column 5
  |
2 | Url=&quot;https://randomstring/simple&quot;
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
invalid type: string &quot;https://randomstring/simple&quot;, expected struct VerbatimUrl
</code></pre>
<p>Example to reproduce the bug, call <code>UV_CONFIG_FILE=pyproject.toml uv pip show ruff</code> where <code>pyproject.toml</code> contains</p>
<pre><code>[tool.uv.pip.index-url]
Url=&quot;https://randomstring/simple&quot;
</code></pre>
<p>uv version: 0.1.38</p>
<p>Am I doing something wrong or is this still not ready for use?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-27 11:46</div>
            <div class="timeline-body"><p>I think you would want:</p>
<pre><code class="language-toml">[tool.uv.pip]
index-url = &quot;https://randomstring/simple&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-04-27 11:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/florianfischer91">@florianfischer91</a> on 2024-04-27 12:35</div>
            <div class="timeline-body"><p>I have already tried that but i also results in an error:</p>
<pre><code>error: Failed to parse `pyproject.toml`
  Caused by: TOML parse error at line 2, column 13
  |
2 | index-url = &quot;https://randomstring/simple&quot;
  |             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
unknown variant `https://randomstring/simple`, expected one of `Pypi`, `Url`, `Path`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-27 12:36</div>
            <div class="timeline-body"><p>Oh sorry, thanks, I'll fix that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @charliermarsh on 2024-04-27 12:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-04-27 12:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-27 12:36</div>
            <div class="timeline-body"><p>(This isn't an officially supported feature yet, it's undocumented.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-04-27 12:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3289.html">astral-sh/uv#3289</a> on 2024-04-27 12:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-27 12:43</div>
            <div class="timeline-body"><p>Please continue to file bugs on it though, much appreciated!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-27 12:43</div>
            <div class="timeline-body"><p>Fixed in https://github.com/astral-sh/uv/pull/3289.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-27 12:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:26 UTC
    </footer>
</body>
</html>
