<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature request - pre-build / pre-read hook for security scanning - astral-sh/uv #9346</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Feature request - pre-build / pre-read hook for security scanning</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/9346">#9346</a>
        opened by <a href="https://github.com/f3flight">@f3flight</a>
        on 2024-11-22 02:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/f3flight">@f3flight</a></div>
            <div class="timeline-body"><p>Hi UV devs! Is it possible to make uv call some external tool before it attempts to build a package from source? Essentially, I&#x27;m looking for a way to pass all artifacts that UV fetches from certain external indexes through a security scanner before they are passed to unzip and more importantly, to python for execution (in case of sdists). Is that possible? If not, would it be possible to add such a feature? I was not able to find much on hooks available in uv right now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2024-11-23 02:13</div>
            <div class="timeline-body"><p>Curious, does this currently exists in pip? If so, how does it work?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">security</span> added by <a href="https://github.com/samypr100">@samypr100</a> on 2024-11-23 02:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/samypr100">@samypr100</a> on 2024-11-23 02:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/f3flight">@f3flight</a> on 2024-11-23 02:52</div>
            <div class="timeline-body"><p>@samypr100 no, pip doesn&#x27;t have such a feature. Nearest would be &quot;pip download --only-binary :all:&quot; + scanning the downloaded files. In our org we have made some patches to pip so I know where it handles download and file saving, also since pip is python it was easy for me to patch; But we seek to improve performance, and I&#x27;m looking at uv now. I would, however, like to avoid maintaining a custom uv fork, if possible, right now my rust skills are zero.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">rustlib</span> added by <a href="https://github.com/samypr100">@samypr100</a> on 2024-11-23 02:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2024-11-23 03:07</div>
            <div class="timeline-body"><p>Interesting. Closest might be something like discussed in <a href="https://github.com/astral-sh/uv/issues/3400">astral-sh/uv#3400</a>, althought albeit trickier due to the streaming nature since in your case you&#x27;d want to fully download first, &quot;scan&quot;, and then extract, etc. which is afaik not how uv works under the hood even without the scan step.</p>
<p>From uv&#x27;s perspective it might be better to rely on <a href="https://github.com/astral-sh/uv/issues/3163">astral-sh/uv#3163</a> in the mean time once there&#x27;s a suitable design / implementation (e.g. like <a href="https://github.com/astral-sh/uv/issues/3163">astral-sh/uv#3163</a>#issuecomment-2481505055).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/f3flight">@f3flight</a> on 2024-12-17 20:01</div>
            <div class="timeline-body"><p>Hi @samypr100! #3163 won&#x27;t be good enough, because some packages publish only sdist; we have to use --no-build to ensure security during resolution workflow, and for such packages this flag would cause failure to resolve. Therefore at least for sdists, we need some callback to pass the artifact through security validation before it is used for build.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:35:41 UTC
    </footer>
</body>
</html>
