<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow for definining `[tool.uv.workspace.dependencies]` or use the versions from the project root instead, so there can be workspace managed dependencies. - astral-sh/uv #15808</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Allow for definining `[tool.uv.workspace.dependencies]` or use the versions from the project root instead, so there can be workspace managed dependencies.</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/15808">#15808</a>
        opened by <a href="https://github.com/sylbeth">@sylbeth</a>
        on 2025-09-12 12:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sylbeth">@sylbeth</a> on 2025-09-12 12:36</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>As it stands right now, one cannot use UV to automagically infer the version from the workspace root. In that case, I suggest one of two possible solutions. Either to define them for the project root package in either dependencies or dependency-groups, or to make it in <code>uv.tool.workspace.dependencies</code>. In either case, to use them, one can specify either a dependency or a group dependency in a workspace member and add to <code>[tool.uv.sources]</code> <code>.workspace = true</code> or <code>.workspace-dep = true</code>, any one goes (maybe workspace members are automatically added to workspace dependencies, not to break compatibility).</p>
<h3>Example</h3>
<p>In this example I'll show a workspace made of the root and a package named <code>package</code>. The root package needs numpy and ruff as a dev dependency, whilst <code>package</code> needs numpy, scipy and ruff as a dev dependency. Both definition of dependency methods allow for defining dependencies the root package does not need to use.</p>
<h1>Definition 1</h1>
<pre><code class="language-toml"># ./pyproject.toml
[package]
dependencies = [&quot;numpy&quot;]

[dependency-groups]
dev = [&quot;ruff&quot;]

[tool.uv.sources]
ruff.workspace-dep = true
numpy.workspace-dep = true

[tool.uv.workspace]
members = [&quot;project&quot;]
dependencies = [
    &quot;numpy&gt;=2.3.3&quot;,
    &quot;scipy&gt;=1.16.2&quot;,
    &quot;ruff&gt;=0.12.7&quot;,
]
</code></pre>
<h1>Definition 2</h1>
<pre><code class="language-toml"># ./pyproject.toml
[package]
dependencies = [&quot;numpy&gt;=2.3.3&quot;]

[dependency-groups]
dev = [&quot;ruff&gt;=0.12.7&quot;]
workspace = [&quot;scipy&gt;=1.16.2&quot;]

[tool.uv.workspace]
members = [&quot;project&quot;]
</code></pre>
<h1>Usage</h1>
<pre><code class="language-toml"># ./project/pyproject.toml
[project]
dependencies = [&quot;numpy&quot;, &quot;scipy&quot;]

[dependency-groups]
dev = [&quot;ruff&quot;]

[tool.uv.sources]
scipy.workspace-dep = true
ruff.workspace-dep = true
numpy.workspace-dep = true
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @sylbeth on 2025-09-12 12:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[workspace.dependencies] or something similar" to "Allow for definining `[tool.uv.workspace.dependencies]` or use the versions from the project root instead, so there can be workspace managed dependencies." by @sylbeth on 2025-09-12 12:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sylbeth">@sylbeth</a> on 2025-09-12 12:49</div>
            <div class="timeline-body"><p>I could try and write a PR but I don't have the knowledge of all the working pieces needed for this configuration. I suppose, if the first option was chosen as the best one, I would only have to change the configuration to allow for <code>tool.uv.workspace.dependencies</code>, and change the code for <code>tool.uv.sources</code>, but I don't know the location of neither of those.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-12 13:05</div>
            <div class="timeline-body"><p>This is a duplicate of https://github.com/astral-sh/uv/issues/8949</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sylbeth on 2025-09-12 13:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:29 UTC
    </footer>
</body>
</html>
