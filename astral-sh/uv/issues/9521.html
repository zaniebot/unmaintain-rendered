<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pip install --python-platform regression in 0.5.5 - astral-sh/uv #9521</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>pip install --python-platform regression in 0.5.5</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9521">#9521</a>
        opened by <a href="https://github.com/schlamar">@schlamar</a>
        on 2024-11-29 12:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/schlamar">@schlamar</a></div>
            <div class="timeline-body"><p><strong>Expected behavior</strong></p>
<p>Using <code>uv pip install --python-platform X</code>, uv should prefer a wheel with platform tags (for example *-manylinux_2_17_x86_64.manylinux2014_x86_64.whl).</p>
<p><strong>Actual behavior</strong></p>
<p>Since uv 0.5.5 it seems that uv is prefering a wheel without platform tags (*-none-any).</p>
<p><strong>Steps to reproduce</strong></p>
<pre><code>&gt; uv pip install -v --python-platform linux --target temp --only-binary=:all: --python-version 3.10 --no-deps &quot;sqlalchemy&gt;=2,&lt;3&quot;
DEBUG uv 0.5.4 (c62c83c37 2024-11-20)
...
DEBUG Selecting: sqlalchemy==2.0.36 [compatible] (SQLAlchemy-2.0.36-cp310-cp310-manylinux_2_17_x86_64.manylinux2014_x86_64.whl)
</code></pre>
<pre><code>&gt; uv pip install -v --python-platform linux --target temp --only-binary=:all: --python-version 3.10 --no-deps &quot;sqlalchemy&gt;=2,&lt;3&quot;
DEBUG uv 0.5.5 (95cd8b8b3 2024-11-27)
...
DEBUG Selecting: sqlalchemy==2.0.36 [compatible] (SQLAlchemy-2.0.36-py3-none-any.whl)
</code></pre>
<p>This is only reproducible if you create a new virtual environment and install the specific uv version. If you upgrade or downgrade uv in an existing virtual environment, the issue is not reproducible. I guess there is some caching involved in this case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-29 17:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-29 17:02</div>
            <div class="timeline-body"><p>This does look like a regression, let me take a look...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-29 17:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-29 17:08</div>
            <div class="timeline-body"><p>Ah I see, ok. This probably only applies to <code>--python-platform</code> and not to invocations on <em>actual</em> Linux machines, so that&#x27;s good at least.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-29 17:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:35:51 UTC
    </footer>
</body>
</html>
