<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip compile` selects old version; different behavior between install vs. compile - astral-sh/uv #6209</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv pip compile` selects old version; different behavior between install vs. compile</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6209">#6209</a>
        opened by <a href="https://github.com/sk1p">@sk1p</a>
        on 2024-08-19 15:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sk1p">@sk1p</a> on 2024-08-19 15:18</div>
            <div class="timeline-body"><p>Consider the following scenario:</p>
<pre><code class="language-shell">$ python --version
Python 3.11.9
$ uv --version
uv 0.2.37
$ cat oof.in 
numpy
numba
$ uv pip compile oof.in 
Resolved 4 packages in 29ms
# This file was autogenerated by uv via the following command:
#    uv pip compile oof.in
llvmlite==0.34.0
    # via numba
numba==0.51.2
    # via -r oof.in
numpy==2.1.0
    # via
    #   -r oof.in
    #   numba
setuptools==72.2.0
    # via numba
</code></pre>
<p>For some reason, <code>numba==0.51.2</code> is selected, even though <code>numba==0.60.0</code> exists (probably because <code>numba==0.60.0</code> requires <code>numpy &lt;2.1</code>?). The selected version of <code>llvmlite</code> does not install on modern (<code>&gt;3.8</code>) Python versions.</p>
<p>By constraining <code>numba</code> to a current version, a more recent compatible version is selected:</p>
<pre><code class="language-shell">$ cat oof2.in 
numpy
numba &gt;= 0.60
$ uv pip compile oof2.in 
Resolved 3 packages in 17ms
# This file was autogenerated by uv via the following command:
#    uv pip compile oof2.in
llvmlite==0.43.0
    # via numba
numba==0.60.0
    # via -r oof2.in
numpy==2.0.1
    # via
    #   -r oof2.in
    #   numba
</code></pre>
<p>Installation works:</p>
<pre><code class="language-shell">$ uv pip install numba numpy
Resolved 3 packages in 13ms
Installed 2 packages in 23ms
 + numba==0.60.0
 + numpy==2.0.1
</code></pre>
<p>Note that this is a reduction of a failure of <code>uv pip install</code> in <code>tox-uv</code>, which I could not reproduce as easily - <code>uv pip install numba numpy</code> selects the current <code>numba</code> version. See for example <a href="https://github.com/LiberTEM/LiberTEM-live/actions/runs/10452674970/job/28941720374">this CI log</a> for details. It could also be that this issue is just me holding things wrong, or a bug in <code>numba</code> or <code>numpy</code>?</p>
<details>
<summary>Verbose output: `uv pip compile oof.in -v`</summary>

<pre><code>DEBUG uv 0.2.37
DEBUG Starting Python discovery for any Python
DEBUG Looking for exact match for request any Python
DEBUG Searching for Python interpreter in system path
DEBUG Found `cpython-3.11.9-linux-x86_64-gnu` at `/home/alex/miniconda/envs/uvdebug2/bin/python3` (conda prefix)
DEBUG Using Python 3.11.9 interpreter at /home/alex/miniconda/envs/uvdebug2/bin/python3 for builds
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.11.9
DEBUG Adding direct dependency: numpy*
DEBUG Adding direct dependency: numba*
DEBUG Found fresh response for: https://pypi.org/simple/numba/
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/57/03/2b4245b05b71c0cee667e6a0b51606dfa7f4157c9093d71c6b208385a611/numba-0.60.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata
DEBUG Found fresh response for: https://pypi.org/simple/numpy/
DEBUG Searching for a compatible version of numpy (*)
DEBUG Selecting: numpy==2.1.0 [compatible] (numpy-2.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/7b/93/831b4c5b4355210827b3de34f539297e1833c39a68c26a8b454d8cf9f5ed/numpy-2.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata
DEBUG Searching for a compatible version of numba (*)
DEBUG Selecting: numba==0.60.0 [compatible] (numba-0.60.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl)
DEBUG Adding transitive dependency for numba==0.60.0: llvmlite&gt;=0.43.0.dev0, &lt;0.44
DEBUG Adding transitive dependency for numba==0.60.0: numpy&gt;=1.22, &lt;2.1
DEBUG Searching for a compatible version of numba (&lt;0.60.0 | &gt;0.60.0)
DEBUG Selecting: numba==0.59.1 [compatible] (numba-0.59.1-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl)
DEBUG Found fresh response for: https://pypi.org/simple/llvmlite/
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/54/f2/7d1579037643c874fa73516ea84c07e8d30ea347fb1a88c03b198447655d/numba-0.59.1-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata
DEBUG Adding transitive dependency for numba==0.59.1: llvmlite&gt;=0.42.0.dev0, &lt;0.43
DEBUG Adding transitive dependency for numba==0.59.1: numpy&gt;=1.22, &lt;1.27
DEBUG Searching for a compatible version of numba (&lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Selecting: numba==0.59.0 [compatible] (numba-0.59.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/fc/92/e859a79e7acd8768773df415e6c91844012145933bd09b57f1c569479e13/numba-0.59.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata
DEBUG Adding transitive dependency for numba==0.59.0: llvmlite&gt;=0.42.0.dev0, &lt;0.43
DEBUG Adding transitive dependency for numba==0.59.0: numpy&gt;=1.22, &lt;1.27
DEBUG Searching for a compatible version of numba (&lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Selecting: numba==0.58.1 [compatible] (numba-0.58.1-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/65/85/72649823bcbfd01820e1c60fa54eb77adb2dba8be921fe6fabdbeb011a88/numba-0.58.1-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata
DEBUG Adding transitive dependency for numba==0.58.1: llvmlite&gt;=0.41.0.dev0, &lt;0.42
DEBUG Adding transitive dependency for numba==0.58.1: numpy&gt;=1.22, &lt;1.27
DEBUG Searching for a compatible version of numba (&lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Selecting: numba==0.58.0 [compatible] (numba-0.58.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/f7/b6/8800604a3380aa94af830c30839db93077c7fe2812a48ce7d4400d75ba9c/numba-0.58.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/91/a1/cafa9c5490a00fc59d163e3bf3fd48cfbf9845ff134970c4174d4522aa8d/numba-0.57.1-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/7b/3e/8f185c4c3520a351c6d400c9342a3189aaf87c02a878e81f117f24a4a64e/numba-0.57.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl.metadata
DEBUG Prefetching 5 numba versions
DEBUG Adding transitive dependency for numba==0.58.0: llvmlite&gt;=0.41.0.dev0, &lt;0.42
DEBUG Adding transitive dependency for numba==0.58.0: numpy&gt;=1.21, &lt;1.26
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/1a/66/de416cd8364c7e5cba8da9272809676e907e7045cdcb750f6ff5fff70c29/numba-0.56.4-cp310-cp310-macosx_10_14_x86_64.whl.metadata
DEBUG Searching for a compatible version of numba (&lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Selecting: numba==0.57.1 [compatible] (numba-0.57.1-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/b8/1b/2b2bba63f18b89da7d2a4e884e0800342484aa11dff59598f82c5b278b66/numba-0.56.3-cp310-cp310-macosx_10_14_x86_64.whl.metadata
DEBUG Adding transitive dependency for numba==0.57.1: llvmlite&gt;=0.40.0.dev0, &lt;0.41
DEBUG Adding transitive dependency for numba==0.57.1: numpy&gt;=1.21, &lt;1.25
DEBUG Searching for a compatible version of numba (&lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Selecting: numba==0.57.0 [compatible] (numba-0.57.0-cp311-cp311-manylinux2014_x86_64.manylinux_2_17_x86_64.whl)
DEBUG Adding transitive dependency for numba==0.57.0: llvmlite&gt;=0.40.0.dev0, &lt;0.41
DEBUG Adding transitive dependency for numba==0.57.0: numpy&gt;=1.21, &lt;1.25
DEBUG Searching for a compatible version of numba (&lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Selecting: numba==0.56.4 [compatible] (numba-0.56.4.tar.gz)
DEBUG Adding transitive dependency for numba==0.56.4: llvmlite&gt;=0.39.0.dev0, &lt;0.40
DEBUG Adding transitive dependency for numba==0.56.4: numpy&gt;=1.18, &lt;1.24
DEBUG Adding transitive dependency for numba==0.56.4: setuptools*
DEBUG Searching for a compatible version of numba (&lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Selecting: numba==0.56.3 [compatible] (numba-0.56.3.tar.gz)
DEBUG Adding transitive dependency for numba==0.56.3: llvmlite&gt;=0.39.0.dev0, &lt;0.40
DEBUG Adding transitive dependency for numba==0.56.3: numpy&gt;=1.18, &lt;1.24
DEBUG Adding transitive dependency for numba==0.56.3: setuptools*
DEBUG Searching for a compatible version of numba (&lt;0.56.3 | &gt;0.56.3, &lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Selecting: numba==0.56.2 [compatible] (numba-0.56.2.tar.gz)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/03/92/ecf69b298baf7af49243f2e30e75c401929430511c1909928e7daa4daf4d/numba-0.56.2-cp310-cp310-macosx_10_14_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/b8/79/e867e49151ae6adbd23f5566a722feb0b7cc65b60b1556b63ad55be37857/numba-0.56.0-cp310-cp310-macosx_10_14_x86_64.whl.metadata
DEBUG Prefetching 2 numba versions
DEBUG Found fresh response for: https://pypi.org/simple/setuptools/
DEBUG Adding transitive dependency for numba==0.56.2: llvmlite&gt;=0.39.0.dev0, &lt;0.40
DEBUG Adding transitive dependency for numba==0.56.2: numpy&gt;=1.18, &lt;1.24
DEBUG Adding transitive dependency for numba==0.56.2: setuptools&lt;60
DEBUG Searching for a compatible version of numba (&lt;0.56.2 | &gt;0.56.2, &lt;0.56.3 | &gt;0.56.3, &lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Selecting: numba==0.56.0 [compatible] (numba-0.56.0.tar.gz)
DEBUG Adding transitive dependency for numba==0.56.0: llvmlite&gt;=0.39.0.dev0, &lt;0.40
DEBUG Adding transitive dependency for numba==0.56.0: numpy&gt;=1.18, &lt;1.23
DEBUG Adding transitive dependency for numba==0.56.0: setuptools*
DEBUG Searching for a compatible version of numba (&lt;0.56.0 | &gt;0.56.0, &lt;0.56.2 | &gt;0.56.2, &lt;0.56.3 | &gt;0.56.3, &lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG No compatible version found for: Python
DEBUG Searching for a compatible version of numpy (*)
DEBUG Selecting: numpy==2.1.0 [compatible] (numpy-2.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl)
DEBUG Searching for a compatible version of numba (&lt;0.55.2 | &gt;0.55.2, &lt;0.56.0 | &gt;0.56.0, &lt;0.56.2 | &gt;0.56.2, &lt;0.56.3 | &gt;0.56.3, &lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Searching for a compatible version of numpy (*)
DEBUG Selecting: numpy==2.1.0 [compatible] (numpy-2.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl)
DEBUG Searching for a compatible version of numba (&lt;0.55.1 | &gt;0.55.1, &lt;0.55.2 | &gt;0.55.2, &lt;0.56.0 | &gt;0.56.0, &lt;0.56.2 | &gt;0.56.2, &lt;0.56.3 | &gt;0.56.3, &lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Searching for a compatible version of numpy (*)
DEBUG Selecting: numpy==2.1.0 [compatible] (numpy-2.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl)
DEBUG Searching for a compatible version of numba (&lt;0.55.0 | &gt;0.55.0, &lt;0.55.1 | &gt;0.55.1, &lt;0.55.2 | &gt;0.55.2, &lt;0.56.0 | &gt;0.56.0, &lt;0.56.2 | &gt;0.56.2, &lt;0.56.3 | &gt;0.56.3, &lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Searching for a compatible version of numpy (*)
DEBUG Selecting: numpy==2.1.0 [compatible] (numpy-2.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl)
DEBUG Prefetching 5 numpy versions
DEBUG Searching for a compatible version of numba (&lt;0.54.1 | &gt;0.54.1, &lt;0.55.0 | &gt;0.55.0, &lt;0.55.1 | &gt;0.55.1, &lt;0.55.2 | &gt;0.55.2, &lt;0.56.0 | &gt;0.56.0, &lt;0.56.2 | &gt;0.56.2, &lt;0.56.3 | &gt;0.56.3, &lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Searching for a compatible version of numpy (*)
DEBUG Selecting: numpy==2.1.0 [compatible] (numpy-2.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/ef/27/39622993e8688a1f05898a3c3b2836b856f79c06637ebd4b71cb35cc9b18/numpy-2.0.1-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/d1/27/2a7bd6855dc717aeec5f553073a3c426b9c816126555f8e616392eab856b/numpy-2.0.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata
DEBUG Searching for a compatible version of numba (&lt;0.54.0 | &gt;0.54.0, &lt;0.54.1 | &gt;0.54.1, &lt;0.55.0 | &gt;0.55.0, &lt;0.55.1 | &gt;0.55.1, &lt;0.55.2 | &gt;0.55.2, &lt;0.56.0 | &gt;0.56.0, &lt;0.56.2 | &gt;0.56.2, &lt;0.56.3 | &gt;0.56.3, &lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG No compatible version found for: Python
DEBUG Searching for a compatible version of numpy (*)
DEBUG Selecting: numpy==2.1.0 [compatible] (numpy-2.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl)
DEBUG Searching for a compatible version of numba (&lt;0.53.1 | &gt;0.53.1, &lt;0.54.0 | &gt;0.54.0, &lt;0.54.1 | &gt;0.54.1, &lt;0.55.0 | &gt;0.55.0, &lt;0.55.1 | &gt;0.55.1, &lt;0.55.2 | &gt;0.55.2, &lt;0.56.0 | &gt;0.56.0, &lt;0.56.2 | &gt;0.56.2, &lt;0.56.3 | &gt;0.56.3, &lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/3a/d0/edc009c27b406c4f9cbc79274d6e46d634d139075492ad055e3d68445925/numpy-1.26.4-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata
DEBUG Searching for a compatible version of numpy (*)
DEBUG Selecting: numpy==2.1.0 [compatible] (numpy-2.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/5a/62/007b63f916aca1d27f5fede933fda3315d931ff9b2c28b9c2cf388cd8edb/numpy-1.26.3-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata
DEBUG Searching for a compatible version of numba (&lt;0.53.0 | &gt;0.53.0, &lt;0.53.1 | &gt;0.53.1, &lt;0.54.0 | &gt;0.54.0, &lt;0.54.1 | &gt;0.54.1, &lt;0.55.0 | &gt;0.55.0, &lt;0.55.1 | &gt;0.55.1, &lt;0.55.2 | &gt;0.55.2, &lt;0.56.0 | &gt;0.56.0, &lt;0.56.2 | &gt;0.56.2, &lt;0.56.3 | &gt;0.56.3, &lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Searching for a compatible version of numpy (*)
DEBUG Selecting: numpy==2.1.0 [compatible] (numpy-2.1.0-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl)
DEBUG Searching for a compatible version of numba (&lt;0.52.0 | &gt;0.52.0, &lt;0.53.0 | &gt;0.53.0, &lt;0.53.1 | &gt;0.53.1, &lt;0.54.0 | &gt;0.54.0, &lt;0.54.1 | &gt;0.54.1, &lt;0.55.0 | &gt;0.55.0, &lt;0.55.1 | &gt;0.55.1, &lt;0.55.2 | &gt;0.55.2, &lt;0.56.0 | &gt;0.56.0, &lt;0.56.2 | &gt;0.56.2, &lt;0.56.3 | &gt;0.56.3, &lt;0.56.4 | &gt;0.56.4, &lt;0.57.0 | &gt;0.57.0, &lt;0.57.1 | &gt;0.57.1, &lt;0.58.0 | &gt;0.58.0, &lt;0.58.1 | &gt;0.58.1, &lt;0.59.0 | &gt;0.59.0, &lt;0.59.1 | &gt;0.59.1, &lt;0.60.0 | &gt;0.60.0)
DEBUG Selecting: numba==0.51.2 [compatible] (numba-0.51.2.tar.gz)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/c2/19/1722feae3fd48fa4d89f10ba364e9f6e06a405b9862a4beb4d211dc79e0d/numba-0.51.2-cp36-cp36m-macosx_10_14_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/fa/61/c3a10f4d66d12f9b8afa2513e0e3640080b4b597ff1dc601d810d611b6ee/numba-0.51.1-cp36-cp36m-macosx_10_14_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/97/c2/c0d0ae4fc3a157aad51027b0699e4ff7f29e782730dc2ec0af8fad63c9e4/numba-0.51.0-cp36-cp36m-macosx_10_14_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/bb/c5/f736704ed0129b4351a725a7f9fe926d028adfb684ecf74bf6e6262cc341/numba-0.50.1-cp36-cp36m-macosx_10_14_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/29/73/4d04b2657dbb32526c5516ef153a7ff83608f94645e1426a78b55669f404/numba-0.50.0-cp36-cp36m-macosx_10_14_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/ac/7d/e01bcbf4a35cbb07ce04aaa545030bde231331aaabe7c44726b099f8fd86/numba-0.49.1-cp36-cp36m-macosx_10_14_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/5f/8e/cb7bb3e872aa4c6a6603c15b37964521d16a46dcb2e40171d6bdaafff62a/numba-0.49.0-cp36-cp36m-macosx_10_14_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/25/59/6a67846fdec2688a4b8f1a3a55ab77e47c109615200f1b58e4cd6001f48e/numba-0.48.0-1-cp36-cp36m-manylinux1_i686.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/84/36/f3b918f9db04919bcc5c3ce5bb3613920f5341cd8309c826bec787213347/numba-0.47.0-cp27-cp27m-macosx_10_9_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/cd/0f/2f22d8ee83c7d7d3b6d773f8fe6eb09d37e25a8551ce01caeebeb38acce5/numba-0.46.0-cp27-cp27m-macosx_10_9_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/3c/8c/1a7f86bfc6f06a633f4047a1795791900ae48442194f38ee63aad2196179/numba-0.45.1-cp27-cp27m-macosx_10_9_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/cb/97/6a9a67892301a25d62563abd8b648547eb008c0429fab1e9f22d690168cd/numba-0.45.0-cp27-cp27m-macosx_10_9_x86_64.whl.metadata
DEBUG Prefetching 20 numba versions
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/d0/8f/e91c4e961defbbc7fb00c8b4549f38bcefea385fbccef67ef28574e46384/numba-0.44.1-cp27-cp27m-macosx_10_9_x86_64.whl.metadata
DEBUG Adding transitive dependency for numba==0.51.2: llvmlite&gt;=0.34.0.dev0, &lt;0.35
DEBUG Adding transitive dependency for numba==0.51.2: numpy&gt;=1.15
DEBUG Adding transitive dependency for numba==0.51.2: setuptools*
DEBUG Searching for a compatible version of llvmlite (&gt;=0.34.0.dev0, &lt;0.35)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/d1/73/9c93d7c8ef6832ea240a24a781c98f05ed0b2550bd818e4c6a35eb3bc999/numba-0.44.0-cp27-cp27m-macosx_10_9_x86_64.whl.metadata
DEBUG Selecting: llvmlite==0.34.0 [compatible] (llvmlite-0.34.0.tar.gz)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/58/a7/6d345a3c4b11536db7c01e8af84383c96d80805ed55d2d795fa8465130d5/numba-0.43.1-1-cp27-cp27m-macosx_10_9_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/c6/90/f9dcb254c193c10b5c7e2de77a0f278d9e526f1c446f2d3aea231a3a5bec/numba-0.43.0-cp27-cp27m-macosx_10_9_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/5c/6e/6ae3753b971d55c6211646be12ea9b9bfeee4c0b62beb5f398c4a69996c0/numba-0.42.1-cp27-cp27m-macosx_10_9_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/a9/f4/c32ab347918e6064b34c66287f625fa3bb041052182079582b3c9548780d/numba-0.42.0-cp27-cp27m-macosx_10_9_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/67/70/f90b24b2de827ce15ead79d36287b63a7b10bba8c4a39f3c2bb884dc9590/numba-0.41.0-cp27-cp27m-macosx_10_9_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/62/16/c0e5f8207c6cf32d1527f202a4838a3820d4cb1c51d525709a4e7b66fe35/numba-0.40.1-cp27-cp27m-macosx_10_6_x86_64.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/6e/ec/06715d912351edc453e37f93f3fc80dcffd5ca0e70386c87529aca296f05/setuptools-72.2.0-py3-none-any.whl.metadata
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/22/e0/6a2af71fcbc4e269964c7b1ed92a8c80e71367dc0f4e12dd35139c0c6925/llvmlite-0.34.0-cp36-cp36m-macosx_10_9_x86_64.whl.metadata
DEBUG Searching for a compatible version of setuptools (*)
DEBUG Selecting: setuptools==72.2.0 [compatible] (setuptools-72.2.0-py3-none-any.whl)
DEBUG Tried 31 versions: numba 20, numpy 9, llvmlite 1, setuptools 1
DEBUG Split specific environment resolution took 0.031s
Resolved 4 packages in 33ms
# This file was autogenerated by uv via the following command:
#    uv pip compile oof.in
llvmlite==0.34.0
    # via numba
numba==0.51.2
    # via -r oof.in
numpy==2.1.0
    # via
    #   -r oof.in
    #   numba
setuptools==72.2.0
    # via numba
</code></pre>
</details>

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sk1p">@sk1p</a> on 2024-08-19 15:22</div>
            <div class="timeline-body"><p>Oh, I just noticed that I can make <code>uv pip install</code> fail by specifying the packages in inverted order:</p>
<pre><code class="language-shell">$ uv pip install numpy numba 
Resolved 4 packages in 18ms
Building llvmlite==0.34.0
Building numba==0.51.2
⠹ Preparing packages...
[...]
</code></pre>
<p>Also, this means re-ordering the <code>.in</code> file to mention <code>numba</code> first changes the <code>uv pip compile</code> behavior:</p>
<pre><code class="language-shell">$ cat oof3.in 
numba
numpy
$ uv pip compile oof3.in 
Resolved 3 packages in 12ms
# This file was autogenerated by uv via the following command:
#    uv pip compile oof3.in
llvmlite==0.43.0
    # via numba
numba==0.60.0
    # via -r oof3.in
numpy==2.0.1
    # via
    #   -r oof3.in
    #   numba
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sk1p">@sk1p</a> on 2024-08-19 15:30</div>
            <div class="timeline-body"><p>As a point of comparison, plain <code>pip</code> always installs llvmlite-0.43.0 numba-0.60.0 numpy-2.0.1, and behavior does not depend on command line ordering. I did not check <code>pip-compile</code> yet.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-19 15:32</div>
            <div class="timeline-body"><p>See also https://github.com/astral-sh/uv/issues/5474#issuecomment-2252856834</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-19 16:01</div>
            <div class="timeline-body"><p>I think your question regarding the effect of ordering is answered there.</p>
<p>I'm not sure about why <code>uv pip compile</code> would resolve to different versions than <code>uv pip install</code> — your virtual environment is definitely using the same Python version?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sk1p">@sk1p</a> on 2024-08-19 16:04</div>
            <div class="timeline-body"><blockquote>
<p>I'm not sure about why <code>uv pip compile</code> would resolve to different versions than <code>uv pip install</code> — your virtual environment is definitely using the same Python version?</p>
</blockquote>
<p>Yeah, same venv, same Python version etc.</p>
<p>I think that was because the order in the <code>.in</code> file was different from the order on the command line (which was surprising for me btw.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-19 16:07</div>
            <div class="timeline-body"><p>Yeah I can see how the resolution being order-dependent can be confusing — but it also gives users more control over resolution and we do <em>need</em> to solve with some ordering. We can document that more clearly though?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @zanieb on 2024-08-19 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-08-19 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sk1p">@sk1p</a> on 2024-08-19 16:10</div>
            <div class="timeline-body"><blockquote>
<p>Yeah I can see how the resolution being order-dependent can be confusing — but it also gives users more control over resolution and we do need to solve with some ordering.</p>
</blockquote>
<p>True.</p>
<blockquote>
<p>We can document that more clearly though?</p>
</blockquote>
<p>Thanks, that would be helpful. Probably at least in https://github.com/astral-sh/uv/blob/main/PIP_COMPATIBILITY.md ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-19 16:13</div>
            <div class="timeline-body"><p>Yeah — I'll do that. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-08-19 16:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-08-19 16:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-08-19 16:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2024-08-20 14:04</div>
            <div class="timeline-body"><p>This isn't correct... The order of requirements does affect the priority for pip, it's just pip has more heuristics on resolving than uv, so there are some cases like this one where the heuristics pip has means the output doesn't change on input orders.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/esc">@esc</a> on 2024-08-26 14:49</div>
            <div class="timeline-body"><p>re, this was discussed here too: https://github.com/numba/numba/issues/9708#issuecomment-2296824946</p>
<p>Also, @notatallshaw there seems to be some disagreement about <code>pip</code>s behaviour here. Do you have any referenced to support your claim?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2024-08-26 15:40</div>
            <div class="timeline-body"><p>You can look at the bottom of this page for a (only slightly outdated) look at pip's resolution priority order: https://pip.pypa.io/en/stable/topics/more-dependency-resolution/#the-resolver-algorithm</p>
<p>Although, I should update those docs, they are mostly correct, but I plan to land some big changes to pip over the next couple of release, I will remember to update them as I do.</p>
<p>Also I'm writing a PR to improve uv's pip compatibility docs on this https://github.com/astral-sh/uv/pull/6619, I'm going to significantly reword it though based on Charlie's feedback once I get a chance to look.</p>
<p>I'll take a look at your issue this evening and see if I can help provide any clarity.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2024-08-27 00:12</div>
            <div class="timeline-body"><p>@esc I've taken a look at the issue, and I beleive that pip is doing the right thing there because it is prioritizing depth.</p>
<p>uv has an open issue for adding this https://github.com/astral-sh/uv/issues/3149</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 04:47:34 UTC
    </footer>
</body>
</html>
