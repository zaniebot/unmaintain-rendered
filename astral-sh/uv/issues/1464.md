```yaml
number: 1464
title: fails to parse version specifiers with trailing comma
type: issue
state: closed
author: davidszotten
labels:
  - bug
assignees: []
created_at: 2024-02-16T09:49:25Z
updated_at: 2024-02-17T01:47:26Z
url: https://github.com/astral-sh/uv/issues/1464
synced_at: 2026-01-10T01:57:02Z
```

# fails to parse version specifiers with trailing comma

---

_Issue opened by @davidszotten on 2024-02-16 09:49_

when installing from our devpi mirror, e.g. celery-5.2.2 fails to install. it looks like it's due to a trailing comma in the `requires-python` value. from reading the pep it's slightly unclear to me whether a trailing comma is allowed but `uv` is the first tool that's complained

i added a `dbg!()` because the error message didn't include the offending value (would be a nice addition i think)

```
   0.330188s  40ms  WARN uv_client::registry_client Skipping file for celery: Invalid 'requires-python' value
[crates/uv-client/src/registry_client.rs:632] err = VersionSpecifiersParseError(
    VersionSpecifiersParseError {
        inner: VersionSpecifiersParseErrorInner {
            err: VersionSpecifierParseError {
                kind: MissingOperator,
            },
            line: ">=3.7,",
            start: 6,
            end: 6,
        },
    },
)
```

---

_Comment by @zanieb on 2024-02-16 14:45_

Hey @davidszotten, which version are you using? I think we may have fixed this already.

xref https://github.com/astral-sh/uv/issues/1361

---

_Label `bug` added by @zanieb on 2024-02-16 14:45_

---

_Comment by @davidszotten on 2024-02-16 16:10_

e6c4c77ba10bd54dbf06 (which includes that fix) still has the issue. will make a pr with a failing test (and a suggested fix)

---

_Referenced in [astral-sh/uv#1507](../../astral-sh/uv/pulls/1507.md) on 2024-02-16 16:10_

---

_Comment by @charliermarsh on 2024-02-17 01:47_

Hopefully fixed by #1507?

---

_Closed by @charliermarsh on 2024-02-17 01:47_

---
