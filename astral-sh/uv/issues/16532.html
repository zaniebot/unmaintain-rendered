<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How can you install xformers with uv ? - astral-sh/uv #16532</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How can you install xformers with uv ?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16532">#16532</a>
        opened by <a href="https://github.com/muhammad-fiaz">@muhammad-fiaz</a>
        on 2025-10-31 07:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/muhammad-fiaz">@muhammad-fiaz</a> on 2025-10-31 07:18</div>
            <div class="timeline-body"><h3>Question</h3>
<p>i have been getting error</p>
<pre><code class="language-bash">PS C:\Users\user\Downloads&gt; uv add xformers --default-index https://download.pytorch.org/whl/cu129
  × No solution found when resolving dependencies for split (markers: (python_full_version &gt;=
  │ '3.15' and platform_machine == 'aarch64' and platform_python_implementation == 'CPython' and       
  │ sys_platform == 'linux') or (python_full_version &gt;= '3.14' and platform_machine != 'aarch64' and   
  │ sys_platform == 'linux') or (python_full_version &gt;= '3.14' and platform_python_implementation      
  │ != 'CPython' and sys_platform == 'linux') or (python_full_version &gt;= '3.14' and sys_platform       
  │ == 'win32')):
  ╰─▶ Because gradio was not found in the package registry and your project depends on gradio&gt;=5.12,   
      we can conclude that your project's requirements are unsatisfiable.
      And because your project requires charisma[dev], we can conclude that your project's
      requirements are unsatisfiable.

      hint: While the active Python version is 3.12, the resolution failed for other Python versions   
      supported by your project. Consider limiting your project's supported Python versions using      
      `requires-python`.
  help: If you want to add the package regardless of the failed resolution, provide the `--frozen`     
        flag to skip locking and syncing.

PS C:\Users\user\Downloads&gt; uv sync                                                
Resolved 178 packages in 4.02s                                                                         
error: Distribution `xformers==0.0.33+5d4b92a5.d20251029 @ registry+https://download.pytorch.org/whl/cu128` can't be installed because it doesn't have a source distribution or wheel for the current platform

hint: You're on Windows (`win_amd64`), but `xformers` (v0.0.33+5d4b92a5.d20251029) only has wheels for the following platform: `linux_x86_64`; consider adding &quot;sys_platform == 'win32' and platform_machine == 'AMD64'&quot; to `tool.uv.required-environments` to ensure uv resolves to a version with compatible wheels
 PS C:\Users\user\Downloads&gt; error: Distribution `xformers==0.0.33+5d4b92a5.d20251029 @ registry+https://download.pytorch.org/whl/cu128` can't be installed because it doesn't have a source distribution or wheel for the current platform

hint: You're on Windows (`win_amd64`), but `xformers` (v0.0.33+5d4b92a5.d20251029) only has wheels for the following platform: `linux_x86_64`; consider adding &quot;sys_platform == 'win32' and platform_machine == 'AMD64'&quot; to `tool.uv.required-environments` to ensure uv resolves to a version with compatible wheels

</code></pre>
<p>i tried to installed with <code>uv</code></p>
<pre><code class="language-toml">dependencies = [
  &quot;torch&gt;=2.5.0&quot;,
  &quot;torchvision&gt;=0.20.0&quot;,
  &quot;logly&gt;=0.1.6&quot;,
  &quot;requests&gt;=2.32&quot;,
  &quot;regex&gt;=2024.11&quot;,
  &quot;safetensors&gt;=0.5&quot;,
  &quot;gradio&gt;=5.12&quot;,
  &quot;gradio-client&gt;=1.5.4&quot;,
  &quot;typer&gt;=0.9.0&quot;,
  &quot;toml&gt;=0.10.2&quot;,
  &quot;notion-client&gt;=2.2.1&quot;,
  &quot;rich&gt;=14.2.0&quot;,
  &quot;unsloth&quot;,
  &quot;xformers&gt;=0.0.20&quot;,
]
[tool.uv.sources]
unsloth = { git = &quot;https://github.com/unslothai/unsloth.git&quot; }
xformers = [
  { index = &quot;pytorch-cu128&quot;, marker = &quot;sys_platform == 'linux' or sys_platform == 'win32'&quot; },
]

[[tool.uv.index]]
name = &quot;pytorch-cu128&quot;
url = &quot;https://download.pytorch.org/whl/cu128&quot;
explicit = true

</code></pre>
<p>still does not work  and is there any good example use cases for this to install without using <code>optional-dependencies</code> , this issue is related to <code>Feature Request</code> #16522  and when i tried this with <code>pip</code> it works fine</p>
<p>below is <code>pip</code> installation in my <code>.venv</code></p>
<pre><code class="language-bash"> PS C:\Users\user\Downloads&gt; pip3 install -U xformers --index-url https://download.pytorch.org/whl/cu129
Defaulting to user installation because normal site-packages is not writeable
Looking in indexes: https://download.pytorch.org/whl/cu129, https://pypi.ngc.nvidia.com
Collecting xformers
  Downloading https://download.pytorch.org/whl/cu129/xformers-0.0.32.post2-cp39-abi3-win_amd64.whl.metadata (1.1 kB)
Requirement already satisfied: numpy in c:\users\user\appdata\roaming\python\python312\site-packages (from xformers) (1.26.4)
Requirement already satisfied: torch==2.8.0 in c:\users\user\appdata\roaming\python\python312\site-packages (from xformers) (2.8.0+cu129)
Requirement already satisfied: filelock in c:\users\user\appdata\roaming\python\python312\site-packages (from torch==2.8.0-&gt;xformers) (3.19.1)
Requirement already satisfied: typing-extensions&gt;=4.10.0 in c:\users\user\appdata\roaming\python\python312\site-packages (from torch==2.8.0-&gt;xformers) (4.15.0)
Requirement already satisfied: sympy&gt;=1.13.3 in c:\users\user\appdata\roaming\python\python312\site-packages (from torch==2.8.0-&gt;xformers) (1.14.0)
Requirement already satisfied: networkx in c:\users\user\appdata\roaming\python\python312\site-packages (from torch==2.8.0-&gt;xformers) (3.5)
Requirement already satisfied: jinja2 in c:\users\user\appdata\roaming\python\python312\site-packages (from torch==2.8.0-&gt;xformers) (3.1.6)
Requirement already satisfied: fsspec in c:\users\user\appdata\roaming\python\python312\site-packages (from torch==2.8.0-&gt;xformers) (2025.3.0)
Requirement already satisfied: setuptools in c:\users\user\appdata\roaming\python\python312\site-packages (from torch==2.8.0-&gt;xformers) (80.9.0)
Requirement already satisfied: mpmath&lt;1.4,&gt;=1.1.0 in c:\users\user\appdata\roaming\python\python312\site-packages (from sympy&gt;=1.13.3-&gt;torch==2.8.0-&gt;xformers) (1.3.0)
Requirement already satisfied: MarkupSafe&gt;=2.0 in c:\users\user\appdata\roaming\python\python312\site-packages (from jinja2-&gt;torch==2.8.0-&gt;xformers) (3.0.3)
Downloading https://download.pytorch.org/whl/cu129/xformers-0.0.32.post2-cp39-abi3-win_amd64.whl (106.0 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 106.0/106.0 MB 3.5 MB/s  0:00:30
Installing collected packages: xformers
Successfully installed xformers-0.0.32.post2
</code></pre>
<h3>Platform</h3>
<p>Windows 11</p>
<h3>Version</h3>
<p>v0.9.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @muhammad-fiaz on 2025-10-31 07:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/muhammad-fiaz">@muhammad-fiaz</a> on 2025-10-31 09:51</div>
            <div class="timeline-body"><p>finally, I was able to resolve the issue by configuring <strong>uv</strong> to pull <code>torch</code> and <code>xformers</code> from the <strong>correct CUDA-specific PyTorch index</strong>, and by adding <code>extra-build-dependencies</code> by <code>uv</code> so that <code>xformers</code> can compile properly on Windows.</p>
<h4><strong>Working <code>pyproject.toml</code> setup:</strong></h4>
<pre><code class="language-toml">[project]
dependencies = [
  &quot;torch&gt;=2.5.0&quot;,
  &quot;torchvision&gt;=0.20.0&quot;,
  &quot;torchaudio&gt;=2.5.0&quot;,
  &quot;xformers&gt;=0.0.20&quot;,
  # ...other dependencies
]

[tool.uv.extra-build-dependencies]
xformers = [&quot;torch&quot;, &quot;ninja&quot;]

[[tool.uv.index]]
name = &quot;pytorch-cu129&quot;
url = &quot;https://download.pytorch.org/whl/cu129&quot;
explicit = true

[tool.uv.sources]
torch = { index = &quot;pytorch-cu129&quot; }
torchvision = { index = &quot;pytorch-cu129&quot; }
torchaudio = { index = &quot;pytorch-cu129&quot; }
xformers = { index = &quot;pytorch-cu129&quot; }
</code></pre>
<p>if you want full working configuration you can look at my <a href="https://github.com/muhammad-fiaz/Charisma/blob/main/pyproject.toml">pyproject.toml</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @muhammad-fiaz on 2025-10-31 09:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:17:53 UTC
    </footer>
</body>
</html>
