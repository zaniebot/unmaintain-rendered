```yaml
number: 13694
title: "`uv run` installing project by default"
type: issue
state: closed
author: Danipulok
labels:
  - question
assignees: []
created_at: 2025-05-28T07:24:28Z
updated_at: 2025-05-28T10:35:35Z
url: https://github.com/astral-sh/uv/issues/13694
synced_at: 2026-01-10T01:57:31Z
```

# `uv run` installing project by default

---

_Issue opened by @Danipulok on 2025-05-28 07:24_

### Question

Hi all!

I had problems with installing `git` dependencies inside `docker`, which lead me to 
```
RUN uv sync --no-dev
```

But I still had problem that on container start I had error about installing `git` dependencies (why?)
Then I realized `uv run` for some reason installs project, if it's not already installed

For example, my `Dockerfile` was looking like this:
```
FROM ghcr.io/astral-sh/uv:python3.12-bookworm-slim
WORKDIR /app

COPY pyproject.toml uv.lock ./
RUN uv sync --compile-bytecode --frozen

COPY alembic.ini .
COPY migrations migrations
COPY src src
COPY .*.env* ./

ENV APP_ENV=production
CMD ["sh", "-c", "uv run alembic upgrade head && uv run python -m src.my_service"]
```

But with not installing dev dependencies, I have to do it like this:
```
FROM ghcr.io/astral-sh/uv:python3.12-bookworm-slim
WORKDIR /app

COPY pyproject.toml uv.lock ./
RUN uv sync --compile-bytecode --frozen --no-dev

COPY alembic.ini .
COPY migrations migrations
COPY src src
COPY .*.env* ./

ENV APP_ENV=production
CMD ["sh", "-c", "uv run --no-project alembic upgrade head && uv run --no-project python -m src.my_service"]
```

I understand you are trying to make `uv run` as easy as possible, but it seems really not intuitive to me that `uv run` for some reason installs project too. Are there any plans to maybe disable this?

### Platform

MINGW64_NT-10.0-19045 3.4.10-87d57229.x86_64 x86_64 Msy

### Version

FROM ghcr.io/astral-sh/uv:python3.12-bookworm-slim

---

_Label `question` added by @Danipulok on 2025-05-28 07:24_

---

_Renamed from "`uv run` installing `dev` dependencies by default" to "`uv run` installing project by default" by @Danipulok on 2025-05-28 07:24_

---

_Comment by @konstin on 2025-05-28 09:19_

What do you mean by installs the project, and how is that related to git? Can you share a `pyproject.toml` that reproduces the problem?

---

_Comment by @Danipulok on 2025-05-28 09:23_

Hi!
Sorry for not providing it and not being clear enough

I have `git` dependencies. 
Here is my `pyproject.toml`:

```toml
[project]
name = "project"
version = "0.1.0"
description = "project"
requires-python = ">=3.12"
dependencies = [
    "aiogram>=3.19.0",
    "alembic-postgresql-enum>=1.7.0",
    "alembic[tz]>=1.15.2",
    "asyncpg>=0.30.0",
    "colorama>=0.4.6",
    "python-dateutil>=2.9.0.post0",
    "python-dotenv>=1.1.0",
    "sqlalchemy>=2.0.40",
    "structlog>=25.2.0",
    "tzdata>=2025.2",
]

[dependency-groups]
dev = [
    "kurigram",
    "pre-commit>=4.2.0",
    "pytgcrypto>=1.2.11",
    "rich>=14.0.0",
    "watchfiles>=1.0.5",
]

[tool.uv.sources]
kurigram = { git = "https://github.com/KurimuzonAkuma/pyrogram.git", rev = "85a043b53ae50d0a70d70d8dd31298f131e88857" }
```

My use case was that I needed `dev` only for myself and development, not production. 
That's why I asked the reason of installing dependencies for `uv run`, it seems unintuitive for me

---

_Comment by @konstin on 2025-05-28 09:37_

Installing the dev dependencies by default is an intentional choice, it makes a better developer experience locally: It's easier to add `--no-dev` to `uv sync` once for the Docker container, than it is to having to add `--dev` each time for `uv sync` locally.

---

_Comment by @Danipulok on 2025-05-28 10:01_

That's not what I asked. I asked exactly about `uv run`.
Not `uv sync`

---

_Comment by @Danipulok on 2025-05-28 10:01_

The issue title is `uv run installing project by default`

---

_Comment by @konstin on 2025-05-28 10:05_

`uv run` and `uv sync` share most of their interface, `uv run` is effectively running `uv sync` and then launches `python`.

Users will often use `python` directly in their Docker `ENTRYPOINT` or `CMD` to avoid having uv in their production image (https://docs.astral.sh/uv/guides/integration/docker/), so we didn't optimize `uv run` for the Docker use case.

---

_Comment by @Danipulok on 2025-05-28 10:35_

Okay, got it. This clarifies why `uv run` also installs the project.
Thanks a lot!

---

_Closed by @Danipulok on 2025-05-28 10:35_

---

_Referenced in [astral-sh/uv#16994](../../astral-sh/uv/issues/16994.md) on 2025-12-05 05:18_

---
