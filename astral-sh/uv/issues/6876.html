<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Running `uv pip compile` with `--find-links` pointing towards a local wheel does not produce the expected output - astral-sh/uv #6876</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Running `uv pip compile` with `--find-links` pointing towards a local wheel does not produce the expected output</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6876">#6876</a>
        opened by <a href="https://github.com/williamglasse">@williamglasse</a>
        on 2024-08-30 14:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/williamglasse">@williamglasse</a> on 2024-08-30 14:48</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>Hello!</p>
<p>Unsure whether this is a bug, or I could be misusing uv!</p>
<p>I'm trying to migrate over from pip-tools to using UV instead. I've got a local wheel that I'd like to install, that lives within my repository as a .whl file. In pip-compile world, I'd run <code>pip-compile --find-links=./local_wheels --output-file=requirements.txt pyproject.toml</code> and this generated a requirements.txt file. The resultant requirement.txt file would contain <code>--find-links ./local_wheels</code> at the top of the file. This would mean that when I run pip-sync, it would make use of wheels found within the /local_wheels directory</p>
<p>I expected <code>uv pip compile --find-links ./local_wheels --output-file=requirements.txt pyproject.toml</code> to return a similar output to requirements.txt, but it doesn't have the expected <code>--find-links ./local_wheels</code> in the autogenerated output</p>
<p>Am I missing something or is this a bug?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Running `uv pip compile` with `--find-links` does not produce the expected output" to "Running `uv pip compile` with `--find-links` pointing towards a local wheel does not produce the expected output" by @williamglasse on 2024-08-30 14:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-30 14:48</div>
            <div class="timeline-body"><p>I think you can pass <code>--emit-find-links</code> to include them (we just don't do it by default).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-30 14:49</div>
            <div class="timeline-body"><p>It's mentioned here for index URLs, but I should probably add a reference to <code>--emit-find-links</code> to help with search: https://docs.astral.sh/uv/pip/compatibility/#pip-compile-defaults</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @charliermarsh on 2024-08-30 14:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-08-30 14:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/williamglasse">@williamglasse</a> on 2024-08-30 14:51</div>
            <div class="timeline-body"><blockquote>
<p>It's mentioned here for index URLs, but I should probably add a reference to <code>--emit-find-links</code> to help with search: https://docs.astral.sh/uv/pip/compatibility/#pip-compile-defaults</p>
</blockquote>
<p>Thank you @charliermarsh that was what I was looking for! Thank you for such a speedy response.</p>
<p>Out of interest, I have another issue, where for some reason setuptools is being added to requirements.txt, whereas it wasn't before. Is there another flag I'm missing that will make uv behave similar to how pip-tools was?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-30 14:52</div>
            <div class="timeline-body"><p>You could add <code>--no-emit-package setuptools</code>. I think <code>pip-compile</code> may omit it by default right now? But IIRC that's being removed in future versions of <code>pip-tools</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-30 14:53</div>
            <div class="timeline-body"><p>You should be able to set these things in your <code>pyproject.toml</code> if you want:</p>
<pre><code class="language-toml">[tool.uv.pip]
emit-find-links = true
no-emit-package = [&quot;setuptools&quot;]
</code></pre>
<p>(Something like that -- didn't test it before writing :))</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/williamglasse">@williamglasse</a> on 2024-08-30 14:56</div>
            <div class="timeline-body"><p>A big thank you @charliermarsh, that is exactly what I needed! Thank you for solving both of my issues, I had started going around in circles, so much appreciated &lt;3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @williamglasse on 2024-08-30 14:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-30 14:56</div>
            <div class="timeline-body"><p>No prob! I can add some things to the compatibility guide so it's easier to reference in the future.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:35 UTC
    </footer>
</body>
</html>
