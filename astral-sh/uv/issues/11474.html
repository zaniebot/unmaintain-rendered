<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dependency Group Includes From [project] - astral-sh/uv #11474</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Dependency Group Includes From [project]</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/11474">#11474</a>
        opened by <a href="https://github.com/RomainBrault">@RomainBrault</a>
        on 2025-02-13 10:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/RomainBrault">@RomainBrault</a> on 2025-02-13 10:13</div>
            <div class="timeline-body"><h3>Question</h3>
<p>In my projects I am using dependency groups to list my tests dependencies (pytest, etc.).</p>
<p>I would like to test a minimum supported Python version (using uv's lowest resolution). However because the dependency group &quot;tests&quot; is not present in the wheel, the lowest resolution in my test might not be the same than the one after installing the wheel.</p>
<p>A solution I am thinking of would be to include the dependency group as an extra. This is mentioned in the now outdated PEP 735: https://peps.python.org/pep-0735/#use-cases-for-dependency-group-includes-from-project. Is there yet a plan to support this include in uv ?</p>
<p>Otherwise I would be happy to hear of alternative solution to guarantee the same resolution when installing the wheel and testing with dependency groups.</p>
<h3>Platform</h3>
<p>ubuntu 24.10</p>
<h3>Version</h3>
<p>0.5.31</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @RomainBrault on 2025-02-13 10:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RomainBrault">@RomainBrault</a> on 2025-02-13 10:20</div>
            <div class="timeline-body"><p>Other viable solutions I see would be:</p>
<ul>
<li>supporting groups in <code>uv pip compile</code> (there is #8969 but we don't know when it will be implemented/merged)</li>
<li>give the possibility to have multiple lockfiles or have a lockfile with multiple resolution (I do not want the CI to change/update the lockfile, I usually run the tests using --frozen).</li>
</ul>
<p>The only solution I currently see is:</p>
<ol>
<li>export the group dependency with <code>uv export --group -o requirements-dev.txt</code></li>
<li>compile with constraints <code>uv pip compile --resolution=lowest --constraints requirements-dev.txt -o requirements.txt</code></li>
</ol>
<p>But I cannot change the resolution on my tests requirements without updating the lockfile, and there is still the possibility that some user's environment will resolve dependencies when installing the wheel that were not tested, due to the dev requirements passed as constraints (that's why I'd like to add them as an extra too).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-13 15:37</div>
            <div class="timeline-body"><p>This was explicitly taken out of the PEP and is in the rejected ideas section https://peps.python.org/pep-0735/#why-not-support-dependency-group-includes-in-project-dependencies-or-project-optional-dependencies</p>
<p>We won't be implementing something that's not complaint with the <code>[project]</code> table standards.</p>
<p>It sounds like an extra is the best option here? I'm not sure. Running the test suite against wheels is unfortunately tricky.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RomainBrault">@RomainBrault</a> on 2025-02-13 16:00</div>
            <div class="timeline-body"><p>Thanks for pointing me out the relevant paragraph!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @RomainBrault on 2025-02-13 16:00</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:02 UTC
    </footer>
</body>
</html>
