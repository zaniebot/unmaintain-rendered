<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Use the same version in both library and its workspaces - astral-sh/uv #15359</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Use the same version in both library and its workspaces</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/15359">#15359</a>
        opened by <a href="https://github.com/saroad2">@saroad2</a>
        on 2025-08-18 20:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/saroad2">@saroad2</a> on 2025-08-18 20:31</div>
            <div class="timeline-body"><h3>Summary</h3>
<h2>TL;DR</h2>
<p>When building a library with workspaces, one might want to use the same version for all workspaces in a repo.</p>
<h2>The issue</h2>
<p>Let's say that I'm working on a library with two workspaces <code>my-workspace1</code> and <code>my-workspace2</code>.</p>
<p>I want to make sure that when I run <code>uv build --all-packages</code>, the distibution created for all packages has the same version. If this isn't the case, one might have problems re-uploading a depndecy library to PyPi, as the current version of the workspace is already uploaded.</p>
<p>Solving this issue will help to make sure that when deploying a library, one deploy all the necessary updates to the internal dependency packages</p>
<h2>Possible solutions</h2>
<h3>Option 1: Update version for all workspaces at once.</h3>
<p>At the moment, in order to update the version for both a library and one of its workspaces, I need to run 2 commands:</p>
<pre><code class="language-console">uv version --bump patch
uv version --package my-workspace1 --bump path
uv version --package my-workspace2 --bump path
</code></pre>
<p>One solution to keep the version the same for all workspace is if one could update all versions at once by running something like <code>uv version --all-packages --bump path</code>, in the same way that one can build all workspaces at  once with <code>uv build --all-packages</code>.</p>
<h3>Option 2: dynamic version from parent</h3>
<p>One can set the version in the workspace as <code>dynamic</code> and explicitly write that the version is taken from the parent library.
For example, in <code>my-workspace1</code>, one should be able to set <em>pyproject.toml</em> in the following way:</p>
<pre><code class="language-toml">[project]
name = &quot;my-workspace1&quot;
dynamic = [&quot;version&quot;]
...

[build-system]
requires = [&quot;uv_build&gt;=0.8.8,&lt;0.9.0&quot;]
build-backend = &quot;uv_build&quot;

[tool.uv.build-backend]
version = { source: &quot;parent&quot;}
</code></pre>
<p>In that way, when building the package from the workspace with <code>uv build --package my-workspace1</code>, the version will be taken from the parent</p>
<h2>Summary</h2>
<p>Currently, in order to sync versions between different workspaces in the same repo, one needs to manually update them one by one.</p>
<p>These two proposed solutions can solve them in a relatively easy way.
We can decide to support only one of them or both, if we want to.</p>
<p>If my suggestion approved by the maintainers, I would gladly go ahead and try to implement them.</p>
<p>Thank you!</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @saroad2 on 2025-08-18 20:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:11 UTC
    </footer>
</body>
</html>
