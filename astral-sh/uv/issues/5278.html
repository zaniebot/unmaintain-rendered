<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature Request: Add Poetry dependency group support to `uv pip compile` - astral-sh/uv #5278</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Feature Request: Add Poetry dependency group support to `uv pip compile`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/5278">#5278</a>
        opened by <a href="https://github.com/siavashyj">@siavashyj</a>
        on 2024-07-22 02:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/siavashyj">@siavashyj</a> on 2024-07-22 02:08</div>
            <div class="timeline-body"><h3>Description</h3>
<p>Currently, <code>uv pip compile</code> does not support <a href="https://python-poetry.org/docs/managing-dependencies/#dependency-groups">Poetry's dependency groups feature</a>. Adding this support would greatly enhance uv's compatibility with Poetry projects and improve workflow for developers who use both tools.</p>
<h3>Use Case</h3>
<p>Many projects use Poetry's dependency groups to separate different sets of dependencies (e.g., development dependencies, test dependencies, etc.). Being able to compile requirements files for specific groups using <code>uv pip compile</code> would streamline the process of managing dependencies in these projects.</p>
<h3>Proposed Functionality</h3>
<ol>
<li>Add a new option to <code>uv pip compile</code>, such as <code>--poetry-group</code> or <code>-g</code>, that allows specifying one or more Poetry dependency groups.</li>
<li>When this option is used, <code>uv pip compile</code> should read the <code>pyproject.toml</code> file and only include dependencies from the specified group(s) in the compiled requirements file.</li>
<li>If no group is specified, the default behavior should be to include all dependencies (similar to Poetry's behavior).</li>
</ol>
<h3>Example Usage</h3>
<pre><code>uv pip compile --poetry-group dev -o requirements-dev.txt
uv pip compile --poetry-group dev,test -o requirements-dev-test.txt
</code></pre>
<h3>Additional Considerations</h3>
<ul>
<li>How should conflicts between groups be handled if multiple groups are specified?</li>
<li>Should there be an option to exclude certain groups?</li>
<li>How should this feature interact with other existing <code>uv pip compile</code> options?</li>
</ul>
<h3>Benefits</h3>
<ol>
<li>Improved compatibility with Poetry projects</li>
<li>More granular control over dependency compilation</li>
<li>Easier management of different environments (development, testing, production, etc.)</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesbraza">@jamesbraza</a> on 2024-07-22 04:03</div>
            <div class="timeline-body"><p>An aside is Poetry could be then paired with Rye to resolve https://github.com/astral-sh/rye/issues/421, albeit in a hacky way where one has both Rye and Poetry present in the same ecosystem ðŸ˜†</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-22 04:17</div>
            <div class="timeline-body"><p>I don't think we'll add support for reading Poetry's configuration (similarly, we have avoided reading pip's configuration). Instead, I'd point to <a href="https://peps.python.org/pep-0735/">PEP 735</a> which proposes a standardized format for dependency groups.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-22 04:18</div>
            <div class="timeline-body"><p>(Thanks for the comprehensive overview though, I appreciate it!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-22 13:17</div>
            <div class="timeline-body"><p>Agreed. Unfortunately I think we're unlikely to support this both because we avoid reading configuration designed for other tools and because Poetry's dependency syntax and semantics are not standardized and entirely custom to Poetry.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-07-22 13:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5632.html">astral-sh/uv#5632</a> on 2024-07-30 20:19</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:20 UTC
    </footer>
</body>
</html>
