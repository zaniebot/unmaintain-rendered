```yaml
number: 7005
title: "`uv add pyqt5` error"
type: issue
state: closed
author: rainzee
labels:
  - bug
assignees: []
created_at: 2024-09-04T11:03:23Z
updated_at: 2025-02-15T20:27:55Z
url: https://github.com/astral-sh/uv/issues/7005
synced_at: 2026-01-10T01:57:15Z
```

# `uv add pyqt5` error

---

_Issue opened by @rainzee on 2024-09-04 11:03_

`uv pip install pyqt5` works perfectly
but `uv add pyqt5` result error:
```
‚ùØ uv add pyqt5
Resolved 4 packages in 2.78s
error: distribution pyqt5-qt5==5.15.14 @ registry+https://pypi.org/simple can't be installed because it doesn't have a source distribution or wheel for the current platform
```

uv version `uv 0.4.4 (3d75df6ab 2024-09-04)`
os windows 10

---

_Comment by @rainzee on 2024-09-04 11:18_

I did some digging and found that `pyqt5` depends on a package called `pyqt5-qt5` which does not support Windows in versions `5.15.11` - `5.15.14`, but does support Windows in `5.15.2`.

In this case, how to lock dependencies across platforms? In other words, how to avoid errors, after all, there is no problem with normal installation.

---

_Comment by @charliermarsh on 2024-09-04 13:27_

This is an inherent problem with distributions that don't ship source distributions, and have limited platform support. We can't guarantee that the set of wheels will cover all the platforms you care about. I'd suggest adding a constraint like:
```toml
[tool.uv]
constraint-dependencies = ["pyqt5-qt5 <=5.15.2"]
```

---

_Comment by @charliermarsh on 2024-09-04 13:27_

It's the same problem as #5182, so gonna merge in there.

---

_Closed by @charliermarsh on 2024-09-04 13:27_

---

_Label `bug` added by @charliermarsh on 2024-09-04 13:27_

---

_Comment by @rainzee on 2024-09-05 01:57_

So, is this a bug or expected behavior? I tried multiple different package managers(poetry and pdm) and all went wrong, but I felt we could do better, after all, this distribution pattern exists for many popular libraries, so how do we lock down dependencies?

---

_Referenced in [astral-sh/uv#9711](../../astral-sh/uv/issues/9711.md) on 2024-12-07 20:47_

---

_Comment by @adam-grant-hendry on 2024-12-09 21:01_

> This is an inherent problem with distributions that don't ship source distributions, and have limited platform support. We can't guarantee that the set of wheels will cover all the platforms you care about. I'd suggest adding a constraint like:
> 
> [tool.uv]
> constraint-dependencies = ["pyqt5-qt5 <=5.15.2"]

Since this is a Windows-only issue, wouldn't it be better to do this?

```toml
deps = [
    "pyqt5>=5.15.11; sys_platform != 'win32'",
    "pyqt5<=5.15.2; sys_platform == 'win32'"
]
```

---

_Comment by @adam-grant-hendry on 2024-12-09 22:34_

Note: `pyside2` is also not available for `python >= 3.11` ([PyPI-PySide2](https://pypi.org/project/PySide2/))

---

_Referenced in [astral-sh/uv#9928](../../astral-sh/uv/pulls/9928.md) on 2024-12-16 03:23_

---

_Comment by @charliermarsh on 2025-02-15 20:27_

It looks like they added the necessary distributions here.

---

_Referenced in [napari/napari#7744](../../napari/napari/pulls/7744.md) on 2025-03-25 18:06_

---

_Referenced in [astral-sh/uv#13506](../../astral-sh/uv/issues/13506.md) on 2025-05-17 11:52_

---

_Referenced in [neuroinformatics-unit/movement#683](../../neuroinformatics-unit/movement/pulls/683.md) on 2025-10-29 20:15_

---

_Referenced in [napari/napari-plugin-template#114](../../napari/napari-plugin-template/issues/114.md) on 2025-11-27 20:50_

---
