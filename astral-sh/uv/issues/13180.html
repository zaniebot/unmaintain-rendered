<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>opencv functions do not work in uv scripts, but work fine in pip environment on same system - astral-sh/uv #13180</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>opencv functions do not work in uv scripts, but work fine in pip environment on same system</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13180">#13180</a>
        opened by <a href="https://github.com/Youjin1985">@Youjin1985</a>
        on 2025-04-28 14:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Youjin1985">@Youjin1985</a></div>
            <div class="timeline-body">Summary
<p>Traceback (most recent call last):
File &quot;...cv_debug.py&quot;, line 18, in 
cv2.namedWindow(&quot;TrackedBars&quot;)
~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^
cv2.error: OpenCV(4.11.0) D:\a\opencv-python\opencv-python\opencv\modules\highgui\src\window.cpp:1284: error: (-2:Unspecified error) The function is not implemented. Rebuild the library with Windows, GTK+ 2.x or Cocoa support. If you are on Ubuntu or Debian, install libgtk2.0-dev and pkg-config, then re-run cmake or configure script in function &#x27;cvNamedWindow&#x27;</p>
<p>If I use pip managed virtualenv, this does not happen and opencv functions work as expected</p>
<p>code to reproduce:</p>
<pre><code>import cv2
import numpy as np
import mss
from PIL import Image

sct = mss.mss()

def empty(i):
    pass

cv2.namedWindow(&quot;TrackedBars&quot;)
cv2.resizeWindow(&quot;TrackedBars&quot;, 640, 360)


def on_trackbar(val):
    hue_min = cv2.getTrackbarPos(&quot;Hue Min&quot;, &quot;TrackedBars&quot;)
    hue_max = cv2.getTrackbarPos(&quot;Hue Max&quot;, &quot;TrackedBars&quot;)
    sat_min = cv2.getTrackbarPos(&quot;Sat Min&quot;, &quot;TrackedBars&quot;)
    sat_max = cv2.getTrackbarPos(&quot;Sat Max&quot;, &quot;TrackedBars&quot;)
    val_min = cv2.getTrackbarPos(&quot;Val Min&quot;, &quot;TrackedBars&quot;)
    val_max = cv2.getTrackbarPos(&quot;Val Max&quot;, &quot;TrackedBars&quot;)

    lower = np.array([hue_min, sat_min, val_min])
    upper = np.array([hue_max, sat_max, val_max])

    imgMASK = cv2.inRange(imgHSV, lower, upper)

    cv2.imshow(&quot;Output1&quot;, img)
    cv2.imshow(&quot;Output2&quot;, imgHSV)
    cv2.imshow(&quot;Mask&quot;, imgMASK)


cv2.createTrackbar(&quot;Hue Min&quot;, &quot;TrackedBars&quot;, 0, 179, on_trackbar)
cv2.createTrackbar(&quot;Hue Max&quot;, &quot;TrackedBars&quot;, 179, 179, on_trackbar)
cv2.createTrackbar(&quot;Sat Min&quot;, &quot;TrackedBars&quot;, 0, 255, on_trackbar)
cv2.createTrackbar(&quot;Sat Max&quot;, &quot;TrackedBars&quot;, 255, 255, on_trackbar)
cv2.createTrackbar(&quot;Val Min&quot;, &quot;TrackedBars&quot;, 0, 255, on_trackbar)
cv2.createTrackbar(&quot;Val Max&quot;, &quot;TrackedBars&quot;, 255, 255, on_trackbar)

shot = sct.grab({&#x27;left&#x27;:900, &#x27;top&#x27;: 100, &#x27;width&#x27;: 1600, &#x27;height&#x27;:1000})
img = np.array(Image.frombytes(&quot;RGB&quot;, shot.size, shot.bgra, &quot;raw&quot;, &quot;BGRX&quot;), dtype=np.uint8)
imgHSV = cv2.cvtColor(img, cv2.COLOR_BGR2HSV)


on_trackbar(0)
cv2.waitKey()
</code></pre>
Platform
<p>Windows 11 x86_64</p>
Version
<p>uv 0.6.14 (a4cec56dc 2025-04-09)</p>
Python version
<p>Python 3.13.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/Youjin1985">@Youjin1985</a> on 2025-04-28 14:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-04-28 16:02</div>
            <div class="timeline-body"><p>What commands did you use for the uv install and which for the pip install?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/konstin">@konstin</a> on 2025-04-28 16:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by <a href="https://github.com/konstin">@konstin</a> on 2025-04-28 16:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Youjin1985">@Youjin1985</a> on 2025-04-29 08:28</div>
            <div class="timeline-body"><p>For pip:
pip install opencv-python
For uv:
uv add opencv-python</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-04-29 08:38</div>
            <div class="timeline-body"><p>Can you share a minimal reproducible example, with all commands you ran, your <code>pyproject.toml</code> and the verbose logs with (<code>-v</code>)? See <a href="https://github.com/astral-sh/uv/issues/9452">astral-sh/uv#9452</a> for more details.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-04 12:43</div>
            <div class="timeline-body"><p>(Closing due to lack of MRE, but happy to re-open with more info.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-04 12:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:38:24 UTC
    </footer>
</body>
</html>
