<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv add chromadb fails, error Compiling with an SDK that doesn't seem to exist /Applications/Xcode - astral-sh/uv #9744</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv add chromadb fails, error Compiling with an SDK that doesn't seem to exist /Applications/Xcode</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9744">#9744</a>
        opened by <a href="https://github.com/bodadotsh">@bodadotsh</a>
        on 2024-12-09 18:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bodadotsh">@bodadotsh</a> on 2024-12-09 18:57</div>
            <div class="timeline-body"><p>Hi, when I tried to run <code>uv add chromadb</code> on macOS, it fails and returns error:</p>
<pre><code>esolved 91 packages in 261ms
  × Failed to download and build `chroma-hnswlib==0.7.6`
  ╰─▶ Build backend failed to build wheel through `build_wheel` (exit status: 1)
 37 warnings generated.
      Compiling with an SDK that doesn't seem to exist: /Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk
      Please check your Xcode installation
      clang++: warning: no such sysroot directory: '/Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk' [-Wmissing-sysroot]
      ld: warning: search path 'Modules/_hacl' not found
      ld: warning: search path '/install/lib' not found
      ld: library 'c++' not found
      clang++: error: linker command failed with exit code 1 (use -v to see invocation)
      error: command '/usr/bin/g++' failed with exit code 1
</code></pre>
<p>When I looked for solutions, some suggested to install <code>xcode</code> from App Store but I'm on a work laptop, and doesn't have iCloud logged in. I tried to install <code>xcode</code> with <code>xcode-select --install</code> from the terminal. Also tried <code>CC=$(which gcc) CXX=$(which g++) uv add chromadb</code> and no luck.</p>
<p>Software versions</p>
<ul>
<li><code>uv 0.5.5 (95cd8b8b3 2024-11-27)</code></li>
<li><code>macOS Sequoia 15.1.1 arm64</code></li>
<li><code>chroma-hnswlib v0.7.6</code></li>
<li><code>chromadb v0.5.23</code></li>
<li><code>python 3.13</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-09 18:58</div>
            <div class="timeline-body"><p>I think we have a fix for this upstream</p>
<p>ref https://github.com/indygreg/python-build-standalone/pull/414</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2024-12-09 18:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-09 19:08</div>
            <div class="timeline-body"><p>You can also try unsetting <code>CFLAGS</code>? That might work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bodadotsh">@bodadotsh</a> on 2024-12-09 20:18</div>
            <div class="timeline-body"><blockquote>
<p>You can also try unsetting <code>CFLAGS</code>? That might work.</p>
</blockquote>
<p>Got a different error</p>
<pre><code>  × Failed to download and build `chroma-hnswlib==0.7.6`
  ╰─▶ Build backend failed to build wheel through `build_wheel` (exit status: 1)

      [stdout]
      running bdist_wheel
      running build
      running build_ext
      clang++ -fno-strict-overflow -Wsign-compare -Wunreachable-code -DNDEBUG -g -O3 -Wall -arch arm64 -mmacosx-version-min=11.0 -Wno-nullability-completeness -Wno-expansion-to-defined -Wno-undef-prefix
      -isysroot /Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk -fPIC -Werror=unguarded-availability-new -I/opt/homebrew/opt/llvm/include
      -I/Users/boda/.cache/uv/builds-v0/.tmpsIu7i0/include -I/Users/boda/.local/share/uv/python/cpython-3.13.0-macos-aarch64-none/include/python3.13 -c /var/folders/4q/xj6y7_fn4_xd7c6zglq850jm0000gn/T/tmp477pvn97.cpp -o
      var/folders/4q/xj6y7_fn4_xd7c6zglq850jm0000gn/T/tmp477pvn97.o -std=c++14
      clang++ -fno-strict-overflow -Wsign-compare -Wunreachable-code -DNDEBUG -g -O3 -Wall -arch arm64 -mmacosx-version-min=11.0 -Wno-nullability-completeness -Wno-expansion-to-defined -Wno-undef-prefix
      -isysroot /Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk -fPIC -Werror=unguarded-availability-new -I/opt/homebrew/opt/llvm/include
      -I/Users/boda/.cache/uv/builds-v0/.tmpsIu7i0/include -I/Users/boda/.local/share/uv/python/cpython-3.13.0-macos-aarch64-none/include/python3.13 -c /var/folders/4q/xj6y7_fn4_xd7c6zglq850jm0000gn/T/tmp4vrqq8p_.cpp -o
      var/folders/4q/xj6y7_fn4_xd7c6zglq850jm0000gn/T/tmp4vrqq8p_.o -fvisibility=hidden
      building 'hnswlib' extension
      clang++ -fno-strict-overflow -Wsign-compare -Wunreachable-code -DNDEBUG -g -O3 -Wall -arch arm64 -mmacosx-version-min=11.0 -Wno-nullability-completeness -Wno-expansion-to-defined -Wno-undef-prefix
      -isysroot /Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk -fPIC -Werror=unguarded-availability-new -I/opt/homebrew/opt/llvm/include
      -I/Users/boda/.cache/uv/builds-v0/.tmpsIu7i0/lib/python3.13/site-packages/pybind11/include -I/Users/boda/.cache/uv/builds-v0/.tmpsIu7i0/lib/python3.13/site-packages/numpy/_core/include
      -I./hnswlib/ -I/Users/boda/.cache/uv/builds-v0/.tmpsIu7i0/include -I/Users/boda/.local/share/uv/python/cpython-3.13.0-macos-aarch64-none/include/python3.13 -c ./python_bindings/bindings.cpp -o
      build/temp.macosx-11.0-arm64-cpython-313/./python_bindings/bindings.o -O3 -stdlib=libc++ -mmacosx-version-min=10.7 -DVERSION_INFO=\&quot;0.7.6\&quot; -std=c++14 -fvisibility=hidden

      [stderr]
      Compiling with an SDK that doesn't seem to exist: /Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk
      Please check your Xcode installation
      Compiling with an SDK that doesn't seem to exist: /Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk
      Please check your Xcode installation
      clang++: warning: no such sysroot directory: '/Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk' [-Wmissing-sysroot]
      Compiling with an SDK that doesn't seem to exist: /Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk
      Please check your Xcode installation
      Compiling with an SDK that doesn't seem to exist: /Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk
      Please check your Xcode installation
      clang++: warning: no such sysroot directory: '/Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk' [-Wmissing-sysroot]
      Compiling with an SDK that doesn't seem to exist: /Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk
      Please check your Xcode installation
      Compiling with an SDK that doesn't seem to exist: /Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk
      Please check your Xcode installation
      clang++: warning: no such sysroot directory: '/Applications/Xcode_15.2.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX14.2.sdk' [-Wmissing-sysroot]
      In file included from ./python_bindings/bindings.cpp:1:
      In file included from /opt/homebrew/Cellar/llvm/19.1.5/bin/../include/c++/v1/iostream:42:
      In file included from /opt/homebrew/Cellar/llvm/19.1.5/bin/../include/c++/v1/ios:220:
      In file included from /opt/homebrew/Cellar/llvm/19.1.5/bin/../include/c++/v1/__locale:14:
      /opt/homebrew/Cellar/llvm/19.1.5/bin/../include/c++/v1/__locale_dir/locale_base_api.h:29:12: fatal error: 'xlocale.h' file not found
         29 | #  include &lt;xlocale.h&gt;
            |            ^~~~~~~~~~~
      1 error generated.
      error: command '/opt/homebrew/opt/llvm/bin/clang++' failed with exit code 1

      hint: This error likely indicates that you need to install a library that provides &quot;xlocale.h&quot; for `chroma-hnswlib@0.7.6`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-09 20:26</div>
            <div class="timeline-body"><p>Anyway, that looks like ~the same problem that https://github.com/indygreg/python-build-standalone/pull/414 would resolve.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bodadotsh">@bodadotsh</a> on 2024-12-09 21:49</div>
            <div class="timeline-body"><p>Just found that <code>chromadb</code> doesn't support python 3.13 yet so downgraded python to 3.11 <code>uv python pin 3.11</code>, and everything works now.</p>
<p>Thanks both for the help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @bodadotsh on 2024-12-09 21:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../astral-sh/python-build-standalone/pulls/414.html">astral-sh/python-build-standalone#414</a> on 2024-12-10 13:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hhamud">@hhamud</a> on 2025-01-08 23:46</div>
            <div class="timeline-body"><p>if anyone had the same problem with hnswlib failing to build, just updating uv and reinstalling the python version that used it fixed it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../GoogleCloudPlatform/agent-starter-pack/pulls/23.html">GoogleCloudPlatform/agent-starter-pack#23</a> on 2025-03-12 11:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/aliraza108">@aliraza108</a> on 2025-04-25 23:46</div>
            <div class="timeline-body"><p>also get same error</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/juliancoffee">@juliancoffee</a> on 2025-06-10 22:07</div>
            <div class="timeline-body"><p>Just hit this with <code>PyICU</code>.
As it seems to still be a problem for people, yes, try to reinstall the <code>uv</code> Python.
Alternatively, check out <code>uv python list</code> and if you see something suspicious, just uninstall everything from <code>uv</code>.
I only had <code>python3.13.1</code> and everything else installed from <code>brew</code>.
After I removed <code>python3.13.1</code>, <code>uv</code> switched to system python, and it just worked.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-06-11 12:07</div>
            <div class="timeline-body"><p>@aliraza108 @juliancoffee Please open a new issue with a minimal reproduction and the logs attached.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../langflow-ai/langflow/issues/8224.html">langflow-ai/langflow#8224</a> on 2025-06-12 12:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:46 UTC
    </footer>
</body>
</html>
