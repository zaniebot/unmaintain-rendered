<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`UV 2.0` installation fails on `aarch64-unknown-linux-gnu` (inside docker basically)  - astral-sh/uv #3760</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>UV 2.0</code> installation fails on <code>aarch64-unknown-linux-gnu</code> (inside docker basically)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3760">#3760</a>
        opened by <a href="https://github.com/ArshanKhanifar">@ArshanKhanifar</a>
        on 2024-05-22 19:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ArshanKhanifar">@ArshanKhanifar</a></div>
            <div class="timeline-body"><p>Hello hello! Congrats on the new release! ðŸŽ‰</p>
<p>I happen to be building a docker image 10 minutes after the release ðŸ˜…  and I can see that the installation is failing.</p>
Summary
<p>My dockerfile:</p>
<pre><code>FROM python:3.11-slim as builder

WORKDIR /app

ENV PYTHONUNBUFFERED 1
ENV PYTHONDONTWRITEBYTECODE 1
ENV PIP_NO_CACHE_DIR 1
ENV RUNTIME docker

RUN apt-get update
RUN apt-get install -y git curl

# install uv
ADD --chmod=755 https://astral.sh/uv/install.sh /install.sh
RUN /install.sh &amp;&amp; rm /install.sh
</code></pre>
<p>then building this, I see this:</p>
<pre><code>[+] Building 1.6s (10/13)                                                                                                                                                                                                     docker:orbstack
 =&gt; [internal] load build definition from Dockerfile                                                                                                                                                                                     0.0s
 =&gt; =&gt; transferring dockerfile: 690B                                                                                                                                                                                                     0.0s
 =&gt; [internal] load metadata for docker.io/library/python:3.11-slim                                                                                                                                                                      0.5s
 =&gt; [auth] library/python:pull token for registry-1.docker.io                                                                                                                                                                            0.0s
 =&gt; [internal] load .dockerignore                                                                                                                                                                                                        0.0s
 =&gt; =&gt; transferring context: 2B                                                                                                                                                                                                          0.0s
 =&gt; [1/8] FROM docker.io/library/python:3.11-slim@sha256:fc39d2e68b554c3f0a5cb8a776280c0b3d73b4c04b83dbade835e2a171ca27ef                                                                                                                0.0s
 =&gt; [internal] load build context                                                                                                                                                                                                        0.0s
 =&gt; =&gt; transferring context: 297B                                                                                                                                                                                                        0.0s
 =&gt; CACHED [2/8] WORKDIR /app                                                                                                                                                                                                            0.0s
 =&gt; CACHED [3/8] RUN apt-get update                                                                                                                                                                                                      0.0s
 =&gt; CACHED [4/8] RUN apt-get install -y git curl                                                                                                                                                                                         0.0s
 =&gt; ERROR [5/8] RUN curl -LsSf https://astral.sh/uv/install.sh | sh                                                                                                                                                                      1.0s
------
 &gt; [5/8] RUN curl -LsSf https://astral.sh/uv/install.sh | sh:
0.763 downloading uv 0.2.0 aarch64-unknown-linux-gnu
0.965 curl: (22) The requested URL returned error: 404
0.970 failed to download https://github.com/astral-sh/uv/releases/download/0.2.0/uv-aarch64-unknown-linux-gnu.tar.gz
0.970 this may be a standard network error, but it may also indicate
0.970 that uv&#x27;s release process is not working. When in doubt
0.970 please feel free to open an issue!
------
Dockerfile:19
--------------------
  17 |     #ADD --chmod=755 https://astral.sh/uv/install.sh /install.sh
  18 |     #RUN /install.sh &amp;&amp; rm /install.sh
  19 | &gt;&gt;&gt; RUN curl -LsSf https://astral.sh/uv/install.sh | sh
  20 |
  21 |     COPY requirements.txt .
--------------------
ERROR: failed to solve: process &quot;/bin/sh -c curl -LsSf https://astral.sh/uv/install.sh | sh&quot; did not complete successfully: exit code: 1

View build details: docker-desktop://dashboard/build/orbstack/orbstack/w6usv6gxw2sbgk1dzpjkoqahf
make[1]: *** [build] Error 1
make: *** [build-service] Error 2
</code></pre>
Steps to Reproduce
<ol>
<li>create the dockerfile I created above: <code>touch Dockerfile</code></li>
<li>build the dockerfile: <code>docker build -t myimage .</code></li>
</ol>
My System
<ul>
<li><p>My mac:
<img alt="image" src="https://github.com/astral-sh/uv/assets/10492324/e32404c3-8d5a-40a0-a791-b514227a0561"></p>
</li>
<li><p>My docker version:</p>
</li>
</ul>
<pre><code>docker --version
Docker version 25.0.2, build 29cf629
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-22 19:30</div>
            <div class="timeline-body"><p>I think this is because we removed the <code>linux-gnu</code> build but it&#x27;s still included the cargo-dist manifest. I can cut a new release. In the interim you can pin with <code>curl -LsSf https://astral.sh/uv/0.1.45/install.sh | sh</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ArshanKhanifar">@ArshanKhanifar</a> on 2024-05-22 19:31</div>
            <div class="timeline-body"><p>Thank you for the pin suggestion, that was going to be my next question ðŸ˜‚</p>
<p>Not sure which is faster, <code>uv</code> itself or its creators responding to issues.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-22 19:40</div>
            <div class="timeline-body"><p>I&#x27;m gonna re-add that binary, then re-release real quick: <a href="https://github.com/astral-sh/uv/pull/3762">astral-sh/uv#3762</a>. So should be fixed in maybe 20 mins or so?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-22 20:34</div>
            <div class="timeline-body"><p>Hopefully fixed in v0.2.1?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-22 20:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sherpya">@sherpya</a> on 2024-05-22 20:44</div>
            <div class="timeline-body"><blockquote>
<p>Hopefully fixed in v0.2.1?</p>
</blockquote>
<p>yes, confirmed dual platform build on linux x86_64</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-22 20:47</div>
            <div class="timeline-body"><p>Thank you.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:31:13 UTC
    </footer>
</body>
</html>
