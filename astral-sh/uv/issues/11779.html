<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv run uses older version of dependency even after upgrading - astral-sh/uv #11779</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv run uses older version of dependency even after upgrading</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11779">#11779</a>
        opened by <a href="https://github.com/pchalasani">@pchalasani</a>
        on 2025-02-25 16:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/pchalasani">@pchalasani</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>I'm seeing some odd behavior and not sure if it's a bug or my ignorance:</p>
<p>Say my project uses some lib <code>blah &gt;= 0.1.3</code> as a dependency in <code>pyproject.toml</code></p>
<p>Then I upgrade all dependencies using the following
(which by the way I found after <em>a lot of trial and error</em> since it was not clear in the docs how
to use uv to upgrade all dependencies to their latest available versions consistent with the
constraints in <code>pyproject.toml</code>):</p>
<pre><code class="language-bash">uv pip install -r pyproject.toml --upgrade
</code></pre>
<p>This updates <code>blah</code> to 0.1.6, so when I run my script:</p>
<pre><code class="language-bash">uv run scripts/main.py
</code></pre>
<p>I expect it to use <code>blah 0.1.6</code>, but this <code>uv run</code> re-installs the <strong>older</strong> version of blah, like 0.1.3, before running the script.</p>
<p>I know I can simply do <code>python run scripts/main.py</code> -- but I thought <code>uv run</code> would do the same.</p>
<h3>Platform</h3>
<p>MacOS arm</p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @pchalasani on 2025-02-25 16:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-25 16:39</div>
            <div class="timeline-body"><p>You probably don't want to be using <code>uv pip install</code> alongside <code>uv run</code>. <code>uv pip install</code> won't affect the lockfile, so <code>uv run</code> will then re-sync your project with the locked constraints. (You generally want to use the <code>uv pip</code> APIs <em>or</em> <code>uv run</code> / <code>uv lock</code> / <code>uv sync</code>, but not both together.) I'd suggest <code>uv sync --upgrade</code> instead of <code>uv pip install -r pyproject.toml --upgrade</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pchalasani">@pchalasani</a> on 2025-02-25 17:02</div>
            <div class="timeline-body"><blockquote>
<p>I'd suggest <code>uv sync --upgrade</code> instead of <code>uv pip install -r pyproject.toml --upgrade</code>.</p>
</blockquote>
<p>Ah I see where I went wrong, thanks for clearing that up!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pchalasani on 2025-02-25 17:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:30:07 UTC
    </footer>
</body>
</html>
