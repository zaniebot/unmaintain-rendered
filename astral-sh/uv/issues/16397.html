<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>transformers ImportError when package was installed with uv - astral-sh/uv #16397</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>transformers ImportError when package was installed with uv</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/16397">#16397</a>
        opened by <a href="https://github.com/MikolajTym">@MikolajTym</a>
        on 2025-10-21 18:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MikolajTym">@MikolajTym</a> on 2025-10-21 18:10</div>
            <div class="timeline-body"><h3>Summary</h3>
<h1>Problem description</h1>
<p>I cannot import the <code>AutoTokenizer</code> transformers class when venv was created by the uv.
I have installed the transformers with <code>uv add transformers[torch]</code>. Then when I am trying to import the <code>AutoTokenizer</code> (<code>from transformers import AutoTokenizer</code>), I am encountering an ImportError. The same steps work fine when using a standard venv created with <code>python -m venv</code> and installing with pip.</p>
<p>There is issue related to this problem within the transformers GitHub repository (https://github.com/huggingface/transformers/issues/38442). Some answers point that the problem may be caused by the env reasons. As the installation and import using regular python venv works, it can be somehow related to the uv.</p>
<h1>Reproduction of the problem</h1>
<h2>Installation with uv</h2>
<pre><code class="language-cmd">mkdir import_error_uv &amp;&amp; cd import_error_uv &amp;&amp; uv venv --python 3.12.6 &amp;&amp; uv init &amp;&amp; uv add transformers[torch] &amp;&amp; .venv\Scripts\activate &amp;&amp; uv run python -c &quot;from transformers import AutoTokenizer&quot;
</code></pre>
<p>Execution of these command results in:
<code>ImportError: cannot import name 'GenerationMixin' from 'transformers.generation' (C:\Projects\import_error_uv\.venv\Lib\site-packages\transformers\generation\__init__.py). Did you mean: 'GenerationMode'?</code></p>
<p>The result of the <code>uv pip freeze</code>:</p>
<pre><code>accelerate==1.11.0
certifi==2025.10.5
charset-normalizer==3.4.4
colorama==0.4.6
filelock==3.20.0
fsspec==2025.9.0
huggingface-hub==0.35.3
idna==3.11
jinja2==3.1.6
markupsafe==3.0.3
mpmath==1.3.0
networkx==3.5
numpy==2.3.4
packaging==25.0
psutil==7.1.1
pyyaml==6.0.3
regex==2025.10.23
requests==2.32.5
safetensors==0.6.2
setuptools==80.9.0
sympy==1.14.0
tokenizers==0.22.1
torch==2.9.0
tqdm==4.67.1
transformers==4.57.1
typing-extensions==4.15.0
urllib3==2.5.0
</code></pre>
<h2>Installation with regular venv (import works)</h2>
<pre><code class="language-cmd">mkdir import_error_python &amp;&amp; cd import_error_python &amp;&amp; python -m venv .venv &amp;&amp; .venv\Scripts\activate &amp;&amp; pip install transformers[torch] &amp;&amp; python -c &quot;from transformers import AutoTokenizer&quot;
</code></pre>
<p>The result of the <code>pip freeze</code> which is identical to the <code>uv pip freeze</code> regardless of case sensitivity:</p>
<pre><code>accelerate==1.11.0
certifi==2025.10.5
charset-normalizer==3.4.4
colorama==0.4.6
filelock==3.20.0
fsspec==2025.9.0
huggingface-hub==0.35.3
idna==3.11
Jinja2==3.1.6
MarkupSafe==3.0.3
mpmath==1.3.0
networkx==3.5
numpy==2.3.4
packaging==25.0
psutil==7.1.1
PyYAML==6.0.3
regex==2025.10.23
requests==2.32.5
safetensors==0.6.2
setuptools==80.9.0
sympy==1.14.0
tokenizers==0.22.1
torch==2.9.0
tqdm==4.67.1
transformers==4.57.1
typing_extensions==4.15.0
urllib3==2.5.0
</code></pre>
<p>I'm not sure whether the uv is the error reason, however the import works when I'm using the pip.
Moreover the same uv commands work perfectly for WSL, so the problem may be related to the Windows.</p>
<h3>Platform</h3>
<p>Windows 11 x86_64</p>
<h3>Version</h3>
<p>uv 0.9.3 (83635a6c4 2025-10-15)</p>
<h3>Python version</h3>
<p>3.12.6</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MikolajTym on 2025-10-21 18:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnnynunez">@johnnynunez</a> on 2025-10-22 05:54</div>
            <div class="timeline-body"><p>same happens to me</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by @konstin on 2025-10-22 08:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @konstin on 2025-10-22 08:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-10-22 08:14</div>
            <div class="timeline-body"><p>Thanks for the clear reproduction, I tried it on a relative pristine Windows 11 VM and could not reproduce the error.</p>
<p>Could you try <code>uv cache clean</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MikolajTym">@MikolajTym</a> on 2025-10-22 09:54</div>
            <div class="timeline-body"><blockquote>
<p>Thanks for the clear reproduction, I tried it on a relative pristine Windows 11 VM and could not reproduce the error.</p>
<p>Could you try <code>uv cache clean</code>?</p>
</blockquote>
<p>Thank you! The uv cache was the reason, after cache cleaning, the import works fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @konstin on 2025-10-22 10:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> removed by @konstin on 2025-10-22 10:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> removed by @konstin on 2025-10-22 10:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @konstin on 2025-10-22 10:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-10-28 23:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:05 UTC
    </footer>
</body>
</html>
