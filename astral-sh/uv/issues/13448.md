```yaml
number: 13448
title: "No solution found when resolving dependencies for split (sys_platform != 'linux')"
type: issue
state: closed
author: menouarazib
labels:
  - question
assignees: []
created_at: 2025-05-14T10:56:06Z
updated_at: 2025-05-14T18:41:50Z
url: https://github.com/astral-sh/uv/issues/13448
synced_at: 2026-01-10T01:57:30Z
```

# No solution found when resolving dependencies for split (sys_platform != 'linux')

---

_Issue opened by @menouarazib on 2025-05-14 10:56_

### Summary

When I'm combining the local index and the remote one, on a Linux machine, uv is looking for sys_platform != 'linux'.

My pyproject.toml:
```
[project]
dependencies = [
    "abc"
]

[tool.uv.sources]
abc = [
    { index = "index", marker = "sys_platform == 'linux'" },
    { index = "local", marker = "sys_platform != 'linux'" }
]

[[tool.uv.index]]
name = "index"
url = "https://index.com"

[[tool.uv.index]]
name = "local"
url = "./lib/"
format = "flat"
```

### Platform

Linux

### Version

uv 0.6.14 

### Python version

Python 3.11, 3.12

---

_Label `bug` added by @menouarazib on 2025-05-14 10:56_

---

_Comment by @charliermarsh on 2025-05-14 11:51_

We need a complete reproduction in order to help out here. What‚Äôs the error, exactly? Note that uv performs a global resolution for all environments, so if your dependencies reference a directory like that, it does need to be available on all machines so that we can create a lockfile. If you already have a lockfile and are just looking to install from it without resolving, use the frozen flag, which would remove the need to include the local directory on your Linux machine.

---

_Label `bug` removed by @charliermarsh on 2025-05-14 11:51_

---

_Label `question` added by @charliermarsh on 2025-05-14 11:51_

---

_Comment by @menouarazib on 2025-05-14 14:47_

Thanks for your response. Here is a concrete example: by using the `pyproject.toml` below and running `uv sync` on a Windows machine, I got this error:

## Error
```
error: Failed to read `--find-links` directory: C:\Users\..\PycharmProjects\UvLocalIndex\lib
 Caused by: The system cannot find the path specified. (os error 3)
```

## pyproject.toml
```
[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "uvlocalindex"
dynamic = ["version"]
requires-python = ">=3.11, !=3.12.0"
dependencies = [
    "numpy"
]

[tool.uv.sources]
numpy = [
    { index = "pypi", marker = "sys_platform == 'win32'" },
    { index = "local", marker = "sys_platform == 'linux'" },
]

[[tool.uv.index]]
name = "pypi"
url = "https://pypi.org/simple"

[[tool.uv.index]]
name = "local"
url = "./lib/"
format = "flat"

[tool.hatch.version]
path = "UvLocalIndex/__version__.py"

[tool.uv]
native-tls = true
allow-insecure-host = ["https://pypi.org/simple"]
link-mode = "copy"
```

## Bug
It is true that the `lib` folder does not exist in `UvLocalIndex` in Windows machine, but I specified to use this folder only for Linux machine.



---

_Comment by @zanieb on 2025-05-14 14:56_

We require all sources to exist at resolution time, regardless of the target platform. As Charlie said, we perform a [platform-independent resolution](https://docs.astral.sh/uv/concepts/resolution/#universal-resolution). The platform markers only affect which packages are _installed_.

---

_Comment by @charliermarsh on 2025-05-14 18:41_

üëç This is working as intended! Try `uv sync --frozen` if you want to install-without-resolving from an existing lockfile.

---

_Closed by @charliermarsh on 2025-05-14 18:41_

---

_Referenced in [astral-sh/uv#13487](../../astral-sh/uv/issues/13487.md) on 2025-05-16 11:28_

---
