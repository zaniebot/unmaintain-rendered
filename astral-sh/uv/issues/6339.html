<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv seems not to respect custom virtual env when installing a dependency - astral-sh/uv #6339</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv seems not to respect custom virtual env when installing a dependency</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/6339">#6339</a>
        opened by <a href="https://github.com/FilipLangr">@FilipLangr</a>
        on 2024-08-21 15:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/FilipLangr">@FilipLangr</a> on 2024-08-21 15:10</div>
            <div class="timeline-body"><p>It seems like <code>uv</code> does not respect custom virtual env.</p>
<p>my <code>uv</code> version is <code>0.3.0</code> running on Ubuntu 24.04</p>
<p>code to reproduce:</p>
<pre><code class="language-bash">mkdir project_test
cd project_test
uv init
uv venv custom # creates ./custom folder
source custom/bin/activate
echo $VIRTUAL_ENV # prints the path to ./custom folder
uv add numpy --verbose
</code></pre>
<p>the last command prints (among others):</p>
<pre><code>DEBUG Ignoring Python interpreter at `/.../project_test/custom/bin/python3`: system interpreter required
</code></pre>
<p>which I don't really understand why. It also creates a new virtualenv <code>.venv</code>, where it installs numpy. However, I would expect it to install it to <code>custom</code>. Is this a bug or feature? If feature, how to come around it and make <code>uv</code> to use <code>custom</code> venv? Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-21 15:12</div>
            <div class="timeline-body"><p>Hi!</p>
<p>Thanks for the nice reproduction. We don't support reading <code>VIRTUAL_ENV</code> in the project APIs. See https://github.com/astral-sh/uv/issues/5229 for the feature request.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @zanieb on 2024-08-21 15:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FilipLangr">@FilipLangr</a> on 2024-08-21 15:16</div>
            <div class="timeline-body"><blockquote>
<p>Hi!</p>
<p>Thanks for the nice reproduction. We don't support reading <code>VIRTUAL_ENV</code> in the project APIs. See #5229 for the feature request.</p>
</blockquote>
<p>Ah my bad, didn't notice that one. Thank you for such a swift response!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @FilipLangr on 2024-08-21 15:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-08-21 15:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-21 15:17</div>
            <div class="timeline-body"><p>You're welcome!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/caastrill">@caastrill</a> on 2024-11-25 18:40</div>
            <div class="timeline-body"><p>was this ever resolved facing this same issue today as highlighted by <a href="https://github.com/FilipLangr">FilipLangr</a> on opening this thread.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-25 18:46</div>
            <div class="timeline-body"><p>There is extensive discussion on the linked issue.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:59 UTC
    </footer>
</body>
</html>
