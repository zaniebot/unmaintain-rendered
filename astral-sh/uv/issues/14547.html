<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv` installer (https://astral.sh/uv/install.sh) creating `.zshrc` even in bash - astral-sh/uv #14547</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv` installer (https://astral.sh/uv/install.sh) creating `.zshrc` even in bash</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/14547">#14547</a>
        opened by <a href="https://github.com/alichaudry">@alichaudry</a>
        on 2025-07-10 17:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/alichaudry">@alichaudry</a> on 2025-07-10 17:34</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I installed <code>uv</code> in a bash shell running in Ubuntu on Windows 11 (WSL2) a few weeks ago, and I just noticed that the installer had also created a <code>.zshrc</code> file. This is surely a bug, right? As I wouldn't expect the installer to create a <code>.zshrc</code> file in bash (and vice versa, a <code>.bashrc</code> in zsh).</p>
<p>These are the contents of the files:</p>
<pre><code class="language-shell">❯ cat ~/.zshrc
. &quot;$HOME/.local/bin/env&quot;
</code></pre>
<pre><code class="language-shell">❯ ls ~/.local/bin/
env  env.fish  uv  uvx
</code></pre>
<pre><code class="language-shell">❯ cat ~/.local/bin/env
#!/bin/sh
# add binaries to PATH if they aren't added yet
# affix colons on either side of $PATH to simplify matching
case &quot;:${PATH}:&quot; in
    *:&quot;$HOME/.local/bin&quot;:*)
        ;;
    *)
        # Prepending path in case a system-installed binary needs to be overridden
        export PATH=&quot;$HOME/.local/bin:$PATH&quot;
        ;;
esac
</code></pre>
<p>It also looks like <code>env</code> and <code>env.fish</code> (presumably for fish shell?) were installed in addition to <code>uv</code> and <code>uvx</code>.</p>
<ol>
<li>I did search documentation and found <a href="https://github.com/astral-sh/uv/issues/10413">at least one issue</a> that touches on a similar topic, but my concern here is not that it modified the <code>.bashrc</code>, but that it also created a <code>.zshrc</code>. My <code>.bashrc</code> was also appended with <code>. &quot;$HOME/.local/bin/env&quot;</code>.</li>
<li>For changes made by the <code>uv</code> installer, it would be nice to add a comment saying what added the <code>. &quot;$HOME/.local/bin/env&quot;</code> and when, like:</li>
</ol>
<pre><code class="language-shell"># added by https://astral.sh/uv/install.sh on 6/12/2025
. &quot;$HOME/.local/bin/env&quot;
</code></pre>
<p>Other than that, thank you for creating an incredible product. It's actually re-energized my interest in python as I no longer have to fiddle with a mix of pip-tools and conda for my use cases.</p>
<h3>Platform</h3>
<p>Linux 6.6.87.2-microsoft-standard-WSL2 x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.7.18</p>
<h3>Python version</h3>
<p>Python 3.13.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @alichaudry on 2025-07-10 17:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-10 17:57</div>
            <div class="timeline-body"><p>I think it adds a shell hook for all known shells, because detecting the relevant subset is hard? This behavior is currently implemented via https://github.com/axodotdev/cargo-dist</p>
<p>cc @Gankra</p>
<p>Thanks for the kind words!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alichaudry">@alichaudry</a> on 2025-07-10 20:16</div>
            <div class="timeline-body"><p>Ah okay, that makes sense! Do you think there's a possibility to use something like <a href="https://github.com/Homebrew/brew/blob/main/Library/Homebrew/cmd/shellenv.sh">what <code>brew</code> does</a> to figure out the active shell? Not sure if it would work in all scenarios; even for me <code>echo &quot;$(/bin/ps -p &quot;${PPID}&quot; -c -o comm=)&quot;</code> is not saying <code>bash</code> but <code>Relay(360)</code> instead (I'm guessing this is a WSL2 process, but technically the way the script is written, the catch-all <code>case</code> would still do the right thing for <code>bash</code> but perhaps not for <code>zsh</code>).</p>
<p>But maybe it works well-enough in a majority of cases that in the typical scenario we don't have to create all the extra files for the unrecognized shells, and only as a backup/catch-all we can do the current default?</p>
<p>And as a side-note, it would still be great to add a date/timestamp + authorship message from uv as a comment above the uv-inserted lines in system/user configuration files.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:04 UTC
    </footer>
</body>
</html>
