<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature Request: Enable shared caching or linking for heavy binary wheels like jaxlib across projects - astral-sh/uv #13609</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Feature Request: Enable shared caching or linking for heavy binary wheels like jaxlib across projects</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/13609">#13609</a>
        opened by <a href="https://github.com/mav3ri3k">@mav3ri3k</a>
        on 2025-05-23 02:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mav3ri3k">@mav3ri3k</a> on 2025-05-23 02:47</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I'm using <code>uv</code> across multiple Python projects (especially for JAX-related experiments), and I noticed that every time I create a new virtual environment, <code>uv</code> reinstalls large binary wheels like <code>jaxlib</code> from scratch. These wheels (e.g., <code>jaxlib</code>, <code>torch</code>, <code>tensorflow</code>, etc.) can be several hundred megabytes in size ‚Äî resulting in gigabytes of redundant storage across <code>.venv</code> folders.</p>
<p>In my case, <code>jaxlib</code> + <code>xla_extension.so</code> alone account for 400MB+, and I have several near-identical <code>.venv/</code> directories across sibling projects. This adds up quickly.</p>
<h3>Example</h3>
<h3>Expected Behavior</h3>
<p>A way to:</p>
<ul>
<li>Share or symlink installed binary wheels across environments</li>
<li>Optionally create venvs that <strong>reuse a shared store</strong> of heavy native extensions</li>
</ul>
<p>This could be similar to:</p>
<ul>
<li><code>pnpm</code>'s node_modules symlinking strategy</li>
</ul>
<h3>Possible Solutions</h3>
<ul>
<li>Add a <code>--shared-site-packages</code> or <code>--symlink-packages</code> flag</li>
</ul>
<h3>Why this matters</h3>
<ul>
<li>Significant <strong>disk space savings</strong> for users working with large Python libraries</li>
</ul>
<h3>Environment</h3>
<ul>
<li><code>uv</code> version: 0.4.25 (97eb6ab4a 2024-10-21)</li>
<li>OS: macOS</li>
<li>Python version: 3.10</li>
<li>Project types: ML/Scientific computing (JAX, torch, etc.)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @mav3ri3k on 2025-05-23 02:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by @konstin on 2025-05-23 08:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @konstin on 2025-05-23 08:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-23 08:20</div>
            <div class="timeline-body"><p>On macOS, uv uses reflinks (via clonefile), so the copies are virtual and shared across all venv created from the cache.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Scxw010516">@Scxw010516</a> on 2025-05-23 18:54</div>
            <div class="timeline-body"><blockquote>
<p>On macOS, uv uses reflinks (via clonefile), so the copies are virtual and shared across all venv created from the cache</p>
</blockquote>
<p>What is the behavior like on Windows? Will it create a complete new copy? Or can it be reused through links?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-23 19:04</div>
            <div class="timeline-body"><p>This is documented under https://docs.astral.sh/uv/reference/cli/#uv-sync--link-mode</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Scxw010516">@Scxw010516</a> on 2025-05-23 19:27</div>
            <div class="timeline-body"><blockquote>
<p>This is documented under https://docs.astral.sh/uv/reference/cli/#uv-sync--link-mode</p>
</blockquote>
<p>Thanks for your reply. Does this mean that when I install packages in any project, it will first look for them in the global cache? If the package already exists in the .venv of another project, it will create a hardlink?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-23 19:32</div>
            <div class="timeline-body"><p>yes, uv always goes through the cache when installing packages, so a package is added to the cache once and then reuse through linking.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Scxw010516">@Scxw010516</a> on 2025-05-23 19:41</div>
            <div class="timeline-body"><blockquote>
<p>yes, uv always goes through the cache when installing packages, so a package is added to the cache once and then reuse through linking.</p>
</blockquote>
<p>Even if I use different versions of Python in different virtual environments from different Conda env, is it still the case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-23 19:48</div>
            <div class="timeline-body"><p>We don't make any specific guarantees for how the caching behaves, but I can say that uv is optimized for cache reuse and that the wheel caching is based on the specific wheel that gets installed, not on the target environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Scxw010516">@Scxw010516</a> on 2025-05-23 19:52</div>
            <div class="timeline-body"><blockquote>
<p>We don't make any specific guarantees for how the caching behaves, but I can say that uv is optimized for cache reuse and that the wheel caching is based on the specific wheel that gets installed, not on the target environment.</p>
</blockquote>
<p>Thanks for your great work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mav3ri3k">@mav3ri3k</a> on 2025-05-24 10:14</div>
            <div class="timeline-body"><blockquote>
<p>This is documented under https://docs.astral.sh/uv/reference/cli/#uv-sync--link-mode</p>
</blockquote>
<p>Thanks. <code>clone</code> and <code>hardlink</code> were copying the entire thing, maybe my file system does not support those. <code>symlink</code> did work, and I have made it my default.
Hopefully uv can auto-magically decide the most efficient option.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @mav3ri3k on 2025-05-24 10:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-24 11:21</div>
            <div class="timeline-body"><p>How are you verifying that they were copying the entire file? I think that's very unlikely -- they might show up with <code>du -h</code> or similar because those commands aren't aware of hardlink sharing, but I'd <strong>strongly</strong> recommend sticking with hardlinks or copy-on-write links over symlinks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mav3ri3k">@mav3ri3k</a> on 2025-05-24 12:40</div>
            <div class="timeline-body"><p>You are spot on. I was using <code>dust</code>, but results were same with <code>du</code> too. Thanks for the recommendation, I'll take your word for it and use the default - clone. Thanks! üëç</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:04 UTC
    </footer>
</body>
</html>
