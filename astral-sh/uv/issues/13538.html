<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using uv run somefile.py and python somefile.py behave differently - astral-sh/uv #13538</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Using uv run somefile.py and python somefile.py behave differently</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13538">#13538</a>
        opened by <a href="https://github.com/DigitalMechanic">@DigitalMechanic</a>
        on 2025-05-19 14:32
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/DigitalMechanic">@DigitalMechanic</a></div>
            <div class="timeline-body">Question
<p>Not sure why uv isn&#x27;t picking up the yaml import but running direct with python has no problem.</p>
<p>PS F:\project_dev\cb&gt; python main.py
PS F:\project_dev\cb&gt; uv run main.py
Traceback (most recent call last):
File &quot;F:\project_dev\cb\main.py&quot;, line 1, in 
from plc_driver import PlcDriver as pd
File &quot;F:\project_dev\cb\plc_driver__init__.py&quot;, line 1, in 
from .plc_driver import PlcDriver
File &quot;F:\project_dev\cb\plc_driver\plc_driver.py&quot;, line 3, in 
from cb_tools import CbTools
File &quot;F:\project_dev\cb\cb_tools__init__.py&quot;, line 1, in 
from .cb_tools import CbTools
File &quot;F:\project_dev\cb\cb_tools\cb_tools.py&quot;, line 2, in 
import yaml
ModuleNotFoundError: No module named &#x27;yaml&#x27;</p>
<p>The yaml package is definitely there... also ruff check shows no issues.</p>
<p>Thanks in advance!
-DigitalMechanic</p>
Platform
<p>Windows 11/Python 3.13</p>
Version
<p>uv 0.7.4 (6fbcd09b5 2025-05-15)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/DigitalMechanic">@DigitalMechanic</a> on 2025-05-19 14:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-19 15:42</div>
            <div class="timeline-body"><p><code>uv run</code> uses the dependencies declared in <code>pyproject.toml</code> or in the inline script metadata - did you declare a dependency on the package providing <code>yaml</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2025-05-19 15:50</div>
            <div class="timeline-body"><p>Oh, right. It looks like you haven&#x27;t activated a virtual environment, so I&#x27;m guessing you&#x27;re using the global Python installation. That on Windows, if Python isn&#x27;t installed , the <code>python</code> command often just triggers the Microsoft Store link for Python, and trying to run your code like that won&#x27;t give you any output either.</p>
<p>Based on the information you&#x27;ve provided, this can&#x27;t be avoided, so I&#x27;d like to add something.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DigitalMechanic">@DigitalMechanic</a> on 2025-05-20 11:33</div>
            <div class="timeline-body"><p>Thanks FishAlchemist... I have tried that. When I do a &#x27;uv add yaml&#x27; i t fails with:
<code>Creating virtual environment at: .venv   x No solution found when resolving dependencies:   </code>-&gt; Because there are no versions of yaml and your project depends on yaml, we can conclude that your project&#x27;s
requirements are unsatisfiable.`</p>
<p>trying to add yaml to the pyptoject.toml with the --frozen option succeeds and adds a yaml item in the dependencies section, but it won&#x27;t run and complains yaml doesn&#x27;t exist. I don&#x27;t get it because my python environment works for everything else I write, and runs fine regardless of running in venv or not.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-20 11:34</div>
            <div class="timeline-body"><p>You might be looking for <code>uv add pyyaml</code>? <code>yaml</code> is not a package on PyPI: https://pypi.org/project/yaml/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DigitalMechanic">@DigitalMechanic</a> on 2025-05-20 11:45</div>
            <div class="timeline-body"><p>Okay @charliermarsh, that actually works! However, I&#x27;m really unclear as to why yaml and pyyaml are different in uv. I&#x27;m doing an &#x27;import yaml&#x27; (which has always worked outside uv). I&#x27;ve never used pyyaml, always just yaml.
Regardless, I have deliverables for a client that need to get done... although I&#x27;m really uncomfortable not knowing where my dependencies are being satisfied - guess I&#x27;ll have the rtfm on pyyaml... personally, I think this may be an env bug in uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DigitalMechanic">@DigitalMechanic</a> on 2025-05-20 11:51</div>
            <div class="timeline-body"><blockquote>
<p>Oh, right. It looks like you haven&#x27;t activated a virtual environment, so I&#x27;m guessing you&#x27;re using the global Python installation. That on Windows, if Python isn&#x27;t installed , the <code>python</code> command often just triggers the Microsoft Store link for Python, and trying to run your code like that won&#x27;t give you any output either.</p>
<p>Based on the information you&#x27;ve provided, this can&#x27;t be avoided, so I&#x27;d like to add something.</p>
</blockquote>
<p>I have permanently disabled and deleted all access to the MS Store... so that&#x27;s never going to happen. I have multiple dev platforms including several flavors of linux - it just so happens one of my client&#x27;s requirements is this project run on Windows 11.  I just starting using uv, and for the most part it&#x27;s been really helpful except for this tiny snag of not recognizing and standard library like yaml.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-20 13:16</div>
            <div class="timeline-body"><blockquote>
<p>Okay @charliermarsh, that actually works! However, I&#x27;m really unclear as to why yaml and pyyaml are different in uv. I&#x27;m doing an &#x27;import yaml&#x27; (which has always worked outside uv). I&#x27;ve never used pyyaml, always just yaml.</p>
</blockquote>
<p>This is normal and expected. The package name on PyPI and the <em>module name</em> that you import don&#x27;t have to be the same. If you&#x27;ve used <code>import yaml</code> in the past, it&#x27;s almost certainly the same as <code>pyyaml</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-20 13:17</div>
            <div class="timeline-body"><p>In other words, they ship the package under the PyPI name <code>pyyaml</code>, but the source code ships the module <code>yaml</code> and expects you to do <code>import yaml</code>: https://pyyaml.org/wiki/PyYAMLDocumentation.</p>
<p>You can see the same pattern with packages like <a href="https://pypi.org/project/scikit-learn/">scikit-learn</a>, where you <code>import sklearn</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-20 13:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DigitalMechanic">@DigitalMechanic</a> on 2025-05-20 13:30</div>
            <div class="timeline-body"><p>Thanks @charliermarsh ! I understand now...</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:38:42 UTC
    </footer>
</body>
</html>
