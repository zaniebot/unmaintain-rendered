<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transfering requirements from pyproject.toml to script drops index - astral-sh/uv #11053</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Transfering requirements from pyproject.toml to script drops index</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/11053">#11053</a>
        opened by <a href="https://github.com/BenediktMaag">@BenediktMaag</a>
        on 2025-01-29 08:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/BenediktMaag">@BenediktMaag</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Use case: I have a folder where i write and keep my script relevant to a certain project / dependency setup which references a local index. I want to share a script with a colleague for him to reproduce but I want to share only one necessary file and not a full folder with all the other files he doesnt need.</p>
<p>Setup of the folder:</p>
<blockquote>
<p>uv init <folder-name>
cd <folder-name>
uv add <mydependency> --index internal=<path-to-index></p>
</blockquote>
<p>Before sending him the script, I need to copy the dependencies into the script. There are two possible ways i would solve this, both not working as expected:</p>
<p>❯ : uv add --script <script-name>.py -r pyproject.toml
error: Adding requirements from a <code>pyproject.toml</code> is not supported in <code>uv add</code></p>
<p>❯ : uv export | uv add --script <script-name>.py -r -
Resolved 3 packages in 194ms
Updated <code>&lt;script-name&gt;.py</code></p>
<p>uv export creates an requirements-txt format which does not include the index nor the linking of the dependency to this index.
When running the script with uv run without it being located in this project folder it will not be able to resolve the dependency as it is missing the index information.</p>
<h3>Platform</h3>
<p>Windows 11 x86_64</p>
<h3>Version</h3>
<p>uv 0.5.24 (42fae925c 2025-01-23)</p>
<h3>Python version</h3>
<p>Python 3.12.5</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @BenediktMaag on 2025-01-29 08:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2025-01-29 13:53</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @charliermarsh on 2025-01-29 13:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-29 13:54</div>
            <div class="timeline-body"><p>It's intentional that <code>uv export</code> drops the index information. <code>requirements.txt</code> is much more restrictive, and we can't represent things like explicit or assigned indexes.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:29:36 UTC
    </footer>
</body>
</html>
