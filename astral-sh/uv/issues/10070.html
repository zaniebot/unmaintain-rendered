<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add an option to not create the activate* scripts in venvs - astral-sh/uv #10070</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Add an option to not create the activate* scripts in venvs</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/10070">#10070</a>
        opened by <a href="https://github.com/gdamjan">@gdamjan</a>
        on 2024-12-21 03:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/gdamjan">@gdamjan</a> on 2024-12-21 03:01</div>
            <div class="timeline-body"><p>Reason: appeal to authority :D
https://x.com/charliermarsh/status/1837538829579796751
https://x.com/mitsuhiko/status/1837539297622110422
… and there seems to be an agreeing sentiment.</p>
<p>I do think that activating venvs is a bad practice, and confusing too, so what I'd want to do to my personal projects is have a setting in [tool.uv] activate-scripts=true/false in <code>pyproject.toml</code> so that uv venv/sync doesn't create them, and I'd want to train my users to use <code>uv run</code>.</p>
<p>Additionally, I should be able to configure that in ~/.config/uv/uv.toml to force the default for projects that don't specify it in their own pyproject.toml.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add an option to not create the activate* scripts" to "Add an option to not create the activate* scripts in venvs" by @gdamjan on 2024-12-21 03:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-21 06:47</div>
            <div class="timeline-body"><p>Sort of compelling. I'm not sure it's a <em>project</em> setting, i.e., it seems more like a <em>user</em> setting? I'd be confused if some repository I cloned wouldn't let me activate the environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @zanieb on 2024-12-21 06:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nathanscain">@nathanscain</a> on 2024-12-21 07:16</div>
            <div class="timeline-body"><p>I like this personally. Took a look through the code and might try to work it in the morning (so long as my 9 month old doesn’t have other plans) Never written more than a small coding challenge in rust, but I’d permanently have this setting on so it feels like a nice quality of life bump which is good motivation to learn. If I do have the time, I’ll probably put up a draft pretty quickly in the morning to make sure I’m not entirely off base.</p>
<p>Does uv have a concept of settings that are global/user only but not local/project? An example doesn’t come to mind right now. Personally, there are quite a few options I’d find odd to be set at the project level that (as far as I can tell) uv would have no problem with you configuring in pyproject.toml. My thought would be to add an override flag to <code>uv venv</code> to flip the scripts back on if a dev really wanted them in a project that choose to disable them by default.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gdamjan">@gdamjan</a> on 2024-12-21 12:58</div>
            <div class="timeline-body"><blockquote>
<p>I'd be confused if some repository I cloned wouldn't let me activate the environment.</p>
</blockquote>
<p>yeah I know, I'd still want to enforce that to <strong>my</strong> users :D</p>
<p>but I'd be satisfied with just per-user setting.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/10083.html">astral-sh/uv#10083</a> on 2024-12-21 18:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nathanscain">@nathanscain</a> on 2024-12-21 19:18</div>
            <div class="timeline-body"><p>@zanieb Please let me know if I'm off base with the change in that PR. Like I said, first time in a large Rust project so I won't be offended if you tell me I broke something.</p>
<p>Looking at adding <code>activatable</code> (default true) to the installer options for the next step. Would that make sense to you?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nathanscain">@nathanscain</a> on 2024-12-27 00:19</div>
            <div class="timeline-body"><p>@zanieb @charliermarsh any chance one of y'all can take a look at this and let me know if I'm on the right track?</p>
<p>Draft PR is linked above and has further detail on it.</p>
<p>I haven't gone through developing the configuration option yet as that does seem like it will be a bigger ordeal and I wanted to make sure the first piece was viable. Also, I'm open to other names for the option if you'd prefer to avoid the <code>--not-</code> prefix. Could probably be <code>--activation-scripts/--no-activation-scripts</code> instead of <code>--activatable/--not-activatable</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-28 16:59</div>
            <div class="timeline-body"><p>@nathanscain yeah we'll look at it — most of us are on vacation this week.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:24 UTC
    </footer>
</body>
</html>
