<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Error with multiple requirements files, one containing an --extra-index-url - astral-sh/uv #2840</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Error with multiple requirements files, one containing an --extra-index-url</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2840">#2840</a>
        opened by <a href="https://github.com/davidhao3300">@davidhao3300</a>
        on 2024-04-05 19:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/davidhao3300">@davidhao3300</a> on 2024-04-05 19:15</div>
            <div class="timeline-body"><p>Consider the following contents:
req1.txt: <code>filelock==3.12.4</code>
req2.txt:</p>
<pre><code>--extra-index-url https://download.pytorch.org/whl/cpu

torch==2.0.1
</code></pre>
<p>Running <code>uv pip install -r req1.txt -r req2.txt</code> fails with</p>
<pre><code>  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of filelock==3.12.4 and you require filelock==3.12.4, we can conclude that the requirements are
      unsatisfiable.
</code></pre>
<p>It appears to be the --extra-index-url that causes issues, removing fixes the issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-05 19:16</div>
            <div class="timeline-body"><p>Thanks, explained in detail here including ways to fix it: https://github.com/astral-sh/uv/blob/main/PIP_COMPATIBILITY.md#packages-that-exist-on-multiple-indexes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davidhao3300">@davidhao3300</a> on 2024-04-05 19:19</div>
            <div class="timeline-body"><p>ah, thank you very much, thanks for the info. From reading this, it appears that we expect uv to first check the extra index, before falling back to the default index?</p>
<p>Does this mean the torch index contains filelock in it, but not the version we need?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davidhao3300">@davidhao3300</a> on 2024-04-05 19:20</div>
            <div class="timeline-body"><p>Appears to be the case - https://download.pytorch.org/whl/filelock/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-05 19:20</div>
            <div class="timeline-body"><p>That's correct -- the Torch index only contains 3.9.0: https://download.pytorch.org/whl/filelock/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-05 19:20</div>
            <div class="timeline-body"><p>You should be able to pass <code>--index-strategy unsafe-any-match</code> if you want to allow <code>uv</code> to look at versions across any index. Or you can use 3.9.0 :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davidhao3300">@davidhao3300</a> on 2024-04-05 19:21</div>
            <div class="timeline-body"><p>Okay! I think the workaround is sufficient, and swap over to https://github.com/astral-sh/uv/issues/171 when it's available, thank you for the incredibly fast response time!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @davidhao3300 on 2024-04-05 19:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:26 UTC
    </footer>
</body>
</html>
