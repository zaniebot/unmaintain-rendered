<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv init --script` doesn't respect an existing shebang - astral-sh/uv #14085</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv init --script` doesn't respect an existing shebang</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/14085">#14085</a>
        opened by <a href="https://github.com/oconnor663">@oconnor663</a>
        on 2025-06-16 19:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-06-16 19:17</div>
            <div class="timeline-body"><h3>Summary</h3>
<pre><code>$ cat myscript.py
#! /usr/bin/env python3

print(&quot;my existing script&quot;)

$ uv init --script myscript.py
Initialized script at `myscript.py`

$ cat myscript.py
# /// script
# requires-python = &quot;&gt;=3.13&quot;
# dependencies = []
# ///

#! /usr/bin/env python3

print(&quot;my existing script&quot;)
</code></pre>
<h3>Platform</h3>
<p>linux</p>
<h3>Version</h3>
<p>uv 0.7.13 (62ed17b23 2025-06-12)</p>
<h3>Python version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @oconnor663 on 2025-06-16 19:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-16 23:03</div>
            <div class="timeline-body"><p>This is pretty weird, e.g., <code>./myscript.py</code> would fail because <code>python myscript.py</code> doesn't read PEP 723 dependency metadata. I'm not sure we should allow this? It seems very hard to determine if the shebang will respect the dependency metadata nicely.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oconnor663">@oconnor663</a> on 2025-06-16 23:43</div>
            <div class="timeline-body"><p>The use case that led me to try this is that I had a script that expected its dependencies to &quot;just be there&quot;, either globally or in the active venv. Adding inline script metadata (below the shebang) means that the previous workflow still works, but <code>uv run myscript.py</code> also works if you want. Is that a weird adoption path?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-17 01:29</div>
            <div class="timeline-body"><p>I worry about confusion. We could warn? but we might have false positives? Anyway, seems more correct to respect it than not. We can open something else to track warning when shebangs are present.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/14141.html">astral-sh/uv#14141</a> on 2025-06-18 22:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @oconnor663 on 2025-06-19 21:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:04 UTC
    </footer>
</body>
</html>
