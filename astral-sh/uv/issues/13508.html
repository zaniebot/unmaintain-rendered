<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>installing a workspace with workspace dependency groups - astral-sh/uv #13508</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>installing a workspace with workspace dependency groups</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13508">#13508</a>
        opened by <a href="https://github.com/kapilt">@kapilt</a>
        on 2025-05-17 15:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kapilt">@kapilt</a> on 2025-05-17 15:31</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I'm trying to use a workspace to install a set of packages for the purpose of running ci/unittests, but It doesn't seem like we can install dependency groups like dev for the workspace dependencies, when doing so, because that only applies to the workspace, not to its transitive dependencies that are in the workspace.</p>
<p>is there a way to specify that we want optional dependency groups when a dependency via a workspace installing?</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p>uv 0.7.3 (Homebrew 2025-05-07)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @kapilt on 2025-05-17 15:31</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "installing a workspace with workspace groups" to "installing a workspace with workspace dependency groups" by @kapilt on 2025-05-17 15:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kapilt">@kapilt</a> on 2025-05-17 15:37</div>
            <div class="timeline-body"><p>if its helpful here is the workspace definition I'm using basically its a virtual workspace
https://github.com/cloud-custodian/cloud-custodian/pull/10140/files#diff-953ec993435fd232c21d7c3ee0204c12a1a877c64dde528a1d07f30163aa5674</p>
<pre><code>layout
   /top_level_package (c7n, part of workspace)
      /workspace ( virtual workspace with dependencies on all workspace packages)
      /tools
        /c7n_gcp (add-on package for c7n, part of workspace)
</code></pre>
<p>all the packages define dev dependency groups that need to be installed for ci to run, trying to understand how to make this work with uv. it seems uv sync is optionated to automatically remove packages in the virtualenv that are not related to the current package's sync operation, so we need someway to encapsulate installing all packages and their dev group dependencies to be able to run ci from a top level command (makefile target ~ make test)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../cloud-custodian/cloud-custodian/pulls/10140.html">cloud-custodian/cloud-custodian#10140</a> on 2025-05-17 15:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kapilt">@kapilt</a> on 2025-05-18 13:02</div>
            <div class="timeline-body"><p>using --all-packages and --group dev seems to do the right thing (tm) ;-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kapilt on 2025-05-18 13:02</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:06 UTC
    </footer>
</body>
</html>
