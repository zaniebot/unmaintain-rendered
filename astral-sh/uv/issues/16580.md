```yaml
number: 16580
title: Centralize common python deps to save storage
type: issue
state: closed
author: user1823
labels:
  - question
assignees: []
created_at: 2025-11-03T14:46:46Z
updated_at: 2025-11-03T16:59:27Z
url: https://github.com/astral-sh/uv/issues/16580
synced_at: 2026-01-10T01:57:36Z
```

# Centralize common python deps to save storage

---

_Issue opened by @user1823 on 2025-11-03 14:46_

### Summary

Currently, uv saves all the dependencies of the project into the venv folder. However, many dependencies (e.g. pyqt, numpy, scipy) are so common that they are used by many projects. As a result, I end up having multiple copies of the same dependency in multiple venvs, causing large storage consumption.

So, just like uv uses the same Python interpreter to run all these projects, it can also store some of these deps in a central location and create symlinks in the venv folder.

For example, apt and brew can install some of these deps system-wide so that all projects can share them.
apt:
```
python3-numpy
python3-scipy
```

Homebrew:
```
numpy
scipy
```

Just to note, when I read "Disk-space efficient, with a global cache for dependency deduplication." in the highlights section of uv's README, I really expected uv to do what I requested above.

### Example

_No response_

---

_Label `enhancement` added by @user1823 on 2025-11-03 14:46_

---

_Comment by @charliermarsh on 2025-11-03 16:33_

> So, just like uv uses the same Python interpreter to run all these projects, it can also store some of these deps in a central location and create symlinks in the venv folder.

We actually do this already. We download your dependencies once, then use hardlinks or copy-on-write (reflinks) to install them into your various virtual environments. It might "look like" we're installing multiple copies if you use `du` or similar, but they're backed by the same contents on-disk.

---

_Label `enhancement` removed by @charliermarsh on 2025-11-03 16:33_

---

_Label `question` added by @charliermarsh on 2025-11-03 16:33_

---

_Comment by @user1823 on 2025-11-03 16:55_

> It might "look like" we're installing multiple copies if you use du or similar, but they're backed by the same contents on-disk.

That was interesting to know. Can you suggest something other than du so that I can verify this on my own?

Edit:
I think that this verifies your statement.

The size reported by `du -sh ~/.cache/uv` is only slightly larger than that reported by `du -sh ~/.cache/uv/archive-v0` and much lesser than the sum of `du -sh ~/.cache/uv/archive-v0` and `du -sh ~/.cache/uv/environments-v2`

---

_Closed by @user1823 on 2025-11-03 16:59_

---
