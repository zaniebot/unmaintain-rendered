<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>String interpolation bug in uv-managed python3.12 - astral-sh/uv #16195</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>String interpolation bug in uv-managed python3.12</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/16195">#16195</a>
        opened by <a href="https://github.com/masalim2">@masalim2</a>
        on 2025-10-08 20:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/masalim2">@masalim2</a> on 2025-10-08 20:56</div>
            <div class="timeline-body"><h3>Summary</h3>
<ul>
<li>I am using uv 0.6.2 in a Ubuntu 23.04 VM (emulated x86_64 via <a href="https://orbstack.dev/">Orbstack</a> hosted on an M1 Mac)</li>
<li><code>uv python list</code> shows an installation at <code>.local/share/uv/python/cpython-3.12.9-linux-x86_64-gnu/bin/python3.12</code>.</li>
</ul>
<p>I observe a really strange behavior when attempting to string interpolate a float with this build of Python:</p>
<pre><code>uv run python --version
Python 3.12.9
# Python 3.12.9 (main, Feb 12 2025, 14:50:50) [Clang 19.1.6 ] on linux

# What!?
uv run python -c 'print(&quot;%g&quot; % 95)'
90

uv run python -c 'print(&quot;%.1f&quot; % 95.0)'
90.0
</code></pre>
<p>If I use a different python installation, it seems fine:</p>
<pre><code># Python 3.12.8 (main, Jan 13 2025, 14:13:40) [GCC 12.3.0] on linux
.pyenv/shims/python3 --version
Python 3.12.8

.pyenv/shims/python3 -c 'print(&quot;%g&quot; % 95.0)'
95

.pyenv/shims/python3 -c 'print(&quot;%.1f&quot; % 95.0)'
95.0
</code></pre>
<p>Is this a clang versus gcc issue? It's weird that the build is located under <code>.local/share/uv/python/cpython-3.12.9-linux-x86_64-gnu</code> but the Python REPL startup info shows Clang 19.1.6 -- not sure if this is just an edge case in my particular VM, but I thought I couldn't be the only to stumble into this and it might be worth checking with the community!</p>
<p>Thank you for all your amazing work on uv.</p>
<h3>Platform</h3>
<p>Linux 6.15.11-orbstack-00542-g4f455d264886 x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.6.2</p>
<h3>Python version</h3>
<p>Python 3.12.9</p>
<p><strong>Edit:</strong> The issue does persist after updating uv to 0.9.0 and uv-managed Python 3.12.11.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @masalim2 on 2025-10-08 20:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-08 23:28</div>
            <div class="timeline-body"><p>I wonder if this is a duplicate of https://github.com/astral-sh/uv/issues/15690</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/masalim2">@masalim2</a> on 2025-10-09 00:38</div>
            <div class="timeline-body"><blockquote>
<p>I wonder if this is a duplicate of <a href="https://github.com/astral-sh/uv/issues/15690">#15690</a></p>
</blockquote>
<p>It certainly looks like it! Sorry, failed to find the related issue on a cursory search. Like the reporter of the original issue, I too can only reproduce the issue with the UV-managed binaries.  I agree that itâ€™s not fair to call this a bug in uv. Maybe something specific to the uv builds is exposing a latent bug in the emulation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-09 01:33</div>
            <div class="timeline-body"><p>Yeah we use a different compiler toolchain so it's entirely plausible that's the root cause. It looks like you can disable Rosetta to workaround it until they release the fix!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @masalim2 on 2025-10-09 05:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:05 UTC
    </footer>
</body>
</html>
