```yaml
number: 11217
title: uv not detecting system installed Python installations of other architecture on Windows
type: issue
state: closed
author: schlamar
labels:
  - bug
  - windows
assignees: []
created_at: 2025-02-04T15:28:21Z
updated_at: 2025-03-03T14:46:02Z
url: https://github.com/astral-sh/uv/issues/11217
synced_at: 2026-01-10T01:57:25Z
```

# uv not detecting system installed Python installations of other architecture on Windows

---

_Issue opened by @schlamar on 2025-02-04 15:28_

### Summary

Expected:

```
> py -0p
 -V:3.11 *        C:\Program Files\Python311\python.exe
 -V:3.11-32       C:\Program Files (x86)\Python311-32\python.exe
 -V:3.10          C:\Program Files\Python310\python.exe
 -V:3.10-32       C:\Program Files (x86)\Python310-32\python.exe
 -V:3.9-32        C:\Users\<user>\AppData\Local\Programs\Python\Python39-32\python.exe
```

Actual (3.11-32 and 3.10-32 is missing):

```
> .\uv python list --only-installed --verbose
←[34mDEBUG←[39m uv 0.5.27 (73e9928d4 2025-02-03)
←[34mDEBUG←[39m Searching for any Python interpreter in managed installations, search path, or registry
←[34mDEBUG←[39m Searching for managed installations at `C:\Users\<user>\AppData\Roaming\uv\python`
←[34mDEBUG←[39m Found `cpython-3.11.9-windows-x86_64-none` at `C:\Program Files\Python311\python.exe` (search path)
←[34mDEBUG←[39m Found `cpython-3.11.9-windows-x86_64-none` at `C:\Program Files\Python311\python.exe` (registry)
←[34mDEBUG←[39m Found `cpython-3.10.11-windows-x86_64-none` at `C:\Program Files\Python310\python.exe` (registry)
←[34mDEBUG←[39m Found `cpython-3.9.13-windows-x86-none` at `C:\Users\<user>\AppData\Local\Programs\Python\Python39-32\python.exe` (registry)
cpython-3.11.9-windows-x86_64-none     C:\Program Files\Python311\python.exe
cpython-3.10.11-windows-x86_64-none    C:\Program Files\Python310\python.exe
cpython-3.9.13-windows-x86-none        C:\Users\<user>\AppData\Local\Programs\Python\Python39-32\python.exe
```




### Platform

Windows Server 2022

### Version

uv 0.5.27 (73e9928d4 2025-02-03)

### Python version

Python 3.11.9

---

_Label `bug` added by @schlamar on 2025-02-04 15:28_

---

_Renamed from "`uv python list` not detecting global 32bit Python installations" to "`uv python list` not detecting global 32bit Python installations on Windows" by @schlamar on 2025-02-04 15:29_

---

_Comment by @zanieb on 2025-02-04 21:37_

I presume `py` finds these from the registry? cc @konstin 

---

_Assigned to @konstin by @zanieb on 2025-02-05 23:55_

---

_Comment by @konstin on 2025-02-17 08:47_

32-bit pythons show for me locally, can you share the output of `Get-ChildItem -Path "HKCU:\Software\Python" -Recurse -Depth 2` and `Get-ChildItem -Path "HKLM:\Software\Python" -Recurse -Depth 2`?

---

_Label `bug` removed by @konstin on 2025-02-17 08:48_

---

_Label `needs-mre` added by @konstin on 2025-02-17 08:48_

---

_Unassigned @konstin by @konstin on 2025-02-17 08:48_

---

_Comment by @schlamar on 2025-02-17 13:33_

The issue is probably how Microsoft maps 32bit and 64bit data in the registry. To read 32bit processes from 64bit process and vice versa you have to use specific flags - see https://learn.microsoft.com/en-us/windows/win32/winprog64/accessing-an-alternate-registry-view

So reading `"HKLM:\Software\Python"` with Powershell depends on which Powershell version you use. Normal (x64) returns the two 64bit Python installations. Reading with Powershell x86 returns the two Python 32bit installations.


---

_Comment by @schlamar on 2025-02-17 13:58_

Running 64bit uv I get 64bit system installed Python versions only and running 32bit uv I get 32bit system installed versions only. So uv ignores how Microsoft maps 32bit / 64bit process data to HKLM and only reads data for the current architecture.

User installed Python versions work (because HKCU is not affected by the 32bit / 64bit registry mapping).


---

_Label `needs-mre` removed by @konstin on 2025-02-17 17:46_

---

_Label `bug` added by @konstin on 2025-02-17 17:46_

---

_Renamed from "`uv python list` not detecting global 32bit Python installations on Windows" to "uv not detecting system installed Python installations of other architecture on Windows" by @schlamar on 2025-02-18 08:20_

---

_Comment by @schlamar on 2025-02-18 08:24_

This affects probably all use cases regarding Python discovery, no only `python list`. For example `uv venv -p cpython-3.11-windows-x86-none --no-python-downloads` fails with "No interpreter found" running a 64bit uv although it is globally installed.

---

_Comment by @eabase on 2025-02-25 07:20_

Huh, this is weird, from Admin pwsh, I get permission issue:
```powershell
# Get-ChildItem -Path "HKLM:\Software\Python" -Recurse -Depth 2

Get-ChildItem: Requested registry access is not allowed.
Get-ChildItem: Requested registry access is not allowed.
Get-ChildItem: Requested registry access is not allowed.

    Hive: HKEY_LOCAL_MACHINE\Software\WOW6432Node
```

---

_Label `windows` added by @konstin on 2025-02-26 13:43_

---

_Referenced in [astral-sh/uv#11799](../../astral-sh/uv/pulls/11799.md) on 2025-02-26 14:06_

---

_Closed by @konstin on 2025-02-26 15:33_

---

_Closed by @konstin on 2025-02-26 15:33_

---

_Referenced in [astral-sh/uv#11801](../../astral-sh/uv/pulls/11801.md) on 2025-02-26 15:37_

---

_Reopened by @konstin on 2025-02-26 16:17_

---

_Closed by @konstin on 2025-03-03 14:46_

---
