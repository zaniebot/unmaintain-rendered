<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Failed to use the correct install dir - astral-sh/uv #16822</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Failed to use the correct install dir</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16822">#16822</a>
        opened by <a href="https://github.com/IdoPort">@IdoPort</a>
        on 2025-11-23 10:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/IdoPort">@IdoPort</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I am trying to create a new venv with a remote machine with SLURM.
Here is how I configure the paths so it will use the correct paths in the remote machine (remote amazon linux, local ubuntu).</p>
<pre><code>export PATH=/home/ec2-user/.local/bin/:$PATH
export UV_INSTALL_DIR=/home/ec2-user/.local/share/uv/python
export UV_PYTHON_CACHE_DIR=/home/ec2-user/.cache/uv
which uv
/home/ec2-user/.local/bin/uv
uv venv --python 3.11 --no-cache ...
error: failed to create directory `/home/ubuntu/.local/share/uv/python`: Permission denied (os error 13)
</code></pre>
<p>I suspect that there is a priority here for the user that is running the command instead of UV_INSTALL_DIR.</p>
<h3>Platform</h3>
<p>Linux 6.8.0-1040-aws x86_64 GNU/Linux, Linux 5.10.239-236.958.amzn2.x86_64 x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.8.22</p>
<h3>Python version</h3>
<p>3.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @IdoPort on 2025-11-23 10:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-23 15:22</div>
            <div class="timeline-body"><p>Do you mean <code>UV_PYTHON_INSTALL_DIR</code> instead of <code>UV_INSTALL_DIR</code>?</p>
<p>See also https://docs.astral.sh/uv/reference/storage/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @zanieb on 2025-11-23 15:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-11-23 15:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/IdoPort">@IdoPort</a> on 2025-11-24 09:09</div>
            <div class="timeline-body"><p>Thanks it did solve it!</p>
<p>It might be a nice case to improve the docs.
There was no link from the venv documentations to this param and when searching here
https://docs.astral.sh/uv/reference/environment/
There was no variable with reference to the <code>.local</code> directory.
So it might be nice to do one (or both?) of the following:</p>
<ol>
<li>Link to the storage/<code>UV_PYTHON_INSTALL_DIR</code> documentation from the venv docs.</li>
<li>Add in the environment variable for <code>UV_PYTHON_INSTALL_DIR</code> a default value.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-11-28 08:28</div>
            <div class="timeline-body"><p>We provide an overview over the locations in the <a href="https://docs.astral.sh/uv/reference/storage/">storage</a> docs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-11-28 08:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:33:31 UTC
    </footer>
</body>
</html>
