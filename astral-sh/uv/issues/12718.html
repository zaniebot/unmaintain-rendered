<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sharing code between two libraries published from the same workspace - astral-sh/uv #12718</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Sharing code between two libraries published from the same workspace</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/12718">#12718</a>
        opened by <a href="https://github.com/xixixao">@xixixao</a>
        on 2025-04-07 14:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/xixixao">@xixixao</a> on 2025-04-07 14:39</div>
            <div class="timeline-body"><h3>Question</h3>
<p>If I have two libraries, A and B, published from the same monorepo workspace, and I want to share code between them, how can I do that? I'm ok publishing C to the index, but I want editable mode to work like for any other dependencies in the workspace.</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @xixixao on 2025-04-07 14:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/xixixao">@xixixao</a> on 2025-04-11 08:01</div>
            <div class="timeline-body"><p>Current workarounds:</p>
<p>Option 1: Give up and release all libs in one distribution
Option 2: Copy the library code C into A when A is being published, so that it becomes a package inside A's distribution (same for B). We do this via a script in CI.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/xixixao">@xixixao</a> on 2025-04-27 17:45</div>
            <div class="timeline-body"><p>@charliermarsh sorry for the ping, but this is pretty fundamental for our usage of UV, do you have any ideas?</p>
<p>We went with workaround 2. in the short term, but it doesn't work when we don't want the code from library C to be duplicated (in case both A and B are installed).</p>
<p>I should also add that the situation is worse because we don't keep the published version number in pyproject.toml, so that we can avoid merge conflicts (we compute the version number in CI during publish).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-04-28 16:14</div>
            <div class="timeline-body"><p>What is the problem in having the shared between A and B in another package, and have both A and B depend on that package? Editable installation works with multiple packages and is the default for all packages in a uv workspace, otherwise you can select editable installation for installation in <code>tool.uv.sources</code> or with <code>uv pip -e</code> respectively.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NellyWhads">@NellyWhads</a> on 2025-05-08 04:46</div>
            <div class="timeline-body"><p>Hey @xixixao - I think you are describing a <a href="https://polylith.gitbook.io/polylith">Polylithic Monorepo</a>.</p>
<p>The titled link it to the core project maintained by @DavidVujic - it works <em>very well</em> with <code>uv</code>. I use it &quot;in production&quot; for a very complex set of packages and development projects.</p>
<p>Here are the <a href="https://davidvujic.github.io/python-polylith-docs/"><code>python</code>-specific docs</a>, and also <a href="https://github.com/DavidVujic/python-polylith-example-uv">the <code>uv</code> example repo</a></p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:04 UTC
    </footer>
</body>
</html>
