<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatic Python Trove Classifiers - astral-sh/uv #8716</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Automatic Python Trove Classifiers</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/8716">#8716</a>
        opened by <a href="https://github.com/harkabeeparolus">@harkabeeparolus</a>
        on 2024-10-31 08:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/harkabeeparolus">@harkabeeparolus</a></div>
            <div class="timeline-body">Summary
<p>I wish uv would provide default automatic trove classifiers for Python versions when building wheels.</p>
<p><a href="https://python-poetry.org/docs/pyproject/#classifiers">Poetry adds automatic default Python version (and license) trove classifiers</a>. This improves the package metadata when uploading to PyPI, and means that the developer doesn&#x27;t have to manage these versions manually as the project&#x27;s Python requirements change.</p>
<ul>
<li>Please note that license trove classifiers are deprecated since <code>Metadata-Version: 2.4</code>, so we should not implement them, but favour <code>License-Expression</code> instead.</li>
</ul>
Suggested Implementation
<ul>
<li>Provide a build backend that supports automatically calculating Python version trove classifiers from the <code>Requires-Python</code> specifier IF <code>pyproject.toml</code> contains <code>dynamic = [&quot;classifiers&quot;]</code>.<ul>
<li>And/or encourage other build backends to support this feature.</li>
</ul>
</li>
<li>Have <code>uv init</code> add <code>dynamic = [&quot;classifiers&quot;]</code> to the <code>pyproject.toml</code> template when using a build backend known to support automatic version classifiers.</li>
</ul>
<p>Thanks to @konstin for <a href="https://github.com/astral-sh/uv/issues/8716#issuecomment-2449481821">pointing me towards <code>dynamic</code></a> as a solution.</p>
Examples
<p>Example (with <strong>Poetry</strong> version 1.8.4):</p>
<pre><code>$ poetry new foo &amp;&amp; cd foo
$ sed -i -e $&#x27;/^version =/a\\\nlicense = &quot;GPL-3.0-or-later&quot;\n&#x27; pyproject.toml
$ poetry build
$ unzip -p dist/foo-0.1.0-py3-none-any.whl foo-0.1.0.dist-info/METADATA
Metadata-Version: 2.1
Name: foo
Version: 0.1.0
Summary:
License: GPL-3.0-or-later
Author: Yeeg9yoo Ohl4eida
Author-email: boo6gima@choo7eir.com
Requires-Python: &gt;=3.9,&lt;4.0
Classifier: License :: OSI Approved :: GNU General Public License v3 or later (GPLv3+)
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Description-Content-Type: text/markdown
</code></pre>
<p>Compare this to <strong>uv 0.4.29</strong> (85f9a0d0e 2024-10-30):</p>
<pre><code>$ uv init --package foo &amp;&amp; cd foo
$ sed -i -e $&#x27;/^version =/a\\\nlicense = &quot;GPL-3.0-or-later&quot;\n&#x27; pyproject.toml
$ uv build
$ unzip -p dist/foo-0.1.0-py3-none-any.whl foo-0.1.0.dist-info/METADATA
Metadata-Version: 2.3
Name: foo
Version: 0.1.0
Summary: Add your description here
Author-email: Yeeg9yoo Ohl4eida &lt;boo6gima@choo7eir.com&gt;
License-Expression: GPL-3.0-or-later
Requires-Python: &gt;=3.13
</code></pre>
<p>(Interestingly, this metadata is actually <strong>invalid</strong> since it breaks the specification. <a href="https://packaging.python.org/en/latest/specifications/core-metadata/#license-expression">The <code>License-Expression</code> field is not available until <code>Metadata-Version: 2.4</code> or later</a>. ðŸ˜³)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Automatic Python Version Trove Classifiers&quot; to &quot;Automatic Python Trove Classifiers&quot; by <a href="https://github.com/harkabeeparolus">@harkabeeparolus</a> on 2024-10-31 08:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/HenriBlacksmith">@HenriBlacksmith</a> on 2024-10-31 09:15</div>
            <div class="timeline-body"><p>Could they automatically be added to the <code>pyproject.toml</code> too? (Not sure when but it could be even better)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/harkabeeparolus">@harkabeeparolus</a> on 2024-10-31 09:58</div>
            <div class="timeline-body"><blockquote>
<p>Could they automatically be added to the <code>pyproject.toml</code> too? (Not sure when but it could be even better)</p>
</blockquote>
<p>Preferably not, in my opinion... My point is that adding default classifiers automatically to the wheel enables you to specify versions in <em>one place</em> only, instead of copy-pasting or editing them in several different places.</p>
<p>A <em>single source of truth</em> is better than multiple manually managed sources of confusion. ðŸ˜‰</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-10-31 10:04</div>
            <div class="timeline-body"><p>Specification note: PEP 621 only allows us to do this if with <code>dynamic = [&quot;classifiers&quot;]</code>. Poetry is allowed to do this since they are not using the <code>[project]</code> table.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/HenriBlacksmith">@HenriBlacksmith</a> on 2024-10-31 12:35</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>Could they automatically be added to the <code>pyproject.toml</code> too? (Not sure when but it could be even better)</p>
</blockquote>
<p>Preferably not, in my opinion... My point is that adding default classifiers automatically to the wheel enables you to specify versions in <em>one place</em> only, instead of copy-pasting or editing them in several different places.</p>
<p>A <em>single source of truth</em> is better than multiple manually managed sources of confusion. ðŸ˜‰</p>
</blockquote>
<p>Maybe those are two different features then, one could be a command to update &quot;static&quot; classifiers in the <code>pyproject.toml</code> and another one a setting to enrich classifiers in the build (maybe via the dynamic mode)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/harkabeeparolus">@harkabeeparolus</a> on 2024-10-31 19:13</div>
            <div class="timeline-body"><blockquote>
<p>Specification note: PEP 621 only allows us to do this if with <code>dynamic = [&quot;classifiers&quot;]</code>. Poetry is allowed to do this since they are not using the <code>[project]</code> table.</p>
</blockquote>
<p>That&#x27;s a good point!</p>
<p>I&#x27;m not familiar enough with PEP 621, so I wonder... Would it be possible to use <code>dynamic = [&quot;classifiers&quot;]</code> to get default values, and at the same time also use manually specified values to override the defaults or to specify additional classifiers?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/harkabeeparolus">@harkabeeparolus</a> on 2024-11-01 08:13</div>
            <div class="timeline-body"><blockquote>
<p>Specification note: PEP 621 only allows us to do this if with <code>dynamic = [&quot;classifiers&quot;]</code>. Poetry is allowed to do this since they are not using the <code>[project]</code> table.</p>
</blockquote>
<p>Update:</p>
<p>I browsed through the specifications for <a href="https://packaging.python.org/en/latest/specifications/pyproject-toml/"><code>pyproject.toml</code></a> as well as <a href="https://packaging.python.org/en/latest/specifications/core-metadata/">Core metadata</a>, which are based partly on PEP 621 and 643, and I see no problems with my suggestion.</p>
<p>While both specifying core metadata AND declaring it to be dynamic is not explicitly mentioned in the specs, it is also clearly not forbidden, as far as I can tell.</p>
<p>In other words, we could certainly have build backends that provide default Python version trove classifiers if unspecified AND if <code>classifiers</code> is declared as dynamic... And we could include <code>dynamic = [&quot;classifiers&quot;]</code> in the <code>uv init</code> templates for the backends that support this feature.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-01 13:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tsvikas">@tsvikas</a> on 2025-01-05 18:07</div>
            <div class="timeline-body"><p>update:
poetry 2 now works like this:
if <code>project.classifiers</code> is set, it doesn&#x27;t change it
if <code>project.classifiers</code> is not set, and <code>project.dynamic</code> contains <code>&quot;classifiers&quot;</code>: it will set classifiers to be <code>tool.poetry.classifiers</code> (if exists) + the automaticly created classifiers (license, version, etc.).</p>
<p>that seems like a reasonable behaviour. could we duplicate it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/harkabeeparolus">@harkabeeparolus</a> on 2025-01-07 11:02</div>
            <div class="timeline-body"><blockquote>
<p>update: poetry 2 now works like this: if <code>project.classifiers</code> is set, it doesn&#x27;t change it if <code>project.classifiers</code> is not set, and <code>project.dynamic</code> contains <code>&quot;classifiers&quot;</code>: it will set classifiers to be <code>tool.poetry.classifiers</code> (if exists) + the automaticly created classifiers (license, version, etc.).</p>
<p>that seems like a reasonable behaviour. could we duplicate it?</p>
</blockquote>
<p>I agree, this would be nice. Poetry 2 seems to do a lot of things right. ðŸ˜„
More info about this new behavior: https://python-poetry.org/docs/pyproject/#classifiers</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MicaelJarniac">@MicaelJarniac</a> on 2025-02-10 20:16</div>
            <div class="timeline-body"><p><code>Typing :: Typed</code> could also be inferred from the project I think, by the presence of a <code>py.typed</code> marker.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ambv">@ambv</a> on 2025-03-03 11:27</div>
            <div class="timeline-body"><p>Note that since this issue was opened, specifying <code>License ::</code> in trove classifiers <a href="https://packaging.python.org/en/latest/specifications/pyproject-toml/#classifiers">is now deprecated</a> and the preferred spelling is to use the license text or file in <code>[project]</code>, which lands in <code>METADATA</code> without duplication.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:35:10 UTC
    </footer>
</body>
</html>
