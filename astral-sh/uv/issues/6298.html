<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a command to read and update (i.e., bump) the project version, e.g., `uv version` - astral-sh/uv #6298</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a command to read and update (i.e., bump) the project version, e.g., `uv version`</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6298">#6298</a>
        opened by <a href="https://github.com/cauebs">@cauebs</a>
        on 2024-08-21 04:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/cauebs">@cauebs</a> on 2024-08-21 04:56</div>
            <div class="timeline-body"><p>:white_check_mark: Both Rye and Poetry have this, and it's quite useful both...</p>
<ul>
<li>to avoid manually incrementing the version number (and potentially making a mistake there with the digits),</li>
<li>and to have this field on the <code>pyproject.toml</code> file serve as the single source of truth for a project's version, easily accessible (via <code>uv</code>) in CI workflows, etc.</li>
</ul>
<p>:stop_sign: The latter is where my personal interests lie: I have a CI workflow that tags and deploys releases when the version is bumped, currently using Poetry for it. I don't really want to pull in an additional tool to parse the project specs, so it's currently keeping me from considering migrating to <code>uv</code>.</p>
<p>:scroll: My proposal is replacing the current functionality of the <code>version</code> subcommand with this, since <code>uv</code>'s version can already be accessed via the <code>-V | --version</code> option, and other project management currently exist as &quot;root&quot; subcommands.</p>
<p>:information_source: I'm willing to give this one a go myself if maintainers greenlight the proposal.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2024-08-21 12:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">projects</span> added by @zanieb on 2024-08-21 12:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6311.html">astral-sh/uv#6311</a> on 2024-08-21 12:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6430.html">astral-sh/uv#6430</a> on 2024-08-22 13:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JonZeolla">@JonZeolla</a> on 2024-08-22 14:19</div>
            <div class="timeline-body"><p>Would maintaining version identifiers outside of <code>pyproject.toml</code> be considered out of scope for <code>uv</code>? For instance, updating something like a <code>__version__</code> in a <code>src/package/__init__.py</code>?</p>
<p>Or, even better, support a dynamic version like hatch does with a</p>
<pre><code class="language-toml">[project]
dynamic = [&quot;version&quot;]

[tool.hatch.version]
path = &quot;src/package/__init__.py&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6440.html">astral-sh/uv#6440</a> on 2024-08-22 14:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/deadnews">@deadnews</a> on 2024-08-22 15:08</div>
            <div class="timeline-body"><p>It's most convenient to me to have <code>git tag</code> based versioning:</p>
<p>https://github.com/mtkennerly/poetry-dynamic-versioning</p>
<p>I would love to have this functionality.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6636.html">astral-sh/uv#6636</a> on 2024-08-26 17:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/raayu83">@raayu83</a> on 2024-08-29 12:27</div>
            <div class="timeline-body"><p>Would also love to see this... I'm currently using poetry-version-plugin in versioned projects and want to switch them to uv</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../locustio/locust/issues/2857.html">locustio/locust#2857</a> on 2024-08-30 08:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6854.html">astral-sh/uv#6854</a> on 2024-08-30 12:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/menzenski">@menzenski</a> on 2024-09-05 11:54</div>
            <div class="timeline-body"><p>Also very interested in this feature. This kind of read/update version command seems very common (not only Poetry but npm, etc) and it'd make migration to uv from other tools that much more straightforward.</p>
<blockquote>
<p>Would maintaining version identifiers outside of pyproject.toml be considered out of scope for uv? For instance, updating something like a <strong>version</strong> in a src/package/<strong>init</strong>.py?</p>
</blockquote>
<p>@JonZeolla  I've used PDM's dynamic versioning in the past (which is essentially the same as the Hatch example you provide) but have found it kind of annoying in practice. IMO it's preferable to have the version in pyproject.toml be the source of truth. That version can be exposed in the Python package using <code>importlib.metadata.version</code>:</p>
<pre><code class="language-toml">[tool.poetry]
name = &quot;my-package&quot;
version = &quot;1,2,3&quot;
</code></pre>
<pre><code class="language-python"># my_package/__init__.py

from importlib.metadata import version

__version__ = version(&quot;my_package&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/raayu83">@raayu83</a> on 2024-09-05 13:33</div>
            <div class="timeline-body"><p>Personally I also like the idea of basing the version on the current git tag when using together with CI/CD.
In that case it would be great if there was a command to set the version in pyproject.toml to the value of the git tag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/HenriBlacksmith">@HenriBlacksmith</a> on 2024-09-06 20:54</div>
            <div class="timeline-body"><blockquote>
<p>Personally I also like the idea of basing the version on the current git tag when using together with CI/CD.</p>
<p>In that case it would be great if there was a command to set the version in pyproject.toml to the value of the git tag.</p>
</blockquote>
<p>Covering what bump-my-version (and previously bumpversion) do would cover that (including customizing the git tag and commit message format)</p>
<p>An interesting addition would be to have a way to trigger a custom
script to bump the CHANGELOGs like a hook to a python script.</p>
<p>An even better but probably too opinionated option could be to add a CHANGELOG management system (like changie) but it might be out of scope of uv?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phi-friday">@phi-friday</a> on 2024-09-07 04:19</div>
            <div class="timeline-body"><p>For others who need this.</p>
<pre><code class="language-bash">uvx --from=toml-cli toml set --toml-path=pyproject.toml project.version $VERSION
</code></pre>
<p>I'm using it like this in github action.</p>
<pre><code class="language-bash">VERSION=$(uvx dunamai from any --no-metadata --style pep440)
uvx --from=toml-cli toml set --toml-path=pyproject.toml project.version $VERSION
uv build
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7248.html">astral-sh/uv#7248</a> on 2024-09-10 09:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/daviewales">@daviewales</a> on 2024-09-11 00:20</div>
            <div class="timeline-body"><p>Consider how <code>poetry</code> does it: https://python-poetry.org/docs/cli#version</p>
<p>My workflow looks like this:</p>
<pre><code class="language-sh"># Show current version
poetry version

# Bump version
poetry version minor

# Add a git tag with a matching version to what's in pyproject.toml
git tag &quot;v$(poetry version -s)&quot;
</code></pre>
<p>Poetry tries to be clever to avoid needing an option to specify whether you are auto-bumping or manually setting a version:</p>
<blockquote>
<p>The new version should be a valid <a href="https://peps.python.org/pep-0440/">PEP 440</a> string or a valid bump rule: <code>patch</code>, <code>minor</code>, <code>major</code>, <code>prepatch</code>, <code>preminor</code>, <code>premajor</code>, <code>prerelease</code></p>
</blockquote>
<p>This assumes that no-one will ever want to use one of those strings as a version, but that seems like a reasonably safe assumption.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pkucmus">@pkucmus</a> on 2024-09-12 19:44</div>
            <div class="timeline-body"><p>With hatch even when you have the <code>version</code> set as dynamic and red from an example <code>__about__.py</code> module and you bump <code>hatch version $(git describe --broken --tags --always --dirty)</code> (that what I do on build in CI/CD) it will actually change the python module. Which is kinda nice.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phi-friday">@phi-friday</a> on 2024-09-14 10:06</div>
            <div class="timeline-body"><blockquote>
<p>With hatch even when you have the <code>version</code> set as dynamic and red from an example <code>__about__.py</code> module and you bump <code>hatch version $(git describe --broken --tags --always --dirty)</code> (that what I do on build in CI/CD) it will actually change the python module. Which is kinda nice.</p>
</blockquote>
<p>Using <code>uvx hatch version ...</code> is mostly fine, but I can't use it when it's a stub only package because there is no <code>*.py</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/7507.html">astral-sh/uv#7507</a> on 2024-09-18 16:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../CSSUoB/TeX-Bot-Py-V2/issues/329.html">CSSUoB/TeX-Bot-Py-V2#329</a> on 2024-09-20 22:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/7609.html">astral-sh/uv#7609</a> on 2024-09-21 12:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/7672.html">astral-sh/uv#7672</a> on 2024-09-24 20:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/7750.html">astral-sh/uv#7750</a> on 2024-09-28 03:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/7818.html">astral-sh/uv#7818</a> on 2024-09-30 19:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/7785.html">astral-sh/uv#7785</a> on 2024-10-06 14:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/david-waterworth">@david-waterworth</a> on 2024-10-10 02:10</div>
            <div class="timeline-body"><p>I'd love to see something like this as well - I currently use <code>python-semantic-version</code> but that uses SemVer rather than PEP440 - which causes a few minor issues such as not being able to parse tags that are valid PEP440 but not SemVer git tags (i.e. tags we added before migrating to PSV). It also has a nice CHANGELOG generation module, and the ability to generate release or dev version based on branch name (main vs feature). Version bumping rules are based on commit message parsing (i.e. if message starts with <code>feat:</code> bump minor version, if <code>fix:</code> bump patch etc.). As part of the PSV build process, all files that are modified (i.e. pyproject.toml, <strong>version</strong>.py) are staged, committed and pushed. The commit is also tagged with the version. You can then filter by the commit message in your CI pipeline to prevent infinite recursion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8162.html">astral-sh/uv#8162</a> on 2024-10-14 16:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-14 16:31</div>
            <div class="timeline-body"><p>As a workaround, I use this in my project:</p>
<pre><code>sed -i -e &quot;s/0.0.0/${GITHUB_REF#refs/*/}/&quot; pyproject.toml
</code></pre>
<p>https://github.com/astral-sh/packse/blob/70abfe8f64a9746452c02cb514942f879c7eaccc/.github/workflows/release.yaml#L34-L36</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/struckchure">@struckchure</a> on 2024-10-14 16:33</div>
            <div class="timeline-body"><blockquote>
<p>As a workaround, I use this in my project:</p>
<pre><code>sed -i -e &quot;s/0.0.0/${GITHUB_REF#refs/*/}/&quot; pyproject.toml
</code></pre>
<p>https://github.com/astral-sh/packse/blob/70abfe8f64a9746452c02cb514942f879c7eaccc/.github/workflows/release.yaml#L34-L36</p>
</blockquote>
<p>Exactly what I did, I just wasn't comfortable w/ it</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/struckchure">@struckchure</a> on 2024-10-14 16:33</div>
            <div class="timeline-body"><p>Is there a reason why this won't/can't be implemented?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-14 16:51</div>
            <div class="timeline-body"><p>The <code>uv version</code> command already exists, so I need to come up with a design to either phase that out in favor this functionality or choose a new command name.</p>
<p>Basically, that part isn't trivial and we're doing a lot of other things.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sam57719">@sam57719</a> on 2024-10-14 17:00</div>
            <div class="timeline-body"><p>@zanieb according to the <a href="https://docs.astral.sh/uv/getting-started/help/#viewing-the-version">docs</a> there are already other ways to get the uv version.</p>
<p>E.g.</p>
<pre><code class="language-bash">uv --version      # Same output as `uv version`
uv -V             # Will not include the build commit and date
uv pip --version  # Can be used with a subcommand
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-14 17:07</div>
            <div class="timeline-body"><p>@sam57719 that doesn't mean it's not a breaking change to switch the functionality. There is downstream code that <em>will</em> break if we change it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/struckchure">@struckchure</a> on 2024-10-14 17:13</div>
            <div class="timeline-body"><blockquote>
<p>The <code>uv version</code> command already exists, so I need to come up with a design to either phase that out in favor this functionality or choose a new command name.</p>
<p>Basically, that part isn't trivial and we're doing a lot of other things.</p>
</blockquote>
<p>Maybe we could just have a way to bump by updating the .toml file?
something like ...</p>
<p><code>uv build --override-config &quot;project.version=x.x.x&quot;</code></p>
<p>Maybe someone already thought of that, I'm new to <code>uv</code> ü§∑‚Äç‚ôÇÔ∏è</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2024-10-14 17:52</div>
            <div class="timeline-body"><p>Related: https://github.com/astral-sh/uv/issues/6440</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8294.html">astral-sh/uv#8294</a> on 2024-10-17 16:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/OverkillGuy">@OverkillGuy</a> on 2024-10-20 06:11</div>
            <div class="timeline-body"><p>Here's a workaround that may help wait for the feature: <code>uv tree --depth 0</code> shows the tree of version dependencies of ... just our package:</p>
<pre><code class="language-shell">$ uv tree --depth 0
Resolved 66 packages in 1ms
mass-driver v0.18.0a1
</code></pre>
<p>Noting the &quot;Resolved 66 packages in 1ms&quot; is coming on stderr (debug message), so with a bit of fanciful shell:</p>
<pre><code class="language-shell">$ uv tree --depth=0  2&gt; /dev/null | awk '{print $2}'
v0.18.0a1
</code></pre>
<p>Not perfect, but it's a start!</p>
<p>PS: Still would love the feature, and personally believe the breakage/change of semantics of <code>uv version</code> is worth it (given <code>uv -V</code> and <code>uv self</code> both exist), but I understand this requires careful thought.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluss">@bluss</a> on 2024-10-20 08:44</div>
            <div class="timeline-body"><p>That <code>uv tree -q</code> removes the actual tree output itself is probably a bug and now reported #8379</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Satge96">@Satge96</a> on 2024-10-24 06:27</div>
            <div class="timeline-body"><p>Hi everyone, I'm new to this and have a question about the version bump functionality. Since the existing <code>uv version</code> command poses challenges for integrating version bumping, would it make sense to introduce a new subcommand like <code>uv project</code>? This subcommand could handle project-related tasks, including version management. For example:
<code>uv project --bump-patch</code>
<code>uv project --bump-minor</code>
<code>uv project --bump-major</code>
Would this approach help avoid conflicts with the existing <code>uv version</code> command and provide a dedicated space for expanding project management features in the future?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-24 12:28</div>
            <div class="timeline-body"><p>Thanks for engaging on the design!</p>
<p>I think that <code>uv project</code> might be weird since all the other &quot;project&quot; commands are top-level, e.g., <code>init</code>, <code>sync</code>, <code>lock</code> are all project operations.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/acdha">@acdha</a> on 2024-10-24 12:39</div>
            <div class="timeline-body"><blockquote>
<p>Thanks for engaging on the design!</p>
<p>I think that <code>uv project</code> might be weird since all the other &quot;project&quot; commands are top-level, e.g., <code>init</code>, <code>sync</code>, <code>lock</code> are all project operations.</p>
</blockquote>
<p>I was wondering whether it‚Äôd be an opportunity to reconsider that since right now there isn‚Äôt a consistent mental model for what things update pyproject.toml, the lock file, or the venv. A dedicated project command would allow setting other things like bumping the target Python version as well.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CarrotManMatt">@CarrotManMatt</a> on 2024-10-24 15:42</div>
            <div class="timeline-body"><p>Maybe the top level command could be something like:</p>
<ul>
<li><code>uv bump python &lt;version&gt;</code> - increase the minimum required python version to the given version (if the given version is lower or equal to the current minimum an error is given), the allowed syntax for the given version should adhere to the <a href="https://docs.astral.sh/uv/concepts/python-versions#requesting-a-version">Python requests format</a></li>
<li><code>uv bump python --minor</code> - increase the minimum required python version to the next highest minor version</li>
<li><code>uv bump python --major</code> - increase the minimum required python version to the next highest major version</li>
<li><code>uv bump project &lt;version&gt;</code> - increase the project version to the given version (if the given version is lower or equal to the current version an error is given), the allowed syntax for the given version should follow semantic versioning with an optional <code>v</code> character at the start</li>
<li><code>uv bump project --patch</code> - increase the project version to the next highest patch version</li>
<li><code>uv bump project --minor</code> - increase the project version to the next highest minor version</li>
<li><code>uv bump project --major</code> - increase the project version to the next highest major version</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../PyVRP/PyVRP/issues/659.html">PyVRP/PyVRP#659</a> on 2024-10-28 20:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8714.html">astral-sh/uv#8714</a> on 2024-10-31 04:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../mbarkhau/bumpver/issues/239.html">mbarkhau/bumpver#239</a> on 2024-10-31 13:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/epicserve">@epicserve</a> on 2024-10-31 13:59</div>
            <div class="timeline-body"><p><a href="https://github.com/mbarkhau/bumpver">Bumpver</a> would be a good project for inspiration. I submitted https://github.com/mbarkhau/bumpver/issues/239, but it was closed as a duplicate of https://github.com/mbarkhau/bumpver/issues/193, which seems like it's a ways off.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/HenriBlacksmith">@HenriBlacksmith</a> on 2024-10-31 17:39</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/mbarkhau/bumpver">Bumpver</a> would be a good project for inspiration. I submitted https://github.com/mbarkhau/bumpver/issues/239, but it was closed as a duplicate of https://github.com/mbarkhau/bumpver/issues/193, which seems like it's a ways off.</p>
</blockquote>
<p>Looks a bit older compared to: https://github.com/callowayproject/bump-my-version but I assume uv maintainers already have good references üòÉ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8755.html">astral-sh/uv#8755</a> on 2024-11-01 23:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add a subcommand for reading/bumping the version in pyproject.toml" to "Add a command for reading and modifying (i.e., bumping) the version in the `pyproject.toml` " by @zanieb on 2024-11-02 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-02 13:56</div>
            <div class="timeline-body"><p>Retitled to try to improve discoverability. We get a lot of duplicates of this one.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nc9">@nc9</a> on 2024-11-08 08:40</div>
            <div class="timeline-body"><blockquote>
<p>The <code>uv version</code> command already exists, so I need to come up with a design to either phase that out in favor this functionality or choose a new command name.</p>
</blockquote>
<p>fwiw - when I first used <code>uv</code> at the very early stages, I instinctively thought the <code>version</code> subcommand would replicate the <code>poetry version</code> et al. behaviour. It would probably make more sense to keep <code>uv</code> related commands under <code>uv self</code> (ie. <code>uv self version</code>) and keep the top-level subcommands as project / environment scoped commands.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/9126.html">astral-sh/uv#9126</a> on 2024-11-14 18:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tastyminerals">@tastyminerals</a> on 2024-11-26 13:27</div>
            <div class="timeline-body"><p>So, imagine we have dozens of <code>poetry</code> based projects that use Jenkinsfiles configured to use <code>poetry version</code> to build versioned prod docker images. And in order to get this version, we either go back to the good old setuptools days or use some <code>python -c 'import toml ...</code> hacks, which obviously nobody will do. This basically means <code>uv</code> cannot be used as a build tool for us üòø which is a shame.
A workaround with <code>pyproject-info</code> could work, but if you have dependency groups in your <code>pyproject.toml</code>, the toml is no longer PEP 621 compliant, and it fails.
<code>uv</code> ability to resolve project versions is very important, in our case it is a blocker for its adoption, unfortunately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/M0NsTeRRR">@M0NsTeRRR</a> on 2024-11-26 13:35</div>
            <div class="timeline-body"><blockquote>
<p>So, imagine we have dozens of <code>poetry</code> based projects that use Jenkinsfiles configured to use <code>poetry version</code> to build versioned prod docker images. And in order to get this version, we either go back to the good old setuptools days or use some <code>python -c 'import toml ...</code> hacks, which obviously nobody will do. This basically means <code>uv</code> cannot be used as a build tool for us üòø which is a shame. A workaround with <code>pyproject-info</code> could work, but if you have dependency groups in your <code>pyproject.toml</code>, the toml is no longer PEP 621 compliant, and it fails. <code>uv</code> ability to resolve project versions is very important, in our case it is a blocker for its adoption, unfortunately.</p>
</blockquote>
<p>I resolved this issue with this temporary workaround:<br />
<code>RUN sed -i -e &quot;s/0.0.0/${APP_VERSION}/&quot; pyproject.toml</code>.</p>
<p>This approach was inspired by the workaround shared https://github.com/astral-sh/uv/issues/6298#issuecomment-2411738585. The key is to pass the version as a build arg (e.g., from a Git tag) to your build tool, in my case, Kaniko.
Alternatively, if Git is installed in your image, you can use sed directly with the Git tag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/krishan-patel001">@krishan-patel001</a> on 2024-11-26 13:48</div>
            <div class="timeline-body"><blockquote>
<p>So, imagine we have dozens of <code>poetry</code> based projects that use Jenkinsfiles configured to use <code>poetry version</code> to build versioned prod docker images. And in order to get this version, we either go back to the good old setuptools days or use some <code>python -c 'import toml ...</code> hacks, which obviously nobody will do. This basically means <code>uv</code> cannot be used as a build tool for us üòø which is a shame. A workaround with <code>pyproject-info</code> could work, but if you have dependency groups in your <code>pyproject.toml</code>, the toml is no longer PEP 621 compliant, and it fails. <code>uv</code> ability to resolve project versions is very important, in our case it is a blocker for its adoption, unfortunately.</p>
</blockquote>
<p>I use this as a workaround:
<code>version_number=$(uvx --from=toml-cli toml get --toml-path=pyproject.toml project.version)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../zanieb/uv/issues/6.html">zanieb/uv#6</a> on 2024-11-26 17:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NathanVaughn">@NathanVaughn</a> on 2024-11-26 18:43</div>
            <div class="timeline-body"><p>Personally I do this with a version of Python that includes <code>tomllib</code>:</p>
<pre><code class="language-bash">version=$(python -c 'import tomllib;fp=open(&quot;pyproject.toml&quot;,&quot;rb&quot;);print(tomllib.load(fp)[&quot;project&quot;][&quot;version&quot;]);fp.close()')
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/9452.html">astral-sh/uv#9452</a> on 2024-11-26 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Add a command for reading and modifying (i.e., bumping) the version in the `pyproject.toml` " to "Add a command to read and update (i.e., bump) the project version, e.g., `uv version`" by @zanieb on 2024-11-26 23:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jake-dunn">@jake-dunn</a> on 2024-11-27 18:08</div>
            <div class="timeline-body"><blockquote>
<p>It's most convenient to me to have <code>git tag</code> based versioning:</p>
<p>https://github.com/mtkennerly/poetry-dynamic-versioning</p>
<p>I would love to have this functionality.</p>
</blockquote>
<p>This is basically the only thing which blocks me porting all my projects over to UV right now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Galtozzy">@Galtozzy</a> on 2024-12-03 15:30</div>
            <div class="timeline-body"><blockquote>
<p>The <code>uv version</code> command already exists, so I need to come up with a design to either phase that out in favor this functionality or choose a new command name.</p>
<p>Basically, that part isn't trivial and we're doing a lot of other things.</p>
</blockquote>
<p>My 2 cents on the issue:</p>
<p>I don't think there are many places where there is a dependency on a <code>uv version</code>, but even if there are and this will be something to phase out/deprecate I think there is a pretty straightforward way of doing it.</p>
<ul>
<li>The <code>-V</code>, <code>--version</code> args should always point to an actual <code>uv</code> version.</li>
<li>Then at first, the project version management is under a certain prefix, e.g <code>uv version project &lt;args&gt;</code><ul>
<li>So that users can do <code>uv version project minor</code>, <code>uv version project major</code>, etc (the command design could be anything, I just assumed the most common would be the poetry one)</li>
</ul>
</li>
<li>Later on, after deprecation notices the project prefix could be dropped and the command will be just <code>uv version</code><ul>
<li>Ideally, everyone who used an old <code>uv version</code> to check the <code>uv</code> version would switch to <code>uv --version</code>.</li>
</ul>
</li>
</ul>
<p>It's just something I thought of and any part could be changed/tweaked to better fit the desired outcome.
But anyway I think this is a major one and should be considered since it would make <code>uv</code> better and will allow for an easy drop-in replacement from any <code>poetry</code> based project.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../plugboard-dev/plugboard/issues/58.html">plugboard-dev/plugboard#58</a> on 2024-12-13 16:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/9899.html">astral-sh/uv#9899</a> on 2024-12-15 16:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../unitycatalog/unitycatalog/pulls/782.html">unitycatalog/unitycatalog#782</a> on 2024-12-17 20:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8352.html">astral-sh/uv#8352</a> on 2024-12-18 10:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../Fraunhofer-AISEC/gallia/pulls/657.html">Fraunhofer-AISEC/gallia#657</a> on 2024-12-19 14:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../datnguye/dbterd/issues/126.html">datnguye/dbterd#126</a> on 2025-01-02 01:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../langroid/langroid/pulls/662.html">langroid/langroid#662</a> on 2025-01-05 22:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/leandrodamascena">@leandrodamascena</a> on 2025-01-06 12:51</div>
            <div class="timeline-body"><p>Hello uv team!</p>
<p>The &quot;uv version&quot; feature for updating project versions is crucial for projects with frequent alpha/dev releases. Currently, Poetry's simple command <code>poetry version prerelease --short</code> makes this very easy. The lack of a similar feature in <code>uv</code> is preventing us from replacing <code>poetry</code> with <code>uv</code>, as managing versions via scripts is impractical for fast release cycles.</p>
<p>Is there a roadmap or timeline for implementing this functionality in uv?</p>
<p>Thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tipanverella">@tipanverella</a> on 2025-01-10 20:38</div>
            <div class="timeline-body"><p>The simplest solution I can envision is to run:</p>
<ul>
<li><code>uvx poetry version</code></li>
<li><code>uvx poetry version patch</code></li>
<li><code>uvx poetry version minor</code></li>
<li><code>uvx poetry version major</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mirkolenz">@mirkolenz</a> on 2025-01-11 08:26</div>
            <div class="timeline-body"><p>To update the version, I use the following workaround:</p>
<p><code>sed -i 's/^version = &quot;.*&quot;$/version = &quot;NEW_VERSION&quot;/' pyproject.toml &amp;&amp; uv lock</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Kavan72">@Kavan72</a> on 2025-01-15 06:32</div>
            <div class="timeline-body"><blockquote>
<p>The <code>uv version</code> command already exists, so I need to come up with a design to either phase that out in favor this functionality or choose a new command name.</p>
<p>Basically, that part isn't trivial and we're doing a lot of other things.</p>
</blockquote>
<p>One option could be to change <code>uv version</code> to <code>uv self version</code>, as <code>uv version</code> currently displays the version of the installed uv on the system.  after</p>
<pre><code>uv version 
uv version patch
.....
</code></pre>
<p>There‚Äôs a rule to keep in mind: if you want to create something new, you may need to break something old.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mardiros">@mardiros</a> on 2025-01-15 08:49</div>
            <div class="timeline-body"><p>@Kavan72</p>
<blockquote>
<p>One option could be to change <code>uv version</code> to <code>uv self version</code>, as <code>uv version</code> currently displays the version of the installed uv on the system. after</p>
</blockquote>
<p>I completely agree, note that:</p>
<pre><code>ùùø uv self --version
uv-self 0.5.18 (27d1bad55 2025-01-11)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bw-matthew">@bw-matthew</a> on 2025-01-21 13:30</div>
            <div class="timeline-body"><p>You can read the pyproject file and print the version with the following:</p>
<pre><code class="language-shell">uv run --python 3.12 -- \
    python -c '
import tomllib, pathlib
file = pathlib.Path(&quot;pyproject.toml&quot;)
metadata = tomllib.loads(file.read_text())
print(metadata[&quot;project&quot;][&quot;version&quot;])
'
</code></pre>
<p>Need to use a python version that has tomllib (i.e. 3.11 or greater).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../TechnologyBrewery/pants-uv-lifecycle-plugin/issues/11.html">TechnologyBrewery/pants-uv-lifecycle-plugin#11</a> on 2025-01-21 16:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/engeir">@engeir</a> on 2025-01-22 08:12</div>
            <div class="timeline-body"><p>Expanding on the answer in https://github.com/astral-sh/uv/issues/6298#issuecomment-2335034247, the following bash script can both print and increment versions:</p>
<pre><code class="language-bash">#!/usr/bin/env bash

v=&quot;$(uvx --from=toml-cli toml get --toml-path=pyproject.toml project.version)&quot;
if [ -z &quot;$1&quot; ]; then
  echo &quot;$v&quot;
  exit 0
fi
uvx --from bump2version bumpversion --allow-dirty --current-version &quot;$v&quot; &quot;$1&quot; pyproject.toml
</code></pre>
<p>Further, if you use <a href="https://mise.jdx.dev">mise</a>, you may get tab-completion with the following task (run as <code>mise run bump</code> or with mise run aliased to mr, <code>mr bump</code>):</p>
<pre><code class="language-toml"># .mise.toml
[tasks.bump]
description = &quot;Bump the python package version. Takes one argument: `major`, `minor` or `patch`.&quot;
quiet = true
usage = '''
arg &quot;[semver]&quot; help=&quot;The SemVer name that should be incremented.&quot; {
  choices &quot;major&quot; &quot;minor&quot; &quot;patch&quot;
}
'''
run = &quot;&quot;&quot;
#!/usr/bin/env bash

v=&quot;$(uvx --from=toml-cli toml get --toml-path=pyproject.toml project.version)&quot;
if [ -z {{arg(name=&quot;semver&quot;)}} ]; then
  echo &quot;$v&quot;
  exit 0
fi
uvx --from bump2version bumpversion --allow-dirty --current-version &quot;$v&quot; {{arg(name=&quot;semver&quot;)}} pyproject.toml
&quot;&quot;&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thclark">@thclark</a> on 2025-01-26 09:52</div>
            <div class="timeline-body"><p>Inspired by one of the comments above, here's my GitHub action for getting version which is a workaround for at least one small chunk of the functionality being discussed here:</p>
<pre><code class="language-yaml">
      - name: Install uv
        uses: astral-sh/setup-uv@v5

      - name: Get package version
        id: version
        run: |
          VERSION=$(uvx --from=toml-cli toml get --toml-path=pyproject.toml project.version)
          echo &quot;package_version=$VERSION&quot; &gt;&gt; $GITHUB_OUTPUT
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../spotify/luigi/pulls/3338.html">spotify/luigi#3338</a> on 2025-02-01 22:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Kavan72">@Kavan72</a> on 2025-02-05 06:34</div>
            <div class="timeline-body"><p>@zanieb Any updates on this? Almost everyone who uses UV as a package manager needs this feature üòÅ.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jake-dunn">@jake-dunn</a> on 2025-02-05 09:08</div>
            <div class="timeline-body"><p>We've managed to get (what I think everyone else means by) this behaviour using setuptools_scm with uv:</p>
<p>https://pypi.org/project/setuptools-scm/
Explicilty in the pyproject.toml:</p>
<p>[project]
dynamic = [&quot;version&quot;]</p>
<p>[tool.setuptools_scm]</p>
<p>[build-system]
requires = [&quot;setuptools&gt;=64&quot;, &quot;setuptools_scm&gt;=8&quot;]
build-backend = &quot;setuptools.build_meta&quot;</p>
<p>Hopefully this is helpful. Python packaging and distribution seems to be much more complex than I hoped.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/OverkillGuy">@OverkillGuy</a> on 2025-02-06 02:13</div>
            <div class="timeline-body"><p>Another alternative, for those who feel this is the last feature missing from uv to move over:
Accept that we don't care about current version as much as bumping, and <details></p>
<summary> replace the package bumping command with `bump-my-version`.</summary>

<p>Docs: https://callowayproject.github.io/bump-my-version/</p>
<p>Configured for your particular repo via <code>pyproject.toml</code>.</p>
<p>In my case:</p>
<pre><code class="language-toml">[tool.bumpversion]
allow_dirty = false
commit = true
message = &quot;Bump to version v{new_version}&quot;
tag = true
tag_message = &quot;Release v{new_version}&quot;
setup_hooks = [&quot;make&quot;]  # Run 'make' as validation before starting

[[tool.bumpversion.files]]
filename = &quot;pyproject.toml&quot;
search = 'version = &quot;{current_version}&quot;'
replace = 'version = &quot;{new_version}&quot;'

[[tool.bumpversion.files]]
filename = &quot;CHANGELOG.md&quot;
search = &quot;## [Unreleased]&quot;
replace = &quot;## [Unreleased]\n\n## v{new_version} - {now:%Y-%m-%d}&quot;
</code></pre>
<p>Running it via:</p>
<pre><code>bump-my-version bump patch
</code></pre>
<p>This does:</p>
<ul>
<li>Update the actual version in <code>pyproject.toml</code> with semver meaning</li>
<li>Inserts the latest version marker + date in changelog's unreleased section</li>
<li>Commits the result with a specific message</li>
<li>Git tags the new version with specific message</li>
</ul>
<pre><code class="language-diff">--- a/CHANGELOG.md
+++ b/CHANGELOG.md
@@ -5,6 +5,8 @@ The project uses semantic versioning (see [semver](https://semver.org)).

 ## [Unreleased]

+## v0.1.1 - 2025-02-06
+
 ### Fixed
 - No longer crashing on the bad thing

 ## v0.1.0 - 2025-01-20

 ### Added
diff --git a/pyproject.toml b/pyproject.toml
index eec4d73..d64caef 100644
--- a/pyproject.toml
+++ b/pyproject.toml
@@ -3,7 +3,7 @@ name = &quot;redis_backend&quot;
 description = &quot;A cool project&quot;
 authors = [&quot;...&quot;]
 readme = &quot;README.md&quot;
-version = &quot;0.1.0&quot;
+version = &quot;0.1.1&quot;
</code></pre>
<p>So I call
<code>make release BUMP=minor</code>,
which runs this magic in <code>Makefile</code></p>
<pre><code class="language-make"># Make a release commit + tag, creating Changelog entry
# Set BUMP variable to any of supported (major, minor, patch)
# See 'bump-my-version show-bump' for options
# Variable BUMP defaults to 'patch' (v1.2.3 -&gt; v1.2.4)
.PHONY: release
BUMP=patch
release:
	uvx bump-my-version bump ${BUMP}
</code></pre>
<p>And to remind ourselves of the patterns, we can print the possible future versions:</p>
<pre><code class="language-shell">$  uvx bump-my-version show-bump
0.1.1 ‚îÄ‚îÄ bump ‚îÄ‚î¨‚îÄ major ‚îÄ 1.0.0
               ‚îú‚îÄ minor ‚îÄ 0.2.0
               ‚ï∞‚îÄ patch ‚îÄ 0.1.2
</code></pre>
</details>

<p>I hope others like me will feel this is good enough to be unblocked, and move their life over to uv, and Be Happy.</p>
<p>... but I'd still love to get this natively in uv if we can ;)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../aws-powertools/powertools-lambda-python/issues/5624.html">aws-powertools/powertools-lambda-python#5624</a> on 2025-02-06 11:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../yamatt/homoglyphs/pulls/16.html">yamatt/homoglyphs#16</a> on 2025-02-06 19:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kwaegel">@kwaegel</a> on 2025-02-10 19:44</div>
            <div class="timeline-body"><p>There are a number of workarounds posted so far, but I'll add one more to the list.</p>
<p>Target workflow.</p>
<ul>
<li>Package version is automatically derived from the last Git tag.</li>
<li><code>make version</code> prints the current package version.</li>
<li><code>make next-version $PART</code> prints the next version, with the {major, minor, patch} sections incremented. This is used to create a new tag when CI merges an appropriately tagged PR.</li>
</ul>
<p>Implementation:</p>
<ul>
<li>I used the <a href="https://github.com/ninoseki/uv-dynamic-versioning/">uv-dynamic-versioning</a> plugin, which works with the hatchling build backend. Seems like it's intended to be a drop-in replacement for <code>poetry-dynamic-versioning</code>. This causes <code>uv build</code> to build package files with the correct version.</li>
<li>To print the current version, I use the <a href="https://github.com/mtkennerly/dunamai">dunamai</a> CLI directly:</li>
</ul>
<pre><code>.PHONY: version
version:
	@uv run dunamai from git --bump --style pep440
</code></pre>
<ul>
<li>To bump the version, using <code>bump-my-version</code> seemed like a moderately heavyweight dependency, so I ended up using the <a href="https://github.com/mtkennerly/dunamai">dunamai</a> API directly from a tiny Python script called from the Makefile:</li>
</ul>
<pre><code>.PHONY: next-version
## Compute the next package version, using NEXT={major|minor|patch}
next-version:
	#@uv run bump-my-version show new_version --increment $(NEXT)  # Alternative
	@uv run python next_version.py $(NEXT)
</code></pre>
<p><code>next_version.py</code>:</p>
<pre><code>import sys
from dunamai import Version
bump_type = sys.argv[1]
index = {&quot;major&quot;: 0, &quot;minor&quot;: 1, &quot;patch&quot;: 2}[bump_type]
version = Version.from_git(strict=True)
bumped_version = version.bump(index=index).serialize(format=&quot;{major}.{minor}.{patch}&quot;)
print(bumped_version)
</code></pre>
<p>Keeping my fingers crossed that this only needs to be a &quot;temporary&quot; workaround, but I'm not going to let it stop me from migrating some of our legacy build systems over to uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/11475.html">astral-sh/uv#11475</a> on 2025-02-13 14:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../TechnologyBrewery/habushu/pulls/224.html">TechnologyBrewery/habushu#224</a> on 2025-02-13 20:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Blindstars">@Blindstars</a> on 2025-02-15 20:16</div>
            <div class="timeline-body"><p>+1 - Would use this all day long in replacement of poetry version.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/11679.html">astral-sh/uv#11679</a> on 2025-02-21 18:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vishnu-itachi">@vishnu-itachi</a> on 2025-03-04 19:10</div>
            <div class="timeline-body"><p>Any idea on when this will be merged?. This is the only thing keeping me from switching to uv in my company. Don't want to pull poetry as dependency or use a custom script.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-04 19:59</div>
            <div class="timeline-body"><p>As previously mentioned, please don't post +1 comments (üëç the issue instead) or ask for updates (we will share updates as they come). There are many subscribers to this issue, let's keep notifications relevant and high quality.</p>
<p>I'm actively working on the design for this and would appreciate more context on <em>when</em> and <em>how</em> this command is used.</p>
<ol>
<li>Do you just need this on release?</li>
<li>If so, would your need be served by (as an example) <code>uv release</code> which does a version bump, <code>uv build</code>, and <code>uv publish</code>? As a minor note, if we go this direction we'd definitely need a way to separate version bumps from build for things like committing that change separately, e.g., <code>uv release --prepare --bump-version minor</code> then <code>uv release</code>. The goal here isn't to design the final interface, but explore the concept, so take the examples with a grain of salt.</li>
<li>Are there other use-cases for changing the version?</li>
<li>When do you need to inspect the version? What do you do with the retrieved version?</li>
<li>Are you currently using <code>uv version</code> to inspect uv's version?</li>
<li>Are you using semver? Are you using calver? How would you expect this to work in a calver project?</li>
<li>How do you currently decide if a version should be patch, minor, or major?</li>
<li>Do you need to set a specific version number instead of bumping? Why?</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/badrobit">@badrobit</a> on 2025-03-04 20:14</div>
            <div class="timeline-body"><ol>
<li><p>Do you just need this on release?</p>
<ul>
<li>We usually do the bump manually during our PR process.</li>
</ul>
</li>
<li><p>If so, would your need be served by (as an example) <code>uv release</code> which does a version bump, <code>uv build</code>, and <code>uv publish</code>? As a minor note, if we go this direction we'd definitely need a way to separate version bumps from build for things like committing that change separately, e.g., <code>uv release --prepare --bump-version minor</code> then <code>uv release</code>. The goal here isn't to design the final interface, but explore the concept, so take the examples with a grain of salt.</p>
<ul>
<li>my personal preference would be for a new command such as <code>uv bump-version --major|minor|patch</code></li>
</ul>
</li>
<li><p>Are there other use-cases for changing the version?</p>
<ul>
<li>Probably but I think those would be outside a <code>bump-version</code> command and could be handled manually at least to start üôÇ</li>
</ul>
</li>
<li><p>When do you need to inspect the version? What do you do with the retrieved version?</p>
<ul>
<li>We do config control and it is used to set the version of the python package?</li>
</ul>
</li>
<li><p>Are you currently using <code>uv version</code> to inspect uv's version?</p>
<ul>
<li>Yup</li>
</ul>
</li>
<li><p>Are you using semver? Are you using calver? How would you expect this to work in a calver project?</p>
<ul>
<li>semver</li>
</ul>
</li>
<li><p>How do you currently decide if a version should be patch, minor, or major?&gt;</p>
<ul>
<li>its mostly an internal decision not sure if it could be automatically detected, usually we follow semvers guidance</li>
</ul>
</li>
<li><p>Do you need to set a specific version number instead of bumping? Why?</p>
<ul>
<li>sometimes, almost always because a mistake was made, in this case for us requiring a manual edit to the <code>pyproject.toml</code> would be expected.</li>
</ul>
</li>
<li><p>Do you need to programmatically read or update other pyproject.toml fields? Like project.authors, project.requires-python, build-system, tool.uv.*, etc.</p>
<ul>
<li>We do as part of some of our &quot;in-house&quot; tooling but I don't think this is something I would rely on <code>uv</code> providing the functionality for. that said if <code>uv</code> were to provide a pythonic interface that would be awesome but most of the time we just read it in as TOML and grab what we are looking for.</li>
</ul>
</li>
</ol>
<p>Hope this helps!! (edit was for formatting) (added response to other question)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/slhck">@slhck</a> on 2025-03-04 20:21</div>
            <div class="timeline-body"><blockquote>
<ol>
<li>Do you just need this on release?</li>
</ol>
</blockquote>
<p>No, we might also want to get the current version directly without resorting to TOML parsing or <code>__init__.py</code> file grepping etc.</p>
<blockquote>
<ol start="2">
<li>If so, would your need be served by (as an example) <code>uv release</code> which does a version bump, <code>uv build</code>, and <code>uv publish</code>? As a minor note, if we go this direction we'd definitely need a way to separate version bumps from build for things like committing that change separately, e.g., <code>uv release --prepare --bump-version minor</code> then <code>uv release</code>. The goal here isn't to design the final interface, but explore the concept, so take the examples with a grain of salt.</li>
</ol>
</blockquote>
<p>This would be nice to have but there may be many cases where people still do a lot of manual things between bumping the version and actually making the release, e.g. bumping first, creating a commit, creating the changelog, then git-amending that changelog etc.</p>
<blockquote>
<ol start="3">
<li>Are there other use-cases for changing the version?</li>
</ol>
</blockquote>
<p>Not that I can think of.</p>
<blockquote>
<ol start="4">
<li>When do you need to inspect the version? What do you do with the retrieved version?</li>
</ol>
</blockquote>
<p>We sometimes use it for other, more complex build scripts, or within CI runs.</p>
<blockquote>
<ol start="5">
<li>Are you currently using <code>uv version</code> to inspect uv's version?</li>
</ol>
</blockquote>
<p>No, and I would have expected it to be <code>uv --version</code> like most other CLI tools do.</p>
<blockquote>
<ol start="6">
<li>Are you using semver? Are you using calver? How would you expect this to work in a calver project?</li>
</ol>
</blockquote>
<p>Semver exclusively.</p>
<blockquote>
<ol start="7">
<li>How do you currently decide if a version should be patch, minor, or major?</li>
</ol>
</blockquote>
<p>This is mostly a manual decision.</p>
<p>However there are projects using conventional commits where you could infer this automatically based on the previous commit types (feature/fix/‚Ä¶).</p>
<blockquote>
<ol start="8">
<li>Do you need to set a specific version number instead of bumping? Why?</li>
</ol>
</blockquote>
<p>We have some use cases where we have one project A's version be dependent on another project B's version, so if B gets released with a new version, <em>sometimes</em> A will also get a new version. So we might just skip some versions in between.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/HenriBlacksmith">@HenriBlacksmith</a> on 2025-03-04 22:40</div>
            <div class="timeline-body"><blockquote>
<ol>
<li>Do you just need this on release?</li>
</ol>
</blockquote>
<p>Yes.</p>
<blockquote>
<ol start="2">
<li>If so, would your need be served by (as an example) uv release which does a version bump, uv build, and uv publish? As a minor note, if we go this direction we'd definitely need a way to separate version bumps from build for things like committing that change separately, e.g., uv release --prepare --bump-version minor then uv release. The goal here isn't to design the final interface, but explore the concept, so take the examples with a grain of salt.</li>
</ol>
</blockquote>
<p>We usually bump the version from a manual CI job (GitLab CI), this creates a tagged commit which triggers a tag pipeline which does the build and release. If it is a library, then it is published to something like Artifactory.</p>
<p>We usually also bump a few other files configured via templates in the <code>.bumpversion.toml</code> file (like a <code>Chart.yaml</code> for Helm) or even in a bash script which creates the release changelog from an unreleased changelog</p>
<blockquote>
<ol start="3">
<li>Are there other use-cases for changing the version?</li>
</ol>
</blockquote>
<p>No</p>
<blockquote>
<ol start="4">
<li>When do you need to inspect the version? What do you do with the retrieved version?</li>
</ol>
</blockquote>
<p>Version is not inspected from <code>pyproject.toml</code> otherwise.</p>
<p>At runtime or in tests we read a <code>VERSION</code> file.
This file is maintained by bump-my-version too (as other versionned files)</p>
<blockquote>
<ol start="5">
<li>Are you currently using uv version to inspect uv's version?</li>
</ol>
</blockquote>
<p>No but looks like a useful and natural interface. (Like <code>go version</code> or <code>terraform version</code>)</p>
<blockquote>
<ol start="6">
<li>Are you using semver? Are you using calver? How would you expect this to work in a calver project?</li>
</ol>
</blockquote>
<p>We use semver (<code>major.minor.patch</code>).</p>
<blockquote>
<ol start="7">
<li>How do you currently decide if a version should be patch, minor, or major?</li>
</ol>
</blockquote>
<p>It is a manual action, as bump-my-version provides a way to bump each version part.
We have three manual GitLab CI jobs from main branch, we manually choose the right job.</p>
<blockquote>
<ol start="8">
<li>Do you need to set a specific version number instead of bumping? Why?</li>
</ol>
</blockquote>
<p>No</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-04 22:45</div>
            <div class="timeline-body"><p>Thanks for these quick responses! I want to add another question</p>
<ol start="9">
<li>Do you need to programmatically read or update other <code>pyproject.toml</code> fields? Like <code>project.authors</code>, <code>project.requires-python</code>, <code>build-system</code>, <code>tool.uv.*</code>, etc.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kwaegel">@kwaegel</a> on 2025-03-04 23:06</div>
            <div class="timeline-body"><blockquote>
<ol>
<li>Do you just need this on release?</li>
</ol>
</blockquote>
<p>No, we use git-based dynamic versioning via a hatch plugin (<code>hatch-vcs</code> or <code>uv-dynamic-versioning</code>) and want a way to print the project version without resorting to external tools or git tag parsing that could get out of sync with the plugin.</p>
<blockquote>
<ol start="2">
<li>If so, would your need be served by (as an example) uv release which does a version bump, uv build, and uv publish? As a minor note, if we go this direction we'd definitely need a way to separate version bumps from build for things like committing that change separately, e.g., uv release --prepare --bump-version minor then uv release. The goal here isn't to design the final interface, but explore the concept, so take the examples with a grain of salt.</li>
</ol>
</blockquote>
<p>Split commands would work better. I want to either get the current version, or get a bumped version string to externally create a new git tag, which then propagates back to dynamic version generation.</p>
<p>Something like <code>uv version</code> and <code>uv version bump patch</code> would be sufficient for my use case, though the latter would probably need a <code>--dry-run</code> flag or similar if it normally modifies the project file.</p>
<blockquote>
<ol start="3">
<li>Are there other use-cases for changing the version?</li>
</ol>
</blockquote>
<p>No.</p>
<blockquote>
<ol start="4">
<li>When do you need to inspect the version? What do you do with the retrieved version?</li>
</ol>
</blockquote>
<p>During CI (when triggered via a comment command to create a release), we get the bumped version string, create a git tag, then run the build that dynamically uses the git-derived version. Since it's on a tag, it is now exactly the bumped version string. For non-commit releases, it just reads the current version and posts a comment saying what development version is available for download.</p>
<blockquote>
<ol start="5">
<li>Are you currently using uv version to inspect uv's version?</li>
</ol>
</blockquote>
<p>No.</p>
<blockquote>
<ol start="6">
<li>Are you using semver? Are you using calver? How would you expect this to work in a calver project?</li>
</ol>
</blockquote>
<p>Semver, in the form <code>x.y.z.devN+hash</code>. Builds on a git tag use the tag version, and builds not on a tag append the <code>.devN+hash</code> postfix to denote a development release.</p>
<blockquote>
<ol start="7">
<li>How do you currently decide if a version should be patch, minor, or major?</li>
</ol>
</blockquote>
<p>Manually set by a Git comment command (e.g. <code>!patch</code>), which triggers a CI build.</p>
<blockquote>
<ol start="8">
<li>Do you need to set a specific version number instead of bumping? Why?</li>
</ol>
</blockquote>
<p>No.</p>
<blockquote>
<ol start="9">
<li>Do you need to programmatically read or update other pyproject.toml fields? Like project.authors, project.requires-python, build-system, tool.uv.*, etc.</li>
</ol>
</blockquote>
<p>No.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/HenriBlacksmith">@HenriBlacksmith</a> on 2025-03-04 23:36</div>
            <div class="timeline-body"><blockquote>
<p>Thanks for these quick responses! I want to add another question</p>
<ol start="9">
<li>Do you need to programmatically read or update other <code>pyproject.toml</code> fields? Like <code>project.authors</code>, <code>project.requires-python</code>, <code>build-system</code>, <code>tool.uv.*</code>, etc.</li>
</ol>
</blockquote>
<p>The only field I could think of could be the <code>project.requires-python</code> as we have an homemade internal bot (somewhat similar to Renovate or Dependabot) which bumps our CI and runtime Docker Python images.</p>
<p>uv is part of our worker image to build the <code>uv.lock</code> files when updating Python packages.</p>
<p>But <code>uv</code> is not strictly required for that (TOML parsing lib would be enough as this bot touches non-Python related files like <code>Dockerfile</code> and <code>.gilab-ci.yml</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sstoefe">@sstoefe</a> on 2025-03-05 07:54</div>
            <div class="timeline-body"><p>We currently use a monorepo structure with one common library and 5 different applications that are using the common library. When we change the version in the common library we also update the version in all applications that use that library. Currently, we are using a manual approach with <code>bumpver</code> but we are looking for an alternative to do it automatically via CI.</p>
<blockquote>
<ol>
<li>Do you just need this on release?</li>
</ol>
</blockquote>
<p>No, we also need the current version sometimes in our CI environment. Currently, we grep it from <strong>init</strong>.py files.</p>
<blockquote>
<ol start="2">
<li>If so, would your need be served by (as an example) uv release which does a version bump, uv build, and uv publish? As a minor note, if we go this direction we'd definitely need a way to separate version bumps from build for things like committing that change separately, e.g., uv release --prepare --bump-version minor then uv release. The goal here isn't to design the final interface, but explore the concept, so take the examples with a grain of salt.</li>
</ol>
</blockquote>
<p>For our workflow we would also need a way to bump the version to a dirty/dev release since in our pipelines we also run end2end tests before we merge a PR (currently every PR leads to a new version of a component). In the end2end tests we also install the applications from our internal pypi. But since the version is not yet released we create development drops for those tests. When the PR gets merged we then finally release the actual version.</p>
<blockquote>
<ol start="3">
<li>Are there other use-cases for changing the version?</li>
</ol>
</blockquote>
<p>Yes, as described in 2. Before we actually release a new version we currently replace the version in pyproject.toml and <strong>init</strong>.py in our CI with a <code>-dev</code> version (currently follows <major>.<minor>.<patch>-dev+pr<pr-number> to have unique drops per PR). Would also be cool if that was supported.</p>
<blockquote>
<ol start="4">
<li>When do you need to inspect the version? What do you do with the retrieved version?</li>
</ol>
</blockquote>
<p>See 3. For creating a development drop.</p>
<blockquote>
<ol start="5">
<li>Are you currently using uv version to inspect uv's version?</li>
</ol>
</blockquote>
<p>No</p>
<blockquote>
<ol start="6">
<li>Are you using semver? Are you using calver? How would you expect this to work in a calver project?</li>
</ol>
</blockquote>
<p>Semver <code>&lt;major&gt;.&lt;minor&gt;.&lt;patch&gt;(-dev+pr&lt;pr-number&gt;</code></p>
<blockquote>
<ol start="7">
<li>How do you currently decide if a version should be patch, minor, or major?</li>
</ol>
</blockquote>
<p>Currently, it's a manual step. Developer creates a PR that already has the bumped version. But this leads to problems since when another PR got merged there are merge conflicts and the version needs to be bumped again. Currently, we use <code>bumpver</code> for that.</p>
<blockquote>
<ol start="8">
<li>Do you need to set a specific version number instead of bumping? Why?</li>
</ol>
</blockquote>
<p>Maybe for the <code>-dev</code> use case. But in general no.</p>
<blockquote>
<ol start="9">
<li>Do you need to programmatically read or update other pyproject.toml fields? Like project.authors, project.requires-python, build-system, tool.uv.*, etc.</li>
</ol>
</blockquote>
<p>No, currently I don't see a use case in our workflow.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Galtozzy">@Galtozzy</a> on 2025-03-05 09:21</div>
            <div class="timeline-body"><blockquote>
<ol>
<li>Do you just need this on release?</li>
</ol>
</blockquote>
<p>No, we also need to get the version dynamically in CI and other checks. (<code>poetry version -s</code> is used).</p>
<blockquote>
<ol start="2">
<li>If so, would your need be served by (as an example) <code>uv release</code> which does a version bump, <code>uv build</code>, and <code>uv publish</code>? As a minor note, if we go this direction we'd definitely need a way to separate version bumps from build for things like committing that change separately, e.g., <code>uv release --prepare --bump-version minor</code> then <code>uv release</code>. The goal here isn't to design the final interface, but explore the concept, so take the examples with a grain of salt.</li>
</ol>
</blockquote>
<p>I don't think so, I think it is best when those concepts are separated and controlled differently.</p>
<blockquote>
<ol start="3">
<li>Are there other use-cases for changing the version?</li>
</ol>
</blockquote>
<p>We use version bumps manually at different stages of development.</p>
<ul>
<li>To alert which version broke e2e tests.</li>
<li>To bake it into the built container.</li>
<li>When a release is created through CI, the version is read and a tag is created with it.</li>
</ul>
<blockquote>
<ol start="5">
<li>Are you currently using <code>uv version</code> to inspect uv's version?</li>
</ol>
</blockquote>
<blockquote>
<ol start="4">
<li>When do you need to inspect the version? What do you do with the retrieved version?
Mostly in CI/CD:</li>
</ol>
</blockquote>
<p>No.</p>
<blockquote>
<ol start="6">
<li>Are you using semver? Are you using calver? How would you expect this to work in a calver project?</li>
</ol>
</blockquote>
<p>We use semver. I think the concepts are the same, though I think there will have to be a template of some sort to derive the calver version format.</p>
<blockquote>
<ol start="7">
<li>How do you currently decide if a version should be patch, minor, or major?</li>
</ol>
</blockquote>
<p>It's a manual action, so it depends on the work that was done.</p>
<blockquote>
<ol start="8">
<li>Do you need to set a specific version number instead of bumping? Why?</li>
</ol>
</blockquote>
<p>Very rarely. When this is the case it's almost always to align separate apps to have the same version on a major release.</p>
<blockquote>
<ol start="9">
<li>Do you need to programmatically read or update other pyproject.toml fields? Like project.authors, project.requires-python, build-system, tool.uv.*, etc.</li>
</ol>
</blockquote>
<p>Currently we don't, but I can see where reading <code>requires-python</code> could come in handy.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/krishan-patel001">@krishan-patel001</a> on 2025-03-05 09:41</div>
            <div class="timeline-body"><blockquote>
<ol>
<li>Do you just need this on release?</li>
</ol>
</blockquote>
<p>No we need this throughout different stages of development.</p>
<blockquote>
<ol start="3">
<li>If so, would your need be served by (as an example) <code>uv release</code> which does a version bump, <code>uv build</code>, and <code>uv publish</code>? As a minor note, if we go this direction we'd definitely need a way to separate version bumps from build for things like committing that change separately, e.g., <code>uv release --prepare --bump-version minor</code> then <code>uv release</code>. The goal here isn't to design the final interface, but explore the concept, so take the examples with a grain of salt.</li>
</ol>
</blockquote>
<p>No, as we bump versions on applications that aren't packages and therefore don't need to be built or published.</p>
<blockquote>
<ol start="5">
<li>Are there other use-cases for changing the version?</li>
</ol>
</blockquote>
<p>Yes, for unique github releases and tracking what version of code broke anything.</p>
<blockquote>
<ol start="7">
<li>When do you need to inspect the version? What do you do with the retrieved version?</li>
</ol>
</blockquote>
<p>We use the package version when creating releases. We don't use uv's version for anything.</p>
<blockquote>
<ol start="9">
<li>Are you currently using <code>uv version</code> to inspect uv's version?
No</li>
</ol>
</blockquote>
<blockquote>
<ol start="11">
<li>Are you using semver? Are you using calver? How would you expect this to work in a calver project?
We use semver</li>
</ol>
</blockquote>
<blockquote>
<ol start="13">
<li>How do you currently decide if a version should be patch, minor, or major?</li>
</ol>
</blockquote>
<p>Dependent on if we are doing a breaking change or not.</p>
<blockquote>
<ol start="15">
<li>Do you need to set a specific version number instead of bumping? Why?</li>
</ol>
</blockquote>
<p>To set unique dev versions per developer during development.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nim65s">@nim65s</a> on 2025-03-05 10:19</div>
            <div class="timeline-body"><blockquote>
<ol>
<li>Do you just need this on release?</li>
</ol>
</blockquote>
<p>Yes</p>
<blockquote>
<ol start="2">
<li>If so, would your need be served by (as an example) <code>uv release</code> which does a version bump, <code>uv build</code>, and <code>uv publish</code>? As a minor note, if we go this direction we'd definitely need a way to separate version bumps from build for things like committing that change separately, e.g., <code>uv release --prepare --bump-version minor</code> then <code>uv release</code>. The goal here isn't to design the final interface, but explore the concept, so take the examples with a grain of salt.</li>
</ol>
</blockquote>
<p>I would prefer a way to let me tag a release, and let that tag trigger a github action that would build (for multiple OS / arch / python) and publish (throug Trusted Publisher workflow)</p>
<blockquote>
<ol start="3">
<li>Are there other use-cases for changing the version?</li>
</ol>
</blockquote>
<p>No</p>
<blockquote>
<ol start="4">
<li>When do you need to inspect the version? What do you do with the retrieved version?</li>
</ol>
</blockquote>
<p>I need both the current and updated ones to generate a commit which update the version number, date, and diff link in the changelog. I would not have to bake a script for that if uv provided hooks like <a href="https://github.com/crate-ci/cargo-release">cargo-release</a></p>
<blockquote>
<ol start="5">
<li>Are you currently using <code>uv version</code> to inspect uv's version?</li>
</ol>
</blockquote>
<p>No, <code>uv --version</code> seems more natural for that</p>
<blockquote>
<ol start="6">
<li>Are you using semver? Are you using calver? How would you expect this to work in a calver project?</li>
</ol>
</blockquote>
<p>Yes, yes (different projects).  eg., given pyproject <code>tool.uv.version-scheme = &quot;YYYY.MINOR&quot;</code> (<code>&quot;semver'</code> could be an alias for <code>&quot;MAJOR.MINOR.PATCH&quot;</code>)</p>
<pre><code>uv version # show current
uv version {major,minor,patch,micro} # bump a version component
uv version bump # bump date based components
</code></pre>
<blockquote>
<ol start="7">
<li>How do you currently decide if a version should be patch, minor, or major?</li>
</ol>
</blockquote>
<p>breaking changes / new features / any other reason</p>
<blockquote>
<ol start="8">
<li>Do you need to set a specific version number instead of bumping? Why?</li>
</ol>
</blockquote>
<p>No</p>
<blockquote>
<p>Do you need to programmatically read or update other pyproject.toml fields? Like project.authors, project.requires-python, build-system, tool.uv.*, etc.</p>
</blockquote>
<p>No</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ebits21">@ebits21</a> on 2025-03-06 01:57</div>
            <div class="timeline-body"><blockquote>
<p>Do you just need this on release?</p>
</blockquote>
<p>No</p>
<blockquote>
<p>Are there other use-cases for changing the version?</p>
</blockquote>
<p>No</p>
<blockquote>
<p>When do you need to inspect the version? What do you do with the retrieved version?</p>
</blockquote>
<p>Just for my personal knowledge.</p>
<blockquote>
<p>Are you currently using uv version to inspect uv's version?</p>
</blockquote>
<p>Rarely, as others have said <code>uv ‚Äîversion</code> seems more appropriate.</p>
<blockquote>
<p>Are you using semver? Are you using calver? How would you expect this to work in a calver project?</p>
</blockquote>
<p>Both. Calver I personally would want it to bump to the current date as yyyy.mm.dd but I‚Äôm sure there‚Äôs many ways to do this.</p>
<blockquote>
<p>How do you currently decide if a version should be patch, minor, or major?</p>
</blockquote>
<p>Major: breaking changes / minor: new features / patch: anything else.</p>
<blockquote>
<p>Do you need to set a specific version number instead of bumping? Why?</p>
</blockquote>
<p>Sometimes but I would just set it manually</p>
<blockquote>
<p>Do you need to programmatically read or update other pyproject.toml fields? Like project.authors, project.requires-python, build-system, tool.uv.*, etc.</p>
</blockquote>
<p>No</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/daviewales">@daviewales</a> on 2025-03-07 00:47</div>
            <div class="timeline-body"><p>This is what my current process looks like with Poetry.
I'd be hoping to replicate something like this with UV.</p>
<pre><code class="language-sh">poetry version # show current version from pyproject.toml (includes project name)
poetry version minor # bump minor version in pyproject.toml
git tag &quot;v$(poetry version -s)&quot; # add git tag with current version from pyproject.toml (-s flag shows only the version number)
</code></pre>
<ol>
<li>I don't just need this on release.</li>
<li>An all-in-one <code>uv release</code> command wouldn't suit my workflow. (For example, my PyPI deployments are automated with GitHub Actions which trigger when I push new version tags. So all I need is a way to bump the version and include it in a git tag.)</li>
<li>I'm not sure what other usecases would be for changing the version?</li>
<li>I sometimes want to interactively view the current version, without needing to inspect the <code>pyproject.toml</code> file. Other times, I want to fetch just the version number to include in a git tag.</li>
<li>I do not use <code>uv version</code>. <code>uv --version</code> and <code>uv -V</code> are sufficient.</li>
<li>I'm using semver. Note for calver that <code>poetry version</code> accepts <em>either</em> a valid <a href="https://peps.python.org/pep-0440/">PEP 440 version</a> or a <a href="https://python-poetry.org/docs/cli/#version">valid bump rule</a>. Because the bump rules are not valid PEP 440 versions, this overloading works fine. So, for calver, a <code>poetry</code> user could set the version to the current date with: <code>poetry version $(date +%Y.%m.%d)</code> (This would work for <code>rye version</code> too.)</li>
<li>Most of my projects are still in the <code>0.1.0</code> phase of semver, so breaking changes are <code>minor</code> and all other changes are <code>patch</code>. For projects which make it to <code>1.0.0</code>, then breaking changes would be <code>major</code>, big non-breaking changes (new features) would <code>minor</code>, and everything else would be <code>patch</code>.</li>
<li>I don't usually need to set a specific version number instead of bumping, but I can imagine that this would be a useful escape hatch.</li>
<li>I haven't needed to programmatically read or update other <code>pyproject.toml</code> fields.</li>
</ol>
<p>I may be biased as an existing Poetry user, but I think they get the API pretty right for <a href="https://python-poetry.org/docs/cli/#version">poetry version</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/HenriBlacksmith">@HenriBlacksmith</a> on 2025-03-07 02:12</div>
            <div class="timeline-body"><p>A few suggestions/additions:</p>
<ul>
<li>bump-my-version provides a useful and visual <code>show-bump</code> command which would be a nice addition to the interface: https://github.com/callowayproject/bump-my-version?tab=readme-ov-file#visualize-the-versioning-path</li>
<li>As the potential need to read more fields from the <code>pyproject.toml</code> has been mentioned and the conflict with existing <code>uv version</code> is a concern, maybe using <code>uv project version</code> could be an option</li>
</ul>
<p>This could give commands like:</p>
<ul>
<li><code>uv project version bump minor</code></li>
<li><code>uv project version show</code> or even simply <code>uv project version</code></li>
<li><code>uv project version show-bump</code></li>
<li><code>uv project add author</code> (why not?)</li>
</ul>
<p>The commands are a bit longer though (but those can easily be aliased).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/12055.html">astral-sh/uv#12055</a> on 2025-03-07 18:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/12349.html">astral-sh/uv#12349</a> on 2025-03-20 21:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-03-20 21:49</div>
            <div class="timeline-body"><p>We've got a PR up for an interface/implementation we're reasonably happy with: https://github.com/astral-sh/uv/pull/12349</p>
<p>We might still make <code>uv version</code> sugar for <code>uv metadata version</code> if people really want but for now it's cleanest to not change the semantics of an existing command, and we want this metadata namespace claimed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ebits21">@ebits21</a> on 2025-03-21 19:53</div>
            <div class="timeline-body"><blockquote>
<p>We've got a PR up for an interface/implementation we're reasonably happy with: <a href="https://github.com/astral-sh/uv/pull/12349">#12349</a></p>
<p>We might still make <code>uv version</code> sugar for <code>uv metadata version</code> if people really want but for now it's cleanest to not change the semantics of an existing command, and we want this metadata namespace claimed.</p>
</blockquote>
<p>Honest feedback: it‚Äôs pretty verbose command wise. I would love the uv version sugar as my 2 cents of feedback.</p>
<p>I personally like just uv bump as well.</p>
<p>Thanks for adding this! Very appreciative.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-21 19:55</div>
            <div class="timeline-body"><p><code>uv bump</code> doesn't really make sense for the use-case of reading the version.</p>
<p>We're not particularly settled between <code>uv metadata version</code> and <code>uv version</code> though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ebits21">@ebits21</a> on 2025-03-21 20:08</div>
            <div class="timeline-body"><blockquote>
<p><code>uv bump</code> doesn't really make sense for the use-case of reading the version.</p>
<p>We're not particularly settled between <code>uv metadata version</code> and <code>uv version</code> though.</p>
</blockquote>
<p>I get it.</p>
<p>I do think <code>uv self version</code> for uv‚Äôs version and <code>uv version ‚Äîbump</code> is quite elegant.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/daviewales">@daviewales</a> on 2025-03-22 03:00</div>
            <div class="timeline-body"><blockquote>
<p>I do think uv self version for uv‚Äôs version and uv version ‚Äîbump is quite elegant.</p>
</blockquote>
<p>I feel that <code>uv --version</code> is better than <code>uv self version</code>.</p>
<p><code>uv version --bump</code> is more explicit than <code>uv version [patch|minor|major|version_string]</code> (like Poetry), but I still think the latter is the most elegant, at the expense of disallowing versions called 'patch', 'minor' or 'major'.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-23 03:14</div>
            <div class="timeline-body"><p><code>uv --version</code> isn't going anywhere ‚Äî we just also have a whole <code>uv self</code> interface and that's where I'd expect a long-form command for uv to report its own version to be.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dusktreader">@dusktreader</a> on 2025-03-24 01:16</div>
            <div class="timeline-body"><p>I think that there would be unnecessary confusion by having a subcommand named <code>version</code> <em>and</em> a root-command <code>--version</code> option. You're going to find yourself trying to help people understand the difference between <code>uv version</code> and <code>uv --version</code> <em>constantly</em>.</p>
<p>I think it makes a lot of sense to have a <code>uv metadata version</code> subcommand, but I have to say that typing out <code>metadata</code> every time is going to be irritating. What about shorting <code>metadata</code> to just <code>meta</code>. It still conveys the idea well but is much nicer to type.</p>
<p>I would be very excited about being able to type <code>uv meta version --bump=minor</code> in my projects soon.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/slingshotsys">@slingshotsys</a> on 2025-03-24 01:33</div>
            <div class="timeline-body"><p>One more vote for shorter being better. As the uv command I will probably use the most, I'd much rather type <code>uv version minor</code> than <code>uv metadata version --bump minor</code> every time.</p>
<p><code>uv --version</code> or <code>uv -v/-V</code> or <code>uv self version</code> all seem very intuitive to me and <code>--version/-v/-V</code> in particular align with how <code>poetry</code>, <code>npm</code>, and <code>python</code> all work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/HenriBlacksmith">@HenriBlacksmith</a> on 2025-03-24 10:00</div>
            <div class="timeline-body"><blockquote>
<p>I think that there would be unnecessary confusion by having a subcommand named <code>version</code> <em>and</em> a root-command <code>--version</code> option. You're going to find yourself trying to help people understand the difference between <code>uv version</code> and <code>uv --version</code> <em>constantly</em>.</p>
<p>I think it makes a lot of sense to have a <code>uv metadata version</code> subcommand, but I have to say that typing out <code>metadata</code> every time is going to be irritating. What about shorting <code>metadata</code> to just <code>meta</code>. It still conveys the idea well but is much nicer to type.</p>
<p>I would be very excited about being able to type <code>uv meta version --bump=minor</code> in my projects soon.</p>
</blockquote>
<p>The command syntax is not as important as the feature, setting aliases is quite easy for those who need them.</p>
<p>And for my use-cases, it will be used in CI hence typing the command is not a question.</p>
<p>And the coherence with Cargo is interesting too: https://doc.rust-lang.org/cargo/commands/cargo-metadata.html</p>
<p>Having more automations around that command would be awesome (optional/configurable <code>git tag</code> and <code>commit</code> on bump), having a way to template other files, etc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2025-03-24 10:07</div>
            <div class="timeline-body"><p><code>--version</code>/<code>-V</code> is probably the most universal command line parameter there is (next to <code>--help</code>/<code>-h</code>). <code>uv self version</code> would be a welcome complement to the legacy <code>--version</code> parameter.</p>
<p>In case you‚Äôre unfamiliar, or if it‚Äôs been a while and you‚Äôve forgotten, run this in your terminal:</p>
<pre><code class="language-bash">python3 -c &quot;import this&quot;
</code></pre>
<p>I tend to concur with all of it, especially the last line.</p>
<p>The <code>uv metadata</code> namespace is a step in the right direction, but &quot;metadata&quot; is ambiguous. Which metadata are we talking about, uv metadata or project metadata? If we are targeting a project, <code>uv project version</code> might better reflect the intent.</p>
<p>In the same manner as <code>uv tool</code>, the <code>uv project</code> namespace could be added to collect all the commands that target projects (<code>uv project add</code>, <code>uv project sync</code>, <code>uv project init</code>, etc.), but the top-level commands should still be available since they make  the common case fast.</p>
<p>In the case of <code>uv version</code>, I think that it could print the version of the project first, followed by the version of uv, along with some type of hint promoting the namespaced commands <code>uv self version</code> and <code>uv project version</code>.</p>
<p>The <a href="https://docs.astral.sh/uv/concepts/">Concepts overview</a> page gives a good list of what might be desirable to capture as command namespaces:</p>
<ul>
<li>Projects (i.e. <code>uv project version</code> and <code>uv project sync</code>)</li>
<li>Tools (i.e. <code>uv tool add</code>)</li>
<li>Python (i.e. <code>uv python list</code>)</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mkk5">@mkk5</a> on 2025-03-31 18:49</div>
            <div class="timeline-body"><p>I didn‚Äôt have experience with <code>poetry version</code>, so I might be missing something, but what is the advantage of</p>
<blockquote>
<p>pyproject.toml file serving as the single source of truth for a project's version</p>
</blockquote>
<p>instead of using a git tag as the single version source, which, in my opinion, has certain advantages?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/slhck">@slhck</a> on 2025-03-31 19:21</div>
            <div class="timeline-body"><p>I'd say: Because projects are not always shared as Git repositories (in particular the actual Python distributions), and not everyone might use Git. The pyproject.toml file should be a single source of truth for the project and its metadata.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kwaegel">@kwaegel</a> on 2025-04-01 01:15</div>
            <div class="timeline-body"><blockquote>
<p>The current implementation errors the command on all operations if the version field is not defined (which I believe would be the case if dynamic = [&quot;version&quot;]).</p>
</blockquote>
<p>If I'm reading the current PR correctly, it looks like it won't be able to read the dynamic version generated by a plugin? That's a bit unfortunate, since I'm not entirely sure how to extract that bit of information without using external tools that could get out of sync with the project file (e.g. <code>uv run dunamai ...</code>).</p>
<p>If the <code>uv metadata version</code> command can't/won't handle dynamically generated version strings, is there a best practice on how to handle that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/codejunction">@codejunction</a> on 2025-04-02 20:00</div>
            <div class="timeline-body"><p>Just a thought based on https://pypi.org/project/bumpver/</p>
<ol>
<li><code>uv project bump --major</code> - for major version udpate. Eg: 1.9.11 -&gt; 2.0.0</li>
<li><code>uv project bump --minor</code> - for minor version update. Eg: 1.8.11 -&gt; 1.9.0</li>
<li><code>uv project bump --micro/--patch</code> - for micro or patch update. Eg: 1.9.11 -&gt; 1.9.12</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/12749.html">astral-sh/uv#12749</a> on 2025-04-08 16:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-04-29 21:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../Homebrew/homebrew-core/pulls/221925.html">Homebrew/homebrew-core#221925</a> on 2025-04-29 23:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../wntrblm/nox/issues/953.html">wntrblm/nox#953</a> on 2025-04-30 02:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Francesco146">@Francesco146</a> on 2025-04-30 19:36</div>
            <div class="timeline-body"><blockquote>
<p>For others who need this.</p>
<p>uvx --from=toml-cli toml set --toml-path=pyproject.toml project.version $VERSION</p>
<p>I'm using it like this in github action.</p>
<p>VERSION=$(uvx dunamai from any --no-metadata --style pep440)
uvx --from=toml-cli toml set --toml-path=pyproject.toml project.version $VERSION
uv build</p>
</blockquote>
<p>since https://github.com/astral-sh/uv/pull/12349 got merged, what's the new standard way to handle version bumps in github action?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-04-30 19:46</div>
            <div class="timeline-body"><p>I believe what you posted is, as of 0.7.1, equivalent to <code>uv version $VERSION</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lurebat">@lurebat</a> on 2025-05-18 21:53</div>
            <div class="timeline-body"><ol>
<li>#7785 was closed as a duplicate of this - however, the current implementation doesn't let you access the version from your package's code. Should I open a new issue?</li>
<li>Unlike most commands, this command doesn't support workspaces. Again, is this a separate issue to open?
Thanks</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-18 21:54</div>
            <div class="timeline-body"><p>What does &quot;access the version from your package's code&quot; mean?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lurebat">@lurebat</a> on 2025-05-18 22:00</div>
            <div class="timeline-body"><p>See for example - &quot;dynamic project version&quot; from <a href="https://backend.pdm-project.org/metadata/#dynamic-project-version">pdm</a></p>
<p>Basically I want to be able to access the &quot;version&quot; value from the pytoml in my code, so I could, for example, log it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/slhck">@slhck</a> on 2025-05-19 06:47</div>
            <div class="timeline-body"><p>Couldn't you get that via <a href="https://docs.python.org/3/library/importlib.metadata.html#importlib.metadata.version"><code>importlib.metadata.version</code></a>? It takes the version value from the <code>pyproject.toml</code> package:</p>
<pre><code class="language-python">version('my-package')
</code></pre>
<p>Then you would only have to specify it there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jamesmyatt">@jamesmyatt</a> on 2025-05-19 11:44</div>
            <div class="timeline-body"><blockquote>
<p>Couldn't you get that via <a href="https://docs.python.org/3/library/importlib.metadata.html#importlib.metadata.version"><code>importlib.metadata.version</code></a>? It takes the version value from the <code>pyproject.toml</code> package:</p>
<p>version('my-package')</p>
<p>Then you would only have to specify it there.</p>
</blockquote>
<p>This is the way. See https://packaging.python.org/en/latest/discussions/single-source-version/.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lurebat">@lurebat</a> on 2025-05-19 12:15</div>
            <div class="timeline-body"><p>Thank you - very useful.</p>
<p>Now the question of running the command on specific packages or the entire workspace.</p>
<p>Or even having just a singular version for a workspace, that the child packages inherit</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-19 13:41</div>
            <div class="timeline-body"><p>Please open new issues for both of these questions. You're pinging hundreds of people subscribed here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../encord-team/encord-client-python/pulls/943.html">encord-team/encord-client-python#943</a> on 2025-06-27 12:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../jakubplichta/grafana-dashboard-builder/issues/227.html">jakubplichta/grafana-dashboard-builder#227</a> on 2025-10-12 21:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../aaronclong/xspfify/pulls/2.html">aaronclong/xspfify#2</a> on 2025-11-22 01:00</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:33 UTC
    </footer>
</body>
</html>
