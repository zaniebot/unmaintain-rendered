<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Propose `--no-extra` Flag - astral-sh/uv #9333</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Propose `--no-extra` Flag</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9333">#9333</a>
        opened by <a href="https://github.com/paultreadel">@paultreadel</a>
        on 2024-11-21 18:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/paultreadel">@paultreadel</a> on 2024-11-21 18:04</div>
            <div class="timeline-body"><p>The new conflicting depencies handling introduced in 0.5.3 is great.  Able to solve several project challenges with it.</p>
<p>To enhance the feature I'd propose adding a <code>--no-extra</code> flag allowing a specific extra group to be excluded when used with <code>--all-extras</code>.</p>
<p>With the config below running <code>uv sync --all-extras</code>  results in an error.</p>
<pre><code>Resolved 3 packages in 1ms
error: extra `extra1`, extra `extra2` are incompatible with the declared conflicts: {`uv-conflicts[extra1]`, `uv-conflicts[extra2]`}
</code></pre>
<p>I'd propose one option for handling this to allow the user to specify which of the conflicting extras to exclude.  The option for this syntax could be helpful when the project has many optional extras where specifying each individual could become a long chain.</p>
<p><code>uv sync --all-extras --no-extra extra2</code></p>
<p>Similar functionality already exists for dependency groups with <code>uv sync --all-groups --no-groups &lt;NO_GROUP&gt;</code> and this could behave in a similar manner for extras as well.</p>
<pre><code class="language-toml">[project]
name = &quot;uv-conflicts&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = []

[project.optional-dependencies]
extra1 = [&quot;numpy==2.1.2&quot;]
extra2 = [&quot;numpy==2.0.0&quot;]

[tool.uv]
conflicts = [
    [
      { extra = &quot;extra1&quot; },
      { extra = &quot;extra2&quot; },
    ],
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-21 18:46</div>
            <div class="timeline-body"><p>I think this makes sense given that <code>--no-group</code> exists \cc @zanieb</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2024-11-22 13:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @charliermarsh on 2024-11-22 13:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-24 02:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-24 02:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/paultreadel">@paultreadel</a> on 2024-11-27 21:29</div>
            <div class="timeline-body"><p>Thanks for the prompt turnaround on the new feature!  Already using it in v0.5.5 and its working great for handling conflicting extras and simplifying the commands required to do so.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 04:39:08 UTC
    </footer>
</body>
</html>
