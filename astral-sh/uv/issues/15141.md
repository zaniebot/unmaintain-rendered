```yaml
number: 15141
title: "`uvx --from git...` doesn't respect the remote pyproject.toml's `tool.uv.default-groups`"
type: issue
state: closed
author: bradbeattie
labels:
  - question
assignees: []
created_at: 2025-08-07T16:42:18Z
updated_at: 2025-10-30T14:15:03Z
url: https://github.com/astral-sh/uv/issues/15141
synced_at: 2026-01-10T01:57:34Z
```

# `uvx --from git...` doesn't respect the remote pyproject.toml's `tool.uv.default-groups`

---

_Issue opened by @bradbeattie on 2025-08-07 16:42_

### Summary

https://docs.astral.sh/uv/guides/tools/#requesting-different-sources suggests one can run `uvx --from git...` to pull in a remote repo and run a CLI tool it defines in `project.scripts`. I have a private repo that has typer inside a `dependency-groups.cli` group and defines `tool.uv.default-groups = "all"`.

When I run `uvx --from git...` with this repo, typer isn't brought in. It doesn't look like default-groups is being respected.

### Platform

macOS 14 arm64

### Version

uv 0.8.4 (Homebrew 2025-07-30)

### Python version

Python 3.13.5

---

_Label `bug` added by @bradbeattie on 2025-08-07 16:42_

---

_Comment by @zanieb on 2025-08-07 18:09_

This is expected, `dependency-groups` are local to a project, e.g., for development, and are not available when the project is being installed as a package.

---

_Label `bug` removed by @zanieb on 2025-08-07 18:09_

---

_Label `question` added by @zanieb on 2025-08-07 18:09_

---

_Comment by @Scott5S on 2025-10-30 09:13_

@zanieb how would you run e.g. in a CI pipeline, uvx with a testing dependency group?

say you have a "tests" dependency-group, with `uv pip install` you'd usually just do something like

`uv pip install . --group tests` or `uv sync --group tests`

is there a "group" equivalent for the `uvx` command?

`uvx --python=3.14 --with .[tests] pytest`

seems to install optional-dependencies, not dependency-groups https://github.com/astral-sh/uv/issues/9011

---

_Comment by @zanieb on 2025-10-30 13:48_

You can't, since the dependency groups are not intended to be usable in that context. In contrast, optional dependencies are a part of the published project. Why do you need to use uvx here? `uv run --group tests pytest` would be equivalent?

---

_Comment by @Scott5S on 2025-10-30 14:01_

Ah, thank you. Looks like we have been misusing dependency-groups instead of optional-dependencies then.

The context is: we like to use `uv add packagename --bounds major` in a cookiecutter script which adds a few basic dependencies to our new brand new package repos, like pytest or coverage, etc.

that way developers can just get started with `uv sync --groups tests` to get set up locally after the new package repo is made.

But, in the pipelines we're trying to switch away from multiple steps like
```
uv venv --python=3.14
source .venv/bin/activate
uv pip install . --group tests
uv run coverage run -m pytest
```

and would love to just simplify it to a single line in the CI pipeline to run the tests like:
```
uvx --python=3.14 --with . --group tests coverage run -m pytest
```
Note the above is incorrect. I suppose we should switch away from dependency groups for the required packages needed to run tests, and instead make them with optional-dependencies, that way we can do

```
uvx --python=3.14 --with .[tests] pytest
```

(Initially I thought to use dependency groups because I didn't think a released package needed a "tests" optional dependency in its release, but I could be convinced otherwise?)

Answering the "why" to use `uvx`, if we want to run the same tests in parallel in the CI with different python versions, does the `uv run` command work OK without needing previous commands to make a venv, if we run it where the `pyproject.toml` is available?

If so, then we can indeed not use `uvx`, though I am curious if we can do `uv run` with a specific python version in the CI and it takes care of installing everything correctly before running the tests. Hope this makes sense- it may be I'm abusing `uv` commands at the moment

---

_Comment by @zanieb on 2025-10-30 14:09_

You can simplify

```
uv venv --python=3.14
source .venv/bin/activate
uv pip install . --group tests
uv run coverage run -m pytest
```

to

```
uv run --group tests --python 3.14 coverage run -m pytest
```

the rest of those commands are not needed. `uv run` will setup the environment for you. If you're running them in parallel, then you can use the `--isolated` flag to ensure the virtual environments are not being shared.

> (Initially I thought to use dependency groups because I didn't think a released package needed a "tests" optional dependency in its release, but I could be convinced otherwise?)

This is a good assumption, I'd leave them in the dependency groups if you can.

---

_Comment by @Scott5S on 2025-10-30 14:12_

Brilliant, thanks. That all makes sense, much appreciated

---

_Closed by @zanieb on 2025-10-30 14:15_

---
