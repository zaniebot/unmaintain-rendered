<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv pip install fails with 403 whereas pip install works - astral-sh/uv #10435</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv pip install fails with 403 whereas pip install works</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/10435">#10435</a>
        opened by <a href="https://github.com/kressi">@kressi</a>
        on 2025-01-09 16:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kressi">@kressi</a></div>
            <div class="timeline-body"><p>I'm trying to <code>uv pip install</code> a project in GitBash and keep getting 403 from our internal PyPI. However, <code>python -m pip install</code> is working perfectly fine. I have configured <code>pip.conf</code> and <code>uv.toml</code> with equivalent settings. Is there anything I'm missing?</p>
<pre><code class="language-bash">$ python -m uv pip install pip-install-test
Using Python 3.12.4 environment at: C:\Program Files\python
  × No solution found when resolving dependencies:
  ╰─▶ Because pip-install-test was not found in the package registry and you require pip-install-test, we can conclude that your requirements are unsatisfiable.

      hint: An index URL (https://internal.company.domain/repository/public-pypi/simple) could not be queried due to a lack of valid authentication credentials (403 Forbidden).
</code></pre>
<pre><code class="language-bash">$ python -m pip install pip-install-test
Collecting pip-install-test
  Downloading pip_install_test-0.5-py3-none-any.whl.metadata (979 bytes)
Downloading pip_install_test-0.5-py3-none-any.whl (1.7 kB)
Installing collected packages: pip-install-test
Successfully installed pip-install-test-0.5

[notice] A new release of pip is available: 24.1.2 -&gt; 24.3.1
[notice] To update, run: python.exe -m pip install --upgrade pip
</code></pre>
<h2>Environment</h2>
<pre><code class="language-bash">$ git --version
git version 2.47.0.windows.2
</code></pre>
<pre><code class="language-bash">$ uv --version
uv 0.5.16 (333f03f11 2025-01-08)
</code></pre>
<pre><code class="language-bash">$ cat $UV_CONFIG_FILE
link-mode = &quot;copy&quot;
allow-insecure-host = [&quot;internal.company.domain&quot;]

[[index]]
name = &quot;pypi&quot;
url = &quot;https://internal.company.domain/repository/public-pypi/simple&quot;
default = true
</code></pre>
<pre><code class="language-bash">$ cat ~/pip.conf
[global]
index-url = https://internal.company.domain/repository/public-pypi/simple
trusted-host = internal.company.domain
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-09 17:44</div>
            <div class="timeline-body"><p>Where are the credentials coming from with <code>pip</code>? Are you using a <code>pypirc</code> file or keyring?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-01-09 17:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kressi">@kressi</a> on 2025-01-09 18:36</div>
            <div class="timeline-body"><p>There are no credentials for the index</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-09 19:10</div>
            <div class="timeline-body"><p>Can't say why your server would return a 403 then, I think you'll need to get more details. You can use <code>--verbose</code> or <code>RUST_LOG=uv=trace</code> to get more logs from uv and details about the failing request (see #9452).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @zanieb on 2025-01-09 19:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kressi">@kressi</a> on 2025-01-10 12:31</div>
            <div class="timeline-body"><p>Thank you, turned out pip and uv have not been properly configured for Windows.  <code>RUST_LOG=uv=trace</code> has helped recognizing this.</p>
<p>Btw. thanks for your work on uv. It's improving user experience with python significantly. ❤</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kressi on 2025-01-10 12:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:29:13 UTC
    </footer>
</body>
</html>
