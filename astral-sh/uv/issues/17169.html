<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Please rebase astral-reqwest-retry on upstream version 0.8.0 - astral-sh/uv #17169</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Please rebase astral-reqwest-retry on upstream version 0.8.0</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/17169">#17169</a>
        opened by <a href="https://github.com/musicinmybrain">@musicinmybrain</a>
        on 2025-12-18 10:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/musicinmybrain">@musicinmybrain</a></div>
            <div class="timeline-body">Summary
<p>With low priority, please rebase https://github.com/astral-sh/reqwest-middleware on https://github.com/TrueLayer/reqwest-middleware/commit/1485f61e20c8cd31cabb663788f06206c19cabaf, thereby updating https://crates.io/crates/astral-reqwest-retry from 0.7.0 to 0.8.0.</p>
<hr>
<p>The breaking change in <code>retry-polices</code> 0.5 was that <code>build_with_total_retry_duration_and_max_retries</code> was renamed to <code>build_with_total_retry_duration_and_limit_retries</code>.</p>
<p>https://github.com/TrueLayer/retry-policies/blob/v0.5.1/CHANGELOG.md</p>
<p>The SemVer break in <code>reqwest-retry</code> is simply because it re-exports <code>retry-policies</code>.</p>
<p>https://github.com/TrueLayer/reqwest-middleware/blob/1485f61e20c8cd31cabb663788f06206c19cabaf/reqwest-retry/CHANGELOG.md</p>
<p>It would also be necessary to adjust the version bounds in uv to allow astral-reqwest-retry 0.8. No source-code changes would be required in uv because it doesn’t use <code>build_with_total_retry_duration_and_max_retries</code>.</p>
<p>The benefit of all this is that astral-reqwest-retry, and by extension uv, would end up depending on the <em>current</em> version of https://crates.io/crates/retry-policies, and not having dependencies stuck on older releases is always nice for long-term maintainability. This would also make it easier for me to stop maintaining a <code>rust-retry-policies0.4</code> compat package in Fedora.</p>
<p>I opened this issue on uv rather than on https://github.com/astral-sh/reqwest-middleware because issues are not enabled there, and PR’s are restricted to collaborators.</p>
Example
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2025-12-18 10:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Please astral-reqwest-retry on upstream version 0.8.0&quot; to &quot;Please rebase astral-reqwest-retry on upstream version 0.8.0&quot; by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2025-12-18 10:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-18 10:44</div>
            <div class="timeline-body"><p>I&#x27;ve updated the crate.</p>
<p>I&#x27;ve enabled issues on the repository, we don&#x27;t intend it for wide usage, but it&#x27;s relevant for re-distributors of uv. But the issues reach us either way :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/konstin">@konstin</a> on 2025-12-18 10:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2025-12-18 14:14</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:41:20 UTC
    </footer>
</body>
</html>
