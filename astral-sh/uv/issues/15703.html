<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`--no-install-local` doesn't appear to be working - astral-sh/uv #15703</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`--no-install-local` doesn't appear to be working</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/15703">#15703</a>
        opened by <a href="https://github.com/sebovzeoueb">@sebovzeoueb</a>
        on 2025-09-05 14:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sebovzeoueb">@sebovzeoueb</a> on 2025-09-05 14:08</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I have a project which references packages locally like so:</p>
<pre><code>[project]
name = &quot;repro&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.12, &lt;3.13&quot;
dependencies = [
    &quot;fake-dependency&quot;
]
[tool.uv.sources]
fake-dependency = { path = &quot;/fake_path/&quot;, editable = true }
</code></pre>
<p>The documentation claims that <code>--no-install-local</code> &quot;Skips the current project, workspace members, and any other local (path or editable) packages&quot;, however I'm getting the following output after running <code>uv sync --no-install-local</code>:</p>
<p><code>error: Distribution not found at: file:///F:/fake_path</code></p>
<p>If I'm understanding the purpose of <code>--no-install-local</code> correctly, uv should not attempt to install <code>fake-dependency</code> at all. <code>--no-sources</code> doesn't fix my use case here, as I want to completely skip the local dependency here and <code>--no-sources</code> will attempt to pull it from PyPI where it doesn't exist.</p>
<h3>Platform</h3>
<p>Windows 11 64 bit</p>
<h3>Version</h3>
<p>0.8.15</p>
<h3>Python version</h3>
<p>3.12.10</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @sebovzeoueb on 2025-09-05 14:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-09-06 02:34</div>
            <div class="timeline-body"><p>The package still needs to be present to create or validate the lockfile (because the lockfile represents the resolution for the entire project). If you already have a lockfile, and want to sync without <code>fake-dependency</code> being present on the machine, then you'd want <code>uv sync --no-install-local --frozen</code>. (<code>--frozen</code> skips the locking phase.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2025-09-06 02:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2025-09-06 02:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-09-06 02:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sebovzeoueb">@sebovzeoueb</a> on 2025-09-09 09:40</div>
            <div class="timeline-body"><p>Thanks for your response, I'm migrating to uv from a setup I had using pip and multiple requirements files, your comment about the lockfile is helping me understand some issues I've been running into in general. It may be that there's a better way to achieve what I'm going for anyway. Here are the scenarios I'm trying to cover:</p>
<ul>
<li>Production Docker image: <code>fake-dependency</code> comes from a package published on PyPI</li>
<li>Development Docker image: <code>fake-dependency</code> comes from <code>/fake_dependency/</code> within the Docker container</li>
<li>Local non-Docker development: <code>fake-dependency</code> comes from <code>../../fake_dependency/</code></li>
</ul>
<p>I have been able to achieve the top 2 with <code>--no-sources</code> and <code>tool.uv.sources</code> as you can see in my example project.
The only way I've thought of to achieve the 3rd one is by not installing local dependencies and doing a <code>uv pip install</code> command to repeat what I was doing with pip before, but this isn't ideal, and also doesn't work, hence the issue I opened. I also don't have a lock file committed in the project as I'm currently having it do the <code>uv sync</code> only in Docker and I'm using the watch feature of Docker Compose rather than mounting, so the lock file doesn't get copied back into the repo, which means I shouldn't be able to use <code>--frozen</code> as the file doesn't exist. I do feel like I'm doing everything a bit wrong here, any cleaner suggestions as to how to achieve what I'm going for?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nbaju1">@nbaju1</a> on 2025-09-10 10:11</div>
            <div class="timeline-body"><p>Will this work, installing in the various scenarios using  <code>uv sync --group &lt;scenario-specific-group&gt;</code>?</p>
<pre><code class="language-toml">[project]
name = &quot;repro&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.12, &lt;3.13&quot;
dependencies = [&quot;&lt;shared dependencies&gt;&quot;]

[dependency-groups]
docker-prod = [&quot;fake-dependency&quot;]
docker-dev = [&quot;fake-dependency-dev&quot;]
local = [&quot;fake-dependency-local&quot;]

[tool.uv.sources]
fake-dependency-dev = { path = &quot;/fake_path/&quot;, editable = true }
fake-dependency-local = { path = &quot;../../fake_dependency/&quot;, editable = true }
</code></pre>
<p>Edit: I'm not sure if the dependency names have to match the actual names of the referenced packages. Guess this won't work if they have to align.</p>
<p>Edit 2: This won't work as dependency name has to match the project name.</p>
<pre><code>  × Failed to build `fake-dependency-local @ file:///&lt;redacted&gt;/fake-dependency`
  ╰─▶ Package metadata name `fake-dependency` does not match given name `fake-dependency-local`
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:29 UTC
    </footer>
</body>
</html>
