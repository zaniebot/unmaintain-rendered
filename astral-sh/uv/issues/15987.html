<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uvx ruff check fails to spawn Ruff - astral-sh/uv #15987</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uvx ruff check fails to spawn Ruff</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/15987">#15987</a>
        opened by <a href="https://github.com/rogersei">@rogersei</a>
        on 2025-09-22 16:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/rogersei">@rogersei</a> on 2025-09-22 16:28</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>On both the ghcr.io/astral-sh/uv:0.8.19-python3.13-trixie-slim and ghcr.io/astral-sh/uv:0.8.19-python3.13-bookworm-slim, running Ruff via the tool interface <code>uvx ruff check</code> throws the following error</p>
<pre><code class="language-bash">root@fb4f43ebb24e:/workspaces/mdmetrix_api# uvx ruff check
Installed 1 package in 17ms
error: Failed to spawn: `ruff`
  Caused by: No such file or directory (os error 2)
</code></pre>
<p>Note - running <code>uv tool install ruff</code> succeeds and then <code>uvx ruff check</code> functions correctly.</p>
<p>Also tested uv 0.8.19 on Windows directly and it does not have this issue.</p>
<h3>Platform</h3>
<p>Debian Docker images</p>
<h3>Version</h3>
<p>0.8.19</p>
<h3>Python version</h3>
<p>3.13</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @rogersei on 2025-09-22 16:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/my1e5">@my1e5</a> on 2025-09-22 16:42</div>
            <div class="timeline-body"><p>Possibly related to https://github.com/astral-sh/uv/issues/15967?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-22 16:42</div>
            <div class="timeline-body"><p>Can you share verbose logs as described in #9452?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-22 16:44</div>
            <div class="timeline-body"><p><code>docker run --rm -it ghcr.io/astral-sh/uv:0.8.19-python3.13-trixie-slim uvx ruff check</code> does not reproduce this issue</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rogersei">@rogersei</a> on 2025-09-22 17:07</div>
            <div class="timeline-body"><blockquote>
<p>Possibly related to <a href="https://github.com/astral-sh/uv/issues/15967">#15967</a>?</p>
</blockquote>
<p>This is an interesting correlation.</p>
<p>EDIT: We do set no cache via Env Var  ~While we don't use the <code>--no-cache</code> flag~, we do use a <code>uv python install</code> and install 3.11.7</p>
<p>we build a build image with this Dockerfile</p>
<pre><code>FROM ghcr.io/astral-sh/uv:0.8.19-python3.13-bookworm-slim
# OS patching
RUN apt-get update &amp;&amp; \
    apt-get dist-upgrade -y &amp;&amp; \
    apt-get autoclean -y &amp;&amp; \
    apt-get purge -y 
CMD [&quot;/bin/sh&quot;]
</code></pre>
<p>and then use that image in our CI pipeline with</p>
<pre><code>uv sync
uv run pytest ...
uvx run ruff check...
</code></pre>
<p>the project has a <code>.python-version</code> file with <code>3.13.7</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rogersei">@rogersei</a> on 2025-09-22 17:09</div>
            <div class="timeline-body"><blockquote>
<p>Can you share verbose logs as described in <a href="https://github.com/astral-sh/uv/issues/9452">#9452</a>?</p>
</blockquote>
<p>Neither form of running it gives any additional logs</p>
<pre><code class="language-bash">root@f3a799d7df92:/workspaces/mdmetrix_api# uvx ruff check --verbose
Installed 1 package in 26ms
error: Failed to spawn: `ruff`
  Caused by: No such file or directory (os error 2)

root@f3a799d7df92:/workspaces/mdmetrix_api# uv tool run ruff check --verbose
Installed 1 package in 22ms
error: Failed to spawn: `ruff`
  Caused by: No such file or directory (os error 2)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-22 17:21</div>
            <div class="timeline-body"><p>You're passing <code>--verbose</code> to <code>ruff</code>. Use <code>uvx -vv ruff check</code> instead.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-22 17:24</div>
            <div class="timeline-body"><p>If you're setting <code>UV_NO_CACHE</code> then that's the cause of the problem though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rogersei">@rogersei</a> on 2025-09-22 17:30</div>
            <div class="timeline-body"><blockquote>
<p>If you're setting <code>UV_NO_CACHE</code> then that's the cause of the problem though.</p>
</blockquote>
<p>so its a dupe of #15967 then since we are setting <code>UV_NO_CACHE: &quot;TRUE&quot;</code></p>
<p>For completeness, this is the end of the debug logs</p>
<pre><code>Downloading ruff (12.6MiB)
 Downloading ruff
Prepared 1 package in 2.95s
TRACE Extracting file name=PackageName(&quot;ruff&quot;)
TRACE Extracted 7 files name=PackageName(&quot;ruff&quot;)
TRACE No entrypoints name=PackageName(&quot;ruff&quot;)
TRACE Installing data/scripts to /tmp/.tmpVKVSmR/builds-v0/.tmp5q3uRo/bin dist_name=PackageName(&quot;ruff&quot;)
TRACE Writing installer metadata name=PackageName(&quot;ruff&quot;)
TRACE Writing record name=PackageName(&quot;ruff&quot;)
Installed 1 package in 22ms
 + ruff==0.13.1
DEBUG Checking for Python environment at: `/tmp/.tmpVKVSmR/archive-v0/60C_2GED4nH3drrEtcxNJ`
TRACE Querying interpreter executable at /tmp/.tmpVKVSmR/archive-v0/60C_2GED4nH3drrEtcxNJ/bin/python3
DEBUG Looking at `.dist-info` at: /tmp/.tmpVKVSmR/archive-v0/60C_2GED4nH3drrEtcxNJ/lib/python3.13/site-packages/ruff-0.13.1.dist-info
DEBUG Running `ruff check`
DEBUG Released lock at `/tmp/.tmpVKVSmR/.lock`
TRACE Error trace: Failed to spawn: `ruff`

Caused by:
    No such file or directory (os error 2)
error: Failed to spawn: `ruff`
  Caused by: No such file or directory (os error 2)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rogersei">@rogersei</a> on 2025-09-22 17:54</div>
            <div class="timeline-body"><p>setting UV_NO_CACHE to false does address the issue - so closing as dupe</p>
<p>Thanks for the help!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-09-22 18:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-09-22 20:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:27:01 UTC
    </footer>
</body>
</html>
