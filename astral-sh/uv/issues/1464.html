<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fails to parse version specifiers with trailing comma - astral-sh/uv #1464</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>fails to parse version specifiers with trailing comma</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/1464">#1464</a>
        opened by <a href="https://github.com/davidszotten">@davidszotten</a>
        on 2024-02-16 09:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/davidszotten">@davidszotten</a> on 2024-02-16 09:49</div>
            <div class="timeline-body"><p>when installing from our devpi mirror, e.g. celery-5.2.2 fails to install. it looks like it's due to a trailing comma in the <code>requires-python</code> value. from reading the pep it's slightly unclear to me whether a trailing comma is allowed but <code>uv</code> is the first tool that's complained</p>
<p>i added a <code>dbg!()</code> because the error message didn't include the offending value (would be a nice addition i think)</p>
<pre><code>   0.330188s  40ms  WARN uv_client::registry_client Skipping file for celery: Invalid 'requires-python' value
[crates/uv-client/src/registry_client.rs:632] err = VersionSpecifiersParseError(
    VersionSpecifiersParseError {
        inner: VersionSpecifiersParseErrorInner {
            err: VersionSpecifierParseError {
                kind: MissingOperator,
            },
            line: &quot;&gt;=3.7,&quot;,
            start: 6,
            end: 6,
        },
    },
)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-16 14:45</div>
            <div class="timeline-body"><p>Hey @davidszotten, which version are you using? I think we may have fixed this already.</p>
<p>xref https://github.com/astral-sh/uv/issues/1361</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2024-02-16 14:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davidszotten">@davidszotten</a> on 2024-02-16 16:10</div>
            <div class="timeline-body"><p>e6c4c77ba10bd54dbf06 (which includes that fix) still has the issue. will make a pr with a failing test (and a suggested fix)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/1507.html">astral-sh/uv#1507</a> on 2024-02-16 16:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-17 01:47</div>
            <div class="timeline-body"><p>Hopefully fixed by #1507?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-02-17 01:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:21 UTC
    </footer>
</body>
</html>
