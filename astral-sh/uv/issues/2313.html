<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Remove wheel for PEP 517 fallback builds - astral-sh/uv #2313</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Remove wheel for PEP 517 fallback builds</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2313">#2313</a>
        opened by <a href="https://github.com/henryiii">@henryiii</a>
        on 2024-03-09 02:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/henryiii">@henryiii</a> on 2024-03-09 02:31</div>
            <div class="timeline-body"><p>Setuptools declares wheel as a wheel build dependency for PEP 517 builds already via a build hook. Both pip 24 (https://github.com/pypa/pip/pull/12449)  and build 1.1 (https://github.com/pypa/build/pull/716) have removed wheel from the default PEP 517 fallback environment. I think uv should do the same.</p>
<p>There are a small collection of packages that <code>import wheel</code> inside setup.py directly, which is discouraged by <code>wheel</code> (as there's no official pubic API), and these packages should either declare wheel explicitly as a dependency in pyproject.toml, protect the import, or use setuptool's functionality to get a build class without importing it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2024-03-09 14:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-09 14:44</div>
            <div class="timeline-body"><p>Any idea if there are known packages that won't build under this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2024-03-10 05:54</div>
            <div class="timeline-body"><p>They also won't work with pip or build. :) The most recent issue was one with pyodide https://github.com/pyodide/pyodide/discussions/4593 - the user forgot to copy the pyproject.toml into the docker container when building. :) Another: https://github.com/pypa/build/issues/750. I think pip took the brunt of this, though, as pip 24 came out before build 1.1, and people using build tend to be more likely to have pyproject.tomls, etc., so looking around in pip's issue tracker might be helpful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-03-10 16:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-03-10 23:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:43:10 UTC
    </footer>
</body>
</html>
