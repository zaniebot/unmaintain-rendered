<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weird behavior on windows when creating uv venv - astral-sh/uv #1698</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Weird behavior on windows when creating uv venv</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1698">#1698</a>
        opened by <a href="https://github.com/fervand1">@fervand1</a>
        on 2024-02-19 15:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/fervand1">@fervand1</a> on 2024-02-19 15:17</div>
            <div class="timeline-body"><p>Steps to reproduce:</p>
<ul>
<li>Create python 3.10 venv</li>
<li>activate the venv</li>
<li>pip install uv</li>
<li>mkdir test</li>
<li>run: uv venv</li>
<li>deactivate py 3.10 venv</li>
<li>activate newly created uv env  (.venv) in test</li>
<li>pip list</li>
</ul>
<p>See below</p>
<pre><code>PS D:\Exploration\uv-pip&gt; py -3.10 -m venv venv
PS D:\Exploration\uv-pip&gt; .\venv\Scripts\activate
(venv) PS D:\Exploration\uv-pip&gt; pip install uv
Looking in indexes: https://__token__:****@gitlab.com/api/v4/groups/&lt;group_id&gt;/-/packages/pypi/simple, https://pypi.org/simple
Collecting uv
  Using cached uv-0.1.5-py3-none-win_amd64.whl (8.0 MB)
Installing collected packages: uv
Successfully installed uv-0.1.5

[notice] A new release of pip available: 22.3.1 -&gt; 24.0
[notice] To update, run: python.exe -m pip install --upgrade pip
(venv) PS D:\Exploration\uv-pip&gt; mkdir test


    Directory: D:\Exploration\uv-pip


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----        19-02-2024     20:39                test


(venv) PS D:\Exploration\uv-pip&gt; cd test
(venv) PS D:\Exploration\uv-pip\test&gt; uv venv
Using Python 3.10.10 interpreter at D:\Exploration\uv-pip\venv\Scripts\python.exe
Creating virtualenv at: .venv
(venv) PS D:\Exploration\uv-pip\test&gt; deactivate
PS D:\Exploration\uv-pip\test&gt; ls


    Directory: D:\Exploration\uv-pip\test


Mode                 LastWriteTime         Length Name
----                 -------------         ------ ----
d-----        19-02-2024     20:39                .venv


PS D:\Exploration\uv-pip\test&gt; .\.venv\Scripts\activate
(.venv) PS D:\Exploration\uv-pip\test&gt; pip list
DEPRECATION: Python 2.7 reached the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 is no longer maintained. pip 21.0 will drop support for Python 2.7 in January 2021. More details about Python 2 support in pip can be found at https://pip.pypa.io/en/latest/development/release-process/#python-2-support pip 21.0 will remove support for this functionality.
Package                       Version     Location
----------------------------- ----------- ----------------------------------
atomicwrites                  1.4.1
attrs                         21.4.0
backports.functools-lru-cache 1.6.6
bridgesetuptools              2.7.4
click                         7.1.2
colorama                      0.4.6
configparser                  4.0.2
contextlib2                   0.6.0.post1
decorator                     4.4.2
distlib                       0.3.6
filelock                      3.2.1
funcsigs                      1.0.2
importlib-metadata            2.1.3
importlib-resources           3.3.1
invoke                        1.7.3
jsonpath-ng                   1.6.1
jsonpath-rw                   1.4.0
lxml                          4.9.3
more-itertools                5.0.0
opcda-kepware                 1.1.0       d:\product_setup\opcda_kepware\src
packaging                     20.9
pathlib2                      2.3.7.post1
Pillow                        6.2.2
pip                           20.3.4
pip-tools                     5.5.0
platformdirs                  2.0.2
pluggy                        0.13.1
ply                           3.11
py                            1.11.0
py2exe-py2                    0.6.9
pyparsing                     2.4.7
Pyro                          3.16
pytest                        4.6.11
pywin32                       228
reportlab                     3.5.18
scandir                       1.10.0
setuptools                    44.1.1
singledispatch                3.7.0
six                           1.16.0
typing                        3.10.0.0
untangle                      1.1.1
virtualenv                    20.15.1
wcwidth                       0.2.12
wheel                         0.37.1
zipp                          1.2.0
(.venv) PS D:\Exploration\uv-pip\test&gt;
</code></pre>
<p>When I pip list I observe that the venv created was for python 2.7, also it pulled all the installed dependency for this python into the venv when it should have been a clean venv with minimal packages</p>
<ul>
<li>The command you invoked (e.g., <code>uv pip sync requirements.txt</code>), ideally including the <code>--verbose</code> flag.</li>
<li>The current uv platform - Windows 10</li>
<li>The current uv version - 0.1.5</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fervand1">@fervand1</a> on 2024-02-19 15:17</div>
            <div class="timeline-body"><p>Relates to https://github.com/astral-sh/uv/issues/1693</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1693.html">astral-sh/uv#1693</a> on 2024-02-19 15:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-19 15:49</div>
            <div class="timeline-body"><p>Hi! I We don't seed <code>pip</code> by default so when you run <code>pip list</code> you're not running a command in your environment. I think you're just seeing whatever global <code>pip</code> has there. You can run <code>uv venv --seed</code> to get <code>pip</code> which should resolve this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-02-19 15:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2024-02-19 16:14</div>
            <div class="timeline-body"><p>Looks like there's work on a <a href="https://github.com/astral-sh/uv/pull/1662"><code>uv pip list</code></a> starting! Until then, you can use <code>pip --python venv list</code> to look inside the venv with the external pip. (Generally, pip can also target a venv it's not installed in, just like <code>uv</code> does by default).</p>
<p>On Python 3.10+, you can also use the stdlib: <code>python -c &quot;from importlib import metadata; print(*metadata.packages_distributions().keys())&quot;</code>.</p>
<p>Note all these methods will report nothing if the environment is completely empty, which it is by default.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/melMass">@melMass</a> on 2024-02-19 17:15</div>
            <div class="timeline-body"><p>Not entirely a solution, but <code>uv pip freeze</code> work fine</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-02-28 04:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/12265.html">astral-sh/uv#12265</a> on 2025-03-18 14:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:18 UTC
    </footer>
</body>
</html>
