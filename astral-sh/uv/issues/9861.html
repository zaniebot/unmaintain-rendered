<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resolver error trees with collapsed unavailable conclusion is out of order - astral-sh/uv #9861</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Resolver error trees with collapsed unavailable conclusion is out of order</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9861">#9861</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-12-13 05:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>e.g.,</p>
<pre><code>❯ echo &quot;open3d&quot; | cargo run -- pip compile --no-cache --exclude-newer 2024-03-25T00:00:00Z --python-platform linux --python 3.10 -
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.49s
     Running `target/debug/uv pip compile --no-cache --exclude-newer '2024-03-25T00:00:00Z' --python-platform linux --python 3.10 -`
Resolver derivation tree before reduction
term root==0a0.dev0
  root==0a0.dev0 depends on open3d*
  term open3d*
    open3d==0.18.0 no wheels with a matching platform tag
    term open3d&lt;0.18.0 | &gt;0.18.0
      open3d==0.17.0 no wheels with a matching platform tag
      term open3d&lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
        open3d==0.16.1 no wheels with a matching platform tag
        term open3d&lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
          open3d==0.16.0 no wheels with a matching platform tag
          term open3d&lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
            open3d==0.15.2 no wheels with a matching Python ABI tag
            term open3d&lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
              open3d==0.15.1 no wheels with a matching Python ABI tag
              term open3d&lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
                open3d==0.14.1 no wheels with a matching Python ABI tag
                term open3d&lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
                  open3d==0.13.0 no wheels with a matching Python ABI tag
                  term open3d&lt;0.13.0 | &gt;0.13.0, &lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
                    open3d==0.12.0 no wheels with a matching Python ABI tag
                    term open3d&lt;0.12.0 | &gt;0.12.0, &lt;0.13.0 | &gt;0.13.0, &lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
                      open3d==0.11.2 no wheels with a matching Python ABI tag
                      term open3d&lt;0.11.2 | &gt;0.11.2, &lt;0.12.0 | &gt;0.12.0, &lt;0.13.0 | &gt;0.13.0, &lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
                        open3d==0.11.1 no wheels with a matching Python ABI tag
                        term open3d&lt;0.11.1 | &gt;0.11.1, &lt;0.11.2 | &gt;0.11.2, &lt;0.12.0 | &gt;0.12.0, &lt;0.13.0 | &gt;0.13.0, &lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
                          open3d==0.11.0 no wheels with a matching Python ABI tag
                          term open3d&lt;0.11.0 | &gt;0.11.0, &lt;0.11.1 | &gt;0.11.1, &lt;0.11.2 | &gt;0.11.2, &lt;0.12.0 | &gt;0.12.0, &lt;0.13.0 | &gt;0.13.0, &lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
                            open3d==0.10.0.1 no wheels with a matching Python ABI tag
                            term open3d&lt;0.10.0.1 | &gt;0.10.0.1, &lt;0.11.0 | &gt;0.11.0, &lt;0.11.1 | &gt;0.11.1, &lt;0.11.2 | &gt;0.11.2, &lt;0.12.0 | &gt;0.12.0, &lt;0.13.0 | &gt;0.13.0, &lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
                              open3d==0.10.0.0 no wheels with a matching Python ABI tag
                              term open3d&lt;0.10.0.0 | &gt;0.10.0.0, &lt;0.10.0.1 | &gt;0.10.0.1, &lt;0.11.0 | &gt;0.11.0, &lt;0.11.1 | &gt;0.11.1, &lt;0.11.2 | &gt;0.11.2, &lt;0.12.0 | &gt;0.12.0, &lt;0.13.0 | &gt;0.13.0, &lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
                                open3d==0.9.0.0 no wheels with a matching Python ABI tag
                                term open3d&lt;0.9.0.0 | &gt;0.9.0.0, &lt;0.10.0.0 | &gt;0.10.0.0, &lt;0.10.0.1 | &gt;0.10.0.1, &lt;0.11.0 | &gt;0.11.0, &lt;0.11.1 | &gt;0.11.1, &lt;0.11.2 | &gt;0.11.2, &lt;0.12.0 | &gt;0.12.0, &lt;0.13.0 | &gt;0.13.0, &lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
                                  open3d==0.8.0.0 no wheels with a matching Python ABI tag
                                  no versions of open3d&lt;0.8.0.0 | &gt;0.8.0.0, &lt;0.9.0.0 | &gt;0.9.0.0, &lt;0.10.0.0 | &gt;0.10.0.0, &lt;0.10.0.1 | &gt;0.10.0.1, &lt;0.11.0 | &gt;0.11.0, &lt;0.11.1 | &gt;0.11.1, &lt;0.11.2 | &gt;0.11.2, &lt;0.12.0 | &gt;0.12.0, &lt;0.13.0 | &gt;0.13.0, &lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
Resolver derivation tree after reduction
term root==0a0.dev0
  root==0a0.dev0 depends on open3d*
  term open3d&lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
    open3d==0.16.0 | ==0.16.1 | ==0.17.0 | ==0.18.0 no wheels with a matching platform tag
    term open3d&lt;0.9.0.0 | &gt;0.9.0.0, &lt;0.10.0.0 | &gt;0.10.0.0, &lt;0.10.0.1 | &gt;0.10.0.1, &lt;0.11.0 | &gt;0.11.0, &lt;0.11.1 | &gt;0.11.1, &lt;0.11.2 | &gt;0.11.2, &lt;0.12.0 | &gt;0.12.0, &lt;0.13.0 | &gt;0.13.0, &lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
      open3d==0.8.0.0 | ==0.9.0.0 | ==0.10.0.0 | ==0.10.0.1 | ==0.11.0 | ==0.11.1 | ==0.11.2 | ==0.12.0 | ==0.13.0 | ==0.14.1 | ==0.15.1 | ==0.15.2 no wheels with a matching Python ABI tag
      no versions of open3d&lt;0.8.0.0 | &gt;0.8.0.0, &lt;0.9.0.0 | &gt;0.9.0.0, &lt;0.10.0.0 | &gt;0.10.0.0, &lt;0.10.0.1 | &gt;0.10.0.1, &lt;0.11.0 | &gt;0.11.0, &lt;0.11.1 | &gt;0.11.1, &lt;0.11.2 | &gt;0.11.2, &lt;0.12.0 | &gt;0.12.0, &lt;0.13.0 | &gt;0.13.0, &lt;0.14.1 | &gt;0.14.1, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
  × No solution found when resolving dependencies:
  ╰─▶ Because only the following versions of open3d are available:
          open3d==0.8.0.0
          open3d==0.9.0.0
          open3d==0.10.0.0
          open3d==0.10.0.1
          open3d==0.11.0
          open3d==0.11.1
          open3d==0.11.2
          open3d==0.12.0
          open3d==0.13.0
          open3d==0.14.1
          open3d==0.15.1
          open3d==0.15.2
          open3d==0.16.0
          open3d==0.16.1
          open3d==0.17.0
          open3d==0.18.0
      and open3d&lt;=0.15.2 has no wheels with a matching Python ABI tag, we can conclude that open3d&lt;0.9.0.0 cannot be used.
      And because open3d&gt;=0.16.0 has no wheels with a matching platform tag and you require open3d, we can conclude that your
      requirements are unsatisfiable.
</code></pre>
<p>We make the conclusion &quot;we can conclude that open3d&lt;0.9.0.0 cannot be used&quot; before we make the second proof about the incompatible range &quot;because open3d&gt;=0.16.0 has no wheels&quot;</p>
<p>There's some more context in https://github.com/pubgrub-rs/pubgrub/issues/297 as I've explored a couple issues here — the root cause might be the same.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-13 05:30</div>
            <div class="timeline-body"><p>Interestingly, adding a bound fixes this? I added <code>&gt;0.15.0</code> just in an attempt to minimize the problem.</p>
<pre><code>❯ echo &quot;open3d&gt;0.15.0&quot; | cargo run -- pip compile --no-cache --exclude-newer 2024-03-25T00:00:00Z --python-platform linux --python 3.10 -
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.15s
     Running `target/debug/uv pip compile --no-cache --exclude-newer '2024-03-25T00:00:00Z' --python-platform linux --python 3.10 -`
Resolver derivation tree before reduction
term root==0a0.dev0
  root==0a0.dev0 depends on open3d&gt;0.15.0
  term open3d&gt;0.15.0
    open3d==0.18.0 no wheels with a matching platform tag
    term open3d&gt;0.15.0, &lt;0.18.0 | &gt;0.18.0
      open3d==0.17.0 no wheels with a matching platform tag
      term open3d&gt;0.15.0, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
        open3d==0.16.1 no wheels with a matching platform tag
        term open3d&gt;0.15.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
          open3d==0.16.0 no wheels with a matching platform tag
          term open3d&gt;0.15.0, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
            open3d==0.15.2 no wheels with a matching Python ABI tag
            term open3d&gt;0.15.0, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
              open3d==0.15.1 no wheels with a matching Python ABI tag
              no versions of open3d&gt;0.15.0, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
Resolver derivation tree after reduction
term root==0a0.dev0
  root==0a0.dev0 depends on open3d&gt;0.15.0
  term open3d&gt;0.15.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
    open3d==0.16.0 | ==0.16.1 | ==0.17.0 | ==0.18.0 no wheels with a matching platform tag
    term open3d&gt;0.15.0, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
      open3d==0.15.1 | ==0.15.2 no wheels with a matching Python ABI tag
      no versions of open3d&gt;0.15.0, &lt;0.15.1 | &gt;0.15.1, &lt;0.15.2 | &gt;0.15.2, &lt;0.16.0 | &gt;0.16.0, &lt;0.16.1 | &gt;0.16.1, &lt;0.17.0 | &gt;0.17.0, &lt;0.18.0 | &gt;0.18.0
  × No solution found when resolving dependencies:
  ╰─▶ Because only the following versions of open3d are available:
          open3d&lt;0.15.0
          open3d==0.15.1
          open3d==0.15.2
          open3d==0.16.0
          open3d==0.16.1
          open3d==0.17.0
          open3d==0.18.0
      and open3d&gt;=0.15.1,&lt;=0.15.2 has no wheels with a matching Python ABI tag, we can conclude that open3d&gt;0.15.0,&lt;0.15.2 cannot be used.
      And because open3d&gt;=0.16.0 has no wheels with a matching platform tag and you require open3d&gt;0.15.0, we can conclude that your requirements are unsatisfiable.
``
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-13 05:33</div>
            <div class="timeline-body"><p>Though it does not work with a smaller version</p>
<pre><code>❯ echo &quot;open3d&gt;=0.11.0&quot; | cargo run -- pip compile --no-cache --exclude-newer 2024-03-25T00:00:00Z --python-platform linux --python 3.10 -
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.14s
     Running `target/debug/uv pip compile --no-cache --exclude-newer '2024-03-25T00:00:00Z' --python-platform linux --python 3.10 -`
  × No solution found when resolving dependencies:
  ╰─▶ Because only the following versions of open3d are available:
          open3d&lt;=0.11.0
          open3d==0.11.1
          open3d==0.11.2
          open3d==0.12.0
          open3d==0.13.0
          open3d==0.14.1
          open3d==0.15.1
          open3d==0.15.2
          open3d==0.16.0
          open3d==0.16.1
          open3d==0.17.0
          open3d==0.18.0
      and open3d&gt;=0.11.0,&lt;=0.15.2 has no wheels with a matching Python ABI tag, we can conclude that open3d&gt;=0.11.0,&lt;0.11.1 cannot be used.
      And because open3d&gt;=0.16.0 has no wheels with a matching platform tag and you require open3d&gt;=0.11.0, we can conclude that your requirements are unsatisfiable.
</code></pre>
<p>Removing the <code>simplify</code> call is helpful?</p>
<pre><code>  × No solution found when resolving dependencies:
  ╰─▶ Because only the following versions of open3d are available:
          open3d&lt;=0.11.0
          open3d==0.11.1
          open3d==0.11.2
          open3d==0.12.0
          open3d==0.13.0
          open3d==0.14.1
          open3d==0.15.1
          open3d==0.15.2
          open3d==0.16.0
          open3d==0.16.1
          open3d==0.17.0
          open3d==0.18.0
      and open3d&gt;=0.11.0,&lt;=0.15.2 has no wheels with a matching Python ABI tag, we can conclude that all of:
          open3d&gt;=0.11.0,&lt;0.11.1
          open3d&gt;0.11.1,&lt;0.11.2
          open3d&gt;0.11.2,&lt;0.12.0
          open3d&gt;0.12.0,&lt;0.13.0
          open3d&gt;0.13.0,&lt;0.14.1
          open3d&gt;0.14.1,&lt;0.15.1
          open3d&gt;0.15.1,&lt;0.15.2
          open3d&gt;0.15.2,&lt;0.16.0
          open3d&gt;0.16.0,&lt;0.16.1
          open3d&gt;0.16.1,&lt;0.17.0
          open3d&gt;0.17.0,&lt;0.18.0
          open3d&gt;0.18.0
       cannot be used.
      And because open3d&gt;=0.16.0 has no wheels with a matching platform tag and you require open3d&gt;=0.11.0, we can conclude that your requirements are unsatisfiable.
</code></pre>
<p>And so is the complement</p>
<pre><code>  × No solution found when resolving dependencies:
  ╰─▶ Because only the following versions of open3d are available:
          open3d&lt;=0.11.0
          open3d==0.11.1
          open3d==0.11.2
          open3d==0.12.0
          open3d==0.13.0
          open3d==0.14.1
          open3d==0.15.1
          open3d==0.15.2
          open3d==0.16.0
          open3d==0.16.1
          open3d==0.17.0
          open3d==0.18.0
      and open3d&gt;=0.11.0,&lt;=0.15.2 has no wheels with a matching Python ABI tag, we can conclude that all of:
          open3d&lt;0.11.0
          open3d==0.11.1
          open3d==0.11.2
          open3d==0.12.0
          open3d==0.13.0
          open3d==0.14.1
          open3d==0.15.1
          open3d==0.15.2
          open3d==0.16.0
          open3d==0.16.1
          open3d==0.17.0
          open3d==0.18.0
       cannot be used.
      And because open3d&gt;=0.16.0 has no wheels with a matching platform tag and you require open3d&gt;=0.11.0, we can conclude that your requirements are unsatisfiable.
</code></pre>
<p>but this doesn't work for most conclusions? (i.e., many regressions if I run the test suite with these changes)</p>
<p>Here, at least, it's very clear the ordering is wrong?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-12-13 21:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:28:53 UTC
    </footer>
</body>
</html>
