<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv sync consistently returns error  in combination with local repository - astral-sh/uv #12231</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv sync consistently returns error  in combination with local repository</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12231">#12231</a>
        opened by <a href="https://github.com/MaartendeRuyter">@MaartendeRuyter</a>
        on 2025-03-17 08:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MaartendeRuyter">@MaartendeRuyter</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>When running uv -sync --upgrade in combination with a local repository, broken pipe errors keep on popping up.
After rerunning uv -sync --upgrade a number of times eventually the sync finishes successfully. See below the terminal output</p>
<p><strong>Pyproject.toml</strong>
[[tool.uv.index]]
url = &quot;http://localhost:8080/&quot;
default = false</p>
<p><strong>Terminal Output</strong>
uv sync --upgrade
⠙ bunnet==1.3.0                                                                                                    error: Failed to fetch: <code>http://localhost:8080/lazy-loader/</code>
Caused by: error sending request for url (http://localhost:8080/simple/lazy-loader/)
Caused by: client error (SendRequest)
Caused by: error writing a body to connection
Caused by: Broken pipe (os error 32)
❯ uv sync --upgrade
⠙ location-loader==1.1.5                                                                                           error: Failed to fetch: <code>http://localhost:8080/mongoengine/</code>
Caused by: error sending request for url (http://localhost:8080/simple/mongoengine/)
Caused by: client error (SendRequest)
Caused by: error writing a body to connection
Caused by: Broken pipe (os error 32)
❯ uv sync --upgrade
⠸ python-dotenv==1.0.1<br />
Resolved 98 packages in 2.79s
Prepared 2 packages in 66ms
Uninstalled 2 packages in 14ms
Installed 2 packages in 23ms</p>
<ul>
<li>anyio==4.8.0</li>
</ul>
<ul>
<li>anyio==4.9.0</li>
</ul>
<ul>
<li>geo-datagarden-models==1.1.7</li>
</ul>
<ul>
<li>geo-datagarden-models==1.1.8</li>
</ul>
<h3>Platform</h3>
<p>mac OS15 M2</p>
<h3>Version</h3>
<p>uv 0.6.6</p>
<h3>Python version</h3>
<p>3.13</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @MaartendeRuyter on 2025-03-17 08:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-17 13:22</div>
            <div class="timeline-body"><p>I think we'd need a more complete reproduction to help here, like a GitHub repo we can clone and a series of steps we can run to reproduce the error ourselves.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2025-03-17 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @charliermarsh on 2025-03-17 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MaartendeRuyter">@MaartendeRuyter</a> on 2025-03-17 14:11</div>
            <div class="timeline-body"><p>Ok I will try and make a repo where this can be reproduced</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MaartendeRuyter">@MaartendeRuyter</a> on 2025-07-16 21:20</div>
            <div class="timeline-body"><p>After an update of uv this problem no longer occurs</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @MaartendeRuyter on 2025-07-16 21:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:30:27 UTC
    </footer>
</body>
</html>
