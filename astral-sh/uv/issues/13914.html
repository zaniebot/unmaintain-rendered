<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv build` in a workspace: output directory is weird/inconsistent - astral-sh/uv #13914</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv build</code> in a workspace: output directory is weird/inconsistent</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13914">#13914</a>
        opened by <a href="https://github.com/dimaqq">@dimaqq</a>
        on 2025-06-09 07:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/dimaqq">@dimaqq</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I have a workspace with:</p>
<ul>
<li>a package at top level</li>
<li>a sub-package under <code>./testing</code></li>
</ul>
<p>When building is run at top level:</p>
<ul>
<li><code>uv build</code> builds the top-level package, output in <code>./dist</code>, aka <code>repo/dist</code></li>
<li><code>uv build testing</code> builds the sub-package, output in <code>./dist</code>, aka <code>repo/dist</code></li>
<li><code>uv build testing/</code> builds the sub-package, output in <code>./testing/dist</code>, aka <code>repo/testing/dist</code></li>
</ul>
<p>The difference between the last two is kinda weird.</p>
<p>Likewise, when building in the subdirectory:</p>
<ul>
<li><code>uv build</code> builds the sub-package, output in <code>../dist</code>, aka <code>repo/dist</code></li>
<li><code>uv build .</code> builds the sub-package, output in <code>../dist</code>, aka <code>repo/dist</code></li>
<li><code>uv build ./</code> builds the sub-package, output in <code>./dist</code>, aka <code>repo/testing/dist</code></li>
</ul>
<p>Could it be that <code>uv</code> treats an <code>arg</code> as a name and <code>arg/</code> as a location?
(note that in my case, the subdirectory name doesn't match the package name, so that's probably not the case).</p>
<p>For the subdirectory case, I'm not even sure what the correct behaviour should be.
<code>../dist</code> suggests that uv groks that this is a workspace... or maybe it's a bug?
<code>./dist</code> is backwards-compatible... though one may argue that it's against workspace ethos?</p>
<p>Finally:</p>
<ul>
<li><code>uv build --all</code> at top-level builds all packages with output in <code>./dist</code> aka <code>repo/dist</code></li>
</ul>
<h3>Platform</h3>
<p>macos</p>
<h3>Version</h3>
<p>uv 0.7.12 (Homebrew 2025-06-06)</p>
<h3>Python version</h3>
<p>any</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @dimaqq on 2025-06-09 07:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @konstin by @zanieb on 2025-06-09 14:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-08-07 12:30</div>
            <div class="timeline-body"><p>We're fixing this in #15133</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-10-19 12:21</div>
            <div class="timeline-body"><p>This is fixed in 0.9.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-10-19 12:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:31:42 UTC
    </footer>
</body>
</html>
