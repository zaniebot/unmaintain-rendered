```yaml
number: 12755
title: "New config option `keyring-path` to support keyring"
type: issue
state: open
author: kevinli1993
labels:
  - enhancement
assignees: []
created_at: 2025-04-08T19:23:09Z
updated_at: 2025-12-10T09:32:06Z
url: https://github.com/astral-sh/uv/issues/12755
synced_at: 2026-01-10T01:57:29Z
```

# New config option `keyring-path` to support keyring

---

_Issue opened by @kevinli1993 on 2025-04-08 19:23_

### Summary

Currently, the `keyring` path is hard-coded to the string `"keyring"` 

https://github.com/astral-sh/uv/blob/e0b4dfe923ee807ed2e6e9e16e101a652977ef42/crates/uv-auth/src/keyring.rs#L93

Could we have a new config option `keyring-path` (default value: `"keyring"`), so that the user can control which executable runs:
```
[tool.uv]
keyring-provider = "subprocess"
keyring-path = "/absolute/path/to/keyring"
```
with an associated env var `UV_KEYRING_PATH`. 

The use-case is that different projects may want to use different `keyring`'s (some might use the global one; others might use another one that has different plugins, etc.).  Right now, the first `keyring` on the user's `PATH` is used, and I would like to provide an absolute path.


### Example

_No response_

---

_Label `enhancement` added by @kevinli1993 on 2025-04-08 19:23_

---

_Comment by @kevinli1993 on 2025-04-14 02:03_

Hi @zanieb, I'm wondering if there's any appetite for this enhancement? If so, I'd be happy to work on a PR.  

Thanks, much appreciated. 

---

_Comment by @zanieb on 2025-04-15 20:23_

@kevinli1993 we're going to be doing more design work around keyring soon, so I'm hesitant to make changes here. cc @jtfmumm and @konstin 

---

_Comment by @zanieb on 2025-04-15 20:24_

I think the problem here is `keyring-path` is only relevant for `subprocess` which is only one of the modes we want to support. It could be `UV_KEYRING_COMMAND_PATH` or something, but it really depends on if we end up solving this use-case with the broader work around keyring configuration.

---

_Comment by @kevinli1993 on 2025-04-15 22:25_

Got it, that makes sense; I look forward to that and will revisit later. 

---

_Comment by @RHeynsZa on 2025-07-17 09:50_

Could we add a warning if a faulty/wrong keyring is being used? Tracking this down is a massive pain

---

_Comment by @zanieb on 2025-07-17 12:06_

How would we know the wrong keyring is being used? Can you say more?

---

_Comment by @RHeynsZa on 2025-08-08 12:47_

Honestly, Id just recommend something like adding a message to auth failure saying

> Double check keyring installation by running `which keyring` for further debugging

After running that i was able to track down the issue

---

_Comment by @dannytodd on 2025-12-09 15:54_

+1 for an improved keyring experience. 

Using `keyring` in `subprocess` mode, which we do so in both `pip` and `uv`,  can be a huge pain due to being at the whim of PATH which may pick up `keyring` installs from brew, apt, local venv etc. which don't include required backends. This is of course just a missing dependencies issue, but it would be great to be explicit if possible.  A solution I would like to see would be something akin to a "global" mode that would, instead of invoking `keyring`, have uv target a select `keyring` location, potentially one provided via env var or a lookup e.g. tool dir of `uv tool install keyring`?

---

_Comment by @zanieb on 2025-12-09 17:16_

@dannytodd can you share which keyring plugins are you using?

---

_Comment by @dannytodd on 2025-12-10 09:30_

> [@dannytodd](https://github.com/dannytodd) can you share which keyring plugins are you using?

We're using the [gcloud auth backend](https://pypi.org/project/keyrings.google-artifactregistry-auth/): `keyrings.google-artifactregistry-auth`.

---
