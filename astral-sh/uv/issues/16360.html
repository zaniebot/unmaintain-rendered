<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`Operation timed out` when trying to `uv python install` or `uv add` on work computer - astral-sh/uv #16360</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`Operation timed out` when trying to `uv python install` or `uv add` on work computer</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/16360">#16360</a>
        opened by <a href="https://github.com/viseryon">@viseryon</a>
        on 2025-10-19 13:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/viseryon">@viseryon</a> on 2025-10-19 13:44</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hello, I'm trying to get uv to work on my work laptop. Im not very experienced unfortunately, but would really love to use uv at work.</p>
<p>I have set some environment variables needed, like HTTPS_PROXY=https://proxy.firm.pl:8080/, HTTP_PROXY=http://proxy.firm.pl:8080/, UV_NATIVE_TLS=true, UV_CONFIG_FILE, RUST_BACKTRACE=full and RUST_LOG=trace.</p>
<p>When running <code>uv python install</code> it always stops at <code>checkout dropped for (&quot;https&quot;, github.com)</code>. I also tried to use uv to access our own index at https://repo.firm.pl/repository/proxy-pypi.org/simple to install packages, but it stopped in the same spot.</p>
<p>uv config file
`native-tls = true</p>
<p>[[index]]
default = true
url = &quot;https://repo.firm.pl/repository/proxy-pypi.org/simple&quot;`</p>
<p>and here's full log of <code>uv python install</code>
<code>PS C:\Users\me\Documents\empty&gt; uv python install 3.14 DEBUG uv 0.9.3 (83635a6c4 2025-10-15) TRACE Checking lock for `C:\Users\me\AppData\Roaming\uv\python` at `C:\Users\me\AppData\Roaming\uv\python\.lock` DEBUG Acquired lock for `C:\Users\me\AppData\Roaming\uv\python` DEBUG No installation found for request `3.14 (cpython-3.14-windows-x86_64-none)` DEBUG Found download `cpython-3.14.0-windows-x86_64-none` for request `3.14 (cpython-3.14-windows-x86_64-none)` DEBUG Using request timeout of 30s DEBUG Downloading https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz DEBUG Extracting cpython-3.14.0-20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz to temporary location: C:\Users\me\AppData\Roaming\uv\python\.temp\.tmplmexT4 TRACE Handling request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz with authentication policy auto TRACE Request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz is unauthenticated, checking cache TRACE No credentials in cache for URL https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz TRACE Attempting unauthenticated request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz TRACE checkout waiting for idle connection: (&quot;https&quot;, github.com) DEBUG starting new connection: https://github.com/ DEBUG proxy(https://proxy.firm.pl:8080/) intercepts 'https://github.com/' TRACE tunneling HTTPS over proxy TRACE Http::connect; scheme=Some(&quot;https&quot;), host=Some(&quot;proxy.firm.pl&quot;), port=Some(Port(8080)) DEBUG connecting to 172.16.2.200:8080 DEBUG connected to 172.16.2.200:8080 TRACE checkout dropped for (&quot;https&quot;, github.com) TRACE Considering retry of error: NetworkError(DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;github.com&quot;)), port: None, path: &quot;/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz&quot;, query: None, fragment: None }, WrappedReqwestError(Reqwest(reqwest::Error { kind: Request, url: &quot;https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz&quot;, source: TimedOut }))) TRACE Retrying nested reqwest middleware error DEBUG Transient failure while handling response for cpython-3.14.0-windows-x86_64-none; retrying... DEBUG Downloading https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz DEBUG Extracting cpython-3.14.0-20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz to temporary location: C:\Users\me\AppData\Roaming\uv\python\.temp\.tmpeyApPd TRACE Handling request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz with authentication policy auto TRACE Request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz is unauthenticated, checking cache TRACE No credentials in cache for URL https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz TRACE Attempting unauthenticated request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz TRACE checkout waiting for idle connection: (&quot;https&quot;, github.com) DEBUG starting new connection: https://github.com/ DEBUG proxy(https://proxy.firm.pl:8080/) intercepts 'https://github.com/' TRACE tunneling HTTPS over proxy TRACE Http::connect; scheme=Some(&quot;https&quot;), host=Some(&quot;proxy.firm.pl&quot;), port=Some(Port(8080)) DEBUG connecting to 172.16.2.200:8080 DEBUG connected to 172.16.2.200:8080 TRACE checkout dropped for (&quot;https&quot;, github.com) TRACE Considering retry of error: NetworkError(DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;github.com&quot;)), port: None, path: &quot;/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz&quot;, query: None, fragment: None }, WrappedReqwestError(Reqwest(reqwest::Error { kind: Request, url: &quot;https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz&quot;, source: TimedOut }))) TRACE Retrying nested reqwest middleware error DEBUG Transient failure while handling response for cpython-3.14.0-windows-x86_64-none; retrying... DEBUG Downloading https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz DEBUG Extracting cpython-3.14.0-20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz to temporary location: C:\Users\me\AppData\Roaming\uv\python\.temp\.tmpzKox5L TRACE Handling request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz with authentication policy auto TRACE Request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz is unauthenticated, checking cache TRACE No credentials in cache for URL https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz TRACE Attempting unauthenticated request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz TRACE checkout waiting for idle connection: (&quot;https&quot;, github.com) DEBUG starting new connection: https://github.com/ DEBUG proxy(https://proxy.firm.pl:8080/) intercepts 'https://github.com/' TRACE tunneling HTTPS over proxy TRACE Http::connect; scheme=Some(&quot;https&quot;), host=Some(&quot;proxy.firm.pl&quot;), port=Some(Port(8080)) DEBUG connecting to 172.16.2.200:8080 DEBUG connected to 172.16.2.200:8080 TRACE checkout dropped for (&quot;https&quot;, github.com) TRACE Considering retry of error: NetworkError(DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;github.com&quot;)), port: None, path: &quot;/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz&quot;, query: None, fragment: None }, WrappedReqwestError(Reqwest(reqwest::Error { kind: Request, url: &quot;https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz&quot;, source: TimedOut }))) TRACE Retrying nested reqwest middleware error DEBUG Transient failure while handling response for cpython-3.14.0-windows-x86_64-none; retrying... DEBUG Downloading https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz DEBUG Extracting cpython-3.14.0-20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz to temporary location: C:\Users\me\AppData\Roaming\uv\python\.temp\.tmpRcvxsV TRACE Handling request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz with authentication policy auto TRACE Request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz is unauthenticated, checking cache TRACE No credentials in cache for URL https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz TRACE Attempting unauthenticated request for https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz TRACE checkout waiting for idle connection: (&quot;https&quot;, github.com) DEBUG starting new connection: https://github.com/ DEBUG proxy(https://proxy.firm.pl:8080/) intercepts 'https://github.com/' TRACE tunneling HTTPS over proxy TRACE Http::connect; scheme=Some(&quot;https&quot;), host=Some(&quot;proxy.firm.pl&quot;), port=Some(Port(8080)) DEBUG connecting to 172.16.2.200:8080 DEBUG connected to 172.16.2.200:8080 TRACE checkout dropped for (&quot;https&quot;, github.com) TRACE Considering retry of error: NetworkError(DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;github.com&quot;)), port: None, path: &quot;/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz&quot;, query: None, fragment: None }, WrappedReqwestError(Reqwest(reqwest::Error { kind: Request, url: &quot;https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz&quot;, source: TimedOut }))) TRACE Retrying nested reqwest middleware error error: Failed to install cpython-3.14.0-windows-x86_64-none   Caused by: Request failed after 3 retries   Caused by: Failed to download https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz   Caused by: error sending request for url (https://github.com/astral-sh/python-build-standalone/releases/download/20251014/cpython-3.14.0%2B20251014-x86_64-pc-windows-msvc-install_only_stripped.tar.gz)   Caused by: operation timed out DEBUG Released lock at `C:\Users\me\AppData\Roaming\uv\python\.lock</code></p>
<p>I can confirm that i can access the internal index via <code>curl https://repo.firm.pl/repository/proxy-pypi.org/simple/pandas/</code></p>
<p><code>StatusCode        : 200 StatusDescription : OK Content           : &lt;html lang=&quot;en&quot;&gt;                     &lt;head&gt;&lt;title&gt;Links for panda&lt;/title&gt;                       &lt;meta name=&quot;api-version&quot; value=&quot;2&quot;/&gt;                     &lt;/head&gt;                     &lt;body&gt;&lt;h1&gt;Links for panda&lt;/h1&gt;                         &lt;a href=&quot;../../packages/pandas/0.1/pandas-0.1.tar.gz#sha256=8d65... RawContent        : HTTP/1.1 200 OK</code></p>
<p>the result is the same when running with <code>--native-tls</code> argument.</p>
<p>thanks for help :)</p>
<h3>Platform</h3>
<p>Windows 11 x86_64</p>
<h3>Version</h3>
<p>uv 0.9.3 (83635a6c4 2025-10-15)</p>
<h3>Python version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @viseryon on 2025-10-19 13:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-19 15:56</div>
            <div class="timeline-body"><p>You could try increasing the <a href="https://docs.astral.sh/uv/reference/environment/#uv_http_timeout"><code>UV_HTTP_TIMEOUT</code></a> though I suspect there's something else wrong.</p>
<p>Aside: You should use triple backticks (```) for codeblocks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-19 15:56</div>
            <div class="timeline-body"><p>Do you know what kind of proxy you're using?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/topher96">@topher96</a> on 2025-10-21 04:07</div>
            <div class="timeline-body"><p>&lt;HTTPS_PROXY=https://proxy.firm.pl:8080/</p>
<p>The above is kind of weird.   I normally see the https proxy as an http URL not an https URL</p>
<p>And even if you do have a proxy over an https url I think it would even odder for it to be at the same hostname and port number as the http version.</p>
<p>In short I suggest you try
HTTPS_PROXY=http://proxy.firm.pl:8080/
HTTP_PROXY=http://proxy.firm.pl:8080/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/viseryon">@viseryon</a> on 2025-10-30 20:42</div>
            <div class="timeline-body"><p>Hello, I did some tests checking different combinations of environmental variables. It failed every time unfortunately... Each was also tried with either <code>--native-tls</code> flag or env var.</p>
<pre><code>$env:HTTP_PROXY=&quot;http://proxy.firm.pl:8080&quot;
error: Failed to fetch: `https://repo.firm.pl/repository/proxy-pypi.org/simple/pandas/`
  Caused by: Request failed after 3 retries
  Caused by: error sending request for url (https://repo.firm.pl/repository/proxy-pypi.org/simple/pandas/)
  Caused by: client error (Connect)
  Caused by: received fatal alert: HandshakeFailure

$env:HTTPS_PROXY=&quot;http://proxy.firm.pl:8080&quot;
$env:HTTP_PROXY=&quot;http://proxy.firm.pl:8080&quot;
error: Failed to fetch: `https://repo.firm.pl/repository/proxy-pypi.org/simple/pandas/`
  Caused by: Request failed after 3 retries
  Caused by: error sending request for url (https://repo.firm.pl/repository/proxy-pypi.org/simple/pandas/)
  Caused by: client error (Connect)
  Caused by: tunnel error: unsuccessful

$env:HTTPS_PROXY=&quot;http://proxy.firm.pl:8080&quot;
$env:HTTPS_PROXY=&quot;https://proxy.firm.pl:8080&quot;
error: Failed to fetch: `https://repo.firm.pl/repository/proxy-pypi.org/simple/pandas/`
  Caused by: Request failed after 3 retries
  Caused by: error sending request for url (https://repo.firm.pl/repository/proxy-pypi.org/simple/pandas/)
  Caused by: operation timed out

$env:HTTPS_PROXY=&quot;&quot;
$env:HTTPS_PROXY=&quot;&quot;
error: Failed to fetch: `https://repo.firm.pl/repository/proxy-pypi.org/simple/pandas/`
  Caused by: Request failed after 3 retries
  Caused by: error sending request for url (https://repo.firm.pl/repository/proxy-pypi.org/simple/pandas/)
  Caused by: client error (Connect)
  Caused by: received fatal alert: HandshakeFailure
</code></pre>
<p>As I said earlier I can access the index via curl command in powershell. The index is Sonatype Nexus Repository Manager if it helps.</p>
<p>I've also got anaconda installed, so i checked pip's output during a download of a package. I skipped some lines that are just different version of the same package.</p>
<pre><code>(base) PS C:\Users\me\Documents&gt; pip download sampleproject -vvv -i https://repo.firm.pl/repository/proxy-pypi.org/simple --no-cache-dir
Created temporary directory: C:\Users\me\AppData\Local\Temp\pip-build-tracker-7dt_xdh5
Initialized build tracking at C:\Users\me\AppData\Local\Temp\pip-build-tracker-7dt_xdh5
Created build tracker: C:\Users\me\AppData\Local\Temp\pip-build-tracker-7dt_xdh5
Entered build tracker: C:\Users\me\AppData\Local\Temp\pip-build-tracker-7dt_xdh5
Created temporary directory: C:\Users\me\AppData\Local\Temp\pip-download-co6el5se
Looking in indexes: https://repo.firm.pl/repository/proxy-pypi.org/simple
1 location(s) to search for versions of sampleproject:
* https://repo.firm.pl/repository/proxy-pypi.org/simple/sampleproject/
Fetching project page and analyzing links: https://repo.firm.pl/repository/proxy-pypi.org/simple/sampleproject/
Getting page https://repo.firm.pl/repository/proxy-pypi.org/simple/sampleproject/
Found index url https://repo.firm.pl/repository/proxy-pypi.org/simple/
Starting new HTTPS connection (1): repo.firm.pl:443
https://repo.firm.pl:443 &quot;GET /repository/proxy-pypi.org/simple/sampleproject/ HTTP/1.1&quot; 200 3598
Fetched page https://repo.firm.pl/repository/proxy-pypi.org/simple/sampleproject/ as text/html; charset=UTF-8
  Found link https://repo.firm.pl/repository/proxy-pypi.org/packages/sampleproject/4.0.0/sampleproject-4.0.0.tar.gz#sha256=0ace7980f82c5815ede4cd7bf9f6693684cec2ae47b9b7ade9add533b8627c6b (from https://repo.firm.pl/repository/proxy-pypi.org/simple/sampleproject/) (requires-python:&gt;=3.9), version: 4.0.0
Skipping link: not a file: https://repo.firm.pl/repository/proxy-pypi.org/simple/sampleproject/
Given no hashes to check 13 links for project 'sampleproject': discarding no candidates
Collecting sampleproject
  File was already downloaded c:\users\me\documents\sampleproject-4.0.0-py3-none-any.whl
  Added sampleproject from https://repo.firm.pl/repository/proxy-pypi.org/packages/sampleproject/4.0.0/sampleproject-4.0.0-py3-none-any.whl#sha256=c23e447ea90d796d1e645c35c4b2de125040add12a845825546f91c93f391b6b to build tracker 'C:\\Users\\me\\AppData\\Local\\Temp\\pip-build-tracker-7dt_xdh5'
  Removed sampleproject from https://repo.firm.pl/repository/proxy-pypi.org/packages/sampleproject/4.0.0/sampleproject-4.0.0-py3-none-any.whl#sha256=c23e447ea90d796d1e645c35c4b2de125040add12a845825546f91c93f391b6b from build tracker 'C:\\Users\\me\\AppData\\Local\\Temp\\pip-build-tracker-7dt_xdh5'
1 location(s) to search for versions of peppercorn:
* https://repo.firm.pl/repository/proxy-pypi.org/simple/peppercorn/
Fetching project page and analyzing links: https://repo.firm.pl/repository/proxy-pypi.org/simple/peppercorn/
Getting page https://repo.firm.pl/repository/proxy-pypi.org/simple/peppercorn/
Found index url https://repo.firm.pl/repository/proxy-pypi.org/simple/
https://repo.firm.pl:443 &quot;GET /repository/proxy-pypi.org/simple/peppercorn/ HTTP/1.1&quot; 200 1464
Fetched page https://repo.firm.pl/repository/proxy-pypi.org/simple/peppercorn/ as text/html; charset=UTF-8
  Found link https://repo.firm.pl/repository/proxy-pypi.org/packages/peppercorn/0.6/peppercorn-0.6-py3-none-any.whl#sha256=46125cad688a9cf3b08e463bcb797891ee73ece93602a8ea6f14e40d1042d454 (from https://repo.firm.pl/repository/proxy-pypi.org/simple/peppercorn/), version: 0.6
  Found link https://repo.firm.pl/repository/proxy-pypi.org/packages/peppercorn/0.6/peppercorn-0.6.tar.gz#sha256=96d7681d7a04545cfbaf2c6fb66de67b29cfc42421aa263e4c78f2cbb85be4c6 (from https://repo.firm.pl/repository/proxy-pypi.org/simple/peppercorn/), version: 0.6
  ...
Skipping link: not a file: https://repo.firm.pl/repository/proxy-pypi.org/simple/peppercorn/
Given no hashes to check 7 links for project 'peppercorn': discarding no candidates
Collecting peppercorn (from sampleproject)
  File was already downloaded c:\users\me\documents\peppercorn-0.6-py3-none-any.whl
  Added peppercorn from https://repo.firm.pl/repository/proxy-pypi.org/packages/peppercorn/0.6/peppercorn-0.6-py3-none-any.whl#sha256=46125cad688a9cf3b08e463bcb797891ee73ece93602a8ea6f14e40d1042d454 (from sampleproject) to build tracker 'C:\\Users\\me\\AppData\\Local\\Temp\\pip-build-tracker-7dt_xdh5'
  Removed peppercorn from https://repo.firm.pl/repository/proxy-pypi.org/packages/peppercorn/0.6/peppercorn-0.6-py3-none-any.whl#sha256=46125cad688a9cf3b08e463bcb797891ee73ece93602a8ea6f14e40d1042d454 (from sampleproject) from build tracker 'C:\\Users\\me\\AppData\\Local\\Temp\\pip-build-tracker-7dt_xdh5'
  ...
Created temporary directory: C:\Users\me\AppData\Local\Temp\pip-unpack-zsp3ffmp
Created temporary directory: C:\Users\me\AppData\Local\Temp\pip-unpack-upet2sgj
Successfully downloaded sampleproject peppercorn
1 location(s) to search for versions of pip:
* https://repo.firm.pl/repository/proxy-pypi.org/simple/pip/
Fetching project page and analyzing links: https://repo.firm.pl/repository/proxy-pypi.org/simple/pip/
Getting page https://repo.firm.pl/repository/proxy-pypi.org/simple/pip/
Found index url https://repo.firm.pl/repository/proxy-pypi.org/simple/
Starting new HTTPS connection (1): repo.firm.pl:443
https://repo.firm.pl:443 &quot;GET /repository/proxy-pypi.org/simple/pip/ HTTP/1.1&quot; 200 59739
Fetched page https://repo.firm.pl/repository/proxy-pypi.org/simple/pip/ as text/html; charset=UTF-8
  Found link https://repo.firm.pl/repository/proxy-pypi.org/packages/pip/25.3/pip-25.3.tar.gz#sha256=8d0538dbbd7babbd207f261ed969c65de439f6bc9e5dbd3b3b9a77f25d95f343 (from https://repo.firm.pl/repository/proxy-pypi.org/simple/pip/) (requires-python:&gt;=3.9), version: 25.3
  ...
Skipping link: not a file: https://repo.firm.pl/repository/proxy-pypi.org/simple/pip/
Given no hashes to check 259 links for project 'pip': discarding no candidates
Remote version of pip: 25.3
Local version of pip:  23.2.1
Was pip installed by pip? False
Removed build tracker: 'C:\\Users\\me\\AppData\\Local\\Temp\\pip-build-tracker-7dt_xdh5'
</code></pre>
<p>As for the proxy, some time ago I exported a file that was a PAC Proxy Auto-Configuration file. Chatgpt told me this about its logic:</p>
<pre><code>Local and internal domains are mostly bypassed using DIRECT.
Specific company-related domains are routed through the proxy.
Non-routable IP ranges are excluded from proxying.
VPN-related conference domains are also excluded when on a specific subnet.
Fallback behavior: If no condition matches, traffic is sent through proxy.firm.pl:8080.
</code></pre>
<p>Please advise me what else should I check or try. Thank you for your time!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">network</span> added by @konstin on 2025-12-18 15:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/viseryon">@viseryon</a> on 2025-12-19 22:49</div>
            <div class="timeline-body"><p>Hello, since the last comment I had time to do more research and test a few things...</p>
<p>First, I can confirm that proxies <code>HTTP_PROXY=http://proxy.firm.pl:8080/</code> and <code>HTTPS_PROXY=http://proxy.firm.pl:8080/</code> are correct. I don't know the latter doesn't use https, but apparently this is how things work here.</p>
<p>Second, ordinary pip from anaconda works fine in anaconda powershell when I specify the index with <code>--index-url</code>. However, when I try do use the repository with <code>uv</code> by running command <code>uv add sampleproject --native-tls --index-url=...</code> or by specifying these two arguments in <code>pyproject.toml</code> I get an error <code>Caused by: client error (Connect) Caused by: tunnel error: unsuccessful</code>. Using those env vars <code>UV_INDEX_{name}_PASSWORD</code> didn't help, nor adding username and password directly to the proxy url.</p>
<p>With help of chatgpt I checked conda's configs with <code>conda config --show</code> in anaconda powershell. It told me that <code>aggressive_update_packages: - ca-certificates - certifi - openssl ssl_verify: True proxy_servers: {}</code> were important. Apparently anaconda installs and maintains its own up-to-date trust store (ca-certificates + certifi + openssl) that contains corporate CAs and is automatically used by pip.</p>
<blockquote>
<p>If the corporate MITM CA is not installed as a trusted root in Windows, the TLS handshake fails. Additionally, if the corporate proxy requires NTLM authentication, uv fails during CONNECT tunneling because NTLM is not supported. This explains why uv fails with handshake or tunnel errors even though the same repository works with pip in Anaconda PowerShell.</p>
</blockquote>
<p>The other thing I tried was using pypi repo with proxy settings and native-tls. This actually somewhat worked and I was able to connect, handshake was complete, but received an invalid zip that turned out to be a html file with <code>Access denied</code>.</p>
<p>That's it for now as I run out of ideas. Hope you can advice me what else to check. Cheers</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:30 UTC
    </footer>
</body>
</html>
