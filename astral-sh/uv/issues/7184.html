<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Duplicate binaries in uv cache - astral-sh/uv #7184</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Duplicate binaries in uv cache</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7184">#7184</a>
        opened by <a href="https://github.com/yankeexe">@yankeexe</a>
        on 2024-09-08 03:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/yankeexe">@yankeexe</a></div>
            <div class="timeline-body">Issue
<p><code>uv</code> is creating duplicate binaries for the same version in the cache, increasing the cache size.
Ideally, if the same version exists in the cache then there should not be multiple copies of it.</p>
<img alt="image" src="https://github.com/user-attachments/assets/d6a3cfc4-10d9-4f96-9391-232fc0bdbe6a">

Solution maybe?
<p>To optimize storage, would it be possible to create a symbolic link (softlink) or hardlink to the existing binary instead of duplicating it? This approach could maintain any internal indexing or read mechanisms without increasing the cache size.</p>
System
<p><strong>uv version:</strong> uv 0.4.5 (42b6bfbad 2024-09-04)
<strong>platform</strong>: Darwin -  Sonoma 14.6.1</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cache</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-08 13:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-08 13:17</div>
            <div class="timeline-body"><p>Thanks for the report. Not sure what&#x27;s up here, but @charliermarsh might have an idea. Does this behavior persist if you clear the cache? I wonder if we changed our cache key function so there&#x27;s a duplicate here from an old version of uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-08 14:00</div>
            <div class="timeline-body"><p>Are you seeing this repeatedly?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yankeexe">@yankeexe</a> on 2024-09-16 17:53</div>
            <div class="timeline-body"><p>@charliermarsh Tried installing, uninstalling, re-installing the <code>ruff</code> package with <code>uv tool install</code> and <code> uv pip install</code>.
This is what I was doing when I noticed this issue.</p>
<p>I don&#x27;t see this issue anymore.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-16 17:55</div>
            <div class="timeline-body"><p>Thanks for following up!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-16 17:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-16 17:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:33:49 UTC
    </footer>
</body>
</html>
