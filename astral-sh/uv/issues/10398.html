<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Validation differences between `uv pip check` and `uv pip install --strict` - astral-sh/uv #10398</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Validation differences between `uv pip check` and `uv pip install --strict`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/10398">#10398</a>
        opened by <a href="https://github.com/hpelwintervold">@hpelwintervold</a>
        on 2025-01-08 16:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/hpelwintervold">@hpelwintervold</a> on 2025-01-08 16:09</div>
            <div class="timeline-body"><p><strong>This is a question</strong></p>
<p>Hello,</p>
<p>I am wondering what differences there are between the validation performed in the Python environment between the commands <code>uv pip check</code> and <code>uv pip install --strict</code>. I have looked at the documentation and searched in GitHub issues for more detail but cannot find more information.</p>
<p><code>uv pip install --strict</code> states:</p>
<pre><code>Validate the Python environment after completing the installation, to detect packages with missing dependencies or other issues
</code></pre>
<p><code>uv pip check</code> states:</p>
<pre><code>Verify installed packages have compatible dependencies
</code></pre>
<p>My question mostly boils down to, is running <code>uv pip check</code> after <code>uv pip install --strict</code> redundant?</p>
<p>https://docs.astral.sh/uv/reference/cli/#uv-pip-install
https://docs.astral.sh/uv/reference/cli/#uv-pip-check</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-08 19:11</div>
            <div class="timeline-body"><p>It's basically the same. Internally, both <code>--strict</code> and <code>check</code> run the same &quot;collect diagnostics&quot; method on the target environment. The only difference is that <code>--strict</code> will filter out any diagnostics that are linked to &quot;unrelated&quot; packages. Like if you did <code>pip install flask --strict</code>, it would <em>not</em> print diagnostics related to an unrelated package like <code>black</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @Gankra on 2025-01-08 19:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hpelwintervold">@hpelwintervold</a> on 2025-01-08 22:28</div>
            <div class="timeline-body"><p>Thanks, so expanding a little, assuming a virtualenv was created from a number of subsequent <code>uv pip install --strict</code> commands, it is guaranteed the environment is in a &quot;correct&quot; state. So running <code>uv pip check</code> would be redundant.</p>
<p>But if a non-strict <code>uv pip install</code> is performed which installs some corrupted package, subsequent <code>uv pip install --strict</code> are not guaranteed to catch it. So <code>uv pip check</code> would be required.</p>
<p>Are those statements correct?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-08 22:30</div>
            <div class="timeline-body"><p>I think that's all correct, yeah.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-08 22:31</div>
            <div class="timeline-body"><p><code>uv pip check</code> is really fast, so probably makes sense to run it separately if you're looking to enforce those kinds of things.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hpelwintervold">@hpelwintervold</a> on 2025-01-09 00:24</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @hpelwintervold on 2025-01-09 00:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AaronDMarasco">@AaronDMarasco</a> on 2025-10-16 15:31</div>
            <div class="timeline-body"><p>For those trying to script some stuff - it will emit a warning, but the return value of <code>uv pip install --exact --no-deps --strict</code> is still 0/&quot;happy&quot; even if there is an unresolved dependency.</p>
<p>The <code>uv pip check</code> will explicitly return non-zero for shell scripting to catch the problem.</p>
<p>(Note: This is as of <code>uv</code> 0.9.2.)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:25 UTC
    </footer>
</body>
</html>
