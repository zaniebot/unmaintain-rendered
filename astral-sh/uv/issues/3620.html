<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Failed to download and build `fasttext`  - astral-sh/uv #3620</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Failed to download and build `fasttext` </h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3620">#3620</a>
        opened by <a href="https://github.com/masonkirchner">@masonkirchner</a>
        on 2024-05-15 19:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/masonkirchner">@masonkirchner</a> on 2024-05-15 19:07</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>Hey team, I have a minimal <code>requirements.in</code> file that only contains <code>fasttext==0.9.2</code>. If I try to run <code>uv pip compile requirements.in</code>, it returns the following error:</p>
<pre><code>error: Failed to download and build `fasttext==0.9.2`
  Caused by: Failed to build: `fasttext==0.9.2`
  Caused by: Build backend failed to determine extra requires with `build_wheel()` with exit status: 1
--- stdout:

--- stderr:
/home/mkirchner/.cache/uv/.tmpCMWAZz/.venv/bin/python: No module named pip
Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 38, in __init__
ModuleNotFoundError: No module named 'pybind11'

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 14, in &lt;module&gt;
  File &quot;/home/mkirchner/.cache/uv/.tmpCMWAZz/.venv/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 325, in get_requires_for_build_wheel
    return self._get_build_requires(config_settings, requirements=['wheel'])
  File &quot;/home/mkirchner/.cache/uv/.tmpCMWAZz/.venv/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 295, in _get_build_requires
    self.run_setup()
  File &quot;/home/mkirchner/.cache/uv/.tmpCMWAZz/.venv/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 487, in run_setup
    super().run_setup(setup_script=setup_script)
  File &quot;/home/mkirchner/.cache/uv/.tmpCMWAZz/.venv/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 311, in run_setup
    exec(code, locals())
  File &quot;&lt;string&gt;&quot;, line 72, in &lt;module&gt;
  File &quot;&lt;string&gt;&quot;, line 41, in __init__
RuntimeError: pybind11 install failed.
---
</code></pre>
<p>I've tried including <code>pybind11</code> in the <code>requirements.in</code> and that doesn't help either. I also have <code>pip</code> installed.</p>
<p>I'm in a miniconda environment using Python 3.10.13 with the following packages:</p>
<pre><code>  _libgcc_mutex      pkgs/main/linux-64::_libgcc_mutex-0.1-main 
  _openmp_mutex      pkgs/main/linux-64::_openmp_mutex-5.1-1_gnu 
  bzip2              pkgs/main/linux-64::bzip2-1.0.8-h5eee18b_6 
  ca-certificates    pkgs/main/linux-64::ca-certificates-2024.3.11-h06a4308_0 
  ld_impl_linux-64   pkgs/main/linux-64::ld_impl_linux-64-2.38-h1181459_1 
  libffi             pkgs/main/linux-64::libffi-3.4.4-h6a678d5_1 
  libgcc-ng          pkgs/main/linux-64::libgcc-ng-11.2.0-h1234567_1 
  libgomp            pkgs/main/linux-64::libgomp-11.2.0-h1234567_1 
  libstdcxx-ng       pkgs/main/linux-64::libstdcxx-ng-11.2.0-h1234567_1 
  libuuid            pkgs/main/linux-64::libuuid-1.41.5-h5eee18b_0 
  ncurses            pkgs/main/linux-64::ncurses-6.4-h6a678d5_0 
  openssl            pkgs/main/linux-64::openssl-3.0.13-h7f8727e_1 
  pip                pkgs/main/linux-64::pip-24.0-py310h06a4308_0 
  python             pkgs/main/linux-64::python-3.10.13-h955ad1f_0 
  readline           pkgs/main/linux-64::readline-8.2-h5eee18b_0 
  setuptools         pkgs/main/linux-64::setuptools-69.5.1-py310h06a4308_0 
  sqlite             pkgs/main/linux-64::sqlite-3.45.3-h5eee18b_0 
  tk                 pkgs/main/linux-64::tk-8.6.14-h39e8969_0 
  tzdata             pkgs/main/noarch::tzdata-2024a-h04d1e81_0 
  wheel              pkgs/main/linux-64::wheel-0.43.0-py310h06a4308_0 
  xz                 pkgs/main/linux-64::xz-5.4.6-h5eee18b_1 
  zlib               pkgs/main/linux-64::zlib-1.2.13-h5eee18b_1 
</code></pre>
<p>Any ideas what might going on here?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-15 19:08</div>
            <div class="timeline-body"><p>You may need to run with <code>--no-build-isolation</code> in an environment that <em>already</em> has <code>pybind11</code> installed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-15 19:08</div>
            <div class="timeline-body"><p>Notice that <code>pip</code> also fails here when using <code>--use-pep517</code> (which we always use, and will eventually be pip's default):</p>
<pre><code>❯ pip install fasttext==0.9.2 --use-pep517
Collecting fasttext==0.9.2
  Downloading fasttext-0.9.2.tar.gz (68 kB)
     ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 68.8/68.8 kB 3.4 MB/s eta 0:00:00
  Installing build dependencies ... done
  Getting requirements to build wheel ... error
  error: subprocess-exited-with-error

  × Getting requirements to build wheel did not run successfully.
  │ exit code: 1
  ╰─&gt; [28 lines of output]
      /Users/crmarsh/.local/share/rtx/installs/python/3.12.2/bin/python: No module named pip
      Traceback (most recent call last):
        File &quot;&lt;string&gt;&quot;, line 38, in __init__
      ModuleNotFoundError: No module named 'pybind11'

      During handling of the above exception, another exception occurred:

      Traceback (most recent call last):
        File &quot;/Users/crmarsh/.local/share/rtx/installs/python/3.12.2/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 353, in &lt;module&gt;
          main()
        File &quot;/Users/crmarsh/.local/share/rtx/installs/python/3.12.2/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 335, in main
          json_out['return_val'] = hook(**hook_input['kwargs'])
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/Users/crmarsh/.local/share/rtx/installs/python/3.12.2/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 118, in get_requires_for_build_wheel
          return hook(config_settings)
                 ^^^^^^^^^^^^^^^^^^^^^
        File &quot;/private/var/folders/nt/6gf2v7_s3k13zq_t3944rwz40000gn/T/pip-build-env-k8h5u74n/overlay/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 325, in get_requires_for_build_wheel
          return self._get_build_requires(config_settings, requirements=['wheel'])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/private/var/folders/nt/6gf2v7_s3k13zq_t3944rwz40000gn/T/pip-build-env-k8h5u74n/overlay/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 295, in _get_build_requires
          self.run_setup()
        File &quot;/private/var/folders/nt/6gf2v7_s3k13zq_t3944rwz40000gn/T/pip-build-env-k8h5u74n/overlay/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 487, in run_setup
          super().run_setup(setup_script=setup_script)
        File &quot;/private/var/folders/nt/6gf2v7_s3k13zq_t3944rwz40000gn/T/pip-build-env-k8h5u74n/overlay/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 311, in run_setup
          exec(code, locals())
        File &quot;&lt;string&gt;&quot;, line 72, in &lt;module&gt;
        File &quot;&lt;string&gt;&quot;, line 41, in __init__
      RuntimeError: pybind11 install failed.
      [end of output]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/masonkirchner">@masonkirchner</a> on 2024-05-15 19:09</div>
            <div class="timeline-body"><p>Awesome, <code>uv pip compile --no-build-isolation requirements.in</code> worked!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @masonkirchner on 2024-05-15 19:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:27 UTC
    </footer>
</body>
</html>
