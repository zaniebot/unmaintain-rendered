<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Additional dependencies in IPython profile - astral-sh/uv #11792</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Additional dependencies in IPython profile</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11792">#11792</a>
        opened by <a href="https://github.com/hugolundin">@hugolundin</a>
        on 2025-02-26 07:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/hugolundin">@hugolundin</a> on 2025-02-26 07:21</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I am a heavy user of IPython and typically have a REPL running all the time. My <code>profile_default/startup/start.py</code> looks like this, so that I don't have to import anything manually on a new session:</p>
<pre><code class="language-python">import numpy as np
import matplotlib.pyplot as plt
</code></pre>
<p>Up until now I have manually taken care of dependencies and installed them globally with <code>pip</code>, but I would like to convert this to <code>uv</code>. My first attempt was to simply use a <code>--with</code> statement. This works but quickly gets cumbersome as more dependencies are added:</p>
<pre><code class="language-shell">$ uvx --with numpy,matplotlib ipython
</code></pre>
<p>I could use <code>--with-requirements</code> and have a <code>requirements.txt</code> for my IPython:</p>
<pre><code class="language-shell">$ uvx --with-requirements ~/Developer/system/ipython/requirements.txt ipython
</code></pre>
<p>My ideal solution would, however, be to declare all dependencies inside <code>start.py</code>:</p>
<pre><code class="language-python"># /// script
# requires-python = &quot;&gt;=3.12&quot;
# dependencies = [
#     &quot;numpy&quot;,
#     &quot;matplotlib&quot;,
# ]
# ///

import numpy as np
import matplotlib.pyplot as plt
</code></pre>
<p>It does not seem to work and assume that is because IPython is the one who calls <code>start.py</code> and not <code>uv</code>. Is there another way to do this that I have not mentioned?</p>
<p>I suppose the same could come up if you invoke a script in a regular Python REPL that declares it dependencies using the inline syntax. Ideally, there would be a way to tell <code>uv</code> that the script has dependencies, but since this cannot be determined before script runtime, it seems impossible.</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @hugolundin on 2025-02-26 07:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-26 15:35</div>
            <div class="timeline-body"><p>I think this could be solved by https://github.com/astral-sh/uv/issues/6542</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hugolundin">@hugolundin</a> on 2025-02-28 05:23</div>
            <div class="timeline-body"><p>Yes, that seems to solve my problem. Not sure how I did not find that issue when searching. Thank you. Closing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @hugolundin on 2025-02-28 05:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:01 UTC
    </footer>
</body>
</html>
