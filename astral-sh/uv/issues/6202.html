<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feature Request: Allow `uv pip install --dry-run` from an explicit package list - astral-sh/uv #6202</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Feature Request: Allow <code>uv pip install --dry-run</code> from an explicit package list</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/6202">#6202</a>
        opened by <a href="https://github.com/chaubold">@chaubold</a>
        on 2024-08-19 12:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/chaubold">@chaubold</a></div>
            <div class="timeline-body"><p>Hey guys,</p>
<p>Thank you for providing <code>uv</code>, it's great to see so much movement in the Python package management ecosystem right now!</p>
<p>I'd love to use <code>uv</code> throughout our pipeline, where we do the following:</p>
<ul>
<li>Have a conda <code>environment.yaml</code> containing dependencies that need to be installed with <code>conda</code> and with <code>pip</code></li>
<li>Resolve the dependencies for <code>conda</code> and <code>pip</code> using <code>conda-lock</code> cross platform from linux on all operating systems (linux, win, osx-64, osx-arm64).</li>
<li>download and bundle all these packages for deployment / offline installs</li>
</ul>
<p>Unfortunately, <code>conda-lock</code> is causing quite some problems. <code>micromamba</code> can do all of the cross-platform package resolution for <code>conda</code> in a <code>--dry-run</code> fashion. But up to now we haven't found a different solution to perform <code>pip</code> dependency resolution that doesn't require manifesting the conda environment first (which doesn't work so well cross platform).</p>
<p>I looked at the <code>uv</code> source code and saw that <code>uv pip install</code> relies on <a href="https://github.com/astral-sh/uv/blob/main/crates/uv-installer/src/site_packages.rs"><code>SitePackages</code></a> to determine which packages are available in the base environment. But <code>SitePackages</code> can only be created <code>from_environment</code> or <code>from_interpreter</code> right now.</p>
<p>Wouldn't it make sense (also for testing purposes) to allow <code>SitePackages</code> to be created <code>from_package_list</code>? This list could e.g. be something like you get from <code>conda list --json</code>? Then one could run <code>uv pip install --dry-run --package-list packages.json my-dependency1, my-dependency2</code> and get a detailed list of what packages <em>would</em> be installed by <code>uv</code>, without ever manifesting anything.</p>
<p>Oh, and btw, structured <code>json</code> or <code>yaml</code> output would be great for those kinds of CI/CD pipelines ðŸ˜‰!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:26:11 UTC
    </footer>
</body>
</html>
