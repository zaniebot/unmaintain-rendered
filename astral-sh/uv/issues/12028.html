<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to specify environment variables for dependencies - astral-sh/uv #12028</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to specify environment variables for dependencies</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/12028">#12028</a>
        opened by <a href="https://github.com/nhukc">@nhukc</a>
        on 2025-03-06 23:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nhukc">@nhukc</a> on 2025-03-06 23:53</div>
            <div class="timeline-body"><h3>Question</h3>
<p>If I have a dependency based on a local checkout of pytorch and I want to build it using <code>USE_SYSTEM_NCCL=1</code> is there a way to do that with uv?</p>
<p>Here is the <code>setup.py</code> for pytorch that reads environment variables:
https://github.com/pytorch/pytorch/blob/main/setup.py</p>
<p>Here is an example of my <code>tool.uv.sources</code></p>
<pre><code>[tool.uv.sources]
torch = { path = &quot;../pytorch&quot; }
</code></pre>
<p>I want to migrate our project to uv, but my team needs build-time configuration like this.</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @nhukc on 2025-03-06 23:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-06 23:55</div>
            <div class="timeline-body"><p>Like, you want to configure that variable in the <code>pyproject.toml</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nhukc">@nhukc</a> on 2025-03-07 00:05</div>
            <div class="timeline-body"><p>Yes, if that's possible.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-08 04:13</div>
            <div class="timeline-body"><p>Yeah I don't think this is possible today. But if you set that environment variable in whatever way you typically set environment variables, it should be propagated to the build as you'd expect?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nhukc">@nhukc</a> on 2025-03-08 07:07</div>
            <div class="timeline-body"><p>Fair enough. I think a bash script that sets up a venv and builds the packages with environment variables fits our needs better.</p>
<p>I was mostly hoping there was a way to make the venv more reproducible. Similar to optional compilation features in rust crates.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-15 01:01</div>
            <div class="timeline-body"><p>It <em>could</em> make sense to expose this as some sort of build configuration setting (like <code>--config-setting</code> today).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cora-codes">@cora-codes</a> on 2025-04-24 23:04</div>
            <div class="timeline-body"><p>This comes up when building PyTorch from source for instance (<code>USE_CUFILE=0</code> etc)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:02 UTC
    </footer>
</body>
</html>
