```yaml
number: 5401
title: "`uv lock` doesn't show when we drop versions"
type: issue
state: closed
author: konstin
labels:
  - enhancement
  - preview
assignees: []
created_at: 2024-07-24T10:45:03Z
updated_at: 2024-07-24T15:33:11Z
url: https://github.com/astral-sh/uv/issues/5401
synced_at: 2026-01-10T01:57:11Z
```

# `uv lock` doesn't show when we drop versions

---

_Issue opened by @konstin on 2024-07-24 10:45_

See for example the "preferences-dependent-forking" packse scenario. In first call we split a version into two, in the second call we drop 2.0.0 but don't show that:

```
$ uv lock --upgrade --preview
Resolved 6 packages in 211ms
Updating preferences-dependent-forking-foo-5c5f76e6 v1.0.0 -> v1.0.0, 2.0.0
$ uv lock --preview
Resolved 5 packages in 115ms
```

We also seem to be inconsistent about the `v` prefix

---

_Label `preview` added by @konstin on 2024-07-24 10:45_

---

_Comment by @charliermarsh on 2024-07-24 13:26_

Should it?

---

_Comment by @konstin on 2024-07-24 13:28_

Imo this counts as a version update (`v1.0.0, v2.0.0 -> v1.0.0`) and we should display such changes to the lockfile as part of the summary message.

---

_Comment by @charliermarsh on 2024-07-24 13:29_

Oh, that seems right. But packages that are dropped entirely should not be shown, IMO.

---

_Comment by @BurntSushi on 2024-07-24 13:33_

As another data point, I _love_ when I get see dependencies dropped after running `cargo update`. Usually this inspires me to investigate further and can turn up interesting curiosities. I believe this is what caused me to notice the migration from `winapi` to `windows-sys` in the Rust ecosystem, for example.

---

_Comment by @charliermarsh on 2024-07-24 13:33_

What does it say?

---

_Comment by @charliermarsh on 2024-07-24 13:33_

Oh right, `Removing` and `Adding`. Ok, I can do that. I agree with you.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-07-24 13:33_

---

_Label `enhancement` added by @charliermarsh on 2024-07-24 13:34_

---

_Comment by @BurntSushi on 2024-07-24 13:37_

Yeah, and the same goes for adding a dependency, definitely. I pay very close attention to those! :)

---

_Comment by @zanieb on 2024-07-24 14:28_

Yes please!

---

_Referenced in [astral-sh/uv#5410](../../astral-sh/uv/pulls/5410.md) on 2024-07-24 14:55_

---

_Comment by @charliermarsh on 2024-07-24 14:56_

Separately, we only show these when you run `uv lock --update` right now (not `uv sync`, `uv run`, or `uv lock` without `--update`). Should we... always show these, when a lock exists already? I guess Cargo doesn't.

---

_Comment by @zanieb on 2024-07-24 14:58_

I was surprised that there was no output indicating a change to the lock file with a plain `uv lock`; I think it'd be great if there was / I don't see why it should be omitted.

---

_Comment by @charliermarsh on 2024-07-24 14:59_

I'll change it separately. (But probably not for `uv run` and `uv sync`, I suppose.)

---

_Referenced in [astral-sh/uv#5412](../../astral-sh/uv/issues/5412.md) on 2024-07-24 15:30_

---

_Closed by @charliermarsh on 2024-07-24 15:33_

---

_Closed by @charliermarsh on 2024-07-24 15:33_

---
