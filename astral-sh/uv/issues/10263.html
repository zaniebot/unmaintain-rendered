<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`python3-config` equivalent? - astral-sh/uv #10263</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`python3-config` equivalent?</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/10263">#10263</a>
        opened by <a href="https://github.com/YouJiacheng">@YouJiacheng</a>
        on 2025-01-01 13:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/YouJiacheng">@YouJiacheng</a> on 2025-01-01 13:34</div>
            <div class="timeline-body"><p>I want to use ThunderKittens and its Makefile requires <code>python3-config</code>
https://github.com/HazyResearch/ThunderKittens/blob/main/kernels/example_bind/Makefile</p>
<p>Currently I have two workarounds:</p>
<ol>
<li><p><code>.venv/pyvenv.cfg</code> says <code>home = /root/.local/share/uv/python/cpython-3.12.8-linux-x86_64-gnu/bin</code>,
so I can use <code>/root/.local/share/uv/python/cpython-3.12.8-linux-x86_64-gnu/bin/python3-config</code>.</p>
</li>
<li><p>~~<code>source .venv/bin/activate</code>~~ activate venv doesn't work.</p>
</li>
<li><p>source <code>env.src</code> defined as follows</p>
</li>
</ol>
<pre><code class="language-sh">PATH=&quot;$(dirname $(realpath .venv/bin/python)):$PATH&quot;
export PATH
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/10267.html">astral-sh/uv#10267</a> on 2025-01-02 01:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-01-04 00:02</div>
            <div class="timeline-body"><p>Yes, you'll have to add it to your path if you rely on a specific python3-config as its not tied to a virtualenv but rather a specific python install.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @samypr100 on 2025-01-04 00:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/krupan">@krupan</a> on 2025-06-03 02:15</div>
            <div class="timeline-body"><p>Hi, I'm running into a similar problem.  I'm on an old system, uv has installed a more recent version of python, but it does not symlink <code>python*-config</code> into <code>.venv/bin</code>, so I a python extension I'm trying to build fails to build.  Are you saying I have to manually symlink that at <code>.venv/bin/</code> or add <code>~/.local/share/uv/python/blah/bin</code> to my PATH?  Doesn't that defeat all the convenience and safety that python virtual environments are supposed to provide?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-06-03 02:34</div>
            <div class="timeline-body"><p>@krupan I would suggest opening a new issue and adding the necessary details as indicated in https://github.com/astral-sh/uv/issues/9452</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geofft">@geofft</a> on 2025-06-03 03:18</div>
            <div class="timeline-body"><p>I think continuing in this issue is fine but I'm specifically curious what the thing that expects python3-config is, if it's something public.</p>
<p>From a very brief glance, it looks like the upstream <code>venv</code> module and the current version of <code>virtualenv</code> also don't symlink python3-config, but legacy <code>virtualenv</code> did. It does seem reasonable to me to add it, so I kind of want to know why <code>venv</code> and <code>virtualenv</code> don't.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-06-03 03:36</div>
            <div class="timeline-body"><blockquote>
<p>so I kind of want to know why venv and virtualenv don't.</p>
</blockquote>
<p>Likely because it's not part of PEP 405</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/krupan">@krupan</a> on 2025-06-03 17:36</div>
            <div class="timeline-body"><p>From the python-config man page:</p>
<blockquote>
<p>python-config helps compiling and linking programs, which embed the Python interpreter, or extension modules that can be loaded dynamically (at run time) into the interpreter.</p>
</blockquote>
<p>So, any python project that is going to include a custom module written in C is going to want to use python-config to help compile and link that C code.  It's going to want to use the python-config for the version of python that the rest of the project is using (from the virtual environment).</p>
<p>I just read PEP 405 and it has a section on Include files (which are also necessary if you are building a module in C), and it admits another PEP might be needed just on the subject of Include files.  I would guess from that admission that they haven't thought much about python-config either, unfortunately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geofft">@geofft</a> on 2025-06-03 18:14</div>
            <div class="timeline-body"><p>Also worth noting that PEP 405 was finalized in 2012 and virtualenv-legacy added the script in 2015 (pypa/virtualenv@a2292600206e7307b06fde6b8f59a82ac3477910).</p>
<p>I would expect that these third-party extensions also do not work right with environments created by stdlib venv or current (non-legacy) virtualenv, right? I kind of think the right thing to do is to add python3-config to those two in addition to our venv creation code.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-03 18:30</div>
            <div class="timeline-body"><p>@geofft I think if we are going to consider changing virtual environment creation in uv we need to open an issue upstream in CPython first to understand if this is something there's general consensus on.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geofft">@geofft</a> on 2025-06-03 18:38</div>
            <div class="timeline-body"><p>Yes, that's what I meant to say, sorry - I am pretty convinced this is a bug in all three, but it seems like a good baseline for uv's behavior to match stdlib venv's behavior (including bugs) to the extent possible, and so the first starting point is to see if CPython considers it a bug in stdlib venv, too.</p>
<p>I think demonstrating that certain third-party packages build on legacy virtualenv but not stdlib venv (or non-legacy virtualenv) would be useful in filing that bug. I feel like I remember making use of python3-config in a legacy virtualenv to build something, and I'll try to remember where.</p>
<p>(Also, for what it's worth, my reading of PEP 405 is that the list of files mentioned as &quot;a typical virtual environment layout on a POSIX system&quot; is a non-normative sample, and the lack of a file there is not meant to say that it shouldn't be in a venv, and also that the sentence &quot;the internal virtual environment layout mimics the layout of the Python installation itself on each platform&quot; before it is the normative one, and argues in favor of having files like python3-config that are in the Python installation's bin directory also present in the venv bin directories.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/krupan">@krupan</a> on 2025-06-03 19:39</div>
            <div class="timeline-body"><p>Well said @geofft</p>
<p>FWIW, there are a number of people around the internet also asking why <code>pydoc</code> is not part of the virtual environment as well.  It's a weird thing that not every binary from the python installation's bin directory is added to the virtual environment's bin directory.  At least with pydoc you can do <code>python -m pydoc</code> to run the correct pydoc for the virtual environment (as awkard as that is), but you can't use the same trick for python-config</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-06-03 21:12</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/geofft">@geofft</a> I think if we are going to consider changing virtual environment creation in uv we need to open an issue upstream in CPython first to understand if this is something there's general consensus on.</p>
</blockquote>
<p>Agreed, I found some other historical discussions here https://github.com/pypa/virtualenv/issues/1808 implying the same</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../python/cpython/issues/135147.html">python/cpython#135147</a> on 2025-06-04 18:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../Tencent-Hunyuan/Hunyuan3D-2.1/issues/42.html">Tencent-Hunyuan/Hunyuan3D-2.1#42</a> on 2025-08-20 08:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:25 UTC
    </footer>
</body>
</html>
