```yaml
number: 9270
title: "[Feature request] add option to allow UV_ENV_FILE to point to non-existing file"
type: issue
state: open
author: WouterJTB
labels:
  - needs-decision
assignees: []
created_at: 2024-11-20T10:34:15Z
updated_at: 2025-06-20T16:43:43Z
url: https://github.com/astral-sh/uv/issues/9270
synced_at: 2026-01-10T01:57:21Z
```

# [Feature request] add option to allow UV_ENV_FILE to point to non-existing file

---

_Issue opened by @WouterJTB on 2024-11-20 10:34_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

# Problem

I'd like to be able to do the following:

```bash
export UV_ENV_FILE=./.env
uv run <something>
cd <new repo without .env file>
uv run <something>
```

or even better, add `export UV_ENV_FILE=./.env` to my `.bash_profile`

Currently, uv will throw an error if `UV_ENV_FILE` doesn't point to a valid file:
```
error: No environment file found at: `./.env`
```

# Proposed solution

Add a config option/env var to proceed on missing env file, e.g. proceed with `uv run` (and throw a warning instead) if `UV_WARN_ON_MISSING_ENV_FILE=1`.

Alternatively, maybe there's a solution where a missing env-file is only an error if it's passed with the `--env-file` flag, and a warning if it's set with the `UV_ENV_FILE` var.

---

_Comment by @pszpetkowski on 2024-11-20 23:40_

I've stumbled upon a similar problem. Imo it would be great to just have a flag (or even default behavior) to read `.env` in the project directory if such file exists.

---

_Label `needs-decision` added by @charliermarsh on 2024-11-22 03:15_

---

_Comment by @charliermarsh on 2024-11-22 03:15_

What's the use-case that you're trying to accomplish? You want `.env` to be read always, and ignore errors if it doesn't exist?

---

_Comment by @WouterJTB on 2024-11-22 07:12_

Essentially, yes. There's generally some env vars that I source centrally (i.e. artifactory/docker login credentials), and some that I have in a .env file in the repo (i.e. db connection strings, mlflow tracking uri etc.), I can't really store them centrally because the apps/libs generally look for specific var names to find and connect to the resources.

I'd like to be able to configure uv to use my repo scoped .env files (if found) by default, without breaking my development workflow if I switch to another repo.

---

_Comment by @pszpetkowski on 2024-11-22 12:33_

The use case I have is probably basically the same as @WouterJTB.

I have a `.zshrc` file that exports some common environment variables that are shared by all projects and then I have project repositories. The following situation occurs (obviously greatly simplified):

I maintain multiple projects with varying requirements:
- **Project A** needs an environment variable `DATABASE_URL` to connect to a local database during development.
- **Project B** does not require any environment variables.

Without additional config I have to explicitly specify an environment file for **Project A**:
```bash
uv run --env-file .env cmd
```
And the following for **Project B**:
```bash
uv run cmd
```

The above limits my ability to provide common Dockerfile for **Project A** and **Project B** and other tooling utilities. 

Fortunately, I am able to provide `UV_ENV_FILE` which I actually store defined in the `.zshrc`. And all would be fine if not for the **Project B** which doesn't need any environment variables and doesn't have the `.env` file. Obviously, that explodes and the workaround I use is to simply create empty `.env` file but that's somewhat cumbersome and adds another step after cloning the repository.

### Proposed Solution

Enhance uv to automatically detect and load a `.env` file during uv run execution if:
- The `.env` file exists in the project directory.
- No explicit `--env-file` argument is provided by the user.

Alternatively, provide a configuration option through environment variable (e.g., `UV_AUTO_USE_DOTENV`?) to enable this behavior explicitly.

---

_Comment by @fernandogrd on 2025-06-20 16:42_

I'm using this wrapper in fish for now to implement this behavior.

```fish
function _uv_auto_env --wraps uv
    if test -f .env
        set --export UV_ENV_FILE .env
    else
        set --erase UV_ENV_FILE
    end

    set cmd (status function)
    command $cmd $argv
end

functions -c _uv_auto_env uv
functions -c _uv_auto_env uvx
```

---
