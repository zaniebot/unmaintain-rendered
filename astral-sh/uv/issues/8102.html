<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Additional Type Hints like `pandas-stubs` for `uv run mypy` - astral-sh/uv #8102</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Additional Type Hints like `pandas-stubs` for `uv run mypy`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/8102">#8102</a>
        opened by <a href="https://github.com/anzhi0708">@anzhi0708</a>
        on 2024-10-10 17:24
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/anzhi0708">@anzhi0708</a> on 2024-10-10 17:24</div>
            <div class="timeline-body"><p>Let's take <code>pandas-stubs</code> as an example. If I don't install it, <code>mypy</code> will indicate that some pandas types are unrecognized.</p>
<p>However, I want to know how to add these additional type hints in a <code>uv</code> project and ensure that the tools managed by <code>uv</code> can recognize the existence of these type annotations.
When I use <code>uv add pandas-stubs</code>, it is indeed added to the dependencies of my current project, but running <code>uv run mypy</code> or <code>uvx mypy</code> seems unable to recognize it.
How should I use type checking within a <code>uv</code> environment?</p>
<pre><code class="language-console">anjiwong@AnjideMacBook-Air ~/d/addr_dup_checker_for_brox (main)&gt; uv tree
Resolved 14 packages in 18ms
addr-dup-checker v0.1.0
├── openpyxl v3.1.5
│   └── et-xmlfile v1.1.0
├── pandas v2.2.3
│   ├── numpy v2.1.2
│   ├── python-dateutil v2.9.0.post0
│   │   └── six v1.16.0
│   ├── pytz v2024.2
│   └── tzdata v2024.2
├── pandas-stubs v2.2.3.241009
│   ├── numpy v2.1.2
│   └── types-pytz v2024.2.0.20241003
├── pyfiglet v1.0.2
└── thefuzz v0.22.1
    └── rapidfuzz v3.10.0
anjiwong@AnjideMacBook-Air ~/d/addr_dup_checker_for_brox (main)&gt; uvx mypy ./main.py
src/order_parser.py:4: error: Library stubs not installed for &quot;pandas&quot;  [import-untyped]
src/order_parser.py:6: error: Library stubs not installed for &quot;pandas.core.groupby&quot;  [import-untyped]
src/duplicate_checker.py:7: error: Library stubs not installed for &quot;pandas&quot;  [import-untyped]
src/duplicate_checker.py:8: error: Cannot find implementation or library stub for module named &quot;thefuzz&quot;  [import-not-found]
main.py:7: error: Library stubs not installed for &quot;pandas&quot;  [import-untyped]
main.py:7: note: Hint: &quot;python3 -m pip install pandas-stubs&quot;
main.py:7: note: (or run &quot;mypy --install-types&quot; to install all missing stub packages)
main.py:7: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
main.py:10: error: Cannot find implementation or library stub for module named &quot;pyfiglet&quot;  [import-not-found]
main.py:214: note: By default the bodies of untyped functions are not checked, consider using --check-untyped-defs  [annotation-unchecked]
main.py:229: note: By default the bodies of untyped functions are not checked, consider using --check-untyped-defs  [annotation-unchecked]
Found 6 errors in 3 files (checked 1 source file)
anjiwong@AnjideMacBook-Air ~/d/addr_dup_checker_for_brox (main) [1]&gt;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Ravencentric">@Ravencentric</a> on 2024-10-10 21:31</div>
            <div class="timeline-body"><p>In your snippet, you're using <code>uvx mypy</code> which is an alias for <code>uv tool run</code> (which makes an isolated environment). I think what you're looking for is <code>uv run mypy ./main.py</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/anzhi0708">@anzhi0708</a> on 2024-10-11 00:38</div>
            <div class="timeline-body"><blockquote>
<p>In your snippet, you're using <code>uvx mypy</code> which is an alias for <code>uv tool run</code> (which makes an isolated environment). I think what you're looking for is <code>uv run mypy ./main.py</code>.</p>
</blockquote>
<p>I think it's still not working...</p>
<pre><code class="language-console"> src  uv tree
Resolved 17 packages in 1ms
addr-dup-checker v0.1.0
├── mypy v1.11.2
│   ├── mypy-extensions v1.0.0
│   └── typing-extensions v4.12.2
├── openpyxl v3.1.5
│   └── et-xmlfile v1.1.0
├── pandas v2.2.3
│   ├── numpy v2.1.2
│   ├── python-dateutil v2.9.0.post0
│   │   └── six v1.16.0
│   ├── pytz v2024.2
│   └── tzdata v2024.2
├── pandas-stubs v2.2.3.241009
│   ├── numpy v2.1.2
│   └── types-pytz v2024.2.0.20241003
├── pyfiglet v1.0.2
└── thefuzz v0.22.1
    └── rapidfuzz v3.10.0
 src  uv run mypy .\order_parser.py
order_parser.py:4: error: Library stubs not installed for &quot;pandas.api.typing&quot;  [import-untyped]
order_parser.py:4: note: Hint: &quot;python3 -m pip install pandas-stubs&quot;
order_parser.py:4: note: (or run &quot;mypy --install-types&quot; to install all missing stub packages)
order_parser.py:4: note: See https://mypy.readthedocs.io/en/stable/running_mypy.html#missing-imports
order_parser.py:78: error: Incompatible return value type (got &quot;DataFrameGroupBy[tuple[Any, ...]]&quot;, expected &quot;list[tuple[int, DataFrame]]&quot;)  [return-value]
Found 2 errors in 1 file (checked 1 source file)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/anzhi0708">@anzhi0708</a> on 2024-10-11 00:41</div>
            <div class="timeline-body"><blockquote>
<p>In your snippet, you're using <code>uvx mypy</code> which is an alias for <code>uv tool run</code> (which makes an isolated environment). I think what you're looking for is <code>uv run mypy ./main.py</code>.</p>
</blockquote>
<p>OK.. Problem solved by replacing import statement to</p>
<pre><code class="language-python"># from pandas.api.typing import DataFrameGroupBy
from pandas.core.groupby import DataFrameGroupBy
</code></pre>
<p>Thanks for your reply!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @anzhi0708 on 2024-10-11 00:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:00 UTC
    </footer>
</body>
</html>
