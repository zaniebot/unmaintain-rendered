```yaml
number: 3845
title: "uv self update error on Windows: The system cannot move the file to a different disk drive"
type: issue
state: closed
author: ThatOtherAndrew
labels:
  - external
assignees: []
created_at: 2024-05-26T23:59:28Z
updated_at: 2024-06-10T21:53:38Z
url: https://github.com/astral-sh/uv/issues/3845
synced_at: 2026-01-10T01:57:08Z
```

# uv self update error on Windows: The system cannot move the file to a different disk drive

---

_Issue opened by @ThatOtherAndrew on 2024-05-26 23:59_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

I am using a [Dev Drive](https://learn.microsoft.com/en-us/windows/dev-drive/) on Windows 11, mounted at `D:`. As recommended by Microsoft docs, I have mapped CARGO_HOME to this drive to improve cache speeds. This seems to cause issues with `uv self update` however, resulting in the following error:

```
uv self update
info: Checking for updates...
error: The system cannot move the file to a different disk drive. (os error 17)
[Exit code 2]
```

The issue was reproduced on `uv` version 0.2.3, one older than the current version. The issue cannot be reproduced on the latest v0.2.4 as `uv self update` exits early upon detecting being on the latest version, however I am making the assumption that the issue is still present.

---

_Label `upstream` added by @charliermarsh on 2024-05-27 00:18_

---

_Comment by @charliermarsh on 2024-05-27 00:18_

This is likely an issue in https://github.com/axodotdev/axoupdater. Do you mind filing there? Otherwise I can.

---

_Referenced in [axodotdev/axoupdater#120](../../axodotdev/axoupdater/issues/120.md) on 2024-05-27 19:34_

---

_Comment by @ThatOtherAndrew on 2024-05-27 19:35_

Forwarded, thank you for the quick response!

---

_Comment by @charliermarsh on 2024-05-27 21:36_

Thanks! We'll keep this open in the interim.

---

_Comment by @mistydemeo on 2024-05-27 22:38_

I've opened a PR on Axoupdater that should fix this (https://github.com/axodotdev/axoupdater/pull/121). Due to the US holiday, it'll most likely take us a day or two to test and cut a new release.

---

_Comment by @charliermarsh on 2024-05-27 23:13_

Thanks @mistydemeo! No rush of course. Hope you had a nice holiday weekend.

---

_Comment by @ThatOtherAndrew on 2024-06-10 21:51_

Don't mean to unnecessarily bump this issue, but just for the record, I believe the upstream issue was fixed with [axoupdater v0.6.5](https://github.com/axodotdev/axoupdater/releases/tag/v0.6.5).

---

_Comment by @charliermarsh on 2024-06-10 21:53_

Thank you yes! And we updated.

---

_Closed by @charliermarsh on 2024-06-10 21:53_

---

_Assigned to @charliermarsh by @charliermarsh on 2024-06-10 21:53_

---

_Referenced in [Breadcord/Breadcord#246](../../Breadcord/Breadcord/pulls/246.md) on 2024-06-10 22:03_

---
