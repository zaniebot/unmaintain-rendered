<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Injecting index URL via environment variable - astral-sh/uv #13206</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Injecting index URL via environment variable</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/13206">#13206</a>
        opened by <a href="https://github.com/vizeit">@vizeit</a>
        on 2025-04-29 23:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/vizeit">@vizeit</a> on 2025-04-29 23:00</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I am currently using pipenv for a project where I am injecting index url via environment variable (example below). I tried to migrate this into uv but do not see any options yet. Does uv support this set up?</p>
<p><strong>current pipfile for pipenv</strong></p>
<pre><code>[[source]]
url = &quot;https://pypi.org/simple&quot;
verify_ssl = true
name = &quot;pypi&quot;

[[source]]
url = &quot;$PRIVATEPYPIURL&quot;
verify_ssl = true
name = &quot;us-central1-pythonpkg&quot;

[packages]
&quot;keyrings.google-artifactregistry-auth&quot; = &quot;*&quot;

[dev-packages]
myprivatepackage = {version = &quot;*&quot;, index = &quot;us-central1-pythonpkg&quot;}

[requires]
python_version = &quot;3.12&quot;`
</code></pre>
<p>here, $PRIVATEPYPIURL is shell environment variable that is resolved by pipenv. Also, pipenv stores the same env variable in the pipfile.lock, not the actual URL value</p>
<p><strong>Tried with uv</strong>
I added private package from the private repo</p>
<pre><code>uv add --keyring-provider subprocess --index us-central1-pythonpkg=&quot;$PRIVATEPYPIURL&quot;  myprivatepackage
</code></pre>
<p>The pyproject.toml and uv.lock includes the full URL value</p>
<pre><code>name = &quot;packge-with-uv&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
    &quot;keyrings-google-artifactregistry-auth&gt;=1.1.2&quot;,
    &quot;myprivatepackage&gt;=9.0.0&quot;,
]

[tool.uv.sources]
myprivatepackage = { index = &quot;us-central1-pythonpkg&quot; }

[[tool.uv.index]]
name = &quot;us-central1-pythonpkg&quot;
url = &quot;https://us-central1-python.pkg.dev/my-project/myrepo/simple/&quot;
</code></pre>
<p>Is it possible for uv to keep the env variable instead of value in both toml and lock files? Are there any workarounds?
My objective is to not save actual private repository url in the toml and lock file</p>
<h3>Platform</h3>
<p>Ubuntu 24.10</p>
<h3>Version</h3>
<p>uv 0.6.17</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @vizeit on 2025-04-29 23:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-29 23:45</div>
            <div class="timeline-body"><p>Related to https://github.com/astral-sh/uv/issues/5734</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5734.html">astral-sh/uv#5734</a> on 2025-04-30 04:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-02 14:35</div>
            <div class="timeline-body"><p>No, we don't support omitting the index URL.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vizeit">@vizeit</a> on 2025-05-03 20:34</div>
            <div class="timeline-body"><p>@charliermarsh thanks for your reply. @zanieb added the reference to the other issue and I am sure you are aware of it. It would be very helpful to have this feature from security point of view</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:27 UTC
    </footer>
</body>
</html>
