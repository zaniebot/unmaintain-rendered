<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemfury private registry with UV - astral-sh/uv #15082</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Gemfury private registry with UV</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/15082">#15082</a>
        opened by <a href="https://github.com/Lyranile">@Lyranile</a>
        on 2025-08-05 13:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Lyranile">@Lyranile</a> on 2025-08-05 13:49</div>
            <div class="timeline-body"><p>Hey,</p>
<p>I'm having trouble integrating my internal package in gemfury with uv</p>
<pre><code>× No solution found when resolving dependencies:
  ╰─:arrow_forward: Because my-private-package was not found in the package registry and your project depends on my-private-package, we can conclude that your project's
      requirements are unsatisfiable.

      hint: An index URL https://pypi.fury.org/myorg could not be queried due to a lack of valid authentication credentials (401
      Unauthorized).
</code></pre>
<p>I've tried with repo.fury.org as well as pypi.fury.org, as well as with the token embedded ${TOKEN}@pypi.fury.org
Also, I've tried setting the token to the UV_INDEX_PRIVATE_REGISTRY_USERNAME and UV_INDEX_PRIVATE_REGISTRY_PASSWORD and many other configurations</p>
<p>The bottom line is that this configuration in auth.toml of poetry worked</p>
<pre><code>[http-basic.fury]
username = ${TOKEN}
</code></pre>
<p>With the URL set in the pyproject</p>
<pre><code>[[tool.poetry.source]]
name     = &quot;fury&quot;
url          = &quot;https://pypi.fury.io/myorg/&quot;
</code></pre>
<p>And I couldn't get any uv configuration to work</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-05 16:27</div>
            <div class="timeline-body"><p>Please share verbose logs (<code>-vv</code>) for the invocation with a minimal <code>pyproject.toml</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-08-05 16:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @zanieb on 2025-08-05 16:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tkfoss">@tkfoss</a> on 2025-09-05 09:45</div>
            <div class="timeline-body"><p>@zanieb getting the same thing here, and it's keeping us on poetry.</p>
<p>tried to auth with username+password, .netrc, and finally <code>uv auth login --token</code></p>
<p>pyproject</p>
<pre><code class="language-toml">[project]
name = &quot;projectname&quot;
version=&quot;0.0.0&quot;

dependencies = [
    &quot;gemrufy_hosted_pkgn==0.5.8&quot;,
]

[tool.uv.sources]
gemrufy_hosted_pkgn = { index = &quot;ACMEICN&quot; }

[[tool.uv.index]]
name = &quot;ACMEICN&quot;
url = &quot;https://pypi.fury.io/ACMEICN/&quot;
explicit = true
authenticate = &quot;always&quot;
</code></pre>
<p>logs</p>
<pre><code class="language-bash">DEBUG uv 0.8.15 (8473ecba1 2025-09-03)
DEBUG Found project root: `/Users/tom/work/projectname`
DEBUG No workspace root found, using project root
TRACE Checking lock for `/Users/tom/work/projectname` at `/var/folders/v8/z1pq38xd0zd8jq8rv8nvmmhc0000gn/T/uv-e5e73efd60249d8f.lock`
DEBUG Acquired lock for `/Users/tom/work/projectname`
DEBUG No Python version file found in workspace: /Users/tom/work/projectname
DEBUG Checking for Python environment at: `.venv`
TRACE Found cached interpreter info for Python 3.12.11, skipping query of: .venv/bin/python3
TRACE The virtual environment's Python interpreter meets the Python preference: `prefer managed`
DEBUG Released lock at `/var/folders/v8/z1pq38xd0zd8jq8rv8nvmmhc0000gn/T/uv-e5e73efd60249d8f.lock`
TRACE Checking lock for `.venv` at `.venv/.lock`
DEBUG Acquired lock for `.venv`
warning: No `requires-python` value found in the workspace. Defaulting to `&gt;=3.12`.
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: projectname @ file:///Users/tom/work/projectname
DEBUG No workspace root found, using project root
TRACE Performing lookahead for projectname @ file:///Users/tom/work/projectname
DEBUG Solving with installed Python version: 3.12.11
DEBUG Solving with target Python version: &gt;=3.12
TRACE Assigned packages: 
TRACE Chose package for decision: root. remaining choices: 
DEBUG Adding direct dependency: projectname*
TRACE Assigned packages: root==0a0.dev0
TRACE Chose package for decision: projectname. remaining choices: 
DEBUG Searching for a compatible version of projectname @ file:///Users/tom/work/projectname (*)
DEBUG Adding direct dependency: gemrufy_hosted_pkgn&gt;=0.5.8, &lt;0.5.8+
TRACE Assigned packages: root==0a0.dev0, projectname==0.0.0
TRACE Chose package for decision: gemrufy_hosted_pkgn. remaining choices: 
TRACE Fetching metadata for gemrufy_hosted_pkgn from https://pypi.fury.io/ACMEICN/gemrufy_hosted_pkgn/
TRACE No cache entry exists for /Users/tom/.cache/uv/simple-v17/index/ecacaa386cc082fe/gemrufy_hosted_pkgn.rkyv
DEBUG No cache entry for: https://pypi.fury.io/ACMEICN/gemrufy_hosted_pkgn/
TRACE Sending fresh GET request for https://pypi.fury.io/ACMEICN/gemrufy_hosted_pkgn/
TRACE Handling request for https://pypi.fury.io/ACMEICN/gemrufy_hosted_pkgn/ with authentication policy always
TRACE Request for https://pypi.fury.io/ACMEICN/gemrufy_hosted_pkgn/ is unauthenticated, checking cache
TRACE No credentials in cache for URL https://pypi.fury.io/ACMEICN/gemrufy_hosted_pkgn/
TRACE Checking for credentials for https://pypi.fury.io/ACMEICN/gemrufy_hosted_pkgn/
TRACE No credentials in cache for URL https://pypi.fury.io/ACMEICN/
TRACE No credentials in cache for realm https://pypi.fury.io
DEBUG No netrc file found
TRACE Checking lock for `credentials store` at `/Users/tom/.local/share/uv/credentials/credentials.toml.lock`
DEBUG Acquired lock for `credentials store`
DEBUG Loaded credential file /Users/tom/.local/share/uv/credentials/credentials.toml
DEBUG Released lock at `/Users/tom/.local/share/uv/credentials/credentials.toml.lock`
DEBUG Checking text store for credentials for https://pypi.fury.io/ACMEICN/gemrufy_hosted_pkgn/
DEBUG Found credentials in plaintext store for https://pypi.fury.io/ACMEICN/gemrufy_hosted_pkgn/
TRACE Retrying request for https://pypi.fury.io/ACMEICN/gemrufy_hosted_pkgn/ with Basic { username: Username(Some(&quot;__token__&quot;)), password: Some(****) }
TRACE Considering retry of response HTTP 404 Not Found for https://pypi.fury.io/ACMEICN/gemrufy_hosted_pkgn/
TRACE Cannot retry nested reqwest middleware error
TRACE Received package metadata for: gemrufy_hosted_pkgn
DEBUG Searching for a compatible version of gemrufy_hosted_pkgn (&gt;=0.5.8, &lt;0.5.8+)
TRACE Selecting candidate for gemrufy_hosted_pkgn with range &gt;=0.5.8, &lt;0.5.8+ with 0 remote versions
DEBUG No compatible version found for: gemrufy_hosted_pkgn
DEBUG Recording unit propagation conflict of gemrufy_hosted_pkgn from incompatibility of (projectname)
TRACE Assigned packages: root==0a0.dev0
TRACE Chose package for decision: projectname. remaining choices: 
DEBUG Searching for a compatible version of projectname @ file:///Users/tom/work/projectname (&lt;0.0.0 | &gt;0.0.0)
DEBUG No compatible version found for: projectname
TRACE Resolver derivation tree before reduction
term root==0a0.dev0
  root==0a0.dev0 depends on projectname*
  term projectname*
    term projectname==0.0.0
      projectname==0.0.0 depends on gemrufy_hosted_pkgn==0.5.8
      gemrufy_hosted_pkgn not found in the package registry
    no versions of projectname&lt;0.0.0 | &gt;0.0.0
TRACE Resolver derivation tree after reduction
term projectname==0.0.0
  projectname==0.0.0 depends on gemrufy_hosted_pkgn==0.5.8
  gemrufy_hosted_pkgn not found in the package registry
  × No solution found when resolving dependencies:
  ╰─▶ Because gemrufy_hosted_pkgn was not found in the package registry and your project depends on gemrufy_hosted_pkgn==0.5.8,
      we can conclude that your project's requirements are unsatisfiable.
DEBUG Released lock at `/Users/tom/work/projectname/.venv/.lock`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-09-05 09:50</div>
            <div class="timeline-body"><p>Can you share example invocations with redacted credentials for both poetry and uv? The &quot;No credentials in cache&quot; should not happen when credentials are set.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tkfoss">@tkfoss</a> on 2025-09-05 09:57</div>
            <div class="timeline-body"><p>Tried:</p>
<pre><code>uv auth login  https://pypi.fury.io/ACMEINC/
uv auth login --username $... --password $... https://pypi.fury.io/ACMEINC/
uv auth login  --token $... https://pypi.fury.io/ACMEINC/
</code></pre>
<p>with permutations of</p>
<ul>
<li>no username, password -&gt; breaks conf file and results in error</li>
<li>username, password</li>
<li>password as username, password</li>
</ul>
<p>resolved by:</p>
<pre><code class="language-bash">rm ~/.local/share/uv/credentials/credentials.toml.lock
rm ~/.local/share/uv/credentials/credentials.toml
rm -rf ~/.cache/uv
uv auth login --username $GEMFURY_TOKEN --password $GEMFURY_TOKEN https://pypi.fury.io/ACMEINC/
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-08 13:54</div>
            <div class="timeline-body"><p>You can't set both the username and password to the token.</p>
<p>It sounds like you want <code>UV_INDEX_PRIVATE_REGISTRY_USERNAME=$GEMFURY_TOKEN</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mortenboldt">@mortenboldt</a> on 2025-09-15 13:50</div>
            <div class="timeline-body"><blockquote>
<p>You can't set both the username and password to the token.</p>
<p>It sounds like you want <code>UV_INDEX_PRIVATE_REGISTRY_USERNAME=$GEMFURY_TOKEN</code>?</p>
</blockquote>
<p>Yeah, probably <code>UV_INDEX_FURY_USERNAME=$GEMFURY_TOKEN</code> and <code>UV_INDEX_FURY_PASSWORD=NOPASS</code>
Setting those 2 env vars should authenticate you to a Gemfury repo, that you have named &quot;fury&quot; in your <code>pyproject.toml</code> file. That of course also requires you to have a <code>GEMFURY_TOKEN</code> env var set with the access token.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Houet">@Houet</a> on 2026-01-08 09:27</div>
            <div class="timeline-body"><p>If still relevant, I faced the same issue and @mortenboldt solution worked for me :</p>
<pre><code class="language-pyproject.toml"># pyproject.toml
[tool.uv.sources]
yourprivatelib = { index = &quot;gemfury&quot; }

[[tool.uv.index]]
name = &quot;gemfury&quot;   # -&gt; index_name (you can put whatever name u want)
url = &quot;https://pypi.fury.io/yourprivatelib/&quot;
explicit = true
</code></pre>
<pre><code class="language-bash"># env var
export UV_INDEX_{index_name}_USERNAME=$FURY_AUTH
export UV_INDEX_{index_name}_PASSWORD=NOPASS
</code></pre>
<p>considering $FURY_AUTH is your fury token</p>
<p>You can see something similar in the doc : https://docs.astral.sh/uv/concepts/indexes/#providing-credentials-directly</p>
<p>Hope this help !</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:17:40 UTC
    </footer>
</body>
</html>
