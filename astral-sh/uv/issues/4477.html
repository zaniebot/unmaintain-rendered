<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Feature Request] pyproject.toml validation? - astral-sh/uv #4477</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Feature Request] pyproject.toml validation?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/4477">#4477</a>
        opened by <a href="https://github.com/charlesnicholson">@charlesnicholson</a>
        on 2024-06-24 16:31
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charlesnicholson">@charlesnicholson</a></div>
            <div class="timeline-body"><p>I don&#x27;t know if this is a FR for uv or ruff or neither- Our python tools are under CI for unit tests and ruff linting, but because they do complex work with IoT devices, don&#x27;t get as much functional testing love as they deserve (it&#x27;s very complicated to orchestrate).</p>
<p>Because of this, it&#x27;s often the case that we forget to update our package dependencies in our per-project pyproject.toml files. We don&#x27;t notice this locally because all of our packages are editably-installed into our venv, so all of our imports always work.</p>
<p>I broke our users (internal-only, mercifully) <em>again</em> today because I forgot to update a pyproject.toml file when moving some code between packages. I stumbled across https://github.com/fpgmaas/deptry which validates pyproject.toml files, which includes a source code parser that reconciles import statements against the dependencies listed in pyproject.toml. If your Python code imports and uses a package that isn&#x27;t listed in your pyproject.toml, it raises an error.</p>
<p>Tooling like this feels like a huge win for the Python ecosystem; is this a feature that Astral folks have any appetite for building out in uv / ruff?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2024-06-24 21:14</div>
            <div class="timeline-body"><p>FYI, <a href="https://github.com/abravalheri/validate-pyproject/">validate-pyproject</a> is another solution that has <code>pre-commit</code> support</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-06-25 09:19</div>
            <div class="timeline-body"><p>Is <a href="https://github.com/astral-sh/ruff/issues/4100">astral-sh/ruff#4100</a> the same feature as you&#x27;re describing?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charlesnicholson">@charlesnicholson</a> on 2024-06-25 13:45</div>
            <div class="timeline-body"><p>It appears to be, yes!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by <a href="https://github.com/konstin">@konstin</a> on 2024-06-25 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-06-25 13:47</div>
            <div class="timeline-body"><p>I&#x27;m closing this in favor of the ruff issue: This requires parsing python files, so it&#x27;s in the realm of ruff features more than uv features.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/konstin">@konstin</a> on 2024-06-25 13:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:31:42 UTC
    </footer>
</body>
</html>
