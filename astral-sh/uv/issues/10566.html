<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv sync is not removing former seed packages - astral-sh/uv #10566</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv sync is not removing former seed packages</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/10566">#10566</a>
        opened by <a href="https://github.com/adriengardou">@adriengardou</a>
        on 2025-01-13 14:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/adriengardou">@adriengardou</a></div>
            <div class="timeline-body"><p>It is stated in venv creation (https://docs.astral.sh/uv/reference/cli/#uv-venv) with <code>--seed</code> option that :</p>
<blockquote>
<pre><code>Install seed packages (one or more of: pip, setuptools, and wheel) into the virtual environment.
Note setuptools and wheel are not included in Python 3.12+ environments.</code></pre>
</blockquote>
<p>However,  <code>setuptools</code> and <code>wheel</code> are stated as seed packages in a python 3.12+ venv and re not remove when performing a <code>uv sync</code>.</p>
<p>On MacOS 15.2 with uv 0.5.18 (27d1bad55 2025-01-11)
venv creation :</p>
<pre><code>uv venv --python 3.12 --seed .venv312
Using CPython 3.12.7
Creating virtual environment with seed packages at: .venv312
 + pip==24.3.1
Activate with: source .venv312/bin/activate
</code></pre>
<p>Troublesome sync :</p>
<pre><code>source .venv312/bin/activate
uv pip install looseversion wheel setuptools
Using Python 3.12.7 environment at: .venv312
Resolved 3 packages in 1.25s
Installed 3 packages in 15ms
 + looseversion==1.3.0
 + setuptools==75.8.0
 + wheel==0.45.1


uv --verbose pip sync test-sync.txt   
DEBUG uv 0.5.18 (27d1bad55 2025-01-11)
DEBUG Searching for default Python interpreter in virtual environments
DEBUG Found `cpython-3.12.7-macos-x86_64-none` at `/Users/***/workspace/.venv312/bin/python3` (active virtual environment)
Using Python 3.12.7 environment at: .venv312
DEBUG Acquired lock for `.venv312`
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.12.7
DEBUG Solving with target Python version: &gt;=3.12.7
DEBUG Adding direct dependency: docopt-ng*
DEBUG Adding direct dependency: macholib*
DEBUG Found stale response for: https://***/docopt-ng/
DEBUG Sending revalidation request for: https://***/docopt-ng/
DEBUG Found stale response for: https://***/macholib/
DEBUG Sending revalidation request for: https://***/macholib/
DEBUG Found modified response for: https://***/docopt-ng/
WARN Skipping file for docopt-ng: docopt_ng-0.6.3-py3.6.egg
DEBUG Searching for a compatible version of docopt-ng (*)
DEBUG Selecting: docopt-ng==0.9.0 [compatible] (docopt_ng-0.9.0-py3-none-any.whl)
DEBUG Found modified response for: https://***/macholib/
WARN Skipping file for macholib: macholib-1.0-py2.3.egg
WARN Skipping file for macholib: macholib-1.0-py2.4.egg
WARN Skipping file for macholib: macholib-1.1-py2.4.egg
WARN Skipping file for macholib: macholib-1.2.dev-r25.tar.gz
WARN Skipping file for macholib: macholib-1.3-py2.5.egg
WARN Skipping file for macholib: macholib-1.3-py2.6.egg
WARN Skipping file for macholib: macholib-1.3-py2.7.egg
WARN Skipping file for macholib: macholib-1.3-py3.1.egg
WARN Skipping file for macholib: macholib-1.3-py3.2.egg
DEBUG Searching for a compatible version of macholib (*)
DEBUG Selecting: macholib==1.16.3 [compatible] (macholib-1.16.3-py2.py3-none-any.whl)
DEBUG Tried 2 versions: docopt-ng 1, macholib 1
DEBUG marker environment resolution took 0.860s
Resolved 2 packages in 861ms
DEBUG Requirement already cached: macholib==1.16.3
DEBUG Requirement already cached: docopt-ng==0.9.0
DEBUG Unnecessary package: looseversion==1.3.0
DEBUG Preserving seed package: pip==24.3.1
DEBUG Preserving seed package: setuptools==75.8.0
DEBUG Preserving seed package: wheel==0.45.1
DEBUG Uninstalled looseversion (9 files, 3 directories)
Uninstalled 1 package in 3ms
Installed 2 packages in 7ms
 + docopt-ng==0.9.0
 - looseversion==1.3.0
 + macholib==1.16.3
DEBUG Released lock at `/Users/***/workspace/.venv312/.lock`
</code></pre>
<p>Content of <code>test-sync.txt</code></p>
<pre><code>docopt-ng
macholib
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2025-01-13 15:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-13 15:24</div>
            <div class="timeline-body"><p>Thanks, that's a bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-01-13 17:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-01-13 17:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-01-13 17:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:29:17 UTC
    </footer>
</body>
</html>
