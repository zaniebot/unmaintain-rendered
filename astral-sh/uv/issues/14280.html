<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Does `uv` respect github extras in setup.py? - astral-sh/uv #14280</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Does `uv` respect github extras in setup.py?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/14280">#14280</a>
        opened by <a href="https://github.com/lucharo">@lucharo</a>
        on 2025-06-26 16:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/lucharo">@lucharo</a> on 2025-06-26 16:07</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I am working with a python project that has a <code>setup.py</code> rather than a <code>pyproject.toml</code>.</p>
<p>In it I have declares some optional dependency groups (<code>extra-requires</code>) to a github installed package, i.e.:</p>
<pre><code class="language-py">setup(
    ...,
    extras_require = {
        &quot;optional&quot; : [
             &quot;pkg_from_gh @ git+https://github.com/some/package.git&quot; 
         ]
    }
</code></pre>
<hr />
<p>then, I am installing this library in the shebang of a local CLI I use, like:</p>
<pre><code class="language-sh">#!/usr/bin/env -S uv run --script --index-strategy unsafe-best-match
# /// script
# dependencies = [
#   &quot;typer&quot;,
#   &quot;rich&quot;,
#   &quot;mypkg[optional]&quot;,
# ] 
</code></pre>
<p>and I am getting:</p>
<pre><code class="language-txt">error: Package pkg_from_gh attempted to resolve via URL: git+https://github.com/some/package.git. URL dependencies must be expressed as direct requirements or constraints. Consider adding pkg_from_gh @ git+https://github.com/some/package.git to your dependencies or constraints file.
</code></pre>
<p>which again they are specified as such in my <code>setup.py</code></p>
<p>Questions:</p>
<ul>
<li>is this intended behaviour?</li>
<li>is <code>uv</code> not able to read the <code>extra_requires</code> field in <code>setup.py</code>? do you not respect and only respect <code>pyproject.toml</code>?</li>
</ul>
<h3>Platform</h3>
<p>Darwin 24.5.0 arm64</p>
<h3>Version</h3>
<p>uv 0.7.6 (7f3e94a09 2025-05-19)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @lucharo on 2025-06-26 16:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-06-26 20:53</div>
            <div class="timeline-body"><p>The problem here isn't the optional requirement, but that uv doesn't allow registry dependencies to point to URL dependencies. Only URL dependencies are allow to point to other URLs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-07-11 01:55</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:08 UTC
    </footer>
</body>
</html>
