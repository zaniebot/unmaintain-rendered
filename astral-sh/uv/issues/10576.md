```yaml
number: 10576
title: "`uv run --with` not using pre-built wheels"
type: issue
state: closed
author: VaasuDevanS
labels:
  - question
assignees: []
created_at: 2025-01-13T21:00:49Z
updated_at: 2025-01-14T16:33:04Z
url: https://github.com/astral-sh/uv/issues/10576
synced_at: 2026-01-10T01:57:24Z
```

# `uv run --with` not using pre-built wheels

---

_Issue opened by @VaasuDevanS on 2025-01-13 21:00_

First and foremost, I'd really like to appreciate `Astral ⚡` for this amazing project.

## Description

I stumbled upon an issue today when I was trying to build a package locally and pass it to `uv run` command. 

### Steps to reproduce

I used the following commands to build `my-package`

```
uv init my-package --package --python 3.11
cd my-package
uv add numpy==1.26.4
uv build
```

To test the generated .whl file, I created virtual environment in another folder using `uv venv --python 3.11` and installed the built .whl using `uv pip install my_package-0.1.0-py3-none-any.whl`. I was able to successfully import numpy, my_package and calling `my_package.main()` printed out `Hello from my-package!`

However, when I tried this command `uv run --with "my_package-0.1.0-py3-none-any.whl" my-package`, I experience the following error.

```
× Failed to build `numpy==1.26.4`
  ├─ The build backend returned an error
  ╰─ Call to `mesonpy.build_wheel` failed (exit code: 1)

      [stdout]
      + C:\Users\Vaasu\AppData\Local\uv\cache\builds-v0\.tmp67wRXn\Scripts\python.exe
      C:\Users\Vaasu\AppData\Local\uv\cache\sdists-v6\pypi\numpy\1.26.4\Sq-StyJ3pScoVbBLTQlzw\src\vendored-meson\meson\meson.py
      setup C:\Users\Vaasu\AppData\Local\uv\cache\sdists-v6\pypi\numpy\1.26.4\Sq-StyJ3pScoVbBLTQlzw\src
      C:\Users\Vaasu\AppData\Local\uv\cache\sdists-v6\pypi\numpy\1.26.4\Sq-StyJ3pScoVbBLTQlzw\src\.mesonpy-de6d_b46
      -Dbuildtype=release -Db_ndebug=if-release -Db_vscrt=md
      --native-file=C:\Users\Vaasu\AppData\Local\uv\cache\sdists-v6\pypi\numpy\1.26.4\Sq-StyJ3pScoVbBLTQlzw\src\.mesonpy-de6d_b46\meson-python-native-file.ini
      The Meson build system
      Version: 1.2.99
      Source dir: C:\Users\Vaasu\AppData\Local\uv\cache\sdists-v6\pypi\numpy\1.26.4\Sq-StyJ3pScoVbBLTQlzw\src
      Build dir:
      C:\Users\Vaasu\AppData\Local\uv\cache\sdists-v6\pypi\numpy\1.26.4\Sq-StyJ3pScoVbBLTQlzw\src\.mesonpy-de6d_b46
      Build type: native build
      Project name: NumPy
      Project version: 1.26.4
      WARNING: Failed to activate VS environment: Could not find C:\Program Files (x86)\Microsoft Visual
      Studio\Installer\vswhere.exe

      ..\meson.build:1:0: ERROR: Unknown compiler(s): [['icl'], ['cl'], ['cc'], ['gcc'], ['clang'], ['clang-cl'],
      ['pgcc']]
      The following exception(s) were encountered:
      Running `icl ""` gave "[WinError 2] The system cannot find the file specified"
      Running `cl /?` gave "[WinError 2] The system cannot find the file specified"
      Running `cc --version` gave "[WinError 2] The system cannot find the file specified"
      Running `gcc --version` gave "[WinError 2] The system cannot find the file specified"
      Running `clang --version` gave "[WinError 2] The system cannot find the file specified"
      Running `clang-cl /?` gave "[WinError 2] The system cannot find the file specified"
      Running `pgcc --version` gave "[WinError 2] The system cannot find the file specified"

      A full log can be found at
      C:\Users\Vaasu\AppData\Local\uv\cache\sdists-v6\pypi\numpy\1.26.4\Sq-StyJ3pScoVbBLTQlzw\src\.mesonpy-de6d_b46\meson-logs\meson-log.txt

      hint: This usually indicates a problem with the package or the build environment.
  help: `numpy` (v1.26.4) was included because `my-package` (v0.1.0) depends on `numpy`
```

```
> uv --version
uv 0.5.18 (27d1bad55 2025-01-11)
```



---

_Comment by @charliermarsh on 2025-01-13 21:02_

My _guess_ is that `uv run` is using Python 3.13, which doesn't have built wheels for that NumPy version. Can you include the `--verbose` logs, and/or try running with `--python 3.12` or similar?

---

_Label `question` added by @charliermarsh on 2025-01-13 21:02_

---

_Comment by @dsantiago on 2025-01-14 02:59_

I tried the OP instructions and it workd...

```bash
uv init my-package --package --python 3.11
cd my-package
uv add numpy==1.26.4
uv build
```

Just ot note, I'm on MacOs (M1 pro).



---

_Comment by @VaasuDevanS on 2025-01-14 15:54_

Thanks @charliermarsh. You are right about the python version. After passing `--python 3.11` in the `uv run` command, it's working as expected. I thought uv run would infer the python version constraints from the wheel file.

---

_Closed by @charliermarsh on 2025-01-14 16:33_

---

_Referenced in [mesonbuild/meson-python#805](../../mesonbuild/meson-python/issues/805.md) on 2025-10-28 20:09_

---
