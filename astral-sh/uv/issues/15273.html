<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv fails to install packages on non-Windows when win32-specific dependencies are missing from private index - astral-sh/uv #15273</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv fails to install packages on non-Windows when win32-specific dependencies are missing from private index</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/15273">#15273</a>
        opened by <a href="https://github.com/bombedhair">@bombedhair</a>
        on 2025-08-14 10:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bombedhair">@bombedhair</a></div>
            <div class="timeline-body">Summary
<p>I have set up a private index with Nexus Repository and published only the packages and their dependencies necessary for my project development in an Ubuntu environment.
However, I am encountering an error during the package installation process, as it cannot find a dependency marked as <code>sys_platform == win32</code>. For example, when I try <code>uv add uvicorn[standard]</code>, the following error occurs for colorama, which is listed as <code>Requires-Dist: colorama&gt;=0.4; (sys_platform == &#x27;win32&#x27;) and extra == &#x27;standard&#x27;</code> in metadata.</p>
<pre><code>Creating virtual environment at: .venv
  × No solution found when resolving dependencies:
  ╰─▶ Because only colorama{sys_platform == &#x27;win32&#x27;}&lt;0.4 is available and uvicorn[standard]==0.35.0 depends on
      colorama{sys_platform == &#x27;win32&#x27;}&gt;=0.4, we can conclude that uvicorn[standard]==0.35.0 cannot be used.
      And because only uvicorn[standard]==0.35.0 is available and your project depends on
      uvicorn[standard]==0.35.0, we can conclude that your project&#x27;s requirements are unsatisfiable.
  help: If you want to add the package regardless of the failed resolution, provide the `—frozen` flag to skip
        locking and syncing
</code></pre>
<p>I would like to know if there is a proper solution other than publishing the unused dependency to the private index or using the <code>--frozen</code> flag</p>
Platform
<p>Ubuntu 24.04</p>
Version
<p>0.8.10</p>
Python version
<p>Python 3.11.13</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/bombedhair">@bombedhair</a> on 2025-08-14 10:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-08-14 10:38</div>
            <div class="timeline-body"><p>I would suggest: https://docs.astral.sh/uv/concepts/resolution/#limited-resolution-environments</p>
<p>In short, you could mark Windows as unsupported:</p>
<pre><code>[tool.uv]
environments = [
    &quot;sys_platform != &#x27;win32&#x27;&quot;,
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bombedhair">@bombedhair</a> on 2025-08-14 10:44</div>
            <div class="timeline-body"><p>Ah! Thank you for providing a clear solution.
Questions label would have been a better fit for this issue. My apologies for making inconveniences; I was in bit hurry</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/bombedhair">@bombedhair</a> on 2025-08-14 10:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-08-14 10:47</div>
            <div class="timeline-body"><p>All good, don&#x27;t worry about it :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-08-14 10:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-08-14 10:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:39:59 UTC
    </footer>
</body>
</html>
