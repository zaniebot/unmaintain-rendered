<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is writable FS required for `uv run`? - astral-sh/uv #17521</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is writable FS required for <code>uv run</code>?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/17521">#17521</a>
        opened by <a href="https://github.com/Dandi91">@Dandi91</a>
        on 2026-01-16 14:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Dandi91">@Dandi91</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>Due to security recommendations, we want to switch our docker containers to use fully readonly filesystem. Unfortunately, it doesn't seem to work with uv. The (somewhat) minimal reproducer is the following:</p>
<p>Dockerfile:</p>
<pre><code class="language-dockerfile">FROM python:3.13
COPY --from=ghcr.io/astral-sh/uv:0.9.26 /uv /uvx /bin/
ENTRYPOINT [&quot;uv&quot;, &quot;run&quot;, &quot;--no-cache&quot;, &quot;--verbose&quot;, &quot;true&quot;]
</code></pre>
<p>docker-compose.yml:</p>
<pre><code class="language-yaml">services:
  repro:
    build:
      context: .
      dockerfile: ./Dockerfile
    read_only: true
</code></pre>
<p>This gives the following output:</p>
<pre><code>DEBUG uv 0.9.26
DEBUG Disabling the uv cache due to `--no-cache`
error: Read-only file system (os error 30) at path &quot;/tmp/.tmpCoFQH9&quot;
</code></pre>
<p>After commenting out <code>readonly: true</code>, the command succeeds:</p>
<pre><code>DEBUG uv 0.9.26
DEBUG Disabling the uv cache due to `--no-cache`
DEBUG Acquired shared lock for `/tmp/.tmpDZ3DO5`
DEBUG No project found; searching for Python interpreter
DEBUG No Python version file found in ancestors of working directory: /
DEBUG Using request timeout of 30s
DEBUG Searching for default Python interpreter in virtual environments, managed installations, or search path
DEBUG Searching for managed installations at `/root/.local/share/uv/python`
DEBUG Found `cpython-3.13.11-linux-x86_64-gnu` at `/usr/local/bin/python` (first executable in the search path)
DEBUG Using Python 3.13.11 interpreter at: /usr/local/bin/python
DEBUG Running `true`
DEBUG Spawned child 12 in process group 1
DEBUG Command exited with code: 0
DEBUG Released lock at `/tmp/.tmpDZ3DO5/.lock`
</code></pre>
<p>I tried searching for relevant settings that would skip the locking, but couldn't find any. As a workaround, we can activate local venv and run our app directly. While it works, it feels a bit dirty.</p>
<p>Is there a way to make <code>uv run</code> work on readonly FS?</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p>0.9.26</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @Dandi91 on 2026-01-16 14:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2026-01-16 19:51</div>
            <div class="timeline-body"><p>Have you tried <code>--no-sync</code> / <code>UV_NO_SYNC</code>?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-16 20:07:41 UTC
    </footer>
</body>
</html>
