<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv` should remember if user previously ran `uv venv project-name` - astral-sh/uv #13594</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv` should remember if user previously ran `uv venv project-name`</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13594">#13594</a>
        opened by <a href="https://github.com/kdheepak">@kdheepak</a>
        on 2025-05-22 13:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kdheepak">@kdheepak</a> on 2025-05-22 13:53</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hi all,</p>
<p><code>uv</code> has been great and I've been incorporating it into more of my workflows.</p>
<p>There have been a couple of instances where the default is a little confusing for me, and it comes down to creating custom environments.</p>
<p>As an example, there are instances when I don't want to create a <code>.venv</code> in the current folder (the current folder is being synced and backed up for example, OR it is a read only folder location, OR I have limited disk space where the folder is located). In these cases, I've been able to run <code>uv venv ~/.virtualenvs/project-name</code> and that works great.</p>
<p>However after running <code>uv venv ~/.virtualenvs/project-name</code>, if a user ever happens to run <code>uv sync</code> or <code>uv run main.py</code> it recreates the <code>.venv</code> folder in the current location.</p>
<p>I've accidentally done this enough times that I think there's probably a better way to deal with this.</p>
<ol>
<li><code>uv venv project-name</code> should prompt to update <code>.env</code> so that dotenv handles it going forward by setting <code>VIRTUAL_ENV</code>. This would work great for developers who have a dotenv / direnv setup, however I think it is not the case for the average user</li>
<li><code>uv venv project-name</code> should update a global <code>~/config/uv/sync</code> file with the name of the project and the location of the virtual environment. And then going forward, <code>uv sync</code> or <code>uv run</code> should use that information. This would be ideal because then tooling that builds on top of <code>uv</code> (e.g. marimo notebooks) will &quot;do the right thing&quot; automatically for every user using `uv.</li>
</ol>
<p>There may be other ways to deal with this and I wanted to open a feature request to discuss. Feel free to close this issue if this is not in scope for this project.</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @kdheepak on 2025-05-22 13:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-22 17:11</div>
            <div class="timeline-body"><p>The uv project mode (the non-<code>uv pip</code> commands like <code>uv sync</code>) is built around uv managing the venv for the user, ideally the user shouldn't have to be concerned with <code>.venv</code> at all. For manually managing dependencies, there's <code>uv pip</code>, and for having dependencies without changing the project dependencies, there's <code>--with</code> and inline script metadata, both of which are isolated. With uv's venv creation, package remove and install performance, <code>uv run</code> can change the venv before running code without creating much overhead.</p>
<p>Managing multiple or switching between venvs on behalf of the user is currently out of scope for uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-22 18:33</div>
            <div class="timeline-body"><p>We've tried to avoid making uv operations &quot;stateful&quot; in this way as it adds a lot of complexity to the user experience.</p>
<p>I think you want #1495</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kdheepak on 2025-05-23 06:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:06 UTC
    </footer>
</body>
</html>
