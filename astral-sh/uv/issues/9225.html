<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv export` order of hashes - astral-sh/uv #9225</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv export</code> order of hashes</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9225">#9225</a>
        opened by <a href="https://github.com/czechnology">@czechnology</a>
        on 2024-11-19 13:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/czechnology">@czechnology</a></div>
            <div class="timeline-body"><p>Suppose you have some dependencies in <code>pyproject.toml</code>, e.g.</p>
<pre><code>dependencies = [
  &quot;pyyaml==6.0.2&quot;,
]
</code></pre>
<p>When I run <code>uv pip compile</code>, I get nicely sorted list of hashes:</p>
<pre><code>‚ùØ uv pip compile --generate-hashes pyproject.toml
Resolved 1 package in 292ms
# This file was autogenerated by uv via the following command:
#    uv pip compile --generate-hashes pyproject.toml
pyyaml==6.0.2 \
    --hash=sha256:01179a4a8559ab5de078078f37e5c1a30d76bb88519906844fd7bdea1b7729ff \
    --hash=sha256:0833f8694549e586547b576dcfaba4a6b55b9e96098b36cdc7ebefe667dfed48 \
...
    --hash=sha256:f753120cb8181e736c57ef7636e83f31b9c0d1722c516f7e86cf15b7aa57ff12 \
    --hash=sha256:ff3824dc5261f50c9b0dfb3be22b4567a6f938ccce4587b38952d85fd9e9afe4
    # via uv-export-order (pyproject.toml)
</code></pre>
<p>However, when I run <code>uv export</code>, the order of the hashes is &quot;random&quot;.</p>
<pre><code>‚ùØ uv export
Using CPython 3.13.0
Resolved 2 packages in 1ms
# This file was autogenerated by uv via the following command:
#    uv export
pyyaml==6.0.2 \
    --hash=sha256:d584d9ec91ad65861cc08d42e834324ef890a082e591037abe114850ff7bbc3e \
    --hash=sha256:efdca5630322a10774e8e98e1af481aad470dd62c3170801852d752aa7a783ba \
...
    --hash=sha256:bc2fa7c6b47d6bc618dd7fb02ef6fdedb1090ec036abab80d4681424b84c1183 \
    --hash=sha256:8388ee1976c416731879ac16da0aff3f63b286ffdd57cdeb95f3f2e085687563
</code></pre>
<p>Of course, the ordering becomes clear when looking at the <code>uv.lock</code> file</p>
<pre><code>[[package]]
name = &quot;pyyaml&quot;
version = &quot;6.0.2&quot;
source = { registry = &quot;https://pypi.org/simple&quot; }
sdist = { url = &quot;https://files.pythonhosted.org/packages/54/ed/79a089b6be93607fa5cdaedf301d7dfb23af5f25c398d5ead2525b063e17/pyyaml-6.0.2.tar.gz&quot;, hash = &quot;sha256:d584d9ec91ad65861cc08d42e834324ef890a082e591037abe114850ff7bbc3e&quot;, size = 130631 }
wheels = [
    { url = &quot;https://files.pythonhosted.org/packages/ef/e3/3af305b830494fa85d95f6d95ef7fa73f2ee1cc8ef5b495c7c3269fb835f/PyYAML-6.0.2-cp313-cp313-macosx_10_13_x86_64.whl&quot;, hash = &quot;sha256:efdca5630322a10774e8e98e1af481aad470dd62c3170801852d752aa7a783ba&quot;, size = 181309 },
# ...
    { url = &quot;https://files.pythonhosted.org/packages/14/0d/e2c3b43bbce3cf6bd97c840b46088a3031085179e596d4929729d8d68270/PyYAML-6.0.2-cp313-cp313-win32.whl&quot;, hash = &quot;sha256:bc2fa7c6b47d6bc618dd7fb02ef6fdedb1090ec036abab80d4681424b84c1183&quot;, size = 140527 },
    { url = &quot;https://files.pythonhosted.org/packages/fa/de/02b54f42487e3d3c6efb3f89428677074ca7bf43aae402517bc7cca949f3/PyYAML-6.0.2-cp313-cp313-win_amd64.whl&quot;, hash = &quot;sha256:8388ee1976c416731879ac16da0aff3f63b286ffdd57cdeb95f3f2e085687563&quot;, size = 156446 },
]
</code></pre>
<p>However, for comparability, it would be good to sort the hashes also when exporting. Maybe optionally using an option like <code>--sort-hashes</code>?</p>
<p>(Running uv 0.5.2 on WSL2 Ubuntu noble.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-19 18:40</div>
            <div class="timeline-body"><p>We should probably just sort these, yeah.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @charliermarsh on 2024-11-19 18:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-11-19 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-19 18:42</div>
            <div class="timeline-body"><p>(Gonna mark it as a bug.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-19 19:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/czechnology">@czechnology</a> on 2024-11-19 20:14</div>
            <div class="timeline-body"><p>Thanks, blazing fast reaction as always! üöÄ</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:28:24 UTC
    </footer>
</body>
</html>
