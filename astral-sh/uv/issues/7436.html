<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv sync: show long path errors on Windows - astral-sh/uv #7436</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv sync: show long path errors on Windows</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/7436">#7436</a>
        opened by <a href="https://github.com/bes-alielzein">@bes-alielzein</a>
        on 2024-09-16 18:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bes-alielzein">@bes-alielzein</a> on 2024-09-16 18:26</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>When long paths are not enabled on Windows, <code>uv sync</code> fails with an unclear error. However, when using pip, the error message is revealing the actual issue (path is too long).</p>
<p>Reference to the config: https://github.com/BesLogic/releaf-canopeum/blob/bcb64747ba6a28f5c5c3c6072ee2bd7ce1445ca9/canopeum_backend/pyproject.toml</p>
<p>UV version: 0.4.10</p>
<p><code>uv sync --locked --extra dev</code></p>
<pre><code>Using Python 3.12.3 interpreter at: C:\Users\AliElzein\.pyenv\pyenv-win\versions\3.12.3\python3.12.exe
Creating virtualenv at: .venv
Resolved 56 packages in 1ms
error: Failed to prepare distributions
  Caused by: Failed to fetch wheel: djangorestframework-camel-case==1.4.2
  Caused by: Build backend failed to build wheel through `build_wheel()` with exit code: 1
--- stdout:
running bdist_wheel
running build
running build_py
copying djangorestframework_camel_case\middleware.py -&gt; build\lib\djangorestframework_camel_case
copying djangorestframework_camel_case\parser.py -&gt; build\lib\djangorestframework_camel_case
copying djangorestframework_camel_case\render.py -&gt; build\lib\djangorestframework_camel_case
copying djangorestframework_camel_case\settings.py -&gt; build\lib\djangorestframework_camel_case
copying djangorestframework_camel_case\util.py -&gt; build\lib\djangorestframework_camel_case
copying djangorestframework_camel_case\__init__.py -&gt; build\lib\djangorestframework_camel_case
running egg_info
writing djangorestframework_camel_case.egg-info\PKG-INFO
writing dependency_links to djangorestframework_camel_case.egg-info\dependency_links.txt
writing top-level names to djangorestframework_camel_case.egg-info\top_level.txt
reading manifest file 'djangorestframework_camel_case.egg-info\SOURCES.txt'
reading manifest template 'MANIFEST.in'
adding license file 'LICENSE'
adding license file 'AUTHORS.rst'
writing manifest file 'djangorestframework_camel_case.egg-info\SOURCES.txt'
installing to build\bdist.win-amd64\wheel
running install
running install_lib
running install_egg_info
Copying djangorestframework_camel_case.egg-info to build\bdist.win-amd64\wheel\.\djangorestframework_camel_case-1.4.2-py3.12.egg-info
--- stderr:
C:\Users\AliElzein\AppData\Local\uv\cache\builds-v0\.tmpu9Mmm2\Lib\site-packages\setuptools\_distutils\dist.py:261: UserWarning: Unknown distribution option: 'test_suite'
  warnings.warn(msg)
error: [WinError 3] Le chemin d’accès spécifié est introuvable: 'build\\bdist.win-amd64\\wheel\\.\\djangorestframework_camel_case-1.4.2-py3.12.egg-info'
---
</code></pre>
<p>The error is in french and translates to: &quot;The system cannot find the path specified&quot;.</p>
<p>However, when running the following command:</p>
<p><code>uv pip install -e .[dev]</code></p>
<pre><code>Resolved 56 packages in 1.60s
error: Failed to prepare distributions
  Caused by: Failed to fetch wheel: djangorestframework-camel-case==1.4.2
  Caused by: Build backend failed to build wheel through `build_wheel()` with exit code: 1
--- stdout:
running bdist_wheel
running build
running build_py
creating build\lib\djangorestframework_camel_case
copying djangorestframework_camel_case\middleware.py -&gt; build\lib\djangorestframework_camel_case
copying djangorestframework_camel_case\parser.py -&gt; build\lib\djangorestframework_camel_case
copying djangorestframework_camel_case\render.py -&gt; build\lib\djangorestframework_camel_case
copying djangorestframework_camel_case\settings.py -&gt; build\lib\djangorestframework_camel_case
copying djangorestframework_camel_case\util.py -&gt; build\lib\djangorestframework_camel_case
copying djangorestframework_camel_case\__init__.py -&gt; build\lib\djangorestframework_camel_case
running egg_info
writing djangorestframework_camel_case.egg-info\PKG-INFO
writing dependency_links to djangorestframework_camel_case.egg-info\dependency_links.txt
writing top-level names to djangorestframework_camel_case.egg-info\top_level.txt
reading manifest file 'djangorestframework_camel_case.egg-info\SOURCES.txt'
reading manifest template 'MANIFEST.in'
adding license file 'LICENSE'
adding license file 'AUTHORS.rst'
writing manifest file 'djangorestframework_camel_case.egg-info\SOURCES.txt'
installing to build\bdist.win-amd64\wheel
running install
running install_lib
creating build\bdist.win-amd64\wheel
creating build\bdist.win-amd64\wheel\djangorestframework_camel_case
copying build\lib\djangorestframework_camel_case\middleware.py -&gt; build\bdist.win-amd64\wheel\.\djangorestframework_camel_case
copying build\lib\djangorestframework_camel_case\parser.py -&gt; build\bdist.win-amd64\wheel\.\djangorestframework_camel_case
copying build\lib\djangorestframework_camel_case\render.py -&gt; build\bdist.win-amd64\wheel\.\djangorestframework_camel_case
copying build\lib\djangorestframework_camel_case\settings.py -&gt; build\bdist.win-amd64\wheel\.\djangorestframework_camel_case
copying build\lib\djangorestframework_camel_case\util.py -&gt; build\bdist.win-amd64\wheel\.\djangorestframework_camel_case
copying build\lib\djangorestframework_camel_case\__init__.py -&gt; build\bdist.win-amd64\wheel\.\djangorestframework_camel_case
running install_egg_info
Copying djangorestframework_camel_case.egg-info to build\bdist.win-amd64\wheel\.\djangorestframework_camel_case-1.4.2-py3.12.egg-info
--- stderr:
C:\Users\AliElzein\AppData\Local\uv\cache\builds-v0\.tmp8tpGbo\Lib\site-packages\setuptools\_distutils\dist.py:261: UserWarning: Unknown distribution option: 'test_suite'
  warnings.warn(msg)
error: [WinError 206] Nom de fichier ou extension trop long: 'build\\bdist.win-amd64\\wheel\\.\\djangorestframework_camel_case-1.4.2-py3.12.egg-info'
---
</code></pre>
<p>The error message is different. The error message translates to: &quot;The filename or extension is too long&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-16 18:52</div>
            <div class="timeline-body"><p>That's surprising to me -- I don't think we have any control over the error message there, it comes directly from the build backend.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by @charliermarsh on 2024-09-16 18:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-16 18:54</div>
            <div class="timeline-body"><p>Oh wait, these are both uv. I thought the second trace was <code>pip install</code>. That's even more surprising to me then hah.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-16 18:54</div>
            <div class="timeline-body"><p>Is it the same Python version in both cases?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SamuelT-Beslogic">@SamuelT-Beslogic</a> on 2024-09-16 19:39</div>
            <div class="timeline-body"><blockquote>
<p>Is it the same Python version in both cases?</p>
</blockquote>
<p>I would think so? When we got the logs for this, we run <code>uv pip install</code> <em>immediatly</em> after <code>uv sync</code>, so it should be using the same venv. The global Python install is also 3.12.3</p>
<p>Also of note, running standard <code>pip</code> directly in the venv created by the failed <code>uv sync</code> command worked, (probably that the path is just short enough w/o uv's cache being used)</p>
<p><code>djangorestframework-camel-case</code> is probably only relevant here in that it's one of our longest-named dependency, just enough to trigger the issue.</p>
<hr />
<p>Wild guess (I don't know too much about uv's internals), looks like the sync command may accidentally suppress the &quot;path too long&quot; error, then failing because the egg-info failed to be created.</p>
<hr />
<p>Also for any future reader, the solution is: https://learn.microsoft.com/en-us/windows/win32/fileio/maximum-file-path-limitation#registry-setting-to-enable-long-paths
This issue is simply about showing a more helpful error message when using <code>uv sync</code></p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:50 UTC
    </footer>
</body>
</html>
