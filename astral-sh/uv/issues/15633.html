<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is it possible to run a script before every uv command? - astral-sh/uv #15633</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Is it possible to run a script before every uv command?</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/15633">#15633</a>
        opened by <a href="https://github.com/kurt-rhee">@kurt-rhee</a>
        on 2025-09-02 15:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kurt-rhee">@kurt-rhee</a> on 2025-09-02 15:40</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I currently use uv to authenticate with AWS codeartifacts.  Some of my team members forgot to authenticate and get a permissions error when using <code>uv sync</code> since <code>pyproject.toml</code> refers to aws codeartifacts.</p>
<p>I have written a script which runs with <code>uv run aws-auth</code> which authenticates with aws codeartifact.</p>
<p>Is it possible to run the script before <code>uv sync</code> and other commands run to automate the process of authenticating?</p>
<h3>Platform</h3>
<p>Darwin 24.6.0 arm64</p>
<h3>Version</h3>
<p>uv 0.8.9 (Homebrew 2025-08-12)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @kurt-rhee on 2025-09-02 15:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Sellig6792">@Sellig6792</a> on 2025-09-03 20:50</div>
            <div class="timeline-body"><p>I don't think so, if you absolutely need it now you should write your own scripts files. In which you can do what you want then call the uv command</p>
<p>I would like to try to implement this if it is accepted though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kurt-rhee">@kurt-rhee</a> on 2025-09-03 20:51</div>
            <div class="timeline-body"><p>Thank you for letting me know and for wanting to implement it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-09-05 09:56</div>
            <div class="timeline-body"><p>We have documentation on using AWS codeartifact with uv at: https://docs.astral.sh/uv/guides/integration/alternative-indexes/#aws-codeartifact. This should not require running commands manually, instead you can use a keyring plugin.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kurt-rhee">@kurt-rhee</a> on 2025-09-05 14:29</div>
            <div class="timeline-body"><p>Thanks @konstin I'm not very familiar with keyring</p>
<p>Do I need to set these environment variables each time I start a new shell?</p>
<h1>Enable keyring authentication</h1>
<p>export UV_KEYRING_PROVIDER=subprocess</p>
<h1>Set the username for the index</h1>
<p>export UV_INDEX_PRIVATE_REGISTRY_USERNAME=aws</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-09-05 15:13</div>
            <div class="timeline-body"><p>No, see the note box just below in the docs. There's https://docs.astral.sh/uv/reference/settings/#keyring-provider and you can set a username for the index.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kurt-rhee">@kurt-rhee</a> on 2025-09-05 16:09</div>
            <div class="timeline-body"><p>Got it thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:29 UTC
    </footer>
</body>
</html>
