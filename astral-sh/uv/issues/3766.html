<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yank warning not shown for cached / existing packages - astral-sh/uv #3766</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Yank warning not shown for cached / existing packages</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/3766">#3766</a>
        opened by <a href="https://github.com/notatallshaw-gts">@notatallshaw-gts</a>
        on 2024-05-22 20:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/notatallshaw-gts">@notatallshaw-gts</a> on 2024-05-22 20:02</div>
            <div class="timeline-body"><p>This is presumably related to https://github.com/astral-sh/uv/issues/3703, not only do I not see the yank message in <code>uv pip compile</code> or <code>uv pip install --dry-run</code>. I no longer see it in <code>uv pip install</code></p>
<pre><code>$ uv -V
uv 0.2.0

$ echo &quot;python-daemon==2.3.1&quot; | uv pip compile -
Resolved 4 packages in 5ms
# This file was autogenerated by uv via the following command:
#    uv pip compile -
docutils==0.21.2
    # via python-daemon
lockfile==0.12.2
    # via python-daemon
python-daemon==2.3.1
setuptools==70.0.0
    # via python-daemon

$ uv pip install --dry-run  &quot;python-daemon==2.3.1&quot;
Resolved 4 packages in 3ms
Would install 3 packages
 + docutils==0.21.2
 + lockfile==0.12.2
 + python-daemon==2.3.1

$ uv pip install  &quot;python-daemon==2.3.1&quot;
Resolved 4 packages in 3ms
Installed 3 packages in 139ms
 + docutils==0.21.2
 + lockfile==0.12.2
 + python-daemon==2.3.1
</code></pre>
<p>pip displays this message:</p>
<pre><code>$ pip install --dry-run  &quot;python-daemon==2.3.1&quot;
Collecting python-daemon==2.3.1
  Using cached python_daemon-2.3.1-py2.py3-none-any.whl.metadata (1.7 kB)
Collecting docutils (from python-daemon==2.3.1)
  Using cached docutils-0.21.2-py3-none-any.whl.metadata (2.8 kB)
Collecting lockfile&gt;=0.10 (from python-daemon==2.3.1)
  Using cached lockfile-0.12.2-py2.py3-none-any.whl.metadata (2.4 kB)
Requirement already satisfied: setuptools in ./.venv/lib/python3.11/site-packages (from python-daemon==2.3.1) (65.5.0)
WARNING: The candidate selected for download or install is a yanked version: 'python-daemon' candidate (version 2.3.1 at https://files.pythonhosted.org/packages/aa/b0/bc79d8ff019c2583d839e0143b1f91eafd4cfe92f86fb9d378a515dfb612/python_daemon-2.3.1-py2.py3-none-any.whl (from https://pypi.org/simple/python-daemon/))
Reason for being yanked: Incorrectly declares Python 2 support
Using cached python_daemon-2.3.1-py2.py3-none-any.whl (34 kB)
Using cached lockfile-0.12.2-py2.py3-none-any.whl (13 kB)
Using cached docutils-0.21.2-py3-none-any.whl (587 kB)
Would install docutils-0.21.2 lockfile-0.12.2 python-daemon-2.3.1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-22 20:05</div>
            <div class="timeline-body"><p>I don't think there's any regression here -- we don't show it if the package is cached. That's a separate issue and has always been true. I see it just fine:</p>
<pre><code>‚ùØ cargo run pip install &quot;python-daemon==2.3.1&quot; --no-cache
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.15s
     Running `target/debug/uv pip install python-daemon==2.3.1 --no-cache`
Resolved 4 packages in 237ms
Downloaded 4 packages in 134ms
Installed 4 packages in 12ms
 + docutils==0.21.2
 + lockfile==0.12.2
 + python-daemon==2.3.1
 + setuptools==70.0.0
warning: python-daemon==2.3.1 is yanked (reason: &quot;Incorrectly declares Python 2 support&quot;).
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-05-22 20:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-22 20:05</div>
            <div class="timeline-body"><p>We have a TODO for this in the code, is there an issue tracking it somewhere?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-22 20:06</div>
            <div class="timeline-body"><p>Let's just use this issue?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "uv 0.2.0 no longer displaying yank message" to "Show yank warnings for cached packages" by @charliermarsh on 2024-05-22 20:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-22 20:07</div>
            <div class="timeline-body"><p>I don't know if we ever showed yanks for <code>pip compile</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Show yank warnings for cached packages" to "Yank warning not shown for cached / existing packages" by @zanieb on 2024-05-22 20:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw-gts">@notatallshaw-gts</a> on 2024-05-22 20:09</div>
            <div class="timeline-body"><p>You are right, there are two issues here, yank message is not displayed when cached, https://github.com/astral-sh/uv/issues/3703 was closed but request to add to yank message to <code>uv pip compile</code> seemed to missed (or decided against but not communicated?).</p>
<p>I can open a second issue for the latter.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-22 20:09</div>
            <div class="timeline-body"><p>I think I just missed it in #3703. Mind opening a separate issue for pip compile? It can just link here. I'll add the behavior now. Thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3772.html">astral-sh/uv#3772</a> on 2024-05-22 20:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-22 21:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:19 UTC
    </footer>
</body>
</html>
