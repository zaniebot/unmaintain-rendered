<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>git dependencies fail if two or more conflict - astral-sh/uv #15436</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>git dependencies fail if two or more conflict</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/15436">#15436</a>
        opened by <a href="https://github.com/evbo">@evbo</a>
        on 2025-08-21 22:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/evbo">@evbo</a> on 2025-08-21 22:20</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I'm getting:</p>
<blockquote>
<p>Invalid username or token. Password authentication is not supported for Git operations.</p>
</blockquote>
<p>when I have 2 dependencies listed that use the same github dependency (transistive dependency conflict). I fix it by removing one of them, but should that be happening?</p>
<p>example:</p>
<pre><code class="language-toml">dependencies = [
    &quot;a @ git+https://github.com/private/a@main&quot;,
    &quot;b @ git+https://github.com/private/b_depends_on_a@main&quot;,
]
</code></pre>
<p>So I just remove <code>a</code> and it's all good, but still that error doesn't make sense. Should I open a new issue or is it similar enough to this one?</p>
<h3>Platform</h3>
<p>Ubuntu 22.04</p>
<h3>Version</h3>
<p>0.8.9</p>
<h3>Python version</h3>
<p>3.13.6</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @evbo on 2025-08-21 22:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-21 22:59</div>
            <div class="timeline-body"><p>I presume this requires that the repositories are private?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/evbo">@evbo</a> on 2025-08-22 00:25</div>
            <div class="timeline-body"><p>I think so, else no authentication would be necessary. Also, it's tricky to reproduce since these repositories must both have the same dependency, which itself must also be a git dependency. In other words, two private repos no issue unless those repos both have another git dependency common between the two of them. Here's one other interesting fact not covered by the logs:</p>
<p>In VS Code when in asked for my credentials, it should a different repository url with what appeared to be some kind of hash! I thought I was being maliciously hacked!</p>
<p>So I think it's trying to distinguish dupes and leading to a bad url that of course my private key can't authenticate</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/evbo">@evbo</a> on 2025-08-23 16:06</div>
            <div class="timeline-body"><p>@zanieb here's the user/password (.ssh ignored) in vscode after <code>uv sync --upgrade</code>:</p>
<p><img width="485" height="59" alt="Image" src="https://github.com/user-attachments/assets/9ca8cf2a-0f90-4cbd-bd3e-47b8a7af6ab7" /></p>
<blockquote>
<p>uv sync --upgrade
warning: No <code>requires-python</code> value found in the workspace. Defaulting to <code>&gt;=3.13</code>.
Updating https://github.com/private/a (feature/branch)
Updated https://github.com/private/b (58d8733162e53cb14331a8429e9f128e0b95d4ac)
Updating https://github.com/private/c (main)
⠦ Resolving dependencies...                                                                                                                                  × Failed to download and build <code>launch-view @ git+https://github.com/private/c@main</code>
├─▶ Git operation failed
├─▶ failed to fetch into: /home/gym/.cache/uv/git-v0/db/59e02c7f8556f97f
├─▶ failed to fetch branch or tag <code>main</code>
╰─▶ process didn't exit successfully: <code>/usr/bin/git fetch --force --update-head-ok 'https://github.com/private/c'       '+refs/tags/main:refs/remotes/origin/tags/main'</code> (exit status: 128)
--- stderr
fatal: couldn't find remote ref refs/tags/main</p>
</blockquote>
<p>But if I remove the shared git dependency it works fine. And I have no issue cloning these with ssh. Not possible to use user/pass auth since the hostname is nonsense.</p>
<p>Work around:</p>
<p>If the project has only only 1 git dependency:
<code>rm -rf .venv</code> and then <code>uv sync</code>, source again.</p>
<p>If multiple:
same as above, but remove all git dependencies. Then, repeatedly sync, each time adding 1 git dependency back at a time. If multiple are added and you sync it is a total blocker.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/evbo">@evbo</a> on 2025-08-26 16:08</div>
            <div class="timeline-body"><p>@zanieb I apologize for having a poor minimal reproduction. If DM me, I'd be happy to give you temporary access to my private repos so you can quickly see the behavior in no time. Just let me know.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:11 UTC
    </footer>
</body>
</html>
