<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for Poetry-like groups - astral-sh/uv #9664</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for Poetry-like groups</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9664">#9664</a>
        opened by <a href="https://github.com/fre-edin">@fre-edin</a>
        on 2024-12-05 22:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/fre-edin">@fre-edin</a> on 2024-12-05 22:54</div>
            <div class="timeline-body"><p>Purpose: faster Docker build for increased iteration speed when working with Docker development images.</p>
<p><strong>Background:</strong>
Resolving package dependencies means looking at all packages to find the correct versions. This is done by having a lock file, which is then updated each time I make a change in the packages.</p>
<p>When I have a Docker development image I enjoy installing big and slowly changing packages such as torch first, and smaller and more fast-changing packages later. That way, when I add a package my docker layer does not get invalidated and I can rebuild my image much faster, increasing iteration speed.</p>
<p>So how can I resolve my dependencies without invalidating the Docker cached layers?</p>
<p><strong>Solution:</strong>
Instead of using the lock file itself inside the Docker image, I first export from the lock file using
<code>poetry export --without-hashes --with heavy-builds -o requirements-heavy-builds.txt</code></p>
<p>And then I have <code>requirements-heavy-builds.txt</code> in my Docker file.</p>
<p>That way, unless the versions of the packages in <code>requirements-heavy-builds.txt</code> change, the Docker cache does not get invalidated and I keep iteration speed high.</p>
<p><strong>Request:</strong>
To support this workflow in uv by adding the commands:</p>
<ul>
<li><code>uv export --without-hashes --with heavy-builds -o requirements-heavy-builds.txt</code></li>
<li><code>uv add --group heavy-builds</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-05 23:59</div>
            <div class="timeline-body"><p>I think all of this is supported today, unless I'm misunderstanding? <code>uv export --group heavy-builds ...</code> and <code>uv add --group</code> already exists.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-12-05 23:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fre-edin">@fre-edin</a> on 2024-12-06 07:12</div>
            <div class="timeline-body"><p>Thank you!</p>
<p>I must somehow have missed this. Thank you for a great product.</p>
<p>Fredrik</p>
<p>fre 6 dec. 2024 kl. 01:00 skrev Charlie Marsh <em><strong>@</strong></em>.***&gt;:</p>
<blockquote>
<p>I think all of this is supported today, unless I'm misunderstanding? uv
export --group heavy-builds ... and uv add --group already exists.</p>
<p>â€”
Reply to this email directly, view it on GitHub
<a href="https://github.com/astral-sh/uv/issues/9664#issuecomment-2521758012">https://github.com/astral-sh/uv/issues/9664#issuecomment-2521758012</a>, or
unsubscribe
<a href="https://github.com/notifications/unsubscribe-auth/BMJPLYXT6QAASWAZT2RZTE32EDSIHAVCNFSM6AAAAABTDQDLH6VHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDKMRRG42TQMBRGI">https://github.com/notifications/unsubscribe-auth/BMJPLYXT6QAASWAZT2RZTE32EDSIHAVCNFSM6AAAAABTDQDLH6VHI2DSMVQWIX3LMV43OSLTON2WKQ3PNVWWK3TUHMZDKMRRG42TQMBRGI</a>
.
You are receiving this because you authored the thread.Message ID:
<em><strong>@</strong></em>.***&gt;</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-12-06 11:26</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:45 UTC
    </footer>
</body>
</html>
