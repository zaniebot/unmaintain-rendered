<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confusing documentation for `uvx` - astral-sh/uv #6804</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Confusing documentation for <code>uvx</code></h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/6804">#6804</a>
        opened by <a href="https://github.com/weihenglim">@weihenglim</a>
        on 2024-08-29 10:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/weihenglim">@weihenglim</a> on 2024-08-29 10:57</div>
            <div class="timeline-body"><p>Sorry if this is something obvious, but I am very confused on the difference between a <code>uvx &lt;package&gt;</code> invocation and <code>uvx &lt;package&gt;@latest</code>. Through my own testing, <code>uvx &lt;package&gt;</code> seems to always install the latest version even if a cached version is available.</p>
<pre><code class="language-cmd">&gt;uvx ruff@0.6.0 -V
Installed 1 package in 293ms
ruff 0.6.0

&gt;uvx ruff -V
Installed 1 package in 290ms
ruff 0.6.2
</code></pre>
<p>Reading the <a href="https://docs.astral.sh/uv/concepts/tools/#tool-versions">documentation</a> had me even more confused as it seems to be contradicting itself. The linked section states that:</p>
<blockquote>
<p>uvx will use the latest available version of the requested tool on the first invocation. After that, uvx will <strong><em>use the cached version</em></strong> of the tool unless a different version is requested, the cache is pruned, or the cache is refreshed</p>
</blockquote>
<p>But then immediately proceeds to contradict the statement by saying:</p>
<blockquote>
<p>A subsequent invocation of uvx will use the <strong><em>latest, not the cached, version</em></strong>.</p>
</blockquote>
<p>And then goes back to saying:</p>
<blockquote>
<p>But, if a new version of Ruff was released, <strong><em>it would not be used</em></strong> unless the cache was refreshed.</p>
</blockquote>
<p>Would appreciate it if someone could help clarify this, and again, I apologize if I am just missing something obvious.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-29 13:50</div>
            <div class="timeline-body"><p>Oops, yeah sorry this is really confusing. I think it's roughly like this:</p>
<ul>
<li>If you request a specific version, we'll respect the requested version and we'll cache it, e.g. as <code>foo@0.1.0</code></li>
<li>Requests without a version will fetch the latest version and cache it, e.g. as <code>foo</code></li>
<li>Subsequent requests without a version will use the <code>foo</code> cached version<ul>
<li>If the library releases a new version, we won't fetch it</li>
</ul>
</li>
<li>If you use <code>foo@latest</code>, we'll refresh the cache and fetch the latest version again and cache it, e.g. as <code>foo</code></li>
</ul>
<p>This is, at least, the intent of what I wrote. I'm actually not entirely sure it's correct, and I think it needs to be rephrased.</p>
<p>@charliermarsh would you be willing to take a look since you implemented the caching?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-08-29 13:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @zanieb on 2024-08-29 13:50</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @zanieb on 2024-08-29 13:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/weihenglim">@weihenglim</a> on 2024-08-30 02:44</div>
            <div class="timeline-body"><blockquote>
<p>If the library releases a new version, we won't fetch it</p>
</blockquote>
<p>I think this is the part that got me confused because in my experience that wasn't the case. Case in point, <code>uvx ruff</code> actually fetched the latest release of <code>ruff</code> for me this morning even without the <code>@latest</code> flag.</p>
<pre><code class="language-cmd">&gt;uvx ruff -V
Installed 1 package in 164ms
ruff 0.6.3
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @zanieb on 2024-09-03 13:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:41 UTC
    </footer>
</body>
</html>
