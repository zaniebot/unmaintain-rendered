<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv crash with exit code 132 on older CPUs - astral-sh/uv #16533</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv crash with exit code 132 on older CPUs</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16533">#16533</a>
        opened by <a href="https://github.com/eyalmazuz">@eyalmazuz</a>
        on 2025-10-31 10:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/eyalmazuz">@eyalmazuz</a></div>
            <div class="timeline-body">Summary
<p>We have a slurm cluster, and some of the compute nodes have Intel Xeon E5-2640 v2 (32)  CPUs</p>
REPL error
<p>when I run in my project directory the command</p>
<pre><code>uv run python3
</code></pre>
<p>It opens the REPL
but when I do something like</p>
<pre><code>import polars
</code></pre>
<p>It just exits without any output whatsoever</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/5dbff906-0d75-498e-b49b-62898c5b8e16"></p>
Sbatch error
<p>Similarly if I submit a job via sbatch I get an exit code 132</p>
<p><img alt="Image" src="https://github.com/user-attachments/assets/08e266aa-7329-4a1f-8bbc-dad77d8263c7"></p>
<p>These are the contents of my sbatch file</p>
<pre><code>#!/bin/bash

#SBATCH --partition cpu
#SBATCH --time 7-00:00:00
#SBATCH --job-name gemini-question-generation	
#SBATCH --output jobs/job-%J.out
#SBATCH --mem=4G

### Print some data to output file ###
echo `date`
echo -e &quot;\nSLURM_JOBID:\t\t&quot; $SLURM_JOBID
echo -e &quot;SLURM_JOB_NODELIST:\t&quot; $SLURM_JOB_NODELIST &quot;\n\n&quot;

export GEMINI_API_KEY=&quot;KEYKEYKEYKEYKEYKEYKEY&quot;

srun --unbuffered --export=ALL uv run gemini_eval.py \
    --prompt-path ./data/prompts/NACO_prompt.txt \
    --data-path ./data/qa_test.csv \
    --model &quot;gemini-2.5-pro&quot;
</code></pre>
<p>But on other nodes that for example have AMD EPYC 7302 CPUs both methods works just fine
I can import polars, and I can submit a job and have it run until completion</p>
<p>Here is the contents of my pyproject.toml</p>
<pre><code>[project]
name = &quot;question-generation&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.11&quot;
dependencies = [
    &quot;accelerate&gt;=1.10.1&quot;,
    &quot;bitsandbytes&gt;=0.48.1&quot;,
    &quot;google-genai&gt;=1.46.0&quot;,
    &quot;openai&gt;=2.3.0&quot;,
    &quot;optimum&gt;=2.0.0&quot;,
    &quot;pillow&gt;=11.3.0&quot;,
    &quot;polars&gt;=1.34.0&quot;,
    &quot;scikit-learn&gt;=1.7.2&quot;,
    &quot;torch&gt;=2.8.0&quot;,
    &quot;transformers&gt;=4.57.0&quot;,
]

[tool.ruff]
# Always generate Python 3.11-compatible code.
target-version = &quot;py311&quot;
</code></pre>
Platform
<p>Rocky Linux 9.5 (Blue Onyx)
Kernel: 5.14.0-503.29.1.el9_5.x86_64</p>
Version
<p>uv 0.9.6</p>
Python version
<p>Python 3.11.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/eyalmazuz">@eyalmazuz</a> on 2025-10-31 10:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-10-31 14:31</div>
            <div class="timeline-body"><p>Does this happen with pip too, or only with uv? Most likely, polars requires newer CPU instructions than that CPU supports. Python packages don&#x27;t encode this information, so it&#x27;s impossible for uv to tell.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/eyalmazuz">@eyalmazuz</a> on 2025-10-31 14:53</div>
            <div class="timeline-body"><blockquote>
<p>Does this happen with pip too, or only with uv? Most likely, polars requires newer CPU instructions than that CPU supports. Python packages don&#x27;t encode this information, so it&#x27;s impossible for uv to tell.</p>
</blockquote>
<p>I ditched pip a long while ago, it never occurred to me to check ðŸ˜…
Yeah, apparently it also fails on pip, and somehow running python with vent instead of uv does give a detailed message
I wonder why UV just kicks the bucket without putting anything? ðŸ¤”</p>
<pre><code>&gt;&gt;&gt; import polars
/home/mazuze/venv/lib64/python3.9/site-packages/polars/_cpu_check.py:250: RuntimeWarning: Missing required CPU features.

The following required CPU features were not detected:
    avx2, fma, bmi1, bmi2, lzcnt, movbe
Continuing to use this version of Polars on this processor will likely result in a crash.
Install `polars[rtcompat]` instead of `polars` to run Polars with better compatibility.

Hint: If you are on an Apple ARM machine (e.g. M1) this is likely due to running Python under Rosetta.
It is recommended to install a native version of Python that does not run under Rosetta x86-64 emulation.

If you believe this warning to be a false positive, you can set the `POLARS_SKIP_CPU_CHECK` environment variable to bypass this check.

  warnings.warn(
Illegal instruction (core dumped)
</code></pre>
<p>Since it&#x27;s not a uv issue
I&#x27;ll close the issue now</p>
<p>Thank you for your help</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/eyalmazuz">@eyalmazuz</a> on 2025-10-31 14:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:40:52 UTC
    </footer>
</body>
</html>
