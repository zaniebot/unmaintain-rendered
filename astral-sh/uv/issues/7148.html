<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>support building all packages in the workspace including all dependencies - astral-sh/uv #7148</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>support building all packages in the workspace including all dependencies</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7148">#7148</a>
        opened by <a href="https://github.com/mmerickel">@mmerickel</a>
        on 2024-09-06 23:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mmerickel">@mmerickel</a></div>
            <div class="timeline-body"><p>I have a workspace like <code>src/*</code>. Now I want to package a subset of those packages and install it into a new virtualenv somewhere.</p>
<h2>Backstory example with pip</h2>
<p>With pip-tools and <code>uv pip compile</code> I'm starting from a file that looks like this as <code>requirements.in</code>:</p>
<pre><code>-e src/foo
-e src/bar
# ...
</code></pre>
<p>And I have a lock file <code>requirements.txt</code> containing:</p>
<pre><code>-e src/foo
-e src/bar
pyramid==1.10.2
# ... all the other remote dependencies
</code></pre>
<p>My goal is to end up with a wheel folder containing wheels for foo and bar, as well as everything they depend on. I do it like this:</p>
<pre><code>$ pip wheel -w wheels --find-links wheels -r requirements.txt
</code></pre>
<p>Later I can make my new virtualenv and install what I want (let's say just <code>foo</code>) from that wheelhouse via:</p>
<pre><code>$ python -m venv some-env
$ some-env/bin/pip install -w wheels --find-links wheels foo
</code></pre>
<h2>Adapted version with uv</h2>
<pre><code>$ uv export &gt; requirements.txt
$ pip wheel -w wheels --find-links wheels -r requirements.txt
</code></pre>
<p>Now I've lost uv's excellent building features and I'm using pip directly instead.</p>
<p>Ideally I'd be able to just say &quot;build wheels including all dependencies&quot;, and then I'd say:</p>
<pre><code>$ uv build --wheel -o wheels --with-deps
</code></pre>
<p>And it would build foo and everything it depends on including bar, and any external dependencies. And it would use the <code>uv.lock</code> plus the current platform to determine what to build.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mmerickel">@mmerickel</a> on 2024-09-06 23:47</div>
            <div class="timeline-body"><p>I see now this is a duplicate of https://github.com/astral-sh/uv/issues/1681 which hilariously I even commented on in April so closing this, but maybe the examples are helpful to someone.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @mmerickel on 2024-09-06 23:47</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:26:56 UTC
    </footer>
</body>
</html>
