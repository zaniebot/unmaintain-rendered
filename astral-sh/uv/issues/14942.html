<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tokenizers fails to install on macOS via `pyproject.toml` - astral-sh/uv #14942</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>tokenizers fails to install on macOS via <code>pyproject.toml</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/14942">#14942</a>
        opened by <a href="https://github.com/prrao87">@prrao87</a>
        on 2025-07-28 15:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/prrao87">@prrao87</a></div>
            <div class="timeline-body">Summary
<p>I&#x27;m using a uv-managed version of Python 3.13 globally. I am unable to install the popular Hugging Face <code>tokenizers</code> library using <code>pyproject.toml</code>.</p>
<pre><code>$ uv add tokenizers
Using CPython 3.13.5
Creating virtual environment at: .venv
Resolved 16 packages in 6ms
error: Distribution `tokenizers==0.21.4 @ registry+https://pypi.org/simple` can&#x27;t be installed because it doesn&#x27;t have a source distribution or wheel for the current platform

hint: You&#x27;re on macOS (`macosx_15_0_arm64`), but `tokenizers` (v0.21.4) only has wheels for the following platforms: `manylinux_2_17_aarch64`, `manylinux_2_17_armv7l`, `manylinux_2_17_ppc64le`, `manylinux_2_17_s390x`, `manylinux2014_aarch64`, `manylinux2014_armv7l`, `manylinux2014_ppc64le`, `manylinux2014_s390x`; consider adding your platform to `tool.uv.required-environments` to ensure uv resolves to a version with compatible wheels
</code></pre>
<p>However, using the standard pip API and avoiding <code>pyproject.toml</code> seems to work:</p>
<pre><code>$ uv venv
$ source .venv/bin/activate
$ uv pip install tokenizers
</code></pre>
<p>This doesn&#x27;t complain and it installs. What&#x27;s happening during dependency resolution when using the command <code>uv add tokenizers</code>?</p>
Platform
<p>macOS 15 arm64</p>
Version
<p>uv 0.8.3 (7e78f54e7 2025-07-24)</p>
Python version
<p>Python 3.13.5</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/prrao87">@prrao87</a> on 2025-07-28 15:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;tokenizers fails to install on macOS&quot; to &quot;tokenizers fails to install on macOS via `pyproject.toml`&quot; by <a href="https://github.com/prrao87">@prrao87</a> on 2025-07-28 15:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/prrao87">@prrao87</a> on 2025-07-28 15:50</div>
            <div class="timeline-body"><p>Update: This seems to be broken because an upstream change to the <code>tokenizers</code> library. The issue seems to be resolved if we downgrade the version of tokenizers.</p>
<pre><code>uv add &#x27;tokenizers==0.21.2&#x27;
</code></pre>
<p>It&#x27;s something that&#x27;s likely resolvable on their end. This isn&#x27;t a uv issue, so am closing this.
<a href="https://github.com/huggingface/tokenizers/issues/1836">huggingface/tokenizers#1836</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/prrao87">@prrao87</a> on 2025-07-28 15:51</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:39:43 UTC
    </footer>
</body>
</html>
