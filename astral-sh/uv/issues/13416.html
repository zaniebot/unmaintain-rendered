<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Include Build Dependencies in the Lock File - astral-sh/uv #13416</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Include Build Dependencies in the Lock File</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/13416">#13416</a>
        opened by <a href="https://github.com/pythonweb2">@pythonweb2</a>
        on 2025-05-12 21:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/pythonweb2">@pythonweb2</a> on 2025-05-12 21:00</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Right now, as I understand it, uv locks all of the dependencies in the pyproject.toml file. However, from what I have seen, there is no way to lock build dependencies for all of those dependencies.</p>
<p>For example, I add <code>pydantic</code> to my dependencies, which depends on <code>pydantic-core</code>, which has a build dependency of <code>maturin</code>. When I use <code>uv sync -U --refresh</code> and disable wheels, then when uv builds pydantic from source, it will pull the version of maturin specified (right now <code>&quot;maturin&gt;=1,&lt;2&quot;</code>), and this could break source builds in different pipelines, etc.</p>
<p>It seems like to achieve a truly locked environment; these dependencies would need to be locked as well. Would it be possible to include that in the lock file?</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @pythonweb2 on 2025-05-12 21:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-12 21:23</div>
            <div class="timeline-body"><p>We're working on this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @Gankra by @zanieb on 2025-05-12 21:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pythonweb2">@pythonweb2</a> on 2025-05-12 21:24</div>
            <div class="timeline-body"><p>Ok, thanks for the quick response! Feel free to close this as a duplicate after linking to the associated work items.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-13 02:56</div>
            <div class="timeline-body"><p>I believe it's #5190.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-05-13 02:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:03 UTC
    </footer>
</body>
</html>
