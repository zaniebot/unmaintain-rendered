```yaml
number: 203
title: pypi-metadata endpoint sometimes throws 500s on initial request
type: issue
state: closed
author: charliermarsh
labels:
  - bug
assignees: []
created_at: 2023-10-26T13:57:31Z
updated_at: 2023-10-26T18:14:27Z
url: https://github.com/astral-sh/uv/issues/203
synced_at: 2026-01-10T01:57:00Z
```

# pypi-metadata endpoint sometimes throws 500s on initial request

---

_Issue opened by @charliermarsh on 2023-10-26 13:57_

_No description provided._

---

_Label `bug` added by @charliermarsh on 2023-10-26 13:57_

---

_Added to milestone `Feature complete` by @charliermarsh on 2023-10-26 13:57_

---

_Comment by @charliermarsh on 2023-10-26 17:29_

If we want to avoid relying on the worker, we could also leverage Bas's crate: https://github.com/baszalmstra/async_http_range_reader

---

_Comment by @charliermarsh on 2023-10-26 17:39_

@konstin - Is there any way to trigger this reliably?

---

_Comment by @konstin on 2023-10-26 17:41_

for me just running the pypi 8k testing script triggered a lot of them; maybe you need to vent the cache though

---

_Comment by @charliermarsh on 2023-10-26 17:42_

Will try that script.

---

_Comment by @konstin on 2023-10-26 17:43_

i'd love to have a client side solution too, we'll need one for alternative indices anyway (and a non-range fallback when the server doesn't indicate support)

---

_Comment by @charliermarsh on 2023-10-26 17:43_

Are you interested in enabling it? We can probably leverage Bas's work.

---

_Comment by @charliermarsh on 2023-10-26 17:54_

Okay cool, I finally got a failure for "Worker exceeded CPU time limit". I'm going to upgrade us to a paid plan to increase the cap a bit. We could also consider adding retry for these.

---

_Assigned to @charliermarsh by @charliermarsh on 2023-10-26 17:54_

---

_Closed by @charliermarsh on 2023-10-26 18:14_

---
