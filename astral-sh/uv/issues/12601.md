```yaml
number: 12601
title: "Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit       status: 1)"
type: issue
state: closed
author: mikel-brostrom
labels:
  - question
assignees: []
created_at: 2025-04-01T16:55:54Z
updated_at: 2025-04-02T08:34:12Z
url: https://github.com/astral-sh/uv/issues/12601
synced_at: 2026-01-10T01:57:28Z
```

# Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit       status: 1)

---

_Issue opened by @mikel-brostrom on 2025-04-01 16:55_

### Question

My `project.toml`

```
[[tool.pdm.source]]
name = "torchcpu"
url = "https://download.pytorch.org/whl/cpu"
verify_ssl = true

[[tool.pdm.source]]
name = "torch_cuda121"
url = "https://download.pytorch.org/whl/cu121"
verify_ssl = true

[build-system]
requires = ["pdm-backend", "torch", "setuptools"]
build-backend = "pdm.backend"

[[tool.uv.dependency-metadata]]
name = "yolox"
version = "0.3.0"
requires-dist = ["onnx>=1.17.0", "setuptools>=70.0.0"]

[tool.uv]
no-build-isolation-package = ["yolox"]

[tool.flake8]
max-line-length = 120
exclude = [".tox", "*.egg", "build", "temp"]
select = ["E", "W", "F"]
doctests = true
verbose = 2
format = "pylint"
ignore = ["E731", "F405", "E402", "W504", "W605", "E741"]

[project]
authors = [
    {name = "Mikel Broström"},
]
license = {text = "AGPL-3.0"}
requires-python = "<3.12,>=3.9"
dependencies = [
    "setuptools<71.0.0,>=70.0.0",
    "filterpy<2.0.0,>=1.4.5",
    "gdown<6.0.0,>=5.1.0",
    "lapx<1.0.0,>=0.5.5",
    "loguru<1.0.0,>=0.7.2",
    "numpy==1.26.4",
    "pyyaml<7.0.0,>=6.0.1",
    "regex<2025.0.0,>=2024.0.0",
    "yacs<1.0.0,>=0.1.8",
    "scikit-learn<2.0.0,>=1.3.0",
    "pandas<3.0.0,>=2.0.0",
    "opencv-python<5.0.0,>=4.7.0",
    "ftfy<7.0.0,>=6.1.3",
    "gitpython<4.0.0,>=3.1.42",
    "torch<3.0.0,>=2.2.1; sys_platform == \"darwin\"",
    "torch<3.0.0,>=2.2.1; sys_platform == \"linux\" or sys_platform == \"win32\"",
    "torchvision<1.0.0,>=0.17.1; sys_platform == \"darwin\"",
    "torchvision<1.0.0,>=0.17.1; sys_platform == \"linux\" or sys_platform == \"win32\"",
]
name = "boxmot"
version = "12.0.2"
description = "BoxMOT: pluggable SOTA tracking modules for segmentation, object detection and pose estimation models"
readme = "README.md"
classifiers = [
    "Development Status :: 4 - Beta",
    "Intended Audience :: Developers",
    "Intended Audience :: Education",
    "Intended Audience :: Science/Research",
    "License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.8",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Topic :: Software Development",
    "Topic :: Scientific/Engineering",
    "Topic :: Scientific/Engineering :: Artificial Intelligence",
    "Topic :: Scientific/Engineering :: Image Recognition",
    "Topic :: Scientific/Engineering :: Image Processing",
]
keywords = [
    "tracking",
    "tracking-by-detection",
    "machine-learning",
    "deep-learning",
    "vision",
    "ML",
    "DL",
    "AI",
    "YOLO",
]

[dependency-groups]
test = [
    "pytest<9.0.0,>=8.0.2",
    "isort<6.0.0,>=5.13.2",
    "pytest-cov<7.0.0,>=6.0.0",
]
yolo = [
    "ultralytics @ git+https://github.com/mikel-brostrom/ultralytics.git",
    "rfdetr<2.0.0,>=1.0.8",
    "yolox==0.3.0",
]
export = [
    "onnx<2.0.0,>=1.17.0",
    "onnxsim<1.0.0,>=0.4.36",
    "openvino-dev<2025.0,>=2023.3",
]
evolve = [
    "ray<3.0.0,>=2.35.0",
    "plotly<6.0.0,>=5.19.0",
    "joblib<2.0.0,>=1.3.2",
]
dev = [
    "ipykernel<7.0.0,>=6.29.5",
]
```

The error:

```
  × Failed to build `yolox==0.3.0`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit
      status: 1)

      [stderr]
      Traceback (most recent call last):
        File "<string>", line 8, in <module>
      ModuleNotFoundError: No module named 'setuptools'

      hint: This usually indicates a problem with the package or the build
      environment.
  help: `yolox` (v0.3.0) was included because `boxmot:yolo` (v12.0.2) depends
        on `yolox`
```

I thought:

```
[build-system]
requires = ["pdm-backend", "torch", "setuptools"]
build-backend = "pdm.backend"
```

Would fix this issue as both torch and setuptools are needed for building yolox. What am I missing?


### Platform

macSO 15.1

### Version

uv 0.5.8 (80d41671b 2024-12-11)

---

_Label `question` added by @mikel-brostrom on 2025-04-01 16:55_

---

_Comment by @zanieb on 2025-04-01 17:04_

Your build dependencies are for _your_ project, not `yolox`. We're working on the ability to extend build dependencies of arbitrary packages, but it's not yet supported.

Since you've already disabled build isolation, you just need to install the dependencies first. e.g., you'd add them to a dependency group, then sync that first

```
uv sync --only-group yolox-build-deps
uv sync
```

---

_Assigned to @Gankra by @zanieb on 2025-04-01 17:04_

---

_Comment by @mikel-brostrom on 2025-04-01 21:02_

Thank you for your quick response @zanieb. I ended up installing some dependencies on the fly as I could not manage to get it working...

---

_Closed by @mikel-brostrom on 2025-04-01 21:03_

---

_Comment by @mikel-brostrom on 2025-04-02 08:34_

Do you have an issue associated to this such that I can track its progress @zanieb ?

---
