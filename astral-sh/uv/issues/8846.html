<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`tool.uv.sources` ignored for `uv pip sync` - astral-sh/uv #8846</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`tool.uv.sources` ignored for `uv pip sync`</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/8846">#8846</a>
        opened by <a href="https://github.com/nathanjmcdougall">@nathanjmcdougall</a>
        on 2024-11-05 21:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/nathanjmcdougall">@nathanjmcdougall</a> on 2024-11-05 21:53</div>
            <div class="timeline-body"><p>When using the following <code>pyproject.toml</code> file:</p>
<pre><code class="language-TOML">[project]
name = &quot;torchissue&quot;
version = &quot;0.1.0&quot;
dependencies = [&quot;torch&quot;]

[tool.uv.sources]
torch = { index = &quot;pytorch&quot; }

[[tool.uv.index]]
name = &quot;pytorch&quot;
url = &quot;https://download.pytorch.org/whl/cu121&quot;
explicit = true
</code></pre>
<p>This sequence of commands fails to install <code>torch</code>:</p>
<pre><code class="language-bash">uv venv
uv pip compile pyproject.toml --output-file requirements.txt
uv pip sync requirements.txt
</code></pre>
<p>Whereas <code>uv sync</code> succeeds. Since the <code>--no-sources</code> option for <code>uv pip sync</code> was not used, I would have expected a successful install.</p>
<p>Full debug trace with <code>uv pip sync requirements.txt --verbose</code>:</p>
<pre><code class="language-bash">DEBUG uv 0.4.30 (61ed2a236 2024-11-04)
DEBUG Searching for default Python interpreter in system path or `py` launcher
DEBUG Found `cpython-3.12.4-windows-x86_64-none` at `C:\Users\namc\Repositories\torchissue\.venv\Scripts\python.exe` (virtual environment)
DEBUG Using Python 3.12.4 environment at .venv
DEBUG Acquired lock for `.venv`
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.12.4
DEBUG Solving with target Python version: &gt;=3.12.4
DEBUG Adding direct dependency: filelock==3.16.1
DEBUG Adding direct dependency: fsspec==2024.10.0
DEBUG Adding direct dependency: jinja2==3.1.4
DEBUG Adding direct dependency: markupsafe==3.0.2
DEBUG Adding direct dependency: mpmath==1.3.0
DEBUG Adding direct dependency: networkx==3.4.2
DEBUG Adding direct dependency: setuptools==75.3.0
DEBUG Adding direct dependency: sympy==1.13.1
DEBUG Adding direct dependency: torch==2.5.1+cu121
DEBUG Adding direct dependency: typing-extensions==4.12.2
DEBUG Found fresh response for: https://pypi.org/simple/filelock/
DEBUG Found fresh response for: https://pypi.org/simple/jinja2/
DEBUG Searching for a compatible version of filelock (==3.16.1)
DEBUG Found fresh response for: https://pypi.org/simple/mpmath/
DEBUG Selecting: filelock==3.16.1 [compatible] (filelock-3.16.1-py3-none-any.whl)
DEBUG Found fresh response for: https://pypi.org/simple/sympy/
DEBUG Found fresh response for: https://pypi.org/simple/networkx/
DEBUG Found fresh response for: https://pypi.org/simple/typing-extensions/
DEBUG Found fresh response for: https://pypi.org/simple/markupsafe/
DEBUG Found fresh response for: https://pypi.org/simple/fsspec/
DEBUG Found fresh response for: https://pypi.org/simple/torch/
DEBUG Searching for a compatible version of fsspec (==2024.10.0)
DEBUG Found fresh response for: https://pypi.org/simple/setuptools/
DEBUG Selecting: fsspec==2024.10.0 [compatible] (fsspec-2024.10.0-py3-none-any.whl)
DEBUG Searching for a compatible version of jinja2 (==3.1.4)
DEBUG Selecting: jinja2==3.1.4 [compatible] (jinja2-3.1.4-py3-none-any.whl)
DEBUG Searching for a compatible version of markupsafe (==3.0.2)
DEBUG Selecting: markupsafe==3.0.2 [compatible] (MarkupSafe-3.0.2-cp312-cp312-win_amd64.whl)
DEBUG Searching for a compatible version of mpmath (==1.3.0)
DEBUG Selecting: mpmath==1.3.0 [compatible] (mpmath-1.3.0-py3-none-any.whl)
DEBUG Searching for a compatible version of networkx (==3.4.2)
DEBUG Selecting: networkx==3.4.2 [compatible] (networkx-3.4.2-py3-none-any.whl)
DEBUG Searching for a compatible version of setuptools (==75.3.0)
DEBUG Selecting: setuptools==75.3.0 [compatible] (setuptools-75.3.0-py3-none-any.whl)
DEBUG Searching for a compatible version of sympy (==1.13.1)
DEBUG Selecting: sympy==1.13.1 [compatible] (sympy-1.13.1-py3-none-any.whl)
DEBUG Searching for a compatible version of torch (==2.5.1+cu121)
DEBUG No compatible version found for: torch
  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of torch==2.5.1+cu121 and you require torch==2.5.1+cu121, we can conclude that your requirements     
      are unsatisfiable.
DEBUG Released lock at `C:\Users\namc\Repositories\torchissue\.venv\.lock`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-05 21:55</div>
            <div class="timeline-body"><p>The <code>requirements.txt</code> doesn't contain the <code>tool.uv.sources</code> information. I don't think there's any way to make that work -- it just can't be expressed in the <code>requirements.txt</code> format.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`uv.tool.sources` ignored for `uv pip sync`" to "`tool.uv.sources` ignored for `uv pip sync`" by @nathanjmcdougall on 2024-11-05 21:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nathanjmcdougall">@nathanjmcdougall</a> on 2024-11-05 21:57</div>
            <div class="timeline-body"><p>Ah - does that mean that the <code>uv pip sync</code> interface completely ignores <code>tool.uv.sources</code> information?
If so, I found this hard to find in the docs and the <code>--no-sources</code> flag being available threw me off.</p>
<p>My thinking is that it would still be possible for <code>uv pip sync</code> to use the sources information to supplement the requirements file being synced, although I haven't thought about it in detail.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 04:39:01 UTC
    </footer>
</body>
</html>
