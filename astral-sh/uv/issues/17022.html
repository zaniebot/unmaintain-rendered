<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERROR: pytorch-triton-xpu was not found in the package registry - astral-sh/uv #17022</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ERROR: pytorch-triton-xpu was not found in the package registry</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/17022">#17022</a>
        opened by <a href="https://github.com/H-E3">@H-E3</a>
        on 2025-12-08 08:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/H-E3">@H-E3</a></div>
            <div class="timeline-body">Question
<p>In order to utilize PyTorch for Intel GPUs, I have appended a new index to <code>pyproject.toml</code> as follows:</p>
<pre><code>[tool.uv.sources]
torch = [
  { index = &quot;pytorch-xpu&quot;, marker = &quot;sys_platform == &#x27;win32&#x27; or sys_platform == &#x27;linux&#x27;&quot; },
]
torchvision = [
  { index = &quot;pytorch-xpu&quot;, marker = &quot;sys_platform == &#x27;win32&#x27; or sys_platform == &#x27;linux&#x27;&quot; },
]
pytorch-triton-xpu = [
  { index = &quot;pytorch-xpu&quot;, marker = &quot;sys_platform == &#x27;win32&#x27; or sys_platform == &#x27;linux&#x27;&quot; },
]

[[tool.uv.index]]
name = &quot;pytorch-xpu&quot;
url = &quot;https://download.pytorch.org/whl/xpu&quot;
explicit = true
</code></pre>
<p>However, when I execute the command <code>uv add anypackage</code>, an error occurs:</p>
<pre><code>No solution found when resolving dependencies for split (markers: (python_full_version &gt;= &#x27;3.14&#x27; and sys_platform == &#x27;linux&#x27;) or (python_full_version &gt;= &#x27;3.14&#x27; and sys_platform == &#x27;win32&#x27;)):
Because pytorch-triton-xpu was not found in the package registry and torch==2.9.1+xpu depends on pytorch-triton-xpu==3.5.0, we can conclude that torch==2.9.1+xpu cannot be used.
      And because only the following versions of torch{sys_platform == &#x27;linux&#x27; or sys_platform == &#x27;win32&#x27;} are available:
          torch{sys_platform == &#x27;linux&#x27; or sys_platform == &#x27;win32&#x27;}&lt;2.9.1
          torch{sys_platform == &#x27;linux&#x27; or sys_platform == &#x27;win32&#x27;}==2.9.1+xpu
      and your project depends on torch{sys_platform == &#x27;linux&#x27; or sys_platform == &#x27;win32&#x27;}&gt;=2.9.1, we can conclude that your project&#x27;s requirements are unsatisfiable.
  help: If you want to add the package regardless of the failed resolution, provide the `--frozen` flag to skip locking and syncing.
</code></pre>
<p>Why does this problem occur and how can it be addressed?</p>
Platform
<p>windows 11 x64</p>
Version
<p>uv 0.9.16 (a63e5b62e 2025-12-06)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/H-E3">@H-E3</a> on 2025-12-08 08:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-10 03:02</div>
            <div class="timeline-body"><p>Are you able to include the complete <code>pyproject.toml</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-10 03:05</div>
            <div class="timeline-body"><p>Do you have <code>pytorch-triton-xpu</code> in the list of dependencies? We only apply indexes like that to explicit dependencies. This locks for me:</p>
<pre><code>[project]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.13&quot;
dependencies = [&quot;torch&quot;, &quot;torchvision&quot;, &quot;pytorch-triton-xpu&quot;]

[tool.uv.sources]
torch = [
  { index = &quot;pytorch-xpu&quot; },
]
torchvision = [
  { index = &quot;pytorch-xpu&quot; },
]
pytorch-triton-xpu = [
  { index = &quot;pytorch-xpu&quot; },
]

[[tool.uv.index]]
name = &quot;pytorch-xpu&quot;
url = &quot;https://download.pytorch.org/whl/xpu&quot;
explicit = true

[tool.uv]
environments = [&quot;sys_platform == &#x27;win32&#x27; or sys_platform == &#x27;linux&#x27;&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/H-E3">@H-E3</a> on 2025-12-10 09:17</div>
            <div class="timeline-body"><p>My dependencies list (automatically generated by uv) <strong>does not</strong> include <code>pytorch-triton-xpu</code>. Hereâ€™s the complete content of my <code>pyproject.toml</code> file:</p>
<pre><code>[project]
name = &quot;data-mining-exercise-2&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.14&quot;
dependencies = [
    &quot;addict&gt;=2.4.0&quot;,
    &quot;datasets&lt;=3.6.0&quot;,
    &quot;modelscope&gt;=1.32.0&quot;,
    &quot;numpy&gt;=2.3.3&quot;,
    &quot;pandas&gt;=2.3.3&quot;,
    &quot;peft&gt;=0.18.0&quot;,
    &quot;plotly&gt;=6.5.0&quot;,
    &quot;sentence-transformers&gt;=5.1.2&quot;,
    &quot;torch&gt;=2.9.1&quot;,
    &quot;transformers&gt;=4.57.3&quot;,
]

[tool.uv.sources]
torch = [
  { index = &quot;pytorch-xpu&quot;, marker = &quot;sys_platform == &#x27;win32&#x27; or sys_platform == &#x27;linux&#x27;&quot; },
]
torchvision = [
  { index = &quot;pytorch-xpu&quot;, marker = &quot;sys_platform == &#x27;win32&#x27; or sys_platform == &#x27;linux&#x27;&quot; },
]
pytorch-triton-xpu = [
  { index = &quot;pytorch-xpu&quot;, marker = &quot;sys_platform == &#x27;win32&#x27; or sys_platform == &#x27;linux&#x27;&quot; },
]

[[tool.uv.index]]
url = &quot;https://pypi.tuna.tsinghua.edu.cn/simple&quot;
default = true

[[tool.uv.index]]
name = &quot;pytorch-xpu&quot;
url = &quot;https://download.pytorch.org/whl/xpu&quot;
explicit = true
</code></pre>
<p><strong>Should I add <code>pytorch-triton-xpu</code> to the dependencies list manually?</strong></p>
<p>@charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-10 15:54</div>
            <div class="timeline-body"><p>Yeah, we don&#x27;t apply &quot;explicit&quot; index annotations to transitive dependencies, so it would need to be added as a direct dependency.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/H-E3">@H-E3</a> on 2025-12-11 01:20</div>
            <div class="timeline-body"><p>Thank you so much! It&#x27;s really helpful!
The <code>uv add</code> actually started working after I adjusted my dependency list to be like this:</p>
<pre><code>dependencies = [
    # ... other dependencies ...
    &quot;torch&gt;=2.9.1&quot;,
    &quot;pytorch-triton-xpu&gt;=3.3.0 ; sys_platform == &#x27;win32&#x27; or sys_platform == &#x27;linux&#x27;&quot;,
    # ... other dependencies ...
]
</code></pre>
<p>@charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-11 01:21</div>
            <div class="timeline-body"><p>Happy to help!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-11 01:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-11 01:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:41:14 UTC
    </footer>
</body>
</html>
