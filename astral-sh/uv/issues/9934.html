<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip install` fails while `pip install` works - astral-sh/uv #9934</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`uv pip install` fails while `pip install` works</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/9934">#9934</a>
        opened by <a href="https://github.com/ameya98">@ameya98</a>
        on 2024-12-16 12:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ameya98">@ameya98</a> on 2024-12-16 12:54</div>
            <div class="timeline-body"><p>I am trying to install <a href="http://emma-project.org/latest/">PyEMMA</a> in a new environment with <code>uv 0.5.5</code> on a Linux machine:</p>
<pre><code class="language-bash">pip install wheel
pip install pyemma
</code></pre>
<p>works, while:</p>
<pre><code class="language-bash">uv pip install wheel
uv pip install pyemma
</code></pre>
<p>errors out with the following:</p>
<pre><code>...
      running build_ext

      [stderr]
      /homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/_distutils/dist.py:261:
      UserWarning: Unknown distribution option: 'tests_require'
        warnings.warn(msg)
      Traceback (most recent call last):
        File &quot;&lt;string&gt;&quot;, line 11, in &lt;module&gt;
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/build_meta.py&quot;,
      line 435, in build_wheel
          return _build(['bdist_wheel'])
                 ^^^^^^^^^^^^^^^^^^^^^^^
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/build_meta.py&quot;,
      line 426, in _build
          return self._build_with_temp_dir(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/build_meta.py&quot;,
      line 407, in _build_with_temp_dir
          self.run_setup()
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/build_meta.py&quot;,
      line 522, in run_setup
          super().run_setup(setup_script=setup_script)
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/build_meta.py&quot;,
      line 320, in run_setup
          exec(code, locals())
        File &quot;&lt;string&gt;&quot;, line 330, in &lt;module&gt;
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/__init__.py&quot;,
      line 117, in setup
          return distutils.core.setup(**attrs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/_distutils/core.py&quot;,
      line 183, in setup
          return run_commands(dist)
                 ^^^^^^^^^^^^^^^^^^
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/_distutils/core.py&quot;,
      line 199, in run_commands
          dist.run_commands()
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/_distutils/dist.py&quot;,
      line 954, in run_commands
          self.run_command(cmd)
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/dist.py&quot;,
      line 995, in run_command
          super().run_command(command)
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/_distutils/dist.py&quot;,
      line 973, in run_command
          cmd_obj.run()
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/command/bdist_wheel.py&quot;,
      line 381, in run
          self.run_command(&quot;build&quot;)
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/_distutils/cmd.py&quot;,
      line 316, in run_command
          self.distribution.run_command(command)
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/dist.py&quot;,
      line 995, in run_command
          super().run_command(command)
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/_distutils/dist.py&quot;,
      line 973, in run_command
          cmd_obj.run()
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/_distutils/command/build.py&quot;,
      line 135, in run
          self.run_command(cmd_name)
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/_distutils/cmd.py&quot;,
      line 316, in run_command
          self.distribution.run_command(command)
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/dist.py&quot;,
      line 995, in run_command
          super().run_command(command)
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/_distutils/dist.py&quot;,
      line 973, in run_command
          cmd_obj.run()
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/command/build_ext.py&quot;,
      line 99, in run
          _build_ext.run(self)
        File
      &quot;/homefs/home/daigavaa/.cache/uv/builds-v0/.tmpTwnILr/lib/python3.11/site-packages/setuptools/_distutils/command/build_ext.py&quot;,
      line 359, in run
          self.build_extensions()
        File &quot;&lt;string&gt;&quot;, line 238, in build_extensions
        File
      &quot;/homefs/home/daigavaa/.cache/uv/sdists-v6/pypi/pyemma/2.5.12/3X5V7n5vYs0tJTpqXFUas/src/setup_util.py&quot;,
      line 142, in cpp_flag
          raise RuntimeError('Unsupported compiler ({})-- at least C++11
      support '
      RuntimeError: Unsupported compiler
      (&lt;distutils.unixccompiler.UnixCCompiler object at 0x7fb4b67270d0&gt;)--
      at least C++11 support is needed!
</code></pre>
<p>Any help would be very much appreciated!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dedebenui">@dedebenui</a> on 2024-12-16 14:08</div>
            <div class="timeline-body"><p>It seems that regular <code>pip</code> manages to install the package either by successfully compiling it or by finding a pre-compiled wheel. <code>uv</code> attempts to compile it but the build script cannot find a suitable C++ compiler.</p>
<p>I see no binary available on Windows, but if there are any on linux you can try to force and use it with <code>uv pip install pyemma --only-binary pyemma</code></p>
<p>Did you install regular <code>pip</code> in the environment? if yes, are you sure it is this one that is running?</p>
<pre><code class="language-bash">uv pip install pip
uv run -m pip install wheel pyemma
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ameya98">@ameya98</a> on 2024-12-16 16:30</div>
            <div class="timeline-body"><p>Thank you for your help, that indeed worked! I also had to do <code>uv run --no-project ...</code> since I was working in a different virtual environment than my project default.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ameya98 on 2024-12-16 16:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:24 UTC
    </footer>
</body>
</html>
