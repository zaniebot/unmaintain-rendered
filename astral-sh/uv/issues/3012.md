```yaml
number: 3012
title: normalize_path breaks relative python interpreters
type: issue
state: closed
author: konstin
labels:
  - bug
assignees: []
created_at: 2024-04-12T09:25:14Z
updated_at: 2024-04-12T18:48:04Z
url: https://github.com/astral-sh/uv/issues/3012
synced_at: 2026-01-10T01:57:06Z
```

# normalize_path breaks relative python interpreters

---

_Issue opened by @konstin on 2024-04-12 09:25_

`-p`/`--python` with relative paths is broken due to using `normalize_path`, which changes the path rather than just normalizing it.

```
$ cargo run -q -- venv -p ../cpython/python .venv3.13 -vv
 uv_interpreter::find_python::find_requested_python request=../cpython/python
      0.000439s   0ms DEBUG uv_interpreter::find_python Starting interpreter discovery for Python @ `../cpython/python`
[crates/uv-interpreter/src/find_python.rs:55:46] request = "../cpython/python"
[crates/uv-interpreter/src/find_python.rs:55:26] normalize_path(dbg!(request)) = "cpython/python"
  × failed to canonicalize path `cpython/python`
  ╰─▶ No such file or directory (os error 2)
```

---

_Label `bug` added by @konstin on 2024-04-12 09:25_

---

_Assigned to @charliermarsh by @charliermarsh on 2024-04-12 13:55_

---

_Comment by @charliermarsh on 2024-04-12 13:55_

I suppose I can take this.

---

_Comment by @charliermarsh on 2024-04-12 13:59_

It looks like `normalize_path` assumes the argument path is absolute. I'll fix and document.

---

_Referenced in [astral-sh/uv#3013](../../astral-sh/uv/pulls/3013.md) on 2024-04-12 14:25_

---

_Closed by @charliermarsh on 2024-04-12 18:48_

---
