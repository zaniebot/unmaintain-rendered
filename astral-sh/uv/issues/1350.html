<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip compile` requires explicit `-o requirements.txt` unlike `pip-compile` - astral-sh/uv #1350</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`uv pip compile` requires explicit `-o requirements.txt` unlike `pip-compile`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1350">#1350</a>
        opened by <a href="https://github.com/ThiefMaster">@ThiefMaster</a>
        on 2024-02-15 21:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ThiefMaster">@ThiefMaster</a> on 2024-02-15 21:18</div>
            <div class="timeline-body"><p>Not only does this require some repetition on the commandline (specifying both filenames), but it also makes it easy to get the wrong behavior when using e.g. shell redirection instead of <code>-o</code> because it won't take the existing requirements file into account.</p>
<hr />
<p>With pip-tools I can do this:</p>
<pre><code>pip-compile -q &amp;&amp; pip-compile -q requirements.dev.in</code></pre>
<p>and it works great:</p>
<ul>
<li>When I added a new dependency to my <code>requirements[.dev].in</code>, it updates the .txt as expected</li>
<li>If I didn't do anything there are no changes to the files since I did not request any upgrades nor is there anything else to change</li>
</ul>
<p>With uv I now need to do this (twice as long!):</p>
<pre><code>uv pip compile -o requirements.txt requirements.in &amp;&amp; uv pip compile -o requirements.dev.txt requirements.dev.in</code></pre>
<p>FYI, all my tests are done on the requirements files of the <a href="https://github.com/indico/indico/">indico/indico</a> repo.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @charliermarsh on 2024-02-15 21:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-15 21:27</div>
            <div class="timeline-body"><p>I actually went back and forth on this -- I personally don't like this automatic behavior from pip-tools but I might be part of a small minority. @konstin strongly prefers it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ThiefMaster">@ThiefMaster</a> on 2024-02-15 21:30</div>
            <div class="timeline-body"><p>How about an <code>uv pip compile --auto</code> that looks for <code>requirements*.{in,txt}</code>, checks if there are dependencies between them (e.g. <code>-c requirements.txt</code> in a <code>requirements.something.in</code>), and then compiles them in the proper order?</p>
<p>This would also be REALLY amazing for upgrades. Imagine just being able to <code>uv compile --auto --upgrade-package somepackage</code> if you want to upgrade that package :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1457.html">astral-sh/uv#1457</a> on 2024-02-16 09:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1875.html">astral-sh/uv#1875</a> on 2024-02-22 16:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Julian">@Julian</a> on 2024-04-22 07:04</div>
            <div class="timeline-body"><p>I also ran into this -- I actually agree that the <code>pip-compile</code> behavior is worse and wouldn't have done it that way myself, but given it exists and that I suspect most users will be moving from it I'd have likely erred on the side of preserving it. It's probably not a good argument now that <code>uv</code> has been out for a little while though.</p>
<p>In my case given I support both <code>uv</code> and non-<code>uv</code> in my projects' noxfiles at the minute I basically do <a href="https://github.com/bowtie-json-schema/bowtie/blob/ff7b516db5c29b32dd47e979fc6961a2b5e9da9f/noxfile.py#L368-L377">this</a>.</p>
<p>I do think it's somewhat surprising behavior, so I would perhaps suggest considering mentioning it more prominently (in both the README and <code>uv pip compile --help</code> maybe).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-26 01:04</div>
            <div class="timeline-body"><p>I think this is unlikely to change now. It's also documented in the <code>PIP_COMPATIBILITY.md</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-06-26 01:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:17 UTC
    </footer>
</body>
</html>
