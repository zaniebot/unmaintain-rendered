<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv fails to resolve dependencies on tensorrt==8.6.1.post1 - astral-sh/uv #1562</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv fails to resolve dependencies on tensorrt==8.6.1.post1</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/1562">#1562</a>
        opened by <a href="https://github.com/Di-Is">@Di-Is</a>
        on 2024-02-17 02:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Di-Is">@Di-Is</a></div>
            <div class="timeline-body"><p>uv fails to resolve dependencies on tensorrt==8.6.1.post1.</p>
executed command
<pre><code>uv pip compile -v requirements.in
</code></pre>
requirements.in
<pre><code>tensorrt==8.6.1.post1
</code></pre>
environment
<p>uv version: 0.1.3
platform: Ubuntu22.04 (amd64)</p>
Error log
<pre><code>error: Failed to download and build: tensorrt==8.6.1.post1
  Caused by: Failed to build: tensorrt==8.6.1.post1
  Caused by: Build backend failed to determine metadata through `prepare_metadata_for_build_wheel`:
--- stdout:

--- stderr:
Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 10, in &lt;module&gt;
  File &quot;/tmp/.tmptfY9gE/.venv/lib/python3.11/site-packages/setuptools/build_meta.py&quot;, line 366, in prepare_metadata_for_build_wheel
    self.run_setup()
  File &quot;/tmp/.tmptfY9gE/.venv/lib/python3.11/site-packages/setuptools/build_meta.py&quot;, line 480, in run_setup
    super().run_setup(setup_script=setup_script)
  File &quot;/tmp/.tmptfY9gE/.venv/lib/python3.11/site-packages/setuptools/build_meta.py&quot;, line 311, in run_setup
    exec(code, locals())
  File &quot;&lt;string&gt;&quot;, line 103, in &lt;module&gt;
  File &quot;&lt;string&gt;&quot;, line 96, in parent_command_line
  File &quot;/usr/local/lib/python3.11/subprocess.py&quot;, line 466, in check_output
    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/usr/local/lib/python3.11/subprocess.py&quot;, line 548, in run
    with Popen(*popenargs, **kwargs) as process:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/usr/local/lib/python3.11/subprocess.py&quot;, line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File &quot;/usr/local/lib/python3.11/subprocess.py&quot;, line 1950, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
FileNotFoundError: [Errno 2] No such file or directory: &#x27;ps&#x27;
---
root@d97baf896efc:/conf# uv pip compile -v requirements.in
 uv::requirements::from_source source=requirements.in
    0.001766s DEBUG uv_interpreter::interpreter Resolved python3 to /usr/local/bin/python3
    0.001802s DEBUG uv_interpreter::interpreter Using cached markers for: /usr/local/bin/python3
    0.001805s DEBUG uv::commands::pip_compile Using Python 3.11.7 interpreter at /usr/local/bin/python3 for builds
 uv_client::flat_index::from_entries 
 uv_resolver::resolver::solve 
      0.002439s   0ms DEBUG uv_resolver::resolver Solving with target Python version 3.11.7
   uv_resolver::resolver::choose_version package=root
   uv_resolver::resolver::get_dependencies package=root, version=0a0.dev0
        0.002465s   0ms DEBUG uv_resolver::resolver Adding direct dependency: tensorrt==8.6.1.post1
   uv_resolver::resolver::choose_version package=tensorrt
     uv_resolver::resolver::package_wait package_name=tensorrt
 uv_resolver::resolver::process_request request=Versions tensorrt
   uv_client::registry_client::simple_api package=tensorrt
     uv_client::cached_client::get_cacheable 
       uv_client::cached_client::read_and_parse_cache file=/root/.cache/uv/simple-v0/pypi/tensorrt.rkyv
 uv_resolver::resolver::process_request request=Prefetch tensorrt ==8.6.1.post1
          0.003904s   1ms DEBUG uv_client::cached_client Found fresh response for: https://pypi.org/simple/tensorrt/
 uv_resolver::version_map::from_metadata 
   uv_distribution::distribution_database::get_or_build_wheel_metadata dist=tensorrt==8.6.1.post1
     uv_client::cached_client::get_serde 
       uv_client::cached_client::get_cacheable 
         uv_client::cached_client::read_and_parse_cache file=/root/.cache/uv/built-wheels-v0/pypi/tensorrt/8.6.1.post1/manifest.msgpack
        0.004128s   1ms DEBUG uv_resolver::resolver Searching for a compatible version of tensorrt (==8.6.1.post1)
        0.004133s   1ms DEBUG uv_resolver::resolver Selecting: tensorrt==8.6.1.post1 (tensorrt-8.6.1.post1.tar.gz)
   uv_resolver::resolver::get_dependencies package=tensorrt, version=8.6.1.post1
     uv_resolver::resolver::distributions_wait package_id=tensorrt-8.6.1.post1
            0.004349s   0ms DEBUG uv_client::cached_client Found fresh response for: https://files.pythonhosted.org/packages/46/08/da496b4f20890b6f717f159bbdda98e9248b560e712aa22cd9bb1daafe15/tensorrt-8.6.1.post1.tar.gz
     uv_distribution::source::build_source_dist_metadata 
          0.004646s   0ms DEBUG uv_distribution::source Preparing metadata for: tensorrt==8.6.1.post1
       uv_dispatch::setup_build package_id=&quot;tensorrt==8.6.1.post1&quot;, subdirectory=None
         uv_resolver::resolver::solve 
              0.005012s   0ms DEBUG uv_resolver::resolver Solving with target Python version 3.11.7
           uv_resolver::resolver::choose_version package=root
           uv_resolver::resolver::get_dependencies package=root, version=0a0.dev0
                0.005027s   0ms DEBUG uv_resolver::resolver Adding direct dependency: setuptools&gt;=40.8.0
                0.005030s   0ms DEBUG uv_resolver::resolver Adding direct dependency: wheel*
           uv_resolver::resolver::choose_version package=setuptools
             uv_resolver::resolver::package_wait package_name=setuptools
         uv_resolver::resolver::process_request request=Versions setuptools
           uv_client::registry_client::simple_api package=setuptools
             uv_client::cached_client::get_cacheable 
               uv_client::cached_client::read_and_parse_cache file=/root/.cache/uv/simple-v0/pypi/setuptools.rkyv
         uv_resolver::resolver::process_request request=Versions wheel
           uv_client::registry_client::simple_api package=wheel
             uv_client::cached_client::get_cacheable 
               uv_client::cached_client::read_and_parse_cache file=/root/.cache/uv/simple-v0/pypi/wheel.rkyv
         uv_resolver::resolver::process_request request=Prefetch wheel *
         uv_resolver::resolver::process_request request=Prefetch setuptools &gt;=40.8.0
                  0.005882s   0ms DEBUG uv_client::cached_client Found fresh response for: https://pypi.org/simple/wheel/
 uv_resolver::version_map::from_metadata 
           uv_distribution::distribution_database::get_or_build_wheel_metadata dist=wheel==0.42.0
             uv_client::registry_client::wheel_metadata built_dist=wheel==0.42.0
               uv_client::cached_client::get_serde 
                 uv_client::cached_client::get_cacheable 
                   uv_client::cached_client::read_and_parse_cache file=/root/.cache/uv/wheels-v0/pypi/wheel/wheel-0.42.0-py3-none-any.msgpack
                      0.006339s   0ms DEBUG uv_client::cached_client Found fresh response for: https://files.pythonhosted.org/packages/c7/c3/55076fc728723ef927521abaa1955213d094933dc36d4a2008d5101e1af5/wheel-0.42.0-py3-none-any.whl
                  0.007274s   2ms DEBUG uv_client::cached_client Found fresh response for: https://pypi.org/simple/setuptools/
 uv_resolver::version_map::from_metadata 
           uv_distribution::distribution_database::get_or_build_wheel_metadata dist=setuptools==69.1.0
             uv_client::registry_client::wheel_metadata built_dist=setuptools==69.1.0
               uv_client::cached_client::get_serde 
                 uv_client::cached_client::get_cacheable 
                   uv_client::cached_client::read_and_parse_cache file=/root/.cache/uv/wheels-v0/pypi/setuptools/setuptools-69.1.0-py3-none-any.msgpack
                0.007641s   2ms DEBUG uv_resolver::resolver Searching for a compatible version of setuptools (&gt;=40.8.0)
                0.007645s   2ms DEBUG uv_resolver::resolver Selecting: setuptools==69.1.0 (setuptools-69.1.0-py3-none-any.whl)
           uv_resolver::resolver::get_dependencies package=setuptools, version=69.1.0
             uv_resolver::resolver::distributions_wait package_id=setuptools-69.1.0
                      0.007982s   0ms DEBUG uv_client::cached_client Found fresh response for: https://files.pythonhosted.org/packages/bb/0a/203797141ec9727344c7649f6d5f6cf71b89a6c28f8f55d4f18de7a1d352/setuptools-69.1.0-py3-none-any.whl
           uv_resolver::resolver::choose_version package=wheel
             uv_resolver::resolver::package_wait package_name=wheel
                0.008038s   0ms DEBUG uv_resolver::resolver Searching for a compatible version of wheel (*)
                0.008041s   0ms DEBUG uv_resolver::resolver Selecting: wheel==0.42.0 (wheel-0.42.0-py3-none-any.whl)
           uv_resolver::resolver::get_dependencies package=wheel, version=0.42.0
             uv_resolver::resolver::distributions_wait package_id=wheel-0.42.0
         uv_dispatch::install resolution=&quot;setuptools==69.1.0, wheel==0.42.0&quot;, venv=&quot;/tmp/.tmpRr6p9C/.venv&quot;
              0.008074s   0ms DEBUG uv_dispatch Installing in setuptools==69.1.0, wheel==0.42.0 in /tmp/.tmpRr6p9C/.venv
              0.008117s   0ms DEBUG uv_installer::plan Requirement already cached: setuptools==69.1.0
              0.008130s   0ms DEBUG uv_installer::plan Requirement already cached: wheel==0.42.0
              0.008135s   0ms DEBUG uv_dispatch Installing build requirements: setuptools==69.1.0, wheel==0.42.0
           uv_installer::installer::install num_wheels=2
          0.020606s  15ms DEBUG uv_build Calling `setuptools.build_meta:__legacy__.prepare_metadata_for_build_wheel()`
       uv_build::run_python_script script=&quot;prepare_metadata_for_build_wheel&quot;, python_version=3.11.7
error: Failed to download and build: tensorrt==8.6.1.post1
  Caused by: Failed to build: tensorrt==8.6.1.post1
  Caused by: Build backend failed to determine metadata through `prepare_metadata_for_build_wheel`:
--- stdout:

--- stderr:
Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 10, in &lt;module&gt;
  File &quot;/tmp/.tmpRr6p9C/.venv/lib/python3.11/site-packages/setuptools/build_meta.py&quot;, line 366, in prepare_metadata_for_build_wheel
    self.run_setup()
  File &quot;/tmp/.tmpRr6p9C/.venv/lib/python3.11/site-packages/setuptools/build_meta.py&quot;, line 480, in run_setup
    super().run_setup(setup_script=setup_script)
  File &quot;/tmp/.tmpRr6p9C/.venv/lib/python3.11/site-packages/setuptools/build_meta.py&quot;, line 311, in run_setup
    exec(code, locals())
  File &quot;&lt;string&gt;&quot;, line 103, in &lt;module&gt;
  File &quot;&lt;string&gt;&quot;, line 96, in parent_command_line
  File &quot;/usr/local/lib/python3.11/subprocess.py&quot;, line 466, in check_output
    return run(*popenargs, stdout=PIPE, timeout=timeout, check=True,
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/usr/local/lib/python3.11/subprocess.py&quot;, line 548, in run
    with Popen(*popenargs, **kwargs) as process:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File &quot;/usr/local/lib/python3.11/subprocess.py&quot;, line 1026, in __init__
    self._execute_child(args, executable, preexec_fn, close_fds,
  File &quot;/usr/local/lib/python3.11/subprocess.py&quot;, line 1950, in _execute_child
    raise child_exception_type(errno_num, err_msg, err_filename)
FileNotFoundError: [Errno 2] No such file or directory: &#x27;ps&#x27;
---
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-17 02:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-17 04:02</div>
            <div class="timeline-body"><p>Hm this compiles for me on amd64 linux and arm64 macos</p>
<pre><code>$ echo &quot;tensorrt==8.6.1.post1&quot; | uv pip compile -  
Resolved 1 package in 792ms
</code></pre>
<p>Are you missing <code>ps</code>?</p>
<pre><code>$ which ps
/usr/bin/ps
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-reproduction</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-17 04:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Di-Is">@Di-Is</a> on 2024-02-17 14:07</div>
            <div class="timeline-body"><p>@zanieb</p>
<p>I checked and the ps command does not exist in my environment (docker python container).
I installed the ps command and successfully resolved the dependency.
I close the issue as it was specific to my environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Di-Is">@Di-Is</a> on 2024-02-17 14:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-17 14:18</div>
            <div class="timeline-body"><p>@Di-Is - Thanks for following up :)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:29:36 UTC
    </footer>
</body>
</html>
