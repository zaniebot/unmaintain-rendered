<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv fails to respect `python-requires` of a package - astral-sh/uv #10916</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv fails to respect <code>python-requires</code> of a package</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/10916">#10916</a>
        opened by <a href="https://github.com/PhilipVinc">@PhilipVinc</a>
        on 2025-01-23 22:14
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/PhilipVinc">@PhilipVinc</a> on 2025-01-23 22:14</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I've recently been trying to install the pypi package <code>quspin-extensions</code>, which requires python&lt;3.13</p>
<p>However, I did not notice this at first, and was working in a python 3.13 project and uv happily installed the <code>sdist</code> even if he should have errored.</p>
<p>Trying to install it with pip in a blank python 3.13 environment yields the following message</p>
<pre><code class="language-python">.venv ❯ python -m pip install --verbose --force-reinstall --no-cache quspin_extensions
Using pip 24.3.1 from /Users/filippo.vicentini/Dropbox/Ricerca/Scratch/pyscf-numpy/.venv/lib/python3.13/site-packages/pip (python 3.13)
  Link requires a different Python (3.13.1 not in: '&lt;3.13,&gt;=3.9'): https://files.pythonhosted.org/packages/03/b0/9d43a52069ecea0422455bbf205d61af27e0f813ff598e18237b6422fc48/quspin_extensions-0.1.3.tar.gz (from https://pypi.org/simple/quspin-extensions/) (requires-python:&lt;3.13,&gt;=3.9)
  Link requires a different Python (3.13.1 not in: '&lt;3.13,&gt;=3.9'): https://files.pythonhosted.org/packages/fb/4e/92514c2f15023dc745a4194241f2323ee46676ab3fe656a1efc31f7b90c0/quspin_extensions-0.1.4.tar.gz (from https://pypi.org/simple/quspin-extensions/) (requires-python:&lt;3.13,&gt;=3.9)
  Link requires a different Python (3.13.1 not in: '&lt;3.13,&gt;=3.9'): https://files.pythonhosted.org/packages/2b/aa/7452ac4f62e5b1b57e6a55d35923026c92dd19a02fe5a18686a0cbaa3612/quspin_extensions-0.1.6.tar.gz (from https://pypi.org/simple/quspin-extensions/) (requires-python:&lt;3.13,&gt;=3.9)
ERROR: Ignored the following versions that require a different python version: 0.1.3 Requires-Python &lt;3.13,&gt;=3.9; 0.1.4 Requires-Python &lt;3.13,&gt;=3.9; 0.1.6 Requires-Python &lt;3.13,&gt;=3.9
ERROR: Could not find a version that satisfies the requirement quspin_extensions (from versions: none)
ERROR: No matching distribution found for quspin_extensions
</code></pre>
<p>instead uv does the following</p>
<pre><code class="language-python">❯ cat pyproject.toml
[project]
name = &quot;pyscf-numpy&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
    &quot;quspin-extensions&gt;=0.1.6&quot;,
]
</code></pre>
<p>sync</p>
<pre><code class="language-python">❯ uv sync
Using CPython 3.13.1
Creating virtual environment at: .venv
Resolved 5 packages in 1ms
Installed 4 packages in 34ms
 + gmpy2==2.2.1
 + numpy==2.1.3
 + quspin-extensions==0.1.6
 + scipy==1.15.1
</code></pre>
<p>here there is the verbose installation log https://gist.github.com/PhilipVinc/630f528b72a6e1c56345add6eb91c270</p>
<h3>Platform</h3>
<p>Darwin 24.2.0 arm64</p>
<h3>Version</h3>
<p>uv 0.5.23 (ba42467f1 2025-01-23)</p>
<h3>Python version</h3>
<p>Python 3.13.1</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @PhilipVinc on 2025-01-23 22:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-23 22:17</div>
            <div class="timeline-body"><p>Thanks for all the details in the report! Unfortunately this is by-design and a duplicate. Please see https://github.com/astral-sh/uv/issues/4022 (and the linked issues there).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @zanieb on 2025-01-23 22:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @zanieb on 2025-01-23 22:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-01-29 16:13</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:54 UTC
    </footer>
</body>
</html>
