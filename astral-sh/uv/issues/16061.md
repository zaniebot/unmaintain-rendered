```yaml
number: 16061
title: uv installs abi3 packages for versions outside of what is specified in requires-python
type: issue
state: open
author: IljaManakov
labels:
  - duplicate
  - question
assignees: []
created_at: 2025-09-29T07:57:48Z
updated_at: 2025-10-06T10:15:48Z
url: https://github.com/astral-sh/uv/issues/16061
synced_at: 2026-01-10T01:57:35Z
```

# uv installs abi3 packages for versions outside of what is specified in requires-python

---

_Issue opened by @IljaManakov on 2025-09-29 07:57_

### Summary

I was recently dealing with a segfault when working PySide6, when I noticed that uv had installed the package for an my 3.12 interpreter despite the require-python listing  "<3.12, >3.7".
In the end this also was the source of the segfault. Switching to a 3.11 interpreter worked just fine.

Steps to reproduce:
1. Create a new venv with Python 3.12
2. Install "PySide6==6.4.2"
3. `cat ${VIRTUAL_ENV}/lib/python3.12/site-packages/PySide6-6.4.2.dist-info/METADATA` shows "Requires-Python: <3.12,>=3.7"
4. `import PySide6` -> KABOOM

For comparison, doing the same process with `pip`, it will not allow the package to be installed, correctly stating the supported versions:
```sh
ERROR: Ignored the following versions that require a different python version: 6.0.0 Requires-Python >=3.6, <3.10; 6.0.0a1.dev1606911628 Requires-Python >=3.6, <3.10; 6.0.1 Requires-Python >=3.6, <3.10; 6.0.2 Requires-Python >=3.6, <3.10; 6.0.3 Requires-Python >=3.6, <3.10; 6.0.4 Requires-Python >=3.6, <3.10; 6.1.0 Requires-Python >=3.6, <3.10; 6.1.1 Requires-Python >=3.6, <3.10; 6.1.2 Requires-Python >=3.6, <3.10; 6.1.3 Requires-Python >=3.6, <3.10; 6.2.0 Requires-Python >=3.6, <3.11; 6.2.1 Requires-Python >=3.6, <3.11; 6.2.2 Requires-Python >=3.6, <3.11; 6.2.2.1 Requires-Python >=3.6, <3.11; 6.2.3 Requires-Python >=3.6, <3.11; 6.2.4 Requires-Python >=3.6, <3.11; 6.3.0 Requires-Python <3.11,>=3.6; 6.3.1 Requires-Python <3.11,>=3.6; 6.3.2 Requires-Python <3.11,>=3.6; 6.4.0.1 Requires-Python <3.12,>=3.7; 6.4.1 Requires-Python <3.12,>=3.7; 6.4.2 Requires-Python <3.12,>=3.7; 6.4.3 Requires-Python <3.12,>=3.7; 6.5.0 Requires-Python <3.12,>=3.7; 6.5.1 Requires-Python <3.12,>=3.7; 6.5.1.1 Requires-Python <3.12,>=3.7; 6.5.2 Requires-Python <3.12,>=3.7; 6.5.3 Requires-Python <3.12,>=3.7                                                                                                                                  
ERROR: Could not find a version that satisfies the requirement PySide6==6.4.2 (from versions: 6.6.0, 6.6.1, 6.6.2, 6.6.3, 6.6.3.1, 6.7.0, 6.7.1, 6.7.2, 6.7.3, 6.8.0, 6.8.0.1, 6.8.0.2, 6.8.1, 6.8.1.1, 6.8.2, 6.8.2.1, 6.8.3, 6.9.0, 6.9.1, 6.9.2)                                                                                                           
ERROR: No matching distribution found for PySide6==6.4.2 
```

Although a different issue than [#16012](https://github.com/astral-sh/uv/issues/16012), it might be related.

### Platform

Ubuntu 24.04

### Version

uv 0.8.5

### Python version

Python 3.12.11

---

_Label `bug` added by @IljaManakov on 2025-09-29 07:57_

---

_Comment by @konstin on 2025-09-29 09:53_

Please see https://github.com/astral-sh/uv/pull/15927 on why we ignore upper bounds on `requires-python`.

---

_Label `bug` removed by @konstin on 2025-09-29 09:53_

---

_Label `question` added by @konstin on 2025-09-29 09:53_

---

_Label `duplicate` added by @zanieb on 2025-09-30 00:10_

---

_Comment by @IljaManakov on 2025-10-02 11:36_

So do I understand correctly that there is no intention to fix this for packages with binary extenstion, even though it creates a situation where you segfault on package import?

---

_Comment by @konstin on 2025-10-06 10:15_

For this package specifically, it is tagged as `cp39-abi3-<platform>`, which means that it is only using abi3 interface and thereby  forward compatible with all Python 3.x versions, the package must be using other APIs too, otherwise it would not crash, i.e. the package is tagged incorrectly. For the general discussion, please see https://github.com/astral-sh/uv/pull/15927 and the linked threads for extensive discussion of the trade-offs and why `requires-python` can't be properly used as upper bound as it stand, and what the alternatives are. This is usually only a problem with source distributions, which can use build time checks, a wheel crash as we see here only happens when misusing abi3.

---
