<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make `CachedEnvironment` robust to concurrent modifications - astral-sh/uv #5503</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make <code>CachedEnvironment</code> robust to concurrent modifications</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/5503">#5503</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-07-27 01:28
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><p>Right now, it&#x27;s possible that we&#x27;d modify an environment that&#x27;s in-use by another process.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-27 01:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-27 01:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-27 01:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-27 02:08</div>
            <div class="timeline-body"><p>I think I know what to do here but it&#x27;s slightly tricky. We might be able to reuse it for tool installs though. We want to create the environment in one location, then relocate it to the final location (probably by symlinking so that it&#x27;s atomic). But we can&#x27;t do this naively because we need the interpreter in any installed scripts to use the path of the final location.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 00:32</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:32:18 UTC
    </footer>
</body>
</html>
