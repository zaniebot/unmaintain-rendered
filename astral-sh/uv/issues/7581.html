<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bug/Feature with uv pip install from github - astral-sh/uv #7581</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Bug/Feature with uv pip install from github</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/7581">#7581</a>
        opened by <a href="https://github.com/freand76">@freand76</a>
        on 2024-09-20 11:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/freand76">@freand76</a> on 2024-09-20 11:47</div>
            <div class="timeline-body"><p>When using <strong>uv pip install</strong> from a github repository, a working SHA from any of the repository forks will be picked up as valid.</p>
<p><em>Example:</em></p>
<p>uv pip install &quot;python-usbtmc @ git+https://github.com/python-ivi/python-usbtmc@7c15a9d2138160024c4069ecf4b2edc33f15e40e&quot;</p>
<p><em>Problem/Feature:</em></p>
<p>The repo <strong>https://github.com/python-ivi/python-usbtmc</strong> does not contain a commit with the SHA <strong>7c15a9d2138160024c4069ecf4b2edc33f15e40e</strong> but the fork <strong>https://github.com/FOSSBOSS/python-usbtmc</strong> does, i.e. <strong>uv pip install</strong> will install a packet from another repository than expected.</p>
<p>Tested on uv 0.4.10</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-09-20 14:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 14:09</div>
            <div class="timeline-body"><p>I'll take a look at this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 15:03</div>
            <div class="timeline-body"><p>I think this is a consequence of GitHub's storage model for repositories. All GitHub repositories and their forks share the same backing storage, so you can access commits from forks through any sibling repository. For example, you can see that commit here: https://github.com/python-ivi/python-usbtmc/commit/7c15a9d2138160024c4069ecf4b2edc33f15e40e.</p>
<p>I need to look into whether other installers also behave this way, and what we can do to avoid it (if desired).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/freand76">@freand76</a> on 2024-09-20 15:11</div>
            <div class="timeline-body"><p>As I wrote in the heading it might be a feature, but at the same time it might also be a security issue in this (maybe unlikely) scenario:</p>
<p><code>uv pip install &lt;trusted package&gt; @ &lt;link to trusted git repository&gt;@&lt;SHA to an evil forked repository&gt;</code></p>
<p>Great that you will look into this!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 15:18</div>
            <div class="timeline-body"><p>I agree with your assessment, though it may be somewhat unsolvable / inherent to GitHub. If you run this, you will successfully fetch the commit in that fork:</p>
<pre><code>git fetch --force --update-head-ok https://github.com/python-ivi/python-usbtmc +7c15a9d2138160024c4069ecf4b2edc33f15e40e:refs/remotes/origin/HEAD
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/freand76">@freand76</a> on 2024-09-20 15:21</div>
            <div class="timeline-body"><p>Interesting, then it is out of our / your hands.</p>
<p>Issue can be closed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-20 15:21</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:00 UTC
    </footer>
</body>
</html>
