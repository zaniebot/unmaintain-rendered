<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv self update causes ''GitHub API rate limit exceeded.&quot; error - astral-sh/uv #10557</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>uv self update causes ''GitHub API rate limit exceeded.&quot; error</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/10557">#10557</a>
        opened by <a href="https://github.com/AmineDjeghri">@AmineDjeghri</a>
        on 2025-01-13 08:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/AmineDjeghri">@AmineDjeghri</a> on 2025-01-13 08:20</div>
            <div class="timeline-body"><p>A preview of the error
<img src="https://github.com/user-attachments/assets/32718b3c-7479-4314-83ea-5e66c6572e26" alt="Image" /></p>
<p>Edit : more information</p>
<ul>
<li>UV version : 0.5.17</li>
<li>Operating System : MacOS 14</li>
<li>Command and output :  check the image</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nbaju1">@nbaju1</a> on 2025-01-13 08:33</div>
            <div class="timeline-body"><p><a href="https://github.com/astral-sh/uv/issues/9452">Before posting in the issue tracker</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AmineDjeghri">@AmineDjeghri</a> on 2025-01-13 08:40</div>
            <div class="timeline-body"><p>@nbaju1 Thanks. I updated the description of the issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AmineDjeghri">@AmineDjeghri</a> on 2025-01-13 08:41</div>
            <div class="timeline-body"><p>Update : now for example. It works</p>
<p><img width="821" alt="Image" src="https://github.com/user-attachments/assets/675b7967-8e96-46a0-aabf-99ad9d86235a" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cb-robot">@cb-robot</a> on 2025-01-13 09:37</div>
            <div class="timeline-body"><p>GitHub rate limits are based on the user making the requests (in this case, you), not on the project being accessed. I'm guessing uv is implementing <code>self update</code> by hitting the GitHub API, and you've just run it too many times in a short period of time or are running other things that are hitting the API from your IP address.</p>
<p>The <a href="https://docs.github.com/en/rest/using-the-rest-api/rate-limits-for-the-rest-api?apiVersion=2022-11-28">limit for unauthenticated users</a> is 60 API requests per hour. The limit for authenticated users is massively higher, 5000 per hour. So the only thing <code>uv</code> could really do here would be to allow you to specify a GitHub API token for it to use when accessing the GitHub API.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/blueraft">@blueraft</a> on 2025-01-13 09:43</div>
            <div class="timeline-body"><p>You can specify a token using <code>--token</code> option.</p>
<pre><code class="language-console">‚ùØ uv self update --help
...
Options:
      --token &lt;TOKEN&gt;  A GitHub token for authentication. A token is not required but can be used to reduce the chance of encountering rate limits [env: UV_GITHUB_TOKEN=]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-01-13 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-01-13 18:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zorion">@zorion</a> on 2025-04-25 09:52</div>
            <div class="timeline-body"><blockquote>
<p>GitHub rate limits are based on the user making the requests (in this case, you), not on the project being accessed. I'm guessing uv is implementing <code>self update</code> by hitting the GitHub API, and you've just run it too many times in a short period of time or are running other things that are hitting the API from your IP address.</p>
<p>The <a href="https://docs.github.com/en/rest/using-the-rest-api/rate-limits-for-the-rest-api?apiVersion=2022-11-28">limit for unauthenticated users</a> is 60 API requests per hour. The limit for authenticated users is massively higher, 5000 per hour. So the only thing <code>uv</code> could really do here would be to allow you to specify a GitHub API token for it to use when accessing the GitHub API.</p>
</blockquote>
<p>I ran <code>uv self update</code> on March, the 31st. (so my version is v0.6.11)</p>
<p>The first time I ran it today I received the &quot;rate limit&quot;.</p>
<p>I'm not aware of having sent another 59 requests to github today, perhaps I have some software doing it for me, otherwise, I wonder how many requests perform <code>uv self update</code>...</p>
<p>The following image doesn't show my &quot;first&quot; attempt (after 25 days) but some retries.</p>
<p><img width="587" alt="Image" src="https://github.com/user-attachments/assets/234c3ad2-ff0b-445b-a3f6-7621fffaff85" /></p>
<p>I may try the &quot;TOKEN&quot; approach</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zorion">@zorion</a> on 2025-04-25 10:00</div>
            <div class="timeline-body"><p><img width="306" alt="Image" src="https://github.com/user-attachments/assets/8d3fcc94-f240-41b6-8f11-8edf8796992e" /></p>
<p>It did work, I set the token expiration to 7 days so I will likely create another one next time I want to update.</p>
<p>I wonder where those 60 requests come from, but it may be a question for GitHub (I'm under CGNAT, may other users with my share my anonymous limit?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ceejatec">@ceejatec</a> on 2025-04-25 11:21</div>
            <div class="timeline-body"><p>@zorion Yeah, if you're anonymous, Github rate limits based on your IP since that's the only information it has. So if others use the same external IP, that can throttle your connections too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zorion">@zorion</a> on 2025-04-25 12:08</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/zorion">@zorion</a> Yeah, if you're anonymous, Github rate limits based on your IP since that's the only information it has. So if others use the same external IP, that can throttle your connections too.</p>
</blockquote>
<p>Sheeet, it was not my CGNAT! it was my Cloudflare-Warp (VPN like software)! Silly me!</p>
<p>Thanks @ceejatec  ! You are right!</p>
<p>Checked with <code>curl https://api.github.com/rate_limit 2&gt; /dev/null | jq &quot;.rate&quot;</code>
With the VPN:</p>
<pre><code class="language-json">{
  &quot;limit&quot;: 60,
  &quot;remaining&quot;: 30,
  &quot;reset&quot;: 1745585596,
  &quot;used&quot;: 30,
  &quot;resource&quot;: &quot;core&quot;
}

</code></pre>
<p>Without:</p>
<pre><code class="language-json">{
  &quot;limit&quot;: 60,
  &quot;remaining&quot;: 60,
  &quot;reset&quot;: 1745586409,
  &quot;used&quot;: 0,
  &quot;resource&quot;: &quot;core&quot;
}
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:25 UTC
    </footer>
</body>
</html>
