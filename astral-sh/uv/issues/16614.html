<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Automatic workdir switching according to an entry point's target - astral-sh/uv #16614</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Automatic workdir switching according to an entry point's target</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/16614">#16614</a>
        opened by <a href="https://github.com/Dev-iL">@Dev-iL</a>
        on 2025-11-06 12:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Dev-iL">@Dev-iL</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>This is part question, part feature request.</p>
<p>My use case is a monorepo containing multiple streamlit dashboards organized in their own sub-modules. Each dashboard has its own <code>.streamlit</code> folder containing secrets and configurations. My goal is to allow a user to <code>uv run my_dashboard</code> from the monorepo root and have it boot the right dashboard wherever it may be nested. When I attempted to define the below in the topmost <code>pyproject.toml</code></p>
<pre><code class="language-toml">[project.scripts]
my_dashboard = &quot;my_package.my_dashboard.main:main&quot;
</code></pre>
<p>it was possible to run the dashboard, but it did not pick up the contents of the <code>.streamlit</code> folder, indicating that the working directory was set incorrectly, likely to the folder we ran the <code>uv run</code> command from. Indeed, upon switching to the dashboard's main folder and running it from there - the secret loading problem was no longer present.</p>
<p>I saw the <code>--project</code> and <code>--directory</code> flags mentioned in the docs, but these require the user to specify the folder to switch to - which is undesired in this use case.</p>
<p><strong>Question</strong>: Is there a way to switch the working directory automatically to where the entry point points?</p>
<p>As I user, I would expect the auto-folder-switching behavior to be configurable at the <code>pyproject.toml</code> for each entry point. I have considered the approach of a flag such as <code>--autocwd</code> for <code>uv run</code>, but the main downside of this is the user might not know they need to add it.</p>
<hr />
<p>P.S.
streamlit usually doesn't work through <code>uv run</code>, but there are <a href="https://github.com/streamlit/streamlit/issues/9450">workarounds</a>.</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @Dev-iL on 2025-11-06 12:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-06 17:50</div>
            <div class="timeline-body"><p>Do you control loading the <code>.streamlit</code> folder or running the invocation that does? Or does it happen behind the scenes?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Dev-iL">@Dev-iL</a> on 2025-11-06 18:07</div>
            <div class="timeline-body"><p>Behind the scenes afaik. I believe <a href="https://github.com/streamlit/streamlit/blob/44175886ce6411e4863fc36206aab10d180cb70e/lib/streamlit/file_util.py#L69">this</a> (file) is where the path resolution happens.</p>
<p>Are you suggesting to try and switch the workdir inside the python code before the .streamlit folder is loaded? That's an interesting idea!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:33:23 UTC
    </footer>
</body>
</html>
