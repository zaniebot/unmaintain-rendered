<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FR: Do not update PATH on `uv self update`. - astral-sh/uv #7319</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>FR: Do not update PATH on `uv self update`.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7319">#7319</a>
        opened by <a href="https://github.com/ilyagr">@ilyagr</a>
        on 2024-09-12 01:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ilyagr">@ilyagr</a> on 2024-09-12 01:36</div>
            <div class="timeline-body"><p>https://docs.astral.sh/uv/getting-started/installation/#upgrading-uv currently explains that <code>uv self update</code> will attempt to update the user's PATH unless the environment variable <code>INSTALLER_NO_MODIFY_PATH=1</code> is set.</p>
<p>I think it shouldn't; if the user installed <code>uv</code> requesting that it doesn't modify the path, they probably don't expect it modified during an update. I suspect you're well aware of this, but I feel like having a thread for this that I and others could subscribe to might be nice.</p>
<p>It seems that https://docs.rs/axoupdater/latest/axoupdater does not support another behavior, but perhaps a feature could be added to it that sets <code>INSTALLER_NO_MODIFY_PATH=1</code> before it calls the installer script.</p>
<p>Thank you for resolving all the other related issues I previously reported, by the way! The speed with which this tool is evolving is impressive.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">releases</span> added by @zanieb on 2024-09-12 02:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-12 02:23</div>
            <div class="timeline-body"><p>Related https://github.com/astral-sh/uv/issues/5576 â€” though I think that requests that we don't update it at all during updates and this requests that we respect the option that was provide at install time?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-12 02:24</div>
            <div class="timeline-body"><p>I think, generally, the shell profile files are changed on update because the new installer might have new target files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ilyagr">@ilyagr</a> on 2024-09-12 03:27</div>
            <div class="timeline-body"><p>I think this is just a dupe of #5576. It makes the most sense to me if <code>self update</code> never updates the shell profile. If the user wanted them updated, the installer would have done it. If the user wants to update them again for some reason, this has nothing to do with updating the version of the tool, and they would probably just rerun the installer.</p>
<p>So, I'll close this as a duplicate. I also found a piece of info I'll post in #5576.</p>
<blockquote>
<p>I think, generally, the shell profile files are changed on update because the new installer might have new target files.</p>
</blockquote>
<p>The new files should probably be placed in the same binary dirs, though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ilyagr on 2024-09-12 03:29</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 04:47:49 UTC
    </footer>
</body>
</html>
