<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Missing extra on dependant package - astral-sh/uv #12809</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Missing extra on dependant package</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12809">#12809</a>
        opened by <a href="https://github.com/presidento">@presidento</a>
        on 2025-04-10 14:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/presidento">@presidento</a></div>
            <div class="timeline-body">Summary
<p>The <code>django-post_office</code> requires <code>bleach[css]</code>, but the <code>css</code> extra is missing when I use uv.</p>
<pre><code>❯ uv init test
Initialized project `test` at `C:\***\test`

❯ cd test

❯ uv add django-post_office
Using CPython 3.13.2 interpreter at: C:\Users\MFarkas\AppData\Local\Programs\Python\Python313\python.exe
Creating virtual environment at: .venv
Resolved 9 packages in 48ms
Installed 8 packages in 1.54s
 + asgiref==3.8.1
 + bleach==6.2.0 &lt;-----------------------------------
 + django==5.2
 + django-post-office==3.9.1
 + sqlparse==0.5.3
 + tinycss2==1.4.0
 + tzdata==2025.2
 + webencodings==0.5.1

❯ uv export --no-hashes --no-annotate --format requirements-txt
Resolved 9 packages in 1ms
# This file was autogenerated by uv via the following command:
#    uv export --no-hashes --no-annotate --format requirements-txt
asgiref==3.8.1
bleach==6.2.0 &lt;-----------------------------------
django==5.2
django-post-office==3.9.1
sqlparse==0.5.3
tinycss2==1.4.0
tzdata==2025.2 ; sys_platform == &#x27;win32&#x27;
webencodings==0.5.1
</code></pre>
<p>While using pip-tools:</p>
<pre><code>❯ pip-compile --no-annotate
#
# This file is autogenerated by pip-compile with Python 3.12
# by the following command:
#
#    pip-compile --no-annotate
#
asgiref==3.8.1
bleach[css]==6.2.0 &lt;-------------------------
django==5.2
django-post-office==3.9.1
sqlparse==0.5.3
tinycss2==1.4.0
tzdata==2025.2
webencodings==0.5.1
</code></pre>
Platform
<p>Windows 10 x86_64</p>
Version
<p>uv 0.6.13 (a0f5c7250 2025-04-07)</p>
Python version
<p>Python 3.12.9</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/presidento">@presidento</a> on 2025-04-10 14:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-10 14:11</div>
            <div class="timeline-body"><p>You can run with <code>--no-strip-extras</code> if you want to retain them in the output file. Note that there is no semantic different at all between including or excluding them -- the exact same set of dependencies get installed either way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-10 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-10 14:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/presidento">@presidento</a> on 2025-04-10 14:35</div>
            <div class="timeline-body"><p>Thank you, and sorry for the bug report.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/presidento">@presidento</a> on 2025-04-10 14:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:38:12 UTC
    </footer>
</body>
</html>
