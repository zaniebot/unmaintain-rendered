<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Behaviour when metadata is incorrect differs from pip - astral-sh/uv #2953</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Behaviour when metadata is incorrect differs from pip</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/2953">#2953</a>
        opened by <a href="https://github.com/hauntsaninja">@hauntsaninja</a>
        on 2024-04-10 04:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/hauntsaninja">@hauntsaninja</a> on 2024-04-10 04:36</div>
            <div class="timeline-body"><p>It looks like docutils made a new release today and something is a little weird with the release.</p>
<p>When installing with pip, I get the following warning:</p>
<pre><code>Discarding https://files.pythonhosted.org/packages/67/9a/ff2ff8e922f3b97c4b4864ca6c78d76ca5969bd730560001167b7054ac48/docutils-0.21.post1.tar.gz (from https://pypi.org/simple/docutils/) (requires-python:&gt;=3.9): Requested docutils&gt;=0.13.1 from https://files.pythonhosted.org/packages/67/9a/ff2ff8e922f3b97c4b4864ca6c78d76ca5969bd730560001167b7054ac48/docutils-0.21.post1.tar.gz has inconsistent version: expected '0.21.post1', but metadata has '0.21'
</code></pre>
<p>and it falls back to installing from the wheel (that is missing the post release version).</p>
<p>uv seems pretty happy to build from the sdist that has the post release, even though the resulting metadata does not match the version.</p>
<p>It all seems harmless enough in this case, but feels like a sort of weird situation and maybe uv should match pip's behaviour here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Behaviour when metadata is incorrect" to "Behaviour when metadata is incorrect differs from pip" by @hauntsaninja on 2024-04-10 04:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-10 04:45</div>
            <div class="timeline-body"><p>Thanks! To confirm, it's just: <code>uv pip install docutils</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hauntsaninja">@hauntsaninja</a> on 2024-04-10 04:48</div>
            <div class="timeline-body"><p>Yup! And it's unclear to me what installers should do here / this is more of a curiosity than anything, so feel free to close :-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-04-10 04:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-10 04:50</div>
            <div class="timeline-body"><p>We already validate the package <em>name</em>, I think it makes sense to validate the version too!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hauntsaninja">@hauntsaninja</a> on 2024-04-10 04:51</div>
            <div class="timeline-body"><p>Yeah, I guess the following feels a little undesirable:</p>
<pre><code>λ uv pip install 'docutils==0.21.post1'
Resolved 1 package in 1ms
Downloaded 1 package in 2ms
Installed 1 package in 10ms
 - docutils==0.21
 + docutils==0.21
λ uv pip freeze | grep docutils
docutils==0.21
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2954.html">astral-sh/uv#2954</a> on 2024-04-10 05:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-10 05:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2969.html">astral-sh/uv#2969</a> on 2024-04-10 15:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:19 UTC
    </footer>
</body>
</html>
