<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv`should not complain about a missing virtual env when called from a non activated virtual environment. - astral-sh/uv #3378</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv</code>should not complain about a missing virtual env when called from a non activated virtual environment.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3378">#3378</a>
        opened by <a href="https://github.com/gotcha">@gotcha</a>
        on 2024-05-05 19:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gotcha">@gotcha</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>This should not fail to locate the virtualenv - (<code>uv</code> should find out that the working dir is a virtualenv):</p>
<pre><code class="language-bash">gotcha@ubuntu:~$ python3 -m venv myvenv
gotcha@ubuntu:~$ cd myvenv/
gotcha@ubuntu:~/myvenv$ bin/pip install uv
Collecting uv
  Obtaining dependency information for uv from https://files.pythonhosted.org/packages/da/3f/63f17edf42f5408b4b6dd19c79c94e9ca2c3d95aaf43a6b7c11ba83c7b50/uv-0.1.39-py3-none-manylinux_2_28_aarch64.whl.metadata
  Using cached uv-0.1.39-py3-none-manylinux_2_28_aarch64.whl.metadata (29 kB)
Using cached uv-0.1.39-py3-none-manylinux_2_28_aarch64.whl (11.6 MB)
Installing collected packages: uv
Successfully installed uv-0.1.39
gotcha@ubuntu:~/myvenv$ bin/uv pip install zope.interface
error: Failed to locate a virtualenv or Conda environment (checked: `VIRTUAL_ENV`, `CONDA_PREFIX`, and `.venv`). Run `uv venv` to create a virtualenv.
</code></pre>
<p>Beware: this happens when the virtual environment has NOT been activated.</p>
<p>(I personally never activate my virtual environments in order to discriminate between my virtualenvs and the system python.
By always <code>cd</code>ing into the venv and prefixing my calls to the local executables with <code>bin/</code> like above in <code>bin/uv pip install</code>, I ensure 1) to avoid mixing with the global installation and 2) to be very specific about the environment that I mutate.)</p>
<p>I use uv 0.1.39.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-05 22:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:24:50 UTC
    </footer>
</body>
</html>
