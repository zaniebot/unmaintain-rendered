<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow configuration of environment discovery (i.e., only check cwd) - astral-sh/uv #12748</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow configuration of environment discovery (i.e., only check cwd)</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/12748">#12748</a>
        opened by <a href="https://github.com/ollie-bell">@ollie-bell</a>
        on 2025-04-08 16:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ollie-bell">@ollie-bell</a> on 2025-04-08 16:47</div>
            <div class="timeline-body"><h3>Question</h3>
<p>The <a href="https://docs.astral.sh/uv/pip/environments/#discovery-of-python-environments">docs explain</a> that <code>uv pip</code> commands will search for a virtual environment which ultimately resorts to looking up in parent directories.</p>
<p>Can this behaviour be configured (e.g. via an environment variable or in pyproject.toml <code>tool.uv.pip</code>) such that <code>uv pip</code> commands will strictly only search in the current directory, and not try to search parent directories?</p>
<h3>Platform</h3>
<p>Darwin 24.3.0 arm64</p>
<h3>Version</h3>
<p>uv 0.6.13 (a0f5c7250 2025-04-07)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @ollie-bell on 2025-04-08 16:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-08 17:14</div>
            <div class="timeline-body"><p>No, that's not configurable at this time. What's your use-case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @zanieb on 2025-04-08 17:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ollie-bell">@ollie-bell</a> on 2025-04-08 17:18</div>
            <div class="timeline-body"><p>I just found that it's not behaviour I necessarily want. e.g. I was in a project directory (say <code>~/projects/my-project</code>) without a environment folder and running <code>uv pip install</code> installed into some random virtualenv I happened to have in my home directory (<code>~/.venv</code>). IMO I'd prefer for <code>uv pip</code> to just tell me to make a environment in my current directory than install in another random one it could find in a parent directory.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-08 17:23</div>
            <div class="timeline-body"><p>I think you can do <code>UV_PYTHON=&quot;./.venv&quot;</code> (or the matching setting in the <code>toml</code>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ollie-bell">@ollie-bell</a> on 2025-04-08 17:26</div>
            <div class="timeline-body"><p>Yeh that seems to work! It would be slightly more obvious to have an explicit setting for <code>uv pip</code> not searching parent directories, but that's just my 2c.. thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ollie-bell">@ollie-bell</a> on 2025-04-08 17:31</div>
            <div class="timeline-body"><p>Ah actually it doesn't work because now <code>uv venv</code> fails with</p>
<pre><code>  Ã— No interpreter found for path `./.venv` in managed installations or search path
</code></pre>
<p>after adding</p>
<pre><code class="language-toml">[tool.uv.pip]
python = &quot;./.venv&quot;
</code></pre>
<p>to <code>pyproject.toml</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-08 17:39</div>
            <div class="timeline-body"><blockquote>
<p>It would be slightly more obvious to have an explicit setting for uv pip not searching parent directories, but that's just my 2c.. thanks!</p>
</blockquote>
<p>Perhaps, but we have a lot of options and we need to see significant need from multiple users before we can justify adding more.</p>
<blockquote>
<p>Ah actually it doesn't work because now uv venv fails with</p>
</blockquote>
<p>Oh, funny... not sure what to do about that yet. <code>uv venv --no-config</code> would work as a hack, I guess.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ollie-bell">@ollie-bell</a> on 2025-04-08 17:41</div>
            <div class="timeline-body"><p>Understood! I'll stick with the default behaviour for now and will keep a look out for any new config updates in the future :) Thanks.</p>
<p>Feel free to turn this into a feature request if that's how you track such requests (or I'm happy to make a feature request issue?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Configuring environment discovery for `uv pip`" to "Allow configuration of environment discovery (i.e., only check cwd)" by @zanieb on 2025-04-08 18:12</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @zanieb on 2025-04-08 18:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:03 UTC
    </footer>
</body>
</html>
