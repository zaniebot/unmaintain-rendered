```yaml
number: 17196
title: "Allow ignoring directories in workspace member globs that don't have pyproject.toml files"
type: issue
state: open
author: tsudol-plaid
labels:
  - enhancement
assignees: []
created_at: 2025-12-20T02:15:57Z
updated_at: 2025-12-20T02:15:57Z
url: https://github.com/astral-sh/uv/issues/17196
synced_at: 2026-01-10T01:57:37Z
```

# Allow ignoring directories in workspace member globs that don't have pyproject.toml files

---

_Issue opened by @tsudol-plaid on 2025-12-20 02:15_

### Summary

We're migrating a monorepo to `uv` using a workspace.  To make this easy, we've defined the workspace using a glob, like:
```toml
[tool.uv.workspace]
members = ["libs/*"]
```
(The [workspace docs](https://docs.astral.sh/uv/concepts/projects/workspaces/) also recommend using a glob.)

We've encountered an interesting error. If you have a `git` branch with a new directory in `libs/` and that directory contains any files that are ignored by `git`, the directory will not be removed when you switch branches. `uv` then complains that this apparent workspace member doesn't have a `pyproject.toml`.

```
error: Workspace member `/Users/tsudol/uv-empty-dir-mre/libs/bad` is missing a `pyproject.toml` (matches: `libs/*`)
```

**MRE**: See README.md in https://github.com/tsudol-plaid/uv-empty-dir-mre

This error is obviously reasonable! Forgetting a `pyproject.toml` in a workspace member _should_ be an error. We're only having a problem with it because of the surprising interaction with `git` and `.gitignore`. It's also particularly jarring for users who are less familiar with `uv` and `git`.

It would be nice if we could tell `uv` not to worry about missing `pyproject.toml`s.  
A setting to turn off "strict" workspace member enforcement would work. It could be workspace-wide, or even enabled for just a single `tool.uv.workspace.members` glob. (The error message indicates that `uv` can associate members with globs!) Downgrading the error to a warning would also be sufficient.

Another possibility: ignore directories that only contain files that are covered by `.gitignore`. This kind of "ignore-aware" feature is increasingly popular these days, such as with `ripgrep`. But you know better than I do if it's appropriate for `uv`.

### Example

If you choose to solve this by adding a new config setting, it could look like:
```toml
[tool.uv]
alert-glob-missing-pyproject = false
```

Or the setting could allow more fine-grained control, e.g.:
```toml
[tool.uv]
alert-glob-missing-pyproject = "warn"
# Default value is "error".
# To turn off warnings entirely, use "never".
```

(Naming things is hard.)

---

_Label `enhancement` added by @tsudol-plaid on 2025-12-20 02:15_

---
