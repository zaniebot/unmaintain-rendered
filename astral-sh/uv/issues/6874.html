<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv sync should install dependency of all workspace members?  - astral-sh/uv #6874</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>uv sync should install dependency of all workspace members? </h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/6874">#6874</a>
        opened by <a href="https://github.com/jpambrun-vida">@jpambrun-vida</a>
        on 2024-08-30 14:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jpambrun-vida">@jpambrun-vida</a> on 2024-08-30 14:37</div>
            <div class="timeline-body"><p>Prior to 0.4.0 I had a [project]-less top level pyproject.toml in my workspace. I liked that <code>uv sync</code> would install the union of all workspace members dependencies as well as top level dev-dependencies. This gave me a great DX with code completion/types/tests etc in all modules.</p>
<p>Now I was following the release note recommendation of adding a top level [project] table, but can't seem to get that behavior again.</p>
<ul>
<li><code>uv sync</code> only installs top level dependencies</li>
<li>if I add all workspace modules as dependency in the top level it works in dev, but later in CI building with <code>--package moduleA</code> I get errors that it can't find say moduleB since I only copy the needed modules in the docker context (to avoid rebuilding a module if changes were only in an unrelated modules).</li>
</ul>
<p>If there a way to get <code>uv sync</code> to install all dependencies from all members uv can find without specifying them explicitly? like it does when [project] isn't present? Or, will the current [project]-less behavior remain unchanged?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-30 14:40</div>
            <div class="timeline-body"><blockquote>
<p>...but later in CI building with --package moduleA I get errors that it can't find say moduleB since I only copy the needed modules in the docker context (to avoid rebuilding a module if changes were only in an unrelated modules).</p>
</blockquote>
<p>Are you looking for something like <code>--no-install-workspace</code>, to do a sync prior to copying over the code? It seems correct that <code>--package root</code> would fail if it depends on <code>member</code> and <code>member</code> doesn't exist.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-09-01 15:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6935.html">astral-sh/uv#6935</a> on 2024-09-02 12:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-03 01:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-03 01:19</div>
            <div class="timeline-body"><p>Closing based on my reply but happy to follow-up!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danielkonecny">@danielkonecny</a> on 2025-07-16 14:07</div>
            <div class="timeline-body"><p>Since OP didn't follow-up, I might do. If I understand the question correctly (and with that, I would like to see this implemented as well), OP would like to have <code>uv sync</code> install all dependencies of all workspace members. Right now, only the root dependencies are installed. I hope I'm not missing any special settings that allow for that, I'm only beginning to use workspaces.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-16 14:16</div>
            <div class="timeline-body"><p>I think you just want <code>--all-packages</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/danielkonecny">@danielkonecny</a> on 2025-08-05 07:53</div>
            <div class="timeline-body"><blockquote>
<p>I think you just want <code>--all-packages</code></p>
</blockquote>
<p>You are right, thank you!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:21 UTC
    </footer>
</body>
</html>
