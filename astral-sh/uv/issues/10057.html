<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv python install --default with .python-versions misbehaves - astral-sh/uv #10057</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>uv python install --default with .python-versions misbehaves</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/10057">#10057</a>
        opened by <a href="https://github.com/jooon">@jooon</a>
        on 2024-12-20 15:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jooon">@jooon</a> on 2024-12-20 15:16</div>
            <div class="timeline-body"><p>I know that uv does not allow you to specify multiple python versions on the command-line with --default. But specifying no version on the command-line and having multiple versions in .python-versions works. If you do that, then the symlinks are not consistent.</p>
<pre><code>$ uv --version
uv 0.5.11
$ uv python uninstall --all
Searching for Python installations
No Python installations found
$ echo -e '3.12.6\n3.12.7\n3.12.5\n3.11.6\n3.11.7\n3.11.5' &gt; .python-versions
$ uv python install --preview --default
Installed 6 versions in 3.41s
 + cpython-3.11.5-linux-x86_64-gnu
 + cpython-3.11.6-linux-x86_64-gnu
 + cpython-3.11.7-linux-x86_64-gnu (python3.11)
 + cpython-3.12.5-linux-x86_64-gnu (python3.12)
 + cpython-3.12.6-linux-x86_64-gnu (python, python3)
 + cpython-3.12.7-linux-x86_64-gnu
$ echo -e '3.12.6\n3.12.7\n3.12.5' &gt; .python-versions
$ uv python install --preview --default
Installed 6 versions in 50ms
 + cpython-3.11.5-linux-x86_64-gnu (python3.11)
 + cpython-3.11.6-linux-x86_64-gnu
 + cpython-3.11.7-linux-x86_64-gnu
 + cpython-3.12.5-linux-x86_64-gnu (python3.12)
 + cpython-3.12.6-linux-x86_64-gnu
 + cpython-3.12.7-linux-x86_64-gnu
</code></pre>
<p>It seems to symlink python and python3 to the first version in the list and the last patch version to finish downloading as minor version. When you run it again and all versions are already downloaded it picks the lowest patch as minor version.</p>
<p>I am not sure what I want to happen. I assumed it would pick the highest version listed like it does without --default or maybe the first minor version in the list.</p>
<p>One way to fix this could be to not allow a bare --default without a single version.</p>
<p>I am also personally not sure why .python-versions exists or why one would have different patch versions of the same minor version, but I noticed this because I had accidentally changed directory to the uv repository where you have this file https://github.com/astral-sh/uv/blob/55502842c0117342c33266bad614c77d78ffd4bc/.python-versions when I just ran <code>uv python install --preview --default</code> and wondered why 3.8.12 was symlinked to python3.8 and not  3.8.18.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-12-20 15:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-20 15:17</div>
            <div class="timeline-body"><p>I initially implemented this to take the first version in the list then later we decided we wouldn't allow it. I must have missed the <code>.python-versions</code> case â€” will look into it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/10060.html">astral-sh/uv#10060</a> on 2024-12-20 15:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:24 UTC
    </footer>
</body>
</html>
