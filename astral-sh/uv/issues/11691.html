<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clarify interaction of `--group` and default dev dependencies - astral-sh/uv #11691</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Clarify interaction of `--group` and default dev dependencies</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/11691">#11691</a>
        opened by <a href="https://github.com/rsyring">@rsyring</a>
        on 2025-02-21 07:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/rsyring">@rsyring</a> on 2025-02-21 07:25</div>
            <div class="timeline-body"><h3>Question</h3>
<p>Considering dependency groups like:</p>
<pre><code>[dependency-groups]
dev = [
    {include-group = &quot;tests&quot;},
    'hatch&gt;=1.14.0',
    'pip-audit',
    'ruff&gt;=0.9.6',
]
tests = [
    'nox&gt;=2025.2.9',
    'pytest&gt;=8.3.4',
]
</code></pre>
<p>When prepping for test runs in nox, I'd expect to be able to do:</p>
<pre><code>uv sync --group tests
</code></pre>
<p>But with that invocation, the dev dependency group is also included.  My next attempt was:</p>
<pre><code>uv sync --only-group tests
</code></pre>
<p>But that doesn't include the project's dependencies either, which doesn't work for testing.  So my final attempt is:</p>
<pre><code>uv sync --no-dev --group tests
</code></pre>
<p>Which works but seems clunky.  IMO, it would be more intuitive if:</p>
<pre><code># install project + group tests
uv sync --group tests

# install project + group tests and group dev
uv sync --group dev --group tests
</code></pre>
<p>And if I always want dev installed when tests is installed then I use <code>include-group</code> to make that happen instead of relying on implicit dev install.</p>
<p>IMO, uv isn't currently using the dev group as a <em>default</em>.  A default implies it's the selection <em>unless</em> something else is chosen.  I think if uv adjusted it to be a true default, the ux might be better.</p>
<p>Also, FWIW, that there are seven different CLI options for dealing with dependency groups.  Does that seem like a lot to anyone else?</p>
<p>As always, YMMV.  :)</p>
<p>Thanks.</p>
<h3>Platform</h3>
<p>Ubuntu 24.04 x64</p>
<h3>Version</h3>
<p>0.6.2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @rsyring on 2025-02-21 07:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2025-02-21 08:48</div>
            <div class="timeline-body"><p>IIUC, You mean using <code>--group</code> should disable <code>tool.uv.default-groups</code> functionality. I'm favor of that then üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/10934.html">astral-sh/uv#10934</a> on 2025-03-08 15:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/12067.html">astral-sh/uv#12067</a> on 2025-03-08 15:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:26 UTC
    </footer>
</body>
</html>
