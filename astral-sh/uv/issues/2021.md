```yaml
number: 2021
title: Add support for NO_PROXY or equivalent
type: issue
state: closed
author: rth
labels: []
assignees: []
created_at: 2024-02-27T16:51:55Z
updated_at: 2024-02-28T15:25:43Z
url: https://github.com/astral-sh/uv/issues/2021
synced_at: 2026-01-10T01:57:04Z
```

# Add support for NO_PROXY or equivalent

---

_Issue opened by @rth on 2024-02-27 16:51_

A few more edge cases in enterprise environments, where some package indexes might need to go though a proxy while other don't. 
In pip this is handled [through the vendored requests package](https://github.com/pypa/pip/blob/0ad4c94be74cc24874c6feb5bb3c2152c398a18e/src/pip/_vendor/requests/sessions.py#L306) which allows,
 - defining `HTTP_PROXY` env variable to define the proxy
 - the `NO_PROXY` env variable to define domains that shouldn't be proxied

More related discussion in https://github.com/pypa/pip/issues/5378#issuecomment-388183686.

Currently as far as I can tell uv respects  `HTTP_PROXY` but ignores the `NO_PROXY`.  Having some mechanism for it would be nice.


---

_Comment by @zanieb on 2024-02-27 17:26_

Is there support for this in [`reqwest`](https://docs.rs/reqwest/latest/reqwest/)? I think we basically rely on them for networking behavior

---

_Comment by @barbet on 2024-02-28 15:14_

NO_PROXY in reqwest seems implemented [here](https://github.com/seanmonstar/reqwest/blob/master/src/proxy.rs#L448) originating in [this PR](https://github.com/seanmonstar/reqwest/pull/877)

---

_Comment by @rth on 2024-02-28 15:25_

Yes, indeed. Maybe it was some other issue on my end. Thanks closing.

---

_Closed by @rth on 2024-02-28 15:25_

---
