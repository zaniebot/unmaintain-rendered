<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv tool install does not respect python-requires - astral-sh/uv #14110</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv tool install does not respect python-requires</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/14110">#14110</a>
        opened by <a href="https://github.com/gsemet">@gsemet</a>
        on 2025-06-17 16:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/gsemet">@gsemet</a> on 2025-06-17 16:43</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hello</p>
<p>i have a package that requires python &lt;3.13. In my package <code>pyproject.toml</code> i have:</p>
<pre><code class="language-toml">requires-python = &quot;&gt;=3.9,&lt;3.13&quot;
</code></pre>
<p>when installing this tool using <code>uv tool install</code>, i see the interpreter used is 3.13, which <code>python</code> and <code>python3</code> alias points to 3.12 by default</p>
<pre><code class="language-text">$ uv python list
cpython-3.14.0b2-linux-x86_64-gnu                 &lt;download available&gt;
cpython-3.14.0b2+freethreaded-linux-x86_64-gnu    &lt;download available&gt;
cpython-3.13.5-linux-x86_64-gnu                   &lt;download available&gt;
cpython-3.13.5+freethreaded-linux-x86_64-gnu      &lt;download available&gt;
cpython-3.13.3-linux-x86_64-gnu                   /home/myuser/.local/share/uv/python/cpython-3.13.3-linux-x86_64-gnu/bin/python3.13
cpython-3.12.11-linux-x86_64-gnu                  &lt;download available&gt;
cpython-3.12.3-linux-x86_64-gnu                   /usr/bin/python3.12
cpython-3.12.3-linux-x86_64-gnu                   /usr/bin/python3 -&gt; python3.12
cpython-3.11.13-linux-x86_64-gnu                  &lt;download available&gt;
cpython-3.11.12-linux-x86_64-gnu                  /home/myuser/.local/share/uv/python/cpython-3.11.12-linux-x86_64-gnu/bin/python3.11
cpython-3.10.18-linux-x86_64-gnu                  &lt;download available&gt;
cpython-3.10.17-linux-x86_64-gnu                  /home/myuser/.local/share/uv/python/cpython-3.10.17-linux-x86_64-gnu/bin/python3.10
cpython-3.10.16-linux-x86_64-gnu                  /home/myuser/.local/share/uv/python/cpython-3.10.16-linux-x86_64-gnu/bin/python3.10
cpython-3.10.14-linux-x86_64-gnu                  /home/myuser/.local/share/uv/python/cpython-3.10.14-linux-x86_64-gnu/bin/python3.10
cpython-3.9.23-linux-x86_64-gnu                   &lt;download available&gt;
cpython-3.8.20-linux-x86_64-gnu                   &lt;download available&gt;
pypy-3.11.11-linux-x86_64-gnu                     &lt;download available&gt;
pypy-3.10.16-linux-x86_64-gnu                     &lt;download available&gt;
pypy-3.9.19-linux-x86_64-gnu                      &lt;download available&gt;
pypy-3.8.16-linux-x86_64-gnu                      &lt;download available&gt;
graalpy-3.11.0-linux-x86_64-gnu                   &lt;download available&gt;
graalpy-3.10.0-linux-x86_64-gnu                   &lt;download available&gt;
graalpy-3.8.5-linux-x86_64-gnu                    &lt;download available&gt;
</code></pre>
<p>i see my app is installed in <code>/home/myuser/.local/share/uv/tools/agpkg/lib/python3.13/site-packages/mytoolname</code>.</p>
<p>When i force installation to python 3.12, it works:</p>
<pre><code class="language-bash">uv tool install --python 3.12 mytoolname
</code></pre>
<p>Is it possible <code>uv tool install</code> does not respect the python-requires from a given package?</p>
<h3>Platform</h3>
<p>Windows WSL2</p>
<h3>Version</h3>
<p>0.7.13</p>
<h3>Python version</h3>
<p>python 3.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @gsemet on 2025-06-17 16:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-17 16:45</div>
            <div class="timeline-body"><p>The <code>uv tool</code> interface doesn't ever read from a <code>pyproject.toml</code>, since tool installations are <em>global</em> and your project is <em>local</em> state.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @zanieb on 2025-06-17 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-06-17 16:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gsemet">@gsemet</a> on 2025-06-17 16:45</div>
            <div class="timeline-body"><p>yes, but the wheel generated from my package should have this restriction defined, and <code>uv tool install</code> reads this wheel.</p>
<p>In the wheel's METADATA I see:</p>
<pre><code class="language-text">...
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: &lt;3.13,&gt;=3.9
Requires-Dist: colorama
Requires-Dist: dohq-artifactory&gt;=1
Requires-Dist: dpath
Requires-Dist: extsemver&gt;=2.10.4
Requires-Dist: jsonpath
</code></pre>
<p>This <code>Requires-Python: &lt;3.13,&gt;=3.9</code> should tell <code>uv tool install</code> to not use python 3.13.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-17 16:48</div>
            <div class="timeline-body"><p>I see, I misunderstood what you were saying.</p>
<p>We ignore upper bounds on <code>requires-python</code> during resolution, presumably we do so there as well (see https://github.com/astral-sh/uv/issues/8374#issuecomment-2424246009). I can verify that's what's happening.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gsemet">@gsemet</a> on 2025-06-17 16:49</div>
            <div class="timeline-body"><p>interesting. In my use case, one module (dohq-artifactory) does not work properly in python 3.13, so i need a way to prevent use of this version of python. I have validated my application against python 3.10, 3.11 and 3.12.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-17 16:53</div>
            <div class="timeline-body"><p>Yeah I'm not sure we have a way to do that right now. It seems reasonable to add something for this particular use-case, but it'll be hard.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-17 16:53</div>
            <div class="timeline-body"><p>Why does it fail on 3.13? (just wondering)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gsemet">@gsemet</a> on 2025-06-17 16:58</div>
            <div class="timeline-body"><p>this lib kind of mimick pathlib behavior, but against artifactory, and pathlib has been reworked in 3.12, 3.13. the lib author fixed for 3.12, but i have some globing syntax that does not work in 3.13.</p>
<p>my problem is that all my users that using <code>uv tool install mytool</code> can have a breakage if uv find a python 3.13 on their system, despit my careful annotation in the wheel to not use 3.13</p>
<p>if i remove python 3.13 from the system it will install with 3.12 that i still have in my system. also, if i fix the python interpreter with <code>uv tool install --python 3.12 agpkg</code> it works, but it is more error prone for users.</p>
<p>i do not really see a reason why uv or any other tool would decide to not respect an explicit METADATA annotation, done by the author of a wheel. Maybe this is not standard, but the syntax seem supported.
I deliver an application, that i validate against some dependency/interpreter version, so i need to be sure the installation tool will install the same version that i have validated.</p>
<p>i have the same kind of issue with dependencies (for my application, i think i should pin all dependencies in the wheel, leaving no resolution capabilities to the installer), but i did not cross this rubicon yet.</p>
<p>but at least the upper bound of python-requires, if defined, should be enforced, at least for uv tool install</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/deeagle001">@deeagle001</a> on 2025-09-22 08:56</div>
            <div class="timeline-body"><p>Are there any progress in this topic? I have exactly the same issue as the reporter, with the same package (dohq-artifactory).
As a solution, I would rather appreciate a flag like &quot;--strict-requires-version&quot; than force the user to read the same info manually, figure out his own suitable python version and provide it to the &quot;--python&quot; flag.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/powercoconola">@powercoconola</a> on 2025-10-15 20:10</div>
            <div class="timeline-body"><p>Looking to get this type of support as well. For us it is keeping us from incrementally updating tools as we test them, it seems the only way to do it is with the UV_PYTHON environment variable to pin the version to a specific version. This acts an &quot;upper-bound&quot; for tool installs. But now if I validate one of my tools with 3.13 or 3.14, I can't just update that one tool since UV_PYTHON ensures ALL tools are installed that way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vikhik">@vikhik</a> on 2025-11-07 15:31</div>
            <div class="timeline-body"><p>We are also looking for this support - we have an internal build tool which uses some libraries that require <code>pywin32</code> - and that currently has no support for <code>cp314</code> ABI, so anyone who is setting up a new machine runs into this issue. I would like to avoid them needing to specify <code>--python 3.13</code> in the <code>uv tool install &lt;tool&gt;</code> call, because we already specify the python version in our .toml, so it's extraneous data.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vikhik">@vikhik</a> on 2025-11-07 17:20</div>
            <div class="timeline-body"><p>Just to play around and figure out what would be necessary to make this work - and I managed to make it work locally.</p>
<p>Note: I am not a rust programmer, and I heavily used AI to assist. <strong>THIS IS JUST A PROOF OF CONCEPT</strong>
However, I tested it for my local package, and it works. So at least it can be used as a conversation starter for the actual uv maintainers.</p>
<p>https://github.com/vikhik/uv/compare/main...vikhik:uv:feat/respect-requires-python-for-tools</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:04 UTC
    </footer>
</body>
</html>
