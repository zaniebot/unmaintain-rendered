<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Feature Request] Support for PyPI Mirrors - astral-sh/uv #9056</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[Feature Request] Support for PyPI Mirrors</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9056">#9056</a>
        opened by <a href="https://github.com/liblaf">@liblaf</a>
        on 2024-11-12 13:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/liblaf">@liblaf</a></div>
            <div class="timeline-body">Description
<p>In order to improve download speeds and reliability, it would be beneficial to support configurable PyPI mirrors within the <code>uv.toml</code> configuration file. This feature would allow users to specify alternative mirrors for PyPI packages and files, while still retaining the default PyPI link in the <code>uv.lock</code> file.</p>
Proposed Solution
<p>Inspired by the configuration options in <a href="https://pixi.sh/latest/reference/pixi_configuration/#mirrors">pixi</a>, I propose adding a <code>[mirrors]</code> section to the <code>uv.toml</code> file. This section would allow users to redirect requests for specific PyPI endpoints to alternative mirrors.</p>
<p>Example configuration:</p>
<pre><code>[mirrors]
# Redirect all requests for PyPI to the mirror
&quot;https://pypi.org/simple&quot; = [
    &quot;https://mirrors.cernet.edu.cn/pypi/web/simple&quot;
]

# Redirect all requests for files to one of the listed mirrors
&quot;https://files.pythonhosted.org/packages&quot; = [
    &quot;https://mirrors.tuna.tsinghua.edu.cn/pypi/web/packages&quot;,
    &quot;https://mirrors.cernet.edu.cn/pypi/web/packages&quot;,
]
</code></pre>
Benefits
<ul>
<li><strong>Improved Download Speeds</strong>: Users can leverage faster mirrors located closer to their geographical region.</li>
<li><strong>Reliability</strong>: Redundancy in mirror options can help mitigate issues with a single mirror being down.</li>
<li><strong>Consistency</strong>: The default PyPI link remains in the <code>uv.lock</code> file, ensuring compatibility and clarity.</li>
</ul>
Additional Considerations
<ul>
<li><strong>Fallback Mechanism</strong>: If a specified mirror is unavailable, uv could automatically fall back to the next listed mirror or the default PyPI endpoint.</li>
</ul>
Related Issue
<ul>
<li><a href="https://github.com/astral-sh/uv/issues/9053">Original Issue #9053</a></li>
</ul>
Conclusion
<p>Supporting configurable PyPI mirrors in <code>uv.toml</code> would enhance the user experience by providing faster and more reliable package downloads. I kindly request the implementation of this feature or further discussion on alternative solutions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 14:55</div>
            <div class="timeline-body"><p>I think this could be thought of as similar to #6349.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">resolver</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 17:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 17:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">resolver</span> removed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 17:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 17:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/liblaf">@liblaf</a> on 2024-11-13 05:16</div>
            <div class="timeline-body"><p>@charliermarsh Thanks! I didn&#x27;t notice that issue before.</p>
<p>I think URL redirecting is more flexible than setting proxy URL for index, as URL redirecting can handle cases when <code>sdist</code> and <code>wheels</code> URL differ from registry URL (e.g. <a href="https://pypi.org">https://pypi.org</a> and <a href="https://files.pythonhosted.org">https://files.pythonhosted.org</a>).</p>
<p>Closing in favor of <a href="https://github.com/astral-sh/uv/issues/6349">#6349</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/liblaf">@liblaf</a> on 2024-11-13 05:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:35:26 UTC
    </footer>
</body>
</html>
