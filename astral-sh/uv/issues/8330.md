```yaml
number: 8330
title: "`uv remove` should remove `tool.uv.sources` entries if it's the only reference"
type: issue
state: closed
author: zanieb
labels:
  - bug
  - help wanted
assignees: []
created_at: 2024-10-18T14:32:20Z
updated_at: 2024-10-19T13:26:02Z
url: https://github.com/astral-sh/uv/issues/8330
synced_at: 2026-01-10T01:57:19Z
```

# `uv remove` should remove `tool.uv.sources` entries if it's the only reference

---

_Issue opened by @zanieb on 2024-10-18 14:32_

e.g. as described in https://github.com/astral-sh/uv/issues/8328#issuecomment-2422598725

---

_Label `cli` added by @zanieb on 2024-10-18 14:32_

---

_Label `cli` removed by @zanieb on 2024-10-18 14:32_

---

_Label `bug` added by @zanieb on 2024-10-18 14:32_

---

_Comment by @charliermarsh on 2024-10-18 14:47_

Oh nice.

---

_Label `help wanted` added by @charliermarsh on 2024-10-18 14:47_

---

_Referenced in [astral-sh/uv#8328](../../astral-sh/uv/issues/8328.md) on 2024-10-18 20:26_

---

_Comment by @j178 on 2024-10-19 11:48_

`uv remove` actually removes entries from `tool.uv.sources`:
https://github.com/astral-sh/uv/blob/4b0a4dadb7a0a22f7d0fd3acab8286eaa29b96e0/crates/uv-workspace/src/pyproject_mut.rs#L455

The issue in https://github.com/astral-sh/uv/issues/8328#issuecomment-2422598725 is that the key in `tool.uv.sources` is ` example_python_library`, but the package name is normalized to `example-python-library`, so the source is not removed. I think we need to normalize keys in `tool.uv.sources` before comparison.

---

_Referenced in [astral-sh/uv#8359](../../astral-sh/uv/pulls/8359.md) on 2024-10-19 12:46_

---

_Closed by @zanieb on 2024-10-19 13:26_

---

_Closed by @zanieb on 2024-10-19 13:26_

---
