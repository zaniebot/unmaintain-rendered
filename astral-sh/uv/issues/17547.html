<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simplify test cases by removing unnecessary version pins - astral-sh/uv #17547</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Simplify test cases by removing unnecessary version pins</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/17547">#17547</a>
        opened by <a href="https://github.com/gaardhus">@gaardhus</a>
        on 2026-01-17 09:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gaardhus">@gaardhus</a></div>
            <div class="timeline-body">Summary
Description
<p>Many test cases in the <code>pip_freeze</code> test suite (and potentially other test suites) explicitly pin package versions when installing dependencies. Since the test suite uses <code>exclude-newer</code>, these version pins are unnecessary and could be removed to simplify the tests.</p>
Context
<p>This was identified during review of #17045. The original test case used version pins (e.g., <code>MarkupSafe==2.1.3</code>, <code>tomli==2.0.1</code>), but the reviewer noted that these aren&#x27;t necessary because the test suite already uses <code>exclude-newer</code> to ensure reproducible builds.</p>
Proposed Solution
<ul>
<li>Audit test cases in <code>crates/uv/tests/it/pip_freeze.rs</code> (and potentially other test files)</li>
<li>Remove explicit version pins from <code>pip install</code> and <code>pip sync</code> commands where they&#x27;re not specifically testing version behavior</li>
<li>Rely on <code>exclude-newer</code> for test reproducibility instead</li>
</ul>
Benefits
<ul>
<li>Simpler, more maintainable test code</li>
<li>Tests are less brittle to upstream package updates</li>
<li>Makes it clearer when version pins are intentional vs. unnecessary</li>
</ul>
References
<ul>
<li>PR #17045 (comment thread: <a href="https://github.com/astral-sh/uv/pull/17045">astral-sh/uv#17045</a>/files#r2614920808)</li>
<li>Related comment: <a href="https://github.com/astral-sh/uv/pull/17045">astral-sh/uv#17045</a>/files#r2606801916</li>
</ul>
Example
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/gaardhus">@gaardhus</a> on 2026-01-17 09:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:41:33 UTC
    </footer>
</body>
</html>
