<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UV_DEFAULT_INDEX set but it falls back to pypi.org in some cases - astral-sh/uv #11808</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>UV_DEFAULT_INDEX set but it falls back to pypi.org in some cases</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/11808">#11808</a>
        opened by <a href="https://github.com/krpatter-intc">@krpatter-intc</a>
        on 2025-02-26 19:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/krpatter-intc">@krpatter-intc</a> on 2025-02-26 19:06</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>We are setting <code>UV_DEFAULT_INDEX</code> to an internal index with credentials, but it seems at some if a failure occurs then <code>uv</code> will still fallback and try to install from pypi.org.</p>
<p>By &quot;failure occurs&quot; definition: The resolution finds an older/bad package that managed to get a bad dependency string: <code>bad-package&gt;=1.1.6&lt;2</code> misssing a <code>,</code> -- this is indeed an error and not currently asking for anything here without me tracking down why the dependency reconciliation tried to download the much older package. I only provide this as data for how we ended up with the error that prompted uv to reach out to <code>pypi.org</code></p>
<h3>Platform</h3>
<p>Windows 11</p>
<h3>Version</h3>
<p>uv 0.6.2 (6d3614eec 2025-02-19)</p>
<h3>Python version</h3>
<p>Python310</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @krpatter-intc on 2025-02-26 19:06</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-26 19:08</div>
            <div class="timeline-body"><p>Does your index fallback to PyPI when valid credentials are not applied? That's a somewhat common behavior and whenever this kind of report has come up in the past, it's always been due to that fallback.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/krpatter-intc">@krpatter-intc</a> on 2025-02-26 19:13</div>
            <div class="timeline-body"><p>We're using a derivative of <code>devpi</code>. Devpi which still serves up the packages but as if it were a mirror. I dont think it would do a <code>redirect</code> -- when used with pip we typically just get a 401/403 type error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/krpatter-intc">@krpatter-intc</a> on 2025-02-26 19:14</div>
            <div class="timeline-body"><p>And I only see this if something else failed previously....Never does it fail with <em>just</em> this error (with an admittedly extremely small sample size)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/krpatter-intc">@krpatter-intc</a> on 2025-02-26 21:12</div>
            <div class="timeline-body"><p>I will perhaps close this and make sure I can reproduce this with file based index and re-open once I have a full reproduction close</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @krpatter-intc on 2025-02-26 21:12</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:26 UTC
    </footer>
</body>
</html>
