<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv run ignores --no-dev - astral-sh/uv #7914</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>uv run ignores --no-dev</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/7914">#7914</a>
        opened by <a href="https://github.com/Yura52">@Yura52</a>
        on 2024-10-04 07:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Yura52">@Yura52</a> on 2024-10-04 07:41</div>
            <div class="timeline-body"><p>I have <code>jupyterlab</code> as a <em>dev</em> dependency and I expect that <code>uv run --no-dev jupyter-lab</code> will fail, but it successfully runs JupyterLab.</p>
<p>Minimal example:</p>
<pre><code>uv init todo
cd todo
uv add --dev jupyterlab
uv run --no-dev jupyter-lab --version
&lt;prints the version&gt;
</code></pre>
<p>Software versions:</p>
<pre><code>macOS 14.5
uv 0.4.18 (7b55e9790 2024-10-01)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-04 13:09</div>
            <div class="timeline-body"><p>Unlike <code>uv sync</code>, <code>uv run</code> does not perform a &quot;strict&quot; sync. In other words, it does not <em>uninstall</em> packages. In the above example, <code>uv add</code> sync'd the dev dependencies, so <code>jupyter-lab</code> remains available. This, however, fails as expected:</p>
<pre><code>uv init todo
cd todo
uv add --dev jupyterlab --no-sync`
uv run --no-dev jupyter-lab --version
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-10-04 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-10-04 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-10-04 13:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sillykelvin">@sillykelvin</a> on 2025-05-21 07:41</div>
            <div class="timeline-body"><p>For people who might visit this issue as <code>uv run --no-dev</code> always installs dev dependencies in your environment:
note that the <code>uv run</code> command has the form <code>uv run [OPTIONS] [COMMAND]</code>, so you should run your script with:</p>
<pre><code>uv run --no-dev &lt;your_script&gt;.py
</code></pre>
<p><strong>NOT</strong></p>
<pre><code>uv run &lt;your_script&gt;.py --no-dev
</code></pre>
<p>The latter one will ignore the <code>--no-dev</code> flag silently and install all dev dependencies, and leave me scratching my head for hours.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:22 UTC
    </footer>
</body>
</html>
