<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>No way to add existing projects to a workspace - astral-sh/uv #14464</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>No way to add existing projects to a workspace</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/14464">#14464</a>
        opened by <a href="https://github.com/kyle-basis">@kyle-basis</a>
        on 2025-07-05 03:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kyle-basis">@kyle-basis</a></div>
            <div class="timeline-body">Summary
<p>Hi, I&#x27;m trying to scriptify <code>uv</code> to create a workspace automatically for a CMake tree (foolish, I know). I have something working via creating a <code>pyproject.toml</code> by hand, but I&#x27;d love to use <code>uv</code> to script this instead. Unfortunately there doesn&#x27;t seem to be a great way to add existing projects to a workspace. My choices are <code>uv add &lt;project&gt;</code> which doesn&#x27;t add to <code>tool.uv.workspace</code> (nor flag the member as workspace), or <code>uv init</code> which doesn&#x27;t have any flag such as <code>--exists</code>. #5388 exists, but doesn&#x27;t quite cover what I need.</p>
<p>The end result I want is something like this:</p>
<pre><code>[project]
name = &quot;basis_cmake&quot;
requires-python = &quot;&gt;=3.12&quot;
version = &quot;0.0.0&quot;
dependencies = [
  &quot;basis-unit-pybind-test&quot;,
]

[build-system]
requires = [
  &quot;setuptools&quot;,
]
build-backend = &quot;setuptools.build_meta&quot;

[tool.setuptools]
py-modules = []

[tool.uv.sources]
basis-unit-pybind-test = { workspace = true }
[tool.uv.workspace]
members = [
  &quot;/basis/unit/pybind_test/py&quot;,
]

[dependency-groups]
dev = [
    &quot;jinja2&gt;=3.1.6&quot;,
    &quot;jsonschema&gt;=4.24.0&quot;,
    &quot;pyyaml&gt;=6.0.2&quot;,
]
</code></pre>
<p>This is almost scriptable, just no way to add to workspace, I have a nearly working example that looks like:</p>
<pre><code>        execute_process(COMMAND ${UV} init
                            --name ${UV_PROJECT_NAME}
                            --bare
                            --no-readme
                            --no-description
                            --lib
                            --author-from none
                            --python ${UV_PYTHON_VERSION}
                            --build-backend uv
                        COMMAND_ERROR_IS_FATAL ANY)
        execute_process(COMMAND ${UV} version ${UV_PROJECT_VERSION}
                        COMMAND_ERROR_IS_FATAL ANY)
</code></pre>
<p>but I&#x27;m forced to instead manually write toml line by line.</p>
<p>If there&#x27;s support from the <code>uv</code> team I&#x27;d be happy to &quot;de-rust&quot; my rust and contribute.</p>
Example
<p>Either:
<code>uv add --workspace &lt;path&gt;</code> could add a project to the workspace with the proper pathing
or:
<code>uv init --existing --bare</code> (or similar) could add an existing project to a workspace without touching anything else</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/kyle-basis">@kyle-basis</a> on 2025-07-05 03:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-07-07 14:42</div>
            <div class="timeline-body"><p>Yeah I think <code>--workspace</code> should be supported.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-07-07 14:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-07 16:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kyle-basis">@kyle-basis</a> on 2025-07-08 03:27</div>
            <div class="timeline-body"><p>Dangit @charliermarsh  - while I appreciate the quick resolution I was kind of excited to have a chance to contribute. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-07-09 15:46</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:39:18 UTC
    </footer>
</body>
</html>
