```yaml
number: 8969
title: "Lock dependency groups in the `uv pip` interface, i.e., `uv pip compile --group`"
type: issue
state: closed
author: KasperZutterman
labels:
  - enhancement
  - compatibility
assignees: []
created_at: 2024-11-09T13:10:41Z
updated_at: 2025-03-18T12:47:34Z
url: https://github.com/astral-sh/uv/issues/8969
synced_at: 2026-01-10T01:57:20Z
```

# Lock dependency groups in the `uv pip` interface, i.e., `uv pip compile --group`

---

_Issue opened by @KasperZutterman on 2024-11-09 13:10_

<!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

Hi all,

Similar to https://github.com/astral-sh/uv/issues/8590 it would be great if the PEP 735 dependency-groups could be locked with `uv pip compile`.

I would imagine something like: `uv pip compile pyproject.toml -o requirements-dev.txt --group=test`.

Linking this for possible interface alignment:
- https://github.com/jazzband/pip-tools/issues/2062 

---

_Label `enhancement` added by @charliermarsh on 2024-11-09 13:40_

---

_Label `compatibility` added by @charliermarsh on 2024-11-09 13:40_

---

_Comment by @charliermarsh on 2024-11-09 13:40_

ðŸ‘ We'll do this, likely as soon as the interface is defined for pip itself.

---

_Referenced in [astral-sh/uv#9457](../../astral-sh/uv/issues/9457.md) on 2024-11-26 23:36_

---

_Renamed from "uv pip compile --group " to "Lock dependency groups in the `uv pip` interface, i.e., `uv pip compile --group`" by @zanieb on 2024-11-26 23:45_

---

_Referenced in [cthoyt/cookiecutter-snekpack#32](../../cthoyt/cookiecutter-snekpack/pulls/32.md) on 2024-11-27 10:17_

---

_Referenced in [astral-sh/uv#10379](../../astral-sh/uv/issues/10379.md) on 2025-01-07 21:48_

---

_Referenced in [gip-inclusion/la-communaute#875](../../gip-inclusion/la-communaute/pulls/875.md) on 2025-01-09 14:09_

---

_Comment by @qvalentin on 2025-01-16 10:29_

Until it is implemented you can always help yourself with some scripting hacks (maybe use https://github.com/kislyuk/yq for a more reasonable script):

```
 sed -n "/\[dependency-groups\]/,/\]/p" pyproject.toml | grep -E '^\s*"[^"]+"' | sed 's/,$//' | sed 's/"//g' | uv pip compile - >> requirements.txt
```

But this won't respect the lock file.

---

_Referenced in [astral-sh/uv#10861](../../astral-sh/uv/pulls/10861.md) on 2025-01-22 14:55_

---

_Closed by @Gankra on 2025-01-23 13:47_

---

_Closed by @Gankra on 2025-01-23 13:47_

---

_Reopened by @zanieb on 2025-01-23 20:43_

---

_Referenced in [astral-sh/uv#11474](../../astral-sh/uv/issues/11474.md) on 2025-02-13 10:22_

---

_Assigned to @Gankra by @charliermarsh on 2025-02-16 19:02_

---

_Referenced in [astral-sh/uv#11686](../../astral-sh/uv/pulls/11686.md) on 2025-02-21 14:42_

---

_Referenced in [open-telemetry/opentelemetry-python-contrib#3304](../../open-telemetry/opentelemetry-python-contrib/pulls/3304.md) on 2025-03-03 18:49_

---

_Closed by @Gankra on 2025-03-17 18:44_

---

_Closed by @Gankra on 2025-03-17 18:44_

---

_Comment by @OmerFI on 2025-03-18 02:02_

Will there be a flag to include all groups, maybe `--all-groups` like `--all-extras`?

---

_Comment by @Gankra on 2025-03-18 12:47_

Not in the initial version but we're not totally opposed to it. The primary concern that came up about `--all-groups` is that it doesn't interact well with the semantics pip picked for their `--group` flag (which we reproduced for interop).

Specifically they support `--group mygroup` and `--group path/to/pyproject.toml:mygroup` (the former being sugar for `pyproject.toml:mygroup` in pip -- for us we specifically make it sugar for `{project_dir}/pyproject.toml:mygroup` so that the `--project` flag is useful).

If we map that onto `--all-groups` we'd get `--all-groups` and `--all-groups path/to/pyproject.toml`, which would mean the `--all-groups` flag has an optional argument, and we don't like our CLI flags having optional arguments (because they make CLI parsing ambiguous).

We could resolve this by either making the path argument mandatory or illegal. Both options are kinda sad...

---
