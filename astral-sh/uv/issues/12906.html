<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv installs x86_64 Python on arm64 Windows  - astral-sh/uv #12906</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv installs x86_64 Python on arm64 Windows</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/12906">#12906</a>
        opened by <a href="https://github.com/burgholzer">@burgholzer</a>
        on 2025-04-15 20:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/burgholzer">@burgholzer</a> on 2025-04-15 20:45</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Just yesterday, GitHub announced that the new Windows 11 ARM runners are now available as public preview.
We tried to switch one of our projects over at https://github.com/munich-quantum-toolkit/core/pull/926, but noticed that our Python testing CI would fail on the new runners.
The corresponding run log can be found here: https://github.com/munich-quantum-toolkit/core/actions/runs/14478587550/job/40610220668?pr=926
It essentially fails because uv is downloading the x86 version of Python, which then lets the package build run smoothly, but fails as soon as the tests get executed because these are the wrong binaries for the host architecture.</p>
<p>A minimum reproducible workflow that shows the failure is</p>
<pre><code class="language-yaml">name: UV Reproducer
on:
  push:
    branches:
      - main
  pull_request:
  merge_group:
  workflow_dispatch:

jobs:
  debug-uv:
    name: Debug UV
    runs-on: windows-11-arm
    steps:
      - name: Install the latest version of uv
        uses: astral-sh/setup-uv@v5
      - name: Check the version of uv
        run: uv version
      - name: Instal Python with uv
        run: uv python install 3.9
      - name: Check the Python installations
        run: uv python list
</code></pre>
<p>A corresponding run with that can be found here: https://github.com/munich-quantum-toolkit/core/actions/runs/14478932500/job/40611314128?pr=926</p>
<p>There, the <code>uv python install 3.9</code> results in</p>
<pre><code class="language-console">Downloading cpython-3.9.22-windows-x86_64-none (21.2MiB)
 Downloaded cpython-3.9.22-windows-x86_64-none
Installed Python 3.9.22 in 2.61s
 + cpython-3.9.22-windows-x86_64-none
</code></pre>
<p>I saw over at the python-build-standalone repository that ARM64 builds are in progress (https://github.com/astral-sh/python-build-standalone/pull/387), but not yet ready.</p>
<h3>Platform</h3>
<p>Windows 11 ARM</p>
<h3>Version</h3>
<p>uv 0.6.14 (a4cec56dc 2025-04-09)</p>
<h3>Python version</h3>
<p>Any</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @burgholzer on 2025-04-15 20:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-15 22:12</div>
            <div class="timeline-body"><p>Thanks for the report!</p>
<p>Does the x86-64 Python <em>run</em> on the ARM machine? Just wondering.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/burgholzer">@burgholzer</a> on 2025-04-15 22:15</div>
            <div class="timeline-body"><p>Judging from the workflow logs from our repository (specifically, https://github.com/munich-quantum-toolkit/core/actions/runs/14478587550/job/40610220668?pr=926#step:9:1045) I would say so.
pytest seems to start but fails in its collection phase when trying to load some DLL (which, presumably, has the wrong architecture).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zooba">@zooba</a> on 2025-04-17 16:18</div>
            <div class="timeline-body"><blockquote>
<p>Does the x86-64 Python <em>run</em> on the ARM machine? Just wondering.</p>
</blockquote>
<p>Yep. Windows ARM64 supports emulation of both x86 and x86-64 executables (and even supports some amount of bridging between them and native DLLs, though that's special magic that Python doesn't use and honestly I've not even fully understood yet). It's just as transparent as the 32-bit emulation on 64-bit OS, including that all DLLs/PYDs need to match the architecture of the executable.</p>
<p>Because most of the Python ecosystem assumes it can only ever run in the native architecture, a lot of libraries will fail if they're running under emulation. We've been trying to enlighten tools and build scripts for the last couple of years, but without actual runners, most projects haven't cared, so they still need updating.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-04-17 16:31</div>
            <div class="timeline-body"><p>I think there was an issue elsewhere where we discussed whether x86 actually <em>should</em> be the default for ARM Windows machines, since so few packages publish ARM Windows wheels...?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/burgholzer">@burgholzer</a> on 2025-04-17 16:34</div>
            <div class="timeline-body"><blockquote>
<p>I think there was an issue elsewhere where we discussed whether x86 actually <em>should</em> be the default for ARM Windows machines, since so few packages publish ARM Windows wheels...?</p>
</blockquote>
<p>I bet that will change over time now that public runners are available. Could be wrong though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zooba">@zooba</a> on 2025-04-17 16:50</div>
            <div class="timeline-body"><p>Yeah, I'm also betting that the runners existing will make a difference. And also hesitant to make ARM the default - but that said, ARM should certainly be the default for anyone building their packages on an ARM machine. Maybe they'll be blocked by an upstream dependency, but for the vast majority of users, they <em>are</em> an upstream dependency for someone else.</p>
<p>Making ARM builds the default on python.org means millions of &quot;normal&quot; users (e.g. school kids and such) will get the build. Package developers are a minority in these terms, which is why they need to opt in. I'm not sure where uv fits in here, but I suspect it's a higher ratio of people who <em>should</em> get native ARM builds by default (but probably not high enough).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geofft">@geofft</a> on 2025-04-28 17:46</div>
            <div class="timeline-body"><p>+1 to the sentiment that we should make arm64 Python available but not yet the default. I think it shouldn't be the default in uv even when astral-sh/python-build-standalone#387 lands, and I <em>think</em> the status quo is that uv itself is arm64 but it picks the x64 binary as the best available option (by the rules in crates/uv-python/src/platform.rs), right? So I think that means that we need to implement some toggle somewhere to make uv reject arm64 Python on arm64 Windows specifically.</p>
<p>I think in particular I would advocate for</p>
<ul>
<li>by default, people who do a <code>irm https://astral.sh/uv/install.ps1 | iex</code> on Windows arm64 should have this toggle enabled, so that they get x64 Python (and use the built-in emulation), and probably get a warning/FYI about this either when installing uv or when downloading a Python build, with an explanation what's going on (maybe a link to a tracking issue about switching the default over?)</li>
<li>there should be a documented way to turn this toggle off and opt into arm64 Python on Windows</li>
<li>possibly, this toggle should be default <em>off</em> for the astral-sh/setup-uv action, since people who are using GHA on Windows arm64 are presumably doing so on purpose and can easily switch to x64 if that doesn't work for them and don't want emulation (as opposed to e.g. people with an arm64 Windows laptop)</li>
<li>we give ourselves some defined criteria for Windows arm64 wheel availability (definitely at least numpy, but probably we come up with a set of wheels), and flip the toggle off at that point, but keep the toggle available for users</li>
<li>ideally but optionally, if we find ourselves trying to build something from source and we notice that there's a Windows x64 wheel, we should print a very visible warning that the user might have a better experience using x64 Python</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "uv installs and uses x86 Python on new Windows 11 ARM GitHub runners" to "uv installs x86_64 Python on arm64 Windows " by @zanieb on 2025-06-12 20:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @zanieb on 2025-06-13 12:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-06-13 12:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/henryiii">@henryiii</a> on 2025-06-14 04:25</div>
            <div class="timeline-body"><p>NumPy 2.3.0 came out a few days ago and has Windows ARM binaries. It is changing, if slowly. The Windows ARM runners help a ton for package building. Adding them to cibuildwheel examples in https://github.com/pypa/cibuildwheel/pull/2468. <em>Long</em> term I'd hope ARM was the default with a way to get x86.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/saschanaz">@saschanaz</a> on 2025-06-14 16:07</div>
            <div class="timeline-body"><p>Can we make a prompt instead though? Either of default value is &quot;wrong&quot; which will only confuse people.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-14 18:24</div>
            <div class="timeline-body"><p>The current intent is to display a note https://github.com/astral-sh/uv/pull/13724</p>
<p>We don't often use interactive prompts, but we could consider adding that in the future.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/artiga033">@artiga033</a> on 2025-08-06 07:20</div>
            <div class="timeline-body"><p>I did not notice that uv installed a x64 python by default for me until I faild to install a old numpy with newer python today, which does not hit any prebuilt wheels.</p>
<p>Please note that there are also real PC users using Windows on ARM, not only in CI.</p>
<p>On my WoA device I only installed msvc for ARM, thus fails to build a x64 package:</p>
<details>
  <summary>`uv pip install` log</summary>

<pre><code>  × Failed to build `numpy==1.26.4`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `mesonpy.build_wheel` failed (exit code: 1)

      [stdout]
      + F:\cache\uv\builds-v0\.tmpFKrUSS\Scripts\python.exe
      F:\cache\uv\sdists-v9\pypi\numpy\1.26.4\x21PBL-6iJI3A-Kvz-4nC\src\vendored-meson\meson\meson.py
      setup F:\cache\uv\sdists-v9\pypi\numpy\1.26.4\x21PBL-6iJI3A-Kvz-4nC\src
      F:\cache\uv\sdists-v9\pypi\numpy\1.26.4\x21PBL-6iJI3A-Kvz-4nC\src\.mesonpy-7mpqi2n5
      -Dbuildtype=release -Db_ndebug=if-release -Db_vscrt=md
      --native-file=F:\cache\uv\sdists-v9\pypi\numpy\1.26.4\x21PBL-6iJI3A-Kvz-4nC\src\.mesonpy-7mpqi2n5\meson-python-native-file.ini
      The Meson build system
      Version: 1.2.99
      Source dir: F:\cache\uv\sdists-v9\pypi\numpy\1.26.4\x21PBL-6iJI3A-Kvz-4nC\src
      Build dir: F:\cache\uv\sdists-v9\pypi\numpy\1.26.4\x21PBL-6iJI3A-Kvz-4nC\src\.mesonpy-7mpqi2n5
      Build type: native build
      Project name: NumPy
      Project version: 1.26.4
      Activating VS 17.14.8
      C compiler for the host machine: cl (msvc 19.44.35211 &quot;用于 ARM64 的 Microsoft (R) C/C++ 优化编译器 19.44.35211
      版&quot;)
      C linker for the host machine: link link 14.44.35211.0
      C++ compiler for the host machine: cl (msvc 19.44.35211 &quot;用于 ARM64 的 Microsoft (R) C/C++ 优化编译器
      19.44.35211 版&quot;)
      C++ linker for the host machine: link link 14.44.35211.0
      Cython compiler for the host machine: cython (cython 3.0.12)
      Host machine cpu family: aarch64
      Host machine cpu: aarch64
      Program python found: YES (F:\cache\uv\builds-v0\.tmpFKrUSS\Scripts\python.exe)
      Need python for aarch64, but found x86_64
      Run-time dependency python found: NO (tried sysconfig)

      ..\meson.build:41:12: ERROR: Python dependency not found

      A full log can be found at
      F:\cache\uv\sdists-v9\pypi\numpy\1.26.4\x21PBL-6iJI3A-Kvz-4nC\src\.mesonpy-7mpqi2n5\meson-logs\meson-log.txt

      hint: This usually indicates a problem with the package or the build environment.
  help: `numpy` (v1.26.4) was included because `matplotlib` (v3.10.5) depends on `numpy`
</code></pre>
</details>

<p>While switched to aarch64 python it works well, with an acceptable compile time for me.</p>
<p>Also, as an ARM Windows Laptop user, I would prefer natively running instead of skipping compilation. Moreover it's not intitive to install and even list only x64 pythons when I'm even installed an arm version of uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ofek">@ofek</a> on 2025-11-27 02:12</div>
            <div class="timeline-body"><p>I hope that we can soon reassess the possibility of defaulting to native ARM64 now that much time has passed. This choice of defaulting to emulation was particularly troublesome to <a href="https://github.com/jcrist/msgspec/pull/959">debug</a> today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zooba">@zooba</a> on 2025-11-27 11:39</div>
            <div class="timeline-body"><p>Upstream we're switching the default <a href="https://discuss.python.org/t/python-on-windows-arm64/104524">at the same time as 3.15's release</a>, and I assume uv will follow about that same time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomthom">@thomthom</a> on 2025-11-27 22:15</div>
            <div class="timeline-body"><blockquote>
<p>I hope that we can soon reassess the possibility of defaulting to native ARM64 now that much time has passed. This choice of defaulting to emulation was particularly troublesome to <a href="https://github.com/jcrist/msgspec/pull/959">debug</a> today.</p>
</blockquote>
<p>You mention defaulting to ARM64, is there an option today to install ARM64 python via UV?</p>
<p>I'm not seeing ARM in <code>uv python list</code>:</p>
<pre><code>C:\Users\thoma\Source\py-tests&gt;uv self update
info: Checking for updates...
success: Upgraded uv from v0.9.9 to v0.9.13! https://github.com/astral-sh/uv/releases/tag/0.9.13

C:\Users\thoma\Source\py-tests&gt;uv python list
cpython-3.15.0a2-windows-x86_64-none                 &lt;download available&gt;
cpython-3.15.0a2+freethreaded-windows-x86_64-none    &lt;download available&gt;
cpython-3.14.0-windows-x86_64-none                   C:\Users\thoma\AppData\Roaming\uv\python\cpython-3.14.0-windows-x86_64-none\python.exe
cpython-3.14.0+freethreaded-windows-x86_64-none      &lt;download available&gt;
cpython-3.13.9-windows-x86_64-none                   &lt;download available&gt;
cpython-3.13.9+freethreaded-windows-x86_64-none      &lt;download available&gt;
cpython-3.13.2-windows-x86_64-none                   C:\Users\thoma\AppData\Roaming\uv\python\cpython-3.13.2-windows-x86_64-none\python.exe
cpython-3.12.12-windows-x86_64-none                  C:\Users\thoma\AppData\Roaming\uv\python\cpython-3.12.12-windows-x86_64-none\python.exe
cpython-3.11.14-windows-x86_64-none                  &lt;download available&gt;
cpython-3.11.9-windows-x86_64-none                   C:\Users\thoma\AppData\Local\Programs\Python\Python311\python.exe
cpython-3.10.19-windows-x86_64-none                  &lt;download available&gt;
cpython-3.9.25-windows-x86_64-none                   &lt;download available&gt;
cpython-3.8.20-windows-x86_64-none                   &lt;download available&gt;
pypy-3.11.13-windows-x86_64-none                     &lt;download available&gt;
pypy-3.10.16-windows-x86_64-none                     &lt;download available&gt;
pypy-3.9.19-windows-x86_64-none                      &lt;download available&gt;
pypy-3.8.16-windows-x86_64-none                      &lt;download available&gt;
graalpy-3.12.0-windows-x86_64-none                   &lt;download available&gt;
graalpy-3.11.0-windows-x86_64-none                   &lt;download available&gt;
graalpy-3.10.0-windows-x86_64-none                   &lt;download available&gt;
</code></pre>
<p>I got one of the new Surface tablets that are not exclusively ARM. While x86_x64 emulation works, it has a noticeable overhead on most apps. (Doesn't appear to be as efficient as Apple's emulation is).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-11-27 22:39</div>
            <div class="timeline-body"><p>I believe you can set <code>UV_PYTHON=arm64</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/thomthom">@thomthom</a> on 2025-11-27 23:00</div>
            <div class="timeline-body"><p>That did the trick!</p>
<pre><code>C:\Users\thoma\Source\py-tests&gt;set UV_PYTHON=arm64

C:\Users\thoma\Source\py-tests&gt;uv run python --version
Using CPython 3.14.0
Removed virtual environment at: .venv
Creating virtual environment at: .venv
Python 3.14.0

C:\Users\thoma\Source\py-tests&gt;uv run python
Python 3.14.0 (main, Nov 19 2025, 23:05:28) [MSC v.1944 64 bit (ARM64)] on win32
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import platform
&gt;&gt;&gt; platform.machine()
'ARM64'
</code></pre>
<p>So if one want this to be the machine default, one would set that in the system env? No other config for this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/artiga033">@artiga033</a> on 2025-11-28 01:23</div>
            <div class="timeline-body"><blockquote>
<p>I'm not seeing ARM in uv python list:</p>
</blockquote>
<p>When listing you should use <code>uv python list --all-arches</code>, and you will see the aarch64 builds.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:59 UTC
    </footer>
</body>
</html>
