<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pip installs working depencies, uv doesnt. - astral-sh/uv #1876</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Pip installs working depencies, uv doesnt.</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1876">#1876</a>
        opened by <a href="https://github.com/GJBoth">@GJBoth</a>
        on 2024-02-22 16:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/GJBoth">@GJBoth</a> on 2024-02-22 16:07</div>
            <div class="timeline-body"><p>Hi,</p>
<p>I'm having a slightly weird issue where an environment created through pip install runs fine, whereas an environment setup through uv doesnt, failing with the following trace:</p>
<p><code>env_uv/lib/python3.12/site-packages/tensorflow_probability/python/internal/backend/jax/nest.py:30: in &lt;module&gt;</code></p>
<p>and
<code>ImportError: dlopen(/Users/gert-janboth/Documents/bodymodel/code/drosophilax/venv_uv/lib/python3.12/site-packages/tree/_tree.cpython-312-darwin.so, 0x0002): symbol not found in flat namespace '__ZN4absl12lts_2021032416strings_internal9CatPiecesESt16initializer_listINS0_11string_viewEE'</code></p>
<p>which implies something wrong with <code>tree</code>, (the dm-tree package) or <code>tensorflow-probability</code>. However, pip shows both packages have the same version installed.</p>
<p>My dependencies are</p>
<pre><code>dependencies = [
  &quot;jax[cpu]&gt;=0.4&quot;,
  &quot;mujoco&gt;=3.1&quot;,
  &quot;equinox&gt;=0.11&quot;,
  &quot;tensorflow-probability&gt;=0.23&quot;,
  &quot;chex &gt;=0.1.85&quot;,
  &quot;dm_control&gt;=1.0.16&quot;
]
</code></pre>
<p>Here's the two pip lockfiles:
<a href="https://github.com/astral-sh/uv/files/14376240/pip_uv.txt">pip_uv.txt</a>
<a href="https://github.com/astral-sh/uv/files/14376241/pip.txt">pip.txt</a></p>
<p>showing that while there are some (minor) differences, all the packages related to <code>dm_tree</code> and <code>tensorflow-probability</code> are the same? Please let me know what else you need to help debug this?</p>
<p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-22 16:11</div>
            <div class="timeline-body"><p>Do you mind confirming your version? I thought I fixed this in the version released last night.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/GJBoth">@GJBoth</a> on 2024-02-22 16:23</div>
            <div class="timeline-body"><p>I was on 0.1.5. Just updated to 0.1.7, but same issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-22 16:25</div>
            <div class="timeline-body"><p>@GJBoth - Just confirming, did you run in a fresh virtual environment, and clear the cache beforehand (<code>uv cache clean</code>)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/GJBoth">@GJBoth</a> on 2024-02-22 16:30</div>
            <div class="timeline-body"><p>@charliermarsh I did run in a fresh environment, but I did not clear the cache beforehand. Clearing it has solved the error! Thanks for your help, next time I have issues I'll clear the cache :).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @GJBoth on 2024-02-22 16:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-22 16:31</div>
            <div class="timeline-body"><p>Thanks, sorry for the trouble @GJBoth! Basically, we were downloading the &quot;wrong&quot; wheel, and the installer would continue to use it since technically it's a compatible wheel based on the metadata (although for whatever reason it doesn't work in practice :))</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:18 UTC
    </footer>
</body>
</html>
