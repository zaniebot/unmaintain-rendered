<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>universal-lock: implement merging of forked resolver states - astral-sh/uv #3360</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>universal-lock: implement merging of forked resolver states</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/3360">#3360</a>
        opened by <a href="https://github.com/BurntSushi">@BurntSushi</a>
        on 2024-05-03 18:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2024-05-03 18:18</div>
            <div class="timeline-body"><p>As part of #3350, when generating a universal lock file, it's possible for the resolver to fork when there are conflicting dependencies. Once all forks have completed, the resolutions from each fork need to be merged into one resolution (which might have multiple versions of the same package). And that in turn needs to get converted to a <code>ResolutionGraph</code>.</p>
<p>In my prototype, this is where resolver states are unioned:</p>
<p>https://github.com/astral-sh/uv/blob/7f2b401260e6231bebb867c034b27d2955210fe0/crates/uv-resolver/src/resolver/mod.rs#L1367-L1484</p>
<p>And the resolution graph constructor takes a merged resolution as input:</p>
<p>https://github.com/astral-sh/uv/blob/7f2b401260e6231bebb867c034b27d2955210fe0/crates/uv-resolver/src/resolution.rs#L71-L78</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @BurntSushi on 2024-05-03 18:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3350.html">astral-sh/uv#3350</a> on 2024-05-03 18:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3831.html">astral-sh/uv#3831</a> on 2024-05-24 19:04</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2024-05-30 18:23</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:57 UTC
    </footer>
</body>
</html>
