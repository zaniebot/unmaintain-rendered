```yaml
number: 1689
title: "`pyvenv.cfg` version-info doesn't match `virtualenv`'s"
type: issue
state: closed
author: akx
labels:
  - compatibility
  - great writeup
  - virtualenv
assignees: []
created_at: 2024-02-19T12:40:29Z
updated_at: 2024-03-04T01:46:16Z
url: https://github.com/astral-sh/uv/issues/1689
synced_at: 2026-01-10T01:57:03Z
```

# `pyvenv.cfg` version-info doesn't match `virtualenv`'s

---

_Issue opened by @akx on 2024-02-19 12:40_

I was playing around trying to make `pre-commit` use `uv venv` and `uv pip` (because why not!), and it ends up reporting

```
virtualenv python version did not match created version:
- actual version: 3.12.1.final.0
- expected version: 3.12
```
(which I can work around while patching things over there).

I tracked this down to https://github.com/astral-sh/uv/blob/b76efc62a72ed8031aa91ae80bb1b4a159bd3d21/crates/uv-interpreter/src/get_interpreter_info.py#L8-L13 trimming things, but changing that breaks other things ("Querying Python at `/opt/homebrew/Cellar/python@3.12/3.12.1_1/Frameworks/Python.framework/Versions/3.12/bin/python3.12` did not return the expected data: after parsing 3.12.1, found ".final.0" after it, which is not part of a valid version)" so I'm not sure that's the right way to go here. 

Just thought I'd report this in case it is (or should be) actionable ‚Äì in case it's not, never mind üòÅ 

## Environment

* uv: 0.1.5
* Platform: macOS 14.2.1, Homebrew-installed Python 3.12.1.

### diff between pyvenv.cfg created by `virtualenv` 20.24.6 and `uv` 0.1.5

```patch
1c1
< home = /opt/homebrew/opt/python@3.12/bin
---
> home = /opt/homebrew/Cellar/python@3.12/3.12.1_1/Frameworks/Python.framework/Versions/3.12/bin
3,4c3,4
< version_info = 3.12.1.final.0
< virtualenv = 20.24.6
---
> version_info = 3.12
> gourgeist = 0.0.4
8c8
< base-executable = /opt/homebrew/opt/python@3.12/bin/python3.12
---
> base-executable = /opt/homebrew/Cellar/python@3.12/3.12.1_1/Frameworks/Python.framework/Versions/3.12/bin/python3.12
```

### diff between pyvenv.cfg created by `venv` shipped with said Python and `uv` 0.1.5

```patch
1a2,4
> implementation = CPython
> version_info = 3.12
> gourgeist = 0.0.4
3,5c6,8
< version = 3.12.1
< executable = /opt/homebrew/Cellar/python@3.12/3.12.1_1/Frameworks/Python.framework/Versions/3.12/bin/python3.12
< command = /Users/akx/envs/uv/bin/python3.12 -m venv /Users/akx/build/uv/foofoo-venv
---
> base-prefix = /opt/homebrew/opt/python@3.12/Frameworks/Python.framework/Versions/3.12
> base-exec-prefix = /opt/homebrew/opt/python@3.12/Frameworks/Python.framework/Versions/3.12
> base-executable = /opt/homebrew/Cellar/python@3.12/3.12.1_1/Frameworks/Python.framework/Versions/3.12/bin/python3.12
```

---

_Label `compatibility` added by @zanieb on 2024-02-19 16:16_

---

_Label `virtualenv` added by @zanieb on 2024-02-19 16:16_

---

_Label `great writeup` added by @dhruvmanila on 2024-02-20 10:41_

---

_Comment by @charliermarsh on 2024-03-04 01:46_

We now match `venv` when reporting the Python version.

---

_Closed by @charliermarsh on 2024-03-04 01:46_

---
