<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recursive --no-install-package - astral-sh/uv #16806</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Recursive --no-install-package</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16806">#16806</a>
        opened by <a href="https://github.com/tlippold-meta">@tlippold-meta</a>
        on 2025-11-21 15:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/tlippold-meta">@tlippold-meta</a></div>
            <div class="timeline-body">Summary
<p>Currently, <code>uv sync --no-install-package=XXX</code> just does not install XXX and keeps it transitive dependencies.</p>
<p>It would be nice to add two options:</p>
<ol>
<li>Do not install the transitive dependencies, if they are not used by any other installed package.</li>
<li>Do not install the transitive dependencies, regardless if they are used or not.</li>
</ol>
<p>This should also work when multiple packages are listed as a no-install.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/tlippold-meta">@tlippold-meta</a> on 2025-11-21 15:04</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-21 16:40</div>
            <div class="timeline-body"><p>Why do you want this?</p>
<p><code>--no-install-package</code> is intentionally designed not to do this, as it&#x27;s intended for partial syncs for layer caching.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tlippold-meta">@tlippold-meta</a> on 2025-11-21 16:50</div>
            <div class="timeline-body"><p>We have GPU dependencies, which should be excludable for installs (e.g. for systems without the needed GPU).
However, when they are declared as optional dependencies, BlackDuck does not catch them.</p>
<p>But if that is intentional, then we will manually exclude all the corresponding packages.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-21 16:54</div>
            <div class="timeline-body"><p>Thanks for sharing the use-case!</p>
<p>I&#x27;d report that as a problem to BlackDuck. It seems dubious for us to implement features that are well covered by standards like dependency groups and extras, it just increases the complexity of uv (which already has to deal with a lot of options).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/tlippold-meta">@tlippold-meta</a> on 2025-11-21 16:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/tlippold-meta">@tlippold-meta</a> on 2025-11-21 16:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:41:06 UTC
    </footer>
</body>
</html>
