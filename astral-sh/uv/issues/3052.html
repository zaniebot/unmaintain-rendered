<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`install --require-hashes`'s &quot;must be pinned upfront&quot; error should say where the requirement comes from - astral-sh/uv #3052</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`install --require-hashes`'s &quot;must be pinned upfront&quot; error should say where the requirement comes from</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/3052">#3052</a>
        opened by <a href="https://github.com/bluetech">@bluetech</a>
        on 2024-04-16 07:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bluetech">@bluetech</a> on 2024-04-16 07:12</div>
            <div class="timeline-body"><p>Using <code>--require-hashes</code> requires that all requirements including transitive are pinned with <code>==</code>. When a transitive requirement is missing, <code>uv pip install</code> emits this error:</p>
<pre><code>error: In `--require-hashes` mode, all requirements must be pinned upfront with `==`, but found: setuptools
</code></pre>
<p>For comparison, <code>pip install</code> emits this error:</p>
<pre><code>ERROR: In --require-hashes mode, all requirements must have their versions pinned with ==. These do not:
    setuptools from https://files.pythonhosted.org/packages/f7/29/13965af254e3373bceae8fb9a0e6ea0d0e571171b80d6646932131d6439b/setuptools-69.5.1-py3-none-any.whl (from zope.event==5.0-&gt;-r requirements.txt (line 6))
</code></pre>
<p>The pip error is more helpful: I have some projects where I don't use <code>uv pip sync</code> (yet?), instead I just pin all requirements myself. I rely on the <code>pip install</code> error to tell me which transitive dep I'm missing, and the <code>(from zope.event==5.0-&gt;-r requirements.txt (line 6))</code> part is very helpful for figuring out where the requirements comes from.</p>
<p>Maybe the way I do it is a bit silly and redundant with <code>sync</code> but I figure a better error message doesn't hurt anyway :)</p>
<p>Note: the &quot;setuptools from <url>&quot; part I don't personally care about.</p>
<hr />
<p>Version: uv 0.1.32</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bluetech">@bluetech</a> on 2024-04-16 07:15</div>
            <div class="timeline-body"><blockquote>
<p>Note: the &quot;setuptools from &quot; part I don't personally care about.</p>
</blockquote>
<p>Correction: the &quot;69.5.1&quot; part (the version of the missing transitive dep) <em>is</em> helpful, it lets me know to which version I should pin the dep when I add it to the requirements.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3054.html">astral-sh/uv#3054</a> on 2024-04-16 07:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @charliermarsh on 2024-04-16 13:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-16 13:20</div>
            <div class="timeline-body"><p>Makes sense.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:57 UTC
    </footer>
</body>
</html>
