<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>can not use with &quot;error: Failed to query Python interpreter&quot; - astral-sh/uv #16048</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>can not use with &quot;error: Failed to query Python interpreter&quot;</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16048">#16048</a>
        opened by <a href="https://github.com/yintian710">@yintian710</a>
        on 2025-09-28 05:48
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/yintian710">@yintian710</a> on 2025-09-28 05:48</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>when I run <code>uv run xxx....</code>
I meet</p>
<pre><code class="language-bash">error: Failed to query Python interpreter
  Caused by: No space left on device (os error 28) at path &quot;/root/.cache/uv/.tmpR5qLnt&quot;
</code></pre>
<p>and run <code>uv sync</code>
I see</p>
<pre><code class="language-bash">error: Failed to query Python interpreter
  Caused by: No space left on device (os error 28) at path &quot;/root/.cache/uv/.tmpIwRx08&quot;
</code></pre>
<p>and I check cache</p>
<pre><code class="language-bash"> ls -a /root/.cache/uv
.  ..  archive-v0  builds-v0  CACHEDIR.TAG  .gitignore  interpreter-v4  sdists-v9  simple-v16  simple-v17  wheels-v5
</code></pre>
<p>but when I run <code>uv cache clean</code>, I fix it, but why?
cache dir is</p>
<pre><code class="language-bash">ls -a /root/.cache/uv
.  ..  CACHEDIR.TAG  .gitignore  interpreter-v4  sdists-v9
</code></pre>
<p>I have been using uv for half a year, and this is the first time I have encountered such a problem. The commands I run are also fully automatic, and there is no manual operation on the machine</p>
<h3>Platform</h3>
<p>Linux 5.4.296-1.el8.elrepo.x86_64 x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.8.3</p>
<h3>Python version</h3>
<p>Python 3.12.10</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @yintian710 on 2025-09-28 05:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-09-28 18:36</div>
            <div class="timeline-body"><p>It sounds like your disk ran out of space. Is that not true?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yintian710">@yintian710</a> on 2025-09-29 11:34</div>
            <div class="timeline-body"><blockquote>
<p>It sounds like your disk ran out of space. Is that not true?</p>
</blockquote>
<p>It doesn't seem so.</p>
<p>df -h
devtmpfs        7.8G     0  7.8G    0% /dev
tmpfs           7.9G     0  7.9G    0% /dev/shm
tmpfs           7.9G  405M  7.5G    6% /run
tmpfs           7.9G     0  7.9G    0% /sys/fs/cgroup
/dev/sda3       298G   32G  267G   11% /
/dev/sda1       295M  270M   25M   92% /boot
tmpfs           1.6G     0  1.6G    0% /run/user/0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-09-29 11:36</div>
            <div class="timeline-body"><p>Can you share the logs of <code>uv sync -v</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-29 13:39</div>
            <div class="timeline-body"><p>What disk is <code>/root/.cache/uv/</code> on?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yintian710">@yintian710</a> on 2025-09-30 02:41</div>
            <div class="timeline-body"><blockquote>
<p>Can you share the logs of <code>uv sync -v</code>?</p>
</blockquote>
<p>DEBUG uv 0.8.17
DEBUG Found project root: <code>/work/Client</code>
DEBUG No workspace root found, using project root
DEBUG Acquired lock for <code>/work/Client</code>
DEBUG No Python version file found in workspace: /work/Client
DEBUG Using Python request <code>&gt;=3.12</code> from <code>requires-python</code> metadata
warning: <code>VIRTUAL_ENV=/work/2/venv</code> does not match the project environment path <code>venv</code> and will be ignored; use <code>--active</code> to target the active environment instead
DEBUG Checking for Python environment at: <code>venv</code>
WARN Broken interpreter cache entry at /root/.cache/uv/interpreter-v4/dd58ce5c3d0bf1de/e54c2cf04adb81b2.msgpack, removing: invalid type: string &quot;/root/.local/share/uv/python/cpython-3.12.10-linux-x86_64-gnu/lib/python3.12&quot;, expected a sequence
DEBUG The project environment's Python version satisfies the request: <code>Python &gt;=3.12</code>
DEBUG Released lock at <code>/tmp/uv-98fd212ec9b6efda.lock</code>
DEBUG Acquired lock for <code>venv</code>
DEBUG Using request timeout of 30s
DEBUG Found static <code>pyproject.toml</code> for: client @ file:///work/Client
DEBUG No workspace root found, using project root
DEBUG Existing <code>uv.lock</code> satisfies workspace requirements
Resolved 38 packages in 1ms
DEBUG Using request timeout of 30s
DEBUG Requirement already installed: arrow==1.3.0
DEBUG Requirement already installed: fastapi==0.116.1
DEBUG Requirement already installed: gitpython==3.1.45
DEBUG Requirement already installed: httpx==0.28.1
DEBUG Requirement already installed: loguru==0.7.3
DEBUG Requirement already installed: packaging==25.0
DEBUG Requirement already installed: pip==25.2
DEBUG Requirement already installed: psutil==7.0.0
DEBUG Requirement already installed: py-spy==0.4.1
DEBUG Requirement already installed: toml==0.10.2
DEBUG Requirement already installed: uv==0.8.12
DEBUG Requirement already installed: uvicorn==0.35.0
DEBUG Requirement already installed: websockets==15.0.1
DEBUG Requirement already installed: why-tools==0.0.49
DEBUG Requirement already installed: python-dateutil==2.9.0.post0
DEBUG Requirement already installed: types-python-dateutil==2.9.0.20250809
DEBUG Requirement already installed: pydantic==2.11.7
DEBUG Requirement already installed: starlette==0.47.2
DEBUG Requirement already installed: typing-extensions==4.14.1
DEBUG Requirement already installed: gitdb==4.0.12
DEBUG Requirement already installed: anyio==4.10.0
DEBUG Requirement already installed: certifi==2025.8.3
DEBUG Requirement already installed: httpcore==1.0.9
DEBUG Requirement already installed: idna==3.10
DEBUG Requirement already installed: click==8.2.1
DEBUG Requirement already installed: h11==0.16.0
DEBUG Requirement already installed: better-exceptions==0.3.3
DEBUG Requirement already installed: importlib-metadata==7.1.0
DEBUG Requirement already installed: six==1.17.0
DEBUG Requirement already installed: annotated-types==0.7.0
DEBUG Requirement already installed: pydantic-core==2.33.2
DEBUG Requirement already installed: typing-inspection==0.4.1
DEBUG Requirement already installed: smmap==5.0.2
DEBUG Requirement already installed: sniffio==1.3.1
DEBUG Requirement already installed: zipp==3.23.0
Audited 35 packages in 192ms
DEBUG Released lock at <code>/work/Client/venv/.lock</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yintian710">@yintian710</a> on 2025-09-30 02:42</div>
            <div class="timeline-body"><blockquote>
<p>/root/.cache/uv/</p>
</blockquote>
<p>df -h
devtmpfs 7.8G 0 7.8G 0% /dev
tmpfs 7.9G 0 7.9G 0% /dev/shm
tmpfs 7.9G 405M 7.5G 6% /run
tmpfs 7.9G 0 7.9G 0% /sys/fs/cgroup
/dev/sda3 298G 32G 267G 11% /
/dev/sda1 295M 270M 25M 92% /boot
tmpfs 1.6G 0 1.6G 0% /run/user/0</p>
<p>findmnt -n -o TARGET --target /root/.cache/uv/
/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-09-30 02:44</div>
            <div class="timeline-body"><p>Did you run <code>uv cache clean</code> between the two <code>ls</code> commands? It looks like all the wheels were removed, which would represent significant free disk space.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yintian710">@yintian710</a> on 2025-09-30 07:55</div>
            <div class="timeline-body"><blockquote>
<p>Did you run <code>uv cache clean</code> between the two <code>ls</code> commands? It looks like all the wheels were removed, which would represent significant free disk space.</p>
</blockquote>
<p>yes, but now I have 267G, I don't think it was obtained by uv cleaning. If it was, then it seems the problem is even more serious</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-09-30 14:59</div>
            <div class="timeline-body"><p>If you were using uv for half a year, it's possible! The uv cache is a global store, so it contains any package that you installed in any project. The design of the cache is such that if you reuse packages across projects, we only ever install one copy on your machine, which ultimately saves disk space. But it means that the cache itself can grow large. If you hit a disk space issue, then ran <code>uv cache clean</code> and now have disk space, I don't know that there's much else to do here. You can run <code>uv cache clean</code> or <code>uv cache prune</code> periodically if you're concerned about disk usage.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-09-30 14:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yintian710">@yintian710</a> on 2025-10-09 03:50</div>
            <div class="timeline-body"><blockquote>
<p>If you were using uv for half a year, it's possible! The uv cache is a global store, so it contains any package that you installed in any project. The design of the cache is such that if you reuse packages across projects, we only ever install one copy on your machine, which ultimately saves disk space. But it means that the cache itself can grow large. If you hit a disk space issue, then ran <code>uv cache clean</code> and now have disk space, I don't know that there's much else to do here. You can run <code>uv cache clean</code> or <code>uv cache prune</code> periodically if you're concerned about disk usage.</p>
</blockquote>
<p>Thanks, I will run <code>uv cache clean</code> every week, I hope this problem won't occur again in the future.
but, I use uv only 4 month, and I run <code>uv cache clean</code>, got</p>
<pre><code class="language-bash">uv cache clean
Clearing cache at: .cache/uv
Removed 14599 files (274.8MiB)
</code></pre>
<p>I last used it last month
it only 274.8M, In terms of proportion, it is impossible to reach 267G in four months
Moreover, recently we have been conducting stress tests, and the occupied space should be even larger</p>
<p>you can close this issue, if I encounter this problem again, I will open it once more</p>
<p>thanks.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:12 UTC
    </footer>
</body>
</html>
