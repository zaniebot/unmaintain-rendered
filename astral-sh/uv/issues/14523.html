<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UV seems unable to handle package changing from SemVer to CalVer (e.g.: s3fs) - astral-sh/uv #14523</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UV seems unable to handle package changing from SemVer to CalVer (e.g.: s3fs)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/14523">#14523</a>
        opened by <a href="https://github.com/pdpark-wex">@pdpark-wex</a>
        on 2025-07-09 15:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/pdpark-wex">@pdpark-wex</a></div>
            <div class="timeline-body">Summary
<p>s3fs changed from semantic versioning (SemVer) to calendar versioning (CalVer): https://github.com/fsspec/s3fs/tags?after=2021.11.0</p>
<p>If I don&#x27;t pin s3fs to the latest CalVer, it picks version 0.4.2.
I can pin it to the current latest version or later with &quot;s3fs&gt;=2025.5.1&quot; and it will resolve properly and use the latest version of s3fs.</p>
Platform
<p>Darwin 24.4.0 arm64</p>
Version
<p>uv 0.7.19 (Homebrew 2025-07-02)</p>
Python version
<p>Python 3.12.8</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/pdpark-wex">@pdpark-wex</a> on 2025-07-09 15:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 15:26</div>
            <div class="timeline-body"><p>Please provide a reproduction as described in #9452</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 15:26</div>
            <div class="timeline-body"><pre><code>❯ uv venv
Using CPython 3.13.2
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
❯ uv pip install s3fs
Resolved 19 packages in 459ms
Prepared 4 packages in 46ms
Installed 19 packages in 69ms
 + aiobotocore==2.23.0
 + aiohappyeyeballs==2.6.1
 + aiohttp==3.12.13
 + aioitertools==0.12.0
 + aiosignal==1.4.0
 + attrs==25.3.0
 + botocore==1.38.27
 + frozenlist==1.7.0
 + fsspec==2025.5.1
 + idna==3.10
 + jmespath==1.0.1
 + multidict==6.6.3
 + propcache==0.3.2
 + python-dateutil==2.9.0.post0
 + s3fs==2025.5.1
 + six==1.17.0
 + urllib3==2.5.0
 + wrapt==1.17.2
 + yarl==1.20.1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 15:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 15:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 15:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pdpark-wex">@pdpark-wex</a> on 2025-07-09 16:03</div>
            <div class="timeline-body"><p>See attached file with output of command: <code>uv lock --native-tls --verbose &gt; uv_lock.txt 2&gt;&amp;1</code></p>
<p><a href="https://github.com/user-attachments/files/21146424/uv_lock.txt">uv_lock.txt</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 16:15</div>
            <div class="timeline-body"><p>It looks like there&#x27;s a dependency conflict with <code>botocore</code> and <code>aiobotocore</code> that causes us to backtrack to an older version. It doesn&#x27;t have anything to do with calver, just the resolver trying to solve constraints consistent with your system. I can&#x27;t provide more details without an actual reproducible example.</p>
<p>Adding a lower bound on <code>s3fs</code> is a reasonable way to inform the resolver you don&#x27;t want an old version of it.</p>
<p>Does it persist with <code>uv lock --upgrade</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pdpark-wex">@pdpark-wex</a> on 2025-07-09 16:40</div>
            <div class="timeline-body"><p>Here&#x27;s the relevant contents of my <code>pyproject.toml</code> file - let me know if you need anything to reproduce.</p>
<pre><code>[project]
name = &quot;my_project&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;~=3.12.0&quot;
dependencies = [
    &quot;selenium&quot;,
    &quot;GitPython&quot;,
    &quot;pandas&quot;,
    &quot;pyarrow&quot;,
    &quot;s3fs&quot;,
    &quot;boto3&quot;
]

[project.optional-dependencies]
dev = [
    &quot;pytest&quot;,
    &quot;pytest-mock&quot;,
    &quot;ipykernel&quot;,
    &quot;notebook&quot;,
    &quot;ruff&quot;,
    &quot;invoke&quot;
]

[tool.setuptools.packages.find]
exclude = [&quot;tests&quot;]
namespaces = false
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pdpark-wex">@pdpark-wex</a> on 2025-07-09 16:40</div>
            <div class="timeline-body"><p>&quot;Does it persist with uv lock --upgrade?&quot;
Yes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-09 16:48</div>
            <div class="timeline-body"><p>This is likely just a backtracking issue as described in <a href="https://github.com/astral-sh/uv/issues/8157">astral-sh/uv#8157</a></p>
<p>You should include lower bounds on your dependencies.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/pdpark-wex">@pdpark-wex</a> on 2025-07-09 16:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:39:21 UTC
    </footer>
</body>
</html>
