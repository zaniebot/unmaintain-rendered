<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to install an application that uses --index-url (in this example its pytorch/torch) - astral-sh/uv #5762</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to install an application that uses --index-url (in this example its pytorch/torch)</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/5762">#5762</a>
        opened by <a href="https://github.com/theogbob">@theogbob</a>
        on 2024-08-04 18:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/theogbob">@theogbob</a> on 2024-08-04 18:39</div>
            <div class="timeline-body"><p>Version:</p>
<pre><code>$&gt; uv --version
uv 0.2.33
</code></pre>
<p>Command being ran:</p>
<pre><code>uv pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/rocm6.1
</code></pre>
<p>Issue:
It ignores index url and uses the pre-installed version, if i remove the current torch modules it just installs them like normal (for nvidia) and doesnt include the rocm support from index-url</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-04 19:26</div>
            <div class="timeline-body"><p>Can you include the logs of running with <code>--reinstall</code> and <code>--verbose</code>? <code>--reinstall</code> will cause uv to ignore the already-installed versions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @charliermarsh on 2024-08-04 19:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cp2boston">@cp2boston</a> on 2024-08-06 16:54</div>
            <div class="timeline-body"><p>I have had success with <code>uv pip install --no-cache-dir torch==2.3.1+cpu -f https://download.pytorch.org/whl/torch_stable.html</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stas00">@stas00</a> on 2024-08-08 23:14</div>
            <div class="timeline-body"><p>I was just about to report the same:</p>
<pre><code>uv pip install torch==2.3.1 torchvision==0.18.1 torchaudio==2.3.1 --index-url https://download.pytorch.org/whl/cu121
  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of torch==2.3.1 and you require torch==2.3.1, we can conclude that the requirements are unsatisfiable.


pip install torch==2.3.1 torchvision==0.18.1 torchaudio==2.3.1 --index-url https://download.pytorch.org/whl/cu121
Looking in indexes: https://download.pytorch.org/whl/cu121
Collecting torch==2.3.1
  Downloading https://download.pytorch.org/whl/cu121/torch-2.3.1%2Bcu121-cp310-cp310-linux_x86_64.whl (781.0 MB)
  ...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-08 23:39</div>
            <div class="timeline-body"><p>That's odd, I'll take a look.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-08 23:42</div>
            <div class="timeline-body"><p>We generally require that you set local versions explicitly, like:</p>
<pre><code>uv pip install torch==2.3.1+cu121 torchvision==0.18.1+cu121 torchaudio==2.3.1+cu121
</code></pre>
<p>It's documented in more detail here: https://github.com/astral-sh/uv/blob/main/PIP_COMPATIBILITY.md#local-version-identifiers</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/stas00">@stas00</a> on 2024-08-08 23:45</div>
            <div class="timeline-body"><p>The install command was copied from pytorch instructions https://pytorch.org/get-started/previous-versions/#linux-and-windows-1</p>
<p>perhaps we can convince them to add a <code>uv</code> section? in addition to <code>conda</code> and <code>pip</code>? :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/theogbob">@theogbob</a> on 2024-08-11 00:57</div>
            <div class="timeline-body"><p>oops forgot to check up on this issue, I see if the solution worked for me when ive got some time to test since i ended up just using pip and venv normally</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @theogbob on 2024-08-17 17:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:58 UTC
    </footer>
</body>
</html>
