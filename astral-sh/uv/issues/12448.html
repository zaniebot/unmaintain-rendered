<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Install stopped working for django-modelclone for all uv versions - Setuptools update? - astral-sh/uv #12448</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Install stopped working for django-modelclone for all uv versions - Setuptools update?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/12448">#12448</a>
        opened by <a href="https://github.com/inoa-jboliveira">@inoa-jboliveira</a>
        on 2025-03-24 19:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/inoa-jboliveira">@inoa-jboliveira</a> on 2025-03-24 19:49</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I had this library installing correctly for ages, but I believe something happened today (???) that it is no longer installable via uv. I tried several different uv versions ranging from 0.5.21 to latest 0.6.9 and they all behave the same.</p>
<p>The package <code>django-modelclone</code> hasn't been updated since 2018 and uses a deprecated functionality of setuptools which is error referring to.</p>
<p>What baffles me is that a couple days ago, it was installing fine. I did try changing the setuptools version inside the venv, but it might be that uv is not picking up the version from the env, but the latest version.</p>
<p>Just 5 hours ago setuptools launched a major version: 78.0.1 https://pypi.org/project/setuptools/#history</p>
<p>If that is the case, it is quite unsafe to use a version of setuptools not locked in the environment.</p>
<p>Repro:</p>
<pre><code>uv init foo -p 3.9
cd foo
uv add django-modelclone
</code></pre>
<p>Output:</p>
<pre><code class="language-python">Using CPython 3.9.20
Creating virtual environment at: .venv
  × Failed to build `django-modelclone==0.7.1`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit status: 1)

      [stderr]
      Traceback (most recent call last):
        File &quot;&lt;string&gt;&quot;, line 14, in &lt;module&gt;
        File &quot;.cache/uv/builds-v0/.tmpt0Pz6X/lib/python3.9/site-packages/setuptools/build_meta.py&quot;, line 334, in get_requires_for_build_wheel
          return self._get_build_requires(config_settings, requirements=[])
        File &quot;.cache/uv/builds-v0/.tmpt0Pz6X/lib/python3.9/site-packages/setuptools/build_meta.py&quot;, line 304, in _get_build_requires
          self.run_setup()
        File &quot;.cache/uv/builds-v0/.tmpt0Pz6X/lib/python3.9/site-packages/setuptools/build_meta.py&quot;, line 522, in run_setup
          super().run_setup(setup_script=setup_script)
        File &quot;.cache/uv/builds-v0/.tmpt0Pz6X/lib/python3.9/site-packages/setuptools/build_meta.py&quot;, line 320, in run_setup
          exec(code, locals())
        File &quot;&lt;string&gt;&quot;, line 4, in &lt;module&gt;
        File &quot;.cache/uv/builds-v0/.tmpt0Pz6X/lib/python3.9/site-packages/setuptools/_distutils/core.py&quot;, line 160, in setup
          dist.parse_config_files()
        File &quot;.cache/uv/builds-v0/.tmpt0Pz6X/lib/python3.9/site-packages/_virtualenv.py&quot;, line 20, in parse_config_files
          result = old_parse_config_files(self, *args, **kwargs)
        File &quot;.cache/uv/builds-v0/.tmpt0Pz6X/lib/python3.9/site-packages/setuptools/dist.py&quot;, line 730, in parse_config_files
          self._parse_config_files(filenames=inifiles)
        File &quot;.cache/uv/builds-v0/.tmpt0Pz6X/lib/python3.9/site-packages/setuptools/dist.py&quot;, line 599, in _parse_config_files
          opt = self._enforce_underscore(opt, section)
        File &quot;.cache/uv/builds-v0/.tmpt0Pz6X/lib/python3.9/site-packages/setuptools/dist.py&quot;, line 629, in _enforce_underscore
          raise InvalidConfigError(
      setuptools.errors.InvalidConfigError: Invalid dash-separated key 'description-file' in 'metadata' (setup.cfg), please use the underscore name 'description_file' instead.

      hint: This usually indicates a problem with the package or the build environment.
  help: If you want to add the package regardless of the failed resolution, provide the `--frozen` flag to skip locking and syncing.
</code></pre>
<h3>Platform</h3>
<p>Linux, Windows (I tested both)</p>
<h3>Version</h3>
<p>0.6.9</p>
<h3>Python version</h3>
<p>3.9</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @inoa-jboliveira on 2025-03-24 19:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-24 19:50</div>
            <div class="timeline-body"><p>See #12440</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @zanieb on 2025-03-24 19:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-24 19:51</div>
            <div class="timeline-body"><blockquote>
<p>If that is the case, it is quite unsafe to use a version of setuptools not locked in the environment.</p>
</blockquote>
<p>There is no standard to do otherwise, unfortunately. We're working on pushing the ecosystem forward here, but that is the current state.</p>
<p>See #12446 or use <code>--no-build-isolation</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/inoa-jboliveira">@inoa-jboliveira</a> on 2025-03-24 20:10</div>
            <div class="timeline-body"><p>Thank you for the reply.</p>
<p>Closed as duplicate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @inoa-jboliveira on 2025-03-24 20:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:03 UTC
    </footer>
</body>
</html>
