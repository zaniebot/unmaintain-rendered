<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>compatibility with filprofiler - astral-sh/uv #13399</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>compatibility with filprofiler</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/13399">#13399</a>
        opened by <a href="https://github.com/mayli">@mayli</a>
        on 2025-05-12 07:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mayli">@mayli</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<pre><code>$ uvx --from filprofiler fil-profile run
/home/ubuntu/.cache/uv/archive-v0/XOqyFIkcUdoVQgnvzTIvp/bin/python: error while loading shared libraries: /home/ubuntu/.cache/uv/archive-v
0/XOqyFIkcUdoVQgnvzTIvp/bin/../lib/libpython3.13.so.1.0: cannot open shared object file: No such file or directory
</code></pre>
<p>Seems uv has a different dir layout that filprofiler expects?</p>
<p>Maybe it's due to https://github.com/astral-sh/python-build-standalone?</p>
<h3>Platform</h3>
<p>Linux 6.8.12-8-pve x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.7.3</p>
<h3>Python version</h3>
<p>Python 3.13.1</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @mayli on 2025-05-12 07:36</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-12 09:14</div>
            <div class="timeline-body"><p>Does Python work when you run it the usual way? If so, then it's a bug in filprofiler rather than uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mayli">@mayli</a> on 2025-05-13 06:33</div>
            <div class="timeline-body"><p>yep, the python from system works, even with uv wrapper.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-13 07:17</div>
            <div class="timeline-body"><p>CC @geofft</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geofft">@geofft</a> on 2025-05-22 20:23</div>
            <div class="timeline-body"><p>Can you try the latest version of uv and its Python distribution? On an existing system do</p>
<pre><code>uv self update
uv python install --reinstall
</code></pre>
<p>The command you provided seems to be working with uv 0.7.6 and up. If you're still seeing it fail with latest uv and its Python distribution, please reopen!</p>
<p>(I spoke with the filprofiler maintainer at PyCon and we believe that this is, ultimately, the result of <a href="https://sourceware.org/bugzilla/show_bug.cgi?id=25263">a glibc bug</a> that we've seen before - filprofiler is using an explicit <code>ld.so</code> invocation to add its profiling library to the process. The glibc bug will be fixed in the next release, but getting your glibc upgraded is going to be a much slower process. :-) In the meantime, we reworked our Python builds for performance and other benefits, in a way that happens to avoids triggering this bug as a happy side effect; see astral-sh/python-build-standalone#592 if you're curious.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @geofft on 2025-05-22 20:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/m09">@m09</a> on 2025-05-28 09:04</div>
            <div class="timeline-body"><p>The issue might need reopening: I still have this error even after upgrading to 0.7.8 and reinstalling python as advised.</p>
<p>Used python version is cpython-3.12.10-linux-x86_64-gnu. Also didn't work with the latest 3.13.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mayli">@mayli</a> on 2025-05-28 17:07</div>
            <div class="timeline-body"><pre><code>dev ~&gt; uv self update

info: Checking for updates...
success: Upgraded uv from v0.7.3 to v0.7.8! https://github.com/astral-sh/uv/releases/tag/0.7.8
dev ~&gt; uv python install --reinstall

Installed 2 versions in 2.88s
 ~ cpython-3.12.2-linux-x86_64-gnu
 ~ cpython-3.13.1-linux-x86_64-gnu

dev ~&gt; uvx --from filprofiler fil-profile run
Installed 2 packages in 9ms
/home/ubuntu/.cache/uv/archive-v0/U8O-Ll-Ws93YOh1C1eVP-/bin/python: error while loading shared libraries: /home/ubuntu/.cache/uv/archive-v0/U8O-Ll-Ws93YOh1C1eVP-/bin/../lib/libpython3.13.so.1.0: cannot open shared object file: No such file or directory
</code></pre>
<p>Sounds like worth reopening to me, btw uvx+filprofiler work fine on macOS @geofft</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @geofft on 2025-05-28 17:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geofft">@geofft</a> on 2025-05-28 17:23</div>
            <div class="timeline-body"><p>Yes, sorry for not updating this issueâ€”we had to revert the change for other reasons. Hopefully we'll be able to re-land it very soon!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:31:18 UTC
    </footer>
</body>
</html>
