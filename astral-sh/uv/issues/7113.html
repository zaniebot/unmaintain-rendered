<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>absent directory in find-links causes TOML parse errors: &quot;relative URL without a base&quot; - astral-sh/uv #7113</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>absent directory in find-links causes TOML parse errors: &quot;relative URL without a base&quot;</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7113">#7113</a>
        opened by <a href="https://github.com/garthk">@garthk</a>
        on 2024-09-06 02:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/garthk">@garthk</a></div>
            <div class="timeline-body"><p>G&#x27;day, again!</p>
<p>UV warns it failed to parse its configuration if <code>find-links = [&quot;dist&quot;]</code> but dist doesn&#x27;t exist:</p>
<pre><code>$ uv sync
warning: Failed to parse `pyproject.toml` during settings discovery:
  TOML parse error at line 266, column 1
      |
  266 | [tool.uv]
      | ^^^^^^^^^
  relative URL without a base

Resolved 2 packages in 2ms
Audited 1 package in 0.06ms
</code></pre>
<p>UV applies the rest of its configuration and continues:</p>
<pre><code>$ uv pip list        
warning: Failed to parse `pyproject.toml` during settings discovery:
  TOML parse error at line 8, column 1
    |
  8 | [tool.uv]
    | ^^^^^^^^^
  relative URL without a base

Package Version
------- -------
cowsay  6.1
</code></pre>
<p>Opinions:</p>
<ul>
<li>The warning should be shorter than seven lines, and more helpful. Which setting couldn&#x27;t be parsed? Which line?</li>
<li>Failure to parse settings should be an error if the setting might have been relevant to the command.</li>
</ul>
Reproduction script:

<pre><code>cd &quot;$(mktemp -d)&quot;
uv init                                      
printf  &gt;&gt; pyproject.toml  &#x27;%s\n&#x27; &#x27;[tool.uv]&#x27; &#x27;find-links = [&quot;dist&quot;]&#x27; &#x27;dev-dependencies= [&quot;cowsay&quot;]&#x27;
uv sync
uv pip list
uv sync --verbose
</code></pre>


Verbose output:

<pre><code>$ uv sync --verbose
warning: Failed to parse `pyproject.toml` during settings discovery:
  TOML parse error at line 8, column 1
    |
  8 | [tool.uv]
    | ^^^^^^^^^
  relative URL without a base

DEBUG uv 0.4.5 (Homebrew 2024-09-04)
DEBUG Found project root: `/tmp/demo`
DEBUG No workspace root found, using project root
DEBUG Reading requests from `/tmp/demo/.python-version`
DEBUG The virtual environment&#x27;s Python version satisfies `Python 3.12`
DEBUG Using request timeout of 30s
DEBUG Acquired lock for `~/.cache/uv/built-wheels-v3/path/3188e031165e9209`
DEBUG Found static `pyproject.toml` for: tmp-tjwfaj0qd5 @ file:///tmp/demo
DEBUG No workspace root found, using project root
DEBUG Released lock at `~/.cache/uv/built-wheels-v3/path/3188e031165e9209/.lock`
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 2 packages in 2ms
DEBUG Using request timeout of 30s
DEBUG Requirement already installed: cowsay==6.1
Audited 1 package in 0.06ms
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-14 00:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 18:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 18:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:33:44 UTC
    </footer>
</body>
</html>
