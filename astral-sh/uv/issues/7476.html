<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>export dependencies from an extra only - astral-sh/uv #7476</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>export dependencies from an extra only</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7476">#7476</a>
        opened by <a href="https://github.com/mivanit">@mivanit</a>
        on 2024-09-17 18:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mivanit">@mivanit</a></div>
            <div class="timeline-body"><p>Have <code>uv export</code> support exporting only the requirements listed in an extra, without package dependencies or dev dependencies.</p>
<h1>Use Case</h1>
<p>For CI, it's common to have a separate job which only does some lint checks or something similar, where the package itself and dependencies are not required. With poetry, I'd do something like</p>
<pre><code>[tool.poetry.group.lint.dependencies]
pycln = &quot;^2.1.3&quot;
ruff = &quot;^0.4.8&quot;
</code></pre>
<p>and then</p>
<pre><code>poetry export --only lint --output lint-requirements.txt
</code></pre>
<p>and then in CI just pip install from this <code>lint-requirements.txt</code> file. This significantly speeds up setting up the CI environment for these checks.</p>
<h1>Feature suggestion</h1>
<p>add an option to <code>uv export</code> called <code>--only-extra &lt;extra&gt;</code> or something similar, which only resolves the dependencies listed under the passed extra.</p>
<p><code>uv export --no-emit-project</code> prevents the current project from being emitted as a dep, but the current project's dependencies still are. <code>--only-dev</code> added in #7367 is very close to this, but unless there is a way to group dev dependencies that I'm unaware of it still doesn't fully support what I'm requesting here (ie <code>pytest</code> is in the dev dependencies but not required for just running <code>ruff</code>)</p>
<p>This is a pretty niche use case, and doesn't actually restrict functionality (only slightly less CI time wasted).</p>
<h1>potential workarounds</h1>
<p>I haven't yet tried the <code>--only-dev</code> option from #7367 since the latest release at time of writing is <code>0.4.10</code>, but it may be possible to have dev dependencies be empty, and just have those deps be in extras called <code>dev-test</code> and <code>dev-lint</code> or something, and use <code>--only-dev</code> in combination with <code>--extra dev-lint</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nsoranzo">@nsoranzo</a> on 2024-10-21 17:55</div>
            <div class="timeline-body"><p>Looks like this should be solved by https://github.com/astral-sh/uv/pull/8332 ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @mivanit on 2024-10-25 00:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:27:11 UTC
    </footer>
</body>
</html>
