<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv tool should self-manage Python executable dependencies - astral-sh/uv #7651</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>uv tool should self-manage Python executable dependencies</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/7651">#7651</a>
        opened by <a href="https://github.com/jayqi">@jayqi</a>
        on 2024-09-24 00:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jayqi">@jayqi</a> on 2024-09-24 00:15</div>
            <div class="timeline-body"><p>This is related to #7634 and #1640 but not quite the same thing.</p>
<p>Currently, <code>uv tool</code> creates virtual environments that symlink to the absolute path of the active Python executable. This means that there is a dependency on a Python that is installed by some other program, e.g. Homebrew, pyenv, mise, asdf, etc. This is a place for things to break if a user upgrades or uninstalls that particular instance of Python.</p>
<p>Since uv already supports installing python (with <code>uv python</code>), having uv <em>also</em> manage the Python interpreter would be better. That means everything involved in the tool installation would be controlled by uv.</p>
<p>FWIW, this was always something that I found kludgy about pipx. Pipx installations are never fully independent and isolated because of the dependencies on some other externally-managed Python interpreters.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-24 00:21</div>
            <div class="timeline-body"><p>I think this basically exists, you can use <code>uv tool install --python-preference only-managed</code> or change your global preference to <code>only-managed</code>. We also already use managed interpreter over the system ones (if the required version is installed). I don't think we'll change the default / make this required, but we will continue to improve the behavior of tool installations when we control the interpreter e.g. https://github.com/astral-sh/uv/issues/7287</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jayqi">@jayqi</a> on 2024-09-24 01:55</div>
            <div class="timeline-body"><p>Ah, thanks for pointing to that option and to the ability to set it as a global preference.</p>
<p>I think it might be helpful to have something in <a href="https://docs.astral.sh/uv/concepts/tools/">Tools</a> doc that highlights this option and points users to the <a href="https://docs.astral.sh/uv/concepts/python-versions/">Python versions</a> for more info. I had looked at migrating my tools from pipx before having looked at migrating my Python installation management, so I hadn't encountered the explanation of these options.</p>
<p>Now that I'm experimenting with uv-managed Python, I think my remaining UX concerns are covered by #7287.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-09-24 12:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jayqi">@jayqi</a> on 2024-09-24 20:41</div>
            <div class="timeline-body"><p>I've opened #7673 to add more documentation about Python versions for tools.</p>
<p>Otherwise, I still have a remaining concern that tool environments have leaky isolation even when the Python version is managed by uv. <code>uv tool</code> doesn't track this dependency, so removing the Python version with <code>uv python</code> would still break the tool environment. However, I think this concern is basically a duplicate of #7287.</p>
<p>I don't think there's anything else so I think this issue can be closed.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @jayqi on 2024-09-24 20:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:22 UTC
    </footer>
</body>
</html>
