<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to setup different index for different packages - astral-sh/uv #13932</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to setup different index for different packages</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/13932">#13932</a>
        opened by <a href="https://github.com/mikel-brostrom">@mikel-brostrom</a>
        on 2025-06-09 19:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mikel-brostrom">@mikel-brostrom</a> on 2025-06-09 19:18</div>
            <div class="timeline-body"><h3>Question</h3>
<p>The error:</p>
<pre><code>‚ûú  boxmot git:(max-py) ‚úó uv sync --all-extras --all-groups
Resolved 180 packages in 0.78ms
error: Distribution `markupsafe==3.0.2 @ registry+https://download.pytorch.org/whl/cu121` can't be installed because it doesn't have a source distribution or wheel for the current platform

hint: You're using CPython 3.11 (`cp311`), but `markupsafe` (v3.0.2) only has wheels with the following Python implementation tag: `cp313`
</code></pre>
<p>My pyproject.toml:</p>
<pre><code class="language-bash"># =====================================================
# pyproject.toml for BoxMOT ‚Üê UV with GPU by default
# =====================================================

#######################
# Alternative Indexes #
#######################

[[tool.uv.index]]
name     = &quot;torch-cpu&quot;
url      = &quot;https://download.pytorch.org/whl/cpu&quot;
explicit = true


[[tool.uv.index]]
name     = &quot;torch-gpu&quot;
url      = &quot;https://download.pytorch.org/whl/cu121&quot;

##################################
# Pin torch/vision to *an* index #
##################################

[tool.uv.sources]
torch = [
  { index = &quot;torch-cpu&quot;, marker = &quot;sys_platform == 'darwin'&quot; },
  { index = &quot;torch-gpu&quot;, marker = &quot;sys_platform == 'linux' or sys_platform == 'win32'&quot; },
]
torchvision = [
  { index = &quot;torch-cpu&quot;, marker = &quot;sys_platform == 'darwin'&quot; },
  { index = &quot;torch-gpu&quot;, marker = &quot;sys_platform == 'linux' or sys_platform == 'win32'&quot; },
]


#########################
# UV-specific Overrides #
#########################

[[tool.uv.dependency-metadata]]
name          = &quot;yolox&quot;
version       = &quot;0.3.0&quot;
requires-dist = [&quot;onnx&gt;=1.17.0&quot;, &quot;onnxsim&lt;1.0.0,&gt;=0.4.36&quot;]

[tool.uv]
no-build-isolation-package = [&quot;yolox&quot;]
# only torch and torchvision fetches from index
index-strategy = &quot;unsafe-any-match&quot;


############
# Flake8   #
############

[tool.flake8]
max-line-length = 120
exclude         = [&quot;.tox&quot;, &quot;*.egg&quot;, &quot;build&quot;, &quot;temp&quot;]
select          = [&quot;E&quot;, &quot;W&quot;, &quot;F&quot;]
doctests        = true
verbose         = 2
format          = &quot;pylint&quot;
ignore          = [&quot;E731&quot;, &quot;F405&quot;, &quot;E402&quot;, &quot;W504&quot;, &quot;W605&quot;, &quot;E741&quot;]

##############
# Build System #
##############

[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;

###########
# Project #
###########

[project]
name            = &quot;boxmot&quot;
version         = &quot;13.0.5&quot;
description     = &quot;BoxMOT: pluggable SOTA tracking modules for segmentation, object detection and pose estimation models&quot;
readme          = &quot;README.md&quot;
requires-python = &quot;&gt;=3.9,&lt;=3.13&quot;
license         = { text = &quot;AGPL-3.0&quot; }

authors = [
  { name = &quot;Mikel Brostr√∂m&quot; },
]

classifiers = [
  &quot;Development Status :: 4 - Beta&quot;,
  &quot;Intended Audience :: Developers&quot;,
  &quot;Intended Audience :: Education&quot;,
  &quot;Intended Audience :: Science/Research&quot;,
  &quot;License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)&quot;,
  &quot;Programming Language :: Python :: 3&quot;,
  &quot;Programming Language :: Python :: 3.9&quot;,
  &quot;Programming Language :: Python :: 3.10&quot;,
  &quot;Programming Language :: Python :: 3.11&quot;,
  &quot;Programming Language :: Python :: 3.12&quot;,
  &quot;Topic :: Software Development&quot;,
  &quot;Topic :: Scientific/Engineering&quot;,
  &quot;Topic :: Scientific/Engineering :: Artificial Intelligence&quot;,
  &quot;Topic :: Scientific/Engineering :: Image Recognition&quot;,
  &quot;Topic :: Scientific/Engineering :: Image Processing&quot;,
]

keywords = [
  &quot;tracking&quot;,
  &quot;tracking-by-detection&quot;,
  &quot;machine-learning&quot;,
  &quot;deep-learning&quot;,
  &quot;vision&quot;,
  &quot;ML&quot;,
  &quot;DL&quot;,
  &quot;AI&quot;,
  &quot;YOLO&quot;,
]

dependencies = [
  &quot;setuptools&quot;,
  &quot;filterpy&lt;2.0.0,&gt;=1.4.5&quot;,
  &quot;gdown&lt;6.0.0,&gt;=5.1.0&quot;,
  &quot;lapx&lt;1.0.0,&gt;=0.5.5&quot;,
  &quot;loguru&lt;1.0.0,&gt;=0.7.2&quot;,
  &quot;numpy&quot;,
  &quot;pyyaml&lt;7.0.0,&gt;=6.0.1&quot;,
  &quot;regex&lt;2025.0.0,&gt;=2024.0.0&quot;,
  &quot;yacs&lt;1.0.0,&gt;=0.1.8&quot;,
  &quot;scikit-learn&lt;2.0.0,&gt;=1.3.0&quot;,
  &quot;pandas&lt;3.0.0,&gt;=2.0.0&quot;,
  &quot;opencv-python&lt;5.0.0,&gt;=4.7.0&quot;,
  &quot;ftfy&lt;7.0.0,&gt;=6.1.3&quot;,
  &quot;gitpython&lt;4.0.0,&gt;=3.1.42&quot;,
  &quot;torch&gt;=2.2.1,&lt;3.0.0&quot;,
  &quot;torchvision&gt;=0.17.1,&lt;1.0.0&quot;,
]

[project.scripts]
boxmot = &quot;boxmot.engine.cli:main&quot;

#####################
# Dependency Groups #
#####################

[dependency-groups]
test = [
  &quot;pytest&lt;9.0.0,&gt;=8.0.2&quot;,
  &quot;isort&lt;6.0.0,&gt;=5.13.2&quot;,
  &quot;pytest-cov&lt;7.0.0,&gt;=6.0.0&quot;,
]

yolo = [&quot;ultralytics&quot;]

evolve = [
  &quot;ray&lt;3.0.0,&gt;=2.35.0&quot;,
  &quot;ray[tune]&lt;3.0.0,&gt;=2.35.0&quot;,
  &quot;plotly&lt;6.0.0,&gt;=5.19.0&quot;,
  &quot;joblib&lt;2.0.0,&gt;=1.3.2&quot;,
]

dev = [&quot;ipykernel&lt;7.0.0,&gt;=6.29.5&quot;]

yolox-build-deps = [
  &quot;setuptools&quot;,
  &quot;torch&lt;3.0.0,&gt;=2.2.1&quot;,
]

onnx = [&quot;onnx&gt;=1.16.1&quot;, &quot;onnxruntime&gt;=1.20.0&quot;]
openvino = [&quot;openvino-dev&gt;=2023.3&quot;]
tflite = [
  &quot;onnx2tf&gt;=1.18.0&quot;,
  &quot;onnx&gt;=1.16.1&quot;,
  &quot;tensorflow==2.17.0&quot;,
  &quot;tf_keras&quot;,
  &quot;sng4onnx&gt;=1.0.1&quot;,
  &quot;onnx_graphsurgeon&gt;=0.3.26&quot;,
  &quot;onnxslim&gt;=0.1.31&quot;,
  &quot;onnxruntime&quot;,
  &quot;flatbuffers&gt;=23.5.26&quot;,
  &quot;onnxsim==0.4.33&quot;,
  &quot;psutil==5.9.5&quot;,
  &quot;ml_dtypes==0.3.2&quot;,
  &quot;ai_edge_litert&gt;=1.2.0&quot;,
]

</code></pre>
<p>Why is uv looking at <code>https://download.pytorch.org/whl/cu121</code> for <code>markupsafe==3.0.2</code>? Who should I do in order for uv only to use the indexes for this specific packages</p>
<h3>Platform</h3>
<p>masOS (Darwin 24.4.0 arm64)</p>
<h3>Version</h3>
<p>uv 0.7.12 (dc3fd4647 2025-06-06)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @mikel-brostrom on 2025-06-09 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-06-09 19:20</div>
            <div class="timeline-body"><p>Add <code>explicit = true</code> to the PyTorch indexes, e.g.:</p>
<pre><code class="language-toml">[[tool.uv.index]]
name     = &quot;torch-gpu&quot;
url      = &quot;https://download.pytorch.org/whl/cu121&quot;
explicit = true
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikel-brostrom">@mikel-brostrom</a> on 2025-06-09 21:54</div>
            <div class="timeline-body"><blockquote>
<p>Add <code>explicit = true</code> to the PyTorch indexes, e.g.:</p>
<p>[[tool.uv.index]]
name     = &quot;torch-gpu&quot;
url      = &quot;https://download.pytorch.org/whl/cu121&quot;
explicit = true</p>
</blockquote>
<p>Omg, what a miss on my side. Thanks üòÑ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @mikel-brostrom on 2025-06-09 21:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:04 UTC
    </footer>
</body>
</html>
