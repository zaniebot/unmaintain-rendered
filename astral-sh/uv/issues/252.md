```yaml
number: 252
title: "Python version isn't applied properly"
type: issue
state: closed
author: konstin
labels:
  - bug
  - good first issue
assignees: []
created_at: 2023-10-31T12:48:28Z
updated_at: 2023-11-02T01:20:33Z
url: https://github.com/astral-sh/uv/issues/252
synced_at: 2026-01-10T01:57:00Z
```

# Python version isn't applied properly

---

_Issue opened by @konstin on 2023-10-31 12:48_

requirements.txt:

```
-c package_constraints.txt

pytest-aiohttp==1.0.5
```

package_constraints.txt:
```
aiohttp==3.8.5;python_version<'3.12'
aiohttp==3.9.0b0;python_version>='3.12'
```
This fails on python 3.9:
```
  × No solution found when resolving dependencies:
  ╰─▶ Because pytest-aiohttp 1.0.5 depends on aiohttp ∅ and root 0a0.dev0 depends on pytest-aiohttp 1.0.5, root 0a0.dev0 is forbidden.
```
It passes when removing `aiohttp==3.9.0b0;python_version>='3.12'`, even though the markers shouldn't match there anyway

Part of #199

---

_Label `bug` added by @konstin on 2023-10-31 12:48_

---

_Label `good first issue` added by @charliermarsh on 2023-10-31 15:47_

---

_Comment by @charliermarsh on 2023-10-31 15:48_

Good find, this is a good first issue. We need to filter constraints in the resolver's `get_dependencies` method (see `iter_requirements` for an example of how to filter requirements).

---

_Comment by @charliermarsh on 2023-10-31 15:48_

\cc @zanieb if interested

---

_Assigned to @zanieb by @zanieb on 2023-11-01 04:51_

---

_Referenced in [astral-sh/uv#282](../../astral-sh/uv/pulls/282.md) on 2023-11-01 21:49_

---

_Closed by @zanieb on 2023-11-02 01:20_

---
