```yaml
number: 12753
title: UV silently ignores sources field inside user and system-level configuration, instead of erroring
type: issue
state: closed
author: orishamir
labels:
  - bug
assignees: []
created_at: 2025-04-08T17:23:35Z
updated_at: 2025-04-08T21:01:14Z
url: https://github.com/astral-sh/uv/issues/12753
synced_at: 2026-01-10T01:57:29Z
```

# UV silently ignores sources field inside user and system-level configuration, instead of erroring

---

_Issue opened by @orishamir on 2025-04-08 17:23_

### Summary

Having `[sources]` field inside `uv.toml` of the **project** yields an error, as expected:
```
error: Failed to parse: `uv.toml`. The `sources` field is not allowed in a `uv.toml` file. `sources` is only applicable in the context of a project, and should be placed in a `pyproject.toml` file instead
```
But if I have `[sources]` inside a user-level or system-level configuration (e.g., ~/.config/uv/uv.toml and /etc/uv/uv.toml), then uv runs but quietly ignores the sources field.

This resulted in a significant headache, as I could not figure out what was happening - UV could not find my packages, and my `[sources]` got ignored.

I suggest erroring at both the project-level and user/system-level configuration, to improve visibility and error messages (or a better suggestion).

Thanks in advance, and thanks for everything you are doing - UV has been a lifesaver! 

## Reproduce
```dockerfile
FROM python:3.12-slim-bookworm
COPY --from=ghcr.io/astral-sh/uv:latest /uv /uvx /bin/

WORKDIR /app

RUN uv init

COPY <<EOF /etc/uv/uv.toml
[sources]
doesntmatter = { index = "doesnt_matter"}
EOF

CMD ["uv", "sync"]
```
This does not error, and executes successfully, but ignores `[sources]`
```
Using CPython 3.12.9 interpreter at: /usr/local/bin/python3.12
Creating virtual environment at: .venv
Resolved 1 package in 16ms
Audited in 0.32ms
```

Although the following does indeed error:
```dockerfile
FROM python:3.12-slim-bookworm
COPY --from=ghcr.io/astral-sh/uv:latest /uv /uvx /bin/

WORKDIR /app

COPY <<EOF uv.toml
[sources]
doesntmatter = { index = "doesnt_matter"}
EOF

CMD ["uv", "sync"]
```
```
error: Failed to parse: `uv.toml`. The `sources` field is not allowed in a `uv.toml` file. `sources` is only applicable in the context of a project, and should be placed in a `pyproject.toml` file instead.
```
Related: [#6772](https://github.com/astral-sh/uv/issues/6772)

### Platform

Debian GNU/Linux 12 (bookworm)

### Version

0.6.13

### Python version

3.12.9

---

_Label `bug` added by @orishamir on 2025-04-08 17:23_

---

_Assigned to @charliermarsh by @charliermarsh on 2025-04-08 19:36_

---

_Referenced in [astral-sh/uv#12757](../../astral-sh/uv/pulls/12757.md) on 2025-04-08 19:41_

---

_Closed by @charliermarsh on 2025-04-08 21:01_

---

_Closed by @charliermarsh on 2025-04-08 21:01_

---

_Referenced in [astral-sh/uv#13493](../../astral-sh/uv/issues/13493.md) on 2025-05-16 14:08_

---
