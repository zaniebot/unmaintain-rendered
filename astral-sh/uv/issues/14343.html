<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make `uv run --resintall` exit with code 0 - astral-sh/uv #14343</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make <code>uv run --resintall</code> exit with code 0</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/14343">#14343</a>
        opened by <a href="https://github.com/harnvo">@harnvo</a>
        on 2025-06-29 03:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/harnvo">@harnvo</a> on 2025-06-29 03:51</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Making <code>uv run --reinstall</code> to exit with code 0 makes it easier to work with docker, as exiting with code 2 would result in failed build.</p>
<pre><code class="language-text"> =&gt; ERROR [6/6] RUN export PATH=&quot;/root/.local/bin:/usr/local/nvidia/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot; &amp;&amp;     uv run --reinstall  430.5s
------                                                                                                                                                                                                                                                      
 &gt; [6/6] RUN export PATH=&quot;/root/.local/bin:/usr/local/nvidia/bin:/usr/local/cuda/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot; &amp;&amp;     uv run --reinstall:        
2.100 Downloading cpython-3.12.11-linux-x86_64-gnu (download) (32.8MiB)                                                                                                                                                                                     
113.6  Downloading cpython-3.12.11-linux-x86_64-gnu (download)                                                                                                                                                                                              
113.7 Using CPython 3.12.11                                                                                                                                                                                                                                 
113.7 Creating virtual environment at: .venv                                                                                                                                                                                                                
113.8    Building mypkg @ file:///app
114.1 Downloading pandas (11.4MiB)
114.1 Downloading numpy (15.9MiB)
114.2 Downloading sympy (5.9MiB)
117.7  Downloading setuptools
118.8       Built mypkg @ file:///app
119.8  Downloading pydantic-core
127.5  Downloading sympy
.... &lt;more packages&gt; ...
430.2 Installed 61 packages in 220ms
430.2 Provide a command or script to invoke with `uv run &lt;command&gt;` or `uv run &lt;script&gt;.py`.
430.2 
430.2 The following commands are available in the environment:
430.2 
430.2 - f2py
430.2 - fastapi
430.2 ... &lt;more packages&gt; ...
430.2 
430.2 See `uv run --help` for more information.
------
Dockerfile:20
--------------------
  19 |     
  20 | &gt;&gt;&gt; RUN  export PATH=&quot;/root/.local/bin:$PATH&quot; &amp;&amp; \
  21 | &gt;&gt;&gt;     uv run --reinstall
--------------------
--------------------
ERROR: failed to solve: process &quot;/bin/sh -c export PATH=\&quot;/root/.local/bin:$PATH\&quot; &amp;&amp;     uv run --reinstall&quot; did not complete successfully: exit code: 2
</code></pre>
<h1>Additional Info</h1>
<p>A simple workaround would be <code> export PATH=&quot;/root/.local/bin:$PATH&quot; &amp;&amp; uv run --reinstall || [ $? -eq 2 ]</code>. But it would be nice to have <code>uv run --resintall</code> work natively.</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @harnvo on 2025-06-29 03:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-29 15:57</div>
            <div class="timeline-body"><p>Why are you using <code>uv run --reinstall</code> without a command? Do you want <code>uv sync --reinstall</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by @zanieb on 2025-06-29 15:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-06-29 15:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-29 15:57</div>
            <div class="timeline-body"><p>(We won't change the exit code for invalid uses of <code>uv run</code>, a command is required)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @harnvo on 2025-06-30 13:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:03 UTC
    </footer>
</body>
</html>
