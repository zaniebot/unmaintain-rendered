```yaml
number: 16380
title: Default extras
type: issue
state: closed
author: Ruhrozz
labels:
  - question
assignees: []
created_at: 2025-10-21T10:11:56Z
updated_at: 2025-10-23T10:14:14Z
url: https://github.com/astral-sh/uv/issues/16380
synced_at: 2026-01-10T01:57:36Z
```

# Default extras

---

_Issue opened by @Ruhrozz on 2025-10-21 10:11_

### Question

How to install --extra gpu by default?

```toml
[project]
name = "ultralytics"
dynamic = ["version"]
description = "desc"
requires-python = ">=3.8,<3.11"

dependencies = [
    "numpy>=1.23.0",
    "matplotlib>=3.3.0",
    "opencv-python>=4.6.0",
    "torch>=1.8.0,<2.9.0",
    "torchvision>=0.9.0",
]

[project.optional-dependencies]
cpu = [
    "torch>=1.8.0",
    "torchvision>=0.9.0",
]
gpu = [
    "torch>=1.8.0",
    "torchvision>=0.9.0",
]

[tool.uv.sources]
torch = [
  { index = "torch-cpu", extra = "cpu" },
  { index = "torch-gpu", extra = "gpu" },
]
torchvision = [
  { index = "torch-cpu", extra = "cpu" },
  { index = "torch-gpu", extra = "gpu" },
]

[tool.uv]
conflicts = [
  [
    { extra = "cpu" },
    { extra = "gpu" },
  ],
]

[[tool.uv.index]]
name = "pypi-proxy"
url = "https://my.index.com/pypi"

[[tool.uv.index]]
name = "torch-gpu"
url = 'https://my.index.com/torch-cu117'
explicit = true

[[tool.uv.index]]
name = "torch-cpu"
url = 'https://my.index.com/torch-cpu'
explicit = true
```

I want here to get torch with its nvidia-* packages, but I've got not a single nvidia package with `uv sync`, but if `uv sync --extra gpu` it works properly,

How do I install nvidia dependencies in that case?

### Platform

Ubuntu 22.04

### Version

uv 0.9.4

---

_Label `question` added by @Ruhrozz on 2025-10-21 10:11_

---

_Comment by @konstin on 2025-10-21 10:56_

There is currently no support for this, see https://github.com/astral-sh/uv/issues/8607 for the issue tracking this feature.

---

_Comment by @Ruhrozz on 2025-10-21 11:09_

maybe there is something like 
```toml
[tool.uv.sources]
torch = [
  { index = "torch-cpu", extra = "cpu" },
  { index = "torch-gpu", extra != "cpu" },
]
```

---

_Comment by @Ruhrozz on 2025-10-21 11:17_

I just want to declaratively install torch+cpu on tests (using maybe sth like --extra cpu) and by default install torch+cuda

---

_Closed by @Ruhrozz on 2025-10-22 04:36_

---

_Comment by @noamsgl on 2025-10-23 10:14_

> I just want to declaratively install torch+cpu on tests (using maybe sth like --extra cpu) and by default install torch+cuda


I want the same thing. Is it possible?

---
