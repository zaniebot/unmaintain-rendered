<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retain history of package versions through updates - astral-sh/uv #13217</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Retain history of package versions through updates</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/13217">#13217</a>
        opened by <a href="https://github.com/juhaszp95">@juhaszp95</a>
        on 2025-04-30 08:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/juhaszp95">@juhaszp95</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hi There,</p>
<p>I'm occasionally upgrading packages in my package environment using <code>uv</code>. <code>conda</code> has a <code>conda list --revisions</code> command which is very useful, as it shows you which packages changed and how through updates. This makes it easy to roll back if needed via <code>conda install --revision=REVNUM</code>.</p>
<p>It would be great if <code>uv</code> could support a similar feature (at least keeping a history).</p>
<p>Of course this could be done by committing <code>uv.lock</code> after each update to version control, but realistically that doesn't always happen.</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @juhaszp95 on 2025-04-30 08:33</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @charliermarsh on 2025-05-04 12:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CarliJoy">@CarliJoy</a> on 2026-01-12 11:23</div>
            <div class="timeline-body"><p>Realted to #16975</p>
<p>I created a small wrapper around <code>uv</code> to do this and published it as https://pypi.org/project/uvrev/.</p>
<p>Implementing this in <code>uv</code> would be still very welcome.</p>
<p>I drafted a help text for documentation driven design:</p>
<pre><code>--lock-vcs &lt;none|git&gt;
    Integrate lockfile updates with your VCS.

    When enabled (git), uv will record dependency-state transitions in Git whenever uv.lock is
    updated by a uv command. The recorded state includes:
      - pyproject.toml
      - uv.lock
      - uv.toml (if present)

    Behavior (git):
      - Creates a Git commit that stages only the files listed above.
      - Tags the created commit as: uv-lock-rev-&lt;number&gt;
        where &lt;number&gt; is a monotonically increasing revision number for the repository.
        This tag enables fast identification and restoration of prior lock states.
      - Uses a commit message that includes a dependency changelog describing what changed
        since the previous lock revision, e.g. which dependencies were:
          - added
          - removed
          - updated (including old â†’ new versions where available)

    Notes:
      - If uv.lock is not modified, uv does not create a commit or tag.
      - If the current directory is not a Git repository, or Git is unavailable, uv fails with
        an error when --lock-vcs git is specified.

    Examples:

      Enable VCS integration (config):
        [tool.uv]
        lock-vcs = &quot;git&quot;

      Show all lock revisions:
        git log --decorate --format='%h %d%n%B%n---' --tags='uv-lock-rev-*'

      Restore a prior dependency state (example: revision 12) and resync the environment:
        git checkout uv-lock-rev-12 -- pyproject.toml uv.lock uv.toml
        uv sync
</code></pre>
<p>If uv implements the tracking of change in git, the restoring and listing of version can be left to the user using aliases/small scripts. I don't think we need to implement subcommands for this in <code>uv</code>.</p>
<p>In the end restoring/list is done much less then actually changing the lock file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CarliJoy">@CarliJoy</a> on 2026-01-12 11:36</div>
            <div class="timeline-body"><p>Would a PR that implements and documents the suggested option be accepted?
Or do you think this is outside the scope of <code>uv</code>  or want to make some changes (i.e. name of the option, workflow...)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2026-01-12 11:39</div>
            <div class="timeline-body"><p>That seems better suited in a service such as dependabot or renovate, which do this though a PR workflow that also runs CI, displays changelogs, etc. uv currently doesn't make any git commits, and doing so is a big increase in scope.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CarliJoy">@CarliJoy</a> on 2026-01-12 11:47</div>
            <div class="timeline-body"><p>This feature requests comes from people migrating from conda, which has <code>conda list --revisions</code>/<code>conda install --revision</code>, wanting a similar experience with uv.
So using Depabot or renovate are no solution for their use case, as they care about tracking changes locally.</p>
<p>This feature is used for deployment installation, to keep track and rollback not working changes.
Also it used by users experimenting during develop, common in the science community, who don't want to commit every time they try a new package.</p>
<p>I can understand if this you think this is out of scope for uv.</p>
<p>In this case please close both issues as not planned.</p>
<p>(Even so I would be happy about this feature)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/juhaszp95">@juhaszp95</a> on 2026-01-12 12:49</div>
            <div class="timeline-body"><p>Thanks for this! Just a comment to say that although tracking this via git would be an obvious choice, I could also imagine a local, ever-increasing file (something like <code>uv.hist</code>, which has a history of states of this repo), which could serve as the base for both tracking state, as well as restoring state. It could be then left to the user to commit this to git if they wanted. I could even imagine this new file to be optional, i.e. when creating a new venv, one could specify the optional <code>--track-state</code> to track state.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw-gts">@notatallshaw-gts</a> on 2026-01-12 15:56</div>
            <div class="timeline-body"><blockquote>
<p>That seems better suited in a service such as dependabot or renovate, which do this though a PR workflow that also runs CI, displays changelogs, etc. uv currently doesn't make any git commits, and doing so is a big increase in scope.</p>
</blockquote>
<p>This is unworkable for a non-developer running code locally, often experimenting or prototyping models, that's the main selling point of this feature, otherwise this would already be solved with lock files. Think data scientist, financial analysist, etc.</p>
<p>FYI, I'm not particularly advocating for this feature, I'm not sure it's as required with a clean distinction between requirements and lock files, but I have known many non-developer conda users use this.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:31:10 UTC
    </footer>
</body>
</html>
