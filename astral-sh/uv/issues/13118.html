<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to change the `source` in uv.lock (like when a package repo goes offline)? - astral-sh/uv #13118</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to change the `source` in uv.lock (like when a package repo goes offline)?</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/13118">#13118</a>
        opened by <a href="https://github.com/krupan">@krupan</a>
        on 2025-04-26 13:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/krupan">@krupan</a> on 2025-04-26 13:16</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I have the wheels for the packages my project needs in a flat directory on an nfs server that all machines in my lab can access.  I add this to my <code>pyproject.toml</code>:</p>
<pre><code>[[tool.uv.index]]
url = &quot;/path/to/wheels&quot;
format = &quot;flat&quot;
</code></pre>
<p>I run <code>uv sync</code> and it installs the packages under <code>.venv</code> and creates <code>uv.lock</code>.  Inside <code>uv.lock</code> the source for each package is recorded as:</p>
<pre><code>source = { registry = &quot;/path/to/wheels&quot; }
</code></pre>
<p>Now, for some reason or another <code>/path/to/wheels</code> is gone, like we stopped using that nfs server or something.  Now, if someone else clones my project and attempts to sync, either with <code>uv sync</code> or <code>uv run</code>, then uv will not install the packages because it can't find them at <code>/path/to/wheels</code>.  I was told in another question that <a href="https://github.com/astral-sh/uv/issues/13094#issuecomment-2829188590">this is expected</a>.  My question is, is there a uv command/option that I can use in this scenario to download the packages from the default index (PyPI) instead of the <code>/path/to/wheels</code> index and then update the lockfile with a new source?</p>
<h3>Platform</h3>
<p>linux</p>
<h3>Version</h3>
<p>uv 0.6.16</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @krupan on 2025-04-26 13:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/krupan">@krupan</a> on 2025-04-26 13:23</div>
            <div class="timeline-body"><p>UPDATE: I thought if I deleted <code>uv.lock</code> and then ran <code>uv sync</code> then it would work, but I still get this error:</p>
<pre><code> $ uv sync
â ™ pyproject==0.1.0
error: Failed to read `--find-links` directory: /path/to/wheels
  Caused by: No such file or directory (os error 2)
</code></pre>
<p>Shouldn't uv fall back to the default index if one isn't available?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:03 UTC
    </footer>
</body>
</html>
