<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>how to specify the venv when running `uv pip install` - astral-sh/uv #8721</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>how to specify the venv when running `uv pip install`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/8721">#8721</a>
        opened by <a href="https://github.com/KotlinIsland">@KotlinIsland</a>
        on 2024-10-31 12:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2024-10-31 12:29</div>
            <div class="timeline-body"><p>i'm trying to write a <a href="https://pyprojectx.github.io/">pyprojectx</a> install script for basedmypy where the user can pass <code>--python 3.8</code> etc, but i am struggling to figure out how to do this</p>
<p>i originally had:</p>
<pre><code class="language-toml">[tool.pyprojectx.aliases]
install = [&quot;uv venv&quot;, &quot;uv pip install -r test-requirements.txt -e .&quot;]
</code></pre>
<p>but when this was invoked:</p>
<pre><code class="language-console">&gt; ./px install --python 3.8
px install --python 3.8 .venv8                                                                                                                                                                                                                                                                                                                                                                                       Using CPython 3.8.10 interpreter at: C:\Users\AMONGUS\AppData\Local\Programs\Python\Python38\python.exe
Creating virtual environment at: .venv8
Activate with: .venv8\Scripts\activate
error: C:\Users\AMONGUS\projects\basedmypy\.venv8 does not appear to be a Python project, as neither `pyproject.toml` nor `setup.py` are present in the directory
</code></pre>
<p>which makes sense, <code>uv pip install</code> expects packages, not a venv directory, so i switched to writing a separate python script, along the lines of:</p>
<pre><code class="language-py"># psuedo code, for brevity
from subprocess import check_call

# parse args ...
check_call([&quot;uv&quot;, &quot;venv&quot; &quot;--python&quot;, args.python, f&quot;.venv{args.python}&quot;])
check_call([&quot;uv&quot;, &quot;pip&quot; &quot;install&quot;, &quot;-r&quot;, &quot;test-requirements.txt&quot;, &quot;-e&quot;, &quot;.&quot;, &quot;--python&quot;, args.python])
</code></pre>
<p>this has the issue that <code>uv pip</code> doesn't know anything about the newly created venv...</p>
<p>so i've tried all these things, but i can't seem to get anywhere, am i missing something here?</p>
<pre><code class="language-console">&gt; uv venv --python 3.8 .venv8
Using CPython 3.8.10 interpreter at: C:\Users\AMONGUS\AppData\Local\Programs\Python\Python38\python.exe
Creating virtual environment at: .venv8
Activate with: .venv8\Scripts\activate
&gt; uv pip install -r test-requirements.txt -e . --python 3.8
error: No virtual environment found for Python 3.8; run `uv venv` to create an environment, or pass `--system` to install into a non-virtual environment
&gt; uv pip install -r test-requirements.txt -e . --python 3.8 --prefix .venv8
error: No virtual environment found for Python 3.8; run `uv venv` to create an environment, or pass `--system` to install into a non-virtual environment
&gt; uv pip install -r test-requirements.txt -e . --python 3.8 --target .venv8/Lib/site-packages
error: No virtual environment found for Python 3.8; run `uv venv` to create an environment, or pass `--system` to install into a non-virtual environment
</code></pre>
<p>ideally, i want a simple command that will create a venv with a specific name and install dependencies in it:</p>
<pre><code class="language-console">&gt; uv pip install &lt;blah blah&gt; --python 3.8 --venv .venv8
</code></pre>
<p>better yet, when specifying python version, <code>uv</code> could have a set way of naming and identifying the different venvs</p>
<p>or maybe, you think that is a bad ux, and everyone should just recreate the same <code>.venv</code> every time they want to switch python versions then i guess this issue is invalid</p>
<p>with basedmypy specifically, i need to switch Python versions constantly</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-31 12:56</div>
            <div class="timeline-body"><p>The second call should use <code>--python f&quot;.venv{args.python}&quot;</code>, not <code>--python args.python</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-10-31 12:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2024-10-31 13:10</div>
            <div class="timeline-body"><p>ah, that makes sense, thanks</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2024-10-31 13:13</div>
            <div class="timeline-body"><p>okay thanks, so that does resolve my question and my situation. the only thing left is the request for a shorthand, instead of needing to write a script</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-31 13:32</div>
            <div class="timeline-body"><p>I don't think we're likely to add a mechanism to create a virtualenv as part of a <code>pip install</code> command (if that's what you're referring to), since the commands are already composable?</p>
<pre><code>uv venv --python 3.8 .venv-3.8 &amp;&amp; uv pip install -r test-requirements.txt --python .venv-3.8
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/KotlinIsland">@KotlinIsland</a> on 2024-10-31 13:49</div>
            <div class="timeline-body"><p>yeah, okay. just can't easily abstract that into an alias, all good, thanks so much for responding as always üòÅ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @KotlinIsland on 2024-10-31 13:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-31 13:50</div>
            <div class="timeline-body"><p>No problem, glad I could help, appreciate your comments :)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:23 UTC
    </footer>
</body>
</html>
