<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support semver-styled prerelease version formatting in `uv version` - astral-sh/uv #14353</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support semver-styled prerelease version formatting in <code>uv version</code></h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/14353">#14353</a>
        opened by <a href="https://github.com/emann">@emann</a>
        on 2025-06-29 21:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/emann">@emann</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>While PEP 440 is technically the correct way to version python packages, many tools are also able to interpret semver-styled prereleases. Moreover, when using versioning that relates to our affects things outside of a strictly python realm, using a more globally standard formatting is preferred. In my exact use case, the version of my backend server determines the version of the API client that is generated and use in our TS frontend, where semver is the norm.</p>
<p>Additionally, PEP 440 only supports a/b/rc, whereas semver is more flexible and would allow me to make a version that is <code>1.2.3-iss-456.1</code> to represent the first build of a branch-specific deploy for the <code>iss-456</code> ticket.</p>
<p>The extra frustrating part is that even if I manually set the version to <code>1.2.3-rc.1</code> in pyproject.toml, <code>uv version --short</code> still outputs <code>1.2.3rc1</code></p>
<p>This probably makes sense to be implemented after https://github.com/astral-sh/uv/issues/13223 is settled, but would be happy to take a crack at this one myself once the interface is agreed upon!</p>
<h3>Example</h3>
<p>I propose adding a simple flag e.g. <code>--use-semver-formatting</code> to control the versioning formatting/scheme:</p>
<p><code>uv version 1.2.3-beta.1</code> sets the version to <code>1.2.3b1</code> (Current default behavior)</p>
<p><code>uv version --use-semver-formatting 1.2.3-beta.1</code> sets the version to <code>1.2.3-beta.1</code></p>
<p><code>uv version 1.2.3-iss-1.1</code> gives:
&quot;error: after parsing <code>1.2.3</code>, found <code>-iss-1.1</code>, which is not part of a valid version&quot;</p>
<p><code>uv version --use-semver-formatting 1.2.3-iss-1.1</code> sets the version to <code>1.2.3-iss-1.1</code> without error</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @emann on 2025-06-29 21:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @konstin on 2025-08-21 12:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/andrea-cassioli-maersk">@andrea-cassioli-maersk</a> on 2025-10-30 07:56</div>
            <div class="timeline-body"><p>I got into the same issue. I hope uv will support semver somehow</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-30 14:23</div>
            <div class="timeline-body"><p>It seems okay to allow setting the version to an uncanonicalized value, e.g., with <code>uv version --raw</code> or something, but I don't think we should support setting <code>project.version</code> to values that are not supported by the standards (e.g., the <code>-iss</code> variant`). I'd suggest you start a discussion upstream (i.e., on DPO) about semver compatible project versions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dmarteau">@dmarteau</a> on 2025-12-05 14:10</div>
            <div class="timeline-body"><p>Just a side remark:   The fact  that <code>uv version</code> does not generate SemVer version can be worked around (we use the <code>semver</code> Python module for generating versions) .  What I found problematic is that <code>uv version [--short]</code>  change the versionning sheme in a coercitive way, which prevent using  uv  for simple version  check.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dmarteau">@dmarteau</a> on 2025-12-05 14:12</div>
            <div class="timeline-body"><p>Ho, this was already expressed out, sorry for the noise...</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:31:57 UTC
    </footer>
</body>
</html>
