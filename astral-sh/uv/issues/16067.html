<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip tree` lists `pylint`'s dep `dill` twice - astral-sh/uv #16067</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv pip tree` lists `pylint`'s dep `dill` twice</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16067">#16067</a>
        opened by <a href="https://github.com/tropicoo">@tropicoo</a>
        on 2025-09-29 21:07
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/tropicoo">@tropicoo</a> on 2025-09-29 21:07</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><code>uv pip tree</code> lists <code>pylint</code>'s dependency <code>dill</code> twice in the tree.</p>
<h3>Project init</h3>
<pre><code class="language-bash">% uv init example &amp;&amp; cd example &amp;&amp; uv add pylint

Initialized project `example` at `/Users/.../example`
Using CPython 3.13.7
Creating virtual environment at: .venv
Resolved 9 packages in 33ms
Installed 7 packages in 12ms
 + astroid==3.3.11
 + dill==0.4.0
 + isort==6.0.1
 + mccabe==0.7.0
 + platformdirs==4.4.0
 + pylint==3.3.8
 + tomlkit==0.13.3
</code></pre>
<h3><code>uv pip tree -v</code> output with duplicate <code>dill</code> records</h3>
<pre><code class="language-bash">% uv pip tree -v
DEBUG uv 0.8.22 (ade2bdbd2 2025-09-23)
DEBUG Acquired shared lock for `/Users/.../.cache/uv`
DEBUG Searching for default Python interpreter in virtual environments, managed installations, or search path
DEBUG Found `cpython-3.13.7-macos-aarch64-none` at `/Users/.../example/.venv/bin/python3` (virtual environment)
DEBUG Using Python 3.13.7 environment at: .venv
pylint v3.3.8
├── astroid v3.3.11
├── dill v0.4.0
├── dill v0.4.0
├── isort v6.0.1
├── mccabe v0.7.0
├── platformdirs v4.4.0
└── tomlkit v0.13.3
DEBUG Released lock at `/Users/.../.cache/uv/.lock`

</code></pre>
<h3>Platform</h3>
<p>macOS (Darwin) 24.6.0 arm64</p>
<h3>Version</h3>
<p>uv 0.8.22 (ade2bdbd2 2025-09-23)</p>
<h3>Python version</h3>
<p>Python (CPython) 3.13.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @tropicoo on 2025-09-29 21:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`uv pip tree` list `pylint`'s dep `dill` twice" to "`uv pip tree` lists `pylint`'s dep `dill` twice" by @tropicoo on 2025-09-29 21:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-29 22:29</div>
            <div class="timeline-body"><p>Weird. I can reproduce this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-29 22:31</div>
            <div class="timeline-body"><pre><code>❯ uv pip tree --show-version-specifiers
pylint v3.3.8
├── astroid v3.3.11 [required: &gt;=3.3.8, &lt;=3.4.0.dev0]
├── dill v0.4.0 [required: &gt;=0.3.7]
├── dill v0.4.0 [required: &gt;=0.3.6]
├── isort v6.0.1 [required: &gt;=4.2.5, !=5.13, &lt;7]
├── mccabe v0.7.0 [required: &gt;=0.6, &lt;0.8]
├── platformdirs v4.4.0 [required: &gt;=2.2]
└── tomlkit v0.13.3 [required: &gt;=0.10.1]
</code></pre>
<p>There are two distinct version requests.</p>
<p>This package is listed multiple times with different Python version markers</p>
<pre><code>Requires-Dist: dill&gt;=0.2; python_version &lt; &quot;3.11&quot;
Requires-Dist: dill&gt;=0.3.6; python_version &gt;= &quot;3.11&quot;
Requires-Dist: dill&gt;=0.3.7; python_version &gt;= &quot;3.12&quot;
</code></pre>
<p>https://inspector.pypi.io/project/pylint/3.3.8/packages/2d/1a/711e93a7ab6c392e349428ea56e794a3902bb4e0284c1997cff2d7efdbc1/pylint-3.3.8-py3-none-any.whl/pylint-3.3.8.dist-info/METADATA#line.40</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @zanieb on 2025-09-30 15:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/terror">@terror</a> on 2025-09-30 16:48</div>
            <div class="timeline-body"><p>What would expected behaviour here look like? In the default view, should we collapse those into a single line per dependency, or still show every marker-specific requirement? And for <code>--show-version-specifiers</code> (and possibly <code>--no-dedupe</code>), would you expect to see each constraint listed separately, some merged/annotated representation, or something else?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-30 17:51</div>
            <div class="timeline-body"><p>Since the report is for a single Python version, I think only one of these should be applicable. I think I'd expect us to only show the one that is ultimately relevant.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/16078.html">astral-sh/uv#16078</a> on 2025-09-30 18:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/terror">@terror</a> on 2025-09-30 19:40</div>
            <div class="timeline-body"><blockquote>
<p>Since the report is for a single Python version, I think only one of these should be applicable. I think I'd expect us to only show the one that is ultimately relevant.</p>
</blockquote>
<p>I've put up https://github.com/astral-sh/uv/pull/16078 to address this, could use an initial look!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-10-01 16:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:12 UTC
    </footer>
</body>
</html>
