<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to run a library module? - astral-sh/uv #6638</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>How to run a library module?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/6638">#6638</a>
        opened by <a href="https://github.com/ollimandoliini">@ollimandoliini</a>
        on 2024-08-26 07:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ollimandoliini">@ollimandoliini</a> on 2024-08-26 07:11</div>
            <div class="timeline-body"><p>What is the recommended way for running a library module like I would do in vanilla python with the <code>-m</code> flag.</p>
<p>E.g.</p>
<pre><code class="language-sh">python -m mylibrary.module
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gusutabopb">@gusutabopb</a> on 2024-08-26 09:47</div>
            <div class="timeline-body"><p>I believe that'd be simply</p>
<pre><code class="language-bash">uv run python -m mylibrary.module
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ollimandoliini">@ollimandoliini</a> on 2024-08-26 10:25</div>
            <div class="timeline-body"><p>Thanks! That's what I have been using.</p>
<p>It's a bit confusing because there is no parallel for <code>uv run file.py</code> for running a module.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-08-26 12:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @charliermarsh on 2024-08-26 12:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-08-26 12:21</div>
            <div class="timeline-body"><p>We could consider adding <code>-m module</code> but in the meantime yes, explicitly adding <code>python</code> there is expected (\cc @zanieb).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-08-26 17:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-26 17:33</div>
            <div class="timeline-body"><p>I think we should document this. I'm not sure we should provide a shorthand yet... but it does seem kind of nice?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6914.html">astral-sh/uv#6914</a> on 2024-09-03 14:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnhoran">@johnhoran</a> on 2024-09-05 18:19</div>
            <div class="timeline-body"><p>One downside to the <code>uv run python -m mylibrary.module</code> approach is that this doesn't allow for the inline script metadata.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-05 18:21</div>
            <div class="timeline-body"><p>In that case, your module is defined in a script?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnhoran">@johnhoran</a> on 2024-09-06 09:09</div>
            <div class="timeline-body"><p>Some are in scripts, others are in folders with a <code>__main__.py</code> file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rogerbinns">@rogerbinns</a> on 2024-09-10 15:23</div>
            <div class="timeline-body"><p>My <a href="https://github.com/rogerbinns/apsw">package</a> has several command line tools that are invoked via <code>-m</code>.  They are not installed as separate commands.  For example you can do the following which all take extra parameters.</p>
<pre><code># gets a database cli shell
python -m apsw
# runs test suite
python -m apsw.tests
# runs benchmark
python -m apsw.speedtest
# runs automatic tracer of SQL
python -m apsw.trace</code></pre>
<p>I have 3 more under development.  I was hoping that I could do <code>uvx run apsw</code>, <code>uvx run apsw.speedtest</code> etc perhaps with a <code>-m</code> flag.  Sadly that is not the case.  Doing <code>uv run python -m apsw.speedtest</code> doesn't automagically install the package like <code>uvx run</code> does.</p>
<p>Please consider adding <code>-m</code> to <code>uvx run</code> or perhaps make that a default fallback behaviour if <code>uvx run</code> doesn't find an installed script.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gotmax23">@gotmax23</a> on 2024-09-11 09:10</div>
            <div class="timeline-body"><p><code>uv run -m</code> makes a lot of sense to me. You're trying to <em>run</em> a <em>module</em>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7281.html">astral-sh/uv#7281</a> on 2024-09-11 17:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/7297.html">astral-sh/uv#7297</a> on 2024-09-11 18:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Unassigned @zanieb by @zanieb on 2024-09-11 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @zanieb on 2024-09-11 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @zanieb on 2024-09-11 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-11 19:35</div>
            <div class="timeline-body"><p>Unless someone can think of another use for the <code>-m</code> flag I think it's fine to use for this and should be an easy first contribution.</p>
<p>cc @konstin</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rogerbinns">@rogerbinns</a> on 2024-09-11 22:12</div>
            <div class="timeline-body"><p>Is the <code>-m</code> flag even necessary?  If a relevant binary isn't found by uv run, couldn't it automatically then behave as though -m was provided?  I'm most interested in <code>uvx</code> working, so my <a href="https://github.com/astral-sh/uv/issues/6638#issuecomment-2341245714">earlier example</a> would just become <code>uvx apsw ...</code> or <code>uvx apsw.speedtest ...</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-12 00:34</div>
            <div class="timeline-body"><p>I don't think implicit behavior is great when executing things, for safety and security reasons.</p>
<p>Why not expose script entry points for your modules? https://docs.astral.sh/uv/concepts/projects/#defining-entry-points</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rogerbinns">@rogerbinns</a> on 2024-09-12 01:39</div>
            <div class="timeline-body"><p>I agree with the safety aspect in principle, but in this specific case the user already has explicitly said they are trying to run the provided parameters.  Adding more hoops to jump through will just be annoying.</p>
<p>The problem with <code>project.scripts</code> is that it creates new executables that end up in <code>$PATH</code>, in completions, and in a global namespace.  My project is python specific and doesn't need to contribute to that pollution.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7322.html">astral-sh/uv#7322</a> on 2024-09-12 04:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/7738.html">astral-sh/uv#7738</a> on 2024-09-27 13:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-27 13:22</div>
            <div class="timeline-body"><blockquote>
<p>end up in $PATH, in completions, and in a global namespace</p>
</blockquote>
<p>Fair, but note this isn't the case unless you install the project globally or activate the virtual environment â€” both of which are not necessary with <code>uv run</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rogerbinns">@rogerbinns</a> on 2024-09-27 13:50</div>
            <div class="timeline-body"><blockquote>
<p>... unless you install the project globally</p>
</blockquote>
<p>My project <strong>is</strong> installed globally on <a href="https://repology.org/project/python:apsw/versions">a large number of Linux/BSD distros</a>.   I'm left with two choices:</p>
<ul>
<li>Add the entry points, and then have every distro maintainer add extra logic in their packaging rules to exclude them when doing system packaging</li>
<li>Miss out on easy <code>uv run</code> for people using <code>uv</code>.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-27 15:32</div>
            <div class="timeline-body"><p>I see. Maybe your use-case would be fulfilled by #5903 then. There's also an exploration of module support in https://github.com/astral-sh/uv/pull/7322 â€” but there was some complexity in the command line handling. Maybe the solution is a <code>--module</code> flag like we are adding for <code>--script</code> #7739?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rogerbinns">@rogerbinns</a> on 2024-09-27 15:59</div>
            <div class="timeline-body"><p>I don't have a preference on the solution implementation, as long as the interface is as friendly as <code>python -m module args...</code>, and I'm happy to put whatever uv specific config is needed in pyproject.toml to make that happen.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-27 16:04</div>
            <div class="timeline-body"><p>Okay thanks for your feedback. @j178 do you see a problem with just doing <code>module: bool</code> instead of <code>module: Option&lt;String&gt;</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7754.html">astral-sh/uv#7754</a> on 2024-09-28 07:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/j178">@j178</a> on 2024-09-28 07:28</div>
            <div class="timeline-body"><p>Seems working ğŸ˜†  #7754</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-09-28 15:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/neopostmodern">@neopostmodern</a> on 2025-02-27 09:29</div>
            <div class="timeline-body"><p>I'm still lost on how to use this. I want to automatically install and execute a PyPi module.
Straightup <code>uvx</code> fails and if I understand the discussion above correctly, that's intentional:</p>
<pre><code>â¯ uvx pixels2svg &quot;/home/neopostmodern/example.png&quot;
   Built pixels2svg==0.2.2
Installed 6 packages in 199ms
The executable `pixels2svg` was not found.
warning: Package `pixels2svg` does not provide any executables.
</code></pre>
<p>Now I tried the suggested <code>-m</code> flag, but then I get:</p>
<pre><code>â¯ uv run -m pixels2svg &quot;/home/neopostmodern/example.png&quot;
/usr/bin/python3: No module named pixels2svg
</code></pre>
<p>(why does this refer to <code>/usr/bin</code>?)</p>
<p>Meanwhile <code>uvx -m</code> unfortunately isn't a thing:</p>
<pre><code>â¯ uvx -m pixels2svg &quot;/home/neopostmodern/example.png&quot;
error: unexpected argument '-m' found
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zhuoqun-chen">@zhuoqun-chen</a> on 2025-05-07 01:46</div>
            <div class="timeline-body"><blockquote>
<p>I'm still lost on how to use this. I want to automatically install and execute a PyPi module.æˆ‘è¿˜æ˜¯ä¸å¤ªæ¸…æ¥šå¦‚ä½•ä½¿ç”¨ã€‚æˆ‘æƒ³è‡ªåŠ¨å®‰è£…å’Œæ‰§è¡Œä¸€ä¸ª PyPi æ¨¡å—ã€‚ Straightup <code>uvx</code> fails and if I understand the discussion above correctly, that's intentional:ç›´æ¥ <code>uvx</code> å¤±è´¥ï¼Œå¦‚æœæˆ‘æ­£ç¡®ç†è§£ä¸Šé¢çš„è®¨è®ºï¼Œè¿™æ˜¯æœ‰æ„ä¸ºä¹‹çš„ï¼š</p>
<pre><code>â¯ uvx pixels2svg &quot;/home/neopostmodern/example.png&quot;
   Built pixels2svg==0.2.2
Installed 6 packages in 199ms
The executable `pixels2svg` was not found.
warning: Package `pixels2svg` does not provide any executables.
</code></pre>
<p>Now I tried the suggested <code>-m</code> flag, but then I get:ç°åœ¨æˆ‘å°è¯•äº†å»ºè®®çš„ <code>-m</code> æ ‡å¿—ï¼Œä½†éšåå‡ºç°ï¼š</p>
<pre><code>â¯ uv run -m pixels2svg &quot;/home/neopostmodern/example.png&quot;
/usr/bin/python3: No module named pixels2svg
</code></pre>
<p>(why does this refer to <code>/usr/bin</code>?)ï¼ˆä¸ºä»€ä¹ˆè¿™é‡Œå¼•ç”¨äº† <code>/usr/bin</code> ï¼Ÿï¼‰</p>
<p>Meanwhile <code>uvx -m</code> unfortunately isn't a thing:åŒæ—¶ <code>uvx -m</code> ä¸å¹¸ä¸å­˜åœ¨ï¼š</p>
<pre><code>â¯ uvx -m pixels2svg &quot;/home/neopostmodern/example.png&quot;
error: unexpected argument '-m' found
</code></pre>
</blockquote>
<p>Hi @neopostmodern, does this works for you?</p>
<pre><code>uvx --with pixels2svg python -m pixel2svg.pixel2svg &quot;/home/neopostmodern/example.png&quot;
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:21 UTC
    </footer>
</body>
</html>
