<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UV tries to compile a package available as a wheel - astral-sh/uv #7361</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UV tries to compile a package available as a wheel</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7361">#7361</a>
        opened by <a href="https://github.com/vilim">@vilim</a>
        on 2024-09-13 13:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/vilim">@vilim</a></div>
            <div class="timeline-body"><p>In gitlab CI, using the <code> ghcr.io/astral-sh/uv:python3.12-alpine</code> image, running
<code>uv sync --all-extras --dev</code> (as in the github actions guide)
and then on <code>uv run pytest</code>
uv tries (and fails, due to missing dependencies) to build a wheel for shapely 2.0.6:</p>
<pre><code>error: Failed to prepare distributions
  Caused by: Failed to fetch wheel: shapely==2.0.6
  Caused by: Build backend failed to build wheel through `build_wheel()` with exit status: 1
--- stdout:
...
Could not find geos-config executable. Either append the path to geos-config to PATH or manually provide the include_dirs, library_dirs, libraries and other link args for compiling against a GEOS version &gt;=3.5.
error: command &#x27;gcc&#x27; failed: No such file or directory
</code></pre>
<p>even though compatible wheels are listed in the lockfile</p>
<pre><code>  [[package]]
name = &quot;shapely&quot;
version = &quot;2.0.6&quot;
source = { registry = &quot;https://pypi.org/simple&quot; }
dependencies = [
    { name = &quot;numpy&quot;, marker = &quot;python_full_version &gt;= &#x27;3.12&#x27;&quot; },
]
sdist = { url = &quot;https://files.pythonhosted.org/packages/4a/89/0d20bac88016be35ff7d3c0c2ae64b477908f1b1dfa540c5d69ac7af07fe/shapely-2.0.6.tar.gz&quot;, hash = &quot;sha256:997f6159b1484059ec239cacaa53467fd8b5564dabe186cd84ac2944663b0bf6&quot;, size = 282361 }
wheels = [
    { url = &quot;https://files.pythonhosted.org/packages/37/15/269d8e1f7f658a37e61f7028683c546f520e4e7cedba1e32c77ff9d3a3c7/shapely-2.0.6-cp311-cp311-macosx_10_9_x86_64.whl&quot;, hash = &quot;sha256:5aeb0f51a9db176da9a30cb2f4329b6fbd1e26d359012bb0ac3d3c7781667a9e&quot;, size = 1449578 },
    { url = &quot;https://files.pythonhosted.org/packages/37/63/e182e43081fffa0a2d970c480f2ef91647a6ab94098f61748c23c2a485f2/shapely-2.0.6-cp311-cp311-macosx_11_0_arm64.whl&quot;, hash = &quot;sha256:9a7a78b0d51257a367ee115f4d41ca4d46edbd0dd280f697a8092dd3989867b2&quot;, size = 1296792 },
    { url = &quot;https://files.pythonhosted.org/packages/6e/5a/d019f69449329dcd517355444fdb9ddd58bec5e080b8bdba007e8e4c546d/shapely-2.0.6-cp311-cp311-manylinux_2_17_aarch64.manylinux2014_aarch64.whl&quot;, hash = &quot;sha256:f32c23d2f43d54029f986479f7c1f6e09c6b3a19353a3833c2ffb226fb63a855&quot;, size = 2443997 },
    { url = &quot;https://files.pythonhosted.org/packages/25/aa/53f145e5a610a49af9ac49f2f1be1ec8659ebd5c393d66ac94e57c83b00e/shapely-2.0.6-cp311-cp311-manylinux_2_17_x86_64.manylinux2014_x86_64.whl&quot;, hash = &quot;sha256:b3dc9fb0eb56498912025f5eb352b5126f04801ed0e8bdbd867d21bdbfd7cbd0&quot;, size = 2528334 },
    { url = &quot;https://files.pythonhosted.org/packages/64/64/0c7b0a22b416d36f6296b92bb4219d82b53d0a7c47e16fd0a4c85f2f117c/shapely-2.0.6-cp311-cp311-win32.whl&quot;, hash = &quot;sha256:d93b7e0e71c9f095e09454bf18dad5ea716fb6ced5df3cb044564a00723f339d&quot;, size = 1294669 },
    { url = &quot;https://files.pythonhosted.org/packages/b1/5a/6a67d929c467a1973b6bb9f0b00159cc343b02bf9a8d26db1abd2f87aa23/shapely-2.0.6-cp311-cp311-win_amd64.whl&quot;, hash = &quot;sha256:c02eb6bf4cfb9fe6568502e85bb2647921ee49171bcd2d4116c7b3109724ef9b&quot;, size = 1442032 },
    { url = &quot;https://files.pythonhosted.org/packages/46/77/efd9f9d4b6a762f976f8b082f54c9be16f63050389500fb52e4f6cc07c1a/shapely-2.0.6-cp312-cp312-macosx_10_9_x86_64.whl&quot;, hash = &quot;sha256:cec9193519940e9d1b86a3b4f5af9eb6910197d24af02f247afbfb47bcb3fab0&quot;, size = 1450326 },
    { url = &quot;https://files.pythonhosted.org/packages/68/53/5efa6e7a4036a94fe6276cf7bbb298afded51ca3396b03981ad680c8cc7d/shapely-2.0.6-cp312-cp312-macosx_11_0_arm64.whl&quot;, hash = &quot;sha256:83b94a44ab04a90e88be69e7ddcc6f332da7c0a0ebb1156e1c4f568bbec983c3&quot;, size = 1298480 },
    { url = &quot;https://files.pythonhosted.org/packages/88/a2/1be1db4fc262e536465a52d4f19d85834724fedf2299a1b9836bc82fe8fa/shapely-2.0.6-cp312-cp312-manylinux_2_17_aarch64.manylinux2014_aarch64.whl&quot;, hash = &quot;sha256:537c4b2716d22c92036d00b34aac9d3775e3691f80c7aa517c2c290351f42cd8&quot;, size = 2439311 },
    { url = &quot;https://files.pythonhosted.org/packages/d5/7d/9a57e187cbf2fbbbdfd4044a4f9ce141c8d221f9963750d3b001f0ec080d/shapely-2.0.6-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl&quot;, hash = &quot;sha256:98fea108334be345c283ce74bf064fa00cfdd718048a8af7343c59eb40f59726&quot;, size = 2524835 },
    { url = &quot;https://files.pythonhosted.org/packages/6d/0a/f407509ab56825f39bf8cfce1fb410238da96cf096809c3e404e5bc71ea1/shapely-2.0.6-cp312-cp312-win32.whl&quot;, hash = &quot;sha256:42fd4cd4834747e4990227e4cbafb02242c0cffe9ce7ef9971f53ac52d80d55f&quot;, size = 1295613 },
    { url = &quot;https://files.pythonhosted.org/packages/7b/b3/857afd9dfbfc554f10d683ac412eac6fa260d1f4cd2967ecb655c57e831a/shapely-2.0.6-cp312-cp312-win_amd64.whl&quot;, hash = &quot;sha256:665990c84aece05efb68a21b3523a6b2057e84a1afbef426ad287f0796ef8a48&quot;, size = 1442539 },
    { url = &quot;https://files.pythonhosted.org/packages/34/e8/d164ef5b0eab86088cde06dee8415519ffd5bb0dd1bd9d021e640e64237c/shapely-2.0.6-cp313-cp313-macosx_10_13_x86_64.whl&quot;, hash = &quot;sha256:42805ef90783ce689a4dde2b6b2f261e2c52609226a0438d882e3ced40bb3013&quot;, size = 1445344 },
    { url = &quot;https://files.pythonhosted.org/packages/ce/e2/9fba7ac142f7831757a10852bfa465683724eadbc93d2d46f74a16f9af04/shapely-2.0.6-cp313-cp313-macosx_11_0_arm64.whl&quot;, hash = &quot;sha256:6d2cb146191a47bd0cee8ff5f90b47547b82b6345c0d02dd8b25b88b68af62d7&quot;, size = 1296182 },
    { url = &quot;https://files.pythonhosted.org/packages/cf/dc/790d4bda27d196cd56ec66975eaae3351c65614cafd0e16ddde39ec9fb92/shapely-2.0.6-cp313-cp313-manylinux_2_17_aarch64.manylinux2014_aarch64.whl&quot;, hash = &quot;sha256:e3fdef0a1794a8fe70dc1f514440aa34426cc0ae98d9a1027fb299d45741c381&quot;, size = 2423426 },
    { url = &quot;https://files.pythonhosted.org/packages/af/b0/f8169f77eac7392d41e231911e0095eb1148b4d40c50ea9e34d999c89a7e/shapely-2.0.6-cp313-cp313-manylinux_2_17_x86_64.manylinux2014_x86_64.whl&quot;, hash = &quot;sha256:2c665a0301c645615a107ff7f52adafa2153beab51daf34587170d85e8ba6805&quot;, size = 2513249 },
    { url = &quot;https://files.pythonhosted.org/packages/f6/1d/a8c0e9ab49ff2f8e4dedd71b0122eafb22a18ad7e9d256025e1f10c84704/shapely-2.0.6-cp313-cp313-win32.whl&quot;, hash = &quot;sha256:0334bd51828f68cd54b87d80b3e7cee93f249d82ae55a0faf3ea21c9be7b323a&quot;, size = 1294848 },
    { url = &quot;https://files.pythonhosted.org/packages/23/38/2bc32dd1e7e67a471d4c60971e66df0bdace88656c47a9a728ace0091075/shapely-2.0.6-cp313-cp313-win_amd64.whl&quot;, hash = &quot;sha256:d37d070da9e0e0f0a530a621e17c0b8c3c9d04105655132a87cfff8bd77cc4c2&quot;, size = 1441371 },
]
</code></pre>
<p><code>uv sync and</code> <code>uv run pytest</code> run locally without issues though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-13 13:44</div>
            <div class="timeline-body"><p>I don&#x27;t think there are any Alpine-compatible wheels there, unless I&#x27;m mistaken. I believe Alpine needs <code>musllinux</code> wheels.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-13 13:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vilim">@vilim</a> on 2024-09-13 15:15</div>
            <div class="timeline-body"><p>Thank you, this was indeed the issue! Maybe a pointer to which wheel version is necessary would be helpful</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/vilim">@vilim</a> on 2024-09-13 15:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:34:01 UTC
    </footer>
</body>
</html>
