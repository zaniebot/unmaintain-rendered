<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pip install error: failed to rename file from ../.tmp to real package - astral-sh/uv #1508</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>pip install error: failed to rename file from ../.tmp to real package</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1508">#1508</a>
        opened by <a href="https://github.com/kafonek">@kafonek</a>
        on 2024-02-16 16:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kafonek">@kafonek</a> on 2024-02-16 16:12</div>
            <div class="timeline-body"><p>Maybe related to https://github.com/astral-sh/uv/issues/1454? I see the following issue when running inside a relatively beefy Ubuntu 22.04 docker container. The same lines run fine on my local Ubuntu 22.04 WSL box.</p>
<pre><code>‚ùØ uv venv
Using Python 3.10.12 interpreter at /usr/bin/python3.10
Creating virtualenv at: .venv

‚ùØ uv pip install torch
Resolved 22 packages in 9ms
error: Failed to install: nvidia_cublas_cu12-12.1.3.1-py3-none-manylinux1_x86_64.whl (nvidia-cublas-cu12==12.1.3.1)
  Caused by: failed to rename file from /root/si/.venv/lib/python3.10/site-packages/.tmp06hBnQ/__init__.py to /root/si/.venv/lib/python3.10/site-packages/nvidia/__init__.py
  Caused by: No such file or directory (os error 2)
</code></pre>
<p>I've also seen the same error happen with <code>pysoundfile</code> when installing a long list of deps from <code>requirements.txt</code> but then installing <code>pysoundfile</code> on its own in a fresh venv works. Hope this helps give you an idea of where a potential race condition or other issue might be.</p>
<pre><code>Downloaded 399 packages in 2m 05s
error: Failed to install: pysoundfile-0.9.0.post1-py2.py3-none-any.whl (pysoundfile==0.9.0.post1)
  Caused by: failed to rename file from /root/si/.venv/lib/python3.10/site-packages/.tmp3vcGXK/soundfile.py to /root/si/.venv/lib/python3.10/site-packages/soundfile.py
  Caused by: No such file or directory (os error 2)
</code></pre>
<pre><code>‚ùØ uv venv
Using Python 3.10.12 interpreter at /usr/bin/python3.10
Creating virtualenv at: .venv

‚ùØ uv pip install pysoundfile
Resolved 3 packages in 6ms
Installed 3 packages in 28ms
 + cffi==1.16.0
 + pycparser==2.21
 + pysoundfile==0.9.0.post1
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-16 16:13</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-02-16 16:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../dagster-io/dagster/pulls/19871.html">dagster-io/dagster#19871</a> on 2024-02-16 20:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-17 01:30</div>
            <div class="timeline-body"><p>Do you mind trying again with v0.1.3?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kafonek">@kafonek</a> on 2024-02-17 01:37</div>
            <div class="timeline-body"><p>hard to prove a negative, but all of the situations that were consistently leading to this error before are working with 0.1.3 üöÄ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kafonek">@kafonek</a> on 2024-02-17 01:44</div>
            <div class="timeline-body"><p>Probably fixed, anyone else still seeing this should feel free to reopen this though.</p>
<p>Thanks @charliermarsh ‚ù§Ô∏è</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @kafonek on 2024-02-17 01:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-17 01:44</div>
            <div class="timeline-body"><p>Sweet, let me know if it pops up again!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kafonek">@kafonek</a> on 2024-02-17 02:00</div>
            <div class="timeline-body"><p>For posterity, was this fixed in https://github.com/astral-sh/uv/pull/1546?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-17 02:11</div>
            <div class="timeline-body"><p>Yes (that was the intent, at least).</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:56 UTC
    </footer>
</body>
</html>
