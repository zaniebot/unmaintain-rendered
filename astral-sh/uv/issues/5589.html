<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv can't find python interpreter automatically - astral-sh/uv #5589</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv can&#x27;t find python interpreter automatically</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/5589">#5589</a>
        opened by <a href="https://github.com/newne">@newne</a>
        on 2024-07-30 08:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/newne">@newne</a></div>
            <div class="timeline-body"><p>Here is the problem:</p>
<pre><code>(base) ncg@ncg-pc:~/Documents/code/leap-algorithm/production/cooler/offline_rl_control$ uv --version
uv 0.2.31
(base) ncg@ncg-pc:~/Documents/code/leap-algorithm/production/cooler/offline_rl_control$ uv python list
warning: `uv python list` is experimental and may change without warning
cpython-3.12.4-linux-x86_64-gnu     &lt;download available&gt;
cpython-3.12.3-linux-x86_64-gnu     /usr/bin/python3.12
cpython-3.12.3-linux-x86_64-gnu     /usr/bin/python3 -&gt; python3.12
cpython-3.12.3-linux-x86_64-gnu     /bin/python3.12
cpython-3.12.3-linux-x86_64-gnu     /bin/python3 -&gt; python3.12
cpython-3.11.9-linux-x86_64-gnu     &lt;download available&gt;
cpython-3.10.14-linux-x86_64-gnu    /home/ncg/.local/share/uv/python/cpython-3.10.14-linux-x86_64-gnu/bin/python3 -&gt; python3.10
cpython-3.9.19-linux-x86_64-gnu     &lt;download available&gt;
cpython-3.9.12-linux-x86_64-gnu     /home/ncg/anaconda3/bin/python3.9
cpython-3.9.12-linux-x86_64-gnu     /home/ncg/anaconda3/bin/python3 -&gt; python3.9
cpython-3.9.12-linux-x86_64-gnu     /home/ncg/anaconda3/bin/python -&gt; python3.9
cpython-3.8.19-linux-x86_64-gnu     &lt;download available&gt;
pypy-3.7.13-linux-x86_64-gnu        &lt;download available&gt;
(base) ncg@ncg-pc:~/Documents/code/leap-algorithm/production/cooler/offline_rl_control$ uv venv -p 3.10
  × No interpreter found for Python 3.10 in system path
(base) ncg@ncg-pc:~/Documents/code/leap-algorithm/production/cooler/offline_rl_control$ uv python install 3.10
warning: `uv python install` is experimental and may change without warning
Searching for Python versions matching: Python 3.10
Found existing installation for Python 3.10: cpython-3.10.14-linux-x86_64-gnu
(base) ncg@ncg-pc:~/Documents/code/leap-algorithm/production/cooler/offline_rl_control$ uv venv --python /home/ncg/.local/share/uv/python/cpython-3.10.14-linux-x86_64-gnu/bin/python3 
Using Python 3.10.14 interpreter at: /home/ncg/.local/share/uv/python/cpython-3.10.14-linux-x86_64-gnu/bin/python3
Creating virtualenv at: .venv
Activate with: source .venv/bin/activate
(base) ncg@ncg-pc:~/Documents/code/leap-algorithm/production/cooler/offline_rl_control$ source .venv/bin/activate
(offline_rl_control) (base) ncg@ncg-pc:~/Documents/code/leap-algorithm/production/cooler/offline_rl_control$ python -V
</code></pre>


</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2024-07-30 09:09</div>
            <div class="timeline-body"><p>As for the solution to this problem, adding <code>python-preference</code> and setting its value to something other than <code>only-system</code> should do the trick.
e.g.</p>
<pre><code>uv venv -p 3.10.14 --python-preference installed
</code></pre>
<p>Although I tested this on Windows, I used the same solution to resolve the issue of not being able to create a virtual environment using managed installation on Ubuntu.</p>
python-preference possible values for uv 0.2.31 (48162de97 2024-07-29)
<pre><code>--python-preference &lt;PYTHON_PREFERENCE&gt;
          Whether to prefer using Python installations that are already present on the system, or those that are downloaded and installed by uv

          Possible values:
          - only-managed: Only use managed Python installations; never use system Python installations
          - installed:    Prefer installed Python installations, only download managed Python installations if no system Python installation is found
          - managed:      Prefer managed Python installations over system Python installations, even if fetching is required
          - system:       Prefer system Python installations over managed Python installations
          - only-system:  Only use system Python installations; never use managed Python installations
</code></pre>
<p>According to the document, the default value of python-preference should be <code>installed</code>. However, the actual result seems to be inconsistent with the documentation.
https://github.com/astral-sh/uv/blob/c0d3da8b6ae134036b3ed024762b08c4fb9f967b/docs/settings.md#python-preference--python-preference-
For more information about this flag, you might need to ask the programmer who wrote UV. I&#x27;ve only submitted document modifications.</p>
python-preference options test
<pre><code>❯ uv python list --only-installed
warning: `uv python list` is experimental and may change without warning
cpython-3.12.4-windows-x86_64-none     C:\Users\user_name\AppData\Local\Programs\Python\Python312\python.exe
cpython-3.11.9-windows-x86_64-none     C:\Users\user_name\AppData\Local\Programs\Python\Python311\python.exe
cpython-3.10.14-windows-x86_64-none    C:\Users\user_name\AppData\Roaming\uv\data\python\cpython-3.10.14-windows-x86_64-none\install\python.exe
cpython-3.10.11-windows-x86_64-none    C:\Users\user_name\AppData\Local\Programs\Python\Python310\python.exe
cpython-3.9.19-windows-x86_64-none     C:\Users\user_name\AppData\Roaming\uv\data\python\cpython-3.9.19-windows-x86_64-none\python.exe
# ----------------------------------------
❯ uv venv -p 3.10.14 --python-preference only-managed
Using Python 3.10.14
Creating virtualenv at: .venv
Activate with: .venv\Scripts\activate
# ----------------------------------------
❯ uv venv -p 3.10.14 --python-preference installed
Using Python 3.10.14
Creating virtualenv at: .venv
Activate with: .venv\Scripts\activate
# ----------------------------------------
❯ uv venv -p 3.10.14 --python-preference managed
Using Python 3.10.14
Creating virtualenv at: .venv
Activate with: .venv\Scripts\activate
# ----------------------------------------
❯ uv venv -p 3.10.14 --python-preference system
Using Python 3.10.14
Creating virtualenv at: .venv
Activate with: .venv\Scripts\activate
# ----------------------------------------
❯ uv venv -p 3.10.14 --python-preference only-system
  × No interpreter found for Python 3.10.14 in system path or `py` launcher
# ----------------------------------------
❯ uv venv -p 3.10.14
  × No interpreter found for Python 3.10.14 in system path or `py` launcher
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-30 12:27</div>
            <div class="timeline-body"><p>\cc @zanieb @konstin</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-30 13:27</div>
            <div class="timeline-body"><p>Using managed interpreters with <code>uv venv</code> requires the <code>--preview</code> flag right now. We&#x27;ll change this soon to match the behavior of all the preview commands (like <code>uv python install</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-30 13:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-20 18:43</div>
            <div class="timeline-body"><p>This should be resolved now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-20 18:43</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:32:20 UTC
    </footer>
</body>
</html>
