<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unable to install a package - rabbitmq-amqp-python-client - astral-sh/uv #12613</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Unable to install a package - rabbitmq-amqp-python-client</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/12613">#12613</a>
        opened by <a href="https://github.com/akshaybabloo">@akshaybabloo</a>
        on 2025-04-01 23:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/akshaybabloo">@akshaybabloo</a> on 2025-04-01 23:19</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I am trying to install <code>rabbitmq-amqp-python-client</code> with <code>uv add</code> and I am getting this error:</p>
<pre><code>Resolved 33 packages in 756ms
  × Failed to build `python-qpid-proton==0.39.0`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `setuptools.build_meta.build_wheel` failed (exit status: 1)

      [stdout]
      running bdist_wheel
      running build
      running build_py
      copying cproton.py -&gt; build/lib.linux-x86_64-cpython-312
      copying proton/_transport.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_common.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_url.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_delivery.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_selectable.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_condition.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_tracing.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_handlers.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_reactor.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_data.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_wrapper.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_handler.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/handlers.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_utils.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_io.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/__init__.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/tracing.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_message.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/reactor.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_exceptions.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_events.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/utils.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      copying proton/_endpoints.py -&gt; build/lib.linux-x86_64-cpython-312/proton
      running build_ext
      generating cffi module 'build/temp.linux-x86_64-cpython-312/cproton_ffi.c'
      already up-to-date
      building 'cproton_ffi' extension
      cc -pthread -fno-strict-overflow -Wsign-compare -Wunreachable-code -DNDEBUG -g -O3 -Wall -fdebug-default-version=4 -fPIC -I/tools/deps/include
      -I/tools/deps/include/ncursesw -I/tools/deps/libedit/include -fPIC -DPROTON_DECLARE_STATIC -I./include -I./src -I/home/akshay/.cache/uv/builds-v0/.tmpLcYzg4/include
      -I/home/akshay/.local/share/uv/python/cpython-3.12.0-linux-x86_64-gnu/include/python3.12 -c ./src/compiler/gcc/start.c -o build/temp.linux-x86_64-cpython-312/src/compiler/gcc/start.o -std=c99

      [stderr]
      /home/akshay/.cache/uv/builds-v0/.tmpLcYzg4/lib/python3.12/site-packages/setuptools/dist.py:759: SetuptoolsDeprecationWarning: License classifiers are deprecated.
      !!

              ********************************************************************************
              Please consider removing the following classifiers in favor of a SPDX license expression:

              License :: OSI Approved :: Apache Software License

              See https://packaging.python.org/en/latest/guides/writing-pyproject-toml/#license for details.
              ********************************************************************************

      !!
        self._finalize_license_expression()
      cc: error: unrecognized command-line option ‘-fdebug-default-version=4’
      error: command '/usr/bin/cc' failed with exit code 1

      hint: This usually indicates a problem with the package or the build environment.
  help: If you want to add the package regardless of the failed resolution, provide the `--frozen` flag to skip locking and syncing.
</code></pre>
<p>Seems to be working fine if I use <code>uv pip install</code>, because it's using Miniconda. I have opened an issue with them - https://github.com/rabbitmq/rabbitmq-amqp-python-client/issues/60 - and looks like it was fixed with pip.</p>
<h3>Platform</h3>
<p>Ubuntu 22.04</p>
<h3>Version</h3>
<p>uv 0.6.11</p>
<h3>Python version</h3>
<p>Python 3.12.8</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @akshaybabloo on 2025-04-01 23:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-01 23:26</div>
            <div class="timeline-body"><p>Does <code>uv pip install</code> use a different compiler? The failure is using <code>cc</code>: <code>error: command '/usr/bin/cc' failed with exit code 1</code>. You can set the <code>CC</code> environment variable to use a different one. What compiler does <code>/usr/bin/cc</code> point to?</p>
<p>Does <code>-fdebug-default-version=4</code> come from <code>python-qpid-proton</code>'s build system? I think we should be sanitizing it from ours. Can you try <code>uv python install --reinstall</code> to ensure you have our latest patches?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2025-04-01 23:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lukebakken">@lukebakken</a> on 2025-04-02 17:32</div>
            <div class="timeline-body"><p>FWIW, <code>uv add</code> works as expected on my up-to-date Arch Linux system. I only have <code>gcc</code> installed, not <code>clang</code>. I have Python 3.13 installed via <code>pacman</code> as well as <code>asdf</code>. Here is some information, maybe it will be useful:</p>
<ul>
<li>Project - https://github.com/lukebakken/rabbitmq-amqp-python-client-60</li>
<li>Transcript of <code>uv add --verbose --verbose rabbitmq-amqp-python-client 2&gt;&amp;1 | tee /tmp/uv-add-arch-linux.txt</code> - https://github.com/lukebakken/rabbitmq-amqp-python-client-60/blob/main/uv-add-arch-linux.txt</li>
<li>Output of <code>pacman --query</code> - https://github.com/lukebakken/rabbitmq-amqp-python-client-60/blob/main/pacman-query.txt</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/akshaybabloo">@akshaybabloo</a> on 2025-08-06 02:44</div>
            <div class="timeline-body"><p>Just tested it with uv 0.8.5. Seems to be working now</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @akshaybabloo on 2025-08-06 02:44</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:27 UTC
    </footer>
</body>
</html>
