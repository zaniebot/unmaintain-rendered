<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support `PIP_INDEX_URL` for setting `pip` index urls - astral-sh/uv #1535</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support `PIP_INDEX_URL` for setting `pip` index urls</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1535">#1535</a>
        opened by <a href="https://github.com/humanzz">@humanzz</a>
        on 2024-02-16 19:49
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/humanzz">@humanzz</a> on 2024-02-16 19:49</div>
            <div class="timeline-body"><p>This is a request to support using alternative index urls - not just via the <code>--index-url</code> option - but also via the related pip environment variables</p>
<ul>
<li><code>PIP_INDEX_URL</code></li>
<li><code>PIP_TRUSTED_HOST</code> (to support none https schemes)</li>
</ul>
<p>The use case I'm having is that I use a local pip server/proxy running on <code>http://127.0.0.1:&lt;port&gt;/...</code>. (This is to adhere to existing work policies/standards when using <code>pip</code>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Support `PIP_INDEX_URL` and `PIP_TRUSTED_HOST` for setting pip index urls" to "Support `PIP_INDEX_URL` and `PIP_TRUSTED_HOST` for setting `pip` index urls" by @humanzz on 2024-02-16 19:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/marcelbischoff">@marcelbischoff</a> on 2024-02-16 20:20</div>
            <div class="timeline-body"><p>Also seeing 405s for a private PIP repo, probably worse a separate issue once I figure out more.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-16 20:39</div>
            <div class="timeline-body"><p>We support <code>PIP_INDEX_URL</code> via <code>UV_INDEX_URL</code> — we won't support pip environment variables.</p>
<p>See #1339 for discussion around trusted host support.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @zanieb on 2024-02-16 20:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @zanieb on 2024-02-16 20:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/humanzz">@humanzz</a> on 2024-02-16 21:00</div>
            <div class="timeline-body"><p>Thanks for the prompt response @zanieb.
Though not-ideal, I believe things can work with the <code>UV_INDEX_URL</code>.
I'll drop a comment on #1339 about <code>PIP_TRUSTED_HOST</code> to maybe have it supported via <code>UV_TRUSTED_HOST</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1339.html">astral-sh/uv#1339</a> on 2024-02-16 21:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/baggiponte">@baggiponte</a> on 2024-02-16 21:59</div>
            <div class="timeline-body"><p>+1! This is kinda smart. UV_* env cars should take precedence, but being able to understand PIP_* vars could drive adoption.</p>
<p>For example: a client I work with has to inject PIP_INDEX_URL as a Docker build arg. If I wanted to use UV in my images, I'd have to open a PR with the devops team just for that. Tough luck.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1688.html">astral-sh/uv#1688</a> on 2024-02-19 14:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/teruokun">@teruokun</a> on 2024-02-22 18:18</div>
            <div class="timeline-body"><p>Also +1 in general if the idea is to be a drop-in replacement for <code>pip</code>.  I know pip supports an unwieldy number of command-line and configuration variables, so it's fine if the feature-set only matches what is reasonable forward-looking <code>pip</code> usage rather than the kitchen sink of legacy options, but if the goal is that I can take most reasonable <code>pip</code> commands and simply replace it with <code>uv pip</code> and have it usually work, that would be the best possible user experience OOTB.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-23 04:31</div>
            <div class="timeline-body"><p>I've considered it some more and basically I don't see a problem supporting these where it's not too invasive. Ideally we'd support <code>UV_INDEX_URL</code> and <code>PIP_INDEX_URL</code>. I think some pip flags, like <code>PIP_PREFER_BINARY</code>, do not belong in our top level <code>UV_*</code> namespace so we'd either <em>only</em> support the <code>pip</code> variable or also have <code>UV_PIP_..</code>? I'm not sure — there are some open questions around this. There's also the discussion in #1657 which may complicate the naming of these variables.</p>
<p>I'd like to get consensus from other maintainers before work begins on this though. cc @charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> removed by @zanieb on 2024-02-23 04:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/2183.html">astral-sh/uv#2183</a> on 2024-03-04 22:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Support `PIP_INDEX_URL` and `PIP_TRUSTED_HOST` for setting `pip` index urls" to "Support `PIP_INDEX_URL` for setting `pip` index urls" by @zanieb on 2024-03-04 22:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1789.html">astral-sh/uv#1789</a> on 2024-03-04 22:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/david-waterworth">@david-waterworth</a> on 2024-03-04 22:56</div>
            <div class="timeline-body"><p>Is <code>UV_INDEX_URL</code> already implemented? It doesn't appear to be working for me - I'm using AWS Code Artifact and set UV_INDEX_URL=PIP_INDEX_URL then tried to install <code>uv pip install torch --verbose</code>, the messages imply it's still uisng pypi.org</p>
<pre><code>uv_installer::downloader::download total=2
   uv_installer::downloader::get_wheel name=torch==2.2.1, size=Some(755527312), url=&quot;https://files.pythonhosted.org/packages/a7/ad/fbe7d4cffb76da4e478438853b51305361c719cff929ab70a808e7fb75e7/torch-2.2.1-cp310-cp310-manylinux1_x86_64.whl&quot;
     uv_distribution::distribution_database::get_or_build_wheel dist=Built(Registry(RegistryBuiltDist { filename: WheelFilename { name: PackageName(&quot;torch&quot;), version: &quot;2.2.1&quot;, python_tag: [&quot;cp310&quot;], abi_tag: [&quot;cp310&quot;], platform_tag: [&quot;manylinux1_x86_64&quot;] }, file: File { dist_info_metadata: Some(Hashes(Hashes { md5: None, sha256: Some(&quot;e562543ed257f1ebd1ec5abf008dee10394cc142113816cd9536d1d0d61ce46c&quot;) })), filename: &quot;torch-2.2.1-cp310-cp310-manylinux1_x86_64.whl&quot;, hashes: Hashes { md5: None, sha256: Some(&quot;8d3bad336dd2c93c6bcb3268e8e9876185bda50ebde325ef211fb565c7d15273&quot;) }, requires_python: Some(VersionSpecifiers([VersionSpecifier { operator: GreaterThanEqual, version: &quot;3.8.0&quot; }])), size: Some(755527312), upload_time_utc_ms: Some(1708629418225), url: AbsoluteUrl(&quot;https://files.pythonhosted.org/packages/a7/ad/fbe7d4cffb76da4e478438853b51305361c719cff929ab70a808e7fb75e7/torch-2.2.1-cp310-cp310-manylinux1_x86_64.whl&quot;), yanked: Some(Bool(false)) }, index: Pypi(VerbatimUrl { url: Url { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }) }))
       uv_client::cached_client::get_serde 
         uv_client::cached_client::get_cacheable 
           uv_client::cached_client::read_and_parse_cache file=/home/dave/.cache/uv/wheels-v0/pypi/torch/torch-2.2.1-cp310-cp310-manylinux1_x86_64.http
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-04 23:13</div>
            <div class="timeline-body"><p>Yup -- I ran <code> UV_INDEX_URL=https://test.pypi.org/simple cargo run pip install requests --refresh --reinstall --verbose</code> and see:</p>
<pre><code> uv_resolver::resolver::process_request request=Prefetch requests *
 uv_client::cached_client::from_path_sync path=&quot;/Users/crmarsh/Library/Caches/uv/simple-v3/e8208120cae3ba69/requests.rkyv&quot;
          0.144222s   0ms DEBUG uv_client::cached_client Found stale response for: https://test.pypi.org/simple/requests/
          0.144244s   0ms DEBUG uv_client::cached_client Sending revalidation request for: https://test.pypi.org/simple/requests/
       uv_client::cached_client::revalidation_request url=&quot;https://test.pypi.org/simple/requests/&quot;
          0.250039s 106ms DEBUG uv_client::cached_client Found not-modified response for: https://test.pypi.org/simple/requests/
       uv_client::cached_client::refresh_cache file=/Users/crmarsh/Library/Caches/uv/simple-v3/e8208120cae3ba69/requests.rkyv
...
 uv_installer::downloader::download total=1
   uv_installer::downloader::get_wheel name=requests==2.5.4.1, size=Some(468942), url=&quot;https://test-files.pythonhosted.org/packages/6d/00/8ed1b6ea43b10bfe28d08e6af29fd6aa5d8dab5e45ead9394a6268a2d2ec/requests-2.5.4.1-py2.py3-none-any.whl&quot;
     uv_distribution::distribution_database::get_or_build_wheel dist=Built(Registry(RegistryBuiltDist { filename: WheelFilename { name: PackageName(&quot;requests&quot;), version: &quot;2.5.4.1&quot;, python_tag: [&quot;py2&quot;, &quot;py3&quot;], abi_tag: [&quot;none&quot;], platform_tag: [&quot;any&quot;] }, file: File { dist_info_metadata: Some(Hashes(Hashes { md5: None, sha256: Some(&quot;9f5d3a2d16cc59a5bb12d972cd8a46bd7f2ee620f2501c8fd561fa104658fc51&quot;) })), filename: &quot;requests-2.5.4.1-py2.py3-none-any.whl&quot;, hashes: Hashes { md5: None, sha256: Some(&quot;0a2c98e46121e7507afb0edc89d342641a1fb9e8d56f7d592d4975ee6b685f9a&quot;) }, requires_python: None, size: Some(468942), upload_time_utc_ms: Some(1426282195769), url: AbsoluteUrl(&quot;https://test-files.pythonhosted.org/packages/6d/00/8ed1b6ea43b10bfe28d08e6af29fd6aa5d8dab5e45ead9394a6268a2d2ec/requests-2.5.4.1-py2.py3-none-any.whl&quot;), yanked: Some(Bool(false)) }, index: Url(VerbatimUrl { url: Url { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;test.pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: Some(&quot;https://test.pypi.org/simple&quot;) }) }))
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-03-04 23:13</div>
            <div class="timeline-body"><p>Yes <code>UV_INDEX_URL</code> is implemented. Have you tried using <code>export</code>? Can you <code>echo $UV_INDEX_URL</code> to confirm it's set?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/david-waterworth">@david-waterworth</a> on 2024-03-04 23:22</div>
            <div class="timeline-body"><p>Yes it's exported and I tried echo,</p>
<pre><code>echo $UV_INDEX_URL
https://XXX@XXX-XXX.d.codeartifact.ap-southeast-2.amazonaws.com/pypi/XXX/simple/
</code></pre>
<p>(uv version is 0.1.14)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/david-waterworth">@david-waterworth</a> on 2024-03-04 23:37</div>
            <div class="timeline-body"><p>Ahh no sorry it wasn't exported, it works now thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/morotti">@morotti</a> on 2024-03-25 11:21</div>
            <div class="timeline-body"><p>Hello, any update on this issue?</p>
<p>It would be really helpful for uv adoption if uv could understand <code>PIP_INDEX_URL</code> out of the box. :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/copdips">@copdips</a> on 2024-10-03 19:22</div>
            <div class="timeline-body"><p>in <code>~/.bashrc</code>:</p>
<pre><code class="language-bash">export UV_DEFAULT_INDEX=$PIP_INDEX_URL
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-03 19:39</div>
            <div class="timeline-body"><p>Thanks @copdips</p>
<p>I don't think we'll support reading pip variables — we support <code>UV_INDEX_URL</code> and <code>UV_EXTRA_INDEX_URL</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-03 19:39</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:56 UTC
    </footer>
</body>
</html>
