<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add &quot;lockfile&quot; for uv tools? - astral-sh/uv #6931</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add &quot;lockfile&quot; for uv tools?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/6931">#6931</a>
        opened by <a href="https://github.com/baggiponte">@baggiponte</a>
        on 2024-09-02 09:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/baggiponte">@baggiponte</a></div>
            <div class="timeline-body"><p>Ciao! I could not find any mention of it, but I was wondering whether you would consider adding a <code>tools</code> section under <code>uv.receipt</code>, or another lockfile-like lib where uv is configured, to retain a list of tools installed.</p>
<p>My usecase would be that my <code>install.sh</code> script does not need to be updated everytime I want a new tool to be globally available with uv ðŸ˜… In general, I think that would make uv more &quot;reproducible&quot; across different machines that a user may be using it for. I don&#x27;t think it should stay in a section below the &quot;global&quot; <code>uv.toml</code> file, though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-02 17:18</div>
            <div class="timeline-body"><p>We store a per-tool receipt at, e.g., <code>/Users/crmarsh/.local/share/uv/tools/black/uv-receipt.toml</code>. But it&#x27;s not a lockfile, it just contains the installation request (e.g., the version bounds, any settings) to support <code>uv tool upgrade</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-02 17:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jinnatar">@jinnatar</a> on 2024-09-27 12:19</div>
            <div class="timeline-body"><p>Something like this would be very useful for preserving how the tools were installed. Say, if I do a:</p>
<pre><code>uv tool install twine --with keyring-pass
</code></pre>
<p>.. It would be nice if this lockfile then remembers that <code>--with</code> and allows me to then repro that on another machine. It&#x27;s available in the <code>uv-receipt.toml</code>:</p>
<pre><code>[tool]
requirements = [
    { name = &quot;twine&quot; },
    { name = &quot;keyring-pass&quot; },
]
</code></pre>
<p>.. but I don&#x27;t think any current invocation is even capable of showing that it&#x27;s there. I could of course script around exporting the receipts, but since that hardcodes the entrypoint paths I imagine that path is filled with pain.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/powercoconola">@powercoconola</a> on 2024-11-20 19:43</div>
            <div class="timeline-body"><p>I think this would be a very useful feature. For comparison, <code>pipx</code> has this workflow:</p>
<pre><code># Output rich data in json format.
pipx list --json

# Install from spec file generated from pipx list --json
pipx install-all &lt;spec_metadata_file&gt;
</code></pre>
<p>However, one feature I think is missing from <code>pipx</code> is ability to specify access tokens and specific git repos to pull from.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:33:33 UTC
    </footer>
</body>
</html>
