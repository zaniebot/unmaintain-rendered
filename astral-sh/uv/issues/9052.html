<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to handle yanked packages - astral-sh/uv #9052</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to handle yanked packages</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9052">#9052</a>
        opened by <a href="https://github.com/LuchiLucs">@LuchiLucs</a>
        on 2024-11-12 09:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/LuchiLucs">@LuchiLucs</a> on 2024-11-12 09:41</div>
            <div class="timeline-body"><p>I recently add a new package in my project by means of <code>uv add packagename</code> which resulted in the yanked dependecy warning. How should I handle this scenario? Is there a command that &quot;re-resolve the project depedencies&quot; trying to avoid these and other &quot;conflicts&quot;?</p>
<p>Thank you</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-12 14:37</div>
            <div class="timeline-body"><p>Hm it's surprising that we'd resolve to a yanked version, is that the only version available? Does something require that exact version?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LuchiLucs">@LuchiLucs</a> on 2024-11-12 15:16</div>
            <div class="timeline-body"><p>Thank you for your feedback @zanieb</p>
<p>To add some context: we are developing in agile, so we are using <code>uv add packagename</code> during development as soon as a new depedency arises. We did not add all the packages together in order to resolve them together (as we are used to using <code>pip</code>, I don't know if under the hood <code>uv </code>works like <code>pip</code>).</p>
<p>Moreover, here are the bits from the <code>pyproject.toml</code> file in one of our current branches where the warning appeared:</p>
<pre><code>requires-python = &quot;==3.12.6&quot;
dependencies = [
    &quot;amazon-textract-textractor&gt;=1.8.4&quot;,
    &quot;colorama&gt;=0.4.6&quot;,
    &quot;fastapi[standard]&gt;=0.115.0&quot;,
    &quot;langchain&gt;=0.3.7&quot;,
    &quot;langchain-community&gt;=0.3.5&quot;,
    &quot;numpy&gt;=1.26.4&quot;,
    &quot;pandas&gt;=2.2.3&quot;,
    &quot;pydantic-settings&gt;=2.5.2&quot;,
    &quot;python-dotenv&gt;=1.0.1&quot;,
    &quot;s3fs&gt;=2024.10.0&quot;,
    &quot;envyaml&gt;=1.10.211231&quot;,
    &quot;openai&gt;=1.54.3&quot;,
    &quot;aiofiles&gt;=24.1.0&quot;,
]
</code></pre>
<p>The package is <code>aiofiles</code>, the yanked version was the <code>six</code> package dependecy of <code>aiofiles</code>, as far as I remember the warning message from this morning.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 17:46</div>
            <div class="timeline-body"><p>I think it's possible that we continue giving you a yanked version if you <em>already</em> have a <code>uv.lock</code> that includes it, and you'd need to run <code>uv lock --upgrade-package six</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-11-12 17:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-12 17:47</div>
            <div class="timeline-body"><p>I don't see any yanked <code>six</code> versions though -- could it have been a different dependency?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LuchiLucs">@LuchiLucs</a> on 2024-11-13 09:39</div>
            <div class="timeline-body"><p>Thank you for your feedbacks, I did run <code>uv lock --upgrade</code> and the lock file was updated (the <code>pyproject.toml</code> was not touched), without warnings.
How could I test if there is still a problem? Should I remove the lock file and delete the packages in the toml file and re-add them together in order to re-trigger the resolution of versions?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/EternityForest">@EternityForest</a> on 2024-12-27 11:33</div>
            <div class="timeline-body"><p>I got some errors earlier when trying to install a package(From a local folder I was developing with) that had a hard dependency on one specific yanked version of Mako.</p>
<p>Is there documentation somewhere for what the rules are? Seems like failing due to a yanked transitive dependency should not ever happen, especially not if it's something that could happen to an end user trying to install things, the whole point of pinned dependencies is exactly reproducibility and yanking can break that if not handled right</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-28 16:57</div>
            <div class="timeline-body"><p>@EternityForest If you have a hard dependency on a yanked dependency, it is correct for us to continue to use the dependency. That's what the end-user would encounter too.</p>
<p>@LuchiLucs I think your problem sounds fixed? Please let us know if you have problems still.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-12-28 16:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:29 UTC
    </footer>
</body>
</html>
