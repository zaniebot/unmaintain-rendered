<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Write migration guides - astral-sh/uv #5200</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Write migration guides</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/5200">#5200</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-07-19 00:40
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-19 00:40</div>
            <div class="timeline-body"><p>e.g from Poetry and pip-tools to uv</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @zanieb on 2024-07-19 00:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2024-07-23 14:28</div>
            <div class="timeline-body"><p><code>pdm</code> is pretty similar to poetry but it could still be worth having one for it as well.</p>
<p><code>pdm</code> supports defining scripts/commands in <code>pyproject.toml</code> so there might not be a direct translation of that feature (would be cool if <code>uv</code> could do that though!)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-23 14:42</div>
            <div class="timeline-body"><p>We want to do that eventually, we're trying to keep the scope down so we can get some stable features in peoples hands :)</p>
<p>I don't think we'll include a guide for every package manager out there, e.g., <code>pdm</code> is great but has ~2.5% of the monthly downloads of Poetry (1m vs 40m). In general, migration guides are a lot of work to maintain since we need to keep tabs on <em>other</em> tools ‚Äî I'd like to keep the scope small.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6445.html">astral-sh/uv#6445</a> on 2024-08-22 16:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6520.html">astral-sh/uv#6520</a> on 2024-08-23 15:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1804.html">astral-sh/uv#1804</a> on 2024-08-23 15:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/michaelmior">@michaelmior</a> on 2024-08-23 15:31</div>
            <div class="timeline-body"><p>Would be nice to have pipenv included here if possible. It's got around the same number of monthly downloads as pip-tools.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ucg8j">@ucg8j</a> on 2024-08-29 11:58</div>
            <div class="timeline-body"><p>@zanieb glad to see this issue created. Massive plus one on prioritising by monthly downloads. If there was a <code>poetry</code> migration guide I'd imagine you'd see quite an uptick in <code>uv</code> usage. Myself included! I want to get an idea of what is involved, common edge cases etc, before investing the time doing it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/wu-clan">@wu-clan</a> on 2024-08-29 15:32</div>
            <div class="timeline-body"><p>I'd like to express my thoughts.</p>
<p>So far it seems that <code>uv init --from-project &lt;path&gt;</code> can copy dependencies from an existing project</p>
<p>In fact, if I use this command, which in the vast majority of cases I believe I do in order to migrate the project to uv, then why add the <code>---from-project</code> parameter?</p>
<p>I'm a fan of <code>pdm</code>, which determines whether to create or migrate by recognizing the current existence of <code>pyproject.toml</code>, which I think is great, and if this is implemented, the user can do a quick migration with <code>uv init</code>, but consider the other commands for compatibility: <code>uv init --lib</code>...</p>
<p>Please don't try to reject <code>pdm</code>, <code>fastapi</code>, <code>pydantic</code> all use it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6926.html">astral-sh/uv#6926</a> on 2024-09-03 17:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/5605.html">astral-sh/uv#5605</a> on 2024-10-13 19:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Mapiarz">@Mapiarz</a> on 2024-11-11 14:32</div>
            <div class="timeline-body"><p>FWIW here's a small <code>poetry -&gt; uv</code> migration guide that should get most people started. I do realize it's not good enough to slap in the docs. There are a couple of problems: it depends on pdm, dependencies of dependencies can change, the locking script I attach is far from perfect/complete and requires manual edits afterwards.</p>
<p>First, you need to convert your poetry compatible <code>pyproject.toml</code> to be compatible with uv. You can actually do it quite easily with <code>pdm</code> (originally suggested <a href="https://x.com/tiangolo/status/1839686030007361803">here</a>).</p>
<ol>
<li><code>uvx pdm import pyproject.toml</code></li>
<li>Remove all poetry sections in the pyproject (i.e. <code>[tool.poetry...]</code> sections)</li>
<li>Replace</li>
</ol>
<pre><code>[tool.pdm.dev-dependencies]
dev = [
</code></pre>
<p>with</p>
<pre><code>[tool.uv]
dev-dependencies = [
</code></pre>
<p>Done. Your <code>pyproject.toml</code> file is now compatible with UV and you can do <code>uv lock</code> or <code>uv sync</code>.</p>
<p>Having said that, it is likely that UV will resolve completely different versions of packages than what you already had in your <code>poetry.lock</code>. That doesn't have to be a problem, but can. It was a problem in my case.</p>
<p>To work around this, I used a small script to hardcode all the minor/patch versions of my packages in <code>pyproject.toml</code> before converting to uv compatible format. Then, after conversion, I would create the uv.lock with <code>uv lock</code>. Then, I'd undo the hardcoded versions in the original pyproject.toml and convert again. Because uv by default will prefer versions from the lock, you now have all your versions pinned as they were in poetry and mostly the same packages in the lock (dependencies of dependencies can be different). It should be safe to do <code>uv sync</code> without worrying about things breaking due to versions change.</p>
<p>Below is the script I used to hardcode minor/patch versions in pyproject.toml. It's not perfect and will create incorrect results for dependencies with extras/from git etc. but these are easy to tweak manually.</p>
<pre><code class="language-python">from pathlib import Path

import toml

# Load poetry.lock and pyproject.toml
lockfile_path = Path(&quot;poetry.lock&quot;)
pyproject_path = Path(&quot;pyproject.toml&quot;)

# Parse the lock file
with lockfile_path.open(&quot;r&quot;) as lockfile:
    lock_data = toml.load(lockfile)

# Parse pyproject.toml
with pyproject_path.open(&quot;r&quot;) as pyproject_file:
    pyproject_data = toml.load(pyproject_file)

# Build a map of package names to their specific versions from poetry.lock
locked_versions = {package[&quot;name&quot;]: package[&quot;version&quot;] for package in lock_data[&quot;package&quot;]}


# Helper function to update dependencies in a given section
def update_dependencies(dependencies):
    for dep_name, dep_constraint in dependencies.items():
        if dep_name in locked_versions:
            dependencies[dep_name] = locked_versions[dep_name]
            print(f&quot;Updated {dep_name} to version {locked_versions[dep_name]}&quot;)
        else:
            print(f&quot;{dep_name} not found in poetry.lock, skipping.&quot;)


# Update dependencies in pyproject.toml
update_dependencies(pyproject_data[&quot;tool&quot;][&quot;poetry&quot;][&quot;dependencies&quot;])
update_dependencies(pyproject_data[&quot;tool&quot;][&quot;poetry&quot;][&quot;group&quot;][&quot;dev&quot;][&quot;dependencies&quot;])

# Write the updated pyproject.toml
with pyproject_path.open(&quot;w&quot;) as pyproject_file:
    toml.dump(pyproject_data, pyproject_file)

print(&quot;pyproject.toml has been updated with specific versions.&quot;)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/philiporlando">@philiporlando</a> on 2024-11-24 20:40</div>
            <div class="timeline-body"><p>Thank you for opening this issue and for providing this initial poetry migration guide.</p>
<p>I'm unfortunately seeing the below error when trying to migrate <a href="https://github.com/philiporlando/fgdb_to_gpkg">this package</a>:</p>
<pre><code class="language-bash">uvx pdm import pyproject.toml
[AttributeError]: 'Array' object has no attribute 'items'
</code></pre>
<p>Any insight is appreciated!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/9737.html">astral-sh/uv#9737</a> on 2024-12-09 18:49</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../OpenCOMPES/sed/issues/531.html">OpenCOMPES/sed#531</a> on 2024-12-13 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mkniewallner">@mkniewallner</a> on 2024-12-26 21:03</div>
            <div class="timeline-body"><p>For those interested, I've just open-sourced https://github.com/mkniewallner/migrate-to-uv. It can migrate projects using either Poetry or Pipenv to uv, migrating project metadata, dependencies (keeping same version ranges), dependency groups, sources, markers, ...</p>
<p>You can try it on an existing project with:</p>
<pre><code class="language-shell">uvx migrate-to-uv
</code></pre>
<p>More package managers could be supported in the future (<code>pip-tools</code>, <code>pip</code>, <code>setuptools</code>, ...), if there is interest for them.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-26 21:57</div>
            <div class="timeline-body"><p>Awesome, thanks for sharing @mkniewallner</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/10543.html">astral-sh/uv#10543</a> on 2025-01-13 18:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-05 19:33</div>
            <div class="timeline-body"><p>A couple related issues</p>
<ul>
<li>https://github.com/astral-sh/uv/issues/11987</li>
<li>https://github.com/astral-sh/uv/issues/11986</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnthagen">@johnthagen</a> on 2025-03-21 18:34</div>
            <div class="timeline-body"><p>I just migrated an example project from Poetry to <code>uv</code>. In case any of my notes or changes are useful as a reference to someone:</p>
<ul>
<li>https://github.com/johnthagen/python-blueprint/issues/238</li>
<li>https://github.com/johnthagen/python-blueprint/pull/255</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dd-ssc">@dd-ssc</a> on 2025-03-27 07:47</div>
            <div class="timeline-body"><p>I just googled <code>convert poetry to uv</code> --&gt; <a href="https://stackoverflow.com/q/79118841">first hit</a> --&gt; <a href="https://stackoverflow.com/a/79316385">first answer</a>:</p>
<pre><code>$ uvx migrate-to-uv
   ...
</code></pre>
<p>--&gt; some manual tweaks --&gt; done ‚úÖ</p>
<p>Not sure if this requires a migration guide ü§∑üèª‚Äç‚ôÇÔ∏è</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/12555.html">astral-sh/uv#12555</a> on 2025-03-30 08:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/12479.html">astral-sh/uv#12479</a> on 2025-04-01 18:59</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../felipeangelimvieira/prophetverse/issues/209.html">felipeangelimvieira/prophetverse#209</a> on 2025-05-08 10:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-04 16:41</div>
            <div class="timeline-body"><p>A pip migration guide is ready for review https://github.com/astral-sh/uv/pull/12382</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../geem-lab/overreact/issues/759.html">geem-lab/overreact#759</a> on 2025-07-16 17:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gabkdlly">@gabkdlly</a> on 2025-08-13 08:46</div>
            <div class="timeline-body"><p>Maybe also: pyenv to uv migration guide.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../pyladies/global-conference-2025/issues/44.html">pyladies/global-conference-2025#44</a> on 2025-10-06 20:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:30 UTC
    </footer>
</body>
</html>
