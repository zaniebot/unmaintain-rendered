<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shell command hashing causes global pip to be used after uv venv activation - astral-sh/uv #13567</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Shell command hashing causes global pip to be used after uv venv activation</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13567">#13567</a>
        opened by <a href="https://github.com/Ramesh-kumar-S">@Ramesh-kumar-S</a>
        on 2025-05-21 07:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Ramesh-kumar-S">@Ramesh-kumar-S</a></div>
            <div class="timeline-body">Summary
Description:
<p>When I create and activate a venv with uv venv, if I have previously used pip in the same shell, the shell (bash/zsh) may use the hashed global pip instead of the venv pip, even though $PATH is correct. Running hash -r fixes this, but it&#x27;s not obvious to users.</p>
<p>This is not unique to UV, but it would be helpful if UV&#x27;s documentation or CLI warned users about this common pitfall.</p>
Steps to Reproduce:
<ul>
<li>Open a shell, run pip --version (uses global pip).</li>
<li>Run uv venv .venv</li>
<li>Activate the venv: source .venv/bin/activate</li>
<li>Run pip --version (still uses global pip unless hash -r is run)</li>
</ul>
Suggestion:
<p>Please add a note to the documentation, or print a warning after venv activation, reminding users to run hash -r if they see this behavior.</p>
Platform
<p>Linux 5.14.0-427.40.1.el9_4.x86_64 x86_64 GNU/Linux</p>
Version
<p>uv 0.6.17</p>
Python version
<p>Python 3.13.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/Ramesh-kumar-S">@Ramesh-kumar-S</a> on 2025-05-21 07:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/konstin">@konstin</a> on 2025-05-21 09:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/konstin">@konstin</a> on 2025-05-21 09:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-21 09:04</div>
            <div class="timeline-body"><p>This is not specific to uv, but a general behavior of shells such as bash. This problem does not occur with <code>uv run pip</code>, otherwise I don&#x27;t think this is in scope for us to have special cases or documentation for the user&#x27;s shell.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-24 15:08</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:38:43 UTC
    </footer>
</body>
</html>
