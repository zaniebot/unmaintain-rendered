<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv python install with custom UV_PYTHON_INSTALL_MIRROR is not respected for pypy - astral-sh/uv #8068</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv python install with custom UV_PYTHON_INSTALL_MIRROR is not respected for pypy</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/8068">#8068</a>
        opened by <a href="https://github.com/gaborbernat">@gaborbernat</a>
        on 2024-10-10 04:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/gaborbernat">@gaborbernat</a> on 2024-10-10 04:57</div>
            <div class="timeline-body"><pre><code class="language-bash">‚ùØ env UV_PYTHON_INSTALL_MIRROR=https://magic.com/py uv python install pypy3.10 -vv
    0.000351s DEBUG uv uv 0.4.18
    0.000911s DEBUG uv_fs Acquired lock for `/Users/x/Library/Application Support/uv/python`
Searching for Python versions matching: PyPy 3.10
    0.001399s DEBUG uv_client::base_client Using request timeout of 30s
 uv_python::downloads::fetch self=ManagedPythonDownload { key: PythonInstallationKey { implementation: Known(PyPy), major: 3, minor: 10, patch: 14, prerelease: &quot;&quot;, os: Os(Darwin), arch: Arch(Aarch64(Aarch64)), libc: None }, url: &quot;https://downloads.python.org/pypy/pypy3.10-v7.3.17-macos_arm64.tar.bz2&quot;, sha256: Some(&quot;a050e25e8d686853dd5afc363e55625165825dacfb55f8753d8225ebe417cfd2&quot;) }, download=pypy-3.10.14-macos-aarch64-none
    0.583717s 580ms DEBUG uv_python::downloads Downloading https://downloads.python.org/pypy/pypy3.10-v7.3.17-macos_arm64.tar.bz2 to temporary location: /Users/x/Library/Application Support/uv/python/.cache/.tmpklygCu
</code></pre>
<p>We should allow pypy to live on the mirror too, if the mirror does not contain, the artifact installation should fail. Otherwise, we should rename <code>UV_PYTHON_INSTALL_MIRROR</code> to <code>UV_CPYTHON_INSTALL_MIRROR</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-10 09:33</div>
            <div class="timeline-body"><p>You're looking for <code>UV_PYPY_INSTALL_MIRROR</code>. It's documented in https://docs.astral.sh/uv/configuration/environment/.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-10-10 09:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaborbernat">@gaborbernat</a> on 2024-10-10 13:31</div>
            <div class="timeline-body"><p>Any reason they need to be separated? If they must be separate, we really should rename the other one to CPython...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-10 13:34</div>
            <div class="timeline-body"><p>I think it's reasonable for them to be separate since the schemas are different. We should probably rename the other though? It pre-dated the PyPy variable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaborbernat">@gaborbernat</a> on 2024-10-10 13:38</div>
            <div class="timeline-body"><p>Are these configurable via UV.toml too? Having many environment variables make it difficult to use üòÖ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-10 13:40</div>
            <div class="timeline-body"><p>I don't know if needs to be renamed, everyone says &quot;Python&quot; for &quot;CPython&quot;. I think this is mostly a documentation concern?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gaborbernat">@gaborbernat</a> on 2024-10-10 13:43</div>
            <div class="timeline-body"><blockquote>
<p>I don't know if needs to be renamed, everyone says &quot;Python&quot; for &quot;CPython&quot;. I think this is mostly a documentation concern?</p>
</blockquote>
<p>I am not sure if i agree with you on this, but I think decisions like these are what encourage this (incorrect) behavior, that is a source of confusion for new users... And I'm not sure we should lean into that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8186.html">astral-sh/uv#8186</a> on 2024-10-14 19:41</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @gaborbernat on 2025-02-12 17:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:00 UTC
    </footer>
</body>
</html>
