<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enable CLI package installed with `uv add` to be accessed from the virtual env - astral-sh/uv #7587</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Enable CLI package installed with <code>uv add</code> to be accessed from the virtual env</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7587">#7587</a>
        opened by <a href="https://github.com/PatrickAlphaC">@PatrickAlphaC</a>
        on 2024-09-20 15:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/PatrickAlphaC">@PatrickAlphaC</a></div>
            <div class="timeline-body"><p>Let&#x27;s say I add the following package that is a CLI:</p>
<p>First, let&#x27;s setup and activate a virtual environment.</p>
<pre><code>uv init
uv venv
source .venv/bin/activate
</code></pre>
<p>Then, add our package that has an executable.</p>
<pre><code>uv add moccasin
</code></pre>
<p>Assuming <code>moccasin</code> has an executable named <code>mox</code>, if I do the above, I am able to run the tool with:</p>
<pre><code>uv run mox --help
</code></pre>
<p>However, I cannot do:</p>
<pre><code>mox --help
</code></pre>
<p>By itself. If I instead run:</p>
<pre><code>uv pip install moccasin
</code></pre>
<p>I am then able to run it&#x27;s executable in the virtual environment without <code>uv run</code>:</p>
<pre><code>mox --help
</code></pre>
<p>It would be nice if <code>uv add</code> had a flag to expose the executable without calling <code>uv run</code>. Maybe like:</p>
<pre><code>uv add moccasin --expose-script
</code></pre>
<p>Or something.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 15:05</div>
            <div class="timeline-body"><p>Did you activate the virtual environment in <code>.venv</code> prior to running <code>mox --help</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/PatrickAlphaC">@PatrickAlphaC</a> on 2024-09-20 15:08</div>
            <div class="timeline-body"><p>@charliermarsh yes. I can send a video if that&#x27;s helpful?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 15:15</div>
            <div class="timeline-body"><p>Sure, anything to help reproduce would be appreciated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/PatrickAlphaC">@PatrickAlphaC</a> on 2024-09-20 16:12</div>
            <div class="timeline-body"><p>https://github.com/user-attachments/assets/21080fc0-e502-4735-bd37-c033957530bd</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/PatrickAlphaC">@PatrickAlphaC</a> on 2024-09-20 16:14</div>
            <div class="timeline-body"><p>I also updated the original issue so that the steps are more specific (included the virtual environment setup to make reproducing it more straightforward)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 17:28</div>
            <div class="timeline-body"><p>Thanks for this, it helps a lot.</p>
<p>I think the issue here is that <code>uv add moccasin</code> does not install into the activated virtual environment (hence the warning you&#x27;re seeing). It installs into the <code>.venv</code> in the current directory, by design. So you need to activate the environment in the <em>current directory</em> in order to add the executable to the PATH. It&#x27;s configurable here (https://docs.astral.sh/uv/concepts/projects/#project-environments) though that&#x27;s intended for deployment environments like Docker containers.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 17:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 17:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-25 21:46</div>
            <div class="timeline-body"><p>Hopefully my answer helped but let me know if you have any follow-up questions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-25 21:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/PatrickAlphaC">@PatrickAlphaC</a> on 2024-09-27 12:03</div>
            <div class="timeline-body"><p>I still had issues here, but maybe something else is going on. Thanks for being so attentive.</p>
<p>The active virtual environment was/is in the <code>.venv</code> directory, and that was the active directory. Perhaps something else was happening if you&#x27;re unable to reproduce.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:34:14 UTC
    </footer>
</body>
</html>
