<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`sync` `--no-install-package=foo --inexact` removes `foo`. - astral-sh/uv #12337</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`sync` `--no-install-package=foo --inexact` removes `foo`.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12337">#12337</a>
        opened by <a href="https://github.com/sanmai-NL">@sanmai-NL</a>
        on 2025-03-20 10:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sanmai-NL">@sanmai-NL</a> on 2025-03-20 10:34</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Here, an example with spaCy:</p>
<pre><code>+ uv -v pip list
+ grep acy
DEBUG uv 0.6.8
DEBUG Searching for default Python interpreter in virtual environments or search path
DEBUG Found `cpython-3.12.9-linux-aarch64-gnu` at `/app/.venv/bin/python3` (virtual environment)
DEBUG Using Python 3.12.9 environment at: .venv
spacy              3.8.4
spacy-alignments   0.9.1
spacy-legacy       3.0.12
spacy-loggers      1.0.5
spacy-transformers 1.3.8
+ uv sync --frozen --inexact --no-dev --no-editable --no-install-project --no-install-package=blis --no-install-package=spacy --no-install-package=thinc --no-install-package=torch
Uninstalled 1 package in 29ms
Installed 44 packages in 362ms
Bytecode compiled 13503 files in 1.53s
 + anyio==4.9.0
 + cachetools==5.5.2
 + cffi==1.17.1
 + cryptography==44.0.2
 + diceware==1.0.1
 + dnspython==2.7.0
 + durationpy==0.9
 + email-validator==2.2.0
 + emoji==2.8.0
 + fastapi==0.115.11
 + fastapi-cli==0.0.7
 + google-auth==2.38.0
 + h11==0.14.0
 + httpcore==1.0.7
 + httptools==0.6.4
 + httpx==0.28.1
 + joblib==1.4.2
 + kubernetes==32.0.1
 + loguru==0.7.3
 + nltk==3.9.1
 + oauthlib==3.2.2
 + patternlite==3.6
 + pyasn1==0.6.1
 + pyasn1-modules==0.4.1
 + pycparser==2.22
 + python-dateutil==2.9.0.post0
 + python-dotenv==1.0.1
 + python-multipart==0.0.20
 + requests-oauthlib==2.0.0
 + rich-toolkit==0.13.2
 + rsa==4.9
 + ruamel-yaml==0.18.10
 + ruamel-yaml-clib==0.2.12
 + scipy==1.15.2
 - setuptools==77.0.1
 + setuptools==76.1.0
 + simplemma==1.0.0
 + sniffio==1.3.1
 + starlette==0.46.1
 + uvicorn==0.22.0
 + uvloop==0.21.0
 + watchfiles==1.0.4
 + websocket-client==1.8.0
 + websockets==15.0.1
--&gt; 2da2d00f3142
[1/2] STEP 11/15: ADD . /app
--&gt; 1da24b112264
[1/2] STEP 12/15: RUN --mount=type=cache,target=/root/.cache/uv     set -eux ;     uv -v pip list | grep acy;     uv sync --frozen --inexact --no-dev --no-editable --package=bep --no-install-package=blis --no-install-package=spacy --no-install-package=thinc --no-install-package=torch
+ uv -v pip list
+ grep acy
DEBUG uv 0.6.8
DEBUG Searching for default Python interpreter in virtual environments or search path
DEBUG Failed to inspect Python interpreter from virtual environment at `.venv/bin/python3` 
DEBUG Found `cpython-3.12.9-linux-aarch64-gnu` at `/usr/local/bin/python` (first executable in the search path)
Using Python 3.12.9 environment at: /usr/local
Error: building at STEP &quot;RUN --mount=type=cache,target=/root/.cache/uv set -eux ;     uv -v pip list | grep acy;     uv sync --frozen --inexact --no-dev --no-editable --package=bep --no-install-package=blis --no-install-package=spacy --no-install-package=thinc --no-install-package=torch&quot;: while running runtime: exit status 1
</code></pre>
<h3>Platform</h3>
<p>Linux, ghcr.io/astral-sh/uv:0.6.8-python3.12-bookworm-slim</p>
<h3>Version</h3>
<p>0.6.8.</p>
<h3>Python version</h3>
<p>3.12.9</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @sanmai-NL on 2025-03-20 10:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sanmai-NL">@sanmai-NL</a> on 2025-03-20 11:07</div>
            <div class="timeline-body"><p>It seems the <code>ADD</code> step somehow overwrote the <code>.venv</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sanmai-NL on 2025-03-20 11:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:03 UTC
    </footer>
</body>
</html>
