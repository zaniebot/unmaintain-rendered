<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add support for URL dependencies (at least for wheels) - astral-sh/uv #152</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add support for URL dependencies (at least for wheels)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/152">#152</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2023-10-20 05:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-20 05:27</div>
            <div class="timeline-body"><ul>
<li>VCS:<ul>
<li>Start with just git+</li>
<li>The URL must point to a source distribution</li>
<li>If the URL ends with a hash, we can use that as the cache key</li>
<li>If the URL ends with anything else, we need to resolve it to a commit, then use that as the cache key (and we need to do this lookup every time)</li>
</ul>
</li>
<li>URL dependencies can be a source distribution or a wheel<ul>
<li>For URL dependencies, we should cache based on the HTTP semantics</li>
<li>Empirically, it seems that the URL must end in .whl to be considered a wheel; otherwise, itâ€™s considered a source distribution</li>
<li>We could even start by not caching anything here</li>
</ul>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-10-23 04:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Initial release" by @charliermarsh on 2023-10-24 19:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2023-10-24 19:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 04:50</div>
            <div class="timeline-body"><p>I need to look at how some other tools handle this (e.g., Bun, pip, Poetry).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 05:10</div>
            <div class="timeline-body"><p>https://github.com/oven-sh/bun/pull/1875#issuecomment-1402128002</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 05:21</div>
            <div class="timeline-body"><p>https://github.com/pypa/pip/issues/10075</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 05:21</div>
            <div class="timeline-body"><p>https://github.com/pypa/pip/issues/11164</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 05:25</div>
            <div class="timeline-body"><p>Lots of good discussion in here: https://github.com/pypa/pip/pull/10564#issuecomment-1154867561</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 05:35</div>
            <div class="timeline-body"><p>Gonna propose something here...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-10-26 07:29</div>
            <div class="timeline-body"><p>Unlike pip, we should remember the url contents we installed (e.g. through an etag or another http caching mechanism), check the url every time and reinstall if they changed. For locked requirements.txt, we would need hashes.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-26 13:28</div>
            <div class="timeline-body"><p>Yeah we need a clear mechanism for this. But the pip issues also have a lot of discussion around what happens when you change from a URL dependency to a version dependency, etc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @charliermarsh on 2023-10-26 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-29 20:26</div>
            <div class="timeline-body"><p>Probably the biggest remaining &quot;feature&quot; (with the rest of the milestone being largely focused on testing, performance, and polish).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-30 16:56</div>
            <div class="timeline-body"><p>Another challenge here is that we need to fetch and build the distribution in order to know the version.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-10-30 16:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @charliermarsh on 2023-10-30 16:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-30 16:57</div>
            <div class="timeline-body"><p>We could consider attempting to parse the version from the URL, but it won't always be sufficient (and it could even be wrong).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-10-30 16:59</div>
            <div class="timeline-body"><p>A few other considerations:</p>
<ul>
<li>If there's a URL dependency that satisfies a version, and another package depends on that version in a non-URL capacity, we probably need to allow that. For example, if a user points to a <code>pytorch</code> wheel via URL, and some other package depends on <code>pytorch == 1.0.0</code>, that should be allowed as long as the version at the URL matches the requested version.</li>
<li>If there are two conflicting URL dependencies, we need to reject those, even if they resolve to the same version.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-01 13:19</div>
            <div class="timeline-body"><p>Initial version is closed by https://github.com/astral-sh/puffin/pull/251.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-11-01 13:19</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:19 UTC
    </footer>
</body>
</html>
