<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv pip install - Azure packages from upstreamSources are never found - astral-sh/uv #7734</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv pip install - Azure packages from upstreamSources are never found</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7734">#7734</a>
        opened by <a href="https://github.com/ErichMarx">@ErichMarx</a>
        on 2024-09-27 10:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ErichMarx">@ErichMarx</a></div>
            <div class="timeline-body"><p>Hi,
I don't think I can reproduce the error here, but here's the issue:</p>
<p>We have many azure artifacts feeds on my company. Some feeds are linked to others through Upstream Sources, which means that for instance, if feed ProjectB is an upstream source on ProjectA, I should be able to get packages from ProjectB using the index-url of ProjectA only.</p>
<p>In the example below, I try to install a 'test_package' using the index-url (extra-index-url also fails) of the feed 'Feed1', in which this package doesn't exist. Feed1 however, has as Upstream Source another feed in which test_package exists.
When using pip install, I can find and install test_package and any other packages on my Feed1.</p>
<p>With uv pip install, I can only find package that exist on Feed1, any other package that is coming from another feed (through Upstream Sources) can't be found.</p>
<p>The <a href="https://learn.microsoft.com/en-us/rest/api/azure/devops/artifacts/feed-management?view=azure-devops-rest-7.1">Azure REST API (Get Feeds) </a>returns a feed object with attribute upstreamSources. Those upstream sources should also be searched when installing a package (I believe that is what is missing).</p>
<p>Here's what I tried:
<code>uv pip install test_package --index-url=&quot;https://PAT@pkgs.dev.azure.com/&lt;Organization&gt;/&lt;project&gt;/_packaging/Feed1/pypi/simple/&quot; --verbose</code></p>
<pre><code>DEBUG uv 0.4.16
DEBUG Searching for default Python interpreter in system path or `py` launcher
DEBUG Found `cpython-3.11.6-windows-x86_64-none` at `C:\Users\&lt;user&gt;\testt\venv\Scripts\python.exe` (active virtual environment)
DEBUG Using Python 3.11.6 environment at venv\Scripts\python.exe
DEBUG Acquired lock for `venv`
DEBUG At least one requirement is not satisfied: test_package
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.11.6
DEBUG Solving with target Python version: &gt;=3.11.6
DEBUG Adding direct dependency: test_package*
DEBUG No cache entry for: https://pkgs.dev.azure.com/&lt;Organization&gt;/&lt;project&gt;/_packaging/Feed1/pypi/simple/test_package/
DEBUG No cache entry for: https://pkgs.dev.azure.com/&lt;Organization&gt;/&lt;project&gt;/_packaging/Feed1/pypi/simple/test_package/
DEBUG Searching for a compatible version of test_package(*)
DEBUG No compatible version found for: test_package
  × No solution found when resolving dependencies:
  ╰─▶ Because test_package was not found in the package registry and you require test_package, we can conclude that your requirements are unsatisfiable.
DEBUG Released lock at `C:\Users\&lt;user&gt;\testt\venv\.lock`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-27 12:22</div>
            <div class="timeline-body"><p>I'd love to help but I think we really need a reproduction that we can test here since it likely depends on details on how the Upstream Sources work, and how pip treats the redirect.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @charliermarsh on 2024-09-27 12:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ErichMarx">@ErichMarx</a> on 2024-10-03 06:19</div>
            <div class="timeline-body"><p>Hi @charliermarsh ,
Just a FYi.
This was actually an issue on my Azure Feed. UV works fine with upstream sources, just like pip.
Apologies for this</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @ErichMarx on 2024-10-03 06:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-03 10:48</div>
            <div class="timeline-body"><p>Thank you for following up!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:27:22 UTC
    </footer>
</body>
</html>
