<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avoid creating `main.py` in existing projects - astral-sh/uv #6750</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Avoid creating `main.py` in existing projects</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6750">#6750</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-08-28 14:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-28 14:26</div>
            <div class="timeline-body"><p>e.g. in <code>uv-fastapi-example</code> I don't want a <code>hello.py</code> when I regenerate the <code>pyproject.toml</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">projects</span> added by @zanieb on 2024-08-28 14:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TheMightyRaider">@TheMightyRaider</a> on 2024-10-30 15:54</div>
            <div class="timeline-body"><p>Is this possible now?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/soapergem">@soapergem</a> on 2024-11-27 06:02</div>
            <div class="timeline-body"><p>What pdm does when you run init is it <a href="https://pdm-project.org/latest/usage/template/">creates a template</a>. It seems uv is trying to do the same thing here, but I would suggest that unless/until you have a similar templating system built out, you should <strong>never</strong> create the hello.py file, or any extraneous files. I cannot think of a single use case where anyone would want that.</p>
<p>Left as-is, you're going to see a lot of tutorials that teach people to run these commands in sequence:</p>
<pre><code>uv init
rm -f hello.py
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hay">@hay</a> on 2024-12-16 22:33</div>
            <div class="timeline-body"><p>I'm not sure why i would want a <code>hello.py</code> file in a new project as well. There's already a <code>--no-readme</code> flag for not creating a <code>README</code>, maybe there could also be a <code>--no-hello</code> flag to avoid making a <code>hello.py</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/steeladept">@steeladept</a> on 2024-12-30 19:18</div>
            <div class="timeline-body"><p>I am sort of okay with this, but would like to be able to edit/override it instead.  Basically in the <code>uv/crates/uv/src/commands/project/init.rs</code> file, lines 364-380 should be rewritten to allow users to overwrite it with a global default template providing both a template name (instead of hello.py).</p>
<p>A bonus would be being able to define a default global structure, so all py files are in src directory, for example, and test.py files in a test directory.  But this is then getting to the full structure templating, which would be a much larger change.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ebc-wingmen">@ebc-wingmen</a> on 2025-01-10 09:19</div>
            <div class="timeline-body"><p>I never want a <code>hello.py</code> under any circumstance. The name alone is a little bit laughable if I am being honest. If <code>uv</code> absolutely must generate a python file, an acceptable alternative could be <code>main.py</code>, <code>__main__.py</code> or <code>project_name.py</code>. Unfortunately every guide I write for colleagues or students have to include an extra line to handle this file unless I am creating a bare <code>venv</code> - but then I am missing out on the pyproject.toml file which is even worse.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arthuralvim">@arthuralvim</a> on 2025-01-15 17:10</div>
            <div class="timeline-body"><p>Maybe <code>uv init</code> default behavior should be equivalent to <code>poetry init -n</code> where only the <code>pyproject.toml</code> is created.</p>
<p>Right now I have an alias for this command:
<code>uv init --no-workspace --no-pin-python --no-readme --no-package mynewproject &amp;&amp; rm -f mynewproject/hello.py</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Bengt">@Bengt</a> on 2025-01-24 15:21</div>
            <div class="timeline-body"><p>(I basically agree with everyone in this thread, but I collected some data in the thread @zanieb pointed me from to here, so I am shamelessly reposting my comment from there here:)</p>
<ol>
<li>For reference,</li>
</ol>
<ul>
<li><a href="https://github.com/search?q=path%3Ahello.py&amp;type=code">there are currently 50.700 <code>hello.py</code> files on GitHub</a>,</li>
<li><a href="https://github.com/search?q=path%3Acli.py&amp;type=code">there are currently 132.000 <code>cli.py</code> files on GitHub</a>, and</li>
<li><a href="https://github.com/search?q=path%3Aexample.py&amp;type=code">there are currently 175.000 <code>example.py</code> files on GitHub</a>.</li>
</ul>
<ol start="2">
<li><p>In Python, default file names vary a bit with the domain, and hence one's expectations might be shaped in various ways. <code>app.py</code> is indeed common, with <a href="https://github.com/search?q=path%3Aapp.py&amp;type=code">currently about 721.000 <code>app.py</code> files on GitHub</a>.</p>
</li>
<li><p>Still, <code>main.py</code> is an even more common name. At the time of writing, <a href="https://github.com/search?q=path%3Amain.py&amp;type=code">there are 2.2 million <code>main.py</code> files on GitHub</a>. Interestingly, this is exactly because 'main' is a commonly used name in the Python world, like <code>main()</code>, <code>__main__</code>, or <code>__main__.py</code>. To adhere to this pythonic naming scheme and avoid surprises, <code>main.py</code> should in my opinion be default in <code>uv init</code>.</p>
</li>
<li><p>I do not feel like there is one, universally accepted best practice for naming your first file. I think we would therefore need a command line argument for naming the default file. The command line option should also include a way to disable creating a default file altogether. Currently, one needs to advise <code>uv init &amp;&amp; rm hello.py</code>, which seems unnecessarily convoluted and is not portable to PowerShell, so portable instructions require duplication. m(</p>
</li>
<li><p>The default file is handy if one starts from scratch, but cumbersome if there is an existing codebase. With an existing code base, the use case is to introduce uv to it, not build something new. In projects with preexisting code, uv would ideally detect the presence of a codebase and not create a default file. This should be equivalent to using the deactivation functionality mentioned in 4.</p>
</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hay">@hay</a> on 2025-01-24 16:18</div>
            <div class="timeline-body"><p>@Bengt thanks for collecting all the data! I would agree with you on points 4) and 5). If there should be a default file made by uv it should probably be called <code>main.py</code> and not <code>hello.py</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zyrikby">@zyrikby</a> on 2025-01-27 21:38</div>
            <div class="timeline-body"><p>I have one more use-case -- I use uv to create a directory hosting data analysis notebooks and manage the dependencies. Now, I create the project and then I need to delete manually <code>hello.py</code>. I think that it would be nice to add an option, e.g. <code>--clean</code> (similar to  <code>--app</code> or <code>--lib</code>), that would by default only create pyproject.toml (without readme, vcs and python version).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-02-12 17:39</div>
            <div class="timeline-body"><p>Just updating the status of this since a lot of the comments are outdated and kinda talking about an orthogonal question:</p>
<ul>
<li>In latest versions you can do <code>uv init --bare</code> which indeed just makes the pyproject.toml</li>
<li>In v0.6 we're planning to rename <code>hello.py</code> to <code>main.py</code>: https://github.com/astral-sh/uv/pull/10369</li>
</ul>
<p>As such this issue is really now about &quot;should we have a heuristic where we detect you already have python files setup and automatically avoid creating main.py&quot; and &quot;what would that heuristic be&quot;.</p>
<p>I think the heuristic is a good idea but it's less clear what it should be. Two options come to mind for when to not make <code>main.py</code>:</p>
<ul>
<li><code>*.py</code>: if there's any <code>.py</code> in the same directory we would create the <code>main.py</code> (i.e. the current working dir)</li>
<li><code>**/*.py</code>: if there's any <code>.py</code> in the same directory <em>or any subdirectory</em></li>
</ul>
<p>The first seems nice and simple but maybe too weak, the second could be overzealous. Perhaps something more precise than this could be better though? That said, on balance &quot;making a file you have to delete&quot; seems less bad than &quot;not making a file you expect to be there and being confused&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "v0.6.0" by @Gankra on 2025-02-12 17:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phaabe">@phaabe</a> on 2025-02-12 18:38</div>
            <div class="timeline-body"><p>Great improvement! Thanks!</p>
<p>Why at all initialize with a <code>main.py</code> if there are already <code>*.py</code> files in root or subdirs?</p>
<p>I think it would make sense to not do that in this case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Avoid creating `hello.py` in existing projects" to "Avoid creating `main.py` in existing projects" by @zanieb on 2025-02-13 22:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-13 22:08</div>
            <div class="timeline-body"><p>Let's consider this closed by the <code>--bare</code> option for now. I think it'd be too confusing to omit this file <em>sometimes</em>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-02-13 22:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/simeneide">@simeneide</a> on 2025-03-10 12:50</div>
            <div class="timeline-body"><p>I got to this after being annoyed by the hello.py files. they were good for the two or three first times i used uv, but now they are just annoying. Instead, why not make the default opposite: <code>uv init --template</code> if I want helper files? althogh, <code>--bare</code> will work for now, just thought about throwing the idea in there</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edward-jazzhands">@edward-jazzhands</a> on 2025-04-17 20:53</div>
            <div class="timeline-body"><p>I'd like to add, I think the idea of a heuristic is interesting. But my concern is that the creation of the main.py file where it is, is just confusing to people that are newer to Python. I've already seen this numerous times helping people on Discord. It doesn't help that it makes it in the project root folder. Which is odd, since it goes against normal package organization conventions. Perhaps if it placed the file at <code>src/my_project_name/main.py</code> then I could see how that would make sense. But it doesn't do that, which I fear is just more confusing to new people than it's helping.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-17 21:03</div>
            <div class="timeline-body"><p>@edward-jazzhands we want to use a <code>src/</code> layout by default, but that requires a build backend and ours is not stable yet (and when we used other ones by default, it was even more confusing).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edward-jazzhands">@edward-jazzhands</a> on 2025-04-18 09:48</div>
            <div class="timeline-body"><p>ah I see. Well in that case I'd like to propose a tiny solution: Simply add a couple lines of comments to the top of the main.py file that gets generated by uv init. I think something along the lines of &quot;This file is created to help with project scaffolding but you can safely move or delete it if you want to&quot; would go a long way to avoiding confusion for newer python coders.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:44:02 UTC
    </footer>
</body>
</html>
