<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a command for `uv activate` for cross platform environment activation - astral-sh/uv #14856</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a command for `uv activate` for cross platform environment activation</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/14856">#14856</a>
        opened by <a href="https://github.com/kdheepak">@kdheepak</a>
        on 2025-07-23 20:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kdheepak">@kdheepak</a> on 2025-07-23 20:17</div>
            <div class="timeline-body"><p>Thanks for developing and maintaining <code>uv</code>! It is becoming an integral part of my workflow!</p>
<p>I do see one source of friction when introducing <code>uv</code> to academics and researchers. Currently, activating a virtual environment requires different commands depending on the operating system and shell:</p>
<pre><code class="language-bash"># Windows - Git Bash
source .venv/Scripts/activate

# Windows - CMD
.venv/Scripts/activate.bat

# Windows - PowerShell
.venv/Scripts/activate.ps1

# macOS / Linux
source .venv/bin/activate
</code></pre>
<p>I find users coming from a simpler <code>conda activate env-name</code> find the default <code>venv</code> activation steps not intuitive, since they need to remember platform-specific commands. Beginners unfamiliar with the command line even tend to mix up forward slash and backslash, which sometimes works on Windows but doesn't work on Unix machines.</p>
<p>I also find it is more work writing documentation and tutorials for what users should do. This is particularly true when using <code>uv run ...</code> is not possible (running in a different folder than where the environment is located, etc). Previously, I would be able to write cross-platform usage instructions:</p>
<pre><code class="language-bash">conda activate my-cli-env
cd ~/projects/your-proj
my-cli execute ...
</code></pre>
<p>Currently, I believe this is the only point of friction in development workflow when moving from <code>conda</code> to <code>uv</code> for python only environment workflows.</p>
<p>This may also be the partially the impetus behind requests like <code>uv shell</code>: https://github.com/astral-sh/uv/issues/1910</p>
<p>Implementing <code>uv shell</code> may have technical challenges, however implementing an easier way to activate and deactivate environments would go a long way in addressing this use case.</p>
<p><a href="https://github.com/jfcherng">jfcherng</a> has already posted a helpful function in https://github.com/astral-sh/uv/issues/1910#issuecomment-1963047776 that allows activating an environment in git-bash on Windows and Macos and Linux. It would be great if that functionality existed out of the box.</p>
<p>I imagine it will require something like:</p>
<pre><code class="language-bash">eval &quot;$(uv shell-hook zsh)&quot;
</code></pre>
<p>And then have <code>uv activate</code> call the appropriate hook function.</p>
<p><code>uv</code> already modifies the shell rc scripts during install, and the hook can be added then. <code>uv</code> also already supports generating shell completion using a similar eval script, so there is some precedence for this kind for feature.</p>
<pre><code class="language-bash">eval &quot;$(uv generate-shell-completion zsh)&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @kdheepak on 2025-07-23 20:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-23 20:28</div>
            <div class="timeline-body"><blockquote>
<p>This is particularly true when using uv run ... is not possible (running in a different folder than where the environment is located, etc).</p>
</blockquote>
<p>You can use <code>uv run --directory ...</code> or <code>uv run --project ...</code> for that use case. Or <code>uv run --python &lt;path-to-env&gt;</code>.</p>
<p>I'm not sure what this is asking for beyond https://github.com/astral-sh/uv/issues/1910? It feels like a duplicate</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdheepak">@kdheepak</a> on 2025-07-24 02:43</div>
            <div class="timeline-body"><p>Thanks for the quick response! And thanks for sharing potential options.</p>
<p>It's still quite verbose to use <code>uv run --directory ...</code>. For example, instead of:</p>
<pre><code class="language-bash">uv run --directory /path/to/venv my-cli setup
uv run --directory /path/to/venv my-cli validate
uv run --directory /path/to/venv my-cli preprocess
uv run --directory /path/to/venv my-cli execute
uv run --directory /path/to/venv my-cli postprocess
</code></pre>
<p>I would like to do:</p>
<pre><code class="language-bash">uv activate /path/to/venv # in a manner that works cross platform

my-cli setup
my-cli validate
my-cli preprocess
my-cli execute
my-cli postprocess

uv deactivate
</code></pre>
<p>fwiw, <code>uv shell /path/to/venv</code> would also solve this overall problem for me, i.e. make it easier to run entrypoints without explicitly typing <code>uv run</code> every time. I assumed it is going to be more involved to get an implementation working well for <code>uv shell</code>, and I assumed this could be a simpler way of addressing the largely the same use case.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-24 04:36</div>
            <div class="timeline-body"><p>The challenge of <code>uv activate</code> is the same as <code>uv shell</code>. I'd recommend reading the discussion there. Unfortunately, there's not a great way for us to do activation without spawning a sub-shell.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdheepak">@kdheepak</a> on 2025-07-24 09:14</div>
            <div class="timeline-body"><p>I think the difference between this and the other issue is that in this request you <em>don't</em> have to spawn a sub-shell.</p>
<p>Imagine for a moment that <code>uv shell-hook zsh</code> existed, and when executed, printed out the following:</p>
<pre><code class="language-bash">$ echo &quot;$(uv shell-hook zsh)&quot;
uv() {
    if [ &quot;$1&quot; = &quot;activate&quot; ]; then
        # Handle activation manually
        local venv_path=&quot;${2:-.venv}&quot;
        local activate_script=&quot;${venv_path}/bin/activate&quot;
        if [ -f &quot;$activate_script&quot; ]; then
            . &quot;$activate_script&quot;
        else
            echo &quot;Error: Virtual environment not found at ${venv_path}&quot;
            return 1
        fi
    else
        # For all other commands, run the original uv executable
        command uv &quot;$@&quot;
    fi
}
</code></pre>
<p>Then if a user added <code>eval $(uv shell-hook zsh)</code> to their <code>.zshrc</code>, they'd have a zsh function called <code>uv</code> that took precedence over the <code>uv</code> binary in their PATH. And the user would be able to run <code>uv activate</code> using the zsh function and it would do the equivalent of <code>source .venv/bin/activate</code>, all without spawning a sub-shell. This is effectively how <code>conda activate env-name</code> works.</p>
<p>I could certainly add this function in my own zshrc manually, but it would be nice if this came out of the box with <code>uv</code> in a way that worked for <code>bash</code>, <code>zsh</code>, <code>fish</code> and <code>powershell</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:36:02 UTC
    </footer>
</body>
</html>
