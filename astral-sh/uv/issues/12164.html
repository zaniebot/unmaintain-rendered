<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv sync --locked` does not detect incorrect `uv.lock` - astral-sh/uv #12164</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv sync --locked` does not detect incorrect `uv.lock`</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12164">#12164</a>
        opened by <a href="https://github.com/Nugine">@Nugine</a>
        on 2025-03-14 07:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Nugine">@Nugine</a> on 2025-03-14 07:19</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Discovered from a bug of dependabot:
https://github.com/dependabot/dependabot-core/issues/10478#issuecomment-2723709984</p>
<p>To reproduce</p>
<ol>
<li>select any package in uv.lock</li>
<li>change its version to any valid semver<ul>
<li>edit the <code>package.version</code> field directly in <code>uv.lock</code></li>
</ul>
</li>
<li>run <code>uv sync --locked</code></li>
</ol>
<p>The installed package is still the previous installed version. It mismatches with what the lock file specified.</p>
<p>There is no warning or error for this case. <code>uv</code> continues sliently.</p>
<h3>Platform</h3>
<p>Linux 6.8.0-55-generic x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.6.6</p>
<h3>Python version</h3>
<p>Python 3.13.2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @Nugine on 2025-03-14 07:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-03-14 21:07</div>
            <div class="timeline-body"><p>When you say &quot;change its version to any valid semver&quot;, do you mean editing the <code>package.version</code> field directly in <code>uv.lock</code>, without changing the <code>sdist</code> or <code>wheels</code> entries?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../tattle-made/feluda/issues/471.html">tattle-made/feluda#471</a> on 2025-03-14 22:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/shauneccles">@shauneccles</a> on 2025-03-14 22:20</div>
            <div class="timeline-body"><blockquote>
<p>When you say &quot;change its version to any valid semver&quot;, do you mean editing the <code>package.version</code> field directly in <code>uv.lock</code>, without changing the <code>sdist</code> or <code>wheels</code> entries?</p>
</blockquote>
<p>I think thats what they mean - that is currently what dependabot is doing to update the lockfile -
https://github.com/LedFx/LedFx/pull/1311/files</p>
<p><img src="https://github.com/user-attachments/assets/a5c779e9-b1ea-45bd-abce-a20e47371f76" alt="Image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/12235.html">astral-sh/uv#12235</a> on 2025-03-17 10:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/12237.html">astral-sh/uv#12237</a> on 2025-03-17 11:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-03-17 22:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-17 23:55</div>
            <div class="timeline-body"><p>See also https://github.com/astral-sh/uv/issues/12254</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:02 UTC
    </footer>
</body>
</html>
