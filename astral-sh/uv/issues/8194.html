<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv python install 3.13t` issues on Windows and Linux - astral-sh/uv #8194</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv python install 3.13t` issues on Windows and Linux</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8194">#8194</a>
        opened by <a href="https://github.com/colesbury">@colesbury</a>
        on 2024-10-15 03:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/colesbury">@colesbury</a> on 2024-10-15 03:15</div>
            <div class="timeline-body"><p>Nice work! This is my favorite way to install Python. I ran into two issues:</p>
<p>On Windows, <code>uv python install 3.13t</code> doesn't seem to install a free-threaded build.</p>
<pre><code class="language-shell">&gt; uv python install 3.13t
&gt; uv python list
cpython-3.13.0-windows-x86_64-none     AppData\Roaming\uv\python\cpython-3.13.0+freethreaded-windows-x86_64-none\python.exe

&gt; uv run -p 3.13t python -c &quot;import sysconfig; print(sysconfig.get_config_var('Py_GIL_DISABLED'))&quot;
0
</code></pre>
<p>On Linux,  <code>uv python install 3.13t</code>  installs a debug build:</p>
<pre><code class="language-shell">&gt; uv run -p 3.13t python -c &quot;import sysconfig; print(sysconfig.get_config_var('CFLAGS'))&quot;
-fno-strict-overflow -Wsign-compare -fno-omit-frame-pointer -mno-omit-leaf-frame-pointer -g -Og -Wall  -fPIC
</code></pre>
<p>Whereas <code>3.13</code> (GIL) is an optimized build, like I'd expect:</p>
<pre><code class="language-shell">&gt; uv run -p 3.13 python -c &quot;import sysconfig; print(sysconfig.get_config_var('CFLAGS'))&quot;
-fno-strict-overflow -Wsign-compare -Wunreachable-code -DNDEBUG -g -O3 -Wall  -fPIC
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-15 03:19</div>
            <div class="timeline-body"><p>Thanks for the report! I'll look into this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2024-10-15 03:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @zanieb on 2024-10-15 03:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/colesbury">@colesbury</a> on 2024-10-15 15:42</div>
            <div class="timeline-body"><p>In case this is helpful, for the free threaded Windows build:</p>
<ul>
<li>If you use the batch scripts (e.g., <code>PCBuild/build.bat</code>), you should pass <code>--disable-gil</code></li>
<li>If you use MSBuild (on <code>PCBuild/pcbuild.proj</code>), you should pass <code>/p:DisableGil=true</code></li>
<li>IIRC, MSBuild copies <code>PC/pyconfig.h.in</code> to <code>PC/pyconfig.h</code> and <a href="https://github.com/python/cpython/blob/b903fc38d8ec74f61fb5ca8a3f5fd025915bceac/PCbuild/pythoncore.vcxproj#L703">replaces</a> the <code>/* #define Py_GIL_DISABLED 1 */</code> with <code>#define Py_GIL_DISABLED 1</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/colesbury">@colesbury</a> on 2024-10-15 15:45</div>
            <div class="timeline-body"><p>Oh, I see now you already have a PR in progress: https://github.com/indygreg/python-build-standalone/pull/368.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-15 17:11</div>
            <div class="timeline-body"><p>Yep! Sorry about that. I should have the fix out soon — just takes a while to build all the distributions over there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-17 01:34</div>
            <div class="timeline-body"><p>@zanieb -- Is this one closed out given your recent merge?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-17 01:38</div>
            <div class="timeline-body"><p>Yep!</p>
<p>Closed by https://github.com/astral-sh/uv/pull/8196 and https://github.com/astral-sh/uv/pull/8268</p>
<p>Will be released soon.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-17 01:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/farzbood">@farzbood</a> on 2024-10-18 05:41</div>
            <div class="timeline-body"><p>based on <a href="https://docs.python.org/3/whatsnew/3.13.html#free-threaded-cpython">Python 3.13.0 docs</a></p>
<blockquote>
<p>To check if the current interpreter supports free-threading, <a href="https://docs.python.org/3/using/cmdline.html#cmdoption-V">python -VV</a> and <a href="https://docs.python.org/3/library/sys.html#sys.version">sys.version</a> contain “experimental free-threading build”.
but the managed <code>python 3.13t</code> installed by <code>uv python install 3.13t</code> doesn't show the expected output!
<img src="https://github.com/user-attachments/assets/9510f8c0-4f96-46aa-907b-1e49e79ce0b2" alt="image" />
(edit):
how to remove/unistall a managed python version? deleting the installation path take care of it?</p>
</blockquote>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 04:38:51 UTC
    </footer>
</body>
</html>
