<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lock dependency groups in the `uv pip` interface, i.e., `uv pip compile --group` - astral-sh/uv #8969</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Lock dependency groups in the <code>uv pip</code> interface, i.e., <code>uv pip compile --group</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8969">#8969</a>
        opened by <a href="https://github.com/KasperZutterman">@KasperZutterman</a>
        on 2024-11-09 13:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/KasperZutterman">@KasperZutterman</a> on 2024-11-09 13:10</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>Hi all,</p>
<p>Similar to https://github.com/astral-sh/uv/issues/8590 it would be great if the PEP 735 dependency-groups could be locked with <code>uv pip compile</code>.</p>
<p>I would imagine something like: <code>uv pip compile pyproject.toml -o requirements-dev.txt --group=test</code>.</p>
<p>Linking this for possible interface alignment:</p>
<ul>
<li>https://github.com/jazzband/pip-tools/issues/2062</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2024-11-09 13:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @charliermarsh on 2024-11-09 13:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-09 13:40</div>
            <div class="timeline-body"><p>üëç We'll do this, likely as soon as the interface is defined for pip itself.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "uv pip compile --group " to "Lock dependency groups in the `uv pip` interface, i.e., `uv pip compile --group`" by @zanieb on 2024-11-26 23:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/qvalentin">@qvalentin</a> on 2025-01-16 10:29</div>
            <div class="timeline-body"><p>Until it is implemented you can always help yourself with some scripting hacks (maybe use https://github.com/kislyuk/yq for a more reasonable script):</p>
<pre><code> sed -n &quot;/\[dependency-groups\]/,/\]/p&quot; pyproject.toml | grep -E '^\s*&quot;[^&quot;]+&quot;' | sed 's/,$//' | sed 's/&quot;//g' | uv pip compile - &gt;&gt; requirements.txt
</code></pre>
<p>But this won't respect the lock file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Gankra on 2025-01-23 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Gankra on 2025-01-23 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @zanieb on 2025-01-23 20:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @Gankra by @charliermarsh on 2025-02-16 19:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Gankra on 2025-03-17 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Gankra on 2025-03-17 18:44</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/OmerFI">@OmerFI</a> on 2025-03-18 02:02</div>
            <div class="timeline-body"><p>Will there be a flag to include all groups, maybe <code>--all-groups</code> like <code>--all-extras</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Gankra">@Gankra</a> on 2025-03-18 12:47</div>
            <div class="timeline-body"><p>Not in the initial version but we're not totally opposed to it. The primary concern that came up about <code>--all-groups</code> is that it doesn't interact well with the semantics pip picked for their <code>--group</code> flag (which we reproduced for interop).</p>
<p>Specifically they support <code>--group mygroup</code> and <code>--group path/to/pyproject.toml:mygroup</code> (the former being sugar for <code>pyproject.toml:mygroup</code> in pip -- for us we specifically make it sugar for <code>{project_dir}/pyproject.toml:mygroup</code> so that the <code>--project</code> flag is useful).</p>
<p>If we map that onto <code>--all-groups</code> we'd get <code>--all-groups</code> and <code>--all-groups path/to/pyproject.toml</code>, which would mean the <code>--all-groups</code> flag has an optional argument, and we don't like our CLI flags having optional arguments (because they make CLI parsing ambiguous).</p>
<p>We could resolve this by either making the path argument mandatory or illegal. Both options are kinda sad...</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:48 UTC
    </footer>
</body>
</html>
