<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hash mismatch when installing torch dependencies from cu126 index - astral-sh/uv #16784</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>hash mismatch when installing torch dependencies from cu126 index</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/16784">#16784</a>
        opened by <a href="https://github.com/rbavery">@rbavery</a>
        on 2025-11-20 06:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/rbavery">@rbavery</a> on 2025-11-20 06:54</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Apologies if this isn't the correct place to raise this issue, not sure where to raise it after reading some past issues here related to hash mismatches.</p>
<p>I have a simple toml that fails to solve due to hash mismatch</p>
<pre><code>[project]
name = &quot;test-toml&quot;
version = &quot;0.1.0&quot;
description = &quot;model&quot;
readme = &quot;README.md&quot;
requires-python = &quot;==3.11.*&quot;
classifiers = [ &quot;Programming Language :: Python :: 3 :: Only&quot;, &quot;Programming Language :: Python :: 3.11&quot; ]
dependencies = [
  &quot;pytorch-triton&quot;,
  &quot;torch&quot;,
  &quot;torchvision&quot;,
]

[[tool.uv.index]]
name = &quot;pytorch-cu126&quot;
url = &quot;https://download.pytorch.org/whl/cu126&quot;
</code></pre>
<p>uv sync fails with</p>
<pre><code>→ uv sync
Resolved 31 packages in 16ms
  × Failed to download `nvidia-nvtx-cu12==12.6.77`
  ╰─▶ Hash mismatch for `nvidia-nvtx-cu12==12.6.77`

      Expected:
        sha256:6574241a3ec5fdc9334353ab8c479fe75841dbe8f4532a8fc97ce63503330ba1

      Computed:
        sha256:b90bed3df379fa79afbd21be8e04a0314336b8ae16768b58f2d34cb1d04cd7d2
  help: `nvidia-nvtx-cu12` (v12.6.77) was included because `test-toml` (v0.1.0) depends on `torch`
        (v2.9.1+cu126) which depends on `nvidia-nvtx-cu12`
</code></pre>
<p>Originally reported here, https://github.com/NVIDIA/NVTX/issues/129</p>
<p>I've tried to globally uv cache clean, recreate venv, but same result.</p>
<h3>Platform</h3>
<p>Ubuntu 22.04</p>
<h3>Version</h3>
<p>0.9.10</p>
<h3>Python version</h3>
<p>Python 3.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @rbavery on 2025-11-20 06:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rbavery">@rbavery</a> on 2025-11-20 17:08</div>
            <div class="timeline-body"><p>even using --no-cache fails</p>
<pre><code>→ uv sync --no-cache           
Resolved 66 packages in 14ms
  × Failed to download `nvidia-nvtx-cu12==12.6.77`
  ╰─▶ Hash mismatch for `nvidia-nvtx-cu12==12.6.77`

      Expected:
        sha256:6574241a3ec5fdc9334353ab8c479fe75841dbe8f4532a8fc97ce63503330ba1

      Computed:
        sha256:b90bed3df379fa79afbd21be8e04a0314336b8ae16768b58f2d34cb1d04cd7d2
  help: `nvidia-nvtx-cu12` (v12.6.77) was included because `test` (v0.1.0) depends on `torch` (v2.8.0+cu126)
        which depends on `nvidia-nvtx-cu12`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-11-20 17:13</div>
            <div class="timeline-body"><p>I can confirm that the hash for for <code>nvidia_nvtx_cu12-12.6.77-py3-none-manylinux2014_x86_64.manylinux_2_17_x86_64.whl</code> is missing on https://download.pytorch.org/whl/nvidia-nvtx-cu12/, CC @atalman</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @konstin on 2025-11-20 17:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">external</span> added by @konstin on 2025-11-20 17:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/atalman">@atalman</a> on 2025-11-20 19:02</div>
            <div class="timeline-body"><p>Acknowledged looking into this now.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @atalman by @konstin on 2025-11-20 19:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sidphbot">@sidphbot</a> on 2025-11-26 11:43</div>
            <div class="timeline-body"><p>I guess
https://download.pytorch.org/whl/cu126-full
works</p>
<p>cant find any docs as to if that is basically a fat index or something is different</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/atalman">@atalman</a> on 2025-12-11 15:47</div>
            <div class="timeline-body"><p>@sidphbot @konstin @rbavery  this shoud be resolved now: https://download.pytorch.org/whl/nvidia-nvtx-cu12/
Is pointing to:</p>
<pre><code>&lt;a href=&quot;https://pypi.nvidia.com/nvidia-nvtx-cu12/nvidia_nvtx_cu12-12.6.77-py3-none-manylinux2014_aarch64.manylinux_2_17_aarch64.whl#sha256=f44f8d86bb7d5629988d61c8d3ae61dddb2015dee142740536bc7481b022fe4b&quot;&gt;nvidia_nvtx_cu12-12.6.77-py3-none-manylinux2014_aarch64.manylinux_2_17_aarch64.whl&lt;/a&gt;
....
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-11 15:49</div>
            <div class="timeline-body"><p>Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-12-11 15:49</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:30 UTC
    </footer>
</body>
</html>
