<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Index URL to Top of `requirements.txt` File Created with `uv export` - astral-sh/uv #13371</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add Index URL to Top of <code>requirements.txt</code> File Created with <code>uv export</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13371">#13371</a>
        opened by <a href="https://github.com/krishsai7">@krishsai7</a>
        on 2025-05-10 00:06
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/krishsai7">@krishsai7</a></div>
            <div class="timeline-body">Summary
<p>When I export a requirements.txt file using the following command, can either the default behavior or opt-in via flag be to list my index at the top of my file? We use a privately hosted Artifactory that all requests for package installs must go through and parsing the requirements.txt can support indexes listed at the top of the file.
Current example:
<code>pyproject.toml</code></p>
<pre><code>[project]
name = &quot;test-uv&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.13&quot;
dependencies = [
    &quot;boto3[secretsmanager]&gt;=1.36.2&quot;,
]
</code></pre>
<p>Command used: <code>uv export --no-hashes --format requirements.txt -o requirements.txt --no-dev --index https://privatepypiartifactory.com --no-header</code> Given that we also have a single Artifactory, I have this the actual index set within the <code>pyproject.toml</code> under the <code>[[tool.uv.lock]]</code> section but at home I don&#x27;t have this URL set. In addition, this URL is set as my <code>UV_DEFAULT_INDEX</code> environment variable.</p>
<p>Current output:</p>
<pre><code>boto3==1.38.13
    # via test-uv
botocore==1.38.13
    # via
    #   boto3
    #   s3transfer
jmespath==1.0.1
    # via
    #   boto3
    #   botocore
python-dateutil==2.9.0.post0
    # via botocore
s3transfer==0.12.0
    # via boto3
six==1.17.0
    # via python-dateutil
urllib3==2.4.0
    # via botocore
</code></pre>
<p>Current <code>uv</code> version: <code>uv 0.7.3 (3c413f74b 2025-05-07)</code>
This current behavior is consistent on both Windows 10 and MacOS.</p>
Example
<p>AWS Glue 5.0 will accept a requirements.txt file with an index at the top so I would like to see an output such as:</p>
<pre><code>-i https://privatepypiartifactory.com
boto3==1.38.13
    # via test-uv
botocore==1.38.13
    # via
    #   boto3
    #   s3transfer
jmespath==1.0.1
    # via
    #   boto3
    #   botocore
python-dateutil==2.9.0.post0
    # via botocore
s3transfer==0.12.0
    # via boto3
six==1.17.0
    # via python-dateutil
urllib3==2.4.0
    # via botocore
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/krishsai7">@krishsai7</a> on 2025-05-10 00:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;Add Index URL to Top of `requirements.txt` File&quot; to &quot;Add Index URL to Top of `requirements.txt` File Created with `uv export`&quot; by <a href="https://github.com/krishsai7">@krishsai7</a> on 2025-05-10 00:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-10 12:24</div>
            <div class="timeline-body"><p>Duplicate of <a href="https://github.com/astral-sh/uv/issues/10008">astral-sh/uv#10008</a></p>
<blockquote>
<p>We can&#x27;t support this because our --index features are not representable in requirements.txt files. For example, there is no way to represent index pinning or uv&#x27;s index strategies. It&#x27;s possible there&#x27;s something we could do here, but it&#x27;s an open problem.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-10 12:24</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:38:34 UTC
    </footer>
</body>
</html>
