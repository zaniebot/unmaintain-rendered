<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`.python-version` with a directory is not resolved relative to the version file - astral-sh/uv #10548</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`.python-version` with a directory is not resolved relative to the version file</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/10548">#10548</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2025-01-12 21:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-12 21:56</div>
            <div class="timeline-body"><blockquote>
<p>The parent directory has that .python-version file (which I'm assuming tells uv add to add packages to the correct virtual env). I did try to add a version file to subdirectories to see if it'd allow me to run uv run within child folders</p>
<p>Ah this sounds like a possible bug where we don't resolve the directory relative to the <code>.python-version</code> file, e.g.,</p>
<pre><code>❯ uv venv foo
❯ uv python pin foo
Updated `.python-version` from `3.12` -&gt; `foo`
❯ uv python find
/Users/zb/workspace/uv/example/foo/bin/python3
❯ mkdir bar
❯ cd bar
❯ uv python find
error: No interpreter found for executable name `foo` in virtual environments, managed installations, or search path
</code></pre>
</blockquote>
<p><em>Originally posted by @zanieb in <a href="https://github.com/astral-sh/uv/issues/10543#issuecomment-2585931056">#10543</a></em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2025-01-12 21:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @zanieb on 2025-01-12 21:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/markuspi">@markuspi</a> on 2025-03-02 11:01</div>
            <div class="timeline-body"><p>I also just ran into this bug. My motivation for using a relative path in <code> .python-version</code> is to have a custom conda-based Python environment as a base, since python-builld-standalone python environments are not yet an option for us due to compliance reasons.</p>
<p>Just as you described, it works fine when running uv from the root directory but breaks when running from any child directory.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/markuspi">@markuspi</a> on 2025-04-29 22:24</div>
            <div class="timeline-body"><p>Regarding the recent development around https://github.com/astral-sh/uv/issues/12605 I assume this issue won't be addressed anymore, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-29 22:29</div>
            <div class="timeline-body"><p>Thanks for the ping. I actually didn't drop path support as part of that change, but we probably should? I'm not sure.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:32:04 UTC
    </footer>
</body>
</html>
