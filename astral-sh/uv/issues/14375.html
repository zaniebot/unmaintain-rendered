<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&quot;uv pip install&quot; fails from Artifactory index - astral-sh/uv #14375</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>&quot;uv pip install&quot; fails from Artifactory index</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/14375">#14375</a>
        opened by <a href="https://github.com/geokarak">@geokarak</a>
        on 2025-06-30 18:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/geokarak">@geokarak</a> on 2025-06-30 18:57</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Recent versions of uv (such as the current latest v0.7.17) fail to install packages from a private Artifactory index, whereas older versions (such as v0.1.9) work.</p>
<h3>Reproduce error</h3>
<pre><code class="language-bash">python3 -m venv .venv
source ./.venv/bin/activate

# update pip to v25.0.1
pip install --upgrade pip

# install uv latest version (v0.7.17) (*)
pip install uv

# set uv index and cert env vars
export UV_INDEX_URL=https://artifactory.xxx.yyy.com:port/artifactory/api/pypi/eoc-pypi/simple
export UV_FIND_LINKS=https://artifactory.xxx.yyy.com:port/artifactory/api/pypi/eoc-pypi
export SSL_CERT_FILE=/xxx/yyy/zzz/pypi.pem

uv pip install tqdm
</code></pre>
<p>FYI: The reason I have to specify <code>SSL_CERT_FILE</code> is that I'm running behing a corporate proxy.</p>
<p>Running <code>uv pip install tqdm</code> (or any other library) will produce the following error stack trace:</p>
<pre><code class="language-bash">...
error: Failed to read `--find-links` URL: https://artifactory.xxx.yyy.com:port/artifactory/api/pypi/eoc-pypi/
  Caused by: Failed to fetch: `https://artifactory.xxx.yyy.com:port/artifactory/api/pypi/eoc-pypi/`
  Caused by: HTTP status client error (406 Not Acceptable) for url (https://artifactory.xxx.yyy.com:port/artifactory/api/pypi/eoc-pypi/)
</code></pre>
<p>The above steps work as expected if one uses an older version of uv,  such as v0.1.9 - that is, substituing (*) with <code>uv pip install uv==0.1.9</code> allows the setup to run without any issues. I havenâ€™t determined which exact version ranges of uv work properly and which ones exhibit the problem. It's likely that the problem extends beyond the v0.7.x versions of uv.</p>
<p>Finally, while I first noted the issue on an RHEL 7.9 system with Python 3.8.18, I also tested it on a Windows machine running Python 3.11.4 and encountered the same exact error stack trace.</p>
<h3>Platform</h3>
<p>RHEL v7.9</p>
<h3>Version</h3>
<p>uv 0.7.17</p>
<h3>Python version</h3>
<p>Python 3.8.18</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @geokarak on 2025-06-30 18:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @jtfmumm by @zanieb on 2025-06-30 19:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jtfmumm">@jtfmumm</a> on 2025-07-01 12:52</div>
            <div class="timeline-body"><p>Do you encounter this problem with uv <code>0.7.15</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-01 12:54</div>
            <div class="timeline-body"><p>Why are you using <code>UV_FIND_LINKS=https://artifactory.xxx.yyy.com:port/artifactory/api/pypi/eoc-pypi/simple</code>? Do you mean to just use <code>UV_INDEX_URL=https://artifactory.xxx.yyy.com:port/artifactory/api/pypi/eoc-pypi/simple</code>? It's quite unusual to set both of those to a similar target.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/geokarak">@geokarak</a> on 2025-07-01 15:32</div>
            <div class="timeline-body"><p>@jtfmumm @zanieb I have unset/removed the <code>UV_FIND_LINKS </code> env var from my venv setup script, only keeping <code>UV_INDEX_URL</code>, and I confirm this is now working perfectly with newer versions of uv.</p>
<p>I'm not sure why/how this is working for older versions of uv (such as 0.1.9) where both env vars are set. And I also don't fully understand how the <code>UV_FIND_LINKS</code> is badly interfering with <code>UV_INDEX_URL</code>when both are set.</p>
<p>In any case, thanks for the help and for looking into my issue so promptly. Much appreciated!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-01 15:59</div>
            <div class="timeline-body"><p>There's a new regression with <code>UV_FIND_LINKS</code>, see https://github.com/astral-sh/uv/issues/14367</p>
<p>Glad it's working though!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-07-04 02:07</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:08 UTC
    </footer>
</body>
</html>
