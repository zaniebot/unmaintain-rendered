<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Completion should fall back to default shell completion behavior when input does not match   - astral-sh/uv #7401</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Completion should fall back to default shell completion behavior when input does not match</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7401">#7401</a>
        opened by <a href="https://github.com/dandavison">@dandavison</a>
        on 2024-09-14 22:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dandavison">@dandavison</a> on 2024-09-14 22:39</div>
            <div class="timeline-body"><p>I'm using zsh. Given a file <code>./hello.py</code>, I think that e.g. <code>uv run python he&lt;TAB&gt;</code> should complete to <code>uv run python hello.py</code> (assuming that no other paths match <code>./he*</code>). I.e., I think that <code>uv</code>'s completion should fall back to some appropriate &quot;normal shell completion&quot; behavior when the input cannot be completed in a uv-specific way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/shirayu">@shirayu</a> on 2024-11-03 12:32</div>
            <div class="timeline-body"><p>I have noticed the same problem.
I have't coded Rust at all, but I did a little looking into it.</p>
<p>It looks like adding <code>#[clap(value_hint(ValueHint::AnyPath))]</code> to the following is needed, but that is not possible due to <code>#[command(subcommand)] </code> .
https://github.com/astral-sh/uv/blob/2ed94745a2cba996c617ffbb686a2d99baf7fecc/crates/uv-cli/src/lib.rs#L2659-L2664</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-03 15:07</div>
            <div class="timeline-body"><p>Is this the same as https://github.com/astral-sh/uv/issues/8432 ?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/shirayu">@shirayu</a> on 2024-11-03 15:11</div>
            <div class="timeline-body"><p>@zanieb  I think so, thank you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-03 15:16</div>
            <div class="timeline-body"><p>Please let us know if this is broken outside of Zsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hmrc87">@hmrc87</a> on 2024-11-19 07:50</div>
            <div class="timeline-body"><p>I have the same problem but <strong>it works in bash</strong> (on Mac OS) but not on zsh (MacOs). Seems like a UV + ZSH Problem</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dandavison">@dandavison</a> on 2024-11-19 14:17</div>
            <div class="timeline-body"><p>Sorry I forgot to say when I opened the issue, yes I'm using zsh (I don't use oh-my-zsh). I agree this is a duplicate of #8432 (could remove oh-my-zsh from that title). Since GH lets me do so, I'll go ahead and close as a dup.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dandavison on 2024-11-19 14:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/phaabe">@phaabe</a> on 2025-01-02 14:42</div>
            <div class="timeline-body"><blockquote>
<p>Please let us know if this is broken outside of Zsh</p>
</blockquote>
<p>@zanieb
yes it does also break on ghostty</p>
<p>https://github.com/astral-sh/uv/issues/8432#issuecomment-2567865617</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:43 UTC
    </footer>
</body>
</html>
