<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Provide better error message when python version is invalid in `.venv` - astral-sh/uv #7614</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Provide better error message when python version is invalid in `.venv`</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/7614">#7614</a>
        opened by <a href="https://github.com/CoderJoshDK">@CoderJoshDK</a>
        on 2024-09-21 14:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/CoderJoshDK">@CoderJoshDK</a> on 2024-09-21 14:46</div>
            <div class="timeline-body"><p>When running a command that requires the <code>.venv</code> (such as <code>uv pip install ruff</code>), and the python version in that <code>.venv</code> is no longer a valid version, the following error is displayed:</p>
<pre><code class="language-log">error: No virtual environment found; run `uv venv` to create an environment, or pass `--system` to install into a non-virtual environment
</code></pre>
<p>However, I would highly prefer if the error was more specific / accurate about the issue. A <code>.venv</code> <em>was</em> found; it was just not &quot;valid&quot;. The error should state that, over just saying that &quot;No virtual environment found&quot;.</p>
<p>To reproduce this, you can do the following:</p>
<pre><code class="language-sh">uv python install 3.10
uv venv --python=3.10
uv pip install ruff
uv python uninstall 3.10
uv pip install ruff -U
</code></pre>
<p>In practice, this error typically triggers when I update my python version to a new patch version. And also, the instruction it suggests, to fix the error, is still correct. I just sometimes get confused when I see that message and also clearly see that I <em>do</em> have a <code>.venv</code></p>
<details><summary>Verbose Error</summary>
<p>

<p>MacOS 15</p>
<pre><code class="language-sh">&gt; uv pip install ruff -U --verbose
DEBUG uv 0.4.13 (Homebrew 2024-09-19)
DEBUG Searching for default Python interpreter in system path
DEBUG Python interpreter not found at `/Users/joshie/Dev/uv-test/.venv/bin/python3`
DEBUG Found `cpython-3.12.6-macos-aarch64-none` at `/opt/homebrew/bin/python3` (search path)
DEBUG Ignoring Python interpreter at `/opt/homebrew/opt/python@3.12/bin/python3.12`: system interpreter not explicitly requested
DEBUG Found `cpython-3.11.10-macos-aarch64-none` at `/opt/homebrew/bin/python3.11` (search path)
DEBUG Ignoring Python interpreter at `/opt/homebrew/opt/python@3.11/bin/python3.11`: system interpreter not explicitly requested
DEBUG Found `cpython-3.12.6-macos-aarch64-none` at `/opt/homebrew/bin/python3.12` (search path)
DEBUG Ignoring Python interpreter at `/opt/homebrew/opt/python@3.12/bin/python3.12`: system interpreter not explicitly requested
DEBUG Found `cpython-3.9.6-macos-aarch64-none` at `/usr/bin/python3` (search path)
DEBUG Ignoring Python interpreter at `/Library/Developer/CommandLineTools/usr/bin/python3`: system interpreter not explicitly requested
error: No virtual environment found; run `uv venv` to create an environment, or pass `--system` to install into a non-virtual environment
</code></pre>
</p>
</details> 

</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:54 UTC
    </footer>
</body>
</html>
