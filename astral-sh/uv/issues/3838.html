<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Read-only file system (os error 30) error on Render deploy starting with uv 0.2.0 - astral-sh/uv #3838</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Read-only file system (os error 30) error on Render deploy starting with uv 0.2.0</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/3838">#3838</a>
        opened by <a href="https://github.com/yhoiseth">@yhoiseth</a>
        on 2024-05-26 13:22
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/yhoiseth">@yhoiseth</a> on 2024-05-26 13:22</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>Deploying a web service (Django) on Render started failing with uv <code>0.2.0</code>. <code>0.1.45</code> works fine.</p>
<p>The command run is <code>uv pip sync --system requirements.txt</code>. The error is: <code>failed to remove file `/usr/local/lib/python3.11/site-packages/crcmod-1.7.dist-info/INSTALLER`   Caused by: Read-only file system (os error 30)</code></p>
<p>I have attached the entire output using <code>--verbose</code>: <a href="https://github.com/astral-sh/uv/files/15447570/log.txt">log.txt</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-26 16:28</div>
            <div class="timeline-body"><p>It looks like you‚Äôre installing into the system Python but don‚Äôt have the permissions to modify it. Running with 0.1.45 works on the same image, etc.? Can you include the corresponding build logs from 0.1.45 to compare?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @charliermarsh on 2024-05-26 16:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yhoiseth">@yhoiseth</a> on 2024-05-27 09:11</div>
            <div class="timeline-body"><blockquote>
<p>Can you include the corresponding build logs from 0.1.45 to compare?</p>
</blockquote>
<p>Here it is: <a href="https://github.com/astral-sh/uv/files/15453621/log-0.1.45.txt">log-0.1.45.txt</a></p>
<blockquote>
<p>Running with 0.1.45 works on the same image, etc.?</p>
</blockquote>
<p>Everything is the same, just different uv version. As far as I can tell, Render doesn‚Äôt expose image names or anything like that.</p>
<blockquote>
<p>It looks like you‚Äôre installing into the system Python but don‚Äôt have the permissions to modify it.</p>
</blockquote>
<p>Yeah, to me it makes sense to use the system Python as this container or whatever it is is used only to serve this Django app.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-05-27 10:15</div>
            <div class="timeline-body"><p>Does it work without <code>--system</code>? It looks like there's a virtual environment in <code>.venv</code> that uv used to use, but with the interpreter discovery changes we're ignoring it since <code>.venv</code> is not a system interpreter.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/yhoiseth">@yhoiseth</a> on 2024-05-27 13:17</div>
            <div class="timeline-body"><p>It does work on <code>0.2.3</code> without system: <a href="https://github.com/astral-sh/uv/files/15456326/log-0.2.3-without-system.txt">log-0.2.3-without-system.txt</a></p>
<p>Huh‚Ä¶ ü§î I used <code>--system</code> since I thought it was necessary to make all the ‚Äúdefault‚Äù <code>python</code> commands to work. But now I see in the log that there is an active virtual environment: <code>DEBUG Found CPython 3.12.2 at `/opt/render/project/src/.venv/bin/python3` (active virtual environment)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-27 15:00</div>
            <div class="timeline-body"><p>Yeah I think you want to actively remove <code>--system</code> if you have a virtual environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @yhoiseth on 2024-05-28 09:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:58 UTC
    </footer>
</body>
</html>
