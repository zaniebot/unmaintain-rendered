<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv tree: disconnected packages (not selected for current platform) - astral-sh/uv #5716</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv tree: disconnected packages (not selected for current platform)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/5716">#5716</a>
        opened by <a href="https://github.com/bluss">@bluss</a>
        on 2024-08-01 23:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bluss">@bluss</a> on 2024-08-01 23:20</div>
            <div class="timeline-body"><p>In some cases <code>uv tree</code> shows packages outside of the tree (not descendants of the root).</p>
<details>
<summary>
Like this, the root is `uvtree1` but there's a bunch of packages listed first.
</summary>

<pre><code>&gt; uv tree
appnope v0.1.4
cffi v1.16.0
└── pycparser v2.22
colorama v0.4.6
exceptiongroup v1.2.2
pywin32 v306
typing-extensions v4.12.2
uvtree1 v0.1.0
├── ipykernel v6.29.5
│   ├── comm v0.2.2
│   │   └── traitlets v5.14.3
│   ├── debugpy v1.8.2
│   ├── ipython v8.26.0
│   │   ├── decorator v5.1.1
│   │   ├── jedi v0.19.1
│   │   │   └── parso v0.8.4
│   │   ├── matplotlib-inline v0.1.7
│   │   │   └── traitlets v5.14.3
│   │   ├── pexpect v4.9.0
│   │   │   └── ptyprocess v0.7.0
│   │   ├── prompt-toolkit v3.0.47
│   │   │   └── wcwidth v0.2.13
│   │   ├── pygments v2.18.0
│   │   ├── stack-data v0.6.3
│   │   │   ├── asttokens v2.4.1
│   │   │   │   └── six v1.16.0
│   │   │   ├── executing v2.0.1
│   │   │   └── pure-eval v0.2.3
│   │   └── traitlets v5.14.3
│   ├── jupyter-client v8.6.2
│   │   ├── jupyter-core v5.7.2
│   │   │   ├── platformdirs v4.2.2
│   │   │   └── traitlets v5.14.3
│   │   ├── python-dateutil v2.9.0.post0
│   │   │   └── six v1.16.0
│   │   ├── pyzmq v26.0.3
│   │   ├── tornado v6.4.1
│   │   └── traitlets v5.14.3
│   ├── jupyter-core v5.7.2 (*)
│   ├── matplotlib-inline v0.1.7 (*)
│   ├── nest-asyncio v1.6.0
│   ├── packaging v24.1
│   ├── psutil v6.0.0
│   ├── pyzmq v26.0.3
│   ├── tornado v6.4.1
│   └── traitlets v5.14.3
└── numpy v2.0.1
(*) Package tree already displayed
</code></pre>
</details>

<p>The extra packages are those that come from universal locking and are not picked for this platform.</p>
<pre><code class="language-shell">uv init uvtree1 -p 3.10
cd uvtree1
uv add 'ipykernel&gt;=6.29.3' &quot;numpy&gt;=1.26.4&quot;
uv tree
</code></pre>
<p>One can confirm that the packages that bunched up at the start have inactive markers.</p>
<pre><code class="language-requirements.txt">&gt; uv pip compile pyproject.toml  --universal
appnope==0.1.4 ; platform_system == 'Darwin'
    # via ipykernel
asttokens==2.4.1
    # via stack-data
cffi==1.16.0 ; implementation_name == 'pypy'
    # via pyzmq
colorama==0.4.6 ; sys_platform == 'win32'
    # via ipython
...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-01 23:28</div>
            <div class="timeline-body"><p>Thanks for the report!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zanieb on 2024-08-01 23:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @zanieb on 2024-08-01 23:28</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-08-02 14:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/5761.html">astral-sh/uv#5761</a> on 2024-08-04 18:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-08-04 18:33</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:31 UTC
    </footer>
</body>
</html>
