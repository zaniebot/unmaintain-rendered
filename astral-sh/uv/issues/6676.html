<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>exclude-newer doesn't downgrade. should it? - astral-sh/uv #6676</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>exclude-newer doesn't downgrade. should it?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/6676">#6676</a>
        opened by <a href="https://github.com/davidszotten">@davidszotten</a>
        on 2024-08-27 07:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/davidszotten">@davidszotten</a> on 2024-08-27 07:43</div>
            <div class="timeline-body"><p>i was expecting <code>--exclude-newer</code> to also downgrade installed packages, is that not the intended behaviour?</p>
<pre><code>$ uv pip install --exclude-newer=2024-01-01 jinja2
Resolved 2 packages in 4ms
Installed 2 packages in 1ms
 + jinja2==3.1.2
 + markupsafe==2.1.3

$ uv pip install -U jinja2
Resolved 2 packages in 31ms
Prepared 2 packages in 0.28ms
Uninstalled 2 packages in 2ms
Installed 2 packages in 4ms
 - jinja2==3.1.2
 + jinja2==3.1.4
 - markupsafe==2.1.3
 + markupsafe==2.1.5

$ uv pip install --exclude-newer=2024-01-01 jinja2
Audited 1 package in 1ms        # &lt;---- downgrade back to 3.1.2?

$ uv --version
uv 0.3.4 (39f3cd2a9 2024-08-26)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-27 11:21</div>
            <div class="timeline-body"><p>I don't think we can know the date that <em>already installed</em> packages were published so I don't think the resolver will ever exclude them. You can use <code>--reinstall</code> to remove our preference for installed versions.</p>
<pre><code>‚ùØ uv pip install --exclude-newer=2024-01-01 jinja2 --reinstall
Resolved 2 packages in 144ms
Prepared 2 packages in 34ms
Uninstalled 2 packages in 3ms
Installed 2 packages in 2ms
 - jinja2==3.1.4
 + jinja2==3.1.2
 - markupsafe==2.1.5
 + markupsafe==2.1.3
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-08-27 11:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @zanieb on 2024-08-27 11:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-27 11:22</div>
            <div class="timeline-body"><p>If you wanted to contribute this to the documentation as a hint in https://docs.astral.sh/uv/concepts/resolution/#reproducible-resolutions that'd be greatly appreciated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-10-09 23:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-10-09 23:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 04:38:42 UTC
    </footer>
</body>
</html>
