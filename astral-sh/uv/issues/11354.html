<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>feature: Support distributed shell completion scripts (like man pages) - astral-sh/uv #11354</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>feature: Support distributed shell completion scripts (like man pages)</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/11354">#11354</a>
        opened by <a href="https://github.com/pawamoy">@pawamoy</a>
        on 2025-02-09 13:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/pawamoy">@pawamoy</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Note: I opened the same issue on pipx's tracker, see https://github.com/pypa/pipx/issues/1604.</p>
<p>Given uv is willing to support manual pages (see https://github.com/astral-sh/uv/issues/4731), I was wondering if you're also considering supporting shell completion scripts. Surely if uv can instruct authors to put their manual pages in specific data paths in Python distributions (sdists, wheels), for uv to symlink them in a given location at install time, and to instruct users to add this location to their <code>man</code> configuration, it could do a similar thing for shell completion scripts?</p>
<p>We're currently trying to add shell completion scripts into a project, and we're following the usual route of:</p>
<ul>
<li>add a &quot;completions&quot; flag/command to the CLI</li>
<li>tell users how to run the command and redirect its output in a standard location (or if not standard how to then configure their shell to load the completions)</li>
<li>optionally add an &quot;install completions&quot; flag/command that does the above automatically</li>
</ul>
<p>Even with an &quot;install completions&quot; command, it's quite cumbersome for users:</p>
<ul>
<li>They have to read our docs to learn <em>whether</em> we implemented completions, and <em>how</em> we implemented them.</li>
<li>They then have to run the documented commands after each installation of the package (completions could have changed).</li>
<li>Each project has to pollute their CLI with such completion flags/commands.</li>
</ul>
<p>I think it would be much, much easier for both users and authors if authors could just distribute shell completion scripts that installers like uv would symlink in central locations, that users could then easily load ðŸ™‚</p>
<p>Note that I searched in both yours and pipx's trackers and couldn't find any similar feature request or discussion (sorry if I missed it). I also understand this feature would not be backed by a standard (I believe?), though manual pages are not backed by one either.</p>
<h3>Example</h3>
<p>Before (best-case scenario):</p>
<ul>
<li>user installs package A: <code>uv tool install pkg-a</code></li>
<li>user installs completions for package A: <code>pkg-a --install-completions</code> (also each time package is upgraded)</li>
<li>user installs package B: <code>uv tool install pkg-b</code></li>
<li>user installs completions for package B: <code>pkg-b install-shell-completions --shell=zsh</code> (also each time package is upgraded)</li>
<li>etc.</li>
</ul>
<p>After:</p>
<ul>
<li>user configures shell <em>once</em> to load completions from uv's completions directory</li>
<li>user installs package A: <code>uv tool install pkg-a</code></li>
<li>user installs package B: <code>uv tool install pkg-b</code></li>
<li>etc.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @pawamoy on 2025-02-09 13:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-02-10 11:01</div>
            <div class="timeline-body"><blockquote>
<p>Surely if uv can instruct authors to put their manual pages in specific data paths in Python distributions (sdists, wheels), for uv to symlink them in a given location at install time, and to instruct users to add this location to their man configuration, it could do a similar thing for shell completion scripts?</p>
</blockquote>
<p>This most likely needs to be specified upstream, for example through a PEP, I'd be hesitant to support custom, uv-only features in wheels otherwise.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pawamoy">@pawamoy</a> on 2025-02-10 12:13</div>
            <div class="timeline-body"><p>Completely understandable ðŸ™‚ I suppose you mean specifying it upstream for both manual pages and shell completion scripts? IMO it's &quot;just&quot; about standardizing the path for these data files (for example <code>share/man/manX/page.X</code> for manual pages, and maybe <code>share/completions/*</code> for shell completion scripts). Not sure yet whether what tools do with these files should be standardized too ðŸ¤” I'll see if I can start a discussion.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:29:47 UTC
    </footer>
</body>
</html>
