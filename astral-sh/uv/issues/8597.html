<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resolver: tighter requires-python bound in consumer fails to satisfy - astral-sh/uv #8597</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Resolver: tighter requires-python bound in consumer fails to satisfy</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8597">#8597</a>
        opened by <a href="https://github.com/offbyone">@offbyone</a>
        on 2024-10-26 16:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/offbyone">@offbyone</a> on 2024-10-26 16:57</div>
            <div class="timeline-body"><p>I have two projects, both of which I control -- so this is not a blocker for me, but I think it's doing the wrong thing.</p>
<p>I have a consuming project, <code>seattle-2025</code>, that has <code>requires-python = &quot;~=3.12.3&quot;</code> and a dependency project, <code>nomnom-hugoawards</code> that has <code>requires-python = &quot;~=3.12.4&quot;</code></p>
<p>On the surface, these seem to be satisfiable when resolving dependencies for <code>seattle-2025</code>; there are plenty of Python versions in the range, including <code>3.12.4</code>.</p>
<p>However, when I attempt to sync, here's what I get:</p>
<pre><code class="language-shellsession">$ uv sync
  × No solution found when resolving dependencies:
  ╰─▶ Because the requested Python version (&gt;=3.12.3, &lt;3.13) does not satisfy Python&gt;=3.12.4,&lt;3.13
      and nomnom-hugoawards==2025.0.0b5.dev1 depends on Python&gt;=3.12.4,&lt;3.13, we can conclude that
      nomnom-hugoawards==2025.0.0b5.dev1 cannot be used.
      And because only nomnom-hugoawards==2025.0.0b5.dev1 is available and your project depends on
      nomnom-hugoawards, we can conclude that your project's requirements are unsatisfiable.

      hint: The `requires-python` value (&gt;=3.12.3, &lt;3.13) includes Python versions that are not
      supported by your dependencies (e.g., nomnom-hugoawards==2025.0.0b5.dev1 only supports &gt;=3.12.4,
      &lt;3.13). Consider using a more restrictive `requires-python` value (like &gt;=3.12.4, &lt;3.13).
$ uv --version
uv 0.4.27 (36b729e92 2024-10-25)
</code></pre>
<p>Maybe I'm missing something, but I would expect dependency resolving to find the intersection of the required python versions, rather than require the consumer to be a superset. I wasn't able to infer this behavior from the <a href="https://docs.astral.sh/uv/concepts/resolution/#source-distribution">resolver docs</a>.</p>
<p>In this case, I'd expect 3.12.4 to satisfy the resolver.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Resolver bug - greater requires-python bound in consumer fails to satisfy" to "Resolver: greater requires-python bound in consumer fails to satisfy" by @offbyone on 2024-10-26 16:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Resolver: greater requires-python bound in consumer fails to satisfy" to "Resolver: tighter requires-python bound in consumer fails to satisfy" by @offbyone on 2024-10-26 16:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-26 16:58</div>
            <div class="timeline-body"><p>Your project needs to be a subset, since right now, your project says it supports Python 3.12.3, but you have a dependency that doesn't support that version. We're not looking for a single version that works; we're looking to create a resolution that works for all the stated Python versions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/offbyone">@offbyone</a> on 2024-10-26 17:00</div>
            <div class="timeline-body"><p>Oh... okay, that is very much not how I interpreted those bounds.</p>
<p>Fair enough, and I'll make the changes on my end -- the nice part about controlling both sides of this!. I suppose on some level this is a documentation bug report, then. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @charliermarsh on 2024-10-27 19:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/8619.html">astral-sh/uv#8619</a> on 2024-10-28 00:48</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-10-28 00:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-10-28 00:52</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:18 UTC
    </footer>
</body>
</html>
