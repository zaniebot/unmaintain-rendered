```yaml
number: 13974
title: "Add support for requesting indexes with `--index <name>`"
type: issue
state: open
author: zanieb
labels:
  - enhancement
assignees: []
created_at: 2025-06-11T19:12:08Z
updated_at: 2026-01-05T23:12:16Z
url: https://github.com/astral-sh/uv/issues/13974
synced_at: 2026-01-10T01:57:31Z
```

# Add support for requesting indexes with `--index <name>`

---

_Issue opened by @zanieb on 2025-06-11 19:12_

### Summary

We currently don't support requesting a previously defined index by name in various operations, but we should.

### Example

e.g., where an index is defined in a `pyproject.toml`, I should be able to use

```
$ uv add --index <name>
```

or when defined in a `uv.toml`

```
$ uv tool install --index <name>
```

---

_Label `enhancement` added by @zanieb on 2025-06-11 19:12_

---

_Comment by @zanieb on 2025-06-11 19:12_

I thought this was discussed elsewhere, but can't find it.

Related

- #13874 
- https://github.com/astral-sh/uv/issues/13973
- https://github.com/astral-sh/uv/issues/13872

---

_Referenced in [astral-sh/uv#13973](../../astral-sh/uv/issues/13973.md) on 2025-06-11 19:13_

---

_Referenced in [astral-sh/uv#14034](../../astral-sh/uv/issues/14034.md) on 2025-06-13 18:07_

---

_Referenced in [astral-sh/uv#14562](../../astral-sh/uv/issues/14562.md) on 2025-07-11 12:40_

---

_Comment by @andrader on 2025-09-05 18:42_

I support the need for this feature!

---

_Comment by @EliteTK on 2026-01-05 23:12_

So at least in `uv add`'s case. If only one index is provided, the requirements are pinned to that index. And then regardless of how many indexes are provided, the specified indexes are added/re-added to the pyproject.toml (such that any pre-existing entries appear at the top in the order they are passed on the command line (or from other sources)).

Regarding `uv install`, currently what you pass via `--index` seems to get checked after whatever is already in your `uv.toml`.

It seems like maybe we should be prioritising the index passed there?

As for how to achieve this, I've considered a few different ideas but I think what makes the most sense to me is something like: Add a new type for an `IndexOrName` which is what we would take on the CLI instead of an `Index`. The direct consumers of the arguments would then attempt resolve this from the pyproject.toml (or the embedded script toml) before treating it like a normal index.

Alternatively we could add some logic to `Index::from_str` which attempts to find the right `pyproject.toml` / script toml / `uv.toml` but this seemed a bit too dirty.

Happy to hear other suggestions.

---
