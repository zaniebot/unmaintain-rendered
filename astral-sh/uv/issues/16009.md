```yaml
number: 16009
title: Hashes in simple package index defined as dist-info/core-metadata ignored
type: issue
state: closed
author: adisbladis
labels:
  - bug
assignees: []
created_at: 2025-09-24T05:50:42Z
updated_at: 2025-09-24T08:30:51Z
url: https://github.com/astral-sh/uv/issues/16009
synced_at: 2026-01-10T01:57:35Z
```

# Hashes in simple package index defined as dist-info/core-metadata ignored

---

_Issue opened by @adisbladis on 2025-09-24 05:50_

### Summary

When a package defines a hash as a file URL fragment the hash is honoured:
```html
<a href="/whl/cpu/torch-2.8.0%2Bcpu-cp313-cp313-manylinux_2_28_x86_64.whl#sha256=ac59d7d8f73f4f515c949c9583ead0cce1f230a649f6c63fea0e949f93f02ae6">torch-2.8.0+cpu-cp313-cp313-manylinux_2_28_x86_64.whl</a><br/>
```
and is recorded in `uv.lock`:
```toml
[[package]]
name = "torch"
version = "2.8.0+cpu"
source = { registry = "local" }
dependencies = [
    { name = "filelock" },
    { name = "fsspec" },
    { name = "jinja2" },
    { name = "networkx" },
    { name = "setuptools" },
    { name = "sympy" },
    { name = "typing-extensions" },
]
wheels = [
    { url = "https://download.pytorch.org/whl/cpu/torch-2.8.0%2Bcpu-cp313-cp313-manylinux_2_28_x86_64.whl", hash = "sha256:ac59d7d8f73f4f515c949c9583ead0cce1f230a649f6c63fea0e949f93f02ae6" },
]
```

But when defined as dist-info metadata or core metadata their hashes are ignored:
```html
<a href="/whl/cpu/torch-2.8.0%2Bcpu-cp313-cp313-manylinux_2_28_x86_64.whl" data-dist-info-metadata="sha256=ac59d7d8f73f4f515c949c9583ead0cce1f230a649f6c63fea0e949f93f02ae6" data-core-metadata="sha256=ac59d7d8f73f4f515c949c9583ead0cce1f230a649f6c63fea0e949f93f02ae6">torch-2.8.0+cpu-cp313-cp313-manylinux_2_28_x86_64.whl</a><br/>
```
and uv.lock is rendered without wheel hashes:
```toml
[[package]]
name = "torch"
version = "2.8.0+cpu"
source = { registry = "local" }
dependencies = [
    { name = "filelock" },
    { name = "fsspec" },
    { name = "jinja2" },
    { name = "networkx" },
    { name = "setuptools" },
    { name = "sympy" },
    { name = "typing-extensions" },
]
wheels = [
    { url = "https://download.pytorch.org/whl/cpu/torch-2.8.0%2Bcpu-cp313-cp313-manylinux_2_28_x86_64.whl" },
]
```
despite hash metadata being available.

### Platform

Linux (applies to all platforms)

### Version

0.8.22

### Python version

_No response_

---

_Label `bug` added by @adisbladis on 2025-09-24 05:50_

---

_Referenced in [astral-sh/uv#16010](../../astral-sh/uv/pulls/16010.md) on 2025-09-24 06:01_

---

_Comment by @adisbladis on 2025-09-24 08:30_

Ignore me. I misunderstood something and the existing behaviour is correct.

---

_Closed by @adisbladis on 2025-09-24 08:30_

---
