<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv complains venvs it creates are externally managed - astral-sh/uv #2089</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv complains venvs it creates are externally managed</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2089">#2089</a>
        opened by <a href="https://github.com/Julian">@Julian</a>
        on 2024-02-29 16:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Julian">@Julian</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>Hi there. I'm trying to use <code>uv</code> for the first time and am having a hard time figure out how to use it to install things into virtual environments. More specifically, this command:</p>
<pre><code>python3.12 -m venv venv &amp;&amp; venv/bin/python -m pip install uv &amp;&amp; venv/bin/uv venv uv-venv &amp;&amp; venv/bin/uv pip install --python uv-venv/bin/python httpx
</code></pre>
<p>which installs uv then creates a virtual environment using uv then tries to install something into it</p>
<p>results in:</p>
<pre><code>Collecting uv
  Using cached uv-0.1.12-py3-none-macosx_10_12_x86_64.macosx_11_0_arm64.macosx_10_12_universal2.whl.metadata (19 kB)
Using cached uv-0.1.12-py3-none-macosx_10_12_x86_64.macosx_11_0_arm64.macosx_10_12_universal2.whl (19.0 MB)
/Users/julian/Desktop/venv/lib/python3.12/site-packages/pip/_internal/metadata/importlib/_dists.py:73: DeprecationWarning: Unimplemented abstract methods {'locate_file'}
  return cls(files, info_location)
Installing collected packages: uv
Successfully installed uv-0.1.12
Using Python 3.12.2 interpreter at /Users/julian/Desktop/venv/bin/python3
Creating virtualenv at: uv-venv
Activate with: source uv-venv/bin/activate
error: The interpreter at /opt/homebrew/opt/python@3.12/Frameworks/Python.framework/Versions/3.12 is externally managed, and indicates the following:

  To install Python packages system-wide, try brew install

Consider creating a virtual environment with `uv venv`.
</code></pre>
<p>when that was exactly how the venv was created.</p>
<details>
<summary>with `--verbose`</summary>

<pre><code>Collecting uv
  Using cached uv-0.1.12-py3-none-macosx_10_12_x86_64.macosx_11_0_arm64.macosx_10_12_universal2.whl.metadata (19 kB)
Using cached uv-0.1.12-py3-none-macosx_10_12_x86_64.macosx_11_0_arm64.macosx_10_12_universal2.whl (19.0 MB)
/Users/julian/Desktop/venv/lib/python3.12/site-packages/pip/_internal/metadata/importlib/_dists.py:73: DeprecationWarning: Unimplemented abstract methods {'locate_file'}
  return cls(files, info_location)
Installing collected packages: uv
Successfully installed uv-0.1.12
 uv_interpreter::python_query::find_default_python 
      0.000881s   0ms DEBUG uv_interpreter::python_query Starting interpreter discovery for default Python
      0.001712s   0ms DEBUG uv_interpreter::interpreter Cached interpreter info for Python 3.12.2, skipping probing: venv/bin/python3
Using Python 3.12.2 interpreter at /Users/julian/Desktop/venv/bin/python3
Creating virtualenv at: uv-venv
Activate with: source uv-venv/bin/activate
 uv::requirements::from_source source=httpx
 uv_interpreter::python_query::find_requested_python request=uv-venv/bin/python
      0.000438s   0ms DEBUG uv_interpreter::python_query Starting interpreter discovery for Python uv-venv/bin/python
      0.000767s   0ms DEBUG uv_interpreter::interpreter Cached interpreter info for Python 3.12.2, skipping probing: /opt/homebrew/Cellar/python@3.12/3.12.2_1/Frameworks/Python.framework/Versions/3.12/bin/python3.12
    0.000785s DEBUG uv::commands::pip_install Using Python 3.12.2 environment at /opt/homebrew/opt/python@3.12/bin/python3.12
error: The interpreter at /opt/homebrew/opt/python@3.12/Frameworks/Python.framework/Versions/3.12 is externally managed, and indicates the following:

</code></pre>
</details>

<p>(This is on macOS)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-29 16:50</div>
            <div class="timeline-body"><p>I think this may be fixed on <code>main</code> -- we were incorrectly following symlinks in one location. I'll be cutting a release today, it should fix this for you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-29 16:51</div>
            <div class="timeline-body"><p>(Alternatively, if you activate the virtual environment, or use <code>VIRTUAL_ENV= uv-venv </code> instead of <code>--python</code>, that will work too.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-02-29 16:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-02-29 16:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Julian">@Julian</a> on 2024-02-29 16:52</div>
            <div class="timeline-body"><p>Ah unlucky timing for me! Great! Thanks will give one of those a shot!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-29 21:52</div>
            <div class="timeline-body"><p>Do you mind trying this again with the latest release?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Julian">@Julian</a> on 2024-02-29 21:54</div>
            <div class="timeline-body"><p>Works perfect. Usual props!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Julian on 2024-02-29 21:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-29 21:56</div>
            <div class="timeline-body"><p>Awesome, thanks!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:24:07 UTC
    </footer>
</body>
</html>
