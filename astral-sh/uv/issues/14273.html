<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ability to specify platform when running `uv sync` - astral-sh/uv #14273</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Ability to specify platform when running <code>uv sync</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/14273">#14273</a>
        opened by <a href="https://github.com/LordAro">@LordAro</a>
        on 2025-06-26 14:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/LordAro">@LordAro</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>So I'm using uv to generate a distributable python install with some extra dependencies. Not strictly what it was meant for, but hey.</p>
<p>Currently I'm doing this with:</p>
<pre><code>uv python install 3.12.10 --install-dir .
cp cpython-3.12.10-linux-x86_64-gnu my-python-dist # Copy can't be avoided due to #11933
uv export --no-hashes --no-default-groups &gt; requirements-core.txt # convert pyproject.toml deps to pip compatible
uv pip install --requirements requirements-core.txt --break-system-packages --link-mode copy --python-platform x86_64-manylinux_2_28 --python my-python-dist
</code></pre>
<p>This works, but is rather complicated and requires several steps and redundant copies.</p>
<p>I can <em>almost</em> replace it with <code>UV_PROJECT_ENVIRONMENT=my-python-dist uv sync --link-mode copy</code> except that there's no specific platform, so running this command on a newer system might end up downloading a wheel that is incompatible with the intended systems. The &quot;simple solution&quot; would be to add <code>--python-platform</code> to <code>uv sync</code> (&amp; friends, most likely) to match <code>pip</code>.</p>
<p>I've tried fudging around with <code>environments</code> &amp; <code>required-environments</code>, but there's no way to specify &quot;&lt;= manylinux_2_28&quot; as packaging markers as far as I can tell.</p>
<p>Unless there's A Better Way, then by all means let me know</p>
<h3>Example</h3>
<p><code>uv sync --python-platform x86_64-manylinux_2_28</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @LordAro on 2025-06-26 14:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-06-26 14:17</div>
            <div class="timeline-body"><p>Yeah I think we should have <code>--python-platform</code> on <code>uv sync</code>. I've wanted that before too.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @charliermarsh on 2025-06-26 15:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-06-27 17:21</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-07-11 01:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:31:55 UTC
    </footer>
</body>
</html>
