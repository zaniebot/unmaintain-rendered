<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv run` fails with `&lt;(...)` process substitution - astral-sh/uv #13279</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv run` fails with `&lt;(...)` process substitution</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/13279">#13279</a>
        opened by <a href="https://github.com/Bobronium">@Bobronium</a>
        on 2025-05-03 20:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Bobronium">@Bobronium</a> on 2025-05-03 20:08</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Opening this as a bug report since python supports this:</p>
<pre><code class="language-shell">~
❯ python &lt;(echo 'print(__name__)')
__main__

~
❯ uv run &lt;(echo 'print(__name__)')
error: Failed to spawn: `/dev/fd/11`
  Caused by: Permission denied (os error 13)
</code></pre>
<h3>Use case (similar to #6862)</h3>
<p><code>uv run &lt;(pbpaste)</code></p>
<h3>Workaround</h3>
<p><code>uv run python &lt;(echo 'print(__name__)')</code></p>
<h3>References</h3>
<p><code>pipx</code> has the same issue https://github.com/pypa/pipx/issues/1292 with potential fix being https://github.com/pypa/pipx/pull/1293/</p>
<h3>Platform</h3>
<p>Darwin 24.1.0 arm64</p>
<h3>Version</h3>
<p>uv 0.7.2 (481d05d8d 2025-04-30)</p>
<h3>Python version</h3>
<p>Python 3.12.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @Bobronium on 2025-05-03 20:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/legendre6891">@legendre6891</a> on 2025-05-05 04:28</div>
            <div class="timeline-body"><p><code>uv help run</code> has this snippet</p>
<blockquote>
<p>When used with a file ending in <code>.py</code> or an HTTP(S) URL, the file will be treated as a script and run with a Python interpreter, i.e., <code>uv run file.py</code> is equivalent to <code>uv run python file.py</code>. For URLs, the script is temporarily downloaded before execution. If the script contains inline dependency metadata, it will be installed into an isolated, ephemeral environment. When used with <code>-</code>, the input will be read from stdin, and treated as a Python script.</p>
</blockquote>
<p>The issue is that <code>&lt;(echo 'print(__name__)')</code> is evaluated to <code>/dev/fd/XXX</code> by the shell (in your example, it is <code>/dev/fd/11</code>). The string <code>/dev/fd/XXX</code> does not end in <code>.py</code> and nor is it an URL. Therefore, <code>/dev/fd/XXX</code> is treated as the name of the tool; when <code>uv run</code> runs <code>exec</code> on this path, the file <code>/dev/fd/XXX</code> is not executable and you see the permission denied error.</p>
<p>In addition to your workaround, note also</p>
<blockquote>
<p>When used with <code>-</code>, the input will be read from stdin, and treated as a Python script.</p>
</blockquote>
<p>Thus, the following two methods should also work (it redirects <code>/dev/fd/XXX</code> to stdin).</p>
<pre><code>cat &lt;(echo 'print(__name__)') | uv run -

uv run - &lt; &lt;(echo 'print(__name__)')
</code></pre>
<hr />
<p>All this to say,  the behavior you observe is consistent with the documentation. That said, perhaps <code>uv run</code> could be improved to have smarter handling in this scenario...</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:05 UTC
    </footer>
</body>
</html>
