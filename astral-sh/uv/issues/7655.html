<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environment variable for `uv venv seed`? - astral-sh/uv #7655</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Environment variable for `uv venv seed`?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7655">#7655</a>
        opened by <a href="https://github.com/ReubenFrankel">@ReubenFrankel</a>
        on 2024-09-24 09:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ReubenFrankel">@ReubenFrankel</a> on 2024-09-24 09:04</div>
            <div class="timeline-body"><p>Hi! I'm using a tool called <a href="https://docs.meltano.com/">Meltano</a> which supports <code>uv</code> as an alternate virtual environment backend. In our case, I would be great if <code>pip</code> was still bundled with the venvs <code>uv</code> creates for legacy reasons, which I can see is possible with the <code>uv venv --seed</code>. Since we don't have direct control over how <code>uv venv</code> runs behind the scenes, would it be possible to expose configuration for this via an environment variable (e.g. <code>UV_VENV_SEED=true</code>)?</p>
<p>Worth noting that I was running into #6593 initially - here is part of the message I sent in their Slack:</p>
<blockquote>
<p>I'm trying out <code>uv</code> as a venv backend, and it has been great up until running the <code>notebook</code> utility. Some of our notebooks contain an initial cell to <code>pip install</code> dependencies to the venv - with <code>uv</code>, this no longer works properly because <code>pip</code>  isn't bundled with the venv, so dependencies are installed to the system Python instead and then cannot be imported later on in the context of the venv Python.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">configuration</span> added by @charliermarsh on 2024-09-24 12:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-24 12:59</div>
            <div class="timeline-body"><p>I have no qualms with exposing this via an environment variable, though, since nobody else has asked for this, I would appreciate if you opened an issue with Meltano asking for this flag too? The environment seeding concept exists separately from uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ReubenFrankel">@ReubenFrankel</a> on 2024-09-24 13:47</div>
            <div class="timeline-body"><p>Yeah, no problem - appreciate it's a bit of a niche issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2024-09-27 22:13</div>
            <div class="timeline-body"><p>FWIW, virtualenv does support <code>VIRTUALENV_NO_SEED</code> and <code>VIRTUALENV_WITHOUT_PIP</code> (seeding is the default).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/woutervh">@woutervh</a> on 2024-12-05 14:43</div>
            <div class="timeline-body"><p>I was going to open a new issue, but I'll add it here:</p>
<p>Starting from a pyproject.toml we can create the venv via &quot;uv sync&quot;.</p>
<p>How can we seed this venv with pip, equivalent to &quot;uv venv  --seed&quot;?
This is to ease the transition for end-users.</p>
<p>Maybe an env-variable  UV_VENV_SEED?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssbarnea">@ssbarnea</a> on 2025-01-16 16:11</div>
            <div class="timeline-body"><p>I am trying to improve the current implementation of https://github.com/tox-dev/tox-uv but this bug seems to be a major source of incompatibility, as it makes the uv created venvs incomptible with python's own venv ones.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-16 16:15</div>
            <div class="timeline-body"><p>By ‚Äúbug‚Äù, do you mean, the inability to configure this via an environment variable? It‚Äôs already configurable on the command line.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2025-01-17 04:36</div>
            <div class="timeline-body"><p>Are the Astral folks open to a contribution adding support for the env var?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-17 04:40</div>
            <div class="timeline-body"><p>Seems fine to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-17 16:02</div>
            <div class="timeline-body"><p>I can do it today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-01-17 16:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-01-17 17:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2025-01-17 18:34</div>
            <div class="timeline-body"><p>thanks @charliermarsh!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ReubenFrankel">@ReubenFrankel</a> on 2025-01-17 19:34</div>
            <div class="timeline-body"><p>Thanks! üòé</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/341383">@341383</a> on 2025-01-19 19:15</div>
            <div class="timeline-body"><p>Thanks for this! I'm poc'ing uv for our enterprise stack and was ironically looking for a solution the day that this was shipped. I've had the chance to do some initial testing and did have a question:</p>
<p>This seems to apply only when the environment is explicitly created with the <code>uv venv</code> command. However, if cloning a repo containing a uv.lock and then proceeding to create the venv implicitly with <code>uv sync</code>, the <code>UV_VENV_SEED</code> env variable is not respected. This was also observed with <code>uvx</code>.</p>
<p>Is this intentional or would it be possible to have creation of all (explicit and implicit) venvs respect the <code>UV_VENV_SEED</code> envVar?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-19 19:52</div>
            <div class="timeline-body"><p>Yes, it's intentional. Enforcing it &quot;everywhere&quot; would be a separate decision.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 04:30:12 UTC
    </footer>
</body>
</html>
