<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>how to add deps who only supports `setup.py`. e.g. nvidia/Megatron-LM - astral-sh/uv #11920</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>how to add deps who only supports <code>setup.py</code>. e.g. nvidia/Megatron-LM</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/11920">#11920</a>
        opened by <a href="https://github.com/pplmx">@pplmx</a>
        on 2025-03-03 06:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/pplmx">@pplmx</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>As title</p>
<h3>Platform</h3>
<p><em>No response</em></p>
<h3>Version</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @pplmx on 2025-03-03 06:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-03-03 11:18</div>
            <div class="timeline-body"><p>Can you share a minimal example of what you did and the complete logs of the error, as explained in #9452?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pplmx">@pplmx</a> on 2025-03-04 02:34</div>
            <div class="timeline-body"><p>The installation of <a href="https://github.com/NVIDIA/Megatron-LM">nvidia/Megatron-LM</a> only supports <code>setup.py</code> (i.e., <code>python setup.py install</code>). I'm unsure how to add this dependency to my project using <code>uv</code>, so I don't even have a minimal exampleâ€”it's nonexistent.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pplmx">@pplmx</a> on 2025-03-04 02:40</div>
            <div class="timeline-body"><blockquote>
<p>The installation of <a href="https://github.com/NVIDIA/Megatron-LM">nvidia/Megatron-LM</a> only supports <code>setup.py</code> (i.e., <code>python setup.py install</code>). I'm unsure how to add this dependency to my project using <code>uv</code>, so I don't even have a minimal exampleâ€”it's nonexistent.</p>
</blockquote>
<p>Of course, I can first create a virtual environment using <code>uv venv</code>, activate the shell, and then run <code>python setup.py install</code>. However, this only installs the dependency in the current virtual environment and does not integrate it with <code>pyproject.toml</code> for proper dependency management.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-04 02:44</div>
            <div class="timeline-body"><p>From your project, you want to run <code>uv add git+https://github.com/NVIDIA/Megatron-LM</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pplmx">@pplmx</a> on 2025-03-04 02:50</div>
            <div class="timeline-body"><blockquote>
<p>From your project, you want to run <code>uv add git+https://github.com/NVIDIA/Megatron-LM</code>.</p>
</blockquote>
<p>That's exactly what I needed â€” thanks a lot, @charliermarsh! :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @pplmx on 2025-03-04 02:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-04 02:51</div>
            <div class="timeline-body"><p><code>setup.py</code> is handled by <code>setuptools</code> which is the default build system if a package does not configure one. They do explicitly configure it though https://github.com/NVIDIA/Megatron-LM/blob/fdfcef87004205eca69ea462b375578185ea01f6/pyproject.toml#L5 â€” you should be able to install this package with any standards-compliant installer.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Kuzaiherba">@Kuzaiherba</a> on 2025-04-23 22:22</div>
            <div class="timeline-body"><p>Hi, I hope you are well!</p>
<p>I'm facing a similar issue with installing a <a href="https://github.com/cbilodeau2/mixprop">repo</a> that does not have a <code>.toml</code> file and can only be installed via git-copy followed by <code>python setup.py install</code>.</p>
<p>Is there a way to add &amp; install this dependency with <code>uv add ...</code> + <code>uv sync</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-04-24 08:29</div>
            <div class="timeline-body"><p>If there is no <code>pyproject.toml</code> file, uv will fallback to <code>setup.py</code> automatically, you should be able to add that repo the regular way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pjgao">@pjgao</a> on 2025-07-23 15:56</div>
            <div class="timeline-body"><p>@konstin @zanieb Hi, <code>uv sync</code>  can only find <code>core</code> directory in <code>site-packages/megatron</code>, because in their pyproject.toml: https://github.com/NVIDIA/Megatron-LM/blob/main/pyproject.toml:</p>
<pre><code class="language-toml">[tool.setuptools.packages.find]
include = [&quot;megatron.core&quot;, &quot;megatron.core.*&quot;]
</code></pre>
<p>What can I do in my pyproject.toml if I want to import <code>megatron.training</code>?  Thanks for your kindly reply, I have testing this for daysðŸ˜­</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-07-23 16:40</div>
            <div class="timeline-body"><p>@pjgao Can you you open a new issue with commands that reproduce your problem, their logs and expected vs. actual?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pjgao">@pjgao</a> on 2025-07-24 01:38</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/pjgao">@pjgao</a> Can you you open a new issue with commands that reproduce your problem, their logs and expected vs. actual?</p>
</blockquote>
<p>Thanks, Open here: https://github.com/astral-sh/uv/issues/14862</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:30:13 UTC
    </footer>
</body>
</html>
