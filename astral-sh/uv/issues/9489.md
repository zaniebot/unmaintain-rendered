```yaml
number: 9489
title: "Preserve compiled `file:/` requirement names."
type: issue
state: closed
author: salomon-smekecohen
labels:
  - bug
assignees: []
created_at: 2024-11-28T00:49:01Z
updated_at: 2024-11-28T03:32:26Z
url: https://github.com/astral-sh/uv/issues/9489
synced_at: 2026-01-10T01:57:22Z
```

# Preserve compiled `file:/` requirement names.

---

_Issue opened by @salomon-smekecohen on 2024-11-28 00:49_

## Issue
Compiling requirements.in files with `file:` requirements that are named, creates `.txt` output that lacks the names.
This is in contrast to `url`s which maintain names.

Thus disallowing `.txt` generated files from being used as constraints files.

_Note: this worked in uv 0.1.2_

### Info
Version - `uv 0.5.5 (95cd8b8b3 2024-11-27)`
Platform - `24.1.0 Darwin`
Arch - `arm64`

## Example

```
# requirements.in
# normal requirement
mypy
# url req
nose @ git+https://github.com/salomon-smekecohen/nose@48735f874383f711c3b233ab1442cc9a26e96d6d
# file req
foo @ file:./something
```

```
# something/setup.py
from setuptools import setup

setup(name='foo', version='0.1')
```

```
# something/something/__init__.py
```

`python -m uv pip compile requirements.in -o requirements.txt`

### Expectation

```
# This file was autogenerated by uv via the following command:
#    uv pip compile requirements.in -o requirements.txt
foo @ file:./something
    # via -r requirements.in
mypy==1.13.0
    # via -r requirements.in
mypy-extensions==1.0.0
    # via mypy
nose @ git+https://github.com/salomon-smekecohen/nose@48735f874383f711c3b233ab1442cc9a26e96d6d
    # via -r requirements.in
typing-extensions==4.12.2
    # via mypy
```

### Reality
```
# This file was autogenerated by uv via the following command:
#    uv pip compile requirements.in -o requirements.txt
file:./something
    # via -r requirements.in
mypy==1.13.0
    # via -r requirements.in
mypy-extensions==1.0.0
    # via mypy
nose @ git+https://github.com/salomon-smekecohen/nose@48735f874383f711c3b233ab1442cc9a26e96d6d
    # via -r requirements.in
typing-extensions==4.12.2
    # via mypy
```

---

_Assigned to @charliermarsh by @zanieb on 2024-11-28 01:36_

---

_Comment by @charliermarsh on 2024-11-28 03:01_

I thought pip didn't allow relative paths in `file:`, but I guess they do?

---

_Comment by @salomon-smekecohen on 2024-11-28 03:05_

> I thought pip didn't allow relative paths in `file:`, but I guess they do?

Yeah ðŸ˜…. Vendoring this has just been an adventure all around. Excluding`file:` in favor of just referencing the relative path produces the same results, but `pip-tools` outputs an absolute path to the `.txt` when you do that, so I use `file:` as a way to stay a bit more cross-compatible just in case other people read my requirements files and try to emulate anything without using `uv`.

---

_Label `bug` added by @charliermarsh on 2024-11-28 03:16_

---

_Referenced in [astral-sh/uv#9493](../../astral-sh/uv/pulls/9493.md) on 2024-11-28 03:17_

---

_Closed by @charliermarsh on 2024-11-28 03:27_

---

_Closed by @charliermarsh on 2024-11-28 03:27_

---

_Comment by @salomon-smekecohen on 2024-11-28 03:32_

Wow! Thank you Charlie, that was so fast.

---
