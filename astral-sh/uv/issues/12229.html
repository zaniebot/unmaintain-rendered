<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip install --python &lt;version&gt;` doesn't perform automatic Python downloads with `--target` - astral-sh/uv #12229</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv pip install --python &lt;version&gt;</code> doesn't perform automatic Python downloads with <code>--target</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12229">#12229</a>
        opened by <a href="https://github.com/kyluca">@kyluca</a>
        on 2025-03-17 04:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kyluca">@kyluca</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hi,</p>
<p>Firstly, thank you for your incredible work and vision with <code>uv</code> and Astral as a whole.</p>
<p>I'm not entirely sure whether this is a bug or intended behaviour (if so, perhaps an extra note in the documentation would suffice). I've also tried to find existing issues that match the symptoms but haven't found any.</p>
<p>My use case is packaging dependencies into a zip archive for deployment to AWS Lambda via Terraform. Following the guide on https://docs.astral.sh/uv/guides/integration/aws-lambda/ is very helpful, particularly with the <code>--target &lt;target dir&gt;</code> feature as we previously used it with <code>pip install</code> directly. However, when the desired Python version doesn't exist on the system, <code>uv</code> doesn't attempt to download it.</p>
<p>My expectation was for <code>uv</code> to automatically download the missing Python version as it does with the majority of other <code>uv</code> workflows. Although, I can see this might intentionally not be the case with the &quot;pip compatibility&quot; layer as managing Python versions is not something that <code>pip</code> concerns itself with.</p>
<p>Is this the intended behaviour? I can of course run something like <code>uv python install python3.13</code> before running the install command to make sure it's always present, or bake Python 3.13 into my Terraform agent itself. However, the way that <code>uv</code> usually manages to automatically download missing Python versions is a really great feature that I've come to rely on to as it removes the need to prepare system wide dependencies etc.</p>
<h2>Steps to reproduce the bug</h2>
<p>With a fresh clone of https://github.com/astral-sh/uv-aws-lambda-example, following the &quot;Zip archive&quot; steps at https://github.com/astral-sh/uv-aws-lambda-example?tab=readme-ov-file#zip-archive works as written assuming you already have Python 3.13 installed.</p>
<p>If you remove it first, the commands fail:</p>
<pre><code>$ uv python uninstall 3.13
Searching for Python versions matching: Python 3.13
Uninstalled Python 3.13.0 in 116ms
 - cpython-3.13.0-linux-x86_64-gnu

$ uv export --frozen --no-dev --no-editable -o requirements.txt
# This file was autogenerated by uv via the following command:
#    uv export --frozen --no-dev --no-editable -o requirements.txt
annotated-types==0.7.0 \
    --hash=sha256:1f02e8b43a8fbbc3f3e0d4f0f4bfc8131bcb4eebe8849b8e5c773f3a1c582a53 \
    --hash=sha256:aff07c09a53a08bc8cfccb9c85b05f1aa9a2a6f23728d790723543408344ce89
anyio==4.7.0 \
    --hash=sha256:2f834749c602966b7d456a7567cafcb309f96482b5081d14ac93ccd457f9dd48 \
    --hash=sha256:ea60c3723ab42ba6fff7e8ccb0488c898ec538ff4df1f1d5e642c3601d07e352
&lt;truncated&gt;

$ uv pip install --no-installer-metadata --no-compile-bytecode --python-platform x86_64-manylinux2014 --python 3.13 --target packages -r requirements.txt --verbose
DEBUG uv 0.6.6
DEBUG Searching for Python 3.13 in virtual environments, managed installations, or search path
DEBUG Searching for managed installations at `/home/kyle/.local/share/uv/python`
DEBUG Found `cpython-3.10.12-linux-x86_64-gnu` at `/usr/bin/python3` (first executable in the search path)
DEBUG Skipping interpreter at `/usr/bin/python3` from first executable in the search path: does not satisfy request `3.13`
DEBUG Found `cpython-3.10.12-linux-x86_64-gnu` at `/usr/bin/python` (search path)
DEBUG Skipping interpreter at `/usr/bin/python` from search path: does not satisfy request `3.13`
DEBUG Found `cpython-3.10.12-linux-x86_64-gnu` at `/bin/python3` (search path)
DEBUG Skipping interpreter at `/bin/python3` from search path: does not satisfy request `3.13`
DEBUG Found `cpython-3.10.12-linux-x86_64-gnu` at `/bin/python` (search path)
DEBUG Skipping interpreter at `/bin/python` from search path: does not satisfy request `3.13`
error: No interpreter found for Python 3.13 in virtual environments, managed installations, or search path
</code></pre>
<p>Hope that all makes sense and thanks again.</p>
<p>Cheers,
Kyle</p>
<h3>Platform</h3>
<p>Ubuntu 22.04 x86_64</p>
<h3>Version</h3>
<p>uv 0.6.6</p>
<h3>Python version</h3>
<p>Python 3.13</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @kyluca on 2025-03-17 04:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`uv pip install --python <version>` doesn't perform automatic Python downloads" to "`uv pip install --python <version>` doesn't perform automatic Python downloads with `--target`" by @konstin on 2025-03-28 19:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/EliteTK">@EliteTK</a> on 2025-12-22 14:50</div>
            <div class="timeline-body"><p>I believe #16694 addressed this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @EliteTK on 2025-12-22 14:50</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:30:27 UTC
    </footer>
</body>
</html>
