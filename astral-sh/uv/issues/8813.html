<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv picks old versions when using unbound dependencies - astral-sh/uv #8813</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv picks old versions when using unbound dependencies</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8813">#8813</a>
        opened by <a href="https://github.com/olzhasar-reef">@olzhasar-reef</a>
        on 2024-11-04 18:42
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/olzhasar-reef">@olzhasar-reef</a> on 2024-11-04 18:42</div>
            <div class="timeline-body"><p>We are currently migrating our projects to <code>uv</code> from <code>pdm</code> and we are facing weird version resolution issues when specifying dependencies without lower bounds.
Consider the following minimal <code>pyproject.toml</code>:</p>
<pre><code class="language-toml">[project]
name = &quot;example&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
    &quot;django-stubs[compatible-mypy]&quot;,
    &quot;djangorestframework-stubs[compatible-mypy]&quot;,
]
</code></pre>
<pre><code class="language-shell">uv lock
</code></pre>
<p>This produces a lock file with the <code>djangorestframework-stubs</code> version <code>1.4.0</code>, whereas the latest version is <code>3.15.1</code>.</p>
<pre><code>
[[package]]
name = &quot;djangorestframework-stubs&quot;
version = &quot;1.4.0&quot;
source = { registry = &quot;https://pypi.org/simple&quot; }
dependencies = [
    { name = &quot;coreapi&quot; },
    { name = &quot;django-stubs&quot; },
    { name = &quot;mypy&quot; },
    { name = &quot;requests&quot; },
    { name = &quot;typing-extensions&quot; },
]
sdist = { url = &quot;https://files.pythonhosted.org/packages/ff/b8/1c9cb32a9dcd3eb3f11cbb97465ad4bab17e8a54ebb3435661574d868908/djangorestframework-stubs-1.4.0.tar.gz&quot;, hash = &quot;sha256:037f0582b1e6c79366b6a839da861474d59210c4bfa1d36291545cb6ede6a0da&quot;, size = 31984 }
wheels = [
    { url = &quot;https://files.pythonhosted.org/packages/c6/e5/814c1819452746193b99acb97c8b5205d8fe7b01f11957376b9448794ca0/djangorestframework_stubs-1.4.0-py3-none-any.whl&quot;, hash = &quot;sha256:f6ed5fb19c12aa752288ddc6ad28d4ca7c81681ca7f28a19aba9064b2a69489c&quot;, size = 51155 },
]
</code></pre>
<p>Interestingly, if we set the lower boundary the resolution works fine without any conflicts and the new version is being picked:</p>
<pre><code class="language-toml">[project]
name = &quot;example&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
   &quot;django-stubs[compatible-mypy]&quot;,
   &quot;djangorestframework-stubs[compatible-mypy]&gt;=3&quot;,
]
</code></pre>
<pre><code>[[package]]
name = &quot;djangorestframework-stubs&quot;
version = &quot;3.15.1&quot;
source = { registry = &quot;https://pypi.org/simple&quot; }
dependencies = [
    { name = &quot;django-stubs&quot; },
    { name = &quot;requests&quot; },
    { name = &quot;types-pyyaml&quot; },
    { name = &quot;types-requests&quot; },
    { name = &quot;typing-extensions&quot; },
]
sdist = { url = &quot;https://files.pythonhosted.org/packages/f3/00/40ee7702b69d32bd88240468a7cdc4b52aca42e14513d04ec8e16b5c1c59/djangorestframework_stubs-3.15.1.tar.gz&quot;, hash = &quot;sha256:34539871895d66d382b6ae3655d9f95c1de7733cf50bc29097638d367ed3117d&quot;, size = 35195 }
wheels = [
    { url = &quot;https://files.pythonhosted.org/packages/a4/f4/463fe341a7fe4b79da9fef65327b8e8d696639eba592f9fced6b6b8593ff/djangorestframework_stubs-3.15.1-py3-none-any.whl&quot;, hash = &quot;sha256:79dc9018f5d5fa420f9981eec9f1e820ecbd04719791f144419cdc6c5b8e29bd&quot;, size = 54399 },
]
</code></pre>
<pre><code class="language-shell">uv version
uv 0.4.29 (85f9a0d0e 2024-10-30)
</code></pre>
<p>MacOS</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-11-04 19:54</div>
            <div class="timeline-body"><p>Hi! I presume this is a case of https://github.com/astral-sh/uv/issues/8157 in which the resolver could be using better heuristics.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @zanieb on 2024-11-04 19:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-11-04 19:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-11-05 13:28</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:23 UTC
    </footer>
</body>
</html>
