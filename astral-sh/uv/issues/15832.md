```yaml
number: 15832
title: Decord package will uninstall and install when running uv sync
type: issue
state: open
author: HarborYuan
labels:
  - external
assignees: []
created_at: 2025-09-14T06:05:41Z
updated_at: 2025-10-03T19:14:14Z
url: https://github.com/astral-sh/uv/issues/15832
synced_at: 2026-01-10T01:57:35Z
```

# Decord package will uninstall and install when running uv sync

---

_Issue opened by @HarborYuan on 2025-09-14 06:05_

### Summary

Hi,

I have a pyproject.toml file like this.
```config
[project]
name = "test"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.12"
dependencies = [
    "decord>=0.6.0",
]
```



However, everytime I run "uv sync" or "uv run", it will uninstall the decord package and reinstall the decord package.

```output
Resolved 3 packages in 20ms
Uninstalled 1 package in 32ms
Installed 1 package in 78ms
 ~ decord==0.6.0
```

### Platform

Linux 6.8.0-64-generic x86_64 GNU/Linux

### Version

0.8.15

### Python version

Python 3.11.13

---

_Label `bug` added by @HarborYuan on 2025-09-14 06:05_

---

_Comment by @konstin on 2025-09-14 11:01_

Can you share the verbose logs from `uv sync -v`?

---

_Comment by @HarborYuan on 2025-09-14 23:49_

Hi @konstin ,

```
DEBUG uv 0.8.15
DEBUG Found project root: `/home/haobo/code/dev/test`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `/home/haobo/code/dev/test`
DEBUG Reading Python requests from version file at `/home/haobo/code/dev/test/.python-version`
DEBUG Using Python request `3.12` from version file at `.python-version`
DEBUG Checking for Python environment at: `.venv`
DEBUG The project environment's Python version satisfies the request: `Python 3.12`
DEBUG Released lock at `/tmp/uv-ad72d244d41ec98d.lock`
DEBUG Acquired lock for `.venv`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: test @ file:///home/haobo/code/dev/test
DEBUG No workspace root found, using project root
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 3 packages in 13ms
DEBUG Using request timeout of 30s
DEBUG Platform tags mismatch for decord: decord==0.6.0
DEBUG Requirement installed, but mismatched:
  Installed: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName("decord"), version: "0.6.0", path: "/home/haobo/code/dev/test/.venv/lib/python3.12/site-packages/decord-0.6.0.dist-info", cache_info: None, build_info: None }), metadata_cache: OnceLock(<uninit>), tags_cache: OnceLock(Some(ExpandedTags([Small { small: WheelTagSmall { python_tag: CPython { python_version: (3, 6) }, abi_tag: CPython { gil_disabled: false, python_version: (3, 6) }, platform_tag: Manylinux2010 { arch: X86_64 } } }]))) }
  Requested: Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: "0.6.0" }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: "https", cannot_be_a_base: false, username: "", password: None, host: Some(Domain("pypi.org")), port: None, path: "/simple", query: None, fragment: None }, given: None }), format: Simple }), conflict: None }
DEBUG Registry requirement already cached: decord==0.6.0
DEBUG Requirement already installed: numpy==2.3.3
DEBUG Uninstalled decord (60 files, 12 directories)
Uninstalled 1 package in 30ms
Installed 1 package in 69ms
 ~ decord==0.6.0
DEBUG Released lock at `/home/haobo/code/dev/test/.venv/.lock`
```

I think it may be because of the decord packages are not following the standard platform flags.

---

_Referenced in [dmlc/decord#356](../../dmlc/decord/issues/356.md) on 2025-09-15 07:35_

---

_Label `bug` removed by @konstin on 2025-09-15 07:35_

---

_Label `external` added by @konstin on 2025-09-15 07:35_

---

_Comment by @konstin on 2025-09-15 07:36_

Thanks for the logs! This is a problem with the decord wheel: https://github.com/dmlc/decord/issues/356

---

_Comment by @HarborYuan on 2025-09-15 07:48_

Hi @konstin ,

Thanks for your help. Does uv currently have tag-override feature similar to the dependency?

e.g.,
```
[[tool.uv.dependency-metadata]]
name = "flash-attn"
version = "2.6.3"
requires-dist = ["torch", "einops"]
```



---

_Comment by @konstin on 2025-09-15 07:53_

This is the first time we're encountering this problem, there's no override for it.

---

_Comment by @HarborYuan on 2025-09-15 08:02_

Ok I see. Hope the decord maintainers can fix this bug.

I also think this should not be common if using packaging tools to build the python wheel.

---

_Comment by @fadedDexofan on 2025-09-24 15:33_

Same issue with [yggdrasil-engine](https://pypi.org/project/yggdrasil-engine/):
```
...
DEBUG Platform tags mismatch for yggdrasil-engine==1.0.0: The distribution is compatible with `abi3`, but you're using CPython 3.13 (`cp313`)
...
Uninstalled 1 package in 0.67ms
Installed 1 package in 1ms
 ~ yggdrasil-engine==1.0.0
```

---

_Comment by @konstin on 2025-09-25 09:02_

@fadedDexofan Could you check if it's the same shape of problem as https://github.com/dmlc/decord/issues/356, and if that's the case, report it upstream?

---

_Comment by @HarborYuan on 2025-09-25 10:59_

@konstin Is that possible to add an override feature in uv to circumvent that?

Sometimes, maybe even though the python or OS is not matching, I know the package is suitable for my environment.

---

_Comment by @konstin on 2025-09-25 11:16_

This should be fixed in the package build itself rather than overriding it in uv.

---

_Comment by @hiromon0125 on 2025-10-03 15:27_

I also have the same issue, but the package works when I run it. I just wish uv had a way for the dependency to stop being reinstalled every time I run `uv run`.

---

_Comment by @Avasam on 2025-10-03 18:41_

If uv did have a way to override, users would most likely just enable it without pushing upstream packages to fix their broken distribution.

---

_Comment by @hiromon0125 on 2025-10-03 19:14_

I understand that, but I also think having it reinstall on every run that never gets resolved is not ideal either. 
I would prefer it to be a configuration with a warning message if uv does detect an unsupported version. That way its great for regular dev that doesn't contribute to the package to use older packages that may have partial support or get by temporary.
The reinstallation message on `uv run` is also just not friendly to be honest because I don't actually know what's being reinstalled unless I use `uv sync` with the verbose flag.

---
