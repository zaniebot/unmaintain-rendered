```yaml
number: 11203
title: Include origin of requested Python version in Python discovery errors
type: issue
state: open
author: edmorley
labels:
  - enhancement
  - error messages
assignees: []
created_at: 2025-02-03T22:48:25Z
updated_at: 2025-02-03T22:55:24Z
url: https://github.com/astral-sh/uv/issues/11203
synced_at: 2026-01-10T01:57:25Z
```

# Include origin of requested Python version in Python discovery errors

---

_Issue opened by @edmorley on 2025-02-03 22:48_

### Summary

Currently with uv `0.5.26`, if the Python version requested via the `.python-version` file cannot be found during Python discovery and uv isn't allowed to download it's own Python version, the error message is of form:

```
$ uv sync --python-preference only-system
error: No interpreter found for Python 3.11 in search path
```

Similarly, if there was no `.python-version` file and the non-existent Python version instead originated from the `requires-python` field, the error message is:

```
$ uv sync --python-preference only-system
error: No interpreter found for Python ==3.11.* in search path
```

I think it might be worth including references to `.python-version` / `requires-python` or similar in those error messages, to make it clearer where should be updated if the end-user instead wanted to use a different version of Python.

The current error wording is set here:
https://github.com/astral-sh/uv/blob/f54979f2bc8b0124cffb40db057ae1acd58fe337/crates/uv-python/src/discovery.rs#L2576


(The context where I ran into this, was testing the scenario where one of our end-users doesn't have a `.python-version` file or worse has our legacy `runtime.txt` file, our buildpack then picks/installs an incompatible Python version from that declared in `requires-python`, and then the user gets a confusing error message since we set `UV_PYTHON_PREFERENCE=only-system` in the env. In the end I've decided to resolve this on our side by making the `.python-version` file mandatory instead, ensuring the buildpack and uv both agree on a canonical Python version - so this won't affect us.)

---

_Label `enhancement` added by @edmorley on 2025-02-03 22:48_

---

_Label `error messages` added by @zanieb on 2025-02-03 22:50_

---

_Assigned to @zanieb by @zanieb on 2025-02-03 22:55_

---

_Comment by @zanieb on 2025-02-03 22:55_

I'll see if it's hard

---

_Referenced in [astral-sh/uv#11964](../../astral-sh/uv/pulls/11964.md) on 2025-03-05 00:19_

---
