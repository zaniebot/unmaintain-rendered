```yaml
number: 16070
title: "Need for universal resolution when running `uv run --python 3.xx`?"
type: issue
state: open
author: mancellin
labels:
  - question
assignees: []
created_at: 2025-09-30T09:01:30Z
updated_at: 2025-10-10T07:58:29Z
url: https://github.com/astral-sh/uv/issues/16070
synced_at: 2026-01-10T01:57:35Z
```

# Need for universal resolution when running `uv run --python 3.xx`?

---

_Issue opened by @mancellin on 2025-09-30 09:01_

### Question

I encountered an issue when testing a package depending on Numpy on nightly builds. See below for an MRE.

```toml
[project]
name = "spam-eggs"
version = "0.1"
requires-python = ">= 3.8"
dependencies = ["numpy"]

[dependency-groups]
test = ["pytest"]
```
```shell
uv run \
    --isolated \
    --group test \
    --pre --extra-index-url https://pypi.anaconda.org/scientific-python-nightly-wheels/simple \
    --python 3.13 \
    python -c 'print("Testing...")'
```

It fails because the universal resolution cannot find a Numpy version compatible with Python 3.8 on the nightly-wheels index.
I managed to work around this by adding the `--index-strategy unsafe-best-match` option, making `uv` use the metadata from PyPI for the universal resolution.

I'm questioning whether it was necessary to run the universal resolution in the first place, given that I only need a single-use environment with a fixed version of Python (`uv run --isolated --python 3.13`).
Having a way to skip the universal resolution would make my config clearer than the `index-strategy` setting, but there does not seem to be one.

### Platform

Ubuntu 22.04

### Version

0.8.22

---

_Label `question` added by @mancellin on 2025-09-30 09:01_

---

_Comment by @konstin on 2025-09-30 10:37_

There's currently no good support for the scenario of only using a wheel from a different index for a specific run. One option is to use `uv pip install` instead of `uv run` to install the nightly numpy for this test run specifically. The project mode solution would be using pypi or the nightly index for numpy using [conflicting dependencies](https://docs.astral.sh/uv/concepts/projects/config/#conflicting-dependencies), which adds a lot of complexity.

---

_Comment by @mancellin on 2025-10-10 07:58_

Thank you for your answer.

What might be missing is a way to occasionally use `uv run --python 3.13` without universal resolution (since I'm only interested in 3.13).
`uv run --no-project` works, but then I lose the access to `--group test`.

The workaround I've found is to use `uv pip compile` which does not use the universal resolution by default:
```bash
EXTRA_ARGS="--pre --extra-index-url https://pypi.anaconda.org/scientific-python-nightly-wheels/simple --python 3.13"
uv pip compile pyproject.toml --group test $EXTRA_ARGS -o /tmp/requirements.txt
uv run --no-project $EXTRA_ARGS --with-requirements /tmp/requirements.txt python -c 'print("Hello World")'

```

---
