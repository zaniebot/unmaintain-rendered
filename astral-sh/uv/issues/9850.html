<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLI Option to save logs to a file - astral-sh/uv #9850</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>CLI Option to save logs to a file</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/9850">#9850</a>
        opened by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a>
        on 2024-12-12 20:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/edgarrmondragon">@edgarrmondragon</a></div>
            <div class="timeline-body"><p>In short, similar to the <code>--log</code> option of pip:</p>
<pre><code>--log &lt;path&gt;                Path to a verbose appending log.
</code></pre>
<p>Related:</p>
<ul>
<li><code>UV_LOG_FILE</code> is mentioned in <a href="https://github.com/astral-sh/uv/issues/8351">astral-sh/uv#8351</a> so maybe Astral folks have considered this</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-12 21:09</div>
            <div class="timeline-body"><p>I&#x27;m interested!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-12 21:09</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">tracing</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-12 21:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-12 21:10</div>
            <div class="timeline-body"><p>I&#x27;m also interested in <em>always</em> writing to a log file in a temporary directory unless it&#x27;s disabled? Like <code>UV_LOG_DIR</code>? I&#x27;m not sure what this would look like in practice.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-12 21:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Choudhry18">@Choudhry18</a> on 2025-01-05 11:40</div>
            <div class="timeline-body"><p>@zanieb I am interested in working on this, here is the initial idea/ requirements I have when thinking about this:</p>
<ol>
<li>Add a global options --log  (can also be set using an environment  variable , and no-log argument if that is set not logged).</li>
<li>If log path not set it should default to logs directory in the root folder</li>
<li>From the research I have done tracing-appender crate sounds like a great choice to write to the files and it offers the feature for rolling logs by frequency to prevent the log file size from being too big.</li>
<li>I am thinking everything that the logger would write if it&#x27;s writing in the the most verbose way should be written to file</li>
<li>If it is part of the project the log directory should be in the root of the project otherwise a global log directory</li>
</ol>
<p>Let me know if you have other requirements or considerations in mind</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-06 17:49</div>
            <div class="timeline-body"><p>Hi! I think this makes sense, though I have a few comments:</p>
<blockquote>
<p>If log path not set it should default to logs directory in the root folder</p>
</blockquote>
<p>Just remember this also needs an equivalent on macOS and Windows. Is there an XDG specification?</p>
<blockquote>
<p>If it is part of the project the log directory should be in the root of the project</p>
</blockquote>
<p>I don&#x27;t love the idea of in-project logs, unless we have a dedicated <code>.uv</code> directory or similar. Out of project seems like a safer start.</p>
<blockquote>
<p>I am thinking everything that the logger would write if it&#x27;s writing in the the most verbose way should be written to file</p>
</blockquote>
<p>I think trace-level logs may be too much? I&#x27;m not sure though. We may need to adjust this based on the practical experience. We should probably allow configuration of levels, e.g., via <code>UV_LOG_LEVEL</code>?</p>
<blockquote>
<p>From the research I have done tracing-appender crate sounds like a great choice to write to the files and it offers the feature for rolling logs by frequency to prevent the log file size from being too big.</p>
</blockquote>
<p>Should we write to a single file? Or a file per command invocation? I lean towards the latter.</p>
<p>@konstin and @BurntSushi may have opinions about the best way to do this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/BurntSushi">@BurntSushi</a> on 2025-01-06 18:49</div>
            <div class="timeline-body"><p>I think for me, it kinda depends on how folks want to use this.</p>
<p>The initial proposal is really simple: the user provides a path to a file, and <code>uv</code> appends logs to it. There&#x27;s probably some decision making around figuring out the default log level when none is specified <em>and</em> <code>--log</code> is given, but it otherwise seems kinda dumb (in a good way?) to me.</p>
<p>But if we get into log file rotation, separating logs by command invocation, separate ways for setting the log level (how would that interact with <code>RUST_LOG</code> for example), then the surface area here gets a lot bigger and more complex.</p>
<p>So I guess for me, I start with, in what cases do users want to use something <em>other</em> than <code>RUST_LOG=debug uv ... &amp;&gt; /tmp/log</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-07 18:46</div>
            <div class="timeline-body"><p>My motivation is to not need to enable logging and re-run a command to see failures. I want to be able to say &quot;See  for more logs&quot; on failure — sort of in the vein of <a href="https://github.com/astral-sh/uv/issues/8351">astral-sh/uv#8351</a>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edgarrmondragon">@edgarrmondragon</a> on 2025-01-14 18:42</div>
            <div class="timeline-body"><blockquote>
<p>My motivation is to not need to enable logging and re-run a command to see failures. I want to be able to say &quot;See for more logs&quot; on failure — sort of in the vein of <a href="https://github.com/astral-sh/uv/issues/8351">#8351</a>.</p>
</blockquote>
<p>That&#x27;s also my use case, i.e. directing users to a detailed log file in case installation fails for any reason.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Choudhry18">@Choudhry18</a> on 2025-02-22 20:42</div>
            <div class="timeline-body"><p>@zanieb I have been working on this issue and on the requirements I am unsure about is when using file logs when running snapshot tests do you think it is so that we break the current snapshot tests that end in failure by adding a &quot;See  for more logs&quot; to the snapshot or omit doing that when running snapshots</p>
<blockquote>
<p>I want to be able to say &quot;See for more logs&quot; on failure — sort of in the vein of <a href="https://github.com/astral-sh/uv/issues/8351">#8351</a>.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-24 15:36</div>
            <div class="timeline-body"><p>It&#x27;s fine to add content to the existing snapshots.</p>
<p>cc @Gankra for general awareness about output changes</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:36:09 UTC
    </footer>
</body>
</html>
