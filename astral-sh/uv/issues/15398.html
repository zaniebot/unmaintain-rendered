<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv-build` v0.8.12 does not properly encode `RECORD` hashes - astral-sh/uv #15398</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv-build` v0.8.12 does not properly encode `RECORD` hashes</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/15398">#15398</a>
        opened by <a href="https://github.com/jwodder">@jwodder</a>
        on 2025-08-20 23:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jwodder">@jwodder</a> on 2025-08-20 23:01</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><a href="https://packaging.python.org/en/latest/specifications/binary-distribution-format/#signed-wheel-files">The wheel spec</a> states that the second column of <code>*.dist-info/RECORD</code> files should be of the form <code>digestname=urlsafe_b64encode_nopad(digest)</code>, yet uv-build 0.8.12 (and possibly earlier versions; I didn't check) generates <code>RECORD</code>s in which the digest is encoded in hexadecimal, meaning that the wheels are technically invalid.</p>
<h2>MVCE</h2>
<p>Project layout:</p>
<pre><code>./
├── pyproject.toml
└── src/
    └── foo/
        └── __init__.py
</code></pre>
<p><code>pyproject.toml</code>:</p>
<pre><code class="language-toml">[build-system]
requires = [&quot;uv_build==0.8.12&quot;]
build-backend = &quot;uv_build&quot;

[project]
name = &quot;foo&quot;
version = &quot;0.0.0&quot;
</code></pre>
<p><code>src/foo/__init__.py</code>:</p>
<pre><code class="language-python">MAGIC = 42
</code></pre>
<p>Running <code>pyproject-build</code> in this project and then inspecting the <code>foo-0.0.0.dist-info/RECORD</code> file inside <code>dist/foo-0.0.0-py3-none-any.whl</code> shows:</p>
<pre><code class="language-csv">foo/__init__.py,sha256=cb0038f9d61736785d49dc9c3f706af1ec36d3b00c15afa58cd8adc2aab95291,11
foo-0.0.0.dist-info/WHEEL,sha256=76443c98c0efcfdd1191eac5fa1d8223dba1c474dbd47676674a255e7ca48770,79
foo-0.0.0.dist-info/METADATA,sha256=45c072393aecffac115f6801d08a2434a90937857ba7a32357c933430ee7d7c7,47
foo-0.0.0.dist-info/RECORD,,
</code></pre>
<p>For comparison, if hatchling is used instead of uv-build, then the second column of the <code>foo/__init__.py</code> line in the <code>RECORD</code> is instead <code>sha256=ywA4-dYXNnhdSdycP3Bq8ew207AMFa-ljNitwqq5UpE</code>.</p>
<h3>Platform</h3>
<p>Darwin 23.6.0 x86_64</p>
<h3>Version</h3>
<p>uv-build 0.8.12</p>
<h3>Python version</h3>
<p>3.13.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @jwodder on 2025-08-20 23:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-08-20 23:07</div>
            <div class="timeline-body"><p>\cc @konstin</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">build-backend</span> added by @zanieb on 2025-08-20 23:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-08-21 08:54</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:26:51 UTC
    </footer>
</body>
</html>
