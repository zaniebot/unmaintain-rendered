<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is an venv created by uv updatable by pip? - astral-sh/uv #2292</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is an venv created by uv updatable by pip?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/2292">#2292</a>
        opened by <a href="https://github.com/echoix">@echoix</a>
        on 2024-03-08 00:45
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/echoix">@echoix</a> on 2024-03-08 00:45</div>
            <div class="timeline-body"><p>I'm one of the maintainers of <a href="https://github.com/oxsecurity/megalinter">Megalinter</a>, a tool and action that combines many linters to run on code. Most of our work is essentially integrating all these projects of different environments together. It is known to be very configurable to be able to use it any project.</p>
<p>I've been following the project since it was announced, and am exploring the suitability of using uv for installing the Python-based linters when building the docker images. Since all these tools have vastly different dependencies, they are installed in virtual environments. Currently, installing these Python tools take a larger part of the 20-25 minutes taken for the docker build step. That's why if uv, as Python package install tool, could be faster to do the job, it will shine nicely.</p>
<p>However, as mentioned, since it is a project that is known to be configurable  to adapt to the user's project's particularities, it is possible for users to add commands to install additional tools before running, or changing to a particular version if the image doesn't fit their needs. Some of them would have pip install commands in these venvs (all inside the alpine-based container).</p>
<p>So, would a venv created by uv, still be compatible (enough) for pip to modify that environment? We wouldn't want to shove uv as a change for all our users, but would love to use it for ourselves initially.</p>
<p>Thanks again for your project, it's amazing how much progress was made in the last two weeks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../oxsecurity/megalinter/issues/3389.html">oxsecurity/megalinter#3389</a> on 2024-03-08 00:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-08 01:12</div>
            <div class="timeline-body"><p>Yeah, it should be totally fine to create a virtualenv with <code>uv</code>, install stuff into it, and then expect users to use <code>pip</code> to modify it further. I wouldn't expect any issues with that.</p>
<p>The only caveat is that, by default, we don't add <code>pip</code> to <code>uv</code>-created virtualenvs, because... by default, we assume you can just install with <code>uv</code>. So if you run <code>uv venv</code>, the <code>.venv</code> <em>won't</em> include <code>pip</code>, and if you activate that virtualenv and run <code>pip install</code>, that will probably resolve to the <code>pip</code> on your system, etc. Instead, in this case, you'd would want to run <code>uv venv --seed</code> to make sure we include <code>pip</code>. (It adds a small amount of overhead, but is still very fast.)</p>
<p>In short: if you create your virtualenvs with <code>uv venv --seed</code> and install packages into them, they should be indistinguishable to users from those created by <code>python -m venv</code> or <code>virtualenv</code>. They can activate them the same way, run <code>pip install</code> the same way, etc.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-03-08 01:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/echoix">@echoix</a> on 2024-03-08 01:17</div>
            <div class="timeline-body"><p>Oh that's a fast answer!</p>
<p>Okay great, if it only takes us to make sure we add pip inside these venvs, that's easy!</p>
<p>We activate them when we run the tools, and the users need to work around this if they absolutely need to change things. Usually it happens for projects using mypy to check their code, mypy is really picky and usually needs some extra dependencies specific to the project it will be checking.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/echoix">@echoix</a> on 2024-03-08 01:20</div>
            <div class="timeline-body"><p>Oh, and last question, does uv still need to exist once the packages in the venv are installed, or it could be removed at install time and the venv would work as expected at runtime?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-08 01:38</div>
            <div class="timeline-body"><blockquote>
<p>Oh, and last question, does uv still need to exist once the packages in the venv are installed, or it could be removed at install time and the venv would work as expected at runtime?</p>
</blockquote>
<p><code>uv</code> doesn't need to exist afterwards, it could be removed!</p>
<p>I typically don't install <code>uv</code> into the virtualenv at all. <code>uv</code> can exist anywhere on the system and install into any virtualenv or Python interpreter, so there's generally no need to install it in the environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/echoix">@echoix</a> on 2024-03-08 01:53</div>
            <div class="timeline-body"><p>I meant in the system at all: when building docker images, you want to limit files that needs to be saved at each layer. You'd want to clean unnecessary files in the same layer as they are created. So, I was exploring the need to have this persisted or not. Your answer confirms my impression then.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @echoix on 2024-03-08 02:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-08 02:24</div>
            <div class="timeline-body"><p>üëç Totally fine to remove the <code>uv</code> binary and the <code>uv</code> cache too.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:57 UTC
    </footer>
</body>
</html>
