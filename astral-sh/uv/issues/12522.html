<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make `python-install-mirror` configurable in single-file scripts - astral-sh/uv #12522</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Make <code>python-install-mirror</code> configurable in single-file scripts</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/12522">#12522</a>
        opened by <a href="https://github.com/l1xnan">@l1xnan</a>
        on 2025-03-28 03:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/l1xnan">@l1xnan</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Constrained by the network environment, I hope that the single-file script I distribute includes <code>python-install-mirror</code> configuration. In this way, when users execute the script, Python and its dependencies can be automatically installed without being restricted by the network, and the configuration can be completed. There is no need to specifically emphasize to the script users that they need to configure the <code>UV_PYTHON_INSTALL_MIRROR</code> environment variable, which will provide a smoother user experience.</p>
<pre><code class="language-python"># /// script
# requires-python = &quot;&gt;=3.10,&lt;3.11&quot;
# dependencies = [
#     &quot;requests&lt;3&quot;,
#     &quot;rich&quot;,
# ]
# [[tool.uv.index]]
# url = &quot;https://pypi.tuna.tsinghua.edu.cn/simple&quot;

# [tool.uv]
# python-install-mirror = &quot;https://&lt;mirror-url&gt;/indygreg/python-build-standalone/releases/download&quot;
# ///
import requests
</code></pre>
<p>However, currently, the metadata of the single-file script and the command line <code>uv run script.py --python-install-mirror=&quot;https://&lt;python-install-mirror&gt;&quot;</code> do not support the <code>python-install-mirror</code> configuration. I hope this configuration can be supported.</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @l1xnan on 2025-03-28 03:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-01 19:35</div>
            <div class="timeline-body"><p>We've previously considered this a user-setting, not a project or script setting. I would be surprised if I ran a script and it transparently fetched Python versions from a mirror.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @zanieb on 2025-04-01 19:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/l1xnan">@l1xnan</a> on 2025-04-02 01:37</div>
            <div class="timeline-body"><blockquote>
<p>We've previously considered this a user-setting, not a project or script setting. I would be surprised if I ran a script and it transparently fetched Python versions from a mirror.</p>
</blockquote>
<p>I agree that in the vast majority of cases, it is a user setting, and for most people, configuring it using environment variables is a better choice. My usage scenario is rather special. I need to share running scripts with people who are not familiar with programming in an environment with network limitations, and I hope to minimize the communication costs related to network issues. In addition, it can make the configurations in the single-file script as consistent as possible with the available configurations in pyproject.toml. If it is finally considered that it is better to only place it in the user settings, I am also very willing to accept that. In that case, I will specifically emphasize the configuration of the environment variables during the stage of guiding the installation of uv. Thank you for your explanation!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fengzhao">@fengzhao</a> on 2025-07-31 06:07</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>We've previously considered this a user-setting, not a project or script setting. I would be surprised if I ran a script and it transparently fetched Python versions from a mirror.</p>
</blockquote>
<p>I agree that in the vast majority of cases, it is a user setting, and for most people, configuring it using environment variables is a better choice. My usage scenario is rather special. I need to share running scripts with people who are not familiar with programming in an environment with network limitations, and I hope to minimize the communication costs related to network issues. In addition, it can make the configurations in the single-file script as consistent as possible with the available configurations in pyproject.toml. If it is finally considered that it is better to only place it in the user settings, I am also very willing to accept that. In that case, I will specifically emphasize the configuration of the environment variables during the stage of guiding the installation of uv. Thank you for your explanation!</p>
</blockquote>
<p>Agree</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:30:40 UTC
    </footer>
</body>
</html>
