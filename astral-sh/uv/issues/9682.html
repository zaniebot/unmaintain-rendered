<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>&quot;Can't combine URLs from both `project.dependencies` and `tool.uv.sources`&quot; when combining GitHub link and local path - astral-sh/uv #9682</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>&quot;Can't combine URLs from both `project.dependencies` and `tool.uv.sources`&quot; when combining GitHub link and local path</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/9682">#9682</a>
        opened by <a href="https://github.com/bersbersbers">@bersbersbers</a>
        on 2024-12-06 13:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bersbersbers">@bersbersbers</a> on 2024-12-06 13:38</div>
            <div class="timeline-body"><p>I would like to support editable installs of a package and one of its dependencies, if the dependencies are already checked out locally.</p>
<p>This is what I tried:</p>
<pre><code class="language-toml">[project]
name = &quot;Test&quot;
version = &quot;0.1&quot;
dependencies = [
    &quot;humanize @ git+https://github.com/python-humanize/humanize.git/&quot;,
]

[tool.uv.sources]
humanize = { path = &quot;../humanize&quot;, editable = true }
</code></pre>
<p>Unfortunately, <code>uv pip install .</code> gives me</p>
<pre><code>  × Failed to build `test @ file:///C:/Git/bug`
  ├─▶ Failed to parse entry: `humanize`
  ╰─▶ Can't combine URLs from both `project.dependencies` and `tool.uv.sources`
</code></pre>
<p>I read some <a href="https://docs.astral.sh/uv/concepts/projects/dependencies/#dependency-sources">documentation</a>, but I must admit I was unable to figure out if the above should be supported or not.</p>
<pre><code>uv 0.5.6 (b70c4f30e 2024-12-03)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2024-12-06 13:50</div>
            <div class="timeline-body"><p>This issue(https://github.com/astral-sh/uv/issues/7945) mentions your problem, so I think you should discuss it there.
https://github.com/astral-sh/uv/issues/7945#issuecomment-2409866279</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-06 14:25</div>
            <div class="timeline-body"><p>@bersbersbers -- What do you want / expect to happen when someone runs <code>uv pip install .</code> on that project?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @zanieb on 2024-12-06 14:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bersbersbers">@bersbersbers</a> on 2024-12-07 00:14</div>
            <div class="timeline-body"><p>@charliermarsh that's a good question, since the documentation is rather sparse on this feature (unless I looked in the wrong place).</p>
<p>I think I would <em>expect</em> to happen whatever happens for this <code>pyproject.toml</code> (where the &quot;main&quot; source is now PyPI rather than GitHub):</p>
<pre><code class="language-toml">[project]
name = &quot;Test&quot;
version = &quot;0.1&quot;
dependencies = [&quot;humanize&quot;]  # from PyPI

[tool.uv.sources]
humanize = { path = &quot;../humanize&quot;, editable = true }
</code></pre>
<p>In an ideal world, I would <em>want</em> <code>uv pip install -e .</code> to install &quot;Test&quot; and &quot;humanize&quot; in editable mode, from <code>.</code> and <code>../humanize</code>, respectively.</p>
<p>I am unsure what <code>uv pip install .</code> should do for &quot;humanize&quot;. I think both options would be fine for me (GitHub or <code>../humanize</code>), with a slight preference for the local editable install. I would like if the local install folder was optional: meaning, if it was missing, it should not impact installation of the package, at least in non-editable mode - maybe also generally.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/9718.html">astral-sh/uv#9718</a> on 2024-12-08 13:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-12-09 17:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-12-09 17:16</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:01 UTC
    </footer>
</body>
</html>
