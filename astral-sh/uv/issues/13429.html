<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIGINT is being handled very strangely in interactive shell - astral-sh/uv #13429</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>SIGINT is being handled very strangely in interactive shell</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13429">#13429</a>
        opened by <a href="https://github.com/bedilbek">@bedilbek</a>
        on 2025-05-13 11:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bedilbek">@bedilbek</a></div>
            <div class="timeline-body">Summary
Expected Behavior
<pre><code>python3.12
Python 3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
&gt;&gt;&gt; 
</code></pre>
<p>In a normal interactive Python shell, when I press SIGINT, it just sends only one interrupt, which is a normal behavior</p>
Actual Behavior (uv python interactive shell)
<pre><code>uv run python
Python 3.12.3 (main, Feb  4 2025, 14:48:35) [GCC 13.3.0] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; 
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
&gt;&gt;&gt; 
</code></pre>
<p>In the <code>uv</code> run interactive Python shell, when I press SIGINT for the first time, I get only an interrupt, which is okay, however, second, third, and subsequent SIGINT interrupt gets executed twice, so I get two interrupts in the strange console output. Also, after SIGINT key press, I guess Enter key gets pressed first, and then only interrupt, which feels even more bizarre.</p>
Actual Behavior (docker uv python interactive shell)
<pre><code>docker run --rm -it ghcr.io/astral-sh/uv:python3.12-bookworm-slim uv run python
Python 3.12.10 (main, Apr 28 2025, 22:12:29) [GCC 12.2.0] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; 
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
KeyboardInterrupt
&gt;&gt;&gt; 
&gt;&gt;&gt; 
</code></pre>
<p>So the same problem can be observed both from the Docker container and from the host</p>
Platform
<p>Ubuntu 24.04.2 LTS</p>
Version
<p>uv 0.7.3</p>
Python version
<p>Python 3.12.3
Python 3.12.10</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/bedilbek">@bedilbek</a> on 2025-05-13 11:15</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;SIGINT is being handled very strangely&quot; to &quot;SIGINT is being handled very strangely in interactive shell&quot; by <a href="https://github.com/bedilbek">@bedilbek</a> on 2025-05-13 11:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-13 12:16</div>
            <div class="timeline-body"><p>See <a href="https://github.com/astral-sh/uv/issues/12108">astral-sh/uv#12108</a>#issuecomment-2715153717</p>
<p>Your shell is sending one SIGINT, uv is sending another.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-13 12:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-05-13 12:17</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-01 04:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bedilbek">@bedilbek</a> on 2025-06-23 15:22</div>
            <div class="timeline-body"><p>I opened this issue as it was the smallest reproducible issue similar to #13919. Because I couldn&#x27;t make infinite interrupt reproducible and it only happened in one of my complex environments.</p>
<p>At least thanks that #13919 was solved</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:38:37 UTC
    </footer>
</body>
</html>
