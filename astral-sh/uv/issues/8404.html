<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`init_app_build_backend_maturin` test timed out on macOS - astral-sh/uv #8404</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>init_app_build_backend_maturin</code> test timed out on macOS</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8404">#8404</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-10-21 03:20
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><pre><code>--- STDERR:              uv::it init::init_app_build_backend_maturin ---

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ Unfiltered output ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
----- stdout -----

----- stderr -----
Initialized project `foo`

────────────────────────────────────────────────────────────────────────────────


     TIMEOUT [  90.027s] uv::it init::init_lib_build_backend_maturin
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">internal</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-21 03:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;`init_app_build_backend_maturin` timed out on macOS&quot; to &quot;`init_app_build_backend_maturin` test timed out on macOS&quot; by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-21 03:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-10-21 08:49</div>
            <div class="timeline-body"><p>Can you see where it got stuck?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-21 13:37</div>
            <div class="timeline-body"><p>Unfortunately no, that&#x27;s all I got.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-21 22:35</div>
            <div class="timeline-body"><p>Here&#x27;s another https://github.com/astral-sh/uv/actions/runs/11446571344/job/31855447015 also macOS</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-21 22:40</div>
            <div class="timeline-body"><p>Wow these tests are just insanely slow to begin with</p>
<pre><code>        SLOW [  46.554s] uv::it init::init_app_build_backend_maturin
        SLOW [  45.017s] uv::it init::init_lib_build_backend_maturin
</code></pre>
<p>I bet it&#x27;s just a bit slower sometimes and times out. It runs in 7s on my machine — I couldn&#x27;t reproduce a timeout locally. Regardless, this just seems like an unacceptably slow unit test.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-10-21 22:43</div>
            <div class="timeline-body"><p>We can speed them up by switching to cffi (no rust deps), pyo3 is quite slow to compile in an uncached integration test (<a href="https://github.com/PyO3/maturin/issues/2272">PyO3/maturin#2272</a>).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-21 22:50</div>
            <div class="timeline-body"><p>I&#x27;m not sure how to do that, but that makes sense to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/konstin">@konstin</a> on 2024-10-22 12:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davidhewitt">@davidhewitt</a> on 2024-11-26 14:58</div>
            <div class="timeline-body"><p>Was part of the problem that the tests were building release binaries? I wonder if setting <code>MATURIN_PEP517_ARGS=--profile=dev</code> might have helped if so.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-11-26 15:01</div>
            <div class="timeline-body"><p>At least in the maturin test suite itself, even building with dev is slow, and the cache artifacts would be too large to store (<a href="https://github.com/PyO3/maturin/issues/2272">PyO3/maturin#2272</a>)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:34:55 UTC
    </footer>
</body>
</html>
