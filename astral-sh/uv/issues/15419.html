<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Set `GIT_LFS_SKIP_SMUDGE=1` if `UV_GIT_LFS` is not set? - astral-sh/uv #15419</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Set `GIT_LFS_SKIP_SMUDGE=1` if `UV_GIT_LFS` is not set?</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/15419">#15419</a>
        opened by <a href="https://github.com/Turakar">@Turakar</a>
        on 2025-08-21 15:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Turakar">@Turakar</a> on 2025-08-21 15:13</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>At the moment, you need to opt-in to git lfs using <code>UV_GIT_LFS=1</code> if you want to use it. As such, the default behavior of uv is to not pull git lfs artifacts. Thus, I think it would be helpful to set <code>GIT_LFS_SKIP_SMUDGE=1</code> so that LFS knows to not pull lfs artifacts and does not error.</p>
<h3>Example</h3>
<p>Instead of having to instruct users of my repository to run</p>
<pre><code>GIT_LFS_SKIP_SMUDGE=1 uv sync
</code></pre>
<p>they can just run the normal <code>uv sync</code> instead. If a repository requires lfs pulling, they anyways already need to instruct</p>
<pre><code>UV_GIT_LFS=1 uv sync
</code></pre>
<p>This might reduce surprises as in #12938.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @Turakar on 2025-08-21 15:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/alexbowe">@alexbowe</a> on 2025-09-29 18:53</div>
            <div class="timeline-body"><p>I just arrived here after having this error show up for me. My sense is that silently checking out LFS files without following their refs and without raising an error would also lead to downstream surprises.</p>
<p>I completely agree with the need to simplify how we instruct users to <code>uv sync</code> though. It'd be nice if the LFS strategy could be configured on a per-dependency basis in <code>pyproject.toml</code> or something.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Turakar">@Turakar</a> on 2025-10-01 18:12</div>
            <div class="timeline-body"><p>Per-dependency sounds like a good solution to me, too. Could be another argument to the source declaration which is already there, as one would declare a branch as well for example. I would still advocate for changing the default to either UV_GIT_LFS=1 or GIT_LFS_SKIP_SMUDGE=1.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:05 UTC
    </footer>
</body>
</html>
