<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flag `--native-tls` still shows UnknownIssuer on windows. - astral-sh/uv #17355</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Flag <code>--native-tls</code> still shows UnknownIssuer on windows.</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/17355">#17355</a>
        opened by <a href="https://github.com/Tennyleaz">@Tennyleaz</a>
        on 2026-01-08 01:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Tennyleaz">@Tennyleaz</a> on 2026-01-08 01:00</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>In a cooperation network, my IT installed company certificate as trusted root CA on the windows PC.
Even using <code>--native-tls</code> flag, uv still shows UnknownIssuer error, unless I use <code>--allow-insecure-host pypi.org</code>.
The error output:</p>
<pre><code>PS C:\Users\tenny_lu&gt; uv tool install pycowsay
⠇ Resolving dependencies...                                                                                               × Request failed after 3 retries
  ├─▶ Failed to fetch: `https://pypi.org/simple/pycowsay/`
  ├─▶ error sending request for url (https://pypi.org/simple/pycowsay/)
  ├─▶ client error (Connect)
  ╰─▶ invalid peer certificate: UnknownIssuer
  help: Consider enabling use of system TLS certificates with the `--native-tls` command-line flag
PS C:\Users\tenny_lu&gt; uv tool install pycowsay --native-tls
⠧ Resolving dependencies...                                                                                             error: Request failed after 3 retries
  Caused by: Failed to fetch: `https://pypi.org/simple/pycowsay/`
  Caused by: error sending request for url (https://pypi.org/simple/pycowsay/)
  Caused by: client error (Connect)
  Caused by: invalid peer certificate: UnknownIssuer
</code></pre>
<p>But plain pip still works out of the box:</p>
<pre><code>PS C:\Users\tenny_lu&gt; python -m pip install pycowsay
Defaulting to user installation because normal site-packages is not writeable
Collecting pycowsay
  Downloading pycowsay-0.0.0.2-py3-none-any.whl.metadata (965 bytes)
Downloading pycowsay-0.0.0.2-py3-none-any.whl (4.0 kB)
Installing collected packages: pycowsay
Successfully installed pycowsay-0.0.0.2
</code></pre>
<p>On the same network, a linux PC does not have this problem. The output is like:</p>
<pre><code>tenny@ubuntu-tenny01:~$ uv tool install pycowsay
Resolved 1 package in 589ms
Prepared 1 package in 121ms
Installed 1 package in 9ms
 + pycowsay==0.0.0.2
Installed 1 executable: pycowsay
</code></pre>
<h3>Platform</h3>
<p>Windows 11 x64</p>
<h3>Version</h3>
<p>uv 0.9.22</p>
<h3>Python version</h3>
<p>Python 3.13.11 (Installed from python website)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @Tennyleaz on 2026-01-08 01:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/LoukasPap">@LoukasPap</a> on 2026-01-08 01:18</div>
            <div class="timeline-body"><p>Have you tried setting it as an environment variable <code>UV_NATIVE_TLS=true</code>and then running it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/NMertsch">@NMertsch</a> on 2026-01-09 13:23</div>
            <div class="timeline-body"><p>Possible duplicate of #9243. I hope it will be resolved soon, we also use <code>allow-insecure-host</code> because of this.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:12 UTC
    </footer>
</body>
</html>
