<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv pip install does not create executable for dbt - astral-sh/uv #13170</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>uv pip install does not create executable for dbt</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/13170">#13170</a>
        opened by <a href="https://github.com/dnabb">@dnabb</a>
        on 2025-04-28 08:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dnabb">@dnabb</a> on 2025-04-28 08:43</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Not sure if this a bug or just me missing out some details about the <a href="https://docs.astral.sh/uv/pip/compatibility/">compativility with pip</a>, but I found that uv and pip behave differently when installing <a href="https://docs.getdbt.com/docs/cloud/cloud-cli-installation?install=pip">dbt Cloud CLI </a>.</p>
<p>Starting from a clean environment and using pip to install dbt;
<code>uv venv --python 3.12 --seed</code>
<code>pip install dbt --no-cache-dir</code>
results in the creation of a <code>dbt.exe</code> executable inside .venv/Scripts, which is the expected behaviour.</p>
<p>If I instead I do the same thing using uv (no pip needed in that case):
<code>uv venv --python 3.12</code>
<code>uv pip install dbt --no-cache-dir</code>
dbt appears to be properly installed (shows up when doing <code>uv pip list</code>) but there is no <code>dbt.exe</code> available on the path (or anywhere else I could find).
This means that running <code>dbt --version</code> fails (the term 'dbt' is not recognized as a name of a cmdlet, function, script file, or executable program) and the dbt CLI is not usable as intended.</p>
<p>A (likely) consequence of this behaviour is that it's not possilbe to install dbt CLI as a tool:
<code>uv tool install dbt</code> &gt; No executables are provided by <code>dbt</code></p>
<p>I suspect this has something to do with the way dbt has configured their setup (which basically seems to just download the executable from their Github), but I couldn't find anything about this diverging behaviour in the <a href="https://docs.astral.sh/uv/pip/compatibility/#compatibility-with-pip-and-pip-tools">compatibility guide</a>, so I was hoping someone could explain what is really happening here and if there is something that can be done (by either the uv or dbt team) to address this.</p>
<h3>Platform</h3>
<p>Windows 11</p>
<h3>Version</h3>
<p>uv 0.6.17 (8414e9f3d 2025-04-25)</p>
<h3>Python version</h3>
<p>Python 3.12.8</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @dnabb on 2025-04-28 08:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-04-28 12:10</div>
            <div class="timeline-body"><p>I can confirm that <code>pip install</code> works and <code>uv pip install</code> fails. However, the <code>dbt</code> package has some non-standard <code>setup.py</code> assumptions about how a build is structured and from where files are included (<code>install_dir = Path(executable).parent</code> for unpacking the binary to). Even pip fails when using <code>pip wheel .</code> on the sources, so I consider this a bug in their packaging setup that relies on implementation details of <code>pip install</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @konstin on 2025-04-28 12:10</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @konstin on 2025-04-28 12:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jojo0094">@jojo0094</a> on 2025-05-04 09:05</div>
            <div class="timeline-body"><p>Not sure if this is what you want. <code>uv add dbt-core</code> works for me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-05-04 12:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CrisNavasM">@CrisNavasM</a> on 2025-09-16 12:52</div>
            <div class="timeline-body"><p>@jojo0094 he's talking about <a href="https://pypi.org/project/dbt/">dbt</a> <strong>not</strong> <a href="https://pypi.org/project/dbt-core/">dbt-core</a></p>
<p>Indeed I'm facing the same issues</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-16 13:36</div>
            <div class="timeline-body"><p>The best path forward here is to get in contact with your support team at dbt. We can't fix this.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/CrisNavasM">@CrisNavasM</a> on 2025-09-16 14:12</div>
            <div class="timeline-body"><p><img width="678" height="233" alt="Image" src="https://github.com/user-attachments/assets/71916924-da63-455b-9b96-71d054e88156" /></p>
<p>Indeed, <a href="https://getdbt.slack.com/archives/C03SAHKKG2Z/p1728342729085229?thread_ts=1728323878.624179&amp;cid=C03SAHKKG2Z">Slack convo</a> for further search queries that land into here</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-16 14:20</div>
            <div class="timeline-body"><p><code>uv add dbt</code> should work still and is a reasonable way to lock the dependency in your project. It's <em>is</em> a Python package.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-09-16 15:22</div>
            <div class="timeline-body"><p>For technical context on why dbt fails to install in some cases: The dbt source distribution has a build script that downloads the dbt binary into <code>Path(sys.executable).parent</code>. This approach works with <code>pip install</code> where <code>sys.executable</code> points to the Python of the target venv, but it doesn't work with fully isolated build nor with builds that persist only the wheel.</p>
<p>These failure paths can also surface with pip, for example <code>pip install dbt</code> in a venv in a different environment with the same Python version produces a similarly non-functional dbt install that lacks the <code>dbt</code> executable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2025-09-16 15:53</div>
            <div class="timeline-body"><blockquote>
<p>This approach works with <code>pip install</code> where <code>sys.executable</code> points to the Python of the target venv, but it doesn't work with fully isolated build nor with builds that persist only the wheel.</p>
</blockquote>
<p>And pip will likely change behavior to use fully isolated builds eventually, it's a matter of an interested maintainer with enough time to make that change.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-16 18:42</div>
            <div class="timeline-body"><p>I've now had an extended conversation with someone from dbt (in the linked Slack thread) and they'll raise this with their engineering team.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:27 UTC
    </footer>
</body>
</html>
