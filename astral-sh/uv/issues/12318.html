<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`error: Failed to generate package metadata` for locally installed package (`Failed to deserialize cache entry`) - astral-sh/uv #12318</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>error: Failed to generate package metadata</code> for locally installed package (<code>Failed to deserialize cache entry</code>)</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/12318">#12318</a>
        opened by <a href="https://github.com/pnovotnak">@pnovotnak</a>
        on 2025-03-19 16:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/pnovotnak">@pnovotnak</a></div>
            <div class="timeline-body">Summary
<p>I have a service written in python (not an installable package). I just began using <code>uv run</code> within this project as a wrapper for project venv binaries and project-provided scripts. I am seeing this error after introducing <code>uv run</code>. I&#x27;m not 100% sure what conditions triggered it, but <code>uv clean</code> fixed the issue.</p>
<p><img src="https://github.com/user-attachments/assets/84a9f638-5ded-4426-83b3-0cbc10785758" alt="Image"></p>
<p>I have the following in my <code>pyproject.toml</code>:</p>
<pre><code>[tool.uv.sources]
my-package = { path = &quot;generated&quot; }
</code></pre>
<p>And the following in my <code>uv.lock</code>:</p>
<pre><code>[[package]]
name = &quot;my-package&quot;
version = &quot;0.0.0&quot;
source = { directory = &quot;generated&quot; }
</code></pre>
<p>Finally, in <code>generated/setup.py</code>:</p>
<pre><code>from setuptools import find_packages
from setuptools import setup


setup(
    name=&quot;my_package&quot;,
    packages=find_packages(),
    package_data={&quot;&quot;: [&quot;py.typed&quot;, &quot;*.pyi&quot;]},
    include_package_data=True,
)
</code></pre>
<p>I&#x27;m wondering a few things:</p>
<ol>
<li>Are there changes I can make to my configuration to prevent this? If not:<ol>
<li>Can this cache entry be automatically ignored in this case?</li>
<li>Could the cache entry be automatically purged?</li>
</ol>
</li>
</ol>
<p>Apologies for not being able to provide all conditions to reproduce.</p>
<hr>

<p>Notes:</p>
<ol>
<li><em>It&#x27;s possible the uv version that created the entry is older than 0.6.8.</em></li>
</ol>
Platform
<p>macOS 15.3.2 (24D81)</p>
Version
<p>0.6.8 (installed via brew), 0.6.8 (installed in venv)</p>
Python version
<p>venv: 3.10.16</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/pnovotnak">@pnovotnak</a> on 2025-03-19 16:53</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-19 16:55</div>
            <div class="timeline-body"><p>Thanks, these should be non-fatal. @Gankra I think this suggests there&#x27;s something we missed here...</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-19 17:03</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-19 17:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:37:52 UTC
    </footer>
</body>
</html>
