<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>New config option `keyring-path` to support keyring - astral-sh/uv #12755</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>New config option `keyring-path` to support keyring</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/12755">#12755</a>
        opened by <a href="https://github.com/kevinli1993">@kevinli1993</a>
        on 2025-04-08 19:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kevinli1993">@kevinli1993</a> on 2025-04-08 19:23</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Currently, the <code>keyring</code> path is hard-coded to the string <code>&quot;keyring&quot;</code></p>
<p>https://github.com/astral-sh/uv/blob/e0b4dfe923ee807ed2e6e9e16e101a652977ef42/crates/uv-auth/src/keyring.rs#L93</p>
<p>Could we have a new config option <code>keyring-path</code> (default value: <code>&quot;keyring&quot;</code>), so that the user can control which executable runs:</p>
<pre><code>[tool.uv]
keyring-provider = &quot;subprocess&quot;
keyring-path = &quot;/absolute/path/to/keyring&quot;
</code></pre>
<p>with an associated env var <code>UV_KEYRING_PATH</code>.</p>
<p>The use-case is that different projects may want to use different <code>keyring</code>'s (some might use the global one; others might use another one that has different plugins, etc.).  Right now, the first <code>keyring</code> on the user's <code>PATH</code> is used, and I would like to provide an absolute path.</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @kevinli1993 on 2025-04-08 19:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kevinli1993">@kevinli1993</a> on 2025-04-14 02:03</div>
            <div class="timeline-body"><p>Hi @zanieb, I'm wondering if there's any appetite for this enhancement? If so, I'd be happy to work on a PR.</p>
<p>Thanks, much appreciated.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-15 20:23</div>
            <div class="timeline-body"><p>@kevinli1993 we're going to be doing more design work around keyring soon, so I'm hesitant to make changes here. cc @jtfmumm and @konstin</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-15 20:24</div>
            <div class="timeline-body"><p>I think the problem here is <code>keyring-path</code> is only relevant for <code>subprocess</code> which is only one of the modes we want to support. It could be <code>UV_KEYRING_COMMAND_PATH</code> or something, but it really depends on if we end up solving this use-case with the broader work around keyring configuration.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kevinli1993">@kevinli1993</a> on 2025-04-15 22:25</div>
            <div class="timeline-body"><p>Got it, that makes sense; I look forward to that and will revisit later.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RHeynsZa">@RHeynsZa</a> on 2025-07-17 09:50</div>
            <div class="timeline-body"><p>Could we add a warning if a faulty/wrong keyring is being used? Tracking this down is a massive pain</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-17 12:06</div>
            <div class="timeline-body"><p>How would we know the wrong keyring is being used? Can you say more?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RHeynsZa">@RHeynsZa</a> on 2025-08-08 12:47</div>
            <div class="timeline-body"><p>Honestly, Id just recommend something like adding a message to auth failure saying</p>
<blockquote>
<p>Double check keyring installation by running <code>which keyring</code> for further debugging</p>
</blockquote>
<p>After running that i was able to track down the issue</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dannytodd">@dannytodd</a> on 2025-12-09 15:54</div>
            <div class="timeline-body"><p>+1 for an improved keyring experience.</p>
<p>Using <code>keyring</code> in <code>subprocess</code> mode, which we do so in both <code>pip</code> and <code>uv</code>,  can be a huge pain due to being at the whim of PATH which may pick up <code>keyring</code> installs from brew, apt, local venv etc. which don't include required backends. This is of course just a missing dependencies issue, but it would be great to be explicit if possible.  A solution I would like to see would be something akin to a &quot;global&quot; mode that would, instead of invoking <code>keyring</code>, have uv target a select <code>keyring</code> location, potentially one provided via env var or a lookup e.g. tool dir of <code>uv tool install keyring</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-09 17:16</div>
            <div class="timeline-body"><p>@dannytodd can you share which keyring plugins are you using?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dannytodd">@dannytodd</a> on 2025-12-10 09:30</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/dannytodd">@dannytodd</a> can you share which keyring plugins are you using?</p>
</blockquote>
<p>We're using the <a href="https://pypi.org/project/keyrings.google-artifactregistry-auth/">gcloud auth backend</a>: <code>keyrings.google-artifactregistry-auth</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:27 UTC
    </footer>
</body>
</html>
