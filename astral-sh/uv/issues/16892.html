<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Script overwriting behavior not aligned with pip - astral-sh/uv #16892</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Script overwriting behavior not aligned with pip</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/16892">#16892</a>
        opened by <a href="https://github.com/ywang96">@ywang96</a>
        on 2025-11-29 07:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ywang96">@ywang96</a></div>
            <div class="timeline-body">Question
<p>Hi there! Thanks for the great project and we have been adopting <code>uv</code> for various projects under <code>vllm-project</code> and prompting it as our main environment setup framework!</p>
<p>We recently run into an issue where one behavior is not aligned between <code>uv</code> and <code>pip</code>.</p>
<p>Suppose I have a project <code>abc-new</code> that depends on an existing library <code>abc</code>, and in the <code>pyproject.toml</code> of <code>abc-new</code> I have something like this</p>
<pre><code>...
dependencies = [
    ...
    &quot;abc==x.xx.x&quot;,
]
[project.scripts]
dummy = &quot;abc-new.entrypoints.cli.main:main&quot;
</code></pre>
<p>Here <code>dummy</code> is actually already a command of the library <code>abc</code>, which means we&#x27;re overwriting its behavior to point to <code>abc-new.entrypoints.cli.main:main</code>.</p>
<p>I have verified this works with <code>pip install</code> as expected, but unfortunately it does not with <code>uv</code> (the <code>dummy</code> command isn&#x27;t getting overwritten) and the current workaround is to first install <code>abc==x.xx.x</code> itself, then install <code>abc-new</code>.</p>
<p>I&#x27;ve tried to search in some github issues and couldn&#x27;t really find any solution, so I&#x27;m wondering if there&#x27;ll be a better way to resolve this issue other than install the two packages separately, especially when users won&#x27;t need to do so when using <code>pip</code>.</p>
<p>Thanks!</p>
Platform
<p>Linux 6.14.0-29-generic x86_64 GNU/Linux</p>
Version
<p>uv 0.9.2</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/ywang96">@ywang96</a> on 2025-11-29 07:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ywang96">@ywang96</a> on 2025-12-03 10:18</div>
            <div class="timeline-body"><p>Hello! Gentle ping regarding this question/issue ðŸ˜„</p>
<p>To provide more context, the project in question here is <code>vllm-omni</code> and as you can see we <a href="https://github.com/vllm-project/vllm-omni/blob/598d26580e0f5c05bcd1e8ab49a0dfdf902d500e/pyproject.toml#L41">have to comment out the dependency on vLLM</a> because of this issue, but it would be great if we can include it so that users won&#x27;t need to install two libraries. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-03 12:54</div>
            <div class="timeline-body"><p>I think you&#x27;re in unstandardized behavior here. The install order is arbitrary and tool specific, as far as I know.</p>
<p>I&#x27;m not sure we should do a topological install order. I presume that&#x27;s what you&#x27;d need to resolve this. I&#x27;d generally recommend <em>not</em> using a pattern which shadows artifacts of another package.</p>
<p>cc @konstin</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-03 12:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-03 12:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2025-12-03 15:37</div>
            <div class="timeline-body"><p>FWIW pip does intentionally do a best attempt at topologically ordering the installs: https://github.com/pypa/pip/blob/25.3/src/pip/_internal/resolution/resolvelib/resolver.py#L218</p>
<p>I say best because it gives up after 5 cycles to avoid exponential blow up in highly cyclical dependencies.</p>
<p>This is all of course tool specific behavior, it&#x27;s a matter of what the tool thinks is best for users.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ywang96">@ywang96</a> on 2025-12-05 19:12</div>
            <div class="timeline-body"><p>Thank you both for the explanation and pointers here!</p>
<p>@zanieb Totally understood if this is not a standardized behavior - would you say the current workaround (i.e, ask users to first install <code>vllm</code>, then <code>vllm-omni</code>) will be the best way to do it in the foreseeable future?</p>
<p>We really want users to be able to use a single command line entrypoint (e.g, <code>vllm ...</code>) for the two projects while being able manager them separately, (and, of course, still use <code>uv</code> as their environment manager), so if there&#x27;s a better way to do it please let me know! Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-11 09:54</div>
            <div class="timeline-body"><p>It doesn&#x27;t seem correct that one dependency can implictly overwrite the entrypoints of another dependency. Since both are vllm projects, can you do the dispatching inside the entrypoint?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:41:10 UTC
    </footer>
</body>
</html>
