<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uvx inside docker can't connect internet - astral-sh/uv #12016</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>uvx inside docker can't connect internet</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/12016">#12016</a>
        opened by <a href="https://github.com/gauraputu">@gauraputu</a>
        on 2025-03-06 19:01
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/gauraputu">@gauraputu</a> on 2025-03-06 19:01</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Trying to use <code>shadcn-django</code> inside a docker container but got the following error</p>
<pre><code># uvx shadcn_django init
  × Failed to download `annotated-types==0.7.0`
  ├─▶ Failed to fetch:
  │   `https://files.pythonhosted.org/packages/78/b6/6307fbef88d9b5ee7421e68d78a9f162e0da4900bc5f5793f6d3d0e34fb8/annotated_types-0.7.0-py3-none-any.whl`
  ├─▶ Could not connect, are you offline?
  ├─▶ Request failed after 3 retries
  ├─▶ error sending request for url
  │   (https://files.pythonhosted.org/packages/78/b6/6307fbef88d9b5ee7421e68d78a9f162e0da4900bc5f5793f6d3d0e34fb8/annotated_types-0.7.0-py3-none-any.whl)
  ├─▶ client error (Connect)
  ├─▶ dns error: failed to lookup address information: Try again
  ╰─▶ failed to lookup address information: Try again
  help: `annotated-types` (v0.7.0) was included because `shadcn-django` (v0.12.2) depends on `copier` (v9.5.0) which depends on
        `pydantic` (v2.10.6) which depends on `annotated-types`
</code></pre>
<p>running <code>uv pip install -r requirements.txt</code> also result in the following error</p>
<pre><code># uv venv
Using CPython 3.12.8 interpreter at: /usr/local/bin/python
Creating virtual environment at: .venv
# uv pip install -r requirements.txt
⠹ Resolving dependencies...                                                                                                              error: Failed to fetch: `https://pypi.org/simple/django/`
  Caused by: Could not connect, are you offline?
  Caused by: Request failed after 3 retries
  Caused by: error sending request for url (https://pypi.org/simple/django/)
  Caused by: client error (Connect)
  Caused by: dns error: failed to lookup address information: Try again
  Caused by: failed to lookup address information: Try again
</code></pre>
<h1>Minimal Reproducible Example</h1>
<p>dockerfile</p>
<pre><code>FROM python:3.12.8-slim-bookworm
# Install uv for working with shadcn-django
COPY --from=ghcr.io/astral-sh/uv:0.6.4 /uv /uvx /bin/

ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

WORKDIR /app

# activate virtual environtment
ENV PATH=&quot;.venv/bin:$PATH&quot;

COPY . /app/
RUN apt-get update &amp;&amp; apt-get install -y gettext libmagic1 git
RUN pip install -r requirements.txt --upgrade pip
</code></pre>
<p>docker compose</p>
<pre><code>services:
  app-test:
    build: .
    volumes:
      - .:/app
    ports:
      - &quot;8000:8000&quot;
    tty: true
</code></pre>
<p>sample requirements.txt</p>
<pre><code>asgiref==3.8.1
certifi==2025.1.31
charset-normalizer==3.4.1
click==8.1.8
django==5.1.6
django-browser-reload==1.18.0
django-cotton==1.6.0
django-tailwind-cli==4.1.0
django-typer==3.0.0
django-unfold==0.50.0
dotenv==0.9.9
idna==3.10
psycopg2-binary==2.9.10
python-dotenv==1.0.1
requests==2.32.3
semver==3.0.4
shellingham==1.5.4
sqlparse==0.5.3
typer-slim==0.15.2
typing-extensions==4.12.2
urllib3==2.3.0
</code></pre>
<h3>Platform</h3>
<p>Linux 6.6.75-2-MANJARO x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.6.4</p>
<h3>Python version</h3>
<p>Python 3.12.8</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @gauraputu on 2025-03-06 19:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-03-06 19:27</div>
            <div class="timeline-body"><p>I think this is a duplicate of https://github.com/astral-sh/uv/issues/8450</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by @zanieb on 2025-03-06 20:46</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-03-07 01:13</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:26 UTC
    </footer>
</body>
</html>
