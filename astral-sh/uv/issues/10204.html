<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add a non-package-mode - astral-sh/uv #10204</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Add a non-package-mode</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/10204">#10204</a>
        opened by <a href="https://github.com/johnthagen">@johnthagen</a>
        on 2024-12-27 17:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/johnthagen">@johnthagen</a></div>
            <div class="timeline-body"><h3>Proposal</h3>
<p>For projects that will not be published as wheels but simply want to track/lock their dependencies with <code>uv</code>, it would be nice to be able to omit the following lines from <code>pyproject.toml</code>:</p>
<pre><code class="language-toml">[project]
name = &quot;my-project&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
</code></pre>
<p>Poetry has this feature:</p>
<ul>
<li>https://python-poetry.org/docs/basic-usage/#operating-modes</li>
</ul>
<pre><code class="language-toml">[tool.poetry]
package-mode = false
</code></pre>
<h3>Configuration Example</h3>
<p>A straw-man proposal for how this <em>could</em> be configured in uv:</p>
<pre><code class="language-toml">[project]
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
    &quot;mkdocs&gt;=1.6.1&quot;,
]

[tool.uv]
package-mode = false
</code></pre>
<h3>Motivation</h3>
<p>A long thread about motivation for this is in the original Poetry issue</p>
<ul>
<li>https://github.com/python-poetry/poetry/issues/1132</li>
</ul>
<p>There are many types of Projects where specifying an extra version, name, description, etc is unnecessary and extra boilerplate. For example:</p>
<ul>
<li>A project that uses MkDocs to build a static site and has no Python code in it all (but the user still needs to lock the version of MkDocs and its dependencies for reproducibility)</li>
<li>A Django or FastAPI application where the execution mode is usually something like <code>uvicorn main:app</code> or <code>python runserver</code> where no package/wheel is installed</li>
<li>A collection of standalone Python files that have requirements but aren't organized into a package installed into a venv</li>
</ul>
<p>An example referencing the boilerplate in the wild:</p>
<ul>
<li>https://gitlab.jhuapl.edu/PCBDR/pcbdr/-/tree/main/docs/user_guide#build</li>
</ul>
<blockquote>
<p>Our Django projects won’t really care about the <code>name</code>, <code>version</code>, <code>description</code>, and <code>readme</code> properties, so just leave them as is.</p>
</blockquote>
<p>It would also be impossible to publish a non-package-mode project, which helps with the motivation for</p>
<ul>
<li>#8214</li>
</ul>
<p>Otherwise, someone also needs to add the <code>Private :: Do Not Upload</code> classifier to be extra safe.</p>
<h3>Challenges</h3>
<p>The complication I see with <code>uv</code> as compared to Poetry is that perhaps it's not technically <em>legal</em> to omit certain fields from the <code>[project]</code> field? But if a project isn't actually defining a true package/wheel perhaps that doesn't matter?</p>
<p>Currently if you run <code>uv sync</code> without these <code>[project]</code> fields, you get an error:</p>
<pre><code>error: Failed to parse: `pyproject.toml`
  Caused by: TOML parse error at line 1, column 1
  |
1 | [project]
  | ^^^^^^^^^
`pyproject.toml` is using the `[project]` table, but the required `project.name` field is not set
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-12-27 18:56</div>
            <div class="timeline-body"><blockquote>
<h3>Configuration Example</h3>
<p>A straw-man proposal for how this <em>could</em> be configured in uv:</p>
<pre><code class="language-toml">[project]
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
    &quot;mkdocs&gt;=1.6.1&quot;,
]

[tool.uv]
package-mode = false
</code></pre>
</blockquote>
<p>isn't it possible with dependency groups?</p>
<pre><code class="language-toml"># pyproject.toml

[dependency-groups]
dev = [
    &quot;mkdocs&gt;=1.6.1&quot;,
]
</code></pre>
<p>You can use this in combination of <code>.python-version</code> file or with <code>--python</code> cli option.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnthagen">@johnthagen</a> on 2024-12-27 19:02</div>
            <div class="timeline-body"><p>@T-256 Using your <code>pyproject.toml</code> without a <code>[project]</code> field, <code>uv sync</code> fails:</p>
<pre><code>$ uv sync
error: No `project` table found in: `/pyproject.toml`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-27 19:13</div>
            <div class="timeline-body"><p>If you add <code>[tool.uv.workspace]</code> to it, it won't fail.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnthagen">@johnthagen</a> on 2024-12-27 19:23</div>
            <div class="timeline-body"><p>Thanks @charliermarsh! Is <code>[tool.uv.workspace]</code> intended to solve the use case described in this issue?</p>
<p>Reading the workspace docs, it seems like more of a multi-project feature rather than a &quot;single project but I don't need the wheel project metadata&quot; feature?</p>
<ul>
<li>https://docs.astral.sh/uv/concepts/projects/workspaces/#using-workspaces</li>
</ul>
<p>I ask because I was trying to think through how I would explain this to someone else using single Django or FastAPI application and wanting to avoid the boilerplate of extra <code>[project]</code> fields.</p>
<p>Also, when I run this way, even with a <code>.python-version</code> I get a warning:</p>
<pre><code>warning: No `requires-python` value found in the workspace. Defaulting to `&gt;=3.13`.
</code></pre>
<p>And it seems that <code>requires-python</code> is not allowed at the <code>[tool.uv.workspace]</code> level. And I think typically we'd want to steer away from needing to generate warnings.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-12-27 19:31</div>
            <div class="timeline-body"><blockquote>
<p>If you add <code>[tool.uv.workspace]</code> to it, it won't fail.</p>
</blockquote>
<p>When <code>project</code> is not specified and workspace didn't declare, could we improve <code>uv</code> to treat with it as empty workspace?</p>
<p>I also have some environment usages where only need declared dependencies. Rye's <a href="https://rye.astral.sh/guide/virtual/#workspaces">virtual project</a>:</p>
<blockquote>
<p>If a <a href="https://rye.astral.sh/guide/workspaces/">workspace</a> does not have a toplevel package it's recommended that it's declared as virtual.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnthagen">@johnthagen</a> on 2024-12-27 19:33</div>
            <div class="timeline-body"><blockquote>
<p>I also have some environment usages where only need declared dependencies. Rye's <a href="https://rye.astral.sh/guide/virtual/#workspaces">virtual project</a>:</p>
</blockquote>
<p>@T-256 Oh nice. I haven't used Rye before, but that looks like it's filling the exact use case I'm referring that and the same use case as Poetry's <code>package-mode = false</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-27 19:34</div>
            <div class="timeline-body"><p>Yeah we might improve it over time, but right now it <em>is</em> recommended that you create a <code>[project]</code> table. The example you gave would actually violate standards:</p>
<pre><code class="language-toml">[project]
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
    &quot;mkdocs&gt;=1.6.1&quot;,
]
</code></pre>
<p>The standard declares that you <em>must</em> have at least a package name and a version (or a dynamic version) -- this isn't a uv thing, it's a standards thing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-12-27 19:41</div>
            <div class="timeline-body"><blockquote>
<p>Also, when I run this way, even with a <code>.python-version</code> I get a warning:</p>
</blockquote>
<p>You can run with <code>--python</code>:</p>
<pre><code>&gt; uv sync
Using CPython 3.12.3
Creating virtual environment at: .venv
warning: No `requires-python` value found in the workspace. Defaulting to `&gt;=3.12`.
Resolved 17 packages in 5.69s
Prepared 17 packages in 12.96s
Installed 17 packages in 163ms
 + click==8.1.8
 + colorama==0.4.6
 + ghp-import==2.1.0
 + jinja2==3.1.5
 + markdown==3.7
 + markupsafe==3.0.2
 + mergedeep==1.3.4
 + mkdocs==1.6.1
 + mkdocs-get-deps==0.2.0
 + packaging==24.2
 + pathspec==0.12.1
 + platformdirs==4.3.6
 + python-dateutil==2.9.0.post0
 + pyyaml==6.0.2
 + pyyaml-env-tag==0.1
 + six==1.17.0
 + watchdog==6.0.0

&gt; uv sync --python 3.8
Using CPython 3.8.3 interpreter at: C:\Python38\python.exe
Removed virtual environment at: .venv
Creating virtual environment at: .venv
warning: No `requires-python` value found in the workspace. Defaulting to `&gt;=3.8`.
Resolved 22 packages in 1.02s
Prepared 5 packages in 2.19s
Installed 19 packages in 144ms
 + click==8.1.8
 + colorama==0.4.6
 + ghp-import==2.1.0
 + importlib-metadata==8.5.0
 + jinja2==3.1.5
 + markdown==3.7
 + markupsafe==2.1.5
 + mergedeep==1.3.4
 + mkdocs==1.6.1
 + mkdocs-get-deps==0.2.0
 + packaging==24.2
 + pathspec==0.12.1
 + platformdirs==4.3.6
 + python-dateutil==2.9.0.post0
 + pyyaml==6.0.2
 + pyyaml-env-tag==0.1
 + six==1.17.0
 + watchdog==4.0.2
 + zipp==3.20.2
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-12-27 19:45</div>
            <div class="timeline-body"><blockquote>
<p>And it seems that <code>requires-python</code> is not allowed at the <code>[tool.uv.workspace]</code> level. And I think typically we'd want to steer away from needing to generate warnings.</p>
</blockquote>
<p>Also, related: https://github.com/astral-sh/uv/issues/4972, https://github.com/astral-sh/uv/issues/4970</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnthagen">@johnthagen</a> on 2024-12-27 20:03</div>
            <div class="timeline-body"><p>I was curious how Rye handled this. When passing <code>--virtual</code> it still fills out of the <code>[project]</code> fields. But Rye doesn't require that you keep them (it doesn't seem to validate the <code>[project]</code> field, not sure if that is intentional or not). This <code>pyproject.toml</code> works with Rye 0.43.0:</p>
<pre><code class="language-toml">[project]
dependencies = [
    &quot;mkdocs&lt;1.5&quot;,
]
requires-python = &quot;&gt;= 3.8&quot;

[tool.rye]
managed = true
virtual = true
dev-dependencies = []
</code></pre>
<pre><code>$ rye sync
Reusing already existing virtualenv
Generating production lockfile: /home/user/Downloads/requirements.lock
Generating dev lockfile: /home/user/Downloads/requirements-dev.lock
Installing dependencies
Resolved 13 packages in 4ms
Audited 13 packages in 0.02ms
Done!
</code></pre>
<p>Poetry gets around the issue (currently) because it hasn't released a version that supports <code>[project]</code> table, thus this works:</p>
<pre><code class="language-toml">[tool.poetry]
package-mode = false

[tool.poetry.dependencies]
python = &quot;^3.11&quot;

mkdocs = &quot;*&quot;
</code></pre>
<p>I haven't tested Poetry 2.0 which supports <code>[project]</code> in their main branch but hasn't been released. They may run into similar problems for users wanting to use the standard <code>[project]</code> table and omitting unneeded boilerplate if they'd want to enforce standards-compliance.</p>
<p>In any case, I definitely appreciate the challenge of making this work smoothly given the current standards.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edmorley">@edmorley</a> on 2024-12-27 20:59</div>
            <div class="timeline-body"><p>I feel like the <a href="https://packaging.python.org/en/latest/specifications/pyproject-toml/#declaring-project-metadata-the-project-table">pyproject.toml spec</a> is more restrictive than it should be (given it states <code>name</code> and <code>version</code> are mandatory). (Particularly since the spec purports to be based on the decisions in <a href="https://peps.python.org/pep-0518/">PEP 518</a> and <a href="https://peps.python.org/pep-0621/">PEP 621</a>, but neither of those peps explicitly said <code>name</code> and <code>version</code> should be mandatory.)</p>
<p>I wonder if upstream would be open to revising the spec to state that <code>name</code> and <code>version</code> are only required when building the project using a build backend? (Either the explicitly specified <code>[build-system]</code> or else the implicit one.)</p>
<p>Adjusting the spec in that way would actually be in keeping with other parts of the spec, which already state things like:</p>
<blockquote>
<p>Tools should not require the existence of the [build-system] table. A pyproject.toml file may be used to store configuration details other than build-related data and thus lack a [build-system] table legitimately.</p>
</blockquote>
<p>(from <a href="https://packaging.python.org/en/latest/specifications/pyproject-toml/#declaring-build-system-dependencies-the-build-system-table">here</a>)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-12-27 22:04</div>
            <div class="timeline-body"><blockquote>
<p>I feel like the <a href="https://packaging.python.org/en/latest/specifications/pyproject-toml/#declaring-project-metadata-the-project-table">pyproject.toml spec</a> is more restrictive than it should be (given it states <code>name</code> and <code>version</code> are mandatory). (Particularly since the spec purports to be based on the decisions in <a href="https://peps.python.org/pep-0518/">PEP 518</a> and <a href="https://peps.python.org/pep-0621/">PEP 621</a>, but neither of those peps explicitly said <code>name</code> and <code>version</code> should be mandatory.)</p>
</blockquote>
<p>@edmorley I agree with you, to make a workaround for this standard limitation, I think we can use a clone of <code>project</code> and apply uv's infrastructures on it to get rid of limits. opened https://github.com/astral-sh/uv/issues/10208 to discuss more there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @charliermarsh on 2024-12-28 14:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnthagen">@johnthagen</a> on 2025-01-13 12:27</div>
            <div class="timeline-body"><p>For reference, Poetry 2.0.1 also took the same stance as <code>uv</code> and (unlike Rye) requires the requires <code>[project]</code> fields (<code>name</code> and <code>version</code>) to exist</p>
<ul>
<li>https://github.com/python-poetry/poetry/issues/10031</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnthagen">@johnthagen</a> on 2025-03-25 20:31</div>
            <div class="timeline-body"><p>Related existing feature</p>
<ul>
<li>https://docs.astral.sh/uv/concepts/projects/config/#build-systems</li>
</ul>
<blockquote>
<p>Projects may declare and configure a build system in the <code>[build-system]</code> table of the pyproject.toml.</p>
<p>uv uses the presence of a build system to determine if a project contains a package that should be installed in the project virtual environment. If a build system is not defined, uv will not attempt to build or install the project itself, just its dependencies. If a build system is defined, uv will build and install the project into the project environment.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2025-06-16 23:51</div>
            <div class="timeline-body"><p>With https://github.com/astral-sh/uv/pull/13735 we can now specify required python without using <code>project</code> table (package mode):</p>
<pre><code class="language-toml">[tool.uv.dependency-groups.dev]
requires-python = &quot;&gt;=3.12&quot;

[dependency-groups]
dev = [
    &quot;mkdocs&gt;=1.6.1&quot;,
]
</code></pre>
<p>UPD: with #13742 we can also avoid writing<code>[tool.uv.workspace]</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikeweltevrede">@mikeweltevrede</a> on 2025-07-11 16:07</div>
            <div class="timeline-body"><p>Have you also considered the <code>package=false</code> setting? https://docs.astral.sh/uv/reference/settings/#package</p>
<pre><code class="language-toml">[tool.uv]
package = false
</code></pre>
<p>I am not sure if it fully covers your needs though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-11 16:12</div>
            <div class="timeline-body"><p>Is there more to do here still?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/johnthagen">@johnthagen</a> on 2025-07-19 00:23</div>
            <div class="timeline-body"><p>@zanieb I think this can be closed. Ideally, I'd like to be able to omit many of the <code>[project]</code> fields for non-wheel projects where they aren't needed, like a FastAPI app (and can become needless boilerplate), but that would not be compliant with PEP 621. Rye <a href="https://github.com/astral-sh/uv/issues/10204#issuecomment-2563996532">seems to allow this anyway</a> but I'm not sure if <code>uv</code> wants to encourage this behavoir?</p>
<p>I'd say this issue can probably be closed as their are good reasons for the status quo and <code>package = false</code> solves the most important needs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vmgustavo">@vmgustavo</a> on 2025-07-19 11:09</div>
            <div class="timeline-body"><p>Is there a flag for <code>uv init</code> that initializes a <code>pyproject.toml</code> in a non package mode? If no, would it be possible to add?</p>
<p>Edit: change non project to non package</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikeweltevrede">@mikeweltevrede</a> on 2025-07-19 15:47</div>
            <div class="timeline-body"><p>@vmgustavo what defines a &quot;non-project&quot; mode, i.e. what would make it different and what would you need from it? Aren't all repos a project or sorts? That's also why the name &quot;pyproject.toml&quot; was chosen in PEP-621.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vmgustavo">@vmgustavo</a> on 2025-07-19 15:53</div>
            <div class="timeline-body"><p>Sorry @mikeweltevrede it was supposed to be non package mode.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikeweltevrede">@mikeweltevrede</a> on 2025-07-20 09:37</div>
            <div class="timeline-body"><p>@vmgustavo Okay, clear! Then that can be achieved with the <code>package</code> setting: https://docs.astral.sh/uv/reference/settings/#package</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vmgustavo">@vmgustavo</a> on 2025-07-20 11:19</div>
            <div class="timeline-body"><p>Yes and if I create a pyproject file using <code>uv init</code> I get the default package oriented file. If I simply remove the contents of the file and add the package flag the error <code>No &quot;project&quot; table found</code> appears. I assume there should be more sections that must be added to make this work and if it could be created with the <code>uv sync</code> command with a flag that would be awesome.</p>
<p>I see there is already a <code>--no-package</code> flag</p>
<pre><code>--no-package   Do not set up the project to be built as a Python package
</code></pre>
<p>However the resulting pyproject is the same as when I generate it without this flag. I don't know if I am doing something wrong but this is what I get:</p>
<pre><code>&gt; uv init
Initialized project `uvt`
&gt; cat pyproject.toml
[project]
name = &quot;uvt&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = []
</code></pre>
<pre><code>&gt; uv init --no-project
Initialized project `uvt2`
&gt; cat pyproject.toml
[project]
name = &quot;uvt2&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = []
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikeweltevrede">@mikeweltevrede</a> on 2025-07-20 18:09</div>
            <div class="timeline-body"><p>@vmgustavo Notice in your second command you do <code>uv init --no-project</code> and not <code>uv init --no-package</code>.</p>
<p>@zanieb (tagging you since you asked if there is more to be done) By the way this seems to have a bug: <code>--no-project</code> is not listed as a supported flag for <code>uv init</code> yet it does not error continues indeed as if the user ran a bare <code>uv init</code>:</p>
<pre><code class="language-shell">C:\...\uvex&gt;uv init --no-project
Initialized project `uvex`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/vmgustavo">@vmgustavo</a> on 2025-07-21 13:02</div>
            <div class="timeline-body"><p>Sorry again for the mistake, but the same happens for the <code>--no-package</code> flag.</p>
<pre><code>&gt; uv init --no-package
Initialized project `uvt3`
&gt; cat pyproject.toml
[project]
name = &quot;uvt3&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = []
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-21 17:20</div>
            <div class="timeline-body"><p><code>--no-project</code> is about disabling project discovery, it's a global CLI flag, it doesn't have anything to do with the <code>[project]</code> table.</p>
<p>And, yeah, <code>uv init --no-package</code> still writes a <code>[project]</code> table for dependencies. That's intentional. We could consider not... and have <code>uv add</code> write somewhere else? but that's a big change.</p>
<p>I don't think we'll support spec-incompliant <code>[project]</code> tables with missing fields.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cdwilson">@cdwilson</a> on 2025-10-05 18:46</div>
            <div class="timeline-body"><p>I just found this while searching for how to manage python dependencies with uv for a MkDocs documentation repo that is not a python package.</p>
<p>Piecing things together from the comments above, it appears that the current solution is to use a pyproject.toml like the following:</p>
<pre><code class="language-toml">[tool.uv]
package = false

[tool.uv.dependency-groups.docs]
requires-python = &quot;&gt;=3.13&quot;

[dependency-groups]
docs = [
    &quot;mkdocs-material&gt;=9.6.21&quot;,
]
</code></pre>
<p>I thought from https://github.com/astral-sh/uv/issues/10204#issuecomment-2978496593 that the project table might not be needed, however, this results in the following warning:</p>
<pre><code class="language-plaintext">❯ uv add --group docs mkdocs-material
warning: No `requires-python` value found in the workspace. Defaulting to `&gt;=3.13`.
Resolved 29 packages in 142ms
Bytecode compiled 810 files in 523ms
</code></pre>
<p>Adding a <code>project</code> table causes the warning to go away.</p>
<pre><code class="language-toml">[project]
name = &quot;docs&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.13&quot;

[tool.uv]
package = false

[tool.uv.dependency-groups.docs]
requires-python = &quot;&gt;=3.13&quot;

[dependency-groups]
docs = [
    &quot;mkdocs-material&gt;=9.6.21&quot;,
]
</code></pre>
<p>For anyone else who is doing something similar, is this still the recommended way to manage dependencies for projects that aren't python packages?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-10-06 09:33</div>
            <div class="timeline-body"><p>@cdwilson Tracking this in a separate issue: https://github.com/astral-sh/uv/issues/16136</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amluto">@amluto</a> on 2025-12-24 13:59</div>
            <div class="timeline-body"><p>I'm looking at this issue and #10208 (which links here), and it looks like <code>package = false</code> doesn't quite do it.  I have an example here (not on PyPI yet, but I intend to publish it soon):</p>
<p>https://github.com/amluto/lutron-integration/blob/05dc5a8319de51d5443ea958e5ba2b3d820fcbd4/pyproject.toml</p>
<p>I'll quote it here for reference:</p>
<pre><code>[project]
name = &quot;lutron-integration-workspace-root&quot;
version = &quot;0.0.0&quot;
requires-python = &quot;&gt;=3.12&quot;
dependencies = [
    &quot;lutron-integration&quot;,
    &quot;lutron-integration-tools&quot;,
]

[tool.uv]
package = false

[tool.uv.workspace]
members = [&quot;packages/*&quot;]

[tool.uv.sources]
lutron-integration-tools = { workspace = true }
lutron-integration = { workspace = true }

[dependency-groups]
dev = [
    &quot;ruff&gt;=0.14.4&quot;,
    &quot;pytest&gt;=8.4.2&quot;,
    &quot;ty&gt;=0.0.5&quot;,
]
</code></pre>
<p>It's doing kind of well.  <code>uv sync</code> and <code>uv run</code> do the right thing.  Even ty seems to do the right thing, although the docs make it sounds like I can't really trust it to work right until ty is a bit farther along.  It's silly that I needed to name the project and give it a version, but I can live with it.  Putting dependencies here makes sense.</p>
<p>But #10208 points out that the project isn't suppose to build.  But <code>uv build</code> builds a source package and a wheel, which is ridiculous.  (I'm a bit baffled here -- what build backend is getting used?  I didn't specify one.)</p>
<p>If I add:</p>
<pre><code>[build-system]
requires = [&quot;uv_build &gt;= 0.9.8, &lt;0.10.0&quot;]
build-backend = &quot;uv_build&quot;
</code></pre>
<p>to pyproject.toml, then <code>uv run</code> and <code>uv sync</code> still work, but <code>uv build</code> fails like so:</p>
<pre><code>% uv build
Building source distribution...
Error: Expected a Python module at: src/lutron_integration_workspace_root/__init__.py
  × Failed to build `/Volumes/devel/hass/pylutron_integration`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `uv_build.build_sdist` failed (exit status: 1)
      hint: This usually indicates a problem with the package or the build environment.
</code></pre>
<p>On the one hand, great -- building this makes no sense.  On the other hand, this is absurd.</p>
<p>It seems to me that a farily straightforward way to make this robust would be to teach uv_build to notice the <code>package = false</code> setting and politely refuse to build the package, and to document that the recommended way to use package = false is to pair it with setting the build system to uv-build.  And then <code>uv build</code> would fail with a good error message and other PEP 517 frontends would also refuse to build the package even though they don't understand <code>package = false</code>.</p>
<p>There's another amusing solution:</p>
<pre><code>[build-system]
requires = [&quot;uv_build &gt;= 0.9.8, &lt;0.8.0&quot;]
build-backend = &quot;uv_build&quot;
</code></pre>
<p>Yes, I intentionally corrupted the <code>requires</code> so that it can't possibly be satisfied.  Now <code>uv build</code> fails very quickly indeed :)  And I suppose anyone could go publish a fully PEP 517 compliant build backend that simply refuses to build anything, but ISTM uv_build is the perfect place for this logic.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2026-01-05 19:05</div>
            <div class="timeline-body"><p>Why does your top level <code>pyproject.toml</code> have a <code>[project]</code> table, does it work if it doesn't have one?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:29:04 UTC
    </footer>
</body>
</html>
