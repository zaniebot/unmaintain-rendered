<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv fails to install apache airflow - astral-sh/uv #10744</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv fails to install apache airflow</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/10744">#10744</a>
        opened by <a href="https://github.com/gmolau">@gmolau</a>
        on 2025-01-18 22:09
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gmolau">@gmolau</a></div>
            <div class="timeline-body"><p>Fresh uv install, fresh venv, trying to add the first dependency, fails:</p>
<pre><code>❯ which uv
/opt/homebrew/bin/uv

❯ uv version
uv 0.5.21 (Homebrew 2025-01-17)

❯ uv python find
&lt;project-dir&gt;/.venv/bin/python3

❯ uv add apache-airflow
Resolved 139 packages in 33ms
  × Failed to build `google-re2==1.1.20240702`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit status: 1)

      [stdout]
      running bdist_wheel
      running build
      running build_py
      copying re2/__init__.py -&gt; build/lib.macosx-11.0-arm64-cpython-313/re2
      running build_ext
      building '_re2' extension
      c++ -fno-strict-overflow -Wsign-compare -Wunreachable-code -DNDEBUG -g -O3 -Wall -arch arm64 -mmacosx-version-min=11.0 -Wno-nullability-completeness -Wno-expansion-to-defined
      -Wno-undef-prefix -fPIC -I/Users/gmolau/.cache/uv/builds-v0/.tmpqhwwua/include -I/Users/gmolau/.local/share/uv/python/cpython-3.13.1-macos-aarch64-none/include/python3.13 -c _re2.cc -o
      build/temp.macosx-11.0-arm64-cpython-313/_re2.o -fvisibility=hidden

      [stderr]
      _re2.cc:15:10: fatal error: 'absl/strings/string_view.h' file not found
         15 | #include &quot;absl/strings/string_view.h&quot;
            |          ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
      1 error generated.
      error: command '/usr/bin/c++' failed with exit code 1

      hint: This usually indicates a problem with the package or the build environment.
  help: `google-re2` (v1.1.20240702) was included because `&lt;project&gt;` (v0.1.0) depends on `apache-airflow` (v2.10.4) which depends on `google-re2`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-18 22:19</div>
            <div class="timeline-body"><p>This isn't a uv error -- this is an error on your machine, in trying to build <code>google-re2</code> from scratch. That project likely doesn't ship wheels for Python 3.13. I'd suggest using Python 3.12.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gmolau">@gmolau</a> on 2025-01-18 22:24</div>
            <div class="timeline-body"><p>Thanks, with 3.12 it works. I guess the relevant upstream issue is https://github.com/google/re2/issues/516</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @gmolau on 2025-01-18 22:24</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:29:25 UTC
    </footer>
</body>
</html>
