```yaml
number: 9589
title: Reference a dependency group inside another group
type: issue
state: closed
author: Dayof
labels:
  - question
assignees: []
created_at: 2024-12-02T23:15:51Z
updated_at: 2024-12-03T01:07:47Z
url: https://github.com/astral-sh/uv/issues/9589
synced_at: 2026-01-10T01:57:22Z
```

# Reference a dependency group inside another group

---

_Issue opened by @Dayof on 2024-12-02 23:15_

Is it possible to add an internal group reference in [optional-dependencies] or [dependency-groups]? For example instead of doing the following:

```
[project.optional-dependencies] 
package-a = [
  "pillow==10.2.0",
  "pandas~=2.2.2"
]
package-b = [
  "pillow==10.2.0",
  "pandas~=2.2.2",
  "torch"
]
```

Is it possible to do this?

```
[project.optional-dependencies] 
package-a = [
  "pillow==10.2.0",
  "pandas~=2.2.2"
]
package-b = [
  package-a,
  "torch"
]
```

This feature would be useful for monorepo cases with multiple extras.

---

_Comment by @zanieb on 2024-12-02 23:20_

You can reference extras from other extras, yes.

```
❯ uv init example
Initialized project `example` at `/Users/zb/workspace/uv/example`
❯ cd example
❯ uv add --optional a httpx
Using CPython 3.12.7
Creating virtual environment at: .venv
Resolved 8 packages in 172ms
Prepared 1 package in 69ms
Installed 7 packages in 9ms
 + anyio==4.6.2.post1
 + certifi==2024.8.30
 + h11==0.14.0
 + httpcore==1.0.7
 + httpx==0.28.0
 + idna==3.10
 + sniffio==1.3.1
❯ uv add --optional b pytest
Resolved 13 packages in 164ms
Prepared 1 package in 98ms
Installed 4 packages in 20ms
 + iniconfig==2.0.0
 + packaging==24.2
 + pluggy==1.5.0
 + pytest==8.3.4
❯ uv add --optional b "example[a]"
Resolved 13 packages in 5ms
Audited 11 packages in 0.22ms
❯ cat pyproject.toml
[project]
name = "example"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.12"
dependencies = []

[project.optional-dependencies]
a = [
    "httpx>=0.28.0",
]
b = [
    "example[a]",
    "pytest>=8.3.4",
]

[tool.uv.sources]
example = { workspace = true }
❯ uv sync --extra b
Resolved 13 packages in 1ms
Audited 11 packages in 0.02ms
❯ uv sync --extra a
Resolved 13 packages in 9ms
Uninstalled 4 packages in 8ms
 - iniconfig==2.0.0
 - packaging==24.2
 - pluggy==1.5.0
 - pytest==8.3.4
```

You can also reference extras from dependency groups, or dependency groups from dependency groups. However, you cannot reference dependency groups from extras. See https://peps.python.org/pep-0735/#why-not-support-dependency-group-includes-in-project-dependencies-or-project-optional-dependencies

---

_Label `question` added by @zanieb on 2024-12-02 23:21_

---

_Closed by @charliermarsh on 2024-12-03 01:07_

---
