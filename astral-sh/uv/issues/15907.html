<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv tree shows incorrect output for circular dependency trees - astral-sh/uv #15907</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv tree shows incorrect output for circular dependency trees</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/15907">#15907</a>
        opened by <a href="https://github.com/chaosct">@chaosct</a>
        on 2025-09-17 11:51
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/chaosct">@chaosct</a></div>
            <div class="timeline-body">Summary
<p>This issue is possibly related to <a href="https://github.com/astral-sh/uv/issues/11349">astral-sh/uv#11349</a></p>
<p>When using <code>uv tree --package ...</code> the package you requested should be in the root of the tree.</p>
<p>If the package you request has a circular dependency, that might not be the case. In <a href="https://github.com/chaosct/uv-circular-dependency-poc">a simple case with a workspaces with two packages</a>:</p>
<pre><code>uv-circular-dependency-poc/
├── pyproject.toml          # Workspace configuration
├── packages/
│   ├── package-a/
│   │   ├── pyproject.toml  # Depends on package-b
│   │   └── src/package_a/
│   │       └── __init__.py
│   └── package-b/
│       ├── pyproject.toml  # Depends on package-a
│       └── src/package_b/
│           └── __init__.py
└── README.md
</code></pre>
<p>when asking for the <code>package-b</code> dependency tree we get the correct output:</p>
<pre><code>uv tree --package package-b
Resolved 2 packages in 4ms
package-b v0.1.0
└── package-a v0.1.0
    └── package-b v0.1.0 (*)
(*) Package tree already displayed
</code></pre>
<p>However, when asking for <code>package-a</code>, the dependency tree does not start with <code>package-a</code>:</p>
<pre><code>uv tree --package package-a
Resolved 2 packages in 20ms
package-b v0.1.0
└── package-a v0.1.0
    └── package-b v0.1.0 (*)
(*) Package tree already displayed
</code></pre>
Platform
<p>Darwin 23.5.0 arm64</p>
Version
<p>uv 0.8.17 (10960bc13 2025-09-10)</p>
Python version
<p>Python 3.12.5</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/chaosct">@chaosct</a> on 2025-09-17 11:51</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-10-27 02:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:40:24 UTC
    </footer>
</body>
</html>
