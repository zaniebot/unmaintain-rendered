<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv venv references already existing environment instead of creating new - astral-sh/uv #2737</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv venv references already existing environment instead of creating new</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2737">#2737</a>
        opened by <a href="https://github.com/ssslakter">@ssslakter</a>
        on 2024-03-30 17:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ssslakter">@ssslakter</a> on 2024-03-30 17:03</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>I've just started using uv, but I couldn't find any information about this behavior, so don't know if it's expected, but it wasn't to me originally.
First, I've installed uv with my conda installation on WSL. Then I ran</p>
<pre><code class="language-sh">cd my-repo
uv venv
source .venv/bin/activate
uv pip install -r requirements.txt
</code></pre>
<p>But then I've realized that I have some packages installed in my environment that are not in requirements and not supposed to be installed, then I've deactivated venv to get back to base conda and saw with <code>conda list</code> that <strong>everything</strong> I've installed into venv was installed into my base environment!ðŸ˜­
I inspected the .venv folder and found that python binary and activation scripts were linking to the base python from conda.</p>
<p>Well, I guess it makes sense that uv didn't create a separate environment, if it doesn't depend on python, but if you have to create actual python venv by yourself, what's the purpose of <code>uv venv</code> command?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-30 17:17</div>
            <div class="timeline-body"><p>What version on uv are you on?</p>
<p>I'm having a little trouble following the issue. Are you saying that <code>uv pip install -r requirements.txt</code> didn't install into <code>.venv</code>, it installed into your Conda environment?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssslakter">@ssslakter</a> on 2024-03-30 17:29</div>
            <div class="timeline-body"><p>I have uv 0.1.26
Yes, I guess so, if I get it correctly <code>uv venv</code> somehow referenced my global environment and when I installed requirements inside <code>.venv</code> they ended up there as well, but I think I might have also messed up something. I'll try to reproduce it with other env and write here later</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-30 17:43</div>
            <div class="timeline-body"><p>Ok, we recently changed the logic to ensure that if you have a virtualenv <em>and</em> a Conda environment enabled, we favor the virtual environment, so this <em>should</em> be working as you originally expected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @charliermarsh on 2024-03-31 17:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssslakter">@ssslakter</a> on 2024-04-01 12:18</div>
            <div class="timeline-body"><p>Oh, I found what was the problem, I accidentally used <code>pip install</code> instead of <code>uv pip install</code> so it was my mistake apparently.
I expected it to work like python venv which also installs pip, so you can interchangeably use pip and other package managers. Now I see how it is different.
I've also found an interesting thing when I tried to install pip with uv, basically you need to reactivate your environment to use it correctly.</p>
<pre><code class="language-sh">uv venv
source .venv/bin/activate
uv pip install pip
pip list # this is not pip installed by uv
deactivate
source .venv/bin/activate
pip list # now this pip shows the same packages as uv pip list
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-01 14:39</div>
            <div class="timeline-body"><p>Ah yes, you can run <code>uv venv --seed</code> if you want to include the &quot;seed packages&quot; (i.e., <code>pip</code>). Otherwise, <code>uv</code> excludes <code>pip</code> by default, since you already have <code>uv</code> installed and <code>uv</code> can handle installation for you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-01 14:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssslakter">@ssslakter</a> on 2024-04-01 14:47</div>
            <div class="timeline-body"><p>Thank you! It is much more clear now</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-01 14:50</div>
            <div class="timeline-body"><p>Thanks for following up :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssslakter">@ssslakter</a> on 2024-04-03 11:56</div>
            <div class="timeline-body"><p>Hi @charliermarsh!</p>
<p>I was able to reproduce multiple times a similar problem where uv can't find itself in a new environment. Is this expected?</p>
<pre><code class="language-sh">python -m venv venv
source venv/bin/activate
pip install uv
uv venv
source activate .venv/bin/activate
uv --help
# outputs uv: command not found
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:26 UTC
    </footer>
</body>
</html>
