<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv venv references already existing environment instead of creating new - astral-sh/uv #2737</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv venv references already existing environment instead of creating new</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2737">#2737</a>
        opened by <a href="https://github.com/ssslakter">@ssslakter</a>
        on 2024-03-30 17:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/ssslakter">@ssslakter</a></div>
            <div class="timeline-body">

<p>I&#x27;ve just started using uv, but I couldn&#x27;t find any information about this behavior, so don&#x27;t know if it&#x27;s expected, but it wasn&#x27;t to me originally.
First, I&#x27;ve installed uv with my conda installation on WSL. Then I ran</p>
<pre><code>cd my-repo
uv venv
source .venv/bin/activate
uv pip install -r requirements.txt
</code></pre>
<p>But then I&#x27;ve realized that I have some packages installed in my environment that are not in requirements and not supposed to be installed, then I&#x27;ve deactivated venv to get back to base conda and saw with <code>conda list</code> that <strong>everything</strong> I&#x27;ve installed into venv was installed into my base environment!ðŸ˜­
I inspected the .venv folder and found that python binary and activation scripts were linking to the base python from conda.</p>
<p>Well, I guess it makes sense that uv didn&#x27;t create a separate environment, if it doesn&#x27;t depend on python, but if you have to create actual python venv by yourself, what&#x27;s the purpose of <code>uv venv</code> command?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-30 17:17</div>
            <div class="timeline-body"><p>What version on uv are you on?</p>
<p>I&#x27;m having a little trouble following the issue. Are you saying that <code>uv pip install -r requirements.txt</code> didn&#x27;t install into <code>.venv</code>, it installed into your Conda environment?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssslakter">@ssslakter</a> on 2024-03-30 17:29</div>
            <div class="timeline-body"><p>I have uv 0.1.26
Yes, I guess so, if I get it correctly <code>uv venv</code> somehow referenced my global environment and when I installed requirements inside <code>.venv</code> they ended up there as well, but I think I might have also messed up something. I&#x27;ll try to reproduce it with other env and write here later</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-30 17:43</div>
            <div class="timeline-body"><p>Ok, we recently changed the logic to ensure that if you have a virtualenv <em>and</em> a Conda environment enabled, we favor the virtual environment, so this <em>should</em> be working as you originally expected.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-31 17:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssslakter">@ssslakter</a> on 2024-04-01 12:18</div>
            <div class="timeline-body"><p>Oh, I found what was the problem, I accidentally used <code>pip install</code> instead of <code>uv pip install</code> so it was my mistake apparently.
I expected it to work like python venv which also installs pip, so you can interchangeably use pip and other package managers. Now I see how it is different.
I&#x27;ve also found an interesting thing when I tried to install pip with uv, basically you need to reactivate your environment to use it correctly.</p>
<pre><code>uv venv
source .venv/bin/activate
uv pip install pip
pip list # this is not pip installed by uv
deactivate
source .venv/bin/activate
pip list # now this pip shows the same packages as uv pip list
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-01 14:39</div>
            <div class="timeline-body"><p>Ah yes, you can run <code>uv venv --seed</code> if you want to include the &quot;seed packages&quot; (i.e., <code>pip</code>). Otherwise, <code>uv</code> excludes <code>pip</code> by default, since you already have <code>uv</code> installed and <code>uv</code> can handle installation for you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-01 14:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssslakter">@ssslakter</a> on 2024-04-01 14:47</div>
            <div class="timeline-body"><p>Thank you! It is much more clear now</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-01 14:50</div>
            <div class="timeline-body"><p>Thanks for following up :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ssslakter">@ssslakter</a> on 2024-04-03 11:56</div>
            <div class="timeline-body"><p>Hi @charliermarsh!</p>
<p>I was able to reproduce multiple times a similar problem where uv can&#x27;t find itself in a new environment. Is this expected?</p>
<pre><code>python -m venv venv
source venv/bin/activate
pip install uv
uv venv
source activate .venv/bin/activate
uv --help
# outputs uv: command not found
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:30:41 UTC
    </footer>
</body>
</html>
