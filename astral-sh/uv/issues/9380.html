<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How To Cleanly Use UV For System Python - astral-sh/uv #9380</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>How To Cleanly Use UV For System Python</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/9380">#9380</a>
        opened by <a href="https://github.com/dapomeranz">@dapomeranz</a>
        on 2024-11-23 09:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dapomeranz">@dapomeranz</a> on 2024-11-23 09:57</div>
            <div class="timeline-body"><p>Hello,</p>
<p>I would like to use only <code>uv</code> to manage python installs on my computer. As I am sure we all would!</p>
<p>I have installed uv via brew. I have used uv python install to bring in my preferred python version. Then, I have added the following to my zshrc so that my terminal will always be able to access python.</p>
<p><code>export PATH=&quot;$(dirname &quot;$(uv python find)&quot;):$PATH&quot;</code></p>
<p>q1. Is this the best way to set up my path? Obviously I could add parameters or static file paths to make this more specific. I was just surprised that there is no better way to just do this as a part of the uv offering? I want to make sure I am not missing anything.</p>
<p>Now the fun begins when I want to install global packages aka system packages in this scenario. There are many packages which I do not want to download in all of my venvs across my computer. As well as packages for miscellaneous scripting. I had to use the below command in order to get this fully setup.</p>
<p><code>uv pip install numpy --system --break-system-packages</code></p>
<p>The docs for --break-system-packages come with a nice warning:</p>
<pre><code>WARNING: --break-system-packages is intended for use in continuous integration (CI) environments, when installing into Python installations that are managed by an external package manager, like apt.
It should be used with caution, as such Python installations explicitly recommend against modifications by other package managers (like uv or pip).
</code></pre>
<p>q2. Is this the best way to setup a replacement for system installed python using UV? In general, I feel that a lot of the less techincal python community would benefit from this type of setup. I would love to help others set up their python like this, but it just feels a bit wrong right now. Maybe I am missing something or maybe there is a different longer term vision still being worked on. Just thought I would write down my confusion.</p>
<p>Thanks to everyone who has worked so hard to make uv what it is today!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TurtleOrangina">@TurtleOrangina</a> on 2024-11-23 10:26</div>
            <div class="timeline-body"><p>Hi,</p>
<p>I agree with you that having a &quot;system python&quot; provided by uv would be nice. This is a feature of <code>pyenv</code>, e.g. <code>pyenv global 3.10</code>. With <code>uv</code> I guess it is possible to use <code>uv run --python 3.13 -- python</code>, which you could alias via <code>alias python='uv run --python 3.13 -- python'</code> (e.g. in your <code>.zshrc</code>). It would be nice to have a cleaner official way of achieving this.</p>
<p>When it comes to your idea of installing packages into the system python, I would strongly caution you against doing so. In your numpy example, you will have some older python scripts you wrote that used numpy 1.x, and everything worked because you had numpy 1.x installed in your system. Then you work on some newer scripts and update your system python to numpy 2.x, not realizing that the old script no longer work. This can be a nightmare when you actually need to run any of your old scripts, but you have no documentation or information with which combination of of package versions this script used to work just fine! So I would always recommend to use a pyproject.toml and a uv.lock file (<code>uv init newproject</code>).</p>
<p>If you really don't want to use a .venv with a pyproject.toml and uv.lock file, you can use the ephermal venv that are used to run scripts directly:</p>
<pre><code># create your script
echo 'import numpy as np\nprint(np.array([1, 3, 3, 7]))' &gt; test.py
# Say it needs numpy
uv add --script test.py numpy
# Now test.py has a special comment about the used python version and numpy dependency
uv run test.py # This now works, numpy is present in the ephermal venv used to run
</code></pre>
<p>This satisfies your requirement of not cluttering your disk space with many .venv that have just the same dependencies installed: The .venv is only created when you run it (emphermal venv), and it uses the normal uv caching mechanisms so it will be super fast and not need to download it every time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2024-11-23 17:15</div>
            <div class="timeline-body"><p>I think there are some terminology issues here. I hope I can clear things up (and not make them worse):</p>
<p>System Python - Is typically the Python provided by your OS distro. OSes tend to have their own package manager which can install Python and Python packages. If you overwrite the OSes Python or Python packages with packages from other tools (uv, pip, poetry, hatch, pdm, etc.) you may break other things about the OS, and this is why it is <strong>strongly discouraged</strong> (the OS distros asked for <a href="https://peps.python.org/pep-0668/">PEP 668</a> to tell tools not to install into their Python).</p>
<p>Global Python - This is a Python that is controlled and managed by a user tool, but is setup on the PATH so it is the default Python everywhere the user goes, it is not the system Python. Tools that allow for a global Python include conda and pyenv. This is great when you are doing non-project work or want to share an environment between projects. I believe uv has this feature in preview: https://github.com/astral-sh/uv/issues/6265#issuecomment-2461107903</p>
<p>Virtual Environment Python - This Python is installed in a specific directory, and is typically manually activated and not shared between projects.</p>
<p>I think what you want is a &quot;Global Python&quot;, not to replace a &quot;System Python&quot;, checkout that issue and see if works for you.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dapomeranz">@dapomeranz</a> on 2024-11-23 23:48</div>
            <div class="timeline-body"><p>Following @notatallshaw, this all sounds correct. Looks like the global python option is what I am looking for.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @dapomeranz on 2024-11-23 23:48</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:24 UTC
    </footer>
</body>
</html>
