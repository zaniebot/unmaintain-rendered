<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Function request: Dependency installation in virtual environment using soft connection - astral-sh/uv #9592</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Function request: Dependency installation in virtual environment using soft connection</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9592">#9592</a>
        opened by <a href="https://github.com/silent-rain">@silent-rain</a>
        on 2024-12-03 02:16
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/silent-rain">@silent-rain</a></div>
            <div class="timeline-body"><h2>Current Status</h2>
<p>Although only one copy of the downloaded dependency library is retained globally, a separate dependency is installed in each virtual environment of the project, which takes up a lot of space.</p>
<h2>The problems we are facing</h2>
<p>For example, in the &quot;comfyui&quot; drawing, the dependency library volume is expanding day by day, and it still consumes 13GB of memory. In the case of setting up multiple environments, the total volume will be even larger.
So, since there is already a copy of the dependency library globally, can soft links be used in a virtual environment? This can greatly reduce the occupation of space.
For example, in the frontend, &quot;pnpm&quot; also uses a soft connection, so not only does it execute extremely quickly in the &quot;pnpm install&quot; command, but also the &quot;node_modules&quot; volume is extremely small.
So, can we consider it?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-03 02:19</div>
            <div class="timeline-body"><p>I believe we already have the behavior you're looking for. By default, we use copy-on-write links on macOS and hardlinks on Linux and Windows.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/silent-rain">@silent-rain</a> on 2024-12-03 02:30</div>
            <div class="timeline-body"><p>Yes, I just found what I was looking for</p>
<p>Very good</p>
<blockquote>
<p>[tool.uv]
link-mode = &quot;symlink&quot;</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @silent-rain on 2024-12-03 02:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-03 02:31</div>
            <div class="timeline-body"><p>I recommend against using <code>symlink</code> specifically. I think the hardlink mode should be better in just about every way.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/silent-rain">@silent-rain</a> on 2024-12-03 02:35</div>
            <div class="timeline-body"><p>I have set up multiple &quot;comfyui&quot; environments, each of which takes up a lot of space, so I have to find ways to alleviate this situation</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-03 02:40</div>
            <div class="timeline-body"><p>Hardlinks have the same effect though. The underlying files are the same, without copying.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/silent-rain">@silent-rain</a> on 2024-12-03 03:00</div>
            <div class="timeline-body"><p>Thank you very much for your guidance.
I think I have discovered where the problem lies.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:28:41 UTC
    </footer>
</body>
</html>
