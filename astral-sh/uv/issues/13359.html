<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Continue partially downloaded package on network error - astral-sh/uv #13359</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Continue partially downloaded package on network error</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/13359">#13359</a>
        opened by <a href="https://github.com/clouds56">@clouds56</a>
        on 2025-05-09 06:25
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/clouds56">@clouds56</a> on 2025-05-09 06:25</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>When read Stream error, now uv would retry download from start, is it possible to continue download the partial file?
Some package like <code>nvidia-cuda-*</code> is large enough to fail when the network is poor</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @clouds56 on 2025-05-09 06:25</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by @konstin on 2025-05-09 07:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @konstin on 2025-05-09 07:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-09 07:06</div>
            <div class="timeline-body"><p>You may be able to increase reliability by lowering the number of concurrent downloads (https://docs.astral.sh/uv/reference/settings/#concurrent-downloads)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/clouds56">@clouds56</a> on 2025-05-09 08:08</div>
            <div class="timeline-body"><p>Yes, I'm using <code>UV_CONCURRENT_DOWNLOADS=1</code> and it would fail, ~though I don't think it's network problem~ since I'm using tsinghua mirror and the download speed is always ~11MB/s before it failed (after 100~300MB downloaded).
Inspect with wireshark it is me to send a <code>[RST, ACK]</code> to mirrors.tuna.tsinghua.edu.cn, and then send lots of RST in next 500ms.
I'm not senior network engineer and have no idea what's this about.</p>
<p>So, I thought the simplest workaround is have a model of continuing download.</p>
<p>Update:
It is network problem but not that common.
uv reports</p>
<pre><code>  × Failed to download `torch==2.7.0`
  ├─▶ Failed to write to the distribution cache
  ├─▶ error decoding response body
  ├─▶ request or response body error
  ├─▶ error reading a body from connection
  ╰─▶ cannot decrypt peer's message
</code></pre>
<p>pip reports</p>
<pre><code>  File &quot;/usr/lib/python3.13/site-packages/pip/_vendor/urllib3/response.py&quot;, line 449, in _error_catcher
    raise SSLError(e)
pip._vendor.urllib3.exceptions.SSLError: [SSL] record layer failure (_ssl.c:2648)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lamualfa">@lamualfa</a> on 2025-08-29 23:35</div>
            <div class="timeline-body"><p>It also happens to me. Can't continue the download after intentionally disconnecting the internet. It really frustrating when downloading huge package like <code>nvidia-*</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:05 UTC
    </footer>
</body>
</html>
