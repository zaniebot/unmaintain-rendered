<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`sources`-like behavior in system-level configuration - astral-sh/uv #13493</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>sources</code>-like behavior in system-level configuration</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13493">#13493</a>
        opened by <a href="https://github.com/hutch3232">@hutch3232</a>
        on 2025-05-16 14:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/hutch3232">@hutch3232</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>Note: I did see this issue https://github.com/astral-sh/uv/issues/12753</p>
<p>I'm in somewhat of an odd situation and looking for advice on how to handle this.</p>
<p>I'm trying to write a <code>uv.toml</code> file that can be used as the system-level config file for a large userbase. We're using Jfrog Artifactory as our package repo and it has a mirror of pypi, which I'd like to set as the <code>default</code> index.</p>
<p>In addition, we have another index for in-house packages, let's call that pypi-custom.</p>
<p>My issue: years ago a former employee uploaded a copy of <code>urllib3</code> and <code>requests</code> to pypi-custom (I don't know why) - and only the source (no whl). Moving from <code>pip</code> to <code>uv</code> my resolutions now <em>always</em> use the old versions of those packages from pypi-custom. It can even cause errors if some other dependency requires a newer version of those two packages.</p>
<p>I like <code>uv</code>'s behavior of checking extra indices before checking the default, for security, so I don't want to globally disable that (but that would be one possible solution).</p>
<p>Before I saw the above linked issue, I thought perhaps I could just override the <code>sources</code> globally for those two packages to refer to pypi.</p>
<p>One option could be to just delete the packages from pypi-custom, but then I think that would break existing lock files.</p>
<p>Another option would require everyone (at least those who care enough) to add <code>sources</code> to their project (<code>pyproject.toml</code> or <code>uv.toml</code>). However, this is a pretty nuanced issue as far as my userbase is concerned, so it would require education/documentation. It is also kind of a nuisance to have to carry around that boilerplate.</p>
<p>Is there an elegant solution I'm missing?</p>
<p>Thanks for any advice and for the wonderful tool.</p>
<h3>Platform</h3>
<p>Ubuntu 20.04 amd64</p>
<h3>Version</h3>
<p>uv 0.6.10</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @hutch3232 on 2025-05-16 14:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-20 13:35</div>
            <div class="timeline-body"><p>Thanks for writing this up. I think it's the same as https://github.com/astral-sh/uv/issues/6772 -- we'd need to allow you to put sources in the system-level configuration, which isn't allowed today. I don't know of a better solution than replicating it in each project, as you described, but you should follow-along in https://github.com/astral-sh/uv/issues/6772.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-05-20 13:35</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:31:23 UTC
    </footer>
</body>
</html>
