<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support the html PEP 503 simple repository api - astral-sh/uv #412</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support the html PEP 503 simple repository api</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/412">#412</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2023-11-13 13:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/konstin">@konstin</a> on 2023-11-13 13:55</div>
            <div class="timeline-body"><p>This involves:</p>
<ul>
<li>[ ] Finding or writing a parser for the simple repository <a href="https://peps.python.org/pep-0503/">PEP 503</a> html format</li>
<li>[ ] Introduce a new type that abstract over the pypi <code>File</code> and the few data that the html gives use<ul>
<li>[ ] Support hashes</li>
<li>[ ] Support <code>data-requires-python</code></li>
<li>[ ] Support <code>data-yanked</code> <a href="https://peps.python.org/pep-0592/">PEP 592</a></li>
</ul>
</li>
<li>[ ] Support <a href="https://peps.python.org/pep-0691/#version-format-selection">PEP 691</a> content negotiation</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-11-13 14:06</div>
            <div class="timeline-body"><p>Why and when is this necessary?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2023-11-13 14:28</div>
            <div class="timeline-body"><p>The standard format for indices is still html, see e.g. https://download.pytorch.org/whl/cu118, the torch index, so</p>
<p>https://github.com/astral-sh/puffin/blob/81c9cd0d4ad44920e3785fcb4a499e4f559c77f2/crates/puffin-client/src/client.rs#L162</p>
<p>will fail (https://download.pytorch.org/whl/cu118?format=application/vnd.pypi.simple.v1+json still outputs html - see also https://peps.python.org/pep-0691/#version-format-selection) for those and we need the html parsing which gives us also less data instead.</p>
<p>So the short is answer is: Whenever the user selects an index that doesn't support json output</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2023-11-13 14:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Added to milestone "Feature complete" by @charliermarsh on 2023-11-13 14:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @charliermarsh on 2023-11-13 14:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2023-12-21 02:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2023-12-21 02:49</div>
            <div class="timeline-body"><p>I'm on this one. Will take me a bit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2023-12-24 16:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:42:50 UTC
    </footer>
</body>
</html>
