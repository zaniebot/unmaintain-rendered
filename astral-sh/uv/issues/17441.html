<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using local file for highest resolution, package index for lowest-direct - astral-sh/uv #17441</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Using local file for highest resolution, package index for lowest-direct</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/17441">#17441</a>
        opened by <a href="https://github.com/khoover">@khoover</a>
        on 2026-01-13 17:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/khoover">@khoover</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>When writing libraries, we often want to test using both <code>uv lock --resolution lowest-direct</code> and <code>uv lock --resolution highest -U</code>, to ensure declared minimums are accurate and that we don't break on the newest stuff. One problem is that in a monorepo environment, <code>--resolution highest -U</code> won't actually pick up the true latest version, which would actually require a file-path source. The other problem is we don't want to <code>override-dependencies</code> the package to the file path, because then <code>--resolution lowest-direct</code> won't actually use the published version we set as minimum.</p>
<p>What I'm looking for is some way of having <code>lowest-direct</code> pull the specified minimum version from a packaging index still, but for <code>highest</code> to use the local relative path. Either that, or something I can add to the <code>uv lock --resolution highest</code> invocation that will have the lockfile point to the local path instead of the latest published version.</p>
<p>Note: I suppose one alternative is making use of prerelease versions, but that still leaves a gap if two libraries get modified in the same PR; can make that prohibited, but it is an annoyance.</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @khoover on 2026-01-13 17:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2026-01-13 21:13</div>
            <div class="timeline-body"><p>I think you just want to use <code>--no-sources</code> for the lowest-direct case and have a path (or workspace) dependency otherwise, does that make sense?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/khoover">@khoover</a> on 2026-01-13 21:15</div>
            <div class="timeline-body"><p>Huh. Yeah, that would do it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @khoover on 2026-01-13 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/khoover">@khoover</a> on 2026-01-14 15:22</div>
            <div class="timeline-body"><p>Actually, not fully. These libraries depend on PyTorch, where we need the custom source for getting the right wheels (although we may be fine with the default wheel that goes on PyPI, I'll try some stuff). So it's closer to &quot;<code>--no-sources</code> for specific packages&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Reopened by @khoover on 2026-01-14 15:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2026-01-14 16:32</div>
            <div class="timeline-body"><p>Somewhat related to https://github.com/astral-sh/uv/issues/7945</p>
<p>Yeah I think you need <code>--no-sources-package &lt;name&gt;</code> or better, <code>--no-sources-local</code></p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-14 16:42:58 UTC
    </footer>
</body>
</html>
