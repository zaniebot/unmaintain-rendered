<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transitive dependencies via optional dependency aliases fails URL installation - astral-sh/uv #4152</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Transitive dependencies via optional dependency aliases fails URL installation</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/4152">#4152</a>
        opened by <a href="https://github.com/ringohoffman">@ringohoffman</a>
        on 2024-06-07 22:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ringohoffman">@ringohoffman</a> on 2024-06-07 22:57</div>
            <div class="timeline-body"><p>Continuing my report from the comment here:</p>
<ul>
<li>https://github.com/astral-sh/uv/issues/1932#issuecomment-2155660516</li>
</ul>
<p>I am still seeing a failure to install transitive URL dependencies when using optional dependency aliases as in:</p>
<pre><code class="language-toml">[project]
name = &quot;transitive_optional_dependency&quot;
dynamic = [&quot;version&quot;]

[project.optional-dependencies]
all = [
    &quot;transitive_optional_dependency[docs]&quot;,
]
docs = [
    &quot;mike @ git+https://github.com/jimporter/mike@3f7d756#egg=mike&quot;,
]

</code></pre>
<p>I've provided a minimally reproducible repo here: https://github.com/ringohoffman/transitive-optional-dependency</p>
<p>With steps:</p>
<pre><code class="language-console">$ git clone git@github.com:ringohoffman/transitive-optional-dependency.git
$ cd transitive-optional-dependency
$ conda create -n tod python=3.10 -y
$ conda activate tod
$ pip install uv
Collecting uv
  Using cached uv-0.2.9-py3-none-macosx_11_0_arm64.whl.metadata (33 kB)
Using cached uv-0.2.9-py3-none-macosx_11_0_arm64.whl (9.7 MB)
Installing collected packages: uv
Successfully installed uv-0.2.9
$ uv pip install -e .[all]
error: Package `mike` attempted to resolve via URL: git+https://github.com/jimporter/mike@3f7d756#egg=mike. URL dependencies must be expressed as direct requirements or constraints. Consider adding `mike @ git+https://github.com/jimporter/mike@3f7d756#egg=mike` to your dependencies or constraints file.
</code></pre>
<p>cc: @charliermarsh</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-06-07 23:11</div>
            <div class="timeline-body"><p>Ah in a recursive extra? Maybe we're missing that case, thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-06-07 23:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-06-08 01:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-06-08 01:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:34:13 UTC
    </footer>
</body>
</html>
