<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ModuleNotFoundError after changing src/ in project lib template - astral-sh/uv #7472</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>ModuleNotFoundError after changing src/ in project lib template</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7472">#7472</a>
        opened by <a href="https://github.com/5183nischal">@5183nischal</a>
        on 2024-09-17 16:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/5183nischal">@5183nischal</a> on 2024-09-17 16:59</div>
            <div class="timeline-body"><p>Hi, Thanks for uv!</p>
<p>I initialize a project with <code>uv init --lib trials</code>, then go to the <code>src/trials</code> in the project folder add a file <code>add.py</code> with:
<code>def add(a, b): return a+b</code>
and add <code>from .add import add</code> to <code>__init__.py</code> and then run <code>uv run python</code> followed by <code>import trials</code> and i get:
<code>Traceback (most recent call last):   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt; ModuleNotFoundError: No module named 'trials1'</code>
wheras if I had done the same without before adding the file <code>add.py</code> to src/trials, it would work. I'm somewhat new to all this so maybe I'm missing something, what is expected and how can I make <code>import trials</code> work? Thank you!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-17 18:43</div>
            <div class="timeline-body"><p>I couldn't reproduce this as described. Where is &quot;trials1&quot; coming from?</p>
<pre><code>❯ uv init --lib trials
Initialized project `trials` at `/Users/zb/workspace/uv/trials`
❯ cd trials
❯ uv run python -c &quot;import trials&quot;
Using Python 3.13.0rc2
Creating virtualenv at: .venv
   Built trials @ file:///Users/zb/workspace/uv/trials
Installed 1 package in 0.94ms
❯ echo 'def add(): pass' &gt; src/trials/add.py
❯ uv run python -c &quot;import trials&quot;
❯ echo 'from .add import add' &gt; src/trials/__init__.py
❯ uv run python -c &quot;import trials&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-09-17 18:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/5183nischal">@5183nischal</a> on 2024-09-17 19:37</div>
            <div class="timeline-body"><p>&quot;trials1&quot; was a typo! Ok, but it gets even stranger. I initialized a project,  cd'd into it and then run <code>uv run python -c &quot;import trials&quot;</code>, it works once and then suddenly throws the error when I run it again immediately (see the screenshot),</p>
<p><img src="https://github.com/user-attachments/assets/7ee41025-3a58-4408-a7cd-0bb4d59e6e2c" alt="CleanShot 2024-09-17 at 9  30 34@2x" /></p>
<p>and if I make a project anywhere under <code>~/Documents/</code> I get the same problem, but for example if i make a project in <code>~/Downloads/</code>, I don't get this problem and things are fine. What could be the reason?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-17 19:40</div>
            <div class="timeline-body"><p>Uhh I have no clue. Sounds like something is removing the files? Is it still there if you do <code>ls src/trials</code> after the failure?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/5183nischal">@5183nischal</a> on 2024-09-17 19:43</div>
            <div class="timeline-body"><p>Yes, it's all there, nothing is deleted:</p>
<p><img src="https://github.com/user-attachments/assets/620b61ad-cd2d-4381-89ee-d40e56172ed0" alt="CleanShot 2024-09-17 at 9  41 58@2x" /></p>
<p>In fact, I simply copied <code>trials</code> to <code>~/Downloads</code> and then suddenly the problem is gone..</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-17 20:00</div>
            <div class="timeline-body"><p>It might help to share the verbose output (with <code>-v</code>) for the error case</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/5183nischal">@5183nischal</a> on 2024-09-18 05:27</div>
            <div class="timeline-body"><p>The verbose output looks like:</p>
<pre><code>DEBUG uv 0.4.10
DEBUG Found project root: `/Users/nisch/Documents/projects_uv/trials`
DEBUG No workspace root found, using project root
DEBUG Discovered project `trials` at: /Users/nisch/Documents/projects_uv/trials
DEBUG Reading requests from `/Users/nisch/Documents/projects_uv/trials/.python-version`
DEBUG The virtual environment's Python version satisfies `Python 3.10`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: trials @ file:///Users/nisch/Documents/projects_uv/trials
DEBUG No workspace root found, using project root
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 1 package in 9ms
DEBUG Using request timeout of 30s
WARN Failed to read metadata for file: No such file or directory (os error 2)
WARN Failed to read metadata for file: No such file or directory (os error 2)
DEBUG Requirement already installed: trials==0.1.0 (from file:///Users/nisch/Documents/projects_uv/trials)
Audited 1 package in 1ms
DEBUG Using Python 3.10.15 interpreter at: /Users/nisch/Documents/projects_uv/trials/.venv/bin/python3
DEBUG Running `python -c import trials`
Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
ModuleNotFoundError: No module named 'trials'
DEBUG Command exited with code: 1
</code></pre>
<p>in the case that it works, the output is identical up until the error.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @zanieb on 2024-10-21 22:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-21 22:20</div>
            <div class="timeline-body"><p>Unfortunately I'm unable to reproduce this, not sure what else to do to help.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-10-21 22:20</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:50 UTC
    </footer>
</body>
</html>
