```yaml
number: 13454
title: Unexpected sys.path Behavior When Using uv run python with Editable Install in a Docker Container
type: issue
state: closed
author: eycjur
labels:
  - question
assignees: []
created_at: 2025-05-14T16:09:49Z
updated_at: 2025-05-15T15:43:38Z
url: https://github.com/astral-sh/uv/issues/13454
synced_at: 2026-01-10T01:57:30Z
```

# Unexpected sys.path Behavior When Using uv run python with Editable Install in a Docker Container

---

_Issue opened by @eycjur on 2025-05-14 16:09_

### Question

**Background:**
I'm developing inside a Docker container and using an editable install for a package with a src-layout.
When I run `uv run python`, it seems to modify Python's `sys.path`. This behavior feels strange. Below are the details and the problems it causes:
1. When I check `sys.path`, before running `uv run python`, it includes `/app`, but afterward, it is overwritten to `/app/src`.
1. Before the change, even though I'm using `/app/.venv/bin/python`, I can't install my development package (`/app/src/my_package`).
1. After the change, I can install my development package.

**Questions:**
- Why does the path to `/app/src` get added?
- Even though I'm using an editable install, I don’t see a `<package>.egg-link` or similar in `/app/.venv/lib/python3.12/site-packages/`. Is it expected behavior that the path is added to `sys.path` instead?
- I thought the benefit of the src-layout is that it helps mimic the behavior of an installed package by avoiding referencing the source code directly in `/app/src`. If we add the source path directly to `sys.path`, does that defeat the purpose of using the src-layout?

<img width="932" alt="Image" src="https://github.com/user-attachments/assets/23be110c-58a8-44e2-94d9-4d915ad398f2" />

I share my Dockerfile.

```Dockerfile
FROM python:3.12-slim-bookworm
COPY --from=ghcr.io/astral-sh/uv:0.7.2 /uv /uvx /bin/

RUN apt-get update && \
    apt-get install --no-install-recommends -y \
        fonts-ipafont-gothic gcc git locales sudo tzdata vim zsh && \
    apt-get clean && \
    rm -rf /var/lib/apt/lists/*

RUN echo "ja_JP UTF-8" > /etc/locale.gen && \
    locale-gen ja_JP.UTF-8
ENV LANG=ja_JP.UTF-8
ENV LC_ALL=ja_JP.UTF-8
ENV TZ=Asia/Tokyo

WORKDIR /app

ENV UV_LINK_MODE=copy

RUN --mount=type=cache,target=/root/.cache/uv \
    --mount=type=bind,source=uv.lock,target=uv.lock \
    --mount=type=bind,source=pyproject.toml,target=pyproject.toml \
    uv sync --frozen --no-install-project

COPY ./src ./README.md ./app ./model /app/
RUN --mount=type=cache,target=/root/.cache/uv \
    --mount=type=bind,source=uv.lock,target=uv.lock \
    --mount=type=bind,source=pyproject.toml,target=pyproject.toml \
    uv sync --frozen

ENV PATH="/app/.venv/bin:$PATH"

CMD ["streamlit", "run", "app/app.py", "--server.port", "8501"]
```

### Platform

Linux 6.10.14-linuxkit aarch64 GNU/Linux

### Version

0.7.2

---

_Label `question` added by @eycjur on 2025-05-14 16:09_

---

_Comment by @konstin on 2025-05-15 08:15_

Editables nowadays don't use eggs anymore, they use `.pth` files. On startup, Python looks for pth-files and uses them to extend `sys.path` (https://docs.python.org/3/library/site.html). The build backend for your project generated the pth-file and the editable installation is placing that pth-file into the venv (https://peps.python.org/pep-0660/). You should see the pth-file in the `site-packages` directory.

---

_Comment by @eycjur on 2025-05-15 15:43_

I see, indeed, the .pth file exists and it seems that running uv run python modifies it.
Also, regarding my original question about sys.path being changed when running uv run python, the issue was due to a mistake in the Dockerfile's COPY instruction.

Before:
```
./src ./README.md ./app ./model /app/
```

After:
```
./src/ /app/src/
...
```

Thank you for your support. The issue has been resolved, so I’ll go ahead and close it.

---

_Closed by @eycjur on 2025-05-15 15:43_

---
