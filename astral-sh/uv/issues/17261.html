<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is uv tool install . supposed to be caching the local folder? - astral-sh/uv #17261</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is uv tool install . supposed to be caching the local folder?</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/17261">#17261</a>
        opened by <a href="https://github.com/EternityForest">@EternityForest</a>
        on 2025-12-30 09:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/EternityForest">@EternityForest</a> on 2025-12-30 09:21</div>
            <div class="timeline-body"><h3>Question</h3>
<p>Redoing <code>uv tool install --force .</code> from the working directory seems to not pick up any changes, unless you use <code>--no-cache.</code></p>
<p><code>uv cache clean</code> seems to fix it, but it seems like it shouldn't be caching the local directory at all. Is this intentional?</p>
<h3>Platform</h3>
<p>Linux 6.12.47+rpt-rpi-v8 aarch64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.9.20</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @EternityForest on 2025-12-30 09:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/EliteTK">@EliteTK</a> on 2025-12-30 15:13</div>
            <div class="timeline-body"><p>Whether it makes sense to use the cache or not in this case, I am not sure. But it is possible that there should have been some cache miss in your case, depending on circumstances.</p>
<p>Has the package's version changed since the last time you did an install? And if so, is it a dynamic version?</p>
<p>If both of those apply then I think, #10683 <em>might</em> be related as I think I can hit a similar kind of bug with a dynamic version and <code>uv tool install</code>.</p>
<p>It might help figure out why uv picks the cached version if you produce some output with <code>-vv</code>.</p>
<p>As an addendum to your workaround: If you want to avoid a full cache clean in this case, you can specify the package name like <code>uv cache clean &lt;name&gt;</code>.</p>
<p>Lastly, this may not be appropriate for your use-case, but also consider <code>uv tool install --editable .</code> as an option here (see <code>uv help tool install</code> for more information).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/EternityForest">@EternityForest</a> on 2025-12-31 12:37</div>
            <div class="timeline-body"><p>Version number hasn't changed, just the actual code, but I'd still expect local folders to bypass the cache by default, since it's not the kind of thing one typically expects to be cached unless you really know the details of how it works internally.</p>
<p>--editable is probably the solution in this specific case, but if caching is intentional even for the local FS(for consistency, I suppose?) then the rationale should probably documented somewhere if it isn't already, right?  Maybe the examples in the docs should mention --editable?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @EliteTK on 2025-12-31 14:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/EliteTK">@EliteTK</a> on 2025-12-31 14:37</div>
            <div class="timeline-body"><p>Yeah the version number thing was just to see if you had hit a specific bug I found. I wasn't trying to imply that you should be bumping the version here. I am not sure myself and I'll defer to others for an opinion in that regard.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2026-01-06 16:57</div>
            <div class="timeline-body"><p>Generally the <code>--editable</code> is the correct solution when testing a tool you develop. There aren't too many other cases to <code>uv tool install</code> with a path. Another option is <a href="https://docs.astral.sh/uv/reference/settings/#cache-keys">cache-keys</a>, especially for tools with native code, which allows much finer grained control than e.g. <code>--reinstall-package</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:06 UTC
    </footer>
</body>
</html>
