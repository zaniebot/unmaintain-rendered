<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv python pin` should support writing to a `uv.toml` or `pyproject.toml` - astral-sh/uv #4970</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv python pin</code> should support writing to a <code>uv.toml</code> or <code>pyproject.toml</code></h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/4970">#4970</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-07-10 17:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>We need to design the schema for this data. Probably at <code>uv.python-version</code> or <code>uv.python.default-version</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @zanieb on 2024-07-10 17:05</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @zanieb on 2024-07-10 17:05</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-07-11 15:06</div>
            <div class="timeline-body"><p>Then, should it also be top-level command <code>uv pin</code>? since it tries to manage project/workspace directly.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-11 15:20</div>
            <div class="timeline-body"><p>That's a reasonable question. I'm not sure. I don't love it at the top-level since it's not obvious what we're pinning.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-07-24 02:40</div>
            <div class="timeline-body"><p>I duped myself, https://github.com/astral-sh/uv/issues/4359 covers reading from the configuration file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @zanieb by @charliermarsh on 2024-07-30 16:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-30 16:13</div>
            <div class="timeline-body"><p>(At least figure out the rough design prior to the release.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> removed by @zanieb on 2024-08-20 18:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/edmorley">@edmorley</a> on 2024-12-11 23:37</div>
            <div class="timeline-body"><p>I'm slightly concerned this will lead to more fragmentation of where third party ecosystems (such as Heroku, GHA setup-python, Dependabot, ...) will need to check for Python versions when bootstrapping an environment.</p>
<p>If there was a field in <code>pyproject.toml</code> that was guaranteed in the upstream spec to be a single Python version (either <code>X.Y.Z</code> or <code>X.Y</code>) rather than a multiple major version range, then I'd be fine with the ecosystem consolidating around that, but as-is the existing <code>pyproject.toml</code> <code>requires-python</code> field isn't suitable for bootstrapping purposes, and so the <code>.python-version</code> file is the next best thing available - and pretty widely accepted at this point.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-12 01:31</div>
            <div class="timeline-body"><blockquote>
<p>... as-is the existing pyproject.toml requires-python field isn't suitable for bootstrapping purposes, and so the .python-version file is the next best thing available - and pretty widely accepted at this point.</p>
</blockquote>
<p>Agreed. That's why we've delayed implementing this. Unfortunately, we're getting quite a bit of confusion from users. I'm not sure how we'll address that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/trondhindenes">@trondhindenes</a> on 2025-08-12 05:50</div>
            <div class="timeline-body"><p>just to opine on this: The number one issue I find when helping fellow python devs un-tangling their botched python dev setups, is the presence of a &quot;.python-version&quot; file in some directory, since it has potential far-reaching effects. If the user happens to have &quot;pyenv&quot; installed, then this file in the current (or parent) dir(s) will replace the default python interpreter, leading to expected commands not being available etc.</p>
<p>It is therefore problematic for uv to create and/or use this file, as it has side-efects far outside of uv itself (think developer just cding into a dir in their terminal in order to run some command).
The fact that &quot;.python-version&quot; is &quot;widely acceptable&quot; is the exact reason uv should <em>not</em> go anywhere near it - it should aim to minimize the risk affecting other aspects of a developer's environment. I would ask maintaines to consider at least supporting that an alternate filename like <code>.uv.python-version</code> or similar is supported as a fallback if &quot;.python-version&quot; is not found.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:25:32 UTC
    </footer>
</body>
</html>
