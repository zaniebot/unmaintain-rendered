<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[feat]: Request for more output in stdout/stderr for non-interactive process - astral-sh/uv #11121</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[feat]: Request for more output in stdout/stderr for non-interactive process</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/11121">#11121</a>
        opened by <a href="https://github.com/robinjhuang">@robinjhuang</a>
        on 2025-01-30 23:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/robinjhuang">@robinjhuang</a> on 2025-01-30 23:13</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hi!</p>
<p>We are using uv to install python venvs and pytorch in our desktop application. I previously posted our issue of not getting interactive output in a regular subprocess https://github.com/astral-sh/uv/issues/9129.</p>
<p>Would it be possible to include more detailed output? Doesn't have to be interactive. The issue is that right now when we install a requirements.txt file, we don't see any output until everything is finished.</p>
<p>If I launch <code>uv pip instal torch torchvision torchaudio</code>, nothing is written to stdout or stderr until it's finished. Since torch with cuda is large, this can take a while.</p>
<pre><code>[stderr] Resolved 14 packages in 7ms
[stderr] Installed 14 packages in 327ms
[stderr]  + filelock==3.17.0
 + fsspec==2024.12.0
 + jinja2==3.1.5
 + markupsafe==3.0.2
 + mpmath==1.3.0
 + networkx==3.4.2
 + numpy==2.2.2
 + pillow==11.1.0
 + setuptools==75.8.0
 + sympy==1.13.1
 + torch==2.6.0
 + torchaudio==2.6.0
 + torchvision==0.21.0
 + typing-extensions==4.12.2

</code></pre>
<p>What would be ideal is:</p>
<pre><code>Resolved 14 packages in 7ms
Installing fsspec...
Finished installing fsspec.
Installing jinja2...


</code></pre>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @robinjhuang on 2025-01-30 23:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/webfiltered">@webfiltered</a> on 2025-01-31 01:25</div>
            <div class="timeline-body"><p>Definitely an update of package installed would be good at a minimum.  Adding some kind of rudimentary fixed-length percent update, e.g. output 100 full stops for each package, would be a significant improvement in monitoring the uv process' progress without an interactive terminal.</p>
<p>Unless there is some other way for the calling process to see current download updates (even active polling)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-01-31 10:18</div>
            <div class="timeline-body"><p>We have an interactive progress bar for downloads, i assume that's not showing for you?</p>
<p>https://github.com/user-attachments/assets/d1168fa4-0fa3-47db-beeb-f9a8cd0357b1</p>
<p>Can you share which platform and terminal you're using; Are you applying any redirects of stdout/stderr?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/webfiltered">@webfiltered</a> on 2025-01-31 12:51</div>
            <div class="timeline-body"><p>Hey, thanks for the quick response!  The indicatif progress is great whenever we're observing via terminal on any platform.</p>
<p>The issue we're facing is when stdout/stderr are not connected to a terminal, there is simply no output at all.  We're using <code>spawn</code> in node.js, but the same holds true for python <code>subprocess</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/webfiltered">@webfiltered</a> on 2025-01-31 18:57</div>
            <div class="timeline-body"><p>Apologies, forgot to answer everything.  Tested on Windows 11 &amp; Ubuntu 24.  If we spawn <code>uv</code> via <code>node-pty</code>, we get output and can log / observe monitor.  But this comes with its own limitations and introduces several more issues.</p>
<p>If there is a proper / better way to interpret current state / progress from a calling process, we'd be happy to use that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-31 19:07</div>
            <div class="timeline-body"><p>Hm it's weird that we wouldn't write output when using <code>subprocess</code>. I'd consider that a bug, if we can reproduce.</p>
<p>@Gankra is considering allowing interaction with current state from a parent process using a json-lines output, but that's a bit separate.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/robinjhuang">@robinjhuang</a> on 2025-01-31 21:13</div>
            <div class="timeline-body"><p>To be clear, there is some amount of output right now using <code>subprocess</code> (posted above). But we don't get the progress bars of any sort. Using uv 0.5.25. Would be great to get the progress in stdout or stderr as well using subprocess, even if it's not well-formatted.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-31 21:16</div>
            <div class="timeline-body"><p>Oh.. yeah the progress bars don't work in a non-interactive mode (and I wouldn't expect them to). They require repeated drawing in the terminal.</p>
<p>I don't think we'll implement simple visibility into progress in this context â€” the json-lines output format is the way to go here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/webfiltered">@webfiltered</a> on 2025-01-31 21:39</div>
            <div class="timeline-body"><p>Ah sorry, by nothing, I meant nothing from the point where uv starts downloading until it exits (even if it's 20 packages).</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/robinjhuang">@robinjhuang</a> on 2025-01-31 22:17</div>
            <div class="timeline-body"><p>JSON output would be great! What sort of output would it look like?</p>
<p>{ name: &quot;pyyaml&quot;, progress: &quot;0.25&quot; , state: &quot;downloading&quot; }</p>
<p>Something like that?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-31 22:21</div>
            <div class="timeline-body"><p>Still TBD, @Gankra would have more details but we're still designing this. See also https://github.com/astral-sh/uv/issues/411</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/11165.html">astral-sh/uv#11165</a> on 2025-02-02 13:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/robinjhuang">@robinjhuang</a> on 2025-02-05 22:18</div>
            <div class="timeline-body"><p>@webfiltered Did some digging and we realized we might be able to use <code>RUST_LOG=trace</code> to get way more output in subprocess. Using string parsing, this seems like a good enough solution to track progress of installations.</p>
<p>Leaving this here for anyone else who might benefit.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-02-06 09:32</div>
            <div class="timeline-body"><p>Please don't parse any <code>RUST_LOG</code> output, it is unstable and for internal usage only.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../janhq/cortex.cpp/issues/2052.html">janhq/cortex.cpp#2052</a> on 2025-02-28 06:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/411.html">astral-sh/uv#411</a> on 2025-03-08 04:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/iamllama">@iamllama</a> on 2025-11-22 15:00</div>
            <div class="timeline-body"><p>Hello there! Is this still being worked on? It'd be useful to have for anki's new launcher (https://github.com/ankitects/anki/pull/4390#issuecomment-3414268073), which uses uv as an installation tool and already shows a pty with the progressbars, but could benefit from a GUI-er indicator that shows overall download progress</p>
<p>I modified <code>PrepareReporter</code> (https://github.com/astral-sh/uv/compare/0.7.13...iamllama:uv:sync-progress) to print machine-parseable output to stdout instead of rendering the progressbars, and it'd be great if something like this were available in uv</p>
<p>The current alternatives would be to give in to hyrum's law and try to parse the output of <code>uv sync</code>'s progressbars (we need live download progress, not just when individual packages finish) or wait on https://github.com/console-rs/indicatif/issues/596</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:02 UTC
    </footer>
</body>
</html>
