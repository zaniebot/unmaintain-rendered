```yaml
number: 10579
title: "After modifying installed package, `uv pip install` re-installs the modified one"
type: issue
state: closed
author: bersbersbers
labels:
  - question
  - cache
assignees: []
created_at: 2025-01-13T21:21:42Z
updated_at: 2025-01-13T21:47:07Z
url: https://github.com/astral-sh/uv/issues/10579
synced_at: 2026-01-10T01:57:24Z
```

# After modifying installed package, `uv pip install` re-installs the modified one

---

_Issue opened by @bersbersbers on 2025-01-13 21:21_

I am unsure if this reproduces cleanly, but is not the first time I have experiences this. In short, I patched `_pytest\config\__init__.py` within my active `.venv` folder. In fact, I added a line `if any("::" in arg for arg in args):` which does not belong there.

Undoing this is surprisingly difficult with `uv`. While `uv pip uninstall` does delete the modified file, `uv pip install` brings back *the modified file*. `pip install` does it better:

```
(project) C:\Git\project>grep "arg in args" .venv\Lib\site-packages\_pytest\config\__init__.py
    if any("::" in arg for arg in args):

(project) C:\Git\project>uv pip uninstall pytest
Uninstalled 1 package in 76ms
 - pytest==8.3.4

(project) C:\Git\project>grep "arg in args" .venv\Lib\site-packages\_pytest\config\__init__.py
grep.exe: .venv\Lib\site-packages\_pytest\config\__init__.py: No such file or directory

(project) C:\Git\project>uv pip install pytest
Resolved 5 packages in 101ms
Installed 1 package in 217ms
 + pytest==8.3.4

(project) C:\Git\project>grep "arg in args" .venv\Lib\site-packages\_pytest\config\__init__.py
    if any("::" in arg for arg in args):

(project) C:\Git\project>uv pip uninstall pytest
Uninstalled 1 package in 39ms
 - pytest==8.3.4

(project) C:\Git\project>pip install pytest
Collecting pytest
  Using cached pytest-8.3.4-py3-none-any.whl.metadata (7.5 kB)
Requirement already satisfied: colorama in c:\git\project\.venv\lib\site-packages (from pytest) (0.4.6)
Requirement already satisfied: iniconfig in c:\git\project\.venv\lib\site-packages (from pytest) (2.0.0)
Requirement already satisfied: packaging in c:\git\project\.venv\lib\site-packages (from pytest) (24.2)
Requirement already satisfied: pluggy<2,>=1.5 in c:\git\project\.venv\lib\site-packages (from pytest) (1.5.0)
Using cached pytest-8.3.4-py3-none-any.whl (343 kB)
Installing collected packages: pytest
Successfully installed pytest-8.3.4

(project) C:\Git\project>grep "arg in args" .venv\Lib\site-packages\_pytest\config\__init__.py
```

uv 0.5.11 (c4d0caaee 2024-12-19)

---

_Comment by @charliermarsh on 2025-01-13 21:24_

This is because we use hard links for the uv cache. If you modify the environment, it will be reflected back in the cache. I'd suggest either `uv cache clean pytest`, or using `uv pip install --link-mode=copies` if you intend to modify the environment.

---

_Label `question` added by @charliermarsh on 2025-01-13 21:24_

---

_Label `cache` added by @charliermarsh on 2025-01-13 21:24_

---

_Closed by @zanieb on 2025-01-13 21:47_

---
