```yaml
number: 15072
title: PYTHONPATH not unset in virtual environment
type: issue
state: closed
author: libRh
labels:
  - question
assignees: []
created_at: 2025-08-05T01:10:13Z
updated_at: 2025-11-25T19:53:55Z
url: https://github.com/astral-sh/uv/issues/15072
synced_at: 2026-01-10T01:57:34Z
```

# PYTHONPATH not unset in virtual environment

---

_Issue opened by @libRh on 2025-08-05 01:10_

### Summary

I noticed that the current version of uv does not unset the PYTHONPATH environment variable before dispatching a subprocess with **uv run**.

This became noticeable during a migration from poetry to uv.

In uv, a similar behavior could be implemented in: https://github.com/astral-sh/uv/blob/main/crates/uv/src/commands/project/run.rs

```
if interpreter.is_virtualenv() {
    process.env(EnvVars::VIRTUAL_ENV, interpreter.sys_prefix().as_os_str());

    // Unset PYTHONPATH to avoid system package pollution in the virtual environment
    process.env_remove("PYTHONPATH");
}
```

### Platform

NixOS 25.05

### Version

uv 0.7.22 and greater

### Python version

_No response_

---

_Label `bug` added by @libRh on 2025-08-05 01:10_

---

_Comment by @zanieb on 2025-08-05 01:52_

Why would we unset `PYTHONPATH`? If someone has set that, I generally think we should respect it?

---

_Label `bug` removed by @zanieb on 2025-08-05 01:52_

---

_Label `question` added by @zanieb on 2025-08-05 01:52_

---

_Comment by @libRh on 2025-08-05 02:43_

On NixOS, PYTHONPATH is set during package installation. While virtual environments aren't isolated, it's important to avoid environment pollution by default, as PYTHONPATH takes precedence and can impact reproducibility. For example, recent python versions disable site-packages by default, reinforcing the importance of isolation. Since PYTHONPATH is also used at the system level, it can lead to conflicts especially when using a python installation that differs from the system's (eg. uv pyhon llvm builds).

---

_Comment by @dmarteau on 2025-11-25 16:19_

PYTHONPATH is generally a user settings, unsetting it would break user configurations.

---

_Comment by @zanieb on 2025-11-25 19:53_

Yeah I think this is out of scope for us to unset.

---

_Closed by @zanieb on 2025-11-25 19:53_

---
