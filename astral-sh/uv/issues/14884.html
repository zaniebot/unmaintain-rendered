<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv run` unexpectedly re-creating venv because of `.python-version` created by `uv init` - astral-sh/uv #14884</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv run` unexpectedly re-creating venv because of `.python-version` created by `uv init`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/14884">#14884</a>
        opened by <a href="https://github.com/silverwind">@silverwind</a>
        on 2025-07-25 06:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/silverwind">@silverwind</a> on 2025-07-25 06:58</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>My goal is to create a venv with a specific python version and run it. In a fresh directory, I run:</p>
<pre><code class="language-console">$ uv init
Initialized project `app`
$ uv sync -p 3.14
Using CPython 3.14.0b4
Creating virtual environment at: .venv
$ uv run python -V
Using CPython 3.12.3 interpreter at: /usr/bin/python3.12
Removed virtual environment at: .venv
Creating virtual environment at: .venv
Python 3.12.3
</code></pre>
<p>Why does <code>uv run</code> re-create the venv? <code>pyproject.toml</code> has <code>requires-python = &quot;&gt;=3.12&quot;</code> which 3.14 satisfies.</p>
<h3>Platform</h3>
<p>Ubuntu 24.04</p>
<h3>Version</h3>
<p>0.8.2</p>
<h3>Python version</h3>
<p>3.12.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @silverwind on 2025-07-25 06:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`uv run` unexpectedly re-creating `.venv`" to "`uv run` unexpectedly re-creating `.venv` created with specific python version" by @silverwind on 2025-07-25 07:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/silverwind">@silverwind</a> on 2025-07-25 07:11</div>
            <div class="timeline-body"><p>It seems the issue is because <code>uv init</code> created this file:</p>
<pre><code class="language-console">$ cat .python-version
3.12
</code></pre>
<p>If I remove that file it works. Maybe it should be considered not creating this file.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SoundDesignerToBe">@SoundDesignerToBe</a> on 2025-07-25 09:22</div>
            <div class="timeline-body"><p>I had <code>uv run --active ...</code> break my existing virtual environment, when my VPN was not working and it could not properly access packages. So it started to overwrite the existing environment and because I could not re-install at that time, I was left without a working virtual environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`uv run` unexpectedly re-creating `.venv` created with specific python version" to "`uv run` unexpectedly re-creating virtualenv because of `.python-version` created by `uv init`" by @silverwind on 2025-07-25 09:54</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/silverwind">@silverwind</a> on 2025-07-25 09:55</div>
            <div class="timeline-body"><p>Above comment seems unrelated. I have updated the issue title to mention this is specifically related to <code>.python-version</code> created by <code>uv init</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "`uv run` unexpectedly re-creating virtualenv because of `.python-version` created by `uv init`" to "`uv run` unexpectedly re-creating venv because of `.python-version` created by `uv init`" by @silverwind on 2025-07-25 09:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SoundDesignerToBe">@SoundDesignerToBe</a> on 2025-07-25 16:13</div>
            <div class="timeline-body"><p>Should I file a separate issue?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-25 16:20</div>
            <div class="timeline-body"><p>If you want to change the Python version for a <code>uv run</code> invocation, you should include it in the command, e.g., <code>uv run -p 3.14</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/silverwind">@silverwind</a> on 2025-07-27 09:11</div>
            <div class="timeline-body"><blockquote>
<p>If you want to change the Python version for a uv run invocation, you should include it in the command, e.g., uv run -p 3.14.</p>
</blockquote>
<p>Yeah that works as well, but is impractical for some use cases like calling <code>uv run</code> in numerous places across a big repo.</p>
<p>So I think this is not a bug, but a odd interaction between <code>uv init</code> and <code>uv run</code>. I won't be using <code>uv init</code> myself anymore, as it does too much.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @silverwind on 2025-07-27 09:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-27 14:30</div>
            <div class="timeline-body"><p>You can just use <code>uv init --no-pin-python</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/16362.html">astral-sh/uv#16362</a> on 2025-10-19 21:42</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:04 UTC
    </footer>
</body>
</html>
