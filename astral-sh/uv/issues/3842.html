<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>onnxruntime doesn't resolve using python-platform x86_64-unknown-linux-gnu - astral-sh/uv #3842</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>onnxruntime doesn't resolve using python-platform x86_64-unknown-linux-gnu</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3842">#3842</a>
        opened by <a href="https://github.com/rbtcollins">@rbtcollins</a>
        on 2024-05-26 17:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/rbtcollins">@rbtcollins</a> on 2024-05-26 17:53</div>
            <div class="timeline-body"><p>uv version <code>0.2.3</code>
Originally discussed https://github.com/microsoft/onnxruntime/issues/20825</p>
<p>With requirements.in containing <code>onnxruntime==1.18</code></p>
<p><code>uv pip compile   --python-platform x86_64-manylinux_2_28     --python-version=&quot;3.12&quot;     -o ./requirements.txt requirements.in</code></p>
<p>succeeds and</p>
<p><code>uv pip compile     --python-platform x86_64-unknown-linux-gnu --python-version=&quot;3.12&quot;     -o ./requirements.txt requirements.in</code></p>
<p>fails.</p>
<p>The wheels uploaded by onnxruntime looks sensible, and there should be no need for them to upload an exact match with manylinux existing.</p>
<p>We use bazel, and the bazel platform is of course the failing platform given to uv.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-26 17:55</div>
            <div class="timeline-body"><p>This makes sense, though? The minimum supported manylinux on <code>x86_64-unknown-linux-gnu</code> is <code>manylinux_2_17</code>, and it's documented as such.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-26 18:08</div>
            <div class="timeline-body"><p>In more detail: <code>x86_64-unknown-linux-gnu</code> on its own is under-specified, so we have to choose some reasonable default for it. <code>manylinux_2_17</code> is the current default, and we expose selectors like <code>x86_64-manylinux_2_28</code> for cases in which you want to use a different manylinux compatibility constraint. <code>onnxruntime</code> seems to use <code>manylinux_2_27</code> as its minimum supported version, so using the more specific platform identifier seems correct to me.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-05-26 18:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/rbtcollins">@rbtcollins</a> on 2024-05-26 19:16</div>
            <div class="timeline-body"><p>I agree that <code>x86_64-unknown-linux-gnu</code> is underspecified :) - where is the correspondence to <code>manylinux_2_17</code> documented?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-26 19:17</div>
            <div class="timeline-body"><p>It's in <code>uv pip install --help</code> (or similar):</p>
<pre><code>      --python-platform &lt;PYTHON_PLATFORM&gt;
          The platform for which requirements should be installed.

          Represented as a &quot;target triple&quot;, a string that describes the target platform in terms of its CPU, vendor, and operating system name, like `x86_64-unknown-linux-gnu` or `aaarch64-apple-darwin`.

          WARNING: When specified, uv will select wheels that are compatible with the _target_ platform; as a result, the installed distributions may not be compatible with the _current_ platform. Conversely, any distributions that are
          built from source may be incompatible with the _target_ platform, as they will be built for the _current_ platform. The `--python-platform` option is intended for advanced use cases.

          Possible values:
          - windows:                    An alias for `x86_64-pc-windows-msvc`, the default target for Windows
          - linux:                      An alias for `x86_64-unknown-linux-gnu`, the default target for Linux
          - macos:                      An alias for `aarch64-apple-darwin`, the default target for macOS
          - x86_64-pc-windows-msvc:     An x86 Windows target
          - x86_64-unknown-linux-gnu:   An x86 Linux target. Equivalent to `x86_64-manylinux_2_17`
          - aarch64-apple-darwin:       An ARM-based macOS target, as seen on Apple Silicon devices
          - x86_64-apple-darwin:        An x86 macOS target
          - aarch64-unknown-linux-gnu:  An ARM64 Linux target. Equivalent to `aarch64-manylinux_2_17`
          - aarch64-unknown-linux-musl: An ARM64 Linux target
          - x86_64-unknown-linux-musl:  An `x86_64` Linux target
          - x86_64-manylinux_2_17:      An `x86_64` target for the `manylinux_2_17` platform
          - x86_64-manylinux_2_28:      An `x86_64` target for the `manylinux_2_28` platform
          - aarch64-manylinux_2_17:     An ARM64 target for the `manylinux_2_17` platform
          - aarch64-manylinux_2_28:     An ARM64 target for the `manylinux_2_28` platform
</code></pre>
<p>Specifically the line: &quot;x86_64-unknown-linux-gnu:   An x86 Linux target. Equivalent to x86_64-manylinux_2_17&quot;.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-27 16:56</div>
            <div class="timeline-body"><p>Going to call this &quot;working as intended&quot;, though we could discuss bumping the manylinux minimum at some point.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-27 16:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-05-27 16:56</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:27 UTC
    </footer>
</body>
</html>
