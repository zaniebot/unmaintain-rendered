<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Install jieba failed, when `editable_mode = &quot;compat&quot;` - astral-sh/uv #7574</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Install jieba failed, when <code>editable_mode = &quot;compat&quot;</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7574">#7574</a>
        opened by <a href="https://github.com/fanck0605">@fanck0605</a>
        on 2024-09-20 09:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/fanck0605">@fanck0605</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<h2>Excepted result</h2>
<p>Install <code>jieba</code> successfully, when <code>editable_mode = &quot;compat&quot;</code></p>
<h2>Current result</h2>
<p>pyproject.toml    <code>editable_mode = &quot;compat&quot;</code></p>
<pre><code>[project]
name = &quot;jieba_test&quot;
version = &quot;0.1.0&quot;
description = &quot;&quot;
authors = [
]
requires-python = &quot;&gt;=3.9,&lt;4&quot;

[tool.uv]
package = false
index-url = &quot;https://mirrors.sangfor.com/pypi/simple&quot;
config-settings = { editable_mode = &quot;compat&quot; }

[build-system]
requires = [&quot;setuptools==74.1.2&quot;, &quot;cython==3.0.11&quot;]
build-backend = &quot;setuptools.build_meta&quot;
</code></pre>
<p>install <code>jieba</code> failed</p>
<pre><code>root@1e9604c7cf38:/jieba_test# uv venv 
Using Python 3.10.15 interpreter at: /usr/local/bin/python3
Creating virtualenv at: .venv
root@1e9604c7cf38:/jieba_test# uv pip install jieba --verbose
DEBUG uv 0.4.9
DEBUG Searching for Python interpreter in system path
DEBUG Found `cpython-3.10.15-linux-x86_64-gnu` at `/jieba_test/.venv/bin/python3` (virtual environment)
DEBUG Using Python 3.10.15 environment at .venv/bin/python3
DEBUG Acquired lock for `.venv`
DEBUG At least one requirement is not satisfied: jieba
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.10.15
DEBUG Solving with target Python version: &gt;=3.10.15
DEBUG Adding direct dependency: jieba*
DEBUG Found fresh response for: https://mirrors.sangfor.com/pypi/simple/jieba/
DEBUG Searching for a compatible version of jieba (*)
DEBUG Selecting: jieba==0.42.1 [compatible] (jieba-0.42.1.tar.gz)
DEBUG Acquired lock for `/root/.cache/uv/built-wheels-v3/index/eb35d7ac5361a07a/jieba/0.42.1`
DEBUG Found fresh response for: https://mirrors.sangfor.com/pypi/packages/jieba/0.42.1/jieba-0.42.1.tar.gz#sha256=055ca12f62674fafed09427f176506079bc135638a14e23e25be909131928db2
DEBUG No static `pyproject.toml` available for: jieba==0.42.1 (MissingPyprojectToml)
DEBUG No static `PKG-INFO` available for: jieba==0.42.1 (PkgInfo(UnsupportedMetadataVersion(&quot;1.1&quot;)))
DEBUG No static `egg-info` available for: jieba==0.42.1 (MissingRequiresTxt)
DEBUG Using cached metadata for: jieba==0.42.1
DEBUG Released lock at `/root/.cache/uv/built-wheels-v3/index/eb35d7ac5361a07a/jieba/0.42.1/.lock`
DEBUG Tried 1 versions: jieba 1
DEBUG Split specific environment resolution took 0.002s
Resolved 1 package in 3ms
DEBUG Identified uncached requirement: jieba==0.42.1
DEBUG Acquired lock for `/root/.cache/uv/built-wheels-v3/index/eb35d7ac5361a07a/jieba/0.42.1`
DEBUG Found fresh response for: https://mirrors.sangfor.com/pypi/packages/jieba/0.42.1/jieba-0.42.1.tar.gz#sha256=055ca12f62674fafed09427f176506079bc135638a14e23e25be909131928db2
DEBUG Building: jieba==0.42.1
DEBUG Released lock at `/root/.cache/uv/built-wheels-v3/index/eb35d7ac5361a07a/jieba/0.42.1/.lock`
DEBUG Released lock at `/jieba_test/.venv/.lock`
error: Failed to prepare distributions
  Caused by: Failed to fetch wheel: jieba==0.42.1
  Caused by: /root/.cache/uv/built-wheels-v3/index/eb35d7ac5361a07a/jieba/0.42.1/WHnmGU4IBuinTZd1vlJoH/208709eb0bfebd25/jieba-0.42.1.tar.gz does not appear to be a Python project, as neither `pyproject.toml` nor `setup.py` are present in the directory
root@1e9604c7cf38:/jieba_test#
</code></pre>
<p>remove <code>config-settings = { editable_mode = &quot;compat&quot; }</code></p>
<pre><code class="language-diff"> [tool.uv]
 package = false
 index-url = &quot;https://mirrors.sangfor.com/pypi/simple&quot;
-config-settings = { editable_mode = &quot;compat&quot; }
 
 [build-system]
</code></pre>
<p>install <code>jieba</code> success</p>
<pre><code>root@1e9604c7cf38:/jieba_test# uv pip install jieba --verbose
DEBUG uv 0.4.9
DEBUG Searching for Python interpreter in system path
DEBUG Found `cpython-3.10.15-linux-x86_64-gnu` at `/jieba_test/.venv/bin/python3` (virtual environment)
DEBUG Using Python 3.10.15 environment at .venv/bin/python3
DEBUG Acquired lock for `.venv`
DEBUG At least one requirement is not satisfied: jieba
DEBUG Using request timeout of 30s
DEBUG Solving with installed Python version: 3.10.15
DEBUG Solving with target Python version: &gt;=3.10.15
DEBUG Adding direct dependency: jieba*
DEBUG Found stale response for: https://mirrors.sangfor.com/pypi/simple/jieba/
DEBUG Sending revalidation request for: https://mirrors.sangfor.com/pypi/simple/jieba/
DEBUG Found not-modified response for: https://mirrors.sangfor.com/pypi/simple/jieba/
DEBUG Searching for a compatible version of jieba (*)
DEBUG Selecting: jieba==0.42.1 [compatible] (jieba-0.42.1.tar.gz)
DEBUG Acquired lock for `/root/.cache/uv/built-wheels-v3/index/eb35d7ac5361a07a/jieba/0.42.1`
DEBUG Found stale response for: https://mirrors.sangfor.com/pypi/packages/jieba/0.42.1/jieba-0.42.1.tar.gz#sha256=055ca12f62674fafed09427f176506079bc135638a14e23e25be909131928db2
DEBUG Sending revalidation request for: https://mirrors.sangfor.com/pypi/packages/jieba/0.42.1/jieba-0.42.1.tar.gz#sha256=055ca12f62674fafed09427f176506079bc135638a14e23e25be909131928db2
DEBUG Found not-modified response for: https://mirrors.sangfor.com/pypi/packages/jieba/0.42.1/jieba-0.42.1.tar.gz#sha256=055ca12f62674fafed09427f176506079bc135638a14e23e25be909131928db2
DEBUG No static `pyproject.toml` available for: jieba==0.42.1 (MissingPyprojectToml)
DEBUG No static `PKG-INFO` available for: jieba==0.42.1 (PkgInfo(UnsupportedMetadataVersion(&quot;1.1&quot;)))
DEBUG No static `egg-info` available for: jieba==0.42.1 (MissingRequiresTxt)
DEBUG Using cached metadata for: jieba==0.42.1
DEBUG Released lock at `/root/.cache/uv/built-wheels-v3/index/eb35d7ac5361a07a/jieba/0.42.1/.lock`
DEBUG Tried 1 versions: jieba 1
DEBUG Split specific environment resolution took 0.047s
Resolved 1 package in 49ms
DEBUG Identified uncached requirement: jieba==0.42.1
DEBUG Acquired lock for `/root/.cache/uv/built-wheels-v3/index/eb35d7ac5361a07a/jieba/0.42.1`
DEBUG Found fresh response for: https://mirrors.sangfor.com/pypi/packages/jieba/0.42.1/jieba-0.42.1.tar.gz#sha256=055ca12f62674fafed09427f176506079bc135638a14e23e25be909131928db2
DEBUG Building: jieba==0.42.1
DEBUG Ignoring empty directory
DEBUG Resolving build requirements
DEBUG Solving with installed Python version: 3.10.15
DEBUG Solving with target Python version: &gt;=3.10.15
DEBUG Adding direct dependency: setuptools&gt;=40.8.0
DEBUG Found stale response for: https://mirrors.sangfor.com/pypi/simple/setuptools/
DEBUG Sending revalidation request for: https://mirrors.sangfor.com/pypi/simple/setuptools/
DEBUG Found not-modified response for: https://mirrors.sangfor.com/pypi/simple/setuptools/
DEBUG Searching for a compatible version of setuptools (&gt;=40.8.0)
DEBUG Selecting: setuptools==75.1.0 [compatible] (setuptools-75.1.0-py3-none-any.whl)
DEBUG Found stale response for: https://mirrors.sangfor.com/pypi/packages/setuptools/75.1.0/setuptools-75.1.0-py3-none-any.whl#sha256=35ab7fd3bcd95e6b7fd704e4a1539513edad446c097797f2985e0e4b960772f2
DEBUG Sending revalidation request for: https://mirrors.sangfor.com/pypi/packages/setuptools/75.1.0/setuptools-75.1.0-py3-none-any.whl#sha256=35ab7fd3bcd95e6b7fd704e4a1539513edad446c097797f2985e0e4b960772f2
DEBUG Found not-modified response for: https://mirrors.sangfor.com/pypi/packages/setuptools/75.1.0/setuptools-75.1.0-py3-none-any.whl#sha256=35ab7fd3bcd95e6b7fd704e4a1539513edad446c097797f2985e0e4b960772f2
DEBUG Tried 1 versions: setuptools 1
DEBUG Split specific environment resolution took 0.126s
DEBUG Installing in setuptools==75.1.0 in /root/.cache/uv/builds-v0/.tmpNwtZSF
DEBUG Requirement already cached: setuptools==75.1.0
DEBUG Installing build requirement: setuptools==75.1.0
DEBUG Creating PEP 517 build environment
DEBUG Calling `setuptools.build_meta:__legacy__.get_requires_for_build_wheel()`
DEBUG Calling `setuptools.build_meta:__legacy__.build_wheel(&quot;/root/.cache/uv/built-wheels-v3/index/eb35d7ac5361a07a/jieba/0.42.1/WHnmGU4IBuinTZd1vlJoH/.tmpSGN8H7&quot;, {}, None)`
WARN The .dist-info directory jieba-0.42.1 does not start with the normalized version: 0.42.1
DEBUG Finished building: jieba==0.42.1
DEBUG Released lock at `/root/.cache/uv/built-wheels-v3/index/eb35d7ac5361a07a/jieba/0.42.1/.lock`
Prepared 1 package in 4.22s
Installed 1 package in 3ms
 + jieba==0.42.1
DEBUG Released lock at `/jieba_test/.venv/.lock`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-09-20 14:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 14:16</div>
            <div class="timeline-body"><p>Thanks, I think this is my bug. I'll fix it today.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-09-20 14:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-20 17:17</div>
            <div class="timeline-body"><p>Ok, I just tested and I believe this is actually fixed in 0.4.13. Do you mind upgrading?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-20 17:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fanck0605">@fanck0605</a> on 2024-09-21 01:46</div>
            <div class="timeline-body"><p>Sorry, when I discovered this issue, uv 0.4.13 had not yet been released. I upgrade to uv 0.4.14 and now this issue has been resolved. Thanks for your reply.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:27:16 UTC
    </footer>
</body>
</html>
