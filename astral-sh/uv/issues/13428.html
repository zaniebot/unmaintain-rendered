<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>There are some issues when using other indexes - astral-sh/uv #13428</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>There are some issues when using other indexes</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/13428">#13428</a>
        opened by <a href="https://github.com/zlpmetyou">@zlpmetyou</a>
        on 2025-05-13 10:08
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zlpmetyou">@zlpmetyou</a> on 2025-05-13 10:08</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>create a new project</p>
<pre><code>uv init demo
</code></pre>
<p>install flask with default</p>
<pre><code>cd demo
uv add flask
</code></pre>
<p>uv.lock like as</p>
<p><img src="https://github.com/user-attachments/assets/ccf5b7cc-e8eb-4412-9f1d-a8f9d3ca77ee" alt="Image" /></p>
<p>it used default PyPI, it's ok</p>
<p>Then i want to install a package from private index, i add index to <code>pyproject.toml</code></p>
<p><img src="https://github.com/user-attachments/assets/dce1fc6d-60d8-4f99-a48e-2a21ce882951" alt="Image" /></p>
<p>install package</p>
<pre><code>uv add 
</code></pre>
<h3>issue 1:</h3>
<p><img src="https://github.com/user-attachments/assets/cc4f7d39-573b-417a-bd8c-b00407e7170b" alt="Image" />
in <code>uv.lock</code> , all packages source have been replaced by private index, Does this mean that all packages are installed from a private indexï¼Ÿ</p>
<p>then i search from uv documentation</p>
<p><img src="https://github.com/user-attachments/assets/80bbf0dd-a873-4bb0-a8fd-6f9ccb1557ec" alt="Image" /></p>
<p>do it!  remove package and index first</p>
<pre><code>uv remove configserver-python
</code></pre>
<p><img src="https://github.com/user-attachments/assets/903f6262-9d8b-49f6-947d-24db5e9abc41" alt="Image" /></p>
<h3>issue 2:</h3>
<p><img src="https://github.com/user-attachments/assets/397a373e-fdfc-4e46-b1c9-e5097ca863ef" alt="Image" />
all packages source in <code>uv.lock</code> still my private index</p>
<p>uv lock? do it</p>
<pre><code>uv lock
</code></pre>
<p><img src="https://github.com/user-attachments/assets/8e91178f-444f-4431-a971-97899501cb62" alt="Image" />
nothing happened, still private index
uv lock --refresh?</p>
<pre><code>uv lock --refresh
</code></pre>
<p><img src="https://github.com/user-attachments/assets/9b979019-8a89-45e0-b816-0b2cbd7de6c3" alt="Image" /></p>
<p>still private index.</p>
<p>ok, remove it . redo all.</p>
<p><img src="https://github.com/user-attachments/assets/c495f333-6aad-43a1-b404-93224f38da39" alt="Image" /></p>
<pre><code>uv add flask configserver-python
</code></pre>
<h3>Platform</h3>
<p>Ubuntu24.04</p>
<h3>Version</h3>
<p>uv 0.7.3</p>
<h3>Python version</h3>
<p>Python 3.12.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @zlpmetyou on 2025-05-13 10:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-05-15 02:38</div>
            <div class="timeline-body"><p>To clarify, if you remove the <code>uv.lock</code> and then run <code>uv lock</code>, do you end up in the desired state?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2025-05-18 21:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @charliermarsh on 2025-05-18 21:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zlpmetyou">@zlpmetyou</a> on 2025-06-26 09:39</div>
            <div class="timeline-body"><p>@charliermarsh When I specify the private index explicit=true, the problem is that the private package I am about to install depends on another package that only exists in the private index, but UV will search in the public index and will prompt an error message stating that the package cannot be found. Can we make the package that the private package depends on also search in the private index</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-09-05 12:58</div>
            <div class="timeline-body"><p>This is the same problem as in https://github.com/astral-sh/uv/issues/8253, we currently don't apply explicit indexes transitively.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:06 UTC
    </footer>
</body>
</html>
