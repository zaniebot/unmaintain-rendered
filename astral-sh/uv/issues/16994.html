<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Better UX and/or documentation to avoid dev dependencies in production - astral-sh/uv #16994</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Better UX and/or documentation to avoid dev dependencies in production</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/16994">#16994</a>
        opened by <a href="https://github.com/jayqi">@jayqi</a>
        on 2025-12-05 05:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jayqi">@jayqi</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I just realized that I have been running my dev dependency group in production for my Django application for the last several months because I do:</p>
<pre><code>uv sync --no-dev
uv run manage.py collectstatic --no-input
uv run manage.py migrate --no-input
uv run -m gunicorn project.wsgi:application -c scripts/gunicorn_config.py
</code></pre>
<p>It turns out <code>uv run</code> will implicitly do a sync and so my dev dependencies end up getting installed. From a quick search through the issues, I've found at least three other issues where others report running into the same thing.</p>
<ul>
<li>https://github.com/astral-sh/uv/issues/13694</li>
<li>https://github.com/astral-sh/uv/issues/12558</li>
<li>https://github.com/astral-sh/uv/issues/16071</li>
</ul>
<p>I understand why it works this way, but I think this is clearly a gotcha that has potential security implications. It's not obvious that a command named <code>run</code> will sync dependencies (even though it's actually very nice for development that it does). Looking through the documentation, I don't see anywhere that calls this out as a pitfall, and I don't see any documentation specifically geared towards best practices on managing environments for production application deployments. I imagine I can't be the only one with a production application with dev dependencies active which can introduce security vulnerabilities.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @jayqi on 2025-12-05 05:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by @konstin on 2025-12-16 12:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @konstin on 2025-12-16 12:06</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:33:36 UTC
    </footer>
</body>
</html>
