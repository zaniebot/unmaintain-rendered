<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stale dependencies when running in scripts - astral-sh/uv #8059</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Stale dependencies when running in scripts</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8059">#8059</a>
        opened by <a href="https://github.com/aaronsteers">@aaronsteers</a>
        on 2024-10-09 21:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/aaronsteers">@aaronsteers</a> on 2024-10-09 21:59</div>
            <div class="timeline-body"><h2>Context</h2>
<p>I love the <code>uv</code> tool and am trying to adopt it in more of my workflows.</p>
<p>I'm trying to use the &quot;scripts&quot; feature for utility scripts in my python projects, where those utility scripts might have very different python library dependencies, which otherwise might have version conflicts with my project's code.</p>
<h2>Problem</h2>
<p>I seem to get stale dependencies sometimes in my virtualenv, and I'm not sure what is causing this. For instance, I got a stale version of <code>pip</code> in one case, which is problematic because my tool does some automated installation of other apps in their own virtual environments. (A bit meta, I know. ðŸ˜„ )</p>
<p>In a more recent example, I was getting complaints of <code>Optional[int]</code> not being a valid type, meaning some part of the dependency tree was a different version than I was getting when installing with poetry or pip. I didn't trace this to any specific version conflict, but I confirmed I wasn't getting the error when I used other install methods, and</p>
<h2>Ask</h2>
<p>I'd like to better understand how the <code>uv</code> script feature creates virtual environments, to understand how this is working, and what might be causing the stale dependencies.</p>
<p>Is there a way to locate the venv and/or to update transitive or stdlib dependencies within it? And/or print a list of versions (like pip freeze) within that virtualenv?</p>
<h2>Caveat</h2>
<p>I've only experienced this when using the &quot;script&quot; feature (with dependencies defined inline within the file), but it might be a broader issue with uv-created virtual environments. (Although I've not seen it when installing with <code>uv pip install</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-16 19:13</div>
            <div class="timeline-body"><p>uv scripts now use &quot;stable&quot; environments that should be more reliable and easier to reason about. If you run <code>uv sync --script /path/to/script.py</code>, we'll tell you exactly where the environment is (and install the script's dependencies there). You can also run <code>uv sync --script /path/to/scripy.py --active</code> to use the currently-activated virtual environment for the script, rather than a path in the cache. I hope this helps :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-02-16 19:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2025-02-16 19:13</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:05 UTC
    </footer>
</body>
</html>
