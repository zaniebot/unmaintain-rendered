<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv python install` fails to extract archive with &quot;cannot decrypt peer's message&quot; - astral-sh/uv #14699</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv python install</code> fails to extract archive with &quot;cannot decrypt peer's message&quot;</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/14699">#14699</a>
        opened by <a href="https://github.com/char3210">@char3210</a>
        on 2025-07-18 00:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/char3210">@char3210</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Trying to install python on Windows. My unstable Wi-Fi connection may have something to do with it. It downloads for a few seconds, but randomly fails with this error message. I managed to get lucky running it once where it finished downloading without erroring out and it installed fine, but since then I haven't been able to install another version after trying it 10+ times (it always errored out sometime before it finished)</p>
<pre><code> &gt;uv python install 3.10 -vv
DEBUG uv 0.8.0 (0b2357294 2025-07-17)
TRACE Checking lock for `C:\Users\char\AppData\Roaming\uv\python` at `C:\Users\char\AppData\Roaming\uv\python\.lock`
DEBUG Acquired lock for `C:\Users\char\AppData\Roaming\uv\python`
TRACE Found existing installation cpython-3.13.5-windows-x86_64-none
DEBUG No installation found for request `Python 3.10`
DEBUG Found download `cpython-3.10.18-windows-x86_64-none` for request `Python 3.10`
DEBUG Using request timeout of 30s
DEBUG Downloading https://github.com/astral-sh/python-build-standalone/releases/download/20250712/cpython-3.10.18%2B20250712-x86_64-pc-windows-msvc-install_only_stripped.tar.gz
DEBUG Extracting cpython-3.10.18-20250712-x86_64-pc-windows-msvc-install_only_stripped.tar.gz to temporary location: C:\Users\char\AppData\Roaming\uv\python\.temp\.tmps53RWd
TRACE Handling request for https://github.com/astral-sh/python-build-standalone/releases/download/20250712/cpython-3.10.18%2B20250712-x86_64-pc-windows-msvc-install_only_stripped.tar.gz with authentication policy auto
TRACE Request for https://github.com/astral-sh/python-build-standalone/releases/download/20250712/cpython-3.10.18%2B20250712-x86_64-pc-windows-msvc-install_only_stripped.tar.gz is unauthenticated, checking cache
TRACE No credentials in cache for URL https://github.com/astral-sh/python-build-standalone/releases/download/20250712/cpython-3.10.18%2B20250712-x86_64-pc-windows-msvc-install_only_stripped.tar.gz
TRACE Attempting unauthenticated request for https://github.com/astral-sh/python-build-standalone/releases/download/20250712/cpython-3.10.18%2B20250712-x86_64-pc-windows-msvc-install_only_stripped.tar.gz
Downloading cpython-3.10.18-windows-x86_64-none (download) (21.4MiB)
TRACE Considering retry of error: ExtractError(&quot;cpython-3.10.18-20250712-x86_64-pc-windows-msvc-install_only_stripped.tar.gz&quot;, Io(Custom { kind: Other, error: TarError { desc: &quot;failed to unpack `\\\\?\\C:\\Users\\char\\AppData\\Roaming\\uv\\python\\.temp\\.tmps53RWd\\python\\Lib\\site-packages\\pip\\_internal\\cli\\__pycache__\\autocompletion.cpython-310.pyc`&quot;, io: Custom { kind: Other, error: TarError { desc: &quot;failed to unpack `python/Lib/site-packages/pip/_internal/cli/__pycache__/autocompletion.cpython-310.pyc` into `\\\\?\\C:\\Users\\char\\AppData\\Roaming\\uv\\python\\.temp\\.tmps53RWd\\python\\Lib\\site-packages\\pip\\_internal\\cli\\__pycache__\\autocompletion.cpython-310.pyc`&quot;, io: Custom { kind: Other, error: reqwest::Error { kind: Decode, source: reqwest::Error { kind: Body, source: hyper::Error(Body, Error { kind: Io(Custom { kind: InvalidData, error: &quot;cannot decrypt peer's message&quot; }) }) } } } } } } }))
TRACE Cannot retry IO error: not one of `ConnectionReset` or `UnexpectedEof`
TRACE Cannot retry IO error: not one of `ConnectionReset` or `UnexpectedEof`
TRACE Cannot retry IO error: not one of `ConnectionReset` or `UnexpectedEof`
TRACE Cannot retry error: not an IO error
error: Failed to install cpython-3.10.18-windows-x86_64-none
  Caused by: Failed to extract archive: cpython-3.10.18-20250712-x86_64-pc-windows-msvc-install_only_stripped.tar.gz
  Caused by: I/O operation failed during extraction
  Caused by: failed to unpack `\\?\C:\Users\char\AppData\Roaming\uv\python\.temp\.tmps53RWd\python\Lib\site-packages\pip\_internal\cli\__pycache__\autocompletion.cpython-310.pyc`
  Caused by: failed to unpack `python/Lib/site-packages/pip/_internal/cli/__pycache__/autocompletion.cpython-310.pyc` into `\\?\C:\Users\char\AppData\Roaming\uv\python\.temp\.tmps53RWd\python\Lib\site-packages\pip\_internal\cli\__pycache__\autocompletion.cpython-310.pyc`
  Caused by: error decoding response body
  Caused by: request or response body error
  Caused by: error reading a body from connection
  Caused by: cannot decrypt peer's message
DEBUG Released lock at `C:\Users\char\AppData\Roaming\uv\python\.lock`
</code></pre>
<h3>Platform</h3>
<p>Windows 10 x86_64</p>
<h3>Version</h3>
<p>uv 0.8.0 (0b2357294 2025-07-17)</p>
<h3>Python version</h3>
<p>N/A</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @char3210 on 2025-07-18 00:50</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-18 01:42</div>
            <div class="timeline-body"><p>Thanks for the report. Can you fetch that URL directly? e.g., with <code>curl</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "uv python install fails" to "`uv python install` fails to extract archive with "cannot decrypt peer's message"" by @zanieb on 2025-07-18 01:45</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/char3210">@char3210</a> on 2025-07-18 06:07</div>
            <div class="timeline-body"><p>Opening the URL in my browser downloads it fine</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2025-07-20 22:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/char3210">@char3210</a> on 2025-07-25 03:15</div>
            <div class="timeline-body"><p>As a side note this actually seems to be an issue with my Wi-Fi adapter driver, I just haven't noticed downloads randomly failing everywhere until recently.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">network</span> added by @konstin on 2025-09-18 07:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:32:09 UTC
    </footer>
</body>
</html>
