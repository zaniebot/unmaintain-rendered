<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Env var to override `[tool.uv.sources]` for development - astral-sh/uv #15895</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Env var to override <code>[tool.uv.sources]</code> for development</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/15895">#15895</a>
        opened by <a href="https://github.com/mawildoer">@mawildoer</a>
        on 2025-09-16 16:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/mawildoer">@mawildoer</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>First off - amazing tooling! Love your work and thanks for your consideration!</p>
<h2>Premise</h2>
<p>My typical (and I believe a common) development workflow when working on a project where I own some dependencies is to point the <code>source</code> of those dependencies to a local, editable copy like this:</p>
<pre><code class="language-toml">[tool.uv.sources]
# my-package = { git = &quot;ssh://git@github.com/mawildoer/my-package.git&quot;,  rev = &quot;master&quot; }
my-package = { path = &quot;../my-package&quot;, editable = true }
</code></pre>
<h2>Problem</h2>
<p>This is great for development speed, but comes with a few issues:</p>
<ol>
<li>I need to remember to flip the comment back when committing</li>
<li>Folks often have the dependency in other locations, so it's not very shareable</li>
</ol>
<h2>Proposal</h2>
<p>Accept an environment variable to override the source of a package.</p>
<p>Perhaps <code>UV_SOURCES='{ my-package = { path = &quot;../my-package&quot;, editable = true } }'</code>?</p>
<p>Then, assume that would override &quot;my-package&quot;'s <code>tools.uv.sources</code> entry, leaving the others intact.</p>
<p>Alternative format: <code>UV_SOURCES_{package_name} = { path = &quot;../my-package&quot;, editable = true }</code>.</p>
<p>I can see some benefits, but means you need to modify some package names. eg. &quot;-&quot; -&gt; &quot;_&quot;</p>
<h3>Example</h3>
<p>Workflow assuming <code>direnv</code> installed and allowed:</p>
<ol>
<li>You create a gitignored <code>.env</code> file:</li>
</ol>
<pre><code class="language-bash">UV_SOURCES='{ my-package = { path = &quot;../my-package&quot;, editable = true } }
</code></pre>
<ol start="2">
<li>For your local development, <code>../my-package</code> is used in place of the package index</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @mawildoer on 2025-09-16 16:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mawildoer">@mawildoer</a> on 2025-11-20 21:01</div>
            <div class="timeline-body"><p>I just found a case where this issue get's substantially more painful too: if you both directly depend on <code>my-package</code> and have it as a transitive dependency you quickly start becoming imposing</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mawildoer">@mawildoer</a> on 2025-11-20 21:02</div>
            <div class="timeline-body"><p>Highly related issue: #11632</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/oelhammouchi">@oelhammouchi</a> on 2025-12-03 08:17</div>
            <div class="timeline-body"><p>Bumping up against this issue right now as well, would highly appreciate a fix!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:32:55 UTC
    </footer>
</body>
</html>
