```yaml
number: 17022
title: "ERROR: pytorch-triton-xpu was not found in the package registry"
type: issue
state: closed
author: H-E3
labels:
  - question
assignees: []
created_at: 2025-12-08T08:38:17Z
updated_at: 2025-12-11T01:21:12Z
url: https://github.com/astral-sh/uv/issues/17022
synced_at: 2026-01-12T16:02:42Z
```

# ERROR: pytorch-triton-xpu was not found in the package registry

---

_@H-E3_

### Question

In order to utilize PyTorch for Intel GPUs, I have appended a new index to `pyproject.toml` as follows:
```
[tool.uv.sources]
torch = [
  { index = "pytorch-xpu", marker = "sys_platform == 'win32' or sys_platform == 'linux'" },
]
torchvision = [
  { index = "pytorch-xpu", marker = "sys_platform == 'win32' or sys_platform == 'linux'" },
]
pytorch-triton-xpu = [
  { index = "pytorch-xpu", marker = "sys_platform == 'win32' or sys_platform == 'linux'" },
]

[[tool.uv.index]]
name = "pytorch-xpu"
url = "https://download.pytorch.org/whl/xpu"
explicit = true
```

However, when I execute the command `uv add anypackage`, an error occurs:
```
No solution found when resolving dependencies for split (markers: (python_full_version >= '3.14' and sys_platform == 'linux') or (python_full_version >= '3.14' and sys_platform == 'win32')):
Because pytorch-triton-xpu was not found in the package registry and torch==2.9.1+xpu depends on pytorch-triton-xpu==3.5.0, we can conclude that torch==2.9.1+xpu cannot be used.
      And because only the following versions of torch{sys_platform == 'linux' or sys_platform == 'win32'} are available:
          torch{sys_platform == 'linux' or sys_platform == 'win32'}<2.9.1
          torch{sys_platform == 'linux' or sys_platform == 'win32'}==2.9.1+xpu
      and your project depends on torch{sys_platform == 'linux' or sys_platform == 'win32'}>=2.9.1, we can conclude that your project's requirements are unsatisfiable.
  help: If you want to add the package regardless of the failed resolution, provide the `--frozen` flag to skip locking and syncing.
```

Why does this problem occur and how can it be addressed?

### Platform

windows 11 x64

### Version

uv 0.9.16 (a63e5b62e 2025-12-06)

---

_Label `question` added by @H-E3 on 2025-12-08 08:38_

---

_Comment by @charliermarsh on 2025-12-10 03:02_

Are you able to include the complete `pyproject.toml`?

---

_Comment by @charliermarsh on 2025-12-10 03:05_

Do you have `pytorch-triton-xpu` in the list of dependencies? We only apply indexes like that to explicit dependencies. This locks for me:

```toml
[project]
name = "foo"
version = "0.1.0"
requires-python = ">=3.13"
dependencies = ["torch", "torchvision", "pytorch-triton-xpu"]

[tool.uv.sources]
torch = [
  { index = "pytorch-xpu" },
]
torchvision = [
  { index = "pytorch-xpu" },
]
pytorch-triton-xpu = [
  { index = "pytorch-xpu" },
]

[[tool.uv.index]]
name = "pytorch-xpu"
url = "https://download.pytorch.org/whl/xpu"
explicit = true

[tool.uv]
environments = ["sys_platform == 'win32' or sys_platform == 'linux'"]
```

---

_Comment by @H-E3 on 2025-12-10 09:17_

My dependencies list (automatically generated by uv) **does not** include `pytorch-triton-xpu`. Hereâ€™s the complete content of my `pyproject.toml` file:
```
[project]
name = "data-mining-exercise-2"
version = "0.1.0"
description = "Add your description here"
readme = "README.md"
requires-python = ">=3.14"
dependencies = [
    "addict>=2.4.0",
    "datasets<=3.6.0",
    "modelscope>=1.32.0",
    "numpy>=2.3.3",
    "pandas>=2.3.3",
    "peft>=0.18.0",
    "plotly>=6.5.0",
    "sentence-transformers>=5.1.2",
    "torch>=2.9.1",
    "transformers>=4.57.3",
]

[tool.uv.sources]
torch = [
  { index = "pytorch-xpu", marker = "sys_platform == 'win32' or sys_platform == 'linux'" },
]
torchvision = [
  { index = "pytorch-xpu", marker = "sys_platform == 'win32' or sys_platform == 'linux'" },
]
pytorch-triton-xpu = [
  { index = "pytorch-xpu", marker = "sys_platform == 'win32' or sys_platform == 'linux'" },
]

[[tool.uv.index]]
url = "https://pypi.tuna.tsinghua.edu.cn/simple"
default = true

[[tool.uv.index]]
name = "pytorch-xpu"
url = "https://download.pytorch.org/whl/xpu"
explicit = true
```

**Should I add `pytorch-triton-xpu` to the dependencies list manually?**

@charliermarsh 

---

_Comment by @charliermarsh on 2025-12-10 15:54_

Yeah, we don't apply "explicit" index annotations to transitive dependencies, so it would need to be added as a direct dependency.

---

_Comment by @H-E3 on 2025-12-11 01:20_

Thank you so much! It's really helpful!
The `uv add` actually started working after I adjusted my dependency list to be like this: 
```
dependencies = [
    # ... other dependencies ...
    "torch>=2.9.1",
    "pytorch-triton-xpu>=3.3.0 ; sys_platform == 'win32' or sys_platform == 'linux'",
    # ... other dependencies ...
]
```

@charliermarsh 

---

_Comment by @charliermarsh on 2025-12-11 01:21_

Happy to help!

---

_Closed by @charliermarsh on 2025-12-11 01:21_

---

_Assigned to @charliermarsh by @charliermarsh on 2025-12-11 01:21_

---
