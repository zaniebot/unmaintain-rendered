<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip sync` fails to clear environment when given an empty requirements list - astral-sh/uv #4516</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv pip sync` fails to clear environment when given an empty requirements list</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/4516">#4516</a>
        opened by <a href="https://github.com/ncoghlan">@ncoghlan</a>
        on 2024-06-25 14:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/ncoghlan">@ncoghlan</a> on 2024-06-25 14:04</div>
            <div class="timeline-body"><p>I have a use case where several different environments are being updated with <code>uv pip sync</code>, and some of those environments may legitimately have a desired end state of &quot;just a Python runtime with no extra packages&quot; (the packages that are installed into those environments are platform dependent, and on some platforms there are no additional packages needed).</p>
<p>When trying to clear those environments, <code>uv pip sync</code> simply reports &quot;No requirements found&quot; and exits immediately instead of synchronising the environment with the requirements list as desired.</p>
<p>I can work around this, but being able to reliably clear an environment from outside was a key motivation for switching from <code>pip-sync</code> to <code>uv pip sync</code> (due to https://github.com/jazzband/pip-tools/issues/2103)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-25 14:17</div>
            <div class="timeline-body"><p>Hi! The request makes sense but this is a tough one for user experience because people can pass all sorts of requirements sources and we've seen people confused when they accidentally have an empty set of requirements. Do you think we should add a flag to opt-in to this behavior?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @zanieb on 2024-06-25 14:17</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ncoghlan">@ncoghlan</a> on 2024-06-25 14:24</div>
            <div class="timeline-body"><p>Yeah, an opt-in flag like <code>--allow-clear</code> would make sense (I assumed the UX benefit was the reason for the current behaviour)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-25 14:37</div>
            <div class="timeline-body"><p>Here's a proof of concept: https://github.com/astral-sh/uv/pull/4517</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> removed by @zanieb on 2024-06-25 14:37</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @zanieb on 2024-06-25 14:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ncoghlan">@ncoghlan</a> on 2024-06-25 16:01</div>
            <div class="timeline-body"><p>That would definitely work for my use case, and the name <code>--allow-empty-requirements</code> seems clear enough.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-07-02 13:14</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-07-02 13:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:34:17 UTC
    </footer>
</body>
</html>
