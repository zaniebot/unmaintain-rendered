<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv attempting to uninstall itself on Windows CI - astral-sh/uv #3865</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv attempting to uninstall itself on Windows CI</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/3865">#3865</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2024-05-27 14:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-27 14:55</div>
            <div class="timeline-body"><p>Well, I was too hasty, it did not work in Windows (although this looks like different issue), I run <code>uv pip install wheel --python 3.9  --system --verbose</code>.</p>
<pre><code class="language-cmd">DEBUG Searching for Python 3.9 in search path or `py` launcher output
DEBUG Found CPython 3.9.13 at `C:\hostedtoolcache\windows\Python\3.9.13\x64\python3.exe` (search path)
DEBUG Using Python 3.9.13 environment at C:\hostedtoolcache\windows\Python\3.9.13\x64\python3.exe
DEBUG Acquired lock for `C:\hostedtoolcache\windows\Python\3.9.13\x64`
DEBUG At least one requirement is not satisfied: wheel
DEBUG Using registry request timeout of 30s
DEBUG Solving with target Python version 3.9.13
DEBUG Adding direct dependency: wheel*
DEBUG No cache entry for: https://pypi.org/simple/wheel/
DEBUG Searching for a compatible version of wheel (*)
DEBUG Selecting: wheel==0.43.0 (wheel-0.43.0-py3-none-any.whl)
DEBUG No cache entry for: https://files.pythonhosted.org/packages/7d/cd/d7460c9a869b16c3dd4e1e403cce337df165368c71d6af229a74699622ce/wheel-0.43.0-py3-none-any.whl.metadata
DEBUG Tried 2 versions: root 1, wheel 1
Resolved 1 package in 24ms
DEBUG Identified uncached requirement: wheel==0.43.0
DEBUG Unnecessary package: argcomplete==3.3.0
DEBUG Unnecessary package: click==8.1.7
DEBUG Unnecessary package: colorama==0.4.6
DEBUG Unnecessary package: packaging==24.0
DEBUG Preserving seed package: pip==24.0
DEBUG Unnecessary package: pipx==1.5.0
DEBUG Unnecessary package: platformdirs==4.2.1
DEBUG Preserving seed package: setuptools==58.1.0
DEBUG Unnecessary package: tomli==2.0.1
DEBUG Unnecessary package: userpath==1.9.2
DEBUG Preserving seed package: uv==0.2.4
DEBUG No cache entry for: https://files.pythonhosted.org/packages/7d/cd/d7460c9a869b16c3dd4e1e403cce337df165368c71d6af229a74699622ce/wheel-0.43.0-py3-none-any.whl
Downloaded 1 package in 161ms
Installed 1 package in 122ms
 + wheel==0.43.0
Resolved 94 packages in 11.27s
Downloaded 87 packages in 14.49s
error: failed to remove file `C:\hostedtoolcache\windows\Python\3.9.13\x64\Lib\site-packages\../../Scripts/uv.exe`
  Caused by: Access is denied. (os error 5)
Error: Process completed with exit code 1.
</code></pre>
<p>But 0.2.4 works in Linux and Mac.</p>
<p><em>Originally posted by @aaltat in https://github.com/astral-sh/uv/issues/3837#issuecomment-2132376841</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-05-27 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by @charliermarsh on 2024-05-27 14:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-27 16:40</div>
            <div class="timeline-body"><p>@aaltat -- The problem is that you pin <code>uv == 1.45.0</code> in https://github.com/MarketSquare/robotframework-browser/blob/d89838af6c6cb3fc3ae313b6fa177d98bce56a32/Browser/dev-requirements.txt#L23. As a result, when you run <code>uv pip install -r Browser/dev-requirements.txt  --python 3.9</code>, uv attempts to downgrade itself, which leads to an error on Windows (you can't replace a running executable without some clever workarounds -- we have a tracking issue for that separately).</p>
<p>Can you try changing the version in <code>dev-requirements.txt</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/3837.html">astral-sh/uv#3837</a> on 2024-05-27 16:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/aaltat">@aaltat</a> on 2024-05-28 04:50</div>
            <div class="timeline-body"><p>Ah, after removing that it works, I did not know that uv finds my requirements*.txt files automatically.</p>
<p>But in any case thank you for assistance and speedy fixing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-28 13:48</div>
            <div class="timeline-body"><p>@aaltat -- uv doesn't find requirements files automatically -- the failing line was actually <code>uv pip install -r Browser/dev-requirements.txt  --python 3.9</code> I think, not the wheel install?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-28 15:42</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/aaltat">@aaltat</a> on 2024-05-28 20:07</div>
            <div class="timeline-body"><p>Ah, I did not see it. Thank you for your support and help.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:58 UTC
    </footer>
</body>
</html>
