<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cannot install cryptacular==1.6.2 (or any recent version) with uv - astral-sh/uv #3509</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Cannot install cryptacular==1.6.2 (or any recent version) with uv</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3509">#3509</a>
        opened by <a href="https://github.com/bgedik">@bgedik</a>
        on 2024-05-10 15:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bgedik">@bgedik</a> on 2024-05-10 15:00</div>
            <div class="timeline-body"><pre><code>uv --version
uv 0.1.42
</code></pre>
<pre><code>python --version
Python 3.11.9
</code></pre>
<p>In a clean environment with no packages:</p>
<p><code>uv pip install cryptacular==1.6.2</code></p>
<p>gives</p>
<pre><code>--- stdout:

--- stderr:
Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 14, in &lt;module&gt;
TypeError: prepare_metadata_for_build_wheel() got an unexpected keyword argument 'config_settings'
---

</code></pre>
<p>Whereas the same command works for regular pip in a virtual environment created with <code>virtualenv</code>:</p>
<pre><code>pip --version
pip 24.0 from /home/ubuntu/.test_vm/lib/python3.11/site-packages/pip (python 3.11)
</code></pre>
<pre><code>pip install cryptacular==1.6.2
Collecting cryptacular==1.6.2
  Using cached cryptacular-1.6.2-cp311-cp311-linux_x86_64.whl
Collecting pbkdf2 (from cryptacular==1.6.2)
  Using cached pbkdf2-1.3-py3-none-any.whl
Requirement already satisfied: setuptools in ./.test_vm2/lib/python3.11/site-packages (from cryptacular==1.6.2) (44.0.0)
Installing collected packages: pbkdf2, cryptacular
Successfully installed cryptacular-1.6.2 pbkdf2-1.3
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-10 15:11</div>
            <div class="timeline-body"><p>That's a strange error. <code>config_settings</code> is part of the specification: https://peps.python.org/pep-0517/#prepare-metadata-for-build-wheel.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-10 15:15</div>
            <div class="timeline-body"><p>I think that build backend is not spec compliant, in that it uses the variable name <code>settings</code>?</p>
<p>https://github.com/dholth/enscons/blob/8a63d64d7782bc1ad492181b6578797140684570/enscons/api.py#L33</p>
<p>My guess is that pip passes this as a positional argument.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bgedik">@bgedik</a> on 2024-05-10 15:23</div>
            <div class="timeline-body"><p>@charliermarsh  is there a suggested workaround?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2024-05-10 16:22</div>
            <div class="timeline-body"><blockquote>
<p>My guess is that pip passes this as a positional argument.</p>
</blockquote>
<p>Maybe I'm reading the pip source totally wrong here, I've never spent time before looking at the mechanics of how this works, but as I read it:</p>
<ul>
<li>Pip outsources this call to pyproject-hooks: https://github.com/pypa/pip/blob/main/src/pip/_internal/utils/misc.py#L730</li>
<li>pyproject-hooks writes the config settings to an &quot;input.json&quot; file, then calls the build backend via a subprocess pointed to the directory that json is in: https://github.com/pypa/pyproject-hooks/blob/main/src/pyproject_hooks/_impl.py#L378</li>
</ul>
<p>Therefore side stepping calling <code>prepare_metadata_for_build_wheel</code> directly, and hence why this build backend doesn't error out. Again though, first time I'm reading this code, so maybe I'm misunderstanding something.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-10 18:31</div>
            <div class="timeline-body"><p>pip calls these as positional arguments: https://github.com/pypa/pyproject-hooks/blob/261e4d82121782d05f6fddfaded8b8a7493d0370/src/pyproject_hooks/_in_process/_in_process.py#L166. So I guess we need to do the same, even though I'd argue that the build backend is at fault.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-05-10 18:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-05-10 18:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @charliermarsh on 2024-05-10 18:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2024-05-10 19:02</div>
            <div class="timeline-body"><blockquote>
<p>So I guess we need to do the same, even though I'd argue that the build backend is at fault</p>
</blockquote>
<p>Personally, I agree, but I would like to bring this to the attention of a wider audience: https://discuss.python.org/t/are-build-backends-that-use-different-keyword-arguments-to-the-standard-spec-compliant/53056</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-10 19:02</div>
            <div class="timeline-body"><p>Thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../dholth/enscons/issues/42.html">dholth/enscons#42</a> on 2024-05-10 19:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3517.html">astral-sh/uv#3517</a> on 2024-05-10 21:01</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-05-10 21:15</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-11 16:11</div>
            <div class="timeline-body"><p>@bgedik - will work in the next version of uv.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:27 UTC
    </footer>
</body>
</html>
