<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv pip compile removes --find-links, --extra-index-url etc from requirements.txt, by design? - astral-sh/uv #2937</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv pip compile removes --find-links, --extra-index-url etc from requirements.txt, by design?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2937">#2937</a>
        opened by <a href="https://github.com/artemisart">@artemisart</a>
        on 2024-04-09 16:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/artemisart">@artemisart</a></div>
            <div class="timeline-body"><p><code>pip compile</code> from pip-tools keeps the --find-links and (extra) index-urls from its inputs (both command-line and source files) and saves them to the output file, but <code>uv pip compile</code> removes them, is this by design ? Is there an option to enable it ? Thanks!</p>
<p>To reproduce:</p>
<pre><code>uv --version  # uv 0.1.29
echo -e &#x27;-f https://download.pytorch.org/whl/torch_stable.html\ntorch==1.9.1+cu111&#x27; &gt; requirements.in
uv pip compile requirements.in --output-file requirements-uv.txt
pip-compile requirements.in  # pip-tools 7.4.1 but this is not new
</code></pre>
<p>Gives requirements-uv.txt:</p>
<pre><code># This file was autogenerated by uv via the following command:
#    uv pip compile requirements.in --output-file requirements-uv.txt
torch==1.9.1+cu111
typing-extensions==4.11.0
    # via torch
</code></pre>
<p>And requirements.txt from pip-tools:</p>
<pre><code>#
# This file is autogenerated by pip-compile with Python 3.9
# by the following command:
#
#    pip-compile requirements.in
#
--find-links https://download.pytorch.org/whl/torch_stable.html

torch==1.9.1+cu111
    # via -r requirements.in
typing-extensions==4.11.0
    # via torch
</code></pre>
<p>Keeping the --find-links and --extra-index-url is really useful to keep the lockfile contained, otherwise we can&#x27;t install with uv pip install -r requirements.txt as it&#x27;s missing all these urls.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;uv pip compile removes --find-links, --extra-index-url etc from requirements.txt, bug?&quot; to &quot;uv pip compile removes --find-links, --extra-index-url etc from requirements.txt, by design?&quot; by <a href="https://github.com/artemisart">@artemisart</a> on 2024-04-09 16:33</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-09 16:34</div>
            <div class="timeline-body"><p>Hi there are <a href="https://github.com/astral-sh/uv/issues?q=is%3Aissue+emit-index-url+is%3Aclosed">several duplicate issues</a> about this.</p>
<p>You&#x27;re looking for <code>--emit-index-url</code> and <code>--emit-find-links</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-09 16:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">duplicate</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-09 16:35</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-09 16:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/artemisart">@artemisart</a> on 2024-04-09 16:39</div>
            <div class="timeline-body"><p>Oh yes sorry I think I only searched for --find-links and missed those, is it possible to configure the --emit* in a config file maybe? thanks @zanieb</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-09 16:41</div>
            <div class="timeline-body"><p>No problem it happens a lot :) I blame GitHub&#x27;s search.</p>
<p>Not a this time. We&#x27;re designing a persistent configuration file now though.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:30:47 UTC
    </footer>
</body>
</html>
