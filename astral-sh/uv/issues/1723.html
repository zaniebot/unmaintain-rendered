<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pip compile: --prerelease and/or --extra-index-url not getting correct dependency version - astral-sh/uv #1723</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>pip compile: --prerelease and/or --extra-index-url not getting correct dependency version</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/1723">#1723</a>
        opened by <a href="https://github.com/sebslight">@sebslight</a>
        on 2024-02-20 00:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sebslight">@sebslight</a> on 2024-02-20 00:26</div>
            <div class="timeline-body"><p>Using <code>uv pip compile</code>  with <code>--extra-index-url=https://download.pytorch.org/whl/nightly/cu121</code> with <code>--prerelease=allow</code> does not locate PyTorch 2.3.0, but using <code>--index-url</code> does.</p>
<pre><code class="language-bash">❯ uv --version
uv 0.1.5

# Doesn't work
❯ VIRTUAL_ENV=.venv uv pip compile --no-deps --no-header --python-version 3.11.7 --extra-index-url=https://download.pytorch.org/whl/nightly/cu121 --prerelease=allow  -
torch
Resolved 1 package in 2.11s
torch==2.2.0

# Works but...
❯ VIRTUAL_ENV=.venv uv pip compile --no-deps --no-header --python-version 3.11.7 --index-url=https://download.pytorch.org/whl/nightly/cu121 --prerelease=allow  -
torch
Resolved 1 package in 1.61s
torch==2.3.0.dev20240219+cu121

# ... wouldn't work for this
❯ VIRTUAL_ENV=.venv uv pip compile --no-deps --no-header --python-version 3.11.7 --index-url=https://download.pytorch.org/whl/nightly/cu121 --prerelease=allow  -
torch
ruff
error: HTTP status client error (403 Forbidden) for url (https://download.pytorch.org/whl/nightly/cu121/ruff/)

# explicit version using --extra-index-url also doesn't work
❯ VIRTUAL_ENV=.venv uv pip compile --no-deps --no-header --python-version 3.11.7 --extra-index-url=https://download.pytorch.org/whl/nightly/cu121 --prerelease=allow  -
torch==2.3.0.dev20240219+cu121
  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of torch==2.3.0.dev20240219+cu121 and you require torch==2.3.0.dev20240219+cu121, we can conclude that the requirements are unsatisfiable.
</code></pre>
<p>I'm split 50/50 between <em>I'm doing something wrong</em> vs. <em>This doesn't work correctly</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sebslight">@sebslight</a> on 2024-02-20 05:14</div>
            <div class="timeline-body"><p>Related to #1451</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @sebslight on 2024-02-20 05:14</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 05:43:01 UTC
    </footer>
</body>
</html>
