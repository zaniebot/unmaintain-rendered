<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv pip compile --include-self - astral-sh/uv #3091</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv pip compile --include-self</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3091">#3091</a>
        opened by <a href="https://github.com/elbaro">@elbaro</a>
        on 2024-04-17 12:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/elbaro">@elbaro</a> on 2024-04-17 12:00</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>Feature Request: Add <code>--include-self</code> option to <code>uv pip compile</code> so that the current package is added in the resulting <code>requirements.txt</code>.</p>
<p>With the pyproject.toml below, --include-self adds 'my-pkg' to requirements.txt. Then we can ship <code>requirements.txt</code> and <code>uv sync</code> to install my-app. This can be done outside uv, but --include-self looks cleaner.</p>
<pre><code class="language-toml">[project]
name = &quot;my-app&quot;
dependencies = [
  &quot;a&quot;,
  &quot;b&quot;,
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-17 13:40</div>
            <div class="timeline-body"><p>How would this differ from <code>uv pip compile pyproject.toml</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/elbaro">@elbaro</a> on 2024-04-17 16:33</div>
            <div class="timeline-body"><p><code>uv pip compile pyproject.toml</code> prints a and b, but not my-app.</p>
<p>[project]
name = &quot;my-app&quot;
version = &quot;0.1.2&quot;</p>
<p>should add <code>my_app==0.1.2</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-20 01:30</div>
            <div class="timeline-body"><p>I think you can achieve this with, e.g.: <code>echo &quot;.&quot; | uv pip compile -</code>. It's not as clean as <code>--include-self</code> but it avoids adding more options to the CLI that risk confusing new users.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-20 01:30</div>
            <div class="timeline-body"><p>Going to pass on this for now though I appreciate the suggestion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-20 01:30</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:26 UTC
    </footer>
</body>
</html>
