<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support interactive script invocations - astral-sh/uv #8064</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support interactive script invocations</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/8064">#8064</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-10-10 01:38
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-10 01:38</div>
            <div class="timeline-body"><blockquote>
<p>In: <code>main.py</code></p>
<pre><code class="language-python"># /// script
# requires-python = &quot;&gt;=3.12&quot;
# dependencies = [
#     &quot;numpy&quot;,
#     &quot;pandas&quot;,
# ]
# ///

import numpy
import pandas

def main():
    pass

if __name__ == '__main__':
    main()
    print('Done!')
</code></pre>
<p>Then using uv produces no errors:</p>
<pre><code class="language-bash">user@pop-os:~/Documents/GitHub/standalone_scripts$ uv run main.py 
Reading inline script metadata from: main.py
Done!
</code></pre>
<p>However when trying to get a REPL after an execution (maybe inspect some variables or have imports ready):</p>
<pre><code class="language-bash">user@pop-os:~/Documents/GitHub/standalone_scripts$ uv run python -i main.py
Traceback (most recent call last):
  File &quot;/home/user/Documents/GitHub/standalone_scripts/main.py&quot;, line 9, in &lt;module&gt;
    import numpy
ModuleNotFoundError: No module named 'numpy'
&gt;&gt;&gt; 
</code></pre>
</blockquote>
<p>Originally posted by @Michallote in https://github.com/astral-sh/uv/issues/6548#issuecomment-2403714219_</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/6548.html">astral-sh/uv#6548</a> on 2024-10-10 01:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cli</span> added by @zanieb on 2024-10-10 01:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Michallote">@Michallote</a> on 2024-10-10 01:40</div>
            <div class="timeline-body"><p>wow that was fast!</p>
<p>This was tested with</p>
<pre><code class="language-bash">$ uv version
uv 0.4.18
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SnirBroshi">@SnirBroshi</a> on 2024-12-15 01:01</div>
            <div class="timeline-body"><p>Also worth mentioning <code>uv run ipython -i ./main.py</code> and <code>uv run bpython -i ./main.py</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-12-15 10:52</div>
            <div class="timeline-body"><pre><code class="language-shell">$ # run [i/b]python in isolated environment with resolved script dependencies
$ uv run --with-script main.py python -i main.py
$ uv run --with-script main.py ipython -i ./main.py
$ uv run --with-script main.py bpython -i ./main.py
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/josiahcoad">@josiahcoad</a> on 2024-12-17 02:00</div>
            <div class="timeline-body"><p>Is it possible to open a python repl with a particular python version and package? ie</p>
<p><code>uv run python --python 3.10 --packages boto3,requests</code></p>
<p>I often find I want to do this when trying out a new package real quick.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-17 02:03</div>
            <div class="timeline-body"><pre><code>uv run  --python 3.10 --with boto3 --with requests python
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/11472.html">astral-sh/uv#11472</a> on 2025-02-13 10:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/billyzs">@billyzs</a> on 2025-05-22 08:56</div>
            <div class="timeline-body"><blockquote>
<p>uv run --with-script main.py python -i main.py</p>
</blockquote>
<p>unfortunately as of uv 0.7.6 this option is gone; I couldn't find a replacement after a quick glance at <code>uv run --help</code>; is there a way to drop back to REPL after the script finishes? Something like <code>uv run --script -i script.py</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-22 18:44</div>
            <div class="timeline-body"><p>Does <code>uv sync --script script.py</code> work for your case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/billyzs">@billyzs</a> on 2025-05-23 05:14</div>
            <div class="timeline-body"><blockquote>
<p>Does <code>uv sync --script script.py</code> work for your case?</p>
</blockquote>
<p>(Assuming this is directed to me) Somewhat indirectly; My setup is that I have a <code>script.py</code> (which declares its deps at the top thanks to <code>uv</code>)in a uv managed project directory; the script is for some exploratory works so I'm not ready to introduce the script deps to the project yet. <code>uv sync --script script.py</code> actually replaced project deps with script deps in the project venv; if I want to go back to working on the project I'll have to effectively rebuild the venv for the project. The rebuild is fast because uv and uv devs are awesome, but the process still feels a bit clunky. What I propose is something like <code>uv run --interactive script.py</code> that drops me back to the REPL so I can keep playing with local variables, like <code>python -i script.py</code> would do.</p>
<p>Anyways, I managed to achieve this effect for now by manually adding a <code>breakpoint()</code> at the end of the script. Still would be nice to get an official solution. wdyt?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/technillogue">@technillogue</a> on 2025-11-02 19:56</div>
            <div class="timeline-body"><p><code>uv sync --script script.py</code> does not handle requires-python. it would be great  if <code>--with-script</code> was reinstated, or if uv run could just accept the full set of python arguments (-i, -O, -OO, -u, -v, -W, -X)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:00 UTC
    </footer>
</body>
</html>
