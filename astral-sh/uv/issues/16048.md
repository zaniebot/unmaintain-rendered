```yaml
number: 16048
title: "can not use with \"error: Failed to query Python interpreter\""
type: issue
state: closed
author: yintian710
labels:
  - bug
assignees: []
created_at: 2025-09-28T05:48:27Z
updated_at: 2025-10-09T03:50:06Z
url: https://github.com/astral-sh/uv/issues/16048
synced_at: 2026-01-10T01:57:35Z
```

# can not use with "error: Failed to query Python interpreter"

---

_Issue opened by @yintian710 on 2025-09-28 05:48_

### Summary

when I run `uv run xxx....`
I meet
```bash
error: Failed to query Python interpreter
  Caused by: No space left on device (os error 28) at path "/root/.cache/uv/.tmpR5qLnt"
```
and run `uv sync` 
I see 
```bash
error: Failed to query Python interpreter
  Caused by: No space left on device (os error 28) at path "/root/.cache/uv/.tmpIwRx08"
```
and I check cache
```bash
 ls -a /root/.cache/uv
.  ..  archive-v0  builds-v0  CACHEDIR.TAG  .gitignore  interpreter-v4  sdists-v9  simple-v16  simple-v17  wheels-v5
```
but when I run `uv cache clean`, I fix it, but why?
cache dir is
```bash
ls -a /root/.cache/uv
.  ..  CACHEDIR.TAG  .gitignore  interpreter-v4  sdists-v9
```

I have been using uv for half a year, and this is the first time I have encountered such a problem. The commands I run are also fully automatic, and there is no manual operation on the machine

### Platform

Linux 5.4.296-1.el8.elrepo.x86_64 x86_64 GNU/Linux

### Version

uv 0.8.3

### Python version

Python 3.12.10

---

_Label `bug` added by @yintian710 on 2025-09-28 05:48_

---

_Comment by @charliermarsh on 2025-09-28 18:36_

It sounds like your disk ran out of space. Is that not true?

---

_Comment by @yintian710 on 2025-09-29 11:34_

> It sounds like your disk ran out of space. Is that not true?

It doesn't seem so.

df -h
devtmpfs        7.8G     0  7.8G    0% /dev
tmpfs           7.9G     0  7.9G    0% /dev/shm
tmpfs           7.9G  405M  7.5G    6% /run
tmpfs           7.9G     0  7.9G    0% /sys/fs/cgroup
/dev/sda3       298G   32G  267G   11% /
/dev/sda1       295M  270M   25M   92% /boot
tmpfs           1.6G     0  1.6G    0% /run/user/0

---

_Comment by @konstin on 2025-09-29 11:36_

Can you share the logs of `uv sync -v`?

---

_Comment by @zanieb on 2025-09-29 13:39_

What disk is `/root/.cache/uv/` on?

---

_Comment by @yintian710 on 2025-09-30 02:41_

> Can you share the logs of `uv sync -v`?

DEBUG uv 0.8.17
DEBUG Found project root: `/work/Client`
DEBUG No workspace root found, using project root
DEBUG Acquired lock for `/work/Client`
DEBUG No Python version file found in workspace: /work/Client
DEBUG Using Python request `>=3.12` from `requires-python` metadata
warning: `VIRTUAL_ENV=/work/2/venv` does not match the project environment path `venv` and will be ignored; use `--active` to target the active environment instead
DEBUG Checking for Python environment at: `venv`
WARN Broken interpreter cache entry at /root/.cache/uv/interpreter-v4/dd58ce5c3d0bf1de/e54c2cf04adb81b2.msgpack, removing: invalid type: string "/root/.local/share/uv/python/cpython-3.12.10-linux-x86_64-gnu/lib/python3.12", expected a sequence
DEBUG The project environment's Python version satisfies the request: `Python >=3.12`
DEBUG Released lock at `/tmp/uv-98fd212ec9b6efda.lock`
DEBUG Acquired lock for `venv`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: client @ file:///work/Client
DEBUG No workspace root found, using project root
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 38 packages in 1ms
DEBUG Using request timeout of 30s
DEBUG Requirement already installed: arrow==1.3.0
DEBUG Requirement already installed: fastapi==0.116.1
DEBUG Requirement already installed: gitpython==3.1.45
DEBUG Requirement already installed: httpx==0.28.1
DEBUG Requirement already installed: loguru==0.7.3
DEBUG Requirement already installed: packaging==25.0
DEBUG Requirement already installed: pip==25.2
DEBUG Requirement already installed: psutil==7.0.0
DEBUG Requirement already installed: py-spy==0.4.1
DEBUG Requirement already installed: toml==0.10.2
DEBUG Requirement already installed: uv==0.8.12
DEBUG Requirement already installed: uvicorn==0.35.0
DEBUG Requirement already installed: websockets==15.0.1
DEBUG Requirement already installed: why-tools==0.0.49
DEBUG Requirement already installed: python-dateutil==2.9.0.post0
DEBUG Requirement already installed: types-python-dateutil==2.9.0.20250809
DEBUG Requirement already installed: pydantic==2.11.7
DEBUG Requirement already installed: starlette==0.47.2
DEBUG Requirement already installed: typing-extensions==4.14.1
DEBUG Requirement already installed: gitdb==4.0.12
DEBUG Requirement already installed: anyio==4.10.0
DEBUG Requirement already installed: certifi==2025.8.3
DEBUG Requirement already installed: httpcore==1.0.9
DEBUG Requirement already installed: idna==3.10
DEBUG Requirement already installed: click==8.2.1
DEBUG Requirement already installed: h11==0.16.0
DEBUG Requirement already installed: better-exceptions==0.3.3
DEBUG Requirement already installed: importlib-metadata==7.1.0
DEBUG Requirement already installed: six==1.17.0
DEBUG Requirement already installed: annotated-types==0.7.0
DEBUG Requirement already installed: pydantic-core==2.33.2
DEBUG Requirement already installed: typing-inspection==0.4.1
DEBUG Requirement already installed: smmap==5.0.2
DEBUG Requirement already installed: sniffio==1.3.1
DEBUG Requirement already installed: zipp==3.23.0
Audited 35 packages in 192ms
DEBUG Released lock at `/work/Client/venv/.lock`

---

_Comment by @yintian710 on 2025-09-30 02:42_

> /root/.cache/uv/

df -h
devtmpfs 7.8G 0 7.8G 0% /dev
tmpfs 7.9G 0 7.9G 0% /dev/shm
tmpfs 7.9G 405M 7.5G 6% /run
tmpfs 7.9G 0 7.9G 0% /sys/fs/cgroup
/dev/sda3 298G 32G 267G 11% /
/dev/sda1 295M 270M 25M 92% /boot
tmpfs 1.6G 0 1.6G 0% /run/user/0

 findmnt -n -o TARGET --target /root/.cache/uv/
/

---

_Comment by @charliermarsh on 2025-09-30 02:44_

Did you run `uv cache clean` between the two `ls` commands? It looks like all the wheels were removed, which would represent significant free disk space.

---

_Comment by @yintian710 on 2025-09-30 07:55_

> Did you run `uv cache clean` between the two `ls` commands? It looks like all the wheels were removed, which would represent significant free disk space.

yes, but now I have 267G, I don't think it was obtained by uv cleaning. If it was, then it seems the problem is even more serious

---

_Comment by @charliermarsh on 2025-09-30 14:59_

If you were using uv for half a year, it's possible! The uv cache is a global store, so it contains any package that you installed in any project. The design of the cache is such that if you reuse packages across projects, we only ever install one copy on your machine, which ultimately saves disk space. But it means that the cache itself can grow large. If you hit a disk space issue, then ran `uv cache clean` and now have disk space, I don't know that there's much else to do here. You can run `uv cache clean` or `uv cache prune` periodically if you're concerned about disk usage.

---

_Closed by @charliermarsh on 2025-09-30 14:59_

---

_Comment by @yintian710 on 2025-10-09 03:50_

> If you were using uv for half a year, it's possible! The uv cache is a global store, so it contains any package that you installed in any project. The design of the cache is such that if you reuse packages across projects, we only ever install one copy on your machine, which ultimately saves disk space. But it means that the cache itself can grow large. If you hit a disk space issue, then ran `uv cache clean` and now have disk space, I don't know that there's much else to do here. You can run `uv cache clean` or `uv cache prune` periodically if you're concerned about disk usage.

Thanks, I will run `uv cache clean` every week, I hope this problem won't occur again in the future.
but, I use uv only 4 month, and I run `uv cache clean`, got
```bash
uv cache clean
Clearing cache at: .cache/uv
Removed 14599 files (274.8MiB)
```
I last used it last month
it only 274.8M, In terms of proportion, it is impossible to reach 267G in four months
Moreover, recently we have been conducting stress tests, and the occupied space should be even larger

you can close this issue, if I encounter this problem again, I will open it once more

thanks.



---
