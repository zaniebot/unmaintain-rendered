```yaml
number: 6315
title: uv sync --no-self
type: issue
state: closed
author: hynek
labels: []
assignees: []
created_at: 2024-08-21T10:22:57Z
updated_at: 2024-08-21T10:43:55Z
url: https://github.com/astral-sh/uv/issues/6315
synced_at: 2026-01-10T01:57:13Z
```

# uv sync --no-self

---

_Issue opened by @hynek on 2024-08-21 10:22_

Since Docker is what it is and given how well caching in it works, I like to install my applications in two steps.

First, the dependencies:

```Dockerfile
COPY pyproject.toml /_lock
COPY pdm.lock /_lock

RUN --mount=type=cache,target=/root/.cache \
    set -ex \
    && cd /_lock \
    && pdm use -i /app/bin/python \
    && pdm sync --no-self --prod
```

Note, that the source is not copied; as long as the lock file doesn't change, this layer is cached and this is the layer that takes the longest to build.

And then the app:

```Dockerfile
COPY . /src
RUN --mount=type=cache,target=/root/.cache \
    set -ex \
    && uv pip install --python /app/bin/$PY --no-deps /src
```

Which is Blazing Fastâ„¢ already.

It would be great if something like this were possible with `uv sync`.

---

_Comment by @mkniewallner on 2024-08-21 10:42_

I think that's the same request as https://github.com/astral-sh/uv/issues/4028?

---

_Comment by @hynek on 2024-08-21 10:43_

Aw yeah sorry, looks like I searched for the wrong terms and they know. :| Looks like it depends from what side one comes and I don't know Poetry's flags. ;)

---

_Closed by @hynek on 2024-08-21 10:43_

---
