<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uvx` doesn't seem to support `git-lfs` - astral-sh/uv #14173</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`uvx` doesn't seem to support `git-lfs`</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/14173">#14173</a>
        opened by <a href="https://github.com/asmith26">@asmith26</a>
        on 2025-06-20 23:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/asmith26">@asmith26</a> on 2025-06-20 23:10</div>
            <div class="timeline-body"><h3>Summary</h3>
<p><strong>Minimal Reproducible Example</strong></p>
<p>I've created a minimal <a href="https://github.com/asmith26/debug-uvx-gitlfs/">repo</a> with 2 branches:</p>
<ul>
<li><code>no-gitlfs</code>: this branch has <strong>no git-lfs</strong> files, and this works:</li>
</ul>
<pre><code class="language-bash">$  uvx --from git+ssh://git@github.com/asmith26/debug-uvx-gitlfs.git@no-gitlfs my_package

# Works, prints &quot;Hello my_package!&quot;
</code></pre>
<ul>
<li><code>main</code>: this branch has <strong>has git-lfs</strong> files, and these commands <strong>don't work</strong>:</li>
</ul>
<pre><code class="language-bash">$ uvx --from git+ssh://git@github.com/asmith26/debug-uvx-gitlfs.git my_package
$ uvx --from git+ssh://git@github.com/asmith26/debug-uvx-gitlfs.git my_package_gitlfs

# Both error out with:

   Updating ssh://git@github.com/asmith26/debug-uvx-gitlfs.git (HEAD)                                                                                                          × Failed to download and build `my-package @ git+ssh://git@github.com/asmith26/debug-uvx-gitlfs.git@e592409ac469f534c4c09f18554b66c339593014`
  ├─▶ Git operation failed
  ╰─▶ process didn't exit successfully: `/usr/bin/git reset --hard e592409ac469f534c4c09f18554b66c339593014` (exit status: 128)
      --- stderr
      Downloading src/my_package/git-lfs.txt (25 B)
      Error downloading object: src/my_package/git-lfs.txt (9dd7ca1): Smudge error: Error downloading src/my_package/git-lfs.txt
      (9dd7ca19a3305d52c11ed9ed2121b1c270b99aa3cd1e0ebb92270e7b44f5829d): error transferring &quot;9dd7ca19a3305d52c11ed9ed2121b1c270b99aa3cd1e0ebb92270e7b44f5829d&quot;: [0] remote
      missing object 9dd7ca19a3305d52c11ed9ed2121b1c270b99aa3cd1e0ebb92270e7b44f5829d
</code></pre>
<p>In case also helpful, if you clone the repo and run the gitlfs package locally, it works:</p>
<pre><code class="language-bash">$ git clone git@github.com:asmith26/debug-uvx-gitlfs.git
$ cd debug-uvx-gitlfs
$ uv run my_package_gitlfs

# Works, prints &quot;Hello my_package_gitlfs!&quot;
</code></pre>
<h3>Platform</h3>
<p>Linux 6.8.0-62-generic x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.7.13</p>
<h3>Python version</h3>
<p>Python 3.13.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @asmith26 on 2025-06-20 23:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-21 01:13</div>
            <div class="timeline-body"><p>Have you tried turning on LFS support with <a href="https://docs.astral.sh/uv/reference/environment/#uv_git_lfs"><code>UV_GIT_LFS</code></a>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-21 01:14</div>
            <div class="timeline-body"><p>See https://github.com/astral-sh/uv/pull/10335</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/asmith26">@asmith26</a> on 2025-06-21 09:33</div>
            <div class="timeline-body"><p>Thanks for your help @zanieb, unfortunately this doesn't seem to work:</p>
<pre><code class="language-bash">$ export UV_GIT_LFS=1 &amp;&amp; uvx --from git+ssh://git@github.com/asmith26/debug-uvx-gitlfs.git my_package_gitlfs

  × Failed to download and build `my-package @ git+ssh://git@github.com/asmith26/debug-uvx-gitlfs.git@5c6f3ba213e37cb67f8d94fc24684a87f02a796c`
  ├─▶ Git operation failed
  ╰─▶ process didn't exit successfully: `/usr/bin/git reset --hard 5c6f3ba213e37cb67f8d94fc24684a87f02a796c` (exit status: 128)
      --- stderr
      Downloading src/my_package/git-lfs.txt (25 B)
      Error downloading object: src/my_package/git-lfs.txt (9dd7ca1): Smudge error: Error downloading src/my_package/git-lfs.txt
      (9dd7ca19a3305d52c11ed9ed2121b1c270b99aa3cd1e0ebb92270e7b44f5829d): error transferring &quot;9dd7ca19a3305d52c11ed9ed2121b1c270b99aa3cd1e0ebb92270e7b44f5829d&quot;: [0] remote
      missing object 9dd7ca19a3305d52c11ed9ed2121b1c270b99aa3cd1e0ebb92270e7b44f5829d

      Errors logged to '~/.cache/uv/git-v0/checkouts/44eeb432cca41142/5c6f3ba/.git/lfs/logs/20250621T103207.446025077.log'.
      Use `git lfs logs last` to view the log.
      error: external filter 'git-lfs filter-process' failed
      fatal: src/my_package/git-lfs.txt: smudge filter lfs failed
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-21 11:22</div>
            <div class="timeline-body"><p>Can you try clearing your package from the git cache first? <code>rm -rf $(uv cache dir)/git-v0</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/asmith26">@asmith26</a> on 2025-06-21 12:06</div>
            <div class="timeline-body"><p>It worked! Many thanks for your help and time @zanieb !</p>
<pre><code class="language-bash">$ rm -rf $(uv cache dir)/git-v0
$ export UV_GIT_LFS=1 &amp;&amp; uvx --from git+ssh://git@github.com/asmith26/debug-uvx-gitlfs.git my_package_gitlfs

# Works, prints &quot;Hello my_package_gitlfs!&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @asmith26 on 2025-06-21 12:06</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/15127.html">astral-sh/uv#15127</a> on 2025-08-07 09:38</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:28 UTC
    </footer>
</body>
</html>
