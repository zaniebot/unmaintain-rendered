<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Binary installation Path for uv / uvx breaking with snap updates for vs code on Ubuntu 24 - astral-sh/uv #14849</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Binary installation Path for uv / uvx breaking with snap updates for vs code on Ubuntu 24</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/14849">#14849</a>
        opened by <a href="https://github.com/gorbinphilip">@gorbinphilip</a>
        on 2025-07-23 16:12
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/gorbinphilip">@gorbinphilip</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I installed uv with the <a href="https://docs.astral.sh/uv/getting-started/installation/#standalone-installer">standalone</a> installer using the command below</p>
<pre><code>curl -LsSf https://astral.sh/uv/install.sh | sh
</code></pre>
<p>I believe i did this from vscode terminal. Everything worked fine until snap updated vscode couple of times, which eventually removed the version specific path values written into ~/.bashrc &amp; ~/.profile</p>
<pre><code>. &quot;$HOME/snap/code/[version]/.local/share/../bin/env&quot;
</code></pre>
<p>leading to profile loading error on login &amp; no uv, uvx binaries in path.</p>
<p>Binaries seem to have got installed in the following vs code location</p>
<pre><code>/home/[user]/snap/code/[version]/.local/share/../bin/
</code></pre>
<p>(version value present was109 in my case)</p>
<p>I ended up changing the path values written in the following way for it to consistently work</p>
<pre><code>. &quot;$HOME/snap/code/current/.local/share/../bin/env&quot;
</code></pre>
<h3>Platform</h3>
<p>Ubuntu 24.04.2 LTS (Linux 6.14.0-24-generic x86_64 GNU/Linux)</p>
<h3>Version</h3>
<p>uv 0.7.19</p>
<h3>Python version</h3>
<p>Python 3.12.3</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @gorbinphilip on 2025-07-23 16:12</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-23 16:14</div>
            <div class="timeline-body"><p>I'm not sure it's in scope for us to deal with snap isolation. I'd recommend not installing uv from inside a snap :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-23 16:15</div>
            <div class="timeline-body"><p>I guess it's plausible we could detect we're in a snap path and set <code>current</code> appropriately? but it sounds like snap is setting a variable to a versioned directory and I think it's correct for us to respect that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/gorbinphilip">@gorbinphilip</a> on 2025-07-23 18:15</div>
            <div class="timeline-body"><p>If it is snap itself setting up this trap, a warning during installation attempt could be useful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @zanieb on 2025-07-24 21:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @zanieb on 2025-07-24 21:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pwilkin">@pwilkin</a> on 2025-08-20 21:03</div>
            <div class="timeline-body"><p>Please disallow installing uv via snap. Print an error or something.</p>
<p>I just spent six totally miserable hours of my programming life trying to figure out why the hell a <code>uv run</code> command, which ran perfectly fine from the shell, started crashing with an immediate signal 120 as soon as I ran it from within a spawn_process call in TypeScript.</p>
<p>Well, I still don't know why exactly. But I did find out that once I replaced my snap-installed uv with a normal uv installed in ~/.local/bin, everything started working fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-20 23:35</div>
            <div class="timeline-body"><p>Hey @lengau â€” would you be interested in exploring a fix for this with us?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Logan-Pageler">@Logan-Pageler</a> on 2025-08-22 22:18</div>
            <div class="timeline-body"><p>I hit this issue too, but it doesn't seem to be uv issue, or snap issue, but more of a vscode issue. Apparently vscode configures <code>XDG_DATA_HOME</code> and uv rightfully uses it for its install. There is already an <a href="https://github.com/microsoft/vscode/issues/237608">open issue</a> about this on the vscode github if you want to read more about it.</p>
<p>The TLDR of the issue is: Fix this by setting</p>
<pre><code class="language-json">&quot;terminal.integrated.env.linux&quot;: {
    &quot;XDG_DATA_HOME&quot;: &quot;${env:HOME}/.local/share&quot;
  }
</code></pre>
<p>in ur vscode <code>settings.json</code> and then you can install uv and other tools properly from within vscode.</p>
<p>Its a sad day to be a vscode user :(</p>
<p>Maybe its still worth warning people about this tho since I know vscode is very popular, so theres a good chance many people will hit this?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/abulygin">@abulygin</a> on 2026-01-08 22:30</div>
            <div class="timeline-body"><p>I have got the same issue and the solution, proposed by the author worked for me. This happened after the recent snap and vscode update</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2026-01-09 10:57</div>
            <div class="timeline-body"><p>A simple improvement is to show a warning when we see <code>$HOME/snap/code/[version]/</code> in the path, telling users that this will break with the next version update and that they should use a non-snap installer.</p>
<p>The proper fix would be on the VS Code or snap side.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> removed by @konstin on 2026-01-09 10:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> removed by @konstin on 2026-01-09 10:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">external</span> added by @konstin on 2026-01-09 10:57</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:32:20 UTC
    </footer>
</body>
</html>
