<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[`uv_build`] Emit warning when both license (`PEP639`) and legacy license classifiers are present in pyproject.toml - astral-sh/uv #16354</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>[<code>uv_build</code>] Emit warning when both license (<code>PEP639</code>) and legacy license classifiers are present in pyproject.toml</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/16354">#16354</a>
        opened by <a href="https://github.com/chirizxc">@chirizxc</a>
        on 2025-10-18 16:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/chirizxc">@chirizxc</a> on 2025-10-18 16:39</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Currently, if the <code>build-backend</code> package is <code>uv_build</code> it will without error / warning build a package with <code>pyproject.toml</code> contains:</p>
<pre><code class="language-toml">license = &quot;Apache-2.0&quot;
license-files = [&quot;LICENSE&quot;]

classifiers = [
    &quot;License :: OSI Approved :: Apache Software License&quot;,
]
</code></pre>
<p>All classifiers that begin with <code>License ::</code> are <a href="https://packaging.python.org/en/latest/specifications/pyproject-toml/#classifiers">deprecated</a>.</p>
<p>Also, the legacy form</p>
<pre><code class="language-toml">license = { file = &quot;LICENSE&quot; }
</code></pre>
<p>is <a href="https://packaging.python.org/en/latest/specifications/pyproject-toml/#legacy-specification">deprecated</a> by <code>PEP639</code> and replaced with the simplified SPDX expression form:</p>
<pre><code class="language-toml">license = &quot;Apache-2.0&quot;
license-files = [&quot;LICENSE&quot;]
</code></pre>
<h3>Example</h3>
<pre><code class="language-toml">[build-system]
requires = [&quot;uv_build&gt;=0.9.3,&lt;0.10.0&quot;]
build-backend = &quot;uv_build&quot;

[project]
name = &quot;test&quot;
version = &quot;0.1.0&quot;
readme = &quot;README.md&quot;
# license = { file = &quot;LICENSE&quot; } # &lt;== Legacy specification (https://packaging.python.org/en/latest/specifications/pyproject-toml/#legacy-specification)
license = &quot;Apache-2.0&quot;
license-files = [&quot;LICENSE&quot;]
requires-python = &quot;&gt;=3.11&quot;
dependencies = []

classifiers = [
    &quot;License :: OSI Approved :: Apache Software License&quot;,
]
#   ^^^^
# https://packaging.python.org/en/latest/specifications/pyproject-toml/#classifiers
</code></pre>
<p>For example, <a href="https://github.com/pypa/setuptools/blob/9cc2f5c05c333cd4cecd2c0d9e7c5e208f2a3148/setuptools/dist.py#L429">setuptools simply does not build the package</a> if this situation happens</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @chirizxc on 2025-10-18 16:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Emit warning when both license (`PEP 639`) and legacy license classifiers are present in pyproject.toml" to "[`uv_build`] Emit warning when both license (`PEP639`) and legacy license classifiers are present in pyproject.toml" by @chirizxc on 2025-10-18 16:42</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">build-backend</span> added by @konstin on 2025-12-18 15:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chirizxc">@chirizxc</a> on 2026-01-09 14:26</div>
            <div class="timeline-body"><p>@konstin сan I take this?</p>
<p>Also, questions: should we throw a warning if the user has <code># license = { file = “LICENSE” } # &lt;== Legacy specification</code> instead of <code>license</code> + <code>license-files</code>, and should we fail with an error like <code>setuptools</code> if we see a deprecated classifier (i.e., any starting with <code>License ::</code>)?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:31:09 UTC
    </footer>
</body>
</html>
