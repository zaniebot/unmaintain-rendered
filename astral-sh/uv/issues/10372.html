<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>source .venv/bin/activate not working - astral-sh/uv #10372</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>source .venv/bin/activate not working</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/10372">#10372</a>
        opened by <a href="https://github.com/Trid-collab">@Trid-collab</a>
        on 2025-01-07 17:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Trid-collab">@Trid-collab</a></div>
            <div class="timeline-body"><p>Need help. I am on macOS 15.2 and moving from pyenv trying to use uv. I have installed uv through home-brew and initialize my python directory  on my zsh shell using uv init and then created a virtual environment using uv venv which creates the necessary folder .venv. But the python environment in the directory doesn't seem to get activated when I try <code>source  .venv/bin/activate</code> I am not sure what am I missing here. Is there any additional config which is needed to the zsh shell or other place. I have installed python using <code>uv python install --preview</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-07 17:21</div>
            <div class="timeline-body"><p>How are you concluding that the environment is not activated? What commands are you running that are failing, and what do you expect them to do instead?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2025-01-07 17:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-07 17:23</div>
            <div class="timeline-body"><p>Please also see #9452 on how to report issues.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Trid-collab">@Trid-collab</a> on 2025-01-07 17:27</div>
            <div class="timeline-body"><p>I have added say a new package pandas using. <code>uv add pandas</code> in the directory. after running <code>source .venv/bin/activate</code>. Then when I open a python file using neovim and try to import pandas it doesn't seem to resolve. This wasn't the case when using pyenv</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-07 17:33</div>
            <div class="timeline-body"><p>How do you know neovim is using your active environment?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-07 17:34</div>
            <div class="timeline-body"><p>Here's an example reproduction</p>
<pre><code>❯ uv init example
Initialized project `example` at `/Users/zb/workspace/example`
❯ cd example
❯ uv add pandas
warning: Ignoring existing virtual environment linked to non-existent Python interpreter: .venv/bin/python3 -&gt; python
Using CPython 3.11.11 interpreter at: /opt/homebrew/opt/python@3.11/bin/python3.11
Removed virtual environment at: .venv
Creating virtual environment at: .venv
Resolved 7 packages in 198ms
Prepared 6 packages in 1.17s
Installed 6 packages in 35ms
 + numpy==2.2.1
 + pandas==2.2.3
 + python-dateutil==2.9.0.post0
 + pytz==2024.2
 + six==1.17.0
 + tzdata==2024.2
❯ source .venv/bin/activate
❯ python -c &quot;import pandas; print(pandas)&quot;
&lt;module 'pandas' from '/Users/zb/workspace/example/.venv/lib/python3.11/site-packages/pandas/__init__.py'&gt;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @zanieb on 2025-01-07 17:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Trid-collab">@Trid-collab</a> on 2025-01-07 17:52</div>
            <div class="timeline-body"><p>This is the output of the commands</p>
<pre><code class="language-tridi/master">Resolved 47 packages in 418ms
Prepared 13 packages in 3.34s
Installed 13 packages in 73ms
 + contourpy==1.3.1
 + cycler==0.12.1
 + fonttools==4.55.3
 + kiwisolver==1.4.8
 + matplotlib==3.10.0
 + numpy==2.2.1
 + pandas==2.2.3
 + pillow==11.1.0
 + pyarrow==18.1.0
 + pyparsing==3.2.1
 + python-calamine==0.3.1
 + pytz==2024.2
 + tzdata==2024.2
 trid/master  source .venv/bin/activate
trid/master python -c &quot;import pandas; print(pandas)&quot;
Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
    import pandas; print(pandas)
    ^^^^^^^^^^^^^
ModuleNotFoundError: No module named 'pandas'
zsh: exit 1     python -c &quot;import pandas; print(pandas)&quot;
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-07 18:04</div>
            <div class="timeline-body"><p>Thanks! Can you share the output of <code>which python</code> and <code>echo $VIRTUAL_ENV</code>?</p>
<p>For multiline code blocks, use triple backticks ```</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Trid-collab">@Trid-collab</a> on 2025-01-07 18:29</div>
            <div class="timeline-body"><pre><code class="language-which">/Users/trid/.pyenv/shims/python
</code></pre>
<p>it seems that it isn't detecting the python 3.13.1 which was installed using <code>uv python install --preview</code>
I have also run <code>uv tool update-shell</code> which is also working</p>
<pre><code>echo $VIRTUAL_ENV

tridi &gt; echo $VIRTUAL_ENV ?
zsh: no matches found: ?
</code></pre>
<pre><code> uv python find
/Users/trid/.local/share/uv/python/cpython-3.13.1-macos-aarch64-none/bin/python3.13
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-07 18:34</div>
            <div class="timeline-body"><p>Your pyenv shim seems to be getting in the way. Is this like https://github.com/astral-sh/uv/issues/6204?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-07 18:43</div>
            <div class="timeline-body"><p>Yeah you might need to remove your pyenv shim, I presume it ensures it's at the front of the <code>PATH</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Trid-collab">@Trid-collab</a> on 2025-01-09 15:32</div>
            <div class="timeline-body"><p>Thanks, when I comment out my pyenv lines in my zshrc it works. But it's not an ideal solution because as of now I need pyenv for certain use cases. Also the <code>.python-version</code> file in case of the pyenv enables automatic switching to the virtual environment which is put up in there, this option doesn't seem to work with uv even though it creates a <code>.pyenv-version</code> file. Is there something I need to do enable this feature.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Trid-collab">@Trid-collab</a> on 2025-01-12 13:50</div>
            <div class="timeline-body"><p>Another observation. In fish shell if I use <code>source .venv/bin/activate.fish</code> the environment gets activated inspite of pyenv details still being active on the fish shell config file</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ArmanBehkish">@ArmanBehkish</a> on 2025-10-11 12:53</div>
            <div class="timeline-body"><p>I encountered a similar problem and here is how I fixed it:
OS: mac
shell: zsh
goal: update python version in the current uv project</p>
<pre><code>echo &quot;3.14.0&quot; &gt; .python-version
uv sync
</code></pre>
<p>after this, the dependencies and python version is correct, but the virtual environment cannot be activated with source.
The reason should be the conflict .python-version caused with pyenv.</p>
<p>solution: disable py-env hooks in the shell environment by commenting out following line from ~/.zshrc</p>
<pre><code>eval &quot;$(pyenv virtualenv-init -)&quot;
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:29:10 UTC
    </footer>
</body>
</html>
