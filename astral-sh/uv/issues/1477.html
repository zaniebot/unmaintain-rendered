<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv pip install fails with comparator on wildcard version specifier - astral-sh/uv #1477</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv pip install fails with comparator on wildcard version specifier</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/1477">#1477</a>
        opened by <a href="https://github.com/fennovj">@fennovj</a>
        on 2024-02-16 11:04
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/fennovj">@fennovj</a></div>
            <div class="timeline-body"><p>Minimal example:</p>
<p>requirements.txt with content:</p>
<pre><code>requests&gt;=2.30.*
</code></pre>
<p>or</p>
<pre><code>requests&lt;=2.30.*
</code></pre>
<p><code>pip install -r requirements.txt</code> will succeed, but <code>uv pip install -r requirements.txt</code> will fail.</p>
<pre><code>error: Couldn't parse requirement in `requirements.txt` at position 0
  Caused by: Operator &gt;= cannot be used with a wildcard version specifier
requests&gt;=2.30.*
        ^^^^^^^^
</code></pre>
<p>For an example in the wild (how I encountered this issue):</p>
<p><code>pip install polars==0.14.0</code> succeeds, but <code>uv pip install polars==0.14.0</code> fails with</p>
<pre><code>error: Failed to read metadata for: polars==0.14.0
  Caused by: Failed to parse METADATA file at: /Users/fenno/scratch/.env/lib/python3.10/site-packages/polars-0.14.0.dist-info/METADATA
  Caused by: Operator &gt;= cannot be used with a wildcard version specifier
pyarrow&gt;=4.0.*; extra == 'pyarrow'
       ^^^^^^^
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-02-16 14:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-16 14:57</div>
            <div class="timeline-body"><p>Thanks! That's actually not a &quot;valid&quot; specifier, but we have some fixups in the code for packages that use invalid specifiers. Will make sure this is covered.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @BurntSushi by @BurntSushi on 2024-02-16 14:58</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @BurntSushi on 2024-02-16 20:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/webcoderz">@webcoderz</a> on 2024-03-19 17:23</div>
            <div class="timeline-body"><p>still running into this problem</p>
<p><code>37.90 stderr: error: Failed to download: torchsde==0.2.5 37.90   Caused by: Couldn't parse metadata of torchsde-0.2.5-py3-none-any.whl from https://files.pythonhosted.org/packages/73/8d/efd3e7b31ea854d0bd6886aa3cf44914adce113a6d460850af41ac1dd4dd/torchsde-0.2.5-py3-none-any.whl.metadata 37.90   Caused by: Operator &gt;= cannot be used with a wildcard version specifier 37.90 numpy (&gt;=1.19.*) ; python_version &gt;= &quot;3.7&quot; 37.90        ^^^^^^^^</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-19 17:24</div>
            <div class="timeline-body"><p>Can you open a new issue please?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:23:32 UTC
    </footer>
</body>
</html>
