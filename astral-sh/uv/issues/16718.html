<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv run with --project does not run command in project directory as help text says - astral-sh/uv #16718</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv run with --project does not run command in project directory as help text says</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16718">#16718</a>
        opened by <a href="https://github.com/stewartadam">@stewartadam</a>
        on 2025-11-13 06:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/stewartadam">@stewartadam</a> on 2025-11-13 06:50</div>
            <div class="timeline-body"><h3>Summary</h3>
<pre><code class="language-sh">$ uv init foo
Initialized project `foo` at `/Users/stewartadam/foo`
$ cd foo

$ uv init bar
Adding `bar` as member of workspace `/Users/stewartadam/foo`
Initialized project `bar` at `/Users/stewartadam/foo/bar`

$ cd bar
$ uv run --project bar main.py
Using CPython 3.12.12
Creating virtual environment at: .venv
Hello from foo!

$ uv run --help | grep -e --project
      --project &lt;PROJECT&gt;                          Run the command within the given project directory [env: UV_PROJECT=]
</code></pre>
<p>Given the help text, I would have expected this to return &quot;hello from bar&quot;. I'm guessing the current behavior is correct, so we may want to adjust the help text to make clear it's not actually running it within the given project directory, but rather just using the project context.</p>
<h3>Platform</h3>
<p>macOS 14</p>
<h3>Version</h3>
<p>uv 0.9.9 (Homebrew 2025-11-12)</p>
<h3>Python version</h3>
<p>Python 3.12.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @stewartadam on 2025-11-13 06:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nooscraft">@nooscraft</a> on 2025-11-13 08:21</div>
            <div class="timeline-body"><p>@zanieb Are we going ahead with the help text adjustments that @stewartadam suggested? If so, I can take a look at it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-11-28 14:34</div>
            <div class="timeline-body"><p>I think we can tweak the text a bit. The flag you're looking for (that essentially cd's to the directory) is <code>--directory</code>. <code>--project</code> just makes it such that we perform file discovery from the given directory, i.e., identify the current project based on that path.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2025-11-28 14:34</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @charliermarsh on 2025-11-28 14:34</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/nooscraft">@nooscraft</a> on 2025-12-03 13:32</div>
            <div class="timeline-body"><p>@charliermarsh, both are feasible. We could update the help text to clarify that <code>--project</code> affects file discovery vs <code>--directory</code> changing the working dir.</p>
<p>For the behavior change, we can set the working directory before spawning the command. Updating the help text would be safer and fixes the confusion.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-03 13:36</div>
            <div class="timeline-body"><p>Yeah I think</p>
<blockquote>
<p>Discover a project in the given directory</p>
</blockquote>
<p>is reasonable</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @zanieb on 2025-12-03 13:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/16965.html">astral-sh/uv#16965</a> on 2025-12-03 13:54</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-12-03 18:15</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:14 UTC
    </footer>
</body>
</html>
