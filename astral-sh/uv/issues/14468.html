<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workspaces with pinned dependencies - astral-sh/uv #14468</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Workspaces with pinned dependencies</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/14468">#14468</a>
        opened by <a href="https://github.com/davidggz">@davidggz</a>
        on 2025-07-05 16:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/davidggz">@davidggz</a> on 2025-07-05 16:27</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I have been working with uv workspaces for some time and I find it pretty useful for my use case. Specifically, I'm trying to build a root library that depends on some other members of the workspace (some other libraries) that can be installed optionally in some kind of plugin architecture. This way, I can encapsulate in those libraries some pretty heavy dependencies that I don't want to have in all the cases (e.g. pytorch).</p>
<p>The problem that I found is about version pinning between members of different workspaces. When working locally, everything works perfectly fine because all the libraries are installed using the <code>editable</code> mode. However, when running <code>uv build --all-packages</code>, since the versions of the interdependent packages aren't specified in the <code>pyproject.toml</code>, any client that installs any of the libraries will install the latest of all of them. This can obviously break any environment.</p>
<p>I have thought about different solutions:</p>
<ul>
<li>Having unpinned versions for all interdependencies between members, but create the wheel from a lock file. This would work because the lock file has all the versions pinned. This would allow me to just update the <code>version</code> field of the <code>pyproject.toml</code> of all the libraries whenever any of them changes and it would do everything automatically from the wheels point of view. However, I think this is not possible in <code>uv</code> at this moment.</li>
<li>Doing everything manually. This means having a dynamic version in all the libraries and triggering the creation of a new wheel when a GitHub release is created with certain prefix. The problem with this is that, if I need to change both the root library and any of the ones it depends on, I would need to do the things below. If I have a lot of libraries, this may be too much. This is specifically painful if one of the libraries is some kind of <code>common</code> library to all of them.<ol>
<li>Get all the changes of both libraries in main.</li>
<li>Trigger the child library new version.</li>
<li>Trigger the version of the root library.</li>
</ol>
</li>
<li>Having just one library with all the plugins in it. This would be awful because I would lose the dependency isolation that I talked about before.</li>
<li>Having a very complicated script that would check whether a member has changed in order to bump its version and update recursively all the members that depend on it. This is overly complicated.</li>
</ul>
<p>Is there any way to accomplish what I'm trying with uv? Could you give me some guidance or best practices about this topic? Version pinning is quite an important topic for production level systems, there must be a way to work around it. ðŸ¤”</p>
<p>Thank you in advance</p>
<h3>Platform</h3>
<p>macOS</p>
<h3>Version</h3>
<p>0.7.19</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @davidggz on 2025-07-05 16:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-07-07 09:46</div>
            <div class="timeline-body"><p>We don't have a great workflow for that, in the future this could happen as a combination of <code>uv version --bump</code> and <code>uv upgrade</code>.</p>
<p>One option is to use <code>uv export</code> to create a constraints file to use during installation. I also know that some people use scripts to bump all versions in a workspace together.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/davidggz">@davidggz</a> on 2025-07-07 14:40</div>
            <div class="timeline-body"><p>I see. I just built a script that does the automatic version bump across all different workspace members. It would be great to have that feature in <code>uv</code>, it would make <code>uv workspaces</code> much more usable for libraries. Thank you for the support!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:28 UTC
    </footer>
</body>
</html>
