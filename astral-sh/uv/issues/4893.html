<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking issue: Stabilize `uv.lock` format - astral-sh/uv #4893</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Tracking issue: Stabilize <code>uv.lock</code> format</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/4893">#4893</a>
        opened by <a href="https://github.com/konstin">@konstin</a>
        on 2024-07-08 13:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/konstin">@konstin</a> on 2024-07-08 13:47</div>
            <div class="timeline-body"><p>This is a tracking issue for making breaking changes the schema and contents of <code>uv.lock</code> before the release.</p>
<ul>
<li>[x] https://github.com/astral-sh/uv/issues/4888</li>
<li>[x] https://github.com/astral-sh/uv/issues/4889</li>
<li>[x] Move the resolution options (resolution lowest, exclude newer, prerelease mode) under a newer header resolver-options to group them and make them distinct from the rest of the top level entries.</li>
<li>[x] Rename distribution to package or packages. This is not a distribution entry, the distributions are the source dists and wheels. package is also a more familiar name and closer to PEP 751, packages would be the same as PEP 751.</li>
<li>[x] If only one index is used, move the source = { registry = &quot;https://pypi.org/simple&quot; } to the top of the file and out of the [[distribution]]. This shrinks the file a bit and removed the duplication.</li>
<li>[x] Try to make the lockfile more concise. Could we e.g. remove redundant <code>source</code> line? The lockfile is long and should try to get it as small as possible without sacrificing readability and diffability.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">preview</span> added by @konstin on 2024-07-08 13:47</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Stabilize lockfile format" to "Stabilize `uv.lock` format" by @konstin on 2024-07-08 13:48</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/T-256">@T-256</a> on 2024-07-08 14:17</div>
            <div class="timeline-body"><blockquote>
<ul>
<li>Try to make the lockfile more concise. Could we e.g. remove redundant <code>source</code> line?</li>
</ul>
</blockquote>
<p>it could use <code>source</code> at top-level which implies that distributions without <code>source</code> are using it:</p>
<pre><code class="language-toml">version = 1
source = { registry = &quot;https://pypi.org/simple&quot; }
# or:
# source.registry = &quot;https://pypi.org/simple&quot;

[[distribution]]
name = &quot;a&quot;
version = &quot;0.1.0&quot;
sdist = { url = &quot;https://example.com&quot;, hash = &quot;sha256:37dd54208da7e1cd875388217d5e00ebd4179249f90fb72437e91a35459a0ad3&quot;, size = 0 }

[[distribution]]
name = &quot;a&quot;
version = &quot;0.1.1&quot;
sdist = { url = &quot;https://example.com&quot;, hash = &quot;sha256:37dd54208da7e1cd875388217d5e00ebd4179249f90fb72437e91a35459a0ad3&quot;, size = 0 }

[[distribution]]
name = &quot;b&quot;
version = &quot;0.1.0&quot;
source = { editable = &quot;path/to/dir&quot; }
</code></pre>
<blockquote>
<pre><code class="language-toml">sdist = { url = &quot;https://example.com&quot;, hash = &quot;sha256:37dd54208da7e1cd875388217d5e00ebd4179249f90fb72437e91a35459a0ad3&quot;, size = 0 }
</code></pre>
</blockquote>
<p>Idk, but I expected <code>checksum</code> instead of <code>hash</code>. also it used by cargo.lock</p>
<blockquote>
<ul>
<li>Rename <code>sdist</code> to <code>source-dist</code>.</li>
</ul>
</blockquote>
<p>I vote to don't change it, or <code>source-distribution</code> for consistency, or <code>source-code</code>/<code>code</code>/<code>code-distribution</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/chrisrodrigue">@chrisrodrigue</a> on 2024-07-08 20:12</div>
            <div class="timeline-body"><p>@T-256</p>
<p>This is nitpicking semantics but I think <code>hash</code> and <code>checksum</code> are often used interchangeably. I couldn't find a terrible amount of info on it but I did find this <a href="https://www.digitizationguidelines.gov/term.php?term=md5checksum">glossary definition</a> suggesting <code>hash</code> is the more correct term. I think <code>checksum</code> reflects the intended use case of the hash, but the hash can theoretically be used as more than just a checksum.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Stabilize `uv.lock` format" to "Tracking issue: Stabilize `uv.lock` format" by @konstin on 2024-07-09 11:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @konstin by @charliermarsh on 2024-07-30 15:28</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tinovyatkin">@tinovyatkin</a> on 2024-08-05 07:51</div>
            <div class="timeline-body"><p>Can we have an option to exclude <code>source</code> completely? It may include per user specific credentials in case of private registries. Something similar to NPM <a href="https://docs.npmjs.com/cli/v9/using-npm/config#omit-lockfile-registry-resolved">omit-lockfile-registry-resolved</a> option?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-08-05 14:28</div>
            <div class="timeline-body"><p>@tinovyatkin we're planning on redacting credentials from the lockfile (see https://github.com/astral-sh/uv/issues/5119), is that going to be sufficient or is there more to your use-case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tinovyatkin">@tinovyatkin</a> on 2024-08-05 16:06</div>
            <div class="timeline-body"><blockquote>
<p>@tinovyatkin we're planning on redacting credentials from the lockfile (see https://github.com/astral-sh/uv/issues/5119), is that going to be sufficient or is there more to your use-case?</p>
</blockquote>
<p>Unfortunately in our case we are using &quot;authentication proxies&quot; on developers machines (so address starts like <code>http://127.0.0.1....</code>) and some specific address on CI builds.</p>
<p>Can <code>source</code> at top level contain <em>the original source</em> where the address was obtained? Like <code>&quot;source&quot;: &quot;config&quot;</code> or <code>&quot;source&quot;: &quot;environment&quot;</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-08-09 14:03</div>
            <div class="timeline-body"><p>We have the format ready for the release.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @konstin on 2024-08-09 14:03</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:35 UTC
    </footer>
</body>
</html>
