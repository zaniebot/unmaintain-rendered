<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is there a clean way to achieve incremental builds? - astral-sh/uv #17153</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Is there a clean way to achieve incremental builds?</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/17153">#17153</a>
        opened by <a href="https://github.com/dograt">@dograt</a>
        on 2025-12-16 21:23
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/dograt">@dograt</a> on 2025-12-16 21:23</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>I've recently migrated to <code>uv</code>, and am almost a big fan of it. I have a C++ library that I'm binding with <code>scikit_build_core</code> and nanobind.</p>
<p>Before switching to nanobind, I could run <code>pip install -e .</code> repeatedly, and get incremental builds. Now with <code>uv</code>, I get a full rebuild each time. This has dramatically slowed down development speed for myself and my team. Is there a way to change this behavior?</p>
<h3>Example</h3>
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @dograt on 2025-12-16 21:23</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dograt">@dograt</a> on 2025-12-16 23:20</div>
            <div class="timeline-body"><p>Seems like enabling <code>no-build-isolation-package</code> for my package is the way to do this. Incremental builds now work with <code>uv sync --reinstall</code>, but it took some finagling.</p>
<p>The annoying thing is that I now need to duplicate my <code>[build=system] requires</code> entries in a my pyproject.toml's <code>[dependency-groups]</code>, under a <code>build</code> group. Is there a way to avoid this duplicativeness?</p>
<pre><code>[dependency-groups]
# Only add build group here to build with build isolation for incremental builds, otherwise the build dependencies
# aren't ready after uv sync
build = [
    &quot;scikit-build-core&quot;
]
...
[build-system]
requires = [
    &quot;scikit-build-core&quot;
]
build-backend = &quot;scikit_build_core.build&quot;
</code></pre>
<p>It took a while to figure this out, since the documentation doesn't mention incremental builds, and it's not immediately obvious that turning off build isolation is the way to achieve this, nor is it obvious that <code>uv</code> doesn't automatically register the dependencies from [build-system] requires, and requires the above duplication.</p>
<p>Any additional context would be appreciated</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Is there a way to achieve an incremental build with `uv pip install -e .`?" to "Is there a clean way to achieve incremental builds?" by @dograt on 2025-12-16 23:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-17 09:32</div>
            <div class="timeline-body"><p>I'm not familiar with how exactly scikit-build-core handles C++ caches, but e.g. with Rust, maturin uses a cache directory in the project root (<code>target</code>) to get incremental recompiles when building the package. It could also be that scikit-build-core uses a cache key that contains the temporary build environment, and then invalidates the build cache. Looking at the build logs or verbose logs of scikit-build-core should say more about this. These are on the side of the build backend (scikit-build-core), uv doesn't really have control here. I'd avoid running without build isolation, it has its own problem and should only be used when there are no other options.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by @konstin on 2025-12-17 09:32</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @konstin on 2025-12-17 09:32</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dograt">@dograt</a> on 2025-12-17 17:38</div>
            <div class="timeline-body"><p>Unfortunately, it seems that turning off build isolation is <a href="https://github.com/scikit-build/scikit-build-core/issues/1115">the only way to achieve this.</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../scikit-build/scikit-build-core/issues/1115.html">scikit-build/scikit-build-core#1115</a> on 2025-12-17 17:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-17 17:44</div>
            <div class="timeline-body"><p>Thanks for engaging with upstream, it's best if we discuss this together with them!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/clouds56">@clouds56</a> on 2026-01-06 07:57</div>
            <div class="timeline-body"><blockquote>
<p>The annoying thing is that I now need to duplicate my [build-system] requires entries in a my pyproject.toml's [dependency-groups], under a build group. Is there a way to avoid this duplicativeness?</p>
</blockquote>
<pre><code>[build-system]
requires = [
    &quot;scikit-build-core&quot;
]
</code></pre>
<p>At least we could implement this: when <code>--no-build-isolation</code>, we install build-system.requires in current venv?</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:30 UTC
    </footer>
</body>
</html>
