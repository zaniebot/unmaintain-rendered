<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>global pip (`--system` ...) doesn't work in GitHub Codespaces - astral-sh/uv #3417</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>global pip (<code>--system</code> ...) doesn't work in GitHub Codespaces</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3417">#3417</a>
        opened by <a href="https://github.com/Malix-Labs">@Malix-Labs</a>
        on 2024-05-07 13:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Malix-Labs">@Malix-Labs</a></div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<h2>Bug</h2>
<p>global pip (<code>--system</code> ...) doesn't work in GitHub Codespaces</p>
<h2>System</h2>
<ul>
<li>VSCode:
Version: 1.89.0
Commit: b58957e67ee1e712cebf466b995adf4c5307b2bd
Date: 2024-05-01T02:15:54.732Z
Browser: Mozilla/5.0 (X11; CrOS x86_64 14541.0.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36</li>
<li>uv 0.1.39</li>
</ul>
<h2>Reproduce</h2>
<ol>
<li>Open a GitHub Codespace<ul>
<li><code>.devcontainer/devconainer.json</code>:<pre><code class="language-json">{
    &quot;name&quot;: &quot;Python 3 on Debian 12&quot;,
    &quot;image&quot;: &quot;mcr.microsoft.com/devcontainers/python:1-3-bookworm&quot;,
    &quot;features&quot;: {
    	&quot;ghcr.io/va-h/devcontainers-features/uv:1&quot;: {}
    }
}
</code></pre>
</li>
</ul>
</li>
<li>Terminal input: <code>uv pip install prettytable --system</code>
<em>Note: <code>prettytable</code> is just an exemple</em></li>
</ol>
<h2>Logs</h2>
<pre><code class="language-log">@Malix-off ➜ /workspaces/Fork (master) $ uv pip install prettytable --system
Resolved 2 packages in 2ms
error: Failed to install: prettytable-3.10.0-py3-none-any.http.whl (prettytable==3.10.0)
  Caused by: failed to create directory `/usr/local/lib/python3.12/site-packages/prettytable-3.10.0.dist-info`
  Caused by: Permission denied (os error 13)
</code></pre>
<p><em>Note: <code>prettytable</code> is just an exemple</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-05-07 13:13</div>
            <div class="timeline-body"><p>Hi! It looks you don't have the necessary permissions to write to the system packages?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-05-07 13:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-07 13:15</div>
            <div class="timeline-body"><p>Probably works in pip because pip falls back to installing with <code>--user</code> if the site-packages directory isn't writeable.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Malix-Labs">@Malix-Labs</a> on 2024-05-07 13:19</div>
            <div class="timeline-body"><blockquote>
<p>Hi! It looks you don't have the necessary permissions to write to the system packages?</p>
</blockquote>
<p>Indeed, probably like that in GitHub Codespaces, you're right.</p>
<blockquote>
<p>--user</p>
</blockquote>
<p>Is that an equivalent for sync?</p>
<pre><code class="language-log">@Malix-off ➜ /workspaces/Fork (master) $ uv pip sync requirements.txt --user
error: pip-sync's `--user` is unsupported.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-07 13:22</div>
            <div class="timeline-body"><p>No, we don't support <code>--user</code> right now, since it can generally be replaced by a virtual environment. There are some open issues tracking it but we haven't committed to adding it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Malix-Labs">@Malix-Labs</a> on 2024-05-07 13:24</div>
            <div class="timeline-body"><p>So what would be the workaround to <code>pip sync</code> without virtual environment (devcontainer is a good example)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-07 13:34</div>
            <div class="timeline-body"><p>I think you basically <em>need</em> to use a virtualenv in that case with uv right now. I believe you <em>can</em> use virtual environments in devcontainers? Like it is possible, right?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/blueraft">@blueraft</a> on 2024-05-07 13:41</div>
            <div class="timeline-body"><p>Running the <code>devcontainer</code> as the root user works for me.</p>
<pre><code class="language-json"> {
 	&quot;name&quot;: &quot;Python 3 on Debian 12&quot;,
 	&quot;image&quot;: &quot;mcr.microsoft.com/devcontainers/python:1-3-bookworm&quot;,
 	&quot;features&quot;: {
 		&quot;ghcr.io/va-h/devcontainers-features/uv:1&quot;: {}
        },
       	&quot;remoteUser&quot;: &quot;root&quot;
 }
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Malix-Labs">@Malix-Labs</a> on 2024-05-07 14:27</div>
            <div class="timeline-body"><blockquote>
<p>I think you basically <em>need</em> to use a virtualenv in that case with uv right now. I believe you <em>can</em> use virtual environments in devcontainers? Like it is possible, right?</p>
</blockquote>
<p>Yep, currently you need a venv to do that, and yep, it is definitely possible, but adds an unnecessary virtual environment bloat (since we're already in a containerized environment)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Malix-Labs">@Malix-Labs</a> on 2024-05-07 14:51</div>
            <div class="timeline-body"><blockquote>
<p>No, we don't support <code>--user</code> right now, since it can generally be replaced by a virtual environment. There are some open issues tracking it but we haven't committed to adding it.</p>
</blockquote>
<p>I didn't find any issue about it containing &quot;user&quot; &quot;-u&quot; &quot;--user&quot;, do you know if it has been deleted?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-05-07 14:52</div>
            <div class="timeline-body"><p>https://github.com/astral-sh/uv/issues/2077</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Malix-Labs">@Malix-Labs</a> on 2024-05-07 15:09</div>
            <div class="timeline-body"><p>GitHub Codespaces probably doesn't let you access to the devcontainer system (immutability)</p>
<p>In the case of devcontainers, you probably indeed would want to use the <code>--user</code> flag (#2077)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @Malix-Labs on 2024-05-07 15:09</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:24:50 UTC
    </footer>
</body>
</html>
