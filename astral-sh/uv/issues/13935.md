```yaml
number: 13935
title: "`uv python pin` crashes trying to inspect another Python"
type: issue
state: closed
author: geofft
labels:
  - bug
assignees: []
created_at: 2025-06-09T21:53:07Z
updated_at: 2025-06-13T13:50:45Z
url: https://github.com/astral-sh/uv/issues/13935
synced_at: 2026-01-10T01:57:31Z
```

# `uv python pin` crashes trying to inspect another Python

---

_Issue opened by @geofft on 2025-06-09 21:53_

[This question in #help on Discord](https://discord.com/channels/1039017663004942429/1381692679439519846) is fundamentally about #13288, that we misdetect (32-bit) arm vs. armhf and install the wrong Python variant. But as part of that question I asked,
> are you able to work around it with `uv python pin` (maybe `--global`) or something?

to which the reply was
> nope. It's trying to test the non-hf version before it even pins

```
$ uv python pin cpython-3.13.4-linux-armv7-gnueabihf
error: Failed to inspect Python interpreter from managed installations at `/home/frank/.local/share/uv/python/cpython-3.13.4-linux-armv7-gnueabi/bin/python3.13`
  Caused by: Querying Python at `/home/frank/.local/share/uv/python/cpython-3.13.4-linux-armv7-gnueabi/bin/python3.13` failed with exit status signal: 8 (SIGFPE)
```

which also seems like a bug.

---

_Comment by @zanieb on 2025-06-09 21:58_

This is because we attempt to find a Python installation matching the request after pinning

https://github.com/astral-sh/uv/blob/7dd564d3d09668488c179b02bfe446754e58a5ea/crates/uv/src/commands/python/pin.rs#L101-L114

We only query this interpreter because we fail to detect the proper architecture? Or it'd be filtered from the list.

Regardless, we should be able to eagerly avoid querying this interpreter here because the key clearly doesn't match the request?

---

_Label `bug` added by @zanieb on 2025-06-09 21:59_

---

_Referenced in [astral-sh/uv#13936](../../astral-sh/uv/pulls/13936.md) on 2025-06-09 22:44_

---

_Comment by @kageurufu on 2025-06-09 23:44_

<details><summary>If it helps, with RUST_LOG=trace</summary>

```
frank@ganymede:~ $ RUST_LOG=trace uv python pin cpython-3.13.4-linux-armv7-gnueabihf
DEBUG uv 0.7.12
DEBUG Failed to discover virtual project: No `pyproject.toml` found in current directory or any parent directory
DEBUG No Python version file found in ancestors of working directory: /home/frank
DEBUG Searching for cpython-3.13.4-linux-armv7-gnueabihf in managed installations or search path
DEBUG Searching for managed installations at `.local/share/uv/python`
TRACE Found `ld` path: /lib/ld-linux-armhf.so.3
TRACE stdout output from `ld`: ""
TRACE stderr output from `ld`: "/lib/ld-linux-armhf.so.3: missing program name\nTry '/lib/ld-linux-armhf.so.3 --help' for more information.\n"
TRACE Tried to find musl version by running `"/lib/ld-linux-armhf.so.3"`, but failed: Could not find musl version in output of: `/lib/ld-linux-armhf.so.3`
TRACE Tried to find libc version from possible symlink at "/lib/ld-linux-armhf.so.3", but failed: Failed to find glibc version in the filename of linker: `arm-linux-gnueabihf/ld-linux-armhf.so.3`
TRACE stdout output from `ld.so --version`: "ld.so (Debian GLIBC 2.36-9+rpt2+deb12u10) stable release version 2.36.\nCopyright (C) 2022 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.\nThere is NO warranty; not even for MERCHANTABILITY or FITNESS FOR A\nPARTICULAR PURPOSE.\n"
TRACE Found manylinux 2.36 in stdout of ld.so version
TRACE Searching PATH for executables: cpython3.13.4, cpython3.13, cpython3, cpython, python3.13.4, python3.13, python3, python
TRACE Checking `PATH` directory for interpreters: /home/frank/.local/bin
TRACE Checking `PATH` directory for interpreters: /home/frank/.cargo/bin
TRACE Checking `PATH` directory for interpreters: /usr/local/sbin
TRACE Checking `PATH` directory for interpreters: /usr/local/bin
TRACE Checking `PATH` directory for interpreters: /usr/sbin
TRACE Checking `PATH` directory for interpreters: /usr/bin
TRACE Found possible Python executable: /usr/bin/python3
TRACE Cached interpreter info for Python 3.11.2, skipping probing: /usr/bin/python3
DEBUG Found `cpython-3.11.2-linux-armv7-gnu` at `/usr/bin/python3` (first executable in the search path)
DEBUG Skipping interpreter at `/usr/bin/python3` from first executable in the search path: does not satisfy request `3.13.4`
TRACE Found possible Python executable: /usr/bin/python
TRACE Querying interpreter executable at /usr/bin/python
DEBUG Failed to inspect Python interpreter from search path at `/usr/bin/python`
DEBUG Skipping bad interpreter at /usr/bin/python from search path: Python executable does not support `-I` flag. Please use Python 3.8 or newer.
TRACE Checking `PATH` directory for interpreters: /sbin
TRACE Skipping already seen directory: /sbin
TRACE Checking `PATH` directory for interpreters: /bin
TRACE Skipping already seen directory: /bin
TRACE Checking `PATH` directory for interpreters: /usr/local/games
TRACE Checking `PATH` directory for interpreters: /usr/games
error: Failed to inspect Python interpreter from search path at `/usr/bin/python`
  Caused by: Can't use Python at `/usr/bin/python`
  Caused by: Python executable does not support `-I` flag. Please use Python 3.8 or newer.
```

</details>

---

_Referenced in [astral-sh/uv#13944](../../astral-sh/uv/pulls/13944.md) on 2025-06-10 12:36_

---

_Closed by @zanieb on 2025-06-13 13:50_

---
