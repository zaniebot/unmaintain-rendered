<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vscode trying but failing to use my uv venv - astral-sh/uv #8706</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>vscode trying but failing to use my uv venv</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/8706">#8706</a>
        opened by <a href="https://github.com/MaxPowerWasTaken">@MaxPowerWasTaken</a>
        on 2024-10-30 18:55
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/MaxPowerWasTaken">@MaxPowerWasTaken</a> on 2024-10-30 18:55</div>
            <div class="timeline-body"><p>I'm pretty sure this is a bug with vscode's integrated terminal, not uv, but after getting no answers from questions posted <a href="https://stackoverflow.com/questions/79037945/vscode-trying-but-failing-to-use-my-uv-venv">at stack overflow</a> and on <a href="https://github.com/microsoft/vscode-python/issues/24780">vscode's github</a> a month ago, figured I'd take a flier on seeing if anyone on uv's side has any advice? I'd love to use uv but this is currently my blocker:</p>
<p>I have the following code in my <code>main.py</code>:</p>
<pre><code>import pymupdf

print(f&quot;pymupdf version is: {pymupdf.__version__}&quot;)
</code></pre>
<p>I can create a python3.12 environment with pymupdf installed and run it from my (kubuntu24.04) shell without issues, with the following commands (showing shell log after each &gt;command):</p>
<pre><code>&gt;uv --version
uv 0.4.17

&gt;uv init --no-pin-python
Initialized project `askliz2`

&gt;uv venv --python 3.12.6 
Using CPython 3.12.6
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate

&gt;source .venv/bin/activate 
askliz2&gt;uv add pymupdf 
Resolved 3 packages in 281ms
Installed 2 packages in 11ms
 + pymupdf==1.24.10
 + pymupdfb==1.24.10

askliz2&gt;python main.py
pymupdf version is: 1.24.10
</code></pre>
<p>However, when I launch vscode from this folder with my uv venv activated with code ., and then highlight the line import pymupdf and hit shift+enter to run it in the integrated terminal, I get the following vscode integrated terminal output:</p>
<pre><code>/home/max/askliz2/.venv/bin/python 
Python 3.12.6 (main, Sep  9 2024, 22:11:19) [Clang 18.1.8 ] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
]633;E;exit()]633;D;0]633;A&gt;&gt;&gt; ]633;B]633;Cimport pymupdf
]633;E;import pymupdf]633;D;0]633;A&gt;&gt;&gt; ]633;B]633;C
</code></pre>
<p>Things I've tried so far:</p>
<ul>
<li>upgrading uv version</li>
<li>hosing and re-installing vscode</li>
<li>installing different python versions (e.g. 3.12.0, 3.12.6, 3.9)</li>
<li>right-clicking to <code>clear terminal</code> and <code>kill terminal</code> and then trying again</li>
</ul>
<p>When I use the command pallet to select python interpreter, it shows me it's trying to use Python 3.12.6('.venv') ./.venv/bin/python, as it should be, and as the vscode integrated logs above already indicate.</p>
<p>VS Code version: Code 1.93.1 (38c31bc77e0dd6ae88a4e9cc93428cc27a56ba40, 2024-09-11T17:20:05.685Z)
OS version: Linux x64 6.10.6-061006-generic</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-30 19:55</div>
            <div class="timeline-body"><p>Hm I can't reproduce this, i.e., with Run Python -&gt; Run selected line</p>
<pre><code>‚ùØ /Users/zb/workspace/uv/example/.venv/bin/python
Python 3.11.10 (main, Sep  7 2024, 01:03:31) [Clang 15.0.0 (clang-1500.3.9.4)] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import subprocess
&gt;&gt;&gt; 
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-30 19:56</div>
            <div class="timeline-body"><p>What shell are you using? Is it any different if you create a virtual environment without uv?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @zanieb on 2024-10-30 19:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MaxPowerWasTaken">@MaxPowerWasTaken</a> on 2024-10-30 20:15</div>
            <div class="timeline-body"><p>thanks for the quick response @zanieb! interesting you can't reproduce. to answer your two questions:</p>
<ol>
<li>I used warp and konsole (kubuntu built-in terminal) shells to create the venv with uv and then launch vscode (<code>code .</code>) from.</li>
<li>yeah vscode/run-selection worked as expected when I created my venv with <code>python -m venv myenv</code>, from both konsole and warp shells.</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-30 20:21</div>
            <div class="timeline-body"><p>Are you using the system or managed Python versions for your environments? Do you see a difference between those? (You can toggle with <code>uv venv --python-preference &lt;only-managed | only-system&gt;</code>)</p>
<p>What does</p>
<pre><code>echo $SHELL
echo $TERM
</code></pre>
<p>show?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-30 20:24</div>
            <div class="timeline-body"><p>Have you tried toggling <code>Terminal ‚Ä∫ Integrated ‚Ä∫ Shell Integration: Decorations Enabled</code> or <code>Terminal ‚Ä∫ Integrated ‚Ä∫ Shell Integration: Enabled</code>? Do you have any custom terminal settings in your <code>settings.json</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MaxPowerWasTaken">@MaxPowerWasTaken</a> on 2024-11-04 03:00</div>
            <div class="timeline-body"><p>Hi @zanieb , sorry for the delay in replying. I started up a fresh new project/folder and am still getting this issue, so want to document the exact set of commands I ran before jumping into vscode and hitting this issue again. then I'll post the output to the commands you asked for...</p>
<pre><code>mkdir askliz_frontend
cd askliz_frontend
uv init
</code></pre>
<p>Then added some packages:</p>
<pre><code> uv add google-generativeai==0.8.3
 uv add streamlit==1.39.0
uv add lancedb==0.15.0
uv tool install ruff
</code></pre>
<p>then seeing with <code>ls -a</code>,  that a <code>.venv</code> has already been created, I ran <code>source .venv/bin/activate</code> and <code>code .</code> to hop into vscode, then I highlighted:</p>
<pre><code>def main():
    print(&quot;Hello from askliz-frontend!&quot;)
</code></pre>
<p>...which came populated in <code>hello.py</code>, hit shift+enter to run it in the integrated terminal, and saw the same terminal output as before:</p>
<pre><code> ~/askliz_frontend ÓÇ∞ main ?6 ÓÇ∞ /home/max/askliz_frontend/.venv/bin/python                                     ÓÇ≤ ‚úî ÓÇ≤ askliz_frontend Py ÓÇ≤ 20:14:49 
Python 3.12.6 (main, Sep  9 2024, 22:11:19) [Clang 18.1.8 ] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
]633;E;exit()]633;D;0]633;A&gt;&gt;&gt; ]633;B]633;Cdef main():
...     print(&quot;Hello from askliz-frontend!&quot;)
... 
</code></pre>
<p>...now to answer your questions:</p>
<p>What does <code>echo $SHELL</code> show?</p>
<pre><code>/usr/bin/zsh
</code></pre>
<p>What does <code>echo $TERM</code> show?</p>
<pre><code>xterm-256color
</code></pre>
<p>Any shell-integration related settings in my settings.json? I see these:</p>
<pre><code>    &quot;terminal.integrated.shellIntegration.enabled&quot;: false,
    &quot;python.terminal.shellIntegration.enabled&quot;: true
</code></pre>
<p>...I then tried reversing the first from <code>false</code> to <code>true</code> and restarting vscode, but still got the same weird integrated-terminal behavior as before. And then I changed the second from <code>true</code> to <code>false</code> and restarted vscode again, and again still observed the weird behavior.</p>
<p>...On <code>Terminal ‚Ä∫ Integrated ‚Ä∫ Shell Integration: Decorations Enabled</code>, I'm not quite sure what you mean. I don't have anything related to that in my custom/user settings.json. When I search for 'decorations' in my default settings.json, here's the entry I see that I think is most relevant to what you're asking about:</p>
<pre><code>	// When shell integration is enabled, adds a decoration for each command.
	//  - both: Show decorations in the gutter (left) and overview ruler (right)
	//  - gutter: Show gutter decorations to the left of the terminal
	//  - overviewRuler: Show overview ruler decorations to the right of the terminal
	//  - never: Do not show decorations
	&quot;terminal.integrated.shellIntegration.decorationsEnabled&quot;: &quot;both&quot;,
</code></pre>
<p>Thanks again for looking into this for me!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/RedHeartSecretMan">@RedHeartSecretMan</a> on 2024-12-27 01:54</div>
            <div class="timeline-body"><p>I had the same problem migrating from the conda and pip habit. Setting up python plug-ins in vs code The following two configurations may work:</p>
<p>Python: Venv Path</p>
<p>Python: Venv Folders</p>
<p>You can try.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sullicsullic">@sullicsullic</a> on 2025-01-02 06:09</div>
            <div class="timeline-body"><blockquote>
<p>I had the same problem migrating from the conda and pip habit. Setting up python plug-ins in vs code The following two configurations may work:</p>
<p>Python: Venv Path</p>
<p>Python: Venv Folders</p>
<p>You can try.</p>
</blockquote>
<p>yes, it works.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-02 08:56</div>
            <div class="timeline-body"><p>Sorry I'm not sure there's anything more we can do here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MaxPowerWasTaken">@MaxPowerWasTaken</a> on 2025-01-02 15:46</div>
            <div class="timeline-body"><p>@zanieb no worries, appreciate the effort</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-01-02 17:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AdrKacz">@AdrKacz</a> on 2025-02-16 12:14</div>
            <div class="timeline-body"><blockquote>
<p>I had the same problem migrating from the conda and pip habit. Setting up python plug-ins in vs code The following two configurations may work:</p>
<p>Python: Venv Path</p>
<p>Python: Venv Folders</p>
<p>You can try.</p>
</blockquote>
<p>@RedHeartSecretMan where do you set this? I'm facing the same issue as @MaxPowerWasTaken. Thank you üëç</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/PacoBahena">@PacoBahena</a> on 2025-04-02 20:03</div>
            <div class="timeline-body"><p>when you select the interpreter, in vscode make sure you pass down the interpreter path manually, because if passing via ui (finder/windows explorer) vscode will set the symlink to uv system python causing the link to fail.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/muhammadyaseen">@muhammadyaseen</a> on 2025-04-07 14:22</div>
            <div class="timeline-body"><blockquote>
<p>when you select the interpreter, in vscode make sure you pass down the interpreter path manually, because if passing via ui (finder/windows explorer) vscode will set the symlink to uv system python causing the link to fail.</p>
</blockquote>
<p>This just saved me after 30 mins of fiddling with different settings. Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/marty0678">@marty0678</a> on 2025-04-11 03:00</div>
            <div class="timeline-body"><p>Tried migrating to uv today and got the same thing. Even setting the path manually, I can't get VsCode to activate it. Will just go back to poetry for now, unfortunately.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mustiem">@mustiem</a> on 2025-07-14 19:21</div>
            <div class="timeline-body"><p>@marty0678 this is how I solved it.</p>
<ol>
<li>Opened my .venv folder in vscode, right clicked the <code>bin</code> folder and pressed <code>Copy Path</code>.</li>
<li>Cmd + Shift + P - python: select interpreter</li>
<li>Enter Interpreter path</li>
<li>Paste path and hit enter</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/9637.html">astral-sh/uv#9637</a> on 2025-12-04 21:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/ajstair">@ajstair</a> on 2025-12-04 23:06</div>
            <div class="timeline-body"><blockquote>
<p><a href="https://github.com/marty0678">@marty0678</a> this is how I solved it.</p>
<pre><code>1. Opened my .venv folder in vscode, right clicked the `bin` folder and pressed `Copy Path`.

2. Cmd + Shift + P - python: select interpreter

3. Enter Interpreter path

4. Paste path and hit enter</code></pre>
</blockquote>
<p>As far as I can tell, this solution does not work for UV users with a monorepo setup.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:20 UTC
    </footer>
</body>
</html>
