<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>inconsistent behaviour of uv export with --no-emit-workspace option for the root project - astral-sh/uv #7241</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>inconsistent behaviour of uv export with --no-emit-workspace option for the root project</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7241">#7241</a>
        opened by <a href="https://github.com/lucidfrontier45">@lucidfrontier45</a>
        on 2024-09-10 02:54
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/lucidfrontier45">@lucidfrontier45</a> on 2024-09-10 02:54</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<ul>
<li>uv platform: linux gnu</li>
<li>uv version: 0.4.8</li>
<li>uv command: <code>uv export --no-emit-workspace</code></li>
</ul>
<p>https://docs.astral.sh/uv/reference/cli/#uv-export</p>
<pre><code>--no-emit-workspace
Do not emit any workspace members, including the root project.

By default, all workspace members and their dependencies are included in the exported requirements file, with all of their dependencies. The --no-emit-workspace option allows exclusion of all the workspace members while retaining their dependencies.
</code></pre>
<p>From this documentation I expected that passing <code>--no-emit-workspace</code> will also prevent emitting <code>-e .</code> to the requirements.txt. For a project with sub modules I confirmed that</p>
<pre><code>-e .
-e sub1
-e sub2
...
</code></pre>
<p>disappeared.</p>
<p>However if I use this option to a project that has no sub modules, i.e. no entries of <code>tool.uv.workspace.members</code>, <code>-e .</code> is still emitted. Isn't <code>-e .</code> supposed to be removed in this case?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-10 03:27</div>
            <div class="timeline-body"><p>Yes. Can you provide a full reproduction though? I.e., a file that I can use to reproduce this, or a series of commands to run?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/lucidfrontier45">@lucidfrontier45</a> on 2024-09-10 04:25</div>
            <div class="timeline-body"><p>@charliermarsh</p>
<p>Thank you for reply. Just type those commands and you can see <code>-e .</code> is included in the exported output.</p>
<pre><code class="language-sh">uv init --lib new_project
cd new_project
uv export --no-emit-workspace
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-09-10 11:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-09-10 11:57</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/7254.html">astral-sh/uv#7254</a> on 2024-09-10 13:20</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-09-10 13:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:45 UTC
    </footer>
</body>
</html>
