<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What is the correct way to run a script with declared dependencies alongside a module? - astral-sh/uv #13169</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>What is the correct way to run a script with declared dependencies alongside a module?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/13169">#13169</a>
        opened by <a href="https://github.com/TuringTrails">@TuringTrails</a>
        on 2025-04-28 08:41
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/TuringTrails">@TuringTrails</a></div>
            <div class="timeline-body"><h3>Question</h3>
<p>I’m trying to debug a Python script using pdb, where the script declares its dependencies internally (e.g., via a comment block in toml). However, when I run it with:
<code>uv run -m pdb myscript.py</code>
the script fails on the import statements — it seems the dependencies are not being resolved.</p>
<h2>Alternatives I’ve considered</h2>
<ol>
<li>Running:
<code>uv run --with 'dependency1 dependency2' -m pdb myscript.py</code>
This works, but becomes tedious when there are many dependencies to list manually.</li>
<li>Adding import pdb; pdb.set_trace() in the code. This also works, but I’m looking for a way to use pdb without modifying the script itself.</li>
</ol>
<p>Is there a recommended way to load modules like pdb while still allowing uv to resolve the dependencies defined in the script?</p>
<p>Thank you!</p>
<h3>Platform</h3>
<p>NixOS 24.11.20250412.26d499f (Vicuna) - Linux 6.6.87 x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.4.30</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @TuringTrails on 2025-04-28 08:41</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-04-28 13:29</div>
            <div class="timeline-body"><p>You can use e.g. <code>uv sync --script script.py</code> and then run <code>python -m pdb script.py</code>. uv can't see beyond the <code>-m pdb</code> and therefore can't tell that this is script from which the dependencies need to installed, so <code>uv run -m pdb</code> doesn't work.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/TuringTrails">@TuringTrails</a> on 2025-05-01 13:04</div>
            <div class="timeline-body"><p>Thanks</p>
<p>However <code>uv sync --script script.py</code> is not working for me. I get the error:
<code>error: unexpected argument '--script' found</code></p>
<p>I have multiple scripts in the same folder, as such i did not explore this line of thinking.</p>
<p>are there any other recommended ways.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-05-02 07:27</div>
            <div class="timeline-body"><p>You need to update your uv version for that, the current version is 0.7.2.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-05-04 12:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:31:07 UTC
    </footer>
</body>
</html>
