```yaml
number: 7025
title: uvx (and uv) considerably slower in windows command prompt but fine in powershell
type: issue
state: closed
author: geophpherie
labels:
  - windows
assignees: []
created_at: 2024-09-04T14:47:31Z
updated_at: 2024-09-11T15:50:28Z
url: https://github.com/astral-sh/uv/issues/7025
synced_at: 2026-01-10T01:57:15Z
```

# uvx (and uv) considerably slower in windows command prompt but fine in powershell

---

_Issue opened by @geophpherie on 2024-09-04 14:47_

Running `uvx jupyter` in windows command prompt really chokes up for me, the progress bars start freezing up and progress becomes unclear. But in powershell everything runs with reasonable speed. This is using 0.4.4. 

I settled on this as a MRE, but I first came across this when using `uv run` with a script that launches `jupyter`. Was seeing terrible performance in command prompt, but fine in powershell, and fine on a mac on the same wifi. 

This snippet was my ultimate goal, to be run with `uv run`.
```
# /// script
# requires-python = ">=3.12"
# dependencies = [
#     "jupyter",
#     "pandas",
# ]
# ///
import subprocess
from pathlib import Path

subprocess.run([
    "jupyter",
    "notebook",
])
```

Originally came to the GitHub issues through (https://github.com/astral-sh/uv/issues/5073) but I think maybe it's not quite similar enough. Any thoughts or tips would be much appreciated! 


![export](https://github.com/user-attachments/assets/6ced3616-9e8b-4498-a165-33fd2b49cf38)






---

_Comment by @zanieb on 2024-09-04 14:48_

Can you try using `--no-progress`? Maybe it's a rendering issue.

---

_Comment by @geophpherie on 2024-09-04 14:56_

Thanks for the quick response!

Running `uvx --no-progress jupyter` seems to result in the same thing.

In CMD it takes a long time, haven't got it to complete yet, but in PS it finishes up quick. So maybe same issue still there?

`Installed 96 packages in 1.90s`

---

_Comment by @geophpherie on 2024-09-04 15:07_

So it ends up as a network timeout - but again, in PS and on MAC on same wifi there's no issue with timing out. Idk that `babel` itself is a problem or just caught in the crossfire here.

```
error: Failed to prepare distributions
  Caused by: Failed to fetch wheel: babel==2.16.0
  Caused by: Failed to extract archive
  Caused by: Failed to download distribution due to network timeout. Try increasing UV_HTTP_TIMEOUT (current value: 30s).
```

---

_Comment by @zanieb on 2024-09-04 15:07_

Very weird â€” sorry I have no idea why Windows behavior would be different across these two shells.

---

_Label `windows` added by @zanieb on 2024-09-04 15:07_

---

_Comment by @geophpherie on 2024-09-04 17:17_

Well so if i launch cmd.exe in powershell it works as expected ... idk what's going on there but doesn't seem like a uv problem that I can tell. Gonna close this.

thank you for the time!

---

_Closed by @geophpherie on 2024-09-04 17:17_

---

_Comment by @geophpherie on 2024-09-05 14:17_

FWIW I've now learned that running `uvx --no-cache jupyter notebook` makes it run just as snappy in CMD as in PS.

---

_Reopened by @geophpherie on 2024-09-05 14:17_

---

_Closed by @geophpherie on 2024-09-05 14:17_

---

_Comment by @geophpherie on 2024-09-11 15:50_

Sort of wondering if there's something that's slowing down cache lookups for some reason. Some of these take up to 10s - i'm guessing it shouldn't take near that long. 

![image](https://github.com/user-attachments/assets/f1dd4ad2-9617-4272-a659-6196c2876234)


---
