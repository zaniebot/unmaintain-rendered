<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unexpected index usage when package exists on multiple indices - astral-sh/uv #12444</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>unexpected index usage when package exists on multiple indices</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/12444">#12444</a>
        opened by <a href="https://github.com/hutch3232">@hutch3232</a>
        on 2025-03-24 17:56
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/hutch3232">@hutch3232</a> on 2025-03-24 17:56</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Hello - first of all, thanks for the incredible work you all have done. <code>uv</code> is amazing.</p>
<p>I'm using <code>uv</code> 0.6.9.</p>
<p>I use artifactory for my python package indices. I use <code>.netrc</code> for authentication (I don't think I have any issues there).</p>
<p>In my <code>~/.config/uv/uv.toml</code> I specify: <code>index-url</code>, <code>extra-index-url</code>, and <code>python-install-mirror</code>. <code>index-url</code> is the artifactory mirror of pypi. <code>extra-index-url</code> just has one index which is kind of an &quot;in-house&quot; python package repo.</p>
<p>For some reason, someone uploaded <code>requests</code> and <code>urllib3</code> to our in-house package repo. I noticed that <code>uv</code> really wants to use the <code>requests</code> and <code>urllib3</code> package from my <code>extra-index-url</code>. I would have guessed it would default to <code>index-url</code> which seems to me more like a primary index - this is what I would like.</p>
<p>Technically, I can use the suggested <code>--index-strategy</code> option to be <code>unsafe-best-match</code> but then I have to use that all the time and/or configure it in many projects.</p>
<p>I also tried to &quot;yank&quot; the package (since the user just uploaded one version of each) - I hoped that would encourage <code>uv</code> to ignore that index (since there were no non-yanked packages). That didn't work.</p>
<p>I could delete these packages, but I think it would impact people who already added them to their lock files.</p>
<p>Seems related to #9008</p>
<h3>Platform</h3>
<p>Ubuntu 20.04 amd 64bit</p>
<h3>Version</h3>
<p>0.6.9</p>
<h3>Python version</h3>
<p>Python 3.9.18 (system installed)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @hutch3232 on 2025-03-24 17:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/hutch3232">@hutch3232</a> on 2025-03-24 18:17</div>
            <div class="timeline-body"><p>Nevermind - this is sufficiently documented here: https://docs.astral.sh/uv/configuration/indexes/</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @hutch3232 on 2025-03-24 18:17</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:03 UTC
    </footer>
</body>
</html>
