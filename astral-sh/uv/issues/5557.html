<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support older package installation - astral-sh/uv #5557</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support older package installation</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/5557">#5557</a>
        opened by <a href="https://github.com/mayuresh-quartic">@mayuresh-quartic</a>
        on 2024-07-29 12:26
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mayuresh-quartic">@mayuresh-quartic</a> on 2024-07-29 12:26</div>
            <div class="timeline-body"><p>uv version: 0.2.30</p>
<p>UV pip compile fails for installation of old python packages</p>
<p>Error:
<img width="597" alt="image" src="https://github.com/user-attachments/assets/e9725d5d-ceb6-4761-bec4-246216e43a1d"></p>
<p>We recently changed the env variable NO_BUILD_ISOLATION to true and from there we saw this issue
When we were not using the env var it was working as expected</p>
<p>Note that the env was added due to latest breaking setuptools issue (https://github.com/pypa/setuptools/issues/4519)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-29 14:52</div>
            <div class="timeline-body"><p>It seems that that distribution is broken, in that it reports to be v0.2.0 but the metadata itself lists version v0.0.0. Where are you installing it from?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sevdog">@sevdog</a> on 2024-07-29 15:02</div>
            <div class="timeline-body"><p>I have a similar error with <a href="https://pypi.org/project/django-push-notifications/"><code>django-push-notifications</code></a></p>
<pre><code>&gt; [webserver compiler 7/7] RUN uv pip install -p /opt/venv/bin/python --compile --no-cache-dir -r /requirements.txt 'setuptools==71.1.0' --no-build-isolation:                
3.430   × No solution found when resolving dependencies:                                                                                                                  
3.430   ╰─▶ Because django-push-notifications==3.1.0 has inconsistent metadata and                                                                                        
3.430       you require django-push-notifications==3.1.0, we can conclude that the                                                                                        
3.430       requirements are unsatisfiable.                                                                                                                               
3.430                                                                                                                                                                     
3.430       hint: Metadata for django-push-notifications==3.1.0 was inconsistent:                                                                                         
3.430         Package metadata version `0.0.0` does not match given version `3.1.0`  
</code></pre>
<p>I started getting this error only after adding the <code>--no-build-isolation</code> flag while fighting with setuptools 72, without that flag the istall did not give any error.</p>
<p>Now that setuptools 72 has been yanked I have removed that flag and it is working again.</p>
<p>I do not have any local cache and I am not providing any custom URL for that repository.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mayuresh-quartic">@mayuresh-quartic</a> on 2024-07-30 04:16</div>
            <div class="timeline-body"><p>Thanks for the reply @charliermarsh</p>
<p>I am installing aloe from official pypi repo
https://pypi.org/project/aloe/</p>
<p>There can be scenarios with same issue (0.0.0 version in metatdata file) but pypi listed version is something else</p>
<p>Can this be handled?
As @sevdog mentioned this is after adding the <code>--no-build-isolation</code> flag
If we don't provide this flag <code>uv pip compile</code> and install works fine</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mayuresh-quartic">@mayuresh-quartic</a> on 2024-07-30 08:13</div>
            <div class="timeline-body"><p>Also one suggestion</p>
<p>While installing uv can it take setuptools, wheel and pip from envs?
Like UV_PIP_VERSION, UV_SETUPTOOLS_VERSION (by default it can be latest)</p>
<p>With this user will have more flexibility over choosing the required versions instead of using latest</p>
<p>And this would have also not affected the setuptools issue that we faced yesterday</p>
<p>References:
https://github.com/pypa/setuptools/issues/4519#issuecomment-2256189683
https://github.com/astral-sh/uv/blob/51b7e9bff1cbf0c8ad18c5447f808176e902db22/crates/uv/src/commands/venv.rs#L278</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-30 17:22</div>
            <div class="timeline-body"><p><code>uv pip install aloe==0.2.0 -n</code> is working as expected for me. Any way I can reproduce?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sevdog">@sevdog</a> on 2024-07-31 06:16</div>
            <div class="timeline-body"><p>Maybe the problem was related to <code>setuptools==72.0.0</code>, which was yanked.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mayuresh-quartic">@mayuresh-quartic</a> on 2024-07-31 17:13</div>
            <div class="timeline-body"><p>Yes
I am also able to install it now</p>
<p>Maybe if we pick the suggestion this ticket issue will also be resolved
https://github.com/astral-sh/uv/issues/5557#issuecomment-2257745704</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mayuresh-quartic">@mayuresh-quartic</a> on 2024-08-12 07:12</div>
            <div class="timeline-body"><p>@charliermarsh
Tagging you if you missed this</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/maggiemoreno-synth">@maggiemoreno-synth</a> on 2025-03-11 17:32</div>
            <div class="timeline-body"><p>Following. I'm having the same issue. Logs from building my docker container:</p>
<pre><code>#12 [temporal-worker prddeps 8/9] RUN uv pip install --no-cache-dir --target /site-packages  --no-build-isolation pymediainfo==6.1.0
#12 0.095 Using CPython 3.11.11 interpreter at: /usr/local/bin/python
#12 0.452 Resolved 1 package in 356ms
#12 0.622    Building pymediainfo==6.1.0
#12 0.922   × Failed to download and build `pymediainfo==6.1.0`
#12 0.922   ╰─▶ Package metadata version `0.0.0` does not match given version `6.1.0`
#12 ERROR: process &quot;/bin/sh -c uv pip install --no-cache-dir --target ${PACKAGE_FOLDER}  --no-build-isolation pymediainfo==6.1.0&quot; did not complete successfully: exit code: 1
------
</code></pre>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:31 UTC
    </footer>
</body>
</html>
