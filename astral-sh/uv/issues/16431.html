<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Some python_find:: tests don’t find system interpreters, require network - astral-sh/uv #16431</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Some python_find:: tests don’t find system interpreters, require network</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16431">#16431</a>
        opened by <a href="https://github.com/musicinmybrain">@musicinmybrain</a>
        on 2025-10-24 06:11
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2025-10-24 06:11</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>Working with the latest uv (0.9.5) on Fedora, even if the system packages for free-threaded Python 3.13 and 3.14 are installed (<code>python3.13-freethreading</code> and <code>python3.14-freethreading</code>, providing <code>/usr/bin/python3.13t</code> and <code>/usr/bin/python3.14t</code>), the tests <code>python_find_freethreaded_313</code> and <code>python_find_freethreaded_314</code> do not find the system free-threaded interpreters and instead try to download them from the network. This fails in an offline build environment:</p>
<pre><code>---- python_find::python_find_freethreaded_313 stdout ----

thread 'python_find::python_find_freethreaded_313' panicked at /builddir/build/BUILD/rust-1.90.0-build/rustc-1.90.0-src/library/core/src/ops/function.rs:253:5:
Unexpected failure.
code=1
stderr=`‌`‌`‌`‌`‌`
error: Failed to install cpython-3.13.8+freethreaded-linux-x86_64-gnu
  Caused by: Request failed after 3 retries
  Caused by: Failed to download https://github.com/astral-sh/python-build-standalone/releases/download/20251007/cpython-3.13.8%2B20251007-x86_64-unknown-linux-gnu-freethreaded%2Bpgo%2Blto-full.tar.zst
  Caused by: error sending request for url (https://github.com/astral-sh/python-build-standalone/releases/download/20251007/cpython-3.13.8%2B20251007-x86_64-unknown-linux-gnu-freethreaded%2Bpgo%2Blto-full.tar.zst)
  Caused by: client error (Connect)
  Caused by: dns error
  Caused by: failed to lookup address information: Temporary failure in name resolution
`‌`‌`
`‌`‌`
command=`cd &quot;/tmp/uv/tests/.tmp1FdNJ8/temp&quot; &amp;&amp; env -u UV_CACHE_DIR -u UV_TOOL_BIN_DIR -u XDG_CONFIG_HOME APPDATA=&quot;/tmp/uv/tests/.tmp1FdNJ8/home&quot; COLUMNS=&quot;100&quot; GIT_CEILING_DIRECTORIES=&quot;/tmp/uv/tests/.tmp1FdNJ8&quot; HOME=&quot;/tmp/uv/tests/.tmp1FdNJ8/home&quot; LC_ALL=&quot;C&quot; PATH=&quot;/tmp/uv/tests/.tmp1FdNJ8/bin:/usr/bin:/bin:/usr/sbin:/sbin&quot; USERPROFILE=&quot;/tmp/uv/tests/.tmp1FdNJ8/home&quot; UV_EXCLUDE_NEWER=&quot;2024-03-25T00:00:00Z&quot; UV_NO_WRAP=&quot;1&quot; UV_PYTHON_BIN_DIR=&quot;/tmp/uv/tests/.tmp1FdNJ8/bin&quot; UV_PYTHON_CACHE_DIR=&quot;/builddir/.cache/uv/python-v0&quot; UV_PYTHON_DOWNLOADS=&quot;automatic&quot; UV_PYTHON_INSTALL_DIR=&quot;/tmp/uv/tests/.tmp1FdNJ8/temp/managed&quot; UV_PYTHON_INSTALL_REGISTRY=&quot;0&quot; UV_TEST_NO_CLI_PROGRESS=&quot;1&quot; UV_TEST_PYTHON_PATH=&quot;&quot; VIRTUAL_ENV=&quot;/tmp/uv/tests/.tmp1FdNJ8/temp/.venv&quot; XDG_DATA_HOME=&quot;/tmp/uv/tests/.tmp1FdNJ8/home/data&quot; &quot;/builddir/build/BUILD/uv-0.9.0-build/uv-0.9.0/target/rpm/uv&quot; &quot;--cache-dir&quot; &quot;/tmp/uv/tests/.tmp1FdNJ8/cache&quot; &quot;python&quot; &quot;install&quot; &quot;--preview&quot; &quot;3.13t&quot;`
code=1
stdout=&quot;&quot;
stderr=```
error: Failed to install cpython-3.13.8+freethreaded-linux-x86_64-gnu
  Caused by: Request failed after 3 retries
  Caused by: Failed to download https://github.com/astral-sh/python-build-standalone/releases/download/20251007/cpython-3.13.8%2B20251007-x86_64-unknown-linux-gnu-freethreaded%2Bpgo%2Blto-full.tar.zst
  Caused by: error sending request for url (https://github.com/astral-sh/python-build-standalone/releases/download/20251007/cpython-3.13.8%2B20251007-x86_64-unknown-linux-gnu-freethreaded%2Bpgo%2Blto-full.tar.zst)
  Caused by: client error (Connect)
  Caused by: dns error
  Caused by: failed to lookup address information: Temporary failure in name resolution
`‌`‌`


note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

---- python_find::python_find_freethreaded_314 stdout ----

thread 'python_find::python_find_freethreaded_314' panicked at /builddir/build/BUILD/rust-1.90.0-build/rustc-1.90.0-src/library/core/src/ops/function.rs:253:5:
Unexpected failure.
code=1
stderr=`‌`‌`‌`‌`‌`
error: Failed to install cpython-3.14.0+freethreaded-linux-x86_64-gnu
  Caused by: Request failed after 3 retries
  Caused by: Failed to download https://github.com/astral-sh/python-build-standalone/releases/download/20251007/cpython-3.14.0%2B20251007-x86_64-unknown-linux-gnu-freethreaded%2Bpgo%2Blto-full.tar.zst
  Caused by: error sending request for url (https://github.com/astral-sh/python-build-standalone/releases/download/20251007/cpython-3.14.0%2B20251007-x86_64-unknown-linux-gnu-freethreaded%2Bpgo%2Blto-full.tar.zst)
  Caused by: client error (Connect)
  Caused by: dns error
  Caused by: failed to lookup address information: Temporary failure in name resolution
`‌`‌`
`‌`‌`
command=`cd &quot;/tmp/uv/tests/.tmpN03ESX/temp&quot; &amp;&amp; env -u UV_CACHE_DIR -u UV_TOOL_BIN_DIR -u XDG_CONFIG_HOME APPDATA=&quot;/tmp/uv/tests/.tmpN03ESX/home&quot; COLUMNS=&quot;100&quot; GIT_CEILING_DIRECTORIES=&quot;/tmp/uv/tests/.tmpN03ESX&quot; HOME=&quot;/tmp/uv/tests/.tmpN03ESX/home&quot; LC_ALL=&quot;C&quot; PATH=&quot;/tmp/uv/tests/.tmpN03ESX/bin:/usr/bin:/bin:/usr/sbin:/sbin&quot; USERPROFILE=&quot;/tmp/uv/tests/.tmpN03ESX/home&quot; UV_EXCLUDE_NEWER=&quot;2024-03-25T00:00:00Z&quot; UV_NO_WRAP=&quot;1&quot; UV_PYTHON_BIN_DIR=&quot;/tmp/uv/tests/.tmpN03ESX/bin&quot; UV_PYTHON_CACHE_DIR=&quot;/builddir/.cache/uv/python-v0&quot; UV_PYTHON_DOWNLOADS=&quot;automatic&quot; UV_PYTHON_INSTALL_DIR=&quot;/tmp/uv/tests/.tmpN03ESX/temp/managed&quot; UV_PYTHON_INSTALL_REGISTRY=&quot;0&quot; UV_TEST_NO_CLI_PROGRESS=&quot;1&quot; UV_TEST_PYTHON_PATH=&quot;&quot; VIRTUAL_ENV=&quot;/tmp/uv/tests/.tmpN03ESX/temp/.venv&quot; XDG_DATA_HOME=&quot;/tmp/uv/tests/.tmpN03ESX/home/data&quot; &quot;/builddir/build/BUILD/uv-0.9.0-build/uv-0.9.0/target/rpm/uv&quot; &quot;--cache-dir&quot; &quot;/tmp/uv/tests/.tmpN03ESX/cache&quot; &quot;python&quot; &quot;install&quot; &quot;--preview&quot; &quot;3.14t&quot;`
code=1
stdout=&quot;&quot;
stderr=`‌‌`‌‌`
error: Failed to install cpython-3.14.0+freethreaded-linux-x86_64-gnu
  Caused by: Request failed after 3 retries
  Caused by: Failed to download https://github.com/astral-sh/python-build-standalone/releases/download/20251007/cpython-3.14.0%2B20251007-x86_64-unknown-linux-gnu-freethreaded%2Bpgo%2Blto-full.tar.zst
  Caused by: error sending request for url (https://github.com/astral-sh/python-build-standalone/releases/download/20251007/cpython-3.14.0%2B20251007-x86_64-unknown-linux-gnu-freethreaded%2Bpgo%2Blto-full.tar.zst)
  Caused by: client error (Connect)
  Caused by: dns error
  Caused by: failed to lookup address information: Temporary failure in name resolution
`‌`‌`
</code></pre>
<p>I think that these tests should ideally find the system interpreters. If there’s some reason they shouldn’t, then they should at least be gated on the <code>python-managed</code> feature.</p>
<h3>Platform</h3>
<p>Fedora Rawhide, all architectures</p>
<h3>Version</h3>
<p>0.9.5</p>
<h3>Python version</h3>
<p>Python 3.14.0</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @musicinmybrain on 2025-10-24 06:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Tests python_find_freethreaded_31* don’t find system interpreters, require network" to "Some python_find:: don’t find system interpreters, require network" by @musicinmybrain on 2025-10-24 06:14</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2025-10-24 06:16</div>
            <div class="timeline-body"><p>Ah, the above was based on uv 0.9.0, not 0.9.5. It’s still valid in 0.9.5, but there are two more tests that fail for similar reasons, <code>python_find_prerelease_version_specifiers</code> and <code>python_find_prerelease_with_patch_request</code>. These are very unlikely to be satisfied by system packages, so I’m pretty sure the right move for these two will be to gate them on <code>python-managed</code> regardless of what we do with <code>python_find_freethreaded_313</code> and <code>python_find_freethreaded_314</code>.</p>
<pre><code>---- python_find::python_find_prerelease_with_patch_request stdout ----

thread 'python_find::python_find_prerelease_with_patch_request' panicked at /builddir/build/BUILD/rust-1.90.0-build/rustc-1.90.0-src/library/core/src/ops/function.rs:253:5:
Unexpected failure.
code=1
stderr=`‌`‌`‌`‌`‌`
error: Failed to install cpython-3.14.0rc3-linux-x86_64-gnu
  Caused by: Request failed after 3 retries
  Caused by: Failed to download https://github.com/astral-sh/python-build-standalone/releases/download/20250918/cpython-3.14.0rc3%2B20250918-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz
  Caused by: error sending request for url (https://github.com/astral-sh/python-build-standalone/releases/download/20250918/cpython-3.14.0rc3%2B20250918-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz)
  Caused by: client error (Connect)
  Caused by: dns error
  Caused by: failed to lookup address information: Temporary failure in name resolution
`‌`‌`
`‌`‌`
command=`cd &quot;/tmp/uv/tests/.tmpCaum0o/temp&quot; &amp;&amp; env -u UV_CACHE_DIR -u UV_TOOL_BIN_DIR -u XDG_CONFIG_HOME APPDATA=&quot;/tmp/uv/tests/.tmpCaum0o/home&quot; COLUMNS=&quot;100&quot; GIT_CEILING_DIRECTORIES=&quot;/tmp/uv/tests/.tmpCaum0o&quot; HOME=&quot;/tmp/uv/tests/.tmpCaum0o/home&quot; LC_ALL=&quot;C&quot; PATH=&quot;/tmp/uv/tests/.tmpCaum0o/bin:/usr/bin:/bin:/usr/sbin:/sbin&quot; USERPROFILE=&quot;/tmp/uv/tests/.tmpCaum0o/home&quot; UV_EXCLUDE_NEWER=&quot;2024-03-25T00:00:00Z&quot; UV_NO_WRAP=&quot;1&quot; UV_PYTHON_BIN_DIR=&quot;/tmp/uv/tests/.tmpCaum0o/bin&quot; UV_PYTHON_CACHE_DIR=&quot;/builddir/.cache/uv/python-v0&quot; UV_PYTHON_DOWNLOADS=&quot;automatic&quot; UV_PYTHON_INSTALL_DIR=&quot;/tmp/uv/tests/.tmpCaum0o/temp/managed&quot; UV_PYTHON_INSTALL_REGISTRY=&quot;0&quot; UV_TEST_NO_CLI_PROGRESS=&quot;1&quot; UV_TEST_PYTHON_PATH=&quot;&quot; VIRTUAL_ENV=&quot;/tmp/uv/tests/.tmpCaum0o/temp/.venv&quot; XDG_DATA_HOME=&quot;/tmp/uv/tests/.tmpCaum0o/home/data&quot; &quot;/builddir/build/BUILD/uv-0.9.5-build/uv-0.9.5/target/rpm/uv&quot; &quot;--cache-dir&quot; &quot;/tmp/uv/tests/.tmpCaum0o/cache&quot; &quot;python&quot; &quot;install&quot; &quot;3.14.0rc3&quot;`
code=1
stdout=&quot;&quot;
stderr=`‌`‌`
error: Failed to install cpython-3.14.0rc3-linux-x86_64-gnu
  Caused by: Request failed after 3 retries
  Caused by: Failed to download https://github.com/astral-sh/python-build-standalone/releases/download/20250918/cpython-3.14.0rc3%2B20250918-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz
  Caused by: error sending request for url (https://github.com/astral-sh/python-build-standalone/releases/download/20250918/cpython-3.14.0rc3%2B20250918-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz)
  Caused by: client error (Connect)
  Caused by: dns error
  Caused by: failed to lookup address information: Temporary failure in name resolution
`‌`‌`


note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace
</code></pre>
<pre><code>---- python_find::python_find_prerelease_version_specifiers stdout ----

thread 'python_find::python_find_prerelease_version_specifiers' panicked at /builddir/build/BUILD/rust-1.90.0-build/rustc-1.90.0-src/library/core/src/ops/function.rs:253:5:
Unexpected failure.
code=1
stderr=`‌`‌`‌`‌`‌`
error: Failed to install cpython-3.14.0rc2-linux-x86_64-gnu
  Caused by: Request failed after 3 retries
  Caused by: Failed to download https://github.com/astral-sh/python-build-standalone/releases/download/20250902/cpython-3.14.0rc2%2B20250902-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz
  Caused by: error sending request for url (https://github.com/astral-sh/python-build-standalone/releases/download/20250902/cpython-3.14.0rc2%2B20250902-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz)
  Caused by: client error (Connect)
  Caused by: dns error
  Caused by: failed to lookup address information: Temporary failure in name resolution
`‌`‌`
`‌`‌`
command=`cd &quot;/tmp/uv/tests/.tmpOJCPhj/temp&quot; &amp;&amp; env -u UV_CACHE_DIR -u UV_TOOL_BIN_DIR -u XDG_CONFIG_HOME APPDATA=&quot;/tmp/uv/tests/.tmpOJCPhj/home&quot; COLUMNS=&quot;100&quot; GIT_CEILING_DIRECTORIES=&quot;/tmp/uv/tests/.tmpOJCPhj&quot; HOME=&quot;/tmp/uv/tests/.tmpOJCPhj/home&quot; LC_ALL=&quot;C&quot; PATH=&quot;/tmp/uv/tests/.tmpOJCPhj/bin:/usr/bin:/bin:/usr/sbin:/sbin&quot; USERPROFILE=&quot;/tmp/uv/tests/.tmpOJCPhj/home&quot; UV_EXCLUDE_NEWER=&quot;2024-03-25T00:00:00Z&quot; UV_NO_WRAP=&quot;1&quot; UV_PYTHON_BIN_DIR=&quot;/tmp/uv/tests/.tmpOJCPhj/bin&quot; UV_PYTHON_CACHE_DIR=&quot;/builddir/.cache/uv/python-v0&quot; UV_PYTHON_DOWNLOADS=&quot;automatic&quot; UV_PYTHON_INSTALL_DIR=&quot;/tmp/uv/tests/.tmpOJCPhj/temp/managed&quot; UV_PYTHON_INSTALL_REGISTRY=&quot;0&quot; UV_TEST_NO_CLI_PROGRESS=&quot;1&quot; UV_TEST_PYTHON_PATH=&quot;&quot; VIRTUAL_ENV=&quot;/tmp/uv/tests/.tmpOJCPhj/temp/.venv&quot; XDG_DATA_HOME=&quot;/tmp/uv/tests/.tmpOJCPhj/home/data&quot; &quot;/builddir/build/BUILD/uv-0.9.5-build/uv-0.9.5/target/rpm/uv&quot; &quot;--cache-dir&quot; &quot;/tmp/uv/tests/.tmpOJCPhj/cache&quot; &quot;python&quot; &quot;install&quot; &quot;3.14.0rc2&quot;`
code=1
stdout=&quot;&quot;
stderr=`‌`‌`
error: Failed to install cpython-3.14.0rc2-linux-x86_64-gnu
  Caused by: Request failed after 3 retries
  Caused by: Failed to download https://github.com/astral-sh/python-build-standalone/releases/download/20250902/cpython-3.14.0rc2%2B20250902-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz
  Caused by: error sending request for url (https://github.com/astral-sh/python-build-standalone/releases/download/20250902/cpython-3.14.0rc2%2B20250902-x86_64-unknown-linux-gnu-install_only_stripped.tar.gz)
  Caused by: client error (Connect)
  Caused by: dns error
  Caused by: failed to lookup address information: Temporary failure in name resolution
`‌`‌`
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Some python_find:: don’t find system interpreters, require network" to "Some python_find:: tests don’t find system interpreters, require network" by @musicinmybrain on 2025-10-24 06:18</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @zanieb on 2025-11-30 15:43</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">testing</span> added by @zanieb on 2025-11-30 15:43</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-30 15:43</div>
            <div class="timeline-body"><p>Happy to add the missing feature gates when needed here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/skyepurchase">@skyepurchase</a> on 2025-12-03 14:46</div>
            <div class="timeline-body"><p>I would be curious to look into this, but should I wait for the gates?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-03 18:15</div>
            <div class="timeline-body"><p>We already have the <code>python-managed</code> feature, you can use that</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/17312.html">astral-sh/uv#17312</a> on 2026-01-03 21:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/tnguyen21">@tnguyen21</a> on 2026-01-03 21:24</div>
            <div class="timeline-body"><p>Saw this thread went stale for a bit so hopefully it's ok I took a stab at a PR: https://github.com/astral-sh/uv/pull/17312</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2026-01-03 22:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/musicinmybrain">@musicinmybrain</a> on 2026-01-04 23:17</div>
            <div class="timeline-body"><p>I tested #17312, and it seems to work. Thank you!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:13 UTC
    </footer>
</body>
</html>
