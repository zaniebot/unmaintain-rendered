<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexus PyPi causing early exit on package resolution - astral-sh/uv #7273</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Nexus PyPi causing early exit on package resolution</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7273">#7273</a>
        opened by <a href="https://github.com/JTCroft">@JTCroft</a>
        on 2024-09-10 19:58
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/JTCroft">@JTCroft</a></div>
            <div class="timeline-body"><p>I have an issue related to an internal nexus-hosted PyPi. When using a repo group in nexus the page returned when a package is NOT present in any of the PyPis grouped together in a repo group will cause <code>uv</code> to believe that the package WAS found in the repo but with no versions available, invariably causing it to fail to install anything hosted in any package index after the internal nexus one in resolution order</p>
<p>Unlike nexus repos, using repo groups means that when a package isn’t found it returns a page with <code>Links to &lt;package&gt;</code> and then no links below.</p>
<p>Would it be possible for uv to treat an empty list of files as the package not being found in the index and continue through any remaining extra-index-urls and the index-url?</p>
<p>this was with uv 0.4.8, caused by running <code>uv pip install &lt;exernal package&gt;</code> with a nexus repo group included in a uv.toml <code>extra-index-url = [“&lt;internal nexus repo group&gt;”]</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-10 20:09</div>
            <div class="timeline-body"><p>Have you tried changing the index strategy? https://docs.astral.sh/uv/pip/compatibility/#packages-that-exist-on-multiple-indexes</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-09-10 22:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/JTCroft">@JTCroft</a> on 2024-09-12 17:37</div>
            <div class="timeline-body"><p>Thanks for suggesting that, it’s a much better solution</p>
<p>Happy this to be closed if you don’t think it is a uv bug since it’s kind of a nexus issue - but other nexus users may well see this behaviour where packages that don’t exist in the index will be ‘found’</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-12 19:04</div>
            <div class="timeline-body"><p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-09-12 19:04</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:27:02 UTC
    </footer>
</body>
</html>
