<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What is the proper way to install the current project in editable mode without build isolation? - astral-sh/uv #13998</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>What is the proper way to install the current project in editable mode without build isolation?</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/13998">#13998</a>
        opened by <a href="https://github.com/momostein">@momostein</a>
        on 2025-06-12 14:21
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/momostein">@momostein</a> on 2025-06-12 14:21</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I'm currently working on some Python Bindings for some C++ code. I'm using <code>uv</code>, <code>scikit-build-core</code> and <code>pybind11</code>.</p>
<h2>Disabling build isolation on my editable project installation improves my development workflow</h2>
<p>By default, when using uv and scikit-build-core, build-isolation remains enabled when installing the current project as editable.
However, this means that the whole project has to be recompiled on every change. Also, scikit-build-core import hook does not work with build isolation.</p>
<p>So, to improve compile times and enable automatic rebuilds, I have tried disabling build isolation for the current package. For example, when I'm working on a python package called <code>package-name</code> the <code>pyproject.toml</code> would looks something like this:</p>
<pre><code class="language-toml">[build-system]
requires = [&quot;scikit-build-core&gt;=0.11&quot;, &quot;pybind11&quot;]
build-backend = &quot;scikit_build_core.build&quot;

[project]
name = &quot;package-name&quot;
# ...

[tool.scikit-build]
editable.verbose = true
editable.rebuild = true

build-dir = &quot;build/{wheel_tag}&quot;

[tool.uv]
# Disable build isolation, but only for the current package in development.
no-build-isolation-package = [&quot;package-name&quot;]
default-groups = &quot;all&quot;

[dependency-groups]
test = [
    &quot;pytest&gt;=8.3.4&quot;,
]
build = [
    &quot;pybind11&gt;=2.13.6&quot;,
    &quot;scikit-build-core&gt;=0.11.4&quot;,
    &quot;setuptools-scm&gt;=8.3.1&quot;,
]
</code></pre>
<p>I now perform the two part installation as such:</p>
<pre><code class="language-shell">uv sync --no-install-project --only-group build
uv sync
</code></pre>
<p>For development, this works very well. I can develop my C++ code, then run pytest, and the C++ code will be rebuilt automatically and way faster because it doesn't need to be built from scratch.</p>
<p>Yes, I know that the <code>cache-keys</code> setting also works for automatic rebuilding, even with build isolation. However that's still very slow compared to building without isolation.</p>
<h2>Disabling build isolation complicates building wheels for distribution.</h2>
<p>Sadly, this comes with a significant drawback. Before disabling build isolation, I can build my package into wheels for any python version without creating a virtual environment. I could just run <code>uv build -p 3.10</code> even if my development venv was using python 3.13.</p>
<p>Now, with build isolation disabled on my project, I can't just run <code>uv build -p 3.10</code>. I now have to create a separate virtual environment, then install the build dependencies before running <code>uv build</code>.</p>
<h3>My current workaround with Nox</h3>
<p>So, to automate creation of these virtual environments, I've turned to <a href="https://nox.thea.codes/en/stable/">Nox</a>. This is how such a <code>noxfile.py</code> could look:</p>
<pre><code class="language-python">
import nox

# Use uv as the venv backend
nox.options.default_venv_backend = &quot;uv&quot;

PYTHONS = [&quot;3.10&quot;, &quot;3.11&quot;, &quot;3.12&quot;, &quot;3.13&quot;]


@nox.session(python=False, default=False)
def build_sdist(session: nox.Session):
    session.run(&quot;uv&quot;, &quot;build&quot;, &quot;--sdist&quot;)


@nox.session(python=PYTHONS, default=False, requires=[&quot;build_sdist&quot;])
def build(session: nox.Session):
    &quot;&quot;&quot;Build all wheels for the current platform.

    Requires the sdist to be present before this session runs.
    &quot;&quot;&quot;
    session.run_install(
        &quot;uv&quot;,
        &quot;sync&quot;,
        &quot;--frozen&quot;,
        &quot;--no-install-project&quot;,
        &quot;--only-group=build&quot;,
        f&quot;--python={session.virtualenv.location}&quot;,
        env={&quot;UV_PROJECT_ENVIRONMENT&quot;: session.virtualenv.location},
    )
    session.run(
        &quot;uv&quot;,
        &quot;build&quot;,
        &quot;--wheel&quot;,
        f&quot;--python={session.virtualenv.location}&quot;,
        env={&quot;UV_PROJECT_ENVIRONMENT&quot;: session.virtualenv.location},
    )
</code></pre>
<p>And I run <code>uv run nox -s build</code> to build all my wheels.</p>
<h2>Is there a better way?</h2>
<p>In my ideal world, this would just be automated by a CI/CD server/pipeline, but I currently do not have access to any CI/CD servers.</p>
<p>Maybe we could add more build isolation options to uv? For example:</p>
<ul>
<li>Add a uv <code>pyproject.toml</code> setting to build without isolation, but only on editable installations</li>
<li>Add a cli option to <code>uv build</code> to re-enable build isolation<ul>
<li>Even if <code>no-build-isolation=true</code> is set in the <code>pyproject.toml</code></li>
<li>Currently, <code>--no-config</code> seems to work, but that option feels too coarse</li>
</ul>
</li>
</ul>
<p>What do you think? Does anybody else have any issues with this? Am I actually misusing the no-build-isolation options by using it for my editable project installations?</p>
<p>Also, I must clarify that it is not my intention that the users of my package would need to disable build isolation upon installing/building my package from the sdist. They should be able to build it normally with proper build isolation behavior.</p>
<h3>Platform</h3>
<p>Windows 10 x86_64</p>
<h3>Version</h3>
<p>uv 0.7.10 (1e5120e15 2025-06-03)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @momostein on 2025-06-12 14:21</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-06-12 14:41</div>
            <div class="timeline-body"><p>Does <code>uv build --no-config</code> work for you?</p>
<p>Currently, we don't have a way to make no-build-isolation only apply to editable builds, this may be a possible enhancement.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/momostein">@momostein</a> on 2025-06-12 15:25</div>
            <div class="timeline-body"><p>Running with <code>uv build --no-config</code> does work yes for me, but how would it work for other developers with user-level configuration files?
If I understand the documentation correctly, <code>--no-config</code> also disables any user level <code>uv.toml</code> configuration files. Right?
I guess that the proof is in the pudding and thus I'll just have to try and see what works.</p>
<p>And yeah, no-build-isolation on editable only would be a nice enhancement.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-06-13 10:19</div>
            <div class="timeline-body"><blockquote>
<p>Running with <code>uv build --no-config</code> does work yes for me, but how would it work for other developers with user-level configuration files? If I understand the documentation correctly, <code>--no-config</code> also disables any user level <code>uv.toml</code> configuration files. Right? I guess that the proof is in the pudding and thus I'll just have to try and see what works.</p>
</blockquote>
<p>Yes, that's unfortunately true.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../beartype/beartype/issues/556.html">beartype/beartype#556</a> on 2025-09-30 23:01</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:28 UTC
    </footer>
</body>
</html>
