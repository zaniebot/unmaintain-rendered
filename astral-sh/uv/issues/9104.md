```yaml
number: 9104
title: "Unable to configure basic HTTP auth via env for `UV_DEFAULT_INDEX`"
type: issue
state: closed
author: qbedard
labels:
  - question
assignees: []
created_at: 2024-11-13T23:27:10Z
updated_at: 2024-11-15T19:08:07Z
url: https://github.com/astral-sh/uv/issues/9104
synced_at: 2026-01-10T01:57:21Z
```

# Unable to configure basic HTTP auth via env for `UV_DEFAULT_INDEX`

---

_Issue opened by @qbedard on 2024-11-13 23:27_

It looks like there's no way to configure the default index authentication via environment variables without incorporating it into the index URL itself. This gets a bit tricky when you need to set a rotating password separately from the URL (such as for CodeArtifact). The current hack is to do some string manipulation to jam the password into the URL when publishing, but it would be really nice to avoid that.

It would seem easy enough to add `UV_DEFAULT_INDEX_USERNAME` and `UV_DEFAULT_INDEX_PASSWORD` as available environment variables.

That wouldn't help with using multiple indexes via `UV_INDEX`, but maybe that's fine.

---

_Comment by @charliermarsh on 2024-11-14 05:02_

I believe this is possible today? E.g., if you do:

```toml
[[tool.uv.index]]
default = true
name = "internal"
url = "..."
```

Then `UV_INDEX_INTERNAL_USERNAME` and `UV_INDEX_INTERNAL_PASSWORD` will be respected.

---

_Label `question` added by @charliermarsh on 2024-11-14 05:02_

---

_Comment by @zanieb on 2024-11-14 05:04_

I think the problem is if you change the default index via environment variable instead of defining it in a configuration file.

---

_Comment by @charliermarsh on 2024-11-14 05:05_

Why is that? I think `UV_DEFAULT_INDEX=internal=https://` would work as above?

---

_Comment by @zanieb on 2024-11-14 05:13_

Oh, well that answers the question I think :) I didn't realize you could use that syntax, but it makes sense.

---

_Comment by @qbedard on 2024-11-14 15:12_

> Why is that? I think `UV_DEFAULT_INDEX=internal=https://` would work as above?

Oh, thatâ€™s interesting. Is that syntax documented somewhere?

---

_Comment by @charliermarsh on 2024-11-15 00:45_

I guess not? I thought it was but can't find it. I'll add something.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-11-15 00:45_

---

_Referenced in [astral-sh/uv#9139](../../astral-sh/uv/pulls/9139.md) on 2024-11-15 02:40_

---

_Closed by @zanieb on 2024-11-15 15:56_

---

_Closed by @zanieb on 2024-11-15 15:56_

---

_Comment by @qbedard on 2024-11-15 19:08_

Thanks!

---
