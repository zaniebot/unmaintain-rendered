<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUG: crash in `uv sync --no-build --no-install-project` - astral-sh/uv #7247</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>BUG: crash in <code>uv sync --no-build --no-install-project</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7247">#7247</a>
        opened by <a href="https://github.com/neutrinoceros">@neutrinoceros</a>
        on 2024-09-10 08:50
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/neutrinoceros">@neutrinoceros</a></div>
            <div class="timeline-body">

<p>XY problem disclaimer: what I was really trying to accomplish here was <em>installing dependencies only</em>, ref #1516</p>
<p>I understand that <code>uv sync --no-build</code> is a bit self-contradictory because it requires building the project itself but forbids building anything, but I was still surprised that adding <code>--no-install-project</code> didn&#x27;t help</p>
<p>reprod</p>
<pre><code>❯ mkdir test_pkg &amp;&amp; cd test_pkg
❯ uv init --lib
Initialized project `test-pkg`
❯ uv sync --no-build --no-install-project --verbose
DEBUG uv 0.4.8 (Homebrew 2024-09-09)
DEBUG Found project root: `/private/tmp/test_pkg`
DEBUG No workspace root found, using project root
DEBUG Reading requests from `/private/tmp/test_pkg/.python-version`
DEBUG Searching for Python 3.12 in managed installations or system path
DEBUG Searching for managed installations at `/Users/clm/Library/Application Support/uv/python`
DEBUG Found managed installation `cpython-3.12.5-macos-aarch64-none`
DEBUG Found `cpython-3.12.5-macos-aarch64-none` at `/Users/clm/Library/Application Support/uv/python/cpython-3.12.5-macos-aarch64-none/bin/python3` (managed installations)
Using Python 3.12.5
Creating virtualenv at: .venv
DEBUG Using request timeout of 30s
DEBUG Starting clean resolution
DEBUG Allowing build for editable source distribution: test-pkg @ file:///private/tmp/test_pkg
DEBUG Found static `pyproject.toml` for: test-pkg @ file:///private/tmp/test_pkg
DEBUG No workspace root found, using project root
DEBUG Solving with installed Python version: 3.12.5
DEBUG Solving with target Python version: &gt;=3.12
DEBUG Adding direct dependency: test-pkg*
DEBUG Searching for a compatible version of test-pkg @ file:///private/tmp/test_pkg (*)
DEBUG Tried 1 versions: test-pkg 1
DEBUG Split universal resolution took 0.000s
Resolved 1 package in 1ms
error: distribution test-pkg==0.1.0 @ editable+. can&#x27;t be installed because it is marked as `--no-build` but has no binary distribution
</code></pre>
<p>Is this intended, and is there a way around it ?</p>
<pre><code>$ uv --version
uv 0.4.8 (Homebrew 2024-09-09)
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-10 13:23</div>
            <div class="timeline-body"><p>Thanks, this is a bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-10 13:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-10 13:23</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from &quot;BUG(?): crash in `uv sync --no-build --no-install-project`&quot; to &quot;BUG: crash in `uv sync --no-build --no-install-project`&quot; by <a href="https://github.com/neutrinoceros">@neutrinoceros</a> on 2024-09-10 15:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-11 18:31</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:33:52 UTC
    </footer>
</body>
</html>
