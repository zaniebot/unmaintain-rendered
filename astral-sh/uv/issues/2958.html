<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>installing private packages from a custom pypi repo -  requirements are unsatisfiable. - astral-sh/uv #2958</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>installing private packages from a custom pypi repo -  requirements are unsatisfiable.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/2958">#2958</a>
        opened by <a href="https://github.com/etele">@etele</a>
        on 2024-04-10 10:47
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/etele">@etele</a></div>
            <div class="timeline-body"><p>While testing fixes from <a href="https://github.com/astral-sh/uv/issues/2899">issue</a>
the official mirrored packages seem to be installing, but getting an error with our private packages.
pip itself  (and pipenv also) installing them fine.</p>
<p>if i understand uv log itself it founds the repo and the packages but somehow still shows that requirements are unsatisfied.</p>
<pre><code>$ uv --version
uv 0.1.31
</code></pre>
<pre><code>UV_INDEX_URL=https://pypi.private.repo/simple/
SSL_CERT_FILE=/etc/ssl/certs/ca-certificates.crt
</code></pre>
<pre><code>$ uv -v pip install -r requirements.txt
INFO Found a virtualenv through VIRTUAL_ENV at: /home/user/.local/share/virtualenvs/api-v3W8N2Or
DEBUG Cached interpreter info for Python 3.11.8, skipping probing: /home/user/.local/share/virtualenvs/api-v3W8N2Or/bin/python
DEBUG Using Python 3.11.8 environment at /home/user/.local/share/virtualenvs/api-v3W8N2Or/bin/python
DEBUG Trying to lock if free: /home/user/.local/share/virtualenvs/api-v3W8N2Or/.lock
DEBUG Using registry request timeout of 300s
DEBUG Solving with target Python version 3.11.8
DEBUG Adding direct dependency: custom-tools-common==1.0.0
TRACE Fetching metadata for custom-tools-common from https://pypi.private.repo/simple/custom-tools-common/
TRACE cached request https://pypi.private.repo/simple/custom-tools-common/ is storable because its response has a heuristically cacheable status code 200
TRACE cached request https://pypi.private.repo/simple/custom-tools-common/ has a cached response that does not allow staleness
TRACE request https://pypi.private.repo/simple/custom-tools-common/ does not have a fresh cache because its age is 6 seconds, it is greater than the freshness lifetime of 0 seconds and stale cached responses are not allowed
DEBUG Found stale response for: https://pypi.private.repo/simple/custom-tools-common/
DEBUG Sending revalidation request for: https://pypi.private.repo/simple/custom-tools-common/
DEBUG No credentials found for: https://pypi.private.repo/simple/custom-tools-common/
TRACE is modified because status is 200 and not 304
DEBUG Found modified response for: https://pypi.private.repo/simple/custom-tools-common/
TRACE cached request https://pypi.private.repo/simple/custom-tools-common/ is storable because its response has a heuristically cacheable status code 200
TRACE Received package metadata for: custom-tools-common
TRACE selecting candidate for package custom-tools-common with range Range { segments: [(Included(&quot;1.0.0&quot;), Included(&quot;1.0.0&quot;))] } with 0 remote versions
TRACE exhausted all candidates for package PackageName(&quot;custom-tools-common&quot;) with range Range { segments: [(Included(&quot;1.0.0&quot;), Included(&quot;1.0.0&quot;))] } after 0 steps
DEBUG Searching for a compatible version of custom-tools-common (==1.0.0)
TRACE selecting candidate for package custom-tools-common with range Range { segments: [(Included(&quot;1.0.0&quot;), Included(&quot;1.0.0&quot;))] } with 0 remote versions
TRACE exhausted all candidates for package PackageName(&quot;custom-tools-common&quot;) with range Range { segments: [(Included(&quot;1.0.0&quot;), Included(&quot;1.0.0&quot;))] } after 0 steps
DEBUG No compatible version found for: custom-tools-common
  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of custom-tools-common==1.0.0 and you require custom-tools-common==1.0.0, we
      can conclude that the requirements are unsatisfiable.
</code></pre>
<p>the content of the <a href="https://pypi.private.repo/simple/custom-tools-common/">https://pypi.private.repo/simple/custom-tools-common </a></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta name=&quot;pypi:repository-version&quot; content=&quot;1.1&quot;&gt;
    &lt;title&gt;Links for custom-tools-common&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Links for custom-tools-common&lt;/h1&gt;
            &lt;a href=&quot;/packages/custom-tools-common/b/i/custom-tools-common-0.1.0.tar.gz?hash=659a53efb5cc5822481309c13516eb0a70085defc089bcc4cc5c1a4f961e10f3&amp;project=legacy#sha256=659a53efb5cc5822481309c13516eb0a70085defc089bcc4cc5c1a4f961e10f3&quot;&gt;custom-tools-common-0.1.0.tar.gz&lt;/a&gt;
    &lt;/br&gt;
            &lt;a href=&quot;/packages/custom-tools-common/b/i/custom-tools-common-1.0.0.tar.gz?hash=0d6fd43761bfaff689c316e0b6e2ae67cdc99e6738a817f8737ecd3094a027d8&amp;project=legacy#sha256=0d6fd43761bfaff689c316e0b6e2ae67cdc99e6738a817f8737ecd3094a027d8&quot;&gt;custom-tools-common-1.0.0.tar.gz&lt;/a&gt;
    &lt;/br&gt;
            &lt;a href=&quot;/packages/custom-tools-common/b/i/custom-tools-common-1.0.0.tar.gz?hash=c73d38829997cd42dd64f1b0c56707ede39790612b15973c47c3288558e4b54d&amp;project=custom-bi#sha256=c73d38829997cd42dd64f1b0c56707ede39790612b15973c47c3288558e4b54d&quot;&gt;custom-tools-common-1.0.0.tar.gz&lt;/a&gt;
    &lt;/br&gt;
&lt;/body&gt;
&lt;/html&gt;
&lt;!--SERIAL 1710848397
--&gt;
</code></pre>
<p>while pip installs it without issues:</p>
<pre><code>$ pip install -r requirements.txt
Looking in indexes: https://pypi.private.repo/simple/
Collecting custom-tools-common==1.0.0 (from -r requirements.txt (line 2))
  Using cached https://pypi.private.repo/packages/custom-tools-common/b/i/custom-tools-common-1.0.0.tar.gz?hash=c73d38829997cd42dd64f1b0c56707ede39790612b15973c47c3288558e4b54d&amp;project=fulltext-bi (6.0 kB)
  Preparing metadata (setup.py) ... done
Requirement already satisfied: requests&gt;=2 in /home/user/.local/share/virtualenvs/api-v3W8N2Or/lib/python3.11/site-packages (from custom-tools-common==1.0.0-&gt;-r requirements.txt (line 2)) (2.31.0)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /home/user/.local/share/virtualenvs/api-v3W8N2Or/lib/python3.11/site-packages (from requests&gt;=2-&gt;custom-tools-common==1.0.0-&gt;-r requirements.txt (line 2)) (3.3.2)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /home/user/.local/share/virtualenvs/api-v3W8N2Or/lib/python3.11/site-packages (from requests&gt;=2-&gt;custom-tools-common==1.0.0-&gt;-r requirements.txt (line 2)) (3.6)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /home/user/.local/share/virtualenvs/api-v3W8N2Or/lib/python3.11/site-packages (from requests&gt;=2-&gt;custom-tools-common==1.0.0-&gt;-r requirements.txt (line 2)) (2.2.1)
Requirement already satisfied: certifi&gt;=2017.4.17 in /home/user/.local/share/virtualenvs/api-v3W8N2Or/lib/python3.11/site-packages (from requests&gt;=2-&gt;custom-tools-common==1.0.0-&gt;-r requirements.txt (line 2)) (2024.2.2)
Building wheels for collected packages: custom-tools-common
  Building wheel for custom-tools-common (setup.py) ... done
  Created wheel for custom-tools-common: filename=custom_tools_common-1.0.0-py3-none-any.whl size=7532 sha256=c7a48bf3d8bdbe1203c0d510e776a71f1cedb22cdd9b529665c3c8a40abec879
  Stored in directory: /home/user/.cache/pip/wheels/fd/41/60/99770daf34091cbbf5c8cf1c5963f16b85cdeef6af4ecabb8a
Successfully built custom-tools-common
Installing collected packages: custom-tools-common
Successfully installed custom-tools-common-1.0.0
</code></pre>
<p>from setup.py of the package i want to install:</p>
<pre><code>    classifiers=[
        &#x27;Intended Audience :: Developers&#x27;,
        &#x27;Programming Language :: Python&#x27;,
        &#x27;Programming Language :: Python :: 3.10&#x27;,
        &#x27;Programming Language :: Python :: 3.11&#x27;,
    ],

</code></pre>
<p>package name and repo name slightly anonymized</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-10 13:53</div>
            <div class="timeline-body"><p>I think it might be the query string. I&#x27;ll take a look.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-10 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-10 13:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-10 14:25</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:30:47 UTC
    </footer>
</body>
</html>
