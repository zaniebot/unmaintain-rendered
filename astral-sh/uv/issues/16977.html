<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv: local package randomly becomes unimportable in project created with `uv init --package` - astral-sh/uv #16977</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv: local package randomly becomes unimportable in project created with <code>uv init --package</code></h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/16977">#16977</a>
        opened by <a href="https://github.com/jesusseper">@jesusseper</a>
        on 2025-12-04 12:18
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jesusseper">@jesusseper</a></div>
            <div class="timeline-body"><h3>Summary</h3>
<p>GitHub issue</p>
<h1>uv: local package randomly becomes unimportable in project created with <code>uv init --package</code></h1>
<p>I'm using uv to manage a Python project for my master's thesis, and I'm seeing a strange, seemingly non-deterministic behavior with my local package imports.</p>
<p>Sometimes uv installs my package correctly and I can import it, but after running a few commands the same import suddenly fails with ModuleNotFoundError, without any changes to the code or configuration.</p>
<p>At this point I'm not sure whether I’m misconfiguring something or hitting a bug.</p>
<p><strong>Update / Root cause (not uv-specific):</strong><br />
The imports fail when Python skips the editable <code>.pth</code> file because it is marked hidden at the filesystem level (macOS <code>UF_HIDDEN</code>). With <code>python -v</code>, you can see:<br />
<code>Skipping hidden .pth file: .../__editable__.tfm_rag_municipal-0.1.0.pth</code></p>
<p>Since Python 3.12+ skips hidden <code>.pth</code> files, the PEP 660 editable hook is never executed, so the package disappears from imports.</p>
<p><strong>Workaround / Fix:</strong> create the venv as <code>venv/</code> (not <code>.venv/</code>) or remove hidden flags (e.g. <code>chflags -R nohidden .venv</code>). After creating <code>uv venv venv</code>, imports are stable.</p>
<hr />
<h2>Environment</h2>
<ul>
<li><p>OS: macOS (MacBook Air M1, 2020)</p>
</li>
<li><p>Python: 3.12.7</p>
</li>
<li><p>uv version: uv 0.9.15 (5eafae332 2025-12-02)</p>
</li>
<li><p>Project layout: src layout, created with:</p>
<p>uv init --package tfm-rag-municipal</p>
</li>
</ul>
<hr />
<h2>Project layout</h2>
<p>After creating the project, I copied my existing code into the generated structure:</p>
<pre><code>tfm-rag-municipal/
  pyproject.toml
  src/
    tfm_rag_municipal/
      __init__.py
      example.py
      corpus_audit/
        __init__.py
        corpusrecord_example.py
        schema.py
  tests/
    test_example.py</code></pre>
<p>Example module:</p>
<pre><code># src/tfm_rag_municipal/example.py
def add(a: int, b: int) -&gt; int:
    return a + b</code></pre>
<p>Test:</p>
<pre><code># tests/test_example.py
from tfm_rag_municipal.example import add

def test_add_basic():
    assert add(2, 3) == 5</code></pre>
<p>Submodule usage:</p>
<pre><code># src/tfm_rag_municipal/corpus_audit/corpusrecord_example.py
from tfm_rag_municipal.corpus_audit.schema import CorpusRecord

record = CorpusRecord(
    doc_id=&quot;ordenanza_reguladora_01&quot;,
    title=(
        &quot;ORDENANZA REGULADORA SOBRE PROTECCIÓN DEL MEDIO AMBIENTE &quot;
        &quot;CONTRA LA EMISIÓN DE RUIDOS Y VIBRACIONES&quot;
    ),
    # ... other fields ...
)

print(record.title)</code></pre>
<hr />
<h2>pyproject.toml</h2>
<pre><code>[project]
name = &quot;tfm-rag-municipal&quot;
version = &quot;0.1.0&quot;
description = &quot;TFM: Asistente RAG municipal para Aguilar de Campoo&quot;
readme = &quot;README.md&quot;
authors = [
    { name = &quot;Jesús Sevilla&quot;, email = &quot;83033602+jesusseper@users.noreply.github.com&quot; }
]
requires-python = &quot;&gt;=3.12&quot;
dependencies = []

[project.scripts]
tfm-rag-municipal = &quot;tfm_rag_municipal:main&quot;

[project.optional-dependencies]
dev = [
    &quot;pytest&gt;=9.0.1&quot;,
    &quot;ruff&gt;=0.14.7&quot;,
    &quot;pre-commit&gt;=4.5.0&quot;,
]

[build-system]
requires = [&quot;uv_build&gt;=0.9.15,&lt;0.10.0&quot;]
build-backend = &quot;uv_build&quot;</code></pre>
<p>Dev dependencies:</p>
<pre><code>uv add --dev pytest ruff pre-commit
uv sync</code></pre>
<p>uv sync output includes:</p>
<pre><code>+ tfm-rag-municipal==0.1.0 (from file:///Users/.../tfm-rag-municipal)</code></pre>
<hr />
<h2>The weird behavior</h2>
<p>Fresh sync works:</p>
<pre><code>rm -rf .venv uv.lock src/tfm_rag_municipal.egg-info
uv sync
uv run python -c &quot;import tfm_rag_municipal&quot;
uv run pytest
uv run python -m tfm_rag_municipal.corpus_audit.corpusrecord_example</code></pre>
<p>But repeatedly running imports eventually fails:</p>
<pre><code>uv run python -c &quot;import tfm_rag_municipal&quot;
uv run python -c &quot;import tfm_rag_municipal&quot;
uv run python -c &quot;import tfm_rag_municipal&quot;
uv run python -c &quot;import tfm_rag_municipal&quot;</code></pre>
<p>Result:</p>
<pre><code>ModuleNotFoundError: No module named 'tfm_rag_municipal'</code></pre>
<p>Resetting and syncing fixes it temporarily:</p>
<pre><code>rm -rf .venv uv.lock src/tfm_rag_municipal.egg-info
uv sync</code></pre>
<hr />
<h2>Things I’ve already tried</h2>
<ul>
<li>Recreated project with uv init --package</li>
<li>Added explicit uv_build backend</li>
<li>Verified uv sync installs the local package</li>
<li>Verified <strong>init</strong>.py exists</li>
<li>Reproduced with minimal steps</li>
<li>Not using pip install/uninstall manually</li>
<li>Not modifying PYTHONPATH</li>
<li>VS Code open but issue reproduces only with terminal</li>
</ul>
<hr />
<h2>Question</h2>
<p>Is anything wrong with my configuration or usage of uv?</p>
<ul>
<li>Is this a known issue with uv and local packages?</li>
<li>Is there a recommended way to ensure the package is always importable?</li>
<li>Should I revert to venv + pip install -e . for stability?</li>
</ul>
<p>Any insight or workaround would be appreciated.</p>
<h3>Platform</h3>
<p>Darwin 25.1.0 arm64</p>
<h3>Version</h3>
<p>uv 0.9.15 (5eafae332 2025-12-02)</p>
<h3>Python version</h3>
<p>Python 3.12.7</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @jesusseper on 2025-12-04 12:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-12-04 14:38</div>
            <div class="timeline-body"><p>That's weird.</p>
<p>Do you have verbose logs for the <code>uv run</code> operations that fail? e.g., <code>uv run -vv  python -c &quot;import tfm_rag_municipal&quot;</code>? It'd be nice to see both the failing and succeeding cases there.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jesusseper">@jesusseper</a> on 2025-12-04 15:25</div>
            <div class="timeline-body"><p>Thanks for the quick reply!</p>
<p>I’ve collected verbose logs for both the succeeding and failing cases.</p>
<p>I started from a clean state with:</p>
<pre><code class="language-bash">rm -rf .venv uv.lock src/tfm_rag_municipal.egg-info
uv sync
</code></pre>
<hr />
<h3>1) Succeeding run</h3>
<p>Right after <code>uv sync</code>, this works:</p>
<pre><code class="language-bash">uv run -vv python -c &quot;import tfm_rag_municipal&quot;
</code></pre>
<p>Verbose output:</p>
<pre><code class="language-text">DEBUG uv 0.9.15 (5eafae332 2025-12-02)
TRACE Checking shared lock for `/Users/jesus/.cache/uv` at `/Users/jesus/.cache/uv/.lock`
DEBUG Acquired shared lock for `/Users/jesus/.cache/uv`
DEBUG Found project root: `/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal`
DEBUG No workspace root found, using project root
DEBUG Discovered project `tfm-rag-municipal` at: /Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal
TRACE Checking lock for `/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal` at `/var/folders/63/80bmhs111lvc5y5wf0gkcsjh0000gn/T/uv-39e
6438bbf77604a.lock`                                                                                                                                           DEBUG Acquired lock for `/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal`
DEBUG Reading Python requests from version file at `/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.python-version`
DEBUG Using Python request `3.12` from version file at `.python-version`
DEBUG Checking for Python environment at: `.venv`
TRACE Found cached interpreter info for Python 3.12.7, skipping query of: .venv/bin/python3
DEBUG The project environment's Python version satisfies the request: `Python 3.12`
TRACE The project environment's Python version meets the Python requirement: `&gt;=3.12`
TRACE The virtual environment's Python interpreter meets the Python preference: `prefer managed`
DEBUG Released lock at `/var/folders/63/80bmhs111lvc5y5wf0gkcsjh0000gn/T/uv-39e6438bbf77604a.lock`
TRACE Checking lock for `.venv` at `.venv/.lock`
DEBUG Acquired lock for `.venv`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: tfm-rag-municipal @ file:///Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal
DEBUG No workspace root found, using project root
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 17 packages in 35ms
DEBUG Using request timeout of 30s
TRACE Comparing installed with source: InstalledDist { kind: Url(InstalledDirectUrlDist { name: PackageName(&quot;tfm-rag-municipal&quot;), version: &quot;0.1.0&quot;, direct_url
: LocalDirectory { url: &quot;file:///Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal&quot;, dir_info: DirInfo { editable: Some(true) }, subdirectory: None }, url: DisplaySafeUrl { scheme: &quot;file&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: None, port: None, path: &quot;/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal&quot;, query: None, fragment: None }, editable: true, path: &quot;/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/tfm_rag_municipal-0.1.0.dist-info&quot;, cache_info: Some(CacheInfo { timestamp: Some(Timestamp(SystemTime { tv_sec: 1764847066, tv_nsec: 184468365 })), commit: None, tags: None, env: {}, directories: {&quot;src&quot;: Some(Timestamp(Timestamp(SystemTime { tv_sec: 1764846439, tv_nsec: 845151379 })))} }), build_info: Some(BuildInfo { config_settings: ConfigSettings({}), extra_build_requires: [], extra_build_variables: {} }) }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Directory { install_path: &quot;/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal&quot;, editable: Some(true), virtual: Some(false), url: VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;file&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: None, port: None, path: &quot;/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal&quot;, query: None, fragment: None }, given: None } }                                                                                                                                                       DEBUG Computed cache info: Timestamp(SystemTime { tv_sec: 1764847066, tv_nsec: 184468365 }), None, None, {}, {&quot;src&quot;: Some(Timestamp(Timestamp(SystemTime { tv_
sec: 1764846439, tv_nsec: 845151379 })))}. Most recently modified: pyproject.toml                                                                             DEBUG Requirement already installed: tfm-rag-municipal==0.1.0 (from file:///Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal)
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;pre-commit&quot;), version: &quot;4.5.0&quot;, path: &quot;/Users
/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/pre_commit-4.5.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;4.5.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }     DEBUG Requirement already installed: pre-commit==4.5.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;pytest&quot;), version: &quot;9.0.1&quot;, path: &quot;/Users/jes
us/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/pytest-9.0.1.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;9.0.1&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }             DEBUG Requirement already installed: pytest==9.0.1
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;ruff&quot;), version: &quot;0.14.7&quot;, path: &quot;/Users/jesu
s/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/ruff-0.14.7.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;0.14.7&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }              DEBUG Requirement already installed: ruff==0.14.7
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;cfgv&quot;), version: &quot;3.5.0&quot;, path: &quot;/Users/jesus
/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/cfgv-3.5.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;3.5.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }                 DEBUG Requirement already installed: cfgv==3.5.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;identify&quot;), version: &quot;2.6.15&quot;, path: &quot;/Users/
jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/identify-2.6.15.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;2.6.15&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }      DEBUG Requirement already installed: identify==2.6.15
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;nodeenv&quot;), version: &quot;1.9.1&quot;, path: &quot;/Users/je
sus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/nodeenv-1.9.1.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;1.9.1&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }           DEBUG Requirement already installed: nodeenv==1.9.1
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;pyyaml&quot;), version: &quot;6.0.3&quot;, path: &quot;/Users/jes
us/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/pyyaml-6.0.3.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;6.0.3&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }             DEBUG Requirement already installed: pyyaml==6.0.3
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;virtualenv&quot;), version: &quot;20.35.4&quot;, path: &quot;/Use
rs/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/virtualenv-20.35.4.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;20.35.4&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }                                                                                                                                                             DEBUG Requirement already installed: virtualenv==20.35.4
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;iniconfig&quot;), version: &quot;2.3.0&quot;, path: &quot;/Users/
jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/iniconfig-2.3.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;2.3.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }       DEBUG Requirement already installed: iniconfig==2.3.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;packaging&quot;), version: &quot;25.0&quot;, path: &quot;/Users/j
esus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/packaging-25.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;25.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }          DEBUG Requirement already installed: packaging==25.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;pluggy&quot;), version: &quot;1.6.0&quot;, path: &quot;/Users/jes
us/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/pluggy-1.6.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;1.6.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }             DEBUG Requirement already installed: pluggy==1.6.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;pygments&quot;), version: &quot;2.19.2&quot;, path: &quot;/Users/
jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/pygments-2.19.2.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;2.19.2&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }      DEBUG Requirement already installed: pygments==2.19.2
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;distlib&quot;), version: &quot;0.4.0&quot;, path: &quot;/Users/je
sus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/distlib-0.4.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;0.4.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }           DEBUG Requirement already installed: distlib==0.4.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;filelock&quot;), version: &quot;3.20.0&quot;, path: &quot;/Users/
jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/filelock-3.20.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;3.20.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }      DEBUG Requirement already installed: filelock==3.20.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;platformdirs&quot;), version: &quot;4.5.0&quot;, path: &quot;/Use
rs/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/platformdirs-4.5.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;4.5.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None } DEBUG Requirement already installed: platformdirs==4.5.0
Audited 16 packages in 11ms
DEBUG Released lock at `/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/.lock`
DEBUG Using Python 3.12.7 interpreter at: /Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/bin/python3
DEBUG Running `python -c import tfm_rag_municipal`
DEBUG Spawned child 53182 in process group 53181
DEBUG Command exited with code: 0
DEBUG Released lock at `/Users/jesus/.cache/uv/.lock`

</code></pre>
<hr />
<h3>2) Failing run</h3>
<p>After about 10 minutes of normal work (editing code) while frequently trying the command to check if it still works, I ran:</p>
<pre><code class="language-bash">git commit
</code></pre>
<p>This triggers my <code>pre-commit</code> hooks (trailing whitespace fixer, EOF fixer, Ruff, etc.), but doesn’t touch the virtualenv directly.</p>
<p>Immediately after that, the same command:</p>
<pre><code class="language-bash">uv run -vv python -c &quot;import tfm_rag_municipal&quot;
</code></pre>
<p>started failing with <code>ModuleNotFoundError</code>. In previous experiences I did not run commits, just had to wait to see it fail, so it may be a coincidence. Verbose output:</p>
<pre><code class="language-text">DEBUG uv 0.9.15 (5eafae332 2025-12-02)
TRACE Checking shared lock for `/Users/jesus/.cache/uv` at `/Users/jesus/.cache/uv/.lock`
DEBUG Acquired shared lock for `/Users/jesus/.cache/uv`
DEBUG Found project root: `/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal`
DEBUG No workspace root found, using project root
DEBUG Discovered project `tfm-rag-municipal` at: /Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal
TRACE Checking lock for `/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal` at `/var/folders/63/80bmhs111lvc5y5wf0gkcsjh0000gn/T/uv-39e
6438bbf77604a.lock`                                                                                                                                           DEBUG Acquired lock for `/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal`
DEBUG Reading Python requests from version file at `/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.python-version`
DEBUG Using Python request `3.12` from version file at `.python-version`
DEBUG Checking for Python environment at: `.venv`
TRACE Found cached interpreter info for Python 3.12.7, skipping query of: .venv/bin/python3
DEBUG The project environment's Python version satisfies the request: `Python 3.12`
TRACE The project environment's Python version meets the Python requirement: `&gt;=3.12`
TRACE The virtual environment's Python interpreter meets the Python preference: `prefer managed`
DEBUG Released lock at `/var/folders/63/80bmhs111lvc5y5wf0gkcsjh0000gn/T/uv-39e6438bbf77604a.lock`
TRACE Checking lock for `.venv` at `.venv/.lock`
DEBUG Acquired lock for `.venv`
DEBUG Using request timeout of 30s
DEBUG Found static `pyproject.toml` for: tfm-rag-municipal @ file:///Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal
DEBUG No workspace root found, using project root
DEBUG Existing `uv.lock` satisfies workspace requirements
Resolved 17 packages in 31ms
DEBUG Using request timeout of 30s
TRACE Comparing installed with source: InstalledDist { kind: Url(InstalledDirectUrlDist { name: PackageName(&quot;tfm-rag-municipal&quot;), version: &quot;0.1.0&quot;, direct_url
: LocalDirectory { url: &quot;file:///Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal&quot;, dir_info: DirInfo { editable: Some(true) }, subdirectory: None }, url: DisplaySafeUrl { scheme: &quot;file&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: None, port: None, path: &quot;/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal&quot;, query: None, fragment: None }, editable: true, path: &quot;/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/tfm_rag_municipal-0.1.0.dist-info&quot;, cache_info: Some(CacheInfo { timestamp: Some(Timestamp(SystemTime { tv_sec: 1764847066, tv_nsec: 184468365 })), commit: None, tags: None, env: {}, directories: {&quot;src&quot;: Some(Timestamp(Timestamp(SystemTime { tv_sec: 1764846439, tv_nsec: 845151379 })))} }), build_info: Some(BuildInfo { config_settings: ConfigSettings({}), extra_build_requires: [], extra_build_variables: {} }) }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Directory { install_path: &quot;/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal&quot;, editable: Some(true), virtual: Some(false), url: VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;file&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: None, port: None, path: &quot;/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal&quot;, query: None, fragment: None }, given: None } }                                                                                                                                                       DEBUG Computed cache info: Timestamp(SystemTime { tv_sec: 1764847066, tv_nsec: 184468365 }), None, None, {}, {&quot;src&quot;: Some(Timestamp(Timestamp(SystemTime { tv_
sec: 1764846439, tv_nsec: 845151379 })))}. Most recently modified: pyproject.toml                                                                             DEBUG Requirement already installed: tfm-rag-municipal==0.1.0 (from file:///Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal)
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;pre-commit&quot;), version: &quot;4.5.0&quot;, path: &quot;/Users
/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/pre_commit-4.5.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;4.5.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }     DEBUG Requirement already installed: pre-commit==4.5.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;pytest&quot;), version: &quot;9.0.1&quot;, path: &quot;/Users/jes
us/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/pytest-9.0.1.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;9.0.1&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }             DEBUG Requirement already installed: pytest==9.0.1
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;ruff&quot;), version: &quot;0.14.7&quot;, path: &quot;/Users/jesu
s/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/ruff-0.14.7.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;0.14.7&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }              DEBUG Requirement already installed: ruff==0.14.7
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;cfgv&quot;), version: &quot;3.5.0&quot;, path: &quot;/Users/jesus
/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/cfgv-3.5.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;3.5.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }                 DEBUG Requirement already installed: cfgv==3.5.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;identify&quot;), version: &quot;2.6.15&quot;, path: &quot;/Users/
jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/identify-2.6.15.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;2.6.15&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }      DEBUG Requirement already installed: identify==2.6.15
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;nodeenv&quot;), version: &quot;1.9.1&quot;, path: &quot;/Users/je
sus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/nodeenv-1.9.1.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;1.9.1&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }           DEBUG Requirement already installed: nodeenv==1.9.1
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;pyyaml&quot;), version: &quot;6.0.3&quot;, path: &quot;/Users/jes
us/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/pyyaml-6.0.3.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;6.0.3&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }             DEBUG Requirement already installed: pyyaml==6.0.3
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;virtualenv&quot;), version: &quot;20.35.4&quot;, path: &quot;/Use
rs/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/virtualenv-20.35.4.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;20.35.4&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }                                                                                                                                                             DEBUG Requirement already installed: virtualenv==20.35.4
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;iniconfig&quot;), version: &quot;2.3.0&quot;, path: &quot;/Users/
jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/iniconfig-2.3.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;2.3.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }       DEBUG Requirement already installed: iniconfig==2.3.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;packaging&quot;), version: &quot;25.0&quot;, path: &quot;/Users/j
esus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/packaging-25.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;25.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }          DEBUG Requirement already installed: packaging==25.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;pluggy&quot;), version: &quot;1.6.0&quot;, path: &quot;/Users/jes
us/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/pluggy-1.6.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;1.6.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }             DEBUG Requirement already installed: pluggy==1.6.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;pygments&quot;), version: &quot;2.19.2&quot;, path: &quot;/Users/
jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/pygments-2.19.2.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;2.19.2&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }      DEBUG Requirement already installed: pygments==2.19.2
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;distlib&quot;), version: &quot;0.4.0&quot;, path: &quot;/Users/je
sus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/distlib-0.4.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;0.4.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }           DEBUG Requirement already installed: distlib==0.4.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;filelock&quot;), version: &quot;3.20.0&quot;, path: &quot;/Users/
jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/filelock-3.20.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;3.20.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None }      DEBUG Requirement already installed: filelock==3.20.0
TRACE Comparing installed with source: InstalledDist { kind: Registry(InstalledRegistryDist { name: PackageName(&quot;platformdirs&quot;), version: &quot;4.5.0&quot;, path: &quot;/Use
rs/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/lib/python3.12/site-packages/platformdirs-4.5.0.dist-info&quot;, cache_info: None, build_info: None }), metadata_cache: OnceLock(&lt;uninit&gt;), tags_cache: OnceLock(&lt;uninit&gt;) } Registry { specifier: VersionSpecifiers([VersionSpecifier { operator: Equal, version: &quot;4.5.0&quot; }]), index: Some(IndexMetadata { url: Pypi(VerbatimUrl { url: DisplaySafeUrl { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;pypi.org&quot;)), port: None, path: &quot;/simple&quot;, query: None, fragment: None }, given: None }), format: Simple }), conflict: None } DEBUG Requirement already installed: platformdirs==4.5.0
Audited 16 packages in 11ms
DEBUG Released lock at `/Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/.lock`
DEBUG Using Python 3.12.7 interpreter at: /Users/jesus/Documents/MASTER_BIG_DATA/python_projects/tfm-rag-municipal/.venv/bin/python3
DEBUG Running `python -c import tfm_rag_municipal`
DEBUG Spawned child 62984 in process group 62983
Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 1, in &lt;module&gt;
ModuleNotFoundError: No module named 'tfm_rag_municipal'
DEBUG Command exited with code: 1
DEBUG Released lock at `/Users/jesus/.cache/uv/.lock`

</code></pre>
<p>In both logs I can see uv detecting the project, using the same <code>.venv</code> and the same Python interpreter, and confirming that <code>tfm-rag-municipal==0.1.0</code> is already installed as an editable local package from the project directory. The only difference is that in the failing case the child Python process exits with:</p>
<pre><code class="language-text">ModuleNotFoundError: No module named 'tfm_rag_municipal'
</code></pre>
<p>I didn’t change <code>pyproject.toml</code>, the directory structure, or the environment configuration between the successful and failing runs — the only notable event in between was running <code>git commit</code> (which runs the <code>pre-commit</code> hooks).</p>
<p>Let me know if any other diagnostics would be useful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-10 14:53</div>
            <div class="timeline-body"><p>What are those pre-commit hooks running, are they potentially changing the venv? I can't reproduce the failure and wouldn't know where uv would make those changes and we haven't seen this behavior before, my best guess is that there is some other tool that traverses the whole projects and makes some change that sets the pth file to hidden.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @konstin on 2025-12-10 14:53</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:33:36 UTC
    </footer>
</body>
</html>
