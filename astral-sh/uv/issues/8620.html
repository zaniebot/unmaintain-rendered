<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using a consistent set of dependencies across many tools with isolated virtual environments - astral-sh/uv #8620</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Using a consistent set of dependencies across many tools with isolated virtual environments</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/8620">#8620</a>
        opened by <a href="https://github.com/jarshwah">@jarshwah</a>
        on 2024-10-28 00:52
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/jarshwah">@jarshwah</a> on 2024-10-28 00:52</div>
            <div class="timeline-body"><p>I'm curious how we can ensure that we use a consistent set of dependencies across multiple tools and a &quot;development&quot; environment.</p>
<p>A simplified scenario is that we have a bunch of different tools we want to run, some of which share dependencies, and we want to ensure that only the minimal set of dependencies are installed for each tool. Consider a project:</p>
<pre><code>[project]
name = &quot;example&quot;
dependencies = [
    &quot;django==5.0&quot;,
    ...
]

[dependency-groups]
dev = [
    { include-group = &quot;mypy&quot; }
]
mypy = [
	&quot;mypy==1.2.3&quot;,
    &quot;mypy-plugin-x=3.2.1&quot;
]
</code></pre>
<p>How can I run <code>mypy</code> against my project without installing <code>django</code> into the environment?</p>
<p>If I'm also using <code>pre-commit</code> - how can I ensure that the pre-commit <code>mypy</code> hook also uses the specific versions above?</p>
<p>Prior to the announcement of PEP 735 support - I would also wonder how to ensure that developers have the right version of <code>mypy</code> locally so that their language server/extension used the correct version of <code>mypy</code> - but dependency groups seems to cover that.</p>
<p>What I'm looking for is a single place to define &quot;mypy==1.2.3&quot; so that <code>uv tool run mypy</code> uses that version, mypy running in the vscode mypy extension uses that version, and pre-commit running a mypy hook uses that version. If any other tools we run locally also need to reference <code>mypy</code> they should <em>also</em> be locked to <code>mypy==1.2.3</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-10-28 14:05</div>
            <div class="timeline-body"><blockquote>
<p>How can I run mypy against my project without installing django into the environment?</p>
</blockquote>
<pre><code>uv sync --only-group mypy
</code></pre>
<p>I think <code>mypy</code> generally requires that your project is installed though, so it can inspect dependencies for type information?</p>
<blockquote>
<p>If I'm also using pre-commit - how can I ensure that the pre-commit mypy hook also uses the specific versions above?</p>
</blockquote>
<p>Unfortunately, pre-commit doesn't play well with reading versions from outside it's configuration. Maybe with a <a href="https://pre-commit.com/#system">system</a> hook? Historically, I've written a script to patch its versions to match the external versions.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-10-28 14:05</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:31:19 UTC
    </footer>
</body>
</html>
