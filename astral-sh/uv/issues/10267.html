<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Best Practices / Official support to work with CMake FindPython module - astral-sh/uv #10267</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Best Practices / Official support to work with CMake FindPython module</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/10267">#10267</a>
        opened by <a href="https://github.com/YouJiacheng">@YouJiacheng</a>
        on 2025-01-02 01:33
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/YouJiacheng">@YouJiacheng</a> on 2025-01-02 01:33</div>
            <div class="timeline-body"><p><a href="https://cmake.org/cmake/help/latest/module/FindPython.html">CMake FindPython</a></p>
<p>It's required by <a href="https://nanobind.readthedocs.io/en/latest/building.html">nanobind</a>.</p>
<p><code>pybind11</code> also has a <a href="https://pybind11.readthedocs.io/en/stable/compiling.html#findpython-mode">CMake FindPython mode</a>.</p>
<p>FYI, <code>pybind11</code>'s <a href="https://pybind11.readthedocs.io/en/stable/compiling.html#building-manually">manual build mode</a> doesn't work out of box with <code>uv</code>, see https://github.com/astral-sh/uv/issues/10263</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/YouJiacheng">@YouJiacheng</a> on 2025-01-02 01:53</div>
            <div class="timeline-body"><p>Seems to be
<code>source .venv/bin/activate</code>
and</p>
<pre><code class="language-cmake">cmake_minimum_required(VERSION 3.18...3.27)

project(my_project)

set(Python_FIND_VIRTUALENV FIRST) # This is the default.
find_package(Python 3.8 COMPONENTS Interpreter Development.Module REQUIRED)

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-02 01:56</div>
            <div class="timeline-body"><p>Can you describe in a bit more detail what you're trying to do? A simple example repository reproducing your problem would be helpful.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-01-02 01:56</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "[Question / Feature Request] Best Practices / Official support to work with CMake FindPython module" to "Best Practices / Official support to work with CMake FindPython module" by @zanieb on 2025-01-02 01:56</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/YouJiacheng">@YouJiacheng</a> on 2025-01-02 02:02</div>
            <div class="timeline-body"><p>I'm trying to make <code>find_package(Python 3.8 COMPONENTS Interpreter Development.Module REQUIRED)</code> in CMake can find the correct python installed by <code>uv</code>. Current experiments show that activating the virtual environment is enough.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2025-01-03 23:42</div>
            <div class="timeline-body"><p>Have you taken a look at  <code>uv init --build-backend scikit</code>? It has an example with scikit-build-core, cmake, and pybind which should work as expected. scikit-build-core facilitates the correct interpreter discovery for you. If you can't rely on anything besides pure cmake you'd have to configure something like you did such as <code>set(Python_FIND_VIRTUALENV FIRST)</code> or other FindPython3 settings such as find stratgegy and root dir so it finds the uv managed pythons.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-03-03 03:25</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kyle-basis">@kyle-basis</a> on 2025-07-06 23:34</div>
            <div class="timeline-body"><p>@YouJiacheng I just released this today that might fit what you need https://github.com/basis-robotics/uvtarget</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cclinet">@cclinet</a> on 2025-08-15 10:53</div>
            <div class="timeline-body"><p>For anyone running into the same problem, hereâ€™s a tip: <strong>activating the virtual environment is actually unnecessary. You just need to add the following in your CMake configuration:</strong></p>
<pre><code class="language-CMake">set(Python_FIND_VIRTUALENV FIRST)
</code></pre>
<p>This makes CMake use the correct venv created by uv.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 03:26:26 UTC
    </footer>
</body>
</html>
