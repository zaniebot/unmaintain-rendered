```yaml
number: 15987
title: uvx ruff check fails to spawn Ruff
type: issue
state: closed
author: rogersei
labels:
  - bug
assignees: []
created_at: 2025-09-22T16:28:41Z
updated_at: 2025-09-22T20:41:09Z
url: https://github.com/astral-sh/uv/issues/15987
synced_at: 2026-01-10T01:57:35Z
```

# uvx ruff check fails to spawn Ruff

---

_Issue opened by @rogersei on 2025-09-22 16:28_

### Summary

On both the ghcr.io/astral-sh/uv:0.8.19-python3.13-trixie-slim and ghcr.io/astral-sh/uv:0.8.19-python3.13-bookworm-slim, running Ruff via the tool interface `uvx ruff check` throws the following error

```bash
root@fb4f43ebb24e:/workspaces/mdmetrix_api# uvx ruff check
Installed 1 package in 17ms
error: Failed to spawn: `ruff`
  Caused by: No such file or directory (os error 2)
```

Note - running `uv tool install ruff` succeeds and then `uvx ruff check` functions correctly.

Also tested uv 0.8.19 on Windows directly and it does not have this issue.

### Platform

Debian Docker images

### Version

0.8.19

### Python version

3.13

---

_Label `bug` added by @rogersei on 2025-09-22 16:28_

---

_Comment by @my1e5 on 2025-09-22 16:42_

Possibly related to https://github.com/astral-sh/uv/issues/15967?

---

_Comment by @zanieb on 2025-09-22 16:42_

Can you share verbose logs as described in #9452?

---

_Comment by @zanieb on 2025-09-22 16:44_

`docker run --rm -it ghcr.io/astral-sh/uv:0.8.19-python3.13-trixie-slim uvx ruff check` does not reproduce this issue

---

_Comment by @rogersei on 2025-09-22 17:07_

> Possibly related to [#15967](https://github.com/astral-sh/uv/issues/15967)?

This is an interesting correlation. 

EDIT: We do set no cache via Env Var  ~While we don't use the `--no-cache` flag~, we do use a `uv python install` and install 3.11.7

we build a build image with this Dockerfile
```
FROM ghcr.io/astral-sh/uv:0.8.19-python3.13-bookworm-slim
# OS patching
RUN apt-get update && \
    apt-get dist-upgrade -y && \
    apt-get autoclean -y && \
    apt-get purge -y 
CMD ["/bin/sh"]
```

and then use that image in our CI pipeline with
```
uv sync
uv run pytest ...
uvx run ruff check...
```

the project has a `.python-version` file with `3.13.7`

---

_Comment by @rogersei on 2025-09-22 17:09_

> Can you share verbose logs as described in [#9452](https://github.com/astral-sh/uv/issues/9452)?

Neither form of running it gives any additional logs

```bash
root@f3a799d7df92:/workspaces/mdmetrix_api# uvx ruff check --verbose
Installed 1 package in 26ms
error: Failed to spawn: `ruff`
  Caused by: No such file or directory (os error 2)

root@f3a799d7df92:/workspaces/mdmetrix_api# uv tool run ruff check --verbose
Installed 1 package in 22ms
error: Failed to spawn: `ruff`
  Caused by: No such file or directory (os error 2)
```


---

_Comment by @zanieb on 2025-09-22 17:21_

You're passing `--verbose` to `ruff`. Use `uvx -vv ruff check` instead.

---

_Comment by @zanieb on 2025-09-22 17:24_

If you're setting `UV_NO_CACHE` then that's the cause of the problem though.

---

_Comment by @rogersei on 2025-09-22 17:30_

> If you're setting `UV_NO_CACHE` then that's the cause of the problem though.

so its a dupe of #15967 then since we are setting `UV_NO_CACHE: "TRUE"`

For completeness, this is the end of the debug logs

```
Downloading ruff (12.6MiB)
 Downloading ruff
Prepared 1 package in 2.95s
TRACE Extracting file name=PackageName("ruff")
TRACE Extracted 7 files name=PackageName("ruff")
TRACE No entrypoints name=PackageName("ruff")
TRACE Installing data/scripts to /tmp/.tmpVKVSmR/builds-v0/.tmp5q3uRo/bin dist_name=PackageName("ruff")
TRACE Writing installer metadata name=PackageName("ruff")
TRACE Writing record name=PackageName("ruff")
Installed 1 package in 22ms
 + ruff==0.13.1
DEBUG Checking for Python environment at: `/tmp/.tmpVKVSmR/archive-v0/60C_2GED4nH3drrEtcxNJ`
TRACE Querying interpreter executable at /tmp/.tmpVKVSmR/archive-v0/60C_2GED4nH3drrEtcxNJ/bin/python3
DEBUG Looking at `.dist-info` at: /tmp/.tmpVKVSmR/archive-v0/60C_2GED4nH3drrEtcxNJ/lib/python3.13/site-packages/ruff-0.13.1.dist-info
DEBUG Running `ruff check`
DEBUG Released lock at `/tmp/.tmpVKVSmR/.lock`
TRACE Error trace: Failed to spawn: `ruff`

Caused by:
    No such file or directory (os error 2)
error: Failed to spawn: `ruff`
  Caused by: No such file or directory (os error 2)
```

---

_Comment by @rogersei on 2025-09-22 17:54_

setting UV_NO_CACHE to false does address the issue - so closing as dupe

Thanks for the help!

---

_Closed by @zanieb on 2025-09-22 18:26_

---

_Referenced in [astral-sh/uv#15990](../../astral-sh/uv/pulls/15990.md) on 2025-09-22 20:05_

---

_Closed by @zanieb on 2025-09-22 20:41_

---
