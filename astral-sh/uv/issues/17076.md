```yaml
number: 17076
title: "Shell completions could be improved with better use of `clap` value hints"
type: issue
state: open
author: EliteTK
labels:
  - enhancement
  - cli
assignees: []
created_at: 2025-12-10T17:11:49Z
updated_at: 2025-12-10T17:11:49Z
url: https://github.com/astral-sh/uv/issues/17076
synced_at: 2026-01-10T01:57:37Z
```

# Shell completions could be improved with better use of `clap` value hints

---

_Issue opened by @EliteTK on 2025-12-10 17:11_

### Summary

Currently `uv`'s CLI doesn't apply `value_hint` to arguments which take strings[^1]/urls[^2]/paths[^3]. Adding value hints will generate more accurate completions such that shells do not attempt to complete irrelevant things (like a file path for a version) and can instead suggest things like only files, directories, or URLs.

In some cases `uv`'s arguments can take two different types of data (most commonly a URL or file path), in these cases the current behaviour should probably be kept for now until either `clap-complete` begins supporting more advanced completion configuration and/or dynamic completion is implemented.

[^1]: e.g. `uv help <command>...`
[^2]: e.g. `uv python install --pypy-mirror <pypy_mirror>`
[^3]: e.g. `uv --cache-dir <CACHE_DIR>`

### Example

Examples in zsh:

```zsh session
$ uv python install --pypy-mirror=<TAB>
Completing PYPY_MIRROR
file:      ftp://     gopher://  http://    https:// 
```

```zsh session
$ uv help <TAB>
Completing command
```

```zsh session
% uv --cache-dir=<TAB>
Completing CACHE_DIR
dir/        other_dir/
```

---

_Label `enhancement` added by @EliteTK on 2025-12-10 17:11_

---

_Label `cli` added by @EliteTK on 2025-12-10 17:11_

---

_Referenced in [astral-sh/uv#17080](../../astral-sh/uv/pulls/17080.md) on 2025-12-10 23:11_

---
