<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>``uv pip install`` cannot find ``wheel`` module when installing ``openCC`` from git on uv 0.2.22. - astral-sh/uv #4886</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv pip install</code> cannot find <code>wheel</code> module when installing <code>openCC</code> from git on uv 0.2.22.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/4886">#4886</a>
        opened by <a href="https://github.com/FishAlchemist">@FishAlchemist</a>
        on 2024-07-08 06:35
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/FishAlchemist">@FishAlchemist</a></div>
            <div class="timeline-body"><p><strong>OS:</strong> Ubuntu 20.04 (x86_64)
<strong>UV:</strong> uv 0.2.22
<strong>Note:</strong> This problem also occurs in Windows 11 23H2 (x86_64)</p>
<h3>Command</h3>
<pre><code class="language-bash">uv pip install git+https://github.com/BYVoid/OpenCC.git@ver.1.1.7 --verbose
</code></pre>
<p><strong>uv pip list</strong> (The same error occurs regardless of whether or not there are <code>seed packages</code>)</p>
<pre><code class="language-bash">Package    Version
---------- -------
pip        24.1.2
setuptools 70.2.0
wheel      0.43.0
</code></pre>
</table>

<details>

<summary> Verbose output </summary>

<pre><code class="language-bash">DEBUG uv 0.2.22
DEBUG Searching for Python interpreter in system path
DEBUG Found cpython 3.10.14 at `$HOME/LaniusTW_CSAI_114/project_api/.venv/bin/python3` (active virtual environment)
DEBUG Using Python 3.10.14 environment at .venv/bin/python3
DEBUG Acquired lock for `.venv`
DEBUG At least one requirement is not satisfied: git+https://github.com/BYVoid/OpenCC.git@ver.1.1.7
DEBUG Using request timeout of 30s
DEBUG Updating git source `Url { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;github.com&quot;)), port: None, path: &quot;/BYVoid/OpenCC.git&quot;, query: None, fragment: None }`
DEBUG Attempting GitHub fast path for: https://api.github.com/repos/BYVoid/OpenCC/commits/ver.1.1.7
DEBUG Performing a Git fetch for: https://github.com/BYVoid/OpenCC.git
DEBUG failed to fetch refspec `+refs/heads/ver.1.1.7:refs/remotes/origin/ver.1.1.7`: process didn't exit successfully: `git fetch --force --update-head-ok 'https://github.com/BYVoid/OpenCC.git' '+refs/heads/ver.1.1.7:refs/remotes/origin/ver.1.1.7'` (exit status: 128)
--- stderr
fatal: couldn't find remote ref refs/heads/ver.1.1.7

DEBUG Fetching source distribution from Git: https://github.com/BYVoid/OpenCC.git
DEBUG Acquired lock for `https://github.com/byvoid/opencc`
DEBUG Using existing git source `Url { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;github.com&quot;)), port: None, path: &quot;/BYVoid/OpenCC.git&quot;, query: None, fragment: None }`
DEBUG Acquired lock for `$HOME/.cache/uv/built-wheels-v3/git/cf21aed2da4d2e45/e5d6c5f1b78e28a5`
DEBUG Preparing metadata for: git+https://github.com/BYVoid/OpenCC.git@ver.1.1.7
DEBUG No static `PKG-INFO` available for: git+https://github.com/BYVoid/OpenCC.git@ver.1.1.7 (MissingPkgInfo)
DEBUG No static `pyproject.toml` available for: git+https://github.com/BYVoid/OpenCC.git@ver.1.1.7 (MissingPyprojectToml)
INFO Ignoring empty directory
DEBUG Solving with installed Python version: 3.10.14
DEBUG Adding direct dependency: setuptools&gt;=40.8.0
DEBUG Found fresh response for: https://pypi.org/simple/setuptools/
DEBUG Searching for a compatible version of setuptools (&gt;=40.8.0)
DEBUG Selecting: setuptools==70.2.0 (setuptools-70.2.0-py3-none-any.whl)
DEBUG Found fresh response for: https://files.pythonhosted.org/packages/42/54/2a8ecfcc9a714a6fbf86559a4b0f50b126a4ac4269ea8134f2c75c3e73de/setuptools-70.2.0-py3-none-any.whl.metadata
DEBUG Tried 1 versions: setuptools 1
DEBUG Split  took 0.004s
DEBUG Installing in setuptools==70.2.0 in $HOME/.cache/uv/builds-v0/.tmprXAvQu
DEBUG Requirement already cached: setuptools==70.2.0
DEBUG Installing build requirement: setuptools==70.2.0
DEBUG Calling `setuptools.build_meta:__legacy__.get_requires_for_build_wheel()`
error: Failed to build: `git+https://github.com/BYVoid/OpenCC.git@ver.1.1.7`
  Caused by: Build backend failed to determine extra requires with `build_wheel()` with exit status: 1
--- stdout:

--- stderr:
Traceback (most recent call last):
  File &quot;&lt;string&gt;&quot;, line 14, in &lt;module&gt;
  File &quot;$HOME/.cache/uv/builds-v0/.tmprXAvQu/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 327, in get_requires_for_build_wheel
    return self._get_build_requires(config_settings, requirements=[])
  File &quot;$HOME/.cache/uv/builds-v0/.tmprXAvQu/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 297, in _get_build_requires
    self.run_setup()
  File &quot;$HOME/.cache/uv/builds-v0/.tmprXAvQu/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 497, in run_setup
    super().run_setup(setup_script=setup_script)
  File &quot;$HOME/.cache/uv/builds-v0/.tmprXAvQu/lib/python3.10/site-packages/setuptools/build_meta.py&quot;, line 313, in run_setup
    exec(code, locals())
  File &quot;&lt;string&gt;&quot;, line 9, in &lt;module&gt;
ModuleNotFoundError: No module named 'wheel'
---
</code></pre>
</details>

<hr />
<p>Successfully installed using <code>pip</code>.</p>
<h3>pip commnad</h3>
<pre><code class="language-bash">pip install git+https://github.com/BYVoid/OpenCC.git@ver.1.1.7
</code></pre>
<p><strong>output:</strong></p>
<pre><code>Collecting git+https://github.com/BYVoid/OpenCC.git@ver.1.1.7
  Cloning https://github.com/BYVoid/OpenCC.git (to revision ver.1.1.7) to /tmp/pip-req-build-go6tdxfs
  Running command git clone -q https://github.com/BYVoid/OpenCC.git /tmp/pip-req-build-go6tdxfs
  Running command git checkout -q e5d6c5f1b78e28a5797e7ad3ede3513314e544b7
Building wheels for collected packages: OpenCC
  Building wheel for OpenCC (setup.py) ... done
  Created wheel for OpenCC: filename=OpenCC-1.1.7-cp38-cp38-manylinux1_x86_64.whl size=10021 sha256=d84f85a7321a8700db4bc4d527f8714fc7b5aa5589dc7931895674f936bbc5a5
  Stored in directory: /tmp/pip-ephem-wheel-cache-u21q9vub/wheels/42/db/0e/4cb4c29ba02dc9d8721df98294b35af619b7f74ef16a0ea6f3
Successfully built OpenCC
Installing collected packages: OpenCC
Successfully installed OpenCC-1.1.7
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "``uv pip install`` cannot find ``wheel`` module when installing openCC from git on uv 0.2.22." to "``uv pip install`` cannot find ``wheel`` module when installing ``openCC`` from git on uv 0.2.22." by @FishAlchemist on 2024-07-08 06:35</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/whittid4">@whittid4</a> on 2024-07-08 10:31</div>
            <div class="timeline-body"><p>Not sure if this is the same issue we are seeing, but <code>uv 0.2.22</code> is not respecting pinned dependencies in the wheel. Pinning <code>uv</code> to an older version fixed it for us.</p>
<p>If unrelated I can create another issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/FishAlchemist">@FishAlchemist</a> on 2024-07-08 10:51</div>
            <div class="timeline-body"><blockquote>
<p>Not sure if this is the same issue we are seeing, but <code>uv 0.2.22</code> is not respecting pinned dependencies in the wheel. Pinning <code>uv</code> to an older version fixed it for us.</p>
<p>If unrelated I can create another issue.</p>
</blockquote>
<p>How old is the version?
I get the error <code>ModuleNotFoundError: No module named 'wheel'</code> when I run the command with the following UV version on Windows 11 23H2 (x86_64).</p>
<ul>
<li>uv 0.2.21</li>
<li>uv 0.2.20</li>
<li>uv 0.2.19</li>
<li>uv 0.2.18</li>
<li>uv 0.2.17</li>
<li>uv 0.2.16</li>
<li>uv 0.2.15
I didn't test 0.2.11 ~ 0.2.14</li>
<li>uv 0.2.10
I didn't test 0.2.1 ~ 0.2.9</li>
<li>uv 0.2.0</li>
<li>uv 0.1.45
I have not tested versions older than 0.1.45.</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2024-07-08 10:53</div>
            <div class="timeline-body"><p>I think this issue is an instance of https://github.com/astral-sh/uv/issues/2252</p>
<p>@whittid4 Could you open a separate issue with more details for reproduction?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/whittid4">@whittid4</a> on 2024-07-08 11:02</div>
            <div class="timeline-body"><p>@konstin yeah, I will try and get a small example together this afternoon.</p>
<p>We got it working on <code>0.2.18</code> and below, version <code>0.2.19</code> and above is failing.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-08 13:22</div>
            <div class="timeline-body"><p>Yeah, this is a problem with the package:</p>
<pre><code>❯ pip install --use-pep517 git+https://github.com/BYVoid/OpenCC.git@ver.1.1.7
Collecting git+https://github.com/BYVoid/OpenCC.git@ver.1.1.7
  Cloning https://github.com/BYVoid/OpenCC.git (to revision ver.1.1.7) to /private/var/folders/nt/6gf2v7_s3k13zq_t3944rwz40000gn/T/pip-req-build-lz7b4_dp
  Running command git clone --filter=blob:none --quiet https://github.com/BYVoid/OpenCC.git /private/var/folders/nt/6gf2v7_s3k13zq_t3944rwz40000gn/T/pip-req-build-lz7b4_dp
  Running command git checkout -q e5d6c5f1b78e28a5797e7ad3ede3513314e544b7
  Resolved https://github.com/BYVoid/OpenCC.git to commit e5d6c5f1b78e28a5797e7ad3ede3513314e544b7
  Installing build dependencies ... done
  Getting requirements to build wheel ... error
  error: subprocess-exited-with-error

  × Getting requirements to build wheel did not run successfully.
  │ exit code: 1
  ╰─&gt; [20 lines of output]
      Traceback (most recent call last):
        File &quot;/Users/crmarsh/.local/share/rtx/installs/python/3.12.3/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 353, in &lt;module&gt;
          main()
        File &quot;/Users/crmarsh/.local/share/rtx/installs/python/3.12.3/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 335, in main
          json_out['return_val'] = hook(**hook_input['kwargs'])
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/Users/crmarsh/.local/share/rtx/installs/python/3.12.3/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py&quot;, line 118, in get_requires_for_build_wheel
          return hook(config_settings)
                 ^^^^^^^^^^^^^^^^^^^^^
        File &quot;/private/var/folders/nt/6gf2v7_s3k13zq_t3944rwz40000gn/T/pip-build-env-mnle05bg/overlay/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 327, in get_requires_for_build_wheel
          return self._get_build_requires(config_settings, requirements=[])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/private/var/folders/nt/6gf2v7_s3k13zq_t3944rwz40000gn/T/pip-build-env-mnle05bg/overlay/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 297, in _get_build_requires
          self.run_setup()
        File &quot;/private/var/folders/nt/6gf2v7_s3k13zq_t3944rwz40000gn/T/pip-build-env-mnle05bg/overlay/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 497, in run_setup
          super().run_setup(setup_script=setup_script)
        File &quot;/private/var/folders/nt/6gf2v7_s3k13zq_t3944rwz40000gn/T/pip-build-env-mnle05bg/overlay/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 313, in run_setup
          exec(code, locals())
        File &quot;&lt;string&gt;&quot;, line 9, in &lt;module&gt;
      ModuleNotFoundError: No module named 'wheel'
      [end of output]

  note: This error originates from a subprocess, and is likely not a problem with pip.
error: subprocess-exited-with-error

× Getting requirements to build wheel did not run successfully.
│ exit code: 1
╰─&gt; See above for output.

note: This error originates from a subprocess, and is likely not a problem with pip.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-07-08 13:22</div>
            <div class="timeline-body"><p>You'll need to either fix the package to express <code>wheel</code> as a build dependency, or use <code>--no-build-isolation</code> when installing it.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-07-08 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-07-08 13:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:25:31 UTC
    </footer>
</body>
</html>
