<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pyqt5安装问题 - astral-sh/uv #15928</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>pyqt5安装问题</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/15928">#15928</a>
        opened by <a href="https://github.com/Y-ASLant">@Y-ASLant</a>
        on 2025-09-18 09:13
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Y-ASLant">@Y-ASLant</a> on 2025-09-18 09:13</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>我在用0.8.15之前时，在pyproject.toml中加入</p>
<pre><code class="language-bash">[tool.uv]
required-environments = [ &quot;sys_platform == 'win32'&quot; ]
</code></pre>
<p>是可以在Windows下安装Pyqt5的，但是最近升级后，却发现无法使用uv add或者uv sync自动安装pyqt5了，这对我来说 非常不方便。只能多执行一步uv pip install pyqt5才可以安装，有什么好的解决方法吗？只需要客户执行一下uv sync就可以自动安装依赖。</p>
<h3>Platform</h3>
<p>Windows</p>
<h3>Version</h3>
<p>0.8.18</p>
<h3>Python version</h3>
<p>Python3.12</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @Y-ASLant on 2025-09-18 09:13</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Y-ASLant">@Y-ASLant</a> on 2025-09-18 09:15</div>
            <div class="timeline-body"><p>我需要的场景是，客户拿到我的项目，在相同平台、系统架构下，只需要执行uv sync就可以直接自动安装好所有的依赖。</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-09-18 09:31</div>
            <div class="timeline-body"><p>What error message do you get? Can you share a minimal example and the output of <code>uv sync -v</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Y-ASLant">@Y-ASLant</a> on 2025-09-18 10:19</div>
            <div class="timeline-body"><blockquote>
<p>What error message do you get? Can you share a minimal example and the output of <code>uv sync -v</code>?</p>
</blockquote>
<p>(yolov5) PS L:\yolov5\label&gt; uv add pyqt5
warning: <code>VIRTUAL_ENV=.venv</code> does not match the project environment path <code>L:\莱芜职业\Yolo模型训练\yolov5\.venv</code> and will be ignored; use <code>--active</code> to target the active environment instead
Resolved 64 packages in 653ms
error: Distribution <code>pyqt5-qt5==5.15.17 @ registry+https://pypi.org/simple</code> can't be installed because it doesn't have a source distribution or wheel for the current platform</p>
<p>hint: You're on Windows (<code>win_amd64</code>), but <code>pyqt5-qt5</code> (v5.15.17) only has wheels for the following platforms: <code>manylinux2014_x86_64</code>, <code>macosx_10_13_x86_64</code>, <code>macosx_11_0_arm64</code>; consider adding your platform to <code>tool.uv.required-environments</code> to ensure uv resolves to a version with compatible wheels</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Y-ASLant">@Y-ASLant</a> on 2025-09-18 10:21</div>
            <div class="timeline-body"><blockquote>
<p>What error message do you get? Can you share a minimal example and the output of <code>uv sync -v</code>?</p>
</blockquote>
<p>(yolov5) PS L:\yolov5\label&gt; uv sync -v
DEBUG uv 0.8.18 (c4c47814a 2025-09-17)
DEBUG Found project root: <code>L:\yolov5\label</code>
DEBUG Found workspace root: <code>L:\yolov5</code>
DEBUG Adding root workspace member: <code>L:\yolov5</code>
DEBUG Adding discovered workspace member: <code>L:\yolov5\label</code>
DEBUG Acquired lock for <code>L:\yolov5</code>
DEBUG Reading Python requests from version file at <code>L:\yolov5\.python-version</code>
DEBUG Using Python request <code>3.12</code> from version file at <code>L:\yolov5\.python-version</code>
warning: <code>VIRTUAL_ENV=.venv</code> does not match the project environment path <code>L:\yolov5\.venv</code> and will be ignored; use <code>--active</code> to target the active environment instead
DEBUG Checking for Python environment at: <code>L:\yolov5\.venv</code>
DEBUG The project environment's Python version satisfies the request: <code>Python 3.12</code>
DEBUG Released lock at <code>C:\Users\ASLan\AppData\Local\Temp\uv-85941e05af523b41.lock</code>
DEBUG Acquired lock for <code>L:\yolov5\.venv</code>
DEBUG Using request timeout of 30s
DEBUG Found static <code>pyproject.toml</code> for: label @ file:///L:/%E8%8E%B1%E8%8A%9C%E8%81%8C%E4%B8%9A/Yolo%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83/yolov5/label
DEBUG Found workspace root: <code>L:\yolov5</code>
DEBUG Found static <code>pyproject.toml</code> for: yolov5 @ file:///L:/%E8%8E%B1%E8%8A%9C%E8%81%8C%E4%B8%9A/Yolo%E6%A8%A1%E5%9E%8B%E8%AE%AD%E7%BB%83/yolov5
DEBUG Found workspace root: <code>L:\yolov5</code>
DEBUG Existing <code>uv.lock</code> satisfies workspace requirements
Resolved 61 packages in 4ms
DEBUG Using request timeout of 30s
DEBUG Unnecessary package: pandas==2.3.2
DEBUG Unnecessary package: sympy==1.14.0
DEBUG Unnecessary package: torch==2.8.0
warning: Failed to uninstall package at L:\yolov5.venv\Lib\site-packages\pandas-2.3.2.dist-info due to missing <code>RECORD</code> file. Installation may result in an incomplete environment.
warning: Failed to uninstall package at L:\yolov5.venv\Lib\site-packages\sympy-1.14.0.dist-info due to missing <code>RECORD</code> file. Installation may result in an incomplete environment.
warning: Failed to uninstall package at L:\yolov5.venv\Lib\site-packages\torch-2.8.0.dist-info due to missing <code>RECORD</code> file. Installation may result in an incomplete environment.
Uninstalled 3 packages in 3ms</p>
<ul>
<li>pandas==2.3.2</li>
<li>sympy==1.14.0</li>
<li>torch==2.8.0
DEBUG Released lock at <code>L:\yolov5\.venv\.lock</code></li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Y-ASLant">@Y-ASLant</a> on 2025-09-18 10:33</div>
            <div class="timeline-body"><p>我换到别的文件夹，直接拷贝pyproject.toml和.python-version文件重新<code>uv sync</code>，他正常工作了
我认为不是中文路径问题，下面是我的一些测试（均为label目录下两个相同的pyproject.toml和.python-version文件）</p>
<h4>英文路径</h4>
<p>PS L:\English\label&gt; uv sync
Using CPython 3.9.22
Creating virtual environment at: .venv
Resolved 8 packages in 28ms
Installed 6 packages in 3.05s</p>
<ul>
<li>labelimg==1.8.6</li>
<li>lxml==6.0.1</li>
<li>pyqt5==5.15.11</li>
<li>pyqt5-qt5==5.15.2</li>
<li>pyqt5-sip==12.17.0</li>
<li>setuptools==80.9.0
PS L:\English\label&gt;</li>
</ul>
<h4>中文路径</h4>
<p>PS L:\这是中文路径\label&gt; uv sync
Using CPython 3.9.22
Creating virtual environment at: .venv
Resolved 8 packages in 26ms
Installed 6 packages in 2.97s</p>
<ul>
<li>labelimg==1.8.6</li>
<li>lxml==6.0.1</li>
<li>pyqt5==5.15.11</li>
<li>pyqt5-qt5==5.15.2</li>
<li>pyqt5-sip==12.17.0</li>
<li>setuptools==80.9.0
PS L:\这是中文路径\label&gt;</li>
</ul>
<h4>报错路径</h4>
<p>PS L:\莱\Yolo模型训练\yolov5\label&gt; uv sync
Resolved 66 packages in 2ms
error: Distribution <code>pyqt5-qt5==5.15.17 @ registry+https://pypi.org/simple</code> can't be installed because it doesn't have a source distribution or wheel for the current platform</p>
<p>hint: You're on Windows (<code>win_amd64</code>), but <code>pyqt5-qt5</code> (v5.15.17) only has wheels for the following platforms: <code>manylinux2014_x86_64</code>, <code>macosx_10_13_x86_64</code>, <code>macosx_11_0_arm64</code>; consider adding your platform to <code>tool.uv.required-environments</code> to ensure uv resolves to a version with compatible wheels
PS L:\莱\Yolo模型训练\yolov5\label&gt;</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Y-ASLant">@Y-ASLant</a> on 2025-09-18 10:51</div>
            <div class="timeline-body"><p>PS L:\莱\Yolo模型训练\yolov5\alabel&gt; uv sync
Using CPython 3.9.22
Creating virtual environment at: .venv
Resolved 8 packages in 25ms
Installed 6 packages in 3.03s</p>
<ul>
<li>labelimg==1.8.6</li>
<li>lxml==6.0.1</li>
<li>pyqt5==5.15.11</li>
<li>pyqt5-qt5==5.15.2</li>
<li>pyqt5-sip==12.17.0</li>
<li>setuptools==80.9.0
PS L:\莱\Yolo模型训练\yolov5\alabel&gt;</li>
</ul>
<p>我把<code>L:\莱\Yolo模型训练\yolov5\label</code>中的<code>label</code>改成了<code>alabel</code>它工作正常了。可是我没有与label同名的依赖呀，而且<code>L:\这是中文路径\label&gt; uv sync</code>和<code>L:\English\label&gt; uv sync</code>都是正常的。他们用的是同一个<code>pyproject.toml</code>和<code>.python-version</code></p>
<pre><code class="language-bash">[tool.uv]
required-environments = [ &quot;sys_platform == 'win32'&quot; ]

[project]
name = &quot;testt&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.9&quot;
dependencies = [
    &quot;labelimg&gt;=1.8.6&quot;,
    &quot;pyqt5&gt;=5.15.11&quot;,
    &quot;setuptools&gt;=80.9.0&quot;,
]
</code></pre>
<p>我在yolov5目录下一旦将<code>alabel</code>改回<code>label</code>就会出现以上问题pyqt5无法安装</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-09-19 08:47</div>
            <div class="timeline-body"><p>We support UTF-8, so chinese paths are supported.</p>
<p>In your log, it seems that <code>required-environments = [ &quot;sys_platform == 'win32'&quot; ]</code> worked and that <code>pyqt5</code> was successfully installed?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/knowaywood">@knowaywood</a> on 2025-09-19 12:37</div>
            <div class="timeline-body"><p>好奇怪的问题</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Y-ASLant">@Y-ASLant</a> on 2025-09-20 05:18</div>
            <div class="timeline-body"><blockquote>
<p>好奇怪的问题</p>
</blockquote>
<p>是的 我拉取的https://github.com/ultralytics/yolov5仓库 使用uv创建了一个虚拟环境，然后取消激活当前的虚拟环境，新建了一个label文件夹，然后在label文件夹里创建一个虚拟环境 安装pyqt5 就会出现这种问题，试了两台电脑 都是这样 一台win11一台win10</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jusway">@jusway</a> on 2025-10-04 05:30</div>
            <div class="timeline-body"><blockquote>
<blockquote>
<p>好奇怪的问题</p>
</blockquote>
<p>是的 我拉取的<a href="https://github.com/ultralytics/yolov5%E4%BB%93%E5%BA%93">https://github.com/ultralytics/yolov5仓库</a> 使用uv创建了一个虚拟环境，然后取消激活当前的虚拟环境，新建了一个label文件夹，然后在label文件夹里创建一个虚拟环境 安装pyqt5 就会出现这种问题，试了两台电脑 都是这样 一台win11一台win10</p>
</blockquote>
<p>我也是，而我也在标注yolo，哈哈哈</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-mre</span> added by @konstin on 2025-10-06 08:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-10-06 08:50</div>
            <div class="timeline-body"><p>Can you share a minimal reproducible example (https://github.com/astral-sh/uv/issues/9452)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/cute-omega">@cute-omega</a> on 2025-11-28 18:17</div>
            <div class="timeline-body"><blockquote>
<p>Can you share a minimal reproducible example (<a href="https://github.com/astral-sh/uv/issues/9452">#9452</a>)?</p>
</blockquote>
<p>on my Windows 11 25H2 machine with uv 0.9.13 (7ca92dcf6 2025-11-26):</p>
<pre><code class="language-batch">mkdir foo
cd foo
uv init .
uv add pyqt5
</code></pre>
<p>the last command shows:</p>
<pre><code>Resolved 4 packages in 19ms                                                                                                 
error: Distribution `pyqt5-qt5==5.15.18 @ registry+https://pypi.tuna.tsinghua.edu.cn/simple` can't be installed because it doesn't have a source distribution or wheel for the current platform

hint: You're on Windows (`win_amd64`), but `pyqt5-qt5` (v5.15.18) only has wheels for the following platforms: `manylinux2014_x86_64`, `macosx_10_13_x86_64`, `macosx_11_0_arm64`; consider adding &quot;sys_platform == 'win32' and platform_machine == 'AMD64'&quot; to `tool.uv.required-environments` to ensure uv resolves to a version with compatible wheels
</code></pre>
<p>and when I add <code>required-environments = [ &quot;sys_platform == 'win32'&quot; ]</code>, it worked and pyqt5 can be installed.</p>
<p>Some points:</p>
<ol>
<li>the command is so easy to reproduce, and the <code>-vvv</code> output is too much long. So I choose not to show them here</li>
<li>I use pypi mirror built by TUNA in Tsinghua Univ. It's a common choice for China mainland users. I believe this problem is unrelated to it (although I haven't test it)</li>
<li>of course <code>uv pip install pyqt5</code> is ok</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-11-28 18:58</div>
            <div class="timeline-body"><p>I haven't read the whole thread, but isn't this as-expected? The write-up here would be useful reading: https://docs.astral.sh/uv/concepts/resolution/#required-environments. The <a href="https://pypi.org/project/PyQt5-Qt5/#files">latest <code>pyqt5-qt5</code> release</a> doesn't include wheels for Windows, so you have to tell uv that Windows wheels are required so that it backtracks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/DingerBtn">@DingerBtn</a> on 2025-12-06 05:53</div>
            <div class="timeline-body"><p>dependencies = [
&quot;pynput&gt;=1.8.1&quot;,
&quot;pyqt5&quot;,
&quot;win10toast&gt;=0.9&quot;,
]</p>
<p>[[tool.uv.index]]
url = &quot;https://pypi.tuna.tsinghua.edu.cn/simple&quot;
default = true
required-environments = [ &quot;sys_platform == 'win32'&quot; ]</p>
<p><img width="1062" height="171" alt="Image" src="https://github.com/user-attachments/assets/d5fd3a10-3fd3-4f1d-b412-6b21c2ac6b40" /></p>
<p><img width="1920" height="1080" alt="Image" src="https://github.com/user-attachments/assets/e644ad3c-cfec-409c-aa07-aa11617f70c9" /></p>
<p>I have restricted the platform, but uv still tries to use the latest version without a Windows wheel, which should be a bug.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-12-06 14:59</div>
            <div class="timeline-body"><p>The <code>required-environments</code> should be under <code>[tool.uv]</code>, not <code>[[tool.uv.index]]</code>:</p>
<pre><code class="language-toml">[project]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.14.0&quot;
dependencies = [
&quot;pynput&gt;=1.8.1&quot;,
&quot;pyqt5&quot;,
&quot;win10toast&gt;=0.9&quot;,
]

[tool.uv]
required-environments = [ &quot;sys_platform == 'win32'&quot; ]

[[tool.uv.index]]
url = &quot;https://pypi.tuna.tsinghua.edu.cn/simple&quot;
default = true
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Y-ASLant">@Y-ASLant</a> on 2025-12-09 05:27</div>
            <div class="timeline-body"><blockquote>
<p>应在 ，而不是 ：<code>required-environments``[tool.uv]``[[tool.uv.index]]</code></p>
<p>[project]
name = &quot;foo&quot;
version = &quot;0.1.0&quot;
requires-python = &quot;&gt;=3.14.0&quot;
dependencies = [
&quot;pynput&gt;=1.8.1&quot;,
&quot;pyqt5&quot;,
&quot;win10toast&gt;=0.9&quot;,
]</p>
<p>[tool.uv]
required-environments = [ &quot;sys_platform == 'win32'&quot; ]</p>
<p>[[tool.uv.index]]
url = &quot;https://pypi.tuna.tsinghua.edu.cn/simple&quot;
default = true</p>
</blockquote>
<p>您好，请问关于arm64设备，pyqt5怎么解决？conda的话，是包含预编译好的pyqt5 arm64架构的，使用uv安装时，是从pypi官方拉去源码编译pqyt5，无法编译，安装失败。</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-12-11 17:38</div>
            <div class="timeline-body"><p>To require arm64 wheels, you need to include a marker for arm64 + your operating system in <code>required-environments</code>. Note that the latest version of PyQT5 does provide an arm64 wheel for macOS: <code>PyQt5-5.15.11-cp38-abi3-macosx_11_0_arm64.whl</code>.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:29 UTC
    </footer>
</body>
</html>
