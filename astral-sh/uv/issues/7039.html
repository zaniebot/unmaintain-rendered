<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Allow virtual packages inside of workspaces - astral-sh/uv #7039</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Allow virtual packages inside of workspaces</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7039">#7039</a>
        opened by <a href="https://github.com/quodlibetor">@quodlibetor</a>
        on 2024-09-04 17:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/quodlibetor">@quodlibetor</a></div>
            <div class="timeline-body"><p>I have several directories that hold static data that just exists to be fed into some tool defined elsewhere -- documentation, source definitions for codegen, etc.</p>
<p>AFAICT there are two options for virtual packages both of which have some downsides. Not sure if there are better patterns or I'm missing something obvious.</p>
<ol>
<li><p>add tools as dev-dependencies in the root workspace</p>
<ul>
<li>exactly which directories require which dev dependencies isn't obvious from the pyproject.toml file.</li>
<li>ci or users that needs to do anything also needs to install everything else in the root dev-dependencies.</li>
</ul>
</li>
<li><p>create several virtual packages (workspace roots)</p>
<ul>
<li>dependencies aren't guaranteed to be in sync</li>
<li>the root workspace.members list doesn't include the virtual packages</li>
</ul>
</li>
</ol>
<p>This is related to #4025 and https://github.com/astral-sh/rye/discussions/1342#discussioncomment-10400593</p>
<p>Thanks for great tools! Love the focus and design y'all have.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-04 17:37</div>
            <div class="timeline-body"><p>I think @charliermarsh has the most context on this.</p>
<p>Glad you're enjoying the tools :)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-04 18:11</div>
            <div class="timeline-body"><p>You can create a <code>pyproject.toml</code> in each of those directories and then add them as normal dependencies (rather than dev dependencies), which should work fine as long as you omit a <code>[build-system]</code> from the <code>pyproject.toml</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-09-04 18:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-04 18:12</div>
            <div class="timeline-body"><p>See https://docs.astral.sh/uv/concepts/projects/#build-systems for more details on that.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/quodlibetor">@quodlibetor</a> on 2024-09-04 18:31</div>
            <div class="timeline-body"><p>That makes sense! I read through that page but didn't process it correctly.</p>
<p>FWIW I think that if that page had a &quot;Virtual projects&quot; or &quot;Dependency only projects&quot; section I ... may ... have figured this out on my own.</p>
<ul>
<li>Creating projects<ul>
<li>Applications</li>
<li>Libraries</li>
<li>Packaged applications</li>
<li>Dependency only projects &lt;--</li>
</ul>
</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @quodlibetor on 2024-09-04 18:31</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/quodlibetor">@quodlibetor</a> on 2024-09-04 18:38</div>
            <div class="timeline-body"><p>oh wow I entirely missed the <a href="https://github.com/astral-sh/uv/releases/tag/0.4.0">0.4 release</a> which clearly defines all this ðŸ¤¦ , congrats on it!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-04 18:43</div>
            <div class="timeline-body"><p>Thanks :D no problem.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:26:52 UTC
    </footer>
</body>
</html>
