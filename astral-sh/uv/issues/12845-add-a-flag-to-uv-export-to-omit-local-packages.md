```yaml
number: 12845
title: "Add a flag to `uv export` to omit local packages"
type: issue
state: open
author: fepegar
labels:
  - enhancement
assignees: []
created_at: 2025-04-11T20:59:37Z
updated_at: 2026-01-20T13:54:13Z
url: https://github.com/astral-sh/uv/issues/12845
synced_at: 2026-01-20T14:40:50Z
```

# Add a flag to `uv export` to omit local packages

---

_@fepegar_

### Summary

Sometimes it's needed to exclude local packages from the exported requirements file. Currently, I manually parse `pyproject.toml` with Python, look for sources with `path`, and add those one by one to the `uv export` command with `--no-emit-package`.

From @zanieb:

> I'd probably be supportive of `--no-emit-source-trees` or something, not sure what to call it.

So I'm using `--no-emit-source-trees` in the example below.

### Example

```shell
uv init mwe
cd mwe
uv init --no-workspace --package foo
uv add ./foo
uv add bar
uv export
```

Output:

```
Initialized project `mwe` at `/private/tmp/mwe`

Initialized project `foo` at `/private/tmp/mwe/foo`

Using CPython 3.12.5
Creating virtual environment at: .venv
Resolved 2 packages in 11ms
      Built foo @ file:///private/tmp/mwe/foo
Prepared 1 package in 244ms
Installed 1 package in 1ms
 + foo==0.1.0 (from file:///private/tmp/mwe/foo)
Resolved 3 packages in 568ms
      Built bar==0.2.1
Prepared 1 package in 312ms
Installed 1 package in 0.71ms
 + bar==0.2.1
Resolved 3 packages in 0.61ms

# This file was autogenerated by uv via the following command:
#    uv export
./foo
    # via mwe
bar==0.2.1 \
    --hash=sha256:b0a71c865729f9e8ac0f74e666b46c5ed1f5addac3425be7e06ca4828cec90ef
    # via mwe
```

With this feature:

```shell
uv init mwe
cd mwe
uv init --no-workspace --package foo
uv add ./foo
uv add bar
uv export --no-emit-source-trees
```

```
Initialized project `mwe` at `/private/tmp/mwe`

Initialized project `foo` at `/private/tmp/mwe/foo`

Using CPython 3.12.5
Creating virtual environment at: .venv
Resolved 2 packages in 11ms
      Built foo @ file:///private/tmp/mwe/foo
Prepared 1 package in 244ms
Installed 1 package in 1ms
 + foo==0.1.0 (from file:///private/tmp/mwe/foo)
Resolved 3 packages in 568ms
      Built bar==0.2.1
Prepared 1 package in 312ms
Installed 1 package in 0.71ms
 + bar==0.2.1
Resolved 3 packages in 0.61ms

# This file was autogenerated by uv via the following command:
#    uv export --no-emit-source-trees
bar==0.2.1 \
    --hash=sha256:b0a71c865729f9e8ac0f74e666b46c5ed1f5addac3425be7e06ca4828cec90ef
    # via mwe
```


---

_Label `enhancement` added by @fepegar on 2025-04-11 20:59_

---

_Comment by @zanieb on 2025-04-18 20:48_

Another option would be like.. `--no-emit-source path`?

---

_Comment by @fepegar on 2025-04-19 07:13_

~That sounds better. Would it make sense to be able to filter by source type? E.g. discard packages with `path` but not `git`.~

Edit: I missed that `path` from your message and clearly agree with you :)

---

_Comment by @fepegar on 2026-01-20 13:54_

Is this now supported by `--no-emit-local`?

---
