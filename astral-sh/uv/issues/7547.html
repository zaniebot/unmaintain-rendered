<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is is a problem sharing uv cache between different versions - astral-sh/uv #7547</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Is is a problem sharing uv cache between different versions</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7547">#7547</a>
        opened by <a href="https://github.com/freand76">@freand76</a>
        on 2024-09-19 13:00
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/freand76">@freand76</a></div>
            <div class="timeline-body"><p>We use uv in a CI/CD environment where the .cache is shared within a build node.</p>
<p>When building from the tip of the repository the uv version will always be increasing 0.1.x -&gt; 0.2.x - &gt; ... &gt; 0.4.x
But when running older change set och when recreating an old build there might be a jump for version 0.4.x to version 0.2.x (version decreasing).</p>
<p>Do you consider it a problem sharing the cache between uv versions?
Is it necessary that the version is <strong>static</strong> or <strong>strictly increasing</strong> when using the cache?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-19 13:26</div>
            <div class="timeline-body"><p>Yeah it is important that the version is strictly increasing. While we generally try to avoid this, there are cases where old uv versions will not be able to read the cache from a new version. The version should not need to be static though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-19 13:26</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">cache</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-19 13:26</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-19 13:27</div>
            <div class="timeline-body"><p>(We should probably document this cc @charliermarsh)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-19 13:35</div>
            <div class="timeline-body"><p>It should <em>typically</em> be ok because we version the cache buckets, so if we change the schema, we&#x27;ll use a different cache version. But there are occasional bugs (like we saw in 0.4.10) that would make that not the case. I would say, in general, it should work -- modulo bugs.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/freand76">@freand76</a> on 2024-09-19 13:37</div>
            <div class="timeline-body"><p>Thank you for quick answer!</p>
<p>We will change our setup to force the uv cache folder to <strong>.cache/uv_&lt;uv_version&gt;/</strong></p>
<p>Consider this one closed/resolved for our sake ;-)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-19 13:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-19 13:39</div>
            <div class="timeline-body"><p>We&#x27;ll use this ticket to track improving the docs here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-25 22:13</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:34:11 UTC
    </footer>
</body>
</html>
