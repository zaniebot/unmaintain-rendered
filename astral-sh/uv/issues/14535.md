```yaml
number: 14535
title: UV and GPU access for  onnxruntime-gpu
type: issue
state: closed
author: linaMallek
labels:
  - question
  - needs-mre
assignees: []
created_at: 2025-07-10T10:18:19Z
updated_at: 2025-09-29T09:47:21Z
url: https://github.com/astral-sh/uv/issues/14535
synced_at: 2026-01-10T01:57:33Z
```

# UV and GPU access for  onnxruntime-gpu

---

_Issue opened by @linaMallek on 2025-07-10 10:18_

### Question

 i tried to install onnxruntime-gpu for insightface its looks its cant just access my gpu !! is there any way to solve this



### Platform

Windows 64 

### Version

uv 0.6.9 (3d9460278 2025-03-20)

---

_Label `question` added by @linaMallek on 2025-07-10 10:18_

---

_Comment by @FishAlchemist on 2025-07-10 15:00_

https://onnxruntime.ai/docs/install/
I've reviewed the ONNX Runtime documentation. You actually need to first confirm if you are using an Nvidia GPU, and for version 1.19.0 and above, CUDA version 12.x is required. The information you provided is insufficient, making it very difficult to reproduce your issue.

Oh right, if the official pip isn't working either, then the problem is usually unrelated to uv.

---

_Label `needs-mre` added by @charliermarsh on 2025-07-10 23:31_

---

_Comment by @linaMallek on 2025-07-13 19:46_

> https://onnxruntime.ai/docs/install/ I've reviewed the ONNX Runtime documentation. You actually need to first confirm if you are using an Nvidia GPU, and for version 1.19.0 and above, CUDA version 12.x is required. The information you provided is insufficient, making it very difficult to reproduce your issue.
> 
> Oh right, if the official pip isn't working either, then the problem is usually unrelated to uv.

Iam using the same code with the same versions  on conda env and its working , so i guess my configuratoin is working right CUDA12.6 and  onnxruntime-gpu>=1.22.0

---

_Comment by @FishAlchemist on 2025-07-15 19:12_

Actually, Conda has its own package registry, so if you install a package using Conda, it might not be the same as one on PyPI. 
By the way, my computer is Windows 11 x64, so could you give me a minimal and simplest reproducible example? 
My main concern is low memory, so I can't run anything that requires a lot of it.

---

_Comment by @pratos on 2025-09-29 06:33_

Works on ubuntu + cuda 12.8. There used to be problems installing onnxruntime-gpu, but seems that have been fixed. 

- `pyproject.toml`
```
[project]
name = "understanding-insightface"
version = "0.1.0"
description = "Optimizations to Insightface models via TensorRT"
requires-python = ">=3.12"
dependencies = [
    "cupy-cuda12x>=13.6.0",
    "exifread>=3.5.1",
    "insightface>=0.7.0",
    "loguru>=0.7.3",
    "onnx-graphsurgeon>=0.5.8",
    "onnxruntime-gpu==1.22.0",
    "opencv-python-headless>=4.8.1.78",
    "pandas>=2.3.2",
    "pynvml>=12.0.0",
    "safetensors>=0.6.2",
    "scikit-image>=0.25.2",
    "torch>=2.8.0",
    "torch-tensorrt==2.8.0",
    "torchvision>=0.23.0",
    "tritonclient[grpc,http]>=2.60.0",
    "typer>=0.19.2",
]

[build-system]
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"

[dependency-groups]
dev = [
    "jupyter>=1.1.1",
    "pre-commit>=4.3.0",
    "pytest>=8.4.2",
    "ruff>=0.12.11",
]

[tool.uv.sources]
torch = [
    { index = "pytorch-cpu", marker = "sys_platform != 'linux'" },
    { index = "pytorch-cu128", marker = "sys_platform == 'linux'" },
]
torch-vision = [
    { index = "pytorch-cpu", marker = "sys_platform != 'linux'" },
    { index = "pytorch-cu128", marker = "sys_platform == 'linux'" },
]
torch-audio = [
    { index = "pytorch-cpu", marker = "sys_platform != 'linux'" },
    { index = "pytorch-cu128", marker = "sys_platform == 'linux'" },
]
torch-tensorrt = [
    { index = "pytorch-cu128", marker = "sys_platform == 'linux'" },
]

[[tool.uv.index]]
name = "pytorch-cpu"
url = "https://download.pytorch.org/whl/cpu"
explicit = true

[[tool.uv.index]]
name = "pytorch-cu128"
url = "https://download.pytorch.org/whl/cu128"
explicit = true

[tool.ruff]
line-length = 120

[tool.ruff.lint]
select = ["F", "I"]

[tool.ruff.lint.mccabe]
max-complexity = 18

[tool.pyright]
include = ["src"]
exclude = ["temp"]
ignore = []
defineConstant = { DEBUG = false }

reportMissingImports = "error"
reportMissingTypeStubs = false

pythonVersion = "3.12"
pythonPlatform = "Linux"

[tool.setuptools]
packages = ["src"]
package-dir = {"" = "."}

[tool.pytest.ini_options]
markers = [
    "benchmark: marks tests as benchmark performance tests (deselect with '-m \"not benchmark\"')",
]
```



---

_Closed by @konstin on 2025-09-29 09:47_

---
