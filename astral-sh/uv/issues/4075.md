```yaml
number: 4075
title: Avoid redundant enumeration of all package versions during solve failure
type: issue
state: closed
author: zanieb
labels:
  - error messages
assignees: []
created_at: 2024-06-05T21:00:22Z
updated_at: 2024-12-16T21:31:36Z
url: https://github.com/astral-sh/uv/issues/4075
synced_at: 2026-01-10T01:57:09Z
```

# Avoid redundant enumeration of all package versions during solve failure

---

_Issue opened by @zanieb on 2024-06-05 21:00_

```
error: Because the current Python version (3.9.6) does not satisfy Python>=3.11,<4.0 and all versions of rooster-blue depend on Python>=3.11,<4.0, we can conclude that all versions of rooster-blue cannot be used.
And because only the following versions of rooster-blue are available:
    rooster-blue==0.0.1
    rooster-blue==0.0.2
    rooster-blue==0.0.3
    rooster-blue==0.0.4
and you require rooster-blue, we can conclude that the requirements are unsatisfiable.
```

There's no reason for this message to be so verbose. We already said all versions of rooster-blue cannot be used. The conclusion could be:

```
And because you require rooster-blue, we can conclude that the requirements are unsatisfiable.
```

---

_Label `error messages` added by @charliermarsh on 2024-06-05 21:01_

---

_Comment by @charliermarsh on 2024-06-05 21:18_

How would you go about solving this?

---

_Comment by @zanieb on 2024-06-05 21:29_

I'm not sure. I think the latter half comes from

https://github.com/astral-sh/uv/blob/57ea55d2185213236e68fef82135f1cfc1686043/crates/uv-resolver/src/pubgrub/report.rs#L280-L293

which doesn't have a obvious way to inspect that we previously concluded that "all versions cannot be used".

Maybe we don't need to know that we said that previously and instead we should just have better handling at

https://github.com/astral-sh/uv/blob/57ea55d2185213236e68fef82135f1cfc1686043/crates/uv-resolver/src/pubgrub/report.rs#L92-L99

and collapse that to "all versions" when we see we're enumerating all of the available versions


---

_Referenced in [astral-sh/uv#5046](../../astral-sh/uv/issues/5046.md) on 2024-07-14 16:10_

---

_Referenced in [astral-sh/uv#9884](../../astral-sh/uv/pulls/9884.md) on 2024-12-13 20:59_

---

_Referenced in [astral-sh/uv#9885](../../astral-sh/uv/pulls/9885.md) on 2024-12-13 21:00_

---

_Closed by @zanieb on 2024-12-16 21:31_

---
