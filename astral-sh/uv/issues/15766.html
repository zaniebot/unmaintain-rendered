<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Install shell completions in `uv tool install` - astral-sh/uv #15766</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Install shell completions in `uv tool install`</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/15766">#15766</a>
        opened by <a href="https://github.com/sondhg">@sondhg</a>
        on 2025-09-10 09:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sondhg">@sondhg</a> on 2025-09-10 09:10</div>
            <div class="timeline-body"><h3>Question</h3>
<p>I don't know why shell completions for tools installed via <code>uv tool install</code> do not work. An example will be easier to explain the problem I'm facing.</p>
<p>I'll use a random Python CLI tool <code>gallery-dl</code> (I aliased it to <code>gdl</code>) as example, with comparison between two installation methods.</p>
<ol>
<li>Case 1: Install via Homebrew <code>brew install gallery-dl</code>. When I type <code>gallery-dl --</code> then hit <kbd>Tab</kbd>, flags/options for the command are suggested.</li>
</ol>
<p><img width="760" height="609" alt="Image" src="https://github.com/user-attachments/assets/0868af21-299b-411d-898d-266afbb6f759" /></p>
<ol start="2">
<li>Case 2: Install via uv <code>uv tool install gallery-dl</code>. I performed the similar action, but shell completions do not work.</li>
</ol>
<p><img width="719" height="55" alt="Image" src="https://github.com/user-attachments/assets/4d88a3f3-62a5-4227-84eb-6398f5d9bbaf" /></p>
<p>After a bit of search, I find the supposed-to-be shell completion file <code>_gallery-dl</code> in <code>~/.local/share/uv/tools/gallery-dl/share/zsh/site-functions</code>.</p>
<p><img width="1920" height="295" alt="Image" src="https://github.com/user-attachments/assets/c23ab781-0b94-4170-8a54-0d33b9ab9d3e" /></p>
<p>Is the reason for this problem is because <code>uv</code> doesn't add the directories storing these completion files to <code>$fpath</code> like Homebrew does? Here is my <code>$fpath</code> currently:</p>
<p><img width="651" height="192" alt="Image" src="https://github.com/user-attachments/assets/cbf834ca-0c49-453d-8bbf-c090b9fd6d67" /></p>
<p>So is there a proper solution to enable shell completions for CLI tools installed via <code>uv tool install</code>? It would be much appreciated! Right now I either have to manually add <code>~/.local/share/uv/tools/gallery-dl/share/zsh/site-functions</code> to <code>$fpath</code> (by adding the code below to <code>.zshrc</code>), or copy  <code>_gallery-dl</code> to one of the directories presented in <code>$fpath</code>. Both are not ideal, I assume.</p>
<pre><code class="language-shell"># Add uv tool site-functions to fpath
for d in ~/.local/share/uv/tools/*/share/zsh/site-functions; do
  [[ -d $d ]] &amp;&amp; fpath+=$d
done
</code></pre>
<h3>Platform</h3>
<p>Linux 6.8.0-79-generic x86_64 GNU/Linux</p>
<h3>Version</h3>
<p>uv 0.8.15 (Homebrew 2025-09-03)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @sondhg on 2025-09-10 09:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-10 13:08</div>
            <div class="timeline-body"><p>Thanks for the details!</p>
<p>Does this work with <code>pipx</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sondhg">@sondhg</a> on 2025-09-10 15:09</div>
            <div class="timeline-body"><p>If you mean <code>pipx</code> by default, then no. I'd need to add this path to <code>$fpath</code> by adding the similar code as above to <code>.zshrc</code></p>
<p><img width="874" height="54" alt="Image" src="https://github.com/user-attachments/assets/0ebdb9d6-39f4-44d8-b659-5ad2dc1c3c4b" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> removed by @zanieb on 2025-09-10 16:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">wish</span> added by @zanieb on 2025-09-10 16:08</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Shell completions do not work for CLI tools installed via `uv tool install`" to "Install shell completions in `uv tool install`" by @zanieb on 2025-09-10 16:08</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-09-10 16:09</div>
            <div class="timeline-body"><p>I'm not sure how we'd implement this, though it does seem nice to have.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-design</span> added by @zanieb on 2025-09-10 16:09</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sondhg">@sondhg</a> on 2025-09-11 14:55</div>
            <div class="timeline-body"><p>Thank you for the reply. It's good to know that this isn't a feature yet. I was thinking this feature already existed and I may have missed it while reading the <code>uv</code> documentation ðŸ˜… . I'm glad that wasn't the case.</p>
<p>Seems like many tools installed via <code>uv tool install &lt;PACKAGE_NAME&gt;</code> already have their completion script file <code>_&lt;PACKAGE_NAME&gt;</code> installed to <code>~/.local/share/uv/tools/&lt;PACKAGE_NAME&gt;/share/zsh/site-functions</code> (I use <code>zsh</code> so I don't know where the script would be stored in other shells). Unlike Homebrew, these completion script files are not exposed to $fpath by default. So for now the simplest solution I've found is to <code>echo</code> the code I wrote in previous comment into <code>.zshrc</code>:</p>
<pre><code class="language-shell">for d in ~/.local/share/uv/tools/*/share/zsh/site-functions; do
  [[ -d $d ]] &amp;&amp; fpath+=$d
done
</code></pre>
<p>It would be convenient to see the this sort of code for each shell included somewhere in the docs. Or maybe a <code>uv tool enable-tool-completions</code> command to do the same thing. Just my suggestion! I hope this feature will be available in the future. Been loving uv so far.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:05 UTC
    </footer>
</body>
</html>
