<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv pip compile does not find a package that pip-compile does (nltk==3.6) - astral-sh/uv #1528</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>uv pip compile does not find a package that pip-compile does (nltk==3.6)</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/1528">#1528</a>
        opened by <a href="https://github.com/merc1031">@merc1031</a>
        on 2024-02-16 19:03
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/merc1031">@merc1031</a> on 2024-02-16 19:03</div>
            <div class="timeline-body"><p>uv pip compile</p>
<pre><code>(test-7) ➜  tools-3 git:(master) ✗ uv pip compile --index-url https://&lt;host&gt;/artifactory/api/pypi/virtual-pypi/simple --no-cache --no-deps &lt;(echo &quot;nltk==3.6\n&quot;) -o /tmp/ci
  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of nltk==3.6 and you require nltk==3.6, we can conclude that the requirements are unsatisfiable.
</code></pre>
<p>pip-compile</p>
<pre><code>(test-7) ➜  tools-3 git:(master) ✗ pip-compile --index-url https://&lt;host&gt;/artifactory/api/pypi/virtual-pypi/simple &lt;(echo &quot;nltk==3.6\n&quot;) -o /tmp/ci 
WARNING: --strip-extras is becoming the default in version 8.0.0. To silence this warning, either use --strip-extras to opt into the new default or use --no-strip-extras to retain the existing behavior.
#
# This file is autogenerated by pip-compile with Python 3.10
# by the following command:
#
#    pip-compile --index-url=https://&lt;host&gt;/artifactory/api/pypi/virtual-pypi/simple --output-file=/tmp/ci /proc/self/fd/11
#
--index-url https://&lt;host&gt;/artifactory/api/pypi/virtual-pypi/simple

click==8.1.7
  # via nltk
joblib==1.3.2
  # via nltk
nltk==3.6
  # via -r /proc/self/fd/11
regex==2023.12.25
  # via nltk
tqdm==4.66.2
  # via nltk
</code></pre>
<p>package present in Artifactory remote pullthrough cache of pypi
<img src="https://github.com/astral-sh/uv/assets/311356/395d2676-75f0-4a55-ae81-4498d526727b" alt="image" /></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/raylu">@raylu</a> on 2024-02-16 19:42</div>
            <div class="timeline-body"><p>running with <code>--verbose</code> might help
there was also a bug with relative paths that was fixed in uv 0.1.2: https://github.com/astral-sh/uv/issues/1393#issuecomment-1947772947</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/merc1031">@merc1031</a> on 2024-02-16 20:06</div>
            <div class="timeline-body"><pre><code>(test-7) ➜  tools-3 git:() ✗ uv --version
uv 0.1.2
</code></pre>
<pre><code>(test-7) ➜  tools-3 git:() ✗ uv pip compile --verbose --index-url https://&lt;&gt;/artifactory/api/pypi/virtual-pypi/simple --no-cache --no-deps &lt;(echo &quot;nltk==3.6\n&quot;) -o /tmp/ci 
    0.002884s DEBUG uv_interpreter::virtual_env Found a virtualenv through VIRTUAL_ENV at: /home/&lt;&gt;/.pyenv/versions/3.10.11/envs/test-7
    0.002941s DEBUG uv_interpreter::interpreter Detecting markers for: /home/&lt;&gt;/.pyenv/versions/3.10.11/envs/test-7/bin/python
    0.026714s DEBUG uv::commands::pip_compile Using Python 3.10.11 interpreter at /home/&lt;&gt;/.pyenv/versions/3.10.11/envs/test-7/bin/python for builds
 uv_client::flat_index::from_entries 
 uv_resolver::resolver::solve 
      0.027355s   0ms DEBUG uv_resolver::resolver Solving with target Python version 3.10.11
   uv_resolver::resolver::choose_version package=root
   uv_resolver::resolver::get_dependencies package=root, version=0a0.dev0
        0.027393s   0ms DEBUG uv_resolver::resolver Adding direct dependency: nltk==3.6
   uv_resolver::resolver::choose_version package=nltk
     uv_resolver::resolver::package_wait package_name=nltk
 uv_resolver::resolver::process_request request=Versions nltk
   uv_client::registry_client::simple_api package=nltk
     uv_client::cached_client::get_cacheable 
       uv_client::cached_client::read_and_parse_cache file=/tmp/.tmpd5nxim/simple-v0/43b1e6e9e817b452/nltk.rkyv
 uv_resolver::resolver::process_request request=Prefetch nltk ==3.6
          0.027604s   0ms  WARN uv_client::cached_client Broken cache entry at /tmp/.tmpd5nxim/simple-v0/43b1e6e9e817b452/nltk.rkyv, removing: failed to open file `/tmp/.tmpd5nxim/simple-v0/43b1e6e9e817b452/nltk.rkyv`
          0.027628s   0ms DEBUG uv_client::cached_client No cache entry for: https://&lt;&gt;/artifactory/api/pypi/virtual-pypi/simple/nltk/
       uv_client::cached_client::fresh_request url=&quot;https://&lt;&gt;/artifactory/api/pypi/virtual-pypi/simple/nltk/&quot;
       uv_client::cached_client::new_cache file=/tmp/.tmpd5nxim/simple-v0/43b1e6e9e817b452/nltk.rkyv
       uv_client::registry_client::parse_simple_api package=nltk
         uv_client::html::parse url=Url { scheme: &quot;https&quot;, cannot_be_a_base: false, username: &quot;&quot;, password: None, host: Some(Domain(&quot;&lt;&gt;&quot;)), port: None, path: &quot;/artifactory/api/pypi/virtual-pypi/simple/nltk/&quot;, query: None, fragment: None }
            0.308264s  33ms  WARN uv_client::registry_client Skipping file for nltk: Invalid 'requires-python' value
            0.308294s  33ms  WARN uv_client::registry_client Skipping file for nltk: Invalid 'requires-python' value
            0.308307s  33ms  WARN uv_client::registry_client Skipping file for nltk: Invalid 'requires-python' value
            0.308317s  33ms  WARN uv_client::registry_client Skipping file for nltk: Invalid 'requires-python' value
            0.308328s  33ms  WARN uv_client::registry_client Skipping file for nltk: Invalid 'requires-python' value
            0.308362s  33ms  WARN uv_client::registry_client Skipping file for nltk: Invalid 'requires-python' value
 uv_resolver::version_map::from_metadata 
        0.309710s 282ms DEBUG uv_resolver::resolver Searching for a compatible version of nltk (==3.6)
      0.309748s 282ms DEBUG uv_resolver::resolver No compatible version found for: nltk
  × No solution found when resolving dependencies:
  ╰─▶ Because there is no version of nltk==3.6 and you require nltk==3.6, we can conclude that the requirements are unsatisfiable.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1362.html">astral-sh/uv#1362</a> on 2024-02-16 20:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-16 22:13</div>
            <div class="timeline-body"><p>Do you mind sharing what the <code>requires-python</code> values look like in the index? Like if you download one of the wheels manually, and open it, and look at <code>METADATA</code>, what is the <code>requires-python</code>? It looks like it's invalid -- we do some manual correction for common mistakes, but we might be missing one here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/merc1031">@merc1031</a> on 2024-02-17 02:18</div>
            <div class="timeline-body"><p>For nltk 3.6 this is what i get</p>
<pre><code>(assets-3.10.11) ➜  nltk-3.6 git:(&lt;&gt;) ✗ rg -i requires nltk-3.6.dist-info 
nltk-3.6.dist-info/README.md
7:Language Processing. NLTK requires Python version 3.5, 3.6, 3.7, 3.8, or 3.9.

nltk-3.6.dist-info/METADATA
37:Requires-Python: &gt;=3.5.*
38:Requires-Dist: click
39:Requires-Dist: joblib
40:Requires-Dist: regex
41:Requires-Dist: tqdm
43:Requires-Dist: numpy ; extra == 'all'
44:Requires-Dist: matplotlib ; extra == 'all'
45:Requires-Dist: pyparsing ; extra == 'all'
46:Requires-Dist: twython ; extra == 'all'
47:Requires-Dist: scikit-learn ; extra == 'all'
48:Requires-Dist: gensim (&lt;4.0.0) ; extra == 'all'
49:Requires-Dist: requests ; extra == 'all'
50:Requires-Dist: python-crfsuite ; extra == 'all'
51:Requires-Dist: scipy ; extra == 'all'
53:Requires-Dist: requests ; extra == 'corenlp'
55:Requires-Dist: gensim (&lt;4.0.0) ; extra == 'machine_learning'
56:Requires-Dist: numpy ; extra == 'machine_learning'
57:Requires-Dist: python-crfsuite ; extra == 'machine_learning'
58:Requires-Dist: scikit-learn ; extra == 'machine_learning'
59:Requires-Dist: scipy ; extra == 'machine_learning'
61:Requires-Dist: matplotlib ; extra == 'plot'
63:Requires-Dist: pyparsing ; extra == 'tgrep'
65:Requires-Dist: twython ; extra == 'twitter'
68:natural language processing.  NLTK requires Python 3.5, 3.6, 3.7, 3.8, or 3.9.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/1768.html">astral-sh/uv#1768</a> on 2024-02-20 17:19</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-22 00:46</div>
            <div class="timeline-body"><p>We may have fixed this in #1529. Do you mind trying with latest?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @BurntSushi by @charliermarsh on 2024-02-22 00:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/merc1031">@merc1031</a> on 2024-02-22 17:22</div>
            <div class="timeline-body"><p>I can confirm the with version 0.1.7 It has solved the issue for me!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @merc1031 on 2024-02-22 17:22</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:18 UTC
    </footer>
</body>
</html>
