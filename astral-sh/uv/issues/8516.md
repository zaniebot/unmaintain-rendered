```yaml
number: 8516
title: "uv tree: extra packages are listed as roots"
type: issue
state: closed
author: bluss
labels:
  - bug
assignees: []
created_at: 2024-10-24T06:45:37Z
updated_at: 2024-10-24T16:39:02Z
url: https://github.com/astral-sh/uv/issues/8516
synced_at: 2026-01-10T01:57:19Z
```

# uv tree: extra packages are listed as roots

---

_Issue opened by @bluss on 2024-10-24 06:45_

new uv tree features are looking good. Here's one change from before that could maybe be a bug.

```
uv init jc
# Initialized project `jc` at `/home/user/jc`
cd jc
uv add --frozen jupyter-client
uv tree
```
```
Resolved 12 packages in 186ms
cffi v1.17.1
└── pycparser v2.22
jc v0.1.0
└── jupyter-client v8.6.3
    ├── jupyter-core v5.7.2
    │   ├── platformdirs v4.3.6
    │   └── traitlets v5.14.3
    ├── python-dateutil v2.9.0.post0
    │   └── six v1.16.0
    ├── pyzmq v26.2.0
    ├── tornado v6.4.1
    └── traitlets v5.14.3
```

Expected: There is one root 'jc'. Actual: There are two roots 'cffi' and 'jc'.
'cffi' comes from this resolution: `cffi==1.17.1 ; implementation_name == 'pypy'` and it will be in its right spot in the tree if we run `uv tree --universal`


```
uv tree --universal
Resolved 12 packages in 0.59ms
jc v0.1.0
└── jupyter-client v8.6.3
    ├── jupyter-core v5.7.2
    │   ├── platformdirs v4.3.6
    │   ├── pywin32 v308
    │   └── traitlets v5.14.3
    ├── python-dateutil v2.9.0.post0
    │   └── six v1.16.0
    ├── pyzmq v26.2.0
    │   └── cffi v1.17.1
    │       └── pycparser v2.22
    ├── tornado v6.4.1
    └── traitlets v5.14.3
```

---

_Label `bug` added by @zanieb on 2024-10-24 12:34_

---

_Comment by @charliermarsh on 2024-10-24 13:53_

That does look wrong, thanks.

---

_Assigned to @charliermarsh by @charliermarsh on 2024-10-24 13:53_

---

_Referenced in [astral-sh/uv#8532](../../astral-sh/uv/pulls/8532.md) on 2024-10-24 16:22_

---

_Closed by @charliermarsh on 2024-10-24 16:39_

---
