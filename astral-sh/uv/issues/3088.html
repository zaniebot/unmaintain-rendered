<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv pip compile: resolves to unnecessarily old versions of yamlpath and ruamel.yaml - astral-sh/uv #3088</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv pip compile: resolves to unnecessarily old versions of yamlpath and ruamel.yaml</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3088">#3088</a>
        opened by <a href="https://github.com/AndydeCleyre">@AndydeCleyre</a>
        on 2024-04-17 05:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/AndydeCleyre">@AndydeCleyre</a></div>
            <div class="timeline-body"><p>Hello, and thanks!</p>
<p>This is on Ubuntu 22.04.</p>
<p><code>requirements.in</code>:</p>
<pre><code>cattrs
nestedtext
plumbum
rich
ruamel.yaml
yamlpath
</code></pre>
<pre><code>$ uv --version
uv 0.1.31
$ uv pip compile --no-header --annotation-style=line -U requirements.in -o uv.txt
$ pip-compile --version
pip-compile, version 7.4.1
$ pip-compile --no-header --annotation-style=line -U requirements.in -o pip-tools.txt
$ diff -u pip-tools.txt uv.txt
</code></pre>
<pre><code>--- pip-tools.txt	2024-04-17 01:24:37.815365304 -0400
+++ uv.txt	2024-04-17 01:24:23.219134399 -0400
@@ -1,15 +1,16 @@
 arrow==1.3.0              # via inform
 attrs==23.2.0             # via cattrs
-cattrs==23.2.3            # via -r requirements.in
+cattrs==23.2.3
 inform==1.28              # via nestedtext
 markdown-it-py==3.0.0     # via rich
 mdurl==0.1.2              # via markdown-it-py
-nestedtext==3.6           # via -r requirements.in
-plumbum==1.8.2            # via -r requirements.in
+nestedtext==3.6
+plumbum==1.8.2
 pygments==2.17.2          # via rich
-python-dateutil==2.9.0.post0  # via arrow, yamlpath
-rich==13.7.1              # via -r requirements.in
-ruamel-yaml==0.17.21      # via -r requirements.in, yamlpath
+python-dateutil==2.9.0.post0  # via arrow
+rich==13.7.1
+ruamel-yaml==0.18.6       # via yamlpath
+ruamel-yaml-clib==0.2.8   # via ruamel-yaml
 six==1.16.0               # via inform, python-dateutil
 types-python-dateutil==2.9.0.20240316  # via arrow
-yamlpath==3.8.2           # via -r requirements.in
+yamlpath==3.4.0
</code></pre>
<p>I tried to put the verbose output here in a fold, but GitHub complained that the message body was too long.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-17 13:43</div>
            <div class="timeline-body"><p>The tricky thing here is that this is (presumedly) also a valid resolution, and some of the packages in the uv resolution <em>are</em> at newer versions (e.g., <code>ruamel-yaml</code> was bumped). I assume if you set <code>ruamel-yaml==0.17.21</code> in your requirements, we yield the same resolution? I do in my testing:</p>
<pre><code># This file was autogenerated by uv via the following command:
#    uv pip compile requirements.in
arrow==1.3.0
    # via inform
attrs==23.2.0
    # via cattrs
cattrs==23.2.3
inform==1.28
    # via nestedtext
markdown-it-py==3.0.0
    # via rich
mdurl==0.1.2
    # via markdown-it-py
nestedtext==3.6
plumbum==1.8.2
pygments==2.17.2
    # via rich
python-dateutil==2.9.0.post0
    # via
    #   arrow
    #   yamlpath
rich==13.7.1
ruamel-yaml==0.17.21
    # via yamlpath
six==1.16.0
    # via
    #   inform
    #   python-dateutil
types-python-dateutil==2.9.0.20240316
    # via arrow
yamlpath==3.8.2
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AndydeCleyre">@AndydeCleyre</a> on 2024-04-17 14:32</div>
            <div class="timeline-body"><p>Oh whoops, I misread the output and didn&#x27;t realize ruamel.yaml was newer instead of older. Without looking right now, probably newer yamlpath versions hold back the ruamel.yaml dependency.</p>
<p>So this all makes sense and when I&#x27;m back at a computer I&#x27;ll force a high minimum version for yamlpath and all should be good.</p>
<p>Thanks!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/AndydeCleyre">@AndydeCleyre</a> on 2024-04-17 15:16</div>
            <div class="timeline-body"><p>Yup, it&#x27;s all cleared up now, thanks again.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/AndydeCleyre">@AndydeCleyre</a> on 2024-04-17 15:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-17 15:20</div>
            <div class="timeline-body"><p>No problem! Glad to help :)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:30:50 UTC
    </footer>
</body>
</html>
