<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip install --no-deps` fails due to conflicting requirements even though the `--no-deps` flag is given - astral-sh/uv #3183</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv pip install --no-deps` fails due to conflicting requirements even though the `--no-deps` flag is given</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3183">#3183</a>
        opened by <a href="https://github.com/bluthej">@bluthej</a>
        on 2024-04-22 13:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bluthej">@bluthej</a> on 2024-04-22 13:02</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<h2>Context</h2>
<p>I have a special use case for a client whereby I need to provide some libraries which they install via a <code>requirements.txt</code>.
The purpose of this file is only to list the libraries I provide (as local paths), and there is another requirements file for the external dependencies.
We work like this because in my company we use git dependencies for our own libraries but our client does not have access to our private git repos.</p>
<p>The install instructions for them are to do a <code>pip install</code> for the external dependencies (pulled from PyPI), and then a second <code>pip install</code> with the requirements file I provide them. This works fine with <code>pip</code>, but not with <code>uv pip</code> because the top-level library depends on the other libraries via git dependencies (specified in a <code>pyproject.toml</code>), but they are also listed in the <code>requirements.txt</code>. This leads to:</p>
<pre><code class="language-shell">error: Requirements contain conflicting URLs for package `blargh`:
</code></pre>
<p>even though I provide the <code>--no-deps</code> flag. With this flag, it works fine with <code>pip</code>. So it seems to me like there is some conflict resolution that's taking place for the git dependencies that should not be happening with <code>--no-deps</code>.</p>
<p>Here is the full command I run:</p>
<pre><code class="language-shell">uv pip install --no-deps -r requirements.txt
</code></pre>
<h2>Platform and <code>uv</code> version</h2>
<p>I am on Linux with <code>uv 0.1.35</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-04-22 14:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @charliermarsh on 2024-04-22 14:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-22 14:27</div>
            <div class="timeline-body"><p>Thanks, I can guess what's going on here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/3191.html">astral-sh/uv#3191</a> on 2024-04-22 17:07</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-04-22 17:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:26 UTC
    </footer>
</body>
</html>
