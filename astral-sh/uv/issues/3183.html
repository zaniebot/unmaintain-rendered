<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip install --no-deps` fails due to conflicting requirements even though the `--no-deps` flag is given - astral-sh/uv #3183</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv pip install --no-deps</code> fails due to conflicting requirements even though the <code>--no-deps</code> flag is given</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/3183">#3183</a>
        opened by <a href="https://github.com/bluthej">@bluthej</a>
        on 2024-04-22 13:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/bluthej">@bluthej</a></div>
            <div class="timeline-body">

Context
<p>I have a special use case for a client whereby I need to provide some libraries which they install via a <code>requirements.txt</code>.
The purpose of this file is only to list the libraries I provide (as local paths), and there is another requirements file for the external dependencies.
We work like this because in my company we use git dependencies for our own libraries but our client does not have access to our private git repos.</p>
<p>The install instructions for them are to do a <code>pip install</code> for the external dependencies (pulled from PyPI), and then a second <code>pip install</code> with the requirements file I provide them. This works fine with <code>pip</code>, but not with <code>uv pip</code> because the top-level library depends on the other libraries via git dependencies (specified in a <code>pyproject.toml</code>), but they are also listed in the <code>requirements.txt</code>. This leads to:</p>
<pre><code>error: Requirements contain conflicting URLs for package `blargh`:
</code></pre>
<p>even though I provide the <code>--no-deps</code> flag. With this flag, it works fine with <code>pip</code>. So it seems to me like there is some conflict resolution that&#x27;s taking place for the git dependencies that should not be happening with <code>--no-deps</code>.</p>
<p>Here is the full command I run:</p>
<pre><code>uv pip install --no-deps -r requirements.txt
</code></pre>
Platform and <code>uv</code> version
<p>I am on Linux with <code>uv 0.1.35</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to <a href="https://github.com/charliermarsh">@charliermarsh</a> by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-22 14:27</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-22 14:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-22 14:27</div>
            <div class="timeline-body"><p>Thanks, I can guess what&#x27;s going on here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-22 17:18</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:30:54 UTC
    </footer>
</body>
</html>
