<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support specifying layered requirements in a single file - astral-sh/uv #4331</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Support specifying layered requirements in a single file</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/4331">#4331</a>
        opened by <a href="https://github.com/jab">@jab</a>
        on 2024-06-14 18:43
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/jab">@jab</a></div>
            <div class="timeline-body"><p>I recently noticed #2679 -- awesome to see all the interest in that!</p>
<p>As long as we're thinking about enabling combining different requirements files for different platforms into a single, platform-independent lockfile, is there any interest in enabling you to specify additional <a href="https://pip-tools.readthedocs.io/en/stable/#workflow-for-layered-requirements">requirements layers</a> (e.g. for running tests, building docs, etc., which should be <a href="https://pip-tools.readthedocs.io/en/stable/#workflow-for-layered-requirements:~:text=constrain%20the%20dev%20requirements%20to%20packages%20already%20selected">constrained by the base layer</a>, in a single file as well?</p>
<p>Many projects end up with <a href="https://github.com/pallets/flask/tree/main/requirements">requirements file explosion</a> due to layering even more often than due to platform differences. Enabling users to define their requirement layers in a single file would be a wonderful simplification.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-14 19:33</div>
            <div class="timeline-body"><p>Hi! Have you seen <a href="https://peps.python.org/pep-0735/">PEP 735</a>? I think that addresses what you're talking about. Right now we're only exposing a single group for development dependencies but we're watching that PEP as a possible standard we could use for specifying multiple groups. We're working on a lock file format (#3314) that is a single file. I'm not sure we'd extend locking of multiple groups to <code>requirements.txt</code> style files.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/jab">@jab</a> on 2024-06-15 02:35</div>
            <div class="timeline-body"><p>Thanks for the heads up about PEP 735, and great you're already thinking along these lines!</p>
<p>Any solution enabling projects to maintain a single pair of files -- one for all the dependency group inputs, and one with the result of resolving those inputs -- would be a win. Using a standardized and more structured format than requirements.txt to accomplish that would be icing on the cake.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-15 02:43</div>
            <div class="timeline-body"><p>Great to hear! Yeah we're planning on using the <code>pyproject.toml</code> for the declaration (with a <code>tool.uv.sources</code> extension for things like custom indexes per package that are not supported by the standard <code>project.dependencies</code> section) and a <code>uv.lock</code> with cross-platform resolutions of all of your extras and development dependencies. You can try some of it right now if you want, we'll be announcing more and writing new documentation soon though!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-06-19 00:45</div>
            <div class="timeline-body"><p>I think https://github.com/astral-sh/uv/issues/3347 can be used to track this request.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-06-19 00:45</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:25:17 UTC
    </footer>
</body>
</html>
