```yaml
number: 9161
title: support dependency groups with different python versions
type: issue
state: closed
author: DetachHead
labels:
  - question
assignees: []
created_at: 2024-11-16T03:30:45Z
updated_at: 2024-11-17T05:21:17Z
url: https://github.com/astral-sh/uv/issues/9161
synced_at: 2026-01-10T01:57:21Z
```

# support dependency groups with different python versions

---

_Issue opened by @DetachHead on 2024-11-16 03:30_

my project supports python versions 3.8 to 3.13, but since some of my dev dependencies require python 3.9 or above, i need to split them into separate dependency groups:

```toml
[project]
requires-python = ">=3.8"

[dependency-groups]
dev = [
    # this version only supports 3.9 to 3.13
    "libcst>=1.5.0",
]
old = [
    # this version only supports 3.8 to 3.12
    "libcst==1.1.0",
]
```

in pdm this is doable by maintaining two separate lockfiles, and specifying `--python=">=3.9"` for the `dev` group:

```
pdm lock -G dev --python=">=3.9"
pdm lock -G old --lockfile pdm.old.lock
```

it would be nice if uv supported something similar. ideally two separate lockfiles wouldn't be needed though and the separate python versions could just be defined in `pyproject.toml` for each dependency group, maybe something like:

```toml
[tool.uv.dependency-group-python-versions]
dev = ">=3.9"
old = ">=3.8"
```

---

_Referenced in [DetachHead/basedpyright#813](../../DetachHead/basedpyright/pulls/813.md) on 2024-11-16 03:32_

---

_Comment by @charliermarsh on 2024-11-16 03:41_

I believe this works already:
```toml
[project]
name = "project"
requires-python = ">=3.8"

[dependency-groups]
dev = [
    # this version only supports 3.9 to 3.13
    "libcst>=1.5.0 ; python_version >= '3.9'",
]
old = [
    # this version only supports 3.8 to 3.12
    "libcst==1.1.0",
]

[tool.uv]
conflicts = [
    [
        { group = "dev" },
        { group = "old" },
    ],
]
```

---

_Label `question` added by @charliermarsh on 2024-11-16 03:41_

---

_Comment by @DetachHead on 2024-11-16 07:38_

thanks! i realized i don't even need the separate dependency group and i can just do this instead:

```py
[dependency-groups]
dev = [
    "libcst>=1.5.0 ; python_version>='3.9'",
    "libcst==1.1.0 ; python_version<'3.9'"
]
```

---

_Closed by @DetachHead on 2024-11-16 07:38_

---

_Comment by @DetachHead on 2024-11-17 05:21_

oh wait i don't even need that either, uv is able to resolve the correct version for each python version, which pdm wasn't able to do

---
