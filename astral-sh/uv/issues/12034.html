<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Is there a way to prevent packages from being installed from specified index when using pip interface? - astral-sh/uv #12034</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>Is there a way to prevent packages from being installed from specified index when using pip interface?</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/12034">#12034</a>
        opened by <a href="https://github.com/amitkma">@amitkma</a>
        on 2025-03-07 09:10
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/amitkma">@amitkma</a> on 2025-03-07 09:10</div>
            <div class="timeline-body"><h3>Question</h3>
<p>My project has a few dependencies, such as <code>torch==2.6.0+cu124</code>, <code>numpy==2.2.3</code>, etc. I want to use a specific pytorch index to install pytorch (in this case CUDA 12.4) and NumPy from the PyPi index. But when I run <code>uv pip compile --extra-index-url=https://download.pytorch.org/whl/cu124 --output-file=req.cuda.txt req.cuda.in</code>, it finds the numpy on pytorch index that doesn't have the specified version of numpy.</p>
<p>I can't use <code>index-strategy</code> because renovate at the moment doesn't support it. Please let me know if there is any solution or workaround.</p>
<h3>Platform</h3>
<p>Ubuntu 24.04.2 LTS</p>
<h3>Version</h3>
<p>uv 0.6.4</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @amitkma on 2025-03-07 09:10</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-03-07 17:23</div>
            <div class="timeline-body"><p>Unfortunately there isn't a great way to handle this in <code>uv pip</code> interface (other than <code>--index-strategy</code>), if you're using <code>requirements.txt</code>. I <em>believe</em> this works with <code>uv pip install -r pyproject.toml</code> though:</p>
<pre><code class="language-toml">[project]
name = &quot;project&quot;
version = &quot;0.0.1&quot;
requires-python = &quot;&gt;=3.9&quot;
dependencies = [
    &quot;torch&quot;
]

[[tool.uv.index]]
name = &quot;pytorch-cpu&quot;
url = &quot;https://download.pytorch.org/whl/cpu&quot;
explicit = true

[tool.uv.sources]
torch = [
  { index = &quot;pytorch-cpu&quot; },
]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/amitkma">@amitkma</a> on 2025-03-10 16:24</div>
            <div class="timeline-body"><p>Thank you for the answer, @charliermarsh. I managed to solve it similarly to the one you mentioned. I am closing this issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @amitkma on 2025-03-10 16:24</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:26 UTC
    </footer>
</body>
</html>
