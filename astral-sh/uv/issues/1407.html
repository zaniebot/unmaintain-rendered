<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Better error messages when trying to `uv pip install` a wheel file without a package name - astral-sh/uv #1407</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Better error messages when trying to `uv pip install` a wheel file without a package name</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/1407">#1407</a>
        opened by <a href="https://github.com/carlosperate">@carlosperate</a>
        on 2024-02-16 01:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/carlosperate">@carlosperate</a> on 2024-02-16 01:27</div>
            <div class="timeline-body"><p>In the spirit of PR https://github.com/astral-sh/uv/pull/669, it'd be nice if some of the error messages when trying to install a wheel without specifiying the package name were a bit more helpful.</p>
<p>The error message for a relative path is good:</p>
<pre><code>$ uv pip install mu/wheels/1.2.2/appnope-0.1.4-py2.py3-none-any.whl
error: Failed to parse `mu/wheels/1.2.2/appnope-0.1.4-py2.py3-none-any.whl`
  Caused by: URL requirement must be preceded by a package name. Add the name of the package before the URL (e.g., `package_name @ https://...`).
mu/wheels/1.2.2/appnope-0.1.4-py2.py3-none-any.whl
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
</code></pre>
<p>But the error for a full path that starts with <code>/</code>, is not as helpful:</p>
<pre><code>$ uv pip install /Users/microbit-carlos/workspace/tmp/mu-tests/mu/mu/wheels/1.2.2/appnope-0.1.4-py2.py3-none-any.whl
error: Failed to parse `/Users/microbit-carlos/workspace/tmp/mu-tests/mu/mu/wheels/1.2.2/appnope-0.1.4-py2.py3-none-any.whl`
  Caused by: Expected package name starting with an alphanumeric character, found '/'
/Users/microbit-carlos/workspace/tmp/mu-tests/mu/mu/wheels/1.2.2/appnope-0.1.4-py2.py3-none-any.whl
^
</code></pre>
<p>And the error when the path is a filename in a local directory is not as helpful either:</p>
<pre><code>$ cd mu/wheels/1.2.2/
$ uv pip install appnope-0.1.4-py2.py3-none-any.whl
  √ó No solution found when resolving dependencies:
  ‚ï∞‚îÄ‚ñ∂ Because appnope-0-1-4-py2-py3-none-any-whl was not found in the package registry and you require appnope-0-1-4-py2-py3-none-any-whl, we can
      conclude that the requirements are unsatisfiable.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">error messages</span> added by @charliermarsh on 2024-02-16 01:30</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-16 01:30</div>
            <div class="timeline-body"><p>Nice, those are great cases to handle, thanks.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-02-16 01:57</div>
            <div class="timeline-body"><p>Related</p>
<ul>
<li>#313</li>
<li>https://github.com/astral-sh/uv/issues/1403</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/akx">@akx</a> on 2024-02-16 06:45</div>
            <div class="timeline-body"><p>üëç from me. I have a Dockerfile that does a multistage build where wheels are built in a chunkier container and installed (only) from those wheels in a second stage.</p>
<pre><code>FROM something AS requirements
COPY requirements.txt /wheels/requirements.txt
RUN cd /wheels &amp;&amp; pip wheel --no-cache-dir -r requirements.txt
# ...
FROM somethingelse AS runtime
# ...
RUN --mount=type=cache,ro,from=requirements,source=/wheels,target=/wheels pip install --no-cache-dir --no-index --find-links /wheels /wheels/*.whl
</code></pre>
<p>Trying to replace <code>pip install</code> with <code>uv pip install</code> goes</p>
<pre><code>0.171 error: Failed to parse `/wheels/Babel-2.14.0-py3-none-any.whl`
0.171   Caused by: Expected package name starting with an alphanumeric character, found '/'
0.171 /wheels/Babel-2.14.0-py3-none-any.whl
</code></pre>
<p>(Replacing <code>pip wheel</code> with <code>uv pip wheel</code> fails too, because <code>wheel</code> isn't a subcommand yet, but that's #920.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-16 06:51</div>
            <div class="timeline-body"><p>(You should be able to use <code>Babel @ /wheels/Babel-2.14.0-py3-none-any.whl</code> -- does that work?)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/akx">@akx</a> on 2024-02-16 06:53</div>
            <div class="timeline-body"><p>@charliermarsh Can't try that easily unfortunately since the list of requirements comes from shell wildcard expansion üòÖ</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-16 06:56</div>
            <div class="timeline-body"><p>Oh hah. Okay, got it :) It sounds like you need https://github.com/astral-sh/uv/issues/313.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/matthewfeickert">@matthewfeickert</a> on 2024-02-21 21:14</div>
            <div class="timeline-body"><blockquote>
<p>Can't try that easily unfortunately since the list of requirements comes from shell wildcard expansion</p>
</blockquote>
<p>Yeah, this is something that I run into as well, when I have validation shell scripts that find all the wheels from an archive that's been downloaded and then execute something similar to</p>
<pre><code>uv pip install &quot;./archive/*.whl&quot;
</code></pre>
<p>(I know that this is already in the works over on Issue #313, so thank you!, I just wanted to give another example of a common workflow.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-03-22 21:24</div>
            <div class="timeline-body"><p>This is now supported, so no need to improve the error messages!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-03-22 21:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2024-03-22 21:24</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:21 UTC
    </footer>
</body>
</html>
