<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>realpath not available on macOS 12 (breaks venv activate and uv tool run) - astral-sh/uv #13807</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>realpath not available on macOS 12 (breaks venv activate and uv tool run)</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/13807">#13807</a>
        opened by <a href="https://github.com/kandji-trent">@kandji-trent</a>
        on 2025-06-03 13:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/kandji-trent">@kandji-trent</a> on 2025-06-03 13:29</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>The <code>realpath</code> binary is not available on macOS 12 and earlier. This results in error messages when attempting to activate a (relocatable) virtual environment or when running a tool without installing (<code>uvx</code> or <code>uv tool run</code>) as both of these use <code>realpath</code> in the script.</p>
<p>The offending lines of code appear to be:</p>
<ul>
<li><code>uv wheel</code>: https://github.com/astral-sh/uv/blob/98c708149afa854796672e1d49e7120d028af5ef/crates/uv-install-wheel/src/wheel.rs#L127</li>
<li><code>uv-virtualenv</code>: https://github.com/astral-sh/uv/blob/98c708149afa854796672e1d49e7120d028af5ef/crates/uv-virtualenv/src/virtualenv.rs#L299</li>
</ul>
<p>Here is an example running on macOS 12.7.6, ARM with <code>uv venv --relocatable</code></p>
<pre><code class="language-shell">anka@arm-12_7_5 ~ % uv venv --relocatable
Using CPython 3.13.3
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate
anka@arm-12_7_5 ~ % source .venv/bin/activate
.venv/bin/activate:81: command not found: realpath
(anka) anka@arm-12_7_5 ~ % which realpath 
realpath not found
</code></pre>
<p>Here is a example running on an macOS 12.7.6, ARM with <code>uvx</code></p>
<pre><code class="language-shell">anka@arm-12_7_5 ~ % uvx kst --version
/Users/anka/.cache/uv/archive-v0/-v1Dn8vBMUCf8TwtMb7Lg/bin/kst: line 2: realpath: command not found
/Users/anka/.cache/uv/archive-v0/-v1Dn8vBMUCf8TwtMb7Lg/bin/kst: line 2: /Users/anka/python: No such file or directory
/Users/anka/.cache/uv/archive-v0/-v1Dn8vBMUCf8TwtMb7Lg/bin/kst: line 2: exec: /Users/anka/python: cannot execute: No such file or directory
</code></pre>
<p>If the tool is first installed with <code>uv tool install</code>, then this does not happen. This make sense since the console script uses a different (simplified) shabang.</p>
<pre><code class="language-shell">anka@arm-12_7_5 ~ % uv tool install kst
Resolved 21 packages in 11ms
Installed 21 packages in 22ms
 + annotated-types==0.7.0
 + certifi==2025.4.26
 + charset-normalizer==3.4.2
 + click==8.1.8
 + idna==3.10
 + kst==1.0.2
 + markdown-it-py==3.0.0
 + mdurl==0.1.2
 + platformdirs==4.3.8
 + pydantic==2.11.5
 + pydantic-core==2.33.2
 + pygments==2.19.1
 + requests==2.32.3
 + rich==14.0.0
 + ruamel-yaml==0.18.12
 + ruamel-yaml-clib==0.2.12
 + shellingham==1.5.4
 + typer==0.16.0
 + typing-extensions==4.14.0
 + typing-inspection==0.4.1
 + urllib3==2.4.0
Installed 1 executable: kst
anka@arm-12_7_5 ~ % kst --version
kst, version 1.0.2
anka@arm-12_7_5 ~ % uvx kst --version
kst, version 1.0.2
</code></pre>
<p>I have tested this across both Intel and ARM versions of macOS and Python 3.11-13</p>
<h3>Platform</h3>
<p>macOS 12 arm64, macOS 12 amd64</p>
<h3>Version</h3>
<p>uv 0.7.9 (13a86a23b 2025-05-30)</p>
<h3>Python version</h3>
<p>Python 3.13</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @kandji-trent on 2025-06-03 13:29</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-03 13:58</div>
            <div class="timeline-body"><p>I think this is intended at this time. Can you install <code>realpath</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @zanieb on 2025-06-03 14:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-06-03 14:02</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kandji-trent">@kandji-trent</a> on 2025-06-03 16:50</div>
            <div class="timeline-body"><p>No issue installing it as a workaround for our purposes Just wanted to report the bug in case it was unknown. I wasn't able to find reference to supported macOS versions. Only a blanket macOS is supported statement (https://docs.astral.sh/uv/reference/policies/platforms/):</p>
<blockquote>
<p>uv has Tier 1 support for the following platforms:</p>
<p>macOS (Apple Silicon)
macOS (x86_64)
Linux (x86_64)
Windows (x86_64)</p>
</blockquote>
<p>Feel free to close this out. And thank you for all the hard work on <code>uv</code>!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-06-03 17:02</div>
            <div class="timeline-body"><p>Thanks! We could add a note to the documentation.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/13993.html">astral-sh/uv#13993</a> on 2025-06-12 13:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-06-12 15:16</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/14471.html">astral-sh/uv#14471</a> on 2025-07-06 22:34</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:28 UTC
    </footer>
</body>
</html>
