<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infer `.cmd` and `.ps1` extensions during `uv run` - astral-sh/uv #9151</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Infer <code>.cmd</code> and <code>.ps1</code> extensions during <code>uv run</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9151">#9151</a>
        opened by <a href="https://github.com/zanieb">@zanieb</a>
        on 2024-11-15 14:44
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/zanieb">@zanieb</a></div>
            <div class="timeline-body"><p>As discussed in https://github.com/astral-sh/uv/issues/8770</p>
<p>If the user provides <code>uv run foo</code> and <code>foo.cmd</code> or <code>foo.ps1</code> exists we should invoke it unless <code>foo.exe</code> exists.</p>
<p>This is a little questionable, i.e., should we apply this to everything in the <code>PATH</code>? Or just the virtual environment <code>Scripts</code> directory?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by @zanieb on 2024-11-15 14:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/samypr100">@samypr100</a> on 2024-11-19 00:13</div>
            <div class="timeline-body"><blockquote>
<p>Or just the virtual environment Scripts directory?</p>
</blockquote>
<p>I'd expect this behavior at least from a security perspective.</p>
<p>Also see <a href="https://doc.rust-lang.org/std/process/index.html#batch-file-special-handling">note</a> in the special handling of cmd.exe and .bat</p>
<blockquote>
<p>running batch scripts in this way may be removed in the future and so should not be relied upon.</p>
</blockquote>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2024-11-27 08:06</div>
            <div class="timeline-body"><p>Also, see the list of default extensions recognised for Windows executables in Python standard library:</p>
<p>https://github.com/python/cpython/blob/6d3b5206cfaf5a85c128b671b1d9527ed553c930/Lib/shutil.py#L55</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2025-02-03 05:03</div>
            <div class="timeline-body"><p>For the record I just updated my test case with latest <code>uv</code> (0.5.26) and <code>nuitka</code> (2.6.2) to confirm the issue is still reproducible: https://github.com/kdeldycke/nuitka-issue-3173/actions/runs/13106670972/job/36562560546</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">help wanted</span> added by @zanieb on 2025-02-03 13:51</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2025-02-25 08:56</div>
            <div class="timeline-body"><p>Just to keep track of the progress, the issue can still be reproduced with the <code>uv 0.6.3</code> and <code>nuitka 2.6.7</code> combo: https://github.com/kdeldycke/nuitka-issue-3173/actions/runs/13517137348</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-03-05 20:39</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2025-03-05 20:39</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kdeldycke">@kdeldycke</a> on 2025-03-10 11:09</div>
            <div class="timeline-body"><p>I confirm the issue has been fixed in uv 0.6.5, see: https://github.com/Nuitka/Nuitka/issues/3173#issuecomment-2710215547</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:28:22 UTC
    </footer>
</body>
</html>
