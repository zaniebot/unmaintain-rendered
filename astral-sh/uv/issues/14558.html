<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv pip install -e . --all-extras` errors out even if pyproject.toml is present - astral-sh/uv #14558</title>
    <link rel="stylesheet" href="../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../index.html">Back to index</a>
    </div>

    <h1>`uv pip install -e . --all-extras` errors out even if pyproject.toml is present</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/14558">#14558</a>
        opened by <a href="https://github.com/akx">@akx</a>
        on 2025-07-11 06:37
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/akx">@akx</a> on 2025-07-11 06:37</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>When developing a package that might have many optional dependencies (as extras), it would be useful to be able to install all of them.</p>
<p>I would have expected <code>uv pip install -e . --all-extras</code> to be able to install <code>extras-example</code>, <code>django</code> and <code>pydantic</code>, but it fails with an error message that doesn't seem to be quite relevant (as <code>pyproject.toml</code> is very present):</p>
<pre><code>$ ls
pyproject.toml
$ cat pyproject.toml
[project]
name = &quot;extras-example&quot;
version = &quot;0.1.0&quot;

[project.optional-dependencies]
django = [&quot;django&gt;=4.2&quot;]
pydantic = [&quot;pydantic&gt;=2.0&quot;]
$ uv --version
uv 0.7.20 (251420396 2025-07-09)
$ uv venv
Using CPython 3.12.11
Creating virtual environment at: .venv
Activate with: source .venv/bin/activate.fish
$ uv pip install -e . --all-extras
error: Requesting extras requires a `pyproject.toml`, `setup.cfg`, or `setup.py` file. Use `&lt;dir&gt;[extra]` syntax or `-r &lt;file&gt;` instead.
</code></pre>
<p>Installing the package sans extras works:</p>
<pre><code>$ uv pip install -e .
Resolved 1 package in 2ms
      Built extras-example @ ...
Prepared 1 package in 429ms
Installed 1 package in 1ms
 + extras-example==0.1.0 (from ...)
</code></pre>
<p>as does specifying the extras by hand (as the error message tells you to do):</p>
<pre><code>$ uv pip install -e .[django,pydantic]
Resolved 9 packages in 408ms
      Built extras-example @ ...
Prepared 4 packages in 641ms
Uninstalled 1 package in 0.62ms
Installed 9 packages in 68ms
 + annotated-types==0.7.0
 + asgiref==3.9.1
 + django==5.2.4
 ~ extras-example==0.1.0 (from ...)
 + pydantic==2.11.7
 + pydantic-core==2.33.2
 + sqlparse==0.5.3
 + typing-extensions==4.14.1
 + typing-inspection==0.4.1
</code></pre>
<p>In other words â€“ why does the error message say it requires a <code>pyproject.toml</code>, when one is certainly present, or why can it not read the extras from there? (On the other hand, wouldn't it be enough to build the package, read the built package's metadata to find the extras, and install them, then proceed with regular editable installation?)</p>
<h3>Platform</h3>
<p>Darwin 24.5.0 arm64</p>
<h3>Version</h3>
<p>uv 0.7.20 (251420396 2025-07-09)</p>
<h3>Python version</h3>
<p>CPython 3.12.11</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @akx on 2025-07-11 06:37</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-11 12:52</div>
            <div class="timeline-body"><p><code>uv pip</code> won't read dependency metadata from the <code>pyproject.toml</code> unless it's provided, e.g., <code>uv pip install -r pyproject.toml --all-extras</code>. The <code>--extra</code> flags are present in <code>uv pip install</code> because there's no other way to request extras from a <code>pyproject.toml</code>, unlike when doing <code>uv pip install &lt;package&gt;[extra, ...]</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @zanieb on 2025-07-11 12:52</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2025-07-11 12:52</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-11 12:53</div>
            <div class="timeline-body"><p>Related https://github.com/astral-sh/uv/issues/11198</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-07-20 22:45</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../django-daiquiri/dq-dev/pulls/19.html">django-daiquiri/dq-dev#19</a> on 2025-07-25 08:41</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:28:28 UTC
    </footer>
</body>
</html>
