<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project directory structure - astral-sh/uv #7341</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Project directory structure</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7341">#7341</a>
        opened by <a href="https://github.com/pkucmus">@pkucmus</a>
        on 2024-09-12 20:17
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/pkucmus">@pkucmus</a> on 2024-09-12 20:17</div>
            <div class="timeline-body"><p>Hello.</p>
<p>[UV: 0.4.6, Python: 3.12.4]</p>
<p>(I'm using Poetry since it's inception, so I might be opinionated, but I'm learning a lot when going through the issues here - if something might sound like a &quot;Poetry user's opinion&quot; feel free to call me out :))</p>
<p>I'm also quite opinionated when it comes to the project directory structure, what you propose <a href="https://docs.astral.sh/uv/guides/projects/#project-structure">here</a>, for projects leads into other challenges down the line, like being forced to &quot;dance around&quot; the <code>.venv</code> directory in Docker.</p>
<pre><code>.
├── .venv
│   ├── bin
│   ├── lib
│   └── pyvenv.cfg
├── .python-version
├── README.md
├── hello.py
├── pyproject.toml
└── uv.lock
</code></pre>
<p>Where if you were to &quot;<code>src</code> the project&quot;, like so:</p>
<pre><code>.
├── .venv
│   ├── bin
│   ├── lib
│   └── pyvenv.cfg
├── src
│   └── my_project
│       └── hello.py
├── .python-version
├── README.md
├── pyproject.toml
└── uv.lock
</code></pre>
<p>Then a few things can happen:</p>
<ol>
<li>You can Docker volume everything that's in <code>src</code></li>
</ol>
<pre><code class="language-yaml">services:
  my_project:
    ...
    volumes:
      - ./src:/app/src
</code></pre>
<ol start="2">
<li>You can leverage Docker cache in build time if the dependencies did not change</li>
</ol>
<pre><code class="language-Dockerfile">FROM python:3.12
COPY --from=ghcr.io/astral-sh/uv:latest /uv /bin/uv

...

WORKDIR /app

COPY uv.lock pyproject.toml ./

ARG INSTALL_DEV=false
RUN uv sync --frozen --no-install-project
COPY . .  
RUN uv sync --frozen
</code></pre>
<p>don't redo the dependency installation if uv.lock or pyproject.toml did not change</p>
<ol start="3">
<li>you can explicitly reference your root project with</li>
</ol>
<pre><code class="language-python">from my_project import hello
</code></pre>
<p>This approach should be doable with a pyproject.toml addition of:</p>
<pre><code class="language-toml">[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;

[tool.hatch.build]
include = [
    &quot;src/my_project&quot;,
]
</code></pre>
<p>but for some reason my_project is not available for import.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/7342.html">astral-sh/uv#7342</a> on 2024-09-12 20:20</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-12 20:38</div>
            <div class="timeline-body"><p>Have you tried <code>uv init --package</code>? I believe it creates the structure you're looking for.</p>
<p>See https://docs.astral.sh/uv/concepts/projects/#packaged-applications</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @zanieb on 2024-09-12 20:38</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pkucmus">@pkucmus</a> on 2024-09-12 21:32</div>
            <div class="timeline-body"><p>Thanks for all you help on these, the issue was different and it's more likely related to the <code>hatchling.build</code> - <code>__init__.py</code> was missing from my root module (which Poetry did not care about).
This &quot;opinionated setup&quot; of mine should be doable now but I'm curious about one more thing: can I have more than one root package in <code>src</code>? Same as https://python-poetry.org/docs/pyproject/#packages?</p>
<p>Also I'm curious how does everyone find the <code>src</code> approach for projects in general, is it at least worth mentioning in the docs?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-13 02:13</div>
            <div class="timeline-body"><p>Yeah totally. This is all build backend configuration. We don't provide our own build backend yet (#3957) but I believe hatchling supports what you're describing or you could use another build backend like setuptools: https://setuptools.pypa.io/en/latest/userguide/package_discovery.html</p>
<p>There's also https://docs.astral.sh/uv/concepts/workspaces/ if you have more complicated setups.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sirosc">@sirosc</a> on 2024-09-13 17:50</div>
            <div class="timeline-body"><p>One way of doing it in <code>pyproject.toml</code> with hatch is:</p>
<pre><code>[tool.hatch.build.targets.wheel]
# Defines the targets for the wheel build.
include = [&quot;src/my_project1/**&quot;, &quot;src/my_project2/**&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @zanieb on 2024-09-14 03:13</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../../tbe-team/raybot/issues/5.html">tbe-team/raybot#5</a> on 2025-02-23 17:11</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/fabioz">@fabioz</a> on 2025-04-03 12:38</div>
            <div class="timeline-body"><p>Note: In my own project I had to provide both <code>include</code> and <code>sources</code>:</p>
<p>i.e.:</p>
<pre><code>[tool.hatch.build.targets.wheel]
sources = [&quot;src&quot;, &quot;tests&quot;, &quot;etc&quot;]
include = [&quot;src/**&quot;, &quot;tests/**&quot;, &quot;etc/**&quot;]
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/milanzmitrovic">@milanzmitrovic</a> on 2025-05-02 07:44</div>
            <div class="timeline-body"><p>Does anyone know what is difference between package and library in UV parlance?</p>
<p>I mean, diff between &quot;--lib&quot; and &quot;--package&quot;?</p>
<p>https://docs.astral.sh/uv/concepts/projects/init/#libraries</p>
<p>Examples:</p>
<pre><code>uv init --lib example-lib

uv init --package example-pkg
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mmohajer9">@mmohajer9</a> on 2025-06-22 14:14</div>
            <div class="timeline-body"><blockquote>
<p>Does anyone know what is difference between package and library in UV parlance?</p>
<p>I mean, diff between &quot;--lib&quot; and &quot;--package&quot;?</p>
<p>https://docs.astral.sh/uv/concepts/projects/init/#libraries</p>
<p>Examples:</p>
<pre><code>uv init --lib example-lib

uv init --package example-pkg
</code></pre>
</blockquote>
<p>In essence, <strong>every library is considered a package</strong>, as outlined in the documentation, but <strong>not all packages are intended to function as libraries</strong>. Additionally, when you choose the library option, a <code>py.typed</code> file is generated. This file serves as a marker indicating that the package supports static type checking. It informs type checkers such as <code>mypy</code> that the package includes type annotations and should be analyzed for type correctness. By including <code>py.typed</code>, you enable external tools to validate your type hints and help ensure the reliability of your code.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:30:47 UTC
    </footer>
</body>
</html>
