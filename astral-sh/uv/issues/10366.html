<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UV pip install requirements file breaks when it contains `--trusted-host` - astral-sh/uv #10366</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>UV pip install requirements file breaks when it contains <code>--trusted-host</code></h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/10366">#10366</a>
        opened by <a href="https://github.com/MattTheCuber">@MattTheCuber</a>
        on 2025-01-07 14:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/MattTheCuber">@MattTheCuber</a></div>
            <div class="timeline-body"><p>I apologize if this is a duplicate issue. I searched #1339 pretty thoroughly as well as #6591.</p>
<p>If you run a command like <code>uv pip install -r requirements.txt</code> with a requirements file looking like this, it throws the error: <code>error: Unexpected '-', expected '-c', '-e', '-r' or the start of a requirement at requirements.txt:1:1</code>.</p>
<pre><code>--trusted-host org.domain.com

custom_package
...
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MattTheCuber">@MattTheCuber</a> on 2025-01-07 14:59</div>
            <div class="timeline-body"><p>Just found #7702, looks like it was denied.</p>
<p>However, the reasoning might not work for all cases. We automatically generated our requirements.txt file using <code>pip-compile</code>. This places the <code>--trusted-host</code> line at the top of the file for us. I would prefer that we wouldn't have to make exceptions to the pip-tools development pipeline to support this tool.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MattTheCuber">@MattTheCuber</a> on 2025-01-07 15:00</div>
            <div class="timeline-body"><p>If you still wouldn't like to support the feature, would it be possible to just ignore the line, possibly throwing a warning, that way we can manually pass the argument to uv and not make changes to our pip-tools pipeline?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-07 16:29</div>
            <div class="timeline-body"><p>I'm comfortable ignoring-and-warning here... \cc @zanieb @konstin</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-01-07 16:30</div>
            <div class="timeline-body"><p>Although, if you're changing your pipeline to pass the argument to uv, why is it &quot;worse&quot; to change it to also pass it for pip-tools?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/MattTheCuber">@MattTheCuber</a> on 2025-01-07 17:43</div>
            <div class="timeline-body"><p>Developers install via <code>pip-sync</code>, <code>pip install -r</code>, or <code>uv pip ...</code>. I would like to keep their options open.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-01-07 18:49</div>
            <div class="timeline-body"><p>I'm fine with ignore and warn.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-01-08 14:00</div>
            <div class="timeline-body"><p>Warn and ignore seems fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">compatibility</span> added by @konstin on 2025-01-08 14:00</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">good first issue</span> added by @zanieb on 2025-01-08 21:11</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @charliermarsh on 2025-01-09 00:30</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-01-09 18:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-01-09 18:19</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:29:10 UTC
    </footer>
</body>
</html>
