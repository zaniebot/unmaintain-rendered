```yaml
number: 3354
title: "universal-lock: refactor resolver state into explicit type"
type: issue
state: closed
author: BurntSushi
labels:
  - preview
assignees: []
created_at: 2024-05-03T15:51:12Z
updated_at: 2024-05-09T18:16:45Z
url: https://github.com/astral-sh/uv/issues/3354
synced_at: 2026-01-10T01:57:07Z
```

# universal-lock: refactor resolver state into explicit type

---

_Issue opened by @BurntSushi on 2024-05-03 15:51_

Currently, our resolver's state (managed across different calls to unit propagation) is tracked implicitly on the stack of our `solve` routine:

https://github.com/astral-sh/uv/blob/e33ff95575e8165078799548070210947d1cfad0/crates/uv-resolver/src/resolver/mod.rs#L288-L300

This state needs to get pushed out into its own type so that we can work with it more explicitly. For example, as part of #3350, we'll need to be able to fork the resolver and thus will need to be able to clone the state.

---

_Label `preview` added by @BurntSushi on 2024-05-03 15:51_

---

_Referenced in [astral-sh/uv#3350](../../astral-sh/uv/issues/3350.md) on 2024-05-03 15:51_

---

_Referenced in [astral-sh/uv#3358](../../astral-sh/uv/issues/3358.md) on 2024-05-03 18:09_

---

_Referenced in [astral-sh/uv#3492](../../astral-sh/uv/pulls/3492.md) on 2024-05-09 18:06_

---

_Closed by @BurntSushi on 2024-05-09 18:16_

---
