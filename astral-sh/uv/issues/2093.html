<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dependency resolution error when using a version not yet on PyPI - astral-sh/uv #2093</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Dependency resolution error when using a version not yet on PyPI</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/2093">#2093</a>
        opened by <a href="https://github.com/Andrew-S-Rosen">@Andrew-S-Rosen</a>
        on 2024-02-29 18:29
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/Andrew-S-Rosen">@Andrew-S-Rosen</a> on 2024-02-29 18:29</div>
            <div class="timeline-body"><p>I have a Python package (<code>quacc</code>) that has a required dependency (<code>ase</code>). The most recent version of <code>ase</code> on PyPI is 3.22.1, but the <code>master</code> branch of <code>ase</code> is &gt;3.22.1. Since the <code>quacc</code> package relies on features added since the last <code>ase</code> release, in the <code>dependencies</code> list in <code>pyproject.toml</code> of my <code>quacc</code> package, I have <code>ase&gt;3.22.1</code> to ensure that users won't have a silent failure when installing the package if they have an out-of-date dependency. However, <code>uv</code> does not like this at all (even though <code>pip</code> is perfectly content).</p>
<p>Reproduction with uv 0.1.13 on Ubuntu in a clean miniconda environment:</p>
<pre><code class="language-bash">uv pip install &quot;ase @ git+https://gitlab.com/ase/ase.git&quot; # installs &gt;3.22.1
uv pip install &quot;quacc @ git+https://github.com/Quantum-Accelerators/quacc.git&quot; # or `uv pip install quacc`

</code></pre>
<p>Traceback:</p>
<pre><code> Updated https://github.com/Quantum-Accelerators/quacc.git (8c55f09)                     × No solution found when resolving dependencies:
  ╰─▶ Because only ase&lt;=3.22.1 is available and quacc==0.6.8 depends on ase&gt;3.22.1,
      we can conclude that quacc==0.6.8 cannot be used.
      And because only quacc==0.6.8 is available and you require quacc, we can
      conclude that the requirements are unsatisfiable.
</code></pre>
<p>While it is true that only <code>ase&lt;=3.22.1</code> is available on PyPI, the current Python environment has <code>ase&gt;3.22.1</code>, and that should have priority. <code>uv</code> should not try to be installing <code>ase</code> since it's already in my environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-02-29 18:59</div>
            <div class="timeline-body"><p>I think this roughly the same as https://github.com/astral-sh/uv/issues/1661, which is: we don't use the <code>site-packages</code> directory of already-installed packages as a package <em>source</em> when resolving.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2024-02-29 18:59</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Andrew-S-Rosen">@Andrew-S-Rosen</a> on 2024-02-29 19:04</div>
            <div class="timeline-body"><p>Thanks! You're right. That's the same issue, I believe.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/2596.html">astral-sh/uv#2596</a> on 2024-03-21 21:49</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-04-01 21:31</div>
            <div class="timeline-body"><p>Hi! This should be addressed in the latest release (<a href="https://github.com/astral-sh/uv/releases/tag/0.1.27">0.1.27</a>) via #2596.</p>
<p>Let us know if you have any problems.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:57 UTC
    </footer>
</body>
</html>
