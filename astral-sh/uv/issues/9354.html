<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to find root uv config? - astral-sh/uv #9354</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>How to find root uv config?</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/9354">#9354</a>
        opened by <a href="https://github.com/kevinsimper">@kevinsimper</a>
        on 2024-11-22 13:59
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/kevinsimper">@kevinsimper</a></div>
            <div class="timeline-body"><p>How does UV find root? What is the defining rule where UV stops looking?</p>
<p>https://docs.astral.sh/uv/concepts/projects/workspaces/#workspace-sources</p>
<p>turbo does it by defining it extends</p>
<img alt="image" src="https://github.com/user-attachments/assets/f88f66e4-c3f8-4051-be17-f3e2880681cd">

<p>https://turbo.build/repo/docs/reference/package-configurations</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-22 14:02</div>
            <div class="timeline-body"><p>The root is the nearest parent directory containing a <code>pyproject.toml</code>.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-11-22 14:03</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/kevinsimper">@kevinsimper</a> on 2024-12-02 13:54</div>
            <div class="timeline-body"><p>@charliermarsh But you can have multiple pyproject.toml? :)</p>
<p>https://docs.astral.sh/uv/concepts/projects/workspaces/#workspace-layouts</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-12-02 22:29</div>
            <div class="timeline-body"><p>This is implemented at https://github.com/astral-sh/uv/blob/cf20673197f2073aa2ccde999423b816d3cb5ca5/crates/uv-workspace/src/workspace.rs#L125</p>
<p>We find the project root as the closest <code>pyproject.toml</code> then look for a workspace root in a parent directory https://github.com/astral-sh/uv/blob/cf20673197f2073aa2ccde999423b816d3cb5ca5/crates/uv-workspace/src/workspace.rs#L180</p>
<p>A parent <code>pyproject.toml</code> is only a workspace root if the project is a workspace member https://github.com/astral-sh/uv/blob/cf20673197f2073aa2ccde999423b816d3cb5ca5/crates/uv-workspace/src/workspace.rs#L1177-L1198</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-12-26 16:55</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/anthonyalayo">@anthonyalayo</a> on 2025-07-30 19:31</div>
            <div class="timeline-body"><p>@zanieb is there a way to make uv <em><strong>not</strong></em> look at the parent directory? It&#x27;s very unintuitive. I didn&#x27;t realize that my parent directory also had a pyproject.toml, with a different python version. That made me scratch my head as to why my python version was wrong when trying to run uv commands in the directory that I care about.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-30 19:41</div>
            <div class="timeline-body"><p>Can you give more context about what your setup looks like? I&#x27;d recommend opening a new issue.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/anthonyalayo">@anthonyalayo</a> on 2025-07-30 19:49</div>
            <div class="timeline-body"><p>@zanieb putting the following directory:</p>
<pre><code>~/PycharmProjects/torch_test &gt; tree                                                                                                               12:48:58 PM
.
├── main.py
├── pyproject.toml
├── README.md
└── uv.lock

1 directory, 4 files
</code></pre>
<p>Inside the following directory:</p>
<pre><code>~/PycharmProjects/HuggingFaceGuidedTourForMac main !2 &gt; tree                                                                                      12:49:26 PM
.
├── 00-SystemCheck.ipynb
├── 01-ChatBot.ipynb
├── 02-Benchmarks.ipynb
├── LegacyGuides
│   └── README_v3.md
├── LICENSE
├── NextSteps
│   ├── llama.cpp.md
│   └── Resources
│       ├── llama-model.png
│       └── llama2-chat.png
├── pyproject.toml
├── README.md
├── requirements.txt
├── Resources
│   ├── conda-envs.png
│   ├── huggingface-transformers.png
│   ├── jupyterlab.png
│   ├── no_venv.png
│   ├── ProjectFolder.png
│   └── venv_remind.png
└── uv.lock

5 directories, 18 files

</code></pre>
<p>Causes <code>uv</code> to use the <code>.python-version</code> from the parent directory instead of the current directory.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-07-30 19:57</div>
            <div class="timeline-body"><p>You can use <code>--no-config</code> to ignore that, or write a <code>.python-version</code> file in the child with your preference.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/anthonyalayo">@anthonyalayo</a> on 2025-07-30 20:03</div>
            <div class="timeline-body"><p>There&#x27;s a <code>.python-version</code> in the child as well, but that seems to be ignored:</p>
<pre><code>~/Py/HuggingFaceGuidedTourForMac main !2 ?1 &gt; ls -al
total 672
drwxr-xr-x  19 anthony  staff     608 Jul 30 13:01 .
drwxr-xr-x   7 anthony  staff     224 Jul 30 13:01 ..
drwxr-xr-x  12 anthony  staff     384 Jul 30 13:01 .git
-rw-r--r--   1 anthony  staff     113 Jul 29 23:19 .gitignore
drwxr-xr-x   3 anthony  staff      96 Jul 29 23:24 .ipynb_checkpoints
-rw-r--r--   1 anthony  staff       5 Jul 29 23:19 .python-version
drwxr-xr-x  10 anthony  staff     320 Jul 29 23:20 .venv
-rw-r--r--   1 anthony  staff    8586 Jul 29 23:28 00-SystemCheck.ipynb
-rw-r--r--   1 anthony  staff    3892 Jul 29 23:19 01-ChatBot.ipynb
-rw-r--r--   1 anthony  staff   11040 Jul 29 23:19 02-Benchmarks.ipynb
drwxr-xr-x   3 anthony  staff      96 Jul 29 23:19 LegacyGuides
-rw-r--r--   1 anthony  staff    1075 Jul 29 23:19 LICENSE
drwxr-xr-x   4 anthony  staff     128 Jul 29 23:19 NextSteps
-rw-r--r--   1 anthony  staff     469 Jul 30 12:18 pyproject.toml
-rw-r--r--   1 anthony  staff   20859 Jul 29 23:19 README.md
-rw-r--r--   1 anthony  staff      85 Jul 29 23:19 requirements.txt
drwxr-xr-x   8 anthony  staff     256 Jul 29 23:19 Resources
drwxr-xr-x   8 anthony  staff     256 Jul 30 12:31 torch_test
-rw-r--r--   1 anthony  staff  266747 Jul 29 23:19 uv.lock


~/Py/HuggingFaceGuidedTourForMac/torch_test main !2 ?1 &gt; ls -al
total 112
drwxr-xr-x   8 anthony  staff    256 Jul 30 12:31 .
drwxr-xr-x  19 anthony  staff    608 Jul 30 13:01 ..
-rw-r--r--   1 anthony  staff      5 Jul 30 12:21 .python-version
drwxr-xr-x   9 anthony  staff    288 Jul 30 12:31 .venv
-rw-r--r--   1 anthony  staff     88 Jul 30 12:18 main.py
-rw-r--r--   1 anthony  staff    197 Jul 30 12:31 pyproject.toml
-rw-r--r--   1 anthony  staff      0 Jul 30 12:18 README.md
-rw-r--r--   1 anthony  staff  41549 Jul 30 12:31 uv.lock

~/Py/HuggingFaceGuidedTourForMac/torch_test main !2 ?1 &gt; uv sync -v
DEBUG uv 0.8.3 (Homebrew 2025-07-24)
DEBUG Found project root: `/Users/anthony/PycharmProjects/HuggingFaceGuidedTourForMac/torch_test`
DEBUG Found workspace root: `/Users/anthony/PycharmProjects/HuggingFaceGuidedTourForMac`
DEBUG Adding root workspace member: `/Users/anthony/PycharmProjects/HuggingFaceGuidedTourForMac`
DEBUG Adding discovered workspace member: `/Users/anthony/PycharmProjects/HuggingFaceGuidedTourForMac/torch_test`
DEBUG Acquired lock for `/Users/anthony/PycharmProjects/HuggingFaceGuidedTourForMac`
DEBUG Reading Python requests from version file at `/Users/anthony/PycharmProjects/HuggingFaceGuidedTourForMac/.python-version`
DEBUG Using Python request `3.12` from version file at `/Users/anthony/PycharmProjects/HuggingFaceGuidedTourForMac/.python-version`
DEBUG Checking for Python environment at: `/Users/anthony/PycharmProjects/HuggingFaceGuidedTourForMac/.venv`
DEBUG The project environment&#x27;s Python version satisfies the request: `Python 3.12`
DEBUG The project environment&#x27;s Python version does not meet the Python requirement: `&gt;=3.13`
DEBUG Searching for Python 3.12 in managed installations or search path
DEBUG Searching for managed installations at `/Users/anthony/.local/share/uv/python`
DEBUG Found managed installation `cpython-3.12.11-macos-aarch64-none`
DEBUG Found `cpython-3.12.11-macos-aarch64-none` at `/Users/anthony/.local/share/uv/python/cpython-3.12.11-macos-aarch64-none/bin/python3.12` (managed installations)
Using CPython 3.12.11
DEBUG Released lock at `/var/folders/ny/15f9_7sj361dszmx90r1fhhr0000gn/T/uv-7d5badd5f2fb341a.lock`
error: The Python request from `/Users/anthony/PycharmProjects/HuggingFaceGuidedTourForMac/.python-version` resolved to Python 3.12.11, which is incompatible with the project&#x27;s Python requirement: `&gt;=3.13` (from workspace member `torch-test`&#x27;s `project.requires-python`).
Use `uv python pin` to update the `.python-version` file to a compatible version
</code></pre>
<p>I&#x27;ll go with this <code>--no-config</code>, thank you!</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:35:42 UTC
    </footer>
</body>
</html>
