<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>specifying single-package indices with uv add --index - astral-sh/uv #8341</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>specifying single-package indices with uv add --index</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/8341">#8341</a>
        opened by <a href="https://github.com/itrase">@itrase</a>
        on 2024-10-18 17:34
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/itrase">@itrase</a> on 2024-10-18 17:34</div>
            <div class="timeline-body"><p>The new --index functionality makes it possible to do this:
<code>uv init</code>
<code>uv add torch --index pytorch=https://download.pytorch.org/whl/cu121</code>
and get a reproducable toml file, which is really nice. Is there a way to specify through the command line that torch should be the only project that uses that index, and all the others should use the default (pypi)? As an example, if I then call:
<code>uv add fsspec</code>
This installs an old version present on the pytorch index, rather than the newer one in pypi. I could just add unsafe-best-match, but I'd prefer not to.
As an alternative, is there a way to tell uv that I want to install a particular package from the default index? Something like:
<code>uv add fsspec --index default</code> ? That doesn't feel quite as good but would probably be a solution 90% of the time.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-10-18 17:58</div>
            <div class="timeline-body"><p>You can change the index definition to:</p>
<pre><code class="language-toml">[[tool.uv.index]]
name = &quot;pytorch&quot;
url = &quot;https://download.pytorch.org/whl/cu121&quot;
explicit = true
</code></pre>
<p>Then, the index will <em>only</em> be used by that package.</p>
<p>We don't have a way to do this via the CLI-only though, you have to add <code>explicit = true</code> to the TOML. I wonder what a good API would look like for that (<code>--explicit-index</code>)?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-10-18 17:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/itrase">@itrase</a> on 2024-10-18 18:11</div>
            <div class="timeline-body"><p>ah thank you! explicit solves the problem for now. And I think a CLI flag like <code>--explicit-index</code> would work totally fine.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/8344.html">astral-sh/uv#8344</a> on 2024-10-21 09:29</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../issues/12483.html">astral-sh/uv#12483</a> on 2025-03-26 11:10</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:00 UTC
    </footer>
</body>
</html>
