<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv fails to install gym 0.21.0 - astral-sh/uv #7014</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv fails to install gym 0.21.0</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/7014">#7014</a>
        opened by <a href="https://github.com/locifazi">@locifazi</a>
        on 2024-09-04 12:53
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/locifazi">@locifazi</a></div>
            <div class="timeline-body"><p>I'm using <code>uv 0.4.2</code> on <code>AlmaLinux-8.9</code>, and encounter following problem:</p>
<pre><code>$ uv pip install gym==0.21.0
                                                                                                             
error: Failed to download and build `gym==0.21.0`
  Caused by: Build backend failed to determine extra requires with `build_wheel()` with exit status: 1
--- stdout:

--- stderr:
/home/USER/.cache/uv/builds-v0/.tmpwd1OEy/lib/python3.11/site-packages/setuptools/_distutils/dist.py:261: UserWarning: Unknown distribution option: 'tests_require'
  warnings.warn(msg)
error in gym setup command: 'extras_require' must be a dictionary whose values are strings or lists of strings containing valid project/version requirement specifiers.
---
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-04 13:21</div>
            <div class="timeline-body"><p>Are you able to install the package with <code>uv pip install --use-pep517 gym==0.21.0</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @charliermarsh on 2024-09-04 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/locifazi">@locifazi</a> on 2024-09-04 14:01</div>
            <div class="timeline-body"><p>No, the flag <code>--use-pep517</code> isn't recognized by uv, but apparently uv follows <a href="https://docs.astral.sh/uv/pip/compatibility/#pep-517-build-isolation">by default pep517</a>.</p>
<p>I can also mention that this package is successfully installed through <code>pip install gym==0.21.0</code> and <code>pip install gym==0.21.0 --use-pep517</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-09-04 14:02</div>
            <div class="timeline-body"><p>(Sorry, I meant <code>pip install gym==0.21.0 --use-pep517</code>.)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/locifazi">@locifazi</a> on 2024-09-11 12:16</div>
            <div class="timeline-body"><p>I found the cause: gym 0.21.0 has incorrect metadata, but I was able to install it using pip due to some custom configurations I've made to pip.</p>
<p>Therefore uv's error message is valid.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @locifazi on 2024-09-11 12:16</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/seif9116">@seif9116</a> on 2025-11-05 19:47</div>
            <div class="timeline-body"><p>ðŸ˜­ðŸ˜­ðŸ˜­ What are those custom configurations @locifazi ðŸ¥¹ðŸ¥¹ðŸ¥¹.</p>
<p>I tried in a venv managed by uv (python 3.9). <code>uv pip install gym==0.21.0</code> as well as <code>pip install gym==0.21.0 --use-pep517</code>. Both times I get the error</p>
<pre><code>  Ã— Failed to build `gym==0.21.0`
  â”œâ”€â–¶ The build backend returned an error
  â•°â”€â–¶ Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit status: 1)

      [stderr]
      /home/seif/.cache/uv/builds-v0/.tmpyKq7Tf/lib/python3.9/site-packages/setuptools/_distutils/dist.py:289: UserWarning: Unknown distribution option: 'tests_require'
        warnings.warn(msg)
      error in gym setup command: 'extras_require' must be a dictionary whose values are strings or lists of strings containing valid project/version requirement specifiers.

      hint: This usually indicates a problem with the package or the build environment.
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/konstin">@konstin</a> on 2025-11-05 20:08</div>
            <div class="timeline-body"><p>Usually I would recommend upgrading to a more recent version or reporting the problem upstream, but the gym package has been abandoned.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pelson">@pelson</a> on 2025-11-06 10:26</div>
            <div class="timeline-body"><p>The problem with gym is that you have to build the wheel yourself... and build dependencies get resolved at build time (so something that used to be able to build, can get newer dependencies and no longer build). In this case, setuptools moved forwards... you have to pin back some of the dependencies:</p>
<pre><code>$ cat foo.txt
setuptools==65.*

$ PIP_CONSTRAINT=foo.txt uv run --python=3.9 --with 'pip&lt;24.1' pip wheel --no-binary=:all: gym==0.21.*
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-11-06 12:59</div>
            <div class="timeline-body"><p>See also, https://docs.astral.sh/uv/reference/settings/#build-constraint-dependencies</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:26:50 UTC
    </footer>
</body>
</html>
