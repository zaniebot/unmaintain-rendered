<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indicate the version of uv that was used to generate/update the uv.lock file in the file itself - astral-sh/uv #11319</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Indicate the version of uv that was used to generate/update the uv.lock file in the file itself</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/11319">#11319</a>
        opened by <a href="https://github.com/sebn">@sebn</a>
        on 2025-02-07 15:36
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/sebn">@sebn</a> on 2025-02-07 15:36</div>
            <div class="timeline-body"><h3>Summary</h3>
<p>When starting a project with <code>uv</code> version 0.5.28, the <code>uv.lock</code> file would include something like this:</p>
<pre><code>[[uv]]
version = 0.5.28
</code></pre>
<p>The value would be updated everytime a different uv binary version is used to change the lockfile, be it a newer version:</p>
<pre><code>[[uv]]
version = 0.5.29
</code></pre>
<p>Or an older one:</p>
<pre><code>[[uv]]
version = 0.5.27
</code></pre>
<h3>Example</h3>
<p>This would make it possible or at least easier to:</p>
<ul>
<li>Understand both for uv maintainers &amp; uv users that some unexpected changes in the <code>uv.lock</code> file can be related to the version of the uv binary that was used &amp; decide whether the change is legit or not.</li>
<li>Display a warning in the console about the current version being used not matching the one in the lock file (separate feature, built on top of this one)</li>
<li>Write a simple shell script in one's git repo that automatically install the uv version matching the one in their <code>uv.lock</code> file</li>
</ul>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @sebn on 2025-02-07 15:36</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Indicate the version of uv that was used to lock the dependencies in the lockfile itself" to "Indicate the version of uv that was used to generate/update the uv.lock file in the file itself" by @sebn on 2025-02-07 15:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Assigned to @charliermarsh by @zanieb on 2025-02-07 15:38</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Referenced in <a href="../pulls/11353.html">astral-sh/uv#11353</a> on 2025-02-09 13:18</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-09 20:07</div>
            <div class="timeline-body"><p>Hmm. I think this would be slightly problematic in that it would unnecessarily couple the lockfile to the uv version. For example, the lockfile would now be invalidated every time you update the uv version, despite the fact that the semantic contents may not change, and the lockfile itself is already versioned (and intended to be compatible with a wide range of uv versions).</p>
<p>I would suggest using <a href="https://docs.astral.sh/uv/reference/settings/#required-version"><code>required-version</code></a> for this? It's intended for projects that want to enforce a specific uv version.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sebn">@sebn</a> on 2025-02-13 17:23</div>
            <div class="timeline-body"><p>Thanks you very much for taking the time to answer üôÇ</p>
<p>I was assuming that the lockfile would only be invalidated when some semantic contents other than this version number would actually need to be changed &amp; that the version number would only be updated together with those actual changes. But I know basically nothing of uv's internal, so I'm possibly missing something, maybe this behavior would be inherently incompatible with the way it works?</p>
<p>By the way, <a href="https://docs.astral.sh/uv/reference/settings/#required-version">required-version</a> could definitely avoid some issues, thanks for pointing this out! (although the idea was more about knowing which version triggered a lockfile change, than enforcing some specific version)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-02-14 20:01</div>
            <div class="timeline-body"><p>@sebn -- That makes sense and is possible in theory. I just think it's going to cause too much churn for teams. It's not a strict requirement that users within a given project are all using the same uv version; and if we start tracking the version in the lockfile, it'll oscillate back and forth whenever folks change the project dependencies.</p>
<p>For now, I'd recommend <code>required-version</code> for teams that want to track and enforce this. I'm sorry that I wasn't able to deliver on the exact ask here.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-02-14 20:01</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/sebn">@sebn</a> on 2025-02-15 08:40</div>
            <div class="timeline-body"><blockquote>
<p>I'm sorry that I wasn't able to deliver on the exact ask here.</p>
</blockquote>
<p>No problem, I'm completely fine with the feature request being closed, the <code>required-version</code> solution makes sense. üëç</p>
<p>Thank you for all the hard work btw, uv is really a game changer on a daily basis üòÑ</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:02 UTC
    </footer>
</body>
</html>
