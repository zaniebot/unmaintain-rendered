<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recommend pipe fail option on GitHub actions uv install?  - astral-sh/uv #6871</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Recommend pipe fail option on GitHub actions uv install?</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/6871">#6871</a>
        opened by <a href="https://github.com/notatallshaw">@notatallshaw</a>
        on 2024-08-30 14:05
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/notatallshaw">@notatallshaw</a> on 2024-08-30 14:05</div>
            <div class="timeline-body"><p>I'd be happy to open a PR to update the docs, but it wasn't clear to me just yet if this <em>should</em> be recommended.</p>
<p>I set up a github workflow in my company's local github enterprise install with the following step taken from the <a href="https://docs.astral.sh/uv/guides/integration/github/#installation">docs</a>:</p>
<pre><code class="language-yaml"> - name: Set up uv
   # Install latest uv version using the installer
   run: curl -LsSf https://astral.sh/uv/install.sh | sh
</code></pre>
<p>However, what I found was if the curl command fails this step can still succeed, this can happen because of either curl not being available, some network issue, or something else. I ended up replacing this step with:</p>
<pre><code class="language-yaml">  - name: Set up uv
    shell: bash
    run: | # Install latest uv version using the installer
      set -o pipefail
      curl -LsSf https://astral.sh/uv/install.sh | sh
</code></pre>
<p>So if the curl command fails it produces an error.</p>
<p>Do you think the docs should be updated in general? Or do you think this is enough of an edge case not to make the instructions overly complicated?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/pplmx">@pplmx</a> on 2024-08-30 15:56</div>
            <div class="timeline-body"><p>I also encountered this issue while building from the <code>Dockerfile</code>. When running the command <code>RUN curl -LsSf https://astral.sh/uv/install.sh | sh</code>, it failed. However, the next build skips this layer.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">documentation</span> added by @zanieb on 2024-09-03 13:58</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2024-09-03 13:59</div>
            <div class="timeline-body"><p>Yeah we should set pipefail, PR welcome.</p>
<p>@pplmx I'd highly recommend copying from our Docker image instead of using <code>curl</code> to install (this is covered in the docs too)</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 12:30:41 UTC
    </footer>
</body>
</html>
