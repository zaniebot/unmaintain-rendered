<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Consider making `uv cache clean` prompt for directories with non-cache contents - astral-sh/uv #16260</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Consider making <code>uv cache clean</code> prompt for directories with non-cache contents</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/16260">#16260</a>
        opened by <a href="https://github.com/charliermarsh">@charliermarsh</a>
        on 2025-10-13 01:02
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/charliermarsh">@charliermarsh</a></div>
            <div class="timeline-body"><p>If you accidentally set <code>UV_CACHE_DIR</code> to some working directory, <code>uv cache clean</code> will blow it away, since it's effectively an <code>rm -rf</code>. This matches the behavior of other tools (e.g., cargo), but we may want to consider guarding against these outcomes. It's not totally trivial, because <code>uv cache clean</code> is intended to clear out contents from <em>previous</em> uv versions -- in other words, <code>uv cache clean</code> doesn't have a clear enumeration of &quot;all contents that are part of the uv cache&quot;, since there might be other directories or files that were introduced and removed in prior uv versions. However, we could...</p>
<ol>
<li>Always prompt (with the directory name) prior to removal.</li>
<li>Prompt if we see directories of files that don't end in <code>-v\d+</code> (i.e., a version suffix).</li>
<li>Prompt if we don't see a <code>CACHEDIR.TAG</code> (since we've always had this).</li>
</ol>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">needs-decision</span> added by @charliermarsh on 2025-10-13 01:02</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Consider making `uv cache clean prompt` for directories with non-cache contents" to "Consider making `uv cache clean` prompt for directories with non-cache contents" by @charliermarsh on 2025-11-08 03:11</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-12 17:33:09 UTC
    </footer>
</body>
</html>
