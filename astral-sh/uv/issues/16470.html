<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RuntimeError: TensorRT currently only builds wheels for Linux and Windows - astral-sh/uv #16470</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>RuntimeError: TensorRT currently only builds wheels for Linux and Windows</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/16470">#16470</a>
        opened by <a href="https://github.com/mikel-brostrom">@mikel-brostrom</a>
        on 2025-10-27 11:57
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/mikel-brostrom">@mikel-brostrom</a> on 2025-10-27 11:57</div>
            <div class="timeline-body"><h3>Question</h3>
<p>My project.toml looks like this:</p>
<pre><code class="language-toml"># =====================================================
# pyproject.toml for BoxMOT ← UV with GPU by default
# =====================================================

#######################
# Alternative Indexes #
#######################

[[tool.uv.index]]
name     = &quot;torch-cpu&quot;
url      = &quot;https://download.pytorch.org/whl/cpu&quot;
explicit = true

[[tool.uv.index]]
name     = &quot;torch-gpu&quot;
url      = &quot;https://download.pytorch.org/whl/cu121&quot;
explicit = true

##################################
# Pin torch/vision to *an* index #
##################################

[tool.uv.sources]
torch = [
  { index = &quot;torch-cpu&quot;, marker = &quot;sys_platform == 'darwin'&quot; },
  { index = &quot;torch-gpu&quot;, marker = &quot;sys_platform == 'linux' or sys_platform == 'win32'&quot; },
]
torchvision = [
  { index = &quot;torch-cpu&quot;, marker = &quot;sys_platform == 'darwin'&quot; },
  { index = &quot;torch-gpu&quot;, marker = &quot;sys_platform == 'linux' or sys_platform == 'win32'&quot; },
]

#########################
# UV-specific Overrides #
#########################

# Override yolox's outated dependecies
[[tool.uv.dependency-metadata]]
name          = &quot;yolox&quot;
version       = &quot;0.3.0&quot;
requires-dist = [&quot;onnx&gt;=1.17.0&quot;, &quot;onnxsim&lt;1.0.0,&gt;=0.4.36&quot;]

# Ensure yolox builds with setuptools present in the isolated build env
[tool.uv.extra-build-dependencies]
yolox = [&quot;setuptools&quot;, &quot;torch&lt;3.0.0,&gt;=2.2.1&quot;,]

############
# Flake8   #
############

[tool.flake8]
max-line-length = 120
exclude         = [&quot;.tox&quot;, &quot;*.egg&quot;, &quot;build&quot;, &quot;temp&quot;]
select          = [&quot;E&quot;, &quot;W&quot;, &quot;F&quot;]
doctests        = true
verbose         = 2
format          = &quot;pylint&quot;
ignore          = [&quot;E731&quot;, &quot;F405&quot;, &quot;E402&quot;, &quot;W504&quot;, &quot;W605&quot;, &quot;E741&quot;]

##############
# Build System #
##############

[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;

###########
# Project #
###########

[project]
name            = &quot;boxmot&quot;
version         = &quot;15.0.9&quot;
description     = &quot;BoxMOT: pluggable SOTA tracking modules for segmentation, object detection and pose estimation models&quot;
readme          = &quot;README.md&quot;
requires-python = &quot;&gt;=3.9,&lt;=3.13&quot;
license         = { text = &quot;AGPL-3.0&quot; }

authors = [
  { name = &quot;Mikel Broström&quot; },
]

classifiers = [
  &quot;Development Status :: 4 - Beta&quot;,
  &quot;Intended Audience :: Developers&quot;,
  &quot;Intended Audience :: Education&quot;,
  &quot;Intended Audience :: Science/Research&quot;,
  &quot;License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)&quot;,
  &quot;Programming Language :: Python :: 3&quot;,
  &quot;Programming Language :: Python :: 3.9&quot;,
  &quot;Programming Language :: Python :: 3.10&quot;,
  &quot;Programming Language :: Python :: 3.11&quot;,
  &quot;Programming Language :: Python :: 3.12&quot;,
  &quot;Topic :: Software Development&quot;,
  &quot;Topic :: Scientific/Engineering&quot;,
  &quot;Topic :: Scientific/Engineering :: Artificial Intelligence&quot;,
  &quot;Topic :: Scientific/Engineering :: Image Recognition&quot;,
  &quot;Topic :: Scientific/Engineering :: Image Processing&quot;,
]

keywords = [
  &quot;tracking&quot;,
  &quot;tracking-by-detection&quot;,
  &quot;machine-learning&quot;,
  &quot;deep-learning&quot;,
  &quot;vision&quot;,
  &quot;ML&quot;,
  &quot;DL&quot;,
  &quot;AI&quot;,
  &quot;YOLO&quot;,
]

dependencies = [
  # Kalman filters for motion models (SORT/OCSort/HybridSort)
  &quot;filterpy&lt;2.0.0,&gt;=1.4.5&quot;,
  # Download pretrained weights/checkpoints from Google Drive
  &quot;gdown&lt;6.0.0,&gt;=5.1.0&quot;,
  # Fast LAP/Hungarian solver for data association
  &quot;lapx&lt;1.0.0,&gt;=0.5.5&quot;,
  &quot;loguru&lt;1.0.0,&gt;=0.7.2&quot;,
  &quot;numpy&quot;,
  &quot;regex&lt;2025.0.0,&gt;=2024.0.0&quot;,

  &quot;scikit-learn&lt;2.0.0,&gt;=1.3.0&quot;,
  &quot;pandas&lt;3.0.0,&gt;=2.0.0&quot;,
  &quot;opencv-python&lt;5.0.0,&gt;=4.7.0&quot;,

  &quot;torch&gt;=2.2.1,&lt;3.0.0&quot;,
  &quot;torchvision&gt;=0.17.1,&lt;1.0.0&quot;,
  &quot;click&gt;=8.1.8&quot;,

  # clip reid needs
  &quot;ftfy&lt;7.0.0,&gt;=6.1.3&quot;,
  &quot;yacs&lt;1.0.0,&gt;=0.1.8&quot;,
]

[project.scripts]
boxmot = &quot;boxmot.engine.cli:main&quot;

########################################
# local-only “dev/test/docs/ci” stacks #
########################################

[dependency-groups]
dev  = [&quot;ipykernel&gt;=6.29.5,&lt;7.0.0&quot;]
test = [&quot;pytest&gt;=8.0.2,&lt;9.0.0&quot;, &quot;pytest-cov&gt;=6.0.0,&lt;7.0.0&quot;, &quot;isort&gt;=5.13.2,&lt;6.0.0&quot;]
docs = [
  &quot;mkdocs&gt;=1.6.1&quot;, &quot;mkdocs-click&gt;=0.9.0&quot;,
  &quot;mkdocs-include-markdown-plugin&gt;=7.1.6&quot;,
  &quot;mkdocs-material&gt;=9.6.15&quot;,
  &quot;mkdocstrings&gt;=0.30.0&quot;, &quot;mkdocstrings-python&gt;=1.16.12&quot;,
]

#############################
# runtime / feature toggles #
#############################

[project.optional-dependencies]
yolo = [&quot;ultralytics&gt;=3.8.200&quot;]

evolve = [
  &quot;ray&gt;=2.35.0,&lt;3.0.0&quot;,
  &quot;ray[tune]&gt;=2.35.0,&lt;3.0.0&quot;,
  &quot;plotly&gt;=5.19.0,&lt;6.0.0&quot;,
  &quot;bayesian-optimization&gt;=2.0.4&quot;,
  &quot;optuna&quot;
]

onnx = [
  &quot;onnx&gt;=1.16.1,&lt;1.19&quot;,
  &quot;onnxruntime&gt;=1.20.0&quot;,
  &quot;onnxslim&gt;=0.1.67&quot;
]

openvino = [&quot;openvino&gt;=2025.2.0&quot;]

tflite = [
  &quot;onnx2tf&gt;=1.18.0&quot;,
  &quot;onnx&gt;=1.16.1&quot;,
  &quot;tensorflow==2.17.0&quot;,
  &quot;tf_keras&quot;,
  &quot;sng4onnx&gt;=1.0.1&quot;,
  &quot;onnx_graphsurgeon&gt;=0.3.26&quot;,
  &quot;onnxslim&gt;=0.1.31&quot;,
  &quot;onnxruntime&quot;,
  &quot;flatbuffers&gt;=23.5.26&quot;,
  &quot;onnxsim==0.4.33&quot;,
  &quot;psutil==5.9.5&quot;,
  &quot;ml_dtypes==0.3.2&quot;,
  &quot;ai_edge_litert&gt;=1.2.0&quot;,
]
</code></pre>
<p>I would like to add this</p>
<pre><code class="language-toml">tensorrt = [
  &quot;tensorrt&gt;7.0.0 ; (sys_platform == 'linux' or sys_platform == 'win32')&quot;
]
</code></pre>
<p>under optional-dependencies. But I keep getting:</p>
<pre><code>➜  boxmot git:(update-uv-lock) ✗ uv sync
warning: The `extra-build-dependencies` option is experimental and may change without warning. Pass `--preview-features extra-build-dependencies` to disable this warning.
  × Failed to build `tensorrt-cu13==10.13.3.9`
  ├─▶ The build backend returned an error
  ╰─▶ Call to `setuptools.build_meta:__legacy__.build_wheel` failed (exit status: 1)

      [stderr]
      Traceback (most recent call last):
        File &quot;&lt;string&gt;&quot;, line 14, in &lt;module&gt;
        File &quot;/Users/mikel.brostrom/.cache/uv/builds-v0/.tmpGsQ0qn/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 331, in get_requires_for_build_wheel
          return self._get_build_requires(config_settings, requirements=[])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File &quot;/Users/mikel.brostrom/.cache/uv/builds-v0/.tmpGsQ0qn/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 301, in _get_build_requires
          self.run_setup()
        File &quot;/Users/mikel.brostrom/.cache/uv/builds-v0/.tmpGsQ0qn/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 512, in run_setup
          super().run_setup(setup_script=setup_script)
        File &quot;/Users/mikel.brostrom/.cache/uv/builds-v0/.tmpGsQ0qn/lib/python3.12/site-packages/setuptools/build_meta.py&quot;, line 317, in run_setup
          exec(code, locals())
        File &quot;&lt;string&gt;&quot;, line 65, in &lt;module&gt;
      RuntimeError: TensorRT currently only builds wheels for Linux and Windows

      hint: This usually indicates a problem with the package or the build environment.
  help: `tensorrt-cu13` (v10.13.3.9) was included because `boxmot[tensorrt]` (v15.0.9) depends on `tensorrt&gt;7.0.0` (v10.13.3.9) which depends on `tensorrt-cu13==10.13.3.9`
</code></pre>
<p>As you can see &quot;TensorRT currently only builds wheels for Linux and Windows&quot;. How can I create a single toml that resolves for all systems given that some builds only exist for certain platforms?</p>
<h3>Platform</h3>
<p>macOS Tahoe 26.0.1</p>
<h3>Version</h3>
<p>0.9.5 (d5f39331a 2025-10-21)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by @mikel-brostrom on 2025-10-27 11:57</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/mikel-brostrom">@mikel-brostrom</a> on 2025-10-28 18:59</div>
            <div class="timeline-body"><p>I have no idea if this is the way UV is mean to be used in this case. Would appreciate any feedback. But this works:</p>
<pre><code class="language-toml"># =====================================================
# pyproject.toml for BoxMOT ← UV
# =====================================================

#######################
# Alternative Indexes #
#######################

[[tool.uv.index]]
name     = &quot;torch-cpu&quot;
url      = &quot;https://download.pytorch.org/whl/cpu&quot;
explicit = true

[[tool.uv.index]]
name     = &quot;torch-gpu&quot;
url      = &quot;https://download.pytorch.org/whl/cu121&quot;
explicit = true

# NVIDIA packages (TensorRT, etc.) live here
[[tool.uv.index]]
name     = &quot;nvidia&quot;
url      = &quot;https://pypi.nvidia.com&quot;
explicit = true

##################################
# Pin torch/vision to *an* index #
##################################

[tool.uv.sources]
torch = [
  { index = &quot;torch-cpu&quot;, marker = &quot;sys_platform == 'darwin'&quot; },
  { index = &quot;torch-gpu&quot;, marker = &quot;sys_platform == 'linux' or sys_platform == 'win32'&quot; },
]
torchvision = [
  { index = &quot;torch-cpu&quot;, marker = &quot;sys_platform == 'darwin'&quot; },
  { index = &quot;torch-gpu&quot;, marker = &quot;sys_platform == 'linux' or sys_platform == 'win32'&quot; },
]

# Route TensorRT packages to NVIDIA’s index (and never on Darwin)
tensorrt = [
  { index = &quot;nvidia&quot;, marker = &quot;sys_platform != 'darwin'&quot; },
]
&quot;tensorrt-cu13&quot; = [
  { index = &quot;nvidia&quot;, marker = &quot;sys_platform != 'darwin'&quot; },
]
&quot;tensorrt-cu13-libs&quot; = [
  { index = &quot;nvidia&quot;, marker = &quot;sys_platform != 'darwin'&quot; },
]

#########################
# UV-specific Overrides #
#########################

# Override yolox's outdated dependencies
[[tool.uv.dependency-metadata]]
name          = &quot;yolox&quot;
version       = &quot;0.3.0&quot;
requires-dist = [&quot;onnx&gt;=1.17.0&quot;, &quot;onnxsim&lt;1.0.0,&gt;=0.4.36&quot;]

# Ensure yolox builds with setuptools present in the isolated build env
[tool.uv.extra-build-dependencies]
yolox = [&quot;setuptools&quot;, &quot;torch&lt;3.0.0,&gt;=2.2.1&quot;]

# Prevent uv from building TensorRT sdists on macOS during resolution.
[[tool.uv.dependency-metadata]]
name = &quot;tensorrt&quot;
requires-dist = [
  &quot;tensorrt-cu13 ; (sys_platform == 'linux' or sys_platform == 'win32')&quot;,
]

[[tool.uv.dependency-metadata]]
name = &quot;tensorrt-cu13&quot;
requires-dist = [
  &quot;tensorrt-cu13-libs==10.13.3.9 ; (sys_platform == 'linux' or sys_platform == 'win32')&quot;,
]

# Terminal package; provide empty deps to avoid wheel-stub build on Darwin.
[[tool.uv.dependency-metadata]]
name = &quot;tensorrt-cu13-libs&quot;
requires-dist = []

############
# Flake8   #
############

[tool.flake8]
max-line-length = 120
exclude         = [&quot;.tox&quot;, &quot;*.egg&quot;, &quot;build&quot;, &quot;temp&quot;]
select          = [&quot;E&quot;, &quot;W&quot;, &quot;F&quot;]
doctests        = true
verbose         = 2
format          = &quot;pylint&quot;
ignore          = [&quot;E731&quot;, &quot;F405&quot;, &quot;E402&quot;, &quot;W504&quot;, &quot;W605&quot;, &quot;E741&quot;]

##############
# Build System #
##############

[build-system]
requires = [&quot;hatchling&quot;]
build-backend = &quot;hatchling.build&quot;

###########
# Project #
###########

[project]
name            = &quot;boxmot&quot;
version         = &quot;15.0.9&quot;
description     = &quot;BoxMOT: pluggable SOTA tracking modules for segmentation, object detection and pose estimation models&quot;
readme          = &quot;README.md&quot;
requires-python = &quot;&gt;=3.9,&lt;=3.13&quot;
license         = { text = &quot;AGPL-3.0&quot; }

authors = [
  { name = &quot;Mikel Broström&quot; },
]

classifiers = [
  &quot;Development Status :: 4 - Beta&quot;,
  &quot;Intended Audience :: Developers&quot;,
  &quot;Intended Audience :: Education&quot;,
  &quot;Intended Audience :: Science/Research&quot;,
  &quot;License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)&quot;,
  &quot;Programming Language :: Python :: 3&quot;,
  &quot;Programming Language :: Python :: 3.9&quot;,
  &quot;Programming Language :: Python :: 3.10&quot;,
  &quot;Programming Language :: Python :: 3.11&quot;,
  &quot;Programming Language :: Python :: 3.12&quot;,
  &quot;Topic :: Software Development&quot;,
  &quot;Topic :: Scientific/Engineering&quot;,
  &quot;Topic :: Scientific/Engineering :: Artificial Intelligence&quot;,
  &quot;Topic :: Scientific/Engineering :: Image Recognition&quot;,
  &quot;Topic :: Scientific/Engineering :: Image Processing&quot;,
]

keywords = [
  &quot;tracking&quot;,
  &quot;tracking-by-detection&quot;,
  &quot;machine-learning&quot;,
  &quot;deep-learning&quot;,
  &quot;vision&quot;,
  &quot;ML&quot;,
  &quot;DL&quot;,
  &quot;AI&quot;,
  &quot;YOLO&quot;,
]

dependencies = [
  # Kalman filters for motion models (SORT/OCSort/HybridSort)
  &quot;filterpy&lt;2.0.0,&gt;=1.4.5&quot;,
  # Download pretrained weights/checkpoints from Google Drive
  &quot;gdown&lt;6.0.0,&gt;=5.1.0&quot;,
  # Fast LAP/Hungarian solver for data association
  &quot;lapx&lt;1.0.0,&gt;=0.5.5&quot;,
  &quot;loguru&lt;1.0.0,&gt;=0.7.2&quot;,
  &quot;numpy&quot;,
  &quot;regex&lt;2025.0.0,&gt;=2024.0.0&quot;,

  &quot;scikit-learn&lt;2.0.0,&gt;=1.3.0&quot;,
  &quot;pandas&lt;3.0.0,&gt;=2.0.0&quot;,
  &quot;opencv-python&lt;5.0.0,&gt;=4.7.0&quot;,

  &quot;torch&gt;=2.2.1,&lt;3.0.0&quot;,
  &quot;torchvision&gt;=0.17.1,&lt;1.0.0&quot;,
  &quot;click&gt;=8.1.8&quot;,

  # clip reid needs
  &quot;ftfy&lt;7.0.0,&gt;=6.1.3&quot;,
  &quot;yacs&lt;1.0.0,&gt;=0.1.8&quot;,
]

[project.scripts]
boxmot = &quot;boxmot.engine.cli:main&quot;

########################################
# local-only “dev/test/docs/ci” stacks #
########################################

[dependency-groups]
dev  = [&quot;ipykernel&gt;=6.29.5,&lt;7.0.0&quot;]
test = [&quot;pytest&gt;=8.0.2,&lt;9.0.0&quot;, &quot;pytest-cov&gt;=6.0.0,&lt;7.0.0&quot;, &quot;isort&gt;=5.13.2,&lt;6.0.0&quot;]
docs = [
  &quot;mkdocs&gt;=1.6.1&quot;, &quot;mkdocs-click&gt;=0.9.0&quot;,
  &quot;mkdocs-include-markdown-plugin&gt;=7.1.6&quot;,
  &quot;mkdocs-material&gt;=9.6.15&quot;,
  &quot;mkdocstrings&gt;=0.30.0&quot;, &quot;mkdocstrings-python&gt;=1.16.12&quot;,
]

#############################
# runtime / feature toggles #
#############################

[project.optional-dependencies]
yolo = [&quot;ultralytics&gt;=3.8.200&quot;]

evolve = [
  &quot;ray&gt;=2.35.0,&lt;3.0.0&quot;,
  &quot;ray[tune]&gt;=2.35.0,&lt;3.0.0&quot;,
  &quot;plotly&gt;=5.19.0,&lt;6.0.0&quot;,
  &quot;bayesian-optimization&gt;=2.0.4&quot;,
  &quot;optuna&quot;
]

onnx = [
  &quot;onnx&gt;=1.16.1,&lt;1.19&quot;,
  &quot;onnxruntime&gt;=1.20.0&quot;,
  &quot;onnxslim&gt;=0.1.67&quot;
]

openvino = [&quot;openvino&gt;=2025.2.0&quot;]

tflite = [
  &quot;onnx2tf&gt;=1.18.0&quot;,
  &quot;onnx&gt;=1.16.1&quot;,
  &quot;tensorflow==2.17.0&quot;,
  &quot;tf_keras&quot;,
  &quot;sng4onnx&gt;=1.0.1&quot;,
  &quot;onnx_graphsurgeon&gt;=0.3.26&quot;,
  &quot;onnxslim&gt;=0.1.31&quot;,
  &quot;onnxruntime&quot;,
  &quot;flatbuffers&gt;=23.5.26&quot;,
  &quot;onnxsim==0.4.33&quot;,
  &quot;psutil==5.9.5&quot;,
  &quot;ml_dtypes==0.3.2&quot;,
  # Windows lacks wheels — exclude on win32
  &quot;ai_edge_litert&gt;=1.2.0 ; sys_platform != 'win32'&quot;,
]

tensorrt = [
  # Only install on Linux/Windows
  &quot;tensorrt&gt;7.0.0 ; (sys_platform == 'linux' or sys_platform == 'win32')&quot;,
]

</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Renamed from "Conditional package installation on Windows/Linux and Mac" to "RuntimeError: TensorRT currently only builds wheels for Linux and Windows" by @mikel-brostrom on 2025-10-28 19:00</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2025-10-28 23:40</div>
            <div class="timeline-body"><p>I think you basically have to use <code>tool.uv.dependency-metadata</code> right now, unfortunately, because they don't seem to ship static metadata for <code>tensorrt</code> nor do they let us query for the metadata on macOS. Sorry about that!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @charliermarsh on 2025-10-28 23:40</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-10 01:33:14 UTC
    </footer>
</body>
</html>
