<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>uv venv does not support choosing 32/64 bit Python versions - astral-sh/uv #3059</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>uv venv does not support choosing 32/64 bit Python versions</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/3059">#3059</a>
        opened by <a href="https://github.com/bennyrowland">@bennyrowland</a>
        on 2024-04-16 09:39
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/bennyrowland">@bennyrowland</a> on 2024-04-16 09:39</div>
            <div class="timeline-body"><!--
Thank you for taking the time to report an issue! We're glad to have you involved with uv.

If you're filing a bug report, please consider including the following information:

* A minimal code snippet that reproduces the bug.
* The command you invoked (e.g., `uv pip sync requirements.txt`), ideally including the `--verbose` flag.
* The current uv platform.
* The current uv version (`uv --version`).
-->

<p>If I run (e.g.) <code>uv venv -p 3.9-32</code> then I get a message &quot; No Python 3.9-32 found through <code>py --list-paths</code>&quot; whereas if I run <code>py --list-paths</code> then I get <code> -V:3.9-32        C:\Users\Public\Python39_32\python.exe</code>. This, of course, is on Windows, the last bastion of 32-bit support.</p>
<p>This is because the regex here https://github.com/astral-sh/uv/blob/eded6c9fae13591d36d775161e1001f2835edc8a/crates/uv-interpreter/src/find_python.rs#L514-L517 does not try to extract the bit information from the version string. On my local system where I only have a 32-bit version of 3.9 installed, running <code>uv venv -p 3.9</code> correctly creates the 32-bit env and everything works correctly, so there doesn't seem to be a problem practically with using 32-bit, only in specifying it in the first place.</p>
<p>The problem this is causing me is that I am using tox and its tox-uv plugin to build and test my package on Azure CI using multiple Python versions, and both 32 and 64 bit. Because Azure has many different Python versions available, when I specify I want Python 3.9-32, uv just creates a 3.9(-64) env because both versions are available and it prefers that one, so I end up building two copies of the 64-bit wheel instead of one 32 and one 64. I assume the same would be true for other CI services like GitHub actions etc.</p>
<p><code>uv --version</code> is <code>uv 0.1.30 (90735660c 2024-04-09)</code></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by @charliermarsh on 2024-04-16 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">windows</span> added by @charliermarsh on 2024-04-16 13:22</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/charliermarsh">@charliermarsh</a> on 2024-04-16 13:23</div>
            <div class="timeline-body"><p>In the latter case (where both 32 and 64 are available), how would you imagine specifying that you want the 32-bit version?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/bennyrowland">@bennyrowland</a> on 2024-04-16 14:57</div>
            <div class="timeline-body"><p>I was thinking that supporting (e.g.) <code>-p 3.9-32</code> and <code>-p 3.9-64</code> would do it, it should just be a matter of parsing the result of <code>py --list-paths</code> to extract the bit-ness of the available interpreters and then match that against the requested bit-ness. Not specifying the bit-ness should probably default to whatever is available, preferring 64-bit if both are. Of course, it means that your model of &quot;what uniquely specifies an interpreter&quot; has to gain an extra field across the board, which might not be terribly desirable just to cover what may be a relatively niche application. It is getting harder to find 32-bit wheels for many of the main Python packages, even on Windows, and I know that I am desperately trying to get my company to move entirely to 64-bit (I got them off Python 2.4 last year), so it may be a use case that dies away altogether in the not too distant future.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:34:57 UTC
    </footer>
</body>
</html>
