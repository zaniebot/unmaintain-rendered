<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document whether `uv-build` backend respects lock file - astral-sh/uv #16513</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Document whether `uv-build` backend respects lock file</h1>

    <div class="meta">
        <span class="state state-closed">Closed</span>
        <a href="https://github.com/astral-sh/uv/issues/16513">#16513</a>
        opened by <a href="https://github.com/arthur-tacca">@arthur-tacca</a>
        on 2025-10-30 15:15
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/arthur-tacca">@arthur-tacca</a> on 2025-10-30 15:15</div>
            <div class="timeline-body"><p>Looking at the <a href="https://docs.astral.sh/uv/concepts/build-backend/">documentation for the new build backend</a> I have two questions:</p>
<ol>
<li>Does it respect the package versions in the lock file?</li>
<li>Does it make use of the existing <code>.venv</code> package environment? (Part (a): does it use it if it already exists; (b) does it create it if not)</li>
</ol>
<p>These are overlapping but not exactly the same. For example, it could be 1. yes, 2. no if it creates an isolated environment but using the lock file. (It could also be 1. no, 2. yes but that seems very unlikely.)</p>
<p>In principle, these questions apply separately to whether the frontend is <code>uv</code> or something else (e.g. <code>python -m build</code>) but hopefully the answers are the same either way.</p>
<p>I haven't marked this as &quot;question&quot; because I'm only 10% posting this to get the actual answer. My main point here is that this should be explicit in the documentation. Apologies if it is and I missed it. If it's not present because it's so totally obvious if you really understood Python build frontend/backend separation then I'd suggest it's still worth a mention for those like me who don't find it obvious.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arthur-tacca">@arthur-tacca</a> on 2025-10-30 15:15</div>
            <div class="timeline-body"><p>I don't have permission to add labels but I intend the labels to be <a href="https://github.com/astral-sh/uv/issues?q=state%3Aopen%20label%3Abuild-backend">build-backend</a> and <a href="https://github.com/astral-sh/uv/issues?q=state%3Aopen%20label%3Adocumentation">documentation</a></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-30 15:22</div>
            <div class="timeline-body"><ol>
<li>No, it does not.</li>
<li>No, it creates an isolated virtual environment per PEP 517.</li>
</ol>
<p>I'm not quite sure what the question means though. Like, what packages do you expect the build backend to be using that would be installed in a Python environment and pinned?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arthur-tacca">@arthur-tacca</a> on 2025-10-30 15:23</div>
            <div class="timeline-body"><p>I've just realised that this is a probably very silly point: if I've understood right, the uv build backend never runs any Python code, so it never uses <em>any</em> virtual environment and it doesn't even make sense to talk about a lock file for it. I'm coming from a Hatch/Hatchling background where these things do make sense because you might perform some build-time action in Python. Is that right? If so it might still be worth highlighting - but I'm not so sure.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-10-30 16:07</div>
            <div class="timeline-body"><p>If you use <code>python -m build</code> that build frontend will create a virtual environment, then install <code>uv-build</code> from PyPI in it, then run <code>uv-build</code>. This is the standard way to do a build.</p>
<p>If you use <code>uv build</code>, we'll do that if the <code>uv-build</code> requirement is incompatible with the current uv version, but often we can skip all that work and just run the Rust code directly.</p>
<p>In either case, the rest of the dependencies in your <code>uv.lock</code> should not be relevant though.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/arthur-tacca">@arthur-tacca</a> on 2025-10-30 16:27</div>
            <div class="timeline-body"><p>OK, I see. In summary, my original question was about how build-time dependencies are installed, and the answer is &quot;there aren't any&quot; (except <code>uv-build</code> sometimes, but that's not what I meant anyway). It may be that a comment could be worth it in the documentation, but since my main point was moot I'll just close this. Thanks @zanieb</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by @arthur-tacca on 2025-10-30 16:27</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:05 UTC
    </footer>
</body>
</html>
