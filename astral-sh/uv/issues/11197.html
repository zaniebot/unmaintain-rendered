<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suggestions on language server support when using inline script metadata - astral-sh/uv #11197</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>Suggestions on language server support when using inline script metadata</h1>

    <div class="meta">
        <span class="state-icon state-open"></span>
        <a href="https://github.com/astral-sh/uv/issues/11197">#11197</a>
        opened by <a href="https://github.com/SamEdwardes">@SamEdwardes</a>
        on 2025-02-03 21:46
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/SamEdwardes">@SamEdwardes</a></div>
            <div class="timeline-body">Question
<p>Uv inline metadata is one of my favourite uv features:  https://docs.astral.sh/uv/guides/scripts/#declaring-script-dependencies.</p>
<p>One challenge I have found is that you do not get good editor support for 3rd party libraries. For example, you will not get auto completion of class methods because the editor does not know where the virtual environment is, and what packages will be installed in it. For example:</p>
<pre><code># /// script
# dependencies = [
#   &quot;requests&lt;3&quot;,
#   &quot;rich&quot;,
# ]
# ///

import requests
from rich.pretty import pprint

resp = requests.get(&quot;https://peps.python.org/api/peps.json&quot;)
data = resp.json()
pprint([(k, v[&quot;title&quot;]) for k, v in data.items()][:10])
</code></pre>
<p>Do you have any suggestions on how to configure your editor, or other suggestions? I mostly use VS Code, Neo Vim,and Positron.</p>
Platform
<p><em>No response</em></p>
Version
<p><em>No response</em></p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/SamEdwardes">@SamEdwardes</a> on 2025-02-03 21:46</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-03 21:51</div>
            <div class="timeline-body"><p>Most of the existing discussion is over in <a href="https://github.com/astral-sh/uv/issues/6637">astral-sh/uv#6637</a> in which I shared a command to create the environment at <a href="https://github.com/astral-sh/uv/issues/6637">astral-sh/uv#6637</a>#issuecomment-2584434822</p>
<p>Unfortunately you&#x27;ll still need to toggle your active virtual environment. I&#x27;m not aware of any solutions in editors yet, but hopefully we can improve the editor integration in the future!</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/SamEdwardes">@SamEdwardes</a> on 2025-02-10 21:39</div>
            <div class="timeline-body"><p>Thank you for the suggestion. I think my question is a bit different than <a href="https://github.com/astral-sh/uv/issues/6637">astral-sh/uv#6637</a>. I am trying to think how I can tell the IDE to use the ephemeral virtual environment that will be created to run the script.</p>
<p>Either way, your comment does help! In the future it would be awesome if there was some kind of deeper IDE integration. E.g. VS Code recognized that the script has inline metadata, and somehow activates the right venv, or at least makes it available from the list of interpreters to choose from.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-02-10 23:14</div>
            <div class="timeline-body"><p>In VS Code you&#x27;d use <code>Python: Select interpreter</code> and select the script virtual environment.</p>
<p>We&#x27;re working on #11361 which will at least use a stable path for the script environments so you can create and select it easily.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/dnwe">@dnwe</a> on 2025-02-12 16:50</div>
            <div class="timeline-body"><p>@zanieb just need that â€”edit next, aâ€™la <a href="https://github.com/astral-sh/uv/issues/6637">astral-sh/uv#6637</a>#issuecomment-2589997123 ðŸ˜…</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:37:03 UTC
    </footer>
</body>
</html>
