<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv python list --only-installed` very slow on windows - astral-sh/uv #12617</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1>`uv python list --only-installed` very slow on windows</h1>

    <div class="meta">
        <span class="state state-open">Open</span>
        <a href="https://github.com/astral-sh/uv/issues/12617">#12617</a>
        opened by <a href="https://github.com/karthiknadig">@karthiknadig</a>
        on 2025-04-02 02:19
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header">Issue opened by <a href="https://github.com/karthiknadig">@karthiknadig</a> on 2025-04-02 02:19</div>
            <div class="timeline-body"><h3>Summary</h3>
<pre><code>PS C:\Users\kanadig&gt; Measure-Command { uv python list --only-installed }


Days              : 0
Hours             : 0
Minutes           : 0
Seconds           : 22
Milliseconds      : 495
Ticks             : 224955514
TotalDays         : 0.000260365178240741
TotalHours        : 0.00624876427777778
TotalMinutes      : 0.374925856666667
TotalSeconds      : 22.4955514
TotalMilliseconds : 22495.5514

</code></pre>
<h3>Platform</h3>
<p>Windows 11</p>
<h3>Version</h3>
<p>uv 0.6.11 (0632e24d1 2025-03-30)</p>
<h3>Python version</h3>
<p>NA</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> added by @karthiknadig on 2025-04-02 02:19</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">bug</span> removed by @charliermarsh on 2025-04-02 02:24</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">performance</span> added by @charliermarsh on 2025-04-02 02:24</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-02 02:25</div>
            <div class="timeline-body"><p>Can you share the output of <code>UV_LOG_CONTEXT=1 uv python list --only-installed -vv</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/karthiknadig">@karthiknadig</a> on 2025-04-02 02:32</div>
            <div class="timeline-body"><pre><code>&gt;uv python list --only-installed -vv
    0.000115s DEBUG uv uv 0.6.11 (0632e24d1 2025-03-30)
    0.004095s DEBUG uv_python::discovery Searching for any Python interpreter in managed installations, search path, or registry
    0.004593s DEBUG uv_python::discovery Searching for managed installations at `AppData\Roaming\uv\data\python`
    0.005740s TRACE uv_python::discovery Searching PATH for executables: python.exe, python3.exe, cpython.exe, cpython3.exe, pypy.exe, pypy3.exe, graalpy.exe, graalpy3.exe
    0.006309s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Users\kanadig\AppData\Local\fnm_multishells\21856_1743559611366
    0.008829s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Program Files (x86)\Common Files\Oracle\Java\java8path
    0.010539s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Python312\Scripts\
    0.011796s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Python312\
    0.012930s TRACE uv_python::discovery Found possible Python executable: C:\Python312\python.exe
    0.048531s TRACE uv_python::interpreter Cached interpreter info for Python 3.12.9, skipping probing: C:\Python312\python.exe
    0.049164s DEBUG uv_python::discovery Found `cpython-3.12.9-windows-x86_64-none` at `C:\Python312\python.exe` (first executable in the search path)
    0.050315s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Python311\Scripts\
    0.051617s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Python311\
    0.053104s TRACE uv_python::discovery Found possible Python executable: C:\Python311\python.exe
    0.087687s TRACE uv_python::interpreter Cached interpreter info for Python 3.11.9, skipping probing: C:\Python311\python.exe
    0.088110s DEBUG uv_python::discovery Found `cpython-3.11.9-windows-x86_64-none` at `C:\Python311\python.exe` (search path)
    0.089323s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Program Files\Quarto\bin
    0.090395s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Program Files (x86)\Microsoft SDKs\Azure\CLI2\wbin
    0.091446s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\WINDOWS\system32
    0.100795s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\WINDOWS
    0.102493s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\WINDOWS\System32\Wbem
    0.104659s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\WINDOWS\System32\WindowsPowerShell\v1.0\
    0.106037s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\WINDOWS\System32\OpenSSH\
    0.107569s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\ProgramData\chocolatey\bin
    0.108923s TRACE uv_python::discovery Found possible Python executable: C:\ProgramData\chocolatey\bin\python3.11.exe
    0.109282s TRACE uv_python::interpreter Querying interpreter executable at C:\ProgramData\chocolatey\bin\python3.11.exe
    0.778868s DEBUG uv_python::discovery Found `cpython-3.11.9-windows-x86_64-none` at `C:\ProgramData\chocolatey\bin\python3.11.exe` (search path)
    0.779317s TRACE uv_python::discovery Found possible Python executable: C:\ProgramData\chocolatey\bin\python3.12.exe
    0.780722s TRACE uv_python::interpreter Querying interpreter executable at C:\ProgramData\chocolatey\bin\python3.12.exe
    1.607449s DEBUG uv_python::discovery Found `cpython-3.12.9-windows-x86_64-none` at `C:\ProgramData\chocolatey\bin\python3.12.exe` (search path)
    1.608136s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\ProgramData\miniconda3\Scripts
    1.610276s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Program Files\WinMerge
    1.611419s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Program Files\Hatch\
    1.612254s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Program Files\Docker\Docker\resources\bin
    1.613063s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Program Files\Git\cmd
    1.614020s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Program Files\dotnet\
    1.615158s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Users\kanadig\.pixi\bin
    1.617786s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Users\kanadig\.cargo\bin
    1.620380s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps
    1.624448s TRACE uv_python::discovery Found possible Python executable: C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python.exe
    1.625352s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python.exe
    7.757051s DEBUG uv_python::discovery Found `cpython-3.8.10-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python.exe` (search path)
    7.758741s TRACE uv_python::discovery Found possible Python executable: C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.exe
    7.759738s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.exe
    8.793250s DEBUG uv_python::discovery Found `cpython-3.8.10-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.exe` (search path)
    8.794194s TRACE uv_python::discovery Found possible Python executable: C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.10.exe
    8.795535s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.10.exe
   11.570781s DEBUG uv_python::discovery Found `cpython-3.10.11-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.10.exe` (search path)
   11.571483s TRACE uv_python::discovery Found possible Python executable: C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.11.exe
   11.571967s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.11.exe
   14.468696s DEBUG uv_python::discovery Found `cpython-3.11.9-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.11.exe` (search path)
   14.469978s TRACE uv_python::discovery Found possible Python executable: C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.12.exe
   14.471097s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.12.exe
   16.708867s DEBUG uv_python::discovery Found `cpython-3.12.9-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.12.exe` (search path)
   16.709717s TRACE uv_python::discovery Found possible Python executable: C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.13.exe
   16.710673s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.13.exe
   19.090915s DEBUG uv_python::discovery Found `cpython-3.13.2-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.13.exe` (search path)
   19.091838s TRACE uv_python::discovery Found possible Python executable: C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.8.exe
   19.092312s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.8.exe
   20.290344s DEBUG uv_python::discovery Found `cpython-3.8.10-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.8.exe` (search path)
   20.290981s TRACE uv_python::discovery Found possible Python executable: C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.9.exe
   20.291997s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.9.exe
   24.837030s DEBUG uv_python::discovery Found `cpython-3.9.13-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python3.9.exe` (search path)
   24.837747s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Users\kanadig\AppData\Local\Programs\Microsoft VS Code\bin
   24.840062s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\texlive\2024\bin\windows
   24.843596s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Users\kanadig\AppData\Local\Microsoft\WinGet\Packages\Schniz.fnm_Microsoft.Winget.Source_8wekyb3d8bbwe
   24.845485s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Users\kanadig\AppData\Local\Programs\Microsoft VS Code Insiders\bin
   24.847255s TRACE uv_python::discovery Checking `PATH` directory for interpreters: C:\Users\kanadig\AppData\Local\Programs\nu\bin\
   24.850167s TRACE uv_python::interpreter Querying interpreter executable at C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\python3.12.exe
   25.625747s DEBUG uv_python::discovery Found `cpython-3.12.9-windows-x86_64-none` at `C:\Program Files\WindowsApps\PythonSoftwareFoundation.Python.3.12_3.12.2544.0_x64__qbz5n2kfra8p0\python3.12.exe` (registry)
   25.626658s TRACE uv_python::interpreter Cached interpreter info for Python 3.12.9, skipping probing: C:\Python312\python.exe
   25.627062s DEBUG uv_python::discovery Found `cpython-3.12.9-windows-x86_64-none` at `C:\Python312\python.exe` (registry)
   25.628085s TRACE uv_python::interpreter Cached interpreter info for Python 3.11.9, skipping probing: C:\Python311\python.exe
   25.628318s DEBUG uv_python::discovery Found `cpython-3.11.9-windows-x86_64-none` at `C:\Python311\python.exe` (registry)
   25.644918s TRACE uv_python::interpreter Cached interpreter info for Python 3.7.9, skipping probing: C:\Program Files\Python37\python.exe
   25.645146s DEBUG uv_python::discovery Found `cpython-3.7.9-windows-x86_64-none` at `C:\Program Files\Python37\python.exe` (registry)
   25.645803s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\python.exe
   26.430009s DEBUG uv_python::discovery Found `cpython-3.13.2-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\python.exe` (Microsoft Store)
   26.430695s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.12_qbz5n2kfra8p0\python.exe
   27.165224s DEBUG uv_python::discovery Found `cpython-3.12.9-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.12_qbz5n2kfra8p0\python.exe` (Microsoft Store)
   27.166381s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\python.exe
   27.949781s DEBUG uv_python::discovery Found `cpython-3.11.9-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\python.exe` (Microsoft Store)
   27.950701s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\python.exe
   28.937931s DEBUG uv_python::discovery Found `cpython-3.10.11-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\python.exe` (Microsoft Store)
   28.939112s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.9_qbz5n2kfra8p0\python.exe
   30.012801s DEBUG uv_python::discovery Found `cpython-3.9.13-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.9_qbz5n2kfra8p0\python.exe` (Microsoft Store)
   30.013740s TRACE uv_python::interpreter Querying interpreter executable at C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\python.exe
   30.982887s DEBUG uv_python::discovery Found `cpython-3.8.10-windows-x86_64-none` at `C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\python.exe` (Microsoft Store)
cpython-3.13.2-windows-x86_64-none     AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.13_qbz5n2kfra8p0\python.exe
cpython-3.12.9-windows-x86_64-none     c:\python312\python.exe
cpython-3.12.9-windows-x86_64-none     AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.12_qbz5n2kfra8p0\python.exe
cpython-3.12.9-windows-x86_64-none     C:\Python312\python.exe
cpython-3.11.9-windows-x86_64-none     c:\python311\python.exe
cpython-3.11.9-windows-x86_64-none     AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.11_qbz5n2kfra8p0\python.exe
cpython-3.11.9-windows-x86_64-none     C:\Python311\python.exe
cpython-3.10.11-windows-x86_64-none    AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.10_qbz5n2kfra8p0\python.exe
cpython-3.9.13-windows-x86_64-none     AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.9_qbz5n2kfra8p0\python.exe
cpython-3.8.10-windows-x86_64-none     AppData\Local\Microsoft\WindowsApps\PythonSoftwareFoundation.Python.3.8_qbz5n2kfra8p0\python.exe
cpython-3.7.9-windows-x86_64-none      C:\Program Files\Python37\python.exe
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-02 13:15</div>
            <div class="timeline-body"><p>It looks like the vast majority of time is spent querying interpreters to determine they are valid.</p>
<p>Does running <code>C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python.exe</code> take multiple seconds?</p>
<p>Our interpreter query script shouldn't be particularly slow https://github.com/astral-sh/uv/blob/40efe6119bd645a061e975955139f6bde8a2f56a/crates/uv-python/python/get_interpreter_info.py</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/karthiknadig">@karthiknadig</a> on 2025-04-02 14:48</div>
            <div class="timeline-body"><p>It takes about a second to run that script:</p>
<pre><code>&gt; Measure-Command { C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python.exe .\get_interpreter_info.py }


Days              : 0
Hours             : 0
Minutes           : 0
Seconds           : 1
Milliseconds      : 69
Ticks             : 10698871
TotalDays         : 1.23829525462963E-05
TotalHours        : 0.000297190861111111
TotalMinutes      : 0.0178314516666667
TotalSeconds      : 1.0698871
TotalMilliseconds : 1069.8871
</code></pre>
<p>The above was the worst case for me, typically it is around this range:</p>
<pre><code>&gt; Measure-Command { C:\Users\kanadig\AppData\Local\Microsoft\WindowsApps\python.exe .\get_interpreter_info.py }


Days              : 0
Hours             : 0
Minutes           : 0
Seconds           : 0
Milliseconds      : 697
Ticks             : 6972220
TotalDays         : 8.06969907407407E-06
TotalHours        : 0.000193672777777778
TotalMinutes      : 0.0116203666666667
TotalSeconds      : 0.697222
TotalMilliseconds : 697.222
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-04-02 14:57</div>
            <div class="timeline-body"><p>Interesting, thanks for the details.</p>
<p>I can only presume that something external to uv is delaying this operation?</p>
<p>We could run these queries concurrently, but that still puts the lower bound higher than I'd want.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-09 23:35:03 UTC
    </footer>
</body>
</html>
