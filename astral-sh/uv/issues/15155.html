<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>`uv remove` does not delete packages in the virtual environment. - astral-sh/uv #15155</title>
    <link rel="stylesheet" href="../../../style.css">
</head>
<body>
    <div class="back-link">
        <a href="../../../index.html">Back to index</a>
    </div>

    <h1><code>uv remove</code> does not delete packages in the virtual environment.</h1>

    <div class="meta">
        <span class="state-icon state-closed"></span>
        <a href="https://github.com/astral-sh/uv/issues/15155">#15155</a>
        opened by <a href="https://github.com/Mefamex">@Mefamex</a>
        on 2025-08-07 22:27
    </div>

    <div class="timeline">
        <div class="timeline-entry">
            <div class="timeline-header"><a href="https://github.com/Mefamex">@Mefamex</a></div>
            <div class="timeline-body">Summary
<p><code>uv remove &lt;package&gt;</code> doesn&#x27;t remove some packages in the virtual environment. It only removes them from the project&#x27;s dependencies.</p>
<p>To completely remove them from the virtual environment, we have to use <code>uv pip uninstall &lt;package&gt;</code>.</p>
<p>Is there a solution or suggestion for this?</p>
Example
<p>(.venv) D:\SOFTWARE\PYTHON\Projects\noone&gt;<strong>uv remove pip</strong>
Resolved 1 package in 15ms
Audited in 0.06ms</p>
<p>(.venv) D:\SOFTWARE\PYTHON\Projects\noone&gt;<strong>uv remove pip</strong>
error: The dependency <code>pip</code> could not be found in <code>project.dependencies</code></p>
<p>(.venv) D:\SOFTWARE\PYTHON\Projects\noone&gt;<strong>uv pip uninstall pip</strong>
Uninstalled 1 package in 36ms</p>
<ul>
<li>pip==25.2</li>
</ul>
<p>(.venv) D:\SOFTWARE\PYTHON\Projects\noone&gt;<strong>uv pip uninstall pip</strong>
warning: Skipping pip as it is not installed
warning: No packages to uninstall</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> added by <a href="https://github.com/Mefamex">@Mefamex</a> on 2025-08-07 22:27</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-08 00:55</div>
            <div class="timeline-body"><p>Can you share a reproducible example? e.g., starting with <code>uv init</code>?</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Mefamex">@Mefamex</a> on 2025-08-08 12:34</div>
            <div class="timeline-body">COMMAND (win-bat)
<pre><code>
@ECHO off 

ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO Check uv 
uv self version &amp;&amp; python.exe -m uv self version



ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO create folder
mkdir uv_issue
cd uv_issue &amp;&amp; cd



ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO create virtual env safely
python.exe -m venv .venv
dir /B


ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO include UV
uv init 



ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO check files before changes
more pyproject.toml
dir .venv\Lib\site-packages /B 


ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO add a package
uv add pip 

ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO check the existence of the package in the project
more pyproject.toml
dir .venv\Lib\site-packages /B 

ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO maybe I dont want it in my project
uv remove pip 

ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO Why do they still have folders?
more pyproject.toml
dir .venv\Lib\site-packages /B 



ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO Let&#x27;s try another package
uv add uv 
uv remove uv 
more pyproject.toml
dir .venv\Lib\site-packages /B 

ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO its same 



ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO But &#x27;uv remove&#x27; only does not work on some packages. 

ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO for example its work on another package

uv add wheel
uv remove wheel
more pyproject.toml
dir .venv\Lib\site-packages /B 


ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO Why are some package files not removed from the &#x27;site-packages&#x27; folder 
ECHO.&amp;&amp;ECHO.&amp;&amp;ECHO                               even though they are removed from &#x27;pyproject.toml&#x27;?

</code></pre>
<p><br><br></p>
OUTPUT:
<pre><code>

Check uv
uv 0.8.6 (329a6b446 2025-08-07)
uv 0.8.6 (329a6b446 2025-08-07)


create folder


create virtual env safely


include UV
Initialized project `uv-issue`


check files before changes
[project]
name = &quot;uv-issue&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.13&quot;
dependencies = []
pip
pip-25.1.1.dist-info


add a package
Resolved 2 packages in 6ms
Uninstalled 1 package in 101ms
Installed 1 package in 67ms
 - pip==25.1.1
 + pip==25.2


check the existence of the package in the project
[project]
name = &quot;uv-issue&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.13&quot;
dependencies = [
    &quot;pip&gt;=25.2&quot;,
]
pip
pip-25.2.dist-info


maybe I dont want it in my project
Resolved 1 package in 6ms
Audited in 0.08ms


Why do they still have folders?
[project]
name = &quot;uv-issue&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.13&quot;
dependencies = []
pip
pip-25.2.dist-info


Let&#x27;s try another package
Resolved 2 packages in 306ms
Installed 1 package in 9ms
 + uv==0.8.6
Resolved 1 package in 5ms
Audited in 0.09ms
[project]
name = &quot;uv-issue&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.13&quot;
dependencies = []
pip
pip-25.2.dist-info
uv
uv-0.8.6.dist-info


its same


But &#x27;uv remove&#x27; only does not work on some packages.


for example its work on another package
Resolved 2 packages in 7ms
Installed 1 package in 25ms
 + wheel==0.45.1
Resolved 1 package in 4ms
Uninstalled 1 package in 3ms
 - wheel==0.45.1
[project]
name = &quot;uv-issue&quot;
version = &quot;0.1.0&quot;
description = &quot;Add your description here&quot;
readme = &quot;README.md&quot;
requires-python = &quot;&gt;=3.13&quot;
dependencies = []
pip
pip-25.2.dist-info
uv
uv-0.8.6.dist-info


Why are some package files not removed from the &#x27;site-packages&#x27; folder
                   even though they are removed from &#x27;pyproject.toml&#x27;?
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-08 12:39</div>
            <div class="timeline-body"><p>We don&#x27;t remove <code>pip</code> here because it&#x27;s seeded by <code>python -m venv</code>. It&#x27;s already present in the environment and not managed by uv. If you didn&#x27;t use <code>python -m venv</code>, we would remove it.</p>
<pre><code>❯ uv init example
Initialized project `example` at `/Users/zb/workspace/uv/example`
❯ cd example
❯ uv add pip
Using CPython 3.13.2
Creating virtual environment at: .venv
Resolved 2 packages in 77ms
Prepared 1 package in 278ms
Installed 1 package in 9ms
 + pip==25.2
❯ uv remove pip
Resolved 1 package in 4ms
Uninstalled 1 package in 41ms
 - pip==25.2
❯ rm -rf .venv
❯ uvx python -m venv .venv
❯ uv add pip
Resolved 2 packages in 9ms
Uninstalled 1 package in 50ms
Installed 1 package in 12ms
 - pip==24.3.1
 + pip==25.2
❯ uv remove pip
Resolved 1 package in 2ms
Audited in 0.04ms
</code></pre>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">enhancement</span> removed by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-08 12:40</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Label <span class="label">question</span> added by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-08 12:40</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-08 12:40</div>
            <div class="timeline-body"><p>(There&#x27;s no reason to create the venv ahead of time, uv will do that for you)</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/Mefamex">@Mefamex</a> on 2025-08-09 11:07</div>
            <div class="timeline-body">Thank you, I understand now.
<p>The issue occurs because <code>pip</code> was pre-installed by <code>python -m venv</code> and therefore isn&#x27;t managed by uv. Since uv didn&#x27;t install it originally, <code>uv remove</code> only removes it from the project dependencies but leaves the physical package untouched in the virtual environment.</p>
Regarding my workflow choice:
<p>I prefer using <code>python -m venv .venv</code> initially because I want to maintain full control over the virtual environment creation process and ensure compatibility with standard Python tooling.</p>
Alternative hybrid approach:
<p>For projects where I want the speed benefits of uv for package management while maintaining a standard venv setup, this workflow works well:</p>
<pre><code>python.exe -m venv .venv
.venv\Scripts\activate
uv pip install -r requirements.txt
</code></pre>
<p>This approach gives me:</p>
<ul>
<li>Fast package installation via uv</li>
<li>Standard Python virtual environment</li>
<li>Compatibility with existing pip-based workflows</li>
<li>No project structure changes imposed by uv</li>
</ul>
Trade-offs to consider
<p><strong>However, I recognize this is a trade-off.</strong> While this hybrid approach works for my current needs, it means missing out on uv&#x27;s advanced features like automatic dependency resolution, lock files (though I could still use <code>pip freeze</code> if needed), and integrated project management. For teams or projects that can fully adopt uv&#x27;s ecosystem, using <code>uv init</code> and letting uv manage the entire environment would likely be more efficient.</p>
<p>The key insight here is understanding which packages uv manages versus which are pre-existing in the environment.</p>
</div>
        </div>
        <div class="timeline-entry">
            <div class="event">Closed by <a href="https://github.com/Mefamex">@Mefamex</a> on 2025-08-09 11:07</div>
        </div>
        <div class="timeline-entry">
            <div class="timeline-header">Comment by <a href="https://github.com/zanieb">@zanieb</a> on 2025-08-09 14:29</div>
            <div class="timeline-body"><blockquote>
<p>I want to maintain full control over the virtual environment creation process and ensure compatibility with standard Python tooling.</p>
</blockquote>
<p>You can use <code>uv venv</code>. We follow all of the standards for virtual environment creation and the environment is usable with any other tools.</p>
</div>
        </div>
    </div>

    <footer>
        Synced at 2026-01-20 19:39:54 UTC
    </footer>
</body>
</html>
